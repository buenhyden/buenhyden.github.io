<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>jwt vs. Cookie-Based Auth | hyunyoun's Blog</title><meta name=keywords content="Backend-Development,API-Design,Authentication-Methods,JWT"><meta name=description content="JWT는 Stateless한 인증이 필요한 경우(예: API 중심 애플리케이션, 마이크로서비스)에 적합하다. Cookie 기반 인증은 전통적인 웹 애플리케이션에서 더 적합하며, 특히 보안 요구 사항이 높은 경우 유리한다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/cybersecurity-and-information-security/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-cookie-based-auth/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/cybersecurity-and-information-security/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-cookie-based-auth/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/cybersecurity-and-information-security/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-cookie-based-auth/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="jwt vs. Cookie-Based Auth"><meta property="og:description" content="JWT는 Stateless한 인증이 필요한 경우(예: API 중심 애플리케이션, 마이크로서비스)에 적합하다. Cookie 기반 인증은 전통적인 웹 애플리케이션에서 더 적합하며, 특히 보안 요구 사항이 높은 경우 유리한다."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-04-02T02:47:00+00:00"><meta property="article:modified_time" content="2025-04-02T02:47:00+00:00"><meta property="article:tag" content="Backend Development"><meta property="article:tag" content="API-Design"><meta property="article:tag" content="Authentication-Methods"><meta property="article:tag" content="JWT"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="jwt vs. Cookie-Based Auth"><meta name=twitter:description content="JWT는 Stateless한 인증이 필요한 경우(예: API 중심 애플리케이션, 마이크로서비스)에 적합하다. Cookie 기반 인증은 전통적인 웹 애플리케이션에서 더 적합하며, 특히 보안 요구 사항이 높은 경우 유리한다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Computer Science and Engineering","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Cybersecurity and Information Security","item":"https://buenhyden.github.io/posts/cybersecurity-and-information-security/"},{"@type":"ListItem","position":3,"name":"Access Control","item":""},{"@type":"ListItem","position":4,"name":"Authentication","item":"https://buenhyden.github.io/posts/cybersecurity-and-information-security/access-control/authentication/"},{"@type":"ListItem","position":5,"name":"Implementations","item":"https://buenhyden.github.io/posts/cybersecurity-and-information-security/access-control/authentication/implementations/"},{"@type":"ListItem","position":6,"name":"Token-Based Authentication","item":"https://buenhyden.github.io/posts/cybersecurity-and-information-security/access-control/authentication/implementations/token-based-authentication/"},{"@type":"ListItem","position":7,"name":"JWT authentication","item":"https://buenhyden.github.io/posts/cybersecurity-and-information-security/access-control/authentication/implementations/token-based-authentication/jwt/"},{"@type":"ListItem","position":8,"name":"jwt vs. Cookie-Based Auth","item":"https://buenhyden.github.io/posts/cybersecurity-and-information-security/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-cookie-based-auth/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"jwt vs. Cookie-Based Auth","name":"jwt vs. Cookie-Based Auth","description":"JWT는 Stateless한 인증이 필요한 경우(예: API 중심 애플리케이션, 마이크로서비스)에 적합하다. Cookie 기반 인증은 전통적인 웹 애플리케이션에서 더 적합하며, 특히 보안 요구 사항이 높은 경우 유리한다.","keywords":["Backend-Development","API-Design","Authentication-Methods","JWT"],"articleBody":"Jwt vs. Cookie-Based Auth 기본 개념 JWT (JSON Web Token)\nJWT는 당사자 간 정보를 안전하게 JSON 객체로 전송하기 위한 컴팩트하고 독립적인 방식이다. 이 정보는 디지털 서명되어 있어 신뢰할 수 있다. JWT는 HMAC 알고리즘이나 RSA/ECDSA와 같은 공개/개인 키 쌍을 사용하여 서명할 수 있다.\n쿠키 기반 인증\n쿠키 기반 인증은 사용자가 로그인할 때 서버가 세션 ID를 생성하고, 이 세션 ID를 쿠키에 저장하여 클라이언트에게 전송하는 방식이다. 모든 후속 요청에서 클라이언트는 이 쿠키를 서버에 보내고, 서버는 세션 ID를 확인하여 사용자를 인증한다.\n작동 원리 JWT 작동 원리 사용자가 로그인하면 서버는 JWT를 생성한다. JWT는 헤더(알고리즘 및 토큰 타입), 페이로드(클레임), 서명으로 구성된다. 서버는 이 토큰을 클라이언트에게 반환한다. 클라이언트는 이 토큰을 로컬 스토리지나 쿠키에 저장한다. 이후 요청 시 클라이언트는 Authorization 헤더에 이 토큰을 포함시킨다. 서버는 토큰을 검증하고 요청을 처리한다. 쿠키 기반 인증 작동 원리 사용자가 로그인하면 서버는 세션 ID를 생성한다. 서버는 이 세션 ID를 서버 측 데이터베이스(세션 저장소)에 저장한다. 서버는 이 세션 ID를 쿠키에 담아 클라이언트에게 전송한다. 클라이언트는 이 쿠키를 브라우저에 저장한다. 이후 요청 시 브라우저는 자동으로 이 쿠키를 요청에 포함시킨다. 서버는 쿠키 내 세션 ID를 확인하여 사용자를 인증한다. 주요 차이점 상태 관리 JWT: 상태 비저장(Stateless) 방식으로, 서버는 클라이언트 상태를 저장하지 않는다. 쿠키 기반: 상태 저장(Stateful) 방식으로, 서버는 세션 데이터를 저장한다. 데이터 저장 위치 JWT: 클라이언트 측에 모든 필요한 정보를 저장한다. 쿠키 기반: 세션 ID만 클라이언트에 저장하고, 실제 데이터는 서버에 저장한다. 확장성 JWT: 분산 시스템에서 확장이 용이하다. 쿠키 기반: 세션 정보를 공유하기 위한 추가 메커니즘이 필요하다. 보안 JWT: 토큰 자체에 정보가 포함되어 있어, 토큰 탈취 시 정보 노출 위험이 있다. 쿠키 기반: 세션 ID만 노출되며, 실제 데이터는 서버에 안전하게 보관된다. 장단점 JWT 장점 서버 부하 감소: 세션 저장소가 필요 없다. 확장성: 분산 시스템에서 효율적이다. 교차 도메인 지원: 다양한 도메인 간 인증이 용이하다. 모바일 애플리케이션 지원: 네이티브 앱에서 사용하기 좋다. 단점 토큰 크기: 많은 정보를 담을수록 토큰 크기가 커진다. 보안 위험: 클라이언트에 저장된 정보는 탈취될 수 있다. 토큰 무효화: 발급된 토큰을 무효화하기 어렵다. 갱신 메커니즘: 토큰 만료 시 갱신 프로세스가 필요하다. Cookie-Based Auth 장점 즉각적인 무효화: 세션을 언제든지 서버에서 삭제할 수 있다. 데이터 보안: 민감한 정보는 서버에만 저장된다. 메모리 효율성: 클라이언트는 작은 세션 ID만 저장한다. 익숙한 구현: 많은 웹 프레임워크가 기본적으로 지원한다. 단점 서버 부하: 각 사용자 세션을 서버에 저장해야 한다. 확장성 문제: 여러 서버 간 세션 공유 메커니즘이 필요하다. CSRF 취약점: 적절한 보호가 없으면 CSRF 공격에 취약하다. 쿠키 제한: 일부 환경에서는 쿠키 사용이 제한될 수 있다. 적합한 사용 시나리오 JWT에 적합한 시나리오 마이크로서비스 아키텍처 모바일 애플리케이션 서버리스 환경 단기 인증이 필요한 경우 분산 시스템 쿠키 기반에 적합한 시나리오 전통적인 웹 애플리케이션 높은 보안이 필요한 환경 사용자 세션을 빠르게 무효화해야 하는 경우 사용자 데이터가 자주 변경되는 경우 단일 서버 환경 6. Jwt vs. Cookie-Based Auth 특성 JWT 쿠키 기반 인증 상태 관리 Stateless (상태 비저장) Stateful (상태 저장) 데이터 저장 위치 클라이언트 측 서버 측 (세션 ID만 클라이언트) 확장성 높음 낮음 (세션 공유 필요) 서버 부하 낮음 높음 토큰/세션 크기 클 수 있음 (데이터에 따라) 작음 (세션 ID만) 보안 중간 (토큰 탈취 위험) 높음 (데이터는 서버에만) 즉시 무효화 가능성 어려움 쉬움 CSRF 취약성 낮음 (헤더 사용 시) 높음 (보호 필요) 구현 복잡성 중간 낮음 (프레임워크 지원) 모바일 지원 우수함 제한적 교차 도메인 지원 우수함 제한적 (CORS 설정 필요) 만료 처리 내장 기능 별도 구현 필요 메모리 사용량 클라이언트: 높음, 서버: 낮음 클라이언트: 낮음, 서버: 높음 적합한 아키텍처 마이크로서비스, 분산 시스템 모놀리식, 단일 서버 환경 실제 구현 예시 JWT 구현 예시 (Node.js) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 // JWT 인증 구현 예시 const jwt = require('jsonwebtoken'); const express = require('express'); const app = express(); app.use(express.json()); // 로그인 라우트 app.post('/login', (req, res) =\u003e { // 사용자 검증 (데이터베이스 조회 등) const user = { id: 1, username: 'test_user' }; // JWT 생성 const token = jwt.sign( { userId: user.id, username: user.username }, 'your_jwt_secret', // 실제로는 환경 변수에서 가져와야 함 { expiresIn: '1h' } // 토큰 만료 시간 ); // 클라이언트에 토큰 반환 res.json({ token }); }); // 인증 미들웨어 function authenticateToken(req, res, next) { const authHeader = req.headers['authorization']; const token = authHeader \u0026\u0026 authHeader.split(' ')[1]; if (!token) return res.sendStatus(401); jwt.verify(token, 'your_jwt_secret', (err, user) =\u003e { if (err) return res.sendStatus(403); req.user = user; next(); }); } // 인증된 라우트 app.get('/protected', authenticateToken, (req, res) =\u003e { res.json({ message: '인증된 사용자입니다!', user: req.user }); }); app.listen(3000); 쿠키 기반 인증 구현 예시 (Node.js) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 // 쿠키 기반 인증 구현 예시 const express = require('express'); const session = require('express-session'); const app = express(); app.use(express.json()); // 세션 미들웨어 설정 app.use(session({ secret: 'your_session_secret', // 실제로는 환경 변수에서 가져와야 함 resave: false, saveUninitialized: false, cookie: { secure: process.env.NODE_ENV === 'production', // HTTPS에서만 쿠키 전송 httpOnly: true, // JS에서 쿠키 접근 방지 maxAge: 3600000 // 1시간 후 만료 } })); // 로그인 라우트 app.post('/login', (req, res) =\u003e { // 사용자 검증 (데이터베이스 조회 등) const user = { id: 1, username: 'test_user' }; // 세션에 사용자 정보 저장 req.session.user = user; res.json({ message: '로그인 성공!' }); }); // 인증 미들웨어 function authenticate(req, res, next) { if (!req.session.user) { return res.status(401).json({ message: '인증 필요' }); } next(); } // 인증된 라우트 app.get('/protected', authenticate, (req, res) =\u003e { res.json({ message: '인증된 사용자입니다!', user: req.session.user }); }); // 로그아웃 라우트 app.post('/logout', (req, res) =\u003e { req.session.destroy(); res.json({ message: '로그아웃 성공!' }); }); app.listen(3000); 용어 정리 용어 설명 참고 및 출처 ","wordCount":"934","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2025-04-02T02:47:00Z","dateModified":"2025-04-02T02:47:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/cybersecurity-and-information-security/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-cookie-based-auth/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>Computer Science and Engineering</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/cybersecurity-and-information-security/>Cybersecurity and Information Security</a>&nbsp;»&nbsp;<a href>Access Control</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/cybersecurity-and-information-security/access-control/authentication/>Authentication</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/cybersecurity-and-information-security/access-control/authentication/implementations/>Implementations</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/cybersecurity-and-information-security/access-control/authentication/implementations/token-based-authentication/>Token-Based Authentication</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/cybersecurity-and-information-security/access-control/authentication/implementations/token-based-authentication/jwt/>JWT authentication</a></div><h1 class="post-title entry-hint-parent">jwt vs. Cookie-Based Auth</h1><div class=post-description>JWT는 Stateless한 인증이 필요한 경우(예: API 중심 애플리케이션, 마이크로서비스)에 적합하다. Cookie 기반 인증은 전통적인 웹 애플리케이션에서 더 적합하며, 특히 보안 요구 사항이 높은 경우 유리한다.</div><div class=post-meta><span title='2025-04-02 02:47:00 +0000 UTC'>April 2, 2025</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Cybersecurity%20and%20Information%20Security/Access%20Control/Authentication/Implementations/Token-Based%20Authentication/JWT/jwt-vs-cookie-based-auth.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#jwt-vs-cookie-based-auth>Jwt vs. Cookie-Based Auth</a><ul><li><a href=#기본-개념>기본 개념</a></li><li><a href=#작동-원리>작동 원리</a></li><li><a href=#주요-차이점>주요 차이점</a></li><li><a href=#장단점>장단점</a></li><li><a href=#적합한-사용-시나리오>적합한 사용 시나리오</a></li><li><a href=#6-jwt-vs-cookie-based-auth>6. Jwt vs. Cookie-Based Auth</a></li><li><a href=#실제-구현-예시>실제 구현 예시</a></li></ul></li><li><a href=#용어-정리>용어 정리</a></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=jwt-vs-cookie-based-auth>Jwt vs. Cookie-Based Auth<a hidden class=anchor aria-hidden=true href=#jwt-vs-cookie-based-auth>#</a></h2><h3 id=기본-개념>기본 개념<a hidden class=anchor aria-hidden=true href=#기본-개념>#</a></h3><ul><li><p>JWT (JSON Web Token)<br>JWT는 당사자 간 정보를 안전하게 JSON 객체로 전송하기 위한 컴팩트하고 독립적인 방식이다. 이 정보는 디지털 서명되어 있어 신뢰할 수 있다. JWT는 HMAC 알고리즘이나 RSA/ECDSA와 같은 공개/개인 키 쌍을 사용하여 서명할 수 있다.</p></li><li><p>쿠키 기반 인증<br>쿠키 기반 인증은 사용자가 로그인할 때 서버가 세션 ID를 생성하고, 이 세션 ID를 쿠키에 저장하여 클라이언트에게 전송하는 방식이다. 모든 후속 요청에서 클라이언트는 이 쿠키를 서버에 보내고, 서버는 세션 ID를 확인하여 사용자를 인증한다.</p></li></ul><h3 id=작동-원리>작동 원리<a hidden class=anchor aria-hidden=true href=#작동-원리>#</a></h3><ul><li>JWT 작동 원리<ol><li>사용자가 로그인하면 서버는 JWT를 생성한다.</li><li>JWT는 헤더(알고리즘 및 토큰 타입), 페이로드(클레임), 서명으로 구성된다.</li><li>서버는 이 토큰을 클라이언트에게 반환한다.</li><li>클라이언트는 이 토큰을 로컬 스토리지나 쿠키에 저장한다.</li><li>이후 요청 시 클라이언트는 Authorization 헤더에 이 토큰을 포함시킨다.</li><li>서버는 토큰을 검증하고 요청을 처리한다.</li></ol></li><li>쿠키 기반 인증 작동 원리<ol><li>사용자가 로그인하면 서버는 세션 ID를 생성한다.</li><li>서버는 이 세션 ID를 서버 측 데이터베이스(세션 저장소)에 저장한다.</li><li>서버는 이 세션 ID를 쿠키에 담아 클라이언트에게 전송한다.</li><li>클라이언트는 이 쿠키를 브라우저에 저장한다.</li><li>이후 요청 시 브라우저는 자동으로 이 쿠키를 요청에 포함시킨다.</li><li>서버는 쿠키 내 세션 ID를 확인하여 사용자를 인증한다.</li></ol></li></ul><h3 id=주요-차이점>주요 차이점<a hidden class=anchor aria-hidden=true href=#주요-차이점>#</a></h3><ul><li>상태 관리<ul><li>JWT: 상태 비저장(Stateless) 방식으로, 서버는 클라이언트 상태를 저장하지 않는다.</li><li>쿠키 기반: 상태 저장(Stateful) 방식으로, 서버는 세션 데이터를 저장한다.</li></ul></li><li>데이터 저장 위치<ul><li>JWT: 클라이언트 측에 모든 필요한 정보를 저장한다.</li><li>쿠키 기반: 세션 ID만 클라이언트에 저장하고, 실제 데이터는 서버에 저장한다.</li></ul></li><li>확장성<ul><li>JWT: 분산 시스템에서 확장이 용이하다.</li><li>쿠키 기반: 세션 정보를 공유하기 위한 추가 메커니즘이 필요하다.</li></ul></li><li>보안<ul><li>JWT: 토큰 자체에 정보가 포함되어 있어, 토큰 탈취 시 정보 노출 위험이 있다.</li><li>쿠키 기반: 세션 ID만 노출되며, 실제 데이터는 서버에 안전하게 보관된다.</li></ul></li></ul><h3 id=장단점>장단점<a hidden class=anchor aria-hidden=true href=#장단점>#</a></h3><h4 id=jwt>JWT<a hidden class=anchor aria-hidden=true href=#jwt>#</a></h4><ul><li>장점<ul><li>서버 부하 감소: 세션 저장소가 필요 없다.</li><li>확장성: 분산 시스템에서 효율적이다.</li><li>교차 도메인 지원: 다양한 도메인 간 인증이 용이하다.</li><li>모바일 애플리케이션 지원: 네이티브 앱에서 사용하기 좋다.</li></ul></li><li>단점<ul><li>토큰 크기: 많은 정보를 담을수록 토큰 크기가 커진다.</li><li>보안 위험: 클라이언트에 저장된 정보는 탈취될 수 있다.</li><li>토큰 무효화: 발급된 토큰을 무효화하기 어렵다.</li><li>갱신 메커니즘: 토큰 만료 시 갱신 프로세스가 필요하다.</li></ul></li></ul><h4 id=cookie-based-auth>Cookie-Based Auth<a hidden class=anchor aria-hidden=true href=#cookie-based-auth>#</a></h4><ul><li>장점<ul><li>즉각적인 무효화: 세션을 언제든지 서버에서 삭제할 수 있다.</li><li>데이터 보안: 민감한 정보는 서버에만 저장된다.</li><li>메모리 효율성: 클라이언트는 작은 세션 ID만 저장한다.</li><li>익숙한 구현: 많은 웹 프레임워크가 기본적으로 지원한다.</li></ul></li><li>단점<ul><li>서버 부하: 각 사용자 세션을 서버에 저장해야 한다.</li><li>확장성 문제: 여러 서버 간 세션 공유 메커니즘이 필요하다.</li><li>CSRF 취약점: 적절한 보호가 없으면 CSRF 공격에 취약하다.</li><li>쿠키 제한: 일부 환경에서는 쿠키 사용이 제한될 수 있다.</li></ul></li></ul><h3 id=적합한-사용-시나리오>적합한 사용 시나리오<a hidden class=anchor aria-hidden=true href=#적합한-사용-시나리오>#</a></h3><ul><li>JWT에 적합한 시나리오<ul><li>마이크로서비스 아키텍처</li><li>모바일 애플리케이션</li><li>서버리스 환경</li><li>단기 인증이 필요한 경우</li><li>분산 시스템</li></ul></li><li>쿠키 기반에 적합한 시나리오<ul><li>전통적인 웹 애플리케이션</li><li>높은 보안이 필요한 환경</li><li>사용자 세션을 빠르게 무효화해야 하는 경우</li><li>사용자 데이터가 자주 변경되는 경우</li><li>단일 서버 환경</li></ul></li></ul><h3 id=6-jwt-vs-cookie-based-auth>6. Jwt vs. Cookie-Based Auth<a hidden class=anchor aria-hidden=true href=#6-jwt-vs-cookie-based-auth>#</a></h3><table><thead><tr><th>특성</th><th>JWT</th><th>쿠키 기반 인증</th></tr></thead><tbody><tr><td>상태 관리</td><td>Stateless (상태 비저장)</td><td>Stateful (상태 저장)</td></tr><tr><td>데이터 저장 위치</td><td>클라이언트 측</td><td>서버 측 (세션 ID만 클라이언트)</td></tr><tr><td>확장성</td><td>높음</td><td>낮음 (세션 공유 필요)</td></tr><tr><td>서버 부하</td><td>낮음</td><td>높음</td></tr><tr><td>토큰/세션 크기</td><td>클 수 있음 (데이터에 따라)</td><td>작음 (세션 ID만)</td></tr><tr><td>보안</td><td>중간 (토큰 탈취 위험)</td><td>높음 (데이터는 서버에만)</td></tr><tr><td>즉시 무효화 가능성</td><td>어려움</td><td>쉬움</td></tr><tr><td>CSRF 취약성</td><td>낮음 (헤더 사용 시)</td><td>높음 (보호 필요)</td></tr><tr><td>구현 복잡성</td><td>중간</td><td>낮음 (프레임워크 지원)</td></tr><tr><td>모바일 지원</td><td>우수함</td><td>제한적</td></tr><tr><td>교차 도메인 지원</td><td>우수함</td><td>제한적 (CORS 설정 필요)</td></tr><tr><td>만료 처리</td><td>내장 기능</td><td>별도 구현 필요</td></tr><tr><td>메모리 사용량</td><td>클라이언트: 높음, 서버: 낮음</td><td>클라이언트: 낮음, 서버: 높음</td></tr><tr><td>적합한 아키텍처</td><td>마이크로서비스, 분산 시스템</td><td>모놀리식, 단일 서버 환경</td></tr></tbody></table><h3 id=실제-구현-예시>실제 구현 예시<a hidden class=anchor aria-hidden=true href=#실제-구현-예시>#</a></h3><h4 id=jwt-구현-예시-nodejs>JWT 구현 예시 (Node.js)<a hidden class=anchor aria-hidden=true href=#jwt-구현-예시-nodejs>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a>
</span><span class=lnt id=hl-0-21><a class=lnlinks href=#hl-0-21>21</a>
</span><span class=lnt id=hl-0-22><a class=lnlinks href=#hl-0-22>22</a>
</span><span class=lnt id=hl-0-23><a class=lnlinks href=#hl-0-23>23</a>
</span><span class=lnt id=hl-0-24><a class=lnlinks href=#hl-0-24>24</a>
</span><span class=lnt id=hl-0-25><a class=lnlinks href=#hl-0-25>25</a>
</span><span class=lnt id=hl-0-26><a class=lnlinks href=#hl-0-26>26</a>
</span><span class=lnt id=hl-0-27><a class=lnlinks href=#hl-0-27>27</a>
</span><span class=lnt id=hl-0-28><a class=lnlinks href=#hl-0-28>28</a>
</span><span class=lnt id=hl-0-29><a class=lnlinks href=#hl-0-29>29</a>
</span><span class=lnt id=hl-0-30><a class=lnlinks href=#hl-0-30>30</a>
</span><span class=lnt id=hl-0-31><a class=lnlinks href=#hl-0-31>31</a>
</span><span class=lnt id=hl-0-32><a class=lnlinks href=#hl-0-32>32</a>
</span><span class=lnt id=hl-0-33><a class=lnlinks href=#hl-0-33>33</a>
</span><span class=lnt id=hl-0-34><a class=lnlinks href=#hl-0-34>34</a>
</span><span class=lnt id=hl-0-35><a class=lnlinks href=#hl-0-35>35</a>
</span><span class=lnt id=hl-0-36><a class=lnlinks href=#hl-0-36>36</a>
</span><span class=lnt id=hl-0-37><a class=lnlinks href=#hl-0-37>37</a>
</span><span class=lnt id=hl-0-38><a class=lnlinks href=#hl-0-38>38</a>
</span><span class=lnt id=hl-0-39><a class=lnlinks href=#hl-0-39>39</a>
</span><span class=lnt id=hl-0-40><a class=lnlinks href=#hl-0-40>40</a>
</span><span class=lnt id=hl-0-41><a class=lnlinks href=#hl-0-41>41</a>
</span><span class=lnt id=hl-0-42><a class=lnlinks href=#hl-0-42>42</a>
</span><span class=lnt id=hl-0-43><a class=lnlinks href=#hl-0-43>43</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// JWT 인증 구현 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>jwt</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;jsonwebtoken&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=nx>json</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 로그인 라우트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/login&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 사용자 검증 (데이터베이스 조회 등)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>id</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>username</span><span class=o>:</span> <span class=s1>&#39;test_user&#39;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// JWT 생성
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>jwt</span><span class=p>.</span><span class=nx>sign</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nx>userId</span><span class=o>:</span> <span class=nx>user</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span> <span class=nx>username</span><span class=o>:</span> <span class=nx>user</span><span class=p>.</span><span class=nx>username</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;your_jwt_secret&#39;</span><span class=p>,</span>  <span class=c1>// 실제로는 환경 변수에서 가져와야 함
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>{</span> <span class=nx>expiresIn</span><span class=o>:</span> <span class=s1>&#39;1h&#39;</span> <span class=p>}</span>  <span class=c1>// 토큰 만료 시간
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 클라이언트에 토큰 반환
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> <span class=nx>token</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 인증 미들웨어
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>authenticateToken</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>authHeader</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>headers</span><span class=p>[</span><span class=s1>&#39;authorization&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>authHeader</span> <span class=o>&amp;&amp;</span> <span class=nx>authHeader</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39; &#39;</span><span class=p>)[</span><span class=mi>1</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>token</span><span class=p>)</span> <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>sendStatus</span><span class=p>(</span><span class=mi>401</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>jwt</span><span class=p>.</span><span class=nx>verify</span><span class=p>(</span><span class=nx>token</span><span class=p>,</span> <span class=s1>&#39;your_jwt_secret&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>user</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>sendStatus</span><span class=p>(</span><span class=mi>403</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>req</span><span class=p>.</span><span class=nx>user</span> <span class=o>=</span> <span class=nx>user</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 인증된 라우트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/protected&#39;</span><span class=p>,</span> <span class=nx>authenticateToken</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;인증된 사용자입니다!&#39;</span><span class=p>,</span> <span class=nx>user</span><span class=o>:</span> <span class=nx>req</span><span class=p>.</span><span class=nx>user</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>3000</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=쿠키-기반-인증-구현-예시-nodejs>쿠키 기반 인증 구현 예시 (Node.js)<a hidden class=anchor aria-hidden=true href=#쿠키-기반-인증-구현-예시-nodejs>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14>14</a>
</span><span class=lnt id=hl-1-15><a class=lnlinks href=#hl-1-15>15</a>
</span><span class=lnt id=hl-1-16><a class=lnlinks href=#hl-1-16>16</a>
</span><span class=lnt id=hl-1-17><a class=lnlinks href=#hl-1-17>17</a>
</span><span class=lnt id=hl-1-18><a class=lnlinks href=#hl-1-18>18</a>
</span><span class=lnt id=hl-1-19><a class=lnlinks href=#hl-1-19>19</a>
</span><span class=lnt id=hl-1-20><a class=lnlinks href=#hl-1-20>20</a>
</span><span class=lnt id=hl-1-21><a class=lnlinks href=#hl-1-21>21</a>
</span><span class=lnt id=hl-1-22><a class=lnlinks href=#hl-1-22>22</a>
</span><span class=lnt id=hl-1-23><a class=lnlinks href=#hl-1-23>23</a>
</span><span class=lnt id=hl-1-24><a class=lnlinks href=#hl-1-24>24</a>
</span><span class=lnt id=hl-1-25><a class=lnlinks href=#hl-1-25>25</a>
</span><span class=lnt id=hl-1-26><a class=lnlinks href=#hl-1-26>26</a>
</span><span class=lnt id=hl-1-27><a class=lnlinks href=#hl-1-27>27</a>
</span><span class=lnt id=hl-1-28><a class=lnlinks href=#hl-1-28>28</a>
</span><span class=lnt id=hl-1-29><a class=lnlinks href=#hl-1-29>29</a>
</span><span class=lnt id=hl-1-30><a class=lnlinks href=#hl-1-30>30</a>
</span><span class=lnt id=hl-1-31><a class=lnlinks href=#hl-1-31>31</a>
</span><span class=lnt id=hl-1-32><a class=lnlinks href=#hl-1-32>32</a>
</span><span class=lnt id=hl-1-33><a class=lnlinks href=#hl-1-33>33</a>
</span><span class=lnt id=hl-1-34><a class=lnlinks href=#hl-1-34>34</a>
</span><span class=lnt id=hl-1-35><a class=lnlinks href=#hl-1-35>35</a>
</span><span class=lnt id=hl-1-36><a class=lnlinks href=#hl-1-36>36</a>
</span><span class=lnt id=hl-1-37><a class=lnlinks href=#hl-1-37>37</a>
</span><span class=lnt id=hl-1-38><a class=lnlinks href=#hl-1-38>38</a>
</span><span class=lnt id=hl-1-39><a class=lnlinks href=#hl-1-39>39</a>
</span><span class=lnt id=hl-1-40><a class=lnlinks href=#hl-1-40>40</a>
</span><span class=lnt id=hl-1-41><a class=lnlinks href=#hl-1-41>41</a>
</span><span class=lnt id=hl-1-42><a class=lnlinks href=#hl-1-42>42</a>
</span><span class=lnt id=hl-1-43><a class=lnlinks href=#hl-1-43>43</a>
</span><span class=lnt id=hl-1-44><a class=lnlinks href=#hl-1-44>44</a>
</span><span class=lnt id=hl-1-45><a class=lnlinks href=#hl-1-45>45</a>
</span><span class=lnt id=hl-1-46><a class=lnlinks href=#hl-1-46>46</a>
</span><span class=lnt id=hl-1-47><a class=lnlinks href=#hl-1-47>47</a>
</span><span class=lnt id=hl-1-48><a class=lnlinks href=#hl-1-48>48</a>
</span><span class=lnt id=hl-1-49><a class=lnlinks href=#hl-1-49>49</a>
</span><span class=lnt id=hl-1-50><a class=lnlinks href=#hl-1-50>50</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 쿠키 기반 인증 구현 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>session</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express-session&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=nx>json</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 세션 미들웨어 설정
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>session</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>secret</span><span class=o>:</span> <span class=s1>&#39;your_session_secret&#39;</span><span class=p>,</span>  <span class=c1>// 실제로는 환경 변수에서 가져와야 함
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>resave</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>saveUninitialized</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>cookie</span><span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=nx>secure</span><span class=o>:</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>NODE_ENV</span> <span class=o>===</span> <span class=s1>&#39;production&#39;</span><span class=p>,</span>  <span class=c1>// HTTPS에서만 쿠키 전송
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>httpOnly</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>  <span class=c1>// JS에서 쿠키 접근 방지
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>maxAge</span><span class=o>:</span> <span class=mi>3600000</span>  <span class=c1>// 1시간 후 만료
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 로그인 라우트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/login&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 사용자 검증 (데이터베이스 조회 등)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>id</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>username</span><span class=o>:</span> <span class=s1>&#39;test_user&#39;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 세션에 사용자 정보 저장
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>req</span><span class=p>.</span><span class=nx>session</span><span class=p>.</span><span class=nx>user</span> <span class=o>=</span> <span class=nx>user</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;로그인 성공!&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 인증 미들웨어
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>authenticate</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>req</span><span class=p>.</span><span class=nx>session</span><span class=p>.</span><span class=nx>user</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>401</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;인증 필요&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 인증된 라우트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/protected&#39;</span><span class=p>,</span> <span class=nx>authenticate</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;인증된 사용자입니다!&#39;</span><span class=p>,</span> <span class=nx>user</span><span class=o>:</span> <span class=nx>req</span><span class=p>.</span><span class=nx>session</span><span class=p>.</span><span class=nx>user</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 로그아웃 라우트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/logout&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>req</span><span class=p>.</span><span class=nx>session</span><span class=p>.</span><span class=nx>destroy</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;로그아웃 성공!&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>3000</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/backend-development/>Backend Development</a></li><li><a href=https://buenhyden.github.io/tags/api-design/>API-Design</a></li><li><a href=https://buenhyden.github.io/tags/authentication-methods/>Authentication-Methods</a></li><li><a href=https://buenhyden.github.io/tags/jwt/>JWT</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/cybersecurity-and-information-security/access-control/authentication/implementations/cookie-based-authentication/cookie-based-auth-vs-basic-authentication/><span class=title>« Prev</span><br><span>Cookie-Based Auth vs. Basic Authentication</span>
</a><a class=next href=https://buenhyden.github.io/posts/cybersecurity-and-information-security/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-session-based-auth/><span class=title>Next »</span><br><span>jwt vs. Session-based Auth</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>