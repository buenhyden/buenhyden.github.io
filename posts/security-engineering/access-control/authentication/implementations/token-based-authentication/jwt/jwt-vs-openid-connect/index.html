<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>JWT vs. OpenID Connect | hyunyoun's Blog</title>
<meta name=keywords content="Backend-Development,API-Design,Authentication-Methods,JWT"><meta name=description content="JWT는 당사자 간에 안전하게 정보를 전송하기 위한 개방형 표준(RFC 7519)으로, 컴팩트하고 자체 포함적인 방식으로 정보를 안전하게 전달한다. OpenID Connect는 OAuth 2.0 프로토콜 위에 구축된 인증 계층으로, 클라이언트가 사용자의 신원을 확인하고 기본적인 프로필 정보를 얻을 수 있도록 하는 표준이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/security-engineering/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-openid-connect/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.8762af4fa9ee176c57f72565b721f234162fc7a9c882a271e0a1f68c4e89fb34.css integrity="sha256-h2KvT6nuF2xX9yVltyHyNBYvx6nIgqJx4KH2jE6J+zQ=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/security-engineering/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-openid-connect/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/security-engineering/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-openid-connect/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="JWT vs. OpenID Connect"><meta property="og:description" content="JWT는 당사자 간에 안전하게 정보를 전송하기 위한 개방형 표준(RFC 7519)으로, 컴팩트하고 자체 포함적인 방식으로 정보를 안전하게 전달한다. OpenID Connect는 OAuth 2.0 프로토콜 위에 구축된 인증 계층으로, 클라이언트가 사용자의 신원을 확인하고 기본적인 프로필 정보를 얻을 수 있도록 하는 표준이다."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-04-01T14:53:00+00:00"><meta property="article:modified_time" content="2025-04-01T14:53:00+00:00"><meta property="article:tag" content="Backend-Development"><meta property="article:tag" content="API-Design"><meta property="article:tag" content="Authentication-Methods"><meta property="article:tag" content="JWT"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="JWT vs. OpenID Connect"><meta name=twitter:description content="JWT는 당사자 간에 안전하게 정보를 전송하기 위한 개방형 표준(RFC 7519)으로, 컴팩트하고 자체 포함적인 방식으로 정보를 안전하게 전달한다. OpenID Connect는 OAuth 2.0 프로토콜 위에 구축된 인증 계층으로, 클라이언트가 사용자의 신원을 확인하고 기본적인 프로필 정보를 얻을 수 있도록 하는 표준이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"JWT vs. OpenID Connect","item":"https://buenhyden.github.io/posts/security-engineering/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-openid-connect/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"JWT vs. OpenID Connect","name":"JWT vs. OpenID Connect","description":"JWT는 당사자 간에 안전하게 정보를 전송하기 위한 개방형 표준(RFC 7519)으로, 컴팩트하고 자체 포함적인 방식으로 정보를 안전하게 전달한다. OpenID Connect는 OAuth 2.0 프로토콜 위에 구축된 인증 계층으로, 클라이언트가 사용자의 신원을 확인하고 기본적인 프로필 정보를 얻을 수 있도록 하는 표준이다.","keywords":["Backend-Development","API-Design","Authentication-Methods","JWT"],"articleBody":"JWT vs. OpenID Connect JWT(JSON Web Token)와 OpenID Connect(OIDC)는 모두 현대적인 인증 및 권한 부여 시스템에서 중요한 역할을 하는 기술이다. 이 두 기술은 서로 밀접한 관계가 있지만, 목적과 기능 면에서 중요한 차이점을 가지고 있다.\nJWT(JSON Web Token) JWT는 당사자 간에 안전하게 정보를 전송하기 위한 개방형 표준(RFC 7519)으로, 컴팩트하고 자체 포함적인 방식으로 정보를 안전하게 전달한다.\n기본 구조 JWT는 점(.)으로 구분된 세 부분으로 구성된다:\n헤더(Header): 토큰 유형과 사용된 암호화 알고리즘 정보 페이로드(Payload): 클레임(사용자 ID, 만료 시간 등) 정보 서명(Signature): 토큰의 무결성을 보장하는 디지털 서명 예시:\n1 eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c 주요 특징 자체 포함성(Self-contained): 필요한 모든 정보를 토큰 자체에 포함 무상태(Stateless): 서버 측에서 세션 상태를 유지할 필요가 없음 컴팩트(Compact): URL로 전송 가능한 크기 서명 기반(Signature-based): 무결성 보장 다양한 암호화 알고리즘 지원: HMAC, RSA, ECDSA 등 주요 용도 인증(Authentication) 정보 교환(Information Exchange) 권한 부여(Authorization) OpenID Connect (OIDC) OpenID Connect는 OAuth 2.0 프로토콜 위에 구축된 인증 계층으로, 클라이언트가 사용자의 신원을 확인하고 기본적인 프로필 정보를 얻을 수 있도록 하는 표준이다.\n구성 요소 ID 토큰: JWT 형식으로 사용자 신원 정보를 포함 UserInfo 엔드포인트: 사용자 프로필 정보 제공 인증 엔드포인트: 사용자 인증 처리 토큰 엔드포인트: 토큰 발급 및 갱신 검색 문서(Discovery Document): 서비스 설정 정보 주요 특징 표준화된 인증 프로토콜: OAuth 2.0 확장 다양한 인증 흐름: 권한 부여 코드 흐름, 암시적 흐름 등 중앙 집중식 로그인: 단일 ID 제공자를 통한 다중 서비스 접근 클레임 기반 신원 확인: 표준화된 사용자 속성 연합 인증(Federated Authentication): 여러 신원 제공자 지원 주요 용도 단일 로그인(Single Sign-On) 신원 확인 및 프로필 정보 제공 엔터프라이즈 인증 시스템 통합 심층 분석 주요 차이점 개념적 차이: JWT는 정보를 안전하게 전송하는 데 사용되는 토큰 형식이다. OIDC는 사용자 인증 및 신원 확인을 위한 프로토콜이다. 범위와 목적: JWT는 다양한 용도로 사용될 수 있는 범용 토큰 형식이다. OIDC는 특별히 사용자 인증과 신원 확인을 위해 설계된 프로토콜이다. 구현 복잡성: JWT는 상대적으로 구현이 간단하다(토큰 생성 및 검증). OIDC는 여러 엔드포인트와 흐름을 포함하는 더 복잡한 프로토콜이다. 기능 세트: JWT는 기본적인 정보 전달과 서명 검증에 중점을 둔다. OIDC는 사용자 세션 관리, 토큰 갱신, 사용자 정보 조회 등 다양한 기능을 제공한다. JWT의 작동 방식 토큰 생성:\n1 2 3 4 5 6 7 // Node.js 예시 const jwt = require('jsonwebtoken'); const token = jwt.sign( { userId: '123', role: 'admin' }, // 페이로드 'secretKey', // 서명 키 { expiresIn: '1h' } // 옵션 ); 토큰 검증:\n1 2 3 4 5 6 try { const decoded = jwt.verify(token, 'secretKey'); console.log(decoded.userId); // '123' } catch(err) { console.error('토큰 검증 실패'); } 인증 흐름:\n사용자가 로그인하면 서버는 JWT를 생성하여 반환 클라이언트는 이후 요청 시 Authorization 헤더에 JWT 포함 서버는 JWT 서명을 검증하고 포함된 정보를 사용 OpenID Connect의 작동 방식 권한 부여 코드 흐름(가장 일반적):\n사용자가 클라이언트 애플리케이션에 접근 클라이언트는 사용자를 ID 제공자(IdP)의 인증 엔드포인트로 리디렉션 사용자가 인증한 후, IdP는 권한 부여 코드와 함께 사용자를 클라이언트로 리디렉션 클라이언트는 이 코드를 IdP의 토큰 엔드포인트에 제출하여 ID 토큰과 접근 토큰 획득 ID 토큰(JWT 형식)은 사용자의 신원을 확인하는 데 사용 접근 토큰은 UserInfo 엔드포인트에서 추가 사용자 정보를 조회하는 데 사용 가능 ID 토큰(JWT 형태)의 예시 클레임:\n1 2 3 4 5 6 7 8 9 10 { \"iss\": \"https://auth.example.com\", \"sub\": \"24400320\", \"aud\": \"s6BhdRkqt3\", \"exp\": 1311281970, \"iat\": 1311280970, \"auth_time\": 1311280969, \"name\": \"홍길동\", \"email\": \"gildong@example.com\" } 검색 문서(Discovery Document) - OIDC 구성 정보:\n1 2 3 4 5 6 7 8 { \"issuer\": \"https://auth.example.com\", \"authorization_endpoint\": \"https://auth.example.com/auth\", \"token_endpoint\": \"https://auth.example.com/token\", \"userinfo_endpoint\": \"https://auth.example.com/userinfo\", \"jwks_uri\": \"https://auth.example.com/jwks.json\", ... } 장단점 분석 JWT의 장단점 장점:\n간단하고 경량적인 구조 무상태(Stateless) 특성으로 확장성이 우수 다양한 언어 및 플랫폼에서 지원 서명을 통한 데이터 무결성 보장 자체 포함적 특성으로 추가 데이터베이스 조회 감소 단점:\n저장된 정보 암호화가 기본적으로 없음(인코딩만 됨) 일단 발급된 토큰은 만료될 때까지 취소하기 어려움 토큰 크기가 클 수 있음(많은 정보 포함 시) 보안 키 관리의 중요성 구현 실수 시 보안 취약점 발생 가능 OpenID Connect의 장단점 장점:\n표준화된 사용자 인증 프로토콜 다양한 인증 흐름 지원(다양한 애플리케이션 유형) 사용자 프로필 정보 표준화 다중 요소 인증, 토큰 철회 등 고급 보안 기능 상호 운용성(다양한 ID 제공자와 호환) 단점:\n구현 복잡성이 높음 전체 흐름 이해 및 올바른 구현의 어려움 추가적인 네트워크 요청 발생 설정 및 유지 관리의 복잡성 서드파티 의존성(ID 제공자가 다운되면 인증 불가) 사용 시나리오 및 선택 가이드 JWT가 적합한 경우 간단한 API 인증 마이크로서비스 간 통신 상태 정보 전달이 필요한 경우 단일 도메인 내 인증 시스템 서버 리소스 최적화가 중요한 경우 빠른 개발이 필요한 소규모 프로젝트 OpenID Connect가 적합한 경우 소셜 로그인 구현 다중 애플리케이션 단일 로그인(SSO) 엔터프라이즈 인증 시스템 사용자 신원 확인이 중요한 경우 다중 요소 인증이 필요한 다양한 클라이언트 유형(웹, 모바일, SPA) 지원 글로벌 사용자 기반 서비스 통합 및 상호보완적 사용 JWT와 OpenID Connect는 상호 배타적이지 않으며, 실제로 OIDC는 JWT를 ID 토큰 형식으로 사용한다.\n다음과 같은 통합 패턴이 일반적이다:\nOIDC로 인증, JWT로 권한 부여: OIDC를 통해 사용자 인증 및 ID 토큰 획득 인증된 세션에 대해 JWT 기반 접근 토큰 발급 API 호출 시 JWT 사용 마이크로서비스 아키텍처에서의 활용: 경계(게이트웨이) 레벨에서 OIDC 인증 내부 서비스 간 통신에 JWT 활용 하이브리드 인증 시스템: 웹 애플리케이션은 OIDC 흐름 사용 API는 JWT 베어러 토큰 인증 사용 두 시스템이 동일한 사용자 정보 및 권한 공유 보안 고려사항 JWT 보안 비밀 키 보호: 서명 키를 안전하게 관리하고 정기적으로 순환 토큰 수명 제한: 짧은 만료 시간 설정 민감한 정보 제외: 중요 데이터는 토큰에 포함하지 않음 적절한 서명 알고리즘 사용: 최소 HS256 또는 RS256 권장 안전한 저장소 사용: HttpOnly 쿠키 또는 세션 스토리지 활용 OpenID Connect 보안 클라이언트 인증: 클라이언트 시크릿 보호 PKCE(Proof Key for Code Exchange): 모바일/SPA 애플리케이션용 추가 보안 상태 파라미터 검증: CSRF 공격 방지 ID 토큰 검증: 발급자, 대상, 서명, 만료 시간 확인 TLS/SSL 사용: 모든 엔드포인트와 통신 JWT vs. OpenID Connect 비교 특성 JWT(JSON Web Token) OpenID Connect 정의 정보를 안전하게 전송하기 위한 표준 형식 OAuth 2.0 위에 구축된 인증 프로토콜 범주 토큰 형식 인증 프로토콜 관계 OIDC에서 ID 토큰 형식으로 사용됨 JWT를 ID 토큰으로 활용 주요 목적 정보 전달, 인증, 권한 부여 사용자 인증 및 신원 확인 구성 요소 헤더, 페이로드, 서명 ID 토큰, 접근 토큰, UserInfo 엔드포인트 등 복잡성 낮음 (단순한 형식) 높음 (프로토콜 및 흐름) 표준화 RFC 7519 OpenID Foundation 규모 경량 (단일 토큰) 광범위 (전체 프로토콜) 상태 관리 무상태(Stateless) 일부 상태 유지 가능(세션 관리 등) 확장성 제한적 (사용자 정의 클레임) 고급 (표준 클레임, 동적 클라이언트 등록) 인증 주체 단일 서버 또는 서비스 신뢰할 수 있는 ID 제공자 주요 사용 사례 API 인증, 정보 교환 SSO, 소셜 로그인, 엔터프라이즈 인증 검증 방식 서명 검증 서명 검증 + 프로토콜 규칙 준수 부가 기능 제한적 세션 관리, 동적 등록, 사용자 정보 조회 구현 복잡성 낮음 중간~높음 보안 기능 기본적 (서명, 암호화) 고급 (세션 관리, 철회, 다중 요소 인증 등) 상호운용성 다양한 구현체 인증 제공자 간 호환성 구현 예시 JWT 구현 예시 (Node.js) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 const express = require('express'); const jwt = require('jsonwebtoken'); const app = express(); app.use(express.json()); const SECRET_KEY = 'your-secret-key'; // 실제 환경에서는 안전하게 관리 // 로그인 및 JWT 발급 app.post('/login', (req, res) =\u003e { const { username, password } = req.body; // 실제 구현에서는 데이터베이스 조회 등으로 사용자 검증 if (username === 'user' \u0026\u0026 password === 'pass') { const token = jwt.sign( { userId: '12345', username: 'user', role: 'admin' }, SECRET_KEY, { expiresIn: '1h' } ); return res.json({ token }); } return res.status(401).json({ message: '인증 실패' }); }); // JWT 검증 미들웨어 function authenticateToken(req, res, next) { const authHeader = req.headers['authorization']; const token = authHeader \u0026\u0026 authHeader.split(' ')[1]; if (!token) return res.status(401).json({ message: '토큰 없음' }); jwt.verify(token, SECRET_KEY, (err, user) =\u003e { if (err) return res.status(403).json({ message: '토큰 무효' }); req.user = user; next(); }); } // 보호된 엔드포인트 app.get('/protected', authenticateToken, (req, res) =\u003e { res.json({ message: '보호된 리소스에 접근 성공', user: req.user }); }); app.listen(3000, () =\u003e { console.log('서버 시작: http://localhost:3000'); }); OpenID Connect 클라이언트 구현 예시 (Node.js) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 const express = require('express'); const { Issuer, generators } = require('openid-client'); const session = require('express-session'); const app = express(); // 세션 설정 app.use(session({ secret: 'session-secret', resave: false, saveUninitialized: true })); // OIDC 설정 (구글 예시) let client; Issuer.discover('https://accounts.google.com') .then(issuer =\u003e { client = new issuer.Client({ client_id: 'YOUR_CLIENT_ID', client_secret: 'YOUR_CLIENT_SECRET', redirect_uris: ['http://localhost:3000/callback'], response_types: ['code'] }); console.log('OIDC 클라이언트 초기화 완료'); }) .catch(err =\u003e { console.error('OIDC 설정 오류:', err); }); // 로그인 시작 app.get('/login', (req, res) =\u003e { const code_verifier = generators.codeVerifier(); const code_challenge = generators.codeChallenge(code_verifier); req.session.code_verifier = code_verifier; const authUrl = client.authorizationUrl({ scope: 'openid email profile', code_challenge, code_challenge_method: 'S256' }); res.redirect(authUrl); }); // 콜백 처리 app.get('/callback', async (req, res) =\u003e { try { const params = client.callbackParams(req); const tokenSet = await client.callback( 'http://localhost:3000/callback', params, { code_verifier: req.session.code_verifier } ); // ID 토큰 (JWT 형식) const idToken = tokenSet.id_token; // ID 토큰 클레임 확인 const claims = tokenSet.claims(); // 사용자 정보 (추가 정보 필요 시) const userinfo = await client.userinfo(tokenSet); // 세션에 사용자 정보 저장 req.session.user = userinfo; res.redirect('/profile'); } catch (err) { console.error('인증 오류:', err); res.status(500).send('인증 처리 중 오류 발생'); } }); // 사용자 프로필 app.get('/profile', (req, res) =\u003e { if (!req.session.user) { return res.redirect('/login'); } res.json({ message: '인증된 사용자 정보', user: req.session.user }); }); app.listen(3000, () =\u003e { console.log('서버 시작: http://localhost:3000'); }); 용어 정리 용어 설명 참고 및 출처 ","wordCount":"1591","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2025-04-01T14:53:00Z","dateModified":"2025-04-01T14:53:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/security-engineering/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-openid-connect/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a></div><h1 class="post-title entry-hint-parent">JWT vs. OpenID Connect</h1><div class=post-description>JWT는 당사자 간에 안전하게 정보를 전송하기 위한 개방형 표준(RFC 7519)으로, 컴팩트하고 자체 포함적인 방식으로 정보를 안전하게 전달한다. OpenID Connect는 OAuth 2.0 프로토콜 위에 구축된 인증 계층으로, 클라이언트가 사용자의 신원을 확인하고 기본적인 프로필 정보를 얻을 수 있도록 하는 표준이다.</div><div class=post-meta><span title='2025-04-01 14:53:00 +0000 UTC'>April 1, 2025</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Security%20Engineering/Access%20Control/Authentication/Implementations/Token-Based%20Authentication/JWT/jwt-vs-openid-connect.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#jwt-vs-openid-connect>JWT vs. OpenID Connect</a><ul><li><a href=#jwtjson-web-token>JWT(JSON Web Token)</a></li><li><a href=#openid-connect-oidc>OpenID Connect (OIDC)</a></li><li><a href=#심층-분석>심층 분석</a></li><li><a href=#장단점-분석>장단점 분석</a></li><li><a href=#사용-시나리오-및-선택-가이드>사용 시나리오 및 선택 가이드</a></li><li><a href=#통합-및-상호보완적-사용>통합 및 상호보완적 사용</a></li><li><a href=#보안-고려사항>보안 고려사항</a></li><li><a href=#jwt-vs-openid-connect-비교>JWT vs. OpenID Connect 비교</a></li><li><a href=#구현-예시>구현 예시</a></li></ul></li><li><a href=#용어-정리>용어 정리</a></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=jwt-vs-openid-connect>JWT vs. OpenID Connect<a hidden class=anchor aria-hidden=true href=#jwt-vs-openid-connect>#</a></h2><p>JWT(JSON Web Token)와 OpenID Connect(OIDC)는 모두 현대적인 인증 및 권한 부여 시스템에서 중요한 역할을 하는 기술이다. 이 두 기술은 서로 밀접한 관계가 있지만, 목적과 기능 면에서 중요한 차이점을 가지고 있다.</p><h3 id=jwtjson-web-token>JWT(JSON Web Token)<a hidden class=anchor aria-hidden=true href=#jwtjson-web-token>#</a></h3><p>JWT는 당사자 간에 안전하게 정보를 전송하기 위한 개방형 표준(RFC 7519)으로, 컴팩트하고 자체 포함적인 방식으로 정보를 안전하게 전달한다.</p><h4 id=기본-구조>기본 구조<a hidden class=anchor aria-hidden=true href=#기본-구조>#</a></h4><p>JWT는 점(.)으로 구분된 세 부분으로 구성된다:</p><ol><li><strong>헤더(Header)</strong>: 토큰 유형과 사용된 암호화 알고리즘 정보</li><li><strong>페이로드(Payload)</strong>: 클레임(사용자 ID, 만료 시간 등) 정보</li><li><strong>서명(Signature)</strong>: 토큰의 무결성을 보장하는 디지털 서명</li></ol><p>예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
</span></span></code></pre></td></tr></table></div></div><h4 id=주요-특징>주요 특징<a hidden class=anchor aria-hidden=true href=#주요-특징>#</a></h4><ul><li><strong>자체 포함성(Self-contained)</strong>: 필요한 모든 정보를 토큰 자체에 포함</li><li><strong>무상태(Stateless)</strong>: 서버 측에서 세션 상태를 유지할 필요가 없음</li><li><strong>컴팩트(Compact)</strong>: URL로 전송 가능한 크기</li><li><strong>서명 기반(Signature-based)</strong>: 무결성 보장</li><li><strong>다양한 암호화 알고리즘 지원</strong>: HMAC, RSA, ECDSA 등</li></ul><h4 id=주요-용도>주요 용도<a hidden class=anchor aria-hidden=true href=#주요-용도>#</a></h4><ul><li>인증(Authentication)</li><li>정보 교환(Information Exchange)</li><li>권한 부여(Authorization)</li></ul><h3 id=openid-connect-oidc>OpenID Connect (OIDC)<a hidden class=anchor aria-hidden=true href=#openid-connect-oidc>#</a></h3><p>OpenID Connect는 OAuth 2.0 프로토콜 위에 구축된 인증 계층으로, 클라이언트가 사용자의 신원을 확인하고 기본적인 프로필 정보를 얻을 수 있도록 하는 표준이다.</p><h4 id=구성-요소>구성 요소<a hidden class=anchor aria-hidden=true href=#구성-요소>#</a></h4><ol><li><strong>ID 토큰</strong>: JWT 형식으로 사용자 신원 정보를 포함</li><li><strong>UserInfo 엔드포인트</strong>: 사용자 프로필 정보 제공</li><li><strong>인증 엔드포인트</strong>: 사용자 인증 처리</li><li><strong>토큰 엔드포인트</strong>: 토큰 발급 및 갱신</li><li><strong>검색 문서(Discovery Document)</strong>: 서비스 설정 정보</li></ol><h4 id=주요-특징-1>주요 특징<a hidden class=anchor aria-hidden=true href=#주요-특징-1>#</a></h4><ul><li><strong>표준화된 인증 프로토콜</strong>: OAuth 2.0 확장</li><li><strong>다양한 인증 흐름</strong>: 권한 부여 코드 흐름, 암시적 흐름 등</li><li><strong>중앙 집중식 로그인</strong>: 단일 ID 제공자를 통한 다중 서비스 접근</li><li><strong>클레임 기반 신원 확인</strong>: 표준화된 사용자 속성</li><li><strong>연합 인증(Federated Authentication)</strong>: 여러 신원 제공자 지원</li></ul><h4 id=주요-용도-1>주요 용도<a hidden class=anchor aria-hidden=true href=#주요-용도-1>#</a></h4><ul><li>단일 로그인(Single Sign-On)</li><li>신원 확인 및 프로필 정보 제공</li><li>엔터프라이즈 인증 시스템 통합</li></ul><h3 id=심층-분석>심층 분석<a hidden class=anchor aria-hidden=true href=#심층-분석>#</a></h3><h4 id=주요-차이점>주요 차이점<a hidden class=anchor aria-hidden=true href=#주요-차이점>#</a></h4><ol><li><strong>개념적 차이</strong>:<ul><li>JWT는 정보를 안전하게 전송하는 데 사용되는 토큰 형식이다.</li><li>OIDC는 사용자 인증 및 신원 확인을 위한 프로토콜이다.</li></ul></li><li><strong>범위와 목적</strong>:<ul><li>JWT는 다양한 용도로 사용될 수 있는 범용 토큰 형식이다.</li><li>OIDC는 특별히 사용자 인증과 신원 확인을 위해 설계된 프로토콜이다.</li></ul></li><li><strong>구현 복잡성</strong>:<ul><li>JWT는 상대적으로 구현이 간단하다(토큰 생성 및 검증).</li><li>OIDC는 여러 엔드포인트와 흐름을 포함하는 더 복잡한 프로토콜이다.</li></ul></li><li><strong>기능 세트</strong>:<ul><li>JWT는 기본적인 정보 전달과 서명 검증에 중점을 둔다.</li><li>OIDC는 사용자 세션 관리, 토큰 갱신, 사용자 정보 조회 등 다양한 기능을 제공한다.</li></ul></li></ol><h4 id=jwt의-작동-방식>JWT의 작동 방식<a hidden class=anchor aria-hidden=true href=#jwt의-작동-방식>#</a></h4><ol><li><p><strong>토큰 생성</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5>5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6>6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// Node.js 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>jwt</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;jsonwebtoken&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>jwt</span><span class=p>.</span><span class=nx>sign</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>userId</span><span class=o>:</span> <span class=s1>&#39;123&#39;</span><span class=p>,</span> <span class=nx>role</span><span class=o>:</span> <span class=s1>&#39;admin&#39;</span> <span class=p>},</span>  <span class=c1>// 페이로드
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=s1>&#39;secretKey&#39;</span><span class=p>,</span>                       <span class=c1>// 서명 키
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>{</span> <span class=nx>expiresIn</span><span class=o>:</span> <span class=s1>&#39;1h&#39;</span> <span class=p>}</span>                <span class=c1>// 옵션
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>토큰 검증</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2>2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3>3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4>4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5>5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>decoded</span> <span class=o>=</span> <span class=nx>jwt</span><span class=p>.</span><span class=nx>verify</span><span class=p>(</span><span class=nx>token</span><span class=p>,</span> <span class=s1>&#39;secretKey&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>decoded</span><span class=p>.</span><span class=nx>userId</span><span class=p>);</span> <span class=c1>// &#39;123&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span> <span class=k>catch</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;토큰 검증 실패&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>인증 흐름</strong>:</p><ul><li>사용자가 로그인하면 서버는 JWT를 생성하여 반환</li><li>클라이언트는 이후 요청 시 Authorization 헤더에 JWT 포함</li><li>서버는 JWT 서명을 검증하고 포함된 정보를 사용</li></ul></li></ol><h4 id=openid-connect의-작동-방식>OpenID Connect의 작동 방식<a hidden class=anchor aria-hidden=true href=#openid-connect의-작동-방식>#</a></h4><ol><li><p><strong>권한 부여 코드 흐름(가장 일반적)</strong>:</p><ul><li>사용자가 클라이언트 애플리케이션에 접근</li><li>클라이언트는 사용자를 ID 제공자(IdP)의 인증 엔드포인트로 리디렉션</li><li>사용자가 인증한 후, IdP는 권한 부여 코드와 함께 사용자를 클라이언트로 리디렉션</li><li>클라이언트는 이 코드를 IdP의 토큰 엔드포인트에 제출하여 ID 토큰과 접근 토큰 획득</li><li>ID 토큰(JWT 형식)은 사용자의 신원을 확인하는 데 사용</li><li>접근 토큰은 UserInfo 엔드포인트에서 추가 사용자 정보를 조회하는 데 사용 가능</li></ul></li><li><p><strong>ID 토큰(JWT 형태)의 예시 클레임</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;iss&#34;</span><span class=p>:</span> <span class=s2>&#34;https://auth.example.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;sub&#34;</span><span class=p>:</span> <span class=s2>&#34;24400320&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;aud&#34;</span><span class=p>:</span> <span class=s2>&#34;s6BhdRkqt3&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;exp&#34;</span><span class=p>:</span> <span class=mi>1311281970</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;iat&#34;</span><span class=p>:</span> <span class=mi>1311280970</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;auth_time&#34;</span><span class=p>:</span> <span class=mi>1311280969</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;홍길동&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;email&#34;</span><span class=p>:</span> <span class=s2>&#34;gildong@example.com&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>검색 문서(Discovery Document)</strong> - OIDC 구성 정보:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2>2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3>3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4>4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5>5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6>6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7>7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;issuer&#34;</span><span class=p>:</span> <span class=s2>&#34;https://auth.example.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;authorization_endpoint&#34;</span><span class=p>:</span> <span class=s2>&#34;https://auth.example.com/auth&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;token_endpoint&#34;</span><span class=p>:</span> <span class=s2>&#34;https://auth.example.com/token&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;userinfo_endpoint&#34;</span><span class=p>:</span> <span class=s2>&#34;https://auth.example.com/userinfo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;jwks_uri&#34;</span><span class=p>:</span> <span class=s2>&#34;https://auth.example.com/jwks.json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=err>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><h3 id=장단점-분석>장단점 분석<a hidden class=anchor aria-hidden=true href=#장단점-분석>#</a></h3><h4 id=jwt의-장단점>JWT의 장단점<a hidden class=anchor aria-hidden=true href=#jwt의-장단점>#</a></h4><p><strong>장점</strong>:</p><ul><li>간단하고 경량적인 구조</li><li>무상태(Stateless) 특성으로 확장성이 우수</li><li>다양한 언어 및 플랫폼에서 지원</li><li>서명을 통한 데이터 무결성 보장</li><li>자체 포함적 특성으로 추가 데이터베이스 조회 감소</li></ul><p><strong>단점</strong>:</p><ul><li>저장된 정보 암호화가 기본적으로 없음(인코딩만 됨)</li><li>일단 발급된 토큰은 만료될 때까지 취소하기 어려움</li><li>토큰 크기가 클 수 있음(많은 정보 포함 시)</li><li>보안 키 관리의 중요성</li><li>구현 실수 시 보안 취약점 발생 가능</li></ul><h4 id=openid-connect의-장단점>OpenID Connect의 장단점<a hidden class=anchor aria-hidden=true href=#openid-connect의-장단점>#</a></h4><p><strong>장점</strong>:</p><ul><li>표준화된 사용자 인증 프로토콜</li><li>다양한 인증 흐름 지원(다양한 애플리케이션 유형)</li><li>사용자 프로필 정보 표준화</li><li>다중 요소 인증, 토큰 철회 등 고급 보안 기능</li><li>상호 운용성(다양한 ID 제공자와 호환)</li></ul><p><strong>단점</strong>:</p><ul><li>구현 복잡성이 높음</li><li>전체 흐름 이해 및 올바른 구현의 어려움</li><li>추가적인 네트워크 요청 발생</li><li>설정 및 유지 관리의 복잡성</li><li>서드파티 의존성(ID 제공자가 다운되면 인증 불가)</li></ul><h3 id=사용-시나리오-및-선택-가이드>사용 시나리오 및 선택 가이드<a hidden class=anchor aria-hidden=true href=#사용-시나리오-및-선택-가이드>#</a></h3><h4 id=jwt가-적합한-경우>JWT가 적합한 경우<a hidden class=anchor aria-hidden=true href=#jwt가-적합한-경우>#</a></h4><ul><li>간단한 API 인증</li><li>마이크로서비스 간 통신</li><li>상태 정보 전달이 필요한 경우</li><li>단일 도메인 내 인증 시스템</li><li>서버 리소스 최적화가 중요한 경우</li><li>빠른 개발이 필요한 소규모 프로젝트</li></ul><h4 id=openid-connect가-적합한-경우>OpenID Connect가 적합한 경우<a hidden class=anchor aria-hidden=true href=#openid-connect가-적합한-경우>#</a></h4><ul><li>소셜 로그인 구현</li><li>다중 애플리케이션 단일 로그인(SSO)</li><li>엔터프라이즈 인증 시스템</li><li>사용자 신원 확인이 중요한 경우</li><li>다중 요소 인증이 필요한</li><li>다양한 클라이언트 유형(웹, 모바일, SPA) 지원</li><li>글로벌 사용자 기반 서비스</li></ul><h3 id=통합-및-상호보완적-사용>통합 및 상호보완적 사용<a hidden class=anchor aria-hidden=true href=#통합-및-상호보완적-사용>#</a></h3><p>JWT와 OpenID Connect는 상호 배타적이지 않으며, 실제로 OIDC는 JWT를 ID 토큰 형식으로 사용한다.</p><p>다음과 같은 통합 패턴이 일반적이다:</p><ol><li><strong>OIDC로 인증, JWT로 권한 부여</strong>:<ul><li>OIDC를 통해 사용자 인증 및 ID 토큰 획득</li><li>인증된 세션에 대해 JWT 기반 접근 토큰 발급</li><li>API 호출 시 JWT 사용</li></ul></li><li><strong>마이크로서비스 아키텍처에서의 활용</strong>:<ul><li>경계(게이트웨이) 레벨에서 OIDC 인증</li><li>내부 서비스 간 통신에 JWT 활용</li></ul></li><li><strong>하이브리드 인증 시스템</strong>:<ul><li>웹 애플리케이션은 OIDC 흐름 사용</li><li>API는 JWT 베어러 토큰 인증 사용</li><li>두 시스템이 동일한 사용자 정보 및 권한 공유</li></ul></li></ol><h3 id=보안-고려사항>보안 고려사항<a hidden class=anchor aria-hidden=true href=#보안-고려사항>#</a></h3><h4 id=jwt-보안>JWT 보안<a hidden class=anchor aria-hidden=true href=#jwt-보안>#</a></h4><ol><li><strong>비밀 키 보호</strong>: 서명 키를 안전하게 관리하고 정기적으로 순환</li><li><strong>토큰 수명 제한</strong>: 짧은 만료 시간 설정</li><li><strong>민감한 정보 제외</strong>: 중요 데이터는 토큰에 포함하지 않음</li><li><strong>적절한 서명 알고리즘 사용</strong>: 최소 HS256 또는 RS256 권장</li><li><strong>안전한 저장소 사용</strong>: HttpOnly 쿠키 또는 세션 스토리지 활용</li></ol><h4 id=openid-connect-보안>OpenID Connect 보안<a hidden class=anchor aria-hidden=true href=#openid-connect-보안>#</a></h4><ol><li><strong>클라이언트 인증</strong>: 클라이언트 시크릿 보호</li><li><strong>PKCE(Proof Key for Code Exchange)</strong>: 모바일/SPA 애플리케이션용 추가 보안</li><li><strong>상태 파라미터 검증</strong>: CSRF 공격 방지</li><li><strong>ID 토큰 검증</strong>: 발급자, 대상, 서명, 만료 시간 확인</li><li><strong>TLS/SSL 사용</strong>: 모든 엔드포인트와 통신</li></ol><h3 id=jwt-vs-openid-connect-비교>JWT vs. OpenID Connect 비교<a hidden class=anchor aria-hidden=true href=#jwt-vs-openid-connect-비교>#</a></h3><table><thead><tr><th>특성</th><th>JWT(JSON Web Token)</th><th>OpenID Connect</th></tr></thead><tbody><tr><td><strong>정의</strong></td><td>정보를 안전하게 전송하기 위한 표준 형식</td><td>OAuth 2.0 위에 구축된 인증 프로토콜</td></tr><tr><td><strong>범주</strong></td><td>토큰 형식</td><td>인증 프로토콜</td></tr><tr><td><strong>관계</strong></td><td>OIDC에서 ID 토큰 형식으로 사용됨</td><td>JWT를 ID 토큰으로 활용</td></tr><tr><td><strong>주요 목적</strong></td><td>정보 전달, 인증, 권한 부여</td><td>사용자 인증 및 신원 확인</td></tr><tr><td><strong>구성 요소</strong></td><td>헤더, 페이로드, 서명</td><td>ID 토큰, 접근 토큰, UserInfo 엔드포인트 등</td></tr><tr><td><strong>복잡성</strong></td><td>낮음 (단순한 형식)</td><td>높음 (프로토콜 및 흐름)</td></tr><tr><td><strong>표준화</strong></td><td>RFC 7519</td><td>OpenID Foundation</td></tr><tr><td><strong>규모</strong></td><td>경량 (단일 토큰)</td><td>광범위 (전체 프로토콜)</td></tr><tr><td><strong>상태 관리</strong></td><td>무상태(Stateless)</td><td>일부 상태 유지 가능(세션 관리 등)</td></tr><tr><td><strong>확장성</strong></td><td>제한적 (사용자 정의 클레임)</td><td>고급 (표준 클레임, 동적 클라이언트 등록)</td></tr><tr><td><strong>인증 주체</strong></td><td>단일 서버 또는 서비스</td><td>신뢰할 수 있는 ID 제공자</td></tr><tr><td><strong>주요 사용 사례</strong></td><td>API 인증, 정보 교환</td><td>SSO, 소셜 로그인, 엔터프라이즈 인증</td></tr><tr><td><strong>검증 방식</strong></td><td>서명 검증</td><td>서명 검증 + 프로토콜 규칙 준수</td></tr><tr><td><strong>부가 기능</strong></td><td>제한적</td><td>세션 관리, 동적 등록, 사용자 정보 조회</td></tr><tr><td><strong>구현 복잡성</strong></td><td>낮음</td><td>중간~높음</td></tr><tr><td><strong>보안 기능</strong></td><td>기본적 (서명, 암호화)</td><td>고급 (세션 관리, 철회, 다중 요소 인증 등)</td></tr><tr><td><strong>상호운용성</strong></td><td>다양한 구현체</td><td>인증 제공자 간 호환성</td></tr></tbody></table><h3 id=구현-예시>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시>#</a></h3><h4 id=jwt-구현-예시-nodejs>JWT 구현 예시 (Node.js)<a hidden class=anchor aria-hidden=true href=#jwt-구현-예시-nodejs>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span><span class=lnt id=hl-5-18><a class=lnlinks href=#hl-5-18>18</a>
</span><span class=lnt id=hl-5-19><a class=lnlinks href=#hl-5-19>19</a>
</span><span class=lnt id=hl-5-20><a class=lnlinks href=#hl-5-20>20</a>
</span><span class=lnt id=hl-5-21><a class=lnlinks href=#hl-5-21>21</a>
</span><span class=lnt id=hl-5-22><a class=lnlinks href=#hl-5-22>22</a>
</span><span class=lnt id=hl-5-23><a class=lnlinks href=#hl-5-23>23</a>
</span><span class=lnt id=hl-5-24><a class=lnlinks href=#hl-5-24>24</a>
</span><span class=lnt id=hl-5-25><a class=lnlinks href=#hl-5-25>25</a>
</span><span class=lnt id=hl-5-26><a class=lnlinks href=#hl-5-26>26</a>
</span><span class=lnt id=hl-5-27><a class=lnlinks href=#hl-5-27>27</a>
</span><span class=lnt id=hl-5-28><a class=lnlinks href=#hl-5-28>28</a>
</span><span class=lnt id=hl-5-29><a class=lnlinks href=#hl-5-29>29</a>
</span><span class=lnt id=hl-5-30><a class=lnlinks href=#hl-5-30>30</a>
</span><span class=lnt id=hl-5-31><a class=lnlinks href=#hl-5-31>31</a>
</span><span class=lnt id=hl-5-32><a class=lnlinks href=#hl-5-32>32</a>
</span><span class=lnt id=hl-5-33><a class=lnlinks href=#hl-5-33>33</a>
</span><span class=lnt id=hl-5-34><a class=lnlinks href=#hl-5-34>34</a>
</span><span class=lnt id=hl-5-35><a class=lnlinks href=#hl-5-35>35</a>
</span><span class=lnt id=hl-5-36><a class=lnlinks href=#hl-5-36>36</a>
</span><span class=lnt id=hl-5-37><a class=lnlinks href=#hl-5-37>37</a>
</span><span class=lnt id=hl-5-38><a class=lnlinks href=#hl-5-38>38</a>
</span><span class=lnt id=hl-5-39><a class=lnlinks href=#hl-5-39>39</a>
</span><span class=lnt id=hl-5-40><a class=lnlinks href=#hl-5-40>40</a>
</span><span class=lnt id=hl-5-41><a class=lnlinks href=#hl-5-41>41</a>
</span><span class=lnt id=hl-5-42><a class=lnlinks href=#hl-5-42>42</a>
</span><span class=lnt id=hl-5-43><a class=lnlinks href=#hl-5-43>43</a>
</span><span class=lnt id=hl-5-44><a class=lnlinks href=#hl-5-44>44</a>
</span><span class=lnt id=hl-5-45><a class=lnlinks href=#hl-5-45>45</a>
</span><span class=lnt id=hl-5-46><a class=lnlinks href=#hl-5-46>46</a>
</span><span class=lnt id=hl-5-47><a class=lnlinks href=#hl-5-47>47</a>
</span><span class=lnt id=hl-5-48><a class=lnlinks href=#hl-5-48>48</a>
</span><span class=lnt id=hl-5-49><a class=lnlinks href=#hl-5-49>49</a>
</span><span class=lnt id=hl-5-50><a class=lnlinks href=#hl-5-50>50</a>
</span><span class=lnt id=hl-5-51><a class=lnlinks href=#hl-5-51>51</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>jwt</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;jsonwebtoken&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=nx>json</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>SECRET_KEY</span> <span class=o>=</span> <span class=s1>&#39;your-secret-key&#39;</span><span class=p>;</span>  <span class=c1>// 실제 환경에서는 안전하게 관리
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// 로그인 및 JWT 발급
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/login&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>username</span><span class=p>,</span> <span class=nx>password</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>body</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 실제 구현에서는 데이터베이스 조회 등으로 사용자 검증
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>if</span> <span class=p>(</span><span class=nx>username</span> <span class=o>===</span> <span class=s1>&#39;user&#39;</span> <span class=o>&amp;&amp;</span> <span class=nx>password</span> <span class=o>===</span> <span class=s1>&#39;pass&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>jwt</span><span class=p>.</span><span class=nx>sign</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nx>userId</span><span class=o>:</span> <span class=s1>&#39;12345&#39;</span><span class=p>,</span> <span class=nx>username</span><span class=o>:</span> <span class=s1>&#39;user&#39;</span><span class=p>,</span> <span class=nx>role</span><span class=o>:</span> <span class=s1>&#39;admin&#39;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=nx>SECRET_KEY</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nx>expiresIn</span><span class=o>:</span> <span class=s1>&#39;1h&#39;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> <span class=nx>token</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>401</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;인증 실패&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// JWT 검증 미들웨어
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>authenticateToken</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>authHeader</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>headers</span><span class=p>[</span><span class=s1>&#39;authorization&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>authHeader</span> <span class=o>&amp;&amp;</span> <span class=nx>authHeader</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39; &#39;</span><span class=p>)[</span><span class=mi>1</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>token</span><span class=p>)</span> <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>401</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;토큰 없음&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>jwt</span><span class=p>.</span><span class=nx>verify</span><span class=p>(</span><span class=nx>token</span><span class=p>,</span> <span class=nx>SECRET_KEY</span><span class=p>,</span> <span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>user</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>403</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;토큰 무효&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>req</span><span class=p>.</span><span class=nx>user</span> <span class=o>=</span> <span class=nx>user</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 보호된 엔드포인트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/protected&#39;</span><span class=p>,</span> <span class=nx>authenticateToken</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> 
</span></span><span class=line><span class=cl>    <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;보호된 리소스에 접근 성공&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=nx>user</span><span class=o>:</span> <span class=nx>req</span><span class=p>.</span><span class=nx>user</span> 
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>3000</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;서버 시작: http://localhost:3000&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=openid-connect-클라이언트-구현-예시-nodejs>OpenID Connect 클라이언트 구현 예시 (Node.js)<a hidden class=anchor aria-hidden=true href=#openid-connect-클라이언트-구현-예시-nodejs>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15>15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16>16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17>17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18>18</a>
</span><span class=lnt id=hl-6-19><a class=lnlinks href=#hl-6-19>19</a>
</span><span class=lnt id=hl-6-20><a class=lnlinks href=#hl-6-20>20</a>
</span><span class=lnt id=hl-6-21><a class=lnlinks href=#hl-6-21>21</a>
</span><span class=lnt id=hl-6-22><a class=lnlinks href=#hl-6-22>22</a>
</span><span class=lnt id=hl-6-23><a class=lnlinks href=#hl-6-23>23</a>
</span><span class=lnt id=hl-6-24><a class=lnlinks href=#hl-6-24>24</a>
</span><span class=lnt id=hl-6-25><a class=lnlinks href=#hl-6-25>25</a>
</span><span class=lnt id=hl-6-26><a class=lnlinks href=#hl-6-26>26</a>
</span><span class=lnt id=hl-6-27><a class=lnlinks href=#hl-6-27>27</a>
</span><span class=lnt id=hl-6-28><a class=lnlinks href=#hl-6-28>28</a>
</span><span class=lnt id=hl-6-29><a class=lnlinks href=#hl-6-29>29</a>
</span><span class=lnt id=hl-6-30><a class=lnlinks href=#hl-6-30>30</a>
</span><span class=lnt id=hl-6-31><a class=lnlinks href=#hl-6-31>31</a>
</span><span class=lnt id=hl-6-32><a class=lnlinks href=#hl-6-32>32</a>
</span><span class=lnt id=hl-6-33><a class=lnlinks href=#hl-6-33>33</a>
</span><span class=lnt id=hl-6-34><a class=lnlinks href=#hl-6-34>34</a>
</span><span class=lnt id=hl-6-35><a class=lnlinks href=#hl-6-35>35</a>
</span><span class=lnt id=hl-6-36><a class=lnlinks href=#hl-6-36>36</a>
</span><span class=lnt id=hl-6-37><a class=lnlinks href=#hl-6-37>37</a>
</span><span class=lnt id=hl-6-38><a class=lnlinks href=#hl-6-38>38</a>
</span><span class=lnt id=hl-6-39><a class=lnlinks href=#hl-6-39>39</a>
</span><span class=lnt id=hl-6-40><a class=lnlinks href=#hl-6-40>40</a>
</span><span class=lnt id=hl-6-41><a class=lnlinks href=#hl-6-41>41</a>
</span><span class=lnt id=hl-6-42><a class=lnlinks href=#hl-6-42>42</a>
</span><span class=lnt id=hl-6-43><a class=lnlinks href=#hl-6-43>43</a>
</span><span class=lnt id=hl-6-44><a class=lnlinks href=#hl-6-44>44</a>
</span><span class=lnt id=hl-6-45><a class=lnlinks href=#hl-6-45>45</a>
</span><span class=lnt id=hl-6-46><a class=lnlinks href=#hl-6-46>46</a>
</span><span class=lnt id=hl-6-47><a class=lnlinks href=#hl-6-47>47</a>
</span><span class=lnt id=hl-6-48><a class=lnlinks href=#hl-6-48>48</a>
</span><span class=lnt id=hl-6-49><a class=lnlinks href=#hl-6-49>49</a>
</span><span class=lnt id=hl-6-50><a class=lnlinks href=#hl-6-50>50</a>
</span><span class=lnt id=hl-6-51><a class=lnlinks href=#hl-6-51>51</a>
</span><span class=lnt id=hl-6-52><a class=lnlinks href=#hl-6-52>52</a>
</span><span class=lnt id=hl-6-53><a class=lnlinks href=#hl-6-53>53</a>
</span><span class=lnt id=hl-6-54><a class=lnlinks href=#hl-6-54>54</a>
</span><span class=lnt id=hl-6-55><a class=lnlinks href=#hl-6-55>55</a>
</span><span class=lnt id=hl-6-56><a class=lnlinks href=#hl-6-56>56</a>
</span><span class=lnt id=hl-6-57><a class=lnlinks href=#hl-6-57>57</a>
</span><span class=lnt id=hl-6-58><a class=lnlinks href=#hl-6-58>58</a>
</span><span class=lnt id=hl-6-59><a class=lnlinks href=#hl-6-59>59</a>
</span><span class=lnt id=hl-6-60><a class=lnlinks href=#hl-6-60>60</a>
</span><span class=lnt id=hl-6-61><a class=lnlinks href=#hl-6-61>61</a>
</span><span class=lnt id=hl-6-62><a class=lnlinks href=#hl-6-62>62</a>
</span><span class=lnt id=hl-6-63><a class=lnlinks href=#hl-6-63>63</a>
</span><span class=lnt id=hl-6-64><a class=lnlinks href=#hl-6-64>64</a>
</span><span class=lnt id=hl-6-65><a class=lnlinks href=#hl-6-65>65</a>
</span><span class=lnt id=hl-6-66><a class=lnlinks href=#hl-6-66>66</a>
</span><span class=lnt id=hl-6-67><a class=lnlinks href=#hl-6-67>67</a>
</span><span class=lnt id=hl-6-68><a class=lnlinks href=#hl-6-68>68</a>
</span><span class=lnt id=hl-6-69><a class=lnlinks href=#hl-6-69>69</a>
</span><span class=lnt id=hl-6-70><a class=lnlinks href=#hl-6-70>70</a>
</span><span class=lnt id=hl-6-71><a class=lnlinks href=#hl-6-71>71</a>
</span><span class=lnt id=hl-6-72><a class=lnlinks href=#hl-6-72>72</a>
</span><span class=lnt id=hl-6-73><a class=lnlinks href=#hl-6-73>73</a>
</span><span class=lnt id=hl-6-74><a class=lnlinks href=#hl-6-74>74</a>
</span><span class=lnt id=hl-6-75><a class=lnlinks href=#hl-6-75>75</a>
</span><span class=lnt id=hl-6-76><a class=lnlinks href=#hl-6-76>76</a>
</span><span class=lnt id=hl-6-77><a class=lnlinks href=#hl-6-77>77</a>
</span><span class=lnt id=hl-6-78><a class=lnlinks href=#hl-6-78>78</a>
</span><span class=lnt id=hl-6-79><a class=lnlinks href=#hl-6-79>79</a>
</span><span class=lnt id=hl-6-80><a class=lnlinks href=#hl-6-80>80</a>
</span><span class=lnt id=hl-6-81><a class=lnlinks href=#hl-6-81>81</a>
</span><span class=lnt id=hl-6-82><a class=lnlinks href=#hl-6-82>82</a>
</span><span class=lnt id=hl-6-83><a class=lnlinks href=#hl-6-83>83</a>
</span><span class=lnt id=hl-6-84><a class=lnlinks href=#hl-6-84>84</a>
</span><span class=lnt id=hl-6-85><a class=lnlinks href=#hl-6-85>85</a>
</span><span class=lnt id=hl-6-86><a class=lnlinks href=#hl-6-86>86</a>
</span><span class=lnt id=hl-6-87><a class=lnlinks href=#hl-6-87>87</a>
</span><span class=lnt id=hl-6-88><a class=lnlinks href=#hl-6-88>88</a>
</span><span class=lnt id=hl-6-89><a class=lnlinks href=#hl-6-89>89</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>Issuer</span><span class=p>,</span> <span class=nx>generators</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;openid-client&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>session</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express-session&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 세션 설정
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>session</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>secret</span><span class=o>:</span> <span class=s1>&#39;session-secret&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>resave</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>saveUninitialized</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=p>}));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// OIDC 설정 (구글 예시)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>client</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>Issuer</span><span class=p>.</span><span class=nx>discover</span><span class=p>(</span><span class=s1>&#39;https://accounts.google.com&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>issuer</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>client</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>issuer</span><span class=p>.</span><span class=nx>Client</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>client_id</span><span class=o>:</span> <span class=s1>&#39;YOUR_CLIENT_ID&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>client_secret</span><span class=o>:</span> <span class=s1>&#39;YOUR_CLIENT_SECRET&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>redirect_uris</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;http://localhost:3000/callback&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nx>response_types</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;code&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;OIDC 클라이언트 초기화 완료&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=nx>err</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;OIDC 설정 오류:&#39;</span><span class=p>,</span> <span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 로그인 시작
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/login&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>code_verifier</span> <span class=o>=</span> <span class=nx>generators</span><span class=p>.</span><span class=nx>codeVerifier</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>code_challenge</span> <span class=o>=</span> <span class=nx>generators</span><span class=p>.</span><span class=nx>codeChallenge</span><span class=p>(</span><span class=nx>code_verifier</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>req</span><span class=p>.</span><span class=nx>session</span><span class=p>.</span><span class=nx>code_verifier</span> <span class=o>=</span> <span class=nx>code_verifier</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>authUrl</span> <span class=o>=</span> <span class=nx>client</span><span class=p>.</span><span class=nx>authorizationUrl</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>scope</span><span class=o>:</span> <span class=s1>&#39;openid email profile&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>code_challenge</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>code_challenge_method</span><span class=o>:</span> <span class=s1>&#39;S256&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>redirect</span><span class=p>(</span><span class=nx>authUrl</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 콜백 처리
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/callback&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>params</span> <span class=o>=</span> <span class=nx>client</span><span class=p>.</span><span class=nx>callbackParams</span><span class=p>(</span><span class=nx>req</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>tokenSet</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>client</span><span class=p>.</span><span class=nx>callback</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;http://localhost:3000/callback&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>params</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nx>code_verifier</span><span class=o>:</span> <span class=nx>req</span><span class=p>.</span><span class=nx>session</span><span class=p>.</span><span class=nx>code_verifier</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// ID 토큰 (JWT 형식)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>idToken</span> <span class=o>=</span> <span class=nx>tokenSet</span><span class=p>.</span><span class=nx>id_token</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// ID 토큰 클레임 확인
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>claims</span> <span class=o>=</span> <span class=nx>tokenSet</span><span class=p>.</span><span class=nx>claims</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 사용자 정보 (추가 정보 필요 시)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>userinfo</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>client</span><span class=p>.</span><span class=nx>userinfo</span><span class=p>(</span><span class=nx>tokenSet</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 세션에 사용자 정보 저장
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>req</span><span class=p>.</span><span class=nx>session</span><span class=p>.</span><span class=nx>user</span> <span class=o>=</span> <span class=nx>userinfo</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>redirect</span><span class=p>(</span><span class=s1>&#39;/profile&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;인증 오류:&#39;</span><span class=p>,</span> <span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>500</span><span class=p>).</span><span class=nx>send</span><span class=p>(</span><span class=s1>&#39;인증 처리 중 오류 발생&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용자 프로필
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/profile&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>req</span><span class=p>.</span><span class=nx>session</span><span class=p>.</span><span class=nx>user</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>redirect</span><span class=p>(</span><span class=s1>&#39;/login&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;인증된 사용자 정보&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>user</span><span class=o>:</span> <span class=nx>req</span><span class=p>.</span><span class=nx>session</span><span class=p>.</span><span class=nx>user</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>3000</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;서버 시작: http://localhost:3000&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/backend-development/>Backend-Development</a></li><li><a href=https://buenhyden.github.io/tags/api-design/>API-Design</a></li><li><a href=https://buenhyden.github.io/tags/authentication-methods/>Authentication-Methods</a></li><li><a href=https://buenhyden.github.io/tags/jwt/>JWT</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/system-design/migration-strategies/backpressure/backpressure/><span class=title>« Prev</span><br><span>Backpressure</span>
</a><a class=next href=https://buenhyden.github.io/posts/backend-development/api-design-and-development/api-styles/tunnel-style/soap/soap-api-vs-soap/><span class=title>Next »</span><br><span>SOAP API vs. SOAP</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>