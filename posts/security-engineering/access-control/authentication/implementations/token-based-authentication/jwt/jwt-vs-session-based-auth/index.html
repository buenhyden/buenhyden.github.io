<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>jwt vs. Session-based Auth | hyunyoun's Blog</title><meta name=keywords content="Backend-Development,API-Design,Authentication-Methods,JWT"><meta name=description content="JWT는 Stateless가 필요한 API 중심 애플리케이션이나 마이크로서비스에 적합하다. 토큰을 안전하게 저장하려면 HttpOnly 쿠키 사용을 권장한다.세션 기반 인증은 보안이 우선시되는 금융 서비스나 소규모 웹 앱에서 유리하다.  Redis와 같은 인메모리 DB로 세션을 관리하면 확장성을 개선할 수 있다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/security-engineering/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-session-based-auth/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/security-engineering/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-session-based-auth/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/security-engineering/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-session-based-auth/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="jwt vs. Session-based Auth"><meta property="og:description" content="JWT는 Stateless가 필요한 API 중심 애플리케이션이나 마이크로서비스에 적합하다. 토큰을 안전하게 저장하려면 HttpOnly 쿠키 사용을 권장한다.세션 기반 인증은 보안이 우선시되는 금융 서비스나 소규모 웹 앱에서 유리하다.  Redis와 같은 인메모리 DB로 세션을 관리하면 확장성을 개선할 수 있다."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-04-02T02:46:00+00:00"><meta property="article:modified_time" content="2025-04-02T02:46:00+00:00"><meta property="article:tag" content="Backend-Development"><meta property="article:tag" content="API-Design"><meta property="article:tag" content="Authentication-Methods"><meta property="article:tag" content="JWT"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="jwt vs. Session-based Auth"><meta name=twitter:description content="JWT는 Stateless가 필요한 API 중심 애플리케이션이나 마이크로서비스에 적합하다. 토큰을 안전하게 저장하려면 HttpOnly 쿠키 사용을 권장한다.세션 기반 인증은 보안이 우선시되는 금융 서비스나 소규모 웹 앱에서 유리하다.  Redis와 같은 인메모리 DB로 세션을 관리하면 확장성을 개선할 수 있다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"jwt vs. Session-based Auth","item":"https://buenhyden.github.io/posts/security-engineering/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-session-based-auth/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"jwt vs. Session-based Auth","name":"jwt vs. Session-based Auth","description":"JWT는 Stateless가 필요한 API 중심 애플리케이션이나 마이크로서비스에 적합하다. 토큰을 안전하게 저장하려면 HttpOnly 쿠키 사용을 권장한다.\r\r세션 기반 인증은 보안이 우선시되는 금융 서비스나 소규모 웹 앱에서 유리하다.  Redis와 같은 인메모리 DB로 세션을 관리하면 확장성을 개선할 수 있다.","keywords":["Backend-Development","API-Design","Authentication-Methods","JWT"],"articleBody":"Jwt vs. Session-based Auth 기본 개념 JWT(JSON Web Token)\nJWT는 당사자 간에 정보를 JSON 객체로 안전하게 전송하기 위한 방식이다. 이 정보는 디지털 서명되어 있어 신뢰할 수 있으며, 토큰 자체에 필요한 모든 정보를 포함하고 있다. JWT는 주로 상태 비저장(Stateless) 인증 메커니즘으로 사용된다.\n세션 기반 인증\n세션 기반 인증은 서버가 사용자의 인증 상태를 유지하는 전통적인 인증 방식이다. 사용자가 로그인하면 서버는 세션 ID를 생성하고 이를 서버 메모리나 데이터베이스에 저장한다. 이 세션 ID는 쿠키를 통해 클라이언트에게 전달되며, 후속 요청에서 클라이언트는 이 쿠키를 전송하여 인증 상태를 유지한다.\n작동 원리 JWT 인증 흐름\n사용자가 자격 증명(아이디/비밀번호)을 제출하여 로그인한다. 서버는 자격 증명을 확인하고, 서명된 JWT를 생성한다. 서버는 JWT를 클라이언트에게 반환한다. 클라이언트는 JWT를 저장하고(주로 로컬 스토리지나 쿠키), 이후 요청에 이 토큰을 Authorization 헤더에 포함시킨다. 서버는 JWT의 서명을 검증하고 토큰 내 정보를 기반으로 사용자를 인증한다. 보호된 리소스에 대한 접근이 허용된다. 세션 기반 인증 흐름\n사용자가 자격 증명(아이디/비밀번호)을 제출하여 로그인한다. 서버는 자격 증명을 확인하고, 고유한 세션 ID를 생성한다. 서버는 세션 ID와 연관된 사용자 데이터를 서버 메모리나 데이터베이스에 저장한다. 서버는 세션 ID를 쿠키를 통해 클라이언트에게 전송한다. 클라이언트는 이후 요청에 자동으로 쿠키를 포함시킨다. 서버는 쿠키에서 세션 ID를 추출하고 저장된 세션 데이터와 대조하여 사용자를 인증한다. 인증 후 보호된 리소스에 대한 접근이 허용됩니다. 구조와 구성 요소 JWT 구조\nJWT는 세 부분으로 구성되며, 각 부분은 점(.)으로 구분된다. 헤더(Header): 토큰 타입과 사용된 서명 알고리즘(예: HMAC SHA256, RSA)을 명시한다. 페이로드(Payload)**: 토큰에 포함될 클레임(사용자 ID, 이름, 권한 등)을 포함한다. 서명(Signature)**: 헤더와 페이로드를 인코딩한 값에 비밀 키를 사용하여 서명함으로써 토큰의 무결성을 보장한다.\n예시: xxxxx.yyyyy.zzzzz (헤더.페이로드.서명) 세션 구성 요소 세션 ID: 사용자 세션을 식별하는 고유한 식별자. 세션 저장소: 세션 데이터를 저장하는 서버 측 저장소(메모리, 데이터베이스, 캐시 등). 쿠키: 세션 ID를 클라이언트에게 전달하는 HTTP 쿠키. 세션 데이터: 서버에 저장된 사용자 관련 정보. 주요 차이점 상태 관리\nJWT: 상태 비저장(Stateless) 방식으로, 서버는 클라이언트 상태를 저장하지 않는다. 모든 필요한 정보가 토큰 자체에 포함된다. 세션: 상태 저장(Stateful) 방식으로, 서버는 세션 데이터를 저장하고 관리한다. 데이터 저장 위치\nJWT: 클라이언트 측에 모든 필요한 정보를 저장한다. 서버는 단지 토큰을 검증만 한다. 세션: 클라이언트에는 세션 ID만 저장하고, 실제 사용자 데이터는 서버에 저장한다. 확장성\nJWT: 분산 시스템에서 확장성이 뛰어나다. 토큰 자체에 정보가 포함되어 있으므로 서버 간 상태 공유가 필요 없다. 세션: 여러 서버 간에 세션 정보를 공유하기 위해 추가적인 메커니즘(Redis, 데이터베이스 등)이 필요하다. 성능\nJWT: 토큰 검증 시 복호화와 서명 확인 과정이 필요하지만, 데이터베이스 조회가 필요 없다. 세션: 매 요청마다 세션 저장소에서 세션 데이터를 조회해야 한다. 보안\nJWT: 토큰 자체에 정보가 포함되어 있어, 토큰 탈취 시 정보 노출 위험이 있다(민감한 정보는 포함하면 안 됨). 세션: 세션 ID만 클라이언트에 노출되고, 실제 데이터는 서버에 안전하게 보관된다. 만료 및 무효화\nJWT: 토큰에 만료 시간이 내장되어 있으며, 일단 발급된 토큰은 만료 전까지 무효화하기 어렵다. 세션: 서버에서 언제든지 세션을 무효화할 수 있으며, 세션 타임아웃을 동적으로 관리할 수 있다. 장단점 JWT 장점 확장성: 분산 시스템과 마이크로서비스 아키텍처에 적합하다. 서버 부하 감소: 세션 저장소가 필요 없어 서버 메모리를 절약할 수 있다. 교차 도메인 지원: 다양한 도메인 간 인증이 용이하다. 모바일 친화적: 모바일 애플리케이션에서 사용하기 좋다. 인증 정보 포함: 토큰 자체에 사용자 정보와 권한이 포함되어 있다. 단점 토큰 크기: 포함된 정보가 많을수록 토큰 크기가 커져 네트워크 오버헤드가 발생한다. 보안 위험: 클라이언트에 저장된 정보는 탈취될 수 있으며, 민감한 정보 포함 시 위험하다. 토큰 무효화 어려움: 발급된 토큰을 즉시 무효화하기 어렵다(블랙리스트 관리 필요). 상태 관리 제한: 사용자 정보 변경 시 토큰에 반영하기 어렵다. 토큰 갱신 메커니즘 필요: 장기 인증을 위해 리프레시 토큰 같은 추가 메커니즘이 필요하다. Session-based Auth 장점 즉각적인 무효화: 언제든지 서버에서 세션을 삭제할 수 있다. 데이터 보안: 민감한 정보는 서버에만 저장되어 보안성이 높다. 동적 데이터 관리: 사용자 정보 변경 시 서버 측 세션 데이터만 업데이트하면 된다. 세션 제어 용이: 세션 타임아웃, 동시 로그인 제한 등의 기능을 쉽게 구현할 수 있다. 익숙한 구현: 대부분의 웹 프레임워크에서 세션 관리 기능을 기본적으로 제공한다. 단점 서버 부하: 세션 데이터를 저장하고 관리하는 데 서버 리소스가 필요하다. 확장성 문제: 여러 서버 간 세션 공유를 위한 추가 인프라가 필요하다. CSRF 취약점: 적절한 보호 장치가 없으면 CSRF(Cross-Site Request Forgery) 공격에 취약하다. 성능 영향: 매 요청마다 세션 저장소에 접근해야 하므로 성능 저하가 발생할 수 있다. 모바일/API 제한: 쿠키 기반 세션은 일부 모바일 환경이나 API에서 사용하기 어려울 수 있다. 적합한 사용 시나리오 JWT에 적합한 시나리오 마이크로서비스 아키텍처 분산 시스템 환경 서버리스 아키텍처 RESTful API 서비스 모바일 애플리케이션 백엔드 단기 인증이 필요한 경우 서버 간 인증이 필요한 경우 세션에 적합한 시나리오 전통적인 웹 애플리케이션 높은 보안이 필요한 환경 사용자 세션을 세밀하게 제어해야 하는 경우 사용자 데이터가 자주 변경되는 경우 즉각적인 로그아웃 기능이 중요한 경우 단일 서버 환경 보안 고려사항 JWT 보안 고려사항 적절한 만료 시간 설정: 짧은 만료 시간을 설정하여 토큰 탈취 위험을 줄인다. HTTPS 사용: 토큰 전송 시 항상 HTTPS를 사용하여 전송 중인 토큰이 탈취되지 않도록 한다. 민감한 정보 제외: 토큰에 비밀번호나 민감한 개인 정보를 포함하지 않는다. 강력한 서명 알고리즘 사용: 안전한 알고리즘(예: RS256)과 충분한 키 길이를 사용한다. 리프레시 토큰 보호: 리프레시 토큰은 보안을 강화하여 별도로 관리한다. 세션 보안 고려사항 안전한 세션 ID 생성: 충분히 길고 예측 불가능한 세션 ID를 생성한다. 세션 쿠키 보안: Secure, HttpOnly, SameSite 속성을 설정하여 쿠키 보안을 강화한다. 세션 타임아웃 설정: 적절한 세션 만료 시간을 설정한다. CSRF 방어: 토큰 기반 CSRF 방어 메커니즘을 구현한다. 세션 고정 공격 방지: 인증 후 세션 ID를 재생성한다. 실제 구현 예시 JWT 구현 예시 (Node.js) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 // JWT 인증 구현 예시 const express = require('express'); const jwt = require('jsonwebtoken'); const app = express(); // JWT 비밀키 (실제 환경에서는 환경 변수로 관리) const JWT_SECRET = 'your_jwt_secret'; app.use(express.json()); // 로그인 라우트 app.post('/login', (req, res) =\u003e { // 사용자 인증 로직 (데이터베이스 조회 등) const { username, password } = req.body; // 간단한 사용자 확인 예시 (실제로는 DB에서 확인) if (username === 'admin' \u0026\u0026 password === 'password') { // 사용자 정보 const user = { id: 1, username: 'admin', role: 'admin' }; // JWT 토큰 생성 const token = jwt.sign( user, JWT_SECRET, { expiresIn: '1h' } // 토큰 만료 시간 설정 ); // 토큰 반환 res.json({ token }); } else { res.status(401).json({ message: '인증 실패' }); } }); // JWT 인증 미들웨어 function authenticateToken(req, res, next) { // Authorization 헤더에서 토큰 추출 const authHeader = req.headers['authorization']; const token = authHeader \u0026\u0026 authHeader.split(' ')[1]; // \"Bearer TOKEN\" 형식 if (!token) { return res.status(401).json({ message: '인증 토큰이 필요합니다' }); } // 토큰 검증 jwt.verify(token, JWT_SECRET, (err, user) =\u003e { if (err) { return res.status(403).json({ message: '유효하지 않은 토큰입니다' }); } // 사용자 정보를 요청 객체에 저장 req.user = user; next(); }); } // 보호된 라우트 app.get('/protected', authenticateToken, (req, res) =\u003e { res.json({ message: '인증된 사용자입니다!', user: req.user }); }); app.listen(3000, () =\u003e { console.log('서버가 3000번 포트에서 실행 중입니다'); }); 세션 기반 인증 구현 예시 (Node.js) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 // 세션 기반 인증 구현 예시 const express = require('express'); const session = require('express-session'); const app = express(); app.use(express.json()); // 세션 미들웨어 설정 app.use(session({ secret: 'your_session_secret', // 세션 암호화 키 (환경 변수로 관리) resave: false, saveUninitialized: false, cookie: { secure: process.env.NODE_ENV === 'production', // HTTPS 환경에서만 쿠키 전송 httpOnly: true, // JS에서 쿠키 접근 방지 maxAge: 3600000 // 쿠키 만료 시간 (1시간) } })); // 로그인 라우트 app.post('/login', (req, res) =\u003e { // 사용자 인증 로직 (데이터베이스 조회 등) const { username, password } = req.body; // 간단한 사용자 확인 예시 (실제로는 DB에서 확인) if (username === 'admin' \u0026\u0026 password === 'password') { // 세션에 사용자 정보 저장 req.session.user = { id: 1, username: 'admin', role: 'admin', loggedInAt: new Date() }; res.json({ message: '로그인 성공!' }); } else { res.status(401).json({ message: '인증 실패' }); } }); // 세션 인증 미들웨어 function authenticate(req, res, next) { if (!req.session.user) { return res.status(401).json({ message: '인증이 필요합니다' }); } next(); } // 보호된 라우트 app.get('/protected', authenticate, (req, res) =\u003e { res.json({ message: '인증된 사용자입니다!', user: req.session.user }); }); // 로그아웃 라우트 app.post('/logout', authenticate, (req, res) =\u003e { // 세션 삭제 req.session.destroy(err =\u003e { if (err) { return res.status(500).json({ message: '로그아웃 실패' }); } res.clearCookie('connect.sid'); // 세션 쿠키 삭제 res.json({ message: '로그아웃 성공!' }); }); }); app.listen(3000, () =\u003e { console.log('서버가 3000번 포트에서 실행 중입니다'); }); 하이브리드 접근 방식 최근에는 JWT와 세션 인증의 장점을 결합한 하이브리드 접근 방식도 사용된다:\nJWT + 리프레시 토큰: 짧은 만료 시간의 JWT 액세스 토큰과 서버에 저장하는 리프레시 토큰을 함께 사용하여 보안과 편의성을 균형 있게 유지한다. JWT를 세션 저장소와 함께 사용: JWT 토큰을 발급하면서도 서버 측 세션 저장소에 토큰의 유효성을 관리하여 필요시 즉시 무효화할 수 있게 한다. 세션 클러스터링: 여러 서버 간에 세션을 공유하기 위해 Redis와 같은 인메모리 데이터 저장소를 사용하여 확장성 문제를 해결한다. Jwt vs. Session-based Auth 특성 JWT 세션 기반 인증 상태 관리 Stateless (상태 비저장) Stateful (상태 저장) 데이터 저장 위치 클라이언트 측 서버 측 확장성 높음 (서버 간 공유 필요 없음) 낮음 (세션 클러스터링 필요) 서버 부하 낮음 높음 메모리 사용 클라이언트: 높음, 서버: 낮음 클라이언트: 낮음, 서버: 높음 보안 (정보 저장) 중간 (정보가 클라이언트에 저장) 높음 (정보가 서버에만 저장) 토큰/세션 크기 클 수 있음 (포함된 데이터에 따라) 작음 (세션 ID만) 세션 무효화 어려움 (별도 메커니즘 필요) 쉬움 (서버에서 즉시 가능) CSRF 취약성 낮음 (Authorization 헤더 사용 시) 높음 (별도 보호 필요) XSS 취약성 높음 (토큰 탈취 위험) 중간 (HttpOnly 쿠키 사용 시) 구현 복잡성 중간 낮음 (프레임워크 지원) 서드파티 지원 우수함 (광범위한 라이브러리) 우수함 (표준 메커니즘) 모바일/API 호환성 우수함 제한적 만료 처리 자체 포함 (exp 클레임) 서버에서 관리 요청 오버헤드 높음 (큰 토큰 전송) 낮음 (작은 세션 ID만 전송) 사용자 정보 업데이트 어려움 (새 토큰 발급 필요) 쉬움 (세션 데이터만 업데이트) 적합한 아키텍처 마이크로서비스, 분산 시스템 모놀리식, 단일 서버 환경 백엔드 자유도 높음 (다양한 언어/프레임워크) 중간 (세션 저장소 필요) 인증 방식 토큰 기반 쿠키 기반 로그아웃 처리 복잡함 (클라이언트에서 삭제, 블랙리스트 관리) 간단함 (서버에서 세션 삭제) 확장 기능 제한적 다양함 (세션 데이터 동적 관리) 동시 접속 제어 어려움 쉬움 용어 정리 용어 설명 참고 및 출처 ","wordCount":"1693","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2025-04-02T02:46:00Z","dateModified":"2025-04-02T02:46:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/security-engineering/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-session-based-auth/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a></div><h1 class="post-title entry-hint-parent">jwt vs. Session-based Auth</h1><div class=post-description>JWT는 Stateless가 필요한 API 중심 애플리케이션이나 마이크로서비스에 적합하다. 토큰을 안전하게 저장하려면 HttpOnly 쿠키 사용을 권장한다.
세션 기반 인증은 보안이 우선시되는 금융 서비스나 소규모 웹 앱에서 유리하다. Redis와 같은 인메모리 DB로 세션을 관리하면 확장성을 개선할 수 있다.</div><div class=post-meta><span title='2025-04-02 02:46:00 +0000 UTC'>April 2, 2025</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Security%20Engineering/Access%20Control/Authentication/Implementations/Token-Based%20Authentication/JWT/jwt-vs-session-based-auth.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#jwt-vs-session-based-auth>Jwt vs. Session-based Auth</a><ul><li><a href=#기본-개념>기본 개념</a></li><li><a href=#작동-원리>작동 원리</a></li><li><a href=#구조와-구성-요소>구조와 구성 요소</a></li><li><a href=#주요-차이점>주요 차이점</a></li><li><a href=#장단점>장단점</a></li><li><a href=#적합한-사용-시나리오>적합한 사용 시나리오</a></li><li><a href=#보안-고려사항>보안 고려사항</a></li><li><a href=#실제-구현-예시>실제 구현 예시</a></li><li><a href=#하이브리드-접근-방식>하이브리드 접근 방식</a></li><li><a href=#jwt-vs-session-based-auth-1>Jwt vs. Session-based Auth</a></li></ul></li><li><a href=#용어-정리>용어 정리</a></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=jwt-vs-session-based-auth>Jwt vs. Session-based Auth<a hidden class=anchor aria-hidden=true href=#jwt-vs-session-based-auth>#</a></h2><h3 id=기본-개념>기본 개념<a hidden class=anchor aria-hidden=true href=#기본-개념>#</a></h3><ul><li><p>JWT(JSON Web Token)<br>JWT는 당사자 간에 정보를 JSON 객체로 안전하게 전송하기 위한 방식이다. 이 정보는 디지털 서명되어 있어 신뢰할 수 있으며, 토큰 자체에 필요한 모든 정보를 포함하고 있다. JWT는 주로 상태 비저장(Stateless) 인증 메커니즘으로 사용된다.</p></li><li><p>세션 기반 인증<br>세션 기반 인증은 서버가 사용자의 인증 상태를 유지하는 전통적인 인증 방식이다. 사용자가 로그인하면 서버는 세션 ID를 생성하고 이를 서버 메모리나 데이터베이스에 저장한다. 이 세션 ID는 쿠키를 통해 클라이언트에게 전달되며, 후속 요청에서 클라이언트는 이 쿠키를 전송하여 인증 상태를 유지한다.</p></li></ul><h3 id=작동-원리>작동 원리<a hidden class=anchor aria-hidden=true href=#작동-원리>#</a></h3><ul><li><p>JWT 인증 흐름</p><ol><li>사용자가 자격 증명(아이디/비밀번호)을 제출하여 로그인한다.</li><li>서버는 자격 증명을 확인하고, 서명된 JWT를 생성한다.</li><li>서버는 JWT를 클라이언트에게 반환한다.</li><li>클라이언트는 JWT를 저장하고(주로 로컬 스토리지나 쿠키), 이후 요청에 이 토큰을 Authorization 헤더에 포함시킨다.</li><li>서버는 JWT의 서명을 검증하고 토큰 내 정보를 기반으로 사용자를 인증한다.</li><li>보호된 리소스에 대한 접근이 허용된다.</li></ol></li><li><p>세션 기반 인증 흐름</p><ol><li>사용자가 자격 증명(아이디/비밀번호)을 제출하여 로그인한다.</li><li>서버는 자격 증명을 확인하고, 고유한 세션 ID를 생성한다.</li><li>서버는 세션 ID와 연관된 사용자 데이터를 서버 메모리나 데이터베이스에 저장한다.</li><li>서버는 세션 ID를 쿠키를 통해 클라이언트에게 전송한다.</li><li>클라이언트는 이후 요청에 자동으로 쿠키를 포함시킨다.</li><li>서버는 쿠키에서 세션 ID를 추출하고 저장된 세션 데이터와 대조하여 사용자를 인증한다.</li><li>인증 후 보호된 리소스에 대한 접근이 허용됩니다.</li></ol></li></ul><h3 id=구조와-구성-요소>구조와 구성 요소<a hidden class=anchor aria-hidden=true href=#구조와-구성-요소>#</a></h3><ul><li>JWT 구조<br>JWT는 세 부분으로 구성되며, 각 부분은 점(.)으로 구분된다.<ol><li><strong>헤더(Header)</strong>: 토큰 타입과 사용된 서명 알고리즘(예: HMAC SHA256, RSA)을 명시한다.</li><li>페이로드(Payload)**: 토큰에 포함될 클레임(사용자 ID, 이름, 권한 등)을 포함한다.</li><li>서명(Signature)**: 헤더와 페이로드를 인코딩한 값에 비밀 키를 사용하여 서명함으로써 토큰의 무결성을 보장한다.<br>예시: <code>xxxxx.yyyyy.zzzzz</code> (헤더.페이로드.서명)</li></ol></li><li>세션 구성 요소<ol><li><strong>세션 ID</strong>: 사용자 세션을 식별하는 고유한 식별자.</li><li><strong>세션 저장소</strong>: 세션 데이터를 저장하는 서버 측 저장소(메모리, 데이터베이스, 캐시 등).</li><li><strong>쿠키</strong>: 세션 ID를 클라이언트에게 전달하는 HTTP 쿠키.</li><li><strong>세션 데이터</strong>: 서버에 저장된 사용자 관련 정보.</li></ol></li></ul><h3 id=주요-차이점>주요 차이점<a hidden class=anchor aria-hidden=true href=#주요-차이점>#</a></h3><ol><li><p>상태 관리</p><ul><li><strong>JWT</strong>: 상태 비저장(Stateless) 방식으로, 서버는 클라이언트 상태를 저장하지 않는다. 모든 필요한 정보가 토큰 자체에 포함된다.</li><li><strong>세션</strong>: 상태 저장(Stateful) 방식으로, 서버는 세션 데이터를 저장하고 관리한다.</li></ul></li><li><p>데이터 저장 위치</p><ul><li><strong>JWT</strong>: 클라이언트 측에 모든 필요한 정보를 저장한다. 서버는 단지 토큰을 검증만 한다.</li><li><strong>세션</strong>: 클라이언트에는 세션 ID만 저장하고, 실제 사용자 데이터는 서버에 저장한다.</li></ul></li><li><p>확장성</p><ul><li><strong>JWT</strong>: 분산 시스템에서 확장성이 뛰어나다. 토큰 자체에 정보가 포함되어 있으므로 서버 간 상태 공유가 필요 없다.</li><li><strong>세션</strong>: 여러 서버 간에 세션 정보를 공유하기 위해 추가적인 메커니즘(Redis, 데이터베이스 등)이 필요하다.</li></ul></li><li><p>성능</p><ul><li><strong>JWT</strong>: 토큰 검증 시 복호화와 서명 확인 과정이 필요하지만, 데이터베이스 조회가 필요 없다.</li><li><strong>세션</strong>: 매 요청마다 세션 저장소에서 세션 데이터를 조회해야 한다.</li></ul></li><li><p>보안</p><ul><li><strong>JWT</strong>: 토큰 자체에 정보가 포함되어 있어, 토큰 탈취 시 정보 노출 위험이 있다(민감한 정보는 포함하면 안 됨).</li><li><strong>세션</strong>: 세션 ID만 클라이언트에 노출되고, 실제 데이터는 서버에 안전하게 보관된다.</li></ul></li><li><p>만료 및 무효화</p><ul><li><strong>JWT</strong>: 토큰에 만료 시간이 내장되어 있으며, 일단 발급된 토큰은 만료 전까지 무효화하기 어렵다.</li><li><strong>세션</strong>: 서버에서 언제든지 세션을 무효화할 수 있으며, 세션 타임아웃을 동적으로 관리할 수 있다.</li></ul></li></ol><h3 id=장단점>장단점<a hidden class=anchor aria-hidden=true href=#장단점>#</a></h3><h4 id=jwt>JWT<a hidden class=anchor aria-hidden=true href=#jwt>#</a></h4><ul><li>장점<ol><li><strong>확장성</strong>: 분산 시스템과 마이크로서비스 아키텍처에 적합하다.</li><li><strong>서버 부하 감소</strong>: 세션 저장소가 필요 없어 서버 메모리를 절약할 수 있다.</li><li><strong>교차 도메인 지원</strong>: 다양한 도메인 간 인증이 용이하다.</li><li><strong>모바일 친화적</strong>: 모바일 애플리케이션에서 사용하기 좋다.</li><li><strong>인증 정보 포함</strong>: 토큰 자체에 사용자 정보와 권한이 포함되어 있다.</li></ol></li><li>단점<ol><li><strong>토큰 크기</strong>: 포함된 정보가 많을수록 토큰 크기가 커져 네트워크 오버헤드가 발생한다.</li><li><strong>보안 위험</strong>: 클라이언트에 저장된 정보는 탈취될 수 있으며, 민감한 정보 포함 시 위험하다.</li><li><strong>토큰 무효화 어려움</strong>: 발급된 토큰을 즉시 무효화하기 어렵다(블랙리스트 관리 필요).</li><li><strong>상태 관리 제한</strong>: 사용자 정보 변경 시 토큰에 반영하기 어렵다.</li><li><strong>토큰 갱신 메커니즘 필요</strong>: 장기 인증을 위해 리프레시 토큰 같은 추가 메커니즘이 필요하다.</li></ol></li></ul><h4 id=session-based-auth>Session-based Auth<a hidden class=anchor aria-hidden=true href=#session-based-auth>#</a></h4><ul><li>장점<ol><li><strong>즉각적인 무효화</strong>: 언제든지 서버에서 세션을 삭제할 수 있다.</li><li><strong>데이터 보안</strong>: 민감한 정보는 서버에만 저장되어 보안성이 높다.</li><li><strong>동적 데이터 관리</strong>: 사용자 정보 변경 시 서버 측 세션 데이터만 업데이트하면 된다.</li><li><strong>세션 제어 용이</strong>: 세션 타임아웃, 동시 로그인 제한 등의 기능을 쉽게 구현할 수 있다.</li><li><strong>익숙한 구현</strong>: 대부분의 웹 프레임워크에서 세션 관리 기능을 기본적으로 제공한다.</li></ol></li><li>단점<ol><li><strong>서버 부하</strong>: 세션 데이터를 저장하고 관리하는 데 서버 리소스가 필요하다.</li><li><strong>확장성 문제</strong>: 여러 서버 간 세션 공유를 위한 추가 인프라가 필요하다.</li><li><strong>CSRF 취약점</strong>: 적절한 보호 장치가 없으면 CSRF(Cross-Site Request Forgery) 공격에 취약하다.</li><li><strong>성능 영향</strong>: 매 요청마다 세션 저장소에 접근해야 하므로 성능 저하가 발생할 수 있다.</li><li><strong>모바일/API 제한</strong>: 쿠키 기반 세션은 일부 모바일 환경이나 API에서 사용하기 어려울 수 있다.</li></ol></li></ul><h3 id=적합한-사용-시나리오>적합한 사용 시나리오<a hidden class=anchor aria-hidden=true href=#적합한-사용-시나리오>#</a></h3><ul><li>JWT에 적합한 시나리오<ul><li>마이크로서비스 아키텍처</li><li>분산 시스템 환경</li><li>서버리스 아키텍처</li><li>RESTful API 서비스</li><li>모바일 애플리케이션 백엔드</li><li>단기 인증이 필요한 경우</li><li>서버 간 인증이 필요한 경우</li></ul></li><li>세션에 적합한 시나리오<ul><li>전통적인 웹 애플리케이션</li><li>높은 보안이 필요한 환경</li><li>사용자 세션을 세밀하게 제어해야 하는 경우</li><li>사용자 데이터가 자주 변경되는 경우</li><li>즉각적인 로그아웃 기능이 중요한 경우</li><li>단일 서버 환경</li></ul></li></ul><h3 id=보안-고려사항>보안 고려사항<a hidden class=anchor aria-hidden=true href=#보안-고려사항>#</a></h3><ul><li>JWT 보안 고려사항<ol><li><strong>적절한 만료 시간 설정</strong>: 짧은 만료 시간을 설정하여 토큰 탈취 위험을 줄인다.</li><li><strong>HTTPS 사용</strong>: 토큰 전송 시 항상 HTTPS를 사용하여 전송 중인 토큰이 탈취되지 않도록 한다.</li><li><strong>민감한 정보 제외</strong>: 토큰에 비밀번호나 민감한 개인 정보를 포함하지 않는다.</li><li><strong>강력한 서명 알고리즘 사용</strong>: 안전한 알고리즘(예: RS256)과 충분한 키 길이를 사용한다.</li><li><strong>리프레시 토큰 보호</strong>: 리프레시 토큰은 보안을 강화하여 별도로 관리한다.</li></ol></li><li>세션 보안 고려사항<ol><li><strong>안전한 세션 ID 생성</strong>: 충분히 길고 예측 불가능한 세션 ID를 생성한다.</li><li><strong>세션 쿠키 보안</strong>: Secure, HttpOnly, SameSite 속성을 설정하여 쿠키 보안을 강화한다.</li><li><strong>세션 타임아웃 설정</strong>: 적절한 세션 만료 시간을 설정한다.</li><li><strong>CSRF 방어</strong>: 토큰 기반 CSRF 방어 메커니즘을 구현한다.</li><li><strong>세션 고정 공격 방지</strong>: 인증 후 세션 ID를 재생성한다.</li></ol></li></ul><h3 id=실제-구현-예시>실제 구현 예시<a hidden class=anchor aria-hidden=true href=#실제-구현-예시>#</a></h3><h4 id=jwt-구현-예시-nodejs>JWT 구현 예시 (Node.js)<a hidden class=anchor aria-hidden=true href=#jwt-구현-예시-nodejs>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a>
</span><span class=lnt id=hl-0-21><a class=lnlinks href=#hl-0-21>21</a>
</span><span class=lnt id=hl-0-22><a class=lnlinks href=#hl-0-22>22</a>
</span><span class=lnt id=hl-0-23><a class=lnlinks href=#hl-0-23>23</a>
</span><span class=lnt id=hl-0-24><a class=lnlinks href=#hl-0-24>24</a>
</span><span class=lnt id=hl-0-25><a class=lnlinks href=#hl-0-25>25</a>
</span><span class=lnt id=hl-0-26><a class=lnlinks href=#hl-0-26>26</a>
</span><span class=lnt id=hl-0-27><a class=lnlinks href=#hl-0-27>27</a>
</span><span class=lnt id=hl-0-28><a class=lnlinks href=#hl-0-28>28</a>
</span><span class=lnt id=hl-0-29><a class=lnlinks href=#hl-0-29>29</a>
</span><span class=lnt id=hl-0-30><a class=lnlinks href=#hl-0-30>30</a>
</span><span class=lnt id=hl-0-31><a class=lnlinks href=#hl-0-31>31</a>
</span><span class=lnt id=hl-0-32><a class=lnlinks href=#hl-0-32>32</a>
</span><span class=lnt id=hl-0-33><a class=lnlinks href=#hl-0-33>33</a>
</span><span class=lnt id=hl-0-34><a class=lnlinks href=#hl-0-34>34</a>
</span><span class=lnt id=hl-0-35><a class=lnlinks href=#hl-0-35>35</a>
</span><span class=lnt id=hl-0-36><a class=lnlinks href=#hl-0-36>36</a>
</span><span class=lnt id=hl-0-37><a class=lnlinks href=#hl-0-37>37</a>
</span><span class=lnt id=hl-0-38><a class=lnlinks href=#hl-0-38>38</a>
</span><span class=lnt id=hl-0-39><a class=lnlinks href=#hl-0-39>39</a>
</span><span class=lnt id=hl-0-40><a class=lnlinks href=#hl-0-40>40</a>
</span><span class=lnt id=hl-0-41><a class=lnlinks href=#hl-0-41>41</a>
</span><span class=lnt id=hl-0-42><a class=lnlinks href=#hl-0-42>42</a>
</span><span class=lnt id=hl-0-43><a class=lnlinks href=#hl-0-43>43</a>
</span><span class=lnt id=hl-0-44><a class=lnlinks href=#hl-0-44>44</a>
</span><span class=lnt id=hl-0-45><a class=lnlinks href=#hl-0-45>45</a>
</span><span class=lnt id=hl-0-46><a class=lnlinks href=#hl-0-46>46</a>
</span><span class=lnt id=hl-0-47><a class=lnlinks href=#hl-0-47>47</a>
</span><span class=lnt id=hl-0-48><a class=lnlinks href=#hl-0-48>48</a>
</span><span class=lnt id=hl-0-49><a class=lnlinks href=#hl-0-49>49</a>
</span><span class=lnt id=hl-0-50><a class=lnlinks href=#hl-0-50>50</a>
</span><span class=lnt id=hl-0-51><a class=lnlinks href=#hl-0-51>51</a>
</span><span class=lnt id=hl-0-52><a class=lnlinks href=#hl-0-52>52</a>
</span><span class=lnt id=hl-0-53><a class=lnlinks href=#hl-0-53>53</a>
</span><span class=lnt id=hl-0-54><a class=lnlinks href=#hl-0-54>54</a>
</span><span class=lnt id=hl-0-55><a class=lnlinks href=#hl-0-55>55</a>
</span><span class=lnt id=hl-0-56><a class=lnlinks href=#hl-0-56>56</a>
</span><span class=lnt id=hl-0-57><a class=lnlinks href=#hl-0-57>57</a>
</span><span class=lnt id=hl-0-58><a class=lnlinks href=#hl-0-58>58</a>
</span><span class=lnt id=hl-0-59><a class=lnlinks href=#hl-0-59>59</a>
</span><span class=lnt id=hl-0-60><a class=lnlinks href=#hl-0-60>60</a>
</span><span class=lnt id=hl-0-61><a class=lnlinks href=#hl-0-61>61</a>
</span><span class=lnt id=hl-0-62><a class=lnlinks href=#hl-0-62>62</a>
</span><span class=lnt id=hl-0-63><a class=lnlinks href=#hl-0-63>63</a>
</span><span class=lnt id=hl-0-64><a class=lnlinks href=#hl-0-64>64</a>
</span><span class=lnt id=hl-0-65><a class=lnlinks href=#hl-0-65>65</a>
</span><span class=lnt id=hl-0-66><a class=lnlinks href=#hl-0-66>66</a>
</span><span class=lnt id=hl-0-67><a class=lnlinks href=#hl-0-67>67</a>
</span><span class=lnt id=hl-0-68><a class=lnlinks href=#hl-0-68>68</a>
</span><span class=lnt id=hl-0-69><a class=lnlinks href=#hl-0-69>69</a>
</span><span class=lnt id=hl-0-70><a class=lnlinks href=#hl-0-70>70</a>
</span><span class=lnt id=hl-0-71><a class=lnlinks href=#hl-0-71>71</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// JWT 인증 구현 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>jwt</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;jsonwebtoken&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// JWT 비밀키 (실제 환경에서는 환경 변수로 관리)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>JWT_SECRET</span> <span class=o>=</span> <span class=s1>&#39;your_jwt_secret&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=nx>json</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 로그인 라우트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/login&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 사용자 인증 로직 (데이터베이스 조회 등)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>username</span><span class=p>,</span> <span class=nx>password</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>body</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 간단한 사용자 확인 예시 (실제로는 DB에서 확인)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>if</span> <span class=p>(</span><span class=nx>username</span> <span class=o>===</span> <span class=s1>&#39;admin&#39;</span> <span class=o>&amp;&amp;</span> <span class=nx>password</span> <span class=o>===</span> <span class=s1>&#39;password&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 사용자 정보
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=nx>id</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=nx>username</span><span class=o>:</span> <span class=s1>&#39;admin&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=nx>role</span><span class=o>:</span> <span class=s1>&#39;admin&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// JWT 토큰 생성
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>jwt</span><span class=p>.</span><span class=nx>sign</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=nx>user</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>JWT_SECRET</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nx>expiresIn</span><span class=o>:</span> <span class=s1>&#39;1h&#39;</span> <span class=p>}</span> <span class=c1>// 토큰 만료 시간 설정
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 토큰 반환
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> <span class=nx>token</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>401</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;인증 실패&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// JWT 인증 미들웨어
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>authenticateToken</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Authorization 헤더에서 토큰 추출
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>authHeader</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>headers</span><span class=p>[</span><span class=s1>&#39;authorization&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>authHeader</span> <span class=o>&amp;&amp;</span> <span class=nx>authHeader</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39; &#39;</span><span class=p>)[</span><span class=mi>1</span><span class=p>];</span> <span class=c1>// &#34;Bearer TOKEN&#34; 형식
</span></span></span><span class=line><span class=cl><span class=c1></span>  
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>token</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>401</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;인증 토큰이 필요합니다&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 토큰 검증
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>jwt</span><span class=p>.</span><span class=nx>verify</span><span class=p>(</span><span class=nx>token</span><span class=p>,</span> <span class=nx>JWT_SECRET</span><span class=p>,</span> <span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>user</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>403</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;유효하지 않은 토큰입니다&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 사용자 정보를 요청 객체에 저장
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>req</span><span class=p>.</span><span class=nx>user</span> <span class=o>=</span> <span class=nx>user</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 보호된 라우트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/protected&#39;</span><span class=p>,</span> <span class=nx>authenticateToken</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> 
</span></span><span class=line><span class=cl>    <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;인증된 사용자입니다!&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=nx>user</span><span class=o>:</span> <span class=nx>req</span><span class=p>.</span><span class=nx>user</span> 
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>3000</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;서버가 3000번 포트에서 실행 중입니다&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=세션-기반-인증-구현-예시-nodejs>세션 기반 인증 구현 예시 (Node.js)<a hidden class=anchor aria-hidden=true href=#세션-기반-인증-구현-예시-nodejs>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14>14</a>
</span><span class=lnt id=hl-1-15><a class=lnlinks href=#hl-1-15>15</a>
</span><span class=lnt id=hl-1-16><a class=lnlinks href=#hl-1-16>16</a>
</span><span class=lnt id=hl-1-17><a class=lnlinks href=#hl-1-17>17</a>
</span><span class=lnt id=hl-1-18><a class=lnlinks href=#hl-1-18>18</a>
</span><span class=lnt id=hl-1-19><a class=lnlinks href=#hl-1-19>19</a>
</span><span class=lnt id=hl-1-20><a class=lnlinks href=#hl-1-20>20</a>
</span><span class=lnt id=hl-1-21><a class=lnlinks href=#hl-1-21>21</a>
</span><span class=lnt id=hl-1-22><a class=lnlinks href=#hl-1-22>22</a>
</span><span class=lnt id=hl-1-23><a class=lnlinks href=#hl-1-23>23</a>
</span><span class=lnt id=hl-1-24><a class=lnlinks href=#hl-1-24>24</a>
</span><span class=lnt id=hl-1-25><a class=lnlinks href=#hl-1-25>25</a>
</span><span class=lnt id=hl-1-26><a class=lnlinks href=#hl-1-26>26</a>
</span><span class=lnt id=hl-1-27><a class=lnlinks href=#hl-1-27>27</a>
</span><span class=lnt id=hl-1-28><a class=lnlinks href=#hl-1-28>28</a>
</span><span class=lnt id=hl-1-29><a class=lnlinks href=#hl-1-29>29</a>
</span><span class=lnt id=hl-1-30><a class=lnlinks href=#hl-1-30>30</a>
</span><span class=lnt id=hl-1-31><a class=lnlinks href=#hl-1-31>31</a>
</span><span class=lnt id=hl-1-32><a class=lnlinks href=#hl-1-32>32</a>
</span><span class=lnt id=hl-1-33><a class=lnlinks href=#hl-1-33>33</a>
</span><span class=lnt id=hl-1-34><a class=lnlinks href=#hl-1-34>34</a>
</span><span class=lnt id=hl-1-35><a class=lnlinks href=#hl-1-35>35</a>
</span><span class=lnt id=hl-1-36><a class=lnlinks href=#hl-1-36>36</a>
</span><span class=lnt id=hl-1-37><a class=lnlinks href=#hl-1-37>37</a>
</span><span class=lnt id=hl-1-38><a class=lnlinks href=#hl-1-38>38</a>
</span><span class=lnt id=hl-1-39><a class=lnlinks href=#hl-1-39>39</a>
</span><span class=lnt id=hl-1-40><a class=lnlinks href=#hl-1-40>40</a>
</span><span class=lnt id=hl-1-41><a class=lnlinks href=#hl-1-41>41</a>
</span><span class=lnt id=hl-1-42><a class=lnlinks href=#hl-1-42>42</a>
</span><span class=lnt id=hl-1-43><a class=lnlinks href=#hl-1-43>43</a>
</span><span class=lnt id=hl-1-44><a class=lnlinks href=#hl-1-44>44</a>
</span><span class=lnt id=hl-1-45><a class=lnlinks href=#hl-1-45>45</a>
</span><span class=lnt id=hl-1-46><a class=lnlinks href=#hl-1-46>46</a>
</span><span class=lnt id=hl-1-47><a class=lnlinks href=#hl-1-47>47</a>
</span><span class=lnt id=hl-1-48><a class=lnlinks href=#hl-1-48>48</a>
</span><span class=lnt id=hl-1-49><a class=lnlinks href=#hl-1-49>49</a>
</span><span class=lnt id=hl-1-50><a class=lnlinks href=#hl-1-50>50</a>
</span><span class=lnt id=hl-1-51><a class=lnlinks href=#hl-1-51>51</a>
</span><span class=lnt id=hl-1-52><a class=lnlinks href=#hl-1-52>52</a>
</span><span class=lnt id=hl-1-53><a class=lnlinks href=#hl-1-53>53</a>
</span><span class=lnt id=hl-1-54><a class=lnlinks href=#hl-1-54>54</a>
</span><span class=lnt id=hl-1-55><a class=lnlinks href=#hl-1-55>55</a>
</span><span class=lnt id=hl-1-56><a class=lnlinks href=#hl-1-56>56</a>
</span><span class=lnt id=hl-1-57><a class=lnlinks href=#hl-1-57>57</a>
</span><span class=lnt id=hl-1-58><a class=lnlinks href=#hl-1-58>58</a>
</span><span class=lnt id=hl-1-59><a class=lnlinks href=#hl-1-59>59</a>
</span><span class=lnt id=hl-1-60><a class=lnlinks href=#hl-1-60>60</a>
</span><span class=lnt id=hl-1-61><a class=lnlinks href=#hl-1-61>61</a>
</span><span class=lnt id=hl-1-62><a class=lnlinks href=#hl-1-62>62</a>
</span><span class=lnt id=hl-1-63><a class=lnlinks href=#hl-1-63>63</a>
</span><span class=lnt id=hl-1-64><a class=lnlinks href=#hl-1-64>64</a>
</span><span class=lnt id=hl-1-65><a class=lnlinks href=#hl-1-65>65</a>
</span><span class=lnt id=hl-1-66><a class=lnlinks href=#hl-1-66>66</a>
</span><span class=lnt id=hl-1-67><a class=lnlinks href=#hl-1-67>67</a>
</span><span class=lnt id=hl-1-68><a class=lnlinks href=#hl-1-68>68</a>
</span><span class=lnt id=hl-1-69><a class=lnlinks href=#hl-1-69>69</a>
</span><span class=lnt id=hl-1-70><a class=lnlinks href=#hl-1-70>70</a>
</span><span class=lnt id=hl-1-71><a class=lnlinks href=#hl-1-71>71</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 세션 기반 인증 구현 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>session</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express-session&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=nx>json</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 세션 미들웨어 설정
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>session</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>secret</span><span class=o>:</span> <span class=s1>&#39;your_session_secret&#39;</span><span class=p>,</span> <span class=c1>// 세션 암호화 키 (환경 변수로 관리)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>resave</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>saveUninitialized</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>cookie</span><span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=nx>secure</span><span class=o>:</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>NODE_ENV</span> <span class=o>===</span> <span class=s1>&#39;production&#39;</span><span class=p>,</span> <span class=c1>// HTTPS 환경에서만 쿠키 전송
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>httpOnly</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=c1>// JS에서 쿠키 접근 방지
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>maxAge</span><span class=o>:</span> <span class=mi>3600000</span> <span class=c1>// 쿠키 만료 시간 (1시간)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 로그인 라우트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/login&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 사용자 인증 로직 (데이터베이스 조회 등)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>username</span><span class=p>,</span> <span class=nx>password</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>body</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 간단한 사용자 확인 예시 (실제로는 DB에서 확인)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>if</span> <span class=p>(</span><span class=nx>username</span> <span class=o>===</span> <span class=s1>&#39;admin&#39;</span> <span class=o>&amp;&amp;</span> <span class=nx>password</span> <span class=o>===</span> <span class=s1>&#39;password&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 세션에 사용자 정보 저장
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>req</span><span class=p>.</span><span class=nx>session</span><span class=p>.</span><span class=nx>user</span> <span class=o>=</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=nx>id</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=nx>username</span><span class=o>:</span> <span class=s1>&#39;admin&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=nx>role</span><span class=o>:</span> <span class=s1>&#39;admin&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>loggedInAt</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;로그인 성공!&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>401</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;인증 실패&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 세션 인증 미들웨어
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>authenticate</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>req</span><span class=p>.</span><span class=nx>session</span><span class=p>.</span><span class=nx>user</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>401</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;인증이 필요합니다&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 보호된 라우트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/protected&#39;</span><span class=p>,</span> <span class=nx>authenticate</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> 
</span></span><span class=line><span class=cl>    <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;인증된 사용자입니다!&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=nx>user</span><span class=o>:</span> <span class=nx>req</span><span class=p>.</span><span class=nx>session</span><span class=p>.</span><span class=nx>user</span> 
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 로그아웃 라우트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/logout&#39;</span><span class=p>,</span> <span class=nx>authenticate</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 세션 삭제
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>req</span><span class=p>.</span><span class=nx>session</span><span class=p>.</span><span class=nx>destroy</span><span class=p>(</span><span class=nx>err</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>500</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;로그아웃 실패&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>clearCookie</span><span class=p>(</span><span class=s1>&#39;connect.sid&#39;</span><span class=p>);</span> <span class=c1>// 세션 쿠키 삭제
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;로그아웃 성공!&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>3000</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;서버가 3000번 포트에서 실행 중입니다&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=하이브리드-접근-방식>하이브리드 접근 방식<a hidden class=anchor aria-hidden=true href=#하이브리드-접근-방식>#</a></h3><p>최근에는 JWT와 세션 인증의 장점을 결합한 하이브리드 접근 방식도 사용된다:</p><ol><li><strong>JWT + 리프레시 토큰</strong>: 짧은 만료 시간의 JWT 액세스 토큰과 서버에 저장하는 리프레시 토큰을 함께 사용하여 보안과 편의성을 균형 있게 유지한다.</li><li><strong>JWT를 세션 저장소와 함께 사용</strong>: JWT 토큰을 발급하면서도 서버 측 세션 저장소에 토큰의 유효성을 관리하여 필요시 즉시 무효화할 수 있게 한다.</li><li><strong>세션 클러스터링</strong>: 여러 서버 간에 세션을 공유하기 위해 Redis와 같은 인메모리 데이터 저장소를 사용하여 확장성 문제를 해결한다.</li></ol><h3 id=jwt-vs-session-based-auth-1>Jwt vs. Session-based Auth<a hidden class=anchor aria-hidden=true href=#jwt-vs-session-based-auth-1>#</a></h3><table><thead><tr><th>특성</th><th>JWT</th><th>세션 기반 인증</th></tr></thead><tbody><tr><td>상태 관리</td><td>Stateless (상태 비저장)</td><td>Stateful (상태 저장)</td></tr><tr><td>데이터 저장 위치</td><td>클라이언트 측</td><td>서버 측</td></tr><tr><td>확장성</td><td>높음 (서버 간 공유 필요 없음)</td><td>낮음 (세션 클러스터링 필요)</td></tr><tr><td>서버 부하</td><td>낮음</td><td>높음</td></tr><tr><td>메모리 사용</td><td>클라이언트: 높음, 서버: 낮음</td><td>클라이언트: 낮음, 서버: 높음</td></tr><tr><td>보안 (정보 저장)</td><td>중간 (정보가 클라이언트에 저장)</td><td>높음 (정보가 서버에만 저장)</td></tr><tr><td>토큰/세션 크기</td><td>클 수 있음 (포함된 데이터에 따라)</td><td>작음 (세션 ID만)</td></tr><tr><td>세션 무효화</td><td>어려움 (별도 메커니즘 필요)</td><td>쉬움 (서버에서 즉시 가능)</td></tr><tr><td>CSRF 취약성</td><td>낮음 (Authorization 헤더 사용 시)</td><td>높음 (별도 보호 필요)</td></tr><tr><td>XSS 취약성</td><td>높음 (토큰 탈취 위험)</td><td>중간 (HttpOnly 쿠키 사용 시)</td></tr><tr><td>구현 복잡성</td><td>중간</td><td>낮음 (프레임워크 지원)</td></tr><tr><td>서드파티 지원</td><td>우수함 (광범위한 라이브러리)</td><td>우수함 (표준 메커니즘)</td></tr><tr><td>모바일/API 호환성</td><td>우수함</td><td>제한적</td></tr><tr><td>만료 처리</td><td>자체 포함 (exp 클레임)</td><td>서버에서 관리</td></tr><tr><td>요청 오버헤드</td><td>높음 (큰 토큰 전송)</td><td>낮음 (작은 세션 ID만 전송)</td></tr><tr><td>사용자 정보 업데이트</td><td>어려움 (새 토큰 발급 필요)</td><td>쉬움 (세션 데이터만 업데이트)</td></tr><tr><td>적합한 아키텍처</td><td>마이크로서비스, 분산 시스템</td><td>모놀리식, 단일 서버 환경</td></tr><tr><td>백엔드 자유도</td><td>높음 (다양한 언어/프레임워크)</td><td>중간 (세션 저장소 필요)</td></tr><tr><td>인증 방식</td><td>토큰 기반</td><td>쿠키 기반</td></tr><tr><td>로그아웃 처리</td><td>복잡함 (클라이언트에서 삭제, 블랙리스트 관리)</td><td>간단함 (서버에서 세션 삭제)</td></tr><tr><td>확장 기능</td><td>제한적</td><td>다양함 (세션 데이터 동적 관리)</td></tr><tr><td>동시 접속 제어</td><td>어려움</td><td>쉬움</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/backend-development/>Backend-Development</a></li><li><a href=https://buenhyden.github.io/tags/api-design/>API-Design</a></li><li><a href=https://buenhyden.github.io/tags/authentication-methods/>Authentication-Methods</a></li><li><a href=https://buenhyden.github.io/tags/jwt/>JWT</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/security-engineering/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-cookie-based-auth/><span class=title>« Prev</span><br><span>jwt vs. Cookie-Based Auth</span>
</a><a class=next href=https://buenhyden.github.io/posts/security-engineering/access-control/authentication/implementations/token-based-authentication/token-based-authentication-vs-session-based-auth/><span class=title>Next »</span><br><span>Token Authentication vs. Session-based Auth</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>