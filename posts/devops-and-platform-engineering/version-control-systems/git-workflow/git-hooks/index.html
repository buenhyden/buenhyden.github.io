<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Git Hooks | hyunyoun's Blog</title><meta name=keywords content="DevOps-and-Infrastructure,Version-Control-Systems,Git-Workflow"><meta name=description content="Git Hooks 는 Git 워크플로우의 특정 이벤트가 발생할 때 자동으로 실행되는 사용자 정의 스크립트로, 개발 프로세스 자동화와 코드 품질 향상에 역할을 한다. 클라이언트 측 (pre-commit, commit-msg, pre-push 등) 과 서버 측 (pre-receive, update, post-receive 등) 훅으로 나뉘며, 코드 린팅, 테스트 자동화, 커밋 메시지 표준화, 보안 검사, 배포 자동화 등 다양한 용도로 활용된다. 최근에는 AI 기반 코드 검증, GitOps 통합, 클라우드 네이티브 환경 지원 등으로 발전하고 있으며, Husky 와 pre-commit 같은 관리 도구를 통해 팀 전체에서 일관된 훅 설정을 공유할 수 있다. Git Hooks 는 개발 생산성 향상, 코드 품질 보장, 오류 감소, 워크플로우 표준화의 장점이 있지만, 초기 설정 복잡성, 팀 공유의 어려움, 유지보수 부담 등의 단점도 존재한다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/devops-and-platform-engineering/version-control-systems/git-workflow/git-hooks/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/devops-and-platform-engineering/version-control-systems/git-workflow/git-hooks/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/devops-and-platform-engineering/version-control-systems/git-workflow/git-hooks/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Git Hooks"><meta property="og:description" content="Git Hooks 는 Git 워크플로우의 특정 이벤트가 발생할 때 자동으로 실행되는 사용자 정의 스크립트로, 개발 프로세스 자동화와 코드 품질 향상에 역할을 한다. 클라이언트 측 (pre-commit, commit-msg, pre-push 등) 과 서버 측 (pre-receive, update, post-receive 등) 훅으로 나뉘며, 코드 린팅, 테스트 자동화, 커밋 메시지 표준화, 보안 검사, 배포 자동화 등 다양한 용도로 활용된다. 최근에는 AI 기반 코드 검증, GitOps 통합, 클라우드 네이티브 환경 지원 등으로 발전하고 있으며, Husky 와 pre-commit 같은 관리 도구를 통해 팀 전체에서 일관된 훅 설정을 공유할 수 있다. Git Hooks 는 개발 생산성 향상, 코드 품질 보장, 오류 감소, 워크플로우 표준화의 장점이 있지만, 초기 설정 복잡성, 팀 공유의 어려움, 유지보수 부담 등의 단점도 존재한다."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-10-28T12:38:00+00:00"><meta property="article:modified_time" content="2024-10-28T12:38:00+00:00"><meta property="article:tag" content="DevOps-and-Infrastructure"><meta property="article:tag" content="Version-Control-Systems"><meta property="article:tag" content="Git-Workflow"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Git Hooks"><meta name=twitter:description content="Git Hooks 는 Git 워크플로우의 특정 이벤트가 발생할 때 자동으로 실행되는 사용자 정의 스크립트로, 개발 프로세스 자동화와 코드 품질 향상에 역할을 한다. 클라이언트 측 (pre-commit, commit-msg, pre-push 등) 과 서버 측 (pre-receive, update, post-receive 등) 훅으로 나뉘며, 코드 린팅, 테스트 자동화, 커밋 메시지 표준화, 보안 검사, 배포 자동화 등 다양한 용도로 활용된다. 최근에는 AI 기반 코드 검증, GitOps 통합, 클라우드 네이티브 환경 지원 등으로 발전하고 있으며, Husky 와 pre-commit 같은 관리 도구를 통해 팀 전체에서 일관된 훅 설정을 공유할 수 있다. Git Hooks 는 개발 생산성 향상, 코드 품질 보장, 오류 감소, 워크플로우 표준화의 장점이 있지만, 초기 설정 복잡성, 팀 공유의 어려움, 유지보수 부담 등의 단점도 존재한다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Computer Science and Engineering","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"DevOps and Infrastructure","item":"https://buenhyden.github.io/posts/devops-and-platform-engineering/"},{"@type":"ListItem","position":3,"name":"Version Control Systems","item":"https://buenhyden.github.io/posts/devops-and-platform-engineering/version-control-systems/"},{"@type":"ListItem","position":4,"name":"Git Workflow","item":"https://buenhyden.github.io/posts/devops-and-platform-engineering/version-control-systems/git-workflow/"},{"@type":"ListItem","position":5,"name":"Git Hooks","item":"https://buenhyden.github.io/posts/devops-and-platform-engineering/version-control-systems/git-workflow/git-hooks/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Git Hooks","name":"Git Hooks","description":"Git Hooks 는 Git 워크플로우의 특정 이벤트가 발생할 때 자동으로 실행되는 사용자 정의 스크립트로, 개발 프로세스 자동화와 코드 품질 향상에 역할을 한다. 클라이언트 측 (pre-commit, commit-msg, pre-push 등) 과 서버 측 (pre-receive, update, post-receive 등) 훅으로 나뉘며, 코드 린팅, 테스트 자동화, 커밋 메시지 표준화, 보안 검사, 배포 자동화 등 다양한 용도로 활용된다. 최근에는 AI 기반 코드 검증, GitOps 통합, 클라우드 네이티브 환경 지원 등으로 발전하고 있으며, Husky 와 pre-commit 같은 관리 도구를 통해 팀 전체에서 일관된 훅 설정을 공유할 수 있다. Git Hooks 는 개발 생산성 향상, 코드 품질 보장, 오류 감소, 워크플로우 표준화의 장점이 있지만, 초기 설정 복잡성, 팀 공유의 어려움, 유지보수 부담 등의 단점도 존재한다.","keywords":["DevOps-and-Infrastructure","Version-Control-Systems","Git-Workflow"],"articleBody":"Git Hooks Git Hooks 는 Git 워크플로우의 특정 이벤트 (커밋, 푸시 등) 가 발생할 때 자동으로 실행되는 사용자 정의 스크립트이다. 이 스크립트들은 소스 코드 관리, 품질 보증, 배포 자동화 등 다양한 목적으로 활용된다. Git Hooks 는 클라이언트 측과 서버 측으로 나뉘며, 로컬 개발 환경에서의 코드 검증부터 원격 저장소에서의 배포 자동화까지 광범위한 워크플로우를 지원한다. 이를 통해 개발자들은 코딩 표준 준수, 테스트 자동화, 지속적 통합/배포 등을 효율적으로 구현할 수 있다.\n핵심 개념 Git Hooks 는 Git 작업 이벤트 트리거에 반응하는 자동화 스크립트이다. .git/hooks 디렉토리에 위치하며, 실행 가능한 권한이 부여된 스크립트 파일 형태로 존재한다. 이벤트는 커밋 생성, 브랜치 전환, 원격 저장소로의 푸시 등 Git 워크플로우의 다양한 시점에서 발생할 수 있으며 사전/사후 작업을 실행한다.\n1 2 3 # 예시: pre-commit 훅 #!/bin/sh npm run lint # 커밋 전 린트 실행 목적 Git Hooks 의 주요 목적은 다음과 같다:\n개발 워크플로우 자동화 코드 품질 및 일관성 유지 테스트 자동화 배포 프로세스 간소화 팀 협업 효율성 증대 보안 취약점 검사 자동화 필요성 Git Hooks 는 다음과 같은 이유로 필요하다:\n인적 오류 감소 - 수동 검사를 자동화하여 실수 방지 일관된 코드 품질 보장 - 모든 코드 변경에 동일한 검증 적용 개발 속도 향상 - 반복적인 작업 자동화 팀 표준 강제화 - 모든 팀원이 동일한 규칙 준수 배포 위험 감소 - 검증되지 않은 코드의 배포 방지 주요 기능 Git Hooks 의 주요 기능은 다음과 같다:\n코드 스타일 검사 (linting) 자동 테스트 실행 커밋 메시지 형식 검증 브랜치 명명 규칙 강제 금지된 파일 형식 차단 배포 자동화 외부 시스템 통합 (CI/CD, 이슈 트래커 등) 역할 Git Hooks 는 개발 프로세스에서 다음과 같은 역할을 수행한다:\n게이트키퍼 - 품질 기준을 충족하지 않는 코드의 저장소 진입 차단 자동화 도구 - 반복적인 작업 자동 실행 통합 지점 - 외부 시스템과 Git 워크플로우 연결 정책 시행자 - 팀의 코딩 표준 및 관행 강제화 알림 시스템 - 중요 이벤트 발생시 팀원에게 통지 특징 Git Hooks 의 주요 특징은 다음과 같다:\n사용자 정의 가능성 - 어떤 프로그래밍 언어로도 작성 가능 이식성 - 모든 Git 저장소에서 작동 유연성 - 다양한 워크플로우 단계에서 실행 가능 확장성 - 외부 도구와 쉽게 통합 선택적 사용 - 필요한 훅만 활성화 가능 로컬 및 서버 측 지원 - 개발자 워크스테이션과 원격 저장소 모두에서 사용 가능 핵심 원칙 Git Hooks 사용의 핵심 원칙은 다음과 같다:\n\" 코드에 문제가 있다면 일찍 찾아내라 “ - 문제가 확산되기 전에 조기 발견 자동화 우선 - 수동 과정보다 자동화된 프로세스 선호 실패는 빠르게 - 문제가 있다면 프로세스 초기에 실패하도록 설계 일관성 유지 - 모든 개발자가 동일한 검증 과정 통과 적절한 피드백 - 문제 발생 시 명확한 오류 메시지 제공 작동 원리 이벤트 기반 실행: Git 의 특정 이벤트 발생 시 해당하는 Hook 스크립트가 자동으로 실행된다. 스크립트 실행 흐름: 예를 들어, pre-commit Hook 은 git commit 명령 실행 시 커밋이 완료되기 전에 실행된다. 실행 결과에 따른 동작 제어: Hook 스크립트의 종료 상태에 따라 Git 명령의 실행 여부가 결정된다. 작동 원리 다이어그램 flowchart TD A[Git 이벤트 발생] --\u003e B{해당 훅 스크립트 존재?} B -- 예 --\u003e C[스크립트 실행] C --\u003e D{성공?} D -- 예 --\u003e E[다음 단계 진행] D -- 아니오 --\u003e F[작업 중단] B -- 아니오 --\u003e E 구성 요소 및 아키텍처 Git Hooks 의 구성 요소 및 아키텍처는 다음과 같다:\n구성 요소 설명 역할 기능 예시 훅 스크립트 파일 .git/hooks 디렉토리에 위치한 실행 파일 Git 이벤트 발생 시 자동 실행 코드 검증, 테스트 실행, 메시지 형식 검사 등 Git 저장소 .git 디렉토리를 포함한 프로젝트 폴더 훅 설정 및 실행 환경 제공 버전 관리, 이벤트 트리거링 클라이언트 측 훅 로컬 환경에서 실행되는 훅 개발 중 코드 품질 사전 검증 커밋 전 검사, 메시지 포맷팅, 푸시 전 테스트 등 pre-commit, commit-msg, pre-push 서버 측 훅 원격 저장소 (Git 서버) 에서 실행되는 훅 조직 정책 강제 및 배포 연계 푸시 수신 검증, 브랜치 보호, 자동 배포 등 pre-receive, update, post-receive 훅 관리 도구 Husky, pre-commit, Lefthook 등 팀 단위에서의 훅 일관성 유지 훅 공유, 설정 자동화, 실행 환경 표준화 장점과 단점 구분 항목 설명 ✅ 장점 자동화 반복 작업 자동 처리, 생산성 향상 표준화 팀 규칙 강제, 코드 품질 일관성 유지 코드 품질 향상 일관된 코드 스타일과 표준을 강제하여 품질 향상 오류 감소 커밋이나 푸시 전에 문제를 감지하여 버그 유입 방지 CI/CD 파이프라인 강화 지속적 통합 및 배포 프로세스를 보완하고 강화 유연성 어떤 프로그래밍 언어로도 작성 가능하며 다양한 용도로 활용 ⚠ 단점 공유 어려움 .git/hooks 는 기본적으로 버전 관리 미지원 보안 위험 악성 스크립트 실행 가능성 과도한 제약 가능성 너무 엄격한 훅은 개발 생산성을 저하시킬 수 있음 유지보수 부담 시간이 지남에 따라 훅 스크립트 자체의 유지보수가 필요 디버깅 어려움 훅 실패 시 원인 파악이 복잡할 수 있음 성능 영향 복잡한 훅은 Git 작업 속도를 현저히 저하시킬 수 있음 클라이언트 vs. 서버 훅 비교 구분 클라이언트 훅 서버 훅 실행 위치 로컬 저장소 원격 저장소 서버 주요 이벤트 커밋, 머지, 푸시 전 푸시 수신 후 목적 개인 작업 표준화 팀 정책 강제 분류에 따른 종류 및 유형 분류 훅 이름 설명 실행 시점 클라이언트 측 pre-commit 커밋 생성 전 실행 git commit 명령 후, 커밋 메시지 입력 전 prepare-commit-msg 커밋 메시지 템플릿 준비 커밋 메시지 편집기 실행 전 commit-msg 커밋 메시지 검증 커밋 메시지 작성 후, 커밋 완료 전 post-commit 커밋 완료 후 알림 커밋 완료 직후 pre-rebase 리베이스 작업 전 검증 git rebase 명령 실행 전 post-rewrite 커밋 수정 명령 후 실행 git commit --amend 또는 git rebase 이후 pre-push 원격 저장소 푸시 전 검증 git push 실행 전, 원격 참조 업데이트 전 post-checkout 체크아웃 후 작업 환경 설정 git checkout 또는 git switch 이후 post-merge 병합 후 작업 환경 설정 git merge 완료 후 pre-auto-gc 가비지 컬렉션 전 검증 git gc --auto 실행 전 fsmonitor-watchman 파일 시스템 모니터링 설정 git status 와 같은 명령 성능 향상에 사용 서버 측 pre-receive 푸시 데이터 수신 전 검증 푸시 데이터를 수신하기 전, 모든 참조에 대해 한 번 update 개별 참조 업데이트 검증 업데이트되는 각 참조 (브랜치나 태그) 에 대해 실행 post-receive 모든 참조 업데이트 후 실행 푸시 프로세스 완료 후 한 번 실행 post-update 참조 업데이트 후 알림 업데이트된 모든 참조에 대해 한 번 실행 reference-transaction 참조 업데이트 트랜잭션 처리 참조가 변경될 때마다 실행 pre-auto-gc 자동 가비지 컬렉션 전 검증 서버의 git gc --auto 실행 전 이메일 워크플로우 applypatch-msg 패치 적용 메시지 검증 git am 실행 시 pre-applypatch 패치 적용 전 검증 패치 적용 후, 커밋 생성 전 post-applypatch 패치 적용 후 알림 git am 완료 후 실무 적용 예시 적용 사례 사용 훅 설명 이점 코드 스타일 검사 pre-commit ESLint, Prettier 등을 사용해 코드 스타일 검사 일관된 코드 스타일 유지, 리뷰 부담 감소 테스트 자동화 pre-push 유닛 테스트, 통합 테스트 자동 실행 테스트 실패한 코드의 저장소 반영 방지 커밋 메시지 표준화 commit-msg 커밋 메시지가 정해진 형식 (예: 컨벤셔널 커밋) 을 따르는지 검사 변경 이력 가독성 향상, 자동 버전 관리 지원 보안 취약점 검사 pre-commit, pre-push 의존성 패키지의 보안 취약점 검사 보안 위험 조기 감지 자동 배포 post-receive CI/CD 파이프라인 트리거, 서버 환경 자동 업데이트 배포 프로세스 간소화 이슈 트래커 연동 prepare-commit-msg 브랜치 이름에서 이슈 번호를 추출하여 커밋 메시지에 자동 추가 코드와 이슈 추적 시스템 연계 강화 문서 자동 생성 post-commit, post-receive API 문서, CHANGELOG 등 자동 업데이트 문서의 최신 상태 유지 데이터베이스 마이그레이션 post-checkout, post-merge 브랜치 전환 또는 병합 후 자동으로 DB 스키마 업데이트 개발 환경 일관성 유지 환경 변수 검증 pre-commit 민감한 정보 (API 키, 비밀번호 등) 가 커밋되지 않도록 방지 보안 강화, 민감 정보 유출 방지 성능 테스트 pre-push 주요 기능의 성능 회귀 테스트 자동 실행 성능 저하 조기 탐지 샘플 Git Hook 스크립트 (pre-commit 예시) 1 2 3 4 5 6 7 8 9 10 11 12 #!/bin/sh # .git/hooks/pre-commit echo \"🔍 Running lint check before commit...\" npx eslint . --ext .js,.jsx,.ts,.tsx if [ $? -ne 0 ]; then echo \"❌ Lint errors detected. Commit aborted.\" exit 1 fi echo \"✅ Lint passed. Proceeding with commit.\" 실행 전 반드시 chmod +x.git/hooks/pre-commit 로 실행 권한 부여 필요.\nPre-commit 프레임워크 구성 예시 (Python 기반) 다양한 언어로 작성된 Git hook 을 관리할 수 있는 프레임워크로, Python 프로젝트에서 특히 널리 사용된다.\n특징:\nYAML 기반 설정파일을 통해 hook 도구 선언 가능 .pre-commit-config.yaml 파일을 통해 hook 을 선언하고 관리한다. 로컬에 설치하면.git/hooks 에 자동으로 훅 스크립트를 심어줌 다양한 언어의 hook 을 지원하며, 자동으로 필요한 환경을 설정한다. 커밋 전에 코드 포매팅, 린팅, 보안 검사 등을 자동으로 수행할 수 있다. Pre Commit 공식문서 이나 커뮤니티 hook 목록(Github) 에 수많은 검증된 툴 (black, isort, flake8, ruff, detect-secrets 등) 이 있음 장점\nPython 생태계와 연동이 용이 다양한 언어 지원 (외부 툴도 사용 가능) 개별 개발환경 간 일관성 유지 CI 에서 동일하게 적용 가능 설정 예시\n.pre-commit-config.yaml 구성\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 repos: - repo: https://github.com/pre-commit/pre-commit-hooks rev: v4.6.0 hooks: - id: detect-private-key stages: [pre-push] # push 시에만 실행 - repo: https://github.com/pre-commit/pre-commit-hooks rev: v4.5.0 hooks: - id: trailing-whitespace # 줄 끝 공백 제거 - id: end-of-file-fixer # 파일 끝 개행 문자 추가 - id: check-yaml # YAML 문법 검사 - repo: https://github.com/psf/black rev: 24.1.1 hooks: - id: black language_version: python3.11 args: [\"--line-length=88\"] # 최대 줄 길이 설정 - repo: https://github.com/pycqa/isort rev: 5.13.2 hooks: - id: isort # import 정렬 - repo: https://github.com/pycqa/flake8 rev: 7.0.0 hooks: - id: flake8 # 코드 스타일 검사 설치 및 사용\n1 2 3 pip install pre-commit pre-commit install # Git hook 설치 pre-commit run --all-files # 전체 파일에 대해 hook 실행 이 방식은 팀 내에서 hook 구성 공유를 YAML 로 하고, 자동 배포까지 가능하다는 장점이 있다.\nHusky 연동 예제 (Node.js 기반) JavaScript/Node.js 프로젝트에서 Git hook 을 쉽게 설정하고 관리할 수 있는 도구이다.\n특징\nnpm 스크립트 연동이 매우 편리함 (예: lint, test, build 등) .husky/ 폴더 내에 각 hook 스크립트 파일을 만들고 관리 프론트엔드, 풀스택, Node.js 프로젝트에서 사실상 표준 package.json 과 연동되어 설정이 간편 장점\nNode.js 와 완벽 연동, npm 생태계 친화적 다양한 hook 지원 (pre-commit, pre-push 등) monorepo 환경에 강함 설정 예시\n1 2 3 4 5 6 7 8 # 1. Husky 설치 npm install husky --save-dev # 2. Husky 초기화(필수) npx husky install # 3. (선택) install 후 자동 실행하게 하려면 package.json에 추가: npm set-script prepare \"husky install\" 위에서 \"prepare\" 스크립트는 clone 후에도 자동으로 hook 이 설치되도록 보장한다.\n모든 팀원이 husky hook 을 자동 설치하려면 package.json 의 \"prepare\": \"husky install\" 을 빼먹지 말아야 한다.\n전체적인 디렉터리 구조 예시\n1 2 3 4 5 6 프로젝트/ ├─ .husky/ │ ├─ pre-commit │ └─ pre-push ├─ package.json └─ … Git hook 등록 방법\n명령어로 자동 추가\n예를 들어, pre-commit hook 을 추가하려면:\n1 npx husky add .husky/pre-commit \"npm run lint\" .husky/pre-commit 파일이 생성되고, 커밋 전에 npm run lint 가 실행됩니다. pre-push 훅 추가 예시:\n1 npx husky add .husky/pre-push \"npm test\" 직접 스크립트 편집\n.husky/pre-commit 등 해당 파일에 직접 shell 명령을 추가할 수도 있다.\n예시:\n1 2 3 4 5 #!/bin/sh . \"$(dirname \"$0\")/_/husky.sh\" npm run lint npx prettier --check . 첫 두 줄은 husky 내부 환경설정을 위한 부분이니 반드시 포함! package.json 과의 연동\n보통 아래처럼 lint, test 등 스크립트를 미리 등록해두고, Husky 에서는 이 스크립트를 호출하는 것이 일반적이다.\n1 2 3 4 5 6 7 // package.json 예시 { \"scripts\": { \"lint\": \"eslint .\", \"test\": \"jest\" } } Husky 와 Lint-staged 연동\nlint-staged를 함께 쓰면, 변경된 파일 (커밋 대상) 만 lint/포맷팅 가능 설치 및 예시: 1 npm install lint-staged --save-dev 1 2 3 4 5 6 7 8 // package.json \"lint-staged\": { \"*.js\": \"eslint --fix\", \"*.ts\": \"eslint --fix\" }, \"scripts\": { \"lint\": \"lint-staged\" } 1 npx husky add .husky/pre-commit \"npx lint-staged\" Lefthook 연동 예제 (언어 독립형) Go 언어로 작성된 빠르고 강력한 Git hook 관리 도구로, 다양한 언어의 프로젝트에서 사용할 수 있다.\n특징:\n여러 언어, 여러 환경, 여러 플랫폼 지원 (monorepo 에 최적) .lefthook.yml 로 hook 스크립트 정의 (YAML 기반) 병렬 실행을 지원하여 대규모 프로젝트에서도 빠른 속도를 제공한다. 단일 바이너리로 작동하며, 의존성이 없다. 로컬 및 글로벌 설정을 분리하여 관리할 수 있다. 장점\n대용량/대규모 레포에 적합 언어 제한 없음 (Node, Python, Ruby … 전부 가능) 빠르고, CI/CD 통합이 용이 설정 예시\n1 2 3 4 5 6 7 8 pre-commit: parallel: true # 병렬 실행 commands: lint: glob: \"*.js\" run: npm run lint test: run: npm test 설치 및 사용\n1 2 npm install lefthook --save-dev npx lefthook install Git-secrets 연동 예제 (AWS 키 및 민감정보 방지) AWS 에서 개발한 도구로, Git 커밋에 민감한 정보 (예: AWS 키, 비밀번호 등) 가 포함되지 않도록 방지한다.\n복잡한 lint 나 포매팅, 테스트 등은 불가 (시크릿 검출에만 특화) 하다.\n특징:\n정규 표현식을 사용하여 민감한 정보를 검사한다. 커밋, 커밋 메시지, 병합 기록 등을 스캔한다. 사용자 정의 패턴을 추가하여 조직에 맞게 설정할 수 있다. pre-commit, pre-push 등 Git hook 에 쉽게 연동 pre-commit 프레임워크와도 연동할 수 있음 장점\n실수로 시크릿 (비밀번호, 토큰, AWS 키 등) 커밋 방지 설치 쉽고, 단일기능에 충실 설정\n패턴 정보는 .git/secrets 폴더에 저장 patterns, allowed, excluded-patterns 파일로 구분하여 직접 편집도 가능 Git 의 템플릿 디렉토리 기능을 이용하면, 신규 저장소 생성 시마다 자동으로 git-secrets 의 훅이 적용된 상태로 시작할 수 있다. 템플릿 디렉토리 준비\n1 2 3 4 5 6 7 # 임의의 경로에 템플릿 디렉토리 준비 mkdir -p ~/git-templates/hooks # 해당 디렉토리에 git-secrets 훅 적용 cd ~/git-templates git secrets --install git secrets --register-aws 전역 템플릿 디렉토리로 등록\n1 git config --global init.templateDir '~/git-templates' 신규 저장소 생성 시 자동 적용\n이후 git init 으로 신규 저장소를 만들면 ~/git-templates/hooks 에 있던 훅들 (pre-commit, pre-push 등) 이 자동 복사\n설치\nHomebrew (macOS/Linux)\n1 brew install git-secrets Linux (직접 설치)\n1 2 3 git clone https://github.com/awslabs/git-secrets.git cd git-secrets sudo make install 위 명령으로 git-secrets 명령어가 등록된다. Windows\nWSL(리눅스 환경) 이나 Docker 에서 위 방식으로 설치 사용\n저장소에 git-secrets 적용\n프로젝트 루트에서 다음과 같이 실행한다.\n1 git secrets --install 이 명령은 .git/hooks/pre-commit, .git/hooks/commit-msg, .git/hooks/pre-push 등에\ngit-secrets 검사를 자동으로 넣어줍니다.\nAWS 키 등 탐지 패턴 추가\n기본 AWS 키 패턴 등록\n(필수 아님, 하지만 AWS 환경이라면 반드시 해주는 걸 추천!)\n1 git secrets --register-aws 커스텀 시크릿 패턴 등록\n1 git secrets --add 'my_super_secret_regex' 예)\n1 git secrets --add 'password\\s*=' 사용 방법\n커밋/푸시 시 자동으로 실행되어, 시크릿이 탐지되면 커밋 (푸시) 이 차단된다. 수동으로 모든 파일 검사도 가능 1 git secrets --scan 특정 파일 또는 경로 검사\n1 git secrets --scan -r some_folder/ CI/CD 에서 사용하기\nCI 파이프라인 (예: GitHub Actions, Jenkins 등) 에서 git secrets --scan 명령을 통한 자동화 검증 가능\n도구 비교 요약 도구 대표 환경 주 목적 장점 단점 pre-commit Python, 범용 코드 스타일, 포맷, 검증 등 파이썬 생태계와 강력한 연동, 다양한 플러그인 Node.js 환경에서는 다소 불편 Husky JavaScript 코드 스타일, 테스트 등 npm 스크립트와 강력한 통합, 쉽게 커스터마이즈 Node.js 외 언어에는 부적합 Lefthook Any-language 멀티플랫폼, 대규모, 병렬 빠름, 대규모/모노레포에 강함, 범용성 비교적 생소, 작은 규모엔 과함 git-secrets 범용 (Bash) 시크릿 (비밀번호 등) 검출 민감정보 유출 방지, 단일 목적에 충실 lint/format/test 등 기타 기능 없음 CI 환경 GitHub Actions 의 .github/workflows 디렉토리에서 Git Hooks 와 통합된 자동화 예제.\n목적\n로컬 개발자는 pre-commit Git Hook 으로 코드 스타일과 테스트를 체크 GitHub Actions 에서는 PR 이나 push 시 동일한 검사를 자동 수행 디렉토리 구조 예시\n1 2 3 4 5 . ├── .pre-commit-config.yaml └── .github └── workflows └── pre-commit.yml .pre-commit-config.yaml 예시\n1 2 3 4 5 6 7 8 9 10 repos: - repo: https://github.com/pre-commit/pre-commit-hooks rev: v4.5.0 hooks: - id: trailing-whitespace - id: end-of-file-fixer - repo: https://github.com/psf/black rev: 24.3.0 hooks: - id: black .github/workflows/pre-commit.yml 예시\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 name: pre-commit checks on: pull_request: push: branches: [main, develop] jobs: lint-and-format: name: Run pre-commit hooks runs-on: ubuntu-latest steps: - name: Checkout code uses: actions/checkout@v4 - name: Set up Python uses: actions/setup-python@v5 with: python-version: '3.11' - name: Install dependencies run: | python -m pip install --upgrade pip pip install pre-commit - name: Run pre-commit hooks run: pre-commit run --all-files 주요 구성 해설\n항목 설명 on push, pull_request 이벤트 발생 시 실행 runs-on GitHub 의 Ubuntu 러너 사용 setup-python Python 기반의 pre-commit 도구 환경 구성 pre-commit run --all-files 전체 파일 대상 Hook 실행 📌 실무 팁 항목 내용 공유 유지 .pre-commit-config.yaml 은 버전 관리되므로, 팀 전체에 공통 정책 적용 가능 재현성 확보 GitHub Actions 에서도 동일한 Hook 실행 → CI 와 로컬의 결과 불일치 최소화 병렬 실행 고려 복잡한 작업은 pre-commit 에서 parallel: true 설정 지원 활용 예시 및 다이어그램 1 2 3 4 5 6 [개발자 로컬] pre-commit → 린트/테스트 → 실패 시 커밋 차단 ↘ 성공 시 커밋 완료 → 원격 저장소 푸시 [서버] pre-receive → 코드 검증 → 승인 시 배포 파이프라인 실행 활용 예시: 린트 / 테스트 상황: 팀에서 코드 품질을 유지하기 위해 커밋 전 린트와 테스트를 자동 실행하고, 실패 시 커밋을 막고 싶다. sequenceDiagram participant 개발자 participant Git participant 훅 스크립트 개발자-\u003e\u003eGit: git commit 실행 Git-\u003e\u003e훅 스크립트: pre-commit 훅 실행 훅 스크립트-\u003e\u003eGit: 린트/테스트 결과 반환 alt 성공 Git-\u003e\u003e개발자: 커밋 성공 else 실패 Git-\u003e\u003e개발자: 커밋 차단, 오류 메시지 출력 end 활용 예시: 지속적 통합 파이프라인 구축 시나리오: 개발자가 새로운 기능을 개발하고 이를 팀의 저장소에 통합하는 과정\n개발자가 로컬에서 코드 작성 커밋 시도 → pre-commit 훅 실행 (코드 린팅, 포맷팅) 커밋 메시지 작성 → commit-msg 훅 실행 (커밋 메시지 형식 검증) 원격 저장소 푸시 시도 → pre-push 훅 실행 (단위 테스트 실행) 푸시 데이터 서버 도착 → pre-receive 훅 실행 (브랜치 권한 검사) 브랜치 업데이트 → update 훅 실행 (특정 파일 변경 검증) 모든 검증 완료 → post-receive 훅 실행 (CI 시스템 트리거) CI 시스템에서 통합 테스트, 보안 검사 실행 모든 검증 통과 시 자동 배포 진행 실무 활용 시나리오 코드 품질 관리 (Code Quality Management) 개발팀에서는 코드의 일관성과 품질을 유지하기 위해 코드 포맷팅, 린팅, 테스트 등을 자동화하고 싶다.\n이를 위해 pre-commit hook 을 사용하여 커밋 전에 코드 검사를 자동으로 수행한다.\nPre-commit 설정 예시 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 # .pre-commit-config.yaml repos: # 1. Black: 코드 포맷 자동화 (PEP8 기준으로 포맷팅) - repo: https://github.com/psf/black rev: 24.3.0 # 사용할 Black의 버전. 최신 버전 참고 hooks: - id: black language_version: python3.10 # 프로젝트에 맞는 파이썬 버전 선언 # 2. Flake8: 코드 스타일\u0026에러 정적분석 - repo: https://github.com/pycqa/flake8 rev: 7.0.0 # 사용할 Flake8의 버전 hooks: - id: flake8 additional_dependencies: [flake8-bugbear] # flake8 보완 플러그인 추가 # 3. isort: import문 정렬 - repo: https://github.com/pre-commit/mirrors-isort rev: v5.13.2 hooks: - id: isort # 4. debug-statements: print, pdb 등 디버깅 코드 커밋 방지 - repo: https://github.com/pre-commit/pre-commit-hooks rev: v4.6.0 hooks: - id: debug-statements # 5. detect-secrets: 시크릿(비밀번호, 토큰 등) 커밋 방지 - repo: https://github.com/Yelp/detect-secrets rev: v1.4.0 hooks: - id: detect-secrets # 추가 설정은 필요에 따라 detect-secrets 설정 파일 이용 # 6. check-yaml: yaml파일 문법 오류 검증 - repo: https://github.com/pre-commit/pre-commit-hooks rev: v4.6.0 hooks: - id: check-yaml # 7. end-of-file-fixer: 파일 끝에 빈 줄 삽입 보장 - repo: https://github.com/pre-commit/pre-commit-hooks rev: v4.6.0 hooks: - id: end-of-file-fixer 1 2 3 4 5 6 7 8 9 repos: - repo: https://github.com/charliermarsh/ruff-pre-commit rev: v0.4.4 # 사용하려는 Ruff 버전의 최신 태그로 맞추세요 hooks: - id: ruff args: [\".\"] # 현재 디렉토리 전체에 적용, 필요시 경로/옵션 조정 additional_dependencies: [] # 플러그인 쓸 땐 여기에 패키지 추가 - id: ruff-format args: [\".\"] # 코드 포매팅도 동시에 적용하려면 추가 커스텀 Python 스크립트 예시 (pre-commit hook) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 #!/usr/bin/env python3 # .git/hooks/pre-commit (chmod +x 필요) import subprocess import sys def main(): \"\"\"커밋 전에 코드 품질 검사를 수행합니다.\"\"\" print(\"코드 품질 검사를 시작합니다...\") # 변경된 Python 파일 찾기 result = subprocess.run( ['git', 'diff', '--cached', '--name-only', '--diff-filter=ACM', '*.py'], capture_output=True, text=True ) if not result.stdout: print(\"변경된 Python 파일이 없습니다.\") return 0 files = result.stdout.strip().split('\\n') print(f\"{len(files)}개의 Python 파일이 변경되었습니다.\") # Black으로 코드 포맷팅 검사 print(\"코드 포맷팅 검사 중...\") format_check = subprocess.run(['black', '--check'] + files, capture_output=True) if format_check.returncode != 0: print(\"코드 포맷팅 문제가 발견되었습니다. 자동으로 수정합니다...\") subprocess.run(['black'] + files) print(\"코드가 재포맷되었습니다. 변경사항을 다시 스테이징해주세요.\") return 1 # Flake8으로 린팅 print(\"린팅 검사 중...\") lint_result = subprocess.run(['flake8'] + files, capture_output=True, text=True) if lint_result.returncode != 0: print(\"린팅 문제가 발견되었습니다:\") print(lint_result.stdout) return 1 # 테스트 실행 print(\"단위 테스트 실행 중...\") test_result = subprocess.run(['pytest'], capture_output=True, text=True) if test_result.returncode != 0: print(\"테스트 실패:\") print(test_result.stdout) return 1 print(\"모든 검사가 통과되었습니다!\") return 0 if __name__ == \"__main__\": sys.exit(main()) 버전 관리 및 릴리스 자동화 개발팀은 버전 관리와 릴리스 프로세스를 자동화하기 위해 Git hook 을 사용한다. commit-msg hook 을 사용하여 커밋 메시지 형식을 검증하고, post-commit hook 을 사용하여 자동으로 버전 번호를 업데이트한다.\nPre-commit 설정 예시 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # .pre-commit-config.yaml repos: - repo: https://github.com/commitizen-tools/commitizen rev: v2.42.1 hooks: - id: commitizen stages: [commit-msg] - repo: local hooks: - id: version-bump name: version-bump entry: python scripts/version_bump.py language: python pass_filenames: false stages: [post-commit] always_run: true 커밋 메시지 검증 스크립트 (commit-msg hook) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #!/usr/bin/env python3 # scripts/validate_commit_message.py import re import sys def validate_commit_message(commit_msg_file): \"\"\" 커밋 메시지가 Conventional Commits 형식을 따르는지 검증합니다. 형식: (): 예: feat(user): 사용자 인증 기능 추가 \"\"\" with open(commit_msg_file, 'r') as f: commit_msg = f.read().strip() # Conventional Commits 패턴 pattern = r'^(feat|fix|docs|style|refactor|perf|test|chore|ci|build|revert)(\\([a-z0-9-]+\\))?: .+' if not re.match(pattern, commit_msg): print(\"오류: 커밋 메시지가 Conventional Commits 형식에 맞지 않습니다.\") print(\"예시: feat(user): 사용자 인증 기능 추가\") print(\"유효한 유형: feat, fix, docs, style, refactor, perf, test, chore, ci, build, revert\") return 1 return 0 if __name__ == \"__main__\": if len(sys.argv) \u003c 2: print(\"커밋 메시지 파일 경로를 지정해주세요.\") sys.exit(1) sys.exit(validate_commit_message(sys.argv[1])) 버전 업데이트 스크립트 (post-commit hook) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 #!/usr/bin/env python3 # scripts/version_bump.py import re import subprocess from pathlib import Path def get_last_commit_type(): \"\"\"마지막 커밋의 유형을 가져옵니다.\"\"\" result = subprocess.run( ['git', 'log', '-1', '--pretty=%B'], capture_output=True, text=True ) commit_msg = result.stdout.strip() # Conventional Commits 패턴에서 유형 추출 match = re.match(r'^(feat|fix|docs|style|refactor|perf|test|chore|ci|build|revert)', commit_msg) if match: return match.group(1) return None def update_version(): \"\"\"버전 파일을 업데이트합니다.\"\"\" version_file = Path('VERSION') if not version_file.exists(): version_file.write_text('0.1.0') print(\"버전 파일이 생성되었습니다: 0.1.0\") return # 현재 버전 읽기 current_version = version_file.read_text().strip() major, minor, patch = map(int, current_version.split('.')) # 커밋 유형에 따라 버전 업데이트 commit_type = get_last_commit_type() if commit_type == 'feat': minor += 1 patch = 0 elif commit_type in ('fix', 'perf'): patch += 1 else: # 다른 유형은 버전 변경 없음 return # 새 버전 쓰기 new_version = f\"{major}.{minor}.{patch}\" version_file.write_text(new_version) print(f\"버전이 업데이트되었습니다: {current_version} -\u003e {new_version}\") # 버전 변경사항 커밋 subprocess.run(['git', 'add', 'VERSION']) subprocess.run(['git', 'commit', '--amend', '--no-edit']) print(\"버전 변경사항이 커밋에 추가되었습니다.\") if __name__ == \"__main__\": update_version() 보안 점검 자동화 개발팀은 코드 보안을 강화하기 위해 pre-commit hook 을 사용하여 보안 취약점 검사, 비밀 정보 유출 방지, 의존성 취약점 검사 등을 자동화한다.\nPre-commit 설정 예시 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 # .pre-commit-config.yaml repos: - repo: https://github.com/pre-commit/pre-commit-hooks rev: v4.4.0 hooks: - id: detect-private-key - id: detect-aws-credentials - repo: https://github.com/Yelp/detect-secrets rev: v1.4.0 hooks: - id: detect-secrets - repo: https://github.com/PyCQA/bandit rev: 1.7.5 hooks: - id: bandit args: ['-r', '.'] - repo: local hooks: - id: dependency-check name: dependency-check entry: python scripts/check_dependencies.py language: python pass_filenames: false always_run: true 의존성 취약점 검사 스크립트 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 #!/usr/bin/env python3 # scripts/check_dependencies.py import json import subprocess import sys from pathlib import Path def check_dependencies(): \"\"\"프로젝트의 의존성 패키지에서 보안 취약점을 검사합니다.\"\"\" print(\"의존성 보안 취약점 검사 중...\") # requirements.txt 존재 확인 req_file = Path('requirements.txt') if not req_file.exists(): print(\"requirements.txt 파일이 존재하지 않습니다.\") return 0 # safety 패키지를 사용하여 의존성 취약점 검사 try: result = subprocess.run( ['safety', 'check', '-r', 'requirements.txt', '--json'], capture_output=True, text=True ) # 결과 파싱 if result.returncode != 0: try: vulnerabilities = json.loads(result.stdout) print(f\"{len(vulnerabilities)} 개의 취약점이 발견되었습니다:\") for vuln in vulnerabilities: package = vuln.get('package', 'Unknown') vuln_id = vuln.get('id', 'Unknown') spec = vuln.get('spec', 'Unknown') cve = vuln.get('cve', 'N/A') print(f\" - {package} ({spec}): {vuln_id} (CVE: {cve})\") print(f\" 대응 방안: {vuln.get('advisory', 'N/A')}\") print(\"\\n심각한 보안 취약점이 발견되었습니다. 의존성을 업데이트하세요.\") return 1 except json.JSONDecodeError: print(\"취약점 결과를 파싱할 수 없습니다.\") print(result.stdout) return 1 print(\"알려진 보안 취약점이 없습니다.\") return 0 except FileNotFoundError: print(\"safety 패키지가 설치되어 있지 않습니다. 설치하려면:\") print(\"pip install safety\") return 1 if __name__ == \"__main__\": sys.exit(check_dependencies()) 데이터베이스 스키마 관리 개발팀은 데이터베이스 스키마 변경사항을 관리하기 위해 pre-commit hook 을 사용하여 마이그레이션 파일 검증 및 데이터베이스 스키마 문서화를 자동화한다.\nPre-commit 설정 예시 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # .pre-commit-config.yaml repos: - repo: local hooks: - id: validate-migrations name: validate-migrations entry: python scripts/validate_migrations.py language: python files: 'migrations/.*\\.py$' pass_filenames: true - id: generate-db-docs name: generate-db-docs entry: python scripts/generate_db_docs.py language: python files: 'models/.*\\.py$' pass_filenames: false 마이그레이션 파일 검증 스크립트 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 #!/usr/bin/env python3 # scripts/validate_migrations.py import os import re import sys from pathlib import Path def validate_migrations(migration_files): \"\"\"마이그레이션 파일의 형식과 내용을 검증합니다.\"\"\" if not migration_files: print(\"검증할 마이그레이션 파일이 없습니다.\") return 0 errors = [] for file_path in migration_files: path = Path(file_path) if not path.exists(): errors.append(f\"파일을 찾을 수 없습니다: {file_path}\") continue # 파일 이름 검증 filename = path.name if not re.match(r'^\\d{4}_[a-z0-9_]+\\.py$', filename): errors.append(f\"마이그레이션 파일 이름이 규칙을 따르지 않습니다: {filename}\") # 파일 내용 검증 with open(path, 'r') as f: content = f.read() # 설명 문서 확인 if not re.search(r'\"\"\".*?\"\"\"', content, re.DOTALL): errors.append(f\"마이그레이션 설명 문서가 없습니다: {filename}\") # upgrade 및 downgrade 함수 확인 if not re.search(r'def upgrade\\(\\):', content): errors.append(f\"upgrade() 함수가 없습니다: {filename}\") if not re.search(r'def downgrade\\(\\):', content): errors.append(f\"downgrade() 함수가 없습니다: {filename}\") if errors: for error in errors: print(f\"오류: {error}\") return 1 print(\"모든 마이그레이션 파일이 유효합니다.\") return 0 if __name__ == \"__main__\": sys.exit(validate_migrations(sys.argv[1:])) 데이터베이스 스키마 문서화 스크립트 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 #!/usr/bin/env python3 # scripts/generate_db_docs.py import importlib import inspect import os import sys from pathlib import Path def generate_db_docs(): \"\"\"SQLAlchemy 모델을 기반으로 데이터베이스 스키마 문서를 생성합니다.\"\"\" print(\"데이터베이스 스키마 문서 생성 중...\") models_dir = Path('models') if not models_dir.exists() or not models_dir.is_dir(): print(\"models 디렉토리를 찾을 수 없습니다.\") return 1 # 모델 모듈 동적 임포트 sys.path.insert(0, str(Path.cwd())) model_classes = [] for py_file in models_dir.glob('*.py'): if py_file.name == '__init__.py': continue module_name = f\"models.{py_file.stem}\" try: module = importlib.import_module(module_name) # SQLAlchemy 모델 클래스 찾기 for name, obj in inspect.getmembers(module): if inspect.isclass(obj) and hasattr(obj, '__tablename__'): model_classes.append(obj) except ImportError as e: print(f\"모듈 임포트 오류: {module_name} - {e}\") if not model_classes: print(\"SQLAlchemy 모델 클래스를 찾을 수 없습니다.\") return 1 # 마크다운 문서 생성 docs_dir = Path('docs') docs_dir.mkdir(exist_ok=True) with open(docs_dir / 'database_schema.md', 'w') as f: f.write(\"# 데이터베이스 스키마 문서\\n\\n\") for model in sorted(model_classes, key=lambda m: m.__tablename__): f.write(f\"## {model.__name__}\\n\\n\") f.write(f\"**테이블 이름:** `{model.__tablename__}`\\n\\n\") if model.__doc__: f.write(f\"{model.__doc__.strip()}\\n\\n\") f.write(\"### 컬럼\\n\\n\") f.write(\"| 이름 | 타입 | 제약 조건 | 설명 |\\n\") f.write(\"|------|------|-----------|------|\\n\") for column_name, column in model.__table__.columns.items(): constraints = [] if column.primary_key: constraints.append(\"기본 키\") if not column.nullable: constraints.append(\"NOT NULL\") if column.unique: constraints.append(\"고유\") if column.foreign_keys: for fk in column.foreign_keys: constraints.append(f\"외래 키 ({fk.target_fullname})\") constraints_str = \", \".join(constraints) column_type = str(column.type) column_doc = getattr(column, 'doc', '') f.write(f\"| {column_name} | {column_type} | {constraints_str} | {column_doc} |\\n\") f.write(\"\\n\\n\") print(f\"데이터베이스 스키마 문서가 생성되었습니다: {docs_dir}/database_schema.md\") # 문서 변경사항 스테이징 os.system(f\"git add {docs_dir}/database_schema.md\") print(\"문서 변경사항이 스테이징되었습니다.\") return 0 if __name__ == \"__main__\": sys.exit(generate_db_docs()) CI/CD 파이프라인 통합 개발팀은 CI/CD 파이프라인과 Git 워크플로우를 통합하기 위해 Git hook 을 사용한다. post-push hook 을 사용하여 자동으로 CI/CD 파이프라인을 트리거하고, pre-push hook 을 사용하여 푸시 전에 빌드 검증을 수행한다.\nPre-commit 설정 예시 1 2 3 4 5 6 7 8 9 10 # .pre-commit-config.yaml repos: - repo: local hooks: - id: pre-push-build-check name: pre-push-build-check entry: python scripts/pre_push_build_check.py language: python pass_filenames: false stages: [push] 푸시 전 빌드 검증 스크립트 (pre-push hook) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 #!/usr/bin/env python3 # scripts/pre_push_build_check.py import os import subprocess import sys import time def pre_push_build_check(): \"\"\"푸시 전에 빌드 검증을 수행합니다.\"\"\" print(\"푸시 전 빌드 검증을 시작합니다...\") # 브랜치 확인 result = subprocess.run( ['git', 'rev-parse', '--abbrev-ref', 'HEAD'], capture_output=True, text=True ) current_branch = result.stdout.strip() # main/master 브랜치인 경우 추가 검증 if current_branch in ('main', 'master'): print(f\"{current_branch} 브랜치로 푸시합니다. 추가 검증을 수행합니다...\") # 모든 테스트 실행 print(\"전체 테스트 실행 중...\") test_result = subprocess.run(['pytest', '--cov=app'], capture_output=True, text=True) if test_result.returncode != 0: print(\"테스트 실패:\") print(test_result.stdout) return 1 # 커버리지 검사 coverage_output = test_result.stdout coverage_match = re.search(r'TOTAL\\s+\\d+\\s+\\d+\\s+(\\d+)%', coverage_output) if coverage_match: coverage = int(coverage_match.group(1)) if coverage \u003c 80: print(f\"코드 커버리지가 기준보다 낮습니다: {coverage}% (기준: 80%)\") return 1 print(f\"코드 커버리지: {coverage}%\") # 빌드 검증 print(\"빌드 검증 중...\") if os.path.exists('setup.py'): build_result = subprocess.run(['python', 'setup.py', 'sdist'], capture_output=True, text=True) if build_result.returncode != 0: print(\"빌드 실패:\") print(build_result.stderr) return 1 # 일반적인 검증 else: print(f\"{current_branch} 브랜치로 푸시합니다. 기본 검증을 수행합니다...\") # 필수 테스트 실행 print(\"기본 테스트 실행 중...\") test_result = subprocess.run(['pytest'], capture_output=True, text=True) if test_result.returncode != 0: print(\"테스트 실패:\") print(test_result.stdout) return 1 print(\"모든 검증이 통과되었습니다. 푸시를 진행합니다...\") return 0 if __name__ == \"__main__\": sys.exit(pre_push_build_check()) CI/CD 파이프라인 트리거 스크립트 (post-push hook) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 #!/usr/bin/env python3 # .git/hooks/post-push (chmod +x 필요) import os import subprocess import sys import time import requests def trigger_ci_pipeline(): \"\"\"Git push 후 CI 파이프라인을 트리거합니다.\"\"\" print(\"CI/CD 파이프라인 트리거 중...\") # 현재 브랜치와 커밋 정보 가져오기 branch = subprocess.run( ['git', 'rev-parse', '--abbrev-ref', 'HEAD'], capture_output=True, text=True ).stdout.strip() commit = subprocess.run( ['git', 'rev-parse', 'HEAD'], capture_output=True, text=True ).stdout.strip() # Jenkins CI 파이프라인 트리거 예시 jenkins_url = os.environ.get('JENKINS_URL', 'http://jenkins.example.com') jenkins_token = os.environ.get('JENKINS_TOKEN', '') if not jenkins_token: print(\"경고: JENKINS_TOKEN 환경 변수가 설정되지 않았습니다.\") return 1 pipeline_url = f\"{jenkins_url}/job/my-project/buildWithParameters\" try: response = requests.post( pipeline_url, params={ 'token': jenkins_token, 'BRANCH': branch, 'COMMIT': commit }, timeout=10 ) if response.status_code == 201: print(f\"CI 파이프라인이 트리거되었습니다. 브랜치: {branch}, 커밋: {commit[:8]}\") # 빌드 상태 모니터링 (선택 사항) print(\"빌드 상태 확인 중...\") time.sleep(5) # 빌드 시작 대기 for _ in range(5): # 최대 5번 확인 status_response = requests.get( f\"{jenkins_url}/job/my-project/lastBuild/api/json\", params={'token': jenkins_token}, timeout=10 ) if status_response.status_code == 200: build_data = status_response.json() build_number = build_data.get('number', 'Unknown') build_result = build_data.get('result') if build_result: print(f\"빌드 #{build_number} 결과: {build_result}\") print(f\"빌드 URL: {build_data.get('url', jenkins_url)}\") break else: print(f\"빌드 #{build_number} 실행 중...\") time.sleep(10) return 0 else: print(f\"CI 파이프라인 트리거 실패: {response.status_code} - {response.text}\") return 1 except Exception as e: print(f\"CI 파이프라인 트리거 중 오류 발생: {e}\") return 1 if __name__ == \"__main__\": sys.exit(trigger_ci_pipeline()) 실무 적용 고려사항 및 주의점 항목 내용 공유 전략 core.hooksPath 설정, Husky(허스키) 등 도구 사용 크로스 플랫폼 OS 별 스크립트 호환성 고려 보안 스크립트 검증 및 실행 권한 관리 유지보수 훅 스크립트의 주기적 업데이트 및 테스트 필요 실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점 고려사항 설명 해결 방안 팀 전체 공유 Git 훅은 기본적으로 로컬에 저장되어 공유되지 않음 Husky, pre-commit 같은 도구를 통해 패키지 관리자와 통합하여 설정 공유 성능 최적화 무거운 검사는 커밋/푸시 과정을 지연시킬 수 있음 필수적인 검사만 pre-commit 에 포함, 나머지는 pre-push 나 CI 단계로 이동 우회 가능성 --no-verify 플래그로 클라이언트 측 훅을 우회할 수 있음 서버 측 훅과 함께 사용하여 중요한 검증 강제화 훅 디버깅 훅 실패 시 원인 파악이 어려울 수 있음 상세한 오류 메시지 제공, 로깅 기능 추가 다양한 개발 환경 팀원마다 다른 OS 환경에서 동일한 훅이 작동해야 함 크로스 플랫폼 스크립트 작성 또는 Docker 컨테이너 활용 새 팀원 온보딩 새 개발자가 프로젝트 설정에 익숙해져야 함 명확한 문서화, 자동화된 설정 스크립트 제공 점진적 도입 한번에 많은 훅을 도입하면 팀의 저항을 불러일으킬 수 있음 가장 가치 있는 훅부터 점진적으로 도입 예외 상황 처리 특정 상황에서는 검증을 건너뛰어야 할 필요가 있음 조건부 검사 로직 구현, 긴급 상황용 우회 메커니즘 마련 훅 테스트 훅 자체에 버그가 있을 수 있음 훅 스크립트에 대한 테스트 코드 작성 버전 관리 훅 스크립트의 변경 이력을 추적해야 함 훅 스크립트를 별도 저장소나 프로젝트 내 디렉토리에서 관리 Git Hooks 공유 및 관리 도구 Git Hooks 를 팀 전체에서 효과적으로 공유하고 관리하기 위한 도구들이 있다:\nHusky: npm 기반 프로젝트에서 Git Hooks 를 쉽게 설정하고 공유할 수 있는 도구 pre-commit: 다양한 언어와 도구에 대한 훅 관리를 제공하는 프레임워크 Lefthook: 빠르고 강력한 Git Hooks 관리자 githooks: 팀 전체에서 훅을 공유하기 위한 간단한 솔루션 git-hooks: 분산된 훅 관리를 위한 도구 CI/CD 시스템과의 통합 Git Hooks 는 CI/CD 시스템과 효과적으로 통합할 수 있다:\n진입점 검증: 로컬 훅으로 기본적인 검증을 수행하고 CI 시스템에서 더 철저한 검증 CI 트리거: post-receive 훅을 사용하여 CI 파이프라인 자동 트리거 결과 피드백: CI 결과를 Git 워크플로우에 통합하여 피드백 루프 강화 멀티환경 지원 다양한 개발 환경에서 Git Hooks 를 일관되게 사용하기 위한 방법:\n셸 스크립트 대신 고급 언어 사용: Python, Node.js 등 크로스 플랫폼 언어 활용 Docker 컨테이너 활용: 일관된 실행 환경 제공 환경 감지 및 적응: 실행 환경에 따라 다른 명령어 실행 최적화하기 위한 고려사항 및 주의할 점 검사 범위 최소화: 변경된 파일만 검사하여 불필요한 처리 방지\n1 2 3 4 5 6 7 # 변경된 파일만 lint 검사 예시 STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep '\\.js$') if [ \"$STAGED_FILES\" = \"\" ]; then exit 0 fi eslint $STAGED_FILES 단계적 검증 전략: 가벼운 검사는 pre-commit 에, 무거운 검사는 pre-push 에 배치\n병렬 처리: 독립적인 검사는 병렬로 실행하여 시간 단축\n1 2 # 병렬 처리 예시 npm run lint \u0026 npm run type-check \u0026 wait 캐싱 활용: 이전에 검증된 파일의 결과를 캐싱하여 재사용\n1 2 # ESLint 캐싱 예시 eslint --cache . 점진적 검증: 전체 검증은 CI 서버에서 수행하고, 로컬에서는 최소 검증\n타임아웃 설정: 무한 루프 방지를 위한 타임아웃 메커니즘 구현\n리소스 사용량 모니터링: 메모리, CPU 사용량을 주기적으로 확인하여 최적화\n최신 동향 주제 항목 설명 자동화 GitOps 와 Git Hooks 통합 GitOps 워크플로우에서 Git Hooks 가 중요한 구성 요소로 자리 잡고 있으며, 인프라 변경 검증에 활용되고 있습니다. 보안 보안 중심 Git Hooks 소프트웨어 공급망 보안이 중요해짐에 따라 의존성 취약점 검사, 자격 증명 유출 방지, 코드 보안 분석을 자동화하는 훅이 표준화되고 있습니다. 표준화 언어별 표준 훅 템플릿 프로그래밍 언어와 프레임워크별로 최적화된 표준 Git Hooks 템플릿이 등장하여 개발자들이 쉽게 채택할 수 있게 되었습니다. 통합 AI 코드 리뷰 통합 AI 기반 코드 리뷰 도구가 Git Hooks 와 통합되어 커밋 전에 자동으로 코드 품질, 보안 취약점, 성능 문제를 분석하고 개선 제안을 제공합니다. 성능 경량화 및 성능 개선 증분 분석과 캐싱 기술의 발전으로 Git Hooks 의 실행 시간이 크게 단축되었으며, 대규모 프로젝트에서도 원활하게 작동합니다. 개발자 경험 인터랙티브 Git Hooks 개발자에게 더 나은 피드백을 제공하는 인터랙티브 훅이 등장하여, 문제 발생 시 자동 수정 제안이나 시각적 피드백을 제공합니다. 클라우드 클라우드 네이티브 훅 클라우드 네이티브 환경에 최적화된 Git Hooks 가 개발되어 Kubernetes 매니페스트 검증, 클라우드 리소스 정책 준수 확인 등을 자동화합니다. 관리 Git Hooks-as-a-Service 기업용 Git Hooks 관리 서비스가 등장하여 조직 전체의 훅 정책을 중앙에서 관리하고 모니터링할 수 있게 되었습니다. 주목해야 할 기술 주제 항목 설명 클라우드 연계 서버리스 훅 클라우드 함수로 훅 실행, 유지보수 용이 자동화 Git Hooks 오케스트레이션 다양한 훅을 조직화하고 상호작용을 관리하는 고급 오케스트레이션 도구가 개발되고 있습니다. 인공지능 AI 기반 코드 검증 머신러닝 모델을 활용해 코드 패턴을 학습하고 버그, 보안 취약점, 성능 이슈를 예측하는 훅이 주목받고 있습니다. 컴플라이언스 규제 준수 자동화 금융, 의료 등 규제가 엄격한 산업에서 컴플라이언스 요구사항을 자동으로 검증하는 특수 목적 훅이 발전하고 있습니다. 보안 SBOM 생성 및 검증 소프트웨어 자재명세서 (SBOM) 생성 및 검증을 자동화하는 훅이 개발되어 소프트웨어 공급망 보안을 강화합니다. 보안 코드 서명 훅 스크립트 무결성 검증 협업 분산 팀 최적화 원격/분산 팀을 위한 협업 최적화 훅이 개발되어 시간대와 지역에 관계없이 일관된 개발 경험을 제공합니다. 앞으로의 전망 주제 항목 설명 자동화 전체 SDLC 통합 Git Hooks 가 소프트웨어 개발 수명 주기 (SDLC) 전반에 더 깊이 통합되어 요구사항부터 배포, 모니터링까지 자동화할 것으로 예상됩니다. 지능화 적응형 Git Hooks 프로젝트와 개발자의 패턴을 학습하여 최적의 검증 전략을 자동으로 조정하는 적응형 훅이 등장할 것으로 예상됩니다. 표준화 산업별 표준 확립 각 산업 분야에 최적화된 Git Hooks 표준이 확립되어 모범 사례가 널리 공유될 것으로 예상됩니다. 통합 개발 도구 생태계 통합 Git Hooks 가 IDE, 코드 에디터, 이슈 트래커, 지식 관리 시스템 등과 더욱 긴밀하게 통합될 것으로 예상됩니다. 확장 비개발 영역으로 확장 Git Hooks 의 개념이 소프트웨어 개발을 넘어 문서 관리, 디자인 시스템, 데이터 파이프라인 등으로 확장될 것으로 예상됩니다. 하위 주제로 분류하여 추가 학습 내용 카테고리 주제 설명 기초 Git Hooks 설정 기초 Git Hooks 의 기본 설정 방법, 활성화/비활성화, 권한 설정 등 기초 지식 기초 프로그래밍 언어별 Git Hooks 다양한 언어 (Bash, Python, JavaScript 등) 로 Git Hooks 작성하기 도구 Husky 깊게 알아보기 JavaScript 프로젝트에서 가장 널리 사용되는 Git Hooks 관리 도구 마스터하기 도구 pre-commit 프레임워크 다양한 언어 지원이 가능한 pre-commit 프레임워크 활용법 고급 서버 측 Git Hooks 심화 깃랩, 깃허브 등 Git 호스팅 서비스에서의 서버 측 훅 구현 고급 CI/CD 파이프라인과 Git Hooks 통합 Jenkins, GitHub Actions, GitLab CI 등과 Git Hooks 연동 방법 고급 대규모 조직에서의 Git Hooks 관리 수백 개의 저장소와 개발자가 있는 환경에서 Git Hooks 관리 전략 보안 보안 중심 Git Hooks 구현 취약점 스캐닝, 비밀 정보 유출 방지, SAST/DAST 통합 성능 Git Hooks 성능 최적화 대규모 코드베이스에서 Git Hooks 성능 병목 현상 해결 방법 사례 연구 산업별 Git Hooks 사례 연구 금융, 의료, 정부 등 다양한 산업에서의 Git Hooks 적용 사례 추가 학습 내용 카테고리 주제 설명 연관 기술 GitOps Git 을 중심으로 한 운영 워크플로우와 Git Hooks 의 역할 연관 기술 정적 코드 분석 Git Hooks 와 함께 활용할 수 있는 정적 코드 분석 도구와 방법론 연관 기술 코드 품질 메트릭스 Git Hooks 로 측정 및 관리할 수 있는 코드 품질 지표 개발 방법론 TDD 와 Git Hooks 테스트 주도 개발에서 Git Hooks 를 활용하는 방법 개발 방법론 지속적 품질 관리 Git Hooks 를 활용한 지속적인 코드 품질 관리 전략 도구 통합 Docker 와 Git Hooks 컨테이너화된 환경에서 Git Hooks 구현 전략 도구 통합 코드 리뷰 도구와 Git Hooks Git Hooks 와 코드 리뷰 프로세스 및 도구 통합 관리 Git Hooks 모니터링 Git Hooks 실행 현황 및 효과 모니터링 방법 관리 Git Hooks 문서화 팀 내 Git Hooks 사용 문서화 및 지식 공유 전략 성능 Git Hooks 벤치마킹 Git Hooks 성능 측정 및 비교 방법론 용어 정리 용어 설명 Husky Git Hooks 를 손쉽게 관리하고 팀에 공유할 수 있게 해주는 도구 Lefthook 멀티 플랫폼 지원 훅 관리 도구 core.hooksPath Git 훅 디렉토리 경로를 지정하는 Git 설정 옵션 용어 정리 용어 설명 pre-receive 서버 측 훅: 푸시된 커밋 전체 검증 Husky Git Hooks 관리 도구: 패키지.json 에 훅 설정 가능 용어 정리 용어 설명 Hook 특정 이벤트 발생 시 자동으로 실행되는 스크립트 pre-commit 커밋 전에 실행되는 Hook 스크립트 commit-msg 커밋 메시지를 검사하는 Hook pre-receive 원격 저장소에서 푸시 전에 실행되는 서버 측 Hook core.hooksPath 공통 Hook 디렉토리를 지정할 수 있는 Git 설정 항목 용어 정리 용어 설명 Git Hooks Git 워크플로우의 특정 이벤트가 발생할 때 자동으로 실행되는 사용자 정의 스크립트 클라이언트 측 훅 로컬 개발 환경에서 실행되는 Git Hooks 로, 개발자의 워크스테이션에서 작동 서버 측 훅 원격 저장소에서 실행되는 Git Hooks 로, 저장소 관리자가 설정하고 모든 사용자에게 적용 pre-commit 커밋이 생성되기 전에 실행되는 훅으로, 코드 검증에 주로 사용 pre-push 원격 저장소로 푸시하기 전에 실행되는 훅으로, 광범위한 테스트에 활용 post-receive 원격 저장소에서 푸시 작업이 완료된 후 실행되는 훅으로, 배포 자동화에 주로 사용 Husky npm 기반 프로젝트에서 Git Hooks 를 쉽게 설정하고 관리할 수 있는 도구 lint-staged 스테이징된 파일에 대해서만 linter 를 실행하는 도구로, Git Hooks 와 함께 자주 사용 pre-commit 프레임워크 다양한 언어와 도구에 대한 훅 관리를 제공하는 Python 기반 프레임워크 Conventional Commits 커밋 메시지에 대한 규약으로, Git Hooks 를 통해 강제할 수 있음 참고 및 출처 Git 공식 문서 - Git Hooks\nHusky 공식 문서\npre-commit 공식 사이트\nGitHub Actions Docs\n참고 및 출처 Git 공식 문서 Atlassian Git 튜토리얼 2025 DevOps 트렌드 분석 참고 및 출처 Git 공식 문서: Git Hooks Atlassian Git Hooks 가이드 Husky 공식 문서 2025 DevOps 트렌드 분석 참고 및 출처 Git Hooks 공식 문서 Pro Git Book - Git Hooks 섹션 Atlassian Git Hooks 튜토리얼 Husky - Git Hooks 관리 도구 pre-commit 프레임워크 문서 GitLab Server Hooks 문서 GitHub Actions와 Git Hooks 통합 가이드 Git Hooks를 활용한 코드 품질 관리 Lefthook - 빠른 Git Hooks 관리자 Git Hooks와 지속적 통합 파이프라인 구축 ","wordCount":"6811","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2024-10-28T12:38:00Z","dateModified":"2024-10-28T12:38:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/devops-and-platform-engineering/version-control-systems/git-workflow/git-hooks/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>Computer Science and Engineering</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/devops-and-platform-engineering/>DevOps and Infrastructure</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/devops-and-platform-engineering/version-control-systems/>Version Control Systems</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/devops-and-platform-engineering/version-control-systems/git-workflow/>Git Workflow</a></div><h1 class="post-title entry-hint-parent">Git Hooks</h1><div class=post-description>Git Hooks 는 Git 워크플로우의 특정 이벤트가 발생할 때 자동으로 실행되는 사용자 정의 스크립트로, 개발 프로세스 자동화와 코드 품질 향상에 역할을 한다. 클라이언트 측 (pre-commit, commit-msg, pre-push 등) 과 서버 측 (pre-receive, update, post-receive 등) 훅으로 나뉘며, 코드 린팅, 테스트 자동화, 커밋 메시지 표준화, 보안 검사, 배포 자동화 등 다양한 용도로 활용된다. 최근에는 AI 기반 코드 검증, GitOps 통합, 클라우드 네이티브 환경 지원 등으로 발전하고 있으며, Husky 와 pre-commit 같은 관리 도구를 통해 팀 전체에서 일관된 훅 설정을 공유할 수 있다. Git Hooks 는 개발 생산성 향상, 코드 품질 보장, 오류 감소, 워크플로우 표준화의 장점이 있지만, 초기 설정 복잡성, 팀 공유의 어려움, 유지보수 부담 등의 단점도 존재한다.</div><div class=post-meta><span title='2024-10-28 12:38:00 +0000 UTC'>October 28, 2024</span>&nbsp;·&nbsp;32 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/DevOps%20and%20Platform%20Engineering/Version%20Control%20Systems/Git%20Workflow/git-hooks.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#git-hooks>Git Hooks</a><ul><li><a href=#핵심-개념>핵심 개념</a></li><li><a href=#목적>목적</a></li><li><a href=#필요성>필요성</a></li><li><a href=#주요-기능>주요 기능</a></li><li><a href=#역할>역할</a></li><li><a href=#특징>특징</a></li><li><a href=#핵심-원칙>핵심 원칙</a></li><li><a href=#작동-원리>작동 원리</a></li><li><a href=#구성-요소-및-아키텍처>구성 요소 및 아키텍처</a></li><li><a href=#장점과-단점>장점과 단점</a></li><li><a href=#클라이언트-vs-서버-훅-비교>클라이언트 vs. 서버 훅 비교</a></li><li><a href=#실무-적용-예시>실무 적용 예시</a></li><li><a href=#활용-예시-및-다이어그램>활용 예시 및 다이어그램</a></li><li><a href=#실무-활용-시나리오>실무 활용 시나리오</a></li><li><a href=#실무-적용-고려사항-및-주의점>실무 적용 고려사항 및 주의점</a></li><li><a href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점</a></li><li><a href=#최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점</a></li><li><a href=#최신-동향>최신 동향</a></li><li><a href=#주목해야-할-기술>주목해야 할 기술</a></li><li><a href=#앞으로의-전망>앞으로의 전망</a></li><li><a href=#하위-주제로-분류하여-추가-학습-내용>하위 주제로 분류하여 추가 학습 내용</a></li><li><a href=#추가-학습-내용>추가 학습 내용</a></li></ul></li><li><a href=#용어-정리>용어 정리</a></li><li><a href=#용어-정리-1>용어 정리</a></li><li><a href=#용어-정리-2>용어 정리</a><ul><li><a href=#용어-정리-3>용어 정리</a></li></ul></li><li><a href=#참고-및-출처>참고 및 출처</a></li><li><a href=#참고-및-출처-1>참고 및 출처</a></li><li><a href=#참고-및-출처-2>참고 및 출처</a><ul><li><a href=#참고-및-출처-3>참고 및 출처</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h2 id=git-hooks>Git Hooks<a hidden class=anchor aria-hidden=true href=#git-hooks>#</a></h2><p>Git Hooks 는 Git 워크플로우의 특정 이벤트 (커밋, 푸시 등) 가 발생할 때 자동으로 실행되는 사용자 정의 스크립트이다. 이 스크립트들은 소스 코드 관리, 품질 보증, 배포 자동화 등 다양한 목적으로 활용된다. Git Hooks 는 클라이언트 측과 서버 측으로 나뉘며, 로컬 개발 환경에서의 코드 검증부터 원격 저장소에서의 배포 자동화까지 광범위한 워크플로우를 지원한다. 이를 통해 개발자들은 코딩 표준 준수, 테스트 자동화, 지속적 통합/배포 등을 효율적으로 구현할 수 있다.</p><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><p>Git Hooks 는 <strong>Git 작업 이벤트 트리거</strong>에 반응하는 <strong>자동화 스크립트</strong>이다. <code>.git/hooks</code> 디렉토리에 위치하며, 실행 가능한 권한이 부여된 스크립트 파일 형태로 존재한다. 이벤트는 커밋 생성, 브랜치 전환, 원격 저장소로의 푸시 등 Git 워크플로우의 다양한 시점에서 발생할 수 있으며 사전/사후 작업을 실행한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 예시: pre-commit 훅</span>
</span></span><span class=line><span class=cl><span class=c1>#!/bin/sh</span>
</span></span><span class=line><span class=cl>npm run lint  <span class=c1># 커밋 전 린트 실행</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=목적>목적<a hidden class=anchor aria-hidden=true href=#목적>#</a></h3><p>Git Hooks 의 주요 목적은 다음과 같다:</p><ol><li>개발 워크플로우 자동화</li><li>코드 품질 및 일관성 유지</li><li>테스트 자동화</li><li>배포 프로세스 간소화</li><li>팀 협업 효율성 증대</li><li>보안 취약점 검사 자동화</li></ol><h3 id=필요성>필요성<a hidden class=anchor aria-hidden=true href=#필요성>#</a></h3><p>Git Hooks 는 다음과 같은 이유로 필요하다:</p><ol><li>인적 오류 감소 - 수동 검사를 자동화하여 실수 방지</li><li>일관된 코드 품질 보장 - 모든 코드 변경에 동일한 검증 적용</li><li>개발 속도 향상 - 반복적인 작업 자동화</li><li>팀 표준 강제화 - 모든 팀원이 동일한 규칙 준수</li><li>배포 위험 감소 - 검증되지 않은 코드의 배포 방지</li></ol><h3 id=주요-기능>주요 기능<a hidden class=anchor aria-hidden=true href=#주요-기능>#</a></h3><p>Git Hooks 의 주요 기능은 다음과 같다:</p><ol><li>코드 스타일 검사 (linting)</li><li>자동 테스트 실행</li><li>커밋 메시지 형식 검증</li><li>브랜치 명명 규칙 강제</li><li>금지된 파일 형식 차단</li><li>배포 자동화</li><li>외부 시스템 통합 (CI/CD, 이슈 트래커 등)</li></ol><h3 id=역할>역할<a hidden class=anchor aria-hidden=true href=#역할>#</a></h3><p>Git Hooks 는 개발 프로세스에서 다음과 같은 역할을 수행한다:</p><ol><li><strong>게이트키퍼</strong> - 품질 기준을 충족하지 않는 코드의 저장소 진입 차단</li><li><strong>자동화 도구</strong> - 반복적인 작업 자동 실행</li><li><strong>통합 지점</strong> - 외부 시스템과 Git 워크플로우 연결</li><li><strong>정책 시행자</strong> - 팀의 코딩 표준 및 관행 강제화</li><li><strong>알림 시스템</strong> - 중요 이벤트 발생시 팀원에게 통지</li></ol><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><p>Git Hooks 의 주요 특징은 다음과 같다:</p><ol><li><strong>사용자 정의 가능성</strong> - 어떤 프로그래밍 언어로도 작성 가능</li><li><strong>이식성</strong> - 모든 Git 저장소에서 작동</li><li><strong>유연성</strong> - 다양한 워크플로우 단계에서 실행 가능</li><li><strong>확장성</strong> - 외부 도구와 쉽게 통합</li><li><strong>선택적 사용</strong> - 필요한 훅만 활성화 가능</li><li><strong>로컬 및 서버 측 지원</strong> - 개발자 워크스테이션과 원격 저장소 모두에서 사용 가능</li></ol><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><p>Git Hooks 사용의 핵심 원칙은 다음과 같다:</p><ol><li><strong>" 코드에 문제가 있다면 일찍 찾아내라 &ldquo;</strong> - 문제가 확산되기 전에 조기 발견</li><li><strong>자동화 우선</strong> - 수동 과정보다 자동화된 프로세스 선호</li><li><strong>실패는 빠르게</strong> - 문제가 있다면 프로세스 초기에 실패하도록 설계</li><li><strong>일관성 유지</strong> - 모든 개발자가 동일한 검증 과정 통과</li><li><strong>적절한 피드백</strong> - 문제 발생 시 명확한 오류 메시지 제공</li></ol><h3 id=작동-원리>작동 원리<a hidden class=anchor aria-hidden=true href=#작동-원리>#</a></h3><ul><li><strong>이벤트 기반 실행</strong>: Git 의 특정 이벤트 발생 시 해당하는 Hook 스크립트가 자동으로 실행된다.</li><li><strong>스크립트 실행 흐름</strong>: 예를 들어, <code>pre-commit</code> Hook 은 <code>git commit</code> 명령 실행 시 커밋이 완료되기 전에 실행된다.</li><li><strong>실행 결과에 따른 동작 제어</strong>: Hook 스크립트의 종료 상태에 따라 Git 명령의 실행 여부가 결정된다.</li></ul><p><figure><img alt="Git Hook 작동 원리" loading=lazy src=/img/8c8e049c-0cc4-4a3c-bdad-40b68a153fcf.png></figure></p><h4 id=작동-원리-다이어그램>작동 원리 다이어그램<a hidden class=anchor aria-hidden=true href=#작동-원리-다이어그램>#</a></h4><pre class=mermaid>flowchart TD
A[Git 이벤트 발생] --&gt; B{해당 훅 스크립트 존재?}
B -- 예 --&gt; C[스크립트 실행]
C --&gt; D{성공?}
D -- 예 --&gt; E[다음 단계 진행]
D -- 아니오 --&gt; F[작업 중단]
B -- 아니오 --&gt; E
</pre><h3 id=구성-요소-및-아키텍처>구성 요소 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구성-요소-및-아키텍처>#</a></h3><p>Git Hooks 의 구성 요소 및 아키텍처는 다음과 같다:</p><table><thead><tr><th>구성 요소</th><th>설명</th><th>역할</th><th>기능</th><th>예시</th></tr></thead><tbody><tr><td><strong>훅 스크립트 파일</strong></td><td><code>.git/hooks</code> 디렉토리에 위치한 실행 파일</td><td>Git 이벤트 발생 시 자동 실행</td><td>코드 검증, 테스트 실행, 메시지 형식 검사 등</td><td></td></tr><tr><td><strong>Git 저장소</strong></td><td><code>.git</code> 디렉토리를 포함한 프로젝트 폴더</td><td>훅 설정 및 실행 환경 제공</td><td>버전 관리, 이벤트 트리거링</td><td></td></tr><tr><td><strong>클라이언트 측 훅</strong></td><td>로컬 환경에서 실행되는 훅</td><td>개발 중 코드 품질 사전 검증</td><td>커밋 전 검사, 메시지 포맷팅, 푸시 전 테스트 등</td><td><code>pre-commit</code>, <code>commit-msg</code>, <code>pre-push</code></td></tr><tr><td><strong>서버 측 훅</strong></td><td>원격 저장소 (Git 서버) 에서 실행되는 훅</td><td>조직 정책 강제 및 배포 연계</td><td>푸시 수신 검증, 브랜치 보호, 자동 배포 등</td><td><code>pre-receive</code>, <code>update</code>, <code>post-receive</code></td></tr><tr><td><strong>훅 관리 도구</strong></td><td>Husky, pre-commit, Lefthook 등</td><td>팀 단위에서의 훅 일관성 유지</td><td>훅 공유, 설정 자동화, 실행 환경 표준화</td><td></td></tr></tbody></table><h3 id=장점과-단점>장점과 단점<a hidden class=anchor aria-hidden=true href=#장점과-단점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>✅ 장점</td><td>자동화</td><td>반복 작업 자동 처리, 생산성 향상</td></tr><tr><td></td><td>표준화</td><td>팀 규칙 강제, 코드 품질 일관성 유지</td></tr><tr><td></td><td>코드 품질 향상</td><td>일관된 코드 스타일과 표준을 강제하여 품질 향상</td></tr><tr><td></td><td>오류 감소</td><td>커밋이나 푸시 전에 문제를 감지하여 버그 유입 방지</td></tr><tr><td></td><td>CI/CD 파이프라인 강화</td><td>지속적 통합 및 배포 프로세스를 보완하고 강화</td></tr><tr><td></td><td>유연성</td><td>어떤 프로그래밍 언어로도 작성 가능하며 다양한 용도로 활용</td></tr><tr><td>⚠ 단점</td><td>공유 어려움</td><td>.git/hooks 는 기본적으로 버전 관리 미지원</td></tr><tr><td></td><td>보안 위험</td><td>악성 스크립트 실행 가능성</td></tr><tr><td></td><td>과도한 제약 가능성</td><td>너무 엄격한 훅은 개발 생산성을 저하시킬 수 있음</td></tr><tr><td></td><td>유지보수 부담</td><td>시간이 지남에 따라 훅 스크립트 자체의 유지보수가 필요</td></tr><tr><td></td><td>디버깅 어려움</td><td>훅 실패 시 원인 파악이 복잡할 수 있음</td></tr><tr><td></td><td>성능 영향</td><td>복잡한 훅은 Git 작업 속도를 현저히 저하시킬 수 있음</td></tr></tbody></table><h3 id=클라이언트-vs-서버-훅-비교>클라이언트 vs. 서버 훅 비교<a hidden class=anchor aria-hidden=true href=#클라이언트-vs-서버-훅-비교>#</a></h3><table><thead><tr><th>구분</th><th>클라이언트 훅</th><th>서버 훅</th></tr></thead><tbody><tr><td><strong>실행 위치</strong></td><td>로컬 저장소</td><td>원격 저장소 서버</td></tr><tr><td><strong>주요 이벤트</strong></td><td>커밋, 머지, 푸시 전</td><td>푸시 수신 후</td></tr><tr><td><strong>목적</strong></td><td>개인 작업 표준화</td><td>팀 정책 강제</td></tr></tbody></table><h4 id=분류에-따른-종류-및-유형>분류에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류에-따른-종류-및-유형>#</a></h4><table><thead><tr><th>분류</th><th>훅 이름</th><th>설명</th><th>실행 시점</th></tr></thead><tbody><tr><td>클라이언트 측</td><td>pre-commit</td><td>커밋 생성 전 실행</td><td><code>git commit</code> 명령 후, 커밋 메시지 입력 전</td></tr><tr><td></td><td>prepare-commit-msg</td><td>커밋 메시지 템플릿 준비</td><td>커밋 메시지 편집기 실행 전</td></tr><tr><td></td><td>commit-msg</td><td>커밋 메시지 검증</td><td>커밋 메시지 작성 후, 커밋 완료 전</td></tr><tr><td></td><td>post-commit</td><td>커밋 완료 후 알림</td><td>커밋 완료 직후</td></tr><tr><td></td><td>pre-rebase</td><td>리베이스 작업 전 검증</td><td><code>git rebase</code> 명령 실행 전</td></tr><tr><td></td><td>post-rewrite</td><td>커밋 수정 명령 후 실행</td><td><code>git commit --amend</code> 또는 <code>git rebase</code> 이후</td></tr><tr><td></td><td>pre-push</td><td>원격 저장소 푸시 전 검증</td><td><code>git push</code> 실행 전, 원격 참조 업데이트 전</td></tr><tr><td></td><td>post-checkout</td><td>체크아웃 후 작업 환경 설정</td><td><code>git checkout</code> 또는 <code>git switch</code> 이후</td></tr><tr><td></td><td>post-merge</td><td>병합 후 작업 환경 설정</td><td><code>git merge</code> 완료 후</td></tr><tr><td></td><td>pre-auto-gc</td><td>가비지 컬렉션 전 검증</td><td><code>git gc --auto</code> 실행 전</td></tr><tr><td></td><td>fsmonitor-watchman</td><td>파일 시스템 모니터링 설정</td><td><code>git status</code> 와 같은 명령 성능 향상에 사용</td></tr><tr><td>서버 측</td><td>pre-receive</td><td>푸시 데이터 수신 전 검증</td><td>푸시 데이터를 수신하기 전, 모든 참조에 대해 한 번</td></tr><tr><td></td><td>update</td><td>개별 참조 업데이트 검증</td><td>업데이트되는 각 참조 (브랜치나 태그) 에 대해 실행</td></tr><tr><td></td><td>post-receive</td><td>모든 참조 업데이트 후 실행</td><td>푸시 프로세스 완료 후 한 번 실행</td></tr><tr><td></td><td>post-update</td><td>참조 업데이트 후 알림</td><td>업데이트된 모든 참조에 대해 한 번 실행</td></tr><tr><td></td><td>reference-transaction</td><td>참조 업데이트 트랜잭션 처리</td><td>참조가 변경될 때마다 실행</td></tr><tr><td></td><td>pre-auto-gc</td><td>자동 가비지 컬렉션 전 검증</td><td>서버의 <code>git gc --auto</code> 실행 전</td></tr><tr><td>이메일 워크플로우</td><td>applypatch-msg</td><td>패치 적용 메시지 검증</td><td><code>git am</code> 실행 시</td></tr><tr><td></td><td>pre-applypatch</td><td>패치 적용 전 검증</td><td>패치 적용 후, 커밋 생성 전</td></tr><tr><td></td><td>post-applypatch</td><td>패치 적용 후 알림</td><td><code>git am</code> 완료 후</td></tr></tbody></table><h3 id=실무-적용-예시>실무 적용 예시<a hidden class=anchor aria-hidden=true href=#실무-적용-예시>#</a></h3><table><thead><tr><th>적용 사례</th><th>사용 훅</th><th>설명</th><th>이점</th></tr></thead><tbody><tr><td>코드 스타일 검사</td><td>pre-commit</td><td>ESLint, Prettier 등을 사용해 코드 스타일 검사</td><td>일관된 코드 스타일 유지, 리뷰 부담 감소</td></tr><tr><td>테스트 자동화</td><td>pre-push</td><td>유닛 테스트, 통합 테스트 자동 실행</td><td>테스트 실패한 코드의 저장소 반영 방지</td></tr><tr><td>커밋 메시지 표준화</td><td>commit-msg</td><td>커밋 메시지가 정해진 형식 (예: 컨벤셔널 커밋) 을 따르는지 검사</td><td>변경 이력 가독성 향상, 자동 버전 관리 지원</td></tr><tr><td>보안 취약점 검사</td><td>pre-commit, pre-push</td><td>의존성 패키지의 보안 취약점 검사</td><td>보안 위험 조기 감지</td></tr><tr><td>자동 배포</td><td>post-receive</td><td>CI/CD 파이프라인 트리거, 서버 환경 자동 업데이트</td><td>배포 프로세스 간소화</td></tr><tr><td>이슈 트래커 연동</td><td>prepare-commit-msg</td><td>브랜치 이름에서 이슈 번호를 추출하여 커밋 메시지에 자동 추가</td><td>코드와 이슈 추적 시스템 연계 강화</td></tr><tr><td>문서 자동 생성</td><td>post-commit, post-receive</td><td>API 문서, CHANGELOG 등 자동 업데이트</td><td>문서의 최신 상태 유지</td></tr><tr><td>데이터베이스 마이그레이션</td><td>post-checkout, post-merge</td><td>브랜치 전환 또는 병합 후 자동으로 DB 스키마 업데이트</td><td>개발 환경 일관성 유지</td></tr><tr><td>환경 변수 검증</td><td>pre-commit</td><td>민감한 정보 (API 키, 비밀번호 등) 가 커밋되지 않도록 방지</td><td>보안 강화, 민감 정보 유출 방지</td></tr><tr><td>성능 테스트</td><td>pre-push</td><td>주요 기능의 성능 회귀 테스트 자동 실행</td><td>성능 저하 조기 탐지</td></tr></tbody></table><h4 id=샘플-git-hook-스크립트-pre-commit-예시>샘플 Git Hook 스크립트 (pre-commit 예시)<a hidden class=anchor aria-hidden=true href=#샘플-git-hook-스크립트-pre-commit-예시>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/sh
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># .git/hooks/pre-commit</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;🔍 Running lint check before commit...&#34;</span>
</span></span><span class=line><span class=cl>npx eslint . --ext .js,.jsx,.ts,.tsx
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=nv>$?</span> -ne <span class=m>0</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;❌ Lint errors detected. Commit aborted.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;✅ Lint passed. Proceeding with commit.&#34;</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>실행 전 반드시 <code>chmod +x.git/hooks/pre-commit</code> 로 실행 권한 부여 필요.</p></blockquote><h4 id=pre-commit-프레임워크-구성-예시-python-기반>Pre-commit 프레임워크 구성 예시 (Python 기반)<a hidden class=anchor aria-hidden=true href=#pre-commit-프레임워크-구성-예시-python-기반>#</a></h4><p>다양한 언어로 작성된 Git hook 을 관리할 수 있는 프레임워크로, Python 프로젝트에서 특히 널리 사용된다.</p><p><strong>특징</strong>:</p><ul><li>YAML 기반 설정파일을 통해 hook 도구 선언 가능<ul><li><code>.pre-commit-config.yaml</code> 파일을 통해 hook 을 선언하고 관리한다.</li></ul></li><li>로컬에 설치하면.git/hooks 에 자동으로 훅 스크립트를 심어줌</li><li>다양한 언어의 hook 을 지원하며, 자동으로 필요한 환경을 설정한다.</li><li>커밋 전에 코드 포매팅, 린팅, 보안 검사 등을 자동으로 수행할 수 있다.</li><li><a href=https://pre-commit.com/hooks.html>Pre Commit 공식문서</a> 이나 <a href=https://github.com/pre-commit/pre-commit-hooks>커뮤니티 hook 목록(Github)</a> 에 수많은 검증된 툴 (black, isort, flake8, ruff, detect-secrets 등) 이 있음</li></ul><p><strong>장점</strong></p><ul><li>Python 생태계와 연동이 용이</li><li>다양한 언어 지원 (외부 툴도 사용 가능)</li><li>개별 개발환경 간 일관성 유지</li><li>CI 에서 동일하게 적용 가능</li></ul><p><strong>설정 예시</strong><br><code>.pre-commit-config.yaml</code> 구성</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span><span class=lnt id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a>
</span><span class=lnt id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a>
</span><span class=lnt id=hl-3-17><a class=lnlinks href=#hl-3-17>17</a>
</span><span class=lnt id=hl-3-18><a class=lnlinks href=#hl-3-18>18</a>
</span><span class=lnt id=hl-3-19><a class=lnlinks href=#hl-3-19>19</a>
</span><span class=lnt id=hl-3-20><a class=lnlinks href=#hl-3-20>20</a>
</span><span class=lnt id=hl-3-21><a class=lnlinks href=#hl-3-21>21</a>
</span><span class=lnt id=hl-3-22><a class=lnlinks href=#hl-3-22>22</a>
</span><span class=lnt id=hl-3-23><a class=lnlinks href=#hl-3-23>23</a>
</span><span class=lnt id=hl-3-24><a class=lnlinks href=#hl-3-24>24</a>
</span><span class=lnt id=hl-3-25><a class=lnlinks href=#hl-3-25>25</a>
</span><span class=lnt id=hl-3-26><a class=lnlinks href=#hl-3-26>26</a>
</span><span class=lnt id=hl-3-27><a class=lnlinks href=#hl-3-27>27</a>
</span><span class=lnt id=hl-3-28><a class=lnlinks href=#hl-3-28>28</a>
</span><span class=lnt id=hl-3-29><a class=lnlinks href=#hl-3-29>29</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>repos</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/pre-commit/pre-commit-hooks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=l>v4.6.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>detect-private-key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>stages</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>pre-push] </span><span class=w> </span><span class=c># push 시에만 실행</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/pre-commit/pre-commit-hooks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=l>v4.5.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	  </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>trailing-whitespace </span><span class=w> </span><span class=c># 줄 끝 공백 제거</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	  </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>end-of-file-fixer   </span><span class=w> </span><span class=c># 파일 끝 개행 문자 추가</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	  </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>check-yaml          </span><span class=w> </span><span class=c># YAML 문법 검사</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/psf/black</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=m>24.1.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	  </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>black</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=nt>language_version</span><span class=p>:</span><span class=w> </span><span class=l>python3.11</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=nt>args</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;--line-length=88&#34;</span><span class=p>]</span><span class=w>  </span><span class=c># 최대 줄 길이 설정</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/pycqa/isort</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=m>5.13.2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	  </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>isort </span><span class=w> </span><span class=c># import 정렬</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/pycqa/flake8</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=m>7.0.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	  </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>flake8 </span><span class=w> </span><span class=c># 코드 스타일 검사</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>설치 및 사용</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2>2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pip install pre-commit
</span></span><span class=line><span class=cl>pre-commit install  <span class=c1># Git hook 설치</span>
</span></span><span class=line><span class=cl>pre-commit run --all-files  <span class=c1># 전체 파일에 대해 hook 실행</span>
</span></span></code></pre></td></tr></table></div></div><p>이 방식은 팀 내에서 hook 구성 공유를 YAML 로 하고, 자동 배포까지 가능하다는 장점이 있다.</p><h4 id=husky-연동-예제-nodejs-기반>Husky 연동 예제 (Node.js 기반)<a hidden class=anchor aria-hidden=true href=#husky-연동-예제-nodejs-기반>#</a></h4><p>JavaScript/Node.js 프로젝트에서 Git hook 을 쉽게 설정하고 관리할 수 있는 도구이다.</p><p><strong>특징</strong></p><ul><li>npm 스크립트 연동이 매우 편리함 (예: lint, test, build 등)</li><li>.husky/ 폴더 내에 각 hook 스크립트 파일을 만들고 관리</li><li>프론트엔드, 풀스택, Node.js 프로젝트에서 사실상 표준</li><li><code>package.json</code> 과 연동되어 설정이 간편</li></ul><p><strong>장점</strong></p><ul><li>Node.js 와 완벽 연동, npm 생태계 친화적</li><li>다양한 hook 지원 (pre-commit, pre-push 등)</li><li>monorepo 환경에 강함</li></ul><p><strong>설정 예시</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2>2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3>3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4>4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5>5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6>6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7>7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. Husky 설치</span>
</span></span><span class=line><span class=cl>npm install husky --save-dev
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Husky 초기화(필수)</span>
</span></span><span class=line><span class=cl>npx husky install
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. (선택) install 후 자동 실행하게 하려면 package.json에 추가:</span>
</span></span><span class=line><span class=cl>npm set-script prepare <span class=s2>&#34;husky install&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>위에서 <code>"prepare"</code> 스크립트는 clone 후에도 자동으로 hook 이 설치되도록 보장한다.<br><strong>모든 팀원이 husky hook 을 자동 설치하려면</strong> package.json 의 <code>"prepare": "husky install"</code> 을 빼먹지 말아야 한다.</p><p><strong>전체적인 디렉터리 구조 예시</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2>2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3>3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4>4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5>5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>프로젝트/
</span></span><span class=line><span class=cl> ├─ .husky/
</span></span><span class=line><span class=cl> │   ├─ pre-commit
</span></span><span class=line><span class=cl> │   └─ pre-push
</span></span><span class=line><span class=cl> ├─ package.json
</span></span><span class=line><span class=cl> └─ …
</span></span></code></pre></td></tr></table></div></div><p><strong>Git hook 등록 방법</strong></p><ol><li><p>명령어로 자동 추가<br>예를 들어, <strong>pre-commit</strong> hook 을 추가하려면:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npx husky add .husky/pre-commit <span class=s2>&#34;npm run lint&#34;</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>.husky/pre-commit</code> 파일이 생성되고, 커밋 전에 <code>npm run lint</code> 가 실행됩니다.</li></ul><p><strong>pre-push</strong> 훅 추가 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npx husky add .husky/pre-push <span class=s2>&#34;npm test&#34;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>직접 스크립트 편집<br><code>.husky/pre-commit</code> 등 해당 파일에 직접 shell 명령을 추가할 수도 있다.</p><p>예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1>1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2>2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3>3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4>4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/sh
</span></span></span><span class=line><span class=cl><span class=cp></span>. <span class=s2>&#34;</span><span class=k>$(</span>dirname <span class=s2>&#34;</span><span class=nv>$0</span><span class=s2>&#34;</span><span class=k>)</span><span class=s2>/_/husky.sh&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>npm run lint
</span></span><span class=line><span class=cl>npx prettier --check .
</span></span></code></pre></td></tr></table></div></div><ul><li>첫 두 줄은 husky 내부 환경설정을 위한 부분이니 반드시 포함!</li></ul></li><li><p>package.json 과의 연동<br>보통 아래처럼 <code>lint</code>, <code>test</code> 등 스크립트를 미리 등록해두고, Husky 에서는 이 스크립트를 호출하는 것이 일반적이다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1>1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2>2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3>3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4>4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5>5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6>6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=c1>// package.json 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;scripts&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;lint&#34;</span><span class=p>:</span> <span class=s2>&#34;eslint .&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;test&#34;</span><span class=p>:</span> <span class=s2>&#34;jest&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>Husky 와 Lint-staged 연동</p><ul><li><strong>lint-staged</strong>를 함께 쓰면, 변경된 파일 (커밋 대상) 만 lint/포맷팅 가능</li><li>설치 및 예시:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install lint-staged --save-dev
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1>1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2>2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3>3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4>4</a>
</span><span class=lnt id=hl-12-5><a class=lnlinks href=#hl-12-5>5</a>
</span><span class=lnt id=hl-12-6><a class=lnlinks href=#hl-12-6>6</a>
</span><span class=lnt id=hl-12-7><a class=lnlinks href=#hl-12-7>7</a>
</span><span class=lnt id=hl-12-8><a class=lnlinks href=#hl-12-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=c1>// package.json
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=s2>&#34;lint-staged&#34;</span><span class=err>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;*.js&#34;</span><span class=p>:</span> <span class=s2>&#34;eslint --fix&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;*.ts&#34;</span><span class=p>:</span> <span class=s2>&#34;eslint --fix&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span><span class=err>,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;scripts&#34;</span><span class=err>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;lint&#34;</span><span class=p>:</span> <span class=s2>&#34;lint-staged&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npx husky add .husky/pre-commit <span class=s2>&#34;npx lint-staged&#34;</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><h4 id=lefthook-연동-예제-언어-독립형>Lefthook 연동 예제 (언어 독립형)<a hidden class=anchor aria-hidden=true href=#lefthook-연동-예제-언어-독립형>#</a></h4><p>Go 언어로 작성된 빠르고 강력한 Git hook 관리 도구로, 다양한 언어의 프로젝트에서 사용할 수 있다.</p><p><strong>특징</strong>:</p><ul><li>여러 언어, 여러 환경, 여러 플랫폼 지원 (monorepo 에 최적)</li><li><code>.lefthook.yml</code> 로 hook 스크립트 정의 (YAML 기반)</li><li>병렬 실행을 지원하여 대규모 프로젝트에서도 빠른 속도를 제공한다.</li><li>단일 바이너리로 작동하며, 의존성이 없다.</li><li>로컬 및 글로벌 설정을 분리하여 관리할 수 있다.</li></ul><p><strong>장점</strong></p><ul><li>대용량/대규모 레포에 적합</li><li>언어 제한 없음 (Node, Python, Ruby … 전부 가능)</li><li>빠르고, CI/CD 통합이 용이</li></ul><p><strong>설정 예시</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1>1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2>2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3>3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4>4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5>5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6>6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7>7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>pre-commit</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>parallel</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>  </span><span class=c># 병렬 실행</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>commands</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>lint</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>glob</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;*.js&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>npm run lint</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>test</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>npm test</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>설치 및 사용</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1>1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install lefthook --save-dev
</span></span><span class=line><span class=cl>npx lefthook install
</span></span></code></pre></td></tr></table></div></div><h4 id=git-secrets-연동-예제-aws-키-및-민감정보-방지>Git-secrets 연동 예제 (AWS 키 및 민감정보 방지)<a hidden class=anchor aria-hidden=true href=#git-secrets-연동-예제-aws-키-및-민감정보-방지>#</a></h4><p>AWS 에서 개발한 도구로, Git 커밋에 민감한 정보 (예: AWS 키, 비밀번호 등) 가 포함되지 않도록 방지한다.<br>복잡한 lint 나 포매팅, 테스트 등은 불가 (시크릿 검출에만 특화) 하다.</p><p><strong>특징</strong>:</p><ul><li>정규 표현식을 사용하여 민감한 정보를 검사한다.</li><li>커밋, 커밋 메시지, 병합 기록 등을 스캔한다.</li><li>사용자 정의 패턴을 추가하여 조직에 맞게 설정할 수 있다.</li><li>pre-commit, pre-push 등 Git hook 에 쉽게 연동</li><li>pre-commit 프레임워크와도 연동할 수 있음</li></ul><p><strong>장점</strong></p><ul><li>실수로 시크릿 (비밀번호, 토큰, AWS 키 등) 커밋 방지</li><li>설치 쉽고, 단일기능에 충실</li></ul><p><strong>설정</strong></p><ul><li>패턴 정보는 <code>.git/secrets</code> 폴더에 저장</li><li><code>patterns</code>, <code>allowed</code>, <code>excluded-patterns</code> 파일로 구분하여 직접 편집도 가능</li><li>Git 의 <strong>템플릿 디렉토리</strong> 기능을 이용하면, 신규 저장소 생성 시마다 자동으로 <code>git-secrets</code> 의 훅이 적용된 상태로 시작할 수 있다.<ol><li><p>템플릿 디렉토리 준비</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1>1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2>2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3>3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4>4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5>5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6>6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 임의의 경로에 템플릿 디렉토리 준비</span>
</span></span><span class=line><span class=cl>mkdir -p ~/git-templates/hooks
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 해당 디렉토리에 git-secrets 훅 적용</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> ~/git-templates
</span></span><span class=line><span class=cl>git secrets --install
</span></span><span class=line><span class=cl>git secrets --register-aws
</span></span></code></pre></td></tr></table></div></div></li><li><p>전역 템플릿 디렉토리로 등록</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git config --global init.templateDir <span class=s1>&#39;~/git-templates&#39;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>신규 저장소 생성 시 자동 적용<br>이후 <code>git init</code> 으로 신규 저장소를 만들면 <code>~/git-templates/hooks</code> 에 있던 훅들 (pre-commit, pre-push 등) 이 자동 복사<br><strong>설치</strong></p></li></ol></li></ul><ol><li><p>Homebrew (macOS/Linux)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>brew install git-secrets
</span></span></code></pre></td></tr></table></div></div></li><li><p>Linux (직접 설치)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1>1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2>2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone https://github.com/awslabs/git-secrets.git
</span></span><span class=line><span class=cl><span class=nb>cd</span> git-secrets
</span></span><span class=line><span class=cl>sudo make install
</span></span></code></pre></td></tr></table></div></div><ul><li>위 명령으로 git-secrets 명령어가 등록된다.</li></ul></li><li><p>Windows</p><ul><li>WSL(리눅스 환경) 이나 Docker 에서 위 방식으로 설치</li></ul></li></ol><p><strong>사용</strong></p><ol><li><p>저장소에 git-secrets 적용<br>프로젝트 루트에서 다음과 같이 실행한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git secrets --install
</span></span></code></pre></td></tr></table></div></div><p>이 명령은 <code>.git/hooks/pre-commit</code>, <code>.git/hooks/commit-msg</code>, <code>.git/hooks/pre-push</code> 등에<br>git-secrets 검사를 자동으로 넣어줍니다.</p></li><li><p>AWS 키 등 탐지 패턴 추가</p><ol><li><p>기본 AWS 키 패턴 등록<br>(필수 아님, 하지만 AWS 환경이라면 반드시 해주는 걸 추천!)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git secrets --register-aws
</span></span></code></pre></td></tr></table></div></div></li><li><p>커스텀 시크릿 패턴 등록</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git secrets --add <span class=s1>&#39;my_super_secret_regex&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p>예)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-23-1><a class=lnlinks href=#hl-23-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git secrets --add <span class=s1>&#39;password\s*=&#39;</span>
</span></span></code></pre></td></tr></table></div></div></li></ol></li><li><p>사용 방법</p><ul><li>커밋/푸시 시 자동으로 실행되어, 시크릿이 탐지되면 커밋 (푸시) 이 차단된다.</li><li>수동으로 모든 파일 검사도 가능</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git secrets --scan
</span></span></code></pre></td></tr></table></div></div><p>특정 파일 또는 경로 검사</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-25-1><a class=lnlinks href=#hl-25-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git secrets --scan -r some_folder/
</span></span></code></pre></td></tr></table></div></div></li><li><p>CI/CD 에서 사용하기<br>CI 파이프라인 (예: GitHub Actions, Jenkins 등) 에서 <code>git secrets --scan</code> 명령을 통한 자동화 검증 가능</p></li></ol><h4 id=도구-비교-요약>도구 비교 요약<a hidden class=anchor aria-hidden=true href=#도구-비교-요약>#</a></h4><table><thead><tr><th>도구</th><th>대표 환경</th><th>주 목적</th><th>장점</th><th>단점</th></tr></thead><tbody><tr><td>pre-commit</td><td>Python, 범용</td><td>코드 스타일, 포맷, 검증 등</td><td>파이썬 생태계와 강력한 연동, 다양한 플러그인</td><td>Node.js 환경에서는 다소 불편</td></tr><tr><td>Husky</td><td>JavaScript</td><td>코드 스타일, 테스트 등</td><td>npm 스크립트와 강력한 통합, 쉽게 커스터마이즈</td><td>Node.js 외 언어에는 부적합</td></tr><tr><td>Lefthook</td><td>Any-language</td><td>멀티플랫폼, 대규모, 병렬</td><td>빠름, 대규모/모노레포에 강함, 범용성</td><td>비교적 생소, 작은 규모엔 과함</td></tr><tr><td>git-secrets</td><td>범용 (Bash)</td><td>시크릿 (비밀번호 등) 검출</td><td>민감정보 유출 방지, 단일 목적에 충실</td><td>lint/format/test 등 기타 기능 없음</td></tr></tbody></table><h4 id=ci-환경>CI 환경<a hidden class=anchor aria-hidden=true href=#ci-환경>#</a></h4><p>GitHub Actions 의 <code>.github/workflows</code> 디렉토리에서 <strong>Git Hooks 와 통합된 자동화 예제</strong>.</p><p><strong>목적</strong></p><ul><li>로컬 개발자는 <code>pre-commit</code> Git Hook 으로 코드 스타일과 테스트를 체크</li><li>GitHub Actions 에서는 <strong>PR 이나 push 시</strong> 동일한 검사를 자동 수행</li></ul><p><strong>디렉토리 구조 예시</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1>1</a>
</span><span class=lnt id=hl-26-2><a class=lnlinks href=#hl-26-2>2</a>
</span><span class=lnt id=hl-26-3><a class=lnlinks href=#hl-26-3>3</a>
</span><span class=lnt id=hl-26-4><a class=lnlinks href=#hl-26-4>4</a>
</span><span class=lnt id=hl-26-5><a class=lnlinks href=#hl-26-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>├── .pre-commit-config.yaml
</span></span><span class=line><span class=cl>└── .github
</span></span><span class=line><span class=cl>    └── workflows
</span></span><span class=line><span class=cl>        └── pre-commit.yml
</span></span></code></pre></td></tr></table></div></div><p><strong><code>.pre-commit-config.yaml</code> 예시</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-27-1><a class=lnlinks href=#hl-27-1> 1</a>
</span><span class=lnt id=hl-27-2><a class=lnlinks href=#hl-27-2> 2</a>
</span><span class=lnt id=hl-27-3><a class=lnlinks href=#hl-27-3> 3</a>
</span><span class=lnt id=hl-27-4><a class=lnlinks href=#hl-27-4> 4</a>
</span><span class=lnt id=hl-27-5><a class=lnlinks href=#hl-27-5> 5</a>
</span><span class=lnt id=hl-27-6><a class=lnlinks href=#hl-27-6> 6</a>
</span><span class=lnt id=hl-27-7><a class=lnlinks href=#hl-27-7> 7</a>
</span><span class=lnt id=hl-27-8><a class=lnlinks href=#hl-27-8> 8</a>
</span><span class=lnt id=hl-27-9><a class=lnlinks href=#hl-27-9> 9</a>
</span><span class=lnt id=hl-27-10><a class=lnlinks href=#hl-27-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>repos</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/pre-commit/pre-commit-hooks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=l>v4.5.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>trailing-whitespace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>end-of-file-fixer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/psf/black</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=m>24.3.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>black</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong><code>.github/workflows/pre-commit.yml</code> 예시</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-28-1><a class=lnlinks href=#hl-28-1> 1</a>
</span><span class=lnt id=hl-28-2><a class=lnlinks href=#hl-28-2> 2</a>
</span><span class=lnt id=hl-28-3><a class=lnlinks href=#hl-28-3> 3</a>
</span><span class=lnt id=hl-28-4><a class=lnlinks href=#hl-28-4> 4</a>
</span><span class=lnt id=hl-28-5><a class=lnlinks href=#hl-28-5> 5</a>
</span><span class=lnt id=hl-28-6><a class=lnlinks href=#hl-28-6> 6</a>
</span><span class=lnt id=hl-28-7><a class=lnlinks href=#hl-28-7> 7</a>
</span><span class=lnt id=hl-28-8><a class=lnlinks href=#hl-28-8> 8</a>
</span><span class=lnt id=hl-28-9><a class=lnlinks href=#hl-28-9> 9</a>
</span><span class=lnt id=hl-28-10><a class=lnlinks href=#hl-28-10>10</a>
</span><span class=lnt id=hl-28-11><a class=lnlinks href=#hl-28-11>11</a>
</span><span class=lnt id=hl-28-12><a class=lnlinks href=#hl-28-12>12</a>
</span><span class=lnt id=hl-28-13><a class=lnlinks href=#hl-28-13>13</a>
</span><span class=lnt id=hl-28-14><a class=lnlinks href=#hl-28-14>14</a>
</span><span class=lnt id=hl-28-15><a class=lnlinks href=#hl-28-15>15</a>
</span><span class=lnt id=hl-28-16><a class=lnlinks href=#hl-28-16>16</a>
</span><span class=lnt id=hl-28-17><a class=lnlinks href=#hl-28-17>17</a>
</span><span class=lnt id=hl-28-18><a class=lnlinks href=#hl-28-18>18</a>
</span><span class=lnt id=hl-28-19><a class=lnlinks href=#hl-28-19>19</a>
</span><span class=lnt id=hl-28-20><a class=lnlinks href=#hl-28-20>20</a>
</span><span class=lnt id=hl-28-21><a class=lnlinks href=#hl-28-21>21</a>
</span><span class=lnt id=hl-28-22><a class=lnlinks href=#hl-28-22>22</a>
</span><span class=lnt id=hl-28-23><a class=lnlinks href=#hl-28-23>23</a>
</span><span class=lnt id=hl-28-24><a class=lnlinks href=#hl-28-24>24</a>
</span><span class=lnt id=hl-28-25><a class=lnlinks href=#hl-28-25>25</a>
</span><span class=lnt id=hl-28-26><a class=lnlinks href=#hl-28-26>26</a>
</span><span class=lnt id=hl-28-27><a class=lnlinks href=#hl-28-27>27</a>
</span><span class=lnt id=hl-28-28><a class=lnlinks href=#hl-28-28>28</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pre-commit checks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pull_request</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>main, develop]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>lint-and-format</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Run pre-commit hooks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout code</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Set up Python</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-python@v5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>python-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3.11&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Install dependencies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          python -m pip install --upgrade pip
</span></span></span><span class=line><span class=cl><span class=sd>          pip install pre-commit</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Run pre-commit hooks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>pre-commit run --all-files</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>주요 구성 해설</p><table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><code>on</code></td><td><code>push</code>, <code>pull_request</code> 이벤트 발생 시 실행</td></tr><tr><td><code>runs-on</code></td><td>GitHub 의 Ubuntu 러너 사용</td></tr><tr><td><code>setup-python</code></td><td>Python 기반의 pre-commit 도구 환경 구성</td></tr><tr><td><code>pre-commit run --all-files</code></td><td>전체 파일 대상 Hook 실행</td></tr></tbody></table><h5 id=-실무-팁>📌 실무 팁<a hidden class=anchor aria-hidden=true href=#-실무-팁>#</a></h5><table><thead><tr><th>항목</th><th>내용</th></tr></thead><tbody><tr><td>공유 유지</td><td><code>.pre-commit-config.yaml</code> 은 버전 관리되므로, 팀 전체에 공통 정책 적용 가능</td></tr><tr><td>재현성 확보</td><td>GitHub Actions 에서도 동일한 Hook 실행 → CI 와 로컬의 결과 불일치 최소화</td></tr><tr><td>병렬 실행 고려</td><td>복잡한 작업은 <code>pre-commit</code> 에서 <code>parallel: true</code> 설정 지원</td></tr></tbody></table><h3 id=활용-예시-및-다이어그램>활용 예시 및 다이어그램<a hidden class=anchor aria-hidden=true href=#활용-예시-및-다이어그램>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-29-1><a class=lnlinks href=#hl-29-1>1</a>
</span><span class=lnt id=hl-29-2><a class=lnlinks href=#hl-29-2>2</a>
</span><span class=lnt id=hl-29-3><a class=lnlinks href=#hl-29-3>3</a>
</span><span class=lnt id=hl-29-4><a class=lnlinks href=#hl-29-4>4</a>
</span><span class=lnt id=hl-29-5><a class=lnlinks href=#hl-29-5>5</a>
</span><span class=lnt id=hl-29-6><a class=lnlinks href=#hl-29-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[개발자 로컬]
</span></span><span class=line><span class=cl>pre-commit → 린트/테스트 → 실패 시 커밋 차단
</span></span><span class=line><span class=cl>           ↘ 성공 시 커밋 완료 → 원격 저장소 푸시
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[서버]
</span></span><span class=line><span class=cl>pre-receive → 코드 검증 → 승인 시 배포 파이프라인 실행
</span></span></code></pre></td></tr></table></div></div><h4 id=활용-예시-린트--테스트>활용 예시: 린트 / 테스트<a hidden class=anchor aria-hidden=true href=#활용-예시-린트--테스트>#</a></h4><ul><li><strong>상황:</strong> 팀에서 코드 품질을 유지하기 위해 커밋 전 린트와 테스트를 자동 실행하고, 실패 시 커밋을 막고 싶다.</li></ul><pre class=mermaid>sequenceDiagram
participant 개발자
participant Git
participant 훅 스크립트

개발자-&gt;&gt;Git: git commit 실행
Git-&gt;&gt;훅 스크립트: pre-commit 훅 실행
훅 스크립트-&gt;&gt;Git: 린트/테스트 결과 반환
alt 성공
    Git-&gt;&gt;개발자: 커밋 성공
else 실패
    Git-&gt;&gt;개발자: 커밋 차단, 오류 메시지 출력
end
</pre><h4 id=활용-예시-지속적-통합-파이프라인-구축>활용 예시: 지속적 통합 파이프라인 구축<a hidden class=anchor aria-hidden=true href=#활용-예시-지속적-통합-파이프라인-구축>#</a></h4><p><strong>시나리오</strong>: 개발자가 새로운 기능을 개발하고 이를 팀의 저장소에 통합하는 과정</p><ol><li>개발자가 로컬에서 코드 작성</li><li>커밋 시도 → <code>pre-commit</code> 훅 실행 (코드 린팅, 포맷팅)</li><li>커밋 메시지 작성 → <code>commit-msg</code> 훅 실행 (커밋 메시지 형식 검증)</li><li>원격 저장소 푸시 시도 → <code>pre-push</code> 훅 실행 (단위 테스트 실행)</li><li>푸시 데이터 서버 도착 → <code>pre-receive</code> 훅 실행 (브랜치 권한 검사)</li><li>브랜치 업데이트 → <code>update</code> 훅 실행 (특정 파일 변경 검증)</li><li>모든 검증 완료 → <code>post-receive</code> 훅 실행 (CI 시스템 트리거)</li><li>CI 시스템에서 통합 테스트, 보안 검사 실행</li><li>모든 검증 통과 시 자동 배포 진행</li></ol><h3 id=실무-활용-시나리오>실무 활용 시나리오<a hidden class=anchor aria-hidden=true href=#실무-활용-시나리오>#</a></h3><h4 id=코드-품질-관리-code-quality-management>코드 품질 관리 (Code Quality Management)<a hidden class=anchor aria-hidden=true href=#코드-품질-관리-code-quality-management>#</a></h4><p>개발팀에서는 코드의 일관성과 품질을 유지하기 위해 코드 포맷팅, 린팅, 테스트 등을 자동화하고 싶다.<br>이를 위해 pre-commit hook 을 사용하여 커밋 전에 코드 검사를 자동으로 수행한다.</p><h5 id=pre-commit-설정-예시>Pre-commit 설정 예시<a hidden class=anchor aria-hidden=true href=#pre-commit-설정-예시>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-31-1><a class=lnlinks href=#hl-31-1> 1</a>
</span><span class=lnt id=hl-31-2><a class=lnlinks href=#hl-31-2> 2</a>
</span><span class=lnt id=hl-31-3><a class=lnlinks href=#hl-31-3> 3</a>
</span><span class=lnt id=hl-31-4><a class=lnlinks href=#hl-31-4> 4</a>
</span><span class=lnt id=hl-31-5><a class=lnlinks href=#hl-31-5> 5</a>
</span><span class=lnt id=hl-31-6><a class=lnlinks href=#hl-31-6> 6</a>
</span><span class=lnt id=hl-31-7><a class=lnlinks href=#hl-31-7> 7</a>
</span><span class=lnt id=hl-31-8><a class=lnlinks href=#hl-31-8> 8</a>
</span><span class=lnt id=hl-31-9><a class=lnlinks href=#hl-31-9> 9</a>
</span><span class=lnt id=hl-31-10><a class=lnlinks href=#hl-31-10>10</a>
</span><span class=lnt id=hl-31-11><a class=lnlinks href=#hl-31-11>11</a>
</span><span class=lnt id=hl-31-12><a class=lnlinks href=#hl-31-12>12</a>
</span><span class=lnt id=hl-31-13><a class=lnlinks href=#hl-31-13>13</a>
</span><span class=lnt id=hl-31-14><a class=lnlinks href=#hl-31-14>14</a>
</span><span class=lnt id=hl-31-15><a class=lnlinks href=#hl-31-15>15</a>
</span><span class=lnt id=hl-31-16><a class=lnlinks href=#hl-31-16>16</a>
</span><span class=lnt id=hl-31-17><a class=lnlinks href=#hl-31-17>17</a>
</span><span class=lnt id=hl-31-18><a class=lnlinks href=#hl-31-18>18</a>
</span><span class=lnt id=hl-31-19><a class=lnlinks href=#hl-31-19>19</a>
</span><span class=lnt id=hl-31-20><a class=lnlinks href=#hl-31-20>20</a>
</span><span class=lnt id=hl-31-21><a class=lnlinks href=#hl-31-21>21</a>
</span><span class=lnt id=hl-31-22><a class=lnlinks href=#hl-31-22>22</a>
</span><span class=lnt id=hl-31-23><a class=lnlinks href=#hl-31-23>23</a>
</span><span class=lnt id=hl-31-24><a class=lnlinks href=#hl-31-24>24</a>
</span><span class=lnt id=hl-31-25><a class=lnlinks href=#hl-31-25>25</a>
</span><span class=lnt id=hl-31-26><a class=lnlinks href=#hl-31-26>26</a>
</span><span class=lnt id=hl-31-27><a class=lnlinks href=#hl-31-27>27</a>
</span><span class=lnt id=hl-31-28><a class=lnlinks href=#hl-31-28>28</a>
</span><span class=lnt id=hl-31-29><a class=lnlinks href=#hl-31-29>29</a>
</span><span class=lnt id=hl-31-30><a class=lnlinks href=#hl-31-30>30</a>
</span><span class=lnt id=hl-31-31><a class=lnlinks href=#hl-31-31>31</a>
</span><span class=lnt id=hl-31-32><a class=lnlinks href=#hl-31-32>32</a>
</span><span class=lnt id=hl-31-33><a class=lnlinks href=#hl-31-33>33</a>
</span><span class=lnt id=hl-31-34><a class=lnlinks href=#hl-31-34>34</a>
</span><span class=lnt id=hl-31-35><a class=lnlinks href=#hl-31-35>35</a>
</span><span class=lnt id=hl-31-36><a class=lnlinks href=#hl-31-36>36</a>
</span><span class=lnt id=hl-31-37><a class=lnlinks href=#hl-31-37>37</a>
</span><span class=lnt id=hl-31-38><a class=lnlinks href=#hl-31-38>38</a>
</span><span class=lnt id=hl-31-39><a class=lnlinks href=#hl-31-39>39</a>
</span><span class=lnt id=hl-31-40><a class=lnlinks href=#hl-31-40>40</a>
</span><span class=lnt id=hl-31-41><a class=lnlinks href=#hl-31-41>41</a>
</span><span class=lnt id=hl-31-42><a class=lnlinks href=#hl-31-42>42</a>
</span><span class=lnt id=hl-31-43><a class=lnlinks href=#hl-31-43>43</a>
</span><span class=lnt id=hl-31-44><a class=lnlinks href=#hl-31-44>44</a>
</span><span class=lnt id=hl-31-45><a class=lnlinks href=#hl-31-45>45</a>
</span><span class=lnt id=hl-31-46><a class=lnlinks href=#hl-31-46>46</a>
</span><span class=lnt id=hl-31-47><a class=lnlinks href=#hl-31-47>47</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># .pre-commit-config.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>repos</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 1. Black: 코드 포맷 자동화 (PEP8 기준으로 포맷팅)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/psf/black</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=m>24.3.0</span><span class=w>      </span><span class=c># 사용할 Black의 버전. 최신 버전 참고</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>black</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>language_version</span><span class=p>:</span><span class=w> </span><span class=l>python3.10 </span><span class=w> </span><span class=c># 프로젝트에 맞는 파이썬 버전 선언</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 2. Flake8: 코드 스타일&amp;에러 정적분석</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/pycqa/flake8</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=m>7.0.0</span><span class=w>        </span><span class=c># 사용할 Flake8의 버전</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>flake8</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>additional_dependencies</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>flake8-bugbear]</span><span class=w> </span><span class=c># flake8 보완 플러그인 추가</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 3. isort: import문 정렬</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/pre-commit/mirrors-isort</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=l>v5.13.2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>isort</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 4. debug-statements: print, pdb 등 디버깅 코드 커밋 방지</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/pre-commit/pre-commit-hooks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=l>v4.6.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>debug-statements</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 5. detect-secrets: 시크릿(비밀번호, 토큰 등) 커밋 방지</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/Yelp/detect-secrets</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=l>v1.4.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>detect-secrets</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># 추가 설정은 필요에 따라 detect-secrets 설정 파일 이용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 6. check-yaml: yaml파일 문법 오류 검증</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/pre-commit/pre-commit-hooks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=l>v4.6.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>check-yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 7. end-of-file-fixer: 파일 끝에 빈 줄 삽입 보장</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/pre-commit/pre-commit-hooks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=l>v4.6.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>end-of-file-fixer</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-32-1><a class=lnlinks href=#hl-32-1>1</a>
</span><span class=lnt id=hl-32-2><a class=lnlinks href=#hl-32-2>2</a>
</span><span class=lnt id=hl-32-3><a class=lnlinks href=#hl-32-3>3</a>
</span><span class=lnt id=hl-32-4><a class=lnlinks href=#hl-32-4>4</a>
</span><span class=lnt id=hl-32-5><a class=lnlinks href=#hl-32-5>5</a>
</span><span class=lnt id=hl-32-6><a class=lnlinks href=#hl-32-6>6</a>
</span><span class=lnt id=hl-32-7><a class=lnlinks href=#hl-32-7>7</a>
</span><span class=lnt id=hl-32-8><a class=lnlinks href=#hl-32-8>8</a>
</span><span class=lnt id=hl-32-9><a class=lnlinks href=#hl-32-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>repos</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/charliermarsh/ruff-pre-commit</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=l>v0.4.4 </span><span class=w> </span><span class=c># 사용하려는 Ruff 버전의 최신 태그로 맞추세요</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>ruff</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>args</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;.&#34;</span><span class=p>]</span><span class=w>  </span><span class=c># 현재 디렉토리 전체에 적용, 필요시 경로/옵션 조정</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>additional_dependencies</span><span class=p>:</span><span class=w> </span><span class=p>[]</span><span class=w>   </span><span class=c># 플러그인 쓸 땐 여기에 패키지 추가</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>ruff-format</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>args</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;.&#34;</span><span class=p>]</span><span class=w>  </span><span class=c># 코드 포매팅도 동시에 적용하려면 추가</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h5 id=커스텀-python-스크립트-예시-pre-commit-hook>커스텀 Python 스크립트 예시 (pre-commit hook)<a hidden class=anchor aria-hidden=true href=#커스텀-python-스크립트-예시-pre-commit-hook>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-33-1><a class=lnlinks href=#hl-33-1> 1</a>
</span><span class=lnt id=hl-33-2><a class=lnlinks href=#hl-33-2> 2</a>
</span><span class=lnt id=hl-33-3><a class=lnlinks href=#hl-33-3> 3</a>
</span><span class=lnt id=hl-33-4><a class=lnlinks href=#hl-33-4> 4</a>
</span><span class=lnt id=hl-33-5><a class=lnlinks href=#hl-33-5> 5</a>
</span><span class=lnt id=hl-33-6><a class=lnlinks href=#hl-33-6> 6</a>
</span><span class=lnt id=hl-33-7><a class=lnlinks href=#hl-33-7> 7</a>
</span><span class=lnt id=hl-33-8><a class=lnlinks href=#hl-33-8> 8</a>
</span><span class=lnt id=hl-33-9><a class=lnlinks href=#hl-33-9> 9</a>
</span><span class=lnt id=hl-33-10><a class=lnlinks href=#hl-33-10>10</a>
</span><span class=lnt id=hl-33-11><a class=lnlinks href=#hl-33-11>11</a>
</span><span class=lnt id=hl-33-12><a class=lnlinks href=#hl-33-12>12</a>
</span><span class=lnt id=hl-33-13><a class=lnlinks href=#hl-33-13>13</a>
</span><span class=lnt id=hl-33-14><a class=lnlinks href=#hl-33-14>14</a>
</span><span class=lnt id=hl-33-15><a class=lnlinks href=#hl-33-15>15</a>
</span><span class=lnt id=hl-33-16><a class=lnlinks href=#hl-33-16>16</a>
</span><span class=lnt id=hl-33-17><a class=lnlinks href=#hl-33-17>17</a>
</span><span class=lnt id=hl-33-18><a class=lnlinks href=#hl-33-18>18</a>
</span><span class=lnt id=hl-33-19><a class=lnlinks href=#hl-33-19>19</a>
</span><span class=lnt id=hl-33-20><a class=lnlinks href=#hl-33-20>20</a>
</span><span class=lnt id=hl-33-21><a class=lnlinks href=#hl-33-21>21</a>
</span><span class=lnt id=hl-33-22><a class=lnlinks href=#hl-33-22>22</a>
</span><span class=lnt id=hl-33-23><a class=lnlinks href=#hl-33-23>23</a>
</span><span class=lnt id=hl-33-24><a class=lnlinks href=#hl-33-24>24</a>
</span><span class=lnt id=hl-33-25><a class=lnlinks href=#hl-33-25>25</a>
</span><span class=lnt id=hl-33-26><a class=lnlinks href=#hl-33-26>26</a>
</span><span class=lnt id=hl-33-27><a class=lnlinks href=#hl-33-27>27</a>
</span><span class=lnt id=hl-33-28><a class=lnlinks href=#hl-33-28>28</a>
</span><span class=lnt id=hl-33-29><a class=lnlinks href=#hl-33-29>29</a>
</span><span class=lnt id=hl-33-30><a class=lnlinks href=#hl-33-30>30</a>
</span><span class=lnt id=hl-33-31><a class=lnlinks href=#hl-33-31>31</a>
</span><span class=lnt id=hl-33-32><a class=lnlinks href=#hl-33-32>32</a>
</span><span class=lnt id=hl-33-33><a class=lnlinks href=#hl-33-33>33</a>
</span><span class=lnt id=hl-33-34><a class=lnlinks href=#hl-33-34>34</a>
</span><span class=lnt id=hl-33-35><a class=lnlinks href=#hl-33-35>35</a>
</span><span class=lnt id=hl-33-36><a class=lnlinks href=#hl-33-36>36</a>
</span><span class=lnt id=hl-33-37><a class=lnlinks href=#hl-33-37>37</a>
</span><span class=lnt id=hl-33-38><a class=lnlinks href=#hl-33-38>38</a>
</span><span class=lnt id=hl-33-39><a class=lnlinks href=#hl-33-39>39</a>
</span><span class=lnt id=hl-33-40><a class=lnlinks href=#hl-33-40>40</a>
</span><span class=lnt id=hl-33-41><a class=lnlinks href=#hl-33-41>41</a>
</span><span class=lnt id=hl-33-42><a class=lnlinks href=#hl-33-42>42</a>
</span><span class=lnt id=hl-33-43><a class=lnlinks href=#hl-33-43>43</a>
</span><span class=lnt id=hl-33-44><a class=lnlinks href=#hl-33-44>44</a>
</span><span class=lnt id=hl-33-45><a class=lnlinks href=#hl-33-45>45</a>
</span><span class=lnt id=hl-33-46><a class=lnlinks href=#hl-33-46>46</a>
</span><span class=lnt id=hl-33-47><a class=lnlinks href=#hl-33-47>47</a>
</span><span class=lnt id=hl-33-48><a class=lnlinks href=#hl-33-48>48</a>
</span><span class=lnt id=hl-33-49><a class=lnlinks href=#hl-33-49>49</a>
</span><span class=lnt id=hl-33-50><a class=lnlinks href=#hl-33-50>50</a>
</span><span class=lnt id=hl-33-51><a class=lnlinks href=#hl-33-51>51</a>
</span><span class=lnt id=hl-33-52><a class=lnlinks href=#hl-33-52>52</a>
</span><span class=lnt id=hl-33-53><a class=lnlinks href=#hl-33-53>53</a>
</span><span class=lnt id=hl-33-54><a class=lnlinks href=#hl-33-54>54</a>
</span><span class=lnt id=hl-33-55><a class=lnlinks href=#hl-33-55>55</a>
</span><span class=lnt id=hl-33-56><a class=lnlinks href=#hl-33-56>56</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python3</span>
</span></span><span class=line><span class=cl><span class=c1># .git/hooks/pre-commit (chmod +x 필요)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>subprocess</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;커밋 전에 코드 품질 검사를 수행합니다.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;코드 품질 검사를 시작합니다...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 변경된 Python 파일 찾기</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=s1>&#39;git&#39;</span><span class=p>,</span> <span class=s1>&#39;diff&#39;</span><span class=p>,</span> <span class=s1>&#39;--cached&#39;</span><span class=p>,</span> <span class=s1>&#39;--name-only&#39;</span><span class=p>,</span> <span class=s1>&#39;--diff-filter=ACM&#39;</span><span class=p>,</span> <span class=s1>&#39;*.py&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;변경된 Python 파일이 없습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>files</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>files</span><span class=p>)</span><span class=si>}</span><span class=s2>개의 Python 파일이 변경되었습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Black으로 코드 포맷팅 검사</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;코드 포맷팅 검사 중...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>format_check</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>([</span><span class=s1>&#39;black&#39;</span><span class=p>,</span> <span class=s1>&#39;--check&#39;</span><span class=p>]</span> <span class=o>+</span> <span class=n>files</span><span class=p>,</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>format_check</span><span class=o>.</span><span class=n>returncode</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;코드 포맷팅 문제가 발견되었습니다. 자동으로 수정합니다...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>([</span><span class=s1>&#39;black&#39;</span><span class=p>]</span> <span class=o>+</span> <span class=n>files</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;코드가 재포맷되었습니다. 변경사항을 다시 스테이징해주세요.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Flake8으로 린팅</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;린팅 검사 중...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>lint_result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>([</span><span class=s1>&#39;flake8&#39;</span><span class=p>]</span> <span class=o>+</span> <span class=n>files</span><span class=p>,</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>lint_result</span><span class=o>.</span><span class=n>returncode</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;린팅 문제가 발견되었습니다:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=n>lint_result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 테스트 실행</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;단위 테스트 실행 중...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>test_result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>([</span><span class=s1>&#39;pytest&#39;</span><span class=p>],</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>test_result</span><span class=o>.</span><span class=n>returncode</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;테스트 실패:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=n>test_result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;모든 검사가 통과되었습니다!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=버전-관리-및-릴리스-자동화>버전 관리 및 릴리스 자동화<a hidden class=anchor aria-hidden=true href=#버전-관리-및-릴리스-자동화>#</a></h4><p>개발팀은 버전 관리와 릴리스 프로세스를 자동화하기 위해 Git hook 을 사용한다. <code>commit-msg hook</code> 을 사용하여 커밋 메시지 형식을 검증하고, <code>post-commit hook</code> 을 사용하여 자동으로 버전 번호를 업데이트한다.</p><h5 id=pre-commit-설정-예시-1>Pre-commit 설정 예시<a hidden class=anchor aria-hidden=true href=#pre-commit-설정-예시-1>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-34-1><a class=lnlinks href=#hl-34-1> 1</a>
</span><span class=lnt id=hl-34-2><a class=lnlinks href=#hl-34-2> 2</a>
</span><span class=lnt id=hl-34-3><a class=lnlinks href=#hl-34-3> 3</a>
</span><span class=lnt id=hl-34-4><a class=lnlinks href=#hl-34-4> 4</a>
</span><span class=lnt id=hl-34-5><a class=lnlinks href=#hl-34-5> 5</a>
</span><span class=lnt id=hl-34-6><a class=lnlinks href=#hl-34-6> 6</a>
</span><span class=lnt id=hl-34-7><a class=lnlinks href=#hl-34-7> 7</a>
</span><span class=lnt id=hl-34-8><a class=lnlinks href=#hl-34-8> 8</a>
</span><span class=lnt id=hl-34-9><a class=lnlinks href=#hl-34-9> 9</a>
</span><span class=lnt id=hl-34-10><a class=lnlinks href=#hl-34-10>10</a>
</span><span class=lnt id=hl-34-11><a class=lnlinks href=#hl-34-11>11</a>
</span><span class=lnt id=hl-34-12><a class=lnlinks href=#hl-34-12>12</a>
</span><span class=lnt id=hl-34-13><a class=lnlinks href=#hl-34-13>13</a>
</span><span class=lnt id=hl-34-14><a class=lnlinks href=#hl-34-14>14</a>
</span><span class=lnt id=hl-34-15><a class=lnlinks href=#hl-34-15>15</a>
</span><span class=lnt id=hl-34-16><a class=lnlinks href=#hl-34-16>16</a>
</span><span class=lnt id=hl-34-17><a class=lnlinks href=#hl-34-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># .pre-commit-config.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>repos</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=w>  </span><span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/commitizen-tools/commitizen</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=l>v2.42.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=w>  </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>commitizen</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>stages</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>commit-msg]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=w>  </span><span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>local</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=w>  </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>version-bump</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>version-bump</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>entry</span><span class=p>:</span><span class=w> </span><span class=l>python scripts/version_bump.py</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>language</span><span class=p>:</span><span class=w> </span><span class=l>python</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>pass_filenames</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>stages</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>post-commit]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>always_run</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h5 id=커밋-메시지-검증-스크립트-commit-msg-hook>커밋 메시지 검증 스크립트 (commit-msg hook)<a hidden class=anchor aria-hidden=true href=#커밋-메시지-검증-스크립트-commit-msg-hook>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-35-1><a class=lnlinks href=#hl-35-1> 1</a>
</span><span class=lnt id=hl-35-2><a class=lnlinks href=#hl-35-2> 2</a>
</span><span class=lnt id=hl-35-3><a class=lnlinks href=#hl-35-3> 3</a>
</span><span class=lnt id=hl-35-4><a class=lnlinks href=#hl-35-4> 4</a>
</span><span class=lnt id=hl-35-5><a class=lnlinks href=#hl-35-5> 5</a>
</span><span class=lnt id=hl-35-6><a class=lnlinks href=#hl-35-6> 6</a>
</span><span class=lnt id=hl-35-7><a class=lnlinks href=#hl-35-7> 7</a>
</span><span class=lnt id=hl-35-8><a class=lnlinks href=#hl-35-8> 8</a>
</span><span class=lnt id=hl-35-9><a class=lnlinks href=#hl-35-9> 9</a>
</span><span class=lnt id=hl-35-10><a class=lnlinks href=#hl-35-10>10</a>
</span><span class=lnt id=hl-35-11><a class=lnlinks href=#hl-35-11>11</a>
</span><span class=lnt id=hl-35-12><a class=lnlinks href=#hl-35-12>12</a>
</span><span class=lnt id=hl-35-13><a class=lnlinks href=#hl-35-13>13</a>
</span><span class=lnt id=hl-35-14><a class=lnlinks href=#hl-35-14>14</a>
</span><span class=lnt id=hl-35-15><a class=lnlinks href=#hl-35-15>15</a>
</span><span class=lnt id=hl-35-16><a class=lnlinks href=#hl-35-16>16</a>
</span><span class=lnt id=hl-35-17><a class=lnlinks href=#hl-35-17>17</a>
</span><span class=lnt id=hl-35-18><a class=lnlinks href=#hl-35-18>18</a>
</span><span class=lnt id=hl-35-19><a class=lnlinks href=#hl-35-19>19</a>
</span><span class=lnt id=hl-35-20><a class=lnlinks href=#hl-35-20>20</a>
</span><span class=lnt id=hl-35-21><a class=lnlinks href=#hl-35-21>21</a>
</span><span class=lnt id=hl-35-22><a class=lnlinks href=#hl-35-22>22</a>
</span><span class=lnt id=hl-35-23><a class=lnlinks href=#hl-35-23>23</a>
</span><span class=lnt id=hl-35-24><a class=lnlinks href=#hl-35-24>24</a>
</span><span class=lnt id=hl-35-25><a class=lnlinks href=#hl-35-25>25</a>
</span><span class=lnt id=hl-35-26><a class=lnlinks href=#hl-35-26>26</a>
</span><span class=lnt id=hl-35-27><a class=lnlinks href=#hl-35-27>27</a>
</span><span class=lnt id=hl-35-28><a class=lnlinks href=#hl-35-28>28</a>
</span><span class=lnt id=hl-35-29><a class=lnlinks href=#hl-35-29>29</a>
</span><span class=lnt id=hl-35-30><a class=lnlinks href=#hl-35-30>30</a>
</span><span class=lnt id=hl-35-31><a class=lnlinks href=#hl-35-31>31</a>
</span><span class=lnt id=hl-35-32><a class=lnlinks href=#hl-35-32>32</a>
</span><span class=lnt id=hl-35-33><a class=lnlinks href=#hl-35-33>33</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python3</span>
</span></span><span class=line><span class=cl><span class=c1># scripts/validate_commit_message.py</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>validate_commit_message</span><span class=p>(</span><span class=n>commit_msg_file</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    커밋 메시지가 Conventional Commits 형식을 따르는지 검증합니다.
</span></span></span><span class=line><span class=cl><span class=s2>    형식: &lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    예: feat(user): 사용자 인증 기능 추가
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>commit_msg_file</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>commit_msg</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>()</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Conventional Commits 패턴</span>
</span></span><span class=line><span class=cl>    <span class=n>pattern</span> <span class=o>=</span> <span class=sa>r</span><span class=s1>&#39;^(feat|fix|docs|style|refactor|perf|test|chore|ci|build|revert)(\([a-z0-9-]+\))?: .+&#39;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>pattern</span><span class=p>,</span> <span class=n>commit_msg</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;오류: 커밋 메시지가 Conventional Commits 형식에 맞지 않습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;예시: feat(user): 사용자 인증 기능 추가&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;유효한 유형: feat, fix, docs, style, refactor, perf, test, chore, ci, build, revert&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>)</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;커밋 메시지 파일 경로를 지정해주세요.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=n>validate_commit_message</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>[</span><span class=mi>1</span><span class=p>]))</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=버전-업데이트-스크립트-post-commit-hook>버전 업데이트 스크립트 (post-commit hook)<a hidden class=anchor aria-hidden=true href=#버전-업데이트-스크립트-post-commit-hook>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-36-1><a class=lnlinks href=#hl-36-1> 1</a>
</span><span class=lnt id=hl-36-2><a class=lnlinks href=#hl-36-2> 2</a>
</span><span class=lnt id=hl-36-3><a class=lnlinks href=#hl-36-3> 3</a>
</span><span class=lnt id=hl-36-4><a class=lnlinks href=#hl-36-4> 4</a>
</span><span class=lnt id=hl-36-5><a class=lnlinks href=#hl-36-5> 5</a>
</span><span class=lnt id=hl-36-6><a class=lnlinks href=#hl-36-6> 6</a>
</span><span class=lnt id=hl-36-7><a class=lnlinks href=#hl-36-7> 7</a>
</span><span class=lnt id=hl-36-8><a class=lnlinks href=#hl-36-8> 8</a>
</span><span class=lnt id=hl-36-9><a class=lnlinks href=#hl-36-9> 9</a>
</span><span class=lnt id=hl-36-10><a class=lnlinks href=#hl-36-10>10</a>
</span><span class=lnt id=hl-36-11><a class=lnlinks href=#hl-36-11>11</a>
</span><span class=lnt id=hl-36-12><a class=lnlinks href=#hl-36-12>12</a>
</span><span class=lnt id=hl-36-13><a class=lnlinks href=#hl-36-13>13</a>
</span><span class=lnt id=hl-36-14><a class=lnlinks href=#hl-36-14>14</a>
</span><span class=lnt id=hl-36-15><a class=lnlinks href=#hl-36-15>15</a>
</span><span class=lnt id=hl-36-16><a class=lnlinks href=#hl-36-16>16</a>
</span><span class=lnt id=hl-36-17><a class=lnlinks href=#hl-36-17>17</a>
</span><span class=lnt id=hl-36-18><a class=lnlinks href=#hl-36-18>18</a>
</span><span class=lnt id=hl-36-19><a class=lnlinks href=#hl-36-19>19</a>
</span><span class=lnt id=hl-36-20><a class=lnlinks href=#hl-36-20>20</a>
</span><span class=lnt id=hl-36-21><a class=lnlinks href=#hl-36-21>21</a>
</span><span class=lnt id=hl-36-22><a class=lnlinks href=#hl-36-22>22</a>
</span><span class=lnt id=hl-36-23><a class=lnlinks href=#hl-36-23>23</a>
</span><span class=lnt id=hl-36-24><a class=lnlinks href=#hl-36-24>24</a>
</span><span class=lnt id=hl-36-25><a class=lnlinks href=#hl-36-25>25</a>
</span><span class=lnt id=hl-36-26><a class=lnlinks href=#hl-36-26>26</a>
</span><span class=lnt id=hl-36-27><a class=lnlinks href=#hl-36-27>27</a>
</span><span class=lnt id=hl-36-28><a class=lnlinks href=#hl-36-28>28</a>
</span><span class=lnt id=hl-36-29><a class=lnlinks href=#hl-36-29>29</a>
</span><span class=lnt id=hl-36-30><a class=lnlinks href=#hl-36-30>30</a>
</span><span class=lnt id=hl-36-31><a class=lnlinks href=#hl-36-31>31</a>
</span><span class=lnt id=hl-36-32><a class=lnlinks href=#hl-36-32>32</a>
</span><span class=lnt id=hl-36-33><a class=lnlinks href=#hl-36-33>33</a>
</span><span class=lnt id=hl-36-34><a class=lnlinks href=#hl-36-34>34</a>
</span><span class=lnt id=hl-36-35><a class=lnlinks href=#hl-36-35>35</a>
</span><span class=lnt id=hl-36-36><a class=lnlinks href=#hl-36-36>36</a>
</span><span class=lnt id=hl-36-37><a class=lnlinks href=#hl-36-37>37</a>
</span><span class=lnt id=hl-36-38><a class=lnlinks href=#hl-36-38>38</a>
</span><span class=lnt id=hl-36-39><a class=lnlinks href=#hl-36-39>39</a>
</span><span class=lnt id=hl-36-40><a class=lnlinks href=#hl-36-40>40</a>
</span><span class=lnt id=hl-36-41><a class=lnlinks href=#hl-36-41>41</a>
</span><span class=lnt id=hl-36-42><a class=lnlinks href=#hl-36-42>42</a>
</span><span class=lnt id=hl-36-43><a class=lnlinks href=#hl-36-43>43</a>
</span><span class=lnt id=hl-36-44><a class=lnlinks href=#hl-36-44>44</a>
</span><span class=lnt id=hl-36-45><a class=lnlinks href=#hl-36-45>45</a>
</span><span class=lnt id=hl-36-46><a class=lnlinks href=#hl-36-46>46</a>
</span><span class=lnt id=hl-36-47><a class=lnlinks href=#hl-36-47>47</a>
</span><span class=lnt id=hl-36-48><a class=lnlinks href=#hl-36-48>48</a>
</span><span class=lnt id=hl-36-49><a class=lnlinks href=#hl-36-49>49</a>
</span><span class=lnt id=hl-36-50><a class=lnlinks href=#hl-36-50>50</a>
</span><span class=lnt id=hl-36-51><a class=lnlinks href=#hl-36-51>51</a>
</span><span class=lnt id=hl-36-52><a class=lnlinks href=#hl-36-52>52</a>
</span><span class=lnt id=hl-36-53><a class=lnlinks href=#hl-36-53>53</a>
</span><span class=lnt id=hl-36-54><a class=lnlinks href=#hl-36-54>54</a>
</span><span class=lnt id=hl-36-55><a class=lnlinks href=#hl-36-55>55</a>
</span><span class=lnt id=hl-36-56><a class=lnlinks href=#hl-36-56>56</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python3</span>
</span></span><span class=line><span class=cl><span class=c1># scripts/version_bump.py</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>subprocess</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pathlib</span> <span class=kn>import</span> <span class=n>Path</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_last_commit_type</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;마지막 커밋의 유형을 가져옵니다.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=s1>&#39;git&#39;</span><span class=p>,</span> <span class=s1>&#39;log&#39;</span><span class=p>,</span> <span class=s1>&#39;-1&#39;</span><span class=p>,</span> <span class=s1>&#39;--pretty=%B&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>commit_msg</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Conventional Commits 패턴에서 유형 추출</span>
</span></span><span class=line><span class=cl>    <span class=k>match</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;^(feat|fix|docs|style|refactor|perf|test|chore|ci|build|revert)&#39;</span><span class=p>,</span> <span class=n>commit_msg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=k>match</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>match</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>update_version</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;버전 파일을 업데이트합니다.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>version_file</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=s1>&#39;VERSION&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>version_file</span><span class=o>.</span><span class=n>exists</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=n>version_file</span><span class=o>.</span><span class=n>write_text</span><span class=p>(</span><span class=s1>&#39;0.1.0&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;버전 파일이 생성되었습니다: 0.1.0&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 현재 버전 읽기</span>
</span></span><span class=line><span class=cl>    <span class=n>current_version</span> <span class=o>=</span> <span class=n>version_file</span><span class=o>.</span><span class=n>read_text</span><span class=p>()</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>major</span><span class=p>,</span> <span class=n>minor</span><span class=p>,</span> <span class=n>patch</span> <span class=o>=</span> <span class=nb>map</span><span class=p>(</span><span class=nb>int</span><span class=p>,</span> <span class=n>current_version</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;.&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 커밋 유형에 따라 버전 업데이트</span>
</span></span><span class=line><span class=cl>    <span class=n>commit_type</span> <span class=o>=</span> <span class=n>get_last_commit_type</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>commit_type</span> <span class=o>==</span> <span class=s1>&#39;feat&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>minor</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=n>patch</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>commit_type</span> <span class=ow>in</span> <span class=p>(</span><span class=s1>&#39;fix&#39;</span><span class=p>,</span> <span class=s1>&#39;perf&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>patch</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 다른 유형은 버전 변경 없음</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 새 버전 쓰기</span>
</span></span><span class=line><span class=cl>    <span class=n>new_version</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>major</span><span class=si>}</span><span class=s2>.</span><span class=si>{</span><span class=n>minor</span><span class=si>}</span><span class=s2>.</span><span class=si>{</span><span class=n>patch</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>version_file</span><span class=o>.</span><span class=n>write_text</span><span class=p>(</span><span class=n>new_version</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;버전이 업데이트되었습니다: </span><span class=si>{</span><span class=n>current_version</span><span class=si>}</span><span class=s2> -&gt; </span><span class=si>{</span><span class=n>new_version</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 버전 변경사항 커밋</span>
</span></span><span class=line><span class=cl>    <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>([</span><span class=s1>&#39;git&#39;</span><span class=p>,</span> <span class=s1>&#39;add&#39;</span><span class=p>,</span> <span class=s1>&#39;VERSION&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>([</span><span class=s1>&#39;git&#39;</span><span class=p>,</span> <span class=s1>&#39;commit&#39;</span><span class=p>,</span> <span class=s1>&#39;--amend&#39;</span><span class=p>,</span> <span class=s1>&#39;--no-edit&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;버전 변경사항이 커밋에 추가되었습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>update_version</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=보안-점검-자동화>보안 점검 자동화<a hidden class=anchor aria-hidden=true href=#보안-점검-자동화>#</a></h4><p>개발팀은 코드 보안을 강화하기 위해 pre-commit hook 을 사용하여 보안 취약점 검사, 비밀 정보 유출 방지, 의존성 취약점 검사 등을 자동화한다.</p><h5 id=pre-commit-설정-예시-2>Pre-commit 설정 예시<a hidden class=anchor aria-hidden=true href=#pre-commit-설정-예시-2>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-37-1><a class=lnlinks href=#hl-37-1> 1</a>
</span><span class=lnt id=hl-37-2><a class=lnlinks href=#hl-37-2> 2</a>
</span><span class=lnt id=hl-37-3><a class=lnlinks href=#hl-37-3> 3</a>
</span><span class=lnt id=hl-37-4><a class=lnlinks href=#hl-37-4> 4</a>
</span><span class=lnt id=hl-37-5><a class=lnlinks href=#hl-37-5> 5</a>
</span><span class=lnt id=hl-37-6><a class=lnlinks href=#hl-37-6> 6</a>
</span><span class=lnt id=hl-37-7><a class=lnlinks href=#hl-37-7> 7</a>
</span><span class=lnt id=hl-37-8><a class=lnlinks href=#hl-37-8> 8</a>
</span><span class=lnt id=hl-37-9><a class=lnlinks href=#hl-37-9> 9</a>
</span><span class=lnt id=hl-37-10><a class=lnlinks href=#hl-37-10>10</a>
</span><span class=lnt id=hl-37-11><a class=lnlinks href=#hl-37-11>11</a>
</span><span class=lnt id=hl-37-12><a class=lnlinks href=#hl-37-12>12</a>
</span><span class=lnt id=hl-37-13><a class=lnlinks href=#hl-37-13>13</a>
</span><span class=lnt id=hl-37-14><a class=lnlinks href=#hl-37-14>14</a>
</span><span class=lnt id=hl-37-15><a class=lnlinks href=#hl-37-15>15</a>
</span><span class=lnt id=hl-37-16><a class=lnlinks href=#hl-37-16>16</a>
</span><span class=lnt id=hl-37-17><a class=lnlinks href=#hl-37-17>17</a>
</span><span class=lnt id=hl-37-18><a class=lnlinks href=#hl-37-18>18</a>
</span><span class=lnt id=hl-37-19><a class=lnlinks href=#hl-37-19>19</a>
</span><span class=lnt id=hl-37-20><a class=lnlinks href=#hl-37-20>20</a>
</span><span class=lnt id=hl-37-21><a class=lnlinks href=#hl-37-21>21</a>
</span><span class=lnt id=hl-37-22><a class=lnlinks href=#hl-37-22>22</a>
</span><span class=lnt id=hl-37-23><a class=lnlinks href=#hl-37-23>23</a>
</span><span class=lnt id=hl-37-24><a class=lnlinks href=#hl-37-24>24</a>
</span><span class=lnt id=hl-37-25><a class=lnlinks href=#hl-37-25>25</a>
</span><span class=lnt id=hl-37-26><a class=lnlinks href=#hl-37-26>26</a>
</span><span class=lnt id=hl-37-27><a class=lnlinks href=#hl-37-27>27</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># .pre-commit-config.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>repos</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=w>  </span><span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/pre-commit/pre-commit-hooks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=l>v4.4.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=w>  </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>detect-private-key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=w>  </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>detect-aws-credentials</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=w>  </span><span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/Yelp/detect-secrets</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=l>v1.4.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=w>  </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>detect-secrets</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=w>  </span><span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/PyCQA/bandit</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=m>1.7.5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=w>  </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>bandit</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>args</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;-r&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;.&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=w>  </span><span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>local</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=w>  </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>dependency-check</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>dependency-check</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>entry</span><span class=p>:</span><span class=w> </span><span class=l>python scripts/check_dependencies.py</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>language</span><span class=p>:</span><span class=w> </span><span class=l>python</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>pass_filenames</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>always_run</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h5 id=의존성-취약점-검사-스크립트>의존성 취약점 검사 스크립트<a hidden class=anchor aria-hidden=true href=#의존성-취약점-검사-스크립트>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-38-1><a class=lnlinks href=#hl-38-1> 1</a>
</span><span class=lnt id=hl-38-2><a class=lnlinks href=#hl-38-2> 2</a>
</span><span class=lnt id=hl-38-3><a class=lnlinks href=#hl-38-3> 3</a>
</span><span class=lnt id=hl-38-4><a class=lnlinks href=#hl-38-4> 4</a>
</span><span class=lnt id=hl-38-5><a class=lnlinks href=#hl-38-5> 5</a>
</span><span class=lnt id=hl-38-6><a class=lnlinks href=#hl-38-6> 6</a>
</span><span class=lnt id=hl-38-7><a class=lnlinks href=#hl-38-7> 7</a>
</span><span class=lnt id=hl-38-8><a class=lnlinks href=#hl-38-8> 8</a>
</span><span class=lnt id=hl-38-9><a class=lnlinks href=#hl-38-9> 9</a>
</span><span class=lnt id=hl-38-10><a class=lnlinks href=#hl-38-10>10</a>
</span><span class=lnt id=hl-38-11><a class=lnlinks href=#hl-38-11>11</a>
</span><span class=lnt id=hl-38-12><a class=lnlinks href=#hl-38-12>12</a>
</span><span class=lnt id=hl-38-13><a class=lnlinks href=#hl-38-13>13</a>
</span><span class=lnt id=hl-38-14><a class=lnlinks href=#hl-38-14>14</a>
</span><span class=lnt id=hl-38-15><a class=lnlinks href=#hl-38-15>15</a>
</span><span class=lnt id=hl-38-16><a class=lnlinks href=#hl-38-16>16</a>
</span><span class=lnt id=hl-38-17><a class=lnlinks href=#hl-38-17>17</a>
</span><span class=lnt id=hl-38-18><a class=lnlinks href=#hl-38-18>18</a>
</span><span class=lnt id=hl-38-19><a class=lnlinks href=#hl-38-19>19</a>
</span><span class=lnt id=hl-38-20><a class=lnlinks href=#hl-38-20>20</a>
</span><span class=lnt id=hl-38-21><a class=lnlinks href=#hl-38-21>21</a>
</span><span class=lnt id=hl-38-22><a class=lnlinks href=#hl-38-22>22</a>
</span><span class=lnt id=hl-38-23><a class=lnlinks href=#hl-38-23>23</a>
</span><span class=lnt id=hl-38-24><a class=lnlinks href=#hl-38-24>24</a>
</span><span class=lnt id=hl-38-25><a class=lnlinks href=#hl-38-25>25</a>
</span><span class=lnt id=hl-38-26><a class=lnlinks href=#hl-38-26>26</a>
</span><span class=lnt id=hl-38-27><a class=lnlinks href=#hl-38-27>27</a>
</span><span class=lnt id=hl-38-28><a class=lnlinks href=#hl-38-28>28</a>
</span><span class=lnt id=hl-38-29><a class=lnlinks href=#hl-38-29>29</a>
</span><span class=lnt id=hl-38-30><a class=lnlinks href=#hl-38-30>30</a>
</span><span class=lnt id=hl-38-31><a class=lnlinks href=#hl-38-31>31</a>
</span><span class=lnt id=hl-38-32><a class=lnlinks href=#hl-38-32>32</a>
</span><span class=lnt id=hl-38-33><a class=lnlinks href=#hl-38-33>33</a>
</span><span class=lnt id=hl-38-34><a class=lnlinks href=#hl-38-34>34</a>
</span><span class=lnt id=hl-38-35><a class=lnlinks href=#hl-38-35>35</a>
</span><span class=lnt id=hl-38-36><a class=lnlinks href=#hl-38-36>36</a>
</span><span class=lnt id=hl-38-37><a class=lnlinks href=#hl-38-37>37</a>
</span><span class=lnt id=hl-38-38><a class=lnlinks href=#hl-38-38>38</a>
</span><span class=lnt id=hl-38-39><a class=lnlinks href=#hl-38-39>39</a>
</span><span class=lnt id=hl-38-40><a class=lnlinks href=#hl-38-40>40</a>
</span><span class=lnt id=hl-38-41><a class=lnlinks href=#hl-38-41>41</a>
</span><span class=lnt id=hl-38-42><a class=lnlinks href=#hl-38-42>42</a>
</span><span class=lnt id=hl-38-43><a class=lnlinks href=#hl-38-43>43</a>
</span><span class=lnt id=hl-38-44><a class=lnlinks href=#hl-38-44>44</a>
</span><span class=lnt id=hl-38-45><a class=lnlinks href=#hl-38-45>45</a>
</span><span class=lnt id=hl-38-46><a class=lnlinks href=#hl-38-46>46</a>
</span><span class=lnt id=hl-38-47><a class=lnlinks href=#hl-38-47>47</a>
</span><span class=lnt id=hl-38-48><a class=lnlinks href=#hl-38-48>48</a>
</span><span class=lnt id=hl-38-49><a class=lnlinks href=#hl-38-49>49</a>
</span><span class=lnt id=hl-38-50><a class=lnlinks href=#hl-38-50>50</a>
</span><span class=lnt id=hl-38-51><a class=lnlinks href=#hl-38-51>51</a>
</span><span class=lnt id=hl-38-52><a class=lnlinks href=#hl-38-52>52</a>
</span><span class=lnt id=hl-38-53><a class=lnlinks href=#hl-38-53>53</a>
</span><span class=lnt id=hl-38-54><a class=lnlinks href=#hl-38-54>54</a>
</span><span class=lnt id=hl-38-55><a class=lnlinks href=#hl-38-55>55</a>
</span><span class=lnt id=hl-38-56><a class=lnlinks href=#hl-38-56>56</a>
</span><span class=lnt id=hl-38-57><a class=lnlinks href=#hl-38-57>57</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python3</span>
</span></span><span class=line><span class=cl><span class=c1># scripts/check_dependencies.py</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>subprocess</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pathlib</span> <span class=kn>import</span> <span class=n>Path</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>check_dependencies</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;프로젝트의 의존성 패키지에서 보안 취약점을 검사합니다.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;의존성 보안 취약점 검사 중...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># requirements.txt 존재 확인</span>
</span></span><span class=line><span class=cl>    <span class=n>req_file</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=s1>&#39;requirements.txt&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>req_file</span><span class=o>.</span><span class=n>exists</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;requirements.txt 파일이 존재하지 않습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># safety 패키지를 사용하여 의존성 취약점 검사</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=p>[</span><span class=s1>&#39;safety&#39;</span><span class=p>,</span> <span class=s1>&#39;check&#39;</span><span class=p>,</span> <span class=s1>&#39;-r&#39;</span><span class=p>,</span> <span class=s1>&#39;requirements.txt&#39;</span><span class=p>,</span> <span class=s1>&#39;--json&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 결과 파싱</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>result</span><span class=o>.</span><span class=n>returncode</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>vulnerabilities</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>vulnerabilities</span><span class=p>)</span><span class=si>}</span><span class=s2> 개의 취약점이 발견되었습니다:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>vuln</span> <span class=ow>in</span> <span class=n>vulnerabilities</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>package</span> <span class=o>=</span> <span class=n>vuln</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;package&#39;</span><span class=p>,</span> <span class=s1>&#39;Unknown&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=n>vuln_id</span> <span class=o>=</span> <span class=n>vuln</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;Unknown&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=n>spec</span> <span class=o>=</span> <span class=n>vuln</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;spec&#39;</span><span class=p>,</span> <span class=s1>&#39;Unknown&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=n>cve</span> <span class=o>=</span> <span class=n>vuln</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;cve&#39;</span><span class=p>,</span> <span class=s1>&#39;N/A&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  - </span><span class=si>{</span><span class=n>package</span><span class=si>}</span><span class=s2> (</span><span class=si>{</span><span class=n>spec</span><span class=si>}</span><span class=s2>): </span><span class=si>{</span><span class=n>vuln_id</span><span class=si>}</span><span class=s2> (CVE: </span><span class=si>{</span><span class=n>cve</span><span class=si>}</span><span class=s2>)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;    대응 방안: </span><span class=si>{</span><span class=n>vuln</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;advisory&#39;</span><span class=p>,</span> <span class=s1>&#39;N/A&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>심각한 보안 취약점이 발견되었습니다. 의존성을 업데이트하세요.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=n>json</span><span class=o>.</span><span class=n>JSONDecodeError</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;취약점 결과를 파싱할 수 없습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;알려진 보안 취약점이 없습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>FileNotFoundError</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;safety 패키지가 설치되어 있지 않습니다. 설치하려면:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;pip install safety&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=n>check_dependencies</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=데이터베이스-스키마-관리>데이터베이스 스키마 관리<a hidden class=anchor aria-hidden=true href=#데이터베이스-스키마-관리>#</a></h4><p>개발팀은 데이터베이스 스키마 변경사항을 관리하기 위해 pre-commit hook 을 사용하여 마이그레이션 파일 검증 및 데이터베이스 스키마 문서화를 자동화한다.</p><h5 id=pre-commit-설정-예시-3>Pre-commit 설정 예시<a hidden class=anchor aria-hidden=true href=#pre-commit-설정-예시-3>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-39-1><a class=lnlinks href=#hl-39-1> 1</a>
</span><span class=lnt id=hl-39-2><a class=lnlinks href=#hl-39-2> 2</a>
</span><span class=lnt id=hl-39-3><a class=lnlinks href=#hl-39-3> 3</a>
</span><span class=lnt id=hl-39-4><a class=lnlinks href=#hl-39-4> 4</a>
</span><span class=lnt id=hl-39-5><a class=lnlinks href=#hl-39-5> 5</a>
</span><span class=lnt id=hl-39-6><a class=lnlinks href=#hl-39-6> 6</a>
</span><span class=lnt id=hl-39-7><a class=lnlinks href=#hl-39-7> 7</a>
</span><span class=lnt id=hl-39-8><a class=lnlinks href=#hl-39-8> 8</a>
</span><span class=lnt id=hl-39-9><a class=lnlinks href=#hl-39-9> 9</a>
</span><span class=lnt id=hl-39-10><a class=lnlinks href=#hl-39-10>10</a>
</span><span class=lnt id=hl-39-11><a class=lnlinks href=#hl-39-11>11</a>
</span><span class=lnt id=hl-39-12><a class=lnlinks href=#hl-39-12>12</a>
</span><span class=lnt id=hl-39-13><a class=lnlinks href=#hl-39-13>13</a>
</span><span class=lnt id=hl-39-14><a class=lnlinks href=#hl-39-14>14</a>
</span><span class=lnt id=hl-39-15><a class=lnlinks href=#hl-39-15>15</a>
</span><span class=lnt id=hl-39-16><a class=lnlinks href=#hl-39-16>16</a>
</span><span class=lnt id=hl-39-17><a class=lnlinks href=#hl-39-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># .pre-commit-config.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>repos</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=w>  </span><span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>local</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=w>  </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>validate-migrations</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>validate-migrations</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>entry</span><span class=p>:</span><span class=w> </span><span class=l>python scripts/validate_migrations.py</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>language</span><span class=p>:</span><span class=w> </span><span class=l>python</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>files</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;migrations/.*\.py$&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>pass_filenames</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=w>  </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>generate-db-docs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>generate-db-docs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>entry</span><span class=p>:</span><span class=w> </span><span class=l>python scripts/generate_db_docs.py</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>language</span><span class=p>:</span><span class=w> </span><span class=l>python</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>files</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;models/.*\.py$&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>pass_filenames</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h5 id=마이그레이션-파일-검증-스크립트>마이그레이션 파일 검증 스크립트<a hidden class=anchor aria-hidden=true href=#마이그레이션-파일-검증-스크립트>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-40-1><a class=lnlinks href=#hl-40-1> 1</a>
</span><span class=lnt id=hl-40-2><a class=lnlinks href=#hl-40-2> 2</a>
</span><span class=lnt id=hl-40-3><a class=lnlinks href=#hl-40-3> 3</a>
</span><span class=lnt id=hl-40-4><a class=lnlinks href=#hl-40-4> 4</a>
</span><span class=lnt id=hl-40-5><a class=lnlinks href=#hl-40-5> 5</a>
</span><span class=lnt id=hl-40-6><a class=lnlinks href=#hl-40-6> 6</a>
</span><span class=lnt id=hl-40-7><a class=lnlinks href=#hl-40-7> 7</a>
</span><span class=lnt id=hl-40-8><a class=lnlinks href=#hl-40-8> 8</a>
</span><span class=lnt id=hl-40-9><a class=lnlinks href=#hl-40-9> 9</a>
</span><span class=lnt id=hl-40-10><a class=lnlinks href=#hl-40-10>10</a>
</span><span class=lnt id=hl-40-11><a class=lnlinks href=#hl-40-11>11</a>
</span><span class=lnt id=hl-40-12><a class=lnlinks href=#hl-40-12>12</a>
</span><span class=lnt id=hl-40-13><a class=lnlinks href=#hl-40-13>13</a>
</span><span class=lnt id=hl-40-14><a class=lnlinks href=#hl-40-14>14</a>
</span><span class=lnt id=hl-40-15><a class=lnlinks href=#hl-40-15>15</a>
</span><span class=lnt id=hl-40-16><a class=lnlinks href=#hl-40-16>16</a>
</span><span class=lnt id=hl-40-17><a class=lnlinks href=#hl-40-17>17</a>
</span><span class=lnt id=hl-40-18><a class=lnlinks href=#hl-40-18>18</a>
</span><span class=lnt id=hl-40-19><a class=lnlinks href=#hl-40-19>19</a>
</span><span class=lnt id=hl-40-20><a class=lnlinks href=#hl-40-20>20</a>
</span><span class=lnt id=hl-40-21><a class=lnlinks href=#hl-40-21>21</a>
</span><span class=lnt id=hl-40-22><a class=lnlinks href=#hl-40-22>22</a>
</span><span class=lnt id=hl-40-23><a class=lnlinks href=#hl-40-23>23</a>
</span><span class=lnt id=hl-40-24><a class=lnlinks href=#hl-40-24>24</a>
</span><span class=lnt id=hl-40-25><a class=lnlinks href=#hl-40-25>25</a>
</span><span class=lnt id=hl-40-26><a class=lnlinks href=#hl-40-26>26</a>
</span><span class=lnt id=hl-40-27><a class=lnlinks href=#hl-40-27>27</a>
</span><span class=lnt id=hl-40-28><a class=lnlinks href=#hl-40-28>28</a>
</span><span class=lnt id=hl-40-29><a class=lnlinks href=#hl-40-29>29</a>
</span><span class=lnt id=hl-40-30><a class=lnlinks href=#hl-40-30>30</a>
</span><span class=lnt id=hl-40-31><a class=lnlinks href=#hl-40-31>31</a>
</span><span class=lnt id=hl-40-32><a class=lnlinks href=#hl-40-32>32</a>
</span><span class=lnt id=hl-40-33><a class=lnlinks href=#hl-40-33>33</a>
</span><span class=lnt id=hl-40-34><a class=lnlinks href=#hl-40-34>34</a>
</span><span class=lnt id=hl-40-35><a class=lnlinks href=#hl-40-35>35</a>
</span><span class=lnt id=hl-40-36><a class=lnlinks href=#hl-40-36>36</a>
</span><span class=lnt id=hl-40-37><a class=lnlinks href=#hl-40-37>37</a>
</span><span class=lnt id=hl-40-38><a class=lnlinks href=#hl-40-38>38</a>
</span><span class=lnt id=hl-40-39><a class=lnlinks href=#hl-40-39>39</a>
</span><span class=lnt id=hl-40-40><a class=lnlinks href=#hl-40-40>40</a>
</span><span class=lnt id=hl-40-41><a class=lnlinks href=#hl-40-41>41</a>
</span><span class=lnt id=hl-40-42><a class=lnlinks href=#hl-40-42>42</a>
</span><span class=lnt id=hl-40-43><a class=lnlinks href=#hl-40-43>43</a>
</span><span class=lnt id=hl-40-44><a class=lnlinks href=#hl-40-44>44</a>
</span><span class=lnt id=hl-40-45><a class=lnlinks href=#hl-40-45>45</a>
</span><span class=lnt id=hl-40-46><a class=lnlinks href=#hl-40-46>46</a>
</span><span class=lnt id=hl-40-47><a class=lnlinks href=#hl-40-47>47</a>
</span><span class=lnt id=hl-40-48><a class=lnlinks href=#hl-40-48>48</a>
</span><span class=lnt id=hl-40-49><a class=lnlinks href=#hl-40-49>49</a>
</span><span class=lnt id=hl-40-50><a class=lnlinks href=#hl-40-50>50</a>
</span><span class=lnt id=hl-40-51><a class=lnlinks href=#hl-40-51>51</a>
</span><span class=lnt id=hl-40-52><a class=lnlinks href=#hl-40-52>52</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python3</span>
</span></span><span class=line><span class=cl><span class=c1># scripts/validate_migrations.py</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>re</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pathlib</span> <span class=kn>import</span> <span class=n>Path</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>validate_migrations</span><span class=p>(</span><span class=n>migration_files</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;마이그레이션 파일의 형식과 내용을 검증합니다.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>migration_files</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;검증할 마이그레이션 파일이 없습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>errors</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>file_path</span> <span class=ow>in</span> <span class=n>migration_files</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>path</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=n>file_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=n>errors</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;파일을 찾을 수 없습니다: </span><span class=si>{</span><span class=n>file_path</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 파일 이름 검증</span>
</span></span><span class=line><span class=cl>        <span class=n>filename</span> <span class=o>=</span> <span class=n>path</span><span class=o>.</span><span class=n>name</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>re</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;^\d</span><span class=si>{4}</span><span class=s1>_[a-z0-9_]+\.py$&#39;</span><span class=p>,</span> <span class=n>filename</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>errors</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;마이그레이션 파일 이름이 규칙을 따르지 않습니다: </span><span class=si>{</span><span class=n>filename</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 파일 내용 검증</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>content</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 설명 문서 확인</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=ow>not</span> <span class=n>re</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;&#34;&#34;&#34;.*?&#34;&#34;&#34;&#39;</span><span class=p>,</span> <span class=n>content</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>DOTALL</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=n>errors</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;마이그레이션 설명 문서가 없습니다: </span><span class=si>{</span><span class=n>filename</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># upgrade 및 downgrade 함수 확인</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=ow>not</span> <span class=n>re</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;def upgrade\(\):&#39;</span><span class=p>,</span> <span class=n>content</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=n>errors</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;upgrade() 함수가 없습니다: </span><span class=si>{</span><span class=n>filename</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=ow>not</span> <span class=n>re</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;def downgrade\(\):&#39;</span><span class=p>,</span> <span class=n>content</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=n>errors</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;downgrade() 함수가 없습니다: </span><span class=si>{</span><span class=n>filename</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>errors</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>error</span> <span class=ow>in</span> <span class=n>errors</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;오류: </span><span class=si>{</span><span class=n>error</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;모든 마이그레이션 파일이 유효합니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=n>validate_migrations</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>[</span><span class=mi>1</span><span class=p>:]))</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=데이터베이스-스키마-문서화-스크립트>데이터베이스 스키마 문서화 스크립트<a hidden class=anchor aria-hidden=true href=#데이터베이스-스키마-문서화-스크립트>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-41-1><a class=lnlinks href=#hl-41-1> 1</a>
</span><span class=lnt id=hl-41-2><a class=lnlinks href=#hl-41-2> 2</a>
</span><span class=lnt id=hl-41-3><a class=lnlinks href=#hl-41-3> 3</a>
</span><span class=lnt id=hl-41-4><a class=lnlinks href=#hl-41-4> 4</a>
</span><span class=lnt id=hl-41-5><a class=lnlinks href=#hl-41-5> 5</a>
</span><span class=lnt id=hl-41-6><a class=lnlinks href=#hl-41-6> 6</a>
</span><span class=lnt id=hl-41-7><a class=lnlinks href=#hl-41-7> 7</a>
</span><span class=lnt id=hl-41-8><a class=lnlinks href=#hl-41-8> 8</a>
</span><span class=lnt id=hl-41-9><a class=lnlinks href=#hl-41-9> 9</a>
</span><span class=lnt id=hl-41-10><a class=lnlinks href=#hl-41-10>10</a>
</span><span class=lnt id=hl-41-11><a class=lnlinks href=#hl-41-11>11</a>
</span><span class=lnt id=hl-41-12><a class=lnlinks href=#hl-41-12>12</a>
</span><span class=lnt id=hl-41-13><a class=lnlinks href=#hl-41-13>13</a>
</span><span class=lnt id=hl-41-14><a class=lnlinks href=#hl-41-14>14</a>
</span><span class=lnt id=hl-41-15><a class=lnlinks href=#hl-41-15>15</a>
</span><span class=lnt id=hl-41-16><a class=lnlinks href=#hl-41-16>16</a>
</span><span class=lnt id=hl-41-17><a class=lnlinks href=#hl-41-17>17</a>
</span><span class=lnt id=hl-41-18><a class=lnlinks href=#hl-41-18>18</a>
</span><span class=lnt id=hl-41-19><a class=lnlinks href=#hl-41-19>19</a>
</span><span class=lnt id=hl-41-20><a class=lnlinks href=#hl-41-20>20</a>
</span><span class=lnt id=hl-41-21><a class=lnlinks href=#hl-41-21>21</a>
</span><span class=lnt id=hl-41-22><a class=lnlinks href=#hl-41-22>22</a>
</span><span class=lnt id=hl-41-23><a class=lnlinks href=#hl-41-23>23</a>
</span><span class=lnt id=hl-41-24><a class=lnlinks href=#hl-41-24>24</a>
</span><span class=lnt id=hl-41-25><a class=lnlinks href=#hl-41-25>25</a>
</span><span class=lnt id=hl-41-26><a class=lnlinks href=#hl-41-26>26</a>
</span><span class=lnt id=hl-41-27><a class=lnlinks href=#hl-41-27>27</a>
</span><span class=lnt id=hl-41-28><a class=lnlinks href=#hl-41-28>28</a>
</span><span class=lnt id=hl-41-29><a class=lnlinks href=#hl-41-29>29</a>
</span><span class=lnt id=hl-41-30><a class=lnlinks href=#hl-41-30>30</a>
</span><span class=lnt id=hl-41-31><a class=lnlinks href=#hl-41-31>31</a>
</span><span class=lnt id=hl-41-32><a class=lnlinks href=#hl-41-32>32</a>
</span><span class=lnt id=hl-41-33><a class=lnlinks href=#hl-41-33>33</a>
</span><span class=lnt id=hl-41-34><a class=lnlinks href=#hl-41-34>34</a>
</span><span class=lnt id=hl-41-35><a class=lnlinks href=#hl-41-35>35</a>
</span><span class=lnt id=hl-41-36><a class=lnlinks href=#hl-41-36>36</a>
</span><span class=lnt id=hl-41-37><a class=lnlinks href=#hl-41-37>37</a>
</span><span class=lnt id=hl-41-38><a class=lnlinks href=#hl-41-38>38</a>
</span><span class=lnt id=hl-41-39><a class=lnlinks href=#hl-41-39>39</a>
</span><span class=lnt id=hl-41-40><a class=lnlinks href=#hl-41-40>40</a>
</span><span class=lnt id=hl-41-41><a class=lnlinks href=#hl-41-41>41</a>
</span><span class=lnt id=hl-41-42><a class=lnlinks href=#hl-41-42>42</a>
</span><span class=lnt id=hl-41-43><a class=lnlinks href=#hl-41-43>43</a>
</span><span class=lnt id=hl-41-44><a class=lnlinks href=#hl-41-44>44</a>
</span><span class=lnt id=hl-41-45><a class=lnlinks href=#hl-41-45>45</a>
</span><span class=lnt id=hl-41-46><a class=lnlinks href=#hl-41-46>46</a>
</span><span class=lnt id=hl-41-47><a class=lnlinks href=#hl-41-47>47</a>
</span><span class=lnt id=hl-41-48><a class=lnlinks href=#hl-41-48>48</a>
</span><span class=lnt id=hl-41-49><a class=lnlinks href=#hl-41-49>49</a>
</span><span class=lnt id=hl-41-50><a class=lnlinks href=#hl-41-50>50</a>
</span><span class=lnt id=hl-41-51><a class=lnlinks href=#hl-41-51>51</a>
</span><span class=lnt id=hl-41-52><a class=lnlinks href=#hl-41-52>52</a>
</span><span class=lnt id=hl-41-53><a class=lnlinks href=#hl-41-53>53</a>
</span><span class=lnt id=hl-41-54><a class=lnlinks href=#hl-41-54>54</a>
</span><span class=lnt id=hl-41-55><a class=lnlinks href=#hl-41-55>55</a>
</span><span class=lnt id=hl-41-56><a class=lnlinks href=#hl-41-56>56</a>
</span><span class=lnt id=hl-41-57><a class=lnlinks href=#hl-41-57>57</a>
</span><span class=lnt id=hl-41-58><a class=lnlinks href=#hl-41-58>58</a>
</span><span class=lnt id=hl-41-59><a class=lnlinks href=#hl-41-59>59</a>
</span><span class=lnt id=hl-41-60><a class=lnlinks href=#hl-41-60>60</a>
</span><span class=lnt id=hl-41-61><a class=lnlinks href=#hl-41-61>61</a>
</span><span class=lnt id=hl-41-62><a class=lnlinks href=#hl-41-62>62</a>
</span><span class=lnt id=hl-41-63><a class=lnlinks href=#hl-41-63>63</a>
</span><span class=lnt id=hl-41-64><a class=lnlinks href=#hl-41-64>64</a>
</span><span class=lnt id=hl-41-65><a class=lnlinks href=#hl-41-65>65</a>
</span><span class=lnt id=hl-41-66><a class=lnlinks href=#hl-41-66>66</a>
</span><span class=lnt id=hl-41-67><a class=lnlinks href=#hl-41-67>67</a>
</span><span class=lnt id=hl-41-68><a class=lnlinks href=#hl-41-68>68</a>
</span><span class=lnt id=hl-41-69><a class=lnlinks href=#hl-41-69>69</a>
</span><span class=lnt id=hl-41-70><a class=lnlinks href=#hl-41-70>70</a>
</span><span class=lnt id=hl-41-71><a class=lnlinks href=#hl-41-71>71</a>
</span><span class=lnt id=hl-41-72><a class=lnlinks href=#hl-41-72>72</a>
</span><span class=lnt id=hl-41-73><a class=lnlinks href=#hl-41-73>73</a>
</span><span class=lnt id=hl-41-74><a class=lnlinks href=#hl-41-74>74</a>
</span><span class=lnt id=hl-41-75><a class=lnlinks href=#hl-41-75>75</a>
</span><span class=lnt id=hl-41-76><a class=lnlinks href=#hl-41-76>76</a>
</span><span class=lnt id=hl-41-77><a class=lnlinks href=#hl-41-77>77</a>
</span><span class=lnt id=hl-41-78><a class=lnlinks href=#hl-41-78>78</a>
</span><span class=lnt id=hl-41-79><a class=lnlinks href=#hl-41-79>79</a>
</span><span class=lnt id=hl-41-80><a class=lnlinks href=#hl-41-80>80</a>
</span><span class=lnt id=hl-41-81><a class=lnlinks href=#hl-41-81>81</a>
</span><span class=lnt id=hl-41-82><a class=lnlinks href=#hl-41-82>82</a>
</span><span class=lnt id=hl-41-83><a class=lnlinks href=#hl-41-83>83</a>
</span><span class=lnt id=hl-41-84><a class=lnlinks href=#hl-41-84>84</a>
</span><span class=lnt id=hl-41-85><a class=lnlinks href=#hl-41-85>85</a>
</span><span class=lnt id=hl-41-86><a class=lnlinks href=#hl-41-86>86</a>
</span><span class=lnt id=hl-41-87><a class=lnlinks href=#hl-41-87>87</a>
</span><span class=lnt id=hl-41-88><a class=lnlinks href=#hl-41-88>88</a>
</span><span class=lnt id=hl-41-89><a class=lnlinks href=#hl-41-89>89</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python3</span>
</span></span><span class=line><span class=cl><span class=c1># scripts/generate_db_docs.py</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>importlib</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>inspect</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pathlib</span> <span class=kn>import</span> <span class=n>Path</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>generate_db_docs</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;SQLAlchemy 모델을 기반으로 데이터베이스 스키마 문서를 생성합니다.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;데이터베이스 스키마 문서 생성 중...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>models_dir</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=s1>&#39;models&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>models_dir</span><span class=o>.</span><span class=n>exists</span><span class=p>()</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>models_dir</span><span class=o>.</span><span class=n>is_dir</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;models 디렉토리를 찾을 수 없습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 모델 모듈 동적 임포트</span>
</span></span><span class=line><span class=cl>    <span class=n>sys</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>insert</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=nb>str</span><span class=p>(</span><span class=n>Path</span><span class=o>.</span><span class=n>cwd</span><span class=p>()))</span>
</span></span><span class=line><span class=cl>    <span class=n>model_classes</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>py_file</span> <span class=ow>in</span> <span class=n>models_dir</span><span class=o>.</span><span class=n>glob</span><span class=p>(</span><span class=s1>&#39;*.py&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>py_file</span><span class=o>.</span><span class=n>name</span> <span class=o>==</span> <span class=s1>&#39;__init__.py&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>module_name</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;models.</span><span class=si>{</span><span class=n>py_file</span><span class=o>.</span><span class=n>stem</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>module</span> <span class=o>=</span> <span class=n>importlib</span><span class=o>.</span><span class=n>import_module</span><span class=p>(</span><span class=n>module_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># SQLAlchemy 모델 클래스 찾기</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>name</span><span class=p>,</span> <span class=n>obj</span> <span class=ow>in</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getmembers</span><span class=p>(</span><span class=n>module</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>inspect</span><span class=o>.</span><span class=n>isclass</span><span class=p>(</span><span class=n>obj</span><span class=p>)</span> <span class=ow>and</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=s1>&#39;__tablename__&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                    <span class=n>model_classes</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>obj</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>ImportError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;모듈 임포트 오류: </span><span class=si>{</span><span class=n>module_name</span><span class=si>}</span><span class=s2> - </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>model_classes</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;SQLAlchemy 모델 클래스를 찾을 수 없습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 마크다운 문서 생성</span>
</span></span><span class=line><span class=cl>    <span class=n>docs_dir</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=s1>&#39;docs&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>docs_dir</span><span class=o>.</span><span class=n>mkdir</span><span class=p>(</span><span class=n>exist_ok</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>docs_dir</span> <span class=o>/</span> <span class=s1>&#39;database_schema.md&#39;</span><span class=p>,</span> <span class=s1>&#39;w&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s2>&#34;# 데이터베이스 스키마 문서</span><span class=se>\n\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>model</span> <span class=ow>in</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>model_classes</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>m</span><span class=p>:</span> <span class=n>m</span><span class=o>.</span><span class=n>__tablename__</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;## </span><span class=si>{</span><span class=n>model</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=se>\n\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;**테이블 이름:** `</span><span class=si>{</span><span class=n>model</span><span class=o>.</span><span class=n>__tablename__</span><span class=si>}</span><span class=s2>`</span><span class=se>\n\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>model</span><span class=o>.</span><span class=vm>__doc__</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>model</span><span class=o>.</span><span class=vm>__doc__</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span><span class=si>}</span><span class=se>\n\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s2>&#34;### 컬럼</span><span class=se>\n\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s2>&#34;| 이름 | 타입 | 제약 조건 | 설명 |</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s2>&#34;|------|------|-----------|------|</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>column_name</span><span class=p>,</span> <span class=n>column</span> <span class=ow>in</span> <span class=n>model</span><span class=o>.</span><span class=n>__table__</span><span class=o>.</span><span class=n>columns</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                <span class=n>constraints</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>column</span><span class=o>.</span><span class=n>primary_key</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>constraints</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;기본 키&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=ow>not</span> <span class=n>column</span><span class=o>.</span><span class=n>nullable</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>constraints</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;NOT NULL&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>column</span><span class=o>.</span><span class=n>unique</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>constraints</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;고유&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>column</span><span class=o>.</span><span class=n>foreign_keys</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>for</span> <span class=n>fk</span> <span class=ow>in</span> <span class=n>column</span><span class=o>.</span><span class=n>foreign_keys</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=n>constraints</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;외래 키 (</span><span class=si>{</span><span class=n>fk</span><span class=o>.</span><span class=n>target_fullname</span><span class=si>}</span><span class=s2>)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=n>constraints_str</span> <span class=o>=</span> <span class=s2>&#34;, &#34;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>constraints</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>column_type</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>column</span><span class=o>.</span><span class=n>type</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>column_doc</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>column</span><span class=p>,</span> <span class=s1>&#39;doc&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;| </span><span class=si>{</span><span class=n>column_name</span><span class=si>}</span><span class=s2> | </span><span class=si>{</span><span class=n>column_type</span><span class=si>}</span><span class=s2> | </span><span class=si>{</span><span class=n>constraints_str</span><span class=si>}</span><span class=s2> | </span><span class=si>{</span><span class=n>column_doc</span><span class=si>}</span><span class=s2> |</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;데이터베이스 스키마 문서가 생성되었습니다: </span><span class=si>{</span><span class=n>docs_dir</span><span class=si>}</span><span class=s2>/database_schema.md&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 문서 변경사항 스테이징</span>
</span></span><span class=line><span class=cl>    <span class=n>os</span><span class=o>.</span><span class=n>system</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;git add </span><span class=si>{</span><span class=n>docs_dir</span><span class=si>}</span><span class=s2>/database_schema.md&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;문서 변경사항이 스테이징되었습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=n>generate_db_docs</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=cicd-파이프라인-통합>CI/CD 파이프라인 통합<a hidden class=anchor aria-hidden=true href=#cicd-파이프라인-통합>#</a></h4><p>개발팀은 CI/CD 파이프라인과 Git 워크플로우를 통합하기 위해 Git hook 을 사용한다. post-push hook 을 사용하여 자동으로 CI/CD 파이프라인을 트리거하고, pre-push hook 을 사용하여 푸시 전에 빌드 검증을 수행한다.</p><h5 id=pre-commit-설정-예시-4>Pre-commit 설정 예시<a hidden class=anchor aria-hidden=true href=#pre-commit-설정-예시-4>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-42-1><a class=lnlinks href=#hl-42-1> 1</a>
</span><span class=lnt id=hl-42-2><a class=lnlinks href=#hl-42-2> 2</a>
</span><span class=lnt id=hl-42-3><a class=lnlinks href=#hl-42-3> 3</a>
</span><span class=lnt id=hl-42-4><a class=lnlinks href=#hl-42-4> 4</a>
</span><span class=lnt id=hl-42-5><a class=lnlinks href=#hl-42-5> 5</a>
</span><span class=lnt id=hl-42-6><a class=lnlinks href=#hl-42-6> 6</a>
</span><span class=lnt id=hl-42-7><a class=lnlinks href=#hl-42-7> 7</a>
</span><span class=lnt id=hl-42-8><a class=lnlinks href=#hl-42-8> 8</a>
</span><span class=lnt id=hl-42-9><a class=lnlinks href=#hl-42-9> 9</a>
</span><span class=lnt id=hl-42-10><a class=lnlinks href=#hl-42-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># .pre-commit-config.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>repos</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=w>  </span><span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>local</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=w>  </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>pre-push-build-check</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pre-push-build-check</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>entry</span><span class=p>:</span><span class=w> </span><span class=l>python scripts/pre_push_build_check.py</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>language</span><span class=p>:</span><span class=w> </span><span class=l>python</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>pass_filenames</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>stages</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>push]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h5 id=푸시-전-빌드-검증-스크립트-pre-push-hook>푸시 전 빌드 검증 스크립트 (pre-push hook)<a hidden class=anchor aria-hidden=true href=#푸시-전-빌드-검증-스크립트-pre-push-hook>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-43-1><a class=lnlinks href=#hl-43-1> 1</a>
</span><span class=lnt id=hl-43-2><a class=lnlinks href=#hl-43-2> 2</a>
</span><span class=lnt id=hl-43-3><a class=lnlinks href=#hl-43-3> 3</a>
</span><span class=lnt id=hl-43-4><a class=lnlinks href=#hl-43-4> 4</a>
</span><span class=lnt id=hl-43-5><a class=lnlinks href=#hl-43-5> 5</a>
</span><span class=lnt id=hl-43-6><a class=lnlinks href=#hl-43-6> 6</a>
</span><span class=lnt id=hl-43-7><a class=lnlinks href=#hl-43-7> 7</a>
</span><span class=lnt id=hl-43-8><a class=lnlinks href=#hl-43-8> 8</a>
</span><span class=lnt id=hl-43-9><a class=lnlinks href=#hl-43-9> 9</a>
</span><span class=lnt id=hl-43-10><a class=lnlinks href=#hl-43-10>10</a>
</span><span class=lnt id=hl-43-11><a class=lnlinks href=#hl-43-11>11</a>
</span><span class=lnt id=hl-43-12><a class=lnlinks href=#hl-43-12>12</a>
</span><span class=lnt id=hl-43-13><a class=lnlinks href=#hl-43-13>13</a>
</span><span class=lnt id=hl-43-14><a class=lnlinks href=#hl-43-14>14</a>
</span><span class=lnt id=hl-43-15><a class=lnlinks href=#hl-43-15>15</a>
</span><span class=lnt id=hl-43-16><a class=lnlinks href=#hl-43-16>16</a>
</span><span class=lnt id=hl-43-17><a class=lnlinks href=#hl-43-17>17</a>
</span><span class=lnt id=hl-43-18><a class=lnlinks href=#hl-43-18>18</a>
</span><span class=lnt id=hl-43-19><a class=lnlinks href=#hl-43-19>19</a>
</span><span class=lnt id=hl-43-20><a class=lnlinks href=#hl-43-20>20</a>
</span><span class=lnt id=hl-43-21><a class=lnlinks href=#hl-43-21>21</a>
</span><span class=lnt id=hl-43-22><a class=lnlinks href=#hl-43-22>22</a>
</span><span class=lnt id=hl-43-23><a class=lnlinks href=#hl-43-23>23</a>
</span><span class=lnt id=hl-43-24><a class=lnlinks href=#hl-43-24>24</a>
</span><span class=lnt id=hl-43-25><a class=lnlinks href=#hl-43-25>25</a>
</span><span class=lnt id=hl-43-26><a class=lnlinks href=#hl-43-26>26</a>
</span><span class=lnt id=hl-43-27><a class=lnlinks href=#hl-43-27>27</a>
</span><span class=lnt id=hl-43-28><a class=lnlinks href=#hl-43-28>28</a>
</span><span class=lnt id=hl-43-29><a class=lnlinks href=#hl-43-29>29</a>
</span><span class=lnt id=hl-43-30><a class=lnlinks href=#hl-43-30>30</a>
</span><span class=lnt id=hl-43-31><a class=lnlinks href=#hl-43-31>31</a>
</span><span class=lnt id=hl-43-32><a class=lnlinks href=#hl-43-32>32</a>
</span><span class=lnt id=hl-43-33><a class=lnlinks href=#hl-43-33>33</a>
</span><span class=lnt id=hl-43-34><a class=lnlinks href=#hl-43-34>34</a>
</span><span class=lnt id=hl-43-35><a class=lnlinks href=#hl-43-35>35</a>
</span><span class=lnt id=hl-43-36><a class=lnlinks href=#hl-43-36>36</a>
</span><span class=lnt id=hl-43-37><a class=lnlinks href=#hl-43-37>37</a>
</span><span class=lnt id=hl-43-38><a class=lnlinks href=#hl-43-38>38</a>
</span><span class=lnt id=hl-43-39><a class=lnlinks href=#hl-43-39>39</a>
</span><span class=lnt id=hl-43-40><a class=lnlinks href=#hl-43-40>40</a>
</span><span class=lnt id=hl-43-41><a class=lnlinks href=#hl-43-41>41</a>
</span><span class=lnt id=hl-43-42><a class=lnlinks href=#hl-43-42>42</a>
</span><span class=lnt id=hl-43-43><a class=lnlinks href=#hl-43-43>43</a>
</span><span class=lnt id=hl-43-44><a class=lnlinks href=#hl-43-44>44</a>
</span><span class=lnt id=hl-43-45><a class=lnlinks href=#hl-43-45>45</a>
</span><span class=lnt id=hl-43-46><a class=lnlinks href=#hl-43-46>46</a>
</span><span class=lnt id=hl-43-47><a class=lnlinks href=#hl-43-47>47</a>
</span><span class=lnt id=hl-43-48><a class=lnlinks href=#hl-43-48>48</a>
</span><span class=lnt id=hl-43-49><a class=lnlinks href=#hl-43-49>49</a>
</span><span class=lnt id=hl-43-50><a class=lnlinks href=#hl-43-50>50</a>
</span><span class=lnt id=hl-43-51><a class=lnlinks href=#hl-43-51>51</a>
</span><span class=lnt id=hl-43-52><a class=lnlinks href=#hl-43-52>52</a>
</span><span class=lnt id=hl-43-53><a class=lnlinks href=#hl-43-53>53</a>
</span><span class=lnt id=hl-43-54><a class=lnlinks href=#hl-43-54>54</a>
</span><span class=lnt id=hl-43-55><a class=lnlinks href=#hl-43-55>55</a>
</span><span class=lnt id=hl-43-56><a class=lnlinks href=#hl-43-56>56</a>
</span><span class=lnt id=hl-43-57><a class=lnlinks href=#hl-43-57>57</a>
</span><span class=lnt id=hl-43-58><a class=lnlinks href=#hl-43-58>58</a>
</span><span class=lnt id=hl-43-59><a class=lnlinks href=#hl-43-59>59</a>
</span><span class=lnt id=hl-43-60><a class=lnlinks href=#hl-43-60>60</a>
</span><span class=lnt id=hl-43-61><a class=lnlinks href=#hl-43-61>61</a>
</span><span class=lnt id=hl-43-62><a class=lnlinks href=#hl-43-62>62</a>
</span><span class=lnt id=hl-43-63><a class=lnlinks href=#hl-43-63>63</a>
</span><span class=lnt id=hl-43-64><a class=lnlinks href=#hl-43-64>64</a>
</span><span class=lnt id=hl-43-65><a class=lnlinks href=#hl-43-65>65</a>
</span><span class=lnt id=hl-43-66><a class=lnlinks href=#hl-43-66>66</a>
</span><span class=lnt id=hl-43-67><a class=lnlinks href=#hl-43-67>67</a>
</span><span class=lnt id=hl-43-68><a class=lnlinks href=#hl-43-68>68</a>
</span><span class=lnt id=hl-43-69><a class=lnlinks href=#hl-43-69>69</a>
</span><span class=lnt id=hl-43-70><a class=lnlinks href=#hl-43-70>70</a>
</span><span class=lnt id=hl-43-71><a class=lnlinks href=#hl-43-71>71</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python3</span>
</span></span><span class=line><span class=cl><span class=c1># scripts/pre_push_build_check.py</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>subprocess</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>pre_push_build_check</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;푸시 전에 빌드 검증을 수행합니다.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;푸시 전 빌드 검증을 시작합니다...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 브랜치 확인</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=s1>&#39;git&#39;</span><span class=p>,</span> <span class=s1>&#39;rev-parse&#39;</span><span class=p>,</span> <span class=s1>&#39;--abbrev-ref&#39;</span><span class=p>,</span> <span class=s1>&#39;HEAD&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>current_branch</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># main/master 브랜치인 경우 추가 검증</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>current_branch</span> <span class=ow>in</span> <span class=p>(</span><span class=s1>&#39;main&#39;</span><span class=p>,</span> <span class=s1>&#39;master&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>current_branch</span><span class=si>}</span><span class=s2> 브랜치로 푸시합니다. 추가 검증을 수행합니다...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 모든 테스트 실행</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;전체 테스트 실행 중...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>test_result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>([</span><span class=s1>&#39;pytest&#39;</span><span class=p>,</span> <span class=s1>&#39;--cov=app&#39;</span><span class=p>],</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>test_result</span><span class=o>.</span><span class=n>returncode</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;테스트 실패:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=n>test_result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 커버리지 검사</span>
</span></span><span class=line><span class=cl>        <span class=n>coverage_output</span> <span class=o>=</span> <span class=n>test_result</span><span class=o>.</span><span class=n>stdout</span>
</span></span><span class=line><span class=cl>        <span class=n>coverage_match</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;TOTAL\s+\d+\s+\d+\s+(\d+)%&#39;</span><span class=p>,</span> <span class=n>coverage_output</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>coverage_match</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>coverage</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>coverage_match</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>coverage</span> <span class=o>&lt;</span> <span class=mi>80</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;코드 커버리지가 기준보다 낮습니다: </span><span class=si>{</span><span class=n>coverage</span><span class=si>}</span><span class=s2>% (기준: 80%)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;코드 커버리지: </span><span class=si>{</span><span class=n>coverage</span><span class=si>}</span><span class=s2>%&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 빌드 검증</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;빌드 검증 중...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=s1>&#39;setup.py&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>build_result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>([</span><span class=s1>&#39;python&#39;</span><span class=p>,</span> <span class=s1>&#39;setup.py&#39;</span><span class=p>,</span> <span class=s1>&#39;sdist&#39;</span><span class=p>],</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>build_result</span><span class=o>.</span><span class=n>returncode</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;빌드 실패:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=n>build_result</span><span class=o>.</span><span class=n>stderr</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 일반적인 검증</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>current_branch</span><span class=si>}</span><span class=s2> 브랜치로 푸시합니다. 기본 검증을 수행합니다...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 필수 테스트 실행</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;기본 테스트 실행 중...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>test_result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>([</span><span class=s1>&#39;pytest&#39;</span><span class=p>],</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>test_result</span><span class=o>.</span><span class=n>returncode</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;테스트 실패:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=n>test_result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;모든 검증이 통과되었습니다. 푸시를 진행합니다...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=n>pre_push_build_check</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=cicd-파이프라인-트리거-스크립트-post-push-hook>CI/CD 파이프라인 트리거 스크립트 (post-push hook)<a hidden class=anchor aria-hidden=true href=#cicd-파이프라인-트리거-스크립트-post-push-hook>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-44-1><a class=lnlinks href=#hl-44-1> 1</a>
</span><span class=lnt id=hl-44-2><a class=lnlinks href=#hl-44-2> 2</a>
</span><span class=lnt id=hl-44-3><a class=lnlinks href=#hl-44-3> 3</a>
</span><span class=lnt id=hl-44-4><a class=lnlinks href=#hl-44-4> 4</a>
</span><span class=lnt id=hl-44-5><a class=lnlinks href=#hl-44-5> 5</a>
</span><span class=lnt id=hl-44-6><a class=lnlinks href=#hl-44-6> 6</a>
</span><span class=lnt id=hl-44-7><a class=lnlinks href=#hl-44-7> 7</a>
</span><span class=lnt id=hl-44-8><a class=lnlinks href=#hl-44-8> 8</a>
</span><span class=lnt id=hl-44-9><a class=lnlinks href=#hl-44-9> 9</a>
</span><span class=lnt id=hl-44-10><a class=lnlinks href=#hl-44-10>10</a>
</span><span class=lnt id=hl-44-11><a class=lnlinks href=#hl-44-11>11</a>
</span><span class=lnt id=hl-44-12><a class=lnlinks href=#hl-44-12>12</a>
</span><span class=lnt id=hl-44-13><a class=lnlinks href=#hl-44-13>13</a>
</span><span class=lnt id=hl-44-14><a class=lnlinks href=#hl-44-14>14</a>
</span><span class=lnt id=hl-44-15><a class=lnlinks href=#hl-44-15>15</a>
</span><span class=lnt id=hl-44-16><a class=lnlinks href=#hl-44-16>16</a>
</span><span class=lnt id=hl-44-17><a class=lnlinks href=#hl-44-17>17</a>
</span><span class=lnt id=hl-44-18><a class=lnlinks href=#hl-44-18>18</a>
</span><span class=lnt id=hl-44-19><a class=lnlinks href=#hl-44-19>19</a>
</span><span class=lnt id=hl-44-20><a class=lnlinks href=#hl-44-20>20</a>
</span><span class=lnt id=hl-44-21><a class=lnlinks href=#hl-44-21>21</a>
</span><span class=lnt id=hl-44-22><a class=lnlinks href=#hl-44-22>22</a>
</span><span class=lnt id=hl-44-23><a class=lnlinks href=#hl-44-23>23</a>
</span><span class=lnt id=hl-44-24><a class=lnlinks href=#hl-44-24>24</a>
</span><span class=lnt id=hl-44-25><a class=lnlinks href=#hl-44-25>25</a>
</span><span class=lnt id=hl-44-26><a class=lnlinks href=#hl-44-26>26</a>
</span><span class=lnt id=hl-44-27><a class=lnlinks href=#hl-44-27>27</a>
</span><span class=lnt id=hl-44-28><a class=lnlinks href=#hl-44-28>28</a>
</span><span class=lnt id=hl-44-29><a class=lnlinks href=#hl-44-29>29</a>
</span><span class=lnt id=hl-44-30><a class=lnlinks href=#hl-44-30>30</a>
</span><span class=lnt id=hl-44-31><a class=lnlinks href=#hl-44-31>31</a>
</span><span class=lnt id=hl-44-32><a class=lnlinks href=#hl-44-32>32</a>
</span><span class=lnt id=hl-44-33><a class=lnlinks href=#hl-44-33>33</a>
</span><span class=lnt id=hl-44-34><a class=lnlinks href=#hl-44-34>34</a>
</span><span class=lnt id=hl-44-35><a class=lnlinks href=#hl-44-35>35</a>
</span><span class=lnt id=hl-44-36><a class=lnlinks href=#hl-44-36>36</a>
</span><span class=lnt id=hl-44-37><a class=lnlinks href=#hl-44-37>37</a>
</span><span class=lnt id=hl-44-38><a class=lnlinks href=#hl-44-38>38</a>
</span><span class=lnt id=hl-44-39><a class=lnlinks href=#hl-44-39>39</a>
</span><span class=lnt id=hl-44-40><a class=lnlinks href=#hl-44-40>40</a>
</span><span class=lnt id=hl-44-41><a class=lnlinks href=#hl-44-41>41</a>
</span><span class=lnt id=hl-44-42><a class=lnlinks href=#hl-44-42>42</a>
</span><span class=lnt id=hl-44-43><a class=lnlinks href=#hl-44-43>43</a>
</span><span class=lnt id=hl-44-44><a class=lnlinks href=#hl-44-44>44</a>
</span><span class=lnt id=hl-44-45><a class=lnlinks href=#hl-44-45>45</a>
</span><span class=lnt id=hl-44-46><a class=lnlinks href=#hl-44-46>46</a>
</span><span class=lnt id=hl-44-47><a class=lnlinks href=#hl-44-47>47</a>
</span><span class=lnt id=hl-44-48><a class=lnlinks href=#hl-44-48>48</a>
</span><span class=lnt id=hl-44-49><a class=lnlinks href=#hl-44-49>49</a>
</span><span class=lnt id=hl-44-50><a class=lnlinks href=#hl-44-50>50</a>
</span><span class=lnt id=hl-44-51><a class=lnlinks href=#hl-44-51>51</a>
</span><span class=lnt id=hl-44-52><a class=lnlinks href=#hl-44-52>52</a>
</span><span class=lnt id=hl-44-53><a class=lnlinks href=#hl-44-53>53</a>
</span><span class=lnt id=hl-44-54><a class=lnlinks href=#hl-44-54>54</a>
</span><span class=lnt id=hl-44-55><a class=lnlinks href=#hl-44-55>55</a>
</span><span class=lnt id=hl-44-56><a class=lnlinks href=#hl-44-56>56</a>
</span><span class=lnt id=hl-44-57><a class=lnlinks href=#hl-44-57>57</a>
</span><span class=lnt id=hl-44-58><a class=lnlinks href=#hl-44-58>58</a>
</span><span class=lnt id=hl-44-59><a class=lnlinks href=#hl-44-59>59</a>
</span><span class=lnt id=hl-44-60><a class=lnlinks href=#hl-44-60>60</a>
</span><span class=lnt id=hl-44-61><a class=lnlinks href=#hl-44-61>61</a>
</span><span class=lnt id=hl-44-62><a class=lnlinks href=#hl-44-62>62</a>
</span><span class=lnt id=hl-44-63><a class=lnlinks href=#hl-44-63>63</a>
</span><span class=lnt id=hl-44-64><a class=lnlinks href=#hl-44-64>64</a>
</span><span class=lnt id=hl-44-65><a class=lnlinks href=#hl-44-65>65</a>
</span><span class=lnt id=hl-44-66><a class=lnlinks href=#hl-44-66>66</a>
</span><span class=lnt id=hl-44-67><a class=lnlinks href=#hl-44-67>67</a>
</span><span class=lnt id=hl-44-68><a class=lnlinks href=#hl-44-68>68</a>
</span><span class=lnt id=hl-44-69><a class=lnlinks href=#hl-44-69>69</a>
</span><span class=lnt id=hl-44-70><a class=lnlinks href=#hl-44-70>70</a>
</span><span class=lnt id=hl-44-71><a class=lnlinks href=#hl-44-71>71</a>
</span><span class=lnt id=hl-44-72><a class=lnlinks href=#hl-44-72>72</a>
</span><span class=lnt id=hl-44-73><a class=lnlinks href=#hl-44-73>73</a>
</span><span class=lnt id=hl-44-74><a class=lnlinks href=#hl-44-74>74</a>
</span><span class=lnt id=hl-44-75><a class=lnlinks href=#hl-44-75>75</a>
</span><span class=lnt id=hl-44-76><a class=lnlinks href=#hl-44-76>76</a>
</span><span class=lnt id=hl-44-77><a class=lnlinks href=#hl-44-77>77</a>
</span><span class=lnt id=hl-44-78><a class=lnlinks href=#hl-44-78>78</a>
</span><span class=lnt id=hl-44-79><a class=lnlinks href=#hl-44-79>79</a>
</span><span class=lnt id=hl-44-80><a class=lnlinks href=#hl-44-80>80</a>
</span><span class=lnt id=hl-44-81><a class=lnlinks href=#hl-44-81>81</a>
</span><span class=lnt id=hl-44-82><a class=lnlinks href=#hl-44-82>82</a>
</span><span class=lnt id=hl-44-83><a class=lnlinks href=#hl-44-83>83</a>
</span><span class=lnt id=hl-44-84><a class=lnlinks href=#hl-44-84>84</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python3</span>
</span></span><span class=line><span class=cl><span class=c1># .git/hooks/post-push (chmod +x 필요)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>subprocess</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>trigger_ci_pipeline</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Git push 후 CI 파이프라인을 트리거합니다.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;CI/CD 파이프라인 트리거 중...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 현재 브랜치와 커밋 정보 가져오기</span>
</span></span><span class=line><span class=cl>    <span class=n>branch</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=s1>&#39;git&#39;</span><span class=p>,</span> <span class=s1>&#39;rev-parse&#39;</span><span class=p>,</span> <span class=s1>&#39;--abbrev-ref&#39;</span><span class=p>,</span> <span class=s1>&#39;HEAD&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span><span class=o>.</span><span class=n>stdout</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>commit</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=s1>&#39;git&#39;</span><span class=p>,</span> <span class=s1>&#39;rev-parse&#39;</span><span class=p>,</span> <span class=s1>&#39;HEAD&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span><span class=o>.</span><span class=n>stdout</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Jenkins CI 파이프라인 트리거 예시</span>
</span></span><span class=line><span class=cl>    <span class=n>jenkins_url</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;JENKINS_URL&#39;</span><span class=p>,</span> <span class=s1>&#39;http://jenkins.example.com&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>jenkins_token</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;JENKINS_TOKEN&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>jenkins_token</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;경고: JENKINS_TOKEN 환경 변수가 설정되지 않았습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>pipeline_url</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>jenkins_url</span><span class=si>}</span><span class=s2>/job/my-project/buildWithParameters&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>pipeline_url</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>params</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;token&#39;</span><span class=p>:</span> <span class=n>jenkins_token</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;BRANCH&#39;</span><span class=p>:</span> <span class=n>branch</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;COMMIT&#39;</span><span class=p>:</span> <span class=n>commit</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=n>timeout</span><span class=o>=</span><span class=mi>10</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>201</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;CI 파이프라인이 트리거되었습니다. 브랜치: </span><span class=si>{</span><span class=n>branch</span><span class=si>}</span><span class=s2>, 커밋: </span><span class=si>{</span><span class=n>commit</span><span class=p>[:</span><span class=mi>8</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 빌드 상태 모니터링 (선택 사항)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;빌드 상태 확인 중...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>  <span class=c1># 빌드 시작 대기</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>  <span class=c1># 최대 5번 확인</span>
</span></span><span class=line><span class=cl>                <span class=n>status_response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>jenkins_url</span><span class=si>}</span><span class=s2>/job/my-project/lastBuild/api/json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>params</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;token&#39;</span><span class=p>:</span> <span class=n>jenkins_token</span><span class=p>},</span>
</span></span><span class=line><span class=cl>                    <span class=n>timeout</span><span class=o>=</span><span class=mi>10</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>status_response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>200</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>build_data</span> <span class=o>=</span> <span class=n>status_response</span><span class=o>.</span><span class=n>json</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                    <span class=n>build_number</span> <span class=o>=</span> <span class=n>build_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;number&#39;</span><span class=p>,</span> <span class=s1>&#39;Unknown&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=n>build_result</span> <span class=o>=</span> <span class=n>build_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;result&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>build_result</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;빌드 #</span><span class=si>{</span><span class=n>build_number</span><span class=si>}</span><span class=s2> 결과: </span><span class=si>{</span><span class=n>build_result</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;빌드 URL: </span><span class=si>{</span><span class=n>build_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;url&#39;</span><span class=p>,</span> <span class=n>jenkins_url</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=k>break</span>
</span></span><span class=line><span class=cl>                    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;빌드 #</span><span class=si>{</span><span class=n>build_number</span><span class=si>}</span><span class=s2> 실행 중...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;CI 파이프라인 트리거 실패: </span><span class=si>{</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=si>}</span><span class=s2> - </span><span class=si>{</span><span class=n>response</span><span class=o>.</span><span class=n>text</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;CI 파이프라인 트리거 중 오류 발생: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=n>trigger_ci_pipeline</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=실무-적용-고려사항-및-주의점>실무 적용 고려사항 및 주의점<a hidden class=anchor aria-hidden=true href=#실무-적용-고려사항-및-주의점>#</a></h3><table><thead><tr><th>항목</th><th>내용</th></tr></thead><tbody><tr><td>공유 전략</td><td>core.hooksPath 설정, Husky(허스키) 등 도구 사용</td></tr><tr><td>크로스 플랫폼</td><td>OS 별 스크립트 호환성 고려</td></tr><tr><td>보안</td><td>스크립트 검증 및 실행 권한 관리</td></tr><tr><td>유지보수</td><td>훅 스크립트의 주기적 업데이트 및 테스트 필요</td></tr></tbody></table><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>고려사항</th><th>설명</th><th>해결 방안</th></tr></thead><tbody><tr><td>팀 전체 공유</td><td>Git 훅은 기본적으로 로컬에 저장되어 공유되지 않음</td><td>Husky, pre-commit 같은 도구를 통해 패키지 관리자와 통합하여 설정 공유</td></tr><tr><td>성능 최적화</td><td>무거운 검사는 커밋/푸시 과정을 지연시킬 수 있음</td><td>필수적인 검사만 pre-commit 에 포함, 나머지는 pre-push 나 CI 단계로 이동</td></tr><tr><td>우회 가능성</td><td><code>--no-verify</code> 플래그로 클라이언트 측 훅을 우회할 수 있음</td><td>서버 측 훅과 함께 사용하여 중요한 검증 강제화</td></tr><tr><td>훅 디버깅</td><td>훅 실패 시 원인 파악이 어려울 수 있음</td><td>상세한 오류 메시지 제공, 로깅 기능 추가</td></tr><tr><td>다양한 개발 환경</td><td>팀원마다 다른 OS 환경에서 동일한 훅이 작동해야 함</td><td>크로스 플랫폼 스크립트 작성 또는 Docker 컨테이너 활용</td></tr><tr><td>새 팀원 온보딩</td><td>새 개발자가 프로젝트 설정에 익숙해져야 함</td><td>명확한 문서화, 자동화된 설정 스크립트 제공</td></tr><tr><td>점진적 도입</td><td>한번에 많은 훅을 도입하면 팀의 저항을 불러일으킬 수 있음</td><td>가장 가치 있는 훅부터 점진적으로 도입</td></tr><tr><td>예외 상황 처리</td><td>특정 상황에서는 검증을 건너뛰어야 할 필요가 있음</td><td>조건부 검사 로직 구현, 긴급 상황용 우회 메커니즘 마련</td></tr><tr><td>훅 테스트</td><td>훅 자체에 버그가 있을 수 있음</td><td>훅 스크립트에 대한 테스트 코드 작성</td></tr><tr><td>버전 관리</td><td>훅 스크립트의 변경 이력을 추적해야 함</td><td>훅 스크립트를 별도 저장소나 프로젝트 내 디렉토리에서 관리</td></tr></tbody></table><h4 id=git-hooks-공유-및-관리-도구>Git Hooks 공유 및 관리 도구<a hidden class=anchor aria-hidden=true href=#git-hooks-공유-및-관리-도구>#</a></h4><p>Git Hooks 를 팀 전체에서 효과적으로 공유하고 관리하기 위한 도구들이 있다:</p><ol><li><strong>Husky</strong>: npm 기반 프로젝트에서 Git Hooks 를 쉽게 설정하고 공유할 수 있는 도구</li><li><strong>pre-commit</strong>: 다양한 언어와 도구에 대한 훅 관리를 제공하는 프레임워크</li><li><strong>Lefthook</strong>: 빠르고 강력한 Git Hooks 관리자</li><li><strong>githooks</strong>: 팀 전체에서 훅을 공유하기 위한 간단한 솔루션</li><li><strong>git-hooks</strong>: 분산된 훅 관리를 위한 도구</li></ol><h4 id=cicd-시스템과의-통합>CI/CD 시스템과의 통합<a hidden class=anchor aria-hidden=true href=#cicd-시스템과의-통합>#</a></h4><p>Git Hooks 는 CI/CD 시스템과 효과적으로 통합할 수 있다:</p><ol><li><strong>진입점 검증</strong>: 로컬 훅으로 기본적인 검증을 수행하고 CI 시스템에서 더 철저한 검증</li><li><strong>CI 트리거</strong>: post-receive 훅을 사용하여 CI 파이프라인 자동 트리거</li><li><strong>결과 피드백</strong>: CI 결과를 Git 워크플로우에 통합하여 피드백 루프 강화</li></ol><h4 id=멀티환경-지원>멀티환경 지원<a hidden class=anchor aria-hidden=true href=#멀티환경-지원>#</a></h4><p>다양한 개발 환경에서 Git Hooks 를 일관되게 사용하기 위한 방법:</p><ol><li><strong>셸 스크립트 대신 고급 언어 사용</strong>: Python, Node.js 등 크로스 플랫폼 언어 활용</li><li><strong>Docker 컨테이너 활용</strong>: 일관된 실행 환경 제공</li><li><strong>환경 감지 및 적응</strong>: 실행 환경에 따라 다른 명령어 실행</li></ol><h3 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h3><ol><li><p><strong>검사 범위 최소화</strong>: 변경된 파일만 검사하여 불필요한 처리 방지</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-45-1><a class=lnlinks href=#hl-45-1>1</a>
</span><span class=lnt id=hl-45-2><a class=lnlinks href=#hl-45-2>2</a>
</span><span class=lnt id=hl-45-3><a class=lnlinks href=#hl-45-3>3</a>
</span><span class=lnt id=hl-45-4><a class=lnlinks href=#hl-45-4>4</a>
</span><span class=lnt id=hl-45-5><a class=lnlinks href=#hl-45-5>5</a>
</span><span class=lnt id=hl-45-6><a class=lnlinks href=#hl-45-6>6</a>
</span><span class=lnt id=hl-45-7><a class=lnlinks href=#hl-45-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 변경된 파일만 lint 검사 예시</span>
</span></span><span class=line><span class=cl><span class=nv>STAGED_FILES</span><span class=o>=</span><span class=k>$(</span>git diff --cached --name-only --diff-filter<span class=o>=</span>ACM <span class=p>|</span> grep <span class=s1>&#39;\.js$&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$STAGED_FILES</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  <span class=nb>exit</span> <span class=m>0</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>eslint <span class=nv>$STAGED_FILES</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>단계적 검증 전략</strong>: 가벼운 검사는 pre-commit 에, 무거운 검사는 pre-push 에 배치</p></li><li><p><strong>병렬 처리</strong>: 독립적인 검사는 병렬로 실행하여 시간 단축</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-46-1><a class=lnlinks href=#hl-46-1>1</a>
</span><span class=lnt id=hl-46-2><a class=lnlinks href=#hl-46-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 병렬 처리 예시</span>
</span></span><span class=line><span class=cl>npm run lint <span class=p>&amp;</span> npm run type-check <span class=p>&amp;</span> <span class=nb>wait</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>캐싱 활용</strong>: 이전에 검증된 파일의 결과를 캐싱하여 재사용</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-47-1><a class=lnlinks href=#hl-47-1>1</a>
</span><span class=lnt id=hl-47-2><a class=lnlinks href=#hl-47-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ESLint 캐싱 예시</span>
</span></span><span class=line><span class=cl>eslint --cache .
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>점진적 검증</strong>: 전체 검증은 CI 서버에서 수행하고, 로컬에서는 최소 검증</p></li><li><p><strong>타임아웃 설정</strong>: 무한 루프 방지를 위한 타임아웃 메커니즘 구현</p></li><li><p><strong>리소스 사용량 모니터링</strong>: 메모리, CPU 사용량을 주기적으로 확인하여 최적화</p></li></ol><h3 id=최신-동향>최신 동향<a hidden class=anchor aria-hidden=true href=#최신-동향>#</a></h3><table><thead><tr><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>자동화</td><td>GitOps 와 Git Hooks 통합</td><td>GitOps 워크플로우에서 Git Hooks 가 중요한 구성 요소로 자리 잡고 있으며, 인프라 변경 검증에 활용되고 있습니다.</td></tr><tr><td>보안</td><td>보안 중심 Git Hooks</td><td>소프트웨어 공급망 보안이 중요해짐에 따라 의존성 취약점 검사, 자격 증명 유출 방지, 코드 보안 분석을 자동화하는 훅이 표준화되고 있습니다.</td></tr><tr><td>표준화</td><td>언어별 표준 훅 템플릿</td><td>프로그래밍 언어와 프레임워크별로 최적화된 표준 Git Hooks 템플릿이 등장하여 개발자들이 쉽게 채택할 수 있게 되었습니다.</td></tr><tr><td>통합</td><td>AI 코드 리뷰 통합</td><td>AI 기반 코드 리뷰 도구가 Git Hooks 와 통합되어 커밋 전에 자동으로 코드 품질, 보안 취약점, 성능 문제를 분석하고 개선 제안을 제공합니다.</td></tr><tr><td>성능</td><td>경량화 및 성능 개선</td><td>증분 분석과 캐싱 기술의 발전으로 Git Hooks 의 실행 시간이 크게 단축되었으며, 대규모 프로젝트에서도 원활하게 작동합니다.</td></tr><tr><td>개발자 경험</td><td>인터랙티브 Git Hooks</td><td>개발자에게 더 나은 피드백을 제공하는 인터랙티브 훅이 등장하여, 문제 발생 시 자동 수정 제안이나 시각적 피드백을 제공합니다.</td></tr><tr><td>클라우드</td><td>클라우드 네이티브 훅</td><td>클라우드 네이티브 환경에 최적화된 Git Hooks 가 개발되어 Kubernetes 매니페스트 검증, 클라우드 리소스 정책 준수 확인 등을 자동화합니다.</td></tr><tr><td>관리</td><td>Git Hooks-as-a-Service</td><td>기업용 Git Hooks 관리 서비스가 등장하여 조직 전체의 훅 정책을 중앙에서 관리하고 모니터링할 수 있게 되었습니다.</td></tr></tbody></table><hr><h3 id=주목해야-할-기술>주목해야 할 기술<a hidden class=anchor aria-hidden=true href=#주목해야-할-기술>#</a></h3><table><thead><tr><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>클라우드 연계</td><td>서버리스 훅</td><td>클라우드 함수로 훅 실행, 유지보수 용이</td></tr><tr><td>자동화</td><td>Git Hooks 오케스트레이션</td><td>다양한 훅을 조직화하고 상호작용을 관리하는 고급 오케스트레이션 도구가 개발되고 있습니다.</td></tr><tr><td>인공지능</td><td>AI 기반 코드 검증</td><td>머신러닝 모델을 활용해 코드 패턴을 학습하고 버그, 보안 취약점, 성능 이슈를 예측하는 훅이 주목받고 있습니다.</td></tr><tr><td>컴플라이언스</td><td>규제 준수 자동화</td><td>금융, 의료 등 규제가 엄격한 산업에서 컴플라이언스 요구사항을 자동으로 검증하는 특수 목적 훅이 발전하고 있습니다.</td></tr><tr><td>보안</td><td>SBOM 생성 및 검증</td><td>소프트웨어 자재명세서 (SBOM) 생성 및 검증을 자동화하는 훅이 개발되어 소프트웨어 공급망 보안을 강화합니다.</td></tr><tr><td>보안</td><td>코드 서명</td><td>훅 스크립트 무결성 검증</td></tr><tr><td>협업</td><td>분산 팀 최적화</td><td>원격/분산 팀을 위한 협업 최적화 훅이 개발되어 시간대와 지역에 관계없이 일관된 개발 경험을 제공합니다.</td></tr></tbody></table><h3 id=앞으로의-전망>앞으로의 전망<a hidden class=anchor aria-hidden=true href=#앞으로의-전망>#</a></h3><table><thead><tr><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>자동화</td><td>전체 SDLC 통합</td><td>Git Hooks 가 소프트웨어 개발 수명 주기 (SDLC) 전반에 더 깊이 통합되어 요구사항부터 배포, 모니터링까지 자동화할 것으로 예상됩니다.</td></tr><tr><td>지능화</td><td>적응형 Git Hooks</td><td>프로젝트와 개발자의 패턴을 학습하여 최적의 검증 전략을 자동으로 조정하는 적응형 훅이 등장할 것으로 예상됩니다.</td></tr><tr><td>표준화</td><td>산업별 표준 확립</td><td>각 산업 분야에 최적화된 Git Hooks 표준이 확립되어 모범 사례가 널리 공유될 것으로 예상됩니다.</td></tr><tr><td>통합</td><td>개발 도구 생태계 통합</td><td>Git Hooks 가 IDE, 코드 에디터, 이슈 트래커, 지식 관리 시스템 등과 더욱 긴밀하게 통합될 것으로 예상됩니다.</td></tr><tr><td>확장</td><td>비개발 영역으로 확장</td><td>Git Hooks 의 개념이 소프트웨어 개발을 넘어 문서 관리, 디자인 시스템, 데이터 파이프라인 등으로 확장될 것으로 예상됩니다.</td></tr></tbody></table><h3 id=하위-주제로-분류하여-추가-학습-내용>하위 주제로 분류하여 추가 학습 내용<a hidden class=anchor aria-hidden=true href=#하위-주제로-분류하여-추가-학습-내용>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>설명</th></tr></thead><tbody><tr><td>기초</td><td>Git Hooks 설정 기초</td><td>Git Hooks 의 기본 설정 방법, 활성화/비활성화, 권한 설정 등 기초 지식</td></tr><tr><td>기초</td><td>프로그래밍 언어별 Git Hooks</td><td>다양한 언어 (Bash, Python, JavaScript 등) 로 Git Hooks 작성하기</td></tr><tr><td>도구</td><td>Husky 깊게 알아보기</td><td>JavaScript 프로젝트에서 가장 널리 사용되는 Git Hooks 관리 도구 마스터하기</td></tr><tr><td>도구</td><td>pre-commit 프레임워크</td><td>다양한 언어 지원이 가능한 pre-commit 프레임워크 활용법</td></tr><tr><td>고급</td><td>서버 측 Git Hooks 심화</td><td>깃랩, 깃허브 등 Git 호스팅 서비스에서의 서버 측 훅 구현</td></tr><tr><td>고급</td><td>CI/CD 파이프라인과 Git Hooks 통합</td><td>Jenkins, GitHub Actions, GitLab CI 등과 Git Hooks 연동 방법</td></tr><tr><td>고급</td><td>대규모 조직에서의 Git Hooks 관리</td><td>수백 개의 저장소와 개발자가 있는 환경에서 Git Hooks 관리 전략</td></tr><tr><td>보안</td><td>보안 중심 Git Hooks 구현</td><td>취약점 스캐닝, 비밀 정보 유출 방지, SAST/DAST 통합</td></tr><tr><td>성능</td><td>Git Hooks 성능 최적화</td><td>대규모 코드베이스에서 Git Hooks 성능 병목 현상 해결 방법</td></tr><tr><td>사례 연구</td><td>산업별 Git Hooks 사례 연구</td><td>금융, 의료, 정부 등 다양한 산업에서의 Git Hooks 적용 사례</td></tr></tbody></table><h3 id=추가-학습-내용>추가 학습 내용<a hidden class=anchor aria-hidden=true href=#추가-학습-내용>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>설명</th></tr></thead><tbody><tr><td>연관 기술</td><td>GitOps</td><td>Git 을 중심으로 한 운영 워크플로우와 Git Hooks 의 역할</td></tr><tr><td>연관 기술</td><td>정적 코드 분석</td><td>Git Hooks 와 함께 활용할 수 있는 정적 코드 분석 도구와 방법론</td></tr><tr><td>연관 기술</td><td>코드 품질 메트릭스</td><td>Git Hooks 로 측정 및 관리할 수 있는 코드 품질 지표</td></tr><tr><td>개발 방법론</td><td>TDD 와 Git Hooks</td><td>테스트 주도 개발에서 Git Hooks 를 활용하는 방법</td></tr><tr><td>개발 방법론</td><td>지속적 품질 관리</td><td>Git Hooks 를 활용한 지속적인 코드 품질 관리 전략</td></tr><tr><td>도구 통합</td><td>Docker 와 Git Hooks</td><td>컨테이너화된 환경에서 Git Hooks 구현 전략</td></tr><tr><td>도구 통합</td><td>코드 리뷰 도구와 Git Hooks</td><td>Git Hooks 와 코드 리뷰 프로세스 및 도구 통합</td></tr><tr><td>관리</td><td>Git Hooks 모니터링</td><td>Git Hooks 실행 현황 및 효과 모니터링 방법</td></tr><tr><td>관리</td><td>Git Hooks 문서화</td><td>팀 내 Git Hooks 사용 문서화 및 지식 공유 전략</td></tr><tr><td>성능</td><td>Git Hooks 벤치마킹</td><td>Git Hooks 성능 측정 및 비교 방법론</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>Husky</td><td>Git Hooks 를 손쉽게 관리하고 팀에 공유할 수 있게 해주는 도구</td></tr><tr><td>Lefthook</td><td>멀티 플랫폼 지원 훅 관리 도구</td></tr><tr><td>core.hooksPath</td><td>Git 훅 디렉토리 경로를 지정하는 Git 설정 옵션</td></tr></tbody></table><h2 id=용어-정리-1>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-1>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td><strong>pre-receive</strong></td><td>서버 측 훅: 푸시된 커밋 전체 검증</td></tr><tr><td><strong>Husky</strong></td><td>Git Hooks 관리 도구: 패키지.json 에 훅 설정 가능</td></tr></tbody></table><h2 id=용어-정리-2>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-2>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>Hook</td><td>특정 이벤트 발생 시 자동으로 실행되는 스크립트</td></tr><tr><td>pre-commit</td><td>커밋 전에 실행되는 Hook 스크립트</td></tr><tr><td>commit-msg</td><td>커밋 메시지를 검사하는 Hook</td></tr><tr><td>pre-receive</td><td>원격 저장소에서 푸시 전에 실행되는 서버 측 Hook</td></tr><tr><td>core.hooksPath</td><td>공통 Hook 디렉토리를 지정할 수 있는 Git 설정 항목</td></tr></tbody></table><h3 id=용어-정리-3>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-3>#</a></h3><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>Git Hooks</td><td>Git 워크플로우의 특정 이벤트가 발생할 때 자동으로 실행되는 사용자 정의 스크립트</td></tr><tr><td>클라이언트 측 훅</td><td>로컬 개발 환경에서 실행되는 Git Hooks 로, 개발자의 워크스테이션에서 작동</td></tr><tr><td>서버 측 훅</td><td>원격 저장소에서 실행되는 Git Hooks 로, 저장소 관리자가 설정하고 모든 사용자에게 적용</td></tr><tr><td>pre-commit</td><td>커밋이 생성되기 전에 실행되는 훅으로, 코드 검증에 주로 사용</td></tr><tr><td>pre-push</td><td>원격 저장소로 푸시하기 전에 실행되는 훅으로, 광범위한 테스트에 활용</td></tr><tr><td>post-receive</td><td>원격 저장소에서 푸시 작업이 완료된 후 실행되는 훅으로, 배포 자동화에 주로 사용</td></tr><tr><td>Husky</td><td>npm 기반 프로젝트에서 Git Hooks 를 쉽게 설정하고 관리할 수 있는 도구</td></tr><tr><td>lint-staged</td><td>스테이징된 파일에 대해서만 linter 를 실행하는 도구로, Git Hooks 와 함께 자주 사용</td></tr><tr><td>pre-commit 프레임워크</td><td>다양한 언어와 도구에 대한 훅 관리를 제공하는 Python 기반 프레임워크</td></tr><tr><td>Conventional Commits</td><td>커밋 메시지에 대한 규약으로, Git Hooks 를 통해 강제할 수 있음</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><p><a href=https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks>Git 공식 문서 - Git Hooks</a></p></li><li><p><a href=https://typicode.github.io/husky/#/>Husky 공식 문서</a></p></li><li><p><a href=https://pre-commit.com/>pre-commit 공식 사이트</a></p></li><li><p><a href=https://docs.github.com/en/actions>GitHub Actions Docs</a></p></li></ul><h2 id=참고-및-출처-1>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-1>#</a></h2><ul><li><a href=https://git-scm.com/book/ms/v2/Customizing-Git-Git-Hooks>Git 공식 문서</a></li><li><a href=https://www.atlassian.com/git/tutorials/git-hooks>Atlassian Git 튜토리얼</a></li><li><a href=https://yozm.wishket.com/magazine/detail/2910/>2025 DevOps 트렌드 분석</a></li></ul><h2 id=참고-및-출처-2>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-2>#</a></h2><ul><li><a href=https://git-scm.com/book/ko/v2/Customizing-Git-Git-Hooks>Git 공식 문서: Git Hooks</a></li><li><a href=https://www.atlassian.com/git/tutorials/git-hooks>Atlassian Git Hooks 가이드</a></li><li><a href=https://typicode.github.io/husky/#/>Husky 공식 문서</a></li><li><a href=https://yozm.wishket.com/magazine/detail/2910/>2025 DevOps 트렌드 분석</a></li></ul><h3 id=참고-및-출처-3>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-3>#</a></h3><ul><li><a href=https://git-scm.com/docs/githooks>Git Hooks 공식 문서</a></li><li><a href=https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks>Pro Git Book - Git Hooks 섹션</a></li><li><a href=https://www.atlassian.com/git/tutorials/git-hooks>Atlassian Git Hooks 튜토리얼</a></li><li><a href=https://typicode.github.io/husky/>Husky - Git Hooks 관리 도구</a></li><li><a href=https://pre-commit.com/>pre-commit 프레임워크 문서</a></li><li><a href=https://docs.gitlab.com/ee/administration/server_hooks.html>GitLab Server Hooks 문서</a></li><li><a href=https://github.blog/2021-06-15-integrating-git-hooks-github-actions/>GitHub Actions와 Git Hooks 통합 가이드</a></li><li><a href=https://medium.com/better-programming/improving-code-quality-with-git-hooks-54d004f3d761>Git Hooks를 활용한 코드 품질 관리</a></li><li><a href=https://github.com/evilmartians/lefthook>Lefthook - 빠른 Git Hooks 관리자</a></li><li><a href=https://www.infoq.com/articles/continuous-integration-git-hooks/>Git Hooks와 지속적 통합 파이프라인 구축</a></li></ul><hr></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/devops-and-infrastructure/>DevOps-and-Infrastructure</a></li><li><a href=https://buenhyden.github.io/tags/version-control-systems/>Version-Control-Systems</a></li><li><a href=https://buenhyden.github.io/tags/git-workflow/>Git-Workflow</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/software-engineering/quality-assurance-and-testing/verification-and-validation/static-code-analysis/><span class=title>« Prev</span><br><span>정적 코드 분석 (Static Code analysis)</span>
</a><a class=next href=https://buenhyden.github.io/posts/software-engineering/quality-assurance-and-testing/quality-metrics/lines-of-code/><span class=title>Next »</span><br><span>코드 크기 메트릭(Lines of Code, LOC)</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>