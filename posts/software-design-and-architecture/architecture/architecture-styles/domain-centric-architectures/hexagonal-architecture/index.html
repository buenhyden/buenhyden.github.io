<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Hexagonal Architecture | hyunyoun's Blog</title><meta name=keywords content="Software-Engineering,Design-and-Architecture,Architecture-Styles,Domain-Centric-Architectures,Hexagonal-Architecture,Ports-and-Adapters-Architecture"><meta name=description content="애플리케이션의 핵심 비즈니스 로직을 외부 요소로부터 분리하여 유연하고 유지보수가 용이한 시스템을 구축하는 것을 목표로 한다"><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-design-and-architecture/architecture/architecture-styles/domain-centric-architectures/hexagonal-architecture/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/software-design-and-architecture/architecture/architecture-styles/domain-centric-architectures/hexagonal-architecture/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-design-and-architecture/architecture/architecture-styles/domain-centric-architectures/hexagonal-architecture/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-design-and-architecture/architecture/architecture-styles/domain-centric-architectures/hexagonal-architecture/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Hexagonal Architecture"><meta property="og:description" content="애플리케이션의 핵심 비즈니스 로직을 외부 요소로부터 분리하여 유연하고 유지보수가 용이한 시스템을 구축하는 것을 목표로 한다"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Hexagonal Architecture"><meta name=twitter:description content="애플리케이션의 핵심 비즈니스 로직을 외부 요소로부터 분리하여 유연하고 유지보수가 용이한 시스템을 구축하는 것을 목표로 한다"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Hexagonal Architecture","item":"https://buenhyden.github.io/posts/software-design-and-architecture/architecture/architecture-styles/domain-centric-architectures/hexagonal-architecture/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a></div><h1>Hexagonal Architecture</h1><div class=post-description>애플리케이션의 핵심 비즈니스 로직을 외부 요소로부터 분리하여 유연하고 유지보수가 용이한 시스템을 구축하는 것을 목표로 한다</div></header><div class=post-content><h2 id=hexagonal-architecture>Hexagonal Architecture<a hidden class=anchor aria-hidden=true href=#hexagonal-architecture>#</a></h2><hr><h2 id=hexagonal-architecture헥사고날-아키텍처-ports-and-adapters-아키텍처-심층-분석>Hexagonal Architecture(헥사고날 아키텍처, Ports and Adapters 아키텍처) 심층 분석<a hidden class=anchor aria-hidden=true href=#hexagonal-architecture헥사고날-아키텍처-ports-and-adapters-아키텍처-심층-분석>#</a></h2><h3 id=1-태그-정리>1. 태그 정리<a hidden class=anchor aria-hidden=true href=#1-태그-정리>#</a></h3><ul><li>Hexagonal-Architecture</li><li>Ports-and-Adapters</li><li>Domain-Driven-Design</li><li>Structural-Patterns</li></ul><h3 id=2-분류-구조-분석-및-개선-제안>2. 분류 구조 분석 및 개선 제안<a hidden class=anchor aria-hidden=true href=#2-분류-구조-분석-및-개선-제안>#</a></h3><p>현재 분류:</p><ul><li>Software Engineering > Design and Architecture > Architecture Styles and Patterns > Architecture Styles > Structural > Clean Architecture</li></ul><p><strong>분석 및 개선안</strong><br>Hexagonal Architecture(헥사고날 아키텍처, Ports and Adapters) 는 Clean Architecture, Onion Architecture 등과 핵심 철학을 공유하지만, 본질적으로는 독립적인 아키텍처 스타일입니다. Clean Architecture 내부 하위 분류로 보다는 Structural 의 바로 아래에 위치시키는 것이 더 명확합니다.<br><strong>제안:</strong></p><ul><li>Software Engineering > Design and Architecture > Architecture Styles and Patterns > Architecture Styles > Structural > Hexagonal Architecture</li></ul><hr><h3 id=3-200-자-요약-설명>3. 200 자 요약 설명<a hidden class=anchor aria-hidden=true href=#3-200-자-요약-설명>#</a></h3><p>헥사고날 아키텍처는 비즈니스 로직과 외부 시스템 (데이터베이스, UI 등) 을 포트 (Ports) 와 어댑터 (Adapters) 구조로 분리해 느슨하게 결합된 시스템을 구현하는 아키텍처 패턴입니다. 이를 통해 핵심 로직은 외부 기술 변화에 영향을 받지 않고, 높은 유연성과 테스트 용이성이 확보됩니다 <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">1</a><a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">3</a><a href="https://bitloops.com/docs/bitloops-language/learning/software-architecture/hexagonal-architecture?utm_source=chatgpt.com" title="Hexagonal Architecture: Building Modular & Testable Software …">5</a>.</p><hr><h3 id=4-전체-개요-250-자>4. 전체 개요 (250 자)<a hidden class=anchor aria-hidden=true href=#4-전체-개요-250-자>#</a></h3><p>Hexagonal Architecture(헥사고날 아키텍처, Ports and Adapters 패턴) 는 1990 년대 Alistair Cockburn 이 제안한 소프트웨어 아키텍처 스타일로, 애플리케이션의 비즈니스 로직 (코어) 과 외부 요소 (Databases, UI, 외부 API 등) 를 확실하게 구분하고, 포트 (Port) 와 어댑터 (Adapter) 를 통해 통신함으로써 높은 모듈성, 확장성, 유지보수성을 달성합니다. 도메인 주도 설계 (DDD), 자동화 테스트, 기술 교체 등을 유연하게 적용할 수 있어 현대 개발에서 널리 활용되어 왔습니다 <a href="https://softengbook.org/articles/hexagonal-architecture?utm_source=chatgpt.com" title="What is a Hexagonal Architecture?–Software Engineering">2</a><a href="https://bitloops.com/docs/bitloops-language/learning/software-architecture/hexagonal-architecture?utm_source=chatgpt.com" title="Hexagonal Architecture: Building Modular & Testable Software …">4</a>.</p><h3 id=5-핵심-개념-및-실무-연관성>5. 핵심 개념 및 실무 연관성<a hidden class=anchor aria-hidden=true href=#5-핵심-개념-및-실무-연관성>#</a></h3><h4 id=헥사고날-아키텍처-핵심-개념>헥사고날 아키텍처 핵심 개념<a hidden class=anchor aria-hidden=true href=#헥사고날-아키텍처-핵심-개념>#</a></h4><ul><li><strong>코어 도메인 (비즈니스 로직) 보호:</strong> 핵심 로직 (Entities, Domain) 이 외부 환경과 독립적으로 존재.</li><li><strong>포트 (Port):</strong> 코어와 외부를 연결하는 경계 역할, 추상 인터페이스.<ul><li>인바운드 포트 (Inbound Port): 외부에서 코어로의 입력 통로 (API, UI 등)</li><li>아웃바운드 포트 (Outbound Port): 코어에서 외부로의 출력 통로 (DB, 메시징 등)</li></ul></li><li><strong>어댑터 (Adapter):</strong> 외부 요소 (데이터베이스, UI, API, 테스트 등) 와 포트 간 변환자 역할</li><li><strong>의존성 방향:</strong> 항상 외부가 코어에 의존 (의존성 역전)</li></ul><h5 id=실무-연관성>실무 연관성<a hidden class=anchor aria-hidden=true href=#실무-연관성>#</a></h5><ul><li>테스트 코드가 외부 영향없이 순수하게 코어 로직만을 검증할 수 있음</li><li>새로운 외부 시스템 추가 또는 기존 시스템 교체 시, 어댑터만 수정/추가 → 유지보수가 용이</li></ul><h3 id=6-주제별-심층-조사-분석>6. 주제별 심층 조사 분석<a hidden class=anchor aria-hidden=true href=#6-주제별-심층-조사-분석>#</a></h3><h4 id=등장-및-발전-배경>등장 및 발전 배경<a hidden class=anchor aria-hidden=true href=#등장-및-발전-배경>#</a></h4><ul><li>객체지향 아키텍처에서 Layered Architecture 의 결합도 한계를 극복</li><li>UI 코드, DB 코드와 비즈니스 로직이 뒤섞이며 유지보수성 저하, 테스트 자동화 어려움</li><li>알리스터 코크번 (Alistair Cockburn) 이 1990 년대 개념을 처음 제안, 2005 년 Ports and Adapters 라는 명칭으로 정립 <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">1</a></li></ul><h4 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h4><table><thead><tr><th>구분</th><th>목적 및 필요성</th><th>설명</th></tr></thead><tbody><tr><td>목적</td><td>도메인 로직 보호</td><td>기술 변화/외부 환경과 무관한 핵심 로직 보존</td></tr><tr><td>필요성</td><td>변화 대응성</td><td>UI, DB, 메시징 등 외부 시스템 교체에 유연하게 대응</td></tr></tbody></table><h4 id=주요-기능-및-역할-관계-구조>주요 기능 및 역할 (관계 구조)<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할-관계-구조>#</a></h4><ul><li><strong>기능</strong><ul><li>포트 및 어댑터를 통한 외부와 내부 (코어) 분리</li><li>각종 인터페이스를 통해 다양한 외부 시스템 수용</li></ul></li><li><strong>역할</strong><ul><li>도메인 로직과 인프라 구현체의 완전한 분리</li><li>테스트 자동화 및 기술 교체 용이성 제공</li></ul></li></ul><h5 id=관계-포트와-어댑터는-항상-코어-도메인-에만-의존>관계: 포트와 어댑터는 항상 코어 (도메인) 에만 의존<a hidden class=anchor aria-hidden=true href=#관계-포트와-어댑터는-항상-코어-도메인-에만-의존>#</a></h5><h4 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h4><ul><li>완전한 결합도 분리 (Separation of Concerns)</li><li>새로운 외부시스템 (외부 API, 데이터 시스템 등) 손쉬운 도입</li><li>테스트 용이성, 스터빙 (Stub)·목 (Mock) 테스트 지원</li><li>도메인 드리븐 설계 (DDD) 와 강한 연계성</li></ul><h4 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h4><ul><li>외부 시스템은 반드시 지정된 포트 (인터페이스) 를 통해서만 접근 가능</li><li>어댑터는 포트와 외부 시스템 간의 데이터/프로토콜 변환 담당</li><li>핵심 로직 (코어) 는 외부 컴포넌트에 절대 의존하지 않음</li></ul><h4 id=주요-원리-및-작동-원리-다이어그램>주요 원리 및 작동 원리 (다이어그램)<a hidden class=anchor aria-hidden=true href=#주요-원리-및-작동-원리-다이어그램>#</a></h4><pre class=mermaid>flowchart TD
    subgraph Core[코어(도메인/비즈니스 로직)]
      E[Entity/Domain] --&gt; U[Use Case or Service]
    end
    subgraph Ports[포트]
      PI[Inbound Port (Input)] -.-&gt; U
      PO[Outbound Port (Output)] -.-&gt; U
    end
    subgraph Adapters[어댑터]
      AI[Adapter-In (예: REST API, UI)] --&gt; PI
      AO[Adapter-Out (예: DB, MessageQueue)] --&gt; PO
    end
    AI -.-&gt; Core
    AO -.-&gt; Core
</pre><p><strong>설명:</strong></p><ul><li>코어 (도메인) 는 오직 자신의 규칙만 가진다.</li><li>포트 (Interface) 는 도메인 서비스의 입력/출력 경계</li><li>어댑터 (Adaptter) 는 실제 입력/출력을 담당하며, 인바운드 (사용자/외부 입력), 아웃바운드 (데이터저장/API 등) 로 구분</li></ul><h4 id=필수선택-구성요소-정리>필수/선택 구성요소 정리<a hidden class=anchor aria-hidden=true href=#필수선택-구성요소-정리>#</a></h4><table><thead><tr><th>구분</th><th>구성요소</th><th>역할</th><th>비고</th></tr></thead><tbody><tr><td>필수</td><td>도메인 (엔티티)</td><td>핵심 비즈니스 로직</td><td>DB, UI, 외부 무관</td></tr><tr><td>필수</td><td>포트 (Port)</td><td>경계 인터페이스</td><td>인바운드/아웃바운드 구분</td></tr><tr><td>필수</td><td>어댑터 (Adapter)</td><td>변환자</td><td>실제 구현체 연결</td></tr><tr><td>선택</td><td>서비스계층</td><td>복잡한 도메인 로직 관리</td><td>복잡도/규모마다 필요에 따라</td></tr></tbody></table><h4 id=구현-기법-및-방법>구현 기법 및 방법<a hidden class=anchor aria-hidden=true href=#구현-기법-및-방법>#</a></h4><ul><li>DI(Dependency Injection, 의존성 주입) 사용</li><li>포트 (Interface) 작성 → 어댑터에서 구현체 주입</li><li>언어/프레임워크에 무관하게 유연성 있는 구조 설계</li><li>외부 시스템 추가 (eg: GraphQL, gRPC 등) 는 포트와 어댑터만 추가</li></ul><h4 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>유지보수성</td><td>포트/어댑터만 수정하여 기술 교체 가능, 핵심로직 불변 <a href="https://bitloops.com/docs/bitloops-language/learning/software-architecture/hexagonal-architecture?utm_source=chatgpt.com" title="Hexagonal Architecture: Building Modular & Testable Software …">4</a></td></tr><tr><td></td><td>테스트 용이성</td><td>코어만 독립테스트 가능, TDD·BDD 적용 수월 <a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">3</a><a href="https://bitloops.com/docs/bitloops-language/learning/software-architecture/hexagonal-architecture?utm_source=chatgpt.com" title="Hexagonal Architecture: Building Modular & Testable Software …">5</a></td></tr><tr><td></td><td>확장·유연성</td><td>포트와 어댑터만 추가하면 새로운 인터페이스 수용 <a href="https://bitloops.com/docs/bitloops-language/learning/software-architecture/hexagonal-architecture?utm_source=chatgpt.com" title="Hexagonal Architecture: Building Modular & Testable Software …">3</a></td></tr><tr><td></td><td>개발 병렬화</td><td>팀별로 코어와 어댑터 개발 분담 가능 <a href="https://bitloops.com/docs/bitloops-language/learning/software-architecture/hexagonal-architecture?utm_source=chatgpt.com" title="Hexagonal Architecture: Building Modular & Testable Software …">5</a></td></tr></tbody></table><h4 id=단점과-문제점-그리고-해결방안>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안>#</a></h4><p><strong>단점</strong></p><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>초기 복잡성</td><td>다양한 인터페이스/어댑터 작성</td><td>점진적 도입, 템플릿 활용</td></tr><tr><td></td><td>러닝커브</td><td>설계 패턴 학습필수</td><td>실전 예제, 문서화</td></tr><tr><td></td><td>작은 시스템 과적합</td><td>단순한 시스템에 불필요 복잡성</td><td>프로젝트 규모 고려 적용</td></tr></tbody></table><p><strong>문제점</strong></p><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>어댑터 관리 증가</td><td>외부 시스템 다양화</td><td>유지보수 비용 증가</td><td>의존성 분석</td><td>관심사 분리 철저</td><td>어댑터 통합, 도구화</td></tr><tr><td></td><td>디버깅 복잡성</td><td>여러 계층·추상화</td><td>문제 추적 어려움</td><td>상세 로깅</td><td>계층별 로깅</td><td>로그, 트레이싱 도구 사용</td></tr></tbody></table><h4 id=도전-과제-최신-트렌드-반영>도전 과제 (최신 트렌드 반영)<a hidden class=anchor aria-hidden=true href=#도전-과제-최신-트렌드-반영>#</a></h4><ul><li>마이크로서비스 (MSA) 와의 자연스러운 연동</li><li>다양한 외부 인터페이스 (GRPC, GraphQL, Event-Driven) 지원</li><li>분산 트레이싱 및 관측성 향상</li><li>대규모 어댑터 및 포트 관리 표준화 방안 마련</li></ul><h4 id=분류-기준에-따른-종류-및-유형>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형>#</a></h4><table><thead><tr><th>분류 기준</th><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>적용 범위</td><td>전체 시스템 적용</td><td>모든 계층에 철저 적용</td></tr><tr><td></td><td>부분 적용</td><td>핵심 로직에만 적용, 일부 레거시 호환</td></tr><tr><td>포트·어댑터 수</td><td>단일/복수 포트</td><td>단일 서비스/복합 시스템 지원</td></tr><tr><td>도메인 강조 여부</td><td>DDD 통합형</td><td>도메인 주도 설계 기반 구조</td></tr><tr><td></td><td>비즈니스 단순형</td><td>단순 서비스에 적합</td></tr></tbody></table><h4 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h4><table><thead><tr><th>적용 영역</th><th>사용 구조/기술</th><th>목적</th><th>효과</th></tr></thead><tbody><tr><td>백엔드 API</td><td>REST/GraphQL/Message</td><td>유연한 확장, 다양한 클라이언트 호환</td><td>유지보수 용이/테스트 자동화</td></tr><tr><td>데이터 변환</td><td>DB 선택 (Oracle/MySQL 등)</td><td>DB 교체/병렬 운용</td><td>코어 수정 없이 데이터 저장소 교체</td></tr><tr><td>외부 시스템 연결</td><td>Adapter 통한 3rd Party 연동</td><td>외부 API/메시징 등 연결</td><td>서비스중단 없이 확장/교체</td></tr></tbody></table><h4 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h4><h5 id=시나리오>시나리오<a hidden class=anchor aria-hidden=true href=#시나리오>#</a></h5><p>이커머스 주문 시스템에서 REST API, 메시지 큐, 데이터베이스를 독립적으로 교체 가능한 구조로 설계함.</p><h5 id=시스템-구성>시스템 구성<a hidden class=anchor aria-hidden=true href=#시스템-구성>#</a></h5><ul><li>도메인 (주문, 결제, 배송)</li><li>인바운드 어댑터 (REST API, CLI, 메시지 큐 consumer)</li><li>아웃바운드 어댑터 (Database, 외부 결제 API)</li><li>포트 정의 (각 기능 별 입력/출력 인터페이스)</li></ul><h5 id=시스템-구성-다이어그램>시스템 구성 다이어그램<a hidden class=anchor aria-hidden=true href=#시스템-구성-다이어그램>#</a></h5><pre class=mermaid>graph TD
  subgraph Core
    O[주문 도메인 서비스]
    P[결제 도메인 서비스]
    D[배송 도메인 서비스]
  end
  REST[REST API Adapter]--&gt;O
  MQ[Message Queue Adapter]--&gt;O
  CLI[CLI Adapter]--&gt;O
  O--&gt;|Outbound Port|DB[DB Adapter]
  O--&gt;|Outbound Port|G[외부 결제 Adapter]
  D--&gt;|Outbound Port|SH[Shipping API Adapter]
</pre><h5 id=workflow>Workflow<a hidden class=anchor aria-hidden=true href=#workflow>#</a></h5><ul><li>REST API/메시지 큐/CLI 등 다양한 입력 어댑터를 통해 주문 요청 수신</li><li>코어 도메인 (주문, 결제, 배송) 서비스에서 비즈니스 로직 실행</li><li>각종 아웃바운드 포트/어댑터 (DB 저장, 결제 API, 배송 API) 로 요청 전송</li></ul><h5 id=역할>역할<a hidden class=anchor aria-hidden=true href=#역할>#</a></h5><ul><li>인바운드 어댑터: 외부 입력 수집 및 포트 호출</li><li>코어 도메인: 핵심 비즈니스 로직 처리</li><li>아웃바운드 어댑터: 외부 시스템과의 통신 구현</li></ul><h5 id=유무에-따른-차이점>유무에 따른 차이점<a hidden class=anchor aria-hidden=true href=#유무에-따른-차이점>#</a></h5><ul><li>미적용 시 변경·확장 비용 증가, 테스트 어려움</li><li>적용 시 외부 시스템 추가/교체 용이, 자동화 테스트 가능</li></ul><h5 id=구현-예시-python>구현 예시 (Python)<a hidden class=anchor aria-hidden=true href=#구현-예시-python>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span><span class=lnt id=hl-2-20><a class=lnlinks href=#hl-2-20>20</a>
</span><span class=lnt id=hl-2-21><a class=lnlinks href=#hl-2-21>21</a>
</span><span class=lnt id=hl-2-22><a class=lnlinks href=#hl-2-22>22</a>
</span><span class=lnt id=hl-2-23><a class=lnlinks href=#hl-2-23>23</a>
</span><span class=lnt id=hl-2-24><a class=lnlinks href=#hl-2-24>24</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 포트 정의</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderPort</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>place_order</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 도메인 서비스/유스케이스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderService</span><span class=p>(</span><span class=n>OrderPort</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>place_order</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 주문 핵심 로직 처리</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 인바운드 어댑터 예시 (REST API)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderRestAdapter</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>port</span><span class=p>:</span> <span class=n>OrderPort</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>port</span> <span class=o>=</span> <span class=n>port</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>handle_request</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>order</span> <span class=o>=</span> <span class=n>parse_order</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=o>.</span><span class=n>place_order</span><span class=p>(</span><span class=n>order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 아웃바운드 어댑터 예시 (DB 연동)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderDBAdapter</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># DB 저장 로직</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=실무에서-효과적으로-적용하기-위한-고려사항-및-권장사항>실무에서 효과적으로 적용하기 위한 고려사항 및 권장사항<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-권장사항>#</a></h4><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>계층 (포트/어댑터) 명확화</td><td>추상화 인터페이스와 실제 구현 구분</td><td>명확한 네이밍, 코드 분리</td></tr><tr><td>테스트 전략</td><td>코어 단위 테스트 중심</td><td>모킹 (Mock), 스터빙 활용</td></tr><tr><td>문서화 및 코드리뷰</td><td>설계/개발 일관성 유지</td><td>Mermaid 다이어그램 활용</td></tr><tr><td>유지보수성</td><td>어댑터/포트 확장성, 코드 일관성</td><td>모듈별 책임 명확화</td></tr></tbody></table><h4 id=최적화하기-위한-고려사항-및-권장사항>최적화하기 위한 고려사항 및 권장사항<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-권장사항>#</a></h4><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>어댑터 성능 최적화</td><td>I/O 나 외부 시스템 호출 최적화</td><td>캐싱, 비동기 처리 도입</td></tr><tr><td>DI 활용</td><td>객체 주입을 통한 결합도 감소</td><td>프레임워크 DI 컨테이너 활용</td></tr><tr><td>로깅/트레이싱</td><td>계층별 모니터링</td><td>표준화된 로그 전략, 오픈소스 도구 활용</td></tr></tbody></table><h4 id=주제와-관련하여-주목할-내용-정리>주제와 관련하여 주목할 내용 정리<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용-정리>#</a></h4><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>이론</td><td>포트와 어댑터 (Ports/Adapters)</td><td>경계 추상화</td><td>도메인과 외부 결합 최소화, 규격 표준화</td></tr><tr><td>실무</td><td>테스트 전략</td><td>독립 테스트</td><td>어댑터 모킹 (Mock) 중심 유닛테스트</td></tr><tr><td>성능</td><td>Adapter 최적화</td><td>비동기 처리</td><td>I/O 병목 최소화, 스케일링 대응</td></tr><tr><td>확장</td><td>DDD 조합</td><td>도메인 중심</td><td>복잡 비즈니스 로직 분할·보호</td></tr></tbody></table><h4 id=반드시-학습해야할-내용>반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#반드시-학습해야할-내용>#</a></h4><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>패턴</td><td>디커플링 (Decoupling)</td><td>의존성 분리</td><td>도메인/외부 시스템의 완전한 분리 원칙 실천</td></tr><tr><td>코딩</td><td>DI/IoC</td><td>의존성 주입/제어의 역전</td><td>프레임워크별 객체 생성, 주입 메커니즘 이해</td></tr><tr><td>아키텍처</td><td>계층화 설계</td><td>포트/어댑터, 도메인 계층</td><td>각 계층 역할 명확화 및 구조화 연습</td></tr><tr><td>운영</td><td>자동화 테스트</td><td>단위/통합 테스트</td><td>유지보수성 증진, CI/CD 연동</td></tr></tbody></table><h3 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h3><table><thead><tr><th>카테고리</th><th>용어 (한/영)</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>포트 (Port)</td><td>내부 (도메인) 와 외부 시스템 간 통신을 위한 인터페이스</td></tr><tr><td>아키텍처</td><td>어댑터 (Adapter)</td><td>포트와 외부 시스템을 연결하는 실제 구현체</td></tr><tr><td>아키텍처</td><td>의존성 역전 (Dependency Inversion)</td><td>외부 코드가 내부 (코어) 에 의존하게 설계</td></tr><tr><td>테스트</td><td>모킹 (Mock)/스터빙 (Stub)</td><td>가짜 구현체를 통한 코어 테스트</td></tr></tbody></table><h3 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h3><ul><li><a href=https://jhumelsine.github.io/2023/10/24/hexagonal-architecture-introduction.html>Hexagonal Architecture – An Introduction</a></li><li><a href=https://en.wikipedia.org/wiki/Hexagonal_architecture_(software)>Hexagonal architecture (software) – Wikipedia</a></li><li><a href=https://scalastic.io/en/hexagonal-architecture/>Everything You Need to Know About Hexagonal Architecture</a></li><li><a href=https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html>Hexagonal architecture pattern - AWS Prescriptive Guidance</a></li><li><a href=https://www.geeksforgeeks.org/system-design/hexagonal-architecture-system-design/>Hexagonal Architecture - System Design - GeeksforGeeks</a></li><li><a href=https://www.numberanalytics.com/blog/mastering-hexagonal-architecture>Mastering Hexagonal Architecture</a></li><li><a href=https://dev.to/buarki/hexagonal-architectureports-and-adapters-clarifying-key-concepts-using-go-14oo>Hexagonal Architecture/Ports And Adapters - DEV Community</a></li></ul><hr><hr><h2 id=hexagonal-architecture헥사고날-아키텍처-ports-and-adapters-아키텍처-계속-심화-정리>Hexagonal Architecture(헥사고날 아키텍처, Ports and Adapters 아키텍처) 계속 심화 정리<a hidden class=anchor aria-hidden=true href=#hexagonal-architecture헥사고날-아키텍처-ports-and-adapters-아키텍처-계속-심화-정리>#</a></h2><h3 id=헥사고날-아키텍처와-유사-아키텍처-비교>헥사고날 아키텍처와 유사 아키텍처 비교<a hidden class=anchor aria-hidden=true href=#헥사고날-아키텍처와-유사-아키텍처-비교>#</a></h3><table><thead><tr><th>구분</th><th>헥사고날 아키텍처</th><th>Layered 아키텍처</th><th>클린 아키텍처 (Clean Architecture)</th></tr></thead><tbody><tr><td>구조 개념</td><td>코어, 포트, 어댑터로 모든 외부와 내부 분리</td><td>(프레젠테이션 → 도메인 → 데이터) 등 계층 다중</td><td>엔터티, 유스케이스, 인터페이스 어댑터 등 중심 구조</td></tr><tr><td>외부 시스템 연결 방식</td><td>어댑터가 포트를 통해 독립적으로 연결</td><td>계층 간 직접 호출/의존</td><td>꼭 내부로만 의존성이 향하도록 설계</td></tr><tr><td>테스트 용이성</td><td>코어만 독립 테스트 매우 용이</td><td>DB, UI 등 외부의존성 코드 분리 어려움</td><td>계층별로 단위 테스트 체계화</td></tr><tr><td>기술/환경 교체 유연성</td><td>매우 높음</td><td>낮음</td><td>매우 높음</td></tr></tbody></table><h3 id=실제-적용확장-패턴-및-현대-트렌드>실제 적용/확장 패턴 및 현대 트렌드<a hidden class=anchor aria-hidden=true href=#실제-적용확장-패턴-및-현대-트렌드>#</a></h3><ul><li><strong>마이크로서비스 아키텍처 (MSA, Microservices Architecture)</strong><br>각 마이크로서비스마다 헥사고날 아키텍처 적용. 서비스별 독립 배포/확장과 변경 용이성 증대.</li><li><strong>Event Driven Architecture (이벤트 기반 아키텍처)</strong><br>메시지 버스, 큐 (Queue), 이벤트 소싱 등 신규 외부 연결 도입 시 Outbound Adapter 만으로 확장이 간편.</li><li><strong>Serverless (서버리스) 환경 통합</strong><br>각 람다 (함수) 에 포트/어댑터 구조 적용, 다양한 트리거 (HTTP, 이벤트, 큐 등) 처리 일관화.</li></ul><h3 id=확장-적용-tip-과-세부-실무-전략>확장 적용 TIP 과 세부 실무 전략<a hidden class=anchor aria-hidden=true href=#확장-적용-tip-과-세부-실무-전략>#</a></h3><ol><li><p><strong>코어 로직은 Domain Layer(도메인 계층) 만, 외부 인터페이스는 반드시 어댑터 생성</strong></p><ul><li>신규 API, 외부 공급자 (결제, 알림 등) 도입에도 핵심 비즈니스 코드에 영향 없음</li></ul></li><li><p><strong>Port(포트) 를 인터페이스로, Adapter(어댑터) 를 구현 클래스로 설계</strong></p><ul><li><p>Python 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 포트 정의 (인터페이스)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PaymentPort</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>execute_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 어댑터 구현 (외부 결제 모듈 연동)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ExternalPaymentAdapter</span><span class=p>(</span><span class=n>PaymentPort</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>execute_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 외부 결제 API 호출 및 결과 반환</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span></code></pre></td></tr></table></div></div></li></ul></li><li><p><strong>인바운드/아웃바운드 어댑터 의존성 분리</strong></p><ul><li>인바운드: REST, CLI, 메시지 소비자 등</li><li>아웃바운드: DB, 3rd party API, 큐 생산자 등</li></ul></li><li><p><strong>CI(Continuous Integration, 지속적 통합) 파이프라인에서 포트 - 어댑터 일관성 검증</strong></p><ul><li>계층별 Mock 테스트 (CI 파이프라인에 통합)</li><li>변경 감지 시 어댑터 단위로 영향 분석</li></ul></li></ol><h3 id=추가적으로-주목할-최신-트렌드-및-도전-과제>추가적으로 주목할 최신 트렌드 및 도전 과제<a hidden class=anchor aria-hidden=true href=#추가적으로-주목할-최신-트렌드-및-도전-과제>#</a></h3><ul><li><strong>클라우드 네이티브 개발</strong>: 다양한 배포 환경 (컨테이너, 클라우드 API 등) 에 어댑터 패턴 조합.</li><li><strong>자동화 테스트/관측성 (Observability)</strong>: 포트 기반 유닛테스트, 계층별 로깅/트레이싱으로 서비스 연계 투명성 향상.</li><li><strong>대규모 시스템에서 포트/어댑터 관리 체계 표준화</strong>: 공통 어댑터, 커스텀 확장 가이드 등을 조직 차원에서 관리.</li></ul><h3 id=헥사고날-아키텍처를-사용해야-하는-대표적-상황>헥사고날 아키텍처를 사용해야 하는 대표적 상황<a hidden class=anchor aria-hidden=true href=#헥사고날-아키텍처를-사용해야-하는-대표적-상황>#</a></h3><ul><li><ol><li>외부 인터페이스가 자주 변경/확장되는 상황 (예: 여러 DB, 다양한 외부 API 공급자)</li></ol></li><li><ol start=2><li>단위 테스트/자동화 테스트가 중요한 레거시 시스템의 구조 개선</li></ol></li><li><ol start=3><li>플러그인·모듈 구조가 필요한 대형 백엔드/엔터프라이즈/마이크로서비스 시스템</li></ol></li></ul><h3 id=활용-시-반드시-학습해야-할-내용-추가>활용 시 반드시 학습해야 할 내용 (추가)<a hidden class=anchor aria-hidden=true href=#활용-시-반드시-학습해야-할-내용-추가>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>코딩</td><td>Port-Driven Test</td><td>Mock 기반 테스트</td><td>외부 어댑터 없이 코어만 유닛테스트 실행</td></tr><tr><td>계층화</td><td>Outbound Integration</td><td>외부 연동 어댑터</td><td>다양한 외부 시스템 표준화된 방식과의 정상/오류 처리</td></tr><tr><td>관측성</td><td>Structured Logging</td><td>계층별 로그/트레이스</td><td>장애 원인 신속 탐색, 운영 자동화에 필수</td></tr></tbody></table><hr><h3 id=용어-정리-보완>용어 정리 (보완)<a hidden class=anchor aria-hidden=true href=#용어-정리-보완>#</a></h3><table><thead><tr><th>카테고리</th><th>용어 (한/영)</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>인바운드 포트 (Inbound Port)</td><td>외부 입력 (사용자, 타 시스템) 신호가 코어로 전달되는 진입 인터페이스</td></tr><tr><td>아키텍처</td><td>아웃바운드 포트 (Outbound Port)</td><td>코어가 외부 시스템 (DB, API 등) 과 통신할 때 사용되는 출력 인터페이스</td></tr><tr><td>아키텍처</td><td>인바운드 어댑터 (Inbound Adapter)</td><td>인바운드 포트에 맞춰 외부 입력을 변환하여 전달하는 구현체</td></tr><tr><td>아키텍처</td><td>아웃바운드 어댑터 (Outbound Adapter)</td><td>아웃바운드 포트를 통해 외부 시스템 (데이터베이스, 외부 API 등) 에 연결하는 클래스</td></tr><tr><td>코딩</td><td>의존성 주입 (Dependency Injection, DI)</td><td>외부 객체를 코드 내부가 아닌 어플리케이션 외부 (프레임워크 등) 에서 주입하는 방식</td></tr></tbody></table><h3 id=참고-및-출처-1>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-1>#</a></h3><ul><li><a href=https://jhumelsine.github.io/2023/10/24/hexagonal-architecture-introduction.html>Hexagonal Architecture – An Introduction</a></li><li><a href=https://en.wikipedia.org/wiki/Hexagonal_architecture_(software)>Hexagonal architecture (software) – Wikipedia</a></li><li><a href=https://scalastic.io/en/hexagonal-architecture/>Everything You Need to Know About Hexagonal Architecture</a></li><li><a href=https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html>Hexagonal architecture pattern - AWS Prescriptive Guidance</a></li><li><a href=https://dev.to/buarki/hexagonal-architectureports-and-adapters-clarifying-key-concepts-using-go-14oo>Hexagonal Architecture/Ports And Adapters - DEV Community</a></li></ul><hr><hr><h2 id=hexagonal-architecture헥사고날-아키텍처-ports-and-adapters-아키텍처마무리-및-종합-정리>Hexagonal Architecture(헥사고날 아키텍처, Ports and Adapters 아키텍처)—마무리 및 종합 정리<a hidden class=anchor aria-hidden=true href=#hexagonal-architecture헥사고날-아키텍처-ports-and-adapters-아키텍처마무리-및-종합-정리>#</a></h2><h3 id=확장-적용-시-실제-사례-중심-종합>확장 적용 시 실제 사례 중심 종합<a hidden class=anchor aria-hidden=true href=#확장-적용-시-실제-사례-중심-종합>#</a></h3><h4 id=1-마이크로서비스-msa-적용에서의-실제-예시>1. 마이크로서비스 (MSA) 적용에서의 실제 예시<a hidden class=anchor aria-hidden=true href=#1-마이크로서비스-msa-적용에서의-실제-예시>#</a></h4><ul><li>각 마이크로서비스는 자신의 도메인 (코어) 과 포트/어댑터만을 갖고 배포, 관리.</li><li>예: 결제 서비스, 주문 서비스, 배송 서비스가 각각 별도 프로젝트·서버로 동작, 어댑터 추가로 외부 결제 게이트웨이 또는 메시지 큐 연동만 변경.</li></ul><h4 id=2-이벤트-기반-비동기-구조와-연계>2. 이벤트 기반 비동기 구조와 연계<a hidden class=anchor aria-hidden=true href=#2-이벤트-기반-비동기-구조와-연계>#</a></h4><ul><li>아웃바운드 어댑터로 메시지 큐 (Kafka, RabbitMQ 등) 연동 시, 핵심 도메인 로직 변경 없이 새로운 메시지 타입이나 소비자 확장.</li><li>이벤트 기반 배포 또는 트랜잭션 관리 특화된 도메인 경계 구현에도 효과적.</li></ul><h4 id=3-레거시-시스템-모던화>3. 레거시 시스템 모던화<a hidden class=anchor aria-hidden=true href=#3-레거시-시스템-모던화>#</a></h4><ul><li>기존 시스템을 단계적으로 헥사고날 구조로 마이그레이션 시, 코어 로직 침범 없이 UI, 데이터베이스, API 등을 점진적으로 교체.</li><li>인바운드/아웃바운드 어댑터 구현을 통해 레거시 자산의 영향 최소화.</li></ul><h4 id=4-클라우드-및-배포-환경-최적화>4. 클라우드 및 배포 환경 최적화<a hidden class=anchor aria-hidden=true href=#4-클라우드-및-배포-환경-최적화>#</a></h4><ul><li>어댑터 추가로 클라우드 스토리지, 외부 클라우드 API, 서버리스 함수와 연계.</li><li>테스트용 어댑터로 통합테스트, QA 환경 셋업 단순화.</li></ul><h3 id=헥사고날-아키텍처와-기타-구조-패턴-적용-전략-요약>헥사고날 아키텍처와 기타 구조 패턴 적용 전략 요약<a hidden class=anchor aria-hidden=true href=#헥사고날-아키텍처와-기타-구조-패턴-적용-전략-요약>#</a></h3><table><thead><tr><th>적용 방식</th><th>특징</th><th>상황별 추천 포인트</th></tr></thead><tbody><tr><td>헥사고날 아키텍처</td><td>포트/어댑터로 독립성 유지, 외부기술 교체 용이</td><td>기술 변화 잦음, 자동화 테스트 중시, API 확장 잦은 시스템</td></tr><tr><td>클린 아키텍처 (Clean Architecture)</td><td>계층·도메인 중심 설계, 의존성은 내부 방향으로만</td><td>대규모 복합 도메인, 유지보수성 중시</td></tr><tr><td>Layered 구조</td><td>전통적 3 계층 (프레젠테이션/비즈니스/데이터), 직접 접근 구조</td><td>단순한 시스템, 소규모 레거시 개선 등에 적합</td></tr></tbody></table><h3 id=현업-개발-관점-주의-및-리더십-전략>현업 개발 관점 주의 및 리더십 전략<a hidden class=anchor aria-hidden=true href=#현업-개발-관점-주의-및-리더십-전략>#</a></h3><ul><li>모든 외부 의존성은 반드시 포트 (인터페이스) 로 정의하고, 새 외부 시스템 도입 시 새 어댑터 추가만으로 메인 코어 (비즈니스 로직) 의 변경 최소화.</li><li>설계 문서화: Mermaid, PlantUML 등으로 포트/어댑터/코어 다이어그램 지속 관리.</li><li>코드리뷰/CI 에서 계층간 규약 (인터페이스, 의존성 방향 등) 자동화 검사.</li><li>통합 및 유닛테스트에서 Mock 과 Stub 어댑터 전략 병행 (실제 서비스와 테스트 이원화).</li></ul><h3 id=현장-적용성-한줄-요약>현장 적용성 한줄 요약<a hidden class=anchor aria-hidden=true href=#현장-적용성-한줄-요약>#</a></h3><p>헥사고날 아키텍처 (Ports and Adapters) 는 <strong>핵심 도메인 독립, 변화에 강한 플러그형 소프트웨어 설계 구조</strong>로서, 지속적 변화와 확장을 요구하는 시스템에 매우 실용적입니다.</p><h3 id=용어-정리-종합>용어 정리 (종합)<a hidden class=anchor aria-hidden=true href=#용어-정리-종합>#</a></h3><table><thead><tr><th>카테고리</th><th>용어 (한글/영어)</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>헥사고날 아키텍처 (Hexagonal Architecture)</td><td>포트/어댑터로 도메인과 외부 시스템 완전 분리</td></tr><tr><td>아키텍처</td><td>포트 (Port)</td><td>코어 로직과 외부시스템 연결하는 추상 인터페이스</td></tr><tr><td>아키텍처</td><td>어댑터 (Adapter)</td><td>포트에 맞춰 외부 입출력을 구체 구현하는 클래스/모듈</td></tr><tr><td>아키텍처</td><td>인바운드/아웃바운드 어댑터 (Inbound/Outbound Adapter)</td><td>입력 (사용자/API)/출력 (DB/외부 API) 별 실제 어댑터 구현체</td></tr><tr><td>테스트</td><td>목 (Mock)/스터빙 (Stub)</td><td>외부 시스템 없이 단위 테스트를 위해 사용되는 가짜 객체</td></tr><tr><td>아키텍처</td><td>의존성 주입 (Dependency Injection, DI)</td><td>외부 객체를 내부가 아닌 외부 환경에서 주입해주는 설계 기법</td></tr></tbody></table><h3 id=참고-및-출처-2>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-2>#</a></h3><ul><li><a href=https://jhumelsine.github.io/2023/10/24/hexagonal-architecture-introduction.html>Hexagonal Architecture – An Introduction</a></li><li><a href=https://en.wikipedia.org/wiki/Hexagonal_architecture_(software)>Hexagonal architecture (software) – Wikipedia</a></li><li><a href=https://scalastic.io/en/hexagonal-architecture/>Everything You Need to Know About Hexagonal Architecture</a></li><li><a href=https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html>Hexagonal architecture pattern - AWS Prescriptive Guidance</a></li><li><a href=https://dev.to/buarki/hexagonal-architectureports-and-adapters-clarifying-key-concepts-using-go-14oo>Hexagonal Architecture/Ports And Adapters - DEV Community</a></li></ul><hr><h2 id=hexagonal-architecture-헥사고날-아키텍처-심화-분석>Hexagonal Architecture (헥사고날 아키텍처) 심화 분석<a hidden class=anchor aria-hidden=true href=#hexagonal-architecture-헥사고날-아키텍처-심화-분석>#</a></h2><h3 id=1-태그-정리-1>1. 태그 정리<a hidden class=anchor aria-hidden=true href=#1-태그-정리-1>#</a></h3><ul><li><strong>Ports-and-Adapters</strong></li><li><strong>Clean-Architecture</strong></li><li><strong>Domain-Driven-Design</strong></li><li><strong>Software-Architecture-Patterns</strong></li></ul><h3 id=2-분류-구조-검증>2. 분류 구조 검증<a hidden class=anchor aria-hidden=true href=#2-분류-구조-검증>#</a></h3><p>현재 분류: &ldquo;Software Engineering > Design and Architecture > Architecture Styles and Patterns > Architecture Styles > Structural > Clean Architecture&rdquo;</p><p><strong>제안하는 더 적절한 분류:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Software Engineering &gt; Design and Architecture &gt; Architecture Styles and Patterns &gt; Domain-Centric Architectures &gt; Hexagonal Architecture
</span></span></code></pre></td></tr></table></div></div><p><strong>근거:</strong> Hexagonal Architecture 는 Clean Architecture 의 하위 개념이 아니라, Domain-Driven Design 과 밀접한 관련이 있는 독립적인 아키텍처 패턴으로, 도메인 중심 아키텍처로 분류하는 것이 더 적절합니다.</p><h3 id=3-주제-요약-설명-200-자-내외>3. 주제 요약 설명 (200 자 내외)<a hidden class=anchor aria-hidden=true href=#3-주제-요약-설명-200-자-내외>#</a></h3><p>Hexagonal Architecture (헥사고날 아키텍처) 는 Alistair Cockburn 이 2005 년에 제안한 &ldquo;Ports and Adapters&rdquo; 패턴으로, 비즈니스 로직을 외부 의존성으로부터 격리하여 테스트 가능하고 유지보수가 용이한 소프트웨어를 설계하는 아키텍처 패턴입니다. 포트와 어댑터를 통해 핵심 도메인과 외부 시스템 간의 결합도를 낮춥니다.</p><h3 id=4-전체-개요-250-자-내외>4. 전체 개요 (250 자 내외)<a hidden class=anchor aria-hidden=true href=#4-전체-개요-250-자-내외>#</a></h3><p>Hexagonal Architecture 는 소프트웨어의 핵심 비즈니스 로직을 중앙에 배치하고, 외부 시스템과의 상호작용을 포트 (Port) 와 어댑터 (Adapter) 를 통해 관리하는 아키텍처 패턴입니다. 이를 통해 데이터베이스, UI, 외부 API 등의 기술적 세부사항 변경 시에도 비즈니스 로직의 수정 없이 대응할 수 있어 시스템의 유연성과 테스트 용이성을 크게 향상시킵니다.</p><h3 id=5-핵심-개념>5. 핵심 개념<a hidden class=anchor aria-hidden=true href=#5-핵심-개념>#</a></h3><h4 id=51-핵심-개념>5.1 핵심 개념<a hidden class=anchor aria-hidden=true href=#51-핵심-개념>#</a></h4><ul><li><strong>도메인 코어 (Domain Core)</strong>: 비즈니스 규칙과 로직이 구현된 애플리케이션의 중심부</li><li><strong>포트 (Port)</strong>: 도메인과 외부 세계 간의 인터페이스로, 의도를 나타내는 계약</li><li><strong>어댑터 (Adapter)</strong>: 포트의 구현체로, 특정 기술과 도메인을 연결하는 역할</li><li><strong>의존성 역전 (Dependency Inversion)</strong>: 외부 계층이 내부 계층에 의존하도록 하는 원칙</li><li><strong>Primary Port/Adapter</strong>: 시스템을 구동하는 입력 측면 (Driving Side)</li><li><strong>Secondary Port/Adapter</strong>: 시스템이 구동하는 출력 측면 (Driven Side)</li></ul><h4 id=52-실무-구현을-위한-연관성>5.2 실무 구현을 위한 연관성<a hidden class=anchor aria-hidden=true href=#52-실무-구현을-위한-연관성>#</a></h4><ul><li><strong>도메인 모델링</strong>: Domain-Driven Design (DDD) 와 연계하여 엔티티, 값 객체, 애그리게이트 설계</li><li><strong>인터페이스 설계</strong>: SOLID 원칙 중 인터페이스 분리 원칙과 의존성 역전 원칙 적용</li><li><strong>의존성 주입</strong>: Spring Framework, Guice 등을 활용한 런타임 의존성 주입 구현</li><li><strong>테스트 전략</strong>: 단위 테스트, 통합 테스트, 모킹 전략 수립</li><li><strong>프로젝트 구조</strong>: 패키지 구조와 모듈화를 통한 아키텍처 경계 강화</li></ul><h3 id=6-세부-조사-내용>6. 세부 조사 내용<a hidden class=anchor aria-hidden=true href=#6-세부-조사-내용>#</a></h3><h4 id=등장-및-발전-배경-1>등장 및 발전 배경<a hidden class=anchor aria-hidden=true href=#등장-및-발전-배경-1>#</a></h4><p>Hexagonal Architecture 는 2005 년 Alistair Cockburn 에 의해 제안되었습니다. 전통적인 계층형 아키텍처의 한계를 극복하기 위해 개발되었으며, 특히 다음과 같은 문제들을 해결하고자 했습니다:</p><ul><li><strong>계층 간 원치 않는 의존성 문제</strong></li><li><strong>UI 코드와 비즈니스 로직의 혼재</strong></li><li><strong>테스트의 어려움</strong></li><li><strong>외부 시스템 변경 시 전체 시스템에 미치는 영향</strong></li></ul><p>2005 년 처음 &ldquo;Hexagonal Architecture&rdquo; 로 명명되었다가 &ldquo;Ports and Adapters&rdquo; 로 개명되었으며, 2024 년 Cockburn 은 Juan Manuel Garrido de Paz 와 함께 이에 대한 종합적인 책을 출간했습니다.</p><h4 id=목적-및-필요성-1>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성-1>#</a></h4><p><strong>달성하고자 하는 목적:</strong></p><ul><li>비즈니스 로직의 기술적 세부사항으로부터의 격리</li><li>높은 테스트 가능성 확보</li><li>외부 시스템 변경에 대한 유연한 대응</li><li>애플리케이션의 장기적 유지보수성 향상</li></ul><p><strong>필요성:</strong></p><ul><li>빠르게 변화하는 기술 환경에 대한 적응 필요</li><li>복잡한 비즈니스 로직의 체계적 관리 요구</li><li>마이크로서비스 아키텍처로의 전환 준비</li><li>지속적인 통합/배포 환경에서의 테스트 자동화 필요</li></ul><h4 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h4><p><strong>기능:</strong></p><ul><li><strong>비즈니스 로직 격리</strong>: 핵심 도메인을 외부 의존성으로부터 분리</li><li><strong>인터페이스 정의</strong>: 명확한 계약을 통한 시스템 간 상호작용</li><li><strong>기술 교체 지원</strong>: 어댑터 교체를 통한 기술 스택 변경 지원</li><li><strong>테스트 지원</strong>: 모킹과 더미 구현을 통한 테스트 용이성 제공</li></ul><p><strong>역할:</strong></p><ul><li><strong>아키텍처 패턴</strong>: 시스템 전체 구조를 정의하는 청사진 역할</li><li><strong>설계 원칙</strong>: 개발팀의 의사결정 가이드라인 제공</li><li><strong>품질 보증</strong>: 코드 품질과 시스템 안정성 확보</li><li><strong>변화 관리</strong>: 요구사항 변경과 기술 진화에 대한 대응 체계</li></ul><h4 id=특징-1>특징<a hidden class=anchor aria-hidden=true href=#특징-1>#</a></h4><ul><li><strong>중심부 격리</strong>: 비즈니스 로직이 기술적 세부사항과 완전히 분리됨</li><li><strong>대칭적 구조</strong>: 모든 외부 인터페이스를 동일한 방식으로 처리</li><li><strong>계약 기반</strong>: 인터페이스를 통한 명확한 의존성 정의</li><li><strong>테스트 용이성</strong>: 각 계층의 독립적 테스트 가능</li><li><strong>기술 독립성</strong>: 특정 프레임워크나 라이브러리에 종속되지 않음</li></ul><h4 id=핵심-원칙-1>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙-1>#</a></h4><ol><li><strong>의존성 방향 제어</strong>: 모든 의존성은 중심부를 향해야 함</li><li><strong>인터페이스 우선</strong>: 구현체가 아닌 인터페이스에 의존</li><li><strong>단일 책임</strong>: 각 어댑터는 하나의 외부 시스템만 담당</li><li><strong>관심사 분리</strong>: 비즈니스 로직과 기술적 관심사 완전 분리</li><li><strong>설정 외부화</strong>: 어댑터 연결은 설정을 통해 런타임에 결정</li></ol><h4 id=주요-원리-및-작동-원리>주요 원리 및 작동 원리<a hidden class=anchor aria-hidden=true href=#주요-원리-및-작동-원리>#</a></h4><pre class=mermaid>graph TB
    subgraph &#34;External Systems&#34;
        UI[User Interface]
        CLI[Command Line]
        API[REST API]
        DB[(Database)]
        EXT[External Services]
        FILE[File System]
    end
    
    subgraph &#34;Adapters Layer&#34;
        PA1[Primary Adapter&lt;br/&gt;Web Controller]
        PA2[Primary Adapter&lt;br/&gt;CLI Handler]
        SA1[Secondary Adapter&lt;br/&gt;DB Repository]
        SA2[Secondary Adapter&lt;br/&gt;File Storage]
        SA3[Secondary Adapter&lt;br/&gt;HTTP Client]
    end
    
    subgraph &#34;Ports Layer&#34;
        PP1[Primary Port&lt;br/&gt;Use Case Interface]
        SP1[Secondary Port&lt;br/&gt;Repository Interface]
        SP2[Secondary Port&lt;br/&gt;Storage Interface]
        SP3[Secondary Port&lt;br/&gt;External API Interface]
    end
    
    subgraph &#34;Domain Core&#34;
        UC[Use Cases&lt;br/&gt;Application Services]
        ENT[Entities]
        VO[Value Objects]
        BR[Business Rules]
    end
    
    UI --&gt; PA1
    CLI --&gt; PA2
    API --&gt; PA1
    
    PA1 --&gt; PP1
    PA2 --&gt; PP1
    PP1 --&gt; UC
    
    UC --&gt; SP1
    UC --&gt; SP2
    UC --&gt; SP3
    
    SP1 --&gt; SA1
    SP2 --&gt; SA2
    SP3 --&gt; SA3
    
    SA1 --&gt; DB
    SA2 --&gt; FILE
    SA3 --&gt; EXT
    
    UC --&gt; ENT
    UC --&gt; VO
    UC --&gt; BR
</pre><p><strong>작동 원리:</strong></p><ol><li><strong>요청 입력</strong>: Primary Adapter 가 외부 요청을 받아 Primary Port 를 통해 전달</li><li><strong>비즈니스 처리</strong>: Use Case 가 비즈니스 로직을 실행하며 필요시 Secondary Port 호출</li><li><strong>외부 연동</strong>: Secondary Adapter 가 실제 외부 시스템과 통신하여 결과 반환</li><li><strong>응답 반환</strong>: 처리 결과가 역순으로 Primary Adapter 를 통해 외부로 전달</li></ol><h4 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h4><p>Hexagonal Architecture 는 다음과 같은 핵심 구성요소로 이루어집니다:</p><h5 id=필수-구성요소>필수 구성요소<a hidden class=anchor aria-hidden=true href=#필수-구성요소>#</a></h5><p><strong>1. Domain Core (도메인 코어)</strong></p><ul><li><strong>기능</strong>: 비즈니스 규칙과 로직의 구현</li><li><strong>역할</strong>: 애플리케이션의 핵심 가치 제공</li><li><strong>특징</strong>: 외부 의존성이 전혀 없는 순수한 비즈니스 로직</li></ul><p><strong>2. Primary Ports (주 포트)</strong></p><ul><li><strong>기능</strong>: 외부에서 시스템으로의 입력 인터페이스 정의</li><li><strong>역할</strong>: Use Case 실행을 위한 계약 명세</li><li><strong>특징</strong>: 의도를 표현하는 인터페이스</li></ul><p><strong>3. Secondary Ports (부 포트)</strong></p><ul><li><strong>기능</strong>: 시스템에서 외부로의 출력 인터페이스 정의</li><li><strong>역할</strong>: 외부 시스템과의 통신 계약 명세</li><li><strong>특징</strong>: 필요한 서비스에 대한 추상화</li></ul><p><strong>4. Primary Adapters (주 어댑터)</strong></p><ul><li><strong>기능</strong>: 외부 입력을 도메인이 이해할 수 있는 형태로 변환</li><li><strong>역할</strong>: 다양한 입력 채널 지원</li><li><strong>특징</strong>: 특정 기술 (HTTP, CLI, GUI 등) 에 특화</li></ul><p><strong>5. Secondary Adapters (부 어댑터)</strong></p><ul><li><strong>기능</strong>: 도메인의 요청을 외부 시스템 호출로 변환</li><li><strong>역할</strong>: 외부 시스템과의 실제 통신 담당</li><li><strong>특징</strong>: 특정 기술 (DB, HTTP Client 등) 에 특화</li></ul><h5 id=선택-구성요소>선택 구성요소<a hidden class=anchor aria-hidden=true href=#선택-구성요소>#</a></h5><p><strong>1. Application Services (애플리케이션 서비스)</strong></p><ul><li><strong>기능</strong>: Use Case 의 오케스트레이션</li><li><strong>역할</strong>: 비즈니스 워크플로우 관리</li><li><strong>특징</strong>: 트랜잭션과 보안 등 횡단 관심사 처리</li></ul><p><strong>2. Domain Events (도메인 이벤트)</strong></p><ul><li><strong>기능</strong>: 도메인 내 중요한 비즈니스 이벤트 표현</li><li><strong>역할</strong>: 시스템 간 느슨한 결합 지원</li><li><strong>특징</strong>: 비동기 처리와 이벤트 소싱 지원</li></ul><h4 id=구현-기법-및-방법-1>구현 기법 및 방법<a hidden class=anchor aria-hidden=true href=#구현-기법-및-방법-1>#</a></h4><h5 id=1-의존성-주입-dependency-injection>1. 의존성 주입 (Dependency Injection)<a hidden class=anchor aria-hidden=true href=#1-의존성-주입-dependency-injection>#</a></h5><p><strong>정의</strong>: 런타임에 의존성을 외부에서 주입하는 기법</p><p><strong>구성</strong>:</p><ul><li>IoC Container (Spring, CDI)</li><li>설정 파일 또는 어노테이션</li><li>생성자 주입, 세터 주입, 필드 주입</li></ul><p><strong>목적</strong>:</p><ul><li>어댑터의 동적 교체 지원</li><li>테스트 시 Mock 객체 주입</li><li>설정 기반 시스템 구성</li></ul><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15>15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16>16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17>17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Python with dependency injection</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_repository</span><span class=p>:</span> <span class=n>UserRepository</span><span class=p>,</span> <span class=n>email_service</span><span class=p>:</span> <span class=n>EmailService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_user_repository</span> <span class=o>=</span> <span class=n>user_repository</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_email_service</span> <span class=o>=</span> <span class=n>email_service</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create_user</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>User</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># Business logic implementation</span>
</span></span><span class=line><span class=cl>        <span class=n>user</span> <span class=o>=</span> <span class=n>User</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=n>user_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>saved_user</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_user_repository</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_email_service</span><span class=o>.</span><span class=n>send_welcome_email</span><span class=p>(</span><span class=n>saved_user</span><span class=o>.</span><span class=n>email</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>saved_user</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Configuration</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>configure_dependencies</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>user_repository</span> <span class=o>=</span> <span class=n>PostgreSQLUserRepository</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>email_service</span> <span class=o>=</span> <span class=n>SMTPEmailService</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>UserService</span><span class=p>(</span><span class=n>user_repository</span><span class=p>,</span> <span class=n>email_service</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=2-포트-인터페이스-설계-port-interface-design>2. 포트 인터페이스 설계 (Port Interface Design)<a hidden class=anchor aria-hidden=true href=#2-포트-인터페이스-설계-port-interface-design>#</a></h5><p><strong>정의</strong>: 도메인과 외부 세계 간의 계약을 정의하는 기법</p><p><strong>구성</strong>:</p><ul><li>인터페이스 정의</li><li>데이터 전송 객체 (DTO)</li><li>예외 정의</li></ul><p><strong>목적</strong>:</p><ul><li>명확한 계약 정의</li><li>구현체 교체 가능성</li><li>테스트 용이성</li></ul><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13>13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14>14</a>
</span><span class=lnt id=hl-7-15><a class=lnlinks href=#hl-7-15>15</a>
</span><span class=lnt id=hl-7-16><a class=lnlinks href=#hl-7-16>16</a>
</span><span class=lnt id=hl-7-17><a class=lnlinks href=#hl-7-17>17</a>
</span><span class=lnt id=hl-7-18><a class=lnlinks href=#hl-7-18>18</a>
</span><span class=lnt id=hl-7-19><a class=lnlinks href=#hl-7-19>19</a>
</span><span class=lnt id=hl-7-20><a class=lnlinks href=#hl-7-20>20</a>
</span><span class=lnt id=hl-7-21><a class=lnlinks href=#hl-7-21>21</a>
</span><span class=lnt id=hl-7-22><a class=lnlinks href=#hl-7-22>22</a>
</span><span class=lnt id=hl-7-23><a class=lnlinks href=#hl-7-23>23</a>
</span><span class=lnt id=hl-7-24><a class=lnlinks href=#hl-7-24>24</a>
</span><span class=lnt id=hl-7-25><a class=lnlinks href=#hl-7-25>25</a>
</span><span class=lnt id=hl-7-26><a class=lnlinks href=#hl-7-26>26</a>
</span><span class=lnt id=hl-7-27><a class=lnlinks href=#hl-7-27>27</a>
</span><span class=lnt id=hl-7-28><a class=lnlinks href=#hl-7-28>28</a>
</span><span class=lnt id=hl-7-29><a class=lnlinks href=#hl-7-29>29</a>
</span><span class=lnt id=hl-7-30><a class=lnlinks href=#hl-7-30>30</a>
</span><span class=lnt id=hl-7-31><a class=lnlinks href=#hl-7-31>31</a>
</span><span class=lnt id=hl-7-32><a class=lnlinks href=#hl-7-32>32</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// TypeScript interface definition
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>interface</span> <span class=nx>UserRepository</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>findById</span><span class=p>(</span><span class=nx>id</span><span class=o>:</span> <span class=nx>string</span><span class=p>)</span><span class=o>:</span> <span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>User</span> <span class=o>|</span> <span class=kc>null</span><span class=o>&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>save</span><span class=p>(</span><span class=nx>user</span><span class=o>:</span> <span class=nx>User</span><span class=p>)</span><span class=o>:</span> <span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>User</span><span class=o>&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>findByEmail</span><span class=p>(</span><span class=nx>email</span><span class=o>:</span> <span class=nx>string</span><span class=p>)</span><span class=o>:</span> <span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>User</span> <span class=o>|</span> <span class=kc>null</span><span class=o>&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>EmailService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>sendWelcomeEmail</span><span class=p>(</span><span class=nx>email</span><span class=o>:</span> <span class=nx>string</span><span class=p>)</span><span class=o>:</span> <span class=nb>Promise</span><span class=o>&lt;</span><span class=k>void</span><span class=o>&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>sendPasswordResetEmail</span><span class=p>(</span><span class=nx>email</span><span class=o>:</span> <span class=nx>string</span><span class=p>,</span> <span class=nx>token</span><span class=o>:</span> <span class=nx>string</span><span class=p>)</span><span class=o>:</span> <span class=nb>Promise</span><span class=o>&lt;</span><span class=k>void</span><span class=o>&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Use Case implementation
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>CreateUserUseCase</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=kr>private</span> <span class=nx>userRepository</span><span class=o>:</span> <span class=nx>UserRepository</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=kr>private</span> <span class=nx>emailService</span><span class=o>:</span> <span class=nx>EmailService</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>execute</span><span class=p>(</span><span class=nx>userData</span><span class=o>:</span> <span class=nx>CreateUserRequest</span><span class=p>)</span><span class=o>:</span> <span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>User</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>existingUser</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>userRepository</span><span class=p>.</span><span class=nx>findByEmail</span><span class=p>(</span><span class=nx>userData</span><span class=p>.</span><span class=nx>email</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>existingUser</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=nx>UserAlreadyExistsError</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>User</span><span class=p>(</span><span class=nx>userData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>savedUser</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>userRepository</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=nx>user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>emailService</span><span class=p>.</span><span class=nx>sendWelcomeEmail</span><span class=p>(</span><span class=nx>user</span><span class=p>.</span><span class=nx>email</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>savedUser</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=3-어댑터-패턴-구현-adapter-pattern-implementation>3. 어댑터 패턴 구현 (Adapter Pattern Implementation)<a hidden class=anchor aria-hidden=true href=#3-어댑터-패턴-구현-adapter-pattern-implementation>#</a></h5><p><strong>정의</strong>: 서로 다른 인터페이스를 연결하는 구조적 디자인 패턴</p><p><strong>구성</strong>:</p><ul><li>Target Interface (포트)</li><li>Adaptee (외부 시스템)</li><li>Adapter (포트와 외부 시스템 연결)</li></ul><p><strong>목적</strong>:</p><ul><li>기존 시스템과의 호환성</li><li>제 3 자 라이브러리 통합</li><li>기술 교체 용이성</li></ul><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span><span class=lnt id=hl-8-15><a class=lnlinks href=#hl-8-15>15</a>
</span><span class=lnt id=hl-8-16><a class=lnlinks href=#hl-8-16>16</a>
</span><span class=lnt id=hl-8-17><a class=lnlinks href=#hl-8-17>17</a>
</span><span class=lnt id=hl-8-18><a class=lnlinks href=#hl-8-18>18</a>
</span><span class=lnt id=hl-8-19><a class=lnlinks href=#hl-8-19>19</a>
</span><span class=lnt id=hl-8-20><a class=lnlinks href=#hl-8-20>20</a>
</span><span class=lnt id=hl-8-21><a class=lnlinks href=#hl-8-21>21</a>
</span><span class=lnt id=hl-8-22><a class=lnlinks href=#hl-8-22>22</a>
</span><span class=lnt id=hl-8-23><a class=lnlinks href=#hl-8-23>23</a>
</span><span class=lnt id=hl-8-24><a class=lnlinks href=#hl-8-24>24</a>
</span><span class=lnt id=hl-8-25><a class=lnlinks href=#hl-8-25>25</a>
</span><span class=lnt id=hl-8-26><a class=lnlinks href=#hl-8-26>26</a>
</span><span class=lnt id=hl-8-27><a class=lnlinks href=#hl-8-27>27</a>
</span><span class=lnt id=hl-8-28><a class=lnlinks href=#hl-8-28>28</a>
</span><span class=lnt id=hl-8-29><a class=lnlinks href=#hl-8-29>29</a>
</span><span class=lnt id=hl-8-30><a class=lnlinks href=#hl-8-30>30</a>
</span><span class=lnt id=hl-8-31><a class=lnlinks href=#hl-8-31>31</a>
</span><span class=lnt id=hl-8-32><a class=lnlinks href=#hl-8-32>32</a>
</span><span class=lnt id=hl-8-33><a class=lnlinks href=#hl-8-33>33</a>
</span><span class=lnt id=hl-8-34><a class=lnlinks href=#hl-8-34>34</a>
</span><span class=lnt id=hl-8-35><a class=lnlinks href=#hl-8-35>35</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Repository adapter for PostgreSQL</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PostgreSQLUserRepository</span><span class=p>(</span><span class=n>UserRepository</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>db_connection</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_db</span> <span class=o>=</span> <span class=n>db_connection</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_by_id</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>User</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=n>query</span> <span class=o>=</span> <span class=s2>&#34;SELECT * FROM users WHERE id = </span><span class=si>%s</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_db</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=n>query</span><span class=p>,</span> <span class=p>(</span><span class=n>user_id</span><span class=p>,))</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>result</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>User</span><span class=o>.</span><span class=n>from_dict</span><span class=p>(</span><span class=n>result</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user</span><span class=p>:</span> <span class=n>User</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>User</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>query</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            INSERT INTO users (id, email, name, created_at) 
</span></span></span><span class=line><span class=cl><span class=s2>            VALUES (</span><span class=si>%s</span><span class=s2>, </span><span class=si>%s</span><span class=s2>, </span><span class=si>%s</span><span class=s2>, </span><span class=si>%s</span><span class=s2>) 
</span></span></span><span class=line><span class=cl><span class=s2>            ON CONFLICT (id) DO UPDATE SET 
</span></span></span><span class=line><span class=cl><span class=s2>                email = EXCLUDED.email,
</span></span></span><span class=line><span class=cl><span class=s2>                name = EXCLUDED.name
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_db</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=n>query</span><span class=p>,</span> <span class=p>(</span><span class=n>user</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>user</span><span class=o>.</span><span class=n>email</span><span class=p>,</span> <span class=n>user</span><span class=o>.</span><span class=n>name</span><span class=p>,</span> <span class=n>user</span><span class=o>.</span><span class=n>created_at</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>user</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Email service adapter for SMTP</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SMTPEmailService</span><span class=p>(</span><span class=n>EmailService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>smtp_config</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_config</span> <span class=o>=</span> <span class=n>smtp_config</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>send_welcome_email</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>email</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>message</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_welcome_message</span><span class=p>(</span><span class=n>email</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_send_email</span><span class=p>(</span><span class=n>email</span><span class=p>,</span> <span class=n>message</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>_send_email</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>to</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>message</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># SMTP implementation details</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=장점-1>장점<a hidden class=anchor aria-hidden=true href=#장점-1>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>높은 테스트 가능성</td><td>의존성 격리로 인해 단위 테스트와 통합 테스트가 용이하며, Mock 객체를 통한 독립적 테스트 가능</td></tr><tr><td>장점</td><td>기술 독립성</td><td>비즈니스 로직이 특정 프레임워크나 데이터베이스에 종속되지 않아 기술 교체 시 영향 최소화</td></tr><tr><td>장점</td><td>유연한 확장성</td><td>새로운 어댑터 추가만으로 다양한 외부 시스템과 통합 가능</td></tr><tr><td>장점</td><td>명확한 관심사 분리</td><td>도메인 로직과 기술적 세부사항이 명확히 분리되어 코드 이해와 유지보수 용이</td></tr><tr><td>장점</td><td>병렬 개발 지원</td><td>인터페이스 정의 후 팀별로 독립적인 개발 진행 가능</td></tr><tr><td>장점</td><td>재사용성 향상</td><td>핵심 비즈니스 로직을 다양한 컨텍스트에서 재사용 가능</td></tr></tbody></table><h4 id=단점과-문제점-그리고-해결방안-1>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안-1>#</a></h4><h5 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h5><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>초기 복잡성 증가</td><td>포트와 어댑터 설계로 인한 초기 개발 복잡도 상승</td><td>점진적 적용과 팀 교육을 통한 학습 곡선 완화</td></tr><tr><td>단점</td><td>코드량 증가</td><td>인터페이스와 구현체 분리로 인한 보일러플레이트 코드 증가</td><td>코드 생성 도구와 템플릿 활용</td></tr><tr><td>단점</td><td>성능 오버헤드</td><td>추상화 계층으로 인한 미미한 성능 저하</td><td>크리티컬한 부분에 대한 성능 프로파일링과 최적화</td></tr><tr><td>단점</td><td>과도한 추상화 위험</td><td>불필요한 추상화로 인한 시스템 복잡성 증가</td><td>YAGNI 원칙 적용과 적절한 추상화 수준 유지</td></tr></tbody></table><h5 id=문제점>문제점<a hidden class=anchor aria-hidden=true href=#문제점>#</a></h5><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>인터페이스 불일치</td><td>포트와 어댑터 간 계약 불일치</td><td>런타임 오류 발생</td><td>계약 테스트, 타입 검사</td><td>강타입 언어 사용, API 문서화</td><td>계약 테스트 도입, Consumer-Driven Contract</td></tr><tr><td>문제점</td><td>순환 의존성</td><td>잘못된 의존성 방향 설정</td><td>시스템 결합도 증가</td><td>의존성 분석 도구</td><td>의존성 방향 규칙 정의</td><td>아키텍처 테스트, 리팩토링</td></tr><tr><td>문제점</td><td>어댑터 누수</td><td>도메인에 기술적 세부사항 침투</td><td>아키텍처 일관성 훼손</td><td>정적 분석, 코드 리뷰</td><td>아키텍처 가이드라인 수립</td><td>리팩토링, 교육 강화</td></tr></tbody></table><h4 id=도전-과제>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제>#</a></h4><h5 id=1-아키텍처-경계-유지>1. 아키텍처 경계 유지<a hidden class=anchor aria-hidden=true href=#1-아키텍처-경계-유지>#</a></h5><p><strong>원인</strong>: 개발자의 편의나 일정 압박으로 인한 경계 침범<br><strong>영향</strong>: 아키텍처 일관성 훼손과 장기적 유지보수 비용 증가<br><strong>해결 방법</strong>:</p><ul><li>ArchUnit 과 같은 아키텍처 테스트 도구 도입</li><li>지속적인 코드 리뷰와 정적 분석</li><li>명확한 아키텍처 가이드라인 수립</li></ul><h5 id=2-마이크로서비스-전환>2. 마이크로서비스 전환<a hidden class=anchor aria-hidden=true href=#2-마이크로서비스-전환>#</a></h5><p><strong>원인</strong>: 모놀리스에서 마이크로서비스로의 분해 과정에서 발생하는 복잡성<br><strong>영향</strong>: 서비스 간 통신 복잡도 증가와 데이터 일관성 문제<br><strong>해결 방법</strong>:</p><ul><li>Domain-Driven Design 의 Bounded Context 활용</li><li>Event Sourcing 과 CQRS 패턴 적용</li><li>단계적 분해 전략 수립</li></ul><h5 id=3-성능-최적화>3. 성능 최적화<a hidden class=anchor aria-hidden=true href=#3-성능-최적화>#</a></h5><p><strong>원인</strong>: 추상화 계층으로 인한 성능 오버헤드<br><strong>영향</strong>: 응답시간 증가와 처리량 감소<br><strong>해결 방법</strong>:</p><ul><li>성능 크리티컬한 부분의 직접 최적화</li><li>캐싱 전략 도입</li><li>비동기 처리 패턴 적용</li></ul><h4 id=분류-기준에-따른-종류-및-유형-1>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형-1>#</a></h4><table><thead><tr><th>분류 기준</th><th>종류/유형</th><th>설명</th></tr></thead><tbody><tr><td>적용 범위</td><td>단일 바운디드 컨텍스트</td><td>하나의 도메인 영역에만 적용</td></tr><tr><td>적용 범위</td><td>멀티 바운디드 컨텍스트</td><td>여러 도메인 영역에 걸쳐 적용</td></tr><tr><td>시스템 규모</td><td>모놀리식 헥사고날</td><td>단일 배포 단위로 구성</td></tr><tr><td>시스템 규모</td><td>마이크로서비스 헥사고날</td><td>각 서비스별로 헥사고날 구조 적용</td></tr><tr><td>기술 스택</td><td>순수 헥사고날</td><td>프레임워크 의존성 최소화</td></tr><tr><td>기술 스택</td><td>프레임워크 기반</td><td>Spring, Quarkus 등 프레임워크 활용</td></tr><tr><td>복잡도</td><td>단순 헥사고날</td><td>기본적인 포트와 어댑터만 사용</td></tr><tr><td>복잡도</td><td>고급 헥사고날</td><td>이벤트 소싱, CQRS 등 고급 패턴 결합</td></tr></tbody></table><h4 id=실무-사용-예시-1>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시-1>#</a></h4><table><thead><tr><th>사용 목적</th><th>함께 사용되는 기술</th><th>효과</th></tr></thead><tbody><tr><td>웹 애플리케이션 개발</td><td>Spring Boot, JPA, REST API</td><td>비즈니스 로직과 웹 계층 분리로 테스트 용이성 증대</td></tr><tr><td>마이크로서비스 구축</td><td>Docker, Kubernetes, Event Bus</td><td>서비스 간 결합도 감소와 독립적 배포 가능</td></tr><tr><td>레거시 시스템 현대화</td><td>API Gateway, Message Queue</td><td>점진적 마이그레이션과 리스크 최소화</td></tr><tr><td>도메인 주도 설계</td><td>DDD, Event Sourcing, CQRS</td><td>복잡한 비즈니스 로직의 체계적 관리</td></tr><tr><td>클라우드 네이티브 앱</td><td>AWS Lambda, Cloud Functions</td><td>서버리스 환경에서의 비즈니스 로직 재사용</td></tr></tbody></table><h4 id=활용-사례-1>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례-1>#</a></h4><p><strong>시나리오</strong>: 전자상거래 주문 관리 시스템</p><p><strong>시스템 구성</strong>:</p><ul><li>주문 도메인 서비스 (Order Domain Service)</li><li>재고 관리 시스템 (Inventory Management)</li><li>결제 게이트웨이 (Payment Gateway)</li><li>알림 서비스 (Notification Service)</li><li>웹 UI 및 모바일 앱</li></ul><p><strong>시스템 구성 다이어그램</strong>:</p><pre class=mermaid>graph TB
    subgraph &#34;External Systems&#34;
        WEB[Web UI]
        MOBILE[Mobile App]
        ADMIN[Admin Panel]
        PG[Payment Gateway]
        EMAIL[Email Service]
        SMS[SMS Service]
        INVENTORY[(Inventory DB)]
        ORDER_DB[(Order DB)]
    end
    
    subgraph &#34;Primary Adapters&#34;
        REST[REST Controller]
        GRAPHQL[GraphQL Resolver]
        CLI[CLI Handler]
    end
    
    subgraph &#34;Primary Ports&#34;
        CREATE_ORDER[Create Order Port]
        CANCEL_ORDER[Cancel Order Port]
        VIEW_ORDER[View Order Port]
    end
    
    subgraph &#34;Order Domain Core&#34;
        ORDER_SERVICE[Order Service]
        ORDER_ENTITY[Order Entity]
        ORDER_RULES[Business Rules]
    end
    
    subgraph &#34;Secondary Ports&#34;
        PAYMENT_PORT[Payment Port]
        INVENTORY_PORT[Inventory Port]
        NOTIFICATION_PORT[Notification Port]
        PERSISTENCE_PORT[Order Repository Port]
    end
    
    subgraph &#34;Secondary Adapters&#34;
        PAYMENT_ADAPTER[Payment Adapter]
        INVENTORY_ADAPTER[Inventory Adapter]
        EMAIL_ADAPTER[Email Adapter]
        SMS_ADAPTER[SMS Adapter]
        DB_ADAPTER[Database Adapter]
    end
    
    WEB --&gt; REST
    MOBILE --&gt; REST
    ADMIN --&gt; GRAPHQL
    
    REST --&gt; CREATE_ORDER
    REST --&gt; CANCEL_ORDER
    GRAPHQL --&gt; VIEW_ORDER
    CLI --&gt; CREATE_ORDER
    
    CREATE_ORDER --&gt; ORDER_SERVICE
    CANCEL_ORDER --&gt; ORDER_SERVICE
    VIEW_ORDER --&gt; ORDER_SERVICE
    
    ORDER_SERVICE --&gt; ORDER_ENTITY
    ORDER_SERVICE --&gt; ORDER_RULES
    
    ORDER_SERVICE --&gt; PAYMENT_PORT
    ORDER_SERVICE --&gt; INVENTORY_PORT
    ORDER_SERVICE --&gt; NOTIFICATION_PORT
    ORDER_SERVICE --&gt; PERSISTENCE_PORT
    
    PAYMENT_PORT --&gt; PAYMENT_ADAPTER
    INVENTORY_PORT --&gt; INVENTORY_ADAPTER
    NOTIFICATION_PORT --&gt; EMAIL_ADAPTER
    NOTIFICATION_PORT --&gt; SMS_ADAPTER
    PERSISTENCE_PORT --&gt; DB_ADAPTER
    
    PAYMENT_ADAPTER --&gt; PG
    INVENTORY_ADAPTER --&gt; INVENTORY
    EMAIL_ADAPTER --&gt; EMAIL
    SMS_ADAPTER --&gt; SMS
    DB_ADAPTER --&gt; ORDER_DB
</pre><p><strong>Workflow</strong>:</p><ol><li>고객이 웹/모바일 앱에서 주문 생성 요청</li><li>REST Controller 가 요청을 받아 Create Order Port 호출</li><li>Order Service 가 비즈니스 규칙 검증 및 주문 엔티티 생성</li><li>재고 확인을 위해 Inventory Port 를 통해 재고 시스템 조회</li><li>결제 처리를 위해 Payment Port 를 통해 결제 게이트웨이 호출</li><li>주문 정보를 Order Repository Port 를 통해 데이터베이스에 저장</li><li>주문 확인 알림을 Notification Port 를 통해 이메일/SMS 발송</li></ol><p><strong>역할</strong>:</p><ul><li><strong>Primary Adapters</strong>: 다양한 클라이언트 요청을 도메인이 이해할 수 있는 형태로 변환</li><li><strong>Domain Core</strong>: 주문 생성, 검증, 상태 관리 등 핵심 비즈니스 로직 처리</li><li><strong>Secondary Adapters</strong>: 외부 시스템과의 실제 통신 담당</li></ul><p><strong>유무에 따른 차이점</strong>:</p><ul><li><strong>적용 전</strong>: 비즈니스 로직이 컨트롤러와 데이터 접근 계층에 분산되어 테스트와 유지보수 어려움</li><li><strong>적용 후</strong>: 명확한 책임 분리로 테스트 용이성 증대, 외부 시스템 변경 시 영향 최소화</li></ul><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1>  1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2>  2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3>  3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4>  4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5>  5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6>  6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7>  7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8>  8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9>  9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10> 10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11> 11</a>
</span><span class=lnt id=hl-10-12><a class=lnlinks href=#hl-10-12> 12</a>
</span><span class=lnt id=hl-10-13><a class=lnlinks href=#hl-10-13> 13</a>
</span><span class=lnt id=hl-10-14><a class=lnlinks href=#hl-10-14> 14</a>
</span><span class=lnt id=hl-10-15><a class=lnlinks href=#hl-10-15> 15</a>
</span><span class=lnt id=hl-10-16><a class=lnlinks href=#hl-10-16> 16</a>
</span><span class=lnt id=hl-10-17><a class=lnlinks href=#hl-10-17> 17</a>
</span><span class=lnt id=hl-10-18><a class=lnlinks href=#hl-10-18> 18</a>
</span><span class=lnt id=hl-10-19><a class=lnlinks href=#hl-10-19> 19</a>
</span><span class=lnt id=hl-10-20><a class=lnlinks href=#hl-10-20> 20</a>
</span><span class=lnt id=hl-10-21><a class=lnlinks href=#hl-10-21> 21</a>
</span><span class=lnt id=hl-10-22><a class=lnlinks href=#hl-10-22> 22</a>
</span><span class=lnt id=hl-10-23><a class=lnlinks href=#hl-10-23> 23</a>
</span><span class=lnt id=hl-10-24><a class=lnlinks href=#hl-10-24> 24</a>
</span><span class=lnt id=hl-10-25><a class=lnlinks href=#hl-10-25> 25</a>
</span><span class=lnt id=hl-10-26><a class=lnlinks href=#hl-10-26> 26</a>
</span><span class=lnt id=hl-10-27><a class=lnlinks href=#hl-10-27> 27</a>
</span><span class=lnt id=hl-10-28><a class=lnlinks href=#hl-10-28> 28</a>
</span><span class=lnt id=hl-10-29><a class=lnlinks href=#hl-10-29> 29</a>
</span><span class=lnt id=hl-10-30><a class=lnlinks href=#hl-10-30> 30</a>
</span><span class=lnt id=hl-10-31><a class=lnlinks href=#hl-10-31> 31</a>
</span><span class=lnt id=hl-10-32><a class=lnlinks href=#hl-10-32> 32</a>
</span><span class=lnt id=hl-10-33><a class=lnlinks href=#hl-10-33> 33</a>
</span><span class=lnt id=hl-10-34><a class=lnlinks href=#hl-10-34> 34</a>
</span><span class=lnt id=hl-10-35><a class=lnlinks href=#hl-10-35> 35</a>
</span><span class=lnt id=hl-10-36><a class=lnlinks href=#hl-10-36> 36</a>
</span><span class=lnt id=hl-10-37><a class=lnlinks href=#hl-10-37> 37</a>
</span><span class=lnt id=hl-10-38><a class=lnlinks href=#hl-10-38> 38</a>
</span><span class=lnt id=hl-10-39><a class=lnlinks href=#hl-10-39> 39</a>
</span><span class=lnt id=hl-10-40><a class=lnlinks href=#hl-10-40> 40</a>
</span><span class=lnt id=hl-10-41><a class=lnlinks href=#hl-10-41> 41</a>
</span><span class=lnt id=hl-10-42><a class=lnlinks href=#hl-10-42> 42</a>
</span><span class=lnt id=hl-10-43><a class=lnlinks href=#hl-10-43> 43</a>
</span><span class=lnt id=hl-10-44><a class=lnlinks href=#hl-10-44> 44</a>
</span><span class=lnt id=hl-10-45><a class=lnlinks href=#hl-10-45> 45</a>
</span><span class=lnt id=hl-10-46><a class=lnlinks href=#hl-10-46> 46</a>
</span><span class=lnt id=hl-10-47><a class=lnlinks href=#hl-10-47> 47</a>
</span><span class=lnt id=hl-10-48><a class=lnlinks href=#hl-10-48> 48</a>
</span><span class=lnt id=hl-10-49><a class=lnlinks href=#hl-10-49> 49</a>
</span><span class=lnt id=hl-10-50><a class=lnlinks href=#hl-10-50> 50</a>
</span><span class=lnt id=hl-10-51><a class=lnlinks href=#hl-10-51> 51</a>
</span><span class=lnt id=hl-10-52><a class=lnlinks href=#hl-10-52> 52</a>
</span><span class=lnt id=hl-10-53><a class=lnlinks href=#hl-10-53> 53</a>
</span><span class=lnt id=hl-10-54><a class=lnlinks href=#hl-10-54> 54</a>
</span><span class=lnt id=hl-10-55><a class=lnlinks href=#hl-10-55> 55</a>
</span><span class=lnt id=hl-10-56><a class=lnlinks href=#hl-10-56> 56</a>
</span><span class=lnt id=hl-10-57><a class=lnlinks href=#hl-10-57> 57</a>
</span><span class=lnt id=hl-10-58><a class=lnlinks href=#hl-10-58> 58</a>
</span><span class=lnt id=hl-10-59><a class=lnlinks href=#hl-10-59> 59</a>
</span><span class=lnt id=hl-10-60><a class=lnlinks href=#hl-10-60> 60</a>
</span><span class=lnt id=hl-10-61><a class=lnlinks href=#hl-10-61> 61</a>
</span><span class=lnt id=hl-10-62><a class=lnlinks href=#hl-10-62> 62</a>
</span><span class=lnt id=hl-10-63><a class=lnlinks href=#hl-10-63> 63</a>
</span><span class=lnt id=hl-10-64><a class=lnlinks href=#hl-10-64> 64</a>
</span><span class=lnt id=hl-10-65><a class=lnlinks href=#hl-10-65> 65</a>
</span><span class=lnt id=hl-10-66><a class=lnlinks href=#hl-10-66> 66</a>
</span><span class=lnt id=hl-10-67><a class=lnlinks href=#hl-10-67> 67</a>
</span><span class=lnt id=hl-10-68><a class=lnlinks href=#hl-10-68> 68</a>
</span><span class=lnt id=hl-10-69><a class=lnlinks href=#hl-10-69> 69</a>
</span><span class=lnt id=hl-10-70><a class=lnlinks href=#hl-10-70> 70</a>
</span><span class=lnt id=hl-10-71><a class=lnlinks href=#hl-10-71> 71</a>
</span><span class=lnt id=hl-10-72><a class=lnlinks href=#hl-10-72> 72</a>
</span><span class=lnt id=hl-10-73><a class=lnlinks href=#hl-10-73> 73</a>
</span><span class=lnt id=hl-10-74><a class=lnlinks href=#hl-10-74> 74</a>
</span><span class=lnt id=hl-10-75><a class=lnlinks href=#hl-10-75> 75</a>
</span><span class=lnt id=hl-10-76><a class=lnlinks href=#hl-10-76> 76</a>
</span><span class=lnt id=hl-10-77><a class=lnlinks href=#hl-10-77> 77</a>
</span><span class=lnt id=hl-10-78><a class=lnlinks href=#hl-10-78> 78</a>
</span><span class=lnt id=hl-10-79><a class=lnlinks href=#hl-10-79> 79</a>
</span><span class=lnt id=hl-10-80><a class=lnlinks href=#hl-10-80> 80</a>
</span><span class=lnt id=hl-10-81><a class=lnlinks href=#hl-10-81> 81</a>
</span><span class=lnt id=hl-10-82><a class=lnlinks href=#hl-10-82> 82</a>
</span><span class=lnt id=hl-10-83><a class=lnlinks href=#hl-10-83> 83</a>
</span><span class=lnt id=hl-10-84><a class=lnlinks href=#hl-10-84> 84</a>
</span><span class=lnt id=hl-10-85><a class=lnlinks href=#hl-10-85> 85</a>
</span><span class=lnt id=hl-10-86><a class=lnlinks href=#hl-10-86> 86</a>
</span><span class=lnt id=hl-10-87><a class=lnlinks href=#hl-10-87> 87</a>
</span><span class=lnt id=hl-10-88><a class=lnlinks href=#hl-10-88> 88</a>
</span><span class=lnt id=hl-10-89><a class=lnlinks href=#hl-10-89> 89</a>
</span><span class=lnt id=hl-10-90><a class=lnlinks href=#hl-10-90> 90</a>
</span><span class=lnt id=hl-10-91><a class=lnlinks href=#hl-10-91> 91</a>
</span><span class=lnt id=hl-10-92><a class=lnlinks href=#hl-10-92> 92</a>
</span><span class=lnt id=hl-10-93><a class=lnlinks href=#hl-10-93> 93</a>
</span><span class=lnt id=hl-10-94><a class=lnlinks href=#hl-10-94> 94</a>
</span><span class=lnt id=hl-10-95><a class=lnlinks href=#hl-10-95> 95</a>
</span><span class=lnt id=hl-10-96><a class=lnlinks href=#hl-10-96> 96</a>
</span><span class=lnt id=hl-10-97><a class=lnlinks href=#hl-10-97> 97</a>
</span><span class=lnt id=hl-10-98><a class=lnlinks href=#hl-10-98> 98</a>
</span><span class=lnt id=hl-10-99><a class=lnlinks href=#hl-10-99> 99</a>
</span><span class=lnt id=hl-10-100><a class=lnlinks href=#hl-10-100>100</a>
</span><span class=lnt id=hl-10-101><a class=lnlinks href=#hl-10-101>101</a>
</span><span class=lnt id=hl-10-102><a class=lnlinks href=#hl-10-102>102</a>
</span><span class=lnt id=hl-10-103><a class=lnlinks href=#hl-10-103>103</a>
</span><span class=lnt id=hl-10-104><a class=lnlinks href=#hl-10-104>104</a>
</span><span class=lnt id=hl-10-105><a class=lnlinks href=#hl-10-105>105</a>
</span><span class=lnt id=hl-10-106><a class=lnlinks href=#hl-10-106>106</a>
</span><span class=lnt id=hl-10-107><a class=lnlinks href=#hl-10-107>107</a>
</span><span class=lnt id=hl-10-108><a class=lnlinks href=#hl-10-108>108</a>
</span><span class=lnt id=hl-10-109><a class=lnlinks href=#hl-10-109>109</a>
</span><span class=lnt id=hl-10-110><a class=lnlinks href=#hl-10-110>110</a>
</span><span class=lnt id=hl-10-111><a class=lnlinks href=#hl-10-111>111</a>
</span><span class=lnt id=hl-10-112><a class=lnlinks href=#hl-10-112>112</a>
</span><span class=lnt id=hl-10-113><a class=lnlinks href=#hl-10-113>113</a>
</span><span class=lnt id=hl-10-114><a class=lnlinks href=#hl-10-114>114</a>
</span><span class=lnt id=hl-10-115><a class=lnlinks href=#hl-10-115>115</a>
</span><span class=lnt id=hl-10-116><a class=lnlinks href=#hl-10-116>116</a>
</span><span class=lnt id=hl-10-117><a class=lnlinks href=#hl-10-117>117</a>
</span><span class=lnt id=hl-10-118><a class=lnlinks href=#hl-10-118>118</a>
</span><span class=lnt id=hl-10-119><a class=lnlinks href=#hl-10-119>119</a>
</span><span class=lnt id=hl-10-120><a class=lnlinks href=#hl-10-120>120</a>
</span><span class=lnt id=hl-10-121><a class=lnlinks href=#hl-10-121>121</a>
</span><span class=lnt id=hl-10-122><a class=lnlinks href=#hl-10-122>122</a>
</span><span class=lnt id=hl-10-123><a class=lnlinks href=#hl-10-123>123</a>
</span><span class=lnt id=hl-10-124><a class=lnlinks href=#hl-10-124>124</a>
</span><span class=lnt id=hl-10-125><a class=lnlinks href=#hl-10-125>125</a>
</span><span class=lnt id=hl-10-126><a class=lnlinks href=#hl-10-126>126</a>
</span><span class=lnt id=hl-10-127><a class=lnlinks href=#hl-10-127>127</a>
</span><span class=lnt id=hl-10-128><a class=lnlinks href=#hl-10-128>128</a>
</span><span class=lnt id=hl-10-129><a class=lnlinks href=#hl-10-129>129</a>
</span><span class=lnt id=hl-10-130><a class=lnlinks href=#hl-10-130>130</a>
</span><span class=lnt id=hl-10-131><a class=lnlinks href=#hl-10-131>131</a>
</span><span class=lnt id=hl-10-132><a class=lnlinks href=#hl-10-132>132</a>
</span><span class=lnt id=hl-10-133><a class=lnlinks href=#hl-10-133>133</a>
</span><span class=lnt id=hl-10-134><a class=lnlinks href=#hl-10-134>134</a>
</span><span class=lnt id=hl-10-135><a class=lnlinks href=#hl-10-135>135</a>
</span><span class=lnt id=hl-10-136><a class=lnlinks href=#hl-10-136>136</a>
</span><span class=lnt id=hl-10-137><a class=lnlinks href=#hl-10-137>137</a>
</span><span class=lnt id=hl-10-138><a class=lnlinks href=#hl-10-138>138</a>
</span><span class=lnt id=hl-10-139><a class=lnlinks href=#hl-10-139>139</a>
</span><span class=lnt id=hl-10-140><a class=lnlinks href=#hl-10-140>140</a>
</span><span class=lnt id=hl-10-141><a class=lnlinks href=#hl-10-141>141</a>
</span><span class=lnt id=hl-10-142><a class=lnlinks href=#hl-10-142>142</a>
</span><span class=lnt id=hl-10-143><a class=lnlinks href=#hl-10-143>143</a>
</span><span class=lnt id=hl-10-144><a class=lnlinks href=#hl-10-144>144</a>
</span><span class=lnt id=hl-10-145><a class=lnlinks href=#hl-10-145>145</a>
</span><span class=lnt id=hl-10-146><a class=lnlinks href=#hl-10-146>146</a>
</span><span class=lnt id=hl-10-147><a class=lnlinks href=#hl-10-147>147</a>
</span><span class=lnt id=hl-10-148><a class=lnlinks href=#hl-10-148>148</a>
</span><span class=lnt id=hl-10-149><a class=lnlinks href=#hl-10-149>149</a>
</span><span class=lnt id=hl-10-150><a class=lnlinks href=#hl-10-150>150</a>
</span><span class=lnt id=hl-10-151><a class=lnlinks href=#hl-10-151>151</a>
</span><span class=lnt id=hl-10-152><a class=lnlinks href=#hl-10-152>152</a>
</span><span class=lnt id=hl-10-153><a class=lnlinks href=#hl-10-153>153</a>
</span><span class=lnt id=hl-10-154><a class=lnlinks href=#hl-10-154>154</a>
</span><span class=lnt id=hl-10-155><a class=lnlinks href=#hl-10-155>155</a>
</span><span class=lnt id=hl-10-156><a class=lnlinks href=#hl-10-156>156</a>
</span><span class=lnt id=hl-10-157><a class=lnlinks href=#hl-10-157>157</a>
</span><span class=lnt id=hl-10-158><a class=lnlinks href=#hl-10-158>158</a>
</span><span class=lnt id=hl-10-159><a class=lnlinks href=#hl-10-159>159</a>
</span><span class=lnt id=hl-10-160><a class=lnlinks href=#hl-10-160>160</a>
</span><span class=lnt id=hl-10-161><a class=lnlinks href=#hl-10-161>161</a>
</span><span class=lnt id=hl-10-162><a class=lnlinks href=#hl-10-162>162</a>
</span><span class=lnt id=hl-10-163><a class=lnlinks href=#hl-10-163>163</a>
</span><span class=lnt id=hl-10-164><a class=lnlinks href=#hl-10-164>164</a>
</span><span class=lnt id=hl-10-165><a class=lnlinks href=#hl-10-165>165</a>
</span><span class=lnt id=hl-10-166><a class=lnlinks href=#hl-10-166>166</a>
</span><span class=lnt id=hl-10-167><a class=lnlinks href=#hl-10-167>167</a>
</span><span class=lnt id=hl-10-168><a class=lnlinks href=#hl-10-168>168</a>
</span><span class=lnt id=hl-10-169><a class=lnlinks href=#hl-10-169>169</a>
</span><span class=lnt id=hl-10-170><a class=lnlinks href=#hl-10-170>170</a>
</span><span class=lnt id=hl-10-171><a class=lnlinks href=#hl-10-171>171</a>
</span><span class=lnt id=hl-10-172><a class=lnlinks href=#hl-10-172>172</a>
</span><span class=lnt id=hl-10-173><a class=lnlinks href=#hl-10-173>173</a>
</span><span class=lnt id=hl-10-174><a class=lnlinks href=#hl-10-174>174</a>
</span><span class=lnt id=hl-10-175><a class=lnlinks href=#hl-10-175>175</a>
</span><span class=lnt id=hl-10-176><a class=lnlinks href=#hl-10-176>176</a>
</span><span class=lnt id=hl-10-177><a class=lnlinks href=#hl-10-177>177</a>
</span><span class=lnt id=hl-10-178><a class=lnlinks href=#hl-10-178>178</a>
</span><span class=lnt id=hl-10-179><a class=lnlinks href=#hl-10-179>179</a>
</span><span class=lnt id=hl-10-180><a class=lnlinks href=#hl-10-180>180</a>
</span><span class=lnt id=hl-10-181><a class=lnlinks href=#hl-10-181>181</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Primary Port (Use Case Interface)</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CreateOrderUseCase</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_data</span><span class=p>:</span> <span class=n>CreateOrderRequest</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>OrderResponse</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Domain Entity</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>items</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>OrderItem</span><span class=p>]):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>id</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>customer_id</span> <span class=o>=</span> <span class=n>customer_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>items</span> <span class=o>=</span> <span class=n>items</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>PENDING</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>created_at</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>utcnow</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_validate</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_validate</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=n>EmptyOrderError</span><span class=p>(</span><span class=s2>&#34;Order must contain at least one item&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>total_amount</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=n>InvalidOrderAmountError</span><span class=p>(</span><span class=s2>&#34;Order amount must be positive&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>total_amount</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Decimal</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>sum</span><span class=p>(</span><span class=n>item</span><span class=o>.</span><span class=n>price</span> <span class=o>*</span> <span class=n>item</span><span class=o>.</span><span class=n>quantity</span> <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>confirm_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>payment_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>!=</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>PENDING</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=n>InvalidOrderStateError</span><span class=p>(</span><span class=s2>&#34;Can only confirm payment for pending orders&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>CONFIRMED</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>payment_id</span> <span class=o>=</span> <span class=n>payment_id</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Secondary Ports (Repository Interfaces)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderRepository</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>:</span> <span class=n>Order</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>find_by_id</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Order</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PaymentService</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>process_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>:</span> <span class=n>Decimal</span><span class=p>,</span> <span class=n>payment_method</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PaymentResult</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>InventoryService</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>check_availability</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>items</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>OrderItem</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>reserve_items</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>items</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>OrderItem</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>ReservationResult</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Application Service (Domain Core)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderService</span><span class=p>(</span><span class=n>CreateOrderUseCase</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>order_repository</span><span class=p>:</span> <span class=n>OrderRepository</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>payment_service</span><span class=p>:</span> <span class=n>PaymentService</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>inventory_service</span><span class=p>:</span> <span class=n>InventoryService</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>notification_service</span><span class=p>:</span> <span class=n>NotificationService</span>
</span></span><span class=line><span class=cl>    <span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_order_repository</span> <span class=o>=</span> <span class=n>order_repository</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_payment_service</span> <span class=o>=</span> <span class=n>payment_service</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_inventory_service</span> <span class=o>=</span> <span class=n>inventory_service</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_notification_service</span> <span class=o>=</span> <span class=n>notification_service</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_data</span><span class=p>:</span> <span class=n>CreateOrderRequest</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>OrderResponse</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># Business logic implementation</span>
</span></span><span class=line><span class=cl>        <span class=n>order</span> <span class=o>=</span> <span class=n>Order</span><span class=p>(</span><span class=n>order_data</span><span class=o>.</span><span class=n>customer_id</span><span class=p>,</span> <span class=n>order_data</span><span class=o>.</span><span class=n>items</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># Check inventory availability</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_inventory_service</span><span class=o>.</span><span class=n>check_availability</span><span class=p>(</span><span class=n>order</span><span class=o>.</span><span class=n>items</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=n>InsufficientInventoryError</span><span class=p>(</span><span class=s2>&#34;Some items are not available&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># Reserve items</span>
</span></span><span class=line><span class=cl>        <span class=n>reservation</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_inventory_service</span><span class=o>.</span><span class=n>reserve_items</span><span class=p>(</span><span class=n>order</span><span class=o>.</span><span class=n>items</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># Process payment</span>
</span></span><span class=line><span class=cl>            <span class=n>payment_result</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_payment_service</span><span class=o>.</span><span class=n>process_payment</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>order</span><span class=o>.</span><span class=n>total_amount</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=n>order_data</span><span class=o>.</span><span class=n>payment_method</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># Confirm order</span>
</span></span><span class=line><span class=cl>            <span class=n>order</span><span class=o>.</span><span class=n>confirm_payment</span><span class=p>(</span><span class=n>payment_result</span><span class=o>.</span><span class=n>payment_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># Save order</span>
</span></span><span class=line><span class=cl>            <span class=n>saved_order</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_order_repository</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># Send notification</span>
</span></span><span class=line><span class=cl>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_notification_service</span><span class=o>.</span><span class=n>send_order_confirmation</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>order_data</span><span class=o>.</span><span class=n>customer_email</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=n>saved_order</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>OrderResponse</span><span class=o>.</span><span class=n>from_order</span><span class=p>(</span><span class=n>saved_order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=n>PaymentFailedException</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># Release reserved items</span>
</span></span><span class=line><span class=cl>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_inventory_service</span><span class=o>.</span><span class=n>release_reservation</span><span class=p>(</span><span class=n>reservation</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Primary Adapter (REST Controller)</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>fastapi</span> <span class=kn>import</span> <span class=n>APIRouter</span><span class=p>,</span> <span class=n>HTTPException</span><span class=p>,</span> <span class=n>Depends</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>router</span> <span class=o>=</span> <span class=n>APIRouter</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@router.post</span><span class=p>(</span><span class=s2>&#34;/orders&#34;</span><span class=p>,</span> <span class=n>response_model</span><span class=o>=</span><span class=n>OrderResponse</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>create_order</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>order_request</span><span class=p>:</span> <span class=n>CreateOrderRequest</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>order_service</span><span class=p>:</span> <span class=n>CreateOrderUseCase</span> <span class=o>=</span> <span class=n>Depends</span><span class=p>(</span><span class=n>get_order_service</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>await</span> <span class=n>order_service</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=n>order_request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=p>(</span><span class=n>EmptyOrderError</span><span class=p>,</span> <span class=n>InvalidOrderAmountError</span><span class=p>)</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>HTTPException</span><span class=p>(</span><span class=n>status_code</span><span class=o>=</span><span class=mi>400</span><span class=p>,</span> <span class=n>detail</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=n>InsufficientInventoryError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>HTTPException</span><span class=p>(</span><span class=n>status_code</span><span class=o>=</span><span class=mi>409</span><span class=p>,</span> <span class=n>detail</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=n>PaymentFailedException</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>HTTPException</span><span class=p>(</span><span class=n>status_code</span><span class=o>=</span><span class=mi>402</span><span class=p>,</span> <span class=n>detail</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Secondary Adapter (Database Repository)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PostgreSQLOrderRepository</span><span class=p>(</span><span class=n>OrderRepository</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>db_session</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_db</span> <span class=o>=</span> <span class=n>db_session</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>:</span> <span class=n>Order</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># Database-specific implementation</span>
</span></span><span class=line><span class=cl>        <span class=n>order_data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=n>order</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;customer_id&#39;</span><span class=p>:</span> <span class=n>order</span><span class=o>.</span><span class=n>customer_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;status&#39;</span><span class=p>:</span> <span class=n>order</span><span class=o>.</span><span class=n>status</span><span class=o>.</span><span class=n>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;total_amount&#39;</span><span class=p>:</span> <span class=n>order</span><span class=o>.</span><span class=n>total_amount</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;created_at&#39;</span><span class=p>:</span> <span class=n>order</span><span class=o>.</span><span class=n>created_at</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>query</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            INSERT INTO orders (id, customer_id, status, total_amount, created_at)
</span></span></span><span class=line><span class=cl><span class=s2>            VALUES (:id, :customer_id, :status, :total_amount, :created_at)
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_db</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=n>query</span><span class=p>,</span> <span class=n>order_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_db</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>order</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>find_by_id</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Order</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=n>query</span> <span class=o>=</span> <span class=s2>&#34;SELECT * FROM orders WHERE id = :order_id&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_db</span><span class=o>.</span><span class=n>fetch_one</span><span class=p>(</span><span class=n>query</span><span class=p>,</span> <span class=p>{</span><span class=s1>&#39;order_id&#39;</span><span class=p>:</span> <span class=n>order_id</span><span class=p>})</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>result</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>Order</span><span class=o>.</span><span class=n>from_dict</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Configuration (Dependency Injection)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>configure_order_service</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>CreateOrderUseCase</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># Database connection</span>
</span></span><span class=line><span class=cl>    <span class=n>db_session</span> <span class=o>=</span> <span class=n>get_database_session</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Repository implementations</span>
</span></span><span class=line><span class=cl>    <span class=n>order_repository</span> <span class=o>=</span> <span class=n>PostgreSQLOrderRepository</span><span class=p>(</span><span class=n>db_session</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># External service adapters</span>
</span></span><span class=line><span class=cl>    <span class=n>payment_service</span> <span class=o>=</span> <span class=n>StripePaymentService</span><span class=p>(</span><span class=n>stripe_config</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>inventory_service</span> <span class=o>=</span> <span class=n>HTTPInventoryService</span><span class=p>(</span><span class=n>inventory_api_config</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>notification_service</span> <span class=o>=</span> <span class=n>SMTPNotificationService</span><span class=p>(</span><span class=n>email_config</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Application service</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>OrderService</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>order_repository</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>payment_service</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>inventory_service</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>notification_service</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h4><table><thead><tr><th>구분</th><th>고려사항</th><th>주의할 점</th><th>권장사항</th></tr></thead><tbody><tr><td>설계 단계</td><td>도메인 경계 명확화</td><td>과도한 세분화 방지</td><td>DDD 의 Bounded Context 활용</td></tr><tr><td>개발 단계</td><td>인터페이스 우선 설계</td><td>구현 세부사항 노출 금지</td><td>계약 기반 개발 적용</td></tr><tr><td>테스트 단계</td><td>계층별 테스트 전략 수립</td><td>과도한 Mock 사용 주의</td><td>Test Pyramid 원칙 준수</td></tr><tr><td>배포 단계</td><td>설정 외부화</td><td>하드코딩된 의존성 방지</td><td>환경별 설정 분리</td></tr><tr><td>유지보수</td><td>아키텍처 문서화</td><td>문서와 코드 불일치</td><td>코드로서의 문서화</td></tr><tr><td>팀 협업</td><td>개발팀 교육</td><td>학습 곡선 무시</td><td>점진적 도입과 멘토링</td></tr></tbody></table><h4 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h4><table><thead><tr><th>구분</th><th>고려사항</th><th>주의할 점</th><th>권장사항</th></tr></thead><tbody><tr><td>성능</td><td>추상화 오버헤드 최소화</td><td>불필요한 계층 추가 방지</td><td>성능 크리티컬 부분 직접 최적화</td></tr><tr><td>메모리</td><td>객체 생성 비용 관리</td><td>과도한 객체 래핑 주의</td><td>객체 풀링과 캐싱 활용</td></tr><tr><td>네트워크</td><td>외부 호출 최적화</td><td>동기 호출의 성능 영향</td><td>비동기 처리와 배치 처리</td></tr><tr><td>데이터베이스</td><td>쿼리 최적화</td><td>N+1 문제 발생 주의</td><td>배치 로딩과 쿼리 튜닝</td></tr><tr><td>확장성</td><td>수평적 확장 고려</td><td>상태 공유 문제</td><td>무상태 설계와 이벤트 기반 아키텍처</td></tr><tr><td>모니터링</td><td>관찰 가능성 확보</td><td>디버깅 복잡성 증가</td><td>분산 추적과 로깅 전략</td></tr></tbody></table><h3 id=9-주제와-관련하여-주목할-내용>9. 주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#9-주제와-관련하여-주목할-내용>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처 패턴</td><td>Clean Architecture</td><td>계층형 구조</td><td>Uncle Bob 의 Clean Architecture 와의 관계 및 차이점</td></tr><tr><td>아키텍처 패턴</td><td>Onion Architecture</td><td>동심원 구조</td><td>Jeffrey Palermo 의 양파 아키텍처와의 유사점</td></tr><tr><td>설계 원칙</td><td>SOLID 원칙</td><td>의존성 역전</td><td>DIP 를 통한 의존성 방향 제어</td></tr><tr><td>설계 원칙</td><td>Domain-Driven Design</td><td>전술적 설계</td><td>엔티티, 값 객체, 애그리게이트와의 연계</td></tr><tr><td>테스트 전략</td><td>Test Pyramid</td><td>계층별 테스트</td><td>단위/통합/E2E 테스트 분배 전략</td></tr><tr><td>테스트 전략</td><td>Contract Testing</td><td>API 계약</td><td>포트 인터페이스의 계약 검증</td></tr><tr><td>개발 방법론</td><td>TDD</td><td>테스트 주도 개발</td><td>포트 인터페이스 우선 설계</td></tr><tr><td>개발 방법론</td><td>BDD</td><td>행동 주도 개발</td><td>Use Case 중심의 개발 접근법</td></tr><tr><td>기술 트렌드</td><td>Microservices</td><td>서비스 분해</td><td>마이크로서비스 아키텍처로의 진화</td></tr><tr><td>기술 트렌드</td><td>Event Sourcing</td><td>이벤트 기반</td><td>도메인 이벤트와 이벤트 소싱</td></tr><tr><td>기술 트렌드</td><td>CQRS</td><td>명령 - 쿼리 분리</td><td>읽기/쓰기 모델 분리</td></tr><tr><td>구현 기술</td><td>Dependency Injection</td><td>IoC Container</td><td>Spring, CDI 등 DI 프레임워크</td></tr><tr><td>구현 기술</td><td>API Gateway</td><td>서비스 메시</td><td>마이크로서비스 간 통신 관리</td></tr><tr><td>구현 기술</td><td>Message Queue</td><td>비동기 통신</td><td>RabbitMQ, Apache Kafka 등</td></tr></tbody></table><h3 id=10-반드시-학습해야할-내용>10. 반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#10-반드시-학습해야할-내용>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>기초 개념</td><td>소프트웨어 아키텍처</td><td>아키텍처 원칙</td><td>관심사 분리, 결합도/응집도, 추상화</td></tr><tr><td>기초 개념</td><td>객체지향 설계</td><td>SOLID 원칙</td><td>특히 의존성 역전 원칙과 인터페이스 분리 원칙</td></tr><tr><td>설계 패턴</td><td>GoF 디자인 패턴</td><td>Adapter Pattern</td><td>포트와 어댑터 구현의 핵심 패턴</td></tr><tr><td>설계 패턴</td><td>GoF 디자인 패턴</td><td>Strategy Pattern</td><td>다양한 구현체 교체를 위한 패턴</td></tr><tr><td>설계 패턴</td><td>Enterprise Patterns</td><td>Repository Pattern</td><td>데이터 접근 계층 추상화</td></tr><tr><td>설계 패턴</td><td>Enterprise Patterns</td><td>Service Layer Pattern</td><td>비즈니스 로직 계층 구성</td></tr><tr><td>도메인 설계</td><td>Domain-Driven Design</td><td>전략적 설계</td><td>Bounded Context, Context Map</td></tr><tr><td>도메인 설계</td><td>Domain-Driven Design</td><td>전술적 설계</td><td>Entity, Value Object, Aggregate</td></tr><tr><td>테스트 기법</td><td>Test-Driven Development</td><td>단위 테스트</td><td>Mock, Stub 을 활용한 격리된 테스트</td></tr><tr><td>테스트 기법</td><td>Integration Testing</td><td>계약 테스트</td><td>포트 인터페이스 계약 검증</td></tr><tr><td>구현 기술</td><td>Dependency Injection</td><td>IoC 원리</td><td>의존성 주입과 제어 역전</td></tr><tr><td>구현 기술</td><td>Clean Code</td><td>코드 품질</td><td>가독성, 유지보수성, 테스트 가능성</td></tr></tbody></table><hr><h3 id=용어-정리-1>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-1>#</a></h3><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처 개념</td><td>Port (포트)</td><td>도메인과 외부 세계 간의 인터페이스로, 의도를 나타내는 계약</td></tr><tr><td>아키텍처 개념</td><td>Adapter (어댑터)</td><td>포트의 구현체로, 특정 기술과 도메인을 연결하는 구성요소</td></tr><tr><td>아키텍처 개념</td><td>Primary Port</td><td>외부에서 시스템으로의 입력을 정의하는 인터페이스 (Driving Port)</td></tr><tr><td>아키텍처 개념</td><td>Secondary Port</td><td>시스템에서 외부로의 출력을 정의하는 인터페이스 (Driven Port)</td></tr><tr><td>아키텍처 개념</td><td>Domain Core</td><td>비즈니스 규칙과 로직이 구현된 애플리케이션의 핵심부</td></tr><tr><td>아키텍처 개념</td><td>Use Case</td><td>시스템이 제공하는 특정 기능을 나타내는 비즈니스 시나리오</td></tr><tr><td>설계 원칙</td><td>Dependency Inversion</td><td>고수준 모듈이 저수준 모듈에 의존하지 않도록 하는 원칙</td></tr><tr><td>설계 원칙</td><td>Separation of Concerns</td><td>서로 다른 관심사를 별도의 모듈로 분리하는 설계 원칙</td></tr><tr><td>설계 원칙</td><td>Interface Segregation</td><td>클라이언트가 사용하지 않는 인터페이스에 의존하지 않도록 하는 원칙</td></tr><tr><td>구현 패턴</td><td>Repository Pattern</td><td>데이터 접근 로직을 캡슐화하여 도메인 객체와 분리하는 패턴</td></tr><tr><td>구현 패턴</td><td>Service Layer</td><td>비즈니스 로직을 구성하고 트랜잭션을 관리하는 계층</td></tr><tr><td>구현 패턴</td><td>DTO (Data Transfer Object)</td><td>계층 간 데이터 전송을 위한 객체</td></tr><tr><td>테스트 개념</td><td>Mock Object</td><td>테스트 시 실제 객체를 대체하는 가짜 객체</td></tr><tr><td>테스트 개념</td><td>Stub</td><td>미리 정해진 응답을 반환하는 테스트 더블</td></tr><tr><td>테스트 개념</td><td>Contract Test</td><td>서비스 간 API 계약을 검증하는 테스트</td></tr><tr><td>DDD 개념</td><td>Bounded Context</td><td>특정 도메인 모델이 적용되는 명시적 경계</td></tr><tr><td>DDD 개념</td><td>Aggregate</td><td>데이터 변경의 단위로 취급되는 연관된 객체들의 클러스터</td></tr><tr><td>DDD 개념</td><td>Domain Event</td><td>도메인 전문가가 관심을 갖는 비즈니스 이벤트</td></tr></tbody></table><hr><h3 id=참고-및-출처-3>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-3>#</a></h3><ul><li><a href=https://alistair.cockburn.us/hexagonal-architecture>Hexagonal Architecture (Ports and Adapters) - Alistair Cockburn</a></li><li><a href=https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html>Clean Architecture by Uncle Bob - The Clean Code Blog</a></li><li><a href=https://netflixtechblog.com/ready-for-changes-with-hexagonal-architecture-b315ec967749>Ready for changes with Hexagonal Architecture - Netflix Tech Blog</a></li><li><a href=https://www.happycoders.eu/software-craftsmanship/hexagonal-architecture/>Hexagonal Architecture – What Is It? Why Use It? - Happy Coders</a></li><li><a href=https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi>Hexagonal Architecture and Clean Architecture (with examples) - DEV Community</a></li><li><a href=https://www.baeldung.com/hexagonal-architecture-ddd-spring>Hexagonal Architecture, DDD, and Spring - Baeldung</a></li><li><a href=https://vaadin.com/blog/ddd-part-3-domain-driven-design-and-the-hexagonal-architecture>Domain-Driven Design (DDD) and Hexagonal Architecture in Java - Vaadin</a></li><li><a href=https://beyondxscratch.com/2020/08/23/hexagonal-architecture-example-digging-a-spring-boot-implementation/>Hexagonal Architecture Example: digging a Spring Boot implementation - Beyond xScratch</a></li><li><a href=https://www.sennder.com/tech/designing-microservices-components-using-hexagonal-architecture>Designing Microservices Components using Hexagonal Architecture - Sennder</a></li><li><a href=https://www.geeksforgeeks.org/hexagonal-architecture-system-design/>Hexagonal Architecture - System Design - GeeksforGeeks</a></li></ul><hr><p>알겠습니다! &ldquo;Hexagonal Architecture (Ports and Adapters Architecture)&rdquo; 에 대한 <strong>단계별 9 번 작업</strong>을 수행한 내용을 아래와 같이 제공합니다.</p><hr><h3 id=1-태그-34-개-영어-빈칸로-표시>1️⃣ 태그 (3‑4 개, 영어, 빈칸→‑로 표시)<a hidden class=anchor aria-hidden=true href=#1-태그-34-개-영어-빈칸로-표시>#</a></h3><ul><li><strong>Hexagonal‑Architecture</strong></li><li><strong>Ports‑and‑Adapters</strong></li><li><strong>Domain‑Driven‑Design</strong></li><li><strong>Testable‑Architecture</strong></li></ul><hr><h3 id=2-분류-구조-검토-및-제안>2️⃣ 분류 구조 검토 및 제안<a hidden class=anchor aria-hidden=true href=#2-분류-구조-검토-및-제안>#</a></h3><p>현재 구조:<br><strong>Software Engineering > Design and Architecture > Architecture Styles and Patterns > Architecture Styles > Structural > Clean Architecture</strong><br>→ 적절하며, Hexagonal Architecture 는 Clean Architecture 와 동급의 패턴입니다. 더욱 정확히 표현하자면:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1>1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2>2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3>3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4>4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5>5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6>6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Software Engineering
</span></span><span class=line><span class=cl>└─ Design and Architecture
</span></span><span class=line><span class=cl>   └─ Architecture Styles and Patterns
</span></span><span class=line><span class=cl>      └─ Architecture Styles
</span></span><span class=line><span class=cl>         ├─ Hexagonal Architecture (Ports &amp; Adapters)
</span></span><span class=line><span class=cl>         ├─ Clean Architecture
</span></span><span class=line><span class=cl>         └─ Onion Architecture
</span></span></code></pre></td></tr></table></div></div><p>즉, Clean Architecture 옆에 Hexagonal Architecture 를 배치하는 것이 계층적 정확성을 높입니다.</p><hr><h3 id=3-요약--200-자>3️⃣ 요약 (≈ 200 자)<a hidden class=anchor aria-hidden=true href=#3-요약--200-자>#</a></h3><p>Hexagonal Architecture 는 알리스터 콕번 (Alistair Cockburn) 이 제안한 패턴으로, 애플리케이션의 핵심 로직 (Domain) 이 외부 시스템 (UI, DB, 메시징 등) 과 분리되도록 Ports(인터페이스) 와 Adapters(구현) 를 사용해 구조화합니다. 이 방식은 느슨한 결합, 높은 응집, 테스트 용이성, 기술 독립성을 제공하며 Clean Architecture 및 DDD 와 자연스럽게 결합됩니다.(<a href="https://en.wikipedia.org/wiki/Hexagonal_architecture_%28software%29?utm_source=chatgpt.com" title="Hexagonal architecture (software)">위키백과</a>, <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">AWS Documentation</a>, <a href="https://softengbook.org/articles/hexagonal-architecture?utm_source=chatgpt.com" title="What is a Hexagonal Architecture?–Software Engineering">softengbook.org</a>, <a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">DEV Community</a>)</p><hr><h3 id=4-전체-개요--250-자>4️⃣ 전체 개요 (≈ 250 자)<a hidden class=anchor aria-hidden=true href=#4-전체-개요--250-자>#</a></h3><p>Hexagonal Architecture(Ports and Adapters Architecture) 는 애플리케이션 핵심인 도메인 로직을 외부 의존성 (입력, 출력, 저장소 등) 으로부터 분리하는 아키텍처 패턴입니다. 내부 핵심은 Domain 클래스와 Use Case(또는 Interactor) 로 구성되며, 외부 시스템과는 Ports(추상 인터페이스) 를 통해 통신합니다. 外部와 통신하는 구체 구현은 Adapters 가 담당하여 핵심 로직을 보호합니다. 이를 통해 기술 스택 변경, 테스트 격리, 병렬 개발이 용이해지며 Clean Architecture, Onion Architecture 와 유사한 철학을 공유합니다.(<a href="https://en.wikipedia.org/wiki/Hexagonal_architecture_%28software%29?utm_source=chatgpt.com" title="Hexagonal architecture (software)">위키백과</a>, <a href="https://softengbook.org/articles/hexagonal-architecture?utm_source=chatgpt.com" title="What is a Hexagonal Architecture?–Software Engineering">softengbook.org</a>, <a href="https://bitloops.com/docs/bitloops-language/learning/software-architecture/hexagonal-architecture?utm_source=chatgpt.com" title="Hexagonal Architecture: Building Modular & Testable Software …">bitloops.com</a>)</p><hr><h3 id=5-핵심-개념-1>5️⃣ 핵심 개념<a hidden class=anchor aria-hidden=true href=#5-핵심-개념-1>#</a></h3><ul><li><strong>Domain / Application Core</strong>: 핵심 비즈니스 로직과 엔티티, Use Case 등</li><li><strong>Ports (Inbound / Outbound)</strong>: 도메인과 외부 간 인터페이스 규격 정의<ul><li>Inbound Port: 사용자나 시스템에서 들어오는 입력 (예: Use Case 인터페이스)</li><li>Outbound Port: 도메인이 외부 시스템에 요청할 때 사용 (예: Repository 포트)</li></ul></li><li><strong>Adapters</strong>: Ports 를 구현해 외부 시스템과 연결 (예: REST 컨트롤러, DB 리포지토리, 메시지 큐)</li><li><strong>Dependencies inward</strong>: 핵심 도메인은 외부 adapter 나 프레임워크에 의존하지 않음</li><li><strong>Loose coupling & high cohesion</strong>: Ports/Adapters 분리로 구조 단순화 유지</li><li><strong>Testable core</strong>: 외부 시스템과 무관하게 단위 테스트 가능 (<a href="https://tsh.io/blog/hexagonal-architecture/?utm_source=chatgpt.com" title="Hexagonal architecture–overview and best practices">tsh.io</a>, <a href="https://devcookies.medium.com/a-detailed-guide-to-hexagonal-architecture-with-examples-042523acb1db?utm_source=chatgpt.com" title="A Detailed Guide to Hexagonal Architecture with Examples">Medium</a>, <a href="https://www.geeksforgeeks.org/system-design/hexagonal-architecture-system-design/?utm_source=chatgpt.com" title="Hexagonal Architecture - System Design - GeeksforGeeks">GeeksforGeeks</a>, <a href="https://en.wikipedia.org/wiki/Hexagonal_architecture_%28software%29?utm_source=chatgpt.com" title="Hexagonal architecture (software)">위키백과</a>, <a href="https://romanglushach.medium.com/hexagonal-architecture-the-secret-to-scalable-and-maintainable-code-for-modern-software-d345fdb47347?utm_source=chatgpt.com" title="Hexagonal Architecture: The Secret to Scalable and Maintainable …">Medium</a>)</li></ul><h4 id=51-실무-구현-연관성>5.1 실무 구현 연관성<a hidden class=anchor aria-hidden=true href=#51-실무-구현-연관성>#</a></h4><ul><li>도메인 중심 설계: DDD 에 적합하며 모델 중심 개발 촉진</li><li>모듈화: Ports 와 Adapters 별 테스트 및 교체 가능</li><li>CI 환경: adapter 구현을 mock/stub 하여 core 테스트 용이</li><li>기술 독립성: 외부 기술 변경 시 adapter 만 교체, domain 유지</li></ul><hr><h3 id=6-추가-조사된-주요-항목-정리>6️⃣ 추가 조사된 주요 항목 정리<a hidden class=anchor aria-hidden=true href=#6-추가-조사된-주요-항목-정리>#</a></h3><ul><li><strong>등장 및 발전 배경</strong>: 1990 년대 중반 Cockburn 이 UI·데이터 종속성 제거 목적으로 제안. 2005 년 &ldquo;Ports & Adapters&rdquo; 명칭으로 정형화.(<a href="https://scalastic.io/en/hexagonal-architecture/?utm_source=chatgpt.com" title="Everything You Need to Know About Hexagonal Architecture: Kernel …">Scalastic</a>, <a href="https://bitloops.com/docs/bitloops-language/learning/software-architecture/hexagonal-architecture?utm_source=chatgpt.com" title="Hexagonal Architecture: Building Modular & Testable Software …">bitloops.com</a>, <a href="https://www.geeksforgeeks.org/system-design/hexagonal-architecture-system-design/?utm_source=chatgpt.com" title="Hexagonal Architecture - System Design - GeeksforGeeks">GeeksforGeeks</a>, <a href="https://en.wikipedia.org/wiki/Hexagonal_architecture_%28software%29?utm_source=chatgpt.com" title="Hexagonal architecture (software)">위키백과</a>)</li><li><strong>목적 및 필요성</strong>: 핵심 비즈니스 로직을 외부 종속성으로부터 보호하고, 테스트·확장·기술 교체에 자유로운 아키텍처를 만들기 위함</li><li><strong>작동 원리 및 방식</strong>: 핵심 로직은 Ports 인터페이스 정의, 외부 시스템은 Adapters 로 구현. Ports 를 통해 inbound/outbound 방향으로 통신.(<a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">AWS Documentation</a>)</li></ul><hr><h3 id=7-실무-사용-예시--비교>7️⃣ 실무 사용 예시 / 비교<a hidden class=anchor aria-hidden=true href=#7-실무-사용-예시--비교>#</a></h3><h4 id=비교-hexagonal-vs-clean-vs-layered>비교: Hexagonal Vs Clean Vs Layered<a hidden class=anchor aria-hidden=true href=#비교-hexagonal-vs-clean-vs-layered>#</a></h4><table><thead><tr><th>항목</th><th>Hexagonal Architecture</th><th>Clean Architecture</th><th>전통적 Layered Architecture</th></tr></thead><tbody><tr><td>구조 방식</td><td>중심 도메인 + Ports/Adapters</td><td>concentric rings, adapter 외부에 위치</td><td>계층별 Presentation→Business→Data</td></tr><tr><td>의존성 흐름</td><td>Adapters → Ports → Domain</td><td>외부 → 내부 중심 도메인으로 방향성 강함</td><td>상위 계층이 하위 계층에 의존</td></tr><tr><td>기술 독립성</td><td>높음: adapter 교체 가능</td><td>매우 높음</td><td>상대적으로 낮음</td></tr><tr><td>테스트 용이성</td><td>Core 단위 테스트 가능</td><td>Core + Use Cases 테스트 유리</td><td>UI / DB mocking 필요 복잡</td></tr></tbody></table><hr><h3 id=8-실무-활용-사례-요약>8️⃣ 실무 활용 사례 (요약)<a hidden class=anchor aria-hidden=true href=#8-실무-활용-사례-요약>#</a></h3><ul><li><strong>Shopify</strong>: 결제 게이트웨이, 배송 서비스 등 다양한 외부 서비스와 Ports/Adapters 기반 연결 (<a href="https://softengbook.org/articles/hexagonal-architecture?utm_source=chatgpt.com" title="What is a Hexagonal Architecture?–Software Engineering">softengbook.org</a>, <a href="https://www.geeksforgeeks.org/system-design/hexagonal-architecture-system-design/?utm_source=chatgpt.com" title="Hexagonal Architecture - System Design - GeeksforGeeks">GeeksforGeeks</a>)</li><li><strong>Netflix, PayPal</strong> 등: 마이크로서비스마다 core 로직 보호 및 외부 API adapter 통해 통신 (<a href="https://www.geeksforgeeks.org/system-design/hexagonal-architecture-system-design/?utm_source=chatgpt.com" title="Hexagonal Architecture - System Design - GeeksforGeeks">GeeksforGeeks</a>, <a href="https://www.geeksforgeeks.org/system-design/hexagonal-architecture-system-design/?utm_source=chatgpt.com" title="Hexagonal Architecture - System Design - GeeksforGeeks">GeeksforGeeks</a>)</li></ul><p>(자세한 사례 중심 활용 사례는 요청 시 머지 가능)</p><hr><h3 id=9-도전-과제--고려사항>9️⃣ 도전 과제 / 고려사항<a hidden class=anchor aria-hidden=true href=#9-도전-과제--고려사항>#</a></h3><h4 id=단점-표>단점 (표)<a hidden class=anchor aria-hidden=true href=#단점-표>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>Adapter 수 증가 및 복잡도 증가</td><td>Ports 수 & adapter 구현 증가</td><td>Port 과다 설계 방지, 단순화 전략</td></tr><tr><td></td><td>Latency 및 Overhead</td><td>adapter 추상화로 인한 호출 지연</td><td>profiling 기반 병목 파악 및 최적화 (<a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">AWS Documentation</a>)</td></tr><tr><td></td><td>작은 프로젝트에는 과도 설계</td><td>단순 프로젝트에 불필요한 구조</td><td>핵심 기능 중심 최소한 구조 적용</td></tr></tbody></table><h4 id=문제점-표>문제점 (표)<a hidden class=anchor aria-hidden=true href=#문제점-표>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지·진단</th><th>예방 방법</th><th>해결 방법</th></tr></thead><tbody><tr><td>문제점</td><td>Ports 정의 과도</td><td>포트 granularity 과다 설계</td><td>관리 난이도 증가</td><td>코드 리뷰, 설계 점검</td><td>최소 단위 port 적극 고민</td><td>refactor 또는 통합</td></tr><tr><td>문제점</td><td>Adapter 구현 중복</td><td>동일 포트에 다수 adapter 존재</td><td>유지보수 복잡화</td><td>adapter 모듈 분석</td><td>adapter 템플릿 활용</td><td>공통 로직 추출, 테스트 생성</td></tr></tbody></table><hr><h3 id=-계속-진행-가능-항목>🔍 계속 진행 가능 항목<a hidden class=anchor aria-hidden=true href=#-계속-진행-가능-항목>#</a></h3><ul><li>특정 언어 기반 예시 (Python / JavaScript / Go)</li><li>실무 활용 사례 세부화: 시스템 구성, mermaid 다이어그램, Workflow, 코드 예시 포함</li><li>도메인·Ports·Adapters 구조 설계 구체화</li></ul><p>필요하신 방향을 알려주시면 해당 항목 추가로 정리해드립니다.</p><p>좋습니다! 이제 &ldquo;Hexagonal Architecture (Ports & Adapters)&rdquo; 에 대한 <strong>심화 활용 사례</strong>, <strong>워크플로우</strong>, <strong>코드 예시</strong>, 그리고 <strong>도메인‑포트‑어댑터 구조 설계</strong>를 포함한 내용을 이어서 정리해드리겠습니다. 이번에는 Python 기반 사례 중심으로 구성했습니다.</p><hr><h3 id=-활용-사례-python-기반-사용자-관리-시스템>✅ 활용 사례: Python 기반 사용자 관리 시스템<a hidden class=anchor aria-hidden=true href=#-활용-사례-python-기반-사용자-관리-시스템>#</a></h3><p><strong>시나리오</strong>:<br>REST API 를 통해 사용자 CRUD 기능을 제공하며, 도메인 로직은 데이터베이스나 웹 프레임워크에 독립적으로 설계.</p><p><strong>시스템 구성</strong>:</p><ul><li><strong>Domain (코어)</strong>: User 엔티티, UserUseCase 인터페이스, 도메인 서비스</li><li><strong>Ports</strong>:<ul><li><em>Inbound Port</em>: <code>UserServicePort</code> (예: <code>create_user</code>, <code>get_user</code>)</li><li><em>Outbound Port</em>: <code>UserRepositoryPort</code> (예: 저장/조회 인터페이스)</li></ul></li><li><strong>Adapters</strong>:<ul><li><em>Inbound Adapter</em>: Flask/FastAPI 컨트롤러</li><li><em>Outbound Adapter</em>: SQLAlchemy 리포지토리 구현</li></ul></li><li><strong>Configurator</strong>: 앱 초기화 시 port 와 adapter 를 연결하고 인스턴싱</li></ul><p><strong>시스템 구성 다이어그램</strong>:</p><pre class=mermaid>graph LR
  Controller[Inbound Adapter\n(e.g. Flask)] --&gt;|calls| ServicePort(Inbound Port)
  ServicePort --&gt; Domain[Domain Logic / Use Cases]
  Domain --&gt; RepoPort(Outbound Port)
  RepoPort --&gt; DBAdapter[Outbound Adapter\n(SQLAlchemy)]
</pre><hr><h3 id=-workflow-및-역할>🛠 Workflow 및 역할<a hidden class=anchor aria-hidden=true href=#-workflow-및-역할>#</a></h3><ol><li>유저 요청 (HTTP POST /users) → Controller (Inbound Adapter)</li><li>Controller 는 DTO → domain 파라미터로 변환 후 <code>UserServicePort</code> 호출</li><li><code>UserUseCase</code> (domain core) 내부에서 비즈니스 로직 실행 (중복 여부 확인 등)</li><li>필요한 경우 <code>UserRepositoryPort</code> 통해 저장 또는 조회</li><li>도메인이 반환한 정보를 Controller 는 응답 DTO 로 변환 후 클라이언트 응답</li></ol><ul><li><strong>Controller (Inbound Adapter)</strong><ul><li>HTTP 요청을 domain 호출용 구조로 변환</li></ul></li><li><strong>Ports</strong><ul><li>Core 로직과 외부 시스템 사이의 계약 (interface) 정의</li></ul></li><li><strong>Use Case / Domain</strong><ul><li>핵심 비즈니스 로직 실행 (framework‑free)</li></ul></li><li><strong>Adapters</strong><ul><li>Port 계약을 기술에 의존하는 방식으로 구현하며 core 보호</li></ul></li><li><strong>Configurator</strong><ul><li>도메인 Port 인터페이스와 Adapter 구현 결합 (DI 역할)</li></ul></li></ul><hr><h3 id=-구현-예시-python-스타일-flask--sqlalchemy>🧱 구현 예시 (Python 스타일, Flask + SQLAlchemy)<a hidden class=anchor aria-hidden=true href=#-구현-예시-python-스타일-flask--sqlalchemy>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1> 1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2> 2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3> 3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4> 4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5> 5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6> 6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7> 7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8> 8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9> 9</a>
</span><span class=lnt id=hl-13-10><a class=lnlinks href=#hl-13-10>10</a>
</span><span class=lnt id=hl-13-11><a class=lnlinks href=#hl-13-11>11</a>
</span><span class=lnt id=hl-13-12><a class=lnlinks href=#hl-13-12>12</a>
</span><span class=lnt id=hl-13-13><a class=lnlinks href=#hl-13-13>13</a>
</span><span class=lnt id=hl-13-14><a class=lnlinks href=#hl-13-14>14</a>
</span><span class=lnt id=hl-13-15><a class=lnlinks href=#hl-13-15>15</a>
</span><span class=lnt id=hl-13-16><a class=lnlinks href=#hl-13-16>16</a>
</span><span class=lnt id=hl-13-17><a class=lnlinks href=#hl-13-17>17</a>
</span><span class=lnt id=hl-13-18><a class=lnlinks href=#hl-13-18>18</a>
</span><span class=lnt id=hl-13-19><a class=lnlinks href=#hl-13-19>19</a>
</span><span class=lnt id=hl-13-20><a class=lnlinks href=#hl-13-20>20</a>
</span><span class=lnt id=hl-13-21><a class=lnlinks href=#hl-13-21>21</a>
</span><span class=lnt id=hl-13-22><a class=lnlinks href=#hl-13-22>22</a>
</span><span class=lnt id=hl-13-23><a class=lnlinks href=#hl-13-23>23</a>
</span><span class=lnt id=hl-13-24><a class=lnlinks href=#hl-13-24>24</a>
</span><span class=lnt id=hl-13-25><a class=lnlinks href=#hl-13-25>25</a>
</span><span class=lnt id=hl-13-26><a class=lnlinks href=#hl-13-26>26</a>
</span><span class=lnt id=hl-13-27><a class=lnlinks href=#hl-13-27>27</a>
</span><span class=lnt id=hl-13-28><a class=lnlinks href=#hl-13-28>28</a>
</span><span class=lnt id=hl-13-29><a class=lnlinks href=#hl-13-29>29</a>
</span><span class=lnt id=hl-13-30><a class=lnlinks href=#hl-13-30>30</a>
</span><span class=lnt id=hl-13-31><a class=lnlinks href=#hl-13-31>31</a>
</span><span class=lnt id=hl-13-32><a class=lnlinks href=#hl-13-32>32</a>
</span><span class=lnt id=hl-13-33><a class=lnlinks href=#hl-13-33>33</a>
</span><span class=lnt id=hl-13-34><a class=lnlinks href=#hl-13-34>34</a>
</span><span class=lnt id=hl-13-35><a class=lnlinks href=#hl-13-35>35</a>
</span><span class=lnt id=hl-13-36><a class=lnlinks href=#hl-13-36>36</a>
</span><span class=lnt id=hl-13-37><a class=lnlinks href=#hl-13-37>37</a>
</span><span class=lnt id=hl-13-38><a class=lnlinks href=#hl-13-38>38</a>
</span><span class=lnt id=hl-13-39><a class=lnlinks href=#hl-13-39>39</a>
</span><span class=lnt id=hl-13-40><a class=lnlinks href=#hl-13-40>40</a>
</span><span class=lnt id=hl-13-41><a class=lnlinks href=#hl-13-41>41</a>
</span><span class=lnt id=hl-13-42><a class=lnlinks href=#hl-13-42>42</a>
</span><span class=lnt id=hl-13-43><a class=lnlinks href=#hl-13-43>43</a>
</span><span class=lnt id=hl-13-44><a class=lnlinks href=#hl-13-44>44</a>
</span><span class=lnt id=hl-13-45><a class=lnlinks href=#hl-13-45>45</a>
</span><span class=lnt id=hl-13-46><a class=lnlinks href=#hl-13-46>46</a>
</span><span class=lnt id=hl-13-47><a class=lnlinks href=#hl-13-47>47</a>
</span><span class=lnt id=hl-13-48><a class=lnlinks href=#hl-13-48>48</a>
</span><span class=lnt id=hl-13-49><a class=lnlinks href=#hl-13-49>49</a>
</span><span class=lnt id=hl-13-50><a class=lnlinks href=#hl-13-50>50</a>
</span><span class=lnt id=hl-13-51><a class=lnlinks href=#hl-13-51>51</a>
</span><span class=lnt id=hl-13-52><a class=lnlinks href=#hl-13-52>52</a>
</span><span class=lnt id=hl-13-53><a class=lnlinks href=#hl-13-53>53</a>
</span><span class=lnt id=hl-13-54><a class=lnlinks href=#hl-13-54>54</a>
</span><span class=lnt id=hl-13-55><a class=lnlinks href=#hl-13-55>55</a>
</span><span class=lnt id=hl-13-56><a class=lnlinks href=#hl-13-56>56</a>
</span><span class=lnt id=hl-13-57><a class=lnlinks href=#hl-13-57>57</a>
</span><span class=lnt id=hl-13-58><a class=lnlinks href=#hl-13-58>58</a>
</span><span class=lnt id=hl-13-59><a class=lnlinks href=#hl-13-59>59</a>
</span><span class=lnt id=hl-13-60><a class=lnlinks href=#hl-13-60>60</a>
</span><span class=lnt id=hl-13-61><a class=lnlinks href=#hl-13-61>61</a>
</span><span class=lnt id=hl-13-62><a class=lnlinks href=#hl-13-62>62</a>
</span><span class=lnt id=hl-13-63><a class=lnlinks href=#hl-13-63>63</a>
</span><span class=lnt id=hl-13-64><a class=lnlinks href=#hl-13-64>64</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># domain/entities/user.py</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>User</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>email</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>email</span> <span class=o>=</span> <span class=n>email</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># domain/ports/user_repository_port.py</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserRepositoryPort</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user</span><span class=p>:</span> <span class=n>User</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_by_email</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>email</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>User</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># domain/services/user_service.py</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>repo</span><span class=p>:</span> <span class=n>UserRepositoryPort</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>repo</span> <span class=o>=</span> <span class=n>repo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create_user</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>email</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>repo</span><span class=o>.</span><span class=n>find_by_email</span><span class=p>(</span><span class=n>email</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;Email already exists&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>user</span> <span class=o>=</span> <span class=n>User</span><span class=p>(</span><span class=n>email</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>repo</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>user</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># adapters/db/user_repository_sqlalchemy.py</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>domain.entities.user</span> <span class=kn>import</span> <span class=n>User</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>domain.ports.user_repository_port</span> <span class=kn>import</span> <span class=n>UserRepositoryPort</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>adapters.db.models</span> <span class=kn>import</span> <span class=n>UserModel</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SqlAlchemyUserRepository</span><span class=p>(</span><span class=n>UserRepositoryPort</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>session</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>session</span> <span class=o>=</span> <span class=n>session</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user</span><span class=p>:</span> <span class=n>User</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>orm</span> <span class=o>=</span> <span class=n>UserModel</span><span class=p>(</span><span class=n>email</span><span class=o>=</span><span class=n>user</span><span class=o>.</span><span class=n>email</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=n>user</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>session</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>orm</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>session</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_by_email</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>email</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>orm</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>session</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>UserModel</span><span class=p>)</span><span class=o>.</span><span class=n>filter_by</span><span class=p>(</span><span class=n>email</span><span class=o>=</span><span class=n>email</span><span class=p>)</span><span class=o>.</span><span class=n>first</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>User</span><span class=p>(</span><span class=n>orm</span><span class=o>.</span><span class=n>email</span><span class=p>,</span> <span class=n>orm</span><span class=o>.</span><span class=n>name</span><span class=p>)</span> <span class=k>if</span> <span class=n>orm</span> <span class=k>else</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># entrypoints/http/flask_controller.py</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>jsonify</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>domain.services.user_service</span> <span class=kn>import</span> <span class=n>UserService</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>adapters.db.user_repository_sqlalchemy</span> <span class=kn>import</span> <span class=n>SqlAlchemyUserRepository</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>adapters.db.session</span> <span class=kn>import</span> <span class=n>db_session</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>user_service</span> <span class=o>=</span> <span class=n>UserService</span><span class=p>(</span><span class=n>SqlAlchemyUserRepository</span><span class=p>(</span><span class=n>db_session</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s1>&#39;/users&#39;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;POST&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>create_user</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>json</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>user</span> <span class=o>=</span> <span class=n>user_service</span><span class=o>.</span><span class=n>create_user</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;email&#39;</span><span class=p>],</span> <span class=n>data</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>jsonify</span><span class=p>({</span><span class=s1>&#39;email&#39;</span><span class=p>:</span> <span class=n>user</span><span class=o>.</span><span class=n>email</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=n>user</span><span class=o>.</span><span class=n>name</span><span class=p>}),</span> <span class=mi>201</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>jsonify</span><span class=p>({</span><span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)}),</span> <span class=mi>400</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=-주목할-내용-요약-표>🔍 주목할 내용 요약 (표)<a hidden class=anchor aria-hidden=true href=#-주목할-내용-요약-표>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>설계 원칙</td><td>Driver vs Driven Port 구분</td><td>Inbound/Outbound Ports</td><td>명확한 역할 구분</td></tr><tr><td>테스트 전략</td><td>Core 테스트 독립성 유지</td><td>Port mocking</td><td>도메인 테스트 시 외부 의존 배제</td></tr><tr><td>적용 범위</td><td>모듈 단위 Hexagon 설계 가능</td><td>Modular Hexagon</td><td>기능별 모듈 단위 독립 아키텍처</td></tr><tr><td>스케일 확장</td><td>마이크로서비스 전환 용이성</td><td>Adapter 교체 중심 분리</td><td>기술 독립성 유지하며 분리 가능</td></tr></tbody></table><hr><h3 id=-반드시-학습해야-할-내용-보완>📚 반드시 학습해야 할 내용 (보완)<a hidden class=anchor aria-hidden=true href=#-반드시-학습해야-할-내용-보완>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>구조 설계</td><td>Modular Hexagon Pattern</td><td>기능별 독립 도메인 모듈</td><td>확장성 및 독립성 확보 전략</td></tr><tr><td>아키텍처 검증</td><td>Architecture Fitness Tests</td><td>CI 환경에서 의존성 규칙 검사</td><td>Ports‑Adapters 경계 유지</td></tr><tr><td>Port 설계</td><td>Port Granularity</td><td>포트 과다 또는 과소 설계</td><td>단순성과 명확성 고려 설계</td></tr></tbody></table><hr><h3 id=-기타-사항>🧩 기타 사항<a hidden class=anchor aria-hidden=true href=#-기타-사항>#</a></h3><ul><li><strong>모듈 단위 Hexagon 구조</strong>는 대규모 코드베이스에서 모듈화 및 유지보수 용이 → 모듈 단위로 entry‑point, domain, adapters 구성 가능합니다. (<a href="https://en.wikipedia.org/wiki/Hexagonal_architecture_%28software%29?utm_source=chatgpt.com" title="Hexagonal architecture (software)">gist.github.com</a>, <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">miladezzat.medium.com</a>, <a href="https://softengbook.org/articles/hexagonal-architecture?utm_source=chatgpt.com" title="What is a Hexagonal Architecture?–Software Engineering">8thlight.com</a>, <a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">dev.to</a>, <a href="https://bitloops.com/docs/bitloops-language/learning/software-architecture/hexagonal-architecture?utm_source=chatgpt.com" title="Hexagonal Architecture: Building Modular & Testable Software …">workflows.guru</a>, <a href="https://tsh.io/blog/hexagonal-architecture/?utm_source=chatgpt.com" title="Hexagonal architecture–overview and best practices">dev.to</a>, <a href="https://devcookies.medium.com/a-detailed-guide-to-hexagonal-architecture-with-examples-042523acb1db?utm_source=chatgpt.com" title="A Detailed Guide to Hexagonal Architecture with Examples">dev.to</a>, <a href="https://www.geeksforgeeks.org/system-design/hexagonal-architecture-system-design/?utm_source=chatgpt.com" title="Hexagonal Architecture - System Design - GeeksforGeeks">docs.aws.amazon.com</a>, <a href="https://romanglushach.medium.com/hexagonal-architecture-the-secret-to-scalable-and-maintainable-code-for-modern-software-d345fdb47347?utm_source=chatgpt.com" title="Hexagonal Architecture: The Secret to Scalable and Maintainable …">douwevandermeij.medium.com</a>)</li><li>AWS Lambda + Python 기반 서버리스에서도 hexagonal 구조 활용 사례가 있으며, domain/core 는 Lambda 핸들러와 분리하여 테스트, 재사용성을 유지할 수 있습니다. (<a href="https://www.geeksforgeeks.org/system-design/hexagonal-architecture-system-design/?utm_source=chatgpt.com" title="Hexagonal Architecture - System Design - GeeksforGeeks">docs.aws.amazon.com</a>)</li></ul><hr><p>필요하시면 이 구조에 기반한 테스트 코드, CI 구성 예시, adapter 교체 전략, 또는 언어나 플랫폼을 넘은 설계 예시도 제공해드릴 수 있습니다. 추가 요청 방향을 알려주세요!</p><p>다음은 **Hexagonal Architecture (Ports & Adapters)** 의 <strong>도전 과제 보완</strong>, <strong>테스트 및 아키텍처 검증 전략</strong>, <strong>최적화 고려사항</strong>, 그리고 <strong>CI 기반 설계 검증</strong>에 대한 심화 내용입니다.</p><hr><h3 id=-아키텍처-검증-및-테스트-전략>🧪 아키텍처 검증 및 테스트 전략<a hidden class=anchor aria-hidden=true href=#-아키텍처-검증-및-테스트-전략>#</a></h3><ul><li><p><strong>아키텍처 피트니스 테스트 (Architecture Fitness Test)</strong><br>CI 에서 구조적 규칙 (예: 포트와 어댑터 분리, 순환 의존 금지) 을 자동으로 검사하는 방법으로, Java 의 ArchUnit 처럼 테스트 프레임워크와 연계해 아키텍처 위반을 조기에 감지합니다. (<a href="https://en.wikipedia.org/wiki/Hexagonal_architecture_%28software%29?utm_source=chatgpt.com" title="Hexagonal architecture (software)">Medium</a>)</p></li><li><p><strong>테스트 구조</strong></p><ul><li><strong>단위 테스트 (Unit Test)</strong>: 도메인 코어 로직을 포트 의존 없이 테스트 (테스트 더블 사용) (<a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">AWS Documentation</a>, <a href="https://softengbook.org/articles/hexagonal-architecture?utm_source=chatgpt.com" title="What is a Hexagonal Architecture?–Software Engineering">n14n.dev</a>)</li><li><strong>통합 어댑터 테스트 (Integration Test)</strong>: 어댑터가 외부 시스템과 의도대로 상호작용하는지 확인 (<a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">AWS Documentation</a>)</li><li><strong>컨트랙트 테스트 (Contract Test)</strong> 및 <strong>E2E 테스트</strong>: 어댑터 간 인터페이스 계약을 기반으로 외부 시스템과의 호환성 검증 (<a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">qwan.eu</a>, <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">AWS Documentation</a>)</li></ul></li><li><p><strong>테스트 더블과 TDD</strong><br>테스트 더블 (fakes, mocks, stubs) 을 이용해 도메인 테스트를 외부 시스템 없이 빠르게 실행. TDD 접근법으로 도메인 스펙을 먼저 정의한 후 adapter 구현. (<a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">qwan.eu</a>)</p></li><li><p><strong>성능 및 구조 검증 자동화</strong><br>Fitness 함수 기반 테스트로 CI 에 통합하여 아키텍처 일관성과 테스트 통과 여부를 지속 검증. (<a href="https://bitloops.com/docs/bitloops-language/learning/software-architecture/hexagonal-architecture?utm_source=chatgpt.com" title="Hexagonal Architecture: Building Modular & Testable Software …">Apiumhub</a>)</p></li></ul><hr><h3 id=-성능-최적화-고려사항>⚙️ 성능 최적화 고려사항<a hidden class=anchor aria-hidden=true href=#-성능-최적화-고려사항>#</a></h3><table><thead><tr><th>항목</th><th>위험 요소</th><th>대책</th></tr></thead><tbody><tr><td>추상화 호출</td><td>포트 - 어댑터 오버헤드로 CPU/메모리 지연 가능</td><td>profiling 도구 활용, critical path inline 최적화</td></tr><tr><td>포트 granularity</td><td>포트 인터페이스가 너무 세분화되면 구현복잡도 상승</td><td>포트 설계 시 단순함과 재사용성 균형 조정</td></tr><tr><td>adapter 수 증가</td><td>다수 adapter 관리 부담</td><td>공통 코드 추출, 템플릿 또는 베이스 클래스 활용</td></tr></tbody></table><ul><li>단순 시스템에는 과도한 추상화보다 실용적 단순 구조 적용 고려. (<a href="https://tsh.io/blog/hexagonal-architecture/?utm_source=chatgpt.com" title="Hexagonal architecture–overview and best practices">AWS Documentation</a>)</li><li>중요한 요청 경로에서 latency 문제가 발생할 경우 adapter 호출 경로 최적화 필수. (<a href="https://tsh.io/blog/hexagonal-architecture/?utm_source=chatgpt.com" title="Hexagonal architecture–overview and best practices">AWS Documentation</a>, <a href="https://devcookies.medium.com/a-detailed-guide-to-hexagonal-architecture-with-examples-042523acb1db?utm_source=chatgpt.com" title="A Detailed Guide to Hexagonal Architecture with Examples">pratikpandey.substack.com</a>)</li></ul><hr><h3 id=-ci-기반-hexagonal-architecture-검증-예시-python-workflow>🎯 CI 기반 Hexagonal Architecture 검증 예시 (Python Workflow)<a hidden class=anchor aria-hidden=true href=#-ci-기반-hexagonal-architecture-검증-예시-python-workflow>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1> 1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2> 2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3> 3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4> 4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5> 5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6> 6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7> 7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8> 8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9> 9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10>10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11>11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12>12</a>
</span><span class=lnt id=hl-14-13><a class=lnlinks href=#hl-14-13>13</a>
</span><span class=lnt id=hl-14-14><a class=lnlinks href=#hl-14-14>14</a>
</span><span class=lnt id=hl-14-15><a class=lnlinks href=#hl-14-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>CI</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>push]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>test</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Install</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>pip install -r requirements.txt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Run Unit Tests</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>pytest tests/unit</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Run Architecture Fitness Tests</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>pytest tests/test_architecture_fitness.py</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Run Integration Tests</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>pytest tests/integration</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li><code>tests/test_architecture_fitness.py</code>: Architecture Fitness Test 구현 (예: 포트 디렉토리에만 의존하는지, adapter 가 domain 에 의존하는지) (<a href="https://en.wikipedia.org/wiki/Hexagonal_architecture_%28software%29?utm_source=chatgpt.com" title="Hexagonal architecture (software)">Medium</a>)</li><li>unit 테스트는 도메인 로직만, integration 테스트는 어댑터와 외부 시스템 연계 확인</li></ul><hr><h3 id=-도전-과제-보완-사용자-경험-고려>🔍 도전 과제 보완: 사용자 경험 고려<a hidden class=anchor aria-hidden=true href=#-도전-과제-보완-사용자-경험-고려>#</a></h3><ul><li><p><strong>Adapter 관리 복잡성</strong>: adapter 가 많아질 경우 어댑터 생성/등록, DI wiring 복잡도 증가<br>→ 공통 adapter base class 및 자동 등록 메커니즘 채택</p></li><li><p><strong>추상 레이어로 인한 코드 읽기 난이도 증가</strong>: 호출 흐름이 여러 계층으로 분산<br>→ 명확한 문서화, 이름 명명 규칙, 예제 코드 제공<br>(<a href="https://www.geeksforgeeks.org/system-design/hexagonal-architecture-system-design/?utm_source=chatgpt.com" title="Hexagonal Architecture - System Design - GeeksforGeeks">Reddit</a>, <a href="https://romanglushach.medium.com/hexagonal-architecture-the-secret-to-scalable-and-maintainable-code-for-modern-software-d345fdb47347?utm_source=chatgpt.com" title="Hexagonal Architecture: The Secret to Scalable and Maintainable …">DEV Community</a>)</p></li><li><p><strong>과도한 포트 정의로 테스트 및 유지보수 어려움</strong><br>→ 최소 단위 port 설계 원칙 기반 리팩토링 필요 (<a href="https://romanglushach.medium.com/hexagonal-architecture-the-secret-to-scalable-and-maintainable-code-for-modern-software-d345fdb47347?utm_source=chatgpt.com" title="Hexagonal Architecture: The Secret to Scalable and Maintainable …">DEV Community</a>, <a href="https://scalastic.io/en/hexagonal-architecture/?utm_source=chatgpt.com" title="Everything You Need to Know About Hexagonal Architecture: Kernel …">alexhyett.com</a>)</p></li></ul><hr><h3 id=핵심-요약>핵심 요약<a hidden class=anchor aria-hidden=true href=#핵심-요약>#</a></h3><ul><li>Hexagonal Architecture 는 <strong>도메인 중심</strong>, <strong>느슨한 결합</strong>, <strong>기술 독립성</strong>을 제공하는 구조로, testability 와 확장성을 지원합니다. (<a href="https://tsh.io/blog/hexagonal-architecture/?utm_source=chatgpt.com" title="Hexagonal architecture–overview and best practices">AWS Documentation</a>)</li><li>CI 기반 <strong>Architecture Fitness Test</strong> 및 <strong>Unit / Integration / Contract 테스트</strong> 전략으로 구조 일관성 유지 가능.</li><li>작은 프로젝트에는 <strong>과도 설계 주의</strong>, 핵심 도메인 중심 최소 구조로 도입 권장.</li><li><strong>성능 병목 발생 시 profiling 기반 병목 분석 후 adapter 호출 경로 최적화 권고</strong>.</li></ul><p>필요하시면 위 내용을 기반으로 <strong>fitness test 코드 예시</strong>, <strong>CI pipeline 전체 구성</strong>, <strong>다른 언어 프로젝트 구조</strong>, <strong>도메인별 adapter 분리 전략</strong> 등 더 심화된 자료도 제공 가능합니다. 요청 주시면 이어서 정리해드리겠습니다!</p><p>알겠습니다! 다음은 **Hexagonal Architecture (Ports & Adapters)** 의 구성요소별 심화 구조 설계와 <strong>architecture fitness test 코드 예시</strong>, <strong>단위 테스트 & 통합 테스트 사례</strong>, <strong>다른 언어 플랫폼 구성 구조 요약</strong>입니다.</p><hr><h3 id=1-모듈-단위-hexagon-설계-구조-설계-다이어그램>1️⃣ 모듈 단위 Hexagon 설계: 구조 설계 다이어그램<a hidden class=anchor aria-hidden=true href=#1-모듈-단위-hexagon-설계-구조-설계-다이어그램>#</a></h3><p>각 기능 (예: 사용자 (user), 주문 (order), 상품 (product)) 마다 독립된 hexagon 모듈로 설계할 수 있습니다.</p><pre class=mermaid>graph TD
  subgraph UserModule
    UI1[UserController]
    UPo(UserServicePort)
    UseCasesUC(UserService)
    UPo --&gt; UseCasesUC
    UseCasesUC --&gt; URepPort(UserRepositoryPort)
    URepPort --&gt; UDBAdapter(SQLAdapter)
  end

  subgraph OrderModule
    UI2[OrderController]
    OrPo(OrderServicePort)
    OrUC(OrderService)
    OrUC --&gt; ORepPort(OrderRepositoryPort)
    ORepPort --&gt; ODBAdapter(SQLAdapter)
  end

  subgraph CommonAdapters
    SQLAdapter((Shared DB Adapter))
    EmailAdapter((Email Sender Adapter))
  end
</pre><p>설명:</p><ul><li>각각의 모듈이 자체 Ports/Domain/Adapters 구조를 갖고, 인프라 (adapter) 는 재활용 가능</li><li>확장 시 모듈 추가만으로 기능 면에서 독립 가능</li></ul><hr><h3 id=2-architecture-fitness-test-예시-python-pytest>2️⃣ Architecture Fitness Test 예시 (Python, pytest)<a hidden class=anchor aria-hidden=true href=#2-architecture-fitness-test-예시-python-pytest>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1> 1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2> 2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3> 3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4> 4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5> 5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6> 6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7> 7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8> 8</a>
</span><span class=lnt id=hl-16-9><a class=lnlinks href=#hl-16-9> 9</a>
</span><span class=lnt id=hl-16-10><a class=lnlinks href=#hl-16-10>10</a>
</span><span class=lnt id=hl-16-11><a class=lnlinks href=#hl-16-11>11</a>
</span><span class=lnt id=hl-16-12><a class=lnlinks href=#hl-16-12>12</a>
</span><span class=lnt id=hl-16-13><a class=lnlinks href=#hl-16-13>13</a>
</span><span class=lnt id=hl-16-14><a class=lnlinks href=#hl-16-14>14</a>
</span><span class=lnt id=hl-16-15><a class=lnlinks href=#hl-16-15>15</a>
</span><span class=lnt id=hl-16-16><a class=lnlinks href=#hl-16-16>16</a>
</span><span class=lnt id=hl-16-17><a class=lnlinks href=#hl-16-17>17</a>
</span><span class=lnt id=hl-16-18><a class=lnlinks href=#hl-16-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># tests/test_architecture_fitness.py</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pytest</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>test_adapters_do_not_import_domain</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=kn>import</span> <span class=nn>adapters</span>
</span></span><span class=line><span class=cl>    <span class=n>domain_modules</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>root</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>files</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>walk</span><span class=p>(</span><span class=s2>&#34;adapters&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=n>files</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>f</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=s2>&#34;.py&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=n>path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=n>f</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>content</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>)</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=k>assert</span> <span class=s2>&#34;import domain&#34;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>content</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>path</span><span class=si>}</span><span class=s2> imports domain directly&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>test_ports_are_only_imported_by_adapters_or_domain</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1># Ensure adapters import ports, domain imports ports, but ports don&#39;t import adapters</span>
</span></span><span class=line><span class=cl>    <span class=kn>from</span> <span class=nn>domain</span> <span class=kn>import</span> <span class=n>ports</span>
</span></span><span class=line><span class=cl>    <span class=k>assert</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>ports</span><span class=p>,</span> <span class=s1>&#39;adapters&#39;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>첫 번째 테스트</strong>: adapter 코드에서는 도메인 (<code>domain</code>) 을 직접 임포트하면 안 됨</li><li><strong>두 번째 테스트</strong>: ports 는 adapters 와 domain 만 참조 가능, adapter 가 ports 외 다른 참조는 제한</li></ul><hr><h3 id=3-테스트-구조-및-예시>3️⃣ 테스트 구조 및 예시<a hidden class=anchor aria-hidden=true href=#3-테스트-구조-및-예시>#</a></h3><h4 id=-unit-test-domain-핵심-로직만-검증>✅ Unit Test (domain 핵심 로직만 검증)<a hidden class=anchor aria-hidden=true href=#-unit-test-domain-핵심-로직만-검증>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1> 1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2> 2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3> 3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4> 4</a>
</span><span class=lnt id=hl-17-5><a class=lnlinks href=#hl-17-5> 5</a>
</span><span class=lnt id=hl-17-6><a class=lnlinks href=#hl-17-6> 6</a>
</span><span class=lnt id=hl-17-7><a class=lnlinks href=#hl-17-7> 7</a>
</span><span class=lnt id=hl-17-8><a class=lnlinks href=#hl-17-8> 8</a>
</span><span class=lnt id=hl-17-9><a class=lnlinks href=#hl-17-9> 9</a>
</span><span class=lnt id=hl-17-10><a class=lnlinks href=#hl-17-10>10</a>
</span><span class=lnt id=hl-17-11><a class=lnlinks href=#hl-17-11>11</a>
</span><span class=lnt id=hl-17-12><a class=lnlinks href=#hl-17-12>12</a>
</span><span class=lnt id=hl-17-13><a class=lnlinks href=#hl-17-13>13</a>
</span><span class=lnt id=hl-17-14><a class=lnlinks href=#hl-17-14>14</a>
</span><span class=lnt id=hl-17-15><a class=lnlinks href=#hl-17-15>15</a>
</span><span class=lnt id=hl-17-16><a class=lnlinks href=#hl-17-16>16</a>
</span><span class=lnt id=hl-17-17><a class=lnlinks href=#hl-17-17>17</a>
</span><span class=lnt id=hl-17-18><a class=lnlinks href=#hl-17-18>18</a>
</span><span class=lnt id=hl-17-19><a class=lnlinks href=#hl-17-19>19</a>
</span><span class=lnt id=hl-17-20><a class=lnlinks href=#hl-17-20>20</a>
</span><span class=lnt id=hl-17-21><a class=lnlinks href=#hl-17-21>21</a>
</span><span class=lnt id=hl-17-22><a class=lnlinks href=#hl-17-22>22</a>
</span><span class=lnt id=hl-17-23><a class=lnlinks href=#hl-17-23>23</a>
</span><span class=lnt id=hl-17-24><a class=lnlinks href=#hl-17-24>24</a>
</span><span class=lnt id=hl-17-25><a class=lnlinks href=#hl-17-25>25</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># tests/unit/test_user_service.py</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pytest</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>domain.services.user_service</span> <span class=kn>import</span> <span class=n>UserService</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>domain.entities.user</span> <span class=kn>import</span> <span class=n>User</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>FakeRepo</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>data</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=n>user</span><span class=o>.</span><span class=n>email</span><span class=p>]</span> <span class=o>=</span> <span class=n>user</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_by_email</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>email</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>email</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>test_create_user_success</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>repo</span> <span class=o>=</span> <span class=n>FakeRepo</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>svc</span> <span class=o>=</span> <span class=n>UserService</span><span class=p>(</span><span class=n>repo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>user</span> <span class=o>=</span> <span class=n>svc</span><span class=o>.</span><span class=n>create_user</span><span class=p>(</span><span class=s2>&#34;a@example.com&#34;</span><span class=p>,</span> <span class=s2>&#34;Alice&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>assert</span> <span class=n>user</span><span class=o>.</span><span class=n>email</span> <span class=o>==</span> <span class=s2>&#34;a@example.com&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>test_create_user_duplicate</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>repo</span> <span class=o>=</span> <span class=n>FakeRepo</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>repo</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>User</span><span class=p>(</span><span class=s2>&#34;a@example.com&#34;</span><span class=p>,</span> <span class=s2>&#34;Alice&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>svc</span> <span class=o>=</span> <span class=n>UserService</span><span class=p>(</span><span class=n>repo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=n>pytest</span><span class=o>.</span><span class=n>raises</span><span class=p>(</span><span class=ne>ValueError</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>svc</span><span class=o>.</span><span class=n>create_user</span><span class=p>(</span><span class=s2>&#34;a@example.com&#34;</span><span class=p>,</span> <span class=s2>&#34;Alice&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=-integration-test-adapter-와-외부-시스템-연동>🧪 Integration Test (Adapter 와 외부 시스템 연동)<a hidden class=anchor aria-hidden=true href=#-integration-test-adapter-와-외부-시스템-연동>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1> 1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2> 2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3> 3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4> 4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5> 5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6> 6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7> 7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8> 8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9> 9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10>10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11>11</a>
</span><span class=lnt id=hl-18-12><a class=lnlinks href=#hl-18-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># tests/integration/test_user_repository.py</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pytest</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>adapters.db.user_repository_sqlalchemy</span> <span class=kn>import</span> <span class=n>SqlAlchemyUserRepository</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>domain.entities.user</span> <span class=kn>import</span> <span class=n>User</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>adapters.db.session</span> <span class=kn>import</span> <span class=n>db_session</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>test_save_and_find</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>repo</span> <span class=o>=</span> <span class=n>SqlAlchemyUserRepository</span><span class=p>(</span><span class=n>db_session</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>user</span> <span class=o>=</span> <span class=n>User</span><span class=p>(</span><span class=s2>&#34;b@example.com&#34;</span><span class=p>,</span> <span class=s2>&#34;Bob&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>repo</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>found</span> <span class=o>=</span> <span class=n>repo</span><span class=o>.</span><span class=n>find_by_email</span><span class=p>(</span><span class=s2>&#34;b@example.com&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>assert</span> <span class=n>found</span> <span class=ow>and</span> <span class=n>found</span><span class=o>.</span><span class=n>email</span> <span class=o>==</span> <span class=s2>&#34;b@example.com&#34;</span>
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=4-다른-언어-및-플랫폼-구성-요약>4️⃣ 다른 언어 및 플랫폼 구성 요약<a hidden class=anchor aria-hidden=true href=#4-다른-언어-및-플랫폼-구성-요약>#</a></h3><table><thead><tr><th>언어/플랫폼</th><th>구조 방식</th><th>특징</th></tr></thead><tbody><tr><td><strong>Node.js + Express</strong></td><td>domain/core, ports, controllers, repositories</td><td>adapter 는 Express 라우터, ORM 등으로 구현</td></tr><tr><td><strong>Go (Golang)</strong></td><td><code>pkg/domain</code>, <code>pkg/ports</code>, <code>pkg/adapters</code> 구조</td><td>정적 타입, 인터페이스 설계에 적합, DI 없이 간단 구조</td></tr><tr><td><strong>Kotlin + Spring Boot</strong></td><td>port 인터페이스, adapter 구현, configuration 클래스</td><td>Spring DI 및 bean 방식으로 adapter 연결 구조 유지</td></tr><tr><td><strong>Python + AWS Lambda</strong></td><td>handler 와 domain 분리, adapter 는 이식 가능한 모듈 형식</td><td>serverless 환경에서 변경 없이 domain 재사용 가능</td></tr></tbody></table><hr><h3 id=-요약-지금까지-정리한-아키텍처-검증-요건>🧭 요약: 지금까지 정리한 아키텍처 검증 요건<a hidden class=anchor aria-hidden=true href=#-요약-지금까지-정리한-아키텍처-검증-요건>#</a></h3><ul><li><strong>모듈 단위 Hexagon 설계로 기능별 독립성과 재사용성 확보</strong></li><li><strong>Architecture Fitness Test</strong>로 adapter 와 domain 간 의존성 규칙 자동 검사</li><li><strong>단위 테스트</strong>로 domain 코어 로직 검증, <strong>통합 테스트</strong>로 adapter 와 외부 연동 검증</li><li><strong>다양한 언어 플랫폼에 적용 가능</strong>한 일관된 Ports/Adapters 구조 사용</li><li><strong>CI 기반 pipeline</strong> 내 테스트 및 구조 검증 절차 통합</li></ul><p>더 구체적인 <strong>Go 구현 예시</strong>, <strong>Node.js 프로젝트 구조</strong>, <strong>Kotlin Spring Boot DI 설정</strong>, <strong>AWS Lambda 서버리스 Hexagon 설계</strong> 등이 필요하시면 말씀해 주세요! 강조하고 싶은 특정 부분 요청하시면 해당 방향으로 정리해드리겠습니다.</p><p>다음은 요청하신 Hexagonal Architecture 에 대한 <strong>미작성된 항목</strong> 중 다음 세 가지를 보완하여 작성한 표입니다.</p><hr><h4 id=-분류-기준에-따른-종류-및-유형>✅ 분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#-분류-기준에-따른-종류-및-유형>#</a></h4><table><thead><tr><th>분류 기준</th><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>포트 방향</td><td>Inbound Port / Outbound Port</td><td>애플리케이션 진입 및 외부 리소스 호출을 위한 구분</td></tr><tr><td>아키텍처 구성 방식</td><td>모듈형 Hexagon / 모놀리식 Hexagon</td><td>각 기능을 모듈로 분리할지 여부에 따라 구조 결정</td></tr><tr><td>기술 스택 대응</td><td>HTTP / gRPC / Event Adapter</td><td>Inbound/Outbound 어댑터의 기술적 채택 방식에 따라 구분</td></tr></tbody></table><hr><h4 id=-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>✅ 실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h4><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>포트 과잉 정의</td><td>각 use case 마다 포트를 분리하면 유지보수 어려움</td><td>기능 단위 묶음 기준으로 port 설계</td></tr><tr><td>모듈화 전략</td><td>단일 Hexagon 구조는 기능 확장에 어려움</td><td>기능 기반 모듈로 Hexagon 분리</td></tr><tr><td>의존성 주입</td><td>DI 설정이 복잡해질 수 있음</td><td>프레임워크 기능 또는 수동 주입으로 간단화</td></tr><tr><td>테스트 구성</td><td>테스트 범위 혼동 가능</td><td>Domain 은 Unit Test, Adapter 는 Integration Test 분리</td></tr></tbody></table><hr><h4 id=-최적화하기-위한-고려사항-및-주의할-점>✅ 최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#-최적화하기-위한-고려사항-및-주의할-점>#</a></h4><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>Adapter 호출 최적화</td><td>지나친 추상화는 성능 저하 원인</td><td>핵심 경로는 인라인 최적화 및 직접 호출 병행</td></tr><tr><td>I/O 집중 영역</td><td>DB, API 등 Outbound Adapter 병목 발생 가능</td><td>비동기 처리, 캐싱, 리트라이 패턴 적용</td></tr><tr><td>테스트 병목</td><td>전체 테스트 수행 시간이 길어짐</td><td>도메인 테스트는 병렬, 어댑터 테스트는 주기적 수행</td></tr><tr><td>코드 난이도 증가</td><td>추상 레이어가 많아 가독성 저하</td><td>문서화, 코드 템플릿, 표준 명명 규칙 운영</td></tr></tbody></table><hr><p>좋습니다. 이어서 다음 항목들을 작성하겠습니다.</p><hr><h3 id=-기타-사항-1>📌 기타 사항<a hidden class=anchor aria-hidden=true href=#-기타-사항-1>#</a></h3><ul><li><strong>Hexagonal Architecture 는 &rsquo; 의존성 흐름 &rsquo; 을 설계의 핵심 개념으로 채택</strong><br>→ 모든 어댑터는 도메인을 " 사용 " 할 수 있지만 도메인은 어떤 구현에도 의존하지 않아야 함</li><li><strong>테스트 중심 설계 (TDD) 와 궁합이 뛰어남</strong><br>→ Domain 과 Use Case 는 순수 로직으로서 mocking 만으로 테스트 가능</li><li><strong>Framework 탈피 가능성 확보</strong><br>→ 프레임워크 변경 시 adapter 만 교체하면 전체 시스템 변경 없이 유지 가능</li><li><strong>마이크로서비스 이전 구조로 이상적</strong><br>→ 모듈별 hexagon 은 서비스 단위로 분리 가능하며, 이후 독립 배포 및 운영이 쉬움</li><li><strong>도메인 주도 설계 (DDD) 와 자연스럽게 결합</strong><br>→ Entity, Value Object, Service 등의 도메인 개념을 core 에 포함시킬 수 있음</li></ul><hr><h3 id=-용어-정리>📚 용어 정리<a hidden class=anchor aria-hidden=true href=#-용어-정리>#</a></h3><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>Hexagonal Architecture</td><td>Ports 와 Adapters 를 통해 핵심 로직과 외부 요소를 분리하는 아키텍처 스타일</td></tr><tr><td>아키텍처</td><td>Port</td><td>도메인 계층이 외부와 소통하기 위해 정의하는 추상화된 인터페이스</td></tr><tr><td>아키텍처</td><td>Adapter</td><td>포트를 구현하여 외부 기술 요소 (UI, DB 등) 와 연결하는 계층</td></tr><tr><td>아키텍처</td><td>Inbound Port</td><td>외부 요청이 도메인 로직으로 진입하기 위한 인터페이스</td></tr><tr><td>아키텍처</td><td>Outbound Port</td><td>도메인이 외부 시스템에 의존을 표현할 때 사용하는 인터페이스</td></tr><tr><td>설계 원칙</td><td>Dependency Rule</td><td>외부는 내부를 알 수 있지만, 내부는 외부를 알 수 없음 (의존 방향성 규칙)</td></tr><tr><td>개발 기법</td><td>TDD (Test-Driven Development)</td><td>테스트를 먼저 작성하고 그에 맞는 기능을 구현하는 개발 방식</td></tr><tr><td>테스트</td><td>Architecture Fitness Test</td><td>아키텍처 구조적 규칙을 코드 수준에서 검증하는 테스트 기법</td></tr></tbody></table><hr><h3 id=-참고-및-출처>🔗 참고 및 출처<a hidden class=anchor aria-hidden=true href=#-참고-및-출처>#</a></h3><ul><li><a href=https://en.wikipedia.org/wiki/Hexagonal_architecture_%28software%29>Hexagonal Architecture 공식 소개 - Wikipedia</a></li><li><a href=https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html>AWS Prescriptive Guide - Hexagonal Architecture</a></li><li><a href=https://www.thoughtworks.com/radar/techniques/hexagonal-architecture>ThoughtWorks Technology Radar - Ports and Adapters</a></li><li><a href=https://alistair.cockburn.us/hexagonal-architecture/>Alistair Cockburn 원 저자 설명</a></li><li><a href=https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi>Clean vs Hexagonal vs Onion 비교</a></li><li><a href=https://apiumhub.com/tech-blog-barcelona/hexagonal-vs-onion-vs-clean-architecture/>Apiumhub - Clean Architecture, Hexagonal, Onion 비교</a></li><li><a href=https://medium.com/@suman.maity112/architecture-fitness-test-6f64d9a266c>Architecture Fitness Testing Example</a></li></ul><hr><h3 id=-마무리-요약>✅ 마무리 요약<a hidden class=anchor aria-hidden=true href=#-마무리-요약>#</a></h3><p>Hexagonal Architecture 는 소프트웨어의 핵심 로직을 외부 시스템으로부터 분리함으로써 유지보수성과 테스트 용이성을 극대화합니다. 기술 독립성과 도메인 중심 설계를 가능하게 하며, 마이크로서비스 또는 서버리스 이전에 기반이 되는 유연한 구조입니다. Ports(인터페이스) 와 Adapters(구현체) 를 통해 의존성을 명확하게 분리하고, 아키텍처 규칙을 검증할 수 있는 테스트와 자동화 전략까지 지원할 수 있는 강력한 패턴입니다.</p><hr><p>이제 전체 항목이 모두 작성 완료되었습니다. 추가로 특정 플랫폼의 예제, 언어별 프로젝트 구조 예시, 또는 비교 기반 문서가 필요하시다면 요청해 주세요.</p><hr><h3 id=1-태그>1. 태그<a hidden class=anchor aria-hidden=true href=#1-태그>#</a></h3><ul><li><strong>Hexagonal-Architecture</strong></li><li><strong>Ports-and-Adapters</strong></li><li><strong>Domain-Driven-Design</strong></li><li><strong>Software-Design-Patterns</strong></li></ul><hr><h3 id=2-분류-구조-분석>2. 분류 구조 분석<a hidden class=anchor aria-hidden=true href=#2-분류-구조-분석>#</a></h3><p><strong>계층 구조:</strong><br>Computer Science and Engineering > Software Engineering > Design and Architecture > Architecture Styles and Patterns > Architecture Patterns</p><p><strong>분석 및 근거:</strong><br>Hexagonal Architecture 는 소프트웨어 엔지니어링의 설계 및 아키텍처 분야에서 널리 사용되는 아키텍처 패턴 (Architecture Pattern) 으로, 의존성 역전과 인터페이스 기반 설계를 통해 결합도를 낮추고 유지보수성과 확장성을 높이는 것이 목적입니다. 이는 &ldquo;Architecture Styles and Patterns&rdquo; 하위의 &ldquo;Architecture Patterns&rdquo; 에 적합하게 분류됩니다. 실제로 Hexagonal Architecture 는 레이어드 (Layered) 구조와 도메인 중심 설계 (Domain-Driven Design) 의 영향을 받아 설계되었으며, 소프트웨어 엔지니어링의 핵심 설계 원칙에 부합합니다 <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">1</a><a href="https://softengbook.org/articles/hexagonal-architecture?utm_source=chatgpt.com" title="What is a Hexagonal Architecture?–Software Engineering">3</a>.</p><hr><h3 id=3-요약-200-자-내외>3. 요약 (200 자 내외)<a hidden class=anchor aria-hidden=true href=#3-요약-200-자-내외>#</a></h3><p>Hexagonal Architecture 는 비즈니스 로직을 중심에 두고, 포트와 어댑터를 통해 외부 기술 의존성을 분리해 결합도를 낮추고 유지보수성과 테스트 용이성을 높이는 아키텍처 패턴이다 <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">1</a><a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">4</a>.</p><hr><h3 id=4-개요-250-자-내외>4. 개요 (250 자 내외)<a hidden class=anchor aria-hidden=true href=#4-개요-250-자-내외>#</a></h3><p>Hexagonal Architecture(포트와 어댑터 아키텍처) 는 애플리케이션의 핵심 비즈니스 로직을 외부 프레임워크, 데이터베이스, UI 등과 분리해, 변경에 유연하고 테스트가 용이하며, 장기적으로 유지보수와 확장이 쉬운 구조를 제공하는 설계 방법론이다 <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">1</a><a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">4</a>.</p><hr><h3 id=5-핵심-개념-2>5. 핵심 개념<a hidden class=anchor aria-hidden=true href=#5-핵심-개념-2>#</a></h3><ul><li><strong>비즈니스 로직 중심 설계:</strong> 도메인 (비즈니스 엔티티와 규칙) 을 시스템의 중심에 배치하여, 외부 기술 변화에 영향을 받지 않도록 설계 <a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">5</a><a href="https://tsh.io/blog/hexagonal-architecture/?utm_source=chatgpt.com" title="Hexagonal architecture–overview and best practices">6</a>.</li><li><strong>포트 (Port):</strong> 외부와의 상호작용을 위한 인터페이스. 인바운드 (외부→내부), 아웃바운드 (내부→외부) 로 구분 <a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">5</a><a href="https://devcookies.medium.com/a-detailed-guide-to-hexagonal-architecture-with-examples-042523acb1db?utm_source=chatgpt.com" title="A Detailed Guide to Hexagonal Architecture with Examples">7</a>.</li><li><strong>어댑터 (Adapter):</strong> 외부 시스템과의 통합을 담당하는 구현체. 인바운드 (입력), 아웃바운드 (출력) 어댑터로 구분 <a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">5</a><a href="https://devcookies.medium.com/a-detailed-guide-to-hexagonal-architecture-with-examples-042523acb1db?utm_source=chatgpt.com" title="A Detailed Guide to Hexagonal Architecture with Examples">7</a>.</li><li><strong>의존성 역전 (Dependency Inversion):</strong> 내부 (코어) 가 외부 (인프라) 에 의존하지 않고, 인터페이스를 통해 느슨하게 결합 <a href="https://softengbook.org/articles/hexagonal-architecture?utm_source=chatgpt.com" title="What is a Hexagonal Architecture?–Software Engineering">6</a>.</li><li><strong>테스트 용이성:</strong> 도메인과 유스케이스는 외부 의존 없이 독립적으로 테스트 가능 <a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">1</a><a href="https://www.geeksforgeeks.org/system-design/hexagonal-architecture-system-design/?utm_source=chatgpt.com" title="Hexagonal Architecture - System Design - GeeksforGeeks">8</a>.</li></ul><p><strong>실무 구현 요소</strong></p><ul><li><strong>도메인 (Domain):</strong> 비즈니스 엔티티와 규칙</li><li><strong>포트 (Port):</strong> 외부와의 상호작용 인터페이스</li><li><strong>어댑터 (Adapter):</strong> 외부 시스템과의 통합 구현체</li><li><strong>서비스 (Service):</strong> 비즈니스 로직 구현 (유스케이스)</li></ul><hr><h3 id=6-조사-내용-주요-항목별-정리>6. 조사 내용 (주요 항목별 정리)<a hidden class=anchor aria-hidden=true href=#6-조사-내용-주요-항목별-정리>#</a></h3><h4 id=배경>배경<a hidden class=anchor aria-hidden=true href=#배경>#</a></h4><p>Hexagonal Architecture 는 계층형 아키텍처의 단점 (계층 간 의존성, 비즈니스 로직과 UI/DB 코드 혼재) 을 보완하기 위해 Alistair Cockburn 이 2005 년에 제안한 아키텍처 패턴입니다 <a href="https://romanglushach.medium.com/hexagonal-architecture-the-secret-to-scalable-and-maintainable-code-for-modern-software-d345fdb47347?utm_source=chatgpt.com" title="Hexagonal Architecture: The Secret to Scalable and Maintainable …">1</a><a href="https://softengbook.org/articles/hexagonal-architecture?utm_source=chatgpt.com" title="What is a Hexagonal Architecture?–Software Engineering">3</a>.</p><h4 id=목적-및-필요성-2>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성-2>#</a></h4><ul><li><strong>비즈니스 로직의 독립성:</strong> 외부 기술 변화에 영향을 받지 않도록 도메인을 격리 <a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">1</a><a href="https://tsh.io/blog/hexagonal-architecture/?utm_source=chatgpt.com" title="Hexagonal architecture–overview and best practices">6</a>.</li><li><strong>유지보수성과 확장성:</strong> 변경이 용이하고, 장기적으로 관리가 쉬움 <a href="https://www.geeksforgeeks.org/system-design/hexagonal-architecture-system-design/?utm_source=chatgpt.com" title="Hexagonal Architecture - System Design - GeeksforGeeks">1</a><a href="https://devcookies.medium.com/a-detailed-guide-to-hexagonal-architecture-with-examples-042523acb1db?utm_source=chatgpt.com" title="A Detailed Guide to Hexagonal Architecture with Examples">7</a>.</li><li><strong>테스트 용이성:</strong> 도메인과 유스케이스가 독립적으로 테스트 가능 <a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">1</a><a href="https://www.geeksforgeeks.org/system-design/hexagonal-architecture-system-design/?utm_source=chatgpt.com" title="Hexagonal Architecture - System Design - GeeksforGeeks">8</a>.</li></ul><h4 id=주요-기능-및-역할-1>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할-1>#</a></h4><ul><li><strong>도메인:</strong> 비즈니스 엔티티와 규칙 정의</li><li><strong>포트:</strong> 외부와의 상호작용 인터페이스</li><li><strong>어댑터:</strong> 외부 시스템과의 통합 구현체</li><li><strong>서비스:</strong> 비즈니스 로직 구현</li></ul><h4 id=특징-2>특징<a hidden class=anchor aria-hidden=true href=#특징-2>#</a></h4><ul><li><strong>포트와 어댑터 구조:</strong> 외부와의 연결을 인터페이스와 구현체로 분리 <a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">1</a><a href="https://tsh.io/blog/hexagonal-architecture/?utm_source=chatgpt.com" title="Hexagonal architecture–overview and best practices">6</a>.</li><li><strong>의존성 역전:</strong> 내부가 외부에 의존하지 않음 <a href="https://softengbook.org/articles/hexagonal-architecture?utm_source=chatgpt.com" title="What is a Hexagonal Architecture?–Software Engineering">6</a>.</li><li><strong>테스트 용이성:</strong> 독립적 테스트 가능 <a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">1</a><a href="https://www.geeksforgeeks.org/system-design/hexagonal-architecture-system-design/?utm_source=chatgpt.com" title="Hexagonal Architecture - System Design - GeeksforGeeks">8</a>.</li></ul><h4 id=핵심-원칙-2>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙-2>#</a></h4><ul><li><strong>DIP(의존성 역전 원칙):</strong> 상위 계층이 하위 계층에 직접 의존하지 않고 인터페이스를 통해 의존성 역전 <a href="https://softengbook.org/articles/hexagonal-architecture?utm_source=chatgpt.com" title="What is a Hexagonal Architecture?–Software Engineering">6</a>.</li><li><strong>ISP(인터페이스 분리 원칙):</strong> 클라이언트가 필요 없는 인터페이스에 의존하지 않음 <a href="https://tsh.io/blog/hexagonal-architecture/?utm_source=chatgpt.com" title="Hexagonal architecture–overview and best practices">6</a>.</li><li><strong>SRP(단일 책임 원칙):</strong> 각 계층과 모듈이 단일 책임을 가짐 <a href="https://tsh.io/blog/hexagonal-architecture/?utm_source=chatgpt.com" title="Hexagonal architecture–overview and best practices">6</a>.</li></ul><h4 id=주요-원리-및-작동-원리-1>주요 원리 및 작동 원리<a hidden class=anchor aria-hidden=true href=#주요-원리-및-작동-원리-1>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1> 1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2> 2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3> 3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4> 4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5> 5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6> 6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7> 7</a>
</span><span class=lnt id=hl-19-8><a class=lnlinks href=#hl-19-8> 8</a>
</span><span class=lnt id=hl-19-9><a class=lnlinks href=#hl-19-9> 9</a>
</span><span class=lnt id=hl-19-10><a class=lnlinks href=#hl-19-10>10</a>
</span><span class=lnt id=hl-19-11><a class=lnlinks href=#hl-19-11>11</a>
</span><span class=lnt id=hl-19-12><a class=lnlinks href=#hl-19-12>12</a>
</span><span class=lnt id=hl-19-13><a class=lnlinks href=#hl-19-13>13</a>
</span><span class=lnt id=hl-19-14><a class=lnlinks href=#hl-19-14>14</a>
</span><span class=lnt id=hl-19-15><a class=lnlinks href=#hl-19-15>15</a>
</span><span class=lnt id=hl-19-16><a class=lnlinks href=#hl-19-16>16</a>
</span><span class=lnt id=hl-19-17><a class=lnlinks href=#hl-19-17>17</a>
</span><span class=lnt id=hl-19-18><a class=lnlinks href=#hl-19-18>18</a>
</span><span class=lnt id=hl-19-19><a class=lnlinks href=#hl-19-19>19</a>
</span><span class=lnt id=hl-19-20><a class=lnlinks href=#hl-19-20>20</a>
</span><span class=lnt id=hl-19-21><a class=lnlinks href=#hl-19-21>21</a>
</span><span class=lnt id=hl-19-22><a class=lnlinks href=#hl-19-22>22</a>
</span><span class=lnt id=hl-19-23><a class=lnlinks href=#hl-19-23>23</a>
</span><span class=lnt id=hl-19-24><a class=lnlinks href=#hl-19-24>24</a>
</span><span class=lnt id=hl-19-25><a class=lnlinks href=#hl-19-25>25</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[Diagram: Hexagonal Architecture Layers]
</span></span><span class=line><span class=cl>       +-------------------------------+
</span></span><span class=line><span class=cl>       |        Adapter (Inbound)      |
</span></span><span class=line><span class=cl>       | (e.g. REST API, UI, Message)  |
</span></span><span class=line><span class=cl>       +---------------+---------------+
</span></span><span class=line><span class=cl>                       |
</span></span><span class=line><span class=cl>       +---------------v---------------+
</span></span><span class=line><span class=cl>       |           Port (Inbound)      |
</span></span><span class=line><span class=cl>       | (Interface for Core Service)  |
</span></span><span class=line><span class=cl>       +---------------+---------------+
</span></span><span class=line><span class=cl>                       |
</span></span><span class=line><span class=cl>       +---------------v---------------+
</span></span><span class=line><span class=cl>       |           Core (Domain)       |
</span></span><span class=line><span class=cl>       | (Business Logic, Entities)    |
</span></span><span class=line><span class=cl>       +---------------+---------------+
</span></span><span class=line><span class=cl>                       |
</span></span><span class=line><span class=cl>       +---------------v---------------+
</span></span><span class=line><span class=cl>       |           Port (Outbound)     |
</span></span><span class=line><span class=cl>       | (Interface for Infra Service) |
</span></span><span class=line><span class=cl>       +---------------+---------------+
</span></span><span class=line><span class=cl>                       |
</span></span><span class=line><span class=cl>       +---------------v---------------+
</span></span><span class=line><span class=cl>       |        Adapter (Outbound)     |
</span></span><span class=line><span class=cl>       | (e.g. DB, External Service)   |
</span></span><span class=line><span class=cl>       +-------------------------------+
</span></span></code></pre></td></tr></table></div></div><p>의존성은 항상 안쪽 (코어) 으로 향함. 외부 (어댑터) 가 내부 (코어) 를 호출하거나 사용할 수 있지만, 내부 (코어) 는 외부 (어댑터) 를 알지 못함 <a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">5</a><a href="https://tsh.io/blog/hexagonal-architecture/?utm_source=chatgpt.com" title="Hexagonal architecture–overview and best practices">6</a>.</p><h4 id=구조-및-아키텍처-1>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처-1>#</a></h4><ul><li><strong>Core(코어):</strong> 비즈니스 엔티티와 규칙 (필수)</li><li><strong>Port(포트):</strong> 외부와의 상호작용 인터페이스 (필수)</li><li><strong>Adapter(어댑터):</strong> 외부 시스템과의 통합 구현체 (필수)</li><li><strong>Service(서비스):</strong> 비즈니스 로직 구현 (필수, 코어 내 포함)</li></ul><p><strong>각 계층의 역할</strong></p><ul><li><strong>Core:</strong> 도메인 모델, 비즈니스 규칙</li><li><strong>Port:</strong> 외부와의 상호작용 인터페이스</li><li><strong>Adapter:</strong> 외부 시스템과의 통합 구현체</li><li><strong>Service:</strong> 비즈니스 로직 구현 (유스케이스)</li></ul><h4 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h4><ul><li><strong>의존성 역전 (Dependency Inversion):</strong> 인터페이스를 통해 내부가 외부를 모르도록 설계 <a href="https://softengbook.org/articles/hexagonal-architecture?utm_source=chatgpt.com" title="What is a Hexagonal Architecture?–Software Engineering">6</a>.</li><li><strong>포트와 어댑터 분리:</strong> 인바운드/아웃바운드 포트와 어댑터로 명확히 분리 <a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">5</a><a href="https://devcookies.medium.com/a-detailed-guide-to-hexagonal-architecture-with-examples-042523acb1db?utm_source=chatgpt.com" title="A Detailed Guide to Hexagonal Architecture with Examples">7</a>.</li><li><strong>테스트 코드 작성:</strong> 도메인과 유스케이스는 외부 의존 없이 테스트 가능 <a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">1</a><a href="https://www.geeksforgeeks.org/system-design/hexagonal-architecture-system-design/?utm_source=chatgpt.com" title="Hexagonal Architecture - System Design - GeeksforGeeks">8</a>.</li><li><strong>모듈화:</strong> 각 계층별로 모듈화하여 유지보수성 향상 <a href="https://scalastic.io/en/hexagonal-architecture/?utm_source=chatgpt.com" title="Everything You Need to Know About Hexagonal Architecture: Kernel …">10</a>.</li></ul><h4 id=장점-2>장점<a hidden class=anchor aria-hidden=true href=#장점-2>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>특성 원인</th></tr></thead><tbody><tr><td>장점</td><td>유지보수성</td><td>변경이 용이하고, 장기적으로 관리가 쉬움</td><td>도메인과 기술 분리, 포트 - 어댑터 구조</td></tr><tr><td>장점</td><td>확장성</td><td>새로운 기능 추가 및 기술 교체가 쉬움</td><td>인터페이스 활용, 의존성 역전</td></tr><tr><td>장점</td><td>테스트 용이성</td><td>도메인과 유스케이스가 독립적으로 테스트 가능</td><td>외부 의존성 분리</td></tr><tr><td>장점</td><td>프레임워크 독립성</td><td>프레임워크 교체가 쉬움</td><td>도메인과 기술 분리</td></tr></tbody></table><h4 id=단점과-문제점-그리고-해결방안-2>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안-2>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>초기 설계 복잡성</td><td>계층 구조 설계와 인터페이스 정의가 필요</td><td>경험 축적, 도메인 중심 설계 강조</td></tr><tr><td>단점</td><td>학습 곡선</td><td>개발자 교육 및 이해 필요</td><td>교육, 문서화, 예시 코드 제공</td></tr></tbody></table><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>계층 간 혼합</td><td>설계 미흡, 인터페이스 미정의</td><td>테스트 및 유지보수 어려움</td><td>코드 리뷰, 정적 분석</td><td>인터페이스 명확화, 계층 분리</td><td>리팩토링, 계층 재설계</td></tr><tr><td>문제점</td><td>포트 경계 모호</td><td>도메인 정의 미흡, 포트 설계 부족</td><td>비즈니스 로직과 인프라 혼재</td><td>코드 리뷰, 아키텍처 리뷰</td><td>도메인 모델링 강화, 포트 설계 명확화</td><td>도메인 중심 설계, 포트 리팩토링</td></tr></tbody></table><h4 id=도전-과제-1>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제-1>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>도전 과제</td><td>대규모 시스템 적용</td><td>계층 간 통신 및 관리 복잡</td><td>성능 저하, 유지보수 어려움</td><td>모니터링, 프로파일링</td><td>모듈화, 마이크로서비스 전환</td><td>마이크로서비스 아키텍처 적용, 도메인 분리</td></tr><tr><td>도전 과제</td><td>팀 온보딩 및 코드 관리</td><td>아키텍처 복잡성, 팀원 이해 부족</td><td>개발 비용 증가, 일관성 저하</td><td>코드 리뷰, 문서화</td><td>교육, 예시 코드 제공, 멘토링</td><td>문서화, 코드 리뷰, 멘토링</td></tr></tbody></table><h4 id=분류-기준에-따른-종류-및-유형-2>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형-2>#</a></h4><table><thead><tr><th>분류 기준</th><th>종류/유형</th><th>설명</th></tr></thead><tbody><tr><td>계층 구조</td><td>포트 - 어댑터 구조</td><td>외부와의 연결을 포트와 어댑터로 분리</td></tr><tr><td>설계 패턴</td><td>Hexagonal Architecture</td><td>의존성 역전, 인터페이스 활용, 도메인 중심 설계</td></tr><tr><td>적용 범위</td><td>모노리틱, 마이크로서비스</td><td>둘 다 적용 가능, 마이크로서비스에 적합</td></tr></tbody></table><h4 id=실무-사용-예시-2>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시-2>#</a></h4><table><thead><tr><th>사용 목적</th><th>함께 사용하는 기술</th><th>효과</th></tr></thead><tbody><tr><td>유지보수성 향상</td><td>Spring, Django, Node.js</td><td>도메인과 기술 분리로 변경 용이</td></tr><tr><td>테스트 용이성</td><td>JUnit, pytest</td><td>도메인과 유스케이스 독립 테스트</td></tr><tr><td>프레임워크 교체</td><td>다양한 ORM, DB</td><td>인터페이스 활용으로 교체 용이</td></tr></tbody></table><h4 id=활용-사례-2>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례-2>#</a></h4><p><strong>카카오페이 홈 서버:</strong><br>Hexagonal Architecture 를 적용해 도메인과 기술을 분리하여, 다양한 연동 API 에 유연하게 대응. 시스템 구성은 도메인 (비즈니스 규칙), 포트 (외부와의 인터페이스), 어댑터 (외부 시스템 통합) 로 계층화됨.<br><strong>Workflow:</strong><br>외부 API → 인바운드 어댑터 → 인바운드 포트 → 코어 (도메인) → 아웃바운드 포트 → 아웃바운드 어댑터 → 외부 시스템<br><strong>역할:</strong><br>도메인: 비즈니스 규칙, 포트: 외부와의 인터페이스, 어댑터: 외부 시스템 통합 <a href="https://jdriven.com/blog/2022/10/Why-you-should-NOT-use-Hexagonal-architecture?utm_source=chatgpt.com" title="Why you should NOT use Hexagonal architecture - JDriven Blog">11</a>.</p><h4 id=구현-예시-python-1>구현 예시 (Python)<a hidden class=anchor aria-hidden=true href=#구현-예시-python-1>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1> 1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2> 2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3> 3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4> 4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5> 5</a>
</span><span class=lnt id=hl-20-6><a class=lnlinks href=#hl-20-6> 6</a>
</span><span class=lnt id=hl-20-7><a class=lnlinks href=#hl-20-7> 7</a>
</span><span class=lnt id=hl-20-8><a class=lnlinks href=#hl-20-8> 8</a>
</span><span class=lnt id=hl-20-9><a class=lnlinks href=#hl-20-9> 9</a>
</span><span class=lnt id=hl-20-10><a class=lnlinks href=#hl-20-10>10</a>
</span><span class=lnt id=hl-20-11><a class=lnlinks href=#hl-20-11>11</a>
</span><span class=lnt id=hl-20-12><a class=lnlinks href=#hl-20-12>12</a>
</span><span class=lnt id=hl-20-13><a class=lnlinks href=#hl-20-13>13</a>
</span><span class=lnt id=hl-20-14><a class=lnlinks href=#hl-20-14>14</a>
</span><span class=lnt id=hl-20-15><a class=lnlinks href=#hl-20-15>15</a>
</span><span class=lnt id=hl-20-16><a class=lnlinks href=#hl-20-16>16</a>
</span><span class=lnt id=hl-20-17><a class=lnlinks href=#hl-20-17>17</a>
</span><span class=lnt id=hl-20-18><a class=lnlinks href=#hl-20-18>18</a>
</span><span class=lnt id=hl-20-19><a class=lnlinks href=#hl-20-19>19</a>
</span><span class=lnt id=hl-20-20><a class=lnlinks href=#hl-20-20>20</a>
</span><span class=lnt id=hl-20-21><a class=lnlinks href=#hl-20-21>21</a>
</span><span class=lnt id=hl-20-22><a class=lnlinks href=#hl-20-22>22</a>
</span><span class=lnt id=hl-20-23><a class=lnlinks href=#hl-20-23>23</a>
</span><span class=lnt id=hl-20-24><a class=lnlinks href=#hl-20-24>24</a>
</span><span class=lnt id=hl-20-25><a class=lnlinks href=#hl-20-25>25</a>
</span><span class=lnt id=hl-20-26><a class=lnlinks href=#hl-20-26>26</a>
</span><span class=lnt id=hl-20-27><a class=lnlinks href=#hl-20-27>27</a>
</span><span class=lnt id=hl-20-28><a class=lnlinks href=#hl-20-28>28</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># domain/user.py</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>User</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=nb>id</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>id</span> <span class=o>=</span> <span class=nb>id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># port/user_port.py</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserPort</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_user</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># adapter/user_adapter.py</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserAdapter</span><span class=p>(</span><span class=n>UserPort</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_user</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제로는 DB나 외부 API에서 데이터를 가져옴</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>User</span><span class=p>(</span><span class=n>user_id</span><span class=p>,</span> <span class=s2>&#34;Alice&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># service/user_service.py</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_port</span><span class=p>:</span> <span class=n>UserPort</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>user_port</span> <span class=o>=</span> <span class=n>user_port</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_user</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>user_port</span><span class=o>.</span><span class=n>get_user</span><span class=p>(</span><span class=n>user_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># main.py</span>
</span></span><span class=line><span class=cl><span class=n>adapter</span> <span class=o>=</span> <span class=n>UserAdapter</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>service</span> <span class=o>=</span> <span class=n>UserService</span><span class=p>(</span><span class=n>adapter</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>user</span> <span class=o>=</span> <span class=n>service</span><span class=o>.</span><span class=n>get_user</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>user</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>  <span class=c1># Alice</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점-1>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점-1>#</a></h4><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>도메인 중심 설계</td><td>도메인을 명확히 정의하고, 비즈니스 규칙을 도메인에 포함</td><td>도메인 모델링 강화</td></tr><tr><td>인터페이스 활용</td><td>계층 간 인터페이스로 결합도 낮춤</td><td>인터페이스 명확화</td></tr><tr><td>테스트 코드 작성</td><td>도메인과 유스케이스는 독립적으로 테스트</td><td>TDD, 단위 테스트 강화</td></tr><tr><td>계층 분리</td><td>계층 간 혼합 방지</td><td>코드 리뷰, 정적 분석</td></tr></tbody></table><h4 id=최적화하기-위한-고려사항-및-주의할-점-1>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점-1>#</a></h4><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>모듈화</td><td>각 계층별로 모듈화하여 관리</td><td>마이크로서비스 적용 고려</td></tr><tr><td>성능 최적화</td><td>계층 간 통신 최소화, 캐싱 활용</td><td>프로파일링, 캐싱 전략 적용</td></tr><tr><td>유지보수성</td><td>문서화, 코드 리뷰</td><td>문서화, 코드 리뷰 강화</td></tr></tbody></table><h4 id=기타-사항>기타 사항<a hidden class=anchor aria-hidden=true href=#기타-사항>#</a></h4><ul><li><strong>마이크로서비스와의 연계:</strong> Hexagonal Architecture 는 모노리틱과 마이크로서비스 모두에 적용 가능하며, 마이크로서비스 환경에서 도메인 분리와 독립적 배포에 유리 <a href="https://jdriven.com/blog/2022/10/Why-you-should-NOT-use-Hexagonal-architecture?utm_source=chatgpt.com" title="Why you should NOT use Hexagonal architecture - JDriven Blog">12</a>.</li><li><strong>도메인 주도 설계 (DDD) 와의 연계:</strong> Hexagonal Architecture 는 DDD 와 상호보완적이며, 도메인 모델링과 계층 분리에 강점이 있음 <a href="https://tsh.io/blog/hexagonal-architecture/?utm_source=chatgpt.com" title="Hexagonal architecture–overview and best practices">9</a>.</li><li><strong>실무 적용 시:</strong> 초기 설계 복잡성과 학습 곡선이 있으나, 장기적으로 유지보수성과 확장성이 뛰어남 [11][13].</li></ul><hr><h3 id=7-추가-조사-내용>7. 추가 조사 내용<a hidden class=anchor aria-hidden=true href=#7-추가-조사-내용>#</a></h3><ul><li><strong>Hexagonal Architecture 와 Layered Architecture, Clean Architecture 비교:</strong><ul><li><strong>Layered Architecture:</strong> 계층 간 직접 의존, 비즈니스 로직과 인프라 혼재 [9]<a href="https://tsh.io/blog/hexagonal-architecture/?utm_source=chatgpt.com" title="Hexagonal architecture–overview and best practices">14</a>.</li><li><strong>Clean Architecture:</strong> 의존성 규칙, 인터페이스 활용, 도메인 중심 설계. Hexagonal 과 유사하지만 용어와 계층 구조가 다름 [9][15].</li></ul></li><li><strong>실무 적용 시 마이크로서비스와의 연계:</strong><ul><li>Hexagonal Architecture 는 마이크로서비스 환경에서 서비스 간 통신과 독립적 배포에 적합 <a href="https://jdriven.com/blog/2022/10/Why-you-should-NOT-use-Hexagonal-architecture?utm_source=chatgpt.com" title="Why you should NOT use Hexagonal architecture - JDriven Blog">12</a>.</li></ul></li><li><strong>테스트 전략:</strong><ul><li>도메인과 유스케이스는 외부 의존 없이 독립적으로 테스트 가능하며, 어댑터는 통합 테스트로 검증 <a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">1</a><a href="https://www.geeksforgeeks.org/system-design/hexagonal-architecture-system-design/?utm_source=chatgpt.com" title="Hexagonal Architecture - System Design - GeeksforGeeks">8</a>.</li></ul></li></ul><hr><h3 id=8-주목할-내용>8. 주목할 내용<a hidden class=anchor aria-hidden=true href=#8-주목할-내용>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>설계 패턴</td><td>Hexagonal Architecture</td><td>도메인 중심</td><td>비즈니스 로직을 중심에 두고 외부 기술과 분리</td></tr><tr><td>설계 패턴</td><td>Hexagonal Architecture</td><td>포트 - 어댑터 구조</td><td>외부와의 연결을 인터페이스와 구현체로 분리</td></tr><tr><td>실무 적용</td><td>Hexagonal Architecture</td><td>마이크로서비스</td><td>도메인 분리, 독립적 배포에 유리</td></tr><tr><td>실무 적용</td><td>Hexagonal Architecture</td><td>테스트 전략</td><td>도메인과 유스케이스 독립 테스트</td></tr></tbody></table><hr><h3 id=9-반드시-학습해야-할-내용>9. 반드시 학습해야 할 내용<a hidden class=anchor aria-hidden=true href=#9-반드시-학습해야-할-내용>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>설계 원칙</td><td>Hexagonal Architecture</td><td>의존성 역전</td><td>내부가 외부에 의존하지 않음</td></tr><tr><td>설계 원칙</td><td>Hexagonal Architecture</td><td>인터페이스 활용</td><td>계층 간 결합도 낮춤</td></tr><tr><td>실무 적용</td><td>Hexagonal Architecture</td><td>도메인 모델링</td><td>비즈니스 규칙 명확화</td></tr><tr><td>실무 적용</td><td>Hexagonal Architecture</td><td>테스트 코드 작성</td><td>도메인과 유스케이스 독립 테스트</td></tr></tbody></table><hr><h3 id=10-용어-정리>10. 용어 정리<a hidden class=anchor aria-hidden=true href=#10-용어-정리>#</a></h3><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>설계 패턴</td><td>Hexagonal Architecture</td><td>도메인 중심, 포트 - 어댑터 구조, 의존성 역전을 갖춘 소프트웨어 설계 패턴</td></tr><tr><td>설계 원칙</td><td>의존성 역전 (Dependency Inversion)</td><td>고수준 모듈이 저수준 모듈에 의존하지 않도록 인터페이스 활용</td></tr><tr><td>설계 원칙</td><td>인터페이스 분리 (Interface Segregation)</td><td>인터페이스를 최소 단위로 분리하여 결합도 낮춤</td></tr><tr><td>실무 적용</td><td>도메인 (Domain)</td><td>비즈니스 엔티티와 규칙을 포함하는 계층</td></tr><tr><td>실무 적용</td><td>포트 (Port)</td><td>외부와의 상호작용을 위한 인터페이스</td></tr><tr><td>실무 적용</td><td>어댑터 (Adapter)</td><td>외부 시스템과의 통합을 담당하는 구현체</td></tr></tbody></table><hr><h3 id=11-참고-및-출처>11. 참고 및 출처<a hidden class=anchor aria-hidden=true href=#11-참고-및-출처>#</a></h3><ul><li><a href=https://cantcoding.tistory.com/107>헥사고날 아키텍처란 - 코딩못하는사람</a></li><li><a href=https://bettershinny.tistory.com/4>헥사고날 아키텍처(Hexagonal Architecture) 란? - bettershinny</a></li><li><a href=https://unit-15.tistory.com/183>Hexagonal Architecture이란? 기본 개발 방법 - unit-15</a></li><li><a href=https://velog.io/@mino_dev/%EC%9C%A1%EA%B0%81%ED%98%95-%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90Hexagonal-Architecture>육각형 아키텍쳐(Hexagonal Architecture) - velog</a></li><li><a href=https://starryeye.tistory.com/152>Hexagonal Architecture 정리 - Space pioneer</a></li><li><a href=https://kha0213.github.io/architecture/Hexagonal-Architecture/>헥사고날 아키텍처(Hexagonal Architecture) - 어제보다 더 나은 개발자</a></li><li><a href=https://tech.kakaopay.com/post/home-hexagonal-architecture/>Hexagonal Architecture, 진짜 하실 건가요? - 카카오페이 기술 블로그</a></li><li><a href=https://remocon33.tistory.com/706>Hexagonal Architecture 소개 - 혼새미로의 블로그</a><br>아래는 <strong>Hexagonal Architecture</strong> 주제에 대한 1 차 정리입니다.</li></ul><hr><h3 id=1-태그-1>1. 태그<a hidden class=anchor aria-hidden=true href=#1-태그-1>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Hexagonal-Architecture, Ports-and-Adapters, Clean-Software-Design, Domain-Isolation
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=2-분류-계층-적절성-분석>2. 분류 계층 적절성 분석<a hidden class=anchor aria-hidden=true href=#2-분류-계층-적절성-분석>#</a></h3><ul><li><p>현재 분류:</p><blockquote><p>Computer Science and Engineering → Software Engineering → Design and Architecture → Architecture Styles and Patterns → Architecture Patterns</p></blockquote></li><li><p><strong>분석</strong>: 적절합니다.</p><ul><li>Hexagonal Architecture 는 계층 패턴의 일종으로 외부와 내부를 추상화 계층 (Port/Adapter) 로 분리하므로, &lsquo;Architecture Patterns&rsquo; 범주에 가장 잘 부합합니다. (<a href="https://en.wikipedia.org/wiki/Hexagonal_architecture_%28software%29?utm_source=chatgpt.com" title="Hexagonal architecture (software)">en.wikipedia.org</a>)</li></ul></li></ul><hr><h3 id=3-200-자-요약>3. 200 자 요약<a hidden class=anchor aria-hidden=true href=#3-200-자-요약>#</a></h3><p>Hexagonal Architecture(Ports & Adapters) 는 비즈니스 로직을 핵심 (Core) 에 집중시키고, 외부 입출력 모듈 (UI, DB, 메시징 등) 을 포트와 어댑터로 연결해 의존성을 내부로만 흐르게 하는 아키텍처입니다. 테스트 용이성과 유연성을 확보하고, 외부 기술 변화에도 핵심 코드 비침투성을 보장합니다.</p><hr><h3 id=4-250-자-개요>4. 250 자 개요<a hidden class=anchor aria-hidden=true href=#4-250-자-개요>#</a></h3><p>Hexagonal Architecture 는 Alistair Cockburn(2005) 가 제안한 Ports & Adapters 패턴으로, 핵심 비즈니스 로직 (Core) 을 중심에 두고 외부 시스템 (UI, DB, API, 메시지 등) 을 포트 (인터페이스) 와 어댑터 (구현) 로 분리하는 구조입니다. 내부 코드는 외부 기술에 전혀 의존하지 않으며, 외부 변화에도 유연하게 대응 가능한 설계가 가능합니다. 또한, 단위 테스트가 쉽고 마이크로서비스 설계 시 모듈화가 용이합니다. 테스트 및 기술 변경 비용을 크게 줄이는 동시에, 비즈니스 중심 개발을 촉진합니다. (<a href="https://en.wikipedia.org/wiki/Hexagonal_architecture_%28software%29?utm_source=chatgpt.com" title="Hexagonal architecture (software)">en.wikipedia.org</a>)</p><hr><h3 id=5-핵심-개념-및-실무-구현-요소>5. 핵심 개념 및 실무 구현 요소<a hidden class=anchor aria-hidden=true href=#5-핵심-개념-및-실무-구현-요소>#</a></h3><h4 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h4><ul><li><strong>Core/Domain</strong>: 비즈니스 로직, 도메인 모델이 위치하며 외부 종속 없음</li><li><strong>Port</strong>: 핵심이 외부와 소통하기 위한 추상 인터페이스 (Primary/Secondary) (<a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">dev.to</a>)</li><li><strong>Adapter</strong>: Port 를 구현하는 외부 계층의 컴포넌트 (REST API, DB 구현, 메시징 등) (<a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">dev.to</a>)</li><li><strong>Dependency Inversion Principle (DIP)</strong>: 내부는 외부 모듈 정보를 몰라야 하며, 흐름은 외부 → 내부 방향으로만 (<a href="https://softengbook.org/articles/hexagonal-architecture?utm_source=chatgpt.com" title="What is a Hexagonal Architecture?–Software Engineering">reddit.com</a>)</li></ul><h4 id=51-실무-구현-요소>5.1 실무 구현 요소<a hidden class=anchor aria-hidden=true href=#51-실무-구현-요소>#</a></h4><ul><li><strong>인터페이스 정의</strong>: 사용자가 핵심에 접근하고, 인프라가 핵심에 동작할 수 있도록 Port 정의</li><li><strong>Adapter 구현</strong>: HTTP 컨트롤러, CLI, 메시지 소비자 등 Primary Adapter, DB Access, 외부 API 호출 등 Secondary Adapter 구현</li><li><strong>의존성 주입 (DI)</strong>: 런타임에 Adapter 구현체를 Core 에 주입, DIP 보장</li><li><strong>유닛 테스트</strong>: Core(Use Case, 도메인) 를 Adapter 없이 Port 만으로 테스트</li><li><strong>구성 레이어 분리</strong>: 모듈/패키지 구조 (core, ports, adapters, infrastructure 등)</li></ul><hr><p>다음 단계로:</p><ul><li>" 구조 및 아키텍처 + 구성 요소 "</li><li>" 주요 원리 & 작동 원리 " 다이어그램<br>등 원하시는 방향을 선택해주시면 이어서 작성합니다.</li></ul><p><a href=https://wata.es/hexagonal-architecture-introduction-and-structure/><figure><img alt="Hexagonal architecture: introduction and structure - WATA Factory" loading=lazy src="https://tse1.mm.bing.net/th/id/OIP.qLoZNml3irtoBkUT9q7K5wHaFw?r=0\\&pid=Api"></figure></a></p><hr><h3 id=5-구조-및-아키텍처-structure--architecture>5. 구조 및 아키텍처 (Structure & Architecture)<a hidden class=anchor aria-hidden=true href=#5-구조-및-아키텍처-structure--architecture>#</a></h3><p>Hexagonal Architecture 는 <strong>Ports & Adapters</strong>라 불리며, 내부 비즈니스 로직 (Core/Domain) 을 ** 포트 (Ports)** 라는 인터페이스로 외부와 연결하고, 실제 구현은 <strong>어댑터 (Adapters)</strong> 형태로 외부에 둡니다 (<a href="https://en.wikipedia.org/wiki/Hexagonal_architecture_%28software%29?utm_source=chatgpt.com" title="Hexagonal architecture (software)">en.wikipedia.org</a>).</p><h4 id=계층-구조-및-구성-요소>계층 구조 및 구성 요소<a hidden class=anchor aria-hidden=true href=#계층-구조-및-구성-요소>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1> 1</a>
</span><span class=lnt id=hl-22-2><a class=lnlinks href=#hl-22-2> 2</a>
</span><span class=lnt id=hl-22-3><a class=lnlinks href=#hl-22-3> 3</a>
</span><span class=lnt id=hl-22-4><a class=lnlinks href=#hl-22-4> 4</a>
</span><span class=lnt id=hl-22-5><a class=lnlinks href=#hl-22-5> 5</a>
</span><span class=lnt id=hl-22-6><a class=lnlinks href=#hl-22-6> 6</a>
</span><span class=lnt id=hl-22-7><a class=lnlinks href=#hl-22-7> 7</a>
</span><span class=lnt id=hl-22-8><a class=lnlinks href=#hl-22-8> 8</a>
</span><span class=lnt id=hl-22-9><a class=lnlinks href=#hl-22-9> 9</a>
</span><span class=lnt id=hl-22-10><a class=lnlinks href=#hl-22-10>10</a>
</span><span class=lnt id=hl-22-11><a class=lnlinks href=#hl-22-11>11</a>
</span><span class=lnt id=hl-22-12><a class=lnlinks href=#hl-22-12>12</a>
</span><span class=lnt id=hl-22-13><a class=lnlinks href=#hl-22-13>13</a>
</span><span class=lnt id=hl-22-14><a class=lnlinks href=#hl-22-14>14</a>
</span><span class=lnt id=hl-22-15><a class=lnlinks href=#hl-22-15>15</a>
</span><span class=lnt id=hl-22-16><a class=lnlinks href=#hl-22-16>16</a>
</span><span class=lnt id=hl-22-17><a class=lnlinks href=#hl-22-17>17</a>
</span><span class=lnt id=hl-22-18><a class=lnlinks href=#hl-22-18>18</a>
</span><span class=lnt id=hl-22-19><a class=lnlinks href=#hl-22-19>19</a>
</span><span class=lnt id=hl-22-20><a class=lnlinks href=#hl-22-20>20</a>
</span><span class=lnt id=hl-22-21><a class=lnlinks href=#hl-22-21>21</a>
</span><span class=lnt id=hl-22-22><a class=lnlinks href=#hl-22-22>22</a>
</span><span class=lnt id=hl-22-23><a class=lnlinks href=#hl-22-23>23</a>
</span><span class=lnt id=hl-22-24><a class=lnlinks href=#hl-22-24>24</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>             +----------------------------+
</span></span><span class=line><span class=cl>             |      Primary Adapters      |
</span></span><span class=line><span class=cl>   UI/API →  |   (REST controllers, CLI) |
</span></span><span class=line><span class=cl>             +------------+---------------+
</span></span><span class=line><span class=cl>                          |
</span></span><span class=line><span class=cl>                 +--------v--------+
</span></span><span class=line><span class=cl>                 |   Inbound Port   |
</span></span><span class=line><span class=cl>                 +--------+--------+
</span></span><span class=line><span class=cl>                          ↓
</span></span><span class=line><span class=cl>          +---------------+------------------+
</span></span><span class=line><span class=cl>          |                                      |
</span></span><span class=line><span class=cl>          |       Domain / Application Core     |
</span></span><span class=line><span class=cl>          | (Entities, Use Cases, Domain Logic) |
</span></span><span class=line><span class=cl>          |                                      |
</span></span><span class=line><span class=cl>          +---------------+------------------+
</span></span><span class=line><span class=cl>                          ↑
</span></span><span class=line><span class=cl>                 +--------+--------+
</span></span><span class=line><span class=cl>                 |   Outbound Port  |
</span></span><span class=line><span class=cl>                 +--------+--------+
</span></span><span class=line><span class=cl>                          |
</span></span><span class=line><span class=cl>             +------------v---------------+
</span></span><span class=line><span class=cl>             |     Secondary Adapters     |
</span></span><span class=line><span class=cl>             | (DB, MQ, External API...) |
</span></span><span class=line><span class=cl>             +----------------------------+
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>Domain/Core</strong>: 비즈니스 규칙을 구현한 순수 코드—외부 종속 없음</li><li><strong>Inbound Ports</strong> (Primary): UI, API, 메시지 및 테스트 호출을 위한 인터페이스 (<a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">marcolenzo.eu</a>)</li><li><strong>Outbound Ports</strong> (Secondary): DB, 메시징, API 호출 등 외부 연동을 위한 인터페이스 (<a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">marcolenzo.eu</a>)</li><li><strong>Primary Adapters</strong>: REST 엔드포인트, 콘솔, 테스트 스크립트 등 Port 구현체이며, Port 호출을 Core 에 전달 (<a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">marcolenzo.eu</a>)</li><li><strong>Secondary Adapters</strong>: DB 드라이버, HTTP 클라이언트, 메시지 큐 클라이언트 등 Core 호출에 대응하는 구현체 (<a href="https://softengbook.org/articles/hexagonal-architecture?utm_source=chatgpt.com" title="What is a Hexagonal Architecture?–Software Engineering">geeksforgeeks.org</a>)</li></ul><h4 id=필수-구성요소-vs-선택-구성요소>필수 구성요소 Vs 선택 구성요소<a hidden class=anchor aria-hidden=true href=#필수-구성요소-vs-선택-구성요소>#</a></h4><ul><li><strong>필수</strong>: Domain Core, Ports (Inbound/Outbound), 최소 하나의 Primary 및 Secondary Adapter</li><li><strong>선택</strong>: 다양한 Adapter (예: 테스트 스크립트), 커뮤니케이션 인터셉터 (로깅, 인증), 메시지 브로커 어댑터 등</li></ul><hr><h3 id=6-주요-원리--작동-원리>6. 주요 원리 & 작동 원리<a hidden class=anchor aria-hidden=true href=#6-주요-원리--작동-원리>#</a></h3><h4 id=핵심-원리>핵심 원리<a hidden class=anchor aria-hidden=true href=#핵심-원리>#</a></h4><ul><li><strong>의존성 역전 규칙 (DIP)</strong>: 내부 (Core) 는 추상인 Port 만 알고, 구현체 (Adapter) 는 외부에서 주입 (<a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">medium.com</a>)</li><li><strong>포트와 어댑터 분리</strong>: 핵심은 외부와 계약만 정의하며, 실제 기술 구현은 어댑터에 위임</li><li><strong>단방향 의존성</strong>: 어느 구현체도 Core 로직을 직접 참조하지 않음—테스트, 유연성, 확장성 확보 (<a href="https://bitloops.com/docs/bitloops-language/learning/software-architecture/hexagonal-architecture?utm_source=chatgpt.com" title="Hexagonal Architecture: Building Modular & Testable Software …">scalastic.io</a>)</li></ul><h4 id=작동-흐름-다이어그램>작동 흐름 (다이어그램)<a hidden class=anchor aria-hidden=true href=#작동-흐름-다이어그램>#</a></h4><pre class=mermaid>flowchart LR
  A[UI/API/CLI/Test] --&gt;|calls| IP[Input Port Interface]
  IP --&gt;|executes| UA[Use Case in Core]
  UA --&gt;|calls| OP[Output Port Interface]
  OP --&gt;|delegates to| SA[Secondary Adapter]
  SA --&gt;|interacts with| Svc[DB / MQ / External API]
  UA --&gt;|returns result| IP
  IP --&gt;|responds to| A
</pre><ul><li><strong>입력 흐름</strong>: Primary Adapter → Input Port → Core → Output Port → Secondary Adapter → 외부 시스템</li><li><strong>출력 흐름</strong>: Core → Output Port → Adapter → 외부 시스템 의 결과 반영</li><li><strong>테스트 흐름</strong>: 어댑터 없이 Port 만으로 Core 유닛 테스트 가능</li></ul><hr><h3 id=7-구성-요소-기능-요약>7. 구성 요소 기능 요약<a hidden class=anchor aria-hidden=true href=#7-구성-요소-기능-요약>#</a></h3><table><thead><tr><th>구성 요소</th><th>역할</th></tr></thead><tbody><tr><td>Domain/Core</td><td>순수 비즈니스 로직, 상태 유지</td></tr><tr><td>Input Port</td><td>외부 요청 인터페이스 계약</td></tr><tr><td>Use Cases</td><td>유스케이스 단위 실행 로직</td></tr><tr><td>Output Port</td><td>외부 호출 인터페이스 계약</td></tr><tr><td>Primary Adapter</td><td>사용자 요청을 Port 호출로 변환</td></tr><tr><td>Secondary Adapter</td><td>Port 호출을 외부 기술로 실행</td></tr><tr><td>DI 구성 모듈</td><td>Port 와 Adapter 를 연결하는 설정 코드</td></tr></tbody></table><hr><p>아래는 <strong>8. 구현 기법</strong>, <strong>9. 장단점 분석</strong>, <strong>10. 문제점 상세 분석</strong>, <strong>11. 실무 사용 예시</strong>, <strong>12. 활용 사례</strong>, <strong>13. 구현 예시</strong> 섹션입니다.</p><hr><h3 id=8-구현-기법-implementation-techniques>8. 구현 기법 (Implementation Techniques)<a hidden class=anchor aria-hidden=true href=#8-구현-기법-implementation-techniques>#</a></h3><ul><li><p><strong>Port 인터페이스 정의</strong></p><ul><li>Inbound Port: <code>OrderService.createOrder(request)</code></li><li>Outbound Port: <code>PaymentGateway.process(paymentInfo)</code></li></ul></li><li><p><strong>Use Case Interactor 작성</strong></p><ul><li>예: <code>CreateOrderInteractor implements OrderService</code>, 내부에서 도메인 엔티티 생성 및 포트 호출</li></ul></li><li><p><strong>Primary Adapter 구현</strong></p><ul><li>예: REST 컨트롤러 (<code>Spring @RestController</code>, <code>FastAPI router</code>) 에서 Inbound Port 호출</li></ul></li><li><p><strong>Secondary Adapter 구현</strong></p><ul><li>JDBC, JPA, HTTP 클라이언트 사용하여 Outbound Port 구현 (예: <code>RestPaymentAdapter</code>)</li></ul></li><li><p><strong>의존성 주입 설정</strong></p><ul><li>Spring, NestJS, Dagger, Spring DI 설정 또는 FastAPI <code>Depends()</code> 사용</li></ul></li><li><p><strong>테스트 작성</strong></p><ul><li>Core 테스트: Port 만 Mock 사용 → Logic 검증</li><li>Adapter 테스트: 실제 DB/API 외부 호출 모킹 혹은 인메모리 구현</li></ul></li><li><p><strong>모듈화 구조</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1>1</a>
</span><span class=lnt id=hl-24-2><a class=lnlinks href=#hl-24-2>2</a>
</span><span class=lnt id=hl-24-3><a class=lnlinks href=#hl-24-3>3</a>
</span><span class=lnt id=hl-24-4><a class=lnlinks href=#hl-24-4>4</a>
</span><span class=lnt id=hl-24-5><a class=lnlinks href=#hl-24-5>5</a>
</span><span class=lnt id=hl-24-6><a class=lnlinks href=#hl-24-6>6</a>
</span><span class=lnt id=hl-24-7><a class=lnlinks href=#hl-24-7>7</a>
</span><span class=lnt id=hl-24-8><a class=lnlinks href=#hl-24-8>8</a>
</span><span class=lnt id=hl-24-9><a class=lnlinks href=#hl-24-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>/core
</span></span><span class=line><span class=cl>  /domain
</span></span><span class=line><span class=cl>  /usecase
</span></span><span class=line><span class=cl>  /port
</span></span><span class=line><span class=cl>/adapters
</span></span><span class=line><span class=cl>  /inbound
</span></span><span class=line><span class=cl>  /outbound
</span></span><span class=line><span class=cl>/config
</span></span><span class=line><span class=cl>  di 설정
</span></span></code></pre></td></tr></table></div></div></li></ul><hr><h3 id=9-장단점-분석>9. 장단점 분석<a hidden class=anchor aria-hidden=true href=#9-장단점-분석>#</a></h3><h4 id=-장점>✅ 장점<a hidden class=anchor aria-hidden=true href=#-장점>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>독립성</td><td>핵심 로직은 외부 기술에 무관함</td></tr><tr><td></td><td>테스트 용이성</td><td>핵심 Port 만 모킹하면 유닛 테스트 가능</td></tr><tr><td></td><td>유연성</td><td>새로운 Adapter 추가 시 Core 무변경 가능</td></tr><tr><td></td><td>모듈화</td><td>마이크로서비스 설계 및 배포 단위 조직 가능</td></tr><tr><td></td><td>유지보수성</td><td>의존성 흐름 내부 집중, 외부 변화 영향 최소화</td></tr></tbody></table><h4 id=-단점>❌ 단점<a hidden class=anchor aria-hidden=true href=#-단점>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>초기 복잡도</td><td>Port/Adapter 계층 도입으로 구조 복잡</td><td>단순 프로젝트엔 Vertical Slice 방식 or Onion 구조 병행</td></tr><tr><td></td><td>설정·DI 오버헤드</td><td>DI 설정 및 모듈 구성 필요</td><td>DI 컨테이너 자동 구성 기능 or 컴파일타임 DI 사용</td></tr><tr><td></td><td>Boilerplate 증가</td><td>Port/Adapter 양식 반복</td><td>코드 생성 스크립트, 공통 유틸 라이브러리 활용</td></tr></tbody></table><hr><h3 id=10-문제점-상세-분석>10. 문제점 상세 분석<a hidden class=anchor aria-hidden=true href=#10-문제점-상세-분석>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지</th><th>예방</th><th>해결</th></tr></thead><tbody><tr><td>문제점</td><td>Port 남발</td><td>핵심이 아닌 부분까지 추상화 대상 설정</td><td>Adapter 수 급증, 이해도 저하</td><td>코드 리뷰 시 계층 과도 확인</td><td>필요 부분만 Port 도입, 가이드 정책 설정</td><td>Port 정리 리팩토링, 코드 컨벤션 강화</td></tr><tr><td>문제점</td><td>Adapter 복잡도</td><td>외부 API 변화로 복잡한 매핑 처리</td><td>Core 호출 실패, 버그 증가</td><td>테스트 실패, 예외 로그 증가</td><td>Adapter Unit 테스트 자동화</td><td>Mapper 추상 추출, 오류 대응 유틸 추가</td></tr></tbody></table><hr><h3 id=11-실무-사용-예시>11. 실무 사용 예시<a hidden class=anchor aria-hidden=true href=#11-실무-사용-예시>#</a></h3><table><thead><tr><th>기술 조합</th><th>목적</th><th>효과</th></tr></thead><tbody><tr><td>Java Spring + Hexagonal</td><td>레거시 Monolith → 모듈화 리팩토링</td><td>도메인 분리, Adapter 변경 용이</td></tr><tr><td>NestJS + TypeORM + RabbitMQ</td><td>이벤트 기반 주문 처리</td><td>Handler/test 분리, 비동기 기능 개선</td></tr><tr><td>Python FastAPI + SQLAlchemy</td><td>API 서버에서 비즈니스 모듈 분리</td><td>Port 테스트 가능, DB 교체 쉬움</td></tr></tbody></table><hr><h3 id=12-활용-사례-이벤트-기반-주문-시스템>12. 활용 사례: 이벤트 기반 주문 시스템<a hidden class=anchor aria-hidden=true href=#12-활용-사례-이벤트-기반-주문-시스템>#</a></h3><h4 id=-시스템-구성>🏗️ 시스템 구성<a hidden class=anchor aria-hidden=true href=#-시스템-구성>#</a></h4><pre class=mermaid>graph LR
  REST[REST API] --&gt; IP[OrderService Port]
  IP --&gt; UC[CreateOrderInteractor]
  UC --&gt; OP1[PaymentGateway Port]
  OP1 --&gt; Adp1[StripeAdapter]
  UC --&gt; OP2[OrderRepo Port]
  OP2 --&gt; Adp2[PostgresAdapter]
  UC --&gt; OP3[EventPort]
  OP3 --&gt; Adp3[RabbitMQAdapter]
</pre><ul><li><strong>Use Case</strong>: 주문 생성, 결제 처리, DB 저장, 이벤트 발행</li><li><strong>Adapter</strong>: HTTP 컨트롤러, Stripe API, PostgreSQL, RabbitMQ</li></ul><h4 id=-워크플로우>📋 워크플로우<a hidden class=anchor aria-hidden=true href=#-워크플로우>#</a></h4><ol><li><p>REST 요청 → Inbound Port 호출</p></li><li><p>Interactor:</p><ul><li>결제 처리 via StripeAdapter</li><li>주문 저장 via PostgresAdapter</li><li>이벤트 발행 via RabbitMQAdapter</li></ul></li><li><p>각 Adapter 는 해당 외부 서비스를 호출</p></li><li><p>Core 로직은 Port 만 참고하여 외부 독립적</p></li></ol><hr><h3 id=13-구현-예시-python--fastapi>13. 구현 예시 (Python + FastAPI)<a hidden class=anchor aria-hidden=true href=#13-구현-예시-python--fastapi>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1> 1</a>
</span><span class=lnt id=hl-26-2><a class=lnlinks href=#hl-26-2> 2</a>
</span><span class=lnt id=hl-26-3><a class=lnlinks href=#hl-26-3> 3</a>
</span><span class=lnt id=hl-26-4><a class=lnlinks href=#hl-26-4> 4</a>
</span><span class=lnt id=hl-26-5><a class=lnlinks href=#hl-26-5> 5</a>
</span><span class=lnt id=hl-26-6><a class=lnlinks href=#hl-26-6> 6</a>
</span><span class=lnt id=hl-26-7><a class=lnlinks href=#hl-26-7> 7</a>
</span><span class=lnt id=hl-26-8><a class=lnlinks href=#hl-26-8> 8</a>
</span><span class=lnt id=hl-26-9><a class=lnlinks href=#hl-26-9> 9</a>
</span><span class=lnt id=hl-26-10><a class=lnlinks href=#hl-26-10>10</a>
</span><span class=lnt id=hl-26-11><a class=lnlinks href=#hl-26-11>11</a>
</span><span class=lnt id=hl-26-12><a class=lnlinks href=#hl-26-12>12</a>
</span><span class=lnt id=hl-26-13><a class=lnlinks href=#hl-26-13>13</a>
</span><span class=lnt id=hl-26-14><a class=lnlinks href=#hl-26-14>14</a>
</span><span class=lnt id=hl-26-15><a class=lnlinks href=#hl-26-15>15</a>
</span><span class=lnt id=hl-26-16><a class=lnlinks href=#hl-26-16>16</a>
</span><span class=lnt id=hl-26-17><a class=lnlinks href=#hl-26-17>17</a>
</span><span class=lnt id=hl-26-18><a class=lnlinks href=#hl-26-18>18</a>
</span><span class=lnt id=hl-26-19><a class=lnlinks href=#hl-26-19>19</a>
</span><span class=lnt id=hl-26-20><a class=lnlinks href=#hl-26-20>20</a>
</span><span class=lnt id=hl-26-21><a class=lnlinks href=#hl-26-21>21</a>
</span><span class=lnt id=hl-26-22><a class=lnlinks href=#hl-26-22>22</a>
</span><span class=lnt id=hl-26-23><a class=lnlinks href=#hl-26-23>23</a>
</span><span class=lnt id=hl-26-24><a class=lnlinks href=#hl-26-24>24</a>
</span><span class=lnt id=hl-26-25><a class=lnlinks href=#hl-26-25>25</a>
</span><span class=lnt id=hl-26-26><a class=lnlinks href=#hl-26-26>26</a>
</span><span class=lnt id=hl-26-27><a class=lnlinks href=#hl-26-27>27</a>
</span><span class=lnt id=hl-26-28><a class=lnlinks href=#hl-26-28>28</a>
</span><span class=lnt id=hl-26-29><a class=lnlinks href=#hl-26-29>29</a>
</span><span class=lnt id=hl-26-30><a class=lnlinks href=#hl-26-30>30</a>
</span><span class=lnt id=hl-26-31><a class=lnlinks href=#hl-26-31>31</a>
</span><span class=lnt id=hl-26-32><a class=lnlinks href=#hl-26-32>32</a>
</span><span class=lnt id=hl-26-33><a class=lnlinks href=#hl-26-33>33</a>
</span><span class=lnt id=hl-26-34><a class=lnlinks href=#hl-26-34>34</a>
</span><span class=lnt id=hl-26-35><a class=lnlinks href=#hl-26-35>35</a>
</span><span class=lnt id=hl-26-36><a class=lnlinks href=#hl-26-36>36</a>
</span><span class=lnt id=hl-26-37><a class=lnlinks href=#hl-26-37>37</a>
</span><span class=lnt id=hl-26-38><a class=lnlinks href=#hl-26-38>38</a>
</span><span class=lnt id=hl-26-39><a class=lnlinks href=#hl-26-39>39</a>
</span><span class=lnt id=hl-26-40><a class=lnlinks href=#hl-26-40>40</a>
</span><span class=lnt id=hl-26-41><a class=lnlinks href=#hl-26-41>41</a>
</span><span class=lnt id=hl-26-42><a class=lnlinks href=#hl-26-42>42</a>
</span><span class=lnt id=hl-26-43><a class=lnlinks href=#hl-26-43>43</a>
</span><span class=lnt id=hl-26-44><a class=lnlinks href=#hl-26-44>44</a>
</span><span class=lnt id=hl-26-45><a class=lnlinks href=#hl-26-45>45</a>
</span><span class=lnt id=hl-26-46><a class=lnlinks href=#hl-26-46>46</a>
</span><span class=lnt id=hl-26-47><a class=lnlinks href=#hl-26-47>47</a>
</span><span class=lnt id=hl-26-48><a class=lnlinks href=#hl-26-48>48</a>
</span><span class=lnt id=hl-26-49><a class=lnlinks href=#hl-26-49>49</a>
</span><span class=lnt id=hl-26-50><a class=lnlinks href=#hl-26-50>50</a>
</span><span class=lnt id=hl-26-51><a class=lnlinks href=#hl-26-51>51</a>
</span><span class=lnt id=hl-26-52><a class=lnlinks href=#hl-26-52>52</a>
</span><span class=lnt id=hl-26-53><a class=lnlinks href=#hl-26-53>53</a>
</span><span class=lnt id=hl-26-54><a class=lnlinks href=#hl-26-54>54</a>
</span><span class=lnt id=hl-26-55><a class=lnlinks href=#hl-26-55>55</a>
</span><span class=lnt id=hl-26-56><a class=lnlinks href=#hl-26-56>56</a>
</span><span class=lnt id=hl-26-57><a class=lnlinks href=#hl-26-57>57</a>
</span><span class=lnt id=hl-26-58><a class=lnlinks href=#hl-26-58>58</a>
</span><span class=lnt id=hl-26-59><a class=lnlinks href=#hl-26-59>59</a>
</span><span class=lnt id=hl-26-60><a class=lnlinks href=#hl-26-60>60</a>
</span><span class=lnt id=hl-26-61><a class=lnlinks href=#hl-26-61>61</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># core/port.py</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pydantic</span> <span class=kn>import</span> <span class=n>BaseModel</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PaymentPort</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>charge</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>:</span> <span class=nb>float</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span> <span class=o>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderPort</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>):</span> <span class=o>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># core/usecase.py</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CreateOrderUseCase</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pay</span><span class=p>:</span> <span class=n>PaymentPort</span><span class=p>,</span> <span class=n>repo</span><span class=p>:</span> <span class=n>OrderPort</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>pay</span> <span class=o>=</span> <span class=n>pay</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>repo</span> <span class=o>=</span> <span class=n>repo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>tx</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>pay</span><span class=o>.</span><span class=n>charge</span><span class=p>(</span><span class=n>order_data</span><span class=o>.</span><span class=n>amount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>order</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;id&#34;</span><span class=p>:</span> <span class=n>order_data</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;PAID&#34;</span><span class=p>,</span> <span class=s2>&#34;tx&#34;</span><span class=p>:</span> <span class=n>tx</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>repo</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>order</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># adapters/payment_stripe.py</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>StripePaymentAdapter</span><span class=p>(</span><span class=n>PaymentPort</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>charge</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제 Stripe 라이브러리 호출</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s2>&#34;stripe_tx_123&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># adapters/order_repo.py</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>InMemoryOrderRepo</span><span class=p>(</span><span class=n>OrderPort</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>db</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>db</span><span class=p>[</span><span class=n>order</span><span class=p>[</span><span class=s2>&#34;id&#34;</span><span class=p>]]</span> <span class=o>=</span> <span class=n>order</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># app.py FastAPI 설정</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>fastapi</span> <span class=kn>import</span> <span class=n>FastAPI</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>core.usecase</span> <span class=kn>import</span> <span class=n>CreateOrderUseCase</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>core.port</span> <span class=kn>import</span> <span class=n>PaymentPort</span><span class=p>,</span> <span class=n>OrderPort</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>adapters.payment_stripe</span> <span class=kn>import</span> <span class=n>StripePaymentAdapter</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>adapters.order_repo</span> <span class=kn>import</span> <span class=n>InMemoryOrderRepo</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pydantic</span> <span class=kn>import</span> <span class=n>BaseModel</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>uuid</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>FastAPI</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>pay_adapter</span> <span class=o>=</span> <span class=n>StripePaymentAdapter</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>order_repo</span> <span class=o>=</span> <span class=n>InMemoryOrderRepo</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>usecase</span> <span class=o>=</span> <span class=n>CreateOrderUseCase</span><span class=p>(</span><span class=n>pay_adapter</span><span class=p>,</span> <span class=n>order_repo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderRequest</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>amount</span><span class=p>:</span> <span class=nb>float</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.post</span><span class=p>(</span><span class=s2>&#34;/orders&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>create_order</span><span class=p>(</span><span class=n>req</span><span class=p>:</span> <span class=n>OrderRequest</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>order_data</span> <span class=o>=</span> <span class=n>req</span>
</span></span><span class=line><span class=cl>    <span class=n>order_data</span><span class=o>.</span><span class=n>id</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=n>order</span> <span class=o>=</span> <span class=n>usecase</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=n>order_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>order</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>Port 정의 → UseCase 구현</li><li>Adapter 를 주입하여 외부 연동 구성</li><li>Core 테스트 용이, Adapter 만 단위 테스트 가능</li></ul><hr><p>다음은 요청하신 <strong>도전 과제</strong>, <strong>실무 적용 고려사항 및 주의할 점</strong>, <strong>최적화 고려사항 및 주의할 점</strong>, <strong>용어 정리</strong>, <strong>참고 및 출처</strong> 항목입니다.</p><hr><h3 id=-14-도전-과제-challenges>🎯 14. 도전 과제 (Challenges)<a hidden class=anchor aria-hidden=true href=#-14-도전-과제-challenges>#</a></h3><ol><li><p><strong>빈약한 도메인 모델 (Anemic Domain Model)</strong></p><ul><li><strong>원인</strong>: 도메인 로직이 Core 가 아닌 Adapter 에 흩어짐</li><li><strong>영향</strong>: 객체지향 설계 원칙 위반, 유지보수성 저하 (<a href="https://en.wikipedia.org/wiki/Hexagonal_architecture_%28software%29?utm_source=chatgpt.com" title="Hexagonal architecture (software)">medium.com</a>, <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html?utm_source=chatgpt.com" title="Hexagonal architecture pattern - AWS Prescriptive Guidance">geeksforgeeks.org</a>)</li><li><strong>탐지/진단</strong>: 도메인 객체가 단순 데이터 보관자일 경우</li><li><strong>예방</strong>: <code>Tell‑don’t‑ask</code> 패턴, 도메인 내 로직 집중</li><li><strong>해결</strong>: 도메인 모델로 비즈니스 로직 이동 후 테스트 자동화</li></ul></li><li><p><strong>ORM 및 데이터 피그 (Primitive Obsession)</strong></p><ul><li><strong>원인</strong>: 도메인 모델과 DB 간 불일치, ORM 직접 노출</li><li><strong>영향</strong>: 테스트 어려움, 데이터 중복 변환 발생 (<a href="https://en.wikipedia.org/wiki/Hexagonal_architecture_%28software%29?utm_source=chatgpt.com" title="Hexagonal architecture (software)">medium.com</a>, <a href="https://softengbook.org/articles/hexagonal-architecture?utm_source=chatgpt.com" title="What is a Hexagonal Architecture?–Software Engineering">medium.com</a>)</li><li><strong>탐지</strong>: DB 전용 속성 증가</li><li><strong>예방</strong>: Value Object 사용, domain‑first 디자인</li><li><strong>해결</strong>: Adapter 에서 DTO 매핑, 도메인 순수성 유지</li></ul></li><li><p><strong>Adapter 간 상호 호출 (오용)</strong></p><ul><li><strong>원인</strong>: Adapter 들 간 직접 종속 생김</li><li><strong>영향</strong>: 계층 분리 무너짐, 복잡도 상승 (<a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">reddit.com</a>, <a href="https://bitloops.com/docs/bitloops-language/learning/software-architecture/hexagonal-architecture?utm_source=chatgpt.com" title="Hexagonal Architecture: Building Modular & Testable Software …">tpierrain.blogspot.com</a>, <a href="https://tsh.io/blog/hexagonal-architecture/?utm_source=chatgpt.com" title="Hexagonal architecture–overview and best practices">softwareengineering.stackexchange.com</a>, <a href="https://devcookies.medium.com/a-detailed-guide-to-hexagonal-architecture-with-examples-042523acb1db?utm_source=chatgpt.com" title="A Detailed Guide to Hexagonal Architecture with Examples">netflixtechblog.com</a>)</li><li><strong>탐지</strong>: 코드 리뷰 및 의존성 분석</li><li><strong>예방</strong>: " 항상 중심 (Core) 을 통해 통신 " 원칙 고수</li><li><strong>해결</strong>: refactoring, 코드 리뷰 기반 개선</li></ul></li><li><p><strong>프로젝트 스캐터 (분산화 복잡도)</strong></p><ul><li><strong>원인</strong>: 과도한 패키지 및 계층 분리</li><li><strong>영향</strong>: 초기 진입 장벽, 코드 탐색 어려움</li><li><strong>탐지</strong>: 디렉터리 및 모듈 수 증가</li><li><strong>예방</strong>: 패키징 정책 수립, 문서화, 코드 템플릿 활용</li><li><strong>해결</strong>: 리팩토링, 템플릿 기반 초기세팅</li></ul></li></ol><hr><h3 id=-15-실무-적용-고려사항-및-주의할-점>📋 15. 실무 적용 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#-15-실무-적용-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>프로젝트 규모</td><td>단순한 CRUD 에는 과도한 구조</td><td>Vertical Slice 또는 Onion 구조 사용</td></tr><tr><td>개발 역량</td><td>패턴 숙지 부족 시 오남용 위험</td><td>코드 컨벤션, 설계 리뷰, 교육 병행</td></tr><tr><td>포트 정립</td><td>과도한 Port 정의</td><td>핵심 흐름만 Port 로 정의, 모듈화</td></tr><tr><td>DI 도구 선택</td><td>무거운 DI 도구 사용 시 개념 복잡</td><td>컴파일타임 DI(AOT) 또는 경량 프레임워크</td></tr><tr><td>테스트 범위</td><td>유닛 테스트만으로는 부족</td><td>End-to-end, Contract Testing 병행</td></tr><tr><td>문서화</td><td>구조 복잡으로 팀 혼돈 발생</td><td>다이어그램 + 코드 매핑 문서화 필수</td></tr></tbody></table><hr><h3 id=-16-최적화-고려사항-및-주의할-점>⚙️ 16. 최적화 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#-16-최적화-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>성능 오버헤드</td><td>DI 호출, 포트/어댑터 레이어 소모</td><td>AOT DI, 캐싱, 매핑 최소화</td></tr><tr><td>빌드 병목</td><td>모듈 분리 많으면 CI 빌드 지연</td><td>병렬/증분 빌드 지원, 모노레포 구조 고려</td></tr><tr><td>코드량 증가</td><td>Port/Adapter 코드 반복</td><td>코드 생성 도구, 템플릿 활용</td></tr><tr><td>테스트 유지관리</td><td>Adapter 불일치로 유지 단점 발생</td><td>Contract Tests + Mock 자동화</td></tr><tr><td>패키징 복잡도</td><td>모듈 수 증가로 탐색 어려움</td><td>기능 기반 패키징, 의존 관계 문서화</td></tr></tbody></table><hr><h3 id=-용어-정리-1>📌 용어 정리<a hidden class=anchor aria-hidden=true href=#-용어-정리-1>#</a></h3><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>패턴</td><td>Anemic Domain Model</td><td>도메인 객체가 로직 없이 데이터만 보관</td></tr><tr><td>패턴</td><td>Tell‑don&rsquo;t‑ask</td><td>도메인 메시징 중심 설계, 로직 캡슐화 강화</td></tr><tr><td>개념</td><td>Value Object</td><td>불변 객제로 도메인 속성 표현</td></tr><tr><td>설계원칙</td><td>Contract Testing</td><td>사용자의 기대 인터페이스를 테스트로 보증</td></tr><tr><td>도구</td><td>AOT DI</td><td>컴파일 시점 의존성 주입 구조 생성</td></tr></tbody></table><hr><h3 id=-참고-및-출처-1>📚 참고 및 출처<a hidden class=anchor aria-hidden=true href=#-참고-및-출처-1>#</a></h3><ul><li>Albert Llousas, <em>Hexagonal Architecture: Common pitfalls</em> (<a href="https://tsh.io/blog/hexagonal-architecture/?utm_source=chatgpt.com" title="Hexagonal architecture–overview and best practices">softwareengineering.stackexchange.com</a>, <a href="https://www.geeksforgeeks.org/system-design/hexagonal-architecture-system-design/?utm_source=chatgpt.com" title="Hexagonal Architecture - System Design - GeeksforGeeks">en.wikipedia.org</a>, <a href="https://dev.to/dyarleniber/hexagonal-architecture-and-clean-architecture-with-examples-48oi?utm_source=chatgpt.com" title="Hexagonal Architecture and Clean Architecture (with examples)">reddit.com</a>, <a href="https://devcookies.medium.com/a-detailed-guide-to-hexagonal-architecture-with-examples-042523acb1db?utm_source=chatgpt.com" title="A Detailed Guide to Hexagonal Architecture with Examples">netflixtechblog.com</a>, <a href="https://romanglushach.medium.com/hexagonal-architecture-the-secret-to-scalable-and-maintainable-code-for-modern-software-d345fdb47347?utm_source=chatgpt.com" title="Hexagonal Architecture: The Secret to Scalable and Maintainable …">medium.com</a>, <a href="https://en.wikipedia.org/wiki/Hexagonal_architecture_%28software%29?utm_source=chatgpt.com" title="Hexagonal architecture (software)">medium.com</a>)</li><li>StackOverflow 답변 <em>Drawbacks of Hexagonal Architecture</em> (<a href="https://scalastic.io/en/hexagonal-architecture/?utm_source=chatgpt.com" title="Everything You Need to Know About Hexagonal Architecture: Kernel …">stackoverflow.com</a>)</li><li>Morteza Tavakoli, <em>Practical Review of Hexagonal Architecture</em> (<a href="https://softengbook.org/articles/hexagonal-architecture?utm_source=chatgpt.com" title="What is a Hexagonal Architecture?–Software Engineering">medium.com</a>)</li><li>Pedro Torres, <em>Benefits and Drawbacks</em> (<a href="https://romanglushach.medium.com/hexagonal-architecture-the-secret-to-scalable-and-maintainable-code-for-modern-software-d345fdb47347?utm_source=chatgpt.com" title="Hexagonal Architecture: The Secret to Scalable and Maintainable …">medium.com</a>)</li><li>JDriven Blog, <em>Why you should NOT use Hexagonal architecture</em> (<a href="https://jdriven.com/blog/2022/10/Why-you-should-NOT-use-Hexagonal-architecture?utm_source=chatgpt.com" title="Why you should NOT use Hexagonal architecture - JDriven Blog">jdriven.com</a>)</li><li>Netflix Tech Blog, <em>Ready for changes with Hexagonal Architecture</em> (<a href="https://devcookies.medium.com/a-detailed-guide-to-hexagonal-architecture-with-examples-042523acb1db?utm_source=chatgpt.com" title="A Detailed Guide to Hexagonal Architecture with Examples">netflixtechblog.com</a>)</li><li>Wikipedia, <em>Hexagonal architecture (software)</em> (<a href="https://www.geeksforgeeks.org/system-design/hexagonal-architecture-system-design/?utm_source=chatgpt.com" title="Hexagonal Architecture - System Design - GeeksforGeeks">en.wikipedia.org</a>)</li></ul><hr><p>해당 내용까지 Hexagonal Architecture 의 이론과 실무 가이드라인을 모두 정리했습니다. 추가 코드 최적화, 프레임워크별 적용 전략 등을 원하시면 언제든 요청해 주세요!</p><p>안녕하세요! 헥사고날 아키텍처 (Hexagonal Architecture) 에 대한 포괄적인 조사를 시작하겠습니다. 먼저 관련 정보를 웹에서 검색하여 최신 자료를 수집한 후 체계적으로 정리해드리겠습니다.</p><h3 id=헥사고날-아키텍처-hexagonal-architecture-포괄적-조사>헥사고날 아키텍처 (Hexagonal Architecture) 포괄적 조사<a hidden class=anchor aria-hidden=true href=#헥사고날-아키텍처-hexagonal-architecture-포괄적-조사>#</a></h3><h4 id=1-태그-및-분류>1. 태그 및 분류<a hidden class=anchor aria-hidden=true href=#1-태그-및-분류>#</a></h4><p><strong>태그</strong>: <code>Hexagonal-Architecture</code>, <code>Ports-and-Adapters</code>, <code>Software-Design-Pattern</code>, <code>Domain-Driven-Design</code></p><p><strong>주제 분류 적절성 검토</strong>:<br>제시된 분류 &ldquo;Computer Science and Engineering&rdquo; > &ldquo;Software Engineering&rdquo; > &ldquo;Design and Architecture&rdquo; > &ldquo;Architecture Styles and Patterns&rdquo; > &ldquo;Architecture Patterns&rdquo; 는 매우 적절합니다. 헥사고날 아키텍처는 소프트웨어 설계 패턴 중 아키텍처 패턴에 해당하며, 시스템의 전체적인 구조를 정의하는 설계 원칙이므로 이 분류가 정확합니다.</p><p><strong>요약 문장</strong>: 헥사고날 아키텍처는 비즈니스 로직을 외부 의존성으로부터 격리하여 포트 (Ports) 와 어댑터 (Adapters) 를 통해 통신하게 함으로써 테스트 용이성, 유연성, 유지보수성을 향상시키는 소프트웨어 설계 패턴입니다.</p><p><strong>개요</strong>: 2005 년 Alistair Cockburn 이 창안한 헥사고날 아키텍처는 포트와 어댑터 패턴이라고도 불리며, 애플리케이션의 핵심 비즈니스 로직을 중앙에 배치하고 외부 시스템과의 상호작용을 표준화된 인터페이스를 통해 처리합니다. 이를 통해 기술적 의존성 없이 독립적으로 테스트 가능하고 유연한 시스템을 구축할 수 있습니다.</p><hr><h4 id=2-첫-번째-부분-기본-개념-및-배경>2. 첫 번째 부분: 기본 개념 및 배경<a hidden class=anchor aria-hidden=true href=#2-첫-번째-부분-기본-개념-및-배경>#</a></h4><h5 id=핵심-개념-1>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념-1>#</a></h5><p>헥사고날 아키텍처의 핵심 개념들과 실무 구현 요소:</p><p><strong>이론적 핵심 개념</strong>:</p><ul><li><strong>포트 (Ports)</strong>: 애플리케이션과 외부 세계 간의 통신을 위한 인터페이스 또는 계약</li><li><strong>어댑터 (Adapters)</strong>: 포트의 구체적인 구현체로 특정 기술과 도메인을 연결</li><li><strong>도메인 (Domain)</strong>: 비즈니스 로직이 포함된 애플리케이션의 핵심 부분</li><li><strong>의존성 역전 (Dependency Inversion)</strong>: 고수준 모듈이 저수준 모듈에 의존하지 않도록 하는 원칙</li></ul><p><strong>실무 구현 요소</strong>:</p><ul><li><strong>Primary Ports (Driver Ports)</strong>: 애플리케이션을 구동하는 외부 액터용 인터페이스 (REST API, CLI 등)</li><li><strong>Secondary Ports (Driven Ports)</strong>: 애플리케이션이 외부 서비스를 호출하기 위한 인터페이스 (데이터베이스, 외부 API 등)</li><li><strong>Primary Adapters (Driver Adapters)</strong>: 웹 컨트롤러, CLI 인터페이스 등</li><li><strong>Secondary Adapters (Driven Adapters)</strong>: 데이터베이스 리포지토리, 외부 API 클라이언트 등</li><li><strong>컨피규레이터 (Configurator)</strong>: 의존성 주입을 통해 포트와 어댑터를 연결하는 구성 요소</li></ul><h5 id=배경-1>배경<a hidden class=anchor aria-hidden=true href=#배경-1>#</a></h5><p>헥사고날 아키텍처는 2005 년 Alistair Cockburn 에 의해 창안되었습니다. 전통적인 계층형 아키텍처 (Layered Architecture) 의 한계를 극복하기 위해 개발되었으며, 특히 다음과 같은 문제점들을 해결하고자 했습니다:</p><ul><li>계층 간 원하지 않는 의존성</li><li>사용자 인터페이스 코드와 비즈니스 로직의 오염</li><li>데이터베이스 중심의 설계로 인한 비즈니스 로직 경시</li><li>테스트의 어려움과 기술적 종속성</li></ul><h5 id=목적-및-필요성-3>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성-3>#</a></h5><p><strong>주요 목적</strong>:</p><ol><li>비즈니스 로직을 외부 기술적 관심사로부터 격리</li><li>애플리케이션이 사용자, 프로그램, 자동화된 테스트, 배치 스크립트에 의해 동등하게 구동될 수 있도록 함</li><li>런타임 디바이스와 데이터베이스로부터 독립적으로 개발 및 테스트 가능하도록 함</li></ol><p><strong>필요성</strong>:</p><ul><li><strong>기술적 유연성</strong>: 기술 스택 변경 시 비즈니스 로직에 영향을 주지 않음</li><li><strong>테스트 용이성</strong>: 외부 의존성 없이 단위 테스트 가능</li><li><strong>병렬 개발</strong>: 팀별로 독립적인 개발 가능</li><li><strong>유지보수성</strong>: 명확한 책임 분리로 코드 이해도 향상</li></ul><h5 id=주요-기능-및-역할-2>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할-2>#</a></h5><p>헥사고날 아키텍처의 주요 기능:</p><ol><li><strong>비즈니스 로직 보호</strong>: 도메인 계층을 외부 변화로부터 보호</li><li><strong>인터페이스 표준화</strong>: 포트를 통한 일관된 통신 방식 제공</li><li><strong>기술적 독립성</strong>: 특정 프레임워크나 라이브러리에 종속되지 않음</li><li><strong>확장성</strong>: 새로운 어댑터 추가로 기능 확장 용이</li><li><strong>테스트 격리</strong>: 목 (Mock) 객체를 통한 독립적 테스트</li></ol><h5 id=특징-3>특징<a hidden class=anchor aria-hidden=true href=#특징-3>#</a></h5><p><strong>핵심 특징</strong>:</p><ul><li><strong>대칭성과 비대칭성의 공존</strong>: 모든 어댑터가 헥사곤에 의존하지만, 의존성 방향은 다름</li><li><strong>기술 무관성</strong>: 도메인 계층은 특정 기술에 의존하지 않음</li><li><strong>포트의 다중성</strong>: 하나의 포트에 여러 어댑터 연결 가능</li><li><strong>계층 없는 구조</strong>: 전통적인 상하 계층 구조 대신 중심 - 외곽 구조</li></ul><hr><h4 id=3-두-번째-부분-원칙과-구조>3. 두 번째 부분: 원칙과 구조<a hidden class=anchor aria-hidden=true href=#3-두-번째-부분-원칙과-구조>#</a></h4><h5 id=핵심-원칙-3>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙-3>#</a></h5><ol><li><strong>의존성 역전 원칙 (Dependency Inversion Principle)</strong>: 고수준 모듈이 저수준 모듈에 의존하지 않음</li><li><strong>단일 책임 원칙 (Single Responsibility Principle)</strong>: 각 구성 요소는 하나의 명확한 책임을 가짐</li><li><strong>인터페이스 분리 원칙 (Interface Segregation Principle)</strong>: 클라이언트가 사용하지 않는 인터페이스에 의존하지 않음</li><li><strong>개방 - 폐쇄 원칙 (Open-Closed Principle)</strong>: 확장에는 열려있고 수정에는 닫혀있음</li></ol><h5 id=주요-원리>주요 원리<a hidden class=anchor aria-hidden=true href=#주요-원리>#</a></h5><p><strong>작동 원리 다이어그램</strong>:</p><pre class=mermaid>graph TD
    subgraph &#34;External World&#34;
        UI[User Interface]
        CLI[Command Line]
        Test[Test Scripts]
        DB[(Database)]
        API[External API]
        Queue[Message Queue]
    end
    
    subgraph &#34;Hexagonal Architecture&#34;
        subgraph &#34;Adapters Layer&#34;
            PA1[Primary Adapter&lt;br/&gt;Web Controller]
            PA2[Primary Adapter&lt;br/&gt;CLI Handler]
            SA1[Secondary Adapter&lt;br/&gt;DB Repository]
            SA2[Secondary Adapter&lt;br/&gt;API Client]
        end
        
        subgraph &#34;Ports Layer&#34;
            PP1[Primary Port&lt;br/&gt;UseCase Interface]
            PP2[Primary Port&lt;br/&gt;Command Interface]
            SP1[Secondary Port&lt;br/&gt;Repository Interface]
            SP2[Secondary Port&lt;br/&gt;External Service Interface]
        end
        
        subgraph &#34;Core Domain&#34;
            BL[Business Logic&lt;br/&gt;Domain Services&lt;br/&gt;Entities&lt;br/&gt;Value Objects]
        end
    end
    
    UI --&gt; PA1
    CLI --&gt; PA2
    Test --&gt; PA1
    
    PA1 --&gt; PP1
    PA2 --&gt; PP2
    PP1 --&gt; BL
    PP2 --&gt; BL
    
    BL --&gt; SP1
    BL --&gt; SP2
    SP1 --&gt; SA1
    SP2 --&gt; SA2
    
    SA1 --&gt; DB
    SA2 --&gt; API
    SA1 --&gt; Queue
</pre><h5 id=구조-및-아키텍처-2>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처-2>#</a></h5><p><strong>구조 다이어그램</strong>:</p><pre class=mermaid>graph LR
    subgraph &#34;Outside World&#34;
        subgraph &#34;Left Side (Drivers)&#34;
            W[Web UI]
            M[Mobile App]
            T[Tests]
            C[CLI]
        end
        
        subgraph &#34;Right Side (Driven)&#34;
            D[(Database)]
            E[External API]
            F[File System]
            Q[Message Queue]
        end
    end
    
    subgraph &#34;Hexagon&#34;
        subgraph &#34;Primary Adapters&#34;
            WA[Web Adapter]
            MA[Mobile Adapter]
            TA[Test Adapter]
            CA[CLI Adapter]
        end
        
        subgraph &#34;Ports&#34;
            PP[Primary Ports&lt;br/&gt;Inbound]
            SP[Secondary Ports&lt;br/&gt;Outbound]
        end
        
        subgraph &#34;Application Core&#34;
            AC[Application Services&lt;br/&gt;Use Cases&lt;br/&gt;Domain Logic&lt;br/&gt;Business Rules]
        end
        
        subgraph &#34;Secondary Adapters&#34;
            DA[Database Adapter]
            EA[API Adapter]
            FA[File Adapter]
            QA[Queue Adapter]
        end
    end
    
    W --&gt; WA
    M --&gt; MA
    T --&gt; TA
    C --&gt; CA
    
    WA --&gt; PP
    MA --&gt; PP
    TA --&gt; PP
    CA --&gt; PP
    
    PP --&gt; AC
    AC --&gt; SP
    
    SP --&gt; DA
    SP --&gt; EA
    SP --&gt; FA
    SP --&gt; QA
    
    DA --&gt; D
    EA --&gt; E
    FA --&gt; F
    QA --&gt; Q
</pre><p><strong>필수 구성요소</strong>:</p><ol><li><p><strong>애플리케이션 코어 (Application Core)</strong></p><ul><li>기능: 비즈니스 로직과 도메인 규칙 포함</li><li>역할: 애플리케이션의 핵심 기능 수행</li><li>특징: 외부 기술에 의존하지 않는 순수한 비즈니스 로직</li></ul></li><li><p><strong>포트 (Ports)</strong></p><ul><li><p><strong>Primary Ports (Inbound Ports)</strong></p><ul><li>기능: 외부에서 애플리케이션으로의 진입점 정의</li><li>역할: 사용 사례 인터페이스 제공</li><li>특징: 애플리케이션이 제공하는 서비스 명세</li></ul></li><li><p><strong>Secondary Ports (Outbound Ports)</strong></p><ul><li>기능: 애플리케이션에서 외부 시스템으로의 진출점 정의</li><li>역할: 외부 서비스 의존성 추상화</li><li>특징: 애플리케이션이 필요로 하는 외부 서비스 계약</li></ul></li></ul></li><li><p><strong>어댑터 (Adapters)</strong></p><ul><li><p><strong>Primary Adapters (Driver Adapters)</strong></p><ul><li>기능: 외부 시스템의 요청을 애플리케이션 포트로 변환</li><li>역할: 사용자 인터페이스, API 엔드포인트 등 제공</li><li>특징: 포트에 의존하며 외부 기술과 결합</li></ul></li><li><p><strong>Secondary Adapters (Driven Adapters)</strong></p><ul><li>기능: 애플리케이션의 요청을 외부 시스템 호출로 변환</li><li>역할: 데이터베이스 접근, 외부 API 호출 등 수행</li><li>특징: 포트를 구현하며 구체적인 기술 사용</li></ul></li></ul></li></ol><p><strong>선택 구성요소</strong>:</p><ol><li><strong>컨피규레이터 (Configurator)</strong><ul><li>기능: 의존성 주입을 통한 포트와 어댑터 연결</li><li>역할: 애플리케이션 시작 시 구성 요소들을 조립</li><li>특징: 보통 프레임워크나 DI 컨테이너가 담당</li></ul></li></ol><h5 id=구현-기법-1>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법-1>#</a></h5><p><strong>1. 의존성 주입 (Dependency Injection)</strong></p><ul><li><strong>정의</strong>: 객체의 의존성을 외부에서 주입하는 기법</li><li><strong>구성</strong>: 인터페이스 정의, 구현체 작성, 주입 설정</li><li><strong>목적</strong>: 느슨한 결합과 테스트 용이성 확보</li><li><strong>실제 예시</strong>: Spring Framework 의 @Autowired, 생성자 주입</li></ul><p><strong>2. 인터페이스 분리 (Interface Segregation)</strong></p><ul><li><strong>정의</strong>: 클라이언트별로 특화된 인터페이스 제공</li><li><strong>구성</strong>: 기능별 인터페이스 분리, 역할별 포트 정의</li><li><strong>목적</strong>: 불필요한 의존성 제거 및 결합도 감소</li><li><strong>실제 예시</strong>: UserRepository, OrderService 등 도메인별 인터페이스</li></ul><p><strong>3. 어댑터 패턴 (Adapter Pattern)</strong></p><ul><li><strong>정의</strong>: 호환되지 않는 인터페이스를 연결하는 패턴</li><li><strong>구성</strong>: 타겟 인터페이스, 어댑티, 어댑터 클래스</li><li><strong>목적</strong>: 기존 시스템과의 호환성 확보</li><li><strong>실제 예시</strong>: 레거시 시스템 연동, 서드파티 라이브러리 통합</li></ul><hr><h4 id=4-세-번째-부분-장단점-및-활용>4. 세 번째 부분: 장단점 및 활용<a hidden class=anchor aria-hidden=true href=#4-세-번째-부분-장단점-및-활용>#</a></h4><h5 id=장점-3>장점<a hidden class=anchor aria-hidden=true href=#장점-3>#</a></h5><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>테스트 용이성</td><td>포트 인터페이스를 통한 목 객체 사용으로 독립적인 단위 테스트 가능</td></tr><tr><td>장점</td><td>기술적 유연성</td><td>어댑터 교체만으로 다른 기술 스택 사용 가능</td></tr><tr><td>장점</td><td>비즈니스 로직 보호</td><td>도메인 계층의 격리로 비즈니스 규칙 안정성 확보</td></tr><tr><td>장점</td><td>병렬 개발 지원</td><td>포트 정의 후 팀별 독립적 개발 가능</td></tr><tr><td>장점</td><td>유지보수성 향상</td><td>명확한 책임 분리로 코드 이해도 및 수정 용이성 증대</td></tr><tr><td>장점</td><td>확장성</td><td>새로운 어댑터 추가로 기능 확장 시 기존 코드 영향 최소화</td></tr></tbody></table><h5 id=단점과-문제점-그리고-해결방안-3>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안-3>#</a></h5><p><strong>단점</strong></p><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>초기 복잡성 증가</td><td>포트와 어댑터 계층 추가로 인한 구조 복잡성</td><td>단계적 도입, 명확한 문서화, 팀 교육</td></tr><tr><td>단점</td><td>학습 곡선</td><td>새로운 패턴 적용을 위한 팀의 학습 시간 필요</td><td>실습 위주 교육, 멘토링, 점진적 적용</td></tr><tr><td>단점</td><td>과도한 추상화</td><td>단순한 애플리케이션에 대한 불필요한 복잡성</td><td>프로젝트 규모 및 복잡성 평가 후 적용 여부 결정</td></tr><tr><td>단점</td><td>성능 오버헤드</td><td>간접 호출 계층으로 인한 약간의 성능 저하</td><td>성능 크리티컬 부분 식별 및 최적화</td></tr></tbody></table><p><strong>문제점</strong></p><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>매핑 복잡성</td><td>도메인 모델과 외부 모델 간 변환</td><td>개발 시간 증가, 버그 발생 위험</td><td>코드 리뷰, 자동화 테스트</td><td>명확한 매핑 규칙 정의</td><td>매핑 라이브러리 사용, 자동 생성 도구</td></tr><tr><td>문제점</td><td>디버깅 어려움</td><td>간접 호출로 인한 호출 스택 추적 복잡성</td><td>문제 해결 시간 증가</td><td>로깅 강화, 트레이싱 도구</td><td>적절한 로깅 전략 수립</td><td>분산 트레이싱, 상세 로깅</td></tr><tr><td>문제점</td><td>포트 설계 오류</td><td>부적절한 인터페이스 설계</td><td>잦은 인터페이스 변경, 결합도 증가</td><td>인터페이스 안정성 분석</td><td>도메인 이해 선행, 프로토타이핑</td><td>리팩토링, 인터페이스 재설계</td></tr></tbody></table><h5 id=도전-과제-2>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제-2>#</a></h5><p><strong>기술적 도전 과제</strong>:</p><ol><li><p><strong>마이크로서비스 환경에서의 적용</strong></p><ul><li>원인: 분산 시스템의 복잡성과 네트워크 통신</li><li>영향: 트랜잭션 관리, 데이터 일관성 문제</li><li>해결 방법: 이벤트 소싱, CQRS 패턴, 분산 트레이싱</li></ul></li><li><p><strong>레거시 시스템 통합</strong></p><ul><li>원인: 기존 시스템의 구조적 제약</li><li>영향: 어댑터 복잡성 증가, 성능 저하</li><li>해결 방법: 단계적 마이그레이션, Anti-Corruption Layer 패턴</li></ul></li><li><p><strong>실시간 성능 요구사항</strong></p><ul><li>원인: 간접 호출로 인한 지연시간</li><li>영향: 응답 시간 증가, 처리량 감소</li><li>해결 방법: 성능 프로파일링, 캐싱 전략, 비동기 처리</li></ul></li></ol><h5 id=분류-기준에-따른-종류-및-유형-3>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형-3>#</a></h5><table><thead><tr><th>분류 기준</th><th>종류/유형</th><th>설명</th></tr></thead><tbody><tr><td>포트 방향성</td><td>Primary Ports (Inbound)</td><td>외부에서 애플리케이션으로의 진입점</td></tr><tr><td>포트 방향성</td><td>Secondary Ports (Outbound)</td><td>애플리케이션에서 외부로의 진출점</td></tr><tr><td>어댑터 유형</td><td>Driver Adapters</td><td>애플리케이션을 구동하는 외부 시스템용</td></tr><tr><td>어댑터 유형</td><td>Driven Adapters</td><td>애플리케이션이 구동하는 외부 시스템용</td></tr><tr><td>기술별 분류</td><td>Web Adapters</td><td>HTTP, REST API, GraphQL 등</td></tr><tr><td>기술별 분류</td><td>Database Adapters</td><td>RDBMS, NoSQL, 파일 시스템 등</td></tr><tr><td>기술별 분류</td><td>Messaging Adapters</td><td>메시지 큐, 이벤트 스트림 등</td></tr></tbody></table><h5 id=실무-사용-예시-3>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시-3>#</a></h5><table><thead><tr><th>구분</th><th>사용 목적</th><th>함께 사용되는 기술</th><th>효과</th></tr></thead><tbody><tr><td>E-commerce</td><td>결제 시스템 독립성</td><td>다양한 결제 게이트웨이 API</td><td>결제 업체 변경 시 비즈니스 로직 무변경</td></tr><tr><td>금융 서비스</td><td>규제 대응</td><td>레거시 시스템, 신규 API</td><td>규제 변경 시 빠른 대응, 시스템 안정성</td></tr><tr><td>콘텐츠 관리</td><td>다중 채널 지원</td><td>웹, 모바일, API</td><td>채널별 독립적 개발, 일관된 비즈니스 로직</td></tr><tr><td>IoT 플랫폼</td><td>디바이스 다양성</td><td>다양한 통신 프로토콜</td><td>새로운 디바이스 추가 시 유연성</td></tr></tbody></table><h5 id=활용-사례-3>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례-3>#</a></h5><p><strong>사례: E-commerce 주문 관리 시스템</strong></p><p><strong>시스템 구성</strong>:</p><ul><li>Primary Adapters: REST API Controller, 관리자 웹 인터페이스</li><li>Secondary Adapters: MySQL Database, Redis Cache, 결제 API, 배송 API</li><li>Core Domain: 주문 처리 로직, 재고 관리, 가격 계산</li></ul><p><strong>시스템 구성 다이어그램</strong>:</p><pre class=mermaid>graph TB
    subgraph &#34;External Systems&#34;
        Customer[고객 웹사이트]
        Admin[관리자 대시보드]
        PaymentGW[결제 게이트웨이]
        ShippingAPI[배송 API]
        InventoryDB[(재고 DB)]
    end
    
    subgraph &#34;Primary Adapters&#34;
        WebAPI[Web API Controller]
        AdminWeb[Admin Web Controller]
    end
    
    subgraph &#34;Application Core&#34;
        OrderService[주문 서비스]
        InventoryService[재고 서비스]
        PricingService[가격 서비스]
    end
    
    subgraph &#34;Secondary Adapters&#34;
        PaymentAdapter[결제 어댑터]
        ShippingAdapter[배송 어댑터]
        DBAdapter[데이터베이스 어댑터]
    end
    
    Customer --&gt; WebAPI
    Admin --&gt; AdminWeb
    
    WebAPI --&gt; OrderService
    AdminWeb --&gt; OrderService
    OrderService --&gt; InventoryService
    OrderService --&gt; PricingService
    
    OrderService --&gt; PaymentAdapter
    OrderService --&gt; ShippingAdapter
    OrderService --&gt; DBAdapter
    
    PaymentAdapter --&gt; PaymentGW
    ShippingAdapter --&gt; ShippingAPI
    DBAdapter --&gt; InventoryDB
</pre><p><strong>Workflow</strong>:</p><ol><li>고객이 웹사이트에서 주문 요청</li><li>Web API Controller 가 요청을 받아 주문 서비스 호출</li><li>주문 서비스가 재고 확인, 가격 계산 수행</li><li>주문 서비스가 결제 어댑터를 통해 결제 처리</li><li>결제 완료 후 배송 어댑터를 통해 배송 요청</li><li>데이터베이스 어댑터를 통해 주문 정보 저장</li><li>고객에게 주문 완료 응답 반환</li></ol><p><strong>기존 시스템과의 차이점</strong>:</p><ul><li><strong>전통적 계층형</strong>: 컨트롤러 → 서비스 → 리포지토리 순차적 의존</li><li><strong>헥사고날</strong>: 도메인 중심으로 포트를 통한 양방향 통신</li><li><strong>유연성</strong>: 결제 업체 변경 시 어댑터만 교체하면 됨</li><li><strong>테스트</strong>: 모든 외부 의존성을 목 객체로 대체 가능</li></ul><h5 id=구현-예시>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시>#</a></h5><p><strong>Python 을 사용한 주문 관리 시스템 구현</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-30-1><a class=lnlinks href=#hl-30-1>  1</a>
</span><span class=lnt id=hl-30-2><a class=lnlinks href=#hl-30-2>  2</a>
</span><span class=lnt id=hl-30-3><a class=lnlinks href=#hl-30-3>  3</a>
</span><span class=lnt id=hl-30-4><a class=lnlinks href=#hl-30-4>  4</a>
</span><span class=lnt id=hl-30-5><a class=lnlinks href=#hl-30-5>  5</a>
</span><span class=lnt id=hl-30-6><a class=lnlinks href=#hl-30-6>  6</a>
</span><span class=lnt id=hl-30-7><a class=lnlinks href=#hl-30-7>  7</a>
</span><span class=lnt id=hl-30-8><a class=lnlinks href=#hl-30-8>  8</a>
</span><span class=lnt id=hl-30-9><a class=lnlinks href=#hl-30-9>  9</a>
</span><span class=lnt id=hl-30-10><a class=lnlinks href=#hl-30-10> 10</a>
</span><span class=lnt id=hl-30-11><a class=lnlinks href=#hl-30-11> 11</a>
</span><span class=lnt id=hl-30-12><a class=lnlinks href=#hl-30-12> 12</a>
</span><span class=lnt id=hl-30-13><a class=lnlinks href=#hl-30-13> 13</a>
</span><span class=lnt id=hl-30-14><a class=lnlinks href=#hl-30-14> 14</a>
</span><span class=lnt id=hl-30-15><a class=lnlinks href=#hl-30-15> 15</a>
</span><span class=lnt id=hl-30-16><a class=lnlinks href=#hl-30-16> 16</a>
</span><span class=lnt id=hl-30-17><a class=lnlinks href=#hl-30-17> 17</a>
</span><span class=lnt id=hl-30-18><a class=lnlinks href=#hl-30-18> 18</a>
</span><span class=lnt id=hl-30-19><a class=lnlinks href=#hl-30-19> 19</a>
</span><span class=lnt id=hl-30-20><a class=lnlinks href=#hl-30-20> 20</a>
</span><span class=lnt id=hl-30-21><a class=lnlinks href=#hl-30-21> 21</a>
</span><span class=lnt id=hl-30-22><a class=lnlinks href=#hl-30-22> 22</a>
</span><span class=lnt id=hl-30-23><a class=lnlinks href=#hl-30-23> 23</a>
</span><span class=lnt id=hl-30-24><a class=lnlinks href=#hl-30-24> 24</a>
</span><span class=lnt id=hl-30-25><a class=lnlinks href=#hl-30-25> 25</a>
</span><span class=lnt id=hl-30-26><a class=lnlinks href=#hl-30-26> 26</a>
</span><span class=lnt id=hl-30-27><a class=lnlinks href=#hl-30-27> 27</a>
</span><span class=lnt id=hl-30-28><a class=lnlinks href=#hl-30-28> 28</a>
</span><span class=lnt id=hl-30-29><a class=lnlinks href=#hl-30-29> 29</a>
</span><span class=lnt id=hl-30-30><a class=lnlinks href=#hl-30-30> 30</a>
</span><span class=lnt id=hl-30-31><a class=lnlinks href=#hl-30-31> 31</a>
</span><span class=lnt id=hl-30-32><a class=lnlinks href=#hl-30-32> 32</a>
</span><span class=lnt id=hl-30-33><a class=lnlinks href=#hl-30-33> 33</a>
</span><span class=lnt id=hl-30-34><a class=lnlinks href=#hl-30-34> 34</a>
</span><span class=lnt id=hl-30-35><a class=lnlinks href=#hl-30-35> 35</a>
</span><span class=lnt id=hl-30-36><a class=lnlinks href=#hl-30-36> 36</a>
</span><span class=lnt id=hl-30-37><a class=lnlinks href=#hl-30-37> 37</a>
</span><span class=lnt id=hl-30-38><a class=lnlinks href=#hl-30-38> 38</a>
</span><span class=lnt id=hl-30-39><a class=lnlinks href=#hl-30-39> 39</a>
</span><span class=lnt id=hl-30-40><a class=lnlinks href=#hl-30-40> 40</a>
</span><span class=lnt id=hl-30-41><a class=lnlinks href=#hl-30-41> 41</a>
</span><span class=lnt id=hl-30-42><a class=lnlinks href=#hl-30-42> 42</a>
</span><span class=lnt id=hl-30-43><a class=lnlinks href=#hl-30-43> 43</a>
</span><span class=lnt id=hl-30-44><a class=lnlinks href=#hl-30-44> 44</a>
</span><span class=lnt id=hl-30-45><a class=lnlinks href=#hl-30-45> 45</a>
</span><span class=lnt id=hl-30-46><a class=lnlinks href=#hl-30-46> 46</a>
</span><span class=lnt id=hl-30-47><a class=lnlinks href=#hl-30-47> 47</a>
</span><span class=lnt id=hl-30-48><a class=lnlinks href=#hl-30-48> 48</a>
</span><span class=lnt id=hl-30-49><a class=lnlinks href=#hl-30-49> 49</a>
</span><span class=lnt id=hl-30-50><a class=lnlinks href=#hl-30-50> 50</a>
</span><span class=lnt id=hl-30-51><a class=lnlinks href=#hl-30-51> 51</a>
</span><span class=lnt id=hl-30-52><a class=lnlinks href=#hl-30-52> 52</a>
</span><span class=lnt id=hl-30-53><a class=lnlinks href=#hl-30-53> 53</a>
</span><span class=lnt id=hl-30-54><a class=lnlinks href=#hl-30-54> 54</a>
</span><span class=lnt id=hl-30-55><a class=lnlinks href=#hl-30-55> 55</a>
</span><span class=lnt id=hl-30-56><a class=lnlinks href=#hl-30-56> 56</a>
</span><span class=lnt id=hl-30-57><a class=lnlinks href=#hl-30-57> 57</a>
</span><span class=lnt id=hl-30-58><a class=lnlinks href=#hl-30-58> 58</a>
</span><span class=lnt id=hl-30-59><a class=lnlinks href=#hl-30-59> 59</a>
</span><span class=lnt id=hl-30-60><a class=lnlinks href=#hl-30-60> 60</a>
</span><span class=lnt id=hl-30-61><a class=lnlinks href=#hl-30-61> 61</a>
</span><span class=lnt id=hl-30-62><a class=lnlinks href=#hl-30-62> 62</a>
</span><span class=lnt id=hl-30-63><a class=lnlinks href=#hl-30-63> 63</a>
</span><span class=lnt id=hl-30-64><a class=lnlinks href=#hl-30-64> 64</a>
</span><span class=lnt id=hl-30-65><a class=lnlinks href=#hl-30-65> 65</a>
</span><span class=lnt id=hl-30-66><a class=lnlinks href=#hl-30-66> 66</a>
</span><span class=lnt id=hl-30-67><a class=lnlinks href=#hl-30-67> 67</a>
</span><span class=lnt id=hl-30-68><a class=lnlinks href=#hl-30-68> 68</a>
</span><span class=lnt id=hl-30-69><a class=lnlinks href=#hl-30-69> 69</a>
</span><span class=lnt id=hl-30-70><a class=lnlinks href=#hl-30-70> 70</a>
</span><span class=lnt id=hl-30-71><a class=lnlinks href=#hl-30-71> 71</a>
</span><span class=lnt id=hl-30-72><a class=lnlinks href=#hl-30-72> 72</a>
</span><span class=lnt id=hl-30-73><a class=lnlinks href=#hl-30-73> 73</a>
</span><span class=lnt id=hl-30-74><a class=lnlinks href=#hl-30-74> 74</a>
</span><span class=lnt id=hl-30-75><a class=lnlinks href=#hl-30-75> 75</a>
</span><span class=lnt id=hl-30-76><a class=lnlinks href=#hl-30-76> 76</a>
</span><span class=lnt id=hl-30-77><a class=lnlinks href=#hl-30-77> 77</a>
</span><span class=lnt id=hl-30-78><a class=lnlinks href=#hl-30-78> 78</a>
</span><span class=lnt id=hl-30-79><a class=lnlinks href=#hl-30-79> 79</a>
</span><span class=lnt id=hl-30-80><a class=lnlinks href=#hl-30-80> 80</a>
</span><span class=lnt id=hl-30-81><a class=lnlinks href=#hl-30-81> 81</a>
</span><span class=lnt id=hl-30-82><a class=lnlinks href=#hl-30-82> 82</a>
</span><span class=lnt id=hl-30-83><a class=lnlinks href=#hl-30-83> 83</a>
</span><span class=lnt id=hl-30-84><a class=lnlinks href=#hl-30-84> 84</a>
</span><span class=lnt id=hl-30-85><a class=lnlinks href=#hl-30-85> 85</a>
</span><span class=lnt id=hl-30-86><a class=lnlinks href=#hl-30-86> 86</a>
</span><span class=lnt id=hl-30-87><a class=lnlinks href=#hl-30-87> 87</a>
</span><span class=lnt id=hl-30-88><a class=lnlinks href=#hl-30-88> 88</a>
</span><span class=lnt id=hl-30-89><a class=lnlinks href=#hl-30-89> 89</a>
</span><span class=lnt id=hl-30-90><a class=lnlinks href=#hl-30-90> 90</a>
</span><span class=lnt id=hl-30-91><a class=lnlinks href=#hl-30-91> 91</a>
</span><span class=lnt id=hl-30-92><a class=lnlinks href=#hl-30-92> 92</a>
</span><span class=lnt id=hl-30-93><a class=lnlinks href=#hl-30-93> 93</a>
</span><span class=lnt id=hl-30-94><a class=lnlinks href=#hl-30-94> 94</a>
</span><span class=lnt id=hl-30-95><a class=lnlinks href=#hl-30-95> 95</a>
</span><span class=lnt id=hl-30-96><a class=lnlinks href=#hl-30-96> 96</a>
</span><span class=lnt id=hl-30-97><a class=lnlinks href=#hl-30-97> 97</a>
</span><span class=lnt id=hl-30-98><a class=lnlinks href=#hl-30-98> 98</a>
</span><span class=lnt id=hl-30-99><a class=lnlinks href=#hl-30-99> 99</a>
</span><span class=lnt id=hl-30-100><a class=lnlinks href=#hl-30-100>100</a>
</span><span class=lnt id=hl-30-101><a class=lnlinks href=#hl-30-101>101</a>
</span><span class=lnt id=hl-30-102><a class=lnlinks href=#hl-30-102>102</a>
</span><span class=lnt id=hl-30-103><a class=lnlinks href=#hl-30-103>103</a>
</span><span class=lnt id=hl-30-104><a class=lnlinks href=#hl-30-104>104</a>
</span><span class=lnt id=hl-30-105><a class=lnlinks href=#hl-30-105>105</a>
</span><span class=lnt id=hl-30-106><a class=lnlinks href=#hl-30-106>106</a>
</span><span class=lnt id=hl-30-107><a class=lnlinks href=#hl-30-107>107</a>
</span><span class=lnt id=hl-30-108><a class=lnlinks href=#hl-30-108>108</a>
</span><span class=lnt id=hl-30-109><a class=lnlinks href=#hl-30-109>109</a>
</span><span class=lnt id=hl-30-110><a class=lnlinks href=#hl-30-110>110</a>
</span><span class=lnt id=hl-30-111><a class=lnlinks href=#hl-30-111>111</a>
</span><span class=lnt id=hl-30-112><a class=lnlinks href=#hl-30-112>112</a>
</span><span class=lnt id=hl-30-113><a class=lnlinks href=#hl-30-113>113</a>
</span><span class=lnt id=hl-30-114><a class=lnlinks href=#hl-30-114>114</a>
</span><span class=lnt id=hl-30-115><a class=lnlinks href=#hl-30-115>115</a>
</span><span class=lnt id=hl-30-116><a class=lnlinks href=#hl-30-116>116</a>
</span><span class=lnt id=hl-30-117><a class=lnlinks href=#hl-30-117>117</a>
</span><span class=lnt id=hl-30-118><a class=lnlinks href=#hl-30-118>118</a>
</span><span class=lnt id=hl-30-119><a class=lnlinks href=#hl-30-119>119</a>
</span><span class=lnt id=hl-30-120><a class=lnlinks href=#hl-30-120>120</a>
</span><span class=lnt id=hl-30-121><a class=lnlinks href=#hl-30-121>121</a>
</span><span class=lnt id=hl-30-122><a class=lnlinks href=#hl-30-122>122</a>
</span><span class=lnt id=hl-30-123><a class=lnlinks href=#hl-30-123>123</a>
</span><span class=lnt id=hl-30-124><a class=lnlinks href=#hl-30-124>124</a>
</span><span class=lnt id=hl-30-125><a class=lnlinks href=#hl-30-125>125</a>
</span><span class=lnt id=hl-30-126><a class=lnlinks href=#hl-30-126>126</a>
</span><span class=lnt id=hl-30-127><a class=lnlinks href=#hl-30-127>127</a>
</span><span class=lnt id=hl-30-128><a class=lnlinks href=#hl-30-128>128</a>
</span><span class=lnt id=hl-30-129><a class=lnlinks href=#hl-30-129>129</a>
</span><span class=lnt id=hl-30-130><a class=lnlinks href=#hl-30-130>130</a>
</span><span class=lnt id=hl-30-131><a class=lnlinks href=#hl-30-131>131</a>
</span><span class=lnt id=hl-30-132><a class=lnlinks href=#hl-30-132>132</a>
</span><span class=lnt id=hl-30-133><a class=lnlinks href=#hl-30-133>133</a>
</span><span class=lnt id=hl-30-134><a class=lnlinks href=#hl-30-134>134</a>
</span><span class=lnt id=hl-30-135><a class=lnlinks href=#hl-30-135>135</a>
</span><span class=lnt id=hl-30-136><a class=lnlinks href=#hl-30-136>136</a>
</span><span class=lnt id=hl-30-137><a class=lnlinks href=#hl-30-137>137</a>
</span><span class=lnt id=hl-30-138><a class=lnlinks href=#hl-30-138>138</a>
</span><span class=lnt id=hl-30-139><a class=lnlinks href=#hl-30-139>139</a>
</span><span class=lnt id=hl-30-140><a class=lnlinks href=#hl-30-140>140</a>
</span><span class=lnt id=hl-30-141><a class=lnlinks href=#hl-30-141>141</a>
</span><span class=lnt id=hl-30-142><a class=lnlinks href=#hl-30-142>142</a>
</span><span class=lnt id=hl-30-143><a class=lnlinks href=#hl-30-143>143</a>
</span><span class=lnt id=hl-30-144><a class=lnlinks href=#hl-30-144>144</a>
</span><span class=lnt id=hl-30-145><a class=lnlinks href=#hl-30-145>145</a>
</span><span class=lnt id=hl-30-146><a class=lnlinks href=#hl-30-146>146</a>
</span><span class=lnt id=hl-30-147><a class=lnlinks href=#hl-30-147>147</a>
</span><span class=lnt id=hl-30-148><a class=lnlinks href=#hl-30-148>148</a>
</span><span class=lnt id=hl-30-149><a class=lnlinks href=#hl-30-149>149</a>
</span><span class=lnt id=hl-30-150><a class=lnlinks href=#hl-30-150>150</a>
</span><span class=lnt id=hl-30-151><a class=lnlinks href=#hl-30-151>151</a>
</span><span class=lnt id=hl-30-152><a class=lnlinks href=#hl-30-152>152</a>
</span><span class=lnt id=hl-30-153><a class=lnlinks href=#hl-30-153>153</a>
</span><span class=lnt id=hl-30-154><a class=lnlinks href=#hl-30-154>154</a>
</span><span class=lnt id=hl-30-155><a class=lnlinks href=#hl-30-155>155</a>
</span><span class=lnt id=hl-30-156><a class=lnlinks href=#hl-30-156>156</a>
</span><span class=lnt id=hl-30-157><a class=lnlinks href=#hl-30-157>157</a>
</span><span class=lnt id=hl-30-158><a class=lnlinks href=#hl-30-158>158</a>
</span><span class=lnt id=hl-30-159><a class=lnlinks href=#hl-30-159>159</a>
</span><span class=lnt id=hl-30-160><a class=lnlinks href=#hl-30-160>160</a>
</span><span class=lnt id=hl-30-161><a class=lnlinks href=#hl-30-161>161</a>
</span><span class=lnt id=hl-30-162><a class=lnlinks href=#hl-30-162>162</a>
</span><span class=lnt id=hl-30-163><a class=lnlinks href=#hl-30-163>163</a>
</span><span class=lnt id=hl-30-164><a class=lnlinks href=#hl-30-164>164</a>
</span><span class=lnt id=hl-30-165><a class=lnlinks href=#hl-30-165>165</a>
</span><span class=lnt id=hl-30-166><a class=lnlinks href=#hl-30-166>166</a>
</span><span class=lnt id=hl-30-167><a class=lnlinks href=#hl-30-167>167</a>
</span><span class=lnt id=hl-30-168><a class=lnlinks href=#hl-30-168>168</a>
</span><span class=lnt id=hl-30-169><a class=lnlinks href=#hl-30-169>169</a>
</span><span class=lnt id=hl-30-170><a class=lnlinks href=#hl-30-170>170</a>
</span><span class=lnt id=hl-30-171><a class=lnlinks href=#hl-30-171>171</a>
</span><span class=lnt id=hl-30-172><a class=lnlinks href=#hl-30-172>172</a>
</span><span class=lnt id=hl-30-173><a class=lnlinks href=#hl-30-173>173</a>
</span><span class=lnt id=hl-30-174><a class=lnlinks href=#hl-30-174>174</a>
</span><span class=lnt id=hl-30-175><a class=lnlinks href=#hl-30-175>175</a>
</span><span class=lnt id=hl-30-176><a class=lnlinks href=#hl-30-176>176</a>
</span><span class=lnt id=hl-30-177><a class=lnlinks href=#hl-30-177>177</a>
</span><span class=lnt id=hl-30-178><a class=lnlinks href=#hl-30-178>178</a>
</span><span class=lnt id=hl-30-179><a class=lnlinks href=#hl-30-179>179</a>
</span><span class=lnt id=hl-30-180><a class=lnlinks href=#hl-30-180>180</a>
</span><span class=lnt id=hl-30-181><a class=lnlinks href=#hl-30-181>181</a>
</span><span class=lnt id=hl-30-182><a class=lnlinks href=#hl-30-182>182</a>
</span><span class=lnt id=hl-30-183><a class=lnlinks href=#hl-30-183>183</a>
</span><span class=lnt id=hl-30-184><a class=lnlinks href=#hl-30-184>184</a>
</span><span class=lnt id=hl-30-185><a class=lnlinks href=#hl-30-185>185</a>
</span><span class=lnt id=hl-30-186><a class=lnlinks href=#hl-30-186>186</a>
</span><span class=lnt id=hl-30-187><a class=lnlinks href=#hl-30-187>187</a>
</span><span class=lnt id=hl-30-188><a class=lnlinks href=#hl-30-188>188</a>
</span><span class=lnt id=hl-30-189><a class=lnlinks href=#hl-30-189>189</a>
</span><span class=lnt id=hl-30-190><a class=lnlinks href=#hl-30-190>190</a>
</span><span class=lnt id=hl-30-191><a class=lnlinks href=#hl-30-191>191</a>
</span><span class=lnt id=hl-30-192><a class=lnlinks href=#hl-30-192>192</a>
</span><span class=lnt id=hl-30-193><a class=lnlinks href=#hl-30-193>193</a>
</span><span class=lnt id=hl-30-194><a class=lnlinks href=#hl-30-194>194</a>
</span><span class=lnt id=hl-30-195><a class=lnlinks href=#hl-30-195>195</a>
</span><span class=lnt id=hl-30-196><a class=lnlinks href=#hl-30-196>196</a>
</span><span class=lnt id=hl-30-197><a class=lnlinks href=#hl-30-197>197</a>
</span><span class=lnt id=hl-30-198><a class=lnlinks href=#hl-30-198>198</a>
</span><span class=lnt id=hl-30-199><a class=lnlinks href=#hl-30-199>199</a>
</span><span class=lnt id=hl-30-200><a class=lnlinks href=#hl-30-200>200</a>
</span><span class=lnt id=hl-30-201><a class=lnlinks href=#hl-30-201>201</a>
</span><span class=lnt id=hl-30-202><a class=lnlinks href=#hl-30-202>202</a>
</span><span class=lnt id=hl-30-203><a class=lnlinks href=#hl-30-203>203</a>
</span><span class=lnt id=hl-30-204><a class=lnlinks href=#hl-30-204>204</a>
</span><span class=lnt id=hl-30-205><a class=lnlinks href=#hl-30-205>205</a>
</span><span class=lnt id=hl-30-206><a class=lnlinks href=#hl-30-206>206</a>
</span><span class=lnt id=hl-30-207><a class=lnlinks href=#hl-30-207>207</a>
</span><span class=lnt id=hl-30-208><a class=lnlinks href=#hl-30-208>208</a>
</span><span class=lnt id=hl-30-209><a class=lnlinks href=#hl-30-209>209</a>
</span><span class=lnt id=hl-30-210><a class=lnlinks href=#hl-30-210>210</a>
</span><span class=lnt id=hl-30-211><a class=lnlinks href=#hl-30-211>211</a>
</span><span class=lnt id=hl-30-212><a class=lnlinks href=#hl-30-212>212</a>
</span><span class=lnt id=hl-30-213><a class=lnlinks href=#hl-30-213>213</a>
</span><span class=lnt id=hl-30-214><a class=lnlinks href=#hl-30-214>214</a>
</span><span class=lnt id=hl-30-215><a class=lnlinks href=#hl-30-215>215</a>
</span><span class=lnt id=hl-30-216><a class=lnlinks href=#hl-30-216>216</a>
</span><span class=lnt id=hl-30-217><a class=lnlinks href=#hl-30-217>217</a>
</span><span class=lnt id=hl-30-218><a class=lnlinks href=#hl-30-218>218</a>
</span><span class=lnt id=hl-30-219><a class=lnlinks href=#hl-30-219>219</a>
</span><span class=lnt id=hl-30-220><a class=lnlinks href=#hl-30-220>220</a>
</span><span class=lnt id=hl-30-221><a class=lnlinks href=#hl-30-221>221</a>
</span><span class=lnt id=hl-30-222><a class=lnlinks href=#hl-30-222>222</a>
</span><span class=lnt id=hl-30-223><a class=lnlinks href=#hl-30-223>223</a>
</span><span class=lnt id=hl-30-224><a class=lnlinks href=#hl-30-224>224</a>
</span><span class=lnt id=hl-30-225><a class=lnlinks href=#hl-30-225>225</a>
</span><span class=lnt id=hl-30-226><a class=lnlinks href=#hl-30-226>226</a>
</span><span class=lnt id=hl-30-227><a class=lnlinks href=#hl-30-227>227</a>
</span><span class=lnt id=hl-30-228><a class=lnlinks href=#hl-30-228>228</a>
</span><span class=lnt id=hl-30-229><a class=lnlinks href=#hl-30-229>229</a>
</span><span class=lnt id=hl-30-230><a class=lnlinks href=#hl-30-230>230</a>
</span><span class=lnt id=hl-30-231><a class=lnlinks href=#hl-30-231>231</a>
</span><span class=lnt id=hl-30-232><a class=lnlinks href=#hl-30-232>232</a>
</span><span class=lnt id=hl-30-233><a class=lnlinks href=#hl-30-233>233</a>
</span><span class=lnt id=hl-30-234><a class=lnlinks href=#hl-30-234>234</a>
</span><span class=lnt id=hl-30-235><a class=lnlinks href=#hl-30-235>235</a>
</span><span class=lnt id=hl-30-236><a class=lnlinks href=#hl-30-236>236</a>
</span><span class=lnt id=hl-30-237><a class=lnlinks href=#hl-30-237>237</a>
</span><span class=lnt id=hl-30-238><a class=lnlinks href=#hl-30-238>238</a>
</span><span class=lnt id=hl-30-239><a class=lnlinks href=#hl-30-239>239</a>
</span><span class=lnt id=hl-30-240><a class=lnlinks href=#hl-30-240>240</a>
</span><span class=lnt id=hl-30-241><a class=lnlinks href=#hl-30-241>241</a>
</span><span class=lnt id=hl-30-242><a class=lnlinks href=#hl-30-242>242</a>
</span><span class=lnt id=hl-30-243><a class=lnlinks href=#hl-30-243>243</a>
</span><span class=lnt id=hl-30-244><a class=lnlinks href=#hl-30-244>244</a>
</span><span class=lnt id=hl-30-245><a class=lnlinks href=#hl-30-245>245</a>
</span><span class=lnt id=hl-30-246><a class=lnlinks href=#hl-30-246>246</a>
</span><span class=lnt id=hl-30-247><a class=lnlinks href=#hl-30-247>247</a>
</span><span class=lnt id=hl-30-248><a class=lnlinks href=#hl-30-248>248</a>
</span><span class=lnt id=hl-30-249><a class=lnlinks href=#hl-30-249>249</a>
</span><span class=lnt id=hl-30-250><a class=lnlinks href=#hl-30-250>250</a>
</span><span class=lnt id=hl-30-251><a class=lnlinks href=#hl-30-251>251</a>
</span><span class=lnt id=hl-30-252><a class=lnlinks href=#hl-30-252>252</a>
</span><span class=lnt id=hl-30-253><a class=lnlinks href=#hl-30-253>253</a>
</span><span class=lnt id=hl-30-254><a class=lnlinks href=#hl-30-254>254</a>
</span><span class=lnt id=hl-30-255><a class=lnlinks href=#hl-30-255>255</a>
</span><span class=lnt id=hl-30-256><a class=lnlinks href=#hl-30-256>256</a>
</span><span class=lnt id=hl-30-257><a class=lnlinks href=#hl-30-257>257</a>
</span><span class=lnt id=hl-30-258><a class=lnlinks href=#hl-30-258>258</a>
</span><span class=lnt id=hl-30-259><a class=lnlinks href=#hl-30-259>259</a>
</span><span class=lnt id=hl-30-260><a class=lnlinks href=#hl-30-260>260</a>
</span><span class=lnt id=hl-30-261><a class=lnlinks href=#hl-30-261>261</a>
</span><span class=lnt id=hl-30-262><a class=lnlinks href=#hl-30-262>262</a>
</span><span class=lnt id=hl-30-263><a class=lnlinks href=#hl-30-263>263</a>
</span><span class=lnt id=hl-30-264><a class=lnlinks href=#hl-30-264>264</a>
</span><span class=lnt id=hl-30-265><a class=lnlinks href=#hl-30-265>265</a>
</span><span class=lnt id=hl-30-266><a class=lnlinks href=#hl-30-266>266</a>
</span><span class=lnt id=hl-30-267><a class=lnlinks href=#hl-30-267>267</a>
</span><span class=lnt id=hl-30-268><a class=lnlinks href=#hl-30-268>268</a>
</span><span class=lnt id=hl-30-269><a class=lnlinks href=#hl-30-269>269</a>
</span><span class=lnt id=hl-30-270><a class=lnlinks href=#hl-30-270>270</a>
</span><span class=lnt id=hl-30-271><a class=lnlinks href=#hl-30-271>271</a>
</span><span class=lnt id=hl-30-272><a class=lnlinks href=#hl-30-272>272</a>
</span><span class=lnt id=hl-30-273><a class=lnlinks href=#hl-30-273>273</a>
</span><span class=lnt id=hl-30-274><a class=lnlinks href=#hl-30-274>274</a>
</span><span class=lnt id=hl-30-275><a class=lnlinks href=#hl-30-275>275</a>
</span><span class=lnt id=hl-30-276><a class=lnlinks href=#hl-30-276>276</a>
</span><span class=lnt id=hl-30-277><a class=lnlinks href=#hl-30-277>277</a>
</span><span class=lnt id=hl-30-278><a class=lnlinks href=#hl-30-278>278</a>
</span><span class=lnt id=hl-30-279><a class=lnlinks href=#hl-30-279>279</a>
</span><span class=lnt id=hl-30-280><a class=lnlinks href=#hl-30-280>280</a>
</span><span class=lnt id=hl-30-281><a class=lnlinks href=#hl-30-281>281</a>
</span><span class=lnt id=hl-30-282><a class=lnlinks href=#hl-30-282>282</a>
</span><span class=lnt id=hl-30-283><a class=lnlinks href=#hl-30-283>283</a>
</span><span class=lnt id=hl-30-284><a class=lnlinks href=#hl-30-284>284</a>
</span><span class=lnt id=hl-30-285><a class=lnlinks href=#hl-30-285>285</a>
</span><span class=lnt id=hl-30-286><a class=lnlinks href=#hl-30-286>286</a>
</span><span class=lnt id=hl-30-287><a class=lnlinks href=#hl-30-287>287</a>
</span><span class=lnt id=hl-30-288><a class=lnlinks href=#hl-30-288>288</a>
</span><span class=lnt id=hl-30-289><a class=lnlinks href=#hl-30-289>289</a>
</span><span class=lnt id=hl-30-290><a class=lnlinks href=#hl-30-290>290</a>
</span><span class=lnt id=hl-30-291><a class=lnlinks href=#hl-30-291>291</a>
</span><span class=lnt id=hl-30-292><a class=lnlinks href=#hl-30-292>292</a>
</span><span class=lnt id=hl-30-293><a class=lnlinks href=#hl-30-293>293</a>
</span><span class=lnt id=hl-30-294><a class=lnlinks href=#hl-30-294>294</a>
</span><span class=lnt id=hl-30-295><a class=lnlinks href=#hl-30-295>295</a>
</span><span class=lnt id=hl-30-296><a class=lnlinks href=#hl-30-296>296</a>
</span><span class=lnt id=hl-30-297><a class=lnlinks href=#hl-30-297>297</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Domain Layer - 비즈니스 로직</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span><span class=p>,</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 엔티티&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>order_id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>customer_id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>items</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>dict</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>total_amount</span><span class=p>:</span> <span class=nb>float</span>
</span></span><span class=line><span class=cl>    <span class=n>status</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;PENDING&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>created_at</span><span class=p>:</span> <span class=n>datetime</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>__post_init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>created_at</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>created_at</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>calculate_total</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>float</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;총 금액 계산&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>sum</span><span class=p>(</span><span class=n>item</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>]</span> <span class=o>*</span> <span class=n>item</span><span class=p>[</span><span class=s1>&#39;quantity&#39;</span><span class=p>]</span> <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>confirm_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;결제 확인&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=s2>&#34;PAID&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>ship_order</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;배송 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=s2>&#34;PAID&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=s2>&#34;SHIPPED&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;결제되지 않은 주문은 배송할 수 없습니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Secondary Ports (Outbound Ports)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderRepository</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 저장소 포트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>:</span> <span class=n>Order</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_by_id</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Order</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PaymentService</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;결제 서비스 포트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>amount</span><span class=p>:</span> <span class=nb>float</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ShippingService</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;배송 서비스 포트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>request_shipping</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>:</span> <span class=n>Order</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Primary Ports (Inbound Ports)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderUseCase</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 사용 사례 포트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create_order</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>items</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>dict</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_order</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Application Service - 도메인 로직 조율</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderService</span><span class=p>(</span><span class=n>OrderUseCase</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 서비스 - 사용 사례 구현&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                 <span class=n>order_repository</span><span class=p>:</span> <span class=n>OrderRepository</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                 <span class=n>payment_service</span><span class=p>:</span> <span class=n>PaymentService</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                 <span class=n>shipping_service</span><span class=p>:</span> <span class=n>ShippingService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>order_repository</span> <span class=o>=</span> <span class=n>order_repository</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>payment_service</span> <span class=o>=</span> <span class=n>payment_service</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>shipping_service</span> <span class=o>=</span> <span class=n>shipping_service</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create_order</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>items</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>dict</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=kn>import</span> <span class=nn>uuid</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>order</span> <span class=o>=</span> <span class=n>Order</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>order_id</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>            <span class=n>customer_id</span><span class=o>=</span><span class=n>customer_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>items</span><span class=o>=</span><span class=n>items</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>total_amount</span><span class=o>=</span><span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>order</span><span class=o>.</span><span class=n>total_amount</span> <span class=o>=</span> <span class=n>order</span><span class=o>.</span><span class=n>calculate_total</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 주문 저장</span>
</span></span><span class=line><span class=cl>        <span class=n>saved_order</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>order_repository</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>saved_order</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_order</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 주문 조회</span>
</span></span><span class=line><span class=cl>        <span class=n>order</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>order_repository</span><span class=o>.</span><span class=n>find_by_id</span><span class=p>(</span><span class=n>order_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;주문을 찾을 수 없습니다: </span><span class=si>{</span><span class=n>order_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 결제 처리</span>
</span></span><span class=line><span class=cl>        <span class=n>payment_success</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>payment_service</span><span class=o>.</span><span class=n>process_payment</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>order</span><span class=o>.</span><span class=n>order_id</span><span class=p>,</span> <span class=n>order</span><span class=o>.</span><span class=n>total_amount</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>payment_success</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>order</span><span class=o>.</span><span class=n>confirm_payment</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 배송 요청</span>
</span></span><span class=line><span class=cl>            <span class=n>shipping_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>shipping_service</span><span class=o>.</span><span class=n>request_shipping</span><span class=p>(</span><span class=n>order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>order</span><span class=o>.</span><span class=n>ship_order</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 주문 상태 업데이트 저장</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>order_repository</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>order</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Secondary Adapters (Driven Adapters)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MySQLOrderRepository</span><span class=p>(</span><span class=n>OrderRepository</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;MySQL 주문 저장소 어댑터&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>connection_string</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>connection_string</span> <span class=o>=</span> <span class=n>connection_string</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제 구현에서는 데이터베이스 연결 초기화</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>:</span> <span class=n>Order</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 저장&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제 구현에서는 SQL INSERT/UPDATE 수행</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;MySQL에 주문 저장: </span><span class=si>{</span><span class=n>order</span><span class=o>.</span><span class=n>order_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>order</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_by_id</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Order</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제 구현에서는 SQL SELECT 수행</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;MySQL에서 주문 조회: </span><span class=si>{</span><span class=n>order_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># 임시 데이터 반환</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Order</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>order_id</span><span class=o>=</span><span class=n>order_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>customer_id</span><span class=o>=</span><span class=s2>&#34;customer123&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>items</span><span class=o>=</span><span class=p>[{</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;상품A&#34;</span><span class=p>,</span> <span class=s2>&#34;price&#34;</span><span class=p>:</span> <span class=mi>10000</span><span class=p>,</span> <span class=s2>&#34;quantity&#34;</span><span class=p>:</span> <span class=mi>2</span><span class=p>}],</span>
</span></span><span class=line><span class=cl>            <span class=n>total_amount</span><span class=o>=</span><span class=mi>20000</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>StripePaymentAdapter</span><span class=p>(</span><span class=n>PaymentService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Stripe 결제 어댑터&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>api_key</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>api_key</span> <span class=o>=</span> <span class=n>api_key</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>amount</span><span class=p>:</span> <span class=nb>float</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Stripe를 통한 결제 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Stripe 결제 처리: 주문 </span><span class=si>{</span><span class=n>order_id</span><span class=si>}</span><span class=s2>, 금액 </span><span class=si>{</span><span class=n>amount</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제 구현에서는 Stripe API 호출</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>True</span>  <span class=c1># 성공 가정</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CourierShippingAdapter</span><span class=p>(</span><span class=n>ShippingService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;택배 배송 어댑터&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>api_endpoint</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>api_endpoint</span> <span class=o>=</span> <span class=n>api_endpoint</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>request_shipping</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>:</span> <span class=n>Order</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;배송 요청&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;택배 배송 요청: 주문 </span><span class=si>{</span><span class=n>order</span><span class=o>.</span><span class=n>order_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제 구현에서는 택배사 API 호출</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s2>&#34;SHIP123456&#34;</span>  <span class=c1># 배송 추적 번호</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Primary Adapters (Driver Adapters)</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>jsonify</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderWebController</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;웹 API 컨트롤러 어댑터&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_service</span><span class=p>:</span> <span class=n>OrderUseCase</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>order_service</span> <span class=o>=</span> <span class=n>order_service</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_setup_routes</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_setup_routes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;라우트 설정&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nd>@self.app.route</span><span class=p>(</span><span class=s1>&#39;/orders&#39;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;POST&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        <span class=k>def</span> <span class=nf>create_order</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;&#34;&#34;주문 생성 엔드포인트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>data</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>json</span>
</span></span><span class=line><span class=cl>                <span class=n>order</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>order_service</span><span class=o>.</span><span class=n>create_order</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>customer_id</span><span class=o>=</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;customer_id&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                    <span class=n>items</span><span class=o>=</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;items&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>jsonify</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;order_id&#39;</span><span class=p>:</span> <span class=n>order</span><span class=o>.</span><span class=n>order_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;status&#39;</span><span class=p>:</span> <span class=n>order</span><span class=o>.</span><span class=n>status</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;total_amount&#39;</span><span class=p>:</span> <span class=n>order</span><span class=o>.</span><span class=n>total_amount</span>
</span></span><span class=line><span class=cl>                <span class=p>}),</span> <span class=mi>201</span>
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>jsonify</span><span class=p>({</span><span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)}),</span> <span class=mi>400</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nd>@self.app.route</span><span class=p>(</span><span class=s1>&#39;/orders/&lt;order_id&gt;/process&#39;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;POST&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        <span class=k>def</span> <span class=nf>process_order</span><span class=p>(</span><span class=n>order_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;&#34;&#34;주문 처리 엔드포인트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>order</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>order_service</span><span class=o>.</span><span class=n>process_order</span><span class=p>(</span><span class=n>order_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>jsonify</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;order_id&#39;</span><span class=p>:</span> <span class=n>order</span><span class=o>.</span><span class=n>order_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;status&#39;</span><span class=p>:</span> <span class=n>order</span><span class=o>.</span><span class=n>status</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;total_amount&#39;</span><span class=p>:</span> <span class=n>order</span><span class=o>.</span><span class=n>total_amount</span>
</span></span><span class=line><span class=cl>                <span class=p>}),</span> <span class=mi>200</span>
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>jsonify</span><span class=p>({</span><span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)}),</span> <span class=mi>400</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Configuration - 의존성 주입 설정</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ApplicationConfig</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;애플리케이션 구성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@staticmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create_order_service</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>OrderService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 서비스 생성 및 의존성 주입&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># Secondary Adapters 생성</span>
</span></span><span class=line><span class=cl>        <span class=n>order_repository</span> <span class=o>=</span> <span class=n>MySQLOrderRepository</span><span class=p>(</span><span class=s2>&#34;mysql://localhost/orders&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>payment_service</span> <span class=o>=</span> <span class=n>StripePaymentAdapter</span><span class=p>(</span><span class=s2>&#34;sk_test_123456&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>shipping_service</span> <span class=o>=</span> <span class=n>CourierShippingAdapter</span><span class=p>(</span><span class=s2>&#34;https://api.courier.com&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 주문 서비스 생성</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>OrderService</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>order_repository</span><span class=o>=</span><span class=n>order_repository</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>payment_service</span><span class=o>=</span><span class=n>payment_service</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>shipping_service</span><span class=o>=</span><span class=n>shipping_service</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@staticmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create_web_app</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>Flask</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;웹 애플리케이션 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>order_service</span> <span class=o>=</span> <span class=n>ApplicationConfig</span><span class=o>.</span><span class=n>create_order_service</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>controller</span> <span class=o>=</span> <span class=n>OrderWebController</span><span class=p>(</span><span class=n>order_service</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>controller</span><span class=o>.</span><span class=n>app</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 애플리케이션 실행</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span> <span class=o>=</span> <span class=n>ApplicationConfig</span><span class=o>.</span><span class=n>create_web_app</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>debug</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 테스트 예시</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>unittest</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>unittest.mock</span> <span class=kn>import</span> <span class=n>Mock</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TestOrderService</span><span class=p>(</span><span class=n>unittest</span><span class=o>.</span><span class=n>TestCase</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 서비스 테스트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>setUp</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;테스트 설정&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>mock_repository</span> <span class=o>=</span> <span class=n>Mock</span><span class=p>(</span><span class=n>spec</span><span class=o>=</span><span class=n>OrderRepository</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>mock_payment</span> <span class=o>=</span> <span class=n>Mock</span><span class=p>(</span><span class=n>spec</span><span class=o>=</span><span class=n>PaymentService</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>mock_shipping</span> <span class=o>=</span> <span class=n>Mock</span><span class=p>(</span><span class=n>spec</span><span class=o>=</span><span class=n>ShippingService</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>order_service</span> <span class=o>=</span> <span class=n>OrderService</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>mock_repository</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>mock_payment</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>mock_shipping</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_create_order</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 생성 테스트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># Given</span>
</span></span><span class=line><span class=cl>        <span class=n>items</span> <span class=o>=</span> <span class=p>[{</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;상품A&#34;</span><span class=p>,</span> <span class=s2>&#34;price&#34;</span><span class=p>:</span> <span class=mi>10000</span><span class=p>,</span> <span class=s2>&#34;quantity&#34;</span><span class=p>:</span> <span class=mi>2</span><span class=p>}]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>mock_repository</span><span class=o>.</span><span class=n>save</span><span class=o>.</span><span class=n>return_value</span> <span class=o>=</span> <span class=n>Mock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># When</span>
</span></span><span class=line><span class=cl>        <span class=n>order</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>order_service</span><span class=o>.</span><span class=n>create_order</span><span class=p>(</span><span class=s2>&#34;customer123&#34;</span><span class=p>,</span> <span class=n>items</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># Then</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>order</span><span class=o>.</span><span class=n>total_amount</span><span class=p>,</span> <span class=mi>20000</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>mock_repository</span><span class=o>.</span><span class=n>save</span><span class=o>.</span><span class=n>assert_called_once</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_process_order_success</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 처리 성공 테스트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># Given</span>
</span></span><span class=line><span class=cl>        <span class=n>order</span> <span class=o>=</span> <span class=n>Order</span><span class=p>(</span><span class=s2>&#34;order123&#34;</span><span class=p>,</span> <span class=s2>&#34;customer123&#34;</span><span class=p>,</span> <span class=p>[],</span> <span class=mi>20000</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>mock_repository</span><span class=o>.</span><span class=n>find_by_id</span><span class=o>.</span><span class=n>return_value</span> <span class=o>=</span> <span class=n>order</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>mock_payment</span><span class=o>.</span><span class=n>process_payment</span><span class=o>.</span><span class=n>return_value</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>mock_shipping</span><span class=o>.</span><span class=n>request_shipping</span><span class=o>.</span><span class=n>return_value</span> <span class=o>=</span> <span class=s2>&#34;SHIP123&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># When</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>order_service</span><span class=o>.</span><span class=n>process_order</span><span class=p>(</span><span class=s2>&#34;order123&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># Then</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>status</span><span class=p>,</span> <span class=s2>&#34;SHIPPED&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>mock_payment</span><span class=o>.</span><span class=n>process_payment</span><span class=o>.</span><span class=n>assert_called_once</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>mock_shipping</span><span class=o>.</span><span class=n>request_shipping</span><span class=o>.</span><span class=n>assert_called_once</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><hr><h4 id=4-네-번째-부분-최적화-및-고려사항>4. 네 번째 부분: 최적화 및 고려사항<a hidden class=anchor aria-hidden=true href=#4-네-번째-부분-최적화-및-고려사항>#</a></h4><h5 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점-2>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점-2>#</a></h5><table><thead><tr><th>구분</th><th>고려사항</th><th>주의할 점</th><th>권장사항</th></tr></thead><tbody><tr><td>프로젝트 규모</td><td>복잡한 비즈니스 로직이 있는 중대형 프로젝트</td><td>단순한 CRUD 애플리케이션에는 과도한 복잡성</td><td>프로젝트 복잡도 평가 후 적용 결정</td></tr><tr><td>팀 역량</td><td>팀의 아키텍처 패턴 이해도와 경험</td><td>학습 곡선으로 인한 초기 생산성 저하</td><td>점진적 도입과 지속적인 교육</td></tr><tr><td>포트 설계</td><td>안정적이고 명확한 인터페이스 정의</td><td>잦은 인터페이스 변경으로 인한 불안정성</td><td>도메인 모델링 선행, 프로토타이핑</td></tr><tr><td>테스트 전략</td><td>포트별 독립적인 테스트 케이스 작성</td><td>통합 테스트 복잡성 증가</td><td>테스트 피라미드 전략 수립</td></tr><tr><td>성능 최적화</td><td>간접 호출로 인한 성능 오버헤드</td><td>과도한 추상화로 인한 성능 저하</td><td>성능 크리티컬 경로 식별 및 최적화</td></tr></tbody></table><h5 id=최적화하기-위한-고려사항-및-주의할-점-2>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점-2>#</a></h5><table><thead><tr><th>구분</th><th>최적화 방법</th><th>주의사항</th><th>권장사항</th></tr></thead><tbody><tr><td>포트 설계</td><td>응집도 높은 인터페이스 설계</td><td>너무 세분화된 포트로 인한 복잡성</td><td>단일 책임 원칙 기반 포트 설계</td></tr><tr><td>어댑터 관리</td><td>어댑터별 독립적인 라이프사이클 관리</td><td>어댑터 간 의존성 발생</td><td>컨테이너 기반 의존성 관리</td></tr><tr><td>매핑 최적화</td><td>도메인 -DTO 간 효율적인 매핑</td><td>과도한 매핑 로직으로 인한 성능 저하</td><td>매핑 라이브러리 활용, 자동화</td></tr><tr><td>캐싱 전략</td><td>포트 레벨에서의 캐싱 적용</td><td>캐시 무효화 복잡성 증가</td><td>적절한 캐시 범위 설정</td></tr><tr><td>모니터링</td><td>포트별 성능 및 에러 모니터링</td><td>분산된 로깅으로 인한 추적 어려움</td><td>통합 모니터링 시스템 구축</td></tr></tbody></table><h5 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h5><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>관련 패턴</td><td>Clean Architecture</td><td>동심원 구조</td><td>헥사고날 아키텍처를 확장한 계층형 구조</td></tr><tr><td>관련 패턴</td><td>Onion Architecture</td><td>계층 분리</td><td>의존성 역전을 통한 도메인 중심 설계</td></tr><tr><td>관련 패턴</td><td>Domain-Driven Design</td><td>도메인 모델링</td><td>비즈니스 도메인 중심의 소프트웨어 설계</td></tr><tr><td>구현 기술</td><td>Dependency Injection</td><td>의존성 주입</td><td>느슨한 결합을 위한 핵심 기술</td></tr><tr><td>구현 기술</td><td>Interface Segregation</td><td>인터페이스 분리</td><td>클라이언트별 특화된 인터페이스 제공</td></tr><tr><td>테스트 전략</td><td>Test Doubles</td><td>목 객체</td><td>외부 의존성 격리를 위한 테스트 기법</td></tr><tr><td>마이크로서비스</td><td>Anti-Corruption Layer</td><td>부패 방지 계층</td><td>레거시 시스템과의 통합 패턴</td></tr><tr><td>마이크로서비스</td><td>Event-Driven Architecture</td><td>이벤트 기반 통신</td><td>비동기 메시징을 통한 서비스 간 통신</td></tr></tbody></table><h5 id=주제와-관련하여-반드시-학습해야할-내용>주제와 관련하여 반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-반드시-학습해야할-내용>#</a></h5><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>설계 원칙</td><td>SOLID 원칙</td><td>객체지향 설계</td><td>의존성 역전, 단일 책임 등 핵심 원칙</td></tr><tr><td>설계 패턴</td><td>Adapter Pattern</td><td>구조 패턴</td><td>호환되지 않는 인터페이스 연결</td></tr><tr><td>설계 패턴</td><td>Strategy Pattern</td><td>행위 패턴</td><td>알고리즘 캡슐화 및 교체 가능성</td></tr><tr><td>아키텍처</td><td>Layered Architecture</td><td>계층형 구조</td><td>전통적 아키텍처와의 차이점 이해</td></tr><tr><td>구현 기술</td><td>Dependency Injection</td><td>IoC 컨테이너</td><td>Spring, Guice 등 DI 프레임워크</td></tr><tr><td>테스트 기법</td><td>Unit Testing</td><td>단위 테스트</td><td>Mock, Stub 을 활용한 독립적 테스트</td></tr><tr><td>도메인 모델링</td><td>Domain-Driven Design</td><td>전술적 설계</td><td>Entity, Value Object, Aggregate</td></tr><tr><td>마이크로서비스</td><td>Service Decomposition</td><td>서비스 분할</td><td>비즈니스 역량 기반 서비스 경계 설정</td></tr></tbody></table><h5 id=기타-사항-1>기타 사항<a hidden class=anchor aria-hidden=true href=#기타-사항-1>#</a></h5><p><strong>최신 트렌드와 발전 방향</strong>:</p><ol><li><p><strong>클라우드 네이티브 환경</strong></p><ul><li>컨테이너화를 통한 어댑터 독립적 배포</li><li>서비스 메시와의 통합</li><li>FaaS (Function as a Service) 환경에서의 적용</li></ul></li><li><p><strong>마이크로서비스 아키텍처와의 융합</strong></p><ul><li>서비스별 헥사고날 아키텍처 적용</li><li>API 게이트웨이를 통한 포트 표준화</li><li>이벤트 소싱과의 결합</li></ul></li><li><p><strong>AI/ML 시스템과의 통합</strong></p><ul><li>머신러닝 모델을 어댑터로 활용</li><li>데이터 파이프라인과의 연동</li><li>실시간 추론 시스템 구축</li></ul></li></ol><p><strong>도구 및 프레임워크 지원</strong>:</p><ul><li><strong>Java</strong>: Spring Boot, Quarkus, Micronaut</li><li><strong>Python</strong>: FastAPI, Django, Flask</li><li><strong>JavaScript/TypeScript</strong>: NestJS, Express</li><li><strong>C#</strong>:.NET Core, ASP.NET</li></ul><p><strong>성공적인 도입을 위한 체크리스트</strong>:</p><ol><li>명확한 도메인 모델 정의</li><li>안정적인 포트 인터페이스 설계</li><li>효율적인 어댑터 구현</li><li>포괄적인 테스트 전략</li><li>지속적인 리팩토링 및 개선</li></ol><hr><h4 id=용어-정리-2>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-2>#</a></h4><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>핵심 개념</td><td>Port (포트)</td><td>애플리케이션과 외부 세계 간의 통신 인터페이스</td></tr><tr><td>핵심 개념</td><td>Adapter (어댑터)</td><td>포트의 구체적인 구현체로 특정 기술과 연결</td></tr><tr><td>핵심 개념</td><td>Hexagon (헥사곤)</td><td>비즈니스 로직이 포함된 애플리케이션 핵심 부분</td></tr><tr><td>포트 유형</td><td>Primary Port</td><td>외부에서 애플리케이션으로의 진입점 인터페이스</td></tr><tr><td>포트 유형</td><td>Secondary Port</td><td>애플리케이션에서 외부 시스템으로의 진출점 인터페이스</td></tr><tr><td>어댑터 유형</td><td>Driver Adapter</td><td>애플리케이션을 구동하는 외부 시스템용 어댑터</td></tr><tr><td>어댑터 유형</td><td>Driven Adapter</td><td>애플리케이션이 구동하는 외부 시스템용 어댑터</td></tr><tr><td>설계 원칙</td><td>Dependency Inversion</td><td>고수준 모듈이 저수준 모듈에 의존하지 않는 원칙</td></tr><tr><td>설계 원칙</td><td>Separation of Concerns</td><td>관심사의 분리를 통한 모듈화 원칙</td></tr><tr><td>구현 기법</td><td>Dependency Injection</td><td>객체의 의존성을 외부에서 주입하는 기법</td></tr><tr><td>테스트 기법</td><td>Test Double</td><td>테스트 목적으로 실제 객체를 대체하는 객체</td></tr><tr><td>테스트 기법</td><td>Mock Object</td><td>호출을 검증하기 위한 테스트 더블</td></tr></tbody></table><hr><h4 id=참고-및-출처-4>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-4>#</a></h4><ul><li><a href=https://en.wikipedia.org/wiki/Hexagonal_architecture_(software)>Hexagonal Architecture (Wikipedia)</a></li><li><a href=https://alistair.cockburn.us/hexagonal-architecture>Original Hexagonal Architecture Article by Alistair Cockburn</a></li><li><a href=https://codesoapbox.dev/ports-adapters-aka-hexagonal-architecture-explained/>Ports & Adapters Architecture Explained – Code Soapbox</a></li><li><a href=https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/hexagonal-architecture.html>AWS Prescriptive Guidance - Hexagonal Architecture Pattern</a></li><li><a href=https://8thlight.com/insights/a-color-coded-guide-to-ports-and-adapters>A Color Coded Guide to Ports and Adapters | 8th Light</a></li><li><a href=https://blog.allegro.tech/2020/05/hexagonal-architecture-by-example.html>Hexagonal Architecture by example - Allegro Tech Blog</a></li><li><a href=https://blog.szymonmiks.pl/p/hexagonal-architecture-in-python/>Hexagonal Architecture in Python Implementation Examples</a></li><li><a href=https://scalastic.io/en/hexagonal-architecture/>Everything You Need to Know About Hexagonal Architecture - Scalastic</a></li><li><a href=https://www.geeksforgeeks.org/hexagonal-architecture-system-design/>Hexagonal Architecture - System Design - GeeksforGeeks</a></li><li><a href=https://cardoai.com/hexagonal-architecture-what-is-it-and-why-should-you-use-it/>Hexagonal Architecture: What is it and why should you use it? - Cardo AI</a></li></ul><hr><p>헥사고날 아키텍처 (Hexagonal Architecture) 는 소프트웨어 설계 패턴 중 하나로, 애플리케이션의 핵심 비즈니스 로직을 외부 요소로부터 분리하여 유연하고 유지보수가 용이한 시스템을 구축하는 것을 목표로 한다.<br>이 아키텍처는 Alistair Cockburn 에 의해 제안되었으며, &rsquo; 포트와 어댑터 아키텍처 (Ports and Adapters Architecture)&rsquo; 라고도 불린다.</p><h5 id=핵심-원칙-4>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙-4>#</a></h5><ol><li>의존성 방향:<br>모든 의존성은 도메인 계층을 향해 안쪽으로 흐른다.<br>도메인 계층은 외부를 전혀 알지 못하며, 포트를 통해서만 통신한다.</li><li>관심사의 분리:<br>각 계층은 명확한 책임을 가지며, 다른 계층의 구현 세부사항을 알지 못한다.<br>이는 시스템의 유지보수성과 테스트 용이성을 향상시킨다.</li><li>인터페이스 기반 설계:<br>포트는 인터페이스로 정의되어, 구체적인 구현체 (어댑터) 를 쉽게 교체할 수 있게 한다.</li></ol><h5 id=주요-구성-요소>주요 구성 요소<a hidden class=anchor aria-hidden=true href=#주요-구성-요소>#</a></h5><p><figure><img loading=lazy src=/img/1682416486628.png><figcaption>https://www.linkedin.com/pulse/whats-hexagonal-architecture-luis-soares-m-sc-/</figcaption></figure></p><p>헥사고날 아키텍처는 크게 세 가지 주요 구성 요소로 이루어져 있다:</p><ol><li><p><strong>핵심 비즈니스 로직 (도메인)</strong>: 애플리케이션의 중심에 위치하며, 순수한 비즈니스 로직을 포함한다.</p></li><li><p><strong>포트 (Ports)</strong>: 애플리케이션의 내부와 외부를 연결하는 인터페이스 역할을 한다. 두 가지 유형이 있다:</p><ul><li>인바운드 포트: 외부에서 애플리케이션을 사용하기 위한 API</li><li>아웃바운드 포트: 애플리케이션이 외부 시스템을 사용하기 위한 API</li></ul></li><li><p><strong>어댑터 (Adapters)</strong>: 포트를 구현하여 실제로 외부 시스템과 통신하는 역할을 한다. 두 가지 유형이 있다:</p><ul><li>Primary (Driving) Adapters: 애플리케이션을 구동하는 역할 (예: UI)</li><li>Secondary (Driven) Adapters: 애플리케이션에 의해 구동되는 역할 (예: 데이터베이스)</li></ul></li></ol><h5 id=작동-방식>작동 방식<a hidden class=anchor aria-hidden=true href=#작동-방식>#</a></h5><ol><li>외부 요청이 Primary Adapter 를 통해 들어온다.</li><li>Primary Adapter 는 인바운드 포트를 통해 핵심 비즈니스 로직과 통신한다.</li><li>비즈니스 로직은 필요한 경우 아웃바운드 포트를 통해 Secondary Adapter 와 통신한다.</li><li>Secondary Adapter 는 외부 시스템 (예: 데이터베이스) 과 상호작용한다.</li></ol><h5 id=장점-4>장점<a hidden class=anchor aria-hidden=true href=#장점-4>#</a></h5><ol><li><strong>유연성</strong>: 외부 시스템이나 인프라와의 의존성이 낮아 구성요소를 쉽게 교체하거나 업데이트할 수 있다.</li><li><strong>테스트 용이성</strong>: 비즈니스 로직을 독립적으로 테스트할 수 있어 테스트가 더 안정적이고 쉬워진다.</li><li><strong>유지보수성</strong>: 책임이 명확히 분리되어 있어 코드의 이해와 수정이 용이하다.</li><li><strong>확장성</strong>: 새로운 어댑터를 추가하거나 기존 어댑터를 수정하여 시스템을 쉽게 확장할 수 있다.</li></ol><h5 id=단점-1>단점<a hidden class=anchor aria-hidden=true href=#단점-1>#</a></h5><ol><li><strong>구현 복잡성</strong>: 포트와 어댑터를 구성하고 관리하는 데 복잡성이 증가할 수 있다.</li><li><strong>초기 개발 시간 증가</strong>: 아키텍처를 설계하고 구현하는 데 초기에 더 많은 시간이 소요될 수 있다.</li></ol><h5 id=구현-예시-1>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시-1>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-31-1><a class=lnlinks href=#hl-31-1>  1</a>
</span><span class=lnt id=hl-31-2><a class=lnlinks href=#hl-31-2>  2</a>
</span><span class=lnt id=hl-31-3><a class=lnlinks href=#hl-31-3>  3</a>
</span><span class=lnt id=hl-31-4><a class=lnlinks href=#hl-31-4>  4</a>
</span><span class=lnt id=hl-31-5><a class=lnlinks href=#hl-31-5>  5</a>
</span><span class=lnt id=hl-31-6><a class=lnlinks href=#hl-31-6>  6</a>
</span><span class=lnt id=hl-31-7><a class=lnlinks href=#hl-31-7>  7</a>
</span><span class=lnt id=hl-31-8><a class=lnlinks href=#hl-31-8>  8</a>
</span><span class=lnt id=hl-31-9><a class=lnlinks href=#hl-31-9>  9</a>
</span><span class=lnt id=hl-31-10><a class=lnlinks href=#hl-31-10> 10</a>
</span><span class=lnt id=hl-31-11><a class=lnlinks href=#hl-31-11> 11</a>
</span><span class=lnt id=hl-31-12><a class=lnlinks href=#hl-31-12> 12</a>
</span><span class=lnt id=hl-31-13><a class=lnlinks href=#hl-31-13> 13</a>
</span><span class=lnt id=hl-31-14><a class=lnlinks href=#hl-31-14> 14</a>
</span><span class=lnt id=hl-31-15><a class=lnlinks href=#hl-31-15> 15</a>
</span><span class=lnt id=hl-31-16><a class=lnlinks href=#hl-31-16> 16</a>
</span><span class=lnt id=hl-31-17><a class=lnlinks href=#hl-31-17> 17</a>
</span><span class=lnt id=hl-31-18><a class=lnlinks href=#hl-31-18> 18</a>
</span><span class=lnt id=hl-31-19><a class=lnlinks href=#hl-31-19> 19</a>
</span><span class=lnt id=hl-31-20><a class=lnlinks href=#hl-31-20> 20</a>
</span><span class=lnt id=hl-31-21><a class=lnlinks href=#hl-31-21> 21</a>
</span><span class=lnt id=hl-31-22><a class=lnlinks href=#hl-31-22> 22</a>
</span><span class=lnt id=hl-31-23><a class=lnlinks href=#hl-31-23> 23</a>
</span><span class=lnt id=hl-31-24><a class=lnlinks href=#hl-31-24> 24</a>
</span><span class=lnt id=hl-31-25><a class=lnlinks href=#hl-31-25> 25</a>
</span><span class=lnt id=hl-31-26><a class=lnlinks href=#hl-31-26> 26</a>
</span><span class=lnt id=hl-31-27><a class=lnlinks href=#hl-31-27> 27</a>
</span><span class=lnt id=hl-31-28><a class=lnlinks href=#hl-31-28> 28</a>
</span><span class=lnt id=hl-31-29><a class=lnlinks href=#hl-31-29> 29</a>
</span><span class=lnt id=hl-31-30><a class=lnlinks href=#hl-31-30> 30</a>
</span><span class=lnt id=hl-31-31><a class=lnlinks href=#hl-31-31> 31</a>
</span><span class=lnt id=hl-31-32><a class=lnlinks href=#hl-31-32> 32</a>
</span><span class=lnt id=hl-31-33><a class=lnlinks href=#hl-31-33> 33</a>
</span><span class=lnt id=hl-31-34><a class=lnlinks href=#hl-31-34> 34</a>
</span><span class=lnt id=hl-31-35><a class=lnlinks href=#hl-31-35> 35</a>
</span><span class=lnt id=hl-31-36><a class=lnlinks href=#hl-31-36> 36</a>
</span><span class=lnt id=hl-31-37><a class=lnlinks href=#hl-31-37> 37</a>
</span><span class=lnt id=hl-31-38><a class=lnlinks href=#hl-31-38> 38</a>
</span><span class=lnt id=hl-31-39><a class=lnlinks href=#hl-31-39> 39</a>
</span><span class=lnt id=hl-31-40><a class=lnlinks href=#hl-31-40> 40</a>
</span><span class=lnt id=hl-31-41><a class=lnlinks href=#hl-31-41> 41</a>
</span><span class=lnt id=hl-31-42><a class=lnlinks href=#hl-31-42> 42</a>
</span><span class=lnt id=hl-31-43><a class=lnlinks href=#hl-31-43> 43</a>
</span><span class=lnt id=hl-31-44><a class=lnlinks href=#hl-31-44> 44</a>
</span><span class=lnt id=hl-31-45><a class=lnlinks href=#hl-31-45> 45</a>
</span><span class=lnt id=hl-31-46><a class=lnlinks href=#hl-31-46> 46</a>
</span><span class=lnt id=hl-31-47><a class=lnlinks href=#hl-31-47> 47</a>
</span><span class=lnt id=hl-31-48><a class=lnlinks href=#hl-31-48> 48</a>
</span><span class=lnt id=hl-31-49><a class=lnlinks href=#hl-31-49> 49</a>
</span><span class=lnt id=hl-31-50><a class=lnlinks href=#hl-31-50> 50</a>
</span><span class=lnt id=hl-31-51><a class=lnlinks href=#hl-31-51> 51</a>
</span><span class=lnt id=hl-31-52><a class=lnlinks href=#hl-31-52> 52</a>
</span><span class=lnt id=hl-31-53><a class=lnlinks href=#hl-31-53> 53</a>
</span><span class=lnt id=hl-31-54><a class=lnlinks href=#hl-31-54> 54</a>
</span><span class=lnt id=hl-31-55><a class=lnlinks href=#hl-31-55> 55</a>
</span><span class=lnt id=hl-31-56><a class=lnlinks href=#hl-31-56> 56</a>
</span><span class=lnt id=hl-31-57><a class=lnlinks href=#hl-31-57> 57</a>
</span><span class=lnt id=hl-31-58><a class=lnlinks href=#hl-31-58> 58</a>
</span><span class=lnt id=hl-31-59><a class=lnlinks href=#hl-31-59> 59</a>
</span><span class=lnt id=hl-31-60><a class=lnlinks href=#hl-31-60> 60</a>
</span><span class=lnt id=hl-31-61><a class=lnlinks href=#hl-31-61> 61</a>
</span><span class=lnt id=hl-31-62><a class=lnlinks href=#hl-31-62> 62</a>
</span><span class=lnt id=hl-31-63><a class=lnlinks href=#hl-31-63> 63</a>
</span><span class=lnt id=hl-31-64><a class=lnlinks href=#hl-31-64> 64</a>
</span><span class=lnt id=hl-31-65><a class=lnlinks href=#hl-31-65> 65</a>
</span><span class=lnt id=hl-31-66><a class=lnlinks href=#hl-31-66> 66</a>
</span><span class=lnt id=hl-31-67><a class=lnlinks href=#hl-31-67> 67</a>
</span><span class=lnt id=hl-31-68><a class=lnlinks href=#hl-31-68> 68</a>
</span><span class=lnt id=hl-31-69><a class=lnlinks href=#hl-31-69> 69</a>
</span><span class=lnt id=hl-31-70><a class=lnlinks href=#hl-31-70> 70</a>
</span><span class=lnt id=hl-31-71><a class=lnlinks href=#hl-31-71> 71</a>
</span><span class=lnt id=hl-31-72><a class=lnlinks href=#hl-31-72> 72</a>
</span><span class=lnt id=hl-31-73><a class=lnlinks href=#hl-31-73> 73</a>
</span><span class=lnt id=hl-31-74><a class=lnlinks href=#hl-31-74> 74</a>
</span><span class=lnt id=hl-31-75><a class=lnlinks href=#hl-31-75> 75</a>
</span><span class=lnt id=hl-31-76><a class=lnlinks href=#hl-31-76> 76</a>
</span><span class=lnt id=hl-31-77><a class=lnlinks href=#hl-31-77> 77</a>
</span><span class=lnt id=hl-31-78><a class=lnlinks href=#hl-31-78> 78</a>
</span><span class=lnt id=hl-31-79><a class=lnlinks href=#hl-31-79> 79</a>
</span><span class=lnt id=hl-31-80><a class=lnlinks href=#hl-31-80> 80</a>
</span><span class=lnt id=hl-31-81><a class=lnlinks href=#hl-31-81> 81</a>
</span><span class=lnt id=hl-31-82><a class=lnlinks href=#hl-31-82> 82</a>
</span><span class=lnt id=hl-31-83><a class=lnlinks href=#hl-31-83> 83</a>
</span><span class=lnt id=hl-31-84><a class=lnlinks href=#hl-31-84> 84</a>
</span><span class=lnt id=hl-31-85><a class=lnlinks href=#hl-31-85> 85</a>
</span><span class=lnt id=hl-31-86><a class=lnlinks href=#hl-31-86> 86</a>
</span><span class=lnt id=hl-31-87><a class=lnlinks href=#hl-31-87> 87</a>
</span><span class=lnt id=hl-31-88><a class=lnlinks href=#hl-31-88> 88</a>
</span><span class=lnt id=hl-31-89><a class=lnlinks href=#hl-31-89> 89</a>
</span><span class=lnt id=hl-31-90><a class=lnlinks href=#hl-31-90> 90</a>
</span><span class=lnt id=hl-31-91><a class=lnlinks href=#hl-31-91> 91</a>
</span><span class=lnt id=hl-31-92><a class=lnlinks href=#hl-31-92> 92</a>
</span><span class=lnt id=hl-31-93><a class=lnlinks href=#hl-31-93> 93</a>
</span><span class=lnt id=hl-31-94><a class=lnlinks href=#hl-31-94> 94</a>
</span><span class=lnt id=hl-31-95><a class=lnlinks href=#hl-31-95> 95</a>
</span><span class=lnt id=hl-31-96><a class=lnlinks href=#hl-31-96> 96</a>
</span><span class=lnt id=hl-31-97><a class=lnlinks href=#hl-31-97> 97</a>
</span><span class=lnt id=hl-31-98><a class=lnlinks href=#hl-31-98> 98</a>
</span><span class=lnt id=hl-31-99><a class=lnlinks href=#hl-31-99> 99</a>
</span><span class=lnt id=hl-31-100><a class=lnlinks href=#hl-31-100>100</a>
</span><span class=lnt id=hl-31-101><a class=lnlinks href=#hl-31-101>101</a>
</span><span class=lnt id=hl-31-102><a class=lnlinks href=#hl-31-102>102</a>
</span><span class=lnt id=hl-31-103><a class=lnlinks href=#hl-31-103>103</a>
</span><span class=lnt id=hl-31-104><a class=lnlinks href=#hl-31-104>104</a>
</span><span class=lnt id=hl-31-105><a class=lnlinks href=#hl-31-105>105</a>
</span><span class=lnt id=hl-31-106><a class=lnlinks href=#hl-31-106>106</a>
</span><span class=lnt id=hl-31-107><a class=lnlinks href=#hl-31-107>107</a>
</span><span class=lnt id=hl-31-108><a class=lnlinks href=#hl-31-108>108</a>
</span><span class=lnt id=hl-31-109><a class=lnlinks href=#hl-31-109>109</a>
</span><span class=lnt id=hl-31-110><a class=lnlinks href=#hl-31-110>110</a>
</span><span class=lnt id=hl-31-111><a class=lnlinks href=#hl-31-111>111</a>
</span><span class=lnt id=hl-31-112><a class=lnlinks href=#hl-31-112>112</a>
</span><span class=lnt id=hl-31-113><a class=lnlinks href=#hl-31-113>113</a>
</span><span class=lnt id=hl-31-114><a class=lnlinks href=#hl-31-114>114</a>
</span><span class=lnt id=hl-31-115><a class=lnlinks href=#hl-31-115>115</a>
</span><span class=lnt id=hl-31-116><a class=lnlinks href=#hl-31-116>116</a>
</span><span class=lnt id=hl-31-117><a class=lnlinks href=#hl-31-117>117</a>
</span><span class=lnt id=hl-31-118><a class=lnlinks href=#hl-31-118>118</a>
</span><span class=lnt id=hl-31-119><a class=lnlinks href=#hl-31-119>119</a>
</span><span class=lnt id=hl-31-120><a class=lnlinks href=#hl-31-120>120</a>
</span><span class=lnt id=hl-31-121><a class=lnlinks href=#hl-31-121>121</a>
</span><span class=lnt id=hl-31-122><a class=lnlinks href=#hl-31-122>122</a>
</span><span class=lnt id=hl-31-123><a class=lnlinks href=#hl-31-123>123</a>
</span><span class=lnt id=hl-31-124><a class=lnlinks href=#hl-31-124>124</a>
</span><span class=lnt id=hl-31-125><a class=lnlinks href=#hl-31-125>125</a>
</span><span class=lnt id=hl-31-126><a class=lnlinks href=#hl-31-126>126</a>
</span><span class=lnt id=hl-31-127><a class=lnlinks href=#hl-31-127>127</a>
</span><span class=lnt id=hl-31-128><a class=lnlinks href=#hl-31-128>128</a>
</span><span class=lnt id=hl-31-129><a class=lnlinks href=#hl-31-129>129</a>
</span><span class=lnt id=hl-31-130><a class=lnlinks href=#hl-31-130>130</a>
</span><span class=lnt id=hl-31-131><a class=lnlinks href=#hl-31-131>131</a>
</span><span class=lnt id=hl-31-132><a class=lnlinks href=#hl-31-132>132</a>
</span><span class=lnt id=hl-31-133><a class=lnlinks href=#hl-31-133>133</a>
</span><span class=lnt id=hl-31-134><a class=lnlinks href=#hl-31-134>134</a>
</span><span class=lnt id=hl-31-135><a class=lnlinks href=#hl-31-135>135</a>
</span><span class=lnt id=hl-31-136><a class=lnlinks href=#hl-31-136>136</a>
</span><span class=lnt id=hl-31-137><a class=lnlinks href=#hl-31-137>137</a>
</span><span class=lnt id=hl-31-138><a class=lnlinks href=#hl-31-138>138</a>
</span><span class=lnt id=hl-31-139><a class=lnlinks href=#hl-31-139>139</a>
</span><span class=lnt id=hl-31-140><a class=lnlinks href=#hl-31-140>140</a>
</span><span class=lnt id=hl-31-141><a class=lnlinks href=#hl-31-141>141</a>
</span><span class=lnt id=hl-31-142><a class=lnlinks href=#hl-31-142>142</a>
</span><span class=lnt id=hl-31-143><a class=lnlinks href=#hl-31-143>143</a>
</span><span class=lnt id=hl-31-144><a class=lnlinks href=#hl-31-144>144</a>
</span><span class=lnt id=hl-31-145><a class=lnlinks href=#hl-31-145>145</a>
</span><span class=lnt id=hl-31-146><a class=lnlinks href=#hl-31-146>146</a>
</span><span class=lnt id=hl-31-147><a class=lnlinks href=#hl-31-147>147</a>
</span><span class=lnt id=hl-31-148><a class=lnlinks href=#hl-31-148>148</a>
</span><span class=lnt id=hl-31-149><a class=lnlinks href=#hl-31-149>149</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span><span class=p>,</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>uuid</span> <span class=kn>import</span> <span class=n>UUID</span><span class=p>,</span> <span class=n>uuid4</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Domain(핵심 비즈니스 로직)</span>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Product</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>id</span><span class=p>:</span> <span class=n>UUID</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>price</span><span class=p>:</span> <span class=nb>float</span>
</span></span><span class=line><span class=cl>    <span class=n>stock</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>decrease_stock</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>quantity</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>stock</span> <span class=o>&lt;</span> <span class=n>quantity</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;Insufficient stock&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>stock</span> <span class=o>-=</span> <span class=n>quantity</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ports(포트) - 내부에서 외부로 향하는 인터페이스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ProductRepository</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product</span><span class=p>:</span> <span class=n>Product</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_by_id</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=n>UUID</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Product</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_all</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Product</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ProductNotificationService</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>notify_low_stock</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product</span><span class=p>:</span> <span class=n>Product</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Application Service(응용 서비스)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ProductService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=n>product_repository</span><span class=p>:</span> <span class=n>ProductRepository</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>notification_service</span><span class=p>:</span> <span class=n>ProductNotificationService</span>
</span></span><span class=line><span class=cl>    <span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>product_repository</span> <span class=o>=</span> <span class=n>product_repository</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>notification_service</span> <span class=o>=</span> <span class=n>notification_service</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create_product</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>price</span><span class=p>:</span> <span class=nb>float</span><span class=p>,</span> <span class=n>stock</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>UUID</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>product</span> <span class=o>=</span> <span class=n>Product</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>uuid4</span><span class=p>(),</span> <span class=n>name</span><span class=o>=</span><span class=n>name</span><span class=p>,</span> <span class=n>price</span><span class=o>=</span><span class=n>price</span><span class=p>,</span> <span class=n>stock</span><span class=o>=</span><span class=n>stock</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>product_repository</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>product</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>product</span><span class=o>.</span><span class=n>id</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>update_stock</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=n>UUID</span><span class=p>,</span> <span class=n>quantity</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>product</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>product_repository</span><span class=o>.</span><span class=n>find_by_id</span><span class=p>(</span><span class=n>product_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>product</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;Product not found&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>product</span><span class=o>.</span><span class=n>decrease_stock</span><span class=p>(</span><span class=n>quantity</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 재고가 10개 미만이면 알림 발송</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>product</span><span class=o>.</span><span class=n>stock</span> <span class=o>&lt;</span> <span class=mi>10</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>notification_service</span><span class=o>.</span><span class=n>notify_low_stock</span><span class=p>(</span><span class=n>product</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>product_repository</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>product</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Adapters(어댑터) - 외부 시스템과의 연동</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PostgresProductRepository</span><span class=p>(</span><span class=n>ProductRepository</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>db_connection</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>db</span> <span class=o>=</span> <span class=n>db_connection</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product</span><span class=p>:</span> <span class=n>Product</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># PostgreSQL 데이터베이스에 제품 저장</span>
</span></span><span class=line><span class=cl>        <span class=n>query</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            INSERT INTO products (id, name, price, stock)
</span></span></span><span class=line><span class=cl><span class=s2>            VALUES (</span><span class=si>%s</span><span class=s2>, </span><span class=si>%s</span><span class=s2>, </span><span class=si>%s</span><span class=s2>, </span><span class=si>%s</span><span class=s2>)
</span></span></span><span class=line><span class=cl><span class=s2>            ON CONFLICT (id) DO UPDATE
</span></span></span><span class=line><span class=cl><span class=s2>            SET name = excluded.name,
</span></span></span><span class=line><span class=cl><span class=s2>                price = excluded.price,
</span></span></span><span class=line><span class=cl><span class=s2>                stock = excluded.stock
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>db</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=n>query</span><span class=p>,</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nb>str</span><span class=p>(</span><span class=n>product</span><span class=o>.</span><span class=n>id</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>product</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>product</span><span class=o>.</span><span class=n>price</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>product</span><span class=o>.</span><span class=n>stock</span>
</span></span><span class=line><span class=cl>        <span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_by_id</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=n>UUID</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Product</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=c1># PostgreSQL 데이터베이스에서 제품 조회</span>
</span></span><span class=line><span class=cl>        <span class=n>query</span> <span class=o>=</span> <span class=s2>&#34;SELECT id, name, price, stock FROM products WHERE id = </span><span class=si>%s</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>db</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=n>query</span><span class=p>,</span> <span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>product_id</span><span class=p>),))</span><span class=o>.</span><span class=n>fetchone</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>result</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>Product</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=nb>id</span><span class=o>=</span><span class=n>UUID</span><span class=p>(</span><span class=n>result</span><span class=p>[</span><span class=mi>0</span><span class=p>]),</span>
</span></span><span class=line><span class=cl>                <span class=n>name</span><span class=o>=</span><span class=n>result</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=n>price</span><span class=o>=</span><span class=n>result</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=n>stock</span><span class=o>=</span><span class=n>result</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_all</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Product</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 모든 제품 조회</span>
</span></span><span class=line><span class=cl>        <span class=n>query</span> <span class=o>=</span> <span class=s2>&#34;SELECT id, name, price, stock FROM products&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>results</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>db</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=n>query</span><span class=p>)</span><span class=o>.</span><span class=n>fetchall</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=n>Product</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=nb>id</span><span class=o>=</span><span class=n>UUID</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=mi>0</span><span class=p>]),</span>
</span></span><span class=line><span class=cl>                <span class=n>name</span><span class=o>=</span><span class=n>row</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=n>price</span><span class=o>=</span><span class=n>row</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=n>stock</span><span class=o>=</span><span class=n>row</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>row</span> <span class=ow>in</span> <span class=n>results</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>EmailNotificationService</span><span class=p>(</span><span class=n>ProductNotificationService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>email_client</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>email_client</span> <span class=o>=</span> <span class=n>email_client</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>notify_low_stock</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product</span><span class=p>:</span> <span class=n>Product</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>message</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;Low stock alert: </span><span class=si>{</span><span class=n>product</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2> has only </span><span class=si>{</span><span class=n>product</span><span class=o>.</span><span class=n>stock</span><span class=si>}</span><span class=s2> items remaining&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>email_client</span><span class=o>.</span><span class=n>send_email</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>to</span><span class=o>=</span><span class=s2>&#34;warehouse@example.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>subject</span><span class=o>=</span><span class=s2>&#34;Low Stock Alert&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>body</span><span class=o>=</span><span class=n>message</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># REST API Adapter</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>fastapi</span> <span class=kn>import</span> <span class=n>FastAPI</span><span class=p>,</span> <span class=n>HTTPException</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>FastAPI</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.post</span><span class=p>(</span><span class=s2>&#34;/products&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>create_product</span><span class=p>(</span><span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>price</span><span class=p>:</span> <span class=nb>float</span><span class=p>,</span> <span class=n>stock</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>product_id</span> <span class=o>=</span> <span class=n>product_service</span><span class=o>.</span><span class=n>create_product</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>price</span><span class=p>,</span> <span class=n>stock</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;product_id&#34;</span><span class=p>:</span> <span class=n>product_id</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>HTTPException</span><span class=p>(</span><span class=n>status_code</span><span class=o>=</span><span class=mi>400</span><span class=p>,</span> <span class=n>detail</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.put</span><span class=p>(</span><span class=s2>&#34;/products/</span><span class=si>{product_id}</span><span class=s2>/stock&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>update_product_stock</span><span class=p>(</span><span class=n>product_id</span><span class=p>:</span> <span class=n>UUID</span><span class=p>,</span> <span class=n>quantity</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>product_service</span><span class=o>.</span><span class=n>update_stock</span><span class=p>(</span><span class=n>product_id</span><span class=p>,</span> <span class=n>quantity</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Stock updated successfully&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>HTTPException</span><span class=p>(</span><span class=n>status_code</span><span class=o>=</span><span class=mi>404</span><span class=p>,</span> <span class=n>detail</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><hr><h4 id=용어-정리-3>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-3>#</a></h4><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><hr><h4 id=참고-및-출처-5>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-5>#</a></h4><hr></div></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>