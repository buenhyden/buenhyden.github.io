<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Distributed Architecture | hyunyoun's Blog</title><meta name=keywords content="Software-Engineering,Design-and-Architecture,Architecture-Styles,Distributed-Architecture"><meta name=description content="Distributed Architecture 는 하나의 시스템을 여러 네트워크 연결 노드에 분산 배포해 처리 성능, 장애 복원력, 확장성을 확보하는 구조이다. 클라우드, 마이크로서비스, P2P, 브로커, 공유 - 낫싱 등 다양한 패턴이 포함되며, 메시징, 이벤트 기반, RPC, API 게이트웨이 등을 통해 모듈 간 통신을 설계한다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-design-and-architecture/architecture/distributed-architectures/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/software-design-and-architecture/architecture/distributed-architectures/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-design-and-architecture/architecture/distributed-architectures/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-design-and-architecture/architecture/distributed-architectures/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Distributed Architecture"><meta property="og:description" content="Distributed Architecture 는 하나의 시스템을 여러 네트워크 연결 노드에 분산 배포해 처리 성능, 장애 복원력, 확장성을 확보하는 구조이다. 클라우드, 마이크로서비스, P2P, 브로커, 공유 - 낫싱 등 다양한 패턴이 포함되며, 메시징, 이벤트 기반, RPC, API 게이트웨이 등을 통해 모듈 간 통신을 설계한다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Distributed Architecture"><meta name=twitter:description content="Distributed Architecture 는 하나의 시스템을 여러 네트워크 연결 노드에 분산 배포해 처리 성능, 장애 복원력, 확장성을 확보하는 구조이다. 클라우드, 마이크로서비스, P2P, 브로커, 공유 - 낫싱 등 다양한 패턴이 포함되며, 메시징, 이벤트 기반, RPC, API 게이트웨이 등을 통해 모듈 간 통신을 설계한다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Computer Science and Engineering","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Design and Architecture","item":""},{"@type":"ListItem","position":3,"name":"Architecture","item":"https://buenhyden.github.io/posts/software-design-and-architecture/architecture/"},{"@type":"ListItem","position":4,"name":"Distributed Architecture","item":"https://buenhyden.github.io/posts/software-design-and-architecture/architecture/distributed-architectures/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>Computer Science and Engineering</a>&nbsp;»&nbsp;<a href>Design and Architecture</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-design-and-architecture/architecture/>Architecture</a></div><h1>Distributed Architecture</h1><div class=post-description>Distributed Architecture 는 하나의 시스템을 여러 네트워크 연결 노드에 분산 배포해 처리 성능, 장애 복원력, 확장성을 확보하는 구조이다. 클라우드, 마이크로서비스, P2P, 브로커, 공유 - 낫싱 등 다양한 패턴이 포함되며, 메시징, 이벤트 기반, RPC, API 게이트웨이 등을 통해 모듈 간 통신을 설계한다.</div></header><div class=post-content><h2 id=distributed-architecture>Distributed Architecture<a hidden class=anchor aria-hidden=true href=#distributed-architecture>#</a></h2><p>Distributed Architecture(분산 아키텍처) 는 시스템의 여러 구성 요소가 물리적으로 분리된 환경에서 네트워크를 통해 통신하며 하나의 논리적 시스템을 이루는 구조이다. 각 노드는 독립적으로 동작하면서도 전체 시스템의 일부로 협력하며, 장애 발생 시에도 서비스의 연속성과 확장성을 보장한다. 이 아키텍처는 마이크로서비스, 클라우드 네이티브, IoT(사물인터넷), 글로벌 서비스 등 다양한 현대 IT 서비스의 기반이 된다.</p><h3 id=배경>배경<a hidden class=anchor aria-hidden=true href=#배경>#</a></h3><p>분산 아키텍처의 등장 배경은 다음과 같다:</p><ol><li><p><strong>모놀리식 아키텍처의 한계</strong></p><ul><li>단일 장애점 (Single Point of Failure) 문제</li><li>확장성 제약 (수직 확장의 한계)</li><li>기술 스택 종속성</li><li>배포와 업데이트의 복잡성</li></ul></li><li><p><strong>클라우드 컴퓨팅의 발전</strong></p><ul><li>분산 인프라의 활용 필요성 증대</li><li>컨테이너 기술의 발전 (Docker, Kubernetes)</li><li>서비스형 인프라 (IaaS, PaaS) 의 보편화</li></ul></li><li><p><strong>비즈니스 요구사항 변화</strong></p><ul><li>빠른 변화에 대한 대응력 필요</li><li>글로벌 서비스 요구</li><li>대용량 트래픽 처리 필요성</li></ul></li></ol><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><p>분산 아키텍처의 주요 목적과 필요성은 다음과 같다:</p><ol><li><p><strong>확장성 (Scalability)</strong></p><ul><li>수평적 확장을 통한 처리 능력 증대</li><li>필요에 따른 선택적 확장 가능</li></ul></li><li><p><strong>가용성 (Availability)</strong></p><ul><li>부분적 장애가 전체 시스템에 미치는 영향 최소화</li><li>지리적 분산을 통한 서비스 연속성 확보</li></ul></li><li><p><strong>유연성 (Flexibility)</strong></p><ul><li>기술 스택의 다양성 허용</li><li>독립적인 개발과 배포 가능</li></ul></li><li><p><strong>성능 최적화</strong></p><ul><li>지역별 최적화된 서비스 제공</li><li>부하 분산을 통한 응답 시간 개선</li></ul></li></ol><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><p>분산 아키텍처는 여러 독립적인 컴포넌트 (노드, 서버, 서비스 등) 가 네트워크를 통해 상호작용하며 하나의 시스템을 구성하는 구조이다. 각 컴포넌트는 물리적으로 분산되어 있으며, 서로 다른 위치에서 동작할 수 있다.</p><h4 id=기본-개념>기본 개념<a hidden class=anchor aria-hidden=true href=#기본-개념>#</a></h4><ol><li><p><strong>분산 시스템 (Distributed System)</strong>:<br>네트워크로 연결된 여러 독립적인 컴포넌트가 하나의 시스템처럼 동작하는 구조로, 각 노드가 독립적으로 실행되며 메시지 전달을 통해 협력한다.</p></li><li><p><strong>CAP 이론 (CAP Theorem)</strong>:</p><ul><li><strong>일관성 (Consistency)</strong>: 모든 노드가 동시에 같은 데이터를 보는 상태</li><li><strong>가용성 (Availability)</strong>: 모든 요청이 응답을 받는 상태</li><li><strong>분할 내성 (Partition Tolerance)</strong>: 네트워크 분할에도 시스템이 계속 동작하는 능력</li></ul></li><li><p><strong>마이크로서비스 아키텍처 (Microservices Architecture)</strong>:<br>애플리케이션을 독립적으로 배포 가능한 작은 서비스들의 집합으로 구성한다.</p></li><li><p><strong>서비스 간 통신 패턴</strong></p><ul><li><strong>동기 통신</strong>: HTTP/REST, gRPC</li><li><strong>비동기 통신</strong>: 메시지 큐, 이벤트 스트리밍</li></ul></li><li><p>분산 트랜잭션 관리</p><ul><li><strong>사가 패턴 (Saga Pattern)</strong>: 분산 환경에서의 트랜잭션 관리</li><li><strong>보상 트랜잭션 (Compensating Transaction)</strong>: 실패 시 이전 상태로 롤백</li></ul></li></ol><h4 id=실무-구현을-위한-연관성-분석>실무 구현을 위한 연관성 분석<a hidden class=anchor aria-hidden=true href=#실무-구현을-위한-연관성-분석>#</a></h4><p><strong>시스템 설계 측면</strong>:</p><ul><li>CAP 이론은 데이터베이스 선택과 아키텍처 설계 결정의 기준 제공</li><li>마이크로서비스는 팀 조직 구조와 개발 프로세스에 직접적 영향</li></ul><p><strong>운영 측면</strong>:</p><ul><li>서비스 간 통신은 네트워크 지연시간과 장애 처리 전략 결정</li><li>분산 트랜잭션은 데이터 일관성과 시스템 복구 전략 수립</li></ul><h3 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><p>분산 아키텍처의 주요 기능과 역할은 다음과 같다:</p><ol><li><p><strong>서비스 분해 (Service Decomposition)</strong></p><ul><li>비즈니스 도메인 기반 서비스 경계 설정</li><li>독립적 생명주기 관리</li></ul></li><li><p><strong>통신 관리 (Communication Management)</strong></p><ul><li>서비스 간 메시지 전달 및 프로토콜 관리</li><li>API 게이트웨이를 통한 외부 인터페이스 제공</li></ul></li><li><p><strong>데이터 관리 (Data Management)</strong></p><ul><li>서비스별 독립적 데이터 저장소 운영</li><li>분산 트랜잭션 및 데이터 일관성 관리</li></ul></li><li><p><strong>장애 처리 (Fault Tolerance)</strong></p><ul><li>서킷 브레이커 (Circuit Breaker) 패턴</li><li>재시도 (Retry) 및 타임아웃 (Timeout) 관리</li></ul></li></ol><h4 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h4><p>분산 아키텍처의 핵심 특징은 다음과 같다:</p><ol><li><p><strong>느슨한 결합 (Loose Coupling)</strong></p><ul><li>서비스 간 독립성 보장</li><li>변경이 다른 서비스에 미치는 영향 최소화</li></ul></li><li><p><strong>높은 응집도 (High Cohesion)</strong></p><ul><li>단일 책임 원칙 적용</li><li>비즈니스 기능 중심의 서비스 설계</li></ul></li><li><p><strong>자율성 (Autonomy)</strong></p><ul><li>독립적 배포 및 확장</li><li>팀별 기술 스택 선택 자유도</li></ul></li><li><p><strong>탄력성 (Resilience)</strong></p><ul><li>장애 격리 및 복구 능력</li><li>우아한 성능 저하 (Graceful Degradation)</li></ul></li></ol><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><p>분산 아키텍처의 핵심 원칙들:</p><ol><li><p><strong>단일 책임 원칙 (Single Responsibility Principle)</strong></p><ul><li>각 서비스는 하나의 비즈니스 기능에 집중</li><li>명확한 서비스 경계 설정</li></ul></li><li><p><strong>인터페이스 분리 원칙 (Interface Segregation Principle)</strong></p><ul><li>클라이언트별 최적화된 인터페이스 제공</li><li>필요 이상의 의존성 방지</li></ul></li><li><p><strong>의존성 역전 원칙 (Dependency Inversion Principle)</strong></p><ul><li>추상화에 의존하여 구체적 구현에 대한 의존성 감소</li><li>API 계약을 통한 서비스 간 상호작용</li></ul></li><li><p><strong>독립성 원칙 (Independence Principle)</strong></p><ul><li>서비스별 독립적 생명주기 관리</li><li>배포와 확장의 독립성 보장</li></ul></li></ol><h3 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h3><pre class=mermaid>graph LR
  Client --&gt; LB[Load Balancer / API Gateway]
  LB --&gt; |REST/gRPC| ServiceA[Service A Node]
  LB --&gt; |REST/gRPC| ServiceB[Service B Node]
  ServiceA --&gt; MQ[Message Broker]
  MQ --&gt; ServiceC[Service C Node]
  ServiceA --&gt; DB1[Shard DB 1]
  ServiceB --&gt; DB2[Shard DB 2]
  ServiceC --&gt; Cache[Distributed Cache]
  DB1 &amp; DB2 --&gt; Replication[Replica Sets]
</pre><ul><li><strong>Client</strong>: 외부 유저 또는 시스템 요청 생성</li><li><strong>Load Balancer / API Gateway</strong>: 요청 분산, 인증, 라우팅, 캐싱 등의 기능 수행</li><li><strong>Service Nodes (A, B, C)</strong>: 기능별 독립 실행 단위 (마이크로서비스, API 등)</li><li><strong>Message Broker</strong>: 비동기 메시지 중개 역할 (Kafka, RabbitMQ 등)</li><li><strong>Database Shards</strong>: 데이터 파티셔닝 방식 적용</li><li><strong>Distributed Cache</strong>: 캐시 계층 (예: Redis Cluster)</li><li><strong>Replication</strong>: 복제본 구성으로 가용성과 복원력 강화</li></ul><h4 id=구성-요소-분류>구성 요소 분류<a hidden class=anchor aria-hidden=true href=#구성-요소-분류>#</a></h4><table><thead><tr><th>구성 요소 (Component)</th><th>필수 여부</th><th>기능 및 역할</th></tr></thead><tbody><tr><td><strong>노드 (Node)</strong></td><td>필수</td><td>애플리케이션의 실행 단위 (서버/컨테이너/함수 등)</td></tr><tr><td><strong>통신 레이어 (Connector)</strong></td><td>필수</td><td>노드 간 HTTP, RPC, 메시징 채널 제공</td></tr><tr><td><strong>로드 밸런서/API 게이트웨이</strong></td><td>선택적</td><td>요청 라우팅, 인증, QoS, 속도 제한 처리</td></tr><tr><td><strong>메시지 브로커 (Message Broker)</strong></td><td>선택적</td><td>비동기 메시징 및 decoupling 지원</td></tr><tr><td><strong>데이터 저장소 (Sharded DB, Cache)</strong></td><td>필수</td><td>데이터 분산 및 빠른 접근 지원</td></tr><tr><td><strong>Replication/Failover 시스템</strong></td><td>선택적</td><td>장애 복원 및 고가용성 확보</td></tr><tr><td><strong>Monitoring/Tracing</strong></td><td>선택적</td><td>분산 추적, 장애/성능 모니터링</td></tr></tbody></table><p>➤ <strong>필수 구성 요소</strong>: 노드, 통신 레이어, 분산 데이터 저장<br>➤ <strong>선택 구성 요소</strong>: 메시징, 로드 밸런서, 복제 시스템, 모니터링 등은 요구에 따라 사용</p><h4 id=작동-흐름-및-통신-방식>작동 흐름 및 통신 방식<a hidden class=anchor aria-hidden=true href=#작동-흐름-및-통신-방식>#</a></h4><ol><li>클라이언트가 <strong>Load Balancer/API Gateway</strong>에 요청</li><li>인증 및 라우팅 후 해당 서비스 노드로 전달</li><li>서비스 노드 간 데이터 조회 및 작업 분배<br>* 동기식 HTTP/gRPC 호출<br>* 비동기 메시징 (Kafka 등)</li><li>노드는 ** 데이터베이스 샤딩 (DB1, DB2 등)** 에 접근하여 읽기/쓰기 처리</li><li>메시지 브로커는 작업 큐 또는 이벤트 전달 역할 수행</li><li><strong>분산 캐시</strong>로 빈번히 사용되는 데이터를 응답 속도 향상</li><li>모든 흐름은 <strong>관찰성 (Tracing/Monitoring)</strong> 도구로 실시간 모니터링</li></ol><h3 id=아키텍처-예시>아키텍처 예시<a hidden class=anchor aria-hidden=true href=#아키텍처-예시>#</a></h3><h4 id=예시-1>예시 1<a hidden class=anchor aria-hidden=true href=#예시-1>#</a></h4><pre class=mermaid>graph TB
    subgraph &#34;클라이언트 계층&#34;
        C1[Web Client]
        C2[Mobile App]
        C3[API Consumer]
    end
    
    subgraph &#34;API Gateway 계층&#34;
        AG[API Gateway]
    end
    
    subgraph &#34;서비스 계층&#34;
        MS1[User Service]
        MS2[Order Service]
        MS3[Payment Service]
        MS4[Inventory Service]
    end
    
    subgraph &#34;데이터 계층&#34;
        DB1[(User DB)]
        DB2[(Order DB)]
        DB3[(Payment DB)]
        DB4[(Inventory DB)]
    end
    
    subgraph &#34;메시징 계층&#34;
        MB[Message Broker]
    end
    
    C1 --&gt; AG
    C2 --&gt; AG
    C3 --&gt; AG
    
    AG --&gt; MS1
    AG --&gt; MS2
    AG --&gt; MS3
    AG --&gt; MS4
    
    MS1 --&gt; DB1
    MS2 --&gt; DB2
    MS3 --&gt; DB3
    MS4 --&gt; DB4
    
    MS1 -.-&gt; MB
    MS2 -.-&gt; MB
    MS3 -.-&gt; MB
    MS4 -.-&gt; MB
</pre><p><strong>작동 원리 설명</strong>:</p><ol><li><strong>요청 라우팅</strong>: API Gateway 가 클라이언트 요청을 적절한 마이크로서비스로 라우팅</li><li><strong>서비스 처리</strong>: 각 마이크로서비스가 독립적으로 비즈니스 로직 처리</li><li><strong>데이터 접근</strong>: 서비스별 전용 데이터베이스 사용 (Database per Service 패턴)</li><li><strong>비동기 통신</strong>: Message Broker 를 통한 서비스 간 이벤트 기반 통신</li></ol><h4 id=예시-2>예시 2<a hidden class=anchor aria-hidden=true href=#예시-2>#</a></h4><pre class=mermaid>graph TB
    subgraph &#34;External Layer&#34;
        CDN[Content Delivery Network]
        LB[Load Balancer]
    end
    
    subgraph &#34;Gateway Layer&#34;
        AG1[API Gateway 1]
        AG2[API Gateway 2]
    end
    
    subgraph &#34;Service Mesh&#34;
        subgraph &#34;Business Services&#34;
            US[User Service]
            OS[Order Service]
            PS[Payment Service]
            IS[Inventory Service]
        end
        
        subgraph &#34;Platform Services&#34;
            AS[Auth Service]
            NS[Notification Service]
            LS[Logging Service]
        end
    end
    
    subgraph &#34;Data Layer&#34;
        subgraph &#34;Operational Data&#34;
            UDB[(User DB)]
            ODB[(Order DB)]
            PDB[(Payment DB)]
            IDB[(Inventory DB)]
        end
        
        subgraph &#34;Analytical Data&#34;
            DW[(Data Warehouse)]
            CACHE[(Cache)]
        end
    end
    
    subgraph &#34;Infrastructure&#34;
        SR[Service Registry]
        CM[Config Management]
        MB[Message Broker]
        MO[Monitoring]
    end
    
    CDN --&gt; LB
    LB --&gt; AG1
    LB --&gt; AG2
    
    AG1 --&gt; US
    AG1 --&gt; OS
    AG2 --&gt; PS
    AG2 --&gt; IS
    
    US --&gt; AS
    OS --&gt; NS
    PS --&gt; LS
    
    US --&gt; UDB
    OS --&gt; ODB
    PS --&gt; PDB
    IS --&gt; IDB
    
    US -.-&gt; SR
    OS -.-&gt; SR
    PS -.-&gt; SR
    IS -.-&gt; SR
    
    US -.-&gt; MB
    OS -.-&gt; MB
    PS -.-&gt; MB
    IS -.-&gt; MB
</pre><p>이 아키텍처는 다음과 같은 특징을 가진다:</p><ul><li><strong>계층화된 구조</strong>: 각 계층이 명확한 책임을 가짐</li><li><strong>서비스 메시</strong>: 마이크로서비스 간 통신과 관리</li><li><strong>분산된 데이터</strong>: 각 서비스가 독립적 데이터 저장소 보유</li><li><strong>플랫폼 서비스</strong>: 횡단 관심사를 처리하는 공통 서비스</li></ul><h5 id=구성요소>구성요소<a hidden class=anchor aria-hidden=true href=#구성요소>#</a></h5><table><thead><tr><th>구분</th><th>구성요소</th><th>기능 및 역할</th><th>특징</th></tr></thead><tbody><tr><td><strong>필수</strong></td><td>API Gateway</td><td>클라이언트 요청 라우팅, 인증/인가, 요청 집계</td><td>단일 진입점, 횡단 관심사 처리</td></tr><tr><td></td><td>마이크로서비스</td><td>비즈니스 로직 처리, 독립적 배포 단위</td><td>느슨한 결합, 높은 응집도</td></tr><tr><td></td><td>서비스 레지스트리</td><td>서비스 인스턴스 등록 및 검색, 위치 추적</td><td>동적 서비스 디스커버리, 무중단 확장 가능</td></tr><tr><td></td><td>설정 관리 서버</td><td>구성 설정의 중앙 집중 관리</td><td>환경별 설정 분리, 운영 편의성 향상</td></tr><tr><td><strong>선택</strong></td><td>메시지 브로커</td><td>비동기 메시징, 이벤트 기반 통신</td><td>서비스 간 결합도 감소, 확장성 향상</td></tr><tr><td></td><td>서킷 브레이커</td><td>장애 전파 방지, 장애 지점 차단</td><td>우아한 실패 처리, 탄력적 시스템 구성</td></tr><tr><td></td><td>로드 밸런서</td><td>클라이언트 요청 분산 처리</td><td>고가용성, 부하 분산</td></tr><tr><td></td><td>캐시 서버</td><td>자주 사용하는 데이터 캐싱, 부하 감소</td><td>응답 속도 개선, 백엔드 부하 완화</td></tr></tbody></table><h3 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h3><table><thead><tr><th>영역</th><th>구현 기법</th><th>핵심 목적/역할</th><th>위험 · 제약</th><th>권장 적용 방안</th></tr></thead><tbody><tr><td><strong>서비스 분해 & 통신</strong></td><td><strong>Service Decomposition</strong>— DDD 기반 마이크로서비스 설계</td><td>팀·도메인 단위 독립 배포·스케일</td><td>서비스 경계 설정 실패 시 Chatty‑Service·데이터 파편화</td><td>Bounded Context 설계 후 API Contract 먼저 정의</td></tr><tr><td></td><td><strong>API Gateway / Load Balancer</strong></td><td>단일 진입점·라우팅·Cross‑cutting(인증/Rate‑Limit)</td><td>단일 장애점·Latency 증가</td><td>게이트웨이 이중화, QoS 규칙과 캐시 레이어 함께 설계</td></tr><tr><td></td><td><strong>gRPC / REST / GraphQL</strong></td><td>경량 RPC, JSON/Protobuf, 선언형 쿼리</td><td>포맷·버전호환·N+1 문제</td><td>서비스 특성별 혼합 사용 (읽기 GraphQL, 쓰기 REST 등)</td></tr><tr><td></td><td><strong>Event‑Driven Pub‑Sub</strong> (Kafka, RabbitMQ)</td><td>비동기 메시징·Loose‑Coupling</td><td>At‑least‑once 중복, 순서보장 이슈</td><td>Idempotent Consumer, Exactly‑once 설정 (Kafka TX)</td></tr><tr><td>** 데이터 일관성 & 저장소**</td><td><strong>Sharded / Shared‑Nothing DB</strong></td><td>수평 확장·Hot‑Partition 완화</td><td>크로스‑샤드 조인 불가</td><td>Key‑Based Sharding + Federated Query 도입</td></tr><tr><td></td><td><strong>Distributed Cache</strong> (Redis Cluster, Memcached)</td><td>읽기 부하 흡수·지연 감소</td><td>캐시 불일치, 데이터 유실</td><td>Cache‑Aside + TTL, Persistence/Replica 설정</td></tr><tr><td></td><td><strong>Saga Pattern</strong> (오케스트레이션/코레오그래피)</td><td>분산 트랜잭션 보상·일관성 확보</td><td>롤백 논리 복잡·레이턴시 증가</td><td>작은 단계로 분할, 실패 경로 우선 설계, DLQ 운영</td></tr><tr><td></td><td><strong>Consensus Algorithms</strong> (Raft, Paxos)</td><td>메타데이터·리더 선출·상태 복제</td><td>성능↓, 네트워크 분할 시 리더 공백</td><td>5‑노드 이상 Odd‑Number 구성, Quorum 모니터링</td></tr><tr><td><strong>탄력성 & 오류 복원</strong></td><td><strong>Circuit Breaker / Retry / Timeout</strong></td><td>Cascading Failure 방지·빠른 Fail</td><td>잘못된 Retry 폭주</td><td>지수적 Backoff, 요청 Volume 기반 Trip 기준</td></tr><tr><td></td><td><strong>Health Check & Auto‑Scaling</strong></td><td>장애 감지·수평 확장</td><td>싸이클링 (Flap)·콜드‑스타트 지연</td><td>Readiness/Liveness 분리, Warm‑Pool 유지</td></tr><tr><td></td><td><strong>Service Discovery</strong> (Consul, Eureka)</td><td>동적 인스턴스–클라이언트 바인딩</td><td>스탬피드 효과·메타 저장소 장애</td><td>DNS‑TTL 조절, 서버‑풀 캐시·Watch 기반 동기화</td></tr><tr><td><strong>운영 자동화 & 가시성</strong></td><td><strong>Centralized Observability</strong> (Prometheus, Grafana, ELK)</td><td>메트릭·로그·추적 통합</td><td>데이터 홍수, 샘플링 비용</td><td>RED/SLO 지표 선별, OpenTelemetry 표준 수집</td></tr><tr><td></td><td><strong>Chaos Engineering & Fault Injection</strong></td><td>회복력 검증·실전 장애 훈련</td><td>고객 영향 위험</td><td>Production Guardrail, Blast‑Radius 제한</td></tr><tr><td></td><td><strong>IaC & GitOps</strong> (Terraform, Argo CD)</td><td>선언형 인프라·자동 배포 파이프라인</td><td>초기 학습 곡선·Drift</td><td>모듈 템플릿화, PR‑based 승인 플로우</td></tr></tbody></table><h4 id=사가-패턴-saga-pattern>사가 패턴 (Saga Pattern)<a hidden class=anchor aria-hidden=true href=#사가-패턴-saga-pattern>#</a></h4><p>사가 패턴 (Saga Pattern) 은 <strong>마이크로서비스 아키텍처</strong>에서 <strong>분산 트랜잭션</strong>을 처리하기 위한 대표적인 패턴이다. 특히, <strong>ACID</strong> 대신 <strong>BASE 원칙</strong>에 따라 장기 실행 트랜잭션 (Long-Running Transaction, LRT) 을 <strong>작은 로컬 트랜잭션</strong>으로 분해하여 **최종 일관성 (Eventual Consistency)**을 확보한다.</p><h5 id=코레오그래피-vs-오케스트레이션-비교>코레오그래피 Vs 오케스트레이션 비교<a hidden class=anchor aria-hidden=true href=#코레오그래피-vs-오케스트레이션-비교>#</a></h5><table><thead><tr><th>항목</th><th>코레오그래피 (Choreography)</th><th>오케스트레이션 (Orchestration)</th></tr></thead><tbody><tr><td>제어 방식</td><td>분산 이벤트 기반 (자율 분산)</td><td>중앙 집중 제어 (조정자 서비스 존재)</td></tr><tr><td>확장성</td><td>높음</td><td>상대적으로 낮음</td></tr><tr><td>추적 및 디버깅</td><td>어려움 (분산 추적 필요)</td><td>용이 (중앙에서 전체 트랜잭션 관리)</td></tr><tr><td>결합도</td><td>낮음</td><td>높음 (조정자에 집중)</td></tr><tr><td>초기 구현 난이도</td><td>쉬움</td><td>상대적으로 복잡</td></tr><tr><td>사용 추천 상황</td><td>작은 서비스 간 흐름, 이벤트 기반 서비스 구조</td><td>복잡한 흐름 관리, 트랜잭션 제어가 중요한 상황</td></tr><tr><td>실패 보상 처리 책임</td><td>각 서비스가 자신의 보상 책임</td><td>조정자가 전체 보상 흐름 제어</td></tr></tbody></table><h5 id=코레오그래피-choreography>코레오그래피 (Choreography)<a hidden class=anchor aria-hidden=true href=#코레오그래피-choreography>#</a></h5><p><strong>중앙 조정자 없이</strong> 각 마이크로서비스가 <strong>이벤트 기반으로 자율적으로 트랜잭션을 처리</strong>하고, 완료 후 이벤트를 발행하여 다음 서비스에 흐름을 위임하는 방식.</p><p><strong>구성 방식</strong>:</p><table><thead><tr><th>구성 요소</th><th>설명</th></tr></thead><tbody><tr><td>Event Bus</td><td>모든 서비스가 이벤트를 발행하고 수신하는 채널 (예: Kafka)</td></tr><tr><td>서비스 간 이벤트 연결</td><td>Service A → <code>OrderPlaced</code> → Service B → <code>PaymentCompleted</code> 등</td></tr><tr><td>보상 트랜잭션</td><td>서비스는 실패 시 대응 이벤트 발행 (예: <code>PaymentFailed</code>)</td></tr></tbody></table><p><strong>특징</strong>:</p><table><thead><tr><th>항목</th><th>내용</th></tr></thead><tbody><tr><td>흐름 제어</td><td>서비스 간 <strong>이벤트 기반 흐름</strong></td></tr><tr><td>확장성</td><td><strong>높음</strong>–서비스가 느슨하게 결합되어 개별 확장이 용이함</td></tr><tr><td>복잡도</td><td><strong>낮음 (처음엔)</strong>–중앙 관리자가 없어 단순하나 이벤트 흐름이 많아지면 복잡해짐</td></tr><tr><td>디버깅/추적</td><td><strong>어려움</strong>–전체 흐름을 추적하려면 분산 트레이싱 필요</td></tr><tr><td>신뢰도 보장</td><td>보상 트랜잭션 실패 시 <strong>비정상 상태 발생 가능성 있음</strong>, 철저한 실패 보상 설계 필요</td></tr></tbody></table><p><strong>동작 흐름</strong>:</p><pre class=mermaid>sequenceDiagram
    participant OS as Order Service
    participant PS as Payment Service
    participant IS as Inventory Service
    participant ES as Event Store
    
    OS-&gt;&gt;ES: Order Created Event
    ES-&gt;&gt;PS: Trigger Payment
    PS-&gt;&gt;ES: Payment Processed Event
    ES-&gt;&gt;IS: Trigger Inventory Update
    IS-&gt;&gt;ES: Inventory Updated Event
    ES-&gt;&gt;OS: Order Completed Event
</pre><h5 id=오케스트레이션-orchestration>오케스트레이션 (Orchestration)<a hidden class=anchor aria-hidden=true href=#오케스트레이션-orchestration>#</a></h5><p><strong>중앙 오케스트레이터 서비스</strong>가 전체 트랜잭션 흐름을 제어하며, 각 마이크로서비스에게 명령 (Command) 을 보내고 상태를 관리하는 방식.</p><p><strong>구성 방식</strong>:</p><table><thead><tr><th>구성 요소</th><th>설명</th></tr></thead><tbody><tr><td>Orchestrator (중앙 조정자)</td><td>트랜잭션 흐름 정의, 상태 추적, 서비스 호출 및 예외 처리</td></tr><tr><td>참여 서비스 (Participants)</td><td>트랜잭션 단계별로 조정자의 명령에 따라 작업 수행, 완료 결과를 회신</td></tr><tr><td>보상 트랜잭션 호출</td><td>실패 시 오케스트레이터가 직접 보상 트랜잭션 호출 (예: <code>CancelPayment</code>)</td></tr></tbody></table><p><strong>특징</strong>:</p><table><thead><tr><th>항목</th><th>내용</th></tr></thead><tbody><tr><td>흐름 제어</td><td><strong>중앙화된 명령형 흐름</strong></td></tr><tr><td>확장성</td><td><strong>낮음</strong>–중앙 조정자가 병목이나 단일 장애점 (SPOF) 이 될 수 있음</td></tr><tr><td>복잡도</td><td><strong>높음 (처음엔 명확)</strong>–흐름이 명확하지만 조정자가 복잡해질 수 있음</td></tr><tr><td>디버깅/추적</td><td><strong>용이함</strong>–트랜잭션 흐름이 중앙에 집중되어 추적과 테스트가 쉬움</td></tr><tr><td>신뢰도 보장</td><td><strong>높음</strong>–조정자가 모든 단계와 예외를 인지하므로 처리 일관성 보장 용이</td></tr></tbody></table><p><strong>동작 흐름</strong>:</p><pre class=mermaid>sequenceDiagram
    participant C as Client
    participant SO as Saga Orchestrator
    participant OS as Order Service
    participant PS as Payment Service
    participant IS as Inventory Service
    
    C-&gt;&gt;SO: Create Order
    SO-&gt;&gt;OS: Create Order
    OS-&gt;&gt;SO: Order Created
    SO-&gt;&gt;PS: Process Payment
    PS-&gt;&gt;SO: Payment Processed
    SO-&gt;&gt;IS: Update Inventory
    IS-&gt;&gt;SO: Inventory Updated
    SO-&gt;&gt;C: Order Completed
</pre><h4 id=서킷-브레이커-패턴>서킷 브레이커 패턴<a hidden class=anchor aria-hidden=true href=#서킷-브레이커-패턴>#</a></h4><p><strong>서비스 안정성과 복원력 (Resilience)</strong> 이라는 목표를 가지고 있는 패턴으로, 외부 서비스나 시스템 호출에서 실패가 반복되면, <strong>일시적으로 요청을 차단</strong>하여 시스템 리소스를 보호하고 장애 전파를 막는 보호 장치를 만든다.</p><p><strong>목적</strong>:</p><ul><li>장애 서비스로의 <strong>지속적인 호출 방지</strong></li><li>전체 시스템의 <strong>연쇄 실패 (cascading failure) 차단</strong></li><li>일정 시간 후 재시도하여 <strong>회복 가능성 탐색</strong></li></ul><p><strong>핵심 구성 및 동작 흐름</strong>:</p><table><thead><tr><th>구성 요소</th><th>설명</th></tr></thead><tbody><tr><td>Closed 상태</td><td>정상 상태. 요청이 서비스로 전달됨</td></tr><tr><td>Open 상태</td><td>실패율 임계치를 넘으면 회로가 열림. 호출이 차단됨</td></tr><tr><td>Half-Open 상태</td><td>일정 시간 후 일부 요청을 재시도. 성공 시 Closed 로 회복, 실패 시 Open 유지</td></tr></tbody></table><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>[CLOSED] → 실패율 초과 → [OPEN] → 타이머 만료 → [HALF-OPEN]
</span></span><span class=line><span class=cl>→ 성공 → [CLOSED], 실패 → [OPEN]
</span></span></code></pre></td></tr></table></div></div><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><table><thead><tr><th><strong>분류</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>확장성 & 성능</strong></td><td>수평 확장성 (Scalability)</td><td>각 서비스 또는 노드를 개별적으로 확장할 수 있어 트래픽 증가에 유연하게 대응 가능</td></tr><tr><td></td><td>병렬 처리 성능 (Throughput)</td><td>작업을 분산시켜 병렬로 처리함으로써 전체 처리량 및 응답 속도 향상</td></tr><tr><td></td><td>지역 분산 처리</td><td>글로벌 배포 환경에서 사용자 가까운 노드에서 데이터 처리 가능 → 지연시간 최소화</td></tr><tr><td><strong>가용성 & 복원력</strong></td><td>고가용성 (Fault Tolerance)</td><td>일부 노드 장애가 전체 시스템에 영향을 주지 않으며 자동 복구 또는 장애 전환이 가능</td></tr><tr><td></td><td>장애 격리</td><td>마이크로서비스 단위로 분리되어 있어 하나의 장애가 전체 시스템에 영향을 미치지 않음</td></tr><tr><td></td><td>지속 운영성</td><td>시스템 일부 장애 상태에서도 나머지 서비스는 정상 운영 가능 → 서비스 연속성 보장</td></tr><tr><td><strong>운영 유연성</strong></td><td>기술 이질성 지원</td><td>서비스별로 가장 적합한 언어, 프레임워크, 데이터 저장소 등을 선택 가능</td></tr><tr><td></td><td>독립적 배포 및 릴리스</td><td>개별 서비스 단위로 배포할 수 있어 빠른 기능 출시 및 롤백 가능</td></tr><tr><td></td><td>리소스 최적화</td><td>마이크로서비스 단위로 필요한 리소스만 할당함으로써 전체 인프라 비용 최적화</td></tr><tr><td><strong>조직적 민첩성</strong></td><td>팀 자율성 (Team Autonomy)</td><td>서비스 소유 기반으로 팀별 책임 분산 및 독립 운영 가능</td></tr><tr><td></td><td>유지보수성 (Maintainability)</td><td>작고 명확한 도메인 단위의 서비스 분리로 인해 코드 이해도 및 테스트 용이성 증가</td></tr><tr><td></td><td>조직 유연성</td><td>기능 단위로 팀을 조직할 수 있어 <strong>DevOps 또는 도메인 중심 조직 구조</strong>에 적합</td></tr></tbody></table><h3 id=단점-및-문제점>단점 및 문제점<a hidden class=anchor aria-hidden=true href=#단점-및-문제점>#</a></h3><h4 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책 또는 대응 전략</th></tr></thead><tbody><tr><td>구조적 복잡성</td><td>시스템 복잡성 증가</td><td>서비스 수 증가 → 의존성·인터페이스 증가 → 설계 및 운영 난이도 상승</td><td>도메인 중심 분해, DevOps 문화 정착, 문서화 및 테스트 자동화</td></tr><tr><td>운영 복잡성</td><td>운영 오버헤드</td><td>모니터링, 배포, 로그 수집 등 관리 대상이 늘어남</td><td>통합 관측 체계 (Observability), 플랫폼 엔지니어링 도입</td></tr><tr><td>네트워크 비용</td><td>네트워크 의존성</td><td>서비스 간 통신 지연·오류 가능성 → 성능 저하, 장애 전파</td><td>서킷 브레이커, 타임아웃 설정, QoS, 비동기 메시지 기반 구조 설계</td></tr><tr><td>일관성 문제</td><td>데이터 일관성 보장 어려움</td><td>CAP 이론의 한계 → 분산 트랜잭션 (ACID) 구현 복잡</td><td>SAGA, 이벤트 소싱, 보상 트랜잭션, eventual consistency 설계</td></tr><tr><td>비용적 부담</td><td>인프라 및 운영비 증가</td><td>클러스터 수·모니터링 시스템·트래픽 증가에 따른 유지비용 증가</td><td>클라우드 오토스케일링, 캐시 도입, 데이터 압축 등 비용 최적화 전략</td></tr></tbody></table><h4 id=문제점>문제점<a hidden class=anchor aria-hidden=true href=#문제점>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단 방법</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>네트워크 장애</td><td>네트워크 파티션</td><td>네트워크 단절, 패킷 손실</td><td>서비스 중단, 데이터 불일치</td><td>네트워크 모니터링, 헬스 체크</td><td>이중화, Circuit Breaker, 장애 격리</td><td>Raft, 자동 우회, 데이터 재처리</td></tr><tr><td>데이터 문제</td><td>데이터 일관성 저하</td><td>복제 지연, 동시성 문제</td><td>잘못된 결과, 데이터 충돌</td><td>로그 분석, 검증 쿼리 실행</td><td>일관성 프로토콜 사용, 시간 동기화</td><td>Eventual Consistency, 분산 트랜잭션, Conflict Resolver</td></tr><tr><td>서비스 통신</td><td>서비스 간 통신 실패</td><td>서비스 다운, 연결 실패, 타임아웃</td><td>장애 전파, 성능 저하</td><td>분산 트레이싱, 상태 코드 로깅</td><td>서킷 브레이커, 비동기 통신, 재시도 전략</td><td>우아한 성능 저하 (Fail Soft), Backoff 전략</td></tr><tr><td>트랜잭션 관리</td><td>분산 트랜잭션 실패</td><td>서비스 중단, 중간 이벤트 유실</td><td>데이터 불일치, 처리 불완료</td><td>트랜잭션 로깅, 이벤트 추적 시스템</td><td>보상 트랜잭션 설계, Saga 상태 모니터링</td><td>SAGA, 이벤트 소싱, 중복 제거 로직 적용</td></tr><tr><td>서비스 탐색</td><td>서비스 디스커버리 실패</td><td>레지스트리 장애, 설정 오류, 네트워크 불안정</td><td>클라이언트 요청 실패</td><td>서비스 레지스트리 상태 모니터링, 오류 로그</td><td>다중 레지스트리 구성, 폴백 캐시 적용</td><td>로컬 캐시, 재시도, 폴백 (Fallback) 메커니즘 적용</td></tr><tr><td>연쇄 장애</td><td>Cascading Failure</td><td>서비스 간 강한 종속성 → 하나의 장애가 전체로 확산</td><td>전체 시스템 가용성 저하</td><td>분산 추적, 의존성 그래프 분석</td><td>Bulkhead 패턴, 의존성 분리, 타임아웃 설정</td><td>폴백 처리, 트래픽 제한, Fail Fast 로직</td></tr></tbody></table><h3 id=도전-과제>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제>#</a></h3><table><thead><tr><th><strong>범주</strong></th><th><strong>주요 도전 과제</strong></th><th><strong>원인</strong></th><th><strong>영향</strong></th><th><strong>해결 전략 및 기법</strong></th></tr></thead><tbody><tr><td><strong>운영 복잡도 증가</strong></td><td>Observability 부족</td><td>서비스 수 증가, 로그·이벤트의 분산</td><td>장애 원인 추적 어려움, 디버깅 비용 증가</td><td>OpenTelemetry, Grafana, Prometheus, 구조화 로그 및 중앙화된 모니터링 플랫폼 도입</td></tr><tr><td></td><td>버전·정책·배포 관리 복잡성</td><td>다양한 환경 및 서비스 간 버전 불일치</td><td>예기치 않은 충돌 및 배포 실패</td><td>GitOps, GitFlow, Canary/Rolling 배포 전략, Feature Flag 도입</td></tr><tr><td><strong>보안 취약성 확대</strong></td><td>인증/인가 관리</td><td>서비스 간 통신 증가, 외부 API 노출</td><td>API 악용, 내부 권한 오류, 데이터 유출 가능성</td><td>mTLS, OAuth2, API Gateway 인증 정책, Zero-Trust Security 모델 적용</td></tr><tr><td></td><td>데이터 전송 보안</td><td>미암호화 또는 잘못된 TLS 설정</td><td>데이터 유출, 중간자 공격 (MITM) 위험</td><td>TLS 1.2 이상 강제, 서비스 간 통신 암호화 및 암호화 키 관리</td></tr><tr><td><strong>데이터 정합성 문제</strong></td><td>트랜잭션 정합성 보장 어려움</td><td>각 서비스의 로컬 DB 사용, 분산 상태에서의 실패 처리</td><td>데이터 불일치, 복구 비용 증가</td><td>Saga Pattern (Orchestration/Choreography), Event Sourcing, Compensation Mechanism 도입</td></tr><tr><td></td><td>실시간 데이터 동기화</td><td>비동기 이벤트 기반 처리, Kafka 지연</td><td>stale data, 중복 처리</td><td>Exactly-once 처리 전략, Kafka replay 전략, 메시지 키 기반 처리 로직 강화</td></tr><tr><td><strong>장애 전파 위험</strong></td><td>연쇄 장애 (Cascading Failure)</td><td>동기 호출, 의존성 과다</td><td>한 서비스 실패가 전체 시스템 장애로 확산</td><td>Circuit Breaker, Bulkhead Pattern, Timeout, Retry, Rate Limiting 전략 적용</td></tr><tr><td></td><td>장애 탐지/복구 자동화 미흡</td><td>단편적인 로그, 메트릭 기반 모니터링</td><td>늦은 장애 대응, MTTR 증가</td><td>SLA 기반 알림 시스템, Auto-healing 시스템, Canary/Shadow Traffic Test 도입</td></tr><tr><td><strong>네트워크 제약</strong></td><td>지연 (latency) 및 파티셔닝 분리</td><td>글로벌 분산 환경, 불안정한 네트워크 경로</td><td>요청 타임아웃, 사용자 경험 저하</td><td>Regional Edge 처리, Adaptive Timeout, Network-aware Routing, QoS 적용</td></tr><tr><td></td><td>멀티클라우드 연동성 및 복잡도</td><td>클라우드 별 API 차이, 데이터 동기화 이슈</td><td>배포 자동화 실패, 관리 포인트 증가</td><td>IaC 기반 구성 자동화 (Terraform), Cross-Cloud Gateway, Service Mesh 로 통신 표준화 적용</td></tr><tr><td><strong>비용 및 효율성 관리</strong></td><td>리소스 낭비 및 인프라 비용 증가</td><td>스케일링 전략 부재, 과도한 중복 리소스 할당</td><td>ROI 감소, 운영 비용 증가</td><td>Serverless 부분 도입, Auto Scaling 정책, 비용 모니터링 및 최적화 도구 (FinOps, CloudWatch Billing) 활용</td></tr></tbody></table><h3 id=분류-기준에-따른-종류-및-유형>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형>#</a></h3><table><thead><tr><th>분류 기준</th><th>유형</th><th>특징 및 설명</th><th>적용 사례 / 비고</th></tr></thead><tbody><tr><td><strong>서비스 구조</strong></td><td><strong>Microservices</strong></td><td>도메인 기반의 경량 독립 서비스, 독립 배포 및 확장 용이</td><td>Netflix, Amazon</td></tr><tr><td></td><td><strong>Mini-services</strong></td><td>관련 기능을 묶은 중간 규모 서비스, MSA 와 Monolith 의 중간 단계</td><td>Spotify</td></tr><tr><td></td><td><strong>SOA (Service-Oriented)</strong></td><td>중앙화된 레지스트리 기반, 엔터프라이즈 통합 중심</td><td>전통적인 기업용 시스템</td></tr><tr><td><strong>구조 방식</strong></td><td><strong>Client-Server</strong></td><td>요청/응답 명확한 양방향 통신 구조</td><td>대부분의 웹 애플리케이션</td></tr><tr><td></td><td><strong>Peer-to-Peer (P2P)</strong></td><td>모든 노드가 동등하며 직접 연결</td><td>BitTorrent, 블록체인</td></tr><tr><td></td><td><strong>Multi-tier (n-Tier)</strong></td><td>Web / App / DB 등 계층 분리</td><td>전통적인 엔터프라이즈 웹 앱</td></tr><tr><td></td><td><strong>Service-oriented (SOA/MSA)</strong></td><td>서비스 단위로 기능 분리, 모듈화 기반</td><td>B2B 인터페이스 통합 등</td></tr><tr><td><strong>통신 방식</strong></td><td><strong>Synchronous</strong> (동기)</td><td>즉시 응답 필요, REST, gRPC 등</td><td>사용자 인증/결제 등 실시간 처리 요구 영역</td></tr><tr><td></td><td><strong>Asynchronous</strong> (비동기)</td><td>메시지 큐/브로커 기반, decoupling 구조</td><td>이벤트 처리, 알림 전파, 백오피스 처리</td></tr><tr><td><strong>통신 패턴</strong></td><td><strong>RPC / REST</strong></td><td>요청 - 응답 방식 API 중심, HTTP 기반 또는 바이너리 프로토콜 (gRPC) 사용</td><td>BFF, 내부 API 호출 등</td></tr><tr><td></td><td><strong>Event-driven / Pub-Sub</strong></td><td>이벤트 메시지를 통해 흐름 유도, 발행자 - 구독자 구조</td><td>Kafka, RabbitMQ 기반 이벤트 처리</td></tr><tr><td><strong>데이터 분산 방식</strong></td><td><strong>Shared-Nothing</strong></td><td>노드 간 자원 공유 없음, 독립 DB·캐시 구성, 수평 확장 용이</td><td>대부분의 클라우드 네이티브 서비스 구조</td></tr><tr><td></td><td><strong>Shared-Disk / Shared-DB</strong></td><td>하나의 스토리지를 여러 노드에서 공유, 고가용성 설정 필요</td><td>Oracle RAC, 초기 SOA 시스템</td></tr><tr><td><strong>일관성 모델</strong></td><td><strong>Strong Consistency</strong></td><td>모든 노드에 즉시 반영되는 강한 일관성 보장, 성능 저하 가능</td><td>금융, 재고관리 등 정합성이 중요한 시스템</td></tr><tr><td></td><td><strong>Eventual Consistency</strong></td><td>일정 시간 후 일관성 보장, 높은 가용성 확보 가능</td><td>대부분의 MSA, 메시지 기반 시스템</td></tr><tr><td><strong>배포 방식</strong></td><td><strong>Container-based</strong></td><td>Docker/Kubernetes 등 컨테이너 오케스트레이션 기반</td><td>대부분의 클라우드 네이티브 앱</td></tr><tr><td></td><td><strong>Serverless (FaaS)</strong></td><td>Function 단위 실행, 오토스케일 및 이벤트 기반 작동</td><td>AWS Lambda, Azure Functions</td></tr><tr><td><strong>데이터 관리 방식</strong></td><td><strong>Database per Service</strong></td><td>서비스별 독립 DB 운영, 서비스 장애 격리 및 자율성 보장</td><td>MSA 권장 전략</td></tr><tr><td></td><td><strong>Shared Database</strong></td><td>여러 서비스가 하나의 DB 공유, 빠른 개발 가능하나 서비스 간 결합도 높음</td><td>모놀리식 → MSA 전환 초기 단계</td></tr></tbody></table><h3 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>적용 분야</strong></th><th><strong>기술/도구 조합</strong></th><th><strong>주요 목적</strong></th><th><strong>기대 효과</strong></th></tr></thead><tbody><tr><td><strong>웹 & 글로벌 서비스</strong></td><td>대규모 웹 플랫폼, 글로벌 사용자 대응</td><td><code>Kubernetes</code> + <code>API Gateway</code> + <code>CDN</code> + <code>Service Mesh</code></td><td>수평 확장, 트래픽 관리, 글로벌 커버리지</td><td>고가용성, 저지연, 빠른 응답, 유연한 배포</td></tr><tr><td><strong>IoT & 센서 네트워크</strong></td><td>스마트 팩토리, 헬스케어, 실시간 센서</td><td><code>MQTT/Kafka</code> + <code>Edge Computing</code> + <code>Cloud Pub/Sub</code></td><td>실시간 수집 및 로컬 연산, 이벤트 스트리밍</td><td>실시간 데이터 처리, 로컬 분석, 네트워크 최적화</td></tr><tr><td><strong>금융 및 규제 산업</strong></td><td>금융 거래, 디지털 자산, KYC 시스템</td><td><code>Blockchain</code> + <code>OAuth</code> + <code>암호화 키 관리</code> + <code>RegTech</code></td><td>보안성 강화, 투명한 기록, 규제 대응</td><td>트랜잭션 추적성, 위변조 방지, 준법성 확보</td></tr><tr><td><strong>전자상거래 & 결제</strong></td><td>쇼핑몰, 마켓플레이스, 결제 시스템</td><td><code>API Gateway</code> + <code>Redis Cache</code> + <code>결제 게이트웨이</code> + <code>CDN</code></td><td>빠른 UX, 캐시 활용, 인증 처리</td><td>사용자 경험 향상, 부하 분산, 빠른 결제 응답 처리</td></tr><tr><td><strong>미디어 & 콘텐츠</strong></td><td>동영상 스트리밍, 음악 추천, 이미지 처리</td><td><code>CDN</code> + <code>트랜스코딩 서버</code> + <code>추천 엔진</code> + <code>ElasticSearch</code></td><td>대용량 미디어 분산 처리 및 개인화 추천</td><td>글로벌 동시 접속 대응, 개인화 UX, 트래픽 감소</td></tr><tr><td><strong>마이크로서비스 통합</strong></td><td>기업 시스템 전환, SaaS 플랫폼</td><td><code>API Gateway</code> + <code>Kafka/RabbitMQ</code> + <code>gRPC</code> + <code>Distributed DB</code></td><td>서비스 간 결합 해제, 비동기 연동, 독립 배포</td><td>장애 격리, 팀 자율성 강화, 서비스 재사용성 향상</td></tr><tr><td><strong>데이터 인프라</strong></td><td>대용량 DB, 글로벌 저장소, 실시간 분석</td><td><code>Cassandra</code> + <code>MongoDB</code> + <code>Replication</code> + <code>Sharding</code></td><td>분산 저장소 확장, 데이터 지역성 확보</td><td>지리적 지연 최소화, 일관성 조율, 고가용 데이터 처리</td></tr></tbody></table><h3 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h3><h4 id=사례-1-netflix-의-마이크로서비스-아키텍처>사례 1: Netflix 의 마이크로서비스 아키텍처<a hidden class=anchor aria-hidden=true href=#사례-1-netflix-의-마이크로서비스-아키텍처>#</a></h4><p>Netflix 는 분산 아키텍처의 대표적인 성공 사례로, 다음과 같은 시스템 구성을 가집니다:</p><p><strong>시스템 구성</strong>:</p><pre class=mermaid>graph TB
    subgraph &#34;사용자 인터페이스&#34;
        UI1[Web App]
        UI2[Mobile App]
        UI3[Smart TV App]
    end
    
    subgraph &#34;API Gateway Layer&#34;
        ZUL[Zuul Gateway]
    end
    
    subgraph &#34;마이크로서비스&#34;
        US[User Service]
        CS[Content Service]
        RS[Recommendation Service]
        PS[Playback Service]
        BS[Billing Service]
    end
    
    subgraph &#34;데이터 저장소&#34;
        CASS[(Cassandra)]
        ES[(Elasticsearch)]
        REDIS[(Redis)]
    end
    
    subgraph &#34;메시징&#34;
        KAFKA[Apache Kafka]
    end
    
    subgraph &#34;모니터링&#34;
        ATL[Atlas]
        TOUR[Tour]
    end
    
    UI1 --&gt; ZUL
    UI2 --&gt; ZUL
    UI3 --&gt; ZUL
    
    ZUL --&gt; US
    ZUL --&gt; CS
    ZUL --&gt; RS
    ZUL --&gt; PS
    ZUL --&gt; BS
    
    US --&gt; CASS
    CS --&gt; ES
    RS --&gt; REDIS
    
    US -.-&gt; KAFKA
    CS -.-&gt; KAFKA
    RS -.-&gt; KAFKA
    
    US -.-&gt; ATL
    CS -.-&gt; TOUR
</pre><p><strong>Workflow 분석</strong>:</p><ol><li><p><strong>사용자 요청 처리</strong>:</p><ul><li>클라이언트 앱에서 Zuul Gateway 를 통해 요청</li><li>Gateway 가 적절한 마이크로서비스로 라우팅</li></ul></li><li><p><strong>콘텐츠 추천 프로세스</strong>:</p><ul><li>User Service 에서 사용자 프로필 조회</li><li>Content Service 에서 이용 가능한 콘텐츠 확인</li><li>Recommendation Service 에서 개인화된 추천 생성</li></ul></li><li><p><strong>실시간 이벤트 처리</strong>:</p><ul><li>사용자 행동 데이터를 Kafka 를 통해 실시간 수집</li><li>추천 알고리즘과 콘텐츠 메타데이터 업데이트</li></ul></li></ol><p><strong>분산 아키텍처 활용의 차이점</strong>:</p><ul><li><strong>분산 아키텍처 적용 전</strong>:<ul><li>모놀리식 DVD 배송 시스템</li><li>단일 장애점으로 인한 서비스 중단 위험</li><li>기능 추가 시 전체 시스템 배포 필요</li></ul></li><li><strong>분산 아키텍처 적용 후</strong>:<ul><li>1000+ 마이크로서비스로 구성</li><li>일일 수억 건의 API 호출 처리</li><li>99.99% 가용성 달성</li><li>글로벌 확장과 지역별 최적화 가능</li></ul></li></ul><h4 id=사례-1-마이크로서비스-기반-글로벌-이커머스-플랫폼>사례 1: 마이크로서비스 기반 글로벌 이커머스 플랫폼<a hidden class=anchor aria-hidden=true href=#사례-1-마이크로서비스-기반-글로벌-이커머스-플랫폼>#</a></h4><p><strong>시스템 구성</strong>: 사용자 인터페이스, API Gateway(게이트웨이), 여러 마이크로서비스 (주문, 결제, 배송 등), 메시지 브로커, 분산 데이터베이스, 모니터링 시스템</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2>2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3>3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4>4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5>5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6>6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7>7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8>8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[사용자]
</span></span><span class=line><span class=cl>   |
</span></span><span class=line><span class=cl>[API Gateway]
</span></span><span class=line><span class=cl>   |
</span></span><span class=line><span class=cl>[주문 서비스] -- [메시지 브로커] -- [결제 서비스] -- [배송 서비스]
</span></span><span class=line><span class=cl>   |
</span></span><span class=line><span class=cl>[분산 데이터베이스]
</span></span><span class=line><span class=cl>   |
</span></span><span class=line><span class=cl>[모니터링/로깅 시스템]
</span></span></code></pre></td></tr></table></div></div><p><strong>워크플로우</strong>: 사용자가 주문 → API Gateway 가 요청 분배 → 주문/결제/배송 서비스가 비동기 메시지로 처리 → 데이터는 분산 DB 에 저장 → 장애 발생 시 자동 복구 및 트래픽 우회</p><p><strong>분산 아키텍처 적용 시</strong>: 장애 복원력, 글로벌 확장성, 서비스 독립성, 성능 극대화<br><strong>미적용 시</strong>: 단일 장애점 (SPOF), 확장성 한계, 장애 시 전체 서비스 중단</p><p><strong>구현 예시</strong>:</p><p>다음은 사가 패턴을 활용한 주문 처리 시스템의 구현 예시입니다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1>  1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2>  2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3>  3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4>  4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5>  5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6>  6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7>  7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8>  8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9>  9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10> 10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11> 11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12> 12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13> 13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14> 14</a>
</span><span class=lnt id=hl-8-15><a class=lnlinks href=#hl-8-15> 15</a>
</span><span class=lnt id=hl-8-16><a class=lnlinks href=#hl-8-16> 16</a>
</span><span class=lnt id=hl-8-17><a class=lnlinks href=#hl-8-17> 17</a>
</span><span class=lnt id=hl-8-18><a class=lnlinks href=#hl-8-18> 18</a>
</span><span class=lnt id=hl-8-19><a class=lnlinks href=#hl-8-19> 19</a>
</span><span class=lnt id=hl-8-20><a class=lnlinks href=#hl-8-20> 20</a>
</span><span class=lnt id=hl-8-21><a class=lnlinks href=#hl-8-21> 21</a>
</span><span class=lnt id=hl-8-22><a class=lnlinks href=#hl-8-22> 22</a>
</span><span class=lnt id=hl-8-23><a class=lnlinks href=#hl-8-23> 23</a>
</span><span class=lnt id=hl-8-24><a class=lnlinks href=#hl-8-24> 24</a>
</span><span class=lnt id=hl-8-25><a class=lnlinks href=#hl-8-25> 25</a>
</span><span class=lnt id=hl-8-26><a class=lnlinks href=#hl-8-26> 26</a>
</span><span class=lnt id=hl-8-27><a class=lnlinks href=#hl-8-27> 27</a>
</span><span class=lnt id=hl-8-28><a class=lnlinks href=#hl-8-28> 28</a>
</span><span class=lnt id=hl-8-29><a class=lnlinks href=#hl-8-29> 29</a>
</span><span class=lnt id=hl-8-30><a class=lnlinks href=#hl-8-30> 30</a>
</span><span class=lnt id=hl-8-31><a class=lnlinks href=#hl-8-31> 31</a>
</span><span class=lnt id=hl-8-32><a class=lnlinks href=#hl-8-32> 32</a>
</span><span class=lnt id=hl-8-33><a class=lnlinks href=#hl-8-33> 33</a>
</span><span class=lnt id=hl-8-34><a class=lnlinks href=#hl-8-34> 34</a>
</span><span class=lnt id=hl-8-35><a class=lnlinks href=#hl-8-35> 35</a>
</span><span class=lnt id=hl-8-36><a class=lnlinks href=#hl-8-36> 36</a>
</span><span class=lnt id=hl-8-37><a class=lnlinks href=#hl-8-37> 37</a>
</span><span class=lnt id=hl-8-38><a class=lnlinks href=#hl-8-38> 38</a>
</span><span class=lnt id=hl-8-39><a class=lnlinks href=#hl-8-39> 39</a>
</span><span class=lnt id=hl-8-40><a class=lnlinks href=#hl-8-40> 40</a>
</span><span class=lnt id=hl-8-41><a class=lnlinks href=#hl-8-41> 41</a>
</span><span class=lnt id=hl-8-42><a class=lnlinks href=#hl-8-42> 42</a>
</span><span class=lnt id=hl-8-43><a class=lnlinks href=#hl-8-43> 43</a>
</span><span class=lnt id=hl-8-44><a class=lnlinks href=#hl-8-44> 44</a>
</span><span class=lnt id=hl-8-45><a class=lnlinks href=#hl-8-45> 45</a>
</span><span class=lnt id=hl-8-46><a class=lnlinks href=#hl-8-46> 46</a>
</span><span class=lnt id=hl-8-47><a class=lnlinks href=#hl-8-47> 47</a>
</span><span class=lnt id=hl-8-48><a class=lnlinks href=#hl-8-48> 48</a>
</span><span class=lnt id=hl-8-49><a class=lnlinks href=#hl-8-49> 49</a>
</span><span class=lnt id=hl-8-50><a class=lnlinks href=#hl-8-50> 50</a>
</span><span class=lnt id=hl-8-51><a class=lnlinks href=#hl-8-51> 51</a>
</span><span class=lnt id=hl-8-52><a class=lnlinks href=#hl-8-52> 52</a>
</span><span class=lnt id=hl-8-53><a class=lnlinks href=#hl-8-53> 53</a>
</span><span class=lnt id=hl-8-54><a class=lnlinks href=#hl-8-54> 54</a>
</span><span class=lnt id=hl-8-55><a class=lnlinks href=#hl-8-55> 55</a>
</span><span class=lnt id=hl-8-56><a class=lnlinks href=#hl-8-56> 56</a>
</span><span class=lnt id=hl-8-57><a class=lnlinks href=#hl-8-57> 57</a>
</span><span class=lnt id=hl-8-58><a class=lnlinks href=#hl-8-58> 58</a>
</span><span class=lnt id=hl-8-59><a class=lnlinks href=#hl-8-59> 59</a>
</span><span class=lnt id=hl-8-60><a class=lnlinks href=#hl-8-60> 60</a>
</span><span class=lnt id=hl-8-61><a class=lnlinks href=#hl-8-61> 61</a>
</span><span class=lnt id=hl-8-62><a class=lnlinks href=#hl-8-62> 62</a>
</span><span class=lnt id=hl-8-63><a class=lnlinks href=#hl-8-63> 63</a>
</span><span class=lnt id=hl-8-64><a class=lnlinks href=#hl-8-64> 64</a>
</span><span class=lnt id=hl-8-65><a class=lnlinks href=#hl-8-65> 65</a>
</span><span class=lnt id=hl-8-66><a class=lnlinks href=#hl-8-66> 66</a>
</span><span class=lnt id=hl-8-67><a class=lnlinks href=#hl-8-67> 67</a>
</span><span class=lnt id=hl-8-68><a class=lnlinks href=#hl-8-68> 68</a>
</span><span class=lnt id=hl-8-69><a class=lnlinks href=#hl-8-69> 69</a>
</span><span class=lnt id=hl-8-70><a class=lnlinks href=#hl-8-70> 70</a>
</span><span class=lnt id=hl-8-71><a class=lnlinks href=#hl-8-71> 71</a>
</span><span class=lnt id=hl-8-72><a class=lnlinks href=#hl-8-72> 72</a>
</span><span class=lnt id=hl-8-73><a class=lnlinks href=#hl-8-73> 73</a>
</span><span class=lnt id=hl-8-74><a class=lnlinks href=#hl-8-74> 74</a>
</span><span class=lnt id=hl-8-75><a class=lnlinks href=#hl-8-75> 75</a>
</span><span class=lnt id=hl-8-76><a class=lnlinks href=#hl-8-76> 76</a>
</span><span class=lnt id=hl-8-77><a class=lnlinks href=#hl-8-77> 77</a>
</span><span class=lnt id=hl-8-78><a class=lnlinks href=#hl-8-78> 78</a>
</span><span class=lnt id=hl-8-79><a class=lnlinks href=#hl-8-79> 79</a>
</span><span class=lnt id=hl-8-80><a class=lnlinks href=#hl-8-80> 80</a>
</span><span class=lnt id=hl-8-81><a class=lnlinks href=#hl-8-81> 81</a>
</span><span class=lnt id=hl-8-82><a class=lnlinks href=#hl-8-82> 82</a>
</span><span class=lnt id=hl-8-83><a class=lnlinks href=#hl-8-83> 83</a>
</span><span class=lnt id=hl-8-84><a class=lnlinks href=#hl-8-84> 84</a>
</span><span class=lnt id=hl-8-85><a class=lnlinks href=#hl-8-85> 85</a>
</span><span class=lnt id=hl-8-86><a class=lnlinks href=#hl-8-86> 86</a>
</span><span class=lnt id=hl-8-87><a class=lnlinks href=#hl-8-87> 87</a>
</span><span class=lnt id=hl-8-88><a class=lnlinks href=#hl-8-88> 88</a>
</span><span class=lnt id=hl-8-89><a class=lnlinks href=#hl-8-89> 89</a>
</span><span class=lnt id=hl-8-90><a class=lnlinks href=#hl-8-90> 90</a>
</span><span class=lnt id=hl-8-91><a class=lnlinks href=#hl-8-91> 91</a>
</span><span class=lnt id=hl-8-92><a class=lnlinks href=#hl-8-92> 92</a>
</span><span class=lnt id=hl-8-93><a class=lnlinks href=#hl-8-93> 93</a>
</span><span class=lnt id=hl-8-94><a class=lnlinks href=#hl-8-94> 94</a>
</span><span class=lnt id=hl-8-95><a class=lnlinks href=#hl-8-95> 95</a>
</span><span class=lnt id=hl-8-96><a class=lnlinks href=#hl-8-96> 96</a>
</span><span class=lnt id=hl-8-97><a class=lnlinks href=#hl-8-97> 97</a>
</span><span class=lnt id=hl-8-98><a class=lnlinks href=#hl-8-98> 98</a>
</span><span class=lnt id=hl-8-99><a class=lnlinks href=#hl-8-99> 99</a>
</span><span class=lnt id=hl-8-100><a class=lnlinks href=#hl-8-100>100</a>
</span><span class=lnt id=hl-8-101><a class=lnlinks href=#hl-8-101>101</a>
</span><span class=lnt id=hl-8-102><a class=lnlinks href=#hl-8-102>102</a>
</span><span class=lnt id=hl-8-103><a class=lnlinks href=#hl-8-103>103</a>
</span><span class=lnt id=hl-8-104><a class=lnlinks href=#hl-8-104>104</a>
</span><span class=lnt id=hl-8-105><a class=lnlinks href=#hl-8-105>105</a>
</span><span class=lnt id=hl-8-106><a class=lnlinks href=#hl-8-106>106</a>
</span><span class=lnt id=hl-8-107><a class=lnlinks href=#hl-8-107>107</a>
</span><span class=lnt id=hl-8-108><a class=lnlinks href=#hl-8-108>108</a>
</span><span class=lnt id=hl-8-109><a class=lnlinks href=#hl-8-109>109</a>
</span><span class=lnt id=hl-8-110><a class=lnlinks href=#hl-8-110>110</a>
</span><span class=lnt id=hl-8-111><a class=lnlinks href=#hl-8-111>111</a>
</span><span class=lnt id=hl-8-112><a class=lnlinks href=#hl-8-112>112</a>
</span><span class=lnt id=hl-8-113><a class=lnlinks href=#hl-8-113>113</a>
</span><span class=lnt id=hl-8-114><a class=lnlinks href=#hl-8-114>114</a>
</span><span class=lnt id=hl-8-115><a class=lnlinks href=#hl-8-115>115</a>
</span><span class=lnt id=hl-8-116><a class=lnlinks href=#hl-8-116>116</a>
</span><span class=lnt id=hl-8-117><a class=lnlinks href=#hl-8-117>117</a>
</span><span class=lnt id=hl-8-118><a class=lnlinks href=#hl-8-118>118</a>
</span><span class=lnt id=hl-8-119><a class=lnlinks href=#hl-8-119>119</a>
</span><span class=lnt id=hl-8-120><a class=lnlinks href=#hl-8-120>120</a>
</span><span class=lnt id=hl-8-121><a class=lnlinks href=#hl-8-121>121</a>
</span><span class=lnt id=hl-8-122><a class=lnlinks href=#hl-8-122>122</a>
</span><span class=lnt id=hl-8-123><a class=lnlinks href=#hl-8-123>123</a>
</span><span class=lnt id=hl-8-124><a class=lnlinks href=#hl-8-124>124</a>
</span><span class=lnt id=hl-8-125><a class=lnlinks href=#hl-8-125>125</a>
</span><span class=lnt id=hl-8-126><a class=lnlinks href=#hl-8-126>126</a>
</span><span class=lnt id=hl-8-127><a class=lnlinks href=#hl-8-127>127</a>
</span><span class=lnt id=hl-8-128><a class=lnlinks href=#hl-8-128>128</a>
</span><span class=lnt id=hl-8-129><a class=lnlinks href=#hl-8-129>129</a>
</span><span class=lnt id=hl-8-130><a class=lnlinks href=#hl-8-130>130</a>
</span><span class=lnt id=hl-8-131><a class=lnlinks href=#hl-8-131>131</a>
</span><span class=lnt id=hl-8-132><a class=lnlinks href=#hl-8-132>132</a>
</span><span class=lnt id=hl-8-133><a class=lnlinks href=#hl-8-133>133</a>
</span><span class=lnt id=hl-8-134><a class=lnlinks href=#hl-8-134>134</a>
</span><span class=lnt id=hl-8-135><a class=lnlinks href=#hl-8-135>135</a>
</span><span class=lnt id=hl-8-136><a class=lnlinks href=#hl-8-136>136</a>
</span><span class=lnt id=hl-8-137><a class=lnlinks href=#hl-8-137>137</a>
</span><span class=lnt id=hl-8-138><a class=lnlinks href=#hl-8-138>138</a>
</span><span class=lnt id=hl-8-139><a class=lnlinks href=#hl-8-139>139</a>
</span><span class=lnt id=hl-8-140><a class=lnlinks href=#hl-8-140>140</a>
</span><span class=lnt id=hl-8-141><a class=lnlinks href=#hl-8-141>141</a>
</span><span class=lnt id=hl-8-142><a class=lnlinks href=#hl-8-142>142</a>
</span><span class=lnt id=hl-8-143><a class=lnlinks href=#hl-8-143>143</a>
</span><span class=lnt id=hl-8-144><a class=lnlinks href=#hl-8-144>144</a>
</span><span class=lnt id=hl-8-145><a class=lnlinks href=#hl-8-145>145</a>
</span><span class=lnt id=hl-8-146><a class=lnlinks href=#hl-8-146>146</a>
</span><span class=lnt id=hl-8-147><a class=lnlinks href=#hl-8-147>147</a>
</span><span class=lnt id=hl-8-148><a class=lnlinks href=#hl-8-148>148</a>
</span><span class=lnt id=hl-8-149><a class=lnlinks href=#hl-8-149>149</a>
</span><span class=lnt id=hl-8-150><a class=lnlinks href=#hl-8-150>150</a>
</span><span class=lnt id=hl-8-151><a class=lnlinks href=#hl-8-151>151</a>
</span><span class=lnt id=hl-8-152><a class=lnlinks href=#hl-8-152>152</a>
</span><span class=lnt id=hl-8-153><a class=lnlinks href=#hl-8-153>153</a>
</span><span class=lnt id=hl-8-154><a class=lnlinks href=#hl-8-154>154</a>
</span><span class=lnt id=hl-8-155><a class=lnlinks href=#hl-8-155>155</a>
</span><span class=lnt id=hl-8-156><a class=lnlinks href=#hl-8-156>156</a>
</span><span class=lnt id=hl-8-157><a class=lnlinks href=#hl-8-157>157</a>
</span><span class=lnt id=hl-8-158><a class=lnlinks href=#hl-8-158>158</a>
</span><span class=lnt id=hl-8-159><a class=lnlinks href=#hl-8-159>159</a>
</span><span class=lnt id=hl-8-160><a class=lnlinks href=#hl-8-160>160</a>
</span><span class=lnt id=hl-8-161><a class=lnlinks href=#hl-8-161>161</a>
</span><span class=lnt id=hl-8-162><a class=lnlinks href=#hl-8-162>162</a>
</span><span class=lnt id=hl-8-163><a class=lnlinks href=#hl-8-163>163</a>
</span><span class=lnt id=hl-8-164><a class=lnlinks href=#hl-8-164>164</a>
</span><span class=lnt id=hl-8-165><a class=lnlinks href=#hl-8-165>165</a>
</span><span class=lnt id=hl-8-166><a class=lnlinks href=#hl-8-166>166</a>
</span><span class=lnt id=hl-8-167><a class=lnlinks href=#hl-8-167>167</a>
</span><span class=lnt id=hl-8-168><a class=lnlinks href=#hl-8-168>168</a>
</span><span class=lnt id=hl-8-169><a class=lnlinks href=#hl-8-169>169</a>
</span><span class=lnt id=hl-8-170><a class=lnlinks href=#hl-8-170>170</a>
</span><span class=lnt id=hl-8-171><a class=lnlinks href=#hl-8-171>171</a>
</span><span class=lnt id=hl-8-172><a class=lnlinks href=#hl-8-172>172</a>
</span><span class=lnt id=hl-8-173><a class=lnlinks href=#hl-8-173>173</a>
</span><span class=lnt id=hl-8-174><a class=lnlinks href=#hl-8-174>174</a>
</span><span class=lnt id=hl-8-175><a class=lnlinks href=#hl-8-175>175</a>
</span><span class=lnt id=hl-8-176><a class=lnlinks href=#hl-8-176>176</a>
</span><span class=lnt id=hl-8-177><a class=lnlinks href=#hl-8-177>177</a>
</span><span class=lnt id=hl-8-178><a class=lnlinks href=#hl-8-178>178</a>
</span><span class=lnt id=hl-8-179><a class=lnlinks href=#hl-8-179>179</a>
</span><span class=lnt id=hl-8-180><a class=lnlinks href=#hl-8-180>180</a>
</span><span class=lnt id=hl-8-181><a class=lnlinks href=#hl-8-181>181</a>
</span><span class=lnt id=hl-8-182><a class=lnlinks href=#hl-8-182>182</a>
</span><span class=lnt id=hl-8-183><a class=lnlinks href=#hl-8-183>183</a>
</span><span class=lnt id=hl-8-184><a class=lnlinks href=#hl-8-184>184</a>
</span><span class=lnt id=hl-8-185><a class=lnlinks href=#hl-8-185>185</a>
</span><span class=lnt id=hl-8-186><a class=lnlinks href=#hl-8-186>186</a>
</span><span class=lnt id=hl-8-187><a class=lnlinks href=#hl-8-187>187</a>
</span><span class=lnt id=hl-8-188><a class=lnlinks href=#hl-8-188>188</a>
</span><span class=lnt id=hl-8-189><a class=lnlinks href=#hl-8-189>189</a>
</span><span class=lnt id=hl-8-190><a class=lnlinks href=#hl-8-190>190</a>
</span><span class=lnt id=hl-8-191><a class=lnlinks href=#hl-8-191>191</a>
</span><span class=lnt id=hl-8-192><a class=lnlinks href=#hl-8-192>192</a>
</span><span class=lnt id=hl-8-193><a class=lnlinks href=#hl-8-193>193</a>
</span><span class=lnt id=hl-8-194><a class=lnlinks href=#hl-8-194>194</a>
</span><span class=lnt id=hl-8-195><a class=lnlinks href=#hl-8-195>195</a>
</span><span class=lnt id=hl-8-196><a class=lnlinks href=#hl-8-196>196</a>
</span><span class=lnt id=hl-8-197><a class=lnlinks href=#hl-8-197>197</a>
</span><span class=lnt id=hl-8-198><a class=lnlinks href=#hl-8-198>198</a>
</span><span class=lnt id=hl-8-199><a class=lnlinks href=#hl-8-199>199</a>
</span><span class=lnt id=hl-8-200><a class=lnlinks href=#hl-8-200>200</a>
</span><span class=lnt id=hl-8-201><a class=lnlinks href=#hl-8-201>201</a>
</span><span class=lnt id=hl-8-202><a class=lnlinks href=#hl-8-202>202</a>
</span><span class=lnt id=hl-8-203><a class=lnlinks href=#hl-8-203>203</a>
</span><span class=lnt id=hl-8-204><a class=lnlinks href=#hl-8-204>204</a>
</span><span class=lnt id=hl-8-205><a class=lnlinks href=#hl-8-205>205</a>
</span><span class=lnt id=hl-8-206><a class=lnlinks href=#hl-8-206>206</a>
</span><span class=lnt id=hl-8-207><a class=lnlinks href=#hl-8-207>207</a>
</span><span class=lnt id=hl-8-208><a class=lnlinks href=#hl-8-208>208</a>
</span><span class=lnt id=hl-8-209><a class=lnlinks href=#hl-8-209>209</a>
</span><span class=lnt id=hl-8-210><a class=lnlinks href=#hl-8-210>210</a>
</span><span class=lnt id=hl-8-211><a class=lnlinks href=#hl-8-211>211</a>
</span><span class=lnt id=hl-8-212><a class=lnlinks href=#hl-8-212>212</a>
</span><span class=lnt id=hl-8-213><a class=lnlinks href=#hl-8-213>213</a>
</span><span class=lnt id=hl-8-214><a class=lnlinks href=#hl-8-214>214</a>
</span><span class=lnt id=hl-8-215><a class=lnlinks href=#hl-8-215>215</a>
</span><span class=lnt id=hl-8-216><a class=lnlinks href=#hl-8-216>216</a>
</span><span class=lnt id=hl-8-217><a class=lnlinks href=#hl-8-217>217</a>
</span><span class=lnt id=hl-8-218><a class=lnlinks href=#hl-8-218>218</a>
</span><span class=lnt id=hl-8-219><a class=lnlinks href=#hl-8-219>219</a>
</span><span class=lnt id=hl-8-220><a class=lnlinks href=#hl-8-220>220</a>
</span><span class=lnt id=hl-8-221><a class=lnlinks href=#hl-8-221>221</a>
</span><span class=lnt id=hl-8-222><a class=lnlinks href=#hl-8-222>222</a>
</span><span class=lnt id=hl-8-223><a class=lnlinks href=#hl-8-223>223</a>
</span><span class=lnt id=hl-8-224><a class=lnlinks href=#hl-8-224>224</a>
</span><span class=lnt id=hl-8-225><a class=lnlinks href=#hl-8-225>225</a>
</span><span class=lnt id=hl-8-226><a class=lnlinks href=#hl-8-226>226</a>
</span><span class=lnt id=hl-8-227><a class=lnlinks href=#hl-8-227>227</a>
</span><span class=lnt id=hl-8-228><a class=lnlinks href=#hl-8-228>228</a>
</span><span class=lnt id=hl-8-229><a class=lnlinks href=#hl-8-229>229</a>
</span><span class=lnt id=hl-8-230><a class=lnlinks href=#hl-8-230>230</a>
</span><span class=lnt id=hl-8-231><a class=lnlinks href=#hl-8-231>231</a>
</span><span class=lnt id=hl-8-232><a class=lnlinks href=#hl-8-232>232</a>
</span><span class=lnt id=hl-8-233><a class=lnlinks href=#hl-8-233>233</a>
</span><span class=lnt id=hl-8-234><a class=lnlinks href=#hl-8-234>234</a>
</span><span class=lnt id=hl-8-235><a class=lnlinks href=#hl-8-235>235</a>
</span><span class=lnt id=hl-8-236><a class=lnlinks href=#hl-8-236>236</a>
</span><span class=lnt id=hl-8-237><a class=lnlinks href=#hl-8-237>237</a>
</span><span class=lnt id=hl-8-238><a class=lnlinks href=#hl-8-238>238</a>
</span><span class=lnt id=hl-8-239><a class=lnlinks href=#hl-8-239>239</a>
</span><span class=lnt id=hl-8-240><a class=lnlinks href=#hl-8-240>240</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># saga_orchestrator.py</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>enum</span> <span class=kn>import</span> <span class=n>Enum</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>List</span><span class=p>,</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SagaState</span><span class=p>(</span><span class=n>Enum</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;사가 상태 정의&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>STARTED</span> <span class=o>=</span> <span class=s2>&#34;started&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>ORDER_CREATED</span> <span class=o>=</span> <span class=s2>&#34;order_created&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>PAYMENT_PROCESSED</span> <span class=o>=</span> <span class=s2>&#34;payment_processed&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>INVENTORY_RESERVED</span> <span class=o>=</span> <span class=s2>&#34;inventory_reserved&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>COMPLETED</span> <span class=o>=</span> <span class=s2>&#34;completed&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>FAILED</span> <span class=o>=</span> <span class=s2>&#34;failed&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>COMPENSATING</span> <span class=o>=</span> <span class=s2>&#34;compensating&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>COMPENSATED</span> <span class=o>=</span> <span class=s2>&#34;compensated&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SagaStep</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;사가 단계 정의&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>service_name</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>action</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>compensate_action</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>payload</span><span class=p>:</span> <span class=n>Dict</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SagaOrchestrator</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;사가 오케스트레이터 - 분산 트랜잭션 조정&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>saga_logs</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Dict</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># 사가 로그 저장소</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>service_clients</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;order&#39;</span><span class=p>:</span> <span class=n>OrderServiceClient</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;payment&#39;</span><span class=p>:</span> <span class=n>PaymentServiceClient</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;inventory&#39;</span><span class=p>:</span> <span class=n>InventoryServiceClient</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>execute_saga</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>saga_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>steps</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>SagaStep</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        사가 실행 메인 로직
</span></span></span><span class=line><span class=cl><span class=s2>        - 각 단계를 순차적으로 실행
</span></span></span><span class=line><span class=cl><span class=s2>        - 실패 시 보상 트랜잭션 수행
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 사가 로그 초기화</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>saga_logs</span><span class=p>[</span><span class=n>saga_id</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;state&#39;</span><span class=p>:</span> <span class=n>SagaState</span><span class=o>.</span><span class=n>STARTED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;completed_steps&#39;</span><span class=p>:</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;current_step&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;steps&#39;</span><span class=p>:</span> <span class=n>steps</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 각 단계 순차 실행</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>step</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>steps</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>saga_logs</span><span class=p>[</span><span class=n>saga_id</span><span class=p>][</span><span class=s1>&#39;current_step&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>i</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;사가 </span><span class=si>{</span><span class=n>saga_id</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>step</span><span class=o>.</span><span class=n>service_name</span><span class=si>}</span><span class=s2>.</span><span class=si>{</span><span class=n>step</span><span class=o>.</span><span class=n>action</span><span class=si>}</span><span class=s2> 실행 중…&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1># 서비스 호출</span>
</span></span><span class=line><span class=cl>                <span class=n>client</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>service_clients</span><span class=p>[</span><span class=n>step</span><span class=o>.</span><span class=n>service_name</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=n>client</span><span class=o>.</span><span class=n>execute_action</span><span class=p>(</span><span class=n>step</span><span class=o>.</span><span class=n>action</span><span class=p>,</span> <span class=n>step</span><span class=o>.</span><span class=n>payload</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=ow>not</span> <span class=n>result</span><span class=p>[</span><span class=s1>&#39;success&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                    <span class=c1># 실패 시 보상 트랜잭션 시작</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;사가 </span><span class=si>{</span><span class=n>saga_id</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>step</span><span class=o>.</span><span class=n>service_name</span><span class=si>}</span><span class=s2>.</span><span class=si>{</span><span class=n>step</span><span class=o>.</span><span class=n>action</span><span class=si>}</span><span class=s2> 실패&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_execute_compensation</span><span class=p>(</span><span class=n>saga_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1># 성공한 단계 기록</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>saga_logs</span><span class=p>[</span><span class=n>saga_id</span><span class=p>][</span><span class=s1>&#39;completed_steps&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;step&#39;</span><span class=p>:</span> <span class=n>step</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;result&#39;</span><span class=p>:</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>                <span class=p>})</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;사가 </span><span class=si>{</span><span class=n>saga_id</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>step</span><span class=o>.</span><span class=n>service_name</span><span class=si>}</span><span class=s2>.</span><span class=si>{</span><span class=n>step</span><span class=o>.</span><span class=n>action</span><span class=si>}</span><span class=s2> 성공&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 모든 단계 성공</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>saga_logs</span><span class=p>[</span><span class=n>saga_id</span><span class=p>][</span><span class=s1>&#39;state&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>SagaState</span><span class=o>.</span><span class=n>COMPLETED</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;사가 </span><span class=si>{</span><span class=n>saga_id</span><span class=si>}</span><span class=s2>: 완료&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;사가 </span><span class=si>{</span><span class=n>saga_id</span><span class=si>}</span><span class=s2>: 예외 발생 - </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_execute_compensation</span><span class=p>(</span><span class=n>saga_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>_execute_compensation</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>saga_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        보상 트랜잭션 실행
</span></span></span><span class=line><span class=cl><span class=s2>        - 완료된 단계들을 역순으로 보상
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>saga_logs</span><span class=p>[</span><span class=n>saga_id</span><span class=p>][</span><span class=s1>&#39;state&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>SagaState</span><span class=o>.</span><span class=n>COMPENSATING</span>
</span></span><span class=line><span class=cl>        <span class=n>completed_steps</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>saga_logs</span><span class=p>[</span><span class=n>saga_id</span><span class=p>][</span><span class=s1>&#39;completed_steps&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 역순으로 보상 실행</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>step_info</span> <span class=ow>in</span> <span class=nb>reversed</span><span class=p>(</span><span class=n>completed_steps</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>step</span> <span class=o>=</span> <span class=n>step_info</span><span class=p>[</span><span class=s1>&#39;step&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;사가 </span><span class=si>{</span><span class=n>saga_id</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>step</span><span class=o>.</span><span class=n>service_name</span><span class=si>}</span><span class=s2>.</span><span class=si>{</span><span class=n>step</span><span class=o>.</span><span class=n>compensate_action</span><span class=si>}</span><span class=s2> 보상 실행 중…&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>client</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>service_clients</span><span class=p>[</span><span class=n>step</span><span class=o>.</span><span class=n>service_name</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=n>client</span><span class=o>.</span><span class=n>execute_action</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>step</span><span class=o>.</span><span class=n>compensate_action</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                    <span class=n>step</span><span class=o>.</span><span class=n>payload</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>result</span><span class=p>[</span><span class=s1>&#39;success&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;사가 </span><span class=si>{</span><span class=n>saga_id</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>step</span><span class=o>.</span><span class=n>service_name</span><span class=si>}</span><span class=s2>.</span><span class=si>{</span><span class=n>step</span><span class=o>.</span><span class=n>compensate_action</span><span class=si>}</span><span class=s2> 보상 성공&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;사가 </span><span class=si>{</span><span class=n>saga_id</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>step</span><span class=o>.</span><span class=n>service_name</span><span class=si>}</span><span class=s2>.</span><span class=si>{</span><span class=n>step</span><span class=o>.</span><span class=n>compensate_action</span><span class=si>}</span><span class=s2> 보상 실패&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;사가 </span><span class=si>{</span><span class=n>saga_id</span><span class=si>}</span><span class=s2>: 보상 중 예외 발생 - </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>saga_logs</span><span class=p>[</span><span class=n>saga_id</span><span class=p>][</span><span class=s1>&#39;state&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>SagaState</span><span class=o>.</span><span class=n>COMPENSATED</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderServiceClient</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 서비스 클라이언트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>execute_action</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>action</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>payload</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 서비스 액션 실행&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>action</span> <span class=o>==</span> <span class=s2>&#34;create_order&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 주문 생성 로직 시뮬레이션</span>
</span></span><span class=line><span class=cl>            <span class=n>order_id</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;order_</span><span class=si>{</span><span class=n>payload</span><span class=p>[</span><span class=s1>&#39;user_id&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>_</span><span class=si>{</span><span class=n>payload</span><span class=p>[</span><span class=s1>&#39;product_id&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  주문 생성: </span><span class=si>{</span><span class=n>order_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span> <span class=s2>&#34;order_id&#34;</span><span class=p>:</span> <span class=n>order_id</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>action</span> <span class=o>==</span> <span class=s2>&#34;cancel_order&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 주문 취소 로직 시뮬레이션</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  주문 취소: </span><span class=si>{</span><span class=n>payload</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;order_id&#39;</span><span class=p>,</span> <span class=s1>&#39;unknown&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>True</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span> <span class=s2>&#34;error&#34;</span><span class=p>:</span> <span class=s2>&#34;Unknown action&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PaymentServiceClient</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;결제 서비스 클라이언트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>execute_action</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>action</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>payload</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;결제 서비스 액션 실행&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>action</span> <span class=o>==</span> <span class=s2>&#34;process_payment&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 결제 처리 로직 시뮬레이션</span>
</span></span><span class=line><span class=cl>            <span class=n>amount</span> <span class=o>=</span> <span class=n>payload</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;amount&#39;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>amount</span> <span class=o>&gt;</span> <span class=mi>1000</span><span class=p>:</span>  <span class=c1># 고액 결제 실패 시뮬레이션</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span> <span class=s2>&#34;error&#34;</span><span class=p>:</span> <span class=s2>&#34;Payment failed&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>payment_id</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;payment_</span><span class=si>{</span><span class=n>payload</span><span class=p>[</span><span class=s1>&#39;user_id&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>_</span><span class=si>{</span><span class=n>amount</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  결제 처리: </span><span class=si>{</span><span class=n>payment_id</span><span class=si>}</span><span class=s2>, 금액: $</span><span class=si>{</span><span class=n>amount</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span> <span class=s2>&#34;payment_id&#34;</span><span class=p>:</span> <span class=n>payment_id</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>action</span> <span class=o>==</span> <span class=s2>&#34;refund_payment&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 환불 처리 로직 시뮬레이션</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  결제 환불: </span><span class=si>{</span><span class=n>payload</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;payment_id&#39;</span><span class=p>,</span> <span class=s1>&#39;unknown&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>True</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span> <span class=s2>&#34;error&#34;</span><span class=p>:</span> <span class=s2>&#34;Unknown action&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>InventoryServiceClient</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;재고 서비스 클라이언트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>execute_action</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>action</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>payload</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;재고 서비스 액션 실행&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>action</span> <span class=o>==</span> <span class=s2>&#34;reserve_inventory&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 재고 예약 로직 시뮬레이션</span>
</span></span><span class=line><span class=cl>            <span class=n>product_id</span> <span class=o>=</span> <span class=n>payload</span><span class=p>[</span><span class=s1>&#39;product_id&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>quantity</span> <span class=o>=</span> <span class=n>payload</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;quantity&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 재고 부족 시뮬레이션 (product_id가 &#39;out_of_stock&#39;인 경우)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>product_id</span> <span class=o>==</span> <span class=s1>&#39;out_of_stock&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span> <span class=s2>&#34;error&#34;</span><span class=p>:</span> <span class=s2>&#34;Out of stock&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  재고 예약: 상품 </span><span class=si>{</span><span class=n>product_id</span><span class=si>}</span><span class=s2>, 수량: </span><span class=si>{</span><span class=n>quantity</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span> <span class=s2>&#34;reservation_id&#34;</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&#34;res_</span><span class=si>{</span><span class=n>product_id</span><span class=si>}</span><span class=s2>_</span><span class=si>{</span><span class=n>quantity</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>action</span> <span class=o>==</span> <span class=s2>&#34;release_inventory&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 재고 해제 로직 시뮬레이션</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  재고 해제: </span><span class=si>{</span><span class=n>payload</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;reservation_id&#39;</span><span class=p>,</span> <span class=s1>&#39;unknown&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>True</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span> <span class=s2>&#34;error&#34;</span><span class=p>:</span> <span class=s2>&#34;Unknown action&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;분산 아키텍처 사가 패턴 사용 예시&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>orchestrator</span> <span class=o>=</span> <span class=n>SagaOrchestrator</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 주문 처리 사가 정의</span>
</span></span><span class=line><span class=cl>    <span class=n>order_saga_steps</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=n>SagaStep</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>service_name</span><span class=o>=</span><span class=s1>&#39;order&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>action</span><span class=o>=</span><span class=s1>&#39;create_order&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>compensate_action</span><span class=o>=</span><span class=s1>&#39;cancel_order&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>payload</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;user_id&#39;</span><span class=p>:</span> <span class=s1>&#39;user_123&#39;</span><span class=p>,</span> <span class=s1>&#39;product_id&#39;</span><span class=p>:</span> <span class=s1>&#39;product_456&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>SagaStep</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>service_name</span><span class=o>=</span><span class=s1>&#39;payment&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>action</span><span class=o>=</span><span class=s1>&#39;process_payment&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>compensate_action</span><span class=o>=</span><span class=s1>&#39;refund_payment&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>payload</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;user_id&#39;</span><span class=p>:</span> <span class=s1>&#39;user_123&#39;</span><span class=p>,</span> <span class=s1>&#39;amount&#39;</span><span class=p>:</span> <span class=mi>500</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>SagaStep</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>service_name</span><span class=o>=</span><span class=s1>&#39;inventory&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>action</span><span class=o>=</span><span class=s1>&#39;reserve_inventory&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>compensate_action</span><span class=o>=</span><span class=s1>&#39;release_inventory&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>payload</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;product_id&#39;</span><span class=p>:</span> <span class=s1>&#39;product_456&#39;</span><span class=p>,</span> <span class=s1>&#39;quantity&#39;</span><span class=p>:</span> <span class=mi>1</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=== 성공 케이스: 정상 주문 처리 ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>success</span> <span class=o>=</span> <span class=k>await</span> <span class=n>orchestrator</span><span class=o>.</span><span class=n>execute_saga</span><span class=p>(</span><span class=s2>&#34;saga_001&#34;</span><span class=p>,</span> <span class=n>order_saga_steps</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;사가 결과: </span><span class=si>{</span><span class=s1>&#39;성공&#39;</span> <span class=k>if</span> <span class=n>success</span> <span class=k>else</span> <span class=s1>&#39;실패&#39;</span><span class=si>}</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 실패 케이스: 고액 결제 실패</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=== 실패 케이스: 고액 결제 실패 ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>fail_saga_steps</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=n>SagaStep</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>service_name</span><span class=o>=</span><span class=s1>&#39;order&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>action</span><span class=o>=</span><span class=s1>&#39;create_order&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>compensate_action</span><span class=o>=</span><span class=s1>&#39;cancel_order&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>payload</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;user_id&#39;</span><span class=p>:</span> <span class=s1>&#39;user_456&#39;</span><span class=p>,</span> <span class=s1>&#39;product_id&#39;</span><span class=p>:</span> <span class=s1>&#39;product_789&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>SagaStep</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>service_name</span><span class=o>=</span><span class=s1>&#39;payment&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>action</span><span class=o>=</span><span class=s1>&#39;process_payment&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>compensate_action</span><span class=o>=</span><span class=s1>&#39;refund_payment&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>payload</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;user_id&#39;</span><span class=p>:</span> <span class=s1>&#39;user_456&#39;</span><span class=p>,</span> <span class=s1>&#39;amount&#39;</span><span class=p>:</span> <span class=mi>1500</span><span class=p>}</span>  <span class=c1># 고액으로 실패 유발</span>
</span></span><span class=line><span class=cl>        <span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>SagaStep</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>service_name</span><span class=o>=</span><span class=s1>&#39;inventory&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>action</span><span class=o>=</span><span class=s1>&#39;reserve_inventory&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>compensate_action</span><span class=o>=</span><span class=s1>&#39;release_inventory&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>payload</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;product_id&#39;</span><span class=p>:</span> <span class=s1>&#39;product_789&#39;</span><span class=p>,</span> <span class=s1>&#39;quantity&#39;</span><span class=p>:</span> <span class=mi>1</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>success</span> <span class=o>=</span> <span class=k>await</span> <span class=n>orchestrator</span><span class=o>.</span><span class=n>execute_saga</span><span class=p>(</span><span class=s2>&#34;saga_002&#34;</span><span class=p>,</span> <span class=n>fail_saga_steps</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;사가 결과: </span><span class=si>{</span><span class=s1>&#39;성공&#39;</span> <span class=k>if</span> <span class=n>success</span> <span class=k>else</span> <span class=s1>&#39;실패&#39;</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><p>이 구현 예시는 다음과 같은 분산 아키텍처의 핵심 개념을 보여준다:</p><ol><li><strong>사가 오케스트레이션</strong>: 중앙 집중식 트랜잭션 관리</li><li><strong>서비스 간 통신</strong>: 독립적인 서비스 클라이언트를 통한 호출</li><li><strong>보상 트랜잭션</strong>: 실패 시 이전 상태로 복구</li><li><strong>상태 관리</strong>: 사가 진행 상황과 로그 추적</li></ol><h3 id=실무에서-효과적으로-적용하기-위한-고려사항>실무에서 효과적으로 적용하기 위한 고려사항<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항>#</a></h3><table><thead><tr><th>핵심 영역</th><th>세부 항목</th><th>설명</th><th>권장 전략 / 솔루션</th></tr></thead><tbody><tr><td><strong>서비스 설계</strong></td><td>서비스 경계 설정</td><td>도메인 중심의 경계 정의 실패 시 서비스 간 의존성 증가 및 중복 발생</td><td>DDD 기반 바운디드 컨텍스트 (Bounded Context), 단일 책임 원칙 (SRP) 적용</td></tr><tr><td></td><td>API 계약 관리</td><td>API 버전 충돌, 인터페이스 불안정으로 인해 서비스 간 연동 오류 발생 가능</td><td>OpenAPI 기반 문서화, API 버저닝 전략, Consumer-Driven Contract Testing 적용</td></tr><tr><td><strong>데이터 관리</strong></td><td>데이터 일관성</td><td>분산 환경에서는 ACID 보장이 어려워 eventual consistency 수용 필요</td><td>SAGA 패턴, 보상 트랜잭션 설계, CQRS, Event Sourcing, 데이터 샤딩 및 파티셔닝 전략</td></tr><tr><td></td><td>데이터 모델 관리</td><td>스키마 버전 충돌, 샤딩 오류 시 데이터 정합성 이슈 발생</td><td>스키마 진화 (Schema Evolution), 파티션 키 설계, JSON/Avro 기반 유연한 모델링</td></tr><tr><td><strong>통신 구조</strong></td><td>동기 vs 비동기 통신 선택</td><td>동기 호출이 많을수록 시스템 지연 및 장애 전파 확률 증가</td><td>비동기 메시징 선호, Kafka/RabbitMQ 기반 Event-Driven 설계, gRPC timeout 설정</td></tr><tr><td></td><td>장애 감지 및 복원</td><td>종속 서비스 장애 시 연쇄 장애 발생 가능</td><td>Circuit Breaker, Retry with Exponential Backoff, Timeout 설정</td></tr><tr><td><strong>배포 및 운영</strong></td><td>배포 전략</td><td>신규 기능 배포 시 전체 서비스 영향 방지 필요</td><td>Blue-Green / Canary / 롤링 업데이트 전략, 트래픽 라우팅 기반 테스트</td></tr><tr><td></td><td>DevOps & 자동화 환경</td><td>수동 배포 및 테스트는 에러율 및 운영 부담 증가</td><td>CI/CD 파이프라인 구축, GitOps 기반 IaC, ArgoCD, Helm, Terraform</td></tr><tr><td></td><td>운영 형상 관리</td><td>서비스 구성·운영 환경의 일관성 확보 필요</td><td>Git 기반 구성 이력 관리, 환경 분리 전략 (dev/stage/prod), Drift 감지 도구 활용</td></tr><tr><td><strong>관찰 가능성</strong></td><td>모니터링 및 로깅</td><td>분산된 서비스 상태 추적 어려움, 장애 원인 분석 지연</td><td>Prometheus + Grafana (메트릭), Loki/ELK (로그), Jaeger/Zipkin (트레이싱)</td></tr><tr><td></td><td>장애 감지 및 회복 테스트</td><td>장애에 대한 내성 및 복원력 확보 필요</td><td>Chaos Engineering 도입 (Gremlin, Chaos Mesh), 장애 훈련 시뮬레이션</td></tr><tr><td><strong>보안 및 신뢰성</strong></td><td>인증/인가, 네트워크 보안</td><td>서비스 간 호출 위조, 무단 접근 가능성</td><td>mTLS 통신, OAuth2.0, JWT 기반 인증, 서비스 메시 (SPIFFE) 연동</td></tr><tr><td></td><td>데이터 보안 및 프라이버시</td><td>민감 데이터 암호화 및 권한 분리 필요</td><td>전송 암호화 (TLS), 저장소 암호화 (AES), KMS, RBAC/ABAC 정책 적용</td></tr><tr><td><strong>리소스 계획 및 확장성</strong></td><td>용량 계획 및 오토스케일링</td><td>급격한 트래픽 증가 시 자원 부족, 비용 낭비 발생 가능</td><td>CPU/Memory 요청/제한 설정, HPA/VPA 활용, 서비스 단위 스케일 설계</td></tr><tr><td></td><td>네트워크 및 레이턴시 관리</td><td>노드 간 왕복 지연시간 증가 시 사용자 경험 저하</td><td>지역 분산 배포, 캐시 레이어 추가, CDN, 백오프 및 비동기 큐 활용</td></tr></tbody></table><h3 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>최적화 항목</strong></th><th><strong>주요 설명</strong></th><th><strong>권장 전략 및 기법</strong></th></tr></thead><tbody><tr><td><strong>성능 최적화</strong></td><td>응답 시간 개선</td><td>데이터 접근 속도 향상, 서비스 지연 최소화</td><td>- CDN 적용<br>- Redis/Memcached 캐시 계층 활용<br>- 데이터베이스 인덱싱/튜닝</td></tr><tr><td></td><td>API 호출 최소화</td><td>서비스 간 네트워크 호출 횟수 감소</td><td>- Bulk API, GraphQL<br>- API Aggregator 패턴</td></tr><tr><td></td><td>병렬 처리 및 비동기화</td><td>작업 처리 시간 단축, 리소스 효율적 사용</td><td>- Kafka, RabbitMQ 도입<br>- 비동기 Task Queue 운영</td></tr><tr><td><strong>확장성 확보</strong></td><td>자동 확장 및 오토스케일링</td><td>부하 증가에 따른 자원 확장</td><td>- Kubernetes HPA/VPA<br>- 클라우드 Auto-Scaling</td></tr><tr><td></td><td>데이터 샤딩</td><td>데이터 병목 방지 및 수평 확장 구조</td><td>- 파티셔닝 키 전략 최적화<br>- 분산 DB (e.g., Cassandra, MongoDB)</td></tr><tr><td><strong>비용 최적화</strong></td><td>자원 효율성</td><td>리소스 낭비 방지 및 ROI 극대화</td><td>- 서버리스 (FaaS) 활용<br>- 클라우드 스팟 인스턴스/예약 인스턴스 사용</td></tr><tr><td></td><td>네트워크 트래픽 최적화</td><td>전송 지연 및 비용 감소</td><td>- 압축 전송 (gRPC, Protobuf)<br>- 캐싱 및 데이터 최소화 전송</td></tr><tr><td><strong>안정성 및 장애 복구</strong></td><td>장애 격리 및 복구</td><td>전체 시스템 장애 전파 방지</td><td>- 서킷 브레이커 (Circuit Breaker)<br>- 장애 전파 방지 (Bulkhead) 패턴</td></tr><tr><td></td><td>자동화된 복구</td><td>장애 시 빠른 복원 및 알림 체계 구축</td><td>- Auto-healing 설정<br>- 재시도 로직 & 우아한 실패 처리 (Fallback) 적용</td></tr><tr><td><strong>운영 자동화</strong></td><td>배포 자동화, 인프라 관리</td><td>운영 편의성 및 반복 작업 자동화</td><td>- CI/CD 파이프라인 구축<br>- IaC(Terraform, Pulumi) 도입</td></tr><tr><td></td><td>관찰 가능성 (Observability) 강화</td><td>장애 탐지, 성능 모니터링, 이상 탐지</td><td>- OpenTelemetry 기반 Metrics, Logs, Traces 통합<br>- Grafana/Prometheus</td></tr></tbody></table><h3 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th><th><strong>실무 적용 포인트 / 기술 예시</strong></th></tr></thead><tbody><tr><td><strong>이론/원칙</strong></td><td><strong>CAP 이론</strong></td><td>분산 시스템에서 일관성 (Consistency), 가용성 (Availability), 파티션 허용성 (Partition Tolerance) 은 동시에 만족 불가</td><td>시스템 목적에 따라 CP / AP 선택, 예: Cassandra(AP), Zookeeper(CP)</td></tr><tr><td><strong>설계 원칙</strong></td><td><strong>CQRS</strong></td><td>읽기/쓰기 책임 분리로 확장성 및 성능 확보</td><td>CQRS + Event Sourcing 조합 시 비동기 일관성 보장 가능</td></tr><tr><td></td><td><strong>Event Sourcing</strong></td><td>상태 변경을 이벤트 시퀀스로 기록하여 상태 복원 및 감사 로깅 지원</td><td>Kafka 기반 이벤트 저장소 + Snapshot 기반 리플레이 구조</td></tr><tr><td><strong>실무 설계</strong></td><td><strong>마이크로서비스</strong></td><td>기능 단위로 독립 배포 가능한 서비스 구성, 장애 격리, 글로벌 확장에 적합</td><td>DDD 기반 분해, 독립 스토리지, 서비스 간 async 통신 권장</td></tr><tr><td></td><td><strong>서비스 메시</strong></td><td>마이크로서비스 간 통신 제어, 인증, 트래픽 정책 등을 중앙에서 관리</td><td>Istio, Linkerd, Envoy 등, mTLS 및 정책 기반 제어 포함</td></tr><tr><td></td><td><strong>GraphQL</strong></td><td>다양한 마이크로서비스의 응답을 클라이언트가 직접 조합하여 요청하는 질의 언어</td><td>BFF (Backend for Frontend) 패턴과 함께 자주 사용</td></tr><tr><td><strong>운영 최적화</strong></td><td><strong>오토스케일링</strong></td><td>트래픽 변화에 따라 CPU/메모리 기반으로 자동으로 인스턴스 조절</td><td>HPA, VPA, KEDA 등과 연계하여 탄력적 자원 활용</td></tr><tr><td></td><td><strong>모니터링 및 로깅</strong></td><td>시스템 상태 추적 및 장애 발생 시 원인 분석에 필수</td><td>Prometheus, Grafana, Jaeger, Loki, ELK</td></tr><tr><td></td><td><strong>배포 전략</strong></td><td>배포로 인한 장애 방지를 위해 점진적 적용이 가능한 전략 필요</td><td>Blue-Green, Canary, Rolling Update</td></tr><tr><td><strong>기술/트렌드</strong></td><td><strong>서버리스 (FaaS)</strong></td><td>코드 단위 실행 모델로 운영 부담 감소, 비용 효율적</td><td>AWS Lambda, Azure Functions, Google Cloud Functions</td></tr><tr><td></td><td><strong>엣지 컴퓨팅</strong></td><td>사용자와 가까운 위치에서 처리하여 지연 최소화</td><td>CDN, Cloudflare Workers, AWS Greengrass</td></tr><tr><td><strong>플랫폼/도구</strong></td><td><strong>Kubernetes</strong></td><td>컨테이너 기반 애플리케이션의 오케스트레이션</td><td>배포 자동화, 헬스 체크, 수평 스케일링, 네임스페이스 격리</td></tr><tr><td></td><td><strong>Docker</strong></td><td>애플리케이션 패키징 및 실행 환경 이식성 확보</td><td>CI/CD, 환경 통합 테스트, 이미지 스캔 등</td></tr></tbody></table><h3 id=반드시-학습해야할-내용>반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#반드시-학습해야할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>세부 주제</strong></th><th><strong>핵심 항목</strong></th><th><strong>설명 및 학습 포인트</strong></th></tr></thead><tbody><tr><td><strong>이론 (Foundations)</strong></td><td>CAP Theorem</td><td>Consistency / Availability / Partition Tolerance</td><td>세 가지 속성 간 트레이드오프 이해는 분산 시스템의 기본 원리</td></tr><tr><td></td><td>분산 합의 알고리즘</td><td>Raft, Paxos, PBFT 등</td><td>장애 복원력과 일관성을 위한 리더 선출, 합의 메커니즘 이해</td></tr><tr><td></td><td>BASE vs ACID</td><td>Eventual Consistency 개념 포함</td><td>강한 일관성 vs 느슨한 일관성 기반의 트랜잭션 모델 비교</td></tr><tr><td><strong>설계 패턴 (Design Patterns)</strong></td><td>트랜잭션 관리</td><td>Saga Pattern (Choreography & Orchestration)</td><td>분산 트랜잭션의 보상 처리 및 흐름 제어를 위한 구조 이해</td></tr><tr><td></td><td>데이터 관리</td><td>Database per Service, Event Sourcing</td><td>마이크로서비스 간 데이터 독립성과 변경 추적, 리플레이 전략 포함</td></tr><tr><td></td><td>장애 제어</td><td>Circuit Breaker, Bulkhead</td><td>장애 전파를 방지하고, 복원력을 높이는 설계 패턴 이해</td></tr><tr><td><strong>핵심 기술 (Key Technologies)</strong></td><td>메시징 시스템</td><td>Kafka, RabbitMQ</td><td>이벤트 기반 아키텍처 및 비동기 처리, 스트림 처리의 핵심 기술</td></tr><tr><td></td><td>API 게이트웨이</td><td>Kong, NGINX, Spring Gateway</td><td>인증, 라우팅, 로깅, 정책 적용 등 마이크로서비스 전면부 책임</td></tr><tr><td></td><td>서비스 디스커버리</td><td>Consul, Eureka, DNS SRV</td><td>동적 서비스 탐색 및 레지스트리 기반 통신 구조 이해</td></tr><tr><td></td><td>구성 관리</td><td>Spring Cloud Config, Consul KV</td><td>서비스 구성 중앙화 및 버전 관리 방식 숙지</td></tr><tr><td><strong>운영 (Operations & Observability)</strong></td><td>메트릭 수집 및 시각화</td><td>Prometheus, Grafana</td><td>지표 기반 모니터링 구성과 경보 트리거 설계</td></tr><tr><td></td><td>로깅/추적</td><td>ELK Stack, Jaeger, OpenTelemetry</td><td>분산 환경의 요청 흐름 추적 및 오류 원인 분석</td></tr><tr><td></td><td>헬스 체크/복구</td><td>Liveness/Readiness Probe, Auto-heal</td><td>상태 기반 재시도 및 재배포 설계의 핵심 요소</td></tr><tr><td></td><td>배포 자동화</td><td>CI/CD, GitOps, ArgoCD</td><td>반복 가능한 안정적 배포 구조와 구성 관리</td></tr><tr><td><strong>최적화 (Optimization)</strong></td><td>캐싱 전략</td><td>Redis, CDN, Edge Cache</td><td>응답 시간 단축, 부하 분산, 캐시 일관성 고려</td></tr><tr><td></td><td>네트워크 최적화</td><td>HTTP/2, gRPC, 메시지 압축</td><td>전송 효율성 향상 및 지연 시간 최소화</td></tr><tr><td></td><td>비용 최적화</td><td>오토스케일링, 서버리스, 리소스 제한</td><td>비용 - 성능 균형을 위한 인프라 설계 전략</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th><strong>카테고리</strong></th><th><strong>용어</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>아키텍처 스타일</strong></td><td><strong>Distributed Architecture</strong></td><td>여러 노드와 컴포넌트가 네트워크로 연결된 시스템 구조로, 확장성과 장애 복원력을 보장</td></tr><tr><td></td><td><strong>Microservices Architecture</strong></td><td>각 기능을 독립적으로 분리하고 배포 가능한 작은 서비스들로 구성된 아키텍처 스타일</td></tr><tr><td></td><td><strong>Shared-Nothing Architecture</strong></td><td>각 노드가 자체 리소스를 독립적으로 보유하며 공유를 최소화하는 구조</td></tr><tr><td><strong>통신/네트워크</strong></td><td><strong>Service Discovery</strong></td><td>서비스의 위치 (IP/Port 등) 를 동적으로 탐색하는 메커니즘 (예: Consul, Eureka)</td></tr><tr><td></td><td><strong>API Gateway</strong></td><td>클라이언트와 백엔드 서비스 간 요청을 프록시하고 인증, 라우팅, 속도 제한 등을 처리하는 진입점 역할</td></tr><tr><td></td><td><strong>Service Mesh</strong></td><td>마이크로서비스 간의 통신, 인증 (mTLS), 트래픽 정책을 일관되게 관리하는 인프라 계층 (예: Istio, Linkerd)</td></tr><tr><td></td><td><strong>Circuit Breaker</strong></td><td>서비스 장애 발생 시 호출을 차단하여 연쇄 장애 (Cascading Failure) 를 방지하는 안정성 패턴</td></tr><tr><td><strong>데이터 및 일관성</strong></td><td><strong>Saga Pattern</strong></td><td>분산 트랜잭션을 단계별 보상 트랜잭션으로 관리하여 eventual consistency 를 확보하는 패턴</td></tr><tr><td></td><td><strong>Eventual Consistency</strong></td><td>분산 시스템에서 시간이 지나면 모든 노드에 데이터가 일관되게 되는 일관성 모델</td></tr><tr><td></td><td><strong>Sharding</strong></td><td>데이터를 수평 분할하여 여러 노드나 데이터베이스에 저장하는 기법 (예: 사용자 ID 기반 파티션)</td></tr><tr><td></td><td><strong>Immutable Data Store</strong></td><td>저장된 데이터는 변경하지 않고 새로운 버전으로 추가 저장하여 변경 추적 및 감사 (Audit) 에 유리한 구조</td></tr><tr><td><strong>운영/자동화</strong></td><td><strong>Auto Scaling</strong></td><td>시스템 부하에 따라 자원을 자동으로 확장하거나 축소하는 기능 (예: Kubernetes HPA, AWS ASG)</td></tr><tr><td></td><td><strong>Service Registry</strong></td><td>서비스 인스턴스를 등록/검색할 수 있는 저장소 (보통 Service Discovery 와 함께 사용됨)</td></tr><tr><td></td><td><strong>Load Balancer</strong></td><td>클라이언트 요청을 여러 서비스 인스턴스로 분산시켜 부하 분산 및 고가용성 보장</td></tr><tr><td></td><td><strong>Orchestration</strong></td><td>컨테이너나 작업의 배포·스케일링·복구 등을 자동화하는 기술 (예: Kubernetes)</td></tr><tr><td></td><td><strong>Containerization</strong></td><td>애플리케이션과 그 환경을 하나의 단위로 패키징하여 이식성과 일관된 실행 환경 보장</td></tr><tr><td><strong>운영/관찰성</strong></td><td><strong>Observability (관찰 가능성)</strong></td><td>시스템 내부 상태를 지표, 로그, 추적 등을 통해 외부에서 추론할 수 있는 능력</td></tr><tr><td></td><td><strong>Distributed Tracing</strong></td><td>분산된 여러 서비스에 걸친 하나의 요청 흐름을 추적하여 병목 구간 등을 파악할 수 있도록 하는 기술</td></tr><tr><td></td><td><strong>Chaos Engineering</strong></td><td>의도적으로 장애를 발생시켜 시스템의 복원력과 회복 능력을 실험하고 강화하는 기법</td></tr><tr><td><strong>이론/원칙</strong></td><td><strong>CAP Theorem</strong></td><td>분산 시스템에서 일관성 (Consistency), 가용성 (Availability), 파티션 허용성 중 두 가지만 동시에 만족 가능</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><strong><a href=https://microservices.io/patterns/microservices.html>Microservices Pattern: Microservice Architecture pattern</a></strong></li><li><strong><a href=https://www.ibm.com/think/topics/cap-theorem>What Is the CAP Theorem? | IBM</a></strong></li><li><strong><a href=https://learn.microsoft.com/en-us/azure/architecture/patterns/saga>Saga Design Pattern - Azure Architecture Center</a></strong></li><li><strong><a href=https://www.ibm.com/cloud/learn/cap-theorem>What is CAP theorem? - IBM Cloud Docs</a></strong></li><li><strong><a href=https://www.linkedin.com/pulse/understanding-saga-design-pattern-real-world-example-balakrishnan-drvze>Understanding the Saga Design Pattern (With a Real-World Example)</a></strong></li><li><strong><a href=https://blog.bitsrc.io/saga-pattern-for-distributed-transactions-974380658574>Saga Pattern for Distributed Transactions</a></strong></li></ul><hr></div><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Cell-Based Architecture</h2></header><div class=entry-content><p>Cell-Based Architecture Cell-based architecture 는 마이크로서비스를 넘어, 서비스와 인프라를 ‘cell’ 이라 불리는 완전 자립 단위로 격리하는 설계 방식이다. 각 cell 은 자체 API, 데이터 저장소, 오토스케일 등 완전 독립실행이 가능하며, cell router 가 트래픽을 cell 로 분배한다. 장애나 부하 발생 시 해당 cell 만 영향을 받으므로 전체 시스템 안정성이 높아진다. 특히 클라우드 환경에서 초대규모 시스템 운영 시 적합하며 fault isolation, 수평 확장, 보안 기준에서도 유리한 구조로 평가받는다.
배경 Cell-Based Architecture 의 등장 배경은 다음과 같다:
...</p></div><footer class=entry-footer><span title='2025-07-09 01:10:00 +0000 UTC'>July 9, 2025</span>&nbsp;·&nbsp;32 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Cell-Based Architecture" href=https://buenhyden.github.io/posts/software-design-and-architecture/architecture/distributed-architectures/emerging-distributed-patterns/cell-based-architecture/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Container-Based Architecture</h2></header><div class=entry-content><p>Container-Based Architecture 컨테이너 기반 아키텍처는 호스트 OS 위에서 컨테이너 런타임 (예: Docker) 을 통해 애플리케이션, 라이브러리, 설정 파일을 하나의 단위로 사용자 공간 (User Space) 에 격리하여 실행한다. 이 방식은 VM 대비 오버헤드가 작고, CI/CD 와 연계하기 용이해 개발→테스트→배포까지 일관된 환경을 보장한다. 또한 Kubernetes 같은 오케스트레이션 플랫폼으로 확장성, 셀프 힐링, 로드밸런싱 등을 지원하여 클라우드 네이티브 아키텍처 핵심으로 자리 잡았다.
핵심 개념 컨테이너 기반 아키텍처는 애플리케이션과 실행 환경을 컨테이너 단위로 패키징하여 운영체제 수준에서 격리된 환경에서 독립적으로 실행하는 클라우드 네이티브 아키텍처 스타일이다.
...</p></div><footer class=entry-footer><span title='2025-07-05 05:05:00 +0000 UTC'>July 5, 2025</span>&nbsp;·&nbsp;26 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Container-Based Architecture" href=https://buenhyden.github.io/posts/software-design-and-architecture/architecture/distributed-architectures/cloud-native-architectures/container-based-architecture/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>N-Tier Architecture</h2></header><div class=entry-content><p>N-Tier Architecture N‑Tier Architecture 는 여러 계층 (tiers) 을 통해 애플리케이션을 분산 구성하며, 각 계층은 독립된 서버 또는 인프라로 운영된다. 일반적으로 프레젠테이션 계층, 비즈니스 로직 계층, 데이터 계층으로 구성되며, 필요 시 캐싱, API 게이트웨이, 통합 계층 등이 추가된다. 이를 통해 각 계층별 역할 분리, 팀별 개발, 계층별 확장 및 보안 제어가 가능하며, 높은 유연성과 유지보수성을 확보한다.
등장 배경 및 발전 과정 웹 기술 등장 이후, 클라이언트 - 서버 모델이 분산 클라이언트 - 멀티 서버 구조로 전환 미들웨어 (WebSphere, JBoss,.NET Remoting 등) 도입이 계층 분리 기반 기술로 작동 DevOps/Cloud/Microservices의 등장으로 N-Tier 구조가 더욱 동적·유연하게 발전됨 등장 배경 구분 내용 기술적 한계 1990 년대 초반의 1-Tier 및 2-Tier 아키텍처는 클라이언트에 비즈니스 로직과 UI 를 모두 포함하거나, 데이터 계층과 UI 만 분리된 구조로서, 확장성·보안성·유지보수 측면에서 큰 한계를 보임 인터넷 대중화 웹 기반 시스템의 급증과 함께, 더 강력하고 유연한 UI 및 비즈니스 로직 분리가 요구됨 운영/배포 측면 문제 단일 머신 (1-Tier), 클라이언트 - 서버 (2-Tier) 구조는 네트워크 지연, 사용자 수 증가, 트랜잭션 충돌 등 실무적 제약 발생 비즈니스 복잡성 증가 비즈니스 로직이 단순한 CRUD 수준을 넘어서면서, 기능별 독립성과 테스트 가능성 확보가 필요해짐 유지보수/보안 요구 증가 기업 내 보안 정책 강화 및 시스템 장기 운영을 위한 계층별 책임 분리 필요성 대두 💡 핵심 요약:
" 확장성과 복잡성, 보안, 유지보수성의 요구가 증가하면서, 책임 분리 기반의 계층 구조로 진화가 필요해졌다."
...</p></div><footer class=entry-footer><span title='2025-04-27 08:37:00 +0000 UTC'>April 27, 2025</span>&nbsp;·&nbsp;72 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to N-Tier Architecture" href=https://buenhyden.github.io/posts/software-design-and-architecture/architecture/distributed-architectures/traditional-patterns/n-tier-architecture/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Serverless Architecture</h2></header><div class=entry-content><p>Serverless Architecture Serverless Architecture(서버리스 아키텍처) 는 개발자가 서버 인프라를 직접 관리하지 않고, 클라우드 서비스 제공자가 컴퓨팅 리소스의 프로비저닝, 확장, 운영을 자동으로 처리하는 현대적 아키텍처 스타일이다. 대표적으로 Function as a Service(FaaS, 함수형 서비스) 와 Backend as a Service(BaaS, 백엔드 서비스) 가 있으며, 이벤트 기반 트리거, 자동 확장, 사용량 기반 과금, 빠른 배포와 높은 확장성을 특징으로 한다. 이로 인해 개발자는 비즈니스 로직 구현에 집중할 수 있다.
핵심 개념 Serverless Architecture(서버리스 아키텍처) 는 서버 인프라 관리 없이, 클라우드 서비스 제공자가 모든 인프라 운영을 책임지고, 개발자는 코드 (주로 함수 단위) 만 작성하여 배포하는 아키텍처 스타일이다.
...</p></div><footer class=entry-footer><span title='2025-03-19 12:08:00 +0000 UTC'>March 19, 2025</span>&nbsp;·&nbsp;21 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Serverless Architecture" href=https://buenhyden.github.io/posts/software-design-and-architecture/architecture/distributed-architectures/cloud-native-architectures/serverless-architecture/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Service-oriented architecture</h2></header><div class=entry-content><p>Service-oriented Architecture 2. 분류 구조 검토 현재 분류: “Software Engineering > Design and Architecture > Architecture Styles and Patterns > Architecture Styles”
더 적절한 분류 제안:
“Software Engineering > Design and Architecture > Distributed System Architecture > Service-Oriented Architecture”
근거: SOA 는 단순한 아키텍처 스타일을 넘어서 분산 시스템 설계의 핵심 방법론이며, 엔터프라이즈 시스템 통합을 위한 구체적인 구현 패턴을 포함하고 있습니다. 따라서 분산 시스템 아키텍처 하위 분류가 더 적절합니다.
✅ 2. 분류 구조 검토 현재 분류
...</p></div><footer class=entry-footer><span title='2024-09-27 09:19:00 +0000 UTC'>September 27, 2024</span>&nbsp;·&nbsp;41 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Service-oriented architecture" href=https://buenhyden.github.io/posts/software-design-and-architecture/architecture/distributed-architectures/service-oriented-architectures/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Space-Based Architecture</h2></header><div class=entry-content><p>Space-Based Architecture Space-Based Architecture(스페이스 기반 아키텍처) 는 대량의 동시 트랜잭션과 데이터 처리가 필요한 환경에서 병목 현상 없이 확장성과 장애 격리를 실현하기 위해 고안된 분산 아키텍처 스타일이다. 시스템을 여러 공간 (Space) 으로 분할하고, 각 공간은 자체적으로 데이터와 프로세스를 관리하며, 중앙 데이터베이스 의존도를 줄여 확장성과 가용성을 극대화한다. 실시간 빅데이터 처리, 금융 시스템, 대규모 전자상거래 등에서 널리 활용된다.
https://en.wikipedia.org/wiki/Space-based_architecture#/media/File:Space_based_architecture.GIF
배경 Space‑Based Architecture 는 1997–98 년 마이크로소프트 내부의 Youkon Distributed Caching 플랫폼에서 최초 개발되어 MSN Live Search 등 대용량 서비스에서 사용된 고성능 분산 패턴으로, 이후 금융 및 대규모 웹 서비스에 채택되었다.
전통적 Tier 기반 아키텍처에서 DB 계층이 증가하는 로드와 확장성 한계의 병목이 되자, 이를 해결하기 위해 인메모리 데이터 그리드 (IMDG) 와 스케일링 가능한 처리 단위 (PU) 를 이용한 분산 구조가 등장했다.
...</p></div><footer class=entry-footer><span title='2024-09-27 08:30:00 +0000 UTC'>September 27, 2024</span>&nbsp;·&nbsp;32 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Space-Based Architecture" href=https://buenhyden.github.io/posts/software-design-and-architecture/architecture/distributed-architectures/emerging-distributed-patterns/space-based-architecture/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Peer-to-Peer Architecture</h2></header><div class=entry-content><p>Peer-to-Peer Architecture 피어 투 피어 아키텍처 (Peer-to-Peer Architecture) 는 네트워크 내 모든 참여자가 동등한 역할을 하며, 중앙 집중형 서버 없이 각 노드가 직접적으로 데이터를 송수신하는 분산 시스템 구조이다. 각 노드는 클라이언트이자 서버로 동작하며, 자원 (파일, 처리능력 등) 을 상호 공유한다. 이 구조는 확장성, 장애 내성, 자원 분산 측면에서 강점을 가지며, P2P 파일 공유, 블록체인, 분산 컴퓨팅 등 다양한 실무 환경에 적용된다.
https://www.geeksforgeeks.org/what-is-p2p-peer-to-peer-process/
배경 P2P 아키텍처는 1990 년대 말 Napster 와 같은 파일 공유 시스템의 등장으로 주목받기 시작했다. 전통적인 클라이언트 - 서버 모델의 중앙 집중식 구조가 가지는 단일 실패점 (Single Point of Failure), 확장성 한계, 높은 서버 비용 등의 문제를 해결하기 위해 발전했다.
...</p></div><footer class=entry-footer><span title='2024-09-27 08:28:00 +0000 UTC'>September 27, 2024</span>&nbsp;·&nbsp;20 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Peer-to-Peer Architecture" href=https://buenhyden.github.io/posts/software-design-and-architecture/architecture/distributed-architectures/traditional-patterns/peer-to-peer-architecture/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Client Server Architecture</h2></header><div class=entry-content><p>Client-Server Architecture 4. 250 자 개요 Client‑Server Architecture 는 네트워크 상에서 클라이언트 (Client) 가 요청을 보내고, 서버 (Server) 가 처리하여 응답하는 전통적 분산 시스템 모델이다. 클라이언트는 UI/로컬 상태 관리를 담당하며, 서버는 데이터 저장, 비즈니스 로직, 보안, 상태 관리 등 중앙 집약적 역할을 수행한다. 이 구조로 중앙 집중 관리를 통한 보안, 확장성, Fault Resistance 를 확보할 수 있으며, HTTP 웹 서비스, 데이터베이스 서버, 이메일 시스템 등 다양한 현대 시스템에서 활용된다.
배경 클라이언트 - 서버 아키텍처는 1960 년대 메인프레임 컴퓨터 시대에 시작되어, 다음과 같은 발전 과정을 거쳤다:
...</p></div><footer class=entry-footer><span title='2024-09-26 08:27:00 +0000 UTC'>September 26, 2024</span>&nbsp;·&nbsp;28 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Client Server Architecture" href=https://buenhyden.github.io/posts/software-design-and-architecture/architecture/distributed-architectures/traditional-patterns/client-server-architecture/></a></article></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>