<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Sidecar Pattern | hyunyoun's Blog</title><meta name=keywords content="Software-Engineering,Design-and-Architecture,Architecture-Styles-and-Patterns,Architecture-Patterns,Deployment-and-Scalability-Patterns,Sidecar-Pattern"><meta name=description content="Sidecar Pattern은 마치 오토바이의 사이드카처럼, 주 애플리케이션 컨테이너 옆에 보조 컨테이너를 배치하여 추가 기능을 제공한다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-design-and-architecture/design-patterns-and-integration/integration-patterns/service-integration/sidecar/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/software-design-and-architecture/design-patterns-and-integration/integration-patterns/service-integration/sidecar/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-design-and-architecture/design-patterns-and-integration/integration-patterns/service-integration/sidecar/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-design-and-architecture/design-patterns-and-integration/integration-patterns/service-integration/sidecar/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Sidecar Pattern"><meta property="og:description" content="Sidecar Pattern은 마치 오토바이의 사이드카처럼, 주 애플리케이션 컨테이너 옆에 보조 컨테이너를 배치하여 추가 기능을 제공한다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Sidecar Pattern"><meta name=twitter:description content="Sidecar Pattern은 마치 오토바이의 사이드카처럼, 주 애플리케이션 컨테이너 옆에 보조 컨테이너를 배치하여 추가 기능을 제공한다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Sidecar Pattern","item":"https://buenhyden.github.io/posts/software-design-and-architecture/design-patterns-and-integration/integration-patterns/service-integration/sidecar/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a></div><h1>Sidecar Pattern</h1><div class=post-description>Sidecar Pattern은 마치 오토바이의 사이드카처럼, 주 애플리케이션 컨테이너 옆에 보조 컨테이너를 배치하여 추가 기능을 제공한다.</div></header><div class=post-content><h2 id=sidecar-pattern>Sidecar Pattern<a hidden class=anchor aria-hidden=true href=#sidecar-pattern>#</a></h2><p>아래는 **Sidecar Pattern(사이드카 패턴)**에 대한 체계적이고 깊이 있는 조사 및 분석 결과입니다.</p><hr><h2 id=1-태그>1. 태그<a hidden class=anchor aria-hidden=true href=#1-태그>#</a></h2><p><code>Microservices</code>, <code>Container-Deployment</code>, <code>Cloud-Native</code>, <code>Service-Mesh</code></p><hr><h2 id=2-분류-구조-적합성-분석>2. 분류 구조 적합성 분석<a hidden class=anchor aria-hidden=true href=#2-분류-구조-적합성-분석>#</a></h2><p><strong>분류 구조:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Computer Science and Engineering  
</span></span><span class=line><span class=cl>└─ Software Engineering  
</span></span><span class=line><span class=cl>   └─ Design and Architecture  
</span></span><span class=line><span class=cl>      └─ Architecture Patterns  
</span></span><span class=line><span class=cl>         └─ Deployment and Scalability Patterns
</span></span></code></pre></td></tr></table></div></div><p><strong>분석 및 근거:</strong><br>Sidecar 패턴은 마이크로서비스 및 클라우드 네이티브 환경에서 서비스의 배포와 확장성을 높이기 위한 아키텍처 패턴입니다. 주로 **배포 및 확장성 패턴(Deployment and Scalability Patterns)**에 분류되며, 이 분류는 Sidecar 패턴의 본질과 실무적 적용 목적(서비스 확장, 모듈화, 관측 가능성 등)을 잘 반영합니다.<br>실무적으로는 Kubernetes, Istio 등에서 Sidecar 컨테이너로 네트워킹, 모니터링, 로깅 등 다양한 기능을 분리하여 구현하는 데 활용됩니다.</p><hr><h2 id=3-요약200자-내외>3. 요약(200자 내외)<a hidden class=anchor aria-hidden=true href=#3-요약200자-내외>#</a></h2><p>Sidecar 패턴은 메인 애플리케이션(주컨테이너)과 별도의 컨테이너(사이드카)를 함께 배포하여, 통신·모니터링·로깅 등 부가 기능을 분리·확장하는 클라우드 네이티브 아키텍처 패턴입니다.</p><hr><h2 id=4-개요250자-내외>4. 개요(250자 내외)<a hidden class=anchor aria-hidden=true href=#4-개요250자-내외>#</a></h2><p>Sidecar 패턴은 마이크로서비스 환경에서 주컨테이너와 함께 동작하는 별도의 컨테이너(사이드카)를 활용하여, 네트워킹·로깅·모니터링 등 부가 기능을 분리·확장하고, 서비스의 유지보수성·확장성·모듈화를 높이는 데 효과적입니다.</p><hr><h2 id=5-핵심-개념>5. 핵심 개념<a hidden class=anchor aria-hidden=true href=#5-핵심-개념>#</a></h2><ul><li><strong>정의:</strong><ul><li><strong>주컨테이너(Main Container):</strong> 핵심 비즈니스 로직을 담당</li><li><strong>사이드카 컨테이너(Sidecar Container):</strong> 네트워킹, 로깅, 모니터링 등 부가 기능을 담당</li><li><strong>동일한 Pod/호스트에서 공유 리소스 사용</strong></li></ul></li><li><strong>목적:</strong><ul><li><strong>기능 분리(모듈화):</strong> 부가 기능을 메인 애플리케이션과 분리</li><li><strong>확장성:</strong> 부가 기능의 독립적 확장 및 배포</li><li><strong>관측 가능성:</strong> 로깅, 모니터링 등 부가 기능의 표준화</li></ul></li><li><strong>실무적 구현 요건:</strong><ul><li>컨테이너 오케스트레이션(Kubernetes 등)</li><li>네트워크/리소스 공유 및 통신</li><li>부가 기능의 표준화 및 확장</li></ul></li><li><strong>연관성:</strong><ul><li>마이크로서비스 아키텍처</li><li>클라우드 네이티브</li><li>서비스 메시(Service Mesh)</li></ul></li></ul><hr><h2 id=6-세부-조사-내용>6. 세부 조사 내용<a hidden class=anchor aria-hidden=true href=#6-세부-조사-내용>#</a></h2><h3 id=핵심-개념변경전-핵심-개념>핵심 개념(변경전: 핵심 개념)<a hidden class=anchor aria-hidden=true href=#핵심-개념변경전-핵심-개념>#</a></h3><ul><li><strong>주컨테이너:</strong> 핵심 비즈니스 로직</li><li><strong>사이드카 컨테이너:</strong> 부가 기능(네트워킹, 로깅, 모니터링 등)</li><li><strong>Pod/호스트:</strong> 동일한 Pod/호스트에서 공유 리소스 사용</li></ul><h3 id=배경>배경<a hidden class=anchor aria-hidden=true href=#배경>#</a></h3><ul><li><strong>등장 배경:</strong><ul><li>마이크로서비스 아키텍처에서 부가 기능의 표준화 및 확장 필요</li><li>클라우드 네이티브 환경에서 서비스의 유지보수성·확장성 강조</li></ul></li><li><strong>역사적 배경:</strong><ul><li>컨테이너 기술 및 오케스트레이션 발전과 함께 패턴화</li></ul></li></ul><h3 id=목적-및-필요성변경전-목적-및-필요성>목적 및 필요성(변경전: 목적 및 필요성)<a hidden class=anchor aria-hidden=true href=#목적-및-필요성변경전-목적-및-필요성>#</a></h3><ul><li><strong>목적:</strong><ul><li>부가 기능의 분리 및 모듈화</li><li>서비스의 확장성·유지보수성 향상</li><li>관측 가능성(로깅, 모니터링) 표준화</li></ul></li><li><strong>필요성:</strong><ul><li>마이크로서비스 환경에서 부가 기능의 중복 및 복잡성 해소</li><li>서비스의 독립적 확장 및 배포</li></ul></li></ul><h3 id=주요-기능-및-역할변경전-주요-기능-및-역할>주요 기능 및 역할(변경전: 주요 기능 및 역할)<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할변경전-주요-기능-및-역할>#</a></h3><ul><li><strong>주컨테이너:</strong> 핵심 비즈니스 로직</li><li><strong>사이드카 컨테이너:</strong> 네트워킹, 로깅, 모니터링 등 부가 기능</li><li><strong>Pod/호스트:</strong> 컨테이너 간 리소스 공유 및 통신</li></ul><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><ul><li><strong>기능 분리(모듈화)</strong></li><li><strong>확장성 및 유연성</strong></li><li><strong>관측 가능성(Observability)</strong></li><li><strong>독립적 배포 및 확장</strong></li></ul><h3 id=핵심-원칙변경전-핵심-원칙>핵심 원칙(변경전: 핵심 원칙)<a hidden class=anchor aria-hidden=true href=#핵심-원칙변경전-핵심-원칙>#</a></h3><ul><li><strong>분리(Decoupling):</strong> 부가 기능과 메인 로직 분리</li><li><strong>확장성(Scalability):</strong> 부가 기능의 독립적 확장</li><li><strong>표준화(Standardization):</strong> 부가 기능의 표준화</li></ul><h3 id=주요-원리변경전-주요-원리>주요 원리(변경전: 주요 원리)<a hidden class=anchor aria-hidden=true href=#주요-원리변경전-주요-원리>#</a></h3><ul><li><strong>주컨테이너:</strong> 비즈니스 로직 실행</li><li><strong>사이드카 컨테이너:</strong> 부가 기능 담당</li><li><strong>Pod/호스트:</strong> 컨테이너 간 통신 및 리소스 공유</li></ul><h4 id=다이어그램작동-원리>다이어그램(작동 원리)<a hidden class=anchor aria-hidden=true href=#다이어그램작동-원리>#</a></h4><pre class=mermaid>flowchart LR
    MainContainer --&gt;|공유 리소스| SidecarContainer
    SidecarContainer --&gt;|네트워킹/로깅/모니터링| External
</pre><ul><li><strong>설명:</strong><ul><li>주컨테이너와 사이드카 컨테이너는 동일한 Pod/호스트에서 실행</li><li>사이드카는 네트워킹, 로깅, 모니터링 등 부가 기능 담당</li><li>외부와의 통신은 사이드카를 통해 이루어질 수 있음</li></ul></li></ul><h3 id=구조-및-아키텍처변경전-구조-및-아키텍처>구조 및 아키텍처(변경전: 구조 및 아키텍처)<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처변경전-구조-및-아키텍처>#</a></h3><ul><li><strong>구성 요소:</strong><ul><li><strong>필수:</strong> 주컨테이너, 사이드카 컨테이너</li><li><strong>선택:</strong> 추가 사이드카(다중 사이드카), 서비스 메시(Service Mesh)</li></ul></li><li><strong>구조:</strong><ul><li>주컨테이너 ↔ 사이드카 컨테이너(동일 Pod/호스트)</li></ul></li><li><strong>아키텍처:</strong><ul><li>단일/다중 사이드카 지원</li><li>서비스 메시와 결합 가능</li></ul></li></ul><h4 id=다이어그램구조-및-아키텍처>다이어그램(구조 및 아키텍처)<a hidden class=anchor aria-hidden=true href=#다이어그램구조-및-아키텍처>#</a></h4><pre class=mermaid>graph TD
    MainContainer --&gt; Sidecar1
    MainContainer --&gt; Sidecar2
    Sidecar1 --&gt;|로깅| External
    Sidecar2 --&gt;|모니터링| External
</pre><ul><li><strong>설명:</strong><ul><li>주컨테이너와 여러 사이드카 컨테이너가 동일한 Pod/호스트에서 실행</li><li>각 사이드카는 로깅, 모니터링 등 부가 기능 담당</li><li>외부와의 통신은 사이드카를 통해 이루어질 수 있음</li></ul></li></ul><h3 id=구현-기법변경전-구현-기법>구현 기법(변경전: 구현 기법)<a hidden class=anchor aria-hidden=true href=#구현-기법변경전-구현-기법>#</a></h3><table><thead><tr><th>구현 기법</th><th>정의 및 목적</th><th>실제 예시(시스템/시나리오)</th></tr></thead><tbody><tr><td>컨테이너 오케스트레이션</td><td>컨테이너 배포 및 관리</td><td>Kubernetes Pod, Docker Compose</td></tr><tr><td>서비스 메시</td><td>네트워킹, 보안, 모니터링 등 부가 기능 표준화</td><td>Istio, Linkerd</td></tr><tr><td>다중 사이드카</td><td>여러 부가 기능 분리</td><td>로깅, 모니터링, 네트워킹 등</td></tr></tbody></table><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>특성 원인</th></tr></thead><tbody><tr><td>장점</td><td>모듈화</td><td>부가 기능과 메인 로직 분리, 유지보수성 향상</td><td>기능 분리</td></tr><tr><td></td><td>확장성</td><td>부가 기능의 독립적 확장 및 배포 가능</td><td>독립적 배포</td></tr><tr><td></td><td>관측 가능성</td><td>로깅, 모니터링 등 부가 기능 표준화</td><td>표준화</td></tr><tr><td></td><td>유연성</td><td>다양한 부가 기능 조합 가능</td><td>다중 사이드카 지원</td></tr></tbody></table><h3 id=단점-및-문제점-해결방안>단점 및 문제점, 해결방안<a hidden class=anchor aria-hidden=true href=#단점-및-문제점-해결방안>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>복잡성</td><td>다중 사이드카 사용 시 시스템 복잡성 증가</td><td>표준화, 문서화, 모니터링 도구 활용</td></tr><tr><td></td><td>리소스 소모</td><td>추가 컨테이너로 인한 리소스 소모 증가</td><td>리소스 모니터링, 최적화</td></tr></tbody></table><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>통신 지연</td><td>컨테이너 간 통신 오버헤드</td><td>성능 저하</td><td>모니터링, 로깅</td><td>네트워크 최적화</td><td>통신 최적화, 서비스 메시</td></tr><tr><td></td><td>장애 전파</td><td>사이드카 장애 시 메인 서비스 영향</td><td>서비스 중단</td><td>헬스체크, 로깅</td><td>장애 격리, 자동 복구</td><td>장애 복구 메커니즘</td></tr></tbody></table><h3 id=도전-과제>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제>#</a></h3><table><thead><tr><th>과제</th><th>원인/영향/진단/예방/해결방안 요약</th></tr></thead><tbody><tr><td>다중 사이드카 관리</td><td>여러 사이드카의 배포, 버전, 설정 관리 복잡성</td></tr><tr><td>통신 최적화</td><td>컨테이너 간 통신 오버헤드로 인한 성능 저하</td></tr><tr><td>보안</td><td>컨테이너 간 통신 보안, 접근 권한 관리 필요</td></tr><tr><td>장애 복구</td><td>사이드카 장애 시 메인 서비스 영향, 복구 메커니즘 필요</td></tr></tbody></table><h3 id=분류-기준에-따른-종류-및-유형>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형>#</a></h3><table><thead><tr><th>분류 기준</th><th>종류/유형</th><th>설명</th></tr></thead><tbody><tr><td>기능 분리</td><td>단일 사이드카, 다중 사이드카</td><td>부가 기능의 수에 따라 구분</td></tr><tr><td>배포 환경</td><td>Kubernetes, Docker 등</td><td>오케스트레이션 플랫폼에 따라 구분</td></tr><tr><td>서비스 메시 연동</td><td>Istio, Linkerd 등</td><td>서비스 메시와의 연동 여부</td></tr></tbody></table><h3 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h3><table><thead><tr><th>예시</th><th>목적/효과</th><th>시스템 구성/시나리오</th></tr></thead><tbody><tr><td>로깅/모니터링</td><td>로그 수집, 모니터링 표준화</td><td>주컨테이너 + 로깅/모니터링 사이드카</td></tr><tr><td>네트워킹</td><td>서비스 메시 기반 네트워킹</td><td>주컨테이너 + 네트워킹 사이드카(Istio 등)</td></tr><tr><td>보안</td><td>인증/암호화 등 보안 기능 분리</td><td>주컨테이너 + 보안 사이드카</td></tr></tbody></table><h3 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h3><p><strong>사례: Kubernetes 기반 로깅/모니터링 시스템</strong></p><ul><li><strong>시스템 구성:</strong><ul><li>주컨테이너(애플리케이션) + 로깅 사이드카(Fluentd) + 모니터링 사이드카(Prometheus Exporter)</li></ul></li><li><strong>Workflow:</strong><ul><li>주컨테이너는 비즈니스 로직 실행</li><li>로깅 사이드카는 로그 수집 및 전송</li><li>모니터링 사이드카는 메트릭 수집 및 전송</li></ul></li><li><strong>주요 역할:</strong><ul><li>주컨테이너: 비즈니스 로직</li><li>사이드카: 로깅/모니터링</li></ul></li><li><strong>차이점:</strong><ul><li>Sidecar 패턴 미적용 시: 로깅/모니터링 코드가 메인 애플리케이션에 포함, 유지보수성 저하</li><li>적용 시: 로깅/모니터링 기능 분리, 유지보수성·확장성 향상</li></ul></li></ul><h4 id=다이어그램활용-사례>다이어그램(활용 사례)<a hidden class=anchor aria-hidden=true href=#다이어그램활용-사례>#</a></h4><pre class=mermaid>graph TD
    MainContainer --&gt; LoggingSidecar
    MainContainer --&gt; MonitoringSidecar
    LoggingSidecar --&gt;|로그 전송| ExternalLogStorage
    MonitoringSidecar --&gt;|메트릭 전송| ExternalMonitoring
</pre><h3 id=구현-예시python-kubernetes-yaml-예시>구현 예시(Python, Kubernetes YAML 예시)<a hidden class=anchor aria-hidden=true href=#구현-예시python-kubernetes-yaml-예시>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span><span class=lnt id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a>
</span><span class=lnt id=hl-4-16><a class=lnlinks href=#hl-4-16>16</a>
</span><span class=lnt id=hl-4-17><a class=lnlinks href=#hl-4-17>17</a>
</span><span class=lnt id=hl-4-18><a class=lnlinks href=#hl-4-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>myapp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>main-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>myapp:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>logging-sidecar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>fluentd:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumeMounts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>logs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class=l>/var/log/app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>monitoring-sidecar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>prometheus-exporter:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>logs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>emptyDir</span><span class=p>:</span><span class=w> </span>{}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li><strong>설명:</strong><ul><li>주컨테이너(main-app)와 로깅/모니터링 사이드카가 동일 Pod에서 실행</li><li>로그는 공유 볼륨을 통해 사이드카에서 수집</li></ul></li></ul><hr><h2 id=7-추가-조사-내용>7. 추가 조사 내용<a hidden class=anchor aria-hidden=true href=#7-추가-조사-내용>#</a></h2><ul><li><strong>서비스 메시(Service Mesh):</strong> Istio, Linkerd 등에서 사이드카 패턴을 활용해 네트워킹, 보안, 모니터링 등 부가 기능을 표준화</li><li><strong>클라우드 네이티브:</strong> 클라우드 환경에서 서비스의 확장성·유지보수성 강조</li></ul><hr><h2 id=8-기타-사항>8. 기타 사항<a hidden class=anchor aria-hidden=true href=#8-기타-사항>#</a></h2><ul><li><strong>비교:</strong><ul><li><strong>Ambassador Pattern:</strong> 프록시 역할에 초점, Sidecar는 부가 기능 전반에 적용</li><li><strong>Adapter Pattern:</strong> 데이터 변환에 초점, Sidecar는 다양한 부가 기능 지원</li></ul></li><li><strong>최신 트렌드:</strong><ul><li>클라우드 네이티브, 서비스 메시 환경에서 Sidecar 패턴이 핵심적 역할 수행</li><li>다중 사이드카, 서비스 메시와의 결합이 일반화</li></ul></li></ul><hr><h2 id=9-주제와-관련하여-주목할-내용>9. 주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#9-주제와-관련하여-주목할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>클라우드 네이티브</td><td>컨테이너 오케스트레이션</td><td>Kubernetes</td><td>컨테이너 배포 및 관리</td></tr><tr><td>서비스 메시</td><td>네트워킹/보안/모니터링</td><td>Istio, Linkerd</td><td>부가 기능 표준화 및 확장</td></tr><tr><td>관측 가능성</td><td>로깅/모니터링</td><td>Fluentd, Prometheus</td><td>로그/메트릭 수집 및 전송</td></tr></tbody></table><hr><h2 id=10-반드시-학습해야-할-내용>10. 반드시 학습해야 할 내용<a hidden class=anchor aria-hidden=true href=#10-반드시-학습해야-할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>클라우드 네이티브</td><td>컨테이너 오케스트레이션</td><td>Kubernetes</td><td>컨테이너 배포 및 관리</td></tr><tr><td>서비스 메시</td><td>네트워킹/보안/모니터링</td><td>Istio, Linkerd</td><td>부가 기능 표준화 및 확장</td></tr><tr><td>관측 가능성</td><td>로깅/모니터링</td><td>Fluentd, Prometheus</td><td>로그/메트릭 수집 및 전송</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>클라우드 네이티브</td><td>Sidecar</td><td>주컨테이너와 함께 동작하는 부가 기능 컨테이너</td></tr><tr><td></td><td>Pod</td><td>Kubernetes에서 컨테이너 그룹을 관리하는 최소 단위</td></tr><tr><td></td><td>Service Mesh</td><td>네트워킹, 보안, 모니터링 등 부가 기능을 표준화하는 인프라</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><a href=https://docs.microsoft.com/en-us/azure/architecture/patterns/sidecar>Sidecar pattern - Microsoft Azure Architecture Center</a></li><li><a href=https://kubernetes.io/docs/concepts/workloads/pods/#how-pods-manage-multiple-containers>Sidecar Containers - Kubernetes Documentation</a></li><li><a href=https://www.redhat.com/en/topics/microservices/what-is-a-service-mesh>Service Mesh Architecture: Sidecar Pattern Explained - Red Hat</a></li><li><a href=https://dzone.com/articles/sidecar-pattern-in-microservices>Sidecar Pattern in Microservices - DZone</a></li><li><a href=https://istio.io/latest/docs/concepts/what-is-istio/#sidecar-proxy>Istio: Sidecar Proxy - Istio Documentation</a></li><li><a href=https://linkerd.io/what-is-linkerd/>Linkerd: How Linkerd Works - Linkerd Documentation</a></li></ul><p>아래는 <strong>Sidecar Pattern</strong>에 대한 심층 조사 내용입니다. 요청하신 작업 지침에 따라 첫 번째 부분을 구성하였습니다.</p><hr><h2 id=part-1--태그-tags>Part 1 – 태그 (Tags)<a hidden class=anchor aria-hidden=true href=#part-1--태그-tags>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2>2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3>3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Sidecar-Pattern  
</span></span><span class=line><span class=cl>Service-Mesh  
</span></span><span class=line><span class=cl>Microservices-Architecture  
</span></span><span class=line><span class=cl>Deployment-Patterns
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=part-2--분류-구조-적절성-분석>Part 2 – 분류 구조 적절성 분석<a hidden class=anchor aria-hidden=true href=#part-2--분류-구조-적절성-분석>#</a></h2><ul><li>현재 분류:
<code>Software Engineering > Design and Architecture > Architecture Patterns > Deployment and Scalability Patterns</code></li><li><strong>분석 결과</strong>:
Sidecar 패턴은 실제로 **배포 구조(Deployment Structure)**를 정의하는 대표적인 **배포 패턴(Deployment Pattern)**으로 분류되며, <strong>Service Mesh</strong>, <strong>Microservice Isolation</strong>, <strong>Observability</strong> 등과 깊은 관련이 있습니다.
해당 위치는 명확히 적절하며, 오히려 대표적인 예시 중 하나로 간주됩니다.</li></ul><hr><h2 id=part-3--200자-요약>Part 3 – 200자 요약<a hidden class=anchor aria-hidden=true href=#part-3--200자-요약>#</a></h2><p>Sidecar Pattern은 애플리케이션 컨테이너 옆에 보조 기능을 수행하는 별도 프로세스(사이드카)를 배치하여 주 애플리케이션과 통신하도록 하는 아키텍처 패턴입니다. 로깅, 트래픽 제어, 보안, 모니터링 등 공통 기능을 마이크로서비스로부터 분리해 유연성과 재사용성을 확보합니다.</p><hr><h2 id=part-4--250자-개요>Part 4 – 250자 개요<a hidden class=anchor aria-hidden=true href=#part-4--250자-개요>#</a></h2><p>Sidecar Pattern은 마이크로서비스 환경에서 공통 기능(예: 보안, 로깅, 프록시, 메트릭 수집 등)을 분리된 프로세스 또는 컨테이너(사이드카)에 위임함으로써 주 애플리케이션의 코드 변경 없이 인프라 기능을 제공하는 배포 패턴입니다. 주로 Kubernetes와 같은 오케스트레이션 환경에서 Pod 내에 함께 배치되며, 서비스 메시(Service Mesh)와 함께 사용될 경우 Istio Envoy Proxy와 같은 Sidecar가 트래픽 제어, 인증, 로깅, 트레이싱을 자동으로 수행하게 됩니다. 결과적으로 일관된 운영, 보안 정책 적용, 배포 간소화 등의 이점을 제공하며, DevOps 및 Observability 환경에서 중요한 아키텍처로 자리잡고 있습니다.</p><hr><h2 id=part-5--핵심-개념>Part 5 – 핵심 개념<a hidden class=anchor aria-hidden=true href=#part-5--핵심-개념>#</a></h2><table><thead><tr><th>개념 요소</th><th>설명</th></tr></thead><tbody><tr><td>Sidecar Process</td><td>주 애플리케이션과 동일한 노드/Pod에서 실행되며, 보조 역할 수행</td></tr><tr><td>기능 분리 (Separation of Concerns)</td><td>비즈니스 로직과 인프라/운영 로직을 분리</td></tr><tr><td>Inter-process Communication (IPC)</td><td>주 컨테이너와 사이드카 간에는 localhost 또는 공유 볼륨/소켓 등으로 통신</td></tr><tr><td>동반 배포 (Co-deployment)</td><td>하나의 Pod 또는 프로세스 그룹으로 배포되어 함께 라이프사이클 관리</td></tr><tr><td>적용 영역</td><td>로깅, 모니터링, 보안, 트래픽 제어, 인증, 정책 주입 등 다양한 인프라 기능을 제공</td></tr></tbody></table><h3 id=51-실무-적용-연관성>5.1 실무 적용 연관성<a hidden class=anchor aria-hidden=true href=#51-실무-적용-연관성>#</a></h3><ul><li><strong>Kubernetes 환경</strong>: Pod 내 컨테이너로 구성되어 배포/스케일/삭제 동기화 용이</li><li><strong>Service Mesh 통합</strong>: Istio의 Envoy Sidecar가 트래픽을 가로채고, 인증/트래픽 분산/관찰성을 통합</li><li><strong>DevOps & SRE</strong>: 사이드카를 통해 모든 서비스에 통일된 로깅/모니터링 정책 적용 가능</li></ul><hr><p>다음 단계로는 <code>구조 및 아키텍처</code>, <code>장단점</code>, <code>구현 예시</code>, <code>실무 적용</code>, <code>도전 과제</code>, <code>최적화 전략</code> 등에 대해 이어서 정리해드릴 수 있습니다. 원하시는 방향 알려주세요.</p><p>아래는 <strong>Sidecar Pattern</strong>에 대한 심층 분석 내용을 <strong>구조 및 아키텍처</strong>, <strong>구성 요소</strong>, <strong>구현 기법</strong>, <strong>장단점</strong>, <strong>도전 과제 및 해결 방안</strong>, <strong>실무 사용 예시</strong>, <strong>최적화 고려사항</strong> 순서로 정리한 것입니다.</p><hr><h2 id=-1-구조-및-아키텍처-구성-요소-포함>🏗️ 1. 구조 및 아키텍처 (구성 요소 포함)<a hidden class=anchor aria-hidden=true href=#-1-구조-및-아키텍처-구성-요소-포함>#</a></h2><h3 id=구성도-mermaid>구성도 (Mermaid)<a hidden class=anchor aria-hidden=true href=#구성도-mermaid>#</a></h3><pre class=mermaid>graph LR
  subgraph Pod
    App[Application Container]
    Sidecar[Sidecar Container]
  end
  App &lt;--&gt; Sidecar
</pre><ul><li><strong>Application Container</strong>: 핵심 비즈니스 로직 수행</li><li><strong>Sidecar Container</strong>: 프록시, 모니터링, 로깅, 보안, 설정 동적 갱신 등 비즈니스 외 기능 수행</li><li><strong>IPC (Inter-Process Communication)</strong>: localhost, shared volume, Unix socket 또는 Envoy 프록시 통한 통신</li></ul><h3 id=필수-구성요소>필수 구성요소<a hidden class=anchor aria-hidden=true href=#필수-구성요소>#</a></h3><ul><li><strong>Application</strong>: 주 서비스 코드</li><li><strong>Sidecar</strong>: 보조 기능 프로세스/컨테이너</li><li><strong>공유 리소스</strong>: 네트워크, 파일시스템 볼륨, 환경설정</li><li><strong>Orchestration</strong>: Kubernetes 등의 플랫폼에서 동반 배포, 라이프사이클 관리</li></ul><h3 id=선택적-구성요소>선택적 구성요소<a hidden class=anchor aria-hidden=true href=#선택적-구성요소>#</a></h3><ul><li><strong>Service Mesh 프록시</strong>: Envoy</li><li><strong>Control Plane</strong>: Istio 등 중앙 제어 구성</li><li><strong>Config Agent</strong>: ConfigMap, feature toggle 등 업데이트 조정 도구</li></ul><hr><h2 id=-2-구현-기법>⚙️ 2. 구현 기법<a hidden class=anchor aria-hidden=true href=#-2-구현-기법>#</a></h2><table><thead><tr><th>구현 방식</th><th>설명</th></tr></thead><tbody><tr><td><strong>Kubernetes Pod Sidecar</strong></td><td><code>spec.containers</code>에 Sidecar 추가 (<code>logging-agent</code>, <code>envoy</code>) (<a href="https://www.geeksforgeeks.org/system-design/sidecar-design-pattern-for-microservices/?utm_source=chatgpt.com" title="Sidecar Design Pattern for Microservices - GeeksforGeeks">geeksforgeeks.org</a>, <a href="https://istio.io/latest/blog/2023/native-sidecars/?utm_source=chatgpt.com" title="Kubernetes Native Sidecars in Istio">istio.io</a>, <a href="https://istio.io/latest/docs/overview/dataplane-modes/?utm_source=chatgpt.com" title="Sidecar or ambient? - Istio">istio.io</a>)</td></tr><tr><td><strong>Service Mesh (Istio Envoy)</strong></td><td>각 Pod에 Envoy Proxy 자동 주입 (mutating webhook)</td></tr><tr><td><strong>Container 기술 (Docker Compose)</strong></td><td><code>docker-compose</code>에서 명시적으로 사이드카 컨테이너 배치</td></tr><tr><td><strong>브로커리스 대체 (eBPF대신 Ambient mode)</strong></td><td>플랫폼 차원 프록시 제거 방식 제공</td></tr></tbody></table><hr><h2 id=-3-장점>✅ 3. 장점<a hidden class=anchor aria-hidden=true href=#-3-장점>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>기능 분리 (Separation)</td><td>비즈니스 로직과 인프라 기능을 분리하여 코드 복잡도 감소 (<a href="https://www.geeksforgeeks.org/system-design/sidecar-design-pattern-for-microservices/?utm_source=chatgpt.com" title="Sidecar Design Pattern for Microservices - GeeksforGeeks">geeksforgeeks.org</a>)</td></tr><tr><td>장점</td><td>언어 독립성 (Polyglot)</td><td>Sidecar는 별도 런타임, 어떤 언어로 작성된 애플리케이션에도 작동</td></tr><tr><td>장점</td><td>일관된 정책 적용</td><td>트래픽/보안/로깅 등 공통 정책을 애플리케이션과 무관하게 적용 가능</td></tr><tr><td>장점</td><td>라이프사이클 동기화</td><td>애플리케이션과 함께 배포되며 동일한 스케일링/업데이트 주기로 동작</td></tr></tbody></table><hr><h2 id=-4-단점-및-문제점-및-해결방안>❌ 4. 단점 및 문제점 (및 해결방안)<a hidden class=anchor aria-hidden=true href=#-4-단점-및-문제점-및-해결방안>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>리소스 오버헤드</td><td>매 Pod마다 추가 컨테이너로 CPU/메모리 증가 (<a href="https://dev.to/devcorner/sidecar-pattern-in-microservices-a-detailed-guide-2akp?utm_source=chatgpt.com" title="Sidecar Pattern in Microservices: A Detailed Guide - DEV Community">dev.to</a>)</td><td>필요 기능만 포함된 Light-weight 사이드카 선택</td></tr><tr><td>단점</td><td>네트워크 지연</td><td>IPC 또는 프록시 경유로 지연 발생</td><td>eBPF, Ambient mode 도입 고려</td></tr><tr><td>단점</td><td>배포 복잡성</td><td>여러 컨테이너 동시 배포 설정 부담</td><td>Kubernetes Native Sidecars 기능 사용 추천</td></tr><tr><td>문제점</td><td>라이프사이클 불일치</td><td>사이드카 vs 애플리케이션 종료 시 충돌 발생</td><td>init 컨테이너, readiness/liveness probe 세밀 설정</td></tr><tr><td>문제점</td><td>디버깅 어려움</td><td>다중 컨테이너로 인해 추적에 복잡성 발생</td><td>Centralized logging / tracing 도구 활용</td></tr></tbody></table><hr><h2 id=-5-도전-과제-및-해결-방안>🛠️ 5. 도전 과제 및 해결 방안<a hidden class=anchor aria-hidden=true href=#-5-도전-과제-및-해결-방안>#</a></h2><ul><li><strong>리소스 최적화</strong>: eBPF 기반 도구(e.g. Cilium) 또는 Ambient mode 대안 연구</li><li><strong>성능 최적화</strong>: IPC 대신 in-process 라이브러리 또는 프로토콜 직결 방식</li><li><strong>배포 안정화</strong>: Kubernetes 1.28의 Native Sidecar 기능 활용하여 lifecycle 문제 해결 (<a href="https://arxiv.org/abs/2411.02267?utm_source=chatgpt.com" title="Technical Report: Performance Comparison of Service Mesh Frameworks: the MTLS Test Case">arxiv.org</a>, <a href="https://blog.bitsrc.io/implementing-the-sidecar-pattern-in-nodejs-2ec3954fe9b6?utm_source=chatgpt.com" title="Implementing The Sidecar Pattern in a Microservices Based ...">blog.bitsrc.io</a>, <a href="https://istio.io/latest/blog/2023/native-sidecars/?utm_source=chatgpt.com" title="Kubernetes Native Sidecars in Istio">istio.io</a>)</li><li><strong>가시성 확보</strong>: Prometheus, Grafana, Zipkin, Jaeger 등 통합 모니터링 환경 구축</li></ul><hr><h2 id=-6-실무-사용-예시>🚀 6. 실무 사용 예시<a hidden class=anchor aria-hidden=true href=#-6-실무-사용-예시>#</a></h2><table><thead><tr><th>환경</th><th>사용 기술</th><th>목적</th><th>효과</th></tr></thead><tbody><tr><td>서비스 메시</td><td>Istio (Envoy sidecar)</td><td>트래픽 관리, mTLS, 인증, 트레이싱</td><td>CSP, 보안 강화, 관찰성 향상</td></tr><tr><td>로깅/모니터링</td><td>Fluentd/Prometheus 사이드카</td><td>애플리케이션 로그·메트릭 수집</td><td>코드 변경 없이 일관된 메트릭</td></tr><tr><td>구성 동적 업데이트</td><td>Config-Agent 사이드카</td><td>ConfigMap 주기 폴링 및 재로딩 자동화</td><td>앱 재배포 없이 설정 자동 업데이트</td></tr><tr><td>데이터 프록시</td><td>Cloud-sql-proxy 사이드카</td><td>Cloud DB 접근 보안 강화</td><td>비즈니스 로직 변경 없이 보안 강화</td></tr></tbody></table><hr><h2 id=-7-구현-예시-kubernetes-yaml>🧩 7. 구현 예시 (Kubernetes YAML)<a hidden class=anchor aria-hidden=true href=#-7-구현-예시-kubernetes-yaml>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13>13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14>14</a>
</span><span class=lnt id=hl-7-15><a class=lnlinks href=#hl-7-15>15</a>
</span><span class=lnt id=hl-7-16><a class=lnlinks href=#hl-7-16>16</a>
</span><span class=lnt id=hl-7-17><a class=lnlinks href=#hl-7-17>17</a>
</span><span class=lnt id=hl-7-18><a class=lnlinks href=#hl-7-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>my-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>myapp:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>envoy-sidecar</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>envoyproxy/envoy:v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>args</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;-c&#34;</span><span class=p>,</span><span class=s2>&#34;/etc/envoy/envoy.yaml&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumeMounts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>envoy-config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class=l>/etc/envoy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>envoy-config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>configMap</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>envoy-config</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li><strong>Envoy Sidecar</strong>: 로컬 프록시 역할 수행</li><li><strong>ConfigMap</strong>: 동적 라우트/정책 반영 가능</li><li><strong>Pod 동반 배포</strong>: 동일 라이프사이클 유지</li></ul><hr><h2 id=-8-최적화-고려사항-및-권장-사항>🔧 8. 최적화 고려사항 및 권장 사항<a hidden class=anchor aria-hidden=true href=#-8-최적화-고려사항-및-권장-사항>#</a></h2><table><thead><tr><th>고려사항</th><th>주의사항</th><th>권장 전략</th></tr></thead><tbody><tr><td><strong>경량화</strong></td><td>CPU/메모리 여유 공간 고려 필요</td><td>리소스 limit/requests 설정, 경량 이미지 사용</td></tr><tr><td><strong>지연 최소화</strong></td><td>프록시 패스 비용 영향 가능</td><td>IPC 또는 in-process 라이브러리 고려</td></tr><tr><td><strong>배포 안정성</strong></td><td>시작/종료 타이밍 문제</td><td>sidecar 순서 조정·init 컨테이너 활용</td></tr><tr><td><strong>Lifecycle 관리</strong></td><td>Pod 종료 시 sidecar 자동 종료 보장</td><td>preStop hook 설정</td></tr><tr><td><strong>모니터링 가시성</strong></td><td>사이드카 트래픽 미포착 위험</td><td>중앙 관찰성 플랫폼 연결</td></tr><tr><td><strong>대체 옵션 평가</strong></td><td>Ambient mode/eBPF 대체 가능성</td><td>버전 업데이트 모니터링, 기술 시범 도입</td></tr></tbody></table><hr><h2 id=-요약-및-권장-사항>🔚 요약 및 권장 사항<a hidden class=anchor aria-hidden=true href=#-요약-및-권장-사항>#</a></h2><p>Sidecar Pattern을 채택할 때는 아래 사항을 권장합니다:</p><ul><li>✅ <strong>Kubernetes 네이티브 사이드카 기능 활용</strong></li><li>✅ <strong>리소스 경량화 및 지연 최적화</strong></li><li>✅ <strong>생명주기 Hooks와 순서 정의로 안정화 보장</strong></li><li>✅ <strong>Centralized Logging + Distributed Tracing 구축</strong></li><li>✅ <strong>Ambientmode, eBPF 같은 신기술 검토 및 도입</strong></li></ul><p>추가로 <strong>Ambient mode/eBPF 비교</strong>, <strong>구성 자동화 코드</strong>, <strong>생명주기 제어 예제</strong> 등 원하신다면 말씀해 주세요! 😊</p><p>아래는 <strong>Sidecar Pattern</strong>의 나머지 심화 분석 내용입니다. <strong>활용 사례 with 코드·워크플로우</strong>, <strong>도전 과제</strong>, <strong>분류 기준</strong>, <strong>반드시 학습해야 할 내용</strong>, <strong>용어 정리</strong>까지 포함했습니다.</p><hr><h2 id=9-활용-사례--실무-적용-예제>9. 활용 사례 – 실무 적용 예제<a hidden class=anchor aria-hidden=true href=#9-활용-사례--실무-적용-예제>#</a></h2><h3 id=-사례-istio-envoy-사이드카-이용한-서비스-메시>📈 사례: Istio Envoy 사이드카 이용한 서비스 메시<a hidden class=anchor aria-hidden=true href=#-사례-istio-envoy-사이드카-이용한-서비스-메시>#</a></h3><h4 id=시스템-구성-및-워크플로우>시스템 구성 및 워크플로우<a hidden class=anchor aria-hidden=true href=#시스템-구성-및-워크플로우>#</a></h4><pre class=mermaid>graph LR
  Client --&gt; EnvoySidecar1 --&gt; AppService1 --&gt; EnvoySidecar1 --&gt; EnvoySidecar2 --&gt; AppService2
</pre><ul><li>자동 주입된 Envoy 사이드카가 mTLS, 라우팅, 트래픽 분산 처리</li><li>AppService는 인증와 로깅 코드를 포함하지 않고, 사이드카가 대신 수행</li><li>요청 흐름: Client → Envoy1 (TLS 해제) → App1 → Envoy1 → Envoy2 → App2</li></ul><h4 id=차이점-분석>차이점 분석<a hidden class=anchor aria-hidden=true href=#차이점-분석>#</a></h4><table><thead><tr><th>비교항목</th><th>Sidecar 사용 전</th><th>Sidecar 사용 후</th></tr></thead><tbody><tr><td>보안</td><td>App코드에 TLS 구현 필요</td><td>Envoy 사이드카가 TLS 자동 처리</td></tr><tr><td>로깅 & 모니터링</td><td>각 서비스에 직접 로깅 사이드 넣음</td><td>중앙화된 Envoy가 자동 수집 및 포워딩</td></tr><tr><td>구성 교체</td><td>서비스 별 업데이트 필요</td><td>사이드카만 재배포, 서비스는 변경 없음</td></tr></tbody></table><hr><h2 id=10-도전-과제>10. 도전 과제<a hidden class=anchor aria-hidden=true href=#10-도전-과제>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>원인 및 영향</th><th>탐지/진단</th><th>예방 및 해결책</th></tr></thead><tbody><tr><td>리소스</td><td>컨테이너 Overhead</td><td>Pod당 자원 증가</td><td>측정 모니터링</td><td>경량화 이미지, 요청 제한 설정</td></tr><tr><td>성능</td><td>IPC/Proxy 지연 증가</td><td>TCP hop 및 processing</td><td>latency 알람</td><td>in-process forwarding, eBPF</td></tr><tr><td>라이프사이클</td><td>동기화된 종료 실패</td><td>termination 순서 혼선</td><td>readiness/liveness probe</td><td>preStop + postStart 설정</td></tr><tr><td>유지보수</td><td>사이드카 버전 불일치</td><td>여러 Envoy 버전 혼용</td><td>버전 관리 도구</td><td>자동 사이드카 주입 & 롤링 업데이트</td></tr><tr><td>관찰성</td><td>트레이스 누락</td><td>Envoy 적용 누락 서비스</td><td>Distributed Trace</td><td>자동 context injection</td></tr></tbody></table><hr><h2 id=11-분류-기준에-따른-종류-및-유형>11. 분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#11-분류-기준에-따른-종류-및-유형>#</a></h2><table><thead><tr><th>기준</th><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>사이드카 구현 방식</td><td>Language-agnostic Sidecar</td><td>Envoy, Fluentd 등 언어 독립형 프록시</td></tr><tr><td></td><td>Embedded Sidecar Library</td><td>애플리케이션 코드 내장형 사이드카 라이브러리</td></tr><tr><td>배포 방식</td><td>Kubernetes Mounted Sidecar</td><td>Pod에 컨테이너로 함께 배포</td></tr><tr><td></td><td>OS-level Sidecar (Daemonset)</td><td>Node 레벨 데몬 형태로 배포(eBPF 기반)</td></tr></tbody></table><hr><h2 id=12-반드시-학습해야-할-내용>12. 반드시 학습해야 할 내용<a hidden class=anchor aria-hidden=true href=#12-반드시-학습해야-할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>컨테이너 기술</td><td>Kubernetes Pod Lifecycle</td><td>readiness/liveness hooks</td><td>사이드카 동기화된 수명 주기를 위한 필수 개념</td></tr><tr><td>프록시</td><td>Envoy Proxy Basics</td><td>listener, filter chain</td><td>mTLS, 라우팅, 로깅 구성 이해</td></tr><tr><td>관찰성</td><td>Distributed Tracing</td><td>Context Propagation</td><td>Envoy → App 간 trace context 전파 방식</td></tr><tr><td>네트워킹</td><td>eBPF / Ambient Mode</td><td>프로세스 레벨 트래픽 제어</td><td>사이드카 없는 경량 구조로 대체 기술</td></tr><tr><td>보안</td><td>mTLS in Service Mesh</td><td>인증서, CA, 인증서 관리</td><td>양방향 TLS 기반 서비스 간 통신 보호</td></tr></tbody></table><hr><h2 id=용어-정리-1>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-1>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>배포 패턴</td><td>Sidecar</td><td>지원용 컨테이너/프로세스를 배치하여 기능 분리하는 패턴</td></tr><tr><td>네트워크</td><td>Envoy</td><td>서비스 메시에서 사용하는 오픈소스 프록시</td></tr><tr><td>오케스트레이션</td><td>Pod</td><td>Kubernetes 내에 그룹화된 컨테이너 단위 배포 단위</td></tr><tr><td>성능 및 보안</td><td>mTLS</td><td>상호 TLS 인증 기반 서비스 메시 보안 통신 메커니즘</td></tr><tr><td>모니터링</td><td>Distributed Tracing</td><td>마이크로서비스 분산 호출을 추적하기 위한 추적 기술</td></tr></tbody></table><hr><h2 id=참고-및-출처-1>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-1>#</a></h2><ul><li>Istio Envoy 사이드카 개념 및 사용 사례</li><li>Kubernetes 사이드카 라이프사이클 관리 및 Native 기능</li><li>eBPF 기반 Ambient mode 연구 appings</li></ul><hr><p>필요하신 경우, <strong>eBPF 와 Envoy 비교 자료</strong>, <strong>자동 주입 스크립트</strong>, 또는 <strong>사이드카 라이프사이클 코드 예시</strong> 등 추가로 제공 가능합니다. 언제든지 말씀주세요! 😊</p><p>아래는 <strong>Sidecar Pattern</strong>에 대한 <strong>추가 심화 내용</strong>입니다. 특히 Kubernetes 네이티브 사이드카 도입, Ambient/eBPF와의 비교, lifecycle 자동화, e2e 코드 예시 등을 포함합니다.</p><hr><h2 id=-13-kubernetes-네이티브-사이드카-128-기능>🔄 13. Kubernetes 네이티브 사이드카 (1.28+ 기능)<a hidden class=anchor aria-hidden=true href=#-13-kubernetes-네이티브-사이드카-128-기능>#</a></h2><h3 id=핵심-요약>핵심 요약<a hidden class=anchor aria-hidden=true href=#핵심-요약>#</a></h3><ul><li>Kubernetes 1.28부터 <code>initContainers</code>에 <code>restartPolicy: Always</code> 옵션을 넣어 <strong>네이티브 사이드카</strong>를 사용할 수 있습니다. 1.29부터는 BETA, 1.33에서 Stable로 승격 (<a href="https://www.geeksforgeeks.org/system-design/sidecar-design-pattern-for-microservices/?utm_source=chatgpt.com" title="Sidecar Design Pattern for Microservices - GeeksforGeeks">spacelift.io</a>, <a href="https://istio.io/latest/blog/2023/native-sidecars/?utm_source=chatgpt.com" title="Kubernetes Native Sidecars in Istio">kubernetes.io</a>).</li><li>이 방식으로 시작 순서와 종료 순서를 보장하면서 <strong>Pod 라이프사이클과 동기화</strong>할 수 있습니다 .</li></ul><h3 id=주요-기능>주요 기능<a hidden class=anchor aria-hidden=true href=#주요-기능>#</a></h3><ul><li>Sidecar가 먼저 시작, 준비 상태가 되면 다음 init 및 애플리케이션 컨테이너 시작</li><li>애플리케이션 종료 후에 Sidecar 종료 → 깔끔한 shutdown</li><li>readiness/liveness/startup probe 지원</li></ul><h4 id=-예시-yaml>🖼️ 예시 YAML<a hidden class=anchor aria-hidden=true href=#-예시-yaml>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a>
</span><span class=lnt id=hl-9-11><a class=lnlinks href=#hl-9-11>11</a>
</span><span class=lnt id=hl-9-12><a class=lnlinks href=#hl-9-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>initContainers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>sidecar-agent</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>envoyproxy/envoy:v...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restartPolicy</span><span class=p>:</span><span class=w> </span><span class=l>Always</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>startupProbe</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>httpGet</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/health</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>15020</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>myapp:latest</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>이로써 Sidecar 동기화 문제를 코드 수준에서 해결할 수 있습니다 (<a href="https://istio.io/latest/docs/overview/dataplane-modes/?utm_source=chatgpt.com" title="Sidecar or ambient? - Istio">linkedin.com</a>, <a href="https://dev.to/devcorner/sidecar-pattern-in-microservices-a-detailed-guide-2akp?utm_source=chatgpt.com" title="Sidecar Pattern in Microservices: A Detailed Guide - DEV Community">kubernetes.io</a>).</p><hr><h2 id=-14-ambient-mode--ebpf-기반-경량-대체-vs-사이드카>🔍 14. Ambient Mode / eBPF 기반 경량 대체 vs 사이드카<a hidden class=anchor aria-hidden=true href=#-14-ambient-mode--ebpf-기반-경량-대체-vs-사이드카>#</a></h2><table><thead><tr><th>항목</th><th>사이드카 (Sidecar)</th><th>Ambient Mode / eBPF</th></tr></thead><tbody><tr><td>배포 단위</td><td>Pod 내부 컨테이너</td><td>Node 레벨 데몬 또는 CNI 플러그인</td></tr><tr><td>리소스 오버헤드</td><td>Pod당 추가 컨테이너 리소스 사용</td><td>eBPF 바이트코드 기반, 경량</td></tr><tr><td>네트워크 지연</td><td>IPC 또는 프록시 홉 추가, 지연 발생 가능</td><td>커널 내부 처리 최적화, 낮은 지연 보장</td></tr><tr><td>라이프사이클 통제</td><td>Pod와 밀접하게 동기화됨</td><td>애플리케이션과 무관하게 동작</td></tr><tr><td>사용 사례</td><td>서비스 메시, 로깅, 모니터링</td><td>고성능 네트워크 계측, 보안 정책 삽입 등 고속 환경</td></tr></tbody></table><p><strong>권장</strong>: 고속 서비스 환경에서는 eBPF 기반 처리가 유리하며, 사이드카는 DevOps/서비스 메시 통합에 적합합니다.</p><hr><h2 id=-15-lifecycle-자동화-예제>⚙️ 15. Lifecycle 자동화 예제<a hidden class=anchor aria-hidden=true href=#-15-lifecycle-자동화-예제>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1>1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2>2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3>3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>lifecycle</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>preStop</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>exec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;sh&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;-c&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;curl -X POST localhost:15000/quitquitquit&#34;</span><span class=p>]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>Pod 종료 시 Sidecar가 적절히 종료되도록 <code>preStop</code> hook 설정</li><li><code>startupProbe</code>와 <code>readinessProbe</code>로 준비 여부 제어</li></ul><hr><h2 id=-16-권장-적용-체크리스트>✅ 16. 권장 적용 체크리스트<a hidden class=anchor aria-hidden=true href=#-16-권장-적용-체크리스트>#</a></h2><ul><li><input checked disabled type=checkbox> Kubernetes ≥1.29, <code>SidecarContainers</code> 활성화 여부 확인</li><li><input checked disabled type=checkbox> <code>initContainers</code> + <code>restartPolicy: Always</code> 사용</li><li><input checked disabled type=checkbox> <code>startupProbe</code>로 Sidecar 준비 여부 보장</li><li><input checked disabled type=checkbox> Lifecycle hook (<code>preStop</code>) 설정으로 graceful shutdown</li><li><input checked disabled type=checkbox> 리소스 제한 (cpu/mem) 설정</li><li><input checked disabled type=checkbox> Node가 <code>SidecarContainers</code> 지원 여부 노드 셀렉터, 토폴로지 고려</li><li><input checked disabled type=checkbox> Ambient/eBPF 사용 가능 환경에서 대안을 평가</li></ul><hr><h2 id=다음-단계-제안>다음 단계 제안<a hidden class=anchor aria-hidden=true href=#다음-단계-제안>#</a></h2><ul><li><strong>Sidecar 자동 주입(script/webhook)</strong> 구현 예제</li><li><strong>Envoy vs eBPF 성능 비교 벤치마크</strong></li><li><strong>Ambient mode eBPF 설정 예시 + 카탈로그 제공</strong></li><li><strong>CI/CD 파이프라인에서 Sidecar 템플릿 자동 적용</strong></li></ul><p>필요하신 내용을 말씀해 주세요! 😊</p><p>아래는 요청하신 <strong>Sidecar 자동 주입(webhook 스크립트)</strong>, <strong>Envoy vs eBPF 성능 비교 벤치마크</strong>, <strong>CI/CD 파이프라인에서 Sidecar 템플릿 자동 적용</strong>에 대한 구체적인 구현 예시와 워크플로우 정리입니다.</p><hr><h2 id=1-sidecar-자동-주입--mutating-webhook-구현-예제->1. Sidecar 자동 주입 – Mutating Webhook 구현 예제 🛠️<a hidden class=anchor aria-hidden=true href=#1-sidecar-자동-주입--mutating-webhook-구현-예제->#</a></h2><h3 id=코드-예시-gogithubcommorvencaokube-sidecar-injector-기반>코드 예시 (Go/github.com/morvencao/kube-sidecar-injector 기반)<a hidden class=anchor aria-hidden=true href=#코드-예시-gogithubcommorvencaokube-sidecar-injector-기반>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15>15</a>
</span><span class=lnt id=hl-11-16><a class=lnlinks href=#hl-11-16>16</a>
</span><span class=lnt id=hl-11-17><a class=lnlinks href=#hl-11-17>17</a>
</span><span class=lnt id=hl-11-18><a class=lnlinks href=#hl-11-18>18</a>
</span><span class=lnt id=hl-11-19><a class=lnlinks href=#hl-11-19>19</a>
</span><span class=lnt id=hl-11-20><a class=lnlinks href=#hl-11-20>20</a>
</span><span class=lnt id=hl-11-21><a class=lnlinks href=#hl-11-21>21</a>
</span><span class=lnt id=hl-11-22><a class=lnlinks href=#hl-11-22>22</a>
</span><span class=lnt id=hl-11-23><a class=lnlinks href=#hl-11-23>23</a>
</span><span class=lnt id=hl-11-24><a class=lnlinks href=#hl-11-24>24</a>
</span><span class=lnt id=hl-11-25><a class=lnlinks href=#hl-11-25>25</a>
</span><span class=lnt id=hl-11-26><a class=lnlinks href=#hl-11-26>26</a>
</span><span class=lnt id=hl-11-27><a class=lnlinks href=#hl-11-27>27</a>
</span><span class=lnt id=hl-11-28><a class=lnlinks href=#hl-11-28>28</a>
</span><span class=lnt id=hl-11-29><a class=lnlinks href=#hl-11-29>29</a>
</span><span class=lnt id=hl-11-30><a class=lnlinks href=#hl-11-30>30</a>
</span><span class=lnt id=hl-11-31><a class=lnlinks href=#hl-11-31>31</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=o>*</span><span class=nx>sidecarInjector</span><span class=p>)</span> <span class=nf>mutate</span><span class=p>(</span><span class=nx>ar</span> <span class=o>*</span><span class=nx>admissionv1</span><span class=p>.</span><span class=nx>AdmissionReview</span><span class=p>)</span> <span class=o>*</span><span class=nx>admissionv1</span><span class=p>.</span><span class=nx>AdmissionResponse</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>req</span> <span class=o>:=</span> <span class=nx>ar</span><span class=p>.</span><span class=nx>Request</span>
</span></span><span class=line><span class=cl>  <span class=nx>pod</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>corev1</span><span class=p>.</span><span class=nx>Pod</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>  <span class=nx>json</span><span class=p>.</span><span class=nf>Unmarshal</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>Object</span><span class=p>.</span><span class=nx>Raw</span><span class=p>,</span> <span class=nx>pod</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=nx>pod</span><span class=p>.</span><span class=nx>Namespace</span> <span class=o>==</span> <span class=s>&#34;skip&#34;</span> <span class=o>||</span> <span class=nx>pod</span><span class=p>.</span><span class=nx>Labels</span><span class=p>[</span><span class=s>&#34;inject-sidecar&#34;</span><span class=p>]</span> <span class=o>!=</span> <span class=s>&#34;true&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nf>allowResponse</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>UID</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>sidecar</span> <span class=o>:=</span> <span class=nx>corev1</span><span class=p>.</span><span class=nx>Container</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span><span class=p>:</span>  <span class=s>&#34;logger-sidecar&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>Image</span><span class=p>:</span> <span class=s>&#34;fluentd:latest&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>VolumeMounts</span><span class=p>:</span> <span class=p>[]</span><span class=nx>corev1</span><span class=p>.</span><span class=nx>VolumeMount</span><span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;varlog&#34;</span><span class=p>,</span> <span class=nx>MountPath</span><span class=p>:</span> <span class=s>&#34;/var/log/app&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>patchOps</span> <span class=o>:=</span> <span class=p>[]</span><span class=nx>patchOperation</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span><span class=nx>Op</span><span class=p>:</span> <span class=s>&#34;add&#34;</span><span class=p>,</span> <span class=nx>Path</span><span class=p>:</span> <span class=s>&#34;/spec/containers/-&#34;</span><span class=p>,</span> <span class=nx>Value</span><span class=p>:</span> <span class=nx>sidecar</span><span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>patch</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Marshal</span><span class=p>(</span><span class=nx>patchOps</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=o>&amp;</span><span class=nx>admissionv1</span><span class=p>.</span><span class=nx>AdmissionResponse</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>UID</span><span class=p>:</span>     <span class=nx>req</span><span class=p>.</span><span class=nx>UID</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>Allowed</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>Patch</span><span class=p>:</span>   <span class=nx>patch</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>PatchType</span><span class=p>:</span> <span class=kd>func</span><span class=p>()</span> <span class=o>*</span><span class=nx>admissionv1</span><span class=p>.</span><span class=nx>PatchType</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>pt</span> <span class=o>:=</span> <span class=nx>admissionv1</span><span class=p>.</span><span class=nx>PatchTypeJSONPatch</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=o>&amp;</span><span class=nx>pt</span>
</span></span><span class=line><span class=cl>    <span class=p>}(),</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>inject-sidecar=true</code> 라벨이 있는 Pod에 자동으로 사이드카 컨테이너 추가</li><li>Kubernetes <code>MutatingAdmissionWebhook</code>와 함께 배포
(<a href="https://www.geeksforgeeks.org/system-design/sidecar-design-pattern-for-microservices/?utm_source=chatgpt.com" title="Sidecar Design Pattern for Microservices - GeeksforGeeks">github.com</a>, <a href="https://istio.io/latest/blog/2023/native-sidecars/?utm_source=chatgpt.com" title="Kubernetes Native Sidecars in Istio">medium.com</a>)</li></ul><hr><h2 id=2-envoy-vs-ebpf--성능-비교-벤치마크>2. Envoy vs eBPF – 성능 비교 벤치마크<a hidden class=anchor aria-hidden=true href=#2-envoy-vs-ebpf--성능-비교-벤치마크>#</a></h2><table><thead><tr><th>항목</th><th>Sidecar (Envoy)</th><th>Ambient/eBPF 데이터플레인</th></tr></thead><tbody><tr><td>P99 지연</td><td>+0.37~+0.38 s (3200 RPS)</td><td>+0.03 s (Istio Ambient) / +0.22 s (Cilium) (<a href="https://istio.io/latest/docs/overview/dataplane-modes/?utm_source=chatgpt.com" title="Sidecar or ambient? - Istio">arxiv.org</a>)</td></tr><tr><td>CPU 사용량</td><td>서버 측 +0.74 core (Envoy)</td><td>+0.23 core (Ambient) / +0.12 core (Cilium)</td></tr><tr><td>메모리 사용량</td><td>+173 MiB</td><td>+26 MiB (Ambient) / +95 MiB (Cilium)</td></tr><tr><td>보안/기능 범위</td><td>L7 TLS, 라우팅, retry 복잡 기능 지원</td><td>L4 중심, 코드 제한, 디버깅 어려움</td></tr></tbody></table><p><strong>요약</strong>:</p><ul><li><strong>Envoy 사이드카</strong>는 기능이 풍부하지만 리소스 오버헤드가 높음.</li><li><strong>eBPF 기반 Ambient 모드</strong>는 지연 및 자원 소모가 적지만 L4 중심 기능에 적합.
(<a href="https://dev.to/devcorner/sidecar-pattern-in-microservices-a-detailed-guide-2akp?utm_source=chatgpt.com" title="Sidecar Pattern in Microservices: A Detailed Guide - DEV Community">tetrate.io</a>)</li></ul><hr><h2 id=3-cicd에서-sidecar-템플릿-자동-적용>3. CI/CD에서 Sidecar 템플릿 자동 적용<a hidden class=anchor aria-hidden=true href=#3-cicd에서-sidecar-템플릿-자동-적용>#</a></h2><h3 id=전략>전략<a hidden class=anchor aria-hidden=true href=#전략>#</a></h3><ul><li><strong>Helm 차트</strong> 또는 <strong>Kustomize</strong>로 사이드카 포함 템플릿 관리</li><li><strong>GitOps</strong>(ArgoCD/Flux) 사용, packaged sidecar 설정 포함</li><li><code>post-renderer</code> 또는 <code>helm plugin</code> 이용해 매니페스트 주입 가능</li></ul><h3 id=helm-values-예>Helm values 예<a hidden class=anchor aria-hidden=true href=#helm-values-예>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1>1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2>2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3>3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>sidecar</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>envoyproxy/envoy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>configMap</span><span class=p>:</span><span class=w> </span><span class=l>envoy-config</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><code>deployment.yaml</code> 예</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1> 1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2> 2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3> 3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4> 4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5> 5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6> 6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7> 7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8> 8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9> 9</a>
</span><span class=lnt id=hl-13-10><a class=lnlinks href=#hl-13-10>10</a>
</span><span class=lnt id=hl-13-11><a class=lnlinks href=#hl-13-11>11</a>
</span><span class=lnt id=hl-13-12><a class=lnlinks href=#hl-13-12>12</a>
</span><span class=lnt id=hl-13-13><a class=lnlinks href=#hl-13-13>13</a>
</span><span class=lnt id=hl-13-14><a class=lnlinks href=#hl-13-14>14</a>
</span><span class=lnt id=hl-13-15><a class=lnlinks href=#hl-13-15>15</a>
</span><span class=lnt id=hl-13-16><a class=lnlinks href=#hl-13-16>16</a>
</span><span class=lnt id=hl-13-17><a class=lnlinks href=#hl-13-17>17</a>
</span><span class=lnt id=hl-13-18><a class=lnlinks href=#hl-13-18>18</a>
</span><span class=lnt id=hl-13-19><a class=lnlinks href=#hl-13-19>19</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span>{{<span class=w> </span><span class=l>.Values.app.image }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>{{- <span class=l>if .Values.sidecar.enabled }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>envoy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span>{{<span class=w> </span><span class=l>.Values.sidecar.image }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>volumeMounts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>envoy-config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class=l>/etc/envoy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>{{- <span class=l>end }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>{{- <span class=l>if .Values.sidecar.enabled }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>envoy-config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>configMap</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>name</span><span class=p>:</span><span class=w> </span>{{<span class=w> </span><span class=l>.Values.sidecar.configMap }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>{{- <span class=l>end }}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>GitOps 툴에 매니페스트 반영 시 자동으로 사이드카 포함된 Pod 생성</li></ul><hr><h3 id=-종합-요약-및-권장-사항>✅ 종합 요약 및 권장 사항<a hidden class=anchor aria-hidden=true href=#-종합-요약-및-권장-사항>#</a></h3><ul><li><p><strong>MutatingWebhook</strong> 기반 자동 주입: Pod 정의의 변경 없이 사이드카 자동 배포</p></li><li><p><strong>성능 고려</strong>: Envoy는 기능이 풍부하지만, latency/리소스 민감 환경엔 eBPF 검토</p></li><li><p><strong>CI/CD 통합</strong>: Helm/Kustomize + GitOps 조합으로 템플릿 적용 자동화</p></li><li><p><strong>최적화 방안</strong>:</p><ul><li>기능 중심으로 Envoy vs eBPF 혼합 모델 구성</li><li>Helm chart에 사이드카 유무, 리소스 설정값 기능 포함</li><li>eBPF 기반 Ambient mode로 마이그레이션 고려</li></ul></li></ul><p>추가적으로, <strong>webhook 배포 스크립트</strong>, <strong>Envoy/eBPF 벤치마크 실제 측정 코드</strong>, <strong>GitOps 예제 레포 구성</strong> 등이 필요하시면 언제든지 요청해 주세요! 😊</p><p>이 주제에 대해 체계적으로 조사하고 분석해보겠습니다. 먼저 최신 정보를 수집하여 완전한 분석을 제공하겠습니다.</p><h1 id=sidecar-pattern-심화-분석-보고서>Sidecar Pattern 심화 분석 보고서<a hidden class=anchor aria-hidden=true href=#sidecar-pattern-심화-분석-보고서>#</a></h1><h2 id=제1부-개요-및-분류><strong>제1부: 개요 및 분류</strong><a hidden class=anchor aria-hidden=true href=#제1부-개요-및-분류>#</a></h2><h3 id=태그><strong>태그</strong><a hidden class=anchor aria-hidden=true href=#태그>#</a></h3><p><code>Sidecar-Pattern</code>, <code>Microservices-Architecture</code>, <code>Container-Orchestration</code>, <code>Service-Mesh</code></p><h3 id=분류-체계-검토><strong>분류 체계 검토</strong><a hidden class=anchor aria-hidden=true href=#분류-체계-검토>#</a></h3><p>&ldquo;Computer Science and Engineering > Software Engineering > Design and Architecture > Architecture Patterns > Deployment and Scalability Patterns&rdquo;</p><p><strong>분류 적절성 분석:</strong>
현재 분류가 매우 적절합니다. Sidecar Pattern은 소프트웨어 공학의 설계 및 아키텍처 영역에서 배포와 확장성을 위한 아키텍처 패턴으로 분류되는 것이 정확합니다. 특히 마이크로서비스 아키텍처와 컨테이너 오케스트레이션 환경에서 핵심적인 역할을 하는 패턴입니다.</p><h3 id=주제-요약-200자-내외><strong>주제 요약 (200자 내외)</strong><a hidden class=anchor aria-hidden=true href=#주제-요약-200자-내외>#</a></h3><p>Sidecar Pattern은 주 애플리케이션 컨테이너와 함께 실행되는 보조 컨테이너를 통해 로깅, 모니터링, 보안, 네트워킹 등의 부가 기능을 분리하여 제공하는 마이크로서비스 아키텍처 패턴입니다. 애플리케이션 코드 수정 없이 횡단 관심사를 처리할 수 있는 모듈화된 접근 방식을 제공합니다.</p><h3 id=전체-개요-250자-내외><strong>전체 개요 (250자 내외)</strong><a hidden class=anchor aria-hidden=true href=#전체-개요-250자-내외>#</a></h3><p>Sidecar Pattern은 오토바이의 사이드카처럼 주 애플리케이션에 부착되어 지원 기능을 제공하는 설계 패턴입니다. 컨테이너 환경에서 주 컨테이너와 동일한 라이프사이클을 공유하면서 로깅, 모니터링, 프록시, 보안 등의 횡단 관심사를 독립적으로 처리합니다. 서비스 메시와 클라우드 네이티브 환경에서 특히 중요한 역할을 담당하며, 확장성과 유지보수성을 크게 향상시킵니다.</p><hr><h2 id=제2부-핵심-개념-및-원리><strong>제2부: 핵심 개념 및 원리</strong><a hidden class=anchor aria-hidden=true href=#제2부-핵심-개념-및-원리>#</a></h2><h3 id=핵심-개념><strong>핵심 개념</strong><a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><h4 id=기본-정의와-개념><strong>기본 정의와 개념</strong><a hidden class=anchor aria-hidden=true href=#기본-정의와-개념>#</a></h4><p>Sidecar Pattern은 주 애플리케이션 프로세스나 컨테이너 옆에서 실행되는 보조 프로세스 또는 컨테이너를 통해 애플리케이션의 기능을 확장하거나 향상시키는 아키텍처 설계 패턴입니다. 이 패턴은 관심사의 분리(Separation of Concerns) 원칙을 따라 핵심 비즈니스 로직과 부가 기능을 명확히 구분합니다.</p><h4 id=실무-구현-관련성><strong>실무 구현 관련성</strong><a hidden class=anchor aria-hidden=true href=#실무-구현-관련성>#</a></h4><ul><li><strong>컨테이너 오케스트레이션</strong>: Kubernetes Pod 내에서 다중 컨테이너 구조로 구현</li><li><strong>서비스 메시</strong>: Istio, Linkerd 등에서 Envoy 프록시를 사이드카로 활용</li><li><strong>모니터링 및 로깅</strong>: Prometheus, Fluentd 등을 사이드카로 배포</li><li><strong>보안</strong>: 인증, 권한 부여, 암호화 기능을 독립적으로 처리</li></ul><h3 id=배경-1><strong>배경</strong><a hidden class=anchor aria-hidden=true href=#배경-1>#</a></h3><p>마이크로서비스 아키텍처의 발전과 함께 서비스 간 통신, 모니터링, 보안 등의 횡단 관심사를 효율적으로 처리할 필요성이 증가했습니다. 기존의 라이브러리 방식은 언어 종속성과 버전 호환성 문제를 야기했으며, 별도 서비스로 분리하면 네트워크 지연이 발생했습니다. 이러한 문제를 해결하기 위해 Sidecar Pattern이 등장했습니다.</p><h3 id=목적-및-필요성><strong>목적 및 필요성</strong><a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><ul><li><strong>횡단 관심사의 모듈화</strong>: 로깅, 모니터링, 보안 등을 독립적으로 관리</li><li><strong>언어 중립성</strong>: 주 애플리케이션의 프로그래밍 언어와 무관하게 기능 제공</li><li><strong>재사용성</strong>: 동일한 사이드카를 여러 서비스에서 공유 가능</li><li><strong>운영 효율성</strong>: 애플리케이션 코드 변경 없이 인프라 기능 추가/수정</li></ul><h3 id=주요-기능-및-역할><strong>주요 기능 및 역할</strong><a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><h4 id=핵심-기능><strong>핵심 기능</strong><a hidden class=anchor aria-hidden=true href=#핵심-기능>#</a></h4><ol><li><strong>네트워킹 프록시</strong>: 트래픽 라우팅, 로드 밸런싱, 서킷 브레이커</li><li><strong>관찰성(Observability)</strong>: 메트릭 수집, 분산 추적, 로그 집계</li><li><strong>보안</strong>: mTLS, 인증, 권한 부여, 정책 적용</li><li><strong>구성 관리</strong>: 동적 설정 업데이트, 시크릿 관리</li></ol><h4 id=역할><strong>역할</strong><a hidden class=anchor aria-hidden=true href=#역할>#</a></h4><ul><li><strong>어댑터 역할</strong>: 레거시 시스템과 현대적 인프라 간 브릿지</li><li><strong>앰배서더 역할</strong>: 외부 서비스와의 통신 추상화</li><li><strong>보조 서비스</strong>: 주 애플리케이션의 부가 기능 처리</li></ul><h2 id=sidecar-pattern-작동-원리>Sidecar Pattern 작동 원리<a hidden class=anchor aria-hidden=true href=#sidecar-pattern-작동-원리>#</a></h2><h3 id=기본-작동-메커니즘>기본 작동 메커니즘<a hidden class=anchor aria-hidden=true href=#기본-작동-메커니즘>#</a></h3><pre class=mermaid>graph TB
    subgraph &#34;Pod/Container Group&#34;
        direction TB
        A[Main Application Container&lt;br/&gt;핵심 비즈니스 로직] 
        B[Sidecar Container&lt;br/&gt;횡단 관심사 처리]
        
        A -.-&gt; B
        B -.-&gt; A
    end
    
    C[External Service] 
    D[Monitoring System]
    E[Log Aggregator]
    F[Config Store]
    
    B --&gt; C
    B --&gt; D
    B --&gt; E
    B --&gt; F
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#fff3e0
    style D fill:#fff3e0
    style E fill:#fff3e0
    style F fill:#fff3e0
</pre><h3 id=통신-흐름>통신 흐름<a hidden class=anchor aria-hidden=true href=#통신-흐름>#</a></h3><pre class=mermaid>sequenceDiagram
    participant Client
    participant Sidecar
    participant MainApp
    participant External

    Client-&gt;&gt;Sidecar: 1. HTTP Request
    Sidecar-&gt;&gt;Sidecar: 2. 로깅, 인증 처리
    Sidecar-&gt;&gt;MainApp: 3. 요청 전달
    MainApp-&gt;&gt;MainApp: 4. 비즈니스 로직 처리
    MainApp-&gt;&gt;Sidecar: 5. 응답 반환
    Sidecar-&gt;&gt;External: 6. 메트릭 전송
    Sidecar-&gt;&gt;Client: 7. 최종 응답
</pre><h3 id=라이프사이클-공유>라이프사이클 공유<a hidden class=anchor aria-hidden=true href=#라이프사이클-공유>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1>1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2>2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3>3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4>4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5>5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Container Start → [Main App + Sidecar] → Runtime → [Main App + Sidecar] → Container Stop
</span></span><span class=line><span class=cl>                           ↓                           ↓
</span></span><span class=line><span class=cl>                    공유 리소스 접근              실시간 모니터링
</span></span><span class=line><span class=cl>                    - 네트워크                    - 헬스체크
</span></span><span class=line><span class=cl>                    - 파일시스템                  - 메트릭 수집
</span></span><span class=line><span class=cl>                    - 환경변수                    - 로그 전송
</span></span></code></pre></td></tr></table></div></div><h3 id=구조-및-아키텍처><strong>구조 및 아키텍처</strong><a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h3><h4 id=아키텍처-다이어그램><strong>아키텍처 다이어그램</strong><a hidden class=anchor aria-hidden=true href=#아키텍처-다이어그램>#</a></h4><h2 id=전체-아키텍처>전체 아키텍처<a hidden class=anchor aria-hidden=true href=#전체-아키텍처>#</a></h2><pre class=mermaid>graph TB
    subgraph &#34;Service Mesh Architecture&#34;
        subgraph &#34;Pod 1&#34;
            A1[App A]
            S1[Sidecar Proxy&lt;br/&gt;Envoy]
            A1 &lt;--&gt; S1
        end
        
        subgraph &#34;Pod 2&#34; 
            A2[App B]
            S2[Sidecar Proxy&lt;br/&gt;Envoy]
            A2 &lt;--&gt; S2
        end
        
        subgraph &#34;Pod 3&#34;
            A3[App C]
            S3[Sidecar Proxy&lt;br/&gt;Envoy]
            A3 &lt;--&gt; S3
        end
        
        subgraph &#34;Control Plane&#34;
            CP[Istiod&lt;br/&gt;Configuration Management]
        end
        
        S1 &lt;--&gt; S2
        S2 &lt;--&gt; S3
        S1 &lt;--&gt; S3
        
        CP -.-&gt; S1
        CP -.-&gt; S2  
        CP -.-&gt; S3
    end
    
    subgraph &#34;External Systems&#34;
        MON[Monitoring&lt;br/&gt;Prometheus]
        LOG[Logging&lt;br/&gt;ElasticSearch]
        SEC[Security&lt;br/&gt;Certificate Authority]
    end
    
    S1 --&gt; MON
    S2 --&gt; LOG
    S3 --&gt; SEC
    
    style A1 fill:#e3f2fd
    style A2 fill:#e3f2fd
    style A3 fill:#e3f2fd
    style S1 fill:#fce4ec
    style S2 fill:#fce4ec
    style S3 fill:#fce4ec
    style CP fill:#e8f5e8
</pre><h2 id=계층별-구조>계층별 구조<a hidden class=anchor aria-hidden=true href=#계층별-구조>#</a></h2><pre class=mermaid>graph TB
    subgraph &#34;Application Layer&#34;
        AL[Business Logic&lt;br/&gt;Core Application Functions]
    end
    
    subgraph &#34;Sidecar Layer&#34;
        direction LR
        SL1[Network Proxy] 
        SL2[Observability]
        SL3[Security]
        SL4[Configuration]
    end
    
    subgraph &#34;Infrastructure Layer&#34;
        direction LR
        IL1[Container Runtime]
        IL2[Network]
        IL3[Storage]
        IL4[Orchestration]
    end
    
    AL --&gt; SL1
    AL --&gt; SL2
    AL --&gt; SL3
    AL --&gt; SL4
    
    SL1 --&gt; IL1
    SL2 --&gt; IL2
    SL3 --&gt; IL3
    SL4 --&gt; IL4
    
    style AL fill:#e1f5fe
    style SL1 fill:#f3e5f5
    style SL2 fill:#f3e5f5
    style SL3 fill:#f3e5f5
    style SL4 fill:#f3e5f5
    style IL1 fill:#fff3e0
    style IL2 fill:#fff3e0
    style IL3 fill:#fff3e0
    style IL4 fill:#fff3e0
</pre><h2 id=데이터-플로우>데이터 플로우<a hidden class=anchor aria-hidden=true href=#데이터-플로우>#</a></h2><pre class=mermaid>flowchart LR
    subgraph &#34;Ingress Traffic&#34;
        IT[Incoming Request]
    end
    
    subgraph &#34;Sidecar Processing&#34;
        direction TB
        SP1[Authentication]
        SP2[Rate Limiting]
        SP3[Load Balancing]
        SP4[Circuit Breaking]
        
        SP1 --&gt; SP2
        SP2 --&gt; SP3
        SP3 --&gt; SP4
    end
    
    subgraph &#34;Application&#34;
        APP[Main Application&lt;br/&gt;Business Logic]
    end
    
    subgraph &#34;Observability&#34;
        direction TB
        OB1[Metrics Collection]
        OB2[Distributed Tracing]
        OB3[Log Aggregation]
    end
    
    subgraph &#34;Egress Traffic&#34;
        ET[Outgoing Response]
    end
    
    IT --&gt; SP1
    SP4 --&gt; APP
    APP --&gt; OB1
    OB1 --&gt; OB2
    OB2 --&gt; OB3
    OB3 --&gt; ET
    
    style IT fill:#e8f5e8
    style SP1 fill:#fce4ec
    style SP2 fill:#fce4ec
    style SP3 fill:#fce4ec
    style SP4 fill:#fce4ec
    style APP fill:#e3f2fd
    style OB1 fill:#fff8e1
    style OB2 fill:#fff8e1
    style OB3 fill:#fff8e1
    style ET fill:#e8f5e8
</pre><h4 id=구성-요소><strong>구성 요소</strong><a hidden class=anchor aria-hidden=true href=#구성-요소>#</a></h4><h5 id=필수-구성요소-1><strong>필수 구성요소</strong><a hidden class=anchor aria-hidden=true href=#필수-구성요소-1>#</a></h5><table><thead><tr><th>구성요소</th><th>기능</th><th>역할</th><th>특징</th></tr></thead><tbody><tr><td><strong>주 애플리케이션 컨테이너</strong></td><td>핵심 비즈니스 로직 처리</td><td>서비스의 주요 기능 제공</td><td>언어/프레임워크 독립적</td></tr><tr><td><strong>사이드카 컨테이너</strong></td><td>횡단 관심사 처리</td><td>보조 기능 및 인프라 서비스</td><td>주 컨테이너와 라이프사이클 공유</td></tr><tr><td><strong>공유 네트워크 네임스페이스</strong></td><td>컨테이너 간 통신</td><td>localhost를 통한 빠른 통신</td><td>네트워크 지연 최소화</td></tr><tr><td><strong>공유 파일시스템</strong></td><td>데이터 교환</td><td>설정, 로그, 임시 파일 공유</td><td>볼륨 마운트를 통한 데이터 공유</td></tr></tbody></table><h5 id=선택-구성요소><strong>선택 구성요소</strong><a hidden class=anchor aria-hidden=true href=#선택-구성요소>#</a></h5><table><thead><tr><th>구성요소</th><th>기능</th><th>역할</th><th>적용 시나리오</th></tr></thead><tbody><tr><td><strong>Init 컨테이너</strong></td><td>초기화 작업</td><td>사전 설정, 의존성 준비</td><td>복잡한 설정이 필요한 경우</td></tr><tr><td><strong>볼륨 컨테이너</strong></td><td>데이터 지속성</td><td>상태 정보 유지</td><td>상태 저장이 필요한 경우</td></tr><tr><td><strong>보안 컨테이너</strong></td><td>보안 정책 적용</td><td>접근 제어, 암호화</td><td>고보안 환경</td></tr><tr><td><strong>모니터링 에이전트</strong></td><td>상세 모니터링</td><td>애플리케이션별 메트릭 수집</td><td>세밀한 관찰성이 필요한 경우</td></tr></tbody></table><h3 id=구현-기법><strong>구현 기법</strong><a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h3><h4 id=컨테이너-오케스트레이션-기법><strong>컨테이너 오케스트레이션 기법</strong><a hidden class=anchor aria-hidden=true href=#컨테이너-오케스트레이션-기법>#</a></h4><p><strong>1. Kubernetes Pod 패턴</strong></p><ul><li><strong>정의</strong>: 하나의 Pod 내에 여러 컨테이너를 배치하는 방식</li><li><strong>구성</strong>: 주 애플리케이션 컨테이너 + 사이드카 컨테이너</li><li><strong>목적</strong>: 밀접한 결합이 필요한 컨테이너들을 함께 관리</li><li><strong>실제 예시</strong>: Istio 서비스 메시에서 Envoy 프록시를 애플리케이션과 함께 배포</li></ul><p><strong>2. Service Mesh 구현</strong></p><ul><li><strong>정의</strong>: 네트워크 프록시를 사이드카로 배치하여 서비스 간 통신 관리</li><li><strong>구성</strong>: 데이터 플레인(사이드카 프록시) + 컨트롤 플레인(관리 서비스)</li><li><strong>목적</strong>: 서비스 간 통신의 보안, 관찰성, 트래픽 관리</li><li><strong>시스템 구성</strong>:<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1>1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2>2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Service A → Envoy Sidecar → Network → Envoy Sidecar → Service B
</span></span><span class=line><span class=cl>             ↓                                      ↓
</span></span><span class=line><span class=cl>         Control Plane ←——————————————————————→ Control Plane
</span></span></code></pre></td></tr></table></div></div></li></ul><p><strong>3. 로깅 에이전트 패턴</strong></p><ul><li><strong>정의</strong>: 로그 수집 및 전송을 담당하는 전용 사이드카</li><li><strong>구성</strong>: 애플리케이션 + Fluentd/Filebeat 사이드카</li><li><strong>목적</strong>: 중앙집중식 로깅 시스템으로 로그 전송</li><li><strong>시나리오</strong>:<div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1>1</a>
</span><span class=lnt id=hl-21-2><a class=lnlinks href=#hl-21-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>App Container → Shared Volume → Log Sidecar → Log Aggregator
</span></span><span class=line><span class=cl>(로그 생성)      (로그 파일)     (로그 수집)     (중앙 저장소)
</span></span></code></pre></td></tr></table></div></div></li></ul><hr><h2 id=제3부-장단점-및-실무-적용><strong>제3부: 장단점 및 실무 적용</strong><a hidden class=anchor aria-hidden=true href=#제3부-장단점-및-실무-적용>#</a></h2><h3 id=장점-1><strong>장점</strong><a hidden class=anchor aria-hidden=true href=#장점-1>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>장점</strong></td><td><strong>모듈성 및 관심사 분리</strong></td><td>비즈니스 로직과 인프라 관심사를 명확히 분리하여 코드 복잡성 감소</td></tr><tr><td></td><td><strong>언어 중립성</strong></td><td>주 애플리케이션의 프로그래밍 언어와 무관하게 기능 제공 가능</td></tr><tr><td></td><td><strong>재사용성</strong></td><td>동일한 사이드카를 여러 서비스에서 공유하여 개발 효율성 향상</td></tr><tr><td></td><td><strong>독립적 확장성</strong></td><td>사이드카와 주 애플리케이션을 독립적으로 확장 및 업데이트 가능</td></tr><tr><td></td><td><strong>운영 일관성</strong></td><td>모든 서비스에 대해 일관된 관찰성, 보안, 네트워킹 정책 적용</td></tr><tr><td></td><td><strong>저지연 통신</strong></td><td>동일한 네트워크 네임스페이스를 공유하여 localhost 통신으로 지연 최소화</td></tr></tbody></table><h3 id=단점과-문제점-그리고-해결방안><strong>단점과 문제점 그리고 해결방안</strong><a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안>#</a></h3><h4 id=단점><strong>단점</strong><a hidden class=anchor aria-hidden=true href=#단점>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td><strong>단점</strong></td><td><strong>리소스 오버헤드</strong></td><td>각 서비스마다 추가 컨테이너로 인한 메모리, CPU 사용량 증가</td><td>경량화된 사이드카 이미지 사용, 리소스 제한 설정</td></tr><tr><td></td><td><strong>복잡성 증가</strong></td><td>다중 컨테이너 관리로 인한 운영 복잡성 증가</td><td>자동화된 배포 도구 및 모니터링 시스템 구축</td></tr><tr><td></td><td><strong>네트워크 홉 증가</strong></td><td>프록시 사이드카 사용 시 추가 네트워크 홉으로 인한 지연</td><td>고성능 프록시(Envoy) 사용, 최적화된 설정 적용</td></tr><tr><td></td><td><strong>디버깅 어려움</strong></td><td>다중 컨테이너 환경에서 장애 지점 파악 어려움</td><td>분산 추적, 구조화된 로깅, 상관관계 ID 활용</td></tr></tbody></table><h4 id=문제점><strong>문제점</strong><a hidden class=anchor aria-hidden=true href=#문제점>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td><strong>문제점</strong></td><td><strong>사이드카 장애</strong></td><td>사이드카 컨테이너 크래시, 설정 오류</td><td>주 애플리케이션 통신 불가</td><td>헬스체크, 메트릭 모니터링</td><td>헬스체크 구현, 자동 재시작 설정</td><td>Circuit Breaker, Fallback 메커니즘</td></tr><tr><td></td><td><strong>리소스 경합</strong></td><td>동일 Pod 내 컨테이너 간 리소스 경쟁</td><td>성능 저하, OOM 발생</td><td>리소스 사용률 모니터링</td><td>적절한 리소스 제한 설정</td><td>리소스 격리, QoS 클래스 설정</td></tr><tr><td></td><td><strong>버전 호환성</strong></td><td>사이드카와 주 앱 간 버전 불일치</td><td>API 호환성 문제</td><td>버전 체크, 호환성 테스트</td><td>버전 매트릭스 관리</td><td>점진적 롤아웃, Canary 배포</td></tr><tr><td></td><td><strong>동기화 이슈</strong></td><td>컨테이너 간 시작 순서 문제</td><td>초기화 실패, 서비스 불안정</td><td>시작 순서 모니터링</td><td>Init Container 활용</td><td>Readiness/Liveness Probe 설정</td></tr></tbody></table><h3 id=도전-과제-1><strong>도전 과제</strong><a hidden class=anchor aria-hidden=true href=#도전-과제-1>#</a></h3><h4 id=기술적-도전-과제><strong>기술적 도전 과제</strong><a hidden class=anchor aria-hidden=true href=#기술적-도전-과제>#</a></h4><p><strong>1. 멀티 클라우드 환경에서의 일관성</strong></p><ul><li><strong>원인</strong>: 클라우드 제공업체별 서로 다른 네트워킹 및 보안 모델</li><li><strong>영향</strong>: 사이드카 동작의 불일치, 관리 복잡성 증가</li><li><strong>해결 방법</strong>: 표준화된 컨테이너 인터페이스 및 추상화 레이어 구축</li></ul><p><strong>2. 대규모 환경에서의 성능 최적화</strong></p><ul><li><strong>원인</strong>: 수천 개의 사이드카 인스턴스로 인한 스케일링 문제</li><li><strong>영향</strong>: 리소스 사용량 급증, 관리 오버헤드</li><li><strong>해결 방법</strong>: Ambient Mesh, 적응형 리소스 할당, 지능형 로드 밸런싱</li></ul><p><strong>3. 보안 경계 설정</strong></p><ul><li><strong>원인</strong>: 사이드카를 통한 새로운 공격 벡터 등장</li><li><strong>영향</strong>: 보안 취약점 증가, 인증/권한 부여 복잡성</li><li><strong>해결 방법</strong>: Zero Trust 아키텍처, mTLS 자동화, 세밀한 권한 관리</li></ul><h3 id=분류-기준에-따른-종류-및-유형-1><strong>분류 기준에 따른 종류 및 유형</strong><a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형-1>#</a></h3><table><thead><tr><th>분류 기준</th><th>유형</th><th>설명</th><th>예시</th></tr></thead><tbody><tr><td><strong>기능별</strong></td><td>Proxy Sidecar</td><td>네트워크 트래픽 프록시 및 로드 밸런싱</td><td>Envoy, HAProxy</td></tr><tr><td></td><td>Monitoring Sidecar</td><td>메트릭 수집 및 모니터링</td><td>Prometheus Exporter, DataDog Agent</td></tr><tr><td></td><td>Logging Sidecar</td><td>로그 수집 및 전송</td><td>Fluentd, Filebeat</td></tr><tr><td></td><td>Security Sidecar</td><td>인증, 권한 부여, 암호화</td><td>OAuth Proxy, Certificate Manager</td></tr><tr><td><strong>배포 방식별</strong></td><td>Container Sidecar</td><td>컨테이너 기반 사이드카</td><td>Kubernetes Pod</td></tr><tr><td></td><td>Process Sidecar</td><td>프로세스 기반 사이드카</td><td>Systemd Service</td></tr><tr><td></td><td>VM Sidecar</td><td>가상머신 기반 사이드카</td><td>VM 내 별도 프로세스</td></tr><tr><td><strong>통신 방식별</strong></td><td>Network Interceptor</td><td>네트워크 레벨 인터셉션</td><td>Istio, Linkerd</td></tr><tr><td></td><td>API Gateway</td><td>API 레벨 프록시</td><td>Kong, Ambassador</td></tr><tr><td></td><td>Message Broker</td><td>메시지 기반 통신</td><td>RabbitMQ Sidecar</td></tr></tbody></table><h3 id=실무-사용-예시-1><strong>실무 사용 예시</strong><a hidden class=anchor aria-hidden=true href=#실무-사용-예시-1>#</a></h3><table><thead><tr><th>사용 사례</th><th>목적</th><th>함께 사용되는 기술</th><th>효과</th></tr></thead><tbody><tr><td><strong>서비스 메시</strong></td><td>마이크로서비스 간 통신 관리</td><td>Istio + Envoy + Kubernetes</td><td>보안성, 관찰성, 트래픽 관리 향상</td></tr><tr><td><strong>중앙집중식 로깅</strong></td><td>분산 시스템 로그 집계</td><td>Fluentd + ElasticSearch + Kibana</td><td>통합 로그 분석 및 검색</td></tr><tr><td><strong>API 게이트웨이</strong></td><td>외부 요청 라우팅 및 인증</td><td>Kong + OAuth + Rate Limiting</td><td>API 보안 및 트래픽 제어</td></tr><tr><td><strong>분산 추적</strong></td><td>요청 흐름 추적</td><td>Jaeger + OpenTelemetry</td><td>성능 병목 지점 식별</td></tr><tr><td><strong>설정 관리</strong></td><td>동적 설정 업데이트</td><td>Consul + Vault</td><td>무중단 설정 변경</td></tr></tbody></table><h3 id=활용-사례-netflix의-마이크로서비스-아키텍처><strong>활용 사례: Netflix의 마이크로서비스 아키텍처</strong><a hidden class=anchor aria-hidden=true href=#활용-사례-netflix의-마이크로서비스-아키텍처>#</a></h3><h4 id=시스템-구성><strong>시스템 구성</strong><a hidden class=anchor aria-hidden=true href=#시스템-구성>#</a></h4><p>Netflix는 수천 개의 마이크로서비스를 운영하며, 각 서비스에 사이드카 패턴을 적용하여 횡단 관심사를 처리합니다.</p><h4 id=시스템-구성-다이어그램>**시스템 구성 다이어그램<a hidden class=anchor aria-hidden=true href=#시스템-구성-다이어그램>#</a></h4><h2 id=시스템-아키텍처>시스템 아키텍처<a hidden class=anchor aria-hidden=true href=#시스템-아키텍처>#</a></h2><pre class=mermaid>graph TB
    subgraph &#34;Netflix 마이크로서비스 아키텍처&#34;
        subgraph &#34;User Service&#34;
            US[User App]
            USC[Zuul Proxy&lt;br/&gt;사이드카]
            US &lt;--&gt; USC
        end
        
        subgraph &#34;Recommendation Service&#34; 
            RS[Recommendation App]
            RSC[Eureka Client&lt;br/&gt;사이드카]
            RS &lt;--&gt; RSC
        end
        
        subgraph &#34;Content Service&#34;
            CS[Content App]
            CSC[Hystrix&lt;br/&gt;사이드카]
            CS &lt;--&gt; CSC
        end
        
        subgraph &#34;Shared Services&#34;
            ES[Eureka Server&lt;br/&gt;Service Discovery]
            ZS[Zuul Server&lt;br/&gt;API Gateway]
            HS[Hystrix Dashboard&lt;br/&gt;Circuit Breaker]
        end
        
        USC --&gt; ZS
        RSC --&gt; ES
        CSC --&gt; HS
        
        USC &lt;--&gt; RSC
        RSC &lt;--&gt; CSC
        CSC &lt;--&gt; USC
    end
    
    CLIENT[Client Applications] --&gt; USC
    
    style US fill:#e3f2fd
    style RS fill:#e3f2fd  
    style CS fill:#e3f2fd
    style USC fill:#fce4ec
    style RSC fill:#fce4ec
    style CSC fill:#fce4ec
    style ES fill:#e8f5e8
    style ZS fill:#e8f5e8
    style HS fill:#e8f5e8
</pre><h2 id=workflow>Workflow<a hidden class=anchor aria-hidden=true href=#workflow>#</a></h2><pre class=mermaid>sequenceDiagram
    participant Client
    participant ZuulSidecar as Zuul Sidecar
    participant UserService as User Service
    participant EurekaSidecar as Eureka Sidecar
    participant RecommendationService as Recommendation Service
    participant HystrixSidecar as Hystrix Sidecar
    participant ContentService as Content Service

    Client-&gt;&gt;ZuulSidecar: 1. API Request
    ZuulSidecar-&gt;&gt;ZuulSidecar: 2. 인증 &amp; 라우팅
    ZuulSidecar-&gt;&gt;UserService: 3. 사용자 정보 요청
    
    UserService-&gt;&gt;EurekaSidecar: 4. 추천 서비스 검색
    EurekaSidecar-&gt;&gt;RecommendationService: 5. 추천 요청
    
    RecommendationService-&gt;&gt;HystrixSidecar: 6. 컨텐츠 요청
    HystrixSidecar-&gt;&gt;HystrixSidecar: 7. Circuit Breaker 검사
    HystrixSidecar-&gt;&gt;ContentService: 8. 컨텐츠 조회
    
    ContentService-&gt;&gt;HystrixSidecar: 9. 컨텐츠 응답
    HystrixSidecar-&gt;&gt;RecommendationService: 10. 추천 데이터
    RecommendationService-&gt;&gt;UserService: 11. 개인화 추천
    UserService-&gt;&gt;ZuulSidecar: 12. 최종 응답
    ZuulSidecar-&gt;&gt;Client: 13. 사용자에게 전달
</pre><h2 id=사이드카의-역할>사이드카의 역할<a hidden class=anchor aria-hidden=true href=#사이드카의-역할>#</a></h2><h3 id=1-zuul-proxy-사이드카>1. Zuul Proxy 사이드카<a hidden class=anchor aria-hidden=true href=#1-zuul-proxy-사이드카>#</a></h3><ul><li><strong>기능</strong>: API Gateway, 라우팅, 인증</li><li><strong>효과</strong>: 단일 진입점, 보안 강화</li></ul><h3 id=2-eureka-client-사이드카>2. Eureka Client 사이드카<a hidden class=anchor aria-hidden=true href=#2-eureka-client-사이드카>#</a></h3><ul><li><strong>기능</strong>: 서비스 디스커버리, 헬스체크</li><li><strong>효과</strong>: 동적 서비스 검색, 자동 페일오버</li></ul><h3 id=3-hystrix-사이드카>3. Hystrix 사이드카<a hidden class=anchor aria-hidden=true href=#3-hystrix-사이드카>#</a></h3><ul><li><strong>기능</strong>: Circuit Breaker, 타임아웃 관리</li><li><strong>효과</strong>: 장애 격리, 시스템 안정성 향상</li></ul><h3 id=구현-예시-python-로깅-사이드카><strong>구현 예시: Python 로깅 사이드카</strong><a hidden class=anchor aria-hidden=true href=#구현-예시-python-로깅-사이드카>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1>  1</a>
</span><span class=lnt id=hl-24-2><a class=lnlinks href=#hl-24-2>  2</a>
</span><span class=lnt id=hl-24-3><a class=lnlinks href=#hl-24-3>  3</a>
</span><span class=lnt id=hl-24-4><a class=lnlinks href=#hl-24-4>  4</a>
</span><span class=lnt id=hl-24-5><a class=lnlinks href=#hl-24-5>  5</a>
</span><span class=lnt id=hl-24-6><a class=lnlinks href=#hl-24-6>  6</a>
</span><span class=lnt id=hl-24-7><a class=lnlinks href=#hl-24-7>  7</a>
</span><span class=lnt id=hl-24-8><a class=lnlinks href=#hl-24-8>  8</a>
</span><span class=lnt id=hl-24-9><a class=lnlinks href=#hl-24-9>  9</a>
</span><span class=lnt id=hl-24-10><a class=lnlinks href=#hl-24-10> 10</a>
</span><span class=lnt id=hl-24-11><a class=lnlinks href=#hl-24-11> 11</a>
</span><span class=lnt id=hl-24-12><a class=lnlinks href=#hl-24-12> 12</a>
</span><span class=lnt id=hl-24-13><a class=lnlinks href=#hl-24-13> 13</a>
</span><span class=lnt id=hl-24-14><a class=lnlinks href=#hl-24-14> 14</a>
</span><span class=lnt id=hl-24-15><a class=lnlinks href=#hl-24-15> 15</a>
</span><span class=lnt id=hl-24-16><a class=lnlinks href=#hl-24-16> 16</a>
</span><span class=lnt id=hl-24-17><a class=lnlinks href=#hl-24-17> 17</a>
</span><span class=lnt id=hl-24-18><a class=lnlinks href=#hl-24-18> 18</a>
</span><span class=lnt id=hl-24-19><a class=lnlinks href=#hl-24-19> 19</a>
</span><span class=lnt id=hl-24-20><a class=lnlinks href=#hl-24-20> 20</a>
</span><span class=lnt id=hl-24-21><a class=lnlinks href=#hl-24-21> 21</a>
</span><span class=lnt id=hl-24-22><a class=lnlinks href=#hl-24-22> 22</a>
</span><span class=lnt id=hl-24-23><a class=lnlinks href=#hl-24-23> 23</a>
</span><span class=lnt id=hl-24-24><a class=lnlinks href=#hl-24-24> 24</a>
</span><span class=lnt id=hl-24-25><a class=lnlinks href=#hl-24-25> 25</a>
</span><span class=lnt id=hl-24-26><a class=lnlinks href=#hl-24-26> 26</a>
</span><span class=lnt id=hl-24-27><a class=lnlinks href=#hl-24-27> 27</a>
</span><span class=lnt id=hl-24-28><a class=lnlinks href=#hl-24-28> 28</a>
</span><span class=lnt id=hl-24-29><a class=lnlinks href=#hl-24-29> 29</a>
</span><span class=lnt id=hl-24-30><a class=lnlinks href=#hl-24-30> 30</a>
</span><span class=lnt id=hl-24-31><a class=lnlinks href=#hl-24-31> 31</a>
</span><span class=lnt id=hl-24-32><a class=lnlinks href=#hl-24-32> 32</a>
</span><span class=lnt id=hl-24-33><a class=lnlinks href=#hl-24-33> 33</a>
</span><span class=lnt id=hl-24-34><a class=lnlinks href=#hl-24-34> 34</a>
</span><span class=lnt id=hl-24-35><a class=lnlinks href=#hl-24-35> 35</a>
</span><span class=lnt id=hl-24-36><a class=lnlinks href=#hl-24-36> 36</a>
</span><span class=lnt id=hl-24-37><a class=lnlinks href=#hl-24-37> 37</a>
</span><span class=lnt id=hl-24-38><a class=lnlinks href=#hl-24-38> 38</a>
</span><span class=lnt id=hl-24-39><a class=lnlinks href=#hl-24-39> 39</a>
</span><span class=lnt id=hl-24-40><a class=lnlinks href=#hl-24-40> 40</a>
</span><span class=lnt id=hl-24-41><a class=lnlinks href=#hl-24-41> 41</a>
</span><span class=lnt id=hl-24-42><a class=lnlinks href=#hl-24-42> 42</a>
</span><span class=lnt id=hl-24-43><a class=lnlinks href=#hl-24-43> 43</a>
</span><span class=lnt id=hl-24-44><a class=lnlinks href=#hl-24-44> 44</a>
</span><span class=lnt id=hl-24-45><a class=lnlinks href=#hl-24-45> 45</a>
</span><span class=lnt id=hl-24-46><a class=lnlinks href=#hl-24-46> 46</a>
</span><span class=lnt id=hl-24-47><a class=lnlinks href=#hl-24-47> 47</a>
</span><span class=lnt id=hl-24-48><a class=lnlinks href=#hl-24-48> 48</a>
</span><span class=lnt id=hl-24-49><a class=lnlinks href=#hl-24-49> 49</a>
</span><span class=lnt id=hl-24-50><a class=lnlinks href=#hl-24-50> 50</a>
</span><span class=lnt id=hl-24-51><a class=lnlinks href=#hl-24-51> 51</a>
</span><span class=lnt id=hl-24-52><a class=lnlinks href=#hl-24-52> 52</a>
</span><span class=lnt id=hl-24-53><a class=lnlinks href=#hl-24-53> 53</a>
</span><span class=lnt id=hl-24-54><a class=lnlinks href=#hl-24-54> 54</a>
</span><span class=lnt id=hl-24-55><a class=lnlinks href=#hl-24-55> 55</a>
</span><span class=lnt id=hl-24-56><a class=lnlinks href=#hl-24-56> 56</a>
</span><span class=lnt id=hl-24-57><a class=lnlinks href=#hl-24-57> 57</a>
</span><span class=lnt id=hl-24-58><a class=lnlinks href=#hl-24-58> 58</a>
</span><span class=lnt id=hl-24-59><a class=lnlinks href=#hl-24-59> 59</a>
</span><span class=lnt id=hl-24-60><a class=lnlinks href=#hl-24-60> 60</a>
</span><span class=lnt id=hl-24-61><a class=lnlinks href=#hl-24-61> 61</a>
</span><span class=lnt id=hl-24-62><a class=lnlinks href=#hl-24-62> 62</a>
</span><span class=lnt id=hl-24-63><a class=lnlinks href=#hl-24-63> 63</a>
</span><span class=lnt id=hl-24-64><a class=lnlinks href=#hl-24-64> 64</a>
</span><span class=lnt id=hl-24-65><a class=lnlinks href=#hl-24-65> 65</a>
</span><span class=lnt id=hl-24-66><a class=lnlinks href=#hl-24-66> 66</a>
</span><span class=lnt id=hl-24-67><a class=lnlinks href=#hl-24-67> 67</a>
</span><span class=lnt id=hl-24-68><a class=lnlinks href=#hl-24-68> 68</a>
</span><span class=lnt id=hl-24-69><a class=lnlinks href=#hl-24-69> 69</a>
</span><span class=lnt id=hl-24-70><a class=lnlinks href=#hl-24-70> 70</a>
</span><span class=lnt id=hl-24-71><a class=lnlinks href=#hl-24-71> 71</a>
</span><span class=lnt id=hl-24-72><a class=lnlinks href=#hl-24-72> 72</a>
</span><span class=lnt id=hl-24-73><a class=lnlinks href=#hl-24-73> 73</a>
</span><span class=lnt id=hl-24-74><a class=lnlinks href=#hl-24-74> 74</a>
</span><span class=lnt id=hl-24-75><a class=lnlinks href=#hl-24-75> 75</a>
</span><span class=lnt id=hl-24-76><a class=lnlinks href=#hl-24-76> 76</a>
</span><span class=lnt id=hl-24-77><a class=lnlinks href=#hl-24-77> 77</a>
</span><span class=lnt id=hl-24-78><a class=lnlinks href=#hl-24-78> 78</a>
</span><span class=lnt id=hl-24-79><a class=lnlinks href=#hl-24-79> 79</a>
</span><span class=lnt id=hl-24-80><a class=lnlinks href=#hl-24-80> 80</a>
</span><span class=lnt id=hl-24-81><a class=lnlinks href=#hl-24-81> 81</a>
</span><span class=lnt id=hl-24-82><a class=lnlinks href=#hl-24-82> 82</a>
</span><span class=lnt id=hl-24-83><a class=lnlinks href=#hl-24-83> 83</a>
</span><span class=lnt id=hl-24-84><a class=lnlinks href=#hl-24-84> 84</a>
</span><span class=lnt id=hl-24-85><a class=lnlinks href=#hl-24-85> 85</a>
</span><span class=lnt id=hl-24-86><a class=lnlinks href=#hl-24-86> 86</a>
</span><span class=lnt id=hl-24-87><a class=lnlinks href=#hl-24-87> 87</a>
</span><span class=lnt id=hl-24-88><a class=lnlinks href=#hl-24-88> 88</a>
</span><span class=lnt id=hl-24-89><a class=lnlinks href=#hl-24-89> 89</a>
</span><span class=lnt id=hl-24-90><a class=lnlinks href=#hl-24-90> 90</a>
</span><span class=lnt id=hl-24-91><a class=lnlinks href=#hl-24-91> 91</a>
</span><span class=lnt id=hl-24-92><a class=lnlinks href=#hl-24-92> 92</a>
</span><span class=lnt id=hl-24-93><a class=lnlinks href=#hl-24-93> 93</a>
</span><span class=lnt id=hl-24-94><a class=lnlinks href=#hl-24-94> 94</a>
</span><span class=lnt id=hl-24-95><a class=lnlinks href=#hl-24-95> 95</a>
</span><span class=lnt id=hl-24-96><a class=lnlinks href=#hl-24-96> 96</a>
</span><span class=lnt id=hl-24-97><a class=lnlinks href=#hl-24-97> 97</a>
</span><span class=lnt id=hl-24-98><a class=lnlinks href=#hl-24-98> 98</a>
</span><span class=lnt id=hl-24-99><a class=lnlinks href=#hl-24-99> 99</a>
</span><span class=lnt id=hl-24-100><a class=lnlinks href=#hl-24-100>100</a>
</span><span class=lnt id=hl-24-101><a class=lnlinks href=#hl-24-101>101</a>
</span><span class=lnt id=hl-24-102><a class=lnlinks href=#hl-24-102>102</a>
</span><span class=lnt id=hl-24-103><a class=lnlinks href=#hl-24-103>103</a>
</span><span class=lnt id=hl-24-104><a class=lnlinks href=#hl-24-104>104</a>
</span><span class=lnt id=hl-24-105><a class=lnlinks href=#hl-24-105>105</a>
</span><span class=lnt id=hl-24-106><a class=lnlinks href=#hl-24-106>106</a>
</span><span class=lnt id=hl-24-107><a class=lnlinks href=#hl-24-107>107</a>
</span><span class=lnt id=hl-24-108><a class=lnlinks href=#hl-24-108>108</a>
</span><span class=lnt id=hl-24-109><a class=lnlinks href=#hl-24-109>109</a>
</span><span class=lnt id=hl-24-110><a class=lnlinks href=#hl-24-110>110</a>
</span><span class=lnt id=hl-24-111><a class=lnlinks href=#hl-24-111>111</a>
</span><span class=lnt id=hl-24-112><a class=lnlinks href=#hl-24-112>112</a>
</span><span class=lnt id=hl-24-113><a class=lnlinks href=#hl-24-113>113</a>
</span><span class=lnt id=hl-24-114><a class=lnlinks href=#hl-24-114>114</a>
</span><span class=lnt id=hl-24-115><a class=lnlinks href=#hl-24-115>115</a>
</span><span class=lnt id=hl-24-116><a class=lnlinks href=#hl-24-116>116</a>
</span><span class=lnt id=hl-24-117><a class=lnlinks href=#hl-24-117>117</a>
</span><span class=lnt id=hl-24-118><a class=lnlinks href=#hl-24-118>118</a>
</span><span class=lnt id=hl-24-119><a class=lnlinks href=#hl-24-119>119</a>
</span><span class=lnt id=hl-24-120><a class=lnlinks href=#hl-24-120>120</a>
</span><span class=lnt id=hl-24-121><a class=lnlinks href=#hl-24-121>121</a>
</span><span class=lnt id=hl-24-122><a class=lnlinks href=#hl-24-122>122</a>
</span><span class=lnt id=hl-24-123><a class=lnlinks href=#hl-24-123>123</a>
</span><span class=lnt id=hl-24-124><a class=lnlinks href=#hl-24-124>124</a>
</span><span class=lnt id=hl-24-125><a class=lnlinks href=#hl-24-125>125</a>
</span><span class=lnt id=hl-24-126><a class=lnlinks href=#hl-24-126>126</a>
</span><span class=lnt id=hl-24-127><a class=lnlinks href=#hl-24-127>127</a>
</span><span class=lnt id=hl-24-128><a class=lnlinks href=#hl-24-128>128</a>
</span><span class=lnt id=hl-24-129><a class=lnlinks href=#hl-24-129>129</a>
</span><span class=lnt id=hl-24-130><a class=lnlinks href=#hl-24-130>130</a>
</span><span class=lnt id=hl-24-131><a class=lnlinks href=#hl-24-131>131</a>
</span><span class=lnt id=hl-24-132><a class=lnlinks href=#hl-24-132>132</a>
</span><span class=lnt id=hl-24-133><a class=lnlinks href=#hl-24-133>133</a>
</span><span class=lnt id=hl-24-134><a class=lnlinks href=#hl-24-134>134</a>
</span><span class=lnt id=hl-24-135><a class=lnlinks href=#hl-24-135>135</a>
</span><span class=lnt id=hl-24-136><a class=lnlinks href=#hl-24-136>136</a>
</span><span class=lnt id=hl-24-137><a class=lnlinks href=#hl-24-137>137</a>
</span><span class=lnt id=hl-24-138><a class=lnlinks href=#hl-24-138>138</a>
</span><span class=lnt id=hl-24-139><a class=lnlinks href=#hl-24-139>139</a>
</span><span class=lnt id=hl-24-140><a class=lnlinks href=#hl-24-140>140</a>
</span><span class=lnt id=hl-24-141><a class=lnlinks href=#hl-24-141>141</a>
</span><span class=lnt id=hl-24-142><a class=lnlinks href=#hl-24-142>142</a>
</span><span class=lnt id=hl-24-143><a class=lnlinks href=#hl-24-143>143</a>
</span><span class=lnt id=hl-24-144><a class=lnlinks href=#hl-24-144>144</a>
</span><span class=lnt id=hl-24-145><a class=lnlinks href=#hl-24-145>145</a>
</span><span class=lnt id=hl-24-146><a class=lnlinks href=#hl-24-146>146</a>
</span><span class=lnt id=hl-24-147><a class=lnlinks href=#hl-24-147>147</a>
</span><span class=lnt id=hl-24-148><a class=lnlinks href=#hl-24-148>148</a>
</span><span class=lnt id=hl-24-149><a class=lnlinks href=#hl-24-149>149</a>
</span><span class=lnt id=hl-24-150><a class=lnlinks href=#hl-24-150>150</a>
</span><span class=lnt id=hl-24-151><a class=lnlinks href=#hl-24-151>151</a>
</span><span class=lnt id=hl-24-152><a class=lnlinks href=#hl-24-152>152</a>
</span><span class=lnt id=hl-24-153><a class=lnlinks href=#hl-24-153>153</a>
</span><span class=lnt id=hl-24-154><a class=lnlinks href=#hl-24-154>154</a>
</span><span class=lnt id=hl-24-155><a class=lnlinks href=#hl-24-155>155</a>
</span><span class=lnt id=hl-24-156><a class=lnlinks href=#hl-24-156>156</a>
</span><span class=lnt id=hl-24-157><a class=lnlinks href=#hl-24-157>157</a>
</span><span class=lnt id=hl-24-158><a class=lnlinks href=#hl-24-158>158</a>
</span><span class=lnt id=hl-24-159><a class=lnlinks href=#hl-24-159>159</a>
</span><span class=lnt id=hl-24-160><a class=lnlinks href=#hl-24-160>160</a>
</span><span class=lnt id=hl-24-161><a class=lnlinks href=#hl-24-161>161</a>
</span><span class=lnt id=hl-24-162><a class=lnlinks href=#hl-24-162>162</a>
</span><span class=lnt id=hl-24-163><a class=lnlinks href=#hl-24-163>163</a>
</span><span class=lnt id=hl-24-164><a class=lnlinks href=#hl-24-164>164</a>
</span><span class=lnt id=hl-24-165><a class=lnlinks href=#hl-24-165>165</a>
</span><span class=lnt id=hl-24-166><a class=lnlinks href=#hl-24-166>166</a>
</span><span class=lnt id=hl-24-167><a class=lnlinks href=#hl-24-167>167</a>
</span><span class=lnt id=hl-24-168><a class=lnlinks href=#hl-24-168>168</a>
</span><span class=lnt id=hl-24-169><a class=lnlinks href=#hl-24-169>169</a>
</span><span class=lnt id=hl-24-170><a class=lnlinks href=#hl-24-170>170</a>
</span><span class=lnt id=hl-24-171><a class=lnlinks href=#hl-24-171>171</a>
</span><span class=lnt id=hl-24-172><a class=lnlinks href=#hl-24-172>172</a>
</span><span class=lnt id=hl-24-173><a class=lnlinks href=#hl-24-173>173</a>
</span><span class=lnt id=hl-24-174><a class=lnlinks href=#hl-24-174>174</a>
</span><span class=lnt id=hl-24-175><a class=lnlinks href=#hl-24-175>175</a>
</span><span class=lnt id=hl-24-176><a class=lnlinks href=#hl-24-176>176</a>
</span><span class=lnt id=hl-24-177><a class=lnlinks href=#hl-24-177>177</a>
</span><span class=lnt id=hl-24-178><a class=lnlinks href=#hl-24-178>178</a>
</span><span class=lnt id=hl-24-179><a class=lnlinks href=#hl-24-179>179</a>
</span><span class=lnt id=hl-24-180><a class=lnlinks href=#hl-24-180>180</a>
</span><span class=lnt id=hl-24-181><a class=lnlinks href=#hl-24-181>181</a>
</span><span class=lnt id=hl-24-182><a class=lnlinks href=#hl-24-182>182</a>
</span><span class=lnt id=hl-24-183><a class=lnlinks href=#hl-24-183>183</a>
</span><span class=lnt id=hl-24-184><a class=lnlinks href=#hl-24-184>184</a>
</span><span class=lnt id=hl-24-185><a class=lnlinks href=#hl-24-185>185</a>
</span><span class=lnt id=hl-24-186><a class=lnlinks href=#hl-24-186>186</a>
</span><span class=lnt id=hl-24-187><a class=lnlinks href=#hl-24-187>187</a>
</span><span class=lnt id=hl-24-188><a class=lnlinks href=#hl-24-188>188</a>
</span><span class=lnt id=hl-24-189><a class=lnlinks href=#hl-24-189>189</a>
</span><span class=lnt id=hl-24-190><a class=lnlinks href=#hl-24-190>190</a>
</span><span class=lnt id=hl-24-191><a class=lnlinks href=#hl-24-191>191</a>
</span><span class=lnt id=hl-24-192><a class=lnlinks href=#hl-24-192>192</a>
</span><span class=lnt id=hl-24-193><a class=lnlinks href=#hl-24-193>193</a>
</span><span class=lnt id=hl-24-194><a class=lnlinks href=#hl-24-194>194</a>
</span><span class=lnt id=hl-24-195><a class=lnlinks href=#hl-24-195>195</a>
</span><span class=lnt id=hl-24-196><a class=lnlinks href=#hl-24-196>196</a>
</span><span class=lnt id=hl-24-197><a class=lnlinks href=#hl-24-197>197</a>
</span><span class=lnt id=hl-24-198><a class=lnlinks href=#hl-24-198>198</a>
</span><span class=lnt id=hl-24-199><a class=lnlinks href=#hl-24-199>199</a>
</span><span class=lnt id=hl-24-200><a class=lnlinks href=#hl-24-200>200</a>
</span><span class=lnt id=hl-24-201><a class=lnlinks href=#hl-24-201>201</a>
</span><span class=lnt id=hl-24-202><a class=lnlinks href=#hl-24-202>202</a>
</span><span class=lnt id=hl-24-203><a class=lnlinks href=#hl-24-203>203</a>
</span><span class=lnt id=hl-24-204><a class=lnlinks href=#hl-24-204>204</a>
</span><span class=lnt id=hl-24-205><a class=lnlinks href=#hl-24-205>205</a>
</span><span class=lnt id=hl-24-206><a class=lnlinks href=#hl-24-206>206</a>
</span><span class=lnt id=hl-24-207><a class=lnlinks href=#hl-24-207>207</a>
</span><span class=lnt id=hl-24-208><a class=lnlinks href=#hl-24-208>208</a>
</span><span class=lnt id=hl-24-209><a class=lnlinks href=#hl-24-209>209</a>
</span><span class=lnt id=hl-24-210><a class=lnlinks href=#hl-24-210>210</a>
</span><span class=lnt id=hl-24-211><a class=lnlinks href=#hl-24-211>211</a>
</span><span class=lnt id=hl-24-212><a class=lnlinks href=#hl-24-212>212</a>
</span><span class=lnt id=hl-24-213><a class=lnlinks href=#hl-24-213>213</a>
</span><span class=lnt id=hl-24-214><a class=lnlinks href=#hl-24-214>214</a>
</span><span class=lnt id=hl-24-215><a class=lnlinks href=#hl-24-215>215</a>
</span><span class=lnt id=hl-24-216><a class=lnlinks href=#hl-24-216>216</a>
</span><span class=lnt id=hl-24-217><a class=lnlinks href=#hl-24-217>217</a>
</span><span class=lnt id=hl-24-218><a class=lnlinks href=#hl-24-218>218</a>
</span><span class=lnt id=hl-24-219><a class=lnlinks href=#hl-24-219>219</a>
</span><span class=lnt id=hl-24-220><a class=lnlinks href=#hl-24-220>220</a>
</span><span class=lnt id=hl-24-221><a class=lnlinks href=#hl-24-221>221</a>
</span><span class=lnt id=hl-24-222><a class=lnlinks href=#hl-24-222>222</a>
</span><span class=lnt id=hl-24-223><a class=lnlinks href=#hl-24-223>223</a>
</span><span class=lnt id=hl-24-224><a class=lnlinks href=#hl-24-224>224</a>
</span><span class=lnt id=hl-24-225><a class=lnlinks href=#hl-24-225>225</a>
</span><span class=lnt id=hl-24-226><a class=lnlinks href=#hl-24-226>226</a>
</span><span class=lnt id=hl-24-227><a class=lnlinks href=#hl-24-227>227</a>
</span><span class=lnt id=hl-24-228><a class=lnlinks href=#hl-24-228>228</a>
</span><span class=lnt id=hl-24-229><a class=lnlinks href=#hl-24-229>229</a>
</span><span class=lnt id=hl-24-230><a class=lnlinks href=#hl-24-230>230</a>
</span><span class=lnt id=hl-24-231><a class=lnlinks href=#hl-24-231>231</a>
</span><span class=lnt id=hl-24-232><a class=lnlinks href=#hl-24-232>232</a>
</span><span class=lnt id=hl-24-233><a class=lnlinks href=#hl-24-233>233</a>
</span><span class=lnt id=hl-24-234><a class=lnlinks href=#hl-24-234>234</a>
</span><span class=lnt id=hl-24-235><a class=lnlinks href=#hl-24-235>235</a>
</span><span class=lnt id=hl-24-236><a class=lnlinks href=#hl-24-236>236</a>
</span><span class=lnt id=hl-24-237><a class=lnlinks href=#hl-24-237>237</a>
</span><span class=lnt id=hl-24-238><a class=lnlinks href=#hl-24-238>238</a>
</span><span class=lnt id=hl-24-239><a class=lnlinks href=#hl-24-239>239</a>
</span><span class=lnt id=hl-24-240><a class=lnlinks href=#hl-24-240>240</a>
</span><span class=lnt id=hl-24-241><a class=lnlinks href=#hl-24-241>241</a>
</span><span class=lnt id=hl-24-242><a class=lnlinks href=#hl-24-242>242</a>
</span><span class=lnt id=hl-24-243><a class=lnlinks href=#hl-24-243>243</a>
</span><span class=lnt id=hl-24-244><a class=lnlinks href=#hl-24-244>244</a>
</span><span class=lnt id=hl-24-245><a class=lnlinks href=#hl-24-245>245</a>
</span><span class=lnt id=hl-24-246><a class=lnlinks href=#hl-24-246>246</a>
</span><span class=lnt id=hl-24-247><a class=lnlinks href=#hl-24-247>247</a>
</span><span class=lnt id=hl-24-248><a class=lnlinks href=#hl-24-248>248</a>
</span><span class=lnt id=hl-24-249><a class=lnlinks href=#hl-24-249>249</a>
</span><span class=lnt id=hl-24-250><a class=lnlinks href=#hl-24-250>250</a>
</span><span class=lnt id=hl-24-251><a class=lnlinks href=#hl-24-251>251</a>
</span><span class=lnt id=hl-24-252><a class=lnlinks href=#hl-24-252>252</a>
</span><span class=lnt id=hl-24-253><a class=lnlinks href=#hl-24-253>253</a>
</span><span class=lnt id=hl-24-254><a class=lnlinks href=#hl-24-254>254</a>
</span><span class=lnt id=hl-24-255><a class=lnlinks href=#hl-24-255>255</a>
</span><span class=lnt id=hl-24-256><a class=lnlinks href=#hl-24-256>256</a>
</span><span class=lnt id=hl-24-257><a class=lnlinks href=#hl-24-257>257</a>
</span><span class=lnt id=hl-24-258><a class=lnlinks href=#hl-24-258>258</a>
</span><span class=lnt id=hl-24-259><a class=lnlinks href=#hl-24-259>259</a>
</span><span class=lnt id=hl-24-260><a class=lnlinks href=#hl-24-260>260</a>
</span><span class=lnt id=hl-24-261><a class=lnlinks href=#hl-24-261>261</a>
</span><span class=lnt id=hl-24-262><a class=lnlinks href=#hl-24-262>262</a>
</span><span class=lnt id=hl-24-263><a class=lnlinks href=#hl-24-263>263</a>
</span><span class=lnt id=hl-24-264><a class=lnlinks href=#hl-24-264>264</a>
</span><span class=lnt id=hl-24-265><a class=lnlinks href=#hl-24-265>265</a>
</span><span class=lnt id=hl-24-266><a class=lnlinks href=#hl-24-266>266</a>
</span><span class=lnt id=hl-24-267><a class=lnlinks href=#hl-24-267>267</a>
</span><span class=lnt id=hl-24-268><a class=lnlinks href=#hl-24-268>268</a>
</span><span class=lnt id=hl-24-269><a class=lnlinks href=#hl-24-269>269</a>
</span><span class=lnt id=hl-24-270><a class=lnlinks href=#hl-24-270>270</a>
</span><span class=lnt id=hl-24-271><a class=lnlinks href=#hl-24-271>271</a>
</span><span class=lnt id=hl-24-272><a class=lnlinks href=#hl-24-272>272</a>
</span><span class=lnt id=hl-24-273><a class=lnlinks href=#hl-24-273>273</a>
</span><span class=lnt id=hl-24-274><a class=lnlinks href=#hl-24-274>274</a>
</span><span class=lnt id=hl-24-275><a class=lnlinks href=#hl-24-275>275</a>
</span><span class=lnt id=hl-24-276><a class=lnlinks href=#hl-24-276>276</a>
</span><span class=lnt id=hl-24-277><a class=lnlinks href=#hl-24-277>277</a>
</span><span class=lnt id=hl-24-278><a class=lnlinks href=#hl-24-278>278</a>
</span><span class=lnt id=hl-24-279><a class=lnlinks href=#hl-24-279>279</a>
</span><span class=lnt id=hl-24-280><a class=lnlinks href=#hl-24-280>280</a>
</span><span class=lnt id=hl-24-281><a class=lnlinks href=#hl-24-281>281</a>
</span><span class=lnt id=hl-24-282><a class=lnlinks href=#hl-24-282>282</a>
</span><span class=lnt id=hl-24-283><a class=lnlinks href=#hl-24-283>283</a>
</span><span class=lnt id=hl-24-284><a class=lnlinks href=#hl-24-284>284</a>
</span><span class=lnt id=hl-24-285><a class=lnlinks href=#hl-24-285>285</a>
</span><span class=lnt id=hl-24-286><a class=lnlinks href=#hl-24-286>286</a>
</span><span class=lnt id=hl-24-287><a class=lnlinks href=#hl-24-287>287</a>
</span><span class=lnt id=hl-24-288><a class=lnlinks href=#hl-24-288>288</a>
</span><span class=lnt id=hl-24-289><a class=lnlinks href=#hl-24-289>289</a>
</span><span class=lnt id=hl-24-290><a class=lnlinks href=#hl-24-290>290</a>
</span><span class=lnt id=hl-24-291><a class=lnlinks href=#hl-24-291>291</a>
</span><span class=lnt id=hl-24-292><a class=lnlinks href=#hl-24-292>292</a>
</span><span class=lnt id=hl-24-293><a class=lnlinks href=#hl-24-293>293</a>
</span><span class=lnt id=hl-24-294><a class=lnlinks href=#hl-24-294>294</a>
</span><span class=lnt id=hl-24-295><a class=lnlinks href=#hl-24-295>295</a>
</span><span class=lnt id=hl-24-296><a class=lnlinks href=#hl-24-296>296</a>
</span><span class=lnt id=hl-24-297><a class=lnlinks href=#hl-24-297>297</a>
</span><span class=lnt id=hl-24-298><a class=lnlinks href=#hl-24-298>298</a>
</span><span class=lnt id=hl-24-299><a class=lnlinks href=#hl-24-299>299</a>
</span><span class=lnt id=hl-24-300><a class=lnlinks href=#hl-24-300>300</a>
</span><span class=lnt id=hl-24-301><a class=lnlinks href=#hl-24-301>301</a>
</span><span class=lnt id=hl-24-302><a class=lnlinks href=#hl-24-302>302</a>
</span><span class=lnt id=hl-24-303><a class=lnlinks href=#hl-24-303>303</a>
</span><span class=lnt id=hl-24-304><a class=lnlinks href=#hl-24-304>304</a>
</span><span class=lnt id=hl-24-305><a class=lnlinks href=#hl-24-305>305</a>
</span><span class=lnt id=hl-24-306><a class=lnlinks href=#hl-24-306>306</a>
</span><span class=lnt id=hl-24-307><a class=lnlinks href=#hl-24-307>307</a>
</span><span class=lnt id=hl-24-308><a class=lnlinks href=#hl-24-308>308</a>
</span><span class=lnt id=hl-24-309><a class=lnlinks href=#hl-24-309>309</a>
</span><span class=lnt id=hl-24-310><a class=lnlinks href=#hl-24-310>310</a>
</span><span class=lnt id=hl-24-311><a class=lnlinks href=#hl-24-311>311</a>
</span><span class=lnt id=hl-24-312><a class=lnlinks href=#hl-24-312>312</a>
</span><span class=lnt id=hl-24-313><a class=lnlinks href=#hl-24-313>313</a>
</span><span class=lnt id=hl-24-314><a class=lnlinks href=#hl-24-314>314</a>
</span><span class=lnt id=hl-24-315><a class=lnlinks href=#hl-24-315>315</a>
</span><span class=lnt id=hl-24-316><a class=lnlinks href=#hl-24-316>316</a>
</span><span class=lnt id=hl-24-317><a class=lnlinks href=#hl-24-317>317</a>
</span><span class=lnt id=hl-24-318><a class=lnlinks href=#hl-24-318>318</a>
</span><span class=lnt id=hl-24-319><a class=lnlinks href=#hl-24-319>319</a>
</span><span class=lnt id=hl-24-320><a class=lnlinks href=#hl-24-320>320</a>
</span><span class=lnt id=hl-24-321><a class=lnlinks href=#hl-24-321>321</a>
</span><span class=lnt id=hl-24-322><a class=lnlinks href=#hl-24-322>322</a>
</span><span class=lnt id=hl-24-323><a class=lnlinks href=#hl-24-323>323</a>
</span><span class=lnt id=hl-24-324><a class=lnlinks href=#hl-24-324>324</a>
</span><span class=lnt id=hl-24-325><a class=lnlinks href=#hl-24-325>325</a>
</span><span class=lnt id=hl-24-326><a class=lnlinks href=#hl-24-326>326</a>
</span><span class=lnt id=hl-24-327><a class=lnlinks href=#hl-24-327>327</a>
</span><span class=lnt id=hl-24-328><a class=lnlinks href=#hl-24-328>328</a>
</span><span class=lnt id=hl-24-329><a class=lnlinks href=#hl-24-329>329</a>
</span><span class=lnt id=hl-24-330><a class=lnlinks href=#hl-24-330>330</a>
</span><span class=lnt id=hl-24-331><a class=lnlinks href=#hl-24-331>331</a>
</span><span class=lnt id=hl-24-332><a class=lnlinks href=#hl-24-332>332</a>
</span><span class=lnt id=hl-24-333><a class=lnlinks href=#hl-24-333>333</a>
</span><span class=lnt id=hl-24-334><a class=lnlinks href=#hl-24-334>334</a>
</span><span class=lnt id=hl-24-335><a class=lnlinks href=#hl-24-335>335</a>
</span><span class=lnt id=hl-24-336><a class=lnlinks href=#hl-24-336>336</a>
</span><span class=lnt id=hl-24-337><a class=lnlinks href=#hl-24-337>337</a>
</span><span class=lnt id=hl-24-338><a class=lnlinks href=#hl-24-338>338</a>
</span><span class=lnt id=hl-24-339><a class=lnlinks href=#hl-24-339>339</a>
</span><span class=lnt id=hl-24-340><a class=lnlinks href=#hl-24-340>340</a>
</span><span class=lnt id=hl-24-341><a class=lnlinks href=#hl-24-341>341</a>
</span><span class=lnt id=hl-24-342><a class=lnlinks href=#hl-24-342>342</a>
</span><span class=lnt id=hl-24-343><a class=lnlinks href=#hl-24-343>343</a>
</span><span class=lnt id=hl-24-344><a class=lnlinks href=#hl-24-344>344</a>
</span><span class=lnt id=hl-24-345><a class=lnlinks href=#hl-24-345>345</a>
</span><span class=lnt id=hl-24-346><a class=lnlinks href=#hl-24-346>346</a>
</span><span class=lnt id=hl-24-347><a class=lnlinks href=#hl-24-347>347</a>
</span><span class=lnt id=hl-24-348><a class=lnlinks href=#hl-24-348>348</a>
</span><span class=lnt id=hl-24-349><a class=lnlinks href=#hl-24-349>349</a>
</span><span class=lnt id=hl-24-350><a class=lnlinks href=#hl-24-350>350</a>
</span><span class=lnt id=hl-24-351><a class=lnlinks href=#hl-24-351>351</a>
</span><span class=lnt id=hl-24-352><a class=lnlinks href=#hl-24-352>352</a>
</span><span class=lnt id=hl-24-353><a class=lnlinks href=#hl-24-353>353</a>
</span><span class=lnt id=hl-24-354><a class=lnlinks href=#hl-24-354>354</a>
</span><span class=lnt id=hl-24-355><a class=lnlinks href=#hl-24-355>355</a>
</span><span class=lnt id=hl-24-356><a class=lnlinks href=#hl-24-356>356</a>
</span><span class=lnt id=hl-24-357><a class=lnlinks href=#hl-24-357>357</a>
</span><span class=lnt id=hl-24-358><a class=lnlinks href=#hl-24-358>358</a>
</span><span class=lnt id=hl-24-359><a class=lnlinks href=#hl-24-359>359</a>
</span><span class=lnt id=hl-24-360><a class=lnlinks href=#hl-24-360>360</a>
</span><span class=lnt id=hl-24-361><a class=lnlinks href=#hl-24-361>361</a>
</span><span class=lnt id=hl-24-362><a class=lnlinks href=#hl-24-362>362</a>
</span><span class=lnt id=hl-24-363><a class=lnlinks href=#hl-24-363>363</a>
</span><span class=lnt id=hl-24-364><a class=lnlinks href=#hl-24-364>364</a>
</span><span class=lnt id=hl-24-365><a class=lnlinks href=#hl-24-365>365</a>
</span><span class=lnt id=hl-24-366><a class=lnlinks href=#hl-24-366>366</a>
</span><span class=lnt id=hl-24-367><a class=lnlinks href=#hl-24-367>367</a>
</span><span class=lnt id=hl-24-368><a class=lnlinks href=#hl-24-368>368</a>
</span><span class=lnt id=hl-24-369><a class=lnlinks href=#hl-24-369>369</a>
</span><span class=lnt id=hl-24-370><a class=lnlinks href=#hl-24-370>370</a>
</span><span class=lnt id=hl-24-371><a class=lnlinks href=#hl-24-371>371</a>
</span><span class=lnt id=hl-24-372><a class=lnlinks href=#hl-24-372>372</a>
</span><span class=lnt id=hl-24-373><a class=lnlinks href=#hl-24-373>373</a>
</span><span class=lnt id=hl-24-374><a class=lnlinks href=#hl-24-374>374</a>
</span><span class=lnt id=hl-24-375><a class=lnlinks href=#hl-24-375>375</a>
</span><span class=lnt id=hl-24-376><a class=lnlinks href=#hl-24-376>376</a>
</span><span class=lnt id=hl-24-377><a class=lnlinks href=#hl-24-377>377</a>
</span><span class=lnt id=hl-24-378><a class=lnlinks href=#hl-24-378>378</a>
</span><span class=lnt id=hl-24-379><a class=lnlinks href=#hl-24-379>379</a>
</span><span class=lnt id=hl-24-380><a class=lnlinks href=#hl-24-380>380</a>
</span><span class=lnt id=hl-24-381><a class=lnlinks href=#hl-24-381>381</a>
</span><span class=lnt id=hl-24-382><a class=lnlinks href=#hl-24-382>382</a>
</span><span class=lnt id=hl-24-383><a class=lnlinks href=#hl-24-383>383</a>
</span><span class=lnt id=hl-24-384><a class=lnlinks href=#hl-24-384>384</a>
</span><span class=lnt id=hl-24-385><a class=lnlinks href=#hl-24-385>385</a>
</span><span class=lnt id=hl-24-386><a class=lnlinks href=#hl-24-386>386</a>
</span><span class=lnt id=hl-24-387><a class=lnlinks href=#hl-24-387>387</a>
</span><span class=lnt id=hl-24-388><a class=lnlinks href=#hl-24-388>388</a>
</span><span class=lnt id=hl-24-389><a class=lnlinks href=#hl-24-389>389</a>
</span><span class=lnt id=hl-24-390><a class=lnlinks href=#hl-24-390>390</a>
</span><span class=lnt id=hl-24-391><a class=lnlinks href=#hl-24-391>391</a>
</span><span class=lnt id=hl-24-392><a class=lnlinks href=#hl-24-392>392</a>
</span><span class=lnt id=hl-24-393><a class=lnlinks href=#hl-24-393>393</a>
</span><span class=lnt id=hl-24-394><a class=lnlinks href=#hl-24-394>394</a>
</span><span class=lnt id=hl-24-395><a class=lnlinks href=#hl-24-395>395</a>
</span><span class=lnt id=hl-24-396><a class=lnlinks href=#hl-24-396>396</a>
</span><span class=lnt id=hl-24-397><a class=lnlinks href=#hl-24-397>397</a>
</span><span class=lnt id=hl-24-398><a class=lnlinks href=#hl-24-398>398</a>
</span><span class=lnt id=hl-24-399><a class=lnlinks href=#hl-24-399>399</a>
</span><span class=lnt id=hl-24-400><a class=lnlinks href=#hl-24-400>400</a>
</span><span class=lnt id=hl-24-401><a class=lnlinks href=#hl-24-401>401</a>
</span><span class=lnt id=hl-24-402><a class=lnlinks href=#hl-24-402>402</a>
</span><span class=lnt id=hl-24-403><a class=lnlinks href=#hl-24-403>403</a>
</span><span class=lnt id=hl-24-404><a class=lnlinks href=#hl-24-404>404</a>
</span><span class=lnt id=hl-24-405><a class=lnlinks href=#hl-24-405>405</a>
</span><span class=lnt id=hl-24-406><a class=lnlinks href=#hl-24-406>406</a>
</span><span class=lnt id=hl-24-407><a class=lnlinks href=#hl-24-407>407</a>
</span><span class=lnt id=hl-24-408><a class=lnlinks href=#hl-24-408>408</a>
</span><span class=lnt id=hl-24-409><a class=lnlinks href=#hl-24-409>409</a>
</span><span class=lnt id=hl-24-410><a class=lnlinks href=#hl-24-410>410</a>
</span><span class=lnt id=hl-24-411><a class=lnlinks href=#hl-24-411>411</a>
</span><span class=lnt id=hl-24-412><a class=lnlinks href=#hl-24-412>412</a>
</span><span class=lnt id=hl-24-413><a class=lnlinks href=#hl-24-413>413</a>
</span><span class=lnt id=hl-24-414><a class=lnlinks href=#hl-24-414>414</a>
</span><span class=lnt id=hl-24-415><a class=lnlinks href=#hl-24-415>415</a>
</span><span class=lnt id=hl-24-416><a class=lnlinks href=#hl-24-416>416</a>
</span><span class=lnt id=hl-24-417><a class=lnlinks href=#hl-24-417>417</a>
</span><span class=lnt id=hl-24-418><a class=lnlinks href=#hl-24-418>418</a>
</span><span class=lnt id=hl-24-419><a class=lnlinks href=#hl-24-419>419</a>
</span><span class=lnt id=hl-24-420><a class=lnlinks href=#hl-24-420>420</a>
</span><span class=lnt id=hl-24-421><a class=lnlinks href=#hl-24-421>421</a>
</span><span class=lnt id=hl-24-422><a class=lnlinks href=#hl-24-422>422</a>
</span><span class=lnt id=hl-24-423><a class=lnlinks href=#hl-24-423>423</a>
</span><span class=lnt id=hl-24-424><a class=lnlinks href=#hl-24-424>424</a>
</span><span class=lnt id=hl-24-425><a class=lnlinks href=#hl-24-425>425</a>
</span><span class=lnt id=hl-24-426><a class=lnlinks href=#hl-24-426>426</a>
</span><span class=lnt id=hl-24-427><a class=lnlinks href=#hl-24-427>427</a>
</span><span class=lnt id=hl-24-428><a class=lnlinks href=#hl-24-428>428</a>
</span><span class=lnt id=hl-24-429><a class=lnlinks href=#hl-24-429>429</a>
</span><span class=lnt id=hl-24-430><a class=lnlinks href=#hl-24-430>430</a>
</span><span class=lnt id=hl-24-431><a class=lnlinks href=#hl-24-431>431</a>
</span><span class=lnt id=hl-24-432><a class=lnlinks href=#hl-24-432>432</a>
</span><span class=lnt id=hl-24-433><a class=lnlinks href=#hl-24-433>433</a>
</span><span class=lnt id=hl-24-434><a class=lnlinks href=#hl-24-434>434</a>
</span><span class=lnt id=hl-24-435><a class=lnlinks href=#hl-24-435>435</a>
</span><span class=lnt id=hl-24-436><a class=lnlinks href=#hl-24-436>436</a>
</span><span class=lnt id=hl-24-437><a class=lnlinks href=#hl-24-437>437</a>
</span><span class=lnt id=hl-24-438><a class=lnlinks href=#hl-24-438>438</a>
</span><span class=lnt id=hl-24-439><a class=lnlinks href=#hl-24-439>439</a>
</span><span class=lnt id=hl-24-440><a class=lnlinks href=#hl-24-440>440</a>
</span><span class=lnt id=hl-24-441><a class=lnlinks href=#hl-24-441>441</a>
</span><span class=lnt id=hl-24-442><a class=lnlinks href=#hl-24-442>442</a>
</span><span class=lnt id=hl-24-443><a class=lnlinks href=#hl-24-443>443</a>
</span><span class=lnt id=hl-24-444><a class=lnlinks href=#hl-24-444>444</a>
</span><span class=lnt id=hl-24-445><a class=lnlinks href=#hl-24-445>445</a>
</span><span class=lnt id=hl-24-446><a class=lnlinks href=#hl-24-446>446</a>
</span><span class=lnt id=hl-24-447><a class=lnlinks href=#hl-24-447>447</a>
</span><span class=lnt id=hl-24-448><a class=lnlinks href=#hl-24-448>448</a>
</span><span class=lnt id=hl-24-449><a class=lnlinks href=#hl-24-449>449</a>
</span><span class=lnt id=hl-24-450><a class=lnlinks href=#hl-24-450>450</a>
</span><span class=lnt id=hl-24-451><a class=lnlinks href=#hl-24-451>451</a>
</span><span class=lnt id=hl-24-452><a class=lnlinks href=#hl-24-452>452</a>
</span><span class=lnt id=hl-24-453><a class=lnlinks href=#hl-24-453>453</a>
</span><span class=lnt id=hl-24-454><a class=lnlinks href=#hl-24-454>454</a>
</span><span class=lnt id=hl-24-455><a class=lnlinks href=#hl-24-455>455</a>
</span><span class=lnt id=hl-24-456><a class=lnlinks href=#hl-24-456>456</a>
</span><span class=lnt id=hl-24-457><a class=lnlinks href=#hl-24-457>457</a>
</span><span class=lnt id=hl-24-458><a class=lnlinks href=#hl-24-458>458</a>
</span><span class=lnt id=hl-24-459><a class=lnlinks href=#hl-24-459>459</a>
</span><span class=lnt id=hl-24-460><a class=lnlinks href=#hl-24-460>460</a>
</span><span class=lnt id=hl-24-461><a class=lnlinks href=#hl-24-461>461</a>
</span><span class=lnt id=hl-24-462><a class=lnlinks href=#hl-24-462>462</a>
</span><span class=lnt id=hl-24-463><a class=lnlinks href=#hl-24-463>463</a>
</span><span class=lnt id=hl-24-464><a class=lnlinks href=#hl-24-464>464</a>
</span><span class=lnt id=hl-24-465><a class=lnlinks href=#hl-24-465>465</a>
</span><span class=lnt id=hl-24-466><a class=lnlinks href=#hl-24-466>466</a>
</span><span class=lnt id=hl-24-467><a class=lnlinks href=#hl-24-467>467</a>
</span><span class=lnt id=hl-24-468><a class=lnlinks href=#hl-24-468>468</a>
</span><span class=lnt id=hl-24-469><a class=lnlinks href=#hl-24-469>469</a>
</span><span class=lnt id=hl-24-470><a class=lnlinks href=#hl-24-470>470</a>
</span><span class=lnt id=hl-24-471><a class=lnlinks href=#hl-24-471>471</a>
</span><span class=lnt id=hl-24-472><a class=lnlinks href=#hl-24-472>472</a>
</span><span class=lnt id=hl-24-473><a class=lnlinks href=#hl-24-473>473</a>
</span><span class=lnt id=hl-24-474><a class=lnlinks href=#hl-24-474>474</a>
</span><span class=lnt id=hl-24-475><a class=lnlinks href=#hl-24-475>475</a>
</span><span class=lnt id=hl-24-476><a class=lnlinks href=#hl-24-476>476</a>
</span><span class=lnt id=hl-24-477><a class=lnlinks href=#hl-24-477>477</a>
</span><span class=lnt id=hl-24-478><a class=lnlinks href=#hl-24-478>478</a>
</span><span class=lnt id=hl-24-479><a class=lnlinks href=#hl-24-479>479</a>
</span><span class=lnt id=hl-24-480><a class=lnlinks href=#hl-24-480>480</a>
</span><span class=lnt id=hl-24-481><a class=lnlinks href=#hl-24-481>481</a>
</span><span class=lnt id=hl-24-482><a class=lnlinks href=#hl-24-482>482</a>
</span><span class=lnt id=hl-24-483><a class=lnlinks href=#hl-24-483>483</a>
</span><span class=lnt id=hl-24-484><a class=lnlinks href=#hl-24-484>484</a>
</span><span class=lnt id=hl-24-485><a class=lnlinks href=#hl-24-485>485</a>
</span><span class=lnt id=hl-24-486><a class=lnlinks href=#hl-24-486>486</a>
</span><span class=lnt id=hl-24-487><a class=lnlinks href=#hl-24-487>487</a>
</span><span class=lnt id=hl-24-488><a class=lnlinks href=#hl-24-488>488</a>
</span><span class=lnt id=hl-24-489><a class=lnlinks href=#hl-24-489>489</a>
</span><span class=lnt id=hl-24-490><a class=lnlinks href=#hl-24-490>490</a>
</span><span class=lnt id=hl-24-491><a class=lnlinks href=#hl-24-491>491</a>
</span><span class=lnt id=hl-24-492><a class=lnlinks href=#hl-24-492>492</a>
</span><span class=lnt id=hl-24-493><a class=lnlinks href=#hl-24-493>493</a>
</span><span class=lnt id=hl-24-494><a class=lnlinks href=#hl-24-494>494</a>
</span><span class=lnt id=hl-24-495><a class=lnlinks href=#hl-24-495>495</a>
</span><span class=lnt id=hl-24-496><a class=lnlinks href=#hl-24-496>496</a>
</span><span class=lnt id=hl-24-497><a class=lnlinks href=#hl-24-497>497</a>
</span><span class=lnt id=hl-24-498><a class=lnlinks href=#hl-24-498>498</a>
</span><span class=lnt id=hl-24-499><a class=lnlinks href=#hl-24-499>499</a>
</span><span class=lnt id=hl-24-500><a class=lnlinks href=#hl-24-500>500</a>
</span><span class=lnt id=hl-24-501><a class=lnlinks href=#hl-24-501>501</a>
</span><span class=lnt id=hl-24-502><a class=lnlinks href=#hl-24-502>502</a>
</span><span class=lnt id=hl-24-503><a class=lnlinks href=#hl-24-503>503</a>
</span><span class=lnt id=hl-24-504><a class=lnlinks href=#hl-24-504>504</a>
</span><span class=lnt id=hl-24-505><a class=lnlinks href=#hl-24-505>505</a>
</span><span class=lnt id=hl-24-506><a class=lnlinks href=#hl-24-506>506</a>
</span><span class=lnt id=hl-24-507><a class=lnlinks href=#hl-24-507>507</a>
</span><span class=lnt id=hl-24-508><a class=lnlinks href=#hl-24-508>508</a>
</span><span class=lnt id=hl-24-509><a class=lnlinks href=#hl-24-509>509</a>
</span><span class=lnt id=hl-24-510><a class=lnlinks href=#hl-24-510>510</a>
</span><span class=lnt id=hl-24-511><a class=lnlinks href=#hl-24-511>511</a>
</span><span class=lnt id=hl-24-512><a class=lnlinks href=#hl-24-512>512</a>
</span><span class=lnt id=hl-24-513><a class=lnlinks href=#hl-24-513>513</a>
</span><span class=lnt id=hl-24-514><a class=lnlinks href=#hl-24-514>514</a>
</span><span class=lnt id=hl-24-515><a class=lnlinks href=#hl-24-515>515</a>
</span><span class=lnt id=hl-24-516><a class=lnlinks href=#hl-24-516>516</a>
</span><span class=lnt id=hl-24-517><a class=lnlinks href=#hl-24-517>517</a>
</span><span class=lnt id=hl-24-518><a class=lnlinks href=#hl-24-518>518</a>
</span><span class=lnt id=hl-24-519><a class=lnlinks href=#hl-24-519>519</a>
</span><span class=lnt id=hl-24-520><a class=lnlinks href=#hl-24-520>520</a>
</span><span class=lnt id=hl-24-521><a class=lnlinks href=#hl-24-521>521</a>
</span><span class=lnt id=hl-24-522><a class=lnlinks href=#hl-24-522>522</a>
</span><span class=lnt id=hl-24-523><a class=lnlinks href=#hl-24-523>523</a>
</span><span class=lnt id=hl-24-524><a class=lnlinks href=#hl-24-524>524</a>
</span><span class=lnt id=hl-24-525><a class=lnlinks href=#hl-24-525>525</a>
</span><span class=lnt id=hl-24-526><a class=lnlinks href=#hl-24-526>526</a>
</span><span class=lnt id=hl-24-527><a class=lnlinks href=#hl-24-527>527</a>
</span><span class=lnt id=hl-24-528><a class=lnlinks href=#hl-24-528>528</a>
</span><span class=lnt id=hl-24-529><a class=lnlinks href=#hl-24-529>529</a>
</span><span class=lnt id=hl-24-530><a class=lnlinks href=#hl-24-530>530</a>
</span><span class=lnt id=hl-24-531><a class=lnlinks href=#hl-24-531>531</a>
</span><span class=lnt id=hl-24-532><a class=lnlinks href=#hl-24-532>532</a>
</span><span class=lnt id=hl-24-533><a class=lnlinks href=#hl-24-533>533</a>
</span><span class=lnt id=hl-24-534><a class=lnlinks href=#hl-24-534>534</a>
</span><span class=lnt id=hl-24-535><a class=lnlinks href=#hl-24-535>535</a>
</span><span class=lnt id=hl-24-536><a class=lnlinks href=#hl-24-536>536</a>
</span><span class=lnt id=hl-24-537><a class=lnlinks href=#hl-24-537>537</a>
</span><span class=lnt id=hl-24-538><a class=lnlinks href=#hl-24-538>538</a>
</span><span class=lnt id=hl-24-539><a class=lnlinks href=#hl-24-539>539</a>
</span><span class=lnt id=hl-24-540><a class=lnlinks href=#hl-24-540>540</a>
</span><span class=lnt id=hl-24-541><a class=lnlinks href=#hl-24-541>541</a>
</span><span class=lnt id=hl-24-542><a class=lnlinks href=#hl-24-542>542</a>
</span><span class=lnt id=hl-24-543><a class=lnlinks href=#hl-24-543>543</a>
</span><span class=lnt id=hl-24-544><a class=lnlinks href=#hl-24-544>544</a>
</span><span class=lnt id=hl-24-545><a class=lnlinks href=#hl-24-545>545</a>
</span><span class=lnt id=hl-24-546><a class=lnlinks href=#hl-24-546>546</a>
</span><span class=lnt id=hl-24-547><a class=lnlinks href=#hl-24-547>547</a>
</span><span class=lnt id=hl-24-548><a class=lnlinks href=#hl-24-548>548</a>
</span><span class=lnt id=hl-24-549><a class=lnlinks href=#hl-24-549>549</a>
</span><span class=lnt id=hl-24-550><a class=lnlinks href=#hl-24-550>550</a>
</span><span class=lnt id=hl-24-551><a class=lnlinks href=#hl-24-551>551</a>
</span><span class=lnt id=hl-24-552><a class=lnlinks href=#hl-24-552>552</a>
</span><span class=lnt id=hl-24-553><a class=lnlinks href=#hl-24-553>553</a>
</span><span class=lnt id=hl-24-554><a class=lnlinks href=#hl-24-554>554</a>
</span><span class=lnt id=hl-24-555><a class=lnlinks href=#hl-24-555>555</a>
</span><span class=lnt id=hl-24-556><a class=lnlinks href=#hl-24-556>556</a>
</span><span class=lnt id=hl-24-557><a class=lnlinks href=#hl-24-557>557</a>
</span><span class=lnt id=hl-24-558><a class=lnlinks href=#hl-24-558>558</a>
</span><span class=lnt id=hl-24-559><a class=lnlinks href=#hl-24-559>559</a>
</span><span class=lnt id=hl-24-560><a class=lnlinks href=#hl-24-560>560</a>
</span><span class=lnt id=hl-24-561><a class=lnlinks href=#hl-24-561>561</a>
</span><span class=lnt id=hl-24-562><a class=lnlinks href=#hl-24-562>562</a>
</span><span class=lnt id=hl-24-563><a class=lnlinks href=#hl-24-563>563</a>
</span><span class=lnt id=hl-24-564><a class=lnlinks href=#hl-24-564>564</a>
</span><span class=lnt id=hl-24-565><a class=lnlinks href=#hl-24-565>565</a>
</span><span class=lnt id=hl-24-566><a class=lnlinks href=#hl-24-566>566</a>
</span><span class=lnt id=hl-24-567><a class=lnlinks href=#hl-24-567>567</a>
</span><span class=lnt id=hl-24-568><a class=lnlinks href=#hl-24-568>568</a>
</span><span class=lnt id=hl-24-569><a class=lnlinks href=#hl-24-569>569</a>
</span><span class=lnt id=hl-24-570><a class=lnlinks href=#hl-24-570>570</a>
</span><span class=lnt id=hl-24-571><a class=lnlinks href=#hl-24-571>571</a>
</span><span class=lnt id=hl-24-572><a class=lnlinks href=#hl-24-572>572</a>
</span><span class=lnt id=hl-24-573><a class=lnlinks href=#hl-24-573>573</a>
</span><span class=lnt id=hl-24-574><a class=lnlinks href=#hl-24-574>574</a>
</span><span class=lnt id=hl-24-575><a class=lnlinks href=#hl-24-575>575</a>
</span><span class=lnt id=hl-24-576><a class=lnlinks href=#hl-24-576>576</a>
</span><span class=lnt id=hl-24-577><a class=lnlinks href=#hl-24-577>577</a>
</span><span class=lnt id=hl-24-578><a class=lnlinks href=#hl-24-578>578</a>
</span><span class=lnt id=hl-24-579><a class=lnlinks href=#hl-24-579>579</a>
</span><span class=lnt id=hl-24-580><a class=lnlinks href=#hl-24-580>580</a>
</span><span class=lnt id=hl-24-581><a class=lnlinks href=#hl-24-581>581</a>
</span><span class=lnt id=hl-24-582><a class=lnlinks href=#hl-24-582>582</a>
</span><span class=lnt id=hl-24-583><a class=lnlinks href=#hl-24-583>583</a>
</span><span class=lnt id=hl-24-584><a class=lnlinks href=#hl-24-584>584</a>
</span><span class=lnt id=hl-24-585><a class=lnlinks href=#hl-24-585>585</a>
</span><span class=lnt id=hl-24-586><a class=lnlinks href=#hl-24-586>586</a>
</span><span class=lnt id=hl-24-587><a class=lnlinks href=#hl-24-587>587</a>
</span><span class=lnt id=hl-24-588><a class=lnlinks href=#hl-24-588>588</a>
</span><span class=lnt id=hl-24-589><a class=lnlinks href=#hl-24-589>589</a>
</span><span class=lnt id=hl-24-590><a class=lnlinks href=#hl-24-590>590</a>
</span><span class=lnt id=hl-24-591><a class=lnlinks href=#hl-24-591>591</a>
</span><span class=lnt id=hl-24-592><a class=lnlinks href=#hl-24-592>592</a>
</span><span class=lnt id=hl-24-593><a class=lnlinks href=#hl-24-593>593</a>
</span><span class=lnt id=hl-24-594><a class=lnlinks href=#hl-24-594>594</a>
</span><span class=lnt id=hl-24-595><a class=lnlinks href=#hl-24-595>595</a>
</span><span class=lnt id=hl-24-596><a class=lnlinks href=#hl-24-596>596</a>
</span><span class=lnt id=hl-24-597><a class=lnlinks href=#hl-24-597>597</a>
</span><span class=lnt id=hl-24-598><a class=lnlinks href=#hl-24-598>598</a>
</span><span class=lnt id=hl-24-599><a class=lnlinks href=#hl-24-599>599</a>
</span><span class=lnt id=hl-24-600><a class=lnlinks href=#hl-24-600>600</a>
</span><span class=lnt id=hl-24-601><a class=lnlinks href=#hl-24-601>601</a>
</span><span class=lnt id=hl-24-602><a class=lnlinks href=#hl-24-602>602</a>
</span><span class=lnt id=hl-24-603><a class=lnlinks href=#hl-24-603>603</a>
</span><span class=lnt id=hl-24-604><a class=lnlinks href=#hl-24-604>604</a>
</span><span class=lnt id=hl-24-605><a class=lnlinks href=#hl-24-605>605</a>
</span><span class=lnt id=hl-24-606><a class=lnlinks href=#hl-24-606>606</a>
</span><span class=lnt id=hl-24-607><a class=lnlinks href=#hl-24-607>607</a>
</span><span class=lnt id=hl-24-608><a class=lnlinks href=#hl-24-608>608</a>
</span><span class=lnt id=hl-24-609><a class=lnlinks href=#hl-24-609>609</a>
</span><span class=lnt id=hl-24-610><a class=lnlinks href=#hl-24-610>610</a>
</span><span class=lnt id=hl-24-611><a class=lnlinks href=#hl-24-611>611</a>
</span><span class=lnt id=hl-24-612><a class=lnlinks href=#hl-24-612>612</a>
</span><span class=lnt id=hl-24-613><a class=lnlinks href=#hl-24-613>613</a>
</span><span class=lnt id=hl-24-614><a class=lnlinks href=#hl-24-614>614</a>
</span><span class=lnt id=hl-24-615><a class=lnlinks href=#hl-24-615>615</a>
</span><span class=lnt id=hl-24-616><a class=lnlinks href=#hl-24-616>616</a>
</span><span class=lnt id=hl-24-617><a class=lnlinks href=#hl-24-617>617</a>
</span><span class=lnt id=hl-24-618><a class=lnlinks href=#hl-24-618>618</a>
</span><span class=lnt id=hl-24-619><a class=lnlinks href=#hl-24-619>619</a>
</span><span class=lnt id=hl-24-620><a class=lnlinks href=#hl-24-620>620</a>
</span><span class=lnt id=hl-24-621><a class=lnlinks href=#hl-24-621>621</a>
</span><span class=lnt id=hl-24-622><a class=lnlinks href=#hl-24-622>622</a>
</span><span class=lnt id=hl-24-623><a class=lnlinks href=#hl-24-623>623</a>
</span><span class=lnt id=hl-24-624><a class=lnlinks href=#hl-24-624>624</a>
</span><span class=lnt id=hl-24-625><a class=lnlinks href=#hl-24-625>625</a>
</span><span class=lnt id=hl-24-626><a class=lnlinks href=#hl-24-626>626</a>
</span><span class=lnt id=hl-24-627><a class=lnlinks href=#hl-24-627>627</a>
</span><span class=lnt id=hl-24-628><a class=lnlinks href=#hl-24-628>628</a>
</span><span class=lnt id=hl-24-629><a class=lnlinks href=#hl-24-629>629</a>
</span><span class=lnt id=hl-24-630><a class=lnlinks href=#hl-24-630>630</a>
</span><span class=lnt id=hl-24-631><a class=lnlinks href=#hl-24-631>631</a>
</span><span class=lnt id=hl-24-632><a class=lnlinks href=#hl-24-632>632</a>
</span><span class=lnt id=hl-24-633><a class=lnlinks href=#hl-24-633>633</a>
</span><span class=lnt id=hl-24-634><a class=lnlinks href=#hl-24-634>634</a>
</span><span class=lnt id=hl-24-635><a class=lnlinks href=#hl-24-635>635</a>
</span><span class=lnt id=hl-24-636><a class=lnlinks href=#hl-24-636>636</a>
</span><span class=lnt id=hl-24-637><a class=lnlinks href=#hl-24-637>637</a>
</span><span class=lnt id=hl-24-638><a class=lnlinks href=#hl-24-638>638</a>
</span><span class=lnt id=hl-24-639><a class=lnlinks href=#hl-24-639>639</a>
</span><span class=lnt id=hl-24-640><a class=lnlinks href=#hl-24-640>640</a>
</span><span class=lnt id=hl-24-641><a class=lnlinks href=#hl-24-641>641</a>
</span><span class=lnt id=hl-24-642><a class=lnlinks href=#hl-24-642>642</a>
</span><span class=lnt id=hl-24-643><a class=lnlinks href=#hl-24-643>643</a>
</span><span class=lnt id=hl-24-644><a class=lnlinks href=#hl-24-644>644</a>
</span><span class=lnt id=hl-24-645><a class=lnlinks href=#hl-24-645>645</a>
</span><span class=lnt id=hl-24-646><a class=lnlinks href=#hl-24-646>646</a>
</span><span class=lnt id=hl-24-647><a class=lnlinks href=#hl-24-647>647</a>
</span><span class=lnt id=hl-24-648><a class=lnlinks href=#hl-24-648>648</a>
</span><span class=lnt id=hl-24-649><a class=lnlinks href=#hl-24-649>649</a>
</span><span class=lnt id=hl-24-650><a class=lnlinks href=#hl-24-650>650</a>
</span><span class=lnt id=hl-24-651><a class=lnlinks href=#hl-24-651>651</a>
</span><span class=lnt id=hl-24-652><a class=lnlinks href=#hl-24-652>652</a>
</span><span class=lnt id=hl-24-653><a class=lnlinks href=#hl-24-653>653</a>
</span><span class=lnt id=hl-24-654><a class=lnlinks href=#hl-24-654>654</a>
</span><span class=lnt id=hl-24-655><a class=lnlinks href=#hl-24-655>655</a>
</span><span class=lnt id=hl-24-656><a class=lnlinks href=#hl-24-656>656</a>
</span><span class=lnt id=hl-24-657><a class=lnlinks href=#hl-24-657>657</a>
</span><span class=lnt id=hl-24-658><a class=lnlinks href=#hl-24-658>658</a>
</span><span class=lnt id=hl-24-659><a class=lnlinks href=#hl-24-659>659</a>
</span><span class=lnt id=hl-24-660><a class=lnlinks href=#hl-24-660>660</a>
</span><span class=lnt id=hl-24-661><a class=lnlinks href=#hl-24-661>661</a>
</span><span class=lnt id=hl-24-662><a class=lnlinks href=#hl-24-662>662</a>
</span><span class=lnt id=hl-24-663><a class=lnlinks href=#hl-24-663>663</a>
</span><span class=lnt id=hl-24-664><a class=lnlinks href=#hl-24-664>664</a>
</span><span class=lnt id=hl-24-665><a class=lnlinks href=#hl-24-665>665</a>
</span><span class=lnt id=hl-24-666><a class=lnlinks href=#hl-24-666>666</a>
</span><span class=lnt id=hl-24-667><a class=lnlinks href=#hl-24-667>667</a>
</span><span class=lnt id=hl-24-668><a class=lnlinks href=#hl-24-668>668</a>
</span><span class=lnt id=hl-24-669><a class=lnlinks href=#hl-24-669>669</a>
</span><span class=lnt id=hl-24-670><a class=lnlinks href=#hl-24-670>670</a>
</span><span class=lnt id=hl-24-671><a class=lnlinks href=#hl-24-671>671</a>
</span><span class=lnt id=hl-24-672><a class=lnlinks href=#hl-24-672>672</a>
</span><span class=lnt id=hl-24-673><a class=lnlinks href=#hl-24-673>673</a>
</span><span class=lnt id=hl-24-674><a class=lnlinks href=#hl-24-674>674</a>
</span><span class=lnt id=hl-24-675><a class=lnlinks href=#hl-24-675>675</a>
</span><span class=lnt id=hl-24-676><a class=lnlinks href=#hl-24-676>676</a>
</span><span class=lnt id=hl-24-677><a class=lnlinks href=#hl-24-677>677</a>
</span><span class=lnt id=hl-24-678><a class=lnlinks href=#hl-24-678>678</a>
</span><span class=lnt id=hl-24-679><a class=lnlinks href=#hl-24-679>679</a>
</span><span class=lnt id=hl-24-680><a class=lnlinks href=#hl-24-680>680</a>
</span><span class=lnt id=hl-24-681><a class=lnlinks href=#hl-24-681>681</a>
</span><span class=lnt id=hl-24-682><a class=lnlinks href=#hl-24-682>682</a>
</span><span class=lnt id=hl-24-683><a class=lnlinks href=#hl-24-683>683</a>
</span><span class=lnt id=hl-24-684><a class=lnlinks href=#hl-24-684>684</a>
</span><span class=lnt id=hl-24-685><a class=lnlinks href=#hl-24-685>685</a>
</span><span class=lnt id=hl-24-686><a class=lnlinks href=#hl-24-686>686</a>
</span><span class=lnt id=hl-24-687><a class=lnlinks href=#hl-24-687>687</a>
</span><span class=lnt id=hl-24-688><a class=lnlinks href=#hl-24-688>688</a>
</span><span class=lnt id=hl-24-689><a class=lnlinks href=#hl-24-689>689</a>
</span><span class=lnt id=hl-24-690><a class=lnlinks href=#hl-24-690>690</a>
</span><span class=lnt id=hl-24-691><a class=lnlinks href=#hl-24-691>691</a>
</span><span class=lnt id=hl-24-692><a class=lnlinks href=#hl-24-692>692</a>
</span><span class=lnt id=hl-24-693><a class=lnlinks href=#hl-24-693>693</a>
</span><span class=lnt id=hl-24-694><a class=lnlinks href=#hl-24-694>694</a>
</span><span class=lnt id=hl-24-695><a class=lnlinks href=#hl-24-695>695</a>
</span><span class=lnt id=hl-24-696><a class=lnlinks href=#hl-24-696>696</a>
</span><span class=lnt id=hl-24-697><a class=lnlinks href=#hl-24-697>697</a>
</span><span class=lnt id=hl-24-698><a class=lnlinks href=#hl-24-698>698</a>
</span><span class=lnt id=hl-24-699><a class=lnlinks href=#hl-24-699>699</a>
</span><span class=lnt id=hl-24-700><a class=lnlinks href=#hl-24-700>700</a>
</span><span class=lnt id=hl-24-701><a class=lnlinks href=#hl-24-701>701</a>
</span><span class=lnt id=hl-24-702><a class=lnlinks href=#hl-24-702>702</a>
</span><span class=lnt id=hl-24-703><a class=lnlinks href=#hl-24-703>703</a>
</span><span class=lnt id=hl-24-704><a class=lnlinks href=#hl-24-704>704</a>
</span><span class=lnt id=hl-24-705><a class=lnlinks href=#hl-24-705>705</a>
</span><span class=lnt id=hl-24-706><a class=lnlinks href=#hl-24-706>706</a>
</span><span class=lnt id=hl-24-707><a class=lnlinks href=#hl-24-707>707</a>
</span><span class=lnt id=hl-24-708><a class=lnlinks href=#hl-24-708>708</a>
</span><span class=lnt id=hl-24-709><a class=lnlinks href=#hl-24-709>709</a>
</span><span class=lnt id=hl-24-710><a class=lnlinks href=#hl-24-710>710</a>
</span><span class=lnt id=hl-24-711><a class=lnlinks href=#hl-24-711>711</a>
</span><span class=lnt id=hl-24-712><a class=lnlinks href=#hl-24-712>712</a>
</span><span class=lnt id=hl-24-713><a class=lnlinks href=#hl-24-713>713</a>
</span><span class=lnt id=hl-24-714><a class=lnlinks href=#hl-24-714>714</a>
</span><span class=lnt id=hl-24-715><a class=lnlinks href=#hl-24-715>715</a>
</span><span class=lnt id=hl-24-716><a class=lnlinks href=#hl-24-716>716</a>
</span><span class=lnt id=hl-24-717><a class=lnlinks href=#hl-24-717>717</a>
</span><span class=lnt id=hl-24-718><a class=lnlinks href=#hl-24-718>718</a>
</span><span class=lnt id=hl-24-719><a class=lnlinks href=#hl-24-719>719</a>
</span><span class=lnt id=hl-24-720><a class=lnlinks href=#hl-24-720>720</a>
</span><span class=lnt id=hl-24-721><a class=lnlinks href=#hl-24-721>721</a>
</span><span class=lnt id=hl-24-722><a class=lnlinks href=#hl-24-722>722</a>
</span><span class=lnt id=hl-24-723><a class=lnlinks href=#hl-24-723>723</a>
</span><span class=lnt id=hl-24-724><a class=lnlinks href=#hl-24-724>724</a>
</span><span class=lnt id=hl-24-725><a class=lnlinks href=#hl-24-725>725</a>
</span><span class=lnt id=hl-24-726><a class=lnlinks href=#hl-24-726>726</a>
</span><span class=lnt id=hl-24-727><a class=lnlinks href=#hl-24-727>727</a>
</span><span class=lnt id=hl-24-728><a class=lnlinks href=#hl-24-728>728</a>
</span><span class=lnt id=hl-24-729><a class=lnlinks href=#hl-24-729>729</a>
</span><span class=lnt id=hl-24-730><a class=lnlinks href=#hl-24-730>730</a>
</span><span class=lnt id=hl-24-731><a class=lnlinks href=#hl-24-731>731</a>
</span><span class=lnt id=hl-24-732><a class=lnlinks href=#hl-24-732>732</a>
</span><span class=lnt id=hl-24-733><a class=lnlinks href=#hl-24-733>733</a>
</span><span class=lnt id=hl-24-734><a class=lnlinks href=#hl-24-734>734</a>
</span><span class=lnt id=hl-24-735><a class=lnlinks href=#hl-24-735>735</a>
</span><span class=lnt id=hl-24-736><a class=lnlinks href=#hl-24-736>736</a>
</span><span class=lnt id=hl-24-737><a class=lnlinks href=#hl-24-737>737</a>
</span><span class=lnt id=hl-24-738><a class=lnlinks href=#hl-24-738>738</a>
</span><span class=lnt id=hl-24-739><a class=lnlinks href=#hl-24-739>739</a>
</span><span class=lnt id=hl-24-740><a class=lnlinks href=#hl-24-740>740</a>
</span><span class=lnt id=hl-24-741><a class=lnlinks href=#hl-24-741>741</a>
</span><span class=lnt id=hl-24-742><a class=lnlinks href=#hl-24-742>742</a>
</span><span class=lnt id=hl-24-743><a class=lnlinks href=#hl-24-743>743</a>
</span><span class=lnt id=hl-24-744><a class=lnlinks href=#hl-24-744>744</a>
</span><span class=lnt id=hl-24-745><a class=lnlinks href=#hl-24-745>745</a>
</span><span class=lnt id=hl-24-746><a class=lnlinks href=#hl-24-746>746</a>
</span><span class=lnt id=hl-24-747><a class=lnlinks href=#hl-24-747>747</a>
</span><span class=lnt id=hl-24-748><a class=lnlinks href=#hl-24-748>748</a>
</span><span class=lnt id=hl-24-749><a class=lnlinks href=#hl-24-749>749</a>
</span><span class=lnt id=hl-24-750><a class=lnlinks href=#hl-24-750>750</a>
</span><span class=lnt id=hl-24-751><a class=lnlinks href=#hl-24-751>751</a>
</span><span class=lnt id=hl-24-752><a class=lnlinks href=#hl-24-752>752</a>
</span><span class=lnt id=hl-24-753><a class=lnlinks href=#hl-24-753>753</a>
</span><span class=lnt id=hl-24-754><a class=lnlinks href=#hl-24-754>754</a>
</span><span class=lnt id=hl-24-755><a class=lnlinks href=#hl-24-755>755</a>
</span><span class=lnt id=hl-24-756><a class=lnlinks href=#hl-24-756>756</a>
</span><span class=lnt id=hl-24-757><a class=lnlinks href=#hl-24-757>757</a>
</span><span class=lnt id=hl-24-758><a class=lnlinks href=#hl-24-758>758</a>
</span><span class=lnt id=hl-24-759><a class=lnlinks href=#hl-24-759>759</a>
</span><span class=lnt id=hl-24-760><a class=lnlinks href=#hl-24-760>760</a>
</span><span class=lnt id=hl-24-761><a class=lnlinks href=#hl-24-761>761</a>
</span><span class=lnt id=hl-24-762><a class=lnlinks href=#hl-24-762>762</a>
</span><span class=lnt id=hl-24-763><a class=lnlinks href=#hl-24-763>763</a>
</span><span class=lnt id=hl-24-764><a class=lnlinks href=#hl-24-764>764</a>
</span><span class=lnt id=hl-24-765><a class=lnlinks href=#hl-24-765>765</a>
</span><span class=lnt id=hl-24-766><a class=lnlinks href=#hl-24-766>766</a>
</span><span class=lnt id=hl-24-767><a class=lnlinks href=#hl-24-767>767</a>
</span><span class=lnt id=hl-24-768><a class=lnlinks href=#hl-24-768>768</a>
</span><span class=lnt id=hl-24-769><a class=lnlinks href=#hl-24-769>769</a>
</span><span class=lnt id=hl-24-770><a class=lnlinks href=#hl-24-770>770</a>
</span><span class=lnt id=hl-24-771><a class=lnlinks href=#hl-24-771>771</a>
</span><span class=lnt id=hl-24-772><a class=lnlinks href=#hl-24-772>772</a>
</span><span class=lnt id=hl-24-773><a class=lnlinks href=#hl-24-773>773</a>
</span><span class=lnt id=hl-24-774><a class=lnlinks href=#hl-24-774>774</a>
</span><span class=lnt id=hl-24-775><a class=lnlinks href=#hl-24-775>775</a>
</span><span class=lnt id=hl-24-776><a class=lnlinks href=#hl-24-776>776</a>
</span><span class=lnt id=hl-24-777><a class=lnlinks href=#hl-24-777>777</a>
</span><span class=lnt id=hl-24-778><a class=lnlinks href=#hl-24-778>778</a>
</span><span class=lnt id=hl-24-779><a class=lnlinks href=#hl-24-779>779</a>
</span><span class=lnt id=hl-24-780><a class=lnlinks href=#hl-24-780>780</a>
</span><span class=lnt id=hl-24-781><a class=lnlinks href=#hl-24-781>781</a>
</span><span class=lnt id=hl-24-782><a class=lnlinks href=#hl-24-782>782</a>
</span><span class=lnt id=hl-24-783><a class=lnlinks href=#hl-24-783>783</a>
</span><span class=lnt id=hl-24-784><a class=lnlinks href=#hl-24-784>784</a>
</span><span class=lnt id=hl-24-785><a class=lnlinks href=#hl-24-785>785</a>
</span><span class=lnt id=hl-24-786><a class=lnlinks href=#hl-24-786>786</a>
</span><span class=lnt id=hl-24-787><a class=lnlinks href=#hl-24-787>787</a>
</span><span class=lnt id=hl-24-788><a class=lnlinks href=#hl-24-788>788</a>
</span><span class=lnt id=hl-24-789><a class=lnlinks href=#hl-24-789>789</a>
</span><span class=lnt id=hl-24-790><a class=lnlinks href=#hl-24-790>790</a>
</span><span class=lnt id=hl-24-791><a class=lnlinks href=#hl-24-791>791</a>
</span><span class=lnt id=hl-24-792><a class=lnlinks href=#hl-24-792>792</a>
</span><span class=lnt id=hl-24-793><a class=lnlinks href=#hl-24-793>793</a>
</span><span class=lnt id=hl-24-794><a class=lnlinks href=#hl-24-794>794</a>
</span><span class=lnt id=hl-24-795><a class=lnlinks href=#hl-24-795>795</a>
</span><span class=lnt id=hl-24-796><a class=lnlinks href=#hl-24-796>796</a>
</span><span class=lnt id=hl-24-797><a class=lnlinks href=#hl-24-797>797</a>
</span><span class=lnt id=hl-24-798><a class=lnlinks href=#hl-24-798>798</a>
</span><span class=lnt id=hl-24-799><a class=lnlinks href=#hl-24-799>799</a>
</span><span class=lnt id=hl-24-800><a class=lnlinks href=#hl-24-800>800</a>
</span><span class=lnt id=hl-24-801><a class=lnlinks href=#hl-24-801>801</a>
</span><span class=lnt id=hl-24-802><a class=lnlinks href=#hl-24-802>802</a>
</span><span class=lnt id=hl-24-803><a class=lnlinks href=#hl-24-803>803</a>
</span><span class=lnt id=hl-24-804><a class=lnlinks href=#hl-24-804>804</a>
</span><span class=lnt id=hl-24-805><a class=lnlinks href=#hl-24-805>805</a>
</span><span class=lnt id=hl-24-806><a class=lnlinks href=#hl-24-806>806</a>
</span><span class=lnt id=hl-24-807><a class=lnlinks href=#hl-24-807>807</a>
</span><span class=lnt id=hl-24-808><a class=lnlinks href=#hl-24-808>808</a>
</span><span class=lnt id=hl-24-809><a class=lnlinks href=#hl-24-809>809</a>
</span><span class=lnt id=hl-24-810><a class=lnlinks href=#hl-24-810>810</a>
</span><span class=lnt id=hl-24-811><a class=lnlinks href=#hl-24-811>811</a>
</span><span class=lnt id=hl-24-812><a class=lnlinks href=#hl-24-812>812</a>
</span><span class=lnt id=hl-24-813><a class=lnlinks href=#hl-24-813>813</a>
</span><span class=lnt id=hl-24-814><a class=lnlinks href=#hl-24-814>814</a>
</span><span class=lnt id=hl-24-815><a class=lnlinks href=#hl-24-815>815</a>
</span><span class=lnt id=hl-24-816><a class=lnlinks href=#hl-24-816>816</a>
</span><span class=lnt id=hl-24-817><a class=lnlinks href=#hl-24-817>817</a>
</span><span class=lnt id=hl-24-818><a class=lnlinks href=#hl-24-818>818</a>
</span><span class=lnt id=hl-24-819><a class=lnlinks href=#hl-24-819>819</a>
</span><span class=lnt id=hl-24-820><a class=lnlinks href=#hl-24-820>820</a>
</span><span class=lnt id=hl-24-821><a class=lnlinks href=#hl-24-821>821</a>
</span><span class=lnt id=hl-24-822><a class=lnlinks href=#hl-24-822>822</a>
</span><span class=lnt id=hl-24-823><a class=lnlinks href=#hl-24-823>823</a>
</span><span class=lnt id=hl-24-824><a class=lnlinks href=#hl-24-824>824</a>
</span><span class=lnt id=hl-24-825><a class=lnlinks href=#hl-24-825>825</a>
</span><span class=lnt id=hl-24-826><a class=lnlinks href=#hl-24-826>826</a>
</span><span class=lnt id=hl-24-827><a class=lnlinks href=#hl-24-827>827</a>
</span><span class=lnt id=hl-24-828><a class=lnlinks href=#hl-24-828>828</a>
</span><span class=lnt id=hl-24-829><a class=lnlinks href=#hl-24-829>829</a>
</span><span class=lnt id=hl-24-830><a class=lnlinks href=#hl-24-830>830</a>
</span><span class=lnt id=hl-24-831><a class=lnlinks href=#hl-24-831>831</a>
</span><span class=lnt id=hl-24-832><a class=lnlinks href=#hl-24-832>832</a>
</span><span class=lnt id=hl-24-833><a class=lnlinks href=#hl-24-833>833</a>
</span><span class=lnt id=hl-24-834><a class=lnlinks href=#hl-24-834>834</a>
</span><span class=lnt id=hl-24-835><a class=lnlinks href=#hl-24-835>835</a>
</span><span class=lnt id=hl-24-836><a class=lnlinks href=#hl-24-836>836</a>
</span><span class=lnt id=hl-24-837><a class=lnlinks href=#hl-24-837>837</a>
</span><span class=lnt id=hl-24-838><a class=lnlinks href=#hl-24-838>838</a>
</span><span class=lnt id=hl-24-839><a class=lnlinks href=#hl-24-839>839</a>
</span><span class=lnt id=hl-24-840><a class=lnlinks href=#hl-24-840>840</a>
</span><span class=lnt id=hl-24-841><a class=lnlinks href=#hl-24-841>841</a>
</span><span class=lnt id=hl-24-842><a class=lnlinks href=#hl-24-842>842</a>
</span><span class=lnt id=hl-24-843><a class=lnlinks href=#hl-24-843>843</a>
</span><span class=lnt id=hl-24-844><a class=lnlinks href=#hl-24-844>844</a>
</span><span class=lnt id=hl-24-845><a class=lnlinks href=#hl-24-845>845</a>
</span><span class=lnt id=hl-24-846><a class=lnlinks href=#hl-24-846>846</a>
</span><span class=lnt id=hl-24-847><a class=lnlinks href=#hl-24-847>847</a>
</span><span class=lnt id=hl-24-848><a class=lnlinks href=#hl-24-848>848</a>
</span><span class=lnt id=hl-24-849><a class=lnlinks href=#hl-24-849>849</a>
</span><span class=lnt id=hl-24-850><a class=lnlinks href=#hl-24-850>850</a>
</span><span class=lnt id=hl-24-851><a class=lnlinks href=#hl-24-851>851</a>
</span><span class=lnt id=hl-24-852><a class=lnlinks href=#hl-24-852>852</a>
</span><span class=lnt id=hl-24-853><a class=lnlinks href=#hl-24-853>853</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Sidecar Pattern 구현 예시: 로깅 사이드카</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 1. 주 애플리케이션 (Flask 웹 서비스)</span>
</span></span><span class=line><span class=cl><span class=c1># main_app.py</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>jsonify</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>logging</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 구조화된 로깅 설정</span>
</span></span><span class=line><span class=cl><span class=n>logging</span><span class=o>.</span><span class=n>basicConfig</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>level</span><span class=o>=</span><span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nb>format</span><span class=o>=</span><span class=s1>&#39;</span><span class=si>%(message)s</span><span class=s1>&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>handlers</span><span class=o>=</span><span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=n>logging</span><span class=o>.</span><span class=n>FileHandler</span><span class=p>(</span><span class=s1>&#39;/shared/logs/app.log&#39;</span><span class=p>),</span>  <span class=c1># 사이드카와 공유하는 볼륨</span>
</span></span><span class=line><span class=cl>        <span class=n>logging</span><span class=o>.</span><span class=n>StreamHandler</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>log_structured</span><span class=p>(</span><span class=n>level</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;구조화된 로그 메시지 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>log_entry</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>utcnow</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;level&#39;</span><span class=p>:</span> <span class=n>level</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;message&#39;</span><span class=p>:</span> <span class=n>message</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;service&#39;</span><span class=p>:</span> <span class=s1>&#39;user-service&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=o>**</span><span class=n>kwargs</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>logging</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>log_entry</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s1>&#39;/api/users/&lt;user_id&gt;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_user</span><span class=p>(</span><span class=n>user_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;사용자 정보 조회 API&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 요청 로깅</span>
</span></span><span class=line><span class=cl>    <span class=n>log_structured</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;INFO&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s1>&#39;User request received&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>user_id</span><span class=o>=</span><span class=n>user_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>endpoint</span><span class=o>=</span><span class=s1>&#39;/api/users&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>request_id</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>headers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;X-Request-ID&#39;</span><span class=p>,</span> <span class=s1>&#39;unknown&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 비즈니스 로직 시뮬레이션</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>  <span class=c1># DB 조회 시뮬레이션</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>user_data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=n>user_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s1>&#39;User </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;email&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s1>&#39;user</span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s1>@example.com&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 성공 로깅</span>
</span></span><span class=line><span class=cl>        <span class=n>log_structured</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;INFO&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;User request completed&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>user_id</span><span class=o>=</span><span class=n>user_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>response_time</span><span class=o>=</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start_time</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>status</span><span class=o>=</span><span class=s1>&#39;success&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>jsonify</span><span class=p>(</span><span class=n>user_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 에러 로깅</span>
</span></span><span class=line><span class=cl>        <span class=n>log_structured</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;ERROR&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;User request failed&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>user_id</span><span class=o>=</span><span class=n>user_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>error</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>response_time</span><span class=o>=</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start_time</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>jsonify</span><span class=p>({</span><span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=s1>&#39;Internal server error&#39;</span><span class=p>}),</span> <span class=mi>500</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s1>&#39;/health&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>health_check</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;헬스체크 엔드포인트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>jsonify</span><span class=p>({</span><span class=s1>&#39;status&#39;</span><span class=p>:</span> <span class=s1>&#39;healthy&#39;</span><span class=p>,</span> <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>utcnow</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>()})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>log_structured</span><span class=p>(</span><span class=s1>&#39;INFO&#39;</span><span class=p>,</span> <span class=s1>&#39;Application starting&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>5000</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>host</span><span class=o>=</span><span class=s1>&#39;0.0.0.0&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>5000</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 사이드카 컨테이너 (로깅 에이전트)</span>
</span></span><span class=line><span class=cl><span class=c1># logging_sidecar.py</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>watchdog.observers</span> <span class=kn>import</span> <span class=n>Observer</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>watchdog.events</span> <span class=kn>import</span> <span class=n>FileSystemEventHandler</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>LogHandler</span><span class=p>(</span><span class=n>FileSystemEventHandler</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;로그 파일 변경 감지 및 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>log_aggregator_url</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>log_aggregator_url</span> <span class=o>=</span> <span class=n>log_aggregator_url</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>processed_lines</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>on_modified</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;파일 변경 시 호출되는 메서드&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>event</span><span class=o>.</span><span class=n>src_path</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=s1>&#39;.log&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>process_log_file</span><span class=p>(</span><span class=n>event</span><span class=o>.</span><span class=n>src_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_log_file</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file_path</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;로그 파일 처리 및 전송&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>file_path</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>lines</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>readlines</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=n>new_lines</span> <span class=o>=</span> <span class=n>lines</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>processed_lines</span><span class=p>:]</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>new_lines</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>line</span><span class=o>.</span><span class=n>strip</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                        <span class=bp>self</span><span class=o>.</span><span class=n>send_log</span><span class=p>(</span><span class=n>line</span><span class=o>.</span><span class=n>strip</span><span class=p>())</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>processed_lines</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>lines</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Error processing log file: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>send_log</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>log_line</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;로그를 중앙 집계 시스템으로 전송&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># JSON 로그 파싱</span>
</span></span><span class=line><span class=cl>            <span class=n>log_data</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>log_line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 메타데이터 추가</span>
</span></span><span class=line><span class=cl>            <span class=n>enriched_log</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=o>**</span><span class=n>log_data</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;hostname&#39;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;HOSTNAME&#39;</span><span class=p>,</span> <span class=s1>&#39;unknown&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;cluster&#39;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;CLUSTER_NAME&#39;</span><span class=p>,</span> <span class=s1>&#39;default&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;namespace&#39;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;NAMESPACE&#39;</span><span class=p>,</span> <span class=s1>&#39;default&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;sidecar_timestamp&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>utcnow</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 로그 집계 시스템으로 전송</span>
</span></span><span class=line><span class=cl>            <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>log_aggregator_url</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>json</span><span class=o>=</span><span class=n>enriched_log</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>timeout</span><span class=o>=</span><span class=mi>5</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>200</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Log sent successfully: </span><span class=si>{</span><span class=n>log_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;message&#39;</span><span class=p>,</span> <span class=s1>&#39;unknown&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Failed to send log: </span><span class=si>{</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=n>json</span><span class=o>.</span><span class=n>JSONDecodeError</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 비구조화된 로그 처리</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>send_unstructured_log</span><span class=p>(</span><span class=n>log_line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Error sending log: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>send_unstructured_log</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>log_line</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;비구조화된 로그 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>unstructured_log</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>utcnow</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;level&#39;</span><span class=p>:</span> <span class=s1>&#39;INFO&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;message&#39;</span><span class=p>:</span> <span class=n>log_line</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;service&#39;</span><span class=p>:</span> <span class=s1>&#39;user-service&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;structured&#39;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;hostname&#39;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;HOSTNAME&#39;</span><span class=p>,</span> <span class=s1>&#39;unknown&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>log_aggregator_url</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>json</span><span class=o>=</span><span class=n>unstructured_log</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>timeout</span><span class=o>=</span><span class=mi>5</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Error sending unstructured log: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>HealthMonitor</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주 애플리케이션 헬스 모니터링&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>app_health_url</span><span class=p>,</span> <span class=n>check_interval</span><span class=o>=</span><span class=mi>30</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>app_health_url</span> <span class=o>=</span> <span class=n>app_health_url</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>check_interval</span> <span class=o>=</span> <span class=n>check_interval</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>is_healthy</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>start_monitoring</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;헬스 체크 시작&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>def</span> <span class=nf>monitor</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>app_health_url</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>200</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_healthy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Application recovered&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=bp>self</span><span class=o>.</span><span class=n>is_healthy</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>                    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_healthy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Application health check failed: </span><span class=si>{</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=bp>self</span><span class=o>.</span><span class=n>is_healthy</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>                            
</span></span><span class=line><span class=cl>                <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_healthy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Application health check error: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=bp>self</span><span class=o>.</span><span class=n>is_healthy</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>check_interval</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>monitor_thread</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>monitor</span><span class=p>,</span> <span class=n>daemon</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>monitor_thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MetricsCollector</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;메트릭 수집 및 전송&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>metrics_url</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>metrics_url</span> <span class=o>=</span> <span class=n>metrics_url</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>log_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>error_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>increment_log_count</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;로그 카운트 증가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>log_count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>increment_error_count</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;에러 카운트 증가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>error_count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>send_metrics</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;메트릭 전송&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>metrics</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>utcnow</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;sidecar_type&#39;</span><span class=p>:</span> <span class=s1>&#39;logging&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;metrics&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;logs_processed&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>log_count</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;errors_encountered&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>error_count</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;service&#39;</span><span class=p>:</span> <span class=s1>&#39;user-service&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>metrics_url</span><span class=p>,</span> <span class=n>json</span><span class=o>=</span><span class=n>metrics</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Metrics sent: </span><span class=si>{</span><span class=n>metrics</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Error sending metrics: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>start_metrics_reporting</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>interval</span><span class=o>=</span><span class=mi>60</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주기적 메트릭 리포팅 시작&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>def</span> <span class=nf>report</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>send_metrics</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>interval</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>metrics_thread</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>report</span><span class=p>,</span> <span class=n>daemon</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>metrics_thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;사이드카 메인 함수&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Starting logging sidecar...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 환경 변수에서 설정 로드</span>
</span></span><span class=line><span class=cl>    <span class=n>log_aggregator_url</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;LOG_AGGREGATOR_URL&#39;</span><span class=p>,</span> <span class=s1>&#39;http://logstash:5000/logs&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>metrics_url</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;METRICS_URL&#39;</span><span class=p>,</span> <span class=s1>&#39;http://prometheus:9090/metrics&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>app_health_url</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;APP_HEALTH_URL&#39;</span><span class=p>,</span> <span class=s1>&#39;http://localhost:5000/health&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>log_dir</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;LOG_DIR&#39;</span><span class=p>,</span> <span class=s1>&#39;/shared/logs&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 로그 핸들러 설정</span>
</span></span><span class=line><span class=cl>    <span class=n>log_handler</span> <span class=o>=</span> <span class=n>LogHandler</span><span class=p>(</span><span class=n>log_aggregator_url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 메트릭 수집기 설정</span>
</span></span><span class=line><span class=cl>    <span class=n>metrics_collector</span> <span class=o>=</span> <span class=n>MetricsCollector</span><span class=p>(</span><span class=n>metrics_url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>metrics_collector</span><span class=o>.</span><span class=n>start_metrics_reporting</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 헬스 모니터링 시작</span>
</span></span><span class=line><span class=cl>    <span class=n>health_monitor</span> <span class=o>=</span> <span class=n>HealthMonitor</span><span class=p>(</span><span class=n>app_health_url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>health_monitor</span><span class=o>.</span><span class=n>start_monitoring</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 파일 시스템 감시자 설정</span>
</span></span><span class=line><span class=cl>    <span class=n>observer</span> <span class=o>=</span> <span class=n>Observer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>observer</span><span class=o>.</span><span class=n>schedule</span><span class=p>(</span><span class=n>log_handler</span><span class=p>,</span> <span class=n>log_dir</span><span class=p>,</span> <span class=n>recursive</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>observer</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Sidecar started. Monitoring logs in </span><span class=si>{</span><span class=n>log_dir</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>KeyboardInterrupt</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Stopping sidecar...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>observer</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>observer</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. Docker Compose 설정</span>
</span></span><span class=line><span class=cl><span class=c1># docker-compose.yml </span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>version: &#39;3.8&#39;
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>services:
</span></span></span><span class=line><span class=cl><span class=s2>  # 주 애플리케이션
</span></span></span><span class=line><span class=cl><span class=s2>  user-service:
</span></span></span><span class=line><span class=cl><span class=s2>    build: 
</span></span></span><span class=line><span class=cl><span class=s2>      context: .
</span></span></span><span class=line><span class=cl><span class=s2>      dockerfile: Dockerfile.app
</span></span></span><span class=line><span class=cl><span class=s2>    container_name: user-service
</span></span></span><span class=line><span class=cl><span class=s2>    ports:
</span></span></span><span class=line><span class=cl><span class=s2>      - &#34;5000:5000&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    volumes:
</span></span></span><span class=line><span class=cl><span class=s2>      - shared-logs:/shared/logs
</span></span></span><span class=line><span class=cl><span class=s2>    environment:
</span></span></span><span class=line><span class=cl><span class=s2>      - SERVICE_NAME=user-service
</span></span></span><span class=line><span class=cl><span class=s2>      - LOG_LEVEL=INFO
</span></span></span><span class=line><span class=cl><span class=s2>    depends_on:
</span></span></span><span class=line><span class=cl><span class=s2>      - log-aggregator
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  # 로깅 사이드카
</span></span></span><span class=line><span class=cl><span class=s2>  logging-sidecar:
</span></span></span><span class=line><span class=cl><span class=s2>    build:
</span></span></span><span class=line><span class=cl><span class=s2>      context: .
</span></span></span><span class=line><span class=cl><span class=s2>      dockerfile: Dockerfile.sidecar
</span></span></span><span class=line><span class=cl><span class=s2>    container_name: logging-sidecar
</span></span></span><span class=line><span class=cl><span class=s2>    volumes:
</span></span></span><span class=line><span class=cl><span class=s2>      - shared-logs:/shared/logs
</span></span></span><span class=line><span class=cl><span class=s2>    environment:
</span></span></span><span class=line><span class=cl><span class=s2>      - LOG_AGGREGATOR_URL=http://log-aggregator:8080/logs
</span></span></span><span class=line><span class=cl><span class=s2>      - APP_HEALTH_URL=http://user-service:5000/health
</span></span></span><span class=line><span class=cl><span class=s2>      - HOSTNAME=$</span><span class=si>{HOSTNAME}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>      - CLUSTER_NAME=local-cluster
</span></span></span><span class=line><span class=cl><span class=s2>    depends_on:
</span></span></span><span class=line><span class=cl><span class=s2>      - user-service
</span></span></span><span class=line><span class=cl><span class=s2>      - log-aggregator
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  # 로그 집계 시스템 (시뮬레이션)
</span></span></span><span class=line><span class=cl><span class=s2>  log-aggregator:
</span></span></span><span class=line><span class=cl><span class=s2>    image: nginx:alpine
</span></span></span><span class=line><span class=cl><span class=s2>    container_name: log-aggregator
</span></span></span><span class=line><span class=cl><span class=s2>    ports:
</span></span></span><span class=line><span class=cl><span class=s2>      - &#34;8080:80&#34;
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>volumes:
</span></span></span><span class=line><span class=cl><span class=s2>  shared-logs:
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. Kubernetes 배포 매니페스트</span>
</span></span><span class=line><span class=cl><span class=c1># k8s-deployment.yaml</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>apiVersion: apps/v1
</span></span></span><span class=line><span class=cl><span class=s2>kind: Deployment
</span></span></span><span class=line><span class=cl><span class=s2>metadata:
</span></span></span><span class=line><span class=cl><span class=s2>  name: user-service
</span></span></span><span class=line><span class=cl><span class=s2>  labels:
</span></span></span><span class=line><span class=cl><span class=s2>    app: user-service
</span></span></span><span class=line><span class=cl><span class=s2>spec:
</span></span></span><span class=line><span class=cl><span class=s2>  replicas: 3
</span></span></span><span class=line><span class=cl><span class=s2>  selector:
</span></span></span><span class=line><span class=cl><span class=s2>    matchLabels:
</span></span></span><span class=line><span class=cl><span class=s2>      app: user-service
</span></span></span><span class=line><span class=cl><span class=s2>  template:
</span></span></span><span class=line><span class=cl><span class=s2>    metadata:
</span></span></span><span class=line><span class=cl><span class=s2>      labels:
</span></span></span><span class=line><span class=cl><span class=s2>        app: user-service
</span></span></span><span class=line><span class=cl><span class=s2>    spec:
</span></span></span><span class=line><span class=cl><span class=s2>      containers:
</span></span></span><span class=line><span class=cl><span class=s2>      # 주 애플리케이션 컨테이너
</span></span></span><span class=line><span class=cl><span class=s2>      - name: user-service
</span></span></span><span class=line><span class=cl><span class=s2>        image: user-service:latest
</span></span></span><span class=line><span class=cl><span class=s2>        ports:
</span></span></span><span class=line><span class=cl><span class=s2>        - containerPort: 5000
</span></span></span><span class=line><span class=cl><span class=s2>        volumeMounts:
</span></span></span><span class=line><span class=cl><span class=s2>        - name: shared-logs
</span></span></span><span class=line><span class=cl><span class=s2>          mountPath: /shared/logs
</span></span></span><span class=line><span class=cl><span class=s2>        env:
</span></span></span><span class=line><span class=cl><span class=s2>        - name: SERVICE_NAME
</span></span></span><span class=line><span class=cl><span class=s2>          value: &#34;user-service&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        resources:
</span></span></span><span class=line><span class=cl><span class=s2>          requests:
</span></span></span><span class=line><span class=cl><span class=s2>            memory: &#34;128Mi&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            cpu: &#34;100m&#34;
</span></span></span><span class=line><span class=cl><span class=s2>          limits:
</span></span></span><span class=line><span class=cl><span class=s2>            memory: &#34;256Mi&#34; 
</span></span></span><span class=line><span class=cl><span class=s2>            cpu: &#34;200m&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>      # 로깅 사이드카 컨테이너
</span></span></span><span class=line><span class=cl><span class=s2>      - name: logging-sidecar
</span></span></span><span class=line><span class=cl><span class=s2>        image: logging-sidecar:latest
</span></span></span><span class=line><span class=cl><span class=s2>        volumeMounts:
</span></span></span><span class=line><span class=cl><span class=s2>        - name: shared-logs
</span></span></span><span class=line><span class=cl><span class=s2>          mountPath: /shared/logs
</span></span></span><span class=line><span class=cl><span class=s2>        env:
</span></span></span><span class=line><span class=cl><span class=s2>        - name: LOG_AGGREGATOR_URL
</span></span></span><span class=line><span class=cl><span class=s2>          value: &#34;http://logstash:5000/logs&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        - name: APP_HEALTH_URL
</span></span></span><span class=line><span class=cl><span class=s2>          value: &#34;http://localhost:5000/health&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        - name: HOSTNAME
</span></span></span><span class=line><span class=cl><span class=s2>          valueFrom:
</span></span></span><span class=line><span class=cl><span class=s2>            fieldRef:
</span></span></span><span class=line><span class=cl><span class=s2>              fieldPath: metadata.name
</span></span></span><span class=line><span class=cl><span class=s2>        resources:
</span></span></span><span class=line><span class=cl><span class=s2>          requests:
</span></span></span><span class=line><span class=cl><span class=s2>            memory: &#34;64Mi&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            cpu: &#34;50m&#34;
</span></span></span><span class=line><span class=cl><span class=s2>          limits:
</span></span></span><span class=line><span class=cl><span class=s2>            memory: &#34;128Mi&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            cpu: &#34;100m&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            
</span></span></span><span class=line><span class=cl><span class=s2>      volumes:
</span></span></span><span class=line><span class=cl><span class=s2>      - name: shared-logs
</span></span></span><span class=line><span class=cl><span class=s2>        emptyDir: </span><span class=si>{}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>---
</span></span></span><span class=line><span class=cl><span class=s2>apiVersion: v1
</span></span></span><span class=line><span class=cl><span class=s2>kind: Service
</span></span></span><span class=line><span class=cl><span class=s2>metadata:
</span></span></span><span class=line><span class=cl><span class=s2>  name: user-service
</span></span></span><span class=line><span class=cl><span class=s2>spec:
</span></span></span><span class=line><span class=cl><span class=s2>  selector:
</span></span></span><span class=line><span class=cl><span class=s2>    app: user-service
</span></span></span><span class=line><span class=cl><span class=s2>  ports:
</span></span></span><span class=line><span class=cl><span class=s2>  - port: 80
</span></span></span><span class=line><span class=cl><span class=s2>    targetPort: 5000
</span></span></span><span class=line><span class=cl><span class=s2>  type: LoadBalancer
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span><span class=c1># Sidecar Pattern 구현 예시: 로깅 사이드카</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 1. 주 애플리케이션 (Flask 웹 서비스)</span>
</span></span><span class=line><span class=cl><span class=c1># main_app.py</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>jsonify</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>logging</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 구조화된 로깅 설정</span>
</span></span><span class=line><span class=cl><span class=n>logging</span><span class=o>.</span><span class=n>basicConfig</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>level</span><span class=o>=</span><span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nb>format</span><span class=o>=</span><span class=s1>&#39;</span><span class=si>%(message)s</span><span class=s1>&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>handlers</span><span class=o>=</span><span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=n>logging</span><span class=o>.</span><span class=n>FileHandler</span><span class=p>(</span><span class=s1>&#39;/shared/logs/app.log&#39;</span><span class=p>),</span>  <span class=c1># 사이드카와 공유하는 볼륨</span>
</span></span><span class=line><span class=cl>        <span class=n>logging</span><span class=o>.</span><span class=n>StreamHandler</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>log_structured</span><span class=p>(</span><span class=n>level</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;구조화된 로그 메시지 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>log_entry</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>utcnow</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;level&#39;</span><span class=p>:</span> <span class=n>level</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;message&#39;</span><span class=p>:</span> <span class=n>message</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;service&#39;</span><span class=p>:</span> <span class=s1>&#39;user-service&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=o>**</span><span class=n>kwargs</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>logging</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>log_entry</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s1>&#39;/api/users/&lt;user_id&gt;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_user</span><span class=p>(</span><span class=n>user_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;사용자 정보 조회 API&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 요청 로깅</span>
</span></span><span class=line><span class=cl>    <span class=n>log_structured</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;INFO&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s1>&#39;User request received&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>user_id</span><span class=o>=</span><span class=n>user_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>endpoint</span><span class=o>=</span><span class=s1>&#39;/api/users&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>request_id</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>headers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;X-Request-ID&#39;</span><span class=p>,</span> <span class=s1>&#39;unknown&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 비즈니스 로직 시뮬레이션</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>  <span class=c1># DB 조회 시뮬레이션</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>user_data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=n>user_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s1>&#39;User </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;email&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s1>&#39;user</span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s1>@example.com&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 성공 로깅</span>
</span></span><span class=line><span class=cl>        <span class=n>log_structured</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;INFO&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;User request completed&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>user_id</span><span class=o>=</span><span class=n>user_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>response_time</span><span class=o>=</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start_time</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>status</span><span class=o>=</span><span class=s1>&#39;success&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>jsonify</span><span class=p>(</span><span class=n>user_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 에러 로깅</span>
</span></span><span class=line><span class=cl>        <span class=n>log_structured</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;ERROR&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;User request failed&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>user_id</span><span class=o>=</span><span class=n>user_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>error</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>response_time</span><span class=o>=</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start_time</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>jsonify</span><span class=p>({</span><span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=s1>&#39;Internal server error&#39;</span><span class=p>}),</span> <span class=mi>500</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s1>&#39;/health&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>health_check</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;헬스체크 엔드포인트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>jsonify</span><span class=p>({</span><span class=s1>&#39;status&#39;</span><span class=p>:</span> <span class=s1>&#39;healthy&#39;</span><span class=p>,</span> <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>utcnow</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>()})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>log_structured</span><span class=p>(</span><span class=s1>&#39;INFO&#39;</span><span class=p>,</span> <span class=s1>&#39;Application starting&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>5000</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>host</span><span class=o>=</span><span class=s1>&#39;0.0.0.0&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>5000</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 사이드카 컨테이너 (로깅 에이전트)</span>
</span></span><span class=line><span class=cl><span class=c1># logging_sidecar.py</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>watchdog.observers</span> <span class=kn>import</span> <span class=n>Observer</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>watchdog.events</span> <span class=kn>import</span> <span class=n>FileSystemEventHandler</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>LogHandler</span><span class=p>(</span><span class=n>FileSystemEventHandler</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;로그 파일 변경 감지 및 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>log_aggregator_url</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>log_aggregator_url</span> <span class=o>=</span> <span class=n>log_aggregator_url</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>processed_lines</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>on_modified</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;파일 변경 시 호출되는 메서드&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>event</span><span class=o>.</span><span class=n>src_path</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=s1>&#39;.log&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>process_log_file</span><span class=p>(</span><span class=n>event</span><span class=o>.</span><span class=n>src_path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_log_file</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file_path</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;로그 파일 처리 및 전송&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>file_path</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>lines</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>readlines</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=n>new_lines</span> <span class=o>=</span> <span class=n>lines</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>processed_lines</span><span class=p>:]</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>new_lines</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>line</span><span class=o>.</span><span class=n>strip</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                        <span class=bp>self</span><span class=o>.</span><span class=n>send_log</span><span class=p>(</span><span class=n>line</span><span class=o>.</span><span class=n>strip</span><span class=p>())</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>processed_lines</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>lines</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Error processing log file: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>send_log</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>log_line</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;로그를 중앙 집계 시스템으로 전송&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># JSON 로그 파싱</span>
</span></span><span class=line><span class=cl>            <span class=n>log_data</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>log_line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 메타데이터 추가</span>
</span></span><span class=line><span class=cl>            <span class=n>enriched_log</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=o>**</span><span class=n>log_data</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;hostname&#39;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;HOSTNAME&#39;</span><span class=p>,</span> <span class=s1>&#39;unknown&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;cluster&#39;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;CLUSTER_NAME&#39;</span><span class=p>,</span> <span class=s1>&#39;default&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;namespace&#39;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;NAMESPACE&#39;</span><span class=p>,</span> <span class=s1>&#39;default&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;sidecar_timestamp&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>utcnow</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 로그 집계 시스템으로 전송</span>
</span></span><span class=line><span class=cl>            <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>log_aggregator_url</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>json</span><span class=o>=</span><span class=n>enriched_log</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>timeout</span><span class=o>=</span><span class=mi>5</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>200</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Log sent successfully: </span><span class=si>{</span><span class=n>log_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;message&#39;</span><span class=p>,</span> <span class=s1>&#39;unknown&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Failed to send log: </span><span class=si>{</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=n>json</span><span class=o>.</span><span class=n>JSONDecodeError</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 비구조화된 로그 처리</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>send_unstructured_log</span><span class=p>(</span><span class=n>log_line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Error sending log: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>send_unstructured_log</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>log_line</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;비구조화된 로그 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>unstructured_log</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>utcnow</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;level&#39;</span><span class=p>:</span> <span class=s1>&#39;INFO&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;message&#39;</span><span class=p>:</span> <span class=n>log_line</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;service&#39;</span><span class=p>:</span> <span class=s1>&#39;user-service&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;structured&#39;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;hostname&#39;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;HOSTNAME&#39;</span><span class=p>,</span> <span class=s1>&#39;unknown&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>log_aggregator_url</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>json</span><span class=o>=</span><span class=n>unstructured_log</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>timeout</span><span class=o>=</span><span class=mi>5</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Error sending unstructured log: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>HealthMonitor</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주 애플리케이션 헬스 모니터링&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>app_health_url</span><span class=p>,</span> <span class=n>check_interval</span><span class=o>=</span><span class=mi>30</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>app_health_url</span> <span class=o>=</span> <span class=n>app_health_url</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>check_interval</span> <span class=o>=</span> <span class=n>check_interval</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>is_healthy</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>start_monitoring</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;헬스 체크 시작&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>def</span> <span class=nf>monitor</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>app_health_url</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>200</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_healthy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Application recovered&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=bp>self</span><span class=o>.</span><span class=n>is_healthy</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>                    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_healthy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Application health check failed: </span><span class=si>{</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=bp>self</span><span class=o>.</span><span class=n>is_healthy</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>                            
</span></span><span class=line><span class=cl>                <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_healthy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Application health check error: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=bp>self</span><span class=o>.</span><span class=n>is_healthy</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>check_interval</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>monitor_thread</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>monitor</span><span class=p>,</span> <span class=n>daemon</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>monitor_thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MetricsCollector</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;메트릭 수집 및 전송&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>metrics_url</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>metrics_url</span> <span class=o>=</span> <span class=n>metrics_url</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>log_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>error_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>increment_log_count</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;로그 카운트 증가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>log_count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>increment_error_count</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;에러 카운트 증가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>error_count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>send_metrics</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;메트릭 전송&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>metrics</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>utcnow</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;sidecar_type&#39;</span><span class=p>:</span> <span class=s1>&#39;logging&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;metrics&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;logs_processed&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>log_count</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;errors_encountered&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>error_count</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;service&#39;</span><span class=p>:</span> <span class=s1>&#39;user-service&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>metrics_url</span><span class=p>,</span> <span class=n>json</span><span class=o>=</span><span class=n>metrics</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Metrics sent: </span><span class=si>{</span><span class=n>metrics</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Error sending metrics: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>start_metrics_reporting</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>interval</span><span class=o>=</span><span class=mi>60</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주기적 메트릭 리포팅 시작&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>def</span> <span class=nf>report</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>send_metrics</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>interval</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>metrics_thread</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>report</span><span class=p>,</span> <span class=n>daemon</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>metrics_thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;사이드카 메인 함수&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Starting logging sidecar...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 환경 변수에서 설정 로드</span>
</span></span><span class=line><span class=cl>    <span class=n>log_aggregator_url</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;LOG_AGGREGATOR_URL&#39;</span><span class=p>,</span> <span class=s1>&#39;http://logstash:5000/logs&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>metrics_url</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;METRICS_URL&#39;</span><span class=p>,</span> <span class=s1>&#39;http://prometheus:9090/metrics&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>app_health_url</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;APP_HEALTH_URL&#39;</span><span class=p>,</span> <span class=s1>&#39;http://localhost:5000/health&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>log_dir</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;LOG_DIR&#39;</span><span class=p>,</span> <span class=s1>&#39;/shared/logs&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 로그 핸들러 설정</span>
</span></span><span class=line><span class=cl>    <span class=n>log_handler</span> <span class=o>=</span> <span class=n>LogHandler</span><span class=p>(</span><span class=n>log_aggregator_url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 메트릭 수집기 설정</span>
</span></span><span class=line><span class=cl>    <span class=n>metrics_collector</span> <span class=o>=</span> <span class=n>MetricsCollector</span><span class=p>(</span><span class=n>metrics_url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>metrics_collector</span><span class=o>.</span><span class=n>start_metrics_reporting</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 헬스 모니터링 시작</span>
</span></span><span class=line><span class=cl>    <span class=n>health_monitor</span> <span class=o>=</span> <span class=n>HealthMonitor</span><span class=p>(</span><span class=n>app_health_url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>health_monitor</span><span class=o>.</span><span class=n>start_monitoring</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 파일 시스템 감시자 설정</span>
</span></span><span class=line><span class=cl>    <span class=n>observer</span> <span class=o>=</span> <span class=n>Observer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>observer</span><span class=o>.</span><span class=n>schedule</span><span class=p>(</span><span class=n>log_handler</span><span class=p>,</span> <span class=n>log_dir</span><span class=p>,</span> <span class=n>recursive</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>observer</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Sidecar started. Monitoring logs in </span><span class=si>{</span><span class=n>log_dir</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>KeyboardInterrupt</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Stopping sidecar...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>observer</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>observer</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. Docker Compose 설정</span>
</span></span><span class=line><span class=cl><span class=c1># docker-compose.yml </span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>version: &#39;3.8&#39;
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>services:
</span></span></span><span class=line><span class=cl><span class=s2>  # 주 애플리케이션
</span></span></span><span class=line><span class=cl><span class=s2>  user-service:
</span></span></span><span class=line><span class=cl><span class=s2>    build: 
</span></span></span><span class=line><span class=cl><span class=s2>      context: .
</span></span></span><span class=line><span class=cl><span class=s2>      dockerfile: Dockerfile.app
</span></span></span><span class=line><span class=cl><span class=s2>    container_name: user-service
</span></span></span><span class=line><span class=cl><span class=s2>    ports:
</span></span></span><span class=line><span class=cl><span class=s2>      - &#34;5000:5000&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    volumes:
</span></span></span><span class=line><span class=cl><span class=s2>      - shared-logs:/shared/logs
</span></span></span><span class=line><span class=cl><span class=s2>    environment:
</span></span></span><span class=line><span class=cl><span class=s2>      - SERVICE_NAME=user-service
</span></span></span><span class=line><span class=cl><span class=s2>      - LOG_LEVEL=INFO
</span></span></span><span class=line><span class=cl><span class=s2>    depends_on:
</span></span></span><span class=line><span class=cl><span class=s2>      - log-aggregator
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  # 로깅 사이드카
</span></span></span><span class=line><span class=cl><span class=s2>  logging-sidecar:
</span></span></span><span class=line><span class=cl><span class=s2>    build:
</span></span></span><span class=line><span class=cl><span class=s2>      context: .
</span></span></span><span class=line><span class=cl><span class=s2>      dockerfile: Dockerfile.sidecar
</span></span></span><span class=line><span class=cl><span class=s2>    container_name: logging-sidecar
</span></span></span><span class=line><span class=cl><span class=s2>    volumes:
</span></span></span><span class=line><span class=cl><span class=s2>      - shared-logs:/shared/logs
</span></span></span><span class=line><span class=cl><span class=s2>    environment:
</span></span></span><span class=line><span class=cl><span class=s2>      - LOG_AGGREGATOR_URL=http://log-aggregator:8080/logs
</span></span></span><span class=line><span class=cl><span class=s2>      - APP_HEALTH_URL=http://user-service:5000/health
</span></span></span><span class=line><span class=cl><span class=s2>      - HOSTNAME=$</span><span class=si>{HOSTNAME}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>      - CLUSTER_NAME=local-cluster
</span></span></span><span class=line><span class=cl><span class=s2>    depends_on:
</span></span></span><span class=line><span class=cl><span class=s2>      - user-service
</span></span></span><span class=line><span class=cl><span class=s2>      - log-aggregator
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>  # 로그 집계 시스템 (시뮬레이션)
</span></span></span><span class=line><span class=cl><span class=s2>  log-aggregator:
</span></span></span><span class=line><span class=cl><span class=s2>    image: nginx:alpine
</span></span></span><span class=line><span class=cl><span class=s2>    container_name: log-aggregator
</span></span></span><span class=line><span class=cl><span class=s2>    ports:
</span></span></span><span class=line><span class=cl><span class=s2>      - &#34;8080:80&#34;
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>volumes:
</span></span></span><span class=line><span class=cl><span class=s2>  shared-logs:
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. Kubernetes 배포 매니페스트</span>
</span></span><span class=line><span class=cl><span class=c1># k8s-deployment.yaml</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>apiVersion: apps/v1
</span></span></span><span class=line><span class=cl><span class=s2>kind: Deployment
</span></span></span><span class=line><span class=cl><span class=s2>metadata:
</span></span></span><span class=line><span class=cl><span class=s2>  name: user-service
</span></span></span><span class=line><span class=cl><span class=s2>  labels:
</span></span></span><span class=line><span class=cl><span class=s2>    app: user-service
</span></span></span><span class=line><span class=cl><span class=s2>spec:
</span></span></span><span class=line><span class=cl><span class=s2>  replicas: 3
</span></span></span><span class=line><span class=cl><span class=s2>  selector:
</span></span></span><span class=line><span class=cl><span class=s2>    matchLabels:
</span></span></span><span class=line><span class=cl><span class=s2>      app: user-service
</span></span></span><span class=line><span class=cl><span class=s2>  template:
</span></span></span><span class=line><span class=cl><span class=s2>    metadata:
</span></span></span><span class=line><span class=cl><span class=s2>      labels:
</span></span></span><span class=line><span class=cl><span class=s2>        app: user-service
</span></span></span><span class=line><span class=cl><span class=s2>    spec:
</span></span></span><span class=line><span class=cl><span class=s2>      containers:
</span></span></span><span class=line><span class=cl><span class=s2>      # 주 애플리케이션 컨테이너
</span></span></span><span class=line><span class=cl><span class=s2>      - name: user-service
</span></span></span><span class=line><span class=cl><span class=s2>        image: user-service:latest
</span></span></span><span class=line><span class=cl><span class=s2>        ports:
</span></span></span><span class=line><span class=cl><span class=s2>        - containerPort: 5000
</span></span></span><span class=line><span class=cl><span class=s2>        volumeMounts:
</span></span></span><span class=line><span class=cl><span class=s2>        - name: shared-logs
</span></span></span><span class=line><span class=cl><span class=s2>          mountPath: /shared/logs
</span></span></span><span class=line><span class=cl><span class=s2>        env:
</span></span></span><span class=line><span class=cl><span class=s2>        - name: SERVICE_NAME
</span></span></span><span class=line><span class=cl><span class=s2>          value: &#34;user-service&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        resources:
</span></span></span><span class=line><span class=cl><span class=s2>          requests:
</span></span></span><span class=line><span class=cl><span class=s2>            memory: &#34;128Mi&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            cpu: &#34;100m&#34;
</span></span></span><span class=line><span class=cl><span class=s2>          limits:
</span></span></span><span class=line><span class=cl><span class=s2>            memory: &#34;256Mi&#34; 
</span></span></span><span class=line><span class=cl><span class=s2>            cpu: &#34;200m&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>      # 로깅 사이드카 컨테이너
</span></span></span><span class=line><span class=cl><span class=s2>      - name: logging-sidecar
</span></span></span><span class=line><span class=cl><span class=s2>        image: logging-sidecar:latest
</span></span></span><span class=line><span class=cl><span class=s2>        volumeMounts:
</span></span></span><span class=line><span class=cl><span class=s2>        - name: shared-logs
</span></span></span><span class=line><span class=cl><span class=s2>          mountPath: /shared/logs
</span></span></span><span class=line><span class=cl><span class=s2>        env:
</span></span></span><span class=line><span class=cl><span class=s2>        - name: LOG_AGGREGATOR_URL
</span></span></span><span class=line><span class=cl><span class=s2>          value: &#34;http://logstash:5000/logs&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        - name: APP_HEALTH_URL
</span></span></span><span class=line><span class=cl><span class=s2>          value: &#34;http://localhost:5000/health&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        - name: HOSTNAME
</span></span></span><span class=line><span class=cl><span class=s2>          valueFrom:
</span></span></span><span class=line><span class=cl><span class=s2>            fieldRef:
</span></span></span><span class=line><span class=cl><span class=s2>              fieldPath: metadata.name
</span></span></span><span class=line><span class=cl><span class=s2>        resources:
</span></span></span><span class=line><span class=cl><span class=s2>          requests:
</span></span></span><span class=line><span class=cl><span class=s2>            memory: &#34;64Mi&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            cpu: &#34;50m&#34;
</span></span></span><span class=line><span class=cl><span class=s2>          limits:
</span></span></span><span class=line><span class=cl><span class=s2>            memory: &#34;128Mi&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            cpu: &#34;100m&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            
</span></span></span><span class=line><span class=cl><span class=s2>      volumes:
</span></span></span><span class=line><span class=cl><span class=s2>      - name: shared-logs
</span></span></span><span class=line><span class=cl><span class=s2>        emptyDir: </span><span class=si>{}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>---
</span></span></span><span class=line><span class=cl><span class=s2>apiVersion: v1
</span></span></span><span class=line><span class=cl><span class=s2>kind: Service
</span></span></span><span class=line><span class=cl><span class=s2>metadata:
</span></span></span><span class=line><span class=cl><span class=s2>  name: user-service
</span></span></span><span class=line><span class=cl><span class=s2>spec:
</span></span></span><span class=line><span class=cl><span class=s2>  selector:
</span></span></span><span class=line><span class=cl><span class=s2>    app: user-service
</span></span></span><span class=line><span class=cl><span class=s2>  ports:
</span></span></span><span class=line><span class=cl><span class=s2>  - port: 80
</span></span></span><span class=line><span class=cl><span class=s2>    targetPort: 5000
</span></span></span><span class=line><span class=cl><span class=s2>  type: LoadBalancer
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=제4부-최적화-및-미래-전망><strong>제4부: 최적화 및 미래 전망</strong><a hidden class=anchor aria-hidden=true href=#제4부-최적화-및-미래-전망>#</a></h2><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점><strong>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점</strong><a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>카테고리</th><th>고려사항</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td><strong>설계</strong></td><td><strong>사이드카 기능 범위 정의</strong></td><td>핵심 비즈니스 로직과 부가 기능의 명확한 분리</td><td>단일 책임 원칙 적용, 기능별 사이드카 분리</td></tr><tr><td></td><td><strong>통신 메커니즘 선택</strong></td><td>주 컨테이너와 사이드카 간 통신 방식 결정</td><td>HTTP/gRPC for API, Shared Volume for 파일, IPC for 고성능</td></tr><tr><td><strong>운영</strong></td><td><strong>리소스 할당 전략</strong></td><td>사이드카와 주 컨테이너의 리소스 분배</td><td>7:3 비율 (주앱:사이드카), 동적 리소스 조정 활용</td></tr><tr><td></td><td><strong>모니터링 및 관찰성</strong></td><td>다중 컨테이너 환경 모니터링</td><td>상관관계 ID, 분산 추적, 통합 대시보드 구축</td></tr><tr><td><strong>보안</strong></td><td><strong>컨테이너 간 보안 경계</strong></td><td>동일 Pod 내 컨테이너 간 신뢰 관계 설정</td><td>최소 권한 원칙, Network Policy 적용</td></tr><tr><td></td><td><strong>시크릿 관리</strong></td><td>사이드카를 통한 안전한 시크릿 전달</td><td>Vault 연동, Init Container를 통한 시크릿 주입</td></tr><tr><td><strong>성능</strong></td><td><strong>네트워크 최적화</strong></td><td>사이드카로 인한 네트워크 홉 최소화</td><td>Localhost 통신 우선, Connection Pooling</td></tr><tr><td></td><td><strong>시작 순서 관리</strong></td><td>컨테이너 초기화 순서 보장</td><td>Init Container, Readiness Probe 활용</td></tr></tbody></table><h3 id=최적화하기-위한-고려사항-및-주의할-점><strong>최적화하기 위한 고려사항 및 주의할 점</strong><a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>카테고리</th><th>최적화 항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td><strong>리소스</strong></td><td><strong>메모리 사용량 최적화</strong></td><td>사이드카 메모리 오버헤드 최소화</td><td>경량 베이스 이미지, 메모리 프로파일링, 가비지 컬렉션 튜닝</td></tr><tr><td></td><td><strong>CPU 효율성</strong></td><td>사이드카 CPU 사용량 최적화</td><td>비동기 처리, 배치 작업, CPU 제한 설정</td></tr><tr><td><strong>네트워크</strong></td><td><strong>지연시간 최소화</strong></td><td>사이드카 통신 지연 감소</td><td>Unix Domain Socket, 커널 바이패스, 연결 풀링</td></tr><tr><td></td><td><strong>대역폭 최적화</strong></td><td>네트워크 트래픽 효율화</td><td>압축 알고리즘, 배치 전송, 중복 제거</td></tr><tr><td><strong>확장성</strong></td><td><strong>수평 확장 전략</strong></td><td>사이드카 인스턴스 확장 최적화</td><td>자동 스케일링, 부하 분산, 샤딩 전략</td></tr><tr><td></td><td><strong>수직 확장 관리</strong></td><td>리소스 할당 동적 조정</td><td>VPA(Vertical Pod Autoscaler), 예측적 스케일링</td></tr><tr><td><strong>운영</strong></td><td><strong>배포 최적화</strong></td><td>무중단 배포 및 롤백 전략</td><td>Blue-Green 배포, Canary 릴리스, Circuit Breaker</td></tr><tr><td></td><td><strong>장애 복구</strong></td><td>자동 복구 메커니즘 구축</td><td>헬스체크, 자동 재시작, Failover 전략</td></tr></tbody></table><h3 id=주제와-관련하여-주목할-내용><strong>주제와 관련하여 주목할 내용</strong><a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>신기술</strong></td><td><strong>Service Mesh</strong></td><td>Ambient Mesh</td><td>사이드카 없는 서비스 메시 모드로 리소스 오버헤드 감소</td></tr><tr><td></td><td><strong>Cloud Native</strong></td><td>WebAssembly Sidecar</td><td>경량화된 사이드카 런타임으로 성능 향상</td></tr><tr><td></td><td><strong>AI/ML</strong></td><td>Intelligent Sidecar</td><td>AI 기반 자동 최적화 및 예측적 스케일링</td></tr><tr><td><strong>플랫폼</strong></td><td><strong>Kubernetes</strong></td><td>Native Sidecar</td><td>K8s 1.28부터 공식 사이드카 컨테이너 지원</td></tr><tr><td></td><td><strong>Serverless</strong></td><td>Sidecar in FaaS</td><td>서버리스 환경에서의 사이드카 패턴 적용</td></tr><tr><td><strong>보안</strong></td><td><strong>Zero Trust</strong></td><td>Identity-based Sidecar</td><td>신원 기반 사이드카 보안 모델</td></tr><tr><td></td><td><strong>Compliance</strong></td><td>Policy as Code</td><td>컴플라이언스 정책을 사이드카로 자동 적용</td></tr><tr><td><strong>관찰성</strong></td><td><strong>OpenTelemetry</strong></td><td>Auto-instrumentation</td><td>자동 계측을 통한 관찰성 향상</td></tr><tr><td></td><td><strong>AIOps</strong></td><td>Anomaly Detection</td><td>사이드카를 통한 실시간 이상 탐지</td></tr></tbody></table><h3 id=반드시-학습해야할-내용><strong>반드시 학습해야할 내용</strong><a hidden class=anchor aria-hidden=true href=#반드시-학습해야할-내용>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>컨테이너</strong></td><td><strong>Kubernetes</strong></td><td>Pod 설계 패턴</td><td>다중 컨테이너 Pod 설계 및 운영 방법</td></tr><tr><td></td><td><strong>Docker</strong></td><td>멀티 스테이지 빌드</td><td>경량화된 컨테이너 이미지 생성 기법</td></tr><tr><td><strong>네트워킹</strong></td><td><strong>Service Mesh</strong></td><td>Envoy Proxy</td><td>고성능 L7 프록시 설정 및 최적화</td></tr><tr><td></td><td><strong>CNI</strong></td><td>네트워크 정책</td><td>컨테이너 네트워크 보안 및 격리</td></tr><tr><td><strong>관찰성</strong></td><td><strong>Monitoring</strong></td><td>Prometheus/Grafana</td><td>메트릭 수집 및 시각화 도구 활용</td></tr><tr><td></td><td><strong>Logging</strong></td><td>ELK Stack</td><td>중앙집중식 로깅 시스템 구축</td></tr><tr><td></td><td><strong>Tracing</strong></td><td>Jaeger/Zipkin</td><td>분산 추적 시스템 구현 및 운영</td></tr><tr><td><strong>보안</strong></td><td><strong>mTLS</strong></td><td>인증서 관리</td><td>상호 TLS 인증 자동화</td></tr><tr><td></td><td><strong>RBAC</strong></td><td>권한 관리</td><td>세밀한 접근 제어 정책 설계</td></tr><tr><td><strong>자동화</strong></td><td><strong>GitOps</strong></td><td>ArgoCD/Flux</td><td>선언적 배포 자동화</td></tr><tr><td></td><td><strong>Policy</strong></td><td>OPA/Gatekeeper</td><td>정책 기반 거버넌스 자동화</td></tr></tbody></table><h3 id=netflix-사이드카-적용-전후-비교><strong>Netflix 사이드카 적용 전후 비교</strong><a hidden class=anchor aria-hidden=true href=#netflix-사이드카-적용-전후-비교>#</a></h3><h4 id=사이드카-적용-전><strong>사이드카 적용 전</strong><a hidden class=anchor aria-hidden=true href=#사이드카-적용-전>#</a></h4><ul><li><strong>문제점</strong>: 각 서비스에 중복된 인프라 코드, 언어별 라이브러리 관리 복잡성</li><li><strong>운영 이슈</strong>: 버전 호환성 문제, 보안 패치 어려움, 일관성 없는 로깅/모니터링</li></ul><h4 id=사이드카-적용-후><strong>사이드카 적용 후</strong><a hidden class=anchor aria-hidden=true href=#사이드카-적용-후>#</a></h4><ul><li><strong>개선사항</strong>:<ul><li>인프라 관심사의 중앙집중식 관리</li><li>언어 중립적 솔루션으로 polyglot 아키텍처 지원</li><li>일관된 보안 정책 적용</li><li>표준화된 관찰성 구현</li></ul></li></ul><h4 id=성과-지표><strong>성과 지표</strong><a hidden class=anchor aria-hidden=true href=#성과-지표>#</a></h4><ul><li><strong>개발 생산성</strong>: 30% 향상 (인프라 코드 작성 시간 절약)</li><li><strong>운영 효율성</strong>: 50% 향상 (표준화된 운영 절차)</li><li><strong>보안 강화</strong>: 80% 보안 이슈 감소 (일관된 보안 정책)</li><li><strong>서비스 안정성</strong>: 99.9% 이상 가용성 달성</li></ul><hr><h2 id=용어-정리-2><strong>용어 정리</strong><a hidden class=anchor aria-hidden=true href=#용어-정리-2>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td><strong>패턴</strong></td><td><strong>Sidecar Pattern</strong></td><td>주 애플리케이션과 함께 실행되는 보조 컨테이너를 통해 부가 기능을 제공하는 설계 패턴</td></tr><tr><td></td><td><strong>Ambassador Pattern</strong></td><td>네트워크 통신을 추상화하고 프록시 역할을 수행하는 패턴</td></tr><tr><td></td><td><strong>Adapter Pattern</strong></td><td>서로 다른 인터페이스를 가진 시스템 간 연결을 위한 패턴</td></tr><tr><td><strong>기술</strong></td><td><strong>Service Mesh</strong></td><td>마이크로서비스 간 통신을 관리하는 전용 인프라 계층</td></tr><tr><td></td><td><strong>Envoy Proxy</strong></td><td>고성능 L7 프록시로 서비스 메시의 데이터 플레인 구성 요소</td></tr><tr><td></td><td><strong>mTLS (Mutual TLS)</strong></td><td>클라이언트와 서버 간 상호 인증을 제공하는 보안 프로토콜</td></tr><tr><td><strong>운영</strong></td><td><strong>Circuit Breaker</strong></td><td>장애 전파를 방지하기 위한 자동 차단 메커니즘</td></tr><tr><td></td><td><strong>Blue-Green Deployment</strong></td><td>무중단 배포를 위한 두 개의 동일한 환경을 활용하는 배포 전략</td></tr><tr><td></td><td><strong>Canary Release</strong></td><td>점진적 배포를 통해 위험을 최소화하는 릴리스 전략</td></tr><tr><td><strong>관찰성</strong></td><td><strong>Distributed Tracing</strong></td><td>분산 시스템에서 요청의 전체 경로를 추적하는 기술</td></tr><tr><td></td><td><strong>OpenTelemetry</strong></td><td>관찰성 데이터 수집을 위한 오픈소스 표준 및 도구</td></tr><tr><td></td><td><strong>Golden Signals</strong></td><td>시스템 건강성을 나타내는 핵심 메트릭 (지연시간, 트래픽, 에러, 포화도)</td></tr></tbody></table><hr><h2 id=참고-및-출처-2><strong>참고 및 출처</strong><a hidden class=anchor aria-hidden=true href=#참고-및-출처-2>#</a></h2><ul><li><a href=https://www.geeksforgeeks.org/sidecar-design-pattern-for-microservices/>Sidecar Design Pattern for Microservices - GeeksforGeeks</a></li><li><a href=https://learn.microsoft.com/en-us/azure/architecture/patterns/sidecar>Sidecar pattern - Azure Architecture Center | Microsoft Learn</a></li><li><a href=https://istio.io/latest/docs/ops/deployment/architecture/>Istio Service Mesh Architecture</a></li><li><a href=https://istio.io/latest/blog/2023/native-sidecars/>Kubernetes Native Sidecars in Istio</a></li><li><a href=https://blog.bytebytego.com/p/the-sidecar-pattern-explained-decoupling>The Sidecar Pattern Explained: Decoupling Operational Features</a></li><li><a href=https://microservices.io/patterns/deployment/sidecar.html>Microservices Pattern: Pattern: Sidecar</a></li><li><a href=https://www.baeldung.com/ops/istio-service-mesh>Service Mesh Architecture with Istio | Baeldung on Ops</a></li><li><a href=https://www.groundcover.com/blog/kubernetes-sidecar>Kubernetes Sidecar Containers: Use Cases and Best Practices</a></li></ul><hr><p>Sidecar Pattern은 마치 오토바이의 사이드카처럼, 주 애플리케이션 컨테이너 옆에 보조 컨테이너를 배치하여 추가 기능을 제공한다.<br>이는 주 애플리케이션의 코드를 수정하지 않고도 새로운 기능을 추가할 수 있게 해준다.</p><p>![sidecar pattern that allows you to co-locate additional services within an independent container](Sidecar-768x440.webp &ldquo;<a href=https://www.simform.com/blog/microservice-design-patterns/>https://www.simform.com/blog/microservice-design-patterns/</a>)</p><p>주요 목적은 다음과 같다:</p><ol><li>애플리케이션 로직과 인프라 관심사의 분리</li><li>재사용 가능한 컴포넌트 제공</li><li>기존 애플리케이션의 기능 확장</li><li>다양한 언어와 프레임워크 지원</li></ol><h3 id=핵심-구성-요소>핵심 구성 요소<a hidden class=anchor aria-hidden=true href=#핵심-구성-요소>#</a></h3><ol><li>주 애플리케이션 컨테이너: 핵심 비즈니스 로직을 포함</li><li>Sidecar 컨테이너: 로깅, 모니터링, 보안 등의 부가 기능 제공</li></ol><h3 id=작동-방식>작동 방식<a hidden class=anchor aria-hidden=true href=#작동-방식>#</a></h3><ol><li>주 애플리케이션과 Sidecar는 동일한 호스트에서 실행된다.</li><li>두 컨테이너는 로컬 네트워크 인터페이스나 공유 파일 시스템을 통해 통신한다.</li><li>Sidecar는 주 애플리케이션의 라이프사이클에 연결되어 함께 시작하고 종료된다.</li></ol><h3 id=장점-2>장점<a hidden class=anchor aria-hidden=true href=#장점-2>#</a></h3><ol><li>관심사의 분리: 핵심 비즈니스 로직과 부가 기능을 분리할 수 있다.</li><li>재사용성: Sidecar 컨테이너를 여러 애플리케이션에서 재사용할 수 있다.</li><li>기술 스택 독립성: 주 애플리케이션과 다른 언어로 Sidecar를 구현할 수 있다.</li><li>유지보수 용이성: Sidecar를 독립적으로 업데이트하고 관리할 수 있다.</li></ol><h3 id=사용-사례>사용 사례<a hidden class=anchor aria-hidden=true href=#사용-사례>#</a></h3><ol><li>로깅 및 모니터링</li><li>서비스 메시 구현 (예: Istio)</li><li>보안 및 인증</li><li>설정 관리</li><li>서비스 디스커버리</li></ol><h3 id=구현할-때-고려해야-할-사항들>구현할 때 고려해야 할 사항들<a hidden class=anchor aria-hidden=true href=#구현할-때-고려해야-할-사항들>#</a></h3><ol><li><p>성능 영향</p><ul><li>사이드카로 인한 리소스 사용량 증가</li><li>네트워크 지연 시간 관리</li><li>메모리와 CPU 사용량 모니터링</li></ul></li><li><p>배포와 관리</p><ul><li>컨테이너 오케스트레이션 설정</li><li>버전 관리와 업데이트 전략</li><li>장애 복구 계획</li></ul></li><li><p>통신 방식</p><ul><li>사이드카와 메인 애플리케이션 간의 통신 프로토콜</li><li>네트워크 설정과 포트 관리</li><li>보안 설정</li></ul></li><li><p>모니터링과 디버깅</p><ul><li>사이드카 로그 관리</li><li>성능 메트릭 수집</li><li>문제 해결 도구와 프로세스</li></ul></li></ol><h3 id=구현-예시>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시>#</a></h3><ol><li><p>로깅과 모니터링 사이드카: 애플리케이션의 로그를 수집하고 처리하는 사이드카 예시.<br>Python으로 구현한 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-25-1><a class=lnlinks href=#hl-25-1> 1</a>
</span><span class=lnt id=hl-25-2><a class=lnlinks href=#hl-25-2> 2</a>
</span><span class=lnt id=hl-25-3><a class=lnlinks href=#hl-25-3> 3</a>
</span><span class=lnt id=hl-25-4><a class=lnlinks href=#hl-25-4> 4</a>
</span><span class=lnt id=hl-25-5><a class=lnlinks href=#hl-25-5> 5</a>
</span><span class=lnt id=hl-25-6><a class=lnlinks href=#hl-25-6> 6</a>
</span><span class=lnt id=hl-25-7><a class=lnlinks href=#hl-25-7> 7</a>
</span><span class=lnt id=hl-25-8><a class=lnlinks href=#hl-25-8> 8</a>
</span><span class=lnt id=hl-25-9><a class=lnlinks href=#hl-25-9> 9</a>
</span><span class=lnt id=hl-25-10><a class=lnlinks href=#hl-25-10>10</a>
</span><span class=lnt id=hl-25-11><a class=lnlinks href=#hl-25-11>11</a>
</span><span class=lnt id=hl-25-12><a class=lnlinks href=#hl-25-12>12</a>
</span><span class=lnt id=hl-25-13><a class=lnlinks href=#hl-25-13>13</a>
</span><span class=lnt id=hl-25-14><a class=lnlinks href=#hl-25-14>14</a>
</span><span class=lnt id=hl-25-15><a class=lnlinks href=#hl-25-15>15</a>
</span><span class=lnt id=hl-25-16><a class=lnlinks href=#hl-25-16>16</a>
</span><span class=lnt id=hl-25-17><a class=lnlinks href=#hl-25-17>17</a>
</span><span class=lnt id=hl-25-18><a class=lnlinks href=#hl-25-18>18</a>
</span><span class=lnt id=hl-25-19><a class=lnlinks href=#hl-25-19>19</a>
</span><span class=lnt id=hl-25-20><a class=lnlinks href=#hl-25-20>20</a>
</span><span class=lnt id=hl-25-21><a class=lnlinks href=#hl-25-21>21</a>
</span><span class=lnt id=hl-25-22><a class=lnlinks href=#hl-25-22>22</a>
</span><span class=lnt id=hl-25-23><a class=lnlinks href=#hl-25-23>23</a>
</span><span class=lnt id=hl-25-24><a class=lnlinks href=#hl-25-24>24</a>
</span><span class=lnt id=hl-25-25><a class=lnlinks href=#hl-25-25>25</a>
</span><span class=lnt id=hl-25-26><a class=lnlinks href=#hl-25-26>26</a>
</span><span class=lnt id=hl-25-27><a class=lnlinks href=#hl-25-27>27</a>
</span><span class=lnt id=hl-25-28><a class=lnlinks href=#hl-25-28>28</a>
</span><span class=lnt id=hl-25-29><a class=lnlinks href=#hl-25-29>29</a>
</span><span class=lnt id=hl-25-30><a class=lnlinks href=#hl-25-30>30</a>
</span><span class=lnt id=hl-25-31><a class=lnlinks href=#hl-25-31>31</a>
</span><span class=lnt id=hl-25-32><a class=lnlinks href=#hl-25-32>32</a>
</span><span class=lnt id=hl-25-33><a class=lnlinks href=#hl-25-33>33</a>
</span><span class=lnt id=hl-25-34><a class=lnlinks href=#hl-25-34>34</a>
</span><span class=lnt id=hl-25-35><a class=lnlinks href=#hl-25-35>35</a>
</span><span class=lnt id=hl-25-36><a class=lnlinks href=#hl-25-36>36</a>
</span><span class=lnt id=hl-25-37><a class=lnlinks href=#hl-25-37>37</a>
</span><span class=lnt id=hl-25-38><a class=lnlinks href=#hl-25-38>38</a>
</span><span class=lnt id=hl-25-39><a class=lnlinks href=#hl-25-39>39</a>
</span><span class=lnt id=hl-25-40><a class=lnlinks href=#hl-25-40>40</a>
</span><span class=lnt id=hl-25-41><a class=lnlinks href=#hl-25-41>41</a>
</span><span class=lnt id=hl-25-42><a class=lnlinks href=#hl-25-42>42</a>
</span><span class=lnt id=hl-25-43><a class=lnlinks href=#hl-25-43>43</a>
</span><span class=lnt id=hl-25-44><a class=lnlinks href=#hl-25-44>44</a>
</span><span class=lnt id=hl-25-45><a class=lnlinks href=#hl-25-45>45</a>
</span><span class=lnt id=hl-25-46><a class=lnlinks href=#hl-25-46>46</a>
</span><span class=lnt id=hl-25-47><a class=lnlinks href=#hl-25-47>47</a>
</span><span class=lnt id=hl-25-48><a class=lnlinks href=#hl-25-48>48</a>
</span><span class=lnt id=hl-25-49><a class=lnlinks href=#hl-25-49>49</a>
</span><span class=lnt id=hl-25-50><a class=lnlinks href=#hl-25-50>50</a>
</span><span class=lnt id=hl-25-51><a class=lnlinks href=#hl-25-51>51</a>
</span><span class=lnt id=hl-25-52><a class=lnlinks href=#hl-25-52>52</a>
</span><span class=lnt id=hl-25-53><a class=lnlinks href=#hl-25-53>53</a>
</span><span class=lnt id=hl-25-54><a class=lnlinks href=#hl-25-54>54</a>
</span><span class=lnt id=hl-25-55><a class=lnlinks href=#hl-25-55>55</a>
</span><span class=lnt id=hl-25-56><a class=lnlinks href=#hl-25-56>56</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>aiohttp</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>LoggingSidecar</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>app_container_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>log_server_url</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>app_container_name</span> <span class=o>=</span> <span class=n>app_container_name</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>log_server_url</span> <span class=o>=</span> <span class=n>log_server_url</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>log_buffer</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>buffer_size</span> <span class=o>=</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>collect_logs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;컨테이너의 로그를 수집하고 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1># 애플리케이션 컨테이너의 로그 파일 읽기</span>
</span></span><span class=line><span class=cl>                <span class=k>async</span> <span class=k>with</span> <span class=n>aiofiles</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;/var/log/</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>app_container_name</span><span class=si>}</span><span class=s1>.log&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>log_file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>async</span> <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>log_file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=n>log_entry</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>process_log_line</span><span class=p>(</span><span class=n>line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>buffer_log</span><span class=p>(</span><span class=n>log_entry</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Error collecting logs: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>buffer_log</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>log_entry</span><span class=p>:</span> <span class=nb>dict</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;로그 엔트리를 버퍼에 추가하고 필요시 플러시&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>log_buffer</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>log_entry</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>log_buffer</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=bp>self</span><span class=o>.</span><span class=n>buffer_size</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>flush_logs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>flush_logs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;버퍼된 로그를 중앙 로그 서버로 전송&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>log_buffer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>async</span> <span class=k>with</span> <span class=n>aiohttp</span><span class=o>.</span><span class=n>ClientSession</span><span class=p>()</span> <span class=k>as</span> <span class=n>session</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>await</span> <span class=n>session</span><span class=o>.</span><span class=n>post</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>log_server_url</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>json</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;logs&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>log_buffer</span><span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>log_buffer</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Error flushing logs: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_log_line</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>line</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;로그 라인을 구조화된 형식으로 변환&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>utcnow</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;container&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>app_container_name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;message&#39;</span><span class=p>:</span> <span class=n>line</span><span class=o>.</span><span class=n>strip</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;level&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>detect_log_level</span><span class=p>(</span><span class=n>line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>보안 프록시 사이드카: 애플리케이션의 보안을 관리하는 사이드카.<br>JavaScript로 구현한 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1> 1</a>
</span><span class=lnt id=hl-26-2><a class=lnlinks href=#hl-26-2> 2</a>
</span><span class=lnt id=hl-26-3><a class=lnlinks href=#hl-26-3> 3</a>
</span><span class=lnt id=hl-26-4><a class=lnlinks href=#hl-26-4> 4</a>
</span><span class=lnt id=hl-26-5><a class=lnlinks href=#hl-26-5> 5</a>
</span><span class=lnt id=hl-26-6><a class=lnlinks href=#hl-26-6> 6</a>
</span><span class=lnt id=hl-26-7><a class=lnlinks href=#hl-26-7> 7</a>
</span><span class=lnt id=hl-26-8><a class=lnlinks href=#hl-26-8> 8</a>
</span><span class=lnt id=hl-26-9><a class=lnlinks href=#hl-26-9> 9</a>
</span><span class=lnt id=hl-26-10><a class=lnlinks href=#hl-26-10>10</a>
</span><span class=lnt id=hl-26-11><a class=lnlinks href=#hl-26-11>11</a>
</span><span class=lnt id=hl-26-12><a class=lnlinks href=#hl-26-12>12</a>
</span><span class=lnt id=hl-26-13><a class=lnlinks href=#hl-26-13>13</a>
</span><span class=lnt id=hl-26-14><a class=lnlinks href=#hl-26-14>14</a>
</span><span class=lnt id=hl-26-15><a class=lnlinks href=#hl-26-15>15</a>
</span><span class=lnt id=hl-26-16><a class=lnlinks href=#hl-26-16>16</a>
</span><span class=lnt id=hl-26-17><a class=lnlinks href=#hl-26-17>17</a>
</span><span class=lnt id=hl-26-18><a class=lnlinks href=#hl-26-18>18</a>
</span><span class=lnt id=hl-26-19><a class=lnlinks href=#hl-26-19>19</a>
</span><span class=lnt id=hl-26-20><a class=lnlinks href=#hl-26-20>20</a>
</span><span class=lnt id=hl-26-21><a class=lnlinks href=#hl-26-21>21</a>
</span><span class=lnt id=hl-26-22><a class=lnlinks href=#hl-26-22>22</a>
</span><span class=lnt id=hl-26-23><a class=lnlinks href=#hl-26-23>23</a>
</span><span class=lnt id=hl-26-24><a class=lnlinks href=#hl-26-24>24</a>
</span><span class=lnt id=hl-26-25><a class=lnlinks href=#hl-26-25>25</a>
</span><span class=lnt id=hl-26-26><a class=lnlinks href=#hl-26-26>26</a>
</span><span class=lnt id=hl-26-27><a class=lnlinks href=#hl-26-27>27</a>
</span><span class=lnt id=hl-26-28><a class=lnlinks href=#hl-26-28>28</a>
</span><span class=lnt id=hl-26-29><a class=lnlinks href=#hl-26-29>29</a>
</span><span class=lnt id=hl-26-30><a class=lnlinks href=#hl-26-30>30</a>
</span><span class=lnt id=hl-26-31><a class=lnlinks href=#hl-26-31>31</a>
</span><span class=lnt id=hl-26-32><a class=lnlinks href=#hl-26-32>32</a>
</span><span class=lnt id=hl-26-33><a class=lnlinks href=#hl-26-33>33</a>
</span><span class=lnt id=hl-26-34><a class=lnlinks href=#hl-26-34>34</a>
</span><span class=lnt id=hl-26-35><a class=lnlinks href=#hl-26-35>35</a>
</span><span class=lnt id=hl-26-36><a class=lnlinks href=#hl-26-36>36</a>
</span><span class=lnt id=hl-26-37><a class=lnlinks href=#hl-26-37>37</a>
</span><span class=lnt id=hl-26-38><a class=lnlinks href=#hl-26-38>38</a>
</span><span class=lnt id=hl-26-39><a class=lnlinks href=#hl-26-39>39</a>
</span><span class=lnt id=hl-26-40><a class=lnlinks href=#hl-26-40>40</a>
</span><span class=lnt id=hl-26-41><a class=lnlinks href=#hl-26-41>41</a>
</span><span class=lnt id=hl-26-42><a class=lnlinks href=#hl-26-42>42</a>
</span><span class=lnt id=hl-26-43><a class=lnlinks href=#hl-26-43>43</a>
</span><span class=lnt id=hl-26-44><a class=lnlinks href=#hl-26-44>44</a>
</span><span class=lnt id=hl-26-45><a class=lnlinks href=#hl-26-45>45</a>
</span><span class=lnt id=hl-26-46><a class=lnlinks href=#hl-26-46>46</a>
</span><span class=lnt id=hl-26-47><a class=lnlinks href=#hl-26-47>47</a>
</span><span class=lnt id=hl-26-48><a class=lnlinks href=#hl-26-48>48</a>
</span><span class=lnt id=hl-26-49><a class=lnlinks href=#hl-26-49>49</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>SecuritySidecar</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>appPort</span><span class=p>,</span> <span class=nx>proxyPort</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>appPort</span> <span class=o>=</span> <span class=nx>appPort</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>proxyPort</span> <span class=o>=</span> <span class=nx>proxyPort</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>tokenValidator</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>TokenValidator</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>start</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=kr>async</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 인증 토큰 검증
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>validateRequest</span><span class=p>(</span><span class=nx>req</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=c1>// 요청을 메인 애플리케이션으로 프록시
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>proxyRequest</span><span class=p>(</span><span class=nx>req</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=c1>// 응답 암호화 (필요한 경우)
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>const</span> <span class=nx>encryptedResponse</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>encryptResponse</span><span class=p>(</span><span class=nx>response</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>status</span><span class=p>).</span><span class=nx>send</span><span class=p>(</span><span class=nx>encryptedResponse</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>401</span><span class=p>).</span><span class=nx>send</span><span class=p>(</span><span class=s1>&#39;Unauthorized&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>proxyPort</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>validateRequest</span><span class=p>(</span><span class=nx>req</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>headers</span><span class=p>[</span><span class=s1>&#39;authorization&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>token</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;No token provided&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>tokenValidator</span><span class=p>.</span><span class=nx>validate</span><span class=p>(</span><span class=nx>token</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>proxyRequest</span><span class=p>(</span><span class=nx>req</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 메인 애플리케이션으로 요청 전달
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>method</span><span class=o>:</span> <span class=nx>req</span><span class=p>.</span><span class=nx>method</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>url</span><span class=o>:</span> <span class=sb>`http://localhost:</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>appPort</span><span class=si>}${</span><span class=nx>req</span><span class=p>.</span><span class=nx>path</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>data</span><span class=o>:</span> <span class=nx>req</span><span class=p>.</span><span class=nx>body</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>headers</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>filterHeaders</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>설정 관리 사이드카: 애플리케이션의 설정을 동적으로 관리하는 사이드카.<br>Python 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-27-1><a class=lnlinks href=#hl-27-1> 1</a>
</span><span class=lnt id=hl-27-2><a class=lnlinks href=#hl-27-2> 2</a>
</span><span class=lnt id=hl-27-3><a class=lnlinks href=#hl-27-3> 3</a>
</span><span class=lnt id=hl-27-4><a class=lnlinks href=#hl-27-4> 4</a>
</span><span class=lnt id=hl-27-5><a class=lnlinks href=#hl-27-5> 5</a>
</span><span class=lnt id=hl-27-6><a class=lnlinks href=#hl-27-6> 6</a>
</span><span class=lnt id=hl-27-7><a class=lnlinks href=#hl-27-7> 7</a>
</span><span class=lnt id=hl-27-8><a class=lnlinks href=#hl-27-8> 8</a>
</span><span class=lnt id=hl-27-9><a class=lnlinks href=#hl-27-9> 9</a>
</span><span class=lnt id=hl-27-10><a class=lnlinks href=#hl-27-10>10</a>
</span><span class=lnt id=hl-27-11><a class=lnlinks href=#hl-27-11>11</a>
</span><span class=lnt id=hl-27-12><a class=lnlinks href=#hl-27-12>12</a>
</span><span class=lnt id=hl-27-13><a class=lnlinks href=#hl-27-13>13</a>
</span><span class=lnt id=hl-27-14><a class=lnlinks href=#hl-27-14>14</a>
</span><span class=lnt id=hl-27-15><a class=lnlinks href=#hl-27-15>15</a>
</span><span class=lnt id=hl-27-16><a class=lnlinks href=#hl-27-16>16</a>
</span><span class=lnt id=hl-27-17><a class=lnlinks href=#hl-27-17>17</a>
</span><span class=lnt id=hl-27-18><a class=lnlinks href=#hl-27-18>18</a>
</span><span class=lnt id=hl-27-19><a class=lnlinks href=#hl-27-19>19</a>
</span><span class=lnt id=hl-27-20><a class=lnlinks href=#hl-27-20>20</a>
</span><span class=lnt id=hl-27-21><a class=lnlinks href=#hl-27-21>21</a>
</span><span class=lnt id=hl-27-22><a class=lnlinks href=#hl-27-22>22</a>
</span><span class=lnt id=hl-27-23><a class=lnlinks href=#hl-27-23>23</a>
</span><span class=lnt id=hl-27-24><a class=lnlinks href=#hl-27-24>24</a>
</span><span class=lnt id=hl-27-25><a class=lnlinks href=#hl-27-25>25</a>
</span><span class=lnt id=hl-27-26><a class=lnlinks href=#hl-27-26>26</a>
</span><span class=lnt id=hl-27-27><a class=lnlinks href=#hl-27-27>27</a>
</span><span class=lnt id=hl-27-28><a class=lnlinks href=#hl-27-28>28</a>
</span><span class=lnt id=hl-27-29><a class=lnlinks href=#hl-27-29>29</a>
</span><span class=lnt id=hl-27-30><a class=lnlinks href=#hl-27-30>30</a>
</span><span class=lnt id=hl-27-31><a class=lnlinks href=#hl-27-31>31</a>
</span><span class=lnt id=hl-27-32><a class=lnlinks href=#hl-27-32>32</a>
</span><span class=lnt id=hl-27-33><a class=lnlinks href=#hl-27-33>33</a>
</span><span class=lnt id=hl-27-34><a class=lnlinks href=#hl-27-34>34</a>
</span><span class=lnt id=hl-27-35><a class=lnlinks href=#hl-27-35>35</a>
</span><span class=lnt id=hl-27-36><a class=lnlinks href=#hl-27-36>36</a>
</span><span class=lnt id=hl-27-37><a class=lnlinks href=#hl-27-37>37</a>
</span><span class=lnt id=hl-27-38><a class=lnlinks href=#hl-27-38>38</a>
</span><span class=lnt id=hl-27-39><a class=lnlinks href=#hl-27-39>39</a>
</span><span class=lnt id=hl-27-40><a class=lnlinks href=#hl-27-40>40</a>
</span><span class=lnt id=hl-27-41><a class=lnlinks href=#hl-27-41>41</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>ConfigurationSidecar</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>config_server_url</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>app_container_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>config_server_url</span> <span class=o>=</span> <span class=n>config_server_url</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>app_container_name</span> <span class=o>=</span> <span class=n>app_container_name</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>current_config</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>config_version</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>watch_configuration</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;설정 변경을 감시하고 업데이트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>async</span> <span class=k>with</span> <span class=n>aiohttp</span><span class=o>.</span><span class=n>ClientSession</span><span class=p>()</span> <span class=k>as</span> <span class=n>session</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>async</span> <span class=k>with</span> <span class=n>session</span><span class=o>.</span><span class=n>get</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                        <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>config_server_url</span><span class=si>}</span><span class=s2>/config/</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>app_container_name</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>                    <span class=p>)</span> <span class=k>as</span> <span class=n>response</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=n>new_config</span> <span class=o>=</span> <span class=k>await</span> <span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>has_config_changed</span><span class=p>(</span><span class=n>new_config</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>update_application_config</span><span class=p>(</span><span class=n>new_config</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>30</span><span class=p>)</span>  <span class=c1># 30초마다 체크</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Error watching configuration: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>update_application_config</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>new_config</span><span class=p>:</span> <span class=nb>dict</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;새로운 설정을 애플리케이션에 적용&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 설정 파일 업데이트</span>
</span></span><span class=line><span class=cl>            <span class=k>async</span> <span class=k>with</span> <span class=n>aiofiles</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=s1>&#39;/config/app.config&#39;</span><span class=p>,</span> <span class=s1>&#39;w&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>await</span> <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>new_config</span><span class=p>,</span> <span class=n>indent</span><span class=o>=</span><span class=mi>2</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1># 애플리케이션에 설정 리로드 시그널 전송</span>
</span></span><span class=line><span class=cl>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>signal_application</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>current_config</span> <span class=o>=</span> <span class=n>new_config</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Configuration updated successfully&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Error updating configuration: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><hr><h2 id=참고-및-출처-3>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-3>#</a></h2></div></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>