<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Messaging | hyunyoun's Blog</title>
<meta name=keywords content="Software-Design-and-Architecture,MSA-Patterns,Communication-style"><meta name=description content="Messaging
마이크로서비스 아키텍처(MSA)에서 Messaging은 중요한 Communication style 중 하나이다.
Messaging은 서비스 간 비동기 통신을 가능하게 하며, 시스템의 확장성과 유연성을 향상시킨다.
Messaging은 서비스들이 메시지를 통해 비동기적으로 통신하는 방식이다. 서비스들은 메시지 브로커를 통해 메시지를 주고받으며, 이를 통해 느슨한 결합(loose coupling)을 실현한다.
주요 특징

비동기 통신: 서비스는 메시지를 보내고 즉시 다른 작업을 수행할 수 있다.
느슨한 결합: 서비스들은 직접적인 연결 없이 메시지를 통해 통신한다.
메시지 구조: 메시지는 일반적으로 헤더(header)와 바디(message body)로 구성된다.
채널 기반 통신: 메시지는 채널을 통해 전달된다. point-to-point 채널과 publish-subscribe 채널이 있다.

Messaging 패턴

Request/Response: 서비스가 요청 메시지를 보내고 응답을 기다린다.
Notifications: 서비스가 메시지를 보내지만 응답을 기대하지 않는다.
Publish/Subscribe: 서비스가 메시지를 발행하면 여러 수신자가 구독할 수 있다.
Event-Driven: 서비스가 이벤트를 발행하고 다른 서비스들이 이에 반응한다.

Messaging 패턴의 주요 구성 요소


메시지 구조:"><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/communication-style/messaging/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.9a2bbe2d8b5afa9d4df22976abb7b72f1f7f1c467d2b30f03090108f9496ae6c.css integrity="sha256-miu+LYta+p1N8il2q7e3Lx9/HEZ9KzDwMJAQj5SWrmw=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/communication-style/messaging/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/communication-style/messaging/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Messaging"><meta property="og:description" content="Messaging 마이크로서비스 아키텍처(MSA)에서 Messaging은 중요한 Communication style 중 하나이다.
Messaging은 서비스 간 비동기 통신을 가능하게 하며, 시스템의 확장성과 유연성을 향상시킨다.
Messaging은 서비스들이 메시지를 통해 비동기적으로 통신하는 방식이다. 서비스들은 메시지 브로커를 통해 메시지를 주고받으며, 이를 통해 느슨한 결합(loose coupling)을 실현한다.
주요 특징 비동기 통신: 서비스는 메시지를 보내고 즉시 다른 작업을 수행할 수 있다. 느슨한 결합: 서비스들은 직접적인 연결 없이 메시지를 통해 통신한다. 메시지 구조: 메시지는 일반적으로 헤더(header)와 바디(message body)로 구성된다. 채널 기반 통신: 메시지는 채널을 통해 전달된다. point-to-point 채널과 publish-subscribe 채널이 있다. Messaging 패턴 Request/Response: 서비스가 요청 메시지를 보내고 응답을 기다린다. Notifications: 서비스가 메시지를 보내지만 응답을 기대하지 않는다. Publish/Subscribe: 서비스가 메시지를 발행하면 여러 수신자가 구독할 수 있다. Event-Driven: 서비스가 이벤트를 발행하고 다른 서비스들이 이에 반응한다. Messaging 패턴의 주요 구성 요소 메시지 구조:"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-30T11:21:00+00:00"><meta property="article:modified_time" content="2024-09-30T11:21:00+00:00"><meta property="article:tag" content="Software-Design-and-Architecture"><meta property="article:tag" content="MSA-Patterns"><meta property="article:tag" content="Communication-Style"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Messaging"><meta name=twitter:description content="Messaging
마이크로서비스 아키텍처(MSA)에서 Messaging은 중요한 Communication style 중 하나이다.
Messaging은 서비스 간 비동기 통신을 가능하게 하며, 시스템의 확장성과 유연성을 향상시킨다.
Messaging은 서비스들이 메시지를 통해 비동기적으로 통신하는 방식이다. 서비스들은 메시지 브로커를 통해 메시지를 주고받으며, 이를 통해 느슨한 결합(loose coupling)을 실현한다.
주요 특징

비동기 통신: 서비스는 메시지를 보내고 즉시 다른 작업을 수행할 수 있다.
느슨한 결합: 서비스들은 직접적인 연결 없이 메시지를 통해 통신한다.
메시지 구조: 메시지는 일반적으로 헤더(header)와 바디(message body)로 구성된다.
채널 기반 통신: 메시지는 채널을 통해 전달된다. point-to-point 채널과 publish-subscribe 채널이 있다.

Messaging 패턴

Request/Response: 서비스가 요청 메시지를 보내고 응답을 기다린다.
Notifications: 서비스가 메시지를 보내지만 응답을 기대하지 않는다.
Publish/Subscribe: 서비스가 메시지를 발행하면 여러 수신자가 구독할 수 있다.
Event-Driven: 서비스가 이벤트를 발행하고 다른 서비스들이 이에 반응한다.

Messaging 패턴의 주요 구성 요소


메시지 구조:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"posts","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Software Design and Architecture","item":"https://buenhyden.github.io/posts/software-design-and-architecture/"},{"@type":"ListItem","position":3,"name":"MSA Pattern","item":"https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/"},{"@type":"ListItem","position":4,"name":"Communication style","item":"https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/communication-style/"},{"@type":"ListItem","position":5,"name":"Messaging","item":"https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/communication-style/messaging/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Messaging","name":"Messaging","description":"Messaging 마이크로서비스 아키텍처(MSA)에서 Messaging은 중요한 Communication style 중 하나이다.\nMessaging은 서비스 간 비동기 통신을 가능하게 하며, 시스템의 확장성과 유연성을 향상시킨다.\nMessaging은 서비스들이 메시지를 통해 비동기적으로 통신하는 방식이다. 서비스들은 메시지 브로커를 통해 메시지를 주고받으며, 이를 통해 느슨한 결합(loose coupling)을 실현한다.\n주요 특징 비동기 통신: 서비스는 메시지를 보내고 즉시 다른 작업을 수행할 수 있다. 느슨한 결합: 서비스들은 직접적인 연결 없이 메시지를 통해 통신한다. 메시지 구조: 메시지는 일반적으로 헤더(header)와 바디(message body)로 구성된다. 채널 기반 통신: 메시지는 채널을 통해 전달된다. point-to-point 채널과 publish-subscribe 채널이 있다. Messaging 패턴 Request/Response: 서비스가 요청 메시지를 보내고 응답을 기다린다. Notifications: 서비스가 메시지를 보내지만 응답을 기대하지 않는다. Publish/Subscribe: 서비스가 메시지를 발행하면 여러 수신자가 구독할 수 있다. Event-Driven: 서비스가 이벤트를 발행하고 다른 서비스들이 이에 반응한다. Messaging 패턴의 주요 구성 요소 메시지 구조:\n","keywords":["Software-Design-and-Architecture","MSA-Patterns","Communication-style"],"articleBody":"Messaging 마이크로서비스 아키텍처(MSA)에서 Messaging은 중요한 Communication style 중 하나이다.\nMessaging은 서비스 간 비동기 통신을 가능하게 하며, 시스템의 확장성과 유연성을 향상시킨다.\nMessaging은 서비스들이 메시지를 통해 비동기적으로 통신하는 방식이다. 서비스들은 메시지 브로커를 통해 메시지를 주고받으며, 이를 통해 느슨한 결합(loose coupling)을 실현한다.\n주요 특징 비동기 통신: 서비스는 메시지를 보내고 즉시 다른 작업을 수행할 수 있다. 느슨한 결합: 서비스들은 직접적인 연결 없이 메시지를 통해 통신한다. 메시지 구조: 메시지는 일반적으로 헤더(header)와 바디(message body)로 구성된다. 채널 기반 통신: 메시지는 채널을 통해 전달된다. point-to-point 채널과 publish-subscribe 채널이 있다. Messaging 패턴 Request/Response: 서비스가 요청 메시지를 보내고 응답을 기다린다. Notifications: 서비스가 메시지를 보내지만 응답을 기대하지 않는다. Publish/Subscribe: 서비스가 메시지를 발행하면 여러 수신자가 구독할 수 있다. Event-Driven: 서비스가 이벤트를 발행하고 다른 서비스들이 이에 반응한다. Messaging 패턴의 주요 구성 요소 메시지 구조:\n메시지 헤더 (메타데이터) 메시지 본문 (실제 데이터) 상관관계 ID (메시지 추적용) 타임스탬프 메시지 유형 메시지 처리:\n메시지 직렬화/역직렬화 메시지 라우팅 오류 처리 재시도 메커니즘 Dead Letter Queue 처리 메시지 패턴:\n발행/구독 (Pub/Sub) 요청/응답 이벤트 기반 명령 기반 문서 기반 사용되는 기술 메시지 브로커: RabbitMQ, Apache Kafka, Apache ActiveMQ, NSQ 프로토콜: AMQP, STOMP 클라우드 서비스: Amazon SQS, Azure Service Bus 장점 확장성: 서비스 간 느슨한 결합으로 시스템 확장이 용이하다. 가용성: 메시지 브로커가 메시지를 버퍼링하여 일시적인 서비스 중단을 처리할 수 있다. 유연성: 다양한 통신 패턴을 지원한다. 단점 복잡성: 메시지 브로커 관리와 메시지 형식 정의 등 추가적인 복잡성이 발생한다. 일관성: 비동기 통신으로 인해 데이터 일관성 관리가 어려울 수 있다. 고려사항 메시지 순서 보장: 메시지의 순서가 중요한 경우, 이를 보장하기 위한 추가적인 설계가 필요하다. 중복 메시지 처리: 네트워크 문제 등으로 인해 중복된 메시지가 전달될 수 있으므로, 이를 처리하기 위한 로직이 필요하다. 운영 복잡성: 메시지 브로커의 설치, 구성, 모니터링 등 추가적인 운영 작업이 필요하다. 구현 예시 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 // 메시지 발행자(Publisher) 구현 @Service public class OrderEventPublisher { private final KafkaTemplate\u003cString, OrderEvent\u003e kafkaTemplate; public void publishOrderCreated(Order order) { // 도메인 이벤트를 메시지로 변환 OrderCreatedEvent event = OrderCreatedEvent.builder() .orderId(order.getId()) .customerId(order.getCustomerId()) .orderItems(order.getItems()) .timestamp(LocalDateTime.now()) .build(); // 메시지 발행 kafkaTemplate.send(\"order-events\", event) .addCallback( result -\u003e log.info(\"Message sent successfully\"), ex -\u003e log.error(\"Failed to send message\", ex) ); } } // 메시지 구독자(Subscriber) 구현 @Service public class OrderEventHandler { private final ShipmentService shipmentService; @KafkaListener(topics = \"order-events\") public void handleOrderCreated(OrderCreatedEvent event) { try { // 메시지 처리 Shipment shipment = Shipment.builder() .orderId(event.getOrderId()) .deliveryAddress(event.getDeliveryAddress()) .build(); shipmentService.initiateShipment(shipment); } catch (Exception e) { // 오류 처리 및 재시도 로직 handleProcessingError(event, e); } } } 참고 및 출처 ","wordCount":"423","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2024-09-30T11:21:00Z","dateModified":"2024-09-30T11:21:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/communication-style/messaging/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>posts</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-design-and-architecture/>Software Design and Architecture</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/>MSA Pattern</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/communication-style/>Communication style</a></div><h1 class="post-title entry-hint-parent">Messaging</h1><div class=post-meta><span title='2024-09-30 11:21:00 +0000 UTC'>September 30, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;423 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Software%20Design%20and%20Architecture/MSA%20Patterns/Communication%20style/Messaging.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#messaging>Messaging</a><ul><li><a href=#주요-특징>주요 특징</a></li><li><a href=#messaging-패턴>Messaging 패턴</a></li><li><a href=#사용되는-기술>사용되는 기술</a></li><li><a href=#장점>장점</a></li><li><a href=#단점>단점</a></li><li><a href=#고려사항>고려사항</a></li><li><a href=#구현-예시>구현 예시</a></li></ul></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=messaging>Messaging<a hidden class=anchor aria-hidden=true href=#messaging>#</a></h2><p>마이크로서비스 아키텍처(MSA)에서 Messaging은 중요한 Communication style 중 하나이다.<br>Messaging은 서비스 간 비동기 통신을 가능하게 하며, 시스템의 확장성과 유연성을 향상시킨다.</p><p>Messaging은 서비스들이 메시지를 통해 비동기적으로 통신하는 방식이다. 서비스들은 메시지 브로커를 통해 메시지를 주고받으며, 이를 통해 느슨한 결합(loose coupling)을 실현한다.</p><h3 id=주요-특징>주요 특징<a hidden class=anchor aria-hidden=true href=#주요-특징>#</a></h3><ol><li><strong>비동기 통신</strong>: 서비스는 메시지를 보내고 즉시 다른 작업을 수행할 수 있다.</li><li><strong>느슨한 결합</strong>: 서비스들은 직접적인 연결 없이 메시지를 통해 통신한다.</li><li><strong>메시지 구조</strong>: 메시지는 일반적으로 헤더(header)와 바디(message body)로 구성된다.</li><li><strong>채널 기반 통신</strong>: 메시지는 채널을 통해 전달된다. point-to-point 채널과 publish-subscribe 채널이 있다.</li></ol><h3 id=messaging-패턴>Messaging 패턴<a hidden class=anchor aria-hidden=true href=#messaging-패턴>#</a></h3><ol><li><strong>Request/Response</strong>: 서비스가 요청 메시지를 보내고 응답을 기다린다.</li><li><strong>Notifications</strong>: 서비스가 메시지를 보내지만 응답을 기대하지 않는다.</li><li><strong>Publish/Subscribe</strong>: 서비스가 메시지를 발행하면 여러 수신자가 구독할 수 있다.</li><li><strong>Event-Driven</strong>: 서비스가 이벤트를 발행하고 다른 서비스들이 이에 반응한다.</li></ol><h4 id=messaging-패턴의-주요-구성-요소>Messaging 패턴의 주요 구성 요소<a hidden class=anchor aria-hidden=true href=#messaging-패턴의-주요-구성-요소>#</a></h4><ol><li><p>메시지 구조:</p><ul><li>메시지 헤더 (메타데이터)</li><li>메시지 본문 (실제 데이터)</li><li>상관관계 ID (메시지 추적용)</li><li>타임스탬프</li><li>메시지 유형</li></ul></li><li><p>메시지 처리:</p><ul><li>메시지 직렬화/역직렬화</li><li>메시지 라우팅</li><li>오류 처리</li><li>재시도 메커니즘</li><li>Dead Letter Queue 처리</li></ul></li><li><p>메시지 패턴:</p><ul><li>발행/구독 (Pub/Sub)</li><li>요청/응답</li><li>이벤트 기반</li><li>명령 기반</li><li>문서 기반</li></ul></li></ol><h3 id=사용되는-기술>사용되는 기술<a hidden class=anchor aria-hidden=true href=#사용되는-기술>#</a></h3><ul><li><strong>메시지 브로커</strong>: RabbitMQ, Apache Kafka, Apache ActiveMQ, NSQ</li><li><strong>프로토콜</strong>: AMQP, STOMP</li><li><strong>클라우드 서비스</strong>: Amazon SQS, Azure Service Bus</li></ul><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><ol><li><strong>확장성</strong>: 서비스 간 느슨한 결합으로 시스템 확장이 용이하다.</li><li><strong>가용성</strong>: 메시지 브로커가 메시지를 버퍼링하여 일시적인 서비스 중단을 처리할 수 있다.</li><li><strong>유연성</strong>: 다양한 통신 패턴을 지원한다.</li></ol><h3 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h3><ol><li><strong>복잡성</strong>: 메시지 브로커 관리와 메시지 형식 정의 등 추가적인 복잡성이 발생한다.</li><li><strong>일관성</strong>: 비동기 통신으로 인해 데이터 일관성 관리가 어려울 수 있다.</li></ol><h3 id=고려사항>고려사항<a hidden class=anchor aria-hidden=true href=#고려사항>#</a></h3><ul><li><strong>메시지 순서 보장:</strong> 메시지의 순서가 중요한 경우, 이를 보장하기 위한 추가적인 설계가 필요하다.</li><li><strong>중복 메시지 처리:</strong> 네트워크 문제 등으로 인해 중복된 메시지가 전달될 수 있으므로, 이를 처리하기 위한 로직이 필요하다.</li><li><strong>운영 복잡성:</strong> 메시지 브로커의 설치, 구성, 모니터링 등 추가적인 운영 작업이 필요하다.</li></ul><h3 id=구현-예시>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a>
</span><span class=lnt id=hl-0-21><a class=lnlinks href=#hl-0-21>21</a>
</span><span class=lnt id=hl-0-22><a class=lnlinks href=#hl-0-22>22</a>
</span><span class=lnt id=hl-0-23><a class=lnlinks href=#hl-0-23>23</a>
</span><span class=lnt id=hl-0-24><a class=lnlinks href=#hl-0-24>24</a>
</span><span class=lnt id=hl-0-25><a class=lnlinks href=#hl-0-25>25</a>
</span><span class=lnt id=hl-0-26><a class=lnlinks href=#hl-0-26>26</a>
</span><span class=lnt id=hl-0-27><a class=lnlinks href=#hl-0-27>27</a>
</span><span class=lnt id=hl-0-28><a class=lnlinks href=#hl-0-28>28</a>
</span><span class=lnt id=hl-0-29><a class=lnlinks href=#hl-0-29>29</a>
</span><span class=lnt id=hl-0-30><a class=lnlinks href=#hl-0-30>30</a>
</span><span class=lnt id=hl-0-31><a class=lnlinks href=#hl-0-31>31</a>
</span><span class=lnt id=hl-0-32><a class=lnlinks href=#hl-0-32>32</a>
</span><span class=lnt id=hl-0-33><a class=lnlinks href=#hl-0-33>33</a>
</span><span class=lnt id=hl-0-34><a class=lnlinks href=#hl-0-34>34</a>
</span><span class=lnt id=hl-0-35><a class=lnlinks href=#hl-0-35>35</a>
</span><span class=lnt id=hl-0-36><a class=lnlinks href=#hl-0-36>36</a>
</span><span class=lnt id=hl-0-37><a class=lnlinks href=#hl-0-37>37</a>
</span><span class=lnt id=hl-0-38><a class=lnlinks href=#hl-0-38>38</a>
</span><span class=lnt id=hl-0-39><a class=lnlinks href=#hl-0-39>39</a>
</span><span class=lnt id=hl-0-40><a class=lnlinks href=#hl-0-40>40</a>
</span><span class=lnt id=hl-0-41><a class=lnlinks href=#hl-0-41>41</a>
</span><span class=lnt id=hl-0-42><a class=lnlinks href=#hl-0-42>42</a>
</span><span class=lnt id=hl-0-43><a class=lnlinks href=#hl-0-43>43</a>
</span><span class=lnt id=hl-0-44><a class=lnlinks href=#hl-0-44>44</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 메시지 발행자(Publisher) 구현</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>OrderEventPublisher</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>KafkaTemplate</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>OrderEvent</span><span class=o>&gt;</span><span class=w> </span><span class=n>kafkaTemplate</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>publishOrderCreated</span><span class=p>(</span><span class=n>Order</span><span class=w> </span><span class=n>order</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 도메인 이벤트를 메시지로 변환</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>OrderCreatedEvent</span><span class=w> </span><span class=n>event</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>OrderCreatedEvent</span><span class=p>.</span><span class=na>builder</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>orderId</span><span class=p>(</span><span class=n>order</span><span class=p>.</span><span class=na>getId</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>customerId</span><span class=p>(</span><span class=n>order</span><span class=p>.</span><span class=na>getCustomerId</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>orderItems</span><span class=p>(</span><span class=n>order</span><span class=p>.</span><span class=na>getItems</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>timestamp</span><span class=p>(</span><span class=n>LocalDateTime</span><span class=p>.</span><span class=na>now</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 메시지 발행</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>kafkaTemplate</span><span class=p>.</span><span class=na>send</span><span class=p>(</span><span class=s>&#34;order-events&#34;</span><span class=p>,</span><span class=w> </span><span class=n>event</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>addCallback</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>result</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>log</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=s>&#34;Message sent successfully&#34;</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>ex</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>log</span><span class=p>.</span><span class=na>error</span><span class=p>(</span><span class=s>&#34;Failed to send message&#34;</span><span class=p>,</span><span class=w> </span><span class=n>ex</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 메시지 구독자(Subscriber) 구현</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>OrderEventHandler</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>ShipmentService</span><span class=w> </span><span class=n>shipmentService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@KafkaListener</span><span class=p>(</span><span class=n>topics</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;order-events&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>handleOrderCreated</span><span class=p>(</span><span class=n>OrderCreatedEvent</span><span class=w> </span><span class=n>event</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// 메시지 처리</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Shipment</span><span class=w> </span><span class=n>shipment</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Shipment</span><span class=p>.</span><span class=na>builder</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>orderId</span><span class=p>(</span><span class=n>event</span><span class=p>.</span><span class=na>getOrderId</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>deliveryAddress</span><span class=p>(</span><span class=n>event</span><span class=p>.</span><span class=na>getDeliveryAddress</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>shipmentService</span><span class=p>.</span><span class=na>initiateShipment</span><span class=p>(</span><span class=n>shipment</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>Exception</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// 오류 처리 및 재시도 로직</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>handleProcessingError</span><span class=p>(</span><span class=n>event</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/software-design-and-architecture/>Software-Design-and-Architecture</a></li><li><a href=https://buenhyden.github.io/tags/msa-patterns/>MSA-Patterns</a></li><li><a href=https://buenhyden.github.io/tags/communication-style/>Communication-Style</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/communication-style/remote-procedure/><span class=title>« Prev</span><br><span>Remote-Procedure</span>
</a><a class=next href=https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/cross-cutting-concern/externalized-configuration/><span class=title>Next »</span><br><span>Externalized configuration</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>