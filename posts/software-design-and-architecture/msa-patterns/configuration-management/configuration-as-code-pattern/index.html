<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Configuration-as-Code Pattern | hyunyoun's Blog</title>
<meta name=keywords content="Software-Design-and-Architecture,Software-Architecture,Software-Architecture-Patterns,MSA-Patterns,Configuration-Management-Patterns,Configuration-as-Code-Pattern"><meta name=description content="Configuration-as-Code는 시스템의 구성을 버전 관리가 가능한 소스 코드 형태로 정의하고 관리하는 방식이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/configuration-management/configuration-as-code-pattern/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.9a2bbe2d8b5afa9d4df22976abb7b72f1f7f1c467d2b30f03090108f9496ae6c.css integrity="sha256-miu+LYta+p1N8il2q7e3Lx9/HEZ9KzDwMJAQj5SWrmw=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/configuration-management/configuration-as-code-pattern/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/configuration-management/configuration-as-code-pattern/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Configuration-as-Code Pattern"><meta property="og:description" content="Configuration-as-Code는 시스템의 구성을 버전 관리가 가능한 소스 코드 형태로 정의하고 관리하는 방식이다."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-30T04:00:00+00:00"><meta property="article:modified_time" content="2024-12-30T04:00:00+00:00"><meta property="article:tag" content="Software-Design-and-Architecture"><meta property="article:tag" content="Software-Architecture"><meta property="article:tag" content="Software-Architecture-Patterns"><meta property="article:tag" content="MSA-Patterns"><meta property="article:tag" content="Configuration-Management-Patterns"><meta property="article:tag" content="Configuration-as-Code-Pattern"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Configuration-as-Code Pattern"><meta name=twitter:description content="Configuration-as-Code는 시스템의 구성을 버전 관리가 가능한 소스 코드 형태로 정의하고 관리하는 방식이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"posts","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Software Design and Architecture","item":"https://buenhyden.github.io/posts/software-design-and-architecture/"},{"@type":"ListItem","position":3,"name":"MSA Pattern","item":"https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/"},{"@type":"ListItem","position":4,"name":"Configuration Management Patterns","item":"https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/configuration-management/"},{"@type":"ListItem","position":5,"name":"Configuration-as-Code Pattern","item":"https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/configuration-management/configuration-as-code-pattern/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Configuration-as-Code Pattern","name":"Configuration-as-Code Pattern","description":"Configuration-as-Code는 시스템의 구성을 버전 관리가 가능한 소스 코드 형태로 정의하고 관리하는 방식이다.","keywords":["Software-Design-and-Architecture","Software-Architecture","Software-Architecture-Patterns","MSA-Patterns","Configuration-Management-Patterns","Configuration-as-Code-Pattern"],"articleBody":"Configuration-as-Code Pattern Configuration-as-Code (CaC) 패턴은 마이크로서비스 아키텍처(MSA)에서 구성 관리를 위한 접근 방식이다.\n이 패턴은 애플리케이션과 인프라의 구성을 코드로 관리하는 방법을 제시한다.\nConfiguration-as-Code는 시스템의 구성을 버전 관리가 가능한 소스 코드 형태로 정의하고 관리하는 방식이다.\n이 패턴의 주요 목적은 다음과 같다:\n구성의 일관성과 재현성 보장 버전 관리를 통한 구성 변경 추적 자동화된 배포 및 확장 지원 인적 오류 감소 Configuration-as-Code 패턴은 MSA 환경에서 구성 관리의 복잡성을 해결하고, 시스템의 일관성과 신뢰성을 향상시키는 도구이다.\n이 패턴을 효과적으로 구현함으로써 조직은 더 빠르고 안정적인 소프트웨어 배포 프로세스를 달성할 수 있다.\n핵심 원칙 선언적 정의: 구성을 명령형이 아닌 선언적 방식으로 정의한다. 버전 관리: 구성 파일을 Git과 같은 버전 관리 시스템에서 관리한다. 자동화: 구성 적용 과정을 자동화하여 일관성을 유지한다. 환경 독립성: 다양한 환경에서 동일한 구성 코드를 사용할 수 있도록 한다. 구현 방법 Configuration-as-Code Pattern은 다음과 같은 방식으로 구현된다:\n설정 템플릿화 환경별 변수를 분리하여 관리 템플릿 엔진을 통한 설정 생성 재사용 가능한 설정 모듈 작성 검증 메커니즘 문법 검증 필수 값 확인 의존성 검사 보안 규칙 준수 확인 배포 자동화 CI/CD 파이프라인 통합 자동화된 설정 적용 롤백 메커니즘 구현 장점 반복 가능성: 동일한 구성을 여러 환경에 쉽게 적용할 수 있다. 협업 개선: 코드 리뷰를 통해 구성 변경을 검토할 수 있다. 감사 및 규정 준수: 구성 변경 이력을 쉽게 추적할 수 있다. 빠른 복구: 장애 발생 시 이전 구성으로 신속하게 롤백할 수 있다. 도전 과제와 해결 방안 이 패턴을 구현할 때 마주할 수 있는 도전 과제들과 그 해결 방안을 살펴보자:\n복잡성 관리 모듈화를 통한 설정 구조화 명확한 네이밍 규칙 적용 문서화 자동화 보안 관리 암호화 도구 활용 접근 제어 정책 수립 정기적인 보안 감사 변경 관리 점진적 변경 적용 변경 영향 분석 롤백 계획 수립 사용 사례 클라우드 인프라 구성 컨테이너 오케스트레이션 (예: Kubernetes) CI/CD 파이프라인 구성 애플리케이션 설정 관리 도구와 기술 Jenkins Configuration as Code: Jenkins 자체를 코드로 구성할 수 있게 해준다. Kubernetes ConfigMaps: 컨테이너화된 애플리케이션의 구성을 관리한다. Spring Boot의 @ConfigurationProperties: 애플리케이션 구성을 타입-세이프하게 관리한다. 모범 사례 Configuration-as-Code를 효과적으로 구현하기 위한 모범 사례:\n설정 계층화 설정을 여러 계층으로 나누어 관리한다: 기본 설정: 모든 환경에 공통으로 적용되는 설정 환경별 설정: 각 환경에 특화된 설정 서비스별 설정: 특정 서비스에만 적용되는 설정 보안 관리 민감한 정보를 안전하게 관리한다: 암호화된 시크릿 저장소 사용 접근 권한 관리 키 로테이션 자동화 변경 관리 설정 변경을 체계적으로 관리한다: 코드 리뷰 프로세스 적용 변경 이력 문서화 테스트 자동화 모듈화: 구성을 논리적 단위로 분리하여 관리한다. 테스트 자동화: 구성 변경에 대한 자동화된 테스트를 구현한다. 기본 구현 예시 Terraform을 사용한 인프라 설정 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # 데이터베이스 설정 resource \"aws_db_instance\" \"microservice_db\" { identifier = \"microservice-${var.environment}-db\" engine = \"postgres\" engine_version = \"13.7\" instance_class = \"db.t3.micro\" allocated_storage = 20 # 환경별 설정 적용 name = var.database_name username = var.database_username password = var.database_password # 태그 설정 tags = { Environment = var.environment Service = \"microservice-db\" ManagedBy = \"terraform\" } } Kubernetes 설정 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 # 서비스 설정 apiVersion: v1 kind: ConfigMap metadata: name: service-config namespace: ${environment} data: DATABASE_HOST: \"microservice-${environment}-db.example.com\" CACHE_HOST: \"redis-${environment}.example.com\" LOG_LEVEL: \"info\" --- # 시크릿 설정 apiVersion: v1 kind: Secret metadata: name: service-secrets namespace: ${environment} type: Opaque data: DATABASE_PASSWORD: ${base64_encoded_password} API_KEY: ${base64_encoded_api_key} 애플리케이션 설정 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 # application-config.yml spring: application: name: microservice-example datasource: url: jdbc:postgresql://${DATABASE_HOST}/${DATABASE_NAME} username: ${DATABASE_USER} password: ${DATABASE_PASSWORD} cache: type: redis host: ${CACHE_HOST} port: 6379 management: endpoints: web: exposure: include: health,metrics,prometheus 환경별 변수 정의 1 2 3 4 5 6 7 8 9 10 11 12 { \"development\": { \"database_host\": \"dev-db.example.com\", \"cache_host\": \"dev-cache.example.com\", \"log_level\": \"debug\" }, \"production\": { \"database_host\": \"prod-db.example.com\", \"cache_host\": \"prod-cache.example.com\", \"log_level\": \"info\" } } 검증 스크립트 1 2 3 4 5 6 7 8 9 10 11 12 13 def validate_config(): \"\"\"설정 유효성 검증\"\"\" required_keys = ['database_host', 'cache_host', 'log_level'] for env in ['development', 'production']: config = load_config(env) for key in required_keys: if key not in config: raise ValueError(f\"Missing required key '{key}' in {env} config\") # 값 유효성 검증 if not is_valid_host(config['database_host']): raise ValueError(f\"Invalid database host in {env} config\") CI/CD 파이프라인 통합 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 # GitLab CI/CD 설정 stages: - validate - deploy validate_config: stage: validate script: - python validate_config.py - terraform validate deploy_config: stage: deploy script: - terraform apply -auto-approve - kubectl apply -f k8s/ only: - master 참고 및 출처 ","wordCount":"731","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2024-12-30T04:00:00Z","dateModified":"2024-12-30T04:00:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/configuration-management/configuration-as-code-pattern/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>posts</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-design-and-architecture/>Software Design and Architecture</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/>MSA Pattern</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/configuration-management/>Configuration Management Patterns</a></div><h1 class="post-title entry-hint-parent">Configuration-as-Code Pattern</h1><div class=post-description>Configuration-as-Code는 시스템의 구성을 버전 관리가 가능한 소스 코드 형태로 정의하고 관리하는 방식이다.</div><div class=post-meta><span title='2024-12-30 04:00:00 +0000 UTC'>December 30, 2024</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;731 words&nbsp;·&nbsp;Me</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#configuration-as-code-pattern>Configuration-as-Code Pattern</a><ul><li><a href=#핵심-원칙>핵심 원칙</a></li><li><a href=#구현-방법>구현 방법</a></li><li><a href=#장점>장점</a></li><li><a href=#도전-과제와-해결-방안>도전 과제와 해결 방안</a></li><li><a href=#사용-사례>사용 사례</a></li><li><a href=#도구와-기술>도구와 기술</a></li><li><a href=#모범-사례>모범 사례</a></li><li><a href=#기본-구현-예시>기본 구현 예시</a></li><li><a href=#환경별-변수-정의>환경별 변수 정의</a></li><li><a href=#검증-스크립트>검증 스크립트</a></li><li><a href=#cicd-파이프라인-통합>CI/CD 파이프라인 통합</a></li></ul></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=configuration-as-code-pattern>Configuration-as-Code Pattern<a hidden class=anchor aria-hidden=true href=#configuration-as-code-pattern>#</a></h2><p>Configuration-as-Code (CaC) 패턴은 마이크로서비스 아키텍처(MSA)에서 구성 관리를 위한 접근 방식이다.<br>이 패턴은 애플리케이션과 인프라의 구성을 코드로 관리하는 방법을 제시한다.</p><p>Configuration-as-Code는 시스템의 구성을 버전 관리가 가능한 소스 코드 형태로 정의하고 관리하는 방식이다.</p><p>이 패턴의 주요 목적은 다음과 같다:</p><ol><li>구성의 일관성과 재현성 보장</li><li>버전 관리를 통한 구성 변경 추적</li><li>자동화된 배포 및 확장 지원</li><li>인적 오류 감소</li></ol><p>Configuration-as-Code 패턴은 MSA 환경에서 구성 관리의 복잡성을 해결하고, 시스템의 일관성과 신뢰성을 향상시키는 도구이다.<br>이 패턴을 효과적으로 구현함으로써 조직은 더 빠르고 안정적인 소프트웨어 배포 프로세스를 달성할 수 있다.</p><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><ol><li>선언적 정의: 구성을 명령형이 아닌 선언적 방식으로 정의한다.</li><li>버전 관리: 구성 파일을 Git과 같은 버전 관리 시스템에서 관리한다.</li><li>자동화: 구성 적용 과정을 자동화하여 일관성을 유지한다.</li><li>환경 독립성: 다양한 환경에서 동일한 구성 코드를 사용할 수 있도록 한다.</li></ol><h3 id=구현-방법>구현 방법<a hidden class=anchor aria-hidden=true href=#구현-방법>#</a></h3><p>Configuration-as-Code Pattern은 다음과 같은 방식으로 구현된다:</p><ol><li>설정 템플릿화<ul><li>환경별 변수를 분리하여 관리</li><li>템플릿 엔진을 통한 설정 생성</li><li>재사용 가능한 설정 모듈 작성</li></ul></li><li>검증 메커니즘<ul><li>문법 검증</li><li>필수 값 확인</li><li>의존성 검사</li><li>보안 규칙 준수 확인</li></ul></li><li>배포 자동화<ul><li>CI/CD 파이프라인 통합</li><li>자동화된 설정 적용</li><li>롤백 메커니즘 구현</li></ul></li></ol><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><ol><li>반복 가능성: 동일한 구성을 여러 환경에 쉽게 적용할 수 있다.</li><li>협업 개선: 코드 리뷰를 통해 구성 변경을 검토할 수 있다.</li><li>감사 및 규정 준수: 구성 변경 이력을 쉽게 추적할 수 있다.</li><li>빠른 복구: 장애 발생 시 이전 구성으로 신속하게 롤백할 수 있다.</li></ol><h3 id=도전-과제와-해결-방안>도전 과제와 해결 방안<a hidden class=anchor aria-hidden=true href=#도전-과제와-해결-방안>#</a></h3><p>이 패턴을 구현할 때 마주할 수 있는 도전 과제들과 그 해결 방안을 살펴보자:</p><ol><li>복잡성 관리<ul><li>모듈화를 통한 설정 구조화</li><li>명확한 네이밍 규칙 적용</li><li>문서화 자동화</li></ul></li><li>보안 관리<ul><li>암호화 도구 활용</li><li>접근 제어 정책 수립</li><li>정기적인 보안 감사</li></ul></li><li>변경 관리<ul><li>점진적 변경 적용</li><li>변경 영향 분석</li><li>롤백 계획 수립</li></ul></li></ol><h3 id=사용-사례>사용 사례<a hidden class=anchor aria-hidden=true href=#사용-사례>#</a></h3><ol><li>클라우드 인프라 구성</li><li>컨테이너 오케스트레이션 (예: Kubernetes)</li><li>CI/CD 파이프라인 구성</li><li>애플리케이션 설정 관리</li></ol><h3 id=도구와-기술>도구와 기술<a hidden class=anchor aria-hidden=true href=#도구와-기술>#</a></h3><ol><li>Jenkins Configuration as Code: Jenkins 자체를 코드로 구성할 수 있게 해준다.</li><li>Kubernetes ConfigMaps: 컨테이너화된 애플리케이션의 구성을 관리한다.</li><li>Spring Boot의 @ConfigurationProperties: 애플리케이션 구성을 타입-세이프하게 관리한다.</li></ol><h3 id=모범-사례>모범 사례<a hidden class=anchor aria-hidden=true href=#모범-사례>#</a></h3><p>Configuration-as-Code를 효과적으로 구현하기 위한 모범 사례:</p><ol><li>설정 계층화 설정을 여러 계층으로 나누어 관리한다:<ul><li>기본 설정: 모든 환경에 공통으로 적용되는 설정</li><li>환경별 설정: 각 환경에 특화된 설정</li><li>서비스별 설정: 특정 서비스에만 적용되는 설정</li></ul></li><li>보안 관리 민감한 정보를 안전하게 관리한다:<ul><li>암호화된 시크릿 저장소 사용</li><li>접근 권한 관리</li><li>키 로테이션 자동화</li></ul></li><li>변경 관리 설정 변경을 체계적으로 관리한다:<ul><li>코드 리뷰 프로세스 적용</li><li>변경 이력 문서화</li><li>테스트 자동화</li></ul></li><li>모듈화: 구성을 논리적 단위로 분리하여 관리한다.</li><li>테스트 자동화: 구성 변경에 대한 자동화된 테스트를 구현한다.</li></ol><h3 id=기본-구현-예시>기본 구현 예시<a hidden class=anchor aria-hidden=true href=#기본-구현-예시>#</a></h3><h4 id=terraform을-사용한-인프라-설정>Terraform을 사용한 인프라 설정<a hidden class=anchor aria-hidden=true href=#terraform을-사용한-인프라-설정>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-hcl data-lang=hcl><span class=line><span class=cl><span class=c1># 데이터베이스 설정
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>resource</span> <span class=s2>&#34;aws_db_instance&#34; &#34;microservice_db&#34;</span> {
</span></span><span class=line><span class=cl><span class=n>  identifier</span>        <span class=o>=</span> <span class=s2>&#34;microservice-${var.environment}-db&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  engine</span>            <span class=o>=</span> <span class=s2>&#34;postgres&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  engine_version</span>    <span class=o>=</span> <span class=s2>&#34;13.7&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  instance_class</span>    <span class=o>=</span> <span class=s2>&#34;db.t3.micro&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  allocated_storage</span> <span class=o>=</span> <span class=m>20</span><span class=c1>
</span></span></span><span class=line><span class=cl><span class=c1>  
</span></span></span><span class=line><span class=cl><span class=c1>  # 환경별 설정 적용
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>  name</span>     <span class=o>=</span> <span class=k>var</span><span class=p>.</span><span class=k>database_name</span>
</span></span><span class=line><span class=cl><span class=n>  username</span> <span class=o>=</span> <span class=k>var</span><span class=p>.</span><span class=k>database_username</span>
</span></span><span class=line><span class=cl><span class=n>  password</span> <span class=o>=</span> <span class=k>var</span><span class=p>.</span><span class=k>database_password</span><span class=c1>
</span></span></span><span class=line><span class=cl><span class=c1>
</span></span></span><span class=line><span class=cl><span class=c1>  # 태그 설정
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>  tags</span> <span class=o>=</span> {
</span></span><span class=line><span class=cl><span class=n>    Environment</span> <span class=o>=</span> <span class=k>var</span><span class=p>.</span><span class=k>environment</span>
</span></span><span class=line><span class=cl><span class=n>    Service</span>     <span class=o>=</span> <span class=s2>&#34;microservice-db&#34;</span>
</span></span><span class=line><span class=cl><span class=n>    ManagedBy</span>   <span class=o>=</span> <span class=s2>&#34;terraform&#34;</span>
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><h4 id=kubernetes-설정>Kubernetes 설정<a hidden class=anchor aria-hidden=true href=#kubernetes-설정>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14>14</a>
</span><span class=lnt id=hl-1-15><a class=lnlinks href=#hl-1-15>15</a>
</span><span class=lnt id=hl-1-16><a class=lnlinks href=#hl-1-16>16</a>
</span><span class=lnt id=hl-1-17><a class=lnlinks href=#hl-1-17>17</a>
</span><span class=lnt id=hl-1-18><a class=lnlinks href=#hl-1-18>18</a>
</span><span class=lnt id=hl-1-19><a class=lnlinks href=#hl-1-19>19</a>
</span><span class=lnt id=hl-1-20><a class=lnlinks href=#hl-1-20>20</a>
</span><span class=lnt id=hl-1-21><a class=lnlinks href=#hl-1-21>21</a>
</span><span class=lnt id=hl-1-22><a class=lnlinks href=#hl-1-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># 서비스 설정</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ConfigMap</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>service-config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>${environment}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>DATABASE_HOST</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;microservice-${environment}-db.example.com&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>CACHE_HOST</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;redis-${environment}.example.com&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>LOG_LEVEL</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;info&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># 시크릿 설정</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Secret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>service-secrets</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>${environment}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Opaque</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>DATABASE_PASSWORD</span><span class=p>:</span><span class=w> </span><span class=l>${base64_encoded_password}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>API_KEY</span><span class=p>:</span><span class=w> </span><span class=l>${base64_encoded_api_key}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=애플리케이션-설정>애플리케이션 설정<a hidden class=anchor aria-hidden=true href=#애플리케이션-설정>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># application-config.yml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spring</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>application</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>microservice-example</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>datasource</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>jdbc:postgresql://${DATABASE_HOST}/${DATABASE_NAME}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class=l>${DATABASE_USER}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class=l>${DATABASE_PASSWORD}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>cache</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>redis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=l>${CACHE_HOST}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>6379</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>management</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>endpoints</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>web</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exposure</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>include</span><span class=p>:</span><span class=w> </span><span class=l>health,metrics,prometheus</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=환경별-변수-정의>환경별 변수 정의<a hidden class=anchor aria-hidden=true href=#환경별-변수-정의>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;development&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;database_host&#34;</span><span class=p>:</span> <span class=s2>&#34;dev-db.example.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;cache_host&#34;</span><span class=p>:</span> <span class=s2>&#34;dev-cache.example.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;log_level&#34;</span><span class=p>:</span> <span class=s2>&#34;debug&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;production&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;database_host&#34;</span><span class=p>:</span> <span class=s2>&#34;prod-db.example.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;cache_host&#34;</span><span class=p>:</span> <span class=s2>&#34;prod-cache.example.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;log_level&#34;</span><span class=p>:</span> <span class=s2>&#34;info&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=검증-스크립트>검증 스크립트<a hidden class=anchor aria-hidden=true href=#검증-스크립트>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>validate_config</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;설정 유효성 검증&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>required_keys</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;database_host&#39;</span><span class=p>,</span> <span class=s1>&#39;cache_host&#39;</span><span class=p>,</span> <span class=s1>&#39;log_level&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>env</span> <span class=ow>in</span> <span class=p>[</span><span class=s1>&#39;development&#39;</span><span class=p>,</span> <span class=s1>&#39;production&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=n>config</span> <span class=o>=</span> <span class=n>load_config</span><span class=p>(</span><span class=n>env</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>required_keys</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>config</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Missing required key &#39;</span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>&#39; in </span><span class=si>{</span><span class=n>env</span><span class=si>}</span><span class=s2> config&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=c1># 값 유효성 검증</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>is_valid_host</span><span class=p>(</span><span class=n>config</span><span class=p>[</span><span class=s1>&#39;database_host&#39;</span><span class=p>]):</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Invalid database host in </span><span class=si>{</span><span class=n>env</span><span class=si>}</span><span class=s2> config&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=cicd-파이프라인-통합>CI/CD 파이프라인 통합<a hidden class=anchor aria-hidden=true href=#cicd-파이프라인-통합>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span><span class=lnt id=hl-5-18><a class=lnlinks href=#hl-5-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># GitLab CI/CD 설정</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>stages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>validate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>validate_config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>validate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>python validate_config.py</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>terraform validate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>deploy_config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>terraform apply -auto-approve</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>kubectl apply -f k8s/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>only</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>master</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/software-design-and-architecture/>Software-Design-and-Architecture</a></li><li><a href=https://buenhyden.github.io/tags/software-architecture/>Software-Architecture</a></li><li><a href=https://buenhyden.github.io/tags/software-architecture-patterns/>Software-Architecture-Patterns</a></li><li><a href=https://buenhyden.github.io/tags/msa-patterns/>MSA-Patterns</a></li><li><a href=https://buenhyden.github.io/tags/configuration-management-patterns/>Configuration-Management-Patterns</a></li><li><a href=https://buenhyden.github.io/tags/configuration-as-code-pattern/>Configuration-as-Code-Pattern</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/resilience/retry-pattern/><span class=title>« Prev</span><br><span>Retry Pattern</span>
</a><a class=next href=https://buenhyden.github.io/posts/software-design-and-architecture/msa-patterns/configuration-management/dynamic-configuration-pattern/><span class=title>Next »</span><br><span>Dynamic Configuration Pattern</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>