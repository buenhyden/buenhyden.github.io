<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Vector | hyunyoun's Blog</title>
<meta name=keywords content="Backend,Database-Systems,NoSQL,Types,Vector"><meta name=description content="벡터 데이터베이스(Vector Database)는 NoSQL 데이터베이스의 한 종류로, 고차원 벡터 데이터를 효율적으로 저장하고 검색하기 위해 설계된 특수한 데이터베이스 시스템이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/databases/nosql/types/vector/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.8762af4fa9ee176c57f72565b721f234162fc7a9c882a271e0a1f68c4e89fb34.css integrity="sha256-h2KvT6nuF2xX9yVltyHyNBYvx6nIgqJx4KH2jE6J+zQ=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/databases/nosql/types/vector/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/databases/nosql/types/vector/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/databases/nosql/types/vector/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Vector"><meta property="og:description" content="벡터 데이터베이스(Vector Database)는 NoSQL 데이터베이스의 한 종류로, 고차원 벡터 데이터를 효율적으로 저장하고 검색하기 위해 설계된 특수한 데이터베이스 시스템이다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Vector"><meta name=twitter:description content="벡터 데이터베이스(Vector Database)는 NoSQL 데이터베이스의 한 종류로, 고차원 벡터 데이터를 효율적으로 저장하고 검색하기 위해 설계된 특수한 데이터베이스 시스템이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"기술 블로그","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"데이터베이스","item":""},{"@type":"ListItem","position":3,"name":"NoSQL","item":"https://buenhyden.github.io/posts/databases/nosql/"},{"@type":"ListItem","position":4,"name":"Vector","item":"https://buenhyden.github.io/posts/databases/nosql/types/vector/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>기술 블로그</a>&nbsp;»&nbsp;<a href>데이터베이스</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/databases/nosql/>NoSQL</a></div><h1>Vector</h1><div class=post-description>벡터 데이터베이스(Vector Database)는 NoSQL 데이터베이스의 한 종류로, 고차원 벡터 데이터를 효율적으로 저장하고 검색하기 위해 설계된 특수한 데이터베이스 시스템이다.</div></header><div class=post-content><h2 id=vector>Vector<a hidden class=anchor aria-hidden=true href=#vector>#</a></h2><p>벡터 데이터베이스(Vector Database)는 NoSQL 데이터베이스의 한 종류로, 고차원 벡터 데이터를 효율적으로 저장하고 검색하기 위해 설계된 특수한 데이터베이스 시스템이다.<br>이 데이터베이스는 인공지능, 기계학습, 자연어 처리 등 다양한 분야에서 중요한 역할을 하고 있다.</p><p>벡터 데이터베이스는 인공지능과 기계학습 분야의 발전과 함께 그 중요성이 계속 증가하고 있다. 비정형 데이터의 효율적인 처리와 유사성 기반 검색 능력은 다양한 산업 분야에서 혁신적인 애플리케이션을 가능하게 한다. 그러나 사용 목적과 요구사항에 따라 적절한 시스템을 선택하는 것이 중요하며, 기존 데이터베이스 시스템과의 통합 및 확장성 등을 고려해야 한다.</p><h3 id=벡터-데이터베이스의-기본-개념>벡터 데이터베이스의 기본 개념<a hidden class=anchor aria-hidden=true href=#벡터-데이터베이스의-기본-개념>#</a></h3><p>벡터 데이터베이스는 데이터를 고차원 벡터 형태로 저장한다.<br>이러한 벡터는 텍스트, 이미지, 오디오 등 다양한 형태의 데이터를 수치적으로 표현한 것이다. 예를 들어, 단어나 문장은 워드 임베딩을 통해 벡터로 변환될 수 있고, 이미지는 CNN(Convolutional Neural Network)을 통해 벡터로 표현될 수 있다.</p><h3 id=주요-특징>주요 특징<a hidden class=anchor aria-hidden=true href=#주요-특징>#</a></h3><ol><li><strong>고차원 데이터 지원</strong>: 수백 또는 수천 차원의 벡터를 효율적으로 처리할 수 있다.</li><li><strong>유사성 검색</strong>: 코사인 유사도나 유클리드 거리 등을 사용하여 유사한 벡터를 빠르게 찾을 수 있다.</li><li><strong>확장성</strong>: 대규모 데이터셋을 처리할 수 있도록 설계되어 있다.</li><li><strong>실시간 처리</strong>: 빠른 검색과 삽입을 지원한다.</li><li><strong>근사 최근접 이웃(ANN) 검색</strong>: 정확도와 속도의 균형을 맞춘 효율적인 검색 알고리즘을 사용한다.</li></ol><h3 id=작동-원리>작동 원리<a hidden class=anchor aria-hidden=true href=#작동-원리>#</a></h3><p>벡터 데이터베이스는 다음과 같은 과정으로 작동한다:</p><ol><li><strong>데이터 벡터화</strong>: 입력 데이터를 벡터로 변환한다.</li><li><strong>인덱싱</strong>: 벡터를 효율적으로 검색할 수 있는 구조로 저장한다.</li><li><strong>검색</strong>: 쿼리 벡터와 가장 유사한 벡터들을 찾아 반환한다.</li></ol><h3 id=기본-데이터-구조-예시>기본 데이터 구조 예시<a hidden class=anchor aria-hidden=true href=#기본-데이터-구조-예시>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 벡터 데이터의 기본 구조</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>VectorData</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=nb>id</span><span class=p>,</span> <span class=n>vector</span><span class=p>,</span> <span class=n>metadata</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>id</span> <span class=o>=</span> <span class=nb>id</span>                    <span class=c1># 고유 식별자</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>vector</span> <span class=o>=</span> <span class=n>vector</span>            <span class=c1># 숫자 배열 형태의 벡터</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>metadata</span> <span class=o>=</span> <span class=n>metadata</span> <span class=ow>or</span> <span class=p>{}</span>  <span class=c1># 추가 메타데이터</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>text_embedding</span> <span class=o>=</span> <span class=n>VectorData</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nb>id</span><span class=o>=</span><span class=s2>&#34;doc_1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>vector</span><span class=o>=</span><span class=p>[</span><span class=mf>0.1</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>,</span> <span class=o>-</span><span class=mf>0.3</span><span class=p>,</span> <span class=mf>0.4</span><span class=p>,</span> <span class=err>…</span><span class=p>],</span>  <span class=c1># 보통 수백~수천 차원</span>
</span></span><span class=line><span class=cl>    <span class=n>metadata</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;안녕하세요&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;language&#34;</span><span class=p>:</span> <span class=s2>&#34;ko&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;timestamp&#34;</span><span class=p>:</span> <span class=s2>&#34;2024-02-12T10:30:00Z&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>유사도 검색 구현:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14>14</a>
</span><span class=lnt id=hl-1-15><a class=lnlinks href=#hl-1-15>15</a>
</span><span class=lnt id=hl-1-16><a class=lnlinks href=#hl-1-16>16</a>
</span><span class=lnt id=hl-1-17><a class=lnlinks href=#hl-1-17>17</a>
</span><span class=lnt id=hl-1-18><a class=lnlinks href=#hl-1-18>18</a>
</span><span class=lnt id=hl-1-19><a class=lnlinks href=#hl-1-19>19</a>
</span><span class=lnt id=hl-1-20><a class=lnlinks href=#hl-1-20>20</a>
</span><span class=lnt id=hl-1-21><a class=lnlinks href=#hl-1-21>21</a>
</span><span class=lnt id=hl-1-22><a class=lnlinks href=#hl-1-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>scipy.spatial.distance</span> <span class=kn>import</span> <span class=n>cosine</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>compute_similarity</span><span class=p>(</span><span class=n>vector1</span><span class=p>,</span> <span class=n>vector2</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;코사인 유사도 계산&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>1</span> <span class=o>-</span> <span class=n>cosine</span><span class=p>(</span><span class=n>vector1</span><span class=p>,</span> <span class=n>vector2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>VectorIndex</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>vectors</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># id -&gt; vector 매핑</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>add_vector</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=nb>id</span><span class=p>,</span> <span class=n>vector</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;벡터 추가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>vectors</span><span class=p>[</span><span class=nb>id</span><span class=p>]</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=n>vector</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>search_similar</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>query_vector</span><span class=p>,</span> <span class=n>k</span><span class=o>=</span><span class=mi>5</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;최근접 이웃 검색&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>similarities</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=p>(</span><span class=n>vid</span><span class=p>,</span> <span class=n>compute_similarity</span><span class=p>(</span><span class=n>query_vector</span><span class=p>,</span> <span class=n>vec</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>vid</span><span class=p>,</span> <span class=n>vec</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>vectors</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>similarities</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>reverse</span><span class=o>=</span><span class=kc>True</span><span class=p>)[:</span><span class=n>k</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><p>실제 벡터 데이터베이스 시스템(예: Milvus) 사용 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span><span class=lnt id=hl-2-20><a class=lnlinks href=#hl-2-20>20</a>
</span><span class=lnt id=hl-2-21><a class=lnlinks href=#hl-2-21>21</a>
</span><span class=lnt id=hl-2-22><a class=lnlinks href=#hl-2-22>22</a>
</span><span class=lnt id=hl-2-23><a class=lnlinks href=#hl-2-23>23</a>
</span><span class=lnt id=hl-2-24><a class=lnlinks href=#hl-2-24>24</a>
</span><span class=lnt id=hl-2-25><a class=lnlinks href=#hl-2-25>25</a>
</span><span class=lnt id=hl-2-26><a class=lnlinks href=#hl-2-26>26</a>
</span><span class=lnt id=hl-2-27><a class=lnlinks href=#hl-2-27>27</a>
</span><span class=lnt id=hl-2-28><a class=lnlinks href=#hl-2-28>28</a>
</span><span class=lnt id=hl-2-29><a class=lnlinks href=#hl-2-29>29</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pymilvus</span> <span class=kn>import</span> <span class=n>Collection</span><span class=p>,</span> <span class=n>connections</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Milvus 연결</span>
</span></span><span class=line><span class=cl><span class=n>connections</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=n>host</span><span class=o>=</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=s1>&#39;19530&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 컬렉션 정의</span>
</span></span><span class=line><span class=cl><span class=n>collection</span> <span class=o>=</span> <span class=n>Collection</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span><span class=o>=</span><span class=s2>&#34;document_embeddings&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>dimension</span><span class=o>=</span><span class=mi>768</span><span class=p>,</span>  <span class=c1># BERT 임베딩 차원</span>
</span></span><span class=line><span class=cl>    <span class=n>index_params</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;index_type&#34;</span><span class=p>:</span> <span class=s2>&#34;IVF_FLAT&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;metric_type&#34;</span><span class=p>:</span> <span class=s2>&#34;L2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;params&#34;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&#34;nlist&#34;</span><span class=p>:</span> <span class=mi>1024</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 벡터 삽입</span>
</span></span><span class=line><span class=cl><span class=n>collection</span><span class=o>.</span><span class=n>insert</span><span class=p>([</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=n>vector_id</span><span class=p>],</span>           <span class=c1># id 리스트</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=n>embedding_vector</span><span class=p>],</span>    <span class=c1># 벡터 리스트</span>
</span></span><span class=line><span class=cl>    <span class=p>[{</span><span class=s2>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;원본 텍스트&#34;</span><span class=p>}]</span>  <span class=c1># 메타데이터 리스트</span>
</span></span><span class=line><span class=cl><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 유사도 검색</span>
</span></span><span class=line><span class=cl><span class=n>results</span> <span class=o>=</span> <span class=n>collection</span><span class=o>.</span><span class=n>search</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>query_vectors</span><span class=o>=</span><span class=p>[</span><span class=n>query_vector</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>limit</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>param</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;nprobe&#34;</span><span class=p>:</span> <span class=mi>16</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=주요-사용-사례>주요 사용 사례<a hidden class=anchor aria-hidden=true href=#주요-사용-사례>#</a></h3><ol><li><strong>추천 시스템</strong>: 사용자 선호도와 상품 특성을 벡터로 표현하여 유사한 상품을 추천한다.</li><li><strong>이미지 및 비디오 검색</strong>: 시각적으로 유사한 이미지나 비디오를 찾는 데 사용된다.</li><li><strong>자연어 처리</strong>: 의미적으로 유사한 텍스트를 검색하거나 문서를 분류하는 데 활용된다.</li><li><strong>이상 탐지</strong>: 정상 패턴에서 벗어난 데이터 포인트를 식별하는 데 사용된다.</li><li><strong>검색 증강 생성(RAG)</strong>: 대규모 언어 모델의 응답을 개선하기 위해 관련 정보를 검색하는 데 활용된다.</li></ol><h3 id=주요-벡터-데이터베이스-시스템>주요 벡터 데이터베이스 시스템<a hidden class=anchor aria-hidden=true href=#주요-벡터-데이터베이스-시스템>#</a></h3><ol><li><strong>Pinecone</strong>: 클라우드 기반의 완전 관리형 벡터 데이터베이스로, 높은 확장성과 성능을 제공한다.</li><li><strong>Weaviate</strong>: 오픈 소스 벡터 데이터베이스로, GraphQL API를 지원하며 시맨틱 검색에 강점이 있다.</li><li><strong>Milvus</strong>: 오픈 소스 분산 벡터 데이터베이스로, 다양한 인덱싱 알고리즘을 지원한다.</li><li><strong>Qdrant</strong>: Rust로 작성된 벡터 데이터베이스로, 빠른 성능과 사용 편의성을 제공한다.</li><li><strong>Chroma</strong>: 경량화된 벡터 데이터베이스로, 빠른 프로토타이핑에 적합하다.</li></ol><h3 id=장단점>장단점<a hidden class=anchor aria-hidden=true href=#장단점>#</a></h3><h4 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h4><ul><li>비정형 데이터의 효율적인 처리</li><li>빠른 유사성 검색</li><li>대규모 데이터셋 처리 능력</li></ul><h4 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h4><ul><li>정확한 일치 검색에는 적합하지 않음</li><li>일부 시스템에서 복잡한 쿼리나 조인 연산의 제한</li><li>기존 관계형 데이터베이스에 비해 상대적으로 새로운 기술</li></ul><h3 id=고급-기능과-최적화>고급 기능과 최적화<a hidden class=anchor aria-hidden=true href=#고급-기능과-최적화>#</a></h3><ol><li><p>ANN(Approximate Nearest Neighbor) 인덱싱:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>build_ann_index</span><span class=p>(</span><span class=n>vectors</span><span class=p>,</span> <span class=n>n_trees</span><span class=o>=</span><span class=mi>10</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;ANNOY 인덱스 구축 예시&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kn>import</span> <span class=nn>annoy</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>dim</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>vectors</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>index</span> <span class=o>=</span> <span class=n>annoy</span><span class=o>.</span><span class=n>AnnoyIndex</span><span class=p>(</span><span class=n>dim</span><span class=p>,</span> <span class=s1>&#39;angular&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>vec</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>vectors</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>index</span><span class=o>.</span><span class=n>add_item</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>vec</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>index</span><span class=o>.</span><span class=n>build</span><span class=p>(</span><span class=n>n_trees</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>index</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>벡터 양자화:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>quantize_vectors</span><span class=p>(</span><span class=n>vectors</span><span class=p>,</span> <span class=n>n_clusters</span><span class=o>=</span><span class=mi>256</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;벡터 양자화로 메모리 사용량 감소&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kn>from</span> <span class=nn>sklearn.cluster</span> <span class=kn>import</span> <span class=n>KMeans</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># 클러스터링으로 대표 벡터 선정</span>
</span></span><span class=line><span class=cl>    <span class=n>kmeans</span> <span class=o>=</span> <span class=n>KMeans</span><span class=p>(</span><span class=n>n_clusters</span><span class=o>=</span><span class=n>n_clusters</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>kmeans</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>vectors</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># 각 벡터를 가장 가까운 중심점으로 매핑</span>
</span></span><span class=line><span class=cl>    <span class=n>quantized</span> <span class=o>=</span> <span class=n>kmeans</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=n>vectors</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>quantized</span><span class=p>,</span> <span class=n>kmeans</span><span class=o>.</span><span class=n>cluster_centers_</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>배치 처리와 캐싱:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span><span class=lnt id=hl-5-18><a class=lnlinks href=#hl-5-18>18</a>
</span><span class=lnt id=hl-5-19><a class=lnlinks href=#hl-5-19>19</a>
</span><span class=lnt id=hl-5-20><a class=lnlinks href=#hl-5-20>20</a>
</span><span class=lnt id=hl-5-21><a class=lnlinks href=#hl-5-21>21</a>
</span><span class=lnt id=hl-5-22><a class=lnlinks href=#hl-5-22>22</a>
</span><span class=lnt id=hl-5-23><a class=lnlinks href=#hl-5-23>23</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>VectorDBCache</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>capacity</span><span class=o>=</span><span class=mi>1000</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>cache</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>capacity</span> <span class=o>=</span> <span class=n>capacity</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_vectors</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>ids</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 캐시된 벡터 반환</span>
</span></span><span class=line><span class=cl>        <span class=n>cached</span> <span class=o>=</span> <span class=p>{</span><span class=nb>id</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=p>[</span><span class=nb>id</span><span class=p>]</span> <span class=k>for</span> <span class=nb>id</span> <span class=ow>in</span> <span class=n>ids</span> <span class=k>if</span> <span class=nb>id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># 캐시되지 않은 벡터 로드</span>
</span></span><span class=line><span class=cl>        <span class=n>missing</span> <span class=o>=</span> <span class=p>[</span><span class=nb>id</span> <span class=k>for</span> <span class=nb>id</span> <span class=ow>in</span> <span class=n>ids</span> <span class=k>if</span> <span class=nb>id</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>missing</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>loaded</span> <span class=o>=</span> <span class=n>load_vectors_from_db</span><span class=p>(</span><span class=n>missing</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>loaded</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1># 캐시 크기 제한</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=p>)</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>capacity</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1># LRU 정책으로 오래된 항목 제거</span>
</span></span><span class=line><span class=cl>                <span class=n>oldest</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=o>.</span><span class=n>keys</span><span class=p>())[:</span><span class=o>-</span><span class=bp>self</span><span class=o>.</span><span class=n>capacity</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>oldest</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>del</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span><span class=nb>id</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=p>[</span><span class=nb>id</span><span class=p>]</span> <span class=k>for</span> <span class=nb>id</span> <span class=ow>in</span> <span class=n>ids</span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>