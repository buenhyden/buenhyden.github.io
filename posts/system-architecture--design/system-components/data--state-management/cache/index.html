<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>캐시 (Cache) | hyunyoun's Blog</title><meta name=keywords content="System-Design,System-Components,Cache,Performance-Optimization,Latency-Reduction,Memory-Management"><meta name=description content="캐시 (Cache) 는 자주 접근하는 데이터를 빠른 저장소에 임시 보관하여 시스템 성능을 향상시키는 하드웨어 또는 소프트웨어 구성 요소이다. CPU 캐시부터 웹 캐시까지 다양한 계층에서 활용되며, 지역성 원리를 기반으로 데이터 접근 속도를 대폭 개선한다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/system-architecture--design/system-components/data--state-management/cache/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.8762af4fa9ee176c57f72565b721f234162fc7a9c882a271e0a1f68c4e89fb34.css integrity="sha256-h2KvT6nuF2xX9yVltyHyNBYvx6nIgqJx4KH2jE6J+zQ=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/system-architecture--design/system-components/data--state-management/cache/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/system-architecture--design/system-components/data--state-management/cache/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/system-architecture--design/system-components/data--state-management/cache/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="캐시 (Cache)"><meta property="og:description" content="캐시 (Cache) 는 자주 접근하는 데이터를 빠른 저장소에 임시 보관하여 시스템 성능을 향상시키는 하드웨어 또는 소프트웨어 구성 요소이다. CPU 캐시부터 웹 캐시까지 다양한 계층에서 활용되며, 지역성 원리를 기반으로 데이터 접근 속도를 대폭 개선한다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="캐시 (Cache)"><meta name=twitter:description content="캐시 (Cache) 는 자주 접근하는 데이터를 빠른 저장소에 임시 보관하여 시스템 성능을 향상시키는 하드웨어 또는 소프트웨어 구성 요소이다. CPU 캐시부터 웹 캐시까지 다양한 계층에서 활용되며, 지역성 원리를 기반으로 데이터 접근 속도를 대폭 개선한다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"캐시 (Cache)","item":"https://buenhyden.github.io/posts/system-architecture--design/system-components/data--state-management/cache/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a></div><h1>캐시 (Cache)</h1><div class=post-description>캐시 (Cache) 는 자주 접근하는 데이터를 빠른 저장소에 임시 보관하여 시스템 성능을 향상시키는 하드웨어 또는 소프트웨어 구성 요소이다. CPU 캐시부터 웹 캐시까지 다양한 계층에서 활용되며, 지역성 원리를 기반으로 데이터 접근 속도를 대폭 개선한다.</div></header><div class=post-content><h2 id=캐시-cache>캐시 (Cache)<a hidden class=anchor aria-hidden=true href=#캐시-cache>#</a></h2><p>캐시는 시스템 성능 최적화를 위한 핵심 구성요소로, 느린 저장 매체와 빠른 처리 장치 사이의 속도 차이를 해결한다. 이는 접근 빈도가 높은 데이터를 임시 저장하여 읽기 지연 (latency) 을 감소시키고 원본 데이터 소스에 대한 부하를 완화한다.</p><p>하드웨어 (L1/L2/L3), 메모리·디스크 캐시, 웹 캐시, 분산 캐시 등 다양한 형태로 구현되어, 성능 개선, 대기 시간 감소, 자원 절약 등 다양한 목적을 달성하며 정책 (교체 알고리즘, 일관성, 만료), 데이터 구조, 아키텍처 설계가 중요하다.</p><p>하드웨어부터 애플리케이션까지 모든 계층에서 필수적으로 사용되는 기술이며, 실무에서는 트레이드오프 기반 설계를 통해 복잡성, 일관성, 확장성, 오버헤드 등을 균형 있게 관리해야 한다.</p><h3 id=등장-배경-및-발전-과정>등장 배경 및 발전 과정<a hidden class=anchor aria-hidden=true href=#등장-배경-및-발전-과정>#</a></h3><p>캐시는 <strong>CPU 와 메인 메모리 간 속도 차이</strong>를 줄이기 위해 1960 년대 CPU 내부에 도입되었다. CPU 는 나노초 단위로 실행되는데, 메모리는 비교적 느린 마이크로초 단위였기 때문에, 빠른 접근이 가능한 작은 크기 L1/L2 캐시가 필요했다.</p><p>각 시대의 컴퓨팅 구조 (싱글 코어 → 멀티코어 → 분산 시스템 → 클라우드 네이티브, AI/ML) 변화, 웹 애플리케이션과 분산 시스템의 발전과 함께 <strong>캐시 계층</strong>과 <strong>캐시 위치</strong>도 확장되어, 현재는 <strong>성능, 확장성, 비용 효율성</strong>을 개선하는 핵심 요소로 자리잡았다.</p><h4 id=발전-과정>발전 과정<a hidden class=anchor aria-hidden=true href=#발전-과정>#</a></h4><p><strong>1960 년대 초기</strong></p><ul><li>IBM System/360 모델에서 최초의 캐시 메모리 도입</li><li>CPU 와 메모리 속도 차이 해결을 위한 필요성 대두</li></ul><p><strong>1970 년대 -1980 년대</strong></p><ul><li>마이크로프로세서 발전과 함께 캐시 기술 발전</li><li>멀티레벨 캐시 구조 도입</li></ul><p><strong>1990 년대 - 현재</strong></p><ul><li>웹 기술 발전과 함께 웹 캐시, CDN 등장</li><li>분산 시스템에서 분산 캐시 기술 발전</li><li>인메모리 데이터베이스와 NoSQL 캐시 솔루션 등장</li></ul><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><p><strong>목적</strong>:</p><ul><li><strong>응답 지연 (Latency) 감소</strong>: 자주 쓰이는 데이터를 가까운 계층에 저장해 빠르게 응답.</li><li><strong>처리량 (Throughput) 증가</strong>: 원본 데이터베이스, 네트워크 부하를 줄이고 동시 요청 처리 가능.</li><li><strong>비용 절감</strong>: I/O/네트워크 호출 감소 → 비용 효율성 향상.</li><li><strong>스루풋 안정성</strong>: 트래픽 급증 시에도 시스템 안정성 유지.</li></ul><p><strong>필요성</strong>:</p><ul><li>CPU 속도 대비 DRAM/Disk/Network 는 느리며, 이는 <strong>병목</strong>으로 작용한다. 캐시는 이러한 병목을 완화하는 효과적인 대안이 된다.</li><li><strong>시간 지역성 및 공간 지역성</strong> 패턴이 존재하는 대부분의 애플리케이션에서 캐시는 유의미한 성능 향상을 제공한다.</li><li><strong>클라우드·분산 시스템</strong>에서는 원격 저장소 호출 비용이 크게 증가하며, 캐시는 이러한 구조에서 필수 요소가 되었다.</li></ul><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><ul><li><p><strong>정의</strong>: 캐시는 자주 접근되는 데이터나 계산 비용이 높은 결과를 <strong>임시 저장소</strong>에 보관하여 빠른 데이터 접근을 가능하게 하는 구조. 하드웨어 (L1/L2), 운영체제 (page cache), 애플리케이션 (Redis) 등 다양한 계층에서 사용된다.</p></li><li><p><strong>목적</strong>: <strong>성능 향상</strong>, <strong>지연 감소</strong>, <strong>원본 시스템 부하 감소</strong>, <strong>비용 최적화</strong></p></li></ul><h4 id=캐시-설계의-이론적-기반>캐시 설계의 이론적 기반<a hidden class=anchor aria-hidden=true href=#캐시-설계의-이론적-기반>#</a></h4><table><thead><tr><th>개념</th><th>설명</th><th>실무 연관성</th></tr></thead><tbody><tr><td><strong>Locality of Reference (지역성)</strong></td><td>시간적 (Local): 최근 사용한 데이터를 다시 사용할 확률<br>공간적 (Spatial): 인접 데이터 접근 확률</td><td>데이터 패턴 분석 기반 캐싱 전략 수립<br>ex. 브라우저 캐시, OS 파일 시스템</td></tr><tr><td><strong>Cache Hit / Miss</strong></td><td>요청된 데이터가 캐시에 존재하면 Hit, 없으면 Miss</td><td>히트율 기반 성능 모니터링 및 캐시 크기 조정</td></tr><tr><td><strong>Eviction Policy (교체 정책)</strong></td><td>LRU, LFU, FIFO, Random, ARC, CLOCK 등</td><td>캐시 크기 한계에 따른 적절한 정책 선택</td></tr><tr><td><strong>Write Policy</strong></td><td>Write-through: 즉시 동기화<br>Write-back: 지연 반영, Dirty Bit 사용</td><td>성능 vs 데이터 안정성 트레이드오프</td></tr><tr><td><strong>Mapping 전략</strong></td><td>Direct-mapped, Set-associative, Fully-associative</td><td>하드웨어 캐시 구현 방식 결정 (CPU)</td></tr><tr><td><strong>Coherence / Consistency</strong></td><td>분산 캐시 또는 멀티 코어 환경에서 데이터 최신성 유지</td><td>Redis Cluster, CPU 버스 snooping 등</td></tr></tbody></table><h4 id=시스템-아키텍처-연관>시스템 아키텍처 연관<a hidden class=anchor aria-hidden=true href=#시스템-아키텍처-연관>#</a></h4><table><thead><tr><th>영역</th><th>캐시 활용 방식</th><th>고려 사항</th></tr></thead><tbody><tr><td><strong>웹</strong></td><td>정적 리소스 캐시, CDN, 브라우저 캐시</td><td>Cache-Control, ETag</td></tr><tr><td><strong>DB</strong></td><td>DB Query 캐시, 결과 캐시</td><td>Write-through/write-back</td></tr><tr><td><strong>분산 시스템</strong></td><td>Redis/Memcached 통한 글로벌 캐시</td><td>캐시 일관성, Failover</td></tr><tr><td><strong>API Gateway</strong></td><td>응답 캐시, 인증 결과 캐시</td><td>TTL, 캐시 무효화 조건</td></tr><tr><td><strong>ML 시스템</strong></td><td>모델 추론 결과, 전처리 결과 캐시</td><td>LRU 기반 numpy array 저장</td></tr></tbody></table><h3 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><table><thead><tr><th><strong>기능</strong></th><th><strong>설명</strong></th><th><strong>역할</strong></th></tr></thead><tbody><tr><td>데이터 임시 저장</td><td>원격 데이터나 연산 결과를 메모리 계층에 저장</td><td>원본 시스템 요청 감소 및 빠른 재사용 구현</td></tr><tr><td>조회 속도 향상</td><td>캐시 히트 시 빠른 응답 전송</td><td>사용자 경험 및 시스템 효율성 향상</td></tr><tr><td>부하 분산 및 트래픽 완화</td><td>DB/API 호출수 감소, 네트워크 트래픽 감소</td><td>서비스 확장성 향상 및 비용 최적화</td></tr><tr><td>계층 전략 (TTL, Eviction)</td><td>LRU, LFU, TTL 을 통한 데이터 생명주기 관리</td><td>저장 공간 효율화 및 일관성 유지</td></tr><tr><td>일관성 관리</td><td>Write-through/back, 무효화 (invalidate) 전략 등</td><td>데이터 정합성 보장 및 최신성 유지</td></tr></tbody></table><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><ul><li><strong>계층화 구조</strong>: CPU 내부, OS, 애플리케이션, 분산 캐시까지 <strong>다단계 캐시</strong>로 확장 가능.</li><li><strong>정책 중심 설계</strong>: 교체 정책, 쓰기 정책, 무효화 등은 다양한 시나리오에 맞춘 설정이 가능.</li><li><strong>저장소 계층 최적화</strong>: 빠른 접근이 필요한 데이터는 용량 작은 레벨에 저장하고, 느리지만 큰 저장소에는 덜 사용하는 데이터를 배치.</li><li><strong>트레이드오프 기반</strong>: 속도, 일관성, 비용, 복잡성 간 균형 설계를 위해 트레이드오프 존재.</li><li><strong>관측 가능성 (Observability)</strong>: 캐시 상황 (히트율, MISS rate, evictions 등) 을 모니터링해야 효율적 운영 가능.</li></ul><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><p>캐시 시스템 설계 시 반드시 지켜야 하는 기반 원칙들입니다:</p><ol><li><p><strong>지역성 원칙 (Locality Principle)</strong><br>시간적 및 공간적 지역성을 활용한 설계가 핵심이다. 시간적 지역성은 최근 접근된 데이터를, 공간적 지역성은 인접 데이터를 캐시한다.</p></li><li><p><strong>일관성 원칙 (Consistency Principle)</strong><br>최신 데이터 무결성을 유지해야 한다. Write-through, Write-back, Invalidation(무효화), TTL(유효 기간) 등을 명확하게 구현해야 데이터 정합성을 보장할 수 있다.</p></li><li><p><strong>교체 정책 원칙 (Eviction Policy Principle)</strong><br>제한된 캐시용량 내에서 최적 성능을 달성하기 위해 LRU, LFU, ARC 등 교체 알고리즘을 올바르게 선택하고 튜닝해야 한다.</p></li><li><p><strong>계층화 원칙 (Hierarchical Principle)</strong><br>여러 캐시 레벨 (L1, L2, L3, 애플리케이션, CDN 등) 간 역할과 순서를 정의하고 각 레벨 간 이동 전략을 명확히 설계해야 한다.</p></li><li><p><strong>관측 원칙 (Observability Principle)</strong><br>캐시 히트율, 미스율, eviction 횟수, 평균 응답 시간 등 핵심 메트릭을 모니터링하고 로그를 수집하여 운영과 성능 개선에 활용해야 한다.</p></li><li><p><strong>동시성 및 확장성 원칙 (Concurrency & Scalability Principle)</strong><br>멀티스레드/멀티노드 환경에서 안전한 동시 접근을 위해 적절한 락/락 - 프리 (lock-free) 또는 분할 (shard) 전략을 구현해야 하며 확장성을 고려해야 한다.</p></li></ol><h3 id=주요-원리>주요 원리<a hidden class=anchor aria-hidden=true href=#주요-원리>#</a></h3><ul><li><strong>공간 및 시간 지역성</strong>: 데이터 접근 패턴이 집중되는 경향을 활용하여 자주 쓰는 데이터 우선적으로 캐싱.</li><li><strong>메트릭 기반 관리</strong>: 히트율, 미스율, eviction 빈도 등을 실시간 수집해 캐시 성능을 주기적으로 검토하고 튜닝.</li><li><strong>계층간 이동 및 동기화</strong>: 캐시가 여러 계층에 걸쳐 있는 경우, 읽기 방식 (read-through, read-write-through) 과 쓰기 (write-back) 전략을 통해 데이터 흐름 일관성 유지.</li></ul><pre class=mermaid>flowchart TD
    A[Client Request] --&gt; B{Cache?}
    B -- Hit --&gt; C[바로 반환]
    B -- Miss --&gt; D[Data Source]
    D --&gt; E[데이터 반환 &amp; 캐시 저장]
    E --&gt; C
</pre><h3 id=작동-원리-및-방식>작동 원리 및 방식<a hidden class=anchor aria-hidden=true href=#작동-원리-및-방식>#</a></h3><ul><li><strong>캐시 탐색:</strong> 요청 데이터가 캐시에 있는지 확인.</li><li><strong>적중/실패 처리:</strong> 적중 시 캐시에서 제공, 실패 시 원본에서 가져와 캐시에 저장.</li><li><strong>캐시 갱신:</strong> 데이터 변경 시 캐시 갱신 또는 무효화.</li></ul><pre class=mermaid>graph TB
    A[Client Request] --&gt; B{Cache Check}
    B --&gt;|Hit| C[Return from Cache]
    B --&gt;|Miss| D[Fetch from Origin]
    D --&gt; E[Store in Cache]
    E --&gt; F[Return to Client]
    C --&gt; G[Update Access Info]
    F --&gt; H[Update Cache Statistics]
    
    subgraph &#34;Cache Management&#34;
        I[Eviction Policy]
        J[TTL Management]
        K[Consistency Control]
    end
    
    E --&gt; I
    G --&gt; J
    F --&gt; K
</pre><p><strong>작동 과정:</strong></p><ol><li><strong>요청 수신</strong>: 클라이언트로부터 데이터 요청 접수</li><li><strong>캐시 확인</strong>: 해당 데이터가 캐시에 존재하는지 검사</li><li><strong>히트 처리</strong>: 캐시에 있는 경우 즉시 반환</li><li><strong>미스 처리</strong>: 캐시에 없는 경우 원본 저장소에서 조회</li><li><strong>캐시 갱신</strong>: 조회한 데이터를 캐시에 저장</li><li><strong>정책 적용</strong>: 교체 정책에 따른 캐시 관리 수행</li></ol><h3 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h3><pre class=mermaid>graph LR
  subgraph Client Layer
    A[Browser / API Client]
  end

  subgraph App Server Layer
    B1[&#34;App-Level Cache (In‑Process)&#34;]
    B2[Application Logic]
  end

  subgraph Cache Tier
    C1[&#34;Distributed Cache (e.g., Redis, Memcached)&#34;]
    C2[CDN / Reverse Proxy Cache]
  end

  subgraph Storage Tier
    D1[&#34;Database (RDBMS / NoSQL)&#34;]
    D2[&#34;Persistent Storage (Disk / S3)&#34;]
  end

  A --&gt;|1.request| B1
  B1 -- hit --&gt; A
  B1 -- miss --&gt; C1
  C1 -- hit --&gt; B1
  C1 -- miss --&gt; D1
  D1 --&gt;|2.fetch| C1
  C1 --&gt; B1
  B1 --&gt; A

  A --&gt;|static| C2
  C2 --&gt;|hit/miss| A

  B1 --&gt;|write-through| C1 --&gt; D1
  B1 --&gt;|invalidates on update| C1
</pre><p>캐시 구조는 클라이언트 → 앱 인프로세스 캐시 → 분산 캐시 → 실제 저장소로 이어지는 명확한 계층 구조를 갖추며, 이를 통해 레이턴시 최적화와 성능 안정성이 확보된다. 각 계층은 역할에 따라 필수 또는 선택 요소로 구성되며, 모두가 함께 작동하여 일관성과 복원력 있는 시스템을 구현하도록 설계되어야 한다.</p><h4 id=구성-요소>구성 요소<a hidden class=anchor aria-hidden=true href=#구성-요소>#</a></h4><table><thead><tr><th>구성 요소</th><th>유형</th><th>주요 기능 및 역할</th></tr></thead><tbody><tr><td><strong>In-Process Cache</strong></td><td>필수</td><td>애플리케이션 내부에 위치, 매우 낮은 지연 시간, 단일 프로세스 기반 고속 응답</td></tr><tr><td><strong>Distributed Cache</strong></td><td></td><td>여러 앱/서버 간 공유 가능, 세션 유지, 고가용성, 확장성, 클러스터링 지원</td></tr><tr><td><strong>CDN / Reverse Proxy</strong></td><td></td><td>정적 자산 글로벌 캐싱, 클라이언트 요청 지연 최소화, 네트워크 대역폭 절감</td></tr><tr><td><strong>Database / Persistent Store</strong></td><td></td><td>캐시 미스 시 백엔드 데이터 원천으로 접근, 캐시 데이터의 일관성 기준점</td></tr><tr><td><strong>Eviction Policy Engine</strong></td><td></td><td>캐시 공간 초과 시 데이터 제거 정책 (LRU, LFU, TTL 등) 을 적용하여 공간 최적화</td></tr><tr><td><strong>Consistency / Invalidation</strong></td><td></td><td>TTL, 쓰기 반영 (write-through/back), Pub/Sub 기반 무효화로 최신 상태 유지</td></tr><tr><td><strong>Concurrency Control</strong></td><td></td><td>멀티스레드·멀티노드 환경에서 동시성 문제 방지 (락, CAS, 분산락 등)</td></tr><tr><td><strong>Sharding / Partitioning</strong></td><td></td><td>키 해시 기반 분산 저장, 확장성 및 부하 분산 목적 (Hot Key 분산 포함)</td></tr><tr><td><strong>Cache Metrics / Monitoring</strong></td><td></td><td>캐시 히트율, 레이턴시, 메모리 사용량 등 실시간 수집 및 시각화 (ex. Prometheus + Grafana)</td></tr><tr><td><strong>Alerting System</strong></td><td></td><td>캐시 적중률 저하, 오버로드 등 이상 상황 감지 및 알림 시스템 연동</td></tr><tr><td><strong>Write Buffer</strong></td><td>선택</td><td>Write-back 정책에서 비동기적 DB 반영을 위한 버퍼 (쓰기 성능 최적화)</td></tr><tr><td><strong>Backup Cache</strong></td><td></td><td>장애 발생 시 Fallback 용도로 사용하는 로컬/보조 캐시</td></tr><tr><td><strong>Pre-warm / Pre-load Script</strong></td><td></td><td>서버 기동 시 주요 데이터를 미리 로딩하여 cold start 성능 저하 방지</td></tr><tr><td><strong>Tiered Storage</strong></td><td></td><td>메모리 + 디스크 기반 계층형 캐시 (예: Redis on Flash), 대용량 저비용 캐싱</td></tr><tr><td><strong>Cache Proxy / Adapter</strong></td><td></td><td>애플리케이션과 캐시 사이에서 통신 추상화 및 접근 제어</td></tr></tbody></table><ul><li><strong>In‑Process Cache</strong>는 가장 빠른 반면 동기화나 고가용성 문제 있음 → 이를 보완하기 위한 <strong>Distributed Cache</strong>가 뒤따름.</li><li>앱 레벨에서 분산 캐시를 사용해 세션 공유, stateful 환경에서도 확장성 보장.</li><li><strong>Eviction Engine</strong>, <strong>Invalidation</strong>, <strong>Concurrency Control</strong>은 캐시 품질과 정합성 확보를 위한 핵심 역할.</li><li><strong>Monitoring & Metrics</strong>는 위 모든 요소의 성능과 운영 상태를 지속적으로 관찰하며 피드백 루프를 형성.</li></ul><h4 id=계층형-캐시-구조>계층형 캐시 구조<a hidden class=anchor aria-hidden=true href=#계층형-캐시-구조>#</a></h4><p>계층형 캐시 (Hierarchical Cache 또는 Multi-level Cache) 구조는 <strong>성능 최적화</strong>와 <strong>자원 활용 극대화</strong>를 위해 하드웨어·소프트웨어 전반에서 사용되는 핵심 설계 개념이다.</p><ul><li><strong>계층형 캐시</strong>는 접근 속도·비용·저장 용량에 따라 서로 다른 성능 특성을 가진 캐시를 <strong>상위→하위 단계로 계층화</strong>하여 배치하는 구조.</li><li><strong>상위 캐시</strong>는 더 빠르지만 용량이 작고 비용이 비싸며, <strong>하위 캐시</strong>는 상대적으로 느리지만 더 크고 비용이 저렴함.</li></ul><h5 id=하드웨어-관점-cpu-중심>하드웨어 관점 (CPU 중심)<a hidden class=anchor aria-hidden=true href=#하드웨어-관점-cpu-중심>#</a></h5><table><thead><tr><th>계층</th><th>구성 요소</th><th>특징</th><th>속도</th><th>용량</th></tr></thead><tbody><tr><td>L1</td><td>레지스터/캐시</td><td>CPU 에 가장 가까움, 매우 빠름, 명령어/데이터 분리 캐시</td><td>매우 빠름</td><td>매우 작음 (수십 KB)</td></tr><tr><td>L2</td><td>L2 캐시</td><td>L1 미스 시 사용, 일부 프로세서에 공유됨</td><td>빠름</td><td>작음 (수백 KB~MB)</td></tr><tr><td>L3</td><td>L3 캐시</td><td>여러 코어 간 공유, CPU 외부에 위치</td><td>보통</td><td>큼 (수 MB~수십 MB)</td></tr><tr><td>L4</td><td>메인 메모리</td><td>RAM, 비교적 느림</td><td>느림</td><td>수 GB 이상</td></tr><tr><td>L5</td><td>디스크/스토리지</td><td>SSD/HDD, 가장 느리지만 저장 용량은 큼</td><td>매우 느림</td><td>수 TB 이상</td></tr></tbody></table><h6 id=동작-원리>동작 원리<a hidden class=anchor aria-hidden=true href=#동작-원리>#</a></h6><pre class=mermaid>graph TD
  A[CPU Register] --&gt; B[L1 Cache]
  B --&gt; C[L2 Cache]
  C --&gt; D[L3 Cache]
  D --&gt; E[Main Memory]
  E --&gt; F[Disk/Storage]

  style A fill:#FFCCCC
  style B fill:#FFDD99
  style C fill:#FFFF99
  style D fill:#CCFF99
  style E fill:#99CCFF
  style F fill:#CCCCFF
</pre><h5 id=소프트웨어시스템-관점>소프트웨어/시스템 관점<a hidden class=anchor aria-hidden=true href=#소프트웨어시스템-관점>#</a></h5><ul><li>계층형 캐시는 속도·비용·용량 간 <strong>트레이드오프 최적화</strong>를 위한 구조</li><li>각 계층은 <strong>역할, 특성, 위치</strong>가 명확히 구분되며, <strong>hit → pass-through → fill</strong> 방식으로 작동</li><li>실무에서는 <strong>요청 특성과 사용 패턴</strong>에 따라 설계가 달라지며, <strong>일관성/무효화/모니터링</strong>이 중요</li></ul><table><thead><tr><th>계층</th><th>구성 요소</th><th>활용 예시</th><th>주 용도</th></tr></thead><tbody><tr><td>L1</td><td>In-Process Cache</td><td>로컬 변수, JVM 내부 캐시, Caffeine 등</td><td>레이턴시 최소화, 프로세스 내 고속 캐싱</td></tr><tr><td>L2</td><td>Distributed Cache</td><td>Redis, Memcached</td><td>다중 노드 간 데이터 공유, 상태 일관성 유지</td></tr><tr><td>L3</td><td>CDN/Edge Cache</td><td>Cloudflare, Akamai</td><td>정적 자원 캐싱, 글로벌 사용자 응답 최적화</td></tr><tr><td>L4</td><td>Persistent Storage/DB</td><td>PostgreSQL, MySQL, Cassandra</td><td>캐시 미스 시 fallback, 데이터 원본 보관</td></tr></tbody></table><blockquote><p>⚙️ <strong>실제 서비스에서는</strong> 상황에 따라 2~3 단계만 구성하거나, CDN 까지 포함해 전체 4 계층 구성도 함.</p></blockquote><h6 id=동작-원리-1>동작 원리<a hidden class=anchor aria-hidden=true href=#동작-원리-1>#</a></h6><pre class=mermaid>flowchart TD
    U[User Request] --&gt; A[L1 - In-Process Cache]
    A --&gt;|miss| B[L2 - Redis/Memcached]
    B --&gt;|miss| C[L3 - CDN/Edge]
    C --&gt;|miss| D[L4 - DB or File Storage]
    D --&gt; E[Response to User]
</pre><ul><li>요청은 <strong>상위 계층부터 차례로 탐색하며</strong>, hit 시 즉시 응답.</li><li>miss 발생 시 <strong>하위 계층 탐색 후</strong>, 데이터 fetch → 상위 캐시에 저장 (promotion).</li><li>일부 계층은 <strong>pre-warm 전략</strong>으로 미리 주요 데이터를 적재하기도 함.</li></ul><h6 id=실무-설계-시-고려사항>실무 설계 시 고려사항<a hidden class=anchor aria-hidden=true href=#실무-설계-시-고려사항>#</a></h6><table><thead><tr><th>고려 요소</th><th>설명</th></tr></thead><tbody><tr><td><strong>데이터 지역성 (Locality)</strong></td><td>빈번하게 접근하는 데이터를 상위 계층에 유지</td></tr><tr><td><strong>적중률 (Hit Rate)</strong></td><td>계층별 캐시 적중률 분석 → 자원 효율화</td></tr><tr><td><strong>일관성 (Consistency)</strong></td><td>TTL 설정, Pub/Sub invalidation, write-through 등 필요</td></tr><tr><td><strong>복구 전략</strong></td><td>하위 계층 장애 시 fallback 구성 필요</td></tr><tr><td><strong>비용 최적화</strong></td><td>고속 캐시는 비용 높음 → 중요 데이터만 상위 계층 유지</td></tr><tr><td><strong>캐시 무효화 정책</strong></td><td>계층간 적절한 무효화 시점 설계 필요</td></tr></tbody></table><h6 id=장점과-단점>장점과 단점<a hidden class=anchor aria-hidden=true href=#장점과-단점>#</a></h6><table><thead><tr><th>장점</th><th>단점</th></tr></thead><tbody><tr><td>성능 최적화: 빠른 응답 제공</td><td>계층 간 일관성 유지 비용 존재</td></tr><tr><td>확장성: 각 계층 독립 확장 가능</td><td>설계 복잡도 증가</td></tr><tr><td>비용 절감: 고비용 자원 최소화</td><td>관리/운영 난이도 증가</td></tr></tbody></table><h6 id=실무-사례-예시>실무 사례 예시<a hidden class=anchor aria-hidden=true href=#실무-사례-예시>#</a></h6><table><thead><tr><th>시스템</th><th>구성</th><th>설명</th></tr></thead><tbody><tr><td><strong>웹 서버</strong></td><td>브라우저 캐시 → CDN → 서버 메모리 캐시 → DB</td><td>HTML, JS, 이미지 빠른 응답을 위한 계층 설계</td></tr><tr><td><strong>API 서버</strong></td><td>L1(local cache) → L2(Redis) → DB</td><td>유저 정보 조회, 세션 등 빠른 응답용</td></tr><tr><td><strong>ML 서빙</strong></td><td>L1(Numpy/TF 결과 캐시) → L2(Redis) → L3(S3 모델)</td><td>추론 결과 캐싱 및 모델 로딩 최적화</td></tr></tbody></table><h6 id=l1--l2--l3-계층형-캐시-간-데이터-동기화-전략>L1 ↔ L2 ↔ L3 계층형 캐시 간 데이터 동기화 전략<a hidden class=anchor aria-hidden=true href=#l1--l2--l3-계층형-캐시-간-데이터-동기화-전략>#</a></h6><p><strong>L1 ↔ L2 ↔ L3 캐시 간 동기화 전략</strong>은 계층형 캐시 구조에서 <strong>일관성과 최신성 (consistency & freshness)</strong> 을 보장하고, <strong>불필요한 캐시 미스 (miss) 를 줄이기 위한 핵심 전략</strong>이다.</p><p><strong>동기화의 목적</strong>:</p><table><thead><tr><th>목적</th><th>설명</th></tr></thead><tbody><tr><td><strong>데이터 일관성 유지</strong></td><td>상위 캐시에 오래된 데이터가 남아있는 경우를 방지</td></tr><tr><td><strong>캐시 적중률 향상</strong></td><td>하위 계층의 새로운 데이터가 상위 계층에도 반영되어 miss 최소화</td></tr><tr><td><strong>지연 시간 단축</strong></td><td>L1/L2 에서 최신 데이터를 제공하기 위해 하위 캐시와 동기화 필요</td></tr><tr><td><strong>장애 복구 및 복원력 확보</strong></td><td>장애 복구 후 warm-up 시 캐시 복원 용도로 사용</td></tr></tbody></table><p><strong>기본 전제 및 구성</strong>:</p><table><thead><tr><th>계층</th><th>위치 및 특징</th><th>예시 기술</th></tr></thead><tbody><tr><td><strong>L1</strong></td><td>애플리케이션 내부 메모리 캐시 (In-Process)</td><td>Caffeine, Guava, Spring Cache</td></tr><tr><td><strong>L2</strong></td><td>네트워크 기반 공유 캐시 (Distributed)</td><td>Redis, Memcached</td></tr><tr><td><strong>L3</strong></td><td>외부 글로벌 캐시 or 정적 리소스 캐시</td><td>CDN (Cloudflare, Akamai), 디스크 캐시</td></tr></tbody></table><p><strong>데이터 흐름 및 동기화 전략</strong>:</p><pre class=mermaid>sequenceDiagram
    participant App as Application
    participant L1 as L1 Cache (In-Memory)
    participant L2 as L2 Cache (Redis/Memcached)
    participant L3 as L3 Cache (CDN/Storage)

    App-&gt;&gt;L1: Read(key)
    alt Cache Miss
        L1-&gt;&gt;L2: Read(key)
        alt L2 Miss
            L2-&gt;&gt;L3: Read(key)
            L3--&gt;&gt;L2: Response(value)
            L2--&gt;&gt;L1: Update(key, value)
        else L2 Hit
            L2--&gt;&gt;L1: Update(key, value)
        end
    else L1 Hit
        L1--&gt;&gt;App: Return(value)
    end
</pre><p><strong>전략별 상세 정리</strong>:</p><table><thead><tr><th>전략</th><th>설명</th><th>주로 적용되는 계층</th></tr></thead><tbody><tr><td><strong>Read-Through</strong></td><td>읽기 요청 시 캐시 miss → 하위 계층에서 가져와 상위 캐시에 저장</td><td>L1 → L2, L2 → L3</td></tr><tr><td><strong>Write-Through</strong></td><td>쓰기 시 모든 계층에 동기적으로 반영 (성능 낮음, 안정성 높음)</td><td>L1 + L2 + DB</td></tr><tr><td><strong>Write-Back / Write-Behind</strong></td><td>쓰기 시 L1/L2 에만 반영하고 하위 계층에는 비동기 처리</td><td>L1 → L2 중심</td></tr><tr><td><strong>TTL + Lazy Reload</strong></td><td>TTL 만료되면 다음 읽기 시 하위 캐시로부터 최신 데이터 fetch</td><td>L1 / L2</td></tr><tr><td><strong>Cache Invalidation (Event)</strong></td><td>DB 또는 하위 캐시 변경 시 상위 캐시 무효화</td><td>Redis Pub/Sub, Kafka</td></tr><tr><td><strong>Pre-Warm Script</strong></td><td>재기동 시 L2 또는 L3 에서 주요 키를 미리 L1 에 적재</td><td>L1 초기화 단계</td></tr><tr><td><strong>Hot Key Promotion</strong></td><td>자주 사용되는 key 를 상위 계층으로 올림</td><td>L3 → L1</td></tr></tbody></table><p><strong>실무 구현 예시</strong>:</p><ul><li><p>Python (FastAPI + Redis + Caffeine-style)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15>15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># L1: In-Memory Cache (dict)</span>
</span></span><span class=line><span class=cl><span class=n>in_memory_cache</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_data</span><span class=p>(</span><span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>in_memory_cache</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>in_memory_cache</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>  <span class=c1># L1 hit</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>value</span> <span class=o>=</span> <span class=n>redis</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>  <span class=c1># L2 read</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>value</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>in_memory_cache</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>  <span class=c1># Promote to L1</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>value</span> <span class=o>=</span> <span class=n>db</span><span class=o>.</span><span class=n>fetch</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>  <span class=c1># Fallback</span>
</span></span><span class=line><span class=cl>    <span class=n>redis</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>ex</span><span class=o>=</span><span class=mi>300</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>in_memory_cache</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>value</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>Event 기반 캐시 무효화</p><ul><li>데이터 변경 → Kafka Topic → Consumer → 캐시 무효화</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2>2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3>3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4>4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Kafka consumer</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>on_data_update_event</span><span class=p>(</span><span class=n>message</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>key</span> <span class=o>=</span> <span class=n>message</span><span class=o>.</span><span class=n>key</span>
</span></span><span class=line><span class=cl>    <span class=n>redis</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>in_memory_cache</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>  <span class=c1># L1도 무효화</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><p><strong>전략 선택 가이드</strong>:</p><table><thead><tr><th>요구 조건</th><th>추천 전략</th></tr></thead><tbody><tr><td><strong>읽기 빈도 높음, 쓰기 낮음</strong></td><td>Read-through + Write-back</td></tr><tr><td><strong>일관성 매우 중요</strong></td><td>Write-through + TTL + Invalidations</td></tr><tr><td><strong>지연시간 최소화 최우선</strong></td><td>Pre-warm + L1 우선 + TTL sync</td></tr><tr><td><strong>멀티노드 동기화 필요</strong></td><td>Redis Pub/Sub, Kafka 기반 Invalidation</td></tr><tr><td><strong>스케일 아웃 구조 필요</strong></td><td>Sharding + L1-local, L2-global 구성</td></tr></tbody></table><h3 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h3><table><thead><tr><th>분류</th><th>구현 기법/패턴</th><th>정의 및 목적</th><th>특징/적용 시나리오</th></tr></thead><tbody><tr><td><strong>쓰기 정책</strong></td><td><strong>Write-Through</strong></td><td>캐시와 DB 에 동시에 쓰기 → 일관성 확보</td><td>쓰기 지연 발생, 안정성 중요 시스템에 적합예: 주문/결제 처리</td></tr><tr><td></td><td><strong>Write-Back (Behind)</strong></td><td>캐시에만 먼저 쓰고, 비동기로 DB 에 반영 (일괄 sync)</td><td>성능↑, 데이터 유실 리스크 존재예: 점수/로그 수집, 게임 기록 등 대량 쓰기 최적화</td></tr><tr><td></td><td><strong>Write-Around</strong></td><td>DB 에 직접 쓰고, 캐시는 무효화 시 자동 업데이트</td><td>미스율 증가 가능, 쓰기 적은 리소스에 적합예: 리드 중심 데이터, 로깅 등</td></tr><tr><td></td><td><strong>Refresh-Ahead</strong></td><td>TTL 도달 전 백그라운드에서 미리 갱신</td><td>캐시 미스 방지, 트래픽 급증 대비예: 인기 콘텐츠, 급상승 검색어 등</td></tr><tr><td><strong>읽기/쓰기 패턴</strong></td><td><strong>Cache-Aside (Lazy Load)</strong></td><td>요청 시 캐시 확인 → 없으면 DB 조회 후 캐시 갱신</td><td>실무에서 가장 널리 사용됨, 코드 복잡도↑예: 사용자 정보 조회, 상품 상세 등</td></tr><tr><td></td><td><strong>Read-Through</strong></td><td>캐시 시스템이 DB 에 직접 질의하고 결과 캐싱</td><td>구현 단순, 일관성 관리 자동화예: 미들웨어형 분산 캐시 서버 적용 구조</td></tr><tr><td></td><td><strong>Write-Through/Back + Aside</strong></td><td>쓰기 정책과 Aside 조합 패턴</td><td>분산 환경에서 데이터 일관성과 유연성을 모두 고려한 설계</td></tr><tr><td><strong>메모리 관리</strong></td><td><strong>Eviction (LRU, LFU, ARC)</strong></td><td>제한된 메모리 공간에서 교체 대상 결정</td><td>접근 패턴에 따라 선택 (LRU: 최근 적게 사용, LFU: 자주 안 쓰는 것 제거) 예: Redis eviction 정책</td></tr><tr><td></td><td><strong>TTL / Expiry</strong></td><td>캐시 데이터 만료를 통한 자동 제거</td><td>데이터 최신성 확보, 부하 제어예: 뉴스, 공지사항, 임시 상태 정보</td></tr><tr><td><strong>구조적 설계</strong></td><td><strong>Multi-level Cache</strong></td><td>L1 (Local), L2 (Shared), L3 (Global/CDN) 등 계층적 구성</td><td>응답 속도 최적화 및 계층별 책임 분산예: In-process + Redis + CDN</td></tr><tr><td></td><td><strong>Distributed Cache</strong></td><td>여러 노드에 걸쳐 캐시 구성 (샤딩, 복제, 리밸런싱)</td><td>확장성과 고가용성 확보예: Redis Cluster, Hazelcast, Memcached 분산 클러스터 구조</td></tr><tr><td></td><td><strong>Sharding / Partitioning</strong></td><td>키 기반으로 노드 간 데이터 분산</td><td>부하 분산, hot key 회피예: Consistent Hashing 기반 분산 키 할당</td></tr><tr><td></td><td><strong>Concurrency Control</strong></td><td>멀티스레드/멀티노드 환경에서 동시성 제어 (락, Redlock 등)</td><td>데이터 정합성 유지, stampede 방지예: Redis SETNX, singleflight 구현 등</td></tr><tr><td></td><td><strong>Pre-warming</strong></td><td>캐시 비우기 이후, 사전 로딩으로 cold-start 완화</td><td>배포 후 응답 지연 방지예: 인기 콘텐츠 사전 캐싱, 배포 후 warm-up 스크립트</td></tr><tr><td></td><td><strong>Observability 연동</strong></td><td>캐시 시스템 모니터링을 위한 지표 수집</td><td>히트율, 미스율, 레이턴시, evict count 등 시각화예: Prometheus, Grafana, StatsD 통합</td></tr><tr><td><strong>하드웨어/플랫폼</strong></td><td><strong>Direct Mapping</strong></td><td>고정 위치에 매핑 (단순, 충돌 多)</td><td>CPU L1 캐시 등단순한 구조로 성능 빠름</td></tr><tr><td></td><td><strong>Associative Mapping</strong></td><td>어떤 캐시 블록에도 매핑 가능</td><td>유연성↑, 비교 오버헤드↑CPU 고급 캐시에 사용</td></tr><tr><td></td><td><strong>Set-Associative Mapping</strong></td><td>집합 단위로 매핑 허용 (절충안)</td><td>일반적인 CPU L2/L3 캐시 구조, 하드웨어와 소프트웨어에서 병행 사용됨</td></tr></tbody></table><h4 id=요약-정리>요약 정리<a hidden class=anchor aria-hidden=true href=#요약-정리>#</a></h4><table><thead><tr><th>목적</th><th>대표 기법</th></tr></thead><tbody><tr><td><strong>일관성 보장</strong></td><td>Write-through, TTL + 이벤트 무효화, Cache Aside</td></tr><tr><td><strong>성능 최적화</strong></td><td>Write-back, Refresh-ahead, Multi-level Cache</td></tr><tr><td><strong>확장성/가용성</strong></td><td>Distributed Cache, Sharding, Replication</td></tr><tr><td><strong>운영 유연성</strong></td><td>Cache-Aside, Pre-warming, Observability</td></tr><tr><td><strong>안정성/정합성 유지</strong></td><td>Redlock, Stampede 제어, 동시성 락, TTL 관리</td></tr></tbody></table><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><table><thead><tr><th>카테고리</th><th>항목</th><th>설명</th><th>실무 시사점 및 예시</th></tr></thead><tbody><tr><td><strong>성능 향상</strong></td><td>응답 시간 단축</td><td>메모리 기반의 고속 접근으로 디스크/네트워크 대비 수십~수백 배 빠른 응답 속도 제공</td><td>Redis/In-process 캐시를 통한 페이지 렌더링 최적화</td></tr><tr><td></td><td>레이턴시 감소</td><td>I/O 병목 없이 애플리케이션 응답 지연 시간 감소</td><td>사용자 요청 평균 응답 시간 1~2ms 단축 가능</td></tr><tr><td></td><td>실시간성 지원</td><td>대기 없이 바로 제공 가능한 데이터로 실시간 서비스 요건 충족</td><td>실시간 추천, 라이브 피드, IoT 이벤트 스트리밍 등</td></tr><tr><td><strong>시스템 부하/비용 절감</strong></td><td>DB/네트워크 부하 감소</td><td>원본 데이터 소스 호출 빈도 감소로 부하 완화</td><td>DB TPS 감소 → 인프라 비용 절감, RDS 비용 최적화</td></tr><tr><td></td><td>연산 재사용</td><td>계산 비용이 큰 연산 결과를 재활용하여 리소스 사용량 최소화</td><td>ML 예측 결과, 통계 집계 결과, 복잡한 SQL 쿼리 결과 등</td></tr><tr><td></td><td>운영비 절감</td><td>I/O, DB, API 호출 빈도 감소로 클라우드 과금 기반 비용 절감</td><td>AWS RDS, Lambda, egress 트래픽 비용 최소화</td></tr><tr><td><strong>확장성 향상</strong></td><td>수평 확장 용이</td><td>분산 캐시 구조와 클러스터 확장을 통해 트래픽 증가에도 유연하게 대응 가능</td><td>Redis Cluster, CDN 노드 확장 등을 통한 무중단 확장</td></tr><tr><td></td><td>부하 분산</td><td>캐시 계층이 원본 시스템의 요청을 흡수해 전체 시스템에 부하 분산 효과</td><td>고가용성 아키텍처 설계 시 병목 지점 완화</td></tr><tr><td></td><td>글로벌 서비스 지원</td><td>CDN 및 엣지 캐시 활용 시 전 세계 사용자에게 동일한 응답 속도 제공</td><td>글로벌 콘텐츠 스트리밍, e 커머스 웹페이지 캐싱</td></tr><tr><td><strong>시스템 안정성</strong></td><td>가용성 확보</td><td>원본 시스템 장애 시에도 캐시에 저장된 데이터로 일부 서비스 지속 가능</td><td>DB 장애 시에도 조회 서비스 지속, Redis 만으로 세션 관리 유지 가능</td></tr><tr><td></td><td>트래픽 폭주 대응</td><td>일시적인 요청 증가 시 캐시 레이어로 absorb 가능</td><td>이벤트/광고 캠페인 등 대량 트래픽 대응</td></tr><tr><td></td><td>정책 유연성</td><td>TTL, Eviction, 일관성 정책 등을 통해 다양한 비즈니스 요구에 맞춘 전략 구현 가능</td><td>세션 캐시 - strong consistency, 피드 캐시 - eventual consistency 등</td></tr><tr><td><strong>사용자 경험 (UX)</strong></td><td>UX/로딩 속도 개선</td><td>빠른 응답 시간으로 사용자 대기 시간 최소화</td><td>웹페이지/모바일 앱 로딩 시간 단축 (SEO, UX 개선)</td></tr><tr><td></td><td>오프라인/로컬 지원</td><td>로컬 캐시 또는 앱 내 저장소 활용으로 네트워크 단절 시에도 일부 기능 유지</td><td>모바일 앱, 브라우저, 클라이언트 측 로컬 캐시</td></tr><tr><td></td><td>응답 일관성 안정화</td><td>동일한 요청에 대해 빠르고 일관된 응답 제공 가능</td><td>재시도 간 응답시간 안정성 확보, 사용자의 예측 가능한 경험 제공</td></tr></tbody></table><h4 id=핵심-요약>핵심 요약<a hidden class=anchor aria-hidden=true href=#핵심-요약>#</a></h4><table><thead><tr><th>관점</th><th>요약 정리</th></tr></thead><tbody><tr><td><strong>성능</strong></td><td>캐시는 고속 응답을 가능하게 하며, 실시간성과 레이턴시 저감에 결정적이다.</td></tr><tr><td><strong>비용 절감</strong></td><td>DB/API 호출 횟수 감소, 불필요 연산 제거, 클라우드 I/O 비용 절감 등 운영 효율성을 높인다.</td></tr><tr><td><strong>확장성</strong></td><td>클러스터링, CDN 연계 등으로 수평 확장이 쉬우며 대용량 트래픽에 견딜 수 있는 구조로 설계 가능하다.</td></tr><tr><td><strong>안정성</strong></td><td>원본 시스템이 실패하더라도 캐시를 통해 복구 시간을 줄이고, 안정적인 서비스 운영이 가능하다.</td></tr><tr><td><strong>UX</strong></td><td>빠른 응답과 예측 가능한 사용자 인터페이스 제공으로 직관적이고 반응성 좋은 시스템 경험을 구현한다.</td></tr></tbody></table><h4 id=도메인별-캐시-장점-정리>도메인별 캐시 장점 정리<a hidden class=anchor aria-hidden=true href=#도메인별-캐시-장점-정리>#</a></h4><table><thead><tr><th>도메인</th><th>주요 캐시 대상</th><th>주요 장점</th><th>적용 기술/패턴 예시</th></tr></thead><tbody><tr><td><strong>웹 애플리케이션</strong></td><td>정적 리소스 (HTML, JS, 이미지 등), API 응답</td><td>응답 시간 단축, 트래픽 감소, UX 향상</td><td>CDN (Cloudflare, Akamai), 브라우저 캐시, HTTP 헤더 캐시 컨트롤</td></tr><tr><td><strong>데이터베이스</strong></td><td>쿼리 결과, 데이터 조회 결과</td><td>DB 부하 분산, 비용 절감, 고속 응답, 리드 성능 개선</td><td>Redis, Memcached, DB Query Cache, Read-through</td></tr><tr><td><strong>AI/ML 시스템</strong></td><td>추론 결과, 벡터 임베딩, 모델 파라미터</td><td>연산 재사용으로 속도 향상, GPU 사용량 절감, 시스템 스루풋 향상</td><td>Vector cache (FAISS, Redis), Write-behind + TTL</td></tr><tr><td><strong>게임 서버</strong></td><td>플레이어 상태, 룸 정보, 세션</td><td>실시간성 향상, 응답속도 보장, 트래픽 흡수, 서버 부하 최소화</td><td>Redis pub/sub, Write-through, TTL + Lazy load</td></tr><tr><td><strong>소셜 미디어</strong></td><td>피드 목록, 알림, 좋아요 상태</td><td>대규모 요청 대응, 사용자 맞춤 응답 시간 단축, 데이터 일관성 유지</td><td>Cache-aside, LFU 기반 정책, 지역 기반 분산 캐시 구성</td></tr><tr><td><strong>전자상거래</strong></td><td>상품 정보, 가격/재고, 추천 리스트</td><td>페이지 로딩 속도 향상, 트래픽 급증 대응, DB 오버헤드 방지</td><td>Multi-level Cache, Pre-warming, API Gateway + 캐시 미들웨어</td></tr><tr><td><strong>IoT 플랫폼</strong></td><td>센서 스트림, 시계열 데이터</td><td>실시간 분석 처리량 향상, 백엔드 오버로드 방지</td><td>Time-series cache, Refresh-ahead, TTL</td></tr><tr><td><strong>핀테크/금융</strong></td><td>환율, 거래 내역, 계좌 정보</td><td>실시간 처리 속도 향상, 민감 데이터 무결성 유지, 트랜잭션 보조</td><td>Write-back + 암호화, Redlock, TTL + 만료 후 검증 전략</td></tr></tbody></table><h4 id=장점별-시스템-적용-사례-정리>장점별 시스템 적용 사례 정리<a hidden class=anchor aria-hidden=true href=#장점별-시스템-적용-사례-정리>#</a></h4><table><thead><tr><th>장점</th><th>적용 사례</th><th>사용 기술/패턴</th></tr></thead><tbody><tr><td><strong>성능 향상</strong></td><td>Redis 기반 캐시로 API 응답 시간 150ms → 12ms 축소</td><td>Cache-aside, LRU + TTL</td></tr><tr><td><strong>부하 분산</strong></td><td>Read-heavy 서비스에서 DB 요청량 80% 감소</td><td>Read-through, 분산 캐시 클러스터 (Redis Cluster)</td></tr><tr><td><strong>비용 절감</strong></td><td>RDS 트래픽 70% 절감 → 월간 클라우드 요금 $3,000 감소</td><td>캐시 TTL 정책 최적화, 캐시 레이어로 조회 회피</td></tr><tr><td><strong>확장성 향상</strong></td><td>쇼핑몰 트래픽 급증 대응을 위해 Redis 노드 3 개 → 9 개 확장</td><td>Consistent Hashing 기반 샤딩</td></tr><tr><td><strong>가용성 확보</strong></td><td>DB 장애 시 캐시에 남은 세션 정보로 서비스 중단 없이 지속 운영</td><td>세션 캐시 (Write-back + TTL), fallback 전략 구성</td></tr><tr><td><strong>실시간성</strong></td><td>실시간 추천/랭킹 시스템에 AI 추론 결과 캐싱</td><td>Vector Embedding 캐시, Refresh-ahead</td></tr><tr><td><strong>UX 개선</strong></td><td>페이지 로딩 시간 1.5 초 → 0.3 초 개선</td><td>CDN + 브라우저 캐시 + Pre-fetch</td></tr><tr><td><strong>오프라인 기능</strong></td><td>모바일 앱에서 네트워크 불안정 시 캐시로 상태 보존</td><td>LocalStorage, SQLite + TTL</td></tr><tr><td><strong>정책 유연성</strong></td><td>피드에선 Eventual Consistency, 결제 정보에선 Strong 적용</td><td>Cache-aside + TTL / Write-through hybrid 설계</td></tr></tbody></table><h3 id=단점과-문제점-그리고-해결방안>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안>#</a></h3><h4 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h4><table><thead><tr><th><strong>항목</strong></th><th><strong>설명</strong></th><th><strong>해결 방안</strong></th></tr></thead><tbody><tr><td>데이터 일관성 문제</td><td>캐시와 원본 간의 비동기성으로 인해 stale data(오래된 데이터) 가 발생할 수 있음</td><td>TTL 설정, Write-through, 이벤트 기반 캐시 무효화 (e.g. pub/sub) 적용</td></tr><tr><td>메모리 사용량/오버헤드</td><td>캐시는 메모리 기반이기 때문에 많은 리소스를 소비하며 비용이 증가할 수 있음</td><td>메모리 예측 기반 크기 설정, LRU/LFU/ARC 등의 eviction 정책 적용, 압축 (LZ4) 활용</td></tr><tr><td>시스템 복잡성 증가</td><td>다계층 구조, invalidation 전략, 분산 노드 구성 등으로 설계와 운영 복잡도가 높아짐</td><td>설계 표준화, 캐시 추상화 라이브러리 사용 (e.g. Caffeine, Redis Helper), 자동화 도구 도입</td></tr><tr><td>장애 발생 시 데이터 손실 가능성</td><td>Write-back 방식 사용 시 장애 시점에 캐시에만 존재했던 데이터가 유실될 수 있음</td><td>Write-through 사용, WAL(Log), Redis AOF+RDB 백업, 복제 구성 활용</td></tr><tr><td>콜드 스타트 문제</td><td>시스템 기동 직후 캐시가 비어 있어 응답 시간이 증가할 수 있음</td><td>Pre-warming, 히트율 기반 인기 키 preload, 캐시 덤프/복원 적용</td></tr><tr><td>네트워크 오버헤드</td><td>외부 캐시 서버 사용 시 네트워크 비용 및 지연 시간 발생</td><td>로컬 캐시 (L1) + 공유 캐시 (L2) 구조, 인접 리전/노드 구성</td></tr><tr><td>보안 이슈</td><td>민감 정보 캐싱 시 접근 권한/암호화 미비 시 정보 유출 가능</td><td>캐시 데이터 암호화, 키 네임스페이스 관리, RBAC 기반 접근 통제 적용</td></tr></tbody></table><h4 id=문제점>문제점<a hidden class=anchor aria-hidden=true href=#문제점>#</a></h4><table><thead><tr><th><strong>항목</strong></th><th><strong>원인</strong></th><th><strong>영향</strong></th><th><strong>탐지 및 진단</strong></th><th><strong>예방 방법</strong></th><th><strong>해결 방법 및 기법</strong></th></tr></thead><tbody><tr><td><strong>Thundering Herd</strong></td><td>TTL 만료 또는 초기화로 인해 다수의 요청이 동시에 동일한 키에 접근</td><td>DB/캐시 백엔드 부하 급증</td><td>TTL 만료 트렌드 분석, 동시 요청 로그 추적</td><td>Probabilistic TTL, Cache Locking</td><td>Mutex, Single-flight, Background Refresh</td></tr><tr><td><strong>Hot Key 문제</strong></td><td>인기 키에 트래픽 집중</td><td>특정 캐시 노드 과부하</td><td>키별 QPS 분석, 샤드 간 부하 비대칭 탐지</td><td>키 해싱 분산, 복제, 로테이션 Key 적용</td><td>Consistent Hashing, 복제본 생성, Key Sharding</td></tr><tr><td><strong>Cache Penetration</strong></td><td>존재하지 않는 데이터를 반복 요청 → 항상 캐시 미스 발생</td><td>DB 부하 증가, 캐시 효율 저하</td><td>요청 로그 분석, 반복 miss key 추적</td><td>Negative Caching, Bloom Filter 사용</td><td>null 결과 TTL 캐싱, 존재 여부 캐시</td></tr><tr><td><strong>Stale Data</strong></td><td>invalidation 누락, TTL 과다 설정로 인해 오래된 데이터 제공</td><td>사용자에게 잘못된 데이터 응답 가능</td><td>stale rate 모니터링, DB ↔ 캐시 데이터 비교</td><td>TTL + 이벤트 기반 무효화 정책</td><td>버전 기반 캐싱, 강제 갱신 트리거 (Event Triggering)</td></tr><tr><td><strong>Memory Leak</strong></td><td>만료되지 않는 캐시가 계속 쌓여 메모리 누수 발생</td><td>OOM 발생, 시스템 다운 가능성</td><td>메모리 사용량, GC 상태 모니터링</td><td>강제 TTL 설정, 주기적 청소 (Cron), 메모리 상한 설정</td><td>주기적 캐시 초기화, GC 튜닝, 메모리 알림 시스템 적용</td></tr><tr><td><strong>Cache Stampede</strong></td><td>초기 워밍업 실패 또는 TTL 동시 만료로 인해 cache miss 가 폭발적으로 발생</td><td>부하 급증, 시스템 응답 지연</td><td>TTL 만료 시점 분석, cold-start spike 추적</td><td>pre-warming, TTL 지터링 설정</td><td>요청 억제 (Mutex), Lazy Refill, Prefetch</td></tr><tr><td><strong>Race Condition</strong></td><td>동시 쓰기 발생 시 데이터 충돌 및 일관성 저하</td><td>stale write, 예기치 않은 상태</td><td>동시성 회귀 테스트, 트랜잭션 충돌 로그 분석</td><td>CAS(Compare-and-Swap), Redlock, 버전 비교</td><td>분산 락 시스템 적용 (e.g. Redis Lock), 요청 병렬 억제</td></tr><tr><td><strong>Shard Skew</strong></td><td>잘못된 해싱 또는 인기 키 집중으로 특정 샤드에 부하 집중</td><td>일부 노드 CPU/RAM 과부하</td><td>샤드별 요청 비율, 리소스 사용량 모니터링</td><td>Uniform Hash, shard weight 균형 조절</td><td>재샤딩, 키 해시 salt 적용</td></tr></tbody></table><h3 id=도전-과제>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>도전 과제</strong></th><th><strong>원인 및 영향</strong></th><th><strong>탐지/진단 방법</strong></th><th><strong>예방 전략</strong></th><th><strong>해결 기법</strong></th></tr></thead><tbody><tr><td><strong>1. 일관성</strong></td><td><strong>분산 환경의 일관성 유지</strong></td><td>여러 노드의 캐시 동기화 지연 → stale data, 사용자별 상이한 결과 발생</td><td>캐시와 원본 데이터 비교, stale rate 분석, DB ↔ Cache mismatch 로그</td><td>TTL + 이벤트 기반 무효화 패턴 적용</td><td>CRDT, 버전 기반 캐싱, 글로벌 메시지 큐 (Pub/Sub), Vector Clock, CAS 등</td></tr><tr><td></td><td><strong>글로벌/멀티리전 캐시 일관성</strong></td><td>멀티 리전에서 복제 지연 → 사용자에게 리전 간 다른 데이터 노출</td><td>cross-region stale rate, p99 레이턴시 분석</td><td>글로벌 TTL, 리전 간 트래픽 분산</td><td>Validity-based eviction, per-key timestamp 동기화</td></tr><tr><td><strong>2. 확장성</strong></td><td><strong>Hot-Key 집중 문제</strong></td><td>특정 인기 키 트래픽 집중 → 노드 오버로드, 리소스 왜곡</td><td>단일 키 QPS, 특정 샤드 과다 트래픽 모니터링</td><td>복제, 샤딩, 키 네임스페이스 설계</td><td>Consistent Hashing, Layered Replication, Local Replica, Rate Limiting</td></tr><tr><td></td><td><strong>샤딩 불균형 및 재분배</strong></td><td>데이터 분포 불균형, 재샤딩 어려움 → 일부 노드에 부하 집중</td><td>샤드별 QPS, 히트율, 메모리/CPU 부하 모니터링</td><td>균형 있는 해싱, 키 설계 최적화</td><td>가상 노드 (Virtual Nodes), 점진적 재샤딩 (Rebalancing), Hot Key Throttling</td></tr><tr><td></td><td><strong>계층 캐시 간 불일치</strong></td><td>L1-L2 간 TTL 차이, 일관성 정책 불일치 → 데이터 오염 가능성</td><td>캐시 계층별 미스율/응답 비교</td><td>계층 간 TTL 및 정책 일치화</td><td>이벤트 기반 전파, 계층 간 무효화 동기화, 중앙 무효화 서비스</td></tr><tr><td><strong>3. 성능</strong></td><td><strong>캐시 스탬피드 (Stampede)</strong></td><td>TTL 동시 만료로 대규모 요청 몰림 → DB 및 원본 부하 급증</td><td>TTL 클러스터링, 동시 miss 로그 분석</td><td>TTL 분산 설정 (Jittering), Key 별 Lock</td><td>Mutex, Single-flight, Background Preload, Probabilistic TTL</td></tr><tr><td></td><td><strong>Latency 변동성</strong></td><td>GC Pause, 네트워크 딜레이 등 → 불안정한 응답시간</td><td>p99/p50 응답시간 추적, GC 이벤트 로그</td><td>지역 캐시 사용, GC 튜닝, 비동기 처리 적용</td><td>I/O 백프레셔, Async 처리, 긴급 Failover</td></tr><tr><td></td><td><strong>콜드 스타트 초기 성능 저하</strong></td><td>초기 기동 시 캐시가 비어 있어 미스율 급증</td><td>기동 시 초기 히트율, Miss Rate 추적</td><td>인기 키 Preloading, Warm-up 스크립트 자동화</td><td>캐시 덤프 복원, 예열 전략, 서비스 시작 전 병렬 로딩 적용</td></tr><tr><td><strong>4. 자원/비용</strong></td><td><strong>메모리 한계 및 비용 문제</strong></td><td>고성능 RAM 기반 → 비용 증가, 대용량 데이터 수용 어려움</td><td>메모리 사용률, GC 로그, 인스턴스 비용 분석</td><td>오프힙 저장소, 계층형 캐시 (메모리 + 디스크)</td><td>압축 (LZ4), 자동 스케일링, Spot 인스턴스 활용, Hybrid Cache 구성</td></tr><tr><td></td><td><strong>메모리 누수 / 오염</strong></td><td>만료 누락, 잘못된 데이터 캐시 → 메모리 낭비, 축출 실패</td><td>만료 누락 분석, 메모리 사용량 지속 증가 추적</td><td>TTL 설정, LFU/LRU 기반 정책</td><td>강제 GC, 캐시 재시작, 캐시 청소 스케줄 설정</td></tr><tr><td><strong>5. 보안</strong></td><td><strong>캐시 포이즈닝/Injection</strong></td><td>외부 조작된 값이 캐시에 저장 → 잘못된 응답 반환 가능</td><td>비정상 값 응답, 서명 검증 실패 로그 분석</td><td>캐시 키 서명, 정규화, 입력 검증 적용</td><td>TTL 제어, 암호화 키 적용, ACL + RBAC 기반 접근 제어</td></tr><tr><td></td><td><strong>민감 데이터 보호 및 컴플라이언스</strong></td><td>개인정보 등 민감 데이터 캐시 저장 시 보안/규제 위반</td><td>민감 키 캐시 모니터링, GDPR 감사 로그</td><td>캐시 암호화, 접근 제어 정책 적용</td><td>데이터 마스킹, Tokenization, Selective Caching</td></tr><tr><td><strong>6. 운영/모니터링</strong></td><td><strong>관측성 부족</strong></td><td>캐시 미스 원인, Eviction 트리거 등 가시성 부족 → 문제 탐지 지연</td><td>Hit/Miss Ratio, Eviction 로그 분석</td><td>Prometheus, APM, Tracing 연동</td><td>Full Request Tracing, Tag 기반 캐시 추적</td></tr><tr><td></td><td><strong>운영 복잡도 및 자동화 부족</strong></td><td>캐시 정책, 샤딩, 무효화 등 수동 조작 시 위험 증가</td><td>정책 변경 이력, 운영 실패 로그 분석</td><td>정책 자동화 툴 도입, 모니터링 기반 오토튜닝 적용</td><td>A/B 테스트 기반 정책 릴리스, 캐시 Policy as Code (e.g., Redis config sync)</td></tr></tbody></table><h3 id=분류-기준에-따른-종류-및-유형>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형>#</a></h3><table><thead><tr><th>분류 기준</th><th>유형</th><th>설명</th><th>대표 예시 / 고려 사항</th></tr></thead><tbody><tr><td><strong>1. 위치 (Location)</strong></td><td>- CPU 캐시<br>- 애플리케이션 캐시<br>- 데이터베이스 캐시<br>- 브라우저 캐시<br>- CDN/프록시 캐시</td><td>데이터를 저장하는 계층 또는 위치 기반 분류</td><td>L1~L3 캐시, Redis, ORM 캐시, Edge CDN</td></tr><tr><td><strong>2. 범위 (Scope)</strong></td><td>- 로컬 캐시 (Local)<br>- 분산 캐시 (Distributed)<br>- 글로벌 캐시 (Global)</td><td>캐시가 적용되는 범위 또는 스코프</td><td>In-Process / Redis Cluster / Cloud CDN</td></tr><tr><td><strong>3. 저장 방식 (Storage Medium)</strong></td><td>- 인메모리 (Memory)<br>- 디스크 기반 (Disk)<br>- 계층형 캐시 (Multi-level)</td><td>데이터 저장소의 물리적 특성 기준</td><td>Redis, Memcached, SSD Page Cache</td></tr><tr><td><strong>4. 배포 방식 (Deployment)</strong></td><td>- In-Process<br>- Sidecar / Proxy<br>- Remote Cache</td><td>애플리케이션과 캐시 간의 통합 방식</td><td>FastAPI 내부 캐시 / Redis / Envoy</td></tr><tr><td><strong>5. 용도 (Workload Type)</strong></td><td>- 읽기 전용 (Read-Only)<br>- 쓰기 전용 (Write-Only)<br>- 읽기 - 쓰기 (Read-Write)</td><td>주로 캐시가 읽기/쓰기 중 어떤 방향으로 동작하는지</td><td>계산 결과 캐시, Write Buffer, 세션 캐시</td></tr><tr><td><strong>6. 일관성 전략 (Consistency)</strong></td><td>- TTL 기반<br>- 이벤트 기반 Invalidation<br>- 수동 명시적 제거</td><td>원본 데이터 변경과 캐시 간의 정합성 유지 방식</td><td>TTL + Cache Invalidate API</td></tr><tr><td><strong>7. 쓰기 정책 (Write Policy)</strong></td><td>- Write-Through<br>- Write-Back<br>- Write-Around</td><td>쓰기 시점의 동기화 방식 (일관성과 지연 시간 간의 트레이드오프 포함)</td><td>캐시 -DB 동기화 여부, 지연 반영 여부</td></tr><tr><td><strong>8. 접근 전략 (Access Strategy)</strong></td><td>- Cache-Aside<br>- Read-Through<br>- Write-Through</td><td>애플리케이션이 캐시를 직접 접근하는지, 프록시가 자동으로 접근하는지</td><td>Lazy Load / API Cache Proxy</td></tr><tr><td><strong>9. 교체 정책 (Eviction Policy)</strong></td><td>- LRU<br>- LFU<br>- FIFO<br>- ARC<br>- Random</td><td>저장소가 가득 찼을 때 어떤 데이터를 우선 제거할지 결정하는 정책</td><td>Redis eviction policy, Java Caffeine 설정</td></tr><tr><td><strong>10. 매핑 방식 (Mapping Policy)</strong></td><td>- Direct Mapped<br>- Fully Associative<br>- Set Associative</td><td>하드웨어 캐시에서 블록을 어느 위치에 매핑할지 결정하는 방식</td><td>CPU 캐시 알고리즘, 성능 - 충돌 트레이드오프 분석 필요</td></tr><tr><td><strong>11. 데이터 유형 (Content Type)</strong></td><td>- 정적 리소스 (Static)<br>- 동적 결과 (Dynamic)<br>- 코드/객체 데이터</td><td>캐시 대상이 어떤 종류의 데이터인지에 따른 분류</td><td>이미지/JS/CSS / API 응답 / 계산 결과 등</td></tr><tr><td><strong>12. 계층 구조 (Hierarchy)</strong></td><td>- L1 / L2 / L3<br>- Multi-level<br>- CDN/에지 계층</td><td>접근 속도/용량/공유 범위 등 계층별 차이에 따른 구조적 분류</td><td>CPU / CDN / 앱 계층</td></tr><tr><td><strong>13. 구현 방식 (Implementation)</strong></td><td>- 하드웨어 캐시<br>- 소프트웨어 캐시<br>- 미들웨어 캐시</td><td>구현된 기술 스택 또는 주체에 따른 분류</td><td>CPU SRAM / Redis, Memcached / Varnish</td></tr><tr><td><strong>14. 관리 방식 (관리 주체)</strong></td><td>- 수동 캐시<br>- 자동 캐시</td><td>캐시 데이터 갱신 및 유지보수를 사람이 직접 관리하는지 여부</td><td>Cache-aside (수동), TTL 정책 (자동)</td></tr></tbody></table><h4 id=교체-정책-eviction-policy-비교>교체 정책 (Eviction Policy) 비교<a hidden class=anchor aria-hidden=true href=#교체-정책-eviction-policy-비교>#</a></h4><table><thead><tr><th>기준</th><th>LRU (Least Recently Used)</th><th>LFU (Least Frequently Used)</th><th>ARC (Adaptive Replacement Cache)</th></tr></thead><tbody><tr><td>기준</td><td>가장 오래 사용되지 않음</td><td>사용 횟수가 가장 적음</td><td>LRU 와 LFU 의 조합</td></tr><tr><td>장점</td><td>간단하고 직관적</td><td>핫 데이터 유지에 적합</td><td>동적으로 패턴에 맞게 적응</td></tr><tr><td>단점</td><td>핫 데이터 누락 가능</td><td>cold-start 문제, 복잡도</td><td>구현 복잡도 높음</td></tr><tr><td>실무 예</td><td>Redis 기본 정책</td><td>Cloudflare 정책 일부</td><td>고성능 스토리지 계층에서 활용</td></tr></tbody></table><h4 id=접근-전략-access-strategy-비교>접근 전략 (Access Strategy) 비교<a hidden class=anchor aria-hidden=true href=#접근-전략-access-strategy-비교>#</a></h4><table><thead><tr><th>패턴</th><th>설명</th><th>장점</th><th>단점</th></tr></thead><tbody><tr><td>Cache-aside</td><td>필요 시 직접 조회 및 저장</td><td>유연성 높음</td><td>일관성 관리 직접 필요</td></tr><tr><td>Read-through</td><td>읽기 시 자동 캐시 조회</td><td>추상화</td><td>미스 처리 늦을 수 있음</td></tr><tr><td>Write-through</td><td>쓰기 시 동시에 캐시와 DB 반영</td><td>일관성 우수</td><td>쓰기 성능 저하 가능</td></tr><tr><td>Write-back</td><td>캐시에만 기록, 이후 비동기 반영</td><td>빠른 쓰기</td><td>장애 시 데이터 손실 위험</td></tr></tbody></table><h4 id=주요-캐시-시스템-비교>주요 캐시 시스템 비교<a hidden class=anchor aria-hidden=true href=#주요-캐시-시스템-비교>#</a></h4><table><thead><tr><th>구분</th><th>Redis</th><th>Memcached</th><th>Ehcache</th><th>Caffeine</th><th>Varnish Cache</th><th>CDN (Cloudflare 등)</th></tr></thead><tbody><tr><td><strong>캐시 위치</strong></td><td>In-memory (Distributed 가능)</td><td>In-memory</td><td>In-memory (JVM)</td><td>In-memory (JVM)</td><td>Reverse Proxy</td><td>Edge Network</td></tr><tr><td><strong>언어/플랫폼</strong></td><td>C 로 구현 (다양한 언어 클라이언트 지원)</td><td>C 로 구현</td><td>Java</td><td>Java</td><td>C</td><td>다양한 플랫폼 (서비스 기반)</td></tr><tr><td><strong>기본 데이터 구조</strong></td><td>다양한 구조 (List, Set, Hash, SortedSet 등)</td><td>단순 Key-Value</td><td>Java Object</td><td>Java Object</td><td>HTTP 요청/응답</td><td>HTTP 콘텐츠</td></tr><tr><td><strong>Persistence</strong></td><td>AOF/RDB 스냅샷 지원 (옵션)</td><td>❌ 없음 (휘발성)</td><td>디스크 저장 가능</td><td>디스크 저장 ❌</td><td>❌ 없음</td><td>글로벌 저장소 분산</td></tr><tr><td><strong>TTL 지원</strong></td><td>✅ 지원</td><td>✅ 지원</td><td>✅ 지원</td><td>✅ 지원</td><td>✅ 지원</td><td>✅ 지원</td></tr><tr><td><strong>Eviction 정책</strong></td><td>LRU, LFU, TTL 등 다양</td><td>LRU, TTL 위주</td><td>LRU/TTL 설정 가능</td><td>W-TinyLFU (고급 알고리즘)</td><td>LRU / TTL</td><td>TTL 기반</td></tr><tr><td><strong>스레드 지원</strong></td><td>싱글 스레드 (I/O 멀티플렉싱)</td><td>멀티스레드</td><td>멀티스레드</td><td>멀티스레드</td><td>멀티스레드</td><td>네트워크 기반</td></tr><tr><td><strong>확장성</strong></td><td>클러스터 모드 지원 (Sharding 등)</td><td>수동 샤딩 필요</td><td>로컬 JVM 캐시</td><td>로컬 JVM 캐시</td><td>Edge 캐시로 확장 가능</td><td>전 세계 PoP (무제한 확장)</td></tr><tr><td><strong>활용 사례</strong></td><td>세션 캐싱, 랭킹, Pub/Sub, 분산락</td><td>DB 결과 캐싱, 간단한 세션</td><td>Java 웹 앱 로컬 캐시</td><td>고성능 Java 로컬 캐시</td><td>웹페이지, 이미지 캐시</td><td>정적 콘텐츠, API 응답 캐싱</td></tr><tr><td><strong>장점</strong></td><td>데이터 구조 풍부, 고급 기능 많음</td><td>초경량, 빠름, 간단함</td><td>JVM 통합 용이</td><td>예측 기반 알고리즘, 고성능</td><td>HTTP 에 최적화</td><td>글로벌 응답 속도 향상</td></tr><tr><td><strong>단점</strong></td><td>메모리 비용 높음, 단일 스레드 제한</td><td>데이터 구조 제한, 확장성 낮음</td><td>JVM 종속, 분산 어려움</td><td>JVM 기반, 분산 X</td><td>캐시 불일치 가능성</td><td>실시간 데이터 캐싱 어려움</td></tr></tbody></table><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>고려 항목</strong></th><th><strong>설명</strong></th><th><strong>권장 사항</strong></th></tr></thead><tbody><tr><td><strong>1. 설계 전략</strong></td><td>워크로드 분석</td><td>읽기/쓰기 비율, 데이터 접근 패턴 기반으로 캐시 적합성 판단</td><td>80:20 법칙 적용 (자주 접근되는 상위 20% 데이터 우선 캐싱)</td></tr><tr><td></td><td>캐시 계층 구조</td><td>L1(in-proc), L2(shared), CDN 등을 적절히 조합</td><td>최대 3~4 계층으로 구성하며 과도한 중첩은 피함</td></tr><tr><td></td><td>캐시 대상 선정</td><td>어떤 데이터를 캐싱할지 판단</td><td>자주 조회되고 변경이 적은 정적/읽기 중심 데이터에 우선 적용</td></tr><tr><td></td><td>캐시 키 설계 전략</td><td>키 네임스페이스, 충돌 방지, 확장성 고려</td><td>prefix/suffix 명명규칙 + namespace 적용, 사용자/비즈니스 분리</td></tr><tr><td><strong>2. 일관성 관리</strong></td><td>캐시 무효화 전략</td><td>원본 데이터 변경 시 stale 방지</td><td>TTL + 이벤트 기반 invalidation 조합, pub/sub, write-through 적용</td></tr><tr><td></td><td>TTL 설계</td><td>캐시 만료 시간 설정</td><td>데이터 유형별로 TTL 차등 적용 (예: 빈번 변경 데이터는 짧게, 정적 데이터는 길게)</td></tr><tr><td></td><td>분산 캐시 일관성</td><td>노드 간 최신 데이터 유지</td><td>Consistent Hashing + CAS(Compare and Swap), CRDT 등 활용</td></tr><tr><td><strong>3. 성능 최적화</strong></td><td>히트율 관리</td><td>캐시의 효율성 판단 지표 (Hit / Miss Ratio)</td><td>목표 히트율 70% 이상 유지, Prometheus + Grafana 기반 실시간 모니터링</td></tr><tr><td></td><td>메모리 관리</td><td>캐시 메모리 사용량 및 축출 정책 고려</td><td>LRU, LFU, ARC 등 접근 패턴 기반 정책 선택</td></tr><tr><td></td><td>Cache Warming</td><td>cold-start 시 초기 응답 속도 저하 완화</td><td>pre-warming 스크립트 활용 + 배포 후 인기 키 로딩 자동화</td></tr><tr><td></td><td>캐시 미스 억제</td><td>미스 폭증 방지 (캐시 초기화, 동시 접근 등)</td><td>single-flight, 락, probabilistic TTL 적용</td></tr><tr><td><strong>4. 확장성과 안정성</strong></td><td>샤딩 및 확장 전략</td><td>Hot key 집중, 노드 확장 시 재분배 이슈 대응</td><td>Consistent Hashing, Redis Cluster, Auto-Sharding 적용</td></tr><tr><td></td><td>장애 복구 및 Fallback</td><td>캐시 장애 시 전체 시스템 영향 최소화</td><td>캐시 미사용 fallback 경로 구성, local cache + stale 응답 허용</td></tr><tr><td></td><td>스케일링 및 HA 구성</td><td>트래픽 증가, 노드 장애에 유연하게 대응</td><td>Master-Slave 구조, 다중 노드 구성, Auto Scaling 적용</td></tr><tr><td><strong>5. 운영 및 모니터링</strong></td><td>실시간 모니터링 체계</td><td>히트율, TTL 만료, 메모리, eviction 비율 등 지표 수집</td><td>Prometheus + Grafana/ELK Stack 기반 시각화 + Alert 연동</td></tr><tr><td></td><td>설정 유지보수</td><td>정책 변경, 캐시 갱신 주기, 장애 시나리오 지속 점검</td><td>월 단위 리뷰, 지표 기반 튜닝, 실시간 로그 수집</td></tr><tr><td></td><td>테스트 및 롤백 전략</td><td>캐시 정책 변경 시 성능 저하/문제 발생 가능</td><td>Canary/A-B 테스트 기반 적용 후 단계적 릴리스</td></tr><tr><td><strong>6. 보안 및 컴플라이언스</strong></td><td>캐시 보안 관리</td><td>민감 데이터의 암호화 및 접근 통제</td><td>RBAC 적용, 키 서명, TLS 통신 적용, URL 정규화</td></tr><tr><td></td><td>캐시 Poisoning 대응</td><td>공격자가 조작된 데이터를 캐시에 주입</td><td>input sanitize, 키 검증, 제한된 TTL 적용</td></tr><tr><td></td><td>개인정보 보호</td><td>GDPR 등 법적 규제 대응</td><td>민감정보 캐싱 금지 또는 암호화, 별도 보존 정책 적용</td></tr></tbody></table><h4 id=실무-시스템-설계에서의-cache-통합-전략>실무 시스템 설계에서의 Cache 통합 전략<a hidden class=anchor aria-hidden=true href=#실무-시스템-설계에서의-cache-통합-전략>#</a></h4><p>복잡한 분산 시스템에서는 캐시를 단순히 " 속도 향상 " 이 아니라 <strong>설계 전략적 요소</strong>로 활용해야 한다.</p><p><strong>통합 패턴</strong>:</p><table><thead><tr><th>패턴</th><th>설명</th><th>적용 예시</th></tr></thead><tbody><tr><td><strong>Read‑through Cache</strong></td><td>요청 시 캐시 miss → DB 조회 후 자동 저장</td><td>Redis <code>@Cacheable</code> 방식</td></tr><tr><td><strong>Write‑through Cache</strong></td><td>DB 에 write 시 캐시에도 동시에 저장</td><td>은행 거래 내역, 미션 크리티컬 데이터</td></tr><tr><td><strong>Write‑behind (back)</strong></td><td>캐시에만 먼저 쓰고 DB 에 비동기 반영</td><td>고빈도 업데이트, 임시 저장용</td></tr><tr><td><strong>Lazy-loading</strong></td><td>필요 시에만 캐시 초기화</td><td>초기 로딩 부하 방지</td></tr><tr><td><strong>Tiered Cache</strong></td><td>L1 (local) → L2 (remote) → Origin</td><td>CDN + App Cache 조합</td></tr></tbody></table><p><strong>실제 설계 시 고려되는 Cache 관련 의사 결정 포인트</strong>:</p><table><thead><tr><th>의사결정 항목</th><th>선택 기준/질문</th></tr></thead><tbody><tr><td><strong>캐시 저장 위치</strong></td><td>Local? Remote? CDN? Sidecar?</td></tr><tr><td><strong>일관성 유지 필요 여부</strong></td><td>Strong? Eventual? TTL 로 충분한가?</td></tr><tr><td><strong>캐시 만료 시점 관리 방식</strong></td><td>TTL 기반? 수동 invalidation? 이벤트 기반?</td></tr><tr><td><strong>데이터 크기와 변동성</strong></td><td>크고 자주 변하는가? 작고 정적인가?</td></tr><tr><td><strong>캐시 실패 시 대응 방법</strong></td><td>Fallback 은 필요한가? Circuit Breaker 연계?</td></tr></tbody></table><h4 id=캐시-예열-cache-warming-전략>캐시 예열 (Cache Warming) 전략<a hidden class=anchor aria-hidden=true href=#캐시-예열-cache-warming-전략>#</a></h4><p><strong>Cache Warming</strong>은 시스템이 <strong>운영 시작 직후 또는 캐시 초기화 이후</strong>에 발생하는 <strong>캐시 미스를 줄이기 위해, 자주 사용될 데이터를 미리 캐시에 적재 (preload) 하는 과정</strong>을 말한다. 이를 통해 <strong>첫 사용자 요청의 레이턴시를 줄이고</strong>, <strong>서비스 안정성을 높일 수 있다</strong>.</p><h5 id=왜-필요한가>왜 필요한가?<a hidden class=anchor aria-hidden=true href=#왜-필요한가>#</a></h5><table><thead><tr><th>목적</th><th>설명</th></tr></thead><tbody><tr><td>캐시 미스 방지</td><td>초기 요청에서 데이터가 없으면 캐시 미스로 인해 DB 또는 원본 서버에 부하 유발</td></tr><tr><td>레이턴시 최소화</td><td>초기 사용자에게도 빠른 응답 제공 (예: 첫 페이지 로딩 속도 향상)</td></tr><tr><td>장애 복구 후 안정성 보장</td><td>서버 재시작, 캐시 서버 장애 복구 이후 빠른 정상화</td></tr><tr><td>트래픽 폭주 대비</td><td>대규모 이벤트나 배포 이후를 대비해 인기 콘텐츠 미리 적재</td></tr></tbody></table><hr><p><strong>구현 방법</strong>:</p><ol><li><strong>예측 기반 예열</strong>: 과거 데이터 패턴 분석을 통한 사전 로딩</li><li><strong>스케줄 기반 예열</strong>: 정해진 시간에 주기적으로 데이터 갱신</li><li><strong>이벤트 기반 예열</strong>: 특정 이벤트 발생 시 관련 데이터 로딩</li></ol><h5 id=구현-방법-분류>구현 방법 분류<a hidden class=anchor aria-hidden=true href=#구현-방법-분류>#</a></h5><table><thead><tr><th>구현 방식</th><th>설명</th><th>적용 대상</th><th>장점</th><th>단점</th></tr></thead><tbody><tr><td>1. <strong>시작 시 Preloading (App Init)</strong></td><td>애플리케이션 시작 시 미리 지정된 데이터를 캐시에 적재</td><td>앱 내부 / Redis / Local Cache</td><td>단순하고 제어 쉬움</td><td>기동 시간 증가 가능</td></tr><tr><td>2. <strong>Warm-up API 호출 (HTTP Trigger)</strong></td><td>특정 엔드포인트 호출로 캐시 대상 데이터 적재</td><td>웹 서버 / API 서버 / CDN</td><td>동적 처리 가능</td><td>외부 호출 의존</td></tr><tr><td>3. <strong>Scheduler 기반 주기적 워밍 (Cron Job)</strong></td><td>인기 데이터를 주기적으로 분석 후 캐시에 적재</td><td>Redis, DB 결과, 검색결과 등</td><td>운영 중에도 활용 가능</td><td>과적재 위험</td></tr><tr><td>4. <strong>CDN Prefetch 및 Preload</strong></td><td>주요 콘텐츠 URL 을 CDN 에 사전 요청</td><td>Cloudflare, Akamai 등</td><td>사용자 위치 기준 응답 향상</td><td>네트워크 비용 증가</td></tr><tr><td>5. <strong>배포 후 자동화 스크립트 (CI/CD Hook)</strong></td><td>CI/CD 후 post-deploy 단계에서 캐시 워밍 수행</td><td>Redis, NGINX, CDN 등</td><td>DevOps 자동화와 연계</td><td>구현 복잡도 증가</td></tr><tr><td>6. <strong>AI/ML 기반 인기 데이터 예측 로딩</strong></td><td>패턴 분석 기반으로 사용자 요청 예측 → 사전 캐시</td><td>추천 서비스, 뉴스피드 등</td><td>지능형 워밍 가능</td><td>ML 필요, 과잉 로딩 리스크</td></tr></tbody></table><h5 id=구성-요소별-구현-방식>구성 요소별 구현 방식<a hidden class=anchor aria-hidden=true href=#구성-요소별-구현-방식>#</a></h5><ul><li><p>Redis 기반 Cache Warming<br>Python 예시</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>redis</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>myapp.models</span> <span class=kn>import</span> <span class=n>get_top_articles</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>r</span> <span class=o>=</span> <span class=n>redis</span><span class=o>.</span><span class=n>Redis</span><span class=p>(</span><span class=n>host</span><span class=o>=</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>6379</span><span class=p>,</span> <span class=n>db</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>warmup_redis_cache</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>articles</span> <span class=o>=</span> <span class=n>get_top_articles</span><span class=p>(</span><span class=n>limit</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>article</span> <span class=ow>in</span> <span class=n>articles</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;article:</span><span class=si>{</span><span class=n>article</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>r</span><span class=o>.</span><span class=n>setex</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=mi>3600</span><span class=p>,</span> <span class=n>article</span><span class=o>.</span><span class=n>to_json</span><span class=p>())</span>  <span class=c1># TTL 1시간</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>적용 위치</strong>: 애플리케이션 init 또는 배포 후 실행 스크립트에 포함</li><li><strong>장점</strong>: 제어 용이, TTL 설정 가능</li><li><strong>주의</strong>: 너무 많은 키를 로딩하지 않도록 제한 필요</li></ul></li><li><p>HTTP 기반 Warm-up API Trigger</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1>1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 예: FastAPI로 만든 Warm-up API</span>
</span></span><span class=line><span class=cl>GET /api/cache/warmup/popular-products
</span></span></code></pre></td></tr></table></div></div><ul><li>사용: 내부 배포 스크립트나 LoadBalancer 헬스체크 훅에서 호출</li><li>예: CDN 에 <code>/landing-page</code> URL 10 회 요청하여 미리 캐시</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X GET https://myapi.com/api/cache/warmup/top-products
</span></span></code></pre></td></tr></table></div></div></li><li><p>스케줄링 기반 캐시 워밍 (Crontab)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1>1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 매일 오전 3시에 인기 콘텐츠를 Redis에 캐싱</span>
</span></span><span class=line><span class=cl><span class=m>0</span> <span class=m>3</span> * * * /usr/bin/python3 /app/scripts/cache_warmup.py &gt;&gt; /var/log/warmup.log
</span></span></code></pre></td></tr></table></div></div><ul><li>실시간 인기 콘텐츠 분석 → 사전 로딩</li><li>AI 기반으로 상위 5% 콘텐츠만 캐시 가능</li></ul></li><li><p>CDN Pre-Warming</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1>1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2>2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3>3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Cloudflare API 예시 (pseudo)</span>
</span></span><span class=line><span class=cl>curl -X POST https://api.cloudflare.com/client/v4/zones/:zone_id/prefetch <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -H <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$API_TOKEN</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{ &#34;urls&#34;: [&#34;https://cdn.example.com/img1.jpg&#34;, &#34;https://cdn.example.com/landing.html&#34;] }&#39;</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>정적 리소스를 CDN 엣지 서버에 미리 분산</li><li>사용자와 가까운 PoP(Point of Presence) 에 저장되어 초기 응답 개선</li></ul></li><li><p>CI/CD 파이프라인 연동</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1>1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2>2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3>3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4>4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5>5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6>6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7>7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8>8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># GitHub Actions 예시</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Warmup Redis Cache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>python3 scripts/warmup.py</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Preload Varnish Cache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run: curl https://example.com/home --header &#39;x-refresh</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=l>&#39;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>배포 완료 직후 트래픽을 받기 전 주요 캐시 로딩</li><li>Varnish, Redis, CDN 과 통합 가능</li></ul></li></ul><h5 id=캐시-워밍-시-고려사항>캐시 워밍 시 고려사항<a hidden class=anchor aria-hidden=true href=#캐시-워밍-시-고려사항>#</a></h5><table><thead><tr><th>항목</th><th>고려 내용</th></tr></thead><tbody><tr><td>캐시 용량</td><td>과도한 로딩은 다른 중요한 캐시 데이터를 밀어낼 수 있음</td></tr><tr><td>TTL 정책</td><td>stale 데이터 유지 방지용 TTL 설정 필수</td></tr><tr><td>우선순위 선정</td><td>모든 데이터가 아닌 상위 5~10% 인기 데이터만 캐싱</td></tr><tr><td>성능 부하</td><td>워밍 과정 자체가 백엔드에 부담 줄 수 있음 (rate limit 필요)</td></tr><tr><td>데이터 신선도</td><td>워밍 시점 이후 변경된 데이터와 불일치 위험 → 무효화 전략 필요</td></tr></tbody></table><h5 id=작동-방식>작동 방식<a hidden class=anchor aria-hidden=true href=#작동-방식>#</a></h5><h6 id=preloading>Preloading<a hidden class=anchor aria-hidden=true href=#preloading>#</a></h6><ul><li>자주 조회되는 데이터 (Top-N 인기 상품, 게시글 등) 를 운영 전 <strong>사전 로딩</strong></li><li>예: 시스템 시작 시 <code>product:top10</code> 을 Redis 에 적재</li></ul><h6 id=lazy-vs-eager-loading>Lazy Vs Eager Loading<a hidden class=anchor aria-hidden=true href=#lazy-vs-eager-loading>#</a></h6><table><thead><tr><th>방식</th><th>설명</th><th>특징</th></tr></thead><tbody><tr><td><strong>Lazy</strong></td><td>요청 시점에 캐시 미스가 발생하면 백엔드에서 데이터 적재</td><td>자연스러운 방식이나 첫 요청은 느림</td></tr><tr><td><strong>Eager</strong></td><td>시작 시점 또는 정기적으로 데이터를 캐시에 미리 적재</td><td>빠르지만 유지 비용과 오염 리스크 존재</td></tr></tbody></table><h6 id=warm-up-script--scheduler>Warm-up Script / Scheduler<a hidden class=anchor aria-hidden=true href=#warm-up-script--scheduler>#</a></h6><ul><li>특정 cron job 또는 API call 을 통해 <strong>warm-up 대상 Key 를 순회하며 캐싱</strong></li><li>Redis, CDN, DB 캐시 모두 적용 가능</li></ul><h5 id=실전-적용-사례>실전 적용 사례<a hidden class=anchor aria-hidden=true href=#실전-적용-사례>#</a></h5><table><thead><tr><th>사용처</th><th>설명</th></tr></thead><tbody><tr><td>Redis</td><td>배포 직후 인기 게시물 리스트를 미리 캐싱 (TTL 설정 포함)</td></tr><tr><td>CDN (Cloudflare)</td><td>트래픽이 많을 페이지를 prefetch 하여 PoP 서버에 미리 캐싱</td></tr><tr><td>Web Server + Reverse Proxy</td><td>NGINX 에서 미리 health check + cache pre-load 스크립트 실행</td></tr><tr><td>GraphQL/REST API</td><td>프론트엔드에서 초기 화면에 필요한 쿼리를 백그라운드 호출하여 서버 warm-up</td></tr></tbody></table><h5 id=cache-warming-전략-예시>Cache Warming 전략 예시<a hidden class=anchor aria-hidden=true href=#cache-warming-전략-예시>#</a></h5><p>Redis 기반, Python</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1> 1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2> 2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3> 3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4> 4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5> 5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6> 6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7> 7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8> 8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9> 9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10>10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11>11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>redis</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>myapp.models</span> <span class=kn>import</span> <span class=n>get_top_products</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>r</span> <span class=o>=</span> <span class=n>redis</span><span class=o>.</span><span class=n>Redis</span><span class=p>(</span><span class=n>host</span><span class=o>=</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>6379</span><span class=p>,</span> <span class=n>db</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>warmup_cache</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>top_products</span> <span class=o>=</span> <span class=n>get_top_products</span><span class=p>(</span><span class=n>limit</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>  <span class=c1># DB에서 인기 상품 조회</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>product</span> <span class=ow>in</span> <span class=n>top_products</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;product:</span><span class=si>{</span><span class=n>product</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>r</span><span class=o>.</span><span class=n>setex</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=mi>3600</span><span class=p>,</span> <span class=n>product</span><span class=o>.</span><span class=n>to_json</span><span class=p>())</span>  <span class=c1># 1시간 TTL</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 배포 이후 혹은 정기 warm-up 시 실행</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=cache-warming-vs-일반-캐시-처리-비교>Cache Warming vs. 일반 캐시 처리 비교<a hidden class=anchor aria-hidden=true href=#cache-warming-vs-일반-캐시-처리-비교>#</a></h5><table><thead><tr><th>항목</th><th>일반 캐시</th><th>Cache Warming</th></tr></thead><tbody><tr><td>캐싱 시점</td><td>사용자 요청 시점 (Lazy)</td><td>사전 적재 (Eager)</td></tr><tr><td>첫 요청 속도</td><td>느릴 수 있음</td><td>빠름</td></tr><tr><td>데이터 정확도</td><td>항상 최신</td><td>TTL 설정 필요</td></tr><tr><td>리소스 부담</td><td>분산됨</td><td>집중됨 (warm-up 순간)</td></tr></tbody></table><h4 id=성능-벤치마킹-가이드><strong>성능 벤치마킹 가이드</strong><a hidden class=anchor aria-hidden=true href=#성능-벤치마킹-가이드>#</a></h4><p><strong>측정 지표:</strong></p><ul><li>히트율 (Hit Ratio): 85% 이상 목표</li><li>평균 응답시간: &lt;10ms (메모리 캐시)</li><li>99 퍼센타일 레이턴시: &lt;50ms</li><li>처리량: 초당 요청 수 (RPS)</li><li>메모리 효율성: 바이트당 히트 수</li></ul><p><strong>벤치마킹 도구:</strong></p><ul><li>Redis-benchmark: Redis 성능 측정</li><li>Apache JMeter: 웹 캐시 성능 테스트</li><li>Memtier-benchmark: 분산 캐시 벤치마킹</li><li>사용자 정의 스크립트: 실제 워크로드 시뮬레이션</li></ul><h3 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>최적화 대상</th><th>핵심 고려사항</th><th>주의사항 또는 리스크</th><th>권장 사항 및 전략</th></tr></thead><tbody><tr><td><strong>Eviction 정책</strong></td><td>LRU / LFU / ARC / Hybrid 선택</td><td>LRU 는 Hot key, LFU 는 저빈도 데이터에 약함</td><td>워크로드 기반 정책 튜닝, ARC 또는 LFU+TTL 하이브리드 사용</td></tr><tr><td><strong>TTL 설정</strong></td><td>TTL 과다/과소 시 캐시 정합성/성능 저하</td><td>TTL 짧으면 미스 증가, 길면 stale 데이터 유지</td><td>리소스 특성별 TTL 자동 조정 시스템 도입, DB 변경 이벤트 기반 TTL 동기화</td></tr><tr><td><strong>Sharding 전략</strong></td><td>Consistent Hashing 기반 분산</td><td>특정 해시 충돌, 키 핫스팟 발생 가능</td><td>주기적 rebalance, key hotness 분석 기반 샤딩 리디자인</td></tr><tr><td><strong>Key 설계</strong></td><td>Hot key, Big key 관리, Prefix 전략</td><td>메모리 낭비, 불균형 분포, hit 율 저하</td><td>해시 기반 키 설계, prefix 기준 분산, key 압축 및 표준화</td></tr><tr><td><strong>계층 구조 설계</strong></td><td>Multi-level Cache (L1: Local, L2: Redis)</td><td>계층 간 TTL/일관성 불일치, 중복 저장</td><td>계층 간 TTL 차별화 설계, async fallback 구조 도입</td></tr><tr><td><strong>캐시 미스 대응</strong></td><td>Stampede 방지, Cold start 완화</td><td>대량 미스 시 백엔드 요청 폭주</td><td><code>singleflight</code>, <code>lock per key</code>, Pre-warm 스크립트 실행 등 적용</td></tr><tr><td><strong>메모리 최적화</strong></td><td>직렬화 효율, 객체 압축, GC 부담 완화</td><td>직렬화/압축 오버헤드, GC pause 등</td><td>Protocol Buffers, LZ4, zstd, 버퍼 풀 기반 메모리 재사용</td></tr><tr><td><strong>네트워크 효율화</strong></td><td>배치 처리, 멀티 요청, 연결 풀 구성</td><td>연결 비용 과다, 네트워크 병목</td><td>Redis Pipeline, Multi-get, keep-alive 커넥션 풀링 적용</td></tr><tr><td><strong>읽기/쓰기 전략</strong></td><td>Read/Write ratio 기반 캐싱 정책</td><td>Write-through 은 일관성 높지만 느림, Write-back 은 유실 가능</td><td>Hybrid 전략: Hot write-through + Bulk write-back + Queue 기반 flush 적용</td></tr><tr><td><strong>모니터링 및 경보</strong></td><td>Hit/Miss 율, Eviction 율, 사용량 추적</td><td>캐시 병목 탐지 누락, 성능 저하 방치</td><td>Prometheus + Grafana 연계, SLA 기반 alert 구성</td></tr><tr><td><strong>스케일링</strong></td><td>자동 용량 조정, 노드 증설</td><td>고정 크기 구성 시 과도한 Eviction 발생, 샤딩 실패</td><td>사용률 기반 Auto-scaling, 퍼센트 기준 eviction 방지</td></tr><tr><td><strong>프리페치/프리히트</strong></td><td>ML 기반 예측, 배포 시 사전 로딩</td><td>잘못된 예측 시 캐시 오염, 비효율 발생</td><td>Access 로그 기반 intelligent prefetch, 배포 시 pre-warm 스크립트 자동화</td></tr><tr><td><strong>보안</strong></td><td>캐시된 민감 데이터 보호</td><td>접근 제어 누락 시 데이터 노출, 캐시 포이즈닝</td><td>Redis AUTH, IP 제한, at-rest/in-transit 암호화, 캐시 키 난독화</td></tr><tr><td><strong>운영 자동화</strong></td><td>장애 복구, 정책 튜닝, 캐시 재구성</td><td>설정 누락, 스플릿 브레인, 수동 튜닝의 한계</td><td>쿼럼 기반 결정 시스템, operator 기반 캐시 자동 운영, IaC 및 알람 연계 도입</td></tr></tbody></table><ul><li><strong>정책 측면</strong>: Eviction, TTL, 쓰기 정책은 <strong>패턴 분석 기반 튜닝</strong> 필수</li><li><strong>아키텍처 측면</strong>: L1/L2, 분산/로컬 캐시 <strong>조합 및 트래픽 특화 설계</strong> 고려</li><li><strong>운영 측면</strong>: 캐시 미스 제어, 자동 스케일링, 프리히트 전략은 <strong>실전 대응력 강화</strong> 핵심</li><li><strong>보안 측면</strong>: 캐시도 민감 정보 저장 가능성 있음 → 암호화 및 접근 제어 필수</li></ul><h3 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h3><table><thead><tr><th>도메인/시스템</th><th>사용 목적</th><th>주요 기술 스택</th><th>기대 효과 및 지표</th></tr></thead><tbody><tr><td><strong>웹 프론트/정적 자원</strong></td><td>HTML/JS/CSS/이미지 캐싱</td><td>CDN, Reverse Proxy, 브라우저 캐시</td><td>페이지 로딩 속도 80~90% 향상, 글로벌 콘텐츠 응답 지연 최소화</td></tr><tr><td><strong>API 서버</strong></td><td>빈번한 요청 응답 캐싱</td><td>Redis, In-memory Cache, Response Cache</td><td>응답 시간 단축 (10ms → 2ms), TPS 향상, 외부 API 호출량 80% 감소</td></tr><tr><td><strong>DB 연동 시스템</strong></td><td>복잡한 쿼리 결과 재사용</td><td>Redis, Memcached, DB Buffer Pool</td><td>DB 부하 70% 감소, 비용 최적화, 응답 시간 개선</td></tr><tr><td><strong>전자상거래 플랫폼</strong></td><td>상품 정보, 재고, 가격 데이터 캐싱</td><td>Redis + MySQL, CDN</td><td>로딩 시간 50~90% 단축, 인기 상품 조회 폭주 대응</td></tr><tr><td><strong>소셜 미디어</strong></td><td>피드, 타임라인, 알림 데이터 캐싱</td><td>Memcached + NoSQL (MongoDB 등)</td><td>동시 사용자 10 배 증가 대응, 피드 생성 속도 향상</td></tr><tr><td><strong>게임 서버</strong></td><td>플레이어 상태, 세션, 게임 룸 상태 유지</td><td>Redis, Hazelcast, WebSocket</td><td>레이턴시 개선 (50ms → 5ms), 실시간 멀티플레이 최적화</td></tr><tr><td><strong>핀테크/금융 시스템</strong></td><td>거래 이력, 환율 정보, 대시보드 데이터 캐싱</td><td>Redis, Hazelcast + PostgreSQL</td><td>보안 강화 (암호화), 실시간 조회 5 배 향상, 지연 시간 90% 감소</td></tr><tr><td><strong>AI/ML 시스템</strong></td><td>예측 결과, 벡터/임베딩 결과 재사용</td><td>Redis, Vector Cache (FAISS 등)</td><td>반복 요청 최적화, GPU 사용량 감소, 추론 응답 시간 대폭 감소</td></tr><tr><td><strong>IoT/시계열 플랫폼</strong></td><td>센서 데이터 집계 및 실시간 분석</td><td>시계열 캐시, RedisTimeSeries, Prometheus</td><td>실시간 처리율 2 배 향상, 대량 데이터 병목 해소, 측정 지연 최소화</td></tr><tr><td><strong>모바일 앱</strong></td><td>오프라인 접근/화면 간 객체 상태 유지</td><td>LocalStorage, SQLite, In-process Cache</td><td>네트워크 의존성 감소, UI 전환 속도 개선 (사용자 경험 30% 향상)</td></tr><tr><td><strong>실시간 분석 시스템</strong></td><td>이벤트/측정치 임시 저장 및 스트림 처리 버퍼링</td><td>Redis Streams, Kafka + 캐시 연동</td><td>처리 지연 최소화, 처리량 2 배 증가, 다운타임 대비</td></tr><tr><td><strong>CDN 및 글로벌 서비스</strong></td><td>글로벌 정적 콘텐츠 전송 최적화</td><td>Edge Cache, Geo Distributed CDN</td><td>전 세계 응답 시간 균일화, 캐시 적중률 향상 (95% 이상)</td></tr><tr><td><strong>세션 관리 시스템</strong></td><td>사용자 세션 상태 저장/복원</td><td>Redis, Memcached</td><td>확장성 확보, 서버 장애 시 빠른 세션 복구, 수평 확장 용이</td></tr><tr><td><strong>CI/CD 및 관리 도구</strong></td><td>패키지/빌드 결과물 캐싱</td><td>S3 + Local Artifact Cache</td><td>중복 빌드 시간 제거, 배포 속도 향상</td></tr></tbody></table><h3 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h3><h4 id=사례-1-웹-서비스-결과-캐시-활용-사례>사례 1: 웹 서비스 결과 캐시 활용 사례<a hidden class=anchor aria-hidden=true href=#사례-1-웹-서비스-결과-캐시-활용-사례>#</a></h4><p>사용자가 자주 조회하는 인기 상품 목록을 REST API 로 제공하며, 이 결과를 Redis 와 같은 분산 캐시에 5 분간 저장.</p><p><strong>구성</strong>:</p><ol><li>사용자 요청 → API 서버 → 캐시 (조회) → 미스 시 DB 질의 후 캐시 갱신/반환</li><li>캐시 히트 시 DB 접근 없이 즉시 데이터 반환</li></ol><pre class=mermaid>graph TD
  User--&gt;API_Server
  API_Server--&gt;Cache[Redis]
  API_Server--&gt;DB[(Database)]
  Cache--&gt;|Hit|API_Server
  Cache--&gt;|Miss|DB
</pre><p><strong>Workflow</strong>:</p><ol><li>클라이언트 요청 시 캐시에서 데이터 탐색</li><li>존재 시 (히트) 즉시 응답, 없을 시 (미스) DB 조회 후 데이터 캐시에 저장 및 응답</li></ol><p><strong>캐시 도입 전후 차이점</strong></p><ul><li>도입 전: 모든 요청 DB 직접 접근, 응답 지연 및 부하 심화</li><li>도입 후: 빈번 요청은 캐시에서 즉시 처리, DB 부하 대폭 감소, 응답속도 개선</li></ul><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1> 1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2> 2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3> 3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4> 4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5> 5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6> 6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7> 7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8> 8</a>
</span><span class=lnt id=hl-16-9><a class=lnlinks href=#hl-16-9> 9</a>
</span><span class=lnt id=hl-16-10><a class=lnlinks href=#hl-16-10>10</a>
</span><span class=lnt id=hl-16-11><a class=lnlinks href=#hl-16-11>11</a>
</span><span class=lnt id=hl-16-12><a class=lnlinks href=#hl-16-12>12</a>
</span><span class=lnt id=hl-16-13><a class=lnlinks href=#hl-16-13>13</a>
</span><span class=lnt id=hl-16-14><a class=lnlinks href=#hl-16-14>14</a>
</span><span class=lnt id=hl-16-15><a class=lnlinks href=#hl-16-15>15</a>
</span><span class=lnt id=hl-16-16><a class=lnlinks href=#hl-16-16>16</a>
</span><span class=lnt id=hl-16-17><a class=lnlinks href=#hl-16-17>17</a>
</span><span class=lnt id=hl-16-18><a class=lnlinks href=#hl-16-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 인기 상품 API에서 캐시(예: Redis) 활용 예시</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>redis</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>cache</span> <span class=o>=</span> <span class=n>redis</span><span class=o>.</span><span class=n>StrictRedis</span><span class=p>(</span><span class=n>host</span><span class=o>=</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>6379</span><span class=p>,</span> <span class=n>db</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>fetch_popular_items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1># DB에서 인기 상품 목록 반환(예제용)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>[</span><span class=s2>&#34;item1&#34;</span><span class=p>,</span> <span class=s2>&#34;item2&#34;</span><span class=p>,</span> <span class=s2>&#34;item3&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_popular_items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1># 1. 캐시 히트 확인</span>
</span></span><span class=line><span class=cl>    <span class=n>cached</span> <span class=o>=</span> <span class=n>cache</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;popular_items&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>cached</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>cached</span>  <span class=c1># 캐시된 데이터 즉시 반환</span>
</span></span><span class=line><span class=cl>    <span class=c1># 2. 캐시 미스 시 DB 조회 후 캐시 저장</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span> <span class=o>=</span> <span class=n>fetch_popular_items</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>cache</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s1>&#39;popular_items&#39;</span><span class=p>,</span> <span class=n>data</span><span class=p>,</span> <span class=n>ex</span><span class=o>=</span><span class=mi>300</span><span class=p>)</span>  <span class=c1># 5분 만료</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>data</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>캐시 키로 인기 상품을 5 분 보관, 히트 시 DB 질의 없이 반환, 미스 시만 DB 접근.</li></ul><h4 id=사례-2-ecommerce-세션-및-상품-페이지-캐싱>사례 2: E‑commerce 세션 및 상품 페이지 캐싱<a hidden class=anchor aria-hidden=true href=#사례-2-ecommerce-세션-및-상품-페이지-캐싱>#</a></h4><p><strong>시스템 구성</strong>:</p><pre class=mermaid>flowchart TD
  User --&gt;|HTTP 요청| CDN
  CDN --&gt;|static| User
  CDN --&gt; API_Server
  API_Server --&gt; InProcCache
  InProcCache -- miss --&gt; RedisCache
  RedisCache -- miss --&gt; ProductDB
  ProductDB --&gt; RedisCache
  RedisCache --&gt; InProcCache
  InProcCache --&gt; API_Server --&gt; CDN --&gt; User
</pre><p><strong>Workflow</strong>:</p><ol><li>고객이 상품 페이지 요청</li><li>CDN 이 캐시된 정적 자원 전달</li><li>API 서버는 인프로세스 캐시 확인</li><li>miss 시 Redis 캐시 확인, 없으면 DB 조회</li><li>결과를 Redis 및 앱 캐시에 저장 후 응답</li></ol><p><strong>역할 및 차이점</strong>:</p><ul><li><strong>캐시 사용</strong>: L1/L2 계층화 및 TTL 적용 → DB 호출 감소, 응답 속도 향상</li><li><strong>미사용 시</strong>: DB 부하 증가, 유저 지연 증가 → bounce rate 상승</li></ul><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1> 1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2> 2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3> 3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4> 4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5> 5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6> 6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7> 7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8> 8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9> 9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10>10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11>11</a>
</span><span class=lnt id=hl-18-12><a class=lnlinks href=#hl-18-12>12</a>
</span><span class=lnt id=hl-18-13><a class=lnlinks href=#hl-18-13>13</a>
</span><span class=lnt id=hl-18-14><a class=lnlinks href=#hl-18-14>14</a>
</span><span class=lnt id=hl-18-15><a class=lnlinks href=#hl-18-15>15</a>
</span><span class=lnt id=hl-18-16><a class=lnlinks href=#hl-18-16>16</a>
</span><span class=lnt id=hl-18-17><a class=lnlinks href=#hl-18-17>17</a>
</span><span class=lnt id=hl-18-18><a class=lnlinks href=#hl-18-18>18</a>
</span><span class=lnt id=hl-18-19><a class=lnlinks href=#hl-18-19>19</a>
</span><span class=lnt id=hl-18-20><a class=lnlinks href=#hl-18-20>20</a>
</span><span class=lnt id=hl-18-21><a class=lnlinks href=#hl-18-21>21</a>
</span><span class=lnt id=hl-18-22><a class=lnlinks href=#hl-18-22>22</a>
</span><span class=lnt id=hl-18-23><a class=lnlinks href=#hl-18-23>23</a>
</span><span class=lnt id=hl-18-24><a class=lnlinks href=#hl-18-24>24</a>
</span><span class=lnt id=hl-18-25><a class=lnlinks href=#hl-18-25>25</a>
</span><span class=lnt id=hl-18-26><a class=lnlinks href=#hl-18-26>26</a>
</span><span class=lnt id=hl-18-27><a class=lnlinks href=#hl-18-27>27</a>
</span><span class=lnt id=hl-18-28><a class=lnlinks href=#hl-18-28>28</a>
</span><span class=lnt id=hl-18-29><a class=lnlinks href=#hl-18-29>29</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>OrderedDict</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>LRUCache</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>capacity</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>cache</span> <span class=o>=</span> <span class=n>OrderedDict</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>capacity</span> <span class=o>=</span> <span class=n>capacity</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=o>.</span><span class=n>move_to_end</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=o>.</span><span class=n>move_to_end</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=p>)</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>capacity</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>evicted</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=o>.</span><span class=n>popitem</span><span class=p>(</span><span class=n>last</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Evicted: </span><span class=si>{</span><span class=n>evicted</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예제</span>
</span></span><span class=line><span class=cl><span class=n>cache</span> <span class=o>=</span> <span class=n>LRUCache</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>cache</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=s2>&#34;p1&#34;</span><span class=p>,</span> <span class=p>{</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Product1&#34;</span><span class=p>,</span> <span class=s2>&#34;price&#34;</span><span class=p>:</span> <span class=mi>100</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=n>cache</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=s2>&#34;p2&#34;</span><span class=p>,</span> <span class=p>{</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Product2&#34;</span><span class=p>,</span> <span class=s2>&#34;price&#34;</span><span class=p>:</span> <span class=mi>200</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>cache</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;p1&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>cache</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=s2>&#34;p3&#34;</span><span class=p>,</span> <span class=p>{</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Product3&#34;</span><span class=p>,</span> <span class=s2>&#34;price&#34;</span><span class=p>:</span> <span class=mi>300</span><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>cache</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;p2&#34;</span><span class=p>))</span>  <span class=c1># None (evicted)</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>기능</strong>: <code>OrderedDict</code> 기반의 LRU eviction, O(1) 접근</li><li><strong>적용</strong>: 상품 데이터 임시 저장 후 API 응답 시 활용 가능</li><li><strong>확장</strong>: TTL, thread-safety, 분산 활용을 위한 Redis integration 필요</li></ul><h4 id=사례-3-대형-웹-서비스에서-redis-기반-분산-캐시-적용>사례 3: 대형 웹 서비스에서 Redis 기반 분산 캐시 적용<a hidden class=anchor aria-hidden=true href=#사례-3-대형-웹-서비스에서-redis-기반-분산-캐시-적용>#</a></h4><p><strong>구성:</strong> 웹서버 ↔ Redis 분산 캐시 ↔ DB</p><p><strong>Workflow:</strong> 사용자가 데이터 요청 → 캐시 확인 (hit/miss) → miss 시 DB 질의 후 캐시 적재</p><pre class=mermaid>sequenceDiagram
    participant User
    participant WebServer
    participant Cache
    participant DB
    User-&gt;&gt;WebServer: 요청
    WebServer-&gt;&gt;Cache: 데이터 조회
    alt Hit
        Cache-&gt;&gt;WebServer: 결과 반환
    else Miss
        WebServer-&gt;&gt;DB: 데이터 쿼리
        DB-&gt;&gt;WebServer: 데이터 반환
        WebServer-&gt;&gt;Cache: 데이터 캐싱
        WebServer-&gt;&gt;User: 결과 반환
    end
</pre><p><strong>역할:</strong> 트래픽 및 부하 완화, 응답 시간 단축, 장애 복구 지원</p><p><strong>차이점:</strong> 캐시 적용 시 100ms 대 응답, 미적용시는 수초 이상의 지연과 시스템 부하 가능</p><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1> 1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2> 2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3> 3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4> 4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5> 5</a>
</span><span class=lnt id=hl-20-6><a class=lnlinks href=#hl-20-6> 6</a>
</span><span class=lnt id=hl-20-7><a class=lnlinks href=#hl-20-7> 7</a>
</span><span class=lnt id=hl-20-8><a class=lnlinks href=#hl-20-8> 8</a>
</span><span class=lnt id=hl-20-9><a class=lnlinks href=#hl-20-9> 9</a>
</span><span class=lnt id=hl-20-10><a class=lnlinks href=#hl-20-10>10</a>
</span><span class=lnt id=hl-20-11><a class=lnlinks href=#hl-20-11>11</a>
</span><span class=lnt id=hl-20-12><a class=lnlinks href=#hl-20-12>12</a>
</span><span class=lnt id=hl-20-13><a class=lnlinks href=#hl-20-13>13</a>
</span><span class=lnt id=hl-20-14><a class=lnlinks href=#hl-20-14>14</a>
</span><span class=lnt id=hl-20-15><a class=lnlinks href=#hl-20-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Redis를 활용한 Cache-Aside 패턴 예시 (Python)</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>redis</span>
</span></span><span class=line><span class=cl><span class=n>cache</span> <span class=o>=</span> <span class=n>redis</span><span class=o>.</span><span class=n>StrictRedis</span><span class=p>(</span><span class=n>host</span><span class=o>=</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>6379</span><span class=p>,</span> <span class=n>db</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_data_from_db</span><span class=p>(</span><span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># DB에서 데이터를 가져오는 함수 (예시)</span>
</span></span><span class=line><span class=cl>    <span class=err>…</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_data</span><span class=p>(</span><span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span> <span class=o>=</span> <span class=n>cache</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>value</span>  <span class=c1># Cache Hit</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span> <span class=o>=</span> <span class=n>get_data_from_db</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>cache</span><span class=o>.</span><span class=n>setex</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=mi>300</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>  <span class=c1># 300초간 캐시</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>value</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>캐시에 먼저 접근, 없으면 DB 에서 조회 후 캐시에 저장. TTL 존재.</li></ul><h4 id=사례-4-e-commerce-플랫폼>사례 4: E-Commerce 플랫폼<a hidden class=anchor aria-hidden=true href=#사례-4-e-commerce-플랫폼>#</a></h4><p><strong>시스템 구성:</strong></p><pre class=mermaid>graph TB
    subgraph &#34;클라이언트&#34;
        A[브라우저]
    end
    
    subgraph &#34;CDN 계층&#34;
        B[CloudFront]
    end
    
    subgraph &#34;애플리케이션 계층&#34;
        C[로드 밸런서]
        D[웹 서버 1]
        E[웹 서버 2]
        F[Redis Cluster]
    end
    
    subgraph &#34;데이터베이스 계층&#34;
        G[MySQL Master]
        H[MySQL Slave]
        I[DB Buffer Pool]
    end
    
    A --&gt; B
    B --&gt; C
    C --&gt; D
    C --&gt; E
    D --&gt; F
    E --&gt; F
    D --&gt; G
    E --&gt; H
    G --&gt; I
    H --&gt; I
</pre><p><strong>Workflow:</strong></p><ol><li>사용자가 상품 목록 요청</li><li>CDN 에서 정적 리소스 캐시 히트</li><li>애플리케이션 서버에서 Redis 를 통한 세션/상품 정보 캐시</li><li>데이터베이스 쿼리 캐시 활용</li><li>최종 응답을 다시 캐시에 저장</li></ol><p><strong>캐시의 역할:</strong></p><ul><li><strong>CDN:</strong> 이미지, CSS, JS 파일 캐싱으로 로딩 시간 단축</li><li><strong>Redis:</strong> 사용자 세션, 장바구니, 상품 정보 캐싱</li><li><strong>DB Cache:</strong> 자주 실행되는 쿼리 결과 캐싱</li></ul><p><strong>캐시 적용 전후 차이:</strong></p><ul><li>페이지 로딩 시간: 3 초 → 0.5 초 (83% 개선)</li><li>데이터베이스 부하: 1000 QPS → 300 QPS (70% 감소)</li><li>서버 비용: 월 $5000 → $3000 (40% 절약)</li></ul><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1>  1</a>
</span><span class=lnt id=hl-22-2><a class=lnlinks href=#hl-22-2>  2</a>
</span><span class=lnt id=hl-22-3><a class=lnlinks href=#hl-22-3>  3</a>
</span><span class=lnt id=hl-22-4><a class=lnlinks href=#hl-22-4>  4</a>
</span><span class=lnt id=hl-22-5><a class=lnlinks href=#hl-22-5>  5</a>
</span><span class=lnt id=hl-22-6><a class=lnlinks href=#hl-22-6>  6</a>
</span><span class=lnt id=hl-22-7><a class=lnlinks href=#hl-22-7>  7</a>
</span><span class=lnt id=hl-22-8><a class=lnlinks href=#hl-22-8>  8</a>
</span><span class=lnt id=hl-22-9><a class=lnlinks href=#hl-22-9>  9</a>
</span><span class=lnt id=hl-22-10><a class=lnlinks href=#hl-22-10> 10</a>
</span><span class=lnt id=hl-22-11><a class=lnlinks href=#hl-22-11> 11</a>
</span><span class=lnt id=hl-22-12><a class=lnlinks href=#hl-22-12> 12</a>
</span><span class=lnt id=hl-22-13><a class=lnlinks href=#hl-22-13> 13</a>
</span><span class=lnt id=hl-22-14><a class=lnlinks href=#hl-22-14> 14</a>
</span><span class=lnt id=hl-22-15><a class=lnlinks href=#hl-22-15> 15</a>
</span><span class=lnt id=hl-22-16><a class=lnlinks href=#hl-22-16> 16</a>
</span><span class=lnt id=hl-22-17><a class=lnlinks href=#hl-22-17> 17</a>
</span><span class=lnt id=hl-22-18><a class=lnlinks href=#hl-22-18> 18</a>
</span><span class=lnt id=hl-22-19><a class=lnlinks href=#hl-22-19> 19</a>
</span><span class=lnt id=hl-22-20><a class=lnlinks href=#hl-22-20> 20</a>
</span><span class=lnt id=hl-22-21><a class=lnlinks href=#hl-22-21> 21</a>
</span><span class=lnt id=hl-22-22><a class=lnlinks href=#hl-22-22> 22</a>
</span><span class=lnt id=hl-22-23><a class=lnlinks href=#hl-22-23> 23</a>
</span><span class=lnt id=hl-22-24><a class=lnlinks href=#hl-22-24> 24</a>
</span><span class=lnt id=hl-22-25><a class=lnlinks href=#hl-22-25> 25</a>
</span><span class=lnt id=hl-22-26><a class=lnlinks href=#hl-22-26> 26</a>
</span><span class=lnt id=hl-22-27><a class=lnlinks href=#hl-22-27> 27</a>
</span><span class=lnt id=hl-22-28><a class=lnlinks href=#hl-22-28> 28</a>
</span><span class=lnt id=hl-22-29><a class=lnlinks href=#hl-22-29> 29</a>
</span><span class=lnt id=hl-22-30><a class=lnlinks href=#hl-22-30> 30</a>
</span><span class=lnt id=hl-22-31><a class=lnlinks href=#hl-22-31> 31</a>
</span><span class=lnt id=hl-22-32><a class=lnlinks href=#hl-22-32> 32</a>
</span><span class=lnt id=hl-22-33><a class=lnlinks href=#hl-22-33> 33</a>
</span><span class=lnt id=hl-22-34><a class=lnlinks href=#hl-22-34> 34</a>
</span><span class=lnt id=hl-22-35><a class=lnlinks href=#hl-22-35> 35</a>
</span><span class=lnt id=hl-22-36><a class=lnlinks href=#hl-22-36> 36</a>
</span><span class=lnt id=hl-22-37><a class=lnlinks href=#hl-22-37> 37</a>
</span><span class=lnt id=hl-22-38><a class=lnlinks href=#hl-22-38> 38</a>
</span><span class=lnt id=hl-22-39><a class=lnlinks href=#hl-22-39> 39</a>
</span><span class=lnt id=hl-22-40><a class=lnlinks href=#hl-22-40> 40</a>
</span><span class=lnt id=hl-22-41><a class=lnlinks href=#hl-22-41> 41</a>
</span><span class=lnt id=hl-22-42><a class=lnlinks href=#hl-22-42> 42</a>
</span><span class=lnt id=hl-22-43><a class=lnlinks href=#hl-22-43> 43</a>
</span><span class=lnt id=hl-22-44><a class=lnlinks href=#hl-22-44> 44</a>
</span><span class=lnt id=hl-22-45><a class=lnlinks href=#hl-22-45> 45</a>
</span><span class=lnt id=hl-22-46><a class=lnlinks href=#hl-22-46> 46</a>
</span><span class=lnt id=hl-22-47><a class=lnlinks href=#hl-22-47> 47</a>
</span><span class=lnt id=hl-22-48><a class=lnlinks href=#hl-22-48> 48</a>
</span><span class=lnt id=hl-22-49><a class=lnlinks href=#hl-22-49> 49</a>
</span><span class=lnt id=hl-22-50><a class=lnlinks href=#hl-22-50> 50</a>
</span><span class=lnt id=hl-22-51><a class=lnlinks href=#hl-22-51> 51</a>
</span><span class=lnt id=hl-22-52><a class=lnlinks href=#hl-22-52> 52</a>
</span><span class=lnt id=hl-22-53><a class=lnlinks href=#hl-22-53> 53</a>
</span><span class=lnt id=hl-22-54><a class=lnlinks href=#hl-22-54> 54</a>
</span><span class=lnt id=hl-22-55><a class=lnlinks href=#hl-22-55> 55</a>
</span><span class=lnt id=hl-22-56><a class=lnlinks href=#hl-22-56> 56</a>
</span><span class=lnt id=hl-22-57><a class=lnlinks href=#hl-22-57> 57</a>
</span><span class=lnt id=hl-22-58><a class=lnlinks href=#hl-22-58> 58</a>
</span><span class=lnt id=hl-22-59><a class=lnlinks href=#hl-22-59> 59</a>
</span><span class=lnt id=hl-22-60><a class=lnlinks href=#hl-22-60> 60</a>
</span><span class=lnt id=hl-22-61><a class=lnlinks href=#hl-22-61> 61</a>
</span><span class=lnt id=hl-22-62><a class=lnlinks href=#hl-22-62> 62</a>
</span><span class=lnt id=hl-22-63><a class=lnlinks href=#hl-22-63> 63</a>
</span><span class=lnt id=hl-22-64><a class=lnlinks href=#hl-22-64> 64</a>
</span><span class=lnt id=hl-22-65><a class=lnlinks href=#hl-22-65> 65</a>
</span><span class=lnt id=hl-22-66><a class=lnlinks href=#hl-22-66> 66</a>
</span><span class=lnt id=hl-22-67><a class=lnlinks href=#hl-22-67> 67</a>
</span><span class=lnt id=hl-22-68><a class=lnlinks href=#hl-22-68> 68</a>
</span><span class=lnt id=hl-22-69><a class=lnlinks href=#hl-22-69> 69</a>
</span><span class=lnt id=hl-22-70><a class=lnlinks href=#hl-22-70> 70</a>
</span><span class=lnt id=hl-22-71><a class=lnlinks href=#hl-22-71> 71</a>
</span><span class=lnt id=hl-22-72><a class=lnlinks href=#hl-22-72> 72</a>
</span><span class=lnt id=hl-22-73><a class=lnlinks href=#hl-22-73> 73</a>
</span><span class=lnt id=hl-22-74><a class=lnlinks href=#hl-22-74> 74</a>
</span><span class=lnt id=hl-22-75><a class=lnlinks href=#hl-22-75> 75</a>
</span><span class=lnt id=hl-22-76><a class=lnlinks href=#hl-22-76> 76</a>
</span><span class=lnt id=hl-22-77><a class=lnlinks href=#hl-22-77> 77</a>
</span><span class=lnt id=hl-22-78><a class=lnlinks href=#hl-22-78> 78</a>
</span><span class=lnt id=hl-22-79><a class=lnlinks href=#hl-22-79> 79</a>
</span><span class=lnt id=hl-22-80><a class=lnlinks href=#hl-22-80> 80</a>
</span><span class=lnt id=hl-22-81><a class=lnlinks href=#hl-22-81> 81</a>
</span><span class=lnt id=hl-22-82><a class=lnlinks href=#hl-22-82> 82</a>
</span><span class=lnt id=hl-22-83><a class=lnlinks href=#hl-22-83> 83</a>
</span><span class=lnt id=hl-22-84><a class=lnlinks href=#hl-22-84> 84</a>
</span><span class=lnt id=hl-22-85><a class=lnlinks href=#hl-22-85> 85</a>
</span><span class=lnt id=hl-22-86><a class=lnlinks href=#hl-22-86> 86</a>
</span><span class=lnt id=hl-22-87><a class=lnlinks href=#hl-22-87> 87</a>
</span><span class=lnt id=hl-22-88><a class=lnlinks href=#hl-22-88> 88</a>
</span><span class=lnt id=hl-22-89><a class=lnlinks href=#hl-22-89> 89</a>
</span><span class=lnt id=hl-22-90><a class=lnlinks href=#hl-22-90> 90</a>
</span><span class=lnt id=hl-22-91><a class=lnlinks href=#hl-22-91> 91</a>
</span><span class=lnt id=hl-22-92><a class=lnlinks href=#hl-22-92> 92</a>
</span><span class=lnt id=hl-22-93><a class=lnlinks href=#hl-22-93> 93</a>
</span><span class=lnt id=hl-22-94><a class=lnlinks href=#hl-22-94> 94</a>
</span><span class=lnt id=hl-22-95><a class=lnlinks href=#hl-22-95> 95</a>
</span><span class=lnt id=hl-22-96><a class=lnlinks href=#hl-22-96> 96</a>
</span><span class=lnt id=hl-22-97><a class=lnlinks href=#hl-22-97> 97</a>
</span><span class=lnt id=hl-22-98><a class=lnlinks href=#hl-22-98> 98</a>
</span><span class=lnt id=hl-22-99><a class=lnlinks href=#hl-22-99> 99</a>
</span><span class=lnt id=hl-22-100><a class=lnlinks href=#hl-22-100>100</a>
</span><span class=lnt id=hl-22-101><a class=lnlinks href=#hl-22-101>101</a>
</span><span class=lnt id=hl-22-102><a class=lnlinks href=#hl-22-102>102</a>
</span><span class=lnt id=hl-22-103><a class=lnlinks href=#hl-22-103>103</a>
</span><span class=lnt id=hl-22-104><a class=lnlinks href=#hl-22-104>104</a>
</span><span class=lnt id=hl-22-105><a class=lnlinks href=#hl-22-105>105</a>
</span><span class=lnt id=hl-22-106><a class=lnlinks href=#hl-22-106>106</a>
</span><span class=lnt id=hl-22-107><a class=lnlinks href=#hl-22-107>107</a>
</span><span class=lnt id=hl-22-108><a class=lnlinks href=#hl-22-108>108</a>
</span><span class=lnt id=hl-22-109><a class=lnlinks href=#hl-22-109>109</a>
</span><span class=lnt id=hl-22-110><a class=lnlinks href=#hl-22-110>110</a>
</span><span class=lnt id=hl-22-111><a class=lnlinks href=#hl-22-111>111</a>
</span><span class=lnt id=hl-22-112><a class=lnlinks href=#hl-22-112>112</a>
</span><span class=lnt id=hl-22-113><a class=lnlinks href=#hl-22-113>113</a>
</span><span class=lnt id=hl-22-114><a class=lnlinks href=#hl-22-114>114</a>
</span><span class=lnt id=hl-22-115><a class=lnlinks href=#hl-22-115>115</a>
</span><span class=lnt id=hl-22-116><a class=lnlinks href=#hl-22-116>116</a>
</span><span class=lnt id=hl-22-117><a class=lnlinks href=#hl-22-117>117</a>
</span><span class=lnt id=hl-22-118><a class=lnlinks href=#hl-22-118>118</a>
</span><span class=lnt id=hl-22-119><a class=lnlinks href=#hl-22-119>119</a>
</span><span class=lnt id=hl-22-120><a class=lnlinks href=#hl-22-120>120</a>
</span><span class=lnt id=hl-22-121><a class=lnlinks href=#hl-22-121>121</a>
</span><span class=lnt id=hl-22-122><a class=lnlinks href=#hl-22-122>122</a>
</span><span class=lnt id=hl-22-123><a class=lnlinks href=#hl-22-123>123</a>
</span><span class=lnt id=hl-22-124><a class=lnlinks href=#hl-22-124>124</a>
</span><span class=lnt id=hl-22-125><a class=lnlinks href=#hl-22-125>125</a>
</span><span class=lnt id=hl-22-126><a class=lnlinks href=#hl-22-126>126</a>
</span><span class=lnt id=hl-22-127><a class=lnlinks href=#hl-22-127>127</a>
</span><span class=lnt id=hl-22-128><a class=lnlinks href=#hl-22-128>128</a>
</span><span class=lnt id=hl-22-129><a class=lnlinks href=#hl-22-129>129</a>
</span><span class=lnt id=hl-22-130><a class=lnlinks href=#hl-22-130>130</a>
</span><span class=lnt id=hl-22-131><a class=lnlinks href=#hl-22-131>131</a>
</span><span class=lnt id=hl-22-132><a class=lnlinks href=#hl-22-132>132</a>
</span><span class=lnt id=hl-22-133><a class=lnlinks href=#hl-22-133>133</a>
</span><span class=lnt id=hl-22-134><a class=lnlinks href=#hl-22-134>134</a>
</span><span class=lnt id=hl-22-135><a class=lnlinks href=#hl-22-135>135</a>
</span><span class=lnt id=hl-22-136><a class=lnlinks href=#hl-22-136>136</a>
</span><span class=lnt id=hl-22-137><a class=lnlinks href=#hl-22-137>137</a>
</span><span class=lnt id=hl-22-138><a class=lnlinks href=#hl-22-138>138</a>
</span><span class=lnt id=hl-22-139><a class=lnlinks href=#hl-22-139>139</a>
</span><span class=lnt id=hl-22-140><a class=lnlinks href=#hl-22-140>140</a>
</span><span class=lnt id=hl-22-141><a class=lnlinks href=#hl-22-141>141</a>
</span><span class=lnt id=hl-22-142><a class=lnlinks href=#hl-22-142>142</a>
</span><span class=lnt id=hl-22-143><a class=lnlinks href=#hl-22-143>143</a>
</span><span class=lnt id=hl-22-144><a class=lnlinks href=#hl-22-144>144</a>
</span><span class=lnt id=hl-22-145><a class=lnlinks href=#hl-22-145>145</a>
</span><span class=lnt id=hl-22-146><a class=lnlinks href=#hl-22-146>146</a>
</span><span class=lnt id=hl-22-147><a class=lnlinks href=#hl-22-147>147</a>
</span><span class=lnt id=hl-22-148><a class=lnlinks href=#hl-22-148>148</a>
</span><span class=lnt id=hl-22-149><a class=lnlinks href=#hl-22-149>149</a>
</span><span class=lnt id=hl-22-150><a class=lnlinks href=#hl-22-150>150</a>
</span><span class=lnt id=hl-22-151><a class=lnlinks href=#hl-22-151>151</a>
</span><span class=lnt id=hl-22-152><a class=lnlinks href=#hl-22-152>152</a>
</span><span class=lnt id=hl-22-153><a class=lnlinks href=#hl-22-153>153</a>
</span><span class=lnt id=hl-22-154><a class=lnlinks href=#hl-22-154>154</a>
</span><span class=lnt id=hl-22-155><a class=lnlinks href=#hl-22-155>155</a>
</span><span class=lnt id=hl-22-156><a class=lnlinks href=#hl-22-156>156</a>
</span><span class=lnt id=hl-22-157><a class=lnlinks href=#hl-22-157>157</a>
</span><span class=lnt id=hl-22-158><a class=lnlinks href=#hl-22-158>158</a>
</span><span class=lnt id=hl-22-159><a class=lnlinks href=#hl-22-159>159</a>
</span><span class=lnt id=hl-22-160><a class=lnlinks href=#hl-22-160>160</a>
</span><span class=lnt id=hl-22-161><a class=lnlinks href=#hl-22-161>161</a>
</span><span class=lnt id=hl-22-162><a class=lnlinks href=#hl-22-162>162</a>
</span><span class=lnt id=hl-22-163><a class=lnlinks href=#hl-22-163>163</a>
</span><span class=lnt id=hl-22-164><a class=lnlinks href=#hl-22-164>164</a>
</span><span class=lnt id=hl-22-165><a class=lnlinks href=#hl-22-165>165</a>
</span><span class=lnt id=hl-22-166><a class=lnlinks href=#hl-22-166>166</a>
</span><span class=lnt id=hl-22-167><a class=lnlinks href=#hl-22-167>167</a>
</span><span class=lnt id=hl-22-168><a class=lnlinks href=#hl-22-168>168</a>
</span><span class=lnt id=hl-22-169><a class=lnlinks href=#hl-22-169>169</a>
</span><span class=lnt id=hl-22-170><a class=lnlinks href=#hl-22-170>170</a>
</span><span class=lnt id=hl-22-171><a class=lnlinks href=#hl-22-171>171</a>
</span><span class=lnt id=hl-22-172><a class=lnlinks href=#hl-22-172>172</a>
</span><span class=lnt id=hl-22-173><a class=lnlinks href=#hl-22-173>173</a>
</span><span class=lnt id=hl-22-174><a class=lnlinks href=#hl-22-174>174</a>
</span><span class=lnt id=hl-22-175><a class=lnlinks href=#hl-22-175>175</a>
</span><span class=lnt id=hl-22-176><a class=lnlinks href=#hl-22-176>176</a>
</span><span class=lnt id=hl-22-177><a class=lnlinks href=#hl-22-177>177</a>
</span><span class=lnt id=hl-22-178><a class=lnlinks href=#hl-22-178>178</a>
</span><span class=lnt id=hl-22-179><a class=lnlinks href=#hl-22-179>179</a>
</span><span class=lnt id=hl-22-180><a class=lnlinks href=#hl-22-180>180</a>
</span><span class=lnt id=hl-22-181><a class=lnlinks href=#hl-22-181>181</a>
</span><span class=lnt id=hl-22-182><a class=lnlinks href=#hl-22-182>182</a>
</span><span class=lnt id=hl-22-183><a class=lnlinks href=#hl-22-183>183</a>
</span><span class=lnt id=hl-22-184><a class=lnlinks href=#hl-22-184>184</a>
</span><span class=lnt id=hl-22-185><a class=lnlinks href=#hl-22-185>185</a>
</span><span class=lnt id=hl-22-186><a class=lnlinks href=#hl-22-186>186</a>
</span><span class=lnt id=hl-22-187><a class=lnlinks href=#hl-22-187>187</a>
</span><span class=lnt id=hl-22-188><a class=lnlinks href=#hl-22-188>188</a>
</span><span class=lnt id=hl-22-189><a class=lnlinks href=#hl-22-189>189</a>
</span><span class=lnt id=hl-22-190><a class=lnlinks href=#hl-22-190>190</a>
</span><span class=lnt id=hl-22-191><a class=lnlinks href=#hl-22-191>191</a>
</span><span class=lnt id=hl-22-192><a class=lnlinks href=#hl-22-192>192</a>
</span><span class=lnt id=hl-22-193><a class=lnlinks href=#hl-22-193>193</a>
</span><span class=lnt id=hl-22-194><a class=lnlinks href=#hl-22-194>194</a>
</span><span class=lnt id=hl-22-195><a class=lnlinks href=#hl-22-195>195</a>
</span><span class=lnt id=hl-22-196><a class=lnlinks href=#hl-22-196>196</a>
</span><span class=lnt id=hl-22-197><a class=lnlinks href=#hl-22-197>197</a>
</span><span class=lnt id=hl-22-198><a class=lnlinks href=#hl-22-198>198</a>
</span><span class=lnt id=hl-22-199><a class=lnlinks href=#hl-22-199>199</a>
</span><span class=lnt id=hl-22-200><a class=lnlinks href=#hl-22-200>200</a>
</span><span class=lnt id=hl-22-201><a class=lnlinks href=#hl-22-201>201</a>
</span><span class=lnt id=hl-22-202><a class=lnlinks href=#hl-22-202>202</a>
</span><span class=lnt id=hl-22-203><a class=lnlinks href=#hl-22-203>203</a>
</span><span class=lnt id=hl-22-204><a class=lnlinks href=#hl-22-204>204</a>
</span><span class=lnt id=hl-22-205><a class=lnlinks href=#hl-22-205>205</a>
</span><span class=lnt id=hl-22-206><a class=lnlinks href=#hl-22-206>206</a>
</span><span class=lnt id=hl-22-207><a class=lnlinks href=#hl-22-207>207</a>
</span><span class=lnt id=hl-22-208><a class=lnlinks href=#hl-22-208>208</a>
</span><span class=lnt id=hl-22-209><a class=lnlinks href=#hl-22-209>209</a>
</span><span class=lnt id=hl-22-210><a class=lnlinks href=#hl-22-210>210</a>
</span><span class=lnt id=hl-22-211><a class=lnlinks href=#hl-22-211>211</a>
</span><span class=lnt id=hl-22-212><a class=lnlinks href=#hl-22-212>212</a>
</span><span class=lnt id=hl-22-213><a class=lnlinks href=#hl-22-213>213</a>
</span><span class=lnt id=hl-22-214><a class=lnlinks href=#hl-22-214>214</a>
</span><span class=lnt id=hl-22-215><a class=lnlinks href=#hl-22-215>215</a>
</span><span class=lnt id=hl-22-216><a class=lnlinks href=#hl-22-216>216</a>
</span><span class=lnt id=hl-22-217><a class=lnlinks href=#hl-22-217>217</a>
</span><span class=lnt id=hl-22-218><a class=lnlinks href=#hl-22-218>218</a>
</span><span class=lnt id=hl-22-219><a class=lnlinks href=#hl-22-219>219</a>
</span><span class=lnt id=hl-22-220><a class=lnlinks href=#hl-22-220>220</a>
</span><span class=lnt id=hl-22-221><a class=lnlinks href=#hl-22-221>221</a>
</span><span class=lnt id=hl-22-222><a class=lnlinks href=#hl-22-222>222</a>
</span><span class=lnt id=hl-22-223><a class=lnlinks href=#hl-22-223>223</a>
</span><span class=lnt id=hl-22-224><a class=lnlinks href=#hl-22-224>224</a>
</span><span class=lnt id=hl-22-225><a class=lnlinks href=#hl-22-225>225</a>
</span><span class=lnt id=hl-22-226><a class=lnlinks href=#hl-22-226>226</a>
</span><span class=lnt id=hl-22-227><a class=lnlinks href=#hl-22-227>227</a>
</span><span class=lnt id=hl-22-228><a class=lnlinks href=#hl-22-228>228</a>
</span><span class=lnt id=hl-22-229><a class=lnlinks href=#hl-22-229>229</a>
</span><span class=lnt id=hl-22-230><a class=lnlinks href=#hl-22-230>230</a>
</span><span class=lnt id=hl-22-231><a class=lnlinks href=#hl-22-231>231</a>
</span><span class=lnt id=hl-22-232><a class=lnlinks href=#hl-22-232>232</a>
</span><span class=lnt id=hl-22-233><a class=lnlinks href=#hl-22-233>233</a>
</span><span class=lnt id=hl-22-234><a class=lnlinks href=#hl-22-234>234</a>
</span><span class=lnt id=hl-22-235><a class=lnlinks href=#hl-22-235>235</a>
</span><span class=lnt id=hl-22-236><a class=lnlinks href=#hl-22-236>236</a>
</span><span class=lnt id=hl-22-237><a class=lnlinks href=#hl-22-237>237</a>
</span><span class=lnt id=hl-22-238><a class=lnlinks href=#hl-22-238>238</a>
</span><span class=lnt id=hl-22-239><a class=lnlinks href=#hl-22-239>239</a>
</span><span class=lnt id=hl-22-240><a class=lnlinks href=#hl-22-240>240</a>
</span><span class=lnt id=hl-22-241><a class=lnlinks href=#hl-22-241>241</a>
</span><span class=lnt id=hl-22-242><a class=lnlinks href=#hl-22-242>242</a>
</span><span class=lnt id=hl-22-243><a class=lnlinks href=#hl-22-243>243</a>
</span><span class=lnt id=hl-22-244><a class=lnlinks href=#hl-22-244>244</a>
</span><span class=lnt id=hl-22-245><a class=lnlinks href=#hl-22-245>245</a>
</span><span class=lnt id=hl-22-246><a class=lnlinks href=#hl-22-246>246</a>
</span><span class=lnt id=hl-22-247><a class=lnlinks href=#hl-22-247>247</a>
</span><span class=lnt id=hl-22-248><a class=lnlinks href=#hl-22-248>248</a>
</span><span class=lnt id=hl-22-249><a class=lnlinks href=#hl-22-249>249</a>
</span><span class=lnt id=hl-22-250><a class=lnlinks href=#hl-22-250>250</a>
</span><span class=lnt id=hl-22-251><a class=lnlinks href=#hl-22-251>251</a>
</span><span class=lnt id=hl-22-252><a class=lnlinks href=#hl-22-252>252</a>
</span><span class=lnt id=hl-22-253><a class=lnlinks href=#hl-22-253>253</a>
</span><span class=lnt id=hl-22-254><a class=lnlinks href=#hl-22-254>254</a>
</span><span class=lnt id=hl-22-255><a class=lnlinks href=#hl-22-255>255</a>
</span><span class=lnt id=hl-22-256><a class=lnlinks href=#hl-22-256>256</a>
</span><span class=lnt id=hl-22-257><a class=lnlinks href=#hl-22-257>257</a>
</span><span class=lnt id=hl-22-258><a class=lnlinks href=#hl-22-258>258</a>
</span><span class=lnt id=hl-22-259><a class=lnlinks href=#hl-22-259>259</a>
</span><span class=lnt id=hl-22-260><a class=lnlinks href=#hl-22-260>260</a>
</span><span class=lnt id=hl-22-261><a class=lnlinks href=#hl-22-261>261</a>
</span><span class=lnt id=hl-22-262><a class=lnlinks href=#hl-22-262>262</a>
</span><span class=lnt id=hl-22-263><a class=lnlinks href=#hl-22-263>263</a>
</span><span class=lnt id=hl-22-264><a class=lnlinks href=#hl-22-264>264</a>
</span><span class=lnt id=hl-22-265><a class=lnlinks href=#hl-22-265>265</a>
</span><span class=lnt id=hl-22-266><a class=lnlinks href=#hl-22-266>266</a>
</span><span class=lnt id=hl-22-267><a class=lnlinks href=#hl-22-267>267</a>
</span><span class=lnt id=hl-22-268><a class=lnlinks href=#hl-22-268>268</a>
</span><span class=lnt id=hl-22-269><a class=lnlinks href=#hl-22-269>269</a>
</span><span class=lnt id=hl-22-270><a class=lnlinks href=#hl-22-270>270</a>
</span><span class=lnt id=hl-22-271><a class=lnlinks href=#hl-22-271>271</a>
</span><span class=lnt id=hl-22-272><a class=lnlinks href=#hl-22-272>272</a>
</span><span class=lnt id=hl-22-273><a class=lnlinks href=#hl-22-273>273</a>
</span><span class=lnt id=hl-22-274><a class=lnlinks href=#hl-22-274>274</a>
</span><span class=lnt id=hl-22-275><a class=lnlinks href=#hl-22-275>275</a>
</span><span class=lnt id=hl-22-276><a class=lnlinks href=#hl-22-276>276</a>
</span><span class=lnt id=hl-22-277><a class=lnlinks href=#hl-22-277>277</a>
</span><span class=lnt id=hl-22-278><a class=lnlinks href=#hl-22-278>278</a>
</span><span class=lnt id=hl-22-279><a class=lnlinks href=#hl-22-279>279</a>
</span><span class=lnt id=hl-22-280><a class=lnlinks href=#hl-22-280>280</a>
</span><span class=lnt id=hl-22-281><a class=lnlinks href=#hl-22-281>281</a>
</span><span class=lnt id=hl-22-282><a class=lnlinks href=#hl-22-282>282</a>
</span><span class=lnt id=hl-22-283><a class=lnlinks href=#hl-22-283>283</a>
</span><span class=lnt id=hl-22-284><a class=lnlinks href=#hl-22-284>284</a>
</span><span class=lnt id=hl-22-285><a class=lnlinks href=#hl-22-285>285</a>
</span><span class=lnt id=hl-22-286><a class=lnlinks href=#hl-22-286>286</a>
</span><span class=lnt id=hl-22-287><a class=lnlinks href=#hl-22-287>287</a>
</span><span class=lnt id=hl-22-288><a class=lnlinks href=#hl-22-288>288</a>
</span><span class=lnt id=hl-22-289><a class=lnlinks href=#hl-22-289>289</a>
</span><span class=lnt id=hl-22-290><a class=lnlinks href=#hl-22-290>290</a>
</span><span class=lnt id=hl-22-291><a class=lnlinks href=#hl-22-291>291</a>
</span><span class=lnt id=hl-22-292><a class=lnlinks href=#hl-22-292>292</a>
</span><span class=lnt id=hl-22-293><a class=lnlinks href=#hl-22-293>293</a>
</span><span class=lnt id=hl-22-294><a class=lnlinks href=#hl-22-294>294</a>
</span><span class=lnt id=hl-22-295><a class=lnlinks href=#hl-22-295>295</a>
</span><span class=lnt id=hl-22-296><a class=lnlinks href=#hl-22-296>296</a>
</span><span class=lnt id=hl-22-297><a class=lnlinks href=#hl-22-297>297</a>
</span><span class=lnt id=hl-22-298><a class=lnlinks href=#hl-22-298>298</a>
</span><span class=lnt id=hl-22-299><a class=lnlinks href=#hl-22-299>299</a>
</span><span class=lnt id=hl-22-300><a class=lnlinks href=#hl-22-300>300</a>
</span><span class=lnt id=hl-22-301><a class=lnlinks href=#hl-22-301>301</a>
</span><span class=lnt id=hl-22-302><a class=lnlinks href=#hl-22-302>302</a>
</span><span class=lnt id=hl-22-303><a class=lnlinks href=#hl-22-303>303</a>
</span><span class=lnt id=hl-22-304><a class=lnlinks href=#hl-22-304>304</a>
</span><span class=lnt id=hl-22-305><a class=lnlinks href=#hl-22-305>305</a>
</span><span class=lnt id=hl-22-306><a class=lnlinks href=#hl-22-306>306</a>
</span><span class=lnt id=hl-22-307><a class=lnlinks href=#hl-22-307>307</a>
</span><span class=lnt id=hl-22-308><a class=lnlinks href=#hl-22-308>308</a>
</span><span class=lnt id=hl-22-309><a class=lnlinks href=#hl-22-309>309</a>
</span><span class=lnt id=hl-22-310><a class=lnlinks href=#hl-22-310>310</a>
</span><span class=lnt id=hl-22-311><a class=lnlinks href=#hl-22-311>311</a>
</span><span class=lnt id=hl-22-312><a class=lnlinks href=#hl-22-312>312</a>
</span><span class=lnt id=hl-22-313><a class=lnlinks href=#hl-22-313>313</a>
</span><span class=lnt id=hl-22-314><a class=lnlinks href=#hl-22-314>314</a>
</span><span class=lnt id=hl-22-315><a class=lnlinks href=#hl-22-315>315</a>
</span><span class=lnt id=hl-22-316><a class=lnlinks href=#hl-22-316>316</a>
</span><span class=lnt id=hl-22-317><a class=lnlinks href=#hl-22-317>317</a>
</span><span class=lnt id=hl-22-318><a class=lnlinks href=#hl-22-318>318</a>
</span><span class=lnt id=hl-22-319><a class=lnlinks href=#hl-22-319>319</a>
</span><span class=lnt id=hl-22-320><a class=lnlinks href=#hl-22-320>320</a>
</span><span class=lnt id=hl-22-321><a class=lnlinks href=#hl-22-321>321</a>
</span><span class=lnt id=hl-22-322><a class=lnlinks href=#hl-22-322>322</a>
</span><span class=lnt id=hl-22-323><a class=lnlinks href=#hl-22-323>323</a>
</span><span class=lnt id=hl-22-324><a class=lnlinks href=#hl-22-324>324</a>
</span><span class=lnt id=hl-22-325><a class=lnlinks href=#hl-22-325>325</a>
</span><span class=lnt id=hl-22-326><a class=lnlinks href=#hl-22-326>326</a>
</span><span class=lnt id=hl-22-327><a class=lnlinks href=#hl-22-327>327</a>
</span><span class=lnt id=hl-22-328><a class=lnlinks href=#hl-22-328>328</a>
</span><span class=lnt id=hl-22-329><a class=lnlinks href=#hl-22-329>329</a>
</span><span class=lnt id=hl-22-330><a class=lnlinks href=#hl-22-330>330</a>
</span><span class=lnt id=hl-22-331><a class=lnlinks href=#hl-22-331>331</a>
</span><span class=lnt id=hl-22-332><a class=lnlinks href=#hl-22-332>332</a>
</span><span class=lnt id=hl-22-333><a class=lnlinks href=#hl-22-333>333</a>
</span><span class=lnt id=hl-22-334><a class=lnlinks href=#hl-22-334>334</a>
</span><span class=lnt id=hl-22-335><a class=lnlinks href=#hl-22-335>335</a>
</span><span class=lnt id=hl-22-336><a class=lnlinks href=#hl-22-336>336</a>
</span><span class=lnt id=hl-22-337><a class=lnlinks href=#hl-22-337>337</a>
</span><span class=lnt id=hl-22-338><a class=lnlinks href=#hl-22-338>338</a>
</span><span class=lnt id=hl-22-339><a class=lnlinks href=#hl-22-339>339</a>
</span><span class=lnt id=hl-22-340><a class=lnlinks href=#hl-22-340>340</a>
</span><span class=lnt id=hl-22-341><a class=lnlinks href=#hl-22-341>341</a>
</span><span class=lnt id=hl-22-342><a class=lnlinks href=#hl-22-342>342</a>
</span><span class=lnt id=hl-22-343><a class=lnlinks href=#hl-22-343>343</a>
</span><span class=lnt id=hl-22-344><a class=lnlinks href=#hl-22-344>344</a>
</span><span class=lnt id=hl-22-345><a class=lnlinks href=#hl-22-345>345</a>
</span><span class=lnt id=hl-22-346><a class=lnlinks href=#hl-22-346>346</a>
</span><span class=lnt id=hl-22-347><a class=lnlinks href=#hl-22-347>347</a>
</span><span class=lnt id=hl-22-348><a class=lnlinks href=#hl-22-348>348</a>
</span><span class=lnt id=hl-22-349><a class=lnlinks href=#hl-22-349>349</a>
</span><span class=lnt id=hl-22-350><a class=lnlinks href=#hl-22-350>350</a>
</span><span class=lnt id=hl-22-351><a class=lnlinks href=#hl-22-351>351</a>
</span><span class=lnt id=hl-22-352><a class=lnlinks href=#hl-22-352>352</a>
</span><span class=lnt id=hl-22-353><a class=lnlinks href=#hl-22-353>353</a>
</span><span class=lnt id=hl-22-354><a class=lnlinks href=#hl-22-354>354</a>
</span><span class=lnt id=hl-22-355><a class=lnlinks href=#hl-22-355>355</a>
</span><span class=lnt id=hl-22-356><a class=lnlinks href=#hl-22-356>356</a>
</span><span class=lnt id=hl-22-357><a class=lnlinks href=#hl-22-357>357</a>
</span><span class=lnt id=hl-22-358><a class=lnlinks href=#hl-22-358>358</a>
</span><span class=lnt id=hl-22-359><a class=lnlinks href=#hl-22-359>359</a>
</span><span class=lnt id=hl-22-360><a class=lnlinks href=#hl-22-360>360</a>
</span><span class=lnt id=hl-22-361><a class=lnlinks href=#hl-22-361>361</a>
</span><span class=lnt id=hl-22-362><a class=lnlinks href=#hl-22-362>362</a>
</span><span class=lnt id=hl-22-363><a class=lnlinks href=#hl-22-363>363</a>
</span><span class=lnt id=hl-22-364><a class=lnlinks href=#hl-22-364>364</a>
</span><span class=lnt id=hl-22-365><a class=lnlinks href=#hl-22-365>365</a>
</span><span class=lnt id=hl-22-366><a class=lnlinks href=#hl-22-366>366</a>
</span><span class=lnt id=hl-22-367><a class=lnlinks href=#hl-22-367>367</a>
</span><span class=lnt id=hl-22-368><a class=lnlinks href=#hl-22-368>368</a>
</span><span class=lnt id=hl-22-369><a class=lnlinks href=#hl-22-369>369</a>
</span><span class=lnt id=hl-22-370><a class=lnlinks href=#hl-22-370>370</a>
</span><span class=lnt id=hl-22-371><a class=lnlinks href=#hl-22-371>371</a>
</span><span class=lnt id=hl-22-372><a class=lnlinks href=#hl-22-372>372</a>
</span><span class=lnt id=hl-22-373><a class=lnlinks href=#hl-22-373>373</a>
</span><span class=lnt id=hl-22-374><a class=lnlinks href=#hl-22-374>374</a>
</span><span class=lnt id=hl-22-375><a class=lnlinks href=#hl-22-375>375</a>
</span><span class=lnt id=hl-22-376><a class=lnlinks href=#hl-22-376>376</a>
</span><span class=lnt id=hl-22-377><a class=lnlinks href=#hl-22-377>377</a>
</span><span class=lnt id=hl-22-378><a class=lnlinks href=#hl-22-378>378</a>
</span><span class=lnt id=hl-22-379><a class=lnlinks href=#hl-22-379>379</a>
</span><span class=lnt id=hl-22-380><a class=lnlinks href=#hl-22-380>380</a>
</span><span class=lnt id=hl-22-381><a class=lnlinks href=#hl-22-381>381</a>
</span><span class=lnt id=hl-22-382><a class=lnlinks href=#hl-22-382>382</a>
</span><span class=lnt id=hl-22-383><a class=lnlinks href=#hl-22-383>383</a>
</span><span class=lnt id=hl-22-384><a class=lnlinks href=#hl-22-384>384</a>
</span><span class=lnt id=hl-22-385><a class=lnlinks href=#hl-22-385>385</a>
</span><span class=lnt id=hl-22-386><a class=lnlinks href=#hl-22-386>386</a>
</span><span class=lnt id=hl-22-387><a class=lnlinks href=#hl-22-387>387</a>
</span><span class=lnt id=hl-22-388><a class=lnlinks href=#hl-22-388>388</a>
</span><span class=lnt id=hl-22-389><a class=lnlinks href=#hl-22-389>389</a>
</span><span class=lnt id=hl-22-390><a class=lnlinks href=#hl-22-390>390</a>
</span><span class=lnt id=hl-22-391><a class=lnlinks href=#hl-22-391>391</a>
</span><span class=lnt id=hl-22-392><a class=lnlinks href=#hl-22-392>392</a>
</span><span class=lnt id=hl-22-393><a class=lnlinks href=#hl-22-393>393</a>
</span><span class=lnt id=hl-22-394><a class=lnlinks href=#hl-22-394>394</a>
</span><span class=lnt id=hl-22-395><a class=lnlinks href=#hl-22-395>395</a>
</span><span class=lnt id=hl-22-396><a class=lnlinks href=#hl-22-396>396</a>
</span><span class=lnt id=hl-22-397><a class=lnlinks href=#hl-22-397>397</a>
</span><span class=lnt id=hl-22-398><a class=lnlinks href=#hl-22-398>398</a>
</span><span class=lnt id=hl-22-399><a class=lnlinks href=#hl-22-399>399</a>
</span><span class=lnt id=hl-22-400><a class=lnlinks href=#hl-22-400>400</a>
</span><span class=lnt id=hl-22-401><a class=lnlinks href=#hl-22-401>401</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Any</span><span class=p>,</span> <span class=n>Optional</span><span class=p>,</span> <span class=n>Dict</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>OrderedDict</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>hashlib</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CacheEvictionPolicy</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;캐시 교체 정책 인터페이스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>should_evict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cache_size</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>max_size</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;교체 필요 여부 판단&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>select_victim</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cache_data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Any</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;교체할 키 선택&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>on_access</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;키 접근 시 호출&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>LRUEvictionPolicy</span><span class=p>(</span><span class=n>CacheEvictionPolicy</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;LRU (Least Recently Used) 교체 정책&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>access_order</span> <span class=o>=</span> <span class=n>OrderedDict</span><span class=p>()</span>  <span class=c1># 접근 순서 추적</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>should_evict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cache_size</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>max_size</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시 크기가 최대값을 초과하면 교체 필요&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>cache_size</span> <span class=o>&gt;=</span> <span class=n>max_size</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>select_victim</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cache_data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Any</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;가장 오래전에 사용된 키 선택&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>access_order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>            <span class=c1># 가장 오래된 키 반환 (FIFO 순서)</span>
</span></span><span class=line><span class=cl>            <span class=n>oldest_key</span> <span class=o>=</span> <span class=nb>next</span><span class=p>(</span><span class=nb>iter</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>access_order</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>oldest_key</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>on_access</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;키 접근 시 순서 업데이트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 기존 항목 제거 후 끝에 추가 (most recent)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>access_order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>del</span> <span class=bp>self</span><span class=o>.</span><span class=n>access_order</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>access_order</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>remove_key</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;키 제거 시 추적에서 삭제&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>access_order</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CacheEntry</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;캐시 엔트리 - 데이터와 메타데이터 포함&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span> <span class=n>ttl</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>value</span> <span class=o>=</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>created_at</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>last_accessed</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>created_at</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>access_count</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>ttl</span> <span class=o>=</span> <span class=n>ttl</span>  <span class=c1># TTL (초 단위)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>is_expired</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;TTL 기반 만료 확인&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>ttl</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>created_at</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>ttl</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>touch</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;접근 시점 업데이트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>last_accessed</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>access_count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SimpleCache</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;기본 캐시 구현 - L1 캐시 역할&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>max_size</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>1000</span><span class=p>,</span> <span class=n>default_ttl</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>max_size</span> <span class=o>=</span> <span class=n>max_size</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>default_ttl</span> <span class=o>=</span> <span class=n>default_ttl</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>CacheEntry</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>eviction_policy</span> <span class=o>=</span> <span class=n>LRUEvictionPolicy</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>RLock</span><span class=p>()</span>  <span class=c1># 재진입 가능 락</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 통계 정보</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>stats</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;hits&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;misses&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;evictions&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;expires&#39;</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_cleanup_expired</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;만료된 엔트리 정리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>expired_keys</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>entry</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>entry</span><span class=o>.</span><span class=n>is_expired</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                <span class=n>expired_keys</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>expired_keys</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_remove_entry</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;expires&#39;</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_remove_entry</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;엔트리 제거&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>del</span> <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>eviction_policy</span><span class=o>.</span><span class=n>remove_key</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_evict_if_needed</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;필요시 엔트리 교체&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>eviction_policy</span><span class=o>.</span><span class=n>should_evict</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>),</span> <span class=bp>self</span><span class=o>.</span><span class=n>max_size</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>            <span class=n>victim_key</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>eviction_policy</span><span class=o>.</span><span class=n>select_victim</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>victim_key</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>break</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_remove_entry</span><span class=p>(</span><span class=n>victim_key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;evictions&#39;</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시에서 값 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 만료된 엔트리 정리</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_cleanup_expired</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;misses&#39;</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>entry</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>entry</span><span class=o>.</span><span class=n>is_expired</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>_remove_entry</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;misses&#39;</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;expires&#39;</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 접근 기록 업데이트</span>
</span></span><span class=line><span class=cl>            <span class=n>entry</span><span class=o>.</span><span class=n>touch</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>eviction_policy</span><span class=o>.</span><span class=n>on_access</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;hits&#39;</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>entry</span><span class=o>.</span><span class=n>value</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span> <span class=n>ttl</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시에 값 저장&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 기존 엔트리가 있으면 제거</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>_remove_entry</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 공간 확보</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_evict_if_needed</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 새 엔트리 생성</span>
</span></span><span class=line><span class=cl>            <span class=n>effective_ttl</span> <span class=o>=</span> <span class=n>ttl</span> <span class=k>if</span> <span class=n>ttl</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=k>else</span> <span class=bp>self</span><span class=o>.</span><span class=n>default_ttl</span>
</span></span><span class=line><span class=cl>            <span class=n>entry</span> <span class=o>=</span> <span class=n>CacheEntry</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>effective_ttl</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>entry</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>eviction_policy</span><span class=o>.</span><span class=n>on_access</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시에서 키 삭제&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>_remove_entry</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>clear</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시 전체 삭제&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>eviction_policy</span> <span class=o>=</span> <span class=n>LRUEvictionPolicy</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>size</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;현재 캐시 크기&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_hit_rate</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>float</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시 히트율 계산&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>total</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;hits&#39;</span><span class=p>]</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;misses&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;hits&#39;</span><span class=p>]</span> <span class=o>/</span> <span class=n>total</span> <span class=k>if</span> <span class=n>total</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=k>else</span> <span class=mf>0.0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>DistributedCacheNode</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;분산 캐시 노드 - 일관된 해싱 지원&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>node_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>local_cache</span><span class=p>:</span> <span class=n>SimpleCache</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>node_id</span> <span class=o>=</span> <span class=n>node_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>local_cache</span> <span class=o>=</span> <span class=n>local_cache</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>hash_ring_position</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_hash</span><span class=p>(</span><span class=n>node_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_hash</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;SHA-256 해시 함수&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>int</span><span class=p>(</span><span class=n>hashlib</span><span class=o>.</span><span class=n>sha256</span><span class=p>(</span><span class=n>key</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span><span class=o>.</span><span class=n>hexdigest</span><span class=p>(),</span> <span class=mi>16</span><span class=p>)</span> <span class=o>%</span> <span class=p>(</span><span class=mi>2</span><span class=o>**</span><span class=mi>32</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>should_handle_key</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>ring_positions</span><span class=p>:</span> <span class=nb>list</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;이 노드가 해당 키를 처리해야 하는지 확인&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>key_hash</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_hash</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>sorted_positions</span> <span class=o>=</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>ring_positions</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 키 해시보다 큰 첫 번째 위치 찾기</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>pos</span> <span class=ow>in</span> <span class=n>sorted_positions</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>key_hash</span> <span class=o>&lt;=</span> <span class=n>pos</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>pos</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>hash_ring_position</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 모든 위치보다 큰 경우 첫 번째 노드가 처리</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>sorted_positions</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>hash_ring_position</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MultiLevelCache</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;다층 캐시 시스템 - L1, L2 캐시 계층&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>l1_size</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>100</span><span class=p>,</span> <span class=n>l2_size</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>1000</span><span class=p>,</span> <span class=n>default_ttl</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>3600</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># L1 캐시: 작고 빠름 (메모리)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>l1_cache</span> <span class=o>=</span> <span class=n>SimpleCache</span><span class=p>(</span><span class=n>max_size</span><span class=o>=</span><span class=n>l1_size</span><span class=p>,</span> <span class=n>default_ttl</span><span class=o>=</span><span class=mi>300</span><span class=p>)</span>  <span class=c1># 5분 TTL</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># L2 캐시: 크고 상대적으로 느림</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>l2_cache</span> <span class=o>=</span> <span class=n>SimpleCache</span><span class=p>(</span><span class=n>max_size</span><span class=o>=</span><span class=n>l2_size</span><span class=p>,</span> <span class=n>default_ttl</span><span class=o>=</span><span class=n>default_ttl</span><span class=p>)</span>  <span class=c1># 1시간 TTL</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>stats</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;l1_hits&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;l2_hits&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;total_misses&#39;</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;계층적 캐시 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># L1 캐시 먼저 확인</span>
</span></span><span class=line><span class=cl>        <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>l1_cache</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;l1_hits&#39;</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># L2 캐시 확인</span>
</span></span><span class=line><span class=cl>        <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>l2_cache</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># L2에서 찾은 데이터를 L1으로 승격</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>l1_cache</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;l2_hits&#39;</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;total_misses&#39;</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span> <span class=n>promote_to_l1</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>True</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;데이터 저장&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># L2에 저장</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>l2_cache</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 필요시 L1에도 저장</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>promote_to_l1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>l1_cache</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;모든 레벨에서 키 삭제&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>l1_cache</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>l2_cache</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_overall_hit_rate</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>float</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;전체 히트율 계산&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>total_hits</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;l1_hits&#39;</span><span class=p>]</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;l2_hits&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>total_requests</span> <span class=o>=</span> <span class=n>total_hits</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;total_misses&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>total_hits</span> <span class=o>/</span> <span class=n>total_requests</span> <span class=k>if</span> <span class=n>total_requests</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=k>else</span> <span class=mf>0.0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CacheManager</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;캐시 관리자 - 다양한 캐시 계층 통합 관리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>multilevel_cache</span> <span class=o>=</span> <span class=n>MultiLevelCache</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>external_data_source</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># 원본 데이터 소스 시뮬레이션</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>load_from_source</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;원본 데이터 소스에서 로드 (DB, API 호출 시뮬레이션)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제로는 데이터베이스나 외부 API 호출</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>  <span class=c1># 네트워크 지연 시뮬레이션</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>external_data_source</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시를 통한 데이터 조회 (Cache-Aside 패턴)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 캐시에서 먼저 조회</span>
</span></span><span class=line><span class=cl>        <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>multilevel_cache</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 캐시 미스: 원본 소스에서 로드</span>
</span></span><span class=line><span class=cl>        <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>load_from_source</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 캐시에 저장</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>multilevel_cache</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;데이터 저장 (Write-Through 패턴)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 원본 데이터 소스에 저장</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>external_data_source</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 캐시에도 저장</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>multilevel_cache</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>invalidate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시 무효화&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>multilevel_cache</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_stats</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시 통계 정보 반환&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;multilevel_stats&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>multilevel_cache</span><span class=o>.</span><span class=n>stats</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;l1_hit_rate&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>multilevel_cache</span><span class=o>.</span><span class=n>l1_cache</span><span class=o>.</span><span class=n>get_hit_rate</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;l2_hit_rate&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>multilevel_cache</span><span class=o>.</span><span class=n>l2_cache</span><span class=o>.</span><span class=n>get_hit_rate</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;overall_hit_rate&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>multilevel_cache</span><span class=o>.</span><span class=n>get_overall_hit_rate</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;l1_size&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>multilevel_cache</span><span class=o>.</span><span class=n>l1_cache</span><span class=o>.</span><span class=n>size</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;l2_size&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>multilevel_cache</span><span class=o>.</span><span class=n>l2_cache</span><span class=o>.</span><span class=n>size</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시 및 테스트</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>demo_cache_system</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;캐시 시스템 데모&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=== 다층 캐시 시스템 데모 ===</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 캐시 관리자 생성</span>
</span></span><span class=line><span class=cl>    <span class=n>cache_manager</span> <span class=o>=</span> <span class=n>CacheManager</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 원본 데이터 설정 (데이터베이스 시뮬레이션)</span>
</span></span><span class=line><span class=cl>    <span class=n>test_data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;user:1&#39;</span><span class=p>:</span> <span class=p>{</span><span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;Alice&#39;</span><span class=p>,</span> <span class=s1>&#39;email&#39;</span><span class=p>:</span> <span class=s1>&#39;alice@example.com&#39;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;user:2&#39;</span><span class=p>:</span> <span class=p>{</span><span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;Bob&#39;</span><span class=p>,</span> <span class=s1>&#39;email&#39;</span><span class=p>:</span> <span class=s1>&#39;bob@example.com&#39;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;product:1&#39;</span><span class=p>:</span> <span class=p>{</span><span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;Laptop&#39;</span><span class=p>,</span> <span class=s1>&#39;price&#39;</span><span class=p>:</span> <span class=mf>999.99</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;product:2&#39;</span><span class=p>:</span> <span class=p>{</span><span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;Mouse&#39;</span><span class=p>,</span> <span class=s1>&#39;price&#39;</span><span class=p>:</span> <span class=mf>29.99</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>test_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=n>cache_manager</span><span class=o>.</span><span class=n>external_data_source</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;1. 데이터 조회 (캐시 미스 발생)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;-&#34;</span> <span class=o>*</span> <span class=mi>40</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>user1</span> <span class=o>=</span> <span class=n>cache_manager</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;user:1&#39;</span><span class=p>)</span>  <span class=c1># 원본에서 로드, L1과 L2에 캐시</span>
</span></span><span class=line><span class=cl>    <span class=n>end_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;user:1 조회: </span><span class=si>{</span><span class=n>user1</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;소요 시간: </span><span class=si>{</span><span class=p>(</span><span class=n>end_time</span> <span class=o>-</span> <span class=n>start_time</span><span class=p>)</span><span class=o>*</span><span class=mi>1000</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>ms (캐시 미스)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>2. 동일 데이터 재조회 (캐시 히트)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;-&#34;</span> <span class=o>*</span> <span class=mi>40</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>user1_cached</span> <span class=o>=</span> <span class=n>cache_manager</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;user:1&#39;</span><span class=p>)</span>  <span class=c1># L1 캐시 히트</span>
</span></span><span class=line><span class=cl>    <span class=n>end_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;user:1 재조회: </span><span class=si>{</span><span class=n>user1_cached</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;소요 시간: </span><span class=si>{</span><span class=p>(</span><span class=n>end_time</span> <span class=o>-</span> <span class=n>start_time</span><span class=p>)</span><span class=o>*</span><span class=mi>1000</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>ms (L1 캐시 히트)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>3. 여러 데이터 로드&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;-&#34;</span> <span class=o>*</span> <span class=mi>40</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>keys</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;user:2&#39;</span><span class=p>,</span> <span class=s1>&#39;product:1&#39;</span><span class=p>,</span> <span class=s1>&#39;product:2&#39;</span><span class=p>,</span> <span class=s1>&#39;user:1&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>keys</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>value</span> <span class=o>=</span> <span class=n>cache_manager</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>value</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span> <span class=k>if</span> <span class=s1>&#39;name&#39;</span> <span class=ow>in</span> <span class=n>value</span> <span class=k>else</span> <span class=s1>&#39;Unknown&#39;</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>4. 캐시 통계&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;-&#34;</span> <span class=o>*</span> <span class=mi>40</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>stats</span> <span class=o>=</span> <span class=n>cache_manager</span><span class=o>.</span><span class=n>get_stats</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;L1 히트율: </span><span class=si>{</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;l1_hit_rate&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>%</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;L2 히트율: </span><span class=si>{</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;l2_hit_rate&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>%</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;전체 히트율: </span><span class=si>{</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;overall_hit_rate&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>%</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;L1 캐시 크기: </span><span class=si>{</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;l1_size&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;L2 캐시 크기: </span><span class=si>{</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;l2_size&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>5. 데이터 업데이트 (Write-Through)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;-&#34;</span> <span class=o>*</span> <span class=mi>40</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>updated_user</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;Alice Smith&#39;</span><span class=p>,</span> <span class=s1>&#39;email&#39;</span><span class=p>:</span> <span class=s1>&#39;alice.smith@example.com&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>cache_manager</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=s1>&#39;user:1&#39;</span><span class=p>,</span> <span class=n>updated_user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>user1_updated</span> <span class=o>=</span> <span class=n>cache_manager</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;user:1&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;업데이트된 user:1: </span><span class=si>{</span><span class=n>user1_updated</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>6. 캐시 무효화&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;-&#34;</span> <span class=o>*</span> <span class=mi>40</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>cache_manager</span><span class=o>.</span><span class=n>invalidate</span><span class=p>(</span><span class=s1>&#39;user:1&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;user:1 캐시 무효화 완료&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 다시 조회하면 원본에서 로드</span>
</span></span><span class=line><span class=cl>    <span class=n>user1_after_invalidation</span> <span class=o>=</span> <span class=n>cache_manager</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;user:1&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;무효화 후 조회: </span><span class=si>{</span><span class=n>user1_after_invalidation</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>7. 최종 통계&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;-&#34;</span> <span class=o>*</span> <span class=mi>40</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>final_stats</span> <span class=o>=</span> <span class=n>cache_manager</span><span class=o>.</span><span class=n>get_stats</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>final_stats</span><span class=p>,</span> <span class=n>indent</span><span class=o>=</span><span class=mi>2</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>demo_cache_system</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=사례-5-netflix-글로벌-스트리밍-서비스>사례 5: Netflix 글로벌 스트리밍 서비스<a hidden class=anchor aria-hidden=true href=#사례-5-netflix-글로벌-스트리밍-서비스>#</a></h4><p><strong>시스템 구성:</strong></p><pre class=mermaid>graph TB
    User[사용자] --&gt; CDN[Open Connect CDN]
    CDN --&gt; API[API Gateway + 캐시]
    API --&gt; MC[Microservices]
    MC --&gt; Redis[(Redis Cache)]
    MC --&gt; Cassandra[(Cassandra DB)]
    Redis --&gt; EVS[EVCache Cluster]
    
    subgraph &#34;글로벌 CDN&#34;
        CDN1[아시아 PoP]
        CDN2[유럽 PoP] 
        CDN3[미주 PoP]
    end
    
    subgraph &#34;캐시 레이어&#34;
        L1[L1: 사용자 프로필]
        L2[L2: 추천 엔진]
        L3[L3: 콘텐츠 메타데이터]
    end
</pre><p><strong>워크플로우:</strong></p><ol><li>사용자가 Netflix 앱 실행</li><li>지역별 CDN 에서 UI 자산 및 미리보기 이미지 제공</li><li>API Gateway 에서 사용자 인증 정보 캐시 확인</li><li>추천 엔진이 Redis 에서 개인화 데이터 조회</li><li>EVCache 에서 콘텐츠 메타데이터 빠르게 로드</li><li>최종 화면 구성하여 사용자에게 전송</li></ol><p><strong>캐시의 역할:</strong></p><ul><li><strong>콘텐츠 전송</strong>: 전 세계 15,000 개 서버에 영상 콘텐츠 사전 배치</li><li><strong>메타데이터 캐싱</strong>: 영화/드라마 정보, 평점, 장르 등 정보 고속 제공</li><li><strong>개인화 캐싱</strong>: 시청 이력, 선호도 기반 추천 결과 임시 저장</li><li><strong>세션 관리</strong>: 사용자 로그인 상태, 시청 진행률 실시간 동기화</li></ul><p><strong>캐시 유무에 따른 차이점:</strong></p><table><thead><tr><th>항목</th><th>캐시 적용 전</th><th>캐시 적용 후</th></tr></thead><tbody><tr><td>콘텐츠 로딩 속도</td><td>15-30 초 (원본 서버)</td><td>2-5 초 (지역 CDN)</td></tr><tr><td>개인화 응답 시간</td><td>3-5 초 (DB 조회)</td><td>100-300ms (메모리)</td></tr><tr><td>동시 접속자 수</td><td>1 만명 한계</td><td>2 억명 동시 지원</td></tr><tr><td>글로벌 품질 균일성</td><td>지역별 편차 큼</td><td>전 세계 동일한 경험</td></tr><tr><td>인프라 비용</td><td>중앙집중형 고비용</td><td>분산형 효율적 구조</td></tr></tbody></table><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1>  1</a>
</span><span class=lnt id=hl-24-2><a class=lnlinks href=#hl-24-2>  2</a>
</span><span class=lnt id=hl-24-3><a class=lnlinks href=#hl-24-3>  3</a>
</span><span class=lnt id=hl-24-4><a class=lnlinks href=#hl-24-4>  4</a>
</span><span class=lnt id=hl-24-5><a class=lnlinks href=#hl-24-5>  5</a>
</span><span class=lnt id=hl-24-6><a class=lnlinks href=#hl-24-6>  6</a>
</span><span class=lnt id=hl-24-7><a class=lnlinks href=#hl-24-7>  7</a>
</span><span class=lnt id=hl-24-8><a class=lnlinks href=#hl-24-8>  8</a>
</span><span class=lnt id=hl-24-9><a class=lnlinks href=#hl-24-9>  9</a>
</span><span class=lnt id=hl-24-10><a class=lnlinks href=#hl-24-10> 10</a>
</span><span class=lnt id=hl-24-11><a class=lnlinks href=#hl-24-11> 11</a>
</span><span class=lnt id=hl-24-12><a class=lnlinks href=#hl-24-12> 12</a>
</span><span class=lnt id=hl-24-13><a class=lnlinks href=#hl-24-13> 13</a>
</span><span class=lnt id=hl-24-14><a class=lnlinks href=#hl-24-14> 14</a>
</span><span class=lnt id=hl-24-15><a class=lnlinks href=#hl-24-15> 15</a>
</span><span class=lnt id=hl-24-16><a class=lnlinks href=#hl-24-16> 16</a>
</span><span class=lnt id=hl-24-17><a class=lnlinks href=#hl-24-17> 17</a>
</span><span class=lnt id=hl-24-18><a class=lnlinks href=#hl-24-18> 18</a>
</span><span class=lnt id=hl-24-19><a class=lnlinks href=#hl-24-19> 19</a>
</span><span class=lnt id=hl-24-20><a class=lnlinks href=#hl-24-20> 20</a>
</span><span class=lnt id=hl-24-21><a class=lnlinks href=#hl-24-21> 21</a>
</span><span class=lnt id=hl-24-22><a class=lnlinks href=#hl-24-22> 22</a>
</span><span class=lnt id=hl-24-23><a class=lnlinks href=#hl-24-23> 23</a>
</span><span class=lnt id=hl-24-24><a class=lnlinks href=#hl-24-24> 24</a>
</span><span class=lnt id=hl-24-25><a class=lnlinks href=#hl-24-25> 25</a>
</span><span class=lnt id=hl-24-26><a class=lnlinks href=#hl-24-26> 26</a>
</span><span class=lnt id=hl-24-27><a class=lnlinks href=#hl-24-27> 27</a>
</span><span class=lnt id=hl-24-28><a class=lnlinks href=#hl-24-28> 28</a>
</span><span class=lnt id=hl-24-29><a class=lnlinks href=#hl-24-29> 29</a>
</span><span class=lnt id=hl-24-30><a class=lnlinks href=#hl-24-30> 30</a>
</span><span class=lnt id=hl-24-31><a class=lnlinks href=#hl-24-31> 31</a>
</span><span class=lnt id=hl-24-32><a class=lnlinks href=#hl-24-32> 32</a>
</span><span class=lnt id=hl-24-33><a class=lnlinks href=#hl-24-33> 33</a>
</span><span class=lnt id=hl-24-34><a class=lnlinks href=#hl-24-34> 34</a>
</span><span class=lnt id=hl-24-35><a class=lnlinks href=#hl-24-35> 35</a>
</span><span class=lnt id=hl-24-36><a class=lnlinks href=#hl-24-36> 36</a>
</span><span class=lnt id=hl-24-37><a class=lnlinks href=#hl-24-37> 37</a>
</span><span class=lnt id=hl-24-38><a class=lnlinks href=#hl-24-38> 38</a>
</span><span class=lnt id=hl-24-39><a class=lnlinks href=#hl-24-39> 39</a>
</span><span class=lnt id=hl-24-40><a class=lnlinks href=#hl-24-40> 40</a>
</span><span class=lnt id=hl-24-41><a class=lnlinks href=#hl-24-41> 41</a>
</span><span class=lnt id=hl-24-42><a class=lnlinks href=#hl-24-42> 42</a>
</span><span class=lnt id=hl-24-43><a class=lnlinks href=#hl-24-43> 43</a>
</span><span class=lnt id=hl-24-44><a class=lnlinks href=#hl-24-44> 44</a>
</span><span class=lnt id=hl-24-45><a class=lnlinks href=#hl-24-45> 45</a>
</span><span class=lnt id=hl-24-46><a class=lnlinks href=#hl-24-46> 46</a>
</span><span class=lnt id=hl-24-47><a class=lnlinks href=#hl-24-47> 47</a>
</span><span class=lnt id=hl-24-48><a class=lnlinks href=#hl-24-48> 48</a>
</span><span class=lnt id=hl-24-49><a class=lnlinks href=#hl-24-49> 49</a>
</span><span class=lnt id=hl-24-50><a class=lnlinks href=#hl-24-50> 50</a>
</span><span class=lnt id=hl-24-51><a class=lnlinks href=#hl-24-51> 51</a>
</span><span class=lnt id=hl-24-52><a class=lnlinks href=#hl-24-52> 52</a>
</span><span class=lnt id=hl-24-53><a class=lnlinks href=#hl-24-53> 53</a>
</span><span class=lnt id=hl-24-54><a class=lnlinks href=#hl-24-54> 54</a>
</span><span class=lnt id=hl-24-55><a class=lnlinks href=#hl-24-55> 55</a>
</span><span class=lnt id=hl-24-56><a class=lnlinks href=#hl-24-56> 56</a>
</span><span class=lnt id=hl-24-57><a class=lnlinks href=#hl-24-57> 57</a>
</span><span class=lnt id=hl-24-58><a class=lnlinks href=#hl-24-58> 58</a>
</span><span class=lnt id=hl-24-59><a class=lnlinks href=#hl-24-59> 59</a>
</span><span class=lnt id=hl-24-60><a class=lnlinks href=#hl-24-60> 60</a>
</span><span class=lnt id=hl-24-61><a class=lnlinks href=#hl-24-61> 61</a>
</span><span class=lnt id=hl-24-62><a class=lnlinks href=#hl-24-62> 62</a>
</span><span class=lnt id=hl-24-63><a class=lnlinks href=#hl-24-63> 63</a>
</span><span class=lnt id=hl-24-64><a class=lnlinks href=#hl-24-64> 64</a>
</span><span class=lnt id=hl-24-65><a class=lnlinks href=#hl-24-65> 65</a>
</span><span class=lnt id=hl-24-66><a class=lnlinks href=#hl-24-66> 66</a>
</span><span class=lnt id=hl-24-67><a class=lnlinks href=#hl-24-67> 67</a>
</span><span class=lnt id=hl-24-68><a class=lnlinks href=#hl-24-68> 68</a>
</span><span class=lnt id=hl-24-69><a class=lnlinks href=#hl-24-69> 69</a>
</span><span class=lnt id=hl-24-70><a class=lnlinks href=#hl-24-70> 70</a>
</span><span class=lnt id=hl-24-71><a class=lnlinks href=#hl-24-71> 71</a>
</span><span class=lnt id=hl-24-72><a class=lnlinks href=#hl-24-72> 72</a>
</span><span class=lnt id=hl-24-73><a class=lnlinks href=#hl-24-73> 73</a>
</span><span class=lnt id=hl-24-74><a class=lnlinks href=#hl-24-74> 74</a>
</span><span class=lnt id=hl-24-75><a class=lnlinks href=#hl-24-75> 75</a>
</span><span class=lnt id=hl-24-76><a class=lnlinks href=#hl-24-76> 76</a>
</span><span class=lnt id=hl-24-77><a class=lnlinks href=#hl-24-77> 77</a>
</span><span class=lnt id=hl-24-78><a class=lnlinks href=#hl-24-78> 78</a>
</span><span class=lnt id=hl-24-79><a class=lnlinks href=#hl-24-79> 79</a>
</span><span class=lnt id=hl-24-80><a class=lnlinks href=#hl-24-80> 80</a>
</span><span class=lnt id=hl-24-81><a class=lnlinks href=#hl-24-81> 81</a>
</span><span class=lnt id=hl-24-82><a class=lnlinks href=#hl-24-82> 82</a>
</span><span class=lnt id=hl-24-83><a class=lnlinks href=#hl-24-83> 83</a>
</span><span class=lnt id=hl-24-84><a class=lnlinks href=#hl-24-84> 84</a>
</span><span class=lnt id=hl-24-85><a class=lnlinks href=#hl-24-85> 85</a>
</span><span class=lnt id=hl-24-86><a class=lnlinks href=#hl-24-86> 86</a>
</span><span class=lnt id=hl-24-87><a class=lnlinks href=#hl-24-87> 87</a>
</span><span class=lnt id=hl-24-88><a class=lnlinks href=#hl-24-88> 88</a>
</span><span class=lnt id=hl-24-89><a class=lnlinks href=#hl-24-89> 89</a>
</span><span class=lnt id=hl-24-90><a class=lnlinks href=#hl-24-90> 90</a>
</span><span class=lnt id=hl-24-91><a class=lnlinks href=#hl-24-91> 91</a>
</span><span class=lnt id=hl-24-92><a class=lnlinks href=#hl-24-92> 92</a>
</span><span class=lnt id=hl-24-93><a class=lnlinks href=#hl-24-93> 93</a>
</span><span class=lnt id=hl-24-94><a class=lnlinks href=#hl-24-94> 94</a>
</span><span class=lnt id=hl-24-95><a class=lnlinks href=#hl-24-95> 95</a>
</span><span class=lnt id=hl-24-96><a class=lnlinks href=#hl-24-96> 96</a>
</span><span class=lnt id=hl-24-97><a class=lnlinks href=#hl-24-97> 97</a>
</span><span class=lnt id=hl-24-98><a class=lnlinks href=#hl-24-98> 98</a>
</span><span class=lnt id=hl-24-99><a class=lnlinks href=#hl-24-99> 99</a>
</span><span class=lnt id=hl-24-100><a class=lnlinks href=#hl-24-100>100</a>
</span><span class=lnt id=hl-24-101><a class=lnlinks href=#hl-24-101>101</a>
</span><span class=lnt id=hl-24-102><a class=lnlinks href=#hl-24-102>102</a>
</span><span class=lnt id=hl-24-103><a class=lnlinks href=#hl-24-103>103</a>
</span><span class=lnt id=hl-24-104><a class=lnlinks href=#hl-24-104>104</a>
</span><span class=lnt id=hl-24-105><a class=lnlinks href=#hl-24-105>105</a>
</span><span class=lnt id=hl-24-106><a class=lnlinks href=#hl-24-106>106</a>
</span><span class=lnt id=hl-24-107><a class=lnlinks href=#hl-24-107>107</a>
</span><span class=lnt id=hl-24-108><a class=lnlinks href=#hl-24-108>108</a>
</span><span class=lnt id=hl-24-109><a class=lnlinks href=#hl-24-109>109</a>
</span><span class=lnt id=hl-24-110><a class=lnlinks href=#hl-24-110>110</a>
</span><span class=lnt id=hl-24-111><a class=lnlinks href=#hl-24-111>111</a>
</span><span class=lnt id=hl-24-112><a class=lnlinks href=#hl-24-112>112</a>
</span><span class=lnt id=hl-24-113><a class=lnlinks href=#hl-24-113>113</a>
</span><span class=lnt id=hl-24-114><a class=lnlinks href=#hl-24-114>114</a>
</span><span class=lnt id=hl-24-115><a class=lnlinks href=#hl-24-115>115</a>
</span><span class=lnt id=hl-24-116><a class=lnlinks href=#hl-24-116>116</a>
</span><span class=lnt id=hl-24-117><a class=lnlinks href=#hl-24-117>117</a>
</span><span class=lnt id=hl-24-118><a class=lnlinks href=#hl-24-118>118</a>
</span><span class=lnt id=hl-24-119><a class=lnlinks href=#hl-24-119>119</a>
</span><span class=lnt id=hl-24-120><a class=lnlinks href=#hl-24-120>120</a>
</span><span class=lnt id=hl-24-121><a class=lnlinks href=#hl-24-121>121</a>
</span><span class=lnt id=hl-24-122><a class=lnlinks href=#hl-24-122>122</a>
</span><span class=lnt id=hl-24-123><a class=lnlinks href=#hl-24-123>123</a>
</span><span class=lnt id=hl-24-124><a class=lnlinks href=#hl-24-124>124</a>
</span><span class=lnt id=hl-24-125><a class=lnlinks href=#hl-24-125>125</a>
</span><span class=lnt id=hl-24-126><a class=lnlinks href=#hl-24-126>126</a>
</span><span class=lnt id=hl-24-127><a class=lnlinks href=#hl-24-127>127</a>
</span><span class=lnt id=hl-24-128><a class=lnlinks href=#hl-24-128>128</a>
</span><span class=lnt id=hl-24-129><a class=lnlinks href=#hl-24-129>129</a>
</span><span class=lnt id=hl-24-130><a class=lnlinks href=#hl-24-130>130</a>
</span><span class=lnt id=hl-24-131><a class=lnlinks href=#hl-24-131>131</a>
</span><span class=lnt id=hl-24-132><a class=lnlinks href=#hl-24-132>132</a>
</span><span class=lnt id=hl-24-133><a class=lnlinks href=#hl-24-133>133</a>
</span><span class=lnt id=hl-24-134><a class=lnlinks href=#hl-24-134>134</a>
</span><span class=lnt id=hl-24-135><a class=lnlinks href=#hl-24-135>135</a>
</span><span class=lnt id=hl-24-136><a class=lnlinks href=#hl-24-136>136</a>
</span><span class=lnt id=hl-24-137><a class=lnlinks href=#hl-24-137>137</a>
</span><span class=lnt id=hl-24-138><a class=lnlinks href=#hl-24-138>138</a>
</span><span class=lnt id=hl-24-139><a class=lnlinks href=#hl-24-139>139</a>
</span><span class=lnt id=hl-24-140><a class=lnlinks href=#hl-24-140>140</a>
</span><span class=lnt id=hl-24-141><a class=lnlinks href=#hl-24-141>141</a>
</span><span class=lnt id=hl-24-142><a class=lnlinks href=#hl-24-142>142</a>
</span><span class=lnt id=hl-24-143><a class=lnlinks href=#hl-24-143>143</a>
</span><span class=lnt id=hl-24-144><a class=lnlinks href=#hl-24-144>144</a>
</span><span class=lnt id=hl-24-145><a class=lnlinks href=#hl-24-145>145</a>
</span><span class=lnt id=hl-24-146><a class=lnlinks href=#hl-24-146>146</a>
</span><span class=lnt id=hl-24-147><a class=lnlinks href=#hl-24-147>147</a>
</span><span class=lnt id=hl-24-148><a class=lnlinks href=#hl-24-148>148</a>
</span><span class=lnt id=hl-24-149><a class=lnlinks href=#hl-24-149>149</a>
</span><span class=lnt id=hl-24-150><a class=lnlinks href=#hl-24-150>150</a>
</span><span class=lnt id=hl-24-151><a class=lnlinks href=#hl-24-151>151</a>
</span><span class=lnt id=hl-24-152><a class=lnlinks href=#hl-24-152>152</a>
</span><span class=lnt id=hl-24-153><a class=lnlinks href=#hl-24-153>153</a>
</span><span class=lnt id=hl-24-154><a class=lnlinks href=#hl-24-154>154</a>
</span><span class=lnt id=hl-24-155><a class=lnlinks href=#hl-24-155>155</a>
</span><span class=lnt id=hl-24-156><a class=lnlinks href=#hl-24-156>156</a>
</span><span class=lnt id=hl-24-157><a class=lnlinks href=#hl-24-157>157</a>
</span><span class=lnt id=hl-24-158><a class=lnlinks href=#hl-24-158>158</a>
</span><span class=lnt id=hl-24-159><a class=lnlinks href=#hl-24-159>159</a>
</span><span class=lnt id=hl-24-160><a class=lnlinks href=#hl-24-160>160</a>
</span><span class=lnt id=hl-24-161><a class=lnlinks href=#hl-24-161>161</a>
</span><span class=lnt id=hl-24-162><a class=lnlinks href=#hl-24-162>162</a>
</span><span class=lnt id=hl-24-163><a class=lnlinks href=#hl-24-163>163</a>
</span><span class=lnt id=hl-24-164><a class=lnlinks href=#hl-24-164>164</a>
</span><span class=lnt id=hl-24-165><a class=lnlinks href=#hl-24-165>165</a>
</span><span class=lnt id=hl-24-166><a class=lnlinks href=#hl-24-166>166</a>
</span><span class=lnt id=hl-24-167><a class=lnlinks href=#hl-24-167>167</a>
</span><span class=lnt id=hl-24-168><a class=lnlinks href=#hl-24-168>168</a>
</span><span class=lnt id=hl-24-169><a class=lnlinks href=#hl-24-169>169</a>
</span><span class=lnt id=hl-24-170><a class=lnlinks href=#hl-24-170>170</a>
</span><span class=lnt id=hl-24-171><a class=lnlinks href=#hl-24-171>171</a>
</span><span class=lnt id=hl-24-172><a class=lnlinks href=#hl-24-172>172</a>
</span><span class=lnt id=hl-24-173><a class=lnlinks href=#hl-24-173>173</a>
</span><span class=lnt id=hl-24-174><a class=lnlinks href=#hl-24-174>174</a>
</span><span class=lnt id=hl-24-175><a class=lnlinks href=#hl-24-175>175</a>
</span><span class=lnt id=hl-24-176><a class=lnlinks href=#hl-24-176>176</a>
</span><span class=lnt id=hl-24-177><a class=lnlinks href=#hl-24-177>177</a>
</span><span class=lnt id=hl-24-178><a class=lnlinks href=#hl-24-178>178</a>
</span><span class=lnt id=hl-24-179><a class=lnlinks href=#hl-24-179>179</a>
</span><span class=lnt id=hl-24-180><a class=lnlinks href=#hl-24-180>180</a>
</span><span class=lnt id=hl-24-181><a class=lnlinks href=#hl-24-181>181</a>
</span><span class=lnt id=hl-24-182><a class=lnlinks href=#hl-24-182>182</a>
</span><span class=lnt id=hl-24-183><a class=lnlinks href=#hl-24-183>183</a>
</span><span class=lnt id=hl-24-184><a class=lnlinks href=#hl-24-184>184</a>
</span><span class=lnt id=hl-24-185><a class=lnlinks href=#hl-24-185>185</a>
</span><span class=lnt id=hl-24-186><a class=lnlinks href=#hl-24-186>186</a>
</span><span class=lnt id=hl-24-187><a class=lnlinks href=#hl-24-187>187</a>
</span><span class=lnt id=hl-24-188><a class=lnlinks href=#hl-24-188>188</a>
</span><span class=lnt id=hl-24-189><a class=lnlinks href=#hl-24-189>189</a>
</span><span class=lnt id=hl-24-190><a class=lnlinks href=#hl-24-190>190</a>
</span><span class=lnt id=hl-24-191><a class=lnlinks href=#hl-24-191>191</a>
</span><span class=lnt id=hl-24-192><a class=lnlinks href=#hl-24-192>192</a>
</span><span class=lnt id=hl-24-193><a class=lnlinks href=#hl-24-193>193</a>
</span><span class=lnt id=hl-24-194><a class=lnlinks href=#hl-24-194>194</a>
</span><span class=lnt id=hl-24-195><a class=lnlinks href=#hl-24-195>195</a>
</span><span class=lnt id=hl-24-196><a class=lnlinks href=#hl-24-196>196</a>
</span><span class=lnt id=hl-24-197><a class=lnlinks href=#hl-24-197>197</a>
</span><span class=lnt id=hl-24-198><a class=lnlinks href=#hl-24-198>198</a>
</span><span class=lnt id=hl-24-199><a class=lnlinks href=#hl-24-199>199</a>
</span><span class=lnt id=hl-24-200><a class=lnlinks href=#hl-24-200>200</a>
</span><span class=lnt id=hl-24-201><a class=lnlinks href=#hl-24-201>201</a>
</span><span class=lnt id=hl-24-202><a class=lnlinks href=#hl-24-202>202</a>
</span><span class=lnt id=hl-24-203><a class=lnlinks href=#hl-24-203>203</a>
</span><span class=lnt id=hl-24-204><a class=lnlinks href=#hl-24-204>204</a>
</span><span class=lnt id=hl-24-205><a class=lnlinks href=#hl-24-205>205</a>
</span><span class=lnt id=hl-24-206><a class=lnlinks href=#hl-24-206>206</a>
</span><span class=lnt id=hl-24-207><a class=lnlinks href=#hl-24-207>207</a>
</span><span class=lnt id=hl-24-208><a class=lnlinks href=#hl-24-208>208</a>
</span><span class=lnt id=hl-24-209><a class=lnlinks href=#hl-24-209>209</a>
</span><span class=lnt id=hl-24-210><a class=lnlinks href=#hl-24-210>210</a>
</span><span class=lnt id=hl-24-211><a class=lnlinks href=#hl-24-211>211</a>
</span><span class=lnt id=hl-24-212><a class=lnlinks href=#hl-24-212>212</a>
</span><span class=lnt id=hl-24-213><a class=lnlinks href=#hl-24-213>213</a>
</span><span class=lnt id=hl-24-214><a class=lnlinks href=#hl-24-214>214</a>
</span><span class=lnt id=hl-24-215><a class=lnlinks href=#hl-24-215>215</a>
</span><span class=lnt id=hl-24-216><a class=lnlinks href=#hl-24-216>216</a>
</span><span class=lnt id=hl-24-217><a class=lnlinks href=#hl-24-217>217</a>
</span><span class=lnt id=hl-24-218><a class=lnlinks href=#hl-24-218>218</a>
</span><span class=lnt id=hl-24-219><a class=lnlinks href=#hl-24-219>219</a>
</span><span class=lnt id=hl-24-220><a class=lnlinks href=#hl-24-220>220</a>
</span><span class=lnt id=hl-24-221><a class=lnlinks href=#hl-24-221>221</a>
</span><span class=lnt id=hl-24-222><a class=lnlinks href=#hl-24-222>222</a>
</span><span class=lnt id=hl-24-223><a class=lnlinks href=#hl-24-223>223</a>
</span><span class=lnt id=hl-24-224><a class=lnlinks href=#hl-24-224>224</a>
</span><span class=lnt id=hl-24-225><a class=lnlinks href=#hl-24-225>225</a>
</span><span class=lnt id=hl-24-226><a class=lnlinks href=#hl-24-226>226</a>
</span><span class=lnt id=hl-24-227><a class=lnlinks href=#hl-24-227>227</a>
</span><span class=lnt id=hl-24-228><a class=lnlinks href=#hl-24-228>228</a>
</span><span class=lnt id=hl-24-229><a class=lnlinks href=#hl-24-229>229</a>
</span><span class=lnt id=hl-24-230><a class=lnlinks href=#hl-24-230>230</a>
</span><span class=lnt id=hl-24-231><a class=lnlinks href=#hl-24-231>231</a>
</span><span class=lnt id=hl-24-232><a class=lnlinks href=#hl-24-232>232</a>
</span><span class=lnt id=hl-24-233><a class=lnlinks href=#hl-24-233>233</a>
</span><span class=lnt id=hl-24-234><a class=lnlinks href=#hl-24-234>234</a>
</span><span class=lnt id=hl-24-235><a class=lnlinks href=#hl-24-235>235</a>
</span><span class=lnt id=hl-24-236><a class=lnlinks href=#hl-24-236>236</a>
</span><span class=lnt id=hl-24-237><a class=lnlinks href=#hl-24-237>237</a>
</span><span class=lnt id=hl-24-238><a class=lnlinks href=#hl-24-238>238</a>
</span><span class=lnt id=hl-24-239><a class=lnlinks href=#hl-24-239>239</a>
</span><span class=lnt id=hl-24-240><a class=lnlinks href=#hl-24-240>240</a>
</span><span class=lnt id=hl-24-241><a class=lnlinks href=#hl-24-241>241</a>
</span><span class=lnt id=hl-24-242><a class=lnlinks href=#hl-24-242>242</a>
</span><span class=lnt id=hl-24-243><a class=lnlinks href=#hl-24-243>243</a>
</span><span class=lnt id=hl-24-244><a class=lnlinks href=#hl-24-244>244</a>
</span><span class=lnt id=hl-24-245><a class=lnlinks href=#hl-24-245>245</a>
</span><span class=lnt id=hl-24-246><a class=lnlinks href=#hl-24-246>246</a>
</span><span class=lnt id=hl-24-247><a class=lnlinks href=#hl-24-247>247</a>
</span><span class=lnt id=hl-24-248><a class=lnlinks href=#hl-24-248>248</a>
</span><span class=lnt id=hl-24-249><a class=lnlinks href=#hl-24-249>249</a>
</span><span class=lnt id=hl-24-250><a class=lnlinks href=#hl-24-250>250</a>
</span><span class=lnt id=hl-24-251><a class=lnlinks href=#hl-24-251>251</a>
</span><span class=lnt id=hl-24-252><a class=lnlinks href=#hl-24-252>252</a>
</span><span class=lnt id=hl-24-253><a class=lnlinks href=#hl-24-253>253</a>
</span><span class=lnt id=hl-24-254><a class=lnlinks href=#hl-24-254>254</a>
</span><span class=lnt id=hl-24-255><a class=lnlinks href=#hl-24-255>255</a>
</span><span class=lnt id=hl-24-256><a class=lnlinks href=#hl-24-256>256</a>
</span><span class=lnt id=hl-24-257><a class=lnlinks href=#hl-24-257>257</a>
</span><span class=lnt id=hl-24-258><a class=lnlinks href=#hl-24-258>258</a>
</span><span class=lnt id=hl-24-259><a class=lnlinks href=#hl-24-259>259</a>
</span><span class=lnt id=hl-24-260><a class=lnlinks href=#hl-24-260>260</a>
</span><span class=lnt id=hl-24-261><a class=lnlinks href=#hl-24-261>261</a>
</span><span class=lnt id=hl-24-262><a class=lnlinks href=#hl-24-262>262</a>
</span><span class=lnt id=hl-24-263><a class=lnlinks href=#hl-24-263>263</a>
</span><span class=lnt id=hl-24-264><a class=lnlinks href=#hl-24-264>264</a>
</span><span class=lnt id=hl-24-265><a class=lnlinks href=#hl-24-265>265</a>
</span><span class=lnt id=hl-24-266><a class=lnlinks href=#hl-24-266>266</a>
</span><span class=lnt id=hl-24-267><a class=lnlinks href=#hl-24-267>267</a>
</span><span class=lnt id=hl-24-268><a class=lnlinks href=#hl-24-268>268</a>
</span><span class=lnt id=hl-24-269><a class=lnlinks href=#hl-24-269>269</a>
</span><span class=lnt id=hl-24-270><a class=lnlinks href=#hl-24-270>270</a>
</span><span class=lnt id=hl-24-271><a class=lnlinks href=#hl-24-271>271</a>
</span><span class=lnt id=hl-24-272><a class=lnlinks href=#hl-24-272>272</a>
</span><span class=lnt id=hl-24-273><a class=lnlinks href=#hl-24-273>273</a>
</span><span class=lnt id=hl-24-274><a class=lnlinks href=#hl-24-274>274</a>
</span><span class=lnt id=hl-24-275><a class=lnlinks href=#hl-24-275>275</a>
</span><span class=lnt id=hl-24-276><a class=lnlinks href=#hl-24-276>276</a>
</span><span class=lnt id=hl-24-277><a class=lnlinks href=#hl-24-277>277</a>
</span><span class=lnt id=hl-24-278><a class=lnlinks href=#hl-24-278>278</a>
</span><span class=lnt id=hl-24-279><a class=lnlinks href=#hl-24-279>279</a>
</span><span class=lnt id=hl-24-280><a class=lnlinks href=#hl-24-280>280</a>
</span><span class=lnt id=hl-24-281><a class=lnlinks href=#hl-24-281>281</a>
</span><span class=lnt id=hl-24-282><a class=lnlinks href=#hl-24-282>282</a>
</span><span class=lnt id=hl-24-283><a class=lnlinks href=#hl-24-283>283</a>
</span><span class=lnt id=hl-24-284><a class=lnlinks href=#hl-24-284>284</a>
</span><span class=lnt id=hl-24-285><a class=lnlinks href=#hl-24-285>285</a>
</span><span class=lnt id=hl-24-286><a class=lnlinks href=#hl-24-286>286</a>
</span><span class=lnt id=hl-24-287><a class=lnlinks href=#hl-24-287>287</a>
</span><span class=lnt id=hl-24-288><a class=lnlinks href=#hl-24-288>288</a>
</span><span class=lnt id=hl-24-289><a class=lnlinks href=#hl-24-289>289</a>
</span><span class=lnt id=hl-24-290><a class=lnlinks href=#hl-24-290>290</a>
</span><span class=lnt id=hl-24-291><a class=lnlinks href=#hl-24-291>291</a>
</span><span class=lnt id=hl-24-292><a class=lnlinks href=#hl-24-292>292</a>
</span><span class=lnt id=hl-24-293><a class=lnlinks href=#hl-24-293>293</a>
</span><span class=lnt id=hl-24-294><a class=lnlinks href=#hl-24-294>294</a>
</span><span class=lnt id=hl-24-295><a class=lnlinks href=#hl-24-295>295</a>
</span><span class=lnt id=hl-24-296><a class=lnlinks href=#hl-24-296>296</a>
</span><span class=lnt id=hl-24-297><a class=lnlinks href=#hl-24-297>297</a>
</span><span class=lnt id=hl-24-298><a class=lnlinks href=#hl-24-298>298</a>
</span><span class=lnt id=hl-24-299><a class=lnlinks href=#hl-24-299>299</a>
</span><span class=lnt id=hl-24-300><a class=lnlinks href=#hl-24-300>300</a>
</span><span class=lnt id=hl-24-301><a class=lnlinks href=#hl-24-301>301</a>
</span><span class=lnt id=hl-24-302><a class=lnlinks href=#hl-24-302>302</a>
</span><span class=lnt id=hl-24-303><a class=lnlinks href=#hl-24-303>303</a>
</span><span class=lnt id=hl-24-304><a class=lnlinks href=#hl-24-304>304</a>
</span><span class=lnt id=hl-24-305><a class=lnlinks href=#hl-24-305>305</a>
</span><span class=lnt id=hl-24-306><a class=lnlinks href=#hl-24-306>306</a>
</span><span class=lnt id=hl-24-307><a class=lnlinks href=#hl-24-307>307</a>
</span><span class=lnt id=hl-24-308><a class=lnlinks href=#hl-24-308>308</a>
</span><span class=lnt id=hl-24-309><a class=lnlinks href=#hl-24-309>309</a>
</span><span class=lnt id=hl-24-310><a class=lnlinks href=#hl-24-310>310</a>
</span><span class=lnt id=hl-24-311><a class=lnlinks href=#hl-24-311>311</a>
</span><span class=lnt id=hl-24-312><a class=lnlinks href=#hl-24-312>312</a>
</span><span class=lnt id=hl-24-313><a class=lnlinks href=#hl-24-313>313</a>
</span><span class=lnt id=hl-24-314><a class=lnlinks href=#hl-24-314>314</a>
</span><span class=lnt id=hl-24-315><a class=lnlinks href=#hl-24-315>315</a>
</span><span class=lnt id=hl-24-316><a class=lnlinks href=#hl-24-316>316</a>
</span><span class=lnt id=hl-24-317><a class=lnlinks href=#hl-24-317>317</a>
</span><span class=lnt id=hl-24-318><a class=lnlinks href=#hl-24-318>318</a>
</span><span class=lnt id=hl-24-319><a class=lnlinks href=#hl-24-319>319</a>
</span><span class=lnt id=hl-24-320><a class=lnlinks href=#hl-24-320>320</a>
</span><span class=lnt id=hl-24-321><a class=lnlinks href=#hl-24-321>321</a>
</span><span class=lnt id=hl-24-322><a class=lnlinks href=#hl-24-322>322</a>
</span><span class=lnt id=hl-24-323><a class=lnlinks href=#hl-24-323>323</a>
</span><span class=lnt id=hl-24-324><a class=lnlinks href=#hl-24-324>324</a>
</span><span class=lnt id=hl-24-325><a class=lnlinks href=#hl-24-325>325</a>
</span><span class=lnt id=hl-24-326><a class=lnlinks href=#hl-24-326>326</a>
</span><span class=lnt id=hl-24-327><a class=lnlinks href=#hl-24-327>327</a>
</span><span class=lnt id=hl-24-328><a class=lnlinks href=#hl-24-328>328</a>
</span><span class=lnt id=hl-24-329><a class=lnlinks href=#hl-24-329>329</a>
</span><span class=lnt id=hl-24-330><a class=lnlinks href=#hl-24-330>330</a>
</span><span class=lnt id=hl-24-331><a class=lnlinks href=#hl-24-331>331</a>
</span><span class=lnt id=hl-24-332><a class=lnlinks href=#hl-24-332>332</a>
</span><span class=lnt id=hl-24-333><a class=lnlinks href=#hl-24-333>333</a>
</span><span class=lnt id=hl-24-334><a class=lnlinks href=#hl-24-334>334</a>
</span><span class=lnt id=hl-24-335><a class=lnlinks href=#hl-24-335>335</a>
</span><span class=lnt id=hl-24-336><a class=lnlinks href=#hl-24-336>336</a>
</span><span class=lnt id=hl-24-337><a class=lnlinks href=#hl-24-337>337</a>
</span><span class=lnt id=hl-24-338><a class=lnlinks href=#hl-24-338>338</a>
</span><span class=lnt id=hl-24-339><a class=lnlinks href=#hl-24-339>339</a>
</span><span class=lnt id=hl-24-340><a class=lnlinks href=#hl-24-340>340</a>
</span><span class=lnt id=hl-24-341><a class=lnlinks href=#hl-24-341>341</a>
</span><span class=lnt id=hl-24-342><a class=lnlinks href=#hl-24-342>342</a>
</span><span class=lnt id=hl-24-343><a class=lnlinks href=#hl-24-343>343</a>
</span><span class=lnt id=hl-24-344><a class=lnlinks href=#hl-24-344>344</a>
</span><span class=lnt id=hl-24-345><a class=lnlinks href=#hl-24-345>345</a>
</span><span class=lnt id=hl-24-346><a class=lnlinks href=#hl-24-346>346</a>
</span><span class=lnt id=hl-24-347><a class=lnlinks href=#hl-24-347>347</a>
</span><span class=lnt id=hl-24-348><a class=lnlinks href=#hl-24-348>348</a>
</span><span class=lnt id=hl-24-349><a class=lnlinks href=#hl-24-349>349</a>
</span><span class=lnt id=hl-24-350><a class=lnlinks href=#hl-24-350>350</a>
</span><span class=lnt id=hl-24-351><a class=lnlinks href=#hl-24-351>351</a>
</span><span class=lnt id=hl-24-352><a class=lnlinks href=#hl-24-352>352</a>
</span><span class=lnt id=hl-24-353><a class=lnlinks href=#hl-24-353>353</a>
</span><span class=lnt id=hl-24-354><a class=lnlinks href=#hl-24-354>354</a>
</span><span class=lnt id=hl-24-355><a class=lnlinks href=#hl-24-355>355</a>
</span><span class=lnt id=hl-24-356><a class=lnlinks href=#hl-24-356>356</a>
</span><span class=lnt id=hl-24-357><a class=lnlinks href=#hl-24-357>357</a>
</span><span class=lnt id=hl-24-358><a class=lnlinks href=#hl-24-358>358</a>
</span><span class=lnt id=hl-24-359><a class=lnlinks href=#hl-24-359>359</a>
</span><span class=lnt id=hl-24-360><a class=lnlinks href=#hl-24-360>360</a>
</span><span class=lnt id=hl-24-361><a class=lnlinks href=#hl-24-361>361</a>
</span><span class=lnt id=hl-24-362><a class=lnlinks href=#hl-24-362>362</a>
</span><span class=lnt id=hl-24-363><a class=lnlinks href=#hl-24-363>363</a>
</span><span class=lnt id=hl-24-364><a class=lnlinks href=#hl-24-364>364</a>
</span><span class=lnt id=hl-24-365><a class=lnlinks href=#hl-24-365>365</a>
</span><span class=lnt id=hl-24-366><a class=lnlinks href=#hl-24-366>366</a>
</span><span class=lnt id=hl-24-367><a class=lnlinks href=#hl-24-367>367</a>
</span><span class=lnt id=hl-24-368><a class=lnlinks href=#hl-24-368>368</a>
</span><span class=lnt id=hl-24-369><a class=lnlinks href=#hl-24-369>369</a>
</span><span class=lnt id=hl-24-370><a class=lnlinks href=#hl-24-370>370</a>
</span><span class=lnt id=hl-24-371><a class=lnlinks href=#hl-24-371>371</a>
</span><span class=lnt id=hl-24-372><a class=lnlinks href=#hl-24-372>372</a>
</span><span class=lnt id=hl-24-373><a class=lnlinks href=#hl-24-373>373</a>
</span><span class=lnt id=hl-24-374><a class=lnlinks href=#hl-24-374>374</a>
</span><span class=lnt id=hl-24-375><a class=lnlinks href=#hl-24-375>375</a>
</span><span class=lnt id=hl-24-376><a class=lnlinks href=#hl-24-376>376</a>
</span><span class=lnt id=hl-24-377><a class=lnlinks href=#hl-24-377>377</a>
</span><span class=lnt id=hl-24-378><a class=lnlinks href=#hl-24-378>378</a>
</span><span class=lnt id=hl-24-379><a class=lnlinks href=#hl-24-379>379</a>
</span><span class=lnt id=hl-24-380><a class=lnlinks href=#hl-24-380>380</a>
</span><span class=lnt id=hl-24-381><a class=lnlinks href=#hl-24-381>381</a>
</span><span class=lnt id=hl-24-382><a class=lnlinks href=#hl-24-382>382</a>
</span><span class=lnt id=hl-24-383><a class=lnlinks href=#hl-24-383>383</a>
</span><span class=lnt id=hl-24-384><a class=lnlinks href=#hl-24-384>384</a>
</span><span class=lnt id=hl-24-385><a class=lnlinks href=#hl-24-385>385</a>
</span><span class=lnt id=hl-24-386><a class=lnlinks href=#hl-24-386>386</a>
</span><span class=lnt id=hl-24-387><a class=lnlinks href=#hl-24-387>387</a>
</span><span class=lnt id=hl-24-388><a class=lnlinks href=#hl-24-388>388</a>
</span><span class=lnt id=hl-24-389><a class=lnlinks href=#hl-24-389>389</a>
</span><span class=lnt id=hl-24-390><a class=lnlinks href=#hl-24-390>390</a>
</span><span class=lnt id=hl-24-391><a class=lnlinks href=#hl-24-391>391</a>
</span><span class=lnt id=hl-24-392><a class=lnlinks href=#hl-24-392>392</a>
</span><span class=lnt id=hl-24-393><a class=lnlinks href=#hl-24-393>393</a>
</span><span class=lnt id=hl-24-394><a class=lnlinks href=#hl-24-394>394</a>
</span><span class=lnt id=hl-24-395><a class=lnlinks href=#hl-24-395>395</a>
</span><span class=lnt id=hl-24-396><a class=lnlinks href=#hl-24-396>396</a>
</span><span class=lnt id=hl-24-397><a class=lnlinks href=#hl-24-397>397</a>
</span><span class=lnt id=hl-24-398><a class=lnlinks href=#hl-24-398>398</a>
</span><span class=lnt id=hl-24-399><a class=lnlinks href=#hl-24-399>399</a>
</span><span class=lnt id=hl-24-400><a class=lnlinks href=#hl-24-400>400</a>
</span><span class=lnt id=hl-24-401><a class=lnlinks href=#hl-24-401>401</a>
</span><span class=lnt id=hl-24-402><a class=lnlinks href=#hl-24-402>402</a>
</span><span class=lnt id=hl-24-403><a class=lnlinks href=#hl-24-403>403</a>
</span><span class=lnt id=hl-24-404><a class=lnlinks href=#hl-24-404>404</a>
</span><span class=lnt id=hl-24-405><a class=lnlinks href=#hl-24-405>405</a>
</span><span class=lnt id=hl-24-406><a class=lnlinks href=#hl-24-406>406</a>
</span><span class=lnt id=hl-24-407><a class=lnlinks href=#hl-24-407>407</a>
</span><span class=lnt id=hl-24-408><a class=lnlinks href=#hl-24-408>408</a>
</span><span class=lnt id=hl-24-409><a class=lnlinks href=#hl-24-409>409</a>
</span><span class=lnt id=hl-24-410><a class=lnlinks href=#hl-24-410>410</a>
</span><span class=lnt id=hl-24-411><a class=lnlinks href=#hl-24-411>411</a>
</span><span class=lnt id=hl-24-412><a class=lnlinks href=#hl-24-412>412</a>
</span><span class=lnt id=hl-24-413><a class=lnlinks href=#hl-24-413>413</a>
</span><span class=lnt id=hl-24-414><a class=lnlinks href=#hl-24-414>414</a>
</span><span class=lnt id=hl-24-415><a class=lnlinks href=#hl-24-415>415</a>
</span><span class=lnt id=hl-24-416><a class=lnlinks href=#hl-24-416>416</a>
</span><span class=lnt id=hl-24-417><a class=lnlinks href=#hl-24-417>417</a>
</span><span class=lnt id=hl-24-418><a class=lnlinks href=#hl-24-418>418</a>
</span><span class=lnt id=hl-24-419><a class=lnlinks href=#hl-24-419>419</a>
</span><span class=lnt id=hl-24-420><a class=lnlinks href=#hl-24-420>420</a>
</span><span class=lnt id=hl-24-421><a class=lnlinks href=#hl-24-421>421</a>
</span><span class=lnt id=hl-24-422><a class=lnlinks href=#hl-24-422>422</a>
</span><span class=lnt id=hl-24-423><a class=lnlinks href=#hl-24-423>423</a>
</span><span class=lnt id=hl-24-424><a class=lnlinks href=#hl-24-424>424</a>
</span><span class=lnt id=hl-24-425><a class=lnlinks href=#hl-24-425>425</a>
</span><span class=lnt id=hl-24-426><a class=lnlinks href=#hl-24-426>426</a>
</span><span class=lnt id=hl-24-427><a class=lnlinks href=#hl-24-427>427</a>
</span><span class=lnt id=hl-24-428><a class=lnlinks href=#hl-24-428>428</a>
</span><span class=lnt id=hl-24-429><a class=lnlinks href=#hl-24-429>429</a>
</span><span class=lnt id=hl-24-430><a class=lnlinks href=#hl-24-430>430</a>
</span><span class=lnt id=hl-24-431><a class=lnlinks href=#hl-24-431>431</a>
</span><span class=lnt id=hl-24-432><a class=lnlinks href=#hl-24-432>432</a>
</span><span class=lnt id=hl-24-433><a class=lnlinks href=#hl-24-433>433</a>
</span><span class=lnt id=hl-24-434><a class=lnlinks href=#hl-24-434>434</a>
</span><span class=lnt id=hl-24-435><a class=lnlinks href=#hl-24-435>435</a>
</span><span class=lnt id=hl-24-436><a class=lnlinks href=#hl-24-436>436</a>
</span><span class=lnt id=hl-24-437><a class=lnlinks href=#hl-24-437>437</a>
</span><span class=lnt id=hl-24-438><a class=lnlinks href=#hl-24-438>438</a>
</span><span class=lnt id=hl-24-439><a class=lnlinks href=#hl-24-439>439</a>
</span><span class=lnt id=hl-24-440><a class=lnlinks href=#hl-24-440>440</a>
</span><span class=lnt id=hl-24-441><a class=lnlinks href=#hl-24-441>441</a>
</span><span class=lnt id=hl-24-442><a class=lnlinks href=#hl-24-442>442</a>
</span><span class=lnt id=hl-24-443><a class=lnlinks href=#hl-24-443>443</a>
</span><span class=lnt id=hl-24-444><a class=lnlinks href=#hl-24-444>444</a>
</span><span class=lnt id=hl-24-445><a class=lnlinks href=#hl-24-445>445</a>
</span><span class=lnt id=hl-24-446><a class=lnlinks href=#hl-24-446>446</a>
</span><span class=lnt id=hl-24-447><a class=lnlinks href=#hl-24-447>447</a>
</span><span class=lnt id=hl-24-448><a class=lnlinks href=#hl-24-448>448</a>
</span><span class=lnt id=hl-24-449><a class=lnlinks href=#hl-24-449>449</a>
</span><span class=lnt id=hl-24-450><a class=lnlinks href=#hl-24-450>450</a>
</span><span class=lnt id=hl-24-451><a class=lnlinks href=#hl-24-451>451</a>
</span><span class=lnt id=hl-24-452><a class=lnlinks href=#hl-24-452>452</a>
</span><span class=lnt id=hl-24-453><a class=lnlinks href=#hl-24-453>453</a>
</span><span class=lnt id=hl-24-454><a class=lnlinks href=#hl-24-454>454</a>
</span><span class=lnt id=hl-24-455><a class=lnlinks href=#hl-24-455>455</a>
</span><span class=lnt id=hl-24-456><a class=lnlinks href=#hl-24-456>456</a>
</span><span class=lnt id=hl-24-457><a class=lnlinks href=#hl-24-457>457</a>
</span><span class=lnt id=hl-24-458><a class=lnlinks href=#hl-24-458>458</a>
</span><span class=lnt id=hl-24-459><a class=lnlinks href=#hl-24-459>459</a>
</span><span class=lnt id=hl-24-460><a class=lnlinks href=#hl-24-460>460</a>
</span><span class=lnt id=hl-24-461><a class=lnlinks href=#hl-24-461>461</a>
</span><span class=lnt id=hl-24-462><a class=lnlinks href=#hl-24-462>462</a>
</span><span class=lnt id=hl-24-463><a class=lnlinks href=#hl-24-463>463</a>
</span><span class=lnt id=hl-24-464><a class=lnlinks href=#hl-24-464>464</a>
</span><span class=lnt id=hl-24-465><a class=lnlinks href=#hl-24-465>465</a>
</span><span class=lnt id=hl-24-466><a class=lnlinks href=#hl-24-466>466</a>
</span><span class=lnt id=hl-24-467><a class=lnlinks href=#hl-24-467>467</a>
</span><span class=lnt id=hl-24-468><a class=lnlinks href=#hl-24-468>468</a>
</span><span class=lnt id=hl-24-469><a class=lnlinks href=#hl-24-469>469</a>
</span><span class=lnt id=hl-24-470><a class=lnlinks href=#hl-24-470>470</a>
</span><span class=lnt id=hl-24-471><a class=lnlinks href=#hl-24-471>471</a>
</span><span class=lnt id=hl-24-472><a class=lnlinks href=#hl-24-472>472</a>
</span><span class=lnt id=hl-24-473><a class=lnlinks href=#hl-24-473>473</a>
</span><span class=lnt id=hl-24-474><a class=lnlinks href=#hl-24-474>474</a>
</span><span class=lnt id=hl-24-475><a class=lnlinks href=#hl-24-475>475</a>
</span><span class=lnt id=hl-24-476><a class=lnlinks href=#hl-24-476>476</a>
</span><span class=lnt id=hl-24-477><a class=lnlinks href=#hl-24-477>477</a>
</span><span class=lnt id=hl-24-478><a class=lnlinks href=#hl-24-478>478</a>
</span><span class=lnt id=hl-24-479><a class=lnlinks href=#hl-24-479>479</a>
</span><span class=lnt id=hl-24-480><a class=lnlinks href=#hl-24-480>480</a>
</span><span class=lnt id=hl-24-481><a class=lnlinks href=#hl-24-481>481</a>
</span><span class=lnt id=hl-24-482><a class=lnlinks href=#hl-24-482>482</a>
</span><span class=lnt id=hl-24-483><a class=lnlinks href=#hl-24-483>483</a>
</span><span class=lnt id=hl-24-484><a class=lnlinks href=#hl-24-484>484</a>
</span><span class=lnt id=hl-24-485><a class=lnlinks href=#hl-24-485>485</a>
</span><span class=lnt id=hl-24-486><a class=lnlinks href=#hl-24-486>486</a>
</span><span class=lnt id=hl-24-487><a class=lnlinks href=#hl-24-487>487</a>
</span><span class=lnt id=hl-24-488><a class=lnlinks href=#hl-24-488>488</a>
</span><span class=lnt id=hl-24-489><a class=lnlinks href=#hl-24-489>489</a>
</span><span class=lnt id=hl-24-490><a class=lnlinks href=#hl-24-490>490</a>
</span><span class=lnt id=hl-24-491><a class=lnlinks href=#hl-24-491>491</a>
</span><span class=lnt id=hl-24-492><a class=lnlinks href=#hl-24-492>492</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>Multi-Level Cache System Implementation
</span></span></span><span class=line><span class=cl><span class=s2>Netflix와 유사한 다층 캐시 시스템 구현
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>주요 기능:
</span></span></span><span class=line><span class=cl><span class=s2>1. L1: 사용자 세션 캐시 (메모리 기반)
</span></span></span><span class=line><span class=cl><span class=s2>2. L2: 콘텐츠 메타데이터 캐시 (Redis 시뮬레이션)
</span></span></span><span class=line><span class=cl><span class=s2>3. L3: CDN 캐시 (정적 콘텐츠)
</span></span></span><span class=line><span class=cl><span class=s2>4. LRU, TTL 교체 정책 적용
</span></span></span><span class=line><span class=cl><span class=s2>5. 캐시 히트율 모니터링
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>hashlib</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>Any</span><span class=p>,</span> <span class=n>Optional</span><span class=p>,</span> <span class=n>Tuple</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>OrderedDict</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span><span class=p>,</span> <span class=n>timedelta</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CacheItem</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;캐시 아이템 데이터 클래스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span><span class=p>:</span> <span class=n>Any</span>
</span></span><span class=line><span class=cl>    <span class=n>created_at</span><span class=p>:</span> <span class=nb>float</span>
</span></span><span class=line><span class=cl>    <span class=n>accessed_at</span><span class=p>:</span> <span class=nb>float</span>
</span></span><span class=line><span class=cl>    <span class=n>access_count</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    <span class=n>ttl</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>  <span class=c1># Time To Live (초)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>is_expired</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;TTL 기반 만료 확인&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>ttl</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>created_at</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>ttl</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>touch</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;마지막 접근 시간 갱신&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>accessed_at</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>access_count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CacheStats</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;캐시 성능 통계 수집&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>hits</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>misses</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>evictions</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>total_requests</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>record_hit</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시 히트 기록&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>hits</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>total_requests</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>record_miss</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시 미스 기록&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>misses</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>total_requests</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>record_eviction</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시 축출 기록&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>evictions</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_hit_rate</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>float</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;히트율 계산 (0.0 ~ 1.0)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>total_requests</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=mf>0.0</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>hits</span> <span class=o>/</span> <span class=bp>self</span><span class=o>.</span><span class=n>total_requests</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_summary</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;통계 요약 반환&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;hit_rate&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_hit_rate</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;total_requests&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>total_requests</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;hits&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>hits</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;misses&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>misses</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;evictions&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>evictions</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>EvictionPolicy</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;캐시 축출 정책 추상 클래스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>should_evict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cache_items</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>CacheItem</span><span class=p>],</span> <span class=n>max_size</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;축출할 키 선택&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>LRUEviction</span><span class=p>(</span><span class=n>EvictionPolicy</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;LRU (Least Recently Used) 축출 정책&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>should_evict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cache_items</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>CacheItem</span><span class=p>],</span> <span class=n>max_size</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>cache_items</span><span class=p>)</span> <span class=o>&lt;</span> <span class=n>max_size</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 가장 오래전에 접근된 아이템 찾기</span>
</span></span><span class=line><span class=cl>        <span class=n>oldest_key</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=n>cache_items</span><span class=o>.</span><span class=n>keys</span><span class=p>(),</span> 
</span></span><span class=line><span class=cl>                        <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>k</span><span class=p>:</span> <span class=n>cache_items</span><span class=p>[</span><span class=n>k</span><span class=p>]</span><span class=o>.</span><span class=n>accessed_at</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>oldest_key</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>LFUEviction</span><span class=p>(</span><span class=n>EvictionPolicy</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;LFU (Least Frequently Used) 축출 정책&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>should_evict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cache_items</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>CacheItem</span><span class=p>],</span> <span class=n>max_size</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>cache_items</span><span class=p>)</span> <span class=o>&lt;</span> <span class=n>max_size</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 가장 적게 사용된 아이템 찾기</span>
</span></span><span class=line><span class=cl>        <span class=n>least_used_key</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=n>cache_items</span><span class=o>.</span><span class=n>keys</span><span class=p>(),</span> 
</span></span><span class=line><span class=cl>                           <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>k</span><span class=p>:</span> <span class=n>cache_items</span><span class=p>[</span><span class=n>k</span><span class=p>]</span><span class=o>.</span><span class=n>access_count</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>least_used_key</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CacheLevel</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;개별 캐시 레벨 구현&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>max_size</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>1000</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                 <span class=n>default_ttl</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                 <span class=n>eviction_policy</span><span class=p>:</span> <span class=n>EvictionPolicy</span> <span class=o>=</span> <span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>max_size</span> <span class=o>=</span> <span class=n>max_size</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>default_ttl</span> <span class=o>=</span> <span class=n>default_ttl</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>eviction_policy</span> <span class=o>=</span> <span class=n>eviction_policy</span> <span class=ow>or</span> <span class=n>LRUEviction</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>CacheItem</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>stats</span> <span class=o>=</span> <span class=n>CacheStats</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>RLock</span><span class=p>()</span>  <span class=c1># 재진입 가능한 락</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=n>Optional</span><span class=p>[</span><span class=n>Any</span><span class=p>],</span> <span class=nb>bool</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        캐시에서 데이터 조회
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        Returns:
</span></span></span><span class=line><span class=cl><span class=s2>            Tuple[값, 히트여부]: (데이터, True) 또는 (None, False)
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># TTL 만료 아이템 정리</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_cleanup_expired</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=ow>not</span> <span class=n>item</span><span class=o>.</span><span class=n>is_expired</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                    <span class=n>item</span><span class=o>.</span><span class=n>touch</span><span class=p>()</span>  <span class=c1># 접근 시간 갱신</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=o>.</span><span class=n>record_hit</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=n>item</span><span class=o>.</span><span class=n>value</span><span class=p>,</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>                <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=c1># 만료된 아이템 제거</span>
</span></span><span class=line><span class=cl>                    <span class=k>del</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=o>.</span><span class=n>record_miss</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>None</span><span class=p>,</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span> <span class=n>ttl</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        캐시에 데이터 저장
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        Args:
</span></span></span><span class=line><span class=cl><span class=s2>            key: 캐시 키
</span></span></span><span class=line><span class=cl><span class=s2>            value: 저장할 값
</span></span></span><span class=line><span class=cl><span class=s2>            ttl: 유효 시간 (초), None이면 기본값 사용
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        Returns:
</span></span></span><span class=line><span class=cl><span class=s2>            bool: 저장 성공 여부
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>current_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>effective_ttl</span> <span class=o>=</span> <span class=n>ttl</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>default_ttl</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 공간이 부족하면 축출 수행</span>
</span></span><span class=line><span class=cl>            <span class=n>evict_key</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>eviction_policy</span><span class=o>.</span><span class=n>should_evict</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>max_size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>evict_key</span> <span class=ow>and</span> <span class=n>key</span> <span class=o>!=</span> <span class=n>evict_key</span><span class=p>:</span>  <span class=c1># 자기 자신이 아닌 경우만</span>
</span></span><span class=line><span class=cl>                <span class=k>del</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>[</span><span class=n>evict_key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=o>.</span><span class=n>record_eviction</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 새 아이템 추가 또는 기존 아이템 갱신</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>CacheItem</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>value</span><span class=o>=</span><span class=n>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>created_at</span><span class=o>=</span><span class=n>current_time</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>accessed_at</span><span class=o>=</span><span class=n>current_time</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>access_count</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>ttl</span><span class=o>=</span><span class=n>effective_ttl</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시에서 특정 키 삭제&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>del</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>clear</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;모든 캐시 항목 삭제&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_cleanup_expired</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;만료된 아이템들 정리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>expired_keys</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=n>key</span> <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=o>.</span><span class=n>items</span><span class=p>()</span> 
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>item</span><span class=o>.</span><span class=n>is_expired</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>expired_keys</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>del</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_stats</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시 통계 반환&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>stats</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=o>.</span><span class=n>get_summary</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>stats</span><span class=o>.</span><span class=n>update</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;size&#39;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;max_size&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>max_size</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;memory_usage_percent&#39;</span><span class=p>:</span> <span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>)</span> <span class=o>/</span> <span class=bp>self</span><span class=o>.</span><span class=n>max_size</span><span class=p>)</span> <span class=o>*</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>            <span class=p>})</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>stats</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MultiLevelCacheSystem</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;다층 캐시 시스템&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># L1: 사용자 세션 캐시 (빠른 접근, 작은 용량, 짧은 TTL)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>l1_cache</span> <span class=o>=</span> <span class=n>CacheLevel</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>name</span><span class=o>=</span><span class=s2>&#34;L1-Session&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>max_size</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>default_ttl</span><span class=o>=</span><span class=mi>300</span><span class=p>,</span>  <span class=c1># 5분</span>
</span></span><span class=line><span class=cl>            <span class=n>eviction_policy</span><span class=o>=</span><span class=n>LRUEviction</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># L2: 콘텐츠 메타데이터 캐시 (중간 용량, 중간 TTL)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>l2_cache</span> <span class=o>=</span> <span class=n>CacheLevel</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>name</span><span class=o>=</span><span class=s2>&#34;L2-Metadata&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=n>max_size</span><span class=o>=</span><span class=mi>1000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>default_ttl</span><span class=o>=</span><span class=mi>1800</span><span class=p>,</span>  <span class=c1># 30분</span>
</span></span><span class=line><span class=cl>            <span class=n>eviction_policy</span><span class=o>=</span><span class=n>LFUEviction</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># L3: CDN 캐시 (대용량, 긴 TTL)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>l3_cache</span> <span class=o>=</span> <span class=n>CacheLevel</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>name</span><span class=o>=</span><span class=s2>&#34;L3-CDN&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>max_size</span><span class=o>=</span><span class=mi>10000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>default_ttl</span><span class=o>=</span><span class=mi>3600</span><span class=p>,</span>  <span class=c1># 1시간</span>
</span></span><span class=line><span class=cl>            <span class=n>eviction_policy</span><span class=o>=</span><span class=n>LRUEviction</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>levels</span> <span class=o>=</span> <span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>l1_cache</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>l2_cache</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>l3_cache</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=n>Optional</span><span class=p>[</span><span class=n>Any</span><span class=p>],</span> <span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        다층 캐시에서 데이터 조회
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        Returns:
</span></span></span><span class=line><span class=cl><span class=s2>            Tuple[값, 히트_레벨]: 예) (&#34;data&#34;, &#34;L1&#34;) 또는 (None, &#34;MISS&#34;)
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 상위 레벨부터 순차 확인</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>level</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>levels</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>value</span><span class=p>,</span> <span class=n>hit</span> <span class=o>=</span> <span class=n>level</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>hit</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1># 상위 레벨에 복사 (캐시 승격)</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>_promote_to_upper_levels</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>level</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>value</span><span class=p>,</span> <span class=n>level</span><span class=o>.</span><span class=n>name</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span><span class=p>,</span> <span class=s2>&#34;MISS&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span> <span class=n>cache_level</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;L1&#34;</span><span class=p>,</span> <span class=n>ttl</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        특정 레벨에 데이터 저장
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        Args:
</span></span></span><span class=line><span class=cl><span class=s2>            key: 캐시 키
</span></span></span><span class=line><span class=cl><span class=s2>            value: 저장할 값  
</span></span></span><span class=line><span class=cl><span class=s2>            cache_level: 저장할 캐시 레벨 (&#34;L1&#34;, &#34;L2&#34;, &#34;L3&#34;)
</span></span></span><span class=line><span class=cl><span class=s2>            ttl: 유효 시간
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>level_map</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;L1&#34;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>l1_cache</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;L2&#34;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>l2_cache</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;L3&#34;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>l3_cache</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>cache_level</span> <span class=ow>in</span> <span class=n>level_map</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>level_map</span><span class=p>[</span><span class=n>cache_level</span><span class=p>]</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>ttl</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_promote_to_upper_levels</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span> <span class=n>source_level</span><span class=p>:</span> <span class=n>CacheLevel</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;하위 레벨에서 히트된 데이터를 상위 레벨로 승격&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>source_index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>levels</span><span class=o>.</span><span class=n>index</span><span class=p>(</span><span class=n>source_level</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 상위 레벨들에 복사</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>source_index</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>upper_level</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>levels</span><span class=p>[</span><span class=n>i</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>upper_level</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;모든 레벨에서 키 삭제&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>level</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>levels</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>level</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_overall_stats</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;전체 캐시 시스템 통계&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>total_hits</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>level</span><span class=o>.</span><span class=n>stats</span><span class=o>.</span><span class=n>hits</span> <span class=k>for</span> <span class=n>level</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>levels</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>total_requests</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>level</span><span class=o>.</span><span class=n>stats</span><span class=o>.</span><span class=n>total_requests</span> <span class=k>for</span> <span class=n>level</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>levels</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>stats</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;overall_hit_rate&#39;</span><span class=p>:</span> <span class=n>total_hits</span> <span class=o>/</span> <span class=n>total_requests</span> <span class=k>if</span> <span class=n>total_requests</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=k>else</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;total_requests&#39;</span><span class=p>:</span> <span class=n>total_requests</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;levels&#39;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>level</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>levels</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>stats</span><span class=p>[</span><span class=s1>&#39;levels&#39;</span><span class=p>][</span><span class=n>level</span><span class=o>.</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>level</span><span class=o>.</span><span class=n>get_stats</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>stats</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ContentService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;콘텐츠 서비스 시뮬레이션 (Netflix 스타일)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>cache_system</span> <span class=o>=</span> <span class=n>MultiLevelCacheSystem</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 모의 데이터베이스 (실제로는 외부 DB)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>database</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;user:123&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;John Doe&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;preferences&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;action&#39;</span><span class=p>,</span> <span class=s1>&#39;sci-fi&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;watch_history&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;movie:1&#39;</span><span class=p>,</span> <span class=s1>&#39;movie:5&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;movie:1&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;title&#39;</span><span class=p>:</span> <span class=s1>&#39;Inception&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;genre&#39;</span><span class=p>:</span> <span class=s1>&#39;sci-fi&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;rating&#39;</span><span class=p>:</span> <span class=mf>8.8</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;thumbnail&#39;</span><span class=p>:</span> <span class=s1>&#39;https://cdn.example.com/inception.jpg&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;movie:5&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;title&#39;</span><span class=p>:</span> <span class=s1>&#39;The Matrix&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;genre&#39;</span><span class=p>:</span> <span class=s1>&#39;action&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=s1>&#39;rating&#39;</span><span class=p>:</span> <span class=mf>8.7</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;thumbnail&#39;</span><span class=p>:</span> <span class=s1>&#39;https://cdn.example.com/matrix.jpg&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;recommendations:123&#39;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span><span class=s1>&#39;movie_id&#39;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;score&#39;</span><span class=p>:</span> <span class=mf>0.95</span><span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span><span class=s1>&#39;movie_id&#39;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span> <span class=s1>&#39;score&#39;</span><span class=p>:</span> <span class=mf>0.87</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_user_profile</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;사용자 프로필 조회 (L1 캐시 활용)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>cache_key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;user:</span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 캐시에서 먼저 확인</span>
</span></span><span class=line><span class=cl>        <span class=n>value</span><span class=p>,</span> <span class=n>hit_level</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache_system</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>cache_key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>value</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;✓ User profile cache hit at </span><span class=si>{</span><span class=n>hit_level</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 캐시 미스 시 DB에서 조회</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;✗ User profile cache miss - fetching from DB&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>profile</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>database</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>cache_key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>profile</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># L1 캐시에 저장 (세션 데이터)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cache_system</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>cache_key</span><span class=p>,</span> <span class=n>profile</span><span class=p>,</span> <span class=s2>&#34;L1&#34;</span><span class=p>,</span> <span class=n>ttl</span><span class=o>=</span><span class=mi>300</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>profile</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_movie_metadata</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>movie_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;영화 메타데이터 조회 (L2 캐시 활용)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>cache_key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;movie:</span><span class=si>{</span><span class=n>movie_id</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 다층 캐시에서 확인</span>
</span></span><span class=line><span class=cl>        <span class=n>value</span><span class=p>,</span> <span class=n>hit_level</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache_system</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>cache_key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>value</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;✓ Movie metadata cache hit at </span><span class=si>{</span><span class=n>hit_level</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 캐시 미스 시 DB에서 조회</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;✗ Movie metadata cache miss - fetching from DB&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>metadata</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>database</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>cache_key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>metadata</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># L2 캐시에 저장 (메타데이터)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cache_system</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>cache_key</span><span class=p>,</span> <span class=n>metadata</span><span class=p>,</span> <span class=s2>&#34;L2&#34;</span><span class=p>,</span> <span class=n>ttl</span><span class=o>=</span><span class=mi>1800</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>metadata</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_recommendations</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>list</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;추천 결과 조회 (계산 집약적, L2 캐시)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>cache_key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;recommendations:</span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>value</span><span class=p>,</span> <span class=n>hit_level</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache_system</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>cache_key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>value</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;✓ Recommendations cache hit at </span><span class=si>{</span><span class=n>hit_level</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 무거운 추천 계산 시뮬레이션</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;✗ Recommendations cache miss - computing recommendations&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>  <span class=c1># 계산 시간 시뮬레이션</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>recommendations</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>database</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>cache_key</span><span class=p>,</span> <span class=p>[])</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>recommendations</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># L2 캐시에 저장 (계산 결과)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cache_system</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>cache_key</span><span class=p>,</span> <span class=n>recommendations</span><span class=p>,</span> <span class=s2>&#34;L2&#34;</span><span class=p>,</span> <span class=n>ttl</span><span class=o>=</span><span class=mi>900</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>recommendations</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>simulate_user_session</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>movie_ids</span><span class=p>:</span> <span class=nb>list</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;사용자 세션 시뮬레이션&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>=== User </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2> Session Simulation ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 1. 사용자 프로필 로드</span>
</span></span><span class=line><span class=cl>        <span class=n>profile</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_user_profile</span><span class=p>(</span><span class=n>user_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;User: </span><span class=si>{</span><span class=n>profile</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span> <span class=k>if</span> <span class=n>profile</span> <span class=k>else</span> <span class=s1>&#39;Unknown&#39;</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 2. 추천 목록 가져오기</span>
</span></span><span class=line><span class=cl>        <span class=n>recommendations</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_recommendations</span><span class=p>(</span><span class=n>user_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Recommendations: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>recommendations</span><span class=p>)</span> <span class=k>if</span> <span class=n>recommendations</span> <span class=k>else</span> <span class=mi>0</span><span class=si>}</span><span class=s2> items&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 3. 영화 메타데이터 조회</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>movie_id</span> <span class=ow>in</span> <span class=n>movie_ids</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>metadata</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_movie_metadata</span><span class=p>(</span><span class=n>movie_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>metadata</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Movie: </span><span class=si>{</span><span class=n>metadata</span><span class=p>[</span><span class=s1>&#39;title&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> (</span><span class=si>{</span><span class=n>metadata</span><span class=p>[</span><span class=s1>&#39;rating&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;메인 실행 함수&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;🚀 Multi-Level Cache System Demo&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=&#34;</span> <span class=o>*</span> <span class=mi>50</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 콘텐츠 서비스 인스턴스 생성</span>
</span></span><span class=line><span class=cl>    <span class=n>service</span> <span class=o>=</span> <span class=n>ContentService</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 여러 사용자 세션 시뮬레이션</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>3</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>service</span><span class=o>.</span><span class=n>simulate_user_session</span><span class=p>(</span><span class=s2>&#34;123&#34;</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;1&#34;</span><span class=p>,</span> <span class=s2>&#34;5&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 중간에 통계 출력</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>i</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>📊 Cache Statistics After 2 Sessions:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>stats</span> <span class=o>=</span> <span class=n>service</span><span class=o>.</span><span class=n>cache_system</span><span class=o>.</span><span class=n>get_overall_stats</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Overall Hit Rate: </span><span class=si>{</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;overall_hit_rate&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>.2%</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>level_name</span><span class=p>,</span> <span class=n>level_stats</span> <span class=ow>in</span> <span class=n>stats</span><span class=p>[</span><span class=s1>&#39;levels&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  </span><span class=si>{</span><span class=n>level_name</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>level_stats</span><span class=p>[</span><span class=s1>&#39;hit_rate&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>.2%</span><span class=si>}</span><span class=s2> hit rate, &#34;</span>
</span></span><span class=line><span class=cl>                     <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>level_stats</span><span class=p>[</span><span class=s1>&#39;size&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>level_stats</span><span class=p>[</span><span class=s1>&#39;max_size&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> items&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 최종 통계</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>📈 Final Cache Statistics:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>final_stats</span> <span class=o>=</span> <span class=n>service</span><span class=o>.</span><span class=n>cache_system</span><span class=o>.</span><span class=n>get_overall_stats</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>final_stats</span><span class=p>,</span> <span class=n>indent</span><span class=o>=</span><span class=mi>2</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 캐시 성능 향상 데모</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>🔄 Cache Performance Comparison:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 캐시 없이 실행 시간 측정</span>
</span></span><span class=line><span class=cl>    <span class=n>service</span><span class=o>.</span><span class=n>cache_system</span><span class=o>.</span><span class=n>l1_cache</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>service</span><span class=o>.</span><span class=n>cache_system</span><span class=o>.</span><span class=n>l2_cache</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>service</span><span class=o>.</span><span class=n>get_user_profile</span><span class=p>(</span><span class=s2>&#34;123&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>service</span><span class=o>.</span><span class=n>get_recommendations</span><span class=p>(</span><span class=s2>&#34;123&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>service</span><span class=o>.</span><span class=n>get_movie_metadata</span><span class=p>(</span><span class=s2>&#34;1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>cold_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start_time</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 캐시 있이 실행 시간 측정  </span>
</span></span><span class=line><span class=cl>    <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>service</span><span class=o>.</span><span class=n>get_user_profile</span><span class=p>(</span><span class=s2>&#34;123&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>service</span><span class=o>.</span><span class=n>get_recommendations</span><span class=p>(</span><span class=s2>&#34;123&#34;</span><span class=p>)</span> 
</span></span><span class=line><span class=cl>    <span class=n>service</span><span class=o>.</span><span class=n>get_movie_metadata</span><span class=p>(</span><span class=s2>&#34;1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>warm_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start_time</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Cold cache time: </span><span class=si>{</span><span class=n>cold_time</span><span class=si>:</span><span class=s2>.4f</span><span class=si>}</span><span class=s2>s&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Warm cache time: </span><span class=si>{</span><span class=n>warm_time</span><span class=si>:</span><span class=s2>.4f</span><span class=si>}</span><span class=s2>s&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Speed improvement: </span><span class=si>{</span><span class=n>cold_time</span><span class=o>/</span><span class=n>warm_time</span><span class=si>:</span><span class=s2>.1f</span><span class=si>}</span><span class=s2>x faster&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>main</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=사례-6-대용량-전자상거래-플랫폼의-캐시-아키텍처>사례 6: 대용량 전자상거래 플랫폼의 캐시 아키텍처<a hidden class=anchor aria-hidden=true href=#사례-6-대용량-전자상거래-플랫폼의-캐시-아키텍처>#</a></h4><p><strong>시스템 구성</strong>:</p><ul><li>Frontend: React.js 애플리케이션</li><li>API Gateway: Kong with Redis</li><li>Application: Node.js with Redis Cache</li><li>Database: MySQL with Query Cache</li><li>CDN: CloudFront for static assets</li></ul><pre class=mermaid>graph TB
    subgraph &#34;사용자 계층&#34;
        U[사용자]
    end
    
    subgraph &#34;CDN 계층&#34;
        CDN[CloudFront CDN&lt;br/&gt;정적 콘텐츠 캐시]
    end
    
    subgraph &#34;애플리케이션 계층&#34;
        LB[Load Balancer]
        API[API Gateway&lt;br/&gt;with Redis]
        APP[Node.js App&lt;br/&gt;with Local Cache]
    end
    
    subgraph &#34;캐시 계층&#34;
        RC[Redis Cluster&lt;br/&gt;분산 캐시]
        MC[MySQL Query Cache&lt;br/&gt;데이터베이스 캐시]
    end
    
    subgraph &#34;데이터 계층&#34;
        DB[(MySQL Database)]
    end
    
    U --&gt; CDN
    U --&gt; LB
    CDN --&gt; LB
    LB --&gt; API
    API --&gt; APP
    APP --&gt; RC
    APP --&gt; MC
    MC --&gt; DB
</pre><p><strong>Workflow</strong>:</p><ol><li>사용자가 상품 페이지 요청</li><li>CDN 에서 정적 자원 (이미지, CSS, JS) 제공</li><li>API Gateway 가 Redis 에서 인증 정보 확인</li><li>Node.js 애플리케이션이 로컬 캐시에서 상품 기본 정보 확인</li><li>캐시 미스 시 Redis Cluster 에서 상품 상세 정보 조회</li><li>Redis 미스 시 MySQL 쿼리 캐시 확인</li><li>최종적으로 데이터베이스에서 조회 후 각 캐시 레이어에 저장</li></ol><p><strong>역할 분담</strong>:</p><ul><li><strong>CDN</strong>: 이미지, 스타일시트 등 정적 콘텐츠 글로벌 배포</li><li><strong>API Gateway Cache</strong>: 사용자 세션, 인증 토큰 관리</li><li><strong>Application Cache</strong>: 자주 접근하는 상품 기본 정보</li><li><strong>Redis Cluster</strong>: 상품 상세 정보, 장바구니, 위시리스트</li><li><strong>MySQL Query Cache</strong>: 복잡한 조인 쿼리 결과</li></ul><p><strong>비교 분석</strong> (캐시 적용 전후):</p><ul><li>평균 응답 시간: 2.5 초 → 0.3 초 (88% 개선)</li><li>데이터베이스 부하: 100% → 15% (85% 감소)</li><li>동시 사용자 처리: 1,000 명 → 10,000 명 (10 배 증가)</li><li>서버 비용: 기존 대비 40% 절감</li></ul><p><strong>구현 예시</strong>:</p><ul><li><strong>JavaScript (Node.js) - Redis 를 활용한 Cache-Aside 패턴 구현</strong>:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1>  1</a>
</span><span class=lnt id=hl-26-2><a class=lnlinks href=#hl-26-2>  2</a>
</span><span class=lnt id=hl-26-3><a class=lnlinks href=#hl-26-3>  3</a>
</span><span class=lnt id=hl-26-4><a class=lnlinks href=#hl-26-4>  4</a>
</span><span class=lnt id=hl-26-5><a class=lnlinks href=#hl-26-5>  5</a>
</span><span class=lnt id=hl-26-6><a class=lnlinks href=#hl-26-6>  6</a>
</span><span class=lnt id=hl-26-7><a class=lnlinks href=#hl-26-7>  7</a>
</span><span class=lnt id=hl-26-8><a class=lnlinks href=#hl-26-8>  8</a>
</span><span class=lnt id=hl-26-9><a class=lnlinks href=#hl-26-9>  9</a>
</span><span class=lnt id=hl-26-10><a class=lnlinks href=#hl-26-10> 10</a>
</span><span class=lnt id=hl-26-11><a class=lnlinks href=#hl-26-11> 11</a>
</span><span class=lnt id=hl-26-12><a class=lnlinks href=#hl-26-12> 12</a>
</span><span class=lnt id=hl-26-13><a class=lnlinks href=#hl-26-13> 13</a>
</span><span class=lnt id=hl-26-14><a class=lnlinks href=#hl-26-14> 14</a>
</span><span class=lnt id=hl-26-15><a class=lnlinks href=#hl-26-15> 15</a>
</span><span class=lnt id=hl-26-16><a class=lnlinks href=#hl-26-16> 16</a>
</span><span class=lnt id=hl-26-17><a class=lnlinks href=#hl-26-17> 17</a>
</span><span class=lnt id=hl-26-18><a class=lnlinks href=#hl-26-18> 18</a>
</span><span class=lnt id=hl-26-19><a class=lnlinks href=#hl-26-19> 19</a>
</span><span class=lnt id=hl-26-20><a class=lnlinks href=#hl-26-20> 20</a>
</span><span class=lnt id=hl-26-21><a class=lnlinks href=#hl-26-21> 21</a>
</span><span class=lnt id=hl-26-22><a class=lnlinks href=#hl-26-22> 22</a>
</span><span class=lnt id=hl-26-23><a class=lnlinks href=#hl-26-23> 23</a>
</span><span class=lnt id=hl-26-24><a class=lnlinks href=#hl-26-24> 24</a>
</span><span class=lnt id=hl-26-25><a class=lnlinks href=#hl-26-25> 25</a>
</span><span class=lnt id=hl-26-26><a class=lnlinks href=#hl-26-26> 26</a>
</span><span class=lnt id=hl-26-27><a class=lnlinks href=#hl-26-27> 27</a>
</span><span class=lnt id=hl-26-28><a class=lnlinks href=#hl-26-28> 28</a>
</span><span class=lnt id=hl-26-29><a class=lnlinks href=#hl-26-29> 29</a>
</span><span class=lnt id=hl-26-30><a class=lnlinks href=#hl-26-30> 30</a>
</span><span class=lnt id=hl-26-31><a class=lnlinks href=#hl-26-31> 31</a>
</span><span class=lnt id=hl-26-32><a class=lnlinks href=#hl-26-32> 32</a>
</span><span class=lnt id=hl-26-33><a class=lnlinks href=#hl-26-33> 33</a>
</span><span class=lnt id=hl-26-34><a class=lnlinks href=#hl-26-34> 34</a>
</span><span class=lnt id=hl-26-35><a class=lnlinks href=#hl-26-35> 35</a>
</span><span class=lnt id=hl-26-36><a class=lnlinks href=#hl-26-36> 36</a>
</span><span class=lnt id=hl-26-37><a class=lnlinks href=#hl-26-37> 37</a>
</span><span class=lnt id=hl-26-38><a class=lnlinks href=#hl-26-38> 38</a>
</span><span class=lnt id=hl-26-39><a class=lnlinks href=#hl-26-39> 39</a>
</span><span class=lnt id=hl-26-40><a class=lnlinks href=#hl-26-40> 40</a>
</span><span class=lnt id=hl-26-41><a class=lnlinks href=#hl-26-41> 41</a>
</span><span class=lnt id=hl-26-42><a class=lnlinks href=#hl-26-42> 42</a>
</span><span class=lnt id=hl-26-43><a class=lnlinks href=#hl-26-43> 43</a>
</span><span class=lnt id=hl-26-44><a class=lnlinks href=#hl-26-44> 44</a>
</span><span class=lnt id=hl-26-45><a class=lnlinks href=#hl-26-45> 45</a>
</span><span class=lnt id=hl-26-46><a class=lnlinks href=#hl-26-46> 46</a>
</span><span class=lnt id=hl-26-47><a class=lnlinks href=#hl-26-47> 47</a>
</span><span class=lnt id=hl-26-48><a class=lnlinks href=#hl-26-48> 48</a>
</span><span class=lnt id=hl-26-49><a class=lnlinks href=#hl-26-49> 49</a>
</span><span class=lnt id=hl-26-50><a class=lnlinks href=#hl-26-50> 50</a>
</span><span class=lnt id=hl-26-51><a class=lnlinks href=#hl-26-51> 51</a>
</span><span class=lnt id=hl-26-52><a class=lnlinks href=#hl-26-52> 52</a>
</span><span class=lnt id=hl-26-53><a class=lnlinks href=#hl-26-53> 53</a>
</span><span class=lnt id=hl-26-54><a class=lnlinks href=#hl-26-54> 54</a>
</span><span class=lnt id=hl-26-55><a class=lnlinks href=#hl-26-55> 55</a>
</span><span class=lnt id=hl-26-56><a class=lnlinks href=#hl-26-56> 56</a>
</span><span class=lnt id=hl-26-57><a class=lnlinks href=#hl-26-57> 57</a>
</span><span class=lnt id=hl-26-58><a class=lnlinks href=#hl-26-58> 58</a>
</span><span class=lnt id=hl-26-59><a class=lnlinks href=#hl-26-59> 59</a>
</span><span class=lnt id=hl-26-60><a class=lnlinks href=#hl-26-60> 60</a>
</span><span class=lnt id=hl-26-61><a class=lnlinks href=#hl-26-61> 61</a>
</span><span class=lnt id=hl-26-62><a class=lnlinks href=#hl-26-62> 62</a>
</span><span class=lnt id=hl-26-63><a class=lnlinks href=#hl-26-63> 63</a>
</span><span class=lnt id=hl-26-64><a class=lnlinks href=#hl-26-64> 64</a>
</span><span class=lnt id=hl-26-65><a class=lnlinks href=#hl-26-65> 65</a>
</span><span class=lnt id=hl-26-66><a class=lnlinks href=#hl-26-66> 66</a>
</span><span class=lnt id=hl-26-67><a class=lnlinks href=#hl-26-67> 67</a>
</span><span class=lnt id=hl-26-68><a class=lnlinks href=#hl-26-68> 68</a>
</span><span class=lnt id=hl-26-69><a class=lnlinks href=#hl-26-69> 69</a>
</span><span class=lnt id=hl-26-70><a class=lnlinks href=#hl-26-70> 70</a>
</span><span class=lnt id=hl-26-71><a class=lnlinks href=#hl-26-71> 71</a>
</span><span class=lnt id=hl-26-72><a class=lnlinks href=#hl-26-72> 72</a>
</span><span class=lnt id=hl-26-73><a class=lnlinks href=#hl-26-73> 73</a>
</span><span class=lnt id=hl-26-74><a class=lnlinks href=#hl-26-74> 74</a>
</span><span class=lnt id=hl-26-75><a class=lnlinks href=#hl-26-75> 75</a>
</span><span class=lnt id=hl-26-76><a class=lnlinks href=#hl-26-76> 76</a>
</span><span class=lnt id=hl-26-77><a class=lnlinks href=#hl-26-77> 77</a>
</span><span class=lnt id=hl-26-78><a class=lnlinks href=#hl-26-78> 78</a>
</span><span class=lnt id=hl-26-79><a class=lnlinks href=#hl-26-79> 79</a>
</span><span class=lnt id=hl-26-80><a class=lnlinks href=#hl-26-80> 80</a>
</span><span class=lnt id=hl-26-81><a class=lnlinks href=#hl-26-81> 81</a>
</span><span class=lnt id=hl-26-82><a class=lnlinks href=#hl-26-82> 82</a>
</span><span class=lnt id=hl-26-83><a class=lnlinks href=#hl-26-83> 83</a>
</span><span class=lnt id=hl-26-84><a class=lnlinks href=#hl-26-84> 84</a>
</span><span class=lnt id=hl-26-85><a class=lnlinks href=#hl-26-85> 85</a>
</span><span class=lnt id=hl-26-86><a class=lnlinks href=#hl-26-86> 86</a>
</span><span class=lnt id=hl-26-87><a class=lnlinks href=#hl-26-87> 87</a>
</span><span class=lnt id=hl-26-88><a class=lnlinks href=#hl-26-88> 88</a>
</span><span class=lnt id=hl-26-89><a class=lnlinks href=#hl-26-89> 89</a>
</span><span class=lnt id=hl-26-90><a class=lnlinks href=#hl-26-90> 90</a>
</span><span class=lnt id=hl-26-91><a class=lnlinks href=#hl-26-91> 91</a>
</span><span class=lnt id=hl-26-92><a class=lnlinks href=#hl-26-92> 92</a>
</span><span class=lnt id=hl-26-93><a class=lnlinks href=#hl-26-93> 93</a>
</span><span class=lnt id=hl-26-94><a class=lnlinks href=#hl-26-94> 94</a>
</span><span class=lnt id=hl-26-95><a class=lnlinks href=#hl-26-95> 95</a>
</span><span class=lnt id=hl-26-96><a class=lnlinks href=#hl-26-96> 96</a>
</span><span class=lnt id=hl-26-97><a class=lnlinks href=#hl-26-97> 97</a>
</span><span class=lnt id=hl-26-98><a class=lnlinks href=#hl-26-98> 98</a>
</span><span class=lnt id=hl-26-99><a class=lnlinks href=#hl-26-99> 99</a>
</span><span class=lnt id=hl-26-100><a class=lnlinks href=#hl-26-100>100</a>
</span><span class=lnt id=hl-26-101><a class=lnlinks href=#hl-26-101>101</a>
</span><span class=lnt id=hl-26-102><a class=lnlinks href=#hl-26-102>102</a>
</span><span class=lnt id=hl-26-103><a class=lnlinks href=#hl-26-103>103</a>
</span><span class=lnt id=hl-26-104><a class=lnlinks href=#hl-26-104>104</a>
</span><span class=lnt id=hl-26-105><a class=lnlinks href=#hl-26-105>105</a>
</span><span class=lnt id=hl-26-106><a class=lnlinks href=#hl-26-106>106</a>
</span><span class=lnt id=hl-26-107><a class=lnlinks href=#hl-26-107>107</a>
</span><span class=lnt id=hl-26-108><a class=lnlinks href=#hl-26-108>108</a>
</span><span class=lnt id=hl-26-109><a class=lnlinks href=#hl-26-109>109</a>
</span><span class=lnt id=hl-26-110><a class=lnlinks href=#hl-26-110>110</a>
</span><span class=lnt id=hl-26-111><a class=lnlinks href=#hl-26-111>111</a>
</span><span class=lnt id=hl-26-112><a class=lnlinks href=#hl-26-112>112</a>
</span><span class=lnt id=hl-26-113><a class=lnlinks href=#hl-26-113>113</a>
</span><span class=lnt id=hl-26-114><a class=lnlinks href=#hl-26-114>114</a>
</span><span class=lnt id=hl-26-115><a class=lnlinks href=#hl-26-115>115</a>
</span><span class=lnt id=hl-26-116><a class=lnlinks href=#hl-26-116>116</a>
</span><span class=lnt id=hl-26-117><a class=lnlinks href=#hl-26-117>117</a>
</span><span class=lnt id=hl-26-118><a class=lnlinks href=#hl-26-118>118</a>
</span><span class=lnt id=hl-26-119><a class=lnlinks href=#hl-26-119>119</a>
</span><span class=lnt id=hl-26-120><a class=lnlinks href=#hl-26-120>120</a>
</span><span class=lnt id=hl-26-121><a class=lnlinks href=#hl-26-121>121</a>
</span><span class=lnt id=hl-26-122><a class=lnlinks href=#hl-26-122>122</a>
</span><span class=lnt id=hl-26-123><a class=lnlinks href=#hl-26-123>123</a>
</span><span class=lnt id=hl-26-124><a class=lnlinks href=#hl-26-124>124</a>
</span><span class=lnt id=hl-26-125><a class=lnlinks href=#hl-26-125>125</a>
</span><span class=lnt id=hl-26-126><a class=lnlinks href=#hl-26-126>126</a>
</span><span class=lnt id=hl-26-127><a class=lnlinks href=#hl-26-127>127</a>
</span><span class=lnt id=hl-26-128><a class=lnlinks href=#hl-26-128>128</a>
</span><span class=lnt id=hl-26-129><a class=lnlinks href=#hl-26-129>129</a>
</span><span class=lnt id=hl-26-130><a class=lnlinks href=#hl-26-130>130</a>
</span><span class=lnt id=hl-26-131><a class=lnlinks href=#hl-26-131>131</a>
</span><span class=lnt id=hl-26-132><a class=lnlinks href=#hl-26-132>132</a>
</span><span class=lnt id=hl-26-133><a class=lnlinks href=#hl-26-133>133</a>
</span><span class=lnt id=hl-26-134><a class=lnlinks href=#hl-26-134>134</a>
</span><span class=lnt id=hl-26-135><a class=lnlinks href=#hl-26-135>135</a>
</span><span class=lnt id=hl-26-136><a class=lnlinks href=#hl-26-136>136</a>
</span><span class=lnt id=hl-26-137><a class=lnlinks href=#hl-26-137>137</a>
</span><span class=lnt id=hl-26-138><a class=lnlinks href=#hl-26-138>138</a>
</span><span class=lnt id=hl-26-139><a class=lnlinks href=#hl-26-139>139</a>
</span><span class=lnt id=hl-26-140><a class=lnlinks href=#hl-26-140>140</a>
</span><span class=lnt id=hl-26-141><a class=lnlinks href=#hl-26-141>141</a>
</span><span class=lnt id=hl-26-142><a class=lnlinks href=#hl-26-142>142</a>
</span><span class=lnt id=hl-26-143><a class=lnlinks href=#hl-26-143>143</a>
</span><span class=lnt id=hl-26-144><a class=lnlinks href=#hl-26-144>144</a>
</span><span class=lnt id=hl-26-145><a class=lnlinks href=#hl-26-145>145</a>
</span><span class=lnt id=hl-26-146><a class=lnlinks href=#hl-26-146>146</a>
</span><span class=lnt id=hl-26-147><a class=lnlinks href=#hl-26-147>147</a>
</span><span class=lnt id=hl-26-148><a class=lnlinks href=#hl-26-148>148</a>
</span><span class=lnt id=hl-26-149><a class=lnlinks href=#hl-26-149>149</a>
</span><span class=lnt id=hl-26-150><a class=lnlinks href=#hl-26-150>150</a>
</span><span class=lnt id=hl-26-151><a class=lnlinks href=#hl-26-151>151</a>
</span><span class=lnt id=hl-26-152><a class=lnlinks href=#hl-26-152>152</a>
</span><span class=lnt id=hl-26-153><a class=lnlinks href=#hl-26-153>153</a>
</span><span class=lnt id=hl-26-154><a class=lnlinks href=#hl-26-154>154</a>
</span><span class=lnt id=hl-26-155><a class=lnlinks href=#hl-26-155>155</a>
</span><span class=lnt id=hl-26-156><a class=lnlinks href=#hl-26-156>156</a>
</span><span class=lnt id=hl-26-157><a class=lnlinks href=#hl-26-157>157</a>
</span><span class=lnt id=hl-26-158><a class=lnlinks href=#hl-26-158>158</a>
</span><span class=lnt id=hl-26-159><a class=lnlinks href=#hl-26-159>159</a>
</span><span class=lnt id=hl-26-160><a class=lnlinks href=#hl-26-160>160</a>
</span><span class=lnt id=hl-26-161><a class=lnlinks href=#hl-26-161>161</a>
</span><span class=lnt id=hl-26-162><a class=lnlinks href=#hl-26-162>162</a>
</span><span class=lnt id=hl-26-163><a class=lnlinks href=#hl-26-163>163</a>
</span><span class=lnt id=hl-26-164><a class=lnlinks href=#hl-26-164>164</a>
</span><span class=lnt id=hl-26-165><a class=lnlinks href=#hl-26-165>165</a>
</span><span class=lnt id=hl-26-166><a class=lnlinks href=#hl-26-166>166</a>
</span><span class=lnt id=hl-26-167><a class=lnlinks href=#hl-26-167>167</a>
</span><span class=lnt id=hl-26-168><a class=lnlinks href=#hl-26-168>168</a>
</span><span class=lnt id=hl-26-169><a class=lnlinks href=#hl-26-169>169</a>
</span><span class=lnt id=hl-26-170><a class=lnlinks href=#hl-26-170>170</a>
</span><span class=lnt id=hl-26-171><a class=lnlinks href=#hl-26-171>171</a>
</span><span class=lnt id=hl-26-172><a class=lnlinks href=#hl-26-172>172</a>
</span><span class=lnt id=hl-26-173><a class=lnlinks href=#hl-26-173>173</a>
</span><span class=lnt id=hl-26-174><a class=lnlinks href=#hl-26-174>174</a>
</span><span class=lnt id=hl-26-175><a class=lnlinks href=#hl-26-175>175</a>
</span><span class=lnt id=hl-26-176><a class=lnlinks href=#hl-26-176>176</a>
</span><span class=lnt id=hl-26-177><a class=lnlinks href=#hl-26-177>177</a>
</span><span class=lnt id=hl-26-178><a class=lnlinks href=#hl-26-178>178</a>
</span><span class=lnt id=hl-26-179><a class=lnlinks href=#hl-26-179>179</a>
</span><span class=lnt id=hl-26-180><a class=lnlinks href=#hl-26-180>180</a>
</span><span class=lnt id=hl-26-181><a class=lnlinks href=#hl-26-181>181</a>
</span><span class=lnt id=hl-26-182><a class=lnlinks href=#hl-26-182>182</a>
</span><span class=lnt id=hl-26-183><a class=lnlinks href=#hl-26-183>183</a>
</span><span class=lnt id=hl-26-184><a class=lnlinks href=#hl-26-184>184</a>
</span><span class=lnt id=hl-26-185><a class=lnlinks href=#hl-26-185>185</a>
</span><span class=lnt id=hl-26-186><a class=lnlinks href=#hl-26-186>186</a>
</span><span class=lnt id=hl-26-187><a class=lnlinks href=#hl-26-187>187</a>
</span><span class=lnt id=hl-26-188><a class=lnlinks href=#hl-26-188>188</a>
</span><span class=lnt id=hl-26-189><a class=lnlinks href=#hl-26-189>189</a>
</span><span class=lnt id=hl-26-190><a class=lnlinks href=#hl-26-190>190</a>
</span><span class=lnt id=hl-26-191><a class=lnlinks href=#hl-26-191>191</a>
</span><span class=lnt id=hl-26-192><a class=lnlinks href=#hl-26-192>192</a>
</span><span class=lnt id=hl-26-193><a class=lnlinks href=#hl-26-193>193</a>
</span><span class=lnt id=hl-26-194><a class=lnlinks href=#hl-26-194>194</a>
</span><span class=lnt id=hl-26-195><a class=lnlinks href=#hl-26-195>195</a>
</span><span class=lnt id=hl-26-196><a class=lnlinks href=#hl-26-196>196</a>
</span><span class=lnt id=hl-26-197><a class=lnlinks href=#hl-26-197>197</a>
</span><span class=lnt id=hl-26-198><a class=lnlinks href=#hl-26-198>198</a>
</span><span class=lnt id=hl-26-199><a class=lnlinks href=#hl-26-199>199</a>
</span><span class=lnt id=hl-26-200><a class=lnlinks href=#hl-26-200>200</a>
</span><span class=lnt id=hl-26-201><a class=lnlinks href=#hl-26-201>201</a>
</span><span class=lnt id=hl-26-202><a class=lnlinks href=#hl-26-202>202</a>
</span><span class=lnt id=hl-26-203><a class=lnlinks href=#hl-26-203>203</a>
</span><span class=lnt id=hl-26-204><a class=lnlinks href=#hl-26-204>204</a>
</span><span class=lnt id=hl-26-205><a class=lnlinks href=#hl-26-205>205</a>
</span><span class=lnt id=hl-26-206><a class=lnlinks href=#hl-26-206>206</a>
</span><span class=lnt id=hl-26-207><a class=lnlinks href=#hl-26-207>207</a>
</span><span class=lnt id=hl-26-208><a class=lnlinks href=#hl-26-208>208</a>
</span><span class=lnt id=hl-26-209><a class=lnlinks href=#hl-26-209>209</a>
</span><span class=lnt id=hl-26-210><a class=lnlinks href=#hl-26-210>210</a>
</span><span class=lnt id=hl-26-211><a class=lnlinks href=#hl-26-211>211</a>
</span><span class=lnt id=hl-26-212><a class=lnlinks href=#hl-26-212>212</a>
</span><span class=lnt id=hl-26-213><a class=lnlinks href=#hl-26-213>213</a>
</span><span class=lnt id=hl-26-214><a class=lnlinks href=#hl-26-214>214</a>
</span><span class=lnt id=hl-26-215><a class=lnlinks href=#hl-26-215>215</a>
</span><span class=lnt id=hl-26-216><a class=lnlinks href=#hl-26-216>216</a>
</span><span class=lnt id=hl-26-217><a class=lnlinks href=#hl-26-217>217</a>
</span><span class=lnt id=hl-26-218><a class=lnlinks href=#hl-26-218>218</a>
</span><span class=lnt id=hl-26-219><a class=lnlinks href=#hl-26-219>219</a>
</span><span class=lnt id=hl-26-220><a class=lnlinks href=#hl-26-220>220</a>
</span><span class=lnt id=hl-26-221><a class=lnlinks href=#hl-26-221>221</a>
</span><span class=lnt id=hl-26-222><a class=lnlinks href=#hl-26-222>222</a>
</span><span class=lnt id=hl-26-223><a class=lnlinks href=#hl-26-223>223</a>
</span><span class=lnt id=hl-26-224><a class=lnlinks href=#hl-26-224>224</a>
</span><span class=lnt id=hl-26-225><a class=lnlinks href=#hl-26-225>225</a>
</span><span class=lnt id=hl-26-226><a class=lnlinks href=#hl-26-226>226</a>
</span><span class=lnt id=hl-26-227><a class=lnlinks href=#hl-26-227>227</a>
</span><span class=lnt id=hl-26-228><a class=lnlinks href=#hl-26-228>228</a>
</span><span class=lnt id=hl-26-229><a class=lnlinks href=#hl-26-229>229</a>
</span><span class=lnt id=hl-26-230><a class=lnlinks href=#hl-26-230>230</a>
</span><span class=lnt id=hl-26-231><a class=lnlinks href=#hl-26-231>231</a>
</span><span class=lnt id=hl-26-232><a class=lnlinks href=#hl-26-232>232</a>
</span><span class=lnt id=hl-26-233><a class=lnlinks href=#hl-26-233>233</a>
</span><span class=lnt id=hl-26-234><a class=lnlinks href=#hl-26-234>234</a>
</span><span class=lnt id=hl-26-235><a class=lnlinks href=#hl-26-235>235</a>
</span><span class=lnt id=hl-26-236><a class=lnlinks href=#hl-26-236>236</a>
</span><span class=lnt id=hl-26-237><a class=lnlinks href=#hl-26-237>237</a>
</span><span class=lnt id=hl-26-238><a class=lnlinks href=#hl-26-238>238</a>
</span><span class=lnt id=hl-26-239><a class=lnlinks href=#hl-26-239>239</a>
</span><span class=lnt id=hl-26-240><a class=lnlinks href=#hl-26-240>240</a>
</span><span class=lnt id=hl-26-241><a class=lnlinks href=#hl-26-241>241</a>
</span><span class=lnt id=hl-26-242><a class=lnlinks href=#hl-26-242>242</a>
</span><span class=lnt id=hl-26-243><a class=lnlinks href=#hl-26-243>243</a>
</span><span class=lnt id=hl-26-244><a class=lnlinks href=#hl-26-244>244</a>
</span><span class=lnt id=hl-26-245><a class=lnlinks href=#hl-26-245>245</a>
</span><span class=lnt id=hl-26-246><a class=lnlinks href=#hl-26-246>246</a>
</span><span class=lnt id=hl-26-247><a class=lnlinks href=#hl-26-247>247</a>
</span><span class=lnt id=hl-26-248><a class=lnlinks href=#hl-26-248>248</a>
</span><span class=lnt id=hl-26-249><a class=lnlinks href=#hl-26-249>249</a>
</span><span class=lnt id=hl-26-250><a class=lnlinks href=#hl-26-250>250</a>
</span><span class=lnt id=hl-26-251><a class=lnlinks href=#hl-26-251>251</a>
</span><span class=lnt id=hl-26-252><a class=lnlinks href=#hl-26-252>252</a>
</span><span class=lnt id=hl-26-253><a class=lnlinks href=#hl-26-253>253</a>
</span><span class=lnt id=hl-26-254><a class=lnlinks href=#hl-26-254>254</a>
</span><span class=lnt id=hl-26-255><a class=lnlinks href=#hl-26-255>255</a>
</span><span class=lnt id=hl-26-256><a class=lnlinks href=#hl-26-256>256</a>
</span><span class=lnt id=hl-26-257><a class=lnlinks href=#hl-26-257>257</a>
</span><span class=lnt id=hl-26-258><a class=lnlinks href=#hl-26-258>258</a>
</span><span class=lnt id=hl-26-259><a class=lnlinks href=#hl-26-259>259</a>
</span><span class=lnt id=hl-26-260><a class=lnlinks href=#hl-26-260>260</a>
</span><span class=lnt id=hl-26-261><a class=lnlinks href=#hl-26-261>261</a>
</span><span class=lnt id=hl-26-262><a class=lnlinks href=#hl-26-262>262</a>
</span><span class=lnt id=hl-26-263><a class=lnlinks href=#hl-26-263>263</a>
</span><span class=lnt id=hl-26-264><a class=lnlinks href=#hl-26-264>264</a>
</span><span class=lnt id=hl-26-265><a class=lnlinks href=#hl-26-265>265</a>
</span><span class=lnt id=hl-26-266><a class=lnlinks href=#hl-26-266>266</a>
</span><span class=lnt id=hl-26-267><a class=lnlinks href=#hl-26-267>267</a>
</span><span class=lnt id=hl-26-268><a class=lnlinks href=#hl-26-268>268</a>
</span><span class=lnt id=hl-26-269><a class=lnlinks href=#hl-26-269>269</a>
</span><span class=lnt id=hl-26-270><a class=lnlinks href=#hl-26-270>270</a>
</span><span class=lnt id=hl-26-271><a class=lnlinks href=#hl-26-271>271</a>
</span><span class=lnt id=hl-26-272><a class=lnlinks href=#hl-26-272>272</a>
</span><span class=lnt id=hl-26-273><a class=lnlinks href=#hl-26-273>273</a>
</span><span class=lnt id=hl-26-274><a class=lnlinks href=#hl-26-274>274</a>
</span><span class=lnt id=hl-26-275><a class=lnlinks href=#hl-26-275>275</a>
</span><span class=lnt id=hl-26-276><a class=lnlinks href=#hl-26-276>276</a>
</span><span class=lnt id=hl-26-277><a class=lnlinks href=#hl-26-277>277</a>
</span><span class=lnt id=hl-26-278><a class=lnlinks href=#hl-26-278>278</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>redis</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;redis&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>mysql</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;mysql2/promise&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>ProductCacheService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Redis 클라이언트 초기화
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span> <span class=o>=</span> <span class=nx>redis</span><span class=p>.</span><span class=nx>createClient</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>host</span><span class=o>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>port</span><span class=o>:</span> <span class=mi>6379</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>retry_strategy</span><span class=o>:</span> <span class=p>(</span><span class=nx>options</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=nx>options</span><span class=p>.</span><span class=nx>error</span> <span class=o>&amp;&amp;</span> <span class=nx>options</span><span class=p>.</span><span class=nx>error</span><span class=p>.</span><span class=nx>code</span> <span class=o>===</span> <span class=s1>&#39;ECONNREFUSED&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;Redis 서버가 연결을 거부했습니다&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=nx>options</span><span class=p>.</span><span class=nx>total_retry_time</span> <span class=o>&gt;</span> <span class=mi>1000</span> <span class=o>*</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>60</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;재시도 시간이 초과되었습니다&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>min</span><span class=p>(</span><span class=nx>options</span><span class=p>.</span><span class=nx>attempt</span> <span class=o>*</span> <span class=mi>100</span><span class=p>,</span> <span class=mi>3000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// MySQL 연결 풀 초기화
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>dbPool</span> <span class=o>=</span> <span class=nx>mysql</span><span class=p>.</span><span class=nx>createPool</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>host</span><span class=o>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>user</span><span class=o>:</span> <span class=s1>&#39;root&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>password</span><span class=o>:</span> <span class=s1>&#39;password&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>database</span><span class=o>:</span> <span class=s1>&#39;ecommerce&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>waitForConnections</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>connectionLimit</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>queueLimit</span><span class=o>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 캐시 설정
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>defaultTTL</span> <span class=o>=</span> <span class=mi>3600</span><span class=p>;</span> <span class=c1>// 1시간
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>keyPrefix</span> <span class=o>=</span> <span class=s1>&#39;product:&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 상품 정보 조회 (Cache-Aside 패턴)
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {string} productId - 상품 ID
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {Object} 상품 정보
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getProduct</span><span class=p>(</span><span class=nx>productId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>cacheKey</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>keyPrefix</span><span class=si>}${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 1. 캐시에서 먼저 조회 (Cache Hit 시도)
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>cachedProduct</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>cachedProduct</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`캐시 히트: </span><span class=si>${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>cachedProduct</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 2. 캐시 미스 - 데이터베이스에서 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`캐시 미스: </span><span class=si>${</span><span class=nx>productId</span><span class=si>}</span><span class=sb> - DB에서 조회`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>product</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>getProductFromDB</span><span class=p>(</span><span class=nx>productId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>product</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 3. 조회된 데이터를 캐시에 저장
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>setCache</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>,</span> <span class=nx>product</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>defaultTTL</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`캐시 저장 완료: </span><span class=si>${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>product</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;상품 조회 중 오류 발생:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 캐시 오류 시 데이터베이스에서 직접 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>return</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>getProductFromDB</span><span class=p>(</span><span class=nx>productId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 데이터베이스에서 상품 정보 조회
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {string} productId - 상품 ID
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {Object} 상품 정보
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getProductFromDB</span><span class=p>(</span><span class=nx>productId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>connection</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>dbPool</span><span class=p>.</span><span class=nx>getConnection</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=p>[</span><span class=nx>rows</span><span class=p>]</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>connection</span><span class=p>.</span><span class=nx>execute</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;SELECT * FROM products WHERE id = ?&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=nx>productId</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>rows</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>?</span> <span class=nx>rows</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>:</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>finally</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>connection</span><span class=p>.</span><span class=nx>release</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 상품 정보 업데이트 (Write-Through 패턴)
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {string} productId - 상품 ID
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {Object} productData - 업데이트할 상품 데이터
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>updateProduct</span><span class=p>(</span><span class=nx>productId</span><span class=p>,</span> <span class=nx>productData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>connection</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>dbPool</span><span class=p>.</span><span class=nx>getConnection</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>await</span> <span class=nx>connection</span><span class=p>.</span><span class=nx>beginTransaction</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 1. 데이터베이스 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>await</span> <span class=nx>connection</span><span class=p>.</span><span class=nx>execute</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;UPDATE products SET name = ?, price = ?, description = ? WHERE id = ?&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=nx>productData</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span> <span class=nx>productData</span><span class=p>.</span><span class=nx>price</span><span class=p>,</span> <span class=nx>productData</span><span class=p>.</span><span class=nx>description</span><span class=p>,</span> <span class=nx>productId</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 2. 캐시 무효화 (Invalidation)
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>cacheKey</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>keyPrefix</span><span class=si>}${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>del</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=kr>await</span> <span class=nx>connection</span><span class=p>.</span><span class=nx>commit</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`상품 업데이트 및 캐시 무효화 완료: </span><span class=si>${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>await</span> <span class=nx>connection</span><span class=p>.</span><span class=nx>rollback</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;상품 업데이트 중 오류 발생:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=nx>error</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>finally</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>connection</span><span class=p>.</span><span class=nx>release</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 캐시 저장
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {string} key - 캐시 키
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {Object} data - 저장할 데이터
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} ttl - 만료 시간 (초)
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>setCache</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>data</span><span class=p>,</span> <span class=nx>ttl</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>defaultTTL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>setex</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>ttl</span><span class=p>,</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>data</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;캐시 저장 실패:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 캐시 삭제
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {string} key - 삭제할 캐시 키
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>deleteCache</span><span class=p>(</span><span class=nx>key</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>del</span><span class=p>(</span><span class=nx>key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;캐시 삭제 실패:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 대량 상품 조회 (멀티레벨 캐싱)
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {Array} productIds - 상품 ID 배열
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {Array} 상품 정보 배열
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getMultipleProducts</span><span class=p>(</span><span class=nx>productIds</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>results</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>uncachedIds</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 1. 모든 상품에 대해 캐시 확인
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>productId</span> <span class=k>of</span> <span class=nx>productIds</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>cacheKey</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>keyPrefix</span><span class=si>}${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>cachedProduct</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>cachedProduct</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>results</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>cachedProduct</span><span class=p>));</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>uncachedIds</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>productId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 2. 캐시되지 않은 상품들을 DB에서 일괄 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=nx>uncachedIds</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>uncachedProducts</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>getMultipleProductsFromDB</span><span class=p>(</span><span class=nx>uncachedIds</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 3. 조회된 상품들을 캐시에 저장
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>product</span> <span class=k>of</span> <span class=nx>uncachedProducts</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>cacheKey</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>keyPrefix</span><span class=si>}${</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>setCache</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>,</span> <span class=nx>product</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=nx>results</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>product</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>results</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 데이터베이스에서 여러 상품 조회
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {Array} productIds - 상품 ID 배열
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {Array} 상품 정보 배열
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getMultipleProductsFromDB</span><span class=p>(</span><span class=nx>productIds</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>connection</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>dbPool</span><span class=p>.</span><span class=nx>getConnection</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>placeholders</span> <span class=o>=</span> <span class=nx>productIds</span><span class=p>.</span><span class=nx>map</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=s1>&#39;?&#39;</span><span class=p>).</span><span class=nx>join</span><span class=p>(</span><span class=s1>&#39;,&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=p>[</span><span class=nx>rows</span><span class=p>]</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>connection</span><span class=p>.</span><span class=nx>execute</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=sb>`SELECT * FROM products WHERE id IN (</span><span class=si>${</span><span class=nx>placeholders</span><span class=si>}</span><span class=sb>)`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>productIds</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>rows</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>finally</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>connection</span><span class=p>.</span><span class=nx>release</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 캐시 통계 조회
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {Object} 캐시 통계 정보
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getCacheStats</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>info</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>info</span><span class=p>(</span><span class=s1>&#39;stats&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>lines</span> <span class=o>=</span> <span class=nx>info</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;\r\n&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>stats</span> <span class=o>=</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nx>lines</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>line</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=nx>line</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=s1>&#39;:&#39;</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=kr>const</span> <span class=p>[</span><span class=nx>key</span><span class=p>,</span> <span class=nx>value</span><span class=p>]</span> <span class=o>=</span> <span class=nx>line</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;:&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=nx>stats</span><span class=p>[</span><span class=nx>key</span><span class=p>]</span> <span class=o>=</span> <span class=nx>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>hits</span><span class=o>:</span> <span class=nb>parseInt</span><span class=p>(</span><span class=nx>stats</span><span class=p>.</span><span class=nx>keyspace_hits</span> <span class=o>||</span> <span class=mi>0</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=nx>misses</span><span class=o>:</span> <span class=nb>parseInt</span><span class=p>(</span><span class=nx>stats</span><span class=p>.</span><span class=nx>keyspace_misses</span> <span class=o>||</span> <span class=mi>0</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=nx>hitRate</span><span class=o>:</span> <span class=nx>stats</span><span class=p>.</span><span class=nx>keyspace_hits</span> <span class=o>/</span> <span class=p>(</span><span class=nb>parseInt</span><span class=p>(</span><span class=nx>stats</span><span class=p>.</span><span class=nx>keyspace_hits</span> <span class=o>||</span> <span class=mi>0</span><span class=p>)</span> <span class=o>+</span> <span class=nb>parseInt</span><span class=p>(</span><span class=nx>stats</span><span class=p>.</span><span class=nx>keyspace_misses</span> <span class=o>||</span> <span class=mi>1</span><span class=p>))</span> <span class=o>*</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>            <span class=p>};</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;캐시 통계 조회 실패:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 리소스 정리
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>close</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>quit</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>dbPool</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>async</span> <span class=kd>function</span> <span class=nx>example</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>cacheService</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ProductCacheService</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 단일 상품 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>product</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>getProduct</span><span class=p>(</span><span class=s1>&#39;12345&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;조회된 상품:&#39;</span><span class=p>,</span> <span class=nx>product</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 상품 정보 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>updateProduct</span><span class=p>(</span><span class=s1>&#39;12345&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;업데이트된 상품명&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>price</span><span class=o>:</span> <span class=mi>29900</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>description</span><span class=o>:</span> <span class=s1>&#39;새로운 상품 설명&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 여러 상품 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>products</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>getMultipleProducts</span><span class=p>([</span><span class=s1>&#39;12345&#39;</span><span class=p>,</span> <span class=s1>&#39;12346&#39;</span><span class=p>,</span> <span class=s1>&#39;12347&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;여러 상품 조회 결과:&#39;</span><span class=p>,</span> <span class=nx>products</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 캐시 통계 확인
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>stats</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>getCacheStats</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;캐시 통계:&#39;</span><span class=p>,</span> <span class=nx>stats</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>finally</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>close</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=nx>ProductCacheService</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=주목할-내용>주목할 내용<a hidden class=anchor aria-hidden=true href=#주목할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>핵심 항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>1. 개념 원리</strong></td><td>로컬리티 (Locality)</td><td>시간 지역성, 공간 지역성</td><td>자주 접근하는 데이터의 위치적/시간적 근접성을 이용하여 캐시 적중률 향상</td></tr><tr><td></td><td>캐시 계층 구조</td><td>L1/L2/L3, CPU/애플리케이션/CDN</td><td>빠른 접근을 위한 다단계 구조로 설계되어 있으며, 성능과 비용 균형을 고려함</td></tr><tr><td></td><td>캐시 용도 구분</td><td>Hot Cache, Cold Cache</td><td>자주 접근되는 데이터는 메모리 중심, 저빈도 데이터는 디스크나 CDN 에 저장</td></tr><tr><td><strong>2. 캐시 알고리즘/정책</strong></td><td>교체 정책</td><td>LRU, LFU, FIFO, ARC, 2Q</td><td>데이터 제거 기준에 따라 선택. 접근 패턴별로 최적화 필요</td></tr><tr><td></td><td>일관된 해싱</td><td>Consistent Hashing</td><td>분산 캐시에서 노드 추가/제거 시 최소 재분배로 키 일관성 유지</td></tr><tr><td></td><td>TTL</td><td>Time-To-Live 설정</td><td>캐시 항목의 자동 만료를 위한 기준 시간 설정</td></tr><tr><td></td><td>Probabilistic TTL</td><td>무작위 TTL 조정</td><td>Thundering Herd 방지 및 Lock 회피 전략</td></tr><tr><td></td><td>Adaptive Eviction</td><td>AI/ML 기반 교체 정책</td><td>접근 패턴 학습을 기반으로 한 지능형 캐시 축출 정책</td></tr><tr><td><strong>3. 캐시 패턴/전략</strong></td><td>캐시 쓰기 전략</td><td>Write-Through / Write-Back / Write-Around</td><td>쓰기 시 원본과의 동기화 방식에 따른 분류</td></tr><tr><td></td><td>데이터 로딩 패턴</td><td>Cache-Aside / Read-Through / Write-Behind</td><td>캐시 미스 발생 시 데이터 로딩/저장 전략</td></tr><tr><td></td><td>Negative Caching</td><td>실패/에러 응답도 TTL 기반 캐싱</td><td>DB 오류/빈 값 등 재요청 방지</td></tr><tr><td></td><td>Cache Warming</td><td>자주 사용하는 데이터를 미리 로딩</td><td>서비스 시작/재시작 시 초기 성능 저하 방지</td></tr><tr><td><strong>4. 일관성/동기화</strong></td><td>Invalidation</td><td>TTL 기반, 수동 제거, 이벤트 기반 무효화 등</td><td>원본 변경 시 캐시 무효화 처리 방식</td></tr><tr><td></td><td>분산 캐시 일관성 유지</td><td>Active-Active, Read-Through, CAS, CRDT</td><td>노드 간 데이터 최신 상태 유지</td></tr><tr><td></td><td>Cache Coherence</td><td>MESI 프로토콜 등 (하드웨어 수준)</td><td>멀티 코어/다중 캐시 환경의 일관성 보장</td></tr><tr><td><strong>5. 아키텍처/시스템</strong></td><td>분산 캐시</td><td>Redis Cluster, Memcached, Hazelcast</td><td>확장성과 고가용성 확보용, 클라우드 환경 표준 구성</td></tr><tr><td></td><td>캐시 샤딩</td><td>Slot 기반 또는 Hashing 기반 자동 분산 저장</td><td>Redis 16,384 slot 등 실무 구성에 활용됨</td></tr><tr><td></td><td>CDN & Edge Caching</td><td>글로벌 엣지 서버 활용, 사용자 근접 캐싱</td><td>응답 시간 최소화와 트래픽 절감 효과</td></tr><tr><td></td><td>Serverless Cache</td><td>Function-level Cache (e.g. Lambda 내 로컬 캐시)</td><td>서버리스 환경에 적합한 범위 제한 캐싱 방식</td></tr><tr><td></td><td>Hybrid Cache</td><td>메모리 + 디스크 혼합 구조</td><td>비용 최적화와 장기 보존을 모두 고려한 계층형 캐싱</td></tr><tr><td><strong>6. 성능/모니터링</strong></td><td>캐시 메트릭</td><td>Hit Ratio, Eviction Rate, 응답 시간, Memory Usage</td><td>성능 최적화 및 튜닝 기준이 되는 핵심 지표</td></tr><tr><td></td><td>실시간 모니터링 전략</td><td>Prometheus, Grafana, ELK</td><td>상태 진단 및 자동 경보 연동 가능</td></tr><tr><td></td><td>캐시 성능 최적화 기법</td><td>압축 (LZ4, Snappy), Prefetching</td><td>메모리 효율 향상 및 미래 요청 예측</td></tr><tr><td><strong>7. 보안/운영</strong></td><td>캐시 보안</td><td>Access Control, 민감 정보 마스킹, 암호화</td><td>인증되지 않은 접근 방지 및 데이터 보호</td></tr><tr><td></td><td>Cache Poisoning</td><td>악의적인 값이 캐시에 저장되어 전체 시스템에 영향</td><td>input sanitize, TTL 제어 등 필요</td></tr><tr><td></td><td>Cache Injection</td><td>외부 조작으로 키/값 조작 유도</td><td>키 정규화 및 요청 검증 필수</td></tr><tr><td></td><td>GDPR 등 컴플라이언스</td><td>개인정보 캐싱 시 유효 기간, 암호화 정책 적용 필요</td><td>로그/세션 등 민감 데이터 캐시 시 주의 필요</td></tr><tr><td><strong>8. 신기술/확장성</strong></td><td>Edge Computing</td><td>엣지에서 캐시 및 계산 수행</td><td>IoT/모바일 환경에 적합한 초저지연 처리</td></tr><tr><td></td><td>Persistent Memory</td><td>Intel Optane 등 고속 비휘발성 메모리 기반 캐시</td><td>전원 차단 후에도 데이터 유지 가능</td></tr><tr><td></td><td>AI 기반 캐시 예측</td><td>ML-based Prefetching, AI Eviction Policy</td><td>접근 패턴 예측을 통해 캐시 효율 극대화</td></tr></tbody></table><h3 id=반드시-학습해야-할-내용>반드시 학습해야 할 내용<a hidden class=anchor aria-hidden=true href=#반드시-학습해야-할-내용>#</a></h3><table><thead><tr><th>대분류</th><th>중분류</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>기초 이론</strong></td><td>메모리 계층 구조</td><td>Memory Hierarchy</td><td>레지스터 → CPU 캐시 (L1/L2/L3) → RAM → SSD/HDD 로 이어지는 계층 구조 이해</td></tr><tr><td></td><td>지역성 (Locality)</td><td>Temporal/Spatial Locality</td><td>시간적·공간적 지역성 원리를 이해하여 캐시 효율성 극대화 설계</td></tr><tr><td></td><td>가상 메모리</td><td>TLB, Virtual Memory</td><td>주소 변환 과정과 캐시 (TLB) 연계 구조 이해</td></tr><tr><td><strong>자료구조 및 알고리즘</strong></td><td>핵심 자료구조</td><td>Hash Table</td><td>O(1) 접근이 가능한 캐시 구현을 위한 필수 자료구조</td></tr><tr><td></td><td>교체 알고리즘</td><td>LRU, LFU, FIFO, ARC, 2Q</td><td>캐시 용량 한계 내에서 데이터 유지/제거 전략 이해 및 성능별 선택 기준</td></tr><tr><td></td><td>해싱 분산 알고리즘</td><td>Consistent Hashing</td><td>분산 캐시에서 데이터 균등 분배와 확장성 있는 구조 설계를 위한 필수 기법</td></tr><tr><td></td><td>캐시 친화 알고리즘</td><td>Cache-aware/oblivious</td><td>캐시 적중률을 고려한 알고리즘 설계 원칙</td></tr><tr><td><strong>시스템 설계</strong></td><td>아키텍처 패턴</td><td>Cache-aside, Write-through 등</td><td>Lazy Load, 실시간 업데이트 등 시나리오별 패턴 적용 방식</td></tr><tr><td></td><td>일관성 모델</td><td>Strong/Eventual Consistency</td><td>분산 환경에서 일관성 보장 방식 선택과 그에 따른 캐시 전략 차별화</td></tr><tr><td></td><td>계층형 아키텍처</td><td>Multi-level Cache</td><td>CPU 캐시, 앱 레벨 캐시, 분산 캐시, CDN 등 계층 구조 설계</td></tr><tr><td></td><td>CAP 이론</td><td>Consistency, Availability, Partition</td><td>캐시 일관성과 분산 시스템의 설계 트레이드오프 분석</td></tr><tr><td><strong>구현 기술</strong></td><td>캐시 시스템</td><td>Redis, Memcached</td><td>인메모리 기반 캐시 솔루션 비교 (데이터 구조, TTL, 복제, 클러스터링 등 포함)</td></tr><tr><td></td><td>캐시 구현 방식</td><td>LRU 구현 (HashMap + LinkedList)</td><td>O(1) 성능 보장을 위한 대표적인 캐시 구현 사례</td></tr><tr><td></td><td>캐시 무효화</td><td>TTL, Explicit Eviction, Event 기반</td><td>데이터 정합성 유지를 위한 무효화 방식 비교 및 적절한 적용 시나리오 분석</td></tr><tr><td></td><td>CDN 캐시</td><td>Static Contents + Edge Caching</td><td>웹 프론트 최적화를 위한 글로벌 엣지 캐시 구조 (Cloudflare, Akamai, etc.)</td></tr><tr><td><strong>운영 및 성능</strong></td><td>캐시 메트릭</td><td>Hit Ratio, Eviction Rate, Latency</td><td>캐시 효율을 판단할 수 있는 주요 지표 및 SLA 기준 설정</td></tr><tr><td></td><td>성능 최적화</td><td>Memory Access Pattern, False Sharing</td><td>프로파일링 기반 병목 파악 및 메모리 경합 이슈 해결 전략</td></tr><tr><td></td><td>확장성 전략</td><td>Sharding, Replication, Auto-scaling</td><td>고가용성, 장애 복구, 수평 확장을 위한 실무 구현 전략</td></tr><tr><td></td><td>APM 도구</td><td>Prometheus, Grafana, ELK</td><td>캐시 상태 실시간 관측, 알림 설정, 장애 탐지</td></tr><tr><td></td><td>IaC</td><td>Terraform, Ansible</td><td>캐시 클러스터 환경의 자동화된 배포 및 관리 구조</td></tr><tr><td><strong>보안 및 안정성</strong></td><td>캐시 보안 정책</td><td>Access Control, Encryption</td><td>민감 정보 보호를 위한 접근 제한 및 저장 시 암호화 적용</td></tr><tr><td></td><td>공격 대응 전략</td><td>Cache Poisoning, Timing Attack</td><td>공격 유형 분석 및 대응책 설계 (nonce 활용, key 분리, TTL 최소화 등)</td></tr><tr><td></td><td>데이터 무결성</td><td>Stale 데이터 방지</td><td>TTL 갱신, Cache Busting, 주기적 재검증 등을 통한 데이터 신뢰성 유지</td></tr><tr><td><strong>고급 고려사항</strong></td><td>동시성 제어</td><td>Thread-safe Cache</td><td>멀티스레드 환경에서의 락/락프리 구현 및 Race Condition 대응 전략</td></tr><tr><td></td><td>하이브리드 전략</td><td>Cache + DB + Queue 연계 구조</td><td>읽기/쓰기 분리 및 CQRS, Event-driven 아키텍처 연계 구성</td></tr><tr><td></td><td>비용 최적화</td><td>캐시 비용 분석 및 TTL 정책 설계</td><td>스토리지 및 네트워크 비용 고려한 TTL 조정, cold start 방지 전략 등 포함</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th><strong>카테고리</strong></th><th><strong>용어</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>기본 개념</strong></td><td>Cache</td><td>자주 사용되는 데이터를 임시로 저장하여 접근 속도를 높이는 고속 저장소</td></tr><tr><td></td><td>Cache Hit</td><td>요청한 데이터가 캐시에 존재해 빠르게 반환되는 경우</td></tr><tr><td></td><td>Cache Miss</td><td>요청한 데이터가 캐시에 없어 원본 저장소에서 읽어오는 경우</td></tr><tr><td></td><td>Hit Ratio</td><td>전체 요청 중 캐시 히트가 발생한 비율 (성능 지표)</td></tr><tr><td></td><td>TTL (Time To Live)</td><td>캐시 항목의 유효 시간으로, 만료되면 자동으로 제거됨</td></tr><tr><td></td><td>Eviction</td><td>저장 공간 초과 시 기존 데이터를 캐시에서 제거하는 과정</td></tr><tr><td></td><td>Dirty Bit</td><td>캐시의 데이터가 원본과 다른 상태를 나타내는 비트 (Write-Back 에 사용됨)</td></tr><tr><td><strong>구조/아키텍처</strong></td><td>Cache Level (L1/L2)</td><td>CPU 또는 시스템에서 사용하는 다단계 캐시 계층 구조</td></tr><tr><td></td><td>Cache Line</td><td>CPU 와 메모리 간 전송되는 데이터의 최소 단위 (보통 64 바이트)</td></tr><tr><td></td><td>Multi-level Cache</td><td>L1, L2, L3 등 다양한 계층으로 구성된 캐시 구조</td></tr><tr><td></td><td>CDN (Content Delivery Network)</td><td>사용자와 가까운 위치에서 콘텐츠를 제공하는 분산 캐시 네트워크</td></tr><tr><td></td><td>Edge Server</td><td>사용자 근처에 위치한 캐시 서버 (CDN 구성 요소)</td></tr><tr><td></td><td>Origin Server</td><td>콘텐츠의 원본을 저장하고 있는 서버</td></tr><tr><td><strong>알고리즘/정책</strong></td><td>LRU (Least Recently Used)</td><td>가장 오랫동안 사용되지 않은 항목을 제거하는 캐시 교체 정책</td></tr><tr><td></td><td>LFU (Least Frequently Used)</td><td>가장 적게 사용된 항목을 제거하는 정책</td></tr><tr><td></td><td>FIFO (First-In-First-Out)</td><td>가장 먼저 들어온 항목을 가장 먼저 제거하는 정책</td></tr><tr><td></td><td>ARC (Adaptive Replacement Cache)</td><td>LRU 와 LFU 의 장점을 결합한 동적 교체 알고리즘</td></tr><tr><td></td><td>Consistent Hashing</td><td>노드 추가/제거 시 최소한의 키 재분배가 일어나는 분산 해싱 기법</td></tr><tr><td></td><td>Eviction Policy</td><td>캐시에서 데이터를 제거할 때 사용하는 정책 (LRU, LFU 등 포함)</td></tr><tr><td></td><td>Probabilistic TTL</td><td>TTL 에 무작위성을 추가하여 캐시 스톰을 방지하는 기법</td></tr><tr><td><strong>쓰기 전략</strong></td><td>Write-Through</td><td>데이터 쓰기 시 캐시와 원본 저장소 (DB) 에 동시에 쓰는 방식</td></tr><tr><td></td><td>Write-Back (Write-Behind)</td><td>먼저 캐시에만 쓰고 나중에 원본 저장소에 비동기적으로 반영하는 방식</td></tr><tr><td></td><td>Write-Around</td><td>원본 저장소에만 쓰고, 캐시는 갱신하지 않는 방식</td></tr><tr><td><strong>패턴/전략</strong></td><td>Cache-Aside</td><td>애플리케이션이 캐시에 직접 데이터를 삽입/갱신하는 방식 (Lazy Load)</td></tr><tr><td></td><td>Read-Through</td><td>캐시 미스 발생 시 자동으로 원본에서 데이터를 읽어와 캐시에 저장</td></tr><tr><td></td><td>Write-Behind</td><td>캐시에 먼저 쓰고 일정 시간 후 원본 저장소에 비동기로 반영</td></tr><tr><td></td><td>Cache Warming</td><td>시스템 초기화 시 자주 사용하는 데이터를 미리 캐시에 적재하는 기법</td></tr><tr><td><strong>일관성/관리</strong></td><td>Cache Invalidation</td><td>원본 데이터 변경 시 관련 캐시를 무효화 또는 갱신하는 전략</td></tr><tr><td></td><td>Cache Coherence</td><td>복수 캐시 간 데이터 일관성을 유지하는 메커니즘 (하드웨어 중심)</td></tr><tr><td><strong>분산 캐시</strong></td><td>Distributed Cache</td><td>여러 노드에 걸쳐 데이터를 저장하여 확장성과 가용성을 높인 캐시 구조</td></tr><tr><td></td><td>Sharding</td><td>데이터를 여러 노드에 나누어 저장하여 캐시 확장성을 확보하는 기법</td></tr><tr><td></td><td>Replication</td><td>동일한 데이터를 여러 노드에 복제하여 가용성과 내결함성 확보</td></tr><tr><td></td><td>Partitioning</td><td>데이터를 논리적/물리적으로 분할하여 저장하는 전략</td></tr><tr><td><strong>문제/보안</strong></td><td>Cache Stampede (Thundering Herd)</td><td>만료된 항목에 동시에 다수 요청이 몰려 서버 부하가 발생하는 현상</td></tr><tr><td></td><td>Hot Key</td><td>특정 캐시 키에 집중적인 요청이 발생해 부하가 한 노드에 몰리는 문제</td></tr><tr><td></td><td>Cache Poisoning</td><td>악의적인 데이터가 캐시에 저장되어 잘못된 응답을 유도하는 보안 공격</td></tr><tr><td><strong>하드웨어/OS</strong></td><td>SRAM</td><td>정적 램, 캐시 구현에 사용되는 고속 메모리 (DRAM 보다 빠르지만 비쌈)</td></tr><tr><td></td><td>TLB (Translation Lookaside Buffer)</td><td>주소 변환을 빠르게 하기 위한 캐시 메모리</td></tr><tr><td></td><td>MESI Protocol</td><td>캐시 일관성을 위한 Modified, Exclusive, Shared, Invalid 프로토콜</td></tr><tr><td><strong>지표/모니터링</strong></td><td>Hit Ratio</td><td>전체 요청 중 캐시에서 직접 반환된 비율 (높을수록 효율적)</td></tr><tr><td></td><td>Eviction Rate</td><td>일정 기간 동안 캐시에서 제거된 항목의 비율</td></tr><tr><td></td><td>Latency Reduction</td><td>캐시 도입을 통한 평균 응답 시간 단축 효과 지표</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><a href=https://redis.io/solutions/caching/>Redis 공식 문서 – Caching 솔루션</a></li><li><a href=https://aws.amazon.com/caching/>AWS – Caching 개요와 전략</a></li><li><a href=https://learn.microsoft.com/en-us/azure/architecture/patterns/cache-aside>Microsoft Learn – Cache‑Aside 패턴</a></li><li><a href=https://www.geeksforgeeks.org/cache-invalidation-and-the-methods-to-invalidate-cache/>GeeksforGeeks – 캐시 무효화</a></li><li><a href=https://hazelcast.com/blog/a-hitchhikers-guide-to-caching-patterns/>Hazelcast – Caching 패턴 가이드</a></li><li><a href=https://highscalability.com/blog/2013/4/15/scaling-pinterest-from-0-to-10s-of-billions-of-page-views-a.html>Pinterest 확장성 사례</a></li><li><a href=https://netflixtechblog.com/content-delivery-network-cdn-394f8a3c3c0d>Netflix CDN 전략</a></li><li><a href=https://randompedia.tistory.com/entry/%EC%BA%90%EC%8B%9CCache-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0>Randompedia – 캐시(Cache) 이해하기</a></li><li><a href=https://wslog.dev/cs-cache>WooSeok.log – 캐시 등장 배경과 동작 원리</a></li><li><a href=https://kkultipguide.com/entry/%EC%BA%90%EC%8B%9CCache%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80>작가의 서재 – 캐시(Cache)란 무엇인가?</a></li><li><a href=https://blog.naver.com/techref/222290234374>Naver Blog (techref) – 캐시 메모리 구조와 히트</a></li><li><a href=https://aws.amazon.com/ko/caching/>AWS (한국) – Caching이란?</a></li><li><a href=https://blog.naver.com/crushhh/222726438109>네이버 블로그 – Arm 프로세서 L1/L2 캐시</a></li><li><a href=https://ttl-blog.tistory.com/1077>티스토리 (ttl-blog) – 컴퓨터 구조 메모리‑캐시</a></li><li><a href=https://computer.casino1004.co.kr/entry/CPU-%EC%BA%90%EC%8B%9C-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EB%B9%A0%EB%A5%B8-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%91%EA%B7%BC%EC%9D%98-%EB%B9%84%EB%B0%80>티스토리 (casino1004) – CPU 캐시 메모리 이해</a></li><li><a href=https://blog.naver.com/sqlpro/222461191564>네이버 블로그 (sqlpro) – 캐시 디자인 패턴</a></li><li><a href=https://yumin.dev/p/%EC%BA%90%EC%8B%9C-%EB%A9%94%EB%AA%A8%EB%A6%ACcache-memory%EC%97%90-%EB%8C%80%ED%95%B4-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90/>yumin.dev – 캐시 메모리(Cache Memory) 설명</a></li><li><a href=https://clarkshim.tistory.com/174>티스토리 (clarkshim) – 캐시 서버 병목과 대책</a></li><li><a href=https://oliveyoung.tech/2022-12-07/oliveyoung-elasticache-springboot/>올리브영 테크블로그 – 무형상품 서비스 캐시 적용기</a></li><li><a href=https://f-lab.kr/insight/understanding-caching-and-distributed-cache-20240517>F‑Lab – 캐싱과 분산 캐시의 이해와 활용</a></li><li><a href=https://yeonyeon.tistory.com/306>연로그 – 스프링 캐시 간단 사용해보기</a></li><li><a href=https://ttl-blog.tistory.com/1077>티스토리 (ttl-blog) – 캐시(Cache)</a></li><li><a href=https://f-lab.kr/insight/understanding-cache-and-optimization-strategies>F‑Lab – 캐시의 이해와 최적화 전략</a></li><li><a href=https://jeonyeohun.tistory.com/311>티스토리 (jeonyeohun) – 이미지 캐싱 적용기</a></li><li><a href=https://kimtaehyun98.tistory.com/48>티스토리 (kimtaehyun98) – 캐시 메모리</a></li><li><a href=https://velog.io/@phantom5087/Computer-ArchitectureMemorycache-%EC%BA%90%EC%8B%9C%EC%9D%98-%EA%B5%AC%EC%A1%B0%EC%99%80-%EC%BA%90%EC%8B%9C-%EC%A0%84%EB%9E%B5>velog (phantom5087) – 캐시 구조와 전략</a></li><li><a href=https://velog.io/@33bini/%EC%BA%90%EC%8B%9C-%EB%A9%94%EB%AA%A8%EB%A6%ACCache-Memory>velog (33bini) – 캐시 메모리(Cache Memory)</a></li></ul><hr></div><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Caching</h2></header><div class=entry-content><p>캐싱 (Caching) 캐싱은 반복 접근이 많은 데이터를 빠른 저장소 (메모리, 디스크, 네트워크 등) 에 임시 저장하여 응답 속도를 높이고 시스템 부하를 줄이는 핵심 최적화 기술이다. 이는 CPU 와 메모리 사이의 하드웨어 캐시부터 애플리케이션 레벨의 In-Memory 캐시, Redis 같은 분산 캐시, CDN 기반 프록시 캐시까지 다양한 계층에서 적용된다.
캐싱은 시간·공간적 지역성 (locality) 을 활용하며, 구현 시 LRU/LFU 같은 교체 정책, TTL 기반 만료, Write-Through/Back 전략 등이 사용된다.
효과적인 캐시 설계는 일관성 (consistency), 무효화 (invalidation), 만료 (expiration) 정책과 함께 계층적 구조 (cache hierarchy) 를 고려해야 하며, 성능 향상, 비용 절감, 확장성 확보 등의 장점이 있다. 반면, 일관성 유지와 메모리 오버헤드는 주요 도전 과제로 남는다.
...</p></div><footer class=entry-footer><span title='2024-09-30 14:14:00 +0000 UTC'>September 30, 2024</span>&nbsp;·&nbsp;91 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Caching" href=https://buenhyden.github.io/posts/system-architecture--design/system-components/data--state-management/cache/caching/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Cache Strategies</h2></header><div class=entry-content><p>Cache Strategy Cache Strategy(캐시 전략) 는 캐시를 효과적으로 활용하여 시스템 성능을 최적화하고 데이터 일관성을 유지하기 위한 방법론이다.
캐싱은 데이터 접근 속도를 높이고, 데이터베이스 부하를 줄이며, 사용자 경험을 향상시키는 데 중요한 역할을 한다. 캐시 전략은 데이터의 특성과 접근 패턴에 따라 적절히 선택해야 한다.
캐싱 전략은 애플리케이션의 성능 최적화와 사용자 경험 개선에 핵심적인 역할을 한다. Cache Aside, Read Through, Write Through 등 다양한 전략은 각각의 장단점과 적합한 사용 사례를 가지고 있으므로, 애플리케이션의 특성과 요구사항에 맞는 최적의 전략을 선택하는 것이 중요하다. 또한, 지속적인 모니터링과 최적화를 통해 효율적인 캐싱 시스템을 유지해야 한다.
...</p></div><footer class=entry-footer><span title='2024-09-30 03:30:00 +0000 UTC'>September 30, 2024</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Cache Strategies" href=https://buenhyden.github.io/posts/system-architecture--design/system-components/data--state-management/cache/caching-strategies/></a></article></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>