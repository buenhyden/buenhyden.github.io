<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Caching | hyunyoun's Blog</title><meta name=keywords content="Software-Engineering,Design-and-Architecture,Architecture-Styles-and-Patterns,Architecture-Patterns,Performance-Patterns,Caching,Performance-Optimization"><meta name=description content="캐싱 (Caching) 은 데이터/결과/요청을 임시로 저장함으로써 반복적인 연산, 입출력, 네트워크 요청에 필요한 시간과 비용을 대폭 줄여주는 핵심 시스템 설계 기법이다. 메모리, 디스크, 분산 환경 등 다양한 계층에서 적용되며, 성능 개선과 응답속도 향상, 시스템 부하 분산에 매우 효과적이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/system-architecture--design/system-components/data--state-management/cache/caching/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/system-architecture--design/system-components/data--state-management/cache/caching/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/system-architecture--design/system-components/data--state-management/cache/caching/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/system-architecture--design/system-components/data--state-management/cache/caching/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Caching"><meta property="og:description" content="캐싱 (Caching) 은 데이터/결과/요청을 임시로 저장함으로써 반복적인 연산, 입출력, 네트워크 요청에 필요한 시간과 비용을 대폭 줄여주는 핵심 시스템 설계 기법이다. 메모리, 디스크, 분산 환경 등 다양한 계층에서 적용되며, 성능 개선과 응답속도 향상, 시스템 부하 분산에 매우 효과적이다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Caching"><meta name=twitter:description content="캐싱 (Caching) 은 데이터/결과/요청을 임시로 저장함으로써 반복적인 연산, 입출력, 네트워크 요청에 필요한 시간과 비용을 대폭 줄여주는 핵심 시스템 설계 기법이다. 메모리, 디스크, 분산 환경 등 다양한 계층에서 적용되며, 성능 개선과 응답속도 향상, 시스템 부하 분산에 매우 효과적이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"HY's Blog","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":6,"name":"Caching","item":"https://buenhyden.github.io/posts/system-architecture--design/system-components/data--state-management/cache/caching/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>HY's Blog</a></div><h1>Caching</h1><div class=post-description>캐싱 (Caching) 은 데이터/결과/요청을 임시로 저장함으로써 반복적인 연산, 입출력, 네트워크 요청에 필요한 시간과 비용을 대폭 줄여주는 핵심 시스템 설계 기법이다. 메모리, 디스크, 분산 환경 등 다양한 계층에서 적용되며, 성능 개선과 응답속도 향상, 시스템 부하 분산에 매우 효과적이다.</div></header><div class=post-content><h2 id=캐싱-caching>캐싱 (Caching)<a hidden class=anchor aria-hidden=true href=#캐싱-caching>#</a></h2><p>캐싱은 반복 접근이 많은 데이터를 빠른 저장소 (메모리, 디스크, 네트워크 등) 에 임시 저장하여 응답 속도를 높이고 시스템 부하를 줄이는 핵심 최적화 기술이다. 이는 CPU 와 메모리 사이의 하드웨어 캐시부터 애플리케이션 레벨의 In-Memory 캐시, Redis 같은 분산 캐시, CDN 기반 프록시 캐시까지 다양한 계층에서 적용된다.</p><p>캐싱은 시간·공간적 지역성 (locality) 을 활용하며, 구현 시 LRU/LFU 같은 교체 정책, TTL 기반 만료, Write-Through/Back 전략 등이 사용된다.</p><p>효과적인 캐시 설계는 일관성 (consistency), 무효화 (invalidation), 만료 (expiration) 정책과 함께 계층적 구조 (cache hierarchy) 를 고려해야 하며, 성능 향상, 비용 절감, 확장성 확보 등의 장점이 있다. 반면, 일관성 유지와 메모리 오버헤드는 주요 도전 과제로 남는다.</p><p>시스템 설계 시 캐시의 위치, 크기, 만료 정책, 정합성 전략 등을 종합적으로 고려하는 것이 중요하다.</p><h3 id=등장-배경-및-발전-과정>등장 배경 및 발전 과정<a hidden class=anchor aria-hidden=true href=#등장-배경-및-발전-과정>#</a></h3><p>캐싱 (Caching) 은 컴퓨터 시스템 성능 최적화를 위한 핵심 기술로, <strong>1960 년대 IBM System/360</strong>에서 처음 도입되었다.<br>초기에는 <strong>CPU 와 메인 메모리 간의 속도 차이</strong>를 줄이기 위한 L1/L2 하드웨어 캐시 구조에서 시작되었다.</p><ul><li><strong>1970~80 년대에는 마이크로프로세서 내부 캐시</strong>로 사용되었다.</li><li><strong>1990 년대에는 웹 브라우저와 서버에서의 HTTP 캐시</strong>, <strong>프록시 서버 기반 네트워크 캐시</strong>가 도입되며 소프트웨어 계층으로 확장되었다.</li><li><strong>2000 년대 이후</strong>, Akamai, Cloudflare 등 <strong>CDN 기반 글로벌 캐시 기술</strong>이 상용화되면서, 대규모 트래픽을 효율적으로 분산시키는 핵심 인프라가 되었고, 이 시기에 <strong>데이터베이스 캐싱</strong>, <strong>파일시스템 캐싱</strong>, <strong>웹 애플리케이션 캐싱</strong> 등이 본격적으로 등장했다.</li><li><strong>2010 년대부터는 클라우드 및 마이크로서비스 환경의 확산</strong>으로 인해 <strong>Redis</strong>, <strong>Memcached</strong> 같은 인메모리 분산 캐시 기술이 본격적으로 채택되기 시작했고, 캐시 일관성과 무효화 전략의 중요성이 함께 부각되었다.</li><li>최근에는 <strong>AI 모델 추론 캐시</strong>, <strong>서버리스 기반 Edge 캐시</strong>, <strong>Lambda@Edge, RedisEdge</strong> 등과 같은 <strong>지능형/분산 캐시 시스템</strong>이 개발되며, 단순한 속도 개선을 넘어서 <strong>비용 절감, 네트워크 절약, 사용자 경험 향상</strong>을 위한 전략적 요소로 진화하고 있다.</li></ul><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><p>캐싱은 시스템 성능을 향상시키는 동시에, 자원 사용 효율화, 비용 절감, 확장성 확보, 장애 대응, 사용자 경험 개선까지 아우르는 <strong>현대 시스템 설계의 핵심 기술</strong>이다.</p><table><thead><tr><th><strong>핵심 목적</strong></th><th><strong>설명</strong></th><th><strong>필요성 (배경/이유)</strong></th></tr></thead><tbody><tr><td><strong>1. 성능 향상</strong></td><td>반복적으로 사용되는 데이터를 빠른 저장소 (메모리 등) 에 저장해 접근 속도를 개선함.</td><td>느린 저장 매체 (디스크, DB, 원격 API) 와의 속도 격차 해소, 사용자 응답 지연 최소화</td></tr><tr><td><strong>2. 자원 효율화</strong></td><td>고비용 연산, 네트워크 요청, 외부 API 호출 등을 줄여 시스템 자원 소비를 줄임.</td><td>동일 요청/연산의 중복 수행 방지, I/O 트래픽 및 연산 부담 절감</td></tr><tr><td><strong>3. 시스템 확장성 확보</strong></td><td>백엔드 부하를 캐시 계층으로 분산시켜 다수의 요청을 수용 가능한 구조로 확장 가능하게 함.</td><td>서비스 사용자 증가나 트래픽 증가에도 병목 없이 처리 가능</td></tr><tr><td><strong>4. 비용 절감</strong></td><td>고속 저장소나 외부 유료 API 호출을 줄여 인프라/서비스 사용 요금을 줄임.</td><td>불필요한 고속 디스크 사용, 외부 API 과금, 데이터 전송 비용 등 절약</td></tr><tr><td><strong>5. 가용성 향상</strong></td><td>원본 시스템이 장애를 일으켜도 캐시된 데이터를 활용해 서비스 지속성을 확보함.</td><td>장애 시 완전 중단 방지 (Fallback), 임시 응답 제공 가능</td></tr><tr><td><strong>6. 사용자 경험 개선</strong></td><td>빠른 응답 제공, 부하에 강한 시스템 운영을 통해 일관된 UX 제공</td><td>페이지 로딩 지연, API 타임아웃, DB 병목 등의 문제를 사전에 차단함</td></tr></tbody></table><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><table><thead><tr><th><strong>항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>정의</strong></td><td>자주 사용되거나 계산 비용이 큰 데이터를 빠른 저장소 (메모리 등) 에 임시 저장하여 빠르게 접근하는 기법</td></tr><tr><td><strong>기반 원리</strong></td><td>지역성 (Locality of Reference): 시간적 지역성 (Temporal) + 공간적 지역성 (Spatial)</td></tr><tr><td><strong>히트/미스</strong></td><td>캐시 히트 (Cache Hit): 요청 데이터가 캐시에 존재 / 캐시 미스 (Cache Miss): 캐시에 없어 원본에서 조회</td></tr><tr><td><strong>적중률</strong></td><td>전체 요청 중 히트 비율 (Hit Rate): 캐시 효과를 평가하는 핵심 지표</td></tr><tr><td><strong>일관성 유지</strong></td><td>Cache Consistency/Coherence: 캐시와 원본 데이터 동기화 상태 유지 필요</td></tr><tr><td><strong>무효화 전략</strong></td><td>TTL(Time-To-Live), Explicit Invalidation, Write-based Invalidation 등</td></tr><tr><td><strong>교체 정책</strong></td><td>LRU, LFU, FIFO 등 공간이 부족할 때 어떤 데이터를 제거할지 결정하는 알고리즘</td></tr><tr><td><strong>쓰기 전략</strong></td><td>Write-through, Write-back, Write-around 방식으로 원본과 캐시 동기화 처리</td></tr><tr><td><strong>캐시 계층 구조</strong></td><td>L1/L2/L3 (CPU 캐시) → 애플리케이션 캐시 (로컬/분산) → DB 캐시 → CDN 등 계층적 구조</td></tr><tr><td><strong>캐시 위치 유형</strong></td><td>클라이언트, CDN, API Gateway, 앱 서버, DB, 네트워크 프록시 등 다양한 위치에 배치 가능</td></tr></tbody></table><h4 id=실무-구현-연관성>실무 구현 연관성<a hidden class=anchor aria-hidden=true href=#실무-구현-연관성>#</a></h4><table><thead><tr><th><strong>실무 항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>성능 최적화</strong></td><td>DB 쿼리, 외부 API 호출, 반복 연산 결과를 캐싱하여 처리 시간 단축 및 TPS 향상</td></tr><tr><td><strong>시스템 확장성</strong></td><td>캐시 계층으로 부하를 분산하여 트래픽 증가 시에도 백엔드 시스템 과부하 없이 수용 가능</td></tr><tr><td><strong>비용 절감</strong></td><td>외부 API 과금 회피, I/O 요청 감소, CPU 사용량 최소화로 인프라 리소스 비용 감소</td></tr><tr><td><strong>장애 복원성</strong></td><td>백엔드 다운 시에도 캐시 데이터를 기반으로 일정 수준의 서비스 지속성 (Fallback 제공)</td></tr><tr><td><strong>운영 가시성 확보</strong></td><td>캐시 적중률/미스율 모니터링, TTL 관리, 캐시 부하/과부하 상황 감지 및 조정 필요</td></tr><tr><td><strong>캐시 일관성 관리</strong></td><td>데이터 변경에 따른 캐시 갱신 동기화: Event 기반 Invalidation 또는 TTL 활용 전략</td></tr><tr><td><strong>캐시 폭주 방지</strong></td><td>Thundering Herd 문제 방지를 위해 Locking, 미리 캐시 Warm-up, 요청 큐잉 등 적용</td></tr><tr><td><strong>인프라/도구 연동</strong></td><td>Redis, Memcached, CDN (Cloudflare 등), 프레임워크 내장 캐시 (Spring, Django 등) 구성 고려</td></tr><tr><td><strong>보안 및 접근 통제</strong></td><td>캐시된 민감 데이터는 암호화, 인증 기반 접근 제어, 접근 로그 수집 필요</td></tr></tbody></table><h4 id=캐시-계층-구조>캐시 계층 구조<a hidden class=anchor aria-hidden=true href=#캐시-계층-구조>#</a></h4><pre class=mermaid>graph TD
    A[Client Request] --&gt; B[CDN / Edge Cache]
    B --&gt; C[&#34;App Layer Cache (e.g. Redis)&#34;]
    C --&gt; D[&#34;Database Cache (e.g. Query Result Cache)&#34;]
    D --&gt; E[&#34;Primary Data Source (e.g. RDS, Filesystem)&#34;]
</pre><h3 id=caching-의-주요-기능-및-역할>Caching 의 주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#caching-의-주요-기능-및-역할>#</a></h3><table><thead><tr><th>카테고리</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>데이터 저장</strong></td><td>임시 저장</td><td>자주 접근되는 데이터를 메모리 또는 디스크에 임시로 저장하여 재사용 가능</td></tr><tr><td></td><td>계층화 구조</td><td>L1/L2/L3 등 다단계 캐시 구성으로 성능 대비 효율 극대화</td></tr><tr><td></td><td>분산 캐시</td><td>클러스터/멀티 노드 환경에서 수평적 확장 가능</td></tr><tr><td><strong>성능 최적화</strong></td><td>빠른 데이터 제공</td><td>캐시된 데이터를 통해 빠른 응답 제공 (Latency 감소)</td></tr><tr><td></td><td>병목 완화</td><td>DB·API 등 느린 자원의 부하를 줄여 시스템 전체 병목 현상 완화</td></tr><tr><td></td><td>트래픽 절감</td><td>동일 요청에 대한 반복 처리 방지, 네트워크 대역폭 절감</td></tr><tr><td><strong>정책 관리</strong></td><td>만료 정책 (TTL 등)</td><td>TTL, TTI 등 시간 기반 만료 관리로 데이터 신선도 유지</td></tr><tr><td></td><td>교체 정책</td><td>LRU, LFU, FIFO 등 메모리 초과 시 제거할 데이터 결정</td></tr><tr><td></td><td>캐시 무효화</td><td>데이터 업데이트 또는 명시적 요청에 따른 캐시 삭제 (Invaliation) 관리</td></tr><tr><td><strong>일관성 관리</strong></td><td>Write-through</td><td>쓰기 요청이 캐시와 원본에 동시에 적용됨</td></tr><tr><td></td><td>Write-behind</td><td>캐시에 먼저 쓰고, 일정 주기로 원본에 반영 (비동기 처리)</td></tr><tr><td></td><td>Lazy Write</td><td>데이터가 만료될 때까지 원본으로 전파되지 않음</td></tr><tr><td></td><td>동기화 정책</td><td>원본 데이터와 캐시 간의 데이터 상태를 일관되게 유지하기 위한 동기화 전략 적용</td></tr><tr><td><strong>운영 및 모니터링</strong></td><td>히트/미스 측정</td><td>캐시 적중률 (히트율) 과 미스율을 통해 정책 효과를 분석하고 튜닝 지표 확보</td></tr><tr><td></td><td>자동 관리</td><td>만료/교체/확장 등의 자동 수행을 통한 운영 효율성 확보</td></tr><tr><td></td><td>가용성 보장</td><td>원본 서버 장애 시에도 캐시된 데이터로 임시 서비스 지속 가능</td></tr><tr><td></td><td>사용자 경험 개선</td><td>응답 속도 개선을 통한 UI/UX 향상</td></tr></tbody></table><ul><li><p><strong>데이터 저장</strong><br>→ 빠른 접근성과 재사용을 위해 메모리/디스크 기반의 임시 저장소를 구성하며, 다계층/분산 캐시 구조로 확장성과 고성능을 동시에 달성한다.</p></li><li><p><strong>성능 최적화</strong><br>→ 캐시 적중 시 응답 시간이 단축되고, 백엔드 시스템의 부하를 줄여 전체 시스템의 병목을 완화한다. 결과적으로 트래픽 및 리소스 소비를 줄인다.</p></li><li><p><strong>정책 관리</strong><br>→ TTL 기반의 자동 만료, LRU 등 교체 정책, 무효화 (Invalidation) 를 통해 제한된 자원 내에서 최신성을 유지하고 캐시 오염을 방지한다.</p></li><li><p><strong>일관성 관리</strong><br>→ Write-through, Write-behind, Lazy Write 등의 전략을 통해 원본 데이터와의 동기화 수준을 선택적으로 조절할 수 있어 다양한 사용 시나리오에 대응 가능하다.</p></li><li><p><strong>운영 및 모니터링</strong><br>→ 캐시 히트율 분석 및 자동화 기능을 통해 성능 분석 및 운영 부담을 줄이며, 원본 장애 시에도 일정 수준의 서비스 연속성을 보장하고 UX 를 개선할 수 있다.</p></li></ul><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>핵심 원칙</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>데이터 접근 원리</strong></td><td>지역성 원리 (Locality)</td><td>시간적/공간적 지역성에 기반한 반복적 접근 패턴 활용</td></tr><tr><td></td><td>파레토 원칙 (80/20 Rule)</td><td>전체 데이터 중 일부가 대부분의 요청을 차지한다는 가정</td></tr><tr><td><strong>동작 투명성 및 격리</strong></td><td>캐시 투명성</td><td>애플리케이션은 캐시 존재를 인식하지 않고 동일하게 동작해야 함</td></tr><tr><td></td><td>장애 격리</td><td>캐시 장애가 전체 시스템 장애로 확산되지 않도록 격리되어야 함</td></tr><tr><td><strong>성능 최적화</strong></td><td>히트율 극대화</td><td>최대한 많은 요청이 캐시에서 처리되도록 적중률을 높이는 전략 필요</td></tr><tr><td></td><td>적절한 캐시 크기 설정</td><td>자원 제약 내에서 가장 높은 성능을 낼 수 있는 최적 크기 설정 필요</td></tr><tr><td></td><td>예측 가능성</td><td>캐시 동작은 디버깅 및 최적화를 위해 예측 가능해야 함</td></tr><tr><td><strong>정책 및 일관성 관리</strong></td><td>일관성 원칙</td><td>캐시와 원본 간 데이터 불일치를 최소화해야 함</td></tr><tr><td></td><td>만료/갱신 정책</td><td>TTL, LRU, LFU 등 교체 정책은 데이터 부패 및 낭비를 방지</td></tr><tr><td></td><td>Freshness vs Consistency</td><td>신선한 데이터와 일관된 데이터 사이의 균형 필요</td></tr><tr><td></td><td>Fallback 원칙</td><td>캐시 미스 시 원본 접근 또는 다른 대체 경로를 통한 처리 보장 필요</td></tr><tr><td><strong>운영 및 모니터링</strong></td><td>통계 기반 판단</td><td>Hit/Miss Ratio 등 메트릭을 통한 캐시 성능 측정 및 판단</td></tr><tr><td></td><td>캐시 위치 결정</td><td>클라이언트, API Gateway, 서버 등 시스템 구조에 맞는 위치에 캐시 배치</td></tr><tr><td></td><td>지속적 튜닝 및 모니터링</td><td>히트율, 레이턴시, 교체율 등을 기반으로 지속적인 개선 필요</td></tr></tbody></table><ul><li><p><strong>데이터 접근 원리</strong>:<br>캐시는 " 반복 접근 " 이라는 현실을 기반으로 최적화된 구조를 구성한다. 시간적/공간적 지역성을 적극 활용하며, 소수 데이터가 다수 트래픽을 차지한다는 파레토 원칙도 고려되어야 한다.</p></li><li><p><strong>동작 투명성 및 격리</strong>:<br>캐싱 시스템은 외부에서 보이지 않아야 하며, 캐시 장애가 전체 서비스 장애로 이어지지 않도록 **격리성 (Isolation)**을 보장해야 한다.</p></li><li><p><strong>성능 최적화</strong>:<br>히트율을 최대화하고 메모리 크기를 효율적으로 설정해야 한다. 동시에 예측 가능한 동작은 성능 디버깅과 튜닝을 가능하게 하며, 이는 실시간 운영 환경에서 매우 중요하다.</p></li><li><p><strong>정책 및 일관성 관리</strong>:<br>캐시 갱신과 무효화 정책은 데이터 품질을 좌우한다. 신선도와 일관성 사이에서의 균형점 설정, 그리고 장애 시 대체 경로 확보는 고가용성을 위한 핵심 전략이다.</p></li><li><p><strong>운영 및 모니터링</strong>:<br>캐시는 설정 후 방치되는 것이 아니라 지속적으로 모니터링하고 조정되어야 한다. 캐시 위치, 성능 지표, 교체율 분석 등을 기반으로 최적 상태를 유지해야 한다.</p></li></ul><h3 id=주요-원리>주요 원리<a hidden class=anchor aria-hidden=true href=#주요-원리>#</a></h3><ul><li><strong>Temporal locality (시간 국소성)</strong>: 한 번 접근한 데이터는 가까운 시간 내에 다시 활용될 가능성이 높다.</li><li><strong>Spatial locality (공간 국소성)</strong>: 인접한 주소의 데이터는 함께 접근될 가능성이 높다.</li><li><strong>교체 정책 (Eviction policy)</strong>: 적중률을 최대화하기 위한 전략 (LRU, LFU, FIFO, Random, RRIP 등)</li><li><strong>쓰기 정책 (Write policy)</strong>: Write-through vs Write-back, Write-allocate vs No-write-allocate 기반 결정</li></ul><pre class=mermaid>graph TD
    A[Client Request] --&gt; B{Cache Check}
    B --&gt;|Hit| C[Return Cached Data]
    B --&gt;|Miss| D[Fetch from Origin]
    D --&gt; E[Store in Cache]
    E --&gt; F[Return Data to Client]
    C --&gt; G[Update Access Statistics]
    F --&gt; G
    G --&gt; H[Apply Replacement Policy]
</pre><h3 id=작동-흐름-및-방식>작동 흐름 및 방식<a hidden class=anchor aria-hidden=true href=#작동-흐름-및-방식>#</a></h3><pre class=mermaid>sequenceDiagram
    participant C as Client
    participant CH as Cache
    participant DB as Database
    
    C-&gt;&gt;CH: Request Data (Key)
    alt Cache Hit
        CH-&gt;&gt;C: Return Cached Data
    else Cache Miss
        CH-&gt;&gt;DB: Fetch Data
        DB-&gt;&gt;CH: Return Data
        CH-&gt;&gt;CH: Store Data with TTL
        CH-&gt;&gt;C: Return Data
    end
</pre><p><strong>작동 원리:</strong></p><ol><li>요청 수신 시 캐시에서 데이터 존재 여부 확인</li><li>캐시 히트 시 즉시 데이터 반환</li><li>캐시 미스 시 원본 저장소에서 데이터 로드</li><li>로드된 데이터를 캐시에 저장 후 반환</li><li>캐시 용량 초과 시 교체 정책에 따라 데이터 제거</li></ol><h3 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h3><pre class=mermaid>graph TB
    subgraph &#34;캐시 시스템 아키텍처&#34;
        A[클라이언트] --&gt; B[캐시 매니저]
        B --&gt; C[캐시 저장소]
        B --&gt; D[교체 정책 엔진]
        B --&gt; E[일관성 관리자]
        B --&gt; F[원본 데이터 소스]
        
        subgraph &#34;캐시 저장소&#34;
            C --&gt; G[메타데이터]
            C --&gt; H[실제 데이터]
            C --&gt; I[인덱스]
        end
    end
</pre><h4 id=구성-요소>구성 요소<a hidden class=anchor aria-hidden=true href=#구성-요소>#</a></h4><table><thead><tr><th>구분</th><th><strong>구성요소</strong></th><th><strong>기능</strong></th><th><strong>역할</strong></th><th><strong>특징 / 목적</strong></th></tr></thead><tbody><tr><td>필수</td><td><strong>캐시 저장소</strong></td><td>데이터 저장</td><td>실제 캐시 데이터의 고속 저장소 역할</td><td>DRAM 등 메모리 기반, 접근 속도 중심 설계</td></tr><tr><td></td><td><strong>캐시 매니저</strong></td><td>캐시 동작 제어</td><td>삽입, 조회, 삭제 등 캐시 로직 총괄 관리</td><td>인터페이스 제공, 내부 캐시 로직 추상화</td></tr><tr><td></td><td><strong>교체 정책 엔진</strong></td><td>데이터 제거 정책 수행</td><td>저장소가 가득 찼을 때 교체 항목 결정</td><td>LRU, LFU, FIFO 등 다양한 알고리즘 사용</td></tr><tr><td></td><td><strong>메타데이터 관리</strong></td><td>상태/속성 정보 유지</td><td>각 캐시 항목의 TTL, 접근 시간, 우선순위 관리</td><td>교체 및 만료 판단에 필요한 정보 추적</td></tr><tr><td>선택</td><td><strong>일관성 관리자</strong></td><td>데이터 동기화</td><td>분산 캐시 간 데이터 일관성 유지</td><td>Write-through, Invalidation, Gossip 프로토콜 등 활용 가능</td></tr><tr><td></td><td><strong>성능 모니터</strong></td><td>히트율, 지연시간 등 수집</td><td>캐시 운영 상태 측정 및 튜닝 가이드 제공</td><td>관찰성 (Observability) 확보, 대시보드/알림과 연계 가능</td></tr><tr><td></td><td><strong>압축 모듈</strong></td><td>캐시 데이터 압축/해제</td><td>저장 공간 최적화 및 전송 효율 향상</td><td>CPU 사용량 증가 가능성, 압축률과 성능 간 Trade-off</td></tr><tr><td></td><td><strong>암호화 모듈</strong></td><td>데이터 암호화 및 복호화</td><td>민감 정보 보안 강화</td><td>데이터 유출/침입 대비, TLS 등 외부 연계 보안과 병행 사용 가능</td></tr></tbody></table><h3 id=구현-기법-및-방법>구현 기법 및 방법<a hidden class=anchor aria-hidden=true href=#구현-기법-및-방법>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>기법/전략</strong></th><th><strong>정의/구성요소</strong></th><th><strong>주요 목적</strong></th><th><strong>예시 및 적용</strong></th></tr></thead><tbody><tr><td><strong>1. 배치 구조 (Placement)</strong></td><td>인메모리 캐시<br>분산 캐시<br>CDN</td><td>메모리 또는 다중 노드/엣지에 데이터 저장</td><td>고속 접근, 확장성, 지역 기반 성능 향상</td><td>Redis, Memcached, Redis Cluster, Cloudflare</td></tr><tr><td><strong>2. 읽기 전략 (Read)</strong></td><td>Cache-Aside<br>Read-Through<br>Refresh-Ahead</td><td>캐시 미스 처리 방식: Lazy Loading, 자동 로딩, TTL 전 리프레시</td><td>캐시 자동화, 성능 향상, 데이터 신선도 유지</td><td>사용자 조회, API 캐싱, 인기 콘텐츠 선제 로딩</td></tr><tr><td><strong>3. 쓰기 전략 (Write)</strong></td><td>Write-Through<br>Write-Back<br>Write-Around</td><td>데이터 변경 시 캐시/DB 반영 방식: 동기/비동기/건너뛰기</td><td>일관성 확보, 쓰기 성능 최적화</td><td>주문 저장, 로그 수집, 일회성 데이터 업로드</td></tr><tr><td><strong>4. 무효화 전략 (Invalidation)</strong></td><td>TTL 기반<br>이벤트 기반<br>패턴 기반</td><td>캐시 만료 또는 갱신 정책 설정 및 실행</td><td>신선도 유지, 대규모 변경 대응</td><td>뉴스, 게시판 수정, 키 패턴 일괄 삭제</td></tr><tr><td><strong>5. 교체 알고리즘 (Eviction)</strong></td><td>LRU<br>LFU<br>FIFO</td><td>캐시 공간 초과 시 제거 대상 결정 방식</td><td>효율적 메모리 사용, 적중률 향상</td><td>Redis, Caffeine, Guava</td></tr><tr><td><strong>6. 분산 전략 (Distribution)</strong></td><td>샤딩<br>복제<br>일관성 해시</td><td>여러 노드 간 데이터 분산 및 일관성 유지</td><td>확장성, 고가용성, 장애 대응</td><td>Redis Cluster, Hazelcast, CDN Edge Routing</td></tr><tr><td><strong>7. 정책 기반 구성</strong></td><td>TTL 설정<br>교체 정책<br>쓰기 정책 혼합</td><td>캐시의 수명/공간/일관성 등 전반적인 동작 제어</td><td>유연한 제어, 운영 안정성</td><td>Web App + Redis TTL + LRU + Write-Through 구조</td></tr><tr><td><strong>8. 시스템 통합 방식</strong></td><td>미들웨어/Wrapper<br>Interceptor/Decorator</td><td>애플리케이션과의 통합 방식 (코드 레벨 or 시스템 레벨)</td><td>추상화, 재사용성, 간편 적용</td><td>NestJS, Django, Flask, Spring 등 프레임워크 기반 캐시 구현</td></tr></tbody></table><ul><li><p><strong>배치 구조 (Placement)</strong>:<br>캐시의 <strong>물리적 위치</strong>와 관련되며, 응답 속도와 인프라의 지역/확장성에 영향을 준다. 인메모리 캐시는 단일 노드에서 초고속 성능을, 분산 캐시는 확장성과 가용성을, CDN 은 글로벌 사용자 접근 성능을 높인다.</p></li><li><p><strong>읽기 전략 (Read)</strong>:<br><strong>캐시 미스 발생 시 대응 방식</strong>을 다루며, 애플리케이션이 직접 관리하는지, 캐시 시스템이 자동으로 처리하는지에 따라 전략이 나뉜다. Refresh-Ahead 는 TTL 전에 데이터를 선제적으로 갱신해 캐시 미스를 최소화한다.</p></li><li><p><strong>쓰기 전략 (Write)</strong>:<br>데이터 변경 시 <strong>캐시와 원본 저장소 간의 동기화 방식</strong>을 다룬다. 일관성이 중요한 경우 Write-Through, 성능이 중요한 경우 Write-Back, 일회성 데이터는 Write-Around 가 적합하다.</p></li><li><p><strong>무효화 전략 (Invalidation)</strong>:<br><strong>데이터가 변경되었을 때 캐시를 어떻게 제거할지</strong>에 관한 전략이다. TTL 은 자동화, 이벤트 기반은 정확성, 패턴 기반은 대규모 처리에 적합하다.</p></li><li><p><strong>교체 알고리즘 (Eviction)</strong>:<br><strong>공간이 부족할 때 제거할 항목</strong>을 선택하는 기준으로, 시간적/빈도 기반 지역성을 활용한 LRU/LFU 가 가장 일반적이다. 환경에 따라 FIFO, ARC 등도 선택된다.</p></li><li><p><strong>분산 전략 (Distribution)</strong>:<br><strong>여러 노드 간 캐시 데이터를 분산하거나 복제</strong>하는 방식으로, 대규모 시스템에서 확장성과 신뢰성을 위해 필수이다. 일관성 해시는 노드 추가/삭제에 따른 데이터 재분배를 최소화해준다.</p></li><li><p><strong>정책 기반 구성</strong>:<br>캐시의 동작을 TTL, 쓰기 정책, 교체 정책 등으로 조합하여 <strong>전체적인 운용 전략을 유연하게 구성</strong>하는 접근이다.</p></li><li><p><strong>시스템 통합 방식</strong>:<br>캐시 로직을 어떻게 <strong>애플리케이션 레이어와 결합할 것인지</strong>에 대한 전략이다. 미들웨어나 데코레이터 방식은 코드 분리를 유지하면서 재사용 가능한 캐시 구현을 가능하게 한다.</p></li></ul><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><table><thead><tr><th>카테고리</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>성능 향상</strong></td><td>응답 속도 개선</td><td>메모리 기반 접근으로 지연 시간 (Latency) 감소 및 빠른 응답 제공</td></tr><tr><td></td><td>처리량 증대</td><td>백엔드 부하 감소로 TPS(QPS) 향상, 더 많은 요청을 처리 가능</td></tr><tr><td></td><td>사용자 경험 개선</td><td>대기 시간 감소로 UX 최적화, 인터랙티브한 서비스 구현 지원</td></tr><tr><td><strong>부하 분산</strong></td><td>서버 부하 감소</td><td>동일 요청에 대한 반복 처리 시 DB/API 호출 최소화로 시스템 리소스 사용 절감</td></tr><tr><td></td><td>병목 완화</td><td>고속 캐시가 느린 저장소 대신 처리함으로써 전체 시스템 병목 지점 제거</td></tr><tr><td></td><td>트래픽 최적화</td><td>외부 API/네트워크 요청 수 감소로 전체 트래픽 감소</td></tr><tr><td><strong>가용성/복원력</strong></td><td>장애 내성</td><td>원본 시스템 장애 시에도 캐시 데이터로 응답 가능, 서비스 연속성 확보</td></tr><tr><td></td><td>비동기 대응</td><td>원본 지연 시에도 캐시 응답으로 유연하게 대응 가능</td></tr><tr><td></td><td>Failover 보완</td><td>CDN/Edge 캐시를 활용해 일부 네트워크/서버 장애 상황에서도 대응 가능</td></tr><tr><td><strong>비용 절감</strong></td><td>리소스 비용 절약</td><td>RDS/외부 API 연산 비용 및 네트워크 비용 최소화</td></tr><tr><td></td><td>인프라 비용 절감</td><td>병목 해소 및 부하 분산을 통해 추가 서버 증설 없이 확장 가능</td></tr><tr><td></td><td>고비용 연산 캐싱</td><td>반복 연산, ML 추론 결과, 복잡한 쿼리 등의 결과를 재사용하여 CPU/메모리 사용 최적화</td></tr><tr><td><strong>확장성</strong></td><td>수평 확장 지원</td><td>Redis Cluster 등 분산 캐시 기반으로 수평 확장 및 고부하 대응</td></tr><tr><td></td><td>글로벌 서비스 지원</td><td>CDN, Geo 캐시 활용으로 지역 기반 로딩 속도 개선 및 글로벌 사용자 대응</td></tr><tr><td><strong>네트워크 최적화</strong></td><td>대역폭 절감</td><td>로컬 캐시 및 엣지 캐시를 통해 원거리 요청 횟수 최소화</td></tr><tr><td></td><td>응답 경로 단축</td><td>사용자 ↔ 캐시 사이의 짧은 네트워크 경로로 라우팅 시간 최소화</td></tr></tbody></table><ul><li><p><strong>성능 향상</strong><br>→ 인메모리 캐시를 통해 데이터 접근 속도가 획기적으로 향상되며, 사용자 응답 시간을 단축시키고 대용량 트래픽에도 빠르게 반응할 수 있다.</p></li><li><p><strong>부하 분산</strong><br>→ 중복된 요청을 캐시가 처리함으로써 백엔드 서버, 데이터베이스, 외부 API 호출의 부담이 줄어들고 병목 현상을 예방할 수 있다.</p></li><li><p><strong>가용성/복원력</strong><br>→ 캐시된 데이터는 일시적인 원본 시스템 장애나 지연 상황에서도 사용자에게 빠른 대체 응답을 제공하여 서비스 연속성과 신뢰도를 높인다.</p></li><li><p><strong>비용 절감</strong><br>→ 값비싼 연산이나 외부 API 호출을 줄이고, 리소스 사용을 최적화하여 서버, 데이터베이스, 네트워크 비용을 절감한다.</p></li><li><p><strong>확장성</strong><br>→ 분산 캐시 아키텍처를 통해 수평적으로 손쉽게 확장 가능하며, 글로벌 사용자에게 지역 최적화된 데이터를 제공할 수 있다.</p></li><li><p><strong>네트워크 최적화</strong><br>→ 캐시를 네트워크 경로 중간에 위치시킴으로써 대역폭을 절약하고, 전송 지연을 줄여 효율적인 통신 환경을 구성할 수 있다.</p></li></ul><h3 id=단점과-문제점-그리고-해결방안>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안>#</a></h3><h4 id=단점-및-해결방안>단점 및 해결방안<a hidden class=anchor aria-hidden=true href=#단점-및-해결방안>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결 방안</th></tr></thead><tbody><tr><td>일관성 문제</td><td>데이터 불일치</td><td>캐시와 원본 간 동기화 지연으로 stale 데이터 제공 위험</td><td>TTL 설정, Write-through, Event 기반 Invalidation</td></tr><tr><td>자원/비용 문제</td><td>메모리 및 리소스 부담</td><td>인메모리 캐시의 고비용, 메모리 제한 문제</td><td>캐시 크기 제한, LRU/LFU 도입, 계층적 캐싱, 압축 기술</td></tr><tr><td>복잡성 증가</td><td>아키텍처/운영 복잡도</td><td>분산 캐시, TTL 조정, 무효화 정책 등 시스템 운영 복잡도 증가</td><td>추상화 프레임워크 사용, 정책 자동화, 표준화된 설계 적용</td></tr><tr><td>초기 성능 저하</td><td>콜드 스타트 문제</td><td>서비스 재시작 또는 초기 요청 시 캐시 미스 → 성능 저하</td><td>Pre-warm 전략, 중요 데이터 프리로딩, Lazy loading</td></tr><tr><td>휘발성</td><td>데이터 영속성 부족</td><td>Redis 등 휘발성 캐시 사용 시 장애나 재시작 시 데이터 유실 가능</td><td>AOF/RDB 설정, 복제 구성, Disk 기반 백업 활용</td></tr><tr><td>관리 부담</td><td>TTL 관리 어려움</td><td>데이터 특성별 TTL 정책 관리 복잡화</td><td>자동 TTL 정책 적용, TTL 모니터링 및 조정 도구 도입</td></tr></tbody></table><ul><li><p><strong>일관성 이슈</strong>는 대부분의 캐시 시스템에서 핵심 위험 요소이며, TTL 및 무효화 정책, write-through 패턴이 주요 대응 전략으로 활용된다.</p></li><li><p><strong>자원 부담</strong>은 캐시가 메모리 위주로 운영되기 때문에 필연적으로 따라오며, 교체 정책 및 계층화 설계가 핵심 해결책이다.</p></li><li><p><strong>복잡성</strong>은 운영 자동화 및 표준화 도구로 낮출 수 있으며, 특히 대규모 시스템에서는 필수이다.</p></li><li><p><strong>콜드 스타트와 휘발성</strong> 문제는 워밍업 및 영속화 전략이 요구되며, 운영 경험 기반으로 사전 대비가 필요하다.</p></li></ul><h4 id=문제점-및-해결방안>문제점 및 해결방안<a hidden class=anchor aria-hidden=true href=#문제점-및-해결방안>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>해결 방안 및 기법</th></tr></thead><tbody><tr><td>일관성 문제</td><td>Stale Cache</td><td>원본 데이터 변경 후 캐시 미무효화</td><td>잘못된 응답 제공, UX 저하</td><td>데이터 diff, 접근 로그, TTL 초과 감지</td><td>TTL 단축, Event 기반 무효화, Write-through 도입</td></tr><tr><td>성능 이슈</td><td>Cache Stampede</td><td>다수 요청이 동시에 캐시 미스 → 원본에 과부하</td><td>순간적인 부하 폭증, DB 장애</td><td>응답 시간 급증, 미스율 상승 모니터링</td><td>Mutex Lock, SingleFlight, Lazy loading 적용</td></tr><tr><td>성능 이슈</td><td>Cold Start</td><td>서비스 재시작 시 캐시 비워짐</td><td>초기 응답 지연, 성능 저하</td><td>워밍업 시간 모니터링, QPS 급감 탐지</td><td>Prewarm, 중요 데이터 미리 캐싱</td></tr><tr><td>보안/정합성</td><td>Cache Poisoning</td><td>악의적 요청/버그로 잘못된 데이터 캐싱</td><td>오염된 응답 제공, 보안 이슈</td><td>비정상 응답 탐지, 비정형 로그 추적</td><td>입력 필터링, 캐시 범위 제한, 서명 기반 캐싱 적용</td></tr><tr><td>확장성 문제</td><td>Hot Key 집중</td><td>특정 키에 요청 쏠림 (ex. 인기 상품 ID)</td><td>특정 노드 부하 집중, 병목</td><td>Key 요청 비율 분석, 노드 부하 모니터링</td><td>Consistent Hashing, Replication, Key Sharding</td></tr><tr><td>자원 문제</td><td>Memory Leak</td><td>TTL 미설정, 무한 저장 등으로 인해 캐시 해제가 안 됨</td><td>메모리 과점유, 장애 가능성</td><td>메모리 사용률 및 히트율 모니터링</td><td>TTL 강제 적용, 캐시 청소 스케줄러, 자동 정리 기법 적용</td></tr><tr><td>설계 결함</td><td>Over Caching</td><td>민감 데이터, 임시 데이터 등도 캐싱되어 불필요한 부하 및 위험 발생</td><td>데이터 노출, 정책 혼란</td><td>민감 키 감지, 캐시 로그 분석</td><td>민감 데이터 제외 규칙, 캐시 마스킹 정책 적용</td></tr><tr><td>설계 결함</td><td>중복 캐싱 구조</td><td>동일 데이터가 여러 캐시 계층에 존재함 → 일관성/성능 저하 유발</td><td>캐시간 충돌, 불필요한 리소스 사용</td><td>계층 간 캐시 히트/미스 분포 분석</td><td>계층 통합 설계, 캐시 우선순위 및 Scope 조정</td></tr></tbody></table><ul><li><p><strong>Stale Cache</strong>는 캐시 일관성 문제 중 가장 빈번하며, TTL 조정 및 이벤트 기반 무효화로 대응해야 한다.</p></li><li><p><strong>Cache Stampede</strong> 및 <strong>Cold Start</strong>는 성능 저하의 핵심 원인으로, 요청 직렬화 및 캐시 워밍 전략이 필수다.</p></li><li><p><strong>Hot Key 문제</strong>는 샤딩과 해싱 전략을 통해 부하를 분산시키는 것이 핵심이다.</p></li><li><p><strong>보안 및 정합성 문제</strong>는 필터링, 서명 기반 검증 등의 방어 전략이 요구된다.</p></li><li><p><strong>설계 결함</strong>은 캐시 범위와 계층 구성을 체계화하고, 데이터 특성을 고려한 예외 처리 정책이 병행되어야 한다.</p></li></ul><h3 id=caching-도전-과제>Caching 도전 과제<a hidden class=anchor aria-hidden=true href=#caching-도전-과제>#</a></h3><table><thead><tr><th>카테고리</th><th>주요 과제 항목</th><th>원인 및 영향</th><th>탐지/진단 방법</th><th>예방/해결 전략</th></tr></thead><tbody><tr><td>일관성</td><td>분산 캐시 간 동기화 문제</td><td>분산 환경에서 TTL 오차, 동시성 충돌, 캐시 무효화 실패로 인한 데이터 불일치 발생</td><td>TTL 만료 로그 분석, 버전 관리, 무효화 실패 패턴 분석</td><td>최종 일관성 모델, 벡터 클럭, 이벤트 기반 무효화 (Pub/Sub), CQRS 적용</td></tr><tr><td>성능</td><td>낮은 캐시 히트율 및 응답 지연</td><td>다양한 워크로드, 예측 불가한 트래픽 패턴, 병목 발생 (원격 캐시 지연, 과부하)</td><td>Latency Spike, APM 성능 지표, 캐시 미스율 모니터링</td><td>Local Cache 우선, QoS 기반 접근 제어, 적응형 캐시 크기 조정, ML 기반 예측 캐싱</td></tr><tr><td>확장성</td><td>글로벌 및 동적 확장 한계</td><td>캐시 노드 증감 시 파티셔닝 재배치 필요, 멀티 리전 간 데이터 동기화 어려움</td><td>Hot Shard 탐지, 트래픽 쏠림 분석, 메모리 부하 모니터링</td><td>Consistent Hashing + Replication, 멀티 레벨 캐싱, 지능형 라우팅</td></tr><tr><td>보안</td><td>민감 데이터 유출 위험</td><td>메모리 내 세션/토큰 등 저장으로 인한 보안 취약점, 규정 위반 가능성</td><td>감사 로그 분석, 접근 로그 이상 탐지, 보안 테스트 도구 활용</td><td>필드 레벨 암호화, 토큰화, 민감 정보 비캐싱 정책, Role-Based 접근 제어</td></tr><tr><td>운영/비용</td><td>관리 복잡도 및 인프라 비용 증가</td><td>캐시 용량 증가, 비효율적 TTL 설정, Cold Start 발생 시 자원 낭비</td><td>캐시 활용률, 용량, TTL 기반 메트릭 수집, 장애 발생 로그 분석</td><td>캐시 자동 튜닝, 비용 - 효율 시뮬레이션, 장애 복구 전략 (AOF/RDB), 오토스케일링, Helm 기반 배포 자동화</td></tr></tbody></table><ul><li><p><strong>일관성 문제</strong>는 분산 환경에서 캐시 무효화와 동기화가 지연될 경우, 데이터 불일치나 stale 응답이 발생한다. 이를 위해 이벤트 기반 무효화 (Pub/Sub), 벡터 클럭, CQRS 같은 분산 시스템 설계 기법이 필요하다.</p></li><li><p><strong>성능 저하</strong>는 다양한 액세스 패턴이나 예측 불가한 트래픽으로 인해 캐시 효율성이 급감하며, 이를 개선하기 위해 <strong>Local 우선 접근</strong>, <strong>ML 기반 예측 캐싱</strong>, <strong>QoS 기반 분산 처리</strong>가 요구된다.</p></li><li><p><strong>확장성 과제</strong>는 글로벌 환경이나 멀티테넌시 상황에서 노드 확장 시 캐시 재할당 이슈가 발생하며, <strong>Consistent Hashing + 복제</strong>, <strong>멀티 레벨 캐싱 구조</strong> 등의 대응이 필요하다.</p></li><li><p><strong>보안 이슈</strong>는 캐시에 저장된 민감 정보가 유출될 수 있는 구조적 위험이 존재하며, <strong>필드 수준 암호화</strong>, <strong>민감 정보 캐싱 방지</strong>, <strong>접근 제어 정책 강화</strong>로 리스크를 줄여야 한다.</p></li><li><p><strong>운영 및 비용 문제</strong>는 비효율적 TTL/용량 설정, 캐시 오염으로 인한 낭비가 발생하며, <strong>메트릭 기반 캐시 조정</strong>, <strong>장애 복구 전략</strong>, <strong>자동화된 캐시 오케스트레이션</strong> 등이 필요하다.</p></li></ul><h3 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h3><table><thead><tr><th>📂 카테고리</th><th>사용 맥락</th><th>주요 목적</th><th>사용 기술</th><th>기대 효과</th></tr></thead><tbody><tr><td><strong>웹 애플리케이션</strong></td><td>페이지 로딩, 정적 자원 캐싱</td><td>로딩 속도 향상, 트래픽 감소</td><td>CDN, Nginx, Varnish</td><td>응답 시간 단축, 서버 부하 감소</td></tr><tr><td></td><td>API 응답 캐싱</td><td>외부 API 비용 절감, 응답속도 개선</td><td>HTTP Cache, CDN, OkHttp, Retrofit</td><td>응답 속도 향상, API 비용 절감</td></tr><tr><td></td><td>세션 관리</td><td>로그인 상태 유지, 서버 간 세션 공유</td><td>Redis, Memcached, Hazelcast</td><td>세션 정합성 유지, 고가용성 확보</td></tr><tr><td></td><td>이미지/미디어 캐싱</td><td>리소스 로딩 최적화</td><td>Glide, Picasso, CDN</td><td>렌더링 속도 개선, 트래픽 감소</td></tr><tr><td><strong>데이터베이스</strong></td><td>반복 쿼리 결과 캐싱</td><td>쿼리 속도 향상, DB 부하 감소</td><td>Redis, Memcached, ORM 2 차 캐시</td><td>응답 시간 개선, DB 부하 60~90% 감소</td></tr><tr><td></td><td>커넥션 풀링</td><td>연결 비용 절감, 처리량 향상</td><td>HikariCP, DBCP</td><td>동시 처리 성능 향상, 리소스 절약</td></tr><tr><td><strong>분산 시스템 / MSA</strong></td><td>서비스 간 공유 데이터, 설정 정보, 중간 결과</td><td>통신 감소, 설정 속도 향상</td><td>Redis Cluster, Spring Config, Kafka</td><td>마이크로서비스 경량화, 설정 관리 최적화</td></tr><tr><td></td><td>서킷 브레이커 캐싱</td><td>장애 확산 방지, 재시도 최적화</td><td>Resilience4j, Hystrix</td><td>장애 대응 자동화, 연쇄 실패 방지</td></tr><tr><td><strong>API Gateway / Edge</strong></td><td>응답 캐싱, 인증 토큰 캐싱</td><td>요금 절감, 인증 부하 최소화</td><td>Kong, Redis, Gateway Policy Cache</td><td>API 응답 지연 최소화, 보안 인증 최적화</td></tr><tr><td><strong>데이터 분석 / ML</strong></td><td>중간 계산 결과 캐싱, 피처 캐싱</td><td>반복 연산 절감, 처리 시간 단축</td><td>Apache Spark, Alluxio, Redis</td><td>배치 성능 최적화, 리소스 절감</td></tr><tr><td><strong>모바일 / IoT</strong></td><td>오프라인 데이터, API 응답, 센서 스트림</td><td>오프라인 접근성, 배터리 최적화, 실시간 처리</td><td>SQLite, Room, Kafka, InfluxDB</td><td>네트워크 의존도 감소, UX 향상</td></tr><tr><td><strong>게임 서비스</strong></td><td>랭킹, 세션, 게임 상태</td><td>실시간 응답, 동시성 확보</td><td>Redis, ElastiCache</td><td>고동시 사용자 처리, 실시간 게임 경험 향상</td></tr><tr><td><strong>인프라 / 네트워크</strong></td><td>CDN, DNS, 로드밸런서 캐싱</td><td>글로벌 성능 향상, 연결 지연 최소화</td><td>AWS CloudFront, DNS TTL, ELB Cache</td><td>글로벌 서비스 응답성 개선, 서버 보호</td></tr></tbody></table><ul><li><p><strong>웹 애플리케이션</strong>: 정적 자원, API 응답, 세션 데이터에 대한 캐싱이 핵심이며, 사용자 체감 속도 향상과 트래픽 비용 절감에 기여한다.</p></li><li><p><strong>데이터베이스</strong>: 쿼리 결과 및 커넥션 풀링을 통해 데이터 접근 병목을 해소하며, DB 의 안정적 운영과 성능 최적화를 가능하게 한다.</p></li><li><p><strong>분산 시스템 / MSA</strong>: 서비스 간 통신 최소화와 설정 정보 캐싱으로 구성 요소 간 결합도를 낮추고 유연한 서비스 운영을 지원한다.</p></li><li><p><strong>API Gateway / Edge</strong>: 외부 API 요청이나 인증 데이터를 캐싱하여 비용을 절감하고, 응답 속도 및 보안 처리 성능을 개선한다.</p></li><li><p><strong>데이터 분석 / ML</strong>: 반복적인 연산 결과를 캐싱하여 리소스를 절감하고, 실시간 분석 요구에 부합하는 처리 성능을 확보한다.</p></li><li><p><strong>모바일 / IoT</strong>: 오프라인 환경 및 배터리 효율성에 유리한 로컬 캐싱을 활용하여 사용자 경험 (UX) 을 크게 향상시킨다.</p></li><li><p><strong>게임 서비스</strong>: 실시간 응답성과 동시 사용자 처리량 확보를 위한 캐싱 구조는 경쟁 환경에서 핵심 경쟁 요소로 작용한다.</p></li><li><p><strong>인프라 / 네트워크</strong>: CDN, DNS, 로드밸런서 캐싱은 글로벌 사용자 대상 시스템에서 지연을 줄이고 가용성과 확장성을 보장하는 수단이다.</p></li></ul><h3 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h3><h4 id=사례-1-뉴스-웹사이트>사례 1: 뉴스 웹사이트<a hidden class=anchor aria-hidden=true href=#사례-1-뉴스-웹사이트>#</a></h4><p><strong>시나리오</strong>: 전세계 고객이 이용하는 뉴스 웹사이트에서, 데이터베이스 (DB) 쿼리 및 썸네일 이미지를 Redis 캐시에 저장하여, 실시간 트래픽 급증에도 빠른 응답과 백엔드 부하 최소화 실현</p><p><strong>시스템 구성</strong>:</p><ul><li>클라이언트, CDN(콘텐츠 분산 네트워크) 엣지, 웹서버, Redis 캐시, 데이터베이스 (DB)</li></ul><pre class=mermaid>graph TD
    Client --&gt; CDN
    CDN --&gt; WebServer
    WebServer --&gt; RedisCache
    RedisCache -- Miss --&gt; Database
    Database -- Update --&gt; RedisCache
    RedisCache -- Cached Data --&gt; WebServer
    WebServer --&gt; CDN
</pre><p><strong>Workflow</strong>:</p><ul><li>클라이언트가 페이지 요청</li><li>CDN 에서 정적파일 캐싱, 미스시 웹서버로 게시글 요청</li><li>웹서버가 Redis 캐시 조회, 데이터 미스면 DB 액세스해 캐시에 저장</li><li>응답은 다시 CDN 에 전달, 전세계 사용자에게 레이턴시 감소</li></ul><p><strong>역할</strong>:</p><ul><li>CDN: 글로벌 엣지 캐싱, 정적 자원 분산</li><li>WebServer: 캐시 정책 주도 및 캐시 적용</li><li>Redis: 빠른 데이터 반환, 백엔드 부하 분산</li><li>DB: 데이터 원본 저장/관리</li></ul><p><strong>유무에 따른 차이점</strong>:</p><ul><li>캐시 도입 시: 트래픽 급증에도 응답속도·서버비용 유지, 장애 내결함성·확장성 확보</li><li>미도입 시: DB·웹서버 병목, 과금 폭증, 서비스 중단 ↑</li></ul><p><strong>구현 예시</strong></p><ul><li>파이썬 Redis 캐시 단순 예시</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>redis</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>cache</span> <span class=o>=</span> <span class=n>redis</span><span class=o>.</span><span class=n>Redis</span><span class=p>(</span><span class=n>host</span><span class=o>=</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>6379</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_article</span><span class=p>(</span><span class=n>article_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># 캐시 우선 조회</span>
</span></span><span class=line><span class=cl>    <span class=n>cached</span> <span class=o>=</span> <span class=n>cache</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;article:</span><span class=si>{</span><span class=n>article_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>cached</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>cached</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># 캐시 미스시 DB에서 가져와 캐시에 저장</span>
</span></span><span class=line><span class=cl>    <span class=n>article</span> <span class=o>=</span> <span class=n>query_article_from_db</span><span class=p>(</span><span class=n>article_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>cache</span><span class=o>.</span><span class=n>setex</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;article:</span><span class=si>{</span><span class=n>article_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=mi>3600</span><span class=p>,</span> <span class=n>article</span><span class=p>)</span>  <span class=c1># 1시간 만료</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>article</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>캐시 적중시 DB 미사용 / 미스시 DB 쿼리 후 1 시간 TTL 로 Redis 캐시화</li></ul><h4 id=사례-2-전자상거래-플랫폼의-상품-카탈로그-시스템>사례 2: 전자상거래 플랫폼의 상품 카탈로그 시스템<a hidden class=anchor aria-hidden=true href=#사례-2-전자상거래-플랫폼의-상품-카탈로그-시스템>#</a></h4><p><strong>시나리오</strong>: 대규모 전자상거래 플랫폼의 상품 카탈로그 시스템</p><p><strong>시스템 구성</strong>:</p><ul><li>Redis Cluster (분산 캐시)</li><li>MySQL (상품 데이터베이스)</li><li>Elasticsearch (검색 엔진)</li><li>CDN (상품 이미지)</li><li>Application Load Balancer</li></ul><pre class=mermaid>graph TD
    A[사용자] --&gt; B[Load Balancer]
    B --&gt; C[웹 서버 1]
    B --&gt; D[웹 서버 2]
    B --&gt; E[웹 서버 3]
    
    C --&gt; F[Redis Cluster]
    D --&gt; F
    E --&gt; F
    
    F --&gt; G[MySQL 마스터]
    G --&gt; H[MySQL 슬레이브]
    
    C --&gt; I[Elasticsearch]
    D --&gt; I
    E --&gt; I
    
    J[CDN] --&gt; A
    K[상품 이미지] --&gt; J
</pre><p><strong>Workflow</strong>:</p><ul><li>사용자가 상품 상세 페이지 요청</li><li>웹 서버가 Redis 에서 상품 정보 확인 (캐시 히트/미스)</li><li>캐시 미스 시 MySQL 에서 데이터 조회 후 Redis 에 저장</li><li>상품 이미지는 CDN 을 통해 전송</li><li>검색 요청은 Elasticsearch 캐시 활용</li></ul><p><strong>역할</strong>:</p><ul><li>Redis: 상품 정보, 가격, 재고 데이터 캐싱</li><li>CDN: 정적 리소스 (이미지, CSS, JS) 배포</li><li>Application Cache: 세션 관리, 장바구니 정보</li></ul><p><strong>유무에 따른 차이점</strong>:</p><ul><li><strong>캐시 적용 전</strong>: 평균 응답 시간 800ms, 데이터베이스 CPU 90%</li><li><strong>캐시 적용 후</strong>: 평균 응답 시간 120ms, 데이터베이스 CPU 20%</li><li><strong>비용 효과</strong>: 데이터베이스 서버 3 대 → 1 대로 축소 가능</li></ul><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>  1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2>  2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3>  3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4>  4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5>  5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6>  6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7>  7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8>  8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9>  9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10> 10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11> 11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12> 12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13> 13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14> 14</a>
</span><span class=lnt id=hl-7-15><a class=lnlinks href=#hl-7-15> 15</a>
</span><span class=lnt id=hl-7-16><a class=lnlinks href=#hl-7-16> 16</a>
</span><span class=lnt id=hl-7-17><a class=lnlinks href=#hl-7-17> 17</a>
</span><span class=lnt id=hl-7-18><a class=lnlinks href=#hl-7-18> 18</a>
</span><span class=lnt id=hl-7-19><a class=lnlinks href=#hl-7-19> 19</a>
</span><span class=lnt id=hl-7-20><a class=lnlinks href=#hl-7-20> 20</a>
</span><span class=lnt id=hl-7-21><a class=lnlinks href=#hl-7-21> 21</a>
</span><span class=lnt id=hl-7-22><a class=lnlinks href=#hl-7-22> 22</a>
</span><span class=lnt id=hl-7-23><a class=lnlinks href=#hl-7-23> 23</a>
</span><span class=lnt id=hl-7-24><a class=lnlinks href=#hl-7-24> 24</a>
</span><span class=lnt id=hl-7-25><a class=lnlinks href=#hl-7-25> 25</a>
</span><span class=lnt id=hl-7-26><a class=lnlinks href=#hl-7-26> 26</a>
</span><span class=lnt id=hl-7-27><a class=lnlinks href=#hl-7-27> 27</a>
</span><span class=lnt id=hl-7-28><a class=lnlinks href=#hl-7-28> 28</a>
</span><span class=lnt id=hl-7-29><a class=lnlinks href=#hl-7-29> 29</a>
</span><span class=lnt id=hl-7-30><a class=lnlinks href=#hl-7-30> 30</a>
</span><span class=lnt id=hl-7-31><a class=lnlinks href=#hl-7-31> 31</a>
</span><span class=lnt id=hl-7-32><a class=lnlinks href=#hl-7-32> 32</a>
</span><span class=lnt id=hl-7-33><a class=lnlinks href=#hl-7-33> 33</a>
</span><span class=lnt id=hl-7-34><a class=lnlinks href=#hl-7-34> 34</a>
</span><span class=lnt id=hl-7-35><a class=lnlinks href=#hl-7-35> 35</a>
</span><span class=lnt id=hl-7-36><a class=lnlinks href=#hl-7-36> 36</a>
</span><span class=lnt id=hl-7-37><a class=lnlinks href=#hl-7-37> 37</a>
</span><span class=lnt id=hl-7-38><a class=lnlinks href=#hl-7-38> 38</a>
</span><span class=lnt id=hl-7-39><a class=lnlinks href=#hl-7-39> 39</a>
</span><span class=lnt id=hl-7-40><a class=lnlinks href=#hl-7-40> 40</a>
</span><span class=lnt id=hl-7-41><a class=lnlinks href=#hl-7-41> 41</a>
</span><span class=lnt id=hl-7-42><a class=lnlinks href=#hl-7-42> 42</a>
</span><span class=lnt id=hl-7-43><a class=lnlinks href=#hl-7-43> 43</a>
</span><span class=lnt id=hl-7-44><a class=lnlinks href=#hl-7-44> 44</a>
</span><span class=lnt id=hl-7-45><a class=lnlinks href=#hl-7-45> 45</a>
</span><span class=lnt id=hl-7-46><a class=lnlinks href=#hl-7-46> 46</a>
</span><span class=lnt id=hl-7-47><a class=lnlinks href=#hl-7-47> 47</a>
</span><span class=lnt id=hl-7-48><a class=lnlinks href=#hl-7-48> 48</a>
</span><span class=lnt id=hl-7-49><a class=lnlinks href=#hl-7-49> 49</a>
</span><span class=lnt id=hl-7-50><a class=lnlinks href=#hl-7-50> 50</a>
</span><span class=lnt id=hl-7-51><a class=lnlinks href=#hl-7-51> 51</a>
</span><span class=lnt id=hl-7-52><a class=lnlinks href=#hl-7-52> 52</a>
</span><span class=lnt id=hl-7-53><a class=lnlinks href=#hl-7-53> 53</a>
</span><span class=lnt id=hl-7-54><a class=lnlinks href=#hl-7-54> 54</a>
</span><span class=lnt id=hl-7-55><a class=lnlinks href=#hl-7-55> 55</a>
</span><span class=lnt id=hl-7-56><a class=lnlinks href=#hl-7-56> 56</a>
</span><span class=lnt id=hl-7-57><a class=lnlinks href=#hl-7-57> 57</a>
</span><span class=lnt id=hl-7-58><a class=lnlinks href=#hl-7-58> 58</a>
</span><span class=lnt id=hl-7-59><a class=lnlinks href=#hl-7-59> 59</a>
</span><span class=lnt id=hl-7-60><a class=lnlinks href=#hl-7-60> 60</a>
</span><span class=lnt id=hl-7-61><a class=lnlinks href=#hl-7-61> 61</a>
</span><span class=lnt id=hl-7-62><a class=lnlinks href=#hl-7-62> 62</a>
</span><span class=lnt id=hl-7-63><a class=lnlinks href=#hl-7-63> 63</a>
</span><span class=lnt id=hl-7-64><a class=lnlinks href=#hl-7-64> 64</a>
</span><span class=lnt id=hl-7-65><a class=lnlinks href=#hl-7-65> 65</a>
</span><span class=lnt id=hl-7-66><a class=lnlinks href=#hl-7-66> 66</a>
</span><span class=lnt id=hl-7-67><a class=lnlinks href=#hl-7-67> 67</a>
</span><span class=lnt id=hl-7-68><a class=lnlinks href=#hl-7-68> 68</a>
</span><span class=lnt id=hl-7-69><a class=lnlinks href=#hl-7-69> 69</a>
</span><span class=lnt id=hl-7-70><a class=lnlinks href=#hl-7-70> 70</a>
</span><span class=lnt id=hl-7-71><a class=lnlinks href=#hl-7-71> 71</a>
</span><span class=lnt id=hl-7-72><a class=lnlinks href=#hl-7-72> 72</a>
</span><span class=lnt id=hl-7-73><a class=lnlinks href=#hl-7-73> 73</a>
</span><span class=lnt id=hl-7-74><a class=lnlinks href=#hl-7-74> 74</a>
</span><span class=lnt id=hl-7-75><a class=lnlinks href=#hl-7-75> 75</a>
</span><span class=lnt id=hl-7-76><a class=lnlinks href=#hl-7-76> 76</a>
</span><span class=lnt id=hl-7-77><a class=lnlinks href=#hl-7-77> 77</a>
</span><span class=lnt id=hl-7-78><a class=lnlinks href=#hl-7-78> 78</a>
</span><span class=lnt id=hl-7-79><a class=lnlinks href=#hl-7-79> 79</a>
</span><span class=lnt id=hl-7-80><a class=lnlinks href=#hl-7-80> 80</a>
</span><span class=lnt id=hl-7-81><a class=lnlinks href=#hl-7-81> 81</a>
</span><span class=lnt id=hl-7-82><a class=lnlinks href=#hl-7-82> 82</a>
</span><span class=lnt id=hl-7-83><a class=lnlinks href=#hl-7-83> 83</a>
</span><span class=lnt id=hl-7-84><a class=lnlinks href=#hl-7-84> 84</a>
</span><span class=lnt id=hl-7-85><a class=lnlinks href=#hl-7-85> 85</a>
</span><span class=lnt id=hl-7-86><a class=lnlinks href=#hl-7-86> 86</a>
</span><span class=lnt id=hl-7-87><a class=lnlinks href=#hl-7-87> 87</a>
</span><span class=lnt id=hl-7-88><a class=lnlinks href=#hl-7-88> 88</a>
</span><span class=lnt id=hl-7-89><a class=lnlinks href=#hl-7-89> 89</a>
</span><span class=lnt id=hl-7-90><a class=lnlinks href=#hl-7-90> 90</a>
</span><span class=lnt id=hl-7-91><a class=lnlinks href=#hl-7-91> 91</a>
</span><span class=lnt id=hl-7-92><a class=lnlinks href=#hl-7-92> 92</a>
</span><span class=lnt id=hl-7-93><a class=lnlinks href=#hl-7-93> 93</a>
</span><span class=lnt id=hl-7-94><a class=lnlinks href=#hl-7-94> 94</a>
</span><span class=lnt id=hl-7-95><a class=lnlinks href=#hl-7-95> 95</a>
</span><span class=lnt id=hl-7-96><a class=lnlinks href=#hl-7-96> 96</a>
</span><span class=lnt id=hl-7-97><a class=lnlinks href=#hl-7-97> 97</a>
</span><span class=lnt id=hl-7-98><a class=lnlinks href=#hl-7-98> 98</a>
</span><span class=lnt id=hl-7-99><a class=lnlinks href=#hl-7-99> 99</a>
</span><span class=lnt id=hl-7-100><a class=lnlinks href=#hl-7-100>100</a>
</span><span class=lnt id=hl-7-101><a class=lnlinks href=#hl-7-101>101</a>
</span><span class=lnt id=hl-7-102><a class=lnlinks href=#hl-7-102>102</a>
</span><span class=lnt id=hl-7-103><a class=lnlinks href=#hl-7-103>103</a>
</span><span class=lnt id=hl-7-104><a class=lnlinks href=#hl-7-104>104</a>
</span><span class=lnt id=hl-7-105><a class=lnlinks href=#hl-7-105>105</a>
</span><span class=lnt id=hl-7-106><a class=lnlinks href=#hl-7-106>106</a>
</span><span class=lnt id=hl-7-107><a class=lnlinks href=#hl-7-107>107</a>
</span><span class=lnt id=hl-7-108><a class=lnlinks href=#hl-7-108>108</a>
</span><span class=lnt id=hl-7-109><a class=lnlinks href=#hl-7-109>109</a>
</span><span class=lnt id=hl-7-110><a class=lnlinks href=#hl-7-110>110</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>redis</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Optional</span><span class=p>,</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>Any</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ProductCacheManager</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>redis_host</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>redis_port</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>6379</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Redis 기반 상품 캐시 매니저 초기화&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>redis_client</span> <span class=o>=</span> <span class=n>redis</span><span class=o>.</span><span class=n>Redis</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>host</span><span class=o>=</span><span class=n>redis_host</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=n>port</span><span class=o>=</span><span class=n>redis_port</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=n>decode_responses</span><span class=o>=</span><span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>default_ttl</span> <span class=o>=</span> <span class=mi>3600</span>  <span class=c1># 1시간 TTL</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_product</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;상품 정보 조회 (캐시 우선)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>cache_key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;product:</span><span class=si>{</span><span class=n>product_id</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 1. 캐시에서 조회 시도</span>
</span></span><span class=line><span class=cl>        <span class=n>cached_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>redis_client</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>cache_key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>cached_data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>cached_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 2. 캐시 미스 시 데이터베이스에서 조회</span>
</span></span><span class=line><span class=cl>        <span class=n>product_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fetch_from_database</span><span class=p>(</span><span class=n>product_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>product_data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 3. 조회된 데이터를 캐시에 저장</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>redis_client</span><span class=o>.</span><span class=n>setex</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>cache_key</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>default_ttl</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>product_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>product_data</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>update_product</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;상품 정보 업데이트 (Write-through 패턴)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 1. 데이터베이스 업데이트</span>
</span></span><span class=line><span class=cl>            <span class=n>success</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_update_database</span><span class=p>(</span><span class=n>product_id</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=ow>not</span> <span class=n>success</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 2. 캐시 업데이트</span>
</span></span><span class=line><span class=cl>            <span class=n>cache_key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;product:</span><span class=si>{</span><span class=n>product_id</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>redis_client</span><span class=o>.</span><span class=n>setex</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>cache_key</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>default_ttl</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 3. 관련 캐시 무효화</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_invalidate_related_cache</span><span class=p>(</span><span class=n>product_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Product update failed: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>invalidate_product_cache</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;특정 상품 캐시 무효화&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>cache_key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;product:</span><span class=si>{</span><span class=n>product_id</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>redis_client</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>cache_key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 카테고리별 캐시도 무효화</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_invalidate_related_cache</span><span class=p>(</span><span class=n>product_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_cache_stats</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시 성능 통계 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>redis_client</span><span class=o>.</span><span class=n>info</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;hit_rate&#39;</span><span class=p>:</span> <span class=n>info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;keyspace_hits&#39;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span> <span class=o>/</span> 
</span></span><span class=line><span class=cl>                       <span class=p>(</span><span class=n>info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;keyspace_hits&#39;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span> <span class=o>+</span> <span class=n>info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;keyspace_misses&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>)),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;memory_usage&#39;</span><span class=p>:</span> <span class=n>info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;used_memory_human&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;total_keys&#39;</span><span class=p>:</span> <span class=n>info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;db0&#39;</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;keys&#39;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_fetch_from_database</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;데이터베이스에서 상품 정보 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제 구현에서는 ORM이나 데이터베이스 클라이언트 사용</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_update_database</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;데이터베이스 상품 정보 업데이트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제 구현에서는 ORM이나 데이터베이스 클라이언트 사용</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_invalidate_related_cache</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;관련된 캐시 항목들 무효화&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 카테고리 캐시, 검색 결과 캐시 등 무효화</span>
</span></span><span class=line><span class=cl>        <span class=n>pattern</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;category:*:</span><span class=si>{</span><span class=n>product_id</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>redis_client</span><span class=o>.</span><span class=n>scan_iter</span><span class=p>(</span><span class=k>match</span><span class=o>=</span><span class=n>pattern</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>redis_client</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>cache_manager</span> <span class=o>=</span> <span class=n>ProductCacheManager</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 상품 조회</span>
</span></span><span class=line><span class=cl><span class=n>product</span> <span class=o>=</span> <span class=n>cache_manager</span><span class=o>.</span><span class=n>get_product</span><span class=p>(</span><span class=s2>&#34;12345&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 상품 업데이트</span>
</span></span><span class=line><span class=cl><span class=n>cache_manager</span><span class=o>.</span><span class=n>update_product</span><span class=p>(</span><span class=s2>&#34;12345&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;새로운 상품명&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;price&#34;</span><span class=p>:</span> <span class=mi>29900</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;stock&#34;</span><span class=p>:</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 캐시 성능 확인</span>
</span></span><span class=line><span class=cl><span class=n>stats</span> <span class=o>=</span> <span class=n>cache_manager</span><span class=o>.</span><span class=n>get_cache_stats</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;캐시 히트율: </span><span class=si>{</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;hit_rate&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>%</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=사례-3-쿠팡-상품-캐시-시스템>사례 3: 쿠팡 상품 캐시 시스템<a hidden class=anchor aria-hidden=true href=#사례-3-쿠팡-상품-캐시-시스템>#</a></h4><p><strong>시스템 구성</strong>:</p><pre class=mermaid>graph TD
  A[User Request] --&gt; B[Nginx]
  B --&gt; C[Kong API Gateway]
  C --&gt; D[Redis Cache]
  D --&gt;|Hit| E[Response]
  D --&gt;|Miss| F[Product Service]
  F --&gt; G[MySQL + Elasticsearch]
  G --&gt; F --&gt; D --&gt; E
</pre><p><strong>Workflow</strong>:</p><ol><li>사용자가 상품 상세 요청</li><li>Redis 에서 해당 상품 ID 로 캐시 조회</li><li>Hit 시 즉시 응답</li><li>Miss 시 DB 조회 후 Redis 에 저장</li></ol><p><strong>효과</strong>:</p><ul><li><strong>30% 이상의 DB 트래픽 감소</strong></li><li><strong>평균 응답 시간 60% 단축</strong></li><li><strong>상품 변경 이벤트에 따라 Redis TTL 초기화 (Invalidation Hook)</strong></li></ul><p><strong>구현 예시</strong>:</p><ul><li>Python, Cache-aside 방식</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a>
</span><span class=lnt id=hl-9-11><a class=lnlinks href=#hl-9-11>11</a>
</span><span class=lnt id=hl-9-12><a class=lnlinks href=#hl-9-12>12</a>
</span><span class=lnt id=hl-9-13><a class=lnlinks href=#hl-9-13>13</a>
</span><span class=lnt id=hl-9-14><a class=lnlinks href=#hl-9-14>14</a>
</span><span class=lnt id=hl-9-15><a class=lnlinks href=#hl-9-15>15</a>
</span><span class=lnt id=hl-9-16><a class=lnlinks href=#hl-9-16>16</a>
</span><span class=lnt id=hl-9-17><a class=lnlinks href=#hl-9-17>17</a>
</span><span class=lnt id=hl-9-18><a class=lnlinks href=#hl-9-18>18</a>
</span><span class=lnt id=hl-9-19><a class=lnlinks href=#hl-9-19>19</a>
</span><span class=lnt id=hl-9-20><a class=lnlinks href=#hl-9-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>redis</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>db</span> <span class=kn>import</span> <span class=n>get_product_by_id</span>  <span class=c1># 가상의 DB 조회 함수</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Redis 클라이언트 설정</span>
</span></span><span class=line><span class=cl><span class=n>cache</span> <span class=o>=</span> <span class=n>redis</span><span class=o>.</span><span class=n>StrictRedis</span><span class=p>(</span><span class=n>host</span><span class=o>=</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>6379</span><span class=p>,</span> <span class=n>db</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_product</span><span class=p>(</span><span class=n>product_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;product:</span><span class=si>{</span><span class=n>product_id</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span> <span class=o>=</span> <span class=n>cache</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>  <span class=c1># 캐시 Hit</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># 캐시 Miss → DB 조회</span>
</span></span><span class=line><span class=cl>    <span class=n>product</span> <span class=o>=</span> <span class=n>get_product_by_id</span><span class=p>(</span><span class=n>product_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>product</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>cache</span><span class=o>.</span><span class=n>setex</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=mi>3600</span><span class=p>,</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>product</span><span class=p>))</span>  <span class=c1># 1시간 TTL 설정</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>product</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>주요 기능:</strong><ul><li><code>캐시 키 기반 조회</code>, <code>TTL 설정</code>, <code>캐시-aside 패턴</code></li></ul></li></ul><h4 id=사례-4-분산-캐시를-활용한-db-트래픽-완화>사례 4: 분산 캐시를 활용한 DB 트래픽 완화<a hidden class=anchor aria-hidden=true href=#사례-4-분산-캐시를-활용한-db-트래픽-완화>#</a></h4><p><strong>시스템 구성</strong>: Client → Application → Redis(Cache) → DB</p><p><strong>Workflow</strong>:<br>1. 클라이언트가 데이터 요청<br>2. Application 이 Redis 에 key 로 데이터 조회<br>3. 있으면 (Hit) 즉시 반환, 없으면 (Miss) DB 에서 조회 후 Redis 에 저장, 클라이언트에 전달</p><pre class=mermaid>sequenceDiagram
    participant Client
    participant App
    participant Redis
    participant DB
    Client-&gt;&gt;App: 데이터 요청
    App-&gt;&gt;Redis: Key로 조회
    alt Hit
        Redis--&gt;&gt;App: 데이터
        App--&gt;&gt;Client: 데이터
    else Miss
        Redis--&gt;&gt;App: 없음
        App-&gt;&gt;DB: DB 조회
        DB--&gt;&gt;App: 결과 반환
        App-&gt;&gt;Redis: Results 저장
        App--&gt;&gt;Client: 데이터
    end
</pre><p><strong>유무 차이</strong>:</p><ul><li><strong>Utilized</strong>: 서버 부하와 지연 대폭 감소, 대부분 빠른 응답 제공</li><li><strong>미적용</strong>: 동일 DB 쿼리 반복, 병목, 성능 불안정</li></ul><p><strong>구현 예시</strong>:</p><ul><li>Python + Redis 캐싱</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15>15</a>
</span><span class=lnt id=hl-11-16><a class=lnlinks href=#hl-11-16>16</a>
</span><span class=lnt id=hl-11-17><a class=lnlinks href=#hl-11-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 주요 역할: 캐시 조회 후 반환, 없으면 원본 조회 및 캐시에 저장</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>redis</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>cache</span> <span class=o>=</span> <span class=n>redis</span><span class=o>.</span><span class=n>Redis</span><span class=p>(</span><span class=n>host</span><span class=o>=</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>6379</span><span class=p>,</span> <span class=n>db</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_data</span><span class=p>(</span><span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span> <span class=o>=</span> <span class=n>cache</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>value</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>value</span> <span class=c1># 캐시 적중 (Hit)</span>
</span></span><span class=line><span class=cl>    <span class=c1># DB 쿼리(가정)</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span> <span class=o>=</span> <span class=n>query_database</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>cache</span><span class=o>.</span><span class=n>setex</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=mi>300</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>  <span class=c1># 5분 TTL로 저장</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>query_database</span><span class=p>(</span><span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># 실제 DB 접근 시나리오 대체</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;DB result for </span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=사례-5-전자상거래-플랫폼의-상품-정보-캐싱-시스템>사례 5: 전자상거래 플랫폼의 상품 정보 캐싱 시스템<a hidden class=anchor aria-hidden=true href=#사례-5-전자상거래-플랫폼의-상품-정보-캐싱-시스템>#</a></h4><p><strong>시나리오</strong>: 대규모 전자상거래 플랫폼에서 상품 정보 조회 성능을 향상시키기 위해 다층 캐싱 시스템을 구축한 사례.</p><p><strong>시스템 구성</strong>:</p><ul><li><strong>프론트엔드</strong>: React SPA + 브라우저 캐시</li><li><strong>CDN</strong>: CloudFlare (정적 자산 캐싱)</li><li><strong>API 게이트웨이</strong>: NGINX + 응답 캐싱</li><li><strong>애플리케이션 서버</strong>: Node.js + Redis 클러스터</li><li><strong>데이터베이스</strong>: MySQL 마스터 - 슬레이브 + 쿼리 캐시</li></ul><pre class=mermaid>graph TB
    subgraph &#34;Client Layer&#34;
        BROWSER[Browser Cache]
        MOBILE[Mobile App Cache]
    end
    
    subgraph &#34;CDN Layer&#34;
        CDN[CloudFlare CDN]
    end
    
    subgraph &#34;Application Layer&#34;
        LB[Load Balancer]
        APP1[App Server 1]
        APP2[App Server 2]
        APP3[App Server 3]
    end
    
    subgraph &#34;Cache Layer&#34;
        REDIS1[Redis Node 1]
        REDIS2[Redis Node 2]
        REDIS3[Redis Node 3]
    end
    
    subgraph &#34;Database Layer&#34;
        MASTER[(MySQL Master)]
        SLAVE1[(MySQL Slave 1)]
        SLAVE2[(MySQL Slave 2)]
    end
    
    BROWSER --&gt; CDN
    MOBILE --&gt; CDN
    CDN --&gt; LB
    LB --&gt; APP1
    LB --&gt; APP2
    LB --&gt; APP3
    APP1 --&gt; REDIS1
    APP2 --&gt; REDIS2
    APP3 --&gt; REDIS3
    APP1 --&gt; SLAVE1
    APP2 --&gt; SLAVE2
    APP3 --&gt; MASTER
</pre><p><strong>Workflow</strong>:</p><pre class=mermaid>sequenceDiagram
    participant U as User
    participant CDN as CDN
    participant APP as App Server
    participant R as Redis
    participant DB as Database
    
    U-&gt;&gt;CDN: Request Product Page
    CDN-&gt;&gt;CDN: Check Static Assets
    alt Static Assets Hit
        CDN-&gt;&gt;U: Return Cached Assets
    else Assets Miss
        CDN-&gt;&gt;APP: Request Assets
        APP-&gt;&gt;CDN: Return Assets
        CDN-&gt;&gt;U: Return Assets + Cache
    end
    
    U-&gt;&gt;APP: Request Product Data
    APP-&gt;&gt;R: Check Product Cache
    alt Cache Hit
        R-&gt;&gt;APP: Return Cached Data
        APP-&gt;&gt;U: Return Product Data
    else Cache Miss
        APP-&gt;&gt;DB: Query Product Data
        DB-&gt;&gt;APP: Return Data
        APP-&gt;&gt;R: Store in Cache (TTL: 1h)
        APP-&gt;&gt;U: Return Product Data
    end
</pre><p><strong>역할 및 효과</strong>:</p><ul><li><strong>브라우저 캐시</strong>: 이미지, CSS, JS 파일 로컬 저장으로 페이지 로딩 속도 70% 개선</li><li><strong>CDN</strong>: 전 세계 사용자에게 200ms 이내 응답 시간 보장</li><li><strong>Redis 캐시</strong>: 상품 정보 조회 시 평균 응답 시간 2ms 달성</li><li><strong>데이터베이스 캐시</strong>: 쿼리 결과 캐싱으로 DB 부하 80% 감소</li></ul><p><strong>비교 분석</strong>:<br>캐싱 적용 전후 비교 시 평균 응답 시간이 500ms 에서 50ms 로 90% 개선되었으며, 데이터베이스 QPS 는 10,000 에서 2,000 으로 감소하여 인프라 비용을 40% 절감.</p><p><strong>구현 예시</strong>:</p><ul><li>전자상거래 상품 캐싱 시스템의 JavaScript 구현 예시:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1>  1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2>  2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3>  3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4>  4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5>  5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6>  6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7>  7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8>  8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9>  9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10> 10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11> 11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12> 12</a>
</span><span class=lnt id=hl-14-13><a class=lnlinks href=#hl-14-13> 13</a>
</span><span class=lnt id=hl-14-14><a class=lnlinks href=#hl-14-14> 14</a>
</span><span class=lnt id=hl-14-15><a class=lnlinks href=#hl-14-15> 15</a>
</span><span class=lnt id=hl-14-16><a class=lnlinks href=#hl-14-16> 16</a>
</span><span class=lnt id=hl-14-17><a class=lnlinks href=#hl-14-17> 17</a>
</span><span class=lnt id=hl-14-18><a class=lnlinks href=#hl-14-18> 18</a>
</span><span class=lnt id=hl-14-19><a class=lnlinks href=#hl-14-19> 19</a>
</span><span class=lnt id=hl-14-20><a class=lnlinks href=#hl-14-20> 20</a>
</span><span class=lnt id=hl-14-21><a class=lnlinks href=#hl-14-21> 21</a>
</span><span class=lnt id=hl-14-22><a class=lnlinks href=#hl-14-22> 22</a>
</span><span class=lnt id=hl-14-23><a class=lnlinks href=#hl-14-23> 23</a>
</span><span class=lnt id=hl-14-24><a class=lnlinks href=#hl-14-24> 24</a>
</span><span class=lnt id=hl-14-25><a class=lnlinks href=#hl-14-25> 25</a>
</span><span class=lnt id=hl-14-26><a class=lnlinks href=#hl-14-26> 26</a>
</span><span class=lnt id=hl-14-27><a class=lnlinks href=#hl-14-27> 27</a>
</span><span class=lnt id=hl-14-28><a class=lnlinks href=#hl-14-28> 28</a>
</span><span class=lnt id=hl-14-29><a class=lnlinks href=#hl-14-29> 29</a>
</span><span class=lnt id=hl-14-30><a class=lnlinks href=#hl-14-30> 30</a>
</span><span class=lnt id=hl-14-31><a class=lnlinks href=#hl-14-31> 31</a>
</span><span class=lnt id=hl-14-32><a class=lnlinks href=#hl-14-32> 32</a>
</span><span class=lnt id=hl-14-33><a class=lnlinks href=#hl-14-33> 33</a>
</span><span class=lnt id=hl-14-34><a class=lnlinks href=#hl-14-34> 34</a>
</span><span class=lnt id=hl-14-35><a class=lnlinks href=#hl-14-35> 35</a>
</span><span class=lnt id=hl-14-36><a class=lnlinks href=#hl-14-36> 36</a>
</span><span class=lnt id=hl-14-37><a class=lnlinks href=#hl-14-37> 37</a>
</span><span class=lnt id=hl-14-38><a class=lnlinks href=#hl-14-38> 38</a>
</span><span class=lnt id=hl-14-39><a class=lnlinks href=#hl-14-39> 39</a>
</span><span class=lnt id=hl-14-40><a class=lnlinks href=#hl-14-40> 40</a>
</span><span class=lnt id=hl-14-41><a class=lnlinks href=#hl-14-41> 41</a>
</span><span class=lnt id=hl-14-42><a class=lnlinks href=#hl-14-42> 42</a>
</span><span class=lnt id=hl-14-43><a class=lnlinks href=#hl-14-43> 43</a>
</span><span class=lnt id=hl-14-44><a class=lnlinks href=#hl-14-44> 44</a>
</span><span class=lnt id=hl-14-45><a class=lnlinks href=#hl-14-45> 45</a>
</span><span class=lnt id=hl-14-46><a class=lnlinks href=#hl-14-46> 46</a>
</span><span class=lnt id=hl-14-47><a class=lnlinks href=#hl-14-47> 47</a>
</span><span class=lnt id=hl-14-48><a class=lnlinks href=#hl-14-48> 48</a>
</span><span class=lnt id=hl-14-49><a class=lnlinks href=#hl-14-49> 49</a>
</span><span class=lnt id=hl-14-50><a class=lnlinks href=#hl-14-50> 50</a>
</span><span class=lnt id=hl-14-51><a class=lnlinks href=#hl-14-51> 51</a>
</span><span class=lnt id=hl-14-52><a class=lnlinks href=#hl-14-52> 52</a>
</span><span class=lnt id=hl-14-53><a class=lnlinks href=#hl-14-53> 53</a>
</span><span class=lnt id=hl-14-54><a class=lnlinks href=#hl-14-54> 54</a>
</span><span class=lnt id=hl-14-55><a class=lnlinks href=#hl-14-55> 55</a>
</span><span class=lnt id=hl-14-56><a class=lnlinks href=#hl-14-56> 56</a>
</span><span class=lnt id=hl-14-57><a class=lnlinks href=#hl-14-57> 57</a>
</span><span class=lnt id=hl-14-58><a class=lnlinks href=#hl-14-58> 58</a>
</span><span class=lnt id=hl-14-59><a class=lnlinks href=#hl-14-59> 59</a>
</span><span class=lnt id=hl-14-60><a class=lnlinks href=#hl-14-60> 60</a>
</span><span class=lnt id=hl-14-61><a class=lnlinks href=#hl-14-61> 61</a>
</span><span class=lnt id=hl-14-62><a class=lnlinks href=#hl-14-62> 62</a>
</span><span class=lnt id=hl-14-63><a class=lnlinks href=#hl-14-63> 63</a>
</span><span class=lnt id=hl-14-64><a class=lnlinks href=#hl-14-64> 64</a>
</span><span class=lnt id=hl-14-65><a class=lnlinks href=#hl-14-65> 65</a>
</span><span class=lnt id=hl-14-66><a class=lnlinks href=#hl-14-66> 66</a>
</span><span class=lnt id=hl-14-67><a class=lnlinks href=#hl-14-67> 67</a>
</span><span class=lnt id=hl-14-68><a class=lnlinks href=#hl-14-68> 68</a>
</span><span class=lnt id=hl-14-69><a class=lnlinks href=#hl-14-69> 69</a>
</span><span class=lnt id=hl-14-70><a class=lnlinks href=#hl-14-70> 70</a>
</span><span class=lnt id=hl-14-71><a class=lnlinks href=#hl-14-71> 71</a>
</span><span class=lnt id=hl-14-72><a class=lnlinks href=#hl-14-72> 72</a>
</span><span class=lnt id=hl-14-73><a class=lnlinks href=#hl-14-73> 73</a>
</span><span class=lnt id=hl-14-74><a class=lnlinks href=#hl-14-74> 74</a>
</span><span class=lnt id=hl-14-75><a class=lnlinks href=#hl-14-75> 75</a>
</span><span class=lnt id=hl-14-76><a class=lnlinks href=#hl-14-76> 76</a>
</span><span class=lnt id=hl-14-77><a class=lnlinks href=#hl-14-77> 77</a>
</span><span class=lnt id=hl-14-78><a class=lnlinks href=#hl-14-78> 78</a>
</span><span class=lnt id=hl-14-79><a class=lnlinks href=#hl-14-79> 79</a>
</span><span class=lnt id=hl-14-80><a class=lnlinks href=#hl-14-80> 80</a>
</span><span class=lnt id=hl-14-81><a class=lnlinks href=#hl-14-81> 81</a>
</span><span class=lnt id=hl-14-82><a class=lnlinks href=#hl-14-82> 82</a>
</span><span class=lnt id=hl-14-83><a class=lnlinks href=#hl-14-83> 83</a>
</span><span class=lnt id=hl-14-84><a class=lnlinks href=#hl-14-84> 84</a>
</span><span class=lnt id=hl-14-85><a class=lnlinks href=#hl-14-85> 85</a>
</span><span class=lnt id=hl-14-86><a class=lnlinks href=#hl-14-86> 86</a>
</span><span class=lnt id=hl-14-87><a class=lnlinks href=#hl-14-87> 87</a>
</span><span class=lnt id=hl-14-88><a class=lnlinks href=#hl-14-88> 88</a>
</span><span class=lnt id=hl-14-89><a class=lnlinks href=#hl-14-89> 89</a>
</span><span class=lnt id=hl-14-90><a class=lnlinks href=#hl-14-90> 90</a>
</span><span class=lnt id=hl-14-91><a class=lnlinks href=#hl-14-91> 91</a>
</span><span class=lnt id=hl-14-92><a class=lnlinks href=#hl-14-92> 92</a>
</span><span class=lnt id=hl-14-93><a class=lnlinks href=#hl-14-93> 93</a>
</span><span class=lnt id=hl-14-94><a class=lnlinks href=#hl-14-94> 94</a>
</span><span class=lnt id=hl-14-95><a class=lnlinks href=#hl-14-95> 95</a>
</span><span class=lnt id=hl-14-96><a class=lnlinks href=#hl-14-96> 96</a>
</span><span class=lnt id=hl-14-97><a class=lnlinks href=#hl-14-97> 97</a>
</span><span class=lnt id=hl-14-98><a class=lnlinks href=#hl-14-98> 98</a>
</span><span class=lnt id=hl-14-99><a class=lnlinks href=#hl-14-99> 99</a>
</span><span class=lnt id=hl-14-100><a class=lnlinks href=#hl-14-100>100</a>
</span><span class=lnt id=hl-14-101><a class=lnlinks href=#hl-14-101>101</a>
</span><span class=lnt id=hl-14-102><a class=lnlinks href=#hl-14-102>102</a>
</span><span class=lnt id=hl-14-103><a class=lnlinks href=#hl-14-103>103</a>
</span><span class=lnt id=hl-14-104><a class=lnlinks href=#hl-14-104>104</a>
</span><span class=lnt id=hl-14-105><a class=lnlinks href=#hl-14-105>105</a>
</span><span class=lnt id=hl-14-106><a class=lnlinks href=#hl-14-106>106</a>
</span><span class=lnt id=hl-14-107><a class=lnlinks href=#hl-14-107>107</a>
</span><span class=lnt id=hl-14-108><a class=lnlinks href=#hl-14-108>108</a>
</span><span class=lnt id=hl-14-109><a class=lnlinks href=#hl-14-109>109</a>
</span><span class=lnt id=hl-14-110><a class=lnlinks href=#hl-14-110>110</a>
</span><span class=lnt id=hl-14-111><a class=lnlinks href=#hl-14-111>111</a>
</span><span class=lnt id=hl-14-112><a class=lnlinks href=#hl-14-112>112</a>
</span><span class=lnt id=hl-14-113><a class=lnlinks href=#hl-14-113>113</a>
</span><span class=lnt id=hl-14-114><a class=lnlinks href=#hl-14-114>114</a>
</span><span class=lnt id=hl-14-115><a class=lnlinks href=#hl-14-115>115</a>
</span><span class=lnt id=hl-14-116><a class=lnlinks href=#hl-14-116>116</a>
</span><span class=lnt id=hl-14-117><a class=lnlinks href=#hl-14-117>117</a>
</span><span class=lnt id=hl-14-118><a class=lnlinks href=#hl-14-118>118</a>
</span><span class=lnt id=hl-14-119><a class=lnlinks href=#hl-14-119>119</a>
</span><span class=lnt id=hl-14-120><a class=lnlinks href=#hl-14-120>120</a>
</span><span class=lnt id=hl-14-121><a class=lnlinks href=#hl-14-121>121</a>
</span><span class=lnt id=hl-14-122><a class=lnlinks href=#hl-14-122>122</a>
</span><span class=lnt id=hl-14-123><a class=lnlinks href=#hl-14-123>123</a>
</span><span class=lnt id=hl-14-124><a class=lnlinks href=#hl-14-124>124</a>
</span><span class=lnt id=hl-14-125><a class=lnlinks href=#hl-14-125>125</a>
</span><span class=lnt id=hl-14-126><a class=lnlinks href=#hl-14-126>126</a>
</span><span class=lnt id=hl-14-127><a class=lnlinks href=#hl-14-127>127</a>
</span><span class=lnt id=hl-14-128><a class=lnlinks href=#hl-14-128>128</a>
</span><span class=lnt id=hl-14-129><a class=lnlinks href=#hl-14-129>129</a>
</span><span class=lnt id=hl-14-130><a class=lnlinks href=#hl-14-130>130</a>
</span><span class=lnt id=hl-14-131><a class=lnlinks href=#hl-14-131>131</a>
</span><span class=lnt id=hl-14-132><a class=lnlinks href=#hl-14-132>132</a>
</span><span class=lnt id=hl-14-133><a class=lnlinks href=#hl-14-133>133</a>
</span><span class=lnt id=hl-14-134><a class=lnlinks href=#hl-14-134>134</a>
</span><span class=lnt id=hl-14-135><a class=lnlinks href=#hl-14-135>135</a>
</span><span class=lnt id=hl-14-136><a class=lnlinks href=#hl-14-136>136</a>
</span><span class=lnt id=hl-14-137><a class=lnlinks href=#hl-14-137>137</a>
</span><span class=lnt id=hl-14-138><a class=lnlinks href=#hl-14-138>138</a>
</span><span class=lnt id=hl-14-139><a class=lnlinks href=#hl-14-139>139</a>
</span><span class=lnt id=hl-14-140><a class=lnlinks href=#hl-14-140>140</a>
</span><span class=lnt id=hl-14-141><a class=lnlinks href=#hl-14-141>141</a>
</span><span class=lnt id=hl-14-142><a class=lnlinks href=#hl-14-142>142</a>
</span><span class=lnt id=hl-14-143><a class=lnlinks href=#hl-14-143>143</a>
</span><span class=lnt id=hl-14-144><a class=lnlinks href=#hl-14-144>144</a>
</span><span class=lnt id=hl-14-145><a class=lnlinks href=#hl-14-145>145</a>
</span><span class=lnt id=hl-14-146><a class=lnlinks href=#hl-14-146>146</a>
</span><span class=lnt id=hl-14-147><a class=lnlinks href=#hl-14-147>147</a>
</span><span class=lnt id=hl-14-148><a class=lnlinks href=#hl-14-148>148</a>
</span><span class=lnt id=hl-14-149><a class=lnlinks href=#hl-14-149>149</a>
</span><span class=lnt id=hl-14-150><a class=lnlinks href=#hl-14-150>150</a>
</span><span class=lnt id=hl-14-151><a class=lnlinks href=#hl-14-151>151</a>
</span><span class=lnt id=hl-14-152><a class=lnlinks href=#hl-14-152>152</a>
</span><span class=lnt id=hl-14-153><a class=lnlinks href=#hl-14-153>153</a>
</span><span class=lnt id=hl-14-154><a class=lnlinks href=#hl-14-154>154</a>
</span><span class=lnt id=hl-14-155><a class=lnlinks href=#hl-14-155>155</a>
</span><span class=lnt id=hl-14-156><a class=lnlinks href=#hl-14-156>156</a>
</span><span class=lnt id=hl-14-157><a class=lnlinks href=#hl-14-157>157</a>
</span><span class=lnt id=hl-14-158><a class=lnlinks href=#hl-14-158>158</a>
</span><span class=lnt id=hl-14-159><a class=lnlinks href=#hl-14-159>159</a>
</span><span class=lnt id=hl-14-160><a class=lnlinks href=#hl-14-160>160</a>
</span><span class=lnt id=hl-14-161><a class=lnlinks href=#hl-14-161>161</a>
</span><span class=lnt id=hl-14-162><a class=lnlinks href=#hl-14-162>162</a>
</span><span class=lnt id=hl-14-163><a class=lnlinks href=#hl-14-163>163</a>
</span><span class=lnt id=hl-14-164><a class=lnlinks href=#hl-14-164>164</a>
</span><span class=lnt id=hl-14-165><a class=lnlinks href=#hl-14-165>165</a>
</span><span class=lnt id=hl-14-166><a class=lnlinks href=#hl-14-166>166</a>
</span><span class=lnt id=hl-14-167><a class=lnlinks href=#hl-14-167>167</a>
</span><span class=lnt id=hl-14-168><a class=lnlinks href=#hl-14-168>168</a>
</span><span class=lnt id=hl-14-169><a class=lnlinks href=#hl-14-169>169</a>
</span><span class=lnt id=hl-14-170><a class=lnlinks href=#hl-14-170>170</a>
</span><span class=lnt id=hl-14-171><a class=lnlinks href=#hl-14-171>171</a>
</span><span class=lnt id=hl-14-172><a class=lnlinks href=#hl-14-172>172</a>
</span><span class=lnt id=hl-14-173><a class=lnlinks href=#hl-14-173>173</a>
</span><span class=lnt id=hl-14-174><a class=lnlinks href=#hl-14-174>174</a>
</span><span class=lnt id=hl-14-175><a class=lnlinks href=#hl-14-175>175</a>
</span><span class=lnt id=hl-14-176><a class=lnlinks href=#hl-14-176>176</a>
</span><span class=lnt id=hl-14-177><a class=lnlinks href=#hl-14-177>177</a>
</span><span class=lnt id=hl-14-178><a class=lnlinks href=#hl-14-178>178</a>
</span><span class=lnt id=hl-14-179><a class=lnlinks href=#hl-14-179>179</a>
</span><span class=lnt id=hl-14-180><a class=lnlinks href=#hl-14-180>180</a>
</span><span class=lnt id=hl-14-181><a class=lnlinks href=#hl-14-181>181</a>
</span><span class=lnt id=hl-14-182><a class=lnlinks href=#hl-14-182>182</a>
</span><span class=lnt id=hl-14-183><a class=lnlinks href=#hl-14-183>183</a>
</span><span class=lnt id=hl-14-184><a class=lnlinks href=#hl-14-184>184</a>
</span><span class=lnt id=hl-14-185><a class=lnlinks href=#hl-14-185>185</a>
</span><span class=lnt id=hl-14-186><a class=lnlinks href=#hl-14-186>186</a>
</span><span class=lnt id=hl-14-187><a class=lnlinks href=#hl-14-187>187</a>
</span><span class=lnt id=hl-14-188><a class=lnlinks href=#hl-14-188>188</a>
</span><span class=lnt id=hl-14-189><a class=lnlinks href=#hl-14-189>189</a>
</span><span class=lnt id=hl-14-190><a class=lnlinks href=#hl-14-190>190</a>
</span><span class=lnt id=hl-14-191><a class=lnlinks href=#hl-14-191>191</a>
</span><span class=lnt id=hl-14-192><a class=lnlinks href=#hl-14-192>192</a>
</span><span class=lnt id=hl-14-193><a class=lnlinks href=#hl-14-193>193</a>
</span><span class=lnt id=hl-14-194><a class=lnlinks href=#hl-14-194>194</a>
</span><span class=lnt id=hl-14-195><a class=lnlinks href=#hl-14-195>195</a>
</span><span class=lnt id=hl-14-196><a class=lnlinks href=#hl-14-196>196</a>
</span><span class=lnt id=hl-14-197><a class=lnlinks href=#hl-14-197>197</a>
</span><span class=lnt id=hl-14-198><a class=lnlinks href=#hl-14-198>198</a>
</span><span class=lnt id=hl-14-199><a class=lnlinks href=#hl-14-199>199</a>
</span><span class=lnt id=hl-14-200><a class=lnlinks href=#hl-14-200>200</a>
</span><span class=lnt id=hl-14-201><a class=lnlinks href=#hl-14-201>201</a>
</span><span class=lnt id=hl-14-202><a class=lnlinks href=#hl-14-202>202</a>
</span><span class=lnt id=hl-14-203><a class=lnlinks href=#hl-14-203>203</a>
</span><span class=lnt id=hl-14-204><a class=lnlinks href=#hl-14-204>204</a>
</span><span class=lnt id=hl-14-205><a class=lnlinks href=#hl-14-205>205</a>
</span><span class=lnt id=hl-14-206><a class=lnlinks href=#hl-14-206>206</a>
</span><span class=lnt id=hl-14-207><a class=lnlinks href=#hl-14-207>207</a>
</span><span class=lnt id=hl-14-208><a class=lnlinks href=#hl-14-208>208</a>
</span><span class=lnt id=hl-14-209><a class=lnlinks href=#hl-14-209>209</a>
</span><span class=lnt id=hl-14-210><a class=lnlinks href=#hl-14-210>210</a>
</span><span class=lnt id=hl-14-211><a class=lnlinks href=#hl-14-211>211</a>
</span><span class=lnt id=hl-14-212><a class=lnlinks href=#hl-14-212>212</a>
</span><span class=lnt id=hl-14-213><a class=lnlinks href=#hl-14-213>213</a>
</span><span class=lnt id=hl-14-214><a class=lnlinks href=#hl-14-214>214</a>
</span><span class=lnt id=hl-14-215><a class=lnlinks href=#hl-14-215>215</a>
</span><span class=lnt id=hl-14-216><a class=lnlinks href=#hl-14-216>216</a>
</span><span class=lnt id=hl-14-217><a class=lnlinks href=#hl-14-217>217</a>
</span><span class=lnt id=hl-14-218><a class=lnlinks href=#hl-14-218>218</a>
</span><span class=lnt id=hl-14-219><a class=lnlinks href=#hl-14-219>219</a>
</span><span class=lnt id=hl-14-220><a class=lnlinks href=#hl-14-220>220</a>
</span><span class=lnt id=hl-14-221><a class=lnlinks href=#hl-14-221>221</a>
</span><span class=lnt id=hl-14-222><a class=lnlinks href=#hl-14-222>222</a>
</span><span class=lnt id=hl-14-223><a class=lnlinks href=#hl-14-223>223</a>
</span><span class=lnt id=hl-14-224><a class=lnlinks href=#hl-14-224>224</a>
</span><span class=lnt id=hl-14-225><a class=lnlinks href=#hl-14-225>225</a>
</span><span class=lnt id=hl-14-226><a class=lnlinks href=#hl-14-226>226</a>
</span><span class=lnt id=hl-14-227><a class=lnlinks href=#hl-14-227>227</a>
</span><span class=lnt id=hl-14-228><a class=lnlinks href=#hl-14-228>228</a>
</span><span class=lnt id=hl-14-229><a class=lnlinks href=#hl-14-229>229</a>
</span><span class=lnt id=hl-14-230><a class=lnlinks href=#hl-14-230>230</a>
</span><span class=lnt id=hl-14-231><a class=lnlinks href=#hl-14-231>231</a>
</span><span class=lnt id=hl-14-232><a class=lnlinks href=#hl-14-232>232</a>
</span><span class=lnt id=hl-14-233><a class=lnlinks href=#hl-14-233>233</a>
</span><span class=lnt id=hl-14-234><a class=lnlinks href=#hl-14-234>234</a>
</span><span class=lnt id=hl-14-235><a class=lnlinks href=#hl-14-235>235</a>
</span><span class=lnt id=hl-14-236><a class=lnlinks href=#hl-14-236>236</a>
</span><span class=lnt id=hl-14-237><a class=lnlinks href=#hl-14-237>237</a>
</span><span class=lnt id=hl-14-238><a class=lnlinks href=#hl-14-238>238</a>
</span><span class=lnt id=hl-14-239><a class=lnlinks href=#hl-14-239>239</a>
</span><span class=lnt id=hl-14-240><a class=lnlinks href=#hl-14-240>240</a>
</span><span class=lnt id=hl-14-241><a class=lnlinks href=#hl-14-241>241</a>
</span><span class=lnt id=hl-14-242><a class=lnlinks href=#hl-14-242>242</a>
</span><span class=lnt id=hl-14-243><a class=lnlinks href=#hl-14-243>243</a>
</span><span class=lnt id=hl-14-244><a class=lnlinks href=#hl-14-244>244</a>
</span><span class=lnt id=hl-14-245><a class=lnlinks href=#hl-14-245>245</a>
</span><span class=lnt id=hl-14-246><a class=lnlinks href=#hl-14-246>246</a>
</span><span class=lnt id=hl-14-247><a class=lnlinks href=#hl-14-247>247</a>
</span><span class=lnt id=hl-14-248><a class=lnlinks href=#hl-14-248>248</a>
</span><span class=lnt id=hl-14-249><a class=lnlinks href=#hl-14-249>249</a>
</span><span class=lnt id=hl-14-250><a class=lnlinks href=#hl-14-250>250</a>
</span><span class=lnt id=hl-14-251><a class=lnlinks href=#hl-14-251>251</a>
</span><span class=lnt id=hl-14-252><a class=lnlinks href=#hl-14-252>252</a>
</span><span class=lnt id=hl-14-253><a class=lnlinks href=#hl-14-253>253</a>
</span><span class=lnt id=hl-14-254><a class=lnlinks href=#hl-14-254>254</a>
</span><span class=lnt id=hl-14-255><a class=lnlinks href=#hl-14-255>255</a>
</span><span class=lnt id=hl-14-256><a class=lnlinks href=#hl-14-256>256</a>
</span><span class=lnt id=hl-14-257><a class=lnlinks href=#hl-14-257>257</a>
</span><span class=lnt id=hl-14-258><a class=lnlinks href=#hl-14-258>258</a>
</span><span class=lnt id=hl-14-259><a class=lnlinks href=#hl-14-259>259</a>
</span><span class=lnt id=hl-14-260><a class=lnlinks href=#hl-14-260>260</a>
</span><span class=lnt id=hl-14-261><a class=lnlinks href=#hl-14-261>261</a>
</span><span class=lnt id=hl-14-262><a class=lnlinks href=#hl-14-262>262</a>
</span><span class=lnt id=hl-14-263><a class=lnlinks href=#hl-14-263>263</a>
</span><span class=lnt id=hl-14-264><a class=lnlinks href=#hl-14-264>264</a>
</span><span class=lnt id=hl-14-265><a class=lnlinks href=#hl-14-265>265</a>
</span><span class=lnt id=hl-14-266><a class=lnlinks href=#hl-14-266>266</a>
</span><span class=lnt id=hl-14-267><a class=lnlinks href=#hl-14-267>267</a>
</span><span class=lnt id=hl-14-268><a class=lnlinks href=#hl-14-268>268</a>
</span><span class=lnt id=hl-14-269><a class=lnlinks href=#hl-14-269>269</a>
</span><span class=lnt id=hl-14-270><a class=lnlinks href=#hl-14-270>270</a>
</span><span class=lnt id=hl-14-271><a class=lnlinks href=#hl-14-271>271</a>
</span><span class=lnt id=hl-14-272><a class=lnlinks href=#hl-14-272>272</a>
</span><span class=lnt id=hl-14-273><a class=lnlinks href=#hl-14-273>273</a>
</span><span class=lnt id=hl-14-274><a class=lnlinks href=#hl-14-274>274</a>
</span><span class=lnt id=hl-14-275><a class=lnlinks href=#hl-14-275>275</a>
</span><span class=lnt id=hl-14-276><a class=lnlinks href=#hl-14-276>276</a>
</span><span class=lnt id=hl-14-277><a class=lnlinks href=#hl-14-277>277</a>
</span><span class=lnt id=hl-14-278><a class=lnlinks href=#hl-14-278>278</a>
</span><span class=lnt id=hl-14-279><a class=lnlinks href=#hl-14-279>279</a>
</span><span class=lnt id=hl-14-280><a class=lnlinks href=#hl-14-280>280</a>
</span><span class=lnt id=hl-14-281><a class=lnlinks href=#hl-14-281>281</a>
</span><span class=lnt id=hl-14-282><a class=lnlinks href=#hl-14-282>282</a>
</span><span class=lnt id=hl-14-283><a class=lnlinks href=#hl-14-283>283</a>
</span><span class=lnt id=hl-14-284><a class=lnlinks href=#hl-14-284>284</a>
</span><span class=lnt id=hl-14-285><a class=lnlinks href=#hl-14-285>285</a>
</span><span class=lnt id=hl-14-286><a class=lnlinks href=#hl-14-286>286</a>
</span><span class=lnt id=hl-14-287><a class=lnlinks href=#hl-14-287>287</a>
</span><span class=lnt id=hl-14-288><a class=lnlinks href=#hl-14-288>288</a>
</span><span class=lnt id=hl-14-289><a class=lnlinks href=#hl-14-289>289</a>
</span><span class=lnt id=hl-14-290><a class=lnlinks href=#hl-14-290>290</a>
</span><span class=lnt id=hl-14-291><a class=lnlinks href=#hl-14-291>291</a>
</span><span class=lnt id=hl-14-292><a class=lnlinks href=#hl-14-292>292</a>
</span><span class=lnt id=hl-14-293><a class=lnlinks href=#hl-14-293>293</a>
</span><span class=lnt id=hl-14-294><a class=lnlinks href=#hl-14-294>294</a>
</span><span class=lnt id=hl-14-295><a class=lnlinks href=#hl-14-295>295</a>
</span><span class=lnt id=hl-14-296><a class=lnlinks href=#hl-14-296>296</a>
</span><span class=lnt id=hl-14-297><a class=lnlinks href=#hl-14-297>297</a>
</span><span class=lnt id=hl-14-298><a class=lnlinks href=#hl-14-298>298</a>
</span><span class=lnt id=hl-14-299><a class=lnlinks href=#hl-14-299>299</a>
</span><span class=lnt id=hl-14-300><a class=lnlinks href=#hl-14-300>300</a>
</span><span class=lnt id=hl-14-301><a class=lnlinks href=#hl-14-301>301</a>
</span><span class=lnt id=hl-14-302><a class=lnlinks href=#hl-14-302>302</a>
</span><span class=lnt id=hl-14-303><a class=lnlinks href=#hl-14-303>303</a>
</span><span class=lnt id=hl-14-304><a class=lnlinks href=#hl-14-304>304</a>
</span><span class=lnt id=hl-14-305><a class=lnlinks href=#hl-14-305>305</a>
</span><span class=lnt id=hl-14-306><a class=lnlinks href=#hl-14-306>306</a>
</span><span class=lnt id=hl-14-307><a class=lnlinks href=#hl-14-307>307</a>
</span><span class=lnt id=hl-14-308><a class=lnlinks href=#hl-14-308>308</a>
</span><span class=lnt id=hl-14-309><a class=lnlinks href=#hl-14-309>309</a>
</span><span class=lnt id=hl-14-310><a class=lnlinks href=#hl-14-310>310</a>
</span><span class=lnt id=hl-14-311><a class=lnlinks href=#hl-14-311>311</a>
</span><span class=lnt id=hl-14-312><a class=lnlinks href=#hl-14-312>312</a>
</span><span class=lnt id=hl-14-313><a class=lnlinks href=#hl-14-313>313</a>
</span><span class=lnt id=hl-14-314><a class=lnlinks href=#hl-14-314>314</a>
</span><span class=lnt id=hl-14-315><a class=lnlinks href=#hl-14-315>315</a>
</span><span class=lnt id=hl-14-316><a class=lnlinks href=#hl-14-316>316</a>
</span><span class=lnt id=hl-14-317><a class=lnlinks href=#hl-14-317>317</a>
</span><span class=lnt id=hl-14-318><a class=lnlinks href=#hl-14-318>318</a>
</span><span class=lnt id=hl-14-319><a class=lnlinks href=#hl-14-319>319</a>
</span><span class=lnt id=hl-14-320><a class=lnlinks href=#hl-14-320>320</a>
</span><span class=lnt id=hl-14-321><a class=lnlinks href=#hl-14-321>321</a>
</span><span class=lnt id=hl-14-322><a class=lnlinks href=#hl-14-322>322</a>
</span><span class=lnt id=hl-14-323><a class=lnlinks href=#hl-14-323>323</a>
</span><span class=lnt id=hl-14-324><a class=lnlinks href=#hl-14-324>324</a>
</span><span class=lnt id=hl-14-325><a class=lnlinks href=#hl-14-325>325</a>
</span><span class=lnt id=hl-14-326><a class=lnlinks href=#hl-14-326>326</a>
</span><span class=lnt id=hl-14-327><a class=lnlinks href=#hl-14-327>327</a>
</span><span class=lnt id=hl-14-328><a class=lnlinks href=#hl-14-328>328</a>
</span><span class=lnt id=hl-14-329><a class=lnlinks href=#hl-14-329>329</a>
</span><span class=lnt id=hl-14-330><a class=lnlinks href=#hl-14-330>330</a>
</span><span class=lnt id=hl-14-331><a class=lnlinks href=#hl-14-331>331</a>
</span><span class=lnt id=hl-14-332><a class=lnlinks href=#hl-14-332>332</a>
</span><span class=lnt id=hl-14-333><a class=lnlinks href=#hl-14-333>333</a>
</span><span class=lnt id=hl-14-334><a class=lnlinks href=#hl-14-334>334</a>
</span><span class=lnt id=hl-14-335><a class=lnlinks href=#hl-14-335>335</a>
</span><span class=lnt id=hl-14-336><a class=lnlinks href=#hl-14-336>336</a>
</span><span class=lnt id=hl-14-337><a class=lnlinks href=#hl-14-337>337</a>
</span><span class=lnt id=hl-14-338><a class=lnlinks href=#hl-14-338>338</a>
</span><span class=lnt id=hl-14-339><a class=lnlinks href=#hl-14-339>339</a>
</span><span class=lnt id=hl-14-340><a class=lnlinks href=#hl-14-340>340</a>
</span><span class=lnt id=hl-14-341><a class=lnlinks href=#hl-14-341>341</a>
</span><span class=lnt id=hl-14-342><a class=lnlinks href=#hl-14-342>342</a>
</span><span class=lnt id=hl-14-343><a class=lnlinks href=#hl-14-343>343</a>
</span><span class=lnt id=hl-14-344><a class=lnlinks href=#hl-14-344>344</a>
</span><span class=lnt id=hl-14-345><a class=lnlinks href=#hl-14-345>345</a>
</span><span class=lnt id=hl-14-346><a class=lnlinks href=#hl-14-346>346</a>
</span><span class=lnt id=hl-14-347><a class=lnlinks href=#hl-14-347>347</a>
</span><span class=lnt id=hl-14-348><a class=lnlinks href=#hl-14-348>348</a>
</span><span class=lnt id=hl-14-349><a class=lnlinks href=#hl-14-349>349</a>
</span><span class=lnt id=hl-14-350><a class=lnlinks href=#hl-14-350>350</a>
</span><span class=lnt id=hl-14-351><a class=lnlinks href=#hl-14-351>351</a>
</span><span class=lnt id=hl-14-352><a class=lnlinks href=#hl-14-352>352</a>
</span><span class=lnt id=hl-14-353><a class=lnlinks href=#hl-14-353>353</a>
</span><span class=lnt id=hl-14-354><a class=lnlinks href=#hl-14-354>354</a>
</span><span class=lnt id=hl-14-355><a class=lnlinks href=#hl-14-355>355</a>
</span><span class=lnt id=hl-14-356><a class=lnlinks href=#hl-14-356>356</a>
</span><span class=lnt id=hl-14-357><a class=lnlinks href=#hl-14-357>357</a>
</span><span class=lnt id=hl-14-358><a class=lnlinks href=#hl-14-358>358</a>
</span><span class=lnt id=hl-14-359><a class=lnlinks href=#hl-14-359>359</a>
</span><span class=lnt id=hl-14-360><a class=lnlinks href=#hl-14-360>360</a>
</span><span class=lnt id=hl-14-361><a class=lnlinks href=#hl-14-361>361</a>
</span><span class=lnt id=hl-14-362><a class=lnlinks href=#hl-14-362>362</a>
</span><span class=lnt id=hl-14-363><a class=lnlinks href=#hl-14-363>363</a>
</span><span class=lnt id=hl-14-364><a class=lnlinks href=#hl-14-364>364</a>
</span><span class=lnt id=hl-14-365><a class=lnlinks href=#hl-14-365>365</a>
</span><span class=lnt id=hl-14-366><a class=lnlinks href=#hl-14-366>366</a>
</span><span class=lnt id=hl-14-367><a class=lnlinks href=#hl-14-367>367</a>
</span><span class=lnt id=hl-14-368><a class=lnlinks href=#hl-14-368>368</a>
</span><span class=lnt id=hl-14-369><a class=lnlinks href=#hl-14-369>369</a>
</span><span class=lnt id=hl-14-370><a class=lnlinks href=#hl-14-370>370</a>
</span><span class=lnt id=hl-14-371><a class=lnlinks href=#hl-14-371>371</a>
</span><span class=lnt id=hl-14-372><a class=lnlinks href=#hl-14-372>372</a>
</span><span class=lnt id=hl-14-373><a class=lnlinks href=#hl-14-373>373</a>
</span><span class=lnt id=hl-14-374><a class=lnlinks href=#hl-14-374>374</a>
</span><span class=lnt id=hl-14-375><a class=lnlinks href=#hl-14-375>375</a>
</span><span class=lnt id=hl-14-376><a class=lnlinks href=#hl-14-376>376</a>
</span><span class=lnt id=hl-14-377><a class=lnlinks href=#hl-14-377>377</a>
</span><span class=lnt id=hl-14-378><a class=lnlinks href=#hl-14-378>378</a>
</span><span class=lnt id=hl-14-379><a class=lnlinks href=#hl-14-379>379</a>
</span><span class=lnt id=hl-14-380><a class=lnlinks href=#hl-14-380>380</a>
</span><span class=lnt id=hl-14-381><a class=lnlinks href=#hl-14-381>381</a>
</span><span class=lnt id=hl-14-382><a class=lnlinks href=#hl-14-382>382</a>
</span><span class=lnt id=hl-14-383><a class=lnlinks href=#hl-14-383>383</a>
</span><span class=lnt id=hl-14-384><a class=lnlinks href=#hl-14-384>384</a>
</span><span class=lnt id=hl-14-385><a class=lnlinks href=#hl-14-385>385</a>
</span><span class=lnt id=hl-14-386><a class=lnlinks href=#hl-14-386>386</a>
</span><span class=lnt id=hl-14-387><a class=lnlinks href=#hl-14-387>387</a>
</span><span class=lnt id=hl-14-388><a class=lnlinks href=#hl-14-388>388</a>
</span><span class=lnt id=hl-14-389><a class=lnlinks href=#hl-14-389>389</a>
</span><span class=lnt id=hl-14-390><a class=lnlinks href=#hl-14-390>390</a>
</span><span class=lnt id=hl-14-391><a class=lnlinks href=#hl-14-391>391</a>
</span><span class=lnt id=hl-14-392><a class=lnlinks href=#hl-14-392>392</a>
</span><span class=lnt id=hl-14-393><a class=lnlinks href=#hl-14-393>393</a>
</span><span class=lnt id=hl-14-394><a class=lnlinks href=#hl-14-394>394</a>
</span><span class=lnt id=hl-14-395><a class=lnlinks href=#hl-14-395>395</a>
</span><span class=lnt id=hl-14-396><a class=lnlinks href=#hl-14-396>396</a>
</span><span class=lnt id=hl-14-397><a class=lnlinks href=#hl-14-397>397</a>
</span><span class=lnt id=hl-14-398><a class=lnlinks href=#hl-14-398>398</a>
</span><span class=lnt id=hl-14-399><a class=lnlinks href=#hl-14-399>399</a>
</span><span class=lnt id=hl-14-400><a class=lnlinks href=#hl-14-400>400</a>
</span><span class=lnt id=hl-14-401><a class=lnlinks href=#hl-14-401>401</a>
</span><span class=lnt id=hl-14-402><a class=lnlinks href=#hl-14-402>402</a>
</span><span class=lnt id=hl-14-403><a class=lnlinks href=#hl-14-403>403</a>
</span><span class=lnt id=hl-14-404><a class=lnlinks href=#hl-14-404>404</a>
</span><span class=lnt id=hl-14-405><a class=lnlinks href=#hl-14-405>405</a>
</span><span class=lnt id=hl-14-406><a class=lnlinks href=#hl-14-406>406</a>
</span><span class=lnt id=hl-14-407><a class=lnlinks href=#hl-14-407>407</a>
</span><span class=lnt id=hl-14-408><a class=lnlinks href=#hl-14-408>408</a>
</span><span class=lnt id=hl-14-409><a class=lnlinks href=#hl-14-409>409</a>
</span><span class=lnt id=hl-14-410><a class=lnlinks href=#hl-14-410>410</a>
</span><span class=lnt id=hl-14-411><a class=lnlinks href=#hl-14-411>411</a>
</span><span class=lnt id=hl-14-412><a class=lnlinks href=#hl-14-412>412</a>
</span><span class=lnt id=hl-14-413><a class=lnlinks href=#hl-14-413>413</a>
</span><span class=lnt id=hl-14-414><a class=lnlinks href=#hl-14-414>414</a>
</span><span class=lnt id=hl-14-415><a class=lnlinks href=#hl-14-415>415</a>
</span><span class=lnt id=hl-14-416><a class=lnlinks href=#hl-14-416>416</a>
</span><span class=lnt id=hl-14-417><a class=lnlinks href=#hl-14-417>417</a>
</span><span class=lnt id=hl-14-418><a class=lnlinks href=#hl-14-418>418</a>
</span><span class=lnt id=hl-14-419><a class=lnlinks href=#hl-14-419>419</a>
</span><span class=lnt id=hl-14-420><a class=lnlinks href=#hl-14-420>420</a>
</span><span class=lnt id=hl-14-421><a class=lnlinks href=#hl-14-421>421</a>
</span><span class=lnt id=hl-14-422><a class=lnlinks href=#hl-14-422>422</a>
</span><span class=lnt id=hl-14-423><a class=lnlinks href=#hl-14-423>423</a>
</span><span class=lnt id=hl-14-424><a class=lnlinks href=#hl-14-424>424</a>
</span><span class=lnt id=hl-14-425><a class=lnlinks href=#hl-14-425>425</a>
</span><span class=lnt id=hl-14-426><a class=lnlinks href=#hl-14-426>426</a>
</span><span class=lnt id=hl-14-427><a class=lnlinks href=#hl-14-427>427</a>
</span><span class=lnt id=hl-14-428><a class=lnlinks href=#hl-14-428>428</a>
</span><span class=lnt id=hl-14-429><a class=lnlinks href=#hl-14-429>429</a>
</span><span class=lnt id=hl-14-430><a class=lnlinks href=#hl-14-430>430</a>
</span><span class=lnt id=hl-14-431><a class=lnlinks href=#hl-14-431>431</a>
</span><span class=lnt id=hl-14-432><a class=lnlinks href=#hl-14-432>432</a>
</span><span class=lnt id=hl-14-433><a class=lnlinks href=#hl-14-433>433</a>
</span><span class=lnt id=hl-14-434><a class=lnlinks href=#hl-14-434>434</a>
</span><span class=lnt id=hl-14-435><a class=lnlinks href=#hl-14-435>435</a>
</span><span class=lnt id=hl-14-436><a class=lnlinks href=#hl-14-436>436</a>
</span><span class=lnt id=hl-14-437><a class=lnlinks href=#hl-14-437>437</a>
</span><span class=lnt id=hl-14-438><a class=lnlinks href=#hl-14-438>438</a>
</span><span class=lnt id=hl-14-439><a class=lnlinks href=#hl-14-439>439</a>
</span><span class=lnt id=hl-14-440><a class=lnlinks href=#hl-14-440>440</a>
</span><span class=lnt id=hl-14-441><a class=lnlinks href=#hl-14-441>441</a>
</span><span class=lnt id=hl-14-442><a class=lnlinks href=#hl-14-442>442</a>
</span><span class=lnt id=hl-14-443><a class=lnlinks href=#hl-14-443>443</a>
</span><span class=lnt id=hl-14-444><a class=lnlinks href=#hl-14-444>444</a>
</span><span class=lnt id=hl-14-445><a class=lnlinks href=#hl-14-445>445</a>
</span><span class=lnt id=hl-14-446><a class=lnlinks href=#hl-14-446>446</a>
</span><span class=lnt id=hl-14-447><a class=lnlinks href=#hl-14-447>447</a>
</span><span class=lnt id=hl-14-448><a class=lnlinks href=#hl-14-448>448</a>
</span><span class=lnt id=hl-14-449><a class=lnlinks href=#hl-14-449>449</a>
</span><span class=lnt id=hl-14-450><a class=lnlinks href=#hl-14-450>450</a>
</span><span class=lnt id=hl-14-451><a class=lnlinks href=#hl-14-451>451</a>
</span><span class=lnt id=hl-14-452><a class=lnlinks href=#hl-14-452>452</a>
</span><span class=lnt id=hl-14-453><a class=lnlinks href=#hl-14-453>453</a>
</span><span class=lnt id=hl-14-454><a class=lnlinks href=#hl-14-454>454</a>
</span><span class=lnt id=hl-14-455><a class=lnlinks href=#hl-14-455>455</a>
</span><span class=lnt id=hl-14-456><a class=lnlinks href=#hl-14-456>456</a>
</span><span class=lnt id=hl-14-457><a class=lnlinks href=#hl-14-457>457</a>
</span><span class=lnt id=hl-14-458><a class=lnlinks href=#hl-14-458>458</a>
</span><span class=lnt id=hl-14-459><a class=lnlinks href=#hl-14-459>459</a>
</span><span class=lnt id=hl-14-460><a class=lnlinks href=#hl-14-460>460</a>
</span><span class=lnt id=hl-14-461><a class=lnlinks href=#hl-14-461>461</a>
</span><span class=lnt id=hl-14-462><a class=lnlinks href=#hl-14-462>462</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>Redis</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;redis&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>mysql</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;mysql2/promise&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 전자상거래 상품 캐싱 시스템
</span></span></span><span class=line><span class=cl><span class=cm> * Cache-Aside 패턴과 Write-Through 패턴을 결합한 구현
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>ProductCacheService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Redis 클라이언트 초기화
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span> <span class=o>=</span> <span class=nx>Redis</span><span class=p>.</span><span class=nx>createClient</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>host</span><span class=o>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>port</span><span class=o>:</span> <span class=mi>6379</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>retryDelayOnFailover</span><span class=o>:</span> <span class=mi>100</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>maxRetriesPerRequest</span><span class=o>:</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// MySQL 연결 풀 초기화
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>dbPool</span> <span class=o>=</span> <span class=nx>mysql</span><span class=p>.</span><span class=nx>createPool</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>host</span><span class=o>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>user</span><span class=o>:</span> <span class=s1>&#39;ecommerce_user&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>password</span><span class=o>:</span> <span class=s1>&#39;password&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>database</span><span class=o>:</span> <span class=s1>&#39;ecommerce&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>waitForConnections</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>connectionLimit</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>queueLimit</span><span class=o>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 캐시 설정
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>CACHE_TTL</span> <span class=o>=</span> <span class=mi>3600</span><span class=p>;</span> <span class=c1>// 1시간
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>CACHE_PREFIX</span> <span class=o>=</span> <span class=s1>&#39;product:&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>connect</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 상품 정보 조회 (Cache-Aside 패턴)
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} productId - 상품 ID
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {Object} 상품 정보
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getProduct</span><span class=p>(</span><span class=nx>productId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>cacheKey</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>CACHE_PREFIX</span><span class=si>}${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 1. 캐시에서 먼저 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>cachedProduct</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>cachedProduct</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Cache HIT for product </span><span class=si>${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 캐시 히트 통계 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>updateCacheStats</span><span class=p>(</span><span class=s1>&#39;hit&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>cachedProduct</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Cache MISS for product </span><span class=si>${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 2. 캐시 미스 시 데이터베이스에서 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>product</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>getProductFromDB</span><span class=p>(</span><span class=nx>productId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>product</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 3. 조회된 데이터를 캐시에 저장 (비동기)
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>this</span><span class=p>.</span><span class=nx>cacheProduct</span><span class=p>(</span><span class=nx>productId</span><span class=p>,</span> <span class=nx>product</span><span class=p>).</span><span class=k>catch</span><span class=p>(</span><span class=nx>err</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Cache storage failed:&#39;</span><span class=p>,</span> <span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=p>});</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1>// 캐시 미스 통계 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>updateCacheStats</span><span class=p>(</span><span class=s1>&#39;miss&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>product</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error getting product:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 캐시 오류 시 데이터베이스 직접 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>return</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>getProductFromDB</span><span class=p>(</span><span class=nx>productId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 상품 정보 업데이트 (Write-Through 패턴)
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} productId - 상품 ID
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {Object} productData - 업데이트할 상품 데이터
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>updateProduct</span><span class=p>(</span><span class=nx>productId</span><span class=p>,</span> <span class=nx>productData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>cacheKey</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>CACHE_PREFIX</span><span class=si>}${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 1. 데이터베이스 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>updateProductInDB</span><span class=p>(</span><span class=nx>productId</span><span class=p>,</span> <span class=nx>productData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 2. 캐시 업데이트 (Write-Through)
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>setEx</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=nx>cacheKey</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>CACHE_TTL</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>productData</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Product </span><span class=si>${</span><span class=nx>productId</span><span class=si>}</span><span class=sb> updated in both DB and cache`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error updating product:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 업데이트 실패 시 캐시 무효화
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>invalidateCache</span><span class=p>(</span><span class=nx>productId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=nx>error</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 데이터베이스에서 상품 조회
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} productId - 상품 ID
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {Object} 상품 정보
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getProductFromDB</span><span class=p>(</span><span class=nx>productId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=p>[</span><span class=nx>rows</span><span class=p>]</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>dbPool</span><span class=p>.</span><span class=nx>execute</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;SELECT * FROM products WHERE id = ? AND status = &#34;active&#34;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>[</span><span class=nx>productId</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>rows</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>?</span> <span class=nx>rows</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>:</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 데이터베이스에서 상품 업데이트
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} productId - 상품 ID
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {Object} productData - 상품 데이터
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>updateProductInDB</span><span class=p>(</span><span class=nx>productId</span><span class=p>,</span> <span class=nx>productData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=p>{</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>description</span><span class=p>,</span> <span class=nx>price</span><span class=p>,</span> <span class=nx>inventory</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>productData</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>dbPool</span><span class=p>.</span><span class=nx>execute</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;UPDATE products SET name = ?, description = ?, price = ?, inventory = ?, updated_at = NOW() WHERE id = ?&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>[</span><span class=nx>name</span><span class=p>,</span> <span class=nx>description</span><span class=p>,</span> <span class=nx>price</span><span class=p>,</span> <span class=nx>inventory</span><span class=p>,</span> <span class=nx>productId</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 상품을 캐시에 저장
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} productId - 상품 ID
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {Object} product - 상품 데이터
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>cacheProduct</span><span class=p>(</span><span class=nx>productId</span><span class=p>,</span> <span class=nx>product</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>cacheKey</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>CACHE_PREFIX</span><span class=si>}${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// TTL과 함께 저장
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>setEx</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>cacheKey</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>CACHE_TTL</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>product</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 특정 상품 캐시 무효화
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} productId - 상품 ID
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>invalidateCache</span><span class=p>(</span><span class=nx>productId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>cacheKey</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>CACHE_PREFIX</span><span class=si>}${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>del</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Cache invalidated for product </span><span class=si>${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 카테고리별 상품 목록 조회 (캐시 적용)
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} categoryId - 카테고리 ID
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} page - 페이지 번호
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} limit - 페이지당 항목 수
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getProductsByCategory</span><span class=p>(</span><span class=nx>categoryId</span><span class=p>,</span> <span class=nx>page</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>limit</span> <span class=o>=</span> <span class=mi>20</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>cacheKey</span> <span class=o>=</span> <span class=sb>`category:</span><span class=si>${</span><span class=nx>categoryId</span><span class=si>}</span><span class=sb>:page:</span><span class=si>${</span><span class=nx>page</span><span class=si>}</span><span class=sb>:limit:</span><span class=si>${</span><span class=nx>limit</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 캐시에서 목록 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>cachedList</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>cachedList</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Cache HIT for category </span><span class=si>${</span><span class=nx>categoryId</span><span class=si>}</span><span class=sb>, page </span><span class=si>${</span><span class=nx>page</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>cachedList</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// 데이터베이스에서 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>offset</span> <span class=o>=</span> <span class=p>(</span><span class=nx>page</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span> <span class=o>*</span> <span class=nx>limit</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=p>[</span><span class=nx>rows</span><span class=p>]</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>dbPool</span><span class=p>.</span><span class=nx>execute</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;SELECT id, name, price, image_url FROM products WHERE category_id = ? AND status = &#34;active&#34; ORDER BY created_at DESC LIMIT ? OFFSET ?&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=nx>categoryId</span><span class=p>,</span> <span class=nx>limit</span><span class=p>,</span> <span class=nx>offset</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>products</span><span class=o>:</span> <span class=nx>rows</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>page</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>limit</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>total</span><span class=o>:</span> <span class=nx>rows</span><span class=p>.</span><span class=nx>length</span>
</span></span><span class=line><span class=cl>            <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// 목록을 캐시에 저장 (짧은 TTL 적용)
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>setEx</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>,</span> <span class=mi>300</span><span class=p>,</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>result</span><span class=p>));</span> <span class=c1>// 5분
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error getting products by category:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=nx>error</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 캐시 통계 업데이트
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {string} type - &#39;hit&#39; 또는 &#39;miss&#39;
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>updateCacheStats</span><span class=p>(</span><span class=nx>type</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>today</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>().</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;T&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>statsKey</span> <span class=o>=</span> <span class=sb>`cache:stats:</span><span class=si>${</span><span class=nx>today</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>hIncrBy</span><span class=p>(</span><span class=nx>statsKey</span><span class=p>,</span> <span class=nx>type</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>expire</span><span class=p>(</span><span class=nx>statsKey</span><span class=p>,</span> <span class=mi>86400</span> <span class=o>*</span> <span class=mi>7</span><span class=p>);</span> <span class=c1>// 7일 보관
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 캐시 성능 지표 조회
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {Object} 캐시 히트율 및 통계
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getCacheStats</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>today</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>().</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;T&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>statsKey</span> <span class=o>=</span> <span class=sb>`cache:stats:</span><span class=si>${</span><span class=nx>today</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>stats</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>hGetAll</span><span class=p>(</span><span class=nx>statsKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>hits</span> <span class=o>=</span> <span class=nb>parseInt</span><span class=p>(</span><span class=nx>stats</span><span class=p>.</span><span class=nx>hit</span> <span class=o>||</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>misses</span> <span class=o>=</span> <span class=nb>parseInt</span><span class=p>(</span><span class=nx>stats</span><span class=p>.</span><span class=nx>miss</span> <span class=o>||</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>total</span> <span class=o>=</span> <span class=nx>hits</span> <span class=o>+</span> <span class=nx>misses</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>hits</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>misses</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>total</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>hitRate</span><span class=o>:</span> <span class=nx>total</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>?</span> <span class=p>(</span><span class=nx>hits</span> <span class=o>/</span> <span class=nx>total</span> <span class=o>*</span> <span class=mi>100</span><span class=p>).</span><span class=nx>toFixed</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span> <span class=o>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 인기 상품 캐시 워밍업
</span></span></span><span class=line><span class=cl><span class=cm>     * 시스템 시작 시 또는 주기적으로 실행하여 자주 조회되는 상품들을 미리 캐시에 로드
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>warmupPopularProducts</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Starting cache warmup for popular products…&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 인기 상품 ID 목록 조회 (조회수 기준 상위 100개)
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=p>[</span><span class=nx>popularProducts</span><span class=p>]</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>dbPool</span><span class=p>.</span><span class=nx>execute</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;SELECT id FROM products WHERE status = &#34;active&#34; ORDER BY view_count DESC LIMIT 100&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// 배치 처리로 캐시 로드 (동시 처리 제한)
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>batchSize</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=nx>popularProducts</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=nx>i</span> <span class=o>+=</span> <span class=nx>batchSize</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>batch</span> <span class=o>=</span> <span class=nx>popularProducts</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>i</span> <span class=o>+</span> <span class=nx>batchSize</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=kr>await</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>all</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=nx>batch</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=kr>async</span> <span class=p>(</span><span class=nx>product</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=kr>const</span> <span class=nx>productData</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>getProductFromDB</span><span class=p>(</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                        <span class=k>if</span> <span class=p>(</span><span class=nx>productData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>cacheProduct</span><span class=p>(</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span> <span class=nx>productData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                        <span class=p>}</span>
</span></span><span class=line><span class=cl>                    <span class=p>})</span>
</span></span><span class=line><span class=cl>                <span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1>// 과부하 방지를 위한 지연
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=nx>resolve</span> <span class=p>=&gt;</span> <span class=nx>setTimeout</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=mi>100</span><span class=p>));</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Cache warmup completed for </span><span class=si>${</span><span class=nx>popularProducts</span><span class=p>.</span><span class=nx>length</span><span class=si>}</span><span class=sb> products`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Cache warmup failed:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 분산 락을 이용한 캐시 스탬피드 방지
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {string} key - 락 키
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} ttl - 락 유효 시간 (초)
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {Function} callback - 락 획득 시 실행할 함수
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>withDistributedLock</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>ttl</span><span class=p>,</span> <span class=nx>callback</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>lockKey</span> <span class=o>=</span> <span class=sb>`lock:</span><span class=si>${</span><span class=nx>key</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>lockValue</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span><span class=si>}</span><span class=sb>-</span><span class=si>${</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 락 획득 시도
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>acquired</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>lockKey</span><span class=p>,</span> <span class=nx>lockValue</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>EX</span><span class=o>:</span> <span class=nx>ttl</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>NX</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>acquired</span> <span class=o>===</span> <span class=s1>&#39;OK&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Lock acquired for </span><span class=si>${</span><span class=nx>key</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=kr>await</span> <span class=nx>callback</span><span class=p>();</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span> <span class=k>finally</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=c1>// 락 해제 (Lua 스크립트로 원자적 실행)
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nb>eval</span><span class=p>(</span><span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>                        if redis.call(&#34;get&#34;, KEYS[1]) == ARGV[1] then
</span></span></span><span class=line><span class=cl><span class=sb>                            return redis.call(&#34;del&#34;, KEYS[1])
</span></span></span><span class=line><span class=cl><span class=sb>                        else
</span></span></span><span class=line><span class=cl><span class=sb>                            return 0
</span></span></span><span class=line><span class=cl><span class=sb>                        end
</span></span></span><span class=line><span class=cl><span class=sb>                    `</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>lockKey</span><span class=p>,</span> <span class=nx>lockValue</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Lock released for </span><span class=si>${</span><span class=nx>key</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Lock not acquired for </span><span class=si>${</span><span class=nx>key</span><span class=si>}</span><span class=sb>, waiting…`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 락 획득 실패 시 잠시 대기 후 재시도
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=nx>resolve</span> <span class=p>=&gt;</span> <span class=nx>setTimeout</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=mi>50</span><span class=p>));</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`Lock error for </span><span class=si>${</span><span class=nx>key</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=nx>error</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 캐시 무효화 전략 - 태그 기반
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {Array} tags - 무효화할 태그 목록
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>invalidateByTags</span><span class=p>(</span><span class=nx>tags</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>tag</span> <span class=k>of</span> <span class=nx>tags</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>tagKey</span> <span class=o>=</span> <span class=sb>`tag:</span><span class=si>${</span><span class=nx>tag</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 태그와 연관된 캐시 키 목록 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>associatedKeys</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>sMembers</span><span class=p>(</span><span class=nx>tagKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>associatedKeys</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 연관된 모든 캐시 키 삭제
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>del</span><span class=p>(</span><span class=err>…</span><span class=nx>associatedKeys</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1>// 태그 자체도 삭제
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>del</span><span class=p>(</span><span class=nx>tagKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Invalidated </span><span class=si>${</span><span class=nx>associatedKeys</span><span class=p>.</span><span class=nx>length</span><span class=si>}</span><span class=sb> cache entries for tag: </span><span class=si>${</span><span class=nx>tag</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 메모리 사용량 모니터링 및 자동 정리
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>monitorAndCleanup</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>info</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>info</span><span class=p>(</span><span class=s1>&#39;memory&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>memoryUsage</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>parseRedisInfo</span><span class=p>(</span><span class=nx>info</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>usedMemoryMB</span> <span class=o>=</span> <span class=nx>memoryUsage</span><span class=p>.</span><span class=nx>used_memory</span> <span class=o>/</span> <span class=p>(</span><span class=mi>1024</span> <span class=o>*</span> <span class=mi>1024</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>maxMemoryMB</span> <span class=o>=</span> <span class=nx>memoryUsage</span><span class=p>.</span><span class=nx>maxmemory</span> <span class=o>/</span> <span class=p>(</span><span class=mi>1024</span> <span class=o>*</span> <span class=mi>1024</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>usagePercentage</span> <span class=o>=</span> <span class=p>(</span><span class=nx>usedMemoryMB</span> <span class=o>/</span> <span class=nx>maxMemoryMB</span><span class=p>)</span> <span class=o>*</span> <span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Redis memory usage: </span><span class=si>${</span><span class=nx>usedMemoryMB</span><span class=p>.</span><span class=nx>toFixed</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span><span class=si>}</span><span class=sb>MB / </span><span class=si>${</span><span class=nx>maxMemoryMB</span><span class=p>.</span><span class=nx>toFixed</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span><span class=si>}</span><span class=sb>MB (</span><span class=si>${</span><span class=nx>usagePercentage</span><span class=p>.</span><span class=nx>toFixed</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span><span class=si>}</span><span class=sb>%)`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 메모리 사용률이 85%를 초과하면 경고
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=p>(</span><span class=nx>usagePercentage</span> <span class=o>&gt;</span> <span class=mi>85</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>warn</span><span class=p>(</span><span class=s1>&#39;High memory usage detected, consider cache cleanup&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1>// 오래된 캐시 항목 정리 로직 실행
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>cleanupExpiredEntries</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Memory monitoring failed:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * Redis 정보 파싱
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {string} info - Redis INFO 명령 결과
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=nx>parseRedisInfo</span><span class=p>(</span><span class=nx>info</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>lines</span> <span class=o>=</span> <span class=nx>info</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;\r\n&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>lines</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>line</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>line</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=s1>&#39;:&#39;</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=p>[</span><span class=nx>key</span><span class=p>,</span> <span class=nx>value</span><span class=p>]</span> <span class=o>=</span> <span class=nx>line</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;:&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=nx>result</span><span class=p>[</span><span class=nx>key</span><span class=p>]</span> <span class=o>=</span> <span class=nb>isNaN</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=o>?</span> <span class=nx>value</span> <span class=o>:</span> <span class=nb>Number</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 만료된 캐시 항목 정리
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>cleanupExpiredEntries</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Redis의 자동 만료 기능에 의존하되, 
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// 필요 시 수동으로 오래된 데이터 패턴 정리
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Cleaning up expired cache entries…&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 예: 일주일 이상 된 통계 데이터 정리
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>oneWeekAgo</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nx>oneWeekAgo</span><span class=p>.</span><span class=nx>setDate</span><span class=p>(</span><span class=nx>oneWeekAgo</span><span class=p>.</span><span class=nx>getDate</span><span class=p>()</span> <span class=o>-</span> <span class=mi>7</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>oldStatsPattern</span> <span class=o>=</span> <span class=sb>`cache:stats:</span><span class=si>${</span><span class=nx>oneWeekAgo</span><span class=p>.</span><span class=nx>toISOString</span><span class=p>().</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;T&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span><span class=si>}</span><span class=sb>*`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>oldKeys</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>keys</span><span class=p>(</span><span class=nx>oldStatsPattern</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>oldKeys</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>del</span><span class=p>(</span><span class=err>…</span><span class=nx>oldKeys</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Cleaned up </span><span class=si>${</span><span class=nx>oldKeys</span><span class=p>.</span><span class=nx>length</span><span class=si>}</span><span class=sb> old statistics entries`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 연결 종료
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>disconnect</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>disconnect</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>dbPool</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Cache service disconnected&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>async</span> <span class=kd>function</span> <span class=nx>example</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>cacheService</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ProductCacheService</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 캐시 워밍업 실행
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>warmupPopularProducts</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 상품 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>product</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>getProduct</span><span class=p>(</span><span class=mi>12345</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Product:&#39;</span><span class=p>,</span> <span class=nx>product</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 상품 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>updateProduct</span><span class=p>(</span><span class=mi>12345</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Updated Product&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>description</span><span class=o>:</span> <span class=s1>&#39;New description&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>price</span><span class=o>:</span> <span class=mf>99.99</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>inventory</span><span class=o>:</span> <span class=mi>50</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 카테고리별 상품 목록 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>categoryProducts</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>getProductsByCategory</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Category products:&#39;</span><span class=p>,</span> <span class=nx>categoryProducts</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 캐시 성능 지표 확인
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>stats</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>getCacheStats</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Cache stats:&#39;</span><span class=p>,</span> <span class=nx>stats</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 메모리 모니터링
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>monitorAndCleanup</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Example execution failed:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>finally</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>disconnect</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=nx>ProductCacheService</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=사례-6-ecommerce-사이트>사례 6: e‑Commerce 사이트<a hidden class=anchor aria-hidden=true href=#사례-6-ecommerce-사이트>#</a></h4><p><strong>시스템 구성</strong>:</p><pre class=mermaid>graph LR
  U[사용자] --&gt; LB[로드밸런서]
  LB --&gt; AppA[웹서버 A]
  LB --&gt; AppB[웹서버 B]
  subgraph Cache
    C1[Local Caffeine]
    C2[Redis Cluster]
  end
  AppA --&gt; C1
  AppB --&gt; C1
  C1 --&gt;|miss| C2
  C2 --&gt;|miss| DB[(상품 DB)]
</pre><p><strong>Workflow</strong>:</p><ol><li>유저 요청 → 로컬 Caffeine 조회</li><li>miss 시 Redis 조회, miss 면 DB 조회</li><li>Redis 및 로컬 동시에 캐싱</li><li>만료 정책: 인기 상품 TTL 길게 설정</li></ol><p><strong>결과 차이</strong>:</p><ul><li>TTL 5 분 설정 전 평균 DB 호출 수: 10,000/s → 이후: 1,500/s</li><li>캐시 히트율 약 85%, 응답 속도 평균 200ms → 50ms<br><strong>역할</strong>:</li><li><strong>로컬 캐시</strong>: 평균 70% 의 요청 빠르게 처리</li><li><strong>분산 캐시</strong>: 복제 및 확장성 강화</li></ul><p><strong>구현 예시</strong>:</p><ul><li>JavaScript: Node.js + Redis + LRU In‑Memory</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1> 1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2> 2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3> 3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4> 4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5> 5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6> 6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7> 7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8> 8</a>
</span><span class=lnt id=hl-16-9><a class=lnlinks href=#hl-16-9> 9</a>
</span><span class=lnt id=hl-16-10><a class=lnlinks href=#hl-16-10>10</a>
</span><span class=lnt id=hl-16-11><a class=lnlinks href=#hl-16-11>11</a>
</span><span class=lnt id=hl-16-12><a class=lnlinks href=#hl-16-12>12</a>
</span><span class=lnt id=hl-16-13><a class=lnlinks href=#hl-16-13>13</a>
</span><span class=lnt id=hl-16-14><a class=lnlinks href=#hl-16-14>14</a>
</span><span class=lnt id=hl-16-15><a class=lnlinks href=#hl-16-15>15</a>
</span><span class=lnt id=hl-16-16><a class=lnlinks href=#hl-16-16>16</a>
</span><span class=lnt id=hl-16-17><a class=lnlinks href=#hl-16-17>17</a>
</span><span class=lnt id=hl-16-18><a class=lnlinks href=#hl-16-18>18</a>
</span><span class=lnt id=hl-16-19><a class=lnlinks href=#hl-16-19>19</a>
</span><span class=lnt id=hl-16-20><a class=lnlinks href=#hl-16-20>20</a>
</span><span class=lnt id=hl-16-21><a class=lnlinks href=#hl-16-21>21</a>
</span><span class=lnt id=hl-16-22><a class=lnlinks href=#hl-16-22>22</a>
</span><span class=lnt id=hl-16-23><a class=lnlinks href=#hl-16-23>23</a>
</span><span class=lnt id=hl-16-24><a class=lnlinks href=#hl-16-24>24</a>
</span><span class=lnt id=hl-16-25><a class=lnlinks href=#hl-16-25>25</a>
</span><span class=lnt id=hl-16-26><a class=lnlinks href=#hl-16-26>26</a>
</span><span class=lnt id=hl-16-27><a class=lnlinks href=#hl-16-27>27</a>
</span><span class=lnt id=hl-16-28><a class=lnlinks href=#hl-16-28>28</a>
</span><span class=lnt id=hl-16-29><a class=lnlinks href=#hl-16-29>29</a>
</span><span class=lnt id=hl-16-30><a class=lnlinks href=#hl-16-30>30</a>
</span><span class=lnt id=hl-16-31><a class=lnlinks href=#hl-16-31>31</a>
</span><span class=lnt id=hl-16-32><a class=lnlinks href=#hl-16-32>32</a>
</span><span class=lnt id=hl-16-33><a class=lnlinks href=#hl-16-33>33</a>
</span><span class=lnt id=hl-16-34><a class=lnlinks href=#hl-16-34>34</a>
</span><span class=lnt id=hl-16-35><a class=lnlinks href=#hl-16-35>35</a>
</span><span class=lnt id=hl-16-36><a class=lnlinks href=#hl-16-36>36</a>
</span><span class=lnt id=hl-16-37><a class=lnlinks href=#hl-16-37>37</a>
</span><span class=lnt id=hl-16-38><a class=lnlinks href=#hl-16-38>38</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>Redis</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;ioredis&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>LRU</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;lru-cache&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>redis</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Redis</span><span class=p>({</span> <span class=nx>host</span><span class=o>:</span> <span class=s1>&#39;redis:6379&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>localCache</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>LRU</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>max</span><span class=o>:</span> <span class=mi>500</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>maxAge</span><span class=o>:</span> <span class=mi>1000</span> <span class=o>*</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>5</span><span class=p>,</span> <span class=c1>// 5분
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 캐싱 미들웨어
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>async</span> <span class=kd>function</span> <span class=nx>cacheMiddleware</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>key</span> <span class=o>=</span> <span class=sb>`product:</span><span class=si>${</span><span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>localVal</span> <span class=o>=</span> <span class=nx>localCache</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>localVal</span><span class=p>)</span> <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>localVal</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>distVal</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>redis</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>distVal</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>localCache</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>distVal</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>distVal</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>locals</span><span class=p>.</span><span class=nx>cacheKey</span> <span class=o>=</span> <span class=nx>key</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/product/:id&#39;</span><span class=p>,</span> <span class=nx>cacheMiddleware</span><span class=p>,</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>cacheKey</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>res</span><span class=p>.</span><span class=nx>locals</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 예시: DB 조회 모킹
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>product</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>db</span><span class=p>.</span><span class=nx>getProduct</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=nx>redis</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>,</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>product</span><span class=p>),</span> <span class=s1>&#39;EX&#39;</span><span class=p>,</span> <span class=mi>300</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>localCache</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>,</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>product</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=nx>product</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>3000</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=캐시-적중률-cache-hit-ratio>캐시 적중률 (Cache Hit Ratio)<a hidden class=anchor aria-hidden=true href=#캐시-적중률-cache-hit-ratio>#</a></h3><p>캐시 적중률 (Cache Hit Ratio) 은 <strong>전체 요청 중 캐시에서 데이터를 성공적으로 반환한 비율</strong>을 나타낸다.<br>시스템의 성능 최적화와 캐시 전략을 평가할 때 가장 중요한 지표 중 하나이다.</p><p><strong>공식</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>캐시 적중률 (%) = (캐시 히트 수 / 전체 요청 수) × 100
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>캐시 히트 (Hit)</strong>: 요청한 데이터가 캐시에 존재하여 백엔드 접근 없이 응답된 경우</li><li><strong>캐시 미스 (Miss)</strong>: 요청한 데이터가 캐시에 존재하지 않아 백엔드에서 데이터를 가져온 경우</li><li><strong>전체 요청 수</strong> = 캐시 히트 수 + 캐시 미스 수</li></ul><h4 id=예시>예시<a hidden class=anchor aria-hidden=true href=#예시>#</a></h4><p><strong>시나리오</strong></p><ul><li>총 요청 수: 1,000 건</li><li>이 중 750 건은 캐시에서 처리 (캐시 히트), 나머지 250 건은 백엔드에서 조회 (캐시 미스)</li></ul><p><strong>계산식</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>캐시 적중률 = (750 / 1000) × 100 = 75%
</span></span></code></pre></td></tr></table></div></div><p>즉, 이 시스템의 캐시 적중률은 <strong>75%</strong> 이며, 이는 비교적 높은 수준이다.</p><h4 id=redis-로그-예시>Redis 로그 예시<a hidden class=anchor aria-hidden=true href=#redis-로그-예시>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1>1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Redis INFO 명령 결과 예시</span>
</span></span><span class=line><span class=cl>redis-cli INFO stats
</span></span></code></pre></td></tr></table></div></div><p>출력:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1>1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>keyspace_hits:950
</span></span><span class=line><span class=cl>keyspace_misses:50
</span></span></code></pre></td></tr></table></div></div><p><strong>계산</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>캐시 적중률 = (950 / (950 + 50)) × 100 = 95%
</span></span></code></pre></td></tr></table></div></div><p>Redis 에서는 위와 같이 <code>keyspace_hits</code> 와 <code>keyspace_misses</code> 를 통해 캐시 적중률을 직접 추산할 수 있다.</p><h5 id=grafanaprometheus-를-사용하는-경우-메트릭-기반>Grafana/Prometheus 를 사용하는 경우 (메트릭 기반)<a hidden class=anchor aria-hidden=true href=#grafanaprometheus-를-사용하는-경우-메트릭-기반>#</a></h5><p><strong>Prometheus 메트릭 예시 (Memcached/Redis 등)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-promql data-lang=promql><span class=line><span class=cl><span class=o>(</span><span class=kr>rate</span><span class=o>(</span><span class=nv>redis_keyspace_hits</span><span class=p>[</span><span class=s>1m</span><span class=p>]</span><span class=o>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=o>(</span><span class=kr>rate</span><span class=o>(</span><span class=nv>redis_keyspace_hits</span><span class=p>[</span><span class=s>1m</span><span class=p>]</span><span class=o>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kr>rate</span><span class=o>(</span><span class=nv>redis_keyspace_misses</span><span class=p>[</span><span class=s>1m</span><span class=p>]</span><span class=o>)))</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>100</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>이 쿼리는 최근 1 분간의 요청 기준으로 캐시 적중률을 계산한다.</li><li>메트릭 이름은 사용 중인 Exporter 에 따라 다를 수 있다</li></ul><h5 id=캐시-적중률이-낮을-때-개선-전략>캐시 적중률이 낮을 때 개선 전략<a hidden class=anchor aria-hidden=true href=#캐시-적중률이-낮을-때-개선-전략>#</a></h5><table><thead><tr><th>원인</th><th>개선 방안</th></tr></thead><tbody><tr><td>너무 짧은 TTL (Time To Live)</td><td>적절한 TTL 로 캐시 유지 기간 확장</td></tr><tr><td>캐시 키 구성 불량</td><td>동적 파라미터 포함 시 키 정규화 처리</td></tr><tr><td>요청 패턴이 분산됨</td><td>LRU → LFU 알고리즘 전환 등 캐시 정책 재설정</td></tr><tr><td>자주 접근되지 않는 데이터 캐싱</td><td>Hot Data 위주로 캐싱, Cold Data 캐싱 제외</td></tr></tbody></table><h4 id=nginx-캐시-reverse-proxy-cache>Nginx 캐시 (Reverse Proxy Cache)<a hidden class=anchor aria-hidden=true href=#nginx-캐시-reverse-proxy-cache>#</a></h4><p><strong>Nginx Stub Status 모듈</strong> 또는 <strong>로그 기반 분석</strong>을 통해 계산</p><h5 id=로그-기반-accesslog>로그 기반 (access.log)<a hidden class=anchor aria-hidden=true href=#로그-기반-accesslog>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-23-1><a class=lnlinks href=#hl-23-1>1</a>
</span><span class=lnt id=hl-23-2><a class=lnlinks href=#hl-23-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat access.log <span class=p>|</span> grep -c <span class=s1>&#39;HIT&#39;</span>  <span class=c1># 캐시 적중</span>
</span></span><span class=line><span class=cl>cat access.log <span class=p>|</span> grep -c <span class=s1>&#39;MISS&#39;</span> <span class=c1># 캐시 미스</span>
</span></span></code></pre></td></tr></table></div></div><p>또는 <code>log_format</code> 설정에 <code>$upstream_cache_status</code> 추가 후:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=line><span class=cl><span class=k>log_format</span> <span class=s>main</span> <span class=s>&#39;</span><span class=nv>$remote_addr</span> <span class=s>-</span> <span class=nv>$upstream_cache_status</span> <span class=s>-</span> <span class=nv>$request&#39;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>계산</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-25-1><a class=lnlinks href=#hl-25-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Hit Ratio = (HIT / (HIT + MISS + BYPASS + EXPIRED)) × 100
</span></span></code></pre></td></tr></table></div></div><h5 id=최적화-전략>최적화 전략<a hidden class=anchor aria-hidden=true href=#최적화-전략>#</a></h5><table><thead><tr><th>문제 원인</th><th>최적화 전략</th></tr></thead><tbody><tr><td>캐시 대상이 안 맞음 (POST, 쿼리 포함 요청)</td><td>정적 리소스 또는 GET 요청에 대해서만 캐싱 허용</td></tr><tr><td>캐시 만료 설정 미흡</td><td><code>proxy_cache_valid</code> 지시어로 TTL 명확히 설정</td></tr><tr><td>조건부 요청 미처리</td><td><code>If-Modified-Since</code>, <code>ETag</code> 활용</td></tr><tr><td>정적 파일 캐싱 누락</td><td><code>location</code> 별로 <code>proxy_cache</code> 또는 <code>expires</code> 지시어 분리 적용</td></tr><tr><td>캐시 무효화 전략 부족</td><td>버전 관리 기반 URL 적용 (e.g. <code>/assets/main.js</code>)</td></tr></tbody></table><h4 id=cdn-content-delivery-network>CDN (Content Delivery Network)<a hidden class=anchor aria-hidden=true href=#cdn-content-delivery-network>#</a></h4><p><strong>CDN Provider 로그 or 콘솔에서 제공</strong></p><ul><li><strong>Cloudflare</strong>: Cache Hit Ratio</li><li><strong>AWS CloudFront</strong>: <code>x-cache</code> 헤더 (<code>Hit from cloudfront</code>, <code>Miss from cloudfront</code>)</li><li><strong>Akamai</strong>: EdgeHitRatio, MidgressHitRatio 등</li></ul><p><strong>계산</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Cache Hit Ratio = (Edge Hits / Total Requests) × 100
</span></span></code></pre></td></tr></table></div></div><h5 id=최적화-전략-1>최적화 전략<a hidden class=anchor aria-hidden=true href=#최적화-전략-1>#</a></h5><table><thead><tr><th>문제 원인</th><th>최적화 전략</th></tr></thead><tbody><tr><td>캐시 무효화 너무 잦음</td><td>Immutable 정책 적용 (<code>Cache-Control: max-age=31536000, immutable</code>)</td></tr><tr><td>쿼리스트링별 캐시 불가</td><td>CDN 캐시 설정에서 쿼리스트링 무시 or 정규화 설정 적용</td></tr><tr><td>요청 헤더 조건 과다</td><td><code>Vary</code> 헤더 최소화 (<code>Accept-Encoding</code> 만 사용 등)</td></tr><tr><td>오리진 TTL 설정 미흡</td><td><code>Cache-Control</code>, <code>Expires</code> 헤더를 명확하게 지정</td></tr><tr><td>HTTP → HTTPS 이중 요청</td><td>리다이렉션 캐싱 전략 설정 or HTTPS Only 정책 적용</td></tr></tbody></table><h4 id=application-layer-cache>Application Layer Cache<a hidden class=anchor aria-hidden=true href=#application-layer-cache>#</a></h4><p><strong>애플리케이션 로그 또는 미들웨어 계층에서 직접 수집</strong></p><p>예시: Python (Flask/Redis 조합)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-27-1><a class=lnlinks href=#hl-27-1>1</a>
</span><span class=lnt id=hl-27-2><a class=lnlinks href=#hl-27-2>2</a>
</span><span class=lnt id=hl-27-3><a class=lnlinks href=#hl-27-3>3</a>
</span><span class=lnt id=hl-27-4><a class=lnlinks href=#hl-27-4>4</a>
</span><span class=lnt id=hl-27-5><a class=lnlinks href=#hl-27-5>5</a>
</span><span class=lnt id=hl-27-6><a class=lnlinks href=#hl-27-6>6</a>
</span><span class=lnt id=hl-27-7><a class=lnlinks href=#hl-27-7>7</a>
</span><span class=lnt id=hl-27-8><a class=lnlinks href=#hl-27-8>8</a>
</span><span class=lnt id=hl-27-9><a class=lnlinks href=#hl-27-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>cache_hit</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>cache_miss</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>redis</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>cache_hit</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>cache_miss</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>hit_ratio</span> <span class=o>=</span> <span class=n>cache_hit</span> <span class=o>/</span> <span class=p>(</span><span class=n>cache_hit</span> <span class=o>+</span> <span class=n>cache_miss</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=최적화-전략-2>최적화 전략<a hidden class=anchor aria-hidden=true href=#최적화-전략-2>#</a></h5><table><thead><tr><th>문제 원인</th><th>최적화 전략</th></tr></thead><tbody><tr><td>TTL 이 짧거나 무한 없음</td><td>TTL 적절 설정, Lazy Expiration 도입</td></tr><tr><td>API 별 캐시 전략 미설정</td><td>요청 경로/파라미터 기반의 캐시 스코프 분리 (<code>cache_key</code>)</td></tr><tr><td>데이터 일관성 이슈</td><td>Write-Through 또는 Write-Behind 전략 적용</td></tr><tr><td>복잡한 캐시 무효화</td><td><code>Tag-based Invalidation</code> 또는 버전 기반 전략 적용</td></tr><tr><td>불필요한 캐시 사용</td><td>조회 빈도 낮은 리소스는 캐시에서 제외</td></tr></tbody></table><h4 id=캐시-적중률-hit-ratio-측정-및-모니터링>캐시 적중률 (Hit Ratio) 측정 및 모니터링<a hidden class=anchor aria-hidden=true href=#캐시-적중률-hit-ratio-측정-및-모니터링>#</a></h4><table><thead><tr><th>항목</th><th>설명</th><th>대표 도구</th></tr></thead><tbody><tr><td><strong>Hit Rate (%)</strong></td><td>총 요청 중 캐시 Hit 비율</td><td>Prometheus + Grafana</td></tr><tr><td><strong>Latency</strong></td><td>캐시 응답 시간 측정</td><td>Redis Insight, Datadog</td></tr><tr><td><strong>Memory Usage</strong></td><td>캐시 메모리 사용량</td><td>Redis CLI, CloudWatch</td></tr><tr><td><strong>Eviction Count</strong></td><td>LRU/LFU 로 제거된 항목 수</td><td>Redis INFO, Metrics 분석</td></tr></tbody></table><h3 id=분류-기준에-따른-종류-및-유형>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형>#</a></h3><table><thead><tr><th><strong>분류 기준</strong></th><th><strong>유형</strong></th><th><strong>설명</strong></th><th><strong>특징 및 사용 사례</strong></th></tr></thead><tbody><tr><td><strong>1. 위치 기준</strong></td><td>클라이언트 캐시 (브라우저, 모바일 등)</td><td>사용자 디바이스 내 저장</td><td>오프라인 지원, 네트워크 절감. 예: PWA, Service Worker</td></tr><tr><td></td><td>서버/애플리케이션 캐시</td><td>서버 내부 메모리나 프레임워크 수준의 캐시</td><td>빠른 응답. 예: Caffeine, Spring Cache</td></tr><tr><td></td><td>프록시/중간 캐시 (CDN, Reverse Proxy)</td><td>서버 앞단의 중계 캐시 구조</td><td>다수 사용자 공유. 예: Cloudflare, Nginx</td></tr><tr><td></td><td>DB 앞단 캐시 (RDB, NoSQL)</td><td>쿼리 결과를 별도 메모리에 저장</td><td>데이터베이스 부하 완화. 예: Redis, Memcached</td></tr><tr><td><strong>2. 저장 방식 기준</strong></td><td>인메모리 (RAM 기반)</td><td>휘발성 고속 저장소</td><td>빠른 처리, 비영속. 예: Redis, Guava Cache</td></tr><tr><td></td><td>디스크 기반</td><td>SSD, HDD 등 영속성 캐시</td><td>대용량, 느리지만 안정적. 예: OS 파일 캐시, SSD 버퍼 캐시</td></tr><tr><td></td><td>하이브리드 (메모리 + 디스크)</td><td>두 저장소 조합</td><td>균형 있는 성능. 예: Ehcache Tiered Storage</td></tr><tr><td><strong>3. 아키텍처 기준</strong></td><td>중앙집중형</td><td>단일 노드에서 캐시 운용</td><td>구조 단순, SPOF 존재</td></tr><tr><td></td><td>분산형</td><td>여러 노드에 캐시 데이터 분산</td><td>확장성, 고가용성. 예: Redis Cluster, Hazelcast</td></tr><tr><td></td><td>계층형 (L1, L2, L3)</td><td>로컬, 공유, 글로벌 등 단계별 캐시 구성</td><td>L1(Local), L2(Dist), L3(CDN). 속도/부하 분산</td></tr><tr><td><strong>4. 운영 방식 기준</strong></td><td>로컬 캐시</td><td>애플리케이션 내부에만 존재하는 단일 인스턴스 캐시</td><td>빠르지만 공유 불가</td></tr><tr><td></td><td>분산 캐시</td><td>여러 서버가 공유하는 캐시</td><td>세션 공유, 마이크로서비스에서 중요</td></tr><tr><td></td><td>글로벌 캐시</td><td>지리적 분산된 글로벌 엣지에 위치한 캐시</td><td>사용자 위치 기반 응답 최적화. 예: Cloud CDN</td></tr><tr><td><strong>5. 정책 기준</strong></td><td>LRU / LFU / FIFO / ARC / CLOCK</td><td>교체 알고리즘에 따른 분류</td><td>적중률 최적화 전략. 워크로드 기반 선택 필요</td></tr><tr><td></td><td>TTL / 수동 무효화 / 이벤트 기반</td><td>만료/삭제 방식</td><td>자동 무효화 또는 API 기반 삭제</td></tr><tr><td></td><td>Cache-Aside / Write-Through / Write-Behind / Refresh-Ahead</td><td>읽기/쓰기 시 캐시 연동 방식 분류</td><td>사용 빈도, 일관성, 쓰기 비용에 따라 선택</td></tr><tr><td><strong>6. 일관성 기준</strong></td><td>Strong / Eventual / Causal</td><td>분산 캐시 간 데이터 정합성 보장 수준</td><td>트레이드오프 고려. 강한 일관성은 지연, 최종 일관성은 성능 최적화</td></tr><tr><td><strong>7. 구현 수준 기준</strong></td><td>하드웨어 캐시 (CPU, L1-L3)</td><td>물리적 레벨의 고속 캐시 구조</td><td>프로세서 최적화. 예: L1/L2/L3 캐시</td></tr><tr><td></td><td>OS 캐시 (버퍼 캐시, 페이지 캐시)</td><td>운영체제 단에서 수행되는 I/O 최적화</td><td>파일 시스템 I/O 최적화</td></tr><tr><td></td><td>애플리케이션 캐시</td><td>프레임워크/로직 기반의 도메인 캐싱 구조</td><td>비즈니스 로직 최적화. 예: 세션, 사용자 권한, 권장 알고리즘 결과 등</td></tr></tbody></table><ul><li><p><strong>위치 기준</strong>은 사용자/서버/중간/데이터베이스 앞단 등 물리적으로 어디에서 캐시가 적용되는지에 따른 구분이다. 클라이언트는 네트워크 절감, 서버는 응답 속도, CDN 은 글로벌 성능 최적화로 이어진다.</p></li><li><p><strong>저장 방식 기준</strong>은 캐시가 데이터를 저장하는 매체 (RAM, Disk 등) 에 따른 분류로, 성능과 비용의 균형을 고려한 선택이 요구된다. 하이브리드 방식은 엔터프라이즈 환경에서 자주 사용된다.</p></li><li><p><strong>아키텍처 기준</strong>은 캐시 시스템을 단일 또는 분산 구조로 구성하는 방식이며, <strong>확장성, 고가용성, 장애 대응</strong> 등의 고려 요소와 직접 연결된다.</p></li><li><p><strong>운영 방식 기준</strong>은 로컬/분산/글로벌 환경에서 캐시의 범위와 공유 방식에 따라 나뉘며, <strong>세션 공유, 클라우드 스케일 서비스</strong>에서 매우 중요한 기준이다.</p></li><li><p><strong>정책 기준</strong>은 캐시 데이터를 언제 어떻게 저장·삭제·갱신할지에 대한 전략으로, 실무에서 가장 민감하게 다뤄지는 부분이다. 교체 알고리즘, TTL 정책, Read/Write 전략 등을 종합적으로 구성해야 한다.</p></li><li><p><strong>일관성 기준</strong>은 캐시와 원본 간의 동기화 수준을 의미하며, 성능과 정합성 사이의 트레이드오프를 결정한다. 분산 시스템에서는 강한 일관성보다 최종 일관성이 현실적인 선택이 될 수 있다.</p></li><li><p><strong>구현 수준 기준</strong>은 캐시가 동작하는 계층 (하드웨어, OS, 앱) 에 따라 기능과 목적이 달라지며, 시스템 설계 시 다양한 계층에 걸쳐 캐시를 고려해야 함을 보여준다.</p></li></ul><h4 id=위치-기준>위치 기준<a hidden class=anchor aria-hidden=true href=#위치-기준>#</a></h4><table><thead><tr><th>위치 분류</th><th>설명</th><th>기술/도구 예시</th><th>특징</th></tr></thead><tbody><tr><td><strong>클라이언트 캐시</strong></td><td>사용자 디바이스 (브라우저, 모바일 등) 에 저장</td><td>Browser Cache, Service Worker, PWA</td><td>사용자 개인 단위, 오프라인 사용 가능</td></tr><tr><td><strong>서버/애플리케이션 캐시</strong></td><td>서버 프로세스 내 메모리 또는 프레임워크 수준에서 수행</td><td>Spring Cache, Django Cache, Guava</td><td>가장 빠름, 인스턴스 단위</td></tr><tr><td><strong>프록시/중간 캐시</strong></td><td>CDN, Reverse Proxy 등 요청 중간자 위치에서 응답 캐싱</td><td>Cloudflare, Akamai, Nginx</td><td>사용자 다수 공유, 글로벌 커버리지</td></tr><tr><td><strong>DB 앞단 캐시</strong></td><td>데이터베이스 질의 결과나 조회 집약 데이터를 별도 메모리에 캐싱</td><td>Redis, Memcached, DAX (AWS)</td><td>DB 오프로딩, 높은 캐시 적중율 가능</td></tr></tbody></table><h5 id=전략-선택-매트릭스>전략 선택 매트릭스<a hidden class=anchor aria-hidden=true href=#전략-선택-매트릭스>#</a></h5><table><thead><tr><th>구분</th><th>클라이언트 캐시</th><th>서버/애플리케이션 캐시</th><th>프록시/중간 캐시</th><th>DB 앞단 캐시</th></tr></thead><tbody><tr><td><strong>적용 위치</strong></td><td>사용자 디바이스</td><td>WAS / 백엔드 서버 내부</td><td>CDN, Load Balancer 앞단</td><td>DB 와 백엔드 사이</td></tr><tr><td><strong>응답 속도</strong></td><td>매우 빠름 (로컬)</td><td>빠름</td><td>빠름</td><td>중간 (네트워크 영향 있음)</td></tr><tr><td><strong>일관성 관리</strong></td><td>낮음 (갱신 제어 어려움)</td><td>비교적 쉬움</td><td>TTL/무효화 API 로 가능</td><td>갱신 트리거/Write 전략 필요</td></tr><tr><td><strong>스케일</strong></td><td>사용자의 수만큼 (자동 분산)</td><td>서버 수만큼</td><td>엣지 노드/글로벌 분산 가능</td><td>고정 노드 기반 (클러스터 구성 가능)</td></tr><tr><td><strong>스마트 처리 전략</strong></td><td>HTML5 Storage, Cache API 등 사용</td><td>애노테이션 기반, 조건 캐싱 설정 가능</td><td>경로 기반, 콘텐츠 기반 TTL, PURGE 지원</td><td>조건 기반 조회/저장, 캐시 갱신 전략 선택</td></tr><tr><td><strong>적합한 콘텐츠 유형</strong></td><td>이미지, JS/CSS, SPA 정적 데이터</td><td>DB 조회 결과, 인증 정보, 도메인 객체</td><td>정적 자원, API 응답 전체</td><td>쿼리 결과, JSON 응답, 비정형 데이터</td></tr><tr><td><strong>예시 기술</strong></td><td>Service Worker, Cache API</td><td>Spring Cache, Guava</td><td>Cloudflare, Fastly, Varnish</td><td>Redis, Memcached, AWS ElastiCache</td></tr></tbody></table><h5 id=실무-시스템-캐시-아키텍처-구성도>실무 시스템 캐시 아키텍처 구성도<a hidden class=anchor aria-hidden=true href=#실무-시스템-캐시-아키텍처-구성도>#</a></h5><pre class=mermaid>flowchart TD
  subgraph 클라이언트 [&#34;클라이언트&#34;]
    A[브라우저 / 앱] --&gt; A1[&#34;클라이언트 캐시\n(LocalStorage, SW)&#34;]
  end

  subgraph 네트워크 [&#34;네트워크 경계 (CDN / 리버스 프록시)&#34;]
    A1 --&gt; B[&#34;CDN / Reverse Proxy 캐시\n(Cloudflare, Nginx)&#34;]
  end

  subgraph 백엔드 [&#34;백엔드 시스템&#34;]
    B --&gt; C[&#34;WAS 캐시\n(Spring Cache, Django)&#34;]
    C --&gt; D[&#34;분산 캐시\n(Redis, Memcached)&#34;]
    D --&gt; E[&#34;DB\n(PostgreSQL, MySQL)&#34;]
    E -.-&gt; D
  end

  %% 설명 박스 노드 사용
  Note1[📌 DB 변경 시 → 캐시 무효화 트리거 발생]
  E --&gt; Note1
</pre><h5 id=위치별-캐시-계층-간-상호-연계-흐름도>위치별 캐시 계층 간 상호 연계 흐름도<a hidden class=anchor aria-hidden=true href=#위치별-캐시-계층-간-상호-연계-흐름도>#</a></h5><table><thead><tr><th>저장 방식</th><th>설명</th><th>대표 기술 / 예시</th><th>특징 및 사용 사례</th></tr></thead><tbody><tr><td>인메모리</td><td>RAM 기반으로 매우 빠르고 휘발성이 있음</td><td>Redis, Memcached, Caffeine, Guava</td><td>초저지연 처리, 임시 세션/쿼리 캐시</td></tr><tr><td>디스크 기반</td><td>SSD/HDD 등의 영구 저장소 사용, 다소 느리지만 대용량 가능</td><td>RocksDB, OS Page Cache, Varnish Disk Cache</td><td>영속적 데이터 캐시, 이미지 CDN</td></tr><tr><td>하이브리드</td><td>메모리 + 디스크 조합으로 계층화된 저장 구조</td><td>Ehcache Tiered Store, Apache Ignite</td><td>메모리 오버플로 방지, 자주 사용하는 데이터만 RAM</td></tr><tr><td>NVRAM 기반</td><td>비휘발성 메모리로 메모리와 저장소의 중간 성능</td><td>Intel Optane Persistent Memory</td><td>극한 성능 요구 환경, 고신뢰 시스템 (High-Freq Trading 등)</td></tr><tr><td>객체 스토리지 기반</td><td>캐시와 별개로 대용량 블롭 데이터 객체 저장소 연계 사용</td><td>AWS S3 + Cache, GCS + CDN</td><td>이미지/동영상 등 정적 파일 캐싱</td></tr></tbody></table><h4 id=저장-방식-기준>저장 방식 기준<a hidden class=anchor aria-hidden=true href=#저장-방식-기준>#</a></h4><h5 id=전략-선택-매트릭스-1>전략 선택 매트릭스<a hidden class=anchor aria-hidden=true href=#전략-선택-매트릭스-1>#</a></h5><table><thead><tr><th>기준 항목</th><th>In-Memory</th><th>Disk-Based</th><th>Hybrid</th><th>NVRAM-Based</th><th>Object Storage 연계</th></tr></thead><tbody><tr><td>성능 (Latency)</td><td>매우 빠름 (µs 단위)</td><td>느림 (ms 단위)</td><td>메모리 캐시 Hit 시 빠름</td><td>메모리보다 느림, 디스크보다 빠름</td><td>낮음 (오브젝트 전송 지연 존재)</td></tr><tr><td>영속성 (Persistence)</td><td>휘발성</td><td>영속성 보장</td><td>조건부 영속성 (디스크에만 해당)</td><td>영속성 보장</td><td>영속성 보장</td></tr><tr><td>데이터 크기</td><td>제한적 (RAM 용량 한계)</td><td>대용량 가능</td><td>유연한 확장</td><td>제한적 (고비용)</td><td>대용량 가능</td></tr><tr><td>캐시 교체 전략</td><td>필요 (LRU, LFU 등)</td><td>옵션 (자체 GC/회수)</td><td>메모리 계층만 교체 필요</td><td>미지원 또는 고급 알고리즘 필요</td><td>CDN 기반 TTL, 설정 기반</td></tr><tr><td>동시성/처리량</td><td>높음 (멀티스레드 처리 가능)</td><td>중간 (I/O 병목)</td><td>유동적 (Hit/Miss 비율에 따라)</td><td>높음</td><td>낮음 (대용량 처리 불가)</td></tr><tr><td>사용 사례</td><td>세션, 인증, 쿼리 캐시</td><td>정적 파일 캐시, 메타데이터</td><td>금융 거래 이력, 대규모 배치 처리 로그</td><td>초고속 트랜잭션, 리스크 분석 등</td><td>이미지, 영상, 대형 CSV 등 정적 객체</td></tr></tbody></table><h5 id=실무-시스템-캐시-아키텍처-구성도-1>실무 시스템 캐시 아키텍처 구성도<a hidden class=anchor aria-hidden=true href=#실무-시스템-캐시-아키텍처-구성도-1>#</a></h5><pre class=mermaid>flowchart LR
  subgraph &#34;Fast Path (핫 데이터)&#34;
    A1[Application] --&gt; B1[&#34;In-Memory Cache (Redis, Guava)&#34;]
  end

  subgraph &#34;Cold Path (콜드 데이터)&#34;
    B1 --&gt; C1[&#34;Hybrid Cache (Ehcache Tiered Store)&#34;]
    C1 --&gt; D1[&#34;Disk-Based Cache (RocksDB)&#34;]
  end

  subgraph &#34;Blob Path (정적 객체)&#34;
    A1 --&gt; E1[&#34;Object Cache CDN (Cloudflare, Fastly)&#34;]
    E1 --&gt; F1[S3 / GCS / OSS]
  end
</pre><blockquote><p>☑️ 적용 예시:</p><ul><li>Redis: 사용자 세션, 쿼리 결과</li><li>Ehcache + 디스크: 배치 처리 결과, 거래 로그</li><li>CDN + S3: 정적 자산 (HTML, 이미지, 동영상)</li></ul></blockquote><h5 id=결론-및-설계-적용-가이드>결론 및 설계 적용 가이드<a hidden class=anchor aria-hidden=true href=#결론-및-설계-적용-가이드>#</a></h5><table><thead><tr><th>활용 목적</th><th>추천 저장 방식</th></tr></thead><tbody><tr><td>초고속 요청 응답이 필요한 경우</td><td>In-Memory (Redis, Guava)</td></tr><tr><td>영속성이 필요하고 대용량 로그 저장 시</td><td>Disk-Based (RocksDB, LevelDB)</td></tr><tr><td>메모리 + 디스크 균형 필요</td><td>Hybrid (Ehcache Tiered)</td></tr><tr><td>초고속 + 영속성 모두 필요</td><td>NVRAM-Based (Intel PMEM)</td></tr><tr><td>이미지/동영상 등 정적 자산</td><td>CDN + Object Storage (S3, GCS 등)</td></tr></tbody></table><h4 id=아키텍처-기준>아키텍처 기준<a hidden class=anchor aria-hidden=true href=#아키텍처-기준>#</a></h4><table><thead><tr><th>아키텍처 유형</th><th>설명</th><th>대표 기술 / 예시</th><th>주요 특징</th></tr></thead><tbody><tr><td><strong>중앙집중형 (Centralized)</strong></td><td>하나의 노드 (서버/인스턴스) 에 캐시 저장 및 관리. 단일 진입점</td><td>단일 Redis 인스턴스, JVM 내 Guava</td><td>관리 용이, SPOF 위험</td></tr><tr><td><strong>분산형 (Distributed)</strong></td><td>여러 노드 간 캐시 데이터 분산 저장. 클러스터 기반 복제 및 파티셔닝 지원</td><td>Redis Cluster, Hazelcast, Apache Ignite</td><td>고가용성, 수평 확장</td></tr><tr><td><strong>계층형 (Tiered / Hierarchical)</strong></td><td>L1-L3 등 계층별로 캐시 구조를 구성. 로컬/공유/글로벌 캐시 등으로 나뉘며 캐시 적중률을 극대화함</td><td>CPU L1-L3, CDN + Redis + Local Cache</td><td>캐시 미스 최소화, 빠른 경로 우선 처리</td></tr></tbody></table><pre class=mermaid>graph TD
  A[Architecture-Based Caching]

  A1[Centralized Cache] --&gt; A
  A2[Distributed Cache] --&gt; A
  A3[&#34;Hierarchical (Tiered) Cache&#34;] --&gt; A

  A1 --&gt; A1a[Single Redis Node, In-App Guava]
  A2 --&gt; A2a[Redis Cluster, Hazelcast, Ignite]
  A3 --&gt; A3a[L1: In-Process]
  A3 --&gt; A3b[&#34;L2: Shared Cache (e.g., Redis)&#34;]
  A3 --&gt; A3c[L3: CDN / Global Cache]
</pre><h5 id=계층형-tiered--hierarchical-의-캐시-계층>계층형 (Tiered / Hierarchical) 의 캐시 계층<a hidden class=anchor aria-hidden=true href=#계층형-tiered--hierarchical-의-캐시-계층>#</a></h5><table><thead><tr><th><strong>계층</strong></th><th><strong>위치</strong></th><th><strong>기술 예시</strong></th><th><strong>역할 및 목적</strong></th></tr></thead><tbody><tr><td><strong>L1</strong></td><td>클라이언트 / 프로세스 내부</td><td><code>Guava</code>, <code>Caffeine</code>, <code>localStorage</code></td><td>가장 빠른 접근, 프로세스 단위 캐시</td></tr><tr><td><strong>L2</strong></td><td>서버 측 인메모리 or 분산 캐시</td><td><code>Redis</code>, <code>Memcached</code>, <code>Hazelcast</code></td><td>서버/서비스 간 공유, 고속 응답 유지</td></tr><tr><td><strong>L3</strong></td><td>네트워크 엣지 / CDN / 프록시</td><td><code>Cloudflare</code>, <code>Akamai</code>, <code>Varnish</code>, <code>CloudFront</code></td><td>글로벌 사용자 응답 속도 최적화, 네트워크 트래픽 절감</td></tr></tbody></table><p>일반적으로 <code>L1</code> 은 캐시 적중률을 높이기 위해 짧은 TTL 을 사용하며, <code>L2</code> 는 중앙 공유용으로 중간 TTL, <code>L3</code> 는 상대적으로 길고 광범위한 정적 콘텐츠에 적합한 TTL 을 설정한다.</p><h5 id=전략-선택-매트릭스-2>전략 선택 매트릭스<a hidden class=anchor aria-hidden=true href=#전략-선택-매트릭스-2>#</a></h5><table><thead><tr><th>항목</th><th>중앙집중형 (Centralized)</th><th>분산형 (Distributed)</th><th>계층형 (Hierarchical)</th></tr></thead><tbody><tr><td>구조 복잡도</td><td>낮음</td><td>중간~높음</td><td>높음 (계층 설계 필요)</td></tr><tr><td>성능</td><td>빠름 (로컬 접근 시)</td><td>네트워크 병목 고려 필요</td><td>L1 Hit 시 매우 빠름, L2/L3 로 fallback</td></tr><tr><td>확장성 및 가용성</td><td>낮음 (SPOF 존재)</td><td>높음 (Shard & Replication 지원)</td><td>높음 (단계별로 확장 가능, CDN 연동 포함)</td></tr><tr><td>장애 허용성 (Fault Tolerance)</td><td>낮음</td><td>높음</td><td>높음 (L1 Miss 시 L2/L3 fallback)</td></tr><tr><td>일관성 관리</td><td>쉬움 (단일 노드 관리)</td><td>복잡 (데이터 정합성 유지 필요)</td><td>계층 간 TTL/정책 조율 필요</td></tr><tr><td>응답 속도</td><td>빠름 (단일 진입)</td><td>중간 (노드 간 조회 포함)</td><td>빠름~중간 (적중률에 따라 다름)</td></tr><tr><td>대표 기술 예시</td><td>단일 Redis, Ehcache</td><td>Redis Cluster, Ignite, Hazelcast</td><td>L1(Guava), L2(Redis), L3(Cloud CDN)</td></tr></tbody></table><h5 id=실무-시스템-캐시-아키텍처-구성도-2>실무 시스템 캐시 아키텍처 구성도<a hidden class=anchor aria-hidden=true href=#실무-시스템-캐시-아키텍처-구성도-2>#</a></h5><pre class=mermaid>flowchart TD
  subgraph Application
    A1[서비스 인스턴스] --&gt; A2[&#34;In-Process L1 Cache (e.g., Guava)&#34;]
  end

  subgraph Caching Layer
    A2 --&gt; B1[&#34;Shared L2 Cache (Redis Cluster)&#34;]
    B1 --&gt; C1[&#34;Global L3 Cache (Cloud CDN)&#34;]
  end

  subgraph Persistence
    C1 --&gt; D1[Database / Blob Storage]
  end
</pre><blockquote><p>실제 적용 시나리오:</p><ul><li>L1 캐시는 요청 처리 전 빠른 응답을 위해 메모리 사용 (1ms 이내)</li><li>L2 캐시는 분산 캐시로 서비스 간 공유 (수 ms ~ 10ms)</li><li>L3 캐시는 이미지/정적 자산/정형 API 응답을 글로벌 CDN 에서 캐싱 (수십 ms)</li></ul></blockquote><h5 id=결론-및-전략-적용-가이드>결론 및 전략 적용 가이드<a hidden class=anchor aria-hidden=true href=#결론-및-전략-적용-가이드>#</a></h5><table><thead><tr><th>조건/환경</th><th>추천 아키텍처</th></tr></thead><tbody><tr><td>단일 서버 환경, 빠른 응답이 필요할 때</td><td>중앙집중형 (In-Memory, Local Cache)</td></tr><tr><td>다수 서버, 고가용성, 세션 공유 필요할 때</td><td>분산형 (Redis Cluster, Ignite)</td></tr><tr><td>고부하 서비스, 정적 자산 및 API 최적화 필요 시</td><td>계층형 (L1 + L2 + CDN 구조)</td></tr></tbody></table><h4 id=운영-방식-기준>운영 방식 기준<a hidden class=anchor aria-hidden=true href=#운영-방식-기준>#</a></h4><table><thead><tr><th>운영 방식 유형</th><th>설명</th><th>주요 특징</th><th>대표 기술 / 사용 사례</th></tr></thead><tbody><tr><td><strong>로컬 캐시 (Local Cache)</strong></td><td>애플리케이션 인스턴스 내부에만 존재하는 캐시</td><td>빠른 접근, 공유 불가</td><td>Java Guava, Spring Local Cache</td></tr><tr><td><strong>분산 캐시 (Distributed Cache)</strong></td><td>여러 애플리케이션 인스턴스가 공유하는 중앙 혹은 클러스터 캐시 구성</td><td>공유 가능, 확장성 있음</td><td>Redis Cluster, Hazelcast</td></tr><tr><td><strong>글로벌 캐시 (Global Cache)</strong></td><td>지리적으로 분산된 글로벌 노드 (엣지) 에 위치하며 전 세계 사용자 요청에 대응</td><td>전역 사용자 대응</td><td>Cloudflare CDN, Akamai Edge</td></tr><tr><td><strong>하이브리드 캐시 (Hybrid Operation)</strong></td><td>로컬 + 분산 + CDN 을 조합하여 구성. 계층적으로 동작함</td><td>최적의 트레이드오프</td><td>L1(LRU)+L2(Redis)+L3(CDN)</td></tr></tbody></table><pre class=mermaid>graph TD
  A[Operation Scope-Based Caching]

  A1[Local Cache] --&gt; A
  A2[Distributed Cache] --&gt; A
  A3[Global Cache] --&gt; A
  A4[&#34;Hybrid Cache (Multi-level)&#34;] --&gt; A

  A1 --&gt; A1a[Spring Cache, Caffeine]
  A2 --&gt; A2a[Redis Cluster, Hazelcast]
  A3 --&gt; A3a[Cloud CDN, Akamai Edge]
  A4 --&gt; A4a[L1-L3 캐시 통합 구조]
</pre><h5 id=전략-선택-매트릭스-3>전략 선택 매트릭스<a hidden class=anchor aria-hidden=true href=#전략-선택-매트릭스-3>#</a></h5><table><thead><tr><th>항목</th><th>Local Cache</th><th>Distributed Cache</th><th>Global Cache</th><th>Hybrid Cache (계층형)</th></tr></thead><tbody><tr><td>적용 위치</td><td>WAS 인스턴스 내부</td><td>WAS 외부 공유 캐시</td><td>엣지 노드, CDN 등 글로벌 위치</td><td>인스턴스 + 캐시 서버 + CDN 결합</td></tr><tr><td>캐시 공유 여부</td><td>불가능</td><td>가능</td><td>전역 사용자 대상 공유</td><td>범위별 공유 및 계층적 Fallback 가능</td></tr><tr><td>성능</td><td>매우 빠름</td><td>빠름 (네트워크 경유)</td><td>빠름 (지역 CDN 에 따라 다름)</td><td>적중률 따라 유동적, 종합적으로 빠름</td></tr><tr><td>적합 데이터 유형</td><td>세션, 사용자 권한, 인증 등</td><td>쿼리 결과, 세션 공유 등</td><td>정적 자산 (HTML, JS, 이미지 등)</td><td>모든 유형 (정적 + 동적) 혼합</td></tr><tr><td>장애 대응성</td><td>낮음 (인스턴스 단위)</td><td>중간~높음 (클러스터링 가능)</td><td>매우 높음 (글로벌 다중 Region)</td><td>단계별 장애 Fallback 구성 가능</td></tr><tr><td>일관성 관리</td><td>쉬움</td><td>비교적 복잡</td><td>TTL 기반 정합성 유지</td><td>TTL 및 무효화 전략 통합 운영 필요</td></tr><tr><td>기술 예시</td><td>Guava, Spring Cache</td><td>Redis, Hazelcast</td><td>Cloudflare, Akamai CDN</td><td>L1(LRU) + L2(Redis) + L3(CDN) 구조</td></tr></tbody></table><h5 id=실무-시스템-캐시-아키텍처-구성도-3>실무 시스템 캐시 아키텍처 구성도<a hidden class=anchor aria-hidden=true href=#실무-시스템-캐시-아키텍처-구성도-3>#</a></h5><pre class=mermaid>flowchart TD
  subgraph 사용자 요청
    U1[사용자]
  end

  subgraph Edge Layer
    U1 --&gt; G1[&#34;Global Cache (CDN)&#34;]
  end

  subgraph App Layer
    G1 --&gt; L1[&#34;Local Cache (In-Memory)&#34;]
    L1 --&gt; D1[&#34;Distributed Cache (Redis/Hazelcast)&#34;]
    D1 --&gt; DB[(Database)]
  end
</pre><blockquote><p>☑️ 적용 예시 시나리오:</p><ul><li>G1: Cloudflare CDN 에 JS, HTML, 이미지 캐싱</li><li>L1: WAS 내부 Guava 캐시로 세션/토큰 캐싱</li><li>D1: Redis Cluster 에서 쿼리 결과/세션 공유</li><li>Fallback: L1 → L2 → DB 순서로 캐시 미스 처리</li></ul></blockquote><h5 id=운영-방식-기준-아키텍처-전략-선택-가이드>운영 방식 기준 아키텍처 전략 선택 가이드<a hidden class=anchor aria-hidden=true href=#운영-방식-기준-아키텍처-전략-선택-가이드>#</a></h5><table><thead><tr><th>조건 / 요구사항</th><th>추천 운영 방식</th></tr></thead><tbody><tr><td>단일 인스턴스, 빠른 응답 우선</td><td>로컬 캐시 (Local)</td></tr><tr><td>여러 인스턴스간 세션 공유, 일관된 쿼리 캐시 필요</td><td>분산 캐시 (Distributed)</td></tr><tr><td>전 세계 대상 콘텐츠 전달, 빠른 응답 필요</td><td>글로벌 캐시 (CDN 기반)</td></tr><tr><td>다양한 트래픽 레벨에 따라 유연한 전략 필요</td><td>하이브리드 (로컬 + 분산 + CDN)</td></tr></tbody></table><h5 id=글로벌-분산-캐시--cdn-통합>글로벌 분산 캐시 + CDN 통합<a hidden class=anchor aria-hidden=true href=#글로벌-분산-캐시--cdn-통합>#</a></h5><h6 id=설계-구성도>설계 구성도<a hidden class=anchor aria-hidden=true href=#설계-구성도>#</a></h6><pre class=mermaid>graph LR
  subgraph Global-Client
    C1[User A]
    C2[User B]
  end
  subgraph CDN
    EdgeNA[Edge Node NA]
    EdgeEU[Edge Node EU]
  end
  subgraph Origin Cache
    AppA[App Server A + Redis Cluster]
    AppB[App Server B + Redis Cluster]
    DB[(Master DB)]
  end

  C1 --&gt; EdgeNA
  C2 --&gt; EdgeEU
  EdgeNA --&gt; AppA
  EdgeEU --&gt; AppB
  AppA --&gt; RedisCluster
  AppB --&gt; RedisCluster
  RedisCluster --&gt; DB
</pre><ul><li><strong>CDN Edge</strong>: 전역 지역에서 빠른 정적 컨텐츠 제공</li><li><strong>Origin Cache (Redis)</strong>: 동적 데이터 캐싱 수행</li><li><strong>Application Layer</strong>: Push 기반 무효화 및 글로벌 pub/sub 전파</li></ul><h6 id=설계-고려사항>설계 고려사항<a hidden class=anchor aria-hidden=true href=#설계-고려사항>#</a></h6><ul><li><strong>Geo-aware 라우팅</strong>: 지리적으로 가까운 엣지 노드로 라우팅</li><li><strong>Pub/Sub Replication</strong>: 무효화를 위해 Redis Cluster 간 메시지 동기화</li><li><strong>Cache Coherency</strong>: Eventual consistency 기반 보완</li><li><strong>CDN TTL 정책</strong>: 정적 자산 (1h~1d), API 응답 (수 분 단위) 로 TTL 차별화</li></ul><h4 id=정책-기준>정책 기준<a hidden class=anchor aria-hidden=true href=#정책-기준>#</a></h4><table><thead><tr><th>정책 기준 분류</th><th>설명</th><th>대표 전략 / 기술 예시</th></tr></thead><tbody><tr><td><strong>교체 정책 (Eviction Policy)</strong></td><td>캐시 공간 초과 시 어떤 데이터를 제거할 것인지 결정</td><td>LRU, LFU, FIFO, ARC, CLOCK</td></tr><tr><td><strong>만료 정책 (Expiration Policy)</strong></td><td>TTL(Time To Live), 수동/이벤트 기반 무효화</td><td>TTL 설정, API 삭제, Pub/Sub 기반 무효화</td></tr><tr><td><strong>쓰기 정책 (Write Policy)</strong></td><td>캐시와 원본 간 쓰기/읽기 동기화 방식</td><td>Cache-Aside, Write-Through, Write-Behind, Refresh-Ahead</td></tr><tr><td><strong>무효화 정책 (Invalidation)</strong></td><td>원본 데이터 변경 시 캐시를 어떻게 무효화할 것인지에 대한 전략</td><td>수동/자동 TTL, Pub/Sub 연동, 이벤트 기반 무효화 등</td></tr><tr><td><strong>사전 로딩 전략 (Preload Policy)</strong></td><td>사용 전에 미리 데이터를 로드하거나 정기 갱신하는 전략</td><td>Refresh-Ahead, Background Refill</td></tr></tbody></table><h4 id=전략-선택-매트릭스-4>전략 선택 매트릭스<a hidden class=anchor aria-hidden=true href=#전략-선택-매트릭스-4>#</a></h4><table><thead><tr><th>정책 유형</th><th>전략 명칭</th><th>설명</th><th>적합 시나리오 / 주의사항</th></tr></thead><tbody><tr><td><strong>Eviction</strong></td><td>LRU (Least Recently Used)</td><td>가장 오래 사용되지 않은 항목 제거</td><td>일반적인 접근 패턴에 적합, 대부분의 프레임워크 기본값</td></tr><tr><td></td><td>LFU (Least Frequently Used)</td><td>가장 적게 사용된 항목 제거</td><td>요청 횟수 기반, Hot 키 캐시 적합</td></tr><tr><td></td><td>ARC / CLOCK</td><td>고급 알고리즘. LRU/LFU 단점 보완</td><td>리소스 제약 높은 시스템, 고성능 요구</td></tr><tr><td><strong>Expiration</strong></td><td>TTL</td><td>항목마다 유효 시간 설정</td><td>단순하지만 TTL 불일치에 주의</td></tr><tr><td></td><td>Idle Timeout</td><td>일정 시간 사용 없으면 제거</td><td>접근 간격이 큰 데이터에 적합</td></tr><tr><td></td><td>Time-based Eviction</td><td>특정 시간 이후 일괄 만료</td><td>주기성 있는 데이터 (예: 뉴스, 쿠폰 등)</td></tr><tr><td><strong>Write</strong></td><td>Cache-Aside</td><td>앱이 먼저 캐시 확인 후 없으면 DB 조회 후 캐시에 저장</td><td>읽기 중심 시스템, 강한 일관성 보장 가능</td></tr><tr><td></td><td>Write-Through</td><td>쓰기 시 캐시에 먼저 저장하고 DB 에도 바로 저장</td><td>쓰기 일관성 유지 필요 시 적합</td></tr><tr><td></td><td>Write-Behind</td><td>캐시에만 저장 후 DB 에 비동기 저장</td><td>성능 최적화에 유리하나 장애 시 데이터 유실 우려</td></tr><tr><td></td><td>Refresh-Ahead</td><td>TTL 만료 전 미리 백그라운드에서 데이터를 갱신</td><td>캐시 미스 방지에 효과적, 로드 패턴 예측 필요</td></tr><tr><td><strong>Invalidation</strong></td><td>TTL Expiry</td><td>TTL 이 지나면 자동 삭제</td><td>기본 무효화 전략으로 가장 단순</td></tr><tr><td></td><td>수동 Invalidate API</td><td>명시적 삭제 API 호출</td><td>데이터 변경 시점에 직접 연동 필요</td></tr><tr><td></td><td>Pub/Sub</td><td>원본 변경 시 이벤트 발행하여 구독 캐시 무효화</td><td>분산 캐시 환경에서 효과적</td></tr><tr><td></td><td>DB Trigger 연계</td><td>DB 변경 이벤트를 통해 캐시 무효화</td><td>실시간 반영 필요 시 적합, 복잡도 있음</td></tr></tbody></table><h4 id=실무-시스템-캐시-아키텍처-구성도-4>실무 시스템 캐시 아키텍처 구성도<a hidden class=anchor aria-hidden=true href=#실무-시스템-캐시-아키텍처-구성도-4>#</a></h4><pre class=mermaid>flowchart TD
  A[Application]

  subgraph Cache Layer
    A --&gt; C1[&#34;In-Memory Cache (Guava / Redis)&#34;]
    C1 --&gt; C2[Eviction Policy: LRU]
    C1 --&gt; C3[Write Policy: Cache-Aside]
    C1 --&gt; C4[Expiration: TTL 60s]
    C1 --&gt; C5[Invalidation: Pub/Sub]
    C1 --&gt; C6[Refresh-Ahead: Background Loader]
  end

  C1 --&gt; DB[(Database)]
  DB --&gt;|DB Trigger| PubSub[Redis Channel]
  PubSub --&gt;|Invalidate Cache| C1
</pre><blockquote><p>☑️ 실무 구성 요약:</p><ul><li><strong>Eviction</strong>: LRU 로 Hot key 유지</li><li><strong>Write</strong>: Cache-Aside 로 원본 우선</li><li><strong>Expiration</strong>: TTL + Refresh-Ahead 병행</li><li><strong>Invalidation</strong>: DB 변경 시 Pub/Sub 로 이벤트 전파 → 캐시 삭제</li></ul></blockquote><h4 id=전략-선택-가이드>전략 선택 가이드<a hidden class=anchor aria-hidden=true href=#전략-선택-가이드>#</a></h4><table><thead><tr><th>상황 / 조건</th><th>추천 정책 조합</th></tr></thead><tbody><tr><td><strong>읽기 많고 쓰기 적은 환경</strong></td><td>Cache-Aside + LRU + TTL</td></tr><tr><td><strong>쓰기 일관성 매우 중요한 경우</strong></td><td>Write-Through + LFU + TTL + API Invalidate</td></tr><tr><td><strong>성능이 최우선이고 약한 일관성 허용 가능</strong></td><td>Write-Behind + Refresh-Ahead + TTL</td></tr><tr><td><strong>멀티 인스턴스 / 마이크로서비스 구조</strong></td><td>Pub/Sub 무효화 + Cache-Aside + TTL</td></tr><tr><td><strong>고정 시간 단위로 정기 갱신 필요</strong></td><td>Time-based Eviction + Scheduled Refresh</td></tr></tbody></table><h3 id=일관성-기준>일관성 기준<a hidden class=anchor aria-hidden=true href=#일관성-기준>#</a></h3><h4 id=일관성-기준에-따른-캐시-유형>일관성 기준에 따른 캐시 유형<a hidden class=anchor aria-hidden=true href=#일관성-기준에-따른-캐시-유형>#</a></h4><table><thead><tr><th>일관성 수준</th><th>정의</th><th>특징 및 트레이드오프</th><th>적용 사례 / 기술</th></tr></thead><tbody><tr><td><strong>Strong Consistency</strong></td><td>항상 최신 상태의 데이터를 보장. 원본 변경 즉시 캐시 반영</td><td>데이터 정합성 보장, 하지만 느린 처리 속도</td><td>금융 시스템, 인증/결제 처리 등</td></tr><tr><td><strong>Eventual Consistency</strong></td><td>일정 시간 후 모든 노드가 일관된 상태로 수렴. 즉시 반영은 아님</td><td>성능 최적화, 지연 허용 시 유리</td><td>SNS 피드, 마이크로서비스 캐시 등</td></tr><tr><td><strong>Causal Consistency</strong></td><td>연산 순서가 보장된 일관성. 관련 연산끼리는 순서를 유지하되, 전역적 일관성은 보장하지 않음</td><td>일부 작업의 정합성 유지, 성능도 고려 가능</td><td>실시간 채팅, 협업 시스템</td></tr><tr><td><strong>Session Consistency</strong></td><td>특정 사용자 세션 내에서는 일관성을 유지하나, 다른 세션에서는 반영이 느릴 수 있음</td><td>사용자 경험 중심, 세션 단위 캐시 적합</td><td>개인화 캐시, 쇼핑몰 추천 상품 등</td></tr><tr><td><strong>Write-Through Consistency</strong></td><td>쓰기 작업이 캐시와 DB 에 동시에 반영되어 항상 일관성을 유지</td><td>강한 일관성 + 성능 저하 위험 있음</td><td>실시간 데이터 저장에 적합</td></tr><tr><td><strong>Stale-Read / TTL 기반 Weak Consistency</strong></td><td>TTL 안에서는 오래된 데이터 반환 허용. 만료 이후 재조회하여 갱신</td><td>빠른 응답 가능, 최신 데이터가 아닐 수 있음</td><td>공공 데이터 조회, 뉴스/통계 정보</td></tr></tbody></table><h4 id=전략-선택-매트릭스-5>전략 선택 매트릭스<a hidden class=anchor aria-hidden=true href=#전략-선택-매트릭스-5>#</a></h4><table><thead><tr><th>기준</th><th>Strong Consistency</th><th>Eventual Consistency</th><th>Causal Consistency</th><th>Session Consistency</th><th>TTL 기반 Weak Consistency</th></tr></thead><tbody><tr><td>일관성 수준</td><td>항상 최신 데이터 보장</td><td>시간차 이후 정합성 수렴</td><td>연산 순서 유지 (동시성 허용)</td><td>세션 범위 정합성 유지</td><td>TTL 만료 전까지는 오염 허용</td></tr><tr><td>응답 속도</td><td>느릴 수 있음</td><td>빠름</td><td>중간 수준</td><td>빠름</td><td>매우 빠름</td></tr><tr><td>캐시 무효화 전략</td><td>실시간 Invalidate API / DB Trigger</td><td>Pub/Sub 이벤트 / TTL</td><td>연산 간 Dependency 관리 필요</td><td>세션 종료/초기화 기반 Invalidate</td><td>TTL 기반 자동 무효화</td></tr><tr><td>쓰기 반영 방식</td><td>Write-Through, Write-Behind</td><td>Cache-Aside</td><td>Cache-Aside + Causal Context</td><td>Session-based 캐시</td><td>Cache-Aside or Preload</td></tr><tr><td>구현 복잡도</td><td>높음</td><td>낮음~중간</td><td>높음</td><td>중간</td><td>낮음</td></tr><tr><td>실무 예시</td><td>결제 승인, 인증 서버</td><td>SNS 타임라인, 알림 메시지</td><td>Google Docs 협업 편집</td><td>사용자 맞춤형 추천 캐시</td><td>지역 날씨, 인기 뉴스</td></tr><tr><td>적용 조건</td><td>정합성 우선</td><td>성능 우선, 약한 일관성 허용</td><td>일부 연산 순서 중요</td><td>사용자 단위 데이터</td><td>일시적 불일치 허용 가능</td></tr></tbody></table><h4 id=실무-시스템-캐시-아키텍처-구성도-5>실무 시스템 캐시 아키텍처 구성도<a hidden class=anchor aria-hidden=true href=#실무-시스템-캐시-아키텍처-구성도-5>#</a></h4><p>아래 구성은 <strong>Strong + Eventual + TTL 기반 캐시 일관성</strong>을 조합한 <strong>하이브리드 구조</strong>.</p><pre class=mermaid>flowchart TD
  U[사용자 요청]
  U --&gt; C1[Application Server]

  subgraph &#34;L1 캐시 (Session 기반)&#34;
    C1 --&gt; L1C[&#34;Local Cache (Session Scope)&#34;]
  end

  subgraph &#34;L2 캐시 (Eventual)&#34;
    L1C --&gt; L2C[&#34;Distributed Cache (Redis Cluster)&#34;]
  end

  subgraph DB 원본
    L2C --&gt; DB[(Primary Database)]
  end

  DB --&gt; PubSub[Event Channel]
  PubSub --&gt; L2C

  DB --&gt;|Trigger| C1
  C1 --&gt;|Invalidate or Refresh| L1C &amp; L2C
</pre><ul><li><strong>L1(Local Cache)</strong>: 세션 캐시. 세션 단위로 일관성 유지 (예: 로그인 정보)</li><li><strong>L2(Redis Cluster)</strong>: Eventual Consistency 기반 분산 캐시 (예: 상품 목록)</li><li><strong>DB</strong>: Strong Consistency 보장. 변경 시 이벤트 발행하여 캐시 무효화</li><li><strong>Pub/Sub</strong>: Redis 나 Kafka 등을 이용한 캐시 정합성 유지용 이벤트 브로드캐스트</li></ul><h4 id=실무-전략-적용-예시>실무 전략 적용 예시<a hidden class=anchor aria-hidden=true href=#실무-전략-적용-예시>#</a></h4><table><thead><tr><th>대상 데이터</th><th>일관성 전략</th><th>캐시 처리 전략</th></tr></thead><tbody><tr><td>로그인/인증 정보</td><td>Strong Consistency</td><td>Write-Through + 실시간 Invalidate</td></tr><tr><td>상품 상세 / 상태 정보</td><td>Eventual + TTL Consistency</td><td>Cache-Aside + TTL 설정</td></tr><tr><td>사용자 맞춤 추천</td><td>Session Consistency</td><td>Local Cache + 세션 만료 시 Invalidate</td></tr><tr><td>뉴스/기상정보 등 외부 연동</td><td>TTL 기반 Weak Consistency</td><td>TTL + Background Refresh-Ahead</td></tr></tbody></table><h4 id=결론-및-선택-가이드>결론 및 선택 가이드<a hidden class=anchor aria-hidden=true href=#결론-및-선택-가이드>#</a></h4><table><thead><tr><th>상황/요건</th><th>적합한 일관성 모델</th></tr></thead><tbody><tr><td>강한 정합성, 부정확 정보 허용 불가</td><td>Strong Consistency + 실시간 무효화</td></tr><tr><td>읽기 중심, 업데이트 빈도 낮음</td><td>TTL 기반 Eventual Consistency</td></tr><tr><td>사용자별 맞춤 데이터, 개인화 세션 중심</td><td>Session Consistency</td></tr><tr><td>협업, 순서가 중요한 실시간 데이터</td><td>Causal Consistency + Context 유지 필요</td></tr></tbody></table><h3 id=구현-수준-기준>구현 수준 기준<a hidden class=anchor aria-hidden=true href=#구현-수준-기준>#</a></h3><table><thead><tr><th>구현 수준</th><th>설명</th><th>주요 기술 예시</th></tr></thead><tbody><tr><td><strong>하드웨어 캐시</strong></td><td>CPU 내부에 있는 물리적 캐시 (L1, L2, L3). 메모리 접근 속도를 보완.</td><td>Intel/AMD CPU Cache (L1~L3), GPU Cache</td></tr><tr><td><strong>운영체제 캐시</strong></td><td>OS 수준에서 I/O 성능 향상을 위해 메모리 내 파일/페이지를 캐싱.</td><td>Page Cache, Buffer Cache, Dentry Cache</td></tr><tr><td><strong>애플리케이션 캐시</strong></td><td>소프트웨어에서 직접 구현하는 로직 기반 캐시. WAS 내에서 동작하며 도메인 데이터 저장.</td><td>Spring Cache, Django Cache, Guava, Caffeine</td></tr><tr><td><strong>프레임워크/미들웨어 캐시</strong></td><td>ORM, API Gateway, 웹서버 등 미들웨어/플랫폼 자체가 제공하는 캐싱 기능.</td><td>Hibernate 2nd Level Cache, GraphQL APQ, NGINX proxy_cache</td></tr><tr><td><strong>데이터 계층 캐시</strong></td><td>DB 또는 그 앞단에서 동작하는 전문 캐시 계층. 쿼리 결과, 상태 데이터 저장에 특화됨.</td><td>Redis, Memcached, AWS DAX, RocksDB</td></tr></tbody></table><h4 id=전략-선택-매트릭스-6>전략 선택 매트릭스<a hidden class=anchor aria-hidden=true href=#전략-선택-매트릭스-6>#</a></h4><table><thead><tr><th>구분</th><th>하드웨어 캐시 (L1~L3)</th><th>운영체제 캐시 (Page/Buffer)</th><th>애플리케이션 캐시</th><th>미들웨어/프레임워크 캐시</th><th>데이터 계층 캐시 (DB 앞단)</th></tr></thead><tbody><tr><td>응답 속도</td><td>나노초 (ns) 수준</td><td>마이크로초 (µs) 수준</td><td>수~수십 마이크로초</td><td>수십~수백 마이크로초</td><td>수백 µs ~ ms</td></tr><tr><td>적용 위치</td><td>CPU 내부</td><td>OS 메모리 공간</td><td>WAS 내부 메모리</td><td>미들웨어 / 프록시 / API 레이어</td><td>DB 또는 DB 앞단의 외부 캐시 계층</td></tr><tr><td>제어 가능성</td><td>없음 (CPU 제어)</td><td>낮음 (OS 에 의존)</td><td>높음 (코드/정책으로 제어 가능)</td><td>보통 (설정 기반 제어)</td><td>높음 (TTL, 정책, 모니터링 가능)</td></tr><tr><td>캐시 대상</td><td>인스트럭션, 메모리 블록</td><td>파일 시스템, 디스크 블록</td><td>도메인 객체, 세션, 쿼리 결과</td><td>API 응답, 트랜잭션 결과, 정적 파일</td><td>쿼리 결과, 상태 객체, 빈번한 키 조회 데이터</td></tr><tr><td>캐시 정책 적용 범위</td><td>프로세서 단위</td><td>커널 단위</td><td>어플리케이션 단위</td><td>미들웨어 단위</td><td>DB 또는 전체 시스템 공유</td></tr><tr><td>일관성 유지 전략</td><td>자동 (하드웨어 coherence)</td><td>Lazy Write or Dirty Page Flush</td><td>TTL, Invalidation, Write-Behind</td><td>Proxy TTL, Conditional Header 등</td><td>TTL + Pub/Sub, Write-Through 등</td></tr><tr><td>장애 복원성 / 가용성</td><td>매우 높음</td><td>높음</td><td>인스턴스 내에 한정됨</td><td>캐시된 응답에 따라 다름</td><td>클러스터/복제 구조로 고가용성</td></tr><tr><td>실무 사례 / 기술</td><td>L1~L3 Cache, GPU Cache</td><td>Linux Page Cache, I/O Cache</td><td>Django Cache, Spring Guava</td><td>Hibernate 2nd Level, GraphQL Persisted</td><td>Redis, Memcached, AWS ElastiCache</td></tr></tbody></table><h4 id=실무-시스템-캐시-아키텍처-구성도-6>실무 시스템 캐시 아키텍처 구성도<a hidden class=anchor aria-hidden=true href=#실무-시스템-캐시-아키텍처-구성도-6>#</a></h4><pre class=mermaid>flowchart TD
  subgraph CPU/OS Layer
    A1[&#34;CPU (L1/L2/L3 Cache)&#34;] --&gt; A2[OS Page Cache]
  end

  subgraph Application Layer
    A2 --&gt; B1[Application Logic]
    B1 --&gt; B2[&#34;Application-Level Cache (e.g., Guava, Caffeine)&#34;]
  end

  subgraph Middleware Layer
    B1 --&gt; C1[ORM / Web Framework Cache]
    B1 --&gt; C2[API Gateway / Reverse Proxy Cache]
  end

  subgraph Data Layer
    C1 --&gt; D1[Redis / Memcached Cache]
    D1 --&gt; D2[Primary Database]
  end
</pre><blockquote><p>☑️ 계층적 캐시 구조 설명:</p><ul><li><strong>A1 ~ A2</strong>: CPU~OS 레벨 자동 최적화 계층</li><li><strong>B2</strong>: WAS 인스턴스 내 캐시 (세션, 조회 결과 등)</li><li><strong>C1, C2</strong>: ORM 및 프록시 서버에서 미들웨어 수준 캐시</li><li><strong>D1</strong>: DB 앞단 고속 캐시 (분산형, TTL, 무효화 지원)</li></ul></blockquote><h4 id=실무-적용-가이드>실무 적용 가이드<a hidden class=anchor aria-hidden=true href=#실무-적용-가이드>#</a></h4><table><thead><tr><th>캐시 계층</th><th>실무 적용 예시 / 전략</th></tr></thead><tbody><tr><td><strong>하드웨어 캐시</strong></td><td>CPU 명령어/데이터 캐시, 메모리 접근 최적화</td></tr><tr><td><strong>운영체제 캐시</strong></td><td>대용량 파일 접근 성능 향상 (ex. WAS log, 정적 파일)</td></tr><tr><td><strong>애플리케이션 캐시</strong></td><td>도메인 객체, 인증 세션, 쿼리 결과 캐시 (TTL + Guava 조합)</td></tr><tr><td><strong>프레임워크 / 미들웨어 캐시</strong></td><td>ORM 2 차 캐시, NGINX reverse proxy_cache 설정 등</td></tr><tr><td><strong>데이터 계층 캐시 (Redis)</strong></td><td>고빈도 조회 키, 쿼리 결과, 상태 객체 (Cache-Aside, Write-Behind 등)</td></tr></tbody></table><h4 id=구현-수준-기준-전략-선택-요약>구현 수준 기준 전략 선택 요약<a hidden class=anchor aria-hidden=true href=#구현-수준-기준-전략-선택-요약>#</a></h4><table><thead><tr><th>요구 조건</th><th>적합한 구현 수준</th></tr></thead><tbody><tr><td>시스템 성능 최적화 (OS/하드웨어 관점)</td><td>하드웨어 캐시 + 운영체제 캐시</td></tr><tr><td>WAS 내부 데이터 반복 조회</td><td>애플리케이션 캐시</td></tr><tr><td>ORM 조회/쿼리 반복 최적화</td><td>프레임워크 미들웨어 캐시</td></tr><tr><td>데이터베이스 트래픽 감소 및 분산 캐시</td><td>Redis/Memcached 데이터 계층 캐시</td></tr></tbody></table><h3 id=기준별-전략-선택-매트릭스>기준별 전략 선택 매트릭스<a hidden class=anchor aria-hidden=true href=#기준별-전략-선택-매트릭스>#</a></h3><table><thead><tr><th>분류 기준</th><th>고려 요소</th><th>권장 전략 / 선택 가이드</th></tr></thead><tbody><tr><td>위치 기준</td><td>사용자 위치, 응답 속도, 네트워크 절감</td><td>- 사용자 단: Client Cache (브라우저)<br>- 다수 사용자: CDN / 프록시</td></tr><tr><td>저장 방식</td><td>휘발성/영속성 여부, 처리 속도, 비용</td><td>- 빠른 응답 필요: In-Memory<br>- 영속성 필요: Hybrid or Disk</td></tr><tr><td>아키텍처 기준</td><td>확장성, 장애 대응, 고가용성</td><td>- 단순 구조: Centralized<br>- 분산 환경: Redis Cluster</td></tr><tr><td>운영 방식</td><td>단일 vs 다중 인스턴스, 세션 공유 필요성</td><td>- 내부 전용: Local Cache<br>- 분산 시스템: Shared / Global</td></tr><tr><td>정책 기준</td><td>데이터 업데이트 주기, 읽기/쓰기 빈도</td><td>- 빈도 높은 읽기: Cache-Aside + TTL<br>- 동기화 필요: Write-Through</td></tr><tr><td>일관성 기준</td><td>데이터 정합성 중요도, 트래픽 크기, 실시간성 요구사항</td><td>- 강한 일관성 필요: Strong<br>- 응답 성능 중요: Eventual</td></tr><tr><td>구현 수준</td><td>병목 위치, 시스템 계층 (CPU/OS/App)</td><td>- 시스템 최적화: Hardware + OS Cache<br>- 앱 최적화: App Cache</td></tr></tbody></table><h3 id=주요-캐싱-기술-비교>주요 캐싱 기술 비교<a hidden class=anchor aria-hidden=true href=#주요-캐싱-기술-비교>#</a></h3><p>다양한 캐시 기술들은 위치, 목적, 성능, 사용성에서 차이가 있으며, 시스템 요구사항에 맞는 기술 선택이 핵심입니다.</p><table><thead><tr><th>기술</th><th>분류</th><th>특징</th><th>사용 예시</th><th>적합한 시나리오</th></tr></thead><tbody><tr><td><strong>Redis</strong></td><td>인메모리 분산 캐시</td><td>빠른 성능, TTL, pub/sub, persistence 지원</td><td>세션 관리, 실시간 데이터 캐시</td><td>대규모 트래픽, 멀티 노드 환경</td></tr><tr><td><strong>Memcached</strong></td><td>인메모리 캐시</td><td>경량, 단순 key-value 저장, 비영속</td><td>API 응답, 짧은 TTL 데이터</td><td>속도 중심의 단순 캐싱</td></tr><tr><td><strong>CDN (Cloudflare, Akamai)</strong></td><td>엣지 캐시</td><td>정적 리소스 캐싱, 전 세계 엣지 배포</td><td>이미지, JS/CSS, HTML</td><td>정적 파일 응답, 웹 자산</td></tr><tr><td><strong>Caffeine (Java)</strong></td><td>로컬 인메모리 캐시</td><td>Java 애플리케이션 내 고성능 LRU 캐시</td><td>요청별 ID, 설정값 저장</td><td>마이크로서비스 내부 캐시</td></tr><tr><td><strong>Guava Cache (Java)</strong></td><td>로컬 인메모리 캐시</td><td>만료, 용량, 동시성 제어 제공</td><td>단건 객체 캐싱</td><td>제한된 메모리 내 캐시</td></tr><tr><td><strong>Hazelcast / Apache Ignite</strong></td><td>분산 인메모리 컴퓨팅 플랫폼</td><td>캐시 외에도 메시징, 연산 분산 지원</td><td>고성능 분산 계산</td><td>대규모 클러스터 환경</td></tr></tbody></table><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>고려사항</strong></th><th><strong>설명</strong></th><th><strong>권장사항</strong></th></tr></thead><tbody><tr><td><strong>1. 캐시 전략 설계</strong></td><td>TTL 정책</td><td>데이터 특성에 따라 생존 시간 (TTL) 을 다르게 설정하여 일관성과 신선도 유지</td><td>정적 데이터는 길게, 동적/민감 데이터는 짧게 설정</td></tr><tr><td></td><td>쓰기 전략 (Write Policy)</td><td>캐시와 원본 간 동기화 방식 선택 (Write-through / Back / Around / Aside)</td><td>데이터 중요도와 일관성 요구에 따라 전략 결정</td></tr><tr><td></td><td>교체 정책 설정</td><td>캐시 초과 시 어떤 데이터를 제거할지 결정하는 정책 (LRU, LFU, FIFO 등)</td><td>데이터 특성에 맞게 혼합 적용 가능 (예: LFU + LRU)</td></tr><tr><td></td><td>캐시 키 설계</td><td>캐시 히트율에 영향을 주는 구조적 요소</td><td><code>{도메인}:{리소스}:{ID}</code> 형태 권장</td></tr><tr><td></td><td>계층화 전략</td><td>L1(Local), L2(Distributed) 등 다계층 구성</td><td>애플리케이션 특성 및 확장성 요구에 따라 조합 설계</td></tr><tr><td><strong>2. 운영 및 모니터링</strong></td><td>성능 지표 추적</td><td>히트율, 미스율, 응답 지연 시간, 메모리 사용률 등 모니터링</td><td>실시간 대시보드 + 알림 시스템 연계</td></tr><tr><td></td><td>콜드 스타트 및 워밍업</td><td>캐시 비어있을 때 초기 성능 저하 방지</td><td>주요 리소스 사전 로딩 전략 활용</td></tr><tr><td></td><td>캐시 오염 방지</td><td>낮은 활용 데이터가 캐시 공간을 차지하는 문제</td><td>접근 빈도 기반 분석, 정기적 캐시 최적화 필요</td></tr><tr><td></td><td>장애 대응 및 복구</td><td>캐시 장애 시 원본 처리 전환, 시스템 연속성 유지</td><td>Circuit Breaker + Fallback 전략 병행</td></tr><tr><td><strong>3. 일관성 및 무효화</strong></td><td>캐시 무효화 정책</td><td>변경된 데이터를 즉시 무효화하여 데이터 불일치 방지</td><td>이벤트 기반 (Pub/Sub, CDC), TTL 병행</td></tr><tr><td></td><td>데이터 일관성 유지</td><td>캐시와 원본 간의 싱크 타이밍 문제 해결</td><td>버전 관리, 해시 검증 전략 병행 가능</td></tr><tr><td></td><td>멀티 테넌시 지원</td><td>다중 사용자 시스템에서의 캐시 데이터 충돌/격리 문제</td><td>네임스페이스 기반 키 설계 및 자원 제한 적용</td></tr><tr><td><strong>4. 자원 및 확장성</strong></td><td>메모리 및 리소스 관리</td><td>캐시 용량 부족 또는 과잉으로 인한 시스템 리스크</td><td>전체 메모리의 20~30% 사용을 권장 시작점으로 설정</td></tr><tr><td></td><td>점진적 확장 전략</td><td>갑작스러운 캐시 볼륨 증가 시 안정성 저하 가능성</td><td>카나리 배포 + 동적 오토스케일링 적용</td></tr><tr><td></td><td>캐싱 대상 선정</td><td>무분별한 캐싱은 효과 저하</td><td>데이터 Hotness 기반 선별 캐싱 수행</td></tr><tr><td></td><td>대용량 객체 처리</td><td>캐시 가능한 데이터의 크기 고려 필요</td><td>압축 적용, Chunk 단위 분할 캐싱 고려</td></tr><tr><td><strong>5. 보안 및 규정</strong></td><td>민감 정보 보호</td><td>캐시 내 민감 정보 노출 우려 (세션, 사용자 정보 등)</td><td>민감 데이터는 암호화 또는 캐싱 제외</td></tr><tr><td></td><td>접근 제어</td><td>역할 또는 테넌트 기반 권한 관리 필요</td><td>Role-based 캐시 접근 정책 적용</td></tr><tr><td></td><td>법적 규제 대응</td><td>GDPR 등 개인 정보 처리 규정 준수 필요</td><td>민감 정보 TTL 짧게 설정, 무효화 로깅 보관</td></tr></tbody></table><ul><li><p><strong>캐시 전략 설계</strong></p></li><li><p><strong>운영 및 모니터링</strong></p></li><li><p><strong>일관성 및 무효화</strong></p></li><li><p><strong>자원 및 확장성</strong><br>캐시가 리소스를 잠식하거나 비효율적으로 사용되면 오히려 장애 요인이 된다. 메모리 사용량, 캐싱 대상, 대용량 처리 방식, 그리고 점진적 확장 전략을 체계적으로 설계해야 한다.</p></li><li><p><strong>보안 및 규정</strong><br>세션, 인증 정보 등 민감 데이터를 다루는 경우 캐시 내 보안 취약점이 될 수 있다. 암호화, 접근 제어, 캐시 제외 처리, 로그 기반 감사 기록 등 보안 요구사항과 법적 컴플라이언스를 함께 고려해야 한다.</p></li></ul><h4 id=캐시-전략-설계>캐시 전략 설계<a hidden class=anchor aria-hidden=true href=#캐시-전략-설계>#</a></h4><p>캐싱의 핵심은 <code>무엇을</code>, <code>언제까지</code>, <code>어떻게</code> 저장하고 제거할지 결정하는 것이다. TTL, 교체 정책, 쓰기 방식, 키 설계 등은 시스템 일관성과 성능을 균형 있게 설계하는 핵심 구성요소다. 계층화를 통해 성능과 확장성을 동시에 확보할 수 있다.</p><h5 id=ttl-정책>TTL 정책<a hidden class=anchor aria-hidden=true href=#ttl-정책>#</a></h5><p>**TTL(Time To Live)**은 캐시에 저장된 데이터가 <strong>얼마 동안 유효한지</strong>를 정의하는 시간 정책이다.<br>데이터가 TTL 시간을 초과하면 <strong>만료된 것으로 간주되며</strong>, 자동 삭제되거나 무효화된다.</p><p><strong>주요 목적</strong>:</p><ul><li><strong>데이터 최신성 유지</strong></li><li><strong>메모리 낭비 방지 (자동 정리)</strong></li><li><strong>정합성 우선 or 성능 우선 전략 가능</strong></li></ul><h6 id=ttl-의-동작-메커니즘>TTL 의 동작 메커니즘<a hidden class=anchor aria-hidden=true href=#ttl-의-동작-메커니즘>#</a></h6><ol><li><p><strong>데이터 저장 시 TTL 을 설정</strong></p><ul><li><code>SET key value EX 60</code> (Redis 예시: 60 초 TTL)</li></ul></li><li><p><strong>요청 시 TTL 체크</strong></p><ul><li>유효하면 → 캐시 HIT (사용 가능)</li><li>만료되면 → 캐시 MISS → 원본 조회 → 캐시에 재저장</li></ul></li><li><p><strong>만료 처리 방식</strong></p><ul><li><strong>Lazy Expiration</strong>: 조회 시 TTL 체크 후 삭제</li><li><strong>Active Expiration</strong>: 주기적으로 TTL 초과 키 스캔 후 제거</li><li><strong>Time Wheel</strong> 등 고성능 만료 관리 기법도 있음</li></ul></li></ol><h6 id=ttl-의-유형별-전략-비교>TTL 의 유형별 전략 비교<a hidden class=anchor aria-hidden=true href=#ttl-의-유형별-전략-비교>#</a></h6><table><thead><tr><th>TTL 전략 유형</th><th>설명</th><th>장점</th><th>단점/주의점</th></tr></thead><tbody><tr><td><strong>고정 TTL</strong></td><td>데이터 저장 시 고정된 TTL 을 설정</td><td>간단함, 성능 예측 용이</td><td>모든 데이터에 동일 TTL 적용 → 비효율적</td></tr><tr><td><strong>동적 TTL</strong></td><td>데이터 특성에 따라 TTL 을 다르게 설정</td><td>데이터 민감도 반영 가능</td><td>설정 복잡도 증가</td></tr><tr><td><strong>슬라이딩 TTL (Idle Timeout)</strong></td><td>접근 시마다 TTL 갱신</td><td>자주 쓰이는 데이터 오래 유지 가능</td><td>실시간 업데이트가 많을수록 갱신 비용 증가</td></tr><tr><td><strong>절대 만료 (Absolute TTL)</strong></td><td>특정 시간까지 유효 (예: 자정까지)</td><td>이벤트성/예약된 만료에 유용</td><td>일괄 만료 시 부하 집중 가능성</td></tr><tr><td><strong>랜덤 TTL (Jittering)</strong></td><td>TTL 범위를 랜덤화하여 분산 처리</td><td>&ldquo;TTL 쓰나미 &ldquo;(동시 만료) 방지 가능</td><td>TTL 설정 기준이 모호할 수 있음</td></tr></tbody></table><h6 id=ttl-정책-설계-시-고려사항>TTL 정책 설계 시 고려사항<a hidden class=anchor aria-hidden=true href=#ttl-정책-설계-시-고려사항>#</a></h6><table><thead><tr><th>항목</th><th>설명</th><th>권장 전략 예시</th></tr></thead><tbody><tr><td><strong>데이터 중요도</strong></td><td>데이터가 최신이어야 할수록 TTL 은 짧게 설정</td><td>금융/주문 상태 → 10~30 초</td></tr><tr><td><strong>조회 빈도</strong></td><td>조회가 많고 변경이 드문 데이터는 TTL 을 길게 설정</td><td>인기 게시물 리스트 → 5~15 분</td></tr><tr><td><strong>데이터 변경 빈도</strong></td><td>자주 바뀌는 데이터는 짧은 TTL, 변경 시 수동 Invalidate 연계 필요</td><td>재고 수량 → TTL + DB 트리거</td></tr><tr><td><strong>서버 부하 고려</strong></td><td>모든 캐시가 동시에 만료되면 원본 서버에 급격한 부하 발생 (&ldquo;Cache Stampede&rdquo;) 예방 필요</td><td>Jittered TTL + Refresh-Ahead</td></tr><tr><td><strong>캐시 저장소 유형</strong></td><td>Redis / Memcached / In-App 등 환경에 따라 TTL 처리 방식 다름</td><td>Redis → EXPIRE / Spring Cache → @Cacheable 설정</td></tr></tbody></table><h6 id=실무-적용-예시-redis-중심>실무 적용 예시 (Redis 중심)<a hidden class=anchor aria-hidden=true href=#실무-적용-예시-redis-중심>#</a></h6><p><strong>Redis TTL 설정 예</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-38-1><a class=lnlinks href=#hl-38-1>1</a>
</span><span class=lnt id=hl-38-2><a class=lnlinks href=#hl-38-2>2</a>
</span><span class=lnt id=hl-38-3><a class=lnlinks href=#hl-38-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>SET user:1234 <span class=s1>&#39;{&#34;name&#34;:&#34;XY&#34;}&#39;</span> EX <span class=m>60</span>
</span></span><span class=line><span class=cl>EXPIRE product:5555 <span class=m>300</span>
</span></span><span class=line><span class=cl>TTL product:5555    <span class=c1># 남은 TTL 조회</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>TTL + Refresh-Ahead 패턴</strong> (Python pseudo-code)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-39-1><a class=lnlinks href=#hl-39-1>1</a>
</span><span class=lnt id=hl-39-2><a class=lnlinks href=#hl-39-2>2</a>
</span><span class=lnt id=hl-39-3><a class=lnlinks href=#hl-39-3>3</a>
</span><span class=lnt id=hl-39-4><a class=lnlinks href=#hl-39-4>4</a>
</span><span class=lnt id=hl-39-5><a class=lnlinks href=#hl-39-5>5</a>
</span><span class=lnt id=hl-39-6><a class=lnlinks href=#hl-39-6>6</a>
</span><span class=lnt id=hl-39-7><a class=lnlinks href=#hl-39-7>7</a>
</span><span class=lnt id=hl-39-8><a class=lnlinks href=#hl-39-8>8</a>
</span><span class=lnt id=hl-39-9><a class=lnlinks href=#hl-39-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_with_ttl</span><span class=p>(</span><span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span> <span class=o>=</span> <span class=n>redis</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>value</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># TTL 만료 → 원본 조회</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span> <span class=o>=</span> <span class=n>query_database</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>redis</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>ex</span><span class=o>=</span><span class=mi>60</span><span class=p>)</span>  <span class=c1># TTL 재설정</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>value</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=ttl-관리-최적화-전략>TTL 관리 최적화 전략<a hidden class=anchor aria-hidden=true href=#ttl-관리-최적화-전략>#</a></h6><table><thead><tr><th>전략</th><th>목적</th><th>설명</th></tr></thead><tbody><tr><td>TTL + 캐시 재생 전략 (Refresh-Ahead)</td><td>TTL 만료 전에 미리 갱신</td><td>배치 스케줄러 또는 요청량 기반</td></tr><tr><td>TTL + Pub/Sub 무효화</td><td>TTL 전에도 데이터가 변경되면 강제 무효화</td><td>실시간 변경 대응 (예: DB Trigger → Redis Invalidate)</td></tr><tr><td>TTL 분산 (Randomization)</td><td>TTL 동시 만료로 인한 병목 방지 (&ldquo;Cache Stampede&rdquo;)</td><td>TTL 에 ±20% jitter 추가</td></tr><tr><td>지능형 TTL 정책</td><td>데이터 별로 동적으로 TTL 계산</td><td>조회 수, 중요도, 생성 시점 기반 분기 설정</td></tr></tbody></table><h5 id=쓰기-전략-write-policy>쓰기 전략 (Write Policy)<a hidden class=anchor aria-hidden=true href=#쓰기-전략-write-policy>#</a></h5><p>**쓰기 전략 (Write Policy)**은 데이터 변경 (쓰기) 시점에 <strong>캐시와 원본 저장소 (DB)</strong> 간에 어떻게 데이터를 반영하고 동기화할 것인지를 정의하는 정책이다.</p><table><thead><tr><th>전략 유형</th><th>설명</th><th>캐시와 DB 동기화 시점</th></tr></thead><tbody><tr><td><strong>Cache-Aside</strong></td><td>애플리케이션이 먼저 DB 에 쓰고, 이후 캐시를 삭제하거나 업데이트</td><td>앱이 명시적으로 처리 (쓰기 후 무효화 또는 갱신)</td></tr><tr><td><strong>Write-Through</strong></td><td>애플리케이션이 캐시에 먼저 쓰고, 캐시가 DB 에 동시에 반영</td><td>쓰기와 동시에 DB 로 전파됨</td></tr><tr><td><strong>Write-Behind</strong></td><td>캐시에 먼저 쓰고, DB 반영은 비동기로 늦게 수행</td><td>일정 주기 or 이벤트 기반으로 DB 반영</td></tr><tr><td><strong>Refresh-Ahead</strong></td><td>TTL 만료 전에 백그라운드 작업으로 캐시를 갱신</td><td>읽기 요청과 무관하게 주기적 갱신 수행</td></tr></tbody></table><h6 id=전략별-비교-매트릭스>전략별 비교 매트릭스<a hidden class=anchor aria-hidden=true href=#전략별-비교-매트릭스>#</a></h6><table><thead><tr><th>항목</th><th>Cache-Aside</th><th>Write-Through</th><th>Write-Behind</th><th>Refresh-Ahead</th></tr></thead><tbody><tr><td>쓰기 순서</td><td>DB → 캐시 무효화/갱신</td><td>캐시 → DB (즉시 반영)</td><td>캐시 → DB (지연 반영)</td><td>주기적 Pre-Fetch</td></tr><tr><td>일관성 수준</td><td>강함 (단, 갱신 타이밍에 주의)</td><td>강함</td><td>약함 (지연 시 정합성 깨질 수 있음)</td><td>약함 (읽기 지연 허용 필요)</td></tr><tr><td>성능</td><td>읽기 빠름 / 쓰기 느림</td><td>읽기/쓰기 균형</td><td>읽기/쓰기 모두 빠름</td><td>읽기 지연 최소화</td></tr><tr><td>장애 시 위험</td><td>캐시와 DB 불일치 최소화</td><td>모든 쓰기가 즉시 반영되므로 안정성 높음</td><td>장애 시 데이터 유실 가능성 있음</td><td>TTL 정책 미비 시 정합성 무너질 수 있음</td></tr><tr><td>구현 복잡도</td><td>낮음 (직관적 구현 가능)</td><td>중간 (캐시 +DB 연동 필요)</td><td>높음 (큐 + 백그라운드 작업 필요)</td><td>중간 (스케줄링/백그라운드 로직 필요)</td></tr><tr><td>추천 상황</td><td>읽기 많은 시스템, 강한 정합성 필요 시</td><td>변경량 적고 정합성 중요한 경우</td><td>성능 최우선 시스템</td><td>API 응답 예측 가능, 시간 기반 데이터 등</td></tr></tbody></table><h6 id=실무-적용-예시>실무 적용 예시<a hidden class=anchor aria-hidden=true href=#실무-적용-예시>#</a></h6><table><thead><tr><th>전략 유형</th><th>기술/프레임워크 예시</th><th>실무 활용 예시</th></tr></thead><tbody><tr><td><strong>Cache-Aside</strong></td><td>Redis + Spring Cache / Django Low-Level Cache</td><td>사용자 세션, 조회 기반 캐시</td></tr><tr><td><strong>Write-Through</strong></td><td>AWS ElastiCache Write Policy, Hazelcast</td><td>금융 시스템, 거래 기록 캐싱</td></tr><tr><td><strong>Write-Behind</strong></td><td>Redis + Kafka Queue + Background Worker</td><td>상품 상세 정보 업데이트, 주문 기록 큐 기반 처리</td></tr><tr><td><strong>Refresh-Ahead</strong></td><td>Redis + Scheduler or CRON or TTL Triggered Task</td><td>인기 게시물, 랭킹, 날씨 정보 등 정기적 갱신 필요 데이터 캐시</td></tr></tbody></table><h6 id=전략-선택-가이드-1>전략 선택 가이드<a hidden class=anchor aria-hidden=true href=#전략-선택-가이드-1>#</a></h6><table><thead><tr><th>상황 / 요구조건</th><th>적합한 전략</th></tr></thead><tbody><tr><td><strong>읽기 비율이 높은 시스템 (ex. 뉴스, 쇼핑몰)</strong></td><td>Cache-Aside</td></tr><tr><td><strong>쓰기 정합성이 매우 중요한 시스템 (ex. 금융, 결제)</strong></td><td>Write-Through</td></tr><tr><td><strong>고성능, 쓰기 부하 분산 필요 (ex. 로그, 배치)</strong></td><td>Write-Behind</td></tr><tr><td><strong>데이터 TTL 기반 주기 갱신 (ex. 날씨, 공지)</strong></td><td>Refresh-Ahead</td></tr></tbody></table><h6 id=보완-설계-전략>보완 설계 전략<a hidden class=anchor aria-hidden=true href=#보완-설계-전략>#</a></h6><table><thead><tr><th>과제</th><th>해결 전략</th></tr></thead><tbody><tr><td>캐시 & DB 불일치</td><td>Write-Through or Pub/Sub Invalidate</td></tr><tr><td>TTL 만료로 인한 부하 급증</td><td>Refresh-Ahead + Jittered TTL</td></tr><tr><td>Write-Behind 장애 시 유실</td><td>Durable Queue + Retry + Logging</td></tr><tr><td>Hot Key TTL 갱신 부담</td><td>Lazy TTL / Sliding Expiration</td></tr></tbody></table><h5 id=교체-정책-설정>교체 정책 설정<a hidden class=anchor aria-hidden=true href=#교체-정책-설정>#</a></h5><p><strong>Eviction Policy</strong>는 캐시가 가득 찼을 때 <strong>어떤 항목을 제거 (Evict) 할지를 결정하는 알고리즘</strong>이다.<br>메모리는 유한하므로, 오래된/덜 사용된 데이터를 제거하여 새로운 데이터를 수용해야 한다.</p><table><thead><tr><th>알고리즘 유형</th><th>설명</th><th>장점</th><th>단점</th><th>사용 예시 / 특징</th></tr></thead><tbody><tr><td><strong>LRU (Least Recently Used)</strong></td><td>가장 오래 사용되지 않은 항목 제거</td><td>일반적인 워크로드에서 우수</td><td>Hot Key 로 쏠림 시 오염 발생 가능</td><td>Redis 기본 정책 중 하나</td></tr><tr><td><strong>LFU (Least Frequently Used)</strong></td><td>가장 적게 사용된 항목 제거</td><td>자주 쓰이는 데이터 유지에 적합</td><td>계산 복잡도 있음, 오래된 사용 빈도 유지</td><td>Redis >= 4.0 에서 사용 가능</td></tr><tr><td><strong>FIFO (First In, First Out)</strong></td><td>가장 먼저 저장된 항목부터 제거</td><td>단순 구현</td><td>실제 사용 패턴과 무관, 적중률 낮을 수 있음</td><td>단순 캐시 구조에서 사용</td></tr><tr><td><strong>Random</strong></td><td>임의의 항목 제거</td><td>계산 복잡도 낮음</td><td>정합성, 예측 불가</td><td>제한적 환경에서 사용</td></tr><tr><td><strong>ARC (Adaptive Replacement Cache)</strong></td><td>LRU + LFU 의 하이브리드. 최근과 자주 사용된 항목을 동적으로 판단하여 캐시 유지</td><td>높은 적중률, 워크로드 적응형</td><td>복잡한 구현</td><td>DBMS (PostgreSQL 등)</td></tr><tr><td><strong>CLOCK (Second-Chance)</strong></td><td>페이지 참조 비트를 확인하며 LRU 근사 구현. OS 페이지 캐시에서 많이 사용됨</td><td>효율적이고 구현 쉬움</td><td>제한된 활용 (OS/DB 캐시 등)</td><td>Linux Page Cache 등</td></tr><tr><td><strong>TTL 기반 만료</strong></td><td>캐시된 항목마다 TTL 설정. 시간이 지나면 만료 자동 제거</td><td>시간 기반 정리 가능</td><td>실제 사용 여부와 무관하게 삭제됨</td><td>Redis, Memcached 기본 기능</td></tr></tbody></table><h6 id=전략-선택-매트릭스-7>전략 선택 매트릭스<a hidden class=anchor aria-hidden=true href=#전략-선택-매트릭스-7>#</a></h6><table><thead><tr><th>항목</th><th>LRU</th><th>LFU</th><th>FIFO</th><th>ARC</th><th>CLOCK</th><th>TTL 기반</th></tr></thead><tbody><tr><td>📌 기준</td><td>최근 사용 시점</td><td>사용 횟수</td><td>저장된 순서</td><td>최근 + 자주 사용 데이터</td><td>참조 여부</td><td>시간</td></tr><tr><td>🧠 학습성/적응성</td><td>없음</td><td>없음</td><td>없음</td><td>있음</td><td>없음</td><td>없음</td></tr><tr><td>⚙️ 구현 복잡도</td><td>낮음</td><td>중간 (카운터 필요)</td><td>매우 낮음</td><td>높음</td><td>중간</td><td>낮음</td></tr><tr><td>⚡ 성능/속도</td><td>빠름</td><td>중간</td><td>매우 빠름</td><td>중간~빠름</td><td>빠름</td><td>빠름</td></tr><tr><td>🎯 적중률</td><td>일반적으로 우수</td><td>Hot key 유지에 강함</td><td>낮음</td><td>매우 우수</td><td>중간</td><td>데이터 TTL 의존</td></tr><tr><td>🧪 사용 예시</td><td>Redis, Memcached, Spring</td><td>Redis LFU, Guava</td><td>간단한 임시 캐시 구현 등</td><td>PostgreSQL, DB 캐시 시스템 등</td><td>OS 캐시, DBMS Cache</td><td>Redis, CDN, Edge Cache 등</td></tr></tbody></table><h6 id=redis-eviction-설정-예시>Redis Eviction 설정 예시<a hidden class=anchor aria-hidden=true href=#redis-eviction-설정-예시>#</a></h6><p>Redis 는 <code>maxmemory-policy</code> 를 통해 다양한 교체 정책을 지원함:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-40-1><a class=lnlinks href=#hl-40-1>1</a>
</span><span class=lnt id=hl-40-2><a class=lnlinks href=#hl-40-2>2</a>
</span><span class=lnt id=hl-40-3><a class=lnlinks href=#hl-40-3>3</a>
</span><span class=lnt id=hl-40-4><a class=lnlinks href=#hl-40-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Redis.conf 설정 예시</span>
</span></span><span class=line><span class=cl>maxmemory 256mb
</span></span><span class=line><span class=cl>maxmemory-policy allkeys-lru       <span class=c1># 모든 키에 대해 LRU 적용</span>
</span></span><span class=line><span class=cl><span class=c1># 기타 옵션: volatile-lru, allkeys-lfu, noeviction, allkeys-random</span>
</span></span></code></pre></td></tr></table></div></div><table><thead><tr><th>정책 이름</th><th>설명</th></tr></thead><tbody><tr><td><code>noeviction</code></td><td>공간 초과 시 새 요청 거부 (오류 발생)</td></tr><tr><td><code>allkeys-lru</code></td><td>전체 키 대상 LRU 적용</td></tr><tr><td><code>volatile-lru</code></td><td>TTL 이 설정된 키에 대해서만 LRU 적용</td></tr><tr><td><code>allkeys-lfu</code></td><td>전체 키 대상으로 LFU 적용</td></tr><tr><td><code>volatile-ttl</code></td><td>TTL 이 가장 가까운 키를 제거</td></tr></tbody></table><h6 id=교체-정책-설계-시-고려사항>교체 정책 설계 시 고려사항<a hidden class=anchor aria-hidden=true href=#교체-정책-설계-시-고려사항>#</a></h6><table><thead><tr><th>고려 요소</th><th>설명 및 전략 예시</th></tr></thead><tbody><tr><td><strong>데이터 사용 패턴</strong></td><td>반복 조회 vs 일시적 조회 구분 필요 → LFU/LRU 혼합 사용 (ARC 등)</td></tr><tr><td><strong>TTL 정책과의 조합</strong></td><td>일정 시간이 지나도 미사용 → TTL 자동 삭제 활용</td></tr><tr><td><strong>Hot Key 집중 현상</strong></td><td>LFU 로 Hot Key 보호 or Manual Pinning 전략 적용</td></tr><tr><td><strong>서비스 특성</strong></td><td>콘텐츠 캐시 (FIFO/TTL), 세션 캐시 (LRU), 실시간 통계 (LFU) 등 구분 필요</td></tr></tbody></table><h6 id=전략-조합-예시>전략 조합 예시<a hidden class=anchor aria-hidden=true href=#전략-조합-예시>#</a></h6><table><thead><tr><th>조합 전략</th><th>설명 및 적용 시나리오</th></tr></thead><tbody><tr><td>LRU + TTL</td><td>자주 안 쓰이는 항목 제거 + 시간 만료 정리</td></tr><tr><td>LFU + Write-Behind</td><td>자주 쓰이는 항목을 오래 유지 + 비동기 DB 저장</td></tr><tr><td>ARC + Refresh-Ahead</td><td>적중률 우선 + TTL 이전 선제적 갱신 처리</td></tr><tr><td>TTL + Jitter + LRU</td><td>TTL 동시 만료 방지 + 캐시 공간 최적화</td></tr></tbody></table><h6 id=선택-가이드>선택 가이드<a hidden class=anchor aria-hidden=true href=#선택-가이드>#</a></h6><table><thead><tr><th>요구 조건 / 시나리오</th><th>추천 정책</th></tr></thead><tbody><tr><td><strong>자주 사용되는 데이터를 오래 유지</strong></td><td>LFU, ARC</td></tr><tr><td><strong>최신 데이터 위주 응답이 중요</strong></td><td>LRU</td></tr><tr><td><strong>단순 구조, 임시 캐시 필요</strong></td><td>FIFO, Random</td></tr><tr><td><strong>시간 기반 만료가 중요한 경우</strong></td><td>TTL 기반</td></tr><tr><td><strong>다양한 패턴이 혼합된 복합 환경</strong></td><td>ARC + TTL or LFU + TTL 조합</td></tr></tbody></table><h5 id=캐시-키-설계>캐시 키 설계<a hidden class=anchor aria-hidden=true href=#캐시-키-설계>#</a></h5><p><strong>캐시 키</strong>는 캐싱 시스템에서 저장된 값을 식별하기 위한 <strong>고유 식별자 (Key)</strong> 로 사용된다.<br>주어진 요청이나 데이터 조합에 대해 정확한 캐시 항목을 식별할 수 있어야 하며, <strong>정확하고 일관성 있는 키 설계</strong>가 필수이다.</p><h6 id=캐시-키-설계-시-고려-요소>캐시 키 설계 시 고려 요소<a hidden class=anchor aria-hidden=true href=#캐시-키-설계-시-고려-요소>#</a></h6><table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>정합성</strong></td><td>키가 실제 데이터와 정확히 매핑되어야 함. 동일 요청은 동일 키 → 동일 결과</td></tr><tr><td><strong>명확한 네임스페이스</strong></td><td>키 충돌 방지를 위해 prefix 또는 scope 명시 필요</td></tr><tr><td><strong>식별 요소의 포함</strong></td><td>ID, 쿼리 파라미터, 필터 조건 등 데이터를 결정짓는 모든 요소 반영</td></tr><tr><td><strong>길이 제한 및 해시 사용</strong></td><td>Redis, Memcached 등은 키 길이 제한 있음. 해시를 이용해 압축 필요</td></tr><tr><td><strong>확장성 및 모듈성</strong></td><td>서비스/도메인 변경에 강한 구조 필요. 키 구성 규칙을 명세화해야 함</td></tr><tr><td><strong>인간 가독성 (선택적)</strong></td><td>디버깅이나 로깅, 관찰 도구와 연동 시 식별 가능한 형태가 유리</td></tr></tbody></table><h6 id=캐시-키-구조-설계-예시>캐시 키 구조 설계 예시<a hidden class=anchor aria-hidden=true href=#캐시-키-구조-설계-예시>#</a></h6><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-41-1><a class=lnlinks href=#hl-41-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>[도메인]:[카테고리]:[리소스명]:[식별자]:[조건]
</span></span></code></pre></td></tr></table></div></div><h6 id=예시-1>예시<a hidden class=anchor aria-hidden=true href=#예시-1>#</a></h6><table><thead><tr><th>키 예시</th><th>설명</th></tr></thead><tbody><tr><td><code>user:profile:1234</code></td><td>사용자 ID 1234 의 프로필</td></tr><tr><td><code>product:list:category=shoes&amp;sort=latest&amp;page=2</code></td><td>특정 조건의 상품 목록</td></tr><tr><td><code>session:user:jwt:token:abc123</code></td><td>특정 JWT 세션 키</td></tr><tr><td><code>article:top10:region=kr&amp;category=politics</code></td><td>지역/카테고리 기반 상위 10 개 기사</td></tr></tbody></table><blockquote><p>가능하면 <code>:</code> 또는 <code>|</code> 를 구분자로 사용하고, 파라미터는 정렬된 문자열로 명시</p></blockquote><h6 id=키-충돌-방지-전략>키 충돌 방지 전략<a hidden class=anchor aria-hidden=true href=#키-충돌-방지-전략>#</a></h6><table><thead><tr><th>전략</th><th>설명</th></tr></thead><tbody><tr><td><strong>Prefix 네임스페이스</strong></td><td>기능, 도메인, 서비스 단위로 키에 접두사 부여 (<code>auth:user:</code>, <code>feed:topic:</code> 등)</td></tr><tr><td><strong>조건 요소의 정렬/정규화</strong></td><td>쿼리 스트링, 필터 조건 등은 순서와 대소문자에 관계없이 정렬된 형태로 변환</td></tr><tr><td><strong>사용자 입력 요소 인코딩</strong></td><td>키에 포함되는 동적 텍스트는 URL 인코딩 혹은 해싱 처리</td></tr><tr><td><strong>버전 키 구성 포함</strong></td><td>캐시 전략 변경 시 <code>v1:</code>, <code>v2:</code> 와 같이 버전 명시로 기존 키 무효화 가능</td></tr></tbody></table><h6 id=실무-캐시-키-설계-패턴>실무 캐시 키 설계 패턴<a hidden class=anchor aria-hidden=true href=#실무-캐시-키-설계-패턴>#</a></h6><table><thead><tr><th>패턴 유형</th><th>예시 키</th><th>목적/특징</th></tr></thead><tbody><tr><td><strong>정적 리소스 키</strong></td><td><code>static:css:main_v2.css</code></td><td>버전 관리 포함된 정적 리소스 식별</td></tr><tr><td><strong>동적 객체 키</strong></td><td><code>user:profile:8421</code></td><td>사용자, 상품, 게시글 등의 개별 조회 식별자</td></tr><tr><td><strong>조건 기반 키</strong></td><td><code>search:post:keyword=ai&amp;sort=hot</code></td><td>조건 조합된 결과 캐싱</td></tr><tr><td><strong>세션/인증 키</strong></td><td><code>auth:session:user:jwt:12345</code></td><td>특정 사용자 세션에 따른 식별용 키</td></tr><tr><td><strong>TTL 동기화 키</strong></td><td><code>feed:latest:v2</code> (TTL: 60 초)</td><td>주기적 갱신용 캐시 키로 TTL 과 함께 관리</td></tr></tbody></table><h6 id=캐시-키-설계-가이드>캐시 키 설계 가이드<a hidden class=anchor aria-hidden=true href=#캐시-키-설계-가이드>#</a></h6><table><thead><tr><th>체크리스트 항목</th><th>설명</th></tr></thead><tbody><tr><td>도메인 구분자 사용 (<code>:</code> 등)</td><td>기능별 키 충돌 방지, 범위 정리 가능</td></tr><tr><td>조건 파라미터 정렬 및 정규화</td><td><code>sort=asc&amp;page=1</code> → 동일 키 유지 필요</td></tr><tr><td>동적 파라미터에 대한 해시 처리 (선택)</td><td>URL 이 길거나 민감할 경우 MD5, SHA-1 등 적용</td></tr><tr><td>TTL 과 키 관계 명시 (<code>v2</code>, <code>ttl:30s</code>)</td><td>키 관리 용이, 만료 정책과 연계됨</td></tr><tr><td>캐시 무효화 전략 포함 (<code>invalidate:</code>)</td><td>명시적 Invalidate 용도로 별도 키 패턴 설계 필요</td></tr></tbody></table><h6 id=키-충돌--오염-방지-실무-팁>키 충돌 / 오염 방지 실무 팁<a hidden class=anchor aria-hidden=true href=#키-충돌--오염-방지-실무-팁>#</a></h6><table><thead><tr><th>문제 상황</th><th>해결 전략</th></tr></thead><tbody><tr><td>키 충돌로 다른 기능 데이터 조회됨</td><td>도메인/기능 Prefix 도입 (<code>user:</code>, <code>order:</code>)</td></tr><tr><td>조건이 순서 바뀌어 동일 요청임에도 캐시 미스</td><td>파라미터 정렬 후 키 구성 (<code>a=1&amp;b=2</code> vs <code>b=2&amp;a=1</code>)</td></tr><tr><td>민감 정보가 키에 포함됨</td><td>사용자 ID, 키워드 등은 해시 처리 (<code>sha256(user_email)</code>)</td></tr><tr><td>캐시 갱신 후 이전 데이터 서빙됨</td><td>키 버전 추가 (<code>product:list:v3</code>) 또는 TTL 조절</td></tr></tbody></table><h6 id=키-설계와-ttl-eviction-연계-전략>키 설계와 TTL, Eviction 연계 전략<a hidden class=anchor aria-hidden=true href=#키-설계와-ttl-eviction-연계-전략>#</a></h6><table><thead><tr><th>설계 포인트</th><th>관련 정책 예시</th></tr></thead><tbody><tr><td><code>user:session:123</code></td><td>TTL = 세션 만료 시간, 자동 제거 처리 가능</td></tr><tr><td><code>search:post:keyword=ai</code></td><td>TTL = 5 분 + LRU 교체 정책으로 오래된 키 제거</td></tr><tr><td><code>feed:hot:region=kr</code></td><td>Refresh-Ahead + TTL 기반 선제 갱신 키로 활용 가능</td></tr></tbody></table><h6 id=캐시-키-설계-best-practice>캐시 키 설계 Best Practice<a hidden class=anchor aria-hidden=true href=#캐시-키-설계-best-practice>#</a></h6><table><thead><tr><th>항목</th><th>권장 방식 예시</th></tr></thead><tbody><tr><td>키 구조 설계</td><td><code>도메인:기능:식별자[:파라미터 정렬 문자열]</code></td></tr><tr><td>키 길이 제한</td><td>250 자 이하 (Redis 기준), 해시 처리 고려</td></tr><tr><td>키 충돌 방지</td><td>prefix + versioning + 정렬된 파라미터 적용</td></tr><tr><td>관찰 가능성 확보</td><td>키 내에 의미 있는 정보 포함 or 로깅용 키 별도 구성</td></tr><tr><td>TTL/전략 연계</td><td>키명에 TTL 주기, 버전명 등을 반영 (<code>cache:rank:v1:ttl30s</code>)</td></tr></tbody></table><h5 id=계층화-전략>계층화 전략<a hidden class=anchor aria-hidden=true href=#계층화-전략>#</a></h5><p><strong>캐싱 계층화</strong>는 시스템의 요구 성능, 확장성, 데이터 특성에 따라 캐시를 <strong>여러 단계로 나눠서 구성</strong>하는 전략이다.</p><p>일반적으로 <strong>접근 속도 순</strong>으로 다음과 같이 구성된다:</p><ul><li><strong>L1 Cache</strong>: 인메모리/프로세스 로컬 (가장 빠름)</li><li><strong>L2 Cache</strong>: 분산 캐시 시스템 (Redis 등)</li><li><strong>L3 Cache</strong>: 프록시 캐시 or CDN 등 글로벌 엣지 레벨</li></ul><table><thead><tr><th>계층</th><th>위치</th><th>예시 기술</th><th>특징</th><th>사용 목적</th></tr></thead><tbody><tr><td><strong>L1</strong></td><td>프로세스 내부 (WAS, 앱)</td><td>Guava, Caffeine, Spring Cache</td><td>초고속 접근, 단일 인스턴스 한정</td><td>빈번한 내부 반복 요청 처리</td></tr><tr><td><strong>L2</strong></td><td>서버 외부 분산 캐시</td><td>Redis, Memcached</td><td>여러 인스턴스 간 공유 가능, TTL/정책 설정 용이</td><td>세션 공유, 쿼리 캐시 등</td></tr><tr><td><strong>L3</strong></td><td>네트워크 엣지/중간 계층 (프록시)</td><td>Cloudflare CDN, Nginx Cache</td><td>글로벌 배포, 정적 자산 공유, 느리지만 범용적 적용 가능</td><td>정적 자산, API 응답 캐시 등</td></tr></tbody></table><h6 id=캐시-계층화의-핵심-목표>캐시 계층화의 핵심 목표<a hidden class=anchor aria-hidden=true href=#캐시-계층화의-핵심-목표>#</a></h6><table><thead><tr><th>목표</th><th>설명</th></tr></thead><tbody><tr><td><strong>성능 최적화</strong></td><td>자주 요청되는 데이터를 빠른 계층에서 먼저 응답하여 지연 감소</td></tr><tr><td><strong>백엔드 부하 감소</strong></td><td>높은 계층에서 캐시 HIT 시 DB/원본 시스템 접근을 줄여 리소스 절감</td></tr><tr><td><strong>확장성 및 비용 균형</strong></td><td>빠른 계층은 비용이 비싸므로 덜 중요한 데이터는 느린 계층으로 분산</td></tr><tr><td><strong>캐시 미스 Fallback 전략</strong></td><td>L1 → L2 → L3 → DB 순으로 단계별 조회 흐름 구성 가능</td></tr></tbody></table><h6 id=계층화-캐시-흐름도>계층화 캐시 흐름도<a hidden class=anchor aria-hidden=true href=#계층화-캐시-흐름도>#</a></h6><pre class=mermaid>flowchart TD
  U[Client Request] --&gt; L3[CDN / Reverse Proxy Cache]
  L3 --&gt;|Miss| L2[&#34;Distributed Cache (Redis)&#34;]
  L2 --&gt;|Miss| L1[&#34;Local Cache (WAS)&#34;]
  L1 --&gt;|Miss| DB[(Primary Database)]
  
  DB --&gt;|Load &amp; Write Back| L1
  L1 --&gt; L2
  L2 --&gt; L3
</pre><blockquote><p>☑️ 캐시 적중 시 아래 계층 조회 생략<br>☑️ 계층 간 TTL, 일관성, 무효화 전략 분리 가능</p></blockquote><h6 id=계층화-전략-매트릭스>계층화 전략 매트릭스<a hidden class=anchor aria-hidden=true href=#계층화-전략-매트릭스>#</a></h6><table><thead><tr><th>항목</th><th>L1 Cache (Local)</th><th>L2 Cache (Distributed)</th><th>L3 Cache (Edge/CDN)</th></tr></thead><tbody><tr><td>⏱ 접근 속도</td><td>매우 빠름 (µs)</td><td>빠름 (ms)</td><td>중간~느림 (수십 ms)</td></tr><tr><td>🔁 공유 여부</td><td>단일 인스턴스 한정</td><td>다수 인스턴스 간 공유 가능</td><td>전 세계 엣지 간 공유 가능</td></tr><tr><td>🧠 무효화 복잡도</td><td>낮음</td><td>중간 (Pub/Sub, TTL 등)</td><td>높음 (Purge API, TTL)</td></tr><tr><td>📦 적합 데이터 유형</td><td>세션, 인증, 내부 로직 결과</td><td>쿼리 결과, 도메인 객체</td><td>HTML, JS, 이미지 등 정적 리소스</td></tr><tr><td>⚙️ 구현 복잡도</td><td>낮음</td><td>중간</td><td>높음</td></tr><tr><td>🧪 대표 기술</td><td>Guava, Spring Cache</td><td>Redis, Hazelcast</td><td>Cloudflare, Akamai</td></tr></tbody></table><h6 id=실무-적용-예시-1>실무 적용 예시<a hidden class=anchor aria-hidden=true href=#실무-적용-예시-1>#</a></h6><p><strong>예시</strong>: 전자상거래 시스템</p><table><thead><tr><th>계층</th><th>캐시 대상</th><th>TTL 설정</th><th>캐시 미스 처리</th></tr></thead><tbody><tr><td>L1</td><td>로그인 유저 정보, 최근 조회 상품 목록</td><td>1~5 분</td><td>DB 조회 후 L1, L2 갱신</td></tr><tr><td>L2</td><td>상품 상세 정보, 주문 상태 조회</td><td>10~30 분</td><td>캐시 미스 시 DB 조회, 캐시 재생성</td></tr><tr><td>L3</td><td>정적 이미지, JS 파일, 배너 광고 등</td><td>수시간~1 일</td><td>사전 CDN 에 캐시 Preload or Fallback 서버 처리</td></tr></tbody></table><h6 id=계층-간-ttl-및-일관성-조율-전략>계층 간 TTL 및 일관성 조율 전략<a hidden class=anchor aria-hidden=true href=#계층-간-ttl-및-일관성-조율-전략>#</a></h6><table><thead><tr><th>계층</th><th>TTL 기준</th><th>갱신 전략</th></tr></thead><tbody><tr><td>L1</td><td>짧게 (몇 분)</td><td>Lazy Load + Sliding Expiration</td></tr><tr><td>L2</td><td>중간 (수십 분~1 시간)</td><td>TTL + Pub/Sub 무효화 or Refresh-Ahead</td></tr><tr><td>L3</td><td>길게 (수 시간 이상)</td><td>CDN Edge Purge API or Preloading</td></tr></tbody></table><blockquote><p>L1 이 오래 유지되면 L2/L3 갱신이 적용되지 않을 수 있어 TTL 조율 필수<br>계층 간 TTL 비율 추천: <code>L1 &lt; L2 &lt; L3</code></p></blockquote><h6 id=계층화-전략-설계-시-고려할-요소>계층화 전략 설계 시 고려할 요소<a hidden class=anchor aria-hidden=true href=#계층화-전략-설계-시-고려할-요소>#</a></h6><table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>💾 메모리 리소스</td><td>L1 은 메모리 제한이 크기 때문에 Eviction 정책과 TTL 신중히 설정 필요</td></tr><tr><td>🔄 정합성 / 일관성</td><td>각 계층 간 TTL 차이와 무효화 전략 일치 여부 중요</td></tr><tr><td>📊 캐시 적중률 분석</td><td>계층별 hit/miss 비율을 Prometheus, Datadog 등으로 모니터링 필요</td></tr><tr><td>📉 장애 전파 방지</td><td>L1→L2→L3→DB 순으로 failover 하며, fallback 시 백오프 전략 고려</td></tr></tbody></table><h6 id=계층화-캐시-전략-적용-가이드>계층화 캐시 전략 적용 가이드<a hidden class=anchor aria-hidden=true href=#계층화-캐시-전략-적용-가이드>#</a></h6><table><thead><tr><th>상황 / 목적</th><th>계층화 설계 전략</th></tr></thead><tbody><tr><td>고성능 응답 + 낮은 레이턴시</td><td>L1 캐시로 자주 쓰는 데이터 처리 (세션, 권한 등)</td></tr><tr><td>마이크로서비스 간 공유 정보</td><td>L2 분산 캐시로 쿼리 결과/상태 데이터 공유</td></tr><tr><td>글로벌 콘텐츠 배포</td><td>L3 CDN 도입으로 이미지, 정적 리소스 전 세계 응답 최적화</td></tr><tr><td>안정성과 정합성 둘 다 중요한 시스템</td><td>각 계층 TTL/갱신 전략을 세분화 + Pub/Sub 무효화 연계 구성</td></tr></tbody></table><h4 id=운영-및-모니터링>운영 및 모니터링<a hidden class=anchor aria-hidden=true href=#운영-및-모니터링>#</a></h4><p>캐시의 상태는 실시간으로 변화하므로 지속적인 모니터링이 필수다. 콜드 스타트 대비, 히트율 추적, 캐시 오염 탐지, 장애 복구 시나리오를 포함한 운영 자동화가 있어야 운영 안정성을 확보할 수 있다.</p><h5 id=성능-지표-추적>성능 지표 추적<a hidden class=anchor aria-hidden=true href=#성능-지표-추적>#</a></h5><h6 id=주요-메트릭--모니터링-툴>주요 메트릭 & 모니터링 툴<a hidden class=anchor aria-hidden=true href=#주요-메트릭--모니터링-툴>#</a></h6><table><thead><tr><th>메트릭</th><th>설명</th><th>경고 기준</th><th>대응 방안</th></tr></thead><tbody><tr><td>Cache Hit / Miss Rate</td><td>적중/미스 비율</td><td>히트율 &lt; 70% 지속 시</td><td>Hot key 식별 후 TTL/정책 조정</td></tr><tr><td>Eviction Rate</td><td>제거된 캐시 항목 수</td><td>지나치게 높을 경우</td><td>메모리 증설 or 정책 조정</td></tr><tr><td>Avg. Latency (local/dist.)</td><td>로컬/분산 캐시 조회 평균 지연 시간</td><td>Redis avg > 5ms 지속 시</td><td>네트워크/인프라 점검, 지역 분산 고려</td></tr><tr><td>Thundering Herd Attempts</td><td>동시 캐시 미스 시도 비율</td><td>급증 시</td><td>Locking, Singleflight 전략 적용</td></tr><tr><td>Subscribe/Invalidate Lag</td><td>Push 무효화 메시지 지연 시간</td><td>100ms 이상</td><td>메시지 큐 지연 원인 분석 및 처리 최적화</td></tr><tr><td>Errors & Exceptions</td><td>캐시 접근 실패 오류 수</td><td>Error rate > 0.1%</td><td>네트워크 패킷 손실/클라이언트 재시도 로직 보강</td></tr></tbody></table><h6 id=예시-모니터링-스택>예시 모니터링 스택<a hidden class=anchor aria-hidden=true href=#예시-모니터링-스택>#</a></h6><ul><li><strong>Prometheus + Grafana</strong>: Redis Exporter, App Custom Metrics</li><li><strong>ELK Stack</strong>: 무효화/에러 로그 수집 분석</li><li><strong>Distributed Tracing (Jaeger)</strong>: 캐시 vs DB 응답 경로 지연 분석</li><li><strong>Alerting</strong>: Slack/Email 기반 경고 설정</li></ul><h5 id=콜드-스타트-cold-start-와-워밍업-cache-warming>콜드 스타트 (Cold Start) 와 워밍업 (Cache Warming)<a hidden class=anchor aria-hidden=true href=#콜드-스타트-cold-start-와-워밍업-cache-warming>#</a></h5><table><thead><tr><th>구분</th><th>정의</th></tr></thead><tbody><tr><td><strong>콜드 스타트</strong></td><td>캐시가 비어있는 상태에서 시작하거나, 재시작 이후 캐시 미스가 연속적으로 발생하는 상태</td></tr><tr><td><strong>워밍업</strong></td><td>캐시가 비어 있거나 초기 상태일 때, 자주 사용하는 데이터를 사전에 적재하여 콜드 스타트를 방지하는 작업</td></tr></tbody></table><ul><li><strong>콜드 스타트는 캐시 미스가 집중되는 초기 상태로</strong>, 시스템 성능 저하, 부하 증가, 비용 상승, UX 악화를 초래한다.</li><li>이를 방지하기 위한 <strong>워밍업 전략</strong>은 캐시를 사전에 준비하여 미스율을 줄이고 시스템 안정성을 높이는 핵심 수단이다.</li><li>워밍업은 <strong>수동/자동/백그라운드</strong> 방식으로 구현할 수 있으며, <strong>데이터 범위, 타이밍, 자원 소비, 일관성</strong> 등을 면밀히 고려해야 한다.</li><li><strong>실무에서는 서비스 특성별로 TTL 정책, 교체 정책, 프리페치 알고리즘, 캐시 계층 간 연계 전략</strong> 등을 결합하여 효율적인 워밍업을 설계해야 한다.</li></ul><h6 id=콜드-스타트-발생-원인>콜드 스타트 발생 원인<a hidden class=anchor aria-hidden=true href=#콜드-스타트-발생-원인>#</a></h6><table><thead><tr><th>원인 구분</th><th>상세 설명</th></tr></thead><tbody><tr><td>시스템 재시작</td><td>서버/인스턴스/캐시 노드가 재시작되어 기존 캐시 데이터가 모두 초기화됨</td></tr><tr><td>TTL 만료</td><td>전체 혹은 다수의 캐시 데이터가 TTL 에 의해 동시에 만료됨</td></tr><tr><td>배포/릴리스</td><td>애플리케이션 배포 시 캐시 무효화 정책에 의해 데이터가 제거됨</td></tr><tr><td>스케일링/확장</td><td>신규 노드가 캐시 없이 추가되거나, Consistent Hashing 분포 변경 시 재배치로 인한 캐시 미스</td></tr><tr><td>장애 복구</td><td>장애 후 복구 시, 캐시 서버는 클린 상태로 시작되어 모든 요청이 원본으로 향하게 됨</td></tr></tbody></table><h6 id=콜드-스타트-문제점>콜드 스타트 문제점<a hidden class=anchor aria-hidden=true href=#콜드-스타트-문제점>#</a></h6><table><thead><tr><th>문제 항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>성능 저하</strong></td><td>캐시 미스로 인해 DB 또는 API 백엔드에 직접 접근하여 지연 시간이 증가함</td></tr><tr><td><strong>시스템 부하 증가</strong></td><td>대량의 요청이 백엔드로 몰리며 부하가 급증하거나 오버로드로 이어짐</td></tr><tr><td><strong>비용 상승</strong></td><td>외부 API 호출 또는 고비용 연산 발생 빈도 증가로 인해 인프라 비용이 증가할 수 있음</td></tr><tr><td><strong>사용자 경험 저하</strong></td><td>초기 사용자 응답 속도가 느려지며, 서비스 품질 저하로 이어질 수 있음</td></tr></tbody></table><h6 id=cache-warming-전략>Cache Warming 전략<a hidden class=anchor aria-hidden=true href=#cache-warming-전략>#</a></h6><table><thead><tr><th>전략</th><th>설명</th><th>적용 예시</th></tr></thead><tbody><tr><td><strong>수동 워밍업</strong></td><td>관리자 또는 배치 작업으로 사전 정의된 데이터를 캐시에 적재</td><td>배포 후 cron job 으로 인기 게시글 미리 로딩</td></tr><tr><td><strong>자동 워밍업</strong></td><td>애플리케이션 로직이 접근 패턴을 기반으로 자동으로 자주 쓰이는 데이터를 미리 캐싱</td><td>ML 기반 예측 캐싱</td></tr><tr><td><strong>백그라운드 워밍업</strong></td><td>TTL 만료 전 백그라운드에서 데이터를 갱신하여 사용자 요청 전에 준비</td><td>Redis 에서 <code>expire + refresh</code></td></tr><tr><td><strong>계층별 워밍업</strong></td><td>L1 → L2 → L3 등 계층 간 상위 계층부터 하위 계층으로 순차적으로 캐시를 채움</td><td>CDN → Edge → Origin 단계별 로딩</td></tr><tr><td><strong>히트 기반 워밍업</strong></td><td>과거 히트 수 기준으로 상위 N% 데이터를 캐시에 사전 로드</td><td>뉴스 사이트 인기 기사 미리 로딩</td></tr><tr><td><strong>CDN 프리페칭</strong></td><td>CDN 이 특정 URL 이나 리소스를 사전에 프리페칭하여 Edge 캐시에 배치</td><td>CloudFront, Fastly 프리페치 설정</td></tr><tr><td><strong>콜드 스타트 방지용 스크립트</strong></td><td>캐시 서버 부팅 시 자동으로 특정 API 호출 또는 DB 조회를 수행해 캐시 적재</td><td>Redis boot script, Sidecar 워밍업</td></tr></tbody></table><h6 id=실무-적용-시-고려사항>실무 적용 시 고려사항<a hidden class=anchor aria-hidden=true href=#실무-적용-시-고려사항>#</a></h6><table><thead><tr><th>고려 요소</th><th>설명</th></tr></thead><tbody><tr><td>데이터 크기와 범위</td><td>모든 데이터를 워밍업하면 과도한 리소스 소비 → 핵심 데이터 선별 필요</td></tr><tr><td>리소스/시점 제어</td><td>워밍업은 백엔드 부하를 일으킬 수 있으므로 시점, 빈도, 우선순위 설정이 필요</td></tr><tr><td>일관성 확보 방법</td><td>워밍업 중에 데이터가 변경되면 일관성 문제가 생길 수 있음 → 트랜잭션 제어 또는 버전 체크</td></tr><tr><td>보안 및 인증 문제</td><td>워밍업 요청이 인증된 API 에 접근할 경우 적절한 인증 토큰 구성 필요</td></tr><tr><td>배포 및 스케일링 통합</td><td>무중단 배포, 오토스케일링 시점과 연계하여 캐시 재구성 프로세스를 설계해야 함</td></tr></tbody></table><h4 id=일관성-및-무효화>일관성 및 무효화<a hidden class=anchor aria-hidden=true href=#일관성-및-무효화>#</a></h4><p>원본과 캐시 간 불일치는 가장 흔한 문제 중 하나다. TTL 만으로는 부족하며, 이벤트 기반 무효화나 버전 기반 검증이 필요하다. 멀티 테넌시 환경에선 네임스페이스 분리와 키 스키마 관리가 중요하다.</p><h5 id=cache-일관성과-보장-기법>Cache 일관성과 보장 기법<a hidden class=anchor aria-hidden=true href=#cache-일관성과-보장-기법>#</a></h5><h6 id=캐시-일관성-문제-예시>캐시 일관성 문제 예시<a hidden class=anchor aria-hidden=true href=#캐시-일관성-문제-예시>#</a></h6><pre class=mermaid>sequenceDiagram
Client-&gt;&gt;Cache L1: 요청 A
alt L1 Miss
  Cache L1-&gt;&gt;Cache L2: 요청 A
  Cache L2-&gt;&gt;DB: 요청 A
  DB--&gt;&gt;Cache L2: 응답 A 저장
  Cache L2--&gt;&gt;Cache L1: 응답 A 저장
end
</pre><ul><li><strong>문제점</strong>: DB 변경 발생 시 캐시에는 여전히 이전 데이터 존재 가능</li><li><strong>결과</strong>: 사용자에게 오래된 데이터 노출 (Stale Cache)</li></ul><h6 id=주요-일관성-전략>주요 일관성 전략<a hidden class=anchor aria-hidden=true href=#주요-일관성-전략>#</a></h6><table><thead><tr><th>전략</th><th>설명</th><th>적용 환경</th></tr></thead><tbody><tr><td><strong>TTL 기반 정리</strong></td><td>시간 경과 후 자동 만료</td><td>일반적인 정적/반정적 데이터</td></tr><tr><td><strong>Write-through / Write-behind</strong></td><td>쓰기 시 캐시/DB 동기화</td><td>실시간 일관성 필요 시스템</td></tr><tr><td><strong>Cache Invalidation Hook</strong></td><td>DB 또는 애플리케이션 이벤트 기반</td><td>Kafka, Debezium 사용</td></tr><tr><td><strong>Versioning / Tagging</strong></td><td>데이터 변경 시 버전 업데이트</td><td>캐시 key 에 버전 포함</td></tr><tr><td><strong>Lease / Locking</strong></td><td>동일 키 요청 동시 처리 제한</td><td>Cache Stampede 방지</td></tr><tr><td><strong>Multi-level Cache Coherence</strong></td><td>L1/L2 간 갱신 동기화</td><td>지역 분산 시스템 (K8s 기반 등)</td></tr></tbody></table><h6 id=multi-level-cache-coherence-구조-예시>Multi-level Cache Coherence 구조 예시<a hidden class=anchor aria-hidden=true href=#multi-level-cache-coherence-구조-예시>#</a></h6><pre class=mermaid>graph TD
Client --&gt; L1Cache[&#34;Local JVM Cache (Caffeine)&#34;]
L1Cache --&gt; L2Cache[&#34;Distributed Cache (Redis Cluster)&#34;]
L2Cache --&gt; DB[Database]
</pre><ul><li><strong>L1 Cache</strong>: 서비스 인스턴스별 로컬 메모리</li><li><strong>L2 Cache</strong>: 중앙 집중식 캐시로 일관성 유지</li><li><strong>갱신 전략</strong>: L2 TTL 만료 + L1 LRU 삭제 조합</li></ul><blockquote><p>동기화를 위한 Kafka/Redis pub-sub 활용 또는 Spring Cache 이벤트 전파 사용 가능</p></blockquote><h5 id=무효화-invalidation-전략>무효화 (Invalidation) 전략<a hidden class=anchor aria-hidden=true href=#무효화-invalidation-전략>#</a></h5><table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>Cache Invalidation</strong></td><td>캐시된 데이터가 더 이상 유효하지 않거나 원본과 불일치할 때, 해당 데이터를 제거 또는 갱신하는 과정</td></tr></tbody></table><ul><li>캐시 무효화는 <strong>성능 최적화와 데이터 일관성 사이에서의 균형 유지 장치</strong>이다.</li><li>단순 TTL 기반부터 이벤트 기반, Pub/Sub, CDC 기반 등 다양한 무효화 전략이 존재하며, 데이터 중요도·시스템 규모·일관성 요구 수준에 따라 선택해야 한다.</li><li>실무에서는 <strong>하이브리드 전략 (자동 TTL + 이벤트 무효화 + 수동 API 등)</strong> 을 조합하고, 분산 환경에서도 전체 노드에 일관된 무효화가 전파되도록 구성해야 한다.</li><li>무효화 정책의 효과를 높이기 위해서는 <strong>자동화, 모니터링, 로그 추적, 테스트 가능성</strong>까지 고려한 설계가 필수적이다.</li></ul><h6 id=무효화가-필요한-대표-상황>무효화가 필요한 대표 상황<a hidden class=anchor aria-hidden=true href=#무효화가-필요한-대표-상황>#</a></h6><table><thead><tr><th>상황</th><th>설명</th></tr></thead><tbody><tr><td>원본 데이터 변경 (쓰기, 삭제)</td><td>DB 나 원본 리소스가 갱신되었는데 캐시에는 변경 사항이 반영되지 않은 경우</td></tr><tr><td>TTL 만료</td><td>캐시된 데이터의 유효 시간이 만료되어 자동으로 제거되어야 하는 경우</td></tr><tr><td>사용자/관리자 요청에 의한 제거</td><td>특정 캐시 항목을 수동으로 제거해야 할 필요가 있을 때 (예: 수동 강제 무효화 버튼 등)</td></tr><tr><td>배포/구성 변경</td><td>릴리스, 설정 변경 등으로 캐시 구조나 키 설계가 바뀌었을 경우 전체 무효화가 필요함</td></tr><tr><td>이벤트 기반 조건 발생</td><td>데이터 상태 변화 이벤트 (ex. 상태값 변경, 승인 완료 등) 에 따른 무효화 트리거 필요</td></tr></tbody></table><h6 id=캐시-무효화-정책-유형>캐시 무효화 정책 유형<a hidden class=anchor aria-hidden=true href=#캐시-무효화-정책-유형>#</a></h6><table><thead><tr><th>정책 유형</th><th>설명</th><th>특징 및 사례</th></tr></thead><tbody><tr><td><strong>TTL 기반 자동 무효화</strong></td><td>데이터에 TTL(Time-To-Live) 을 설정하여 시간 경과 시 자동 제거</td><td>단순, 예측 가능하나 변경 즉시 반영 어려움</td></tr><tr><td><strong>Write-Through Invalidation</strong></td><td>쓰기 요청이 캐시와 원본에 동시에 적용되어 최신 상태 유지</td><td>일관성 유지 강력하지만 성능 부하 증가</td></tr><tr><td><strong>Write-Around + Manual Invalidation</strong></td><td>캐시에 쓰지 않고 원본에만 기록하고, 필요 시 수동으로 캐시 삭제</td><td>쓰기 부하 최소화, 일관성 보장 어렵다</td></tr><tr><td><strong>Write-Behind + Eventual Invalidation</strong></td><td>캐시에 먼저 쓰고 비동기로 원본에 반영하며 TTL 또는 주기적 무효화 적용</td><td>성능 중심, 실시간 반영 어려움</td></tr><tr><td><strong>Explicit Invalidation (API/Trigger)</strong></td><td>API 호출, 이벤트 트리거, DB Trigger 등을 통한 명시적 무효화</td><td>세밀한 제어 가능, 복잡도 높음</td></tr><tr><td><strong>Cache-Aside Pattern</strong></td><td>애플리케이션이 캐시를 직접 관리하며, 갱신 후 수동 무효화하거나 강제 로딩함</td><td>유연한 설계, 일관성 보장 수단 필요</td></tr><tr><td><strong>Event-Driven Invalidation</strong></td><td>Kafka, CDC, Webhook 등을 통해 데이터 변경 이벤트를 수신해 캐시 삭제 수행</td><td>실시간 대응, 아키텍처 요구 높음</td></tr></tbody></table><h6 id=캐시-무효화-아키텍처-패턴>캐시 무효화 아키텍처 패턴<a hidden class=anchor aria-hidden=true href=#캐시-무효화-아키텍처-패턴>#</a></h6><table><thead><tr><th>패턴</th><th>구성 요소</th><th>특징</th></tr></thead><tbody><tr><td><strong>Database Trigger 기반</strong></td><td>DB → 트리거 → 이벤트 → 캐시 삭제</td><td>데이터와 캐시 강한 연결. 변경 즉시 대응 가능. DB 부하 발생 가능성 있음</td></tr><tr><td><strong>Pub/Sub 메시지 기반</strong></td><td>변경 → 이벤트 → 메시지 브로커 → 캐시 노드</td><td>변경 발생 시 모든 캐시 인스턴스에 동기화 가능. Kafka, Redis Pub/Sub 등 활용</td></tr><tr><td><strong>Webhook/HTTP API 기반</strong></td><td>애플리케이션 → Invalidation API 호출</td><td>단일 지점 통제에 유용. 마이크로서비스 간 통신에서 유용</td></tr><tr><td><strong>CDC (Change Data Capture)</strong></td><td>Binlog 또는 Debezium 등 → 이벤트 추출</td><td>실시간 변경 추적 가능. 데이터 연동이 복잡하고 외부 도구 필요</td></tr></tbody></table><h6 id=실무-고려사항>실무 고려사항<a hidden class=anchor aria-hidden=true href=#실무-고려사항>#</a></h6><table><thead><tr><th>고려 항목</th><th>설명</th><th>권장 사항</th></tr></thead><tbody><tr><td><strong>데이터 민감도</strong></td><td>중요하거나 자주 변경되는 데이터는 TTL 외에 명시적 무효화 전략이 필요함</td><td>이벤트 기반 무효화 병행</td></tr><tr><td><strong>성능 vs 일관성</strong></td><td>실시간 일관성은 성능 부하 유발, 반대로 성능 위주 설계는 stale 데이터 문제 유발</td><td>혼합 정책 구성 (Hybrid TTL + Trigger)</td></tr><tr><td><strong>캐시 계층 구조</strong></td><td>L1/L2/L3 캐시 간 무효화 동기화 여부 고려</td><td>분산 캐시 간 브로드캐스트/패턴 필요</td></tr><tr><td><strong>멀티 노드/분산 환경</strong></td><td>무효화 요청이 모든 캐시 노드에 전달되는지 여부 확인 필요</td><td>Consistent Hashing 또는 Pub/Sub 사용</td></tr><tr><td><strong>운영 자동화</strong></td><td>무효화 정책 미적용 시 장애 및 데이터 불일치 문제 발생 가능</td><td>CI/CD 또는 배포 후 무효화 자동화 스크립트 포함</td></tr><tr><td><strong>모니터링 및 로그 추적</strong></td><td>무효화 이벤트가 발생했는지, 반영되었는지를 추적해야 운영상 판단 가능</td><td>캐시 삭제 로그, 무효화 히스토리 추적 도구 구축</td></tr></tbody></table><h3 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>최적화 요소</strong></th><th><strong>설명</strong></th><th><strong>권장사항</strong></th></tr></thead><tbody><tr><td><strong>정책 및 전략</strong></td><td>교체 정책 선택</td><td>데이터 특성 및 접근 패턴에 맞는 캐시 제거 정책 설정</td><td>LRU: 일반 웹 요청, LFU: 분석/랭킹, ARC/CLOCK: 복합 워크로드</td></tr><tr><td></td><td>TTL 및 무효화 설정</td><td>데이터 생명주기에 맞는 TTL 설정 및 무효화 정책 적용</td><td>정적: 1 일, 동적: 1 시간, 실시간: 1~5 분, 이벤트 기반 무효화 병행</td></tr><tr><td></td><td>캐시 쓰기 전략</td><td>쓰기 빈도/일관성에 따라 캐시 - 스토리지 반영 정책 결정</td><td>Write-Through: 실시간 반영, Write-Back: 지연 반영, Write-Around: 일회성 데이터 방지</td></tr><tr><td><strong>메모리 최적화</strong></td><td>압축 및 직렬화 형식 최적화</td><td>캐시 저장 시 데이터 크기와 직렬화/역직렬화 비용 고려</td><td>JSON → MessagePack / Protobuf / Snappy / LZ4 등 경량화 포맷 적용</td></tr><tr><td></td><td>메모리 단편화 관리</td><td>메모리 낭비 방지를 위한 정리 및 할당 전략 필요</td><td>Redis: maxmemory-policy, 주기적 모니터링 및 GC 튜닝</td></tr><tr><td><strong>네트워크 최적화</strong></td><td>분산 캐시 지연 최소화</td><td>노드 간 통신 시 병목/지연 최소화</td><td>캐시 서버를 애플리케이션 근처에 배치, TCP keep-alive, 연결 풀링, 비동기 파이프라이닝 적용</td></tr><tr><td></td><td>배치 처리 및 멀티 요청 활용</td><td>다중 요청을 묶어 처리함으로써 트래픽 감소 및 처리 효율 향상</td><td>Redis Pipeline, Multi-get, Batch Loader 활용</td></tr><tr><td><strong>계층 및 구조 설계</strong></td><td>계층 캐싱 설계</td><td>L1 (local), L2 (distributed), L3 (CDN) 로 나눈 계층별 역할 명확화</td><td>각 계층에 맞는 TTL·정책 적용, 중복 방지, 공유 데이터의 일관성 보장</td></tr><tr><td></td><td>샤딩 및 파티셔닝</td><td>데이터 분산 저장을 통한 확장성 확보</td><td>Consistent Hashing, 키 해시 기반 분산, 핫스팟 회피 전략 병행</td></tr><tr><td></td><td>키 네이밍 전략</td><td>키 충돌 방지 및 명확한 구조화로 관리 용이성 향상</td><td><code>namespace:resource:id:field</code> 형식 권장, 버전 포함 시 <code>v1:</code> 프리픽스 등 적용</td></tr><tr><td><strong>성능 및 동시성</strong></td><td>스탬피드/경합 방지</td><td>인기 데이터 동시 접근 시 과부하 방지 전략 필요</td><td>SingleFlight, Locking, Request Coalescing 적용</td></tr><tr><td></td><td>핫스팟 키 처리</td><td>특정 키에 집중되는 과도한 요청 분산</td><td>키 복제, 접근 분산, TTL 분리 적용, 모니터링 기반 알림 설정</td></tr><tr><td></td><td>초기 워밍업 전략</td><td>콜드 스타트 상황에서 초기 적중률 향상</td><td>백그라운드 프리로딩, 인기 콘텐츠 선제 적재, AI 기반 패턴 분석 적용</td></tr><tr><td><strong>운영 및 자동화</strong></td><td>모니터링 및 자동조정</td><td>실시간 운영 상태 관찰 및 적중률 기반 조정 전략</td><td>Prometheus, Grafana, Datadog 등 연동, 자동 알림 및 TTL 조정</td></tr><tr><td></td><td>장애/오염 대응</td><td>캐시 오염, 스탬피드, 동기화 실패 등에 대한 자동 복구 체계 구축</td><td>오염 감지 시 TTL 만료, 백업 데이터 fallback, 복제 실패 감지 및 복구</td></tr><tr><td></td><td>동기화 및 일관성 유지</td><td>분산 환경에서 캐시 데이터 일관성 보장</td><td>이벤트 기반 무효화, 최종 일관성 모델 검토, 복제지연 허용 여부 결정</td></tr></tbody></table><ul><li><p><strong>정책 및 전략</strong>:<br>캐시 적중률과 일관성을 동시에 만족하려면 교체 알고리즘, TTL, 쓰기 정책을 상황에 맞게 조합해야 한다. 특히 동적 컨텐츠는 TTL 만으로 부족하므로 <strong>이벤트 기반 무효화</strong>가 병행되어야 한다.</p></li><li><p><strong>메모리 최적화</strong>:<br>메모리 사용량을 줄이는 것이 캐시 효율성에 직접적 영향을 미친다. JSON 은 직렬화 속도가 느리고 부피가 크므로 <strong>MessagePack, Protobuf, LZ4</strong> 등의 바이너리 포맷을 우선 고려해야 한다.</p></li><li><p><strong>네트워크 최적화</strong>:<br>분산 환경에서 <strong>배치 처리</strong>, <strong>멀티 요청</strong>, <strong>노드 지연 최소화</strong>는 대규모 트래픽 시 병목을 막기 위한 핵심이다. 파이프라이닝과 멀티 -GET 은 필수적인 최적화 기술이다.</p></li><li><p><strong>계층 및 구조 설계</strong>:<br>L1~L3 계층 캐싱 구조를 갖추면 요청에 따른 응답 속도와 부하를 분산시킬 수 있다. <strong>샤딩, 키 설계, 계층별 TTL 적용</strong>을 통해 복잡한 시스템에서도 일관성과 성능을 확보할 수 있다.</p></li><li><p><strong>성능 및 동시성 제어</strong>:<br>인기 콘텐츠나 병렬 요청으로 인한 병목 문제는 시스템 전체에 영향을 준다. 스탬피드 방지, <strong>싱글플라이트 처리</strong>, <strong>핫스팟 회피</strong> 등의 제어 전략이 필요하다.</p></li><li><p><strong>운영 및 자동화</strong>:<br>실시간 모니터링과 자동 대응은 장애 예방과 서비스 안정성에 필수이다. 캐시 오염/무효화 실패/복제 지연 등은 <strong>자동 감지 및 복구 정책</strong>을 통해 완화할 수 있어야 한다.</p></li></ul><h3 id=주제별-주목할-내용>주제별 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제별-주목할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>항목/키워드</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>1. 정책 및 전략</strong></td><td>만료 및 무효화</td><td>TTL, 수동/자동 Invalidation</td><td>데이터 일관성과 신선도 유지에 핵심 역할</td></tr><tr><td></td><td>쓰기 전략</td><td>Write-Through / Write-Back / Cache-Aside</td><td>쓰기 시점과 방식에 따른 동기화/일관성 전략</td></tr><tr><td></td><td>캐시락</td><td>SingleFlight, Locking</td><td>Cache Stampede 방지</td></tr><tr><td></td><td>하이브리드 캐싱 전략</td><td>Local + Distributed, 멀티레이어</td><td>상황에 맞는 조합형 캐시 전략</td></tr><tr><td><strong>2. 성능 및 운영</strong></td><td>캐시 적중률 모니터링</td><td>Hit Ratio, Miss Ratio</td><td>캐시 효과를 측정하고 운영 전략에 반영</td></tr><tr><td></td><td>캐시 오염 및 스탬피드</td><td>Cache Pollution, Thundering Herd</td><td>무효 데이터나 트래픽 폭주 대응</td></tr><tr><td></td><td>교체 알고리즘</td><td>LRU, LFU, ARC 등</td><td>메모리 최적화와 적중률 개선</td></tr><tr><td></td><td>캐시 워밍업 / 콜드스타트</td><td>Preload / Lazy-load</td><td>초기 성능 안정화 또는 리스크 감소</td></tr><tr><td><strong>3. 분산 시스템</strong></td><td>Consistent Hashing</td><td>키 재분배 최소화</td><td>노드 변경에 유연하게 대응 가능</td></tr><tr><td></td><td>Sharding / Partitioning</td><td>데이터 수평 분할</td><td>대규모 처리 성능 확보 및 확장성 확보</td></tr><tr><td></td><td>Replication</td><td>고가용성 확보</td><td>장애 시 빠른 복구 지원</td></tr><tr><td><strong>4. 보안 및 규정</strong></td><td>캐시 보안</td><td>데이터 암호화, 접근 제어</td><td>메모리 내 민감 정보 보호 및 사용자 분리</td></tr><tr><td></td><td>GDPR / 규제 준수</td><td>개인정보 캐싱 제한</td><td>규제가 있는 환경에서의 설계 고려 사항</td></tr><tr><td></td><td>제로 트러스트 캐싱</td><td>무신뢰 기반 보호</td><td>보안 요구사항 높은 환경에 적합</td></tr><tr><td><strong>5. 신기술 적용</strong></td><td>ML 기반 캐싱</td><td>예측적 캐싱 (Predictive Caching)</td><td>사용자 행동 패턴 기반 proactive caching</td></tr><tr><td></td><td>엣지 캐싱</td><td>Edge CDN, IoT 캐싱</td><td>초저지연 대응, 지역 기반 분산처리</td></tr><tr><td></td><td>서버리스 캐싱</td><td>Lambda + Cache Layer</td><td>콜드 스타트 대응, 상태 유지</td></tr><tr><td></td><td>실시간 분석 캐싱</td><td>Streaming Cache</td><td>실시간 데이터 처리 성능 확보</td></tr><tr><td></td><td>블록체인 기반 캐싱</td><td>Distributed Ledger</td><td>탈중앙화 및 데이터 무결성 보장</td></tr><tr><td><strong>6. 기술별 응용</strong></td><td>DB 캐시</td><td>Query Result Cache, Materialized Views</td><td>쿼리 처리 성능 최적화</td></tr><tr><td></td><td>LLM 캐싱</td><td>대규모 언어 모델 결과 캐싱</td><td>추론 비용 및 반복 응답 시간 절감</td></tr><tr><td></td><td>GPU 캐싱</td><td>CUDA 통합 메모리</td><td>GPU 워크로드 최적화</td></tr><tr><td></td><td>컨테이너 캐싱</td><td>Pod 간 캐시 공유, Sidecar 활용</td><td>마이크로서비스 환경에서 캐시 활용 최적화</td></tr><tr><td><strong>7. 웹 아키텍처</strong></td><td>CDN with Signed URL</td><td>인증이 필요한 정적 리소스 안전 제공</td><td>접근 제어와 고속 응답 동시 만족</td></tr><tr><td></td><td>마이크로프론트엔드 캐싱</td><td>독립 컴포넌트 간 데이터 캐시 공유</td><td>프론트 단위로 효율적 캐시 구조 구성</td></tr><tr><td></td><td>서비스 메시 캐싱</td><td>Istio, Linkerd 연동</td><td>마이크로서비스 간 통신 최적화</td></tr></tbody></table><ul><li><p><strong>정책 및 전략</strong><br>캐시의 유지 조건과 쓰기 동기화 방식은 전체 일관성과 성능에 직결된다. TTL, 쓰기 전략, 무효화 정책, 캐시락 등은 캐시의 신뢰성과 시스템 안정성을 좌우하는 핵심 요소다.</p></li><li><p><strong>성능 및 운영</strong><br>캐시가 얼마나 효과적으로 작동하는지 판단하려면 히트율, 교체 정책, 오염 문제, 워밍업 전략을 반드시 고려해야 한다. 적절한 운영지표와 예측 기반 대응이 캐시 품질을 좌우한다.</p></li><li><p><strong>분산 시스템</strong><br>분산 캐시 환경에서는 확장성과 복원력을 높이기 위해 샤딩, 일관성 해싱, 복제 등의 기법을 전략적으로 활용해야 하며, 이는 고성능/고가용성 시스템 설계의 필수 요소다.</p></li><li><p><strong>보안 및 규정</strong><br>암호화, 접근 제어, 개인정보 보호는 캐시가 민감한 데이터를 다룰 때 반드시 고려해야 하는 요소다. 보안과 규정 준수를 위한 아키텍처는 캐시 시스템의 신뢰성과 기업의 책임성을 결정짓는다.</p></li><li><p><strong>신기술 적용</strong><br>인공지능, 엣지, 서버리스, 블록체인 등과 결합된 캐싱은 새로운 환경과 요구사항에 적응한 고도화된 전략을 제공하며, 사전 예측과 분산 처리, 무상태 환경에서 특히 강력한 효과를 발휘한다.</p></li><li><p><strong>기술별 응용</strong><br>LLM, GPU, DB 등 특수한 워크로드에 최적화된 캐싱은 각각의 처리 단위에서 자원 효율성을 크게 높이고, 특정 시스템 구성과 목적에 맞춘 캐시 전략 설계가 필요하다.</p></li><li><p><strong>웹 아키텍처</strong><br>CDN, 서비스 메시, 마이크로프론트엔드 등 최신 웹 아키텍처에서의 캐싱은 성능 최적화뿐 아니라 보안, 분산, 사용자 경험을 종합적으로 만족시키는 고급 구조 요소로 자리잡고 있다.</p></li></ul><h3 id=반드시-학습해야할-내용>반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#반드시-학습해야할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>핵심 항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>기초 이론</strong></td><td>메모리 계층 구조</td><td>Memory Hierarchy, Cache Locality</td><td>캐시가 위치하는 계층 구조 이해 (CPU ↔ RAM ↔ Disk), 시간적/공간적 지역성 최적화 기반</td></tr><tr><td></td><td>일관성 모델</td><td>Strong, Eventual, Causal Consistency</td><td>분산 캐시 환경에서의 데이터 정합성 보장 모델들</td></tr><tr><td></td><td>가상 메모리 및 주소 공간</td><td>Paging, Swapping, MMU</td><td>OS 와 캐시 사이 메모리 구조 및 성능 영향 이해</td></tr><tr><td><strong>알고리즘 및 정책</strong></td><td>캐시 교체 알고리즘</td><td>LRU, LFU, ARC, CLOCK, FIFO</td><td>캐시 공간 초과 시 데이터 제거 기준으로 성능과 적중률에 직접적 영향</td></tr><tr><td></td><td>해시 알고리즘</td><td>Consistent Hashing</td><td>분산 캐시에서 노드 증감 시 데이터 재배치 최소화</td></tr><tr><td></td><td>무효화 및 TTL 정책</td><td>TTL, Write-through, Write-back, Manual Invalidation</td><td>데이터 변경 시 캐시 갱신/제거 방법, 일관성과 최신성 유지 전략</td></tr><tr><td><strong>구현 기술</strong></td><td>캐시 전략 유형</td><td>Cache-Aside, Write-Through, Write-Behind</td><td>시스템 요구에 따라 적합한 캐시 쓰기/읽기 전략 선택 필수</td></tr><tr><td></td><td>계층적 캐싱 구조</td><td>Local, Distributed, CDN/Edge</td><td>클라이언트 -API-DB 간의 계층에 따라 서로 다른 캐시 위치 적용</td></tr><tr><td></td><td>캐시 미들웨어 및 프레임워크</td><td>Redis, Memcached, Caffeine, Guava, CDN</td><td>기술 선택, 조합 전략 및 운영 관리 역량 필수</td></tr><tr><td><strong>성능 분석 및 튜닝</strong></td><td>메트릭 분석</td><td>Hit/Miss Ratio, Load Time, Memory Usage</td><td>캐시 시스템의 성능을 수치화하여 튜닝 및 개선 방향 도출</td></tr><tr><td></td><td>캐시 오염 및 장애 대응</td><td>Cache Stampede, Poisoning, Fallback</td><td>캐시의 실패/오염 시 대응 전략 및 자동화 기술 적용 필요</td></tr><tr><td><strong>보안 및 운영</strong></td><td>민감 데이터 보호</td><td>암호화, 마스킹, 필터링</td><td>캐시에 저장되는 개인정보/기밀 정보 보호</td></tr><tr><td></td><td>다중 테넌시 환경 캐싱</td><td>Namespace Isolation, Key Prefixing</td><td>SaaS, 멀티테넌트 환경에서의 테넌트 간 캐시 격리 전략</td></tr><tr><td></td><td>모니터링 및 자동화 운영</td><td>Alerting, Auto-Invalidate, Self-Healing</td><td>실시간 운영 상태 파악 및 자동 회복 기능</td></tr></tbody></table><ul><li><p><strong>기초 이론</strong>:<br>캐시의 본질을 이해하기 위해서는 메모리 계층 구조, 캐시 지역성, 일관성 모델과 같은 컴퓨터 아키텍처 및 운영체제 개념을 반드시 숙지해야 한다. 특히 분산 캐시에서는 일관성 모델이 데이터 정합성 유지에 중요한 역할을 하며, 가상 메모리 구조와의 상호작용도 성능에 영향을 준다.</p></li><li><p><strong>알고리즘 및 정책</strong>:<br>캐시가 어떤 데이터를 유지하고 어떤 데이터를 제거할지를 결정하는 정책은 시스템 전체의 효율성과 직결된다. LRU, LFU, ARC 등의 교체 알고리즘과 TTL/무효화 정책은 캐시 품질을 결정짓는 핵심이다. 특히 분산 캐시에서는 일관성 해싱 알고리즘이 필수적이다.</p></li><li><p><strong>구현 기술</strong>:<br>단일 캐시 전략이 아니라, 시스템 구성에 따라 다양한 전략 (Cache-aside, Write-through 등) 을 상황에 맞게 적용해야 한다. Redis, CDN, 로컬 캐시 등 기술별 특성과 조합 전략도 반드시 학습 대상이다.</p></li><li><p><strong>성능 분석 및 튜닝</strong>:<br>캐시의 효과는 수치로 측정되어야 하며, 적중률 (hit rate), 응답 시간, 메모리 사용량 등의 메트릭 기반 분석이 튜닝의 핵심이다. 또한 캐시 스탬피드나 오염 (Cache Poisoning) 대응 전략도 고가용성을 위한 필수 학습 항목이다.</p></li><li><p><strong>보안 및 운영</strong>:<br>캐시는 성능 향상만큼이나 보안과 안정성이 중요하다. 민감 정보는 반드시 암호화하거나 접근 제어를 적용해야 하며, 멀티 테넌트 환경에서는 테넌트 간의 캐시 분리를 위한 전략이 필요하다. 또한 운영 중 모니터링과 자동화된 장애 복구 기능은 실전 환경의 요구사항이다.</p><hr></li></ul><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th><strong>카테고리</strong></th><th><strong>용어</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>1. 기본 개념</strong></td><td>Cache</td><td>자주 사용되는 데이터를 임시로 저장하여 빠르게 접근하도록 하는 메커니즘</td></tr><tr><td></td><td>Cache Hit</td><td>요청한 데이터가 캐시에 존재하는 경우</td></tr><tr><td></td><td>Cache Miss</td><td>요청한 데이터가 캐시에 없어 원본 소스에서 조회해야 하는 경우</td></tr><tr><td></td><td>Cache Hit Ratio</td><td>전체 요청 중 캐시에서 데이터를 찾은 비율</td></tr><tr><td></td><td>TTL (Time To Live)</td><td>캐시된 항목의 유효 시간. 만료되면 자동 삭제됨</td></tr><tr><td></td><td>Eviction</td><td>캐시 용량 초과 시 데이터를 제거하는 행위</td></tr><tr><td></td><td>Cache Warming</td><td>서비스 시작 전 또는 사전 로딩 시 데이터를 미리 캐시에 적재</td></tr><tr><td></td><td>Cold Start</td><td>캐시가 비어 있어 초기 성능 저하가 발생하는 상태</td></tr><tr><td><strong>2. 캐시 정책 (쓰기/일관성)</strong></td><td>Write-Through</td><td>캐시와 원본 저장소 (DB) 에 동시에 쓰는 전략</td></tr><tr><td></td><td>Write-Back</td><td>캐시에 먼저 쓰고 일정 시점에 원본에 반영하는 전략</td></tr><tr><td></td><td>Write-Around</td><td>캐시에 쓰지 않고 원본에만 쓰며, 읽기 시 캐시 적용</td></tr><tr><td></td><td>Cache-Aside (Lazy Loading)</td><td>애플리케이션이 직접 캐시에 조회 후 없을 시 원본에서 가져와 저장</td></tr><tr><td></td><td>Cache Invalidation</td><td>데이터 변경 시 캐시를 명시적 또는 자동으로 제거/갱신하는 과정</td></tr><tr><td></td><td>Dirty Data</td><td>캐시에 저장된 데이터가 원본과 불일치된 상태</td></tr><tr><td><strong>3. 교체 알고리즘</strong></td><td>LRU (Least Recently Used)</td><td>가장 오랫동안 사용되지 않은 항목 제거</td></tr><tr><td></td><td>LFU (Least Frequently Used)</td><td>가장 적게 사용된 항목 제거</td></tr><tr><td></td><td>FIFO (First In First Out)</td><td>가장 먼저 들어온 항목 제거</td></tr><tr><td></td><td>ARC (Adaptive Replacement Cache)</td><td>LRU 와 LFU 를 조합한 적응형 캐시 교체 알고리즘</td></tr><tr><td><strong>4. 성능 지표</strong></td><td>Hit Ratio</td><td>캐시 히트율. 캐시가 얼마나 잘 작동하는지 나타내는 주요 지표</td></tr><tr><td></td><td>Latency</td><td>요청부터 응답까지 걸리는 시간</td></tr><tr><td></td><td>Throughput</td><td>단위 시간당 처리 가능한 요청 수</td></tr><tr><td><strong>5. 분산 캐시 구조</strong></td><td>Sharding</td><td>데이터를 해시 기반으로 여러 노드에 분산 저장하는 기법</td></tr><tr><td></td><td>Replication</td><td>데이터 복제본을 여러 노드에 저장하여 가용성 확보</td></tr><tr><td></td><td>Consistent Hashing</td><td>노드 추가/제거 시 최소한의 데이터만 재배치하는 해싱 기법</td></tr><tr><td></td><td>Partitioning</td><td>데이터를 논리적으로 분할해 여러 서버에 저장</td></tr><tr><td><strong>6. 구현 기술</strong></td><td>Redis</td><td>키 - 값 기반의 오픈소스 인메모리 캐시 저장소 (Persistence, Pub/Sub, Sentinel 기능 포함)</td></tr><tr><td></td><td>Memcached</td><td>고성능 분산 메모리 캐시 시스템. 단순한 키 - 값 캐시에 적합</td></tr><tr><td></td><td>Redis Sentinel</td><td>Redis 고가용성을 위한 마스터 감시 및 자동 전환 구성 도구</td></tr><tr><td></td><td>CDN (Content Delivery Network)</td><td>글로벌 엣지 서버에 캐시를 유지하여 사용자와 가까운 위치에서 콘텐츠 제공</td></tr><tr><td></td><td>Edge Server</td><td>사용자에 가까운 위치에 배치된 캐시 서버로 빠른 응답 제공</td></tr><tr><td><strong>7. 문제 상황</strong></td><td>Cache Stampede</td><td>캐시가 만료된 시점에 다수 요청이 동시에 원본 시스템으로 몰리는 현상</td></tr><tr><td></td><td>Hot Key</td><td>특정 키에 대해 집중적인 트래픽이 발생해 부하가 몰리는 현상</td></tr><tr><td></td><td>Thundering Herd</td><td>수많은 요청이 동시에 캐시 미스를 일으켜 백엔드에 부담을 주는 패턴</td></tr><tr><td></td><td>Cache Pollution</td><td>자주 사용되지 않는 데이터가 캐시를 차지해 효율성을 떨어뜨리는 문제</td></tr></tbody></table><ul><li><strong>기본 개념과 쓰기 전략, 교체 알고리즘</strong>은 캐시 구성의 핵심 축이며, 정책 수립 시 반드시 명확히 구분해야 함.</li><li><strong>분산 구조 관련 용어 (Sharding, Replication, Consistent Hashing)</strong> 는 고가용성과 수평 확장을 위한 핵심 기법으로, 클러스터 기반 운영 시 필수 고려 요소임.</li><li><strong>성능 지표 (Hit Ratio, Latency 등)</strong> 는 캐시의 효과를 측정하고 튜닝 포인트를 찾기 위한 중요한 분석 지표임.</li><li><strong>문제 상황 (Herd, Stampede, Hot Key 등)</strong> 은 대규모 서비스 환경에서 캐시 실패가 시스템 전반에 미치는 영향을 나타내며, 이를 방지하기 위한 설계적 대응이 필요함.</li></ul><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><a href=https://aws.amazon.com/caching/>AWS Caching 가이드</a></li><li><a href=https://aws.amazon.com/caching/best-practices/>AWS 캐싱 전략 Best Practices</a></li><li><a href=https://aws.amazon.com/caching/>AWS Caching Overview</a></li><li><a href=https://aws.amazon.com/caching/>AWS Caching 공식 문서</a></li><li><a href=https://aws.amazon.com/caching/>AWS Caching Best Practices</a></li><li><a href=https://aws.amazon.com/ko/caching/>AWS 캐싱 공식 설명</a></li><li><a href=https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/BestPractices.html>AWS ElastiCache 모범 사례</a></li><li><a href=https://aws.amazon.com/blogs/architecture/caching-design-patterns/>Caching Design Patterns - AWS Architecture Blog</a></li><li><a href=https://aws.amazon.com/ko/blogs/architecture/cache-invalidation-strategies-with-amazon-elasticache/>Cache Invalidation Strategies – AWS Architecture Blog</a></li><li><a href=https://redis.io/docs/>Redis 공식 문서</a></li><li><a href=https://redis.io/docs/>Redis 공식 Documentation</a></li><li><a href=https://redis.io/glossary/distributed-caching/>Redis 분산 캐싱 문서</a></li><li><a href=https://redis.io/docs/use-cases/caching/>Redis Caching Use Cases - Redis Docs</a></li><li><a href=https://memcached.org/documentation>Memcached 공식 문서</a></li><li><a href=https://memcached.org/>Memcached Best Practices - Memcached.org</a></li><li><a href=https://github.com/memcached/memcached/wiki>Memcached 위키</a></li><li><a href=https://learn.microsoft.com/en-us/aspnet/core/performance/caching/distributed>Microsoft .NET 캐싱 문서</a></li><li><a href=https://docs.microsoft.com/azure/architecture/best-practices/caching>Microsoft - 캐싱 모범 사례</a></li><li><a href=https://docs.microsoft.com/en-us/azure/azure-cache-for-redis/>Microsoft Azure Cache for Redis</a></li><li><a href=https://learn.microsoft.com/en-us/azure/azure-cache-for-redis/cache-overview>Azure Cache for Redis 설명</a></li><li><a href=https://cloud.google.com/memorystore/docs>Google Cloud Memorystore 문서</a></li><li><a href=https://cloud.google.com/memorystore/docs/redis>Google Cloud Memorystore for Redis</a></li><li><a href=https://www.cloudflare.com/learning/cdn/what-is-caching/>Cloudflare CDN 및 캐싱 설명</a></li><li><a href=https://developers.cloudflare.com/cache/>Cloudflare CDN Cache Explained</a></li><li><a href=https://www.cloudflare.com/learning/cdn/what-is-caching/>Cloudflare CDN 개요</a></li><li><a href=https://www.akamai.com/solutions/edge-caching>Akamai - 에지 캐싱 문서</a></li><li><a href=https://www.akamai.com/resources/what-is-caching>Akamai Cache 설명</a></li><li><a href=https://developers.cloudflare.com/cache/about/>CDN의 캐싱 – Cloudflare Docs</a></li><li><a href=https://www.nginx.com/blog/nginx-caching-guide/>Nginx 캐싱 가이드</a></li><li><a href=https://martinfowler.com/bliki/TwoHardThings.html>Martin Fowler - 캐시 패턴</a></li><li><a href=https://martinfowler.com/bliki/Cache.html>Martin Fowler - Caching Patterns</a></li><li><a href=https://www.geeksforgeeks.org/caching-system-design-concept-for-beginners/>GeeksforGeeks 캐시 시스템 설계</a></li><li><a href=https://www.geeksforgeeks.org/caching-in-computer-science/>Caching - Fundamentals, Types, and Best Practices – GeeksforGeeks</a></li><li><a href=https://www.geeksforgeeks.org/cache-eviction-policies-system-design/>Cache Eviction Policies - GeeksforGeeks</a></li><li><a href=https://www.geeksforgeeks.org/cache-memory-in-computer-organization/>캐시와 캐싱 전략 기본 개념(geeksforgeeks)</a></li><li><a href=https://medium.com/must-know-computer-science/system-design-caching-acbd1b02ca01>System Design — Caching - Medium</a></li><li><a href=https://medium.com/system-design>Caching Strategies in System Design – Medium</a></li><li><a href=https://medium.com/geekculture/caching-strategies-in-a-microservice-architecture-c77ea15b8b01>Ethan Anderson의 &ldquo;마이크로서비스 아키텍처에서의 캐싱 전략&rdquo;</a></li><li><a href=https://levelup.gitconnected.com/cache-consistency-in-distributed-systems-a-practical-guide-b7dc8d143e49>Dmitry Afanasiev의 &ldquo;분산 시스템에서의 캐싱 일관성&rdquo;</a></li><li><a href=https://www.educative.io/blog/caching-system-design>Caching in System Design – Educative</a></li><li><a href=https://systemdesignschool.io/fundamentals/caching>Caching in System Design: Everything You Need to Know</a></li><li><a href=https://www.redhat.com/en/topics/data/caching>Caching in Distributed Systems – RedHat</a></li><li><a href=https://en.wikipedia.org/wiki/Cache_replacement_policies>Cache replacement policies - Wikipedia</a></li><li><a href=https://en.wikipedia.org/wiki/MESI_protocol>MESI Protocol Wikipedia</a></li><li><a href=https://www.frontiersin.org/journals/computer-science/articles/10.3389/fcomp.2025.1511161/full>Cache Coherence Protocols 논문</a></li><li><a href=https://en.wikipedia.org/wiki/Cache_stampede>캐싱 일관성/오염/스탬피드 문제 분석</a></li><li><a href=https://netflixtechblog.com/>High-Performance Caching – Netflix TechBlog</a></li><li><a href=http://highscalability.com/blog/2016/1/25/caching-patterns.html>High Scalability - Caching Patterns</a></li><li><a href=https://f-lab.kr/insight/understanding-cache-and-optimization-strategies>F-Lab 캐시 최적화 전략</a></li><li><a href=https://velog.io/@hyejin4169/%EC%BA%90%EC%8B%9C%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B4%EA%B3%A0-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8F%99%EC%9E%91%ED%95%98%EB%8A%94%EA%B0%80>캐시 동작 원리 상세 설명(velog)</a></li><li><a href=https://woozzang.tistory.com/155>시스템 캐시와 메모리 계층 구조(wooZzang)</a></li><li><a href=https://velog.io/@jinh2352/%EA%B3%A0%EC%84%B1%EB%8A%A5-%ED%94%84%EB%A1%9C%EC%84%B8%EC%84%9C%EC%9D%98-%ED%95%84%EC%88%98-%EC%A1%B0%EA%B1%B4-%EB%98%91%EB%98%91%ED%95%9C-%EC%BA%90%EC%8B%9C>CPU 캐시 설계 고려사항(velog)</a></li><li><a href=https://wikidocs.net/65523>캐시 메모리 개념 및 매핑 기법(위키독스)</a></li><li><a href=https://wslog.dev/cs-cache>캐시의 등장 배경과 동작 원리(WooSeok.log)</a></li><li><a href=https://ignite.apache.org/arch/memorycentric.html>Apache Ignite 아키텍처 가이드</a></li><li><a href=https://cloud.google.com/memorystore/docs/redis>Google Cloud Memorystore for Redis</a></li><li><a href=https://cloud.google.com/memorystore/docs>Google Cloud Memorystore 문서</a></li></ul><hr><hr><hr><hr><hr><h3 id=동시-미스-cache-stampede-cache-thundering-herd>동시 미스 (Cache Stampede, Cache Thundering Herd)<a hidden class=anchor aria-hidden=true href=#동시-미스-cache-stampede-cache-thundering-herd>#</a></h3><p>캐시 항목이 만료되었거나 아직 적재되지 않은 상황에서, <strong>다수의 요청이 동시에 원본 데이터 소스로 쏠려</strong> 백엔드 (예: DB, API) 에 부하를 주는 현상을 말한다. 예를 들어, 인기 상품 정보를 캐시하고 있다가 TTL 만료 순간 수천 개의 요청이 동시에 캐시 미스를 발생시키면, 모든 요청이 DB 에 쿼리를 날려 <strong>서버 과부하 → 장애로 이어질 수 있다</strong>.</p><p><strong>방지 로직 및 전략</strong></p><table><thead><tr><th>전략</th><th>설명</th><th>예시 또는 기술 적용 방식</th></tr></thead><tbody><tr><td><strong>Mutex Lock</strong> (Mutual Exclusion)</td><td>최초 한 요청만 DB 에서 데이터를 가져오고, 나머지는 대기하거나 실패 처리</td><td>Redis <code>SETNX</code> 를 사용해 락 획득 후 캐시 로딩</td></tr><tr><td><strong>Request Coalescing</strong></td><td>첫 번째 요청이 데이터를 가져오고, 나머지 요청은 해당 결과를 공유</td><td>Go / Node.js 에서 Promise 공유로 구현</td></tr><tr><td><strong>Early Refresh / Pre-warming</strong></td><td>TTL 이 만료되기 전에 백그라운드에서 미리 갱신</td><td>Refresh-Ahead 캐시 전략</td></tr><tr><td><strong>Stale-While-Revalidate</strong></td><td>TTL 이 만료된 데이터를 응답하고, 백그라운드에서 최신화</td><td>Fastly, Varnish, Cloudflare 에서 기본 지원</td></tr><tr><td><strong>Exponential Backoff + Retry</strong></td><td>캐시 미스 시 클라이언트가 지연 재시도하여 부하를 분산</td><td>클라이언트 또는 프록시에서 재시도 전략 설정</td></tr><tr><td><strong>Randomized TTL (Jitter)</strong></td><td>동일 시점에 TTL 만료되는 것을 방지하기 위해 캐시 만료시간을 랜덤하게 설정</td><td>TTL = 300s + random(0~60s) 식 적용</td></tr></tbody></table><p><strong>Redis 기반 Mutex 예시 (Python)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-45-1><a class=lnlinks href=#hl-45-1> 1</a>
</span><span class=lnt id=hl-45-2><a class=lnlinks href=#hl-45-2> 2</a>
</span><span class=lnt id=hl-45-3><a class=lnlinks href=#hl-45-3> 3</a>
</span><span class=lnt id=hl-45-4><a class=lnlinks href=#hl-45-4> 4</a>
</span><span class=lnt id=hl-45-5><a class=lnlinks href=#hl-45-5> 5</a>
</span><span class=lnt id=hl-45-6><a class=lnlinks href=#hl-45-6> 6</a>
</span><span class=lnt id=hl-45-7><a class=lnlinks href=#hl-45-7> 7</a>
</span><span class=lnt id=hl-45-8><a class=lnlinks href=#hl-45-8> 8</a>
</span><span class=lnt id=hl-45-9><a class=lnlinks href=#hl-45-9> 9</a>
</span><span class=lnt id=hl-45-10><a class=lnlinks href=#hl-45-10>10</a>
</span><span class=lnt id=hl-45-11><a class=lnlinks href=#hl-45-11>11</a>
</span><span class=lnt id=hl-45-12><a class=lnlinks href=#hl-45-12>12</a>
</span><span class=lnt id=hl-45-13><a class=lnlinks href=#hl-45-13>13</a>
</span><span class=lnt id=hl-45-14><a class=lnlinks href=#hl-45-14>14</a>
</span><span class=lnt id=hl-45-15><a class=lnlinks href=#hl-45-15>15</a>
</span><span class=lnt id=hl-45-16><a class=lnlinks href=#hl-45-16>16</a>
</span><span class=lnt id=hl-45-17><a class=lnlinks href=#hl-45-17>17</a>
</span><span class=lnt id=hl-45-18><a class=lnlinks href=#hl-45-18>18</a>
</span><span class=lnt id=hl-45-19><a class=lnlinks href=#hl-45-19>19</a>
</span><span class=lnt id=hl-45-20><a class=lnlinks href=#hl-45-20>20</a>
</span><span class=lnt id=hl-45-21><a class=lnlinks href=#hl-45-21>21</a>
</span><span class=lnt id=hl-45-22><a class=lnlinks href=#hl-45-22>22</a>
</span><span class=lnt id=hl-45-23><a class=lnlinks href=#hl-45-23>23</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>redis</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>r</span> <span class=o>=</span> <span class=n>redis</span><span class=o>.</span><span class=n>Redis</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_with_cache_lock</span><span class=p>(</span><span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span> <span class=o>=</span> <span class=n>r</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>value</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>lock_key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>:lock&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>got_lock</span> <span class=o>=</span> <span class=n>r</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>lock_key</span><span class=p>,</span> <span class=s2>&#34;1&#34;</span><span class=p>,</span> <span class=n>nx</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>ex</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>got_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 이 요청만 DB에 접근</span>
</span></span><span class=line><span class=cl>        <span class=n>value</span> <span class=o>=</span> <span class=n>query_db</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>r</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>ex</span><span class=o>=</span><span class=mi>300</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>r</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>lock_key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 잠시 대기 후 캐시 다시 시도</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.05</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>r</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=26-캐시-미스-처리-전략-비교-표>26. 캐시 미스 처리 전략 비교 (표)<a hidden class=anchor aria-hidden=true href=#26-캐시-미스-처리-전략-비교-표>#</a></h2><table><thead><tr><th>전략</th><th>설명</th><th>장점</th><th>단점</th></tr></thead><tbody><tr><td><strong>Lazy Loading (Cache-aside)</strong></td><td>요청 시 캐시 미스 → DB 조회 후 저장</td><td>구현 단순</td><td>빈번한 미스 시 부하 증가</td></tr><tr><td><strong>Read-through</strong></td><td>미스 발생 시 캐시 계층이 자동으로 원본 접근</td><td>일관성 유지</td><td>구현 복잡도 증가</td></tr><tr><td><strong>Write-through</strong></td><td>쓰기 시 캐시 + DB 동시 반영</td><td>일관성 보장</td><td>쓰기 지연 발생 가능</td></tr><tr><td><strong>Write-behind</strong></td><td>캐시에 먼저 쓰고, DB 는 나중에 업데이트</td><td>응답 속도 빠름</td><td>장애 시 데이터 손실 위험</td></tr><tr><td><strong>Refresh Ahead</strong></td><td>TTL 만료 전 미리 갱신</td><td>Cold Start 예방</td><td>복잡한 로직 필요</td></tr></tbody></table><hr><h2 id=-1-redis-vs-memcached-심층-비교>✅ 1. Redis Vs Memcached 심층 비교<a hidden class=anchor aria-hidden=true href=#-1-redis-vs-memcached-심층-비교>#</a></h2><h3 id=-핵심-비교표>📌 핵심 비교표<a hidden class=anchor aria-hidden=true href=#-핵심-비교표>#</a></h3><table><thead><tr><th>항목</th><th>Redis</th><th>Memcached</th></tr></thead><tbody><tr><td><strong>데이터 구조</strong></td><td>다양한 자료구조 지원 (String, List, Set, Hash, Sorted Set, Stream 등)</td><td>Key-Value 형태의 String 만 지원</td></tr><tr><td><strong>Persistence (영속성)</strong></td><td>AOF(Append Only File), RDB Snapshot 지원</td><td>비영속 (재시작 시 데이터 소실)</td></tr><tr><td><strong>복제/클러스터링</strong></td><td>Redis Sentinel, Redis Cluster 로 고가용성</td><td>클러스터 불가, 단일 인스턴스 또는 sharding 필요</td></tr><tr><td><strong>스크립트 지원</strong></td><td>Lua 스크립트 지원</td><td>없음</td></tr><tr><td><strong>메모리 최적화</strong></td><td>LRU/LFU/TTL 조합 지원, 메모리 압축 가능</td><td>LRU/TTL 만 지원</td></tr><tr><td><strong>성능</strong></td><td>약간 낮음 (기능 많아서)</td><td>빠름 (경량 구조)</td></tr><tr><td><strong>보안</strong></td><td>인증, TLS, Role 지원</td><td>인증 없음, 보안 취약</td></tr><tr><td><strong>사용 예시</strong></td><td>세션 캐시, 메시지 큐, 스트림 처리</td><td>API 응답, 짧은 TTL 데이터</td></tr><tr><td><strong>운영 복잡도</strong></td><td>약간 높음 (기능 많음)</td><td>매우 단순</td></tr></tbody></table><h3 id=-기술-적용-추천>📌 기술 적용 추천<a hidden class=anchor aria-hidden=true href=#-기술-적용-추천>#</a></h3><table><thead><tr><th>상황</th><th>권장 선택</th></tr></thead><tbody><tr><td><strong>정형 키 - 값, 휘발성 캐시</strong></td><td>Memcached</td></tr><tr><td><strong>복잡한 자료 구조, 세션, 랭킹 등 상태 캐시</strong></td><td>Redis</td></tr><tr><td><strong>복제, 클러스터 구성 필요</strong></td><td>Redis</td></tr><tr><td><strong>낮은 RAM 사용량으로 최대 캐시 속도</strong></td><td>Memcached</td></tr></tbody></table><hr></div></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>