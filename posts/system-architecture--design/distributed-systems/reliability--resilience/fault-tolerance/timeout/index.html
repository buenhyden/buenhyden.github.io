<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Timeout Pattern | hyunyoun's Blog</title><meta name=keywords content="System-and-Software-Architecture,MSA-Patterns,Reliability,Timeout-Pattern"><meta name=description content="서비스가 다른 서비스로부터의 응답을 무한정 기다리지 않도록 하여 시스템의 안정성과 응답성을 향상시킨다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/system-architecture--design/distributed-systems/reliability--resilience/fault-tolerance/timeout/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.5311427199677f919b17469b4ca383951185b54edbae0ec7a5b4378f78d8f4f4.css integrity="sha256-UxFCcZlnf5GbF0abTKODlRGFtU7brg7HpbQ3j3jY9PQ=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/system-architecture--design/distributed-systems/reliability--resilience/fault-tolerance/timeout/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/system-architecture--design/distributed-systems/reliability--resilience/fault-tolerance/timeout/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/system-architecture--design/distributed-systems/reliability--resilience/fault-tolerance/timeout/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Timeout Pattern"><meta property="og:description" content="서비스가 다른 서비스로부터의 응답을 무한정 기다리지 않도록 하여 시스템의 안정성과 응답성을 향상시킨다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Timeout Pattern"><meta name=twitter:description content="서비스가 다른 서비스로부터의 응답을 무한정 기다리지 않도록 하여 시스템의 안정성과 응답성을 향상시킨다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Timeout Pattern","item":"https://buenhyden.github.io/posts/system-architecture--design/distributed-systems/reliability--resilience/fault-tolerance/timeout/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a></div><h1>Timeout Pattern</h1><div class=post-description>서비스가 다른 서비스로부터의 응답을 무한정 기다리지 않도록 하여 시스템의 안정성과 응답성을 향상시킨다.</div></header><div class=post-content><h2 id=timeout-pattern>Timeout Pattern<a hidden class=anchor aria-hidden=true href=#timeout-pattern>#</a></h2><p>아래는 “Timeout Pattern”에 대한 체계적이고 심층적인 조사, 분석, 정리입니다.</p><hr><h2 id=1-태그-tag>1. 태그 (Tag)<a hidden class=anchor aria-hidden=true href=#1-태그-tag>#</a></h2><ul><li><strong>Resilience-Pattern</strong></li><li><strong>Latency-Control</strong></li><li><strong>Distributed-Systems</strong></li><li><strong>Fault-Tolerance</strong></li></ul><hr><h2 id=2-분류-구조-적합성-분석>2. 분류 구조 적합성 분석<a hidden class=anchor aria-hidden=true href=#2-분류-구조-적합성-분석>#</a></h2><p><strong>현재 분류 구조</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Computer Science and Engineering
</span></span><span class=line><span class=cl>└─ Software Engineering
</span></span><span class=line><span class=cl>   └─ Design and Architecture
</span></span><span class=line><span class=cl>      └─ Architecture Patterns
</span></span><span class=line><span class=cl>         └─ Resilience Patterns
</span></span></code></pre></td></tr></table></div></div><p><strong>분석 및 근거</strong><br>Timeout Pattern은 시스템의 내결함성(resilience)과 신뢰성(reliability)을 높이기 위해 사용되는 설계 패턴으로, 주로 분산 시스템 및 마이크로서비스 환경에서 네트워크 지연, 서비스 장애 등에 대응하는 데 필수적입니다.<br>이 패턴은 “Architecture Patterns > Resilience Patterns”에 포함되어야 하며, “Software Engineering > Design and Architecture” 계층 아래에 위치하는 것이 적절합니다<a href="https://medium.com/%40kumar.atul.2122/timeout-pattern-resilience-microservice-design-pattern-aa7f084bcc66?utm_source=chatgpt.com" title="Timeout pattern: Resilience microservice design pattern - Medium">1</a><a href="https://ieeechicago.org/microservices-design-patterns-for-cloud-architecture/?utm_source=chatgpt.com" title="Microservices Design Patterns for Cloud Architecture">3</a>.<br>따라서, 현재 분류 구조는 주제의 특성과 실무적 중요성 모두를 반영하고 있습니다.</p><hr><h2 id=3-요약200자-내외>3. 요약(200자 내외)<a hidden class=anchor aria-hidden=true href=#3-요약200자-내외>#</a></h2><p>Timeout Pattern은 시스템이 외부 서비스나 자원에 대한 요청이 일정 시간 내에 응답하지 않을 때, 자동으로 실패로 처리하여 무한 대기와 자원 고갈을 방지하는 설계 패턴입니다<a href="https://www.geeksforgeeks.org/system-design/retry-pattern-in-microservices/?utm_source=chatgpt.com" title="Retry Pattern in Microservices - GeeksforGeeks">4</a><a href="https://medium.com/%40kumar.atul.2122/timeout-pattern-resilience-microservice-design-pattern-aa7f084bcc66?utm_source=chatgpt.com" title="Timeout pattern: Resilience microservice design pattern - Medium">2</a>.</p><hr><h2 id=4-개요250자-내외>4. 개요(250자 내외)<a hidden class=anchor aria-hidden=true href=#4-개요250자-내외>#</a></h2><p>Timeout Pattern은 외부 서비스 호출, 데이터베이스 쿼리 등 오랜 시간 응답이 없는 작업에 대해 미리 지정한 시간(타임아웃) 내에 결과가 없으면 실패로 간주하여, 시스템의 무한 대기와 자원 고갈을 막고, 장애 상황에서도 빠르게 복구할 수 있도록 하는 내결함성 설계 패턴입니다<a href="https://www.geeksforgeeks.org/system-design/retry-pattern-in-microservices/?utm_source=chatgpt.com" title="Retry Pattern in Microservices - GeeksforGeeks">4</a><a href="https://medium.com/%40kumar.atul.2122/timeout-pattern-resilience-microservice-design-pattern-aa7f084bcc66?utm_source=chatgpt.com" title="Timeout pattern: Resilience microservice design pattern - Medium">2</a>.</p><hr><h2 id=5-핵심-개념>5. 핵심 개념<a hidden class=anchor aria-hidden=true href=#5-핵심-개념>#</a></h2><ul><li><strong>정의 및 목적</strong><ul><li>Timeout Pattern은 특정 작업이 미리 정해진 시간(타임아웃) 내에 완료되지 않으면 해당 작업을 중단하고 실패로 처리하는 패턴입니다.</li><li>목적은 무한 대기, 자원 고갈, 시스템 장애의 전파를 방지하여 시스템의 신뢰성과 가용성을 높이는 것입니다<a href="https://www.geeksforgeeks.org/system-design/retry-pattern-in-microservices/?utm_source=chatgpt.com" title="Retry Pattern in Microservices - GeeksforGeeks">4</a><a href="https://medium.com/%40kumar.atul.2122/timeout-pattern-resilience-microservice-design-pattern-aa7f084bcc66?utm_source=chatgpt.com" title="Timeout pattern: Resilience microservice design pattern - Medium">2</a>.</li></ul></li><li><strong>실무 연관성</strong><ul><li>실무에서는 네트워크 호출, 데이터베이스 쿼리, 외부 API 통신 등 다양한 비동기 작업에 적용됩니다.</li><li>내결함성, 신뢰성, 성능 최적화, 리소스 관리에 필수적인 요소로 작용합니다.</li></ul></li></ul><hr><h2 id=6-세부-조사-내용>6. 세부 조사 내용<a hidden class=anchor aria-hidden=true href=#6-세부-조사-내용>#</a></h2><h3 id=배경>배경<a hidden class=anchor aria-hidden=true href=#배경>#</a></h3><ul><li><strong>분산 시스템의 복잡성 증가</strong><ul><li>여러 서비스가 상호작용하는 환경에서 네트워크 지연, 서비스 장애 등 예측 불가능한 상황이 빈번히 발생합니다.</li></ul></li><li><strong>자원 고갈 및 장애 전파 위험</strong><ul><li>응답이 없는 작업이 무한정 대기하면 스레드, 메모리 등 자원이 고갈되고, 장애가 연쇄적으로 전파될 수 있습니다<a href="https://temporal.io/blog/error-handling-in-distributed-systems?utm_source=chatgpt.com" title="Error handling in distributed systems: A guide to resilience patterns">5</a><a href="https://medium.com/%40kumar.atul.2122/timeout-pattern-resilience-microservice-design-pattern-aa7f084bcc66?utm_source=chatgpt.com" title="Timeout pattern: Resilience microservice design pattern - Medium">2</a>.</li></ul></li></ul><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><ul><li><strong>무한 대기 방지</strong><ul><li>작업이 일정 시간 내에 완료되지 않으면 실패로 처리하여 무한 대기를 방지합니다.</li></ul></li><li><strong>자원 고갈 방지</strong><ul><li>스레드, 메모리 등 자원이 고갈되는 것을 막아 시스템 전체의 안정성을 높입니다.</li></ul></li><li><strong>장애 전파 방지</strong><ul><li>장애가 연쇄적으로 전파되는 것을 막아 전체 시스템의 내결함성을 높입니다<a href="https://www.geeksforgeeks.org/system-design/retry-pattern-in-microservices/?utm_source=chatgpt.com" title="Retry Pattern in Microservices - GeeksforGeeks">4</a><a href="https://medium.com/%40kumar.atul.2122/timeout-pattern-resilience-microservice-design-pattern-aa7f084bcc66?utm_source=chatgpt.com" title="Timeout pattern: Resilience microservice design pattern - Medium">2</a>.</li></ul></li></ul><h3 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><ul><li><strong>작업 시간 제한</strong><ul><li>작업이 지정된 시간 내에 완료되지 않으면 자동으로 실패로 처리합니다.</li></ul></li><li><strong>실패 처리</strong><ul><li>타임아웃 발생 시, 실패 처리(예외 발생, 로그 기록, 대체 동작 등)를 수행합니다.</li></ul></li><li><strong>자원 해제</strong><ul><li>타임아웃 발생 시, 해당 작업에 할당된 자원을 해제합니다.</li></ul></li></ul><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><ul><li><strong>예측 가능한 실패</strong><ul><li>작업이 지정된 시간 내에 완료되지 않으면 실패로 간주하여 예측 가능한 실패 처리가 가능합니다.</li></ul></li><li><strong>내결함성 향상</strong><ul><li>장애 상황에서도 시스템이 빠르게 복구할 수 있도록 지원합니다.</li></ul></li><li><strong>유연한 설정</strong><ul><li>타임아웃 시간을 환경, 작업 유형에 따라 유연하게 설정할 수 있습니다<a href="https://www.geeksforgeeks.org/system-design/retry-pattern-in-microservices/?utm_source=chatgpt.com" title="Retry Pattern in Microservices - GeeksforGeeks">4</a><a href="https://medium.com/%40kumar.atul.2122/timeout-pattern-resilience-microservice-design-pattern-aa7f084bcc66?utm_source=chatgpt.com" title="Timeout pattern: Resilience microservice design pattern - Medium">2</a>.</li></ul></li></ul><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><ul><li><strong>Fail Fast(빠른 실패)</strong><ul><li>문제가 발생하면 빠르게 실패 처리하여 시스템 전체의 안정성을 높입니다.</li></ul></li><li><strong>Graceful Degradation(우아한 성능 저하)</strong><ul><li>장애 발생 시, 핵심 기능은 유지하면서 일부 기능만 저하시키는 방식으로 동작합니다<a href="https://medium.com/%40kumar.atul.2122/timeout-pattern-resilience-microservice-design-pattern-aa7f084bcc66?utm_source=chatgpt.com" title="Timeout pattern: Resilience microservice design pattern - Medium">1</a>.</li></ul></li><li><strong>Resource Management(자원 관리)</strong><ul><li>자원을 효율적으로 관리하여 시스템의 확장성과 안정성을 높입니다.</li></ul></li></ul><h3 id=주요-원리-및-작동-원리>주요 원리 및 작동 원리<a hidden class=anchor aria-hidden=true href=#주요-원리-및-작동-원리>#</a></h3><p><strong>다이어그램 (Text)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sequenceDiagram
</span></span><span class=line><span class=cl>    participant Client
</span></span><span class=line><span class=cl>    participant Operation
</span></span><span class=line><span class=cl>    participant TimeoutHandler
</span></span><span class=line><span class=cl>    Client-&gt;&gt;Operation: Start Operation
</span></span><span class=line><span class=cl>    Operation-&gt;&gt;TimeoutHandler: Start Timer
</span></span><span class=line><span class=cl>    alt Operation Completes Before Timeout
</span></span><span class=line><span class=cl>        Operation--&gt;&gt;Client: Success/Failure
</span></span><span class=line><span class=cl>    else Timeout Occurs Before Operation Completes
</span></span><span class=line><span class=cl>        TimeoutHandler--&gt;&gt;Operation: Timeout Occurred
</span></span><span class=line><span class=cl>        Operation--&gt;&gt;Client: Timeout Exception
</span></span><span class=line><span class=cl>    end
</span></span></code></pre></td></tr></table></div></div><p><strong>설명</strong><br>클라이언트가 작업을 시작하면, 타임아웃 핸들러가 타이머를 시작합니다. 작업이 타임아웃 내에 완료되면 결과를 반환하고, 그렇지 않으면 타임아웃 핸들러가 작업을 중단하고 예외를 발생시킵니다<a href="https://ieeechicago.org/microservices-design-patterns-for-cloud-architecture/?utm_source=chatgpt.com" title="Microservices Design Patterns for Cloud Architecture">5</a>.</p><h3 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h3><p><strong>구성 요소</strong></p><table><thead><tr><th>항목</th><th>기능 및 역할</th></tr></thead><tbody><tr><td>Client</td><td>작업을 시작하고 결과 또는 타임아웃 예외를 처리하는 주체</td></tr><tr><td>Operation</td><td>실제로 실행되는 작업(예: 외부 API 호출, 데이터베이스 쿼리 등)</td></tr><tr><td>TimeoutHandler</td><td>작업의 실행 시간을 모니터링하고, 타임아웃 발생 시 작업을 중단하는 역할</td></tr></tbody></table><p><strong>필수 구성요소</strong></p><ul><li><strong>Client</strong>: 작업을 시작하고 결과를 처리</li><li><strong>Operation</strong>: 실제 작업 수행</li><li><strong>TimeoutHandler</strong>: 타임아웃 관리 및 중단 처리</li></ul><p><strong>선택 구성요소</strong></p><ul><li><strong>Fallback Handler</strong>: 타임아웃 발생 시 대체 동작을 수행하는 핸들러</li><li><strong>Logging Module</strong>: 타임아웃 발생 시 로그 기록</li></ul><p><strong>구조 다이어그램 (Text)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>+---------------------+
</span></span><span class=line><span class=cl>|      Client         |
</span></span><span class=line><span class=cl>+----------+----------+
</span></span><span class=line><span class=cl>           |
</span></span><span class=line><span class=cl>           v
</span></span><span class=line><span class=cl>+---------------------+
</span></span><span class=line><span class=cl>|     Operation       |
</span></span><span class=line><span class=cl>+----------+----------+
</span></span><span class=line><span class=cl>           |
</span></span><span class=line><span class=cl>           v
</span></span><span class=line><span class=cl>+---------------------+
</span></span><span class=line><span class=cl>|   TimeoutHandler    |
</span></span><span class=line><span class=cl>+---------------------+
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=7-구현-기법>7. 구현 기법<a hidden class=anchor aria-hidden=true href=#7-구현-기법>#</a></h2><table><thead><tr><th>기법</th><th>정의 및 목적</th><th>예시(시스템 구성, 시나리오)</th></tr></thead><tbody><tr><td>Promise.race</td><td>Promise와 타임아웃 타이머를 경쟁시켜 먼저 완료되는 쪽을 결과로 반환</td><td>외부 API 호출 시 5초 이내 응답이 없으면 타임아웃 처리</td></tr><tr><td>Callback</td><td>작업 완료 콜백과 타임아웃 콜백을 함께 등록하여 타임아웃 시 콜백 실행</td><td>파일 읽기 작업에서 10초 이내 완료되지 않으면 타임아웃 콜백 실행</td></tr><tr><td>Async/Await</td><td>async 함수 내에서 await와 타이머를 조합하여 타임아웃 구현</td><td>데이터베이스 쿼리 시 3초 이내 응답 없으면 타임아웃 처리</td></tr><tr><td>AbortSignal</td><td>AbortController를 사용하여 작업 중단 신호를 보내 타임아웃 시 작업 중단</td><td>fetch API 호출 시 5초 이내 응답 없으면 작업 중단</td></tr></tbody></table><hr><h2 id=8-장점>8. 장점<a hidden class=anchor aria-hidden=true href=#8-장점>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>무한 대기 방지</td><td>작업이 무한정 대기하는 것을 방지하여 시스템의 안정성을 높임</td></tr><tr><td></td><td>자원 고갈 방지</td><td>스레드, 메모리 등 자원이 고갈되는 것을 막아 시스템의 확장성과 안정성을 높임</td></tr><tr><td></td><td>장애 전파 방지</td><td>장애가 연쇄적으로 전파되는 것을 막아 전체 시스템의 내결함성을 높임</td></tr><tr><td></td><td>예측 가능한 실패</td><td>타임아웃으로 인한 실패가 예측 가능하여 장애 대응 및 모니터링이 쉬워짐</td></tr><tr><td></td><td>유연한 설정</td><td>환경, 작업 유형에 따라 타임아웃 시간을 유연하게 설정할 수 있음</td></tr></tbody></table><hr><h2 id=9-단점과-문제점-그리고-해결방안>9. 단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#9-단점과-문제점-그리고-해결방안>#</a></h2><h3 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>적절한 타임아웃 설정</td><td>너무 짧으면 불필요한 실패, 너무 길면 자원 고갈 위험</td><td>모니터링 및 튜닝, 동적 타임아웃 적용</td></tr><tr><td></td><td>오류 처리 복잡성</td><td>타임아웃 시 대체 동작, 로그, 알림 등 처리 로직이 복잡해질 수 있음</td><td>표준화된 오류 처리 프레임워크 활용</td></tr></tbody></table><h3 id=문제점>문제점<a hidden class=anchor aria-hidden=true href=#문제점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>타임아웃 미스매치</td><td>환경, 네트워크 변화</td><td>불필요한 실패/지연</td><td>로그, 모니터링</td><td>동적 타임아웃, 모니터링</td><td>동적 타임아웃, 튜닝</td></tr><tr><td></td><td>대체 동작 부재</td><td>대체 동작 미구현</td><td>서비스 중단</td><td>테스트, 모니터링</td><td>대체 동작 구현</td><td>Fallback 패턴 적용</td></tr></tbody></table><hr><h2 id=10-도전-과제>10. 도전 과제<a hidden class=anchor aria-hidden=true href=#10-도전-과제>#</a></h2><table><thead><tr><th>과제</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>동적 타임아웃 적용</td><td>시스템 환경 변화</td><td>불필요한 실패/지연</td><td>로그, 모니터링</td><td>동적 타임아웃 알고리즘</td><td>머신러닝, 통계 기반 적용</td></tr><tr><td>대체 동작 표준화</td><td>비즈니스 요구 다양</td><td>서비스 품질 저하</td><td>테스트, 모니터링</td><td>표준화된 대체 동작 정의</td><td>프레임워크, 라이브러리화</td></tr></tbody></table><hr><h2 id=11-분류-기준에-따른-종류-및-유형>11. 분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#11-분류-기준에-따른-종류-및-유형>#</a></h2><table><thead><tr><th>기준</th><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>적용 대상</td><td>네트워크 타임아웃</td><td>외부 API, 서비스 호출 시 적용</td></tr><tr><td></td><td>데이터베이스 타임아웃</td><td>데이터베이스 쿼리 시 적용</td></tr><tr><td></td><td>파일 I/O 타임아웃</td><td>파일 읽기/쓰기 시 적용</td></tr><tr><td>구현 방식</td><td>하드코딩</td><td>코드 내에 타임아웃 값 직접 지정</td></tr><tr><td></td><td>동적 설정</td><td>환경, 설정 파일, 환경변수로 타임아웃 값 지정</td></tr><tr><td></td><td>동적 조정</td><td>시스템 상태, 네트워크 상황에 따라 타임아웃 값 자동 조정</td></tr></tbody></table><hr><h2 id=12-실무-사용-예시>12. 실무 사용 예시<a hidden class=anchor aria-hidden=true href=#12-실무-사용-예시>#</a></h2><table><thead><tr><th>사용 예시</th><th>목적</th><th>효과</th></tr></thead><tbody><tr><td>외부 API 호출</td><td>무한 대기 방지</td><td>서비스 안정성 향상</td></tr><tr><td>데이터베이스 쿼리</td><td>자원 고갈 방지</td><td>시스템 확장성 향상</td></tr><tr><td>파일 I/O</td><td>장애 전파 방지</td><td>내결함성 강화</td></tr></tbody></table><hr><h2 id=13-활용-사례>13. 활용 사례<a hidden class=anchor aria-hidden=true href=#13-활용-사례>#</a></h2><p><strong>사례: 온라인 쇼핑몰 결제 서비스</strong></p><ul><li><strong>시스템 구성</strong><ul><li>결제 서비스 → 외부 결제 게이트웨이 호출</li></ul></li><li><strong>Workflow</strong><ol><li>결제 요청 발생</li><li>결제 서비스가 결제 게이트웨이 호출(타임아웃 5초 설정)</li><li>5초 내 응답 없으면 타임아웃 발생</li><li>타임아웃 시 결제 실패 처리 및 사용자에게 안내</li></ol></li><li><strong>Timeout Pattern의 역할</strong><ul><li>결제 게이트웨이 응답 지연 시 무한 대기 방지</li><li>결제 서비스의 안정성 및 사용자 경험 향상</li></ul></li><li><strong>유무에 따른 차이</strong><ul><li>타임아웃 미적용 시: 결제 요청이 무한정 대기 → 자원 고갈, 서비스 장애</li><li>타임아웃 적용 시: 빠른 실패 처리 → 시스템 안정성, 사용자 경험 향상</li></ul></li></ul><hr><h2 id=14-구현-예시>14. 구현 예시<a hidden class=anchor aria-hidden=true href=#14-구현-예시>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span><span class=lnt id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a>
</span><span class=lnt id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a>
</span><span class=lnt id=hl-3-17><a class=lnlinks href=#hl-3-17>17</a>
</span><span class=lnt id=hl-3-18><a class=lnlinks href=#hl-3-18>18</a>
</span><span class=lnt id=hl-3-19><a class=lnlinks href=#hl-3-19>19</a>
</span><span class=lnt id=hl-3-20><a class=lnlinks href=#hl-3-20>20</a>
</span><span class=lnt id=hl-3-21><a class=lnlinks href=#hl-3-21>21</a>
</span><span class=lnt id=hl-3-22><a class=lnlinks href=#hl-3-22>22</a>
</span><span class=lnt id=hl-3-23><a class=lnlinks href=#hl-3-23>23</a>
</span><span class=lnt id=hl-3-24><a class=lnlinks href=#hl-3-24>24</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 타임아웃 패턴 구현 예시 (JavaScript)
</span></span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>withTimeout</span><span class=p>(</span><span class=nx>promise</span><span class=p>,</span> <span class=nx>timeoutMs</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>timeout</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>_</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nx>setTimeout</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=nx>reject</span><span class=p>(</span><span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;Timeout&#39;</span><span class=p>)),</span> <span class=nx>timeoutMs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>race</span><span class=p>([</span><span class=nx>promise</span><span class=p>,</span> <span class=nx>timeout</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용 예시
</span></span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>fetchUserData</span><span class=p>(</span><span class=nx>userId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>withTimeout</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=nx>fetch</span><span class=p>(</span><span class=sb>`/api/users/</span><span class=si>${</span><span class=nx>userId</span><span class=si>}</span><span class=sb>`</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=mi>5000</span> <span class=c1>// 5초 타임아웃
</span></span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kr>await</span> <span class=nx>response</span><span class=p>.</span><span class=nx>json</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span> <span class=o>===</span> <span class=s1>&#39;Timeout&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 타임아웃 처리: 대체 데이터 반환 또는 로그 기록
</span></span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>{</span> <span class=nx>id</span><span class=o>:</span> <span class=nx>userId</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Default User&#39;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>throw</span> <span class=nx>error</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=15-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>15. 실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#15-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>타임아웃 값 설정</td><td>환경, 네트워크 상황에 맞는 값 설정</td><td>모니터링, 튜닝</td></tr><tr><td>대체 동작 구현</td><td>타임아웃 시 대체 동작(예: 기본값 반환, 로그 기록) 구현</td><td>표준화된 대체 동작 정의</td></tr><tr><td>오류 처리 표준화</td><td>타임아웃 오류를 포함한 오류 처리 로직 표준화</td><td>프레임워크, 라이브러리화</td></tr><tr><td>모니터링</td><td>타임아웃 발생 빈도, 원인 모니터링</td><td>로그, 메트릭 수집</td></tr></tbody></table><hr><h2 id=16-최적화하기-위한-고려사항-및-주의할-점>16. 최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#16-최적화하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>동적 타임아웃 적용</td><td>시스템 상태, 네트워크 상황에 따라 타임아웃 값 자동 조정</td><td>동적 타임아웃 알고리즘</td></tr><tr><td>대체 동작 최적화</td><td>타임아웃 시 대체 동작이 서비스 품질에 미치는 영향 최소화</td><td>대체 동작 품질 관리</td></tr><tr><td>리소스 관리</td><td>타임아웃 발생 시 리소스 해제 및 재사용 최적화</td><td>리소스 풀, 재사용</td></tr></tbody></table><hr><h2 id=17-주제와-관련하여-주목할-내용>17. 주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#17-주제와-관련하여-주목할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>내결함성</td><td>Resilience</td><td>Timeout Pattern</td><td>무한 대기, 자원 고갈, 장애 전파 방지</td></tr><tr><td>분산 시스템</td><td>Microservices</td><td>Latency Control</td><td>서비스 간 통신 시 지연 제어 및 장애 대응</td></tr><tr><td>비동기 처리</td><td>Async/Await</td><td>Promise.race</td><td>비동기 작업에 타임아웃 적용 예시</td></tr><tr><td>실무 적용</td><td>실무 예시</td><td>결제 서비스</td><td>외부 API 호출 시 타임아웃 적용으로 서비스 안정성 향상</td></tr></tbody></table><hr><h2 id=18-반드시-학습해야할-내용>18. 반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#18-반드시-학습해야할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>내결함성</td><td>Resilience Pattern</td><td>Circuit Breaker</td><td>타임아웃과 함께 사용되는 내결함성 패턴</td></tr><tr><td>분산 시스템</td><td>Microservices</td><td>Retry Pattern</td><td>타임아웃 후 재시도 패턴</td></tr><tr><td>비동기 처리</td><td>Async Programming</td><td>Promise, Async/Await</td><td>비동기 작업에 타임아웃 적용 방법</td></tr><tr><td>실무 적용</td><td>실무 예시</td><td>Fallback Pattern</td><td>타임아웃 발생 시 대체 동작 구현 방법</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>내결함성</td><td>Resilience</td><td>시스템이 장애 상황에서도 정상적으로 동작하는 능력</td></tr><tr><td>분산 시스템</td><td>Microservices</td><td>여러 서비스가 네트워크를 통해 상호작용하는 시스템 구조</td></tr><tr><td>비동기 처리</td><td>Promise</td><td>비동기 작업의 결과를 나타내는 객체</td></tr><tr><td>실무 적용</td><td>Fallback</td><td>장애 발생 시 대체 동작 또는 값을 제공하는 패턴</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><a href=https://www.codecentric.de/en/knowledge-hub/blog/resilience-design-patterns-retry-fallback-timeout-circuit-breaker>Resilience design patterns: retry, fallback, timeout, circuit breaker (codecentric.de)</a><a href="https://www.codecentric.de/en/knowledge-hub/blog/resilience-design-patterns-retry-fallback-timeout-circuit-breaker?utm_source=chatgpt.com" title="Resilience design patterns: retry, fallback, timeout, circuit breaker">1</a></li><li><a href=https://nobuti.com/thoughts/resilience-patterns-timeouts>Resilience Patterns in TypeScript: Timeouts (nobuti.com)</a><a href="https://medium.com/%40AlexanderObregon/spring-microservices-resilience-with-retry-and-fallback-mechanisms-8500208fc463?utm_source=chatgpt.com" title="Spring Microservices Resilience with Retry and Fallback Mechanisms">4</a></li><li><a href=https://softwarepatternslexicon.com/patterns-java/26/10/4/>Timeout Pattern: Essential Java Design Pattern for Exception Handling and Resilience (softwarepatternslexicon.com)</a><a href="https://www.geeksforgeeks.org/system-design/retry-pattern-in-microservices/?utm_source=chatgpt.com" title="Retry Pattern in Microservices - GeeksforGeeks">5</a></li><li><a href=https://fastercapital.com/content/Timeouts--Implementing-Timeouts-with-Continuation-Patterns.html>Implementing Timeouts with Continuation Patterns (fastercapital.com)</a>[7]</li><li><a href=https://patterns.arc42.org/patterns/timeout/>Timeout Pattern (arc42.org)</a>[8]</li><li><a href=https://www.vinsguru.com/timeout-pattern/>Timeout Pattern - Microservice Design Patterns (vinsguru.com)</a><a href="https://temporal.io/blog/error-handling-in-distributed-systems?utm_source=chatgpt.com" title="Error handling in distributed systems: A guide to resilience patterns">6</a></li><li><a href=https://dev.to/vipulkumarsviit/timeout-pattern-in-microservices-cag>Timeout Pattern in Microservices (dev.to)</a><a href="https://medium.com/%40kumar.atul.2122/timeout-pattern-resilience-microservice-design-pattern-aa7f084bcc66?utm_source=chatgpt.com" title="Timeout pattern: Resilience microservice design pattern - Medium">2</a></li><li><a href=https://github.com/MasteryEducation/SoftwarePatternsLexicon.com/blob/main/content/patterns-java/26/10/4/index.md>Timeout Pattern: Essential Java Design Pattern (github.com)</a><a href="https://ieeechicago.org/microservices-design-patterns-for-cloud-architecture/?utm_source=chatgpt.com" title="Microservices Design Patterns for Cloud Architecture">3</a></li></ul><p>알겠습니다! 우선 “Timeout Pattern” 주제에 대한 초반 작업부터 시작하겠습니다. 단계별로 정리해드려요.</p><hr><h2 id=-1-태그-tags>🏷 1. 태그 (Tags)<a hidden class=anchor aria-hidden=true href=#-1-태그-tags>#</a></h2><p>Timeout-Pattern
Resilience-Patterns
Circuit-Breaker
Timeout-Handling</p><hr><h2 id=2-분류-구조-적절성-검토>2. 분류 구조 적절성 검토<a hidden class=anchor aria-hidden=true href=#2-분류-구조-적절성-검토>#</a></h2><p>“Timeout Pattern”은 요청하신 구조에서 “Software Engineering > Design and Architecture > Architecture Patterns > Resilience Patterns” 아래에 잘 들어맞습니다.</p><ul><li><strong>근거</strong>: 타임아웃은 시스템 회복력(resilience)을 위해 외부 호출이나 내부 처리에 제한 시간을 두어 실패 전파를 방지하며, 이는 대표적인 회복력 패턴 중 하나입니다.</li></ul><hr><h2 id=3-요약-200자-내외>3. 요약 (200자 내외)<a hidden class=anchor aria-hidden=true href=#3-요약-200자-내외>#</a></h2><p>Timeout Pattern은 외부 API 호출, 데이터베이스 쿼리, 비동기 작업 등에서 응답 시간을 제한하여 지연이나 무한 대기로 인한 시스템 오류 전파를 방지하는 회복력 패턴입니다. 네트워크/리소스 병목, 레이턴시 증가 시 강제 종료 후 예비처리(fallback)나 리트라이 전략을 통해 시스템 안정성을 확보합니다.</p><hr><h2 id=4-개요-250자-내외>4. 개요 (250자 내외)<a hidden class=anchor aria-hidden=true href=#4-개요-250자-내외>#</a></h2><p>Timeout Pattern은 분산·마이크로서비스 아키텍처에서 필수적인 회복성(Resilience) 패턴으로, 지정된 시간 안에 응답이 오지 않을 경우 강제로 작업을 중단하고 대체 로직(fallback), 리트라이(retry), 로그 수집 등을 실행해 시스템 장애 확산을 막습니다. 정확한 타임아웃 설정, 비동기 처리, 에러 핸들링 설계가 핵심이며, 구현 시 타임아웃 초과 여부 판단, 클린업, 리소스 해제, 서비스 간 의존성 관리 등의 고려사항이 중요합니다.</p><hr><p>좋습니다. 이어서 “Timeout Pattern”에 대해 <strong>핵심 개념</strong>부터 정리해드리겠습니다.</p><hr><h2 id=5-핵심-개념-core-concepts>5. 핵심 개념 (Core Concepts)<a hidden class=anchor aria-hidden=true href=#5-핵심-개념-core-concepts>#</a></h2><p><strong>Timeout Pattern</strong>은 외부 호출(예: API 요청, 데이터베이스 쿼리, 메시지 처리 등)이 특정 시간(타임아웃) 내에 완료되지 않으면 해당 작업을 강제로 종료하는 패턴입니다.</p><ul><li><strong>기본 목적</strong>: 무한 지연(unbounded latency)이나 리소스 고갈을 방지하고, 시스템의 회복성(resilience)을 높이는 데 있음 (<a href="https://www.codecentric.de/en/knowledge-hub/blog/resilience-design-patterns-retry-fallback-timeout-circuit-breaker?utm_source=chatgpt.com" title="Resilience design patterns: retry, fallback, timeout, circuit breaker">codecentric.de</a>).</li></ul><h3 id=-실무-구현-연관성>✅ 실무 구현 연관성<a hidden class=anchor aria-hidden=true href=#-실무-구현-연관성>#</a></h3><ul><li><strong>HTTP 클라이언트 설정</strong>: 대부분의 HTTP/DB 라이브러리는 타임아웃 설정 옵션을 제공하며, 이를 통해 외부 호출 응답 대기 시간을 제어함 .</li><li><strong>리소스 해제(clean-up)</strong>: 타임아웃 시점에 열려 있는 커넥션, 세션, 스레드 등을 적절히 정리해야 함.</li><li><strong>Fallback 및 Retry 연동</strong>: 타임아웃 이후 이어지는 후속 로직(리트라이, 대체 응답)이 구조화되어야 하며, 과도한 호출을 방지하는 Circuit Breaker 등과 함께 설계됨 (<a href="https://medium.com/%40kumar.atul.2122/timeout-pattern-resilience-microservice-design-pattern-aa7f084bcc66?utm_source=chatgpt.com" title="Timeout pattern: Resilience microservice design pattern - Medium">medium.com</a>).</li><li><strong>메트릭 및 모니터링</strong>: 타임아웃 빈도, 대기 시간 분포(평균/99백분위 수) 등을 관찰해 적절한 타임아웃 설정에 활용 .</li></ul><hr><h2 id=6-주요-조사-내용>6. 주요 조사 내용<a hidden class=anchor aria-hidden=true href=#6-주요-조사-내용>#</a></h2><h3 id=배경-및-필요성-background--need>배경 및 필요성 (Background & Need)<a hidden class=anchor aria-hidden=true href=#배경-및-필요성-background--need>#</a></h3><ul><li>분산 시스템에서는 네트워크 지연, 타 서비스 오작동이 빈번하게 발생하며, 명확한 응답 시간 제한이 없으면 호출자 자원이 장시간 블록될 수 있음 .</li><li>예: 온라인 주문 시 타임아웃 발생 시 주문 생성 여부 불명, 리트라이로 인한 중복 주문 가능성 .</li></ul><h3 id=목적-및-역할-purpose--role>목적 및 역할 (Purpose & Role)<a hidden class=anchor aria-hidden=true href=#목적-및-역할-purpose--role>#</a></h3><ul><li>무한 대기 방지</li><li>시스템 응답성 유지</li><li>연쇄 장애(cascading failure) 방지</li></ul><h3 id=특징-characteristics>특징 (Characteristics)<a hidden class=anchor aria-hidden=true href=#특징-characteristics>#</a></h3><ul><li><strong>상한선 기반 제어</strong>로 응답 이상 상태를 감지하고 처리함.</li><li>외부 호출에만 국한되지 않고, 내부 로직 블로킹 제어에도 사용 가능.</li><li>리트라이, 회로 차단기, 폴백 패턴 등과 연계되어 전체 회복성 체계 구성.</li></ul><h3 id=핵심-원칙-및-작동-원리>핵심 원칙 및 작동 원리<a hidden class=anchor aria-hidden=true href=#핵심-원칙-및-작동-원리>#</a></h3><ul><li><p><strong>원칙</strong>: 타임아웃 시간은 평균 응답 시간보다 약간 크게 설정하되, tail latency 고려.</p></li><li><p><strong>작동 흐름</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2>2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>시작 → 호출 → 응답 수신 시 처리 완료  
</span></span><span class=line><span class=cl>                   ↓  
</span></span><span class=line><span class=cl>              타임아웃 발생 → 호출 취소 → 후속 처리 (리트라이/폴백/로그)
</span></span></code></pre></td></tr></table></div></div><p><strong>다이어그램</strong>:</p><pre class=mermaid>graph LR
    A[Caller] --&gt; B[External Call]
    B --&gt;|응답| C[정상 처리]
    B --&gt;|타임아웃| D[타임아웃 처리]
    D --&gt; E{후속 처리}
    E --&gt; F[Retry]
    E --&gt; G[Fallback]
    E --&gt; H[로그 및 알림]
</pre></li></ul><hr><h2 id=7-구조-및-아키텍처>7. 구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#7-구조-및-아키텍처>#</a></h2><ul><li><p><strong>구성 요소</strong></p><ul><li>타임아웃 설정 정책 모듈: 호출 시점 타임아웃 값 결정</li><li>타이머/스케줄러: 지정 시간 후 타임아웃 이벤트 발생</li><li>호출 핸들러: API/DB 호출 수행</li><li>클린업 핸들러: 타임아웃 후 리소스 정리</li><li>후속 조치 핸들러: Retry, Fallback, 로그, 알림 등을 처리</li></ul></li><li><p><strong>구조 다이어그램</strong>:</p><pre class=mermaid>classDiagram
  class Caller {
    +callWithTimeout()
  }
  class TimeoutPolicy {
    +getTimeout()
  }
  class TimeoutScheduler {
    +start()
    +cancel()
  }
  class ExternalServiceProxy {
    +invoke()
  }
  class CleanupHandler {
    +cleanup()
  }
  class PostHandler {
    +handleRetry()
    +handleFallback()
    +log()
  }

  Caller --&gt; TimeoutPolicy
  Caller --&gt; TimeoutScheduler
  Caller --&gt; ExternalServiceProxy
  TimeoutScheduler --&gt; CleanupHandler
  Caller --&gt; PostHandler
</pre><ul><li>caller에서 timeoutPolicy로 값 결정 후 scheduler로 시작.</li><li>externalCall 수행 중 타임아웃 발생하면 cleanupHandler 호출.</li><li>이후 PostHandler에서 후속 흐름 관리.</li></ul></li><li><p><strong>필수/선택 구성요소 분류</strong></p><table><thead><tr><th>구성요소</th><th>유형</th><th>기능 및 역할</th></tr></thead><tbody><tr><td>TimeoutPolicy</td><td>필수</td><td>타임아웃 시간 결정</td></tr><tr><td>TimeoutScheduler</td><td>필수</td><td>타임아웃 시점 알림</td></tr><tr><td>ExternalServiceProxy</td><td>필수</td><td>실제 호출 수행</td></tr><tr><td>CleanupHandler</td><td>필수</td><td>리소스 정리</td></tr><tr><td>PostHandler</td><td>선택</td><td>Retry, Fallback, 로그 등</td></tr></tbody></table></li></ul><hr><h2 id=8-구현-기법-implementation-techniques>8. 구현 기법 (Implementation Techniques)<a hidden class=anchor aria-hidden=true href=#8-구현-기법-implementation-techniques>#</a></h2><ul><li><p><strong>타임아웃 제어</strong>: HTTP 클라이언트 설정 (e.g., <code>timeout</code> 옵션), DB 드라이버 설정.</p></li><li><p><strong>비동기 호출 + Future/Cancellable</strong>: 언어별 <code>Future</code>, <code>Promise</code>, <code>CancellationToken</code> 등을 활용해 타임아웃 시 취소.</p></li><li><p><strong>라이브러리 활용</strong>:</p><ul><li>Java의 Resilience4j, Failsafe, Spring Hystrix (폴백 기능 포함) (<a href="https://medium.com/%40kumar.atul.2122/timeout-pattern-resilience-microservice-design-pattern-aa7f084bcc66?utm_source=chatgpt.com" title="Timeout pattern: Resilience microservice design pattern - Medium">medium.com</a>, <a href="https://www.codecentric.de/en/knowledge-hub/blog/resilience-design-patterns-retry-fallback-timeout-circuit-breaker?utm_source=chatgpt.com" title="Resilience design patterns: retry, fallback, timeout, circuit breaker">codecentric.de</a>, <a href="https://ieeechicago.org/microservices-design-patterns-for-cloud-architecture/?utm_source=chatgpt.com" title="Microservices Design Patterns for Cloud Architecture">ieeechicago.org</a>, <a href="https://medium.com/%40AlexanderObregon/spring-microservices-resilience-with-retry-and-fallback-mechanisms-8500208fc463?utm_source=chatgpt.com" title="Spring Microservices Resilience with Retry and Fallback Mechanisms">medium.com</a>).</li><li>JavaScript: Axios <code>timeout</code>, AbortController.</li><li>Python: <code>asyncio.wait_for()</code>, <code>requests</code>의 <code>timeout</code>.</li></ul></li><li><p><strong>Service Mesh</strong>: Istio 등 인프라에서 비즈니스 코드 없이 타임아웃 설정 가능 (<a href="https://www.geeksforgeeks.org/system-design/retry-pattern-in-microservices/?utm_source=chatgpt.com" title="Retry Pattern in Microservices - GeeksforGeeks">geeksforgeeks.org</a>, <a href="https://www.codecentric.de/en/knowledge-hub/blog/resilience-design-patterns-retry-fallback-timeout-circuit-breaker?utm_source=chatgpt.com" title="Resilience design patterns: retry, fallback, timeout, circuit breaker">codecentric.de</a>).</p></li></ul><hr><p>이어서 장점/단점, 도전 과제, 분류기준, 실무 사례 등을 단계적으로 정리해드릴 준비가 되어 있습니다. 이 깊이로 계속 진행해도 괜찮으실까요?</p><p>계속 진행해서 “Timeout Pattern”의 장점, 단점, 실무 예시, 분류 기준 등을 정리했습니다. 아래 내용을 확인해 주세요.</p><hr><h2 id=9-장점benefits>9. 장점 (Benefits)<a hidden class=anchor aria-hidden=true href=#9-장점benefits>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>지연 상한 확보</td><td>무한 지연을 방지하고 서비스 응답에 상한을 설정함으로써 시스템을 안정화함 (<a href="https://www.codecentric.de/en/knowledge-hub/blog/resilience-design-patterns-retry-fallback-timeout-circuit-breaker?utm_source=chatgpt.com" title="Resilience design patterns: retry, fallback, timeout, circuit breaker">vinsguru.medium.com</a>, <a href="https://medium.com/%40kumar.atul.2122/timeout-pattern-resilience-microservice-design-pattern-aa7f084bcc66?utm_source=chatgpt.com" title="Timeout pattern: Resilience microservice design pattern - Medium">dev.to</a>)</td></tr><tr><td></td><td>연쇄 실패 예방</td><td>타 서비스 지연 시 호출자 블록을 막아 장애 확산을 차단함</td></tr><tr><td></td><td>리소스 관리</td><td>블로킹 작업을 해제해 커넥션, 스레드 등의 리소스를 효율적으로 관리함</td></tr><tr><td></td><td>사용자 경험 향상</td><td>응답 지연 시 빠르게 실패 처리하거나 폴백 응답을 제공해 UX 저하를 방지함</td></tr></tbody></table><hr><h2 id=10-단점-문제점-및-해결방안limitations--solutions>10. 단점, 문제점 및 해결방안 (Limitations & Solutions)<a hidden class=anchor aria-hidden=true href=#10-단점-문제점-및-해결방안limitations--solutions>#</a></h2><h3 id=101-단점>10.1 단점<a hidden class=anchor aria-hidden=true href=#101-단점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>활성 처리 중단</td><td>타임아웃 설정이 너무 짧으면 정상 처리 중에도 응답이 취소될 수 있음 (<a href="https://ieeechicago.org/microservices-design-patterns-for-cloud-architecture/?utm_source=chatgpt.com" title="Microservices Design Patterns for Cloud Architecture">l-lin.github.io</a>)</td><td>예상 최대 지연 시간 기반으로 설정, 퍼센타일(latency percentile) 고려</td></tr><tr><td></td><td>중복 호출 위험</td><td>타임아웃 이후 리트라이 시 중복 실행돼 데이터 중복 혹은 부작용 발생 가능</td><td>idempotent 설계, 중복 방지 키, 트랜잭션 조율</td></tr><tr><td></td><td>설정 복잡성</td><td>서비스별로 적절한 타임아웃 값을 설정해야 하며, 동적으로 조정하는 것이 어려움</td><td>메트릭 기반 조정, Deadline propagation 활용</td></tr></tbody></table><h3 id=102-문제점>10.2 문제점<a hidden class=anchor aria-hidden=true href=#102-문제점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>오작동 처리 모호</td><td>타임아웃 시 실제 성공 여부 불명확</td><td>주문 누락/중복 오류</td><td>타임아웃 빈도, 호출 로그 분석</td><td>RPC ack 패턴, 트랜잭션 설계</td><td>중복 감지, 폴백 정책 강화</td></tr><tr><td></td><td>시스템 부하 악화</td><td>타임아웃 + 리트라이 반복 시 부하 증가</td><td>호출 대상 서비스 과부하</td><td>호출 QPS, 오류율 모니터링</td><td>Circuit Breaker, Backoff</td><td>지수 backoff, 회로 차단기 조합</td></tr></tbody></table><hr><h2 id=11-도전-과제challenges>11. 도전 과제 (Challenges)<a hidden class=anchor aria-hidden=true href=#11-도전-과제challenges>#</a></h2><ul><li><strong>퍼센타일 기준 타임아웃 결정</strong>: 평균보다 높은 응답도 고려하여 p99나 p999 기준 타임아웃 설정 필요 (<a href="https://medium.com/%40AlexanderObregon/spring-microservices-resilience-with-retry-and-fallback-mechanisms-8500208fc463?utm_source=chatgpt.com" title="Spring Microservices Resilience with Retry and Fallback Mechanisms">medium.com</a>, <a href="https://www.geeksforgeeks.org/system-design/retry-pattern-in-microservices/?utm_source=chatgpt.com" title="Retry Pattern in Microservices - GeeksforGeeks">ieeechicago.org</a>, <a href="https://temporal.io/blog/error-handling-in-distributed-systems?utm_source=chatgpt.com" title="Error handling in distributed systems: A guide to resilience patterns">temporal.io</a>)</li><li><strong>Deadline Propagation</strong>: 호출 체인 전체 시간 제한 공유 및 조정 필요</li><li><strong>Idempotency 관리</strong>: 중복 호출 시도 방지 및 안전한 재시도 설계 요구 (<a href="https://temporal.io/blog/error-handling-in-distributed-systems?utm_source=chatgpt.com" title="Error handling in distributed systems: A guide to resilience patterns">temporal.io</a>)</li><li><strong>모니터링 및 조정 자동화</strong>: 런닝 타임에 타임아웃 정책을 조정 및 학습하는 자동화 기술 필요</li></ul><hr><h2 id=12-분류-기준에-따른-종류-및-유형>12. 분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#12-분류-기준에-따른-종류-및-유형>#</a></h2><table><thead><tr><th>분류 기준</th><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>설정 위치</td><td>Client-side</td><td>클라이언트 코드(RPC/HTTP) 내부에서 타임아웃 설정</td></tr><tr><td></td><td>Service-side</td><td>서버 프레임워크에서 강제 타임아웃 적용 (예: gRPC deadline)</td></tr><tr><td></td><td>Infrastructure</td><td>Istio, API Gateway 등 인프라 레벨에서 중앙 적용</td></tr><tr><td>적용 방식</td><td>Synchronous</td><td>호출 블로킹 시 타임아웃</td></tr><tr><td></td><td>Asynchronous</td><td>Future/Promise 기반 취소 가능한 호출</td></tr><tr><td>통합 패턴</td><td>단독 사용</td><td>단독 타임아웃 적용</td></tr><tr><td></td><td>연계 사용</td><td>Retry, Circuit Breaker, Fallback 등과 조합 활용</td></tr></tbody></table><hr><h2 id=13-실무-사용-예시>13. 실무 사용 예시<a hidden class=anchor aria-hidden=true href=#13-실무-사용-예시>#</a></h2><table><thead><tr><th>호출 주체</th><th>목적</th><th>활용 방식</th><th>효과</th></tr></thead><tbody><tr><td>Product→Rating 서비스</td><td>상품 리뷰 불러오기</td><td>2초 타임아웃 + 캐시 폴백</td><td>상품 상세 기능 유지, UX 저해 최소화 (<a href="https://www.geeksforgeeks.org/system-design/retry-pattern-in-microservices/?utm_source=chatgpt.com" title="Retry Pattern in Microservices - GeeksforGeeks">ieeechicago.org</a>)</td></tr><tr><td>API Gateway</td><td>공통 정책</td><td>인프라 레벨 3초 타임아웃</td><td>전체 서비스 보호, 일관 정책 적용</td></tr><tr><td>DB 쿼리</td><td>긴 쿼리 관리</td><td>5초 타임아웃</td><td>로드 문제 조기 감지, 리소스 고갈 방지</td></tr></tbody></table><hr><h2 id=14-활용-사례>14. 활용 사례<a hidden class=anchor aria-hidden=true href=#14-활용-사례>#</a></h2><h3 id=a-사례-이커머스-주문-시스템>(a) 사례: 이커머스 주문 시스템<a hidden class=anchor aria-hidden=true href=#a-사례-이커머스-주문-시스템>#</a></h3><p><strong>상황</strong>: 주문 서비스가 재고/결제 외부 API를 호출함.</p><ul><li><p><strong>구성</strong>: 주문 서비스 ←(gRPC 호출)→ 재고 서비스, 결제 서비스</p></li><li><p><strong>타임아웃 설계</strong>: 재고 호출 1초, 결제 호출 2초</p></li><li><p><strong>Fallback</strong>: 재고 실패 시 알림 + 재고 예비 보유; 결제 실패 시 결제 페이지 리다이렉트</p></li><li><p><strong>차이점</strong>:</p><ul><li>📌 <em>타임아웃 없음</em> → 시스템 블로킹, 스레드 고갈 및 주문 실패 확산</li><li>📌 <em>타임아웃 적용</em> → 주문 대기 해소, 폴백으로 UX 유지, 리소스 회수</li></ul></li></ul><p><strong>다이어그램</strong>:</p><pre class=mermaid>sequenceDiagram
    participant OrderSvc
    participant StockSvc
    participant PaySvc

    OrderSvc-&gt;&gt;StockSvc: checkStock() (timeout:1s)
    alt Stock OK
        StockSvc--&gt;&gt;OrderSvc: OK
    else timeout/fail
        OrderSvc--&gt;&gt;OrderSvc: fallbackStock()
    end
    OrderSvc-&gt;&gt;PaySvc: charge() (timeout:2s)
    alt Pay OK
        PaySvc--&gt;&gt;OrderSvc: OK
    else timeout/fail
        OrderSvc--&gt;&gt;OrderSvc: fallbackPayment()
    end
    OrderSvc--&gt;&gt;Client: orderResult()
</pre><hr><p>다음 단계로는 <strong>구현 예시 코드</strong>, <strong>실무 최적화 고려사항</strong>, <strong>“반드시 학습해야할 내용” 정리</strong>, 그리고 <strong>용어 정리 및 참고/출처</strong>를 이어서 작성하겠습니다. 이 방향으로 계속 진행할까요?</p><p>알겠습니다. 이어서 구현 예시 코드, 최적화 고려사항, 반드시 학습해야 할 내용, 용어 정리 및 참고/출처 순으로 정리했습니다.</p><hr><h2 id=15-구현-예시-implementation-example>15. 구현 예시 (Implementation Example)<a hidden class=anchor aria-hidden=true href=#15-구현-예시-implementation-example>#</a></h2><p>JavaScript (Node.js) 환경에서 <code>AbortController</code>와 <code>fetch</code>를 사용한 Timeout Pattern 구현 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span><span class=lnt id=hl-8-15><a class=lnlinks href=#hl-8-15>15</a>
</span><span class=lnt id=hl-8-16><a class=lnlinks href=#hl-8-16>16</a>
</span><span class=lnt id=hl-8-17><a class=lnlinks href=#hl-8-17>17</a>
</span><span class=lnt id=hl-8-18><a class=lnlinks href=#hl-8-18>18</a>
</span><span class=lnt id=hl-8-19><a class=lnlinks href=#hl-8-19>19</a>
</span><span class=lnt id=hl-8-20><a class=lnlinks href=#hl-8-20>20</a>
</span><span class=lnt id=hl-8-21><a class=lnlinks href=#hl-8-21>21</a>
</span><span class=lnt id=hl-8-22><a class=lnlinks href=#hl-8-22>22</a>
</span><span class=lnt id=hl-8-23><a class=lnlinks href=#hl-8-23>23</a>
</span><span class=lnt id=hl-8-24><a class=lnlinks href=#hl-8-24>24</a>
</span><span class=lnt id=hl-8-25><a class=lnlinks href=#hl-8-25>25</a>
</span><span class=lnt id=hl-8-26><a class=lnlinks href=#hl-8-26>26</a>
</span><span class=lnt id=hl-8-27><a class=lnlinks href=#hl-8-27>27</a>
</span><span class=lnt id=hl-8-28><a class=lnlinks href=#hl-8-28>28</a>
</span><span class=lnt id=hl-8-29><a class=lnlinks href=#hl-8-29>29</a>
</span><span class=lnt id=hl-8-30><a class=lnlinks href=#hl-8-30>30</a>
</span><span class=lnt id=hl-8-31><a class=lnlinks href=#hl-8-31>31</a>
</span><span class=lnt id=hl-8-32><a class=lnlinks href=#hl-8-32>32</a>
</span><span class=lnt id=hl-8-33><a class=lnlinks href=#hl-8-33>33</a>
</span><span class=lnt id=hl-8-34><a class=lnlinks href=#hl-8-34>34</a>
</span><span class=lnt id=hl-8-35><a class=lnlinks href=#hl-8-35>35</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// timeoutFetch.js
</span></span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>timeoutFetch</span><span class=p>(</span><span class=nx>url</span><span class=p>,</span> <span class=nx>options</span> <span class=o>=</span> <span class=p>{},</span> <span class=nx>timeoutMs</span> <span class=o>=</span> <span class=mi>2000</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>controller</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>AbortController</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>id</span> <span class=o>=</span> <span class=nx>setTimeout</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=nx>controller</span><span class=p>.</span><span class=nx>abort</span><span class=p>(),</span> <span class=nx>timeoutMs</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>options</span><span class=p>.</span><span class=nx>signal</span> <span class=o>=</span> <span class=nx>controller</span><span class=p>.</span><span class=nx>signal</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>res</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>url</span><span class=p>,</span> <span class=nx>options</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>clearTimeout</span><span class=p>(</span><span class=nx>id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>ok</span> <span class=o>?</span> <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>()</span> <span class=o>:</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>reject</span><span class=p>(</span><span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;HTTP error &#39;</span> <span class=o>+</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nx>name</span> <span class=o>===</span> <span class=s1>&#39;AbortError&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// Timeout 발생
</span></span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`⏱ Fetch to </span><span class=si>${</span><span class=nx>url</span><span class=si>}</span><span class=sb> timed out after </span><span class=si>${</span><span class=nx>timeoutMs</span><span class=si>}</span><span class=sb>ms`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=c1>// Fallback or retry 로직
</span></span></span><span class=line><span class=cl>      <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;TimeoutError&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>throw</span> <span class=nx>err</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용 예시
</span></span></span><span class=line><span class=cl><span class=p>(</span><span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>data</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>timeoutFetch</span><span class=p>(</span><span class=s1>&#39;https://api.example.com/data&#39;</span><span class=p>,</span> <span class=p>{},</span> <span class=mi>3000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nx>message</span> <span class=o>===</span> <span class=s1>&#39;TimeoutError&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 폴백 처리
</span></span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Using fallback data&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})();</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>AbortController</code>로 fetch 취소 구현</li><li>타임아웃 발생 시 <code>AbortError</code> 포착, 타임아웃 전용 예외 처리</li><li>폴백 로직을 catch 블록에서 처리</li></ul><hr><h2 id=16-실무에서-효과적용-고려사항-및-주의점-considerations--cautions>16. 실무에서 효과적용 고려사항 및 주의점 (Considerations & Cautions)<a hidden class=anchor aria-hidden=true href=#16-실무에서-효과적용-고려사항-및-주의점-considerations--cautions>#</a></h2><table><thead><tr><th>항목</th><th>고려사항</th><th>권장사항</th></tr></thead><tbody><tr><td>타이밍 설정</td><td>평균 vs p99 응답 시간 분석 필요</td><td>모니터링 기반으로 p95–p99 기준 설정</td></tr><tr><td>연쇄 호출</td><td>호출 체인 전체 합산 중요</td><td>Deadline Propagation 사용 권장</td></tr><tr><td>리소스 해제</td><td>타임아웃 실패 시 핸들링 필요</td><td>클린업 코드 반드시 포함</td></tr><tr><td>동시성 제어</td><td>리트라이 반복 시 부하 주의</td><td>Circuit Breaker, Backoff 결합</td></tr><tr><td>Idempotency</td><td>중복 호출 대비 안전 설계 필요</td><td>idempotent API 설계 필수</td></tr><tr><td>모니터링</td><td>타임아웃 이벤트 분석 체계 구축</td><td>타임아웃 비율, 분포, fallbacks 모니터링</td></tr><tr><td>견고성 테스트</td><td>타임아웃 정책 시나리오 테스트 필요</td><td>Chaos 테스트에 타임아웃 포함</td></tr><tr><td>문서화</td><td>서비스별 타임아웃 정책 공개</td><td>API 명세에 타임아웃 기재</td></tr></tbody></table><hr><h2 id=17-최적화-위한-고려사항-및-권장사항-optimization-considerations>17. 최적화 위한 고려사항 및 권장사항 (Optimization Considerations)<a hidden class=anchor aria-hidden=true href=#17-최적화-위한-고려사항-및-권장사항-optimization-considerations>#</a></h2><table><thead><tr><th>항목</th><th>고려사항</th><th>권장사항</th></tr></thead><tbody><tr><td>동적 조정</td><td>고정 설정의 한계 존재</td><td>Adaptive Timeout 기술 도입</td></tr><tr><td>퍼센타일 분석</td><td>평균 기반은 tail latency 대비 부족</td><td>실시간 p95-p99 분석 통합</td></tr><tr><td>Deadline 전파</td><td>호출 체인 협동 필요</td><td>gRPC Deadline/Context 활용</td></tr><tr><td>분산 추적</td><td>타임아웃 분포 분석 시 필요</td><td>Jaeger, Zipkin 등 APM 사용</td></tr><tr><td>백오프 전략</td><td>유사 리트라이 반복 부하 위험</td><td>지수적 Backoff + Jitter 사용</td></tr><tr><td>인프라 설정</td><td>코드보다 가시성 있는 중앙 제어 필요</td><td>Istio, Envoy 설정 병행</td></tr></tbody></table><hr><h2 id=18-반드시-학습해야-할-내용-must-learn-topics>18. 반드시 학습해야 할 내용 (Must-Learn Topics)<a hidden class=anchor aria-hidden=true href=#18-반드시-학습해야-할-내용-must-learn-topics>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>Resilience</td><td>Circuit Breaker</td><td>회로 차단기를 통한 호출 보호 설계</td><td>타임아웃과 병행 사용 이해</td></tr><tr><td>Distributed Systems</td><td>Deadline Propagation</td><td>호출 전파 메커니즘 이해</td><td>gRPC Context, deadline 전달</td></tr><tr><td>APM (모니터링)</td><td>퍼센타일 분석 및 분산 추적</td><td>p95/p99 모니터링, 호출 추적</td><td>tail latency 파악을 위한 필수</td></tr><tr><td>API Design</td><td>Idempotency & RPC Ack Pattern</td><td>중복 호출 대비 & ack 응답 패턴</td><td>안정성 설계 필수 개념</td></tr><tr><td>Fault Injection</td><td>Chaos Engineering</td><td>장애 상황 테스트 방법론</td><td>타임아웃 동작 검증 필수</td></tr><tr><td>Protocols</td><td>HTTP 요구사항 vs gRPC deadline</td><td>프로토콜별 타임아웃 지원 방식 이해</td><td>타임아웃 구현 전략 차이 파악</td></tr></tbody></table><hr><hr><h2 id=용어-정리-glossary>용어 정리 (Glossary)<a hidden class=anchor aria-hidden=true href=#용어-정리-glossary>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>Resilience</td><td>Idempotency</td><td>중복 호출 시 동일 결과 보장</td></tr><tr><td>Resilience</td><td>Circuit Breaker (회로 차단기)</td><td>오류율 일정 수준 시 외부 호출 차단</td></tr><tr><td>Monitoring</td><td>Tail Latency</td><td>최상위 응답 지연(p95, p99 등)</td></tr><tr><td>Distributed Systems</td><td>Deadline Propagation</td><td>호출 체인에서 deadline 전파</td></tr><tr><td>Optimization</td><td>Backoff & Jitter</td><td>리트라이 시 지수 지연 + 무작위 지연 적용</td></tr><tr><td>Fault Testing</td><td>Chaos Engineering</td><td>장애 주입으로 시스템 회복성 평가</td></tr></tbody></table><hr><h2 id=참고-및-출처-1>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-1>#</a></h2><ul><li>[Resilience4j 공식 문서]</li><li>[Istio Timeout 설정 가이드]</li><li>[“The Art of Scalability” – tail latency and timeout 챕터]</li><li>[gRPC Basics: Deadline and Timeout 활용법]</li></ul><hr><p>이상으로 “Timeout Pattern”에 대한 전반적인 정리 및 분석을 마쳤습니다. 다른 패턴이나 심화 분석이 필요하면 언제든 요청해주세요!</p><p>네, Timeout Pattern에 대해 체계적으로 조사하고 분석해보겠습니다. 먼저 관련 정보를 수집하겠습니다.</p><h1 id=timeout-pattern-완전-가이드>Timeout Pattern 완전 가이드<a hidden class=anchor aria-hidden=true href=#timeout-pattern-완전-가이드>#</a></h1><h2 id=1-태그>1. 태그<a hidden class=anchor aria-hidden=true href=#1-태그>#</a></h2><p><code>Timeout-Pattern</code>, <code>Resilience-Design-Patterns</code>, <code>Latency-Control</code>, <code>Microservices-Architecture</code></p><h2 id=2-분류-구조-검증>2. 분류 구조 검증<a hidden class=anchor aria-hidden=true href=#2-분류-구조-검증>#</a></h2><p><strong>Computer Science and Engineering > Software Engineering > Design and Architecture > Architecture Patterns > Resilience Patterns</strong></p><p>이 분류는 적절합니다. Timeout Pattern은 분산 시스템에서 복원력(Resilience)을 제공하는 아키텍처 패턴으로, 네트워크 지연을 제어하는 중요한 설계 패턴입니다. 복원력 패턴의 한 분야인 지연 제어(Latency Control) 카테고리에 속합니다.</p><h2 id=3-요약-설명>3. 요약 설명<a hidden class=anchor aria-hidden=true href=#3-요약-설명>#</a></h2><p>타임아웃 패턴 (Timeout Pattern)은 분산 시스템에서 서비스 간 통신 시 응답 대기 시간에 상한선을 설정하여 무한 대기를 방지하고 시스템의 전체적인 응답성과 복원력을 향상시키는 설계 패턴입니다. 네트워크 지연이나 서비스 장애로 인한 연쇄 실패를 방지하는 가장 기본적이면서도 효과적인 복원력 설계 패턴입니다.</p><h2 id=4-개요>4. 개요<a hidden class=anchor aria-hidden=true href=#4-개요>#</a></h2><p>타임아웃 패턴은 마이크로서비스 아키텍처와 분산 시스템에서 핵심적인 복원력 패턴으로, 서비스 간 통신에서 발생할 수 있는 무한 대기 상황을 방지합니다. 이 패턴은 네트워크 호출, 데이터베이스 작업, 외부 API 호출 등에 시간 제한을 설정하여 시스템 자원의 효율적 활용과 사용자 경험 향상을 도모합니다.</p><hr><h1 id=제1부-이론적-기초>제1부: 이론적 기초<a hidden class=anchor aria-hidden=true href=#제1부-이론적-기초>#</a></h1><h2 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h2><p>타임아웃 패턴 (Timeout Pattern)은 <strong>분산 시스템에서 원격 호출에 대한 최대 대기 시간을 정의하는 복원력 설계 패턴</strong>입니다. 이 패턴의 핵심 개념들은 다음과 같습니다:</p><h3 id=주요-개념-요소>주요 개념 요소<a hidden class=anchor aria-hidden=true href=#주요-개념-요소>#</a></h3><p><strong>1. 시간 경계 (Time Boundary)</strong></p><ul><li>원격 호출에 대한 최대 허용 대기 시간</li><li>무한 대기 상황 방지</li></ul><p><strong>2. 빠른 실패 (Fail Fast)</strong></p><ul><li>시간 초과 시 즉시 실패 처리</li><li>시스템 자원 보호</li></ul><p><strong>3. 지연 제어 (Latency Control)</strong></p><ul><li>전체 시스템의 응답 시간 관리</li><li>사용자 경험 개선</li></ul><p><strong>4. 자원 보호 (Resource Protection)</strong></p><ul><li>스레드 풀 고갈 방지</li><li>메모리 누수 방지</li></ul><h3 id=실무-구현-관련-핵심-개념>실무 구현 관련 핵심 개념<a hidden class=anchor aria-hidden=true href=#실무-구현-관련-핵심-개념>#</a></h3><p><strong>1. 연결 타임아웃 (Connection Timeout)</strong></p><ul><li>서버와의 연결 수립 시간 제한</li><li>네트워크 연결 문제 대응</li></ul><p><strong>2. 읽기 타임아웃 (Read Timeout)</strong></p><ul><li>응답 데이터 수신 시간 제한</li><li>서버 응답 지연 대응</li></ul><p><strong>3. 쓰기 타임아웃 (Write Timeout)</strong></p><ul><li>요청 데이터 전송 시간 제한</li><li>업로드 작업 시간 관리</li></ul><p><strong>4. 요청 타임아웃 (Request Timeout)</strong></p><ul><li>전체 HTTP 요청-응답 사이클 시간 제한</li><li>종합적인 시간 관리</li></ul><h2 id=배경-1>배경<a hidden class=anchor aria-hidden=true href=#배경-1>#</a></h2><p>분산 시스템과 마이크로서비스 아키텍처의 등장으로 서비스 간 네트워크 통신이 필수적이 되었습니다. 이러한 환경에서 다음과 같은 문제들이 발생했습니다:</p><h3 id=기술적-배경>기술적 배경<a hidden class=anchor aria-hidden=true href=#기술적-배경>#</a></h3><p><strong>1. 네트워크 불안정성</strong></p><ul><li>네트워크 지연 및 패킷 손실</li><li>일시적 연결 장애</li></ul><p><strong>2. 서비스 의존성 증가</strong></p><ul><li>하나의 서비스가 다수의 서비스에 의존</li><li>연쇄 장애 가능성 증가</li></ul><p><strong>3. 자원 고갈 문제</strong></p><ul><li>응답하지 않는 서비스로 인한 스레드 블로킹</li><li>메모리 및 연결 풀 고갈</li></ul><h3 id=비즈니스-배경>비즈니스 배경<a hidden class=anchor aria-hidden=true href=#비즈니스-배경>#</a></h3><p><strong>1. 사용자 경험 중요성 증대</strong></p><ul><li>빠른 응답 시간 요구</li><li>무응답 상태에 대한 낮은 tolerance</li></ul><p><strong>2. 가용성 요구사항 증가</strong></p><ul><li>24/7 서비스 운영 필요</li><li>부분 장애 시에도 서비스 지속성 요구</li></ul><h2 id=목적-및-필요성-1>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성-1>#</a></h2><h3 id=주요-목적>주요 목적<a hidden class=anchor aria-hidden=true href=#주요-목적>#</a></h3><p><strong>1. 시스템 복원력 향상</strong></p><ul><li>부분 장애가 전체 시스템에 미치는 영향 최소화</li><li>장애 격리 및 빠른 복구</li></ul><p><strong>2. 자원 효율성 개선</strong></p><ul><li>스레드 및 연결 자원의 효율적 활용</li><li>시스템 처리량 향상</li></ul><p><strong>3. 사용자 경험 개선</strong></p><ul><li>예측 가능한 응답 시간 제공</li><li>무응답 상태 방지</li></ul><h3 id=필요성>필요성<a hidden class=anchor aria-hidden=true href=#필요성>#</a></h3><p><strong>1. 기술적 필요성</strong></p><ul><li>분산 시스템의 불확실성 관리</li><li>네트워크 장애 대응</li><li>연쇄 장애 방지</li></ul><p><strong>2. 비즈니스 필요성</strong></p><ul><li>서비스 품질 보장</li><li>고객 만족도 유지</li><li>비즈니스 연속성 확보</li></ul><h2 id=주요-기능-및-역할-1>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할-1>#</a></h2><h3 id=주요-기능>주요 기능<a hidden class=anchor aria-hidden=true href=#주요-기능>#</a></h3><p><strong>1. 시간 제한 설정</strong></p><ul><li>각 원격 호출에 대한 최대 대기 시간 정의</li><li>다양한 레벨의 타임아웃 설정 (연결, 읽기, 쓰기)</li></ul><p><strong>2. 자동 중단</strong></p><ul><li>설정된 시간 초과 시 자동으로 작업 중단</li><li>예외 발생을 통한 호출자 통지</li></ul><p><strong>3. 자원 해제</strong></p><ul><li>타임아웃 발생 시 점유 중인 자원 해제</li><li>메모리 및 연결 리소스 관리</li></ul><h3 id=주요-역할>주요 역할<a hidden class=anchor aria-hidden=true href=#주요-역할>#</a></h3><p><strong>1. 안전장치 역할</strong></p><ul><li>시스템의 최후 방어선</li><li>예상치 못한 지연 상황 대응</li></ul><p><strong>2. 성능 보장</strong></p><ul><li>시스템 전체의 응답성 유지</li><li>처리량 안정성 확보</li></ul><p><strong>3. 장애 격리</strong></p><ul><li>특정 서비스의 문제가 다른 서비스에 전파되지 않도록 차단</li></ul><h2 id=특징-1>특징<a hidden class=anchor aria-hidden=true href=#특징-1>#</a></h2><h3 id=핵심-특징>핵심 특징<a hidden class=anchor aria-hidden=true href=#핵심-특징>#</a></h3><p><strong>1. 단순성</strong></p><ul><li>구현이 간단하고 이해하기 쉬움</li><li>기존 시스템에 쉽게 적용 가능</li></ul><p><strong>2. 효과성</strong></p><ul><li>작은 변경으로 큰 효과</li><li>시스템 안정성 크게 향상</li></ul><p><strong>3. 범용성</strong></p><ul><li>모든 종류의 원격 호출에 적용 가능</li><li>다양한 프로토콜과 기술 스택에서 사용</li></ul><p><strong>4. 즉시성</strong></p><ul><li>타임아웃 발생 시 즉시 처리</li><li>빠른 장애 감지 및 대응</li></ul><h3 id=구현-특징>구현 특징<a hidden class=anchor aria-hidden=true href=#구현-특징>#</a></h3><p><strong>1. 설정 기반</strong></p><ul><li>코드 변경 없이 설정으로 조정 가능</li><li>환경별 다른 값 적용 가능</li></ul><p><strong>2. 계층적 적용</strong></p><ul><li>네트워크 레벨부터 애플리케이션 레벨까지</li><li>다단계 보호 체계 구축</li></ul><h2 id=핵심-원칙-1>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙-1>#</a></h2><h3 id=1-적절한-타임아웃-값-설정>1. 적절한 타임아웃 값 설정<a hidden class=anchor aria-hidden=true href=#1-적절한-타임아웃-값-설정>#</a></h3><pre class=mermaid>graph TD
    A[성능 데이터 수집] --&gt; B[통계 분석]
    B --&gt; C[여유 시간 추가]
    C --&gt; D[타임아웃 값 결정]
    D --&gt; E[모니터링]
    E --&gt; F[필요시 조정]
    F --&gt; A
</pre><p><strong>설정 원칙:</strong></p><ul><li>평균 응답 시간의 2-3배</li><li>95 percentile 기준 설정</li><li>비즈니스 요구사항 고려</li></ul><h3 id=2-계층별-타임아웃-설정>2. 계층별 타임아웃 설정<a hidden class=anchor aria-hidden=true href=#2-계층별-타임아웃-설정>#</a></h3><pre class=mermaid>graph LR
    A[HTTP Client] --&gt; B[Load Balancer]
    B --&gt; C[API Gateway]
    C --&gt; D[Microservice]
    D --&gt; E[Database]
    
    A -.-&gt; A1[30s]
    B -.-&gt; B1[25s]
    C -.-&gt; C1[20s]
    D -.-&gt; D1[15s]
    E -.-&gt; E1[10s]
</pre><h3 id=3-점진적-감소-원칙>3. 점진적 감소 원칙<a hidden class=anchor aria-hidden=true href=#3-점진적-감소-원칙>#</a></h3><ul><li>상위 레이어일수록 더 긴 타임아웃</li><li>하위 레이어의 타임아웃이 먼저 동작</li><li>연쇄 타임아웃 방지</li></ul><h3 id=4-상황별-차별화>4. 상황별 차별화<a hidden class=anchor aria-hidden=true href=#4-상황별-차별화>#</a></h3><ul><li>중요도에 따른 타임아웃 차별화</li><li>실시간성 요구사항 반영</li><li>사용자 vs 시스템 호출 구분</li></ul><h2 id=주요-원리>주요 원리<a hidden class=anchor aria-hidden=true href=#주요-원리>#</a></h2><h3 id=1-시간-경계-원리-time-boundary-principle>1. 시간 경계 원리 (Time Boundary Principle)<a hidden class=anchor aria-hidden=true href=#1-시간-경계-원리-time-boundary-principle>#</a></h3><p>모든 원격 호출에는 명확한 시간 제한이 있어야 합니다.</p><pre class=mermaid>sequenceDiagram
    participant Client
    participant Service
    participant Timer
    
    Client-&gt;&gt;Service: Request
    Client-&gt;&gt;Timer: Start Timer (5s)
    
    alt Response within timeout
        Service-&gt;&gt;Client: Response
        Timer-&gt;&gt;Client: Cancel Timer
    else Timeout occurs
        Timer-&gt;&gt;Client: Timeout Exception
        Client-&gt;&gt;Service: Cancel Request
    end
</pre><h3 id=2-빠른-실패-원리-fail-fast-principle>2. 빠른 실패 원리 (Fail Fast Principle)<a hidden class=anchor aria-hidden=true href=#2-빠른-실패-원리-fail-fast-principle>#</a></h3><p>문제가 감지되면 즉시 실패 처리하여 자원을 보호합니다.</p><h3 id=3-계층적-보호-원리-layered-protection-principle>3. 계층적 보호 원리 (Layered Protection Principle)<a hidden class=anchor aria-hidden=true href=#3-계층적-보호-원리-layered-protection-principle>#</a></h3><p>여러 레벨에서 타임아웃을 적용하여 다층 보호를 제공합니다.</p><h2 id=작동-원리>작동 원리<a hidden class=anchor aria-hidden=true href=#작동-원리>#</a></h2><h3 id=기본-작동-메커니즘>기본 작동 메커니즘<a hidden class=anchor aria-hidden=true href=#기본-작동-메커니즘>#</a></h3><pre class=mermaid>flowchart TD
    A[요청 시작] --&gt; B[타이머 시작]
    B --&gt; C{응답 수신?}
    C --&gt;|Yes| D[타이머 취소]
    C --&gt;|No| E{타임아웃?}
    E --&gt;|No| C
    E --&gt;|Yes| F[타임아웃 예외 발생]
    D --&gt; G[정상 응답 반환]
    F --&gt; H[자원 정리]
    H --&gt; I[실패 응답 반환]
</pre><h3 id=상세-작동-과정>상세 작동 과정<a hidden class=anchor aria-hidden=true href=#상세-작동-과정>#</a></h3><p><strong>1. 초기화 단계</strong></p><ul><li>타임아웃 값 설정</li><li>타이머 객체 생성</li><li>예외 핸들러 등록</li></ul><p><strong>2. 실행 단계</strong></p><ul><li>원격 호출 시작</li><li>타이머 시작</li><li>응답 대기</li></ul><p><strong>3. 완료 단계</strong></p><ul><li>성공: 타이머 취소, 응답 반환</li><li>실패: 타임아웃 예외, 자원 정리</li></ul><hr><h1 id=제2부-구조-및-구현>제2부: 구조 및 구현<a hidden class=anchor aria-hidden=true href=#제2부-구조-및-구현>#</a></h1><h2 id=구조-및-아키텍처-1>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처-1>#</a></h2><h3 id=전체-아키텍처>전체 아키텍처<a hidden class=anchor aria-hidden=true href=#전체-아키텍처>#</a></h3><pre class=mermaid>graph TB
    subgraph &#34;Client Layer&#34;
        CL[Client Application]
        TO[Timeout Configuration]
    end
    
    subgraph &#34;Timeout Management Layer&#34;
        TM[Timeout Manager]
        TI[Timer Implementation]
        EH[Exception Handler]
    end
    
    subgraph &#34;Communication Layer&#34;
        HC[HTTP Client]
        CP[Connection Pool]
        NL[Network Layer]
    end
    
    subgraph &#34;Service Layer&#34;
        RS[Remote Service]
        DB[Database]
    end
    
    CL --&gt; TM
    TO --&gt; TM
    TM --&gt; TI
    TM --&gt; EH
    TM --&gt; HC
    HC --&gt; CP
    CP --&gt; NL
    NL --&gt; RS
    RS --&gt; DB
</pre><h3 id=구성-요소>구성 요소<a hidden class=anchor aria-hidden=true href=#구성-요소>#</a></h3><h4 id=필수-구성요소>필수 구성요소<a hidden class=anchor aria-hidden=true href=#필수-구성요소>#</a></h4><table><thead><tr><th>구성요소</th><th>기능</th><th>역할</th><th>특징</th></tr></thead><tbody><tr><td><strong>Timeout Manager</strong></td><td>타임아웃 관리</td><td>타임아웃 설정 및 제어</td><td>중앙 집중형 관리</td></tr><tr><td><strong>Timer Implementation</strong></td><td>시간 측정</td><td>실제 시간 계측 및 알림</td><td>정확한 시간 관리</td></tr><tr><td><strong>Exception Handler</strong></td><td>예외 처리</td><td>타임아웃 예외 처리</td><td>적절한 에러 응답</td></tr><tr><td><strong>Resource Manager</strong></td><td>자원 관리</td><td>타임아웃 시 자원 해제</td><td>메모리 누수 방지</td></tr></tbody></table><h4 id=선택-구성요소>선택 구성요소<a hidden class=anchor aria-hidden=true href=#선택-구성요소>#</a></h4><table><thead><tr><th>구성요소</th><th>기능</th><th>역할</th><th>특징</th></tr></thead><tbody><tr><td><strong>Fallback Handler</strong></td><td>대체 처리</td><td>타임아웃 시 대체 로직</td><td>사용자 경험 개선</td></tr><tr><td><strong>Metrics Collector</strong></td><td>메트릭 수집</td><td>타임아웃 통계 수집</td><td>성능 모니터링</td></tr><tr><td><strong>Circuit Breaker</strong></td><td>회로 차단</td><td>연속 타임아웃 시 차단</td><td>시스템 보호 강화</td></tr><tr><td><strong>Retry Manager</strong></td><td>재시도 관리</td><td>타임아웃 후 재시도</td><td>일시적 장애 대응</td></tr></tbody></table><h3 id=아키텍처-구현-패턴>아키텍처 구현 패턴<a hidden class=anchor aria-hidden=true href=#아키텍처-구현-패턴>#</a></h3><h4 id=1-클라이언트-사이드-패턴>1. 클라이언트 사이드 패턴<a hidden class=anchor aria-hidden=true href=#1-클라이언트-사이드-패턴>#</a></h4><pre class=mermaid>graph LR
    A[Application] --&gt; B[Timeout Wrapper]
    B --&gt; C[HTTP Client]
    C --&gt; D[Remote Service]
    
    B --&gt; E[Timer Thread]
    E -.-&gt; F[Timeout Event]
    F -.-&gt; B
</pre><h4 id=2-프록시-패턴>2. 프록시 패턴<a hidden class=anchor aria-hidden=true href=#2-프록시-패턴>#</a></h4><pre class=mermaid>graph LR
    A[Client] --&gt; B[Timeout Proxy]
    B --&gt; C[Actual Service]
    
    B --&gt; D[Timeout Logic]
    D --&gt; E[Timer]
    D --&gt; F[Exception Handler]
</pre><h2 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h2><h3 id=1-동기-호출-타임아웃>1. 동기 호출 타임아웃<a hidden class=anchor aria-hidden=true href=#1-동기-호출-타임아웃>#</a></h3><p><strong>정의:</strong> 동기적 서비스 호출에 타임아웃 적용</p><p><strong>구성:</strong></p><ul><li>HTTP 클라이언트 타임아웃 설정</li><li>커넥션 및 읽기 타임아웃 분리</li><li>예외 처리 메커니즘</li></ul><p><strong>목적:</strong> 블로킹 호출에서 무한 대기 방지</p><p><strong>실제 예시:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1> 1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2> 2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3> 3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4> 4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5> 5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6> 6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7> 7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8> 8</a>
</span><span class=lnt id=hl-16-9><a class=lnlinks href=#hl-16-9> 9</a>
</span><span class=lnt id=hl-16-10><a class=lnlinks href=#hl-16-10>10</a>
</span><span class=lnt id=hl-16-11><a class=lnlinks href=#hl-16-11>11</a>
</span><span class=lnt id=hl-16-12><a class=lnlinks href=#hl-16-12>12</a>
</span><span class=lnt id=hl-16-13><a class=lnlinks href=#hl-16-13>13</a>
</span><span class=lnt id=hl-16-14><a class=lnlinks href=#hl-16-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Spring Boot RestTemplate 예시</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>RestTemplateConfig</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>RestTemplate</span><span class=w> </span><span class=nf>restTemplate</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>HttpComponentsClientHttpRequestFactory</span><span class=w> </span><span class=n>factory</span><span class=w> </span><span class=o>=</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>new</span><span class=w> </span><span class=n>HttpComponentsClientHttpRequestFactory</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>factory</span><span class=p>.</span><span class=na>setConnectTimeout</span><span class=p>(</span><span class=n>5000</span><span class=p>);</span><span class=w>     </span><span class=c1>// 연결 타임아웃: 5초</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>factory</span><span class=p>.</span><span class=na>setReadTimeout</span><span class=p>(</span><span class=n>10000</span><span class=p>);</span><span class=w>       </span><span class=c1>// 읽기 타임아웃: 10초</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>RestTemplate</span><span class=p>(</span><span class=n>factory</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>시스템 구성:</strong></p><pre class=mermaid>graph LR
    A[Order Service] --&gt;|5s timeout| B[Payment Service]
    B --&gt;|3s timeout| C[Bank API]
    
    A -.-&gt; D[Timeout Handler]
    D -.-&gt; E[Fallback Logic]
</pre><h3 id=2-비동기-호출-타임아웃>2. 비동기 호출 타임아웃<a hidden class=anchor aria-hidden=true href=#2-비동기-호출-타임아웃>#</a></h3><p><strong>정의:</strong> 비동기 작업에 시간 제한 적용</p><p><strong>구성:</strong></p><ul><li>Future/CompletableFuture 활용</li><li>Executor 서비스 타임아웃</li><li>콜백 기반 타임아웃</li></ul><p><strong>목적:</strong> 비동기 작업의 무한 실행 방지</p><p><strong>실제 예시:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1> 1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2> 2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3> 3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4> 4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5> 5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6> 6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7> 7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8> 8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9> 9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10>10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11>11</a>
</span><span class=lnt id=hl-18-12><a class=lnlinks href=#hl-18-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// CompletableFuture 타임아웃 예시</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=n>CompletableFuture</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=nf>asyncCallWithTimeout</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>CompletableFuture</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>supplyAsync</span><span class=p>(()</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>remoteService</span><span class=p>.</span><span class=na>call</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>orTimeout</span><span class=p>(</span><span class=n>Duration</span><span class=p>.</span><span class=na>ofSeconds</span><span class=p>(</span><span class=n>5</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>exceptionally</span><span class=p>(</span><span class=n>throwable</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>throwable</span><span class=w> </span><span class=k>instanceof</span><span class=w> </span><span class=n>TimeoutException</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>return</span><span class=w> </span><span class=s>&#34;Timeout occurred&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=s>&#34;Error: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>throwable</span><span class=p>.</span><span class=na>getMessage</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>});</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=3-데이터베이스-타임아웃>3. 데이터베이스 타임아웃<a hidden class=anchor aria-hidden=true href=#3-데이터베이스-타임아웃>#</a></h3><p><strong>정의:</strong> 데이터베이스 쿼리 실행 시간 제한</p><p><strong>구성:</strong></p><ul><li>연결 풀 타임아웃</li><li>쿼리 실행 타임아웃</li><li>트랜잭션 타임아웃</li></ul><p><strong>목적:</strong> 데이터베이스 리소스 보호</p><p><strong>실제 예시:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1>1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2>2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3>3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4>4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Spring @Transactional 타임아웃</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nd>@Transactional</span><span class=p>(</span><span class=n>timeout</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>30</span><span class=p>)</span><span class=w> </span><span class=c1>// 30초 타임아웃</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>longRunningDatabaseOperation</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 데이터베이스 작업</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=4-서킷-브레이커-통합-타임아웃>4. 서킷 브레이커 통합 타임아웃<a hidden class=anchor aria-hidden=true href=#4-서킷-브레이커-통합-타임아웃>#</a></h3><p><strong>정의:</strong> 서킷 브레이커 패턴과 타임아웃 결합</p><p><strong>구성:</strong></p><ul><li>타임아웃 기반 실패 감지</li><li>서킷 브레이커 상태 관리</li><li>빠른 실패 메커니즘</li></ul><p><strong>목적:</strong> 연속적인 타임아웃 시 시스템 보호</p><p><strong>실제 예시:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1>1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2>2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3>3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4>4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5>5</a>
</span><span class=lnt id=hl-20-6><a class=lnlinks href=#hl-20-6>6</a>
</span><span class=lnt id=hl-20-7><a class=lnlinks href=#hl-20-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Resilience4j 서킷 브레이커 + 타임아웃</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nd>@CircuitBreaker</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;payment-service&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=nd>@TimeLimiter</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;payment-service&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=n>CompletableFuture</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=nf>callPaymentService</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>CompletableFuture</span><span class=p>.</span><span class=na>supplyAsync</span><span class=p>(()</span><span class=w> </span><span class=o>-&gt;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>paymentService</span><span class=p>.</span><span class=na>processPayment</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><hr><h1 id=제3부-장단점-및-문제점-분석>제3부: 장단점 및 문제점 분석<a hidden class=anchor aria-hidden=true href=#제3부-장단점-및-문제점-분석>#</a></h1><h2 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td><strong>시스템 안정성 향상</strong></td><td>무한 대기로 인한 시스템 마비 방지, 스레드 고갈 및 메모리 누수 차단</td></tr><tr><td></td><td><strong>빠른 장애 감지</strong></td><td>문제 상황을 즉시 감지하여 빠른 대응 가능, 사용자에게 즉각적인 피드백 제공</td></tr><tr><td></td><td><strong>자원 효율성</strong></td><td>CPU, 메모리, 네트워크 자원의 효율적 활용, 불필요한 대기 시간 제거</td></tr><tr><td></td><td><strong>구현 단순성</strong></td><td>기존 코드에 쉽게 적용 가능, 복잡한 로직 변경 없이 설정만으로 적용</td></tr><tr><td></td><td><strong>예측 가능한 성능</strong></td><td>최대 응답 시간 보장으로 일정한 사용자 경험 제공</td></tr></tbody></table><h2 id=단점과-문제점-그리고-해결방안>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안>#</a></h2><h3 id=단점-1>단점<a hidden class=anchor aria-hidden=true href=#단점-1>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td><strong>부정확한 실패 판단</strong></td><td>실제로는 성공할 수 있는 요청을 타임아웃으로 실패 처리</td><td>통계 기반 타임아웃 값 조정, A/B 테스트를 통한 최적값 찾기</td></tr><tr><td></td><td><strong>중복 요청 가능성</strong></td><td>타임아웃 후 재시도 시 이전 요청이 성공하여 중복 처리 발생</td><td>Idempotent 키 사용, 멱등성 보장 메커니즘 구현</td></tr><tr><td></td><td><strong>설정 복잡성</strong></td><td>다양한 서비스별로 적절한 타임아웃 값 설정 어려움</td><td>자동 조정 메커니즘 도입, 머신러닝 기반 최적화</td></tr><tr><td></td><td><strong>디버깅 어려움</strong></td><td>타임아웃이 실제 원인을 숨길 수 있음</td><td>상세한 로깅 및 메트릭 수집, 분산 추적 시스템 도입</td></tr></tbody></table><h3 id=문제점-1>문제점<a hidden class=anchor aria-hidden=true href=#문제점-1>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td><strong>False Positive</strong></td><td>과도하게 짧은 타임아웃</td><td>정상 요청도 실패 처리</td><td>성공률 모니터링, 응답시간 분포 분석</td><td>통계 기반 타임아웃 설정</td><td>적응형 타임아웃, 점진적 증가 알고리즘</td></tr><tr><td></td><td><strong>Thundering Herd</strong></td><td>동시 타임아웃 발생</td><td>서버 과부하</td><td>동시 요청 수 모니터링</td><td>Jitter 추가, 요청 분산</td><td>백오프 전략, 서킷 브레이커 조합</td></tr><tr><td></td><td><strong>Resource Leak</strong></td><td>타임아웃 후 자원 미해제</td><td>메모리/연결 고갈</td><td>자원 사용량 모니터링</td><td>적절한 정리 로직 구현</td><td>Try-with-resources, 자동 자원 관리</td></tr><tr><td></td><td><strong>Cascading Timeout</strong></td><td>연쇄적 타임아웃 발생</td><td>전체 시스템 마비</td><td>서비스별 지연 시간 분석</td><td>계층별 타임아웃 설정</td><td>격리 패턴, 비동기 처리</td></tr></tbody></table><h2 id=도전-과제>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제>#</a></h2><h3 id=1-동적-타임아웃-조정>1. 동적 타임아웃 조정<a hidden class=anchor aria-hidden=true href=#1-동적-타임아웃-조정>#</a></h3><p><strong>원인:</strong> 시스템 부하와 네트워크 상황에 따른 응답 시간 변화</p><p><strong>영향:</strong> 고정된 타임아웃 값으로는 최적의 성능 달성 어려움</p><p><strong>해결 방법:</strong></p><ul><li>머신러닝 기반 예측 모델 사용</li><li>실시간 통계 기반 자동 조정</li><li>적응형 타임아웃 알고리즘 구현</li></ul><h3 id=2-멀티-클라우드-환경에서의-타임아웃-관리>2. 멀티 클라우드 환경에서의 타임아웃 관리<a hidden class=anchor aria-hidden=true href=#2-멀티-클라우드-환경에서의-타임아웃-관리>#</a></h3><p><strong>원인:</strong> 클라우드 프로바이더별 네트워크 특성 차이</p><p><strong>영향:</strong> 일관된 타임아웃 정책 적용 어려움</p><p><strong>해결 방법:</strong></p><ul><li>클라우드별 타임아웃 프로파일 관리</li><li>지역별 네트워크 지연 고려</li><li>통합 모니터링 시스템 구축</li></ul><h3 id=3-마이크로서비스-체인에서의-타임아웃-전파>3. 마이크로서비스 체인에서의 타임아웃 전파<a hidden class=anchor aria-hidden=true href=#3-마이크로서비스-체인에서의-타임아웃-전파>#</a></h3><p><strong>원인:</strong> 서비스 간 복잡한 의존성과 호출 체인</p><p><strong>영향:</strong> 적절한 end-to-end 타임아웃 설정 어려움</p><p><strong>해결 방법:</strong></p><ul><li>분산 추적을 통한 호출 체인 분석</li><li>서비스 메시 활용</li><li>계층적 타임아웃 전략 수립</li></ul><hr><h1 id=제4부-실무-적용-및-최적화>제4부: 실무 적용 및 최적화<a hidden class=anchor aria-hidden=true href=#제4부-실무-적용-및-최적화>#</a></h1><h2 id=분류-기준에-따른-종류-및-유형>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형>#</a></h2><table><thead><tr><th>분류 기준</th><th>종류/유형</th><th>설명</th><th>특징</th></tr></thead><tbody><tr><td><strong>적용 레벨</strong></td><td>네트워크 레벨</td><td>TCP/IP 소켓 타임아웃</td><td>가장 낮은 레벨, OS 설정</td></tr><tr><td></td><td>프로토콜 레벨</td><td>HTTP, gRPC 타임아웃</td><td>프로토콜별 특성 반영</td></tr><tr><td></td><td>애플리케이션 레벨</td><td>비즈니스 로직 타임아웃</td><td>업무 요구사항 기반</td></tr><tr><td><strong>시간 기준</strong></td><td>연결 타임아웃</td><td>연결 수립 시간 제한</td><td>3-5초 권장</td></tr><tr><td></td><td>읽기 타임아웃</td><td>응답 수신 시간 제한</td><td>10-30초 권장</td></tr><tr><td></td><td>쓰기 타임아웃</td><td>요청 전송 시간 제한</td><td>업로드 크기에 따라</td></tr><tr><td><strong>구현 방식</strong></td><td>동기 타임아웃</td><td>블로킹 호출의 타임아웃</td><td>스레드 기반</td></tr><tr><td></td><td>비동기 타임아웃</td><td>논블로킹 호출의 타임아웃</td><td>이벤트 기반</td></tr><tr><td><strong>조정 방식</strong></td><td>정적 타임아웃</td><td>고정된 타임아웃 값</td><td>설정 기반</td></tr><tr><td></td><td>동적 타임아웃</td><td>상황에 따라 조정</td><td>알고리즘 기반</td></tr></tbody></table><h2 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h2><table><thead><tr><th>사용 영역</th><th>함께 사용되는 기술</th><th>목적</th><th>효과</th></tr></thead><tbody><tr><td><strong>마이크로서비스 통신</strong></td><td>Spring Boot, Netflix Hystrix</td><td>서비스 간 호출 안정성</td><td>99.9% 가용성 달성</td></tr><tr><td><strong>데이터베이스 접근</strong></td><td>JPA, Connection Pool</td><td>데이터베이스 자원 보호</td><td>응답 시간 50% 개선</td></tr><tr><td><strong>외부 API 호출</strong></td><td>RestTemplate, WebClient</td><td>써드파티 서비스 의존성 관리</td><td>장애 전파 방지</td></tr><tr><td><strong>메시지 큐 처리</strong></td><td>RabbitMQ, Apache Kafka</td><td>메시지 처리 시간 제어</td><td>처리량 안정성 확보</td></tr><tr><td><strong>파일 업로드/다운로드</strong></td><td>Multipart, Streaming</td><td>대용량 파일 처리 관리</td><td>시스템 자원 보호</td></tr></tbody></table><h2 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h2><h3 id=전자상거래-플랫폼에서의-결제-서비스-타임아웃-적용>전자상거래 플랫폼에서의 결제 서비스 타임아웃 적용<a hidden class=anchor aria-hidden=true href=#전자상거래-플랫폼에서의-결제-서비스-타임아웃-적용>#</a></h3><h4 id=시스템-구성>시스템 구성<a hidden class=anchor aria-hidden=true href=#시스템-구성>#</a></h4><pre class=mermaid>graph TB
    subgraph &#34;Frontend&#34;
        UI[Web UI]
        MOB[Mobile App]
    end
    
    subgraph &#34;API Gateway&#34;
        AG[API Gateway&lt;br/&gt;Timeout: 30s]
    end
    
    subgraph &#34;Backend Services&#34;
        OS[Order Service&lt;br/&gt;Timeout: 25s]
        PS[Payment Service&lt;br/&gt;Timeout: 20s]
        IS[Inventory Service&lt;br/&gt;Timeout: 15s]
    end
    
    subgraph &#34;External Services&#34;
        BANK[Bank API&lt;br/&gt;Timeout: 10s]
        PG[Payment Gateway&lt;br/&gt;Timeout: 8s]
    end
    
    subgraph &#34;Database&#34;
        DB[(Database&lt;br/&gt;Timeout: 5s)]
    end
    
    UI --&gt; AG
    MOB --&gt; AG
    AG --&gt; OS
    OS --&gt; PS
    OS --&gt; IS
    PS --&gt; BANK
    PS --&gt; PG
    IS --&gt; DB
</pre><h4 id=workflow>Workflow<a hidden class=anchor aria-hidden=true href=#workflow>#</a></h4><pre class=mermaid>sequenceDiagram
    participant User
    participant API_Gateway
    participant Order_Service
    participant Payment_Service
    participant Bank_API
    
    User-&gt;&gt;API_Gateway: 결제 요청 (30s timeout)
    API_Gateway-&gt;&gt;Order_Service: 주문 처리 (25s timeout)
    Order_Service-&gt;&gt;Payment_Service: 결제 처리 (20s timeout)
    Payment_Service-&gt;&gt;Bank_API: 은행 승인 (10s timeout)
    
    alt 정상 처리
        Bank_API-&gt;&gt;Payment_Service: 승인 완료
        Payment_Service-&gt;&gt;Order_Service: 결제 완료
        Order_Service-&gt;&gt;API_Gateway: 주문 완료
        API_Gateway-&gt;&gt;User: 성공 응답
    else 타임아웃 발생
        Note over Bank_API: 10초 후 타임아웃
        Payment_Service-&gt;&gt;Order_Service: 결제 실패
        Order_Service-&gt;&gt;API_Gateway: 주문 실패
        API_Gateway-&gt;&gt;User: 실패 응답 (대체 결제 수단 제안)
    end
</pre><h4 id=타임아웃-패턴의-역할>타임아웃 패턴의 역할<a hidden class=anchor aria-hidden=true href=#타임아웃-패턴의-역할>#</a></h4><p><strong>1. 계층적 보호</strong></p><ul><li>API Gateway: 전체 요청의 최대 시간 제한</li><li>각 서비스: 하위 서비스 호출 시간 제한</li><li>외부 API: 외부 의존성 시간 제한</li></ul><p><strong>2. 빠른 실패</strong></p><ul><li>은행 API 타임아웃 시 즉시 대체 결제 수단 제안</li><li>사용자 대기 시간 최소화</li></ul><p><strong>3. 자원 보호</strong></p><ul><li>결제 처리 스레드 풀 보호</li><li>데이터베이스 연결 풀 관리</li></ul><h4 id=타임아웃-패턴-유무에-따른-차이점>타임아웃 패턴 유무에 따른 차이점<a hidden class=anchor aria-hidden=true href=#타임아웃-패턴-유무에-따른-차이점>#</a></h4><p><strong>타임아웃 적용 전:</strong></p><ul><li>은행 API 장애 시 최대 5분 대기</li><li>전체 시스템 응답성 저하</li><li>사용자 이탈률 증가</li></ul><p><strong>타임아웃 적용 후:</strong></p><ul><li>최대 30초 내 응답 보장</li><li>시스템 안정성 향상</li><li>사용자 만족도 개선</li></ul><h2 id=구현-예시>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시>#</a></h2><h3 id=python-구현-예시>Python 구현 예시<a hidden class=anchor aria-hidden=true href=#python-구현-예시>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-23-1><a class=lnlinks href=#hl-23-1>  1</a>
</span><span class=lnt id=hl-23-2><a class=lnlinks href=#hl-23-2>  2</a>
</span><span class=lnt id=hl-23-3><a class=lnlinks href=#hl-23-3>  3</a>
</span><span class=lnt id=hl-23-4><a class=lnlinks href=#hl-23-4>  4</a>
</span><span class=lnt id=hl-23-5><a class=lnlinks href=#hl-23-5>  5</a>
</span><span class=lnt id=hl-23-6><a class=lnlinks href=#hl-23-6>  6</a>
</span><span class=lnt id=hl-23-7><a class=lnlinks href=#hl-23-7>  7</a>
</span><span class=lnt id=hl-23-8><a class=lnlinks href=#hl-23-8>  8</a>
</span><span class=lnt id=hl-23-9><a class=lnlinks href=#hl-23-9>  9</a>
</span><span class=lnt id=hl-23-10><a class=lnlinks href=#hl-23-10> 10</a>
</span><span class=lnt id=hl-23-11><a class=lnlinks href=#hl-23-11> 11</a>
</span><span class=lnt id=hl-23-12><a class=lnlinks href=#hl-23-12> 12</a>
</span><span class=lnt id=hl-23-13><a class=lnlinks href=#hl-23-13> 13</a>
</span><span class=lnt id=hl-23-14><a class=lnlinks href=#hl-23-14> 14</a>
</span><span class=lnt id=hl-23-15><a class=lnlinks href=#hl-23-15> 15</a>
</span><span class=lnt id=hl-23-16><a class=lnlinks href=#hl-23-16> 16</a>
</span><span class=lnt id=hl-23-17><a class=lnlinks href=#hl-23-17> 17</a>
</span><span class=lnt id=hl-23-18><a class=lnlinks href=#hl-23-18> 18</a>
</span><span class=lnt id=hl-23-19><a class=lnlinks href=#hl-23-19> 19</a>
</span><span class=lnt id=hl-23-20><a class=lnlinks href=#hl-23-20> 20</a>
</span><span class=lnt id=hl-23-21><a class=lnlinks href=#hl-23-21> 21</a>
</span><span class=lnt id=hl-23-22><a class=lnlinks href=#hl-23-22> 22</a>
</span><span class=lnt id=hl-23-23><a class=lnlinks href=#hl-23-23> 23</a>
</span><span class=lnt id=hl-23-24><a class=lnlinks href=#hl-23-24> 24</a>
</span><span class=lnt id=hl-23-25><a class=lnlinks href=#hl-23-25> 25</a>
</span><span class=lnt id=hl-23-26><a class=lnlinks href=#hl-23-26> 26</a>
</span><span class=lnt id=hl-23-27><a class=lnlinks href=#hl-23-27> 27</a>
</span><span class=lnt id=hl-23-28><a class=lnlinks href=#hl-23-28> 28</a>
</span><span class=lnt id=hl-23-29><a class=lnlinks href=#hl-23-29> 29</a>
</span><span class=lnt id=hl-23-30><a class=lnlinks href=#hl-23-30> 30</a>
</span><span class=lnt id=hl-23-31><a class=lnlinks href=#hl-23-31> 31</a>
</span><span class=lnt id=hl-23-32><a class=lnlinks href=#hl-23-32> 32</a>
</span><span class=lnt id=hl-23-33><a class=lnlinks href=#hl-23-33> 33</a>
</span><span class=lnt id=hl-23-34><a class=lnlinks href=#hl-23-34> 34</a>
</span><span class=lnt id=hl-23-35><a class=lnlinks href=#hl-23-35> 35</a>
</span><span class=lnt id=hl-23-36><a class=lnlinks href=#hl-23-36> 36</a>
</span><span class=lnt id=hl-23-37><a class=lnlinks href=#hl-23-37> 37</a>
</span><span class=lnt id=hl-23-38><a class=lnlinks href=#hl-23-38> 38</a>
</span><span class=lnt id=hl-23-39><a class=lnlinks href=#hl-23-39> 39</a>
</span><span class=lnt id=hl-23-40><a class=lnlinks href=#hl-23-40> 40</a>
</span><span class=lnt id=hl-23-41><a class=lnlinks href=#hl-23-41> 41</a>
</span><span class=lnt id=hl-23-42><a class=lnlinks href=#hl-23-42> 42</a>
</span><span class=lnt id=hl-23-43><a class=lnlinks href=#hl-23-43> 43</a>
</span><span class=lnt id=hl-23-44><a class=lnlinks href=#hl-23-44> 44</a>
</span><span class=lnt id=hl-23-45><a class=lnlinks href=#hl-23-45> 45</a>
</span><span class=lnt id=hl-23-46><a class=lnlinks href=#hl-23-46> 46</a>
</span><span class=lnt id=hl-23-47><a class=lnlinks href=#hl-23-47> 47</a>
</span><span class=lnt id=hl-23-48><a class=lnlinks href=#hl-23-48> 48</a>
</span><span class=lnt id=hl-23-49><a class=lnlinks href=#hl-23-49> 49</a>
</span><span class=lnt id=hl-23-50><a class=lnlinks href=#hl-23-50> 50</a>
</span><span class=lnt id=hl-23-51><a class=lnlinks href=#hl-23-51> 51</a>
</span><span class=lnt id=hl-23-52><a class=lnlinks href=#hl-23-52> 52</a>
</span><span class=lnt id=hl-23-53><a class=lnlinks href=#hl-23-53> 53</a>
</span><span class=lnt id=hl-23-54><a class=lnlinks href=#hl-23-54> 54</a>
</span><span class=lnt id=hl-23-55><a class=lnlinks href=#hl-23-55> 55</a>
</span><span class=lnt id=hl-23-56><a class=lnlinks href=#hl-23-56> 56</a>
</span><span class=lnt id=hl-23-57><a class=lnlinks href=#hl-23-57> 57</a>
</span><span class=lnt id=hl-23-58><a class=lnlinks href=#hl-23-58> 58</a>
</span><span class=lnt id=hl-23-59><a class=lnlinks href=#hl-23-59> 59</a>
</span><span class=lnt id=hl-23-60><a class=lnlinks href=#hl-23-60> 60</a>
</span><span class=lnt id=hl-23-61><a class=lnlinks href=#hl-23-61> 61</a>
</span><span class=lnt id=hl-23-62><a class=lnlinks href=#hl-23-62> 62</a>
</span><span class=lnt id=hl-23-63><a class=lnlinks href=#hl-23-63> 63</a>
</span><span class=lnt id=hl-23-64><a class=lnlinks href=#hl-23-64> 64</a>
</span><span class=lnt id=hl-23-65><a class=lnlinks href=#hl-23-65> 65</a>
</span><span class=lnt id=hl-23-66><a class=lnlinks href=#hl-23-66> 66</a>
</span><span class=lnt id=hl-23-67><a class=lnlinks href=#hl-23-67> 67</a>
</span><span class=lnt id=hl-23-68><a class=lnlinks href=#hl-23-68> 68</a>
</span><span class=lnt id=hl-23-69><a class=lnlinks href=#hl-23-69> 69</a>
</span><span class=lnt id=hl-23-70><a class=lnlinks href=#hl-23-70> 70</a>
</span><span class=lnt id=hl-23-71><a class=lnlinks href=#hl-23-71> 71</a>
</span><span class=lnt id=hl-23-72><a class=lnlinks href=#hl-23-72> 72</a>
</span><span class=lnt id=hl-23-73><a class=lnlinks href=#hl-23-73> 73</a>
</span><span class=lnt id=hl-23-74><a class=lnlinks href=#hl-23-74> 74</a>
</span><span class=lnt id=hl-23-75><a class=lnlinks href=#hl-23-75> 75</a>
</span><span class=lnt id=hl-23-76><a class=lnlinks href=#hl-23-76> 76</a>
</span><span class=lnt id=hl-23-77><a class=lnlinks href=#hl-23-77> 77</a>
</span><span class=lnt id=hl-23-78><a class=lnlinks href=#hl-23-78> 78</a>
</span><span class=lnt id=hl-23-79><a class=lnlinks href=#hl-23-79> 79</a>
</span><span class=lnt id=hl-23-80><a class=lnlinks href=#hl-23-80> 80</a>
</span><span class=lnt id=hl-23-81><a class=lnlinks href=#hl-23-81> 81</a>
</span><span class=lnt id=hl-23-82><a class=lnlinks href=#hl-23-82> 82</a>
</span><span class=lnt id=hl-23-83><a class=lnlinks href=#hl-23-83> 83</a>
</span><span class=lnt id=hl-23-84><a class=lnlinks href=#hl-23-84> 84</a>
</span><span class=lnt id=hl-23-85><a class=lnlinks href=#hl-23-85> 85</a>
</span><span class=lnt id=hl-23-86><a class=lnlinks href=#hl-23-86> 86</a>
</span><span class=lnt id=hl-23-87><a class=lnlinks href=#hl-23-87> 87</a>
</span><span class=lnt id=hl-23-88><a class=lnlinks href=#hl-23-88> 88</a>
</span><span class=lnt id=hl-23-89><a class=lnlinks href=#hl-23-89> 89</a>
</span><span class=lnt id=hl-23-90><a class=lnlinks href=#hl-23-90> 90</a>
</span><span class=lnt id=hl-23-91><a class=lnlinks href=#hl-23-91> 91</a>
</span><span class=lnt id=hl-23-92><a class=lnlinks href=#hl-23-92> 92</a>
</span><span class=lnt id=hl-23-93><a class=lnlinks href=#hl-23-93> 93</a>
</span><span class=lnt id=hl-23-94><a class=lnlinks href=#hl-23-94> 94</a>
</span><span class=lnt id=hl-23-95><a class=lnlinks href=#hl-23-95> 95</a>
</span><span class=lnt id=hl-23-96><a class=lnlinks href=#hl-23-96> 96</a>
</span><span class=lnt id=hl-23-97><a class=lnlinks href=#hl-23-97> 97</a>
</span><span class=lnt id=hl-23-98><a class=lnlinks href=#hl-23-98> 98</a>
</span><span class=lnt id=hl-23-99><a class=lnlinks href=#hl-23-99> 99</a>
</span><span class=lnt id=hl-23-100><a class=lnlinks href=#hl-23-100>100</a>
</span><span class=lnt id=hl-23-101><a class=lnlinks href=#hl-23-101>101</a>
</span><span class=lnt id=hl-23-102><a class=lnlinks href=#hl-23-102>102</a>
</span><span class=lnt id=hl-23-103><a class=lnlinks href=#hl-23-103>103</a>
</span><span class=lnt id=hl-23-104><a class=lnlinks href=#hl-23-104>104</a>
</span><span class=lnt id=hl-23-105><a class=lnlinks href=#hl-23-105>105</a>
</span><span class=lnt id=hl-23-106><a class=lnlinks href=#hl-23-106>106</a>
</span><span class=lnt id=hl-23-107><a class=lnlinks href=#hl-23-107>107</a>
</span><span class=lnt id=hl-23-108><a class=lnlinks href=#hl-23-108>108</a>
</span><span class=lnt id=hl-23-109><a class=lnlinks href=#hl-23-109>109</a>
</span><span class=lnt id=hl-23-110><a class=lnlinks href=#hl-23-110>110</a>
</span><span class=lnt id=hl-23-111><a class=lnlinks href=#hl-23-111>111</a>
</span><span class=lnt id=hl-23-112><a class=lnlinks href=#hl-23-112>112</a>
</span><span class=lnt id=hl-23-113><a class=lnlinks href=#hl-23-113>113</a>
</span><span class=lnt id=hl-23-114><a class=lnlinks href=#hl-23-114>114</a>
</span><span class=lnt id=hl-23-115><a class=lnlinks href=#hl-23-115>115</a>
</span><span class=lnt id=hl-23-116><a class=lnlinks href=#hl-23-116>116</a>
</span><span class=lnt id=hl-23-117><a class=lnlinks href=#hl-23-117>117</a>
</span><span class=lnt id=hl-23-118><a class=lnlinks href=#hl-23-118>118</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>logging</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Optional</span><span class=p>,</span> <span class=n>Any</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>concurrent.futures</span> <span class=kn>import</span> <span class=n>ThreadPoolExecutor</span><span class=p>,</span> <span class=ne>TimeoutError</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>httpx</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 타임아웃 설정 데이터 클래스</span>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TimeoutConfig</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>connect_timeout</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>5.0</span>
</span></span><span class=line><span class=cl>    <span class=n>read_timeout</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>10.0</span>
</span></span><span class=line><span class=cl>    <span class=n>total_timeout</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>30.0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 타임아웃 예외 클래스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ServiceTimeoutError</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>service_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>timeout</span><span class=p>:</span> <span class=nb>float</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>service_name</span> <span class=o>=</span> <span class=n>service_name</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>timeout</span> <span class=o>=</span> <span class=n>timeout</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Service </span><span class=si>{</span><span class=n>service_name</span><span class=si>}</span><span class=s2> timed out after </span><span class=si>{</span><span class=n>timeout</span><span class=si>}</span><span class=s2>s&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 타임아웃 패턴을 구현하는 서비스 클래스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PaymentService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>config</span><span class=p>:</span> <span class=n>TimeoutConfig</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>config</span> <span class=o>=</span> <span class=n>config</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>process_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>payment_data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;결제 처리 - 타임아웃 적용&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 총 타임아웃 설정</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>wait_for</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>_call_payment_api</span><span class=p>(</span><span class=n>payment_data</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>total_timeout</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>TimeoutError</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Payment processing timed out after </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>total_timeout</span><span class=si>}</span><span class=s2>s&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=n>ServiceTimeoutError</span><span class=p>(</span><span class=s2>&#34;PaymentService&#34;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>total_timeout</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>_call_payment_api</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>payment_data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;실제 결제 API 호출&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>timeout</span> <span class=o>=</span> <span class=n>httpx</span><span class=o>.</span><span class=n>Timeout</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>connect</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>connect_timeout</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>read</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>read_timeout</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>async</span> <span class=k>with</span> <span class=n>httpx</span><span class=o>.</span><span class=n>AsyncClient</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>)</span> <span class=k>as</span> <span class=n>client</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>response</span> <span class=o>=</span> <span class=k>await</span> <span class=n>client</span><span class=o>.</span><span class=n>post</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;https://api.bank.com/payment&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>json</span><span class=o>=</span><span class=n>payment_data</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>response</span><span class=o>.</span><span class=n>raise_for_status</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=n>httpx</span><span class=o>.</span><span class=n>TimeoutException</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s2>&#34;HTTP timeout occurred&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>raise</span> <span class=n>ServiceTimeoutError</span><span class=p>(</span><span class=s2>&#34;BankAPI&#34;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>read_timeout</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 타임아웃과 폴백을 함께 사용하는 주문 서비스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>payment_service</span> <span class=o>=</span> <span class=n>PaymentService</span><span class=p>(</span><span class=n>TimeoutConfig</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>create_order</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 생성 - 타임아웃과 폴백 적용&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 결제 처리 시도</span>
</span></span><span class=line><span class=cl>            <span class=n>payment_result</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>payment_service</span><span class=o>.</span><span class=n>process_payment</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>order_data</span><span class=p>[</span><span class=s1>&#39;payment&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;order_id&#34;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_generate_order_id</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;confirmed&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;payment&#34;</span><span class=p>:</span> <span class=n>payment_result</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=n>ServiceTimeoutError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Payment timeout: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=c1># 폴백: 결제 보류 상태로 주문 생성</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;order_id&#34;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_generate_order_id</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;payment_pending&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;결제 처리 중입니다. 잠시 후 다시 확인해주세요.&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;retry_url&#34;</span><span class=p>:</span> <span class=s2>&#34;/api/orders/retry-payment&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_generate_order_id</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;ORDER-</span><span class=si>{</span><span class=nb>int</span><span class=p>(</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>())</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1># 로깅 설정</span>
</span></span><span class=line><span class=cl>    <span class=n>logging</span><span class=o>.</span><span class=n>basicConfig</span><span class=p>(</span><span class=n>level</span><span class=o>=</span><span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>order_service</span> <span class=o>=</span> <span class=n>OrderService</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 테스트 주문 데이터</span>
</span></span><span class=line><span class=cl>    <span class=n>order_data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;customer_id&#34;</span><span class=p>:</span> <span class=s2>&#34;12345&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;items&#34;</span><span class=p>:</span> <span class=p>[{</span><span class=s2>&#34;product_id&#34;</span><span class=p>:</span> <span class=s2>&#34;A001&#34;</span><span class=p>,</span> <span class=s2>&#34;quantity&#34;</span><span class=p>:</span> <span class=mi>2</span><span class=p>}],</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;payment&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;method&#34;</span><span class=p>:</span> <span class=s2>&#34;credit_card&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;card_number&#34;</span><span class=p>:</span> <span class=s2>&#34;****-****-****-1234&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;amount&#34;</span><span class=p>:</span> <span class=mf>29.99</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=n>order_service</span><span class=o>.</span><span class=n>create_order</span><span class=p>(</span><span class=n>order_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;주문 결과: </span><span class=si>{</span><span class=n>result</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;주문 실패: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=javascript-구현-예시>JavaScript 구현 예시<a hidden class=anchor aria-hidden=true href=#javascript-구현-예시>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1>  1</a>
</span><span class=lnt id=hl-24-2><a class=lnlinks href=#hl-24-2>  2</a>
</span><span class=lnt id=hl-24-3><a class=lnlinks href=#hl-24-3>  3</a>
</span><span class=lnt id=hl-24-4><a class=lnlinks href=#hl-24-4>  4</a>
</span><span class=lnt id=hl-24-5><a class=lnlinks href=#hl-24-5>  5</a>
</span><span class=lnt id=hl-24-6><a class=lnlinks href=#hl-24-6>  6</a>
</span><span class=lnt id=hl-24-7><a class=lnlinks href=#hl-24-7>  7</a>
</span><span class=lnt id=hl-24-8><a class=lnlinks href=#hl-24-8>  8</a>
</span><span class=lnt id=hl-24-9><a class=lnlinks href=#hl-24-9>  9</a>
</span><span class=lnt id=hl-24-10><a class=lnlinks href=#hl-24-10> 10</a>
</span><span class=lnt id=hl-24-11><a class=lnlinks href=#hl-24-11> 11</a>
</span><span class=lnt id=hl-24-12><a class=lnlinks href=#hl-24-12> 12</a>
</span><span class=lnt id=hl-24-13><a class=lnlinks href=#hl-24-13> 13</a>
</span><span class=lnt id=hl-24-14><a class=lnlinks href=#hl-24-14> 14</a>
</span><span class=lnt id=hl-24-15><a class=lnlinks href=#hl-24-15> 15</a>
</span><span class=lnt id=hl-24-16><a class=lnlinks href=#hl-24-16> 16</a>
</span><span class=lnt id=hl-24-17><a class=lnlinks href=#hl-24-17> 17</a>
</span><span class=lnt id=hl-24-18><a class=lnlinks href=#hl-24-18> 18</a>
</span><span class=lnt id=hl-24-19><a class=lnlinks href=#hl-24-19> 19</a>
</span><span class=lnt id=hl-24-20><a class=lnlinks href=#hl-24-20> 20</a>
</span><span class=lnt id=hl-24-21><a class=lnlinks href=#hl-24-21> 21</a>
</span><span class=lnt id=hl-24-22><a class=lnlinks href=#hl-24-22> 22</a>
</span><span class=lnt id=hl-24-23><a class=lnlinks href=#hl-24-23> 23</a>
</span><span class=lnt id=hl-24-24><a class=lnlinks href=#hl-24-24> 24</a>
</span><span class=lnt id=hl-24-25><a class=lnlinks href=#hl-24-25> 25</a>
</span><span class=lnt id=hl-24-26><a class=lnlinks href=#hl-24-26> 26</a>
</span><span class=lnt id=hl-24-27><a class=lnlinks href=#hl-24-27> 27</a>
</span><span class=lnt id=hl-24-28><a class=lnlinks href=#hl-24-28> 28</a>
</span><span class=lnt id=hl-24-29><a class=lnlinks href=#hl-24-29> 29</a>
</span><span class=lnt id=hl-24-30><a class=lnlinks href=#hl-24-30> 30</a>
</span><span class=lnt id=hl-24-31><a class=lnlinks href=#hl-24-31> 31</a>
</span><span class=lnt id=hl-24-32><a class=lnlinks href=#hl-24-32> 32</a>
</span><span class=lnt id=hl-24-33><a class=lnlinks href=#hl-24-33> 33</a>
</span><span class=lnt id=hl-24-34><a class=lnlinks href=#hl-24-34> 34</a>
</span><span class=lnt id=hl-24-35><a class=lnlinks href=#hl-24-35> 35</a>
</span><span class=lnt id=hl-24-36><a class=lnlinks href=#hl-24-36> 36</a>
</span><span class=lnt id=hl-24-37><a class=lnlinks href=#hl-24-37> 37</a>
</span><span class=lnt id=hl-24-38><a class=lnlinks href=#hl-24-38> 38</a>
</span><span class=lnt id=hl-24-39><a class=lnlinks href=#hl-24-39> 39</a>
</span><span class=lnt id=hl-24-40><a class=lnlinks href=#hl-24-40> 40</a>
</span><span class=lnt id=hl-24-41><a class=lnlinks href=#hl-24-41> 41</a>
</span><span class=lnt id=hl-24-42><a class=lnlinks href=#hl-24-42> 42</a>
</span><span class=lnt id=hl-24-43><a class=lnlinks href=#hl-24-43> 43</a>
</span><span class=lnt id=hl-24-44><a class=lnlinks href=#hl-24-44> 44</a>
</span><span class=lnt id=hl-24-45><a class=lnlinks href=#hl-24-45> 45</a>
</span><span class=lnt id=hl-24-46><a class=lnlinks href=#hl-24-46> 46</a>
</span><span class=lnt id=hl-24-47><a class=lnlinks href=#hl-24-47> 47</a>
</span><span class=lnt id=hl-24-48><a class=lnlinks href=#hl-24-48> 48</a>
</span><span class=lnt id=hl-24-49><a class=lnlinks href=#hl-24-49> 49</a>
</span><span class=lnt id=hl-24-50><a class=lnlinks href=#hl-24-50> 50</a>
</span><span class=lnt id=hl-24-51><a class=lnlinks href=#hl-24-51> 51</a>
</span><span class=lnt id=hl-24-52><a class=lnlinks href=#hl-24-52> 52</a>
</span><span class=lnt id=hl-24-53><a class=lnlinks href=#hl-24-53> 53</a>
</span><span class=lnt id=hl-24-54><a class=lnlinks href=#hl-24-54> 54</a>
</span><span class=lnt id=hl-24-55><a class=lnlinks href=#hl-24-55> 55</a>
</span><span class=lnt id=hl-24-56><a class=lnlinks href=#hl-24-56> 56</a>
</span><span class=lnt id=hl-24-57><a class=lnlinks href=#hl-24-57> 57</a>
</span><span class=lnt id=hl-24-58><a class=lnlinks href=#hl-24-58> 58</a>
</span><span class=lnt id=hl-24-59><a class=lnlinks href=#hl-24-59> 59</a>
</span><span class=lnt id=hl-24-60><a class=lnlinks href=#hl-24-60> 60</a>
</span><span class=lnt id=hl-24-61><a class=lnlinks href=#hl-24-61> 61</a>
</span><span class=lnt id=hl-24-62><a class=lnlinks href=#hl-24-62> 62</a>
</span><span class=lnt id=hl-24-63><a class=lnlinks href=#hl-24-63> 63</a>
</span><span class=lnt id=hl-24-64><a class=lnlinks href=#hl-24-64> 64</a>
</span><span class=lnt id=hl-24-65><a class=lnlinks href=#hl-24-65> 65</a>
</span><span class=lnt id=hl-24-66><a class=lnlinks href=#hl-24-66> 66</a>
</span><span class=lnt id=hl-24-67><a class=lnlinks href=#hl-24-67> 67</a>
</span><span class=lnt id=hl-24-68><a class=lnlinks href=#hl-24-68> 68</a>
</span><span class=lnt id=hl-24-69><a class=lnlinks href=#hl-24-69> 69</a>
</span><span class=lnt id=hl-24-70><a class=lnlinks href=#hl-24-70> 70</a>
</span><span class=lnt id=hl-24-71><a class=lnlinks href=#hl-24-71> 71</a>
</span><span class=lnt id=hl-24-72><a class=lnlinks href=#hl-24-72> 72</a>
</span><span class=lnt id=hl-24-73><a class=lnlinks href=#hl-24-73> 73</a>
</span><span class=lnt id=hl-24-74><a class=lnlinks href=#hl-24-74> 74</a>
</span><span class=lnt id=hl-24-75><a class=lnlinks href=#hl-24-75> 75</a>
</span><span class=lnt id=hl-24-76><a class=lnlinks href=#hl-24-76> 76</a>
</span><span class=lnt id=hl-24-77><a class=lnlinks href=#hl-24-77> 77</a>
</span><span class=lnt id=hl-24-78><a class=lnlinks href=#hl-24-78> 78</a>
</span><span class=lnt id=hl-24-79><a class=lnlinks href=#hl-24-79> 79</a>
</span><span class=lnt id=hl-24-80><a class=lnlinks href=#hl-24-80> 80</a>
</span><span class=lnt id=hl-24-81><a class=lnlinks href=#hl-24-81> 81</a>
</span><span class=lnt id=hl-24-82><a class=lnlinks href=#hl-24-82> 82</a>
</span><span class=lnt id=hl-24-83><a class=lnlinks href=#hl-24-83> 83</a>
</span><span class=lnt id=hl-24-84><a class=lnlinks href=#hl-24-84> 84</a>
</span><span class=lnt id=hl-24-85><a class=lnlinks href=#hl-24-85> 85</a>
</span><span class=lnt id=hl-24-86><a class=lnlinks href=#hl-24-86> 86</a>
</span><span class=lnt id=hl-24-87><a class=lnlinks href=#hl-24-87> 87</a>
</span><span class=lnt id=hl-24-88><a class=lnlinks href=#hl-24-88> 88</a>
</span><span class=lnt id=hl-24-89><a class=lnlinks href=#hl-24-89> 89</a>
</span><span class=lnt id=hl-24-90><a class=lnlinks href=#hl-24-90> 90</a>
</span><span class=lnt id=hl-24-91><a class=lnlinks href=#hl-24-91> 91</a>
</span><span class=lnt id=hl-24-92><a class=lnlinks href=#hl-24-92> 92</a>
</span><span class=lnt id=hl-24-93><a class=lnlinks href=#hl-24-93> 93</a>
</span><span class=lnt id=hl-24-94><a class=lnlinks href=#hl-24-94> 94</a>
</span><span class=lnt id=hl-24-95><a class=lnlinks href=#hl-24-95> 95</a>
</span><span class=lnt id=hl-24-96><a class=lnlinks href=#hl-24-96> 96</a>
</span><span class=lnt id=hl-24-97><a class=lnlinks href=#hl-24-97> 97</a>
</span><span class=lnt id=hl-24-98><a class=lnlinks href=#hl-24-98> 98</a>
</span><span class=lnt id=hl-24-99><a class=lnlinks href=#hl-24-99> 99</a>
</span><span class=lnt id=hl-24-100><a class=lnlinks href=#hl-24-100>100</a>
</span><span class=lnt id=hl-24-101><a class=lnlinks href=#hl-24-101>101</a>
</span><span class=lnt id=hl-24-102><a class=lnlinks href=#hl-24-102>102</a>
</span><span class=lnt id=hl-24-103><a class=lnlinks href=#hl-24-103>103</a>
</span><span class=lnt id=hl-24-104><a class=lnlinks href=#hl-24-104>104</a>
</span><span class=lnt id=hl-24-105><a class=lnlinks href=#hl-24-105>105</a>
</span><span class=lnt id=hl-24-106><a class=lnlinks href=#hl-24-106>106</a>
</span><span class=lnt id=hl-24-107><a class=lnlinks href=#hl-24-107>107</a>
</span><span class=lnt id=hl-24-108><a class=lnlinks href=#hl-24-108>108</a>
</span><span class=lnt id=hl-24-109><a class=lnlinks href=#hl-24-109>109</a>
</span><span class=lnt id=hl-24-110><a class=lnlinks href=#hl-24-110>110</a>
</span><span class=lnt id=hl-24-111><a class=lnlinks href=#hl-24-111>111</a>
</span><span class=lnt id=hl-24-112><a class=lnlinks href=#hl-24-112>112</a>
</span><span class=lnt id=hl-24-113><a class=lnlinks href=#hl-24-113>113</a>
</span><span class=lnt id=hl-24-114><a class=lnlinks href=#hl-24-114>114</a>
</span><span class=lnt id=hl-24-115><a class=lnlinks href=#hl-24-115>115</a>
</span><span class=lnt id=hl-24-116><a class=lnlinks href=#hl-24-116>116</a>
</span><span class=lnt id=hl-24-117><a class=lnlinks href=#hl-24-117>117</a>
</span><span class=lnt id=hl-24-118><a class=lnlinks href=#hl-24-118>118</a>
</span><span class=lnt id=hl-24-119><a class=lnlinks href=#hl-24-119>119</a>
</span><span class=lnt id=hl-24-120><a class=lnlinks href=#hl-24-120>120</a>
</span><span class=lnt id=hl-24-121><a class=lnlinks href=#hl-24-121>121</a>
</span><span class=lnt id=hl-24-122><a class=lnlinks href=#hl-24-122>122</a>
</span><span class=lnt id=hl-24-123><a class=lnlinks href=#hl-24-123>123</a>
</span><span class=lnt id=hl-24-124><a class=lnlinks href=#hl-24-124>124</a>
</span><span class=lnt id=hl-24-125><a class=lnlinks href=#hl-24-125>125</a>
</span><span class=lnt id=hl-24-126><a class=lnlinks href=#hl-24-126>126</a>
</span><span class=lnt id=hl-24-127><a class=lnlinks href=#hl-24-127>127</a>
</span><span class=lnt id=hl-24-128><a class=lnlinks href=#hl-24-128>128</a>
</span><span class=lnt id=hl-24-129><a class=lnlinks href=#hl-24-129>129</a>
</span><span class=lnt id=hl-24-130><a class=lnlinks href=#hl-24-130>130</a>
</span><span class=lnt id=hl-24-131><a class=lnlinks href=#hl-24-131>131</a>
</span><span class=lnt id=hl-24-132><a class=lnlinks href=#hl-24-132>132</a>
</span><span class=lnt id=hl-24-133><a class=lnlinks href=#hl-24-133>133</a>
</span><span class=lnt id=hl-24-134><a class=lnlinks href=#hl-24-134>134</a>
</span><span class=lnt id=hl-24-135><a class=lnlinks href=#hl-24-135>135</a>
</span><span class=lnt id=hl-24-136><a class=lnlinks href=#hl-24-136>136</a>
</span><span class=lnt id=hl-24-137><a class=lnlinks href=#hl-24-137>137</a>
</span><span class=lnt id=hl-24-138><a class=lnlinks href=#hl-24-138>138</a>
</span><span class=lnt id=hl-24-139><a class=lnlinks href=#hl-24-139>139</a>
</span><span class=lnt id=hl-24-140><a class=lnlinks href=#hl-24-140>140</a>
</span><span class=lnt id=hl-24-141><a class=lnlinks href=#hl-24-141>141</a>
</span><span class=lnt id=hl-24-142><a class=lnlinks href=#hl-24-142>142</a>
</span><span class=lnt id=hl-24-143><a class=lnlinks href=#hl-24-143>143</a>
</span><span class=lnt id=hl-24-144><a class=lnlinks href=#hl-24-144>144</a>
</span><span class=lnt id=hl-24-145><a class=lnlinks href=#hl-24-145>145</a>
</span><span class=lnt id=hl-24-146><a class=lnlinks href=#hl-24-146>146</a>
</span><span class=lnt id=hl-24-147><a class=lnlinks href=#hl-24-147>147</a>
</span><span class=lnt id=hl-24-148><a class=lnlinks href=#hl-24-148>148</a>
</span><span class=lnt id=hl-24-149><a class=lnlinks href=#hl-24-149>149</a>
</span><span class=lnt id=hl-24-150><a class=lnlinks href=#hl-24-150>150</a>
</span><span class=lnt id=hl-24-151><a class=lnlinks href=#hl-24-151>151</a>
</span><span class=lnt id=hl-24-152><a class=lnlinks href=#hl-24-152>152</a>
</span><span class=lnt id=hl-24-153><a class=lnlinks href=#hl-24-153>153</a>
</span><span class=lnt id=hl-24-154><a class=lnlinks href=#hl-24-154>154</a>
</span><span class=lnt id=hl-24-155><a class=lnlinks href=#hl-24-155>155</a>
</span><span class=lnt id=hl-24-156><a class=lnlinks href=#hl-24-156>156</a>
</span><span class=lnt id=hl-24-157><a class=lnlinks href=#hl-24-157>157</a>
</span><span class=lnt id=hl-24-158><a class=lnlinks href=#hl-24-158>158</a>
</span><span class=lnt id=hl-24-159><a class=lnlinks href=#hl-24-159>159</a>
</span><span class=lnt id=hl-24-160><a class=lnlinks href=#hl-24-160>160</a>
</span><span class=lnt id=hl-24-161><a class=lnlinks href=#hl-24-161>161</a>
</span><span class=lnt id=hl-24-162><a class=lnlinks href=#hl-24-162>162</a>
</span><span class=lnt id=hl-24-163><a class=lnlinks href=#hl-24-163>163</a>
</span><span class=lnt id=hl-24-164><a class=lnlinks href=#hl-24-164>164</a>
</span><span class=lnt id=hl-24-165><a class=lnlinks href=#hl-24-165>165</a>
</span><span class=lnt id=hl-24-166><a class=lnlinks href=#hl-24-166>166</a>
</span><span class=lnt id=hl-24-167><a class=lnlinks href=#hl-24-167>167</a>
</span><span class=lnt id=hl-24-168><a class=lnlinks href=#hl-24-168>168</a>
</span><span class=lnt id=hl-24-169><a class=lnlinks href=#hl-24-169>169</a>
</span><span class=lnt id=hl-24-170><a class=lnlinks href=#hl-24-170>170</a>
</span><span class=lnt id=hl-24-171><a class=lnlinks href=#hl-24-171>171</a>
</span><span class=lnt id=hl-24-172><a class=lnlinks href=#hl-24-172>172</a>
</span><span class=lnt id=hl-24-173><a class=lnlinks href=#hl-24-173>173</a>
</span><span class=lnt id=hl-24-174><a class=lnlinks href=#hl-24-174>174</a>
</span><span class=lnt id=hl-24-175><a class=lnlinks href=#hl-24-175>175</a>
</span><span class=lnt id=hl-24-176><a class=lnlinks href=#hl-24-176>176</a>
</span><span class=lnt id=hl-24-177><a class=lnlinks href=#hl-24-177>177</a>
</span><span class=lnt id=hl-24-178><a class=lnlinks href=#hl-24-178>178</a>
</span><span class=lnt id=hl-24-179><a class=lnlinks href=#hl-24-179>179</a>
</span><span class=lnt id=hl-24-180><a class=lnlinks href=#hl-24-180>180</a>
</span><span class=lnt id=hl-24-181><a class=lnlinks href=#hl-24-181>181</a>
</span><span class=lnt id=hl-24-182><a class=lnlinks href=#hl-24-182>182</a>
</span><span class=lnt id=hl-24-183><a class=lnlinks href=#hl-24-183>183</a>
</span><span class=lnt id=hl-24-184><a class=lnlinks href=#hl-24-184>184</a>
</span><span class=lnt id=hl-24-185><a class=lnlinks href=#hl-24-185>185</a>
</span><span class=lnt id=hl-24-186><a class=lnlinks href=#hl-24-186>186</a>
</span><span class=lnt id=hl-24-187><a class=lnlinks href=#hl-24-187>187</a>
</span><span class=lnt id=hl-24-188><a class=lnlinks href=#hl-24-188>188</a>
</span><span class=lnt id=hl-24-189><a class=lnlinks href=#hl-24-189>189</a>
</span><span class=lnt id=hl-24-190><a class=lnlinks href=#hl-24-190>190</a>
</span><span class=lnt id=hl-24-191><a class=lnlinks href=#hl-24-191>191</a>
</span><span class=lnt id=hl-24-192><a class=lnlinks href=#hl-24-192>192</a>
</span><span class=lnt id=hl-24-193><a class=lnlinks href=#hl-24-193>193</a>
</span><span class=lnt id=hl-24-194><a class=lnlinks href=#hl-24-194>194</a>
</span><span class=lnt id=hl-24-195><a class=lnlinks href=#hl-24-195>195</a>
</span><span class=lnt id=hl-24-196><a class=lnlinks href=#hl-24-196>196</a>
</span><span class=lnt id=hl-24-197><a class=lnlinks href=#hl-24-197>197</a>
</span><span class=lnt id=hl-24-198><a class=lnlinks href=#hl-24-198>198</a>
</span><span class=lnt id=hl-24-199><a class=lnlinks href=#hl-24-199>199</a>
</span><span class=lnt id=hl-24-200><a class=lnlinks href=#hl-24-200>200</a>
</span><span class=lnt id=hl-24-201><a class=lnlinks href=#hl-24-201>201</a>
</span><span class=lnt id=hl-24-202><a class=lnlinks href=#hl-24-202>202</a>
</span><span class=lnt id=hl-24-203><a class=lnlinks href=#hl-24-203>203</a>
</span><span class=lnt id=hl-24-204><a class=lnlinks href=#hl-24-204>204</a>
</span><span class=lnt id=hl-24-205><a class=lnlinks href=#hl-24-205>205</a>
</span><span class=lnt id=hl-24-206><a class=lnlinks href=#hl-24-206>206</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>axios</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;axios&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 타임아웃 설정 클래스
</span></span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>TimeoutConfig</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>connectTimeout</span> <span class=o>=</span> <span class=mi>5000</span><span class=p>,</span> <span class=nx>readTimeout</span> <span class=o>=</span> <span class=mi>10000</span><span class=p>,</span> <span class=nx>totalTimeout</span> <span class=o>=</span> <span class=mi>30000</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>connectTimeout</span> <span class=o>=</span> <span class=nx>connectTimeout</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>readTimeout</span> <span class=o>=</span> <span class=nx>readTimeout</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>totalTimeout</span> <span class=o>=</span> <span class=nx>totalTimeout</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 타임아웃 에러 클래스
</span></span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>ServiceTimeoutError</span> <span class=kr>extends</span> <span class=nb>Error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>serviceName</span><span class=p>,</span> <span class=nx>timeout</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>super</span><span class=p>(</span><span class=sb>`Service </span><span class=si>${</span><span class=nx>serviceName</span><span class=si>}</span><span class=sb> timed out after </span><span class=si>${</span><span class=nx>timeout</span><span class=si>}</span><span class=sb>ms`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>serviceName</span> <span class=o>=</span> <span class=nx>serviceName</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>timeout</span> <span class=o>=</span> <span class=nx>timeout</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;ServiceTimeoutError&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 타임아웃 패턴을 구현하는 HTTP 클라이언트
</span></span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>TimeoutHttpClient</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>config</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>config</span> <span class=o>=</span> <span class=nx>config</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>client</span> <span class=o>=</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>create</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>timeout</span><span class=o>:</span> <span class=nx>config</span><span class=p>.</span><span class=nx>readTimeout</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span> <span class=s1>&#39;application/json&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>request</span><span class=p>(</span><span class=nx>method</span><span class=p>,</span> <span class=nx>url</span><span class=p>,</span> <span class=nx>data</span> <span class=o>=</span> <span class=kc>null</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>timeoutPromise</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>_</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>setTimeout</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>reject</span><span class=p>(</span><span class=k>new</span> <span class=nx>ServiceTimeoutError</span><span class=p>(</span><span class=s1>&#39;HttpClient&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>config</span><span class=p>.</span><span class=nx>totalTimeout</span><span class=p>));</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span> <span class=k>this</span><span class=p>.</span><span class=nx>config</span><span class=p>.</span><span class=nx>totalTimeout</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>requestPromise</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>client</span><span class=p>.</span><span class=nx>request</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>method</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>url</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>data</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>timeout</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>config</span><span class=p>.</span><span class=nx>readTimeout</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kr>await</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>race</span><span class=p>([</span><span class=nx>requestPromise</span><span class=p>,</span> <span class=nx>timeoutPromise</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>error</span><span class=p>.</span><span class=nx>code</span> <span class=o>===</span> <span class=s1>&#39;ECONNABORTED&#39;</span> <span class=o>||</span> <span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=s1>&#39;timeout&#39;</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>throw</span> <span class=k>new</span> <span class=nx>ServiceTimeoutError</span><span class=p>(</span><span class=s1>&#39;HttpClient&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>config</span><span class=p>.</span><span class=nx>readTimeout</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=nx>error</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 결제 서비스 클래스
</span></span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>PaymentService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>timeoutConfig</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>httpClient</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>TimeoutHttpClient</span><span class=p>(</span><span class=nx>timeoutConfig</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>retryAttempts</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>processPayment</span><span class=p>(</span><span class=nx>paymentData</span><span class=p>,</span> <span class=nx>attempt</span> <span class=o>=</span> <span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`결제 처리 시도 </span><span class=si>${</span><span class=nx>attempt</span><span class=si>}</span><span class=sb>/</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>retryAttempts</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>httpClient</span><span class=p>.</span><span class=nx>request</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;POST&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;https://api.bank.com/payment&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>paymentData</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>success</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>transactionId</span><span class=o>:</span> <span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>transactionId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;completed&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>error</span> <span class=k>instanceof</span> <span class=nx>ServiceTimeoutError</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>warn</span><span class=p>(</span><span class=sb>`결제 타임아웃 발생: </span><span class=si>${</span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1>// 재시도 로직
</span></span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=nx>attempt</span> <span class=o>&lt;</span> <span class=k>this</span><span class=p>.</span><span class=nx>retryAttempts</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=kr>const</span> <span class=nx>delay</span> <span class=o>=</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>pow</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=nx>attempt</span><span class=p>)</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>;</span> <span class=c1>// 지수 백오프
</span></span></span><span class=line><span class=cl>                    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>delay</span><span class=si>}</span><span class=sb>ms 후 재시도...`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>sleep</span><span class=p>(</span><span class=nx>delay</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>processPayment</span><span class=p>(</span><span class=nx>paymentData</span><span class=p>,</span> <span class=nx>attempt</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1>// 최종 실패
</span></span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>success</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>error</span><span class=o>:</span> <span class=s1>&#39;TIMEOUT&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;결제 처리 시간이 초과되었습니다.&#39;</span>
</span></span><span class=line><span class=cl>                <span class=p>};</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=nx>error</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>sleep</span><span class=p>(</span><span class=nx>ms</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=nx>resolve</span> <span class=p>=&gt;</span> <span class=nx>setTimeout</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>ms</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 주문 서비스 클래스
</span></span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>OrderService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>paymentService</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>PaymentService</span><span class=p>(</span><span class=k>new</span> <span class=nx>TimeoutConfig</span><span class=p>());</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>createOrder</span><span class=p>(</span><span class=nx>orderData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>startTime</span> <span class=o>=</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 재고 확인 (타임아웃 적용)
</span></span></span><span class=line><span class=cl>            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>checkInventory</span><span class=p>(</span><span class=nx>orderData</span><span class=p>.</span><span class=nx>items</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 결제 처리 (타임아웃 적용)
</span></span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>paymentResult</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>paymentService</span><span class=p>.</span><span class=nx>processPayment</span><span class=p>(</span><span class=nx>orderData</span><span class=p>.</span><span class=nx>payment</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>paymentResult</span><span class=p>.</span><span class=nx>success</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>order</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>orderId</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>generateOrderId</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                    <span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;confirmed&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>payment</span><span class=o>:</span> <span class=nx>paymentResult</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>processTime</span><span class=o>:</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span> <span class=o>-</span> <span class=nx>startTime</span>
</span></span><span class=line><span class=cl>                <span class=p>};</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;주문 완료:&#39;</span><span class=p>,</span> <span class=nx>order</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>order</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 결제 실패 시 폴백
</span></span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>orderId</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>generateOrderId</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                    <span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;payment_failed&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>error</span><span class=o>:</span> <span class=nx>paymentResult</span><span class=p>.</span><span class=nx>error</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>message</span><span class=o>:</span> <span class=nx>paymentResult</span><span class=p>.</span><span class=nx>message</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>processTime</span><span class=o>:</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span> <span class=o>-</span> <span class=nx>startTime</span>
</span></span><span class=line><span class=cl>                <span class=p>};</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;주문 생성 실패:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;failed&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>error</span><span class=o>:</span> <span class=nx>error</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>message</span><span class=o>:</span> <span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>processTime</span><span class=o>:</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span> <span class=o>-</span> <span class=nx>startTime</span>
</span></span><span class=line><span class=cl>            <span class=p>};</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>checkInventory</span><span class=p>(</span><span class=nx>items</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 재고 확인 API 호출 (간소화)
</span></span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>setTimeout</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;재고 확인 완료&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=nx>resolve</span><span class=p>(</span><span class=kc>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span> <span class=mi>1000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>generateOrderId</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sb>`ORDER-</span><span class=si>${</span><span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span><span class=si>}</span><span class=sb>-</span><span class=si>${</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>().</span><span class=nx>toString</span><span class=p>(</span><span class=mi>36</span><span class=p>).</span><span class=nx>substr</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>9</span><span class=p>)</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용 예시
</span></span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>orderService</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>OrderService</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>orderData</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>customerId</span><span class=o>:</span> <span class=s1>&#39;12345&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>items</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span> <span class=nx>productId</span><span class=o>:</span> <span class=s1>&#39;A001&#39;</span><span class=p>,</span> <span class=nx>quantity</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span> <span class=nx>price</span><span class=o>:</span> <span class=mf>14.99</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=nx>payment</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>method</span><span class=o>:</span> <span class=s1>&#39;credit_card&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>cardNumber</span><span class=o>:</span> <span class=s1>&#39;****-****-****-1234&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>amount</span><span class=o>:</span> <span class=mf>29.98</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;주문 생성 시작...&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>orderService</span><span class=p>.</span><span class=nx>createOrder</span><span class=p>(</span><span class=nx>orderData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;최종 결과:&#39;</span><span class=p>,</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>result</span><span class=p>,</span> <span class=kc>null</span><span class=p>,</span> <span class=mi>2</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 실행
</span></span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nx>require</span><span class=p>.</span><span class=nx>main</span> <span class=o>===</span> <span class=nx>module</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>(</span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>TimeoutConfig</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>ServiceTimeoutError</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>TimeoutHttpClient</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>PaymentService</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>OrderService</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>카테고리</th><th>고려사항</th><th>주의할 점</th><th>권장사항</th></tr></thead><tbody><tr><td><strong>설정 관리</strong></td><td>서비스별 특성 반영</td><td>일률적인 타임아웃 적용 지양</td><td>서비스 성격에 따른 차별화된 설정</td></tr><tr><td><strong>모니터링</strong></td><td>실시간 메트릭 수집</td><td>타임아웃 발생률만 모니터링</td><td>응답시간 분포와 함께 분석</td></tr><tr><td><strong>테스팅</strong></td><td>다양한 시나리오 테스트</td><td>정상 케이스만 테스트</td><td>네트워크 지연, 서버 부하 시뮬레이션</td></tr><tr><td><strong>문서화</strong></td><td>타임아웃 정책 문서화</td><td>설정값만 기록</td><td>설정 근거와 변경 이력 관리</td></tr><tr><td><strong>팀 협업</strong></td><td>크로스 팀 커뮤니케이션</td><td>개별 팀 단독 결정</td><td>의존 서비스 팀과 협의하여 설정</td></tr></tbody></table><h2 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>카테고리</th><th>고려사항</th><th>주의할 점</th><th>권장사항</th></tr></thead><tbody><tr><td><strong>성능 최적화</strong></td><td>적응형 타임아웃 구현</td><td>과도한 복잡성 지양</td><td>점진적 개선, 단계별 적용</td></tr><tr><td><strong>확장성</strong></td><td>클라우드 환경 고려</td><td>온프레미스 설정 그대로 사용</td><td>클라우드 특성에 맞는 조정</td></tr><tr><td><strong>비용 최적화</strong></td><td>자원 사용량 최적화</td><td>타임아웃만으로 해결 시도</td><td>캐싱, 비동기 처리 등 종합적 접근</td></tr><tr><td><strong>유지보수</strong></td><td>자동화된 조정 메커니즘</td><td>수동 관리에 의존</td><td>CI/CD 파이프라인에 성능 테스트 포함</td></tr><tr><td><strong>보안</strong></td><td>타임아웃 정보 노출 방지</td><td>에러 메시지에 상세 정보 포함</td><td>일반적인 에러 메시지 사용</td></tr></tbody></table><h2 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>신기술 동향</strong></td><td>Chaos Engineering</td><td>Timeout Injection</td><td>의도적 타임아웃 주입을 통한 시스템 복원력 테스트</td></tr><tr><td><strong>클라우드 네이티브</strong></td><td>Service Mesh</td><td>Istio, Linkerd</td><td>인프라 레벨에서의 타임아웃 관리</td></tr><tr><td><strong>AI/ML 적용</strong></td><td>Adaptive Timeout</td><td>머신러닝 기반 예측</td><td>과거 데이터를 기반으로 한 동적 타임아웃 조정</td></tr><tr><td><strong>관측가능성</strong></td><td>Distributed Tracing</td><td>Jaeger, Zipkin</td><td>타임아웃 발생 지점과 원인 추적</td></tr><tr><td><strong>성능 측정</strong></td><td>SLA/SLO 관리</td><td>Error Budget</td><td>타임아웃을 고려한 서비스 레벨 목표 설정</td></tr></tbody></table><h2 id=반드시-학습해야할-내용>반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#반드시-학습해야할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>기초 이론</strong></td><td>분산 시스템</td><td>CAP 정리, 분산 합의</td><td>타임아웃이 일관성과 가용성에 미치는 영향</td></tr><tr><td><strong>네트워크</strong></td><td>TCP/IP 기초</td><td>소켓 타임아웃, Keep-alive</td><td>네트워크 레벨 타임아웃 이해</td></tr><tr><td><strong>동시성</strong></td><td>스레드 관리</td><td>Thread Pool, 비동기 프로그래밍</td><td>타임아웃과 자원 관리의 상관관계</td></tr><tr><td><strong>모니터링</strong></td><td>메트릭 수집</td><td>Prometheus, Grafana</td><td>타임아웃 관련 지표 수집 및 시각화</td></tr><tr><td><strong>실무 도구</strong></td><td>라이브러리</td><td>Resilience4j, Hystrix</td><td>타임아웃 패턴 구현 도구</td></tr></tbody></table><hr><h2 id=용어-정리-1>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-1>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td><strong>타임아웃 유형</strong></td><td>Connection Timeout</td><td>서버와 연결을 수립하는데 허용되는 최대 시간</td></tr><tr><td></td><td>Read Timeout</td><td>서버로부터 응답을 받는데 허용되는 최대 시간</td></tr><tr><td></td><td>Write Timeout</td><td>서버로 데이터를 전송하는데 허용되는 최대 시간</td></tr><tr><td></td><td>Socket Timeout</td><td>소켓 연결에서 I/O 작업의 최대 대기 시간</td></tr><tr><td><strong>복원력 패턴</strong></td><td>Circuit Breaker</td><td>연속적인 실패 시 서비스 호출을 차단하는 패턴</td></tr><tr><td></td><td>Bulkhead</td><td>시스템 자원을 격리하여 장애 전파를 방지하는 패턴</td></tr><tr><td></td><td>Retry Pattern</td><td>실패한 작업을 재시도하는 패턴</td></tr><tr><td></td><td>Fallback</td><td>주 서비스 실패 시 대체 로직을 실행하는 패턴</td></tr><tr><td><strong>성능 지표</strong></td><td>Latency</td><td>요청부터 응답까지의 지연 시간</td></tr><tr><td></td><td>Throughput</td><td>단위 시간당 처리할 수 있는 요청 수</td></tr><tr><td></td><td>Error Rate</td><td>전체 요청 중 실패한 요청의 비율</td></tr><tr><td></td><td>SLA</td><td>서비스 제공자와 고객 간의 서비스 수준 합의</td></tr></tbody></table><hr><h2 id=참고-및-출처-2>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-2>#</a></h2><ul><li><a href=https://www.codecentric.de/en/knowledge-hub/blog/resilience-design-patterns-retry-fallback-timeout-circuit-breaker>Resilience design patterns: retry, fallback, timeout, circuit breaker</a></li><li><a href=https://www.techtarget.com/searchapparchitecture/tip/5-proven-patterns-for-resilient-software-architecture-design>5 proven patterns for resilient software architecture design | TechTarget</a></li><li><a href=https://www.vinsguru.com/timeout-pattern/>Timeout Pattern - Microservice Design Patterns | Vinsguru</a></li><li><a href=https://www.geeksforgeeks.org/timeout-strategies-in-microservices-architecture/>Timeout Strategies in Microservices Architecture | GeeksforGeeks</a></li><li><a href=https://www.baeldung.com/spring-rest-timeout>Setting a Request Timeout for a Spring REST API | Baeldung</a></li><li><a href=https://examples.javacodegeeks.com/spring-boot-rest-api-timeout-with-examples/>Spring Boot REST API Timeout (with Examples) - Java Code Geeks</a></li><li><a href=https://www.jrebel.com/blog/microservices-resilience-patterns>Guide to Microservices Resilience Patterns | JRebel by Perforce</a></li><li><a href=https://ieeechicago.org/microservices-design-patterns-for-cloud-architecture/>Microservices Design Patterns for Cloud Architecture – IEEE Chicago Section</a></li><li><a href=https://codeopinion.com/design-patterns-for-building-resilient-systems/>Design Patterns for Building Resilient Systems - CodeOpinion</a></li></ul><hr><p>Timeout Pattern은 마이크로서비스 간 통신에서 응답 지연이나 실패를 관리하기 위한 전략이다.<br>이 패턴은 서비스가 다른 서비스로부터의 응답을 무한정 기다리지 않도록 하여 시스템의 안정성과 응답성을 향상시킨다.</p><p>Timeout Pattern은 MSA 환경에서 서비스 간 통신의 신뢰성을 높이고 시스템의 전반적인 안정성을 향상시키는 중요한 전략이다. 적절히 구현된 Timeout Pattern은 마이크로서비스 아키텍처의 장점을 극대화하고 잠재적인 문제를 최소화하는 데 큰 도움이 된다.</p><h3 id=타임아웃-패턴의-필요성>타임아웃 패턴의 필요성<a hidden class=anchor aria-hidden=true href=#타임아웃-패턴의-필요성>#</a></h3><p>MSA 환경에서는 여러 서비스가 네트워크를 통해 상호 작용하므로, 다음과 같은 이유로 타임아웃 패턴이 필요하다:</p><ul><li><strong>무한 대기 방지</strong>: 응답이 지연되거나 없는 경우 무한히 대기하는 상황을 방지한다.</li><li><strong>자원 낭비 최소화</strong>: 불필요한 대기로 인한 쓰레드, 메모리 등의 자원 낭비를 줄인다.</li><li><strong>장애 전파 방지</strong>: 한 서비스의 지연이 다른 서비스로 전파되어 전체 시스템에 영향을 미치는 것을 방지한다.</li></ul><h3 id=timeout-pattern의-주요-특징>Timeout Pattern의 주요 특징<a hidden class=anchor aria-hidden=true href=#timeout-pattern의-주요-특징>#</a></h3><ol><li><strong>시간 제한 설정</strong>: 작업이나 요청에 대해 최대 대기 시간을 정의한다.</li><li><strong>리소스 관리</strong>: 무한 대기로 인한 리소스 고갈을 방지한다.</li><li><strong>시스템 응답성 유지</strong>: 장애 상황에서도 전체 시스템의 응답성을 유지한다.</li><li><strong>장애 격리</strong>: 한 서비스의 문제가 전체 시스템으로 전파되는 것을 방지한다.</li></ol><h3 id=timeout-유형>Timeout 유형<a hidden class=anchor aria-hidden=true href=#timeout-유형>#</a></h3><ol><li><strong>연결 타임아웃</strong>: 서비스 연결 설정에 허용되는 최대 시간.</li><li><strong>읽기 타임아웃</strong>: 연결 후 응답을 기다리는 최대 시간.</li><li><strong>쓰기 타임아웃</strong>: 데이터 전송에 허용되는 최대 시간.</li><li><strong>유휴 타임아웃</strong>: 연결이 유휴 상태로 유지될 수 있는 최대 시간.</li><li><strong>전역 타임아웃</strong>: 전체 작업에 대한 총 제한 시간.</li></ol><h3 id=timeout-pattern-구현-전략>Timeout Pattern 구현 전략<a hidden class=anchor aria-hidden=true href=#timeout-pattern-구현-전략>#</a></h3><ol><li><p><strong>적절한 타임아웃 값 설정</strong>:</p><ul><li>과거 성능 데이터를 분석하여 적절한 타임아웃 값을 설정한다.</li><li>네트워크 지연, 서비스 처리 시간 등을 고려해야 한다.</li></ul></li><li><p><strong>지수 백오프(Exponential Backoff) 사용</strong>:</p><ul><li>실패 시 재시도 간격을 점진적으로 늘려 시스템 부하를 줄인다.</li></ul></li><li><p><strong>서킷 브레이커 패턴과 결합</strong>:</p><ul><li>반복적인 타임아웃 발생 시 서킷 브레이커를 작동시켜 시스템을 보호한다.</li></ul></li><li><p><strong>폴백 메커니즘 구현</strong>:</p><ul><li>타임아웃 발생 시 대체 동작을 수행하여 서비스의 연속성을 유지한다.</li></ul></li><li><p><strong>모니터링 및 로깅</strong>:</p><ul><li>타임아웃 이벤트를 모니터링하고 로깅하여 시스템 동작을 분석한다.</li></ul></li></ol><h3 id=timeout-pattern의-장점>Timeout Pattern의 장점<a hidden class=anchor aria-hidden=true href=#timeout-pattern의-장점>#</a></h3><ol><li><strong>시스템 안정성 향상</strong>: 무한 대기 상태를 방지하여 전체 시스템의 안정성을 높인다.</li><li><strong>리소스 효율성</strong>: 불필요한 리소스 점유를 방지한다.</li><li><strong>사용자 경험 개선</strong>: 빠른 실패 처리로 사용자에게 더 나은 경험을 제공한다.</li><li><strong>장애 전파 방지</strong>: 한 서비스의 문제가 다른 서비스로 전파되는 것을 막는다.</li></ol><h3 id=주의사항>주의사항<a hidden class=anchor aria-hidden=true href=#주의사항>#</a></h3><ol><li><strong>적절한 타임아웃 값 설정</strong>: 너무 짧은 타임아웃은 불필요한 재시도를, 너무 긴 타임아웃은 리소스 낭비를 초래할 수 있다.</li><li><strong>멱등성 고려</strong>: 재시도 로직 구현 시 작업의 멱등성을 확보해야 한다.</li><li><strong>복잡성 관리</strong>: 타임아웃 로직이 전체 시스템 복잡도를 증가시킬 수 있으므로 주의가 필요하다.</li></ol><h3 id=구현-예시-1>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시-1>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-25-1><a class=lnlinks href=#hl-25-1> 1</a>
</span><span class=lnt id=hl-25-2><a class=lnlinks href=#hl-25-2> 2</a>
</span><span class=lnt id=hl-25-3><a class=lnlinks href=#hl-25-3> 3</a>
</span><span class=lnt id=hl-25-4><a class=lnlinks href=#hl-25-4> 4</a>
</span><span class=lnt id=hl-25-5><a class=lnlinks href=#hl-25-5> 5</a>
</span><span class=lnt id=hl-25-6><a class=lnlinks href=#hl-25-6> 6</a>
</span><span class=lnt id=hl-25-7><a class=lnlinks href=#hl-25-7> 7</a>
</span><span class=lnt id=hl-25-8><a class=lnlinks href=#hl-25-8> 8</a>
</span><span class=lnt id=hl-25-9><a class=lnlinks href=#hl-25-9> 9</a>
</span><span class=lnt id=hl-25-10><a class=lnlinks href=#hl-25-10>10</a>
</span><span class=lnt id=hl-25-11><a class=lnlinks href=#hl-25-11>11</a>
</span><span class=lnt id=hl-25-12><a class=lnlinks href=#hl-25-12>12</a>
</span><span class=lnt id=hl-25-13><a class=lnlinks href=#hl-25-13>13</a>
</span><span class=lnt id=hl-25-14><a class=lnlinks href=#hl-25-14>14</a>
</span><span class=lnt id=hl-25-15><a class=lnlinks href=#hl-25-15>15</a>
</span><span class=lnt id=hl-25-16><a class=lnlinks href=#hl-25-16>16</a>
</span><span class=lnt id=hl-25-17><a class=lnlinks href=#hl-25-17>17</a>
</span><span class=lnt id=hl-25-18><a class=lnlinks href=#hl-25-18>18</a>
</span><span class=lnt id=hl-25-19><a class=lnlinks href=#hl-25-19>19</a>
</span><span class=lnt id=hl-25-20><a class=lnlinks href=#hl-25-20>20</a>
</span><span class=lnt id=hl-25-21><a class=lnlinks href=#hl-25-21>21</a>
</span><span class=lnt id=hl-25-22><a class=lnlinks href=#hl-25-22>22</a>
</span><span class=lnt id=hl-25-23><a class=lnlinks href=#hl-25-23>23</a>
</span><span class=lnt id=hl-25-24><a class=lnlinks href=#hl-25-24>24</a>
</span><span class=lnt id=hl-25-25><a class=lnlinks href=#hl-25-25>25</a>
</span><span class=lnt id=hl-25-26><a class=lnlinks href=#hl-25-26>26</a>
</span><span class=lnt id=hl-25-27><a class=lnlinks href=#hl-25-27>27</a>
</span><span class=lnt id=hl-25-28><a class=lnlinks href=#hl-25-28>28</a>
</span><span class=lnt id=hl-25-29><a class=lnlinks href=#hl-25-29>29</a>
</span><span class=lnt id=hl-25-30><a class=lnlinks href=#hl-25-30>30</a>
</span><span class=lnt id=hl-25-31><a class=lnlinks href=#hl-25-31>31</a>
</span><span class=lnt id=hl-25-32><a class=lnlinks href=#hl-25-32>32</a>
</span><span class=lnt id=hl-25-33><a class=lnlinks href=#hl-25-33>33</a>
</span><span class=lnt id=hl-25-34><a class=lnlinks href=#hl-25-34>34</a>
</span><span class=lnt id=hl-25-35><a class=lnlinks href=#hl-25-35>35</a>
</span><span class=lnt id=hl-25-36><a class=lnlinks href=#hl-25-36>36</a>
</span><span class=lnt id=hl-25-37><a class=lnlinks href=#hl-25-37>37</a>
</span><span class=lnt id=hl-25-38><a class=lnlinks href=#hl-25-38>38</a>
</span><span class=lnt id=hl-25-39><a class=lnlinks href=#hl-25-39>39</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 타임아웃 처리를 포함한 서비스 클라이언트 구현
</span></span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>ServiceClient</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>options</span> <span class=o>=</span> <span class=p>{})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>defaultTimeout</span> <span class=o>=</span> <span class=nx>options</span><span class=p>.</span><span class=nx>timeout</span> <span class=o>||</span> <span class=mi>5000</span><span class=p>;</span> <span class=c1>// 기본 5초
</span></span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>serviceUrl</span> <span class=o>=</span> <span class=nx>options</span><span class=p>.</span><span class=nx>serviceUrl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>makeRequest</span><span class=p>(</span><span class=nx>endpoint</span><span class=p>,</span> <span class=nx>options</span> <span class=o>=</span> <span class=p>{})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// AbortController를 사용한 타임아웃 구현
</span></span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>controller</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>AbortController</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>timeout</span> <span class=o>=</span> <span class=nx>options</span><span class=p>.</span><span class=nx>timeout</span> <span class=o>||</span> <span class=k>this</span><span class=p>.</span><span class=nx>defaultTimeout</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 타임아웃 설정
</span></span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>timeoutId</span> <span class=o>=</span> <span class=nx>setTimeout</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>controller</span><span class=p>.</span><span class=nx>abort</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span> <span class=nx>timeout</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>fetch</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>serviceUrl</span><span class=si>}${</span><span class=nx>endpoint</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=err>…</span><span class=nx>options</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>signal</span><span class=o>:</span> <span class=nx>controller</span><span class=p>.</span><span class=nx>signal</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=nx>clearTimeout</span><span class=p>(</span><span class=nx>timeoutId</span><span class=p>);</span> <span class=c1>// 성공 시 타이머 해제
</span></span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kr>await</span> <span class=nx>response</span><span class=p>.</span><span class=nx>json</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>error</span><span class=p>.</span><span class=nx>name</span> <span class=o>===</span> <span class=s1>&#39;AbortError&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>throw</span> <span class=k>new</span> <span class=nx>TimeoutError</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=sb>`Request timed out after </span><span class=si>${</span><span class=nx>timeout</span><span class=si>}</span><span class=sb>ms`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=p>{</span> <span class=nx>timeout</span><span class=p>,</span> <span class=nx>endpoint</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=nx>error</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>finally</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>clearTimeout</span><span class=p>(</span><span class=nx>timeoutId</span><span class=p>);</span> <span class=c1>// 실패시에도 타이머 정리
</span></span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=고급-timeout-전략-구현>고급 Timeout 전략 구현<a hidden class=anchor aria-hidden=true href=#고급-timeout-전략-구현>#</a></h4><ol><li><p>계층별 타임아웃 관리</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1> 1</a>
</span><span class=lnt id=hl-26-2><a class=lnlinks href=#hl-26-2> 2</a>
</span><span class=lnt id=hl-26-3><a class=lnlinks href=#hl-26-3> 3</a>
</span><span class=lnt id=hl-26-4><a class=lnlinks href=#hl-26-4> 4</a>
</span><span class=lnt id=hl-26-5><a class=lnlinks href=#hl-26-5> 5</a>
</span><span class=lnt id=hl-26-6><a class=lnlinks href=#hl-26-6> 6</a>
</span><span class=lnt id=hl-26-7><a class=lnlinks href=#hl-26-7> 7</a>
</span><span class=lnt id=hl-26-8><a class=lnlinks href=#hl-26-8> 8</a>
</span><span class=lnt id=hl-26-9><a class=lnlinks href=#hl-26-9> 9</a>
</span><span class=lnt id=hl-26-10><a class=lnlinks href=#hl-26-10>10</a>
</span><span class=lnt id=hl-26-11><a class=lnlinks href=#hl-26-11>11</a>
</span><span class=lnt id=hl-26-12><a class=lnlinks href=#hl-26-12>12</a>
</span><span class=lnt id=hl-26-13><a class=lnlinks href=#hl-26-13>13</a>
</span><span class=lnt id=hl-26-14><a class=lnlinks href=#hl-26-14>14</a>
</span><span class=lnt id=hl-26-15><a class=lnlinks href=#hl-26-15>15</a>
</span><span class=lnt id=hl-26-16><a class=lnlinks href=#hl-26-16>16</a>
</span><span class=lnt id=hl-26-17><a class=lnlinks href=#hl-26-17>17</a>
</span><span class=lnt id=hl-26-18><a class=lnlinks href=#hl-26-18>18</a>
</span><span class=lnt id=hl-26-19><a class=lnlinks href=#hl-26-19>19</a>
</span><span class=lnt id=hl-26-20><a class=lnlinks href=#hl-26-20>20</a>
</span><span class=lnt id=hl-26-21><a class=lnlinks href=#hl-26-21>21</a>
</span><span class=lnt id=hl-26-22><a class=lnlinks href=#hl-26-22>22</a>
</span><span class=lnt id=hl-26-23><a class=lnlinks href=#hl-26-23>23</a>
</span><span class=lnt id=hl-26-24><a class=lnlinks href=#hl-26-24>24</a>
</span><span class=lnt id=hl-26-25><a class=lnlinks href=#hl-26-25>25</a>
</span><span class=lnt id=hl-26-26><a class=lnlinks href=#hl-26-26>26</a>
</span><span class=lnt id=hl-26-27><a class=lnlinks href=#hl-26-27>27</a>
</span><span class=lnt id=hl-26-28><a class=lnlinks href=#hl-26-28>28</a>
</span><span class=lnt id=hl-26-29><a class=lnlinks href=#hl-26-29>29</a>
</span><span class=lnt id=hl-26-30><a class=lnlinks href=#hl-26-30>30</a>
</span><span class=lnt id=hl-26-31><a class=lnlinks href=#hl-26-31>31</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>TimeoutManager</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 계층별 기본 타임아웃 설정
</span></span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>timeouts</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>network</span><span class=o>:</span> <span class=mi>5000</span><span class=p>,</span>    <span class=c1>// 네트워크 타임아웃
</span></span></span><span class=line><span class=cl>            <span class=nx>database</span><span class=o>:</span> <span class=mi>3000</span><span class=p>,</span>   <span class=c1>// 데이터베이스 쿼리 타임아웃
</span></span></span><span class=line><span class=cl>            <span class=nx>cache</span><span class=o>:</span> <span class=mi>1000</span><span class=p>,</span>      <span class=c1>// 캐시 조회 타임아웃
</span></span></span><span class=line><span class=cl>            <span class=nx>api</span><span class=o>:</span> <span class=mi>10000</span>        <span class=c1>// API 전체 타임아웃
</span></span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>executeWithTimeout</span><span class=p>(</span><span class=nx>operation</span><span class=p>,</span> <span class=nx>type</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>timeout</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>timeouts</span><span class=p>[</span><span class=nx>type</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>timeout</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=sb>`Unknown timeout type: </span><span class=si>${</span><span class=nx>type</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>timeoutId</span> <span class=o>=</span> <span class=nx>setTimeout</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>reject</span><span class=p>(</span><span class=k>new</span> <span class=nx>TimeoutError</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=sb>`</span><span class=si>${</span><span class=nx>type</span><span class=si>}</span><span class=sb> operation timed out after </span><span class=si>${</span><span class=nx>timeout</span><span class=si>}</span><span class=sb>ms`</span>
</span></span><span class=line><span class=cl>                <span class=p>));</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span> <span class=nx>timeout</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=nx>operation</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>resolve</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=nx>reject</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>.</span><span class=k>finally</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=nx>clearTimeout</span><span class=p>(</span><span class=nx>timeoutId</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>동적 타임아웃 조정</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-27-1><a class=lnlinks href=#hl-27-1> 1</a>
</span><span class=lnt id=hl-27-2><a class=lnlinks href=#hl-27-2> 2</a>
</span><span class=lnt id=hl-27-3><a class=lnlinks href=#hl-27-3> 3</a>
</span><span class=lnt id=hl-27-4><a class=lnlinks href=#hl-27-4> 4</a>
</span><span class=lnt id=hl-27-5><a class=lnlinks href=#hl-27-5> 5</a>
</span><span class=lnt id=hl-27-6><a class=lnlinks href=#hl-27-6> 6</a>
</span><span class=lnt id=hl-27-7><a class=lnlinks href=#hl-27-7> 7</a>
</span><span class=lnt id=hl-27-8><a class=lnlinks href=#hl-27-8> 8</a>
</span><span class=lnt id=hl-27-9><a class=lnlinks href=#hl-27-9> 9</a>
</span><span class=lnt id=hl-27-10><a class=lnlinks href=#hl-27-10>10</a>
</span><span class=lnt id=hl-27-11><a class=lnlinks href=#hl-27-11>11</a>
</span><span class=lnt id=hl-27-12><a class=lnlinks href=#hl-27-12>12</a>
</span><span class=lnt id=hl-27-13><a class=lnlinks href=#hl-27-13>13</a>
</span><span class=lnt id=hl-27-14><a class=lnlinks href=#hl-27-14>14</a>
</span><span class=lnt id=hl-27-15><a class=lnlinks href=#hl-27-15>15</a>
</span><span class=lnt id=hl-27-16><a class=lnlinks href=#hl-27-16>16</a>
</span><span class=lnt id=hl-27-17><a class=lnlinks href=#hl-27-17>17</a>
</span><span class=lnt id=hl-27-18><a class=lnlinks href=#hl-27-18>18</a>
</span><span class=lnt id=hl-27-19><a class=lnlinks href=#hl-27-19>19</a>
</span><span class=lnt id=hl-27-20><a class=lnlinks href=#hl-27-20>20</a>
</span><span class=lnt id=hl-27-21><a class=lnlinks href=#hl-27-21>21</a>
</span><span class=lnt id=hl-27-22><a class=lnlinks href=#hl-27-22>22</a>
</span><span class=lnt id=hl-27-23><a class=lnlinks href=#hl-27-23>23</a>
</span><span class=lnt id=hl-27-24><a class=lnlinks href=#hl-27-24>24</a>
</span><span class=lnt id=hl-27-25><a class=lnlinks href=#hl-27-25>25</a>
</span><span class=lnt id=hl-27-26><a class=lnlinks href=#hl-27-26>26</a>
</span><span class=lnt id=hl-27-27><a class=lnlinks href=#hl-27-27>27</a>
</span><span class=lnt id=hl-27-28><a class=lnlinks href=#hl-27-28>28</a>
</span><span class=lnt id=hl-27-29><a class=lnlinks href=#hl-27-29>29</a>
</span><span class=lnt id=hl-27-30><a class=lnlinks href=#hl-27-30>30</a>
</span><span class=lnt id=hl-27-31><a class=lnlinks href=#hl-27-31>31</a>
</span><span class=lnt id=hl-27-32><a class=lnlinks href=#hl-27-32>32</a>
</span><span class=lnt id=hl-27-33><a class=lnlinks href=#hl-27-33>33</a>
</span><span class=lnt id=hl-27-34><a class=lnlinks href=#hl-27-34>34</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>AdaptiveTimeout</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>responseTimesHistory</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>timeoutMultiplier</span> <span class=o>=</span> <span class=mf>1.5</span><span class=p>;</span> <span class=c1>// 평균 응답 시간의 1.5배로 타임아웃 설정
</span></span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>executeWithDynamicTimeout</span><span class=p>(</span><span class=nx>operation</span><span class=p>,</span> <span class=nx>serviceId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>timeout</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>calculateTimeout</span><span class=p>(</span><span class=nx>serviceId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>startTime</span> <span class=o>=</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>executeWithTimeout</span><span class=p>(</span><span class=nx>operation</span><span class=p>,</span> <span class=nx>timeout</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// 성공한 요청의 응답 시간 기록
</span></span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>recordResponseTime</span><span class=p>(</span><span class=nx>serviceId</span><span class=p>,</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span> <span class=o>-</span> <span class=nx>startTime</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>handleTimeoutError</span><span class=p>(</span><span class=nx>serviceId</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=nx>error</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>calculateTimeout</span><span class=p>(</span><span class=nx>serviceId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>history</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>responseTimesHistory</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>serviceId</span><span class=p>)</span> <span class=o>||</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>history</span><span class=p>.</span><span class=nx>length</span> <span class=o>===</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=mi>5000</span><span class=p>;</span> <span class=c1>// 기본값
</span></span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 최근 응답 시간들의 평균 계산
</span></span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>avgResponseTime</span> <span class=o>=</span> <span class=nx>history</span><span class=p>.</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>a</span> <span class=o>+</span> <span class=nx>b</span><span class=p>)</span> <span class=o>/</span> <span class=nx>history</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>ceil</span><span class=p>(</span><span class=nx>avgResponseTime</span> <span class=o>*</span> <span class=k>this</span><span class=p>.</span><span class=nx>timeoutMultiplier</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>단계별 타임아웃(Cascading Timeout)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-28-1><a class=lnlinks href=#hl-28-1> 1</a>
</span><span class=lnt id=hl-28-2><a class=lnlinks href=#hl-28-2> 2</a>
</span><span class=lnt id=hl-28-3><a class=lnlinks href=#hl-28-3> 3</a>
</span><span class=lnt id=hl-28-4><a class=lnlinks href=#hl-28-4> 4</a>
</span><span class=lnt id=hl-28-5><a class=lnlinks href=#hl-28-5> 5</a>
</span><span class=lnt id=hl-28-6><a class=lnlinks href=#hl-28-6> 6</a>
</span><span class=lnt id=hl-28-7><a class=lnlinks href=#hl-28-7> 7</a>
</span><span class=lnt id=hl-28-8><a class=lnlinks href=#hl-28-8> 8</a>
</span><span class=lnt id=hl-28-9><a class=lnlinks href=#hl-28-9> 9</a>
</span><span class=lnt id=hl-28-10><a class=lnlinks href=#hl-28-10>10</a>
</span><span class=lnt id=hl-28-11><a class=lnlinks href=#hl-28-11>11</a>
</span><span class=lnt id=hl-28-12><a class=lnlinks href=#hl-28-12>12</a>
</span><span class=lnt id=hl-28-13><a class=lnlinks href=#hl-28-13>13</a>
</span><span class=lnt id=hl-28-14><a class=lnlinks href=#hl-28-14>14</a>
</span><span class=lnt id=hl-28-15><a class=lnlinks href=#hl-28-15>15</a>
</span><span class=lnt id=hl-28-16><a class=lnlinks href=#hl-28-16>16</a>
</span><span class=lnt id=hl-28-17><a class=lnlinks href=#hl-28-17>17</a>
</span><span class=lnt id=hl-28-18><a class=lnlinks href=#hl-28-18>18</a>
</span><span class=lnt id=hl-28-19><a class=lnlinks href=#hl-28-19>19</a>
</span><span class=lnt id=hl-28-20><a class=lnlinks href=#hl-28-20>20</a>
</span><span class=lnt id=hl-28-21><a class=lnlinks href=#hl-28-21>21</a>
</span><span class=lnt id=hl-28-22><a class=lnlinks href=#hl-28-22>22</a>
</span><span class=lnt id=hl-28-23><a class=lnlinks href=#hl-28-23>23</a>
</span><span class=lnt id=hl-28-24><a class=lnlinks href=#hl-28-24>24</a>
</span><span class=lnt id=hl-28-25><a class=lnlinks href=#hl-28-25>25</a>
</span><span class=lnt id=hl-28-26><a class=lnlinks href=#hl-28-26>26</a>
</span><span class=lnt id=hl-28-27><a class=lnlinks href=#hl-28-27>27</a>
</span><span class=lnt id=hl-28-28><a class=lnlinks href=#hl-28-28>28</a>
</span><span class=lnt id=hl-28-29><a class=lnlinks href=#hl-28-29>29</a>
</span><span class=lnt id=hl-28-30><a class=lnlinks href=#hl-28-30>30</a>
</span><span class=lnt id=hl-28-31><a class=lnlinks href=#hl-28-31>31</a>
</span><span class=lnt id=hl-28-32><a class=lnlinks href=#hl-28-32>32</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>CascadingTimeout</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>executeWithCascadingTimeout</span><span class=p>(</span><span class=nx>operations</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>remainingTime</span> <span class=o>=</span> <span class=mi>10000</span><span class=p>;</span> <span class=c1>// 전체 작업의 최대 시간
</span></span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>operation</span> <span class=k>of</span> <span class=nx>operations</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>startTime</span> <span class=o>=</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 남은 시간으로 타임아웃 설정
</span></span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>executeWithTimeout</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=nx>operation</span><span class=p>.</span><span class=nx>func</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nb>Math</span><span class=p>.</span><span class=nx>min</span><span class=p>(</span><span class=nx>operation</span><span class=p>.</span><span class=nx>maxTime</span><span class=p>,</span> <span class=nx>remainingTime</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=c1>// 남은 시간 계산
</span></span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>elapsed</span> <span class=o>=</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span> <span class=o>-</span> <span class=nx>startTime</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=nx>remainingTime</span> <span class=o>-=</span> <span class=nx>elapsed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=nx>remainingTime</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>throw</span> <span class=k>new</span> <span class=nx>TimeoutError</span><span class=p>(</span><span class=s1>&#39;Total operation time exceeded&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 실패 시 대체 작업 실행
</span></span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=nx>operation</span><span class=p>.</span><span class=nx>fallback</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=kr>await</span> <span class=nx>operation</span><span class=p>.</span><span class=nx>fallback</span><span class=p>();</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=k>throw</span> <span class=nx>error</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>컨텍스트 인식 타임아웃</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-29-1><a class=lnlinks href=#hl-29-1> 1</a>
</span><span class=lnt id=hl-29-2><a class=lnlinks href=#hl-29-2> 2</a>
</span><span class=lnt id=hl-29-3><a class=lnlinks href=#hl-29-3> 3</a>
</span><span class=lnt id=hl-29-4><a class=lnlinks href=#hl-29-4> 4</a>
</span><span class=lnt id=hl-29-5><a class=lnlinks href=#hl-29-5> 5</a>
</span><span class=lnt id=hl-29-6><a class=lnlinks href=#hl-29-6> 6</a>
</span><span class=lnt id=hl-29-7><a class=lnlinks href=#hl-29-7> 7</a>
</span><span class=lnt id=hl-29-8><a class=lnlinks href=#hl-29-8> 8</a>
</span><span class=lnt id=hl-29-9><a class=lnlinks href=#hl-29-9> 9</a>
</span><span class=lnt id=hl-29-10><a class=lnlinks href=#hl-29-10>10</a>
</span><span class=lnt id=hl-29-11><a class=lnlinks href=#hl-29-11>11</a>
</span><span class=lnt id=hl-29-12><a class=lnlinks href=#hl-29-12>12</a>
</span><span class=lnt id=hl-29-13><a class=lnlinks href=#hl-29-13>13</a>
</span><span class=lnt id=hl-29-14><a class=lnlinks href=#hl-29-14>14</a>
</span><span class=lnt id=hl-29-15><a class=lnlinks href=#hl-29-15>15</a>
</span><span class=lnt id=hl-29-16><a class=lnlinks href=#hl-29-16>16</a>
</span><span class=lnt id=hl-29-17><a class=lnlinks href=#hl-29-17>17</a>
</span><span class=lnt id=hl-29-18><a class=lnlinks href=#hl-29-18>18</a>
</span><span class=lnt id=hl-29-19><a class=lnlinks href=#hl-29-19>19</a>
</span><span class=lnt id=hl-29-20><a class=lnlinks href=#hl-29-20>20</a>
</span><span class=lnt id=hl-29-21><a class=lnlinks href=#hl-29-21>21</a>
</span><span class=lnt id=hl-29-22><a class=lnlinks href=#hl-29-22>22</a>
</span><span class=lnt id=hl-29-23><a class=lnlinks href=#hl-29-23>23</a>
</span><span class=lnt id=hl-29-24><a class=lnlinks href=#hl-29-24>24</a>
</span><span class=lnt id=hl-29-25><a class=lnlinks href=#hl-29-25>25</a>
</span><span class=lnt id=hl-29-26><a class=lnlinks href=#hl-29-26>26</a>
</span><span class=lnt id=hl-29-27><a class=lnlinks href=#hl-29-27>27</a>
</span><span class=lnt id=hl-29-28><a class=lnlinks href=#hl-29-28>28</a>
</span><span class=lnt id=hl-29-29><a class=lnlinks href=#hl-29-29>29</a>
</span><span class=lnt id=hl-29-30><a class=lnlinks href=#hl-29-30>30</a>
</span><span class=lnt id=hl-29-31><a class=lnlinks href=#hl-29-31>31</a>
</span><span class=lnt id=hl-29-32><a class=lnlinks href=#hl-29-32>32</a>
</span><span class=lnt id=hl-29-33><a class=lnlinks href=#hl-29-33>33</a>
</span><span class=lnt id=hl-29-34><a class=lnlinks href=#hl-29-34>34</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>ContextAwareTimeout</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>contextRules</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 컨텍스트별 타임아웃 규칙 설정
</span></span></span><span class=line><span class=cl>    <span class=nx>setTimeoutRule</span><span class=p>(</span><span class=nx>context</span><span class=p>,</span> <span class=nx>rule</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>contextRules</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>context</span><span class=p>,</span> <span class=nx>rule</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>executeWithContextTimeout</span><span class=p>(</span><span class=nx>operation</span><span class=p>,</span> <span class=nx>context</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>rule</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>contextRules</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>context</span><span class=p>)</span> <span class=o>||</span> <span class=k>this</span><span class=p>.</span><span class=nx>getDefaultRule</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>timeout</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>calculateTimeoutForContext</span><span class=p>(</span><span class=nx>context</span><span class=p>,</span> <span class=nx>rule</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>executeWithTimeout</span><span class=p>(</span><span class=nx>operation</span><span class=p>,</span> <span class=nx>timeout</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleContextTimeoutError</span><span class=p>(</span><span class=nx>context</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=nx>error</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>calculateTimeoutForContext</span><span class=p>(</span><span class=nx>context</span><span class=p>,</span> <span class=nx>rule</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 현재 시스템 부하 확인
</span></span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>systemLoad</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>getSystemLoad</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 요청 우선순위 확인
</span></span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>priority</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>getRequestPriority</span><span class=p>(</span><span class=nx>context</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 컨텍스트에 따른 타임아웃 계산
</span></span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>rule</span><span class=p>.</span><span class=nx>calculateTimeout</span><span class=p>(</span><span class=nx>systemLoad</span><span class=p>,</span> <span class=nx>priority</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>모니터링과 경고</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-30-1><a class=lnlinks href=#hl-30-1> 1</a>
</span><span class=lnt id=hl-30-2><a class=lnlinks href=#hl-30-2> 2</a>
</span><span class=lnt id=hl-30-3><a class=lnlinks href=#hl-30-3> 3</a>
</span><span class=lnt id=hl-30-4><a class=lnlinks href=#hl-30-4> 4</a>
</span><span class=lnt id=hl-30-5><a class=lnlinks href=#hl-30-5> 5</a>
</span><span class=lnt id=hl-30-6><a class=lnlinks href=#hl-30-6> 6</a>
</span><span class=lnt id=hl-30-7><a class=lnlinks href=#hl-30-7> 7</a>
</span><span class=lnt id=hl-30-8><a class=lnlinks href=#hl-30-8> 8</a>
</span><span class=lnt id=hl-30-9><a class=lnlinks href=#hl-30-9> 9</a>
</span><span class=lnt id=hl-30-10><a class=lnlinks href=#hl-30-10>10</a>
</span><span class=lnt id=hl-30-11><a class=lnlinks href=#hl-30-11>11</a>
</span><span class=lnt id=hl-30-12><a class=lnlinks href=#hl-30-12>12</a>
</span><span class=lnt id=hl-30-13><a class=lnlinks href=#hl-30-13>13</a>
</span><span class=lnt id=hl-30-14><a class=lnlinks href=#hl-30-14>14</a>
</span><span class=lnt id=hl-30-15><a class=lnlinks href=#hl-30-15>15</a>
</span><span class=lnt id=hl-30-16><a class=lnlinks href=#hl-30-16>16</a>
</span><span class=lnt id=hl-30-17><a class=lnlinks href=#hl-30-17>17</a>
</span><span class=lnt id=hl-30-18><a class=lnlinks href=#hl-30-18>18</a>
</span><span class=lnt id=hl-30-19><a class=lnlinks href=#hl-30-19>19</a>
</span><span class=lnt id=hl-30-20><a class=lnlinks href=#hl-30-20>20</a>
</span><span class=lnt id=hl-30-21><a class=lnlinks href=#hl-30-21>21</a>
</span><span class=lnt id=hl-30-22><a class=lnlinks href=#hl-30-22>22</a>
</span><span class=lnt id=hl-30-23><a class=lnlinks href=#hl-30-23>23</a>
</span><span class=lnt id=hl-30-24><a class=lnlinks href=#hl-30-24>24</a>
</span><span class=lnt id=hl-30-25><a class=lnlinks href=#hl-30-25>25</a>
</span><span class=lnt id=hl-30-26><a class=lnlinks href=#hl-30-26>26</a>
</span><span class=lnt id=hl-30-27><a class=lnlinks href=#hl-30-27>27</a>
</span><span class=lnt id=hl-30-28><a class=lnlinks href=#hl-30-28>28</a>
</span><span class=lnt id=hl-30-29><a class=lnlinks href=#hl-30-29>29</a>
</span><span class=lnt id=hl-30-30><a class=lnlinks href=#hl-30-30>30</a>
</span><span class=lnt id=hl-30-31><a class=lnlinks href=#hl-30-31>31</a>
</span><span class=lnt id=hl-30-32><a class=lnlinks href=#hl-30-32>32</a>
</span><span class=lnt id=hl-30-33><a class=lnlinks href=#hl-30-33>33</a>
</span><span class=lnt id=hl-30-34><a class=lnlinks href=#hl-30-34>34</a>
</span><span class=lnt id=hl-30-35><a class=lnlinks href=#hl-30-35>35</a>
</span><span class=lnt id=hl-30-36><a class=lnlinks href=#hl-30-36>36</a>
</span><span class=lnt id=hl-30-37><a class=lnlinks href=#hl-30-37>37</a>
</span><span class=lnt id=hl-30-38><a class=lnlinks href=#hl-30-38>38</a>
</span><span class=lnt id=hl-30-39><a class=lnlinks href=#hl-30-39>39</a>
</span><span class=lnt id=hl-30-40><a class=lnlinks href=#hl-30-40>40</a>
</span><span class=lnt id=hl-30-41><a class=lnlinks href=#hl-30-41>41</a>
</span><span class=lnt id=hl-30-42><a class=lnlinks href=#hl-30-42>42</a>
</span><span class=lnt id=hl-30-43><a class=lnlinks href=#hl-30-43>43</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>TimeoutMonitor</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>timeoutEvents</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>recordTimeout</span><span class=p>(</span><span class=nx>context</span><span class=p>,</span> <span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>event</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>timestamp</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=nx>context</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>error</span><span class=o>:</span> <span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>timeout</span><span class=o>:</span> <span class=nx>error</span><span class=p>.</span><span class=nx>timeout</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>events</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>timeoutEvents</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>context</span><span class=p>)</span> <span class=o>||</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>        <span class=nx>events</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>event</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>timeoutEvents</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>context</span><span class=p>,</span> <span class=nx>events</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 임계값 초과 시 경고
</span></span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>shouldAlert</span><span class=p>(</span><span class=nx>context</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>sendAlert</span><span class=p>(</span><span class=nx>context</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>shouldAlert</span><span class=p>(</span><span class=nx>context</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>events</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>timeoutEvents</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>context</span><span class=p>)</span> <span class=o>||</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>recentEvents</span> <span class=o>=</span> <span class=nx>events</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>e</span> <span class=p>=&gt;</span> 
</span></span><span class=line><span class=cl>            <span class=nx>e</span><span class=p>.</span><span class=nx>timestamp</span> <span class=o>&gt;</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span> <span class=o>-</span> <span class=mi>5</span> <span class=o>*</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>1000</span> <span class=c1>// 최근 5분
</span></span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>recentEvents</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;=</span> <span class=mi>5</span><span class=p>;</span> <span class=c1>// 5번 이상 타임아웃 발생
</span></span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>sendAlert</span><span class=p>(</span><span class=nx>context</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>alert</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;TIMEOUT_ALERT&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>context</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>message</span><span class=o>:</span> <span class=sb>`High timeout rate detected for </span><span class=si>${</span><span class=nx>context</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>timestamp</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>notificationService</span><span class=p>.</span><span class=nx>send</span><span class=p>(</span><span class=nx>alert</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><hr><h2 id=참고-및-출처-3>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-3>#</a></h2></div></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2026 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>