<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Space-Based Architecture | hyunyoun's Blog</title><meta name=keywords content="Software-Engineering,Design-and-Architecture,Architecture-Styles-and-Patterns,Architecture-Styles,Distributed,Space-Based-Architecture,In-Memory-Data-Grid"><meta name=description content="Space-Based Architecture 는 튜플 스페이스 패러다임을 기반으로 한 분산 컴퓨팅 아키텍처로, 데이터와 처리 로직을 여러 노드에 분산시켜 확장성과 성능을 극대화한다. 인메모리 데이터 그리드를 활용하여 데이터베이스 병목 현상을 제거하고, 수평적 확장을 통해 선형적 성능 향상을 제공한다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/system-architecture--design/architecture-styles/specialized-architectures/scalable-systems/space-based-architecture/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.5311427199677f919b17469b4ca383951185b54edbae0ec7a5b4378f78d8f4f4.css integrity="sha256-UxFCcZlnf5GbF0abTKODlRGFtU7brg7HpbQ3j3jY9PQ=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/system-architecture--design/architecture-styles/specialized-architectures/scalable-systems/space-based-architecture/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/system-architecture--design/architecture-styles/specialized-architectures/scalable-systems/space-based-architecture/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/system-architecture--design/architecture-styles/specialized-architectures/scalable-systems/space-based-architecture/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Space-Based Architecture"><meta property="og:description" content="Space-Based Architecture 는 튜플 스페이스 패러다임을 기반으로 한 분산 컴퓨팅 아키텍처로, 데이터와 처리 로직을 여러 노드에 분산시켜 확장성과 성능을 극대화한다. 인메모리 데이터 그리드를 활용하여 데이터베이스 병목 현상을 제거하고, 수평적 확장을 통해 선형적 성능 향상을 제공한다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Space-Based Architecture"><meta name=twitter:description content="Space-Based Architecture 는 튜플 스페이스 패러다임을 기반으로 한 분산 컴퓨팅 아키텍처로, 데이터와 처리 로직을 여러 노드에 분산시켜 확장성과 성능을 극대화한다. 인메모리 데이터 그리드를 활용하여 데이터베이스 병목 현상을 제거하고, 수평적 확장을 통해 선형적 성능 향상을 제공한다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Space-Based Architecture","item":"https://buenhyden.github.io/posts/system-architecture--design/architecture-styles/specialized-architectures/scalable-systems/space-based-architecture/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a></div><h1>Space-Based Architecture</h1><div class=post-description>Space-Based Architecture 는 튜플 스페이스 패러다임을 기반으로 한 분산 컴퓨팅 아키텍처로, 데이터와 처리 로직을 여러 노드에 분산시켜 확장성과 성능을 극대화한다. 인메모리 데이터 그리드를 활용하여 데이터베이스 병목 현상을 제거하고, 수평적 확장을 통해 선형적 성능 향상을 제공한다.</div></header><div class=post-content><h2 id=space-based-architecture>Space-Based Architecture<a hidden class=anchor aria-hidden=true href=#space-based-architecture>#</a></h2><p>Space-Based Architecture(스페이스 기반 아키텍처) 는 대량의 동시 트랜잭션과 데이터 처리가 필요한 환경에서 병목 현상 없이 확장성과 장애 격리를 실현하기 위해 고안된 분산 아키텍처 스타일이다. 시스템을 여러 공간 (Space) 으로 분할하고, 각 공간은 자체적으로 데이터와 프로세스를 관리하며, 중앙 데이터베이스 의존도를 줄여 확장성과 가용성을 극대화한다. 실시간 빅데이터 처리, 금융 시스템, 대규모 전자상거래 등에서 널리 활용된다.</p><p><figure><img alt="Space-based Architecture" loading=lazy src=/img/Space_based_architecture.gif><figcaption>https://en.wikipedia.org/wiki/Space-based_architecture#/media/File:Space_based_architecture.GIF</figcaption></figure></p><h3 id=배경>배경<a hidden class=anchor aria-hidden=true href=#배경>#</a></h3><p>Space‑Based Architecture 는 1997–98 년 마이크로소프트 내부의 Youkon Distributed Caching 플랫폼에서 최초 개발되어 MSN Live Search 등 대용량 서비스에서 사용된 고성능 분산 패턴으로, 이후 금융 및 대규모 웹 서비스에 채택되었다.<br>전통적 Tier 기반 아키텍처에서 DB 계층이 증가하는 로드와 확장성 한계의 병목이 되자, 이를 해결하기 위해 인메모리 데이터 그리드 (IMDG) 와 스케일링 가능한 처리 단위 (PU) 를 이용한 분산 구조가 등장했다.</p><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><p><strong>주요 목적</strong></p><ol><li><strong>선형적 확장성 달성</strong>: 노드 추가에 비례한 성능 향상</li><li><strong>초저지연 데이터 액세스</strong>: 마이크로초 단위의 응답시간 제공</li><li><strong>고가용성 보장</strong>: 장애 상황에서도 서비스 연속성 유지</li><li><strong>복잡성 최소화</strong>: 확장 시 아키텍처 복잡성 증가 방지</li></ol><p><strong>필요성</strong></p><ul><li>실시간 금융 거래 시스템의 요구사항 증가</li><li>IoT 및 빅데이터 환경에서의 대용량 데이터 처리 필요</li><li>클라우드 네이티브 환경에서의 탄력적 확장 요구</li><li>마이크로서비스 아키텍처와의 시너지 효과 창출</li></ul><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><h4 id=기본-개념>기본 개념<a hidden class=anchor aria-hidden=true href=#기본-개념>#</a></h4><p><strong>Tuple Space (튜플 스페이스)</strong></p><ul><li>분산 공유 메모리의 한 형태로, 데이터가 튜플 형태로 저장되는 가상적인 공간</li><li>프로세스들이 콘텐츠 기반 주소 지정을 통해 데이터를 읽고 쓸 수 있는 저장소</li><li>Linda 코디네이션 모델에서 시작된 개념으로, 시간적, 공간적, 흐름적 디커플링을 제공</li></ul><p><strong>Processing Unit (처리 단위)</strong></p><ul><li>SBA 의 기본 빌딩 블록으로, 애플리케이션 컴포넌트와 데이터를 포함하는 자율적인 실행 단위</li><li>웹 컴포넌트, 비즈니스 로직, 인메모리 데이터 그리드를 포함</li><li>독립적으로 배포, 확장, 관리가 가능한 단위</li></ul><p><strong>In-Memory Data Grid (인메모리 데이터 그리드)</strong></p><ul><li>메모리 내에서 데이터를 저장하고 처리하는 분산 캐싱 시스템</li><li>디스크 I/O 없이 데이터 액세스를 제공하여 초저지연 달성</li><li>데이터 파티셔닝과 복제를 통한 고가용성 보장</li></ul><h4 id=실무-구현-연관성>실무 구현 연관성<a hidden class=anchor aria-hidden=true href=#실무-구현-연관성>#</a></h4><p><strong>확장성 (Scalability) 측면</strong></p><ul><li>수평적 확장을 통한 선형적 성능 향상</li><li>데이터베이스 병목 현상 제거로 인한 무제한 확장 가능성</li><li>동적 Processing Unit 추가/제거를 통한 탄력적 확장</li></ul><p><strong>성능 (Performance) 측면</strong></p><ul><li>메모리 기반 데이터 액세스로 마이크로초 단위 지연시간 달성</li><li>데이터 지역성 (Data Locality) 활용으로 네트워크 오버헤드 최소화</li><li>병렬 처리를 통한 높은 처리량 제공</li></ul><p><strong>안정성 (Reliability) 측면</strong></p><ul><li>데이터 복제를 통한 장애 복구 능력</li><li>무중단 서비스를 위한 자동 페일오버 메커니즘</li><li>분산 환경에서의 데이터 일관성 보장</li></ul><h3 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><p><strong>데이터 관리 기능</strong></p><ul><li>분산 데이터 저장 및 복제</li><li>자동 데이터 파티셔닝</li><li>트랜잭션 처리 및 일관성 보장</li><li>데이터 지역성 최적화</li></ul><p><strong>처리 기능</strong></p><ul><li>이벤트 기반 처리</li><li>맵리듀스 패턴 지원</li><li>비동기 처리 지원</li><li>실시간 스트림 처리</li></ul><p><strong>관리 기능</strong></p><ul><li>자동 로드 밸런싱</li><li>장애 감지 및 복구</li><li>동적 확장 및 축소</li><li>모니터링 및 관리</li></ul><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><p><strong>아키텍처 특징</strong></p><ul><li><strong>공유 없음 (Shared Nothing)</strong>: 각 노드가 독립적으로 동작</li><li><strong>수평적 확장</strong>: 노드 추가를 통한 확장</li><li><strong>데이터 지역성</strong>: 데이터와 처리 로직의 동일 위치 배치</li><li><strong>이벤트 기반</strong>: 비동기 메시징을 통한 컴포넌트 간 통신</li></ul><p><strong>성능 특징</strong></p><ul><li><strong>초저지연</strong>: 마이크로초 단위 응답시간</li><li><strong>고처리량</strong>: 초당 수백만 건의 트랜잭션 처리</li><li><strong>선형적 성능</strong>: 노드 수에 비례한 성능 향상</li><li><strong>메모리 기반</strong>: 디스크 I/O 최소화</li></ul><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><ol><li><strong>분산 처리</strong>: 데이터와 처리 로직을 여러 노드에 분산</li><li><strong>메모리 우선</strong>: 모든 데이터를 메모리에 저장</li><li><strong>비동기 통신</strong>: 컴포넌트 간 비동기 메시징 활용</li><li><strong>자율성</strong>: 각 Processing Unit 의 독립적 동작</li><li><strong>탄력성</strong>: 동적 확장 및 장애 복구 능력</li></ol><h3 id=주요-원리>주요 원리<a hidden class=anchor aria-hidden=true href=#주요-원리>#</a></h3><p><strong>튜플 스페이스 원리</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Space = {(key, value, metadata) | 모든 튜플}
</span></span><span class=line><span class=cl>Operations = {out, in, rd, eval}
</span></span></code></pre></td></tr></table></div></div><p><strong>데이터 분산 원리</strong></p><ul><li>일관성 해싱을 통한 데이터 파티셔닝</li><li>복제를 통한 고가용성 보장</li><li>로드 밸런싱을 통한 균등한 부하 분산</li></ul><p><strong>처리 원리</strong></p><ul><li>이벤트 기반 처리 모델</li><li>맵리듀스 패턴을 통한 분산 처리</li><li>비동기 처리를 통한 높은 처리량</li></ul><h3 id=작동-원리-및-방식>작동 원리 및 방식<a hidden class=anchor aria-hidden=true href=#작동-원리-및-방식>#</a></h3><pre class=mermaid>graph TD
    A[Client Request] --&gt; B[Message Grid]
    B --&gt; C[Processing Grid]
    C --&gt; D[Processing Unit 1]
    C --&gt; E[Processing Unit 2]
    C --&gt; F[Processing Unit N]
    D --&gt; G[In-Memory Data Grid 1]
    E --&gt; H[In-Memory Data Grid 2]
    F --&gt; I[In-Memory Data Grid N]
    G --&gt; J[Data Grid]
    H --&gt; J
    I --&gt; J
    J --&gt; K[Deployment Manager]
    K --&gt; L[Virtualized Middleware]
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style D fill:#fff3e0
    style E fill:#fff3e0
    style F fill:#fff3e0
    style G fill:#fce4ec
    style H fill:#fce4ec
    style I fill:#fce4ec
    style J fill:#e0f2f1
    style K fill:#f1f8e9
    style L fill:#fafafa
</pre><p><strong>작동 단계</strong>:</p><ol><li>클라이언트 요청이 메시지 그리드에 도달</li><li>처리 그리드가 적절한 Processing Unit 선택</li><li>선택된 Processing Unit 에서 비즈니스 로직 실행</li><li>인메모리 데이터 그리드에서 데이터 액세스</li><li>결과를 클라이언트에게 반환</li></ol><h3 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h3><p><strong>전체 아키텍처 구조</strong></p><pre class=mermaid>graph TB
    subgraph &#34;Virtualized Middleware&#34;
        MG[Message Grid]
        PG[Processing Grid]
        DG[Data Grid]
        DM[Deployment Manager]
    end
    
    subgraph &#34;Processing Units&#34;
        PU1[Processing Unit 1]
        PU2[Processing Unit 2]
        PU3[Processing Unit N]
    end
    
    subgraph &#34;Each Processing Unit&#34;
        APP[Application Modules]
        IMDG[In-Memory Data Grid]
        APS[Async Persistent Store]
        DRE[Data Replication Engine]
    end
    
    MG --&gt; PU1
    MG --&gt; PU2
    MG --&gt; PU3
    PG --&gt; PU1
    PG --&gt; PU2
    PG --&gt; PU3
    DG --&gt; PU1
    DG --&gt; PU2
    DG --&gt; PU3
    DM --&gt; PU1
    DM --&gt; PU2
    DM --&gt; PU3
    
    PU1 --&gt; APP
    PU1 --&gt; IMDG
    PU1 --&gt; APS
    PU1 --&gt; DRE
    
    style MG fill:#e3f2fd
    style PG fill:#e8f5e8
    style DG fill:#fce4ec
    style DM fill:#fff3e0
    style PU1 fill:#f3e5f5
    style PU2 fill:#f3e5f5
    style PU3 fill:#f3e5f5
    style APP fill:#e1f5fe
    style IMDG fill:#e0f2f1
    style APS fill:#fff8e1
    style DRE fill:#fafafa
</pre><h4 id=구성요소>구성요소<a hidden class=anchor aria-hidden=true href=#구성요소>#</a></h4><table><thead><tr><th>구분</th><th>구성요소</th><th>기능</th><th>역할</th><th>특징</th></tr></thead><tbody><tr><td>필수</td><td>Processing Unit</td><td>독립적 실행 단위</td><td>애플리케이션 로직과 데이터 호스팅</td><td>자율적, 확장 가능</td></tr><tr><td></td><td>In-Memory Data Grid</td><td>메모리 내 데이터 저장</td><td>초저지연 데이터 액세스 제공</td><td>분산, 복제 지원</td></tr><tr><td></td><td>Message Grid</td><td>요청 라우팅</td><td>클라이언트 요청을 적절한 PU 로 전달</td><td>로드 밸런싱</td></tr><tr><td></td><td>Data Grid</td><td>데이터 관리</td><td>분산 데이터 동기화 및 복제</td><td>일관성 보장</td></tr><tr><td></td><td>Processing Grid</td><td>처리 조정</td><td>분산 처리 및 맵리듀스 조정</td><td>병렬 처리 지원</td></tr><tr><td>선택</td><td>Async Persistent Store</td><td>비동기 영속화</td><td>장애 복구를 위한 데이터 백업</td><td>선택적 영속성</td></tr><tr><td></td><td>Data Replication Engine</td><td>데이터 복제</td><td>PU 간 데이터 동기화</td><td>고가용성 향상</td></tr><tr><td></td><td>Deployment Manager</td><td>배포 관리</td><td>동적 PU 배포 및 관리</td><td>운영 효율성</td></tr><tr><td></td><td>Monitoring System</td><td>모니터링</td><td>시스템 상태 및 성능 모니터링</td><td>운영 가시성</td></tr></tbody></table><h3 id=cell-vs-processing-unit-비교>Cell vs. Processing Unit 비교<a hidden class=anchor aria-hidden=true href=#cell-vs-processing-unit-비교>#</a></h3><table><thead><tr><th>항목</th><th><strong>Cell (Cell-based Architecture)</strong></th><th><strong>Processing Unit (Space-based Architecture)</strong></th></tr></thead><tbody><tr><td><strong>정의</strong></td><td>독립적인 마이크로서비스 환경을 포함한 자율 실행 단위</td><td>메모리 - 기반 분산 환경에서 데이터를 처리하는 단위 컴포넌트</td></tr><tr><td><strong>구성 요소</strong></td><td>API 서버, DB, 캐시, 큐, 메시지 브로커 등 전체 서비스 스택 포함</td><td>PU + In-Memory Data Grid (IMDG) + Messaging + SLA 관리</td></tr><tr><td><strong>설계 목적</strong></td><td>장애 격리와 스케일아웃을 위한 단위화 (셀 간 고립)</td><td>대규모 동시성 처리와 성능 최적화, 메모리 기반 처리</td></tr><tr><td><strong>라우팅 방식</strong></td><td>요청 Partition Key 기반 라우팅 (예: UserID → 특정 Cell 로)</td><td>데이터 중심 접근 방식 (Data Affinity, Collocation 기반 라우팅)</td></tr><tr><td><strong>상태 저장</strong></td><td>일반적으로 상태 저장 서비스 포함 (DB, Redis 등)</td><td>상태 비저장 또는 IMDG 내 상태 유지</td></tr><tr><td><strong>스케일 아웃 방식</strong></td><td>Cell 단위로 수평 확장 가능 (Cell A, Cell B 등 독립 복제)</td><td>PU 수 증가로 자동 수평 확장, 클러스터 내 동적 할당</td></tr><tr><td><strong>고가용성 및 장애 격리</strong></td><td>한 Cell 장애 시 다른 Cell 에 영향 없음 (Cell Router 가 fallback 가능)</td><td>PU 장애 시 다른 PU 가 작업을 takeover 함 (Eventual Recovery)</td></tr><tr><td><strong>장애 복구 전략</strong></td><td>Control Plane 이 감지 후 다른 Cell 로 트래픽 라우팅하거나 Cell 재생성</td><td>SLA 위반 시 자동으로 PU 를 재시작하거나 백업 PU 활성화</td></tr><tr><td><strong>데이터 접근 방식</strong></td><td>각 Cell 내부 DB 또는 스토리지를 통해 접근</td><td>중앙 저장소 없이 In-Memory Grid 에서 직접 데이터 조회</td></tr><tr><td><strong>사용 시나리오</strong></td><td>다중 리전 기반 SaaS, 멀티테넌시, 사용자 격리 목적 서비스</td><td>초고속 트랜잭션 처리, 실시간 이벤트 분석, 트레이딩 시스템, IoT 처리 등</td></tr><tr><td><strong>주요 기술 예시</strong></td><td>AWS Cell-based Design, Netflix Cell Architecture</td><td>GigaSpaces XAP, Hazelcast Jet, Apache Ignite, Oracle Coherence</td></tr></tbody></table><h3 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h3><table><thead><tr><th>카테고리</th><th>기법</th><th>정의 및 목적</th><th>주요 구성 요소</th><th>대표 기술/예시</th></tr></thead><tbody><tr><td><strong>데이터 저장 및 공유</strong></td><td><strong>튜플 스페이스 (Tuple Space)</strong></td><td>분산 공유 메모리 모델 기반 비동기적 데이터 공유 및 통신 제공</td><td>튜플 저장소, 패턴 매칭 엔진, 동기화 락</td><td><code>JavaSpaces</code>, <code>Linda</code>, 직접 구현 예시 (Python)</td></tr><tr><td><strong>데이터 분산</strong></td><td><strong>데이터 파티셔닝 (Data Partitioning)</strong></td><td>해시 또는 범위 기반으로 데이터를 다수 노드에 분산 저장하여 확장성과 부하 분산 제공</td><td>해시 함수, 파티션 맵, 분할 알고리즘</td><td><code>Consistent Hashing</code>, <code>Range Partitioning</code></td></tr><tr><td><strong>이벤트 처리</strong></td><td><strong>이벤트 기반 처리 (Event-Driven Processing)</strong></td><td>이벤트 발생 시 비동기 로직 실행으로 컴포넌트 간 느슨한 결합 유지</td><td>이벤트 큐, 발행자/구독자, 이벤트 핸들러</td><td><code>Queue</code>, <code>Pub/Sub</code>, Python 기반 이벤트 핸들러</td></tr><tr><td><strong>데이터 복제 및 가용성</strong></td><td><strong>분산 캐싱 / 미러링</strong></td><td>여러 노드에 캐시 및 복제 저장소 구성으로 데이터 접근 지연 최소화 및 장애 복구 대비</td><td>캐시 노드, 캐시 관리자, 복제 컨트롤러, 일관성 전략</td><td><code>Hazelcast</code>, <code>Apache Ignite</code>, 복제 기반 캐시 시스템</td></tr><tr><td><strong>실행 단위 관리</strong></td><td><strong>Processing Unit 설계</strong></td><td>독립적인 비즈니스 로직 및 메모리 공간으로 구성된 단위 실행 체계</td><td>PU (로직 + 메모리), 복제 엔진, 라우터</td><td><code>GigaSpaces</code>, <code>SATS</code>, 커스텀 PU 컨테이너</td></tr><tr><td><strong>미들웨어 구성</strong></td><td><strong>가상 미들웨어 (Virtual Middleware)</strong></td><td>메시지 라우팅, 데이터 분산, 이벤트 오케스트레이션 기능 제공</td><td>메시지 큐, 처리 그리드, 라우터, 오케스트레이터</td><td><code>Jini</code>, <code>GigaSpaces Message Grid</code></td></tr><tr><td><strong>확장성 관리</strong></td><td><strong>오토스케일링 및 SLA 기반 제어</strong></td><td>부하에 따라 PU 를 자동으로 배치하거나 제거하며 SLA 충족 유지</td><td>SLA 모니터링, Deployment Manager, 자원 스케줄러</td><td><code>Kubernetes</code>, <code>GigaSpaces SLA Manager</code></td></tr></tbody></table><ul><li><strong>데이터 공유 계층</strong>: Tuple Space, IMDG 와 같은 메모리 기반 공유 저장소 중심</li><li><strong>처리/이벤트 계층</strong>: 이벤트 루프 기반 처리, 메시지 기반 오케스트레이션</li><li><strong>확장/복제 계층</strong>: 고가용성 및 부하 분산을 위한 캐시, 미러링, 오토스케일링 등</li><li><strong>운영/제어 계층</strong>: SLA 기반 처리 및 PU 관리 자동화, 배치 제어</li></ul><h4 id=튜플-스페이스-구현>튜플 스페이스 구현<a hidden class=anchor aria-hidden=true href=#튜플-스페이스-구현>#</a></h4><p><strong>정의</strong>: 분산 공유 메모리를 통한 데이터 저장 및 액세스 메커니즘</p><p><strong>구성</strong>:</p><ul><li>튜플 저장소 (Tuple Repository)</li><li>패턴 매칭 엔진 (Pattern Matching Engine)</li><li>동기화 메커니즘 (Synchronization Mechanism)</li></ul><p><strong>목적</strong>: 프로세스 간 비동기적, 익명적 통신 제공</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span><span class=lnt id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a>
</span><span class=lnt id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a>
</span><span class=lnt id=hl-3-17><a class=lnlinks href=#hl-3-17>17</a>
</span><span class=lnt id=hl-3-18><a class=lnlinks href=#hl-3-18>18</a>
</span><span class=lnt id=hl-3-19><a class=lnlinks href=#hl-3-19>19</a>
</span><span class=lnt id=hl-3-20><a class=lnlinks href=#hl-3-20>20</a>
</span><span class=lnt id=hl-3-21><a class=lnlinks href=#hl-3-21>21</a>
</span><span class=lnt id=hl-3-22><a class=lnlinks href=#hl-3-22>22</a>
</span><span class=lnt id=hl-3-23><a class=lnlinks href=#hl-3-23>23</a>
</span><span class=lnt id=hl-3-24><a class=lnlinks href=#hl-3-24>24</a>
</span><span class=lnt id=hl-3-25><a class=lnlinks href=#hl-3-25>25</a>
</span><span class=lnt id=hl-3-26><a class=lnlinks href=#hl-3-26>26</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># JavaSpaces 기반 튜플 스페이스 구현 예시</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TupleSpace</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>tuples</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>out</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>tuple_data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;튜플을 스페이스에 추가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>tuples</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>tuple_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>in_tuple</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>template</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;패턴에 맞는 튜플을 제거하며 반환&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>tuple_data</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>tuples</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>tuple_data</span><span class=p>,</span> <span class=n>template</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>tuples</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>rd</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>template</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;패턴에 맞는 튜플을 복사하여 반환&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>tuple_data</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>tuples</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=k>match</span><span class=p>(</span><span class=n>tuple_data</span><span class=p>,</span> <span class=n>template</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=n>tuple_data</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=데이터-파티셔닝-구현>데이터 파티셔닝 구현<a hidden class=anchor aria-hidden=true href=#데이터-파티셔닝-구현>#</a></h4><p><strong>정의</strong>: 데이터를 여러 노드에 분산하여 저장하는 기법</p><p><strong>구성</strong>:</p><ul><li>해시 기반 파티셔닝</li><li>레인지 기반 파티셔닝</li><li>컨시스턴트 해싱</li></ul><p><strong>목적</strong>: 부하 분산 및 확장성 향상</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span><span class=lnt id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a>
</span><span class=lnt id=hl-4-16><a class=lnlinks href=#hl-4-16>16</a>
</span><span class=lnt id=hl-4-17><a class=lnlinks href=#hl-4-17>17</a>
</span><span class=lnt id=hl-4-18><a class=lnlinks href=#hl-4-18>18</a>
</span><span class=lnt id=hl-4-19><a class=lnlinks href=#hl-4-19>19</a>
</span><span class=lnt id=hl-4-20><a class=lnlinks href=#hl-4-20>20</a>
</span><span class=lnt id=hl-4-21><a class=lnlinks href=#hl-4-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>DataPartitioner</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>num_partitions</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>num_partitions</span> <span class=o>=</span> <span class=n>num_partitions</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>partitions</span> <span class=o>=</span> <span class=p>[[]</span> <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>num_partitions</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>partition_key</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;키를 기반으로 파티션 결정&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>hash</span><span class=p>(</span><span class=n>key</span><span class=p>)</span> <span class=o>%</span> <span class=bp>self</span><span class=o>.</span><span class=n>num_partitions</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;데이터를 적절한 파티션에 저장&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>partition_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>partition_key</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>partitions</span><span class=p>[</span><span class=n>partition_id</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;키를 기반으로 데이터 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>partition_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>partition_key</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>k</span><span class=p>,</span> <span class=n>v</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>partitions</span><span class=p>[</span><span class=n>partition_id</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>k</span> <span class=o>==</span> <span class=n>key</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>v</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=이벤트-기반-처리-구현>이벤트 기반 처리 구현<a hidden class=anchor aria-hidden=true href=#이벤트-기반-처리-구현>#</a></h4><p><strong>정의</strong>: 이벤트 발생에 따른 비동기 처리 메커니즘</p><p><strong>구성</strong>:</p><ul><li>이벤트 발행자 (Event Publisher)</li><li>이벤트 구독자 (Event Subscriber)</li><li>이벤트 큐 (Event Queue)</li></ul><p><strong>목적</strong>: 컴포넌트 간 느슨한 결합 및 비동기 처리</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span><span class=lnt id=hl-5-18><a class=lnlinks href=#hl-5-18>18</a>
</span><span class=lnt id=hl-5-19><a class=lnlinks href=#hl-5-19>19</a>
</span><span class=lnt id=hl-5-20><a class=lnlinks href=#hl-5-20>20</a>
</span><span class=lnt id=hl-5-21><a class=lnlinks href=#hl-5-21>21</a>
</span><span class=lnt id=hl-5-22><a class=lnlinks href=#hl-5-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>EventDrivenProcessor</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>event_handlers</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>event_queue</span> <span class=o>=</span> <span class=n>queue</span><span class=o>.</span><span class=n>Queue</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>register_handler</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event_type</span><span class=p>,</span> <span class=n>handler</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;이벤트 핸들러 등록&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>event_type</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>event_handlers</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>event_handlers</span><span class=p>[</span><span class=n>event_type</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>event_handlers</span><span class=p>[</span><span class=n>event_type</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>handler</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>publish_event</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event_type</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;이벤트 발행&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>event_queue</span><span class=o>.</span><span class=n>put</span><span class=p>((</span><span class=n>event_type</span><span class=p>,</span> <span class=n>data</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_events</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;이벤트 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>event_queue</span><span class=o>.</span><span class=n>empty</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=n>event_type</span><span class=p>,</span> <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>event_queue</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>event_type</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>event_handlers</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>handler</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>event_handlers</span><span class=p>[</span><span class=n>event_type</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                    <span class=n>handler</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=분산-캐싱-구현>분산 캐싱 구현<a hidden class=anchor aria-hidden=true href=#분산-캐싱-구현>#</a></h4><p><strong>정의</strong>: 여러 노드에 걸쳐 데이터를 캐싱하는 기법</p><p><strong>구성</strong>:</p><ul><li>캐시 노드 (Cache Node)</li><li>캐시 매니저 (Cache Manager)</li><li>일관성 관리자 (Consistency Manager)</li></ul><p><strong>목적</strong>: 데이터 액세스 성능 향상 및 확장성 제공</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15>15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16>16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17>17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18>18</a>
</span><span class=lnt id=hl-6-19><a class=lnlinks href=#hl-6-19>19</a>
</span><span class=lnt id=hl-6-20><a class=lnlinks href=#hl-6-20>20</a>
</span><span class=lnt id=hl-6-21><a class=lnlinks href=#hl-6-21>21</a>
</span><span class=lnt id=hl-6-22><a class=lnlinks href=#hl-6-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>DistributedCache</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>nodes</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>nodes</span> <span class=o>=</span> <span class=n>nodes</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>ring</span> <span class=o>=</span> <span class=n>ConsistentHash</span><span class=p>(</span><span class=n>nodes</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;데이터를 분산 캐시에 저장&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>node</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>ring</span><span class=o>.</span><span class=n>get_node</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>node</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># 복제를 위해 추가 노드에도 저장</span>
</span></span><span class=line><span class=cl>        <span class=n>replica_node</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>ring</span><span class=o>.</span><span class=n>get_replica_node</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>replica_node</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;분산 캐시에서 데이터 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>node</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>ring</span><span class=o>.</span><span class=n>get_node</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>value</span> <span class=o>=</span> <span class=n>node</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 복제 노드에서 조회 시도</span>
</span></span><span class=line><span class=cl>            <span class=n>replica_node</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>ring</span><span class=o>.</span><span class=n>get_replica_node</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>value</span> <span class=o>=</span> <span class=n>replica_node</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>value</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>성능 (Performance)</strong></td><td>초저지연 처리 (Low Latency)</td><td>모든 데이터를 메모리에 저장하고 디스크 I/O 를 제거하여 마이크로초 단위의 응답시간을 보장함</td></tr><tr><td></td><td>고성능 트랜잭션 처리</td><td>인메모리 데이터 그리드 구조와 네트워크 최소화 설계로 고속 처리 가능</td></tr><tr><td></td><td>데이터 지역성 최적화</td><td>데이터와 연산이 같은 PU 에 위치하여 네트워크 지연을 최소화함</td></tr><tr><td><strong>확장성 (Scalability)</strong></td><td>선형 확장성 (Linear Scalability)</td><td>PU 를 수평으로 추가함으로써 처리 성능이 선형적으로 증가함</td></tr><tr><td></td><td>탄력적 확장 (Elastic Scaling)</td><td>부하 증가 시 PU 를 동적으로 추가하고, 부하 감소 시 제거 가능</td></tr><tr><td></td><td>단순한 확장 구조</td><td>중앙 집중형 DB 를 제거함으로써 아키텍처 복잡성 없이 수평 확장이 용이함</td></tr><tr><td><strong>가용성 & 복원력 (Availability & Resilience)</strong></td><td>고가용성 (High Availability)</td><td>데이터 복제 및 페일오버 메커니즘으로 단일 장애 지점 제거</td></tr><tr><td></td><td>장애 격리 (Fault Isolation)</td><td>각 PU 는 독립적으로 운영되어 장애가 전체 시스템에 미치는 영향을 최소화함</td></tr><tr><td><strong>아키텍처 유연성 (Modularity & Flexibility)</strong></td><td>자율성 및 격리성 (Autonomy & Isolation)</td><td>각 PU 는 독립적으로 개발·테스트·배포 가능하여 CI/CD 및 마이크로서비스 스타일에 적합함</td></tr><tr><td></td><td>유연한 비즈니스 대응</td><td>로직과 데이터를 느슨하게 결합하여 다양한 요구사항에 대응 가능</td></tr><tr><td><strong>이벤트 기반 처리 (Event-Driven Architecture)</strong></td><td>비동기 이벤트 기반 처리</td><td>튜플 스페이스 기반의 메시지 패싱 구조로 느슨한 결합과 비동기 처리가 가능함</td></tr><tr><td><strong>장애 회복 (Resilience)</strong></td><td>자동 복구 및 페일오버 지원</td><td>장애 발생 시 자동으로 다른 PU 로 트래픽 분산 또는 재시작 가능</td></tr></tbody></table><h3 id=단점과-문제점-그리고-해결방안>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안>#</a></h3><h4 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h4><table><thead><tr><th>항목</th><th>설명</th><th>해결 방안 전략</th></tr></thead><tbody><tr><td>메모리 비용 부담</td><td>모든 데이터를 인메모리에 유지하므로 하드웨어 요구량이 높고 비용 증가</td><td>티어링 저장소 도입, 핫 데이터 위주 캐싱, Hybrid 구조 도입</td></tr><tr><td>데이터 일관성 확보 어려움</td><td>분산된 공간 간 동기화 지연 및 충돌 가능성 존재</td><td>Eventual Consistency 전략, CQRS, 이벤트 소싱</td></tr><tr><td>구현 및 운영 복잡성</td><td>PU, 미러링, 라우팅 등 설계 복잡도와 유지 보수 난이도 상승</td><td>GigaSpaces, Hazelcast 등 검증된 플랫폼 활용, 설정 자동화</td></tr><tr><td>리소스 중복</td><td>공간 간 독립성이 강해 동일 데이터나 기능을 중복 배치하게 됨</td><td>공통 컴포넌트 리팩토링, 공유 인프라 구성, 멀티테넌시 최적화</td></tr><tr><td>분석 연산의 어려움</td><td>데이터가 분산되어 있어 전체 집계나 분석에 비효율 발생</td><td>MapReduce, 분산 쿼리 엔진 (Presto, Spark SQL 등) 활용</td></tr><tr><td>네트워크 의존성</td><td>PU 간 통신이 잦아 네트워크 장애 발생 시 성능 급락 가능</td><td>로컬 캐싱, 중복 경로 구성, 네트워크 장애 탐지 및 회복 전략 도입</td></tr></tbody></table><h4 id=문제점>문제점<a hidden class=anchor aria-hidden=true href=#문제점>#</a></h4><table><thead><tr><th>항목</th><th>원인/상황</th><th>영향</th><th>탐지/진단 방법</th><th>예방/대응 전략</th></tr></thead><tbody><tr><td>메모리 누수</td><td>GC 최적화 부족, 튜플 잔존</td><td>시스템 성능 저하, Crash 위험</td><td>Heap Dump, 프로파일링 도구</td><td>정기적인 GC 튜닝, GC 알고리즘 선택 (G1GC 등)</td></tr><tr><td>데이터 불일치</td><td>복제/동기화 지연, 네트워크 파티션</td><td>무결성 저하, 처리 오류 유발</td><td>벡터 클록, 일관성 체크도구</td><td>Conflict Resolver, 동기화 주기 최적화</td></tr><tr><td>핫스팟 발생</td><td>특정 키 또는 노드에 트래픽 집중</td><td>성능 저하, 특정 PU 과부하</td><td>트래픽 분석, 노드 로드 모니터링</td><td>Consistent Hashing, 가상 노드 (Virtual Nodes)</td></tr><tr><td>스플릿 브레인 현상</td><td>네트워크 분리 시 다중 마스터 발생</td><td>데이터 충돌, 시스템 안정성 저하</td><td>Quorum 모니터링</td><td>Paxos, Raft, 리더 선출 알고리즘 적용</td></tr><tr><td>캐시 미스 급증</td><td>예기치 못한 부하 상승, TTL 만료 등</td><td>응답 시간 증가, 사용자 체감 속도 저하</td><td>Cache Hit Ratio 분석</td><td>예측 기반 캐싱, 캐시 워밍업, 적응형 캐싱 (Adaptive Caching)</td></tr><tr><td>장애 감지 지연</td><td>모니터링 부족, 헬스체크 실패 무시</td><td>복구 지연, 서비스 중단 시간 증가</td><td>실시간 헬스체크, 트레이싱</td><td>자동화된 장애 감지 및 Failover 시스템</td></tr><tr><td>디버깅 난이도</td><td>분산 환경에서 동시성 문제 발생</td><td>테스트 및 문제 추적 어려움</td><td>분산 트레이싱 도구 (Zipkin, Jaeger)</td><td>트랜잭션 로그, 추적 ID 기반 전파</td></tr><tr><td>데이터 손실 위험</td><td>IMDG 의 비영속 특성, 장애 발생 시 복구 어려움</td><td>영구 데이터 소실, 비즈니스 로직 장애</td><td>Write-Ahead Logging, Snapshot 관리</td><td>지속적 체크포인트, 디스크 기반 백업 + WAL 적용</td></tr></tbody></table><h3 id=도전-과제>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>과제</strong></th><th><strong>원인 / 영향</strong></th><th><strong>해결 방향 (분석 기반 보완)</strong></th></tr></thead><tbody><tr><td><strong>확장성 & 네트워크</strong></td><td>네트워크 오버헤드</td><td>노드 증가 시 데이터 분산으로 인한 트래픽 폭증→ 성능 저하 발생 가능</td><td>데이터 로컬리티 보장, 엣지 컴퓨팅 도입, 네트워크 토폴로지 최적화</td></tr><tr><td></td><td>PU 오토스케일링 정책의 정밀성 부족</td><td>SLA 기반 PU 스케일링이 비효율적일 경우 비용 과잉 또는 자원 부족 초래</td><td>예측 기반 오토스케일링 알고리즘, SLA-Event 동기화 정책</td></tr><tr><td><strong>데이터 일관성</strong></td><td>실시간 데이터 복제 지연</td><td>분산된 PU 간 복제 타이밍 불일치→ 데이터 불일치 발생 가능</td><td>최종 일관성 모델 + 이벤트 소싱, Pub/Sub 기반 CQRS</td></tr><tr><td></td><td>강한 일관성 보장 어려움</td><td>CAP 정리상 가용성과의 트레이드오프 존재→ 금융/정합성 요구 시스템에서 제약</td><td>분산 트랜잭션 (2PC 개선), CRDT, 시계 동기화 전략 강화</td></tr><tr><td><strong>운영 복잡성</strong></td><td>분산 노드 운영 및 장애 대응 어려움</td><td>PU 수 증가에 따른 로그, 트레이스, 상태 추적 복잡도 증가</td><td>관찰성 도구 통합 (OTel, Grafana), 자동 Healing 및 상태 기반 경고 체계</td></tr><tr><td></td><td>테스트 및 디버깅 난이도</td><td>재현 환경 구성의 어려움 및 E2E 테스트 자동화 부재</td><td>Chaos Engineering 기법, 시뮬레이션 테스트 인프라</td></tr><tr><td><strong>비용 및 자원 최적화</strong></td><td>메모리 자원 낭비</td><td>복제 구조로 인한 중복 저장 → 메모리 사용률 증가</td><td>Hybrid Memory-Disk 구조, LRU 기반 캐시 정책</td></tr><tr><td></td><td>인프라 사용률 불균형</td><td>PU 간 자원 부하 편중 → 특정 노드 과부하 또는 유휴 노드 발생</td><td>자원 사용률 기반 로드 밸런싱, Auto-Rebalancing</td></tr><tr><td><strong>보안 및 격리성</strong></td><td>접근 제어 및 데이터 격리 미흡</td><td>인메모리 기반 공유 구조에서 인증·인가 정책 미비 시 보안 위협 발생 가능</td><td>PU 별 접근 제어 정책, TLS 통신 암호화, 인증 토큰 활용</td></tr><tr><td><strong>운영 도구 부족</strong></td><td>SBA 특화된 관찰성 도구 미비</td><td>Zipkin, Jaeger 등 외부 도구 의존도 높음→ 분산 환경 통합 가시성 부족</td><td>SBA 전용 대시보드/분산 로그 수집 플랫폼 개발</td></tr></tbody></table><h3 id=분류-기준에-따른-종류-및-유형>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형>#</a></h3><table><thead><tr><th><strong>분류 기준</strong></th><th><strong>유형</strong></th><th><strong>설명</strong></th><th><strong>특징/선택 기준</strong></th></tr></thead><tbody><tr><td><strong>데이터 저장 및 분산</strong></td><td><strong>Partitioned Space</strong></td><td>데이터를 키/범위 기반으로 분할하여 PU 에 수평 분산 저장</td><td>확장성 중심, 부하 분산 우수</td></tr><tr><td></td><td><strong>Replicated Space</strong></td><td>모든 PU 에 동일한 데이터를 복제 저장</td><td>고가용성 중심, 읽기 부하 분산, 쓰기 비용 증가 가능</td></tr><tr><td><strong>파티셔닝 전략</strong></td><td><strong>해시 기반 분할</strong></td><td>키 해시값 기반으로 데이터 위치 결정</td><td>균등 분산에 유리, 범위 쿼리 어려움</td></tr><tr><td></td><td><strong>범위 기반 분할</strong></td><td>특정 범위 (날짜, ID 등) 에 따라 파티션 분할</td><td>범위 쿼리에 적합, 불균형 가능성 있음</td></tr><tr><td></td><td><strong>수직 분할 (기능별)</strong></td><td>데이터 속성을 기능 도메인별로 분리</td><td>도메인 중심 최적화, 서비스 독립성 확보</td></tr><tr><td><strong>데이터 일관성 모델</strong></td><td><strong>Strong Consistency</strong></td><td>모든 노드가 동일한 데이터를 즉시 유지</td><td>정합성 중요 시스템 적합, 쓰기 성능 저하 가능</td></tr><tr><td></td><td><strong>Eventual Consistency</strong></td><td>시간이 지남에 따라 일관된 상태에 도달</td><td>높은 처리량, 임시 불일치 허용, 분산 환경 최적화</td></tr><tr><td><strong>복제 방식</strong></td><td><strong>Single Mirror</strong></td><td>한 개의 백업 노드 (PU) 에만 데이터 복제</td><td>단순 구조, 리스크 존재</td></tr><tr><td></td><td><strong>Multi Mirror</strong></td><td>여러 PU 에 다중 복제 저장</td><td>고가용성 보장, 리소스 비용 증가 가능</td></tr><tr><td><strong>장애 복구 전략</strong></td><td><strong>Active-Passive</strong></td><td>Primary PU + Backup PU 구성, 장애 시 페일오버 수행</td><td>안정적 복구 구조, 자원 비효율 가능</td></tr><tr><td></td><td><strong>Active-Active</strong></td><td>모든 PU 가 동시에 동작하며 Failover 없음</td><td>성능 균형, 충돌 해결 로직 필요</td></tr><tr><td><strong>처리 모델</strong></td><td><strong>Synchronous</strong></td><td>요청/응답 기반의 동기 통신</td><td>일관성 및 직관적인 흐름 보장, 지연 발생</td></tr><tr><td></td><td><strong>Asynchronous (Event-driven)</strong></td><td>이벤트 기반 메시지 처리, 비동기 응답</td><td>높은 처리량, 복잡한 상태/에러 관리 필요</td></tr><tr><td><strong>노드 확장 방식</strong></td><td><strong>Static Cluster</strong></td><td>수동으로 노드 및 PU 구성</td><td>제어 용이, 운영 비용 증가 가능</td></tr><tr><td></td><td><strong>Dynamic Cluster</strong></td><td>SLA 기준으로 PU 자동 확장/축소</td><td>자원 최적화, 운영 자동화 가능</td></tr><tr><td><strong>배포 모델</strong></td><td><strong>On-Premise</strong></td><td>자체 데이터 센터에 배포</td><td>높은 제어권, 고비용</td></tr><tr><td></td><td><strong>Cloud-Native</strong></td><td>클라우드 환경에 완전 배포</td><td>탄력적 확장, 플랫폼 종속성 가능</td></tr><tr><td></td><td><strong>Hybrid Deployment</strong></td><td>클라우드와 온프레미스 혼합 배포</td><td>유연성 확보, 네트워크/운영 복잡성 증가</td></tr></tbody></table><h3 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h3><table><thead><tr><th><strong>분야</strong></th><th><strong>사용 목적</strong></th><th><strong>기술/환경</strong></th><th><strong>달성 효과</strong></th></tr></thead><tbody><tr><td><strong>금융 거래 시스템</strong></td><td>고속 트랜잭션 처리, 무중단 운영</td><td>GigaSpaces XAP, Event Sourcing, IMDG (In-Memory Data Grid)</td><td>마이크로초 단위 응답, 고가용성, 장애 격리</td></tr><tr><td><strong>전자상거래</strong></td><td>대규모 주문 및 결제 처리</td><td>Spring PU Framework, Apache Ignite, CQRS, Event Queue</td><td>병목 없는 트랜잭션 흐름, 실시간 재고/결제 처리</td></tr><tr><td><strong>실시간 추천 시스템</strong></td><td>사용자 행동 기반 실시간 개인화 추천</td><td>Machine Learning 모델, PU 기반 인메모리 분석</td><td>추천 속도 향상, 사용자 이탈률 감소</td></tr><tr><td><strong>IoT/센서 처리</strong></td><td>실시간 센서 이벤트 수집 및 분석</td><td>Hazelcast, Apache Ignite, Stream Processing + PU</td><td>병렬 처리 및 지연 최소화, 수평 확장 용이</td></tr><tr><td><strong>소셜 플랫폼</strong></td><td>수백만 세션 관리, 대규모 사용자 활동 처리</td><td>PU 기반 세션 클러스터링, WebSocket, Redis</td><td>세션 안정성 확보, 수평 확장에 유리, 빠른 실시간 반응성</td></tr><tr><td><strong>게임 서버 백엔드</strong></td><td>상태 동기화 및 초저지연 인터랙션 관리</td><td>Redis Cluster + Lua, GigaSpaces 기반 실시간 메모리 처리</td><td>게임 상태 공유 최적화, 부하 분산, 지연 최소화</td></tr><tr><td><strong>사기 탐지/보안</strong></td><td>실시간 거래 이상 징후 탐지</td><td>Rule Engine + PU, ML Model, Streaming Engine</td><td>실시간 탐지 및 차단, 위협 최소화</td></tr><tr><td><strong>캐시 중심 웹 서비스</strong></td><td>DB 의존도 감소 및 빠른 응답 제공</td><td>Apache Ignite + Space 기반 캐시 처리 구조</td><td>DB 부하 완화, 페이지 렌더링 속도 향상</td></tr></tbody></table><h3 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h3><h4 id=사례-1-전자상거래-대규모-주문-처리-시스템>사례 1: 전자상거래 대규모 주문 처리 시스템<a hidden class=anchor aria-hidden=true href=#사례-1-전자상거래-대규모-주문-처리-시스템>#</a></h4><p><strong>시스템 구성</strong>: 여러 공간 (Space) 에 주문 데이터 파티셔닝, 각 공간에 프로세싱 유닛 배치</p><pre class=mermaid>graph TD
    User(사용자) --&gt; LB(로드 밸런서)
    LB --&gt; PU1(프로세싱 유닛 1)
    LB --&gt; PU2(프로세싱 유닛 2)
    PU1 --&gt; Space1(공간 1)
    PU2 --&gt; Space2(공간 2)
    Space1 -- 미러링 --&gt; Space2
</pre><p><strong>워크플로우</strong>: 주문 요청 → 로드 밸런서 → 적절한 공간 → 프로세싱 유닛에서 처리 → 데이터 미러링</p><p><strong>역할</strong>: 장애 발생 시 해당 공간만 격리, 전체 서비스는 정상 운영</p><p><strong>차이점</strong>: 미적용 시 주문 폭주로 중앙 DB 병목, 적용 시 공간별로 병렬 처리 및 장애 격리</p><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 주문 ID 기반으로 공간(Space)을 결정하는 예시</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SpaceRouter</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>space_count</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>space_count</span> <span class=o>=</span> <span class=n>space_count</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>route</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># order_id를 해시하여 공간 번호 결정</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>order_id</span> <span class=o>%</span> <span class=bp>self</span><span class=o>.</span><span class=n>space_count</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>space_router</span> <span class=o>=</span> <span class=n>SpaceRouter</span><span class=p>(</span><span class=n>space_count</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>order_id</span> <span class=o>=</span> <span class=mi>20230711</span>
</span></span><span class=line><span class=cl><span class=n>space_number</span> <span class=o>=</span> <span class=n>space_router</span><span class=o>.</span><span class=n>route</span><span class=p>(</span><span class=n>order_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;주문 </span><span class=si>{</span><span class=n>order_id</span><span class=si>}</span><span class=s2>는 공간 </span><span class=si>{</span><span class=n>space_number</span><span class=si>}</span><span class=s2>로 라우팅됩니다.&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>위 코드는 주문 요청을 Space-Based Architecture 에서 특정 공간으로 라우팅하는 원리를 보여준다.</li></ul><h4 id=사례-2-금융-실시간-결제-시스템>사례 2: 금융 실시간 결제 시스템<a hidden class=anchor aria-hidden=true href=#사례-2-금융-실시간-결제-시스템>#</a></h4><p><strong>시스템 구성</strong></p><pre class=mermaid>flowchart TD
  Client --&gt; Router
  Router --&gt; PU1[&#34;PU1 (Primary)&#34;]
  Router --&gt; PU2[&#34;PU2 (Primary)&#34;]
  PU1 --&gt; SpaceP1[(Tuple Space Partition)]
  PU2 --&gt; SpaceP2[(Tuple Space Partition)]
  PU1 &lt;--&gt; Backup1[PU1 Backup]
  PU2 &lt;--&gt; Backup2[PU2 Backup]
</pre><p><strong>Workflow</strong>:</p><ol><li>고객 결제 요청 → Router → 특정 PU</li><li>PU 에서 Tuple 로 insert → Backup 으로 복제</li><li>Polling Container 가 튜플 꺼내며 비즈니스 로직 처리</li><li>결제 결과 튜플 등록 및 응답</li><li>PU 장애 시 Backup 이 자동 사용</li></ol><p><strong>SBA 도입 전/후 비교</strong>:</p><table><thead><tr><th>항목</th><th>SBA 적용 전</th><th>SBA 적용 후</th></tr></thead><tbody><tr><td>처리속도</td><td>중앙 DB 병목, 지연 발생</td><td>메모리 공간 기반 병목 해소, 지연 감소</td></tr><tr><td>장애 대처 시간</td><td>장애 시 서비스 전체 중단</td><td>PU 단위 장애 격리, 자동 복구</td></tr><tr><td>확장성</td><td>수직 확장 및 복잡한 샤딩</td><td>노드 증설만으로 간편한 수평 확장</td></tr></tbody></table><h4 id=사례-2-고빈도-거래-hft-시스템-사례>사례 2: 고빈도 거래 (HFT) 시스템 사례<a hidden class=anchor aria-hidden=true href=#사례-2-고빈도-거래-hft-시스템-사례>#</a></h4><p><strong>시스템 구성</strong>:</p><ul><li>다수의 Processing Unit 이 각각 특정 금융 상품 데이터를 담당</li><li>실시간 시장 데이터 피드를 이벤트 스트림으로 처리</li><li>거래 결정 로직과 포지션 데이터를 동일한 메모리 공간에 배치</li></ul><p><strong>시스템 구성 다이어그램</strong>:</p><pre class=mermaid>graph TB
    subgraph &#34;Market Data Sources&#34;
        MDS1[Exchange A]
        MDS2[Exchange B]
        MDS3[News Feed]
    end
    
    subgraph &#34;Space-Based Trading System&#34;
        MG[Message Grid]
        
        subgraph &#34;Processing Units&#34;
            PU1[Equity Trading PU]
            PU2[FX Trading PU]
            PU3[Options Trading PU]
        end
        
        subgraph &#34;Data Grids&#34;
            DG1[Market Data Grid]
            DG2[Position Data Grid]
            DG3[Risk Data Grid]
        end
    end
    
    subgraph &#34;External Systems&#34;
        OMS[Order Management]
        RISK[Risk Management]
        SETTLE[Settlement]
    end
    
    MDS1 --&gt; MG
    MDS2 --&gt; MG
    MDS3 --&gt; MG
    
    MG --&gt; PU1
    MG --&gt; PU2
    MG --&gt; PU3
    
    PU1 --&gt; DG1
    PU1 --&gt; DG2
    PU2 --&gt; DG1
    PU2 --&gt; DG2
    PU3 --&gt; DG1
    PU3 --&gt; DG2
    
    DG3 --&gt; RISK
    PU1 --&gt; OMS
    PU2 --&gt; OMS
    PU3 --&gt; OMS
    
    OMS --&gt; SETTLE
    
    style MG fill:#e3f2fd
    style PU1 fill:#e8f5e8
    style PU2 fill:#e8f5e8
    style PU3 fill:#e8f5e8
    style DG1 fill:#fce4ec
    style DG2 fill:#fce4ec
    style DG3 fill:#fce4ec
</pre><p><strong>Workflow</strong>:</p><ol><li>시장 데이터 수신 및 Message Grid 를 통한 라우팅</li><li>해당 상품 담당 Processing Unit 에서 데이터 처리</li><li>인메모리 데이터 그리드에서 포지션 및 리스크 데이터 조회</li><li>거래 알고리즘 실행 및 주문 결정</li><li>주문 관리 시스템으로 주문 전송</li><li>실시간 포지션 및 리스크 업데이트</li></ol><p><strong>Space-Based Architecture 의 역할</strong>:</p><ul><li>시장 데이터와 거래 로직을 동일한 메모리 공간에 배치하여 지연시간 최소화</li><li>각 상품별 Processing Unit 분리로 병렬 처리 및 확장성 제공</li><li>인메모리 데이터 그리드를 통한 초고속 포지션 계산</li></ul><p><strong>구현 예시</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1>  1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2>  2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3>  3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4>  4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5>  5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6>  6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7>  7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8>  8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9>  9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10> 10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11> 11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12> 12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13> 13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14> 14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15> 15</a>
</span><span class=lnt id=hl-11-16><a class=lnlinks href=#hl-11-16> 16</a>
</span><span class=lnt id=hl-11-17><a class=lnlinks href=#hl-11-17> 17</a>
</span><span class=lnt id=hl-11-18><a class=lnlinks href=#hl-11-18> 18</a>
</span><span class=lnt id=hl-11-19><a class=lnlinks href=#hl-11-19> 19</a>
</span><span class=lnt id=hl-11-20><a class=lnlinks href=#hl-11-20> 20</a>
</span><span class=lnt id=hl-11-21><a class=lnlinks href=#hl-11-21> 21</a>
</span><span class=lnt id=hl-11-22><a class=lnlinks href=#hl-11-22> 22</a>
</span><span class=lnt id=hl-11-23><a class=lnlinks href=#hl-11-23> 23</a>
</span><span class=lnt id=hl-11-24><a class=lnlinks href=#hl-11-24> 24</a>
</span><span class=lnt id=hl-11-25><a class=lnlinks href=#hl-11-25> 25</a>
</span><span class=lnt id=hl-11-26><a class=lnlinks href=#hl-11-26> 26</a>
</span><span class=lnt id=hl-11-27><a class=lnlinks href=#hl-11-27> 27</a>
</span><span class=lnt id=hl-11-28><a class=lnlinks href=#hl-11-28> 28</a>
</span><span class=lnt id=hl-11-29><a class=lnlinks href=#hl-11-29> 29</a>
</span><span class=lnt id=hl-11-30><a class=lnlinks href=#hl-11-30> 30</a>
</span><span class=lnt id=hl-11-31><a class=lnlinks href=#hl-11-31> 31</a>
</span><span class=lnt id=hl-11-32><a class=lnlinks href=#hl-11-32> 32</a>
</span><span class=lnt id=hl-11-33><a class=lnlinks href=#hl-11-33> 33</a>
</span><span class=lnt id=hl-11-34><a class=lnlinks href=#hl-11-34> 34</a>
</span><span class=lnt id=hl-11-35><a class=lnlinks href=#hl-11-35> 35</a>
</span><span class=lnt id=hl-11-36><a class=lnlinks href=#hl-11-36> 36</a>
</span><span class=lnt id=hl-11-37><a class=lnlinks href=#hl-11-37> 37</a>
</span><span class=lnt id=hl-11-38><a class=lnlinks href=#hl-11-38> 38</a>
</span><span class=lnt id=hl-11-39><a class=lnlinks href=#hl-11-39> 39</a>
</span><span class=lnt id=hl-11-40><a class=lnlinks href=#hl-11-40> 40</a>
</span><span class=lnt id=hl-11-41><a class=lnlinks href=#hl-11-41> 41</a>
</span><span class=lnt id=hl-11-42><a class=lnlinks href=#hl-11-42> 42</a>
</span><span class=lnt id=hl-11-43><a class=lnlinks href=#hl-11-43> 43</a>
</span><span class=lnt id=hl-11-44><a class=lnlinks href=#hl-11-44> 44</a>
</span><span class=lnt id=hl-11-45><a class=lnlinks href=#hl-11-45> 45</a>
</span><span class=lnt id=hl-11-46><a class=lnlinks href=#hl-11-46> 46</a>
</span><span class=lnt id=hl-11-47><a class=lnlinks href=#hl-11-47> 47</a>
</span><span class=lnt id=hl-11-48><a class=lnlinks href=#hl-11-48> 48</a>
</span><span class=lnt id=hl-11-49><a class=lnlinks href=#hl-11-49> 49</a>
</span><span class=lnt id=hl-11-50><a class=lnlinks href=#hl-11-50> 50</a>
</span><span class=lnt id=hl-11-51><a class=lnlinks href=#hl-11-51> 51</a>
</span><span class=lnt id=hl-11-52><a class=lnlinks href=#hl-11-52> 52</a>
</span><span class=lnt id=hl-11-53><a class=lnlinks href=#hl-11-53> 53</a>
</span><span class=lnt id=hl-11-54><a class=lnlinks href=#hl-11-54> 54</a>
</span><span class=lnt id=hl-11-55><a class=lnlinks href=#hl-11-55> 55</a>
</span><span class=lnt id=hl-11-56><a class=lnlinks href=#hl-11-56> 56</a>
</span><span class=lnt id=hl-11-57><a class=lnlinks href=#hl-11-57> 57</a>
</span><span class=lnt id=hl-11-58><a class=lnlinks href=#hl-11-58> 58</a>
</span><span class=lnt id=hl-11-59><a class=lnlinks href=#hl-11-59> 59</a>
</span><span class=lnt id=hl-11-60><a class=lnlinks href=#hl-11-60> 60</a>
</span><span class=lnt id=hl-11-61><a class=lnlinks href=#hl-11-61> 61</a>
</span><span class=lnt id=hl-11-62><a class=lnlinks href=#hl-11-62> 62</a>
</span><span class=lnt id=hl-11-63><a class=lnlinks href=#hl-11-63> 63</a>
</span><span class=lnt id=hl-11-64><a class=lnlinks href=#hl-11-64> 64</a>
</span><span class=lnt id=hl-11-65><a class=lnlinks href=#hl-11-65> 65</a>
</span><span class=lnt id=hl-11-66><a class=lnlinks href=#hl-11-66> 66</a>
</span><span class=lnt id=hl-11-67><a class=lnlinks href=#hl-11-67> 67</a>
</span><span class=lnt id=hl-11-68><a class=lnlinks href=#hl-11-68> 68</a>
</span><span class=lnt id=hl-11-69><a class=lnlinks href=#hl-11-69> 69</a>
</span><span class=lnt id=hl-11-70><a class=lnlinks href=#hl-11-70> 70</a>
</span><span class=lnt id=hl-11-71><a class=lnlinks href=#hl-11-71> 71</a>
</span><span class=lnt id=hl-11-72><a class=lnlinks href=#hl-11-72> 72</a>
</span><span class=lnt id=hl-11-73><a class=lnlinks href=#hl-11-73> 73</a>
</span><span class=lnt id=hl-11-74><a class=lnlinks href=#hl-11-74> 74</a>
</span><span class=lnt id=hl-11-75><a class=lnlinks href=#hl-11-75> 75</a>
</span><span class=lnt id=hl-11-76><a class=lnlinks href=#hl-11-76> 76</a>
</span><span class=lnt id=hl-11-77><a class=lnlinks href=#hl-11-77> 77</a>
</span><span class=lnt id=hl-11-78><a class=lnlinks href=#hl-11-78> 78</a>
</span><span class=lnt id=hl-11-79><a class=lnlinks href=#hl-11-79> 79</a>
</span><span class=lnt id=hl-11-80><a class=lnlinks href=#hl-11-80> 80</a>
</span><span class=lnt id=hl-11-81><a class=lnlinks href=#hl-11-81> 81</a>
</span><span class=lnt id=hl-11-82><a class=lnlinks href=#hl-11-82> 82</a>
</span><span class=lnt id=hl-11-83><a class=lnlinks href=#hl-11-83> 83</a>
</span><span class=lnt id=hl-11-84><a class=lnlinks href=#hl-11-84> 84</a>
</span><span class=lnt id=hl-11-85><a class=lnlinks href=#hl-11-85> 85</a>
</span><span class=lnt id=hl-11-86><a class=lnlinks href=#hl-11-86> 86</a>
</span><span class=lnt id=hl-11-87><a class=lnlinks href=#hl-11-87> 87</a>
</span><span class=lnt id=hl-11-88><a class=lnlinks href=#hl-11-88> 88</a>
</span><span class=lnt id=hl-11-89><a class=lnlinks href=#hl-11-89> 89</a>
</span><span class=lnt id=hl-11-90><a class=lnlinks href=#hl-11-90> 90</a>
</span><span class=lnt id=hl-11-91><a class=lnlinks href=#hl-11-91> 91</a>
</span><span class=lnt id=hl-11-92><a class=lnlinks href=#hl-11-92> 92</a>
</span><span class=lnt id=hl-11-93><a class=lnlinks href=#hl-11-93> 93</a>
</span><span class=lnt id=hl-11-94><a class=lnlinks href=#hl-11-94> 94</a>
</span><span class=lnt id=hl-11-95><a class=lnlinks href=#hl-11-95> 95</a>
</span><span class=lnt id=hl-11-96><a class=lnlinks href=#hl-11-96> 96</a>
</span><span class=lnt id=hl-11-97><a class=lnlinks href=#hl-11-97> 97</a>
</span><span class=lnt id=hl-11-98><a class=lnlinks href=#hl-11-98> 98</a>
</span><span class=lnt id=hl-11-99><a class=lnlinks href=#hl-11-99> 99</a>
</span><span class=lnt id=hl-11-100><a class=lnlinks href=#hl-11-100>100</a>
</span><span class=lnt id=hl-11-101><a class=lnlinks href=#hl-11-101>101</a>
</span><span class=lnt id=hl-11-102><a class=lnlinks href=#hl-11-102>102</a>
</span><span class=lnt id=hl-11-103><a class=lnlinks href=#hl-11-103>103</a>
</span><span class=lnt id=hl-11-104><a class=lnlinks href=#hl-11-104>104</a>
</span><span class=lnt id=hl-11-105><a class=lnlinks href=#hl-11-105>105</a>
</span><span class=lnt id=hl-11-106><a class=lnlinks href=#hl-11-106>106</a>
</span><span class=lnt id=hl-11-107><a class=lnlinks href=#hl-11-107>107</a>
</span><span class=lnt id=hl-11-108><a class=lnlinks href=#hl-11-108>108</a>
</span><span class=lnt id=hl-11-109><a class=lnlinks href=#hl-11-109>109</a>
</span><span class=lnt id=hl-11-110><a class=lnlinks href=#hl-11-110>110</a>
</span><span class=lnt id=hl-11-111><a class=lnlinks href=#hl-11-111>111</a>
</span><span class=lnt id=hl-11-112><a class=lnlinks href=#hl-11-112>112</a>
</span><span class=lnt id=hl-11-113><a class=lnlinks href=#hl-11-113>113</a>
</span><span class=lnt id=hl-11-114><a class=lnlinks href=#hl-11-114>114</a>
</span><span class=lnt id=hl-11-115><a class=lnlinks href=#hl-11-115>115</a>
</span><span class=lnt id=hl-11-116><a class=lnlinks href=#hl-11-116>116</a>
</span><span class=lnt id=hl-11-117><a class=lnlinks href=#hl-11-117>117</a>
</span><span class=lnt id=hl-11-118><a class=lnlinks href=#hl-11-118>118</a>
</span><span class=lnt id=hl-11-119><a class=lnlinks href=#hl-11-119>119</a>
</span><span class=lnt id=hl-11-120><a class=lnlinks href=#hl-11-120>120</a>
</span><span class=lnt id=hl-11-121><a class=lnlinks href=#hl-11-121>121</a>
</span><span class=lnt id=hl-11-122><a class=lnlinks href=#hl-11-122>122</a>
</span><span class=lnt id=hl-11-123><a class=lnlinks href=#hl-11-123>123</a>
</span><span class=lnt id=hl-11-124><a class=lnlinks href=#hl-11-124>124</a>
</span><span class=lnt id=hl-11-125><a class=lnlinks href=#hl-11-125>125</a>
</span><span class=lnt id=hl-11-126><a class=lnlinks href=#hl-11-126>126</a>
</span><span class=lnt id=hl-11-127><a class=lnlinks href=#hl-11-127>127</a>
</span><span class=lnt id=hl-11-128><a class=lnlinks href=#hl-11-128>128</a>
</span><span class=lnt id=hl-11-129><a class=lnlinks href=#hl-11-129>129</a>
</span><span class=lnt id=hl-11-130><a class=lnlinks href=#hl-11-130>130</a>
</span><span class=lnt id=hl-11-131><a class=lnlinks href=#hl-11-131>131</a>
</span><span class=lnt id=hl-11-132><a class=lnlinks href=#hl-11-132>132</a>
</span><span class=lnt id=hl-11-133><a class=lnlinks href=#hl-11-133>133</a>
</span><span class=lnt id=hl-11-134><a class=lnlinks href=#hl-11-134>134</a>
</span><span class=lnt id=hl-11-135><a class=lnlinks href=#hl-11-135>135</a>
</span><span class=lnt id=hl-11-136><a class=lnlinks href=#hl-11-136>136</a>
</span><span class=lnt id=hl-11-137><a class=lnlinks href=#hl-11-137>137</a>
</span><span class=lnt id=hl-11-138><a class=lnlinks href=#hl-11-138>138</a>
</span><span class=lnt id=hl-11-139><a class=lnlinks href=#hl-11-139>139</a>
</span><span class=lnt id=hl-11-140><a class=lnlinks href=#hl-11-140>140</a>
</span><span class=lnt id=hl-11-141><a class=lnlinks href=#hl-11-141>141</a>
</span><span class=lnt id=hl-11-142><a class=lnlinks href=#hl-11-142>142</a>
</span><span class=lnt id=hl-11-143><a class=lnlinks href=#hl-11-143>143</a>
</span><span class=lnt id=hl-11-144><a class=lnlinks href=#hl-11-144>144</a>
</span><span class=lnt id=hl-11-145><a class=lnlinks href=#hl-11-145>145</a>
</span><span class=lnt id=hl-11-146><a class=lnlinks href=#hl-11-146>146</a>
</span><span class=lnt id=hl-11-147><a class=lnlinks href=#hl-11-147>147</a>
</span><span class=lnt id=hl-11-148><a class=lnlinks href=#hl-11-148>148</a>
</span><span class=lnt id=hl-11-149><a class=lnlinks href=#hl-11-149>149</a>
</span><span class=lnt id=hl-11-150><a class=lnlinks href=#hl-11-150>150</a>
</span><span class=lnt id=hl-11-151><a class=lnlinks href=#hl-11-151>151</a>
</span><span class=lnt id=hl-11-152><a class=lnlinks href=#hl-11-152>152</a>
</span><span class=lnt id=hl-11-153><a class=lnlinks href=#hl-11-153>153</a>
</span><span class=lnt id=hl-11-154><a class=lnlinks href=#hl-11-154>154</a>
</span><span class=lnt id=hl-11-155><a class=lnlinks href=#hl-11-155>155</a>
</span><span class=lnt id=hl-11-156><a class=lnlinks href=#hl-11-156>156</a>
</span><span class=lnt id=hl-11-157><a class=lnlinks href=#hl-11-157>157</a>
</span><span class=lnt id=hl-11-158><a class=lnlinks href=#hl-11-158>158</a>
</span><span class=lnt id=hl-11-159><a class=lnlinks href=#hl-11-159>159</a>
</span><span class=lnt id=hl-11-160><a class=lnlinks href=#hl-11-160>160</a>
</span><span class=lnt id=hl-11-161><a class=lnlinks href=#hl-11-161>161</a>
</span><span class=lnt id=hl-11-162><a class=lnlinks href=#hl-11-162>162</a>
</span><span class=lnt id=hl-11-163><a class=lnlinks href=#hl-11-163>163</a>
</span><span class=lnt id=hl-11-164><a class=lnlinks href=#hl-11-164>164</a>
</span><span class=lnt id=hl-11-165><a class=lnlinks href=#hl-11-165>165</a>
</span><span class=lnt id=hl-11-166><a class=lnlinks href=#hl-11-166>166</a>
</span><span class=lnt id=hl-11-167><a class=lnlinks href=#hl-11-167>167</a>
</span><span class=lnt id=hl-11-168><a class=lnlinks href=#hl-11-168>168</a>
</span><span class=lnt id=hl-11-169><a class=lnlinks href=#hl-11-169>169</a>
</span><span class=lnt id=hl-11-170><a class=lnlinks href=#hl-11-170>170</a>
</span><span class=lnt id=hl-11-171><a class=lnlinks href=#hl-11-171>171</a>
</span><span class=lnt id=hl-11-172><a class=lnlinks href=#hl-11-172>172</a>
</span><span class=lnt id=hl-11-173><a class=lnlinks href=#hl-11-173>173</a>
</span><span class=lnt id=hl-11-174><a class=lnlinks href=#hl-11-174>174</a>
</span><span class=lnt id=hl-11-175><a class=lnlinks href=#hl-11-175>175</a>
</span><span class=lnt id=hl-11-176><a class=lnlinks href=#hl-11-176>176</a>
</span><span class=lnt id=hl-11-177><a class=lnlinks href=#hl-11-177>177</a>
</span><span class=lnt id=hl-11-178><a class=lnlinks href=#hl-11-178>178</a>
</span><span class=lnt id=hl-11-179><a class=lnlinks href=#hl-11-179>179</a>
</span><span class=lnt id=hl-11-180><a class=lnlinks href=#hl-11-180>180</a>
</span><span class=lnt id=hl-11-181><a class=lnlinks href=#hl-11-181>181</a>
</span><span class=lnt id=hl-11-182><a class=lnlinks href=#hl-11-182>182</a>
</span><span class=lnt id=hl-11-183><a class=lnlinks href=#hl-11-183>183</a>
</span><span class=lnt id=hl-11-184><a class=lnlinks href=#hl-11-184>184</a>
</span><span class=lnt id=hl-11-185><a class=lnlinks href=#hl-11-185>185</a>
</span><span class=lnt id=hl-11-186><a class=lnlinks href=#hl-11-186>186</a>
</span><span class=lnt id=hl-11-187><a class=lnlinks href=#hl-11-187>187</a>
</span><span class=lnt id=hl-11-188><a class=lnlinks href=#hl-11-188>188</a>
</span><span class=lnt id=hl-11-189><a class=lnlinks href=#hl-11-189>189</a>
</span><span class=lnt id=hl-11-190><a class=lnlinks href=#hl-11-190>190</a>
</span><span class=lnt id=hl-11-191><a class=lnlinks href=#hl-11-191>191</a>
</span><span class=lnt id=hl-11-192><a class=lnlinks href=#hl-11-192>192</a>
</span><span class=lnt id=hl-11-193><a class=lnlinks href=#hl-11-193>193</a>
</span><span class=lnt id=hl-11-194><a class=lnlinks href=#hl-11-194>194</a>
</span><span class=lnt id=hl-11-195><a class=lnlinks href=#hl-11-195>195</a>
</span><span class=lnt id=hl-11-196><a class=lnlinks href=#hl-11-196>196</a>
</span><span class=lnt id=hl-11-197><a class=lnlinks href=#hl-11-197>197</a>
</span><span class=lnt id=hl-11-198><a class=lnlinks href=#hl-11-198>198</a>
</span><span class=lnt id=hl-11-199><a class=lnlinks href=#hl-11-199>199</a>
</span><span class=lnt id=hl-11-200><a class=lnlinks href=#hl-11-200>200</a>
</span><span class=lnt id=hl-11-201><a class=lnlinks href=#hl-11-201>201</a>
</span><span class=lnt id=hl-11-202><a class=lnlinks href=#hl-11-202>202</a>
</span><span class=lnt id=hl-11-203><a class=lnlinks href=#hl-11-203>203</a>
</span><span class=lnt id=hl-11-204><a class=lnlinks href=#hl-11-204>204</a>
</span><span class=lnt id=hl-11-205><a class=lnlinks href=#hl-11-205>205</a>
</span><span class=lnt id=hl-11-206><a class=lnlinks href=#hl-11-206>206</a>
</span><span class=lnt id=hl-11-207><a class=lnlinks href=#hl-11-207>207</a>
</span><span class=lnt id=hl-11-208><a class=lnlinks href=#hl-11-208>208</a>
</span><span class=lnt id=hl-11-209><a class=lnlinks href=#hl-11-209>209</a>
</span><span class=lnt id=hl-11-210><a class=lnlinks href=#hl-11-210>210</a>
</span><span class=lnt id=hl-11-211><a class=lnlinks href=#hl-11-211>211</a>
</span><span class=lnt id=hl-11-212><a class=lnlinks href=#hl-11-212>212</a>
</span><span class=lnt id=hl-11-213><a class=lnlinks href=#hl-11-213>213</a>
</span><span class=lnt id=hl-11-214><a class=lnlinks href=#hl-11-214>214</a>
</span><span class=lnt id=hl-11-215><a class=lnlinks href=#hl-11-215>215</a>
</span><span class=lnt id=hl-11-216><a class=lnlinks href=#hl-11-216>216</a>
</span><span class=lnt id=hl-11-217><a class=lnlinks href=#hl-11-217>217</a>
</span><span class=lnt id=hl-11-218><a class=lnlinks href=#hl-11-218>218</a>
</span><span class=lnt id=hl-11-219><a class=lnlinks href=#hl-11-219>219</a>
</span><span class=lnt id=hl-11-220><a class=lnlinks href=#hl-11-220>220</a>
</span><span class=lnt id=hl-11-221><a class=lnlinks href=#hl-11-221>221</a>
</span><span class=lnt id=hl-11-222><a class=lnlinks href=#hl-11-222>222</a>
</span><span class=lnt id=hl-11-223><a class=lnlinks href=#hl-11-223>223</a>
</span><span class=lnt id=hl-11-224><a class=lnlinks href=#hl-11-224>224</a>
</span><span class=lnt id=hl-11-225><a class=lnlinks href=#hl-11-225>225</a>
</span><span class=lnt id=hl-11-226><a class=lnlinks href=#hl-11-226>226</a>
</span><span class=lnt id=hl-11-227><a class=lnlinks href=#hl-11-227>227</a>
</span><span class=lnt id=hl-11-228><a class=lnlinks href=#hl-11-228>228</a>
</span><span class=lnt id=hl-11-229><a class=lnlinks href=#hl-11-229>229</a>
</span><span class=lnt id=hl-11-230><a class=lnlinks href=#hl-11-230>230</a>
</span><span class=lnt id=hl-11-231><a class=lnlinks href=#hl-11-231>231</a>
</span><span class=lnt id=hl-11-232><a class=lnlinks href=#hl-11-232>232</a>
</span><span class=lnt id=hl-11-233><a class=lnlinks href=#hl-11-233>233</a>
</span><span class=lnt id=hl-11-234><a class=lnlinks href=#hl-11-234>234</a>
</span><span class=lnt id=hl-11-235><a class=lnlinks href=#hl-11-235>235</a>
</span><span class=lnt id=hl-11-236><a class=lnlinks href=#hl-11-236>236</a>
</span><span class=lnt id=hl-11-237><a class=lnlinks href=#hl-11-237>237</a>
</span><span class=lnt id=hl-11-238><a class=lnlinks href=#hl-11-238>238</a>
</span><span class=lnt id=hl-11-239><a class=lnlinks href=#hl-11-239>239</a>
</span><span class=lnt id=hl-11-240><a class=lnlinks href=#hl-11-240>240</a>
</span><span class=lnt id=hl-11-241><a class=lnlinks href=#hl-11-241>241</a>
</span><span class=lnt id=hl-11-242><a class=lnlinks href=#hl-11-242>242</a>
</span><span class=lnt id=hl-11-243><a class=lnlinks href=#hl-11-243>243</a>
</span><span class=lnt id=hl-11-244><a class=lnlinks href=#hl-11-244>244</a>
</span><span class=lnt id=hl-11-245><a class=lnlinks href=#hl-11-245>245</a>
</span><span class=lnt id=hl-11-246><a class=lnlinks href=#hl-11-246>246</a>
</span><span class=lnt id=hl-11-247><a class=lnlinks href=#hl-11-247>247</a>
</span><span class=lnt id=hl-11-248><a class=lnlinks href=#hl-11-248>248</a>
</span><span class=lnt id=hl-11-249><a class=lnlinks href=#hl-11-249>249</a>
</span><span class=lnt id=hl-11-250><a class=lnlinks href=#hl-11-250>250</a>
</span><span class=lnt id=hl-11-251><a class=lnlinks href=#hl-11-251>251</a>
</span><span class=lnt id=hl-11-252><a class=lnlinks href=#hl-11-252>252</a>
</span><span class=lnt id=hl-11-253><a class=lnlinks href=#hl-11-253>253</a>
</span><span class=lnt id=hl-11-254><a class=lnlinks href=#hl-11-254>254</a>
</span><span class=lnt id=hl-11-255><a class=lnlinks href=#hl-11-255>255</a>
</span><span class=lnt id=hl-11-256><a class=lnlinks href=#hl-11-256>256</a>
</span><span class=lnt id=hl-11-257><a class=lnlinks href=#hl-11-257>257</a>
</span><span class=lnt id=hl-11-258><a class=lnlinks href=#hl-11-258>258</a>
</span><span class=lnt id=hl-11-259><a class=lnlinks href=#hl-11-259>259</a>
</span><span class=lnt id=hl-11-260><a class=lnlinks href=#hl-11-260>260</a>
</span><span class=lnt id=hl-11-261><a class=lnlinks href=#hl-11-261>261</a>
</span><span class=lnt id=hl-11-262><a class=lnlinks href=#hl-11-262>262</a>
</span><span class=lnt id=hl-11-263><a class=lnlinks href=#hl-11-263>263</a>
</span><span class=lnt id=hl-11-264><a class=lnlinks href=#hl-11-264>264</a>
</span><span class=lnt id=hl-11-265><a class=lnlinks href=#hl-11-265>265</a>
</span><span class=lnt id=hl-11-266><a class=lnlinks href=#hl-11-266>266</a>
</span><span class=lnt id=hl-11-267><a class=lnlinks href=#hl-11-267>267</a>
</span><span class=lnt id=hl-11-268><a class=lnlinks href=#hl-11-268>268</a>
</span><span class=lnt id=hl-11-269><a class=lnlinks href=#hl-11-269>269</a>
</span><span class=lnt id=hl-11-270><a class=lnlinks href=#hl-11-270>270</a>
</span><span class=lnt id=hl-11-271><a class=lnlinks href=#hl-11-271>271</a>
</span><span class=lnt id=hl-11-272><a class=lnlinks href=#hl-11-272>272</a>
</span><span class=lnt id=hl-11-273><a class=lnlinks href=#hl-11-273>273</a>
</span><span class=lnt id=hl-11-274><a class=lnlinks href=#hl-11-274>274</a>
</span><span class=lnt id=hl-11-275><a class=lnlinks href=#hl-11-275>275</a>
</span><span class=lnt id=hl-11-276><a class=lnlinks href=#hl-11-276>276</a>
</span><span class=lnt id=hl-11-277><a class=lnlinks href=#hl-11-277>277</a>
</span><span class=lnt id=hl-11-278><a class=lnlinks href=#hl-11-278>278</a>
</span><span class=lnt id=hl-11-279><a class=lnlinks href=#hl-11-279>279</a>
</span><span class=lnt id=hl-11-280><a class=lnlinks href=#hl-11-280>280</a>
</span><span class=lnt id=hl-11-281><a class=lnlinks href=#hl-11-281>281</a>
</span><span class=lnt id=hl-11-282><a class=lnlinks href=#hl-11-282>282</a>
</span><span class=lnt id=hl-11-283><a class=lnlinks href=#hl-11-283>283</a>
</span><span class=lnt id=hl-11-284><a class=lnlinks href=#hl-11-284>284</a>
</span><span class=lnt id=hl-11-285><a class=lnlinks href=#hl-11-285>285</a>
</span><span class=lnt id=hl-11-286><a class=lnlinks href=#hl-11-286>286</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>defaultdict</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>queue</span> <span class=kn>import</span> <span class=n>Queue</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>List</span><span class=p>,</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TradingData</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;거래 데이터 클래스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>symbol</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>price</span><span class=p>:</span> <span class=nb>float</span><span class=p>,</span> <span class=n>volume</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>timestamp</span><span class=p>:</span> <span class=nb>float</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>symbol</span> <span class=o>=</span> <span class=n>symbol</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>price</span> <span class=o>=</span> <span class=n>price</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>volume</span> <span class=o>=</span> <span class=n>volume</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>timestamp</span> <span class=o>=</span> <span class=n>timestamp</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Position</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;포지션 데이터 클래스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>symbol</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>quantity</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>avg_price</span><span class=p>:</span> <span class=nb>float</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>symbol</span> <span class=o>=</span> <span class=n>symbol</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>quantity</span> <span class=o>=</span> <span class=n>quantity</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>avg_price</span> <span class=o>=</span> <span class=n>avg_price</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>pnl</span> <span class=o>=</span> <span class=mf>0.0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>InMemoryDataGrid</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Space-Based Architecture의 인메모리 데이터 그리드&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>data</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># 메모리 내 데이터 저장소</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>RLock</span><span class=p>()</span>  <span class=c1># 동시성 제어</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>event_handlers</span> <span class=o>=</span> <span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>  <span class=c1># 이벤트 핸들러</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;데이터 저장 및 이벤트 발생&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>old_value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>            <span class=c1># 데이터 변경 이벤트 발생</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_fire_event</span><span class=p>(</span><span class=s1>&#39;data_changed&#39;</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>old_value</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;데이터 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>register_event_handler</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event_type</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>handler</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;이벤트 핸들러 등록&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>event_handlers</span><span class=p>[</span><span class=n>event_type</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>handler</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_fire_event</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event_type</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;이벤트 발생&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>handler</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>event_handlers</span><span class=p>[</span><span class=n>event_type</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>handler</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Event handler error: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TradingProcessingUnit</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;거래 처리 단위 (Processing Unit)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>symbol</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>data_grid</span><span class=p>:</span> <span class=n>InMemoryDataGrid</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>symbol</span> <span class=o>=</span> <span class=n>symbol</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>data_grid</span> <span class=o>=</span> <span class=n>data_grid</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>positions</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># 포지션 관리</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>market_data_queue</span> <span class=o>=</span> <span class=n>Queue</span><span class=p>()</span>  <span class=c1># 시장 데이터 큐</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>is_running</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>processing_thread</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 시장 데이터 변경 이벤트 핸들러 등록</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>data_grid</span><span class=o>.</span><span class=n>register_event_handler</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;data_changed&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_on_market_data_changed</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>start</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;처리 단위 시작&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_running</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>is_running</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>processing_thread</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_process_market_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>processing_thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Trading PU for </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>symbol</span><span class=si>}</span><span class=s2> started&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>stop</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;처리 단위 중지&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>is_running</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>processing_thread</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>processing_thread</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Trading PU for </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>symbol</span><span class=si>}</span><span class=s2> stopped&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_on_market_data_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>old_value</span><span class=p>:</span> <span class=nb>any</span><span class=p>,</span> <span class=n>new_value</span><span class=p>:</span> <span class=nb>any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;시장 데이터 변경 이벤트 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>key</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;market_data_</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>symbol</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>market_data_queue</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>new_value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_process_market_data</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;시장 데이터 처리 스레드&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_running</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1># 시장 데이터 대기 (타임아웃 설정)</span>
</span></span><span class=line><span class=cl>                <span class=n>market_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>market_data_queue</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1># 거래 알고리즘 실행</span>
</span></span><span class=line><span class=cl>                <span class=n>trading_signal</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_generate_trading_signal</span><span class=p>(</span><span class=n>market_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1># 거래 실행</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>trading_signal</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>_execute_trade</span><span class=p>(</span><span class=n>trading_signal</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1># 포지션 업데이트</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>_update_positions</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_running</span><span class=p>:</span>  <span class=c1># 정상 종료가 아닌 경우만 에러 출력</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Processing error in </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>symbol</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_generate_trading_signal</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>market_data</span><span class=p>:</span> <span class=n>TradingData</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;거래 신호 생성 (간단한 알고리즘 예시)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 현재 포지션 조회</span>
</span></span><span class=line><span class=cl>        <span class=n>current_position</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>positions</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>symbol</span><span class=p>,</span> <span class=n>Position</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>symbol</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 간단한 평균 회귀 전략</span>
</span></span><span class=line><span class=cl>        <span class=n>historical_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>data_grid</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;historical_</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>symbol</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>historical_data</span> <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span><span class=n>historical_data</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>10</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>avg_price</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>data</span><span class=o>.</span><span class=n>price</span> <span class=k>for</span> <span class=n>data</span> <span class=ow>in</span> <span class=n>historical_data</span><span class=p>[</span><span class=o>-</span><span class=mi>10</span><span class=p>:])</span> <span class=o>/</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 현재 가격이 평균보다 5% 이상 낮으면 매수</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>market_data</span><span class=o>.</span><span class=n>price</span> <span class=o>&lt;</span> <span class=n>avg_price</span> <span class=o>*</span> <span class=mf>0.95</span> <span class=ow>and</span> <span class=n>current_position</span><span class=o>.</span><span class=n>quantity</span> <span class=o>&lt;</span> <span class=mi>1000</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;action&#39;</span><span class=p>:</span> <span class=s1>&#39;BUY&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;symbol&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>symbol</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;quantity&#39;</span><span class=p>:</span> <span class=mi>100</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;price&#39;</span><span class=p>:</span> <span class=n>market_data</span><span class=o>.</span><span class=n>price</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 현재 가격이 평균보다 5% 이상 높으면 매도</span>
</span></span><span class=line><span class=cl>            <span class=k>elif</span> <span class=n>market_data</span><span class=o>.</span><span class=n>price</span> <span class=o>&gt;</span> <span class=n>avg_price</span> <span class=o>*</span> <span class=mf>1.05</span> <span class=ow>and</span> <span class=n>current_position</span><span class=o>.</span><span class=n>quantity</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;action&#39;</span><span class=p>:</span> <span class=s1>&#39;SELL&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;symbol&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>symbol</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;quantity&#39;</span><span class=p>:</span> <span class=nb>min</span><span class=p>(</span><span class=mi>100</span><span class=p>,</span> <span class=n>current_position</span><span class=o>.</span><span class=n>quantity</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;price&#39;</span><span class=p>:</span> <span class=n>market_data</span><span class=o>.</span><span class=n>price</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_execute_trade</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>signal</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;거래 실행&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Executing trade: </span><span class=si>{</span><span class=n>signal</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 포지션 업데이트</span>
</span></span><span class=line><span class=cl>        <span class=n>position</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>positions</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>signal</span><span class=p>[</span><span class=s1>&#39;symbol&#39;</span><span class=p>],</span> <span class=n>Position</span><span class=p>(</span><span class=n>signal</span><span class=p>[</span><span class=s1>&#39;symbol&#39;</span><span class=p>],</span> <span class=mi>0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>signal</span><span class=p>[</span><span class=s1>&#39;action&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;BUY&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>new_quantity</span> <span class=o>=</span> <span class=n>position</span><span class=o>.</span><span class=n>quantity</span> <span class=o>+</span> <span class=n>signal</span><span class=p>[</span><span class=s1>&#39;quantity&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>new_avg_price</span> <span class=o>=</span> <span class=p>((</span><span class=n>position</span><span class=o>.</span><span class=n>avg_price</span> <span class=o>*</span> <span class=n>position</span><span class=o>.</span><span class=n>quantity</span><span class=p>)</span> <span class=o>+</span> 
</span></span><span class=line><span class=cl>                           <span class=p>(</span><span class=n>signal</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>]</span> <span class=o>*</span> <span class=n>signal</span><span class=p>[</span><span class=s1>&#39;quantity&#39;</span><span class=p>]))</span> <span class=o>/</span> <span class=n>new_quantity</span>
</span></span><span class=line><span class=cl>            <span class=n>position</span><span class=o>.</span><span class=n>quantity</span> <span class=o>=</span> <span class=n>new_quantity</span>
</span></span><span class=line><span class=cl>            <span class=n>position</span><span class=o>.</span><span class=n>avg_price</span> <span class=o>=</span> <span class=n>new_avg_price</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>signal</span><span class=p>[</span><span class=s1>&#39;action&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;SELL&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>position</span><span class=o>.</span><span class=n>quantity</span> <span class=o>-=</span> <span class=n>signal</span><span class=p>[</span><span class=s1>&#39;quantity&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>position</span><span class=o>.</span><span class=n>quantity</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>position</span><span class=o>.</span><span class=n>quantity</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>positions</span><span class=p>[</span><span class=n>signal</span><span class=p>[</span><span class=s1>&#39;symbol&#39;</span><span class=p>]]</span> <span class=o>=</span> <span class=n>position</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 데이터 그리드에 포지션 업데이트</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>data_grid</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;position_</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>symbol</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>position</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_update_positions</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;포지션 업데이트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>symbol</span><span class=p>,</span> <span class=n>position</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>positions</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=n>current_price</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>data_grid</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;market_data_</span><span class=si>{</span><span class=n>symbol</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>current_price</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>position</span><span class=o>.</span><span class=n>pnl</span> <span class=o>=</span> <span class=p>(</span><span class=n>current_price</span><span class=o>.</span><span class=n>price</span> <span class=o>-</span> <span class=n>position</span><span class=o>.</span><span class=n>avg_price</span><span class=p>)</span> <span class=o>*</span> <span class=n>position</span><span class=o>.</span><span class=n>quantity</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>data_grid</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;position_</span><span class=si>{</span><span class=n>symbol</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>position</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MessageGrid</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;메시지 그리드 - 요청 라우팅 담당&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>processing_units</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># 심볼별 처리 단위 매핑</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>data_grid</span> <span class=o>=</span> <span class=n>InMemoryDataGrid</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>register_processing_unit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>symbol</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>processing_unit</span><span class=p>:</span> <span class=n>TradingProcessingUnit</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;처리 단위 등록&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>processing_units</span><span class=p>[</span><span class=n>symbol</span><span class=p>]</span> <span class=o>=</span> <span class=n>processing_unit</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>route_market_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>market_data</span><span class=p>:</span> <span class=n>TradingData</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;시장 데이터 라우팅&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 데이터 그리드에 시장 데이터 저장</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>data_grid</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;market_data_</span><span class=si>{</span><span class=n>market_data</span><span class=o>.</span><span class=n>symbol</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>market_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 이력 데이터 업데이트</span>
</span></span><span class=line><span class=cl>        <span class=n>historical_key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;historical_</span><span class=si>{</span><span class=n>market_data</span><span class=o>.</span><span class=n>symbol</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>historical_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>data_grid</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>historical_key</span><span class=p>)</span> <span class=ow>or</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=n>historical_data</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>market_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 최근 100개 데이터만 유지</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>historical_data</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>100</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>historical_data</span> <span class=o>=</span> <span class=n>historical_data</span><span class=p>[</span><span class=o>-</span><span class=mi>100</span><span class=p>:]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>data_grid</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>historical_key</span><span class=p>,</span> <span class=n>historical_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SpaceBasedTradingSystem</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Space-Based Architecture 기반 거래 시스템&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>message_grid</span> <span class=o>=</span> <span class=n>MessageGrid</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>processing_units</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>is_running</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>add_trading_symbol</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>symbol</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;거래 심볼 추가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>pu</span> <span class=o>=</span> <span class=n>TradingProcessingUnit</span><span class=p>(</span><span class=n>symbol</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>message_grid</span><span class=o>.</span><span class=n>data_grid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>processing_units</span><span class=p>[</span><span class=n>symbol</span><span class=p>]</span> <span class=o>=</span> <span class=n>pu</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>message_grid</span><span class=o>.</span><span class=n>register_processing_unit</span><span class=p>(</span><span class=n>symbol</span><span class=p>,</span> <span class=n>pu</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>start</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;시스템 시작&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>is_running</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>pu</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>processing_units</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=n>pu</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Space-Based Trading System started&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>stop</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;시스템 중지&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>is_running</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>pu</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>processing_units</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=n>pu</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Space-Based Trading System stopped&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>feed_market_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>symbol</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>price</span><span class=p>:</span> <span class=nb>float</span><span class=p>,</span> <span class=n>volume</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;시장 데이터 피드&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_running</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>market_data</span> <span class=o>=</span> <span class=n>TradingData</span><span class=p>(</span><span class=n>symbol</span><span class=p>,</span> <span class=n>price</span><span class=p>,</span> <span class=n>volume</span><span class=p>,</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>message_grid</span><span class=o>.</span><span class=n>route_market_data</span><span class=p>(</span><span class=n>market_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_positions</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Position</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;모든 포지션 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>positions</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>symbol</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>processing_units</span><span class=o>.</span><span class=n>keys</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=n>position</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>message_grid</span><span class=o>.</span><span class=n>data_grid</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;position_</span><span class=si>{</span><span class=n>symbol</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>position</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>positions</span><span class=p>[</span><span class=n>symbol</span><span class=p>]</span> <span class=o>=</span> <span class=n>position</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>positions</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># Space-Based Trading System 초기화</span>
</span></span><span class=line><span class=cl>    <span class=n>trading_system</span> <span class=o>=</span> <span class=n>SpaceBasedTradingSystem</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 거래 심볼 추가</span>
</span></span><span class=line><span class=cl>    <span class=n>trading_system</span><span class=o>.</span><span class=n>add_trading_symbol</span><span class=p>(</span><span class=s2>&#34;AAPL&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>trading_system</span><span class=o>.</span><span class=n>add_trading_symbol</span><span class=p>(</span><span class=s2>&#34;GOOGL&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>trading_system</span><span class=o>.</span><span class=n>add_trading_symbol</span><span class=p>(</span><span class=s2>&#34;MSFT&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 시스템 시작</span>
</span></span><span class=line><span class=cl>    <span class=n>trading_system</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 시장 데이터 시뮬레이션</span>
</span></span><span class=line><span class=cl>    <span class=kn>import</span> <span class=nn>random</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>symbols</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;AAPL&#34;</span><span class=p>,</span> <span class=s2>&#34;GOOGL&#34;</span><span class=p>,</span> <span class=s2>&#34;MSFT&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>base_prices</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;AAPL&#34;</span><span class=p>:</span> <span class=mf>150.0</span><span class=p>,</span> <span class=s2>&#34;GOOGL&#34;</span><span class=p>:</span> <span class=mf>2500.0</span><span class=p>,</span> <span class=s2>&#34;MSFT&#34;</span><span class=p>:</span> <span class=mf>300.0</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1000</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>symbol</span> <span class=o>=</span> <span class=n>random</span><span class=o>.</span><span class=n>choice</span><span class=p>(</span><span class=n>symbols</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>price_change</span> <span class=o>=</span> <span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span><span class=o>-</span><span class=mf>0.05</span><span class=p>,</span> <span class=mf>0.05</span><span class=p>)</span>  <span class=c1># ±5% 변동</span>
</span></span><span class=line><span class=cl>            <span class=n>new_price</span> <span class=o>=</span> <span class=n>base_prices</span><span class=p>[</span><span class=n>symbol</span><span class=p>]</span> <span class=o>*</span> <span class=p>(</span><span class=mi>1</span> <span class=o>+</span> <span class=n>price_change</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>volume</span> <span class=o>=</span> <span class=n>random</span><span class=o>.</span><span class=n>randint</span><span class=p>(</span><span class=mi>100</span><span class=p>,</span> <span class=mi>1000</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>trading_system</span><span class=o>.</span><span class=n>feed_market_data</span><span class=p>(</span><span class=n>symbol</span><span class=p>,</span> <span class=n>new_price</span><span class=p>,</span> <span class=n>volume</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>base_prices</span><span class=p>[</span><span class=n>symbol</span><span class=p>]</span> <span class=o>=</span> <span class=n>new_price</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 포지션 상태 주기적 출력</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>i</span> <span class=o>%</span> <span class=mi>100</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>positions</span> <span class=o>=</span> <span class=n>trading_system</span><span class=o>.</span><span class=n>get_positions</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>=== Positions at iteration </span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s2> ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>symbol</span><span class=p>,</span> <span class=n>position</span> <span class=ow>in</span> <span class=n>positions</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>symbol</span><span class=si>}</span><span class=s2>: Qty=</span><span class=si>{</span><span class=n>position</span><span class=o>.</span><span class=n>quantity</span><span class=si>}</span><span class=s2>, &#34;</span>
</span></span><span class=line><span class=cl>                          <span class=sa>f</span><span class=s2>&#34;Avg=$</span><span class=si>{</span><span class=n>position</span><span class=o>.</span><span class=n>avg_price</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>, PnL=$</span><span class=si>{</span><span class=n>position</span><span class=o>.</span><span class=n>pnl</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.01</span><span class=p>)</span>  <span class=c1># 10ms 간격</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>KeyboardInterrupt</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>Shutting down…&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>trading_system</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>구현 특징</strong>:</p><ol><li><strong>Processing Unit 분리</strong>: 각 거래 심볼별로 독립적인 처리 단위</li><li><strong>인메모리 데이터 그리드</strong>: 모든 데이터를 메모리에 저장하여 초저지연 달성</li><li><strong>이벤트 기반 처리</strong>: 시장 데이터 변경 시 자동으로 처리 로직 실행</li><li><strong>메시지 그리드</strong>: 데이터 라우팅 및 처리 단위 간 조정</li><li><strong>확장성</strong>: 새로운 심볼 추가 시 독립적인 Processing Unit 생성</li></ol><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>고려 항목</strong></th><th><strong>설명</strong></th><th><strong>권장 방식 / 최적화 전략</strong></th></tr></thead><tbody><tr><td><strong>설계 전략</strong></td><td>PU 구성 전략</td><td>기능 또는 데이터 파티션 단위로 PU 분리 설계→ 독립성 및 장애 격리 가능</td><td>도메인 기반 설계, ID 기반 수평 분산</td></tr><tr><td></td><td>파티셔닝 전략</td><td>트래픽/데이터 특성 기반 분할 방식 선택→ 핫스팟/불균형 방지</td><td>일관 해싱, 범위 기반 파티셔닝, 동적 리밸런싱</td></tr><tr><td></td><td>데이터 모델링</td><td>객체지향 + 문서 기반 데이터 모델링 병행</td><td>Domain 중심 스키마 설계, Query 최적화 고려</td></tr><tr><td><strong>확장성 & 자동화</strong></td><td>PU 오토스케일링</td><td>SLA 기반 자동 확장 정책 수립</td><td>CPU/Memory/Latency 기반 HPA or KEDA 활용</td></tr><tr><td></td><td>배포 전략</td><td>클러스터 기반 롤링 배포 또는 Blue/Green 배포</td><td>Canary 또는 무중단 롤링 배포 전략 적용</td></tr><tr><td></td><td>운영 자동화</td><td>배포, 테스트, 확장 등 반복 작업 자동화</td><td>CI/CD + IaC(Terraform, ArgoCD 등)</td></tr><tr><td><strong>데이터 & 일관성</strong></td><td>영속성 확보</td><td>IMDG 기반 데이터 휘발성 이슈 대응</td><td>WAL, Snapshot, SSD 기반 백업 구조 구성</td></tr><tr><td></td><td>분산 일관성</td><td>실시간 동기화 어려움 해결</td><td>최종 일관성, 이벤트 소싱, CDC, Conflict Resolver 전략 활용</td></tr><tr><td></td><td>복제 전략</td><td>싱글/멀티 미러 구성 시 자원 비용 vs 가용성 고려</td><td>리드 중심 멀티 복제, 쓰기 PU 제한 또는 Write-Master 모델 적용</td></tr><tr><td><strong>관찰성 & 운영 관리</strong></td><td>모니터링 체계</td><td>PU 및 클러스터 상태 실시간 추적 필요</td><td>Prometheus + Grafana + Alertmanager 통합</td></tr><tr><td></td><td>분산 트레이싱</td><td>비동기 이벤트 흐름 가시화 및 디버깅</td><td>OpenTelemetry, Zipkin, Jaeger 연동</td></tr><tr><td></td><td>로그 집계 및 분석</td><td>장애 추적 및 감사 로그 분석</td><td>Loki, Fluent Bit, EFK/ELK Stack</td></tr><tr><td><strong>성능 최적화</strong></td><td>네트워크 최적화</td><td>PU 간 통신 비용 절감, 데이터 지역성 강화</td><td>gRPC, 이중 NIC 구성, 데이터 - 연산 PU 병렬 배치</td></tr><tr><td></td><td>메모리 관리</td><td>대용량 데이터 처리 시 GC 및 압축 필요</td><td>LRU 캐시 정책, 데이터 티어링, 압축 엔진 사용</td></tr><tr><td><strong>장애 대응 & 복구</strong></td><td>장애 감지 및 전환</td><td>PU 장애 시 자동 전환과 상태 복구 필요</td><td>헬스체크 기반 Failover, Leader Election, Retry/Timeout 구성</td></tr><tr><td></td><td>백업 및 복구</td><td>복구 시점 제어 및 데이터 손실 최소화 필요</td><td>증분 백업, Async Snapshot, 스케줄 기반 WAL 아카이브 적용</td></tr><tr><td><strong>보안</strong></td><td>메모리 & 네트워크 보안</td><td>PU 간 통신 및 IMDG 접근 보안</td><td>mTLS, VPN, TLS 적용, In-Memory 암호화 사용</td></tr><tr><td></td><td>인증 및 권한 관리</td><td>PU 별 접근 제어 및 중앙화된 인증 체계 필요</td><td>OAuth2, RBAC, API Key, Token 기반 인증</td></tr></tbody></table><h3 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>최적화 요소</strong></th><th><strong>설명</strong></th><th><strong>권장사항</strong></th></tr></thead><tbody><tr><td><strong>메모리 최적화</strong></td><td>데이터 압축</td><td>메모리 사용량을 줄이기 위한 실시간 압축 처리</td><td>LZ4, Snappy 등 경량 압축 알고리즘 적용</td></tr><tr><td></td><td>가비지 컬렉션</td><td>GC 지연 최소화를 통한 처리 성능 향상</td><td>G1GC, ZGC, 정기적 튜닝 및 메모리 프로파일링</td></tr><tr><td></td><td>복제 전략</td><td>전체 데이터 복제 대신 Hot 영역 중심 복제</td><td>Hot/Cold Tier 적용, 세분화된 파티셔닝</td></tr><tr><td><strong>네트워크 최적화</strong></td><td>배치 처리</td><td>빈번한 네트워크 호출을 줄이기 위한 묶음 처리</td><td>마이크로배치 + 파이프라이닝 구조</td></tr><tr><td></td><td>프로토콜 최적화</td><td>직렬화/역직렬화 효율성 향상</td><td>Protocol Buffers, Avro 사용</td></tr><tr><td></td><td>로컬 우선 처리</td><td>PU 간 통신을 최소화하여 네트워크 부하를 줄임</td><td>로컬 튜플 우선 처리 로직 적용</td></tr><tr><td></td><td>네트워크 병목 방지</td><td>공간 간 네트워크 부하 최소화</td><td>네트워크 구조 개선, QoS 적용, CDN 연계</td></tr><tr><td><strong>처리 최적화</strong></td><td>병렬 처리</td><td>멀티코어 활용 극대화 및 지연 최소화</td><td>워크 스틸링, async/task 기반 비동기 구조</td></tr><tr><td></td><td>캐시 친화 구조</td><td>CPU 캐시 활용 극대화를 위한 데이터 구조 최적화</td><td>캐시 라인 정렬, Prefetching 적용</td></tr><tr><td></td><td>상태 추적</td><td>메시지 처리 상태 관리로 장애 감지 및 복구 용이</td><td>Distributed Tracing (e.g. Jaeger, Zipkin) 도입</td></tr><tr><td><strong>저장소 최적화</strong></td><td>티어링 전략</td><td>자주 사용되는 데이터만 고속 메모리에 저장</td><td>자동화된 Hot/Cold 분류 및 정책 기반 이동</td></tr><tr><td></td><td>인덱싱</td><td>빠른 검색을 위한 인메모리 색인 구조</td><td>블룸 필터, 계층 인덱스, 인메모리 B+ Tree</td></tr><tr><td><strong>확장성 최적화</strong></td><td>자동 스케일링</td><td>부하에 따라 PU 수를 동적으로 조절</td><td>SLA 기반 Auto-scaler, 예측 기반 리소스 관리</td></tr><tr><td></td><td>로드 밸런싱</td><td>요청을 고르게 분산시켜 특정 PU 과부하 방지</td><td>가중치 기반 라우팅, Health Check 기반 우선순위 분산</td></tr><tr><td></td><td>자원 효율화</td><td>공간 단위 리소스 낭비 방지</td><td>공통 인프라 재사용, 리소스 사용률 모니터링</td></tr><tr><td><strong>정합성/일관성 최적화</strong></td><td>데이터 정합성 유지</td><td>분산 환경에서 일관성 보장</td><td>CDC 기반 정합성 보정, 버전 태깅, 벡터 클록 적용</td></tr><tr><td></td><td>Eventually Consistent 접근</td><td>강한 일관성 대신 지연된 동기화 허용</td><td>CQRS, Event Sourcing 기반 처리 모델 적용</td></tr></tbody></table><h3 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>세부 주제</strong></th><th><strong>핵심 항목</strong></th><th><strong>설명 및 중요도</strong></th></tr></thead><tbody><tr><td><strong>1. 아키텍처 구조</strong></td><td>장애 격리 구조</td><td>공간 기반 격리 아키텍처</td><td>PU 간 독립성 확보로 전체 장애 전파 방지 및 빠른 복구 가능</td></tr><tr><td></td><td>데이터 파티셔닝</td><td>해시/범위 기반 분산 전략</td><td>병목 없이 균등한 부하 분산과 수평적 확장성 확보</td></tr><tr><td></td><td>오토스케일링 구조</td><td>SLA 기반 PU 자동 조정</td><td>실시간 부하 기반 탄력적 확장 및 자원 효율화</td></tr><tr><td></td><td>복제 전략</td><td>Master-Slave 또는 Multi-Replica</td><td>고가용성 및 데이터 신뢰성 확보</td></tr><tr><td><strong>2. 성능 최적화</strong></td><td>메모리 최적화</td><td>JVM 튜닝 / GC 최적화</td><td>짧은 응답시간 유지 및 GC Pause 방지</td></tr><tr><td></td><td>네트워크 처리 최적화</td><td>직렬화/역직렬화 방식 개선</td><td>메시지 크기 최소화 및 전송 효율 향상 (예: Protobuf, Avro)</td></tr><tr><td></td><td>캐싱 계층 활용</td><td>인메모리 다층 캐싱 전략</td><td>DB I/O 최소화 및 응답 속도 개선</td></tr><tr><td><strong>3. 데이터 일관성</strong></td><td>일관성 모델</td><td>최종 일관성 or 강한 일관성 선택</td><td>CAP 정리에 따라 시스템 요구사항에 맞는 일관성 모델 선택 필요</td></tr><tr><td></td><td>동기화 기법</td><td>벡터 클록, 타임스탬프 기반 동기화</td><td>데이터 충돌 감지 및 순서 보장</td></tr><tr><td></td><td>충돌 해결</td><td>CRDT 적용 등 Conflict-Free 구조</td><td>분산 환경에서도 일관성 있는 데이터 병합 가능</td></tr><tr><td><strong>4. 가용성 및 복구</strong></td><td>장애 복구 메커니즘</td><td>자동 Failover 및 Health Check</td><td>PU 상태 기반 전환으로 무중단 운영 가능</td></tr><tr><td></td><td>백업 및 영속성 확보</td><td>Snapshot, Checkpoint, WAL</td><td>IMDG 기반 휘발성 데이터에 대한 내구성 확보</td></tr><tr><td><strong>5. 운영 및 모니터링</strong></td><td>모니터링 지표 수집</td><td>Prometheus, Grafana 기반 메트릭 수집</td><td>성능 모니터링, 용량 예측, SLA 추적 가능</td></tr><tr><td></td><td>분산 추적</td><td>OpenTelemetry, Zipkin 연동</td><td>이벤트 흐름과 병목 구간 시각화 및 추적</td></tr><tr><td></td><td>장애 탐지 자동화</td><td>Alert Rule 기반 자동화 체계</td><td>운영 효율성과 빠른 대응 시간 확보</td></tr><tr><td><strong>6. 보안</strong></td><td>암호화 및 보호</td><td>메모리 내 암호화 / 전송 중 암호화</td><td>TLS/mTLS, at-rest/in-transit 보안 강화</td></tr><tr><td></td><td>접근 제어</td><td>RBAC 및 토큰 기반 인증</td><td>PU 및 관리 인터페이스에 대한 정교한 권한 제어 필요</td></tr></tbody></table><h3 id=반드시-학습해야할-내용>반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#반드시-학습해야할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>핵심 항목</strong></th><th><strong>설명 및 학습 포인트</strong></th></tr></thead><tbody><tr><td><strong>기초 이론</strong></td><td>분산 시스템 설계 원칙</td><td>CAP 정리, 합의 알고리즘 (Raft, PBFT 등)</td><td>SBA 는 분산된 공간 간 강한 일관성이 어려우므로 <strong>일관성 - 가용성 트레이드오프</strong> 이해 필수</td></tr><tr><td></td><td>분산 해시 및 노드 배치</td><td>Consistent Hashing</td><td>PU 간 데이터 파티셔닝과 핫스팟 방지의 핵심 전략</td></tr><tr><td></td><td>동시성 제어</td><td>Lock-free 알고리즘, 메시지 기반 동기화</td><td>SBA 는 공유 상태보다 <strong>메시지 기반 비동기 처리</strong>에 최적화된 모델을 지향</td></tr><tr><td></td><td>데이터 구조/공간 개념</td><td>Tuple Space, Linda 모델</td><td>공간 기반의 분산 메시징 구조에 대한 이론적 기반</td></tr><tr><td><strong>아키텍처 및 구현 기술</strong></td><td>이벤트 기반 처리</td><td>Event-Driven Architecture, 비동기 Queue</td><td>SBA 의 PU 간 통신 및 트리거 기반 처리 구조의 핵심</td></tr><tr><td></td><td>인메모리 데이터 관리</td><td>IMDG (Hazelcast, Ignite, XAP 등)</td><td>SBA 의 핵심 저장소로 <strong>고속 처리와 복제</strong> 구조 학습 필수</td></tr><tr><td></td><td>데이터 파티셔닝 및 복제 전략</td><td>해시 파티셔닝, 범위 파티셔닝, 미러링</td><td>고가용성과 확장성을 위한 <strong>PU 간 데이터 분산 및 복제 로직</strong> 학습</td></tr><tr><td></td><td>비동기 I/O & 직렬화</td><td>Netty, Protocol Buffers, Avro 등</td><td>고성능 메시징 구현을 위한 필수 구성 요소</td></tr><tr><td></td><td>GC 및 메모리 최적화</td><td>G1GC, ZGC, Memory Tiering</td><td>인메모리 기반 아키텍처의 성능을 결정짓는 핵심 기술 요소</td></tr><tr><td><strong>플랫폼 및 운영 기술</strong></td><td>클라우드 네이티브 인프라</td><td>Kubernetes, Docker</td><td>SBA 는 PU 를 <strong>컨테이너 단위</strong>로 배포 및 확장하므로 클라우드 오케스트레이션 기술이 필수</td></tr><tr><td></td><td>서비스 메시 및 네트워크 정책</td><td>Istio, Linkerd</td><td>PU 간 통신을 제어하기 위한 <strong>서비스 메시 + 정책 기반 라우팅</strong> 구성</td></tr><tr><td></td><td>SLA 기반 오토스케일링</td><td>HPA, Custom Autoscaler</td><td>PU 의 부하, 지연 시간, 메시지 큐 상태 기반으로 자동 스케일링 적용</td></tr><tr><td></td><td>운영 자동화 및 배포 전략</td><td>CI/CD, GitOps</td><td>SBA 기반 시스템은 지속적인 롤아웃 및 리소스 자동 복구를 요구함</td></tr><tr><td></td><td>관찰성 및 추적 도구</td><td>Prometheus, Grafana, Jaeger, OTel</td><td>PU 간 흐름, 이벤트 추적, 장애 진단을 위한 <strong>분산 트레이싱 및 메트릭 기반 모니터링 체계</strong> 구축 필요</td></tr><tr><td></td><td>보안 아키텍처</td><td>Zero Trust, TLS, 네트워크 분할</td><td>SBA 는 노드 간 직접 통신이 많아 <strong>전송 계층 보안 및 인증 정책</strong> 적용 필수</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>공간 (Space)</td><td>데이터와 프로세스를 저장·관리하는 분산 메모리 그리드</td></tr><tr><td>아키텍처</td><td>프로세싱 유닛 (Processing Unit)</td><td>공간 내에서 비즈니스 로직을 실행하는 독립적 실행 환경</td></tr><tr><td>네트워크</td><td>로드 밸런서 (Load Balancer)</td><td>요청을 여러 공간/프로세싱 유닛으로 분산하는 장치</td></tr><tr><td>데이터</td><td>파티셔닝 (Partitioning)</td><td>데이터를 여러 공간에 분산 저장하는 전략</td></tr><tr><td>데이터</td><td>미러링 (Mirroring)</td><td>장애 대비를 위한 공간 간 데이터 복제</td></tr><tr><td>운영</td><td>관리 콘솔 (Admin Console)</td><td>시스템 모니터링 및 관리 도구</td></tr></tbody></table><h2 id=-용어-정리>📌 용어 정리<a hidden class=anchor aria-hidden=true href=#-용어-정리>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>Tuple Space</td><td>데이터를 공유하는 메모리 공간, SBA 의 핵심 구성</td></tr><tr><td>시스템 구성</td><td>Processing Unit (PU)</td><td>로직, 메모리, 복제가 통합된 실행 단위</td></tr><tr><td>데이터 관리</td><td>Partitioning</td><td>데이터 분할 저장 전략</td></tr><tr><td>데이터 관리</td><td>Replication</td><td>데이터 복제 전략으로 내결함성 확보</td></tr><tr><td>메시징/이벤트</td><td>Event-Driven</td><td>이벤트 기반 비동기 처리 모델</td></tr><tr><td>장애 복구</td><td>Active-Passive</td><td>장애 시 백업 노드가 Primary 로 승격</td></tr><tr><td>운영</td><td>SLA (Service Level Agreement)</td><td>처리 속도, 용량 기준의 서비스 품질 보장</td></tr></tbody></table><h2 id=용어-정리-1>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-1>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>Tuple Space</td><td>분산 시스템에서 프로세스 간 통신을 위한 공유 메모리 공간으로, 데이터를 튜플 형태로 저장하고 패턴 매칭을 통해 접근</td></tr><tr><td>아키텍처</td><td>Processing Unit</td><td>SBA 의 기본 실행 단위로, 애플리케이션 로직과 데이터를 포함하여 독립적으로 확장 가능한 컴포넌트</td></tr><tr><td>아키텍처</td><td>Virtualized Middleware</td><td>메시지 그리드, 데이터 그리드, 처리 그리드 등을 포함하는 가상화된 미들웨어 계층</td></tr><tr><td>데이터</td><td>In-Memory Data Grid</td><td>메모리 내에서 데이터를 저장하고 처리하는 분산 캐싱 시스템으로, 초저지연 데이터 액세스 제공</td></tr><tr><td>데이터</td><td>Data Locality</td><td>데이터와 처리 로직을 동일한 노드에 배치하여 네트워크 지연시간을 최소화하는 기법</td></tr><tr><td>데이터</td><td>Consistent Hashing</td><td>분산 해시 테이블에서 노드 추가/제거 시 데이터 재배치를 최소화하는 해싱 기법</td></tr><tr><td>성능</td><td>Linear Scalability</td><td>노드 수 증가에 비례하여 성능이 향상되는 확장성 특성</td></tr><tr><td>성능</td><td>Microsecond Latency</td><td>마이크로초 단위의 매우 낮은 응답 지연시간</td></tr><tr><td>성능</td><td>Horizontal Scaling</td><td>서버 수를 늘려서 성능을 향상시키는 수평적 확장 방식</td></tr><tr><td>처리</td><td>Event-Driven Processing</td><td>이벤트 발생에 기반하여 비동기적으로 처리하는 프로그래밍 모델</td></tr><tr><td>처리</td><td>MapReduce Pattern</td><td>대용량 데이터를 여러 노드에서 병렬로 처리하는 분산 처리 패턴</td></tr><tr><td>처리</td><td>Asynchronous Replication</td><td>데이터 복제를 비동기적으로 수행하여 성능을 향상시키는 기법</td></tr><tr><td>보안</td><td>Zero Trust Network</td><td>네트워크 내부의 모든 트래픽을 신뢰하지 않고 검증하는 보안 모델</td></tr><tr><td>보안</td><td>RBAC (Role-Based Access Control)</td><td>역할 기반 접근 제어 시스템으로, 사용자의 역할에 따라 권한을 부여</td></tr><tr><td>운영</td><td>Observability</td><td>시스템의 내부 상태를 외부에서 관찰할 수 있는 능력으로, 메트릭, 로그, 트레이스 포함</td></tr><tr><td>운영</td><td>Service Mesh</td><td>마이크로서비스 간 통신을 관리하는 인프라스트럭처 계층</td></tr><tr><td>운영</td><td>Circuit Breaker</td><td>장애가 발생한 서비스에 대한 호출을 차단하여 시스템 안정성을 보장하는 패턴</td></tr><tr><td>클라우드</td><td>Container Orchestration</td><td>컨테이너의 배포, 관리, 확장을 자동화하는 시스템</td></tr><tr><td>클라우드</td><td>Auto Scaling</td><td>시스템 부하에 따라 자동으로 리소스를 조정하는 기능</td></tr><tr><td>클라우드</td><td>Infrastructure as Code</td><td>인프라스트럭처를 코드로 정의하고 관리하는 방법론</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><a href=https://www.oreilly.com/library/view/software-architecture-patterns/9781491971437/ch05.html>Software Architecture Patterns by Mark Richards - O&rsquo;Reilly</a></li><li><a href=https://www.gigaspaces.com/blog/space-based-architecture>Space-Based Architecture Pattern - GigaSpaces</a></li><li><a href=https://docs.gigaspaces.com/latest/overview/space-based-architecture.html>GigaSpaces XAP Documentation</a></li><li><a href=https://en.wikipedia.org/wiki/Space-based_architecture>Space-based architecture - Wikipedia</a></li><li><a href=https://en.wikipedia.org/wiki/Linda_(coordination_language)>Linda coordination language - Wikipedia</a></li><li><a href=https://en.wikipedia.org/wiki/Tuple_space>Tuple space - Wikipedia</a></li><li><a href=https://river.apache.org/doc/specs/html/js-spec.html>JavaSpaces Service Specification</a></li><li><a href=https://medium.com/the-pragmatic-tech-review/understanding-space-based-architecture-15281953c24c>Understanding Space-Based Architecture - Medium</a></li><li><a href=https://www.gigaspaces.com/benchmarks/space-based-architecture-sba-vs-tier-based-implementation>Space-Based Architecture vs Tier-Based Implementation - GigaSpaces</a></li><li><a href=https://link.springer.com/chapter/10.1007/978-3-319-39519-7_4>Tuple spaces implementations and their efficiency - SpringerLink</a></li></ul><h2 id=-참고-및-출처>🔗 참고 및 출처<a hidden class=anchor aria-hidden=true href=#-참고-및-출처>#</a></h2><ul><li><a href=https://docs.gigaspaces.com/latest/overview/space-based-architecture.html>GigaSpaces 공식 문서 – Space-Based Architecture</a></li><li><a href=https://en.wikipedia.org/wiki/Space-based_architecture>Wikipedia – Space-Based Architecture</a></li><li><a href=https://medium.com/the-pragmatic-tech-review/understanding-space-based-architecture-15281953c24c>Medium – Understanding Space-Based Architecture</a></li><li><a href=https://www.techtarget.com/searchapparchitecture/tip/Harnessing-space-based-architecture-for-high-performance>TechTarget – Harnessing SBA for Performance</a></li><li><a href=https://rajatnigam89.medium.com/space-based-architecture-07c89d34b4da>Rajat Nigam – Space-Based Architecture Deep Dive</a></li></ul><h2 id=참고-및-출처-1>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-1>#</a></h2><ul><li><a href=https://www.infoq.com/articles/space-based-architecture/>Space-Based Architecture 개념 및 사례</a></li><li><a href=https://docs.gigaspaces.com/xap/14.5/introduction/space-based-architecture.html>GigaSpaces XAP 공식 문서</a></li><li><a href=https://martinfowler.com/articles/patterns-of-distributed-systems/>분산 시스템 설계 패턴</a></li><li><a href=https://spring.io/projects/spring-data-gigaspaces>Spring Data Space 기반 아키텍처</a></li></ul><h2 id=-참고-및-출처-1>🔗 참고 및 출처<a hidden class=anchor aria-hidden=true href=#-참고-및-출처-1>#</a></h2><ul><li><a href=https://docs.gigaspaces.com/latest/overview/space-based-architecture.html>GigaSpaces 공식 문서 – Space-Based Architecture</a></li><li><a href=https://doc.akka.io/docs/akka/current/>Akka Documentation</a></li><li><a href=https://learn.microsoft.com/en-us/azure/service-fabric/service-fabric-actors-introduction>Microsoft Docs – Actor Model</a></li><li><a href=https://www.infoq.com/articles/actor-model-vs-microservices/>InfoQ – Actor Model vs Microservices</a></li><li><a href=https://medium.com/the-pragmatic-tech-review/understanding-space-based-architecture-15281953c24c>Medium – Space-Based Architecture vs Actor</a></li></ul><hr></div></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2026 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>