<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>DKIM (DomainKeys Identified Mail) | hyunyoun's Blog</title><meta name=keywords content="Networking-Knowledge,Network-Protocols,Application-Layer-Protocols,Email,Security"><meta name=description content="DKIM은 이메일 인증을 위한 중요한 기술로, 이메일이 전송 과정에서 변조되지 않았으며 실제로 발신자가 주장하는 도메인에서 보낸 것임을 확인할 수 있게 해준다.  디지털 서명을 사용하여 이메일의 무결성과 출처를 검증하는 방식으로 작동한다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/networking-and-communication/network-protocols/application-layer/email/security/dkim/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/networking-and-communication/network-protocols/application-layer/email/security/dkim/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/networking-and-communication/network-protocols/application-layer/email/security/dkim/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="DKIM (DomainKeys Identified Mail)"><meta property="og:description" content="DKIM은 이메일 인증을 위한 중요한 기술로, 이메일이 전송 과정에서 변조되지 않았으며 실제로 발신자가 주장하는 도메인에서 보낸 것임을 확인할 수 있게 해준다.  디지털 서명을 사용하여 이메일의 무결성과 출처를 검증하는 방식으로 작동한다."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-14T09:45:00+00:00"><meta property="article:modified_time" content="2024-12-14T09:45:00+00:00"><meta property="article:tag" content="Networking-Knowledge"><meta property="article:tag" content="Network-Protocols"><meta property="article:tag" content="Application-Layer-Protocols"><meta property="article:tag" content="Email"><meta property="article:tag" content="Security"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="DKIM (DomainKeys Identified Mail)"><meta name=twitter:description content="DKIM은 이메일 인증을 위한 중요한 기술로, 이메일이 전송 과정에서 변조되지 않았으며 실제로 발신자가 주장하는 도메인에서 보낸 것임을 확인할 수 있게 해준다.  디지털 서명을 사용하여 이메일의 무결성과 출처를 검증하는 방식으로 작동한다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Computer Science and Engineering","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Networking and Communication","item":"https://buenhyden.github.io/posts/networking-and-communication/"},{"@type":"ListItem","position":3,"name":"Network Protocols","item":""},{"@type":"ListItem","position":4,"name":"Application Layer Protocols","item":""},{"@type":"ListItem","position":5,"name":"Email Protocols","item":""},{"@type":"ListItem","position":6,"name":"Security of Email","item":"https://buenhyden.github.io/posts/networking-and-communication/network-protocols/application-layer/email/security/"},{"@type":"ListItem","position":7,"name":"DKIM (DomainKeys Identified Mail)","item":"https://buenhyden.github.io/posts/networking-and-communication/network-protocols/application-layer/email/security/dkim/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"DKIM (DomainKeys Identified Mail)","name":"DKIM (DomainKeys Identified Mail)","description":"DKIM은 이메일 인증을 위한 중요한 기술로, 이메일이 전송 과정에서 변조되지 않았으며 실제로 발신자가 주장하는 도메인에서 보낸 것임을 확인할 수 있게 해준다.  디지털 서명을 사용하여 이메일의 무결성과 출처를 검증하는 방식으로 작동한다.","keywords":["Networking-Knowledge","Network-Protocols","Application-Layer-Protocols","Email","Security"],"articleBody":"DKIM (DomainKeys Identified Mail) DKIM은 이메일 인증을 위한 중요한 기술로, 이메일이 전송 과정에서 변조되지 않았으며 실제로 발신자가 주장하는 도메인에서 보낸 것임을 확인할 수 있게 해준다.\n디지털 서명을 사용하여 이메일의 무결성과 출처를 검증하는 방식으로 작동한다.\nDKIM은 현대 이메일 인증의 핵심 구성 요소로, 이메일이 전송 과정에서 변조되지 않았으며 실제로 주장하는 도메인에서 왔음을 보장한다. SPF 및 DMARC와 함께 사용할 때, DKIM은 피싱, 스푸핑 및 스팸으로부터 이메일 시스템을 보호하는 강력한 도구이다.\nDKIM을 효과적으로 구현하려면 강력한 암호화 키, 적절한 서명 범위, 안전한 키 관리 및 정기적인 모니터링이 필요하다. 이러한 모범 사례를 따르면 이메일 보안을 강화하고 전달률을 향상시킬 수 있다.\n특히 DKIM은 단독으로도 유용하지만, SPF와 DMARC와 함께 사용할 때 가장 효과적인 이메일 보안 솔루션을 제공한다는 점을 기억하는 것이 중요하다.\nDKIM의 기본 개념 DKIM은 공개키 암호화 기술을 활용하여 이메일에 디지털 서명을 추가한다.\n이 과정은 다음과 같이 진행된다:\n발신 도메인은 비공개키와 공개키 쌍을 생성한다. 비공개키는 발신 메일 서버에 안전하게 보관된다. 공개키는 도메인의 DNS 레코드에 게시된다. 이메일을 보낼 때, 발신 서버는 비공개키를 사용하여 이메일의 특정 부분(헤더 필드 등)에 디지털 서명을 생성한다. 이 서명은 이메일 헤더에 DKIM-Signature로 포함된다. 수신 서버는 발신 도메인의 DNS에서 공개키를 조회하고, 이를 사용하여 서명을 검증한다. DKIM의 중요성 DKIM은 이메일 보안 및 전달성에 여러 가지 중요한 이점을 제공한다:\n이메일 위조 방지: 디지털 서명을 통해 이메일이 실제로 주장하는 도메인에서 왔는지 확인할 수 있다. 이메일 무결성 보장: 이메일이 전송 과정에서 변조되지 않았음을 보장한다. 스팸 필터링 개선: 수신자의 이메일 시스템이 합법적인 이메일과 스팸을 더 정확하게 구분할 수 있게 한다. 도메인 평판 보호: 사이버 범죄자가 여러분의 도메인을 사칭하여 피싱 이메일이나 스팸을 보내는 것을 방지한다. 이메일 전달률 향상: 많은 이메일 제공업체가 DKIM을 확인하므로, 올바른 DKIM 구현은 이메일이 받는 사람의 받은 편지함에 도달할 가능성을 높인다. DKIM 작동 방식 상세 설명 1. 키 생성 및 DNS 설정 DKIM을 구현하는 첫 번째 단계는 비공개키와 공개키 쌍을 생성하는 것입니다:\n비공개키는 발신 메일 서버에 안전하게 저장됩니다. 공개키는 DNS TXT 레코드에 게시됩니다. DNS 레코드는 일반적으로 다음과 같은 형식을 가집니다:\n1 selector._domainkey.yourdomain.com. IN TXT \"v=DKIM1; k=rsa; p=MIGfMA0GCSqGS...\" 여기서:\nselector는 여러 DKIM 키를 구분하기 위한 식별자입니다. _domainkey는 DKIM 레코드임을 나타내는 고정 문자열입니다. yourdomain.com은 여러분의 도메인입니다. v=DKIM1은 사용되는 DKIM 버전을 나타냅니다. k=rsa는 사용되는 암호화 알고리즘입니다. **p=MIGfMA0GCS…**는 인코딩된 공개키입니다. 2. 서명 과정 이메일이 발신 서버에서 전송될 때:\n서버는 이메일의 특정 부분(일반적으로 From, Subject, Date와 같은 헤더 필드와 선택적으로 본문)을 선택합니다. 이 선택된 부분에 대해 해시값을 계산합니다. 비공개키를 사용하여 이 해시값에 디지털 서명을 생성합니다. 서명과 함께 어떤 헤더가 서명되었는지, 어떤 알고리즘이 사용되었는지 등의 메타데이터를 포함하는 DKIM-Signature 헤더를 이메일에 추가합니다. DKIM-Signature 헤더 예시:\n1 2 3 4 5 DKIM-Signature: v=1; a=rsa-sha256; d=example.com; s=selector; c=relaxed/relaxed; q=dns/txt; t=1117574938; x=1118006938; h=from:to:subject:date; bh=MTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTI=; b=dzdVyOfAKCdLXdJOc9G2q8LoXSlEniSbav+yuU4zGeeruD00lszZVoG4ZHRNiYzR 3. 검증 과정 이메일이 수신 서버에 도착하면:\n수신 서버는 DKIM-Signature 헤더에서 도메인(d=)과 선택자(s=)를 추출합니다. DNS 쿼리를 통해 해당 도메인의 공개키를 조회합니다: selector._domainkey.domain.com 서명된 헤더 필드(h=)를 확인하고 동일한 해시 알고리즘(a=)을 사용하여 해시값을 계산합니다. 공개키를 사용하여 DKIM 서명(b=)을 검증합니다. 계산된 해시값과 서명에서 추출된 해시값이 일치하면 검증이 성공합니다. DKIM 구성 요소 상세 설명 DKIM-Signature 헤더 필드 DKIM-Signature 헤더는 여러 태그로 구성되며, 각 태그는 특정 정보를 제공합니다:\nv: 버전 (항상 1) a: 사용된 서명 알고리즘 (예: rsa-sha256) d: 서명하는 도메인 s: 선택자 (DNS에서 공개키를 찾는 데 사용) c: 정규화 알고리즘 (헤더/본문) q: 기본값은 dns/txt t: 서명 타임스탬프 x: 서명 만료 시간 h: 서명된 헤더 필드 목록 bh: 본문 해시 b: 서명 데이터 정규화 (Canonicalization) 이메일은 전송 과정에서 종종 작은 변경(예: 공백 추가/제거, 줄 바꿈 변경)이 발생할 수 있습니다. DKIM은 이러한 변경에도 불구하고 검증이 성공할 수 있도록 정규화 알고리즘을 사용합니다:\nsimple: 엄격한 검증으로, 어떤 변경도 허용하지 않습니다. relaxed: 공백 변경과 같은 사소한 변경을 허용합니다. DKIM 구현 모범 사례 1. 강력한 키 사용 최소 2048비트 RSA 키 사용 (1024비트는 더 이상 안전하지 않음) 정기적인 키 교체 (6-12개월마다) 2. 적절한 서명 범위 중요한 모든 헤더에 서명 (From, To, Subject, Date 등) 필요한 경우 본문에도 서명 3. 선택자 전략 의미 있는 선택자 이름 사용 (예: 날짜, 서비스 이름) 키 교체를 위해 여러 선택자 준비 4. 테스트 및 모니터링 구현 전 철저한 테스트 정기적인 DKIM 서명 유효성 확인 DMARC 보고서를 통한 모니터링 5. 안전한 비공개키 관리 비공개키에 대한 접근 제한 안전한 저장 및 백업 절차 마련 DKIM과 다른 이메일 인증 기술의 연계 DKIM은 단독으로도 유용하지만, 다른 이메일 인증 기술과 함께 사용할 때 가장 효과적입니다:\nSPF (Sender Policy Framework) SPF는 이메일을 보내는 IP 주소를 검증합니다. DKIM은 이메일 내용의 무결성을 검증합니다. 함께 사용하면 발신자 ID와 메시지 내용 모두 보호됩니다. DMARC (Domain-based Message Authentication, Reporting \u0026 Conformance) DMARC는 SPF와 DKIM을 기반으로 정책을 설정합니다. 인증 실패 시 어떤 조치를 취할지 지정합니다 (없음, 격리, 거부). 인증 결과에 대한 보고서를 제공합니다. DKIM + SPF + DMARC는 가장 강력한 이메일 인증 조합입니다. DKIM 구현 예시 Google Workspace (G Suite) 관리자 콘솔에 로그인 앱 \u003e Google Workspace \u003e Gmail \u003e 인증 설정 DKIM 서명 활성화 및 도메인 추가 생성된 DNS 레코드를 도메인 DNS 관리자에 추가 Postfix 메일 서버 OpenDKIM 설치\n1 apt-get install opendkim opendkim-tools 키 생성\n1 opendkim-genkey -d yourdomain.com -s selector Postfix 및 OpenDKIM 구성\n1 2 # /etc/opendkim.conf 설정 # /etc/postfix/main.cf 수정 DNS 레코드 추가\n1 selector._domainkey.yourdomain.com. IN TXT \"v=DKIM1; k=rsa; p=MIGfMA0GCSqGS...\" DKIM 문제 해결 일반적인 문제 및 해결 방법 서명 검증 실패\nDNS 레코드가 올바르게 설정되었는지 확인 비공개키와 공개키가 일치하는지 확인 정규화 설정 확인 DNS 문제\nTXT 레코드 형식 확인 DNS 전파 지연 고려 (최대 48시간) 레코드 길이 제한 준수 (일부 DNS 제공업체는 긴 TXT 레코드를 분할해야 함) 이메일 수정 문제\n중간 서버가 이메일을 수정하는지 확인 필요한 경우 relaxed 정규화 사용 DKIM 테스트 도구 DKIM 구현을 확인하기 위한 여러 도구가 있습니다:\nMXToolbox DKIM Lookup\nhttps://mxtoolbox.com/dkim.aspx DNS에 게시된 DKIM 레코드 확인 DKIM 검사기\n이메일을 검사 주소로 보내 DKIM 서명 유효성 확인 많은 이메일 서비스 제공업체가 이러한 도구 제공 명령줄 도구\n1 opendkim-testkey -d yourdomain.com -s selector -k private.key DKIM의 미래 DKIM은 계속 발전하고 있으며, 다음과 같은 동향이 있습니다:\n암호화 알고리즘 강화\n약한 RSA 키에서 더 강력한 알고리즘으로 전환 ED25519와 같은 새로운 알고리즘 도입 BIMI(Brand Indicators for Message Identification)\nDKIM 및 DMARC와 함께 작동 인증된 이메일에 브랜드 로고 표시 자동화된 키 관리\n키 생성, 교체 및 배포 프로세스 자동화 클라우드 기반 키 관리 서비스 용어 정리 용어 설명 참고 및 출처 ","wordCount":"962","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2024-12-14T09:45:00Z","dateModified":"2024-12-14T09:45:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/networking-and-communication/network-protocols/application-layer/email/security/dkim/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>Computer Science and Engineering</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/networking-and-communication/>Networking and Communication</a>&nbsp;»&nbsp;<a href>Network Protocols</a>&nbsp;»&nbsp;<a href>Application Layer Protocols</a>&nbsp;»&nbsp;<a href>Email Protocols</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/networking-and-communication/network-protocols/application-layer/email/security/>Security of Email</a></div><h1 class="post-title entry-hint-parent">DKIM (DomainKeys Identified Mail)</h1><div class=post-description>DKIM은 이메일 인증을 위한 중요한 기술로, 이메일이 전송 과정에서 변조되지 않았으며 실제로 발신자가 주장하는 도메인에서 보낸 것임을 확인할 수 있게 해준다. 디지털 서명을 사용하여 이메일의 무결성과 출처를 검증하는 방식으로 작동한다.</div><div class=post-meta><span title='2024-12-14 09:45:00 +0000 UTC'>December 14, 2024</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Networking%20and%20Communication/Network%20Protocols/Application%20Layer/Email/Security/dkim.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#dkim-domainkeys-identified-mail>DKIM (DomainKeys Identified Mail)</a><ul><li><a href=#dkim의-기본-개념>DKIM의 기본 개념</a></li><li><a href=#dkim의-중요성>DKIM의 중요성</a></li><li><a href=#dkim-작동-방식-상세-설명>DKIM 작동 방식 상세 설명</a></li><li><a href=#dkim-구성-요소-상세-설명>DKIM 구성 요소 상세 설명</a></li><li><a href=#dkim-구현-모범-사례>DKIM 구현 모범 사례</a></li><li><a href=#dkim과-다른-이메일-인증-기술의-연계>DKIM과 다른 이메일 인증 기술의 연계</a></li><li><a href=#dkim-구현-예시>DKIM 구현 예시</a></li><li><a href=#dkim-문제-해결>DKIM 문제 해결</a></li><li><a href=#dkim-테스트-도구>DKIM 테스트 도구</a></li><li><a href=#dkim의-미래>DKIM의 미래</a></li></ul></li><li><a href=#용어-정리>용어 정리</a></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=dkim-domainkeys-identified-mail>DKIM (DomainKeys Identified Mail)<a hidden class=anchor aria-hidden=true href=#dkim-domainkeys-identified-mail>#</a></h2><p>DKIM은 이메일 인증을 위한 중요한 기술로, 이메일이 전송 과정에서 변조되지 않았으며 실제로 발신자가 주장하는 도메인에서 보낸 것임을 확인할 수 있게 해준다.<br>디지털 서명을 사용하여 이메일의 무결성과 출처를 검증하는 방식으로 작동한다.</p><p>DKIM은 현대 이메일 인증의 핵심 구성 요소로, 이메일이 전송 과정에서 변조되지 않았으며 실제로 주장하는 도메인에서 왔음을 보장한다.
SPF 및 DMARC와 함께 사용할 때, DKIM은 피싱, 스푸핑 및 스팸으로부터 이메일 시스템을 보호하는 강력한 도구이다.</p><p>DKIM을 효과적으로 구현하려면 강력한 암호화 키, 적절한 서명 범위, 안전한 키 관리 및 정기적인 모니터링이 필요하다. 이러한 모범 사례를 따르면 이메일 보안을 강화하고 전달률을 향상시킬 수 있다.</p><p>특히 DKIM은 단독으로도 유용하지만, SPF와 DMARC와 함께 사용할 때 가장 효과적인 이메일 보안 솔루션을 제공한다는 점을 기억하는 것이 중요하다.</p><h3 id=dkim의-기본-개념>DKIM의 기본 개념<a hidden class=anchor aria-hidden=true href=#dkim의-기본-개념>#</a></h3><p>DKIM은 공개키 암호화 기술을 활용하여 이메일에 디지털 서명을 추가한다.</p><p>이 과정은 다음과 같이 진행된다:</p><ol><li>발신 도메인은 비공개키와 공개키 쌍을 생성한다.</li><li>비공개키는 발신 메일 서버에 안전하게 보관된다.</li><li>공개키는 도메인의 DNS 레코드에 게시된다.</li><li>이메일을 보낼 때, 발신 서버는 비공개키를 사용하여 이메일의 특정 부분(헤더 필드 등)에 디지털 서명을 생성한다.</li><li>이 서명은 이메일 헤더에 DKIM-Signature로 포함된다.</li><li>수신 서버는 발신 도메인의 DNS에서 공개키를 조회하고, 이를 사용하여 서명을 검증한다.</li></ol><h3 id=dkim의-중요성>DKIM의 중요성<a hidden class=anchor aria-hidden=true href=#dkim의-중요성>#</a></h3><p>DKIM은 이메일 보안 및 전달성에 여러 가지 중요한 이점을 제공한다:</p><ol><li><strong>이메일 위조 방지</strong>: 디지털 서명을 통해 이메일이 실제로 주장하는 도메인에서 왔는지 확인할 수 있다.</li><li><strong>이메일 무결성 보장</strong>: 이메일이 전송 과정에서 변조되지 않았음을 보장한다.</li><li><strong>스팸 필터링 개선</strong>: 수신자의 이메일 시스템이 합법적인 이메일과 스팸을 더 정확하게 구분할 수 있게 한다.</li><li><strong>도메인 평판 보호</strong>: 사이버 범죄자가 여러분의 도메인을 사칭하여 피싱 이메일이나 스팸을 보내는 것을 방지한다.</li><li><strong>이메일 전달률 향상</strong>: 많은 이메일 제공업체가 DKIM을 확인하므로, 올바른 DKIM 구현은 이메일이 받는 사람의 받은 편지함에 도달할 가능성을 높인다.</li></ol><h3 id=dkim-작동-방식-상세-설명>DKIM 작동 방식 상세 설명<a hidden class=anchor aria-hidden=true href=#dkim-작동-방식-상세-설명>#</a></h3><h4 id=1-키-생성-및-dns-설정>1. 키 생성 및 DNS 설정<a hidden class=anchor aria-hidden=true href=#1-키-생성-및-dns-설정>#</a></h4><p>DKIM을 구현하는 첫 번째 단계는 비공개키와 공개키 쌍을 생성하는 것입니다:</p><ul><li><strong>비공개키</strong>는 발신 메일 서버에 안전하게 저장됩니다.</li><li><strong>공개키</strong>는 DNS TXT 레코드에 게시됩니다.</li></ul><p>DNS 레코드는 일반적으로 다음과 같은 형식을 가집니다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>selector._domainkey.yourdomain.com. IN TXT &#34;v=DKIM1; k=rsa; p=MIGfMA0GCSqGS...&#34;
</span></span></code></pre></td></tr></table></div></div><p>여기서:</p><ul><li><strong>selector</strong>는 여러 DKIM 키를 구분하기 위한 식별자입니다.</li><li><strong>_domainkey</strong>는 DKIM 레코드임을 나타내는 고정 문자열입니다.</li><li><strong>yourdomain.com</strong>은 여러분의 도메인입니다.</li><li><strong>v=DKIM1</strong>은 사용되는 DKIM 버전을 나타냅니다.</li><li><strong>k=rsa</strong>는 사용되는 암호화 알고리즘입니다.</li><li>**p=MIGfMA0GCS&mldr;**는 인코딩된 공개키입니다.</li></ul><h4 id=2-서명-과정>2. 서명 과정<a hidden class=anchor aria-hidden=true href=#2-서명-과정>#</a></h4><p>이메일이 발신 서버에서 전송될 때:</p><ol><li>서버는 이메일의 특정 부분(일반적으로 From, Subject, Date와 같은 헤더 필드와 선택적으로 본문)을 선택합니다.</li><li>이 선택된 부분에 대해 해시값을 계산합니다.</li><li>비공개키를 사용하여 이 해시값에 디지털 서명을 생성합니다.</li><li>서명과 함께 어떤 헤더가 서명되었는지, 어떤 알고리즘이 사용되었는지 등의 메타데이터를 포함하는 DKIM-Signature 헤더를 이메일에 추가합니다.</li></ol><p>DKIM-Signature 헤더 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>DKIM-Signature: v=1; a=rsa-sha256; d=example.com; s=selector;
</span></span><span class=line><span class=cl>  c=relaxed/relaxed; q=dns/txt; t=1117574938; x=1118006938;
</span></span><span class=line><span class=cl>  h=from:to:subject:date;
</span></span><span class=line><span class=cl>  bh=MTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTI=;
</span></span><span class=line><span class=cl>  b=dzdVyOfAKCdLXdJOc9G2q8LoXSlEniSbav+yuU4zGeeruD00lszZVoG4ZHRNiYzR
</span></span></code></pre></td></tr></table></div></div><h4 id=3-검증-과정>3. 검증 과정<a hidden class=anchor aria-hidden=true href=#3-검증-과정>#</a></h4><p>이메일이 수신 서버에 도착하면:</p><ol><li>수신 서버는 DKIM-Signature 헤더에서 도메인(d=)과 선택자(s=)를 추출합니다.</li><li>DNS 쿼리를 통해 해당 도메인의 공개키를 조회합니다: <code>selector._domainkey.domain.com</code></li><li>서명된 헤더 필드(h=)를 확인하고 동일한 해시 알고리즘(a=)을 사용하여 해시값을 계산합니다.</li><li>공개키를 사용하여 DKIM 서명(b=)을 검증합니다.</li><li>계산된 해시값과 서명에서 추출된 해시값이 일치하면 검증이 성공합니다.</li></ol><h3 id=dkim-구성-요소-상세-설명>DKIM 구성 요소 상세 설명<a hidden class=anchor aria-hidden=true href=#dkim-구성-요소-상세-설명>#</a></h3><h4 id=dkim-signature-헤더-필드>DKIM-Signature 헤더 필드<a hidden class=anchor aria-hidden=true href=#dkim-signature-헤더-필드>#</a></h4><p>DKIM-Signature 헤더는 여러 태그로 구성되며, 각 태그는 특정 정보를 제공합니다:</p><ul><li><strong>v</strong>: 버전 (항상 1)</li><li><strong>a</strong>: 사용된 서명 알고리즘 (예: rsa-sha256)</li><li><strong>d</strong>: 서명하는 도메인</li><li><strong>s</strong>: 선택자 (DNS에서 공개키를 찾는 데 사용)</li><li><strong>c</strong>: 정규화 알고리즘 (헤더/본문)</li><li><strong>q</strong>: 기본값은 dns/txt</li><li><strong>t</strong>: 서명 타임스탬프</li><li><strong>x</strong>: 서명 만료 시간</li><li><strong>h</strong>: 서명된 헤더 필드 목록</li><li><strong>bh</strong>: 본문 해시</li><li><strong>b</strong>: 서명 데이터</li></ul><h4 id=정규화-canonicalization>정규화 (Canonicalization)<a hidden class=anchor aria-hidden=true href=#정규화-canonicalization>#</a></h4><p>이메일은 전송 과정에서 종종 작은 변경(예: 공백 추가/제거, 줄 바꿈 변경)이 발생할 수 있습니다. DKIM은 이러한 변경에도 불구하고 검증이 성공할 수 있도록 정규화 알고리즘을 사용합니다:</p><ul><li><strong>simple</strong>: 엄격한 검증으로, 어떤 변경도 허용하지 않습니다.</li><li><strong>relaxed</strong>: 공백 변경과 같은 사소한 변경을 허용합니다.</li></ul><h3 id=dkim-구현-모범-사례>DKIM 구현 모범 사례<a hidden class=anchor aria-hidden=true href=#dkim-구현-모범-사례>#</a></h3><h4 id=1-강력한-키-사용>1. 강력한 키 사용<a hidden class=anchor aria-hidden=true href=#1-강력한-키-사용>#</a></h4><ul><li>최소 2048비트 RSA 키 사용 (1024비트는 더 이상 안전하지 않음)</li><li>정기적인 키 교체 (6-12개월마다)</li></ul><h4 id=2-적절한-서명-범위>2. 적절한 서명 범위<a hidden class=anchor aria-hidden=true href=#2-적절한-서명-범위>#</a></h4><ul><li>중요한 모든 헤더에 서명 (From, To, Subject, Date 등)</li><li>필요한 경우 본문에도 서명</li></ul><h4 id=3-선택자-전략>3. 선택자 전략<a hidden class=anchor aria-hidden=true href=#3-선택자-전략>#</a></h4><ul><li>의미 있는 선택자 이름 사용 (예: 날짜, 서비스 이름)</li><li>키 교체를 위해 여러 선택자 준비</li></ul><h4 id=4-테스트-및-모니터링>4. 테스트 및 모니터링<a hidden class=anchor aria-hidden=true href=#4-테스트-및-모니터링>#</a></h4><ul><li>구현 전 철저한 테스트</li><li>정기적인 DKIM 서명 유효성 확인</li><li>DMARC 보고서를 통한 모니터링</li></ul><h4 id=5-안전한-비공개키-관리>5. 안전한 비공개키 관리<a hidden class=anchor aria-hidden=true href=#5-안전한-비공개키-관리>#</a></h4><ul><li>비공개키에 대한 접근 제한</li><li>안전한 저장 및 백업 절차 마련</li></ul><h3 id=dkim과-다른-이메일-인증-기술의-연계>DKIM과 다른 이메일 인증 기술의 연계<a hidden class=anchor aria-hidden=true href=#dkim과-다른-이메일-인증-기술의-연계>#</a></h3><p>DKIM은 단독으로도 유용하지만, 다른 이메일 인증 기술과 함께 사용할 때 가장 효과적입니다:</p><h4 id=spf-sender-policy-framework>SPF (Sender Policy Framework)<a hidden class=anchor aria-hidden=true href=#spf-sender-policy-framework>#</a></h4><ul><li>SPF는 이메일을 보내는 IP 주소를 검증합니다.</li><li>DKIM은 이메일 내용의 무결성을 검증합니다.</li><li>함께 사용하면 발신자 ID와 메시지 내용 모두 보호됩니다.</li></ul><h4 id=dmarc-domain-based-message-authentication-reporting--conformance>DMARC (Domain-based Message Authentication, Reporting & Conformance)<a hidden class=anchor aria-hidden=true href=#dmarc-domain-based-message-authentication-reporting--conformance>#</a></h4><ul><li>DMARC는 SPF와 DKIM을 기반으로 정책을 설정합니다.</li><li>인증 실패 시 어떤 조치를 취할지 지정합니다 (없음, 격리, 거부).</li><li>인증 결과에 대한 보고서를 제공합니다.</li><li>DKIM + SPF + DMARC는 가장 강력한 이메일 인증 조합입니다.</li></ul><h3 id=dkim-구현-예시>DKIM 구현 예시<a hidden class=anchor aria-hidden=true href=#dkim-구현-예시>#</a></h3><h4 id=google-workspace-g-suite>Google Workspace (G Suite)<a hidden class=anchor aria-hidden=true href=#google-workspace-g-suite>#</a></h4><ol><li>관리자 콘솔에 로그인</li><li>앱 > Google Workspace > Gmail > 인증 설정</li><li>DKIM 서명 활성화 및 도메인 추가</li><li>생성된 DNS 레코드를 도메인 DNS 관리자에 추가</li></ol><h4 id=postfix-메일-서버>Postfix 메일 서버<a hidden class=anchor aria-hidden=true href=#postfix-메일-서버>#</a></h4><ol><li><p>OpenDKIM 설치</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>apt</span><span class=o>-</span><span class=n>get</span> <span class=n>install</span> <span class=n>opendkim</span> <span class=n>opendkim</span><span class=o>-</span><span class=n>tools</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>키 생성</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>opendkim-genkey -d yourdomain.com -s selector
</span></span></code></pre></td></tr></table></div></div></li><li><p>Postfix 및 OpenDKIM 구성</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># /etc/opendkim.conf 설정
</span></span><span class=line><span class=cl># /etc/postfix/main.cf 수정
</span></span></code></pre></td></tr></table></div></div></li><li><p>DNS 레코드 추가</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>selector._domainkey.yourdomain.com. IN TXT &#34;v=DKIM1; k=rsa; p=MIGfMA0GCSqGS...&#34;
</span></span></code></pre></td></tr></table></div></div></li></ol><h3 id=dkim-문제-해결>DKIM 문제 해결<a hidden class=anchor aria-hidden=true href=#dkim-문제-해결>#</a></h3><h4 id=일반적인-문제-및-해결-방법>일반적인 문제 및 해결 방법<a hidden class=anchor aria-hidden=true href=#일반적인-문제-및-해결-방법>#</a></h4><ol><li><p><strong>서명 검증 실패</strong></p><ul><li>DNS 레코드가 올바르게 설정되었는지 확인</li><li>비공개키와 공개키가 일치하는지 확인</li><li>정규화 설정 확인</li></ul></li><li><p><strong>DNS 문제</strong></p><ul><li>TXT 레코드 형식 확인</li><li>DNS 전파 지연 고려 (최대 48시간)</li><li>레코드 길이 제한 준수 (일부 DNS 제공업체는 긴 TXT 레코드를 분할해야 함)</li></ul></li><li><p><strong>이메일 수정 문제</strong></p><ul><li>중간 서버가 이메일을 수정하는지 확인</li><li>필요한 경우 relaxed 정규화 사용</li></ul></li></ol><h3 id=dkim-테스트-도구>DKIM 테스트 도구<a hidden class=anchor aria-hidden=true href=#dkim-테스트-도구>#</a></h3><p>DKIM 구현을 확인하기 위한 여러 도구가 있습니다:</p><ol><li><p><strong>MXToolbox DKIM Lookup</strong></p><ul><li><a href=https://mxtoolbox.com/dkim.aspx>https://mxtoolbox.com/dkim.aspx</a></li><li>DNS에 게시된 DKIM 레코드 확인</li></ul></li><li><p><strong>DKIM 검사기</strong></p><ul><li>이메일을 검사 주소로 보내 DKIM 서명 유효성 확인</li><li>많은 이메일 서비스 제공업체가 이러한 도구 제공</li></ul></li><li><p><strong>명령줄 도구</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>opendkim-testkey -d yourdomain.com -s selector -k private.key
</span></span></code></pre></td></tr></table></div></div></li></ol><h3 id=dkim의-미래>DKIM의 미래<a hidden class=anchor aria-hidden=true href=#dkim의-미래>#</a></h3><p>DKIM은 계속 발전하고 있으며, 다음과 같은 동향이 있습니다:</p><ol><li><p><strong>암호화 알고리즘 강화</strong></p><ul><li>약한 RSA 키에서 더 강력한 알고리즘으로 전환</li><li>ED25519와 같은 새로운 알고리즘 도입</li></ul></li><li><p><strong>BIMI(Brand Indicators for Message Identification)</strong></p><ul><li>DKIM 및 DMARC와 함께 작동</li><li>인증된 이메일에 브랜드 로고 표시</li></ul></li><li><p><strong>자동화된 키 관리</strong></p><ul><li>키 생성, 교체 및 배포 프로세스 자동화</li><li>클라우드 기반 키 관리 서비스</li></ul></li></ol><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/networking-knowledge/>Networking-Knowledge</a></li><li><a href=https://buenhyden.github.io/tags/network-protocols/>Network-Protocols</a></li><li><a href=https://buenhyden.github.io/tags/application-layer-protocols/>Application-Layer-Protocols</a></li><li><a href=https://buenhyden.github.io/tags/email/>Email</a></li><li><a href=https://buenhyden.github.io/tags/security/>Security</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/software-development/api-development-and-implementation/api-styles/resource-oriented/rest/error-handling/rfc-7807/><span class=title>« Prev</span><br><span>RFC 7807</span>
</a><a class=next href=https://buenhyden.github.io/posts/networking-and-communication/network-protocols/application-layer/email/security/dmarc/><span class=title>Next »</span><br><span>DMARC (Domain-based Message Authentication, Reporting, and Conformance)</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>