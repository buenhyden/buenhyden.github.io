<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>SDU(Service Data Unit, 서비스 데이터 단위) | hyunyoun's Blog</title><meta name=keywords content="Networking-and-Protocols,Network-Fundamentals,Basic-Concepts,Data-Transmission,PDU,SDU,osi-model,payload"><meta name=description content="SDU(Service Data Unit)는 네트워크 계층 구조에서 상위 계층이 하위 계층에 전달하는 데이터 단위로, 각 계층은 이 SDU를 수신해 헤더를 덧붙여 PDU(Protocol Data Unit)로 변환하여 전송한다. 이 과정은 데이터 전송 효율 및 신뢰성을 높이며, OSI 모델 등 다양한 네트워크 아키텍처에서 핵심적인 역할을 한다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/networking--protocols/network-fundamentals/basic-concepts/data-transmission/pdu/sdu/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.d522c866f0cc9c20ae4fa73a0a8c07f0af4c36af75bcbcd3e90558446f681077.css integrity="sha256-1SLIZvDMnCCuT6c6CowH8K9MNq91vLzT6QVYRG9oEHc=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/networking--protocols/network-fundamentals/basic-concepts/data-transmission/pdu/sdu/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/networking--protocols/network-fundamentals/basic-concepts/data-transmission/pdu/sdu/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/networking--protocols/network-fundamentals/basic-concepts/data-transmission/pdu/sdu/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="SDU(Service Data Unit, 서비스 데이터 단위)"><meta property="og:description" content="SDU(Service Data Unit)는 네트워크 계층 구조에서 상위 계층이 하위 계층에 전달하는 데이터 단위로, 각 계층은 이 SDU를 수신해 헤더를 덧붙여 PDU(Protocol Data Unit)로 변환하여 전송한다. 이 과정은 데이터 전송 효율 및 신뢰성을 높이며, OSI 모델 등 다양한 네트워크 아키텍처에서 핵심적인 역할을 한다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="SDU(Service Data Unit, 서비스 데이터 단위)"><meta name=twitter:description content="SDU(Service Data Unit)는 네트워크 계층 구조에서 상위 계층이 하위 계층에 전달하는 데이터 단위로, 각 계층은 이 SDU를 수신해 헤더를 덧붙여 PDU(Protocol Data Unit)로 변환하여 전송한다. 이 과정은 데이터 전송 효율 및 신뢰성을 높이며, OSI 모델 등 다양한 네트워크 아키텍처에서 핵심적인 역할을 한다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"HY's Blog","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":7,"name":"SDU(Service Data Unit, 서비스 데이터 단위)","item":"https://buenhyden.github.io/posts/networking--protocols/network-fundamentals/basic-concepts/data-transmission/pdu/sdu/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>HY's Blog</a></div><h1>SDU(Service Data Unit, 서비스 데이터 단위)</h1><div class=post-description>SDU(Service Data Unit)는 네트워크 계층 구조에서 상위 계층이 하위 계층에 전달하는 데이터 단위로, 각 계층은 이 SDU를 수신해 헤더를 덧붙여 PDU(Protocol Data Unit)로 변환하여 전송한다. 이 과정은 데이터 전송 효율 및 신뢰성을 높이며, OSI 모델 등 다양한 네트워크 아키텍처에서 핵심적인 역할을 한다.</div></header><div class=post-content><h2 id=sduservice-data-unit-서비스-데이터-단위>SDU(Service Data Unit, 서비스 데이터 단위)<a hidden class=anchor aria-hidden=true href=#sduservice-data-unit-서비스-데이터-단위>#</a></h2><p>SDU(Service Data Unit) 는 ISO/IEC 7498-1 에 정의된 OSI 참조 모델의 핵심 개념으로, 계층화된 네트워크 아키텍처에서 인접 계층 간 서비스 전달의 기본 단위를 나타낸다. 각 계층 (N-layer) 은 상위 계층 (N+1) 으로부터 N-SDU 를 받아 자신의 프로토콜 제어 정보 (PCI) 를 추가하여 N-PDU 를 생성하고, 이를 하위 계층 (N-1) 에 N-1-SDU 로 전달한다.</p><p>SDU 의 핵심은 계층 간 서비스 인터페이스의 명확한 분리다. 각 계층은 상위 계층에게 서비스를 제공하는 서비스 제공자 (service provider) 역할을 하며, 하위 계층의 서비스를 사용하는 서비스 사용자 (service user) 역할을 동시에 수행한다. 이러한 계층별 역할 분리는 프로토콜 독립성과 모듈화를 가능하게 한다.</p><p>SDU 와 PDU 의 구별은 네트워크 프로토콜 이해의 시작점이다. N-SDU 는 N 계층이 제공하는 서비스의 페이로드이며, N-PDU 는 N 계층의 프로토콜 헤더가 추가된 완전한 프로토콜 메시지다. 예를 들어, 전송 계층의 관점에서 애플리케이션 데이터는 T-SDU 이며, 이에 TCP/UDP 헤더가 추가되면 T-PDU(세그먼트/데이터그램) 가 된다. 이 T-PDU 는 다시 네트워크 계층에 N-SDU 로 전달된다.</p><h2 id=기본-개념과-배경>기본 개념과 배경<a hidden class=anchor aria-hidden=true href=#기본-개념과-배경>#</a></h2><p>이 섹션은 SDU 의 공식 정의, 주요 특성, 역사적 발전, 해결 문제, 흔한 오해, 필수 용어를 다루며 개념적 출발점을 정렬한다.</p><h3 id=정의-definition>정의 (Definition)<a hidden class=anchor aria-hidden=true href=#정의-definition>#</a></h3><p><strong>SDU(Service Data Unit, 서비스 데이터 단위)</strong> 는 OSI 참조 모델에서 특정 계층 (N) 이 상위 인접 계층 (N+1) 으로부터 받아서 처리해야 할 데이터 단위를 의미한다. 각 계층은 상위에서 전달받은 SDU 를 자신만의 헤더를 추가하여 PDU 로 변환 후 하위 계층으로 전송한다.<br>ISO/IEC 7498-1 표준에서는 SDU 를 " 서비스 사용자가 서비스 제공자에게 전달하는 정보의 단위이며, 서비스 제공자가 투명하게 (transparently) 전달해야 하는 데이터 " 로 정의한다.</p><p>각 계층은 자신만의 SDU 를 가지며, 계층 번호 N 을 접두사로 붙여 N-SDU 로 표기한다.<br>예시:</p><ul><li>L7-SDU (Application Layer SDU): 응용 계층 데이터</li><li>L4-SDU (Transport Layer SDU): 전송 계층이 세션 계층으로부터 받는 데이터</li><li>L3-SDU (Network Layer SDU): 네트워크 계층이 전송 계층으로부터 받는 데이터</li><li>L2-SDU (Data Link Layer SDU): 데이터 링크 계층이 네트워크 계층으로부터 받는 데이터</li></ul><h3 id=특징-characteristics>특징 (Characteristics)<a hidden class=anchor aria-hidden=true href=#특징-characteristics>#</a></h3><p>SDU 는 각 계층이 하위 계층에 전달하는 실제 데이터이며, PDU 의 페이로드 역할을 한다. 데이터는 계층마다 캡슐화·분할·조합되어 전달된다.</p><p>SDU 의 주요 특징:</p><ol><li><strong>투명성 (Transparency)</strong>: SDU 는 서비스 제공 계층에서 내용이 해석되거나 수정되지 않고 그대로 전달되어야 한다. 각 계층은 SDU 를 불투명한 (opaque) 데이터로 취급한다.</li><li><strong>서비스 경계 (Service Boundary)</strong>: SDU 는 계층 간 서비스 인터페이스의 경계를 정의한다. 서비스 액세스 포인트 (SAP, Service Access Point) 를 통해 전달된다.</li><li><strong>크기 가변성</strong>: SDU 의 크기는 상위 계층이 결정하며, 하위 계층은 이를 수용해야 한다. 단, 하위 계층의 MTU(Maximum Transmission Unit) 제약으로 인해 분할 (segmentation) 또는 단편화 (fragmentation) 가 발생할 수 있다.</li><li><strong>계층 독립성</strong>: 각 계층의 SDU 는 다른 계층의 구현이나 프로토콜과 독립적이다. 이는 프로토콜 스택의 모듈화를 가능하게 한다.</li></ol><p><strong>구별점</strong>:</p><ul><li><strong>SDU vs PDU</strong>: SDU 는 서비스 단위, PDU 는 프로토콜 단위. N-PDU = N-PCI + N-SDU</li><li><strong>SDU vs ICI</strong>: ICI(Interface Control Information) 는 계층 간 제어 정보, SDU 는 실제 페이로드</li></ul><h3 id=등장-배경-background>등장 배경 (Background)<a hidden class=anchor aria-hidden=true href=#등장-배경-background>#</a></h3><p>SDU 개념은 1970 년대 후반 ISO(International Organization for Standardization) 가 OSI 참조 모델을 개발하면서 체계화되었다. 이전의 네트워크 시스템들은 계층 간 경계가 불명확하여 프로토콜 간 상호운용성과 독립적 개발이 어려웠다.</p><p><strong>역사적 맥락</strong>:</p><ul><li><strong>1977-1984</strong>: ISO 는 이기종 시스템 간 통신을 위한 표준화된 참조 모델 필요성을 인식</li><li><strong>1978</strong>: Hubert Zimmermann 이 OSI 7 계층 모델의 초기 설계 제안</li><li><strong>1984</strong>: ISO 7498 표준으로 OSI 참조 모델 공식 발표, SDU/PDU 개념 정립</li><li><strong>1994</strong>: ISO/IEC 7498-1 개정판에서 SDU 정의 정교화</li></ul><p><strong>발전 과정</strong>:<br>초기에는 단순히 " 계층 간 데이터 " 로만 인식되었으나, 점차 서비스 추상화 (service abstraction) 와 캡슐화 (encapsulation) 원칙의 핵심으로 자리잡았다.<br>TCP/IP 프로토콜 스위트의 실용적 성공으로 인해 OSI 모델의 엄격한 계층 구조는 완전히 구현되지 않았지만, SDU/PDU 개념은 네트워크 교육과 프로토콜 설계의 기본 원리로 남아있다.</p><h3 id=해결하려는-문제-problem>해결하려는 문제 (Problem)<a hidden class=anchor aria-hidden=true href=#해결하려는-문제-problem>#</a></h3><p>SDU/PDU 개념 도입 이전, 각 계층간 데이터 인계 방식이 모호하여 네트워크 오류, 성능 저하, 문제 진단이 어려웠다.<br>이를 계층별로 명확히 분리함으로써 트러블슈팅, 데이터 추적, 성능 개선, 혼선 방지에 도움을 제공한다.</p><p><strong>SDU 개념 도입 효과</strong></p><table><thead><tr><th>문제 영역</th><th>Before (부재 시)</th><th>After (적용 시)</th></tr></thead><tbody><tr><td>인터페이스 명확성</td><td>계층 간 인터페이스가 임의적이고 불명확</td><td>명확한 서비스 경계와 책임 분리</td></tr><tr><td>변경 영향 범위</td><td>프로토콜 변경 시 인접 계층까지 영향</td><td>프로토콜 독립성으로 계층별 독립 개발</td></tr><tr><td>복잡성 관리</td><td>서비스와 프로토콜의 혼재로 인한 복잡성</td><td>서비스 추상화로 구현 세부 은폐</td></tr><tr><td>결합도/재사용성</td><td>계층 간 의존성↑ → 낮은 재사용성</td><td>계층 간 계약 (contract) 명시화로 재사용성↑</td></tr><tr><td>상호운용성/검증</td><td>상호운용성 검증의 어려움</td><td>표준화된 인터페이스로 상호운용성 확보·검증 용이</td></tr></tbody></table><p><strong>구체적 문제 해결 예시</strong>:</p><table><thead><tr><th>문제 영역</th><th>Before</th><th>After (SDU 적용)</th></tr></thead><tbody><tr><td>프로토콜 교체</td><td>전체 스택 재설계 필요</td><td>해당 계층만 수정</td></tr><tr><td>디버깅</td><td>경계 불명확으로 어려움</td><td>SAP 기준 명확한 추적</td></tr><tr><td>성능 최적화</td><td>계층 간 간섭 발생</td><td>독립적 최적화 가능</td></tr><tr><td>표준 준수</td><td>해석의 모호성</td><td>명확한 규격 기준</td></tr></tbody></table><h3 id=흔한-오해-misconceptions>흔한 오해 (Misconceptions)<a hidden class=anchor aria-hidden=true href=#흔한-오해-misconceptions>#</a></h3><h4 id=오해-1-sdu-와-pdu-는-같은-개념이다>오해 1: SDU 와 PDU 는 같은 개념이다<a hidden class=anchor aria-hidden=true href=#오해-1-sdu-와-pdu-는-같은-개념이다>#</a></h4><p><strong>오해</strong>: SDU 와 PDU 를 동의어로 사용하거나, 단순히 " 데이터 단위 " 로만 이해한다.<br><strong>원인</strong>:</p><ul><li>두 용어 모두 &ldquo;Data Unit&rdquo; 을 포함하여 혼동</li><li>일부 교육 자료에서 구별 없이 사용</li><li>실무에서 PDU 용어가 더 자주 사용됨</li></ul><p><strong>반례</strong>:</p><ul><li>SDU 는 상위 계층이 넘겨주는 &rsquo; 순수 데이터 &lsquo;, PDU 는 해당 계층이 직접 정의·생성하는 전용 데이터 단위 (헤더·트레일러 포함) 다.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>상황: 웹 브라우저가 HTTP 요청을 전송
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>L7 (Application):
</span></span><span class=line><span class=cl>  HTTP Request (100 bytes) 
</span></span><span class=line><span class=cl>  → L7-SDU (100 bytes) for Transport Layer
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>L4 (Transport):
</span></span><span class=line><span class=cl>  받은 L4-SDU (100 bytes) + TCP Header (20 bytes)
</span></span><span class=line><span class=cl>  → L4-PDU (TCP Segment, 120 bytes)
</span></span><span class=line><span class=cl>  → L4-PDU는 동시에 L3-SDU가 됨
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>L3 (Network):
</span></span><span class=line><span class=cl>  받은 L3-SDU (120 bytes) + IP Header (20 bytes)
</span></span><span class=line><span class=cl>  → L3-PDU (IP Packet, 140 bytes)
</span></span></code></pre></td></tr></table></div></div><p><strong>올바른 개념</strong>:</p><ul><li><strong>N-SDU</strong>: N 계층이 <strong>받는</strong> 서비스 데이터 (상위 계층의 PDU)</li><li><strong>N-PDU</strong>: N 계층이 <strong>생성하는</strong> 프로토콜 데이터 (N-PCI + N-SDU)</li><li><strong>관계</strong>: N-PDU = N-PCI + N-SDU, 그리고 N-PDU 는 (N-1)-SDU 가 됨<br>각 계층의 SDU 가 다음 계층에서 헤더·트레일러 등 제어 정보를 추가해 PDU 로 변환된다는 점을 명확히 인지해야 한다.</li></ul><h4 id=오해-2-sdu-는-항상-단일-pdu-로-매핑된다>오해 2: SDU 는 항상 단일 PDU 로 매핑된다<a hidden class=anchor aria-hidden=true href=#오해-2-sdu-는-항상-단일-pdu-로-매핑된다>#</a></h4><p><strong>오해</strong>: 하나의 SDU 는 항상 하나의 PDU 가 된다고 생각한다.</p><p><strong>원인</strong>:</p><ul><li>단순화된 교육 자료의 1:1 매핑 예시</li><li>MTU/MSS 개념의 미이해</li><li>실제 프로토콜의 복잡성 간과</li></ul><p><strong>반례</strong>:</p><ol><li><p><strong>Segmentation (분할)</strong>:</p><ul><li>큰 L4-SDU (10,000 bytes) → 여러 개의 L3-PDU 로 분할</li><li>TCP 에서 큰 애플리케이션 데이터를 MSS 크기로 분할</li></ul></li><li><p><strong>Fragmentation (단편화)</strong>:</p><ul><li>L3 에서 큰 IP 패킷이 작은 MTU 링크를 만나면 단편화</li><li>하나의 L3-PDU 가 여러 개의 L2-SDU 로 나뉨</li></ul></li><li><p><strong>Concatenation (연결)</strong>:</p><ul><li>작은 여러 SDU 를 하나의 PDU 로 결합 (효율성)</li><li>ATM 에서 여러 AAL5 SDU 를 하나의 셀 그룹으로 결합</li></ul></li></ol><p><strong>올바른 개념</strong>: SDU 와 PDU 의 매핑은 <strong>M:N 관계</strong>이며, 계층의 세그멘테이션/리어셈블리 메커니즘에 따라 결정된다.</p><h4 id=오해-3-모든-pdu-는--패킷--이다>오해 3: 모든 PDU 는 &rsquo; 패킷 &rsquo; 이다<a hidden class=anchor aria-hidden=true href=#오해-3-모든-pdu-는--패킷--이다>#</a></h4><p><strong>오해</strong>: &rsquo; 패킷 &rsquo; 이라는 용어를 모든 계층의 PDU 에 적용해도 무방하다.<br><strong>원인</strong>: 교육이나 실무에서 데이터 단위를 일괄적으로 &rsquo; 패킷 &rsquo; 으로 지칭하는 관례.<br><strong>반례</strong>: 네트워크 계층만 &rsquo; 패킷 &lsquo;, 전송 계층은 &rsquo; 세그먼트 &lsquo;, 데이터링크 계층은 &rsquo; 프레임 &lsquo;, 물리 계층은 &rsquo; 비트 &rsquo; 등 각기 구분 필요.<br><strong>올바른 개념</strong>: 각 계층별 데이터 단위 (PDU) 의 명칭을 정확히 사용하여 문제 분석·트러블슈팅의 정확도를 높인다.</p><h4 id=오해-4-모든-계층이-명시적-sdupdu-를-가진다>오해 4: 모든 계층이 명시적 SDU/PDU 를 가진다<a hidden class=anchor aria-hidden=true href=#오해-4-모든-계층이-명시적-sdupdu-를-가진다>#</a></h4><p><strong>오해</strong>: OSI 7 계층 모든 레벨에서 SDU/PDU 가 명확히 구분된다.<br><strong>원인</strong>:</p><ul><li>이론적 OSI 모델과 실제 구현 (TCP/IP) 의 차이</li><li>계층 융합 (layer blending) 현상</li><li>응용 계층의 다양성</li></ul><p><strong>반례</strong>:</p><ul><li><strong>Physical Layer</strong>: 비트 스트림으로 작동하여 명시적 SDU 개념이 약함</li><li><strong>Application Layer</strong>: HTTP, SMTP 등 각 프로토콜마다 데이터 단위가 상이</li><li><strong>TCP/IP 모델</strong>: OSI 의 상위 3 계층 (Session, Presentation, Application) 이 단일 Application Layer 로 통합</li></ul><p><strong>올바른 개념</strong>: SDU/PDU 는 <strong>계층 간 인터페이스</strong>를 이해하기 위한 <strong>개념적 모델</strong>이며, 실제 구현은 프로토콜마다 다르다. 중요한 것은 " 서비스 경계 " 와 " 캡슐화 원칙 " 의 이해다.</p><h3 id=핵심-개념-정의용어-정합>핵심 개념 정의·용어 정합<a hidden class=anchor aria-hidden=true href=#핵심-개념-정의용어-정합>#</a></h3><p><strong>사전 지식 (Prerequisites)</strong>:</p><ul><li>OSI 7 계층 참조 모델 기본 이해</li><li>프로토콜과 서비스의 차이</li><li>캡슐화 (Encapsulation) 개념</li></ul><p><strong>핵심 용어 관계도</strong>:</p><pre class=mermaid>graph TD
    A[상위 계층 N+1] --&gt;|N-SDU 전달| B[계층 N]
    B --&gt;|N-PCI 추가| C[N-PDU 생성]
    C --&gt;|N-1 SDU로 전달| D[하위 계층 N-1]
    
    E[Service] -.제공.-&gt; B
    F[Protocol] -.사용.-&gt; B
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style D fill:#e1f5ff
    style C fill:#ffe1e1
</pre><p>계층 N 은 상위 계층 (N+1) 으로부터 N-SDU 를 서비스 인터페이스를 통해 받는다.<br>계층 N 은 자신의 프로토콜 제어 정보 (N-PCI, 헤더/트레일러) 를 N-SDU 에 추가하여 N-PDU 를 생성한다.<br>이 N-PDU 는 하위 계층 (N-1) 에게 (N-1)-SDU 로 전달된다. 각<br>계층은 상위에 서비스를 제공하고, 하위의 서비스를 사용하는 이중 역할을 수행한다.</p><p><strong>핵심 용어 비교표</strong>:</p><table><thead><tr><th>용어</th><th>정의</th><th>역할</th><th>예시 (TCP/IP)</th></tr></thead><tbody><tr><td><strong>SDU</strong></td><td>서비스 데이터 단위</td><td>계층 간 페이로드</td><td>HTTP 요청 → TCP 의 SDU</td></tr><tr><td><strong>PDU</strong></td><td>프로토콜 데이터 단위</td><td>헤더 포함 완전 메시지</td><td>TCP 세그먼트 (헤더 + 데이터)</td></tr><tr><td><strong>PCI</strong></td><td>프로토콜 제어 정보</td><td>프로토콜 헤더/트레일러</td><td>TCP 헤더 (20 bytes)</td></tr><tr><td><strong>SAP</strong></td><td>서비스 액세스 포인트</td><td>계층 간 인터페이스</td><td>Port 번호 (TCP/UDP)</td></tr><tr><td><strong>ICI</strong></td><td>인터페이스 제어 정보</td><td>서비스 요청 파라미터</td><td>우선순위, QoS 플래그</td></tr></tbody></table><p><strong>요약 표: 계층별 SDU→PDU 명칭 대응</strong></p><table><thead><tr><th>계층/도메인</th><th>상위가 내리는 SDU</th><th>하위/동일 계층 PDU 명칭</th></tr></thead><tbody><tr><td>OSI L3(네트워크)</td><td><strong>NSDU</strong></td><td><strong>NPDU</strong>(패킷)</td></tr><tr><td>OSI L2(데이터링크)</td><td><strong>DL‑SDU</strong></td><td><strong>DL‑PDU</strong>(프레임)</td></tr><tr><td>IEEE 802.11 MAC</td><td><strong>MSDU</strong></td><td><strong>MPDU</strong>, <strong>A‑MPDU</strong>(집계)</td></tr><tr><td>3GPP RLC</td><td><strong>RLC‑SDU</strong></td><td><strong>RLC‑PDU</strong>(UM/AM/TM)</td></tr><tr><td>3GPP PDCP</td><td><strong>PDCP‑SDU</strong></td><td><strong>PDCP‑PDU</strong></td></tr><tr><td>ATM AAL5</td><td><strong>AAL5‑SDU</strong></td><td><strong>AAL5‑PDU</strong></td></tr><tr><td>6LoWPAN</td><td><strong>IPv6 SDU</strong></td><td><strong>LoWPAN PDU</strong>(fragment 가능)</td></tr></tbody></table><h2 id=프로토콜-구조-및-계층의-역할>프로토콜 구조 및 계층의 역할<a hidden class=anchor aria-hidden=true href=#프로토콜-구조-및-계층의-역할>#</a></h2><p>SDU 가 어떻게 각 계층 간에 전달되고 처리되는지, 네트워크 구조에 따라 구체적으로 캡슐화되는 과정을 설명한다.</p><h3 id=핵심-개념-요약>핵심 개념 요약<a hidden class=anchor aria-hidden=true href=#핵심-개념-요약>#</a></h3><ul><li><strong>SDU (Service Data Unit)</strong>: (N+1) 계층이 <strong>N 계층에 전달하는 의미 보존 데이터 단위</strong>. 캡슐화의 " 입력 &ldquo;.</li><li><strong>PDU (Protocol Data Unit)</strong>: N 계층이 SDU 에 **PCI(헤더/트레일러)**를 부가해 만든 <strong>전송 단위</strong>.</li><li><strong>관찰 포인트</strong><ul><li><strong>세그멘테이션</strong>: 주로 <strong>전송계층 (L4)</strong> 이 SDU(바이트 스트림) 를 <strong>MSS</strong>에 맞춰 <strong>여러 세그먼트</strong>로 나눔.</li><li><strong>단편화 (프래그먼트)</strong>: <strong>네트워크계층 (L3)</strong> 이 <strong>MTU</strong>를 넘는 IP 패킷을 <strong>조각</strong>으로 나눔 (IPv4 라우터/호스트 가능, IPv6 라우터 불가).</li><li><strong>현실 세계</strong>: OSI L5/L6 는 <strong>독립 구현이 드뭄</strong>. 표현 (Presentation) 기능은 <strong>TLS/코덱/직렬화</strong> 등이 맡고, 세션 (Session) 은 <strong>애플리케이션/프레임워크</strong>가 담당하는 경우가 일반적.</li></ul></li></ul><h3 id=osi-7-계층에서의-sdu>OSI 7 계층에서의 SDU<a hidden class=anchor aria-hidden=true href=#osi-7-계층에서의-sdu>#</a></h3><p>각 OSI 계층마다 상위 계층이 전달한 SDU 는 하위 계층에서 헤더/트레일러를 덧붙여 PDU 로 변환되며, 이 과정에서 캡슐화 (Encapsulation) 가 반복된다.<br>PDU 최대 크기 (MTU) 를 넘으면 분할되어 <strong>다수 PDU</strong>로 전송 후 수신 측에서 재조립된다.<br>이 과정에서 오류/혼잡/재전송 정책은 <strong>해당 계층의 PDU 단위</strong>로 적용되며 SDU 의미는 보존된다.<br>물리 계층에서는 최종적으로 비트스트림으로 전송되어 모든 제어 정보가 해체된다.</p><h4 id=계층별-sdu-특성>계층별 SDU 특성<a hidden class=anchor aria-hidden=true href=#계층별-sdu-특성>#</a></h4><table><thead><tr><th>계층</th><th>이 계층이 <strong>받는 SDU</strong> (상위→하위)</th><th>이 계층이 <strong>생성하는 PDU</strong></th><th>일반 크기/제약</th><th>대표 프로토콜·데이터</th><th>실무 비고</th></tr></thead><tbody><tr><td>L7 응용</td><td>응용 메시지/객체 (예: HTTP 메시지, RPC 호출)</td><td><strong>APDU</strong> 또는 응용 메시지</td><td>응용 정의 (수 B ~ MB+)</td><td>HTTP, DNS, gRPC, SMTP</td><td>L5/L6 기능을 자체 포함하는 경우 많음</td></tr><tr><td>L6 표현</td><td>L7 APDU/메시지</td><td><strong>PPDU</strong></td><td>가변 (인코딩/암복호 영향)</td><td>ASN, XDR, <em>역할상 TLS</em></td><td>엄밀히 TLS 는 L4.5~L7 사이지만 <strong>표현 기능</strong>(암·무결성) 수행</td></tr><tr><td>L5 세션</td><td>L6 PPDU</td><td><strong>SPDU</strong></td><td>가변</td><td>NetBIOS Session, RPC</td><td>현대 TCP/IP 에선 <strong>분리 구현 드묾</strong></td></tr><tr><td>L4 전송</td><td>L7 데이터 바이트 스트림</td><td><strong>TCP Segment / UDP Datagram / SCTP PDU</strong></td><td>TCP MSS 기준 (예: 1460 IPv4, 1440 IPv6)</td><td>TCP, UDP, SCTP</td><td><strong>세그멘테이션</strong>/흐름/혼잡/재전송</td></tr><tr><td>L3 네트워크</td><td>L4 PDU</td><td><strong>IP Packet</strong></td><td>Path MTU(IPv6 ≥1280)</td><td>IPv4/IPv6, ICMP, IPsec</td><td>IPv4: 라우터/호스트 단편화, IPv6: <strong>라우터 단편화 금지</strong></td></tr><tr><td>L2 데이터링크</td><td>L3 Packet</td><td><strong>Frame</strong></td><td>이더넷 IP MTU 1500(프레임 1518: H14+F4)</td><td>Ethernet, 802.11, PPP</td><td>VLAN(+4)·QinQ(+8)·무선 오버헤드 고려</td></tr><tr><td>L1 물리</td><td>L2 Frame(비트열)</td><td>심볼/비트 스트림</td><td>라인 코딩·대역폭 제약</td><td>전기/광/무선 신호</td><td>SDU 개념 <strong>미약</strong>(비트 전송)</td></tr></tbody></table><blockquote><p>주의: 표의 &ldquo;MTU 1500&rdquo; 은 <strong>IP MTU</strong>(L3 페이로드 상한) 를 의미. 이더넷 <strong>프레임 전체</strong>는 헤더 14B + FCS 4B 가 더해져 <strong>1518B</strong>(프리앰블/IFG 제외).</p></blockquote><h4 id=sdupdu-명칭-매핑>SDU/PDU 명칭 매핑<a hidden class=anchor aria-hidden=true href=#sdupdu-명칭-매핑>#</a></h4><table><thead><tr><th>OSI 계층</th><th>이 계층의 <strong>SDU 명칭</strong></th><th>이 계층의 <strong>PDU 명칭 (OSI)</strong></th><th>TCP/IP 현실 용어 (주요 예)</th><th>주요 기능</th></tr></thead><tbody><tr><td>L7 응용</td><td>데이터/메시지</td><td><strong>APDU</strong></td><td>HTTP 메시지, RPC 메시지, DNS 질의/응답</td><td>응용 로직, 포맷</td></tr><tr><td>L6 표현</td><td>L7 APDU</td><td><strong>PPDU</strong></td><td>직렬화 (ASN, JSON), 압축, <strong>TLS 레코드</strong>*</td><td>표현/암·무결성</td></tr><tr><td>L5 세션</td><td>L6 PPDU</td><td><strong>SPDU</strong></td><td>(대부분 응용/프레임워크 내부)</td><td>세션 관리/동기화</td></tr><tr><td>L4 전송</td><td>L7 데이터</td><td><strong>세그먼트/데이터그램</strong></td><td>TCP 세그먼트 / UDP 데이터그램</td><td>신뢰/흐름/혼잡 제어</td></tr><tr><td>L3 네트워크</td><td>L4 PDU</td><td><strong>패킷</strong></td><td>IPv4/IPv6 패킷</td><td>라우팅/주소</td></tr><tr><td>L2 데이터링크</td><td>L3 패킷</td><td><strong>프레임</strong></td><td>이더넷/802.11/PPP 프레임</td><td>프레이밍/MAC</td></tr><tr><td>L1 물리</td><td>L2 프레임 (비트열)</td><td>비트/심볼</td><td>전송 비트스트림</td><td>매체 신호</td></tr></tbody></table><ul><li>TLS 는 엄밀히 OSI 계층에 정확히 대응하지 않지만, <strong>표현 계층 역할</strong>(암호화·무결성·레코드화) 을 수행하므로 현업 관용상 L6 성격으로 설명하는 경우가 많다.</li></ul><h3 id=캡슐화역캡슐화>캡슐화·역캡슐화<a hidden class=anchor aria-hidden=true href=#캡슐화역캡슐화>#</a></h3><p>SDU 가 계층을 통과하며 PDU 로 변환되고 다시 SDU 로 추출되는 과정을 설명한다.<br>각 OSI 계층마다 상위 계층이 전달한 SDU 는 하위 계층에서 헤더/트레일러를 덧붙여 PDU 로 변환되며, 이 과정에서 캡슐화 (Encapsulation) 가 반복된다.</p><p><strong>캡슐화</strong>: N 계층은 (N+1)-SDU 를 받아 **N-PCI(헤더/트레일러)**를 붙여 <strong>N-PDU</strong> 생성 → (N-1) 계층에 <strong>(N-1)-SDU</strong>로 넘김.</p><ul><li><strong>캡슐화 (Encapsulation) 과정</strong>:<ol><li><strong>서비스 요청</strong>: 상위 계층 (N+1) 이 N 계층에 데이터 전송 요청</li><li><strong>SDU 수신</strong>: N 계층이 N-SDU 를 SAP 을 통해 수신</li><li><strong>PCI 추가</strong>: N 계층이 자신의 프로토콜 헤더 (N-PCI) 를 SDU 에 추가</li><li><strong>PDU 생성</strong>: N-PCI + N-SDU = N-PDU</li><li><strong>하위 전달</strong>: N-PDU 를 하위 계층 (N-1) 에 (N-1)-SDU 로 전달</li></ol></li></ul><p><strong>역캡슐화</strong>: 수신 측에서 각 계층이 <strong>자신의 헤더만 해석/제거</strong>하여 상위 SDU 를 복원.</p><ul><li><strong>계층 독립성</strong>: 각 계층은 <strong>자신의 헤더만</strong> 이해하고 <strong>상위 SDU 내용은 불투명</strong>하게 취급 (투명성 원칙).</li><li><strong>오프로딩 주의</strong>: TSO/GSO/GRO 가 켜져 있어도 <strong>온와이어 크기</strong>는 MTU 를 준수 (NIC 가 물리 전송 전에 분할).</li><li><strong>역캡슐화 (De-encapsulation) 과정</strong>:<ol><li><strong>PDU 수신</strong>: 하위 계층으로부터 N-PDU 수신</li><li><strong>PCI 제거</strong>: N 계층이 자신의 헤더 (N-PCI) 파싱 및 제거</li><li><strong>SDU 추출</strong>: N-SDU = N-PDU - N-PCI</li><li><strong>서비스 전달</strong>: N-SDU 를 상위 계층에 (N+1)-SDU 로 전달</li><li><strong>처리 완료</strong>: 상위 계층이 데이터 처리</li></ol></li></ul><h4 id=간단-캡슐화-예>간단 캡슐화 예<a hidden class=anchor aria-hidden=true href=#간단-캡슐화-예>#</a></h4><ul><li>L7 SDU 200B →</li><li>L4: +TCP 20B ⇒ <strong>세그먼트 220B</strong> →</li><li>L3: +IPv4 20B ⇒ <strong>패킷 240B</strong> →</li><li>L2: +Eth 14B, +FCS 4B ⇒ <strong>프레임 258B</strong> → L1 전송</li></ul><p><strong>캡슐화 체인 예시 (HTTP over TCP/IP over Ethernet)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2>2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3>3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4>4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5>5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6>6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7>7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8>8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>L7: HTTP Request (200 bytes)
</span></span><span class=line><span class=cl>    ↓ (L7-SDU for L4)
</span></span><span class=line><span class=cl>L4: [TCP Header 20B] + [L4-SDU 200B] = TCP Segment (220 bytes)
</span></span><span class=line><span class=cl>    ↓ (L4-PDU = L3-SDU)
</span></span><span class=line><span class=cl>L3: [IP Header 20B] + [L3-SDU 220B] = IP Packet (240 bytes)
</span></span><span class=line><span class=cl>    ↓ (L3-PDU = L2-SDU)
</span></span><span class=line><span class=cl>L2: [Eth Header 14B] + [L2-SDU 240B] + [FCS 4B] = Ethernet Frame (258 bytes)
</span></span><span class=line><span class=cl>    ↓ (L2-PDU = L1-SDU)
</span></span><span class=line><span class=cl>L1: 258 bytes → 2064 bits (Physical transmission)
</span></span></code></pre></td></tr></table></div></div><p><strong>캡슐화 시퀀스 다이어그램</strong>:</p><pre class=mermaid>sequenceDiagram
    participant App as Application (L7)
    participant Trans as Transport (L4)
    participant Net as Network (L3)
    participant L2 as Data Link (L2)
    
    App-&gt;&gt;Trans: L4-SDU (200B)
    Note over Trans: + TCP Header (20B) → L4-PDU 220B
    Trans-&gt;&gt;Net: L3-SDU = L4-PDU (220B)
    Note over Net: + IP Header (20B) → L3-PDU 240B
    Net-&gt;&gt;L2: L2-SDU = L3-PDU (240B)
    Note over L2: + Ethernet Header (14B) + FCS (4B) → L2-PDU 258B
    L2-&gt;&gt;L2: L2-PDU (258B) → Physical Bits
    
    L2-&gt;&gt;Net: L3-SDU (240B)
    Note over Net: - Ethernet Header / FCS
    Net-&gt;&gt;Trans: L4-SDU (220B)
    Note over Trans: - IP Header (20B)
    Trans-&gt;&gt;App: App Data (200B)
    Note over Trans: - TCP Header (20B)
</pre><p>송신 측에서는 각 계층이 헤더를 추가하며 데이터가 " 성장 " 한다 (캡슐화). 수신 측에서는 반대로 각 계층이 자신의 헤더를 제거하며 원본 데이터를 복원한다 (역캡슐화). 각 계층은 자신의 헤더만 해석하고, 페이로드 (SDU) 는 불투명하게 취급한다. 이는 계층 간 독립성의 핵심이다.</p><h3 id=분할과-재조립-segmentation--reassembly>분할과 재조립 (Segmentation & Reassembly)<a hidden class=anchor aria-hidden=true href=#분할과-재조립-segmentation--reassembly>#</a></h3><p>큰 SDU 가 여러 PDU 로 나뉘고 다시 합쳐지는 과정을 다룬다.<br>PDU 최대 크기 (MTU) 를 넘으면 분할되어 <strong>다수 PDU</strong>로 전송 후 수신 측에서 재조립된다. 이 과정에서 오류/혼잡/재전송 정책은 <strong>해당 계층의 PDU 단위</strong>로 적용되며 SDU 의미는 보존된다.<br>물리 계층에서는 최종적으로 비트스트림으로 전송되어 모든 제어 정보가 해체된다.</p><ul><li><strong>세그멘테이션 (L4)</strong>: MSS 기반 분할. TCP 는 <strong>시퀀스/ACK/재전송</strong>으로 완전성 보장.</li><li><strong>단편화 (L3)</strong>: MTU 초과 시 IP 조각. <strong>IPv4</strong>: DF=0 이면 라우터/호스트 조각 가능, DF=1 이면 <strong>ICMP Frag Needed</strong>로 PMTUD 유도. <strong>IPv6</strong>: <strong>라우터 단편화 금지</strong>, 호스트가 <strong>Fragment 헤더</strong> 사용.</li><li><strong>실무 권장</strong>: <strong>PLPMTUD 활성화 + MSS 클램핑</strong>으로 블랙홀 회피, IPv6 는 <strong>ICMPv6 PTB 허용</strong> 필수.</li></ul><h4 id=분할이-필요한-이유>분할이 필요한 이유<a hidden class=anchor aria-hidden=true href=#분할이-필요한-이유>#</a></h4><ul><li>하위 계층의 <strong>MTU(Maximum Transmission Unit)</strong> 제약</li><li>L2(예: 이더넷) MTU 변화는 상위 L3 SDU 처리에 직접 영향. 터널링 시 헤더 중첩을 고려해 <strong>효과적 MTU</strong> 재산정 필요.</li><li>네트워크 전송 효율성과 오류 복구</li><li>버퍼 크기 제한</li></ul><p><strong>분할 메커니즘 예시 (TCP Segmentation)</strong>:</p><table><thead><tr><th>단계</th><th>설명</th><th>크기</th></tr></thead><tbody><tr><td>1. 응용 데이터</td><td>웹 페이지 HTML</td><td>10,000 bytes</td></tr><tr><td>2. L4-SDU</td><td>전송 계층이 받은 데이터</td><td>10,000 bytes</td></tr><tr><td>3. MSS 확인</td><td>Maximum Segment Size (일반적으로 1460 bytes)</td><td>-</td></tr><tr><td>4. 분할</td><td>10,000 / 1460 ≈ 7 개 세그먼트 생성</td><td>각 ≤1460 bytes</td></tr><tr><td>5. TCP PDU</td><td>각 세그먼트에 TCP 헤더 (20B) 추가</td><td>각 ≤1480 bytes</td></tr><tr><td>6. 전송</td><td>7 개의 L3-SDU 로 네트워크 계층에 전달</td><td>-</td></tr></tbody></table><p><strong>재조립 메커니즘</strong>:</p><ul><li><strong>순서 번호 (Sequence Number)</strong>: TCP 헤더의 시퀀스 번호로 순서 보장</li><li><strong>버퍼링</strong>: 수신 측에서 세그먼트를 버퍼에 저장</li><li><strong>완전성 확인</strong>: 모든 세그먼트 도착 확인 후 재조립</li><li><strong>타이머</strong>: 누락 세그먼트 재전송 요청</li></ul><p><strong>분할/재조립 코드 예시 (Python, 개념적)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span><span class=lnt id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a>
</span><span class=lnt id=hl-4-16><a class=lnlinks href=#hl-4-16>16</a>
</span><span class=lnt id=hl-4-17><a class=lnlinks href=#hl-4-17>17</a>
</span><span class=lnt id=hl-4-18><a class=lnlinks href=#hl-4-18>18</a>
</span><span class=lnt id=hl-4-19><a class=lnlinks href=#hl-4-19>19</a>
</span><span class=lnt id=hl-4-20><a class=lnlinks href=#hl-4-20>20</a>
</span><span class=lnt id=hl-4-21><a class=lnlinks href=#hl-4-21>21</a>
</span><span class=lnt id=hl-4-22><a class=lnlinks href=#hl-4-22>22</a>
</span><span class=lnt id=hl-4-23><a class=lnlinks href=#hl-4-23>23</a>
</span><span class=lnt id=hl-4-24><a class=lnlinks href=#hl-4-24>24</a>
</span><span class=lnt id=hl-4-25><a class=lnlinks href=#hl-4-25>25</a>
</span><span class=lnt id=hl-4-26><a class=lnlinks href=#hl-4-26>26</a>
</span><span class=lnt id=hl-4-27><a class=lnlinks href=#hl-4-27>27</a>
</span><span class=lnt id=hl-4-28><a class=lnlinks href=#hl-4-28>28</a>
</span><span class=lnt id=hl-4-29><a class=lnlinks href=#hl-4-29>29</a>
</span><span class=lnt id=hl-4-30><a class=lnlinks href=#hl-4-30>30</a>
</span><span class=lnt id=hl-4-31><a class=lnlinks href=#hl-4-31>31</a>
</span><span class=lnt id=hl-4-32><a class=lnlinks href=#hl-4-32>32</a>
</span><span class=lnt id=hl-4-33><a class=lnlinks href=#hl-4-33>33</a>
</span><span class=lnt id=hl-4-34><a class=lnlinks href=#hl-4-34>34</a>
</span><span class=lnt id=hl-4-35><a class=lnlinks href=#hl-4-35>35</a>
</span><span class=lnt id=hl-4-36><a class=lnlinks href=#hl-4-36>36</a>
</span><span class=lnt id=hl-4-37><a class=lnlinks href=#hl-4-37>37</a>
</span><span class=lnt id=hl-4-38><a class=lnlinks href=#hl-4-38>38</a>
</span><span class=lnt id=hl-4-39><a class=lnlinks href=#hl-4-39>39</a>
</span><span class=lnt id=hl-4-40><a class=lnlinks href=#hl-4-40>40</a>
</span><span class=lnt id=hl-4-41><a class=lnlinks href=#hl-4-41>41</a>
</span><span class=lnt id=hl-4-42><a class=lnlinks href=#hl-4-42>42</a>
</span><span class=lnt id=hl-4-43><a class=lnlinks href=#hl-4-43>43</a>
</span><span class=lnt id=hl-4-44><a class=lnlinks href=#hl-4-44>44</a>
</span><span class=lnt id=hl-4-45><a class=lnlinks href=#hl-4-45>45</a>
</span><span class=lnt id=hl-4-46><a class=lnlinks href=#hl-4-46>46</a>
</span><span class=lnt id=hl-4-47><a class=lnlinks href=#hl-4-47>47</a>
</span><span class=lnt id=hl-4-48><a class=lnlinks href=#hl-4-48>48</a>
</span><span class=lnt id=hl-4-49><a class=lnlinks href=#hl-4-49>49</a>
</span><span class=lnt id=hl-4-50><a class=lnlinks href=#hl-4-50>50</a>
</span><span class=lnt id=hl-4-51><a class=lnlinks href=#hl-4-51>51</a>
</span><span class=lnt id=hl-4-52><a class=lnlinks href=#hl-4-52>52</a>
</span><span class=lnt id=hl-4-53><a class=lnlinks href=#hl-4-53>53</a>
</span><span class=lnt id=hl-4-54><a class=lnlinks href=#hl-4-54>54</a>
</span><span class=lnt id=hl-4-55><a class=lnlinks href=#hl-4-55>55</a>
</span><span class=lnt id=hl-4-56><a class=lnlinks href=#hl-4-56>56</a>
</span><span class=lnt id=hl-4-57><a class=lnlinks href=#hl-4-57>57</a>
</span><span class=lnt id=hl-4-58><a class=lnlinks href=#hl-4-58>58</a>
</span><span class=lnt id=hl-4-59><a class=lnlinks href=#hl-4-59>59</a>
</span><span class=lnt id=hl-4-60><a class=lnlinks href=#hl-4-60>60</a>
</span><span class=lnt id=hl-4-61><a class=lnlinks href=#hl-4-61>61</a>
</span><span class=lnt id=hl-4-62><a class=lnlinks href=#hl-4-62>62</a>
</span><span class=lnt id=hl-4-63><a class=lnlinks href=#hl-4-63>63</a>
</span><span class=lnt id=hl-4-64><a class=lnlinks href=#hl-4-64>64</a>
</span><span class=lnt id=hl-4-65><a class=lnlinks href=#hl-4-65>65</a>
</span><span class=lnt id=hl-4-66><a class=lnlinks href=#hl-4-66>66</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 송신 측: SDU 분할</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>segment_sdu</span><span class=p>(</span><span class=n>sdu_data</span><span class=p>,</span> <span class=n>mss</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    SDU를 MSS 크기에 맞게 분할
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    Args:
</span></span></span><span class=line><span class=cl><span class=s2>        sdu_data: 원본 SDU 바이트 배열
</span></span></span><span class=line><span class=cl><span class=s2>        mss: Maximum Segment Size
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    Returns:
</span></span></span><span class=line><span class=cl><span class=s2>        세그먼트 리스트 (각 세그먼트는 dict로 seq_num과 data 포함)
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>segments</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=n>seq_num</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>sdu_data</span><span class=p>),</span> <span class=n>mss</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>segment_data</span> <span class=o>=</span> <span class=n>sdu_data</span><span class=p>[</span><span class=n>i</span><span class=p>:</span><span class=n>i</span><span class=o>+</span><span class=n>mss</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>segments</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;seq_num&#39;</span><span class=p>:</span> <span class=n>seq_num</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;data&#39;</span><span class=p>:</span> <span class=n>segment_data</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;length&#39;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=n>segment_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=n>seq_num</span> <span class=o>+=</span> <span class=nb>len</span><span class=p>(</span><span class=n>segment_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>segments</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 수신 측: PDU 재조립</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>reassemble_segments</span><span class=p>(</span><span class=n>segments</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    수신한 세그먼트를 원본 SDU로 재조립
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    Args:
</span></span></span><span class=line><span class=cl><span class=s2>        segments: 수신한 세그먼트 리스트
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    Returns:
</span></span></span><span class=line><span class=cl><span class=s2>        재조립된 원본 SDU
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=c1># 시퀀스 번호로 정렬</span>
</span></span><span class=line><span class=cl>    <span class=n>sorted_segments</span> <span class=o>=</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>segments</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=p>[</span><span class=s1>&#39;seq_num&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 연속성 검증</span>
</span></span><span class=line><span class=cl>    <span class=n>expected_seq</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>seg</span> <span class=ow>in</span> <span class=n>sorted_segments</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>seg</span><span class=p>[</span><span class=s1>&#39;seq_num&#39;</span><span class=p>]</span> <span class=o>!=</span> <span class=n>expected_seq</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Missing segment at seq </span><span class=si>{</span><span class=n>expected_seq</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>expected_seq</span> <span class=o>+=</span> <span class=n>seg</span><span class=p>[</span><span class=s1>&#39;length&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 데이터 결합</span>
</span></span><span class=line><span class=cl>    <span class=n>reassembled_sdu</span> <span class=o>=</span> <span class=sa>b</span><span class=s1>&#39;&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>seg</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>]</span> <span class=k>for</span> <span class=n>seg</span> <span class=ow>in</span> <span class=n>sorted_segments</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>reassembled_sdu</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>original_sdu</span> <span class=o>=</span> <span class=sa>b</span><span class=s1>&#39;A&#39;</span> <span class=o>*</span> <span class=mi>10000</span>  <span class=c1># 10KB 데이터</span>
</span></span><span class=line><span class=cl><span class=n>mss</span> <span class=o>=</span> <span class=mi>1460</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 송신</span>
</span></span><span class=line><span class=cl><span class=n>segments</span> <span class=o>=</span> <span class=n>segment_sdu</span><span class=p>(</span><span class=n>original_sdu</span><span class=p>,</span> <span class=n>mss</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;분할된 세그먼트 수: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>segments</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>  <span class=c1># 출력: 7</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 수신 (역순으로 도착 가정)</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>random</span>
</span></span><span class=line><span class=cl><span class=n>random</span><span class=o>.</span><span class=n>shuffle</span><span class=p>(</span><span class=n>segments</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>recovered_sdu</span> <span class=o>=</span> <span class=n>reassemble_segments</span><span class=p>(</span><span class=n>segments</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>assert</span> <span class=n>original_sdu</span> <span class=o>==</span> <span class=n>recovered_sdu</span><span class=p>,</span> <span class=s2>&#34;재조립 실패&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;재조립 성공&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>큰 SDU 는 하위 계층의 제약으로 인해 여러 작은 PDU 로 나뉜다. 각 PDU 는 순서 정보를 포함하여 수신 측에서 올바른 순서로 재조립될 수 있다. 이 과정은 전송 효율과 오류 복구의 균형을 맞춘다.</p><h2 id=핸드셰이크-및-플로우-제어>핸드셰이크 및 플로우 제어<a hidden class=anchor aria-hidden=true href=#핸드셰이크-및-플로우-제어>#</a></h2><p>SDU/PDU 변환과정에서 핸드셰이크, 흐름 제어, 세그멘테이션, 협상 과정 등을 설명한다.</p><h3 id=세그멘테이션-및-패딩>세그멘테이션 및 패딩<a hidden class=anchor aria-hidden=true href=#세그멘테이션-및-패딩>#</a></h3><p>데이터가 최대 PDU 크기를 초과할 경우 분할 (세그멘테이션), 크기가 부족할 경우 패딩이 추가된다.</p><ul><li>대용량 SDU 는 여러 개의 PDU 로 분할되어 전송된다.</li><li>작은 SDU 는 패딩 (bit filler) 등이 추가되어 PDU 를 완성시킨다.</li><li>실제 구현에서는 MTU(Maximum Transmission Unit) 나 SDU 크기 조절을 통해 최적화한다.</li></ul><h3 id=핸드셰이크와-협상>핸드셰이크와 협상<a hidden class=anchor aria-hidden=true href=#핸드셰이크와-협상>#</a></h3><ul><li>일부 프로토콜 (예: TCP, Oracle DB 등) 은 SDU 크기·협상, 버퍼 크기 조정 (서버 - 클라이언트 간 negotiation) 을 통해 성능을 최적화한다.</li><li>예시: Oracle ODP.NET, Oracle DB 는 세션 연결 시 클라이언트, 서버가 각각 SDU 사이즈 협상하며, 최종 값은 더 작은 쪽으로 결정됨.</li></ul><h2 id=서비스-인터페이스와-sap>서비스 인터페이스와 SAP<a hidden class=anchor aria-hidden=true href=#서비스-인터페이스와-sap>#</a></h2><p>SDU 가 전달되는 서비스 액세스 포인트 (SAP), 서비스 프리미티브, 인터페이스 제어 정보 (ICI) 를 다룬다.</p><h3 id=서비스-액세스-포인트-sap>서비스 액세스 포인트 (SAP)<a hidden class=anchor aria-hidden=true href=#서비스-액세스-포인트-sap>#</a></h3><p>SAP 의 역할, 주소 지정, 실제 구현 예시를 설명한다.</p><h4 id=sap-정의>SAP 정의<a hidden class=anchor aria-hidden=true href=#sap-정의>#</a></h4><p>서비스 액세스 포인트 (Service Access Point) 는 특정 계층이 상위 계층에게 서비스를 제공하는 논리적 인터페이스다. SAP 은 고유한 주소 (SAP Address) 로 식별되며, 이를 통해 여러 상위 계층 엔티티가 동일 하위 계층 서비스를 공유할 수 있다.</p><h4 id=계층별-sap-구현-예시>계층별 SAP 구현 예시<a hidden class=anchor aria-hidden=true href=#계층별-sap-구현-예시>#</a></h4><table><thead><tr><th>계층</th><th>SAP 이름</th><th>주소 예시</th><th>실제 구현</th></tr></thead><tbody><tr><td>Transport</td><td>TSAP</td><td>Port 번호 (16-bit)</td><td>TCP/UDP Port (80, 443, 53 등)</td></tr><tr><td>Network</td><td>NSAP</td><td>IP 주소 (32-bit/128-bit)</td><td>IPv4/IPv6 주소</td></tr><tr><td>Data Link</td><td>LSAP</td><td>MAC 주소 (48-bit)</td><td>Ethernet MAC, DSAP/SSAP (LLC)</td></tr><tr><td>Physical</td><td>PhySAP</td><td>물리 포트 번호</td><td>이더넷 포트, 시리얼 포트</td></tr></tbody></table><h4 id=sap-주소-지정-예시-웹-서버-접속>SAP 주소 지정 예시 (웹 서버 접속)<a hidden class=anchor aria-hidden=true href=#sap-주소-지정-예시-웹-서버-접속>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>클라이언트 → 웹 서버 HTTP 요청
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>L4 (Transport):
</span></span><span class=line><span class=cl>  Source TSAP: 클라이언트 Port 54321
</span></span><span class=line><span class=cl>  Dest TSAP: 서버 Port 80 (HTTP)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>L3 (Network):
</span></span><span class=line><span class=cl>  Source NSAP: 클라이언트 IP 192.168.1.100
</span></span><span class=line><span class=cl>  Dest NSAP: 서버 IP 203.0.113.10
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>L2 (Data Link):
</span></span><span class=line><span class=cl>  Source LSAP: 클라이언트 MAC aa:bb:cc:dd:ee:ff
</span></span><span class=line><span class=cl>  Dest LSAP: 게이트웨이 MAC 00:11:22:33:44:55
</span></span></code></pre></td></tr></table></div></div><h4 id=sap-멀티플렉싱-multiplexing>SAP 멀티플렉싱 (Multiplexing)<a hidden class=anchor aria-hidden=true href=#sap-멀티플렉싱-multiplexing>#</a></h4><pre class=mermaid>graph TD
    subgraph &#34;상위 계층 N+1&#34;
    A1[엔티티 A] 
    A2[엔티티 B]
    A3[엔티티 C]
    end
    
    subgraph &#34;계층 N 서비스&#34;
    SAP1[SAP-1]
    SAP2[SAP-2]
    SAP3[SAP-3]
    N[N-Layer Service Provider]
    end
    
    A1 --&gt;|N-SDU| SAP1
    A2 --&gt;|N-SDU| SAP2
    A3 --&gt;|N-SDU| SAP3
    
    SAP1 --&gt; N
    SAP2 --&gt; N
    SAP3 --&gt; N
    
    style N fill:#fff4e1
</pre><p>여러 상위 계층 엔티티가 각각 고유한 SAP 을 통해 동일한 하위 계층 서비스를 사용한다. 예를 들어, 하나의 컴퓨터에서 여러 애플리케이션 (웹 브라우저, 이메일 클라이언트, 메신저) 이 각각 다른 포트 번호 (TSAP) 를 사용하여 TCP 서비스를 공유한다. 이는 멀티플렉싱의 핵심이다.</p><h3 id=서비스-프리미티브-service-primitives>서비스 프리미티브 (Service Primitives)<a hidden class=anchor aria-hidden=true href=#서비스-프리미티브-service-primitives>#</a></h3><p>계층 간 서비스 요청과 응답을 나타내는 프리미티브 유형을 다룬다.</p><h4 id=서비스-프리미티브-4-가지-유형>서비스 프리미티브 4 가지 유형<a hidden class=anchor aria-hidden=true href=#서비스-프리미티브-4-가지-유형>#</a></h4><table><thead><tr><th>프리미티브</th><th>약어</th><th>방향</th><th>설명</th></tr></thead><tbody><tr><td><strong>Request</strong></td><td>.req</td><td>User → Provider</td><td>서비스 요청</td></tr><tr><td><strong>Indication</strong></td><td>.ind</td><td>Provider → User</td><td>서비스 도착 알림</td></tr><tr><td><strong>Response</strong></td><td>.res</td><td>User → Provider</td><td>요청에 대한 응답</td></tr><tr><td><strong>Confirm</strong></td><td>.cnf</td><td>Provider → User</td><td>요청 처리 완료 확인</td></tr></tbody></table><h4 id=서비스-유형에-따른-프리미티브-조합>서비스 유형에 따른 프리미티브 조합<a hidden class=anchor aria-hidden=true href=#서비스-유형에-따른-프리미티브-조합>#</a></h4><ol><li><p><strong>비확인 서비스 (Unconfirmed Service)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2>2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Sender: DATA.req(SDU)
</span></span><span class=line><span class=cl>──────────────────────→
</span></span><span class=line><span class=cl>Receiver: DATA.ind(SDU)
</span></span></code></pre></td></tr></table></div></div><p>예시: UDP 데이터그램 전송</p></li><li><p><strong>확인 서비스 (Confirmed Service)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1>1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2>2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3>3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4>4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5>5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Sender: DATA.req(SDU)
</span></span><span class=line><span class=cl>──────────────────────→
</span></span><span class=line><span class=cl>Receiver: DATA.ind(SDU)
</span></span><span class=line><span class=cl>		  DATA.res(ACK)
</span></span><span class=line><span class=cl>←──────────────────────
</span></span><span class=line><span class=cl>Sender: DATA.cnf(ACK)
</span></span></code></pre></td></tr></table></div></div><p>예시: TCP 세그먼트 전송 (ACK 포함)</p></li></ol><h4 id=프리미티브와-sdu-전달-시퀀스-확인-서비스>프리미티브와 SDU 전달 시퀀스 (확인 서비스)<a hidden class=anchor aria-hidden=true href=#프리미티브와-sdu-전달-시퀀스-확인-서비스>#</a></h4><pre class=mermaid>sequenceDiagram
    participant SU as Service User (송신)
    participant SP as Service Provider (N계층)
    participant RU as Service User (수신)
    
    SU-&gt;&gt;SP: N-DATA.req(N-SDU, params)
    Note over SP: SDU 캡슐화&lt;br/&gt;N-PDU 생성
    SP-&gt;&gt;RU: N-DATA.ind(N-SDU, params)
    Note over RU: SDU 처리
    RU-&gt;&gt;SP: N-DATA.res(ACK)
    SP-&gt;&gt;SU: N-DATA.cnf(ACK)
</pre><p>서비스 프리미티브는 계층 간 상호작용의 명시적 계약을 정의한다. Request 는 서비스 사용자가 시작하고, Indication 은 서비스 제공자가 상대방에게 알린다. Response 와 Confirm 은 확인이 필요한 서비스에서만 사용된다. SDU 는 Request 와 Indication 에 실려 전달된다.</p><h3 id=인터페이스-제어-정보-ici>인터페이스 제어 정보 (ICI)<a hidden class=anchor aria-hidden=true href=#인터페이스-제어-정보-ici>#</a></h3><p>SDU 와 함께 전달되는 제어 정보의 역할과 예시를 다룬다.</p><h4 id=iciinterface-control-information-정의>ICI(Interface Control Information) 정의<a hidden class=anchor aria-hidden=true href=#iciinterface-control-information-정의>#</a></h4><p>ICI 는 서비스 프리미티브와 함께 전달되는 파라미터로, SDU 자체는 아니지만 서비스 처리에 필요한 제어 정보를 포함한다. ICI 는 <strong>계층 간 인터페이스에서만</strong> 사용되고 하위 계층으로 전달되지 않는다.</p><h4 id=ici-vs-pci-비교>ICI Vs PCI 비교<a hidden class=anchor aria-hidden=true href=#ici-vs-pci-비교>#</a></h4><table><thead><tr><th>구분</th><th>ICI</th><th>PCI</th></tr></thead><tbody><tr><td>정의</td><td>인터페이스 제어 정보</td><td>프로토콜 제어 정보</td></tr><tr><td>위치</td><td>SAP 인터페이스</td><td>PDU 헤더/트레일러</td></tr><tr><td>범위</td><td>인접 계층 간</td><td>동일 계층 피어 간</td></tr><tr><td>전달</td><td>하위로 전달 안 됨</td><td>네트워크를 통해 전달</td></tr><tr><td>예시</td><td>우선순위, QoS 플래그</td><td>TCP 헤더, IP 헤더</td></tr></tbody></table><h4 id=예시>예시<a hidden class=anchor aria-hidden=true href=#예시>#</a></h4><p><strong>ICI 파라미터 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span><span class=lnt id=hl-10-12><a class=lnlinks href=#hl-10-12>12</a>
</span><span class=lnt id=hl-10-13><a class=lnlinks href=#hl-10-13>13</a>
</span><span class=lnt id=hl-10-14><a class=lnlinks href=#hl-10-14>14</a>
</span><span class=lnt id=hl-10-15><a class=lnlinks href=#hl-10-15>15</a>
</span><span class=lnt id=hl-10-16><a class=lnlinks href=#hl-10-16>16</a>
</span><span class=lnt id=hl-10-17><a class=lnlinks href=#hl-10-17>17</a>
</span><span class=lnt id=hl-10-18><a class=lnlinks href=#hl-10-18>18</a>
</span><span class=lnt id=hl-10-19><a class=lnlinks href=#hl-10-19>19</a>
</span><span class=lnt id=hl-10-20><a class=lnlinks href=#hl-10-20>20</a>
</span><span class=lnt id=hl-10-21><a class=lnlinks href=#hl-10-21>21</a>
</span><span class=lnt id=hl-10-22><a class=lnlinks href=#hl-10-22>22</a>
</span><span class=lnt id=hl-10-23><a class=lnlinks href=#hl-10-23>23</a>
</span><span class=lnt id=hl-10-24><a class=lnlinks href=#hl-10-24>24</a>
</span><span class=lnt id=hl-10-25><a class=lnlinks href=#hl-10-25>25</a>
</span><span class=lnt id=hl-10-26><a class=lnlinks href=#hl-10-26>26</a>
</span><span class=lnt id=hl-10-27><a class=lnlinks href=#hl-10-27>27</a>
</span><span class=lnt id=hl-10-28><a class=lnlinks href=#hl-10-28>28</a>
</span><span class=lnt id=hl-10-29><a class=lnlinks href=#hl-10-29>29</a>
</span><span class=lnt id=hl-10-30><a class=lnlinks href=#hl-10-30>30</a>
</span><span class=lnt id=hl-10-31><a class=lnlinks href=#hl-10-31>31</a>
</span><span class=lnt id=hl-10-32><a class=lnlinks href=#hl-10-32>32</a>
</span><span class=lnt id=hl-10-33><a class=lnlinks href=#hl-10-33>33</a>
</span><span class=lnt id=hl-10-34><a class=lnlinks href=#hl-10-34>34</a>
</span><span class=lnt id=hl-10-35><a class=lnlinks href=#hl-10-35>35</a>
</span><span class=lnt id=hl-10-36><a class=lnlinks href=#hl-10-36>36</a>
</span><span class=lnt id=hl-10-37><a class=lnlinks href=#hl-10-37>37</a>
</span><span class=lnt id=hl-10-38><a class=lnlinks href=#hl-10-38>38</a>
</span><span class=lnt id=hl-10-39><a class=lnlinks href=#hl-10-39>39</a>
</span><span class=lnt id=hl-10-40><a class=lnlinks href=#hl-10-40>40</a>
</span><span class=lnt id=hl-10-41><a class=lnlinks href=#hl-10-41>41</a>
</span><span class=lnt id=hl-10-42><a class=lnlinks href=#hl-10-42>42</a>
</span><span class=lnt id=hl-10-43><a class=lnlinks href=#hl-10-43>43</a>
</span><span class=lnt id=hl-10-44><a class=lnlinks href=#hl-10-44>44</a>
</span><span class=lnt id=hl-10-45><a class=lnlinks href=#hl-10-45>45</a>
</span><span class=lnt id=hl-10-46><a class=lnlinks href=#hl-10-46>46</a>
</span><span class=lnt id=hl-10-47><a class=lnlinks href=#hl-10-47>47</a>
</span><span class=lnt id=hl-10-48><a class=lnlinks href=#hl-10-48>48</a>
</span><span class=lnt id=hl-10-49><a class=lnlinks href=#hl-10-49>49</a>
</span><span class=lnt id=hl-10-50><a class=lnlinks href=#hl-10-50>50</a>
</span><span class=lnt id=hl-10-51><a class=lnlinks href=#hl-10-51>51</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 전송 계층 서비스 요청 (의사 코드)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>transport_send_request</span><span class=p>(</span><span class=n>sdu</span><span class=p>,</span> <span class=n>ici</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    상위 계층이 전송 계층에 데이터 전송 요청
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    Args:
</span></span></span><span class=line><span class=cl><span class=s2>        sdu: L4-SDU (애플리케이션 데이터)
</span></span></span><span class=line><span class=cl><span class=s2>        ici: 인터페이스 제어 정보 (dict)
</span></span></span><span class=line><span class=cl><span class=s2>            - dest_address: 목적지 주소
</span></span></span><span class=line><span class=cl><span class=s2>            - dest_port: 목적지 포트
</span></span></span><span class=line><span class=cl><span class=s2>            - priority: 우선순위 (0-7)
</span></span></span><span class=line><span class=cl><span class=s2>            - qos: QoS 플래그 (LOW_LATENCY, HIGH_THROUGHPUT 등)
</span></span></span><span class=line><span class=cl><span class=s2>            - timeout: 타임아웃 (초)
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=c1># ICI 파라미터 추출</span>
</span></span><span class=line><span class=cl>    <span class=n>dest_addr</span> <span class=o>=</span> <span class=n>ici</span><span class=p>[</span><span class=s1>&#39;dest_address&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>dest_port</span> <span class=o>=</span> <span class=n>ici</span><span class=p>[</span><span class=s1>&#39;dest_port&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>priority</span> <span class=o>=</span> <span class=n>ici</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;priority&#39;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>qos</span> <span class=o>=</span> <span class=n>ici</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;qos&#39;</span><span class=p>,</span> <span class=s1>&#39;BEST_EFFORT&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># TCP 헤더 생성 (PCI)</span>
</span></span><span class=line><span class=cl>    <span class=n>tcp_header</span> <span class=o>=</span> <span class=n>create_tcp_header</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>dest_port</span><span class=o>=</span><span class=n>dest_port</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>flags</span><span class=o>=</span><span class=n>get_flags_from_qos</span><span class=p>(</span><span class=n>qos</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># PDU 생성 (PCI + SDU)</span>
</span></span><span class=line><span class=cl>    <span class=n>tcp_segment</span> <span class=o>=</span> <span class=n>tcp_header</span> <span class=o>+</span> <span class=n>sdu</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 네트워크 계층에 전달 (새로운 ICI)</span>
</span></span><span class=line><span class=cl>    <span class=n>network_send_request</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>sdu</span><span class=o>=</span><span class=n>tcp_segment</span><span class=p>,</span>  <span class=c1># L3-SDU가 됨</span>
</span></span><span class=line><span class=cl>        <span class=n>ici</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;dest_address&#39;</span><span class=p>:</span> <span class=n>dest_addr</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;protocol&#39;</span><span class=p>:</span> <span class=s1>&#39;TCP&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;tos&#39;</span><span class=p>:</span> <span class=n>map_priority_to_tos</span><span class=p>(</span><span class=n>priority</span><span class=p>)</span>  <span class=c1># ICI → L3 ICI 매핑</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>app_data</span> <span class=o>=</span> <span class=sa>b</span><span class=s2>&#34;GET / HTTP/1.1</span><span class=se>\r\n</span><span class=s2>Host: example.com</span><span class=se>\r\n\r\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>transport_send_request</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>sdu</span><span class=o>=</span><span class=n>app_data</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>ici</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;dest_address&#39;</span><span class=p>:</span> <span class=s1>&#39;203.0.113.10&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;dest_port&#39;</span><span class=p>:</span> <span class=mi>80</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;priority&#39;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;qos&#39;</span><span class=p>:</span> <span class=s1>&#39;LOW_LATENCY&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>ICI 흐름 예시 (QoS 요청)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15>15</a>
</span><span class=lnt id=hl-11-16><a class=lnlinks href=#hl-11-16>16</a>
</span><span class=lnt id=hl-11-17><a class=lnlinks href=#hl-11-17>17</a>
</span><span class=lnt id=hl-11-18><a class=lnlinks href=#hl-11-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>L7</span> <span class=err>→</span> <span class=n>L4</span><span class=p>:</span> 
</span></span><span class=line><span class=cl>  <span class=n>SDU</span><span class=p>:</span> <span class=n>HTTP</span> <span class=err>요청</span> <span class=err>데이터</span>
</span></span><span class=line><span class=cl>  <span class=n>ICI</span><span class=p>:</span> <span class=p>{</span> <span class=n>priority</span><span class=p>:</span> <span class=n>HIGH</span><span class=p>,</span> <span class=n>latency</span><span class=p>:</span> <span class=n>LOW</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>L4</span> <span class=err>→</span> <span class=n>L3</span><span class=p>:</span>
</span></span><span class=line><span class=cl>  <span class=n>SDU</span><span class=p>:</span> <span class=n>TCP</span> <span class=err>세그먼트</span> <span class=p>(</span><span class=n>L4</span><span class=o>-</span><span class=n>PDU</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>ICI</span><span class=p>:</span> <span class=p>{</span> <span class=n>tos</span><span class=p>:</span> <span class=mh>0xE0</span> <span class=p>(</span><span class=n>high</span> <span class=n>priority</span><span class=p>),</span> <span class=n>protocol</span><span class=p>:</span> <span class=n>TCP</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=err>→</span> <span class=n>L4는</span> <span class=err>상위</span> <span class=n>ICI를</span> <span class=n>TCP</span> <span class=err>헤더</span><span class=p>(</span><span class=n>PCI</span><span class=p>)</span><span class=err>와</span> <span class=n>L3</span> <span class=n>ICI로</span> <span class=err>변환</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>L3</span> <span class=err>→</span> <span class=n>L2</span><span class=p>:</span>
</span></span><span class=line><span class=cl>  <span class=n>SDU</span><span class=p>:</span> <span class=ne>IP</span> <span class=err>패킷</span> <span class=p>(</span><span class=n>L3</span><span class=o>-</span><span class=n>PDU</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>ICI</span><span class=p>:</span> <span class=p>{</span> <span class=n>vlan_priority</span><span class=p>:</span> <span class=mi>5</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=err>→</span> <span class=n>L3는</span> <span class=err>상위</span> <span class=n>ICI를</span> <span class=ne>IP</span> <span class=err>헤더</span><span class=p>(</span><span class=n>PCI</span><span class=p>)</span><span class=err>와</span> <span class=n>L2</span> <span class=n>ICI로</span> <span class=err>변환</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>L2</span> <span class=err>→</span> <span class=n>L1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>  <span class=n>SDU</span><span class=p>:</span> <span class=err>이더넷</span> <span class=err>프레임</span> <span class=p>(</span><span class=n>L2</span><span class=o>-</span><span class=n>PDU</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>ICI</span><span class=p>:</span> <span class=p>{</span> <span class=n>signal_strength</span><span class=p>:</span> <span class=n>HIGH</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=err>→</span> <span class=n>L2는</span> <span class=err>상위</span> <span class=n>ICI를</span> <span class=err>이더넷</span> <span class=err>헤더</span><span class=p>(</span><span class=n>PCI</span><span class=p>)</span><span class=err>와</span> <span class=err>물리</span> <span class=err>파라미터로</span> <span class=err>변환</span>
</span></span></code></pre></td></tr></table></div></div><p>ICI 는 계층 간 수직 인터페이스에서만 존재하며, 각 계층은 상위 ICI 를 자신의 PCI 와 하위 ICI 로 변환한다. 예를 들어, 응용 계층의 " 긴급 " 플래그는 TCP 의 URG 플래그 (PCI) 로, 그리고 IP 의 ToS 필드 (PCI) 로, 최종적으로 이더넷의 우선순위 태그 (PCI) 로 매핑된다. ICI 는 네트워크를 통해 전송되지 않는다.</p><h2 id=성능-최적화-및-트러블슈팅>성능 최적화 및 트러블슈팅<a hidden class=anchor aria-hidden=true href=#성능-최적화-및-트러블슈팅>#</a></h2><p><strong>Section Overview</strong>: SDU 처리 성능 이슈, MTU 최적화, 디버깅 방법을 다룬다.</p><h3 id=41-mtu-와-mss-최적화>4.1 MTU 와 MSS 최적화<a hidden class=anchor aria-hidden=true href=#41-mtu-와-mss-최적화>#</a></h3><p><strong>Detail Overview</strong>: 최대 전송 단위 설정이 SDU 처리 성능에 미치는 영향을 다룬다.</p><p><strong>MTU (Maximum Transmission Unit)</strong>:</p><ul><li>데이터 링크 계층이 한 번에 전송할 수 있는 최대 프레임 크기</li><li>일반적인 이더넷 MTU: 1500 bytes</li><li>Jumbo Frame: 9000 bytes (데이터센터 환경)</li></ul><p><strong>MSS (Maximum Segment Size)</strong>:</p><ul><li>TCP 가 한 세그먼트에 담을 수 있는 최대 데이터 크기</li><li>일반적으로 MSS = MTU - IP Header (20) - TCP Header (20) = 1460 bytes</li></ul><p><strong>MTU/MSS 불일치로 인한 문제</strong>:</p><table><thead><tr><th>시나리오</th><th>문제</th><th>증상</th><th>해결책</th></tr></thead><tbody><tr><td>큰 SDU + 작은 MTU</td><td>과도한 분할</td><td>높은 오버헤드, 지연 증가</td><td>Path MTU Discovery, MTU 조정</td></tr><tr><td>MTU 블랙홀</td><td>ICMP 차단으로 PMTUD 실패</td><td>연결 중단, 타임아웃</td><td>MSS 하드코딩, TCP MSS Clamping</td></tr><tr><td>IPv6 터널</td><td>터널 오버헤드로 유효 MTU 감소</td><td>재전송 증가</td><td>터널 MTU 명시 설정</td></tr><tr><td>VPN</td><td>암호화 헤더로 MTU 감소</td><td>성능 저하</td><td>VPN MTU 튜닝</td></tr></tbody></table><p><strong>Path MTU Discovery (PMTUD) 과정</strong>:</p><pre class=mermaid>sequenceDiagram
    participant Client as 클라이언트
    participant R1 as 라우터1&lt;br/&gt;(MTU 1500)
    participant R2 as 라우터2&lt;br/&gt;(MTU 1400)
    participant Server as 서버
    
    Client-&gt;&gt;R1: IP 패킷 (1500B, DF=1)
    R1-&gt;&gt;R2: IP 패킷 (1500B)
    R2--&gt;&gt;Client: ICMP Fragmentation Needed&lt;br/&gt;(MTU=1400)
    Note over Client: MTU를 1400으로 조정
    Client-&gt;&gt;R1: IP 패킷 (1400B, DF=1)
    R1-&gt;&gt;R2: IP 패킷 (1400B)
    R2-&gt;&gt;Server: IP 패킷 (1400B)
    Server--&gt;&gt;Client: 응답
</pre><p><strong>도식 해설</strong>:<br>클라이언트는 초기에 최대 MTU(1500) 로 패킷을 전송한다. 경로 중간의 라우터가 더 작은 MTU 를 가지면 ICMP 메시지를 보내 클라이언트에게 알린다. 클라이언트는 MTU 를 조정하여 재전송한다. 이 과정으로 경로 상의 최소 MTU 를 찾아 최적화한다. 단, ICMP 가 차단되면 이 메커니즘이 실패한다.</p><p><strong>MTU 최적화 실습 (Linux)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1> 1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2> 2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3> 3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4> 4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5> 5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6> 6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7> 7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8> 8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9> 9</a>
</span><span class=lnt id=hl-13-10><a class=lnlinks href=#hl-13-10>10</a>
</span><span class=lnt id=hl-13-11><a class=lnlinks href=#hl-13-11>11</a>
</span><span class=lnt id=hl-13-12><a class=lnlinks href=#hl-13-12>12</a>
</span><span class=lnt id=hl-13-13><a class=lnlinks href=#hl-13-13>13</a>
</span><span class=lnt id=hl-13-14><a class=lnlinks href=#hl-13-14>14</a>
</span><span class=lnt id=hl-13-15><a class=lnlinks href=#hl-13-15>15</a>
</span><span class=lnt id=hl-13-16><a class=lnlinks href=#hl-13-16>16</a>
</span><span class=lnt id=hl-13-17><a class=lnlinks href=#hl-13-17>17</a>
</span><span class=lnt id=hl-13-18><a class=lnlinks href=#hl-13-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 현재 MTU 확인</span>
</span></span><span class=line><span class=cl>ip link show eth0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># MTU 변경 (임시, 재부팅 시 초기화)</span>
</span></span><span class=line><span class=cl>sudo ip link <span class=nb>set</span> eth0 mtu <span class=m>9000</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># TCP MSS 확인</span>
</span></span><span class=line><span class=cl>ss -i <span class=p>|</span> grep mss
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># iptables로 MSS Clamping (VPN/터널 환경)</span>
</span></span><span class=line><span class=cl>sudo iptables -A FORWARD -p tcp --tcp-flags SYN,RST SYN <span class=se>\
</span></span></span><span class=line><span class=cl>  -j TCPMSS --clamp-mss-to-pmtu
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Path MTU Discovery 테스트 (ping)</span>
</span></span><span class=line><span class=cl><span class=c1># -M do: DF(Don&#39;t Fragment) 플래그 설정</span>
</span></span><span class=line><span class=cl><span class=c1># -s: 패킷 크기 (ICMP 헤더 8B 제외)</span>
</span></span><span class=line><span class=cl>ping -M <span class=k>do</span> -s <span class=m>1472</span> example.com  <span class=c1># 성공하면 MTU ≥ 1500</span>
</span></span><span class=line><span class=cl>ping -M <span class=k>do</span> -s <span class=m>1473</span> example.com  <span class=c1># 실패하면 MTU &lt; 1501</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>코드 예시: TCP Socket MSS 설정 (Python)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1> 1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2> 2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3> 3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4> 4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5> 5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6> 6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7> 7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8> 8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9> 9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10>10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11>11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12>12</a>
</span><span class=lnt id=hl-14-13><a class=lnlinks href=#hl-14-13>13</a>
</span><span class=lnt id=hl-14-14><a class=lnlinks href=#hl-14-14>14</a>
</span><span class=lnt id=hl-14-15><a class=lnlinks href=#hl-14-15>15</a>
</span><span class=lnt id=hl-14-16><a class=lnlinks href=#hl-14-16>16</a>
</span><span class=lnt id=hl-14-17><a class=lnlinks href=#hl-14-17>17</a>
</span><span class=lnt id=hl-14-18><a class=lnlinks href=#hl-14-18>18</a>
</span><span class=lnt id=hl-14-19><a class=lnlinks href=#hl-14-19>19</a>
</span><span class=lnt id=hl-14-20><a class=lnlinks href=#hl-14-20>20</a>
</span><span class=lnt id=hl-14-21><a class=lnlinks href=#hl-14-21>21</a>
</span><span class=lnt id=hl-14-22><a class=lnlinks href=#hl-14-22>22</a>
</span><span class=lnt id=hl-14-23><a class=lnlinks href=#hl-14-23>23</a>
</span><span class=lnt id=hl-14-24><a class=lnlinks href=#hl-14-24>24</a>
</span><span class=lnt id=hl-14-25><a class=lnlinks href=#hl-14-25>25</a>
</span><span class=lnt id=hl-14-26><a class=lnlinks href=#hl-14-26>26</a>
</span><span class=lnt id=hl-14-27><a class=lnlinks href=#hl-14-27>27</a>
</span><span class=lnt id=hl-14-28><a class=lnlinks href=#hl-14-28>28</a>
</span><span class=lnt id=hl-14-29><a class=lnlinks href=#hl-14-29>29</a>
</span><span class=lnt id=hl-14-30><a class=lnlinks href=#hl-14-30>30</a>
</span><span class=lnt id=hl-14-31><a class=lnlinks href=#hl-14-31>31</a>
</span><span class=lnt id=hl-14-32><a class=lnlinks href=#hl-14-32>32</a>
</span><span class=lnt id=hl-14-33><a class=lnlinks href=#hl-14-33>33</a>
</span><span class=lnt id=hl-14-34><a class=lnlinks href=#hl-14-34>34</a>
</span><span class=lnt id=hl-14-35><a class=lnlinks href=#hl-14-35>35</a>
</span><span class=lnt id=hl-14-36><a class=lnlinks href=#hl-14-36>36</a>
</span><span class=lnt id=hl-14-37><a class=lnlinks href=#hl-14-37>37</a>
</span><span class=lnt id=hl-14-38><a class=lnlinks href=#hl-14-38>38</a>
</span><span class=lnt id=hl-14-39><a class=lnlinks href=#hl-14-39>39</a>
</span><span class=lnt id=hl-14-40><a class=lnlinks href=#hl-14-40>40</a>
</span><span class=lnt id=hl-14-41><a class=lnlinks href=#hl-14-41>41</a>
</span><span class=lnt id=hl-14-42><a class=lnlinks href=#hl-14-42>42</a>
</span><span class=lnt id=hl-14-43><a class=lnlinks href=#hl-14-43>43</a>
</span><span class=lnt id=hl-14-44><a class=lnlinks href=#hl-14-44>44</a>
</span><span class=lnt id=hl-14-45><a class=lnlinks href=#hl-14-45>45</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>socket</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>create_optimized_socket</span><span class=p>(</span><span class=n>dest_ip</span><span class=p>,</span> <span class=n>dest_port</span><span class=p>,</span> <span class=n>custom_mss</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    MSS가 최적화된 TCP 소켓 생성
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    Args:
</span></span></span><span class=line><span class=cl><span class=s2>        dest_ip: 목적지 IP
</span></span></span><span class=line><span class=cl><span class=s2>        dest_port: 목적지 포트
</span></span></span><span class=line><span class=cl><span class=s2>        custom_mss: 사용자 정의 MSS (None이면 기본값)
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    Returns:
</span></span></span><span class=line><span class=cl><span class=s2>        설정된 소켓 객체
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>sock</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span> <span class=n>socket</span><span class=o>.</span><span class=n>SOCK_STREAM</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># TCP_MAXSEG 옵션으로 MSS 설정 (일부 OS에서만 지원)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>custom_mss</span> <span class=ow>and</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>socket</span><span class=p>,</span> <span class=s1>&#39;TCP_MAXSEG&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>sock</span><span class=o>.</span><span class=n>setsockopt</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>IPPROTO_TCP</span><span class=p>,</span> <span class=n>socket</span><span class=o>.</span><span class=n>TCP_MAXSEG</span><span class=p>,</span> <span class=n>custom_mss</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;MSS를 </span><span class=si>{</span><span class=n>custom_mss</span><span class=si>}</span><span class=s2>로 설정&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>OSError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;MSS 설정 실패: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Don&#39;t Fragment 플래그 설정 (PMTUD 활성화)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>socket</span><span class=p>,</span> <span class=s1>&#39;IP_MTU_DISCOVER&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>sock</span><span class=o>.</span><span class=n>setsockopt</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>IPPROTO_IP</span><span class=p>,</span> <span class=n>socket</span><span class=o>.</span><span class=n>IP_MTU_DISCOVER</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>  <span class=c1># IP_PMTUDISC_DO</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>sock</span><span class=o>.</span><span class=n>connect</span><span class=p>((</span><span class=n>dest_ip</span><span class=p>,</span> <span class=n>dest_port</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 협상된 MSS 확인 (Linux)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>socket</span><span class=p>,</span> <span class=s1>&#39;TCP_MAXSEG&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>negotiated_mss</span> <span class=o>=</span> <span class=n>sock</span><span class=o>.</span><span class=n>getsockopt</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>IPPROTO_TCP</span><span class=p>,</span> <span class=n>socket</span><span class=o>.</span><span class=n>TCP_MAXSEG</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;협상된 MSS: </span><span class=si>{</span><span class=n>negotiated_mss</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>OSError</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>pass</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>sock</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>sock</span> <span class=o>=</span> <span class=n>create_optimized_socket</span><span class=p>(</span><span class=s1>&#39;203.0.113.10&#39;</span><span class=p>,</span> <span class=mi>80</span><span class=p>,</span> <span class=n>custom_mss</span><span class=o>=</span><span class=mi>1400</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>sock</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=sa>b</span><span class=s1>&#39;GET / HTTP/1.1</span><span class=se>\r\n</span><span class=s1>Host: example.com</span><span class=se>\r\n\r\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=n>sock</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>4096</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>sock</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p>[RF:#29, #30, #31]</p><h3 id=42-sdu-처리-오버헤드-분석>4.2 SDU 처리 오버헤드 분석<a hidden class=anchor aria-hidden=true href=#42-sdu-처리-오버헤드-분석>#</a></h3><p><strong>Detail Overview</strong>: 계층별 헤더 오버헤드와 캡슐화 비용을 정량화한다.</p><p><strong>계층별 오버헤드 (전형적인 경우)</strong>:</p><table><thead><tr><th>계층</th><th>헤더 크기</th><th>트레일러</th><th>총 오버헤드</th><th>오버헤드 비율 (100B SDU 기준)</th></tr></thead><tbody><tr><td>L7 (HTTP)</td><td>~200B (요청 라인 + 헤더)</td><td>0</td><td>200B</td><td>200%</td></tr><tr><td>L4 (TCP)</td><td>20B (옵션 없음) ~ 60B</td><td>0</td><td>20-60B</td><td>20-60%</td></tr><tr><td>L3 (IPv4)</td><td>20B (옵션 없음)</td><td>0</td><td>20B</td><td>20%</td></tr><tr><td>L2 (Ethernet)</td><td>14B</td><td>4B (FCS)</td><td>18B</td><td>18%</td></tr><tr><td>L1 (물리)</td><td>0 (프리앰블 제외)</td><td>0</td><td>0</td><td>0%</td></tr><tr><td><strong>총합</strong></td><td>~254B</td><td>4B</td><td>~258B</td><td><strong>258%</strong></td></tr></tbody></table><p><strong>페이로드 효율성 분석 (작은 SDU 의 경우)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1>1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2>2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3>3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4>4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5>5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6>6</a>
</span><span class=lnt id=hl-15-7><a class=lnlinks href=#hl-15-7>7</a>
</span><span class=lnt id=hl-15-8><a class=lnlinks href=#hl-15-8>8</a>
</span><span class=lnt id=hl-15-9><a class=lnlinks href=#hl-15-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>시나리오: 1 byte 응용 데이터 전송 (예: 키 입력)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>L7-SDU: 1 byte
</span></span><span class=line><span class=cl>L4-PDU: 1 + 20 (TCP) = 21 bytes
</span></span><span class=line><span class=cl>L3-PDU: 21 + 20 (IP) = 41 bytes
</span></span><span class=line><span class=cl>L2-PDU: 41 + 14 (Eth) + 4 (FCS) = 59 bytes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>페이로드 효율성 = 1 / 59 = 1.7%
</span></span><span class=line><span class=cl>오버헤드 = 58 / 1 = 5800%
</span></span></code></pre></td></tr></table></div></div><p><strong>효율성 개선 전략</strong>:</p><ol><li><p><strong>Nagle 알고리즘</strong> (TCP):</p><ul><li>작은 세그먼트를 버퍼링하여 큰 세그먼트로 결합</li><li>효과: 오버헤드 감소, 지연 증가 (트레이드오프)</li></ul></li><li><p><strong>Header Compression</strong> (ROHC, RFC 5795):</p><ul><li>IP/TCP/UDP 헤더를 압축 (40B → 1-3B)</li><li>효과: 무선 환경에서 대역폭 절약</li></ul></li><li><p><strong>Jumbo Frames</strong> (Ethernet):</p><ul><li>MTU 를 1500B → 9000B 확대</li><li>효과: 대용량 전송 시 오버헤드 비율 감소</li></ul></li></ol><p><strong>오버헤드 시각화 (크기별 비교)</strong>:</p><pre class=mermaid>graph LR
    A[SDU&lt;br/&gt;10B] --&gt; B[Total&lt;br/&gt;68B]
    C[SDU&lt;br/&gt;100B] --&gt; D[Total&lt;br/&gt;158B]
    E[SDU&lt;br/&gt;1000B] --&gt; F[Total&lt;br/&gt;1058B]
    G[SDU&lt;br/&gt;1460B&lt;br/&gt;(MSS)] --&gt; H[Total&lt;br/&gt;1518B&lt;br/&gt;(Ethernet)]
    
    style A fill:#ffcccc
    style C fill:#ffddcc
    style E fill:#ffffcc
    style G fill:#ccffcc
</pre><p><strong>도식 해설</strong>:<br>작은 SDU 일수록 상대적 오버헤드가 크다. 10 bytes SDU 는 총 68 bytes 가 되어 680% 오버헤드가 발생한다. 반면 MSS 에 가까운 1460 bytes SDU 는 총 1518 bytes 로 약 4% 오버헤드만 발생한다. 따라서 대용량 데이터 전송 시 큰 SDU 를 사용하는 것이 효율적이다.</p><p>[RF:#32, #33]</p><h3 id=43-디버깅과-트러블슈팅>4.3 디버깅과 트러블슈팅<a hidden class=anchor aria-hidden=true href=#43-디버깅과-트러블슈팅>#</a></h3><p><strong>Detail Overview</strong>: SDU 관련 문제 진단 및 해결 방법을 다룬다.</p><p><strong>일반적인 SDU 문제 유형</strong>:</p><table><thead><tr><th>문제</th><th>증상</th><th>원인</th><th>진단 방법</th><th>해결책</th></tr></thead><tbody><tr><td>SDU 손실</td><td>데이터 누락, 재전송</td><td>버퍼 오버플로, 라우팅</td><td>Wireshark, tcpdump</td><td>버퍼 크기 증가, QoS</td></tr><tr><td>SDU 순서 뒤바뀜</td><td>데이터 깨짐, 재조립 실패</td><td>멀티패스, 재전송</td><td>Sequence 번호 분석</td><td>TCP 사용, 재정렬 로직</td></tr><tr><td>SDU 중복</td><td>중복 데이터</td><td>재전송 타임아웃</td><td>Duplicate ACK 분석</td><td>타임아웃 튜닝, 중복 제거</td></tr><tr><td>SDU 분할 과다</td><td>성능 저하</td><td>MTU 불일치</td><td>PMTUD 로그, ICMP</td><td>MTU 조정, MSS Clamping</td></tr><tr><td>SDU 블랙홀</td><td>연결 끊김</td><td>ICMP 차단, 방화벽</td><td>traceroute, MTR</td><td>MSS 하드코딩, VPN MTU</td></tr></tbody></table><p><strong>Wireshark 를 이용한 SDU 추적</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1> 1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2> 2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3> 3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4> 4</a>
</span><span class=lnt id=hl-17-5><a class=lnlinks href=#hl-17-5> 5</a>
</span><span class=lnt id=hl-17-6><a class=lnlinks href=#hl-17-6> 6</a>
</span><span class=lnt id=hl-17-7><a class=lnlinks href=#hl-17-7> 7</a>
</span><span class=lnt id=hl-17-8><a class=lnlinks href=#hl-17-8> 8</a>
</span><span class=lnt id=hl-17-9><a class=lnlinks href=#hl-17-9> 9</a>
</span><span class=lnt id=hl-17-10><a class=lnlinks href=#hl-17-10>10</a>
</span><span class=lnt id=hl-17-11><a class=lnlinks href=#hl-17-11>11</a>
</span><span class=lnt id=hl-17-12><a class=lnlinks href=#hl-17-12>12</a>
</span><span class=lnt id=hl-17-13><a class=lnlinks href=#hl-17-13>13</a>
</span><span class=lnt id=hl-17-14><a class=lnlinks href=#hl-17-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># TCP 스트림 필터 (특정 연결의 SDU 추적)</span>
</span></span><span class=line><span class=cl>tcp.stream eq <span class=m>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 특정 포트의 SDU 크기 분석</span>
</span></span><span class=line><span class=cl>tcp.len &gt; <span class=m>0</span> and tcp.port <span class=o>==</span> <span class=m>80</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 분할된 IP 패킷 찾기</span>
</span></span><span class=line><span class=cl>ip.flags.mf <span class=o>==</span> <span class=m>1</span> or ip.frag_offset &gt; <span class=m>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># TCP 재전송 식별</span>
</span></span><span class=line><span class=cl>tcp.analysis.retransmission
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># MSS 협상 확인 (SYN 패킷)</span>
</span></span><span class=line><span class=cl>tcp.flags.syn <span class=o>==</span> <span class=m>1</span> and tcp.options.mss
</span></span></code></pre></td></tr></table></div></div><p><strong>Python 을 이용한 SDU 모니터링</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1> 1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2> 2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3> 3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4> 4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5> 5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6> 6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7> 7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8> 8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9> 9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10>10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11>11</a>
</span><span class=lnt id=hl-18-12><a class=lnlinks href=#hl-18-12>12</a>
</span><span class=lnt id=hl-18-13><a class=lnlinks href=#hl-18-13>13</a>
</span><span class=lnt id=hl-18-14><a class=lnlinks href=#hl-18-14>14</a>
</span><span class=lnt id=hl-18-15><a class=lnlinks href=#hl-18-15>15</a>
</span><span class=lnt id=hl-18-16><a class=lnlinks href=#hl-18-16>16</a>
</span><span class=lnt id=hl-18-17><a class=lnlinks href=#hl-18-17>17</a>
</span><span class=lnt id=hl-18-18><a class=lnlinks href=#hl-18-18>18</a>
</span><span class=lnt id=hl-18-19><a class=lnlinks href=#hl-18-19>19</a>
</span><span class=lnt id=hl-18-20><a class=lnlinks href=#hl-18-20>20</a>
</span><span class=lnt id=hl-18-21><a class=lnlinks href=#hl-18-21>21</a>
</span><span class=lnt id=hl-18-22><a class=lnlinks href=#hl-18-22>22</a>
</span><span class=lnt id=hl-18-23><a class=lnlinks href=#hl-18-23>23</a>
</span><span class=lnt id=hl-18-24><a class=lnlinks href=#hl-18-24>24</a>
</span><span class=lnt id=hl-18-25><a class=lnlinks href=#hl-18-25>25</a>
</span><span class=lnt id=hl-18-26><a class=lnlinks href=#hl-18-26>26</a>
</span><span class=lnt id=hl-18-27><a class=lnlinks href=#hl-18-27>27</a>
</span><span class=lnt id=hl-18-28><a class=lnlinks href=#hl-18-28>28</a>
</span><span class=lnt id=hl-18-29><a class=lnlinks href=#hl-18-29>29</a>
</span><span class=lnt id=hl-18-30><a class=lnlinks href=#hl-18-30>30</a>
</span><span class=lnt id=hl-18-31><a class=lnlinks href=#hl-18-31>31</a>
</span><span class=lnt id=hl-18-32><a class=lnlinks href=#hl-18-32>32</a>
</span><span class=lnt id=hl-18-33><a class=lnlinks href=#hl-18-33>33</a>
</span><span class=lnt id=hl-18-34><a class=lnlinks href=#hl-18-34>34</a>
</span><span class=lnt id=hl-18-35><a class=lnlinks href=#hl-18-35>35</a>
</span><span class=lnt id=hl-18-36><a class=lnlinks href=#hl-18-36>36</a>
</span><span class=lnt id=hl-18-37><a class=lnlinks href=#hl-18-37>37</a>
</span><span class=lnt id=hl-18-38><a class=lnlinks href=#hl-18-38>38</a>
</span><span class=lnt id=hl-18-39><a class=lnlinks href=#hl-18-39>39</a>
</span><span class=lnt id=hl-18-40><a class=lnlinks href=#hl-18-40>40</a>
</span><span class=lnt id=hl-18-41><a class=lnlinks href=#hl-18-41>41</a>
</span><span class=lnt id=hl-18-42><a class=lnlinks href=#hl-18-42>42</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>scapy.all</span> <span class=kn>import</span> <span class=n>sniff</span><span class=p>,</span> <span class=n>TCP</span><span class=p>,</span> <span class=n>IP</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>analyze_sdu</span><span class=p>(</span><span class=n>packet</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    패킷에서 SDU 정보 추출 및 분석
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    Args:
</span></span></span><span class=line><span class=cl><span class=s2>        packet: Scapy 패킷 객체
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>packet</span><span class=o>.</span><span class=n>haslayer</span><span class=p>(</span><span class=n>TCP</span><span class=p>)</span> <span class=ow>and</span> <span class=n>packet</span><span class=o>.</span><span class=n>haslayer</span><span class=p>(</span><span class=n>IP</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>ip_layer</span> <span class=o>=</span> <span class=n>packet</span><span class=p>[</span><span class=n>IP</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>tcp_layer</span> <span class=o>=</span> <span class=n>packet</span><span class=p>[</span><span class=n>TCP</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># L3-SDU 크기 (IP 페이로드 = TCP 세그먼트)</span>
</span></span><span class=line><span class=cl>        <span class=n>l3_sdu_size</span> <span class=o>=</span> <span class=n>ip_layer</span><span class=o>.</span><span class=n>len</span> <span class=o>-</span> <span class=p>(</span><span class=n>ip_layer</span><span class=o>.</span><span class=n>ihl</span> <span class=o>*</span> <span class=mi>4</span><span class=p>)</span>  <span class=c1># IP total length - IP header</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># L4-SDU 크기 (TCP 페이로드)</span>
</span></span><span class=line><span class=cl>        <span class=n>tcp_header_size</span> <span class=o>=</span> <span class=n>tcp_layer</span><span class=o>.</span><span class=n>dataofs</span> <span class=o>*</span> <span class=mi>4</span>
</span></span><span class=line><span class=cl>        <span class=n>l4_sdu_size</span> <span class=o>=</span> <span class=n>l3_sdu_size</span> <span class=o>-</span> <span class=n>tcp_header_size</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 오버헤드 계산</span>
</span></span><span class=line><span class=cl>        <span class=n>overhead</span> <span class=o>=</span> <span class=n>tcp_header_size</span> <span class=o>+</span> <span class=p>(</span><span class=n>ip_layer</span><span class=o>.</span><span class=n>ihl</span> <span class=o>*</span> <span class=mi>4</span><span class=p>)</span> <span class=o>+</span> <span class=mi>14</span> <span class=o>+</span> <span class=mi>4</span>  <span class=c1># TCP + IP + Eth Header/FCS</span>
</span></span><span class=line><span class=cl>        <span class=n>efficiency</span> <span class=o>=</span> <span class=n>l4_sdu_size</span> <span class=o>/</span> <span class=p>(</span><span class=n>l4_sdu_size</span> <span class=o>+</span> <span class=n>overhead</span><span class=p>)</span> <span class=o>*</span> <span class=mi>100</span> <span class=k>if</span> <span class=n>l4_sdu_size</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=k>else</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>l4_sdu_size</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>  <span class=c1># 페이로드가 있는 경우만</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[</span><span class=si>{</span><span class=n>ip_layer</span><span class=o>.</span><span class=n>src</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>tcp_layer</span><span class=o>.</span><span class=n>sport</span><span class=si>}</span><span class=s2> → </span><span class=si>{</span><span class=n>ip_layer</span><span class=o>.</span><span class=n>dst</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>tcp_layer</span><span class=o>.</span><span class=n>dport</span><span class=si>}</span><span class=s2>]&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  L4-SDU: </span><span class=si>{</span><span class=n>l4_sdu_size</span><span class=si>}</span><span class=s2> bytes&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  Total: </span><span class=si>{</span><span class=n>ip_layer</span><span class=o>.</span><span class=n>len</span> <span class=o>+</span> <span class=mi>14</span> <span class=o>+</span> <span class=mi>4</span><span class=si>}</span><span class=s2> bytes&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  Efficiency: </span><span class=si>{</span><span class=n>efficiency</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>%&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  TCP Flags: </span><span class=si>{</span><span class=n>tcp_layer</span><span class=o>.</span><span class=n>flags</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 비정상 패턴 감지</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>l4_sdu_size</span> <span class=o>&lt;</span> <span class=mi>10</span> <span class=ow>and</span> <span class=n>efficiency</span> <span class=o>&lt;</span> <span class=mi>10</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  ⚠️ 매우 작은 SDU (Nagle 비활성화 가능성)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>ip_layer</span><span class=o>.</span><span class=n>flags</span><span class=o>.</span><span class=n>MF</span> <span class=ow>or</span> <span class=n>ip_layer</span><span class=o>.</span><span class=n>frag_offset</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  ⚠️ IP 단편화 발생&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>tcp_layer</span><span class=o>.</span><span class=n>flags</span> <span class=o>&amp;</span> <span class=mh>0x08</span><span class=p>:</span>  <span class=c1># PSH 플래그</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  📌 푸시 데이터 (즉시 전달)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 실시간 모니터링 시작</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;SDU 모니터링 시작 (Ctrl+C로 중지)…&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>sniff</span><span class=p>(</span><span class=nb>filter</span><span class=o>=</span><span class=s2>&#34;tcp&#34;</span><span class=p>,</span> <span class=n>prn</span><span class=o>=</span><span class=n>analyze_sdu</span><span class=p>,</span> <span class=n>store</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>트러블슈팅 체크리스트</strong>:</p><ul><li><input disabled type=checkbox> <strong>MTU/MSS 검증</strong>: 경로 상의 모든 장비 MTU 확인, PMTUD 작동 확인</li><li><input disabled type=checkbox> <strong>헤더 분석</strong>: Wireshark 로 각 계층 헤더 크기 확인, 예상치와 비교</li><li><input disabled type=checkbox> <strong>분할/재조립</strong>: 분할된 패킷 비율 측정, 과도한 분할 시 MTU 조정</li><li><input disabled type=checkbox> <strong>순서 확인</strong>: TCP 시퀀스 번호 연속성 확인, 재정렬 발생 빈도 측정</li><li><input disabled type=checkbox> <strong>타이밍</strong>: RTT, 재전송 타임아웃, 큐잉 지연 측정</li><li><input disabled type=checkbox> <strong>버퍼</strong>: 송수신 버퍼 크기 확인, 오버플로 로그 점검</li><li><input disabled type=checkbox> <strong>QoS</strong>: ToS/DSCP 필드 설정 확인, 우선순위 적용 여부 검증</li></ul><p>[RF:#34, #35, #36]</p><h2 id=section-5-성능-최적화-및-트러블슈팅>Section 5: 성능 최적화 및 트러블슈팅<a hidden class=anchor aria-hidden=true href=#section-5-성능-최적화-및-트러블슈팅>#</a></h2><p><strong>Section Overview</strong>: 네트워크 실무에서 SDU 크기, PDU 구조, 계층별 문제 진단 및 최적화 방안을 다룬다.</p><h3 id=51-sdu-크기-조정-및-네트워크-성능>5.1 SDU 크기 조정 및 네트워크 성능<a hidden class=anchor aria-hidden=true href=#51-sdu-크기-조정-및-네트워크-성능>#</a></h3><p><strong>Detail Overview</strong>: SDU 크기가 전송 효율, 패킷 드랍률, 네트워크 레이턴시 등에 직접 영향.</p><ul><li>Oracle DB 등에서는 SDU 크기 조절을 통한 네트워크 성능 최적화가 일반적.</li><li>SDU 조정에 실패하면, 패킷 드랍·네트워크 느려짐·에러율 증가 등 실무 문제 발생.<br>[8][6]</li></ul><h3 id=52-실무-트러블슈팅>5.2 실무 트러블슈팅<a hidden class=anchor aria-hidden=true href=#52-실무-트러블슈팅>#</a></h3><ul><li>SDU/PDU 분류와 캡슐화 과정을 정확히 이해하면 레이어별 트러블 발생시 데이터 손실 위치, 패킷 분실 원인 규명, 성능 최적화에 용이하다.</li><li>각 계층의 PDU 레이아웃·헤더 정보 분석은 실전 트러블슈팅에 필수.<br>[3][4][2]</li></ul><h2 id=실무-적용-및-베스트-프랙티스>실무 적용 및 베스트 프랙티스<a hidden class=anchor aria-hidden=true href=#실무-적용-및-베스트-프랙티스>#</a></h2><p>프로토콜 설계 시 SDU 고려사항, 성능 튜닝, 보안 측면을 다룬다.</p><h3 id=프로토콜-설계-가이드>프로토콜 설계 가이드<a hidden class=anchor aria-hidden=true href=#프로토콜-설계-가이드>#</a></h3><p>새로운 프로토콜 설계 시 SDU 처리 원칙을 다룬다.</p><h4 id=sdu-설계-원칙>SDU 설계 원칙<a hidden class=anchor aria-hidden=true href=#sdu-설계-원칙>#</a></h4><ol><li><p><strong>명확한 서비스 경계</strong>:</p><ul><li>상위/하위 계층과의 인터페이스를 명시적으로 정의</li><li>SAP 주소 공간 설계</li><li>ICI 파라미터 최소화 (복잡도 감소)</li></ul></li><li><p><strong>투명성 보장</strong>:</p><ul><li>SDU 내용을 해석하거나 수정하지 않음</li><li>End-to-End 원칙 준수</li><li>중간 노드의 SDU 불투명성</li></ul></li><li><p><strong>효율적 크기 관리</strong>:</p><ul><li>적절한 최소/최대 SDU 크기 정의</li><li>분할/재조립 메커니즘 설계</li><li>오버헤드 최소화</li></ul></li><li><p><strong>에러 처리</strong>:</p><ul><li>SDU 손실, 순서 뒤바뀜, 중복에 대한 처리</li><li>재전송 정책</li><li>타임아웃 설정</li></ul></li></ol><p><strong>프로토콜 스펙 예시 (의사 규격)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1> 1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2> 2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3> 3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4> 4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5> 5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6> 6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7> 7</a>
</span><span class=lnt id=hl-19-8><a class=lnlinks href=#hl-19-8> 8</a>
</span><span class=lnt id=hl-19-9><a class=lnlinks href=#hl-19-9> 9</a>
</span><span class=lnt id=hl-19-10><a class=lnlinks href=#hl-19-10>10</a>
</span><span class=lnt id=hl-19-11><a class=lnlinks href=#hl-19-11>11</a>
</span><span class=lnt id=hl-19-12><a class=lnlinks href=#hl-19-12>12</a>
</span><span class=lnt id=hl-19-13><a class=lnlinks href=#hl-19-13>13</a>
</span><span class=lnt id=hl-19-14><a class=lnlinks href=#hl-19-14>14</a>
</span><span class=lnt id=hl-19-15><a class=lnlinks href=#hl-19-15>15</a>
</span><span class=lnt id=hl-19-16><a class=lnlinks href=#hl-19-16>16</a>
</span><span class=lnt id=hl-19-17><a class=lnlinks href=#hl-19-17>17</a>
</span><span class=lnt id=hl-19-18><a class=lnlinks href=#hl-19-18>18</a>
</span><span class=lnt id=hl-19-19><a class=lnlinks href=#hl-19-19>19</a>
</span><span class=lnt id=hl-19-20><a class=lnlinks href=#hl-19-20>20</a>
</span><span class=lnt id=hl-19-21><a class=lnlinks href=#hl-19-21>21</a>
</span><span class=lnt id=hl-19-22><a class=lnlinks href=#hl-19-22>22</a>
</span><span class=lnt id=hl-19-23><a class=lnlinks href=#hl-19-23>23</a>
</span><span class=lnt id=hl-19-24><a class=lnlinks href=#hl-19-24>24</a>
</span><span class=lnt id=hl-19-25><a class=lnlinks href=#hl-19-25>25</a>
</span><span class=lnt id=hl-19-26><a class=lnlinks href=#hl-19-26>26</a>
</span><span class=lnt id=hl-19-27><a class=lnlinks href=#hl-19-27>27</a>
</span><span class=lnt id=hl-19-28><a class=lnlinks href=#hl-19-28>28</a>
</span><span class=lnt id=hl-19-29><a class=lnlinks href=#hl-19-29>29</a>
</span><span class=lnt id=hl-19-30><a class=lnlinks href=#hl-19-30>30</a>
</span><span class=lnt id=hl-19-31><a class=lnlinks href=#hl-19-31>31</a>
</span><span class=lnt id=hl-19-32><a class=lnlinks href=#hl-19-32>32</a>
</span><span class=lnt id=hl-19-33><a class=lnlinks href=#hl-19-33>33</a>
</span><span class=lnt id=hl-19-34><a class=lnlinks href=#hl-19-34>34</a>
</span><span class=lnt id=hl-19-35><a class=lnlinks href=#hl-19-35>35</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Protocol: MyProtocol (Hypothetical)
</span></span><span class=line><span class=cl>Layer: N
</span></span><span class=line><span class=cl>Service: 신뢰성 있는 메시지 전달
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>1. SDU 정의
</span></span><span class=line><span class=cl>   - N-SDU: 가변 길이 바이트 배열
</span></span><span class=line><span class=cl>   - 최소 크기: 1 byte
</span></span><span class=line><span class=cl>   - 최대 크기: 65,535 bytes
</span></span><span class=line><span class=cl>   - 인코딩: 8-bit 바이너리
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>2. PDU 구조
</span></span><span class=line><span class=cl>   N-PDU = N-PCI + N-SDU
</span></span><span class=line><span class=cl>   
</span></span><span class=line><span class=cl>   N-PCI 필드:
</span></span><span class=line><span class=cl>   - Version (4 bits): 프로토콜 버전
</span></span><span class=line><span class=cl>   - Length (16 bits): SDU 길이 (bytes)
</span></span><span class=line><span class=cl>   - Sequence (32 bits): 순서 번호
</span></span><span class=line><span class=cl>   - Flags (8 bits): SYN, ACK, FIN, RST
</span></span><span class=line><span class=cl>   - Checksum (16 bits): CRC-16
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>3. 서비스 프리미티브
</span></span><span class=line><span class=cl>   - N-DATA.req(dest_addr, sdu, priority)
</span></span><span class=line><span class=cl>   - N-DATA.ind(src_addr, sdu)
</span></span><span class=line><span class=cl>   - N-DATA-ACK.req(seq_num)
</span></span><span class=line><span class=cl>   - N-DATA-ACK.cnf(seq_num, status)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>4. SDU 분할
</span></span><span class=line><span class=cl>   - 최대 전송 단위: (하위 계층 MTU - N-PCI 크기)
</span></span><span class=line><span class=cl>   - 분할 시 Sequence 번호 증분
</span></span><span class=line><span class=cl>   - 재조립 버퍼: 10 × MTU
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>5. 에러 처리
</span></span><span class=line><span class=cl>   - Checksum 실패: SDU 폐기, NACK 전송
</span></span><span class=line><span class=cl>   - 순서 오류: 재정렬 버퍼 사용, 타임아웃 5초
</span></span><span class=line><span class=cl>   - 중복: Sequence 번호로 감지 및 제거
</span></span></code></pre></td></tr></table></div></div><p><strong>계층 간 인터페이스 설계 (API)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1> 1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2> 2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3> 3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4> 4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5> 5</a>
</span><span class=lnt id=hl-20-6><a class=lnlinks href=#hl-20-6> 6</a>
</span><span class=lnt id=hl-20-7><a class=lnlinks href=#hl-20-7> 7</a>
</span><span class=lnt id=hl-20-8><a class=lnlinks href=#hl-20-8> 8</a>
</span><span class=lnt id=hl-20-9><a class=lnlinks href=#hl-20-9> 9</a>
</span><span class=lnt id=hl-20-10><a class=lnlinks href=#hl-20-10>10</a>
</span><span class=lnt id=hl-20-11><a class=lnlinks href=#hl-20-11>11</a>
</span><span class=lnt id=hl-20-12><a class=lnlinks href=#hl-20-12>12</a>
</span><span class=lnt id=hl-20-13><a class=lnlinks href=#hl-20-13>13</a>
</span><span class=lnt id=hl-20-14><a class=lnlinks href=#hl-20-14>14</a>
</span><span class=lnt id=hl-20-15><a class=lnlinks href=#hl-20-15>15</a>
</span><span class=lnt id=hl-20-16><a class=lnlinks href=#hl-20-16>16</a>
</span><span class=lnt id=hl-20-17><a class=lnlinks href=#hl-20-17>17</a>
</span><span class=lnt id=hl-20-18><a class=lnlinks href=#hl-20-18>18</a>
</span><span class=lnt id=hl-20-19><a class=lnlinks href=#hl-20-19>19</a>
</span><span class=lnt id=hl-20-20><a class=lnlinks href=#hl-20-20>20</a>
</span><span class=lnt id=hl-20-21><a class=lnlinks href=#hl-20-21>21</a>
</span><span class=lnt id=hl-20-22><a class=lnlinks href=#hl-20-22>22</a>
</span><span class=lnt id=hl-20-23><a class=lnlinks href=#hl-20-23>23</a>
</span><span class=lnt id=hl-20-24><a class=lnlinks href=#hl-20-24>24</a>
</span><span class=lnt id=hl-20-25><a class=lnlinks href=#hl-20-25>25</a>
</span><span class=lnt id=hl-20-26><a class=lnlinks href=#hl-20-26>26</a>
</span><span class=lnt id=hl-20-27><a class=lnlinks href=#hl-20-27>27</a>
</span><span class=lnt id=hl-20-28><a class=lnlinks href=#hl-20-28>28</a>
</span><span class=lnt id=hl-20-29><a class=lnlinks href=#hl-20-29>29</a>
</span><span class=lnt id=hl-20-30><a class=lnlinks href=#hl-20-30>30</a>
</span><span class=lnt id=hl-20-31><a class=lnlinks href=#hl-20-31>31</a>
</span><span class=lnt id=hl-20-32><a class=lnlinks href=#hl-20-32>32</a>
</span><span class=lnt id=hl-20-33><a class=lnlinks href=#hl-20-33>33</a>
</span><span class=lnt id=hl-20-34><a class=lnlinks href=#hl-20-34>34</a>
</span><span class=lnt id=hl-20-35><a class=lnlinks href=#hl-20-35>35</a>
</span><span class=lnt id=hl-20-36><a class=lnlinks href=#hl-20-36>36</a>
</span><span class=lnt id=hl-20-37><a class=lnlinks href=#hl-20-37>37</a>
</span><span class=lnt id=hl-20-38><a class=lnlinks href=#hl-20-38>38</a>
</span><span class=lnt id=hl-20-39><a class=lnlinks href=#hl-20-39>39</a>
</span><span class=lnt id=hl-20-40><a class=lnlinks href=#hl-20-40>40</a>
</span><span class=lnt id=hl-20-41><a class=lnlinks href=#hl-20-41>41</a>
</span><span class=lnt id=hl-20-42><a class=lnlinks href=#hl-20-42>42</a>
</span><span class=lnt id=hl-20-43><a class=lnlinks href=#hl-20-43>43</a>
</span><span class=lnt id=hl-20-44><a class=lnlinks href=#hl-20-44>44</a>
</span><span class=lnt id=hl-20-45><a class=lnlinks href=#hl-20-45>45</a>
</span><span class=lnt id=hl-20-46><a class=lnlinks href=#hl-20-46>46</a>
</span><span class=lnt id=hl-20-47><a class=lnlinks href=#hl-20-47>47</a>
</span><span class=lnt id=hl-20-48><a class=lnlinks href=#hl-20-48>48</a>
</span><span class=lnt id=hl-20-49><a class=lnlinks href=#hl-20-49>49</a>
</span><span class=lnt id=hl-20-50><a class=lnlinks href=#hl-20-50>50</a>
</span><span class=lnt id=hl-20-51><a class=lnlinks href=#hl-20-51>51</a>
</span><span class=lnt id=hl-20-52><a class=lnlinks href=#hl-20-52>52</a>
</span><span class=lnt id=hl-20-53><a class=lnlinks href=#hl-20-53>53</a>
</span><span class=lnt id=hl-20-54><a class=lnlinks href=#hl-20-54>54</a>
</span><span class=lnt id=hl-20-55><a class=lnlinks href=#hl-20-55>55</a>
</span><span class=lnt id=hl-20-56><a class=lnlinks href=#hl-20-56>56</a>
</span><span class=lnt id=hl-20-57><a class=lnlinks href=#hl-20-57>57</a>
</span><span class=lnt id=hl-20-58><a class=lnlinks href=#hl-20-58>58</a>
</span><span class=lnt id=hl-20-59><a class=lnlinks href=#hl-20-59>59</a>
</span><span class=lnt id=hl-20-60><a class=lnlinks href=#hl-20-60>60</a>
</span><span class=lnt id=hl-20-61><a class=lnlinks href=#hl-20-61>61</a>
</span><span class=lnt id=hl-20-62><a class=lnlinks href=#hl-20-62>62</a>
</span><span class=lnt id=hl-20-63><a class=lnlinks href=#hl-20-63>63</a>
</span><span class=lnt id=hl-20-64><a class=lnlinks href=#hl-20-64>64</a>
</span><span class=lnt id=hl-20-65><a class=lnlinks href=#hl-20-65>65</a>
</span><span class=lnt id=hl-20-66><a class=lnlinks href=#hl-20-66>66</a>
</span><span class=lnt id=hl-20-67><a class=lnlinks href=#hl-20-67>67</a>
</span><span class=lnt id=hl-20-68><a class=lnlinks href=#hl-20-68>68</a>
</span><span class=lnt id=hl-20-69><a class=lnlinks href=#hl-20-69>69</a>
</span><span class=lnt id=hl-20-70><a class=lnlinks href=#hl-20-70>70</a>
</span><span class=lnt id=hl-20-71><a class=lnlinks href=#hl-20-71>71</a>
</span><span class=lnt id=hl-20-72><a class=lnlinks href=#hl-20-72>72</a>
</span><span class=lnt id=hl-20-73><a class=lnlinks href=#hl-20-73>73</a>
</span><span class=lnt id=hl-20-74><a class=lnlinks href=#hl-20-74>74</a>
</span><span class=lnt id=hl-20-75><a class=lnlinks href=#hl-20-75>75</a>
</span><span class=lnt id=hl-20-76><a class=lnlinks href=#hl-20-76>76</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>LayerNService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    N 계층 서비스 인터페이스 (추상 클래스)
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>data_request</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>dest_addr</span><span class=p>,</span> <span class=n>sdu</span><span class=p>,</span> <span class=n>ici</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        N-DATA.request 프리미티브
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        Args:
</span></span></span><span class=line><span class=cl><span class=s2>            dest_addr: 목적지 SAP 주소
</span></span></span><span class=line><span class=cl><span class=s2>            sdu: N-SDU (bytes)
</span></span></span><span class=line><span class=cl><span class=s2>            ici: 인터페이스 제어 정보 (dict)
</span></span></span><span class=line><span class=cl><span class=s2>                - priority: 우선순위 (0-7)
</span></span></span><span class=line><span class=cl><span class=s2>                - qos: QoS 플래그
</span></span></span><span class=line><span class=cl><span class=s2>                - timeout: 타임아웃 (초)
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        Returns:
</span></span></span><span class=line><span class=cl><span class=s2>            request_id: 요청 식별자
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        Raises:
</span></span></span><span class=line><span class=cl><span class=s2>            ValueError: SDU 크기 초과
</span></span></span><span class=line><span class=cl><span class=s2>            ConnectionError: 연결 실패
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># SDU 크기 검증</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>sdu</span><span class=p>)</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>MAX_SDU_SIZE</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;SDU too large: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>sdu</span><span class=p>)</span><span class=si>}</span><span class=s2> &gt; </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>MAX_SDU_SIZE</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># ICI 기본값 설정</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>ici</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>ici</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;priority&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>&#39;qos&#39;</span><span class=p>:</span> <span class=s1>&#39;BEST_EFFORT&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># PDU 생성 (PCI + SDU)</span>
</span></span><span class=line><span class=cl>        <span class=n>pdu</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_pdu</span><span class=p>(</span><span class=n>dest_addr</span><span class=p>,</span> <span class=n>sdu</span><span class=p>,</span> <span class=n>ici</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 하위 계층에 전달</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_send_to_lower_layer</span><span class=p>(</span><span class=n>pdu</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>data_indication</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>src_addr</span><span class=p>,</span> <span class=n>sdu</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        N-DATA.indication 프리미티브
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        Args:
</span></span></span><span class=line><span class=cl><span class=s2>            src_addr: 송신 SAP 주소
</span></span></span><span class=line><span class=cl><span class=s2>            sdu: N-SDU (bytes)
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 상위 계층에 전달</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_deliver_to_upper_layer</span><span class=p>(</span><span class=n>src_addr</span><span class=p>,</span> <span class=n>sdu</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_create_pdu</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>dest_addr</span><span class=p>,</span> <span class=n>sdu</span><span class=p>,</span> <span class=n>ici</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        PDU 생성 (PCI + SDU)
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>pci</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_pci</span><span class=p>(</span><span class=n>dest_addr</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>sdu</span><span class=p>),</span> <span class=n>ici</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>pci</span> <span class=o>+</span> <span class=n>sdu</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_create_pci</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>dest_addr</span><span class=p>,</span> <span class=n>sdu_length</span><span class=p>,</span> <span class=n>ici</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        프로토콜 제어 정보 생성
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제 구현에서는 프로토콜 규격에 따라 헤더 생성</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_send_to_lower_layer</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pdu</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        하위 계층 서비스 호출
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># (N-1)-DATA.request(…) 호출</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_deliver_to_upper_layer</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>src_addr</span><span class=p>,</span> <span class=n>sdu</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        상위 계층에 indication 전달
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 콜백 또는 이벤트로 상위 계층에 알림</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=성능-튜닝-체크리스트>성능 튜닝 체크리스트<a hidden class=anchor aria-hidden=true href=#성능-튜닝-체크리스트>#</a></h3><p>실무 환경에서 SDU 관련 성능을 최적화하는 방법을 정리한다.</p><p><strong>성능 튜닝 체크리스트</strong>:</p><table><thead><tr><th>항목</th><th>확인 사항</th><th>권장 값/설정</th><th>영향</th></tr></thead><tbody><tr><td><strong>MTU</strong></td><td>네트워크 경로의 최소 MTU</td><td>1500 (WAN), 9000 (LAN)</td><td>분할 최소화</td></tr><tr><td><strong>TCP 버퍼</strong></td><td>송수신 버퍼 크기</td><td>BDP 기반 (BDP = Bandwidth × RTT)</td><td>처리량 향상</td></tr><tr><td><strong>Nagle 알고리즘</strong></td><td>실시간 vs 처리량</td><td>실시간: OFF, 배치: ON</td><td>지연 vs 효율</td></tr><tr><td><strong>TCP Window Scaling</strong></td><td>대용량 전송 시 윈도우 크기</td><td>RFC 7323 활성화</td><td>고속 네트워크</td></tr><tr><td><strong>QoS/ToS</strong></td><td>트래픽 분류 및 우선순위</td><td>DSCP 설정 (EF, AF, BE)</td><td>지연/손실률</td></tr><tr><td><strong>Jumbo Frame</strong></td><td>데이터센터 내부</td><td>MTU 9000</td><td>오버헤드 감소</td></tr><tr><td><strong>Header Compression</strong></td><td>무선/위성 링크</td><td>ROHC, VJ Compression</td><td>대역폭 절약</td></tr></tbody></table><p><strong>Linux 시스템 튜닝 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1> 1</a>
</span><span class=lnt id=hl-21-2><a class=lnlinks href=#hl-21-2> 2</a>
</span><span class=lnt id=hl-21-3><a class=lnlinks href=#hl-21-3> 3</a>
</span><span class=lnt id=hl-21-4><a class=lnlinks href=#hl-21-4> 4</a>
</span><span class=lnt id=hl-21-5><a class=lnlinks href=#hl-21-5> 5</a>
</span><span class=lnt id=hl-21-6><a class=lnlinks href=#hl-21-6> 6</a>
</span><span class=lnt id=hl-21-7><a class=lnlinks href=#hl-21-7> 7</a>
</span><span class=lnt id=hl-21-8><a class=lnlinks href=#hl-21-8> 8</a>
</span><span class=lnt id=hl-21-9><a class=lnlinks href=#hl-21-9> 9</a>
</span><span class=lnt id=hl-21-10><a class=lnlinks href=#hl-21-10>10</a>
</span><span class=lnt id=hl-21-11><a class=lnlinks href=#hl-21-11>11</a>
</span><span class=lnt id=hl-21-12><a class=lnlinks href=#hl-21-12>12</a>
</span><span class=lnt id=hl-21-13><a class=lnlinks href=#hl-21-13>13</a>
</span><span class=lnt id=hl-21-14><a class=lnlinks href=#hl-21-14>14</a>
</span><span class=lnt id=hl-21-15><a class=lnlinks href=#hl-21-15>15</a>
</span><span class=lnt id=hl-21-16><a class=lnlinks href=#hl-21-16>16</a>
</span><span class=lnt id=hl-21-17><a class=lnlinks href=#hl-21-17>17</a>
</span><span class=lnt id=hl-21-18><a class=lnlinks href=#hl-21-18>18</a>
</span><span class=lnt id=hl-21-19><a class=lnlinks href=#hl-21-19>19</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># TCP 버퍼 크기 증가 (BDP 기반)</span>
</span></span><span class=line><span class=cl><span class=c1># 예: 1 Gbps 네트워크, RTT 100ms → BDP = 12.5 MB</span>
</span></span><span class=line><span class=cl>sudo sysctl -w net.core.rmem_max<span class=o>=</span><span class=m>134217728</span>  <span class=c1># 128 MB</span>
</span></span><span class=line><span class=cl>sudo sysctl -w net.core.wmem_max<span class=o>=</span><span class=m>134217728</span>
</span></span><span class=line><span class=cl>sudo sysctl -w net.ipv4.tcp_rmem<span class=o>=</span><span class=s2>&#34;4096 87380 134217728&#34;</span>
</span></span><span class=line><span class=cl>sudo sysctl -w net.ipv4.tcp_wmem<span class=o>=</span><span class=s2>&#34;4096 65536 134217728&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># TCP Window Scaling 활성화</span>
</span></span><span class=line><span class=cl>sudo sysctl -w net.ipv4.tcp_window_scaling<span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Nagle 알고리즘 제어 (애플리케이션 레벨)</span>
</span></span><span class=line><span class=cl><span class=c1># Python에서: sock.setsockopt(socket.IPPROTO_TCP, socket.TCP_NODELAY, 1)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># MTU 설정 (Jumbo Frame)</span>
</span></span><span class=line><span class=cl>sudo ip link <span class=nb>set</span> eth0 mtu <span class=m>9000</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># QoS 마킹 (iptables)</span>
</span></span><span class=line><span class=cl>sudo iptables -t mangle -A OUTPUT -p tcp --dport <span class=m>22</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  -j DSCP --set-dscp-class EF  <span class=c1># SSH 트래픽 우선순위</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>BDP (Bandwidth-Delay Product) 계산 도구</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1> 1</a>
</span><span class=lnt id=hl-22-2><a class=lnlinks href=#hl-22-2> 2</a>
</span><span class=lnt id=hl-22-3><a class=lnlinks href=#hl-22-3> 3</a>
</span><span class=lnt id=hl-22-4><a class=lnlinks href=#hl-22-4> 4</a>
</span><span class=lnt id=hl-22-5><a class=lnlinks href=#hl-22-5> 5</a>
</span><span class=lnt id=hl-22-6><a class=lnlinks href=#hl-22-6> 6</a>
</span><span class=lnt id=hl-22-7><a class=lnlinks href=#hl-22-7> 7</a>
</span><span class=lnt id=hl-22-8><a class=lnlinks href=#hl-22-8> 8</a>
</span><span class=lnt id=hl-22-9><a class=lnlinks href=#hl-22-9> 9</a>
</span><span class=lnt id=hl-22-10><a class=lnlinks href=#hl-22-10>10</a>
</span><span class=lnt id=hl-22-11><a class=lnlinks href=#hl-22-11>11</a>
</span><span class=lnt id=hl-22-12><a class=lnlinks href=#hl-22-12>12</a>
</span><span class=lnt id=hl-22-13><a class=lnlinks href=#hl-22-13>13</a>
</span><span class=lnt id=hl-22-14><a class=lnlinks href=#hl-22-14>14</a>
</span><span class=lnt id=hl-22-15><a class=lnlinks href=#hl-22-15>15</a>
</span><span class=lnt id=hl-22-16><a class=lnlinks href=#hl-22-16>16</a>
</span><span class=lnt id=hl-22-17><a class=lnlinks href=#hl-22-17>17</a>
</span><span class=lnt id=hl-22-18><a class=lnlinks href=#hl-22-18>18</a>
</span><span class=lnt id=hl-22-19><a class=lnlinks href=#hl-22-19>19</a>
</span><span class=lnt id=hl-22-20><a class=lnlinks href=#hl-22-20>20</a>
</span><span class=lnt id=hl-22-21><a class=lnlinks href=#hl-22-21>21</a>
</span><span class=lnt id=hl-22-22><a class=lnlinks href=#hl-22-22>22</a>
</span><span class=lnt id=hl-22-23><a class=lnlinks href=#hl-22-23>23</a>
</span><span class=lnt id=hl-22-24><a class=lnlinks href=#hl-22-24>24</a>
</span><span class=lnt id=hl-22-25><a class=lnlinks href=#hl-22-25>25</a>
</span><span class=lnt id=hl-22-26><a class=lnlinks href=#hl-22-26>26</a>
</span><span class=lnt id=hl-22-27><a class=lnlinks href=#hl-22-27>27</a>
</span><span class=lnt id=hl-22-28><a class=lnlinks href=#hl-22-28>28</a>
</span><span class=lnt id=hl-22-29><a class=lnlinks href=#hl-22-29>29</a>
</span><span class=lnt id=hl-22-30><a class=lnlinks href=#hl-22-30>30</a>
</span><span class=lnt id=hl-22-31><a class=lnlinks href=#hl-22-31>31</a>
</span><span class=lnt id=hl-22-32><a class=lnlinks href=#hl-22-32>32</a>
</span><span class=lnt id=hl-22-33><a class=lnlinks href=#hl-22-33>33</a>
</span><span class=lnt id=hl-22-34><a class=lnlinks href=#hl-22-34>34</a>
</span><span class=lnt id=hl-22-35><a class=lnlinks href=#hl-22-35>35</a>
</span><span class=lnt id=hl-22-36><a class=lnlinks href=#hl-22-36>36</a>
</span><span class=lnt id=hl-22-37><a class=lnlinks href=#hl-22-37>37</a>
</span><span class=lnt id=hl-22-38><a class=lnlinks href=#hl-22-38>38</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>calculate_optimal_buffer</span><span class=p>(</span><span class=n>bandwidth_mbps</span><span class=p>,</span> <span class=n>rtt_ms</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    최적 TCP 버퍼 크기 계산
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    Args:
</span></span></span><span class=line><span class=cl><span class=s2>        bandwidth_mbps: 대역폭 (Mbps)
</span></span></span><span class=line><span class=cl><span class=s2>        rtt_ms: 왕복 지연 시간 (ms)
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    Returns:
</span></span></span><span class=line><span class=cl><span class=s2>        최적 버퍼 크기 (bytes)
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=c1># BDP = Bandwidth × RTT</span>
</span></span><span class=line><span class=cl>    <span class=n>bandwidth_bps</span> <span class=o>=</span> <span class=n>bandwidth_mbps</span> <span class=o>*</span> <span class=mi>1_000_000</span>
</span></span><span class=line><span class=cl>    <span class=n>rtt_sec</span> <span class=o>=</span> <span class=n>rtt_ms</span> <span class=o>/</span> <span class=mi>1000</span>
</span></span><span class=line><span class=cl>    <span class=n>bdp_bits</span> <span class=o>=</span> <span class=n>bandwidth_bps</span> <span class=o>*</span> <span class=n>rtt_sec</span>
</span></span><span class=line><span class=cl>    <span class=n>bdp_bytes</span> <span class=o>=</span> <span class=n>bdp_bits</span> <span class=o>/</span> <span class=mi>8</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 안전 마진 추가 (2x)</span>
</span></span><span class=line><span class=cl>    <span class=n>optimal_buffer</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>bdp_bytes</span> <span class=o>*</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>optimal_buffer</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;최적 버퍼 크기 계산기&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;-&#34;</span> <span class=o>*</span> <span class=mi>40</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>scenarios</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;로컬 네트워크&#34;</span><span class=p>,</span> <span class=mi>1000</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;광역 네트워크&#34;</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=mi>50</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;인터넷&#34;</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>100</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=s2>&#34;위성 링크&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>600</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>name</span><span class=p>,</span> <span class=n>bw</span><span class=p>,</span> <span class=n>rtt</span> <span class=ow>in</span> <span class=n>scenarios</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>buffer_size</span> <span class=o>=</span> <span class=n>calculate_optimal_buffer</span><span class=p>(</span><span class=n>bw</span><span class=p>,</span> <span class=n>rtt</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>bw</span><span class=si>}</span><span class=s2> Mbps, RTT </span><span class=si>{</span><span class=n>rtt</span><span class=si>}</span><span class=s2>ms&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  권장 버퍼: </span><span class=si>{</span><span class=n>buffer_size</span><span class=si>:</span><span class=s2>,</span><span class=si>}</span><span class=s2> bytes (</span><span class=si>{</span><span class=n>buffer_size</span><span class=o>/</span><span class=mi>1024</span><span class=o>/</span><span class=mi>1024</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2> MB)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>출력 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-23-1><a class=lnlinks href=#hl-23-1> 1</a>
</span><span class=lnt id=hl-23-2><a class=lnlinks href=#hl-23-2> 2</a>
</span><span class=lnt id=hl-23-3><a class=lnlinks href=#hl-23-3> 3</a>
</span><span class=lnt id=hl-23-4><a class=lnlinks href=#hl-23-4> 4</a>
</span><span class=lnt id=hl-23-5><a class=lnlinks href=#hl-23-5> 5</a>
</span><span class=lnt id=hl-23-6><a class=lnlinks href=#hl-23-6> 6</a>
</span><span class=lnt id=hl-23-7><a class=lnlinks href=#hl-23-7> 7</a>
</span><span class=lnt id=hl-23-8><a class=lnlinks href=#hl-23-8> 8</a>
</span><span class=lnt id=hl-23-9><a class=lnlinks href=#hl-23-9> 9</a>
</span><span class=lnt id=hl-23-10><a class=lnlinks href=#hl-23-10>10</a>
</span><span class=lnt id=hl-23-11><a class=lnlinks href=#hl-23-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>로컬 네트워크: 1000 Mbps, RTT 1ms
</span></span><span class=line><span class=cl>  권장 버퍼: 250,000 bytes (0.2 MB)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>광역 네트워크: 100 Mbps, RTT 50ms
</span></span><span class=line><span class=cl>  권장 버퍼: 1,250,000 bytes (1.2 MB)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>인터넷: 10 Mbps, RTT 100ms
</span></span><span class=line><span class=cl>  권장 버퍼: 250,000 bytes (0.2 MB)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>위성 링크: 1 Mbps, RTT 600ms
</span></span><span class=line><span class=cl>  권장 버퍼: 150,000 bytes (0.1 MB)
</span></span></code></pre></td></tr></table></div></div><h3 id=보안-및-인증>보안 및 인증<a hidden class=anchor aria-hidden=true href=#보안-및-인증>#</a></h3><p>SDU/PDU 변환 과정 및 전달 시 보안·인증 관련 주요 개념을 설명한다.</p><h4 id=캡슐화와-보안>캡슐화와 보안<a hidden class=anchor aria-hidden=true href=#캡슐화와-보안>#</a></h4><p>각 계층의 헤더/트레일러에는 에러 제어, 인증 정보, 암호화 데이터 등이 추가된다.</p><ul><li>SDU 가 PDU 로 변환될 때, 예를 들어 TLS, IPSec 과 같은 보안 프로토콜 계층에서 암호화 혹은 인증 데이터가 헤더/페이로드에 추가된다.</li><li>인증·무결성·에러 제어를 위해 각 계층에서 전달하는 데이터 단위에 고유 제어 정보가 추가되어, 오로지 상위 계층 데이터 (SDU) 만으로 통신 불가.</li></ul><h4 id=보안-고려사항>보안 고려사항<a hidden class=anchor aria-hidden=true href=#보안-고려사항>#</a></h4><p>SDU 처리 시 보안 위협과 대응 방안을 다룬다.</p><p><strong>SDU 관련 보안 위협</strong>:</p><table><thead><tr><th>위협</th><th>설명</th><th>영향</th><th>대응 방안</th></tr></thead><tbody><tr><td><strong>SDU 스니핑</strong></td><td>평문 SDU 도청</td><td>기밀성 침해</td><td>TLS/IPSec 암호화</td></tr><tr><td><strong>SDU 변조</strong></td><td>전송 중 데이터 조작</td><td>무결성 침해</td><td>MAC, 디지털 서명</td></tr><tr><td><strong>SDU 재전송 공격</strong></td><td>과거 SDU 재사용</td><td>인증 우회</td><td>Nonce, Timestamp</td></tr><tr><td><strong>SDU 플러딩</strong></td><td>대량 SDU 전송으로 과부하</td><td>가용성 침해</td><td>Rate Limiting, DDoS 방어</td></tr><tr><td><strong>SDU 단편화 공격</strong></td><td>악의적 IP 단편화</td><td>방화벽 우회</td><td>단편화 재조립 검증</td></tr><tr><td><strong>SDU 크기 공격</strong></td><td>비정상 크기 SDU</td><td>버퍼 오버플로</td><td>크기 검증, 샌드박싱</td></tr></tbody></table><p><strong>TLS 를 통한 SDU 보호</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1> 1</a>
</span><span class=lnt id=hl-24-2><a class=lnlinks href=#hl-24-2> 2</a>
</span><span class=lnt id=hl-24-3><a class=lnlinks href=#hl-24-3> 3</a>
</span><span class=lnt id=hl-24-4><a class=lnlinks href=#hl-24-4> 4</a>
</span><span class=lnt id=hl-24-5><a class=lnlinks href=#hl-24-5> 5</a>
</span><span class=lnt id=hl-24-6><a class=lnlinks href=#hl-24-6> 6</a>
</span><span class=lnt id=hl-24-7><a class=lnlinks href=#hl-24-7> 7</a>
</span><span class=lnt id=hl-24-8><a class=lnlinks href=#hl-24-8> 8</a>
</span><span class=lnt id=hl-24-9><a class=lnlinks href=#hl-24-9> 9</a>
</span><span class=lnt id=hl-24-10><a class=lnlinks href=#hl-24-10>10</a>
</span><span class=lnt id=hl-24-11><a class=lnlinks href=#hl-24-11>11</a>
</span><span class=lnt id=hl-24-12><a class=lnlinks href=#hl-24-12>12</a>
</span><span class=lnt id=hl-24-13><a class=lnlinks href=#hl-24-13>13</a>
</span><span class=lnt id=hl-24-14><a class=lnlinks href=#hl-24-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Application (L7):
</span></span><span class=line><span class=cl>  평문 SDU (민감 데이터)
</span></span><span class=line><span class=cl>      ↓
</span></span><span class=line><span class=cl>TLS (L6/L7):
</span></span><span class=line><span class=cl>  암호화된 SDU
</span></span><span class=line><span class=cl>  [TLS Header] + Encrypted(평문 SDU) + MAC
</span></span><span class=line><span class=cl>      ↓
</span></span><span class=line><span class=cl>TCP (L4):
</span></span><span class=line><span class=cl>  TCP SDU = 암호화된 TLS 레코드
</span></span><span class=line><span class=cl>  [TCP Header] + TLS PDU
</span></span><span class=line><span class=cl>      ↓
</span></span><span class=line><span class=cl>IP (L3):
</span></span><span class=line><span class=cl>  IP SDU = TCP 세그먼트
</span></span><span class=line><span class=cl>  [IP Header] + TCP PDU
</span></span></code></pre></td></tr></table></div></div><p><strong>보안 강화 체크리스트</strong>:</p><ul><li><input disabled type=checkbox> <strong>End-to-End 암호화</strong>: TLS 1.3, IPSec 사용</li><li><input disabled type=checkbox> <strong>무결성 검증</strong>: HMAC, 디지털 서명 적용</li><li><input disabled type=checkbox> <strong>재전송 방어</strong>: 시퀀스 번호, 타임스탬프, Nonce 사용</li><li><input disabled type=checkbox> <strong>Rate Limiting</strong>: 송신자당 SDU 전송률 제한</li><li><input disabled type=checkbox> <strong>크기 검증</strong>: 최소/최대 SDU 크기 강제</li><li><input disabled type=checkbox> <strong>단편화 제어</strong>: 불필요한 단편화 차단, 재조립 검증</li><li><input disabled type=checkbox> <strong>로깅/모니터링</strong>: 비정상 SDU 패턴 탐지</li></ul><p><strong>코드 예시: SDU 크기 검증</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-25-1><a class=lnlinks href=#hl-25-1>  1</a>
</span><span class=lnt id=hl-25-2><a class=lnlinks href=#hl-25-2>  2</a>
</span><span class=lnt id=hl-25-3><a class=lnlinks href=#hl-25-3>  3</a>
</span><span class=lnt id=hl-25-4><a class=lnlinks href=#hl-25-4>  4</a>
</span><span class=lnt id=hl-25-5><a class=lnlinks href=#hl-25-5>  5</a>
</span><span class=lnt id=hl-25-6><a class=lnlinks href=#hl-25-6>  6</a>
</span><span class=lnt id=hl-25-7><a class=lnlinks href=#hl-25-7>  7</a>
</span><span class=lnt id=hl-25-8><a class=lnlinks href=#hl-25-8>  8</a>
</span><span class=lnt id=hl-25-9><a class=lnlinks href=#hl-25-9>  9</a>
</span><span class=lnt id=hl-25-10><a class=lnlinks href=#hl-25-10> 10</a>
</span><span class=lnt id=hl-25-11><a class=lnlinks href=#hl-25-11> 11</a>
</span><span class=lnt id=hl-25-12><a class=lnlinks href=#hl-25-12> 12</a>
</span><span class=lnt id=hl-25-13><a class=lnlinks href=#hl-25-13> 13</a>
</span><span class=lnt id=hl-25-14><a class=lnlinks href=#hl-25-14> 14</a>
</span><span class=lnt id=hl-25-15><a class=lnlinks href=#hl-25-15> 15</a>
</span><span class=lnt id=hl-25-16><a class=lnlinks href=#hl-25-16> 16</a>
</span><span class=lnt id=hl-25-17><a class=lnlinks href=#hl-25-17> 17</a>
</span><span class=lnt id=hl-25-18><a class=lnlinks href=#hl-25-18> 18</a>
</span><span class=lnt id=hl-25-19><a class=lnlinks href=#hl-25-19> 19</a>
</span><span class=lnt id=hl-25-20><a class=lnlinks href=#hl-25-20> 20</a>
</span><span class=lnt id=hl-25-21><a class=lnlinks href=#hl-25-21> 21</a>
</span><span class=lnt id=hl-25-22><a class=lnlinks href=#hl-25-22> 22</a>
</span><span class=lnt id=hl-25-23><a class=lnlinks href=#hl-25-23> 23</a>
</span><span class=lnt id=hl-25-24><a class=lnlinks href=#hl-25-24> 24</a>
</span><span class=lnt id=hl-25-25><a class=lnlinks href=#hl-25-25> 25</a>
</span><span class=lnt id=hl-25-26><a class=lnlinks href=#hl-25-26> 26</a>
</span><span class=lnt id=hl-25-27><a class=lnlinks href=#hl-25-27> 27</a>
</span><span class=lnt id=hl-25-28><a class=lnlinks href=#hl-25-28> 28</a>
</span><span class=lnt id=hl-25-29><a class=lnlinks href=#hl-25-29> 29</a>
</span><span class=lnt id=hl-25-30><a class=lnlinks href=#hl-25-30> 30</a>
</span><span class=lnt id=hl-25-31><a class=lnlinks href=#hl-25-31> 31</a>
</span><span class=lnt id=hl-25-32><a class=lnlinks href=#hl-25-32> 32</a>
</span><span class=lnt id=hl-25-33><a class=lnlinks href=#hl-25-33> 33</a>
</span><span class=lnt id=hl-25-34><a class=lnlinks href=#hl-25-34> 34</a>
</span><span class=lnt id=hl-25-35><a class=lnlinks href=#hl-25-35> 35</a>
</span><span class=lnt id=hl-25-36><a class=lnlinks href=#hl-25-36> 36</a>
</span><span class=lnt id=hl-25-37><a class=lnlinks href=#hl-25-37> 37</a>
</span><span class=lnt id=hl-25-38><a class=lnlinks href=#hl-25-38> 38</a>
</span><span class=lnt id=hl-25-39><a class=lnlinks href=#hl-25-39> 39</a>
</span><span class=lnt id=hl-25-40><a class=lnlinks href=#hl-25-40> 40</a>
</span><span class=lnt id=hl-25-41><a class=lnlinks href=#hl-25-41> 41</a>
</span><span class=lnt id=hl-25-42><a class=lnlinks href=#hl-25-42> 42</a>
</span><span class=lnt id=hl-25-43><a class=lnlinks href=#hl-25-43> 43</a>
</span><span class=lnt id=hl-25-44><a class=lnlinks href=#hl-25-44> 44</a>
</span><span class=lnt id=hl-25-45><a class=lnlinks href=#hl-25-45> 45</a>
</span><span class=lnt id=hl-25-46><a class=lnlinks href=#hl-25-46> 46</a>
</span><span class=lnt id=hl-25-47><a class=lnlinks href=#hl-25-47> 47</a>
</span><span class=lnt id=hl-25-48><a class=lnlinks href=#hl-25-48> 48</a>
</span><span class=lnt id=hl-25-49><a class=lnlinks href=#hl-25-49> 49</a>
</span><span class=lnt id=hl-25-50><a class=lnlinks href=#hl-25-50> 50</a>
</span><span class=lnt id=hl-25-51><a class=lnlinks href=#hl-25-51> 51</a>
</span><span class=lnt id=hl-25-52><a class=lnlinks href=#hl-25-52> 52</a>
</span><span class=lnt id=hl-25-53><a class=lnlinks href=#hl-25-53> 53</a>
</span><span class=lnt id=hl-25-54><a class=lnlinks href=#hl-25-54> 54</a>
</span><span class=lnt id=hl-25-55><a class=lnlinks href=#hl-25-55> 55</a>
</span><span class=lnt id=hl-25-56><a class=lnlinks href=#hl-25-56> 56</a>
</span><span class=lnt id=hl-25-57><a class=lnlinks href=#hl-25-57> 57</a>
</span><span class=lnt id=hl-25-58><a class=lnlinks href=#hl-25-58> 58</a>
</span><span class=lnt id=hl-25-59><a class=lnlinks href=#hl-25-59> 59</a>
</span><span class=lnt id=hl-25-60><a class=lnlinks href=#hl-25-60> 60</a>
</span><span class=lnt id=hl-25-61><a class=lnlinks href=#hl-25-61> 61</a>
</span><span class=lnt id=hl-25-62><a class=lnlinks href=#hl-25-62> 62</a>
</span><span class=lnt id=hl-25-63><a class=lnlinks href=#hl-25-63> 63</a>
</span><span class=lnt id=hl-25-64><a class=lnlinks href=#hl-25-64> 64</a>
</span><span class=lnt id=hl-25-65><a class=lnlinks href=#hl-25-65> 65</a>
</span><span class=lnt id=hl-25-66><a class=lnlinks href=#hl-25-66> 66</a>
</span><span class=lnt id=hl-25-67><a class=lnlinks href=#hl-25-67> 67</a>
</span><span class=lnt id=hl-25-68><a class=lnlinks href=#hl-25-68> 68</a>
</span><span class=lnt id=hl-25-69><a class=lnlinks href=#hl-25-69> 69</a>
</span><span class=lnt id=hl-25-70><a class=lnlinks href=#hl-25-70> 70</a>
</span><span class=lnt id=hl-25-71><a class=lnlinks href=#hl-25-71> 71</a>
</span><span class=lnt id=hl-25-72><a class=lnlinks href=#hl-25-72> 72</a>
</span><span class=lnt id=hl-25-73><a class=lnlinks href=#hl-25-73> 73</a>
</span><span class=lnt id=hl-25-74><a class=lnlinks href=#hl-25-74> 74</a>
</span><span class=lnt id=hl-25-75><a class=lnlinks href=#hl-25-75> 75</a>
</span><span class=lnt id=hl-25-76><a class=lnlinks href=#hl-25-76> 76</a>
</span><span class=lnt id=hl-25-77><a class=lnlinks href=#hl-25-77> 77</a>
</span><span class=lnt id=hl-25-78><a class=lnlinks href=#hl-25-78> 78</a>
</span><span class=lnt id=hl-25-79><a class=lnlinks href=#hl-25-79> 79</a>
</span><span class=lnt id=hl-25-80><a class=lnlinks href=#hl-25-80> 80</a>
</span><span class=lnt id=hl-25-81><a class=lnlinks href=#hl-25-81> 81</a>
</span><span class=lnt id=hl-25-82><a class=lnlinks href=#hl-25-82> 82</a>
</span><span class=lnt id=hl-25-83><a class=lnlinks href=#hl-25-83> 83</a>
</span><span class=lnt id=hl-25-84><a class=lnlinks href=#hl-25-84> 84</a>
</span><span class=lnt id=hl-25-85><a class=lnlinks href=#hl-25-85> 85</a>
</span><span class=lnt id=hl-25-86><a class=lnlinks href=#hl-25-86> 86</a>
</span><span class=lnt id=hl-25-87><a class=lnlinks href=#hl-25-87> 87</a>
</span><span class=lnt id=hl-25-88><a class=lnlinks href=#hl-25-88> 88</a>
</span><span class=lnt id=hl-25-89><a class=lnlinks href=#hl-25-89> 89</a>
</span><span class=lnt id=hl-25-90><a class=lnlinks href=#hl-25-90> 90</a>
</span><span class=lnt id=hl-25-91><a class=lnlinks href=#hl-25-91> 91</a>
</span><span class=lnt id=hl-25-92><a class=lnlinks href=#hl-25-92> 92</a>
</span><span class=lnt id=hl-25-93><a class=lnlinks href=#hl-25-93> 93</a>
</span><span class=lnt id=hl-25-94><a class=lnlinks href=#hl-25-94> 94</a>
</span><span class=lnt id=hl-25-95><a class=lnlinks href=#hl-25-95> 95</a>
</span><span class=lnt id=hl-25-96><a class=lnlinks href=#hl-25-96> 96</a>
</span><span class=lnt id=hl-25-97><a class=lnlinks href=#hl-25-97> 97</a>
</span><span class=lnt id=hl-25-98><a class=lnlinks href=#hl-25-98> 98</a>
</span><span class=lnt id=hl-25-99><a class=lnlinks href=#hl-25-99> 99</a>
</span><span class=lnt id=hl-25-100><a class=lnlinks href=#hl-25-100>100</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>SecureSDUHandler</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    보안이 강화된 SDU 처리기
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>MIN_SDU_SIZE</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>MAX_SDU_SIZE</span> <span class=o>=</span> <span class=mi>65535</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>validate_sdu</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>sdu</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        SDU 크기 및 내용 검증
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        Args:
</span></span></span><span class=line><span class=cl><span class=s2>            sdu: SDU 바이트 배열
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        Raises:
</span></span></span><span class=line><span class=cl><span class=s2>            ValueError: 크기 초과/미달
</span></span></span><span class=line><span class=cl><span class=s2>            SecurityError: 악의적 패턴 탐지
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 크기 검증</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>sdu</span><span class=p>)</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>MIN_SDU_SIZE</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;SDU too small: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>sdu</span><span class=p>)</span><span class=si>}</span><span class=s2> &lt; </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>MIN_SDU_SIZE</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>sdu</span><span class=p>)</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>MAX_SDU_SIZE</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;SDU too large: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>sdu</span><span class=p>)</span><span class=si>}</span><span class=s2> &gt; </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>MAX_SDU_SIZE</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 악의적 패턴 검증 (예: 반복 바이트)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_detect_suspicious_pattern</span><span class=p>(</span><span class=n>sdu</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=n>SecurityError</span><span class=p>(</span><span class=s2>&#34;Suspicious SDU pattern detected&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_detect_suspicious_pattern</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>sdu</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        악의적 패턴 탐지 (간단한 예시)
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 동일 바이트 90% 이상 반복 시 의심</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>sdu</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>100</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>most_common</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=n>sdu</span><span class=p>),</span> <span class=n>key</span><span class=o>=</span><span class=n>sdu</span><span class=o>.</span><span class=n>count</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>count</span> <span class=o>=</span> <span class=n>sdu</span><span class=o>.</span><span class=n>count</span><span class=p>(</span><span class=n>most_common</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>count</span> <span class=o>/</span> <span class=nb>len</span><span class=p>(</span><span class=n>sdu</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mf>0.9</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>encrypt_sdu</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>sdu</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        SDU 암호화 (TLS/IPSec 대신 간단한 예시)
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        Args:
</span></span></span><span class=line><span class=cl><span class=s2>            sdu: 평문 SDU
</span></span></span><span class=line><span class=cl><span class=s2>            key: 암호화 키
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        Returns:
</span></span></span><span class=line><span class=cl><span class=s2>            암호화된 SDU
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=kn>from</span> <span class=nn>cryptography.hazmat.primitives.ciphers</span> <span class=kn>import</span> <span class=n>Cipher</span><span class=p>,</span> <span class=n>algorithms</span><span class=p>,</span> <span class=n>modes</span>
</span></span><span class=line><span class=cl>        <span class=kn>from</span> <span class=nn>cryptography.hazmat.backends</span> <span class=kn>import</span> <span class=n>default_backend</span>
</span></span><span class=line><span class=cl>        <span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># IV (Initialization Vector) 생성</span>
</span></span><span class=line><span class=cl>        <span class=n>iv</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>urandom</span><span class=p>(</span><span class=mi>16</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># AES-256-CBC 암호화</span>
</span></span><span class=line><span class=cl>        <span class=n>cipher</span> <span class=o>=</span> <span class=n>Cipher</span><span class=p>(</span><span class=n>algorithms</span><span class=o>.</span><span class=n>AES</span><span class=p>(</span><span class=n>key</span><span class=p>),</span> <span class=n>modes</span><span class=o>.</span><span class=n>CBC</span><span class=p>(</span><span class=n>iv</span><span class=p>),</span> <span class=n>backend</span><span class=o>=</span><span class=n>default_backend</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=n>encryptor</span> <span class=o>=</span> <span class=n>cipher</span><span class=o>.</span><span class=n>encryptor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 패딩 (PKCS7)</span>
</span></span><span class=line><span class=cl>        <span class=n>padded_sdu</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_pkcs7_pad</span><span class=p>(</span><span class=n>sdu</span><span class=p>,</span> <span class=mi>16</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 암호화</span>
</span></span><span class=line><span class=cl>        <span class=n>encrypted</span> <span class=o>=</span> <span class=n>encryptor</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>padded_sdu</span><span class=p>)</span> <span class=o>+</span> <span class=n>encryptor</span><span class=o>.</span><span class=n>finalize</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># IV + 암호문 반환</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>iv</span> <span class=o>+</span> <span class=n>encrypted</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_pkcs7_pad</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>,</span> <span class=n>block_size</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        PKCS7 패딩
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>padding_length</span> <span class=o>=</span> <span class=n>block_size</span> <span class=o>-</span> <span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>)</span> <span class=o>%</span> <span class=n>block_size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>padding</span> <span class=o>=</span> <span class=nb>bytes</span><span class=p>([</span><span class=n>padding_length</span><span class=p>]</span> <span class=o>*</span> <span class=n>padding_length</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>data</span> <span class=o>+</span> <span class=n>padding</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>handler</span> <span class=o>=</span> <span class=n>SecureSDUHandler</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 정상 SDU</span>
</span></span><span class=line><span class=cl><span class=n>normal_sdu</span> <span class=o>=</span> <span class=sa>b</span><span class=s2>&#34;Hello, World!&#34;</span>
</span></span><span class=line><span class=cl><span class=n>handler</span><span class=o>.</span><span class=n>validate_sdu</span><span class=p>(</span><span class=n>normal_sdu</span><span class=p>)</span>  <span class=c1># 통과</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 비정상 SDU (너무 큼)</span>
</span></span><span class=line><span class=cl><span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>huge_sdu</span> <span class=o>=</span> <span class=sa>b</span><span class=s2>&#34;A&#34;</span> <span class=o>*</span> <span class=mi>100000</span>
</span></span><span class=line><span class=cl>    <span class=n>handler</span><span class=o>.</span><span class=n>validate_sdu</span><span class=p>(</span><span class=n>huge_sdu</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;검증 실패: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># SDU 암호화</span>
</span></span><span class=line><span class=cl><span class=n>key</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>urandom</span><span class=p>(</span><span class=mi>32</span><span class=p>)</span>  <span class=c1># 256-bit 키</span>
</span></span><span class=line><span class=cl><span class=n>encrypted_sdu</span> <span class=o>=</span> <span class=n>handler</span><span class=o>.</span><span class=n>encrypt_sdu</span><span class=p>(</span><span class=n>normal_sdu</span><span class=p>,</span> <span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;암호화된 SDU 크기: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>encrypted_sdu</span><span class=p>)</span><span class=si>}</span><span class=s2> bytes&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=workshops>Workshops<a hidden class=anchor aria-hidden=true href=#workshops>#</a></h2><h3 id=네트워크-애플리케이션-sdupdu-흐름-진단-실습>네트워크 애플리케이션 SDU/PDU 흐름 진단 실습<a hidden class=anchor aria-hidden=true href=#네트워크-애플리케이션-sdupdu-흐름-진단-실습>#</a></h3><p><strong>시나리오</strong>: 실시간 대용량 메시지 전송 환경 (예: DB 서버 - 클라이언트) 에서 각 계층의 SDU/PDU 흐름, MTU/SDU 사이즈 협상, 실제 패킷 구조 분석.</p><p><strong>수행 절차</strong>:</p><table><thead><tr><th>단계</th><th>작업</th><th>담당</th><th>도구</th><th>소요 시간</th></tr></thead><tbody><tr><td>1</td><td>TCP/UDP 세션 생성</td><td>개발자</td><td>Wireshark</td><td>10 분</td></tr><tr><td>2</td><td>SDU 크기 조정 (서버/클라이언트)</td><td>인프라</td><td>DB 설정, netstat</td><td>20 분</td></tr><tr><td>3</td><td>패킷 캡처, PDU 헤더 확인</td><td>네트워크</td><td>Wireshark</td><td>20 분</td></tr><tr><td>4</td><td>오류/추적 분석</td><td>개발자</td><td>로그 분석</td><td>15 분</td></tr></tbody></table><p><strong>산출물</strong>:</p><ul><li>패킷 구조 (헤더/페이로드 분리)</li><li>SDU/PDU 변환 과정 분석 리포트</li></ul><p><strong>수용 기준 (AC)</strong>:</p><ul><li><input disabled type=checkbox> 헤더/페이로드 구분 명확</li><li><input disabled type=checkbox> SDU 사이즈 협상 과정 이해</li><li><input disabled type=checkbox> PDU 구조 (계층별) 분석</li><li><input disabled type=checkbox> 오류 추적 정확</li></ul><hr><h3 id=osi-모델-계층별-sdupdu-실습-및-트러블슈팅>OSI 모델 계층별 SDU/PDU 실습 및 트러블슈팅<a hidden class=anchor aria-hidden=true href=#osi-모델-계층별-sdupdu-실습-및-트러블슈팅>#</a></h3><p><strong>시나리오</strong>: OSI 7 계층 환경에서 각 계층별 SDU/PDU 개념 실습, 문제 발생 구간 위치 추적 및 진단.</p><p><strong>수행 절차</strong>:</p><table><thead><tr><th>단계</th><th>작업</th><th>담당</th><th>도구</th><th>소요 시간</th></tr></thead><tbody><tr><td>1</td><td>계층별 SDU 정의</td><td>교육생</td><td>이론 정리</td><td>10 분</td></tr><tr><td>2</td><td>패킷 생성 및 캡슐화 실습</td><td>교육생</td><td>Wireshark</td><td>15 분</td></tr><tr><td>3</td><td>MTU/SDU 협상 시뮬레이션</td><td>네트워크</td><td>시뮬레이터</td><td>10 분</td></tr><tr><td>4</td><td>오류/성능 문제 추적</td><td>교육생</td><td>로그 분석, 시뮬레이션</td><td>15 분</td></tr></tbody></table><p><strong>산출물</strong>:</p><ul><li>계층별 SDU/PDU 개념 정의문</li><li>MTU/SDU 협상 결과 리포트</li></ul><p><strong>수용 기준 (AC)</strong>:</p><ul><li><input disabled type=checkbox> 각 계층 SDU/PDU 구분 가능</li><li><input disabled type=checkbox> 협상 및 세그멘테이션 과정 명확</li><li><input disabled type=checkbox> 문제 추적 및 진단력 향상</li></ul><h3 id=tcp-스트림에서-sdu-추적하기>TCP 스트림에서 SDU 추적하기<a hidden class=anchor aria-hidden=true href=#tcp-스트림에서-sdu-추적하기>#</a></h3><p><strong>시나리오</strong>:<br>네트워크 관리자로서 특정 TCP 연결의 애플리케이션 데이터 (L4-SDU) 를 추출하여 분석해야 한다. Wireshark 와 Python 을 사용하여 패킷 캡처 파일 (PCAP) 에서 HTTP 요청/응답을 재구성한다.</p><p><strong>수행 절차</strong>:</p><table><thead><tr><th>단계</th><th>작업</th><th>담당</th><th>도구</th><th>소요 시간</th></tr></thead><tbody><tr><td>1</td><td>패킷 캡처 수행</td><td>관리자</td><td>Wireshark, tcpdump</td><td>5 분</td></tr><tr><td>2</td><td>TCP 스트림 식별</td><td>분석가</td><td>Wireshark (Follow TCP Stream)</td><td>10 분</td></tr><tr><td>3</td><td>SDU 추출 스크립트 작성</td><td>개발자</td><td>Python, Scapy</td><td>30 분</td></tr><tr><td>4</td><td>HTTP 메시지 재구성</td><td>분석가</td><td>스크립트 실행</td><td>5 분</td></tr><tr><td>5</td><td>결과 검증 및 분석</td><td>팀</td><td>수동 검증</td><td>10 분</td></tr></tbody></table><p><strong>산출물</strong>:</p><ol><li><strong>PCAP 파일</strong>: 캡처된 네트워크 트래픽</li><li><strong>Python 스크립트</strong>: SDU 추출 및 재구성 도구</li><li><strong>재구성된 HTTP 메시지</strong>: 요청/응답 텍스트 파일</li><li><strong>분석 보고서</strong>: 발견된 이상 패턴 문서</li></ol><p><strong>SDU 추출 스크립트 (Python + Scapy)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1> 1</a>
</span><span class=lnt id=hl-26-2><a class=lnlinks href=#hl-26-2> 2</a>
</span><span class=lnt id=hl-26-3><a class=lnlinks href=#hl-26-3> 3</a>
</span><span class=lnt id=hl-26-4><a class=lnlinks href=#hl-26-4> 4</a>
</span><span class=lnt id=hl-26-5><a class=lnlinks href=#hl-26-5> 5</a>
</span><span class=lnt id=hl-26-6><a class=lnlinks href=#hl-26-6> 6</a>
</span><span class=lnt id=hl-26-7><a class=lnlinks href=#hl-26-7> 7</a>
</span><span class=lnt id=hl-26-8><a class=lnlinks href=#hl-26-8> 8</a>
</span><span class=lnt id=hl-26-9><a class=lnlinks href=#hl-26-9> 9</a>
</span><span class=lnt id=hl-26-10><a class=lnlinks href=#hl-26-10>10</a>
</span><span class=lnt id=hl-26-11><a class=lnlinks href=#hl-26-11>11</a>
</span><span class=lnt id=hl-26-12><a class=lnlinks href=#hl-26-12>12</a>
</span><span class=lnt id=hl-26-13><a class=lnlinks href=#hl-26-13>13</a>
</span><span class=lnt id=hl-26-14><a class=lnlinks href=#hl-26-14>14</a>
</span><span class=lnt id=hl-26-15><a class=lnlinks href=#hl-26-15>15</a>
</span><span class=lnt id=hl-26-16><a class=lnlinks href=#hl-26-16>16</a>
</span><span class=lnt id=hl-26-17><a class=lnlinks href=#hl-26-17>17</a>
</span><span class=lnt id=hl-26-18><a class=lnlinks href=#hl-26-18>18</a>
</span><span class=lnt id=hl-26-19><a class=lnlinks href=#hl-26-19>19</a>
</span><span class=lnt id=hl-26-20><a class=lnlinks href=#hl-26-20>20</a>
</span><span class=lnt id=hl-26-21><a class=lnlinks href=#hl-26-21>21</a>
</span><span class=lnt id=hl-26-22><a class=lnlinks href=#hl-26-22>22</a>
</span><span class=lnt id=hl-26-23><a class=lnlinks href=#hl-26-23>23</a>
</span><span class=lnt id=hl-26-24><a class=lnlinks href=#hl-26-24>24</a>
</span><span class=lnt id=hl-26-25><a class=lnlinks href=#hl-26-25>25</a>
</span><span class=lnt id=hl-26-26><a class=lnlinks href=#hl-26-26>26</a>
</span><span class=lnt id=hl-26-27><a class=lnlinks href=#hl-26-27>27</a>
</span><span class=lnt id=hl-26-28><a class=lnlinks href=#hl-26-28>28</a>
</span><span class=lnt id=hl-26-29><a class=lnlinks href=#hl-26-29>29</a>
</span><span class=lnt id=hl-26-30><a class=lnlinks href=#hl-26-30>30</a>
</span><span class=lnt id=hl-26-31><a class=lnlinks href=#hl-26-31>31</a>
</span><span class=lnt id=hl-26-32><a class=lnlinks href=#hl-26-32>32</a>
</span><span class=lnt id=hl-26-33><a class=lnlinks href=#hl-26-33>33</a>
</span><span class=lnt id=hl-26-34><a class=lnlinks href=#hl-26-34>34</a>
</span><span class=lnt id=hl-26-35><a class=lnlinks href=#hl-26-35>35</a>
</span><span class=lnt id=hl-26-36><a class=lnlinks href=#hl-26-36>36</a>
</span><span class=lnt id=hl-26-37><a class=lnlinks href=#hl-26-37>37</a>
</span><span class=lnt id=hl-26-38><a class=lnlinks href=#hl-26-38>38</a>
</span><span class=lnt id=hl-26-39><a class=lnlinks href=#hl-26-39>39</a>
</span><span class=lnt id=hl-26-40><a class=lnlinks href=#hl-26-40>40</a>
</span><span class=lnt id=hl-26-41><a class=lnlinks href=#hl-26-41>41</a>
</span><span class=lnt id=hl-26-42><a class=lnlinks href=#hl-26-42>42</a>
</span><span class=lnt id=hl-26-43><a class=lnlinks href=#hl-26-43>43</a>
</span><span class=lnt id=hl-26-44><a class=lnlinks href=#hl-26-44>44</a>
</span><span class=lnt id=hl-26-45><a class=lnlinks href=#hl-26-45>45</a>
</span><span class=lnt id=hl-26-46><a class=lnlinks href=#hl-26-46>46</a>
</span><span class=lnt id=hl-26-47><a class=lnlinks href=#hl-26-47>47</a>
</span><span class=lnt id=hl-26-48><a class=lnlinks href=#hl-26-48>48</a>
</span><span class=lnt id=hl-26-49><a class=lnlinks href=#hl-26-49>49</a>
</span><span class=lnt id=hl-26-50><a class=lnlinks href=#hl-26-50>50</a>
</span><span class=lnt id=hl-26-51><a class=lnlinks href=#hl-26-51>51</a>
</span><span class=lnt id=hl-26-52><a class=lnlinks href=#hl-26-52>52</a>
</span><span class=lnt id=hl-26-53><a class=lnlinks href=#hl-26-53>53</a>
</span><span class=lnt id=hl-26-54><a class=lnlinks href=#hl-26-54>54</a>
</span><span class=lnt id=hl-26-55><a class=lnlinks href=#hl-26-55>55</a>
</span><span class=lnt id=hl-26-56><a class=lnlinks href=#hl-26-56>56</a>
</span><span class=lnt id=hl-26-57><a class=lnlinks href=#hl-26-57>57</a>
</span><span class=lnt id=hl-26-58><a class=lnlinks href=#hl-26-58>58</a>
</span><span class=lnt id=hl-26-59><a class=lnlinks href=#hl-26-59>59</a>
</span><span class=lnt id=hl-26-60><a class=lnlinks href=#hl-26-60>60</a>
</span><span class=lnt id=hl-26-61><a class=lnlinks href=#hl-26-61>61</a>
</span><span class=lnt id=hl-26-62><a class=lnlinks href=#hl-26-62>62</a>
</span><span class=lnt id=hl-26-63><a class=lnlinks href=#hl-26-63>63</a>
</span><span class=lnt id=hl-26-64><a class=lnlinks href=#hl-26-64>64</a>
</span><span class=lnt id=hl-26-65><a class=lnlinks href=#hl-26-65>65</a>
</span><span class=lnt id=hl-26-66><a class=lnlinks href=#hl-26-66>66</a>
</span><span class=lnt id=hl-26-67><a class=lnlinks href=#hl-26-67>67</a>
</span><span class=lnt id=hl-26-68><a class=lnlinks href=#hl-26-68>68</a>
</span><span class=lnt id=hl-26-69><a class=lnlinks href=#hl-26-69>69</a>
</span><span class=lnt id=hl-26-70><a class=lnlinks href=#hl-26-70>70</a>
</span><span class=lnt id=hl-26-71><a class=lnlinks href=#hl-26-71>71</a>
</span><span class=lnt id=hl-26-72><a class=lnlinks href=#hl-26-72>72</a>
</span><span class=lnt id=hl-26-73><a class=lnlinks href=#hl-26-73>73</a>
</span><span class=lnt id=hl-26-74><a class=lnlinks href=#hl-26-74>74</a>
</span><span class=lnt id=hl-26-75><a class=lnlinks href=#hl-26-75>75</a>
</span><span class=lnt id=hl-26-76><a class=lnlinks href=#hl-26-76>76</a>
</span><span class=lnt id=hl-26-77><a class=lnlinks href=#hl-26-77>77</a>
</span><span class=lnt id=hl-26-78><a class=lnlinks href=#hl-26-78>78</a>
</span><span class=lnt id=hl-26-79><a class=lnlinks href=#hl-26-79>79</a>
</span><span class=lnt id=hl-26-80><a class=lnlinks href=#hl-26-80>80</a>
</span><span class=lnt id=hl-26-81><a class=lnlinks href=#hl-26-81>81</a>
</span><span class=lnt id=hl-26-82><a class=lnlinks href=#hl-26-82>82</a>
</span><span class=lnt id=hl-26-83><a class=lnlinks href=#hl-26-83>83</a>
</span><span class=lnt id=hl-26-84><a class=lnlinks href=#hl-26-84>84</a>
</span><span class=lnt id=hl-26-85><a class=lnlinks href=#hl-26-85>85</a>
</span><span class=lnt id=hl-26-86><a class=lnlinks href=#hl-26-86>86</a>
</span><span class=lnt id=hl-26-87><a class=lnlinks href=#hl-26-87>87</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>scapy.all</span> <span class=kn>import</span> <span class=n>rdpcap</span><span class=p>,</span> <span class=n>TCP</span><span class=p>,</span> <span class=n>Raw</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>extract_tcp_stream_sdu</span><span class=p>(</span><span class=n>pcap_file</span><span class=p>,</span> <span class=n>stream_id</span><span class=o>=</span><span class=mi>0</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    PCAP 파일에서 특정 TCP 스트림의 SDU를 추출
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    Args:
</span></span></span><span class=line><span class=cl><span class=s2>        pcap_file: PCAP 파일 경로
</span></span></span><span class=line><span class=cl><span class=s2>        stream_id: 추출할 TCP 스트림 ID (0부터 시작)
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    Returns:
</span></span></span><span class=line><span class=cl><span class=s2>        client_data, server_data: 클라이언트/서버 SDU (bytes)
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>packets</span> <span class=o>=</span> <span class=n>rdpcap</span><span class=p>(</span><span class=n>pcap_file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># TCP 스트림 식별 (src/dst IP:Port 쌍)</span>
</span></span><span class=line><span class=cl>    <span class=n>streams</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=n>stream_counter</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>packet</span> <span class=ow>in</span> <span class=n>packets</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>packet</span><span class=o>.</span><span class=n>haslayer</span><span class=p>(</span><span class=n>TCP</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>tcp</span> <span class=o>=</span> <span class=n>packet</span><span class=p>[</span><span class=n>TCP</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>ip</span> <span class=o>=</span> <span class=n>packet</span><span class=p>[</span><span class=s1>&#39;IP&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 스트림 키 생성 (정규화: 작은 포트를 앞에)</span>
</span></span><span class=line><span class=cl>            <span class=n>key</span> <span class=o>=</span> <span class=nb>tuple</span><span class=p>(</span><span class=nb>sorted</span><span class=p>([</span>
</span></span><span class=line><span class=cl>                <span class=p>(</span><span class=n>ip</span><span class=o>.</span><span class=n>src</span><span class=p>,</span> <span class=n>tcp</span><span class=o>.</span><span class=n>sport</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=p>(</span><span class=n>ip</span><span class=o>.</span><span class=n>dst</span><span class=p>,</span> <span class=n>tcp</span><span class=o>.</span><span class=n>dport</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>]))</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>streams</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>streams</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=n>stream_counter</span><span class=p>,</span> <span class=s1>&#39;packets&#39;</span><span class=p>:</span> <span class=p>[]}</span>
</span></span><span class=line><span class=cl>                <span class=n>stream_counter</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>streams</span><span class=p>[</span><span class=n>key</span><span class=p>][</span><span class=s1>&#39;packets&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>packet</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 요청한 스트림 찾기</span>
</span></span><span class=line><span class=cl>    <span class=n>target_stream</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>stream</span> <span class=ow>in</span> <span class=n>streams</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>stream</span><span class=p>[</span><span class=s1>&#39;id&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=n>stream_id</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>target_stream</span> <span class=o>=</span> <span class=n>stream</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>target_stream</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Stream </span><span class=si>{</span><span class=n>stream_id</span><span class=si>}</span><span class=s2> not found&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># SDU 추출 (TCP 페이로드)</span>
</span></span><span class=line><span class=cl>    <span class=n>client_data</span> <span class=o>=</span> <span class=sa>b</span><span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>server_data</span> <span class=o>=</span> <span class=sa>b</span><span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>first_packet</span> <span class=o>=</span> <span class=n>target_stream</span><span class=p>[</span><span class=s1>&#39;packets&#39;</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>client_addr</span> <span class=o>=</span> <span class=p>(</span><span class=n>first_packet</span><span class=p>[</span><span class=s1>&#39;IP&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>src</span><span class=p>,</span> <span class=n>first_packet</span><span class=p>[</span><span class=n>TCP</span><span class=p>]</span><span class=o>.</span><span class=n>sport</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>packet</span> <span class=ow>in</span> <span class=n>target_stream</span><span class=p>[</span><span class=s1>&#39;packets&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>packet</span><span class=o>.</span><span class=n>haslayer</span><span class=p>(</span><span class=n>Raw</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>payload</span> <span class=o>=</span> <span class=nb>bytes</span><span class=p>(</span><span class=n>packet</span><span class=p>[</span><span class=n>Raw</span><span class=p>])</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 방향 판별</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>packet</span><span class=p>[</span><span class=s1>&#39;IP&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>src</span><span class=p>,</span> <span class=n>packet</span><span class=p>[</span><span class=n>TCP</span><span class=p>]</span><span class=o>.</span><span class=n>sport</span><span class=p>)</span> <span class=o>==</span> <span class=n>client_addr</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>client_data</span> <span class=o>+=</span> <span class=n>payload</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>server_data</span> <span class=o>+=</span> <span class=n>payload</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>client_data</span><span class=p>,</span> <span class=n>server_data</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>pcap_file</span> <span class=o>=</span> <span class=s1>&#39;capture.pcap&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;TCP 스트림 SDU 추출&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=&#34;</span> <span class=o>*</span> <span class=mi>50</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>client_sdu</span><span class=p>,</span> <span class=n>server_sdu</span> <span class=o>=</span> <span class=n>extract_tcp_stream_sdu</span><span class=p>(</span><span class=n>pcap_file</span><span class=p>,</span> <span class=n>stream_id</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;클라이언트 SDU: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>client_sdu</span><span class=p>)</span><span class=si>}</span><span class=s2> bytes&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;서버 SDU: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>server_sdu</span><span class=p>)</span><span class=si>}</span><span class=s2> bytes&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># HTTP 요청 파싱 (간단한 예시)</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>client_sdu</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=sa>b</span><span class=s1>&#39;GET&#39;</span><span class=p>)</span> <span class=ow>or</span> <span class=n>client_sdu</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=sa>b</span><span class=s1>&#39;POST&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;HTTP 요청:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>client_sdu</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>,</span> <span class=n>errors</span><span class=o>=</span><span class=s1>&#39;ignore&#39;</span><span class=p>)[:</span><span class=mi>200</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># HTTP 응답 파싱</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>server_sdu</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=sa>b</span><span class=s1>&#39;HTTP/&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;HTTP 응답:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>server_sdu</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>,</span> <span class=n>errors</span><span class=o>=</span><span class=s1>&#39;ignore&#39;</span><span class=p>)[:</span><span class=mi>200</span><span class=p>])</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>수용 기준 (AC)</strong>:</p><ul><li><input disabled type=checkbox> PCAP 파일에서 TCP 스트림을 정확히 식별</li><li><input disabled type=checkbox> TCP 헤더를 제거하고 순수 페이로드 (SDU) 만 추출</li><li><input disabled type=checkbox> 클라이언트와 서버 방향을 올바르게 구분</li><li><input disabled type=checkbox> HTTP 요청/응답 메시지를 완전히 재구성</li><li><input disabled type=checkbox> 손실되거나 순서가 뒤바뀐 패킷 처리</li></ul><h3 id=mtu-최적화-실습>MTU 최적화 실습<a hidden class=anchor aria-hidden=true href=#mtu-최적화-실습>#</a></h3><p><strong>시나리오</strong>:<br>VPN 터널 환경에서 애플리케이션 성능이 저하되고 있다. 원인을 진단하고 MTU/MSS 설정을 최적화하여 성능을 개선한다. 실제 네트워크 환경 또는 가상 환경 (VM, Docker) 에서 실습한다.</p><p><strong>수행 절차</strong>:</p><table><thead><tr><th>단계</th><th>작업</th><th>담당</th><th>도구</th><th>소요 시간</th></tr></thead><tbody><tr><td>1</td><td>현재 MTU 확인</td><td>엔지니어</td><td><code>ip link show</code>, <code>netstat -i</code></td><td>5 분</td></tr><tr><td>2</td><td>Path MTU Discovery 테스트</td><td>엔지니어</td><td><code>ping -M do -s &lt;size></code></td><td>10 분</td></tr><tr><td>3</td><td>최적 MTU 값 결정</td><td>엔지니어</td><td>바이너리 서치</td><td>10 분</td></tr><tr><td>4</td><td>MTU 설정 변경</td><td>관리자</td><td><code>ip link set</code>, <code>sysctl</code></td><td>5 분</td></tr><tr><td>5</td><td>MSS Clamping 설정 (필요 시)</td><td>관리자</td><td><code>iptables</code></td><td>5 분</td></tr><tr><td>6</td><td>성능 측정 (전/후)</td><td>엔지니어</td><td><code>iperf3</code>, <code>netperf</code></td><td>15 분</td></tr><tr><td>7</td><td>결과 분석 및 문서화</td><td>팀</td><td>스프레드시트, 보고서</td><td>10 분</td></tr></tbody></table><p><strong>산출물</strong>:</p><ol><li><strong>현재 상태 진단 보고서</strong>: MTU 값, PMTUD 결과, 성능 메트릭</li><li><strong>최적 MTU 값</strong>: 경로별 권장 MTU</li><li><strong>설정 변경 스크립트</strong>: 자동화된 MTU 설정 도구</li><li><strong>성능 개선 측정 결과</strong>: Before/After 처리량, 지연, 재전송률</li></ol><p><strong>MTU 최적화 스크립트 (Bash)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-27-1><a class=lnlinks href=#hl-27-1> 1</a>
</span><span class=lnt id=hl-27-2><a class=lnlinks href=#hl-27-2> 2</a>
</span><span class=lnt id=hl-27-3><a class=lnlinks href=#hl-27-3> 3</a>
</span><span class=lnt id=hl-27-4><a class=lnlinks href=#hl-27-4> 4</a>
</span><span class=lnt id=hl-27-5><a class=lnlinks href=#hl-27-5> 5</a>
</span><span class=lnt id=hl-27-6><a class=lnlinks href=#hl-27-6> 6</a>
</span><span class=lnt id=hl-27-7><a class=lnlinks href=#hl-27-7> 7</a>
</span><span class=lnt id=hl-27-8><a class=lnlinks href=#hl-27-8> 8</a>
</span><span class=lnt id=hl-27-9><a class=lnlinks href=#hl-27-9> 9</a>
</span><span class=lnt id=hl-27-10><a class=lnlinks href=#hl-27-10>10</a>
</span><span class=lnt id=hl-27-11><a class=lnlinks href=#hl-27-11>11</a>
</span><span class=lnt id=hl-27-12><a class=lnlinks href=#hl-27-12>12</a>
</span><span class=lnt id=hl-27-13><a class=lnlinks href=#hl-27-13>13</a>
</span><span class=lnt id=hl-27-14><a class=lnlinks href=#hl-27-14>14</a>
</span><span class=lnt id=hl-27-15><a class=lnlinks href=#hl-27-15>15</a>
</span><span class=lnt id=hl-27-16><a class=lnlinks href=#hl-27-16>16</a>
</span><span class=lnt id=hl-27-17><a class=lnlinks href=#hl-27-17>17</a>
</span><span class=lnt id=hl-27-18><a class=lnlinks href=#hl-27-18>18</a>
</span><span class=lnt id=hl-27-19><a class=lnlinks href=#hl-27-19>19</a>
</span><span class=lnt id=hl-27-20><a class=lnlinks href=#hl-27-20>20</a>
</span><span class=lnt id=hl-27-21><a class=lnlinks href=#hl-27-21>21</a>
</span><span class=lnt id=hl-27-22><a class=lnlinks href=#hl-27-22>22</a>
</span><span class=lnt id=hl-27-23><a class=lnlinks href=#hl-27-23>23</a>
</span><span class=lnt id=hl-27-24><a class=lnlinks href=#hl-27-24>24</a>
</span><span class=lnt id=hl-27-25><a class=lnlinks href=#hl-27-25>25</a>
</span><span class=lnt id=hl-27-26><a class=lnlinks href=#hl-27-26>26</a>
</span><span class=lnt id=hl-27-27><a class=lnlinks href=#hl-27-27>27</a>
</span><span class=lnt id=hl-27-28><a class=lnlinks href=#hl-27-28>28</a>
</span><span class=lnt id=hl-27-29><a class=lnlinks href=#hl-27-29>29</a>
</span><span class=lnt id=hl-27-30><a class=lnlinks href=#hl-27-30>30</a>
</span><span class=lnt id=hl-27-31><a class=lnlinks href=#hl-27-31>31</a>
</span><span class=lnt id=hl-27-32><a class=lnlinks href=#hl-27-32>32</a>
</span><span class=lnt id=hl-27-33><a class=lnlinks href=#hl-27-33>33</a>
</span><span class=lnt id=hl-27-34><a class=lnlinks href=#hl-27-34>34</a>
</span><span class=lnt id=hl-27-35><a class=lnlinks href=#hl-27-35>35</a>
</span><span class=lnt id=hl-27-36><a class=lnlinks href=#hl-27-36>36</a>
</span><span class=lnt id=hl-27-37><a class=lnlinks href=#hl-27-37>37</a>
</span><span class=lnt id=hl-27-38><a class=lnlinks href=#hl-27-38>38</a>
</span><span class=lnt id=hl-27-39><a class=lnlinks href=#hl-27-39>39</a>
</span><span class=lnt id=hl-27-40><a class=lnlinks href=#hl-27-40>40</a>
</span><span class=lnt id=hl-27-41><a class=lnlinks href=#hl-27-41>41</a>
</span><span class=lnt id=hl-27-42><a class=lnlinks href=#hl-27-42>42</a>
</span><span class=lnt id=hl-27-43><a class=lnlinks href=#hl-27-43>43</a>
</span><span class=lnt id=hl-27-44><a class=lnlinks href=#hl-27-44>44</a>
</span><span class=lnt id=hl-27-45><a class=lnlinks href=#hl-27-45>45</a>
</span><span class=lnt id=hl-27-46><a class=lnlinks href=#hl-27-46>46</a>
</span><span class=lnt id=hl-27-47><a class=lnlinks href=#hl-27-47>47</a>
</span><span class=lnt id=hl-27-48><a class=lnlinks href=#hl-27-48>48</a>
</span><span class=lnt id=hl-27-49><a class=lnlinks href=#hl-27-49>49</a>
</span><span class=lnt id=hl-27-50><a class=lnlinks href=#hl-27-50>50</a>
</span><span class=lnt id=hl-27-51><a class=lnlinks href=#hl-27-51>51</a>
</span><span class=lnt id=hl-27-52><a class=lnlinks href=#hl-27-52>52</a>
</span><span class=lnt id=hl-27-53><a class=lnlinks href=#hl-27-53>53</a>
</span><span class=lnt id=hl-27-54><a class=lnlinks href=#hl-27-54>54</a>
</span><span class=lnt id=hl-27-55><a class=lnlinks href=#hl-27-55>55</a>
</span><span class=lnt id=hl-27-56><a class=lnlinks href=#hl-27-56>56</a>
</span><span class=lnt id=hl-27-57><a class=lnlinks href=#hl-27-57>57</a>
</span><span class=lnt id=hl-27-58><a class=lnlinks href=#hl-27-58>58</a>
</span><span class=lnt id=hl-27-59><a class=lnlinks href=#hl-27-59>59</a>
</span><span class=lnt id=hl-27-60><a class=lnlinks href=#hl-27-60>60</a>
</span><span class=lnt id=hl-27-61><a class=lnlinks href=#hl-27-61>61</a>
</span><span class=lnt id=hl-27-62><a class=lnlinks href=#hl-27-62>62</a>
</span><span class=lnt id=hl-27-63><a class=lnlinks href=#hl-27-63>63</a>
</span><span class=lnt id=hl-27-64><a class=lnlinks href=#hl-27-64>64</a>
</span><span class=lnt id=hl-27-65><a class=lnlinks href=#hl-27-65>65</a>
</span><span class=lnt id=hl-27-66><a class=lnlinks href=#hl-27-66>66</a>
</span><span class=lnt id=hl-27-67><a class=lnlinks href=#hl-27-67>67</a>
</span><span class=lnt id=hl-27-68><a class=lnlinks href=#hl-27-68>68</a>
</span><span class=lnt id=hl-27-69><a class=lnlinks href=#hl-27-69>69</a>
</span><span class=lnt id=hl-27-70><a class=lnlinks href=#hl-27-70>70</a>
</span><span class=lnt id=hl-27-71><a class=lnlinks href=#hl-27-71>71</a>
</span><span class=lnt id=hl-27-72><a class=lnlinks href=#hl-27-72>72</a>
</span><span class=lnt id=hl-27-73><a class=lnlinks href=#hl-27-73>73</a>
</span><span class=lnt id=hl-27-74><a class=lnlinks href=#hl-27-74>74</a>
</span><span class=lnt id=hl-27-75><a class=lnlinks href=#hl-27-75>75</a>
</span><span class=lnt id=hl-27-76><a class=lnlinks href=#hl-27-76>76</a>
</span><span class=lnt id=hl-27-77><a class=lnlinks href=#hl-27-77>77</a>
</span><span class=lnt id=hl-27-78><a class=lnlinks href=#hl-27-78>78</a>
</span><span class=lnt id=hl-27-79><a class=lnlinks href=#hl-27-79>79</a>
</span><span class=lnt id=hl-27-80><a class=lnlinks href=#hl-27-80>80</a>
</span><span class=lnt id=hl-27-81><a class=lnlinks href=#hl-27-81>81</a>
</span><span class=lnt id=hl-27-82><a class=lnlinks href=#hl-27-82>82</a>
</span><span class=lnt id=hl-27-83><a class=lnlinks href=#hl-27-83>83</a>
</span><span class=lnt id=hl-27-84><a class=lnlinks href=#hl-27-84>84</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=c1># MTU 최적화 도구</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>TARGET_HOST</span><span class=o>=</span><span class=s2>&#34;example.com&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>INTERFACE</span><span class=o>=</span><span class=s2>&#34;eth0&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;=== MTU 최적화 도구 ===&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 1. 현재 MTU 확인</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;[1] 현재 MTU 확인&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>current_mtu</span><span class=o>=</span><span class=k>$(</span>ip link show <span class=nv>$INTERFACE</span> <span class=p>|</span> grep -oP <span class=s1>&#39;mtu \K[0-9]+&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;  인터페이스 </span><span class=nv>$INTERFACE</span><span class=s2> MTU: </span><span class=nv>$current_mtu</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Path MTU Discovery (바이너리 서치)</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;[2] Path MTU Discovery (대상: </span><span class=nv>$TARGET_HOST</span><span class=s2>)&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>min_mtu</span><span class=o>=</span><span class=m>68</span>
</span></span><span class=line><span class=cl><span class=nv>max_mtu</span><span class=o>=</span><span class=m>1500</span>
</span></span><span class=line><span class=cl><span class=nv>optimal_mtu</span><span class=o>=</span><span class=nv>$min_mtu</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=o>[</span> <span class=nv>$min_mtu</span> -le <span class=nv>$max_mtu</span> <span class=o>]</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nv>mid</span><span class=o>=</span><span class=k>$((</span> <span class=o>(</span>min_mtu <span class=o>+</span> max_mtu<span class=o>)</span> <span class=o>/</span> <span class=m>2</span> <span class=k>))</span>
</span></span><span class=line><span class=cl>    <span class=c1># ICMP 헤더 8 bytes 제외</span>
</span></span><span class=line><span class=cl>    <span class=nv>payload_size</span><span class=o>=</span><span class=k>$((</span> mid <span class=o>-</span> <span class=m>28</span> <span class=k>))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> -n <span class=s2>&#34;  테스트 MTU </span><span class=nv>$mid</span><span class=s2> … &#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Don&#39;t Fragment 플래그로 ping</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> ping -M <span class=k>do</span> -c <span class=m>1</span> -W <span class=m>1</span> -s <span class=nv>$payload_size</span> <span class=nv>$TARGET_HOST</span> &gt; /dev/null 2&gt;<span class=p>&amp;</span>1<span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;성공&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nv>optimal_mtu</span><span class=o>=</span><span class=nv>$mid</span>
</span></span><span class=line><span class=cl>        <span class=nv>min_mtu</span><span class=o>=</span><span class=k>$((</span> mid <span class=o>+</span> <span class=m>1</span> <span class=k>))</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;실패 (단편화 필요)&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nv>max_mtu</span><span class=o>=</span><span class=k>$((</span> mid <span class=o>-</span> <span class=m>1</span> <span class=k>))</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;  최적 MTU: </span><span class=nv>$optimal_mtu</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. MTU 설정 변경 제안</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=nv>$optimal_mtu</span> -lt <span class=nv>$current_mtu</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;[3] MTU 변경 권장&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;  현재: </span><span class=nv>$current_mtu</span><span class=s2> → 권장: </span><span class=nv>$optimal_mtu</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;  변경 명령어:&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;    sudo ip link set </span><span class=nv>$INTERFACE</span><span class=s2> mtu </span><span class=nv>$optimal_mtu</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 사용자 확인</span>
</span></span><span class=line><span class=cl>    <span class=nb>read</span> -p <span class=s2>&#34;  지금 변경하시겠습니까? (y/n): &#34;</span> confirm
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$confirm</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;y&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        sudo ip link <span class=nb>set</span> <span class=nv>$INTERFACE</span> mtu <span class=nv>$optimal_mtu</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;  MTU 변경 완료&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;[3] 현재 MTU가 최적값입니다.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. MSS Clamping 확인</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;[4] TCP MSS Clamping 확인&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>optimal_mss</span><span class=o>=</span><span class=k>$((</span> optimal_mtu <span class=o>-</span> <span class=m>40</span> <span class=k>))</span>  <span class=c1># IP(20) + TCP(20)</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;  최적 MSS: </span><span class=nv>$optimal_mss</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;  MSS Clamping 설정 (VPN/터널 환경 권장):&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;    sudo iptables -A FORWARD -p tcp --tcp-flags SYN,RST SYN \\&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;      -j TCPMSS --set-mss </span><span class=nv>$optimal_mss</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 5. 성능 테스트 제안</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;[5] 성능 테스트 명령어&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;  처리량 측정:&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;    iperf3 -c </span><span class=nv>$TARGET_HOST</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;  지연 측정:&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;    ping -c 100 </span><span class=nv>$TARGET_HOST</span><span class=s2> | tail -1&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;=== 완료 ===&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>수용 기준 (AC)</strong>:</p><ul><li><input disabled type=checkbox> Path MTU Discovery 로 경로 상 최소 MTU 정확히 식별</li><li><input disabled type=checkbox> MTU 설정 변경 후 단편화 발생하지 않음</li><li><input disabled type=checkbox> MSS Clamping 적용 시 SYN 패킷에 올바른 MSS 옵션 포함</li><li><input disabled type=checkbox> 성능 측정 결과 처리량 향상 또는 지연 감소 확인</li><li><input disabled type=checkbox> 설정 변경 스크립트가 재부팅 후에도 유지되도록 영구 적용</li></ul><hr><h2 id=final-summary>Final Summary<a hidden class=anchor aria-hidden=true href=#final-summary>#</a></h2><blockquote><p>SDU(Service Data Unit) 는 OSI 참조 모델에서 계층 간 서비스 인터페이스를 통해 전달되는 데이터 단위로, 각 계층이 상위 계층에게 제공하는 투명한 페이로드이며, PDU(Protocol Data Unit) 와 함께 캡슐화 원칙의 핵심을 이루어 프로토콜 독립성과 모듈화를 가능하게 하는 네트워크 아키텍처의 기본 개념이다.</p></blockquote><p>SDU 는 1984 년 ISO 7498 표준에서 OSI 참조 모델의 일부로 공식 정의되었으며, 계층화된 네트워크 아키텍처에서 인접 계층 간 서비스 경계를 명확히 하기 위해 도입되었다. 각 계층 (N) 은 상위 계층 (N+1) 으로부터 N-SDU 를 받아 자신의 프로토콜 제어 정보 (PCI) 를 추가하여 N-PDU 를 생성하고, 이를 하위 계층 (N-1) 에 (N-1)-SDU 로 전달한다.<br>SDU 의 핵심 특징은 투명성 (transparency) 으로, 각 계층은 SDU 의 내용을 해석하거나 수정하지 않고 불투명한 데이터로 취급한다. 이는 계층 간 독립성을 보장하고 프로토콜 교체 및 독립적 개발을 가능하게 한다. SDU 는 PDU, PCI, SAP, ICI 와 함께 OSI 모델의 캡슐화 메커니즘을 구성한다.</p><p>SDU 처리에서 가장 중요한 트레이드오프는 효율성과 오버헤드 간의 균형이다. 작은 SDU 는 실시간성은 높지만 상대적 헤더 오버헤드가 크며 (10 bytes SDU 시 680% 오버헤드), 큰 SDU 는 효율적이나 분할 (segmentation) 과 재조립 (reassembly) 의 복잡성이 증가한다. MTU 와 MSS 설정은 네트워크 경로의 제약과 응용의 요구사항을 동시에 고려해야 하며, Path MTU Discovery(PMTUD) 가 ICMP 차단으로 실패할 경우 MTU 블랙홀 현상이 발생할 수 있다. 또한 Nagle 알고리즘은 작은 SDU 를 결합하여 오버헤드를 줄이지만 지연을 증가시켜, 실시간 애플리케이션에서는 비활성화가 필요하다. 보안 측면에서는 SDU 의 암호화 (TLS/IPSec) 가 기밀성을 보장하지만 추가 오버헤드와 처리 지연을 초래한다.</p><p>OSI 모델의 SDU 개념은 이론적으로 명확하나 실제 TCP/IP 구현에서는 계층 융합 (layer blending) 과 최적화로 인해 엄격한 SDU/PDU 구분이 모호해지는 경우가 많다. 예를 들어, TLS 는 프레젠테이션 계층 역할을 하지만 실제로는 애플리케이션 계층 라이브러리로 구현된다. 또한 QUIC 과 같은 현대 프로토콜은 전송 계층과 세션 계층 기능을 통합하여 기존 SDU 모델로는 설명이 어렵다. 향후 학습 과제로는 (1) TCP/IP 와 OSI 모델 간 SDU 매핑 심화, (2) 소프트웨어 정의 네트워킹 (SDN) 에서의 SDU 처리 방식, (3) QUIC, HTTP/3 등 차세대 프로토콜의 데이터 단위 개념, (4) 네트워크 가상화 환경 (NFV, 컨테이너) 에서의 SDU 최적화 기법을 탐구할 것을 권장한다.</p><hr><h2 id=learning-guide>Learning Guide<a hidden class=anchor aria-hidden=true href=#learning-guide>#</a></h2><table><thead><tr><th>단계</th><th>목표 (Outcome)</th><th>추천 자료 (Seed 기반)</th><th>과제 (Task)</th><th>평가 기준 (Rubric)</th><th>실습 포함</th></tr></thead><tbody><tr><td><strong>기초</strong></td><td>OSI 모델 이해 및 SDU/PDU 구별</td><td>ISO/IEC 7498-1 표준, 네트워크 기초 교재</td><td>SDU 와 PDU 정의 정리, 계층별 명칭 암기, 간단한 캡슐화 예시 작성</td><td>용어를 정확히 설명 가능, 계층별 SDU 명칭 식별 가능</td><td>(선택)</td></tr><tr><td><strong>응용</strong></td><td>실제 프로토콜에서 SDU 식별 및 추적</td><td>Wireshark 가이드, TCP/IP Illustrated</td><td>Wireshark 로 TCP 스트림 분석, HTTP 요청/응답 SDU 추출, Python 스크립트로 SDU 파싱</td><td>패킷 캡처에서 SDU 를 정확히 추출, 계층별 캡슐화 단계를 도식화</td><td><strong>필수</strong> (Workshop 1)</td></tr><tr><td><strong>실무</strong></td><td>SDU 최적화 및 성능 튜닝</td><td>RFC 1191 (PMTUD), 리눅스 네트워크 튜닝 가이드</td><td>MTU/MSS 최적화 프로젝트, VPN 환경 성능 개선, TCP 버퍼 크기 조정</td><td>성능 측정 결과 개선 확인, 최적화 전/후 비교 문서화, 팀에 공유</td><td><strong>필수</strong> (Workshop 2)</td></tr><tr><td><strong>심화</strong></td><td>프로토콜 설계 및 SDU 보안 강화</td><td>RFC 8446 (TLS 1.3), QUIC 표준</td><td>새로운 프로토콜 설계 (SDU/SAP 정의 포함), 보안 위협 분석 및 대응 방안 구현, QUIC 의 SDU 개념 연구</td><td>프로토콜 스펙 작성, 보안 검증 테스트 통과, 최신 프로토콜 트렌드 분석 발표</td><td>(선택)</td></tr></tbody></table><p><strong>실습 1: TCP 스트림에서 SDU 추출</strong> (응용 단계)</p><ul><li><strong>목표</strong>: Wireshark 와 Python(Scapy) 을 사용하여 PCAP 파일에서 애플리케이션 계층 SDU 를 추출하고 HTTP 메시지를 재구성한다.</li><li><strong>도구</strong>: Wireshark, Python, Scapy 라이브러리</li><li><strong>산출물</strong>: SDU 추출 스크립트, 재구성된 HTTP 요청/응답 파일</li><li><strong>평가</strong>: TCP 헤더를 제거하고 순수 페이로드만 추출, 방향 (클라이언트/서버) 구분 정확성</li></ul><p><strong>실습 2: MTU 최적화 프로젝트</strong> (실무 단계)</p><ul><li><strong>목표</strong>: VPN 또는 터널 환경에서 Path MTU Discovery 를 수행하고, 최적 MTU/MSS 를 설정하여 성능을 개선한다.</li><li><strong>도구</strong>: Linux 명령어 (<code>ping</code>, <code>ip</code>, <code>iptables</code>), iperf3, 네트워크 시뮬레이터 (GNS3/Packet Tracer)</li><li><strong>산출물</strong>: MTU 진단 보고서, 최적화 스크립트, 성능 개선 측정 결과</li><li><strong>평가</strong>: PMTUD 성공률, 단편화 제거 여부, 처리량 향상 또는 지연 감소 확인</li></ul><hr><h2 id=terminology>Terminology<a hidden class=anchor aria-hidden=true href=#terminology>#</a></h2><table><thead><tr><th>Term EN (ko, abbr)</th><th>정의</th><th>역할/맥락</th><th>관련 개념</th><th>Flags</th></tr></thead><tbody><tr><td><strong>Service Data Unit (SDU, 서비스 데이터 단위)</strong></td><td>(N+1) 계층이 N 계층에 전달하는 의미 보존 데이터 단위</td><td>상→하 전달 단위, 캡슐화 입력</td><td>PDU, SAP, Payload</td><td>core</td></tr><tr><td><strong>Protocol Data Unit (PDU, 프로토콜 데이터 단위)</strong></td><td>N 계층이 SDU 에 **PCI(헤더/트레일러)**를 부가해 만든 전송 단위</td><td>동계층 피어 간 교환 단위</td><td>SDU, PCI, Encapsulation</td><td>core</td></tr><tr><td><strong>Protocol Control Information (PCI)</strong></td><td>PDU 에 추가되는 제어 정보 (주소/길이/플래그 등)</td><td>프로토콜 동작 (라우팅/무결성/흐름)</td><td>Header, Trailer</td><td>core</td></tr><tr><td><strong>Encapsulation / De-encapsulation (캡슐화/역캡슐화)</strong></td><td>SDU 에 PCI 를 추가해 PDU 로 포장 / 수신 시 헤더 제거해 SDU 복원</td><td>계층 간 전달 메커니즘</td><td>Tunneling, Overlay</td><td>core</td></tr><tr><td><strong>Payload (페이로드)</strong></td><td>PDU 내부의 사용자 데이터 (상위 계층 SDU)</td><td>실전 업무 데이터</td><td>SDU, PDU</td><td>core</td></tr><tr><td><strong>Header / Trailer (헤더/트레일러)</strong></td><td>PDU 앞/끝에 붙는 제어 정보 영역 (예: 주소, FCS)</td><td>오류 검출·라우팅·식별</td><td>PCI, Checksum, FCS/CRC</td><td>core</td></tr><tr><td><strong>Segmentation (세그멘테이션)</strong></td><td>큰 **SDU(주로 L4 데이터)**를 여러 PDU 로 분할</td><td>전송계층 분할, <strong>MSS</strong> 기준</td><td>Reassembly, MSS</td><td>perf</td></tr><tr><td><strong>Reassembly (재조립)</strong></td><td>분할/단편화된 단위를 수신 측에서 원 SDU 로 복원</td><td>수신 지연·버퍼 영향</td><td>Segmentation, Fragmentation</td><td>perf</td></tr><tr><td><strong>Fragmentation (단편화)</strong></td><td><strong>IP 패킷이 MTU 초과</strong> 시 L3 에서 조각화</td><td>MTU 불일치 대응 (성능 페널티)</td><td>DF, PMTUD</td><td>L3</td></tr><tr><td><strong>Maximum Transmission Unit (MTU)</strong></td><td>링크가 <strong>한 번에 운반 가능한 IP 패킷 최대 크기 (IP MTU)</strong></td><td>분할/단편화 기준, 경로 호환성</td><td>MSS, PMTUD, Jumbo</td><td>perf</td></tr><tr><td><strong>Maximum Segment Size (MSS)</strong></td><td>TCP 세그먼트 <strong>페이로드</strong> 최대값 (보통 MTU−IP−TCP)</td><td>TCP 분할 기준·단편화 회피</td><td>MTU, TCP 옵션</td><td>perf</td></tr><tr><td><strong>PMTUD / PLPMTUD</strong></td><td>경로 최소 MTU 동적 탐지 (ICMP / 상위계층 Probe)</td><td>블랙홀 회피·최대 크기 결정</td><td>DF, ICMP PTB</td><td>perf</td></tr><tr><td><strong>DF (Don&rsquo;t Fragment)</strong></td><td>IPv4 헤더 플래그 (단편화 금지)</td><td>PMTUD 유도·보호</td><td>Fragmentation</td><td>L3</td></tr><tr><td><strong>Service Access Point (SAP)</strong></td><td>계층 경계의 논리 인터페이스</td><td>SDU 가 통과하는 접점·멀티플렉싱</td><td>TSAP(포트), NSAP</td><td>std</td></tr><tr><td><strong>TSAP / NSAP</strong></td><td>전송/네트워크 계층 SAP; 현대 TCP/IP 에선 <strong>포트/IP</strong>에 대응</td><td>멀티플렉싱·디멀티플렉싱 기준</td><td>SAP, Port, IP</td><td>std</td></tr><tr><td><strong>Interface Control Information (ICI)</strong></td><td>서비스 프리미티브와 함께 전달되는 제어 파라미터</td><td>서비스 요청/응답 메타데이터</td><td>Primitive, SAP</td><td>std</td></tr><tr><td><strong>Service Primitive (프리미티브)</strong></td><td>Request/Indication/Response/Confirm</td><td>서비스 인터페이스 추상화</td><td>SAP, ICI</td><td>std</td></tr><tr><td><strong>Multiplexing / Demultiplexing</strong></td><td>상위 다중 흐름→하위 하나 / 하위 하나→상위 다중</td><td>자원 공유·흐름 분배</td><td>SAP, Port, 5-tuple</td><td>core</td></tr><tr><td><strong>Transparency (투명성)</strong></td><td>SDU 내용이 서비스 제공 계층에서 해석/변경되지 않음</td><td>계층 독립성·모듈성</td><td>Encapsulation</td><td>principle</td></tr><tr><td><strong>Layering (계층화)</strong></td><td>기능을 독립 계층으로 분리하는 설계 원칙</td><td>모듈화·추상화·재사용성</td><td>OSI Model, TCP/IP</td><td>principle</td></tr><tr><td><strong>End-to-End Principle (종단 간 원칙)</strong></td><td>기능은 가능한 한 종단에 배치</td><td>중간 노드 단순화</td><td>Transparency</td><td>principle</td></tr><tr><td><strong>BDP (Bandwidth-Delay Product)</strong></td><td>경로에 체류 가능한 데이터량 <strong>B×RTT</strong></td><td>TCP 버퍼/윈도우 설정 기준</td><td>TCP Window, RWIN</td><td>perf</td></tr><tr><td><strong>Nagle Algorithm / TCP_NODELAY</strong></td><td>작은 세그먼트 결합 / 즉시 전송 옵션</td><td>오버헤드↔지연 트레이드오프</td><td>Segmentation, Latency</td><td>perf</td></tr><tr><td><strong>Jumbo Frame</strong></td><td>MTU ≥ 9000 인 이더넷 프레임</td><td>DC 내부 처리량/CPU 절감</td><td>MTU 일관성, PMTUD</td><td>perf</td></tr><tr><td><strong>Header Compression (ROHC/VJ)</strong></td><td>IP/TCP/UDP 헤더 압축</td><td>저대역폭·무선 최적화</td><td>ECN, 링크 특성</td><td>perf</td></tr><tr><td><strong>TLS (TLS Record)</strong></td><td>상위 계층 데이터의 암·무결성 (레코드 단위)</td><td>보안·오버헤드 (≈21B)</td><td>QUIC, IPsec</td><td>sec</td></tr><tr><td><strong>IPsec (ESP/AH)</strong></td><td>L3 보안 (터널/트랜스포트)</td><td>MTU 오버헤드·MSS 조정</td><td>PMTUD, MSS Clamp</td><td>sec</td></tr><tr><td><strong>MSDU / MPDU (802.11)</strong></td><td>MAC 상위 SDU / MAC PDU</td><td>Wi-Fi 전송 단위</td><td>A-MSDU, A-MPDU</td><td>802.11</td></tr><tr><td><strong>A-MSDU / A-MPDU</strong></td><td>여러 MSDU 를 하나 MPDU 로 / 여러 MPDU 를 묶어 전송</td><td>헤더 절감 / 재전송 효율</td><td>MSDU, MPDU</td><td>802.11</td></tr><tr><td><strong>PDCP SDU / RLC SDU (3GPP)</strong></td><td>상위→PDCP / PDCP→RLC 로 전달 SDU</td><td>LTE/NR 스택 단위</td><td>PDCP/RLC PDU</td><td>3gpp</td></tr><tr><td><strong>AAL5 SDU (ATM)</strong></td><td>AAL5 가 운반하는 상위 SDU</td><td>ATM 계열 적응 계층</td><td>AAL5 PDU</td><td>atm</td></tr><tr><td><strong>6LoWPAN SDU</strong></td><td>저전력 PAN 에서의 IPv6 SDU(링크 관점)</td><td>IoT 적응/단편화</td><td>6LoWPAN Fragment</td><td>iot</td></tr><tr><td><strong>APDU / TPDU</strong></td><td>응용/전송 계층 PDU 명칭 (문맥 의존)</td><td>PDU 용어 구분</td><td>Segment, PDU</td><td>note</td></tr></tbody></table><hr><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ul><li><a href=https://en.wikipedia.org/wiki/Service_data_unit>Service data unit (Wikipedia)</a></li><li><a href=https://dev.to/m__mdy__m/the-osi-model-a-comprehensive-overview-52j5>The OSI Model: A Comprehensive Overview (dev.to)</a></li><li><a href=https://www.scribd.com/doc/166105697/Difference-Between-SDU-and-PDU>Difference Between SDU and PDU (scribd)</a></li><li><a href=https://www.rfwireless-world.com/terminology/pdu-and-sdu-explained>PDU and SDU Explained (rfwireless-world.com)</a></li><li><a href=https://www.vervecopilot.com/interview-questions/what-are-protocol-data-units-and-why-do-they-matter-in-networking>What Are Protocol Data Units And Why Do They Matter (vervecopilot.com)</a></li><li><a href=https://docs.oracle.com/en/database/oracle/oracle-database/23/netag/configuring-session-data-unit.html>Configuring Session Data Unit (oracle.com)</a></li><li><a href=https://docs.oracle.com/en/database/oracle/oracle-database/23/odpnt/ConnectionSDU.html>SDU (oracle.com)</a></li><li><a href=https://patents.google.com/patent/KR20150105171A/ko>이동 통신 시스템에서 대용량 서비스 데이터 유닛&mldr; (patents.google.com)</a></li><li><a href=https://www.olaxwifi.com/news/sdus-and-pdus-in-5g-nr-187802.html>SDUs and PDUs in 5G(NR) (olaxwifi.com)</a></li><li><a href="http://www.ktword.co.kr/test/navigation/yoyak_v2.php?no=310">기술용어해설종합 (ktword.co.kr)</a></li><li><a href=https://www.iso.org/standard/20269.html>ISO/IEC 7498-1:1994 Information technology - Open Systems Interconnection - Basic Reference Model</a></li><li><a href=https://datatracker.ietf.org/doc/html/rfc1122>RFC 1122: Requirements for Internet Hosts - Communication Layers</a></li><li><a href=https://datatracker.ietf.org/doc/html/rfc1191>RFC 1191: Path MTU Discovery</a></li><li><a href=https://datatracker.ietf.org/doc/html/rfc8200>RFC 8200: Internet Protocol, Version 6 (IPv6) Specification</a></li><li><a href=https://datatracker.ietf.org/doc/html/rfc793>RFC 793: Transmission Control Protocol</a></li><li><a href=https://www.pearson.com/us/higher-education/program/Tanenbaum-Computer-Networks-5th-Edition/PGM270019.html>Computer Networks (5th ed., Tanenbaum & Wetherall)</a></li><li><a href=https://www.pearson.com/us/higher-education/program/Kurose-Computer-Networking-A-Top-Down-Approach-8th-Edition/PGM2877610.html>Computer Networking: A Top-Down Approach (8th ed., Kurose & Ross)</a></li><li><a href=https://www.oreilly.com/library/view/tcpip-illustrated-volume/0201633469/>TCP/IP Illustrated, Volume 1: The Protocols (Stevens)</a></li><li><a href=https://ieeexplore.ieee.org/document/1094702>OSI Reference Model — Zimmermann (1980), IEEE Transactions on Communications</a></li><li><a href=https://www.wireshark.org/docs/wsug_html_chunked/ChAdvFollowStreamSection.html>Wireshark User&rsquo;s Guide — Following Protocol Streams</a></li><li><a href=https://lartc.org/howto/lartc.cookbook.mtu-mss.html>Linux Advanced Routing & Traffic Control HOWTO — MTU and Path MTU Discovery</a></li><li><a href=https://www.cisco.com/c/en/us/support/docs/ip/generic-routing-encapsulation-gre/25885-pmtud-ipfrag.html>Cisco — Understanding and Configuring the IP MTU</a></li><li><a href=https://datatracker.ietf.org/doc/html/rfc4821>RFC 4821: Packetization Layer Path MTU Discovery</a></li><li><a href=https://datatracker.ietf.org/doc/html/rfc8446>RFC 8446: The Transport Layer Security (TLS) Protocol Version 1.3</a></li><li><a href=https://datatracker.ietf.org/doc/html/rfc9000>RFC 9000: QUIC: A UDP-Based Multiplexed and Secure Transport</a></li><li><a href="https://www.itu.int/rec/dologin_pub.asp?id=T-REC-X.210-199311-I%21%21PDF-E&amp;lang=e&amp;type=items">Information technology — OSI — Conventions for the definition of OSI services (X.210)</a></li><li><a href="https://www.itu.int/rec/dologin_pub.asp?id=T-REC-X.200-199407-I%21%21PDF-E&amp;lang=e&amp;type=items">Open Systems Interconnection — Basic Reference Model (X.200 | ISO/IEC 7498-1)</a></li><li><a href="https://www.itu.int/rec/dologin_pub.asp?id=T-REC-X.213-200110-I%21%21PDF-E&amp;lang=e&amp;type=items">OSI Network Service Definition (X.213)</a></li><li><a href=https://datatracker.ietf.org/doc/html/rfc4944>RFC 4944 — Transmission of IPv6 Packets over IEEE 802.15.4 Networks</a></li><li><a href=https://www.ietf.org/rfc/rfc4717.html>RFC 4717 — ATM over MPLS Networks</a></li><li><a href=https://www.ietf.org/rfc/rfc2363.txt>RFC 2363 — PPP over FUNI</a></li><li><a href=https://www.etsi.org/deliver/etsi_ts/124000_124099/124007/17.03.00_60/ts_124007v170300p.pdf>ETSI TS 124 007 — 3GPP: Layer 3; General aspects</a></li><li><a href=https://www.etsi.org/deliver/etsi_ts/138300_138399/138322/18.02.00_60/ts_138322v180200p.pdf>ETSI TS 138 322 V18.2.0 — 5G NR; RLC protocol</a></li><li><a href=https://www.etsi.org/deliver/etsi_ts/136300_136399/136323/16.04.00_60/ts_136323v160400p.pdf>ETSI TS 36 323 — LTE; PDCP protocol</a></li><li><a href=https://mentor.ieee.org/802.1/dcn/22/1-22-0029-00-ICne-ambiguity-in-the-mac-service.pdf>IEEE 802.1 — Ambiguity in the MAC Service (802.1AC)</a></li><li><a href=https://www.ieee802.org/1/files/public/docs2024/ea-Marco-progress-0724-v00.pdf>IEEE 802.1ACea — Progress / Understanding 802.1AC (MSDU 언급)</a></li><li><a href=https://www.cisco.com/c/en/us/support/docs/asynchronous-transfer-mode-atm/ip-over-atm/10479-mtu-atm.html>Cisco — Understanding MTU on ATM AAL5</a></li><li><a href=https://www.cisco.com/en/US/docs/ios-xml/ios/mp_l2_vpns/configuration/15-1s/mp-any-transport.html>Cisco — Any Transport over MPLS (AToM, SDU mode)</a></li><li><a href=https://www.cisco.com/c/en/us/td/docs/wireless/controller/8-5/config-guide/b_cg85/radio_bands.html>Cisco Wireless Controller — A-MSDU / A-MPDU 설정 가이드</a></li><li><a href=https://www.arubanetworks.com/techdocs/AirWave/AW_CLI_Bank/AirWave_8.x_CLI_Reference_Guide.pdf>HPE Aruba — AirWave 8.x CLI Reference Guide</a></li><li><a href="https://www.huawei.com/-/media/CORPORATE/PDF/white%20paper/lte-standards-evolution-white-paper.pdf?la=en">Huawei — LTE Standards Evolution / 5G ToB Service Experience White Paper</a></li><li><a href=https://www.arib.or.jp/english/html/overview/doc/STD-T104v3_10/5_Appendix/Rel12/36/36509-c00.pdf>ARIB — 3GPP TS 36.509 Annex (참조집)</a></li><li><a href=https://cdn.standards.iteh.ai/samples/61336/e894411196414216bf44ca3162f99c7c/ETSI-TS-136-322-V15-4-0-2020-07-.pdf>Standards iTeh — ETSI TS 136 322 V15.4.0 Preview</a></li><li><a href=https://www.3gpp.org/dynareport/38322.htm>3GPP — Specification 38.322 (RLC)</a></li></ul><hr></div></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2026 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>