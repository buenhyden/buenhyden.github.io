<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Event-Driven Architecture | hyunyoun's Blog</title><meta name=keywords content="Software-Engineering,Design-and-Architecture,Architecture-Styles-and-Patterns,Architecture-Styles,Messaging-Oriented,Event-Driven-Architecture,Asynchronous-Communication"><meta name=description content="Event‑Driven Architecture 는 시스템 내부에서 상태 변화나 이벤트를 생성, 브로커를 통해 비동기 전파하고, 이를 구독하는 소비자들이 반응하도록 설계된 아키텍처로, 느슨한 결합, 독립적 확장, 실시간 응답성, 내결함성, 및 유연성을 제공하여 복잡하고 분산된 환경에서 효과적인 구조이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/networking--protocols/communication-patterns/asynchronous-communication/event-driven/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/networking--protocols/communication-patterns/asynchronous-communication/event-driven/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/networking--protocols/communication-patterns/asynchronous-communication/event-driven/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/networking--protocols/communication-patterns/asynchronous-communication/event-driven/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Event-Driven Architecture"><meta property="og:description" content="Event‑Driven Architecture 는 시스템 내부에서 상태 변화나 이벤트를 생성, 브로커를 통해 비동기 전파하고, 이를 구독하는 소비자들이 반응하도록 설계된 아키텍처로, 느슨한 결합, 독립적 확장, 실시간 응답성, 내결함성, 및 유연성을 제공하여 복잡하고 분산된 환경에서 효과적인 구조이다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Event-Driven Architecture"><meta name=twitter:description content="Event‑Driven Architecture 는 시스템 내부에서 상태 변화나 이벤트를 생성, 브로커를 통해 비동기 전파하고, 이를 구독하는 소비자들이 반응하도록 설계된 아키텍처로, 느슨한 결합, 독립적 확장, 실시간 응답성, 내결함성, 및 유연성을 제공하여 복잡하고 분산된 환경에서 효과적인 구조이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"HY's Blog","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Event-Driven Architecture","item":"https://buenhyden.github.io/posts/networking--protocols/communication-patterns/asynchronous-communication/event-driven/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>HY's Blog</a></div><h1>Event-Driven Architecture</h1><div class=post-description>Event‑Driven Architecture 는 시스템 내부에서 상태 변화나 이벤트를 생성, 브로커를 통해 비동기 전파하고, 이를 구독하는 소비자들이 반응하도록 설계된 아키텍처로, 느슨한 결합, 독립적 확장, 실시간 응답성, 내결함성, 및 유연성을 제공하여 복잡하고 분산된 환경에서 효과적인 구조이다.</div></header><div class=post-content><h2 id=event-driven-architecture>Event-Driven Architecture<a hidden class=anchor aria-hidden=true href=#event-driven-architecture>#</a></h2><p>Event‑Driven Architecture(EDA) 는 시스템 내 이벤트 (예: 주문 생성, 결제 완료) 가 브로커/채널을 통해 퍼블리시되고, 이를 구독한 다양한 서비스들이 독립적으로 반응하는 패턴이다. 이 구조는 Pub/Sub 기반 메시지 전송, 이벤트 라우팅, 비동기 처리, 이벤트 저장소, Eventual Consistency 등을 활용해 서비스 간 느슨한 결합과 독립적 확장성을 확보한다. 또한, 복잡한 업무 흐름 (Orchestration vs Choreography) 및 CQRS/Event Sourcing 패턴도 지원하며, 이기종 시스템 통합, IoT, 마이크로서비스, 실시간 분석 등에서 널리 사용된다.</p><h3 id=배경>배경<a hidden class=anchor aria-hidden=true href=#배경>#</a></h3><p>Event-Driven Architecture 는 전통적인 모놀리식 아키텍처의 한계를 극복하기 위해 등장했다. 2000 년대 초반 SOA(Service-Oriented Architecture) 의 발전과 함께 비동기 메시징의 중요성이 대두되었고, 클라우드 컴퓨팅과 마이크로서비스 아키텍처의 확산으로 EDA 가 주목받게 되었다.</p><p><strong>역사적 발전:</strong></p><ul><li><strong>1960 년대</strong>: 이벤트 기반 프로그래밍의 초기 개념 등장</li><li><strong>1990 년대</strong>: Message-Oriented Middleware (MOM) 발전</li><li><strong>2000 년대</strong>: 대규모 웹 서비스에서의 적용 시작</li><li><strong>2010 년대</strong>: 마이크로서비스와 함께 주류 아키텍처로 발전</li></ul><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><h4 id=목적>목적<a hidden class=anchor aria-hidden=true href=#목적>#</a></h4><ul><li><strong>시스템 분리 (Decoupling)</strong>: 구성 요소 간 독립성 확보</li><li><strong>확장성 (Scalability)</strong>: 개별 구성 요소의 독립적 확장</li><li><strong>실시간 처리 (Real-time Processing)</strong>: 이벤트 발생 즉시 처리</li><li><strong>유연성 (Flexibility)</strong>: 비즈니스 요구 변화에 대한 빠른 적응</li></ul><h4 id=필요성>필요성<a hidden class=anchor aria-hidden=true href=#필요성>#</a></h4><ul><li><strong>마이크로서비스 환경</strong>: 서비스 간 효율적 통신 필요</li><li><strong>고가용성 요구</strong>: 24/7 서비스 운영 요구사항</li><li><strong>대용량 데이터 처리</strong>: 실시간 스트리밍 데이터 처리 필요</li><li><strong>비즈니스 민첩성</strong>: 빠른 기능 개발과 배포 필요</li></ul><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><p>이벤트 기반 아키텍처 (EDA) 는 시스템 내에서 발생하는 이벤트 (상태 변화, 액션 등) 를 중심으로 서비스가 동작하며, 이벤트 생산자 (Producer) 와 소비자 (Consumer) 가 메시지 브로커 (Broker) 를 통해 비동기적으로 통신하는 소프트웨어 설계 패턴이다.</p><table><thead><tr><th><strong>카테고리</strong></th><th><strong>용어/개념</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>기본 구성 요소</strong></td><td><strong>Event (이벤트)</strong></td><td>시스템 내 상태 변화나 사건을 표현하는 불변 메시지 객체. 예: 주문 생성, 결제 완료 등</td></tr><tr><td></td><td><strong>Event Producer / Publisher</strong></td><td>이벤트를 생성하고 브로커에 발행하는 컴포넌트. 생산자는 소비자의 존재를 모름</td></tr><tr><td></td><td><strong>Event Consumer / Subscriber</strong></td><td>브로커로부터 이벤트를 구독하고 처리하는 컴포넌트</td></tr><tr><td></td><td><strong>Event Broker / Bus / Channel</strong></td><td>발행자와 구독자 사이에서 이벤트를 라우팅, 전달, 저장하는 미들웨어 (Kafka, RabbitMQ 등)</td></tr><tr><td></td><td><strong>Topic / Stream / Queue</strong></td><td>이벤트의 분류 단위로, 동일한 유형의 이벤트 흐름을 논리적으로 그룹핑</td></tr><tr><td><strong>통신 및 구조 원칙</strong></td><td><strong>Asynchronous Communication</strong></td><td>이벤트 발행 시 소비자의 응답을 기다리지 않고 독립적으로 처리하는 방식 (비동기 통신)</td></tr><tr><td></td><td><strong>Loose Coupling (느슨한 결합)</strong></td><td>컴포넌트 간 직접 의존성을 제거하여 독립적인 배포 및 확장 가능하게 설계</td></tr><tr><td></td><td><strong>Pub/Sub Pattern</strong></td><td>이벤트 발행자와 구독자 간 관계를 분리하여 확장성과 유연성 확보</td></tr><tr><td></td><td><strong>Event Choreography</strong></td><td>개별 서비스들이 이벤트를 통해 독립적으로 반응하며 전체 워크플로우를 구성 (탈중앙화)</td></tr><tr><td></td><td><strong>Event Orchestration</strong></td><td>중앙 오케스트레이터가 이벤트 흐름과 작업 순서를 제어 (중앙화 방식)</td></tr><tr><td><strong>일관성 및 상태 관리</strong></td><td><strong>Eventual Consistency</strong></td><td>비동기 처리 환경에서 시간이 지나면 전체 시스템이 일관된 상태에 도달하는 특성</td></tr><tr><td></td><td><strong>Deferred Execution</strong></td><td>요청 시점과 처리 시점이 분리되어 실행되는 모델</td></tr><tr><td><strong>아키텍처 확장 요소</strong></td><td><strong>Event Sourcing</strong></td><td>모든 상태 변경을 이벤트로 저장하고 재생을 통해 시스템 상태를 재현하는 패턴</td></tr><tr><td></td><td><strong>CQRS (Command Query Responsibility Segregation)</strong></td><td>명령 (쓰기) 과 조회 (읽기) 를 분리하여 성능 및 확장성을 향상시키는 아키텍처 패턴</td></tr><tr><td></td><td><strong>Event Mesh</strong></td><td>다수의 이벤트 브로커들을 연결하여 메시지를 전파하는 분산 메시징 네트워크</td></tr><tr><td></td><td><strong>Hierarchical Topic</strong></td><td>계층적 구조의 토픽 네이밍을 통해 메시지 필터링과 라우팅을 정교하게 구성 가능</td></tr><tr><td><strong>연관 도구 및 메커니즘</strong></td><td><strong>Schema Registry</strong></td><td>이벤트 메시지의 스키마를 등록 및 관리하여 형식 일관성과 호환성 유지</td></tr><tr><td></td><td><strong>Correlation ID</strong></td><td>이벤트 흐름을 추적하기 위한 고유 식별자. 분산 트레이싱에 사용됨</td></tr><tr><td></td><td><strong>Dead Letter Queue (DLQ)</strong></td><td>소비 실패 또는 오류가 발생한 이벤트를 별도로 저장하여 사후 처리 가능하게 함</td></tr></tbody></table><h4 id=실무-연관성>실무 연관성<a hidden class=anchor aria-hidden=true href=#실무-연관성>#</a></h4><table><thead><tr><th><strong>카테고리</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>1. 적용 분야</strong></td><td><strong>마이크로서비스 통신</strong></td><td>이벤트 기반으로 서비스 간 결합도를 낮추고 독립적 배포·확장이 가능하게 함</td></tr><tr><td></td><td><strong>실시간 데이터 처리</strong></td><td>실시간 이벤트 스트리밍 기반 분석, 대기시간 없는 사용자 응답 시스템 구현</td></tr><tr><td></td><td><strong>시스템 통합</strong></td><td>레거시 시스템과 신규 시스템 간 통신을 이벤트로 구성하여 유연한 연계 구현</td></tr><tr><td></td><td><strong>장애 복구 및 내결함성</strong></td><td>이벤트 저장 및 재처리 메커니즘으로 장애 복구 및 데이터 유실 방지 가능</td></tr><tr><td></td><td><strong>분산 시스템 확장</strong></td><td>서비스별로 독립적으로 수평 확장 가능, 트래픽 급증에도 유연하게 대응</td></tr><tr><td></td><td><strong>워크플로우 오케스트레이션</strong></td><td>Choreography, Saga 패턴을 통해 서비스 간 분산 트랜잭션 관리</td></tr><tr><td><strong>2. 구현 요소</strong></td><td><strong>이벤트 브로커 / 메시지 큐</strong></td><td>Kafka, RabbitMQ, Amazon EventBridge, Pulsar, Azure Service Bus 등</td></tr><tr><td></td><td><strong>스키마 관리 및 계약 문서화</strong></td><td>Confluent Schema Registry, AsyncAPI, 이벤트 포맷 (JSON, Avro 등)</td></tr><tr><td></td><td><strong>이벤트 저장 및 재생</strong></td><td>Kafka log-compaction, Event Store, Outbox Pattern 활용</td></tr><tr><td></td><td><strong>모니터링 및 트레이싱</strong></td><td>Prometheus, Grafana, Jaeger, OpenTelemetry, ELK Stack</td></tr><tr><td></td><td><strong>보안 및 인증/인가</strong></td><td>TLS, OAuth2, JWT, Kafka ACL, IAM 기반 Role 제어</td></tr><tr><td><strong>3. 아키텍처 설계 고려사항</strong></td><td><strong>비동기 이벤트 라우팅</strong></td><td>토픽 기반 필터링, 와일드카드 구독, 토픽 계층화로 관심사 기반 메시지 수신</td></tr><tr><td></td><td><strong>이벤트 내구성 및 정합성</strong></td><td>메시지 전달 보장 설정 (At-least/Exactly-once), 중복 방지 (Idempotency)</td></tr><tr><td></td><td><strong>버전 관리 및 진화 가능성</strong></td><td>이벤트 메시지 스키마의 버전 호환성 설계, 호환되지 않는 변경 시 대비</td></tr><tr><td></td><td><strong>분산 트랜잭션 관리</strong></td><td>이벤트 기반으로 일관성을 유지하기 위한 SAGA 패턴, 보상 트랜잭션 설계</td></tr><tr><td><strong>4. 운영 및 유지보수</strong></td><td><strong>확장성 및 유연성</strong></td><td>이벤트 기반 구조는 새로운 서비스 추가/변경 시 기존 구성 요소에 영향 최소화</td></tr><tr><td></td><td><strong>장애 격리 및 복원력</strong></td><td>이벤트 기반 비동기 구조는 서비스 간 장애 전파를 막고 자동 복구 구조 구현 가능</td></tr><tr><td></td><td><strong>계측 및 알림 설정</strong></td><td>이벤트 흐름, DLQ 비율, 실패율 등을 기반으로 한 알림 및 자동 대응</td></tr><tr><td></td><td><strong>다양한 프로토콜/플랫폼 연계</strong></td><td>HTTP, MQTT, gRPC 등 다양한 통신 프로토콜과 연동 가능</td></tr><tr><td></td><td><strong>테스트 및 시뮬레이션</strong></td><td>프로듀서/컨슈머 분리 테스트 가능, Mock Broker 를 통한 통합 테스트 유연성 확보</td></tr></tbody></table><h3 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><h4 id=주요-기능>주요 기능<a hidden class=anchor aria-hidden=true href=#주요-기능>#</a></h4><ol><li><strong>Event Publishing (이벤트 발행)</strong>: 비즈니스 이벤트 생성 및 전파</li><li><strong>Event Routing (이벤트 라우팅)</strong>: 관심 있는 소비자에게 이벤트 전달</li><li><strong>Event Processing (이벤트 처리)</strong>: 수신된 이벤트에 대한 비즈니스 로직 실행</li><li><strong>Event Storage (이벤트 저장)</strong>: 이벤트 이력 및 재처리를 위한 저장</li></ol><h4 id=역할>역할<a hidden class=anchor aria-hidden=true href=#역할>#</a></h4><ul><li><strong>Decoupling (분리)</strong>: 서비스 간 직접적 의존성 제거</li><li><strong>Integration (통합)</strong>: 이기종 시스템 간 통합</li><li><strong>Orchestration (오케스트레이션)</strong>: 복잡한 비즈니스 프로세스 조정</li><li><strong>Monitoring (모니터링)</strong>: 시스템 상태 및 성능 추적</li></ul><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><ul><li><strong>비동기 통신:</strong> 컴포넌트 간 직접 호출 없이 이벤트로 상호작용.</li><li><strong>디커플링:</strong> 컴포넌트 간 의존성 최소화.</li><li><strong>확장성:</strong> 컴포넌트별 독립적 확장 가능.</li><li><strong>실시간 처리:</strong> 이벤트 발생 즉시 처리 및 전파.</li><li><strong>결함 허용성:</strong> 이벤트 브로커가 이벤트를 버퍼링하여 장애 시 복구 지원.</li></ul><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><ol><li><strong>단일 책임 원칙</strong>: 각 이벤트는 하나의 명확한 목적을 가짐</li><li><strong>이벤트 불변성</strong>: 발행된 이벤트는 변경되지 않음</li><li><strong>멱등성</strong>: 동일한 이벤트의 반복 처리가 안전해야 함</li><li><strong>순서 보장</strong>: 필요 시 이벤트 처리 순서 보장</li><li><strong>장애 격리</strong>: 한 구성 요소의 장애가 전체 시스템에 영향을 주지 않음</li><li><strong>결과적 일관성</strong>: 모든 시스템이 최종적으로 일관된 상태를 유지</li></ol><h3 id=주요-원리>주요 원리<a hidden class=anchor aria-hidden=true href=#주요-원리>#</a></h3><ul><li><strong>Loose Coupling (느슨한 결합)</strong>: 프로듀서 및 컨슈머 간 직접 의존 제거</li><li><strong>Asynchronous Messaging (비동기 메시징)</strong>: 즉시 응답 없이 이벤트 처리</li><li><strong>Event-First Design</strong>: 도메인 핵심 변화는 이벤트를 통해 표현</li><li><strong>Idempotency (멱등성)</strong>: 중복 처리 발생 시 동일 결과 유지</li><li><strong>Time-Travel through Event Store</strong>: 이벤트 재생으로 현재 상태 복원</li></ul><h4 id=이벤트-기반-통신>이벤트 기반 통신<a hidden class=anchor aria-hidden=true href=#이벤트-기반-통신>#</a></h4><pre class=mermaid>graph TD
    A[Event Producer] --&gt;|Publish Event| B[Event Broker]
    B --&gt;|Route Event| C[Event Consumer 1]
    B --&gt;|Route Event| D[Event Consumer 2]
    B --&gt;|Route Event| E[Event Consumer 3]
    
    subgraph &#34;Event Processing&#34;
        F[Event Store] --&gt; G[Event Stream]
        G --&gt; H[Event Handler]
        H --&gt; I[Business Logic]
    end
    
    B --&gt; F
</pre><h4 id=작동-원리>작동 원리<a hidden class=anchor aria-hidden=true href=#작동-원리>#</a></h4><pre class=mermaid>sequenceDiagram
  participant P as Producer
  participant B as Broker
  participant C as Consumer
  P-&gt;&gt;B: Emit &#34;OrderCreated&#34;
  B-&gt;&gt;C: Notify event
  C-&gt;&gt;C: Process order
  alt Processing error
    C-&gt;&gt;B: Send to DLQ
  end
  note over B,C: 메시징 내구성 &amp; 중복 방지
</pre><p><strong>설명</strong>:</p><ol><li>Producer 가 이벤트를 브로커에 발행</li><li>Broker 는 이벤트 저장 및 메시징</li><li>Consumer 가 이벤트를 수신 후 처리</li><li>오류 발생 시 DLQ 또는 재시도 처리</li></ol><h3 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h3><pre class=mermaid>flowchart TD
  subgraph Producer Layer
    P[Online Service, IoT Device, DB Trigger]
  end
  subgraph Broker Layer
    B[Event Broker: Kafka / RabbitMQ / EventBridge]
    Topic[Topic / Channel]
  end
  subgraph Consumer Layer
    C1[&#34;Service A (Payment)&#34;]
    C2[&#34;Service B (Inventory)&#34;]
    C3[&#34;Service C (Notification)&#34;]
  end
  subgraph Infrastructure
    Store[Event Store / Audit Log]
    Orchestrator[Saga / Orchestration]
    Monitor[Monitoring &amp; Tracing]
  end

  P --&gt; B
  B --&gt; |topic based| C1
  B --&gt; |topic based| C2
  B --&gt; |topic based| C3
  C1 --&gt; B
  C2 --&gt; B
  C3 --&gt; B
  B --&gt; Store
  Orchestrator --&gt; B
  Monitor --&gt; B
</pre><h4 id=구성-요소>구성 요소<a hidden class=anchor aria-hidden=true href=#구성-요소>#</a></h4><table><thead><tr><th>구분</th><th>구성 요소</th><th>기능/역할</th><th>필수/선택</th></tr></thead><tbody><tr><td>이벤트 브로커</td><td>Kafka, RabbitMQ, AWS EventBridge 등</td><td>이벤트 게시/구독, 라우팅, 내구성 보장</td><td>필수</td></tr><tr><td>프로듀서</td><td>애플리케이션, DB 트리거, IoT 디바이스 등</td><td>이벤트 생성 및 게시</td><td>필수</td></tr><tr><td>컨슈머</td><td>처리 서비스 (확장 가능)</td><td>이벤트 수신 및 처리 로직 수행</td><td>필수</td></tr><tr><td>이벤트 저장소</td><td>Event Store, Kafka log-compacted</td><td>영속적 이력 저장, 재생 기능 제공</td><td>선택</td></tr><tr><td>오케스트레이션</td><td>Saga Coordinator, Orchestrator 서비스</td><td>분산 트랜잭션 및 워크플로우 관리</td><td>선택</td></tr><tr><td>모니터링 · 로깅</td><td>Jaeger, Prometheus, ELK, OpenTelemetry</td><td>이벤트 흐름 가시화 및 진단</td><td>선택</td></tr><tr><td>메시지 포맷/계약</td><td>JSON, Avro, Protobuf; Schema Registry</td><td>이벤트 구조 정의 및 변경 관리</td><td>권장</td></tr></tbody></table><h3 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h3><table><thead><tr><th>카테고리</th><th>구현 기법</th><th>정의 및 구성 요소</th><th>목적 및 활용 목표</th><th>대표 예시 시나리오</th></tr></thead><tbody><tr><td><strong>1. 메시지 전달 구조</strong></td><td><strong>Pub/Sub (발행/구독)</strong></td><td>Producer → Topic → 다수 ConsumerMessage Broker (Kafka, RabbitMQ 등)</td><td>느슨한 결합, 브로드캐스트, 동적 구독 지원</td><td>주문 생성 시 알림, 재고 차감, 분석 시스템에 동시 전달</td></tr><tr><td></td><td><strong>Point-to-Point (Queue)</strong></td><td>Producer → Queue → 단일 Consumer (or competing group)</td><td>일대일 처리, 워크 분산</td><td>작업 큐 기반 주문 처리 시스템</td></tr><tr><td></td><td><strong>Message Broker 기반 모델</strong></td><td>Producer → Exchange → Queue → Consumer (RabbitMQ 등)</td><td>라우팅, 필터링, 일관된 메시지 흐름 구현</td><td>Direct/Topic 기반 라우팅, DLQ 구성</td></tr><tr><td><strong>2. 상태 저장 및 동기화</strong></td><td><strong>Event Sourcing</strong></td><td>상태 변경을 이벤트로 기록, Event Store, Aggregate, Replay 등 구성</td><td>감사 추적, 시점 복구, 영속성 확보</td><td>금융 거래, 계좌 잔액 계산, 로그 재처리 시스템</td></tr><tr><td></td><td><strong>CQRS</strong></td><td>명령 (Command) 과 조회 (Query) 모델 분리이벤트 버스/리드 모델 분리</td><td>성능 향상, 확장성, 조회 최적화</td><td>주문 서비스에서 Command: 생성/취소, Query: 리포트 조회</td></tr><tr><td></td><td><strong>Outbox Pattern</strong></td><td>DB 트랜잭션과 이벤트 발행 분리 Outbox 테이블 → 메시지 브로커 전송</td><td>DB 정합성 보장, 재처리 용이성</td><td>주문 저장 후 이벤트 발행을 Outbox → Kafka 로 비동기 전송</td></tr><tr><td></td><td><strong>CDC (Change Data Capture)</strong></td><td>DB 변경 감지 후 이벤트 생성 (Debezium 등 활용)</td><td>기존 DB 기반 시스템에 이벤트 도입</td><td>RDB 변경 사항을 Kafka 이벤트로 생성하여 실시간 처리</td></tr><tr><td><strong>3. 워크플로우 처리 패턴</strong></td><td><strong>Saga Pattern</strong></td><td>분산 트랜잭션 처리: Orchestrator or Choreography + Compensating Transaction</td><td>분산 환경에서 일관성 보장</td><td>주문 → 결제 → 배송 단계 실패 시 보상 로직으로 롤백</td></tr><tr><td></td><td><strong>SEDA</strong></td><td>이벤트 처리 단계별 Queue 로 분리, 비동기 처리 및 리소스 분산</td><td>병렬성 향상, 부하 제어, 스로틀링 적용 가능</td><td>대규모 트래픽 처리에서 처리량 유지를 위한 스테이지 분리</td></tr><tr><td></td><td><strong>Complex Event Processing</strong></td><td>패턴 매칭, 시계열 분석, 복합 이벤트 탐지 엔진 (Flink, Esper 등)</td><td>실시간 인사이트, 복합 조건 처리</td><td>이상 행동 탐지, 실시간 Fraud Detection</td></tr><tr><td><strong>4. 배포 구조</strong></td><td><strong>Broker Topology</strong></td><td>중재자 없이 브로커 ↔ 프로세서 간 직접 연결 (Chain 구조)</td><td>단순 구조, 고성능, 직렬화 흐름 처리</td><td>주문 생성 → 처리 → 알림 프로세서 순차 처리</td></tr><tr><td></td><td><strong>Mediator Topology</strong></td><td>중앙 Orchestrator 가 모든 이벤트 흐름 조정워크플로우 기반 이벤트 제어</td><td>명시적 제어, 보상 트랜잭션, 장애 관리</td><td>중앙 이벤트 허브가 각 서비스에 이벤트 순서대로 전파</td></tr><tr><td></td><td><strong>Event Mesh</strong></td><td>지역/클라우드 간 브로커 네트워크 (Solace, Kafka Connect 등)</td><td>글로벌 이벤트 중계, 이기종 시스템 연동</td><td>AWS ↔ Kafka ↔ 엣지 디바이스 연계</td></tr><tr><td><strong>5. 클라우드 기반 처리</strong></td><td><strong>Serverless Event Handling</strong></td><td>SNS → SQS → Lambda (or Event Grid + Function)</td><td>인프라 관리 최소화, 비용 효율성</td><td>사용자가 이벤트 발생 시 자동 알림 또는 비즈니스 로직 실행</td></tr><tr><td></td><td><strong>Event Streaming Platform</strong></td><td>Kafka/Pulsar 기반 실시간 이벤트 스트림 처리 Partition, Consumer Group 등 구성</td><td>고성능, 고가용성, 재생 가능</td><td>클릭 로그, 사용자 행동 분석, 실시간 추천 시스템</td></tr></tbody></table><h4 id=publish-subscribe-패턴>Publish-Subscribe 패턴<a hidden class=anchor aria-hidden=true href=#publish-subscribe-패턴>#</a></h4><p><strong>정의</strong>: 발행자가 구독자에게 직접 메시지를 전송하지 않고 중간 브로커를 통해 전달하는 기법</p><p><strong>구성</strong>:</p><ul><li>Publisher (발행자)</li><li>Subscriber (구독자)</li><li>Topic/Channel (주제/채널)</li><li>Message Broker (메시지 브로커)</li></ul><p><strong>목적</strong>: 느슨한 결합, 동적 구독, 확장성</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2>2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3>3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>뉴스 구독 시스템:
</span></span><span class=line><span class=cl>- Publisher: 뉴스 에디터
</span></span><span class=line><span class=cl>- Topic: &#34;스포츠&#34;, &#34;정치&#34;, &#34;경제&#34;
</span></span><span class=line><span class=cl>- Subscriber: 모바일 앱, 웹사이트, 이메일 서비스
</span></span></code></pre></td></tr></table></div></div><h4 id=event-sourcing>Event Sourcing<a hidden class=anchor aria-hidden=true href=#event-sourcing>#</a></h4><p><strong>정의</strong>: 모든 상태 변화를 이벤트로 저장하여 애플리케이션 상태를 관리하는 기법</p><p><strong>구성</strong>:</p><ul><li>Event Store (이벤트 저장소)</li><li>Event Stream (이벤트 스트림)</li><li>Aggregate (집계)</li><li>Snapshot (스냅샷)</li></ul><p><strong>목적</strong>: 완전한 감사 추적, 시점 복구, 복잡한 비즈니스 로직 처리</p><p><strong>실제 예시</strong>:</p><ul><li>은행 계좌 관리 시스템에서 모든 거래 내역을 이벤트로 저장</li><li>잔액은 이벤트 스트림을 재생하여 계산</li></ul><h4 id=cqrs-command-query-responsibility-segregation>CQRS (Command Query Responsibility Segregation)<a hidden class=anchor aria-hidden=true href=#cqrs-command-query-responsibility-segregation>#</a></h4><p><strong>정의</strong>: 명령 (쓰기) 과 조회 (읽기) 모델을 분리하여 성능과 확장성을 향상시키는 기법</p><p><strong>구성</strong>:</p><ul><li>Command Model (명령 모델)</li><li>Query Model (조회 모델)</li><li>Event Bus (이벤트 버스)</li><li>Read Database (읽기 데이터베이스)</li></ul><p><strong>목적</strong>: 읽기/쓰기 워크로드 최적화, 독립적 확장, 복잡한 조회 지원</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2>2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>주문 처리 시스템:
</span></span><span class=line><span class=cl>- Command: 주문 생성, 수정, 취소
</span></span><span class=line><span class=cl>- Query: 주문 조회, 통계, 리포트
</span></span></code></pre></td></tr></table></div></div><h4 id=saga-패턴>Saga 패턴<a hidden class=anchor aria-hidden=true href=#saga-패턴>#</a></h4><p><strong>정의</strong>: 분산 트랜잭션을 일련의 로컬 트랜잭션으로 분해하여 관리하는 기법</p><p><strong>구성</strong>:</p><ul><li>Saga Orchestrator (조정자)</li><li>Compensating Actions (보상 액션)</li><li>Transaction Steps (트랜잭션 단계)</li></ul><p><strong>목적</strong>: 분산 시스템에서 데이터 일관성 보장</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2>2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>온라인 쇼핑 주문 처리:
</span></span><span class=line><span class=cl>1. 재고 확인 → 2. 결제 처리 → 3. 배송 준비
</span></span><span class=line><span class=cl>실패 시: 보상 액션으로 이전 단계 롤백
</span></span></code></pre></td></tr></table></div></div><h4 id=배포-구조>배포 구조<a hidden class=anchor aria-hidden=true href=#배포-구조>#</a></h4><h5 id=broker-topology-브로커-토폴로지>Broker Topology (브로커 토폴로지)<a hidden class=anchor aria-hidden=true href=#broker-topology-브로커-토폴로지>#</a></h5><p><strong>정의</strong>: 중앙 중재자 없이 이벤트 프로세서들이 체인 형태로 연결된 구조</p><p><strong>구성</strong>:</p><ul><li>Event Broker (이벤트 브로커)</li><li>Event Processors (이벤트 프로세서)</li><li>Processing Events (처리 이벤트)</li></ul><p><strong>목적</strong>: 단순한 이벤트 플로우에서 높은 성능과 확장성 제공</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15>15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16>16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17>17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18>18</a>
</span><span class=lnt id=hl-6-19><a class=lnlinks href=#hl-6-19>19</a>
</span><span class=lnt id=hl-6-20><a class=lnlinks href=#hl-6-20>20</a>
</span><span class=lnt id=hl-6-21><a class=lnlinks href=#hl-6-21>21</a>
</span><span class=lnt id=hl-6-22><a class=lnlinks href=#hl-6-22>22</a>
</span><span class=lnt id=hl-6-23><a class=lnlinks href=#hl-6-23>23</a>
</span><span class=lnt id=hl-6-24><a class=lnlinks href=#hl-6-24>24</a>
</span><span class=lnt id=hl-6-25><a class=lnlinks href=#hl-6-25>25</a>
</span><span class=lnt id=hl-6-26><a class=lnlinks href=#hl-6-26>26</a>
</span><span class=lnt id=hl-6-27><a class=lnlinks href=#hl-6-27>27</a>
</span><span class=lnt id=hl-6-28><a class=lnlinks href=#hl-6-28>28</a>
</span><span class=lnt id=hl-6-29><a class=lnlinks href=#hl-6-29>29</a>
</span><span class=lnt id=hl-6-30><a class=lnlinks href=#hl-6-30>30</a>
</span><span class=lnt id=hl-6-31><a class=lnlinks href=#hl-6-31>31</a>
</span><span class=lnt id=hl-6-32><a class=lnlinks href=#hl-6-32>32</a>
</span><span class=lnt id=hl-6-33><a class=lnlinks href=#hl-6-33>33</a>
</span><span class=lnt id=hl-6-34><a class=lnlinks href=#hl-6-34>34</a>
</span><span class=lnt id=hl-6-35><a class=lnlinks href=#hl-6-35>35</a>
</span><span class=lnt id=hl-6-36><a class=lnlinks href=#hl-6-36>36</a>
</span><span class=lnt id=hl-6-37><a class=lnlinks href=#hl-6-37>37</a>
</span><span class=lnt id=hl-6-38><a class=lnlinks href=#hl-6-38>38</a>
</span><span class=lnt id=hl-6-39><a class=lnlinks href=#hl-6-39>39</a>
</span><span class=lnt id=hl-6-40><a class=lnlinks href=#hl-6-40>40</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// Node.js를 사용한 브로커 토폴로지 구현
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>EventEmitter</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;events&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>EventBroker</span> <span class=kr>extends</span> <span class=nx>EventEmitter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>super</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>processors</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>registerProcessor</span><span class=p>(</span><span class=nx>processor</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>processors</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>processor</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>publishEvent</span><span class=p>(</span><span class=nx>eventType</span><span class=p>,</span> <span class=nx>eventData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Publishing event: </span><span class=si>${</span><span class=nx>eventType</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=nx>eventType</span><span class=p>,</span> <span class=nx>eventData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>OrderProcessor</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>broker</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>broker</span> <span class=o>=</span> <span class=nx>broker</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>broker</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;orderPlaced&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleOrderPlaced</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>handleOrderPlaced</span><span class=p>(</span><span class=nx>orderData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Processing order: </span><span class=si>${</span><span class=nx>orderData</span><span class=p>.</span><span class=nx>orderId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 주문 처리 로직
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>broker</span><span class=p>.</span><span class=nx>publishEvent</span><span class=p>(</span><span class=s1>&#39;orderProcessed&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>orderId</span><span class=o>:</span> <span class=nx>orderData</span><span class=p>.</span><span class=nx>orderId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;processed&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>broker</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>EventBroker</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>orderProcessor</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>OrderProcessor</span><span class=p>(</span><span class=nx>broker</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>broker</span><span class=p>.</span><span class=nx>publishEvent</span><span class=p>(</span><span class=s1>&#39;orderPlaced&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>orderId</span><span class=o>:</span> <span class=s1>&#39;12345&#39;</span><span class=p>,</span> <span class=nx>amount</span><span class=o>:</span> <span class=mi>100</span> <span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=mediator-topology-중재자-토폴로지>Mediator Topology (중재자 토폴로지)<a hidden class=anchor aria-hidden=true href=#mediator-topology-중재자-토폴로지>#</a></h5><p><strong>정의</strong>: 중앙 이벤트 중재자가 복잡한 워크플로우를 조정하는 구조</p><p><strong>구성</strong>:</p><ul><li>Event Queue (이벤트 큐)</li><li>Event Mediator (이벤트 중재자)</li><li>Event Channels (이벤트 채널)</li><li>Event Processors (이벤트 프로세서)</li></ul><p><strong>목적</strong>: 복잡한 비즈니스 프로세스의 오케스트레이션 및 오류 처리</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13>13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14>14</a>
</span><span class=lnt id=hl-7-15><a class=lnlinks href=#hl-7-15>15</a>
</span><span class=lnt id=hl-7-16><a class=lnlinks href=#hl-7-16>16</a>
</span><span class=lnt id=hl-7-17><a class=lnlinks href=#hl-7-17>17</a>
</span><span class=lnt id=hl-7-18><a class=lnlinks href=#hl-7-18>18</a>
</span><span class=lnt id=hl-7-19><a class=lnlinks href=#hl-7-19>19</a>
</span><span class=lnt id=hl-7-20><a class=lnlinks href=#hl-7-20>20</a>
</span><span class=lnt id=hl-7-21><a class=lnlinks href=#hl-7-21>21</a>
</span><span class=lnt id=hl-7-22><a class=lnlinks href=#hl-7-22>22</a>
</span><span class=lnt id=hl-7-23><a class=lnlinks href=#hl-7-23>23</a>
</span><span class=lnt id=hl-7-24><a class=lnlinks href=#hl-7-24>24</a>
</span><span class=lnt id=hl-7-25><a class=lnlinks href=#hl-7-25>25</a>
</span><span class=lnt id=hl-7-26><a class=lnlinks href=#hl-7-26>26</a>
</span><span class=lnt id=hl-7-27><a class=lnlinks href=#hl-7-27>27</a>
</span><span class=lnt id=hl-7-28><a class=lnlinks href=#hl-7-28>28</a>
</span><span class=lnt id=hl-7-29><a class=lnlinks href=#hl-7-29>29</a>
</span><span class=lnt id=hl-7-30><a class=lnlinks href=#hl-7-30>30</a>
</span><span class=lnt id=hl-7-31><a class=lnlinks href=#hl-7-31>31</a>
</span><span class=lnt id=hl-7-32><a class=lnlinks href=#hl-7-32>32</a>
</span><span class=lnt id=hl-7-33><a class=lnlinks href=#hl-7-33>33</a>
</span><span class=lnt id=hl-7-34><a class=lnlinks href=#hl-7-34>34</a>
</span><span class=lnt id=hl-7-35><a class=lnlinks href=#hl-7-35>35</a>
</span><span class=lnt id=hl-7-36><a class=lnlinks href=#hl-7-36>36</a>
</span><span class=lnt id=hl-7-37><a class=lnlinks href=#hl-7-37>37</a>
</span><span class=lnt id=hl-7-38><a class=lnlinks href=#hl-7-38>38</a>
</span><span class=lnt id=hl-7-39><a class=lnlinks href=#hl-7-39>39</a>
</span><span class=lnt id=hl-7-40><a class=lnlinks href=#hl-7-40>40</a>
</span><span class=lnt id=hl-7-41><a class=lnlinks href=#hl-7-41>41</a>
</span><span class=lnt id=hl-7-42><a class=lnlinks href=#hl-7-42>42</a>
</span><span class=lnt id=hl-7-43><a class=lnlinks href=#hl-7-43>43</a>
</span><span class=lnt id=hl-7-44><a class=lnlinks href=#hl-7-44>44</a>
</span><span class=lnt id=hl-7-45><a class=lnlinks href=#hl-7-45>45</a>
</span><span class=lnt id=hl-7-46><a class=lnlinks href=#hl-7-46>46</a>
</span><span class=lnt id=hl-7-47><a class=lnlinks href=#hl-7-47>47</a>
</span><span class=lnt id=hl-7-48><a class=lnlinks href=#hl-7-48>48</a>
</span><span class=lnt id=hl-7-49><a class=lnlinks href=#hl-7-49>49</a>
</span><span class=lnt id=hl-7-50><a class=lnlinks href=#hl-7-50>50</a>
</span><span class=lnt id=hl-7-51><a class=lnlinks href=#hl-7-51>51</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 중재자 토폴로지 구현
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>EventMediator</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>workflows</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>processors</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>registerWorkflow</span><span class=p>(</span><span class=nx>eventType</span><span class=p>,</span> <span class=nx>steps</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>workflows</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>eventType</span><span class=p>,</span> <span class=nx>steps</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>registerProcessor</span><span class=p>(</span><span class=nx>processorType</span><span class=p>,</span> <span class=nx>processor</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>processors</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>processorType</span><span class=p>,</span> <span class=nx>processor</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>processEvent</span><span class=p>(</span><span class=nx>eventType</span><span class=p>,</span> <span class=nx>eventData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>workflow</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>workflows</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>eventType</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>workflow</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=sb>`No workflow found for event type: </span><span class=si>${</span><span class=nx>eventType</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>context</span> <span class=o>=</span> <span class=p>{</span> <span class=err>…</span><span class=nx>eventData</span><span class=p>,</span> <span class=nx>steps</span><span class=o>:</span> <span class=p>[]</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>step</span> <span class=k>of</span> <span class=nx>workflow</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>processor</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>processors</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>step</span><span class=p>.</span><span class=nx>processorType</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>processor</span><span class=p>.</span><span class=nx>process</span><span class=p>(</span><span class=nx>step</span><span class=p>,</span> <span class=nx>context</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=nx>context</span><span class=p>.</span><span class=nx>steps</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span> <span class=nx>step</span><span class=o>:</span> <span class=nx>step</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span> <span class=nx>result</span><span class=p>,</span> <span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;success&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>context</span><span class=p>.</span><span class=nx>steps</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span> <span class=nx>step</span><span class=o>:</span> <span class=nx>step</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span> <span class=nx>error</span><span class=p>,</span> <span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;failed&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleFailure</span><span class=p>(</span><span class=nx>workflow</span><span class=p>,</span> <span class=nx>context</span><span class=p>,</span> <span class=nx>step</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>context</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>handleFailure</span><span class=p>(</span><span class=nx>workflow</span><span class=p>,</span> <span class=nx>context</span><span class=p>,</span> <span class=nx>failedStep</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 보상 트랜잭션 실행
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>completedSteps</span> <span class=o>=</span> <span class=nx>context</span><span class=p>.</span><span class=nx>steps</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>s</span> <span class=p>=&gt;</span> <span class=nx>s</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=s1>&#39;success&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>completedStep</span> <span class=k>of</span> <span class=nx>completedSteps</span><span class=p>.</span><span class=nx>reverse</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>processor</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>processors</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>completedStep</span><span class=p>.</span><span class=nx>processorType</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=kr>await</span> <span class=nx>processor</span><span class=p>.</span><span class=nx>compensate</span><span class=p>(</span><span class=nx>completedStep</span><span class=p>,</span> <span class=nx>context</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>compensationError</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Compensation failed:&#39;</span><span class=p>,</span> <span class=nx>compensationError</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th><th><strong>기술적 근거 / 실무 적합성</strong></th><th></th></tr></thead><tbody><tr><td><strong>1. 확장성 (Scalability)</strong></td><td><strong>수평 확장 용이성</strong></td><td>컴포넌트별 독립적인 확장이 가능하여, 컨슈머 인스턴스를 트래픽에 따라 유동적으로 조정 가능</td><td>Kafka, RabbitMQ 등의 소비자 그룹 구조는 수평 확장을 기본적으로 지원</td><td></td></tr><tr><td></td><td><strong>리소스 효율성</strong></td><td>이벤트 중심의 비동기 처리로, 불필요한 자원 낭비 없이 필요한 순간만 처리 가능</td><td>Polling 제거 → 온디맨드 소비 기반으로 리소스 절약 가능</td><td></td></tr><tr><td><strong>2. 실시간성 (Real-Time Responsiveness)</strong></td><td><strong>즉시 반응성</strong></td><td>이벤트가 발생하는 즉시 처리 및 전파 가능 → 빠른 사용자 경험, 알림 및 반응 시스템 구축에 적합</td><td>Kafka Streams, Flink, Lambda 등의 실시간 스트리밍 구조와 호환됨</td><td></td></tr><tr><td></td><td><strong>낮은 지연 시간</strong></td><td>비동기 큐 기반 처리는 블로킹 없이 빠르게 응답 가능하여 전체 시스템 지연 시간 감소</td><td>비동기 I/O 기반 이벤트 처리 구조 적용 가능</td><td></td></tr><tr><td><strong>3. 느슨한 결합 (Loose Coupling)</strong></td><td><strong>디커플링 구조</strong></td><td>Producer 와 Consumer 는 서로 직접 참조하지 않으며, 메시지 브로커를 통해 연결됨 → 독립성 증가</td><td>API 직접 호출 대신 이벤트 메시지 전송 → 구조 분해 및 유연성 향상</td><td></td></tr><tr><td></td><td><strong>독립 개발·배포 가능</strong></td><td>컴포넌트 간 의존성이 낮아 팀 간 병렬 개발, 독립적 배포가 가능</td><td>마이크로서비스 분리 개발에 필수적인 전제 조건</td><td></td></tr><tr><td><strong>4. 유연성 (Flexibility)</strong></td><td><strong>서비스 변경 대응 용이</strong></td><td>새로운 소비자 추가 또는 기존 처리 로직 변경 시 기존 시스템에 영향 없이 확장 가능</td><td>이벤트 중심 구조이므로 신규 구독자는 메시지를 구독만 하면 됨</td><td></td></tr><tr><td></td><td><strong>이기종 통합 지원</strong></td><td>서로 다른 언어, 시스템, 프로토콜을 사용하는 시스템 간 통합이 쉬움</td><td>Kafka, Pulsar 등의 다양한 클라이언트 언어 SDK 존재</td><td></td></tr><tr><td><strong>5. 장애 격리 및 내결함성 (Resilience)</strong></td><td><strong>장애 전파 차단</strong></td><td>Producer, Broker, Consumer 간 경계가 존재하여 하나의 장애가 전체 시스템에 영향 미치지 않음</td><td>메시지 큐가 일시적인 장애를 버퍼링함으로써 회복 가능성 제공</td><td></td></tr><tr><td></td><td><strong>복구 용이성</strong></td><td>이벤트 로그 또는 스토어를 통해 실패 후 재처리 가능</td><td>Event Replay, DLQ, Retry Queue 등의 패턴 적용 가능</td><td></td></tr><tr><td><strong>6. 통합 및 상호운용성 (Interoperability)</strong></td><td><strong>시스템 통합 용이성</strong></td><td>다양한 언어와 플랫폼을 사용하는 시스템 간 메시지 기반 통합 가능</td><td>AMQP, MQTT, Kafka 등 프로토콜 기반 통합 패턴 적용 가능</td><td></td></tr><tr><td></td><td><strong>API 독립성</strong></td><td>직접적인 REST API 호출 없이도 서비스 간 데이터 연계 가능</td><td>이벤트 기반 Publish/Subscribe 모델로 메시지 흐름 설계 가능</td><td></td></tr><tr><td><strong>7. 비용 효율성 (Cost Efficiency)</strong></td><td><strong>리소스 최적화</strong></td><td>Polling 제거 및 불필요한 컴퓨팅 자원 사용 감소로 클라우드 비용 절감 가능</td><td>Serverless + 메시징 조합 시 비용 최적화 구조로 확장 가능</td><td></td></tr><tr><td></td><td><strong>온디맨드 처리</strong></td><td>요청이 있을 때만 이벤트 처리 → 유휴 시간 동안 리소스 소비 없음</td><td>클라우드 환경의 pay-as-you-go 모델에 적합</td><td></td></tr></tbody></table><h4 id=요약>요약<a hidden class=anchor aria-hidden=true href=#요약>#</a></h4><table><thead><tr><th>핵심 특성</th><th>설명 요약</th></tr></thead><tbody><tr><td><strong>확장성</strong></td><td>소비자 수평 확장, 트래픽 분산 처리 가능</td></tr><tr><td><strong>실시간성</strong></td><td>이벤트 발생 즉시 반응, 빠른 사용자 피드백 제공</td></tr><tr><td><strong>디커플링</strong></td><td>서비스 간 의존성 최소화 → 독립 개발, 유지보수 쉬움</td></tr><tr><td><strong>장애 격리</strong></td><td>개별 장애 발생 시 전체 영향 차단, 메시지 기반 복구 지원</td></tr><tr><td><strong>비용 절감</strong></td><td>Polling 제거, Serverless 와 결합 시 비용 효율 극대화</td></tr><tr><td><strong>유연성 및 통합성</strong></td><td>시스템 간 통합 및 확장 용이, 플랫폼 언어 독립적 메시징 환경 구현 가능</td></tr></tbody></table><h3 id=단점과-문제점-그리고-해결방안>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안>#</a></h3><h4 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h4><table><thead><tr><th>항목</th><th>설명</th><th>주요 원인</th><th>해결 방안</th></tr></thead><tbody><tr><td><strong>설계/운영 복잡성</strong></td><td>이벤트 흐름 관리, 라우팅, 스키마 진화 등으로 아키텍처가 복잡해짐</td><td>분산 구조, 다양한 컴포넌트 (브로커, 스키마 등) 존재</td><td>Event Portal, AsyncAPI 도입, IaC 관리 자동화</td></tr><tr><td><strong>디버깅 및 추적 어려움</strong></td><td>이벤트 기반 비동기 처리로 흐름 파악 및 Root Cause 분석이 어려움</td><td>비동기, 병렬, 분산 흐름</td><td>OpenTelemetry 기반 분산 트레이싱, 중앙 로깅, Correlation ID 활용</td></tr><tr><td><strong>데이터 일관성 문제</strong></td><td>Eventually Consistent 모델 특성상 상태 불일치 발생 가능</td><td>비동기 처리, 병렬성</td><td>Saga 패턴, Outbox 패턴, 보상 트랜잭션 등 도입</td></tr><tr><td><strong>중복 이벤트 처리</strong></td><td>재시도 시 멱등성 보장 실패 시 중복 처리 가능성 있음</td><td>네트워크 장애, 중복 송신</td><td>Idempotency 설계, 고유 메시지 ID, Deduplication 로직 구현</td></tr><tr><td><strong>이벤트 순서 보장 어려움</strong></td><td>분산 환경이나 병렬 처리 환경에서 순서 보장이 어려움</td><td>파티셔닝, 비순차 소비</td><td>Partition Key 기반 순서 보장, Single Writer Principle 적용</td></tr><tr><td><strong>운영/학습 부담</strong></td><td>인프라 구성 요소가 다양하고 도입 시 조직적 전환이 필요</td><td>브로커, DLQ, 모니터링 도구 등 학습 필요</td><td>클라우드 매니지드 브로커 사용, 교육 및 점진적 전환</td></tr><tr><td><strong>테스트 자동화 어려움</strong></td><td>이벤트 시퀀스, 상태 기반 테스트가 복잡하고 불확정성 존재</td><td>비동기 흐름, 상태 비저장</td><td>테스트 시뮬레이터, 시나리오 기반 테스트 자동화</td></tr></tbody></table><h4 id=문제점>문제점<a hidden class=anchor aria-hidden=true href=#문제점>#</a></h4><table><thead><tr><th>항목</th><th>설명</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 기법/패턴</th></tr></thead><tbody><tr><td><strong>메시지 유실</strong></td><td>이벤트가 브로커/네트워크 장애로 인해 손실됨</td><td>Ack 실패, 비영속 처리, 버퍼 초과</td><td>데이터 유실, 상태 불일치</td><td>브로커 메트릭, 실패 로그</td><td>Durable Queue 구성, Ack 보장</td><td>DLQ 구성, 재처리 스크립트, Kafka EOS 적용</td></tr><tr><td><strong>메시지 중복 처리</strong></td><td>동일 이벤트가 여러 번 처리되어 중복된 결과 발생</td><td>재시도 로직, 멱등성 미보장</td><td>데이터 중복, 로직 오류</td><td>메시지 ID 분석, 처리 이력 로깅</td><td>Idempotent Consumer 설계, 키 기반 메시지 추적</td><td>이벤트 ID 기반 deduplication, 트랜잭션 로그 검증</td></tr><tr><td><strong>이벤트 순서 왜곡</strong></td><td>처리 순서가 어긋나 상태 불일치 혹은 비즈니스 로직 충돌 발생</td><td>파티셔닝 미설정, 병렬 처리</td><td>순서 의존 로직 오류</td><td>Sequence ID, Timestamp 분석</td><td>Partition Key 기반 순서 보장</td><td>라미포트 타임스탬프, 정렬 큐, Single Writer 적용</td></tr><tr><td><strong>스키마 불일치 오류</strong></td><td>Producer/Consumer 간 스키마 변경 불일치로 인해 처리 오류 발생</td><td>Schema Evolution 미관리</td><td>Consumer 오류, 메시지 실패</td><td>Schema Validation 실패 로그 분석</td><td>Schema Registry, 스키마 버전 전략 관리</td><td>Forward/Backward Compatibility 설계, Contract Testing 적용</td></tr><tr><td><strong>메시지 지연</strong></td><td>이벤트 처리 지연으로 인해 SLA 위반 또는 실시간 처리 실패</td><td>브로커 과부하, 소비자 병목</td><td>응답 지연, 경보 누락</td><td>Consumer Lag, Latency 모니터링</td><td>Auto-scaling, QoS 설정, 파티션 증설</td><td>스로틀링, 우선순위 큐, Competing Consumer 패턴</td></tr><tr><td><strong>오작동 루프</strong></td><td>잘못된 라우팅 혹은 이벤트 재발행 구조로 무한 이벤트 루프 발생</td><td>이벤트 전파 경로 설계 미흡</td><td>시스템 과부하, 서비스 불능</td><td>TTL 설정, 순환 감지 트레이싱</td><td>라우팅 정책 정형화, 이벤트 전파 제어</td><td>TTL 메시지 만료 정책, DLQ 및 Dead Cycle 탐지 로직 도입</td></tr><tr><td><strong>컨슈머 처리 지연</strong></td><td>소비자가 이벤트를 제때 처리하지 못하여 대기열이 증가</td><td>처리 성능 부족, 리소스 미할당</td><td>실시간성 저하, 시스템 백업</td><td>Queue Depth, 처리율 모니터링</td><td>컨슈머 수 확장, 워커 병렬화</td><td>Backpressure 적용, Auto Scaling, SEDA 패턴</td></tr></tbody></table><h3 id=도전-과제>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>도전 과제</strong></th><th><strong>원인</strong></th><th><strong>영향</strong></th><th><strong>탐지/진단 방법</strong></th><th><strong>예방 전략</strong></th><th><strong>해결 방법 및 기술</strong></th><th></th></tr></thead><tbody><tr><td><strong>1. 확장성</strong></td><td>대규모 이벤트 처리</td><td>이벤트 볼륨 급증</td><td>시스템 과부하, 지연, 브로커 병목</td><td>메트릭 기반 모니터링, 큐/파티션 지표 추적</td><td>적절한 파티션/리플리카 수 조정, QoS 설정, Auto Scaling</td><td>Kafka 리밸런싱, Consumer Group 병렬 처리, 리소스 최적화</td><td></td></tr><tr><td></td><td>글로벌 멀티리전 메시징</td><td>지리적 분산 환경</td><td>레이턴시 증가, 데이터 동기화 지연</td><td>지역별 전송 지표 추적, 토픽 복제 상태 분석</td><td>Geo-partitioning, 트래픽 분산, Conflict 방지 설계</td><td>Cross-region replication, CRDT 기반 데이터 구조 설계</td><td></td></tr><tr><td><strong>2. 일관성 및 순서</strong></td><td>이벤트 순서 보장</td><td>분산 환경의 비동기 처리, 다중 소비자 구조</td><td>이벤트 순서 오류 → 로직 불일치</td><td>이벤트 흐름 로깅, 이벤트 ID 추적</td><td>키 기반 파티셔닝, 정렬된 큐 사용</td><td>Partition key 기반 순서 유지, 벡터 클록 사용, Ordered Queue 설계</td><td></td></tr><tr><td></td><td>이벤트 중복 및 멱등성 처리</td><td>재시도, 브로커 재전송 등</td><td>중복 이벤트 처리로 상태 오염</td><td>메시지 해시/ID 비교, 중복 수신율 모니터링</td><td>이벤트 ID 기반 중복 방지 설계</td><td>멱등성 보장 로직 구현, Outbox 패턴, DB 유니크 제약 적용</td><td></td></tr><tr><td><strong>3. 트랜잭션 및 데이터 일관성</strong></td><td>분산 트랜잭션 처리</td><td>서비스 간 연쇄적인 데이터 변경 요구</td><td>부분 실패 발생 시 데이터 불일치</td><td>로깅, 보상 트랜잭션 이벤트 추적</td><td>도메인 분리, 트랜잭션 최소화</td><td>Saga 패턴 (Orchestration/Choreography), 보상 트랜잭션 설계</td><td></td></tr><tr><td></td><td>메시지 유실 방지</td><td>네트워크/브로커 장애, Ack 미수신</td><td>데이터 손실 및 상태 오류 발생</td><td>DLQ 누적률, 이벤트 누락률 모니터링</td><td>ACK 보장, 저장 후 전송 방식 (Store & Forward)</td><td>Retry + DLQ, At-least-once 처리, Event Store 활용</td><td></td></tr><tr><td><strong>4. 스키마 및 메시지 진화</strong></td><td>스키마 변경/진화 관리</td><td>이벤트 포맷 변경</td><td>구독자 장애, 호환성 오류</td><td>Schema Registry 로그, 메시지 파싱 실패 분석</td><td>backward/forward 호환성 설계, 버전 명시화</td><td>Avro/Protobuf + Schema Registry, CI/CD 에서 호환성 검증 자동화</td><td></td></tr><tr><td></td><td>이벤트 크기 관리</td><td>과도한 페이로드 포함</td><td>네트워크 대역폭 증가, 처리 지연</td><td>메시지 크기 추적, 소비자 처리 시간 분석</td><td>페이로드 최소화, 참조 설계</td><td>참조 기반 메시지 구조 설계, Compression 적용</td><td></td></tr><tr><td><strong>5. 가시성 및 모니터링</strong></td><td>비동기 흐름 추적</td><td>메시지 기반 처리의 비직관성</td><td>디버깅 어려움, SLA 위반 가능성</td><td>분산 추적 도구, Correlation ID 활용</td><td>로그 표준화, 이벤트 카탈로그화</td><td>OpenTelemetry, Jaeger/Zipkin, Structured Logging 도입</td><td></td></tr><tr><td></td><td>운영 상태/지표 부족</td><td>모니터링 체계 미흡</td><td>병목/장애 발생 시 탐지 지연</td><td>브로커 메트릭, 소비자 처리율, DLQ 비율 분석</td><td>Prometheus + Grafana 대시보드 구성</td><td>Kafka Exporter, SLA 기반 알람 구성</td><td></td></tr><tr><td><strong>6. 보안 및 규제 대응</strong></td><td>이벤트 보안 및 인증</td><td>민감 데이터 포함 메시지 처리</td><td>데이터 유출, 규제 위반 위험</td><td>접근 로그, 암호화 상태 모니터링</td><td>TLS/mTLS 적용, OAuth2 인증, 최소 권한 설정</td><td>RBAC, 토큰 기반 인증, 데이터 암호화/토큰화, 감사 로그 보관</td><td></td></tr><tr><td></td><td>멀티 테넌시 환경 지원</td><td>테넌트 간 데이터 격리 필요</td><td>데이터 누수, 성능 간섭</td><td>테넌트별 이벤트 흐름 분리 분석</td><td>네임스페이스 및 ACL 설계</td><td>테넌트 기반 스트림 분리, 전용 리소스 할당</td><td></td></tr><tr><td><strong>7. 이벤트 스토어 및 저장소</strong></td><td>이벤트 스토어 관리</td><td>이벤트 지속성 유지로 인한 저장소 급증</td><td>디스크 부족, 조회 성능 저하</td><td>스토리지 사용률 추적, 이벤트 수명 분석</td><td>TTL, 아카이빙 정책, 정기 스냅샷</td><td>CQRS 기반 Read Store 설계, Event Archiving, Tiered Storage 활용</td><td></td></tr></tbody></table><h4 id=정리-요약>정리 요약<a hidden class=anchor aria-hidden=true href=#정리-요약>#</a></h4><table><thead><tr><th>구분</th><th>핵심 도전 요소</th><th>대응 기술 및 전략 요약</th></tr></thead><tbody><tr><td><strong>확장성</strong></td><td>대량 이벤트 처리, 글로벌 메시징</td><td>Partition 전략, Geo Replication, Auto Scaling</td></tr><tr><td><strong>일관성</strong></td><td>순서 보장, 멱등성, 중복 처리</td><td>Key 기반 처리, 이벤트 ID, 멱등성 핸들링</td></tr><tr><td><strong>트랜잭션</strong></td><td>분산 트랜잭션, 메시지 유실 방지</td><td>Saga 패턴, Outbox+CDC, DLQ/Retry</td></tr><tr><td><strong>스키마 관리</strong></td><td>메시지 진화, 스키마 호환성 문제</td><td>Schema Registry, 호환성 검증 파이프라인</td></tr><tr><td><strong>운영 및 가시성</strong></td><td>비동기 추적, 지표 모니터링</td><td>OpenTelemetry, Structured Logging, SLA 알람</td></tr><tr><td><strong>보안 및 규제</strong></td><td>데이터 보호, 인증/인가, 테넌시 격리</td><td>TLS, OAuth2, RBAC, 토큰화, 감사로그</td></tr><tr><td><strong>스토리지 관리</strong></td><td>이벤트 저장소의 용량 증가, 비용/성능 이슈</td><td>TTL, CQRS, Archiving, Read Optimization</td></tr></tbody></table><h3 id=분류-기준에-따른-종류-및-유형>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형>#</a></h3><table><thead><tr><th>분류 카테고리</th><th>분류 기준</th><th>주요 유형/옵션</th><th>설명 / 특징</th></tr></thead><tbody><tr><td><strong>1. 통신 모델</strong></td><td>이벤트 전달 방식</td><td><strong>Pub/Sub</strong>, <strong>Point-to-Point</strong>, <strong>Event Streaming</strong></td><td>Pub/Sub 은 1:N 브로드캐스트, P2P 는 1:1 큐 기반, Streaming 은 순차/재생 기반 전송</td></tr><tr><td></td><td>통신 방향</td><td>단방향 (Fire-and-Forget), 양방향 (Request-Reply)</td><td>WebSocket, gRPC 등 실시간 상호작용 구조에서도 이벤트 처리 가능</td></tr><tr><td></td><td>소비자 구조</td><td>Fan-out, Competing Consumers, Consumer Group</td><td>부하 분산/브로드캐스트 목적에 따라 소비자 모델 결정</td></tr><tr><td><strong>2. 내구성 모델</strong></td><td>저장 방식</td><td>Transient, Persisted</td><td>메모리 기반 일시 저장 vs 디스크 기반 내구성 확보</td></tr><tr><td></td><td>이벤트 재생 가능 여부</td><td>Volatile, Durable, Replayable</td><td>일시 소비만 필요한 경우 vs 영속성과 재처리를 고려한 구조 설계</td></tr><tr><td><strong>3. 브로커 구조</strong></td><td>배포 토폴로지</td><td>Centralized, Decentralized (Mesh), Hybrid</td><td>Kafka 등 중앙 집중형 vs Solace/NATS 기반 분산형, 혼합 구조도 가능</td></tr><tr><td></td><td>아키텍처 토폴로지</td><td><strong>Broker Topology</strong>, <strong>Mediator Topology</strong></td><td>이벤트 중심 허브형 or 워크플로우 중심 중재자 구조 (오케스트레이션 기반)</td></tr><tr><td><strong>4. 처리 모델</strong></td><td>이벤트 처리 방식</td><td>Simple Event Processing, Complex Event Processing</td><td>단순한 이벤트 반응 vs 패턴 매칭, 집계, 조건 기반 복합 분석 등</td></tr><tr><td></td><td>일관성 모델</td><td>Strong Consistency, Eventual Consistency</td><td>동기 기반 강일관성 vs 비동기 기반 지연된 일관성 (성능/확장성 고려)</td></tr><tr><td><strong>5. 전달 보장</strong></td><td>메시지 배달 보장 수준</td><td>At-most-once, At-least-once, Exactly-once</td><td>이벤트 유실 허용/중복 허용/정확히 1 회 처리, 복잡도와 성능 트레이드오프</td></tr><tr><td><strong>6. 이벤트 생성 방식</strong></td><td>생성 방식</td><td>Event Sourcing, CDC(Change Data Capture), ECST</td><td>DB 변경 기반 이벤트 생성, 상태 변경 저장 기반 재구성, 이벤트 자체에 상태 포함</td></tr><tr><td><strong>7. 이벤트 설계 전략</strong></td><td>상태 전달 방식</td><td>Stateless, Event Carried State Transfer</td><td>상태 없는 이벤트 vs 상태를 포함하는 이벤트 구조 (서비스 간 상태 동기화에 사용)</td></tr><tr><td><strong>8. 거버넌스</strong></td><td>관리 체계</td><td>Event Portal, Schema Registry, Versioning</td><td>이벤트 계약, 스키마 진화, 이벤트 버전관리 등으로 안정적인 확장성과 통합 가능</td></tr><tr><td><strong>9. 최적화 전략</strong></td><td>성능 패턴</td><td>SEDA, Backpressure, Partitioning</td><td>처리량 제어, 메시지 흐름 제어, 병렬성 향상을 위한 파티셔닝 등 적용</td></tr><tr><td><strong>10. 패턴 통합</strong></td><td>아키텍처 통합 전략</td><td>CQRS + EDA, DDD + EDA, Event Sourcing</td><td>명령/조회 분리, 도메인 주도 설계와 결합된 이벤트 처리 구조 등</td></tr></tbody></table><h3 id=이벤트-유형-분류-전략>이벤트 유형 분류 전략<a hidden class=anchor aria-hidden=true href=#이벤트-유형-분류-전략>#</a></h3><p>이벤트는 <strong>역할과 범위</strong>에 따라 <code>Domain Event</code> 와 <code>Integration Event</code> 로 나누며, 이는 EDA 설계에서 매우 중요하다.</p><table><thead><tr><th>항목</th><th><strong>Domain Event</strong></th><th><strong>Integration Event</strong></th></tr></thead><tbody><tr><td><strong>정의</strong></td><td><strong>도메인 내부의 의미 있는 상태 변화</strong></td><td><strong>서비스 간 통합을 위한 이벤트</strong></td></tr><tr><td><strong>범위</strong></td><td>내부 서비스 또는 Bounded Context 범위</td><td>외부 시스템 또는 다른 Bounded Context 에 전달되기 위한 이벤트</td></tr><tr><td><strong>주 목적</strong></td><td>내부 비즈니스 로직 흐름 전파</td><td>시스템 간 데이터 동기화 또는 통합 목적</td></tr><tr><td><strong>변경 가능성</strong></td><td>상대적으로 자주 변경될 수 있음</td><td>변경 시 계약 (contract) 변경에 민감. 변경 최소화 필요</td></tr><tr><td><strong>구조 (Payload)</strong></td><td>도메인 모델 그대로 또는 추상화된 형태 가능</td><td>API 레벨 DTO 와 유사한 명확한 필드 명세 필요</td></tr><tr><td><strong>예시</strong></td><td><code>OrderCreatedEvent</code>, <code>InventoryReservedEvent</code></td><td><code>UserRegisteredIntegrationEvent</code>, <code>InvoiceGeneratedEvent</code></td></tr></tbody></table><h4 id=예시>예시<a hidden class=anchor aria-hidden=true href=#예시>#</a></h4><h5 id=domain-event>Domain Event<a hidden class=anchor aria-hidden=true href=#domain-event>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;event_id&#34;</span><span class=p>:</span> <span class=s2>&#34;abc-001&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;event_type&#34;</span><span class=p>:</span> <span class=s2>&#34;InventoryAdjusted&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;occurred_at&#34;</span><span class=p>:</span> <span class=s2>&#34;2025-07-17T14:00:00Z&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;payload&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;sku&#34;</span><span class=p>:</span> <span class=s2>&#34;ITEM-100&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;change&#34;</span><span class=p>:</span> <span class=mi>-2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;reason&#34;</span><span class=p>:</span> <span class=s2>&#34;OrderFulfilled&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>내부 도메인 모델에서 상태 변경 발생 시 사용</strong></li><li><strong>Inventory → 내부 Accounting 또는 Notification 으로 흐름 전달</strong></li></ul><h5 id=integration-event>Integration Event<a hidden class=anchor aria-hidden=true href=#integration-event>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;event_id&#34;</span><span class=p>:</span> <span class=s2>&#34;def-101&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;event_type&#34;</span><span class=p>:</span> <span class=s2>&#34;UserRegistered&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;occurred_at&#34;</span><span class=p>:</span> <span class=s2>&#34;2025-07-17T14:00:00Z&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;payload&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;user_id&#34;</span><span class=p>:</span> <span class=s2>&#34;U123&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;email&#34;</span><span class=p>:</span> <span class=s2>&#34;user@example.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Lee HyunYoon&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>회원 가입 결과를 외부 마케팅 플랫폼, CRM, 분석 시스템에 전파</strong></li><li><strong>Event contract 가 강하게 고정되어야 함</strong></li></ul><h3 id=event-driven-architecture-vs-동기적-rest-api-architecture-비교>Event-Driven Architecture vs. 동기적 REST API Architecture 비교<a hidden class=anchor aria-hidden=true href=#event-driven-architecture-vs-동기적-rest-api-architecture-비교>#</a></h3><ul><li><p><strong>이벤트 기반</strong>은 비동기 협업, 높은 확장성, 장애에 강한 구조가 필요할 때 적합하다. 단, 인프라와 디버깅 복잡도가 높다는 점을 고려해야 한다.</p></li><li><p><strong>동기적 REST API</strong>는 단순 CRUD 및 실시간 응답이 필요한 시스템에 적합하고, 도입 및 유지 관리가 비교적 용이하다. 높은 트래픽 환경에서는 병목 및 장애가 클 수 있어 캐싱, 로드밸런싱과 같은 전략이 필요하다.</p></li></ul><h4 id=event-driven-architecture-1>Event-Driven Architecture<a hidden class=anchor aria-hidden=true href=#event-driven-architecture-1>#</a></h4><ul><li><p><strong>정의</strong>: 시스템 내 서비스들이 이벤트를 발행 (publish) 하고, 다른 서비스들이 이를 구독 (subscribe) 하여 비동기적으로 처리하는 구조.</p></li><li><p><strong>구성 요소</strong>:</p><ol><li><strong>이벤트 프로듀서</strong>: 상태 변화나 작업 완료 등의 이벤트를 생성</li><li><strong>메시지 브로커/이벤트 버스</strong>: 이벤트를 중계</li><li><strong>이벤트 컨슈머</strong>: 브로커에서 이벤트를 받아 처리</li></ol></li><li><p><strong>장점</strong>:</p><ul><li>높은 <strong>확장성</strong>: Consumer 를 수평으로 늘려 부하 분산 가능</li><li><strong>느슨한 결합도</strong>: Producer 와 Consumer 가 직접 연결되지 않음</li><li>시스템 전반의 <strong>내결함성</strong> 향상 가능</li></ul></li><li><p><strong>단점</strong>:</p><ul><li><strong>디버깅 어려움</strong>: 흐름 추적이 까다로움</li><li><strong>운영 복잡도</strong>: 브로커 설정 및 관리 필요</li></ul></li><li><p><strong>적합한 경우</strong>:</p><ul><li>실시간 알림, 데이터 파이프라인 처리, IoT 이벤트 처리 등</li><li>시스템 간 <strong>비동기 협업</strong>이 잦을 때</li></ul></li></ul><h4 id=동기적-rest-api-architecture>동기적 REST API Architecture<a hidden class=anchor aria-hidden=true href=#동기적-rest-api-architecture>#</a></h4><ul><li><p><strong>정의</strong>: 클라이언트가 HTTP 요청을 보내고, 서버가 응답을 돌려주는 <strong>동기식 요청 - 응답</strong> 구조.</p></li><li><p><strong>구성 요소</strong>:</p><ol><li><strong>클라이언트</strong>: RESTful 요청 수행</li><li><strong>서버 (리소스 제공자)</strong>: 요청 처리 후 응답</li></ol></li><li><p><strong>장점</strong>:</p><ul><li><strong>이해·디버깅 쉬움</strong>: 요청 - 응답 흐름 명확</li><li><strong>도구와 표준의 풍부함</strong>: HTTP, JSON, JWT 활용</li><li><strong>보안 구성 직관적</strong></li></ul></li><li><p><strong>단점</strong>:</p><ul><li>높은 부하 시 <strong>성능 저하 및 연결 지연</strong></li><li><strong>결합도</strong>가 상대적으로 높으며, 네트워크 장애 발생 시 전체 영향을 받을 수 있음</li></ul></li><li><p><strong>적합한 경우</strong>:</p><ul><li>단순 CRUD 기반 서비스, 즉각적인 응답이 필요한 시나리오</li><li>프론트엔드와 백엔드 간 명확한 상호작용이 필요한 경우</li></ul></li></ul><h4 id=비교-분석>비교 분석<a hidden class=anchor aria-hidden=true href=#비교-분석>#</a></h4><table><thead><tr><th>항목</th><th>이벤트 기반 아키텍처</th><th>동기적 REST API 아키텍처</th></tr></thead><tbody><tr><td><strong>통신 방식</strong></td><td>비동기 메시지 기반</td><td>동기 HTTP 요청 - 응답</td></tr><tr><td><strong>결합도</strong></td><td>낮음 (느슨한 결합)</td><td>높음 (직접 통신)</td></tr><tr><td><strong>확장성</strong></td><td>뛰어남 (수평 확장 용이)</td><td>중간 수준</td></tr><tr><td><strong>성능</strong></td><td>유연한 처리, 처리량 높음</td><td>실시간 반응 좋음, 부하 시 지연 발생</td></tr><tr><td><strong>응답 지연</strong></td><td>이벤트 처리 후 응답 (대체로 비실시간)</td><td>즉시 응답 (실시간성 제공)</td></tr><tr><td><strong>에러 처리</strong></td><td>재시도/대기 큐 등 복잡한 접근 필요</td><td>HTTP 상태 코드 기반, 단순</td></tr><tr><td><strong>추적 및 디버깅</strong></td><td>분산 추적 필요, 까다로움</td><td>직관적, 요청 로그 분석 용이</td></tr><tr><td><strong>운영 복잡도</strong></td><td>브로커 구성·모니터링 필요</td><td>비교적 단순</td></tr><tr><td><strong>적합 시나리오</strong></td><td>실시간 이벤트 처리, 스트리밍, IoT</td><td>CRUD, 인증, 서버 간 직접 통신</td></tr><tr><td><strong>보안 처리</strong></td><td>메시지 인증·암호화 필요</td><td>HTTPS, JWT 등 인증 제공</td></tr><tr><td><strong>도입 난이도</strong></td><td>도전적, 인프라 비용 증가</td><td>쉬움, 넓은 도구 지원</td></tr></tbody></table><h3 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h3><table><thead><tr><th>도메인</th><th>사용 목적</th><th>사용 기술 / 패턴</th><th>기대 효과</th><th>대표 시나리오 / 설명</th></tr></thead><tbody><tr><td><strong>E-Commerce</strong></td><td>주문 처리, 결제, 재고 연동</td><td>Kafka, Redis, Event Sourcing, CQRS, Saga Pattern</td><td>실시간 처리, 데이터 일관성, 장애 격리, 확장성</td><td>주문 생성 → 결제 처리 → 재고 차감 → 배송 연동 등 마이크로서비스 통합 시나리오</td></tr><tr><td><strong>금융 / 트레이딩</strong></td><td>실시간 거래 처리, 사기 탐지, 로그 기록</td><td>Kafka Streams, Flink, Pulsar, Event Sourcing</td><td>밀리초 단위 처리, 사기 탐지, 추적 가능성, 확장성</td><td>카드 결제 승인, 거래 이상 징후 탐지, 이벤트 기반 회계 처리 등</td></tr><tr><td><strong>IoT / 제조</strong></td><td>센서 데이터 수집, 실시간 분석 및 경보</td><td>MQTT, AWS IoT Core, Kinesis, InfluxDB, Node-RED</td><td>대규모 비동기 수집, 서버리스 확장성, 지연 최소화</td><td>온도/습도 센서 모니터링, 기계 상태 감시, 예측 정비 시스템 등</td></tr><tr><td><strong>실시간 분석 / BI</strong></td><td>사용자 행동 분석, 추천, 대시보드 갱신</td><td>Flink, Kafka, Dataflow, WebSocket</td><td>실시간 인사이트 도출, 사용자 경험 향상</td><td>클릭스트림 분석, 실시간 추천 시스템, 실시간 KPI 대시보드 등</td></tr><tr><td><strong>모니터링 / 경보</strong></td><td>시스템 상태 모니터링 및 알림 전송</td><td>Prometheus, Grafana, Kafka, PagerDuty, Redis Pub/Sub</td><td>실시간 알림, 장애 대응 속도 향상, SLA 보장</td><td>시스템 CPU 이상 감지 시 Slack 알림, DLQ 발생 알림 등</td></tr><tr><td><strong>소셜 / 메시징</strong></td><td>실시간 피드, 채팅, 알림 전송</td><td>Redis Streams, RabbitMQ, Kafka</td><td>실시간 UX, 확장 가능한 메시징 처리</td><td>채팅앱 메시지 송수신, 팔로우 피드 생성, 실시간 알림 전송 등</td></tr><tr><td><strong>게임 / 미디어</strong></td><td>실시간 게임 상태, 리더보드, 콘텐츠 분석</td><td>Pulsar, Kafka, Storm, MongoDB</td><td>실시간 반영, 확장성, 분석 지연 최소화</td><td>사용자 행동에 따른 리더보드 갱신, 실시간 방송 트래픽 분석 등</td></tr><tr><td><strong>백오피스 시스템</strong></td><td>내부 이벤트 기반 로깅 및 감사 기록 관리</td><td>Event Sourcing, Kafka</td><td>이력 추적, 감사 대응, 변경사항 재생</td><td>주문 상태 변경 로그 기록, 사용자 활동 이력 기록 등</td></tr></tbody></table><h3 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h3><h4 id=사례-1-전자상거래-주문-처리>사례 1: 전자상거래 주문 처리<a hidden class=anchor aria-hidden=true href=#사례-1-전자상거래-주문-처리>#</a></h4><p><strong>Workflow</strong>:</p><pre class=mermaid>flowchart TD
  User(사용자)
  Gateway(API 게이트웨이)
  OS(Order Service)
  Payment(Payment Service)
  Inventory(Inventory Service)
  Shipping(Shipping Service)
  Kafka(Kafka Broker)
  DB(Event Store)

  User --&gt; Gateway --&gt; OS
  OS --&gt; Kafka[&#34;Topic: order.created&#34;]
  Kafka --&gt; Payment
  Kafka --&gt; Inventory
  Payment --&gt; Kafka[&#34;order.paid&#34;]
  Inventory --&gt; Kafka[&#34;inventory.reserved&#34;]
  Kafka --&gt; Shipping
  Kafka --&gt; DB
</pre><p><strong>역할 분석</strong>:</p><ul><li><strong>Order Service</strong>는 주문 생성 이벤트 발행</li><li><strong>Payment/Inventory</strong>는 해당 이벤트 구독 후 처리 후, 후속 이벤트 발행</li><li><strong>Shipping</strong>은 최종 소비자로서 배송 시작</li><li><strong>Event Store</strong>는 이벤트 이력 기록 및 감사/audit, 재생 가능</li><li><strong>Kafka Broker</strong>는 모든 이벤트 메시지 전파/라우팅</li></ul><p><strong>EDA 도입 전후 비교</strong>:</p><table><thead><tr><th>구분</th><th>사전 (동기 중심)</th><th>도입 후 (이벤트 중심)</th></tr></thead><tbody><tr><td>구조</td><td>주문⇢결제⇢재고⇢배송 → 단일 흐름</td><td>서비스 간 독립적 이벤트 방식</td></tr><tr><td>장애</td><td>한 서비스 장애 시 전체 중단</td><td>장애 서비스만 격리, 복구 가능</td></tr><tr><td>확장성</td><td>전체 시스템 확장 필요</td><td>소비자만 개별 확장 가능</td></tr><tr><td>모니터링</td><td>단일 흐름 트레이스 어려움</td><td>이벤트 추적 가능, 모니터링 용이</td></tr></tbody></table><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// orderService.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=p>{</span> <span class=nx>Kafka</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;kafkajs&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>kafka</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Kafka</span><span class=p>({</span> <span class=nx>brokers</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;localhost:9092&#39;</span><span class=p>]</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>producer</span> <span class=o>=</span> <span class=nx>kafka</span><span class=p>.</span><span class=nx>producer</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>createOrder</span><span class=p>(</span><span class=nx>order</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=nx>producer</span><span class=p>.</span><span class=nx>send</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>topic</span><span class=o>:</span> <span class=s1>&#39;order.created&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>messages</span><span class=o>:</span> <span class=p>[{</span> <span class=nx>key</span><span class=o>:</span> <span class=nx>order</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span> <span class=nx>value</span><span class=o>:</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>order</span><span class=p>)</span> <span class=p>}]</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Order event published: </span><span class=si>${</span><span class=nx>order</span><span class=p>.</span><span class=nx>id</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>createOrder</span> <span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1> 1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2> 2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3> 3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4> 4</a>
</span><span class=lnt id=hl-12-5><a class=lnlinks href=#hl-12-5> 5</a>
</span><span class=lnt id=hl-12-6><a class=lnlinks href=#hl-12-6> 6</a>
</span><span class=lnt id=hl-12-7><a class=lnlinks href=#hl-12-7> 7</a>
</span><span class=lnt id=hl-12-8><a class=lnlinks href=#hl-12-8> 8</a>
</span><span class=lnt id=hl-12-9><a class=lnlinks href=#hl-12-9> 9</a>
</span><span class=lnt id=hl-12-10><a class=lnlinks href=#hl-12-10>10</a>
</span><span class=lnt id=hl-12-11><a class=lnlinks href=#hl-12-11>11</a>
</span><span class=lnt id=hl-12-12><a class=lnlinks href=#hl-12-12>12</a>
</span><span class=lnt id=hl-12-13><a class=lnlinks href=#hl-12-13>13</a>
</span><span class=lnt id=hl-12-14><a class=lnlinks href=#hl-12-14>14</a>
</span><span class=lnt id=hl-12-15><a class=lnlinks href=#hl-12-15>15</a>
</span><span class=lnt id=hl-12-16><a class=lnlinks href=#hl-12-16>16</a>
</span><span class=lnt id=hl-12-17><a class=lnlinks href=#hl-12-17>17</a>
</span><span class=lnt id=hl-12-18><a class=lnlinks href=#hl-12-18>18</a>
</span><span class=lnt id=hl-12-19><a class=lnlinks href=#hl-12-19>19</a>
</span><span class=lnt id=hl-12-20><a class=lnlinks href=#hl-12-20>20</a>
</span><span class=lnt id=hl-12-21><a class=lnlinks href=#hl-12-21>21</a>
</span><span class=lnt id=hl-12-22><a class=lnlinks href=#hl-12-22>22</a>
</span><span class=lnt id=hl-12-23><a class=lnlinks href=#hl-12-23>23</a>
</span><span class=lnt id=hl-12-24><a class=lnlinks href=#hl-12-24>24</a>
</span><span class=lnt id=hl-12-25><a class=lnlinks href=#hl-12-25>25</a>
</span><span class=lnt id=hl-12-26><a class=lnlinks href=#hl-12-26>26</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// paymentService.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=p>{</span> <span class=nx>Kafka</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;kafkajs&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>kafka</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Kafka</span><span class=p>({</span> <span class=nx>brokers</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;localhost:9092&#39;</span><span class=p>]</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>consumer</span> <span class=o>=</span> <span class=nx>kafka</span><span class=p>.</span><span class=nx>consumer</span><span class=p>({</span> <span class=nx>groupId</span><span class=o>:</span> <span class=s1>&#39;payment-service&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>producer</span> <span class=o>=</span> <span class=nx>kafka</span><span class=p>.</span><span class=nx>producer</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>start</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=nx>consumer</span><span class=p>.</span><span class=nx>connect</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=nx>consumer</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>({</span> <span class=nx>topic</span><span class=o>:</span> <span class=s1>&#39;order.created&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=nx>producer</span><span class=p>.</span><span class=nx>connect</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=nx>consumer</span><span class=p>.</span><span class=nx>run</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>eachMessage</span><span class=o>:</span> <span class=kr>async</span> <span class=p>({</span> <span class=nx>message</span> <span class=p>})</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>order</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>message</span><span class=p>.</span><span class=nx>value</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 결제 처리 로직
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=kr>const</span> <span class=nx>paymentResult</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>orderId</span><span class=o>:</span> <span class=nx>order</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span> <span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;PAID&#39;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>      <span class=kr>await</span> <span class=nx>producer</span><span class=p>.</span><span class=nx>send</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>topic</span><span class=o>:</span> <span class=s1>&#39;order.paid&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>messages</span><span class=o>:</span> <span class=p>[{</span> <span class=nx>key</span><span class=o>:</span> <span class=nx>order</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span> <span class=nx>value</span><span class=o>:</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>paymentResult</span><span class=p>)</span> <span class=p>}]</span>
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Payment processed for order </span><span class=si>${</span><span class=nx>order</span><span class=p>.</span><span class=nx>id</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>start</span><span class=p>().</span><span class=k>catch</span><span class=p>(</span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>Order Service</strong>는 주문 생성 시 이벤트 발행</li><li><strong>Payment Service</strong>는 order.created 메시지를 소비하여 후속 이벤트 발행</li><li><strong>다른 서비스들</strong>(Inventory, Shipping) 은 동일한 방식으로 응답</li></ul><h4 id=사례-2-주문-처리-시스템>사례 2: 주문 처리 시스템<a hidden class=anchor aria-hidden=true href=#사례-2-주문-처리-시스템>#</a></h4><p><strong>시스템 구성:</strong></p><ul><li>주문 서비스 → 이벤트 브로커 → 결제, 배송, 알림 서비스</li></ul><pre class=mermaid>graph LR
    A[주문 서비스] --&gt; B[이벤트 브로커]
    B --&gt; C[결제 서비스]
    B --&gt; D[배송 서비스]
    B --&gt; E[알림 서비스]
</pre><p><strong>역할:</strong></p><ul><li>주문 서비스가 주문 이벤트를 브로커에 발행하면, 브로커는 이를 결제, 배송, 알림 서비스에 비동기적으로 전달.</li></ul><p><strong>차이점:</strong></p><ul><li>이벤트 기반 아키텍처가 없으면 서비스 간 직접 호출로 인해 결합도가 높아지고, 확장성과 장애 격리력이 떨어짐.</li></ul><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1> 1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2> 2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3> 3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4> 4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5> 5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6> 6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7> 7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8> 8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9> 9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10>10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11>11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12>12</a>
</span><span class=lnt id=hl-14-13><a class=lnlinks href=#hl-14-13>13</a>
</span><span class=lnt id=hl-14-14><a class=lnlinks href=#hl-14-14>14</a>
</span><span class=lnt id=hl-14-15><a class=lnlinks href=#hl-14-15>15</a>
</span><span class=lnt id=hl-14-16><a class=lnlinks href=#hl-14-16>16</a>
</span><span class=lnt id=hl-14-17><a class=lnlinks href=#hl-14-17>17</a>
</span><span class=lnt id=hl-14-18><a class=lnlinks href=#hl-14-18>18</a>
</span><span class=lnt id=hl-14-19><a class=lnlinks href=#hl-14-19>19</a>
</span><span class=lnt id=hl-14-20><a class=lnlinks href=#hl-14-20>20</a>
</span><span class=lnt id=hl-14-21><a class=lnlinks href=#hl-14-21>21</a>
</span><span class=lnt id=hl-14-22><a class=lnlinks href=#hl-14-22>22</a>
</span><span class=lnt id=hl-14-23><a class=lnlinks href=#hl-14-23>23</a>
</span><span class=lnt id=hl-14-24><a class=lnlinks href=#hl-14-24>24</a>
</span><span class=lnt id=hl-14-25><a class=lnlinks href=#hl-14-25>25</a>
</span><span class=lnt id=hl-14-26><a class=lnlinks href=#hl-14-26>26</a>
</span><span class=lnt id=hl-14-27><a class=lnlinks href=#hl-14-27>27</a>
</span><span class=lnt id=hl-14-28><a class=lnlinks href=#hl-14-28>28</a>
</span><span class=lnt id=hl-14-29><a class=lnlinks href=#hl-14-29>29</a>
</span><span class=lnt id=hl-14-30><a class=lnlinks href=#hl-14-30>30</a>
</span><span class=lnt id=hl-14-31><a class=lnlinks href=#hl-14-31>31</a>
</span><span class=lnt id=hl-14-32><a class=lnlinks href=#hl-14-32>32</a>
</span><span class=lnt id=hl-14-33><a class=lnlinks href=#hl-14-33>33</a>
</span><span class=lnt id=hl-14-34><a class=lnlinks href=#hl-14-34>34</a>
</span><span class=lnt id=hl-14-35><a class=lnlinks href=#hl-14-35>35</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 이벤트 브로커 클래스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>EventBroker</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>subscribers</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>subscribe</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>,</span> <span class=n>callback</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>event</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>subscribers</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>subscribers</span><span class=p>[</span><span class=n>event</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>subscribers</span><span class=p>[</span><span class=n>event</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>callback</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>publish</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>event</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>subscribers</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>callback</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>subscribers</span><span class=p>[</span><span class=n>event</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=n>callback</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 이벤트 발행자(주문 서비스)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>order_service</span><span class=p>(</span><span class=n>broker</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>broker</span><span class=o>.</span><span class=n>publish</span><span class=p>(</span><span class=s1>&#39;order&#39;</span><span class=p>,</span> <span class=p>{</span><span class=s1>&#39;order_id&#39;</span><span class=p>:</span> <span class=mi>123</span><span class=p>,</span> <span class=s1>&#39;product&#39;</span><span class=p>:</span> <span class=s1>&#39;Laptop&#39;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 이벤트 소비자(결제, 배송, 알림 서비스)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>payment_service</span><span class=p>(</span><span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;결제 처리:&#39;</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>delivery_service</span><span class=p>(</span><span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;배송 처리:&#39;</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>notification_service</span><span class=p>(</span><span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;알림 처리:&#39;</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 브로커 생성</span>
</span></span><span class=line><span class=cl><span class=n>broker</span> <span class=o>=</span> <span class=n>EventBroker</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>broker</span><span class=o>.</span><span class=n>subscribe</span><span class=p>(</span><span class=s1>&#39;order&#39;</span><span class=p>,</span> <span class=n>payment_service</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>broker</span><span class=o>.</span><span class=n>subscribe</span><span class=p>(</span><span class=s1>&#39;order&#39;</span><span class=p>,</span> <span class=n>delivery_service</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>broker</span><span class=o>.</span><span class=n>subscribe</span><span class=p>(</span><span class=s1>&#39;order&#39;</span><span class=p>,</span> <span class=n>notification_service</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 이벤트 발행</span>
</span></span><span class=line><span class=cl><span class=n>order_service</span><span class=p>(</span><span class=n>broker</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=사례-3-kafka-기반-주문-처리-시스템>사례 3: Kafka 기반 주문 처리 시스템<a hidden class=anchor aria-hidden=true href=#사례-3-kafka-기반-주문-처리-시스템>#</a></h4><p><strong>시스템 구성</strong>:</p><pre class=mermaid>flowchart TB
  subgraph WebApp
    U[User 주문 요청] --&gt; API[Order API]
  end
  API --&gt; KafkaTopic[OrderCreated Topic]
  subgraph 미판매 서비스
    InventorySvc --&gt; KafkaTopic
  end
  subgraph 소비자들
    InventorySvc[재고 검사] --&gt; PaymentSvc[청구 서비스]
    NotificationSvc[알림 발송]
    AnalyticsSvc[로그 분석]
  end  
  KafkaTopic --&gt; InventorySvc
  KafkaTopic --&gt; PaymentSvc
  KafkaTopic --&gt; NotificationSvc
  KafkaTopic --&gt; AnalyticsSvc
</pre><p><strong>Workflow</strong>:</p><ol><li>WebApp → API 서버가 <code>OrderCreated</code> 이벤트 발행</li><li>Kafka 는 이벤트를 <code>InventorySvc</code>, <code>PaymentSvc</code>, <code>NotificationSvc</code>, <code>AnalyticsSvc</code> 등 컨슈머에게 전달</li><li>각 컨슈머는 독립적으로 처리 수행</li><li>장애 발생 시 DLQ 처리 및 자동 복구 가능</li></ol><p><strong>핵심 역할</strong>:</p><ul><li>주문 상태 비동기 전파 → 다른 서비스 의존성 최소화</li><li>확장성: 소비자별 오토스케일링 가능</li><li>장애 격리: 한 서비스 장애가 전체 시스템 영향 최소화</li></ul><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1> 1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2> 2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3> 3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4> 4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5> 5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6> 6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7> 7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8> 8</a>
</span><span class=lnt id=hl-16-9><a class=lnlinks href=#hl-16-9> 9</a>
</span><span class=lnt id=hl-16-10><a class=lnlinks href=#hl-16-10>10</a>
</span><span class=lnt id=hl-16-11><a class=lnlinks href=#hl-16-11>11</a>
</span><span class=lnt id=hl-16-12><a class=lnlinks href=#hl-16-12>12</a>
</span><span class=lnt id=hl-16-13><a class=lnlinks href=#hl-16-13>13</a>
</span><span class=lnt id=hl-16-14><a class=lnlinks href=#hl-16-14>14</a>
</span><span class=lnt id=hl-16-15><a class=lnlinks href=#hl-16-15>15</a>
</span><span class=lnt id=hl-16-16><a class=lnlinks href=#hl-16-16>16</a>
</span><span class=lnt id=hl-16-17><a class=lnlinks href=#hl-16-17>17</a>
</span><span class=lnt id=hl-16-18><a class=lnlinks href=#hl-16-18>18</a>
</span><span class=lnt id=hl-16-19><a class=lnlinks href=#hl-16-19>19</a>
</span><span class=lnt id=hl-16-20><a class=lnlinks href=#hl-16-20>20</a>
</span><span class=lnt id=hl-16-21><a class=lnlinks href=#hl-16-21>21</a>
</span><span class=lnt id=hl-16-22><a class=lnlinks href=#hl-16-22>22</a>
</span><span class=lnt id=hl-16-23><a class=lnlinks href=#hl-16-23>23</a>
</span><span class=lnt id=hl-16-24><a class=lnlinks href=#hl-16-24>24</a>
</span><span class=lnt id=hl-16-25><a class=lnlinks href=#hl-16-25>25</a>
</span><span class=lnt id=hl-16-26><a class=lnlinks href=#hl-16-26>26</a>
</span><span class=lnt id=hl-16-27><a class=lnlinks href=#hl-16-27>27</a>
</span><span class=lnt id=hl-16-28><a class=lnlinks href=#hl-16-28>28</a>
</span><span class=lnt id=hl-16-29><a class=lnlinks href=#hl-16-29>29</a>
</span><span class=lnt id=hl-16-30><a class=lnlinks href=#hl-16-30>30</a>
</span><span class=lnt id=hl-16-31><a class=lnlinks href=#hl-16-31>31</a>
</span><span class=lnt id=hl-16-32><a class=lnlinks href=#hl-16-32>32</a>
</span><span class=lnt id=hl-16-33><a class=lnlinks href=#hl-16-33>33</a>
</span><span class=lnt id=hl-16-34><a class=lnlinks href=#hl-16-34>34</a>
</span><span class=lnt id=hl-16-35><a class=lnlinks href=#hl-16-35>35</a>
</span><span class=lnt id=hl-16-36><a class=lnlinks href=#hl-16-36>36</a>
</span><span class=lnt id=hl-16-37><a class=lnlinks href=#hl-16-37>37</a>
</span><span class=lnt id=hl-16-38><a class=lnlinks href=#hl-16-38>38</a>
</span><span class=lnt id=hl-16-39><a class=lnlinks href=#hl-16-39>39</a>
</span><span class=lnt id=hl-16-40><a class=lnlinks href=#hl-16-40>40</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># requirements: confluent-kafka==2.0.0</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>confluent_kafka</span> <span class=kn>import</span> <span class=n>Producer</span><span class=p>,</span> <span class=n>Consumer</span><span class=p>,</span> <span class=n>KafkaException</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span><span class=o>,</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 1. 프로듀서 설정 및 이벤트 발행</span>
</span></span><span class=line><span class=cl><span class=n>producer_conf</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;bootstrap.servers&#39;</span><span class=p>:</span> <span class=s1>&#39;kafka:9092&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>producer</span> <span class=o>=</span> <span class=n>Producer</span><span class=p>(</span><span class=n>producer_conf</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>publish_order</span><span class=p>(</span><span class=n>order</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>producer</span><span class=o>.</span><span class=n>produce</span><span class=p>(</span><span class=s1>&#39;OrderCreated&#39;</span><span class=p>,</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>order</span><span class=p>)</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>producer</span><span class=o>.</span><span class=n>flush</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 컨슈머 설정 및 이벤트 처리</span>
</span></span><span class=line><span class=cl><span class=n>consumer_conf</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;bootstrap.servers&#39;</span><span class=p>:</span> <span class=s1>&#39;kafka:9092&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;group.id&#39;</span><span class=p>:</span> <span class=s1>&#39;inventory-service&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;auto.offset.reset&#39;</span><span class=p>:</span> <span class=s1>&#39;earliest&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>consumer</span> <span class=o>=</span> <span class=n>Consumer</span><span class=p>(</span><span class=n>consumer_conf</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>consumer</span><span class=o>.</span><span class=n>subscribe</span><span class=p>([</span><span class=s1>&#39;OrderCreated&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>process_inventory</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>msg</span> <span class=o>=</span> <span class=n>consumer</span><span class=o>.</span><span class=n>poll</span><span class=p>(</span><span class=mf>1.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>msg</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span> <span class=k>continue</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>msg</span><span class=o>.</span><span class=n>error</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Error: </span><span class=si>{</span><span class=n>msg</span><span class=o>.</span><span class=n>error</span><span class=p>()</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span>
</span></span><span class=line><span class=cl>        <span class=n>event</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>msg</span><span class=o>.</span><span class=n>value</span><span class=p>()</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;InventoryService 처리 중: 주문ID=</span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;order_id&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제 재고 검사/예외 시 DLQ logic</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl>    <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>process_inventory</span><span class=p>,</span> <span class=n>daemon</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1># 예시 주문 발행</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>publish_order</span><span class=p>({</span><span class=s1>&#39;order_id&#39;</span><span class=p>:</span> <span class=n>i</span><span class=p>,</span> <span class=s1>&#39;item&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s1>&#39;product_</span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>,</span> <span class=s1>&#39;qty&#39;</span><span class=p>:</span> <span class=n>i</span><span class=o>*</span><span class=mi>2</span><span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=사례-4-netflix-콘텐츠-추천-시스템>사례 4: Netflix 콘텐츠 추천 시스템<a hidden class=anchor aria-hidden=true href=#사례-4-netflix-콘텐츠-추천-시스템>#</a></h4><p>사용자의 시청 행동을 실시간으로 분석하여 개인화된 콘텐츠를 추천</p><p><strong>시스템 구성</strong>:</p><pre class=mermaid>graph TB
    subgraph &#34;Event Producers&#34;
        UP[User Playback]
        UR[User Rating]
        UV[User Views]
        US[User Search]
    end
    
    subgraph &#34;Event Infrastructure&#34;
        K[Apache Kafka]
        KS[Kafka Streams]
    end
    
    subgraph &#34;Event Consumers&#34;
        RS[Recommendation Service]
        AS[Analytics Service]
        PS[Personalization Service]
        CS[Content Service]
    end
    
    subgraph &#34;Data Storage&#34;
        ES[Event Store]
        RDB[Recommendation DB]
        UDB[User Profile DB]
    end
    
    UP --&gt; K
    UR --&gt; K
    UV --&gt; K
    US --&gt; K
    
    K --&gt; KS
    KS --&gt; RS
    KS --&gt; AS
    KS --&gt; PS
    KS --&gt; CS
    
    RS --&gt; RDB
    PS --&gt; UDB
    AS --&gt; ES
</pre><p><strong>Workflow</strong>:</p><ol><li><strong>이벤트 생성</strong>: 사용자의 시청, 평가, 검색 활동이 실시간 이벤트로 생성</li><li><strong>이벤트 스트리밍</strong>: Apache Kafka 를 통해 초당 수백만 개의 이벤트 처리</li><li><strong>실시간 분석</strong>: Kafka Streams 를 활용한 실시간 패턴 분석</li><li><strong>추천 업데이트</strong>: 머신러닝 모델을 통한 즉시 추천 알고리즘 업데이트</li><li><strong>개인화 제공</strong>: 사용자별 맞춤 콘텐츠 실시간 제공</li></ol><p><strong>Event-Driven Architecture 의 역할</strong>:</p><ul><li><strong>실시간 반응</strong>: 사용자 행동 즉시 반영</li><li><strong>확장성</strong>: 전 세계 2 억 이상 사용자 동시 처리</li><li><strong>장애 복원</strong>: 개별 서비스 장애 시에도 서비스 지속</li><li><strong>데이터 일관성</strong>: 이벤트 소싱을 통한 완전한 사용자 히스토리 관리</li></ul><p><strong>EDA 유무에 따른 차이점</strong>:</p><ul><li><strong>EDA 적용 전</strong>:<ul><li>배치 처리 기반 추천 (하루 1-2 회 업데이트)</li><li>높은 서비스 간 결합도</li><li>장애 시 전체 시스템 영향</li><li>확장 시 전체 시스템 재배포 필요</li></ul></li><li><strong>EDA 적용 후</strong>:<ul><li>실시간 추천 업데이트 (밀리초 단위)</li><li>느슨한 결합으로 독립적 서비스 운영</li><li>장애 격리 및 빠른 복구</li><li>개별 서비스 독립적 확장 및 배포</li></ul></li></ul><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1>  1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2>  2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3>  3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4>  4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5>  5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6>  6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7>  7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8>  8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9>  9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10> 10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11> 11</a>
</span><span class=lnt id=hl-18-12><a class=lnlinks href=#hl-18-12> 12</a>
</span><span class=lnt id=hl-18-13><a class=lnlinks href=#hl-18-13> 13</a>
</span><span class=lnt id=hl-18-14><a class=lnlinks href=#hl-18-14> 14</a>
</span><span class=lnt id=hl-18-15><a class=lnlinks href=#hl-18-15> 15</a>
</span><span class=lnt id=hl-18-16><a class=lnlinks href=#hl-18-16> 16</a>
</span><span class=lnt id=hl-18-17><a class=lnlinks href=#hl-18-17> 17</a>
</span><span class=lnt id=hl-18-18><a class=lnlinks href=#hl-18-18> 18</a>
</span><span class=lnt id=hl-18-19><a class=lnlinks href=#hl-18-19> 19</a>
</span><span class=lnt id=hl-18-20><a class=lnlinks href=#hl-18-20> 20</a>
</span><span class=lnt id=hl-18-21><a class=lnlinks href=#hl-18-21> 21</a>
</span><span class=lnt id=hl-18-22><a class=lnlinks href=#hl-18-22> 22</a>
</span><span class=lnt id=hl-18-23><a class=lnlinks href=#hl-18-23> 23</a>
</span><span class=lnt id=hl-18-24><a class=lnlinks href=#hl-18-24> 24</a>
</span><span class=lnt id=hl-18-25><a class=lnlinks href=#hl-18-25> 25</a>
</span><span class=lnt id=hl-18-26><a class=lnlinks href=#hl-18-26> 26</a>
</span><span class=lnt id=hl-18-27><a class=lnlinks href=#hl-18-27> 27</a>
</span><span class=lnt id=hl-18-28><a class=lnlinks href=#hl-18-28> 28</a>
</span><span class=lnt id=hl-18-29><a class=lnlinks href=#hl-18-29> 29</a>
</span><span class=lnt id=hl-18-30><a class=lnlinks href=#hl-18-30> 30</a>
</span><span class=lnt id=hl-18-31><a class=lnlinks href=#hl-18-31> 31</a>
</span><span class=lnt id=hl-18-32><a class=lnlinks href=#hl-18-32> 32</a>
</span><span class=lnt id=hl-18-33><a class=lnlinks href=#hl-18-33> 33</a>
</span><span class=lnt id=hl-18-34><a class=lnlinks href=#hl-18-34> 34</a>
</span><span class=lnt id=hl-18-35><a class=lnlinks href=#hl-18-35> 35</a>
</span><span class=lnt id=hl-18-36><a class=lnlinks href=#hl-18-36> 36</a>
</span><span class=lnt id=hl-18-37><a class=lnlinks href=#hl-18-37> 37</a>
</span><span class=lnt id=hl-18-38><a class=lnlinks href=#hl-18-38> 38</a>
</span><span class=lnt id=hl-18-39><a class=lnlinks href=#hl-18-39> 39</a>
</span><span class=lnt id=hl-18-40><a class=lnlinks href=#hl-18-40> 40</a>
</span><span class=lnt id=hl-18-41><a class=lnlinks href=#hl-18-41> 41</a>
</span><span class=lnt id=hl-18-42><a class=lnlinks href=#hl-18-42> 42</a>
</span><span class=lnt id=hl-18-43><a class=lnlinks href=#hl-18-43> 43</a>
</span><span class=lnt id=hl-18-44><a class=lnlinks href=#hl-18-44> 44</a>
</span><span class=lnt id=hl-18-45><a class=lnlinks href=#hl-18-45> 45</a>
</span><span class=lnt id=hl-18-46><a class=lnlinks href=#hl-18-46> 46</a>
</span><span class=lnt id=hl-18-47><a class=lnlinks href=#hl-18-47> 47</a>
</span><span class=lnt id=hl-18-48><a class=lnlinks href=#hl-18-48> 48</a>
</span><span class=lnt id=hl-18-49><a class=lnlinks href=#hl-18-49> 49</a>
</span><span class=lnt id=hl-18-50><a class=lnlinks href=#hl-18-50> 50</a>
</span><span class=lnt id=hl-18-51><a class=lnlinks href=#hl-18-51> 51</a>
</span><span class=lnt id=hl-18-52><a class=lnlinks href=#hl-18-52> 52</a>
</span><span class=lnt id=hl-18-53><a class=lnlinks href=#hl-18-53> 53</a>
</span><span class=lnt id=hl-18-54><a class=lnlinks href=#hl-18-54> 54</a>
</span><span class=lnt id=hl-18-55><a class=lnlinks href=#hl-18-55> 55</a>
</span><span class=lnt id=hl-18-56><a class=lnlinks href=#hl-18-56> 56</a>
</span><span class=lnt id=hl-18-57><a class=lnlinks href=#hl-18-57> 57</a>
</span><span class=lnt id=hl-18-58><a class=lnlinks href=#hl-18-58> 58</a>
</span><span class=lnt id=hl-18-59><a class=lnlinks href=#hl-18-59> 59</a>
</span><span class=lnt id=hl-18-60><a class=lnlinks href=#hl-18-60> 60</a>
</span><span class=lnt id=hl-18-61><a class=lnlinks href=#hl-18-61> 61</a>
</span><span class=lnt id=hl-18-62><a class=lnlinks href=#hl-18-62> 62</a>
</span><span class=lnt id=hl-18-63><a class=lnlinks href=#hl-18-63> 63</a>
</span><span class=lnt id=hl-18-64><a class=lnlinks href=#hl-18-64> 64</a>
</span><span class=lnt id=hl-18-65><a class=lnlinks href=#hl-18-65> 65</a>
</span><span class=lnt id=hl-18-66><a class=lnlinks href=#hl-18-66> 66</a>
</span><span class=lnt id=hl-18-67><a class=lnlinks href=#hl-18-67> 67</a>
</span><span class=lnt id=hl-18-68><a class=lnlinks href=#hl-18-68> 68</a>
</span><span class=lnt id=hl-18-69><a class=lnlinks href=#hl-18-69> 69</a>
</span><span class=lnt id=hl-18-70><a class=lnlinks href=#hl-18-70> 70</a>
</span><span class=lnt id=hl-18-71><a class=lnlinks href=#hl-18-71> 71</a>
</span><span class=lnt id=hl-18-72><a class=lnlinks href=#hl-18-72> 72</a>
</span><span class=lnt id=hl-18-73><a class=lnlinks href=#hl-18-73> 73</a>
</span><span class=lnt id=hl-18-74><a class=lnlinks href=#hl-18-74> 74</a>
</span><span class=lnt id=hl-18-75><a class=lnlinks href=#hl-18-75> 75</a>
</span><span class=lnt id=hl-18-76><a class=lnlinks href=#hl-18-76> 76</a>
</span><span class=lnt id=hl-18-77><a class=lnlinks href=#hl-18-77> 77</a>
</span><span class=lnt id=hl-18-78><a class=lnlinks href=#hl-18-78> 78</a>
</span><span class=lnt id=hl-18-79><a class=lnlinks href=#hl-18-79> 79</a>
</span><span class=lnt id=hl-18-80><a class=lnlinks href=#hl-18-80> 80</a>
</span><span class=lnt id=hl-18-81><a class=lnlinks href=#hl-18-81> 81</a>
</span><span class=lnt id=hl-18-82><a class=lnlinks href=#hl-18-82> 82</a>
</span><span class=lnt id=hl-18-83><a class=lnlinks href=#hl-18-83> 83</a>
</span><span class=lnt id=hl-18-84><a class=lnlinks href=#hl-18-84> 84</a>
</span><span class=lnt id=hl-18-85><a class=lnlinks href=#hl-18-85> 85</a>
</span><span class=lnt id=hl-18-86><a class=lnlinks href=#hl-18-86> 86</a>
</span><span class=lnt id=hl-18-87><a class=lnlinks href=#hl-18-87> 87</a>
</span><span class=lnt id=hl-18-88><a class=lnlinks href=#hl-18-88> 88</a>
</span><span class=lnt id=hl-18-89><a class=lnlinks href=#hl-18-89> 89</a>
</span><span class=lnt id=hl-18-90><a class=lnlinks href=#hl-18-90> 90</a>
</span><span class=lnt id=hl-18-91><a class=lnlinks href=#hl-18-91> 91</a>
</span><span class=lnt id=hl-18-92><a class=lnlinks href=#hl-18-92> 92</a>
</span><span class=lnt id=hl-18-93><a class=lnlinks href=#hl-18-93> 93</a>
</span><span class=lnt id=hl-18-94><a class=lnlinks href=#hl-18-94> 94</a>
</span><span class=lnt id=hl-18-95><a class=lnlinks href=#hl-18-95> 95</a>
</span><span class=lnt id=hl-18-96><a class=lnlinks href=#hl-18-96> 96</a>
</span><span class=lnt id=hl-18-97><a class=lnlinks href=#hl-18-97> 97</a>
</span><span class=lnt id=hl-18-98><a class=lnlinks href=#hl-18-98> 98</a>
</span><span class=lnt id=hl-18-99><a class=lnlinks href=#hl-18-99> 99</a>
</span><span class=lnt id=hl-18-100><a class=lnlinks href=#hl-18-100>100</a>
</span><span class=lnt id=hl-18-101><a class=lnlinks href=#hl-18-101>101</a>
</span><span class=lnt id=hl-18-102><a class=lnlinks href=#hl-18-102>102</a>
</span><span class=lnt id=hl-18-103><a class=lnlinks href=#hl-18-103>103</a>
</span><span class=lnt id=hl-18-104><a class=lnlinks href=#hl-18-104>104</a>
</span><span class=lnt id=hl-18-105><a class=lnlinks href=#hl-18-105>105</a>
</span><span class=lnt id=hl-18-106><a class=lnlinks href=#hl-18-106>106</a>
</span><span class=lnt id=hl-18-107><a class=lnlinks href=#hl-18-107>107</a>
</span><span class=lnt id=hl-18-108><a class=lnlinks href=#hl-18-108>108</a>
</span><span class=lnt id=hl-18-109><a class=lnlinks href=#hl-18-109>109</a>
</span><span class=lnt id=hl-18-110><a class=lnlinks href=#hl-18-110>110</a>
</span><span class=lnt id=hl-18-111><a class=lnlinks href=#hl-18-111>111</a>
</span><span class=lnt id=hl-18-112><a class=lnlinks href=#hl-18-112>112</a>
</span><span class=lnt id=hl-18-113><a class=lnlinks href=#hl-18-113>113</a>
</span><span class=lnt id=hl-18-114><a class=lnlinks href=#hl-18-114>114</a>
</span><span class=lnt id=hl-18-115><a class=lnlinks href=#hl-18-115>115</a>
</span><span class=lnt id=hl-18-116><a class=lnlinks href=#hl-18-116>116</a>
</span><span class=lnt id=hl-18-117><a class=lnlinks href=#hl-18-117>117</a>
</span><span class=lnt id=hl-18-118><a class=lnlinks href=#hl-18-118>118</a>
</span><span class=lnt id=hl-18-119><a class=lnlinks href=#hl-18-119>119</a>
</span><span class=lnt id=hl-18-120><a class=lnlinks href=#hl-18-120>120</a>
</span><span class=lnt id=hl-18-121><a class=lnlinks href=#hl-18-121>121</a>
</span><span class=lnt id=hl-18-122><a class=lnlinks href=#hl-18-122>122</a>
</span><span class=lnt id=hl-18-123><a class=lnlinks href=#hl-18-123>123</a>
</span><span class=lnt id=hl-18-124><a class=lnlinks href=#hl-18-124>124</a>
</span><span class=lnt id=hl-18-125><a class=lnlinks href=#hl-18-125>125</a>
</span><span class=lnt id=hl-18-126><a class=lnlinks href=#hl-18-126>126</a>
</span><span class=lnt id=hl-18-127><a class=lnlinks href=#hl-18-127>127</a>
</span><span class=lnt id=hl-18-128><a class=lnlinks href=#hl-18-128>128</a>
</span><span class=lnt id=hl-18-129><a class=lnlinks href=#hl-18-129>129</a>
</span><span class=lnt id=hl-18-130><a class=lnlinks href=#hl-18-130>130</a>
</span><span class=lnt id=hl-18-131><a class=lnlinks href=#hl-18-131>131</a>
</span><span class=lnt id=hl-18-132><a class=lnlinks href=#hl-18-132>132</a>
</span><span class=lnt id=hl-18-133><a class=lnlinks href=#hl-18-133>133</a>
</span><span class=lnt id=hl-18-134><a class=lnlinks href=#hl-18-134>134</a>
</span><span class=lnt id=hl-18-135><a class=lnlinks href=#hl-18-135>135</a>
</span><span class=lnt id=hl-18-136><a class=lnlinks href=#hl-18-136>136</a>
</span><span class=lnt id=hl-18-137><a class=lnlinks href=#hl-18-137>137</a>
</span><span class=lnt id=hl-18-138><a class=lnlinks href=#hl-18-138>138</a>
</span><span class=lnt id=hl-18-139><a class=lnlinks href=#hl-18-139>139</a>
</span><span class=lnt id=hl-18-140><a class=lnlinks href=#hl-18-140>140</a>
</span><span class=lnt id=hl-18-141><a class=lnlinks href=#hl-18-141>141</a>
</span><span class=lnt id=hl-18-142><a class=lnlinks href=#hl-18-142>142</a>
</span><span class=lnt id=hl-18-143><a class=lnlinks href=#hl-18-143>143</a>
</span><span class=lnt id=hl-18-144><a class=lnlinks href=#hl-18-144>144</a>
</span><span class=lnt id=hl-18-145><a class=lnlinks href=#hl-18-145>145</a>
</span><span class=lnt id=hl-18-146><a class=lnlinks href=#hl-18-146>146</a>
</span><span class=lnt id=hl-18-147><a class=lnlinks href=#hl-18-147>147</a>
</span><span class=lnt id=hl-18-148><a class=lnlinks href=#hl-18-148>148</a>
</span><span class=lnt id=hl-18-149><a class=lnlinks href=#hl-18-149>149</a>
</span><span class=lnt id=hl-18-150><a class=lnlinks href=#hl-18-150>150</a>
</span><span class=lnt id=hl-18-151><a class=lnlinks href=#hl-18-151>151</a>
</span><span class=lnt id=hl-18-152><a class=lnlinks href=#hl-18-152>152</a>
</span><span class=lnt id=hl-18-153><a class=lnlinks href=#hl-18-153>153</a>
</span><span class=lnt id=hl-18-154><a class=lnlinks href=#hl-18-154>154</a>
</span><span class=lnt id=hl-18-155><a class=lnlinks href=#hl-18-155>155</a>
</span><span class=lnt id=hl-18-156><a class=lnlinks href=#hl-18-156>156</a>
</span><span class=lnt id=hl-18-157><a class=lnlinks href=#hl-18-157>157</a>
</span><span class=lnt id=hl-18-158><a class=lnlinks href=#hl-18-158>158</a>
</span><span class=lnt id=hl-18-159><a class=lnlinks href=#hl-18-159>159</a>
</span><span class=lnt id=hl-18-160><a class=lnlinks href=#hl-18-160>160</a>
</span><span class=lnt id=hl-18-161><a class=lnlinks href=#hl-18-161>161</a>
</span><span class=lnt id=hl-18-162><a class=lnlinks href=#hl-18-162>162</a>
</span><span class=lnt id=hl-18-163><a class=lnlinks href=#hl-18-163>163</a>
</span><span class=lnt id=hl-18-164><a class=lnlinks href=#hl-18-164>164</a>
</span><span class=lnt id=hl-18-165><a class=lnlinks href=#hl-18-165>165</a>
</span><span class=lnt id=hl-18-166><a class=lnlinks href=#hl-18-166>166</a>
</span><span class=lnt id=hl-18-167><a class=lnlinks href=#hl-18-167>167</a>
</span><span class=lnt id=hl-18-168><a class=lnlinks href=#hl-18-168>168</a>
</span><span class=lnt id=hl-18-169><a class=lnlinks href=#hl-18-169>169</a>
</span><span class=lnt id=hl-18-170><a class=lnlinks href=#hl-18-170>170</a>
</span><span class=lnt id=hl-18-171><a class=lnlinks href=#hl-18-171>171</a>
</span><span class=lnt id=hl-18-172><a class=lnlinks href=#hl-18-172>172</a>
</span><span class=lnt id=hl-18-173><a class=lnlinks href=#hl-18-173>173</a>
</span><span class=lnt id=hl-18-174><a class=lnlinks href=#hl-18-174>174</a>
</span><span class=lnt id=hl-18-175><a class=lnlinks href=#hl-18-175>175</a>
</span><span class=lnt id=hl-18-176><a class=lnlinks href=#hl-18-176>176</a>
</span><span class=lnt id=hl-18-177><a class=lnlinks href=#hl-18-177>177</a>
</span><span class=lnt id=hl-18-178><a class=lnlinks href=#hl-18-178>178</a>
</span><span class=lnt id=hl-18-179><a class=lnlinks href=#hl-18-179>179</a>
</span><span class=lnt id=hl-18-180><a class=lnlinks href=#hl-18-180>180</a>
</span><span class=lnt id=hl-18-181><a class=lnlinks href=#hl-18-181>181</a>
</span><span class=lnt id=hl-18-182><a class=lnlinks href=#hl-18-182>182</a>
</span><span class=lnt id=hl-18-183><a class=lnlinks href=#hl-18-183>183</a>
</span><span class=lnt id=hl-18-184><a class=lnlinks href=#hl-18-184>184</a>
</span><span class=lnt id=hl-18-185><a class=lnlinks href=#hl-18-185>185</a>
</span><span class=lnt id=hl-18-186><a class=lnlinks href=#hl-18-186>186</a>
</span><span class=lnt id=hl-18-187><a class=lnlinks href=#hl-18-187>187</a>
</span><span class=lnt id=hl-18-188><a class=lnlinks href=#hl-18-188>188</a>
</span><span class=lnt id=hl-18-189><a class=lnlinks href=#hl-18-189>189</a>
</span><span class=lnt id=hl-18-190><a class=lnlinks href=#hl-18-190>190</a>
</span><span class=lnt id=hl-18-191><a class=lnlinks href=#hl-18-191>191</a>
</span><span class=lnt id=hl-18-192><a class=lnlinks href=#hl-18-192>192</a>
</span><span class=lnt id=hl-18-193><a class=lnlinks href=#hl-18-193>193</a>
</span><span class=lnt id=hl-18-194><a class=lnlinks href=#hl-18-194>194</a>
</span><span class=lnt id=hl-18-195><a class=lnlinks href=#hl-18-195>195</a>
</span><span class=lnt id=hl-18-196><a class=lnlinks href=#hl-18-196>196</a>
</span><span class=lnt id=hl-18-197><a class=lnlinks href=#hl-18-197>197</a>
</span><span class=lnt id=hl-18-198><a class=lnlinks href=#hl-18-198>198</a>
</span><span class=lnt id=hl-18-199><a class=lnlinks href=#hl-18-199>199</a>
</span><span class=lnt id=hl-18-200><a class=lnlinks href=#hl-18-200>200</a>
</span><span class=lnt id=hl-18-201><a class=lnlinks href=#hl-18-201>201</a>
</span><span class=lnt id=hl-18-202><a class=lnlinks href=#hl-18-202>202</a>
</span><span class=lnt id=hl-18-203><a class=lnlinks href=#hl-18-203>203</a>
</span><span class=lnt id=hl-18-204><a class=lnlinks href=#hl-18-204>204</a>
</span><span class=lnt id=hl-18-205><a class=lnlinks href=#hl-18-205>205</a>
</span><span class=lnt id=hl-18-206><a class=lnlinks href=#hl-18-206>206</a>
</span><span class=lnt id=hl-18-207><a class=lnlinks href=#hl-18-207>207</a>
</span><span class=lnt id=hl-18-208><a class=lnlinks href=#hl-18-208>208</a>
</span><span class=lnt id=hl-18-209><a class=lnlinks href=#hl-18-209>209</a>
</span><span class=lnt id=hl-18-210><a class=lnlinks href=#hl-18-210>210</a>
</span><span class=lnt id=hl-18-211><a class=lnlinks href=#hl-18-211>211</a>
</span><span class=lnt id=hl-18-212><a class=lnlinks href=#hl-18-212>212</a>
</span><span class=lnt id=hl-18-213><a class=lnlinks href=#hl-18-213>213</a>
</span><span class=lnt id=hl-18-214><a class=lnlinks href=#hl-18-214>214</a>
</span><span class=lnt id=hl-18-215><a class=lnlinks href=#hl-18-215>215</a>
</span><span class=lnt id=hl-18-216><a class=lnlinks href=#hl-18-216>216</a>
</span><span class=lnt id=hl-18-217><a class=lnlinks href=#hl-18-217>217</a>
</span><span class=lnt id=hl-18-218><a class=lnlinks href=#hl-18-218>218</a>
</span><span class=lnt id=hl-18-219><a class=lnlinks href=#hl-18-219>219</a>
</span><span class=lnt id=hl-18-220><a class=lnlinks href=#hl-18-220>220</a>
</span><span class=lnt id=hl-18-221><a class=lnlinks href=#hl-18-221>221</a>
</span><span class=lnt id=hl-18-222><a class=lnlinks href=#hl-18-222>222</a>
</span><span class=lnt id=hl-18-223><a class=lnlinks href=#hl-18-223>223</a>
</span><span class=lnt id=hl-18-224><a class=lnlinks href=#hl-18-224>224</a>
</span><span class=lnt id=hl-18-225><a class=lnlinks href=#hl-18-225>225</a>
</span><span class=lnt id=hl-18-226><a class=lnlinks href=#hl-18-226>226</a>
</span><span class=lnt id=hl-18-227><a class=lnlinks href=#hl-18-227>227</a>
</span><span class=lnt id=hl-18-228><a class=lnlinks href=#hl-18-228>228</a>
</span><span class=lnt id=hl-18-229><a class=lnlinks href=#hl-18-229>229</a>
</span><span class=lnt id=hl-18-230><a class=lnlinks href=#hl-18-230>230</a>
</span><span class=lnt id=hl-18-231><a class=lnlinks href=#hl-18-231>231</a>
</span><span class=lnt id=hl-18-232><a class=lnlinks href=#hl-18-232>232</a>
</span><span class=lnt id=hl-18-233><a class=lnlinks href=#hl-18-233>233</a>
</span><span class=lnt id=hl-18-234><a class=lnlinks href=#hl-18-234>234</a>
</span><span class=lnt id=hl-18-235><a class=lnlinks href=#hl-18-235>235</a>
</span><span class=lnt id=hl-18-236><a class=lnlinks href=#hl-18-236>236</a>
</span><span class=lnt id=hl-18-237><a class=lnlinks href=#hl-18-237>237</a>
</span><span class=lnt id=hl-18-238><a class=lnlinks href=#hl-18-238>238</a>
</span><span class=lnt id=hl-18-239><a class=lnlinks href=#hl-18-239>239</a>
</span><span class=lnt id=hl-18-240><a class=lnlinks href=#hl-18-240>240</a>
</span><span class=lnt id=hl-18-241><a class=lnlinks href=#hl-18-241>241</a>
</span><span class=lnt id=hl-18-242><a class=lnlinks href=#hl-18-242>242</a>
</span><span class=lnt id=hl-18-243><a class=lnlinks href=#hl-18-243>243</a>
</span><span class=lnt id=hl-18-244><a class=lnlinks href=#hl-18-244>244</a>
</span><span class=lnt id=hl-18-245><a class=lnlinks href=#hl-18-245>245</a>
</span><span class=lnt id=hl-18-246><a class=lnlinks href=#hl-18-246>246</a>
</span><span class=lnt id=hl-18-247><a class=lnlinks href=#hl-18-247>247</a>
</span><span class=lnt id=hl-18-248><a class=lnlinks href=#hl-18-248>248</a>
</span><span class=lnt id=hl-18-249><a class=lnlinks href=#hl-18-249>249</a>
</span><span class=lnt id=hl-18-250><a class=lnlinks href=#hl-18-250>250</a>
</span><span class=lnt id=hl-18-251><a class=lnlinks href=#hl-18-251>251</a>
</span><span class=lnt id=hl-18-252><a class=lnlinks href=#hl-18-252>252</a>
</span><span class=lnt id=hl-18-253><a class=lnlinks href=#hl-18-253>253</a>
</span><span class=lnt id=hl-18-254><a class=lnlinks href=#hl-18-254>254</a>
</span><span class=lnt id=hl-18-255><a class=lnlinks href=#hl-18-255>255</a>
</span><span class=lnt id=hl-18-256><a class=lnlinks href=#hl-18-256>256</a>
</span><span class=lnt id=hl-18-257><a class=lnlinks href=#hl-18-257>257</a>
</span><span class=lnt id=hl-18-258><a class=lnlinks href=#hl-18-258>258</a>
</span><span class=lnt id=hl-18-259><a class=lnlinks href=#hl-18-259>259</a>
</span><span class=lnt id=hl-18-260><a class=lnlinks href=#hl-18-260>260</a>
</span><span class=lnt id=hl-18-261><a class=lnlinks href=#hl-18-261>261</a>
</span><span class=lnt id=hl-18-262><a class=lnlinks href=#hl-18-262>262</a>
</span><span class=lnt id=hl-18-263><a class=lnlinks href=#hl-18-263>263</a>
</span><span class=lnt id=hl-18-264><a class=lnlinks href=#hl-18-264>264</a>
</span><span class=lnt id=hl-18-265><a class=lnlinks href=#hl-18-265>265</a>
</span><span class=lnt id=hl-18-266><a class=lnlinks href=#hl-18-266>266</a>
</span><span class=lnt id=hl-18-267><a class=lnlinks href=#hl-18-267>267</a>
</span><span class=lnt id=hl-18-268><a class=lnlinks href=#hl-18-268>268</a>
</span><span class=lnt id=hl-18-269><a class=lnlinks href=#hl-18-269>269</a>
</span><span class=lnt id=hl-18-270><a class=lnlinks href=#hl-18-270>270</a>
</span><span class=lnt id=hl-18-271><a class=lnlinks href=#hl-18-271>271</a>
</span><span class=lnt id=hl-18-272><a class=lnlinks href=#hl-18-272>272</a>
</span><span class=lnt id=hl-18-273><a class=lnlinks href=#hl-18-273>273</a>
</span><span class=lnt id=hl-18-274><a class=lnlinks href=#hl-18-274>274</a>
</span><span class=lnt id=hl-18-275><a class=lnlinks href=#hl-18-275>275</a>
</span><span class=lnt id=hl-18-276><a class=lnlinks href=#hl-18-276>276</a>
</span><span class=lnt id=hl-18-277><a class=lnlinks href=#hl-18-277>277</a>
</span><span class=lnt id=hl-18-278><a class=lnlinks href=#hl-18-278>278</a>
</span><span class=lnt id=hl-18-279><a class=lnlinks href=#hl-18-279>279</a>
</span><span class=lnt id=hl-18-280><a class=lnlinks href=#hl-18-280>280</a>
</span><span class=lnt id=hl-18-281><a class=lnlinks href=#hl-18-281>281</a>
</span><span class=lnt id=hl-18-282><a class=lnlinks href=#hl-18-282>282</a>
</span><span class=lnt id=hl-18-283><a class=lnlinks href=#hl-18-283>283</a>
</span><span class=lnt id=hl-18-284><a class=lnlinks href=#hl-18-284>284</a>
</span><span class=lnt id=hl-18-285><a class=lnlinks href=#hl-18-285>285</a>
</span><span class=lnt id=hl-18-286><a class=lnlinks href=#hl-18-286>286</a>
</span><span class=lnt id=hl-18-287><a class=lnlinks href=#hl-18-287>287</a>
</span><span class=lnt id=hl-18-288><a class=lnlinks href=#hl-18-288>288</a>
</span><span class=lnt id=hl-18-289><a class=lnlinks href=#hl-18-289>289</a>
</span><span class=lnt id=hl-18-290><a class=lnlinks href=#hl-18-290>290</a>
</span><span class=lnt id=hl-18-291><a class=lnlinks href=#hl-18-291>291</a>
</span><span class=lnt id=hl-18-292><a class=lnlinks href=#hl-18-292>292</a>
</span><span class=lnt id=hl-18-293><a class=lnlinks href=#hl-18-293>293</a>
</span><span class=lnt id=hl-18-294><a class=lnlinks href=#hl-18-294>294</a>
</span><span class=lnt id=hl-18-295><a class=lnlinks href=#hl-18-295>295</a>
</span><span class=lnt id=hl-18-296><a class=lnlinks href=#hl-18-296>296</a>
</span><span class=lnt id=hl-18-297><a class=lnlinks href=#hl-18-297>297</a>
</span><span class=lnt id=hl-18-298><a class=lnlinks href=#hl-18-298>298</a>
</span><span class=lnt id=hl-18-299><a class=lnlinks href=#hl-18-299>299</a>
</span><span class=lnt id=hl-18-300><a class=lnlinks href=#hl-18-300>300</a>
</span><span class=lnt id=hl-18-301><a class=lnlinks href=#hl-18-301>301</a>
</span><span class=lnt id=hl-18-302><a class=lnlinks href=#hl-18-302>302</a>
</span><span class=lnt id=hl-18-303><a class=lnlinks href=#hl-18-303>303</a>
</span><span class=lnt id=hl-18-304><a class=lnlinks href=#hl-18-304>304</a>
</span><span class=lnt id=hl-18-305><a class=lnlinks href=#hl-18-305>305</a>
</span><span class=lnt id=hl-18-306><a class=lnlinks href=#hl-18-306>306</a>
</span><span class=lnt id=hl-18-307><a class=lnlinks href=#hl-18-307>307</a>
</span><span class=lnt id=hl-18-308><a class=lnlinks href=#hl-18-308>308</a>
</span><span class=lnt id=hl-18-309><a class=lnlinks href=#hl-18-309>309</a>
</span><span class=lnt id=hl-18-310><a class=lnlinks href=#hl-18-310>310</a>
</span><span class=lnt id=hl-18-311><a class=lnlinks href=#hl-18-311>311</a>
</span><span class=lnt id=hl-18-312><a class=lnlinks href=#hl-18-312>312</a>
</span><span class=lnt id=hl-18-313><a class=lnlinks href=#hl-18-313>313</a>
</span><span class=lnt id=hl-18-314><a class=lnlinks href=#hl-18-314>314</a>
</span><span class=lnt id=hl-18-315><a class=lnlinks href=#hl-18-315>315</a>
</span><span class=lnt id=hl-18-316><a class=lnlinks href=#hl-18-316>316</a>
</span><span class=lnt id=hl-18-317><a class=lnlinks href=#hl-18-317>317</a>
</span><span class=lnt id=hl-18-318><a class=lnlinks href=#hl-18-318>318</a>
</span><span class=lnt id=hl-18-319><a class=lnlinks href=#hl-18-319>319</a>
</span><span class=lnt id=hl-18-320><a class=lnlinks href=#hl-18-320>320</a>
</span><span class=lnt id=hl-18-321><a class=lnlinks href=#hl-18-321>321</a>
</span><span class=lnt id=hl-18-322><a class=lnlinks href=#hl-18-322>322</a>
</span><span class=lnt id=hl-18-323><a class=lnlinks href=#hl-18-323>323</a>
</span><span class=lnt id=hl-18-324><a class=lnlinks href=#hl-18-324>324</a>
</span><span class=lnt id=hl-18-325><a class=lnlinks href=#hl-18-325>325</a>
</span><span class=lnt id=hl-18-326><a class=lnlinks href=#hl-18-326>326</a>
</span><span class=lnt id=hl-18-327><a class=lnlinks href=#hl-18-327>327</a>
</span><span class=lnt id=hl-18-328><a class=lnlinks href=#hl-18-328>328</a>
</span><span class=lnt id=hl-18-329><a class=lnlinks href=#hl-18-329>329</a>
</span><span class=lnt id=hl-18-330><a class=lnlinks href=#hl-18-330>330</a>
</span><span class=lnt id=hl-18-331><a class=lnlinks href=#hl-18-331>331</a>
</span><span class=lnt id=hl-18-332><a class=lnlinks href=#hl-18-332>332</a>
</span><span class=lnt id=hl-18-333><a class=lnlinks href=#hl-18-333>333</a>
</span><span class=lnt id=hl-18-334><a class=lnlinks href=#hl-18-334>334</a>
</span><span class=lnt id=hl-18-335><a class=lnlinks href=#hl-18-335>335</a>
</span><span class=lnt id=hl-18-336><a class=lnlinks href=#hl-18-336>336</a>
</span><span class=lnt id=hl-18-337><a class=lnlinks href=#hl-18-337>337</a>
</span><span class=lnt id=hl-18-338><a class=lnlinks href=#hl-18-338>338</a>
</span><span class=lnt id=hl-18-339><a class=lnlinks href=#hl-18-339>339</a>
</span><span class=lnt id=hl-18-340><a class=lnlinks href=#hl-18-340>340</a>
</span><span class=lnt id=hl-18-341><a class=lnlinks href=#hl-18-341>341</a>
</span><span class=lnt id=hl-18-342><a class=lnlinks href=#hl-18-342>342</a>
</span><span class=lnt id=hl-18-343><a class=lnlinks href=#hl-18-343>343</a>
</span><span class=lnt id=hl-18-344><a class=lnlinks href=#hl-18-344>344</a>
</span><span class=lnt id=hl-18-345><a class=lnlinks href=#hl-18-345>345</a>
</span><span class=lnt id=hl-18-346><a class=lnlinks href=#hl-18-346>346</a>
</span><span class=lnt id=hl-18-347><a class=lnlinks href=#hl-18-347>347</a>
</span><span class=lnt id=hl-18-348><a class=lnlinks href=#hl-18-348>348</a>
</span><span class=lnt id=hl-18-349><a class=lnlinks href=#hl-18-349>349</a>
</span><span class=lnt id=hl-18-350><a class=lnlinks href=#hl-18-350>350</a>
</span><span class=lnt id=hl-18-351><a class=lnlinks href=#hl-18-351>351</a>
</span><span class=lnt id=hl-18-352><a class=lnlinks href=#hl-18-352>352</a>
</span><span class=lnt id=hl-18-353><a class=lnlinks href=#hl-18-353>353</a>
</span><span class=lnt id=hl-18-354><a class=lnlinks href=#hl-18-354>354</a>
</span><span class=lnt id=hl-18-355><a class=lnlinks href=#hl-18-355>355</a>
</span><span class=lnt id=hl-18-356><a class=lnlinks href=#hl-18-356>356</a>
</span><span class=lnt id=hl-18-357><a class=lnlinks href=#hl-18-357>357</a>
</span><span class=lnt id=hl-18-358><a class=lnlinks href=#hl-18-358>358</a>
</span><span class=lnt id=hl-18-359><a class=lnlinks href=#hl-18-359>359</a>
</span><span class=lnt id=hl-18-360><a class=lnlinks href=#hl-18-360>360</a>
</span><span class=lnt id=hl-18-361><a class=lnlinks href=#hl-18-361>361</a>
</span><span class=lnt id=hl-18-362><a class=lnlinks href=#hl-18-362>362</a>
</span><span class=lnt id=hl-18-363><a class=lnlinks href=#hl-18-363>363</a>
</span><span class=lnt id=hl-18-364><a class=lnlinks href=#hl-18-364>364</a>
</span><span class=lnt id=hl-18-365><a class=lnlinks href=#hl-18-365>365</a>
</span><span class=lnt id=hl-18-366><a class=lnlinks href=#hl-18-366>366</a>
</span><span class=lnt id=hl-18-367><a class=lnlinks href=#hl-18-367>367</a>
</span><span class=lnt id=hl-18-368><a class=lnlinks href=#hl-18-368>368</a>
</span><span class=lnt id=hl-18-369><a class=lnlinks href=#hl-18-369>369</a>
</span><span class=lnt id=hl-18-370><a class=lnlinks href=#hl-18-370>370</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>Event-Driven Architecture 구현 예시
</span></span></span><span class=line><span class=cl><span class=s2>Netflix 스타일 콘텐츠 추천 시스템
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>List</span><span class=p>,</span> <span class=n>Optional</span><span class=p>,</span> <span class=n>Callable</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span><span class=p>,</span> <span class=n>asdict</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>uuid</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1># 1. 이벤트 정의 (Event Definitions)</span>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Event</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;기본 이벤트 클래스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>event_id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>event_type</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>timestamp</span><span class=p>:</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl>    <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span><span class=p>:</span> <span class=n>Dict</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>to_json</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;이벤트를 JSON으로 직렬화&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>event_dict</span> <span class=o>=</span> <span class=n>asdict</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>event_dict</span><span class=p>[</span><span class=s1>&#39;timestamp&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>timestamp</span><span class=o>.</span><span class=n>isoformat</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>event_dict</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@classmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>from_json</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>json_str</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s1>&#39;Event&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;JSON에서 이벤트 역직렬화&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>data</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>json_str</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>data</span><span class=p>[</span><span class=s1>&#39;timestamp&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>fromisoformat</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;timestamp&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span><span class=o>**</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserViewEvent</span><span class=p>(</span><span class=n>Event</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;사용자 시청 이벤트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>content_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>duration</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>rating</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>event_id</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>            <span class=n>event_type</span><span class=o>=</span><span class=s2>&#34;user_view&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>timestamp</span><span class=o>=</span><span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=n>user_id</span><span class=o>=</span><span class=n>user_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>data</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;content_id&#34;</span><span class=p>:</span> <span class=n>content_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;duration&#34;</span><span class=p>:</span> <span class=n>duration</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;rating&#34;</span><span class=p>:</span> <span class=n>rating</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ContentRecommendationEvent</span><span class=p>(</span><span class=n>Event</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;콘텐츠 추천 이벤트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>recommendations</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]):</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>event_id</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>            <span class=n>event_type</span><span class=o>=</span><span class=s2>&#34;content_recommendation&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>timestamp</span><span class=o>=</span><span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=n>user_id</span><span class=o>=</span><span class=n>user_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>data</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;recommendations&#34;</span><span class=p>:</span> <span class=n>recommendations</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1># 2. 이벤트 브로커 (Event Broker)</span>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>EventBroker</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;이벤트 브로커 - 이벤트 라우팅 및 전달 담당&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>subscribers</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>List</span><span class=p>[</span><span class=n>Callable</span><span class=p>]]</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>event_store</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Event</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>publish</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>:</span> <span class=n>Event</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;이벤트 발행&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 이벤트 저장 (Event Sourcing)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>event_store</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 구독자들에게 이벤트 전달</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>event</span><span class=o>.</span><span class=n>event_type</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>subscribers</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>tasks</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>handler</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>subscribers</span><span class=p>[</span><span class=n>event</span><span class=o>.</span><span class=n>event_type</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=n>tasks</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_safe_handle</span><span class=p>(</span><span class=n>handler</span><span class=p>,</span> <span class=n>event</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>tasks</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>gather</span><span class=p>(</span><span class=o>*</span><span class=n>tasks</span><span class=p>,</span> <span class=n>return_exceptions</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>subscribe</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event_type</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>handler</span><span class=p>:</span> <span class=n>Callable</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;이벤트 구독&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>event_type</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>subscribers</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>subscribers</span><span class=p>[</span><span class=n>event_type</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>subscribers</span><span class=p>[</span><span class=n>event_type</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>handler</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>_safe_handle</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>handler</span><span class=p>:</span> <span class=n>Callable</span><span class=p>,</span> <span class=n>event</span><span class=p>:</span> <span class=n>Event</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;안전한 이벤트 핸들러 실행&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>iscoroutinefunction</span><span class=p>(</span><span class=n>handler</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=k>await</span> <span class=n>handler</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>handler</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;이벤트 처리 오류: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_events_by_user</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Event</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;사용자별 이벤트 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>[</span><span class=n>event</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>event_store</span> <span class=k>if</span> <span class=n>event</span><span class=o>.</span><span class=n>user_id</span> <span class=o>==</span> <span class=n>user_id</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_events_by_type</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event_type</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Event</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;타입별 이벤트 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>[</span><span class=n>event</span> <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>event_store</span> <span class=k>if</span> <span class=n>event</span><span class=o>.</span><span class=n>event_type</span> <span class=o>==</span> <span class=n>event_type</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1># 3. 이벤트 컨슈머 (Event Consumers)</span>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>EventConsumer</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;이벤트 컨슈머 기본 클래스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>broker</span><span class=p>:</span> <span class=n>EventBroker</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>broker</span> <span class=o>=</span> <span class=n>broker</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>register_handlers</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>register_handlers</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;이벤트 핸들러 등록&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>RecommendationService</span><span class=p>(</span><span class=n>EventConsumer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;추천 서비스 - 사용자 시청 이벤트를 기반으로 추천 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>broker</span><span class=p>:</span> <span class=n>EventBroker</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>user_preferences</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Dict</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>content_database</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;movie_1&#34;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&#34;genre&#34;</span><span class=p>:</span> <span class=s2>&#34;action&#34;</span><span class=p>,</span> <span class=s2>&#34;rating&#34;</span><span class=p>:</span> <span class=mf>4.5</span><span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;movie_2&#34;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&#34;genre&#34;</span><span class=p>:</span> <span class=s2>&#34;comedy&#34;</span><span class=p>,</span> <span class=s2>&#34;rating&#34;</span><span class=p>:</span> <span class=mf>4.2</span><span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;movie_3&#34;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&#34;genre&#34;</span><span class=p>:</span> <span class=s2>&#34;action&#34;</span><span class=p>,</span> <span class=s2>&#34;rating&#34;</span><span class=p>:</span> <span class=mf>4.7</span><span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;movie_4&#34;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&#34;genre&#34;</span><span class=p>:</span> <span class=s2>&#34;drama&#34;</span><span class=p>,</span> <span class=s2>&#34;rating&#34;</span><span class=p>:</span> <span class=mf>4.3</span><span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;movie_5&#34;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&#34;genre&#34;</span><span class=p>:</span> <span class=s2>&#34;comedy&#34;</span><span class=p>,</span> <span class=s2>&#34;rating&#34;</span><span class=p>:</span> <span class=mf>4.1</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>broker</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>register_handlers</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;이벤트 핸들러 등록&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>broker</span><span class=o>.</span><span class=n>subscribe</span><span class=p>(</span><span class=s2>&#34;user_view&#34;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>handle_user_view</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>handle_user_view</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>:</span> <span class=n>Event</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;사용자 시청 이벤트 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>user_id</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>user_id</span>
</span></span><span class=line><span class=cl>        <span class=n>content_id</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&#34;content_id&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>duration</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&#34;duration&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>rating</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;rating&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 사용자 선호도 업데이트</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_update_user_preferences</span><span class=p>(</span><span class=n>user_id</span><span class=p>,</span> <span class=n>content_id</span><span class=p>,</span> <span class=n>duration</span><span class=p>,</span> <span class=n>rating</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 새로운 추천 생성</span>
</span></span><span class=line><span class=cl>        <span class=n>recommendations</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_generate_recommendations</span><span class=p>(</span><span class=n>user_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 추천 이벤트 발행</span>
</span></span><span class=line><span class=cl>        <span class=n>recommendation_event</span> <span class=o>=</span> <span class=n>ContentRecommendationEvent</span><span class=p>(</span><span class=n>user_id</span><span class=p>,</span> <span class=n>recommendations</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>broker</span><span class=o>.</span><span class=n>publish</span><span class=p>(</span><span class=n>recommendation_event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[추천 서비스] 사용자 </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>에게 새로운 추천 생성: </span><span class=si>{</span><span class=n>recommendations</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_update_user_preferences</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>content_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>duration</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>rating</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>float</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;사용자 선호도 업데이트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>user_id</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>user_preferences</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>user_preferences</span><span class=p>[</span><span class=n>user_id</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;viewed_content&#34;</span><span class=p>:</span> <span class=p>[],</span> <span class=s2>&#34;preferred_genres&#34;</span><span class=p>:</span> <span class=p>{}}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 시청한 콘텐츠 추가</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>user_preferences</span><span class=p>[</span><span class=n>user_id</span><span class=p>][</span><span class=s2>&#34;viewed_content&#34;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;content_id&#34;</span><span class=p>:</span> <span class=n>content_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;duration&#34;</span><span class=p>:</span> <span class=n>duration</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;rating&#34;</span><span class=p>:</span> <span class=n>rating</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;timestamp&#34;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 장르 선호도 업데이트 (간단한 로직)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>content_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>content_database</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>genre</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>content_database</span><span class=p>[</span><span class=n>content_id</span><span class=p>][</span><span class=s2>&#34;genre&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>genre</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>user_preferences</span><span class=p>[</span><span class=n>user_id</span><span class=p>][</span><span class=s2>&#34;preferred_genres&#34;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>user_preferences</span><span class=p>[</span><span class=n>user_id</span><span class=p>][</span><span class=s2>&#34;preferred_genres&#34;</span><span class=p>][</span><span class=n>genre</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 시청 시간과 평점을 기반으로 선호도 점수 계산</span>
</span></span><span class=line><span class=cl>            <span class=n>preference_score</span> <span class=o>=</span> <span class=n>duration</span> <span class=o>/</span> <span class=mi>100</span>  <span class=c1># 기본 점수</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>rating</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>preference_score</span> <span class=o>*=</span> <span class=n>rating</span> <span class=o>/</span> <span class=mi>5</span>  <span class=c1># 평점 반영</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>user_preferences</span><span class=p>[</span><span class=n>user_id</span><span class=p>][</span><span class=s2>&#34;preferred_genres&#34;</span><span class=p>][</span><span class=n>genre</span><span class=p>]</span> <span class=o>+=</span> <span class=n>preference_score</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_generate_recommendations</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;추천 콘텐츠 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>user_id</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>user_preferences</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>[</span><span class=s2>&#34;movie_1&#34;</span><span class=p>,</span> <span class=s2>&#34;movie_2&#34;</span><span class=p>]</span>  <span class=c1># 기본 추천</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 사용자가 본 콘텐츠</span>
</span></span><span class=line><span class=cl>        <span class=n>viewed_content</span> <span class=o>=</span> <span class=p>{</span><span class=n>item</span><span class=p>[</span><span class=s2>&#34;content_id&#34;</span><span class=p>]</span> <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>user_preferences</span><span class=p>[</span><span class=n>user_id</span><span class=p>][</span><span class=s2>&#34;viewed_content&#34;</span><span class=p>]}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 선호 장르 기반 추천 (간단한 협업 필터링)</span>
</span></span><span class=line><span class=cl>        <span class=n>preferred_genres</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>user_preferences</span><span class=p>[</span><span class=n>user_id</span><span class=p>][</span><span class=s2>&#34;preferred_genres&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>recommendations</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>content_id</span><span class=p>,</span> <span class=n>content_info</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>content_database</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>content_id</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>viewed_content</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>genre</span> <span class=o>=</span> <span class=n>content_info</span><span class=p>[</span><span class=s2>&#34;genre&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>genre</span> <span class=ow>in</span> <span class=n>preferred_genres</span> <span class=ow>and</span> <span class=n>preferred_genres</span><span class=p>[</span><span class=n>genre</span><span class=p>]</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>recommendations</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>content_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>recommendations</span><span class=p>[:</span><span class=mi>3</span><span class=p>]</span>  <span class=c1># 상위 3개 추천</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AnalyticsService</span><span class=p>(</span><span class=n>EventConsumer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;분석 서비스 - 이벤트 데이터를 수집하고 분석&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>broker</span><span class=p>:</span> <span class=n>EventBroker</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>analytics_data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>List</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;user_engagement&#34;</span><span class=p>:</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;content_performance&#34;</span><span class=p>:</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;recommendation_effectiveness&#34;</span><span class=p>:</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>broker</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>register_handlers</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;이벤트 핸들러 등록&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>broker</span><span class=o>.</span><span class=n>subscribe</span><span class=p>(</span><span class=s2>&#34;user_view&#34;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>analyze_user_engagement</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>broker</span><span class=o>.</span><span class=n>subscribe</span><span class=p>(</span><span class=s2>&#34;content_recommendation&#34;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>analyze_recommendation</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>analyze_user_engagement</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>:</span> <span class=n>Event</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;사용자 참여도 분석&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>engagement_data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;user_id&#34;</span><span class=p>:</span> <span class=n>event</span><span class=o>.</span><span class=n>user_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;content_id&#34;</span><span class=p>:</span> <span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&#34;content_id&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;duration&#34;</span><span class=p>:</span> <span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&#34;duration&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;timestamp&#34;</span><span class=p>:</span> <span class=n>event</span><span class=o>.</span><span class=n>timestamp</span><span class=o>.</span><span class=n>isoformat</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>analytics_data</span><span class=p>[</span><span class=s2>&#34;user_engagement&#34;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>engagement_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[분석 서비스] 사용자 참여도 데이터 수집: </span><span class=si>{</span><span class=n>engagement_data</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>analyze_recommendation</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>:</span> <span class=n>Event</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;추천 효과성 분석&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>recommendation_data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;user_id&#34;</span><span class=p>:</span> <span class=n>event</span><span class=o>.</span><span class=n>user_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;recommendations&#34;</span><span class=p>:</span> <span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&#34;recommendations&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;timestamp&#34;</span><span class=p>:</span> <span class=n>event</span><span class=o>.</span><span class=n>timestamp</span><span class=o>.</span><span class=n>isoformat</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>analytics_data</span><span class=p>[</span><span class=s2>&#34;recommendation_effectiveness&#34;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>recommendation_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[분석 서비스] 추천 데이터 수집: </span><span class=si>{</span><span class=n>recommendation_data</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_analytics_summary</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;분석 요약 정보 반환&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;total_user_views&#34;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>analytics_data</span><span class=p>[</span><span class=s2>&#34;user_engagement&#34;</span><span class=p>]),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;total_recommendations&#34;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>analytics_data</span><span class=p>[</span><span class=s2>&#34;recommendation_effectiveness&#34;</span><span class=p>]),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;unique_users&#34;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=n>item</span><span class=p>[</span><span class=s2>&#34;user_id&#34;</span><span class=p>]</span> <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>analytics_data</span><span class=p>[</span><span class=s2>&#34;user_engagement&#34;</span><span class=p>]))</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>NotificationService</span><span class=p>(</span><span class=n>EventConsumer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;알림 서비스 - 사용자에게 알림 전송&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>register_handlers</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;이벤트 핸들러 등록&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>broker</span><span class=o>.</span><span class=n>subscribe</span><span class=p>(</span><span class=s2>&#34;content_recommendation&#34;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>send_recommendation_notification</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>send_recommendation_notification</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>:</span> <span class=n>Event</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;추천 알림 전송&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>user_id</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>user_id</span>
</span></span><span class=line><span class=cl>        <span class=n>recommendations</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&#34;recommendations&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 실제로는 푸시 알림, 이메일 등을 전송</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[알림 서비스] 사용자 </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>에게 알림 전송: 새로운 추천 콘텐츠 </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>recommendations</span><span class=p>)</span><span class=si>}</span><span class=s2>개&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1># 4. 이벤트 프로듀서 (Event Producers)</span>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserInteractionProducer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;사용자 상호작용 이벤트 프로듀서&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>broker</span><span class=p>:</span> <span class=n>EventBroker</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>broker</span> <span class=o>=</span> <span class=n>broker</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>user_watches_content</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>content_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>duration</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>rating</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;사용자 콘텐츠 시청 이벤트 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>event</span> <span class=o>=</span> <span class=n>UserViewEvent</span><span class=p>(</span><span class=n>user_id</span><span class=p>,</span> <span class=n>content_id</span><span class=p>,</span> <span class=n>duration</span><span class=p>,</span> <span class=n>rating</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>broker</span><span class=o>.</span><span class=n>publish</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[이벤트 생성] 사용자 </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>가 </span><span class=si>{</span><span class=n>content_id</span><span class=si>}</span><span class=s2> 시청 (시간: </span><span class=si>{</span><span class=n>duration</span><span class=si>}</span><span class=s2>분)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1># 5. 메인 실행 코드</span>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;메인 실행 함수 - Event-Driven Architecture 데모&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=== Event-Driven Architecture 데모 시작 ===</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 1. 이벤트 브로커 초기화</span>
</span></span><span class=line><span class=cl>    <span class=n>broker</span> <span class=o>=</span> <span class=n>EventBroker</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 2. 이벤트 컨슈머 초기화 (서비스들)</span>
</span></span><span class=line><span class=cl>    <span class=n>recommendation_service</span> <span class=o>=</span> <span class=n>RecommendationService</span><span class=p>(</span><span class=n>broker</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>analytics_service</span> <span class=o>=</span> <span class=n>AnalyticsService</span><span class=p>(</span><span class=n>broker</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>notification_service</span> <span class=o>=</span> <span class=n>NotificationService</span><span class=p>(</span><span class=n>broker</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 3. 이벤트 프로듀서 초기화</span>
</span></span><span class=line><span class=cl>    <span class=n>user_producer</span> <span class=o>=</span> <span class=n>UserInteractionProducer</span><span class=p>(</span><span class=n>broker</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;모든 서비스가 초기화되었습니다.</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 4. 사용자 상호작용 시뮬레이션</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=== 사용자 상호작용 시뮬레이션 ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 사용자 1의 시청 패턴</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>user_producer</span><span class=o>.</span><span class=n>user_watches_content</span><span class=p>(</span><span class=s2>&#34;user_1&#34;</span><span class=p>,</span> <span class=s2>&#34;movie_1&#34;</span><span class=p>,</span> <span class=mi>120</span><span class=p>,</span> <span class=mf>4.5</span><span class=p>)</span>  <span class=c1># 액션 영화</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>  <span class=c1># 짧은 지연</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>user_producer</span><span class=o>.</span><span class=n>user_watches_content</span><span class=p>(</span><span class=s2>&#34;user_1&#34;</span><span class=p>,</span> <span class=s2>&#34;movie_3&#34;</span><span class=p>,</span> <span class=mi>110</span><span class=p>,</span> <span class=mf>4.7</span><span class=p>)</span>  <span class=c1># 액션 영화</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 사용자 2의 시청 패턴</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>user_producer</span><span class=o>.</span><span class=n>user_watches_content</span><span class=p>(</span><span class=s2>&#34;user_2&#34;</span><span class=p>,</span> <span class=s2>&#34;movie_2&#34;</span><span class=p>,</span> <span class=mi>95</span><span class=p>,</span> <span class=mf>4.0</span><span class=p>)</span>   <span class=c1># 코미디 영화</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>user_producer</span><span class=o>.</span><span class=n>user_watches_content</span><span class=p>(</span><span class=s2>&#34;user_2&#34;</span><span class=p>,</span> <span class=s2>&#34;movie_5&#34;</span><span class=p>,</span> <span class=mi>88</span><span class=p>,</span> <span class=mf>3.8</span><span class=p>)</span>   <span class=c1># 코미디 영화</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 사용자 1이 추가로 시청</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>user_producer</span><span class=o>.</span><span class=n>user_watches_content</span><span class=p>(</span><span class=s2>&#34;user_1&#34;</span><span class=p>,</span> <span class=s2>&#34;movie_4&#34;</span><span class=p>,</span> <span class=mi>130</span><span class=p>,</span> <span class=mf>4.2</span><span class=p>)</span>  <span class=c1># 드라마 영화</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>=== 분석 결과 ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>summary</span> <span class=o>=</span> <span class=n>analytics_service</span><span class=o>.</span><span class=n>get_analytics_summary</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;총 시청 횟수: </span><span class=si>{</span><span class=n>summary</span><span class=p>[</span><span class=s1>&#39;total_user_views&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;총 추천 생성 수: </span><span class=si>{</span><span class=n>summary</span><span class=p>[</span><span class=s1>&#39;total_recommendations&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;고유 사용자 수: </span><span class=si>{</span><span class=n>summary</span><span class=p>[</span><span class=s1>&#39;unique_users&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>=== 사용자별 추천 결과 확인 ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># 사용자별 추천 결과 확인</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>user_id</span> <span class=ow>in</span> <span class=p>[</span><span class=s2>&#34;user_1&#34;</span><span class=p>,</span> <span class=s2>&#34;user_2&#34;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=n>recommendations</span> <span class=o>=</span> <span class=n>recommendation_service</span><span class=o>.</span><span class=n>_generate_recommendations</span><span class=p>(</span><span class=n>user_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;사용자 </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2> 최종 추천: </span><span class=si>{</span><span class=n>recommendations</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 사용자 선호도 확인</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>user_id</span> <span class=ow>in</span> <span class=n>recommendation_service</span><span class=o>.</span><span class=n>user_preferences</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>preferred_genres</span> <span class=o>=</span> <span class=n>recommendation_service</span><span class=o>.</span><span class=n>user_preferences</span><span class=p>[</span><span class=n>user_id</span><span class=p>][</span><span class=s2>&#34;preferred_genres&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;사용자 </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2> 선호 장르: </span><span class=si>{</span><span class=n>preferred_genres</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>=== 이벤트 저장소 확인 ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;총 저장된 이벤트 수: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>broker</span><span class=o>.</span><span class=n>event_store</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 이벤트 타입별 통계</span>
</span></span><span class=line><span class=cl>    <span class=n>event_types</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>broker</span><span class=o>.</span><span class=n>event_store</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>event_type</span> <span class=o>=</span> <span class=n>event</span><span class=o>.</span><span class=n>event_type</span>
</span></span><span class=line><span class=cl>        <span class=n>event_types</span><span class=p>[</span><span class=n>event_type</span><span class=p>]</span> <span class=o>=</span> <span class=n>event_types</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>event_type</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;이벤트 타입별 통계:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>event_type</span><span class=p>,</span> <span class=n>count</span> <span class=ow>in</span> <span class=n>event_types</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  </span><span class=si>{</span><span class=n>event_type</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>count</span><span class=si>}</span><span class=s2>개&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>=== Event-Driven Architecture 데모 완료 ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 실행</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=사례-5-전자상거래-주문-시스템-실시간-처리>사례 5: 전자상거래 주문 시스템 실시간 처리<a hidden class=anchor aria-hidden=true href=#사례-5-전자상거래-주문-시스템-실시간-처리>#</a></h4><p><strong>시스템 구성 요소</strong>:</p><ul><li><strong>Event Producer</strong>: OrderService (Spring Boot)</li><li><strong>Event Broker</strong>: Kafka</li><li><strong>Event Consumer</strong>: InventoryService, NotificationService</li><li><strong>Event Store</strong>: PostgreSQL Outbox Table + Kafka Connect</li></ul><pre class=mermaid>graph TD
    UI[Frontend SPA] --&gt; API[Order API]
    API --&gt; SVC[OrderService]
    SVC --&gt; DB[(Order DB)]
    SVC --&gt; OUTBOX[(Outbox Table)]
    OUTBOX --&gt; CONNECT[Kafka Connect CDC]
    CONNECT --&gt; KAFKA[(Kafka)]
    KAFKA --&gt; INV[Inventory Service]
    KAFKA --&gt; NOTIF[Notification Service]
</pre><p><strong>Workflow</strong>:</p><ol><li>사용자 주문 → DB 저장 + Outbox insert</li><li>Kafka Connect 가 Outbox 변경 감지 → Kafka 로 publish</li><li>InventoryService 와 NotificationService 가 이벤트 수신 후 처리</li></ol><p><strong>차이점 비교</strong>:</p><table><thead><tr><th>항목</th><th>전통적 방식</th><th>EDA 방식</th></tr></thead><tbody><tr><td>처리 흐름</td><td>동기 호출 → 트랜잭션 결합</td><td>비동기 이벤트 흐름</td></tr><tr><td>확장성</td><td>단일 트랜잭션 내 처리</td><td>서비스별 독립 확장</td></tr><tr><td>장애 복원</td><td>하나 실패 시 전체 롤백</td><td>실패한 서비스만 재처리</td></tr></tbody></table><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1> 1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2> 2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3> 3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4> 4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5> 5</a>
</span><span class=lnt id=hl-20-6><a class=lnlinks href=#hl-20-6> 6</a>
</span><span class=lnt id=hl-20-7><a class=lnlinks href=#hl-20-7> 7</a>
</span><span class=lnt id=hl-20-8><a class=lnlinks href=#hl-20-8> 8</a>
</span><span class=lnt id=hl-20-9><a class=lnlinks href=#hl-20-9> 9</a>
</span><span class=lnt id=hl-20-10><a class=lnlinks href=#hl-20-10>10</a>
</span><span class=lnt id=hl-20-11><a class=lnlinks href=#hl-20-11>11</a>
</span><span class=lnt id=hl-20-12><a class=lnlinks href=#hl-20-12>12</a>
</span><span class=lnt id=hl-20-13><a class=lnlinks href=#hl-20-13>13</a>
</span><span class=lnt id=hl-20-14><a class=lnlinks href=#hl-20-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 이벤트 발행 (Producer)</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>kafka</span> <span class=kn>import</span> <span class=n>KafkaProducer</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>producer</span> <span class=o>=</span> <span class=n>KafkaProducer</span><span class=p>(</span><span class=n>bootstrap_servers</span><span class=o>=</span><span class=s1>&#39;localhost:9092&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>value_serializer</span><span class=o>=</span><span class=k>lambda</span> <span class=n>v</span><span class=p>:</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>v</span><span class=p>)</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>event</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;order_id&#34;</span><span class=p>:</span> <span class=s2>&#34;ORD-123&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;ORDER_CREATED&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;timestamp&#34;</span><span class=p>:</span> <span class=s2>&#34;2025-06-14T12:00:00Z&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>producer</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=s1>&#39;order-events&#39;</span><span class=p>,</span> <span class=n>value</span><span class=o>=</span><span class=n>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>producer</span><span class=o>.</span><span class=n>flush</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1> 1</a>
</span><span class=lnt id=hl-21-2><a class=lnlinks href=#hl-21-2> 2</a>
</span><span class=lnt id=hl-21-3><a class=lnlinks href=#hl-21-3> 3</a>
</span><span class=lnt id=hl-21-4><a class=lnlinks href=#hl-21-4> 4</a>
</span><span class=lnt id=hl-21-5><a class=lnlinks href=#hl-21-5> 5</a>
</span><span class=lnt id=hl-21-6><a class=lnlinks href=#hl-21-6> 6</a>
</span><span class=lnt id=hl-21-7><a class=lnlinks href=#hl-21-7> 7</a>
</span><span class=lnt id=hl-21-8><a class=lnlinks href=#hl-21-8> 8</a>
</span><span class=lnt id=hl-21-9><a class=lnlinks href=#hl-21-9> 9</a>
</span><span class=lnt id=hl-21-10><a class=lnlinks href=#hl-21-10>10</a>
</span><span class=lnt id=hl-21-11><a class=lnlinks href=#hl-21-11>11</a>
</span><span class=lnt id=hl-21-12><a class=lnlinks href=#hl-21-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 이벤트 수신 (Consumer)</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>kafka</span> <span class=kn>import</span> <span class=n>KafkaConsumer</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>consumer</span> <span class=o>=</span> <span class=n>KafkaConsumer</span><span class=p>(</span><span class=s1>&#39;order-events&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>bootstrap_servers</span><span class=o>=</span><span class=s1>&#39;localhost:9092&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>auto_offset_reset</span><span class=o>=</span><span class=s1>&#39;earliest&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>group_id</span><span class=o>=</span><span class=s1>&#39;inventory-group&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>value_deserializer</span><span class=o>=</span><span class=k>lambda</span> <span class=n>m</span><span class=p>:</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>m</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>msg</span> <span class=ow>in</span> <span class=n>consumer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>event</span> <span class=o>=</span> <span class=n>msg</span><span class=o>.</span><span class=n>value</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Inventory 처리 중: </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;order_id&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> → 상태: </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;status&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=사례-6-netflix-의-콘텐츠-파이낸스-시스템>사례 6: Netflix 의 콘텐츠 파이낸스 시스템<a hidden class=anchor aria-hidden=true href=#사례-6-netflix-의-콘텐츠-파이낸스-시스템>#</a></h4><p><strong>시스템 구성</strong>:</p><pre class=mermaid>graph TB
    subgraph &#34;Content Finance System&#34;
        A[Content Planning Service] --&gt;|Budget Events| B[Event Bus - Kafka]
        C[Spending Tracking Service] --&gt;|Expense Events| B
        D[Catalog Service] --&gt;|Content Events| B
        
        B --&gt;|Financial Events| E[Finance Analytics Service]
        B --&gt;|Budget Events| F[Budget Management Service]
        B --&gt;|Report Events| G[Reporting Service]
        
        E --&gt; H[Financial Dashboard]
        F --&gt; I[Budget Alerts]
        G --&gt; J[Executive Reports]
    end
    
    subgraph &#34;External Systems&#34;
        K[Production Systems] --&gt;|Production Events| B
        L[Content Acquisition] --&gt;|Acquisition Events| B
    end
</pre><p><strong>Workflow</strong>:</p><ol><li><strong>콘텐츠 기획 단계</strong><ul><li>콘텐츠 기획 서비스에서 예산 이벤트 발행</li><li>예산 관리 서비스에서 예산 할당 처리</li></ul></li><li><strong>제작 진행 단계</strong><ul><li>제작 시스템에서 지출 이벤트 실시간 발행</li><li>지출 추적 서비스에서 예산 대비 진행률 계산</li></ul></li><li><strong>분석 및 보고 단계</strong><ul><li>금융 분석 서비스에서 트렌드 분석</li><li>보고 서비스에서 경영진 대시보드 업데이트</li></ul></li></ol><p><strong>EDA 의 역할</strong>:</p><ul><li><strong>실시간 예산 추적</strong>: 제작 비용의 즉시 반영</li><li><strong>확장성</strong>: 글로벌 제작 프로젝트 지원</li><li><strong>데이터 일관성</strong>: 복수의 시스템 간 동기화</li><li><strong>감사 가능성</strong>: 모든 금융 활동의 이벤트 로그</li></ul><p><strong>기존 시스템과의 차이점</strong>:</p><table><thead><tr><th>구분</th><th>기존 배치 시스템</th><th>EDA 기반 시스템</th></tr></thead><tbody><tr><td>데이터 갱신</td><td>일일 배치 처리</td><td>실시간 이벤트 처리</td></tr><tr><td>확장성</td><td>수직 확장 제한</td><td>수평 확장 용이</td></tr><tr><td>장애 복구</td><td>전체 시스템 재시작</td><td>부분 서비스 복구</td></tr><tr><td>개발 속도</td><td>통합 배포 필요</td><td>독립적 서비스 배포</td></tr></tbody></table><p><strong>구현 예시</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-23-1><a class=lnlinks href=#hl-23-1>  1</a>
</span><span class=lnt id=hl-23-2><a class=lnlinks href=#hl-23-2>  2</a>
</span><span class=lnt id=hl-23-3><a class=lnlinks href=#hl-23-3>  3</a>
</span><span class=lnt id=hl-23-4><a class=lnlinks href=#hl-23-4>  4</a>
</span><span class=lnt id=hl-23-5><a class=lnlinks href=#hl-23-5>  5</a>
</span><span class=lnt id=hl-23-6><a class=lnlinks href=#hl-23-6>  6</a>
</span><span class=lnt id=hl-23-7><a class=lnlinks href=#hl-23-7>  7</a>
</span><span class=lnt id=hl-23-8><a class=lnlinks href=#hl-23-8>  8</a>
</span><span class=lnt id=hl-23-9><a class=lnlinks href=#hl-23-9>  9</a>
</span><span class=lnt id=hl-23-10><a class=lnlinks href=#hl-23-10> 10</a>
</span><span class=lnt id=hl-23-11><a class=lnlinks href=#hl-23-11> 11</a>
</span><span class=lnt id=hl-23-12><a class=lnlinks href=#hl-23-12> 12</a>
</span><span class=lnt id=hl-23-13><a class=lnlinks href=#hl-23-13> 13</a>
</span><span class=lnt id=hl-23-14><a class=lnlinks href=#hl-23-14> 14</a>
</span><span class=lnt id=hl-23-15><a class=lnlinks href=#hl-23-15> 15</a>
</span><span class=lnt id=hl-23-16><a class=lnlinks href=#hl-23-16> 16</a>
</span><span class=lnt id=hl-23-17><a class=lnlinks href=#hl-23-17> 17</a>
</span><span class=lnt id=hl-23-18><a class=lnlinks href=#hl-23-18> 18</a>
</span><span class=lnt id=hl-23-19><a class=lnlinks href=#hl-23-19> 19</a>
</span><span class=lnt id=hl-23-20><a class=lnlinks href=#hl-23-20> 20</a>
</span><span class=lnt id=hl-23-21><a class=lnlinks href=#hl-23-21> 21</a>
</span><span class=lnt id=hl-23-22><a class=lnlinks href=#hl-23-22> 22</a>
</span><span class=lnt id=hl-23-23><a class=lnlinks href=#hl-23-23> 23</a>
</span><span class=lnt id=hl-23-24><a class=lnlinks href=#hl-23-24> 24</a>
</span><span class=lnt id=hl-23-25><a class=lnlinks href=#hl-23-25> 25</a>
</span><span class=lnt id=hl-23-26><a class=lnlinks href=#hl-23-26> 26</a>
</span><span class=lnt id=hl-23-27><a class=lnlinks href=#hl-23-27> 27</a>
</span><span class=lnt id=hl-23-28><a class=lnlinks href=#hl-23-28> 28</a>
</span><span class=lnt id=hl-23-29><a class=lnlinks href=#hl-23-29> 29</a>
</span><span class=lnt id=hl-23-30><a class=lnlinks href=#hl-23-30> 30</a>
</span><span class=lnt id=hl-23-31><a class=lnlinks href=#hl-23-31> 31</a>
</span><span class=lnt id=hl-23-32><a class=lnlinks href=#hl-23-32> 32</a>
</span><span class=lnt id=hl-23-33><a class=lnlinks href=#hl-23-33> 33</a>
</span><span class=lnt id=hl-23-34><a class=lnlinks href=#hl-23-34> 34</a>
</span><span class=lnt id=hl-23-35><a class=lnlinks href=#hl-23-35> 35</a>
</span><span class=lnt id=hl-23-36><a class=lnlinks href=#hl-23-36> 36</a>
</span><span class=lnt id=hl-23-37><a class=lnlinks href=#hl-23-37> 37</a>
</span><span class=lnt id=hl-23-38><a class=lnlinks href=#hl-23-38> 38</a>
</span><span class=lnt id=hl-23-39><a class=lnlinks href=#hl-23-39> 39</a>
</span><span class=lnt id=hl-23-40><a class=lnlinks href=#hl-23-40> 40</a>
</span><span class=lnt id=hl-23-41><a class=lnlinks href=#hl-23-41> 41</a>
</span><span class=lnt id=hl-23-42><a class=lnlinks href=#hl-23-42> 42</a>
</span><span class=lnt id=hl-23-43><a class=lnlinks href=#hl-23-43> 43</a>
</span><span class=lnt id=hl-23-44><a class=lnlinks href=#hl-23-44> 44</a>
</span><span class=lnt id=hl-23-45><a class=lnlinks href=#hl-23-45> 45</a>
</span><span class=lnt id=hl-23-46><a class=lnlinks href=#hl-23-46> 46</a>
</span><span class=lnt id=hl-23-47><a class=lnlinks href=#hl-23-47> 47</a>
</span><span class=lnt id=hl-23-48><a class=lnlinks href=#hl-23-48> 48</a>
</span><span class=lnt id=hl-23-49><a class=lnlinks href=#hl-23-49> 49</a>
</span><span class=lnt id=hl-23-50><a class=lnlinks href=#hl-23-50> 50</a>
</span><span class=lnt id=hl-23-51><a class=lnlinks href=#hl-23-51> 51</a>
</span><span class=lnt id=hl-23-52><a class=lnlinks href=#hl-23-52> 52</a>
</span><span class=lnt id=hl-23-53><a class=lnlinks href=#hl-23-53> 53</a>
</span><span class=lnt id=hl-23-54><a class=lnlinks href=#hl-23-54> 54</a>
</span><span class=lnt id=hl-23-55><a class=lnlinks href=#hl-23-55> 55</a>
</span><span class=lnt id=hl-23-56><a class=lnlinks href=#hl-23-56> 56</a>
</span><span class=lnt id=hl-23-57><a class=lnlinks href=#hl-23-57> 57</a>
</span><span class=lnt id=hl-23-58><a class=lnlinks href=#hl-23-58> 58</a>
</span><span class=lnt id=hl-23-59><a class=lnlinks href=#hl-23-59> 59</a>
</span><span class=lnt id=hl-23-60><a class=lnlinks href=#hl-23-60> 60</a>
</span><span class=lnt id=hl-23-61><a class=lnlinks href=#hl-23-61> 61</a>
</span><span class=lnt id=hl-23-62><a class=lnlinks href=#hl-23-62> 62</a>
</span><span class=lnt id=hl-23-63><a class=lnlinks href=#hl-23-63> 63</a>
</span><span class=lnt id=hl-23-64><a class=lnlinks href=#hl-23-64> 64</a>
</span><span class=lnt id=hl-23-65><a class=lnlinks href=#hl-23-65> 65</a>
</span><span class=lnt id=hl-23-66><a class=lnlinks href=#hl-23-66> 66</a>
</span><span class=lnt id=hl-23-67><a class=lnlinks href=#hl-23-67> 67</a>
</span><span class=lnt id=hl-23-68><a class=lnlinks href=#hl-23-68> 68</a>
</span><span class=lnt id=hl-23-69><a class=lnlinks href=#hl-23-69> 69</a>
</span><span class=lnt id=hl-23-70><a class=lnlinks href=#hl-23-70> 70</a>
</span><span class=lnt id=hl-23-71><a class=lnlinks href=#hl-23-71> 71</a>
</span><span class=lnt id=hl-23-72><a class=lnlinks href=#hl-23-72> 72</a>
</span><span class=lnt id=hl-23-73><a class=lnlinks href=#hl-23-73> 73</a>
</span><span class=lnt id=hl-23-74><a class=lnlinks href=#hl-23-74> 74</a>
</span><span class=lnt id=hl-23-75><a class=lnlinks href=#hl-23-75> 75</a>
</span><span class=lnt id=hl-23-76><a class=lnlinks href=#hl-23-76> 76</a>
</span><span class=lnt id=hl-23-77><a class=lnlinks href=#hl-23-77> 77</a>
</span><span class=lnt id=hl-23-78><a class=lnlinks href=#hl-23-78> 78</a>
</span><span class=lnt id=hl-23-79><a class=lnlinks href=#hl-23-79> 79</a>
</span><span class=lnt id=hl-23-80><a class=lnlinks href=#hl-23-80> 80</a>
</span><span class=lnt id=hl-23-81><a class=lnlinks href=#hl-23-81> 81</a>
</span><span class=lnt id=hl-23-82><a class=lnlinks href=#hl-23-82> 82</a>
</span><span class=lnt id=hl-23-83><a class=lnlinks href=#hl-23-83> 83</a>
</span><span class=lnt id=hl-23-84><a class=lnlinks href=#hl-23-84> 84</a>
</span><span class=lnt id=hl-23-85><a class=lnlinks href=#hl-23-85> 85</a>
</span><span class=lnt id=hl-23-86><a class=lnlinks href=#hl-23-86> 86</a>
</span><span class=lnt id=hl-23-87><a class=lnlinks href=#hl-23-87> 87</a>
</span><span class=lnt id=hl-23-88><a class=lnlinks href=#hl-23-88> 88</a>
</span><span class=lnt id=hl-23-89><a class=lnlinks href=#hl-23-89> 89</a>
</span><span class=lnt id=hl-23-90><a class=lnlinks href=#hl-23-90> 90</a>
</span><span class=lnt id=hl-23-91><a class=lnlinks href=#hl-23-91> 91</a>
</span><span class=lnt id=hl-23-92><a class=lnlinks href=#hl-23-92> 92</a>
</span><span class=lnt id=hl-23-93><a class=lnlinks href=#hl-23-93> 93</a>
</span><span class=lnt id=hl-23-94><a class=lnlinks href=#hl-23-94> 94</a>
</span><span class=lnt id=hl-23-95><a class=lnlinks href=#hl-23-95> 95</a>
</span><span class=lnt id=hl-23-96><a class=lnlinks href=#hl-23-96> 96</a>
</span><span class=lnt id=hl-23-97><a class=lnlinks href=#hl-23-97> 97</a>
</span><span class=lnt id=hl-23-98><a class=lnlinks href=#hl-23-98> 98</a>
</span><span class=lnt id=hl-23-99><a class=lnlinks href=#hl-23-99> 99</a>
</span><span class=lnt id=hl-23-100><a class=lnlinks href=#hl-23-100>100</a>
</span><span class=lnt id=hl-23-101><a class=lnlinks href=#hl-23-101>101</a>
</span><span class=lnt id=hl-23-102><a class=lnlinks href=#hl-23-102>102</a>
</span><span class=lnt id=hl-23-103><a class=lnlinks href=#hl-23-103>103</a>
</span><span class=lnt id=hl-23-104><a class=lnlinks href=#hl-23-104>104</a>
</span><span class=lnt id=hl-23-105><a class=lnlinks href=#hl-23-105>105</a>
</span><span class=lnt id=hl-23-106><a class=lnlinks href=#hl-23-106>106</a>
</span><span class=lnt id=hl-23-107><a class=lnlinks href=#hl-23-107>107</a>
</span><span class=lnt id=hl-23-108><a class=lnlinks href=#hl-23-108>108</a>
</span><span class=lnt id=hl-23-109><a class=lnlinks href=#hl-23-109>109</a>
</span><span class=lnt id=hl-23-110><a class=lnlinks href=#hl-23-110>110</a>
</span><span class=lnt id=hl-23-111><a class=lnlinks href=#hl-23-111>111</a>
</span><span class=lnt id=hl-23-112><a class=lnlinks href=#hl-23-112>112</a>
</span><span class=lnt id=hl-23-113><a class=lnlinks href=#hl-23-113>113</a>
</span><span class=lnt id=hl-23-114><a class=lnlinks href=#hl-23-114>114</a>
</span><span class=lnt id=hl-23-115><a class=lnlinks href=#hl-23-115>115</a>
</span><span class=lnt id=hl-23-116><a class=lnlinks href=#hl-23-116>116</a>
</span><span class=lnt id=hl-23-117><a class=lnlinks href=#hl-23-117>117</a>
</span><span class=lnt id=hl-23-118><a class=lnlinks href=#hl-23-118>118</a>
</span><span class=lnt id=hl-23-119><a class=lnlinks href=#hl-23-119>119</a>
</span><span class=lnt id=hl-23-120><a class=lnlinks href=#hl-23-120>120</a>
</span><span class=lnt id=hl-23-121><a class=lnlinks href=#hl-23-121>121</a>
</span><span class=lnt id=hl-23-122><a class=lnlinks href=#hl-23-122>122</a>
</span><span class=lnt id=hl-23-123><a class=lnlinks href=#hl-23-123>123</a>
</span><span class=lnt id=hl-23-124><a class=lnlinks href=#hl-23-124>124</a>
</span><span class=lnt id=hl-23-125><a class=lnlinks href=#hl-23-125>125</a>
</span><span class=lnt id=hl-23-126><a class=lnlinks href=#hl-23-126>126</a>
</span><span class=lnt id=hl-23-127><a class=lnlinks href=#hl-23-127>127</a>
</span><span class=lnt id=hl-23-128><a class=lnlinks href=#hl-23-128>128</a>
</span><span class=lnt id=hl-23-129><a class=lnlinks href=#hl-23-129>129</a>
</span><span class=lnt id=hl-23-130><a class=lnlinks href=#hl-23-130>130</a>
</span><span class=lnt id=hl-23-131><a class=lnlinks href=#hl-23-131>131</a>
</span><span class=lnt id=hl-23-132><a class=lnlinks href=#hl-23-132>132</a>
</span><span class=lnt id=hl-23-133><a class=lnlinks href=#hl-23-133>133</a>
</span><span class=lnt id=hl-23-134><a class=lnlinks href=#hl-23-134>134</a>
</span><span class=lnt id=hl-23-135><a class=lnlinks href=#hl-23-135>135</a>
</span><span class=lnt id=hl-23-136><a class=lnlinks href=#hl-23-136>136</a>
</span><span class=lnt id=hl-23-137><a class=lnlinks href=#hl-23-137>137</a>
</span><span class=lnt id=hl-23-138><a class=lnlinks href=#hl-23-138>138</a>
</span><span class=lnt id=hl-23-139><a class=lnlinks href=#hl-23-139>139</a>
</span><span class=lnt id=hl-23-140><a class=lnlinks href=#hl-23-140>140</a>
</span><span class=lnt id=hl-23-141><a class=lnlinks href=#hl-23-141>141</a>
</span><span class=lnt id=hl-23-142><a class=lnlinks href=#hl-23-142>142</a>
</span><span class=lnt id=hl-23-143><a class=lnlinks href=#hl-23-143>143</a>
</span><span class=lnt id=hl-23-144><a class=lnlinks href=#hl-23-144>144</a>
</span><span class=lnt id=hl-23-145><a class=lnlinks href=#hl-23-145>145</a>
</span><span class=lnt id=hl-23-146><a class=lnlinks href=#hl-23-146>146</a>
</span><span class=lnt id=hl-23-147><a class=lnlinks href=#hl-23-147>147</a>
</span><span class=lnt id=hl-23-148><a class=lnlinks href=#hl-23-148>148</a>
</span><span class=lnt id=hl-23-149><a class=lnlinks href=#hl-23-149>149</a>
</span><span class=lnt id=hl-23-150><a class=lnlinks href=#hl-23-150>150</a>
</span><span class=lnt id=hl-23-151><a class=lnlinks href=#hl-23-151>151</a>
</span><span class=lnt id=hl-23-152><a class=lnlinks href=#hl-23-152>152</a>
</span><span class=lnt id=hl-23-153><a class=lnlinks href=#hl-23-153>153</a>
</span><span class=lnt id=hl-23-154><a class=lnlinks href=#hl-23-154>154</a>
</span><span class=lnt id=hl-23-155><a class=lnlinks href=#hl-23-155>155</a>
</span><span class=lnt id=hl-23-156><a class=lnlinks href=#hl-23-156>156</a>
</span><span class=lnt id=hl-23-157><a class=lnlinks href=#hl-23-157>157</a>
</span><span class=lnt id=hl-23-158><a class=lnlinks href=#hl-23-158>158</a>
</span><span class=lnt id=hl-23-159><a class=lnlinks href=#hl-23-159>159</a>
</span><span class=lnt id=hl-23-160><a class=lnlinks href=#hl-23-160>160</a>
</span><span class=lnt id=hl-23-161><a class=lnlinks href=#hl-23-161>161</a>
</span><span class=lnt id=hl-23-162><a class=lnlinks href=#hl-23-162>162</a>
</span><span class=lnt id=hl-23-163><a class=lnlinks href=#hl-23-163>163</a>
</span><span class=lnt id=hl-23-164><a class=lnlinks href=#hl-23-164>164</a>
</span><span class=lnt id=hl-23-165><a class=lnlinks href=#hl-23-165>165</a>
</span><span class=lnt id=hl-23-166><a class=lnlinks href=#hl-23-166>166</a>
</span><span class=lnt id=hl-23-167><a class=lnlinks href=#hl-23-167>167</a>
</span><span class=lnt id=hl-23-168><a class=lnlinks href=#hl-23-168>168</a>
</span><span class=lnt id=hl-23-169><a class=lnlinks href=#hl-23-169>169</a>
</span><span class=lnt id=hl-23-170><a class=lnlinks href=#hl-23-170>170</a>
</span><span class=lnt id=hl-23-171><a class=lnlinks href=#hl-23-171>171</a>
</span><span class=lnt id=hl-23-172><a class=lnlinks href=#hl-23-172>172</a>
</span><span class=lnt id=hl-23-173><a class=lnlinks href=#hl-23-173>173</a>
</span><span class=lnt id=hl-23-174><a class=lnlinks href=#hl-23-174>174</a>
</span><span class=lnt id=hl-23-175><a class=lnlinks href=#hl-23-175>175</a>
</span><span class=lnt id=hl-23-176><a class=lnlinks href=#hl-23-176>176</a>
</span><span class=lnt id=hl-23-177><a class=lnlinks href=#hl-23-177>177</a>
</span><span class=lnt id=hl-23-178><a class=lnlinks href=#hl-23-178>178</a>
</span><span class=lnt id=hl-23-179><a class=lnlinks href=#hl-23-179>179</a>
</span><span class=lnt id=hl-23-180><a class=lnlinks href=#hl-23-180>180</a>
</span><span class=lnt id=hl-23-181><a class=lnlinks href=#hl-23-181>181</a>
</span><span class=lnt id=hl-23-182><a class=lnlinks href=#hl-23-182>182</a>
</span><span class=lnt id=hl-23-183><a class=lnlinks href=#hl-23-183>183</a>
</span><span class=lnt id=hl-23-184><a class=lnlinks href=#hl-23-184>184</a>
</span><span class=lnt id=hl-23-185><a class=lnlinks href=#hl-23-185>185</a>
</span><span class=lnt id=hl-23-186><a class=lnlinks href=#hl-23-186>186</a>
</span><span class=lnt id=hl-23-187><a class=lnlinks href=#hl-23-187>187</a>
</span><span class=lnt id=hl-23-188><a class=lnlinks href=#hl-23-188>188</a>
</span><span class=lnt id=hl-23-189><a class=lnlinks href=#hl-23-189>189</a>
</span><span class=lnt id=hl-23-190><a class=lnlinks href=#hl-23-190>190</a>
</span><span class=lnt id=hl-23-191><a class=lnlinks href=#hl-23-191>191</a>
</span><span class=lnt id=hl-23-192><a class=lnlinks href=#hl-23-192>192</a>
</span><span class=lnt id=hl-23-193><a class=lnlinks href=#hl-23-193>193</a>
</span><span class=lnt id=hl-23-194><a class=lnlinks href=#hl-23-194>194</a>
</span><span class=lnt id=hl-23-195><a class=lnlinks href=#hl-23-195>195</a>
</span><span class=lnt id=hl-23-196><a class=lnlinks href=#hl-23-196>196</a>
</span><span class=lnt id=hl-23-197><a class=lnlinks href=#hl-23-197>197</a>
</span><span class=lnt id=hl-23-198><a class=lnlinks href=#hl-23-198>198</a>
</span><span class=lnt id=hl-23-199><a class=lnlinks href=#hl-23-199>199</a>
</span><span class=lnt id=hl-23-200><a class=lnlinks href=#hl-23-200>200</a>
</span><span class=lnt id=hl-23-201><a class=lnlinks href=#hl-23-201>201</a>
</span><span class=lnt id=hl-23-202><a class=lnlinks href=#hl-23-202>202</a>
</span><span class=lnt id=hl-23-203><a class=lnlinks href=#hl-23-203>203</a>
</span><span class=lnt id=hl-23-204><a class=lnlinks href=#hl-23-204>204</a>
</span><span class=lnt id=hl-23-205><a class=lnlinks href=#hl-23-205>205</a>
</span><span class=lnt id=hl-23-206><a class=lnlinks href=#hl-23-206>206</a>
</span><span class=lnt id=hl-23-207><a class=lnlinks href=#hl-23-207>207</a>
</span><span class=lnt id=hl-23-208><a class=lnlinks href=#hl-23-208>208</a>
</span><span class=lnt id=hl-23-209><a class=lnlinks href=#hl-23-209>209</a>
</span><span class=lnt id=hl-23-210><a class=lnlinks href=#hl-23-210>210</a>
</span><span class=lnt id=hl-23-211><a class=lnlinks href=#hl-23-211>211</a>
</span><span class=lnt id=hl-23-212><a class=lnlinks href=#hl-23-212>212</a>
</span><span class=lnt id=hl-23-213><a class=lnlinks href=#hl-23-213>213</a>
</span><span class=lnt id=hl-23-214><a class=lnlinks href=#hl-23-214>214</a>
</span><span class=lnt id=hl-23-215><a class=lnlinks href=#hl-23-215>215</a>
</span><span class=lnt id=hl-23-216><a class=lnlinks href=#hl-23-216>216</a>
</span><span class=lnt id=hl-23-217><a class=lnlinks href=#hl-23-217>217</a>
</span><span class=lnt id=hl-23-218><a class=lnlinks href=#hl-23-218>218</a>
</span><span class=lnt id=hl-23-219><a class=lnlinks href=#hl-23-219>219</a>
</span><span class=lnt id=hl-23-220><a class=lnlinks href=#hl-23-220>220</a>
</span><span class=lnt id=hl-23-221><a class=lnlinks href=#hl-23-221>221</a>
</span><span class=lnt id=hl-23-222><a class=lnlinks href=#hl-23-222>222</a>
</span><span class=lnt id=hl-23-223><a class=lnlinks href=#hl-23-223>223</a>
</span><span class=lnt id=hl-23-224><a class=lnlinks href=#hl-23-224>224</a>
</span><span class=lnt id=hl-23-225><a class=lnlinks href=#hl-23-225>225</a>
</span><span class=lnt id=hl-23-226><a class=lnlinks href=#hl-23-226>226</a>
</span><span class=lnt id=hl-23-227><a class=lnlinks href=#hl-23-227>227</a>
</span><span class=lnt id=hl-23-228><a class=lnlinks href=#hl-23-228>228</a>
</span><span class=lnt id=hl-23-229><a class=lnlinks href=#hl-23-229>229</a>
</span><span class=lnt id=hl-23-230><a class=lnlinks href=#hl-23-230>230</a>
</span><span class=lnt id=hl-23-231><a class=lnlinks href=#hl-23-231>231</a>
</span><span class=lnt id=hl-23-232><a class=lnlinks href=#hl-23-232>232</a>
</span><span class=lnt id=hl-23-233><a class=lnlinks href=#hl-23-233>233</a>
</span><span class=lnt id=hl-23-234><a class=lnlinks href=#hl-23-234>234</a>
</span><span class=lnt id=hl-23-235><a class=lnlinks href=#hl-23-235>235</a>
</span><span class=lnt id=hl-23-236><a class=lnlinks href=#hl-23-236>236</a>
</span><span class=lnt id=hl-23-237><a class=lnlinks href=#hl-23-237>237</a>
</span><span class=lnt id=hl-23-238><a class=lnlinks href=#hl-23-238>238</a>
</span><span class=lnt id=hl-23-239><a class=lnlinks href=#hl-23-239>239</a>
</span><span class=lnt id=hl-23-240><a class=lnlinks href=#hl-23-240>240</a>
</span><span class=lnt id=hl-23-241><a class=lnlinks href=#hl-23-241>241</a>
</span><span class=lnt id=hl-23-242><a class=lnlinks href=#hl-23-242>242</a>
</span><span class=lnt id=hl-23-243><a class=lnlinks href=#hl-23-243>243</a>
</span><span class=lnt id=hl-23-244><a class=lnlinks href=#hl-23-244>244</a>
</span><span class=lnt id=hl-23-245><a class=lnlinks href=#hl-23-245>245</a>
</span><span class=lnt id=hl-23-246><a class=lnlinks href=#hl-23-246>246</a>
</span><span class=lnt id=hl-23-247><a class=lnlinks href=#hl-23-247>247</a>
</span><span class=lnt id=hl-23-248><a class=lnlinks href=#hl-23-248>248</a>
</span><span class=lnt id=hl-23-249><a class=lnlinks href=#hl-23-249>249</a>
</span><span class=lnt id=hl-23-250><a class=lnlinks href=#hl-23-250>250</a>
</span><span class=lnt id=hl-23-251><a class=lnlinks href=#hl-23-251>251</a>
</span><span class=lnt id=hl-23-252><a class=lnlinks href=#hl-23-252>252</a>
</span><span class=lnt id=hl-23-253><a class=lnlinks href=#hl-23-253>253</a>
</span><span class=lnt id=hl-23-254><a class=lnlinks href=#hl-23-254>254</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 이벤트 정의
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>BudgetAllocatedEvent</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span><span class=p>,</span> <span class=nx>department</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventId</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>generateId</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventType</span> <span class=o>=</span> <span class=s1>&#39;BudgetAllocated&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>timestamp</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>data</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span><span class=p>,</span> <span class=nx>department</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>generateId</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s1>&#39;evt_&#39;</span> <span class=o>+</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>().</span><span class=nx>toString</span><span class=p>(</span><span class=mi>36</span><span class=p>).</span><span class=nx>substr</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>9</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>ExpenseRecordedEvent</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span><span class=p>,</span> <span class=nx>category</span><span class=p>,</span> <span class=nx>vendor</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventId</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>generateId</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventType</span> <span class=o>=</span> <span class=s1>&#39;ExpenseRecorded&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>timestamp</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>data</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span><span class=p>,</span> <span class=nx>category</span><span class=p>,</span> <span class=nx>vendor</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>generateId</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s1>&#39;evt_&#39;</span> <span class=o>+</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>().</span><span class=nx>toString</span><span class=p>(</span><span class=mi>36</span><span class=p>).</span><span class=nx>substr</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>9</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 이벤트 브로커
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>EventBroker</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>subscribers</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventStore</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>subscribe</span><span class=p>(</span><span class=nx>eventType</span><span class=p>,</span> <span class=nx>handler</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=k>this</span><span class=p>.</span><span class=nx>subscribers</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=nx>eventType</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>subscribers</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>eventType</span><span class=p>,</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>subscribers</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>eventType</span><span class=p>).</span><span class=nx>push</span><span class=p>(</span><span class=nx>handler</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>publish</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 이벤트 저장 (Event Sourcing)
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>eventStore</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>event</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 구독자들에게 이벤트 전달
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>handlers</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>subscribers</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>eventType</span><span class=p>)</span> <span class=o>||</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>handler</span> <span class=k>of</span> <span class=nx>handlers</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>await</span> <span class=nx>handler</span><span class=p>(</span><span class=nx>event</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`Error processing event </span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>eventId</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 에러 처리 로직 (Dead Letter Queue 등)
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleEventProcessingError</span><span class=p>(</span><span class=nx>event</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>handleEventProcessingError</span><span class=p>(</span><span class=nx>event</span><span class=p>,</span> <span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 실패한 이벤트를 별도 큐로 전송
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Moving event </span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>eventId</span><span class=si>}</span><span class=sb> to dead letter queue`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 예산 관리 서비스
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>BudgetManagementService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>eventBroker</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span> <span class=o>=</span> <span class=nx>eventBroker</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>budgets</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span> <span class=c1>// projectId -&gt; budget info
</span></span></span><span class=line><span class=cl><span class=c1></span>        
</span></span><span class=line><span class=cl>        <span class=c1>// 이벤트 구독
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=s1>&#39;BudgetAllocated&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleBudgetAllocated</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=s1>&#39;ExpenseRecorded&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleExpenseRecorded</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>allocateBudget</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span><span class=p>,</span> <span class=nx>department</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 예산 할당 비즈니스 로직
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>budgets</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>totalBudget</span><span class=o>:</span> <span class=nx>amount</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>spentAmount</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>department</span><span class=o>:</span> <span class=nx>department</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>createdAt</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 이벤트 발행
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>event</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>BudgetAllocatedEvent</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span><span class=p>,</span> <span class=nx>department</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span><span class=p>.</span><span class=nx>publish</span><span class=p>(</span><span class=nx>event</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Budget allocated: </span><span class=si>${</span><span class=nx>amount</span><span class=si>}</span><span class=sb> for project </span><span class=si>${</span><span class=nx>projectId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>handleBudgetAllocated</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 예산 할당 이벤트 처리 (이미 allocateBudget에서 처리됨)
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Budget allocation confirmed for project </span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>projectId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>handleExpenseRecorded</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=p>{</span> <span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>budget</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>budgets</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>projectId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>budget</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>budget</span><span class=p>.</span><span class=nx>spentAmount</span> <span class=o>+=</span> <span class=nx>amount</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 예산 초과 체크
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=p>(</span><span class=nx>budget</span><span class=p>.</span><span class=nx>spentAmount</span> <span class=o>&gt;</span> <span class=nx>budget</span><span class=p>.</span><span class=nx>totalBudget</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>publishBudgetExceededAlert</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=nx>budget</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Updated spent amount for project </span><span class=si>${</span><span class=nx>projectId</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>budget</span><span class=p>.</span><span class=nx>spentAmount</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>publishBudgetExceededAlert</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=nx>budget</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>alertEvent</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>eventId</span><span class=o>:</span> <span class=s1>&#39;alert_&#39;</span> <span class=o>+</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>().</span><span class=nx>toString</span><span class=p>(</span><span class=mi>36</span><span class=p>).</span><span class=nx>substr</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>9</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=nx>eventType</span><span class=o>:</span> <span class=s1>&#39;BudgetExceeded&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>timestamp</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>projectId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>totalBudget</span><span class=o>:</span> <span class=nx>budget</span><span class=p>.</span><span class=nx>totalBudget</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>spentAmount</span><span class=o>:</span> <span class=nx>budget</span><span class=p>.</span><span class=nx>spentAmount</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>overage</span><span class=o>:</span> <span class=nx>budget</span><span class=p>.</span><span class=nx>spentAmount</span> <span class=o>-</span> <span class=nx>budget</span><span class=p>.</span><span class=nx>totalBudget</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span><span class=p>.</span><span class=nx>publish</span><span class=p>(</span><span class=nx>alertEvent</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 지출 추적 서비스
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>ExpenseTrackingService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>eventBroker</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span> <span class=o>=</span> <span class=nx>eventBroker</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>expenses</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span> <span class=c1>// projectId -&gt; expenses[]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>recordExpense</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span><span class=p>,</span> <span class=nx>category</span><span class=p>,</span> <span class=nx>vendor</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 지출 기록 비즈니스 로직
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=k>this</span><span class=p>.</span><span class=nx>expenses</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=nx>projectId</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>expenses</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>expense</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>id</span><span class=o>:</span> <span class=s1>&#39;exp_&#39;</span> <span class=o>+</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>().</span><span class=nx>toString</span><span class=p>(</span><span class=mi>36</span><span class=p>).</span><span class=nx>substr</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>9</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=nx>projectId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>amount</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>category</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>vendor</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>recordedAt</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>expenses</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>projectId</span><span class=p>).</span><span class=nx>push</span><span class=p>(</span><span class=nx>expense</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 이벤트 발행
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>event</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ExpenseRecordedEvent</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span><span class=p>,</span> <span class=nx>category</span><span class=p>,</span> <span class=nx>vendor</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span><span class=p>.</span><span class=nx>publish</span><span class=p>(</span><span class=nx>event</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Expense recorded: </span><span class=si>${</span><span class=nx>amount</span><span class=si>}</span><span class=sb> for project </span><span class=si>${</span><span class=nx>projectId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 분석 서비스
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>AnalyticsService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>eventBroker</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span> <span class=o>=</span> <span class=nx>eventBroker</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>projectMetrics</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 이벤트 구독
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=s1>&#39;BudgetAllocated&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>updateMetrics</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=s1>&#39;ExpenseRecorded&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>updateMetrics</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=s1>&#39;BudgetExceeded&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleBudgetExceeded</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>updateMetrics</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>projectId</span> <span class=o>=</span> <span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>projectId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=k>this</span><span class=p>.</span><span class=nx>projectMetrics</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=nx>projectId</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>projectMetrics</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>totalEvents</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>budgetEvents</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>expenseEvents</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>lastUpdated</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>metrics</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>projectMetrics</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>projectId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>metrics</span><span class=p>.</span><span class=nx>totalEvents</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>eventType</span> <span class=o>===</span> <span class=s1>&#39;BudgetAllocated&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>metrics</span><span class=p>.</span><span class=nx>budgetEvents</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>eventType</span> <span class=o>===</span> <span class=s1>&#39;ExpenseRecorded&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>metrics</span><span class=p>.</span><span class=nx>expenseEvents</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>metrics</span><span class=p>.</span><span class=nx>lastUpdated</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Analytics updated for project </span><span class=si>${</span><span class=nx>projectId</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span> <span class=nx>metrics</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>handleBudgetExceeded</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`ALERT: Budget exceeded for project </span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>projectId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 알림 서비스로 이벤트 전달, 대시보드 업데이트 등
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>getProjectMetrics</span><span class=p>(</span><span class=nx>projectId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>projectMetrics</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>projectId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 시스템 사용 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>async</span> <span class=kd>function</span> <span class=nx>demonstrateNetflixFinanceSystem</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 이벤트 브로커 초기화
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>eventBroker</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>EventBroker</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 서비스들 초기화
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>budgetService</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>BudgetManagementService</span><span class=p>(</span><span class=nx>eventBroker</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>expenseService</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ExpenseTrackingService</span><span class=p>(</span><span class=nx>eventBroker</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>analyticsService</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>AnalyticsService</span><span class=p>(</span><span class=nx>eventBroker</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 시나리오 실행
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;=== Netflix Content Finance System Demo ===\n&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 1. 새로운 콘텐츠 프로젝트 예산 할당
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>await</span> <span class=nx>budgetService</span><span class=p>.</span><span class=nx>allocateBudget</span><span class=p>(</span><span class=s1>&#39;project_001&#39;</span><span class=p>,</span> <span class=mi>1000000</span><span class=p>,</span> <span class=s1>&#39;Original Content&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 잠시 대기 (이벤트 처리 시간)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>await</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=nx>resolve</span> <span class=p>=&gt;</span> <span class=nx>setTimeout</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=mi>100</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 2. 제작 비용 기록
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>await</span> <span class=nx>expenseService</span><span class=p>.</span><span class=nx>recordExpense</span><span class=p>(</span><span class=s1>&#39;project_001&#39;</span><span class=p>,</span> <span class=mi>250000</span><span class=p>,</span> <span class=s1>&#39;Production&#39;</span><span class=p>,</span> <span class=s1>&#39;Studio A&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=nx>expenseService</span><span class=p>.</span><span class=nx>recordExpense</span><span class=p>(</span><span class=s1>&#39;project_001&#39;</span><span class=p>,</span> <span class=mi>150000</span><span class=p>,</span> <span class=s1>&#39;Post-Production&#39;</span><span class=p>,</span> <span class=s1>&#39;Edit House B&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=nx>expenseService</span><span class=p>.</span><span class=nx>recordExpense</span><span class=p>(</span><span class=s1>&#39;project_001&#39;</span><span class=p>,</span> <span class=mi>300000</span><span class=p>,</span> <span class=s1>&#39;Marketing&#39;</span><span class=p>,</span> <span class=s1>&#39;Agency C&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=nx>resolve</span> <span class=p>=&gt;</span> <span class=nx>setTimeout</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=mi>100</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 3. 예산 초과 상황 시뮬레이션
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>await</span> <span class=nx>expenseService</span><span class=p>.</span><span class=nx>recordExpense</span><span class=p>(</span><span class=s1>&#39;project_001&#39;</span><span class=p>,</span> <span class=mi>400000</span><span class=p>,</span> <span class=s1>&#39;Additional Scenes&#39;</span><span class=p>,</span> <span class=s1>&#39;Studio A&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=nx>resolve</span> <span class=p>=&gt;</span> <span class=nx>setTimeout</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=mi>100</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 4. 분석 결과 확인
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\n=== Final Analytics ===&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>analyticsService</span><span class=p>.</span><span class=nx>getProjectMetrics</span><span class=p>(</span><span class=s1>&#39;project_001&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 5. 이벤트 저장소 확인 (Event Sourcing)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\n=== Event Store (First 5 events) ===&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>eventBroker</span><span class=p>.</span><span class=nx>eventStore</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>5</span><span class=p>).</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>event</span><span class=p>,</span> <span class=nx>index</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>index</span> <span class=o>+</span> <span class=mi>1</span><span class=si>}</span><span class=sb>. </span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>eventType</span><span class=si>}</span><span class=sb> - </span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>timestamp</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 데모 실행
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>demonstrateNetflixFinanceSystem</span><span class=p>().</span><span class=k>catch</span><span class=p>(</span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=사례-7-netflix-의-금융-데이터-처리>사례 7: Netflix 의 금융 데이터 처리<a hidden class=anchor aria-hidden=true href=#사례-7-netflix-의-금융-데이터-처리>#</a></h4><p><strong>시스템 구성:</strong></p><ul><li>이벤트 생산자: 금융 데이터 생성 시스템</li><li>이벤트 브로커: Apache Kafka</li><li>이벤트 소비자: Spring Boot 기반 마이크로서비스</li></ul><pre class=mermaid>flowchart TD
    A[Finance Data Generator] --&gt; B[Apache Kafka]
    B --&gt; C[Spring Boot Microservice 1]
    B --&gt; D[Spring Boot Microservice 2]
    B --&gt; E[Spring Boot Microservice 3]
</pre><p><strong>워크플로우:</strong></p><ul><li>금융 데이터 생성 → Kafka 로 이벤트 발행 → 마이크로서비스가 이벤트 구독 및 처리</li><li>데이터 통합, 분석, 리포트 생성</li></ul><p><strong>EDA 의 역할:</strong></p><ul><li>실시간 데이터 처리, 확장성, 통합, 데이터 일관성 보장</li></ul><p><strong>EDA 유무 차이:</strong></p><ul><li>EDA 미적용 시: 데이터 동기화 지연, 확장성 한계, 통합 어려움</li><li>EDA 적용 시: 실시간 처리, 확장성, 통합, 데이터 일관성 보장</li></ul><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>고려 항목</strong></th><th><strong>설명</strong></th><th><strong>권장사항</strong></th></tr></thead><tbody><tr><td><strong>1. 이벤트 스키마 및 계약</strong></td><td>메시지 스키마 안정성</td><td>스키마 변경 시 하위 호환성과 소비자 영향 발생</td><td>Schema Registry(Avro/Protobuf) + backward/forward 호환 설계 적용</td></tr><tr><td></td><td>스키마 진화 관리</td><td>점진적인 스키마 변경 및 버전 관리 필요</td><td>CI/CD 연동 자동 검증, 버전 정책 수립, AsyncAPI 문서화 유지</td></tr><tr><td></td><td>메시지 크기/페이로드 설계</td><td>과도한 메시지 크기는 네트워크 부하 증가 및 처리 지연 유발</td><td>페이로드 최소화, 참조 기반 메시지 설계, 이벤트 계약 경량화</td></tr><tr><td><strong>2. 장애 처리 및 복구</strong></td><td>DLQ(Dead Letter Queue) 설계</td><td>반복 실패 메시지 축적 방지 및 재시도 정책 필요</td><td>TTL, Retry Count, 알림 포함한 DLQ 구성</td></tr><tr><td></td><td>재처리 및 이벤트 재생 전략</td><td>순서/중복/불일치 문제 발생 가능</td><td>이벤트 ID 기반 멱등성, Offset 관리, Replay 시점 분기점 설정 (snapshot) 사용</td></tr><tr><td></td><td>에러 처리 및 재시도 정책</td><td>처리 실패에 대한 유연한 대응 구조 필요</td><td>Retry + Backoff 전략, Circuit Breaker 적용</td></tr><tr><td><strong>3. 확장성 및 성능 최적화</strong></td><td>스케일링 전략</td><td>트래픽 증가에 대응한 소비자 그룹의 확장성 확보 필요</td><td>Consumer Group 수평 확장, Kafka Rebalancing 전략 설계</td></tr><tr><td></td><td>백프레셔 및 큐 관리</td><td>소비자 처리 속도 부족 시 큐 증가 및 장애 위험</td><td>큐 깊이 기반 처리 속도 조정, Adaptive Throttling, 모니터링 기반 Auto Scaling</td></tr><tr><td></td><td>파티션 및 데이터 할당 전략</td><td>파티션 불균형으로 인한 핫 파티션 발생 위험</td><td>키 기반 파티셔닝, 파티션 수 조정, 리밸런싱 도구 사용</td></tr><tr><td><strong>4. 일관성 및 트랜잭션 보장</strong></td><td>데이터 일관성 보장</td><td>중복, 유실, 순서 오류 등으로 인한 데이터 신뢰성 저하 가능</td><td>멱등성 처리, Outbox + CDC 패턴 적용</td></tr><tr><td></td><td>이벤트 순서 보장 (Ordering)</td><td>순서가 중요한 이벤트는 파티셔닝 및 메시지 정렬 필요</td><td>동일 키 기반 파티션 전략 유지, 메시지 ordering 확인 로직 추가</td></tr><tr><td><strong>5. 모니터링 및 가시성 확보</strong></td><td>분산 추적 및 트레이싱</td><td>비동기 메시지 흐름 추적 어려움</td><td>Correlation ID, OpenTelemetry, Jaeger, Zipkin 연동</td></tr><tr><td></td><td>모니터링 및 알람</td><td>장애 감지 및 이벤트 지연 추적 어려움</td><td>Prometheus + Grafana, Kafka Exporter 기반 메트릭 수집</td></tr><tr><td></td><td>이벤트 흐름 로깅 및 분석</td><td>운영 시 흐름 추적 및 장애 디버깅 필수</td><td>중앙 집중 로그 관리 (EFK/ELK), 표준 로깅 포맷 적용</td></tr><tr><td><strong>6. 보안 및 접근 제어</strong></td><td>이벤트 암호화 및 인증</td><td>이벤트 위조/탈취/도청 가능성 존재</td><td>TLS/mTLS 적용, OAuth2/JWT, 메시지 무결성 검증</td></tr><tr><td></td><td>권한 관리 및 접근 제어</td><td>구독자/발행자 간 접근 정책 미비 시 보안 취약</td><td>RBAC/IAM 정책, ACL 기반 구독 제어</td></tr><tr><td></td><td>민감 데이터 보호</td><td>개인정보 또는 중요 정보 포함 이벤트 전송 시 보안 요구</td><td>페이로드 내 암호화, 토큰화, 감사 로그 관리</td></tr><tr><td><strong>7. 테스트 및 운영 전략</strong></td><td>테스트 전략</td><td>비동기 흐름 테스트 어려움</td><td>Mock Broker, 통합 E2E 테스트 환경 구축</td></tr><tr><td></td><td>배포 전략</td><td>메시지 변경 시 중단 없는 배포 전략 필요</td><td>Rolling Update, 브로커/서비스 독립 배포 설계</td></tr><tr><td></td><td>비용 효율화 전략</td><td>저장소 및 리소스 사용 증가 → 운영비용 상승</td><td>Tiered Storage, 데이터 압축, Retention 정책 설정</td></tr><tr><td></td><td>조직 및 협업 표준화</td><td>이벤트 혼재 및 중복 발생 가능</td><td>이벤트 카탈로그, 이벤트 네이밍/스키마 표준 수립</td></tr></tbody></table><h4 id=핵심-요약>핵심 요약<a hidden class=anchor aria-hidden=true href=#핵심-요약>#</a></h4><ul><li><strong>가장 중요한 요소</strong>는 <em>스키마 안정성, 장애 복구 전략, 가시성 확보, 보안 강화</em> 네 가지.</li><li><strong>스키마 Registry</strong>와 <strong>멱등성 설계</strong>, <strong>DLQ 정책</strong>은 모든 메시징 시스템에서 필수적.</li><li><strong>운영 자동화</strong>를 위해 Prometheus, OpenTelemetry, Kafka Exporter 등의 도구 연동을 강력히 권장.</li></ul><h4 id=eda-기반-saas-설계-전략>EDA 기반 SaaS 설계 전략<a hidden class=anchor aria-hidden=true href=#eda-기반-saas-설계-전략>#</a></h4><h5 id=saas-와-eda-결합-시-설계-목적>SaaS 와 EDA 결합 시 설계 목적<a hidden class=anchor aria-hidden=true href=#saas-와-eda-결합-시-설계-목적>#</a></h5><ul><li><strong>테넌트 간 격리</strong>와 <strong>이벤트 흐름의 재사용성 확보</strong></li><li><strong>확장성 높은 모듈화</strong>, 이벤트 기반 플러그인/모듈 구성</li><li><strong>멀티테넌시 (Multi-tenancy)</strong> 환경에서도 <strong>비동기 확장</strong> 가능</li></ul><h5 id=설계-아키텍처>설계 아키텍처<a hidden class=anchor aria-hidden=true href=#설계-아키텍처>#</a></h5><pre class=mermaid>graph TD
    CLIENT[Multi-Tenant UI/API]
    CLIENT --&gt; SVC[&#34;Domain Service (Order/Invoice/Auth)&#34;]
    SVC --&gt; OUTBOX[(Outbox Table)]
    OUTBOX --&gt; CONNECT[CDC/Kafka Connect]
    CONNECT --&gt; BROKER[Kafka Broker]
    BROKER --&gt; AUDIT[Audit Service]
    BROKER --&gt; TENANT1[Tenant-1 Invoice Service]
    BROKER --&gt; TENANT2[Tenant-2 Invoice Service]
    BROKER --&gt; ML[Anomaly Detection ML Model]
</pre><h5 id=saas-설계-핵심-전략>SaaS 설계 핵심 전략<a hidden class=anchor aria-hidden=true href=#saas-설계-핵심-전략>#</a></h5><table><thead><tr><th>전략 항목</th><th>설명</th><th>적용 예시</th></tr></thead><tbody><tr><td>멀티테넌시 처리</td><td>이벤트에 <code>tenant_id</code> 필수 포함</td><td>Kafka Topic 내 Header 또는 Payload</td></tr><tr><td>도메인 분리</td><td>기능 단위 마이크로서비스 구성</td><td>주문, 결제, 알림을 분리</td></tr><tr><td>Outbox Pattern</td><td>데이터 정합성과 메시지 일관성 확보</td><td>DB → Outbox Table → Kafka</td></tr><tr><td>동적 Subscription</td><td>테넌트에 따라 동적 Consumer 구성</td><td>Runtime Topic Routing (Spring Cloud Stream 등)</td></tr><tr><td>확장성 기반 이벤트 필터링</td><td>토픽 필터, Consumer 분리</td><td>Kafka Streams, Kafka Router 활용</td></tr></tbody></table><h4 id=테스트-전략>테스트 전략<a hidden class=anchor aria-hidden=true href=#테스트-전략>#</a></h4><table><thead><tr><th>테스트 유형</th><th>테스트 대상</th><th>목적/전략</th><th>주요 도구 및 기법</th></tr></thead><tbody><tr><td><strong>유닛 테스트</strong></td><td>이벤트 핸들러 로직</td><td>단일 이벤트 처리 함수의 정확성 검증</td><td><code>pytest</code>, <code>unittest</code>, <code>MockKafkaConsumer</code>, mock 객체 주입</td></tr><tr><td><strong>통합 테스트</strong></td><td>Producer ↔ Broker ↔ Consumer 전체 흐름</td><td>실제 메시지 브로커 포함, end-to-end 이벤트 흐름 검증</td><td><code>Testcontainers</code>, <code>Embedded Kafka</code>, <code>Spring Test</code>, <code>FastAPI TestClient</code></td></tr><tr><td><strong>계약 테스트</strong></td><td>Producer ↔ Consumer 간 메시지 계약</td><td>메시지 스키마 호환성 및 계약 위반 방지</td><td><code>Pact</code>, <code>AsyncAPI</code>, <code>Kafka Schema Registry</code></td></tr><tr><td><strong>회귀 테스트</strong></td><td>과거 이벤트의 재처리 검증</td><td>기존 이벤트 처리 로직에 대한 후행 이슈 방지</td><td><code>Event Replay</code>, <code>Kafka Replay</code>, <code>Event Store Replay</code></td></tr><tr><td><strong>성능 테스트</strong></td><td>Broker 처리량, Consumer 처리 속도</td><td>처리량/지연/스루풋 측정, 병목 파악</td><td><code>k6</code>, <code>Locust</code>, <code>kafka-producer-perf-test.sh</code>, <code>Gatling</code></td></tr><tr><td><strong>Chaos 테스트</strong></td><td>브로커 및 컨슈머 장애 대응 시나리오</td><td>장애 발생 시 복원력과 격리성 확인</td><td><code>Gremlin</code>, <code>Chaos Monkey</code>, 네트워크 차단 시뮬레이션 등</td></tr></tbody></table><h5 id=테스트-전략-적용-포인트>테스트 전략 적용 포인트<a hidden class=anchor aria-hidden=true href=#테스트-전략-적용-포인트>#</a></h5><table><thead><tr><th>항목</th><th>전략/설명</th><th>권장 사항</th></tr></thead><tbody><tr><td><strong>스키마 안정성</strong></td><td>Producer/Consumer 간 메시지 호환성 테스트</td><td><code>Schema Registry</code>, <code>Mock Registry</code>, 계약 테스트 통합 활용</td></tr><tr><td><strong>이벤트 순서 보장</strong></td><td>파티션 키 기준 순서 테스트 (FIFO 보장 여부)</td><td>동일 <code>partition key</code> 로 연속 메시지 발행</td></tr><tr><td><strong>동시성/경쟁 조건 탐지</strong></td><td>Consumer 그룹 내 병렬 처리 시 Race Condition 검증</td><td>다중 컨슈머 환경 구성, 처리 순서 로깅 후 분석</td></tr><tr><td><strong>에러 및 복원력</strong></td><td>컨슈머 실패 시 DLQ 이동, 재시도 전략 테스트</td><td><code>Retry Handler</code>, <code>Dead Letter Queue</code>, <code>Circuit Breaker</code> 사용</td></tr><tr><td><strong>성능 임계 테스트</strong></td><td>고트래픽 환경에서 처리량 한계 및 메시지 지연 시간 측정</td><td>대용량 이벤트 발행, 메시지 Queue 적체 시나리오 구성</td></tr></tbody></table><h5 id=유닛-테스트-코드-검토-및-개선-python-기준>유닛 테스트 코드 검토 및 개선 (Python 기준)<a hidden class=anchor aria-hidden=true href=#유닛-테스트-코드-검토-및-개선-python-기준>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1> 1</a>
</span><span class=lnt id=hl-26-2><a class=lnlinks href=#hl-26-2> 2</a>
</span><span class=lnt id=hl-26-3><a class=lnlinks href=#hl-26-3> 3</a>
</span><span class=lnt id=hl-26-4><a class=lnlinks href=#hl-26-4> 4</a>
</span><span class=lnt id=hl-26-5><a class=lnlinks href=#hl-26-5> 5</a>
</span><span class=lnt id=hl-26-6><a class=lnlinks href=#hl-26-6> 6</a>
</span><span class=lnt id=hl-26-7><a class=lnlinks href=#hl-26-7> 7</a>
</span><span class=lnt id=hl-26-8><a class=lnlinks href=#hl-26-8> 8</a>
</span><span class=lnt id=hl-26-9><a class=lnlinks href=#hl-26-9> 9</a>
</span><span class=lnt id=hl-26-10><a class=lnlinks href=#hl-26-10>10</a>
</span><span class=lnt id=hl-26-11><a class=lnlinks href=#hl-26-11>11</a>
</span><span class=lnt id=hl-26-12><a class=lnlinks href=#hl-26-12>12</a>
</span><span class=lnt id=hl-26-13><a class=lnlinks href=#hl-26-13>13</a>
</span><span class=lnt id=hl-26-14><a class=lnlinks href=#hl-26-14>14</a>
</span><span class=lnt id=hl-26-15><a class=lnlinks href=#hl-26-15>15</a>
</span><span class=lnt id=hl-26-16><a class=lnlinks href=#hl-26-16>16</a>
</span><span class=lnt id=hl-26-17><a class=lnlinks href=#hl-26-17>17</a>
</span><span class=lnt id=hl-26-18><a class=lnlinks href=#hl-26-18>18</a>
</span><span class=lnt id=hl-26-19><a class=lnlinks href=#hl-26-19>19</a>
</span><span class=lnt id=hl-26-20><a class=lnlinks href=#hl-26-20>20</a>
</span><span class=lnt id=hl-26-21><a class=lnlinks href=#hl-26-21>21</a>
</span><span class=lnt id=hl-26-22><a class=lnlinks href=#hl-26-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># --- 이벤트 핸들러 ---</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>handle_order_created</span><span class=p>(</span><span class=n>event</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>event</span><span class=p>,</span> <span class=nb>dict</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&#34;status&#34;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>event</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=s2>&#34;Invalid event format&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>event</span><span class=p>[</span><span class=s2>&#34;status&#34;</span><span class=p>]</span> <span class=o>!=</span> <span class=s2>&#34;ORDER_CREATED&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;Invalid event status&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 실제 비즈니스 로직 예: 재고 차감</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;Handled order </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;order_id&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># --- 테스트 코드 ---</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>test_handle_order_created_valid</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>event</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;order_id&#34;</span><span class=p>:</span> <span class=s2>&#34;ORD-001&#34;</span><span class=p>,</span> <span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;ORDER_CREATED&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>handle_order_created</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>assert</span> <span class=n>result</span> <span class=o>==</span> <span class=s2>&#34;Handled order ORD-001&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>test_handle_order_created_invalid_status</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>event</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;order_id&#34;</span><span class=p>:</span> <span class=s2>&#34;ORD-002&#34;</span><span class=p>,</span> <span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;CANCELLED&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>handle_order_created</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>assert</span> <span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&#34;Invalid event status&#34;</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>✅ <strong>의의</strong>:</p><ul><li>이벤트 유효성 검증 추가</li><li>예외 케이스 테스트 포함</li><li>단위 테스트의 독립성과 재현성을 강화</li></ul></blockquote><h4 id=퍼블리싱-전달-보증-수준-delivery-guarantees>퍼블리싱 전달 보증 수준 (Delivery Guarantees)<a hidden class=anchor aria-hidden=true href=#퍼블리싱-전달-보증-수준-delivery-guarantees>#</a></h4><p>각 메시징 시스템은 서로 다른 전달 보증 수준을 제공하며, 보증 수준 설계 시 중요한 고려사항이다:</p><table><thead><tr><th>보증 수준</th><th>정의</th><th>보장 조건 및 전제</th><th>실현 메커니즘</th><th>대표 활용 시나리오</th><th>예시 기술</th></tr></thead><tbody><tr><td><strong>At-most-once</strong></td><td><strong>최대 한 번 전달</strong> (손실 허용)</td><td>네트워크 오류, Consumer 다운 시 손실 발생 가능</td><td>- 메시지 전송 후 즉시 삭제<br>- Ack 없이 전송<br>- Retry 없음</td><td>- 로그 전송<br>- 실시간 모니터링<br>- Push 알림 등 손실 허용 가능한 상황</td><td>UDP 기반 전송<br>Kafka (acks=0)</td></tr><tr><td><strong>At-least-once</strong></td><td><strong>최소 한 번 이상 전달</strong> (중복 허용)</td><td>- 메시지 손실 없이 도착 보장<br>- 중복 발생 가능성 존재</td><td>- 메시지 재시도 (Retry)<br>- Ack 기반 수신 확인<br>- 브로커 메시지 저장 유지</td><td>- 결제 처리<br>- 주문 시스템<br>- 데이터 적재 (중복 필터링 가능 시)</td><td>Kafka (acks=1), RabbitMQ, SQS</td></tr><tr><td><strong>Exactly-once</strong></td><td><strong>정확히 한 번 전달 보장</strong></td><td>- 메시지 중복도, 손실도 모두 방지<br>- 시스템 전반의 idempotency 필요</td><td>- Idempotent Producer 설정<br>- Transactional Consumer<br>- 메시지 상태 관리, 중복 제거 로직 필요</td><td>- 금융 이체<br>- 분산 트랜잭션<br>- 이벤트 소싱 기반 영속성 처리</td><td>Kafka EOS<br>Kafka Streams<br>SQS FIFO + deduplication ID</td></tr></tbody></table><h5 id=핵심-비교-요약>핵심 비교 요약<a hidden class=anchor aria-hidden=true href=#핵심-비교-요약>#</a></h5><table><thead><tr><th>항목</th><th>At-most-once</th><th>At-least-once</th><th>Exactly-once</th></tr></thead><tbody><tr><td><strong>신뢰도</strong></td><td>낮음 (손실 가능)</td><td>중간 (중복 가능)</td><td>높음 (중복/손실 모두 방지)</td></tr><tr><td><strong>성능</strong></td><td>매우 빠름</td><td>중간</td><td>상대적으로 낮음 (복잡한 처리 필요)</td></tr><tr><td><strong>복잡도</strong></td><td>낮음</td><td>중간</td><td>높음</td></tr><tr><td><strong>실현 비용</strong></td><td>거의 없음</td><td>재시도, 저장소 필요</td><td>트랜잭션 로그, 상태 관리 등 부가 시스템 요구</td></tr><tr><td><strong>적합 용도</strong></td><td>비핵심 정보, 손실 허용</td><td>핵심 정보, 중복 허용</td><td>비즈니스 핵심 정보, 중복/손실 모두 금지</td></tr></tbody></table><h5 id=kafka---전달-보증-구현-방법>Kafka - 전달 보증 구현 방법<a hidden class=anchor aria-hidden=true href=#kafka---전달-보증-구현-방법>#</a></h5><table><thead><tr><th>보증 수준</th><th>설정 항목</th><th>설정 방법 및 설명</th></tr></thead><tbody><tr><td><strong>At-most-once</strong></td><td><code>acks=0</code></td><td>프로듀서가 메시지 전송 후 Ack 기다리지 않고 즉시 성공 처리 (손실 가능)</td></tr><tr><td></td><td><code>retries=0</code></td><td>재시도 없이 실패 시 메시지 손실 허용</td></tr><tr><td><strong>At-least-once</strong></td><td><code>acks=1</code> 또는 <code>acks=all</code></td><td>브로커가 수신 확인을 해야 전송 성공 처리 (<code>acks=all</code> 은 더 안정적)</td></tr><tr><td></td><td><code>enable.auto.commit=false</code></td><td>컨슈머가 명시적으로 오프셋 커밋 (처리 실패 시 재시도 가능)</td></tr><tr><td></td><td><code>retries > 0</code></td><td>메시지 전송 실패 시 자동 재시도</td></tr><tr><td><strong>Exactly-once</strong></td><td><code>enable.idempotence=true</code></td><td>동일 메시지 재전송 시 중복 방지</td></tr><tr><td></td><td><code>transactional.id</code></td><td>트랜잭션 기반으로 프로듀서 구성</td></tr><tr><td></td><td>컨슈머 측 <code>read_committed</code> 설정</td><td>커밋된 메시지만 읽도록 설정</td></tr></tbody></table><h5 id=rabbitmq---전달-보증-구현-방법>RabbitMQ - 전달 보증 구현 방법<a hidden class=anchor aria-hidden=true href=#rabbitmq---전달-보증-구현-방법>#</a></h5><table><thead><tr><th>보증 수준</th><th>설정 항목</th><th>설정 방법 및 설명</th></tr></thead><tbody><tr><td><strong>At-most-once</strong></td><td><code>auto-ack=true</code></td><td>컨슈머가 수신 즉시 Ack 전송 → 처리 실패 시 재시도 불가 (손실 허용)</td></tr><tr><td></td><td><code>durable=false</code>, <code>persistent=false</code></td><td>큐 및 메시지를 메모리 기반으로 유지</td></tr><tr><td><strong>At-least-once</strong></td><td><code>auto-ack=false</code></td><td>컨슈머가 처리 완료 후 수동 Ack 전송</td></tr><tr><td></td><td><code>durable=true</code>, <code>persistent=true</code></td><td>큐와 메시지를 디스크에 저장</td></tr><tr><td></td><td><code>prefetch > 0</code></td><td>QoS 제어로 병렬 처리 제어</td></tr><tr><td><strong>Exactly-once</strong></td><td>명시적 지원 없음 (RabbitMQ 자체 한계)</td><td>대신 <strong>중복 허용 후 Idempotent Consumer</strong> 로 구현 필요</td></tr><tr><td></td><td><code>message deduplication</code> 로직 수동 구현</td><td>메시지 ID 기반 중복 방지 (Redis/DB 활용 등)</td></tr></tbody></table><h4 id=컴플라이언스-보장-compliance-assurance>컴플라이언스 보장 (Compliance Assurance)<a hidden class=anchor aria-hidden=true href=#컴플라이언스-보장-compliance-assurance>#</a></h4><table><thead><tr><th><strong>카테고리</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th><th><strong>권장 전략 및 도구 예시</strong></th></tr></thead><tbody><tr><td><strong>1. 데이터 감사 및 추적성</strong></td><td>이벤트 이력 관리 (Audit Trail)</td><td>모든 이벤트의 생성, 발행, 소비 내역을 시간 순으로 기록하여 변경 추적 및 감사 대응 가능</td><td>Kafka Topic Logging, Event Store, Kafka Connect + Sink Connectors</td></tr><tr><td></td><td>감사 로그 및 액세스 추적</td><td>누가 언제 어떤 이벤트를 처리했는지에 대한 상세 로그 확보</td><td>SIEM 연동 (예: ELK, Splunk), Prometheus Alert + Loki</td></tr><tr><td><strong>2. 개인정보 및 민감정보 보호</strong></td><td>PII/PHI 보호</td><td>개인식별정보, 의료정보 등을 이벤트 내에서 암호화 또는 토큰화하여 보호</td><td>AES256 암호화, Vault, Macaroon Token, Field-Level Encryption</td></tr><tr><td></td><td>스키마 기반 보호</td><td>스키마를 활용하여 민감 필드에 대한 정책 기반 마스킹/제한</td><td>Confluent Schema Registry + Field Rule 정책</td></tr><tr><td><strong>3. 인증 및 접근 통제</strong></td><td>인증/인가 및 권한 관리</td><td>이벤트 브로커, Consumer, Producer 간의 접근 권한을 엄격히 관리</td><td>Kafka ACL, OAuth2.0, JWT, IAM 정책 기반 제어</td></tr><tr><td></td><td>멀티 테넌시 지원</td><td>사용자/조직 별 격리된 리소스와 권한 정책 제공</td><td>Topic per Tenant, Resource Quota, Namespace 기반 격리</td></tr><tr><td><strong>4. 데이터 보존 및 삭제 정책</strong></td><td>이벤트 보존 정책 설정</td><td>법적/규제 요건에 따라 보존 주기 관리 (예: 1 년, 7 년)</td><td>Kafka Retention 설정, Tiered Storage, TTL 기반 Cleanup</td></tr><tr><td></td><td>규제 기반 데이터 삭제</td><td>데이터 삭제 요청 (예: GDPR 의 Right to be Forgotten) 에 따른 제거 절차 구현</td><td>데이터 제거 워크플로우 정의, Kafka Tombstone 메시지 활용</td></tr><tr><td><strong>5. 지역 및 규제 준수</strong></td><td>데이터 주권 및 지역 제한</td><td>특정 지역 내 데이터 저장 및 전송 요구 (GDPR, HIPAA, 등)</td><td>Region 기반 Partition 분리, Cross-Region 암호화 Replication</td></tr><tr><td></td><td>국제 규제 대응</td><td>ISO27001, SOC2, HIPAA, GDPR 등 글로벌 기준에 대한 시스템 대응</td><td>감사 프로세스 문서화, CSP 규제 대응 체크리스트, 데이터 접근 로깅</td></tr></tbody></table><h3 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>최적화 항목</strong></th><th><strong>설명</strong></th><th><strong>권장사항</strong></th></tr></thead><tbody><tr><td><strong>성능</strong></td><td>배치 처리 (Batching)</td><td>처리량을 높이고 네트워크 호출을 줄이기 위해 다수의 메시지를 일괄 처리</td><td>적응형 배치 크기 조정, 처리 지연 한계 설정</td></tr><tr><td></td><td>압축 (Compression)</td><td>전송 메시지의 크기를 줄여 네트워크 대역폭과 I/O 부담을 줄임</td><td>Snappy, LZ4, ZSTD 등 경량 압축 알고리즘</td></tr><tr><td></td><td>캐시 (Caching)</td><td>반복적인 데이터 조회를 줄이고 처리 속도를 개선</td><td>CQRS read-side 에 Redis 등 캐시 계층 도입</td></tr><tr><td></td><td>메시지 필터링</td><td>불필요한 메시지 처리 방지로 소비자 부하 경감</td><td>브로커 수준 필터링 또는 Subscription 조건 지정</td></tr><tr><td></td><td>브로커 튜닝</td><td>큐 깊이, I/O 성능, 스레드 풀 설정 등을 통한 메시지 처리 최적화</td><td>Kafka 설정 조정 (num.network.threads 등)</td></tr><tr><td><strong>확장성</strong></td><td>파티셔닝 전략 (Partitioning)</td><td>메시지를 키 기반으로 파티셔닝하여 병렬 처리 성능과 확장성 확보</td><td>비즈니스 키 기반 파티션 키 설계, 핫스팟 방지</td></tr><tr><td></td><td>Consumer Group 병렬 처리</td><td>Consumer 를 여러 인스턴스로 병렬화하여 메시지 처리 속도 증가</td><td>Consumer Group 구성, Partition 수와 동기화</td></tr><tr><td></td><td>Auto Scaling</td><td>트래픽 변화에 따라 자동으로 인스턴스를 확장 또는 축소</td><td>큐 깊이, CPU, 메시지 처리율 기반 스케일링 트리거 설정</td></tr><tr><td></td><td>로드 밸런싱</td><td>다양한 인스턴스에 부하를 균등 분산</td><td>라운드로빈, 가중치 기반 로드 밸런서 구성</td></tr><tr><td><strong>신뢰성 및 안정성</strong></td><td>이벤트 순서 보장</td><td>분산 처리 환경에서 순서를 보장해야 하는 요구사항 대응</td><td>Kafka 파티션 단위 순서 보장, 키 기반 순서 설계</td></tr><tr><td></td><td>멱등성 (Idempotency)</td><td>동일 메시지 중복 처리 방지를 통해 중복 트랜잭션 발생 방지</td><td>이벤트 ID 사용, 컨슈머 측 중복 체크 로직 구현</td></tr><tr><td></td><td>복제 및 내결함성</td><td>브로커 장애 및 데이터 손실 방지</td><td>Kafka 3-way replication, 페일오버 구성</td></tr><tr><td></td><td>장애 복구 및 재처리</td><td>실패 메시지에 대한 DLQ 처리 및 재시도 전략</td><td>DLQ 구성, Retry 정책, Backoff 설정</td></tr><tr><td></td><td>이벤트 크기 제한</td><td>과도하게 큰 이벤트가 브로커 성능을 저하하지 않도록 제한</td><td>payload 크기 제한, 압축 활용</td></tr><tr><td><strong>운영 및 관찰성</strong></td><td>모니터링 및 경고</td><td>지연, 오류율, 처리율 등 주요 지표에 대한 실시간 모니터링</td><td>Prometheus + Grafana 대시보드, Alert 설정</td></tr><tr><td></td><td>추적 (Tracing)</td><td>이벤트 흐름에 대한 분산 추적 가능</td><td>Correlation ID, OpenTelemetry, Jaeger</td></tr><tr><td></td><td>백프레셔 (Backpressure)</td><td>소비자가 따라가지 못할 때 시스템 전체 과부하 방지</td><td>Reactive Streams, 메시지 버퍼 적용, Rate Limiter</td></tr><tr><td></td><td>부하 테스트 및 예측</td><td>실제 트래픽을 반영한 사전 테스트로 병목 탐지</td><td>Gatling, k6, chaos test 구성</td></tr><tr><td><strong>메시지 계약 및 일관성</strong></td><td>메시지 스키마 관리</td><td>생산자 - 소비자 간 메시지 계약 안정성 유지</td><td>Schema Registry, 버전 관리, 호환성 정책</td></tr><tr><td></td><td>정확성 보장 전송 방식</td><td>메시지가 중복되거나 누락되지 않도록 전송 전략 정의</td><td>At-least-once 기본, Exactly-once 필요 시 트랜잭션 연계</td></tr><tr><td></td><td>메시지 정리 전략</td><td>처리 완료된 메시지의 보관 주기 및 스토리지 최적화</td><td>Kafka retention 설정, 압축 주기, 아카이빙 정책</td></tr></tbody></table><h4 id=핵심-정리>핵심 정리<a hidden class=anchor aria-hidden=true href=#핵심-정리>#</a></h4><table><thead><tr><th>분류</th><th>핵심 체크포인트</th></tr></thead><tbody><tr><td>설계 관점</td><td>파티셔닝, 메시지 크기, 이벤트 모델링</td></tr><tr><td>처리 관점</td><td>병렬성, 배치, 캐싱, 필터링, 압축</td></tr><tr><td>운영 관점</td><td>모니터링, 트레이싱, DLQ, 백프레셔 대응</td></tr><tr><td>확장/복구 관점</td><td>오토스케일링, 페일오버, 복제, 멱등성, 정확한 재처리 설계</td></tr><tr><td>안정성 관점</td><td>메시지 스키마 안정성, 순서 보장, 트랜잭션 보장 수준 (at-least, exactly)</td></tr></tbody></table><h3 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>핵심 항목</strong></th><th><strong>설명 및 기술적 적절성 검토</strong></th></tr></thead><tbody><tr><td><strong>아키텍처 특성</strong></td><td>이벤트 기반 아키텍처 (EDA)</td><td>비동기성</td><td>생산자와 소비자 간 시간적 분리로 시스템 유연성과 확장성 확보 가능. 대기 없이 처리가 가능한 구조.</td></tr><tr><td></td><td></td><td>확장성</td><td>리스너 또는 소비자 추가가 쉬워 수평적 확장에 유리. 마이크로서비스 구조와 궁합이 좋음.</td></tr><tr><td></td><td></td><td>장애 격리</td><td>생산자와 소비자의 결합도가 낮아 개별 실패가 전체 시스템에 영향을 덜 미침.</td></tr><tr><td></td><td></td><td>실시간성</td><td>이벤트 발생과 동시에 처리 흐름 시작 가능. 스트리밍 처리 기반 설계에 적합.</td></tr><tr><td><strong>패턴 및 설계</strong></td><td>Event Sourcing</td><td>이벤트 기반 상태 재구성</td><td>모든 변경 사항을 이벤트로 저장하여 상태 복구, 감사 추적 용이. Snapshot 최적화 필요.</td></tr><tr><td></td><td>CQRS</td><td>명령 (Command) 과 조회 (Query) 분리</td><td>성능 최적화, 확장성 향상에 기여. 읽기/쓰기 모델 독립 유지 가능.</td></tr><tr><td></td><td>Event Carried State Transfer</td><td>이벤트에 상태를 포함하여 전달</td><td>수신자가 자체 상태를 유지하지 않고 처리 가능. 분산 환경에서의 상태 동기화에 적합.</td></tr><tr><td></td><td>Saga Pattern</td><td>분산 트랜잭션 관리 패턴</td><td>Orchestration 또는 Choreography 방식으로 마이크로서비스 간 트랜잭션 보장.</td></tr><tr><td></td><td>Outbox Pattern</td><td>DB 트랜잭션 내 메시지 발행</td><td>DB 와 메시지 전송의 원자성 보장. Kafka Connect 등과 연계해 안정성 확보.</td></tr><tr><td><strong>도구 및 플랫폼</strong></td><td>Apache Kafka</td><td>분산 스트리밍 플랫폼, Streams, KSQL 등</td><td>고성능/확장성/내결함성 기반 대용량 이벤트 처리. 거의 업계 표준.</td></tr><tr><td></td><td>Apache Pulsar</td><td>클라우드 네이티브 메시징, Geo-Replication</td><td>Kafka 보다 다양한 멀티테넌시 기능. 성능/기능 균형.</td></tr><tr><td></td><td>RabbitMQ</td><td>AMQP 기반 메시지 브로커</td><td>실시간 처리와 라우팅에 적합. 복잡한 라우팅 및 보안에 유리.</td></tr><tr><td></td><td>NATS</td><td>경량 메시징 시스템</td><td>마이크로서비스 사이 고속 통신용으로 설계. 낮은 지연 시간에 강점.</td></tr><tr><td></td><td>Event Store</td><td>이벤트 영속 저장소</td><td>Event Sourcing 기반의 스토리지로 Snapshot 지원 필수.</td></tr><tr><td></td><td>Event Mesh</td><td>분산 이벤트 브로커 네트워크</td><td>서로 다른 메시지 시스템과 클라우드/온프레미스 환경 통합에 강력함. Solace, Confluent 등이 지원.</td></tr><tr><td><strong>운영 및 모니터링</strong></td><td>Distributed Tracing</td><td>Jaeger, Zipkin, OpenTelemetry</td><td>이벤트 흐름 추적 및 디버깅. 메시지 기반 구조에서 추적 필수.</td></tr><tr><td></td><td>Observability</td><td>로그, 메트릭, 트레이스 통합</td><td>OpenTelemetry 기반 수집. 이벤트 손실/지연 모니터링에 유리.</td></tr><tr><td></td><td>보안</td><td>TLS, OAuth, ACL</td><td>이벤트 전송 시 암호화 및 권한 제어는 필수. 메시지 기반 보안 취약점 대비 필요.</td></tr><tr><td><strong>기술 트렌드</strong></td><td>Serverless EDA</td><td>AWS Lambda, Azure Functions</td><td>이벤트 발생에 반응하여 실행되는 함수 기반 처리. 비용 효율적이며 운영 단순.</td></tr><tr><td></td><td>AI/ML 통합</td><td>실시간 스트림 처리에서 추론</td><td>이벤트 흐름에서 실시간 추론 모델을 직접 실행. 스트림 기반 ML 과 궁합.</td></tr><tr><td></td><td>Edge Computing</td><td>IoT/5G 기반 엣지 이벤트 처리</td><td>중앙 서버가 아닌 말단에서 이벤트 처리 가능. 지연 최소화.</td></tr><tr><td></td><td>Multi-Cloud EDA</td><td>Cross-Cloud 메시징</td><td>이벤트 Mesh + 클라우드 간 라우팅 전략 필수. 장애 회복 및 지리적 확장에 유리.</td></tr><tr><td></td><td>Cloud Native</td><td>Kubernetes, Service Mesh</td><td>이벤트 기반 아키텍처를 컨테이너 환경에 통합. Sidecar 패턴과 함께 운영 최적화.</td></tr><tr><td><strong>메시징 패턴</strong></td><td>Pub/Sub</td><td>생산자 - 소비자 간 비동기, 다대다 모델</td><td>느슨한 결합, 확장성 핵심. 이벤트 기반 시스템의 근간.</td></tr></tbody></table><h3 id=주제와-관련하여-반드시-학습해야할-내용>주제와 관련하여 반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-반드시-학습해야할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>핵심 항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>1. 핵심 개념</strong></td><td>이벤트 기반 아키텍처 (EDA)</td><td>이벤트, Producer, Consumer, Broker, 비동기, 디커플링</td><td>시스템 구성 요소 간 느슨한 결합을 통해 확장성과 유연성을 확보하는 아키텍처 스타일</td></tr><tr><td></td><td>메시징 패턴</td><td>Pub/Sub, Point-to-Point</td><td>메시지 전달 방식으로 다수 소비자 또는 단일 소비자 구조 선택 가능</td></tr><tr><td></td><td>비동기 프로그래밍</td><td>Callback, Promise, Future, Async/Await</td><td>시간적으로 분리된 이벤트 기반 처리 메커니즘</td></tr><tr><td></td><td>분산 시스템 기초 이론</td><td>CAP, ACID vs BASE, Consistency Models</td><td>분산 환경에서의 트레이드오프 이해는 메시징 기반 설계에 필수</td></tr><tr><td><strong>2. 아키텍처 패턴</strong></td><td>CQRS</td><td>Command-Query 분리</td><td>쓰기와 읽기를 분리하여 확장성, 성능, 유지보수성 향상</td></tr><tr><td></td><td>Event Sourcing</td><td>Event Log, Replay</td><td>상태를 이벤트의 흐름으로 구성하여 재구성 가능</td></tr><tr><td></td><td>Saga Pattern</td><td>보상 트랜잭션, 롱런 트랜잭션 처리</td><td>분산 시스템에서 롤백 불가능한 트랜잭션 관리</td></tr><tr><td></td><td>Outbox Pattern</td><td>DB 와 메시지 브로커 간 정합성 확보</td><td>트랜잭션 로그 기반 이벤트 발행 전략</td></tr><tr><td></td><td>SEDA</td><td>단계별 큐 분리 구조</td><td>각 처리 단계를 분리하여 유연한 비동기 처리 구조 구성</td></tr><tr><td><strong>3. 이벤트 설계</strong></td><td>이벤트 모델링</td><td>Domain Event vs Integration Event</td><td>내부 도메인 로직과 외부 통합 메시지를 구분하여 설계</td></tr><tr><td></td><td>이벤트 스키마 관리</td><td>Schema Registry, Schema Evolution</td><td>메시지 포맷의 버전 관리 및 하위 호환성 확보</td></tr><tr><td></td><td>멱등성 / 중복 방지</td><td>Idempotency Token, Deduplication</td><td>중복 이벤트 처리 방지 및 안전한 재처리 가능성 확보</td></tr><tr><td><strong>4. 메시지 브로커</strong></td><td>주요 브로커 기술 비교</td><td>Kafka, RabbitMQ, Pulsar, NATS</td><td>메시징 기술별 성능, 보장 수준, 프로토콜 특성 비교</td></tr><tr><td></td><td>Kafka 구조 심화</td><td>Topic, Partition, Consumer Group</td><td>병렬 처리, 확장성 확보를 위한 핵심 구조 이해</td></tr><tr><td></td><td>Routing & Filtering</td><td>Topic Routing, Header 기반 필터링</td><td>이벤트 전달 경로 설정 및 관심사 분리 구현</td></tr><tr><td><strong>5. 운영 및 신뢰성</strong></td><td>메시지 추적 및 장애 대응</td><td>Correlation ID, DLQ, Retry, Backpressure</td><td>안정적 처리를 위한 장애 인식 및 복구 설계</td></tr><tr><td></td><td>모니터링 & 관찰 가능성</td><td>Metrics, Logging, Tracing (Jaeger, Prometheus)</td><td>이벤트 흐름, 지연, 에러에 대한 시각적 추적 가능성 확보</td></tr><tr><td></td><td>보안 및 인증</td><td>TLS 암호화, OAuth2, 인증/인가</td><td>메시징 전송의 무결성과 안전성 확보</td></tr><tr><td></td><td>정확성 보장</td><td>At-least-once, At-most-once, Exactly-once</td><td>처리 보장 수준에 따른 전략 및 보상 설계</td></tr><tr><td><strong>6. 연계 기술 및 배포</strong></td><td>DevOps 및 배포 환경</td><td>CI/CD, IaC, Canary, Blue-Green</td><td>메시징 구성 요소의 지속적 배포 및 관리</td></tr><tr><td></td><td>컨테이너 및 오케스트레이션</td><td>Docker, Kubernetes</td><td>메시지 브로커 및 소비자 서비스의 배포 및 확장</td></tr><tr><td></td><td>스트림 처리 엔진</td><td>Kafka Streams, Apache Flink</td><td>이벤트 스트림 기반의 실시간 분석과 처리 기술</td></tr><tr><td></td><td>프레임워크 통합</td><td>Spring Cloud Stream, NestJS Event Modules</td><td>언어 및 플랫폼 기반 프레임워크 연계</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th><strong>카테고리</strong></th><th><strong>용어</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>핵심 개념</strong></td><td>Event (이벤트)</td><td>시스템 내에서 발생하는 의미 있는 상태 변화 또는 비즈니스 사건을 나타내는 불변 메시지 객체</td></tr><tr><td></td><td>Event Producer (발행자)</td><td>이벤트를 생성하고 브로커에 발행하는 컴포넌트</td></tr><tr><td></td><td>Event Consumer (소비자)</td><td>이벤트를 구독하여 처리하는 컴포넌트</td></tr><tr><td></td><td>Event Broker / Bus (브로커)</td><td>이벤트를 중계, 라우팅, 전달하는 미들웨어 (예: Kafka, RabbitMQ 등)</td></tr><tr><td></td><td>Event Store (이벤트 저장소)</td><td>이벤트를 영속적으로 저장하는 로그 기반 저장소</td></tr><tr><td><strong>아키텍처 스타일</strong></td><td>Event-Driven Architecture</td><td>느슨하게 결합된 컴포넌트가 이벤트를 통해 비동기적으로 상호작용하는 아키텍처</td></tr><tr><td></td><td>Event Mesh</td><td>분산 환경에서 여러 이벤트 브로커를 연결해 메시지를 전파하는 메시징 인프라</td></tr><tr><td></td><td>Broker Topology</td><td>중앙 브로커 기반의 메시지 라우팅 구조</td></tr><tr><td></td><td>Mediator Topology</td><td>중앙 중재자가 워크플로우나 로직을 조정하는 구조 (ex: BPM, Orchestration 등)</td></tr><tr><td><strong>아키텍처 패턴</strong></td><td>Event Sourcing</td><td>시스템 상태 변경을 이벤트로 기록하여 상태를 복원할 수 있게 하는 아키텍처 패턴</td></tr><tr><td></td><td>CQRS</td><td>Command(명령) 와 Query(조회) 를 분리하여 확장성과 성능을 개선하는 패턴</td></tr><tr><td></td><td>Saga Pattern</td><td>분산 트랜잭션에서 보상 트랜잭션 기반으로 일관성을 유지하는 장기 실행 트랜잭션 처리 패턴</td></tr><tr><td></td><td>Outbox Pattern</td><td>데이터베이스와 이벤트 발행 사이의 정합성을 확보하기 위한 설계 기법</td></tr><tr><td></td><td>SEDA (Staged Event-Driven Arch.)</td><td>각 단계 (stage) 를 독립된 큐로 분리하여 병렬성과 처리 유연성을 높이는 구조</td></tr><tr><td><strong>메시징 기술 및 도구</strong></td><td>Apache Kafka</td><td>분산 메시징 플랫폼. 고성능, 파티셔닝, 스트리밍 처리에 적합</td></tr><tr><td></td><td>RabbitMQ</td><td>AMQP 기반의 메시지 브로커. 라우팅 유연성과 신뢰성 높은 전송 지원</td></tr><tr><td></td><td>Schema Registry</td><td>메시지 스키마를 중앙에서 관리하고 호환성을 보장하기 위한 시스템</td></tr><tr><td></td><td>AsyncAPI</td><td>비동기 메시징 시스템의 계약 및 문서를 정의하기 위한 오픈 표준</td></tr><tr><td></td><td>Jaeger</td><td>트레이싱을 위한 오픈소스 도구로, 이벤트 흐름 추적에 사용됨</td></tr><tr><td><strong>운영 및 성능 기법</strong></td><td>DLQ (Dead Letter Queue)</td><td>처리 실패한 메시지를 별도로 보관하여 재처리나 문제 분석에 활용</td></tr><tr><td></td><td>Correlation ID</td><td>요청 - 응답 메시지를 연결하기 위한 고유 식별자</td></tr><tr><td></td><td>Idempotency (멱등성)</td><td>동일한 메시지를 여러 번 처리해도 동일한 결과를 보장하는 성질</td></tr><tr><td></td><td>Exactly-once Delivery</td><td>메시지가 중복 없이 정확히 한 번만 전달되도록 보장하는 전략</td></tr><tr><td></td><td>Eventual Consistency</td><td>분산 환경에서 일시적으로 불일치하더라도 최종적으로 일관성에 도달하는 속성</td></tr><tr><td></td><td>Backpressure</td><td>시스템 과부하를 방지하기 위해 메시지 흐름을 제어하는 메커니즘</td></tr><tr><td></td><td>Circuit Breaker</td><td>장애 발생 시 시스템 전체 전파를 막기 위한 보호 장치</td></tr><tr><td><strong>처리 기술</strong></td><td>Stream Processing</td><td>실시간으로 지속적인 데이터 흐름을 처리하는 방식 (예: Flink, Kafka Streams 등)</td></tr><tr><td></td><td>Message Queue</td><td>메시지를 큐에 임시 저장하고 순서 보장 및 비동기 처리를 가능하게 하는 구조</td></tr><tr><td></td><td>Partition</td><td>메시지를 병렬로 처리할 수 있도록 Kafka 에서 사용하는 논리 단위</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><h3 id=개요-및-개념>개요 및 개념<a hidden class=anchor aria-hidden=true href=#개요-및-개념>#</a></h3><ul><li><a href=https://en.wikipedia.org/wiki/Event-driven_architecture>Event-Driven Architecture – Wikipedia</a></li><li><a href=https://aws.amazon.com/event-driven-architecture/>What is Event-Driven Architecture? – AWS</a></li><li><a href=https://learn.microsoft.com/en-us/azure/architecture/guide/architecture-styles/event-driven>Event-Driven Architecture – Microsoft Azure</a></li><li><a href=https://www.confluent.io/learn/event-driven-architecture/>Event-Driven Architecture: A Complete Introduction – Confluent</a></li><li><a href=https://www.ibm.com/think/topics/event-driven-architecture>Event-Driven Architecture – IBM</a></li><li><a href=https://dev.to/dev_habib_nuhu/understanding-event-driven-architecture-5abg>Understanding Event-Driven Architecture – Dev.to</a></li><li><a href=https://developers.redhat.com/articles/event-driven-architecture-overview>Event-Driven Architecture Overview – Red Hat</a></li><li><a href=https://hazelcast.com/foundations/event-driven-architecture/event-driven-architecture/>Event-Driven Architecture – Hazelcast</a></li><li><a href=https://dev.to/tejastn10/mastering-event-driven-architecture-when-and-why-to-use-it-268l>Mastering Event-Driven Architecture – Dev.to</a></li><li><a href=https://www.spiceworks.com/tech/tech-general/articles/event-driven-architecture/>Event-Driven Architecture – Spiceworks</a></li><li><a href=https://en.wikipedia.org/wiki/Event_%28computing%29>Event (Computing) – Wikipedia</a></li></ul><h3 id=아키텍처-패턴--디자인>아키텍처 패턴 & 디자인<a hidden class=anchor aria-hidden=true href=#아키텍처-패턴--디자인>#</a></h3><ul><li><a href=https://solace.com/event-driven-architecture-patterns/>Event-Driven Architecture Patterns – Solace</a></li><li><a href=https://www.3pillarglobal.com/insights/blog/event-driven-architecture-topologies-broker-and-mediator/>Event-Driven Architecture Topologies – 3Pillar Global</a></li><li><a href=https://www.oreilly.com/library/view/software-architecture-patterns/9781491971437/ch02.html>Architecture Patterns – O&rsquo;Reilly</a></li><li><a href=https://www.enterpriseintegrationpatterns.com/patterns/messaging/EDA.html>Enterprise Integration Patterns – Event-Driven Architecture</a></li><li><a href=https://dev.to/stack-labs/serverless-day-10-principles-for-your-event-driven-architecture-2lb7>10 Principles for Your Event-Driven Architecture – DEV Community</a></li><li><a href=https://medium.com/memphis-dev/journey-to-event-driven-part-2-programming-models-for-the-event-driven-architecture-933360eb58fd>Journey to Event Driven – Medium</a></li></ul><h3 id=도구-및-기술-스택>도구 및 기술 스택<a hidden class=anchor aria-hidden=true href=#도구-및-기술-스택>#</a></h3><ul><li><a href=https://kafka.apache.org/documentation/>Apache Kafka – 공식 문서</a></li><li><a href=https://www.rabbitmq.com/>RabbitMQ – 공식 문서</a></li><li><a href=https://en.wikipedia.org/wiki/Apache_Storm>Apache Storm – Wikipedia</a></li><li><a href=https://www.asyncapi.com/>AsyncAPI – Event Contract Design</a></li><li><a href=https://martinfowler.com/eaaDev/EventSourcing.html>Event Sourcing – Martin Fowler</a></li><li><a href=https://microservices.io/patterns/data/saga.html>Saga Pattern – Microservices.io</a></li><li><a href=https://microservices.io/patterns/data/event-sourcing.html>Event Sourcing – Microservices.io</a></li><li><a href=https://peerdh.com/blogs/programming-insights/event-driven-architecture-in-python-applications>Event-Driven Architecture In Python – PeerDH</a></li></ul><h3 id=실무-적용-사례>실무 적용 사례<a hidden class=anchor aria-hidden=true href=#실무-적용-사례>#</a></h3><ul><li><a href=https://risingwave.com/blog/real-world-applications-of-event-driven-architecture-10-examples/>Real-World Applications of EDA – RisingWave</a></li><li><a href=https://estuary.dev/blog/event-driven-architecture-examples/>10 Event-Driven Architecture Examples – Estuary</a></li><li><a href=https://www.reddit.com/r/microservices/comments/lwdraq/example_use_cases_of_eventdriven_microservice/>Example Use Cases – Reddit Microservices</a></li><li><a href=https://ably.com/topic/event-driven-architecture-use-cases>4 Event-Driven Architecture Use Cases – Ably</a></li><li><a href=https://talent500.com/blog/how-to-implement-event-driven-architecture-for-complex-backend-systems/>Implementing EDA for Complex Backend – Talent500</a></li><li><a href=https://icepanel.io/blog/2024-10-01-how-to-diagram-events-icepanel>How to Diagram Events – IcePanel</a></li></ul><h3 id=장점과-단점-분석>장점과 단점 분석<a hidden class=anchor aria-hidden=true href=#장점과-단점-분석>#</a></h3><ul><li><a href=https://solace.com/blog/event-driven-architecture-pros-and-cons/>Pros and Cons of EDA – Solace</a></li><li><a href=https://victorleungtw.com/2024/03/08/event/>Pros and Cons of EDA – Victor Leung</a></li><li><a href=https://www.3pillarglobal.com/insights/blog/disadvantages-of-event-driven-architecture/>Disadvantages of EDA – 3Pillar Global</a></li><li><a href=https://medium.com/event-driven-times/a-guide-to-event-driven-architecture-pros-and-cons-6071394c4549>EDA: Benefits and Drawbacks – Medium</a></li><li><a href=https://www.linkedin.com/pulse/my-top-ten-cons-event-driven-architecture-marco-dacc%C3%B2>My Top Ten Cons of EDA – LinkedIn</a></li><li><a href=https://www.analyticsinsight.net/latest-news/scaling-event-driven-architectures-challenges-and-solutions>Scaling EDA: Challenges and Solutions – Analytics Insight</a></li></ul><hr></div></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>