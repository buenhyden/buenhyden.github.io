<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>gRPC API | hyunyoun's Blog</title><meta name=keywords content="Backend-Development,API-Design-and-Implementation,API-Styles,gRPC-API"><meta name=description content="gRPC는 Google에서 개발한 고성능, 오픈소스 RPC(Remote Procedure Call) 프레임워크이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/networking--protocols/communication-patterns/synchronous-communication/remote-procedure-calls/grpc/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.d522c866f0cc9c20ae4fa73a0a8c07f0af4c36af75bcbcd3e90558446f681077.css integrity="sha256-1SLIZvDMnCCuT6c6CowH8K9MNq91vLzT6QVYRG9oEHc=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/networking--protocols/communication-patterns/synchronous-communication/remote-procedure-calls/grpc/index.xml title=rss><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/networking--protocols/communication-patterns/synchronous-communication/remote-procedure-calls/grpc/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/networking--protocols/communication-patterns/synchronous-communication/remote-procedure-calls/grpc/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="gRPC API"><meta property="og:description" content="gRPC는 Google에서 개발한 고성능, 오픈소스 RPC(Remote Procedure Call) 프레임워크이다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="gRPC API"><meta name=twitter:description content="gRPC는 Google에서 개발한 고성능, 오픈소스 RPC(Remote Procedure Call) 프레임워크이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"HY's Blog","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":3,"name":"gRPC API","item":"https://buenhyden.github.io/posts/networking--protocols/communication-patterns/synchronous-communication/remote-procedure-calls/grpc/"}]}</script></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>HY's Blog</a></div><h1>gRPC API</h1><div class=post-description>gRPC는 Google에서 개발한 고성능, 오픈소스 RPC(Remote Procedure Call) 프레임워크이다.</div></header><div class=post-content><h2 id=grpc>gRPC<a hidden class=anchor aria-hidden=true href=#grpc>#</a></h2><p>gRPC는 Google에서 개발한 고성능, 오픈소스 RPC(Remote Procedure Call) 프레임워크이다.<br>&lsquo;g&rsquo;는 원래 Google을 의미했지만, 현재는 &ldquo;gRPC Remote Procedure Calls"의 재귀적 약자로 사용된다. 2015년에 공개되었으며, 현재 Cloud Native Computing Foundation(CNCF)의 졸업 프로젝트이다.</p><p>gRPC는 마이크로서비스 아키텍처와 높은 성능이 필요한 시스템에 이상적인 강력한 RPC 프레임워크이다. Protocol Buffers, HTTP/2, 코드 생성 및 다양한 통신 패턴을 통해 효율적이고 확장 가능한 API를 구축할 수 있다.</p><p>시작하기 전에 Protocol Buffers 문법, HTTP/2 기본 사항, 스트리밍 패턴 및 오류 처리에 대한 확실한 이해가 필요하다. 이러한 기초를 다진 후에는 점진적으로 더 복잡한 기능을 탐색하고 실제 프로젝트에 gRPC를 통합할 수 있다.</p><h3 id=grpc의-핵심-개념>gRPC의 핵심 개념<a hidden class=anchor aria-hidden=true href=#grpc의-핵심-개념>#</a></h3><h4 id=protocol-buffers-protobuf>Protocol Buffers (protobuf)<a hidden class=anchor aria-hidden=true href=#protocol-buffers-protobuf>#</a></h4><p>gRPC의 핵심 요소 중 하나는 Protocol Buffers(줄여서 protobuf)라는 데이터 직렬화 형식이다.<br>Protocol Buffers는 구조화된 데이터를 효율적으로 직렬화하는 Google의 언어 중립적, 플랫폼 중립적인 기술이다.</p><p>gRPC API를 정의할 때, 먼저 <code>.proto</code> 파일에 서비스와 메시지 형식을 정의한다.</p><p>아래는 간단한 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a>
</span><span class=lnt id=hl-0-21><a class=lnlinks href=#hl-0-21>21</a>
</span><span class=lnt id=hl-0-22><a class=lnlinks href=#hl-0-22>22</a>
</span><span class=lnt id=hl-0-23><a class=lnlinks href=#hl-0-23>23</a>
</span><span class=lnt id=hl-0-24><a class=lnlinks href=#hl-0-24>24</a>
</span><span class=lnt id=hl-0-25><a class=lnlinks href=#hl-0-25>25</a>
</span><span class=lnt id=hl-0-26><a class=lnlinks href=#hl-0-26>26</a>
</span><span class=lnt id=hl-0-27><a class=lnlinks href=#hl-0-27>27</a>
</span><span class=lnt id=hl-0-28><a class=lnlinks href=#hl-0-28>28</a>
</span><span class=lnt id=hl-0-29><a class=lnlinks href=#hl-0-29>29</a>
</span><span class=lnt id=hl-0-30><a class=lnlinks href=#hl-0-30>30</a>
</span><span class=lnt id=hl-0-31><a class=lnlinks href=#hl-0-31>31</a>
</span><span class=lnt id=hl-0-32><a class=lnlinks href=#hl-0-32>32</a>
</span><span class=lnt id=hl-0-33><a class=lnlinks href=#hl-0-33>33</a>
</span><span class=lnt id=hl-0-34><a class=lnlinks href=#hl-0-34>34</a>
</span><span class=lnt id=hl-0-35><a class=lnlinks href=#hl-0-35>35</a>
</span><span class=lnt id=hl-0-36><a class=lnlinks href=#hl-0-36>36</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-protobuf data-lang=protobuf><span class=line><span class=cl><span class=c1>// user.proto 파일 예시
</span></span></span><span class=line><span class=cl><span class=n>syntax</span> <span class=o>=</span> <span class=s>&#34;proto3&#34;</span><span class=p>;</span> <span class=c1>// 프로토콜 버퍼 버전 지정
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nn>user</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=c1>// 사용자 서비스 정의
</span></span></span><span class=line><span class=cl><span class=kd>service</span> <span class=n>UserService</span> <span class=p>{</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=c1>// 사용자 정보를 가져오는 RPC
</span></span></span><span class=line><span class=cl>  <span class=k>rpc</span> <span class=n>GetUser</span> <span class=p>(</span><span class=n>UserRequest</span><span class=p>)</span> <span class=k>returns</span> <span class=p>(</span><span class=n>UserResponse</span><span class=p>)</span> <span class=p>{}</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=c1>// 사용자 생성 RPC
</span></span></span><span class=line><span class=cl>  <span class=k>rpc</span> <span class=n>CreateUser</span> <span class=p>(</span><span class=n>CreateUserRequest</span><span class=p>)</span> <span class=k>returns</span> <span class=p>(</span><span class=n>UserResponse</span><span class=p>)</span> <span class=p>{}</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=c1>// 요청 메시지 정의
</span></span></span><span class=line><span class=cl><span class=kd>message</span> <span class=nc>UserRequest</span> <span class=p>{</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kt>int32</span> <span class=n>user_id</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=c1>// 사용자 생성 요청 메시지
</span></span></span><span class=line><span class=cl><span class=kd>message</span> <span class=nc>CreateUserRequest</span> <span class=p>{</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kt>string</span> <span class=n>name</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kt>string</span> <span class=n>email</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=c1>// 응답 메시지 정의
</span></span></span><span class=line><span class=cl><span class=kd>message</span> <span class=nc>UserResponse</span> <span class=p>{</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kt>int32</span> <span class=n>user_id</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kt>string</span> <span class=n>name</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kt>string</span> <span class=n>email</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kd>enum</span> <span class=n>Status</span> <span class=p>{</span><span class=err>
</span></span></span><span class=line><span class=cl>    <span class=n>ACTIVE</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl>    <span class=n>INACTIVE</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl>    <span class=n>BANNED</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=p>}</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=n>Status</span> <span class=n>status</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><p>Protocol Buffers의 주요 특징:</p><ul><li>바이너리 직렬화 형식으로 JSON보다 작고 빠름</li><li>강력한 타입 시스템 제공</li><li>버전 호환성과 확장성 지원</li><li>다양한 프로그래밍 언어에 대한 코드 생성</li></ul><h4 id=rpcremote-procedure-call-모델>RPC(Remote Procedure Call) 모델<a hidden class=anchor aria-hidden=true href=#rpcremote-procedure-call-모델>#</a></h4><p>gRPC는 클라이언트가 서버의 메서드를 마치 로컬 객체인 것처럼 호출할 수 있게 해주는 RPC 모델을 따른다. 서버와 클라이언트는 서로 다른 언어로 작성될 수 있으며, Protocol Buffers가 이들 간의 통신을 처리한다.</p><h4 id=http2-기반-통신>HTTP/2 기반 통신<a hidden class=anchor aria-hidden=true href=#http2-기반-통신>#</a></h4><p>gRPC는 HTTP/2 프로토콜을 기반으로 하며, 다음과 같은 이점을 제공한다:</p><ul><li>하나의 TCP 연결을 통한 다중 동시 요청 (멀티플렉싱)</li><li>헤더 압축</li><li>서버 푸시 지원</li><li>양방향 스트리밍</li><li>낮은 지연 시간</li></ul><h4 id=네-가지-통신-패턴>네 가지 통신 패턴<a hidden class=anchor aria-hidden=true href=#네-가지-통신-패턴>#</a></h4><p>gRPC는 다음 네 가지 통신 패턴을 지원한다:</p><ol><li><p><strong>단일 요청-응답 (Unary RPC)</strong>: 클라이언트가 서버에 단일 요청을 보내고, 서버가 단일 응답을 반환한다. 전통적인 함수 호출과 유사하다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-protobuf data-lang=protobuf><span class=line><span class=cl><span class=k>rpc</span> <span class=n>SayHello</span> <span class=p>(</span><span class=n>HelloRequest</span><span class=p>)</span> <span class=k>returns</span> <span class=p>(</span><span class=n>HelloResponse</span><span class=p>);</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div></li><li><p><strong>서버 스트리밍 (Server Streaming RPC)</strong>: 클라이언트가 단일 요청을 보내고, 서버가 일련의 메시지를 스트림으로 반환한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-protobuf data-lang=protobuf><span class=line><span class=cl><span class=k>rpc</span> <span class=n>SubscribeUpdates</span> <span class=p>(</span><span class=n>SubscriptionRequest</span><span class=p>)</span> <span class=k>returns</span> <span class=p>(</span><span class=n>stream</span> <span class=n>Update</span><span class=p>);</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div></li><li><p><strong>클라이언트 스트리밍 (Client Streaming RPC)</strong>: 클라이언트가 일련의 메시지를 스트림으로 보내고, 서버가 단일 응답을 반환한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-protobuf data-lang=protobuf><span class=line><span class=cl><span class=k>rpc</span> <span class=n>ProcessBulkData</span> <span class=p>(</span><span class=n>stream</span> <span class=n>DataChunk</span><span class=p>)</span> <span class=k>returns</span> <span class=p>(</span><span class=n>ProcessSummary</span><span class=p>);</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div></li><li><p><strong>양방향 스트리밍 (Bidirectional Streaming RPC)</strong>: 클라이언트와 서버가 모두 독립적으로 메시지 스트림을 주고받을 수 있다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-protobuf data-lang=protobuf><span class=line><span class=cl><span class=k>rpc</span> <span class=n>Chat</span> <span class=p>(</span><span class=n>stream</span> <span class=n>ChatMessage</span><span class=p>)</span> <span class=k>returns</span> <span class=p>(</span><span class=n>stream</span> <span class=n>ChatMessage</span><span class=p>);</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div></li></ol><p>이러한 다양한 통신 패턴은 gRPC를 다양한 사용 사례에 적용할 수 있게 해준다.</p><h4 id=코드-생성>코드 생성<a hidden class=anchor aria-hidden=true href=#코드-생성>#</a></h4><p><code>.proto</code> 파일이 준비되면, Protocol Buffers 컴파일러(<code>protoc</code>)와 특정 언어용 플러그인을 사용하여 서버와 클라이언트 코드를 자동으로 생성한다. 이 생성된 코드에는 메시지 클래스, 직렬화/역직렬화 로직, 그리고 클라이언트 스텁과 서버 스켈레톤이 포함된다.<br>이는 개발 프로세스를 간소화하고 언어 간 일관성을 보장한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2>2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3>3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># protoc 명령어 예시 (Node.js용 코드 생성)</span>
</span></span><span class=line><span class=cl>protoc --js_out<span class=o>=</span><span class=nv>import_style</span><span class=o>=</span>commonjs,binary:./generated <span class=se>\
</span></span></span><span class=line><span class=cl>       --grpc-web_out<span class=o>=</span><span class=nv>import_style</span><span class=o>=</span>commonjs,mode<span class=o>=</span>grpcwebtext:./generated <span class=se>\
</span></span></span><span class=line><span class=cl>       ./protos/*.proto
</span></span></code></pre></td></tr></table></div></div><p>예를 들어, Java의 경우:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>protoc --java_out<span class=o>=</span>./generated-sources --grpc-java_out<span class=o>=</span>./generated-sources greeting.proto
</span></span></code></pre></td></tr></table></div></div><p>이 명령은 Java 언어로 된 클라이언트와 서버 코드를 생성한다. 다른 언어(Go, Python, C++, JavaScript 등)에 대해서도 유사한 명령을 사용할 수 있다.</p><h3 id=grpc-구현에-필요한-핵심-지식>gRPC 구현에 필요한 핵심 지식<a hidden class=anchor aria-hidden=true href=#grpc-구현에-필요한-핵심-지식>#</a></h3><h4 id=protocol-buffers-문법>Protocol Buffers 문법<a hidden class=anchor aria-hidden=true href=#protocol-buffers-문법>#</a></h4><p>Protocol Buffers의 기본 문법을 이해해야 한다:</p><ul><li>메시지 정의</li><li>필드 타입과 번호</li><li>열거형</li><li>서비스 정의</li><li>네임스페이스(패키지)</li><li>가져오기(imports)</li><li>옵션</li></ul><h4 id=스트리밍-개념>스트리밍 개념<a hidden class=anchor aria-hidden=true href=#스트리밍-개념>#</a></h4><p>gRPC의 스트리밍 기능을 효과적으로 활용하려면 다음을 이해해야 한다:</p><ul><li>스트림 열기 및 닫기</li><li>백프레셔(backpressure) 처리</li><li>오류 처리</li><li>취소 시그널</li></ul><h4 id=오류-처리>오류 처리<a hidden class=anchor aria-hidden=true href=#오류-처리>#</a></h4><p>gRPC는 표준화된 상태 코드 시스템을 제공한다:</p><ul><li>gRPC 상태 코드 (OK, CANCELLED, UNKNOWN 등)</li><li>오류 메시지</li><li>오류 메타데이터</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2>2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3>3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4>4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5>5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6>6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7>7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// Node.js에서의 오류 처리 예시
</span></span></span><span class=line><span class=cl><span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>client</span><span class=p>.</span><span class=nx>getUser</span><span class=p>({</span> <span class=nx>user_id</span><span class=o>:</span> <span class=mi>123</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>response</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`오류 발생: </span><span class=si>${</span><span class=nx>error</span><span class=p>.</span><span class=nx>code</span><span class=si>}</span><span class=sb> - </span><span class=si>${</span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>// error.code는 gRPC 상태 코드를 포함합니다
</span></span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=메타데이터-및-컨텍스트>메타데이터 및 컨텍스트<a hidden class=anchor aria-hidden=true href=#메타데이터-및-컨텍스트>#</a></h4><p>gRPC에서는 메타데이터를 통해 추가 정보를 전달할 수 있다:</p><ul><li>헤더와 트레일러</li><li>인증 토큰</li><li>요청 ID</li><li>추적 정보</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1>1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2>2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3>3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 클라이언트 측 메타데이터 예시 (Node.js)
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>metadata</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>Metadata</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>metadata</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=s1>&#39;authorization&#39;</span><span class=p>,</span> <span class=s1>&#39;Bearer &#39;</span> <span class=o>+</span> <span class=nx>token</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>client</span><span class=p>.</span><span class=nx>getUser</span><span class=p>({</span> <span class=nx>user_id</span><span class=o>:</span> <span class=mi>123</span> <span class=p>},</span> <span class=nx>metadata</span><span class=p>,</span> <span class=nx>callback</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=인증-및-보안>인증 및 보안<a hidden class=anchor aria-hidden=true href=#인증-및-보안>#</a></h4><p>gRPC는 다양한 인증 메커니즘을 지원한다:</p><ul><li>SSL/TLS</li><li>토큰 기반 인증</li><li>OAuth</li><li>JWT</li></ul><h5 id=ssltls-암호화>SSL/TLS 암호화<a hidden class=anchor aria-hidden=true href=#ssltls-암호화>#</a></h5><p>gRPC는 SSL/TLS를 통한 통신 암호화를 지원한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a>
</span><span class=lnt id=hl-9-11><a class=lnlinks href=#hl-9-11>11</a>
</span><span class=lnt id=hl-9-12><a class=lnlinks href=#hl-9-12>12</a>
</span><span class=lnt id=hl-9-13><a class=lnlinks href=#hl-9-13>13</a>
</span><span class=lnt id=hl-9-14><a class=lnlinks href=#hl-9-14>14</a>
</span><span class=lnt id=hl-9-15><a class=lnlinks href=#hl-9-15>15</a>
</span><span class=lnt id=hl-9-16><a class=lnlinks href=#hl-9-16>16</a>
</span><span class=lnt id=hl-9-17><a class=lnlinks href=#hl-9-17>17</a>
</span><span class=lnt id=hl-9-18><a class=lnlinks href=#hl-9-18>18</a>
</span><span class=lnt id=hl-9-19><a class=lnlinks href=#hl-9-19>19</a>
</span><span class=lnt id=hl-9-20><a class=lnlinks href=#hl-9-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 서버 측 SSL/TLS 설정
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>fs</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;fs&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>grpc</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@grpc/grpc-js&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>server</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>Server</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=c1>// 서비스 등록…
</span></span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// SSL/TLS 자격 증명 생성
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>serverCredentials</span> <span class=o>=</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>ServerCredentials</span><span class=p>.</span><span class=nx>createSsl</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>fs</span><span class=p>.</span><span class=nx>readFileSync</span><span class=p>(</span><span class=s1>&#39;ca.pem&#39;</span><span class=p>),</span>  <span class=c1>// 루트 인증서
</span></span></span><span class=line><span class=cl>  <span class=p>[{</span>
</span></span><span class=line><span class=cl>    <span class=nx>private_key</span><span class=o>:</span> <span class=nx>fs</span><span class=p>.</span><span class=nx>readFileSync</span><span class=p>(</span><span class=s1>&#39;server-key.pem&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=nx>cert_chain</span><span class=o>:</span> <span class=nx>fs</span><span class=p>.</span><span class=nx>readFileSync</span><span class=p>(</span><span class=s1>&#39;server-cert.pem&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}],</span>
</span></span><span class=line><span class=cl>  <span class=kc>true</span>  <span class=c1>// 클라이언트 인증 요구 여부
</span></span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>server</span><span class=p>.</span><span class=nx>bindAsync</span><span class=p>(</span><span class=s1>&#39;0.0.0.0:50051&#39;</span><span class=p>,</span> <span class=nx>serverCredentials</span><span class=p>,</span> <span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>port</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>err</span><span class=p>)</span> <span class=nx>server</span><span class=p>.</span><span class=nx>start</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span><span class=lnt id=hl-10-12><a class=lnlinks href=#hl-10-12>12</a>
</span><span class=lnt id=hl-10-13><a class=lnlinks href=#hl-10-13>13</a>
</span><span class=lnt id=hl-10-14><a class=lnlinks href=#hl-10-14>14</a>
</span><span class=lnt id=hl-10-15><a class=lnlinks href=#hl-10-15>15</a>
</span><span class=lnt id=hl-10-16><a class=lnlinks href=#hl-10-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 클라이언트 측 SSL/TLS 설정
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>grpc</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@grpc/grpc-js&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>fs</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;fs&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// SSL/TLS 자격 증명 생성
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>channelCredentials</span> <span class=o>=</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>credentials</span><span class=p>.</span><span class=nx>createSsl</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>fs</span><span class=p>.</span><span class=nx>readFileSync</span><span class=p>(</span><span class=s1>&#39;ca.pem&#39;</span><span class=p>),</span>  <span class=c1>// 루트 인증서
</span></span></span><span class=line><span class=cl>  <span class=nx>fs</span><span class=p>.</span><span class=nx>readFileSync</span><span class=p>(</span><span class=s1>&#39;client-key.pem&#39;</span><span class=p>),</span>  <span class=c1>// 클라이언트 키
</span></span></span><span class=line><span class=cl>  <span class=nx>fs</span><span class=p>.</span><span class=nx>readFileSync</span><span class=p>(</span><span class=s1>&#39;client-cert.pem&#39;</span><span class=p>)</span>  <span class=c1>// 클라이언트 인증서
</span></span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 보안 채널을 통한 클라이언트 생성
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>client</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>userProto</span><span class=p>.</span><span class=nx>UserService</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;localhost:50051&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>channelCredentials</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=토큰-기반-인증>토큰 기반 인증<a hidden class=anchor aria-hidden=true href=#토큰-기반-인증>#</a></h5><p>OAuth, JWT 등과 같은 토큰 기반 인증을 메타데이터를 통해 구현할 수 있다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15>15</a>
</span><span class=lnt id=hl-11-16><a class=lnlinks href=#hl-11-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 클라이언트 측 토큰 전송
</span></span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>getAuthenticatedUser</span><span class=p>(</span><span class=nx>userId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 메타데이터 객체 생성
</span></span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>metadata</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>Metadata</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=nx>metadata</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=s1>&#39;authorization&#39;</span><span class=p>,</span> <span class=s1>&#39;Bearer &#39;</span> <span class=o>+</span> <span class=nx>authToken</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>client</span><span class=p>.</span><span class=nx>getUser</span><span class=p>({</span> <span class=nx>user_id</span><span class=o>:</span> <span class=nx>userId</span> <span class=p>},</span> <span class=nx>metadata</span><span class=p>,</span> <span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>reject</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=nx>resolve</span><span class=p>(</span><span class=nx>response</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1> 1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2> 2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3> 3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4> 4</a>
</span><span class=lnt id=hl-12-5><a class=lnlinks href=#hl-12-5> 5</a>
</span><span class=lnt id=hl-12-6><a class=lnlinks href=#hl-12-6> 6</a>
</span><span class=lnt id=hl-12-7><a class=lnlinks href=#hl-12-7> 7</a>
</span><span class=lnt id=hl-12-8><a class=lnlinks href=#hl-12-8> 8</a>
</span><span class=lnt id=hl-12-9><a class=lnlinks href=#hl-12-9> 9</a>
</span><span class=lnt id=hl-12-10><a class=lnlinks href=#hl-12-10>10</a>
</span><span class=lnt id=hl-12-11><a class=lnlinks href=#hl-12-11>11</a>
</span><span class=lnt id=hl-12-12><a class=lnlinks href=#hl-12-12>12</a>
</span><span class=lnt id=hl-12-13><a class=lnlinks href=#hl-12-13>13</a>
</span><span class=lnt id=hl-12-14><a class=lnlinks href=#hl-12-14>14</a>
</span><span class=lnt id=hl-12-15><a class=lnlinks href=#hl-12-15>15</a>
</span><span class=lnt id=hl-12-16><a class=lnlinks href=#hl-12-16>16</a>
</span><span class=lnt id=hl-12-17><a class=lnlinks href=#hl-12-17>17</a>
</span><span class=lnt id=hl-12-18><a class=lnlinks href=#hl-12-18>18</a>
</span><span class=lnt id=hl-12-19><a class=lnlinks href=#hl-12-19>19</a>
</span><span class=lnt id=hl-12-20><a class=lnlinks href=#hl-12-20>20</a>
</span><span class=lnt id=hl-12-21><a class=lnlinks href=#hl-12-21>21</a>
</span><span class=lnt id=hl-12-22><a class=lnlinks href=#hl-12-22>22</a>
</span><span class=lnt id=hl-12-23><a class=lnlinks href=#hl-12-23>23</a>
</span><span class=lnt id=hl-12-24><a class=lnlinks href=#hl-12-24>24</a>
</span><span class=lnt id=hl-12-25><a class=lnlinks href=#hl-12-25>25</a>
</span><span class=lnt id=hl-12-26><a class=lnlinks href=#hl-12-26>26</a>
</span><span class=lnt id=hl-12-27><a class=lnlinks href=#hl-12-27>27</a>
</span><span class=lnt id=hl-12-28><a class=lnlinks href=#hl-12-28>28</a>
</span><span class=lnt id=hl-12-29><a class=lnlinks href=#hl-12-29>29</a>
</span><span class=lnt id=hl-12-30><a class=lnlinks href=#hl-12-30>30</a>
</span><span class=lnt id=hl-12-31><a class=lnlinks href=#hl-12-31>31</a>
</span><span class=lnt id=hl-12-32><a class=lnlinks href=#hl-12-32>32</a>
</span><span class=lnt id=hl-12-33><a class=lnlinks href=#hl-12-33>33</a>
</span><span class=lnt id=hl-12-34><a class=lnlinks href=#hl-12-34>34</a>
</span><span class=lnt id=hl-12-35><a class=lnlinks href=#hl-12-35>35</a>
</span><span class=lnt id=hl-12-36><a class=lnlinks href=#hl-12-36>36</a>
</span><span class=lnt id=hl-12-37><a class=lnlinks href=#hl-12-37>37</a>
</span><span class=lnt id=hl-12-38><a class=lnlinks href=#hl-12-38>38</a>
</span><span class=lnt id=hl-12-39><a class=lnlinks href=#hl-12-39>39</a>
</span><span class=lnt id=hl-12-40><a class=lnlinks href=#hl-12-40>40</a>
</span><span class=lnt id=hl-12-41><a class=lnlinks href=#hl-12-41>41</a>
</span><span class=lnt id=hl-12-42><a class=lnlinks href=#hl-12-42>42</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 서버 측 토큰 검증
</span></span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>authInterceptor</span><span class=p>(</span><span class=nx>options</span><span class=p>,</span> <span class=nx>nextCall</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=k>new</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>InterceptingCall</span><span class=p>(</span><span class=nx>nextCall</span><span class=p>(</span><span class=nx>options</span><span class=p>),</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>start</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>metadata</span><span class=p>,</span> <span class=nx>listener</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>authHeader</span> <span class=o>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;authorization&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>authHeader</span> <span class=o>||</span> <span class=o>!</span><span class=nx>validateToken</span><span class=p>(</span><span class=nx>authHeader</span><span class=p>[</span><span class=mi>0</span><span class=p>]))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>error</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>code</span><span class=o>:</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>UNAUTHENTICATED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>details</span><span class=o>:</span> <span class=s1>&#39;Invalid or missing authentication token&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>newListener</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>onReceiveStatus</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>status</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>next</span><span class=p>(</span><span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>next</span><span class=p>(</span><span class=nx>metadata</span><span class=p>,</span> <span class=nx>newListener</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=c1>// 인증 성공, 계속 진행
</span></span></span><span class=line><span class=cl>      <span class=nx>next</span><span class=p>(</span><span class=nx>metadata</span><span class=p>,</span> <span class=nx>listener</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 토큰 검증 로직
</span></span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>validateToken</span><span class=p>(</span><span class=nx>authHeader</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// &#34;Bearer &lt;token&gt;&#34; 형식에서 토큰 추출
</span></span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>authHeader</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39; &#39;</span><span class=p>)[</span><span class=mi>1</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 토큰 검증 로직 (JWT 등)
</span></span></span><span class=line><span class=cl>  <span class=c1>// 실제 구현에서는 JWT 라이브러리 등을 사용하여 검증
</span></span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>token</span> <span class=o>&amp;&amp;</span> <span class=nx>token</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 인터셉터를 서버에 등록
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>server</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>Server</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>interceptors</span><span class=o>:</span> <span class=p>[</span><span class=nx>authInterceptor</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=역할-기반-접근-제어-rbac>역할 기반 접근 제어 (RBAC)<a hidden class=anchor aria-hidden=true href=#역할-기반-접근-제어-rbac>#</a></h5><p>특정 메서드에 대한 접근을 제한하기 위해 역할 기반 접근 제어를 구현할 수 있다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1> 1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2> 2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3> 3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4> 4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5> 5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6> 6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7> 7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8> 8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9> 9</a>
</span><span class=lnt id=hl-13-10><a class=lnlinks href=#hl-13-10>10</a>
</span><span class=lnt id=hl-13-11><a class=lnlinks href=#hl-13-11>11</a>
</span><span class=lnt id=hl-13-12><a class=lnlinks href=#hl-13-12>12</a>
</span><span class=lnt id=hl-13-13><a class=lnlinks href=#hl-13-13>13</a>
</span><span class=lnt id=hl-13-14><a class=lnlinks href=#hl-13-14>14</a>
</span><span class=lnt id=hl-13-15><a class=lnlinks href=#hl-13-15>15</a>
</span><span class=lnt id=hl-13-16><a class=lnlinks href=#hl-13-16>16</a>
</span><span class=lnt id=hl-13-17><a class=lnlinks href=#hl-13-17>17</a>
</span><span class=lnt id=hl-13-18><a class=lnlinks href=#hl-13-18>18</a>
</span><span class=lnt id=hl-13-19><a class=lnlinks href=#hl-13-19>19</a>
</span><span class=lnt id=hl-13-20><a class=lnlinks href=#hl-13-20>20</a>
</span><span class=lnt id=hl-13-21><a class=lnlinks href=#hl-13-21>21</a>
</span><span class=lnt id=hl-13-22><a class=lnlinks href=#hl-13-22>22</a>
</span><span class=lnt id=hl-13-23><a class=lnlinks href=#hl-13-23>23</a>
</span><span class=lnt id=hl-13-24><a class=lnlinks href=#hl-13-24>24</a>
</span><span class=lnt id=hl-13-25><a class=lnlinks href=#hl-13-25>25</a>
</span><span class=lnt id=hl-13-26><a class=lnlinks href=#hl-13-26>26</a>
</span><span class=lnt id=hl-13-27><a class=lnlinks href=#hl-13-27>27</a>
</span><span class=lnt id=hl-13-28><a class=lnlinks href=#hl-13-28>28</a>
</span><span class=lnt id=hl-13-29><a class=lnlinks href=#hl-13-29>29</a>
</span><span class=lnt id=hl-13-30><a class=lnlinks href=#hl-13-30>30</a>
</span><span class=lnt id=hl-13-31><a class=lnlinks href=#hl-13-31>31</a>
</span><span class=lnt id=hl-13-32><a class=lnlinks href=#hl-13-32>32</a>
</span><span class=lnt id=hl-13-33><a class=lnlinks href=#hl-13-33>33</a>
</span><span class=lnt id=hl-13-34><a class=lnlinks href=#hl-13-34>34</a>
</span><span class=lnt id=hl-13-35><a class=lnlinks href=#hl-13-35>35</a>
</span><span class=lnt id=hl-13-36><a class=lnlinks href=#hl-13-36>36</a>
</span><span class=lnt id=hl-13-37><a class=lnlinks href=#hl-13-37>37</a>
</span><span class=lnt id=hl-13-38><a class=lnlinks href=#hl-13-38>38</a>
</span><span class=lnt id=hl-13-39><a class=lnlinks href=#hl-13-39>39</a>
</span><span class=lnt id=hl-13-40><a class=lnlinks href=#hl-13-40>40</a>
</span><span class=lnt id=hl-13-41><a class=lnlinks href=#hl-13-41>41</a>
</span><span class=lnt id=hl-13-42><a class=lnlinks href=#hl-13-42>42</a>
</span><span class=lnt id=hl-13-43><a class=lnlinks href=#hl-13-43>43</a>
</span><span class=lnt id=hl-13-44><a class=lnlinks href=#hl-13-44>44</a>
</span><span class=lnt id=hl-13-45><a class=lnlinks href=#hl-13-45>45</a>
</span><span class=lnt id=hl-13-46><a class=lnlinks href=#hl-13-46>46</a>
</span><span class=lnt id=hl-13-47><a class=lnlinks href=#hl-13-47>47</a>
</span><span class=lnt id=hl-13-48><a class=lnlinks href=#hl-13-48>48</a>
</span><span class=lnt id=hl-13-49><a class=lnlinks href=#hl-13-49>49</a>
</span><span class=lnt id=hl-13-50><a class=lnlinks href=#hl-13-50>50</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 권한 확인 함수
</span></span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>checkPermission</span><span class=p>(</span><span class=nx>metadata</span><span class=p>,</span> <span class=nx>method</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 토큰에서 사용자 정보 및 역할 추출
</span></span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>authHeader</span> <span class=o>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;authorization&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>authHeader</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39; &#39;</span><span class=p>)[</span><span class=mi>1</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>userInfo</span> <span class=o>=</span> <span class=nx>decodeToken</span><span class=p>(</span><span class=nx>token</span><span class=p>);</span> <span class=c1>// JWT 등에서 사용자 정보 추출
</span></span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 메서드별 필요 권한 매핑
</span></span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>methodPermissions</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;GetUser&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;user:read&#39;</span><span class=p>,</span> <span class=s1>&#39;admin&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;CreateUser&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;user:write&#39;</span><span class=p>,</span> <span class=s1>&#39;admin&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;DeleteUser&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;admin&#39;</span><span class=p>]</span> <span class=c1>// 관리자만 가능
</span></span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 필요한 권한 확인
</span></span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>requiredRoles</span> <span class=o>=</span> <span class=nx>methodPermissions</span><span class=p>[</span><span class=nx>method</span><span class=p>]</span> <span class=o>||</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>userRoles</span> <span class=o>=</span> <span class=nx>userInfo</span><span class=p>.</span><span class=nx>roles</span> <span class=o>||</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 사용자 역할이 필요 권한 중 하나라도 포함하는지 확인
</span></span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>requiredRoles</span><span class=p>.</span><span class=nx>some</span><span class=p>(</span><span class=nx>role</span> <span class=p>=&gt;</span> <span class=nx>userRoles</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=nx>role</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 인터셉터에서 권한 확인
</span></span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>authorizationInterceptor</span><span class=p>(</span><span class=nx>options</span><span class=p>,</span> <span class=nx>nextCall</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=k>new</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>InterceptingCall</span><span class=p>(</span><span class=nx>nextCall</span><span class=p>(</span><span class=nx>options</span><span class=p>),</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>start</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>metadata</span><span class=p>,</span> <span class=nx>listener</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 메서드 이름 추출
</span></span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>method</span> <span class=o>=</span> <span class=nx>options</span><span class=p>.</span><span class=nx>method_definition</span><span class=p>.</span><span class=nx>path</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>).</span><span class=nx>pop</span><span class=p>();</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>checkPermission</span><span class=p>(</span><span class=nx>metadata</span><span class=p>,</span> <span class=nx>method</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>error</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>code</span><span class=o>:</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>PERMISSION_DENIED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>details</span><span class=o>:</span> <span class=sb>`Permission denied for method: </span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>`</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>newListener</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>onReceiveStatus</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>status</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>next</span><span class=p>(</span><span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>next</span><span class=p>(</span><span class=nx>metadata</span><span class=p>,</span> <span class=nx>newListener</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=c1>// 권한 확인 성공, 계속 진행
</span></span></span><span class=line><span class=cl>      <span class=nx>next</span><span class=p>(</span><span class=nx>metadata</span><span class=p>,</span> <span class=nx>listener</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=속도-제한-rate-limiting>속도 제한 (Rate Limiting)<a hidden class=anchor aria-hidden=true href=#속도-제한-rate-limiting>#</a></h5><p>API 남용을 방지하기 위해 클라이언트별 요청 속도를 제한할 수 있다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1> 1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2> 2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3> 3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4> 4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5> 5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6> 6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7> 7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8> 8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9> 9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10>10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11>11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12>12</a>
</span><span class=lnt id=hl-14-13><a class=lnlinks href=#hl-14-13>13</a>
</span><span class=lnt id=hl-14-14><a class=lnlinks href=#hl-14-14>14</a>
</span><span class=lnt id=hl-14-15><a class=lnlinks href=#hl-14-15>15</a>
</span><span class=lnt id=hl-14-16><a class=lnlinks href=#hl-14-16>16</a>
</span><span class=lnt id=hl-14-17><a class=lnlinks href=#hl-14-17>17</a>
</span><span class=lnt id=hl-14-18><a class=lnlinks href=#hl-14-18>18</a>
</span><span class=lnt id=hl-14-19><a class=lnlinks href=#hl-14-19>19</a>
</span><span class=lnt id=hl-14-20><a class=lnlinks href=#hl-14-20>20</a>
</span><span class=lnt id=hl-14-21><a class=lnlinks href=#hl-14-21>21</a>
</span><span class=lnt id=hl-14-22><a class=lnlinks href=#hl-14-22>22</a>
</span><span class=lnt id=hl-14-23><a class=lnlinks href=#hl-14-23>23</a>
</span><span class=lnt id=hl-14-24><a class=lnlinks href=#hl-14-24>24</a>
</span><span class=lnt id=hl-14-25><a class=lnlinks href=#hl-14-25>25</a>
</span><span class=lnt id=hl-14-26><a class=lnlinks href=#hl-14-26>26</a>
</span><span class=lnt id=hl-14-27><a class=lnlinks href=#hl-14-27>27</a>
</span><span class=lnt id=hl-14-28><a class=lnlinks href=#hl-14-28>28</a>
</span><span class=lnt id=hl-14-29><a class=lnlinks href=#hl-14-29>29</a>
</span><span class=lnt id=hl-14-30><a class=lnlinks href=#hl-14-30>30</a>
</span><span class=lnt id=hl-14-31><a class=lnlinks href=#hl-14-31>31</a>
</span><span class=lnt id=hl-14-32><a class=lnlinks href=#hl-14-32>32</a>
</span><span class=lnt id=hl-14-33><a class=lnlinks href=#hl-14-33>33</a>
</span><span class=lnt id=hl-14-34><a class=lnlinks href=#hl-14-34>34</a>
</span><span class=lnt id=hl-14-35><a class=lnlinks href=#hl-14-35>35</a>
</span><span class=lnt id=hl-14-36><a class=lnlinks href=#hl-14-36>36</a>
</span><span class=lnt id=hl-14-37><a class=lnlinks href=#hl-14-37>37</a>
</span><span class=lnt id=hl-14-38><a class=lnlinks href=#hl-14-38>38</a>
</span><span class=lnt id=hl-14-39><a class=lnlinks href=#hl-14-39>39</a>
</span><span class=lnt id=hl-14-40><a class=lnlinks href=#hl-14-40>40</a>
</span><span class=lnt id=hl-14-41><a class=lnlinks href=#hl-14-41>41</a>
</span><span class=lnt id=hl-14-42><a class=lnlinks href=#hl-14-42>42</a>
</span><span class=lnt id=hl-14-43><a class=lnlinks href=#hl-14-43>43</a>
</span><span class=lnt id=hl-14-44><a class=lnlinks href=#hl-14-44>44</a>
</span><span class=lnt id=hl-14-45><a class=lnlinks href=#hl-14-45>45</a>
</span><span class=lnt id=hl-14-46><a class=lnlinks href=#hl-14-46>46</a>
</span><span class=lnt id=hl-14-47><a class=lnlinks href=#hl-14-47>47</a>
</span><span class=lnt id=hl-14-48><a class=lnlinks href=#hl-14-48>48</a>
</span><span class=lnt id=hl-14-49><a class=lnlinks href=#hl-14-49>49</a>
</span><span class=lnt id=hl-14-50><a class=lnlinks href=#hl-14-50>50</a>
</span><span class=lnt id=hl-14-51><a class=lnlinks href=#hl-14-51>51</a>
</span><span class=lnt id=hl-14-52><a class=lnlinks href=#hl-14-52>52</a>
</span><span class=lnt id=hl-14-53><a class=lnlinks href=#hl-14-53>53</a>
</span><span class=lnt id=hl-14-54><a class=lnlinks href=#hl-14-54>54</a>
</span><span class=lnt id=hl-14-55><a class=lnlinks href=#hl-14-55>55</a>
</span><span class=lnt id=hl-14-56><a class=lnlinks href=#hl-14-56>56</a>
</span><span class=lnt id=hl-14-57><a class=lnlinks href=#hl-14-57>57</a>
</span><span class=lnt id=hl-14-58><a class=lnlinks href=#hl-14-58>58</a>
</span><span class=lnt id=hl-14-59><a class=lnlinks href=#hl-14-59>59</a>
</span><span class=lnt id=hl-14-60><a class=lnlinks href=#hl-14-60>60</a>
</span><span class=lnt id=hl-14-61><a class=lnlinks href=#hl-14-61>61</a>
</span><span class=lnt id=hl-14-62><a class=lnlinks href=#hl-14-62>62</a>
</span><span class=lnt id=hl-14-63><a class=lnlinks href=#hl-14-63>63</a>
</span><span class=lnt id=hl-14-64><a class=lnlinks href=#hl-14-64>64</a>
</span><span class=lnt id=hl-14-65><a class=lnlinks href=#hl-14-65>65</a>
</span><span class=lnt id=hl-14-66><a class=lnlinks href=#hl-14-66>66</a>
</span><span class=lnt id=hl-14-67><a class=lnlinks href=#hl-14-67>67</a>
</span><span class=lnt id=hl-14-68><a class=lnlinks href=#hl-14-68>68</a>
</span><span class=lnt id=hl-14-69><a class=lnlinks href=#hl-14-69>69</a>
</span><span class=lnt id=hl-14-70><a class=lnlinks href=#hl-14-70>70</a>
</span><span class=lnt id=hl-14-71><a class=lnlinks href=#hl-14-71>71</a>
</span><span class=lnt id=hl-14-72><a class=lnlinks href=#hl-14-72>72</a>
</span><span class=lnt id=hl-14-73><a class=lnlinks href=#hl-14-73>73</a>
</span><span class=lnt id=hl-14-74><a class=lnlinks href=#hl-14-74>74</a>
</span><span class=lnt id=hl-14-75><a class=lnlinks href=#hl-14-75>75</a>
</span><span class=lnt id=hl-14-76><a class=lnlinks href=#hl-14-76>76</a>
</span><span class=lnt id=hl-14-77><a class=lnlinks href=#hl-14-77>77</a>
</span><span class=lnt id=hl-14-78><a class=lnlinks href=#hl-14-78>78</a>
</span><span class=lnt id=hl-14-79><a class=lnlinks href=#hl-14-79>79</a>
</span><span class=lnt id=hl-14-80><a class=lnlinks href=#hl-14-80>80</a>
</span><span class=lnt id=hl-14-81><a class=lnlinks href=#hl-14-81>81</a>
</span><span class=lnt id=hl-14-82><a class=lnlinks href=#hl-14-82>82</a>
</span><span class=lnt id=hl-14-83><a class=lnlinks href=#hl-14-83>83</a>
</span><span class=lnt id=hl-14-84><a class=lnlinks href=#hl-14-84>84</a>
</span><span class=lnt id=hl-14-85><a class=lnlinks href=#hl-14-85>85</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 간단한 메모리 기반 속도 제한 구현
</span></span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>RateLimiter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>limit</span><span class=p>,</span> <span class=nx>windowMs</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>limit</span> <span class=o>=</span> <span class=nx>limit</span><span class=p>;</span> <span class=c1>// 윈도우 기간 동안 허용되는 최대 요청 수
</span></span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>windowMs</span> <span class=o>=</span> <span class=nx>windowMs</span><span class=p>;</span> <span class=c1>// 밀리초 단위의 시간 윈도우
</span></span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>clients</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span> <span class=c1>// 클라이언트 IP 또는 ID별 요청 카운터
</span></span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>isAllowed</span><span class=p>(</span><span class=nx>clientId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>now</span> <span class=o>=</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=k>this</span><span class=p>.</span><span class=nx>clients</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=nx>clientId</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 새 클라이언트 등록
</span></span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>clients</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>clientId</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>count</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>resetTime</span><span class=o>:</span> <span class=nx>now</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>windowMs</span>
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>client</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>clients</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>clientId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 윈도우 기간이 지났으면 카운터 리셋
</span></span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>now</span> <span class=o>&gt;</span> <span class=nx>client</span><span class=p>.</span><span class=nx>resetTime</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>client</span><span class=p>.</span><span class=nx>count</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=nx>client</span><span class=p>.</span><span class=nx>resetTime</span> <span class=o>=</span> <span class=nx>now</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>windowMs</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 제한 내에 있는지 확인
</span></span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>client</span><span class=p>.</span><span class=nx>count</span> <span class=o>&lt;</span> <span class=k>this</span><span class=p>.</span><span class=nx>limit</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>client</span><span class=p>.</span><span class=nx>count</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 제한 초과
</span></span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 속도 제한 인터셉터
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>rateLimiter</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>RateLimiter</span><span class=p>(</span><span class=mi>100</span><span class=p>,</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>);</span> <span class=c1>// 분당 100 요청
</span></span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>rateLimitInterceptor</span><span class=p>(</span><span class=nx>options</span><span class=p>,</span> <span class=nx>nextCall</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=k>new</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>InterceptingCall</span><span class=p>(</span><span class=nx>nextCall</span><span class=p>(</span><span class=nx>options</span><span class=p>),</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>start</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>metadata</span><span class=p>,</span> <span class=nx>listener</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 클라이언트 ID 추출 (IP, 인증 토큰 등)
</span></span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>clientId</span> <span class=o>=</span> <span class=nx>extractClientId</span><span class=p>(</span><span class=nx>metadata</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>rateLimiter</span><span class=p>.</span><span class=nx>isAllowed</span><span class=p>(</span><span class=nx>clientId</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>error</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>code</span><span class=o>:</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>RESOURCE_EXHAUSTED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>details</span><span class=o>:</span> <span class=s1>&#39;Rate limit exceeded. Try again later.&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>newListener</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>onReceiveStatus</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>status</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>next</span><span class=p>(</span><span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>next</span><span class=p>(</span><span class=nx>metadata</span><span class=p>,</span> <span class=nx>newListener</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=c1>// 속도 제한 내에 있음, 계속 진행
</span></span></span><span class=line><span class=cl>      <span class=nx>next</span><span class=p>(</span><span class=nx>metadata</span><span class=p>,</span> <span class=nx>listener</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 클라이언트 ID 추출 함수
</span></span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>extractClientId</span><span class=p>(</span><span class=nx>metadata</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 인증 토큰에서 사용자 ID 추출
</span></span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>authHeader</span> <span class=o>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;authorization&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>authHeader</span> <span class=o>&amp;&amp;</span> <span class=nx>authHeader</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>authHeader</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39; &#39;</span><span class=p>)[</span><span class=mi>1</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>decoded</span> <span class=o>=</span> <span class=nx>decodeToken</span><span class=p>(</span><span class=nx>token</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>decoded</span><span class=p>.</span><span class=nx>sub</span> <span class=o>||</span> <span class=nx>decoded</span><span class=p>.</span><span class=nx>userId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// IP 주소 사용 (실제로는 X-Forwarded-For 등 고려 필요)
</span></span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>clientIp</span> <span class=o>=</span> <span class=nx>metadata</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;x-forwarded-for&#39;</span><span class=p>)</span> <span class=o>||</span> <span class=s1>&#39;unknown&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>clientIp</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=grpc-api의-장점과-단점>gRPC API의 장점과 단점<a hidden class=anchor aria-hidden=true href=#grpc-api의-장점과-단점>#</a></h3><h4 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h4><ol><li><strong>높은 성능</strong>:<ul><li>HTTP/2 기반으로 요청 멀티플렉싱이 가능하다.</li><li>Protocol Buffers의 바이너리 직렬화는 JSON보다 더 작고 빠르게 처리된다.</li><li>같은 작업에 대해 REST API보다 네트워크 대역폭을 적게 사용한다.</li></ul></li><li><strong>강력한 타입 안전성</strong>:<ul><li>서비스 계약이 <code>.proto</code> 파일로 명확하게 정의된다.</li><li>컴파일 시점에 타입 오류를 발견할 수 있어 런타임 오류가 줄어든다.</li><li>API 변경 시 호환성 문제를 쉽게 감지할 수 있다.</li></ul></li><li><strong>다양한 언어 지원</strong>:<ul><li>Java, Go, Python, Ruby, C++, JavaScript 등 다양한 언어에 대한 코드 생성을 지원한다.</li><li>다른 언어로 작성된 서비스 간에도 원활한 통신이 가능하다.</li></ul></li><li><strong>양방향 스트리밍</strong>:<ul><li>실시간 통신, 대용량 데이터 전송 등 복잡한 통신 패턴을 쉽게 구현할 수 있다.</li><li>클라이언트-서버 간 지속적인 연결을 통해 효율적인 데이터 교환이 가능하다.</li></ul></li><li><strong>코드 생성</strong>:<ul><li>자동 생성된 클라이언트와 서버 코드로 개발 속도가 향상됩니다.</li><li>직렬화, 역직렬화, 네트워킹 로직을 매번 작성할 필요가 없습니다.</li></ul></li><li><strong>상호 운용성</strong>:<ul><li>다양한 환경과 프레임워크 간에 일관된 방식으로 통신할 수 있습니다.</li><li>마이크로서비스 아키텍처에 특히 적합합니다.</li></ul></li></ol><h4 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h4><ol><li><strong>학습 곡선</strong>:<ul><li>Protocol Buffers, RPC 개념, 스트리밍 패턴 등 새로운 개념 학습이 필요합니다.</li><li>REST와 같은 잘 알려진 패턴에 비해 초기 진입 장벽이 더 높을 수 있습니다.</li></ul></li><li><strong>브라우저 지원 제한</strong>:<ul><li>웹 브라우저는 기본적으로 gRPC를 직접 지원하지 않습니다.</li><li>브라우저에서 사용하려면 gRPC-Web과 같은 추가적인 프록시나 변환 계층이 필요합니다.</li></ul></li><li><strong>디버깅의 어려움</strong>:<ul><li>바이너리 프로토콜이기 때문에 일반 HTTP 도구로 요청을 쉽게 검사하거나 테스트하기 어렵습니다.</li><li>특수한 도구(예: grpcurl, BloomRPC 등)가 필요합니다.</li></ul></li><li><strong>성숙도</strong>:<ul><li>REST에 비해 생태계와 도구가 덜 성숙했지만, 빠르게 개선되고 있습니다.</li><li>일부 기능(예: 파일 업로드)에 대한 표준화된 접근 방식이 아직 발전 중입니다.</li></ul></li><li><strong>방화벽 및 프록시 문제</strong>:<ul><li>일부 네트워크 환경에서는 HTTP/2 트래픽이 방화벽이나 프록시에 의해 차단될 수 있습니다.</li><li>특히 레거시 네트워크 인프라에서 문제가 발생할 수 있습니다.</li></ul></li></ol><h3 id=grpc-api와-다른-api-스타일-비교>gRPC API와 다른 API 스타일 비교<a hidden class=anchor aria-hidden=true href=#grpc-api와-다른-api-스타일-비교>#</a></h3><h4 id=grpc-vs-rest>gRPC vs. REST<a hidden class=anchor aria-hidden=true href=#grpc-vs-rest>#</a></h4><table><thead><tr><th>특성</th><th>gRPC</th><th>REST</th></tr></thead><tbody><tr><td>프로토콜</td><td>HTTP/2</td><td>주로 HTTP/1.1</td></tr><tr><td>데이터 형식</td><td>Protocol Buffers(바이너리)</td><td>주로 JSON(텍스트)</td></tr><tr><td>계약</td><td>강력한 타입의.proto 파일</td><td>느슨한 계약(OpenAPI로 문서화 가능)</td></tr><tr><td>스트리밍</td><td>네 가지 스트리밍 패턴 지원</td><td>제한적(Server-Sent Events, WebSockets 필요)</td></tr><tr><td>코드 생성</td><td>내장되어 있음</td><td>별도 도구 필요(Swagger 등)</td></tr><tr><td>브라우저 지원</td><td>제한적(gRPC-Web 필요)</td><td>네이티브 지원</td></tr><tr><td>디버깅 용이성</td><td>특수 도구 필요</td><td>브라우저, curl로 쉽게 디버깅</td></tr><tr><td>성능</td><td>높은 처리량, 낮은 지연 시간</td><td>중간 수준의 성능</td></tr><tr><td>학습 곡선</td><td>다소 가파름</td><td>상대적으로 완만함</td></tr></tbody></table><p><strong>언제 gRPC를 선택해야 하나요?</strong></p><ul><li>마이크로서비스 간 내부 통신</li><li>높은 성능이 필요한 경우</li><li>다양한 프로그래밍 언어 지원이 필요한 경우</li><li>양방향 스트리밍이 필요한 경우</li></ul><p><strong>언제 REST를 선택해야 하나요?</strong></p><ul><li>공개 API 제공</li><li>브라우저에서 직접 호출해야 하는 경우</li><li>단순한 리소스 중심 API</li><li>더 넓은 생태계와 도구에 의존해야 하는 경우</li></ul><h4 id=grpc-vs-graphql>gRPC vs. GraphQL<a hidden class=anchor aria-hidden=true href=#grpc-vs-graphql>#</a></h4><table><thead><tr><th>특성</th><th>gRPC</th><th>GraphQL</th></tr></thead><tbody><tr><td>설계 철학</td><td>RPC(원격 프로시저 호출)</td><td>쿼리 언어</td></tr><tr><td>주요 용도</td><td>서비스 간 통신</td><td>클라이언트에 맞춘 데이터 가져오기</td></tr><tr><td>데이터 형식</td><td>Protocol Buffers</td><td>JSON</td></tr><tr><td>서비스 정의</td><td>.proto 파일</td><td>GraphQL 스키마</td></tr><tr><td>오버페칭 문제</td><td>존재할 수 있음</td><td>해결됨(클라이언트가 필요한 필드 지정)</td></tr><tr><td>성능</td><td>매우 높음</td><td>중간~높음(구현에 따라 다름)</td></tr><tr><td>클라이언트 유연성</td><td>고정된 엔드포인트</td><td>클라이언트가 쿼리 구성</td></tr><tr><td>캐싱</td><td>복잡함</td><td>클라이언트 측 캐싱에 최적화됨</td></tr></tbody></table><p><strong>언제 gRPC를 선택해야 하나요?</strong></p><ul><li>서버 간 통신</li><li>미리 정의된 서비스 인터페이스</li><li>스트리밍 데이터 처리</li><li>최대 성능이 필요한 경우</li></ul><p><strong>언제 GraphQL을 선택해야 하나요?</strong></p><ul><li>다양한 클라이언트 요구사항 지원</li><li>모바일 애플리케이션 백엔드</li><li>오버페칭/언더페칭 방지가 중요한 경우</li><li>클라이언트가 필요한 데이터를 정확히 지정해야 하는 경우</li></ul><h4 id=grpc-vs-websocket>gRPC vs. WebSocket<a hidden class=anchor aria-hidden=true href=#grpc-vs-websocket>#</a></h4><table><thead><tr><th>특성</th><th>gRPC</th><th>WebSocket</th></tr></thead><tbody><tr><td>프로토콜</td><td>HTTP/2 기반</td><td>TCP 기반</td></tr><tr><td>구조</td><td>구조화된 서비스/메서드</td><td>원시 메시지 스트림</td></tr><tr><td>타입 안전성</td><td>강력한 타입 체크</td><td>프로토콜에 따라 다름(일반적으로 약함)</td></tr><tr><td>양방향 통신</td><td>지원(스트리밍 RPC)</td><td>완전 지원</td></tr><tr><td>브라우저 지원</td><td>제한적(gRPC-Web)</td><td>네이티브 지원</td></tr><tr><td>상태 관리</td><td>상태 비저장(stateless)</td><td>연결 상태 유지(stateful)</td></tr><tr><td>사용 사례</td><td>서비스 간 통신, API</td><td>채팅, 게임, 실시간 대시보드</td></tr></tbody></table><p><strong>언제 gRPC를 선택해야 하나요?</strong></p><ul><li>구조화된 서비스 인터페이스가 필요한 경우</li><li>타입 안전성과 코드 생성이 중요한 경우</li><li>서버-클라이언트 통신 패턴이 명확한 경우</li></ul><p><strong>언제 WebSocket을 선택해야 하나요?</strong></p><ul><li>브라우저에서 직접 실시간 통신이 필요한 경우</li><li>비정형 메시지 교환(채팅 등)</li><li>연결 상태 관리가 중요한 경우</li></ul><h3 id=grpc-구현을-위한-도구와-라이브러리>gRPC 구현을 위한 도구와 라이브러리<a hidden class=anchor aria-hidden=true href=#grpc-구현을-위한-도구와-라이브러리>#</a></h3><h4 id=프로토콜-버퍼-컴파일러>프로토콜 버퍼 컴파일러<a hidden class=anchor aria-hidden=true href=#프로토콜-버퍼-컴파일러>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1>1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2>2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Protocol Buffer 컴파일러 설치 (Ubuntu)</span>
</span></span><span class=line><span class=cl>$ apt-get install -y protobuf-compiler
</span></span><span class=line><span class=cl>$ protoc --version  <span class=c1># 버전 확인</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=주요-언어별-grpc-라이브러리>주요 언어별 gRPC 라이브러리<a hidden class=anchor aria-hidden=true href=#주요-언어별-grpc-라이브러리>#</a></h4><ul><li><strong>Node.js</strong>: <code>@grpc/grpc-js</code> 및 <code>@grpc/proto-loader</code></li><li><strong>Python</strong>: <code>grpcio</code> 및 <code>grpcio-tools</code></li><li><strong>Java</strong>: <code>io.grpc:grpc-all</code></li><li><strong>Go</strong>: <code>google.golang.org/grpc</code></li><li><strong>C#</strong>: <code>Grpc.Core</code> 및 <code>Grpc.Tools</code></li></ul><h4 id=개발-및-테스트-도구>개발 및 테스트 도구<a hidden class=anchor aria-hidden=true href=#개발-및-테스트-도구>#</a></h4><ul><li><strong>Postman</strong>: gRPC 요청 테스트 지원</li><li><strong>BloomRPC</strong>: gRPC 전용 GUI 클라이언트</li><li><strong>gRPCurl</strong>: gRPC 서비스를 위한 curl과 유사한 명령줄 도구</li><li><strong>gRPC Web UI</strong>: 웹 기반 gRPC 테스트 도구</li></ul><h3 id=grpc-api-모니터링-및-디버깅>gRPC API 모니터링 및 디버깅<a hidden class=anchor aria-hidden=true href=#grpc-api-모니터링-및-디버깅>#</a></h3><p>gRPC API를 실제 환경에서 운영할 때는 모니터링과 디버깅이 중요하다.</p><h4 id=로깅-및-추적>로깅 및 추적<a hidden class=anchor aria-hidden=true href=#로깅-및-추적>#</a></h4><p>gRPC 호출을 로깅하고 추적하기 위한 인터셉터를 구현할 수 있다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1> 1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2> 2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3> 3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4> 4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5> 5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6> 6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7> 7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8> 8</a>
</span><span class=lnt id=hl-16-9><a class=lnlinks href=#hl-16-9> 9</a>
</span><span class=lnt id=hl-16-10><a class=lnlinks href=#hl-16-10>10</a>
</span><span class=lnt id=hl-16-11><a class=lnlinks href=#hl-16-11>11</a>
</span><span class=lnt id=hl-16-12><a class=lnlinks href=#hl-16-12>12</a>
</span><span class=lnt id=hl-16-13><a class=lnlinks href=#hl-16-13>13</a>
</span><span class=lnt id=hl-16-14><a class=lnlinks href=#hl-16-14>14</a>
</span><span class=lnt id=hl-16-15><a class=lnlinks href=#hl-16-15>15</a>
</span><span class=lnt id=hl-16-16><a class=lnlinks href=#hl-16-16>16</a>
</span><span class=lnt id=hl-16-17><a class=lnlinks href=#hl-16-17>17</a>
</span><span class=lnt id=hl-16-18><a class=lnlinks href=#hl-16-18>18</a>
</span><span class=lnt id=hl-16-19><a class=lnlinks href=#hl-16-19>19</a>
</span><span class=lnt id=hl-16-20><a class=lnlinks href=#hl-16-20>20</a>
</span><span class=lnt id=hl-16-21><a class=lnlinks href=#hl-16-21>21</a>
</span><span class=lnt id=hl-16-22><a class=lnlinks href=#hl-16-22>22</a>
</span><span class=lnt id=hl-16-23><a class=lnlinks href=#hl-16-23>23</a>
</span><span class=lnt id=hl-16-24><a class=lnlinks href=#hl-16-24>24</a>
</span><span class=lnt id=hl-16-25><a class=lnlinks href=#hl-16-25>25</a>
</span><span class=lnt id=hl-16-26><a class=lnlinks href=#hl-16-26>26</a>
</span><span class=lnt id=hl-16-27><a class=lnlinks href=#hl-16-27>27</a>
</span><span class=lnt id=hl-16-28><a class=lnlinks href=#hl-16-28>28</a>
</span><span class=lnt id=hl-16-29><a class=lnlinks href=#hl-16-29>29</a>
</span><span class=lnt id=hl-16-30><a class=lnlinks href=#hl-16-30>30</a>
</span><span class=lnt id=hl-16-31><a class=lnlinks href=#hl-16-31>31</a>
</span><span class=lnt id=hl-16-32><a class=lnlinks href=#hl-16-32>32</a>
</span><span class=lnt id=hl-16-33><a class=lnlinks href=#hl-16-33>33</a>
</span><span class=lnt id=hl-16-34><a class=lnlinks href=#hl-16-34>34</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 로깅 인터셉터
</span></span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>loggingInterceptor</span><span class=p>(</span><span class=nx>options</span><span class=p>,</span> <span class=nx>nextCall</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=k>new</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>InterceptingCall</span><span class=p>(</span><span class=nx>nextCall</span><span class=p>(</span><span class=nx>options</span><span class=p>),</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>start</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>metadata</span><span class=p>,</span> <span class=nx>listener</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>startTime</span> <span class=o>=</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>();</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>method</span> <span class=o>=</span> <span class=nx>options</span><span class=p>.</span><span class=nx>method_definition</span><span class=p>.</span><span class=nx>path</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[</span><span class=si>${</span><span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>()</span><span class=si>}</span><span class=sb>] gRPC 호출 시작: </span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=c1>// 응답 리스너 래핑
</span></span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>newListener</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>onReceiveMessage</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>message</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[</span><span class=si>${</span><span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>()</span><span class=si>}</span><span class=sb>] 메시지 수신: </span><span class=si>${</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>message</span><span class=p>)</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>          <span class=nx>next</span><span class=p>(</span><span class=nx>message</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=nx>onReceiveStatus</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>status</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=kr>const</span> <span class=nx>duration</span> <span class=o>=</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span> <span class=o>-</span> <span class=nx>startTime</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[</span><span class=si>${</span><span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>()</span><span class=si>}</span><span class=sb>] gRPC 호출 완료: </span><span class=si>${</span><span class=nx>method</span><span class=si>}</span><span class=sb>, 상태: </span><span class=si>${</span><span class=nx>status</span><span class=p>.</span><span class=nx>code</span><span class=si>}</span><span class=sb>, 소요 시간: </span><span class=si>${</span><span class=nx>duration</span><span class=si>}</span><span class=sb>ms`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>          <span class=nx>next</span><span class=p>(</span><span class=nx>status</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>};</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=nx>next</span><span class=p>(</span><span class=nx>metadata</span><span class=p>,</span> <span class=nx>newListener</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>sendMessage</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>message</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[</span><span class=si>${</span><span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>()</span><span class=si>}</span><span class=sb>] 메시지 전송: </span><span class=si>${</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>message</span><span class=p>)</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>next</span><span class=p>(</span><span class=nx>message</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 인터셉터 등록
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>server</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>Server</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>interceptors</span><span class=o>:</span> <span class=p>[</span><span class=nx>loggingInterceptor</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=opentelemetry-통합>OpenTelemetry 통합<a hidden class=anchor aria-hidden=true href=#opentelemetry-통합>#</a></h4><p>OpenTelemetry는 분산 추적을 위한 개방형 표준으로, gRPC와 통합하여 성능 모니터링과 문제 해결을 지원한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1> 1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2> 2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3> 3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4> 4</a>
</span><span class=lnt id=hl-17-5><a class=lnlinks href=#hl-17-5> 5</a>
</span><span class=lnt id=hl-17-6><a class=lnlinks href=#hl-17-6> 6</a>
</span><span class=lnt id=hl-17-7><a class=lnlinks href=#hl-17-7> 7</a>
</span><span class=lnt id=hl-17-8><a class=lnlinks href=#hl-17-8> 8</a>
</span><span class=lnt id=hl-17-9><a class=lnlinks href=#hl-17-9> 9</a>
</span><span class=lnt id=hl-17-10><a class=lnlinks href=#hl-17-10>10</a>
</span><span class=lnt id=hl-17-11><a class=lnlinks href=#hl-17-11>11</a>
</span><span class=lnt id=hl-17-12><a class=lnlinks href=#hl-17-12>12</a>
</span><span class=lnt id=hl-17-13><a class=lnlinks href=#hl-17-13>13</a>
</span><span class=lnt id=hl-17-14><a class=lnlinks href=#hl-17-14>14</a>
</span><span class=lnt id=hl-17-15><a class=lnlinks href=#hl-17-15>15</a>
</span><span class=lnt id=hl-17-16><a class=lnlinks href=#hl-17-16>16</a>
</span><span class=lnt id=hl-17-17><a class=lnlinks href=#hl-17-17>17</a>
</span><span class=lnt id=hl-17-18><a class=lnlinks href=#hl-17-18>18</a>
</span><span class=lnt id=hl-17-19><a class=lnlinks href=#hl-17-19>19</a>
</span><span class=lnt id=hl-17-20><a class=lnlinks href=#hl-17-20>20</a>
</span><span class=lnt id=hl-17-21><a class=lnlinks href=#hl-17-21>21</a>
</span><span class=lnt id=hl-17-22><a class=lnlinks href=#hl-17-22>22</a>
</span><span class=lnt id=hl-17-23><a class=lnlinks href=#hl-17-23>23</a>
</span><span class=lnt id=hl-17-24><a class=lnlinks href=#hl-17-24>24</a>
</span><span class=lnt id=hl-17-25><a class=lnlinks href=#hl-17-25>25</a>
</span><span class=lnt id=hl-17-26><a class=lnlinks href=#hl-17-26>26</a>
</span><span class=lnt id=hl-17-27><a class=lnlinks href=#hl-17-27>27</a>
</span><span class=lnt id=hl-17-28><a class=lnlinks href=#hl-17-28>28</a>
</span><span class=lnt id=hl-17-29><a class=lnlinks href=#hl-17-29>29</a>
</span><span class=lnt id=hl-17-30><a class=lnlinks href=#hl-17-30>30</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>opentelemetry</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@opentelemetry/api&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>NodeTracerProvider</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@opentelemetry/sdk-trace-node&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>registerInstrumentations</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@opentelemetry/instrumentation&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>GrpcInstrumentation</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@opentelemetry/instrumentation-grpc&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>ZipkinExporter</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@opentelemetry/exporter-zipkin&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>SimpleSpanProcessor</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@opentelemetry/sdk-trace-base&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 트레이서 제공자 설정
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>provider</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>NodeTracerProvider</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Zipkin 익스포터 설정
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>zipkinExporter</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ZipkinExporter</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>url</span><span class=o>:</span> <span class=s1>&#39;http://localhost:9411/api/v2/spans&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>serviceName</span><span class=o>:</span> <span class=s1>&#39;user-service&#39;</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 스팬 프로세서 등록
</span></span></span><span class=line><span class=cl><span class=nx>provider</span><span class=p>.</span><span class=nx>addSpanProcessor</span><span class=p>(</span><span class=k>new</span> <span class=nx>SimpleSpanProcessor</span><span class=p>(</span><span class=nx>zipkinExporter</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 제공자를 글로벌로 등록
</span></span></span><span class=line><span class=cl><span class=nx>provider</span><span class=p>.</span><span class=nx>register</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// gRPC 계측 등록
</span></span></span><span class=line><span class=cl><span class=nx>registerInstrumentations</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>instrumentations</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=nx>GrpcInstrumentation</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 이제 gRPC 호출이 자동으로 추적됩니다
</span></span></span></code></pre></td></tr></table></div></div><h4 id=상태-모니터링-health-checking>상태 모니터링 (Health Checking)<a hidden class=anchor aria-hidden=true href=#상태-모니터링-health-checking>#</a></h4><p>gRPC는 서비스 상태 확인을 위한 표준 헬스 체킹 프로토콜을 제공한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1> 1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2> 2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3> 3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4> 4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5> 5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6> 6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7> 7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8> 8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9> 9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10>10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11>11</a>
</span><span class=lnt id=hl-18-12><a class=lnlinks href=#hl-18-12>12</a>
</span><span class=lnt id=hl-18-13><a class=lnlinks href=#hl-18-13>13</a>
</span><span class=lnt id=hl-18-14><a class=lnlinks href=#hl-18-14>14</a>
</span><span class=lnt id=hl-18-15><a class=lnlinks href=#hl-18-15>15</a>
</span><span class=lnt id=hl-18-16><a class=lnlinks href=#hl-18-16>16</a>
</span><span class=lnt id=hl-18-17><a class=lnlinks href=#hl-18-17>17</a>
</span><span class=lnt id=hl-18-18><a class=lnlinks href=#hl-18-18>18</a>
</span><span class=lnt id=hl-18-19><a class=lnlinks href=#hl-18-19>19</a>
</span><span class=lnt id=hl-18-20><a class=lnlinks href=#hl-18-20>20</a>
</span><span class=lnt id=hl-18-21><a class=lnlinks href=#hl-18-21>21</a>
</span><span class=lnt id=hl-18-22><a class=lnlinks href=#hl-18-22>22</a>
</span><span class=lnt id=hl-18-23><a class=lnlinks href=#hl-18-23>23</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-protobuf data-lang=protobuf><span class=line><span class=cl><span class=c1>// health.proto
</span></span></span><span class=line><span class=cl><span class=n>syntax</span> <span class=o>=</span> <span class=s>&#34;proto3&#34;</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nn>grpc</span><span class=o>.</span><span class=n>health.v1</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=kd>message</span> <span class=nc>HealthCheckRequest</span> <span class=p>{</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kt>string</span> <span class=kd>service</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=kd>message</span> <span class=nc>HealthCheckResponse</span> <span class=p>{</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kd>enum</span> <span class=n>ServingStatus</span> <span class=p>{</span><span class=err>
</span></span></span><span class=line><span class=cl>    <span class=n>UNKNOWN</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl>    <span class=n>SERVING</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl>    <span class=n>NOT_SERVING</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl>    <span class=n>SERVICE_UNKNOWN</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=p>}</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=n>ServingStatus</span> <span class=n>status</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=kd>service</span> <span class=n>Health</span> <span class=p>{</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=k>rpc</span> <span class=n>Check</span><span class=p>(</span><span class=n>HealthCheckRequest</span><span class=p>)</span> <span class=k>returns</span> <span class=p>(</span><span class=n>HealthCheckResponse</span><span class=p>);</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=k>rpc</span> <span class=n>Watch</span><span class=p>(</span><span class=n>HealthCheckRequest</span><span class=p>)</span> <span class=k>returns</span> <span class=p>(</span><span class=n>stream</span> <span class=n>HealthCheckResponse</span><span class=p>);</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><p>Node.js에서 구현 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1> 1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2> 2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3> 3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4> 4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5> 5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6> 6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7> 7</a>
</span><span class=lnt id=hl-19-8><a class=lnlinks href=#hl-19-8> 8</a>
</span><span class=lnt id=hl-19-9><a class=lnlinks href=#hl-19-9> 9</a>
</span><span class=lnt id=hl-19-10><a class=lnlinks href=#hl-19-10>10</a>
</span><span class=lnt id=hl-19-11><a class=lnlinks href=#hl-19-11>11</a>
</span><span class=lnt id=hl-19-12><a class=lnlinks href=#hl-19-12>12</a>
</span><span class=lnt id=hl-19-13><a class=lnlinks href=#hl-19-13>13</a>
</span><span class=lnt id=hl-19-14><a class=lnlinks href=#hl-19-14>14</a>
</span><span class=lnt id=hl-19-15><a class=lnlinks href=#hl-19-15>15</a>
</span><span class=lnt id=hl-19-16><a class=lnlinks href=#hl-19-16>16</a>
</span><span class=lnt id=hl-19-17><a class=lnlinks href=#hl-19-17>17</a>
</span><span class=lnt id=hl-19-18><a class=lnlinks href=#hl-19-18>18</a>
</span><span class=lnt id=hl-19-19><a class=lnlinks href=#hl-19-19>19</a>
</span><span class=lnt id=hl-19-20><a class=lnlinks href=#hl-19-20>20</a>
</span><span class=lnt id=hl-19-21><a class=lnlinks href=#hl-19-21>21</a>
</span><span class=lnt id=hl-19-22><a class=lnlinks href=#hl-19-22>22</a>
</span><span class=lnt id=hl-19-23><a class=lnlinks href=#hl-19-23>23</a>
</span><span class=lnt id=hl-19-24><a class=lnlinks href=#hl-19-24>24</a>
</span><span class=lnt id=hl-19-25><a class=lnlinks href=#hl-19-25>25</a>
</span><span class=lnt id=hl-19-26><a class=lnlinks href=#hl-19-26>26</a>
</span><span class=lnt id=hl-19-27><a class=lnlinks href=#hl-19-27>27</a>
</span><span class=lnt id=hl-19-28><a class=lnlinks href=#hl-19-28>28</a>
</span><span class=lnt id=hl-19-29><a class=lnlinks href=#hl-19-29>29</a>
</span><span class=lnt id=hl-19-30><a class=lnlinks href=#hl-19-30>30</a>
</span><span class=lnt id=hl-19-31><a class=lnlinks href=#hl-19-31>31</a>
</span><span class=lnt id=hl-19-32><a class=lnlinks href=#hl-19-32>32</a>
</span><span class=lnt id=hl-19-33><a class=lnlinks href=#hl-19-33>33</a>
</span><span class=lnt id=hl-19-34><a class=lnlinks href=#hl-19-34>34</a>
</span><span class=lnt id=hl-19-35><a class=lnlinks href=#hl-19-35>35</a>
</span><span class=lnt id=hl-19-36><a class=lnlinks href=#hl-19-36>36</a>
</span><span class=lnt id=hl-19-37><a class=lnlinks href=#hl-19-37>37</a>
</span><span class=lnt id=hl-19-38><a class=lnlinks href=#hl-19-38>38</a>
</span><span class=lnt id=hl-19-39><a class=lnlinks href=#hl-19-39>39</a>
</span><span class=lnt id=hl-19-40><a class=lnlinks href=#hl-19-40>40</a>
</span><span class=lnt id=hl-19-41><a class=lnlinks href=#hl-19-41>41</a>
</span><span class=lnt id=hl-19-42><a class=lnlinks href=#hl-19-42>42</a>
</span><span class=lnt id=hl-19-43><a class=lnlinks href=#hl-19-43>43</a>
</span><span class=lnt id=hl-19-44><a class=lnlinks href=#hl-19-44>44</a>
</span><span class=lnt id=hl-19-45><a class=lnlinks href=#hl-19-45>45</a>
</span><span class=lnt id=hl-19-46><a class=lnlinks href=#hl-19-46>46</a>
</span><span class=lnt id=hl-19-47><a class=lnlinks href=#hl-19-47>47</a>
</span><span class=lnt id=hl-19-48><a class=lnlinks href=#hl-19-48>48</a>
</span><span class=lnt id=hl-19-49><a class=lnlinks href=#hl-19-49>49</a>
</span><span class=lnt id=hl-19-50><a class=lnlinks href=#hl-19-50>50</a>
</span><span class=lnt id=hl-19-51><a class=lnlinks href=#hl-19-51>51</a>
</span><span class=lnt id=hl-19-52><a class=lnlinks href=#hl-19-52>52</a>
</span><span class=lnt id=hl-19-53><a class=lnlinks href=#hl-19-53>53</a>
</span><span class=lnt id=hl-19-54><a class=lnlinks href=#hl-19-54>54</a>
</span><span class=lnt id=hl-19-55><a class=lnlinks href=#hl-19-55>55</a>
</span><span class=lnt id=hl-19-56><a class=lnlinks href=#hl-19-56>56</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>grpc</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@grpc/grpc-js&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>protoLoader</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@grpc/proto-loader&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>path</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;path&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 헬스 체크 proto 로드
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>HEALTH_PROTO_PATH</span> <span class=o>=</span> <span class=nx>path</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=nx>__dirname</span><span class=p>,</span> <span class=s1>&#39;protos/health.proto&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>healthPackageDefinition</span> <span class=o>=</span> <span class=nx>protoLoader</span><span class=p>.</span><span class=nx>loadSync</span><span class=p>(</span><span class=nx>HEALTH_PROTO_PATH</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>healthProto</span> <span class=o>=</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>loadPackageDefinition</span><span class=p>(</span><span class=nx>healthPackageDefinition</span><span class=p>).</span><span class=nx>grpc</span><span class=p>.</span><span class=nx>health</span><span class=p>.</span><span class=nx>v1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 서비스 상태 저장
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>serviceStatus</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;&#39;</span><span class=o>:</span> <span class=p>{</span> <span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;SERVING&#39;</span> <span class=p>},</span>  <span class=c1>// 기본 상태 (전체 서버)
</span></span></span><span class=line><span class=cl>  <span class=s1>&#39;userservice.UserService&#39;</span><span class=o>:</span> <span class=p>{</span> <span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;SERVING&#39;</span> <span class=p>}</span>  <span class=c1>// 특정 서비스 상태
</span></span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 헬스 체크 서비스 구현
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>healthImplementation</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>check</span><span class=o>:</span> <span class=p>(</span><span class=nx>call</span><span class=p>,</span> <span class=nx>callback</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>service</span> <span class=o>=</span> <span class=nx>call</span><span class=p>.</span><span class=nx>request</span><span class=p>.</span><span class=nx>service</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>serviceStatus</span><span class=p>[</span><span class=nx>service</span><span class=p>])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>callback</span><span class=p>(</span><span class=kc>null</span><span class=p>,</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=nx>status</span><span class=o>:</span> <span class=nx>healthProto</span><span class=p>.</span><span class=nx>HealthCheckResponse</span><span class=p>.</span><span class=nx>ServingStatus</span><span class=p>[</span><span class=nx>serviceStatus</span><span class=p>[</span><span class=nx>service</span><span class=p>].</span><span class=nx>status</span><span class=p>]</span> 
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>callback</span><span class=p>(</span><span class=kc>null</span><span class=p>,</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=nx>status</span><span class=o>:</span> <span class=nx>healthProto</span><span class=p>.</span><span class=nx>HealthCheckResponse</span><span class=p>.</span><span class=nx>ServingStatus</span><span class=p>.</span><span class=nx>SERVICE_UNKNOWN</span> 
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>watch</span><span class=o>:</span> <span class=p>(</span><span class=nx>call</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>service</span> <span class=o>=</span> <span class=nx>call</span><span class=p>.</span><span class=nx>request</span><span class=p>.</span><span class=nx>service</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>serviceStatus</span><span class=p>[</span><span class=nx>service</span><span class=p>])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>call</span><span class=p>.</span><span class=nx>write</span><span class=p>({</span> 
</span></span><span class=line><span class=cl>        <span class=nx>status</span><span class=o>:</span> <span class=nx>healthProto</span><span class=p>.</span><span class=nx>HealthCheckResponse</span><span class=p>.</span><span class=nx>ServingStatus</span><span class=p>.</span><span class=nx>SERVICE_UNKNOWN</span> 
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>      <span class=nx>call</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 초기 상태 전송
</span></span></span><span class=line><span class=cl>    <span class=nx>call</span><span class=p>.</span><span class=nx>write</span><span class=p>({</span> 
</span></span><span class=line><span class=cl>      <span class=nx>status</span><span class=o>:</span> <span class=nx>healthProto</span><span class=p>.</span><span class=nx>HealthCheckResponse</span><span class=p>.</span><span class=nx>ServingStatus</span><span class=p>[</span><span class=nx>serviceStatus</span><span class=p>[</span><span class=nx>service</span><span class=p>].</span><span class=nx>status</span><span class=p>]</span> 
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 실제 구현에서는 서비스 상태 변경 이벤트를 구독하고
</span></span></span><span class=line><span class=cl>    <span class=c1>// 상태가 변경될 때마다 새 상태를 전송할 수 있습니다
</span></span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 메인 서버에 헬스 체크 서비스 추가
</span></span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>addHealthService</span><span class=p>(</span><span class=nx>server</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>server</span><span class=p>.</span><span class=nx>addService</span><span class=p>(</span><span class=nx>healthProto</span><span class=p>.</span><span class=nx>Health</span><span class=p>.</span><span class=nx>service</span><span class=p>,</span> <span class=nx>healthImplementation</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=디버깅-도구>디버깅 도구<a hidden class=anchor aria-hidden=true href=#디버깅-도구>#</a></h4><p>gRPC API 디버깅을 위한 주요 도구들:</p><ol><li><p><strong>grpcurl</strong>: curl과 유사한 커맨드라인 도구로, gRPC 서비스에 요청을 보낼 수 있다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1>1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2>2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3>3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4>4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 서비스 리스트 조회</span>
</span></span><span class=line><span class=cl>grpcurl -plaintext localhost:50051 list
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 특정 서비스 메서드 호출</span>
</span></span><span class=line><span class=cl>grpcurl -plaintext -d <span class=s1>&#39;{&#34;user_id&#34;: &#34;1&#34;}&#39;</span> localhost:50051 userservice.UserService/GetUser
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>BloomRPC</strong>: gRPC용 GUI 클라이언트로, Postman과 유사한 인터페이스를 제공한다.</p></li><li><p><strong>gRPC Web UI</strong>: 웹 기반 gRPC 클라이언트로, 서비스 검색 및 테스트가 가능하다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1>1</a>
</span><span class=lnt id=hl-21-2><a class=lnlinks href=#hl-21-2>2</a>
</span><span class=lnt id=hl-21-3><a class=lnlinks href=#hl-21-3>3</a>
</span><span class=lnt id=hl-21-4><a class=lnlinks href=#hl-21-4>4</a>
</span><span class=lnt id=hl-21-5><a class=lnlinks href=#hl-21-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 설치</span>
</span></span><span class=line><span class=cl>npm install -g grpc-web-ui
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 실행</span>
</span></span><span class=line><span class=cl>grpc-web-ui
</span></span></code></pre></td></tr></table></div></div></li></ol><h3 id=실제-사용-사례>실제 사용 사례<a hidden class=anchor aria-hidden=true href=#실제-사용-사례>#</a></h3><p>gRPC는 다음과 같은 시나리오에서 특히 유용하다:</p><ol><li><strong>마이크로서비스</strong>: 내부 서비스 간의 효율적인 통신</li><li><strong>모바일 애플리케이션</strong>: 저대역폭 환경에서의 효율적인 통신</li><li><strong>다중 언어 시스템</strong>: 다양한 언어로 작성된 서비스 간의 통신</li><li><strong>실시간 서비스</strong>: 채팅, 게임, 협업 도구와 같은 양방향 스트리밍이 필요한 서비스</li><li><strong>IoT 애플리케이션</strong>: 제한된 리소스 환경에서의 효율적인 통신</li></ol><h3 id=grpc-api-구현하기-단계별-안내>gRPC API 구현하기: 단계별 안내<a hidden class=anchor aria-hidden=true href=#grpc-api-구현하기-단계별-안내>#</a></h3><p>gRPC API를 실제로 구현하는 방법을 단계별로 살펴보자.<br>간단한 예제로 Node.js를 사용하겠지만, 다른 언어에서도 유사한 절차를 따른다.</p><h4 id=1단계-프로젝트-설정>1단계: 프로젝트 설정<a hidden class=anchor aria-hidden=true href=#1단계-프로젝트-설정>#</a></h4><p>먼저 필요한 패키지를 설치한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1>1</a>
</span><span class=lnt id=hl-22-2><a class=lnlinks href=#hl-22-2>2</a>
</span><span class=lnt id=hl-22-3><a class=lnlinks href=#hl-22-3>3</a>
</span><span class=lnt id=hl-22-4><a class=lnlinks href=#hl-22-4>4</a>
</span><span class=lnt id=hl-22-5><a class=lnlinks href=#hl-22-5>5</a>
</span><span class=lnt id=hl-22-6><a class=lnlinks href=#hl-22-6>6</a>
</span><span class=lnt id=hl-22-7><a class=lnlinks href=#hl-22-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 프로젝트 디렉토리 생성 및 초기화</span>
</span></span><span class=line><span class=cl>mkdir grpc-example
</span></span><span class=line><span class=cl><span class=nb>cd</span> grpc-example
</span></span><span class=line><span class=cl>npm init -y
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 필요한 패키지 설치</span>
</span></span><span class=line><span class=cl>npm install @grpc/grpc-js @grpc/proto-loader
</span></span></code></pre></td></tr></table></div></div><h4 id=2단계-서비스-정의하기>2단계: 서비스 정의하기<a hidden class=anchor aria-hidden=true href=#2단계-서비스-정의하기>#</a></h4><p><code>.proto</code> 파일을 생성하여 서비스를 정의한다. 간단한 사용자 서비스를 예로 들어보면:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-23-1><a class=lnlinks href=#hl-23-1> 1</a>
</span><span class=lnt id=hl-23-2><a class=lnlinks href=#hl-23-2> 2</a>
</span><span class=lnt id=hl-23-3><a class=lnlinks href=#hl-23-3> 3</a>
</span><span class=lnt id=hl-23-4><a class=lnlinks href=#hl-23-4> 4</a>
</span><span class=lnt id=hl-23-5><a class=lnlinks href=#hl-23-5> 5</a>
</span><span class=lnt id=hl-23-6><a class=lnlinks href=#hl-23-6> 6</a>
</span><span class=lnt id=hl-23-7><a class=lnlinks href=#hl-23-7> 7</a>
</span><span class=lnt id=hl-23-8><a class=lnlinks href=#hl-23-8> 8</a>
</span><span class=lnt id=hl-23-9><a class=lnlinks href=#hl-23-9> 9</a>
</span><span class=lnt id=hl-23-10><a class=lnlinks href=#hl-23-10>10</a>
</span><span class=lnt id=hl-23-11><a class=lnlinks href=#hl-23-11>11</a>
</span><span class=lnt id=hl-23-12><a class=lnlinks href=#hl-23-12>12</a>
</span><span class=lnt id=hl-23-13><a class=lnlinks href=#hl-23-13>13</a>
</span><span class=lnt id=hl-23-14><a class=lnlinks href=#hl-23-14>14</a>
</span><span class=lnt id=hl-23-15><a class=lnlinks href=#hl-23-15>15</a>
</span><span class=lnt id=hl-23-16><a class=lnlinks href=#hl-23-16>16</a>
</span><span class=lnt id=hl-23-17><a class=lnlinks href=#hl-23-17>17</a>
</span><span class=lnt id=hl-23-18><a class=lnlinks href=#hl-23-18>18</a>
</span><span class=lnt id=hl-23-19><a class=lnlinks href=#hl-23-19>19</a>
</span><span class=lnt id=hl-23-20><a class=lnlinks href=#hl-23-20>20</a>
</span><span class=lnt id=hl-23-21><a class=lnlinks href=#hl-23-21>21</a>
</span><span class=lnt id=hl-23-22><a class=lnlinks href=#hl-23-22>22</a>
</span><span class=lnt id=hl-23-23><a class=lnlinks href=#hl-23-23>23</a>
</span><span class=lnt id=hl-23-24><a class=lnlinks href=#hl-23-24>24</a>
</span><span class=lnt id=hl-23-25><a class=lnlinks href=#hl-23-25>25</a>
</span><span class=lnt id=hl-23-26><a class=lnlinks href=#hl-23-26>26</a>
</span><span class=lnt id=hl-23-27><a class=lnlinks href=#hl-23-27>27</a>
</span><span class=lnt id=hl-23-28><a class=lnlinks href=#hl-23-28>28</a>
</span><span class=lnt id=hl-23-29><a class=lnlinks href=#hl-23-29>29</a>
</span><span class=lnt id=hl-23-30><a class=lnlinks href=#hl-23-30>30</a>
</span><span class=lnt id=hl-23-31><a class=lnlinks href=#hl-23-31>31</a>
</span><span class=lnt id=hl-23-32><a class=lnlinks href=#hl-23-32>32</a>
</span><span class=lnt id=hl-23-33><a class=lnlinks href=#hl-23-33>33</a>
</span><span class=lnt id=hl-23-34><a class=lnlinks href=#hl-23-34>34</a>
</span><span class=lnt id=hl-23-35><a class=lnlinks href=#hl-23-35>35</a>
</span><span class=lnt id=hl-23-36><a class=lnlinks href=#hl-23-36>36</a>
</span><span class=lnt id=hl-23-37><a class=lnlinks href=#hl-23-37>37</a>
</span><span class=lnt id=hl-23-38><a class=lnlinks href=#hl-23-38>38</a>
</span><span class=lnt id=hl-23-39><a class=lnlinks href=#hl-23-39>39</a>
</span><span class=lnt id=hl-23-40><a class=lnlinks href=#hl-23-40>40</a>
</span><span class=lnt id=hl-23-41><a class=lnlinks href=#hl-23-41>41</a>
</span><span class=lnt id=hl-23-42><a class=lnlinks href=#hl-23-42>42</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-protobuf data-lang=protobuf><span class=line><span class=cl><span class=c1>// 파일: protos/user_service.proto
</span></span></span><span class=line><span class=cl><span class=n>syntax</span> <span class=o>=</span> <span class=s>&#34;proto3&#34;</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nn>userservice</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=c1>// 사용자 서비스 정의
</span></span></span><span class=line><span class=cl><span class=kd>service</span> <span class=n>UserService</span> <span class=p>{</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=c1>// 사용자 정보 조회
</span></span></span><span class=line><span class=cl>  <span class=k>rpc</span> <span class=n>GetUser</span> <span class=p>(</span><span class=n>UserRequest</span><span class=p>)</span> <span class=k>returns</span> <span class=p>(</span><span class=n>UserResponse</span><span class=p>);</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=err>
</span></span></span><span class=line><span class=cl>  <span class=c1>// 사용자 목록 스트리밍
</span></span></span><span class=line><span class=cl>  <span class=k>rpc</span> <span class=n>ListUsers</span> <span class=p>(</span><span class=n>UsersRequest</span><span class=p>)</span> <span class=k>returns</span> <span class=p>(</span><span class=n>stream</span> <span class=n>UserResponse</span><span class=p>);</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=err>
</span></span></span><span class=line><span class=cl>  <span class=c1>// 사용자 생성
</span></span></span><span class=line><span class=cl>  <span class=k>rpc</span> <span class=n>CreateUser</span> <span class=p>(</span><span class=n>CreateUserRequest</span><span class=p>)</span> <span class=k>returns</span> <span class=p>(</span><span class=n>UserResponse</span><span class=p>);</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=c1>// 사용자 조회 요청
</span></span></span><span class=line><span class=cl><span class=kd>message</span> <span class=nc>UserRequest</span> <span class=p>{</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kt>string</span> <span class=n>user_id</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=c1>// 사용자 목록 요청
</span></span></span><span class=line><span class=cl><span class=kd>message</span> <span class=nc>UsersRequest</span> <span class=p>{</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kt>int32</span> <span class=n>limit</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>  <span class=c1>// 조회할 최대 사용자 수
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=c1>// 사용자 생성 요청
</span></span></span><span class=line><span class=cl><span class=kd>message</span> <span class=nc>CreateUserRequest</span> <span class=p>{</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kt>string</span> <span class=n>name</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kt>string</span> <span class=n>email</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kt>int32</span> <span class=n>age</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=c1>// 사용자 응답
</span></span></span><span class=line><span class=cl><span class=kd>message</span> <span class=nc>UserResponse</span> <span class=p>{</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kt>string</span> <span class=n>user_id</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kt>string</span> <span class=n>name</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kt>string</span> <span class=n>email</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kt>int32</span> <span class=n>age</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl>  <span class=kt>string</span> <span class=n>created_at</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=3단계-서버-구현하기>3단계: 서버 구현하기<a hidden class=anchor aria-hidden=true href=#3단계-서버-구현하기>#</a></h4><p>이제 이 서비스를 구현하는 gRPC 서버를 작성한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1> 1</a>
</span><span class=lnt id=hl-24-2><a class=lnlinks href=#hl-24-2> 2</a>
</span><span class=lnt id=hl-24-3><a class=lnlinks href=#hl-24-3> 3</a>
</span><span class=lnt id=hl-24-4><a class=lnlinks href=#hl-24-4> 4</a>
</span><span class=lnt id=hl-24-5><a class=lnlinks href=#hl-24-5> 5</a>
</span><span class=lnt id=hl-24-6><a class=lnlinks href=#hl-24-6> 6</a>
</span><span class=lnt id=hl-24-7><a class=lnlinks href=#hl-24-7> 7</a>
</span><span class=lnt id=hl-24-8><a class=lnlinks href=#hl-24-8> 8</a>
</span><span class=lnt id=hl-24-9><a class=lnlinks href=#hl-24-9> 9</a>
</span><span class=lnt id=hl-24-10><a class=lnlinks href=#hl-24-10>10</a>
</span><span class=lnt id=hl-24-11><a class=lnlinks href=#hl-24-11>11</a>
</span><span class=lnt id=hl-24-12><a class=lnlinks href=#hl-24-12>12</a>
</span><span class=lnt id=hl-24-13><a class=lnlinks href=#hl-24-13>13</a>
</span><span class=lnt id=hl-24-14><a class=lnlinks href=#hl-24-14>14</a>
</span><span class=lnt id=hl-24-15><a class=lnlinks href=#hl-24-15>15</a>
</span><span class=lnt id=hl-24-16><a class=lnlinks href=#hl-24-16>16</a>
</span><span class=lnt id=hl-24-17><a class=lnlinks href=#hl-24-17>17</a>
</span><span class=lnt id=hl-24-18><a class=lnlinks href=#hl-24-18>18</a>
</span><span class=lnt id=hl-24-19><a class=lnlinks href=#hl-24-19>19</a>
</span><span class=lnt id=hl-24-20><a class=lnlinks href=#hl-24-20>20</a>
</span><span class=lnt id=hl-24-21><a class=lnlinks href=#hl-24-21>21</a>
</span><span class=lnt id=hl-24-22><a class=lnlinks href=#hl-24-22>22</a>
</span><span class=lnt id=hl-24-23><a class=lnlinks href=#hl-24-23>23</a>
</span><span class=lnt id=hl-24-24><a class=lnlinks href=#hl-24-24>24</a>
</span><span class=lnt id=hl-24-25><a class=lnlinks href=#hl-24-25>25</a>
</span><span class=lnt id=hl-24-26><a class=lnlinks href=#hl-24-26>26</a>
</span><span class=lnt id=hl-24-27><a class=lnlinks href=#hl-24-27>27</a>
</span><span class=lnt id=hl-24-28><a class=lnlinks href=#hl-24-28>28</a>
</span><span class=lnt id=hl-24-29><a class=lnlinks href=#hl-24-29>29</a>
</span><span class=lnt id=hl-24-30><a class=lnlinks href=#hl-24-30>30</a>
</span><span class=lnt id=hl-24-31><a class=lnlinks href=#hl-24-31>31</a>
</span><span class=lnt id=hl-24-32><a class=lnlinks href=#hl-24-32>32</a>
</span><span class=lnt id=hl-24-33><a class=lnlinks href=#hl-24-33>33</a>
</span><span class=lnt id=hl-24-34><a class=lnlinks href=#hl-24-34>34</a>
</span><span class=lnt id=hl-24-35><a class=lnlinks href=#hl-24-35>35</a>
</span><span class=lnt id=hl-24-36><a class=lnlinks href=#hl-24-36>36</a>
</span><span class=lnt id=hl-24-37><a class=lnlinks href=#hl-24-37>37</a>
</span><span class=lnt id=hl-24-38><a class=lnlinks href=#hl-24-38>38</a>
</span><span class=lnt id=hl-24-39><a class=lnlinks href=#hl-24-39>39</a>
</span><span class=lnt id=hl-24-40><a class=lnlinks href=#hl-24-40>40</a>
</span><span class=lnt id=hl-24-41><a class=lnlinks href=#hl-24-41>41</a>
</span><span class=lnt id=hl-24-42><a class=lnlinks href=#hl-24-42>42</a>
</span><span class=lnt id=hl-24-43><a class=lnlinks href=#hl-24-43>43</a>
</span><span class=lnt id=hl-24-44><a class=lnlinks href=#hl-24-44>44</a>
</span><span class=lnt id=hl-24-45><a class=lnlinks href=#hl-24-45>45</a>
</span><span class=lnt id=hl-24-46><a class=lnlinks href=#hl-24-46>46</a>
</span><span class=lnt id=hl-24-47><a class=lnlinks href=#hl-24-47>47</a>
</span><span class=lnt id=hl-24-48><a class=lnlinks href=#hl-24-48>48</a>
</span><span class=lnt id=hl-24-49><a class=lnlinks href=#hl-24-49>49</a>
</span><span class=lnt id=hl-24-50><a class=lnlinks href=#hl-24-50>50</a>
</span><span class=lnt id=hl-24-51><a class=lnlinks href=#hl-24-51>51</a>
</span><span class=lnt id=hl-24-52><a class=lnlinks href=#hl-24-52>52</a>
</span><span class=lnt id=hl-24-53><a class=lnlinks href=#hl-24-53>53</a>
</span><span class=lnt id=hl-24-54><a class=lnlinks href=#hl-24-54>54</a>
</span><span class=lnt id=hl-24-55><a class=lnlinks href=#hl-24-55>55</a>
</span><span class=lnt id=hl-24-56><a class=lnlinks href=#hl-24-56>56</a>
</span><span class=lnt id=hl-24-57><a class=lnlinks href=#hl-24-57>57</a>
</span><span class=lnt id=hl-24-58><a class=lnlinks href=#hl-24-58>58</a>
</span><span class=lnt id=hl-24-59><a class=lnlinks href=#hl-24-59>59</a>
</span><span class=lnt id=hl-24-60><a class=lnlinks href=#hl-24-60>60</a>
</span><span class=lnt id=hl-24-61><a class=lnlinks href=#hl-24-61>61</a>
</span><span class=lnt id=hl-24-62><a class=lnlinks href=#hl-24-62>62</a>
</span><span class=lnt id=hl-24-63><a class=lnlinks href=#hl-24-63>63</a>
</span><span class=lnt id=hl-24-64><a class=lnlinks href=#hl-24-64>64</a>
</span><span class=lnt id=hl-24-65><a class=lnlinks href=#hl-24-65>65</a>
</span><span class=lnt id=hl-24-66><a class=lnlinks href=#hl-24-66>66</a>
</span><span class=lnt id=hl-24-67><a class=lnlinks href=#hl-24-67>67</a>
</span><span class=lnt id=hl-24-68><a class=lnlinks href=#hl-24-68>68</a>
</span><span class=lnt id=hl-24-69><a class=lnlinks href=#hl-24-69>69</a>
</span><span class=lnt id=hl-24-70><a class=lnlinks href=#hl-24-70>70</a>
</span><span class=lnt id=hl-24-71><a class=lnlinks href=#hl-24-71>71</a>
</span><span class=lnt id=hl-24-72><a class=lnlinks href=#hl-24-72>72</a>
</span><span class=lnt id=hl-24-73><a class=lnlinks href=#hl-24-73>73</a>
</span><span class=lnt id=hl-24-74><a class=lnlinks href=#hl-24-74>74</a>
</span><span class=lnt id=hl-24-75><a class=lnlinks href=#hl-24-75>75</a>
</span><span class=lnt id=hl-24-76><a class=lnlinks href=#hl-24-76>76</a>
</span><span class=lnt id=hl-24-77><a class=lnlinks href=#hl-24-77>77</a>
</span><span class=lnt id=hl-24-78><a class=lnlinks href=#hl-24-78>78</a>
</span><span class=lnt id=hl-24-79><a class=lnlinks href=#hl-24-79>79</a>
</span><span class=lnt id=hl-24-80><a class=lnlinks href=#hl-24-80>80</a>
</span><span class=lnt id=hl-24-81><a class=lnlinks href=#hl-24-81>81</a>
</span><span class=lnt id=hl-24-82><a class=lnlinks href=#hl-24-82>82</a>
</span><span class=lnt id=hl-24-83><a class=lnlinks href=#hl-24-83>83</a>
</span><span class=lnt id=hl-24-84><a class=lnlinks href=#hl-24-84>84</a>
</span><span class=lnt id=hl-24-85><a class=lnlinks href=#hl-24-85>85</a>
</span><span class=lnt id=hl-24-86><a class=lnlinks href=#hl-24-86>86</a>
</span><span class=lnt id=hl-24-87><a class=lnlinks href=#hl-24-87>87</a>
</span><span class=lnt id=hl-24-88><a class=lnlinks href=#hl-24-88>88</a>
</span><span class=lnt id=hl-24-89><a class=lnlinks href=#hl-24-89>89</a>
</span><span class=lnt id=hl-24-90><a class=lnlinks href=#hl-24-90>90</a>
</span><span class=lnt id=hl-24-91><a class=lnlinks href=#hl-24-91>91</a>
</span><span class=lnt id=hl-24-92><a class=lnlinks href=#hl-24-92>92</a>
</span><span class=lnt id=hl-24-93><a class=lnlinks href=#hl-24-93>93</a>
</span><span class=lnt id=hl-24-94><a class=lnlinks href=#hl-24-94>94</a>
</span><span class=lnt id=hl-24-95><a class=lnlinks href=#hl-24-95>95</a>
</span><span class=lnt id=hl-24-96><a class=lnlinks href=#hl-24-96>96</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 파일: server.js
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>grpc</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@grpc/grpc-js&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>protoLoader</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@grpc/proto-loader&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>path</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;path&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Proto 파일 로드
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>PROTO_PATH</span> <span class=o>=</span> <span class=nx>path</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=nx>__dirname</span><span class=p>,</span> <span class=s1>&#39;protos/user_service.proto&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>packageDefinition</span> <span class=o>=</span> <span class=nx>protoLoader</span><span class=p>.</span><span class=nx>loadSync</span><span class=p>(</span><span class=nx>PROTO_PATH</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>keepCase</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>longs</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>enums</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>defaults</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>oneofs</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>userProto</span> <span class=o>=</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>loadPackageDefinition</span><span class=p>(</span><span class=nx>packageDefinition</span><span class=p>).</span><span class=nx>userservice</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 임시 데이터 저장소 (실제 애플리케이션에서는 데이터베이스를 사용할 것입니다)
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>users</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>user_id</span><span class=o>:</span> <span class=s1>&#39;1&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;홍길동&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>email</span><span class=o>:</span> <span class=s1>&#39;hong@example.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>age</span><span class=o>:</span> <span class=mi>30</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>created_at</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>user_id</span><span class=o>:</span> <span class=s1>&#39;2&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;김철수&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>email</span><span class=o>:</span> <span class=s1>&#39;kim@example.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>age</span><span class=o>:</span> <span class=mi>25</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>created_at</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 서비스 메서드 구현
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>getUser</span> <span class=o>=</span> <span class=p>(</span><span class=nx>call</span><span class=p>,</span> <span class=nx>callback</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>userId</span> <span class=o>=</span> <span class=nx>call</span><span class=p>.</span><span class=nx>request</span><span class=p>.</span><span class=nx>user_id</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=nx>users</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span><span class=nx>u</span> <span class=p>=&gt;</span> <span class=nx>u</span><span class=p>.</span><span class=nx>user_id</span> <span class=o>===</span> <span class=nx>userId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>user</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>callback</span><span class=p>(</span><span class=kc>null</span><span class=p>,</span> <span class=nx>user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>callback</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>code</span><span class=o>:</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>status</span><span class=p>.</span><span class=nx>NOT_FOUND</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>details</span><span class=o>:</span> <span class=sb>`User with ID </span><span class=si>${</span><span class=nx>userId</span><span class=si>}</span><span class=sb> not found`</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>listUsers</span> <span class=o>=</span> <span class=p>(</span><span class=nx>call</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>limit</span> <span class=o>=</span> <span class=nx>call</span><span class=p>.</span><span class=nx>request</span><span class=p>.</span><span class=nx>limit</span> <span class=o>||</span> <span class=nx>users</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 스트리밍 응답을 보냅니다
</span></span></span><span class=line><span class=cl>  <span class=nx>users</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=nx>limit</span><span class=p>).</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>user</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>call</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=nx>user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 스트림 종료
</span></span></span><span class=line><span class=cl>  <span class=nx>call</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>createUser</span> <span class=o>=</span> <span class=p>(</span><span class=nx>call</span><span class=p>,</span> <span class=nx>callback</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>user_id</span><span class=o>:</span> <span class=p>(</span><span class=nx>users</span><span class=p>.</span><span class=nx>length</span> <span class=o>+</span> <span class=mi>1</span><span class=p>).</span><span class=nx>toString</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=nx>call</span><span class=p>.</span><span class=nx>request</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>email</span><span class=o>:</span> <span class=nx>call</span><span class=p>.</span><span class=nx>request</span><span class=p>.</span><span class=nx>email</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>age</span><span class=o>:</span> <span class=nx>call</span><span class=p>.</span><span class=nx>request</span><span class=p>.</span><span class=nx>age</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>created_at</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>users</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>callback</span><span class=p>(</span><span class=kc>null</span><span class=p>,</span> <span class=nx>user</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 서버 시작
</span></span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>startServer</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>server</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>Server</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=nx>server</span><span class=p>.</span><span class=nx>addService</span><span class=p>(</span><span class=nx>userProto</span><span class=p>.</span><span class=nx>UserService</span><span class=p>.</span><span class=nx>service</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>getUser</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>listUsers</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>createUser</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>server</span><span class=p>.</span><span class=nx>bindAsync</span><span class=p>(</span><span class=s1>&#39;0.0.0.0:50051&#39;</span><span class=p>,</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>ServerCredentials</span><span class=p>.</span><span class=nx>createInsecure</span><span class=p>(),</span> <span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>port</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failed to bind server:&#39;</span><span class=p>,</span> <span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Server running at http://0.0.0.0:</span><span class=si>${</span><span class=nx>port</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>server</span><span class=p>.</span><span class=nx>start</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>startServer</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=4단계-클라이언트-구현하기>4단계: 클라이언트 구현하기<a hidden class=anchor aria-hidden=true href=#4단계-클라이언트-구현하기>#</a></h4><p>gRPC 서비스를 호출하는 클라이언트를 구현한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-25-1><a class=lnlinks href=#hl-25-1>  1</a>
</span><span class=lnt id=hl-25-2><a class=lnlinks href=#hl-25-2>  2</a>
</span><span class=lnt id=hl-25-3><a class=lnlinks href=#hl-25-3>  3</a>
</span><span class=lnt id=hl-25-4><a class=lnlinks href=#hl-25-4>  4</a>
</span><span class=lnt id=hl-25-5><a class=lnlinks href=#hl-25-5>  5</a>
</span><span class=lnt id=hl-25-6><a class=lnlinks href=#hl-25-6>  6</a>
</span><span class=lnt id=hl-25-7><a class=lnlinks href=#hl-25-7>  7</a>
</span><span class=lnt id=hl-25-8><a class=lnlinks href=#hl-25-8>  8</a>
</span><span class=lnt id=hl-25-9><a class=lnlinks href=#hl-25-9>  9</a>
</span><span class=lnt id=hl-25-10><a class=lnlinks href=#hl-25-10> 10</a>
</span><span class=lnt id=hl-25-11><a class=lnlinks href=#hl-25-11> 11</a>
</span><span class=lnt id=hl-25-12><a class=lnlinks href=#hl-25-12> 12</a>
</span><span class=lnt id=hl-25-13><a class=lnlinks href=#hl-25-13> 13</a>
</span><span class=lnt id=hl-25-14><a class=lnlinks href=#hl-25-14> 14</a>
</span><span class=lnt id=hl-25-15><a class=lnlinks href=#hl-25-15> 15</a>
</span><span class=lnt id=hl-25-16><a class=lnlinks href=#hl-25-16> 16</a>
</span><span class=lnt id=hl-25-17><a class=lnlinks href=#hl-25-17> 17</a>
</span><span class=lnt id=hl-25-18><a class=lnlinks href=#hl-25-18> 18</a>
</span><span class=lnt id=hl-25-19><a class=lnlinks href=#hl-25-19> 19</a>
</span><span class=lnt id=hl-25-20><a class=lnlinks href=#hl-25-20> 20</a>
</span><span class=lnt id=hl-25-21><a class=lnlinks href=#hl-25-21> 21</a>
</span><span class=lnt id=hl-25-22><a class=lnlinks href=#hl-25-22> 22</a>
</span><span class=lnt id=hl-25-23><a class=lnlinks href=#hl-25-23> 23</a>
</span><span class=lnt id=hl-25-24><a class=lnlinks href=#hl-25-24> 24</a>
</span><span class=lnt id=hl-25-25><a class=lnlinks href=#hl-25-25> 25</a>
</span><span class=lnt id=hl-25-26><a class=lnlinks href=#hl-25-26> 26</a>
</span><span class=lnt id=hl-25-27><a class=lnlinks href=#hl-25-27> 27</a>
</span><span class=lnt id=hl-25-28><a class=lnlinks href=#hl-25-28> 28</a>
</span><span class=lnt id=hl-25-29><a class=lnlinks href=#hl-25-29> 29</a>
</span><span class=lnt id=hl-25-30><a class=lnlinks href=#hl-25-30> 30</a>
</span><span class=lnt id=hl-25-31><a class=lnlinks href=#hl-25-31> 31</a>
</span><span class=lnt id=hl-25-32><a class=lnlinks href=#hl-25-32> 32</a>
</span><span class=lnt id=hl-25-33><a class=lnlinks href=#hl-25-33> 33</a>
</span><span class=lnt id=hl-25-34><a class=lnlinks href=#hl-25-34> 34</a>
</span><span class=lnt id=hl-25-35><a class=lnlinks href=#hl-25-35> 35</a>
</span><span class=lnt id=hl-25-36><a class=lnlinks href=#hl-25-36> 36</a>
</span><span class=lnt id=hl-25-37><a class=lnlinks href=#hl-25-37> 37</a>
</span><span class=lnt id=hl-25-38><a class=lnlinks href=#hl-25-38> 38</a>
</span><span class=lnt id=hl-25-39><a class=lnlinks href=#hl-25-39> 39</a>
</span><span class=lnt id=hl-25-40><a class=lnlinks href=#hl-25-40> 40</a>
</span><span class=lnt id=hl-25-41><a class=lnlinks href=#hl-25-41> 41</a>
</span><span class=lnt id=hl-25-42><a class=lnlinks href=#hl-25-42> 42</a>
</span><span class=lnt id=hl-25-43><a class=lnlinks href=#hl-25-43> 43</a>
</span><span class=lnt id=hl-25-44><a class=lnlinks href=#hl-25-44> 44</a>
</span><span class=lnt id=hl-25-45><a class=lnlinks href=#hl-25-45> 45</a>
</span><span class=lnt id=hl-25-46><a class=lnlinks href=#hl-25-46> 46</a>
</span><span class=lnt id=hl-25-47><a class=lnlinks href=#hl-25-47> 47</a>
</span><span class=lnt id=hl-25-48><a class=lnlinks href=#hl-25-48> 48</a>
</span><span class=lnt id=hl-25-49><a class=lnlinks href=#hl-25-49> 49</a>
</span><span class=lnt id=hl-25-50><a class=lnlinks href=#hl-25-50> 50</a>
</span><span class=lnt id=hl-25-51><a class=lnlinks href=#hl-25-51> 51</a>
</span><span class=lnt id=hl-25-52><a class=lnlinks href=#hl-25-52> 52</a>
</span><span class=lnt id=hl-25-53><a class=lnlinks href=#hl-25-53> 53</a>
</span><span class=lnt id=hl-25-54><a class=lnlinks href=#hl-25-54> 54</a>
</span><span class=lnt id=hl-25-55><a class=lnlinks href=#hl-25-55> 55</a>
</span><span class=lnt id=hl-25-56><a class=lnlinks href=#hl-25-56> 56</a>
</span><span class=lnt id=hl-25-57><a class=lnlinks href=#hl-25-57> 57</a>
</span><span class=lnt id=hl-25-58><a class=lnlinks href=#hl-25-58> 58</a>
</span><span class=lnt id=hl-25-59><a class=lnlinks href=#hl-25-59> 59</a>
</span><span class=lnt id=hl-25-60><a class=lnlinks href=#hl-25-60> 60</a>
</span><span class=lnt id=hl-25-61><a class=lnlinks href=#hl-25-61> 61</a>
</span><span class=lnt id=hl-25-62><a class=lnlinks href=#hl-25-62> 62</a>
</span><span class=lnt id=hl-25-63><a class=lnlinks href=#hl-25-63> 63</a>
</span><span class=lnt id=hl-25-64><a class=lnlinks href=#hl-25-64> 64</a>
</span><span class=lnt id=hl-25-65><a class=lnlinks href=#hl-25-65> 65</a>
</span><span class=lnt id=hl-25-66><a class=lnlinks href=#hl-25-66> 66</a>
</span><span class=lnt id=hl-25-67><a class=lnlinks href=#hl-25-67> 67</a>
</span><span class=lnt id=hl-25-68><a class=lnlinks href=#hl-25-68> 68</a>
</span><span class=lnt id=hl-25-69><a class=lnlinks href=#hl-25-69> 69</a>
</span><span class=lnt id=hl-25-70><a class=lnlinks href=#hl-25-70> 70</a>
</span><span class=lnt id=hl-25-71><a class=lnlinks href=#hl-25-71> 71</a>
</span><span class=lnt id=hl-25-72><a class=lnlinks href=#hl-25-72> 72</a>
</span><span class=lnt id=hl-25-73><a class=lnlinks href=#hl-25-73> 73</a>
</span><span class=lnt id=hl-25-74><a class=lnlinks href=#hl-25-74> 74</a>
</span><span class=lnt id=hl-25-75><a class=lnlinks href=#hl-25-75> 75</a>
</span><span class=lnt id=hl-25-76><a class=lnlinks href=#hl-25-76> 76</a>
</span><span class=lnt id=hl-25-77><a class=lnlinks href=#hl-25-77> 77</a>
</span><span class=lnt id=hl-25-78><a class=lnlinks href=#hl-25-78> 78</a>
</span><span class=lnt id=hl-25-79><a class=lnlinks href=#hl-25-79> 79</a>
</span><span class=lnt id=hl-25-80><a class=lnlinks href=#hl-25-80> 80</a>
</span><span class=lnt id=hl-25-81><a class=lnlinks href=#hl-25-81> 81</a>
</span><span class=lnt id=hl-25-82><a class=lnlinks href=#hl-25-82> 82</a>
</span><span class=lnt id=hl-25-83><a class=lnlinks href=#hl-25-83> 83</a>
</span><span class=lnt id=hl-25-84><a class=lnlinks href=#hl-25-84> 84</a>
</span><span class=lnt id=hl-25-85><a class=lnlinks href=#hl-25-85> 85</a>
</span><span class=lnt id=hl-25-86><a class=lnlinks href=#hl-25-86> 86</a>
</span><span class=lnt id=hl-25-87><a class=lnlinks href=#hl-25-87> 87</a>
</span><span class=lnt id=hl-25-88><a class=lnlinks href=#hl-25-88> 88</a>
</span><span class=lnt id=hl-25-89><a class=lnlinks href=#hl-25-89> 89</a>
</span><span class=lnt id=hl-25-90><a class=lnlinks href=#hl-25-90> 90</a>
</span><span class=lnt id=hl-25-91><a class=lnlinks href=#hl-25-91> 91</a>
</span><span class=lnt id=hl-25-92><a class=lnlinks href=#hl-25-92> 92</a>
</span><span class=lnt id=hl-25-93><a class=lnlinks href=#hl-25-93> 93</a>
</span><span class=lnt id=hl-25-94><a class=lnlinks href=#hl-25-94> 94</a>
</span><span class=lnt id=hl-25-95><a class=lnlinks href=#hl-25-95> 95</a>
</span><span class=lnt id=hl-25-96><a class=lnlinks href=#hl-25-96> 96</a>
</span><span class=lnt id=hl-25-97><a class=lnlinks href=#hl-25-97> 97</a>
</span><span class=lnt id=hl-25-98><a class=lnlinks href=#hl-25-98> 98</a>
</span><span class=lnt id=hl-25-99><a class=lnlinks href=#hl-25-99> 99</a>
</span><span class=lnt id=hl-25-100><a class=lnlinks href=#hl-25-100>100</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 파일: client.js
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>grpc</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@grpc/grpc-js&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>protoLoader</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@grpc/proto-loader&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>path</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;path&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Proto 파일 로드 (서버와 동일)
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>PROTO_PATH</span> <span class=o>=</span> <span class=nx>path</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=nx>__dirname</span><span class=p>,</span> <span class=s1>&#39;protos/user_service.proto&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>packageDefinition</span> <span class=o>=</span> <span class=nx>protoLoader</span><span class=p>.</span><span class=nx>loadSync</span><span class=p>(</span><span class=nx>PROTO_PATH</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>keepCase</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>longs</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>enums</span><span class=o>:</span> <span class=nb>String</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>defaults</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>oneofs</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>userProto</span> <span class=o>=</span> <span class=nx>grpc</span><span class=p>.</span><span class=nx>loadPackageDefinition</span><span class=p>(</span><span class=nx>packageDefinition</span><span class=p>).</span><span class=nx>userservice</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 클라이언트 생성
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>client</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>userProto</span><span class=p>.</span><span class=nx>UserService</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;localhost:50051&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>grpc</span><span class=p>.</span><span class=nx>credentials</span><span class=p>.</span><span class=nx>createInsecure</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용자 조회 메서드 호출
</span></span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>getUser</span><span class=p>(</span><span class=nx>userId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>client</span><span class=p>.</span><span class=nx>getUser</span><span class=p>({</span> <span class=nx>user_id</span><span class=o>:</span> <span class=nx>userId</span> <span class=p>},</span> <span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>reject</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=nx>resolve</span><span class=p>(</span><span class=nx>response</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용자 목록 스트리밍
</span></span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>listUsers</span><span class=p>(</span><span class=nx>limit</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>users</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>call</span> <span class=o>=</span> <span class=nx>client</span><span class=p>.</span><span class=nx>listUsers</span><span class=p>({</span> <span class=nx>limit</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>call</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;data&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>user</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>users</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Received user:&#39;</span><span class=p>,</span> <span class=nx>user</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>call</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;end&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Streaming completed&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>resolve</span><span class=p>(</span><span class=nx>users</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>call</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;error&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Streaming error:&#39;</span><span class=p>,</span> <span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>reject</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용자 생성 메서드 호출
</span></span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>createUser</span><span class=p>(</span><span class=nx>userData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>client</span><span class=p>.</span><span class=nx>createUser</span><span class=p>(</span><span class=nx>userData</span><span class=p>,</span> <span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>response</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>reject</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=nx>resolve</span><span class=p>(</span><span class=nx>response</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 메서드 호출 테스트
</span></span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 사용자 생성 테스트
</span></span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Creating a new user...&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>newUser</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>createUser</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;이영희&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>email</span><span class=o>:</span> <span class=s1>&#39;lee@example.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>age</span><span class=o>:</span> <span class=mi>28</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Created user:&#39;</span><span class=p>,</span> <span class=nx>newUser</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 사용자 조회 테스트
</span></span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nFetching user with ID 1...&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>getUser</span><span class=p>(</span><span class=s1>&#39;1&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;User details:&#39;</span><span class=p>,</span> <span class=nx>user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 사용자 목록 조회 테스트
</span></span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\nFetching all users (streaming)...&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>users</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>listUsers</span><span class=p>(</span><span class=mi>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Received </span><span class=si>${</span><span class=nx>users</span><span class=p>.</span><span class=nx>length</span><span class=si>}</span><span class=sb> users in total`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>main</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=5단계-실행하기>5단계: 실행하기<a hidden class=anchor aria-hidden=true href=#5단계-실행하기>#</a></h4><p>별도의 터미널에서 서버와 클라이언트를 실행한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1>1</a>
</span><span class=lnt id=hl-26-2><a class=lnlinks href=#hl-26-2>2</a>
</span><span class=lnt id=hl-26-3><a class=lnlinks href=#hl-26-3>3</a>
</span><span class=lnt id=hl-26-4><a class=lnlinks href=#hl-26-4>4</a>
</span><span class=lnt id=hl-26-5><a class=lnlinks href=#hl-26-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 터미널 1: 서버 시작</span>
</span></span><span class=line><span class=cl>node server.js
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 터미널 2: 클라이언트 실행</span>
</span></span><span class=line><span class=cl>node client.js
</span></span></code></pre></td></tr></table></div></div><p>이것으로 기본적인 gRPC API 구현이 완료되었다. 이 예제는 단일 요청-응답(GetUser, CreateUser)과 서버 스트리밍(ListUsers)을 보여준다.</p><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>gRPC API vs. gRPC</h2></header><div class=entry-content><p>gRPC API vs. gRPC gRPC와 gRPC API는 현대 마이크로서비스 아키텍처에서 중요한 역할을 하는 기술이다.
gRPC 기본 개념 gRPC는 Google에서 개발한 고성능, 오픈소스 RPC(Remote Procedure Call) 프레임워크이다. 2015년에 처음 공개되었으며, HTTP/2 프로토콜 위에 구축되어 있다. ‘g’는 원래 Google을 의미했지만, 현재는 독립적인 오픈소스 프로젝트로 발전했다.
gRPC는 다음과 같은 주요 특징을 가지고 있다:
Protocol Buffers(protobuf)를 IDL(Interface Definition Language)로 사용 HTTP/2 기반 통신으로 높은 성능 제공 양방향 스트리밍 지원 다양한 프로그래밍 언어 지원 (C++, Java, Python, Go, Ruby, C# 등) 코드 생성 도구를 통한 클라이언트 및 서버 코드 자동 생성 gRPC API의 정의와 특징 gRPC API는 gRPC 프레임워크를 사용하여 구현된 API를 의미한다. 즉, gRPC는 기술적 프레임워크이고, gRPC API는 이 프레임워크를 사용하여 구축된 실제 응용 프로그램 인터페이스이다.
...</p></div><footer class=entry-footer><span title='2025-02-28 03:37:00 +0000 UTC'>February 28, 2025</span>&nbsp;·&nbsp;<span>4 min</span>&nbsp;·&nbsp;<span>Me</span></footer><a class=entry-link aria-label="post link to gRPC API vs. gRPC" href=https://buenhyden.github.io/posts/networking--protocols/communication-patterns/synchronous-communication/remote-procedure-calls/grpc/grpc-api-vs-grpc/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Error Handling</h2></header><div class=entry-content><p>Error Handling gRPC는 분산 시스템에서 서비스 간 통신을 위한 강력한 프레임워크이다. 복잡한 분산 환경에서는 네트워크 문제, 서버 장애, 비즈니스 로직 오류 등 다양한 오류 상황이 발생할 수 있다. gRPC는 이러한 다양한 오류 상황을 일관되고 체계적으로 처리하기 위한 포괄적인 오류 처리 메커니즘을 제공한다.
gRPC의 오류 처리는 HTTP/2 상태 코드, gRPC 상태 코드, 그리고 상세 오류 메시지를 조합하여 클라이언트에게 오류 정보를 전달한다. 이 시스템은 모든 지원 언어에서 일관되게 작동하며, 개발자가 다양한 오류 상황에 적절히 대응할 수 있도록 돕는다.
...</p></div><footer class=entry-footer><span title='2025-03-31 08:43:00 +0000 UTC'>March 31, 2025</span>&nbsp;·&nbsp;<span>36 min</span>&nbsp;·&nbsp;<span>Me</span></footer><a class=entry-link aria-label="post link to Error Handling" href=https://buenhyden.github.io/posts/networking--protocols/communication-patterns/synchronous-communication/remote-procedure-calls/grpc/error-handling/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Protocol Buffers</h2></header><div class=entry-content><p>Protocol Buffers (protobuf) Protocol Buffers(이하 protobuf)는 Google에서 개발한 언어 중립적, 플랫폼 중립적, 확장 가능한 구조화된 데이터 직렬화 메커니즘이다. 2008년에 오픈소스로 공개되었으며, 현재는 많은 분산 시스템과 마이크로서비스 아키텍처에서 핵심적인 역할을 담당하고 있다.
protobuf는 XML이나 JSON과 같은 텍스트 기반 직렬화 형식의 대안으로 설계되었으며, 더 작고, 빠르며, 단순한 방식으로 구조화된 데이터를 인코딩하는 것을 목표로 한다. 특히 gRPC 프레임워크의 IDL(Interface Definition Language)로 채택되어 서비스 인터페이스를 정의하는 데 널리 사용된다.
Protocol Buffers는 효율적인 직렬화, 언어 중립성, 스키마 진화 지원 등의 장점으로 인해 분산 시스템과 마이크로서비스 아키텍처에서 널리 사용되고 있다. 특히 gRPC와의 통합을 통해 서비스 간 통신의 표준으로 자리 잡았으며, 높은 성능이 요구되는 환경에서 JSON이나 XML의 강력한 대안으로 작용한다.
...</p></div><footer class=entry-footer><span title='2025-02-28 04:50:00 +0000 UTC'>February 28, 2025</span>&nbsp;·&nbsp;<span>9 min</span>&nbsp;·&nbsp;<span>Me</span></footer><a class=entry-link aria-label="post link to Protocol Buffers" href=https://buenhyden.github.io/posts/networking--protocols/communication-patterns/synchronous-communication/remote-procedure-calls/grpc/protocol-buffers/></a></article></main><footer class=footer><span>&copy; 2026 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>