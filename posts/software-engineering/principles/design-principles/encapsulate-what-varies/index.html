<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Encapsulate What Varies | hyunyoun's Blog</title><meta name=keywords content="System-and-Software-Architecture,Design-Principles"><meta name=description content="Encapsulate What Varies(변하는 것을 캡슐화하라) 는 시스템에서 자주 변경되거나 확장될 가능성이 있는 부분을 별도의 모듈, 클래스, 인터페이스 등으로 분리해 관리하는 설계 원칙이다. 이를 통해 코드의 유연성, 유지보수성, 확장성을 효과적으로 높일 수 있다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-engineering/principles/design-principles/encapsulate-what-varies/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/software-engineering/principles/design-principles/encapsulate-what-varies/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-engineering/principles/design-principles/encapsulate-what-varies/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-engineering/principles/design-principles/encapsulate-what-varies/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Encapsulate What Varies"><meta property="og:description" content="Encapsulate What Varies(변하는 것을 캡슐화하라) 는 시스템에서 자주 변경되거나 확장될 가능성이 있는 부분을 별도의 모듈, 클래스, 인터페이스 등으로 분리해 관리하는 설계 원칙이다. 이를 통해 코드의 유연성, 유지보수성, 확장성을 효과적으로 높일 수 있다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Encapsulate What Varies"><meta name=twitter:description content="Encapsulate What Varies(변하는 것을 캡슐화하라) 는 시스템에서 자주 변경되거나 확장될 가능성이 있는 부분을 별도의 모듈, 클래스, 인터페이스 등으로 분리해 관리하는 설계 원칙이다. 이를 통해 코드의 유연성, 유지보수성, 확장성을 효과적으로 높일 수 있다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"기록하고 기억하고 활용하자.","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Software Engineering","item":"https://buenhyden.github.io/posts/software-engineering/"},{"@type":"ListItem","position":3,"name":"Principles","item":"https://buenhyden.github.io/posts/software-engineering/principles/"},{"@type":"ListItem","position":4,"name":"Design Principles","item":"https://buenhyden.github.io/posts/software-engineering/principles/design-principles/"},{"@type":"ListItem","position":5,"name":"Encapsulate What Varies","item":"https://buenhyden.github.io/posts/software-engineering/principles/design-principles/encapsulate-what-varies/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>기록하고 기억하고 활용하자.</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/>Software Engineering</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/principles/>Principles</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/principles/design-principles/>Design Principles</a></div><h1>Encapsulate What Varies</h1><div class=post-description>Encapsulate What Varies(변하는 것을 캡슐화하라) 는 시스템에서 자주 변경되거나 확장될 가능성이 있는 부분을 별도의 모듈, 클래스, 인터페이스 등으로 분리해 관리하는 설계 원칙이다. 이를 통해 코드의 유연성, 유지보수성, 확장성을 효과적으로 높일 수 있다.</div></header><div class=post-content><h2 id=encapsulate-what-varies>Encapsulate What Varies<a hidden class=anchor aria-hidden=true href=#encapsulate-what-varies>#</a></h2><p>Encapsulate What Varies 는 소프트웨어 설계에서 변화가 예상되는 부분과 그렇지 않은 부분을 분리하여, 변화가 생겨도 시스템 전체에 영향을 최소화하는 원칙이다. 이 원칙은 변화 가능성이 높은 코드 부분을 추상화하고 분리함으로써 시스템의 한 부분이 다른 부분과 독립적으로 변화할 수 있도록 한다. 객체지향 설계, 디자인 패턴, 시스템 아키텍처 등에서 반복적으로 활용되며, 변화에 유연하게 대응할 수 있는 구조를 만드는데 필수적이다. 대표적으로 전략 패턴 (Strategy Pattern), 데코레이터 패턴 (Decorator Pattern) 등에서 적용되며, 실무에서는 API 버전 관리, 플러그인 시스템, 설정 관리 등 다양한 형태로 활용된다.</p><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><p>변하는 것을 캡슐화하라 (Encapsulate What Varies) 는 <strong>시스템에서 변화가 예상되는 부분을 식별하고 이를 안정적인 부분으로부터 분리하여 별도의 모듈로 캡슐화하여 시스템의 다른 부분에 영향을 주지 않도록 하는 설계 원칙</strong> 이다.</p><p>객체지향 프로그래밍, 함수형 프로그래밍, 시스템 아키텍처 등 소프트웨어 전반에 적용될 수 있으며, 전략 패턴, 팩토리 패턴, 플러그인 구조, 설정 파일 분리 등으로 구현할 수 있다.</p><h4 id=핵심-아이디어>핵심 아이디어<a hidden class=anchor aria-hidden=true href=#핵심-아이디어>#</a></h4><ul><li><strong>변화 예측</strong>: 미래에 변경될 가능성이 높은 코드 영역을 식별</li><li><strong>분리</strong>: 변화하는 부분을 안정적인 부분으로부터 독립시킴</li><li><strong>추상화</strong>: 인터페이스나 추상 클래스를 통한 변화 은닉</li><li><strong>독립성</strong>: 각 부분이 서로 독립적으로 진화할 수 있도록 함</li></ul><h4 id=이론적-기반>이론적 기반<a hidden class=anchor aria-hidden=true href=#이론적-기반>#</a></h4><ul><li>**개방 - 폐쇄 원칙 (Open-Closed Principle)**과 밀접한 관련</li><li><strong>단일 책임 원칙 (Single Responsibility Principle)</strong> 지원</li><li>**의존성 역전 원칙 (Dependency Inversion Principle)**의 구현 기반</li></ul><h3 id=배경>배경<a hidden class=anchor aria-hidden=true href=#배경>#</a></h3><p>소프트웨어 개발에서 <strong>유일한 상수는 변화</strong>라는 명제에서 출발한다. 비즈니스 요구사항, 기술 환경, 사용자 요구가 지속적으로 변화하는 현실에서 이러한 변화에 효과적으로 대응할 수 있는 설계 원칙의 필요성이 대두되었다.</p><p>Gang of Four 의 디자인 패턴 책에서 <strong>&ldquo;Consider what should be variable in your design&rdquo;</strong> 라는 원칙으로 제시되었으며, 이는 기존의 재설계 원인에 초점을 맞추는 접근법과는 반대로 <strong>변경 가능한 요소를 미리 고려하는 접근법</strong>을 제시한다.</p><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><h4 id=주요-목적>주요 목적<a hidden class=anchor aria-hidden=true href=#주요-목적>#</a></h4><ol><li><strong>변화 대응력 향상</strong>: 요구사항 변화에 신속하게 대응</li><li><strong>시스템 안정성 확보</strong>: 변경이 다른 부분에 미치는 영향 최소화</li><li><strong>유지보수성 개선</strong>: 코드 수정 시 영향 범위 제한</li><li><strong>확장성 보장</strong>: 새로운 기능 추가 시 기존 코드 최소 변경</li></ol><h4 id=필요성>필요성<a hidden class=anchor aria-hidden=true href=#필요성>#</a></h4><ul><li><strong>복잡성 관리</strong>: 대규모 시스템의 복잡성을 체계적으로 관리</li><li><strong>위험 감소</strong>: 변경으로 인한 버그 발생 위험 최소화</li><li><strong>개발 효율성</strong>: 변경 사항의 국소화를 통한 개발 생산성 향상</li><li><strong>비즈니스 연속성</strong>: 비즈니스 변화에 대한 기술적 대응력 확보</li></ul><h3 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><ul><li>변화가 잦은 부분을 인터페이스, 추상 클래스, 별도의 모듈 등으로 분리.</li><li>나머지 시스템은 변화에 영향을 받지 않도록 보호.</li><li>다양한 구현체 (전략, 정책, 알고리즘 등) 를 손쉽게 교체 가능.</li></ul><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><h4 id=기본-특징>기본 특징<a hidden class=anchor aria-hidden=true href=#기본-특징>#</a></h4><ul><li><strong>예측적 설계</strong>: 미래 변화를 예측하여 설계에 반영</li><li><strong>계층화</strong>: 변화하는 부분과 안정적인 부분의 명확한 분리</li><li><strong>유연성</strong>: 런타임 시 다양한 구현체 교체 가능</li><li><strong>재사용성</strong>: 캡슐화된 컴포넌트의 다양한 컨텍스트에서 재사용</li></ul><h4 id=고급-특징>고급 특징<a hidden class=anchor aria-hidden=true href=#고급-특징>#</a></h4><ul><li><strong>조합 가능성</strong>: 다양한 변화 요소들의 독립적 조합</li><li><strong>테스트 용이성</strong>: 모킹과 테스트가 용이한 구조</li><li><strong>문서화</strong>: 변화 지점의 명확한 식별과 문서화</li><li><strong>성능 최적화</strong>: 변화하지 않는 부분의 최적화 가능</li></ul><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><table><thead><tr><th>원칙명</th><th>정의</th><th>목적/핵심 의도</th><th>실현 방법</th><th>기대 효과</th></tr></thead><tbody><tr><td>변화 식별 원칙 (Change Identification)</td><td>시스템 내에서 자주 변경될 수 있는 요소를 사전에 식별</td><td>무엇이 바뀌는지를 먼저 아는 것이 설계 분리의 전제 조건</td><td>요구사항 분석, 기술/비즈니스 규칙 검토</td><td>변화에 대한 대응 가능성 향상</td></tr><tr><td>분리 원칙 (Separation)</td><td>변화하는 요소를 안정적인 부분으로부터 물리적, 논리적으로 분리</td><td>영향 최소화 및 독립성 확보</td><td>계층 분리, 모듈화, 서비스화</td><td>독립적 테스트/배포 가능, 영향 최소화</td></tr><tr><td>추상화 원칙 (Abstraction)</td><td>구체 구현이 아닌, 안정적인 인터페이스로 변화 요소 은닉</td><td>인터페이스 교체만으로 구현 변경 가능하도록 설계</td><td>Interface, Abstract Class, Protocol</td><td>클라이언트 코드의 안정성 및 유연성 확보</td></tr><tr><td>결합도 최소화 원칙 (Loose Coupling)</td><td>요소 간 직접 의존 최소화</td><td>한 모듈의 변화가 다른 모듈에 영향을 주지 않도록</td><td>의존성 주입 (DI), 이벤트, 메시지 큐</td><td>확장성, 유연성, 테스트 용이성 향상</td></tr><tr><td>응집도 최대화 원칙 (High Cohesion)</td><td>유사한 기능/변화 패턴을 하나의 단위로 묶음</td><td>설계 명확화 및 로직 통일성 강화</td><td>클래스/모듈 내 기능적 유사성 기준으로 그룹화</td><td>유지보수성 및 코드 이해도 향상</td></tr></tbody></table><h3 id=주요-원리>주요 원리<a hidden class=anchor aria-hidden=true href=#주요-원리>#</a></h3><ul><li>변화가 예상되는 부분을 별도의 추상화 계층으로 분리한다.</li><li>인터페이스 (Interface), 추상 클래스 (Abstract Class) 를 활용하여 구현부와 분리한다.</li><li>구체적인 구현은 캡슐 내부에 숨기고, 외부에서는 추상화된 인터페이스만 사용한다.</li></ul><pre class=mermaid>graph TD
    A[요구사항 변화] --&gt; B{변화 감지}
    B --&gt; C[변화 영역 식별]
    C --&gt; D[캡슐화 설계]
    D --&gt; E[인터페이스 정의]
    E --&gt; F[구현체 분리]
    F --&gt; G[클라이언트 코드]
    
    G --&gt; H{변화 필요?}
    H --&gt;|Yes| I[새로운 구현체 생성]
    H --&gt;|No| J[기존 동작 유지]
    
    I --&gt; K[기존 인터페이스 유지]
    K --&gt; L[구현체만 교체]
    L --&gt; M[시스템 안정성 유지]
    
    J --&gt; M
    
    style A fill:#ffcccc
    style D fill:#ccffcc
    style M fill:#ccccff
    
    subgraph &#34;안정적인 부분&#34;
        E
        G
        K
    end
    
    subgraph &#34;변화하는 부분&#34;
        F
        I
        L
    end
</pre><h4 id=기본-작동-메커니즘>기본 작동 메커니즘<a hidden class=anchor aria-hidden=true href=#기본-작동-메커니즘>#</a></h4><ol><li><strong>변화 식별</strong>: 시스템에서 자주 변경되는 코드 영역 감지</li><li><strong>추상화 계층 생성</strong>: 변화하는 부분에 대한 안정적인 인터페이스 정의</li><li><strong>구현 분리</strong>: 구체적인 구현을 인터페이스 뒤로 숨김</li><li><strong>클라이언트 보호</strong>: 클라이언트 코드가 추상화에만 의존하도록 설계</li></ol><h4 id=변화-대응-프로세스>변화 대응 프로세스<a hidden class=anchor aria-hidden=true href=#변화-대응-프로세스>#</a></h4><ol><li><strong>변화 요청 접수</strong>: 새로운 요구사항이나 변경 사항 발생</li><li><strong>영향 범위 분석</strong>: 변화가 미치는 영향 범위 분석</li><li><strong>캡슐화 경계 확인</strong>: 기존 캡슐화 경계의 적절성 검토</li><li><strong>구현체 수정/추가</strong>: 새로운 구현체 생성 또는 기존 구현체 수정</li><li><strong>시스템 안정성 확인</strong>: 다른 부분에 영향이 없음을 확인</li></ol><h3 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h3><pre class=mermaid>graph TB
    subgraph &#34;클라이언트 계층 (Client Layer)&#34;
        C1[클라이언트 A]
        C2[클라이언트 B]
        C3[클라이언트 C]
    end
    
    subgraph &#34;추상화 계층 (Abstraction Layer)&#34;
        I1[인터페이스 A]
        I2[인터페이스 B]
        I3[추상 클래스 C]
    end
    
    subgraph &#34;구현 계층 (Implementation Layer)&#34;
        IMPL1[구현체 A1]
        IMPL2[구현체 A2]
        IMPL3[구현체 B1]
        IMPL4[구현체 B2]
        IMPL5[구현체 C1]
    end
    
    subgraph &#34;변화 관리 계층 (Change Management Layer)&#34;
        CF1[설정 파일]
        DI1[의존성 주입 컨테이너]
        FM1[팩토리 매니저]
    end
    
    C1 --&gt; I1
    C1 --&gt; I2
    C2 --&gt; I2
    C2 --&gt; I3
    C3 --&gt; I1
    C3 --&gt; I3
    
    I1 -.-&gt; IMPL1
    I1 -.-&gt; IMPL2
    I2 -.-&gt; IMPL3
    I2 -.-&gt; IMPL4
    I3 -.-&gt; IMPL5
    
    DI1 --&gt; IMPL1
    DI1 --&gt; IMPL2
    DI1 --&gt; IMPL3
    DI1 --&gt; IMPL4
    DI1 --&gt; IMPL5
    
    CF1 --&gt; DI1
    FM1 --&gt; DI1
    
    style C1 fill:#e1f5fe
    style C2 fill:#e1f5fe
    style C3 fill:#e1f5fe
    style I1 fill:#f3e5f5
    style I2 fill:#f3e5f5
    style I3 fill:#f3e5f5
    style IMPL1 fill:#e8f5e8
    style IMPL2 fill:#e8f5e8
    style IMPL3 fill:#e8f5e8
    style IMPL4 fill:#e8f5e8
    style IMPL5 fill:#e8f5e8
</pre><h4 id=구성-요소>구성 요소<a hidden class=anchor aria-hidden=true href=#구성-요소>#</a></h4><table><thead><tr><th>구분</th><th>구성요소</th><th>기능</th><th>역할</th><th>특징</th></tr></thead><tbody><tr><td>필수</td><td><strong>클라이언트 (Client)</strong></td><td>비즈니스 로직 실행</td><td>추상화에 의존해 작업 수행</td><td>구현체에 대해 모름 (구현 세부사항 은닉)</td></tr><tr><td></td><td><strong>추상화 (Abstraction)</strong></td><td>안정적인 인터페이스 정의</td><td>클라이언트와 구현체를 분리</td><td>인터페이스, 추상 클래스 등으로 구성</td></tr><tr><td></td><td><strong>구현체 (Implementation)</strong></td><td>실제 로직 수행</td><td>추상화를 구현</td><td>변경 가능성이 높고 독립적으로 변경 가능</td></tr><tr><td>선택</td><td><strong>팩토리 (Factory)</strong></td><td>구현체 생성 관리</td><td>생성 로직 캡슐화</td><td>생성 방식에 대한 유연성 제공</td></tr><tr><td></td><td><strong>의존성 주입 컨테이너 (DI Container)</strong></td><td>의존성 자동 해결</td><td>런타임 의존성 주입</td><td>설정만으로 구현체 교체 가능, 생명주기 관리 포함</td></tr><tr><td></td><td><strong>설정 관리자 (Configuration Manager)</strong></td><td>외부 설정 기반 구현체 결정</td><td>런타임 동작 제어</td><td>코드 수정 없이 구현체 변경 가능 (예: YAML, ENV, DB 기반 설정)</td></tr></tbody></table><h3 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h3><table><thead><tr><th>기법</th><th>정의</th><th>구성 요소</th><th>목적</th><th>장점</th><th>적용 상황</th><th>변화하는 부분</th><th>실제 예시 (실무 활용 사례)</th></tr></thead><tbody><tr><td>인터페이스 기반 추상화</td><td>변화하는 기능을 인터페이스/추상 클래스로 추상화</td><td>공통 인터페이스, 다중 구현체, 클라이언트 코드</td><td>구현 은닉, 다형성</td><td>구현체 교체 용이, 테스트 용이, 재사용성</td><td>다양한 구현이 필요한 경우, 외부 교체 필요 시</td><td>구체적 구현 방법, 기술 스택</td><td>결제 시스템에서 PaymentProcessor 인터페이스로 다양한 결제 구현체 캡슐화</td></tr><tr><td>전략 패턴</td><td>알고리즘/정책을 인터페이스로 분리, 런타임 교체 가능</td><td>전략 인터페이스, 구체 전략, 컨텍스트 클래스</td><td>동적 교체, 유연성</td><td>조건문 제거, 확장성, 런타임 교체</td><td>비즈니스 규칙/알고리즘이 자주 바뀔 때</td><td>알고리즘, 정책, 비즈니스 규칙</td><td>할인 정책, 인증 방식, 정렬 알고리즘 등 다양한 전략 캡슐화</td></tr><tr><td>팩토리 패턴</td><td>객체 생성 로직을 팩토리로 분리, 생성과 사용을 분리</td><td>팩토리 인터페이스, 구체 팩토리, 제품 인터페이스/클래스</td><td>생성 로직 은닉, 확장성</td><td>생성 방식 변경 용이, 결합도 감소</td><td>객체 생성 방식이 자주 바뀌거나 다양할 때</td><td>객체 생성 방법, 생성할 타입</td><td>UI 컴포넌트, DB 커넥션, 알림 채널 등 다양한 객체 생성</td></tr><tr><td>데코레이터 패턴</td><td>객체에 동적으로 기능을 추가하는 패턴</td><td>기본 컴포넌트, 데코레이터 인터페이스, 구체 데코레이터</td><td>유연한 확장</td><td>기능 조합 자유, 코드 재사용성</td><td>기능 확장/조합이 자주 필요한 경우</td><td>추가 기능, 부가 기능</td><td>커피/피자 옵션 추가, 웹 미들웨어 (로깅, 인증, 캐싱 등)</td></tr><tr><td>플러그인 구조</td><td>기능 확장을 외부 모듈 (플러그인) 로 분리하는 아키텍처</td><td>핵심 시스템, 플러그인 인터페이스, 플러그인 모듈</td><td>확장성, 유연성</td><td>기능 추가/제거 용이, 핵심 코드 단순화</td><td>외부 기능 확장/모듈화가 필요한 시스템</td><td>확장 기능, 외부 모듈</td><td>CMS 플러그인, 브라우저 확장, 데이터 파이프라인 등</td></tr><tr><td>의존성 주입 (DI)</td><td>객체의 의존성을 외부에서 주입하는 설계 기법</td><td>의존성 인터페이스, 구현체, 주입 메커니즘, DI 컨테이너</td><td>결합도 감소, 테스트</td><td>테스트 용이, 교체/확장 쉬움, 관심사 분리</td><td>환경별 구현 교체, 테스트가 중요한 경우</td><td>의존 객체, 서비스</td><td>서비스 계층 분리 (Spring/Angular), 테스트 시 Mock 주입, 환경별 서비스 구현체 주입</td></tr></tbody></table><h4 id=인터페이스-기반-추상화-interface-based-abstraction>인터페이스 기반 추상화 (Interface-based Abstraction)<a hidden class=anchor aria-hidden=true href=#인터페이스-기반-추상화-interface-based-abstraction>#</a></h4><p>변화하는 부분을 인터페이스 (또는 추상 클래스) 로 추상화하여, 다양한 구현체를 통해 변화에 유연하게 대응하는 기법. 클라이언트는 인터페이스에만 의존한다.</p><p><strong>구성</strong>:</p><ul><li>인터페이스 (Interface)</li><li>구현체 (Implementation)</li><li>클라이언트 (Client)</li></ul><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span><span class=lnt id=hl-2-20><a class=lnlinks href=#hl-2-20>20</a>
</span><span class=lnt id=hl-2-21><a class=lnlinks href=#hl-2-21>21</a>
</span><span class=lnt id=hl-2-22><a class=lnlinks href=#hl-2-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 인터페이스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Logger</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>log</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>msg</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 구현체 1</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>FileLogger</span><span class=p>(</span><span class=n>Logger</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>log</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>msg</span><span class=p>):</span> <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;파일 기록: </span><span class=si>{</span><span class=n>msg</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 구현체 2</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ConsoleLogger</span><span class=p>(</span><span class=n>Logger</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>log</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>msg</span><span class=p>):</span> <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;콘솔 기록: </span><span class=si>{</span><span class=n>msg</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 클라이언트</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>do_logging</span><span class=p>(</span><span class=n>logger</span><span class=p>:</span> <span class=n>Logger</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>logger</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=s2>&#34;로그 메시지&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>do_logging</span><span class=p>(</span><span class=n>FileLogger</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>do_logging</span><span class=p>(</span><span class=n>ConsoleLogger</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=전략-패턴-strategy-pattern>전략 패턴 (Strategy Pattern)<a hidden class=anchor aria-hidden=true href=#전략-패턴-strategy-pattern>#</a></h4><p>알고리즘이나 정책을 인터페이스로 분리하여, 런타임에 동적으로 교체할 수 있게 하는 패턴. 변화하는 알고리즘을 별도의 전략 객체로 캡슐화한다.</p><p><strong>구성</strong>:</p><ul><li>전략 (Strategy) 인터페이스</li><li>구체 전략 (ConcreteStrategy) 클래스</li><li>컨텍스트 (Context) 클래스 (전략을 사용하는 주체)<br><strong>실제 예시</strong>:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span><span class=lnt id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a>
</span><span class=lnt id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a>
</span><span class=lnt id=hl-3-17><a class=lnlinks href=#hl-3-17>17</a>
</span><span class=lnt id=hl-3-18><a class=lnlinks href=#hl-3-18>18</a>
</span><span class=lnt id=hl-3-19><a class=lnlinks href=#hl-3-19>19</a>
</span><span class=lnt id=hl-3-20><a class=lnlinks href=#hl-3-20>20</a>
</span><span class=lnt id=hl-3-21><a class=lnlinks href=#hl-3-21>21</a>
</span><span class=lnt id=hl-3-22><a class=lnlinks href=#hl-3-22>22</a>
</span><span class=lnt id=hl-3-23><a class=lnlinks href=#hl-3-23>23</a>
</span><span class=lnt id=hl-3-24><a class=lnlinks href=#hl-3-24>24</a>
</span><span class=lnt id=hl-3-25><a class=lnlinks href=#hl-3-25>25</a>
</span><span class=lnt id=hl-3-26><a class=lnlinks href=#hl-3-26>26</a>
</span><span class=lnt id=hl-3-27><a class=lnlinks href=#hl-3-27>27</a>
</span><span class=lnt id=hl-3-28><a class=lnlinks href=#hl-3-28>28</a>
</span><span class=lnt id=hl-3-29><a class=lnlinks href=#hl-3-29>29</a>
</span><span class=lnt id=hl-3-30><a class=lnlinks href=#hl-3-30>30</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 전략 인터페이스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ShippingStrategy</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>calculate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 구체적 전략 1</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>FedExStrategy</span><span class=p>(</span><span class=n>ShippingStrategy</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>calculate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mf>10.0</span>  <span class=c1># FedEx 배송비</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 구체적 전략 2</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>UPSStrategy</span><span class=p>(</span><span class=n>ShippingStrategy</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>calculate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mf>8.0</span>  <span class=c1># UPS 배송비</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 컨텍스트: 전략을 사용하는 주체</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ShippingCostCalculator</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>strategy</span><span class=p>:</span> <span class=n>ShippingStrategy</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>strategy</span> <span class=o>=</span> <span class=n>strategy</span>  <span class=c1># 전략 객체 주입</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>calculate_cost</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>strategy</span><span class=o>.</span><span class=n>calculate</span><span class=p>(</span><span class=n>order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>order</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;weight&#34;</span><span class=p>:</span> <span class=mi>2</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>calculator</span> <span class=o>=</span> <span class=n>ShippingCostCalculator</span><span class=p>(</span><span class=n>FedExStrategy</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>calculator</span><span class=o>.</span><span class=n>calculate_cost</span><span class=p>(</span><span class=n>order</span><span class=p>))</span>  <span class=c1># 10.0</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=의존성-주입-dependency-injection-di>의존성 주입 (Dependency Injection, DI)<a hidden class=anchor aria-hidden=true href=#의존성-주입-dependency-injection-di>#</a></h4><p>객체가 직접 의존성을 생성하지 않고, 외부에서 주입받아 결합도를 낮추는 기법. 변화하는 구현체를 외부에서 주입받아 캡슐한다.<br><strong>구성</strong>:</p><ul><li>클라이언트 (Client)</li><li>서비스 (Service)</li><li>인터페이스 (Interface)</li><li>인젝터 (Injector)<br><strong>실제 예시</strong>:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span><span class=lnt id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a>
</span><span class=lnt id=hl-4-16><a class=lnlinks href=#hl-4-16>16</a>
</span><span class=lnt id=hl-4-17><a class=lnlinks href=#hl-4-17>17</a>
</span><span class=lnt id=hl-4-18><a class=lnlinks href=#hl-4-18>18</a>
</span><span class=lnt id=hl-4-19><a class=lnlinks href=#hl-4-19>19</a>
</span><span class=lnt id=hl-4-20><a class=lnlinks href=#hl-4-20>20</a>
</span><span class=lnt id=hl-4-21><a class=lnlinks href=#hl-4-21>21</a>
</span><span class=lnt id=hl-4-22><a class=lnlinks href=#hl-4-22>22</a>
</span><span class=lnt id=hl-4-23><a class=lnlinks href=#hl-4-23>23</a>
</span><span class=lnt id=hl-4-24><a class=lnlinks href=#hl-4-24>24</a>
</span><span class=lnt id=hl-4-25><a class=lnlinks href=#hl-4-25>25</a>
</span><span class=lnt id=hl-4-26><a class=lnlinks href=#hl-4-26>26</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 인터페이스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MessageSender</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>send</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>msg</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 서비스 구현체 1</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>EmailSender</span><span class=p>(</span><span class=n>MessageSender</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>send</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>msg</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;이메일 전송:&#34;</span><span class=p>,</span> <span class=n>msg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 서비스 구현체 2</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SmsSender</span><span class=p>(</span><span class=n>MessageSender</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>send</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>msg</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;SMS 전송:&#34;</span><span class=p>,</span> <span class=n>msg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 클라이언트</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Notifier</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>sender</span><span class=p>:</span> <span class=n>MessageSender</span><span class=p>):</span>  <span class=c1># 생성자 주입</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>sender</span> <span class=o>=</span> <span class=n>sender</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>notify</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>msg</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>sender</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 인젝터 역할</span>
</span></span><span class=line><span class=cl><span class=n>notifier</span> <span class=o>=</span> <span class=n>Notifier</span><span class=p>(</span><span class=n>EmailSender</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>notifier</span><span class=o>.</span><span class=n>notify</span><span class=p>(</span><span class=s2>&#34;환영합니다!&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=팩토리-패턴-factory-pattern>팩토리 패턴 (Factory Pattern)<a hidden class=anchor aria-hidden=true href=#팩토리-패턴-factory-pattern>#</a></h4><p>객체 생성 로직을 별도의 팩토리 객체로 분리하여, 생성과 사용을 분리하는 패턴. 변화하는 객체 생성 방식을 캡슐화한다.<br><strong>구성</strong>:</p><ul><li>팩토리 인터페이스</li><li>구체적 팩토리 클래스</li><li>생성할 객체들의 공통 인터페이스<br><strong>실제 예시</strong>:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span><span class=lnt id=hl-5-18><a class=lnlinks href=#hl-5-18>18</a>
</span><span class=lnt id=hl-5-19><a class=lnlinks href=#hl-5-19>19</a>
</span><span class=lnt id=hl-5-20><a class=lnlinks href=#hl-5-20>20</a>
</span><span class=lnt id=hl-5-21><a class=lnlinks href=#hl-5-21>21</a>
</span><span class=lnt id=hl-5-22><a class=lnlinks href=#hl-5-22>22</a>
</span><span class=lnt id=hl-5-23><a class=lnlinks href=#hl-5-23>23</a>
</span><span class=lnt id=hl-5-24><a class=lnlinks href=#hl-5-24>24</a>
</span><span class=lnt id=hl-5-25><a class=lnlinks href=#hl-5-25>25</a>
</span><span class=lnt id=hl-5-26><a class=lnlinks href=#hl-5-26>26</a>
</span><span class=lnt id=hl-5-27><a class=lnlinks href=#hl-5-27>27</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 제품 인터페이스(여기서는 명시적 인터페이스 대신 메서드 규약)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>Notification</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>send</span><span class=p>(</span><span class=nx>msg</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 구체적 제품 1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>EmailNotification</span> <span class=kr>extends</span> <span class=nx>Notification</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>send</span><span class=p>(</span><span class=nx>msg</span><span class=p>)</span> <span class=p>{</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;이메일:&#34;</span><span class=p>,</span> <span class=nx>msg</span><span class=p>);</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 구체적 제품 2
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>SMSNotification</span> <span class=kr>extends</span> <span class=nx>Notification</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>send</span><span class=p>(</span><span class=nx>msg</span><span class=p>)</span> <span class=p>{</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;SMS:&#34;</span><span class=p>,</span> <span class=nx>msg</span><span class=p>);</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 팩토리
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>NotificationFactory</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>static</span> <span class=nx>create</span><span class=p>(</span><span class=nx>type</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>type</span> <span class=o>===</span> <span class=s2>&#34;email&#34;</span><span class=p>)</span> <span class=k>return</span> <span class=k>new</span> <span class=nx>EmailNotification</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>type</span> <span class=o>===</span> <span class=s2>&#34;sms&#34;</span><span class=p>)</span> <span class=k>return</span> <span class=k>new</span> <span class=nx>SMSNotification</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s2>&#34;알 수 없는 타입&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>notifier</span> <span class=o>=</span> <span class=nx>NotificationFactory</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=s2>&#34;email&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>notifier</span><span class=p>.</span><span class=nx>send</span><span class=p>(</span><span class=s2>&#34;가입을 환영합니다!&#34;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=데코레이터-패턴-decorator-pattern>데코레이터 패턴 (Decorator Pattern)<a hidden class=anchor aria-hidden=true href=#데코레이터-패턴-decorator-pattern>#</a></h4><p>객체에 동적으로 새로운 기능을 추가할 수 있도록 하는 패턴. 변화하거나 추가될 기능을 데코레이터 객체로 분리하여 캡슐화한다.<br><strong>구성</strong>:</p><ul><li>컴포넌트 인터페이스 (Component)</li><li>구체적 컴포넌트 (ConcreteComponent)</li><li>데코레이터 (Decorator)</li><li>구체적 데코레이터 (ConcreteDecorator)<br><strong>실제 예시</strong>:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15>15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16>16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17>17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18>18</a>
</span><span class=lnt id=hl-6-19><a class=lnlinks href=#hl-6-19>19</a>
</span><span class=lnt id=hl-6-20><a class=lnlinks href=#hl-6-20>20</a>
</span><span class=lnt id=hl-6-21><a class=lnlinks href=#hl-6-21>21</a>
</span><span class=lnt id=hl-6-22><a class=lnlinks href=#hl-6-22>22</a>
</span><span class=lnt id=hl-6-23><a class=lnlinks href=#hl-6-23>23</a>
</span><span class=lnt id=hl-6-24><a class=lnlinks href=#hl-6-24>24</a>
</span><span class=lnt id=hl-6-25><a class=lnlinks href=#hl-6-25>25</a>
</span><span class=lnt id=hl-6-26><a class=lnlinks href=#hl-6-26>26</a>
</span><span class=lnt id=hl-6-27><a class=lnlinks href=#hl-6-27>27</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 컴포넌트 인터페이스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Coffee</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>cost</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>2000</span>  <span class=c1># 기본 커피 가격</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 데코레이터 베이스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CoffeeDecorator</span><span class=p>(</span><span class=n>Coffee</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>coffee</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>coffee</span> <span class=o>=</span> <span class=n>coffee</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>cost</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>coffee</span><span class=o>.</span><span class=n>cost</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 구체적 데코레이터</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MilkDecorator</span><span class=p>(</span><span class=n>CoffeeDecorator</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>cost</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>cost</span><span class=p>()</span> <span class=o>+</span> <span class=mi>500</span>  <span class=c1># 우유 추가</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SugarDecorator</span><span class=p>(</span><span class=n>CoffeeDecorator</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>cost</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>cost</span><span class=p>()</span> <span class=o>+</span> <span class=mi>300</span>  <span class=c1># 설탕 추가</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>coffee</span> <span class=o>=</span> <span class=n>Coffee</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>milk_coffee</span> <span class=o>=</span> <span class=n>MilkDecorator</span><span class=p>(</span><span class=n>coffee</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>sugar_milk_coffee</span> <span class=o>=</span> <span class=n>SugarDecorator</span><span class=p>(</span><span class=n>milk_coffee</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>sugar_milk_coffee</span><span class=o>.</span><span class=n>cost</span><span class=p>())</span>  <span class=c1># 2800</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=플러그인-구조-plugin-architecture>플러그인 구조 (Plugin Architecture)<a hidden class=anchor aria-hidden=true href=#플러그인-구조-plugin-architecture>#</a></h4><p>기능 확장을 외부 모듈 (플러그인) 로 분리하여, 시스템의 핵심과 확장 기능을 분리하는 구조. 변화하는 기능을 플러그인으로 캡슐화한다.<br><strong>구성</strong>:</p><ul><li>코어 시스템 (Core)</li><li>플러그인 인터페이스 (Plugin Interface)</li><li>플러그인 (Plugin)<br><strong>실제 예시</strong>:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13>13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14>14</a>
</span><span class=lnt id=hl-7-15><a class=lnlinks href=#hl-7-15>15</a>
</span><span class=lnt id=hl-7-16><a class=lnlinks href=#hl-7-16>16</a>
</span><span class=lnt id=hl-7-17><a class=lnlinks href=#hl-7-17>17</a>
</span><span class=lnt id=hl-7-18><a class=lnlinks href=#hl-7-18>18</a>
</span><span class=lnt id=hl-7-19><a class=lnlinks href=#hl-7-19>19</a>
</span><span class=lnt id=hl-7-20><a class=lnlinks href=#hl-7-20>20</a>
</span><span class=lnt id=hl-7-21><a class=lnlinks href=#hl-7-21>21</a>
</span><span class=lnt id=hl-7-22><a class=lnlinks href=#hl-7-22>22</a>
</span><span class=lnt id=hl-7-23><a class=lnlinks href=#hl-7-23>23</a>
</span><span class=lnt id=hl-7-24><a class=lnlinks href=#hl-7-24>24</a>
</span><span class=lnt id=hl-7-25><a class=lnlinks href=#hl-7-25>25</a>
</span><span class=lnt id=hl-7-26><a class=lnlinks href=#hl-7-26>26</a>
</span><span class=lnt id=hl-7-27><a class=lnlinks href=#hl-7-27>27</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 플러그인 인터페이스(규약)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>Plugin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>execute</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 플러그인 구현
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>PrintPlugin</span> <span class=kr>extends</span> <span class=nx>Plugin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>execute</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span> <span class=p>{</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;출력:&#34;</span><span class=p>,</span> <span class=nx>data</span><span class=p>);</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 코어 시스템
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>CoreSystem</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>plugins</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>register</span><span class=p>(</span><span class=nx>plugin</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>plugins</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>plugin</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>run</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>plugins</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>plugin</span> <span class=p>=&gt;</span> <span class=nx>plugin</span><span class=p>.</span><span class=nx>execute</span><span class=p>(</span><span class=nx>data</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>core</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>CoreSystem</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>core</span><span class=p>.</span><span class=nx>register</span><span class=p>(</span><span class=k>new</span> <span class=nx>PrintPlugin</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=nx>core</span><span class=p>.</span><span class=nx>run</span><span class=p>(</span><span class=s2>&#34;플러그인 테스트&#34;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=장점과-단점>장점과 단점<a hidden class=anchor aria-hidden=true href=#장점과-단점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>✅ 장점</td><td><strong>유연성 (Flexibility)</strong></td><td>기능, 정책, 구현체의 변경 및 추가가 구조에 영향을 주지 않고 가능함</td></tr><tr><td></td><td><strong>유지보수성 (Maintainability)</strong></td><td>변화가 필요한 부분만 캡슐화되어 있으므로 수정이 국소화되고 위험이 감소함</td></tr><tr><td></td><td><strong>확장성 (Extensibility)</strong></td><td>새로운 기능이나 구현체 추가 시 기존 코드 변경 없이 시스템 확장 가능</td></tr><tr><td></td><td><strong>재사용성 (Reusability)</strong></td><td>추상화된 컴포넌트 또는 전략을 다양한 컨텍스트에서 재활용할 수 있음</td></tr><tr><td></td><td><strong>테스트 용이성 (Testability)</strong></td><td>의존성이 분리되어 있어 단위 테스트, Mock 테스트, A/B 테스트가 용이함</td></tr><tr><td></td><td><strong>관심사의 분리 (Separation of Concerns)</strong></td><td>안정적인 부분과 변화하는 부분이 구조적으로 분리되어 코드의 명확성과 가독성이 향상됨</td></tr><tr><td></td><td><strong>설계 일관성 (Design Consistency)</strong></td><td>인터페이스, 추상 클래스 기반 설계로 전체 아키텍처의 통일성과 예측 가능성 확보</td></tr><tr><td>⚠ 단점</td><td><strong>초기 설계 복잡성 (Initial Design Complexity)</strong></td><td>캡슐화를 고려한 설계 구조 수립에 시간과 노력이 요구됨</td></tr><tr><td></td><td><strong>과도한 추상화 (Over-Abstraction)</strong></td><td>예측되지 않는 변화까지 추상화할 경우 불필요한 인터페이스나 클래스가 증가</td></tr><tr><td></td><td><strong>성능 오버헤드 (Performance Overhead)</strong></td><td>추상화 계층과 간접 호출로 인해 약간의 성능 저하 발생 가능</td></tr><tr><td></td><td><strong>디버깅 복잡성 (Debugging Difficulty)</strong></td><td>추상화/위임 구조가 복잡해지면 호출 흐름 추적이 어려워질 수 있음</td></tr><tr><td></td><td><strong>학습 곡선 (Learning Curve)</strong></td><td>디자인 패턴, DI, 전략, 추상화 개념을 팀원 모두가 충분히 이해해야 효과적</td></tr><tr><td></td><td><strong>코드 스캐폴딩 증가 (Code Scaffolding Overhead)</strong></td><td>인터페이스, 구현체, 팩토리, 주입 설정 등 구조적 요소가 많아 초기 생산성이 낮아질 수 있음</td></tr></tbody></table><h3 id=도전-과제>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제>#</a></h3><table><thead><tr><th>도전 과제</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td><strong>변화 예측의 어려움</strong></td><td>어떤 기능이 변화할지 정확히 식별하기 어려워 잘못된 캡슐화 발생 가능</td><td>- 과거 변경 이력 분석 - 도메인 전문가와 협업 - 점진적 리팩토링 접근 적용</td></tr><tr><td><strong>과도한 추상화</strong></td><td>필요 이상으로 추상화를 적용할 경우 오히려 복잡성이 증가</td><td>- 실제 요구 기반 추상화 적용 - 사용 패턴 기반 검증 - 지나친 캡슐화는 피하고 YAGNI 원칙 준수</td></tr><tr><td><strong>적절한 추상화 수준 판단의 어려움</strong></td><td>추상화 수준이 지나치게 일반적이거나 구체적일 경우 유연성 저하 또는 재사용 어려움</td><td>- 반복적 리팩토링을 통한 조정 - 유스케이스 기반 설계 - 도메인 기반 모델링 적용</td></tr><tr><td><strong>성능과 유연성 간의 트레이드오프</strong></td><td>추상화 계층으로 인한 호출 오버헤드 발생 가능</td><td>- 중요 경로 (critical path) 선별적 최적화 - 정적 바인딩 고려 - 캐싱 및 경량 인터페이스 설계</td></tr><tr><td><strong>팀원 간 설계 원칙 이해도 차이</strong></td><td>팀마다 OOP, DI, 전략 패턴 등에 대한 숙련도 격차로 인해 일관성 부족</td><td>- 아키텍처 가이드 문서화 - 설계 리뷰/교육/워크숍 - 코드 리뷰 및 페어 프로그래밍 운영</td></tr><tr><td><strong>과도한 인터페이스 생성</strong></td><td>단순히 추상화 원칙을 따르기 위해 의미 없는 인터페이스가 생성되는 경우</td><td>- 역할 중심의 책임 기반 추상화 적용 - 의미 있는 경계 도출을 우선 고려 - 명확한 구현 책임이 있는 경우에만 분리</td></tr><tr><td><strong>설계 비용 및 초기 생산성 저하</strong></td><td>설계 초기 단계에서 추상화 구조를 준비하는 데 시간과 자원이 소요됨</td><td>MVP 수준에서는 구체 구현 우선 적용 후 점진적 캡슐화 - 리팩토링 기반 캡슐화 전략 활용</td></tr><tr><td><strong>디버깅 복잡성 증가</strong></td><td>추상화 계층이 많아 호출 흐름 파악이 어려워 디버깅 난이도 상승</td><td>- 호출 트레이싱 도구 활용 - 명확한 로깅 전략 수립 IDE 디버거와 연계한 계층 명시화</td></tr></tbody></table><h3 id=분류에-따른-종류>분류에 따른 종류<a hidden class=anchor aria-hidden=true href=#분류에-따른-종류>#</a></h3><table><thead><tr><th><strong>분류 기준</strong></th><th><strong>유형/종류</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>설계 범위 기준</strong></td><td>클래스 수준 캡슐화</td><td>클래스 내부에서 메서드 또는 속성의 변화를 은닉 (e.g. private 메서드)</td></tr><tr><td></td><td>모듈/컴포넌트 수준 캡슐화</td><td>관련 클래스들을 모듈/컴포넌트로 묶어 내부 구현을 은닉</td></tr><tr><td></td><td>서비스 수준 캡슐화</td><td>마이크로서비스 단위로 책임과 변화를 분리</td></tr><tr><td></td><td>시스템 수준 캡슐화</td><td>서브시스템/계층 간 인터페이스를 정의하여 독립적 변경 가능</td></tr><tr><td><strong>변화 대상 기준</strong></td><td>행위 (알고리즘/정책) 캡슐화</td><td>계산 로직, 비즈니스 정책 등의 변경을 전략 객체로 분리</td></tr><tr><td></td><td>생성 방식 캡슐화</td><td>객체 생성 방법의 변경을 팩토리로 추상화</td></tr><tr><td></td><td>상태 캡슐화</td><td>객체의 상태 및 상태 전이 변화를 추상화하여 은닉</td></tr><tr><td></td><td>데이터 구조 캡슐화</td><td>내부 데이터 표현 방식의 변경을 인터페이스로 은닉</td></tr><tr><td></td><td>외부 통신 캡슐화</td><td>외부 시스템과의 연동 또는 메시징 방식의 변경을 Observer/Mediator 로 처리</td></tr><tr><td></td><td>설정 및 환경 의존 캡슐화</td><td>런타임 설정, 환경별 차이 등을 외부 설정이나 DI 로 분리</td></tr><tr><td><strong>구현 방식 기준</strong></td><td>인터페이스 기반</td><td>구현 세부사항을 공통 인터페이스 뒤에 숨김</td></tr><tr><td></td><td>상속 기반</td><td>추상 클래스를 통해 공통 로직 정의 후 하위 클래스에서 세부 구현</td></tr><tr><td></td><td>컴포지션 기반</td><td>객체 간 조합으로 기능 위임, 유연한 구조 제공</td></tr><tr><td></td><td>전략 패턴 기반</td><td>알고리즘을 캡슐화하여 런타임에 교체 가능</td></tr><tr><td></td><td>팩토리/생성자 패턴 기반</td><td>객체 생성을 팩토리에 위임하여 생성 시점의 유연성 확보</td></tr><tr><td></td><td>데코레이터 기반</td><td>기능을 동적으로 추가할 수 있도록 캡슐화</td></tr><tr><td><strong>패턴 기반 분류</strong></td><td>Strategy (전략 패턴)</td><td>알고리즘 또는 정책의 캡슐화 및 교체</td></tr><tr><td></td><td>Factory / Abstract Factory</td><td>객체 생성 방식의 캡슐화</td></tr><tr><td></td><td>Template Method</td><td>알고리즘 구조는 고정하되 일부 단계만 변경</td></tr><tr><td></td><td>Observer / Mediator</td><td>통신 방식 캡슐화, 이벤트 및 중재자 패턴</td></tr><tr><td></td><td>State / Memento</td><td>상태 변화 캡슐화, 상태 기반 동작 처리</td></tr><tr><td></td><td>Adapter / Proxy</td><td>구조 변화 또는 접근 제어의 캡슐화</td></tr><tr><td><strong>적용 목적 기준</strong></td><td>유연성 확보</td><td>알고리즘, 구현, 통신의 변화에 유연하게 대응</td></tr><tr><td></td><td>테스트 용이성 확보</td><td>Mock 기반 테스트, 인터페이스 주입 등을 통한 독립적 테스트 가능</td></tr><tr><td></td><td>재사용성 확보</td><td>다양한 컨텍스트에서 재사용 가능한 구조 제공</td></tr><tr><td></td><td>유지보수성 향상</td><td>변경이 지역적으로 발생, ripple effect 방지</td></tr><tr><td></td><td>시스템 확장성</td><td>새로운 기능 추가 시 기존 코드 수정 최소화</td></tr></tbody></table><h3 id=실무-적용-예시>실무 적용 예시<a hidden class=anchor aria-hidden=true href=#실무-적용-예시>#</a></h3><table><thead><tr><th><strong>도메인</strong></th><th><strong>변화 요소</strong></th><th><strong>캡슐화 방법</strong></th><th><strong>적용 기술/패턴</strong></th><th><strong>적용 효과</strong></th></tr></thead><tbody><tr><td><strong>결제 시스템</strong></td><td>결제 수단 (카드, 페이팔, 간편결제 등)</td><td><code>PaymentProcessor</code> 인터페이스 정의</td><td>전략 패턴 (Strategy Pattern)</td><td>결제 방식 추가/변경 시 기존 코드 변경 없음</td></tr><tr><td><strong>인증 시스템</strong></td><td>인증 방식 (JWT, OAuth, LDAP 등)</td><td><code>AuthenticationProvider</code> 인터페이스 분리</td><td>인터페이스 기반 추상화, DI</td><td>인증 정책 간 유연한 전환 및 테스트 용이</td></tr><tr><td><strong>알림 시스템</strong></td><td>알림 채널 (이메일, SMS, 슬랙, 푸시 등)</td><td><code>NotificationChannel</code> 인터페이스 정의</td><td>전략 패턴, 옵저버 패턴</td><td>다중 채널 대응 및 채널 교체 유연성 확보</td></tr><tr><td><strong>로깅 시스템</strong></td><td>로그 출력 방식 (파일, 콘솔, DB, 클라우드)</td><td><code>Logger</code> 또는 <code>LogAppender</code> 인터페이스 분리</td><td>데코레이터 패턴, DI, 팩토리 패턴</td><td>로그 대상 변경 시 영향 최소화, 기능 확장 용이</td></tr><tr><td><strong>데이터 접근</strong></td><td>데이터 소스 (RDB, NoSQL, CSV, API 등)</td><td><code>DataSource</code>, <code>DAO</code> 계층 정의</td><td>DAO 패턴, DI</td><td>다양한 소스 대응 및 DB 교체 시 영향 최소화</td></tr><tr><td><strong>게임 개발</strong></td><td>캐릭터 행동 (공격, 회피, 특수기 등)</td><td><code>Behavior</code> 또는 <code>Action</code> 전략 인터페이스 정의</td><td>전략 패턴, 상태 패턴</td><td>캐릭터 클래스 재사용성 증가 및 동작 유연성 확보</td></tr><tr><td><strong>전자상거래 플랫폼</strong></td><td>배송 로직 (택배, 퀵서비스, 해외배송 등)</td><td><code>DeliveryStrategy</code> 인터페이스</td><td>전략 패턴</td><td>배송 방식 확장 시 변경 최소화</td></tr><tr><td><strong>데이터 파이프라인</strong></td><td>전처리/후처리 로직 (정규화, 필터링 등)</td><td><code>Processor</code>, <code>Transformer</code> 인터페이스</td><td>템플릿 메서드 패턴 +</td><td></td></tr></tbody></table><h3 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h3><h4 id=사례-1-마이크로서비스-아키텍처>사례 1: 마이크로서비스 아키텍처<a hidden class=anchor aria-hidden=true href=#사례-1-마이크로서비스-아키텍처>#</a></h4><p>마이크로서비스 아키텍처는 시스템을 독립적으로 배포 가능한 서비스로 분해함으로써 가변성 캡슐화를 대규모로 적용한다. 각 서비스는 특정 비즈니스 기능을 캡슐화하며, 서비스 간 통신은 명확한 API 를 통해 이루어진다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span><span class=lnt id=hl-8-15><a class=lnlinks href=#hl-8-15>15</a>
</span><span class=lnt id=hl-8-16><a class=lnlinks href=#hl-8-16>16</a>
</span><span class=lnt id=hl-8-17><a class=lnlinks href=#hl-8-17>17</a>
</span><span class=lnt id=hl-8-18><a class=lnlinks href=#hl-8-18>18</a>
</span><span class=lnt id=hl-8-19><a class=lnlinks href=#hl-8-19>19</a>
</span><span class=lnt id=hl-8-20><a class=lnlinks href=#hl-8-20>20</a>
</span><span class=lnt id=hl-8-21><a class=lnlinks href=#hl-8-21>21</a>
</span><span class=lnt id=hl-8-22><a class=lnlinks href=#hl-8-22>22</a>
</span><span class=lnt id=hl-8-23><a class=lnlinks href=#hl-8-23>23</a>
</span><span class=lnt id=hl-8-24><a class=lnlinks href=#hl-8-24>24</a>
</span><span class=lnt id=hl-8-25><a class=lnlinks href=#hl-8-25>25</a>
</span><span class=lnt id=hl-8-26><a class=lnlinks href=#hl-8-26>26</a>
</span><span class=lnt id=hl-8-27><a class=lnlinks href=#hl-8-27>27</a>
</span><span class=lnt id=hl-8-28><a class=lnlinks href=#hl-8-28>28</a>
</span><span class=lnt id=hl-8-29><a class=lnlinks href=#hl-8-29>29</a>
</span><span class=lnt id=hl-8-30><a class=lnlinks href=#hl-8-30>30</a>
</span><span class=lnt id=hl-8-31><a class=lnlinks href=#hl-8-31>31</a>
</span><span class=lnt id=hl-8-32><a class=lnlinks href=#hl-8-32>32</a>
</span><span class=lnt id=hl-8-33><a class=lnlinks href=#hl-8-33>33</a>
</span><span class=lnt id=hl-8-34><a class=lnlinks href=#hl-8-34>34</a>
</span><span class=lnt id=hl-8-35><a class=lnlinks href=#hl-8-35>35</a>
</span><span class=lnt id=hl-8-36><a class=lnlinks href=#hl-8-36>36</a>
</span><span class=lnt id=hl-8-37><a class=lnlinks href=#hl-8-37>37</a>
</span><span class=lnt id=hl-8-38><a class=lnlinks href=#hl-8-38>38</a>
</span><span class=lnt id=hl-8-39><a class=lnlinks href=#hl-8-39>39</a>
</span><span class=lnt id=hl-8-40><a class=lnlinks href=#hl-8-40>40</a>
</span><span class=lnt id=hl-8-41><a class=lnlinks href=#hl-8-41>41</a>
</span><span class=lnt id=hl-8-42><a class=lnlinks href=#hl-8-42>42</a>
</span><span class=lnt id=hl-8-43><a class=lnlinks href=#hl-8-43>43</a>
</span><span class=lnt id=hl-8-44><a class=lnlinks href=#hl-8-44>44</a>
</span><span class=lnt id=hl-8-45><a class=lnlinks href=#hl-8-45>45</a>
</span><span class=lnt id=hl-8-46><a class=lnlinks href=#hl-8-46>46</a>
</span><span class=lnt id=hl-8-47><a class=lnlinks href=#hl-8-47>47</a>
</span><span class=lnt id=hl-8-48><a class=lnlinks href=#hl-8-48>48</a>
</span><span class=lnt id=hl-8-49><a class=lnlinks href=#hl-8-49>49</a>
</span><span class=lnt id=hl-8-50><a class=lnlinks href=#hl-8-50>50</a>
</span><span class=lnt id=hl-8-51><a class=lnlinks href=#hl-8-51>51</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 주문 서비스 API</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@RestController</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@RequestMapping</span><span class=p>(</span><span class=s>&#34;/orders&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>OrderController</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@PostMapping</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>OrderResponse</span><span class=w> </span><span class=nf>createOrder</span><span class=p>(</span><span class=nd>@RequestBody</span><span class=w> </span><span class=n>OrderRequest</span><span class=w> </span><span class=n>request</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 주문 생성 로직</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@GetMapping</span><span class=p>(</span><span class=s>&#34;/{id}&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>OrderResponse</span><span class=w> </span><span class=nf>getOrder</span><span class=p>(</span><span class=nd>@PathVariable</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 주문 조회 로직</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 결제 서비스 API</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@RestController</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@RequestMapping</span><span class=p>(</span><span class=s>&#34;/payments&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>PaymentController</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@PostMapping</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>PaymentResponse</span><span class=w> </span><span class=nf>processPayment</span><span class=p>(</span><span class=nd>@RequestBody</span><span class=w> </span><span class=n>PaymentRequest</span><span class=w> </span><span class=n>request</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 결제 처리 로직</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 주문 서비스에서 결제 서비스 호출</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>OrderService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>RestTemplate</span><span class=w> </span><span class=n>restTemplate</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>paymentServiceUrl</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 생략…</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Order</span><span class=w> </span><span class=nf>createOrder</span><span class=p>(</span><span class=n>OrderRequest</span><span class=w> </span><span class=n>request</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 주문 생성</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Order</span><span class=w> </span><span class=n>order</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=c1>// …</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 결제 서비스 호출</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>PaymentRequest</span><span class=w> </span><span class=n>paymentRequest</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>PaymentRequest</span><span class=p>(</span><span class=n>order</span><span class=p>.</span><span class=na>getId</span><span class=p>(),</span><span class=w> </span><span class=n>request</span><span class=p>.</span><span class=na>getAmount</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>PaymentResponse</span><span class=w> </span><span class=n>response</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>restTemplate</span><span class=p>.</span><span class=na>postForObject</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>paymentServiceUrl</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;/payments&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>paymentRequest</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>PaymentResponse</span><span class=p>.</span><span class=na>class</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 결제 결과 처리</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// …</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>order</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>이 아키텍처에서는 결제 처리 방식이 변경되더라도 주문 서비스에는 영향을 미치지 않는다. 결제 서비스의 내부 구현은 API 계약을 유지하는 한 자유롭게 변경될 수 있다.</p><h4 id=사례-2-인프라스트럭처-추상화>사례 2: 인프라스트럭처 추상화<a hidden class=anchor aria-hidden=true href=#사례-2-인프라스트럭처-추상화>#</a></h4><p>현대 개발에서는 클라우드 제공업체, 데이터베이스, 메시징 시스템 등의 인프라스트럭처 의존성을 추상화하는 것이 중요하다. 이를 통해 특정 기술에 종속되지 않고 필요에 따라 인프라를 변경할 수 있다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a>
</span><span class=lnt id=hl-9-11><a class=lnlinks href=#hl-9-11>11</a>
</span><span class=lnt id=hl-9-12><a class=lnlinks href=#hl-9-12>12</a>
</span><span class=lnt id=hl-9-13><a class=lnlinks href=#hl-9-13>13</a>
</span><span class=lnt id=hl-9-14><a class=lnlinks href=#hl-9-14>14</a>
</span><span class=lnt id=hl-9-15><a class=lnlinks href=#hl-9-15>15</a>
</span><span class=lnt id=hl-9-16><a class=lnlinks href=#hl-9-16>16</a>
</span><span class=lnt id=hl-9-17><a class=lnlinks href=#hl-9-17>17</a>
</span><span class=lnt id=hl-9-18><a class=lnlinks href=#hl-9-18>18</a>
</span><span class=lnt id=hl-9-19><a class=lnlinks href=#hl-9-19>19</a>
</span><span class=lnt id=hl-9-20><a class=lnlinks href=#hl-9-20>20</a>
</span><span class=lnt id=hl-9-21><a class=lnlinks href=#hl-9-21>21</a>
</span><span class=lnt id=hl-9-22><a class=lnlinks href=#hl-9-22>22</a>
</span><span class=lnt id=hl-9-23><a class=lnlinks href=#hl-9-23>23</a>
</span><span class=lnt id=hl-9-24><a class=lnlinks href=#hl-9-24>24</a>
</span><span class=lnt id=hl-9-25><a class=lnlinks href=#hl-9-25>25</a>
</span><span class=lnt id=hl-9-26><a class=lnlinks href=#hl-9-26>26</a>
</span><span class=lnt id=hl-9-27><a class=lnlinks href=#hl-9-27>27</a>
</span><span class=lnt id=hl-9-28><a class=lnlinks href=#hl-9-28>28</a>
</span><span class=lnt id=hl-9-29><a class=lnlinks href=#hl-9-29>29</a>
</span><span class=lnt id=hl-9-30><a class=lnlinks href=#hl-9-30>30</a>
</span><span class=lnt id=hl-9-31><a class=lnlinks href=#hl-9-31>31</a>
</span><span class=lnt id=hl-9-32><a class=lnlinks href=#hl-9-32>32</a>
</span><span class=lnt id=hl-9-33><a class=lnlinks href=#hl-9-33>33</a>
</span><span class=lnt id=hl-9-34><a class=lnlinks href=#hl-9-34>34</a>
</span><span class=lnt id=hl-9-35><a class=lnlinks href=#hl-9-35>35</a>
</span><span class=lnt id=hl-9-36><a class=lnlinks href=#hl-9-36>36</a>
</span><span class=lnt id=hl-9-37><a class=lnlinks href=#hl-9-37>37</a>
</span><span class=lnt id=hl-9-38><a class=lnlinks href=#hl-9-38>38</a>
</span><span class=lnt id=hl-9-39><a class=lnlinks href=#hl-9-39>39</a>
</span><span class=lnt id=hl-9-40><a class=lnlinks href=#hl-9-40>40</a>
</span><span class=lnt id=hl-9-41><a class=lnlinks href=#hl-9-41>41</a>
</span><span class=lnt id=hl-9-42><a class=lnlinks href=#hl-9-42>42</a>
</span><span class=lnt id=hl-9-43><a class=lnlinks href=#hl-9-43>43</a>
</span><span class=lnt id=hl-9-44><a class=lnlinks href=#hl-9-44>44</a>
</span><span class=lnt id=hl-9-45><a class=lnlinks href=#hl-9-45>45</a>
</span><span class=lnt id=hl-9-46><a class=lnlinks href=#hl-9-46>46</a>
</span><span class=lnt id=hl-9-47><a class=lnlinks href=#hl-9-47>47</a>
</span><span class=lnt id=hl-9-48><a class=lnlinks href=#hl-9-48>48</a>
</span><span class=lnt id=hl-9-49><a class=lnlinks href=#hl-9-49>49</a>
</span><span class=lnt id=hl-9-50><a class=lnlinks href=#hl-9-50>50</a>
</span><span class=lnt id=hl-9-51><a class=lnlinks href=#hl-9-51>51</a>
</span><span class=lnt id=hl-9-52><a class=lnlinks href=#hl-9-52>52</a>
</span><span class=lnt id=hl-9-53><a class=lnlinks href=#hl-9-53>53</a>
</span><span class=lnt id=hl-9-54><a class=lnlinks href=#hl-9-54>54</a>
</span><span class=lnt id=hl-9-55><a class=lnlinks href=#hl-9-55>55</a>
</span><span class=lnt id=hl-9-56><a class=lnlinks href=#hl-9-56>56</a>
</span><span class=lnt id=hl-9-57><a class=lnlinks href=#hl-9-57>57</a>
</span><span class=lnt id=hl-9-58><a class=lnlinks href=#hl-9-58>58</a>
</span><span class=lnt id=hl-9-59><a class=lnlinks href=#hl-9-59>59</a>
</span><span class=lnt id=hl-9-60><a class=lnlinks href=#hl-9-60>60</a>
</span><span class=lnt id=hl-9-61><a class=lnlinks href=#hl-9-61>61</a>
</span><span class=lnt id=hl-9-62><a class=lnlinks href=#hl-9-62>62</a>
</span><span class=lnt id=hl-9-63><a class=lnlinks href=#hl-9-63>63</a>
</span><span class=lnt id=hl-9-64><a class=lnlinks href=#hl-9-64>64</a>
</span><span class=lnt id=hl-9-65><a class=lnlinks href=#hl-9-65>65</a>
</span><span class=lnt id=hl-9-66><a class=lnlinks href=#hl-9-66>66</a>
</span><span class=lnt id=hl-9-67><a class=lnlinks href=#hl-9-67>67</a>
</span><span class=lnt id=hl-9-68><a class=lnlinks href=#hl-9-68>68</a>
</span><span class=lnt id=hl-9-69><a class=lnlinks href=#hl-9-69>69</a>
</span><span class=lnt id=hl-9-70><a class=lnlinks href=#hl-9-70>70</a>
</span><span class=lnt id=hl-9-71><a class=lnlinks href=#hl-9-71>71</a>
</span><span class=lnt id=hl-9-72><a class=lnlinks href=#hl-9-72>72</a>
</span><span class=lnt id=hl-9-73><a class=lnlinks href=#hl-9-73>73</a>
</span><span class=lnt id=hl-9-74><a class=lnlinks href=#hl-9-74>74</a>
</span><span class=lnt id=hl-9-75><a class=lnlinks href=#hl-9-75>75</a>
</span><span class=lnt id=hl-9-76><a class=lnlinks href=#hl-9-76>76</a>
</span><span class=lnt id=hl-9-77><a class=lnlinks href=#hl-9-77>77</a>
</span><span class=lnt id=hl-9-78><a class=lnlinks href=#hl-9-78>78</a>
</span><span class=lnt id=hl-9-79><a class=lnlinks href=#hl-9-79>79</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 스토리지 추상화</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>StorageService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>store</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=kt>byte</span><span class=o>[]</span><span class=w> </span><span class=n>data</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>byte</span><span class=o>[]</span><span class=w> </span><span class=nf>retrieve</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>delete</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// AWS S3 구현</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>S3StorageService</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>StorageService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>AmazonS3</span><span class=w> </span><span class=n>s3Client</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>bucketName</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 생략…</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>store</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=kt>byte</span><span class=o>[]</span><span class=w> </span><span class=n>data</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>s3Client</span><span class=p>.</span><span class=na>putObject</span><span class=p>(</span><span class=n>bucketName</span><span class=p>,</span><span class=w> </span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ByteArrayInputStream</span><span class=p>(</span><span class=n>data</span><span class=p>),</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ObjectMetadata</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>byte</span><span class=o>[]</span><span class=w> </span><span class=nf>retrieve</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>S3Object</span><span class=w> </span><span class=n>object</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s3Client</span><span class=p>.</span><span class=na>getObject</span><span class=p>(</span><span class=n>bucketName</span><span class=p>,</span><span class=w> </span><span class=n>key</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>IOUtils</span><span class=p>.</span><span class=na>toByteArray</span><span class=p>(</span><span class=n>object</span><span class=p>.</span><span class=na>getObjectContent</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>delete</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>s3Client</span><span class=p>.</span><span class=na>deleteObject</span><span class=p>(</span><span class=n>bucketName</span><span class=p>,</span><span class=w> </span><span class=n>key</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 파일 시스템 구현</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>FileSystemStorageService</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>StorageService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>Path</span><span class=w> </span><span class=n>rootLocation</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 생략…</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>store</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=kt>byte</span><span class=o>[]</span><span class=w> </span><span class=n>data</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Files</span><span class=p>.</span><span class=na>write</span><span class=p>(</span><span class=n>rootLocation</span><span class=p>.</span><span class=na>resolve</span><span class=p>(</span><span class=n>key</span><span class=p>),</span><span class=w> </span><span class=n>data</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>IOException</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StorageException</span><span class=p>(</span><span class=s>&#34;Failed to store file&#34;</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>byte</span><span class=o>[]</span><span class=w> </span><span class=nf>retrieve</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>Files</span><span class=p>.</span><span class=na>readAllBytes</span><span class=p>(</span><span class=n>rootLocation</span><span class=p>.</span><span class=na>resolve</span><span class=p>(</span><span class=n>key</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>IOException</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StorageException</span><span class=p>(</span><span class=s>&#34;Failed to retrieve file&#34;</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>delete</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Files</span><span class=p>.</span><span class=na>delete</span><span class=p>(</span><span class=n>rootLocation</span><span class=p>.</span><span class=na>resolve</span><span class=p>(</span><span class=n>key</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>IOException</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StorageException</span><span class=p>(</span><span class=s>&#34;Failed to delete file&#34;</span><span class=p>,</span><span class=w> </span><span class=n>e</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 서비스에서 사용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>DocumentService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>StorageService</span><span class=w> </span><span class=n>storageService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>DocumentService</span><span class=p>(</span><span class=n>StorageService</span><span class=w> </span><span class=n>storageService</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>storageService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>storageService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>saveDocument</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=kt>byte</span><span class=o>[]</span><span class=w> </span><span class=n>content</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>storageService</span><span class=p>.</span><span class=na>store</span><span class=p>(</span><span class=s>&#34;documents/&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>content</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>이 예시에서는 스토리지 구현이 AWS S3 에서 파일 시스템으로 변경되더라도 <code>DocumentService</code> 는 수정할 필요가 없다.</p><h4 id=사례-3-기능-플래그-feature-flags>사례 3: 기능 플래그 (Feature Flags)<a hidden class=anchor aria-hidden=true href=#사례-3-기능-플래그-feature-flags>#</a></h4><p>기능 플래그는 런타임에 기능의 활성화 여부를 제어할 수 있는 현대적인 기법이다. 이는 새로운 기능의 점진적 출시와 A/B 테스트를 가능하게 한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span><span class=lnt id=hl-10-12><a class=lnlinks href=#hl-10-12>12</a>
</span><span class=lnt id=hl-10-13><a class=lnlinks href=#hl-10-13>13</a>
</span><span class=lnt id=hl-10-14><a class=lnlinks href=#hl-10-14>14</a>
</span><span class=lnt id=hl-10-15><a class=lnlinks href=#hl-10-15>15</a>
</span><span class=lnt id=hl-10-16><a class=lnlinks href=#hl-10-16>16</a>
</span><span class=lnt id=hl-10-17><a class=lnlinks href=#hl-10-17>17</a>
</span><span class=lnt id=hl-10-18><a class=lnlinks href=#hl-10-18>18</a>
</span><span class=lnt id=hl-10-19><a class=lnlinks href=#hl-10-19>19</a>
</span><span class=lnt id=hl-10-20><a class=lnlinks href=#hl-10-20>20</a>
</span><span class=lnt id=hl-10-21><a class=lnlinks href=#hl-10-21>21</a>
</span><span class=lnt id=hl-10-22><a class=lnlinks href=#hl-10-22>22</a>
</span><span class=lnt id=hl-10-23><a class=lnlinks href=#hl-10-23>23</a>
</span><span class=lnt id=hl-10-24><a class=lnlinks href=#hl-10-24>24</a>
</span><span class=lnt id=hl-10-25><a class=lnlinks href=#hl-10-25>25</a>
</span><span class=lnt id=hl-10-26><a class=lnlinks href=#hl-10-26>26</a>
</span><span class=lnt id=hl-10-27><a class=lnlinks href=#hl-10-27>27</a>
</span><span class=lnt id=hl-10-28><a class=lnlinks href=#hl-10-28>28</a>
</span><span class=lnt id=hl-10-29><a class=lnlinks href=#hl-10-29>29</a>
</span><span class=lnt id=hl-10-30><a class=lnlinks href=#hl-10-30>30</a>
</span><span class=lnt id=hl-10-31><a class=lnlinks href=#hl-10-31>31</a>
</span><span class=lnt id=hl-10-32><a class=lnlinks href=#hl-10-32>32</a>
</span><span class=lnt id=hl-10-33><a class=lnlinks href=#hl-10-33>33</a>
</span><span class=lnt id=hl-10-34><a class=lnlinks href=#hl-10-34>34</a>
</span><span class=lnt id=hl-10-35><a class=lnlinks href=#hl-10-35>35</a>
</span><span class=lnt id=hl-10-36><a class=lnlinks href=#hl-10-36>36</a>
</span><span class=lnt id=hl-10-37><a class=lnlinks href=#hl-10-37>37</a>
</span><span class=lnt id=hl-10-38><a class=lnlinks href=#hl-10-38>38</a>
</span><span class=lnt id=hl-10-39><a class=lnlinks href=#hl-10-39>39</a>
</span><span class=lnt id=hl-10-40><a class=lnlinks href=#hl-10-40>40</a>
</span><span class=lnt id=hl-10-41><a class=lnlinks href=#hl-10-41>41</a>
</span><span class=lnt id=hl-10-42><a class=lnlinks href=#hl-10-42>42</a>
</span><span class=lnt id=hl-10-43><a class=lnlinks href=#hl-10-43>43</a>
</span><span class=lnt id=hl-10-44><a class=lnlinks href=#hl-10-44>44</a>
</span><span class=lnt id=hl-10-45><a class=lnlinks href=#hl-10-45>45</a>
</span><span class=lnt id=hl-10-46><a class=lnlinks href=#hl-10-46>46</a>
</span><span class=lnt id=hl-10-47><a class=lnlinks href=#hl-10-47>47</a>
</span><span class=lnt id=hl-10-48><a class=lnlinks href=#hl-10-48>48</a>
</span><span class=lnt id=hl-10-49><a class=lnlinks href=#hl-10-49>49</a>
</span><span class=lnt id=hl-10-50><a class=lnlinks href=#hl-10-50>50</a>
</span><span class=lnt id=hl-10-51><a class=lnlinks href=#hl-10-51>51</a>
</span><span class=lnt id=hl-10-52><a class=lnlinks href=#hl-10-52>52</a>
</span><span class=lnt id=hl-10-53><a class=lnlinks href=#hl-10-53>53</a>
</span><span class=lnt id=hl-10-54><a class=lnlinks href=#hl-10-54>54</a>
</span><span class=lnt id=hl-10-55><a class=lnlinks href=#hl-10-55>55</a>
</span><span class=lnt id=hl-10-56><a class=lnlinks href=#hl-10-56>56</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 기능 플래그 서비스</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>FeatureFlagService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>boolean</span><span class=w> </span><span class=nf>isEnabled</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>featureName</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>boolean</span><span class=w> </span><span class=nf>isEnabled</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>featureName</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>userId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 구현</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>FeatureFlagServiceImpl</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>FeatureFlagService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>FeatureFlagRepository</span><span class=w> </span><span class=n>repository</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>FeatureFlagServiceImpl</span><span class=p>(</span><span class=n>FeatureFlagRepository</span><span class=w> </span><span class=n>repository</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>repository</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>repository</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>isEnabled</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>featureName</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>FeatureFlag</span><span class=w> </span><span class=n>flag</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>repository</span><span class=p>.</span><span class=na>findByName</span><span class=p>(</span><span class=n>featureName</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>flag</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>flag</span><span class=p>.</span><span class=na>isEnabled</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>isEnabled</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>featureName</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>userId</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>FeatureFlag</span><span class=w> </span><span class=n>flag</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>repository</span><span class=p>.</span><span class=na>findByName</span><span class=p>(</span><span class=n>featureName</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>flag</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=o>!</span><span class=n>flag</span><span class=p>.</span><span class=na>isEnabled</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=kc>false</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 사용자별 점진적 출시 로직</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>flag</span><span class=p>.</span><span class=na>getRolloutPercentage</span><span class=p>()</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>100</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>hash</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Math</span><span class=p>.</span><span class=na>abs</span><span class=p>(</span><span class=n>userId</span><span class=p>.</span><span class=na>hashCode</span><span class=p>())</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=n>100</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>hash</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>flag</span><span class=p>.</span><span class=na>getRolloutPercentage</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 서비스에서 사용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>PaymentService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>FeatureFlagService</span><span class=w> </span><span class=n>featureFlagService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>LegacyPaymentProcessor</span><span class=w> </span><span class=n>legacyProcessor</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>NewPaymentProcessor</span><span class=w> </span><span class=n>newProcessor</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 생략…</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>PaymentResult</span><span class=w> </span><span class=nf>processPayment</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>Payment</span><span class=w> </span><span class=n>payment</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>featureFlagService</span><span class=p>.</span><span class=na>isEnabled</span><span class=p>(</span><span class=s>&#34;new-payment-processor&#34;</span><span class=p>,</span><span class=w> </span><span class=n>userId</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>newProcessor</span><span class=p>.</span><span class=na>process</span><span class=p>(</span><span class=n>payment</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>legacyProcessor</span><span class=p>.</span><span class=na>process</span><span class=p>(</span><span class=n>payment</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>이 예시에서는 새로운 결제 처리 기능의 출시를 점진적으로 제어할 수 있다. 코드 변경 없이 구성만으로 어떤 사용자가 어떤 버전의 기능을 경험할지 결정할 수 있다.</p><h4 id=사례-4-의존성-주입-프레임워크>사례 4: 의존성 주입 프레임워크<a hidden class=anchor aria-hidden=true href=#사례-4-의존성-주입-프레임워크>#</a></h4><p>현대적인 소프트웨어 개발에서는 Spring, Guice 등의 의존성 주입 프레임워크를 사용하여 구현체의 변화를 캡슐화한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15>15</a>
</span><span class=lnt id=hl-11-16><a class=lnlinks href=#hl-11-16>16</a>
</span><span class=lnt id=hl-11-17><a class=lnlinks href=#hl-11-17>17</a>
</span><span class=lnt id=hl-11-18><a class=lnlinks href=#hl-11-18>18</a>
</span><span class=lnt id=hl-11-19><a class=lnlinks href=#hl-11-19>19</a>
</span><span class=lnt id=hl-11-20><a class=lnlinks href=#hl-11-20>20</a>
</span><span class=lnt id=hl-11-21><a class=lnlinks href=#hl-11-21>21</a>
</span><span class=lnt id=hl-11-22><a class=lnlinks href=#hl-11-22>22</a>
</span><span class=lnt id=hl-11-23><a class=lnlinks href=#hl-11-23>23</a>
</span><span class=lnt id=hl-11-24><a class=lnlinks href=#hl-11-24>24</a>
</span><span class=lnt id=hl-11-25><a class=lnlinks href=#hl-11-25>25</a>
</span><span class=lnt id=hl-11-26><a class=lnlinks href=#hl-11-26>26</a>
</span><span class=lnt id=hl-11-27><a class=lnlinks href=#hl-11-27>27</a>
</span><span class=lnt id=hl-11-28><a class=lnlinks href=#hl-11-28>28</a>
</span><span class=lnt id=hl-11-29><a class=lnlinks href=#hl-11-29>29</a>
</span><span class=lnt id=hl-11-30><a class=lnlinks href=#hl-11-30>30</a>
</span><span class=lnt id=hl-11-31><a class=lnlinks href=#hl-11-31>31</a>
</span><span class=lnt id=hl-11-32><a class=lnlinks href=#hl-11-32>32</a>
</span><span class=lnt id=hl-11-33><a class=lnlinks href=#hl-11-33>33</a>
</span><span class=lnt id=hl-11-34><a class=lnlinks href=#hl-11-34>34</a>
</span><span class=lnt id=hl-11-35><a class=lnlinks href=#hl-11-35>35</a>
</span><span class=lnt id=hl-11-36><a class=lnlinks href=#hl-11-36>36</a>
</span><span class=lnt id=hl-11-37><a class=lnlinks href=#hl-11-37>37</a>
</span><span class=lnt id=hl-11-38><a class=lnlinks href=#hl-11-38>38</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 구성 클래스</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>AppConfig</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>PaymentGateway</span><span class=w> </span><span class=nf>paymentGateway</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>useStripe</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StripePaymentGateway</span><span class=p>(</span><span class=n>stripeApiKey</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>PayPalPaymentGateway</span><span class=p>(</span><span class=n>paypalClientId</span><span class=p>,</span><span class=w> </span><span class=n>paypalSecret</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>useStripe</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;stripe&#34;</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=n>environment</span><span class=p>.</span><span class=na>getProperty</span><span class=p>(</span><span class=s>&#34;payment.gateway&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 서비스에서 사용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>CheckoutService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>PaymentGateway</span><span class=w> </span><span class=n>paymentGateway</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>CheckoutService</span><span class=p>(</span><span class=n>PaymentGateway</span><span class=w> </span><span class=n>paymentGateway</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>paymentGateway</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>paymentGateway</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>OrderResult</span><span class=w> </span><span class=nf>checkout</span><span class=p>(</span><span class=n>ShoppingCart</span><span class=w> </span><span class=n>cart</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 결제 처리</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>PaymentResult</span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>paymentGateway</span><span class=p>.</span><span class=na>processPayment</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>cart</span><span class=p>.</span><span class=na>getCustomerId</span><span class=p>(),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>cart</span><span class=p>.</span><span class=na>getTotalAmount</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 결과 처리</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// …</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>이 예시에서는 결제 게이트웨이의 구현이 Stripe 에서 PayPal 로 변경되더라도 <code>CheckoutService</code> 는 수정할 필요가 없다. 구성 변경만으로 다른 게이트웨이를 사용할 수 있다.</p><h4 id=사례-5-전자상거래-플랫폼의-결제-시스템-현대화>사례 5: 전자상거래 플랫폼의 결제 시스템 현대화<a hidden class=anchor aria-hidden=true href=#사례-5-전자상거래-플랫폼의-결제-시스템-현대화>#</a></h4><p><strong>시나리오</strong>: 글로벌 전자상거래 플랫폼에서 다양한 국가별 결제 방식과 새로운 핀테크 솔루션을 지원해야 하는 상황이다. 기존 시스템은 신용카드 결제만 지원했지만, PayPal, Apple Pay, 암호화폐, 지역별 결제 솔루션 (알리페이, 카카오페이 등) 을 추가로 지원해야 한다.</p><p><strong>시스템 구성</strong>:</p><pre class=mermaid>graph TB
    subgraph &#34;프레젠테이션 계층&#34;
        UI[웹/모바일 결제 UI]
        API[결제 API Gateway]
    end
    
    subgraph &#34;비즈니스 로직 계층&#34;
        OS[주문 서비스]
        PS[결제 서비스]
        VS[검증 서비스]
    end
    
    subgraph &#34;추상화 계층 - 캡슐화된 변화 부분&#34;
        IPayment[IPaymentProcessor]
        IValidation[IPaymentValidator]
        INotification[INotificationService]
    end
    
    subgraph &#34;구현체 계층 - 변화하는 부분&#34;
        CC[신용카드 프로세서]
        PP[PayPal 프로세서]
        AP[Apple Pay 프로세서]
        CP[암호화폐 프로세서]
        KP[카카오페이 프로세서]
        
        EmailVal[이메일 검증]
        SMSVal[SMS 검증]
        BioVal[생체 인증 검증]
        
        EmailNoti[이메일 알림]
        SMSNoti[SMS 알림]
        PushNoti[푸시 알림]
    end
    
    subgraph &#34;외부 시스템&#34;
        Bank[은행 시스템]
        PG[PG사 시스템]
        Crypto[암호화폐 네트워크]
        Cloud[클라우드 서비스]
    end
    
    UI --&gt; API
    API --&gt; OS
    OS --&gt; PS
    PS --&gt; VS
    
    PS --&gt; IPayment
    VS --&gt; IValidation
    PS --&gt; INotification
    
    IPayment -.-&gt; CC
    IPayment -.-&gt; PP
    IPayment -.-&gt; AP
    IPayment -.-&gt; CP
    IPayment -.-&gt; KP
    
    IValidation -.-&gt; EmailVal
    IValidation -.-&gt; SMSVal
    IValidation -.-&gt; BioVal
    
    INotification -.-&gt; EmailNoti
    INotification -.-&gt; SMSNoti
    INotification -.-&gt; PushNoti
    
    CC --&gt; Bank
    PP --&gt; PG
    CP --&gt; Crypto
    EmailNoti --&gt; Cloud
    
    style IPayment fill:#ffeb3b
    style IValidation fill:#ffeb3b
    style INotification fill:#ffeb3b
</pre><p><strong>Workflow</strong>:</p><pre class=mermaid>sequenceDiagram
    participant C as 고객
    participant UI as 결제 UI
    participant PS as 결제 서비스
    participant PP as IPaymentProcessor
    participant PV as IPaymentValidator
    participant PN as INotificationService
    participant EXT as 외부 결제 시스템
    
    C-&gt;&gt;UI: 결제 방식 선택
    UI-&gt;&gt;PS: 결제 요청 (방식, 금액, 정보)
    
    PS-&gt;&gt;PP: 결제 프로세서 팩토리에서 적절한 구현체 생성
    Note over PP: 런타임에 선택된 결제 방식에&lt;br/&gt;따라 구체적 구현체 결정
    
    PS-&gt;&gt;PV: 결제 정보 검증
    PV-&gt;&gt;PV: 선택된 검증 방식으로 검증 수행
    
    alt 검증 성공
        PS-&gt;&gt;PP: 결제 처리 실행
        PP-&gt;&gt;EXT: 외부 결제 시스템 호출
        EXT--&gt;&gt;PP: 결제 결과 응답
        PP--&gt;&gt;PS: 처리 결과 반환
        
        PS-&gt;&gt;PN: 결제 완료 알림 발송
        PN-&gt;&gt;PN: 설정된 알림 방식으로 발송
        
        PS--&gt;&gt;UI: 성공 응답
        UI--&gt;&gt;C: 결제 완료 안내
    else 검증 실패
        PV--&gt;&gt;PS: 검증 실패
        PS--&gt;&gt;UI: 오류 응답
        UI--&gt;&gt;C: 오류 메시지 표시
    end
</pre><p><strong>역할 담당</strong>:</p><ul><li><strong>변화 캡슐화</strong>: 새로운 결제 방식 추가 시 기존 비즈니스 로직 변경 없이 새로운 구현체만 추가</li><li><strong>독립적 개발</strong>: 각 결제 방식별 팀이 독립적으로 개발 가능</li><li><strong>런타임 선택</strong>: 설정이나 사용자 선택에 따라 동적으로 결제 방식 변경</li><li><strong>확장성 보장</strong>: 새로운 핀테크 솔루션이나 지역별 결제 방식 쉽게 추가 가능</li></ul><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>고려사항</strong></th><th><strong>주의할 점</strong></th><th><strong>권장 사항</strong></th></tr></thead><tbody><tr><td><strong>요구사항 분석 단계</strong></td><td>변화 가능성 높은 영역 사전 식별</td><td>변화 가능성 낮은 영역까지 과잉 설계하지 않기</td><td>과거 변경 이력, 도메인 전문가 협업, 변화 예측 모델링 활용</td></tr><tr><td><strong>설계 단계</strong></td><td>캡슐화 적용 범위 및 단위 결정</td><td>모든 기능을 무분별하게 추상화하는 일관성 없는 접근</td><td>실제 변화가 발생했거나 예측된 영역에만 최소한의 추상화 적용</td></tr><tr><td></td><td>인터페이스 또는 추상 클래스 설계</td><td>너무 일반적이거나 구체적인 인터페이스 설계</td><td>명확한 책임 분리, 단일 책임 원칙 기반 인터페이스 정의</td></tr><tr><td><strong>구현 단계</strong></td><td>구현체와 추상화 계층 간 결합 최소화</td><td>내부 구현 로직이 외부 추상화 계층에 노출되는 설계</td><td>의존성 역전 원칙 (DIP) 과 인터페이스 분리 원칙 (ISP) 적용</td></tr><tr><td></td><td>객체 생성 방식의 유연성 확보</td><td>객체 생성을 직접 하드코딩하여 캡슐화 효과 상실</td><td>팩토리 패턴, DI 컨테이너 (Spring, NestJS 등) 활용</td></tr><tr><td><strong>테스트 단계</strong></td><td>구현체별 독립 테스트 및 모킹 전략</td><td>통합 테스트 시 실제 구현체 간 복잡한 의존관계 발생 위험</td><td>전략 객체 Mock/Stubbing, 테스트 전용 DI 구성 활용</td></tr><tr><td><strong>유지보수 단계</strong></td><td>새로운 구현체 추가 시 기존 시스템 영향 최소화</td><td>인터페이스나 추상화 계층 수정 시 전파 영향 고려 부족</td><td>최소 인터페이스 유지, 변경 포인트 격리화, SRP 기반 리팩토링</td></tr><tr><td><strong>운영/성능 단계</strong></td><td>추상화 계층으로 인한 오버헤드 실측</td><td>추상화 계층 제거로 유연성과 테스트성을 포기하는 경우</td><td>APM, 프로파일링 도구를 통해 성능 병목 식별 후 국소적 최적화</td></tr><tr><td><strong>협업 및 커뮤니케이션</strong></td><td>팀원 간 설계 원칙과 추상화 규칙 공유</td><td>각자 다른 추상화 기준으로 시스템 일관성 저하</td><td>정기 코드 리뷰, 설계 문서화, 팀 코딩 표준 수립</td></tr><tr><td><strong>지속적 개선 및 리팩토링</strong></td><td>추상화 수준은 반복적 검토 대상</td><td>초기에 설정한 구조가 변화에 따라 오래 유지될 것이라는 착각</td><td>실제 사용 패턴 분석, 리팩토링 주기 설정, 필요 시 추상화 제거 또는 단순화</td></tr></tbody></table><ul><li>적용 기준은 " 변화의 빈도와 영향도 " 로 판단</li><li>변화가 예상되지 않으면 추상화하지 말 것 (&ldquo;YAGNI&rdquo; 원칙 적용)</li><li>캡슐화된 객체는 독립적으로 테스트 가능해야 함</li><li>DI 와 전략 패턴은 거의 모든 유연성 캡슐화 구조에 적합</li><li>추상화된 구조는 문서화 및 예제 코드로 공유되어야 함</li></ul><h3 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>영역</strong></th><th><strong>고려사항</strong></th><th><strong>주의할 점</strong></th><th><strong>권장 사항</strong></th></tr></thead><tbody><tr><td><strong>런타임 객체 생성</strong></td><td>전략 객체나 구현체가 매 요청마다 생성될 경우 오버헤드 유발</td><td>생성 시점과 범위를 고려하지 않으면 GC 와 성능 저하 발생</td><td>싱글톤 또는 객체 풀링 활용, DI 컨테이너에서 재사용 객체 주입</td></tr><tr><td><strong>동적 전략 선택</strong></td><td>조건문 기반 전략 선택 로직은 분기 수 증가 시 성능 저하 가능</td><td>if-else/switch 남용 시 유지보수와 성능 모두 악화됨</td><td>전략 맵핑 (HashMap/Enum 기반), 전략 팩토리 패턴 적용</td></tr><tr><td><strong>간접 호출 구조</strong></td><td>인터페이스 기반 다형성은 JVM 에서 인라인 최적화가 어렵거나 지연됨</td><td>HotSpot JIT 최적화가 제한됨</td><td>성능 크리티컬 경로에서는 최적화된 직접 호출 또는 inlining 가능한 구조 사용</td></tr><tr><td><strong>메모리 사용량</strong></td><td>다수 전략 구현체 또는 팩토리 등록 시 불필요한 메모리 소모</td><td>전 전략 객체를 한 번에 로딩하거나 캐시할 경우 사용량 과도 증가</td><td>Lazy Initialization 적용, 자주 사용하는 전략만 사전 생성</td></tr><tr><td><strong>캐싱 전략</strong></td><td>반복 사용되는 구현체의 재사용 필요</td><td>멀티스레드 환경에서 비스레드 안전 캐시 사용 시 동시성 문제</td><td>Thread-safe 캐시 구조 또는 synchronized factory method 사용</td></tr><tr><td><strong>JIT 최적화 한계</strong></td><td>동적 바인딩 시 컴파일러가 가상 메서드를 인라인하지 못할 수 있음</td><td>제네릭을 피하고 런타임 타입을 사용하는 방식은 최적화 방해됨</td><td>정적 타입 사용, sealed class, final class 등으로 JVM 최적화 유도</td></tr><tr><td><strong>초기 로딩 비용</strong></td><td>DI 컨테이너 또는 팩토리가 초기 모든 구현체를 생성 시 초기 응답 지연</td><td>실제 사용되지 않는 객체까지 생성되며 스타트업 성능 저하</td><td>Lazy Injection, 프리로딩 전략 혼용 (ex. Spring @Lazy, @PostConstruct preload)</td></tr><tr><td><strong>배치 처리 성능</strong></td><td>동일한 로직을 반복 실행할 경우 배치 처리 최적화 필요</td><td>배치 단위 설정이 부적절할 경우 성능 이득 없음 또는 처리 지연 발생</td><td>작업 크기 기반 튜닝, Stream 처리 또는 Worker Thread 병렬 분산 적용</td></tr><tr><td><strong>GC 영향</strong></td><td>잦은 객체 생성/소멸은 GC 압박 증가</td><td>메모리 누수 및 불필요한 객체 생명 주기 증가</td><td>WeakReference, Object Pool, Flyweight 패턴 활용</td></tr><tr><td><strong>불필요한 캡슐화</strong></td><td>과도한 추상화 구조는 메서드 호출/레벨 증가로 오버헤드 발생</td><td>단순한 연산/로직에 추상화 적용 시 오히려 성능 저하 가능</td><td>SRP/SOC 에 위배되지 않는 선에서 단순 캡슐화 또는 함수 인라인 전략 적용</td></tr></tbody></table><ul><li>전략 객체는 가능하면 DI 컨테이너에서 싱글톤 주입받기</li><li>성능에 민감한 전략은 조건 분기 대신 맵핑 테이블로 대체</li><li>성능 병목 지점은 반드시 프로파일링을 통해 측정하고 개선</li><li>필요 이상으로 전략을 캡슐화하지 않으며, 메모리/생성 비용을 고려</li><li>성능과 유지보수 간의 트레이드오프를 명확히 판단하고 분리 적용</li></ul><h3 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h3><table><thead><tr><th><strong>분류</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>설계 원칙/패턴</strong></td><td>전략 패턴 (Strategy Pattern)</td><td>런타임에 알고리즘 또는 정책을 동적으로 교체하기 위해 캡슐화</td></tr><tr><td></td><td>팩토리 패턴 (Factory Pattern)</td><td>객체 생성 로직을 클라이언트로부터 분리하여 변화하는 생성 방식 캡슐화</td></tr><tr><td></td><td>템플릿 메서드 패턴</td><td>고정된 알고리즘 틀에 대해 가변 서브 로직만 추상화하여 캡슐화 (상속 기반)</td></tr><tr><td></td><td>데코레이터 패턴 (Decorator Pattern)</td><td>기능 추가/확장을 위한 객체 동적 래핑 캡슐화</td></tr><tr><td></td><td>DI (Dependency Injection)</td><td>의존성 주입을 통해 구현체를 외부에서 주입받아, 객체 간 결합도 낮추고 변화 유연하게 대응</td></tr><tr><td></td><td>인터페이스 / 추상 클래스</td><td>구현을 변경해도 클라이언트 코드 영향 없이 인터페이스만 유지함으로써 안정성 확보</td></tr><tr><td></td><td>기능 플러그인 구조화</td><td>핵심 모듈과 별도로 동적으로 로딩 가능한 변화 영역 모듈화 구조화</td></tr><tr><td><strong>아키텍처 스타일</strong></td><td>헥사고날 아키텍처 (Hexagonal)</td><td>내부 로직 (도메인) 을 Port 와 Adapter 로 외부와 분리하여 외부 의존성의 변화를 캡슐화</td></tr><tr><td></td><td>Onion Architecture</td><td>도메인 계층을 중심으로 의존성을 안으로 모으고, 외부는 인터페이스를 통해 의존하도록 구성하여 변화 격리</td></tr><tr><td></td><td>플러그인 아키텍처 (Plugin Arch.)</td><td>핵심 시스템에 영향 없이 외부 기능 추가/변경 가능하도록 캡슐화된 모듈 구조</td></tr><tr><td><strong>프로그래밍 패러다임</strong></td><td>함수형 프로그래밍</td><td>고차 함수, 클로저, 커링 등을 통해 로직이나 동작을 값처럼 캡슐화하여 전달</td></tr><tr><td><strong>클라우드/인프라</strong></td><td>사이드카 패턴 (Sidecar)</td><td>마이크로서비스에서 로깅, 보안, 라우팅 등 횡단 관심사를 외부 Sidecar 로 분리하여 캡슐화</td></tr><tr><td></td><td>환경 설정 캡슐화 (Externalized Config)</td><td>설정 값을 코드와 분리하여 환경 변경 시에도 코드 수정 없이 동작 가능</td></tr><tr><td><strong>데이터/비즈니스</strong></td><td>CQRS</td><td>명령 (Command) 과 조회 (Query) 를 분리하여 서로 다른 변화/요구를 독립적으로 대응 가능하도록 캡슐화</td></tr><tr><td></td><td>Repository Pattern</td><td>도메인과 데이터 접근 기술 (JPA, SQL 등) 을 분리하여 데이터 저장소 변경에 유연하게 대응</td></tr><tr><td><strong>보안/정책</strong></td><td>Zero Trust 아키텍처</td><td>인증/인가/검증 등 보안 정책을 명확히 경계 지어 서비스 내부와 분리하고 캡슐화</td></tr><tr><td></td><td>정책 기반 라우팅/검증</td><td>인증, 제한 조건 등을 외부 정책 서버 또는 미들웨어로 분리하여 핵심 로직과 분리</td></tr><tr><td><strong>성능/운영</strong></td><td>캐시 어사이드 패턴 (Cache-Aside)</td><td>읽기/쓰기 로직과 캐싱 로직을 분리하여 성능 최적화 전략 자체를 캡슐화</td></tr><tr><td></td><td>로깅 / 감사 / 트레이싱 분리</td><td>핵심 로직과 무관한 로깅, 감사, 트레이싱 등을 별도 모듈 또는 Observer 로 구성하여 캡슐화</td></tr></tbody></table><ul><li>Encapsulate What Varies 는 <strong>기술 계층</strong>, <strong>비즈니스 계층</strong>, <strong>운영 계층</strong> 등 <strong>모든 변화 가능한 단면</strong>에 적용 가능</li><li>단순히 전략 패턴에만 국한되지 않으며, <strong>구조적 캡슐화</strong>, <strong>정책의 외부화</strong>, <strong>인터페이스 기반 분리</strong>, <strong>비즈니스 책임 구분</strong> 등과 깊게 연관됨</li><li>현대 소프트웨어 아키텍처에서는 <strong>OCP, DIP, SOC, 모듈화 원칙</strong> 등과 함께 필수적으로 적용되는 핵심 설계 원칙 중 하나</li></ul><h3 id=하위-주제로-분류해서-추가로-학습할-내용>하위 주제로 분류해서 추가로 학습할 내용<a hidden class=anchor aria-hidden=true href=#하위-주제로-분류해서-추가로-학습할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>설계 패턴 (Design Pattern)</strong></td><td>전략 패턴 (Strategy Pattern)</td><td>다양한 알고리즘을 런타임에 선택할 수 있도록 캡슐화</td></tr><tr><td></td><td>팩토리 패턴 (Factory Pattern)</td><td>객체 생성 로직을 분리하여 생성 방식의 변화에 유연하게 대응</td></tr><tr><td></td><td>템플릿 메서드 패턴 (Template Method)</td><td>상속 기반으로 고정 알고리즘과 가변 서브 로직을 분리</td></tr><tr><td></td><td>데코레이터 패턴 (Decorator Pattern)</td><td>기존 객체를 수정하지 않고 새로운 기능을 동적으로 추가</td></tr><tr><td></td><td>상태 패턴 (State Pattern)</td><td>객체의 상태에 따라 행동을 변경하며, 상태 전이를 캡슐화</td></tr><tr><td><strong>아키텍처 패턴</strong></td><td>의존성 주입 (Dependency Injection)</td><td>외부에서 구현체를 주입받아 결합도를 낮추고 테스트 가능성을 높임</td></tr><tr><td></td><td>인터페이스 기반 설계 (Interface-Based Design)</td><td>인터페이스를 기준으로 클라이언트와 구현체를 분리하여 유연한 구조 구성</td></tr><tr><td></td><td>포트 - 어댑터 패턴 (Hexagonal Architecture)</td><td>비즈니스 로직과 외부 입출력 간의 의존성을 분리</td></tr><tr><td></td><td>플러그인 아키텍처</td><td>핵심 기능과 변경 가능 기능을 동적 모듈로 분리</td></tr><tr><td><strong>테스트 및 품질</strong></td><td>Mock / Stub 기반 테스트</td><td>캡슐화된 로직에 대해 독립적 테스트 수행을 위한 전략</td></tr><tr><td></td><td>테스트 주도 개발 (TDD)</td><td>먼저 인터페이스 및 동작을 정의하고 테스트 기반으로 개발 진행</td></tr><tr><td></td><td>변경 이력 기반 리팩토링 전략</td><td>변경 빈도, 커밋 로그 등 히스토리를 기반으로 캡슐화 대상 식별</td></tr><tr><td><strong>소프트웨어 품질</strong></td><td>변경 가능성 예측 기법</td><td>변경 빈도 분석, 모듈 책임 파악, 복잡도 분석 등을 통한 캡슐화 후보 도출</td></tr><tr><td></td><td>캡슐화 리팩토링 기법</td><td>기존 코드에서 관심사 분리 및 인터페이스 추출 등 리팩토링 적용</td></tr><tr><td><strong>운영 및 확장 전략</strong></td><td>설정 값 캡슐화 (Externalized Config)</td><td>운영 환경 별 차이를 런타임 설정으로 분리하여 관리</td></tr><tr><td></td><td>다형성 전략 맵핑</td><td>전략 패턴에서 구현체 선택을 조건문 대신 맵핑 테이블이나 DI 컨테이너로 효율화</td></tr><tr><td></td><td>성능 최적화 기법</td><td>추상화 계층에서의 메모리, 오버헤드 문제 해결을 위한 캐싱/풀링/지연 로딩 전략 적용</td></tr><tr><td><strong>실무 사례 중심 학습</strong></td><td>도메인별 전략 캡슐화 (결제, 인증 등)</td><td>서비스마다 캡슐화가 필요한 다양한 전략 로직을 구체적으로 설계하고 적용</td></tr><tr><td></td><td>모듈 간 책임 분리 및 재사용</td><td>공통 기능 (로깅, 감사, 에러 핸들링 등) 의 독립 모듈화</td></tr><tr><td></td><td>변화 주도 설계 기반의 캡슐화 적용</td><td>DDD, 유비쿼터스 언어 기반의 변화 식별 및 구조 설계 전략</td></tr></tbody></table><h3 id=추가로-알아야-할-내용-및-관련-분야>추가로 알아야 할 내용 및 관련 분야<a hidden class=anchor aria-hidden=true href=#추가로-알아야-할-내용-및-관련-분야>#</a></h3><table><thead><tr><th><strong>설명</strong></th><th><strong>관련 분야</strong></th><th><strong>학습 주제</strong></th></tr></thead><tbody><tr><td>API 구조 변경에 유연하게 대응</td><td><strong>백엔드 개발</strong></td><td>REST API 추상화, 버저닝 전략, 인터페이스 캡슐화</td></tr><tr><td>동적 요청 처리 및 전략별 라우팅 구현</td><td><strong>MSA 아키텍처</strong></td><td>서비스 간 전략 선택 구조 (예: 다양한 결제 서비스 연동)</td></tr><tr><td>플러그인 형태로 기능 추가 지원</td><td><strong>모듈러 아키텍처</strong></td><td>OSGi, Microkernel 아키텍처, 메타프로그래밍</td></tr><tr><td>프론트엔드 렌더링 전략 분리</td><td><strong>프론트엔드 개발</strong></td><td>고차 컴포넌트 (HOC), Render Props, Composition API</td></tr><tr><td>의존성 주입과 서비스 등록의 자동화</td><td><strong>프레임워크 설계</strong></td><td>Spring, NestJS, Angular 의 DI 컨테이너</td></tr><tr><td>객체 재사용을 통한 성능 최적화</td><td><strong>성능 최적화</strong></td><td>객체 풀링 (Object Pooling), Lazy Initialization</td></tr><tr><td>불변성과 상태 캡슐화를 통해 변화 관리</td><td><strong>함수형 프로그래밍</strong></td><td>고차 함수 (HOF), 불변 객체, Currying, Composition</td></tr><tr><td>설계 구조의 변화 대응성 품질 측정</td><td><strong>소프트웨어 품질관리</strong></td><td>결합도 (Coupling), 응집도 (Cohesion), 변경 영향 분석</td></tr><tr><td>변경 가능한 비즈니스 규칙과 고정 도메인 간 분리</td><td><strong>도메인 주도 설계 (DDD)</strong></td><td>Bounded Context, Aggregate, Anti-corruption Layer</td></tr><tr><td>UI 상태 및 입력 전략 캡슐화</td><td><strong>프론트엔드 상태 관리</strong></td><td>상태 관리 전략 (Redux, Recoil, Pinia 등)</td></tr><tr><td>이벤트 기반 흐름의 전략적 분리</td><td><strong>비동기 시스템 설계</strong></td><td>이벤트 소싱 (Event Sourcing), Saga, CQRS</td></tr><tr><td>동적 기능 로딩 및 배포 자동화를 위한 구성 캡슐화</td><td><strong>클라우드 네이티브 설계</strong></td><td>12-Factor App, Externalized Configuration, Sidecar Pattern</td></tr><tr><td>요청 흐름, 인증, 로깅 등 횡단 관심사 분리</td><td><strong>서비스 메시 (Service Mesh)</strong></td><td>Envoy, Istio 를 통한 기능 캡슐화 및 분리</td></tr><tr><td>유연한 전략 기반 데이터 일관성 보장</td><td><strong>데이터 관리</strong></td><td>Eventual Consistency, Outbox Pattern, Transactional Outbox</td></tr><tr><td>변화 기반의 테스트 설계 전략</td><td><strong>테스트 아키텍처</strong></td><td>테스트 격리 (Mock, Stub), Contract Testing, 테스트 케이스 추상화</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><h3 id=소프트웨어-설계-원칙-design-principles>소프트웨어 설계 원칙 (Design Principles)<a hidden class=anchor aria-hidden=true href=#소프트웨어-설계-원칙-design-principles>#</a></h3><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td><strong>OCP (Open-Closed Principle)</strong></td><td>소프트웨어는 <strong>확장에는 열려 있고, 변경에는 닫혀 있어야 한다</strong>는 원칙.</td></tr><tr><td><strong>결합도 (Coupling)</strong></td><td>모듈/클래스 간의 <strong>의존 관계의 강도</strong>를 나타냄. 낮을수록 유연함.</td></tr><tr><td><strong>응집도 (Cohesion)</strong></td><td>모듈 내부 구성 요소 간의 <strong>연관성 또는 집중도</strong>. 높을수록 유지보수에 유리.</td></tr><tr><td><strong>제어 역전 (Inversion of Control, IoC)</strong></td><td><strong>프로그램의 흐름 제어</strong>를 개발자가 아닌 <strong>프레임워크</strong>나 외부 구성요소가 수행하도록 위임하는 원칙.</td></tr></tbody></table><h3 id=객체-지향-프로그래밍-개념-oop-concepts>객체 지향 프로그래밍 개념 (OOP Concepts)<a hidden class=anchor aria-hidden=true href=#객체-지향-프로그래밍-개념-oop-concepts>#</a></h3><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td><strong>캡슐화 (Encapsulation)</strong></td><td>데이터와 행동을 하나로 묶고, <strong>외부에서 내부 구현을 감추는 원칙</strong>.</td></tr><tr><td><strong>추상화 (Abstraction)</strong></td><td>복잡한 내부 구현을 숨기고, <strong>본질적인 특징만 드러내는 기법</strong>.</td></tr><tr><td><strong>다형성 (Polymorphism)</strong></td><td>동일한 인터페이스를 통해 <strong>서로 다른 구현을 사용할 수 있는 능력</strong>.</td></tr></tbody></table><h3 id=디자인-패턴-design-patterns>디자인 패턴 (Design Patterns)<a hidden class=anchor aria-hidden=true href=#디자인-패턴-design-patterns>#</a></h3><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td><strong>전략 패턴 (Strategy Pattern)</strong></td><td>알고리즘/정책을 <strong>인터페이스로 캡슐화</strong>하고, <strong>런타임에 교체 가능</strong>하게 함.</td></tr><tr><td><strong>팩토리 패턴 (Factory Pattern)</strong></td><td>객체 생성 로직을 <strong>클래스 외부로 위임하여 캡슐화</strong>.</td></tr><tr><td><strong>템플릿 메서드 패턴 (Template Method Pattern)</strong></td><td><strong>알고리즘의 틀은 상위 클래스</strong>에서 정의하고, 세부 구현은 하위 클래스에서 수행.</td></tr><tr><td><strong>데코레이터 패턴 (Decorator Pattern)</strong></td><td>객체에 <strong>기능을 동적으로 추가</strong>할 수 있도록 구성된 패턴.</td></tr></tbody></table><h3 id=의존성-및-구성-관리-dependency--configuration>의존성 및 구성 관리 (Dependency & Configuration)<a hidden class=anchor aria-hidden=true href=#의존성-및-구성-관리-dependency--configuration>#</a></h3><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td><strong>DI (Dependency Injection)</strong></td><td>객체가 필요로 하는 <strong>의존성을 외부에서 주입</strong>받는 구조. IoC 의 대표 구현 방식.</td></tr><tr><td><strong>Feature Toggle (기능 토글)</strong></td><td><strong>기능을 설정으로 On/Off</strong>할 수 있게 하는 기법. A/B 테스트, 배포 전략 등에서 사용.</td></tr></tbody></table><h3 id=테스트-및-유지보수-전략-testing--maintainability>테스트 및 유지보수 전략 (Testing & Maintainability)<a hidden class=anchor aria-hidden=true href=#테스트-및-유지보수-전략-testing--maintainability>#</a></h3><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td><strong>모킹 (Mocking)</strong></td><td>실제 객체 대신 <strong>가짜 (Mock) 객체를 사용하여 테스트</strong>하는 기법.</td></tr><tr><td><strong>인터페이스 기반 개발</strong></td><td>변화에 유연하게 대응하기 위해 <strong>인터페이스를 먼저 정의하고 구현체를 분리</strong>하는 개발 방식.</td></tr></tbody></table><h3 id=아키텍처-및-시스템-설계-architecture--system-design>아키텍처 및 시스템 설계 (Architecture & System Design)<a hidden class=anchor aria-hidden=true href=#아키텍처-및-시스템-설계-architecture--system-design>#</a></h3><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td><strong>MSA (Microservices Architecture)</strong></td><td>애플리케이션을 <strong>작은 독립 서비스 단위</strong>로 나누어 운영하는 아키텍처.</td></tr><tr><td><strong>플러그인 구조 (Plugin Architecture)</strong></td><td>기능을 <strong>독립된 모듈로 캡슐화</strong>하여 동적으로 로딩/교체 가능하게 함.</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><h3 id=encapsulate-what-varies-원칙-관련>Encapsulate What Varies 원칙 관련<a hidden class=anchor aria-hidden=true href=#encapsulate-what-varies-원칙-관련>#</a></h3><ul><li><a href=https://martinfowler.com/bliki/EncapsulateWhatVaries.html>Martin Fowler – Encapsulate What Varies</a></li><li><a href=https://refactoring.guru/design-patterns/principles/encapsulate-what-varies>Refactoring Guru – Encapsulate What Varies</a></li><li><a href=https://medium.com/@david.bonnet/encapsulate-what-varies-7d7a6e6e5b6b>Medium – Encapsulate What Varies</a></li><li><a href=https://alexkondov.com/encapsulate-what-varies/>Alex Kondov – Encapsulate What Varies</a></li><li><a href=https://softwareengineering.stackexchange.com/questions/337413/what-does-it-mean-when-one-says-encapsulate-what-varies>Software Engineering Stack Exchange – Encapsulate What Varies 의미</a></li><li><a href=https://neatcode.org/encapsulate-what-varies/>NeatCode – Encapsulate What Varies 설계 원칙</a></li><li><a href=https://www.linkedin.com/learning/advanced-design-patterns-design-principles/encapsulate-what-varies>LinkedIn Learning – Encapsulate What Varies 원칙</a></li><li><a href="https://www.informit.com/articles/article.aspx?p=167890&amp;seqNum=4">InformIT – Find What Is Varying and Encapsulate It</a></li></ul><h3 id=디자인-패턴-design-patterns-1>디자인 패턴 (Design Patterns)<a hidden class=anchor aria-hidden=true href=#디자인-패턴-design-patterns-1>#</a></h3><ul><li><a href=https://refactoring.guru/design-patterns/strategy>Refactoring Guru – Strategy Pattern</a></li><li><a href=https://www.baeldung.com/java-strategy-pattern>Baeldung – Strategy Pattern</a></li><li><a href=https://refactoring.guru/design-patterns/template-method>Refactoring Guru – Template Method</a></li><li><a href=https://en.wikipedia.org/wiki/Strategy_pattern>Wikipedia – Strategy Pattern</a></li><li><a href=https://www.geeksforgeeks.org/software-design-patterns/>GeeksforGeeks – 소프트웨어 디자인 패턴</a></li><li><a href=https://en.wikipedia.org/wiki/Software_design_pattern>Wikipedia – 소프트웨어 디자인 패턴</a></li><li><a href=https://en.wikipedia.org/wiki/Design_Patterns>GoF 디자인 패턴 공식 문서</a></li></ul><h3 id=의존성-주입-dependency-injection>의존성 주입 (Dependency Injection)<a hidden class=anchor aria-hidden=true href=#의존성-주입-dependency-injection>#</a></h3><ul><li><a href=https://martinfowler.com/articles/injection.html>Martin Fowler – Dependency Injection</a></li><li><a href=https://docs.spring.io/spring-framework/reference/core/beans/dependencies/factory-collaboration.html>Spring DI 설명 문서</a></li><li><a href=https://docs.spring.io/spring-framework/reference/core/beans/dependencies.html>Spring DI 공식 문서</a></li><li><a href=https://stackoverflow.com/questions/31317141/whats-the-difference-between-design-patterns-and-design-principles>Stack Overflow – 의존성 역전과 인터페이스 프로그래밍 비교</a></li></ul><h3 id=아키텍처-및-msa>아키텍처 및 MSA<a hidden class=anchor aria-hidden=true href=#아키텍처-및-msa>#</a></h3><ul><li><a href=https://microservices.io/patterns/>Microservices Patterns – Chris Richardson</a></li><li><a href=https://en.wikipedia.org/wiki/Dependency_inversion_principle>Wikipedia – 의존성 역전 원칙 (DIP)</a></li><li><a href=https://pl.cs.jhu.edu/oose/lectures/design-principles.shtml>Johns Hopkins University – 객체지향 소프트웨어 엔지니어링</a></li></ul><h3 id=구성-및-런타임-전략>구성 및 런타임 전략<a hidden class=anchor aria-hidden=true href=#구성-및-런타임-전략>#</a></h3><ul><li><a href=https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.profiles>Spring Boot Profiles Documentation</a></li><li><a href=https://martinfowler.com/articles/feature-toggles.html>Martin Fowler – Feature Toggles</a></li></ul><hr></div></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>