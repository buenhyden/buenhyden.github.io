<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Pagination | hyunyoun's Blog</title><meta name=keywords content="Backend-Development,API-Design-and-Implementation,Fundamentals,Pagination"><meta name=description content='페이지네이션을 통해 서버는 데이터를 작은 "페이지" 단위로 나누어 전달하여 성능, 사용자 경험, 리소스 사용을 모두 최적화할 수 있다.'><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-engineering/application-development/api-design-and-implementation/api-performance/pagination/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-engineering/application-development/api-design-and-implementation/api-performance/pagination/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-engineering/application-development/api-design-and-implementation/api-performance/pagination/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Pagination"><meta property="og:description" content='페이지네이션을 통해 서버는 데이터를 작은 "페이지" 단위로 나누어 전달하여 성능, 사용자 경험, 리소스 사용을 모두 최적화할 수 있다.'><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-27T02:50:00+00:00"><meta property="article:modified_time" content="2025-02-27T02:50:00+00:00"><meta property="article:tag" content="Backend-Development"><meta property="article:tag" content="API-Design-and-Implementation"><meta property="article:tag" content="Fundamentals"><meta property="article:tag" content="Pagination"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Pagination"><meta name=twitter:description content='페이지네이션을 통해 서버는 데이터를 작은 "페이지" 단위로 나누어 전달하여 성능, 사용자 경험, 리소스 사용을 모두 최적화할 수 있다.'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"기술 블로그","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Software Engineering","item":""},{"@type":"ListItem","position":3,"name":"Application Development","item":""},{"@type":"ListItem","position":4,"name":"API Design and Implementation","item":"https://buenhyden.github.io/posts/software-engineering/application-development/api-design-and-implementation/"},{"@type":"ListItem","position":5,"name":"API Performance","item":"https://buenhyden.github.io/posts/software-engineering/application-development/api-design-and-implementation/api-performance/"},{"@type":"ListItem","position":6,"name":"Pagination","item":"https://buenhyden.github.io/posts/software-engineering/application-development/api-design-and-implementation/api-performance/pagination/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Pagination","name":"Pagination","description":"페이지네이션을 통해 서버는 데이터를 작은 \"페이지\" 단위로 나누어 전달하여 성능, 사용자 경험, 리소스 사용을 모두 최적화할 수 있다.","keywords":["Backend-Development","API-Design-and-Implementation","Fundamentals","Pagination"],"articleBody":"Pagination API 설계에서 페이지네이션은 대량의 데이터를 효율적으로 전송하고 관리하기 위한 핵심 요소이다. 페이지네이션을 통해 서버는 데이터를 작은 “페이지” 단위로 나누어 전달하여 성능, 사용자 경험, 리소스 사용을 모두 최적화할 수 있다.\n페이지네이션의 필요성과 중요성 페이지네이션이 필요한 주요 이유는 다음과 같다:\n성능 최적화\n대규모 데이터셋을 한 번에 전송하면 여러 문제가 발생한다:\n서버 부하 증가: 대량의 레코드를 검색하고 직렬화하는 과정은 서버 리소스를 많이 소모한다. 네트워크 부하: 대용량 응답은 네트워크 대역폭을 많이 사용하며, 특히 모바일 환경에서 문제가 된다. 응답 지연: 큰 데이터셋을 처리하는 데 시간이 오래 걸려 사용자 경험이 저하된다. 메모리 사용량: 클라이언트와 서버 모두 대량의 데이터를 메모리에 로드해야 한다. 사용자 경험 향상\n페이지네이션은 사용자 인터페이스와 경험을 개선한다:\n점진적 로딩: 사용자는 전체 데이터셋이 로드될 때까지 기다릴 필요 없이 즉시 데이터를 볼 수 있다. UI 관리 용이성: 적절한 크기의 데이터 청크는 UI 렌더링과 상호작용을 더 효율적으로 만든다. 무한 스크롤, 로드 더 보기: 현대적인 UX 패턴에 적합하다. 리소스 효율성\n페이지네이션은 여러 방면에서 리소스를 절약한다:\n필요한 데이터만 전송: 사용자가 실제로 보거나 사용할 데이터만 전송한다. 서버 자원 보호: 서버의 CPU, 메모리, I/O 사용을 최적화한다. 데이터베이스 효율성: 데이터베이스 쿼리가 더 효율적으로 실행되고 인덱스를 더 잘 활용한다. 페이지네이션 설계 방법론 API 페이지네이션에는 여러 설계 방법이 있으며, 각각 장단점이 있다.\n오프셋 기반 페이지네이션(Offset-based Pagination) 가장 단순하고 널리 사용되는 방식으로, 건너뛸 항목 수(오프셋)와 페이지 크기를 지정한다.\n구현 예시 1 GET /api/articles?offset=20\u0026limit=10 여기서 offset=20은 처음 20개 항목을 건너뛰고, limit=10은 최대 10개 항목을 반환하라는 의미이다.\n응답 예시 1 2 3 4 5 6 7 8 9 10 11 12 13 { \"data\": [ { \"id\": 21, \"title\": \"Article 21\" }, { \"id\": 22, \"title\": \"Article 22\" }, ... ], \"pagination\": { \"total\": 573, \"offset\": 20, \"limit\": 10, \"has_more\": true } } 장점 구현 용이성: 대부분의 데이터베이스가 OFFSET/LIMIT을 지원한다. 직관적 탐색: 특정 페이지로 직접 이동할 수 있다(예: 5페이지로 바로 이동). 총 항목 수 제공: 전체 결과 수를 쉽게 계산하고 표시할 수 있다. 단점 성능 저하: 데이터셋이 커질수록 성능이 저하된다. 오프셋이 클 경우, 데이터베이스는 여전히 오프셋 전의 모든 행을 스캔해야 한다. 일관성 문제: 페이지 간 이동 중 데이터가 추가되거나 삭제되면 중복 또는 누락이 발생할 수 있다. 대규모 오프셋 비효율성: 매우 큰 오프셋(예: 10,000+)은 데이터베이스 성능에 심각한 영향을 미칠 수 있다. 커서 기반 페이지네이션(Cursor-based Pagination) 커서(일종의 포인터)를 사용하여 결과셋의 특정 위치를 표시한다. 일반적으로 커서는 정렬된 필드의 값(주로 ID나 타임스탬프)을 기반으로 한다.\n구현 예시 1 GET /api/articles?cursor=eyJpZCI6MjB9\u0026limit=10 여기서 cursor는 이전 페이지의 마지막 항목을 가리키는 인코딩된 값으로, 다음 결과셋의 시작점을 나타낸다.\n응답 예시 1 2 3 4 5 6 7 8 9 10 11 12 13 { \"data\": [ { \"id\": 21, \"title\": \"Article 21\" }, { \"id\": 22, \"title\": \"Article 22\" }, ... ], \"pagination\": { \"next_cursor\": \"eyJpZCI6MzB9\", \"prev_cursor\": \"eyJpZCI6MjB9\", \"limit\": 10, \"has_more\": true } } 커서 생성 방법 보통 커서는 다음과 같은 값의 Base64 인코딩이다:\n1 2 3 4 5 // 단순 커서 cursor = base64_encode(\"30\") // 마지막 항목의 ID // 복합 커서 cursor = base64_encode(JSON.stringify({ id: 30, created_at: \"2023-03-22T15:30:00Z\" })) 장점 확장성: 데이터셋 크기에 관계없이 일관된 성능을 제공한다. 일관성: 페이지 간 이동 중 데이터가 변경되어도 중복이나 누락 없이 일관된 결과를 제공한다. 효율성: 데이터베이스가 인덱스를 효과적으로 활용할 수 있다. 방향성: 앞으로/뒤로 이동을 자연스럽게 지원한다. 단점 구현 복잡성: 오프셋 기반보다 구현이 더 복잡하다. 임의 접근 제약: 특정 페이지로 직접 이동하기 어렵다(첫 페이지부터 순차적으로 이동해야 함). 투명성 부족: 커서 값은 일반적으로 불투명하며, 클라이언트가 내부 구조를 이해하기 어렵다. 키셋 기반 페이지네이션(Keyset-based Pagination) 커서 기반 페이지네이션의 변형으로, 인코딩된 커서 대신 실제 필드 값을 직접 사용한다.\n구현 예시 1 GET /api/articles?created_at_lt=2023-03-22T15:30:00Z\u0026limit=10 여기서 created_at_lt는 “생성 시간이 이 값보다 작은” 항목을 요청한다.\n응답 예시 1 2 3 4 5 6 7 8 9 10 11 12 { \"data\": [ { \"id\": 45, \"title\": \"Article 45\", \"created_at\": \"2023-03-22T15:25:00Z\" }, { \"id\": 39, \"title\": \"Article 39\", \"created_at\": \"2023-03-22T15:20:00Z\" }, ... ], \"pagination\": { \"next_created_at\": \"2023-03-22T15:10:00Z\", \"limit\": 10, \"has_more\": true } } 장점 확장성: 커서 기반과 유사한 성능 특성을 가진다. 투명성: 페이지네이션 매개변수가 명확하고 이해하기 쉽다. 복합 정렬 지원: 여러 필드를 기준으로 정렬된 결과를 쉽게 페이지네이션할 수 있다. 단점 복잡성: 필드 타입과 정렬 방향에 따라 다른 연산자 사용이 필요하다. 유일성 보장 필요: 페이지네이션 키는 유일한 값이거나, 유일하지 않을 경우 추가 조건이 필요하다. 페이지 번호 기반 페이지네이션(Page-based Pagination) 페이지 번호와 페이지 크기를 지정하는 방식으로, 오프셋 기반의 변형이다.\n구현 예시 1 GET /api/articles?page=3\u0026per_page=10 여기서 page=3은 3페이지를, per_page=10은 페이지당 10개 항목을 요청한다.\n응답 예시 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 { \"data\": [ { \"id\": 21, \"title\": \"Article 21\" }, { \"id\": 22, \"title\": \"Article 22\" }, ... ], \"pagination\": { \"total_items\": 573, \"total_pages\": 58, \"current_page\": 3, \"per_page\": 10, \"has_next\": true, \"has_prev\": true } } 장점 사용자 친화성: 전통적인 페이지 번호 UI와 자연스럽게 통합된다. 구현 용이성: 오프셋 기반 페이지네이션을 약간 수정하여 구현할 수 있다. 직관적인 탐색: 페이지 번호로 쉽게 탐색 가능하다. 단점 오프셋과 동일한 성능 문제: 높은 페이지 번호에서 성능이 저하된다. 일관성 문제: 데이터 변경 시 페이지 내용이 변할 수 있다. 고급 페이지네이션 기법 및 최적화 커서 기반 페이지네이션의 최적화 커서 기반 페이지네이션을 효과적으로 구현하는 방법:\n복합 인덱스 활용 1 2 3 4 5 6 7 8 9 -- 복합 정렬을 위한 인덱스 예시 CREATE INDEX idx_articles_created_id ON articles (created_at DESC, id DESC); -- 이 인덱스를 활용하는 쿼리 SELECT * FROM articles WHERE (created_at \u003c :last_created_at) OR (created_at = :last_created_at AND id \u003c :last_id) ORDER BY created_at DESC, id DESC LIMIT 10; 이 방식은 정렬 키가 중복될 경우에도 일관된 결과를 보장한다.\n양방향 탐색 지원 다음 페이지와 이전 페이지 모두 지원하려면 방향에 따라 다른 비교 연산자를 사용해야 한다:\n1 2 3 4 5 6 7 // 다음 페이지 (오름차순) where = \"created_at \u003e :cursor_value\"; order = \"created_at ASC\"; // 이전 페이지 (오름차순) where = \"created_at \u003c :cursor_value\"; order = \"created_at DESC\"; 전체 항목 수 최적화 전체 항목 수를 계산하는 것은 대규모 데이터셋에서 비용이 많이 들 수 있다.\n다음과 같은 최적화가 가능하다:\n추정 카운트\n정확한 수 대신 대략적인 수를 제공하여 성능을 향상시킬 수 있다:\n1 2 3 -- PostgreSQL에서 추정 카운트 EXPLAIN SELECT * FROM articles; -- 이 쿼리는 실행 계획과 함께 행 수 추정치를 제공합니다 비동기 카운트\n페이지네이션된 결과를 먼저 반환하고, 백그라운드에서 전체 카운트를 계산할 수 있다.\n증분 카운트\n캐시된 카운트 값을 유지하고 데이터 변경 시 증분적으로 업데이트한다.\n하이브리드 접근법 다양한 페이지네이션 방식을 상황에 따라 조합할 수 있다:\n첫 페이지 최적화\n초기 페이지에는 오프셋 기반을, 깊은 페이지에는 커서 기반 페이지네이션을 사용한다.\n가변 페이지 크기\n데이터 특성에 따라 페이지 크기를 동적으로 조정한다:\n1 GET /api/articles?limit=10\u0026adaptive=true 여기서 adaptive=true는 서버가 상황에 따라 반환하는 항목 수를 조정할 수 있음을 나타낸다.\n다양한 API 형식에서의 페이지네이션 구현 REST API REST API에서는 일반적으로 쿼리 파라미터를 통해 페이지네이션을 구현한다:\nHTTP 헤더를 활용한 페이지네이션 1 2 3 4 5 6 HTTP/1.1 200 OK Link: ; rel=\"next\", ; rel=\"prev\", ; rel=\"first\", ; rel=\"last\" X-Total-Count: 573 이 방식은 GitHub API에서 사용하는 방식으로, 응답 헤더를 통해 페이지네이션 정보를 제공한다.\nHAL(Hypertext Application Language) 형식 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 { \"_embedded\": { \"articles\": [ { \"id\": 21, \"title\": \"Article 21\" }, { \"id\": 22, \"title\": \"Article 22\" } ] }, \"_links\": { \"self\": { \"href\": \"/api/articles?page=3\" }, \"next\": { \"href\": \"/api/articles?page=4\" }, \"prev\": { \"href\": \"/api/articles?page=2\" }, \"first\": { \"href\": \"/api/articles?page=1\" }, \"last\": { \"href\": \"/api/articles?page=58\" } }, \"page\": { \"size\": 10, \"totalElements\": 573, \"totalPages\": 58, \"number\": 3 } } 이 방식은 HATEOAS 원칙을 따르며, 클라이언트가 링크를 통해 탐색할 수 있다.\nGraphQL GraphQL에서는 페이지네이션을 구현하기 위한 여러 패턴이 있다:\n커넥션 패턴(Relay 스타일) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 { articlesConnection(first: 10, after: \"cursor_here\") { edges { node { id title } cursor } pageInfo { hasNextPage hasPreviousPage startCursor endCursor } totalCount } } 이 패턴은 Facebook의 Relay 규격을 따르며, 커서 기반 페이지네이션에 최적화되어 있다.\n오프셋 기반 접근법 1 2 3 4 5 6 7 { articles(offset: 20, limit: 10) { id title } articlesCount } 이 방식은 간단하지만 대규모 데이터셋에서는 성능 문제가 있다.\ngRPC gRPC에서는 프로토콜 버퍼 정의를 통해 페이지네이션을 구현한다:\n1 2 3 4 5 6 7 8 9 10 11 message ListArticlesRequest { string page_token = 1; int32 page_size = 2; } message ListArticlesResponse { repeated Article articles = 1; string next_page_token = 2; string prev_page_token = 3; int32 total_size = 4; } 클라이언트는 page_token을 사용하여 다음 페이지를 요청한다.\n페이지네이션 관련 모범 사례와 가이드라인 일반적인 모범 사례 합리적인 기본값 설정: 적절한 기본 페이지 크기 설정(10-50 항목) 기본 정렬 순서 지정 한계 설정: 최대 페이지 크기 제한(예: 100 또는 1000) 요청당 최대 항목 수 제한(DoS 방지) 일관성 유지: API 전체에서 동일한 페이지네이션 규칙 적용 명확하고 일관된 매개변수 이름 사용 응답 형식: 데이터와 페이지네이션 메타데이터 명확히 구분 다음/이전 페이지 링크 또는 토큰 항상 포함 성능 관련 모범 사례 데이터베이스 최적화: 페이지네이션 쿼리에 사용되는 필드에 인덱스 생성 큰 오프셋 사용 시 커서 기반 방식 고려 캐싱 전략: 페이지네이션된 응답 캐싱 캐시 키에 페이지네이션 매개변수 포함 필요한 필드만 선택: 클라이언트가 필요한 필드만 지정할 수 있도록 허용 특히 대용량 데이터에서 중요 사용자 경험 개선 가이드라인 진행 상황 표시: 총 페이지 수 또는 항목 수 제공 현재 위치 표시(예: “573개 중 21-30 표시 중”) 유연한 페이지 크기: 클라이언트가 페이지 크기를 선택할 수 있도록 허용 모바일/데스크톱 환경에 맞게 최적화 정렬 옵션 제공: 다양한 필드로 정렬 지원 오름차순/내림차순 정렬 방향 지원 문서화 가이드라인 명확한 페이지네이션 설명: 사용된 페이지네이션 메커니즘 설명 매개변수 및 응답 형식 문서화 예제 포함: 요청 및 응답 예제 제공 일반적인 시나리오 설명 제한 사항 명시: 최대 페이지 크기 성능 관련 고려사항 깊은 페이지 탐색 시 권장사항 페이지네이션 구현 예시 Node.js/Express API(커서 기반) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 // 커서 기반 페이지네이션 구현 예시 const express = require('express'); const router = express.Router(); router.get('/articles', async (req, res) =\u003e { try { // 페이지네이션 매개변수 파싱 const limit = Math.min(parseInt(req.query.limit) || 10, 100); // 최대 100 제한 let cursor = null; if (req.query.cursor) { try { // Base64 디코딩 및 JSON 파싱 const decodedCursor = Buffer.from(req.query.cursor, 'base64').toString('utf-8'); cursor = JSON.parse(decodedCursor); } catch (e) { return res.status(400).json({ error: '잘못된 커서 형식' }); } } // 쿼리 구성 let query = db('articles') .select('*') .orderBy('created_at', 'desc') .orderBy('id', 'desc') .limit(limit + 1); // 다음 페이지 있는지 확인용 추가 항목 // 커서가 있으면 조건 추가 if (cursor) { query = query.where(function() { this.where('created_at', '\u003c', cursor.created_at) .orWhere(function() { this.where('created_at', '=', cursor.created_at) .andWhere('id', '\u003c', cursor.id); }); }); } // 쿼리 실행 const articles = await query; // 다음 페이지 있는지 확인 const hasMore = articles.length \u003e limit; if (hasMore) { articles.pop(); // 추가 항목 제거 } // 다음 커서 생성 let nextCursor = null; if (hasMore \u0026\u0026 articles.length \u003e 0) { const lastItem = articles[articles.length - 1]; const cursorObj = { created_at: lastItem.created_at, id: lastItem.id }; nextCursor = Buffer.from(JSON.stringify(cursorObj)).toString('base64'); } // 응답 구성 res.json({ data: articles, pagination: { next_cursor: nextCursor, has_more: hasMore, limit } }); } catch (error) { console.error('Error fetching articles:', error); res.status(500).json({ error: '서버 오류' }); } }); module.exports = router; Spring Boot API(오프셋 기반) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 @RestController @RequestMapping(\"/api/articles\") public class ArticleController { @Autowired private ArticleRepository articleRepository; @GetMapping public ResponseEntity\u003cMap\u003cString, Object\u003e\u003e getArticles( @RequestParam(defaultValue = \"0\") int offset, @RequestParam(defaultValue = \"10\") int limit) { // 최대 한계 적용 limit = Math.min(limit, 100); // 페이지네이션된 결과 가져오기 Page\u003cArticle\u003e articlesPage = articleRepository.findAll( PageRequest.of(offset / limit, limit, Sort.by(Sort.Direction.DESC, \"createdAt\"))); List\u003cArticle\u003e articles = articlesPage.getContent(); // 응답 구성 Map\u003cString, Object\u003e response = new HashMap\u003c\u003e(); response.put(\"data\", articles); Map\u003cString, Object\u003e pagination = new HashMap\u003c\u003e(); pagination.put(\"total\", articlesPage.getTotalElements()); pagination.put(\"offset\", offset); pagination.put(\"limit\", limit); pagination.put(\"has_more\", offset + limit \u003c articlesPage.getTotalElements()); response.put(\"pagination\", pagination); return ResponseEntity.ok(response); } } Django REST Framework API(커서 기반) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 from rest_framework.decorators import api_view from rest_framework.response import Response from rest_framework import status from django.core.paginator import Paginator from .models import Article from .serializers import ArticleSerializer import base64 import json @api_view(['GET']) def article_list(request): try: # 페이지네이션 매개변수 파싱 limit = min(int(request.query_params.get('limit', 10)), 100) cursor_param = request.query_params.get('cursor') # 기본 쿼리셋 queryset = Article.objects.all().order_by('-created_at', '-id') # 커서가 있으면 디코딩 및 필터링 if cursor_param: try: decoded = base64.b64decode(cursor_param).decode('utf-8') cursor = json.loads(decoded) # 복합 조건 (created_at, id)로 필터링 created_at = cursor.get('created_at') id = cursor.get('id') queryset = queryset.filter( models.Q(created_at__lt=created_at) | models.Q(created_at=created_at, id__lt=id) ) except Exception as e: return Response({'error': '잘못된 커서 형식'}, status=status.HTTP_400_BAD_REQUEST) # 쿼리 실행 (limit + 1로 다음 페이지 여부 확인) articles = list(queryset[:limit + 1]) # 다음 페이지 있는지 확인 has_more = len(articles) \u003e limit if has_more: articles.pop() # 추가 항목 제거 # 다음 커서 생성 next_cursor = None if has_more and articles: last_item = articles[-1] cursor_obj = { 'created_at': last_item.created_at.isoformat(), 'id': last_item.id } next_cursor = base64.b64encode(json.dumps(cursor_obj).encode('utf-8')).decode('utf-8') # 직렬화 및 응답 구성 serializer = ArticleSerializer(articles, many=True) return Response({ 'data': serializer.data, 'pagination': { 'next_cursor': next_cursor, 'has_more': has_more, 'limit': limit } }) except Exception as e: return Response({'error': str(e)}, status=status.HTTP_500_INTERNAL_SERVER_ERROR) 페이지네이션의 도전과제와 해결책 대규모 데이터셋 문제 대규모 데이터셋에서 페이지네이션은 다양한 도전과제를 제시한다:\n문제: 오프셋 기반 페이지네이션의 성능 저하 깊은 페이지로 이동할수록 쿼리 성능이 저하된다.\n해결책:\n커서 기반 페이지네이션 채택: 데이터셋 크기에 관계없이 일관된 성능 복합 인덱스 활용: 정렬 필드에 대한 효율적인 인덱스 생성 클러스터링 인덱스 활용: 주요 정렬 필드를 기준으로 물리적 데이터 구성 코드 예시 (MySQL 쿼리 최적화) 1 2 3 4 5 6 7 8 9 10 -- 전통적인 오프셋 쿼리 (느림) SELECT * FROM posts ORDER BY created_at DESC LIMIT 10 OFFSET 10000; -- 커서 기반 접근법 (빠름) SELECT * FROM posts WHERE created_at \u003c '2023-03-22 15:30:00' ORDER BY created_at DESC LIMIT 10; 일관성 문제 페이지네이션 도중 데이터가 변경되면 항목이 중복되거나 누락될 수 있다.\n해결책:\n커서 기반 페이지네이션: 데이터 변경에도 일관된 결과 제공 유일한 정렬 키 사용: 정렬 필드가 유일하지 않은 경우 보조 필드(예: ID) 추가 스냅샷 격리 수준: 트랜잭션 격리 수준을 높여 쿼리 중 일관성 유지 예시 1 2 3 4 5 6 7 8 9 10 11 12 // 복합 키로 일관성 유지 function getNextPage(lastCreatedAt, lastId, limit) { return db.posts .where((post) =\u003e { return ( post.created_at \u003c lastCreatedAt || (post.created_at === lastCreatedAt \u0026\u0026 post.id \u003c lastId) ); }) .orderBy([\"created_at\", \"id\"], [\"desc\", \"desc\"]) .limit(limit); } 백엔드 변경의 영향 API 업그레이드나 백엔드 변경이 페이지네이션에 미치는 영향을 관리해야 한다.\n해결책:\n불투명 커서 사용: 내부 구현 세부 사항을 숨겨 유연성 확보 버전 관리 적용: 페이지네이션 메커니즘 변경 시 명시적 버전 관리 하위 호환성 유지: 기존 페이지네이션 매개변수 지원 유지 버전 관리 예시 1 2 3 4 5 # 기존 API 계속 지원 GET /api/v1/articles?offset=20\u0026limit=10 # 새로운 커서 기반 API 도입 GET /api/v2/articles?cursor=eyJpZCI6MjB9\u0026limit=10 필터링 및 정렬과의 상호작용 복잡한 필터링이나 정렬이 있는 경우 페이지네이션이 복잡해질 수 있다.\n해결책:\n복합 커서 설계: 모든 필터 및 정렬 매개변수를 커서에 포함 일관된 정렬 보장: 항상 기본 정렬 필드를 포함하여 일관성 유지 상태 보존: 필터 상태를 페이지네이션 매개변수와 함께 유지 예시 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // 필터와 정렬이 포함된 커서 const complexCursor = { lastValue: item.price, lastId: item.id, filters: { category: 'electronics', minPrice: 100 }, sort: { field: 'price', direction: 'desc' } }; // Base64로 인코딩하여 클라이언트에 전달 const encodedCursor = btoa(JSON.stringify(complexCursor)); 미래 트렌드와 발전 방향 실시간 페이지네이션 WebSocket이나 Server-Sent Events를 통한 실시간 업데이트와 페이지네이션의 통합이 증가하고 있다.\n구현 접근법 초기 페이지 로드: 일반적인 페이지네이션 API를 통해 초기 데이터 로드 실시간 업데이트: WebSocket을 통해 새 항목이나 변경사항 수신 클라이언트 측 병합: 현재 페이지에 영향을 미치는 업데이트 적용 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 // 초기 데이터 로드 async function loadInitialPage() { const response = await fetch('/api/messages?limit=20'); const data = await response.json(); renderMessages(data.messages); // 가장 최근 메시지 ID 저장 latestMessageId = data.messages[0].id; } // WebSocket 연결 설정 const socket = new WebSocket('wss://example.com/messages'); socket.onmessage = (event) =\u003e { const newMessage = JSON.parse(event.data); // 새 메시지가 현재 페이지에 속하는지 확인 if (newMessage.id \u003e latestMessageId) { // 메시지 목록 맨 위에 추가 prependMessage(newMessage); // 가장 오래된 메시지 제거하여 페이지 크기 유지 removeOldestMessage(); // 최신 ID 업데이트 latestMessageId = newMessage.id; } }; GraphQL과 선언적 페이지네이션 GraphQL은 클라이언트가 필요한 데이터와 페이지네이션 방식을 더 세밀하게 제어할 수 있게 해준다.\nRelay 커넥션 스펙의 장점 표준화: 잘 정의된 페이지네이션 패턴 제공 효율성: 필요한 필드만 요청 가능 유연성: 클라이언트가 데이터 구조 정의 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # 양방향 페이지네이션 지원 쿼리 query GetArticles { articlesConnection(first: 10, after: \"cursor1\") { edges { node { id title # 클라이언트는 필요한 필드만 요청 createdAt } cursor } pageInfo { hasNextPage hasPreviousPage startCursor endCursor } } } AI 기반 페이지네이션 머신러닝을 활용하여 사용자 패턴에 따라 페이지네이션을 최적화하는 방향으로 발전하고 있다.\n가능한 구현 예측적 로딩: 사용자가 다음에 볼 가능성이 높은 데이터 미리 로드 개인화된 페이지 크기: 사용자 행동에 기반한 최적 페이지 크기 동적 조정 관심 기반 우선순위: 사용자 관심사에 따라 결과 순서 조정 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 // 사용자 행동 패턴에 기반한 적응형 페이지 크기 function getAdaptivePageSize(userId) { // 사용자의 과거 페이지 탐색 패턴 분석 const userBehavior = getUserBehaviorMetrics(userId); // 스크롤 속도, 항목당 평균 체류 시간 등에 기반하여 페이지 크기 계산 let optimalPageSize = BASE_PAGE_SIZE; if (userBehavior.scrollSpeed \u003e THRESHOLD_FAST) { // 빠르게 스크롤하는 사용자에게는 더 많은 항목 제공 optimalPageSize *= 1.5; } else if (userBehavior.averageDwellTime \u003e THRESHOLD_ENGAGED) { // 각 항목을 오래 보는 사용자에게는 더 적은 항목 제공 optimalPageSize *= 0.8; } return Math.min(Math.max(optimalPageSize, MIN_PAGE_SIZE), MAX_PAGE_SIZE); } 스트리밍 페이지네이션 대용량 응답을 작은 청크로 스트리밍하여 페이지네이션 경험을 개선하는 접근법이 등장하고 있다.\n구현 접근법 HTTP 스트리밍: Transfer-Encoding: chunked를 사용한 점진적 응답 서버-푸시 스트리밍: Server-Sent Events를 통한 실시간 스트리밍 부분 응답 처리: 클라이언트가 데이터가 도착하는 대로 처리 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 // 서버 측(Node.js) 스트리밍 구현 app.get('/api/stream-articles', (req, res) =\u003e { // 스트리밍 헤더 설정 res.setHeader('Content-Type', 'application/json'); res.setHeader('Transfer-Encoding', 'chunked'); // 초기 응답 시작 res.write('{\"articles\":['); let first = true; // 데이터베이스 쿼리 스트림 생성 const stream = db.collection('articles') .find() .sort({created_at: -1}) .stream(); stream.on('data', (article) =\u003e { // 필요시 쉼표 추가 if (!first) { res.write(','); } else { first = false; } // 항목 직렬화 및 전송 res.write(JSON.stringify(article)); }); stream.on('end', () =\u003e { // 응답 완료 res.write(']}'); res.end(); }); // 클라이언트 연결 해제 처리 req.on('close', () =\u003e { stream.destroy(); }); }); 용어 정리 용어 설명 참고 및 출처 ","wordCount":"3125","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2025-02-27T02:50:00Z","dateModified":"2025-02-27T02:50:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/software-engineering/application-development/api-design-and-implementation/api-performance/pagination/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>기술 블로그</a>&nbsp;»&nbsp;<a href>Software Engineering</a>&nbsp;»&nbsp;<a href>Application Development</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/application-development/api-design-and-implementation/>API Design and Implementation</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/application-development/api-design-and-implementation/api-performance/>API Performance</a></div><h1 class="post-title entry-hint-parent">Pagination</h1><div class=post-description>페이지네이션을 통해 서버는 데이터를 작은 "페이지" 단위로 나누어 전달하여 성능, 사용자 경험, 리소스 사용을 모두 최적화할 수 있다.</div><div class=post-meta><span title='2025-02-27 02:50:00 +0000 UTC'>February 27, 2025</span>&nbsp;·&nbsp;15 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Software%20Engineering/Application%20Development/API%20Design%20and%20Implementation/API%20Performance/Pagination.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#pagination>Pagination</a><ul><li><a href=#페이지네이션의-필요성과-중요성>페이지네이션의 필요성과 중요성</a></li><li><a href=#페이지네이션-설계-방법론>페이지네이션 설계 방법론</a></li><li><a href=#고급-페이지네이션-기법-및-최적화>고급 페이지네이션 기법 및 최적화</a></li><li><a href=#다양한-api-형식에서의-페이지네이션-구현>다양한 API 형식에서의 페이지네이션 구현</a></li><li><a href=#페이지네이션-관련-모범-사례와-가이드라인>페이지네이션 관련 모범 사례와 가이드라인</a></li><li><a href=#페이지네이션-구현-예시>페이지네이션 구현 예시</a></li><li><a href=#페이지네이션의-도전과제와-해결책>페이지네이션의 도전과제와 해결책</a></li><li><a href=#미래-트렌드와-발전-방향>미래 트렌드와 발전 방향</a></li></ul></li><li><a href=#용어-정리>용어 정리</a></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=pagination>Pagination<a hidden class=anchor aria-hidden=true href=#pagination>#</a></h2><p>API 설계에서 페이지네이션은 대량의 데이터를 효율적으로 전송하고 관리하기 위한 핵심 요소이다. 페이지네이션을 통해 서버는 데이터를 작은 &ldquo;페이지&rdquo; 단위로 나누어 전달하여 성능, 사용자 경험, 리소스 사용을 모두 최적화할 수 있다.</p><h3 id=페이지네이션의-필요성과-중요성>페이지네이션의 필요성과 중요성<a hidden class=anchor aria-hidden=true href=#페이지네이션의-필요성과-중요성>#</a></h3><p>페이지네이션이 필요한 주요 이유는 다음과 같다:</p><ol><li><p>성능 최적화<br>대규모 데이터셋을 한 번에 전송하면 여러 문제가 발생한다:</p><ul><li><strong>서버 부하 증가</strong>: 대량의 레코드를 검색하고 직렬화하는 과정은 서버 리소스를 많이 소모한다.</li><li><strong>네트워크 부하</strong>: 대용량 응답은 네트워크 대역폭을 많이 사용하며, 특히 모바일 환경에서 문제가 된다.</li><li><strong>응답 지연</strong>: 큰 데이터셋을 처리하는 데 시간이 오래 걸려 사용자 경험이 저하된다.</li><li><strong>메모리 사용량</strong>: 클라이언트와 서버 모두 대량의 데이터를 메모리에 로드해야 한다.</li></ul></li><li><p>사용자 경험 향상<br>페이지네이션은 사용자 인터페이스와 경험을 개선한다:</p><ul><li><strong>점진적 로딩</strong>: 사용자는 전체 데이터셋이 로드될 때까지 기다릴 필요 없이 즉시 데이터를 볼 수 있다.</li><li><strong>UI 관리 용이성</strong>: 적절한 크기의 데이터 청크는 UI 렌더링과 상호작용을 더 효율적으로 만든다.</li><li><strong>무한 스크롤, 로드 더 보기</strong>: 현대적인 UX 패턴에 적합하다.</li></ul></li><li><p>리소스 효율성<br>페이지네이션은 여러 방면에서 리소스를 절약한다:</p><ul><li><strong>필요한 데이터만 전송</strong>: 사용자가 실제로 보거나 사용할 데이터만 전송한다.</li><li><strong>서버 자원 보호</strong>: 서버의 CPU, 메모리, I/O 사용을 최적화한다.</li><li><strong>데이터베이스 효율성</strong>: 데이터베이스 쿼리가 더 효율적으로 실행되고 인덱스를 더 잘 활용한다.</li></ul></li></ol><h3 id=페이지네이션-설계-방법론>페이지네이션 설계 방법론<a hidden class=anchor aria-hidden=true href=#페이지네이션-설계-방법론>#</a></h3><p>API 페이지네이션에는 여러 설계 방법이 있으며, 각각 장단점이 있다.</p><h4 id=오프셋-기반-페이지네이션offset-based-pagination>오프셋 기반 페이지네이션(Offset-based Pagination)<a hidden class=anchor aria-hidden=true href=#오프셋-기반-페이지네이션offset-based-pagination>#</a></h4><p>가장 단순하고 널리 사용되는 방식으로, 건너뛸 항목 수(오프셋)와 페이지 크기를 지정한다.</p><h5 id=구현-예시>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>GET /api/articles?offset=20&amp;limit=10
</span></span></code></pre></td></tr></table></div></div><p>여기서 <code>offset=20</code>은 처음 20개 항목을 건너뛰고, <code>limit=10</code>은 최대 10개 항목을 반환하라는 의미이다.</p><h5 id=응답-예시>응답 예시<a hidden class=anchor aria-hidden=true href=#응답-예시>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>21</span><span class=p>,</span> <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;Article 21&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>22</span><span class=p>,</span> <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;Article 22&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=err>...</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;pagination&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;total&#34;</span><span class=p>:</span> <span class=mi>573</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;offset&#34;</span><span class=p>:</span> <span class=mi>20</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;limit&#34;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;has_more&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h5><ul><li><strong>구현 용이성</strong>: 대부분의 데이터베이스가 OFFSET/LIMIT을 지원한다.</li><li><strong>직관적 탐색</strong>: 특정 페이지로 직접 이동할 수 있다(예: 5페이지로 바로 이동).</li><li><strong>총 항목 수 제공</strong>: 전체 결과 수를 쉽게 계산하고 표시할 수 있다.</li></ul><h5 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h5><ul><li><strong>성능 저하</strong>: 데이터셋이 커질수록 성능이 저하된다. 오프셋이 클 경우, 데이터베이스는 여전히 오프셋 전의 모든 행을 스캔해야 한다.</li><li><strong>일관성 문제</strong>: 페이지 간 이동 중 데이터가 추가되거나 삭제되면 중복 또는 누락이 발생할 수 있다.</li><li><strong>대규모 오프셋 비효율성</strong>: 매우 큰 오프셋(예: 10,000+)은 데이터베이스 성능에 심각한 영향을 미칠 수 있다.</li></ul><h4 id=커서-기반-페이지네이션cursor-based-pagination>커서 기반 페이지네이션(Cursor-based Pagination)<a hidden class=anchor aria-hidden=true href=#커서-기반-페이지네이션cursor-based-pagination>#</a></h4><p>커서(일종의 포인터)를 사용하여 결과셋의 특정 위치를 표시한다. 일반적으로 커서는 정렬된 필드의 값(주로 ID나 타임스탬프)을 기반으로 한다.</p><h5 id=구현-예시-1>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시-1>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>GET /api/articles?cursor=eyJpZCI6MjB9&amp;limit=10
</span></span></code></pre></td></tr></table></div></div><p>여기서 <code>cursor</code>는 이전 페이지의 마지막 항목을 가리키는 인코딩된 값으로, 다음 결과셋의 시작점을 나타낸다.</p><h5 id=응답-예시-1>응답 예시<a hidden class=anchor aria-hidden=true href=#응답-예시-1>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>21</span><span class=p>,</span> <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;Article 21&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>22</span><span class=p>,</span> <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;Article 22&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=err>...</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;pagination&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;next_cursor&#34;</span><span class=p>:</span> <span class=s2>&#34;eyJpZCI6MzB9&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;prev_cursor&#34;</span><span class=p>:</span> <span class=s2>&#34;eyJpZCI6MjB9&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;limit&#34;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;has_more&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=커서-생성-방법>커서 생성 방법<a hidden class=anchor aria-hidden=true href=#커서-생성-방법>#</a></h5><p>보통 커서는 다음과 같은 값의 Base64 인코딩이다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2>2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3>3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4>4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 단순 커서
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>cursor</span> <span class=o>=</span> <span class=nx>base64_encode</span><span class=p>(</span><span class=s2>&#34;30&#34;</span><span class=p>)</span> <span class=c1>// 마지막 항목의 ID
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// 복합 커서
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>cursor</span> <span class=o>=</span> <span class=nx>base64_encode</span><span class=p>(</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>({</span> <span class=nx>id</span><span class=o>:</span> <span class=mi>30</span><span class=p>,</span> <span class=nx>created_at</span><span class=o>:</span> <span class=s2>&#34;2023-03-22T15:30:00Z&#34;</span> <span class=p>}))</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=장점-1>장점<a hidden class=anchor aria-hidden=true href=#장점-1>#</a></h5><ul><li><strong>확장성</strong>: 데이터셋 크기에 관계없이 일관된 성능을 제공한다.</li><li><strong>일관성</strong>: 페이지 간 이동 중 데이터가 변경되어도 중복이나 누락 없이 일관된 결과를 제공한다.</li><li><strong>효율성</strong>: 데이터베이스가 인덱스를 효과적으로 활용할 수 있다.</li><li><strong>방향성</strong>: 앞으로/뒤로 이동을 자연스럽게 지원한다.</li></ul><h5 id=단점-1>단점<a hidden class=anchor aria-hidden=true href=#단점-1>#</a></h5><ul><li><strong>구현 복잡성</strong>: 오프셋 기반보다 구현이 더 복잡하다.</li><li><strong>임의 접근 제약</strong>: 특정 페이지로 직접 이동하기 어렵다(첫 페이지부터 순차적으로 이동해야 함).</li><li><strong>투명성 부족</strong>: 커서 값은 일반적으로 불투명하며, 클라이언트가 내부 구조를 이해하기 어렵다.</li></ul><h4 id=키셋-기반-페이지네이션keyset-based-pagination>키셋 기반 페이지네이션(Keyset-based Pagination)<a hidden class=anchor aria-hidden=true href=#키셋-기반-페이지네이션keyset-based-pagination>#</a></h4><p>커서 기반 페이지네이션의 변형으로, 인코딩된 커서 대신 실제 필드 값을 직접 사용한다.</p><h5 id=구현-예시-2>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시-2>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>GET /api/articles?created_at_lt=2023-03-22T15:30:00Z&amp;limit=10
</span></span></code></pre></td></tr></table></div></div><p>여기서 <code>created_at_lt</code>는 &ldquo;생성 시간이 이 값보다 작은&rdquo; 항목을 요청한다.</p><h5 id=응답-예시-2>응답 예시<a hidden class=anchor aria-hidden=true href=#응답-예시-2>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>45</span><span class=p>,</span> <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;Article 45&#34;</span><span class=p>,</span> <span class=nt>&#34;created_at&#34;</span><span class=p>:</span> <span class=s2>&#34;2023-03-22T15:25:00Z&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>39</span><span class=p>,</span> <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;Article 39&#34;</span><span class=p>,</span> <span class=nt>&#34;created_at&#34;</span><span class=p>:</span> <span class=s2>&#34;2023-03-22T15:20:00Z&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=err>...</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;pagination&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;next_created_at&#34;</span><span class=p>:</span> <span class=s2>&#34;2023-03-22T15:10:00Z&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;limit&#34;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;has_more&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=장점-2>장점<a hidden class=anchor aria-hidden=true href=#장점-2>#</a></h5><ul><li><strong>확장성</strong>: 커서 기반과 유사한 성능 특성을 가진다.</li><li><strong>투명성</strong>: 페이지네이션 매개변수가 명확하고 이해하기 쉽다.</li><li><strong>복합 정렬 지원</strong>: 여러 필드를 기준으로 정렬된 결과를 쉽게 페이지네이션할 수 있다.</li></ul><h5 id=단점-2>단점<a hidden class=anchor aria-hidden=true href=#단점-2>#</a></h5><ul><li><strong>복잡성</strong>: 필드 타입과 정렬 방향에 따라 다른 연산자 사용이 필요하다.</li><li><strong>유일성 보장 필요</strong>: 페이지네이션 키는 유일한 값이거나, 유일하지 않을 경우 추가 조건이 필요하다.</li></ul><h4 id=페이지-번호-기반-페이지네이션page-based-pagination>페이지 번호 기반 페이지네이션(Page-based Pagination)<a hidden class=anchor aria-hidden=true href=#페이지-번호-기반-페이지네이션page-based-pagination>#</a></h4><p>페이지 번호와 페이지 크기를 지정하는 방식으로, 오프셋 기반의 변형이다.</p><h5 id=구현-예시-3>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시-3>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>GET /api/articles?page=3&amp;per_page=10
</span></span></code></pre></td></tr></table></div></div><p>여기서 <code>page=3</code>은 3페이지를, <code>per_page=10</code>은 페이지당 10개 항목을 요청한다.</p><h5 id=응답-예시-3>응답 예시<a hidden class=anchor aria-hidden=true href=#응답-예시-3>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span><span class=lnt id=hl-8-15><a class=lnlinks href=#hl-8-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>21</span><span class=p>,</span> <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;Article 21&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>22</span><span class=p>,</span> <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;Article 22&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=err>...</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;pagination&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;total_items&#34;</span><span class=p>:</span> <span class=mi>573</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;total_pages&#34;</span><span class=p>:</span> <span class=mi>58</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;current_page&#34;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;per_page&#34;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;has_next&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;has_prev&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=장점-3>장점<a hidden class=anchor aria-hidden=true href=#장점-3>#</a></h5><ul><li><strong>사용자 친화성</strong>: 전통적인 페이지 번호 UI와 자연스럽게 통합된다.</li><li><strong>구현 용이성</strong>: 오프셋 기반 페이지네이션을 약간 수정하여 구현할 수 있다.</li><li><strong>직관적인 탐색</strong>: 페이지 번호로 쉽게 탐색 가능하다.</li></ul><h5 id=단점-3>단점<a hidden class=anchor aria-hidden=true href=#단점-3>#</a></h5><ul><li><strong>오프셋과 동일한 성능 문제</strong>: 높은 페이지 번호에서 성능이 저하된다.</li><li><strong>일관성 문제</strong>: 데이터 변경 시 페이지 내용이 변할 수 있다.</li></ul><h3 id=고급-페이지네이션-기법-및-최적화>고급 페이지네이션 기법 및 최적화<a hidden class=anchor aria-hidden=true href=#고급-페이지네이션-기법-및-최적화>#</a></h3><h4 id=커서-기반-페이지네이션의-최적화>커서 기반 페이지네이션의 최적화<a hidden class=anchor aria-hidden=true href=#커서-기반-페이지네이션의-최적화>#</a></h4><p>커서 기반 페이지네이션을 효과적으로 구현하는 방법:</p><h5 id=복합-인덱스-활용>복합 인덱스 활용<a hidden class=anchor aria-hidden=true href=#복합-인덱스-활용>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1>1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2>2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3>3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4>4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5>5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6>6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7>7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8>8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 복합 정렬을 위한 인덱스 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>idx_articles_created_id</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>articles</span><span class=w> </span><span class=p>(</span><span class=n>created_at</span><span class=w> </span><span class=k>DESC</span><span class=p>,</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=k>DESC</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 이 인덱스를 활용하는 쿼리
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>articles</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=p>(</span><span class=n>created_at</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=p>:</span><span class=n>last_created_at</span><span class=p>)</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>OR</span><span class=w> </span><span class=p>(</span><span class=n>created_at</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>:</span><span class=n>last_created_at</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=p>:</span><span class=n>last_id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>created_at</span><span class=w> </span><span class=k>DESC</span><span class=p>,</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=k>DESC</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>이 방식은 정렬 키가 중복될 경우에도 일관된 결과를 보장한다.</p><h5 id=양방향-탐색-지원>양방향 탐색 지원<a hidden class=anchor aria-hidden=true href=#양방향-탐색-지원>#</a></h5><p>다음 페이지와 이전 페이지 모두 지원하려면 방향에 따라 다른 비교 연산자를 사용해야 한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1>1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2>2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3>3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4>4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5>5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6>6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 다음 페이지 (오름차순)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>where</span> <span class=o>=</span> <span class=s2>&#34;created_at &gt; :cursor_value&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>order</span> <span class=o>=</span> <span class=s2>&#34;created_at ASC&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 이전 페이지 (오름차순)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>where</span> <span class=o>=</span> <span class=s2>&#34;created_at &lt; :cursor_value&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>order</span> <span class=o>=</span> <span class=s2>&#34;created_at DESC&#34;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=전체-항목-수-최적화>전체 항목 수 최적화<a hidden class=anchor aria-hidden=true href=#전체-항목-수-최적화>#</a></h4><p>전체 항목 수를 계산하는 것은 대규모 데이터셋에서 비용이 많이 들 수 있다.</p><p>다음과 같은 최적화가 가능하다:</p><ol><li><p>추정 카운트<br>정확한 수 대신 대략적인 수를 제공하여 성능을 향상시킬 수 있다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1>1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2>2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- PostgreSQL에서 추정 카운트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>EXPLAIN</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>articles</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 이 쿼리는 실행 계획과 함께 행 수 추정치를 제공합니다
</span></span></span></code></pre></td></tr></table></div></div></li><li><p>비동기 카운트<br>페이지네이션된 결과를 먼저 반환하고, 백그라운드에서 전체 카운트를 계산할 수 있다.</p></li><li><p>증분 카운트<br>캐시된 카운트 값을 유지하고 데이터 변경 시 증분적으로 업데이트한다.</p></li></ol><h4 id=하이브리드-접근법>하이브리드 접근법<a hidden class=anchor aria-hidden=true href=#하이브리드-접근법>#</a></h4><p>다양한 페이지네이션 방식을 상황에 따라 조합할 수 있다:</p><ol><li><p>첫 페이지 최적화<br>초기 페이지에는 오프셋 기반을, 깊은 페이지에는 커서 기반 페이지네이션을 사용한다.</p></li><li><p>가변 페이지 크기<br>데이터 특성에 따라 페이지 크기를 동적으로 조정한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>GET /api/articles?limit=10&amp;adaptive=true
</span></span></code></pre></td></tr></table></div></div><p>여기서 <code>adaptive=true</code>는 서버가 상황에 따라 반환하는 항목 수를 조정할 수 있음을 나타낸다.</p></li></ol><h3 id=다양한-api-형식에서의-페이지네이션-구현>다양한 API 형식에서의 페이지네이션 구현<a hidden class=anchor aria-hidden=true href=#다양한-api-형식에서의-페이지네이션-구현>#</a></h3><h4 id=rest-api>REST API<a hidden class=anchor aria-hidden=true href=#rest-api>#</a></h4><p>REST API에서는 일반적으로 쿼리 파라미터를 통해 페이지네이션을 구현한다:</p><h5 id=http-헤더를-활용한-페이지네이션>HTTP 헤더를 활용한 페이지네이션<a hidden class=anchor aria-hidden=true href=#http-헤더를-활용한-페이지네이션>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1>1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2>2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3>3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4>4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5>5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>HTTP/1.1 200 OK
</span></span><span class=line><span class=cl>Link: &lt;https://api.example.com/articles?page=4&gt;; rel=&#34;next&#34;,
</span></span><span class=line><span class=cl>      &lt;https://api.example.com/articles?page=2&gt;; rel=&#34;prev&#34;,
</span></span><span class=line><span class=cl>      &lt;https://api.example.com/articles?page=1&gt;; rel=&#34;first&#34;,
</span></span><span class=line><span class=cl>      &lt;https://api.example.com/articles?page=10&gt;; rel=&#34;last&#34;
</span></span><span class=line><span class=cl>X-Total-Count: 573
</span></span></code></pre></td></tr></table></div></div><p>이 방식은 GitHub API에서 사용하는 방식으로, 응답 헤더를 통해 페이지네이션 정보를 제공한다.</p><h5 id=halhypertext-application-language-형식>HAL(Hypertext Application Language) 형식<a hidden class=anchor aria-hidden=true href=#halhypertext-application-language-형식>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1> 1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2> 2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3> 3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4> 4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5> 5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6> 6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7> 7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8> 8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9> 9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10>10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11>11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12>12</a>
</span><span class=lnt id=hl-14-13><a class=lnlinks href=#hl-14-13>13</a>
</span><span class=lnt id=hl-14-14><a class=lnlinks href=#hl-14-14>14</a>
</span><span class=lnt id=hl-14-15><a class=lnlinks href=#hl-14-15>15</a>
</span><span class=lnt id=hl-14-16><a class=lnlinks href=#hl-14-16>16</a>
</span><span class=lnt id=hl-14-17><a class=lnlinks href=#hl-14-17>17</a>
</span><span class=lnt id=hl-14-18><a class=lnlinks href=#hl-14-18>18</a>
</span><span class=lnt id=hl-14-19><a class=lnlinks href=#hl-14-19>19</a>
</span><span class=lnt id=hl-14-20><a class=lnlinks href=#hl-14-20>20</a>
</span><span class=lnt id=hl-14-21><a class=lnlinks href=#hl-14-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;_embedded&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;articles&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>21</span><span class=p>,</span> <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;Article 21&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>22</span><span class=p>,</span> <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;Article 22&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;_links&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;self&#34;</span><span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;href&#34;</span><span class=p>:</span> <span class=s2>&#34;/api/articles?page=3&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;next&#34;</span><span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;href&#34;</span><span class=p>:</span> <span class=s2>&#34;/api/articles?page=4&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;prev&#34;</span><span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;href&#34;</span><span class=p>:</span> <span class=s2>&#34;/api/articles?page=2&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;first&#34;</span><span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;href&#34;</span><span class=p>:</span> <span class=s2>&#34;/api/articles?page=1&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;last&#34;</span><span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;href&#34;</span><span class=p>:</span> <span class=s2>&#34;/api/articles?page=58&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;page&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;size&#34;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;totalElements&#34;</span><span class=p>:</span> <span class=mi>573</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;totalPages&#34;</span><span class=p>:</span> <span class=mi>58</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;number&#34;</span><span class=p>:</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>이 방식은 HATEOAS 원칙을 따르며, 클라이언트가 링크를 통해 탐색할 수 있다.</p><h4 id=graphql>GraphQL<a hidden class=anchor aria-hidden=true href=#graphql>#</a></h4><p>GraphQL에서는 페이지네이션을 구현하기 위한 여러 패턴이 있다:</p><h5 id=커넥션-패턴relay-스타일>커넥션 패턴(Relay 스타일)<a hidden class=anchor aria-hidden=true href=#커넥션-패턴relay-스타일>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1> 1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2> 2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3> 3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4> 4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5> 5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6> 6</a>
</span><span class=lnt id=hl-15-7><a class=lnlinks href=#hl-15-7> 7</a>
</span><span class=lnt id=hl-15-8><a class=lnlinks href=#hl-15-8> 8</a>
</span><span class=lnt id=hl-15-9><a class=lnlinks href=#hl-15-9> 9</a>
</span><span class=lnt id=hl-15-10><a class=lnlinks href=#hl-15-10>10</a>
</span><span class=lnt id=hl-15-11><a class=lnlinks href=#hl-15-11>11</a>
</span><span class=lnt id=hl-15-12><a class=lnlinks href=#hl-15-12>12</a>
</span><span class=lnt id=hl-15-13><a class=lnlinks href=#hl-15-13>13</a>
</span><span class=lnt id=hl-15-14><a class=lnlinks href=#hl-15-14>14</a>
</span><span class=lnt id=hl-15-15><a class=lnlinks href=#hl-15-15>15</a>
</span><span class=lnt id=hl-15-16><a class=lnlinks href=#hl-15-16>16</a>
</span><span class=lnt id=hl-15-17><a class=lnlinks href=#hl-15-17>17</a>
</span><span class=lnt id=hl-15-18><a class=lnlinks href=#hl-15-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-graphql data-lang=graphql><span class=line><span class=cl><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>articlesConnection</span><span class=p>(</span><span class=py>first</span><span class=p>:</span><span class=w> </span><span class=nc>10</span><span class=p>,</span><span class=w> </span><span class=py>after</span><span class=p>:</span><span class=w> </span><span class=s>&#34;cursor_here&#34;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nc>edges</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>node</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>title</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>cursor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>pageInfo</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>hasNextPage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>hasPreviousPage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>startCursor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>endCursor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>totalCount</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>이 패턴은 Facebook의 Relay 규격을 따르며, 커서 기반 페이지네이션에 최적화되어 있다.</p><h5 id=오프셋-기반-접근법>오프셋 기반 접근법<a hidden class=anchor aria-hidden=true href=#오프셋-기반-접근법>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1>1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2>2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3>3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4>4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5>5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6>6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-graphql data-lang=graphql><span class=line><span class=cl><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>articles</span><span class=p>(</span><span class=py>offset</span><span class=p>:</span><span class=w> </span><span class=nc>20</span><span class=p>,</span><span class=w> </span><span class=py>limit</span><span class=p>:</span><span class=w> </span><span class=nc>10</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>title</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>articlesCount</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>이 방식은 간단하지만 대규모 데이터셋에서는 성능 문제가 있다.</p><h4 id=grpc>gRPC<a hidden class=anchor aria-hidden=true href=#grpc>#</a></h4><p>gRPC에서는 프로토콜 버퍼 정의를 통해 페이지네이션을 구현한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1> 1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2> 2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3> 3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4> 4</a>
</span><span class=lnt id=hl-17-5><a class=lnlinks href=#hl-17-5> 5</a>
</span><span class=lnt id=hl-17-6><a class=lnlinks href=#hl-17-6> 6</a>
</span><span class=lnt id=hl-17-7><a class=lnlinks href=#hl-17-7> 7</a>
</span><span class=lnt id=hl-17-8><a class=lnlinks href=#hl-17-8> 8</a>
</span><span class=lnt id=hl-17-9><a class=lnlinks href=#hl-17-9> 9</a>
</span><span class=lnt id=hl-17-10><a class=lnlinks href=#hl-17-10>10</a>
</span><span class=lnt id=hl-17-11><a class=lnlinks href=#hl-17-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-protobuf data-lang=protobuf><span class=line><span class=cl><span class=kd>message</span> <span class=nc>ListArticlesRequest</span> <span class=p>{</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>  <span class=kt>string</span> <span class=n>page_token</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>  <span class=kt>int32</span> <span class=n>page_size</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=p>}</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=kd>message</span> <span class=nc>ListArticlesResponse</span> <span class=p>{</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>  <span class=k>repeated</span> <span class=n>Article</span> <span class=n>articles</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>  <span class=kt>string</span> <span class=n>next_page_token</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>  <span class=kt>string</span> <span class=n>prev_page_token</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>  <span class=kt>int32</span> <span class=n>total_size</span> <span class=o>=</span> <span class=mi>4</span><span class=p>;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=p>}</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><p>클라이언트는 <code>page_token</code>을 사용하여 다음 페이지를 요청한다.</p><h3 id=페이지네이션-관련-모범-사례와-가이드라인>페이지네이션 관련 모범 사례와 가이드라인<a hidden class=anchor aria-hidden=true href=#페이지네이션-관련-모범-사례와-가이드라인>#</a></h3><ul><li>일반적인 모범 사례<ol><li><strong>합리적인 기본값 설정</strong>:<ul><li>적절한 기본 페이지 크기 설정(10-50 항목)</li><li>기본 정렬 순서 지정</li></ul></li><li><strong>한계 설정</strong>:<ul><li>최대 페이지 크기 제한(예: 100 또는 1000)</li><li>요청당 최대 항목 수 제한(DoS 방지)</li></ul></li><li><strong>일관성 유지</strong>:<ul><li>API 전체에서 동일한 페이지네이션 규칙 적용</li><li>명확하고 일관된 매개변수 이름 사용</li></ul></li><li><strong>응답 형식</strong>:<ul><li>데이터와 페이지네이션 메타데이터 명확히 구분</li><li>다음/이전 페이지 링크 또는 토큰 항상 포함</li></ul></li></ol></li><li>성능 관련 모범 사례<ol><li><strong>데이터베이스 최적화</strong>:<ul><li>페이지네이션 쿼리에 사용되는 필드에 인덱스 생성</li><li>큰 오프셋 사용 시 커서 기반 방식 고려</li></ul></li><li><strong>캐싱 전략</strong>:<ul><li>페이지네이션된 응답 캐싱</li><li>캐시 키에 페이지네이션 매개변수 포함</li></ul></li><li><strong>필요한 필드만 선택</strong>:<ul><li>클라이언트가 필요한 필드만 지정할 수 있도록 허용</li><li>특히 대용량 데이터에서 중요</li></ul></li></ol></li><li>사용자 경험 개선 가이드라인<ol><li><strong>진행 상황 표시</strong>:<ul><li>총 페이지 수 또는 항목 수 제공</li><li>현재 위치 표시(예: &ldquo;573개 중 21-30 표시 중&rdquo;)</li></ul></li><li><strong>유연한 페이지 크기</strong>:<ul><li>클라이언트가 페이지 크기를 선택할 수 있도록 허용</li><li>모바일/데스크톱 환경에 맞게 최적화</li></ul></li><li><strong>정렬 옵션 제공</strong>:<ul><li>다양한 필드로 정렬 지원</li><li>오름차순/내림차순 정렬 방향 지원</li></ul></li></ol></li><li>문서화 가이드라인<ol><li><strong>명확한 페이지네이션 설명</strong>:<ul><li>사용된 페이지네이션 메커니즘 설명</li><li>매개변수 및 응답 형식 문서화</li></ul></li><li><strong>예제 포함</strong>:<ul><li>요청 및 응답 예제 제공</li><li>일반적인 시나리오 설명</li></ul></li><li><strong>제한 사항 명시</strong>:<ul><li>최대 페이지 크기</li><li>성능 관련 고려사항</li><li>깊은 페이지 탐색 시 권장사항</li></ul></li></ol></li></ul><h3 id=페이지네이션-구현-예시>페이지네이션 구현 예시<a hidden class=anchor aria-hidden=true href=#페이지네이션-구현-예시>#</a></h3><h4 id=nodejsexpress-api커서-기반>Node.js/Express API(커서 기반)<a hidden class=anchor aria-hidden=true href=#nodejsexpress-api커서-기반>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1> 1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2> 2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3> 3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4> 4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5> 5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6> 6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7> 7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8> 8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9> 9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10>10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11>11</a>
</span><span class=lnt id=hl-18-12><a class=lnlinks href=#hl-18-12>12</a>
</span><span class=lnt id=hl-18-13><a class=lnlinks href=#hl-18-13>13</a>
</span><span class=lnt id=hl-18-14><a class=lnlinks href=#hl-18-14>14</a>
</span><span class=lnt id=hl-18-15><a class=lnlinks href=#hl-18-15>15</a>
</span><span class=lnt id=hl-18-16><a class=lnlinks href=#hl-18-16>16</a>
</span><span class=lnt id=hl-18-17><a class=lnlinks href=#hl-18-17>17</a>
</span><span class=lnt id=hl-18-18><a class=lnlinks href=#hl-18-18>18</a>
</span><span class=lnt id=hl-18-19><a class=lnlinks href=#hl-18-19>19</a>
</span><span class=lnt id=hl-18-20><a class=lnlinks href=#hl-18-20>20</a>
</span><span class=lnt id=hl-18-21><a class=lnlinks href=#hl-18-21>21</a>
</span><span class=lnt id=hl-18-22><a class=lnlinks href=#hl-18-22>22</a>
</span><span class=lnt id=hl-18-23><a class=lnlinks href=#hl-18-23>23</a>
</span><span class=lnt id=hl-18-24><a class=lnlinks href=#hl-18-24>24</a>
</span><span class=lnt id=hl-18-25><a class=lnlinks href=#hl-18-25>25</a>
</span><span class=lnt id=hl-18-26><a class=lnlinks href=#hl-18-26>26</a>
</span><span class=lnt id=hl-18-27><a class=lnlinks href=#hl-18-27>27</a>
</span><span class=lnt id=hl-18-28><a class=lnlinks href=#hl-18-28>28</a>
</span><span class=lnt id=hl-18-29><a class=lnlinks href=#hl-18-29>29</a>
</span><span class=lnt id=hl-18-30><a class=lnlinks href=#hl-18-30>30</a>
</span><span class=lnt id=hl-18-31><a class=lnlinks href=#hl-18-31>31</a>
</span><span class=lnt id=hl-18-32><a class=lnlinks href=#hl-18-32>32</a>
</span><span class=lnt id=hl-18-33><a class=lnlinks href=#hl-18-33>33</a>
</span><span class=lnt id=hl-18-34><a class=lnlinks href=#hl-18-34>34</a>
</span><span class=lnt id=hl-18-35><a class=lnlinks href=#hl-18-35>35</a>
</span><span class=lnt id=hl-18-36><a class=lnlinks href=#hl-18-36>36</a>
</span><span class=lnt id=hl-18-37><a class=lnlinks href=#hl-18-37>37</a>
</span><span class=lnt id=hl-18-38><a class=lnlinks href=#hl-18-38>38</a>
</span><span class=lnt id=hl-18-39><a class=lnlinks href=#hl-18-39>39</a>
</span><span class=lnt id=hl-18-40><a class=lnlinks href=#hl-18-40>40</a>
</span><span class=lnt id=hl-18-41><a class=lnlinks href=#hl-18-41>41</a>
</span><span class=lnt id=hl-18-42><a class=lnlinks href=#hl-18-42>42</a>
</span><span class=lnt id=hl-18-43><a class=lnlinks href=#hl-18-43>43</a>
</span><span class=lnt id=hl-18-44><a class=lnlinks href=#hl-18-44>44</a>
</span><span class=lnt id=hl-18-45><a class=lnlinks href=#hl-18-45>45</a>
</span><span class=lnt id=hl-18-46><a class=lnlinks href=#hl-18-46>46</a>
</span><span class=lnt id=hl-18-47><a class=lnlinks href=#hl-18-47>47</a>
</span><span class=lnt id=hl-18-48><a class=lnlinks href=#hl-18-48>48</a>
</span><span class=lnt id=hl-18-49><a class=lnlinks href=#hl-18-49>49</a>
</span><span class=lnt id=hl-18-50><a class=lnlinks href=#hl-18-50>50</a>
</span><span class=lnt id=hl-18-51><a class=lnlinks href=#hl-18-51>51</a>
</span><span class=lnt id=hl-18-52><a class=lnlinks href=#hl-18-52>52</a>
</span><span class=lnt id=hl-18-53><a class=lnlinks href=#hl-18-53>53</a>
</span><span class=lnt id=hl-18-54><a class=lnlinks href=#hl-18-54>54</a>
</span><span class=lnt id=hl-18-55><a class=lnlinks href=#hl-18-55>55</a>
</span><span class=lnt id=hl-18-56><a class=lnlinks href=#hl-18-56>56</a>
</span><span class=lnt id=hl-18-57><a class=lnlinks href=#hl-18-57>57</a>
</span><span class=lnt id=hl-18-58><a class=lnlinks href=#hl-18-58>58</a>
</span><span class=lnt id=hl-18-59><a class=lnlinks href=#hl-18-59>59</a>
</span><span class=lnt id=hl-18-60><a class=lnlinks href=#hl-18-60>60</a>
</span><span class=lnt id=hl-18-61><a class=lnlinks href=#hl-18-61>61</a>
</span><span class=lnt id=hl-18-62><a class=lnlinks href=#hl-18-62>62</a>
</span><span class=lnt id=hl-18-63><a class=lnlinks href=#hl-18-63>63</a>
</span><span class=lnt id=hl-18-64><a class=lnlinks href=#hl-18-64>64</a>
</span><span class=lnt id=hl-18-65><a class=lnlinks href=#hl-18-65>65</a>
</span><span class=lnt id=hl-18-66><a class=lnlinks href=#hl-18-66>66</a>
</span><span class=lnt id=hl-18-67><a class=lnlinks href=#hl-18-67>67</a>
</span><span class=lnt id=hl-18-68><a class=lnlinks href=#hl-18-68>68</a>
</span><span class=lnt id=hl-18-69><a class=lnlinks href=#hl-18-69>69</a>
</span><span class=lnt id=hl-18-70><a class=lnlinks href=#hl-18-70>70</a>
</span><span class=lnt id=hl-18-71><a class=lnlinks href=#hl-18-71>71</a>
</span><span class=lnt id=hl-18-72><a class=lnlinks href=#hl-18-72>72</a>
</span><span class=lnt id=hl-18-73><a class=lnlinks href=#hl-18-73>73</a>
</span><span class=lnt id=hl-18-74><a class=lnlinks href=#hl-18-74>74</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 커서 기반 페이지네이션 구현 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>router</span> <span class=o>=</span> <span class=nx>express</span><span class=p>.</span><span class=nx>Router</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/articles&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 페이지네이션 매개변수 파싱
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>limit</span> <span class=o>=</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>min</span><span class=p>(</span><span class=nb>parseInt</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>limit</span><span class=p>)</span> <span class=o>||</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>100</span><span class=p>);</span> <span class=c1>// 최대 100 제한
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>let</span> <span class=nx>cursor</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>cursor</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Base64 디코딩 및 JSON 파싱
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>decodedCursor</span> <span class=o>=</span> <span class=nx>Buffer</span><span class=p>.</span><span class=nx>from</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>cursor</span><span class=p>,</span> <span class=s1>&#39;base64&#39;</span><span class=p>).</span><span class=nx>toString</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>cursor</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>decodedCursor</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>400</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>error</span><span class=o>:</span> <span class=s1>&#39;잘못된 커서 형식&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 쿼리 구성
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>let</span> <span class=nx>query</span> <span class=o>=</span> <span class=nx>db</span><span class=p>(</span><span class=s1>&#39;articles&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>select</span><span class=p>(</span><span class=s1>&#39;*&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>orderBy</span><span class=p>(</span><span class=s1>&#39;created_at&#39;</span><span class=p>,</span> <span class=s1>&#39;desc&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>orderBy</span><span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;desc&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>limit</span><span class=p>(</span><span class=nx>limit</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span> <span class=c1>// 다음 페이지 있는지 확인용 추가 항목
</span></span></span><span class=line><span class=cl><span class=c1></span>    
</span></span><span class=line><span class=cl>    <span class=c1>// 커서가 있으면 조건 추가
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=p>(</span><span class=nx>cursor</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>query</span> <span class=o>=</span> <span class=nx>query</span><span class=p>.</span><span class=nx>where</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>where</span><span class=p>(</span><span class=s1>&#39;created_at&#39;</span><span class=p>,</span> <span class=s1>&#39;&lt;&#39;</span><span class=p>,</span> <span class=nx>cursor</span><span class=p>.</span><span class=nx>created_at</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=p>.</span><span class=nx>orWhere</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>where</span><span class=p>(</span><span class=s1>&#39;created_at&#39;</span><span class=p>,</span> <span class=s1>&#39;=&#39;</span><span class=p>,</span> <span class=nx>cursor</span><span class=p>.</span><span class=nx>created_at</span><span class=p>)</span>
</span></span><span class=line><span class=cl>              <span class=p>.</span><span class=nx>andWhere</span><span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;&lt;&#39;</span><span class=p>,</span> <span class=nx>cursor</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>          <span class=p>});</span>
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 쿼리 실행
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>articles</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>query</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 다음 페이지 있는지 확인
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>hasMore</span> <span class=o>=</span> <span class=nx>articles</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=nx>limit</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>hasMore</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>articles</span><span class=p>.</span><span class=nx>pop</span><span class=p>();</span> <span class=c1>// 추가 항목 제거
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 다음 커서 생성
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>let</span> <span class=nx>nextCursor</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>hasMore</span> <span class=o>&amp;&amp;</span> <span class=nx>articles</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>lastItem</span> <span class=o>=</span> <span class=nx>articles</span><span class=p>[</span><span class=nx>articles</span><span class=p>.</span><span class=nx>length</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>cursorObj</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>created_at</span><span class=o>:</span> <span class=nx>lastItem</span><span class=p>.</span><span class=nx>created_at</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>id</span><span class=o>:</span> <span class=nx>lastItem</span><span class=p>.</span><span class=nx>id</span>
</span></span><span class=line><span class=cl>      <span class=p>};</span>
</span></span><span class=line><span class=cl>      <span class=nx>nextCursor</span> <span class=o>=</span> <span class=nx>Buffer</span><span class=p>.</span><span class=nx>from</span><span class=p>(</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>cursorObj</span><span class=p>)).</span><span class=nx>toString</span><span class=p>(</span><span class=s1>&#39;base64&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 응답 구성
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>data</span><span class=o>:</span> <span class=nx>articles</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>pagination</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>next_cursor</span><span class=o>:</span> <span class=nx>nextCursor</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>has_more</span><span class=o>:</span> <span class=nx>hasMore</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>limit</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error fetching articles:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>500</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>error</span><span class=o>:</span> <span class=s1>&#39;서버 오류&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=nx>router</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=spring-boot-api오프셋-기반>Spring Boot API(오프셋 기반)<a hidden class=anchor aria-hidden=true href=#spring-boot-api오프셋-기반>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1> 1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2> 2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3> 3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4> 4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5> 5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6> 6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7> 7</a>
</span><span class=lnt id=hl-19-8><a class=lnlinks href=#hl-19-8> 8</a>
</span><span class=lnt id=hl-19-9><a class=lnlinks href=#hl-19-9> 9</a>
</span><span class=lnt id=hl-19-10><a class=lnlinks href=#hl-19-10>10</a>
</span><span class=lnt id=hl-19-11><a class=lnlinks href=#hl-19-11>11</a>
</span><span class=lnt id=hl-19-12><a class=lnlinks href=#hl-19-12>12</a>
</span><span class=lnt id=hl-19-13><a class=lnlinks href=#hl-19-13>13</a>
</span><span class=lnt id=hl-19-14><a class=lnlinks href=#hl-19-14>14</a>
</span><span class=lnt id=hl-19-15><a class=lnlinks href=#hl-19-15>15</a>
</span><span class=lnt id=hl-19-16><a class=lnlinks href=#hl-19-16>16</a>
</span><span class=lnt id=hl-19-17><a class=lnlinks href=#hl-19-17>17</a>
</span><span class=lnt id=hl-19-18><a class=lnlinks href=#hl-19-18>18</a>
</span><span class=lnt id=hl-19-19><a class=lnlinks href=#hl-19-19>19</a>
</span><span class=lnt id=hl-19-20><a class=lnlinks href=#hl-19-20>20</a>
</span><span class=lnt id=hl-19-21><a class=lnlinks href=#hl-19-21>21</a>
</span><span class=lnt id=hl-19-22><a class=lnlinks href=#hl-19-22>22</a>
</span><span class=lnt id=hl-19-23><a class=lnlinks href=#hl-19-23>23</a>
</span><span class=lnt id=hl-19-24><a class=lnlinks href=#hl-19-24>24</a>
</span><span class=lnt id=hl-19-25><a class=lnlinks href=#hl-19-25>25</a>
</span><span class=lnt id=hl-19-26><a class=lnlinks href=#hl-19-26>26</a>
</span><span class=lnt id=hl-19-27><a class=lnlinks href=#hl-19-27>27</a>
</span><span class=lnt id=hl-19-28><a class=lnlinks href=#hl-19-28>28</a>
</span><span class=lnt id=hl-19-29><a class=lnlinks href=#hl-19-29>29</a>
</span><span class=lnt id=hl-19-30><a class=lnlinks href=#hl-19-30>30</a>
</span><span class=lnt id=hl-19-31><a class=lnlinks href=#hl-19-31>31</a>
</span><span class=lnt id=hl-19-32><a class=lnlinks href=#hl-19-32>32</a>
</span><span class=lnt id=hl-19-33><a class=lnlinks href=#hl-19-33>33</a>
</span><span class=lnt id=hl-19-34><a class=lnlinks href=#hl-19-34>34</a>
</span><span class=lnt id=hl-19-35><a class=lnlinks href=#hl-19-35>35</a>
</span><span class=lnt id=hl-19-36><a class=lnlinks href=#hl-19-36>36</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@RestController</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@RequestMapping</span><span class=p>(</span><span class=s>&#34;/api/articles&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ArticleController</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>ArticleRepository</span><span class=w> </span><span class=n>articleRepository</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@GetMapping</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>ResponseEntity</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>Object</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=nf>getArticles</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nd>@RequestParam</span><span class=p>(</span><span class=n>defaultValue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;0&#34;</span><span class=p>)</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>offset</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nd>@RequestParam</span><span class=p>(</span><span class=n>defaultValue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;10&#34;</span><span class=p>)</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>limit</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 최대 한계 적용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>limit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Math</span><span class=p>.</span><span class=na>min</span><span class=p>(</span><span class=n>limit</span><span class=p>,</span><span class=w> </span><span class=n>100</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 페이지네이션된 결과 가져오기</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Page</span><span class=o>&lt;</span><span class=n>Article</span><span class=o>&gt;</span><span class=w> </span><span class=n>articlesPage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>articleRepository</span><span class=p>.</span><span class=na>findAll</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>PageRequest</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>offset</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>limit</span><span class=p>,</span><span class=w> </span><span class=n>limit</span><span class=p>,</span><span class=w> </span><span class=n>Sort</span><span class=p>.</span><span class=na>by</span><span class=p>(</span><span class=n>Sort</span><span class=p>.</span><span class=na>Direction</span><span class=p>.</span><span class=na>DESC</span><span class=p>,</span><span class=w> </span><span class=s>&#34;createdAt&#34;</span><span class=p>)));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Article</span><span class=o>&gt;</span><span class=w> </span><span class=n>articles</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>articlesPage</span><span class=p>.</span><span class=na>getContent</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 응답 구성</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>Object</span><span class=o>&gt;</span><span class=w> </span><span class=n>response</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=o>&lt;&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>response</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;data&#34;</span><span class=p>,</span><span class=w> </span><span class=n>articles</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>Object</span><span class=o>&gt;</span><span class=w> </span><span class=n>pagination</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=o>&lt;&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>pagination</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;total&#34;</span><span class=p>,</span><span class=w> </span><span class=n>articlesPage</span><span class=p>.</span><span class=na>getTotalElements</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>pagination</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;offset&#34;</span><span class=p>,</span><span class=w> </span><span class=n>offset</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>pagination</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;limit&#34;</span><span class=p>,</span><span class=w> </span><span class=n>limit</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>pagination</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;has_more&#34;</span><span class=p>,</span><span class=w> </span><span class=n>offset</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>limit</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>articlesPage</span><span class=p>.</span><span class=na>getTotalElements</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>response</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;pagination&#34;</span><span class=p>,</span><span class=w> </span><span class=n>pagination</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>ResponseEntity</span><span class=p>.</span><span class=na>ok</span><span class=p>(</span><span class=n>response</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=django-rest-framework-api커서-기반>Django REST Framework API(커서 기반)<a hidden class=anchor aria-hidden=true href=#django-rest-framework-api커서-기반>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1> 1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2> 2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3> 3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4> 4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5> 5</a>
</span><span class=lnt id=hl-20-6><a class=lnlinks href=#hl-20-6> 6</a>
</span><span class=lnt id=hl-20-7><a class=lnlinks href=#hl-20-7> 7</a>
</span><span class=lnt id=hl-20-8><a class=lnlinks href=#hl-20-8> 8</a>
</span><span class=lnt id=hl-20-9><a class=lnlinks href=#hl-20-9> 9</a>
</span><span class=lnt id=hl-20-10><a class=lnlinks href=#hl-20-10>10</a>
</span><span class=lnt id=hl-20-11><a class=lnlinks href=#hl-20-11>11</a>
</span><span class=lnt id=hl-20-12><a class=lnlinks href=#hl-20-12>12</a>
</span><span class=lnt id=hl-20-13><a class=lnlinks href=#hl-20-13>13</a>
</span><span class=lnt id=hl-20-14><a class=lnlinks href=#hl-20-14>14</a>
</span><span class=lnt id=hl-20-15><a class=lnlinks href=#hl-20-15>15</a>
</span><span class=lnt id=hl-20-16><a class=lnlinks href=#hl-20-16>16</a>
</span><span class=lnt id=hl-20-17><a class=lnlinks href=#hl-20-17>17</a>
</span><span class=lnt id=hl-20-18><a class=lnlinks href=#hl-20-18>18</a>
</span><span class=lnt id=hl-20-19><a class=lnlinks href=#hl-20-19>19</a>
</span><span class=lnt id=hl-20-20><a class=lnlinks href=#hl-20-20>20</a>
</span><span class=lnt id=hl-20-21><a class=lnlinks href=#hl-20-21>21</a>
</span><span class=lnt id=hl-20-22><a class=lnlinks href=#hl-20-22>22</a>
</span><span class=lnt id=hl-20-23><a class=lnlinks href=#hl-20-23>23</a>
</span><span class=lnt id=hl-20-24><a class=lnlinks href=#hl-20-24>24</a>
</span><span class=lnt id=hl-20-25><a class=lnlinks href=#hl-20-25>25</a>
</span><span class=lnt id=hl-20-26><a class=lnlinks href=#hl-20-26>26</a>
</span><span class=lnt id=hl-20-27><a class=lnlinks href=#hl-20-27>27</a>
</span><span class=lnt id=hl-20-28><a class=lnlinks href=#hl-20-28>28</a>
</span><span class=lnt id=hl-20-29><a class=lnlinks href=#hl-20-29>29</a>
</span><span class=lnt id=hl-20-30><a class=lnlinks href=#hl-20-30>30</a>
</span><span class=lnt id=hl-20-31><a class=lnlinks href=#hl-20-31>31</a>
</span><span class=lnt id=hl-20-32><a class=lnlinks href=#hl-20-32>32</a>
</span><span class=lnt id=hl-20-33><a class=lnlinks href=#hl-20-33>33</a>
</span><span class=lnt id=hl-20-34><a class=lnlinks href=#hl-20-34>34</a>
</span><span class=lnt id=hl-20-35><a class=lnlinks href=#hl-20-35>35</a>
</span><span class=lnt id=hl-20-36><a class=lnlinks href=#hl-20-36>36</a>
</span><span class=lnt id=hl-20-37><a class=lnlinks href=#hl-20-37>37</a>
</span><span class=lnt id=hl-20-38><a class=lnlinks href=#hl-20-38>38</a>
</span><span class=lnt id=hl-20-39><a class=lnlinks href=#hl-20-39>39</a>
</span><span class=lnt id=hl-20-40><a class=lnlinks href=#hl-20-40>40</a>
</span><span class=lnt id=hl-20-41><a class=lnlinks href=#hl-20-41>41</a>
</span><span class=lnt id=hl-20-42><a class=lnlinks href=#hl-20-42>42</a>
</span><span class=lnt id=hl-20-43><a class=lnlinks href=#hl-20-43>43</a>
</span><span class=lnt id=hl-20-44><a class=lnlinks href=#hl-20-44>44</a>
</span><span class=lnt id=hl-20-45><a class=lnlinks href=#hl-20-45>45</a>
</span><span class=lnt id=hl-20-46><a class=lnlinks href=#hl-20-46>46</a>
</span><span class=lnt id=hl-20-47><a class=lnlinks href=#hl-20-47>47</a>
</span><span class=lnt id=hl-20-48><a class=lnlinks href=#hl-20-48>48</a>
</span><span class=lnt id=hl-20-49><a class=lnlinks href=#hl-20-49>49</a>
</span><span class=lnt id=hl-20-50><a class=lnlinks href=#hl-20-50>50</a>
</span><span class=lnt id=hl-20-51><a class=lnlinks href=#hl-20-51>51</a>
</span><span class=lnt id=hl-20-52><a class=lnlinks href=#hl-20-52>52</a>
</span><span class=lnt id=hl-20-53><a class=lnlinks href=#hl-20-53>53</a>
</span><span class=lnt id=hl-20-54><a class=lnlinks href=#hl-20-54>54</a>
</span><span class=lnt id=hl-20-55><a class=lnlinks href=#hl-20-55>55</a>
</span><span class=lnt id=hl-20-56><a class=lnlinks href=#hl-20-56>56</a>
</span><span class=lnt id=hl-20-57><a class=lnlinks href=#hl-20-57>57</a>
</span><span class=lnt id=hl-20-58><a class=lnlinks href=#hl-20-58>58</a>
</span><span class=lnt id=hl-20-59><a class=lnlinks href=#hl-20-59>59</a>
</span><span class=lnt id=hl-20-60><a class=lnlinks href=#hl-20-60>60</a>
</span><span class=lnt id=hl-20-61><a class=lnlinks href=#hl-20-61>61</a>
</span><span class=lnt id=hl-20-62><a class=lnlinks href=#hl-20-62>62</a>
</span><span class=lnt id=hl-20-63><a class=lnlinks href=#hl-20-63>63</a>
</span><span class=lnt id=hl-20-64><a class=lnlinks href=#hl-20-64>64</a>
</span><span class=lnt id=hl-20-65><a class=lnlinks href=#hl-20-65>65</a>
</span><span class=lnt id=hl-20-66><a class=lnlinks href=#hl-20-66>66</a>
</span><span class=lnt id=hl-20-67><a class=lnlinks href=#hl-20-67>67</a>
</span><span class=lnt id=hl-20-68><a class=lnlinks href=#hl-20-68>68</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework.decorators</span> <span class=kn>import</span> <span class=n>api_view</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework.response</span> <span class=kn>import</span> <span class=n>Response</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>rest_framework</span> <span class=kn>import</span> <span class=n>status</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.core.paginator</span> <span class=kn>import</span> <span class=n>Paginator</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>.models</span> <span class=kn>import</span> <span class=n>Article</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>.serializers</span> <span class=kn>import</span> <span class=n>ArticleSerializer</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>base64</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@api_view</span><span class=p>([</span><span class=s1>&#39;GET&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>article_list</span><span class=p>(</span><span class=n>request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 페이지네이션 매개변수 파싱</span>
</span></span><span class=line><span class=cl>        <span class=n>limit</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>request</span><span class=o>.</span><span class=n>query_params</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;limit&#39;</span><span class=p>,</span> <span class=mi>10</span><span class=p>)),</span> <span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>cursor_param</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>query_params</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;cursor&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 기본 쿼리셋</span>
</span></span><span class=line><span class=cl>        <span class=n>queryset</span> <span class=o>=</span> <span class=n>Article</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span><span class=o>.</span><span class=n>order_by</span><span class=p>(</span><span class=s1>&#39;-created_at&#39;</span><span class=p>,</span> <span class=s1>&#39;-id&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 커서가 있으면 디코딩 및 필터링</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>cursor_param</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>decoded</span> <span class=o>=</span> <span class=n>base64</span><span class=o>.</span><span class=n>b64decode</span><span class=p>(</span><span class=n>cursor_param</span><span class=p>)</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>cursor</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>decoded</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1># 복합 조건 (created_at, id)로 필터링</span>
</span></span><span class=line><span class=cl>                <span class=n>created_at</span> <span class=o>=</span> <span class=n>cursor</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;created_at&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nb>id</span> <span class=o>=</span> <span class=n>cursor</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=n>queryset</span> <span class=o>=</span> <span class=n>queryset</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>models</span><span class=o>.</span><span class=n>Q</span><span class=p>(</span><span class=n>created_at__lt</span><span class=o>=</span><span class=n>created_at</span><span class=p>)</span> <span class=o>|</span>
</span></span><span class=line><span class=cl>                    <span class=n>models</span><span class=o>.</span><span class=n>Q</span><span class=p>(</span><span class=n>created_at</span><span class=o>=</span><span class=n>created_at</span><span class=p>,</span> <span class=n>id__lt</span><span class=o>=</span><span class=nb>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>Response</span><span class=p>({</span><span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=s1>&#39;잘못된 커서 형식&#39;</span><span class=p>},</span> <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_400_BAD_REQUEST</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 쿼리 실행 (limit + 1로 다음 페이지 여부 확인)</span>
</span></span><span class=line><span class=cl>        <span class=n>articles</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>queryset</span><span class=p>[:</span><span class=n>limit</span> <span class=o>+</span> <span class=mi>1</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 다음 페이지 있는지 확인</span>
</span></span><span class=line><span class=cl>        <span class=n>has_more</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>articles</span><span class=p>)</span> <span class=o>&gt;</span> <span class=n>limit</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>has_more</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>articles</span><span class=o>.</span><span class=n>pop</span><span class=p>()</span>  <span class=c1># 추가 항목 제거</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 다음 커서 생성</span>
</span></span><span class=line><span class=cl>        <span class=n>next_cursor</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>has_more</span> <span class=ow>and</span> <span class=n>articles</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>last_item</span> <span class=o>=</span> <span class=n>articles</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>cursor_obj</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;created_at&#39;</span><span class=p>:</span> <span class=n>last_item</span><span class=o>.</span><span class=n>created_at</span><span class=o>.</span><span class=n>isoformat</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=n>last_item</span><span class=o>.</span><span class=n>id</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>next_cursor</span> <span class=o>=</span> <span class=n>base64</span><span class=o>.</span><span class=n>b64encode</span><span class=p>(</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>cursor_obj</span><span class=p>)</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>))</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 직렬화 및 응답 구성</span>
</span></span><span class=line><span class=cl>        <span class=n>serializer</span> <span class=o>=</span> <span class=n>ArticleSerializer</span><span class=p>(</span><span class=n>articles</span><span class=p>,</span> <span class=n>many</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Response</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;data&#39;</span><span class=p>:</span> <span class=n>serializer</span><span class=o>.</span><span class=n>data</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;pagination&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;next_cursor&#39;</span><span class=p>:</span> <span class=n>next_cursor</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;has_more&#39;</span><span class=p>:</span> <span class=n>has_more</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;limit&#39;</span><span class=p>:</span> <span class=n>limit</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Response</span><span class=p>({</span><span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)},</span> <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=o>.</span><span class=n>HTTP_500_INTERNAL_SERVER_ERROR</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=페이지네이션의-도전과제와-해결책>페이지네이션의 도전과제와 해결책<a hidden class=anchor aria-hidden=true href=#페이지네이션의-도전과제와-해결책>#</a></h3><h4 id=대규모-데이터셋-문제>대규모 데이터셋 문제<a hidden class=anchor aria-hidden=true href=#대규모-데이터셋-문제>#</a></h4><p>대규모 데이터셋에서 페이지네이션은 다양한 도전과제를 제시한다:</p><h5 id=문제-오프셋-기반-페이지네이션의-성능-저하>문제: 오프셋 기반 페이지네이션의 성능 저하<a hidden class=anchor aria-hidden=true href=#문제-오프셋-기반-페이지네이션의-성능-저하>#</a></h5><p>깊은 페이지로 이동할수록 쿼리 성능이 저하된다.</p><p><strong>해결책</strong>:</p><ol><li><strong>커서 기반 페이지네이션 채택</strong>: 데이터셋 크기에 관계없이 일관된 성능</li><li><strong>복합 인덱스 활용</strong>: 정렬 필드에 대한 효율적인 인덱스 생성</li><li><strong>클러스터링 인덱스 활용</strong>: 주요 정렬 필드를 기준으로 물리적 데이터 구성</li></ol><h5 id=코드-예시-mysql-쿼리-최적화>코드 예시 (MySQL 쿼리 최적화)<a hidden class=anchor aria-hidden=true href=#코드-예시-mysql-쿼리-최적화>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1> 1</a>
</span><span class=lnt id=hl-21-2><a class=lnlinks href=#hl-21-2> 2</a>
</span><span class=lnt id=hl-21-3><a class=lnlinks href=#hl-21-3> 3</a>
</span><span class=lnt id=hl-21-4><a class=lnlinks href=#hl-21-4> 4</a>
</span><span class=lnt id=hl-21-5><a class=lnlinks href=#hl-21-5> 5</a>
</span><span class=lnt id=hl-21-6><a class=lnlinks href=#hl-21-6> 6</a>
</span><span class=lnt id=hl-21-7><a class=lnlinks href=#hl-21-7> 7</a>
</span><span class=lnt id=hl-21-8><a class=lnlinks href=#hl-21-8> 8</a>
</span><span class=lnt id=hl-21-9><a class=lnlinks href=#hl-21-9> 9</a>
</span><span class=lnt id=hl-21-10><a class=lnlinks href=#hl-21-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 전통적인 오프셋 쿼리 (느림)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>posts</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>created_at</span><span class=w> </span><span class=k>DESC</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=mi>10</span><span class=w> </span><span class=k>OFFSET</span><span class=w> </span><span class=mi>10000</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 커서 기반 접근법 (빠름)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>posts</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>created_at</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=s1>&#39;2023-03-22 15:30:00&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>created_at</span><span class=w> </span><span class=k>DESC</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=일관성-문제>일관성 문제<a hidden class=anchor aria-hidden=true href=#일관성-문제>#</a></h4><p>페이지네이션 도중 데이터가 변경되면 항목이 중복되거나 누락될 수 있다.</p><p><strong>해결책</strong>:</p><ol><li><strong>커서 기반 페이지네이션</strong>: 데이터 변경에도 일관된 결과 제공</li><li><strong>유일한 정렬 키 사용</strong>: 정렬 필드가 유일하지 않은 경우 보조 필드(예: ID) 추가</li><li><strong>스냅샷 격리 수준</strong>: 트랜잭션 격리 수준을 높여 쿼리 중 일관성 유지</li></ol><h5 id=예시>예시<a hidden class=anchor aria-hidden=true href=#예시>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1> 1</a>
</span><span class=lnt id=hl-22-2><a class=lnlinks href=#hl-22-2> 2</a>
</span><span class=lnt id=hl-22-3><a class=lnlinks href=#hl-22-3> 3</a>
</span><span class=lnt id=hl-22-4><a class=lnlinks href=#hl-22-4> 4</a>
</span><span class=lnt id=hl-22-5><a class=lnlinks href=#hl-22-5> 5</a>
</span><span class=lnt id=hl-22-6><a class=lnlinks href=#hl-22-6> 6</a>
</span><span class=lnt id=hl-22-7><a class=lnlinks href=#hl-22-7> 7</a>
</span><span class=lnt id=hl-22-8><a class=lnlinks href=#hl-22-8> 8</a>
</span><span class=lnt id=hl-22-9><a class=lnlinks href=#hl-22-9> 9</a>
</span><span class=lnt id=hl-22-10><a class=lnlinks href=#hl-22-10>10</a>
</span><span class=lnt id=hl-22-11><a class=lnlinks href=#hl-22-11>11</a>
</span><span class=lnt id=hl-22-12><a class=lnlinks href=#hl-22-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 복합 키로 일관성 유지
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>getNextPage</span><span class=p>(</span><span class=nx>lastCreatedAt</span><span class=p>,</span> <span class=nx>lastId</span><span class=p>,</span> <span class=nx>limit</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>db</span><span class=p>.</span><span class=nx>posts</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>where</span><span class=p>((</span><span class=nx>post</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>post</span><span class=p>.</span><span class=nx>created_at</span> <span class=o>&lt;</span> <span class=nx>lastCreatedAt</span> <span class=o>||</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=nx>post</span><span class=p>.</span><span class=nx>created_at</span> <span class=o>===</span> <span class=nx>lastCreatedAt</span> <span class=o>&amp;&amp;</span> <span class=nx>post</span><span class=p>.</span><span class=nx>id</span> <span class=o>&lt;</span> <span class=nx>lastId</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>orderBy</span><span class=p>([</span><span class=s2>&#34;created_at&#34;</span><span class=p>,</span> <span class=s2>&#34;id&#34;</span><span class=p>],</span> <span class=p>[</span><span class=s2>&#34;desc&#34;</span><span class=p>,</span> <span class=s2>&#34;desc&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>limit</span><span class=p>(</span><span class=nx>limit</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=백엔드-변경의-영향>백엔드 변경의 영향<a hidden class=anchor aria-hidden=true href=#백엔드-변경의-영향>#</a></h4><p>API 업그레이드나 백엔드 변경이 페이지네이션에 미치는 영향을 관리해야 한다.</p><p><strong>해결책</strong>:</p><ol><li><strong>불투명 커서 사용</strong>: 내부 구현 세부 사항을 숨겨 유연성 확보</li><li><strong>버전 관리 적용</strong>: 페이지네이션 메커니즘 변경 시 명시적 버전 관리</li><li><strong>하위 호환성 유지</strong>: 기존 페이지네이션 매개변수 지원 유지</li></ol><h5 id=버전-관리-예시>버전 관리 예시<a hidden class=anchor aria-hidden=true href=#버전-관리-예시>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-23-1><a class=lnlinks href=#hl-23-1>1</a>
</span><span class=lnt id=hl-23-2><a class=lnlinks href=#hl-23-2>2</a>
</span><span class=lnt id=hl-23-3><a class=lnlinks href=#hl-23-3>3</a>
</span><span class=lnt id=hl-23-4><a class=lnlinks href=#hl-23-4>4</a>
</span><span class=lnt id=hl-23-5><a class=lnlinks href=#hl-23-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># 기존 API 계속 지원
</span></span><span class=line><span class=cl>GET /api/v1/articles?offset=20&amp;limit=10
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 새로운 커서 기반 API 도입
</span></span><span class=line><span class=cl>GET /api/v2/articles?cursor=eyJpZCI6MjB9&amp;limit=10
</span></span></code></pre></td></tr></table></div></div><h4 id=필터링-및-정렬과의-상호작용>필터링 및 정렬과의 상호작용<a hidden class=anchor aria-hidden=true href=#필터링-및-정렬과의-상호작용>#</a></h4><p>복잡한 필터링이나 정렬이 있는 경우 페이지네이션이 복잡해질 수 있다.</p><p><strong>해결책</strong>:</p><ol><li><strong>복합 커서 설계</strong>: 모든 필터 및 정렬 매개변수를 커서에 포함</li><li><strong>일관된 정렬 보장</strong>: 항상 기본 정렬 필드를 포함하여 일관성 유지</li><li><strong>상태 보존</strong>: 필터 상태를 페이지네이션 매개변수와 함께 유지</li></ol><h5 id=예시-1>예시<a hidden class=anchor aria-hidden=true href=#예시-1>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1> 1</a>
</span><span class=lnt id=hl-24-2><a class=lnlinks href=#hl-24-2> 2</a>
</span><span class=lnt id=hl-24-3><a class=lnlinks href=#hl-24-3> 3</a>
</span><span class=lnt id=hl-24-4><a class=lnlinks href=#hl-24-4> 4</a>
</span><span class=lnt id=hl-24-5><a class=lnlinks href=#hl-24-5> 5</a>
</span><span class=lnt id=hl-24-6><a class=lnlinks href=#hl-24-6> 6</a>
</span><span class=lnt id=hl-24-7><a class=lnlinks href=#hl-24-7> 7</a>
</span><span class=lnt id=hl-24-8><a class=lnlinks href=#hl-24-8> 8</a>
</span><span class=lnt id=hl-24-9><a class=lnlinks href=#hl-24-9> 9</a>
</span><span class=lnt id=hl-24-10><a class=lnlinks href=#hl-24-10>10</a>
</span><span class=lnt id=hl-24-11><a class=lnlinks href=#hl-24-11>11</a>
</span><span class=lnt id=hl-24-12><a class=lnlinks href=#hl-24-12>12</a>
</span><span class=lnt id=hl-24-13><a class=lnlinks href=#hl-24-13>13</a>
</span><span class=lnt id=hl-24-14><a class=lnlinks href=#hl-24-14>14</a>
</span><span class=lnt id=hl-24-15><a class=lnlinks href=#hl-24-15>15</a>
</span><span class=lnt id=hl-24-16><a class=lnlinks href=#hl-24-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 필터와 정렬이 포함된 커서
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>complexCursor</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>lastValue</span><span class=o>:</span> <span class=nx>item</span><span class=p>.</span><span class=nx>price</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>lastId</span><span class=o>:</span> <span class=nx>item</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>filters</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>category</span><span class=o>:</span> <span class=s1>&#39;electronics&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>minPrice</span><span class=o>:</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>sort</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>field</span><span class=o>:</span> <span class=s1>&#39;price&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>direction</span><span class=o>:</span> <span class=s1>&#39;desc&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Base64로 인코딩하여 클라이언트에 전달
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>encodedCursor</span> <span class=o>=</span> <span class=nx>btoa</span><span class=p>(</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>complexCursor</span><span class=p>));</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=미래-트렌드와-발전-방향>미래 트렌드와 발전 방향<a hidden class=anchor aria-hidden=true href=#미래-트렌드와-발전-방향>#</a></h3><h4 id=실시간-페이지네이션>실시간 페이지네이션<a hidden class=anchor aria-hidden=true href=#실시간-페이지네이션>#</a></h4><p>WebSocket이나 Server-Sent Events를 통한 실시간 업데이트와 페이지네이션의 통합이 증가하고 있다.</p><h5 id=구현-접근법>구현 접근법<a hidden class=anchor aria-hidden=true href=#구현-접근법>#</a></h5><ol><li><strong>초기 페이지 로드</strong>: 일반적인 페이지네이션 API를 통해 초기 데이터 로드</li><li><strong>실시간 업데이트</strong>: WebSocket을 통해 새 항목이나 변경사항 수신</li><li><strong>클라이언트 측 병합</strong>: 현재 페이지에 영향을 미치는 업데이트 적용</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-25-1><a class=lnlinks href=#hl-25-1> 1</a>
</span><span class=lnt id=hl-25-2><a class=lnlinks href=#hl-25-2> 2</a>
</span><span class=lnt id=hl-25-3><a class=lnlinks href=#hl-25-3> 3</a>
</span><span class=lnt id=hl-25-4><a class=lnlinks href=#hl-25-4> 4</a>
</span><span class=lnt id=hl-25-5><a class=lnlinks href=#hl-25-5> 5</a>
</span><span class=lnt id=hl-25-6><a class=lnlinks href=#hl-25-6> 6</a>
</span><span class=lnt id=hl-25-7><a class=lnlinks href=#hl-25-7> 7</a>
</span><span class=lnt id=hl-25-8><a class=lnlinks href=#hl-25-8> 8</a>
</span><span class=lnt id=hl-25-9><a class=lnlinks href=#hl-25-9> 9</a>
</span><span class=lnt id=hl-25-10><a class=lnlinks href=#hl-25-10>10</a>
</span><span class=lnt id=hl-25-11><a class=lnlinks href=#hl-25-11>11</a>
</span><span class=lnt id=hl-25-12><a class=lnlinks href=#hl-25-12>12</a>
</span><span class=lnt id=hl-25-13><a class=lnlinks href=#hl-25-13>13</a>
</span><span class=lnt id=hl-25-14><a class=lnlinks href=#hl-25-14>14</a>
</span><span class=lnt id=hl-25-15><a class=lnlinks href=#hl-25-15>15</a>
</span><span class=lnt id=hl-25-16><a class=lnlinks href=#hl-25-16>16</a>
</span><span class=lnt id=hl-25-17><a class=lnlinks href=#hl-25-17>17</a>
</span><span class=lnt id=hl-25-18><a class=lnlinks href=#hl-25-18>18</a>
</span><span class=lnt id=hl-25-19><a class=lnlinks href=#hl-25-19>19</a>
</span><span class=lnt id=hl-25-20><a class=lnlinks href=#hl-25-20>20</a>
</span><span class=lnt id=hl-25-21><a class=lnlinks href=#hl-25-21>21</a>
</span><span class=lnt id=hl-25-22><a class=lnlinks href=#hl-25-22>22</a>
</span><span class=lnt id=hl-25-23><a class=lnlinks href=#hl-25-23>23</a>
</span><span class=lnt id=hl-25-24><a class=lnlinks href=#hl-25-24>24</a>
</span><span class=lnt id=hl-25-25><a class=lnlinks href=#hl-25-25>25</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 초기 데이터 로드
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>async</span> <span class=kd>function</span> <span class=nx>loadInitialPage</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>fetch</span><span class=p>(</span><span class=s1>&#39;/api/messages?limit=20&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>data</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>response</span><span class=p>.</span><span class=nx>json</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=nx>renderMessages</span><span class=p>(</span><span class=nx>data</span><span class=p>.</span><span class=nx>messages</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 가장 최근 메시지 ID 저장
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>latestMessageId</span> <span class=o>=</span> <span class=nx>data</span><span class=p>.</span><span class=nx>messages</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// WebSocket 연결 설정
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>socket</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>WebSocket</span><span class=p>(</span><span class=s1>&#39;wss://example.com/messages&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>socket</span><span class=p>.</span><span class=nx>onmessage</span> <span class=o>=</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>newMessage</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 새 메시지가 현재 페이지에 속하는지 확인
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>if</span> <span class=p>(</span><span class=nx>newMessage</span><span class=p>.</span><span class=nx>id</span> <span class=o>&gt;</span> <span class=nx>latestMessageId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 메시지 목록 맨 위에 추가
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>prependMessage</span><span class=p>(</span><span class=nx>newMessage</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 가장 오래된 메시지 제거하여 페이지 크기 유지
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>removeOldestMessage</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 최신 ID 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>latestMessageId</span> <span class=o>=</span> <span class=nx>newMessage</span><span class=p>.</span><span class=nx>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=graphql과-선언적-페이지네이션>GraphQL과 선언적 페이지네이션<a hidden class=anchor aria-hidden=true href=#graphql과-선언적-페이지네이션>#</a></h4><p>GraphQL은 클라이언트가 필요한 데이터와 페이지네이션 방식을 더 세밀하게 제어할 수 있게 해준다.</p><h5 id=relay-커넥션-스펙의-장점>Relay 커넥션 스펙의 장점<a hidden class=anchor aria-hidden=true href=#relay-커넥션-스펙의-장점>#</a></h5><ol><li><strong>표준화</strong>: 잘 정의된 페이지네이션 패턴 제공</li><li><strong>효율성</strong>: 필요한 필드만 요청 가능</li><li><strong>유연성</strong>: 클라이언트가 데이터 구조 정의</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1> 1</a>
</span><span class=lnt id=hl-26-2><a class=lnlinks href=#hl-26-2> 2</a>
</span><span class=lnt id=hl-26-3><a class=lnlinks href=#hl-26-3> 3</a>
</span><span class=lnt id=hl-26-4><a class=lnlinks href=#hl-26-4> 4</a>
</span><span class=lnt id=hl-26-5><a class=lnlinks href=#hl-26-5> 5</a>
</span><span class=lnt id=hl-26-6><a class=lnlinks href=#hl-26-6> 6</a>
</span><span class=lnt id=hl-26-7><a class=lnlinks href=#hl-26-7> 7</a>
</span><span class=lnt id=hl-26-8><a class=lnlinks href=#hl-26-8> 8</a>
</span><span class=lnt id=hl-26-9><a class=lnlinks href=#hl-26-9> 9</a>
</span><span class=lnt id=hl-26-10><a class=lnlinks href=#hl-26-10>10</a>
</span><span class=lnt id=hl-26-11><a class=lnlinks href=#hl-26-11>11</a>
</span><span class=lnt id=hl-26-12><a class=lnlinks href=#hl-26-12>12</a>
</span><span class=lnt id=hl-26-13><a class=lnlinks href=#hl-26-13>13</a>
</span><span class=lnt id=hl-26-14><a class=lnlinks href=#hl-26-14>14</a>
</span><span class=lnt id=hl-26-15><a class=lnlinks href=#hl-26-15>15</a>
</span><span class=lnt id=hl-26-16><a class=lnlinks href=#hl-26-16>16</a>
</span><span class=lnt id=hl-26-17><a class=lnlinks href=#hl-26-17>17</a>
</span><span class=lnt id=hl-26-18><a class=lnlinks href=#hl-26-18>18</a>
</span><span class=lnt id=hl-26-19><a class=lnlinks href=#hl-26-19>19</a>
</span><span class=lnt id=hl-26-20><a class=lnlinks href=#hl-26-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-graphql data-lang=graphql><span class=line><span class=cl><span class=c># 양방향 페이지네이션 지원 쿼리</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>query</span><span class=w> </span><span class=nc>GetArticles</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>articlesConnection</span><span class=p>(</span><span class=py>first</span><span class=p>:</span><span class=w> </span><span class=nc>10</span><span class=p>,</span><span class=w> </span><span class=py>after</span><span class=p>:</span><span class=w> </span><span class=s>&#34;cursor1&#34;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nc>edges</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>node</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>title</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># 클라이언트는 필요한 필드만 요청</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>createdAt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>cursor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>pageInfo</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>hasNextPage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>hasPreviousPage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>startCursor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>endCursor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=ai-기반-페이지네이션>AI 기반 페이지네이션<a hidden class=anchor aria-hidden=true href=#ai-기반-페이지네이션>#</a></h4><p>머신러닝을 활용하여 사용자 패턴에 따라 페이지네이션을 최적화하는 방향으로 발전하고 있다.</p><h5 id=가능한-구현>가능한 구현<a hidden class=anchor aria-hidden=true href=#가능한-구현>#</a></h5><ol><li><strong>예측적 로딩</strong>: 사용자가 다음에 볼 가능성이 높은 데이터 미리 로드</li><li><strong>개인화된 페이지 크기</strong>: 사용자 행동에 기반한 최적 페이지 크기 동적 조정</li><li><strong>관심 기반 우선순위</strong>: 사용자 관심사에 따라 결과 순서 조정</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-27-1><a class=lnlinks href=#hl-27-1> 1</a>
</span><span class=lnt id=hl-27-2><a class=lnlinks href=#hl-27-2> 2</a>
</span><span class=lnt id=hl-27-3><a class=lnlinks href=#hl-27-3> 3</a>
</span><span class=lnt id=hl-27-4><a class=lnlinks href=#hl-27-4> 4</a>
</span><span class=lnt id=hl-27-5><a class=lnlinks href=#hl-27-5> 5</a>
</span><span class=lnt id=hl-27-6><a class=lnlinks href=#hl-27-6> 6</a>
</span><span class=lnt id=hl-27-7><a class=lnlinks href=#hl-27-7> 7</a>
</span><span class=lnt id=hl-27-8><a class=lnlinks href=#hl-27-8> 8</a>
</span><span class=lnt id=hl-27-9><a class=lnlinks href=#hl-27-9> 9</a>
</span><span class=lnt id=hl-27-10><a class=lnlinks href=#hl-27-10>10</a>
</span><span class=lnt id=hl-27-11><a class=lnlinks href=#hl-27-11>11</a>
</span><span class=lnt id=hl-27-12><a class=lnlinks href=#hl-27-12>12</a>
</span><span class=lnt id=hl-27-13><a class=lnlinks href=#hl-27-13>13</a>
</span><span class=lnt id=hl-27-14><a class=lnlinks href=#hl-27-14>14</a>
</span><span class=lnt id=hl-27-15><a class=lnlinks href=#hl-27-15>15</a>
</span><span class=lnt id=hl-27-16><a class=lnlinks href=#hl-27-16>16</a>
</span><span class=lnt id=hl-27-17><a class=lnlinks href=#hl-27-17>17</a>
</span><span class=lnt id=hl-27-18><a class=lnlinks href=#hl-27-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 사용자 행동 패턴에 기반한 적응형 페이지 크기
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>getAdaptivePageSize</span><span class=p>(</span><span class=nx>userId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 사용자의 과거 페이지 탐색 패턴 분석
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>userBehavior</span> <span class=o>=</span> <span class=nx>getUserBehaviorMetrics</span><span class=p>(</span><span class=nx>userId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 스크롤 속도, 항목당 평균 체류 시간 등에 기반하여 페이지 크기 계산
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>let</span> <span class=nx>optimalPageSize</span> <span class=o>=</span> <span class=nx>BASE_PAGE_SIZE</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>userBehavior</span><span class=p>.</span><span class=nx>scrollSpeed</span> <span class=o>&gt;</span> <span class=nx>THRESHOLD_FAST</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 빠르게 스크롤하는 사용자에게는 더 많은 항목 제공
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>optimalPageSize</span> <span class=o>*=</span> <span class=mf>1.5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=nx>userBehavior</span><span class=p>.</span><span class=nx>averageDwellTime</span> <span class=o>&gt;</span> <span class=nx>THRESHOLD_ENGAGED</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 각 항목을 오래 보는 사용자에게는 더 적은 항목 제공
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>optimalPageSize</span> <span class=o>*=</span> <span class=mf>0.8</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>min</span><span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>max</span><span class=p>(</span><span class=nx>optimalPageSize</span><span class=p>,</span> <span class=nx>MIN_PAGE_SIZE</span><span class=p>),</span> <span class=nx>MAX_PAGE_SIZE</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=스트리밍-페이지네이션>스트리밍 페이지네이션<a hidden class=anchor aria-hidden=true href=#스트리밍-페이지네이션>#</a></h4><p>대용량 응답을 작은 청크로 스트리밍하여 페이지네이션 경험을 개선하는 접근법이 등장하고 있다.</p><h5 id=구현-접근법-1>구현 접근법<a hidden class=anchor aria-hidden=true href=#구현-접근법-1>#</a></h5><ol><li><strong>HTTP 스트리밍</strong>: Transfer-Encoding: chunked를 사용한 점진적 응답</li><li><strong>서버-푸시 스트리밍</strong>: Server-Sent Events를 통한 실시간 스트리밍</li><li><strong>부분 응답 처리</strong>: 클라이언트가 데이터가 도착하는 대로 처리</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-28-1><a class=lnlinks href=#hl-28-1> 1</a>
</span><span class=lnt id=hl-28-2><a class=lnlinks href=#hl-28-2> 2</a>
</span><span class=lnt id=hl-28-3><a class=lnlinks href=#hl-28-3> 3</a>
</span><span class=lnt id=hl-28-4><a class=lnlinks href=#hl-28-4> 4</a>
</span><span class=lnt id=hl-28-5><a class=lnlinks href=#hl-28-5> 5</a>
</span><span class=lnt id=hl-28-6><a class=lnlinks href=#hl-28-6> 6</a>
</span><span class=lnt id=hl-28-7><a class=lnlinks href=#hl-28-7> 7</a>
</span><span class=lnt id=hl-28-8><a class=lnlinks href=#hl-28-8> 8</a>
</span><span class=lnt id=hl-28-9><a class=lnlinks href=#hl-28-9> 9</a>
</span><span class=lnt id=hl-28-10><a class=lnlinks href=#hl-28-10>10</a>
</span><span class=lnt id=hl-28-11><a class=lnlinks href=#hl-28-11>11</a>
</span><span class=lnt id=hl-28-12><a class=lnlinks href=#hl-28-12>12</a>
</span><span class=lnt id=hl-28-13><a class=lnlinks href=#hl-28-13>13</a>
</span><span class=lnt id=hl-28-14><a class=lnlinks href=#hl-28-14>14</a>
</span><span class=lnt id=hl-28-15><a class=lnlinks href=#hl-28-15>15</a>
</span><span class=lnt id=hl-28-16><a class=lnlinks href=#hl-28-16>16</a>
</span><span class=lnt id=hl-28-17><a class=lnlinks href=#hl-28-17>17</a>
</span><span class=lnt id=hl-28-18><a class=lnlinks href=#hl-28-18>18</a>
</span><span class=lnt id=hl-28-19><a class=lnlinks href=#hl-28-19>19</a>
</span><span class=lnt id=hl-28-20><a class=lnlinks href=#hl-28-20>20</a>
</span><span class=lnt id=hl-28-21><a class=lnlinks href=#hl-28-21>21</a>
</span><span class=lnt id=hl-28-22><a class=lnlinks href=#hl-28-22>22</a>
</span><span class=lnt id=hl-28-23><a class=lnlinks href=#hl-28-23>23</a>
</span><span class=lnt id=hl-28-24><a class=lnlinks href=#hl-28-24>24</a>
</span><span class=lnt id=hl-28-25><a class=lnlinks href=#hl-28-25>25</a>
</span><span class=lnt id=hl-28-26><a class=lnlinks href=#hl-28-26>26</a>
</span><span class=lnt id=hl-28-27><a class=lnlinks href=#hl-28-27>27</a>
</span><span class=lnt id=hl-28-28><a class=lnlinks href=#hl-28-28>28</a>
</span><span class=lnt id=hl-28-29><a class=lnlinks href=#hl-28-29>29</a>
</span><span class=lnt id=hl-28-30><a class=lnlinks href=#hl-28-30>30</a>
</span><span class=lnt id=hl-28-31><a class=lnlinks href=#hl-28-31>31</a>
</span><span class=lnt id=hl-28-32><a class=lnlinks href=#hl-28-32>32</a>
</span><span class=lnt id=hl-28-33><a class=lnlinks href=#hl-28-33>33</a>
</span><span class=lnt id=hl-28-34><a class=lnlinks href=#hl-28-34>34</a>
</span><span class=lnt id=hl-28-35><a class=lnlinks href=#hl-28-35>35</a>
</span><span class=lnt id=hl-28-36><a class=lnlinks href=#hl-28-36>36</a>
</span><span class=lnt id=hl-28-37><a class=lnlinks href=#hl-28-37>37</a>
</span><span class=lnt id=hl-28-38><a class=lnlinks href=#hl-28-38>38</a>
</span><span class=lnt id=hl-28-39><a class=lnlinks href=#hl-28-39>39</a>
</span><span class=lnt id=hl-28-40><a class=lnlinks href=#hl-28-40>40</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 서버 측(Node.js) 스트리밍 구현
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/api/stream-articles&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 스트리밍 헤더 설정
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>res</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Content-Type&#39;</span><span class=p>,</span> <span class=s1>&#39;application/json&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Transfer-Encoding&#39;</span><span class=p>,</span> <span class=s1>&#39;chunked&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 초기 응답 시작
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>res</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=s1>&#39;{&#34;articles&#34;:[&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>first</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 데이터베이스 쿼리 스트림 생성
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>stream</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>collection</span><span class=p>(</span><span class=s1>&#39;articles&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>find</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>sort</span><span class=p>({</span><span class=nx>created_at</span><span class=o>:</span> <span class=o>-</span><span class=mi>1</span><span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>stream</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>stream</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;data&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>article</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 필요시 쉼표 추가
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>first</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>res</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=s1>&#39;,&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>first</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 항목 직렬화 및 전송
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>res</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>article</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>stream</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;end&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 응답 완료
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>res</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=s1>&#39;]}&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 클라이언트 연결 해제 처리
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>req</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;close&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>stream</span><span class=p>.</span><span class=nx>destroy</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/backend-development/>Backend-Development</a></li><li><a href=https://buenhyden.github.io/tags/api-design-and-implementation/>API-Design-and-Implementation</a></li><li><a href=https://buenhyden.github.io/tags/fundamentals/>Fundamentals</a></li><li><a href=https://buenhyden.github.io/tags/pagination/>Pagination</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/software-engineering/application-development/api-design-and-implementation/api-styles/query-style/graphql/graphql-apis/graphql-api-vs-graphql/><span class=title>« Prev</span><br><span>GraphQL API vs. GraphQL</span>
</a><a class=next href=https://buenhyden.github.io/posts/software-engineering/application-development/api-design-and-implementation/api-fundamentals/api-endpoint-design/uri-design/><span class=title>Next »</span><br><span>URI Design</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>