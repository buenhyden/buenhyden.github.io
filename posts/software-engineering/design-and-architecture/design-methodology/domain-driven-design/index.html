<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Domain-Driven Design | hyunyoun's Blog</title><meta name=keywords content="Software-Engineering,Design-and-Architecture,Design-Methodologies,Domain-Driven-Design"><meta name=description content="Domain-Driven Design (DDD, 도메인 주도 설계) 는 복잡한 비즈니스 도메인을 중심으로 소프트웨어를 설계하는 방법론으로, 도메인 전문가와 개발자가 유비쿼터스 언어 (Ubiquitous Language) 를 통해 협력하여 도메인 모델을 구축하고, 바운디드 컨텍스트 (Bounded Context) 로 복잡성을 관리하며, 전략적 설계와 전술적 설계를 통해 유지보수 가능한 소프트웨어를 개발하는 접근법이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/domain-driven-design/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/domain-driven-design/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/domain-driven-design/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/domain-driven-design/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Domain-Driven Design"><meta property="og:description" content="Domain-Driven Design (DDD, 도메인 주도 설계) 는 복잡한 비즈니스 도메인을 중심으로 소프트웨어를 설계하는 방법론으로, 도메인 전문가와 개발자가 유비쿼터스 언어 (Ubiquitous Language) 를 통해 협력하여 도메인 모델을 구축하고, 바운디드 컨텍스트 (Bounded Context) 로 복잡성을 관리하며, 전략적 설계와 전술적 설계를 통해 유지보수 가능한 소프트웨어를 개발하는 접근법이다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Domain-Driven Design"><meta name=twitter:description content="Domain-Driven Design (DDD, 도메인 주도 설계) 는 복잡한 비즈니스 도메인을 중심으로 소프트웨어를 설계하는 방법론으로, 도메인 전문가와 개발자가 유비쿼터스 언어 (Ubiquitous Language) 를 통해 협력하여 도메인 모델을 구축하고, 바운디드 컨텍스트 (Bounded Context) 로 복잡성을 관리하며, 전략적 설계와 전술적 설계를 통해 유지보수 가능한 소프트웨어를 개발하는 접근법이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Computer Science and Engineering","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Software Engineering","item":"https://buenhyden.github.io/posts/software-engineering/"},{"@type":"ListItem","position":3,"name":"Design and Architecture","item":""},{"@type":"ListItem","position":4,"name":"Design Methodology","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/"},{"@type":"ListItem","position":5,"name":"Domain-Driven Design","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/domain-driven-design/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>Computer Science and Engineering</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/>Software Engineering</a>&nbsp;»&nbsp;<a href>Design and Architecture</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/>Design Methodology</a></div><h1>Domain-Driven Design</h1><div class=post-description>Domain-Driven Design (DDD, 도메인 주도 설계) 는 복잡한 비즈니스 도메인을 중심으로 소프트웨어를 설계하는 방법론으로, 도메인 전문가와 개발자가 유비쿼터스 언어 (Ubiquitous Language) 를 통해 협력하여 도메인 모델을 구축하고, 바운디드 컨텍스트 (Bounded Context) 로 복잡성을 관리하며, 전략적 설계와 전술적 설계를 통해 유지보수 가능한 소프트웨어를 개발하는 접근법이다.</div></header><div class=post-content><h2 id=domain-driven-design>Domain-Driven Design<a hidden class=anchor aria-hidden=true href=#domain-driven-design>#</a></h2><p>DDD 는 에릭 에반스 (Eric Evans) 가 2003 년 제안한 방법론으로, Domain-Driven Design(DDD) 는 소프트웨어 개발에서 도메인 (비즈니스 영역) 의 복잡성을 효과적으로 해결하기 위해 도메인 모델링을 중심에 두는 접근법이다.<br>전략적 설계에서는 시스템을 <strong>Bounded Context</strong>, <strong>Subdomain</strong>, <strong>Context Map</strong>으로 구획화하며, 전술적 설계에서는 <strong>Entity</strong>, <strong>Value Object</strong>, <strong>Aggregate</strong>, <strong>Repository</strong>, <strong>Domain Event</strong>, <strong>Factory</strong>, <strong>Service</strong> 구조를 코드에 구현한다. 핵심은 도메인 전문가와 개발자가 유비쿼터스 언어를 통해 소통하며, 바운디드 컨텍스트별로 명확한 모델을 구축하고, 엔티티, 값 객체, 애그리게이트, 도메인 서비스, 도메인 이벤트 등 다양한 전술적 패턴을 적용하는 것이다.<br>DDD 는 복잡한 비즈니스 로직을 효과적으로 관리하고, 유지보수성과 확장성이 뛰어난 시스템을 구축하는 데 매우 유용하다.<br>현재 마이크로서비스 아키텍처, CQRS (Command Query Responsibility Segregation), 이벤트 소싱 (Event Sourcing) 과 함께 사용되어 현대적인 분산 시스템 구축에 핵심적으로 활용되고 있다.</p><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><p>Domain-Driven Design(DDD) 의 핵심 개념은 <strong>전략적 설계 (Strategic Design)</strong> 와 <strong>전술적 설계 (Tactical Design)</strong> 의 두 축을 기반으로 구성된다.</p><h4 id=전략적-설계-strategic-design>전략적 설계 (Strategic Design)<a hidden class=anchor aria-hidden=true href=#전략적-설계-strategic-design>#</a></h4><p>도메인 전체를 <strong>비즈니스 관점에서 논리적으로 분해</strong>하고, 시스템을 <strong>경계 (Context) 단위로 나누는 고수준 설계 전략</strong>.</p><table><thead><tr><th>개념</th><th>설명</th></tr></thead><tbody><tr><td><strong>도메인 (Domain)</strong></td><td>소프트웨어 시스템이 해결하려는 특정 비즈니스 문제 영역</td></tr><tr><td><strong>도메인 모델 (Domain Model)</strong></td><td>도메인의 개념, 규칙, 프로세스를 객체 중심으로 추상화한 구조</td></tr><tr><td><strong>유비쿼터스 언어 (Ubiquitous Language)</strong></td><td>도메인 전문가와 개발자가 공동으로 사용하는 일관된 언어로, 모델·코드·문서에 모두 반영됨</td></tr><tr><td><strong>바운디드 컨텍스트 (Bounded Context)</strong></td><td>도메인 모델이 명확하게 정의되어 적용되는 경계. 컨텍스트마다 모델이 다를 수 있음</td></tr><tr><td><strong>하위 도메인 (Subdomain)</strong></td><td>도메인을 핵심 (Core), 지원 (Supporting), 일반 (General) 하위 도메인으로 분류</td></tr><tr><td><strong>컨텍스트 매핑 (Context Mapping)</strong></td><td>여러 바운디드 컨텍스트 간의 관계 (Shared Kernel, Customer-Supplier 등) 를 정의하는 전략</td></tr></tbody></table><h4 id=전술적-설계-tactical-design>전술적 설계 (Tactical Design)<a hidden class=anchor aria-hidden=true href=#전술적-설계-tactical-design>#</a></h4><p>각 Bounded Context 내부에서 <strong>도메인 모델을 어떻게 설계하고 구현할지에 관한 세부 설계 기법</strong>.</p><table><thead><tr><th>개념</th><th>설명</th></tr></thead><tbody><tr><td><strong>엔티티 (Entity)</strong></td><td>고유 식별자 (ID) 를 가지며 상태 변화와 생명주기를 갖는 객체. 예: <code>Order</code>, <code>User</code></td></tr><tr><td><strong>값 객체 (Value Object)</strong></td><td>고유 식별자가 없고 불변성을 갖는 객체. 값만으로 동등성 판단. 예: <code>Money</code>, <code>Address</code></td></tr><tr><td><strong>애그리게이트 (Aggregate)</strong></td><td>여러 엔티티와 값 객체를 하나의 트랜잭션 단위로 묶는 집합. 루트 엔티티 (Aggregate Root) 를 통해서만 접근</td></tr><tr><td><strong>도메인 서비스 (Domain Service)</strong></td><td>하나의 엔티티나 값 객체에 속하지 않는 도메인 로직을 담당하는 객체</td></tr><tr><td><strong>도메인 이벤트 (Domain Event)</strong></td><td>도메인 내에서 발생한 의미 있는 상태 변화. 예: <code>OrderPlaced</code>, <code>PaymentConfirmed</code></td></tr><tr><td><strong>리포지토리 (Repository)</strong></td><td>도메인 객체의 저장소로, 객체의 생성·조회·삭제를 추상화</td></tr><tr><td><strong>팩토리 (Factory)</strong></td><td>복잡한 엔티티나 애그리게이트 생성을 담당하는 객체 또는 패턴</td></tr><tr><td><strong>스펙리피케이션 (Specification)</strong></td><td>비즈니스 규칙이나 조건을 캡슐화하여 복잡한 쿼리나 필터링을 표현하는 도메인 로직 구성 방식</td></tr></tbody></table><h4 id=아키텍처-및-구현-관련-요소>아키텍처 및 구현 관련 요소<a hidden class=anchor aria-hidden=true href=#아키텍처-및-구현-관련-요소>#</a></h4><table><thead><tr><th>개념</th><th>설명</th></tr></thead><tbody><tr><td><strong>레이어드 아키텍처 (Layered Architecture)</strong></td><td>Presentation, Application, Domain, Infrastructure 계층으로 관심사를 분리</td></tr><tr><td><strong>헥사고날 아키텍처 (Hexagonal Architecture)</strong></td><td>내부 도메인을 외부와 격리하기 위해 포트 (Port) 와 어댑터 (Adapter) 를 사용하는 구조</td></tr><tr><td><strong>클린 아키텍처 (Clean Architecture)</strong></td><td>의존성 역전을 기반으로 내부 도메인 (엔티티) 에 집중하는 계층화된 구조</td></tr><tr><td><strong>CQRS (Command Query Responsibility Segregation)</strong></td><td>명령 (Command) 과 조회 (Query) 의 책임을 분리하여 성능 및 유지보수성 개선</td></tr><tr><td><strong>이벤트 소싱 (Event Sourcing)</strong></td><td>상태 변경을 이벤트로 저장하여 시간 기반의 상태 추적 가능하게 하는 방식</td></tr><tr><td><strong>안티 - 코럽션 레이어 (Anti-Corruption Layer)</strong></td><td>외부 시스템의 모델과 내부 도메인 모델 간의 변환 및 격리를 제공하는 계층</td></tr><tr><td><strong>애플리케이션 서비스 (Application Service)</strong></td><td>도메인 객체를 조합하여 유스케이스를 실행하며, 트랜잭션과 오케스트레이션 담당</td></tr></tbody></table><h4 id=실무-적용-도구-및-협업-기법>실무 적용 도구 및 협업 기법<a hidden class=anchor aria-hidden=true href=#실무-적용-도구-및-협업-기법>#</a></h4><table><thead><tr><th>개념</th><th>설명</th></tr></thead><tbody><tr><td><strong>이벤트 스토밍 (Event Storming)</strong></td><td>도메인 이벤트를 중심으로 시스템 동작과 모델을 시각화하는 협업 워크숍 기법</td></tr><tr><td><strong>도메인 스토리텔링 (Domain Storytelling)</strong></td><td>이해관계자가 참여하여 업무 프로세스를 이야기로 표현하는 협업 기반 모델링 방법</td></tr><tr><td><strong>컨텍스트 매퍼 (Context Mapper)</strong></td><td>DSL 기반 도구로 컨텍스트 간 관계 및 맵핑을 다이어그램화하고 자동화하는 도구</td></tr><tr><td><strong>테스트 전략</strong></td><td>단위 테스트 (도메인 객체 중심), 계약 테스트 (컨텍스트 간 API), 시나리오 테스트 중심 설계 필요</td></tr></tbody></table><h3 id=배경>배경<a hidden class=anchor aria-hidden=true href=#배경>#</a></h3><p>DDD 는 2003 년 Eric Evans 의 저서 &ldquo;Domain-Driven Design: Tackling Complexity in the Heart of Software&rdquo; 를 통해 소개되었다. 복잡한 소프트웨어 개발에서 기술적 측면보다는 비즈니스 도메인에 집중해야 한다는 철학에서 출발했다.<br>DDD 는 기존의 데이터 중심 설계 (Data-Driven Design) 의 한계를 극복하기 위해 등장했다.</p><p>전통적인 소프트웨어 개발에서는 다음과 같은 문제점들이 있었다:</p><ul><li><strong>비즈니스 도메인에 대한 이해 부족</strong>: 기술적 구현에만 집중하여 실제 비즈니스 요구사항과 괴리</li><li><strong>도메인 전문가와 개발자 간 소통 단절</strong>: 서로 다른 언어와 관점으로 인한 오해</li><li><strong>복잡성 관리 실패</strong>: 시스템이 커질수록 유지보수가 어려워지는 구조</li><li><strong>변화에 대한 취약성</strong>: 비즈니스 변화에 유연하게 대응하지 못하는 경직된 설계</li></ul><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><h4 id=주요-목적>주요 목적<a hidden class=anchor aria-hidden=true href=#주요-목적>#</a></h4><ol><li><strong>비즈니스 - 기술 격차 해소</strong>: 비즈니스와 소프트웨어 개발 간의 격차를 줄이고 기술 팀과 도메인 전문가 간의 명확한 소통 촉진</li><li><strong>복잡성 관리</strong>: 복잡한 비즈니스 로직을 캡슐화하는 도메인 모델을 통해 비즈니스 현실과 코드 간의 격차 해소</li><li><strong>시스템 모듈화</strong>: 대규모 도메인을 여러 Bounded Context 로 분할하여 명시적 관계 설정</li></ol><h4 id=필요성>필요성<a hidden class=anchor aria-hidden=true href=#필요성>#</a></h4><ul><li><strong>레거시 시스템의 한계</strong>: 단일 통합 모델의 한계로 인한 Big Ball of Mud 아키텍처 방지</li><li><strong>마이크로서비스 경계 정의</strong>: 마이크로서비스 아키텍처에서 서비스 경계를 정의하는 지침 제공</li><li><strong>지속적인 진화</strong>: 변화하는 비즈니스 도메인에 맞춰 소프트웨어가 진화할 수 있는 구조 제공</li></ul><h3 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><ul><li><strong>도메인 모델링</strong>: 비즈니스 로직과 규칙을 객체로 모델링</li><li><strong>바운디드 컨텍스트 설계</strong>: 도메인별 경계 설정 및 독립적 개발</li><li><strong>유비쿼터스 언어 적용</strong>: 공통 언어로 커뮤니케이션</li><li><strong>애그리게이트 및 엔티티 설계</strong>: 비즈니스 규칙 중심의 객체 설계</li><li><strong>도메인 서비스 및 리포지토리 구현</strong>: 비즈니스 로직과 데이터 접근 분리</li></ul><h4 id=전략적-설계-strategic-design-1>전략적 설계 (Strategic Design)<a hidden class=anchor aria-hidden=true href=#전략적-설계-strategic-design-1>#</a></h4><ul><li><strong>도메인 분할</strong>: 큰 도메인을 하위 도메인으로 나누어 관리</li><li><strong>바운디드 컨텍스트 식별</strong>: 모델의 일관성이 유지되는 경계 정의</li><li><strong>컨텍스트 매핑</strong>: 바운디드 컨텍스트 간의 관계와 통합 방식 설계</li></ul><h4 id=전술적-설계-tactical-design-1>전술적 설계 (Tactical Design)<a hidden class=anchor aria-hidden=true href=#전술적-설계-tactical-design-1>#</a></h4><ul><li><strong>도메인 모델링</strong>: 엔티티, 밸류 오브젝트, 애그리거트 설계</li><li><strong>비즈니스 로직 구현</strong>: 도메인 서비스와 도메인 이벤트 활용</li><li><strong>아키텍처 패턴 적용</strong>: 레이어드, 헥사고날 아키텍처 구현</li></ul><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><h4 id=핵심-특징>핵심 특징<a hidden class=anchor aria-hidden=true href=#핵심-특징>#</a></h4><ol><li><strong>도메인 중심성</strong>: 비즈니스 도메인이 설계의 중심</li><li><strong>협업 지향</strong>: 도메인 전문가와 개발자의 긴밀한 협력</li><li><strong>진화적 설계</strong>: 지속적인 학습과 개선을 통한 모델 발전</li><li><strong>명시적 모델링</strong>: 암묵적 지식을 명시적 코드로 표현</li></ol><h4 id=구별되는-특징>구별되는 특징<a hidden class=anchor aria-hidden=true href=#구별되는-특징>#</a></h4><ul><li><strong>유비쿼터스 언어</strong>: 모든 의사소통에서 동일한 용어 사용</li><li><strong>바운디드 컨텍스트</strong>: 모델의 적용 범위를 명확히 제한</li><li><strong>애그리거트</strong>: 일관성 경계를 명확히 정의</li><li><strong>이벤트 중심 사고</strong>: 비즈니스 이벤트를 중심으로 모델링</li></ul><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><p>DDD 의 핵심 원칙은 도메인 중심의 설계와 유비쿼터스 언어의 사용이다. 도메인 전문가와 개발자가 협업하여 도메인 모델을 구축하고, 이를 소프트웨어에 반영한다. 또한, 바운디드 컨텍스트를 정의하여 도메인 모델의 적용 범위를 명확히 한다.</p><h4 id=ddd-의-3-가지-핵심-원칙>DDD 의 3 가지 핵심 원칙<a hidden class=anchor aria-hidden=true href=#ddd-의-3-가지-핵심-원칙>#</a></h4><ol><li><p><strong>Focus on the Core Domain (핵심 도메인에 집중)</strong></p><ul><li>비즈니스 경쟁 우위를 제공하는 핵심 영역에 집중</li><li>제한된 자원을 가장 중요한 부분에 투자</li></ul></li><li><p><strong>Explore Models in Collaboration (협력을 통한 모델 탐구)</strong></p><ul><li>도메인 전문가와 개발자의 지속적 협력</li><li>공동 모델링을 통한 깊은 도메인 이해</li></ul></li><li><p><strong>Speak Ubiquitous Language (유비쿼터스 언어 사용)</strong></p><ul><li>모든 이해관계자가 동일한 언어 사용</li><li>코드와 대화에서 일관된 용어 유지</li></ul></li></ol><pre class=mermaid>graph TD
    A[도메인 전문가] --&gt; B[유비쿼터스 언어]
    C[개발자] --&gt; B
    D[테스터] --&gt; B
    E[비즈니스 분석가] --&gt; B
    
    B --&gt; F[코드]
    B --&gt; G[문서]
    B --&gt; H[대화]
    B --&gt; I[테스트]
</pre><h4 id=설계-원칙>설계 원칙<a hidden class=anchor aria-hidden=true href=#설계-원칙>#</a></h4><ol><li><strong>Model-Driven Design</strong>: 모델과 구현의 긴밀한 연결</li><li><strong>Hands-On Modelers</strong>: 모델러가 직접 코드 작성 참여</li><li><strong>Refactoring Toward Deeper Insight</strong>: 지속적 리팩토링을 통한 깊은 통찰</li></ol><pre class=mermaid>graph LR
    A[도메인 모델] &lt;--&gt; B[코드 구현]
    B &lt;--&gt; C[대화와 문서]
    C &lt;--&gt; A
    
    A -.-&gt; D[지속적 리팩토링]
    D -.-&gt; A
</pre><p><strong>핵심 개념</strong>:</p><ul><li>도메인 모델과 코드가 긴밀하게 연결</li><li>모델의 변화가 즉시 코드에 반영</li><li>지속적인 리팩토링을 통한 모델 개선</li></ul><h4 id=전략적---전술적-설계-분리>전략적 - 전술적 설계 분리<a hidden class=anchor aria-hidden=true href=#전략적---전술적-설계-분리>#</a></h4><ul><li><strong>전략적 설계</strong>: 바운디드 컨텍스트, 유비쿼터스 언어, 컨텍스트 맵 등 시스템의 큰 구조를 정의한다.</li><li><strong>전술적 설계</strong>: 엔티티, 값 객체, 애그리게이트, 도메인 서비스, 이벤트, 리포지토리 등 실질적 코드 구조를 설계한다.</li></ul><pre class=mermaid>graph LR
    A[Strategic Design] --&gt; B[Tactical Design]
    
    subgraph Strategic
        C[Bounded Context]
        D[Context Map]
        E[Subdomain]
    end
    
    subgraph Tactical
        F[Aggregate]
        G[Entity]
        H[Value Object]
        I[Repository]
    end
    
    A --&gt; Strategic
    B --&gt; Tactical
</pre><h4 id=ddd-개발-프로세스>DDD 개발 프로세스<a hidden class=anchor aria-hidden=true href=#ddd-개발-프로세스>#</a></h4><pre class=mermaid>sequenceDiagram
    participant DE as 도메인 전문가
    participant DEV as 개발자
    participant MODEL as 도메인 모델
    participant CODE as 코드
    
    DE-&gt;&gt;DEV: 도메인 지식 공유
    DEV-&gt;&gt;MODEL: 초기 모델링
    MODEL-&gt;&gt;CODE: 코드 구현
    CODE-&gt;&gt;DEV: 구현을 통한 학습
    DEV-&gt;&gt;DE: 질문과 확인
    DE-&gt;&gt;DEV: 피드백 제공
    DEV-&gt;&gt;MODEL: 모델 개선
    MODEL-&gt;&gt;CODE: 리팩토링
    
    Note over DE,CODE: 지속적인 협력과 개선
</pre><ol><li><p><strong>도메인 지식 공유 (DE ➡ DEV)</strong><br>도메인 전문가 (Subject Matter Expert) 는 개발자에게 비즈니스의 규칙, 용어, 흐름 등 도메인 지식을 전달한다.<br>이는 <strong>유비쿼터스 언어 (Ubiquitous Language)</strong> 의 형성 및 모델링의 시작점이다.</p></li><li><p><strong>초기 모델링 (DEV ➡ MODEL)</strong><br>개발자는 공유받은 도메인 지식을 바탕으로 개념 모델을 만듭니다. 이 모델은 엔티티, 값 객체, 애그리게이트 등을 포함한다.</p></li><li><p><strong>코드 구현 (MODEL ➡ CODE)</strong><br>모델링된 구조를 바탕으로 실제 코드로 구현한다. 이 때, <strong>애플리케이션 레이어</strong>, <strong>도메인 레이어</strong>, <strong>인프라스트럭처 레이어</strong> 등 계층적 아키텍처 설계를 따르게 된다.</p></li><li><p><strong>구현을 통한 학습 (CODE ➡ DEV)</strong><br>코드를 작성하고 테스트하는 과정에서 개발자는 도메인에 대한 새로운 이해를 얻게 되고, 때로는 기존 이해에 오류가 있었음을 발견한다.</p></li><li><p><strong>질문과 확인 (DEV ➡ DE)</strong><br>개발자는 도메인 전문가에게 다시 질문하거나 모델에 대한 확인을 요청한다. 이 과정은 <strong>도메인에 대한 해석 오류 방지</strong>를 위한 중요한 피드백 루프이다.</p></li><li><p><strong>피드백 제공 (DE ➡ DEV)</strong><br>도메인 전문가는 잘못된 부분을 바로잡거나, 새로운 도메인 규칙 또는 예외 상황을 공유한다.</p></li><li><p><strong>모델 개선 (DEV ➡ MODEL)</strong><br>피드백을 반영해 도메인 모델을 재구성하거나 수정한다. 이는 종종 <strong>이벤트 스토밍</strong>, <strong>컨텍스트 매핑</strong> 등 협업 기법을 통해 이루어진다.</p></li><li><p><strong>리팩토링 (MODEL ➡ CODE)</strong><br>개선된 도메인 모델에 따라 코드를 리팩토링한다. 이 과정은 기술 부채를 줄이고, 도메인 변경에 유연한 구조를 만드는데 핵심이다.</p></li></ol><h3 id=전략적-설계-strategic-design-2>전략적 설계 (Strategic Design)<a hidden class=anchor aria-hidden=true href=#전략적-설계-strategic-design-2>#</a></h3><p>도메인 전체를 <strong>비즈니스 관점에서 논리적으로 분해</strong>하고, 시스템을 <strong>경계 (Context) 단위로 나누는 고수준 설계 전략</strong>.</p><p><strong>주요 목적</strong></p><ul><li>도메인을 의미 있는 단위로 분리</li><li>팀 간 책임 범위 분할</li><li>모델 간 통합 관계 정의</li></ul><p><strong>핵심 구성요소</strong></p><table><thead><tr><th>구성요소</th><th>설명</th></tr></thead><tbody><tr><td><strong>Subdomain</strong></td><td>시스템 내 비즈니스 하위 영역 (Core, Supporting, Generic) 으로 분류됨</td></tr><tr><td><strong>Bounded Context</strong></td><td>특정 모델이 일관되게 사용되는 경계. 설계·언어·의미가 명확히 정리됨</td></tr><tr><td><strong>Context Map</strong></td><td>여러 Bounded Context 간의 관계를 정의하는 지도. 공유 커널, ACL, 고객 - 공급자 등 포함</td></tr></tbody></table><p><strong>예시</strong>:</p><ul><li>Core Subdomain: 결제 시스템</li><li>Bounded Context: <code>Payment</code>, <code>Invoice</code></li><li>Context Map: <code>Payment ↔ Invoice</code> 는 <code>Customer-Supplier</code> 관계로 구성</li></ul><h4 id=subdomain-의-세-가지-분류>Subdomain 의 세 가지 분류<a hidden class=anchor aria-hidden=true href=#subdomain-의-세-가지-분류>#</a></h4><table><thead><tr><th>구분</th><th>정의</th><th>특징</th><th>예시</th></tr></thead><tbody><tr><td><strong>Core Subdomain</strong></td><td>시스템이 경쟁력을 갖기 위해 반드시 잘 설계되어야 하는 <strong>핵심 비즈니스 영역</strong></td><td>- 조직만의 차별화 요소<br>- 가장 많은 투자가 이루어져야 함<br>- 고급 도메인 전문가와의 협업 필수</td><td>주문 처리 로직 (전자상거래), 대출 승인 알고리즘 (금융), 물류 최적화 (배송)</td></tr><tr><td><strong>Supporting Subdomain</strong></td><td>Core 를 지원하지만, 핵심 가치는 아니며 <strong>핵심 기능의 성능이나 유효성을 보완</strong></td><td>- 외부 구매 가능성 낮음<br>- 복잡할 수 있으나 전략적 가치 낮음<br>- 위임하거나 내재화 가능</td><td>사용자 관리, 권한 시스템, 알림 처리, 보고서 생성</td></tr><tr><td><strong>Generic Subdomain</strong></td><td><strong>비즈니스와 무관한 공통 인프라 영역</strong>으로 범용적이고 재사용 가능한 부분</td><td>- 상용 솔루션 구매 가능<br>- 직접 구현 비효율적<br>- 비즈니스 경쟁력과 직접 연관 없음</td><td>이메일 발송 시스템, 결제 게이트웨이, 인증 시스템, 로깅, DB 접속 모듈</td></tr></tbody></table><h4 id=바운디드-컨텍스트-간-통합-패턴>바운디드 컨텍스트 간 통합 패턴<a hidden class=anchor aria-hidden=true href=#바운디드-컨텍스트-간-통합-패턴>#</a></h4><pre class=mermaid>graph TD
    subgraph BoundedContextA
        A1[Entity]
        A2[Value Object]
        A3[Aggregate Root]
        A4[Domain Service]
        A5[Repository]
        A6[Domain Event]
        A1 --&gt; A3
        A2 --&gt; A3
        A3 --&gt; A4
        A3 --&gt; A5
        A4 --&gt; A6
    end
    subgraph BoundedContextB
        B1[Entity]
        B2[Value Object]
        B3[Aggregate Root]
        B1 --&gt; B3
        B2 --&gt; B3
    end
    A3 -. Context Map .-&gt; B3
</pre><p><strong>Bounded Context</strong> 간의 관계와 내부 구조를 시각화한 것으로, 각 컨텍스트는 독립적으로 도메인을 모델링하며, 상호 통합 시 <strong>Context Map</strong>을 통해 연결된다.</p><p><strong>Bounded Context A 의 구성</strong>:</p><table><thead><tr><th>요소</th><th>역할 설명</th></tr></thead><tbody><tr><td><strong>Entity (A1)</strong></td><td>고유 식별자를 가진 객체. 도메인 내에서 상태 변화와 생명주기를 가짐</td></tr><tr><td><strong>Value Object (A2)</strong></td><td>값으로만 구분되는 불변 객체 (예: 주소, 통화 등)</td></tr><tr><td><strong>Aggregate Root (A3)</strong></td><td>트랜잭션 및 일관성 경계를 대표하는 루트 엔티티. 외부 접근은 이 루트를 통해서만 가능</td></tr><tr><td><strong>Domain Service (A4)</strong></td><td>특정 엔티티에 속하지 않는 도메인 로직을 캡슐화</td></tr><tr><td><strong>Repository (A5)</strong></td><td>Aggregate 를 저장하고 조회하는 인터페이스. 인프라 추상화 역할</td></tr><tr><td><strong>Domain Event (A6)</strong></td><td>도메인 상태 변화 발생 시 발행되는 이벤트 (예: 주문 생성됨, 결제 완료됨 등)</td></tr></tbody></table><p>→ 각 요소는 다음과 같이 연결된다:</p><ul><li>Entity 와 Value Object 는 Aggregate Root 와 연결.</li><li>Aggregate Root 는 비즈니스 로직 (Domain Service), 영속화 (Repository) 와 연결됨.</li><li>Domain Service 에서 중요한 상태 변화가 발생하면 Domain Event 가 발행됨.</li></ul><p><strong>Bounded Context B 의 구성</strong>:</p><ul><li><strong>Entity (B1)</strong> 와 <strong>Value Object (B2)</strong> 는<br>→ <strong>Aggregate Root (B3)</strong> 아래에서 함께 모델링되어 있음.</li></ul><p>→ 이는 하나의 다른 서브 도메인 또는 마이크로서비스가 독립적으로 설계된 구조를 보여준다.</p><p><strong>Context Map 에 의한 연결</strong></p><ul><li><code>A3 -. Context Map.-> B3</code> 는 <strong>Bounded Context A 의 Aggregate Root 와 B 의 Aggregate Root 가 연결됨</strong>을 의미한다.</li><li>이 연결은 <strong>Context Map</strong>의 일종으로, 다음과 같은 전략들이 있을 수 있다:</li></ul><table><thead><tr><th>맵핑 전략</th><th>설명</th></tr></thead><tbody><tr><td><strong>Shared Kernel</strong></td><td>두 컨텍스트가 일부 공통 모델을 공유함. 협력 필요성 높음</td></tr><tr><td><strong>Customer/Supplier</strong></td><td>한쪽이 주도하고 다른 한쪽이 API 또는 이벤트를 소비</td></tr><tr><td><strong>Conformist</strong></td><td>한쪽이 다른 쪽 모델이나 계약을 그대로 따름</td></tr><tr><td><strong>Anti-Corruption Layer (ACL)</strong></td><td>서로 다른 모델 간 통합 시 번역 계층을 두어 오염 방지</td></tr></tbody></table><p>→ 위 다이어그램에서는 컨텍스트 간 직접 연결된 점선이 있으므로, 일반적으로 <strong>ACL 또는 Conformist</strong> 전략을 사용하는 경우에 해당할 수 있다.</p><h3 id=전술적-설계-tactical-design-2>전술적 설계 (Tactical Design)<a hidden class=anchor aria-hidden=true href=#전술적-설계-tactical-design-2>#</a></h3><p>각 Bounded Context 내부에서 <strong>도메인 모델을 어떻게 설계하고 구현할지에 관한 세부 설계 기법</strong>.</p><p><strong>주요 목적</strong>:</p><ul><li>도메인 모델을 코드로 명확하게 구현</li><li>복잡한 도메인 로직을 모듈화</li><li>시스템 복잡성 감소 및 유지보수성 향상</li></ul><p><strong>핵심 구성요소</strong></p><table><thead><tr><th>구성요소</th><th>설명</th></tr></thead><tbody><tr><td><strong>Entity</strong></td><td>고유 식별자를 가진 객체. 생명주기를 갖고, 상태와 행위 포함</td></tr><tr><td><strong>Value Object</strong></td><td>값으로만 비교되는 불변 객체. 예: Money, Address</td></tr><tr><td><strong>Aggregate</strong></td><td>일관성 경계를 가진 객체의 집합. 루트를 통해 접근</td></tr><tr><td><strong>Domain Service</strong></td><td>특정 Entity 에 속하지 않는 복잡한 도메인 로직 수행</td></tr><tr><td><strong>Domain Event</strong></td><td>도메인에서 발생한 중요한 사건 모델링</td></tr><tr><td><strong>Repository</strong></td><td>Aggregate 의 영속성 처리 인터페이스</td></tr><tr><td><strong>Factory</strong> <em>(선택)</em></td><td>복잡한 객체 생성 로직을 분리하여 표현</td></tr><tr><td><strong>Specification</strong> <em>(선택)</em></td><td>비즈니스 규칙을 조합 가능하고 재사용 가능한 형태로 표현</td></tr></tbody></table><h3 id=domain-driven-design-통합-아키텍처>Domain-Driven Design 통합 아키텍처<a hidden class=anchor aria-hidden=true href=#domain-driven-design-통합-아키텍처>#</a></h3><pre class=mermaid>graph TD
  %% SYSTEM 구성
  A[System] --&gt; B[Subdomains]
  B --&gt; C1[Core Subdomain]
  B --&gt; C2[Supporting Subdomain]
  B --&gt; C3[Generic Subdomain]

  %% Bounded Context와 Subdomain 연결
  C1 --&gt; BC1[Bounded Context A]
  C2 --&gt; BC2[Bounded Context B]
  C3 --&gt; BC3[Bounded Context C]

  %% Context Map 관계
  subgraph ContextMap[Context Map]
    BC1 &lt;--&gt;|Shared Kernel| BC2
    BC2 &lt;--&gt;|Customer-Supplier| BC3
    BC1 -.-&gt;|Anti-Corruption Layer| BC3
  end

  %% Bounded Context A 내부 계층 구조
  subgraph BoundedContextA
    direction TB
    UI[Presentation Layer]
    UI --&gt; App[Application Layer]

    App --&gt; AL1[Application Service]
    AL1 --&gt; DL[Domain Layer]
    DL --&gt; AR[Aggregate Root]
    AR --&gt; E[Entity]
    AR --&gt; V[Value Object]
    DL --&gt; DS[Domain Service]
    DL --&gt; DE[Domain Event]
    DL --&gt; RI[Repository Interface]
    DL --&gt; SP[Specification]
    DL --&gt; F[Factory]

    App --&gt; INF[Infrastructure Layer]
    INF --&gt; RImpl[Repository Implementation]
    INF --&gt; Adapter[&#34;External Adapter (API, Messaging)&#34;]
    INF --&gt; DB[(Database)]
  end

  %% 설명 연결 (선택)
  click ContextMap href &#34;https://martinfowler.com/bliki/ContextMap.html&#34; &#34;Context Map 설명 보기&#34;
  click B href &#34;https://dddcommunity.org/library/&#34; &#34;Subdomain 설명 보기&#34;
</pre><h4 id=domain-driven-design-의-layered-architecture>Domain-Driven Design 의 Layered Architecture<a hidden class=anchor aria-hidden=true href=#domain-driven-design-의-layered-architecture>#</a></h4><p>DDD 는 일반적으로 다음과 같은 4 계층 구조를 따른다:</p><ol><li>프레젠테이션 계층 (Presentation Layer)</li><li>응용 계층 (Application Layer)</li><li>도메인 계층 (Domain Layer)</li><li>인프라스트럭처 계층 (Infrastructure Layer)<br>이 구조를 통해 각 계층은 단일 책임을 가지며, 하위 계층에 대한 의존성만을 가진다.</li></ol><table><thead><tr><th>계층</th><th>구성 요소</th><th>기능 및 역할</th></tr></thead><tbody><tr><td><strong>1. 프레젠테이션 계층</strong> (Presentation Layer)</td><td>- 컨트롤러 (Controller)<br>- 뷰 (View)<br>DTO (Data Transfer Object)</td><td>- 사용자 요청 처리 및 응답 생성<br>- 입력 데이터 유효성 검증<br>- 응용 계층과 인터페이스</td></tr><tr><td><strong>2. 응용 계층</strong> (Application Layer)</td><td>- 응용 서비스 (Application Service)<br>- 명령 핸들러 (Command Handler)<br>- 쿼리 핸들러 (Query Handler)</td><td>- 비즈니스 워크플로 조정<br>- 트랜잭션 경계 정의<br>- 도메인 객체 간 협력 조정</td></tr><tr><td><strong>3. 도메인 계층</strong> (Domain Layer)</td><td><strong>필수:</strong><br>- 엔티티 (Entity)<br>- 밸류 오브젝트 (Value Object)<br>- 애그리거트 (Aggregate)<br>- 도메인 서비스 (Domain Service)<br>- 리포지토리 인터페이스 (Repository Interface)<br><strong>선택:</strong><br>- 도메인 이벤트 (Domain Event)<br>- 팩토리 (Factory)<br>- 명세 (Specification)</td><td>- 핵심 비즈니스 로직 구현<br>- 비즈니스 규칙과 제약 적용<br>- 도메인 지식 표현</td></tr><tr><td><strong>4. 인프라스트럭처 계층</strong> (Infrastructure Layer)</td><td>- 리포지토리 구현체<br>- 외부 서비스 어댑터<br>- 메시징 시스템</td><td>- 기술적 세부 구현<br>- 외부 시스템 연동<br>- 데이터 저장 및 조회</td></tr></tbody></table><h5 id=도메인-계층-domain-layer>도메인 계층 (Domain Layer)<a hidden class=anchor aria-hidden=true href=#도메인-계층-domain-layer>#</a></h5><p><strong>Domain Layer</strong>는 DDD(도메인 주도 설계) 의 아키텍처 계층 중 하나로, <strong>핵심 비즈니스 로직, 규칙, 정책, 제약을 코드로 명시적으로 구현하는 계층</strong>을 의미한다.<br>이 계층은 시스템이 해결하려는 <strong>" 도메인 문제 영역 " 의 본질</strong>을 표현하며, <strong>기술적인 세부사항과는 철저히 분리되어야 한다.</strong></p><p><strong>역할과 특징</strong>:</p><table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>🎯 <strong>비즈니스 중심</strong></td><td>소프트웨어가 해결하려는 핵심 비즈니스 규칙, 상태, 행위를 모델링한다.</td></tr><tr><td>🧩 <strong>전술적 설계 기반</strong></td><td>Entity, Value Object, Aggregate 등 DDD 전술 패턴의 주요 구성요소들이 위치한다.</td></tr><tr><td>📦 <strong>도메인 모델의 집합소</strong></td><td>도메인 모델 (Domain Model) 을 담고 있으며, 도메인의 개념적 구조를 코드로 표현한다.</td></tr><tr><td>💡 <strong>기술 독립성</strong></td><td>영속성 (DB), 메시징, API 등 기술 구현 세부사항에서 완전히 분리되어 있어야 한다.</td></tr><tr><td>🔁 <strong>변화 유연성</strong></td><td>기술이 바뀌더라도 도메인 모델은 최대한 변경되지 않도록 설계된다.</td></tr></tbody></table><p><strong>주요 구성 요소</strong>:</p><table><thead><tr><th>구성 요소</th><th>설명</th><th>특징</th><th>역할</th><th>예시</th></tr></thead><tbody><tr><td><strong>Entity</strong></td><td>고유 식별자 (ID) 를 가진 도메인 객체. 상태와 생명주기를 가지며 변경 가능.</td><td>- ID 기반 동등성<br>- 상태 보존<br>- 생명주기 존재</td><td>- 핵심 비즈니스 객체 표현<br>- 상태 및 행위 관리</td><td><code>User</code>, <code>Order</code>, <code>Account</code></td></tr><tr><td><strong>Value Object</strong></td><td>값 자체로 의미가 있으며 불변성을 가지는 객체. 식별자 없이 모든 속성으로 동등성 판단.</td><td>- 불변 (immutable)<br>- ID 없음<br>- 값 기반 동등성</td><td>- 값 표현<br>- 조합 가능, 테스트 용이</td><td><code>Money</code>, <code>Address</code>, <code>Email</code></td></tr><tr><td><strong>Aggregate</strong></td><td>하나 이상의 Entity/Value Object 를 묶는 일관성 경계. 루트로만 접근 허용.</td><td>- 트랜잭션 일관성 보장<br>- 루트 외부 접근 제한<br>- 복합 도메인 단위</td><td>- 비즈니스 규칙 단위<br>- 내부 일관성 관리<br>- Aggregate Root 제공</td><td><code>Order</code> (루트) + <code>OrderItem</code></td></tr><tr><td><strong>Domain Service</strong></td><td>Entity 나 VO 에 속하지 않는 순수 도메인 로직을 처리하는 무상태 객체.</td><td>- Stateless<br>- 비즈니스 로직 응집<br>- 여러 Aggregate 사용 가능</td><td>- 외부 로직 캡슐화<br>- 복합 연산 수행<br>- 규칙/조건 검증</td><td><code>TransferService</code>, <code>TaxCalculator</code></td></tr><tr><td><strong>Domain Event</strong></td><td>도메인 상태 변화나 의미 있는 사건을 표현하는 불변 객체.</td><td>- 발생 시점 기록<br>- 비동기 처리 용이<br>- 불변 객체</td><td>- 로깅, 통지, 트리거<br>- 이벤트 기반 처리 유도</td><td><code>UserRegisteredEvent</code>, <code>OrderShippedEvent</code></td></tr><tr><td><strong>Repository Interface</strong></td><td>Aggregate 단위로 저장/조회하는 추상화된 영속성 인터페이스.</td><td>- 기술 독립성 유지<br>- 의존 역전<br>- 도메인 계층 분리 가능</td><td>- Aggregate 저장/조회<br>- 도메인 계층 내 기술 분리</td><td><code>OrderRepository</code>, <code>UserRepository</code></td></tr><tr><td><strong>Specification</strong> <em>(선택)</em></td><td>비즈니스 규칙을 명시적 객체로 분리하여 재사용/조합 가능하게 표현.</td><td>- 재사용성<br>- 명세 캡슐화<br>- 조합 가능 (AND/OR 등)</td><td>- 조건 로직 추상화<br>- 복잡한 필터/조건 캡슐화</td><td><code>AvailableProductSpec</code>, <code>CustomerIsVIPSpec</code></td></tr><tr><td><strong>Factory</strong> <em>(선택)</em></td><td>복잡한 객체 생성 로직을 캡슐화하고 생성을 단순화하기 위한 책임 분리 객체.</td><td>- 생성 책임 단일화<br>- 복잡한 생성 절차 추상화<br>- 재사용성 높음</td><td>- 복합 Aggregate/Entity 생성<br>- 객체 생성을 도메인 계층에 포함시키지 않음</td><td><code>OrderFactory</code>, <code>AccountFactory</code></td></tr></tbody></table><h3 id=전략적-설계-strategic-design-vs-전술적-설계-tactical-design>전략적 설계 (Strategic Design) vs. 전술적 설계 (Tactical Design)<a hidden class=anchor aria-hidden=true href=#전략적-설계-strategic-design-vs-전술적-설계-tactical-design>#</a></h3><p><strong>Strategic Design</strong>은 <strong>무엇을 왜 구축할지</strong>에 대한 비즈니스 도메인의 전체적인 구조와 경계를 정의하는 고수준 설계 접근법이며, <strong>Tactical Design</strong>은 <strong>어떻게 구현할지</strong>에 대한 도메인 모델의 구체적인 구현을 위한 저수준 패턴과 기법을 제공한다.</p><ul><li>전략적 설계 (Strategic Design) 를 통해 <strong>무엇을 만들고 누구와 협업할지</strong>를 설계한다.<ul><li><strong>도메인 구조 설계</strong>, <strong>팀/시스템 분할</strong>, <strong>경계 정의</strong>를 통해 시스템의 큰 그림을 설계한다.</li></ul></li><li>전술적 설계 (Tactical Design) 를 통해 <strong>그것을 어떻게 구현할지</strong> 를 구체화해야 한다.<ul><li>각 경계 내에서 <strong>도메인 모델을 구현</strong>하고, <strong>객체지향 패턴</strong>을 적용하여 <strong>비즈니스 로직</strong>을 실제 코드로 옮긴다.</li></ul></li><li><strong>Context Map 과 Ubiquitous Language 는 전략적 + 전술적 설계 사이의 연결 고리</strong> 역할을 한다.</li></ul><h4 id=ddd-설계-접근-방식-비교>DDD 설계 접근 방식 비교<a hidden class=anchor aria-hidden=true href=#ddd-설계-접근-방식-비교>#</a></h4><table><thead><tr><th>구분</th><th><strong>Strategic Design (전략적 설계)</strong></th><th><strong>Tactical Design (전술적 설계)</strong></th></tr></thead><tbody><tr><td><strong>핵심 질문</strong></td><td>무엇을 만들 것인가? 왜 존재하는가?</td><td>어떻게 만들 것인가? 어떤 구조로 구현할 것인가?</td></tr><tr><td><strong>목적</strong></td><td>도메인 경계 정의 및 팀 간 협업 기반 수립</td><td>도메인 모델의 구현 및 내부 설계</td></tr><tr><td><strong>적용 시점</strong></td><td>프로젝트 초기 (기획/분석/설계 단계)</td><td>개발 및 구현 단계</td></tr><tr><td><strong>적용 대상 범위</strong></td><td>전체 시스템, 다중 도메인 및 컨텍스트</td><td>단일 Bounded Context 내부</td></tr><tr><td><strong>참여자</strong></td><td>도메인 전문가, 아키텍트, 비즈니스 분석가</td><td>개발자, 소프트웨어 엔지니어</td></tr><tr><td><strong>주요 산출물</strong></td><td>- Subdomain 분리<br>- Bounded Context 정의<br>- Context Map<br>- 공유 언어 (Ubiquitous Language)</td><td>- Aggregate, Entity, Value Object<br>- Repository, Factory, Service<br>- 도메인 코드와 테스트</td></tr><tr><td><strong>추상화 수준</strong></td><td>고수준 (High-level 구조 설계)</td><td>저수준 (Low-level 객체 설계 및 구현)</td></tr><tr><td><strong>설계 관점</strong></td><td>조직 및 아키텍처 구조 중심</td><td>코드와 구현 중심</td></tr><tr><td><strong>주요 기법</strong></td><td>- Event Storming<br>- Domain Storytelling<br>- Context Mapping</td><td>- 객체지향 모델링<br>- DDD 빌딩 블록 (Entity, VO 등)<br>- 디자인 패턴 적용</td></tr><tr><td><strong>사용 도구</strong></td><td>화이트보드, 협업 도구, 모델링 툴 (Miro, Lucidchart 등)</td><td>IDE, 테스트 프레임워크, UML 도구</td></tr><tr><td><strong>장점</strong></td><td>- 도메인 중심의 명확한 시스템 구조<br>- 팀 협업 기반 강화<br>- 비즈니스 전략과 시스템 일치</td><td>- 도메인 로직의 일관성 유지<br>- 코드 품질 향상<br>- 유지보수 용이성</td></tr><tr><td><strong>단점</strong></td><td>- 초기 비용과 시간 소요 큼<br>- 협업 부족 시 실패 가능성</td><td>- 도메인 경계 불명확 시 코드 중복, 품질 저하</td></tr><tr><td><strong>대표 개체</strong></td><td>- Subdomain<br>- Bounded Context<br>- Context Map<br>- Ubiquitous Language</td><td>- Entity<br>- Value Object<br>- Aggregate<br>- Repository<br>- Domain Service</td></tr><tr><td><strong>도전 과제</strong></td><td>- 팀 간 경계 협의<br>- 복잡한 도메인의 모듈화<br>- 레거시 통합</td><td>- 설계와 구현의 정합성 유지<br>- 복잡한 도메인 모델링<br>- 테스트 자동화</td></tr><tr><td><strong>반복 주기</strong></td><td>장기적 (월, 분기 단위 구조 조정)</td><td>단기적 (일, 주 단위 개발 반복)</td></tr><tr><td><strong>핵심 원칙</strong></td><td>- 도메인 중심 사고<br>- 명확한 경계<br>- 모듈화와 분리</td><td>- 모델 불변성<br>- 패턴 기반 구현<br>- 테스트 용이성</td></tr></tbody></table><h4 id=강점과-약점>강점과 약점<a hidden class=anchor aria-hidden=true href=#강점과-약점>#</a></h4><h5 id=강점>강점<a hidden class=anchor aria-hidden=true href=#강점>#</a></h5><table><thead><tr><th>관점</th><th>Strategic Design</th><th>Tactical Design</th></tr></thead><tbody><tr><td>비즈니스 정렬</td><td>비즈니스 요구사항과 높은 정렬성</td><td>명확한 비즈니스 로직 표현</td></tr><tr><td>팀 협업</td><td>팀 간 명확한 경계 설정, 자율성 확보</td><td>개발자 간 코드 구조 일관성 유지</td></tr><tr><td>유지보수성</td><td>장기적으로 안정적인 아키텍처 설계 가능</td><td>코드 품질 향상, 테스트 용이성, 재사용 가능한 도메인 모델 구성</td></tr><tr><td>확장성</td><td>도메인 중심 시스템 확장 시 경계 기반 설계 가능</td><td>모듈화된 구조로 유연한 기능 추가 및 변경 용이</td></tr><tr><td>시스템 구조</td><td>전체 시스템의 큰 그림 설계에 유리</td><td>실제 코드와 동작 구현에 직접적으로 연결되는 모델링 수행 가능</td></tr></tbody></table><h5 id=약점>약점<a hidden class=anchor aria-hidden=true href=#약점>#</a></h5><table><thead><tr><th>관점</th><th>Strategic Design</th><th>Tactical Design</th></tr></thead><tbody><tr><td>초기 비용</td><td>높은 진입 장벽, 도입 초기에 많은 분석 시간 소요</td><td>패턴 이해 및 적용에 학습 비용 존재</td></tr><tr><td>도메인 정렬</td><td>도메인 전문가의 참여 없이는 의미 있는 모델 정립 어려움</td><td>전체적인 맥락 없이 세부 구현만 집중할 경우 설계 왜곡 가능</td></tr><tr><td>협업 이슈</td><td>분석이 늦어지거나 의사결정 지연 발생 가능</td><td>컨텍스트 간 일관성 유지가 어려울 수 있음</td></tr><tr><td>복잡도 관리</td><td>경계를 지나치게 나누면 조직 내 협업 복잡도 증가 가능</td><td>과도한 전술적 패턴 적용 시 오히려 시스템 복잡도 증가 가능</td></tr><tr><td>유지보수 위험성</td><td>변경 시 연쇄적인 설계 영향 범위가 넓어질 수 있음</td><td>경계 무시하거나 패턴 오용 시 설계 일관성 및 유지보수성 저하 가능성 존재</td></tr></tbody></table><h4 id=시각적-개요-흐름>시각적 개요 흐름<a hidden class=anchor aria-hidden=true href=#시각적-개요-흐름>#</a></h4><pre class=mermaid>graph TD
  A[Strategic Design] --&gt; B[Subdomain 분석]
  B --&gt; C[Bounded Context 정의]
  C --&gt; D[Context Map 설계]
  D --&gt; E[Ubiquitous Language 정립]
  E --&gt; F[Tactical Design 진입]
  F --&gt; G[Entity/VO/Aggregate 설계]
  G --&gt; H[Repository/Service 적용]
  H --&gt; I[테스트 및 구현 반복]
</pre><h3 id=ddd-strategic--tactical-설계>DDD Strategic ↔ Tactical 설계<a hidden class=anchor aria-hidden=true href=#ddd-strategic--tactical-설계>#</a></h3><p>도메인 주도 설계 (DDD) 에서 전략적 설계와 전술적 설계 간의 복잡하고 상호의존적인 관계를 체계적으로 나타낸다.</p><p>다이어그램의 최상단에서 시작하는 비즈니스 도메인은 전략적 설계의 출발점이 되며, 여기서 핵심 도메인, 지원 도메인, 일반 도메인으로 세분화된 서브도메인들이 식별된다. 이러한 서브도메인들은 경계 컨텍스트로 구체화되며, 각 컨텍스트는 고유한 유비쿼터스 언어를 통해 일관된 모델을 형성한다. 컨텍스트 맵은 이러한 경계 컨텍스트들 간의 관계와 통합 패턴을 명시적으로 정의한다.</p><p>전략적 설계에서 정의된 경계 컨텍스트는 전술적 설계의 핵심 진입점이 된다. 전술적 설계에서는 애그리게이트 루트가 중심적 역할을 수행하며, 이를 통해 엔티티, 값 객체, 도메인 이벤트들이 일관성 있게 관리된다. 애그리게이트 외부에는 도메인 서비스, 저장소 인터페이스, 팩토리, 모듈, 명세 패턴 등이 위치하여 애그리게이트와 협력한다.</p><p>구현 과정에서 발견되는 모델의 복잡성이나 한계는 다시 경계 컨텍스트의 재정의나 유비쿼터스 언어의 정제로 이어진다. 이러한 반복적 개선 과정은 DDD 의 핵심 철학인 지속적인 학습과 진화를 구현한다.</p><p>구현 계층에서는 헥사고날 아키텍처 원칙에 따라 REST API/UI, 애플리케이션 계층, 도메인 모델 계층, 인프라스트럭처 계층이 명확히 분리된다. 도메인 모델 계층은 전술적 설계의 핵심 요소들을 포함하며, 애플리케이션 계층은 저장소 인터페이스를 통해 도메인과 인프라스트럭처를 연결한다.</p><p>컨텍스트 간 통합은 다양한 패턴을 통해 이루어지며, 도메인 이벤트는 컨텍스트 간 비동기 통신의 핵심 메커니즘으로 작동한다. 이를 통해 각 컨텍스트의 독립성을 유지하면서도 필요한 협력을 가능하게 한다.</p><pre class=mermaid>graph TD
    %% 전략적 설계
    A[📌 비즈니스 도메인] --&gt; B[&#34;🧠 전략적 설계 (Strategic Design)&#34;]
    B --&gt; C1[📂 Core/Supporting/Generic Subdomains]
    B --&gt; C2[🔲 Bounded Contexts]
    B --&gt; C3[🗺️ Context Map]
    B --&gt; C4[🗣️ Ubiquitous Language]
    
    %% Strategic에서 Tactical로의 연결
    C2 --&gt; D[&#34;🔧 전술적 설계 (Tactical Design)&#34;]
    C4 -.-&gt; D
    
    %% Tactical Design - Aggregate 중심 구조
    D --&gt; E1[🧱 Aggregate Root]
    E1 --&gt; E2[🧩 Entity]
    E1 --&gt; E3[📦 Value Object]
    E1 --&gt; E6[🧨 Domain Event]
    
    %% Aggregate 외부 패턴들
    D --&gt; E4[⚙️ Domain Service]
    D --&gt; E5[📂 Repository Interface]
    D --&gt; E7[🏭 Factory]
    D --&gt; E8[📁 Module]
    D --&gt; E9[📐 Specification]
    
    %% Repository 관계
    E5 -.-&gt; E1
    E7 -.-&gt; E1
    
    %% Context 간 관계
    C2 --&gt;|Integration Patterns| F1[🔁 ACL / OHS / Conformist]
    C2 --&gt;|Partnership/Customer-Supplier| F2[⬆️⬇️ Context Relations]
    
    %% 구현 계층 구조 (Hexagonal Architecture)
    subgraph &#34;Implementation Layers&#34;
        REST[🌐 REST API / UI]
        APP[📱 Application Layer]
        DOM[🏗️ Domain Model Layer]
        INFRA[💽 Infrastructure Layer]
    end
    
    %% 계층 간 관계
    REST --&gt; APP
    APP --&gt; DOM
    APP --&gt; E5
    INFRA --&gt; E5
    
    %% Domain Model 내부 구조
    DOM --&gt; E1
    DOM --&gt; E4
    DOM --&gt; E8
    
    %% 피드백 루프 (중요!)
    D -.-&gt;|&#34;모델 개선 피드백&#34;| C2
    D -.-&gt;|&#34;언어 정제 피드백&#34;| C4
    
    %% 이벤트 기반 통합
    E6 -.-&gt;|&#34;Context 간 통신&#34;| F1
    
    %% 스타일링
    classDef strategic fill:#e1f5fe
    classDef tactical fill:#f3e5f5
    classDef implementation fill:#e8f5e8
    classDef integration fill:#fff3e0
    
    class A,B,C1,C2,C3,C4 strategic
    class D,E1,E2,E3,E4,E5,E6,E7,E8,E9 tactical
    class REST,APP,DOM,INFRA implementation
    class F1,F2 integration
</pre><h4 id=strategic-design-구성-요소>Strategic Design 구성 요소<a hidden class=anchor aria-hidden=true href=#strategic-design-구성-요소>#</a></h4><table><thead><tr><th>구성 요소</th><th>영문명</th><th>역할 및 목적</th><th>주요 특징</th><th>산출물</th></tr></thead><tbody><tr><td><strong>하위 도메인</strong></td><td>Core/Supporting/Generic Subdomains</td><td>비즈니스 도메인을 복잡성과 전략적 중요도에 따라 분류</td><td>• Core: 핵심 경쟁력<br>• Supporting: 지원 기능<br>• Generic: 범용 기능</td><td>도메인 분류 매트릭스</td></tr><tr><td><strong>경계 컨텍스트</strong></td><td>Bounded Contexts</td><td>특정 도메인 모델이 유효한 명확한 경계 설정</td><td>• 모델 일관성 보장<br>• 팀 자율성 확보<br>• 기술 스택 독립성</td><td>Context 경계 정의서</td></tr><tr><td><strong>컨텍스트 맵</strong></td><td>Context Map</td><td>Bounded Context 간의 관계와 통합 방식 정의</td><td>• 의존성 관계 시각화<br>• 통합 패턴 명시<br>• 팀 간 협업 구조</td><td>Context Map 다이어그램</td></tr><tr><td><strong>유비쿼터스 언어</strong></td><td>Ubiquitous Language</td><td>도메인 전문가와 개발팀이 공유하는 공통 용어체계</td><td>• 의사소통 명확화<br>• 코드 - 비즈니스 정렬<br>• 지속적 진화</td><td>용어 사전, 도메인 모델</td></tr></tbody></table><h4 id=tactical-design-구성-요소>Tactical Design 구성 요소<a hidden class=anchor aria-hidden=true href=#tactical-design-구성-요소>#</a></h4><table><thead><tr><th>구성 요소</th><th>영문명</th><th>역할 및 목적</th><th>관계성</th><th>구현 특징</th></tr></thead><tbody><tr><td><strong>집합체 루트</strong></td><td>Aggregate Root</td><td>집합체의 진입점이며 데이터 일관성의 경계</td><td>다른 모든 tactical 요소의 중심</td><td>• 고유 식별자<br>• 불변식 보장<br>• 트랜잭션 경계</td></tr><tr><td><strong>엔티티</strong></td><td>Entity</td><td>고유한 식별자를 가진 도메인 객체</td><td>Aggregate 내부에 포함</td><td>• 생명주기 관리<br>• 상태 변화 추적<br>• 비즈니스 행동 캡슐화</td></tr><tr><td><strong>값 객체</strong></td><td>Value Object</td><td>식별자 없이 값으로만 정의되는 불변 객체</td><td>Aggregate 내부에 포함</td><td>• 불변성<br>• 값 기반 동등성<br>• 도메인 개념 명시화</td></tr><tr><td><strong>도메인 서비스</strong></td><td>Domain Service</td><td>여러 도메인 객체에 걸친 비즈니스 로직</td><td>Aggregate 를 조작</td><td>• 무상태성<br>• 복잡한 비즈니스 규칙<br>• 도메인 로직 집중</td></tr><tr><td><strong>저장소</strong></td><td>Repository</td><td>도메인 객체의 저장 및 조회 인터페이스</td><td>Aggregate Root 와 1:1 대응</td><td>• 컬렉션 유사 인터페이스<br>• 인프라 추상화<br>• 도메인 중심 설계</td></tr><tr><td><strong>팩토리</strong></td><td>Factory</td><td>복잡한 객체 생성 로직 캡슐화</td><td>Aggregate 생성 담당</td><td>• 생성 복잡성 숨김<br>• 불변식 보장<br>• 생성 로직 집중화</td></tr><tr><td><strong>도메인 이벤트</strong></td><td>Domain Event</td><td>도메인에서 발생한 중요한 비즈니스 사건</td><td>Aggregate 에서 발행</td><td>• 비동기 처리<br>• 시스템 간 결합도 감소<br>• 이벤트 기반 아키텍처</td></tr><tr><td><strong>모듈</strong></td><td>Module</td><td>관련된 도메인 개념들의 논리적 그룹화</td><td>여러 Aggregate 포함</td><td>• 코드 구조화<br>• 네비게이션 개선<br>• 관심사 분리</td></tr><tr><td><strong>명세</strong></td><td>Specification</td><td>복잡한 비즈니스 규칙을 객체로 표현</td><td>도메인 서비스에서 활용</td><td>• 규칙 재사용성<br>• 조합 가능성<br>• 테스트 용이성</td></tr></tbody></table><h5 id=tactical-design-관계-구조>Tactical Design 관계 구조<a hidden class=anchor aria-hidden=true href=#tactical-design-관계-구조>#</a></h5><p><strong>Aggregate 중심 구조</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Aggregate Root (중심)
</span></span><span class=line><span class=cl>├── Entity (포함)
</span></span><span class=line><span class=cl>├── Value Object (포함)
</span></span><span class=line><span class=cl>└── Domain Event (발행)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>외부 지원:
</span></span><span class=line><span class=cl>├── Repository (저장/조회)
</span></span><span class=line><span class=cl>├── Factory (생성)
</span></span><span class=line><span class=cl>├── Domain Service (조작)
</span></span><span class=line><span class=cl>└── Specification (규칙 검증)
</span></span></code></pre></td></tr></table></div></div><p><strong>계층별 책임 분할</strong>:</p><table><thead><tr><th>계층</th><th>포함 요소</th><th>주요 책임</th></tr></thead><tbody><tr><td><strong>도메인 모델 계층</strong></td><td>Aggregate, Entity, Value Object, Domain Event</td><td>순수 비즈니스 로직</td></tr><tr><td><strong>도메인 서비스 계층</strong></td><td>Domain Service, Specification</td><td>복잡한 도메인 연산</td></tr><tr><td><strong>애플리케이션 계층</strong></td><td>Repository Interface 사용</td><td>유스케이스 조정</td></tr><tr><td><strong>인프라스트럭처 계층</strong></td><td>Repository Implementation</td><td>기술적 구현</td></tr></tbody></table><pre class=mermaid>graph LR
    subgraph &#34;Aggregate Boundary&#34;
        AR[Aggregate Root]
        E[Entity]
        VO[Value Object]
        DE[Domain Event]
    end
    
    subgraph &#34;Supporting Patterns&#34;
        DS[Domain Service]
        R[Repository]
        F[Factory]
        S[Specification]
    end
    
    AR --&gt; E
    AR --&gt; VO
    AR --&gt; DE
    DS -.-&gt; AR
    R -.-&gt; AR
    F -.-&gt; AR
    S -.-&gt; AR
</pre><h3 id=strategic-tactical-상호작용-메커니즘>Strategic-Tactical 상호작용 메커니즘<a hidden class=anchor aria-hidden=true href=#strategic-tactical-상호작용-메커니즘>#</a></h3><p>도메인 주도 설계 (DDD) 에서 Strategic Design 과 Tactical Design 의 관계는 서로 얽혀있으면서 지속적으로 상호작용하며 진화하는 구조이다.<br>전략적 설계부터 시작하여 전술적 설계를 따르며, 가장 큰 도메인 모델 설계의 깨달음과 돌파구는 전술적 설계 중에 일어날 가능성이 높고, 이는 다시 전략적 설계에 영향을 미치므로 이 과정을 반복한다.</p><h4 id=하향식-영향-strategic--tactical>하향식 영향 (Strategic → Tactical)<a hidden class=anchor aria-hidden=true href=#하향식-영향-strategic--tactical>#</a></h4><p>Strategic Design 에서 Tactical Design 으로의 정보 흐름은 <strong>변환 (Translation)</strong> 과정을 통해 이루어진다. Strategic Design 에서 Tactical Design 으로의 변환은 추상적인 비즈니스 개념을 구체적인 코드 구조로 번역하는 핵심 과정이다.</p><p><strong>구체적 변환 매핑</strong>:</p><table><thead><tr><th>Strategic 요소</th><th>Tactical 영향</th><th>구체적 변환</th></tr></thead><tbody><tr><td>Subdomain 분류</td><td>Aggregate 우선순위</td><td>Core Domain 의 Aggregate 는 더 정교한 모델링</td></tr><tr><td>Bounded Context</td><td>Module 구조</td><td>하나의 Context = 하나의 Module 그룹</td></tr><tr><td>Ubiquitous Language</td><td>클래스/메서드 명명</td><td>도메인 용어가 직접 코드에 반영</td></tr><tr><td>Context Map</td><td>Integration Event</td><td>Context 간 통신을 위한 Domain Event 설계</td></tr></tbody></table><p>도메인 모델의 각 Bounded Context 에 대해 도메인을 모델링하는 엔티티, 값 객체 및 집합체를 식별하고 정의한다. 컨텍스트를 정의하는 경계 내에 포함된 도메인 모델을 구축하고 개선한다.</p><h5 id=단계별-변환-과정>단계별 변환 과정<a hidden class=anchor aria-hidden=true href=#단계별-변환-과정>#</a></h5><p><strong>변환 단계:</strong></p><ol><li><strong>도메인 탐색</strong> → <strong>Bounded Context 식별</strong> → <strong>Aggregate 후보 발견</strong></li><li><strong>Ubiquitous Language</strong> → <strong>Entity/Value Object 명명</strong> → <strong>메서드 시그니처 정의</strong></li><li><strong>Context Map</strong> → <strong>Integration Pattern</strong> → <strong>Domain Event 설계</strong></li><li><strong>Subdomain 분류</strong> → <strong>Module 구조</strong> → <strong>Package/Namespace 조직화</strong></li></ol><h6 id=1-단계-도메인-탐색--bounded-context-식별--aggregate-후보-발견>1 단계: 도메인 탐색 → Bounded Context 식별 → Aggregate 후보 발견<a hidden class=anchor aria-hidden=true href=#1-단계-도메인-탐색--bounded-context-식별--aggregate-후보-발견>#</a></h6><p><strong>무엇을 만들 것인가?</strong> 에서 <strong>어떻게 나눌 것인가?</strong> 로의 변환</p><p><strong>핵심 활동</strong>:</p><ul><li><strong>도메인 탐색 (Domain Exploration)</strong>: 비즈니스 프로세스와 규칙 이해</li><li><strong>Bounded Context 식별</strong>: 일관된 모델 경계 정의</li><li><strong>Aggregate 후보 발견</strong>: 트랜잭션 일관성 단위 식별</li></ul><p><strong>입력물 (Input)</strong></p><table><thead><tr><th>항목</th><th>설명</th><th>예시</th></tr></thead><tbody><tr><td>비즈니스 요구사항</td><td>도메인 전문가가 정의한 핵심 기능</td><td>" 고객이 상품을 주문하고 결제한다 "</td></tr><tr><td>도메인 지식</td><td>업무 프로세스와 비즈니스 규칙</td><td>" 재고가 없으면 주문할 수 없다 "</td></tr><tr><td>이해관계자 인터뷰</td><td>각 영역별 전문가 의견</td><td>주문팀, 배송팀, 결제팀 인터뷰</td></tr></tbody></table><p><strong>출력물 (Output)</strong></p><table><thead><tr><th>항목</th><th>설명</th><th>예시</th></tr></thead><tbody><tr><td>Bounded Context Map</td><td>컨텍스트 간 관계도</td><td>Order ↔ Payment ↔ Shipping</td></tr><tr><td>Aggregate 후보 목록</td><td>일관성 경계별 객체 그룹</td><td>Order(OrderItem, Address), Product(Category, Price)</td></tr><tr><td>Context 책임 정의</td><td>각 컨텍스트의 역할과 범위</td><td>Order Context: 주문 생성/수정/취소 담당</td></tr></tbody></table><p><strong>핵심 의사결정</strong>:</p><ul><li><strong>컨텍스트 경계</strong>: 어디서 모델을 분리할 것인가?</li><li><strong>Aggregate 크기</strong>: 어떤 객체들을 함께 묶을 것인가?</li><li><strong>일관성 요구사항</strong>: 어떤 데이터가 함께 변경되어야 하는가?</li></ul><h6 id=2-단계-ubiquitous-language--entityvalue-object-명명--메서드-시그니처-정의>2 단계: Ubiquitous Language → Entity/Value Object 명명 → 메서드 시그니처 정의<a hidden class=anchor aria-hidden=true href=#2-단계-ubiquitous-language--entityvalue-object-명명--메서드-시그니처-정의>#</a></h6><p><strong>비즈니스 용어</strong>를 <strong>코드 요소</strong>로 직접 번역하는 단계</p><p><strong>핵심 활동</strong>:</p><ul><li><strong>Ubiquitous Language 적용</strong>: 비즈니스 용어를 클래스/메서드명으로 변환</li><li><strong>Entity/Value Object 구분</strong>: 식별자 유무에 따른 객체 분류</li><li><strong>메서드 시그니처 정의</strong>: 비즈니스 행동을 메서드로 구체화</li></ul><p><strong>입력물 (Input)</strong>:</p><table><thead><tr><th>항목</th><th>설명</th><th>예시</th></tr></thead><tbody><tr><td>비즈니스 용어집</td><td>도메인에서 사용하는 핵심 용어</td><td>" 주문 취소 &ldquo;, " 배송 시작 &ldquo;, " 결제 승인 "</td></tr><tr><td>비즈니스 규칙</td><td>도메인의 제약사항과 정책</td><td>" 결제 후에만 배송 가능 "</td></tr><tr><td>워크플로우</td><td>업무 처리 흐름</td><td>주문 → 결제 → 배송 → 완료</td></tr></tbody></table><p><strong>출력물 (Output)</strong>:</p><table><thead><tr><th>항목</th><th>설명</th><th>예시</th></tr></thead><tbody><tr><td>Entity 클래스 설계</td><td>식별자를 가진 도메인 객체</td><td><code>class Order { void cancel(CancellationReason) }</code></td></tr><tr><td>Value Object 설계</td><td>불변 값 객체</td><td><code>class Money { Money add(Money other) }</code></td></tr><tr><td>메서드 시그니처</td><td>비즈니스 행동의 구체적 표현</td><td><code>PaymentResult approve(Amount, PaymentMethod)</code></td></tr></tbody></table><p><strong>핵심 의사결정</strong>:</p><ul><li><strong>Entity vs Value Object</strong>: 식별자가 필요한가?</li><li><strong>메서드 명명</strong>: 비즈니스 용어를 어떻게 반영할 것인가?</li><li><strong>매개변수 설계</strong>: 어떤 정보가 필요한가?</li></ul><h6 id=3-단계-context-map--integration-pattern--domain-event-설계>3 단계: Context Map → Integration Pattern → Domain Event 설계<a hidden class=anchor aria-hidden=true href=#3-단계-context-map--integration-pattern--domain-event-설계>#</a></h6><p><strong>컨텍스트 간 관계</strong>를 <strong>구체적 통합 메커니즘</strong>으로 변환하는 단계</p><p><strong>핵심 활동</strong>:</p><ul><li><strong>Context Map 해석</strong>: 컨텍스트 간 관계 분석</li><li><strong>Integration Pattern 선택</strong>: 적절한 통합 방식 결정</li><li><strong>Domain Event 설계</strong>: 비동기 통신 이벤트 정의</li></ul><p><strong>입력물 (Input)</strong>:</p><table><thead><tr><th>항목</th><th>설명</th><th>예시</th></tr></thead><tbody><tr><td>Context Map</td><td>컨텍스트 간 관계도</td><td>Order → Payment (Customer/Supplier)</td></tr><tr><td>데이터 흐름 요구사항</td><td>컨텍스트 간 정보 교환 필요성</td><td>주문 생성 시 결제 서비스 호출</td></tr><tr><td>성능/확장성 요구사항</td><td>비기능적 요구사항</td><td>주문 처리량: 1000 건/분</td></tr></tbody></table><p><strong>출력물 (Output)</strong>:</p><table><thead><tr><th>항목</th><th>설명</th><th>예시</th></tr></thead><tbody><tr><td>Integration Pattern</td><td>컨텍스트 통합 방식</td><td>Anti-Corruption Layer, Domain Events</td></tr><tr><td>Domain Event 명세</td><td>비즈니스 이벤트 정의</td><td><code>OrderPlacedEvent</code>, <code>PaymentCompletedEvent</code></td></tr><tr><td>API 인터페이스</td><td>동기 통합을 위한 인터페이스</td><td><code>PaymentService.processPayment()</code></td></tr></tbody></table><p><strong>핵심 의사결정</strong>:</p><ul><li><strong>동기 vs 비동기</strong>: 실시간 응답이 필요한가?</li><li><strong>강결합 vs 약결합</strong>: 컨텍스트 독립성이 중요한가?</li><li><strong>일관성 수준</strong>: 즉시 일관성 vs 최종 일관성</li></ul><h6 id=4-단계-subdomain-분류--module-구조--packagenamespace-조직화>4 단계: Subdomain 분류 → Module 구조 → Package/Namespace 조직화<a hidden class=anchor aria-hidden=true href=#4-단계-subdomain-분류--module-구조--packagenamespace-조직화>#</a></h6><p><strong>도메인 분류</strong>를 <strong>물리적 코드 구조</strong>로 변환하는 최종 단계</p><p><strong>핵심 활동</strong>:</p><ul><li><strong>Subdomain 분류 적용</strong>: Core/Supporting/Generic 우선순위 반영</li><li><strong>Module 구조 설계</strong>: 패키지/네임스페이스 조직화</li><li><strong>코드 구조 정의</strong>: 디렉터리 및 파일 구조 결정</li></ul><p><strong>입력물 (Input)</strong>:</p><table><thead><tr><th>항목</th><th>설명</th><th>예시</th></tr></thead><tbody><tr><td>Subdomain 분류</td><td>비즈니스 우선순위 분류</td><td>Core: Order, Supporting: Customer, Generic: Payment</td></tr><tr><td>아키텍처 제약사항</td><td>기술적 제약과 표준</td><td>Java 패키지 명명 규칙</td></tr><tr><td>팀 구조</td><td>개발팀 조직과 책임</td><td>Order 팀, Payment 팀</td></tr></tbody></table><p><strong>출력물 (Output)</strong>:</p><table><thead><tr><th>항목</th><th>설명</th><th>예시</th></tr></thead><tbody><tr><td>Package 구조</td><td>코드 조직화 방식</td><td><code>com.company.order.domain</code></td></tr><tr><td>Module 의존성</td><td>모듈 간 관계 정의</td><td>Order → Customer (readonly)</td></tr><tr><td>배포 단위</td><td>물리적 배포 구조</td><td>JAR, Docker Container</td></tr></tbody></table><p><strong>조직화 원칙</strong>:</p><ol><li><strong>도메인 우선</strong>: 기술 레이어보다 도메인 개념으로 그룹화</li><li><strong>응집성</strong>: 함께 변경되는 코드를 함께 배치</li><li><strong>낮은 결합도</strong>: 모듈 간 의존성 최소화</li></ol><h5 id=단계별-변환-과정-예시-전자상거래-도메인-분석>단계별 변환 과정 예시: 전자상거래 도메인 분석<a hidden class=anchor aria-hidden=true href=#단계별-변환-과정-예시-전자상거래-도메인-분석>#</a></h5><p><strong>변환 단계:</strong></p><ol><li><strong>도메인 탐색</strong> → <strong>Bounded Context 식별</strong> → <strong>Aggregate 후보 발견</strong></li><li><strong>Ubiquitous Language</strong> → <strong>Entity/Value Object 명명</strong> → <strong>메서드 시그니처 정의</strong></li><li><strong>Context Map</strong> → <strong>Integration Pattern</strong> → <strong>Domain Event 설계</strong></li><li><strong>Subdomain 분류</strong> → <strong>Module 구조</strong> → <strong>Package/Namespace 조직화</strong></li></ol><h6 id=1-단계-도메인-탐색--bounded-context-식별--aggregate-후보-발견-1>1 단계: 도메인 탐색 → Bounded Context 식별 → Aggregate 후보 발견<a hidden class=anchor aria-hidden=true href=#1-단계-도메인-탐색--bounded-context-식별--aggregate-후보-발견-1>#</a></h6><p><strong>핵심 활동</strong>:</p><ul><li><strong>도메인 탐색 (Domain Exploration)</strong>: 비즈니스 프로세스와 규칙 이해</li><li><strong>Bounded Context 식별</strong>: 일관된 모델 경계 정의</li><li><strong>Aggregate 후보 발견</strong>: 트랜잭션 일관성 단위 식별</li></ul><p><strong>도메인 탐색 결과:</strong><br>- <strong>핵심 비즈니스 프로세스</strong>: 상품 진열 → 장바구니 → 주문 → 결제 → 배송<br>- <strong>도메인 전문가 식별</strong>: 상품 관리자, 주문 관리자, 배송 담당자, 고객 서비스</p><p><strong>Bounded Context 식별:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1>1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2>2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3>3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4>4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5>5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6>6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>E-commerce Domain
</span></span><span class=line><span class=cl>├── Product Catalog Context (상품 카탈로그)
</span></span><span class=line><span class=cl>├── Shopping Cart Context (장바구니)  
</span></span><span class=line><span class=cl>├── Order Management Context (주문 관리)
</span></span><span class=line><span class=cl>├── Payment Context (결제)
</span></span><span class=line><span class=cl>├── Shipping Context (배송)
</span></span><span class=line><span class=cl>└── Customer Context (고객 관리)
</span></span></code></pre></td></tr></table></div></div><p><strong>Aggregate 후보 발견:</strong></p><table><thead><tr><th>Bounded Context</th><th>Aggregate Root</th><th>포함 Entity/Value Object</th></tr></thead><tbody><tr><td>Product Catalog</td><td>Product</td><td>Category, Price, ProductImage</td></tr><tr><td>Shopping Cart</td><td>Cart</td><td>CartItem, Money</td></tr><tr><td>Order Management</td><td>Order</td><td>OrderItem, ShippingAddress, BillingAddress</td></tr><tr><td>Payment</td><td>Payment</td><td>PaymentMethod, Money, TransactionResult</td></tr><tr><td>Shipping</td><td>Shipment</td><td>TrackingNumber, DeliveryAddress</td></tr></tbody></table><h6 id=2-단계-ubiquitous-language--entityvalue-object-명명--메서드-시그니처-정의-1>2 단계: Ubiquitous Language → Entity/Value Object 명명 → 메서드 시그니처 정의<a hidden class=anchor aria-hidden=true href=#2-단계-ubiquitous-language--entityvalue-object-명명--메서드-시그니처-정의-1>#</a></h6><p><strong>핵심 활동</strong>:</p><ul><li><strong>Ubiquitous Language 적용</strong>: 비즈니스 용어를 클래스/메서드명으로 변환</li><li><strong>Entity/Value Object 구분</strong>: 식별자 유무에 따른 객체 분류</li><li><strong>메서드 시그니처 정의</strong>: 비즈니스 행동을 메서드로 구체화</li></ul><p><strong>언어 구체화 실무 예시</strong>:</p><ul><li><strong>비즈니스 용어 → 도메인 객체 변환:</strong></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1>1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2>2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3>3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4>4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5>5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6>6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7>7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8>8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>비즈니스 용어          → Entity/Value Object     → 메서드 시그니처
</span></span><span class=line><span class=cl>─────────────────────────────────────────────────────────────
</span></span><span class=line><span class=cl>&#34;상품을 장바구니에 담기&#34;  → Cart.addProduct()      → void addProduct(ProductId, Quantity)
</span></span><span class=line><span class=cl>&#34;주문 취소&#34;           → Order.cancel()         → OrderResult cancel(CancellationReason)
</span></span><span class=line><span class=cl>&#34;배송 시작&#34;           → Shipment.start()       → void start(DeliveryAddress, EstimatedDate)
</span></span><span class=line><span class=cl>&#34;결제 승인&#34;           → Payment.approve()      → PaymentResult approve(Amount, PaymentMethod)
</span></span><span class=line><span class=cl>&#34;재고 확인&#34;           → Product.checkStock()   → StockLevel checkStock(Quantity)
</span></span><span class=line><span class=cl>&#34;할인 적용&#34;           → Cart.applyDiscount()   → Money applyDiscount(DiscountCode)
</span></span><span class=line><span class=cl>&#34;주문 상태 변경&#34;       → Order.updateStatus()  → void updateStatus(OrderStatus, Timestamp)
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>Value Object 설계 예시:</strong></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1> 1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2> 2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3> 3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4> 4</a>
</span><span class=lnt id=hl-12-5><a class=lnlinks href=#hl-12-5> 5</a>
</span><span class=lnt id=hl-12-6><a class=lnlinks href=#hl-12-6> 6</a>
</span><span class=lnt id=hl-12-7><a class=lnlinks href=#hl-12-7> 7</a>
</span><span class=lnt id=hl-12-8><a class=lnlinks href=#hl-12-8> 8</a>
</span><span class=lnt id=hl-12-9><a class=lnlinks href=#hl-12-9> 9</a>
</span><span class=lnt id=hl-12-10><a class=lnlinks href=#hl-12-10>10</a>
</span><span class=lnt id=hl-12-11><a class=lnlinks href=#hl-12-11>11</a>
</span><span class=lnt id=hl-12-12><a class=lnlinks href=#hl-12-12>12</a>
</span><span class=lnt id=hl-12-13><a class=lnlinks href=#hl-12-13>13</a>
</span><span class=lnt id=hl-12-14><a class=lnlinks href=#hl-12-14>14</a>
</span><span class=lnt id=hl-12-15><a class=lnlinks href=#hl-12-15>15</a>
</span><span class=lnt id=hl-12-16><a class=lnlinks href=#hl-12-16>16</a>
</span><span class=lnt id=hl-12-17><a class=lnlinks href=#hl-12-17>17</a>
</span><span class=lnt id=hl-12-18><a class=lnlinks href=#hl-12-18>18</a>
</span><span class=lnt id=hl-12-19><a class=lnlinks href=#hl-12-19>19</a>
</span><span class=lnt id=hl-12-20><a class=lnlinks href=#hl-12-20>20</a>
</span><span class=lnt id=hl-12-21><a class=lnlinks href=#hl-12-21>21</a>
</span><span class=lnt id=hl-12-22><a class=lnlinks href=#hl-12-22>22</a>
</span><span class=lnt id=hl-12-23><a class=lnlinks href=#hl-12-23>23</a>
</span><span class=lnt id=hl-12-24><a class=lnlinks href=#hl-12-24>24</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 비즈니스 용어: &#34;금액과 통화&#34;</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Money</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>:</span> <span class=n>Decimal</span><span class=p>,</span> <span class=n>currency</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=n>amount</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>			<span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;금액은 음수일 수 없습니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=bp>self</span><span class=o>.</span><span class=n>_amount</span> <span class=o>=</span> <span class=n>amount</span>
</span></span><span class=line><span class=cl>		<span class=bp>self</span><span class=o>.</span><span class=n>_currency</span> <span class=o>=</span> <span class=n>currency</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=k>def</span> <span class=nf>add</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>:</span> <span class=s1>&#39;Money&#39;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s1>&#39;Money&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_currency</span> <span class=o>!=</span> <span class=n>other</span><span class=o>.</span><span class=n>_currency</span><span class=p>:</span>
</span></span><span class=line><span class=cl>			<span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;다른 통화는 더할 수 없습니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>Money</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_amount</span> <span class=o>+</span> <span class=n>other</span><span class=o>.</span><span class=n>_amount</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_currency</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 비즈니스 용어: &#34;배송 주소&#34;</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>DeliveryAddress</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>street</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>city</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>postal_code</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>country</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>		<span class=bp>self</span><span class=o>.</span><span class=n>_street</span> <span class=o>=</span> <span class=n>street</span>
</span></span><span class=line><span class=cl>		<span class=bp>self</span><span class=o>.</span><span class=n>_city</span> <span class=o>=</span> <span class=n>city</span>
</span></span><span class=line><span class=cl>		<span class=bp>self</span><span class=o>.</span><span class=n>_postal_code</span> <span class=o>=</span> <span class=n>postal_code</span>
</span></span><span class=line><span class=cl>		<span class=bp>self</span><span class=o>.</span><span class=n>_country</span> <span class=o>=</span> <span class=n>country</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=k>def</span> <span class=nf>get_delivery_zone</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>DeliveryZone</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=c1># 배송 구역 결정 로직</span>
</span></span><span class=line><span class=cl>		<span class=k>pass</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=3-단계-context-map--integration-pattern--domain-event-설계-1>3 단계: Context Map → Integration Pattern → Domain Event 설계<a hidden class=anchor aria-hidden=true href=#3-단계-context-map--integration-pattern--domain-event-설계-1>#</a></h6><p><strong>핵심 활동</strong>:</p><ul><li><strong>Context Map 해석</strong>: 컨텍스트 간 관계 분석</li><li><strong>Integration Pattern 선택</strong>: 적절한 통합 방식 결정</li><li><strong>Domain Event 설계</strong>: 비동기 통신 이벤트 정의</li></ul><p><strong>컨텍스트 통합 패턴 예시</strong></p><ul><li><strong>Context 관계 매핑:</strong></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1> 1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2> 2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3> 3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4> 4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5> 5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6> 6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7> 7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8> 8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9> 9</a>
</span><span class=lnt id=hl-13-10><a class=lnlinks href=#hl-13-10>10</a>
</span><span class=lnt id=hl-13-11><a class=lnlinks href=#hl-13-11>11</a>
</span><span class=lnt id=hl-13-12><a class=lnlinks href=#hl-13-12>12</a>
</span><span class=lnt id=hl-13-13><a class=lnlinks href=#hl-13-13>13</a>
</span><span class=lnt id=hl-13-14><a class=lnlinks href=#hl-13-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Order Context (Upstream) → Payment Context (Downstream)
</span></span><span class=line><span class=cl>관계: Customer/Supplier
</span></span><span class=line><span class=cl>패턴: Open Host Service
</span></span><span class=line><span class=cl>구현: PaymentAPI
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Shopping Cart Context ↔ Product Catalog Context  
</span></span><span class=line><span class=cl>관계: Partnership
</span></span><span class=line><span class=cl>패턴: Shared Kernel
</span></span><span class=line><span class=cl>구현: ProductSharedModel
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Order Context → Shipping Context
</span></span><span class=line><span class=cl>관계: Publisher/Subscriber  
</span></span><span class=line><span class=cl>패턴: Domain Events
</span></span><span class=line><span class=cl>구현: OrderPlacedEvent, ShipmentRequestedEvent
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>Domain Event 설계 예시:</strong></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1> 1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2> 2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3> 3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4> 4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5> 5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6> 6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7> 7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8> 8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9> 9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10>10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11>11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12>12</a>
</span><span class=lnt id=hl-14-13><a class=lnlinks href=#hl-14-13>13</a>
</span><span class=lnt id=hl-14-14><a class=lnlinks href=#hl-14-14>14</a>
</span><span class=lnt id=hl-14-15><a class=lnlinks href=#hl-14-15>15</a>
</span><span class=lnt id=hl-14-16><a class=lnlinks href=#hl-14-16>16</a>
</span><span class=lnt id=hl-14-17><a class=lnlinks href=#hl-14-17>17</a>
</span><span class=lnt id=hl-14-18><a class=lnlinks href=#hl-14-18>18</a>
</span><span class=lnt id=hl-14-19><a class=lnlinks href=#hl-14-19>19</a>
</span><span class=lnt id=hl-14-20><a class=lnlinks href=#hl-14-20>20</a>
</span><span class=lnt id=hl-14-21><a class=lnlinks href=#hl-14-21>21</a>
</span><span class=lnt id=hl-14-22><a class=lnlinks href=#hl-14-22>22</a>
</span><span class=lnt id=hl-14-23><a class=lnlinks href=#hl-14-23>23</a>
</span><span class=lnt id=hl-14-24><a class=lnlinks href=#hl-14-24>24</a>
</span><span class=lnt id=hl-14-25><a class=lnlinks href=#hl-14-25>25</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Order Context에서 발생하는 이벤트</span>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderPlacedEvent</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=n>order_id</span><span class=p>:</span> <span class=n>OrderId</span>
</span></span><span class=line><span class=cl>	<span class=n>customer_id</span><span class=p>:</span> <span class=n>CustomerId</span>
</span></span><span class=line><span class=cl>	<span class=n>total_amount</span><span class=p>:</span> <span class=n>Money</span>
</span></span><span class=line><span class=cl>	<span class=n>shipping_address</span><span class=p>:</span> <span class=n>DeliveryAddress</span>
</span></span><span class=line><span class=cl>	<span class=n>occurred_at</span><span class=p>:</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl>	<span class=n>items</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>OrderItem</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Payment Context에서 소비하는 이벤트  </span>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PaymentRequiredEvent</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=n>order_id</span><span class=p>:</span> <span class=n>OrderId</span>
</span></span><span class=line><span class=cl>	<span class=n>amount</span><span class=p>:</span> <span class=n>Money</span>
</span></span><span class=line><span class=cl>	<span class=n>payment_method</span><span class=p>:</span> <span class=n>PaymentMethod</span>
</span></span><span class=line><span class=cl>	<span class=n>due_date</span><span class=p>:</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Shipping Context에서 발생하는 이벤트</span>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>  
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ShipmentStartedEvent</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=n>shipment_id</span><span class=p>:</span> <span class=n>ShipmentId</span>
</span></span><span class=line><span class=cl>	<span class=n>order_id</span><span class=p>:</span> <span class=n>OrderId</span>
</span></span><span class=line><span class=cl>	<span class=n>tracking_number</span><span class=p>:</span> <span class=n>TrackingNumber</span>
</span></span><span class=line><span class=cl>	<span class=n>estimated_delivery</span><span class=p>:</span> <span class=n>datetime</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=4-단계-subdomain-분류--module-구조--packagenamespace-조직화-1>4 단계: Subdomain 분류 → Module 구조 → Package/Namespace 조직화<a hidden class=anchor aria-hidden=true href=#4-단계-subdomain-분류--module-구조--packagenamespace-조직화-1>#</a></h6><p><strong>핵심 활동</strong>:</p><ul><li><strong>Subdomain 분류 적용</strong>: Core/Supporting/Generic 우선순위 반영</li><li><strong>Module 구조 설계</strong>: 패키지/네임스페이스 조직화</li><li><strong>코드 구조 정의</strong>: 디렉터리 및 파일 구조 결정</li></ul><p><strong>모듈 구조 실무 예시</strong>:</p><ul><li><strong>Subdomain 분류와 Module 매핑:</strong></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1> 1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2> 2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3> 3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4> 4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5> 5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6> 6</a>
</span><span class=lnt id=hl-15-7><a class=lnlinks href=#hl-15-7> 7</a>
</span><span class=lnt id=hl-15-8><a class=lnlinks href=#hl-15-8> 8</a>
</span><span class=lnt id=hl-15-9><a class=lnlinks href=#hl-15-9> 9</a>
</span><span class=lnt id=hl-15-10><a class=lnlinks href=#hl-15-10>10</a>
</span><span class=lnt id=hl-15-11><a class=lnlinks href=#hl-15-11>11</a>
</span><span class=lnt id=hl-15-12><a class=lnlinks href=#hl-15-12>12</a>
</span><span class=lnt id=hl-15-13><a class=lnlinks href=#hl-15-13>13</a>
</span><span class=lnt id=hl-15-14><a class=lnlinks href=#hl-15-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Core Domain → Primary Modules
</span></span><span class=line><span class=cl>├── com.ecommerce.catalog.domain
</span></span><span class=line><span class=cl>├── com.ecommerce.order.domain  
</span></span><span class=line><span class=cl>└── com.ecommerce.cart.domain
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Supporting Domain → Secondary Modules
</span></span><span class=line><span class=cl>├── com.ecommerce.customer.domain
</span></span><span class=line><span class=cl>├── com.ecommerce.inventory.domain
</span></span><span class=line><span class=cl>└── com.ecommerce.notification.domain
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Generic Domain → Infrastructure Modules  
</span></span><span class=line><span class=cl>├── com.ecommerce.payment.infrastructure
</span></span><span class=line><span class=cl>├── com.ecommerce.shipping.infrastructure
</span></span><span class=line><span class=cl>└── com.ecommerce.authentication.infrastructure
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>패키지 구조 상세:</strong></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1> 1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2> 2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3> 3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4> 4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5> 5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6> 6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7> 7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8> 8</a>
</span><span class=lnt id=hl-16-9><a class=lnlinks href=#hl-16-9> 9</a>
</span><span class=lnt id=hl-16-10><a class=lnlinks href=#hl-16-10>10</a>
</span><span class=lnt id=hl-16-11><a class=lnlinks href=#hl-16-11>11</a>
</span><span class=lnt id=hl-16-12><a class=lnlinks href=#hl-16-12>12</a>
</span><span class=lnt id=hl-16-13><a class=lnlinks href=#hl-16-13>13</a>
</span><span class=lnt id=hl-16-14><a class=lnlinks href=#hl-16-14>14</a>
</span><span class=lnt id=hl-16-15><a class=lnlinks href=#hl-16-15>15</a>
</span><span class=lnt id=hl-16-16><a class=lnlinks href=#hl-16-16>16</a>
</span><span class=lnt id=hl-16-17><a class=lnlinks href=#hl-16-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>com.ecommerce.order.domain/
</span></span><span class=line><span class=cl>├── model/
</span></span><span class=line><span class=cl>│   ├── Order.java              # Aggregate Root
</span></span><span class=line><span class=cl>│   ├── OrderItem.java          # Entity  
</span></span><span class=line><span class=cl>│   ├── OrderStatus.java        # Value Object
</span></span><span class=line><span class=cl>│   ├── ShippingAddress.java    # Value Object
</span></span><span class=line><span class=cl>│   └── Money.java              # Shared Value Object
</span></span><span class=line><span class=cl>├── service/
</span></span><span class=line><span class=cl>│   ├── OrderService.java       # Domain Service
</span></span><span class=line><span class=cl>│   └── PricingService.java     # Domain Service
</span></span><span class=line><span class=cl>├── repository/
</span></span><span class=line><span class=cl>│   └── OrderRepository.java    # Repository Interface
</span></span><span class=line><span class=cl>├── event/
</span></span><span class=line><span class=cl>│   ├── OrderPlacedEvent.java   # Domain Event
</span></span><span class=line><span class=cl>│   └── OrderCancelledEvent.java
</span></span><span class=line><span class=cl>└── factory/
</span></span><span class=line><span class=cl>	└── OrderFactory.java       # Factory
</span></span></code></pre></td></tr></table></div></div><h5 id=고급-변환-패턴>고급 변환 패턴<a hidden class=anchor aria-hidden=true href=#고급-변환-패턴>#</a></h5><h6 id=event-storming-에서-tactical-design-으로의-변환>Event Storming 에서 Tactical Design 으로의 변환<a hidden class=anchor aria-hidden=true href=#event-storming-에서-tactical-design-으로의-변환>#</a></h6><p><strong>Event Storming 결과 → Aggregate 설계:</strong></p><pre class=mermaid>graph LR
    subgraph &#34;Event Storming 결과&#34;
        E1[ProductViewed]
        E2[ProductAddedToCart]  
        E3[CartCheckedOut]
        E4[PaymentProcessed]
        E5[OrderShipped]
    end
    
    subgraph &#34;Tactical Design 변환&#34;
        A1[Product Aggregate]
        A2[Cart Aggregate]
        A3[Order Aggregate] 
        A4[Payment Aggregate]
        A5[Shipment Aggregate]
    end
    
    E1 --&gt; A1
    E2 --&gt; A2
    E3 --&gt; A3
    E4 --&gt; A4
    E5 --&gt; A5
</pre><h6 id=실제-코드-변환-예시>실제 코드 변환 예시<a hidden class=anchor aria-hidden=true href=#실제-코드-변환-예시>#</a></h6><p><strong>Strategic Design 결정사항:</strong></p><ul><li>Product Catalog Context 에서 " 상품 " 은 진열과 검색에 중점</li><li>Order Context 에서 " 상품 " 은 주문 항목과 가격에 중점</li></ul><p><strong>Tactical Design 구현:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1> 1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2> 2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3> 3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4> 4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5> 5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6> 6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7> 7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8> 8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9> 9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10>10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11>11</a>
</span><span class=lnt id=hl-18-12><a class=lnlinks href=#hl-18-12>12</a>
</span><span class=lnt id=hl-18-13><a class=lnlinks href=#hl-18-13>13</a>
</span><span class=lnt id=hl-18-14><a class=lnlinks href=#hl-18-14>14</a>
</span><span class=lnt id=hl-18-15><a class=lnlinks href=#hl-18-15>15</a>
</span><span class=lnt id=hl-18-16><a class=lnlinks href=#hl-18-16>16</a>
</span><span class=lnt id=hl-18-17><a class=lnlinks href=#hl-18-17>17</a>
</span><span class=lnt id=hl-18-18><a class=lnlinks href=#hl-18-18>18</a>
</span><span class=lnt id=hl-18-19><a class=lnlinks href=#hl-18-19>19</a>
</span><span class=lnt id=hl-18-20><a class=lnlinks href=#hl-18-20>20</a>
</span><span class=lnt id=hl-18-21><a class=lnlinks href=#hl-18-21>21</a>
</span><span class=lnt id=hl-18-22><a class=lnlinks href=#hl-18-22>22</a>
</span><span class=lnt id=hl-18-23><a class=lnlinks href=#hl-18-23>23</a>
</span><span class=lnt id=hl-18-24><a class=lnlinks href=#hl-18-24>24</a>
</span><span class=lnt id=hl-18-25><a class=lnlinks href=#hl-18-25>25</a>
</span><span class=lnt id=hl-18-26><a class=lnlinks href=#hl-18-26>26</a>
</span><span class=lnt id=hl-18-27><a class=lnlinks href=#hl-18-27>27</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Product Catalog Context의 Product</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CatalogProduct</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=n>ProductId</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>description</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_id</span> <span class=o>=</span> <span class=n>product_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_name</span> <span class=o>=</span> <span class=n>name</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_description</span> <span class=o>=</span> <span class=n>description</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_categories</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Category</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_images</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>ProductImage</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>add_to_category</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>category</span><span class=p>:</span> <span class=n>Category</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;상품을 카테고리에 추가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_categories</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>category</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>update_description</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>new_description</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;상품 설명 업데이트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_description</span> <span class=o>=</span> <span class=n>new_description</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Order Context의 Product (다른 관점)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderProduct</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=n>ProductId</span><span class=p>,</span> <span class=n>price</span><span class=p>:</span> <span class=n>Money</span><span class=p>,</span> <span class=n>weight</span><span class=p>:</span> <span class=n>Weight</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_id</span> <span class=o>=</span> <span class=n>product_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_price</span> <span class=o>=</span> <span class=n>price</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_weight</span> <span class=o>=</span> <span class=n>weight</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>calculate_shipping_cost</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>destination</span><span class=p>:</span> <span class=n>DeliveryAddress</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Money</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;배송비 계산 (주문 컨텍스트의 관심사)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_weight</span><span class=o>.</span><span class=n>calculate_shipping_cost</span><span class=p>(</span><span class=n>destination</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=변환-시-주의사항-및-모범-사례>변환 시 주의사항 및 모범 사례<a hidden class=anchor aria-hidden=true href=#변환-시-주의사항-및-모범-사례>#</a></h5><p>체계적인 변환 과정을 통해 Strategic Design 의 비즈니스 인사이트가 Tactical Design 의 구체적인 코드 구조로 정확하게 번역되며, 유지보수 가능하고 진화 가능한 시스템을 구축할 수 있다.</p><h6 id=언어-일관성-유지>언어 일관성 유지<a hidden class=anchor aria-hidden=true href=#언어-일관성-유지>#</a></h6><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1> 1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2> 2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3> 3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4> 4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5> 5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6> 6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7> 7</a>
</span><span class=lnt id=hl-19-8><a class=lnlinks href=#hl-19-8> 8</a>
</span><span class=lnt id=hl-19-9><a class=lnlinks href=#hl-19-9> 9</a>
</span><span class=lnt id=hl-19-10><a class=lnlinks href=#hl-19-10>10</a>
</span><span class=lnt id=hl-19-11><a class=lnlinks href=#hl-19-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 좋은 예: 비즈니스 용어 직접 사용</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>place_order</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>cancel_order</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>ship_order</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 나쁜 예: 기술적 용어 사용  </span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span> <span class=k>pass</span>  
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>update_status</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span> <span class=k>pass</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=context-경계-명확화>Context 경계 명확화<a hidden class=anchor aria-hidden=true href=#context-경계-명확화>#</a></h6><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1> 1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2> 2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3> 3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4> 4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5> 5</a>
</span><span class=lnt id=hl-20-6><a class=lnlinks href=#hl-20-6> 6</a>
</span><span class=lnt id=hl-20-7><a class=lnlinks href=#hl-20-7> 7</a>
</span><span class=lnt id=hl-20-8><a class=lnlinks href=#hl-20-8> 8</a>
</span><span class=lnt id=hl-20-9><a class=lnlinks href=#hl-20-9> 9</a>
</span><span class=lnt id=hl-20-10><a class=lnlinks href=#hl-20-10>10</a>
</span><span class=lnt id=hl-20-11><a class=lnlinks href=#hl-20-11>11</a>
</span><span class=lnt id=hl-20-12><a class=lnlinks href=#hl-20-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Order Context</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderCustomer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>:</span> <span class=n>CustomerId</span><span class=p>,</span> <span class=n>shipping_address</span><span class=p>:</span> <span class=n>Address</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_id</span> <span class=o>=</span> <span class=n>customer_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_shipping_address</span> <span class=o>=</span> <span class=n>shipping_address</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Customer Context  </span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Customer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>:</span> <span class=n>CustomerId</span><span class=p>,</span> <span class=n>profile</span><span class=p>:</span> <span class=n>CustomerProfile</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_id</span> <span class=o>=</span> <span class=n>customer_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_profile</span> <span class=o>=</span> <span class=n>profile</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_loyalty_points</span> <span class=o>=</span> <span class=n>LoyaltyPoints</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=이벤트-기반-통합>이벤트 기반 통합<a hidden class=anchor aria-hidden=true href=#이벤트-기반-통합>#</a></h6><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1> 1</a>
</span><span class=lnt id=hl-21-2><a class=lnlinks href=#hl-21-2> 2</a>
</span><span class=lnt id=hl-21-3><a class=lnlinks href=#hl-21-3> 3</a>
</span><span class=lnt id=hl-21-4><a class=lnlinks href=#hl-21-4> 4</a>
</span><span class=lnt id=hl-21-5><a class=lnlinks href=#hl-21-5> 5</a>
</span><span class=lnt id=hl-21-6><a class=lnlinks href=#hl-21-6> 6</a>
</span><span class=lnt id=hl-21-7><a class=lnlinks href=#hl-21-7> 7</a>
</span><span class=lnt id=hl-21-8><a class=lnlinks href=#hl-21-8> 8</a>
</span><span class=lnt id=hl-21-9><a class=lnlinks href=#hl-21-9> 9</a>
</span><span class=lnt id=hl-21-10><a class=lnlinks href=#hl-21-10>10</a>
</span><span class=lnt id=hl-21-11><a class=lnlinks href=#hl-21-11>11</a>
</span><span class=lnt id=hl-21-12><a class=lnlinks href=#hl-21-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Context 간 통신을 위한 이벤트</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderPlacedEvent</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>:</span> <span class=n>OrderId</span><span class=p>,</span> <span class=n>items</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>OrderItem</span><span class=p>]):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>order_id</span> <span class=o>=</span> <span class=n>order_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>items</span> <span class=o>=</span> <span class=n>items</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>occurred_at</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 다른 Context에서 이벤트 처리</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>InventoryService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>handle_order_placed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>:</span> <span class=n>OrderPlacedEvent</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>event</span><span class=o>.</span><span class=n>items</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>reserve_stock</span><span class=p>(</span><span class=n>item</span><span class=o>.</span><span class=n>product_id</span><span class=p>,</span> <span class=n>item</span><span class=o>.</span><span class=n>quantity</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=상향식-피드백-tactical--strategic>상향식 피드백 (Tactical → Strategic)<a hidden class=anchor aria-hidden=true href=#상향식-피드백-tactical--strategic>#</a></h4><p>도메인 모델과 소프트웨어는 도메인 전문가와 사용자의 피드백을 바탕으로 지속적으로 개선된다. 이를 통해 비즈니스 도메인이 진화함에 따라 소프트웨어가 정확하고 관련성을 유지할 수 있다.</p><p><strong>피드백 유형:</strong></p><table><thead><tr><th>피드백 신호</th><th>발생 위치</th><th>Strategic 영향</th><th>조치 방향</th></tr></thead><tbody><tr><td><strong>Aggregate 비대화</strong></td><td>Entity/Value Object</td><td>Context 경계 재검토</td><td>컨텍스트 분할</td></tr><tr><td><strong>복잡한 Domain Service</strong></td><td>여러 Aggregate 간</td><td>Subdomain 재정의</td><td>새로운 Core Domain 추출</td></tr><tr><td><strong>Performance 이슈</strong></td><td>Repository/Query</td><td>Context Map 수정</td><td>통합 패턴 변경</td></tr><tr><td><strong>언어 불일치</strong></td><td>코드 vs 비즈니스</td><td>Ubiquitous Language 정제</td><td>용어 표준화</td></tr></tbody></table><p><strong>실무 피드백 패턴</strong>:</p><table><thead><tr><th>Tactical 발견</th><th>Strategic 개선</th><th>실무 예시</th></tr></thead><tbody><tr><td>Aggregate 복잡성</td><td>Context 경계 재검토</td><td>너무 큰 Aggregate 는 Context 분할 신호</td></tr><tr><td>Domain Event 패턴</td><td>Context 관계 개선</td><td>이벤트 흐름을 통한 의존성 파악</td></tr><tr><td>Repository 복잡성</td><td>Subdomain 재분류</td><td>데이터 접근 패턴을 통한 도메인 이해</td></tr><tr><td>언어 불일치</td><td>Ubiquitous Language 정제</td><td>구현 과정에서 발견되는 용어 모호성</td></tr></tbody></table><p><strong>피드백의 트리거 조건</strong>:</p><ul><li>복잡성 임계값 (Complexity Thresholds)<ul><li>예시<ul><li><strong>Aggregate 가 7 개 이상의 Entity 를 포함할 경우</strong>, 경계가 너무 넓을 수 있으므로 해당 Bounded Context 의 분할을 검토.</li><li><strong>사이클 복잡도 (Cyclomatic Complexity) 가 15 를 초과하는 경우</strong>, 도메인 서비스로 로직을 분리하거나 리팩토링이 필요.</li><li><strong>Context 간 호출이 분당 100 회를 넘는다면</strong>, 과도한 결합을 의미할 수 있으므로 통합 방식 (예: ACL, 이벤트 기반 통신 등) 을 재검토.</li><li><strong>도메인 용어의 불일치 비율이 30% 이상이라면</strong>, 공유 언어 (Ubiquitous Language) 정립을 위한 워크샵을 통해 용어 정비가 필요.</li></ul></li></ul></li></ul><ul><li>성능 임계값 (Performance Thresholds)<ul><li><p>예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1>1</a>
</span><span class=lnt id=hl-22-2><a class=lnlinks href=#hl-22-2>2</a>
</span><span class=lnt id=hl-22-3><a class=lnlinks href=#hl-22-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Query Response Time &gt; 500ms → CQRS 패턴 도입
</span></span><span class=line><span class=cl>Transaction Rollback &gt; 5% → Aggregate 경계 재설계
</span></span><span class=line><span class=cl>Context Coupling &gt; 80% → Context Map 재구성
</span></span></code></pre></td></tr></table></div></div></li></ul></li></ul><h4 id=지속적-개선-사이클>지속적 개선 사이클<a hidden class=anchor aria-hidden=true href=#지속적-개선-사이클>#</a></h4><pre class=mermaid>graph LR
    A[Strategic Design] --&gt; B[Tactical Implementation]
    B --&gt; C[실행 경험]
    C --&gt; D[학습 및 발견]
    D --&gt; A
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style D fill:#fff3e0
</pre><p><strong>순방향 흐름 (Top-Down)</strong>:</p><ul><li>비즈니스 도메인 → 전략적 설계 → Bounded Context 정의 → 전술적 설계 적용 → 구현 계층 반영</li></ul><p><strong>피드백 흐름 (Bottom-Up)</strong>:</p><ul><li>전술적 설계에서의 학습과 발견 → 전략적 설계 개선 → 도메인 이해 심화</li></ul><p>이러한 순환적 관계를 통해 DDD 는 단순한 설계 방법론을 넘어 지속적으로 진화하는 도메인 이해의 프레임워크가 된다.</p><h4 id=협력적-학습-메커니즘-collaborative-learning>협력적 학습 메커니즘 (Collaborative Learning)<a hidden class=anchor aria-hidden=true href=#협력적-학습-메커니즘-collaborative-learning>#</a></h4><p>DDD 에서 전략적 설계와 전술적 설계의 균형을 맞추기 위해서는 이해관계자와의 협력이 필수적이다. 개발자는 이해관계자와 긴밀히 협력하여 소프트웨어 시스템이 비즈니스 요구사항을 만족하고 비즈니스 목표와 일치하도록 해야 한다.</p><h5 id=협력-패턴>협력 패턴<a hidden class=anchor aria-hidden=true href=#협력-패턴>#</a></h5><pre class=mermaid>graph LR
    DE[Domain Expert] --&gt; WS[Workshop Sessions]
    WS --&gt; ES[Event Storming]
    ES --&gt; BC[Bounded Context]
    BC --&gt; AG[Aggregate Design]
    AG --&gt; FB[Feedback to Domain]
    FB --&gt; DE
    
    subgraph &#34;Learning Cycle&#34;
        ES --&gt; UL[Ubiquitous Language]
        UL --&gt; CODE[Code Implementation]
        CODE --&gt; REVIEW[Domain Review]
        REVIEW --&gt; UL
    end
</pre><p>이 상호작용적 발견 과정은 이해관계자, 도메인 전문가, 개발자가 함께 작업하여 도메인 이벤트의 흐름, 원인, 효과를 시각화하고 도메인에 대한 공유된 이해를 촉진한다.</p><h4 id=진화적-수렴-메커니즘-evolutionary-convergence>진화적 수렴 메커니즘 (Evolutionary Convergence)<a hidden class=anchor aria-hidden=true href=#진화적-수렴-메커니즘-evolutionary-convergence>#</a></h4><p>Strategic 과 Tactical Design 은 <strong>수렴 진화 (Convergent Evolution)</strong> 패턴을 보인다. 서로 다른 출발점에서 시작하여 점차 일치된 도메인 모델로 수렴해간다.</p><p><strong>수렴 지표</strong>:</p><ul><li><strong>Language Consistency</strong>: 코드 명명과 비즈니스 용어의 일치도</li><li><strong>Model Stability</strong>: Aggregate 경계의 안정성</li><li><strong>Integration Efficiency</strong>: Context 간 통신의 효율성</li><li><strong>Business Alignment</strong>: 비즈니스 규칙과 코드 로직의 일치성</li></ul><h3 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h3><h4 id=strategic-design-구현-기법>Strategic Design 구현 기법<a hidden class=anchor aria-hidden=true href=#strategic-design-구현-기법>#</a></h4><table><thead><tr><th>기법명</th><th>정의 및 목적</th><th>구성 요소</th><th>실제 예시</th></tr></thead><tbody><tr><td><strong>Event Storming</strong></td><td>도메인 이벤트 중심으로 프로세스를 시각화하여 도메인 흐름 이해</td><td>도메인 전문가, 개발자, 스티커, 타임라인, 이벤트</td><td>주문 생성 → 결제 완료 → 배송 시작</td></tr><tr><td><strong>Context Mapping</strong></td><td>Bounded Context 간 관계 및 통합 전략 설계</td><td>Upstream/Downstream, ACL, Conformist 등 통합 패턴</td><td>주문 ↔ 결제: Customer/Supplier 관계</td></tr><tr><td><strong>Domain Storytelling</strong></td><td>도메인 흐름을 사람 중심의 서사로 표현하여 업무 이해 공유</td><td>액터, 객체, 순차적 행동 흐름</td><td>창고 직원이 주문을 수령하고 재고를 조정</td></tr><tr><td><strong>Subdomain 분류</strong></td><td>도메인을 Core, Supporting, Generic 으로 구분해 중요도 및 리소스 결정</td><td>비즈니스 가치 기반 도메인 식별 및 분류</td><td>결제 = Core, 고객 지원 = Supporting</td></tr><tr><td><strong>Context Mapper DSL</strong></td><td>Bounded Context 정의를 코드로 표현하여 명확한 의사소통 및 설계 가능</td><td>DSL 기반 정의 파일, Context, Relation</td><td><code>contextmap.dsl</code> 파일을 통한 설계 시각화</td></tr></tbody></table><h4 id=tactical-design-구현-기법>Tactical Design 구현 기법<a hidden class=anchor aria-hidden=true href=#tactical-design-구현-기법>#</a></h4><table><thead><tr><th>기법명</th><th>정의 및 목적</th><th>구성 요소</th><th>실제 예시</th></tr></thead><tbody><tr><td><strong>Aggregate Design</strong></td><td>일관성 유지 단위를 정의하고 복잡한 도메인 객체를 하나로 묶음</td><td>Aggregate Root, Entity, Value Object</td><td>Order + OrderItems + Money 객체</td></tr><tr><td><strong>Entity/ValueObject 구현</strong></td><td>식별 가능/불가능 객체로 모델링하여 도메인 표현력 향상</td><td>불변성, 동등성 비교, 생성자 유효성 검증</td><td>Customer 엔티티, Email 값 객체</td></tr><tr><td><strong>Repository Pattern</strong></td><td>도메인 모델의 저장소 추상화를 통해 인프라와 도메인 코드 분리</td><td>인터페이스, 구현체, DB 연동 코드</td><td><code>CustomerRepository</code> / <code>JpaCustomerRepository</code></td></tr><tr><td><strong>Domain Service</strong></td><td>Entity 에 포함시키기 어려운 도메인 로직을 외부에서 처리</td><td>Stateless 함수, 복합 도메인 계산</td><td>할인 정책 적용 서비스</td></tr><tr><td><strong>Factory Pattern</strong></td><td>복잡한 Aggregate 생성을 캡슐화하여 생성 책임 분리</td><td>정적 팩토리 메서드, 빌더 패턴</td><td><code>OrderFactory.createOrder()</code></td></tr><tr><td><strong>Specification Pattern</strong></td><td>도메인 조건 및 검증을 객체로 분리해 재사용 및 조합 가능</td><td><code>isSatisfiedBy()</code>, AND/OR/NOT 조합</td><td>특정 조건의 고객만 조회하는 쿼리 명세</td></tr><tr><td><strong>Hexagonal Architecture</strong></td><td>도메인 중심 아키텍처로 외부 인터페이스와 내부 모델을 분리</td><td>Adapter (Inbound/Outbound), Application, Domain</td><td>REST API ↔ Application ↔ Domain ↔ Repository</td></tr><tr><td><strong>테스트 전략</strong></td><td>도메인 로직에 대한 단위/통합 테스트로 설계 품질 보장</td><td>Unit Test, Integration Test, Mock 객체</td><td>Entity 유효성 테스트, 도메인 서비스 테스트</td></tr></tbody></table><h3 id=분류-기준에-따른-종류-및-유형>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형>#</a></h3><table><thead><tr><th><strong>분류 기준</strong></th><th><strong>유형</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>설계 수준</strong></td><td>Strategic DDD</td><td>바운디드 컨텍스트, 컨텍스트 맵, 유비쿼터스 언어 등 도메인 구조 전략 중심</td></tr><tr><td></td><td>Tactical DDD</td><td>엔티티, 값 객체, 애그리게이트, 도메인 서비스 등 구현 전술 중심</td></tr><tr><td><strong>도메인 역할</strong></td><td>Core Domain</td><td>핵심 경쟁력 중심 비즈니스 로직이 집중된 영역</td></tr><tr><td></td><td>Supporting Domain</td><td>핵심 도메인을 보완하고 지원하는 비즈니스 영역</td></tr><tr><td></td><td>Generic Domain</td><td>기술적으로 범용적인 공통 기능 제공 영역 (예: 인증, 결제 시스템 등)</td></tr><tr><td><strong>컨텍스트 관계</strong></td><td>Shared Kernel</td><td>둘 이상의 팀이 공통 모델을 공유하며 협업 (강한 정합성 요구)</td></tr><tr><td></td><td>Customer–Supplier</td><td>공급자 - 소비자 관계를 명시한 모델 공유 방식</td></tr><tr><td></td><td>Conformist</td><td>하위 팀이 상위 컨텍스트의 모델을 그대로 수용하여 일관성을 유지</td></tr><tr><td></td><td>Anticorruption Layer (ACL)</td><td>레거시/외부 시스템과의 충돌 방지를 위해 인터페이스 또는 어댑터 계층 도입</td></tr><tr><td><strong>아키텍처 스타일</strong></td><td>Layered Architecture</td><td>프레젠테이션, 애플리케이션, 도메인, 인프라 계층으로 나뉜 전통적 계층형 구조</td></tr><tr><td></td><td>Hexagonal Architecture</td><td>포트와 어댑터 기반, 외부 시스템과 도메인을 분리하여 테스트 및 유지보수 용이화</td></tr><tr><td></td><td>Clean Architecture</td><td>의존성 규칙 (안쪽 → 바깥쪽) 적용, 도메인 중심의 아키텍처로 구조적 안정성 확보</td></tr><tr><td></td><td>Event-Driven Architecture (EDA)</td><td>도메인 이벤트 발행/구독 기반으로 컨텍스트 간 느슨한 결합 및 확장성 확보</td></tr><tr><td><strong>적용 범위</strong></td><td>전체 시스템 적용 (Full DDD)</td><td>모든 서브도메인 및 컨텍스트에 전략적/전술적 DDD 를 일관되게 적용</td></tr><tr><td></td><td>하이브리드 적용 (Hybrid DDD)</td><td>복잡한 도메인만 DDD 적용, 나머지는 CRUD 등 기존 방식 유지</td></tr><tr><td></td><td>파일럿 적용 (Partial DDD)</td><td>선택된 모듈 또는 프로젝트 단위로 선별적 도입</td></tr><tr><td><strong>통합 방식</strong></td><td>Event-based Integration</td><td>도메인 이벤트 발행/소비 기반, 비동기적 통신 중심</td></tr><tr><td></td><td>Synchronous Call (REST/gRPC)</td><td>즉시 응답을 위한 RESTful API 또는 gRPC 기반 통합 방식</td></tr><tr><td><strong>데이터 일관성</strong></td><td>Strong Consistency</td><td>트랜잭션 경계 내 데이터 일관성 보장 (단일 컨텍스트에서 주로 사용)</td></tr><tr><td></td><td>Eventual Consistency</td><td>Bounded Context 간 비동기 메시징 기반 일관성 유지</td></tr><tr><td><strong>조직/협업 방식</strong></td><td>통합 모델 (Unified Model)</td><td>모든 팀이 하나의 모델을 공유 (소규모 프로젝트에서 적합)</td></tr><tr><td></td><td>협력 모델 (Collaborative Model)</td><td>팀별로 별도 바운디드 컨텍스트 운영, 컨텍스트 맵 기반 인터페이스 정의</td></tr><tr><td><strong>도입 전략</strong></td><td>Big Bang Adoption</td><td>시스템 전반에 일괄 도입 (리스크와 난이도 큼)</td></tr><tr><td></td><td>Incremental Adoption</td><td>핵심 도메인부터 점진적 도입, 실험적 적용부터 확장</td></tr></tbody></table><h3 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h3><h4 id=산업-도메인별-ddd-적용-사례>산업 도메인별 DDD 적용 사례<a hidden class=anchor aria-hidden=true href=#산업-도메인별-ddd-적용-사례>#</a></h4><table><thead><tr><th><strong>산업 분야</strong></th><th><strong>활용 목적</strong></th><th><strong>적용 기술/패턴</strong></th><th><strong>기대 효과</strong></th></tr></thead><tbody><tr><td><strong>전자상거래</strong></td><td>주문/결제/배송 도메인 모델링 및 경계 분리</td><td>Aggregate, Bounded Context, CQRS, Event Sourcing</td><td>독립적 배포, 복잡한 로직 캡슐화, 확장성 강화</td></tr><tr><td><strong>금융 서비스</strong></td><td>대출 승인, 리스크 분석, 트랜잭션 감사</td><td>Domain Service, Entity, Kafka, Saga Pattern</td><td>규제 대응 유연성, 감사 로그 확보, 도메인 로직 명확화</td></tr><tr><td><strong>헬스케어</strong></td><td>환자 기록 및 진료, 청구 시스템 구현</td><td>Patient Aggregate, HL7/FHIR, Event Sourcing</td><td>민감 데이터 무결성, 의료 로직 충실 구현, 표준화</td></tr><tr><td><strong>물류/배송</strong></td><td>배송 추적, 재고 시스템 최적화</td><td>Shipment Aggregate, IoT Event, Event Storming</td><td>실시간 추적, 물류 규칙 반영, 트래킹 통합</td></tr><tr><td><strong>보험</strong></td><td>클레임/언더라이팅/상품 설계 자동화</td><td>Ubiquitous Language, External API, AI/ML</td><td>정책 변경 민첩성, 자동 의사결정, 도메인 규칙 모델링</td></tr><tr><td><strong>제조업</strong></td><td>생산, 품질, 공급망의 통합 관리</td><td>Aggregate, ERP 통합, Bounded Context + IoT</td><td>생산 계획 최적화, 공정 통합, 품질 추적성 확보</td></tr><tr><td><strong>실시간 시스템</strong></td><td>배송 추적, 메시징, 스트리밍 서비스 설계</td><td>CQRS, Event Sourcing, Kafka Streams</td><td>실시간 처리, 복원력, 재처리 가능성 확보</td></tr><tr><td><strong>이커머스 플랫폼</strong></td><td>상품/주문/결제/배송 도메인 분리 및 API 설계</td><td>Microservices, RESTful API, Bounded Context</td><td>유연한 변경 대응, API 경계 명확화, 독립 서비스 운영</td></tr><tr><td><strong>드론 배송</strong></td><td>주문 - 배송 분산 처리 시스템 설계</td><td>Domain Analysis, Aggregate, Event Storming</td><td>경계 명확화, 분산 트랜잭션 설계 최적화</td></tr></tbody></table><h4 id=시스템-아키텍처설계-적용-사례>시스템 아키텍처/설계 적용 사례<a hidden class=anchor aria-hidden=true href=#시스템-아키텍처설계-적용-사례>#</a></h4><table><thead><tr><th><strong>컨텍스트</strong></th><th><strong>활용 목적</strong></th><th><strong>적용 기술/기법</strong></th><th><strong>효과</strong></th></tr></thead><tbody><tr><td><strong>이벤트 기반 마이크로서비스 설계</strong></td><td>Subdomain 식별 → MS 분리 → Aggregate 구현</td><td>Context Map, Event Storming, CQRS, Event Sourcing</td><td>각 서비스의 경계 명확화, 독립 배포 및 책임 분리</td></tr><tr><td><strong>레거시 현대화</strong></td><td>기존 시스템 점진적 전환</td><td>Strangler Pattern, Anti-Corruption Layer</td><td>레거시 기능 보존, 점진적 마이그레이션, 위험 최소화</td></tr><tr><td><strong>엔터프라이즈 시스템 설계</strong></td><td>복잡한 도메인 구조 대응</td><td>Hexagonal Architecture, Clean Architecture</td><td>비즈니스 로직 명확화, 유지보수 용이성 향상</td></tr><tr><td><strong>API 설계 최적화</strong></td><td>도메인 중심 API 계약 기반 구조화</td><td>OpenAPI, GraphQL, API Gateway, Ubiquitous Language</td><td>일관성 있는 API, 클라이언트 이해도 향상, 재사용성 증가</td></tr></tbody></table><h4 id=조직-및-협업커뮤니케이션-중심-활용>조직 및 협업/커뮤니케이션 중심 활용<a hidden class=anchor aria-hidden=true href=#조직-및-협업커뮤니케이션-중심-활용>#</a></h4><table><thead><tr><th><strong>활용 맥락</strong></th><th><strong>활용 목적</strong></th><th><strong>기법/도구</strong></th><th><strong>기대 효과</strong></th></tr></thead><tbody><tr><td><strong>팀 협업 및 소통 개선</strong></td><td>도메인 전문가 ↔ 개발자 간 모델 정렬</td><td>Ubiquitous Language, Domain Storytelling, Team Topologies</td><td>커뮤니케이션 오류 최소화, 협업 효율성 향상</td></tr><tr><td><strong>도메인 분석/경계 정의</strong></td><td>하위 도메인 및 컨텍스트 구분</td><td>Event Storming, Context Mapping DSL</td><td>명확한 시스템 구조화, 독립적 책임 부여 가능</td></tr><tr><td><strong>학습 곡선 및 문화 확산</strong></td><td>초기 팀 도입/적용의 진입장벽 완화</td><td>DDD-Lite, 시나리오 기반 교육, Pilot 프로젝트</td><td>전사적 확산 전 단계적 도입, 조직 문화 내재화 가능</td></tr></tbody></table><h4 id=구현-및-테스트-관점-실무-활용>구현 및 테스트 관점 실무 활용<a hidden class=anchor aria-hidden=true href=#구현-및-테스트-관점-실무-활용>#</a></h4><table><thead><tr><th><strong>사용 목적</strong></th><th><strong>적용 기술/전술</strong></th><th><strong>주요 효과</strong></th></tr></thead><tbody><tr><td><strong>도메인 모델 구현</strong></td><td>Entity, Value Object, Aggregate, Repository</td><td>책임 분리 명확, 테스트 용이성 향상</td></tr><tr><td><strong>통합 및 시나리오 테스트</strong></td><td>Consumer-driven Contract Test, E2E Test, Pact</td><td>Context 간 통합 보장, 회귀 오류 최소화</td></tr><tr><td><strong>분산 트랜잭션 처리</strong></td><td>SAGA Pattern, Eventual Consistency, Compensation Logic</td><td>강한 일관성 없이 분산 상태 제어, 시스템 복원력 강화</td></tr></tbody></table><h3 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h3><h4 id=사례-1-글로벌-이커머스-플랫폼의-주문---결제---배송-도메인>사례 1: 글로벌 이커머스 플랫폼의 주문 - 결제 - 배송 도메인<a hidden class=anchor aria-hidden=true href=#사례-1-글로벌-이커머스-플랫폼의-주문---결제---배송-도메인>#</a></h4><p><strong>시스템 구성</strong>:</p><ul><li>주문, 결제, 배송 각각 별도의 바운디드 컨텍스트</li><li>각 컨텍스트 내에 엔티티, 값 객체, 애그리게이트, 도메인 서비스, 이벤트, 리포지토리 존재</li></ul><p><strong>구조 다이어그램</strong></p><pre class=mermaid>graph TD
    subgraph 주문 컨텍스트
        OrderEntity
        OrderAggregate
        OrderService
        OrderEvent
        OrderRepository
    end
    subgraph 결제 컨텍스트
        PaymentEntity
        PaymentAggregate
        PaymentService
        PaymentEvent
        PaymentRepository
    end
    subgraph 배송 컨텍스트
        DeliveryEntity
        DeliveryAggregate
        DeliveryService
        DeliveryEvent
        DeliveryRepository
    end
    OrderEvent -.-&gt; PaymentService
    PaymentEvent -.-&gt; DeliveryService
</pre><p><strong>Workflow</strong>:</p><ol><li>주문 생성 → 주문 이벤트 발생</li><li>결제 컨텍스트에서 주문 이벤트 수신 후 결제 처리</li><li>결제 성공 시 결제 이벤트 발생</li><li>배송 컨텍스트에서 결제 이벤트 수신 후 배송 처리</li></ol><p><strong>역할</strong>:</p><ul><li>도메인 전문가: 요구사항 정의, 유비쿼터스 언어 정립</li><li>개발자: 도메인 모델 설계/구현</li><li>QA: 도메인 이벤트 기반 테스트</li></ul><h4 id=사례-2-카카오페이-여신코어-시스템-구축>사례 2: 카카오페이 여신코어 시스템 구축<a hidden class=anchor aria-hidden=true href=#사례-2-카카오페이-여신코어-시스템-구축>#</a></h4><p><strong>시스템 구성</strong></p><ul><li>카카오페이는 복잡한 여신 업무를 위해 DDD 를 적용하여 시스템을 구축.</li></ul><p><strong>시스템 구성도</strong>:</p><pre class=mermaid>graph TB
    subgraph &#34;프레젠테이션 계층&#34;
        A[여신 관리 API]
        B[대출 신청 API]
        C[심사 결과 API]
    end
    
    subgraph &#34;응용 계층&#34;
        D[여신 신청 서비스]
        E[심사 처리 서비스]
        F[납부 관리 서비스]
    end
    
    subgraph &#34;도메인 계층&#34;
        G[대출 애그리거트]
        H[고객 애그리거트]
        I[심사 애그리거트]
        J[납부 애그리거트]
    end
    
    subgraph &#34;인프라 계층&#34;
        K[여신 DB]
        L[외부 신용평가 API]
        M[알림 시스템]
    end
    
    A --&gt; D
    B --&gt; D
    C --&gt; E
    D --&gt; G
    E --&gt; I
    F --&gt; J
    G --&gt; K
    I --&gt; L
    J --&gt; M
</pre><p><strong>Workflow</strong>:</p><pre class=mermaid>sequenceDiagram
    participant C as 고객
    participant API as 여신 API
    participant APP as 응용 서비스
    participant LOAN as 대출 애그리거트
    participant REVIEW as 심사 애그리거트
    participant EXT as 외부 신용평가
    
    C-&gt;&gt;API: 대출 신청
    API-&gt;&gt;APP: 대출 신청 처리
    APP-&gt;&gt;LOAN: 대출 생성
    LOAN-&gt;&gt;LOAN: 신청 정보 검증
    LOAN--&gt;&gt;APP: 대출 신청 완료 이벤트
    APP-&gt;&gt;REVIEW: 심사 시작
    REVIEW-&gt;&gt;EXT: 신용 정보 조회
    EXT--&gt;&gt;REVIEW: 신용 정보 응답
    REVIEW-&gt;&gt;REVIEW: 심사 규칙 적용
    REVIEW--&gt;&gt;APP: 심사 완료 이벤트
    APP-&gt;&gt;LOAN: 심사 결과 반영
    API--&gt;&gt;C: 대출 승인 결과
</pre><p><strong>DDD 역할 및 효과</strong>:</p><ol><li><strong>유비쿼터스 언어 정립</strong>: 금융 도메인의 복잡한 용어를 개발자와 금융 전문가가 공통으로 사용</li><li><strong>바운디드 컨텍스트 분리</strong>: 대출, 심사, 납부 등 각 영역의 독립적 발전 가능</li><li><strong>애그리거트 설계</strong>: 복잡한 여신 규칙을 대출 애그리거트 내에서 일관성 있게 관리</li><li><strong>도메인 이벤트 활용</strong>: 비동기 처리를 통한 시스템 성능 향상</li></ol><p><strong>기존 시스템과의 차이점</strong>:</p><ul><li><strong>기존</strong>: 절차 지향적 처리, 데이터베이스 중심 설계</li><li><strong>DDD 적용 후</strong>: 도메인 중심 설계, 비즈니스 로직의 명확한 표현, 변화에 유연한 대응</li></ul><h4 id=사례-3-온라인-음식-배달-플랫폼>사례 3: 온라인 음식 배달 플랫폼<a hidden class=anchor aria-hidden=true href=#사례-3-온라인-음식-배달-플랫폼>#</a></h4><p><strong>시스템 구성</strong>:</p><pre class=mermaid>graph TB
    subgraph &#34;Customer Management Context&#34;
        A[Customer]
        B[Customer Profile]
        C[Loyalty Program]
    end
    
    subgraph &#34;Restaurant Management Context&#34;
        D[Restaurant]
        E[Menu]
        F[Restaurant Profile]
    end
    
    subgraph &#34;Order Management Context&#34;
        G[Order]
        H[Order Item]
        I[Payment]
    end
    
    subgraph &#34;Delivery Context&#34;
        J[Delivery]
        K[Driver]
        L[Route]
    end
    
    A --&gt; G
    D --&gt; G
    G --&gt; J
    K --&gt; J
</pre><p><strong>Workflow</strong>:</p><pre class=mermaid>sequenceDiagram
    participant C as Customer
    participant O as Order Service
    participant R as Restaurant
    participant P as Payment Service
    participant D as Delivery Service
    
    C-&gt;&gt;O: 주문 생성
    O-&gt;&gt;R: 주문 확인 요청
    R-&gt;&gt;O: 주문 승인
    O-&gt;&gt;P: 결제 처리
    P-&gt;&gt;O: 결제 완료
    O-&gt;&gt;D: 배달 요청
    D-&gt;&gt;C: 배달원 배정 알림
    D-&gt;&gt;C: 배달 완료
</pre><p><strong>DDD 역할 담당</strong>:</p><ol><li><p><strong>Strategic Design</strong>:</p><ul><li>Bounded Context 식별 (고객관리, 주문관리, 배달관리)</li><li>Context Map 을 통한 통합 지점 정의</li></ul></li><li><p><strong>Tactical Design</strong>:</p><ul><li>Order Aggregate: 주문 일관성 보장</li><li>Domain Events: OrderPlaced, PaymentCompleted, DeliveryStarted</li><li>Repository: 각 Aggregate 에 대한 영속성 관리</li></ul></li><li><p><strong>Ubiquitous Language</strong>: " 주문 &ldquo;, " 배달 &ldquo;, " 음식점 " 등 비즈니스 용어 코드에 반영</p></li></ol><h4 id=사례-4-헬스케어-조직환자-관리-시스템>사례 4: 헬스케어 조직–환자 관리 시스템<a hidden class=anchor aria-hidden=true href=#사례-4-헬스케어-조직환자-관리-시스템>#</a></h4><p><strong>목적</strong>: 환자 관리 (Patient Management) 를 별도의 Bounded Context 로 분리하여 개발 독립성 확보</p><p><strong>시스템 구성</strong>:</p><pre class=mermaid>graph LR
  PatientB(ctx:환자관리) --&gt; BillingB(ctx:청구)
  PatientB --&gt; AppointmentB(ctx:예약)
</pre><p><strong>구성요소</strong>:</p><ul><li><strong>Strategic</strong>: Bounded Context 분리, Context Map 작성, Ubiquitous Language 정의</li><li><strong>Tactical</strong>: 환자 Entity, 주소 ValueObject, Repository, DomainService 구현</li></ul><p><strong>Workflow</strong>:</p><ol><li>워크숍 통해 환자 - 주소 - 진료 이벤트 도출 (EventStorming)</li><li>환자 컨텍스트에서 Entity/VO 구현</li><li>청구/예약 컨텍스트와 OCR/ACL 방식으로 통합</li><li>독립 서비스로 배포 및 이벤트 기반 연동 설계</li></ol><h4 id=사례-5-전자상거래-시스템-사례>사례 5: 전자상거래 시스템 사례<a hidden class=anchor aria-hidden=true href=#사례-5-전자상거래-시스템-사례>#</a></h4><p><strong>시스템 구성</strong>:</p><ul><li>대형 온라인 쇼핑몰의 도메인 주도 설계 적용 사례로, 다음과 같은 컨텍스트들로 구성되었다:<ul><li><strong>주문 관리 컨텍스트 (Order Management)</strong></li><li><strong>상품 카탈로그 컨텍스트 (Product Catalog)</strong></li><li><strong>재고 관리 컨텍스트 (Inventory Management)</strong></li><li><strong>결제 처리 컨텍스트 (Payment Processing)</strong></li><li><strong>배송 관리 컨텍스트 (Shipping Management)</strong></li></ul></li></ul><p><strong>시스템 구성 다이어그램</strong></p><pre class=mermaid>graph TB

%% Strategic Design - Context Map
subgraph &#34;Strategic Design - Context Map&#34;
    OC[Order Context]
    PC[Product Catalog Context]
    IC[Inventory Context]
    PayC[Payment Context]
    SC[Shipping Context]

    OC --&gt;|Customer/Supplier| PC
    OC --&gt;|Customer/Supplier| IC
    OC --&gt;|Customer/Supplier| PayC
    OC --&gt;|Customer/Supplier| SC
    PC --&gt;|Shared Kernel| IC
end

%% Tactical Design - Order Context
subgraph &#34;Tactical Design - Order Context&#34;
    OR[Order Aggregate Root]
    OI[Order Item Entity]
    Addr[Address Value Object]
    Money[Money Value Object]

    OR --&gt; OI:::composition
    OR --&gt; Addr:::composition
    OI --&gt; Money:::composition
end

%% Style for composition
classDef composition stroke-width:2px,stroke-dasharray: 5 5
</pre><p><strong>Workflow 다이어그램</strong></p><pre class=mermaid>sequenceDiagram
    participant Customer
    participant OrderService
    participant ProductCatalog
    participant Inventory
    participant Payment
    participant Shipping
    
    Customer-&gt;&gt;OrderService: 주문 생성 요청
    OrderService-&gt;&gt;ProductCatalog: 상품 정보 조회
    ProductCatalog--&gt;&gt;OrderService: 상품 정보 반환
    OrderService-&gt;&gt;Inventory: 재고 확인
    Inventory--&gt;&gt;OrderService: 재고 상태 반환
    OrderService-&gt;&gt;Payment: 결제 처리 요청
    Payment--&gt;&gt;OrderService: 결제 완료 확인
    OrderService-&gt;&gt;Shipping: 배송 요청
    OrderService--&gt;&gt;Customer: 주문 완료 응답
</pre><p><strong>각 설계 접근법의 역할</strong>:</p><ul><li><strong>Strategic Design 의 역할</strong>:<ul><li>비즈니스 도메인을 5 개의 명확한 경계 컨텍스트로 분리</li><li>각 컨텍스트 간의 관계를 Customer/Supplier, Shared Kernel 패턴으로 정의</li><li>팀 조직을 컨텍스트 경계에 맞춰 구성 (Conway&rsquo;s Law 적용)</li></ul></li><li><strong>Tactical Design 의 역할</strong>:<ul><li>Order Aggregate 를 통한 주문 일관성 보장</li><li>Value Object (Money, Address) 를 통한 불변성 확보</li><li>Repository 패턴을 통한 데이터 접근 추상화</li></ul></li></ul><p><strong>차이점 비교</strong></p><table><thead><tr><th>관점</th><th>Strategic Design 적용</th><th>Tactical Design 적용</th></tr></thead><tbody><tr><td><strong>팀 구조</strong></td><td>컨텍스트별 독립적인 팀 운영</td><td>단일 팀 내 역할 분담</td></tr><tr><td><strong>데이터베이스</strong></td><td>컨텍스트별 독립적인 데이터 저장소</td><td>애그리게이트별 테이블 설계</td></tr><tr><td><strong>API 설계</strong></td><td>컨텍스트 간 명확한 계약 정의</td><td>도메인 객체 기반 인터페이스</td></tr><tr><td><strong>변경 영향도</strong></td><td>컨텍스트 경계 내로 제한</td><td>애그리게이트 경계 내로 제한</td></tr></tbody></table><h3 id=구현-예시>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시>#</a></h3><p><strong>온라인 쇼핑몰 주문 처리 시스템 (Python)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-33-1><a class=lnlinks href=#hl-33-1>  1</a>
</span><span class=lnt id=hl-33-2><a class=lnlinks href=#hl-33-2>  2</a>
</span><span class=lnt id=hl-33-3><a class=lnlinks href=#hl-33-3>  3</a>
</span><span class=lnt id=hl-33-4><a class=lnlinks href=#hl-33-4>  4</a>
</span><span class=lnt id=hl-33-5><a class=lnlinks href=#hl-33-5>  5</a>
</span><span class=lnt id=hl-33-6><a class=lnlinks href=#hl-33-6>  6</a>
</span><span class=lnt id=hl-33-7><a class=lnlinks href=#hl-33-7>  7</a>
</span><span class=lnt id=hl-33-8><a class=lnlinks href=#hl-33-8>  8</a>
</span><span class=lnt id=hl-33-9><a class=lnlinks href=#hl-33-9>  9</a>
</span><span class=lnt id=hl-33-10><a class=lnlinks href=#hl-33-10> 10</a>
</span><span class=lnt id=hl-33-11><a class=lnlinks href=#hl-33-11> 11</a>
</span><span class=lnt id=hl-33-12><a class=lnlinks href=#hl-33-12> 12</a>
</span><span class=lnt id=hl-33-13><a class=lnlinks href=#hl-33-13> 13</a>
</span><span class=lnt id=hl-33-14><a class=lnlinks href=#hl-33-14> 14</a>
</span><span class=lnt id=hl-33-15><a class=lnlinks href=#hl-33-15> 15</a>
</span><span class=lnt id=hl-33-16><a class=lnlinks href=#hl-33-16> 16</a>
</span><span class=lnt id=hl-33-17><a class=lnlinks href=#hl-33-17> 17</a>
</span><span class=lnt id=hl-33-18><a class=lnlinks href=#hl-33-18> 18</a>
</span><span class=lnt id=hl-33-19><a class=lnlinks href=#hl-33-19> 19</a>
</span><span class=lnt id=hl-33-20><a class=lnlinks href=#hl-33-20> 20</a>
</span><span class=lnt id=hl-33-21><a class=lnlinks href=#hl-33-21> 21</a>
</span><span class=lnt id=hl-33-22><a class=lnlinks href=#hl-33-22> 22</a>
</span><span class=lnt id=hl-33-23><a class=lnlinks href=#hl-33-23> 23</a>
</span><span class=lnt id=hl-33-24><a class=lnlinks href=#hl-33-24> 24</a>
</span><span class=lnt id=hl-33-25><a class=lnlinks href=#hl-33-25> 25</a>
</span><span class=lnt id=hl-33-26><a class=lnlinks href=#hl-33-26> 26</a>
</span><span class=lnt id=hl-33-27><a class=lnlinks href=#hl-33-27> 27</a>
</span><span class=lnt id=hl-33-28><a class=lnlinks href=#hl-33-28> 28</a>
</span><span class=lnt id=hl-33-29><a class=lnlinks href=#hl-33-29> 29</a>
</span><span class=lnt id=hl-33-30><a class=lnlinks href=#hl-33-30> 30</a>
</span><span class=lnt id=hl-33-31><a class=lnlinks href=#hl-33-31> 31</a>
</span><span class=lnt id=hl-33-32><a class=lnlinks href=#hl-33-32> 32</a>
</span><span class=lnt id=hl-33-33><a class=lnlinks href=#hl-33-33> 33</a>
</span><span class=lnt id=hl-33-34><a class=lnlinks href=#hl-33-34> 34</a>
</span><span class=lnt id=hl-33-35><a class=lnlinks href=#hl-33-35> 35</a>
</span><span class=lnt id=hl-33-36><a class=lnlinks href=#hl-33-36> 36</a>
</span><span class=lnt id=hl-33-37><a class=lnlinks href=#hl-33-37> 37</a>
</span><span class=lnt id=hl-33-38><a class=lnlinks href=#hl-33-38> 38</a>
</span><span class=lnt id=hl-33-39><a class=lnlinks href=#hl-33-39> 39</a>
</span><span class=lnt id=hl-33-40><a class=lnlinks href=#hl-33-40> 40</a>
</span><span class=lnt id=hl-33-41><a class=lnlinks href=#hl-33-41> 41</a>
</span><span class=lnt id=hl-33-42><a class=lnlinks href=#hl-33-42> 42</a>
</span><span class=lnt id=hl-33-43><a class=lnlinks href=#hl-33-43> 43</a>
</span><span class=lnt id=hl-33-44><a class=lnlinks href=#hl-33-44> 44</a>
</span><span class=lnt id=hl-33-45><a class=lnlinks href=#hl-33-45> 45</a>
</span><span class=lnt id=hl-33-46><a class=lnlinks href=#hl-33-46> 46</a>
</span><span class=lnt id=hl-33-47><a class=lnlinks href=#hl-33-47> 47</a>
</span><span class=lnt id=hl-33-48><a class=lnlinks href=#hl-33-48> 48</a>
</span><span class=lnt id=hl-33-49><a class=lnlinks href=#hl-33-49> 49</a>
</span><span class=lnt id=hl-33-50><a class=lnlinks href=#hl-33-50> 50</a>
</span><span class=lnt id=hl-33-51><a class=lnlinks href=#hl-33-51> 51</a>
</span><span class=lnt id=hl-33-52><a class=lnlinks href=#hl-33-52> 52</a>
</span><span class=lnt id=hl-33-53><a class=lnlinks href=#hl-33-53> 53</a>
</span><span class=lnt id=hl-33-54><a class=lnlinks href=#hl-33-54> 54</a>
</span><span class=lnt id=hl-33-55><a class=lnlinks href=#hl-33-55> 55</a>
</span><span class=lnt id=hl-33-56><a class=lnlinks href=#hl-33-56> 56</a>
</span><span class=lnt id=hl-33-57><a class=lnlinks href=#hl-33-57> 57</a>
</span><span class=lnt id=hl-33-58><a class=lnlinks href=#hl-33-58> 58</a>
</span><span class=lnt id=hl-33-59><a class=lnlinks href=#hl-33-59> 59</a>
</span><span class=lnt id=hl-33-60><a class=lnlinks href=#hl-33-60> 60</a>
</span><span class=lnt id=hl-33-61><a class=lnlinks href=#hl-33-61> 61</a>
</span><span class=lnt id=hl-33-62><a class=lnlinks href=#hl-33-62> 62</a>
</span><span class=lnt id=hl-33-63><a class=lnlinks href=#hl-33-63> 63</a>
</span><span class=lnt id=hl-33-64><a class=lnlinks href=#hl-33-64> 64</a>
</span><span class=lnt id=hl-33-65><a class=lnlinks href=#hl-33-65> 65</a>
</span><span class=lnt id=hl-33-66><a class=lnlinks href=#hl-33-66> 66</a>
</span><span class=lnt id=hl-33-67><a class=lnlinks href=#hl-33-67> 67</a>
</span><span class=lnt id=hl-33-68><a class=lnlinks href=#hl-33-68> 68</a>
</span><span class=lnt id=hl-33-69><a class=lnlinks href=#hl-33-69> 69</a>
</span><span class=lnt id=hl-33-70><a class=lnlinks href=#hl-33-70> 70</a>
</span><span class=lnt id=hl-33-71><a class=lnlinks href=#hl-33-71> 71</a>
</span><span class=lnt id=hl-33-72><a class=lnlinks href=#hl-33-72> 72</a>
</span><span class=lnt id=hl-33-73><a class=lnlinks href=#hl-33-73> 73</a>
</span><span class=lnt id=hl-33-74><a class=lnlinks href=#hl-33-74> 74</a>
</span><span class=lnt id=hl-33-75><a class=lnlinks href=#hl-33-75> 75</a>
</span><span class=lnt id=hl-33-76><a class=lnlinks href=#hl-33-76> 76</a>
</span><span class=lnt id=hl-33-77><a class=lnlinks href=#hl-33-77> 77</a>
</span><span class=lnt id=hl-33-78><a class=lnlinks href=#hl-33-78> 78</a>
</span><span class=lnt id=hl-33-79><a class=lnlinks href=#hl-33-79> 79</a>
</span><span class=lnt id=hl-33-80><a class=lnlinks href=#hl-33-80> 80</a>
</span><span class=lnt id=hl-33-81><a class=lnlinks href=#hl-33-81> 81</a>
</span><span class=lnt id=hl-33-82><a class=lnlinks href=#hl-33-82> 82</a>
</span><span class=lnt id=hl-33-83><a class=lnlinks href=#hl-33-83> 83</a>
</span><span class=lnt id=hl-33-84><a class=lnlinks href=#hl-33-84> 84</a>
</span><span class=lnt id=hl-33-85><a class=lnlinks href=#hl-33-85> 85</a>
</span><span class=lnt id=hl-33-86><a class=lnlinks href=#hl-33-86> 86</a>
</span><span class=lnt id=hl-33-87><a class=lnlinks href=#hl-33-87> 87</a>
</span><span class=lnt id=hl-33-88><a class=lnlinks href=#hl-33-88> 88</a>
</span><span class=lnt id=hl-33-89><a class=lnlinks href=#hl-33-89> 89</a>
</span><span class=lnt id=hl-33-90><a class=lnlinks href=#hl-33-90> 90</a>
</span><span class=lnt id=hl-33-91><a class=lnlinks href=#hl-33-91> 91</a>
</span><span class=lnt id=hl-33-92><a class=lnlinks href=#hl-33-92> 92</a>
</span><span class=lnt id=hl-33-93><a class=lnlinks href=#hl-33-93> 93</a>
</span><span class=lnt id=hl-33-94><a class=lnlinks href=#hl-33-94> 94</a>
</span><span class=lnt id=hl-33-95><a class=lnlinks href=#hl-33-95> 95</a>
</span><span class=lnt id=hl-33-96><a class=lnlinks href=#hl-33-96> 96</a>
</span><span class=lnt id=hl-33-97><a class=lnlinks href=#hl-33-97> 97</a>
</span><span class=lnt id=hl-33-98><a class=lnlinks href=#hl-33-98> 98</a>
</span><span class=lnt id=hl-33-99><a class=lnlinks href=#hl-33-99> 99</a>
</span><span class=lnt id=hl-33-100><a class=lnlinks href=#hl-33-100>100</a>
</span><span class=lnt id=hl-33-101><a class=lnlinks href=#hl-33-101>101</a>
</span><span class=lnt id=hl-33-102><a class=lnlinks href=#hl-33-102>102</a>
</span><span class=lnt id=hl-33-103><a class=lnlinks href=#hl-33-103>103</a>
</span><span class=lnt id=hl-33-104><a class=lnlinks href=#hl-33-104>104</a>
</span><span class=lnt id=hl-33-105><a class=lnlinks href=#hl-33-105>105</a>
</span><span class=lnt id=hl-33-106><a class=lnlinks href=#hl-33-106>106</a>
</span><span class=lnt id=hl-33-107><a class=lnlinks href=#hl-33-107>107</a>
</span><span class=lnt id=hl-33-108><a class=lnlinks href=#hl-33-108>108</a>
</span><span class=lnt id=hl-33-109><a class=lnlinks href=#hl-33-109>109</a>
</span><span class=lnt id=hl-33-110><a class=lnlinks href=#hl-33-110>110</a>
</span><span class=lnt id=hl-33-111><a class=lnlinks href=#hl-33-111>111</a>
</span><span class=lnt id=hl-33-112><a class=lnlinks href=#hl-33-112>112</a>
</span><span class=lnt id=hl-33-113><a class=lnlinks href=#hl-33-113>113</a>
</span><span class=lnt id=hl-33-114><a class=lnlinks href=#hl-33-114>114</a>
</span><span class=lnt id=hl-33-115><a class=lnlinks href=#hl-33-115>115</a>
</span><span class=lnt id=hl-33-116><a class=lnlinks href=#hl-33-116>116</a>
</span><span class=lnt id=hl-33-117><a class=lnlinks href=#hl-33-117>117</a>
</span><span class=lnt id=hl-33-118><a class=lnlinks href=#hl-33-118>118</a>
</span><span class=lnt id=hl-33-119><a class=lnlinks href=#hl-33-119>119</a>
</span><span class=lnt id=hl-33-120><a class=lnlinks href=#hl-33-120>120</a>
</span><span class=lnt id=hl-33-121><a class=lnlinks href=#hl-33-121>121</a>
</span><span class=lnt id=hl-33-122><a class=lnlinks href=#hl-33-122>122</a>
</span><span class=lnt id=hl-33-123><a class=lnlinks href=#hl-33-123>123</a>
</span><span class=lnt id=hl-33-124><a class=lnlinks href=#hl-33-124>124</a>
</span><span class=lnt id=hl-33-125><a class=lnlinks href=#hl-33-125>125</a>
</span><span class=lnt id=hl-33-126><a class=lnlinks href=#hl-33-126>126</a>
</span><span class=lnt id=hl-33-127><a class=lnlinks href=#hl-33-127>127</a>
</span><span class=lnt id=hl-33-128><a class=lnlinks href=#hl-33-128>128</a>
</span><span class=lnt id=hl-33-129><a class=lnlinks href=#hl-33-129>129</a>
</span><span class=lnt id=hl-33-130><a class=lnlinks href=#hl-33-130>130</a>
</span><span class=lnt id=hl-33-131><a class=lnlinks href=#hl-33-131>131</a>
</span><span class=lnt id=hl-33-132><a class=lnlinks href=#hl-33-132>132</a>
</span><span class=lnt id=hl-33-133><a class=lnlinks href=#hl-33-133>133</a>
</span><span class=lnt id=hl-33-134><a class=lnlinks href=#hl-33-134>134</a>
</span><span class=lnt id=hl-33-135><a class=lnlinks href=#hl-33-135>135</a>
</span><span class=lnt id=hl-33-136><a class=lnlinks href=#hl-33-136>136</a>
</span><span class=lnt id=hl-33-137><a class=lnlinks href=#hl-33-137>137</a>
</span><span class=lnt id=hl-33-138><a class=lnlinks href=#hl-33-138>138</a>
</span><span class=lnt id=hl-33-139><a class=lnlinks href=#hl-33-139>139</a>
</span><span class=lnt id=hl-33-140><a class=lnlinks href=#hl-33-140>140</a>
</span><span class=lnt id=hl-33-141><a class=lnlinks href=#hl-33-141>141</a>
</span><span class=lnt id=hl-33-142><a class=lnlinks href=#hl-33-142>142</a>
</span><span class=lnt id=hl-33-143><a class=lnlinks href=#hl-33-143>143</a>
</span><span class=lnt id=hl-33-144><a class=lnlinks href=#hl-33-144>144</a>
</span><span class=lnt id=hl-33-145><a class=lnlinks href=#hl-33-145>145</a>
</span><span class=lnt id=hl-33-146><a class=lnlinks href=#hl-33-146>146</a>
</span><span class=lnt id=hl-33-147><a class=lnlinks href=#hl-33-147>147</a>
</span><span class=lnt id=hl-33-148><a class=lnlinks href=#hl-33-148>148</a>
</span><span class=lnt id=hl-33-149><a class=lnlinks href=#hl-33-149>149</a>
</span><span class=lnt id=hl-33-150><a class=lnlinks href=#hl-33-150>150</a>
</span><span class=lnt id=hl-33-151><a class=lnlinks href=#hl-33-151>151</a>
</span><span class=lnt id=hl-33-152><a class=lnlinks href=#hl-33-152>152</a>
</span><span class=lnt id=hl-33-153><a class=lnlinks href=#hl-33-153>153</a>
</span><span class=lnt id=hl-33-154><a class=lnlinks href=#hl-33-154>154</a>
</span><span class=lnt id=hl-33-155><a class=lnlinks href=#hl-33-155>155</a>
</span><span class=lnt id=hl-33-156><a class=lnlinks href=#hl-33-156>156</a>
</span><span class=lnt id=hl-33-157><a class=lnlinks href=#hl-33-157>157</a>
</span><span class=lnt id=hl-33-158><a class=lnlinks href=#hl-33-158>158</a>
</span><span class=lnt id=hl-33-159><a class=lnlinks href=#hl-33-159>159</a>
</span><span class=lnt id=hl-33-160><a class=lnlinks href=#hl-33-160>160</a>
</span><span class=lnt id=hl-33-161><a class=lnlinks href=#hl-33-161>161</a>
</span><span class=lnt id=hl-33-162><a class=lnlinks href=#hl-33-162>162</a>
</span><span class=lnt id=hl-33-163><a class=lnlinks href=#hl-33-163>163</a>
</span><span class=lnt id=hl-33-164><a class=lnlinks href=#hl-33-164>164</a>
</span><span class=lnt id=hl-33-165><a class=lnlinks href=#hl-33-165>165</a>
</span><span class=lnt id=hl-33-166><a class=lnlinks href=#hl-33-166>166</a>
</span><span class=lnt id=hl-33-167><a class=lnlinks href=#hl-33-167>167</a>
</span><span class=lnt id=hl-33-168><a class=lnlinks href=#hl-33-168>168</a>
</span><span class=lnt id=hl-33-169><a class=lnlinks href=#hl-33-169>169</a>
</span><span class=lnt id=hl-33-170><a class=lnlinks href=#hl-33-170>170</a>
</span><span class=lnt id=hl-33-171><a class=lnlinks href=#hl-33-171>171</a>
</span><span class=lnt id=hl-33-172><a class=lnlinks href=#hl-33-172>172</a>
</span><span class=lnt id=hl-33-173><a class=lnlinks href=#hl-33-173>173</a>
</span><span class=lnt id=hl-33-174><a class=lnlinks href=#hl-33-174>174</a>
</span><span class=lnt id=hl-33-175><a class=lnlinks href=#hl-33-175>175</a>
</span><span class=lnt id=hl-33-176><a class=lnlinks href=#hl-33-176>176</a>
</span><span class=lnt id=hl-33-177><a class=lnlinks href=#hl-33-177>177</a>
</span><span class=lnt id=hl-33-178><a class=lnlinks href=#hl-33-178>178</a>
</span><span class=lnt id=hl-33-179><a class=lnlinks href=#hl-33-179>179</a>
</span><span class=lnt id=hl-33-180><a class=lnlinks href=#hl-33-180>180</a>
</span><span class=lnt id=hl-33-181><a class=lnlinks href=#hl-33-181>181</a>
</span><span class=lnt id=hl-33-182><a class=lnlinks href=#hl-33-182>182</a>
</span><span class=lnt id=hl-33-183><a class=lnlinks href=#hl-33-183>183</a>
</span><span class=lnt id=hl-33-184><a class=lnlinks href=#hl-33-184>184</a>
</span><span class=lnt id=hl-33-185><a class=lnlinks href=#hl-33-185>185</a>
</span><span class=lnt id=hl-33-186><a class=lnlinks href=#hl-33-186>186</a>
</span><span class=lnt id=hl-33-187><a class=lnlinks href=#hl-33-187>187</a>
</span><span class=lnt id=hl-33-188><a class=lnlinks href=#hl-33-188>188</a>
</span><span class=lnt id=hl-33-189><a class=lnlinks href=#hl-33-189>189</a>
</span><span class=lnt id=hl-33-190><a class=lnlinks href=#hl-33-190>190</a>
</span><span class=lnt id=hl-33-191><a class=lnlinks href=#hl-33-191>191</a>
</span><span class=lnt id=hl-33-192><a class=lnlinks href=#hl-33-192>192</a>
</span><span class=lnt id=hl-33-193><a class=lnlinks href=#hl-33-193>193</a>
</span><span class=lnt id=hl-33-194><a class=lnlinks href=#hl-33-194>194</a>
</span><span class=lnt id=hl-33-195><a class=lnlinks href=#hl-33-195>195</a>
</span><span class=lnt id=hl-33-196><a class=lnlinks href=#hl-33-196>196</a>
</span><span class=lnt id=hl-33-197><a class=lnlinks href=#hl-33-197>197</a>
</span><span class=lnt id=hl-33-198><a class=lnlinks href=#hl-33-198>198</a>
</span><span class=lnt id=hl-33-199><a class=lnlinks href=#hl-33-199>199</a>
</span><span class=lnt id=hl-33-200><a class=lnlinks href=#hl-33-200>200</a>
</span><span class=lnt id=hl-33-201><a class=lnlinks href=#hl-33-201>201</a>
</span><span class=lnt id=hl-33-202><a class=lnlinks href=#hl-33-202>202</a>
</span><span class=lnt id=hl-33-203><a class=lnlinks href=#hl-33-203>203</a>
</span><span class=lnt id=hl-33-204><a class=lnlinks href=#hl-33-204>204</a>
</span><span class=lnt id=hl-33-205><a class=lnlinks href=#hl-33-205>205</a>
</span><span class=lnt id=hl-33-206><a class=lnlinks href=#hl-33-206>206</a>
</span><span class=lnt id=hl-33-207><a class=lnlinks href=#hl-33-207>207</a>
</span><span class=lnt id=hl-33-208><a class=lnlinks href=#hl-33-208>208</a>
</span><span class=lnt id=hl-33-209><a class=lnlinks href=#hl-33-209>209</a>
</span><span class=lnt id=hl-33-210><a class=lnlinks href=#hl-33-210>210</a>
</span><span class=lnt id=hl-33-211><a class=lnlinks href=#hl-33-211>211</a>
</span><span class=lnt id=hl-33-212><a class=lnlinks href=#hl-33-212>212</a>
</span><span class=lnt id=hl-33-213><a class=lnlinks href=#hl-33-213>213</a>
</span><span class=lnt id=hl-33-214><a class=lnlinks href=#hl-33-214>214</a>
</span><span class=lnt id=hl-33-215><a class=lnlinks href=#hl-33-215>215</a>
</span><span class=lnt id=hl-33-216><a class=lnlinks href=#hl-33-216>216</a>
</span><span class=lnt id=hl-33-217><a class=lnlinks href=#hl-33-217>217</a>
</span><span class=lnt id=hl-33-218><a class=lnlinks href=#hl-33-218>218</a>
</span><span class=lnt id=hl-33-219><a class=lnlinks href=#hl-33-219>219</a>
</span><span class=lnt id=hl-33-220><a class=lnlinks href=#hl-33-220>220</a>
</span><span class=lnt id=hl-33-221><a class=lnlinks href=#hl-33-221>221</a>
</span><span class=lnt id=hl-33-222><a class=lnlinks href=#hl-33-222>222</a>
</span><span class=lnt id=hl-33-223><a class=lnlinks href=#hl-33-223>223</a>
</span><span class=lnt id=hl-33-224><a class=lnlinks href=#hl-33-224>224</a>
</span><span class=lnt id=hl-33-225><a class=lnlinks href=#hl-33-225>225</a>
</span><span class=lnt id=hl-33-226><a class=lnlinks href=#hl-33-226>226</a>
</span><span class=lnt id=hl-33-227><a class=lnlinks href=#hl-33-227>227</a>
</span><span class=lnt id=hl-33-228><a class=lnlinks href=#hl-33-228>228</a>
</span><span class=lnt id=hl-33-229><a class=lnlinks href=#hl-33-229>229</a>
</span><span class=lnt id=hl-33-230><a class=lnlinks href=#hl-33-230>230</a>
</span><span class=lnt id=hl-33-231><a class=lnlinks href=#hl-33-231>231</a>
</span><span class=lnt id=hl-33-232><a class=lnlinks href=#hl-33-232>232</a>
</span><span class=lnt id=hl-33-233><a class=lnlinks href=#hl-33-233>233</a>
</span><span class=lnt id=hl-33-234><a class=lnlinks href=#hl-33-234>234</a>
</span><span class=lnt id=hl-33-235><a class=lnlinks href=#hl-33-235>235</a>
</span><span class=lnt id=hl-33-236><a class=lnlinks href=#hl-33-236>236</a>
</span><span class=lnt id=hl-33-237><a class=lnlinks href=#hl-33-237>237</a>
</span><span class=lnt id=hl-33-238><a class=lnlinks href=#hl-33-238>238</a>
</span><span class=lnt id=hl-33-239><a class=lnlinks href=#hl-33-239>239</a>
</span><span class=lnt id=hl-33-240><a class=lnlinks href=#hl-33-240>240</a>
</span><span class=lnt id=hl-33-241><a class=lnlinks href=#hl-33-241>241</a>
</span><span class=lnt id=hl-33-242><a class=lnlinks href=#hl-33-242>242</a>
</span><span class=lnt id=hl-33-243><a class=lnlinks href=#hl-33-243>243</a>
</span><span class=lnt id=hl-33-244><a class=lnlinks href=#hl-33-244>244</a>
</span><span class=lnt id=hl-33-245><a class=lnlinks href=#hl-33-245>245</a>
</span><span class=lnt id=hl-33-246><a class=lnlinks href=#hl-33-246>246</a>
</span><span class=lnt id=hl-33-247><a class=lnlinks href=#hl-33-247>247</a>
</span><span class=lnt id=hl-33-248><a class=lnlinks href=#hl-33-248>248</a>
</span><span class=lnt id=hl-33-249><a class=lnlinks href=#hl-33-249>249</a>
</span><span class=lnt id=hl-33-250><a class=lnlinks href=#hl-33-250>250</a>
</span><span class=lnt id=hl-33-251><a class=lnlinks href=#hl-33-251>251</a>
</span><span class=lnt id=hl-33-252><a class=lnlinks href=#hl-33-252>252</a>
</span><span class=lnt id=hl-33-253><a class=lnlinks href=#hl-33-253>253</a>
</span><span class=lnt id=hl-33-254><a class=lnlinks href=#hl-33-254>254</a>
</span><span class=lnt id=hl-33-255><a class=lnlinks href=#hl-33-255>255</a>
</span><span class=lnt id=hl-33-256><a class=lnlinks href=#hl-33-256>256</a>
</span><span class=lnt id=hl-33-257><a class=lnlinks href=#hl-33-257>257</a>
</span><span class=lnt id=hl-33-258><a class=lnlinks href=#hl-33-258>258</a>
</span><span class=lnt id=hl-33-259><a class=lnlinks href=#hl-33-259>259</a>
</span><span class=lnt id=hl-33-260><a class=lnlinks href=#hl-33-260>260</a>
</span><span class=lnt id=hl-33-261><a class=lnlinks href=#hl-33-261>261</a>
</span><span class=lnt id=hl-33-262><a class=lnlinks href=#hl-33-262>262</a>
</span><span class=lnt id=hl-33-263><a class=lnlinks href=#hl-33-263>263</a>
</span><span class=lnt id=hl-33-264><a class=lnlinks href=#hl-33-264>264</a>
</span><span class=lnt id=hl-33-265><a class=lnlinks href=#hl-33-265>265</a>
</span><span class=lnt id=hl-33-266><a class=lnlinks href=#hl-33-266>266</a>
</span><span class=lnt id=hl-33-267><a class=lnlinks href=#hl-33-267>267</a>
</span><span class=lnt id=hl-33-268><a class=lnlinks href=#hl-33-268>268</a>
</span><span class=lnt id=hl-33-269><a class=lnlinks href=#hl-33-269>269</a>
</span><span class=lnt id=hl-33-270><a class=lnlinks href=#hl-33-270>270</a>
</span><span class=lnt id=hl-33-271><a class=lnlinks href=#hl-33-271>271</a>
</span><span class=lnt id=hl-33-272><a class=lnlinks href=#hl-33-272>272</a>
</span><span class=lnt id=hl-33-273><a class=lnlinks href=#hl-33-273>273</a>
</span><span class=lnt id=hl-33-274><a class=lnlinks href=#hl-33-274>274</a>
</span><span class=lnt id=hl-33-275><a class=lnlinks href=#hl-33-275>275</a>
</span><span class=lnt id=hl-33-276><a class=lnlinks href=#hl-33-276>276</a>
</span><span class=lnt id=hl-33-277><a class=lnlinks href=#hl-33-277>277</a>
</span><span class=lnt id=hl-33-278><a class=lnlinks href=#hl-33-278>278</a>
</span><span class=lnt id=hl-33-279><a class=lnlinks href=#hl-33-279>279</a>
</span><span class=lnt id=hl-33-280><a class=lnlinks href=#hl-33-280>280</a>
</span><span class=lnt id=hl-33-281><a class=lnlinks href=#hl-33-281>281</a>
</span><span class=lnt id=hl-33-282><a class=lnlinks href=#hl-33-282>282</a>
</span><span class=lnt id=hl-33-283><a class=lnlinks href=#hl-33-283>283</a>
</span><span class=lnt id=hl-33-284><a class=lnlinks href=#hl-33-284>284</a>
</span><span class=lnt id=hl-33-285><a class=lnlinks href=#hl-33-285>285</a>
</span><span class=lnt id=hl-33-286><a class=lnlinks href=#hl-33-286>286</a>
</span><span class=lnt id=hl-33-287><a class=lnlinks href=#hl-33-287>287</a>
</span><span class=lnt id=hl-33-288><a class=lnlinks href=#hl-33-288>288</a>
</span><span class=lnt id=hl-33-289><a class=lnlinks href=#hl-33-289>289</a>
</span><span class=lnt id=hl-33-290><a class=lnlinks href=#hl-33-290>290</a>
</span><span class=lnt id=hl-33-291><a class=lnlinks href=#hl-33-291>291</a>
</span><span class=lnt id=hl-33-292><a class=lnlinks href=#hl-33-292>292</a>
</span><span class=lnt id=hl-33-293><a class=lnlinks href=#hl-33-293>293</a>
</span><span class=lnt id=hl-33-294><a class=lnlinks href=#hl-33-294>294</a>
</span><span class=lnt id=hl-33-295><a class=lnlinks href=#hl-33-295>295</a>
</span><span class=lnt id=hl-33-296><a class=lnlinks href=#hl-33-296>296</a>
</span><span class=lnt id=hl-33-297><a class=lnlinks href=#hl-33-297>297</a>
</span><span class=lnt id=hl-33-298><a class=lnlinks href=#hl-33-298>298</a>
</span><span class=lnt id=hl-33-299><a class=lnlinks href=#hl-33-299>299</a>
</span><span class=lnt id=hl-33-300><a class=lnlinks href=#hl-33-300>300</a>
</span><span class=lnt id=hl-33-301><a class=lnlinks href=#hl-33-301>301</a>
</span><span class=lnt id=hl-33-302><a class=lnlinks href=#hl-33-302>302</a>
</span><span class=lnt id=hl-33-303><a class=lnlinks href=#hl-33-303>303</a>
</span><span class=lnt id=hl-33-304><a class=lnlinks href=#hl-33-304>304</a>
</span><span class=lnt id=hl-33-305><a class=lnlinks href=#hl-33-305>305</a>
</span><span class=lnt id=hl-33-306><a class=lnlinks href=#hl-33-306>306</a>
</span><span class=lnt id=hl-33-307><a class=lnlinks href=#hl-33-307>307</a>
</span><span class=lnt id=hl-33-308><a class=lnlinks href=#hl-33-308>308</a>
</span><span class=lnt id=hl-33-309><a class=lnlinks href=#hl-33-309>309</a>
</span><span class=lnt id=hl-33-310><a class=lnlinks href=#hl-33-310>310</a>
</span><span class=lnt id=hl-33-311><a class=lnlinks href=#hl-33-311>311</a>
</span><span class=lnt id=hl-33-312><a class=lnlinks href=#hl-33-312>312</a>
</span><span class=lnt id=hl-33-313><a class=lnlinks href=#hl-33-313>313</a>
</span><span class=lnt id=hl-33-314><a class=lnlinks href=#hl-33-314>314</a>
</span><span class=lnt id=hl-33-315><a class=lnlinks href=#hl-33-315>315</a>
</span><span class=lnt id=hl-33-316><a class=lnlinks href=#hl-33-316>316</a>
</span><span class=lnt id=hl-33-317><a class=lnlinks href=#hl-33-317>317</a>
</span><span class=lnt id=hl-33-318><a class=lnlinks href=#hl-33-318>318</a>
</span><span class=lnt id=hl-33-319><a class=lnlinks href=#hl-33-319>319</a>
</span><span class=lnt id=hl-33-320><a class=lnlinks href=#hl-33-320>320</a>
</span><span class=lnt id=hl-33-321><a class=lnlinks href=#hl-33-321>321</a>
</span><span class=lnt id=hl-33-322><a class=lnlinks href=#hl-33-322>322</a>
</span><span class=lnt id=hl-33-323><a class=lnlinks href=#hl-33-323>323</a>
</span><span class=lnt id=hl-33-324><a class=lnlinks href=#hl-33-324>324</a>
</span><span class=lnt id=hl-33-325><a class=lnlinks href=#hl-33-325>325</a>
</span><span class=lnt id=hl-33-326><a class=lnlinks href=#hl-33-326>326</a>
</span><span class=lnt id=hl-33-327><a class=lnlinks href=#hl-33-327>327</a>
</span><span class=lnt id=hl-33-328><a class=lnlinks href=#hl-33-328>328</a>
</span><span class=lnt id=hl-33-329><a class=lnlinks href=#hl-33-329>329</a>
</span><span class=lnt id=hl-33-330><a class=lnlinks href=#hl-33-330>330</a>
</span><span class=lnt id=hl-33-331><a class=lnlinks href=#hl-33-331>331</a>
</span><span class=lnt id=hl-33-332><a class=lnlinks href=#hl-33-332>332</a>
</span><span class=lnt id=hl-33-333><a class=lnlinks href=#hl-33-333>333</a>
</span><span class=lnt id=hl-33-334><a class=lnlinks href=#hl-33-334>334</a>
</span><span class=lnt id=hl-33-335><a class=lnlinks href=#hl-33-335>335</a>
</span><span class=lnt id=hl-33-336><a class=lnlinks href=#hl-33-336>336</a>
</span><span class=lnt id=hl-33-337><a class=lnlinks href=#hl-33-337>337</a>
</span><span class=lnt id=hl-33-338><a class=lnlinks href=#hl-33-338>338</a>
</span><span class=lnt id=hl-33-339><a class=lnlinks href=#hl-33-339>339</a>
</span><span class=lnt id=hl-33-340><a class=lnlinks href=#hl-33-340>340</a>
</span><span class=lnt id=hl-33-341><a class=lnlinks href=#hl-33-341>341</a>
</span><span class=lnt id=hl-33-342><a class=lnlinks href=#hl-33-342>342</a>
</span><span class=lnt id=hl-33-343><a class=lnlinks href=#hl-33-343>343</a>
</span><span class=lnt id=hl-33-344><a class=lnlinks href=#hl-33-344>344</a>
</span><span class=lnt id=hl-33-345><a class=lnlinks href=#hl-33-345>345</a>
</span><span class=lnt id=hl-33-346><a class=lnlinks href=#hl-33-346>346</a>
</span><span class=lnt id=hl-33-347><a class=lnlinks href=#hl-33-347>347</a>
</span><span class=lnt id=hl-33-348><a class=lnlinks href=#hl-33-348>348</a>
</span><span class=lnt id=hl-33-349><a class=lnlinks href=#hl-33-349>349</a>
</span><span class=lnt id=hl-33-350><a class=lnlinks href=#hl-33-350>350</a>
</span><span class=lnt id=hl-33-351><a class=lnlinks href=#hl-33-351>351</a>
</span><span class=lnt id=hl-33-352><a class=lnlinks href=#hl-33-352>352</a>
</span><span class=lnt id=hl-33-353><a class=lnlinks href=#hl-33-353>353</a>
</span><span class=lnt id=hl-33-354><a class=lnlinks href=#hl-33-354>354</a>
</span><span class=lnt id=hl-33-355><a class=lnlinks href=#hl-33-355>355</a>
</span><span class=lnt id=hl-33-356><a class=lnlinks href=#hl-33-356>356</a>
</span><span class=lnt id=hl-33-357><a class=lnlinks href=#hl-33-357>357</a>
</span><span class=lnt id=hl-33-358><a class=lnlinks href=#hl-33-358>358</a>
</span><span class=lnt id=hl-33-359><a class=lnlinks href=#hl-33-359>359</a>
</span><span class=lnt id=hl-33-360><a class=lnlinks href=#hl-33-360>360</a>
</span><span class=lnt id=hl-33-361><a class=lnlinks href=#hl-33-361>361</a>
</span><span class=lnt id=hl-33-362><a class=lnlinks href=#hl-33-362>362</a>
</span><span class=lnt id=hl-33-363><a class=lnlinks href=#hl-33-363>363</a>
</span><span class=lnt id=hl-33-364><a class=lnlinks href=#hl-33-364>364</a>
</span><span class=lnt id=hl-33-365><a class=lnlinks href=#hl-33-365>365</a>
</span><span class=lnt id=hl-33-366><a class=lnlinks href=#hl-33-366>366</a>
</span><span class=lnt id=hl-33-367><a class=lnlinks href=#hl-33-367>367</a>
</span><span class=lnt id=hl-33-368><a class=lnlinks href=#hl-33-368>368</a>
</span><span class=lnt id=hl-33-369><a class=lnlinks href=#hl-33-369>369</a>
</span><span class=lnt id=hl-33-370><a class=lnlinks href=#hl-33-370>370</a>
</span><span class=lnt id=hl-33-371><a class=lnlinks href=#hl-33-371>371</a>
</span><span class=lnt id=hl-33-372><a class=lnlinks href=#hl-33-372>372</a>
</span><span class=lnt id=hl-33-373><a class=lnlinks href=#hl-33-373>373</a>
</span><span class=lnt id=hl-33-374><a class=lnlinks href=#hl-33-374>374</a>
</span><span class=lnt id=hl-33-375><a class=lnlinks href=#hl-33-375>375</a>
</span><span class=lnt id=hl-33-376><a class=lnlinks href=#hl-33-376>376</a>
</span><span class=lnt id=hl-33-377><a class=lnlinks href=#hl-33-377>377</a>
</span><span class=lnt id=hl-33-378><a class=lnlinks href=#hl-33-378>378</a>
</span><span class=lnt id=hl-33-379><a class=lnlinks href=#hl-33-379>379</a>
</span><span class=lnt id=hl-33-380><a class=lnlinks href=#hl-33-380>380</a>
</span><span class=lnt id=hl-33-381><a class=lnlinks href=#hl-33-381>381</a>
</span><span class=lnt id=hl-33-382><a class=lnlinks href=#hl-33-382>382</a>
</span><span class=lnt id=hl-33-383><a class=lnlinks href=#hl-33-383>383</a>
</span><span class=lnt id=hl-33-384><a class=lnlinks href=#hl-33-384>384</a>
</span><span class=lnt id=hl-33-385><a class=lnlinks href=#hl-33-385>385</a>
</span><span class=lnt id=hl-33-386><a class=lnlinks href=#hl-33-386>386</a>
</span><span class=lnt id=hl-33-387><a class=lnlinks href=#hl-33-387>387</a>
</span><span class=lnt id=hl-33-388><a class=lnlinks href=#hl-33-388>388</a>
</span><span class=lnt id=hl-33-389><a class=lnlinks href=#hl-33-389>389</a>
</span><span class=lnt id=hl-33-390><a class=lnlinks href=#hl-33-390>390</a>
</span><span class=lnt id=hl-33-391><a class=lnlinks href=#hl-33-391>391</a>
</span><span class=lnt id=hl-33-392><a class=lnlinks href=#hl-33-392>392</a>
</span><span class=lnt id=hl-33-393><a class=lnlinks href=#hl-33-393>393</a>
</span><span class=lnt id=hl-33-394><a class=lnlinks href=#hl-33-394>394</a>
</span><span class=lnt id=hl-33-395><a class=lnlinks href=#hl-33-395>395</a>
</span><span class=lnt id=hl-33-396><a class=lnlinks href=#hl-33-396>396</a>
</span><span class=lnt id=hl-33-397><a class=lnlinks href=#hl-33-397>397</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Domain-Driven Design 기반 온라인 쇼핑몰 주문 시스템</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>decimal</span> <span class=kn>import</span> <span class=n>Decimal</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>enum</span> <span class=kn>import</span> <span class=n>Enum</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span><span class=p>,</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>uuid</span> <span class=kn>import</span> <span class=n>UUID</span><span class=p>,</span> <span class=n>uuid4</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1># 1. 도메인 계층 (Domain Layer)</span>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 밸류 오브젝트 (Value Objects)</span>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span><span class=p>(</span><span class=n>frozen</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># 불변성 보장</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Money</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;금액을 표현하는 밸류 오브젝트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>amount</span><span class=p>:</span> <span class=n>Decimal</span>
</span></span><span class=line><span class=cl>    <span class=n>currency</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;KRW&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>add</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>:</span> <span class=s1>&#39;Money&#39;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s1>&#39;Money&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>currency</span> <span class=o>!=</span> <span class=n>other</span><span class=o>.</span><span class=n>currency</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;다른 통화는 더할 수 없습니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Money</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>amount</span> <span class=o>+</span> <span class=n>other</span><span class=o>.</span><span class=n>amount</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>currency</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>multiply</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>multiplier</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s1>&#39;Money&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Money</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>amount</span> <span class=o>*</span> <span class=n>multiplier</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>currency</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span><span class=p>(</span><span class=n>frozen</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CustomerId</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;고객 ID를 표현하는 밸류 오브젝트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span><span class=p>:</span> <span class=n>UUID</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@classmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>generate</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s1>&#39;CustomerId&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span><span class=n>uuid4</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span><span class=p>(</span><span class=n>frozen</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Address</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;배송 주소를 표현하는 밸류 오브젝트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>street</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>city</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>postal_code</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>country</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;KR&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>__post_init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>street</span> <span class=ow>or</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>city</span> <span class=ow>or</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>postal_code</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;주소 정보가 불완전합니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 도메인 이벤트 (Domain Events)</span>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>DomainEvent</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;도메인 이벤트 기본 클래스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>event_id</span><span class=p>:</span> <span class=n>UUID</span>
</span></span><span class=line><span class=cl>    <span class=n>occurred_at</span><span class=p>:</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl>    <span class=n>aggregate_id</span><span class=p>:</span> <span class=n>UUID</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderCreated</span><span class=p>(</span><span class=n>DomainEvent</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 생성 이벤트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>customer_id</span><span class=p>:</span> <span class=n>UUID</span>
</span></span><span class=line><span class=cl>    <span class=n>total_amount</span><span class=p>:</span> <span class=n>Money</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderItemAdded</span><span class=p>(</span><span class=n>DomainEvent</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 항목 추가 이벤트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>product_id</span><span class=p>:</span> <span class=n>UUID</span>
</span></span><span class=line><span class=cl>    <span class=n>quantity</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    <span class=n>price</span><span class=p>:</span> <span class=n>Money</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 열거형 (Enums)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderStatus</span><span class=p>(</span><span class=n>Enum</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>DRAFT</span> <span class=o>=</span> <span class=s2>&#34;DRAFT&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>CONFIRMED</span> <span class=o>=</span> <span class=s2>&#34;CONFIRMED&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>PAID</span> <span class=o>=</span> <span class=s2>&#34;PAID&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>SHIPPED</span> <span class=o>=</span> <span class=s2>&#34;SHIPPED&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>DELIVERED</span> <span class=o>=</span> <span class=s2>&#34;DELIVERED&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>CANCELLED</span> <span class=o>=</span> <span class=s2>&#34;CANCELLED&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 엔티티 (Entities)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderItem</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 항목 엔티티&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=n>UUID</span><span class=p>,</span> <span class=n>quantity</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>unit_price</span><span class=p>:</span> <span class=n>Money</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>quantity</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;수량은 0보다 커야 합니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>unit_price</span><span class=o>.</span><span class=n>amount</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;가격은 0보다 커야 합니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>product_id</span> <span class=o>=</span> <span class=n>product_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>quantity</span> <span class=o>=</span> <span class=n>quantity</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>unit_price</span> <span class=o>=</span> <span class=n>unit_price</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>calculate_total</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Money</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;항목별 총액 계산&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>unit_price</span><span class=o>.</span><span class=n>multiply</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>quantity</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>change_quantity</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>new_quantity</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;수량 변경&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>new_quantity</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;수량은 0보다 커야 합니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>quantity</span> <span class=o>=</span> <span class=n>new_quantity</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 애그리거트 루트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>:</span> <span class=n>CustomerId</span><span class=p>,</span> <span class=n>shipping_address</span><span class=p>:</span> <span class=n>Address</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>id</span> <span class=o>=</span> <span class=n>uuid4</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>customer_id</span> <span class=o>=</span> <span class=n>customer_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>shipping_address</span> <span class=o>=</span> <span class=n>shipping_address</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>DRAFT</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>created_at</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>OrderItem</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_domain_events</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>DomainEvent</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>add_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=n>UUID</span><span class=p>,</span> <span class=n>quantity</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>unit_price</span><span class=p>:</span> <span class=n>Money</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 항목 추가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>!=</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>DRAFT</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;확정된 주문은 수정할 수 없습니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 기존 항목 확인</span>
</span></span><span class=line><span class=cl>        <span class=n>existing_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_find_item</span><span class=p>(</span><span class=n>product_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>existing_item</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>existing_item</span><span class=o>.</span><span class=n>change_quantity</span><span class=p>(</span><span class=n>existing_item</span><span class=o>.</span><span class=n>quantity</span> <span class=o>+</span> <span class=n>quantity</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>item</span> <span class=o>=</span> <span class=n>OrderItem</span><span class=p>(</span><span class=n>product_id</span><span class=p>,</span> <span class=n>quantity</span><span class=p>,</span> <span class=n>unit_price</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 도메인 이벤트 추가</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_add_domain_event</span><span class=p>(</span><span class=n>OrderItemAdded</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>event_id</span><span class=o>=</span><span class=n>uuid4</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=n>occurred_at</span><span class=o>=</span><span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=n>aggregate_id</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>product_id</span><span class=o>=</span><span class=n>product_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>quantity</span><span class=o>=</span><span class=n>quantity</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>price</span><span class=o>=</span><span class=n>unit_price</span>
</span></span><span class=line><span class=cl>        <span class=p>))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>remove_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=n>UUID</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 항목 제거&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>!=</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>DRAFT</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;확정된 주문은 수정할 수 없습니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>items</span> <span class=o>=</span> <span class=p>[</span><span class=n>item</span> <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span> <span class=k>if</span> <span class=n>item</span><span class=o>.</span><span class=n>product_id</span> <span class=o>!=</span> <span class=n>product_id</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>calculate_total</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Money</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 총액 계산&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>Money</span><span class=p>(</span><span class=n>Decimal</span><span class=p>(</span><span class=s1>&#39;0&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>total</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>calculate_total</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>[</span><span class=mi>1</span><span class=p>:]:</span>
</span></span><span class=line><span class=cl>            <span class=n>total</span> <span class=o>=</span> <span class=n>total</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>item</span><span class=o>.</span><span class=n>calculate_total</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>total</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>confirm_order</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 확정&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>!=</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>DRAFT</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;이미 확정된 주문입니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;주문 항목이 없습니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>CONFIRMED</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 주문 생성 이벤트 발행</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_add_domain_event</span><span class=p>(</span><span class=n>OrderCreated</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>event_id</span><span class=o>=</span><span class=n>uuid4</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=n>occurred_at</span><span class=o>=</span><span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=n>aggregate_id</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>customer_id</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>customer_id</span><span class=o>.</span><span class=n>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>total_amount</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>calculate_total</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>ship_order</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 배송&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>!=</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>PAID</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;결제된 주문만 배송 가능합니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>SHIPPED</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_find_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=n>UUID</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>OrderItem</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;상품 ID로 주문 항목 찾기&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>next</span><span class=p>((</span><span class=n>item</span> <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>items</span> <span class=k>if</span> <span class=n>item</span><span class=o>.</span><span class=n>product_id</span> <span class=o>==</span> <span class=n>product_id</span><span class=p>),</span> <span class=kc>None</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_add_domain_event</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>:</span> <span class=n>DomainEvent</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;도메인 이벤트 추가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_domain_events</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_domain_events</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>DomainEvent</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;도메인 이벤트 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_domain_events</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>clear_domain_events</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;도메인 이벤트 초기화&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_domain_events</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 도메인 서비스 (Domain Services)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderDomainService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 도메인 서비스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@staticmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>can_apply_discount</span><span class=p>(</span><span class=n>order</span><span class=p>:</span> <span class=n>Order</span><span class=p>,</span> <span class=n>discount_percentage</span><span class=p>:</span> <span class=n>Decimal</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;할인 적용 가능 여부 판단&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>(</span><span class=n>order</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>DRAFT</span> <span class=ow>and</span> 
</span></span><span class=line><span class=cl>                <span class=n>order</span><span class=o>.</span><span class=n>calculate_total</span><span class=p>()</span><span class=o>.</span><span class=n>amount</span> <span class=o>&gt;=</span> <span class=n>Decimal</span><span class=p>(</span><span class=s1>&#39;100000&#39;</span><span class=p>)</span> <span class=ow>and</span>
</span></span><span class=line><span class=cl>                <span class=n>discount_percentage</span> <span class=o>&lt;=</span> <span class=n>Decimal</span><span class=p>(</span><span class=s1>&#39;0.3&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@staticmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>calculate_shipping_fee</span><span class=p>(</span><span class=n>order</span><span class=p>:</span> <span class=n>Order</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Money</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;배송료 계산&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>total</span> <span class=o>=</span> <span class=n>order</span><span class=o>.</span><span class=n>calculate_total</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>total</span><span class=o>.</span><span class=n>amount</span> <span class=o>&gt;=</span> <span class=n>Decimal</span><span class=p>(</span><span class=s1>&#39;50000&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>Money</span><span class=p>(</span><span class=n>Decimal</span><span class=p>(</span><span class=s1>&#39;0&#39;</span><span class=p>))</span>  <span class=c1># 무료배송</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Money</span><span class=p>(</span><span class=n>Decimal</span><span class=p>(</span><span class=s1>&#39;3000&#39;</span><span class=p>))</span>   <span class=c1># 기본 배송료</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 리포지토리 인터페이스 (Repository Interface)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderRepository</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 리포지토리 인터페이스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>:</span> <span class=n>Order</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 저장&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_by_id</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>:</span> <span class=n>UUID</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Order</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;ID로 주문 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_by_customer_id</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>:</span> <span class=n>CustomerId</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Order</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;고객 ID로 주문 목록 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1># 2. 응용 계층 (Application Layer)</span>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CreateOrderCommand</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 생성 커맨드&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>customer_id</span><span class=p>:</span> <span class=n>UUID</span>
</span></span><span class=line><span class=cl>    <span class=n>shipping_address</span><span class=p>:</span> <span class=n>Address</span>
</span></span><span class=line><span class=cl>    <span class=n>items</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>dict</span><span class=p>]</span>  <span class=c1># [{&#34;product_id&#34;: UUID, &#34;quantity&#34;: int, &#34;unit_price&#34;: Decimal}]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AddOrderItemCommand</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 항목 추가 커맨드&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>order_id</span><span class=p>:</span> <span class=n>UUID</span>
</span></span><span class=line><span class=cl>    <span class=n>product_id</span><span class=p>:</span> <span class=n>UUID</span>
</span></span><span class=line><span class=cl>    <span class=n>quantity</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    <span class=n>unit_price</span><span class=p>:</span> <span class=n>Decimal</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderApplicationService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 응용 서비스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_repository</span><span class=p>:</span> <span class=n>OrderRepository</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>order_repository</span> <span class=o>=</span> <span class=n>order_repository</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create_order</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>command</span><span class=p>:</span> <span class=n>CreateOrderCommand</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>UUID</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>customer_id</span> <span class=o>=</span> <span class=n>CustomerId</span><span class=p>(</span><span class=n>command</span><span class=o>.</span><span class=n>customer_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>order</span> <span class=o>=</span> <span class=n>Order</span><span class=p>(</span><span class=n>customer_id</span><span class=p>,</span> <span class=n>command</span><span class=o>.</span><span class=n>shipping_address</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 주문 항목 추가</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>item_data</span> <span class=ow>in</span> <span class=n>command</span><span class=o>.</span><span class=n>items</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>order</span><span class=o>.</span><span class=n>add_item</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>product_id</span><span class=o>=</span><span class=n>item_data</span><span class=p>[</span><span class=s2>&#34;product_id&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=n>quantity</span><span class=o>=</span><span class=n>item_data</span><span class=p>[</span><span class=s2>&#34;quantity&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=n>unit_price</span><span class=o>=</span><span class=n>Money</span><span class=p>(</span><span class=n>Decimal</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>item_data</span><span class=p>[</span><span class=s2>&#34;unit_price&#34;</span><span class=p>])))</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>order_repository</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>order</span><span class=o>.</span><span class=n>id</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>add_order_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>command</span><span class=p>:</span> <span class=n>AddOrderItemCommand</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 항목 추가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>order</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>order_repository</span><span class=o>.</span><span class=n>find_by_id</span><span class=p>(</span><span class=n>command</span><span class=o>.</span><span class=n>order_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;주문을 찾을 수 없습니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>order</span><span class=o>.</span><span class=n>add_item</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>command</span><span class=o>.</span><span class=n>product_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>command</span><span class=o>.</span><span class=n>quantity</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>Money</span><span class=p>(</span><span class=n>Decimal</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>command</span><span class=o>.</span><span class=n>unit_price</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>order_repository</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>confirm_order</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>:</span> <span class=n>UUID</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 확정&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>order</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>order_repository</span><span class=o>.</span><span class=n>find_by_id</span><span class=p>(</span><span class=n>order_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;주문을 찾을 수 없습니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>order</span><span class=o>.</span><span class=n>confirm_order</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>order_repository</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 이벤트 처리 (실제로는 이벤트 버스로 발행)</span>
</span></span><span class=line><span class=cl>        <span class=n>events</span> <span class=o>=</span> <span class=n>order</span><span class=o>.</span><span class=n>get_domain_events</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>events</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;이벤트 발행: </span><span class=si>{</span><span class=n>event</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>order</span><span class=o>.</span><span class=n>clear_domain_events</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1># 3. 인프라스트럭처 계층 (Infrastructure Layer)</span>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>InMemoryOrderRepository</span><span class=p>(</span><span class=n>OrderRepository</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;인메모리 주문 리포지토리 구현체&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_orders</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=n>UUID</span><span class=p>,</span> <span class=n>Order</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>:</span> <span class=n>Order</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 저장&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_orders</span><span class=p>[</span><span class=n>order</span><span class=o>.</span><span class=n>id</span><span class=p>]</span> <span class=o>=</span> <span class=n>order</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_by_id</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>:</span> <span class=n>UUID</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Order</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;ID로 주문 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_orders</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>order_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_by_customer_id</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>:</span> <span class=n>CustomerId</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Order</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;고객 ID로 주문 목록 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>[</span><span class=n>order</span> <span class=k>for</span> <span class=n>order</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_orders</span><span class=o>.</span><span class=n>values</span><span class=p>()</span> 
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>order</span><span class=o>.</span><span class=n>customer_id</span> <span class=o>==</span> <span class=n>customer_id</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1># 4. 프레젠테이션 계층 (Presentation Layer)</span>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderController</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 컨트롤러&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_service</span><span class=p>:</span> <span class=n>OrderApplicationService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>order_service</span> <span class=o>=</span> <span class=n>order_service</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create_order</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request_data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 생성 API&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>command</span> <span class=o>=</span> <span class=n>CreateOrderCommand</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>customer_id</span><span class=o>=</span><span class=n>UUID</span><span class=p>(</span><span class=n>request_data</span><span class=p>[</span><span class=s2>&#34;customer_id&#34;</span><span class=p>]),</span>
</span></span><span class=line><span class=cl>                <span class=n>shipping_address</span><span class=o>=</span><span class=n>Address</span><span class=p>(</span><span class=o>**</span><span class=n>request_data</span><span class=p>[</span><span class=s2>&#34;shipping_address&#34;</span><span class=p>]),</span>
</span></span><span class=line><span class=cl>                <span class=n>items</span><span class=o>=</span><span class=n>request_data</span><span class=p>[</span><span class=s2>&#34;items&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>order_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>order_service</span><span class=o>.</span><span class=n>create_order</span><span class=p>(</span><span class=n>command</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span> <span class=s2>&#34;order_id&#34;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>order_id</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span> <span class=s2>&#34;error&#34;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1># 5. 사용 예시</span>
</span></span><span class=line><span class=cl><span class=c1># ============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># 의존성 주입 설정</span>
</span></span><span class=line><span class=cl>    <span class=n>repository</span> <span class=o>=</span> <span class=n>InMemoryOrderRepository</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>service</span> <span class=o>=</span> <span class=n>OrderApplicationService</span><span class=p>(</span><span class=n>repository</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>controller</span> <span class=o>=</span> <span class=n>OrderController</span><span class=p>(</span><span class=n>service</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 주문 생성 예시</span>
</span></span><span class=line><span class=cl>    <span class=n>request</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;customer_id&#34;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid4</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;shipping_address&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;street&#34;</span><span class=p>:</span> <span class=s2>&#34;강남대로 123&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;city&#34;</span><span class=p>:</span> <span class=s2>&#34;서울&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;postal_code&#34;</span><span class=p>:</span> <span class=s2>&#34;06234&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;items&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;product_id&#34;</span><span class=p>:</span> <span class=n>uuid4</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;quantity&#34;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;unit_price&#34;</span><span class=p>:</span> <span class=s2>&#34;25000&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;product_id&#34;</span><span class=p>:</span> <span class=n>uuid4</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;quantity&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;unit_price&#34;</span><span class=p>:</span> <span class=s2>&#34;15000&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>controller</span><span class=o>.</span><span class=n>create_order</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;주문 생성 결과:&#34;</span><span class=p>,</span> <span class=n>result</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>result</span><span class=p>[</span><span class=s2>&#34;success&#34;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=n>order_id</span> <span class=o>=</span> <span class=n>UUID</span><span class=p>(</span><span class=n>result</span><span class=p>[</span><span class=s2>&#34;order_id&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 주문 확정</span>
</span></span><span class=line><span class=cl>        <span class=n>service</span><span class=o>.</span><span class=n>confirm_order</span><span class=p>(</span><span class=n>order_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;주문이 확정되었습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 주문 조회</span>
</span></span><span class=line><span class=cl>        <span class=n>order</span> <span class=o>=</span> <span class=n>repository</span><span class=o>.</span><span class=n>find_by_id</span><span class=p>(</span><span class=n>order_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;주문 상태: </span><span class=si>{</span><span class=n>order</span><span class=o>.</span><span class=n>status</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;주문 총액: </span><span class=si>{</span><span class=n>order</span><span class=o>.</span><span class=n>calculate_total</span><span class=p>()</span><span class=o>.</span><span class=n>amount</span><span class=si>}</span><span class=s2> </span><span class=si>{</span><span class=n>order</span><span class=o>.</span><span class=n>calculate_total</span><span class=p>()</span><span class=o>.</span><span class=n>currency</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=도메인-계층>도메인 계층<a hidden class=anchor aria-hidden=true href=#도메인-계층>#</a></h4><table><thead><tr><th>구성 요소</th><th>유형</th><th>핵심 역할</th></tr></thead><tbody><tr><td><strong>Order</strong></td><td>Aggregate Root</td><td>주문 생명주기 관리 및 비즈니스 규칙 강제</td></tr><tr><td><strong>OrderItem</strong></td><td>Entity</td><td>개별 상품 주문 정보 관리</td></tr><tr><td><strong>Money, CustomerId, Address</strong></td><td>Value Objects</td><td>도메인 개념의 타입 안전성 보장</td></tr><tr><td><strong>OrderStatus</strong></td><td>Enumeration</td><td>주문 상태의 명확한 정의</td></tr><tr><td><strong>DomainEvent</strong></td><td>Event</td><td>도메인에서 발생하는 중요 사건 표현</td></tr><tr><td><strong>OrderDomainService</strong></td><td>Domain Service</td><td>복잡한 도메인 로직 처리</td></tr><tr><td><strong>OrderRepository</strong></td><td>Repository Interface</td><td>영속성 추상화</td></tr></tbody></table><pre class=mermaid>classDiagram
    direction TB
    
    %% Aggregate Root
    class Order {
        &lt;&lt;Aggregate Root&gt;&gt;
        - id: UUID
        - customerId: CustomerId
        - shippingAddress: Address
        - status: OrderStatus
        - createdAt: datetime
        - items: List~OrderItem~
        - _domainEvents: List~DomainEvent~
        + addItem(productId: UUID, quantity: int, unitPrice: Money)
        + removeItem(productId: UUID)
        + calculateTotal(): Money
        + confirmOrder()
        + shipOrder()
        + getDomainEvents(): List~DomainEvent~
        + clearDomainEvents()
        - _findItem(productId: UUID): OrderItem
        - _addDomainEvent(event: DomainEvent)
    }
    
    %% Entities
    class OrderItem {
        &lt;&lt;Entity&gt;&gt;
        - productId: UUID
        - quantity: int
        - unitPrice: Money
        + calculateTotal(): Money
        + changeQuantity(newQuantity: int)
    }
    
    %% Value Objects
    class Money {
        &lt;&lt;Value Object&gt;&gt;
        - amount: Decimal
        - currency: string
        + add(other: Money): Money
        + multiply(multiplier: int): Money
    }
    
    class CustomerId {
        &lt;&lt;Value Object&gt;&gt;
        - value: UUID
        + generate(): CustomerId
    }
    
    class Address {
        &lt;&lt;Value Object&gt;&gt;
        - street: string
        - city: string
        - postalCode: string
        - country: string
    }
    
    %% Enumerations
    class OrderStatus {
        &lt;&lt;enumeration&gt;&gt;
        DRAFT
        CONFIRMED
        PAID
        SHIPPED
        DELIVERED
        CANCELLED
    }
    
    %% Domain Events
    class DomainEvent {
        &lt;&lt;Abstract&gt;&gt;
        - eventId: UUID
        - occurredAt: datetime
        - aggregateId: UUID
    }
    
    class OrderCreated {
        &lt;&lt;Domain Event&gt;&gt;
        - customerId: UUID
        - totalAmount: Money
    }
    
    class OrderItemAdded {
        &lt;&lt;Domain Event&gt;&gt;
        - productId: UUID
        - quantity: int
        - price: Money
    }
    
    %% Domain Service
    class OrderDomainService {
        &lt;&lt;Domain Service&gt;&gt;
        + canApplyDiscount(order: Order, discountPercentage: Decimal): bool
        + calculateShippingFee(order: Order): Money
    }
    
    %% Repository Interface
    class OrderRepository {
        &lt;&lt;interface&gt;&gt;
        + save(order: Order): void
        + findById(orderId: UUID): Order
        + findByCustomerId(customerId: CustomerId): List~Order~
    }
    
    %% 관계 설정
    Order --&gt; &#34;1..*&#34; OrderItem : aggregates
    Order --&gt; &#34;1&#34; CustomerId : contains
    Order --&gt; &#34;1&#34; Address : contains
    Order --&gt; &#34;1&#34; OrderStatus : has
    Order --&gt; &#34;*&#34; DomainEvent : publishes
    OrderItem --&gt; &#34;1&#34; Money : uses
    
    DomainEvent &lt;|-- OrderCreated : extends
    DomainEvent &lt;|-- OrderItemAdded : extends
    
    OrderDomainService ..&gt; Order : operates on
    OrderRepository ..&gt; Order : manages
</pre><h4 id=응용프레젠테이션인프라-계층>응용/프레젠테이션/인프라 계층<a hidden class=anchor aria-hidden=true href=#응용프레젠테이션인프라-계층>#</a></h4><table><thead><tr><th>구성 요소</th><th>유형</th><th>핵심 역할</th></tr></thead><tbody><tr><td><strong>OrderController</strong></td><td>Presentation</td><td>HTTP 요청/응답 처리</td></tr><tr><td><strong>OrderApplicationService</strong></td><td>Application</td><td>유스케이스 조정 및 트랜잭션 관리</td></tr><tr><td><strong>Command Objects</strong></td><td>Application</td><td>요청 데이터 캡슐화</td></tr><tr><td><strong>InMemoryOrderRepository</strong></td><td>Infrastructure</td><td>실제 저장소 구현체</td></tr></tbody></table><pre class=mermaid>classDiagram
    direction TB
    
    %% Presentation Layer
    class OrderController {
        &lt;&lt;Controller&gt;&gt;
        - orderService: OrderApplicationService
        + createOrder(requestData: dict): dict
    }
    
    %% Application Layer
    class OrderApplicationService {
        &lt;&lt;Application Service&gt;&gt;
        - orderRepository: OrderRepository
        + createOrder(command: CreateOrderCommand): UUID
        + addOrderItem(command: AddOrderItemCommand): void
        + confirmOrder(orderId: UUID): void
    }
    
    %% Commands (Application Layer)
    class CreateOrderCommand {
        &lt;&lt;Command&gt;&gt;
        - customerId: UUID
        - shippingAddress: Address
        - items: List~dict~
    }
    
    class AddOrderItemCommand {
        &lt;&lt;Command&gt;&gt;
        - orderId: UUID
        - productId: UUID
        - quantity: int
        - unitPrice: Decimal
    }
    
    %% Infrastructure Layer
    class InMemoryOrderRepository {
        &lt;&lt;Repository Implementation&gt;&gt;
        - _orders: dict~UUID, Order~
        + save(order: Order): void
        + findById(orderId: UUID): Order
        + findByCustomerId(customerId: CustomerId): List~Order~
    }
    
    %% Repository Interface (from Domain)
    class OrderRepository {
        &lt;&lt;interface&gt;&gt;
        + save(order: Order): void
        + findById(orderId: UUID): Order
        + findByCustomerId(customerId: CustomerId): List~Order~
    }
    
    %% Domain Reference (for context)
    class Order {
        &lt;&lt;Aggregate Root&gt;&gt;
        - id: UUID
        - customerId: CustomerId
        - status: OrderStatus
        + confirmOrder()
        + addItem()
        + calculateTotal(): Money
    }
    
    class Address {
        &lt;&lt;Value Object&gt;&gt;
        - street: string
        - city: string
        - postalCode: string
        - country: string
    }
    
    %% 관계 설정
    OrderController --&gt; OrderApplicationService : uses
    OrderApplicationService --&gt; OrderRepository : depends on
    OrderApplicationService --&gt; CreateOrderCommand : processes
    OrderApplicationService --&gt; AddOrderItemCommand : processes
    
    OrderRepository &lt;|.. InMemoryOrderRepository : implements
    
    CreateOrderCommand --&gt; Address : contains
    OrderApplicationService ..&gt; Order : creates and manages
    InMemoryOrderRepository --&gt; Order : stores
</pre><h4 id=데이터-플로우>데이터 플로우<a hidden class=anchor aria-hidden=true href=#데이터-플로우>#</a></h4><ol><li><strong>요청 처리</strong>: <code>OrderController</code> → <code>OrderApplicationService</code></li><li><strong>커맨드 변환</strong>: HTTP Request → Command Object</li><li><strong>도메인 로직 실행</strong>: Application Service → Domain Objects</li><li><strong>데이터 영속화</strong>: Application Service → Repository</li><li><strong>응답 생성</strong>: Domain Objects → DTO → HTTP Response</li></ol><h4 id=추가-개선-및-확장-가능-부분>추가 개선 및 확장 가능 부분<a hidden class=anchor aria-hidden=true href=#추가-개선-및-확장-가능-부분>#</a></h4><h5 id=결제-payment-도메인-추가>결제 (Payment) 도메인 추가<a hidden class=anchor aria-hidden=true href=#결제-payment-도메인-추가>#</a></h5><pre class=mermaid>classDiagram
    class Payment {
        - paymentId: UUID
        - orderId: UUID
        - amount: Money
        - paymentMethod: PaymentMethod
        - status: PaymentStatus
        - processedAt: datetime
        + process()
        + refund(amount: Money)
        + cancel()
    }
    
    class PaymentMethod {
        &lt;&lt;enumeration&gt;&gt;
        CREDIT_CARD
        BANK_TRANSFER
        KAKAO_PAY
        NAVER_PAY
    }
    
    class PaymentStatus {
        &lt;&lt;enumeration&gt;&gt;
        PENDING
        COMPLETED
        FAILED
        REFUNDED
        CANCELLED
    }
    
    Payment --&gt; PaymentMethod
    Payment --&gt; PaymentStatus
    Payment --&gt; Money
</pre><h5 id=재고-inventory-도메인-추가>재고 (Inventory) 도메인 추가<a hidden class=anchor aria-hidden=true href=#재고-inventory-도메인-추가>#</a></h5><pre class=mermaid>classDiagram
    class Product {
        - productId: UUID
        - name: string
        - price: Money
        - inventory: Inventory
        + updatePrice(newPrice: Money)
        + isAvailable(quantity: int): bool
    }
    
    class Inventory {
        - productId: UUID
        - currentStock: int
        - reservedStock: int
        - minimumStock: int
        + reserve(quantity: int)
        + release(quantity: int)
        + restock(quantity: int)
        + getAvailableStock(): int
    }
    
    Product --&gt; Inventory
    Product --&gt; Money
</pre><h5 id=이벤트-소싱-event-sourcing-패턴-적용>이벤트 소싱 (Event Sourcing) 패턴 적용<a hidden class=anchor aria-hidden=true href=#이벤트-소싱-event-sourcing-패턴-적용>#</a></h5><table><thead><tr><th>구성 요소</th><th>설명</th></tr></thead><tbody><tr><td><strong>EventStore</strong></td><td>도메인 이벤트를 순서대로 저장하는 저장소</td></tr><tr><td><strong>EventStreamReader</strong></td><td>이벤트 스트림을 읽어 애그리거트 상태를 복원</td></tr><tr><td><strong>EventBus</strong></td><td>이벤트를 다른 바운디드 컨텍스트로 전파</td></tr><tr><td><strong>Snapshot</strong></td><td>성능 최적화를 위한 애그리거트 스냅샷</td></tr></tbody></table><h5 id=cqrs-command-query-responsibility-segregation-적용>CQRS (Command Query Responsibility Segregation) 적용<a hidden class=anchor aria-hidden=true href=#cqrs-command-query-responsibility-segregation-적용>#</a></h5><pre class=mermaid>classDiagram
    %% 커맨드 사이드
    class OrderCommandHandler {
        + handle(CreateOrderCommand)
        + handle(AddOrderItemCommand)
        + handle(ConfirmOrderCommand)
    }
    
    %% 쿼리 사이드
    class OrderQueryHandler {
        + handle(GetOrderByIdQuery): OrderDto
        + handle(GetOrdersByCustomerQuery): List~OrderDto~
        + handle(GetOrderSummaryQuery): OrderSummaryDto
    }
    
    class OrderDto {
        - orderId: string
        - customerName: string
        - totalAmount: decimal
        - status: string
        - createdAt: datetime
    }
    
    class OrderSummaryDto {
        - totalOrders: int
        - totalRevenue: decimal
        - averageOrderValue: decimal
    }
    
    OrderQueryHandler --&gt; OrderDto
    OrderQueryHandler --&gt; OrderSummaryDto
</pre><h5 id=도메인-검증-강화>도메인 검증 강화<a hidden class=anchor aria-hidden=true href=#도메인-검증-강화>#</a></h5><table><thead><tr><th>검증 유형</th><th>구현 위치</th><th>예시</th></tr></thead><tbody><tr><td><strong>불변 조건 (Invariants)</strong></td><td>Entity/Value Object</td><td>주문 총액이 0 보다 커야 함</td></tr><tr><td><strong>전제 조건 (Preconditions)</strong></td><td>메서드 시작 부분</td><td>주문 상태가 DRAFT 일 때만 항목 추가 가능</td></tr><tr><td><strong>후행 조건 (Postconditions)</strong></td><td>메서드 종료 부분</td><td>주문 확정 후 상태가 CONFIRMED 인지 확인</td></tr><tr><td><strong>사업 규칙 (Business Rules)</strong></td><td>Domain Service</td><td>할인율은 최대 30% 까지만 적용 가능</td></tr></tbody></table><h5 id=성능-최적화-패턴>성능 최적화 패턴<a hidden class=anchor aria-hidden=true href=#성능-최적화-패턴>#</a></h5><pre class=mermaid>classDiagram
    class OrderProjection {
        - orderId: UUID
        - customerName: string
        - totalAmount: decimal
        - itemCount: int
        - lastUpdated: datetime
        + updateFromEvent(event: DomainEvent)
    }
    
    class OrderCache {
        - cache: Map~UUID, OrderProjection~
        + get(orderId: UUID): OrderProjection
        + put(orderId: UUID, projection: OrderProjection)
        + invalidate(orderId: UUID)
    }
    
    class OrderStatistics {
        - totalOrders: long
        - totalRevenue: Money
        - averageOrderValue: Money
        + updateFromOrderCreated(event: OrderCreated)
        + updateFromOrderCancelled(event: OrderCancelled)
    }
    
    OrderCache --&gt; OrderProjection
</pre><h5 id=보안-및-권한-관리>보안 및 권한 관리<a hidden class=anchor aria-hidden=true href=#보안-및-권한-관리>#</a></h5><table><thead><tr><th>보안 요소</th><th>설명</th><th>구현 방법</th></tr></thead><tbody><tr><td><strong>인증 (Authentication)</strong></td><td>사용자 신원 확인</td><td>JWT 토큰, OAuth 2.0</td></tr><tr><td><strong>인가 (Authorization)</strong></td><td>권한 기반 접근 제어</td><td>RBAC (Role-Based Access Control)</td></tr><tr><td><strong>데이터 암호화</strong></td><td>민감 정보 보호</td><td>개인정보, 결제 정보 암호화</td></tr><tr><td><strong>감사 로그</strong></td><td>중요 작업 기록</td><td>주문 생성, 수정, 취소 이력 추적</td></tr></tbody></table><h5 id=모니터링-및-관찰-가능성>모니터링 및 관찰 가능성<a hidden class=anchor aria-hidden=true href=#모니터링-및-관찰-가능성>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-40-1><a class=lnlinks href=#hl-40-1> 1</a>
</span><span class=lnt id=hl-40-2><a class=lnlinks href=#hl-40-2> 2</a>
</span><span class=lnt id=hl-40-3><a class=lnlinks href=#hl-40-3> 3</a>
</span><span class=lnt id=hl-40-4><a class=lnlinks href=#hl-40-4> 4</a>
</span><span class=lnt id=hl-40-5><a class=lnlinks href=#hl-40-5> 5</a>
</span><span class=lnt id=hl-40-6><a class=lnlinks href=#hl-40-6> 6</a>
</span><span class=lnt id=hl-40-7><a class=lnlinks href=#hl-40-7> 7</a>
</span><span class=lnt id=hl-40-8><a class=lnlinks href=#hl-40-8> 8</a>
</span><span class=lnt id=hl-40-9><a class=lnlinks href=#hl-40-9> 9</a>
</span><span class=lnt id=hl-40-10><a class=lnlinks href=#hl-40-10>10</a>
</span><span class=lnt id=hl-40-11><a class=lnlinks href=#hl-40-11>11</a>
</span><span class=lnt id=hl-40-12><a class=lnlinks href=#hl-40-12>12</a>
</span><span class=lnt id=hl-40-13><a class=lnlinks href=#hl-40-13>13</a>
</span><span class=lnt id=hl-40-14><a class=lnlinks href=#hl-40-14>14</a>
</span><span class=lnt id=hl-40-15><a class=lnlinks href=#hl-40-15>15</a>
</span><span class=lnt id=hl-40-16><a class=lnlinks href=#hl-40-16>16</a>
</span><span class=lnt id=hl-40-17><a class=lnlinks href=#hl-40-17>17</a>
</span><span class=lnt id=hl-40-18><a class=lnlinks href=#hl-40-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 메트릭스 (Metrics) 예시</span>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderMetrics</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 관련 메트릭스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>orders_created_total</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    <span class=n>orders_confirmed_total</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    <span class=n>orders_cancelled_total</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    <span class=n>average_order_value</span><span class=p>:</span> <span class=n>Decimal</span>
</span></span><span class=line><span class=cl>    <span class=n>order_processing_duration</span><span class=p>:</span> <span class=nb>float</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 분산 추적 (Distributed Tracing) 예시</span>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TraceContext</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;분산 추적 컨텍스트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>trace_id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>span_id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>parent_span_id</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>operation_name</span><span class=p>:</span> <span class=nb>str</span>
</span></span></code></pre></td></tr></table></div></div><p>이러한 확장을 통해 더욱 견고하고 확장 가능한 도메인 주도 설계 기반 시스템을 구축할 수 있다. 각 패턴과 구성 요소는 시스템의 복잡성과 요구사항에 따라 단계적으로 도입하는 것을 권장한다.</p><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><table><thead><tr><th>분류</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>설계 중심</td><td>비즈니스 중심 설계</td><td>도메인 모델이 비즈니스 로직을 정확히 반영하여 소프트웨어와 비즈니스의 정렬성 향상</td></tr><tr><td>커뮤니케이션</td><td>유비쿼터스 언어</td><td>도메인 전문가와 개발자가 공유하는 공통 언어로 일관된 커뮤니케이션 유지</td></tr><tr><td>구조화</td><td>바운디드 컨텍스트</td><td>도메인 경계를 명확히 구분하여 복잡성 분리 및 모듈화 가능</td></tr><tr><td>유지보수성</td><td>높은 응집도 / 낮은 결합도</td><td>관련 도메인 로직의 집중화 및 컨텍스트 간 최소 의존성으로 변경 용이</td></tr><tr><td>테스트 용이성</td><td>테스트 편의성</td><td>도메인 로직이 독립적으로 유지되어 단위 테스트 및 유지보수 간편</td></tr><tr><td>확장성</td><td>독립적 배포 및 진화 구조</td><td>마이크로서비스 및 독립 배포에 적합한 구조로, 확장성과 팀 분산 개발에 유리</td></tr><tr><td>복잡성 관리</td><td>복잡한 비즈니스 모델 캡슐화</td><td>핵심 도메인을 중심으로 복잡한 로직을 체계적으로 정리하여 유지보수성 및 설계 품질 향상</td></tr><tr><td>DevOps 연계</td><td>이벤트 기반 구조 연동 가능</td><td>이벤트 흐름 명시화를 통한 감사 로그, 분석 로깅, DevOps 기반 모니터링에 유리</td></tr></tbody></table><h3 id=단점-및-문제점>단점 및 문제점<a hidden class=anchor aria-hidden=true href=#단점-및-문제점>#</a></h3><h4 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h4><table><thead><tr><th>카테고리</th><th>항목</th><th>설명</th><th>권장 대응 전략</th></tr></thead><tbody><tr><td>학습/적용 난이도</td><td>높은 러닝 커브</td><td>DDD 개념 (BC, Aggregate, VO 등) 과 패턴 학습에 시간과 경험 필요</td><td>점진적 도입, 사내 교육 운영, 멘토링 체계 구축</td></tr><tr><td>설계 복잡성</td><td>과도한 추상화</td><td>단순 CRUD 시스템에도 불필요한 설계 적용 시 오버엔지니어링 우려</td><td>복잡성 분석 후 핵심 도메인만 적용 (하이브리드 구조 병행)</td></tr><tr><td>초기 개발 부담</td><td>높은 설계 및 협업 비용</td><td>바운디드 컨텍스트 식별, 모델링, 유비쿼터스 언어 설계 등에 초기 시간 요구</td><td>Event Storming, 프로토타이핑, Evolutionary Design 도입</td></tr><tr><td>조직 문화 요건</td><td>도메인 전문가 협업 의존</td><td>도메인 전문가와 지속적인 협업이 필수지만 현실적으로 확보 어려움</td><td>도메인 지식 문서화, 전문가 세션 정기화, 팀 내 도메인 챔피언 지정</td></tr><tr><td>운영 복잡도</td><td>CI/CD, 통합 테스트 부담</td><td>바운디드 컨텍스트별 배포, 계약 테스트, 이벤트 흐름 테스트 등으로 DevOps 부담 증가</td><td>GitOps, Contract Testing, CI 자동화 전략 적용</td></tr></tbody></table><h4 id=문제점>문제점<a hidden class=anchor aria-hidden=true href=#문제점>#</a></h4><table><thead><tr><th>문제 유형</th><th>항목</th><th>원인 또는 진단</th><th>영향</th><th>해결 전략 / 대응 기법</th></tr></thead><tbody><tr><td>모델링 오류</td><td>Anemic Domain Model</td><td>로직이 서비스 계층에 집중, Entity 가 데이터만 보유</td><td>도메인 로직 분산, 캡슐화 부족</td><td>Entity 내부에 비즈니스 로직 포함, Rich Domain Model 설계</td></tr><tr><td>모델 경계 오류</td><td>Bounded Context 경계 불명확</td><td>컨텍스트 간 책임 불분명, 용어 혼용</td><td>시스템 일관성 저하, 충돌 발생</td><td>Context Map 작성, 용어 기준 경계 설정, 이벤트 스토밍으로 언어 경계 정의</td></tr><tr><td>오용 패턴</td><td>CQRS / Event Sourcing 과도 도입</td><td>단순 기능에도 복잡한 아키텍처 적용</td><td>성능 저하, 유지보수 어려움</td><td>도메인 복잡도 기준 적용 여부 판단, 전략적 패턴 분리 적용</td></tr><tr><td>설계 비대화</td><td>도메인 서비스 오남용</td><td>모든 비즈니스 로직을 서비스에 몰아넣음</td><td>도메인 객체의 책임 약화</td><td>Entity 중심 설계로 책임 재조정, 서비스 로직 분산</td></tr><tr><td>통합 문제</td><td>레거시 통합 복잡도</td><td>기존 시스템과 모델/계약 불일치</td><td>마이그레이션 실패, 서비스 중단 위험</td><td>Anti-Corruption Layer, Strangler Pattern 단계적 도입</td></tr><tr><td>이벤트 과다 사용</td><td>도메인 이벤트 오남용</td><td>명확한 목적 없는 이벤트 남발</td><td>추적 어려움, 순환 참조 위험</td><td>명확한 이벤트 설계 가이드 수립, 이벤트 체계 문서화</td></tr><tr><td>데이터 일관성</td><td>Aggregate 경계 오설정</td><td>동일 트랜잭션에 다수 Aggregate 포함</td><td>트랜잭션 실패, 성능 저하</td><td>경계 재설정, SAGA, Eventual Consistency 기반 설계</td></tr><tr><td>성능 저하</td><td>리포지토리 과사용 / 쿼리 병목</td><td>복잡한 비즈니스 로직이 리포지토리에 집중</td><td>성능 병목, 테스트 어려움</td><td>CQRS 도입, Specification Pattern, Projection 분리</td></tr></tbody></table><h5 id=anemic-domain-model-문제>Anemic Domain Model 문제<a hidden class=anchor aria-hidden=true href=#anemic-domain-model-문제>#</a></h5><p><strong>원인</strong>: 비즈니스 로직이 Service Layer 에 집중되어 Domain Object 가 데이터만 담는 현상<br><strong>영향</strong>: 도메인 모델의 캡슐화 파괴, 비즈니스 로직 분산<br><strong>탐지 및 진단</strong>: Entity 와 Value Object 에 getter/setter 만 존재하는지 검사<br><strong>예방 방법</strong>: Entity 와 Value Object 에 비즈니스 로직 포함, Tell Don&rsquo;t Ask 원칙 적용<br><strong>해결 방법</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-41-1><a class=lnlinks href=#hl-41-1> 1</a>
</span><span class=lnt id=hl-41-2><a class=lnlinks href=#hl-41-2> 2</a>
</span><span class=lnt id=hl-41-3><a class=lnlinks href=#hl-41-3> 3</a>
</span><span class=lnt id=hl-41-4><a class=lnlinks href=#hl-41-4> 4</a>
</span><span class=lnt id=hl-41-5><a class=lnlinks href=#hl-41-5> 5</a>
</span><span class=lnt id=hl-41-6><a class=lnlinks href=#hl-41-6> 6</a>
</span><span class=lnt id=hl-41-7><a class=lnlinks href=#hl-41-7> 7</a>
</span><span class=lnt id=hl-41-8><a class=lnlinks href=#hl-41-8> 8</a>
</span><span class=lnt id=hl-41-9><a class=lnlinks href=#hl-41-9> 9</a>
</span><span class=lnt id=hl-41-10><a class=lnlinks href=#hl-41-10>10</a>
</span><span class=lnt id=hl-41-11><a class=lnlinks href=#hl-41-11>11</a>
</span><span class=lnt id=hl-41-12><a class=lnlinks href=#hl-41-12>12</a>
</span><span class=lnt id=hl-41-13><a class=lnlinks href=#hl-41-13>13</a>
</span><span class=lnt id=hl-41-14><a class=lnlinks href=#hl-41-14>14</a>
</span><span class=lnt id=hl-41-15><a class=lnlinks href=#hl-41-15>15</a>
</span><span class=lnt id=hl-41-16><a class=lnlinks href=#hl-41-16>16</a>
</span><span class=lnt id=hl-41-17><a class=lnlinks href=#hl-41-17>17</a>
</span><span class=lnt id=hl-41-18><a class=lnlinks href=#hl-41-18>18</a>
</span><span class=lnt id=hl-41-19><a class=lnlinks href=#hl-41-19>19</a>
</span><span class=lnt id=hl-41-20><a class=lnlinks href=#hl-41-20>20</a>
</span><span class=lnt id=hl-41-21><a class=lnlinks href=#hl-41-21>21</a>
</span><span class=lnt id=hl-41-22><a class=lnlinks href=#hl-41-22>22</a>
</span><span class=lnt id=hl-41-23><a class=lnlinks href=#hl-41-23>23</a>
</span><span class=lnt id=hl-41-24><a class=lnlinks href=#hl-41-24>24</a>
</span><span class=lnt id=hl-41-25><a class=lnlinks href=#hl-41-25>25</a>
</span><span class=lnt id=hl-41-26><a class=lnlinks href=#hl-41-26>26</a>
</span><span class=lnt id=hl-41-27><a class=lnlinks href=#hl-41-27>27</a>
</span><span class=lnt id=hl-41-28><a class=lnlinks href=#hl-41-28>28</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 문제 있는 코드 (Anemic)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>total</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>items</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_total</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>total</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>set_total</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>total</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>total</span> <span class=o>=</span> <span class=n>total</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 개선된 코드 (Rich Domain Model)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_total</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_items</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>add_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_calculate_total</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_calculate_total</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_total</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>item</span><span class=o>.</span><span class=n>get_subtotal</span><span class=p>()</span> <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>total</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_total</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=repository-패턴-오용>Repository 패턴 오용<a hidden class=anchor aria-hidden=true href=#repository-패턴-오용>#</a></h5><p><strong>원인</strong>: Repository 를 단순 DAO 로 사용하거나 비즈니스 로직 포함<br><strong>영향</strong>: 관심사 분리 원칙 위배, 테스트 어려움<br><strong>탐지 및 진단</strong>: Repository 에 비즈니스 로직이나 복잡한 쿼리 로직 존재 여부 확인<br><strong>예방 방법</strong>: Repository 인터페이스를 도메인 관점에서 정의<br><strong>해결 방법</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-42-1><a class=lnlinks href=#hl-42-1> 1</a>
</span><span class=lnt id=hl-42-2><a class=lnlinks href=#hl-42-2> 2</a>
</span><span class=lnt id=hl-42-3><a class=lnlinks href=#hl-42-3> 3</a>
</span><span class=lnt id=hl-42-4><a class=lnlinks href=#hl-42-4> 4</a>
</span><span class=lnt id=hl-42-5><a class=lnlinks href=#hl-42-5> 5</a>
</span><span class=lnt id=hl-42-6><a class=lnlinks href=#hl-42-6> 6</a>
</span><span class=lnt id=hl-42-7><a class=lnlinks href=#hl-42-7> 7</a>
</span><span class=lnt id=hl-42-8><a class=lnlinks href=#hl-42-8> 8</a>
</span><span class=lnt id=hl-42-9><a class=lnlinks href=#hl-42-9> 9</a>
</span><span class=lnt id=hl-42-10><a class=lnlinks href=#hl-42-10>10</a>
</span><span class=lnt id=hl-42-11><a class=lnlinks href=#hl-42-11>11</a>
</span><span class=lnt id=hl-42-12><a class=lnlinks href=#hl-42-12>12</a>
</span><span class=lnt id=hl-42-13><a class=lnlinks href=#hl-42-13>13</a>
</span><span class=lnt id=hl-42-14><a class=lnlinks href=#hl-42-14>14</a>
</span><span class=lnt id=hl-42-15><a class=lnlinks href=#hl-42-15>15</a>
</span><span class=lnt id=hl-42-16><a class=lnlinks href=#hl-42-16>16</a>
</span><span class=lnt id=hl-42-17><a class=lnlinks href=#hl-42-17>17</a>
</span><span class=lnt id=hl-42-18><a class=lnlinks href=#hl-42-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 잘못된 예시</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CustomerRepository</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_customers_with_high_value_orders</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>threshold</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 복잡한 비즈니스 로직이 Repository에 포함됨</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 올바른 예시</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CustomerRepository</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_by_specification</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>specification</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 도메인 사양 객체를 통한 검색</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>HighValueCustomerSpecification</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>threshold</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>threshold</span> <span class=o>=</span> <span class=n>threshold</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>is_satisfied_by</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>customer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>customer</span><span class=o>.</span><span class=n>get_total_order_value</span><span class=p>()</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>threshold</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=도전-과제-및-해결책>도전 과제 및 해결책<a hidden class=anchor aria-hidden=true href=#도전-과제-및-해결책>#</a></h3><h4 id=조직-및-협업-과제>조직 및 협업 과제<a hidden class=anchor aria-hidden=true href=#조직-및-협업-과제>#</a></h4><table><thead><tr><th>도전 과제</th><th>원인</th><th>영향</th><th>예방 전략</th><th>해결 방법</th></tr></thead><tbody><tr><td>도메인 전문가 협업 부족</td><td>시간 제약, 용어 차이</td><td>정보 단절, 설계 오류</td><td>정기적 이벤트 스토밍, 유비쿼터스 언어 정착</td><td>크로스 펑셔널 팀 구성, 페어 설계</td></tr><tr><td>DDD 도입 저항</td><td>기존 관행, 학습 부담</td><td>도입 지연, 낮은 품질</td><td>교육 세션, 점진적 도입</td><td>성공 사례 공유, 실험적 적용</td></tr><tr><td>팀 간 도메인 이해 격차</td><td>용어 정의 불일치</td><td>소통 오류</td><td>용어사전 작성, 모델 리뷰</td><td>코드 리뷰 시 도메인 개념 반영</td></tr><tr><td>조직과 컨텍스트 불일치</td><td>조직 구조와 도메인 불일치</td><td>Context Drift</td><td>Team Topologies 반영</td><td>팀 구조/컨텍스트 재정렬</td></tr></tbody></table><h4 id=설계-및-모델링-과제>설계 및 모델링 과제<a hidden class=anchor aria-hidden=true href=#설계-및-모델링-과제>#</a></h4><table><thead><tr><th>도전 과제</th><th>원인</th><th>영향</th><th>예방 전략</th><th>해결 방법</th></tr></thead><tbody><tr><td>컨텍스트 경계 설정 어려움</td><td>개념적 추상성</td><td>복잡도 증가</td><td>이벤트 스토밍, 용어 기반 구분</td><td>조직 구조 연계한 Context Map 설계</td></tr><tr><td>도메인 모델 설계 난이도</td><td>복잡한 비즈니스 로직</td><td>추상화 실패</td><td>핵심 도메인부터 모델링</td><td>반복적 리팩토링 및 모델링 세션 활용</td></tr><tr><td>유비쿼터스 언어 유지 어려움</td><td>문서화 부족</td><td>소통 오류</td><td>코드 기반 언어 사용, 정기 워크숍</td><td>정기 리뷰 및 자동화 도구 적용</td></tr></tbody></table><h4 id=기술-및-아키텍처-과제>기술 및 아키텍처 과제<a hidden class=anchor aria-hidden=true href=#기술-및-아키텍처-과제>#</a></h4><table><thead><tr><th>도전 과제</th><th>원인</th><th>영향</th><th>예방 전략</th><th>해결 방법</th></tr></thead><tbody><tr><td>이벤트 아키텍처 복잡성</td><td>멱등성, 순서 문제</td><td>디버깅 어려움</td><td>이벤트 스키마 명세화</td><td>메시지 추적 도구, 멱등 처리 적용</td></tr><tr><td>데이터 일관성 확보</td><td>트랜잭션 경계 넘는 연산</td><td>일관성 오류</td><td>Saga, Outbox, 보상 트랜잭션</td><td>분산 트레이싱 기반 설계</td></tr><tr><td>CQRS/Event Sourcing 과도 적용</td><td>모든 도메인에 적용</td><td>설계 오버헤드</td><td>복잡도 기준 선별 도입</td><td>Hybrid CQRS 전략 적용</td></tr><tr><td>이벤트/모델 버전 관리 문제</td><td>계약 변경 시 장애</td><td>서비스 중단</td><td>명세 기반 계약 테스트</td><td>Event Versioning, Schema Registry</td></tr><tr><td>설계 문서 부족</td><td>코드 중심 개발</td><td>설계 의도 손실</td><td>Living Docs 도입</td><td>ADR, 자동화 문서 시스템 활용</td></tr></tbody></table><h4 id=레거시-통합-과제>레거시 통합 과제<a hidden class=anchor aria-hidden=true href=#레거시-통합-과제>#</a></h4><table><thead><tr><th>도전 과제</th><th>원인</th><th>영향</th><th>예방 전략</th><th>해결 방법</th></tr></thead><tbody><tr><td>마이그레이션 복잡성</td><td>기술 부채, 데이터 종속</td><td>전환 비용 증가</td><td>점진적 전환, ACL 활용</td><td>Strangler Fig 패턴, 리팩터링 적용</td></tr><tr><td>데이터 정합성 문제</td><td>컨텍스트 간 중복 저장</td><td>불일치 및 오류</td><td>이벤트 기반 통합</td><td>동기 - 비동기 분리, Context Mapping 활용</td></tr></tbody></table><h4 id=운영-및-테스트-과제>운영 및 테스트 과제<a hidden class=anchor aria-hidden=true href=#운영-및-테스트-과제>#</a></h4><table><thead><tr><th>도전 과제</th><th>원인</th><th>영향</th><th>예방 전략</th><th>해결 방법</th></tr></thead><tbody><tr><td>이벤트 호환성 문제</td><td>이벤트 변경</td><td>소비자 장애</td><td>명시적 버전 관리</td><td>하위 호환 이벤트 설계, API Gateway 활용</td></tr><tr><td>모니터링/추적 부재</td><td>비동기 구조</td><td>장애 진단 어려움</td><td>도메인 이벤트 기반 KPI</td><td>Distributed Tracing, 이벤트 로깅</td></tr><tr><td>테스트 어려움</td><td>비동기 흐름, 순서</td><td>테스트 신뢰도 저하</td><td>Contract Test 도입</td><td>Replay 기반 통합 테스트 구성</td></tr></tbody></table><h4 id=비즈니스외부-환경-과제>비즈니스/외부 환경 과제<a hidden class=anchor aria-hidden=true href=#비즈니스외부-환경-과제>#</a></h4><table><thead><tr><th>도전 과제</th><th>원인</th><th>영향</th><th>예방 전략</th><th>해결 방법</th></tr></thead><tbody><tr><td>시장 변화 대응 어려움</td><td>설계 고정화</td><td>민첩성 저하</td><td>느슨한 결합, 기능 토글</td><td>CD 기반 유연한 배포</td></tr><tr><td>규제 및 감사 추적</td><td>컴플라이언스 요구</td><td>감사/규제 대응 어려움</td><td>이벤트 기반 설계</td><td>Event Sourcing, Projection 기반 감사 로그 구성</td></tr></tbody></table><h4 id=기술-트렌드-관련-과제>기술 트렌드 관련 과제<a hidden class=anchor aria-hidden=true href=#기술-트렌드-관련-과제>#</a></h4><table><thead><tr><th>도전 과제</th><th>원인</th><th>영향</th><th>예방 전략</th><th>해결 방법</th></tr></thead><tbody><tr><td>마이크로서비스와 DDD 경계 불일치</td><td>컨텍스트 경계 모호</td><td>분산 복잡도 증가</td><td>Context Map 기반 설계</td><td>이벤트 기반 아키텍처, SAGA 적용</td></tr><tr><td>클라우드 네이티브 적응</td><td>기존 설계 패턴과의 괴리</td><td>확장성 제약</td><td>클라우드 패턴 반영</td><td>Serverless, 컨테이너 기반 설계</td></tr></tbody></table><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th><th><strong>권장사항</strong></th></tr></thead><tbody><tr><td><strong>도메인 협업</strong></td><td>도메인 전문가 참여 확보</td><td>비즈니스 로직의 왜곡 방지를 위해 실제 도메인 지식을 갖춘 전문가 참여 필요</td><td>Event Storming, 정기 설계 세션, 1:1 인터뷰 기반 협업</td></tr><tr><td></td><td>유비쿼터스 언어 정립</td><td>코드, 문서, 회의 등에서 일관된 도메인 용어 사용</td><td>용어 사전 구축, 도메인별 리뷰 체크리스트 활용</td></tr><tr><td><strong>설계 및 경계 정의</strong></td><td>바운디드 컨텍스트 식별</td><td>도메인 기능별 명확한 경계 정의가 없을 경우 책임 불분명</td><td>컨텍스트 맵 작성, 조직 구조 및 팀 책임 기반 경계 설계</td></tr><tr><td></td><td>핵심 도메인 우선 적용</td><td>단순 기능 영역까지 과도한 적용 시 시간과 리소스 낭비</td><td>복잡도가 높은 핵심 영역부터 점진적으로 적용</td></tr><tr><td></td><td>모델 단순화</td><td>VO, Entity, Service 등 과도한 패턴 남용은 복잡성 증가</td><td>설계 복잡도 대비 비즈니스 가치 중심으로 전술적 패턴 선택</td></tr><tr><td><strong>기술/인프라 준비</strong></td><td>이벤트 기반 통신</td><td>REST 기반만 사용하는 경우 경계 간 통합 유연성이 낮음</td><td>Kafka, RabbitMQ 등 메시징 기반 아키텍처 도입</td></tr><tr><td></td><td>Anti-Corruption Layer 설계</td><td>레거시 시스템과의 직접 통합은 도메인 오염 유발</td><td>ACL 패턴 활용, 레거시 점진적 교체 전략 수립</td></tr><tr><td></td><td>이벤트 소싱 및 CQRS 인프라 검토</td><td>고급 패턴 적용 시 기술 스택/운영 환경의 준비도 필요</td><td>스냅샷 주기, 별도 읽기 모델 DB 구성 등 인프라 사전 준비</td></tr><tr><td><strong>운영 및 배포</strong></td><td>배포 전략 설계</td><td>각 컨텍스트가 독립 배포되지 않으면 변경 시 전체 서비스 영향 발생</td><td>CI/CD 분리, Context 단위 배포 파이프라인 구성</td></tr><tr><td></td><td>데이터 일관성 보장</td><td>트랜잭션 범위가 컨텍스트를 넘으면 강한 일관성 보장 어려움</td><td>Saga 패턴, Eventual Consistency 도입</td></tr><tr><td></td><td>이벤트 버전 관리</td><td>스키마 변경 시 하위 호환성 문제 발생 가능</td><td>이벤트 명세 관리, 버전 명시, Message Contract 기반 테스트 적용</td></tr><tr><td><strong>테스트 및 품질 관리</strong></td><td>단위 테스트 / 계약 테스트 구분</td><td>도메인 로직과 통합 흐름 모두를 검증할 수 있어야 실질적 신뢰 확보 가능</td><td>도메인 단위 유닛 테스트 + Bounded Context 간 계약 테스트 병행</td></tr><tr><td></td><td>통합 테스트 / 시나리오 테스트</td><td>이벤트 흐름, 상태 변경, 협업 통신 시나리오까지 포함한 검증 필요</td><td>E2E 테스트, 컨텍스트 간 이벤트 Replay 기반 검증</td></tr><tr><td><strong>조직 및 문화</strong></td><td>학습 문화 구축</td><td>설계 접근법 및 도구에 대한 팀 전체의 이해 부족 시 실패 확률 상승</td><td>사내 DDD 교육 프로그램, 피어 세션, 모델 리뷰 문화 내재화</td></tr><tr><td></td><td>크로스펑셔널 협업 체계</td><td>개발자 중심 설계는 실제 도메인 요구와 괴리 가능</td><td>도메인 전문가, QA, 기획자 포함된 설계 그룹 구성</td></tr><tr><td></td><td>피드백 기반 설계 반복</td><td>초기 설계 고착화는 시스템 진화 저해</td><td>설계 → 구현 → 회고 → 리팩토링의 반복 가능한 사이클 운영</td></tr><tr><td><strong>도입 전략 및 리스크 관리</strong></td><td>점진적 도입</td><td>Big Bang 방식은 리스크, 비용, 실패 가능성 높음</td><td>핵심 도메인 중심 MVP 단위로 시작, 성공 사례를 통한 확산</td></tr><tr><td></td><td>복잡도 사전 평가</td><td>단순한 CRUD 시스템에는 오히려 비용 대비 효과 적음</td><td>도메인 복잡도/비즈니스 중요도 평가 후 선별 적용</td></tr><tr><td></td><td>DDD 이해도 진단</td><td>팀 내 DDD 이해 수준 미흡 시 잘못된 구현/남용 우려</td><td>도입 전 DDD 교육, 설계 패턴/도구에 대한 공유 및 기준 문서화</td></tr></tbody></table><h4 id=domain-driven-design-도입-단계별-전략>Domain-Driven Design 도입 단계별 전략<a hidden class=anchor aria-hidden=true href=#domain-driven-design-도입-단계별-전략>#</a></h4><p>DDD(Domain-Driven Design) 를 성공적으로 도입하려면 <strong>단계별 전략적 접근</strong>이 매우 중요하다.<br><strong>도입 전 준비 → 설계 → 구현 → 운영 및 확산</strong>까지 포함한 <strong>DDD 도입 단계별 전략 로드맵</strong>으로, 각 단계는 현실적인 조직 환경과 기술 복잡성을 고려해 구성되어 있다.</p><table><thead><tr><th>단계</th><th>주요 목표</th><th>핵심 활동</th><th>체크포인트</th></tr></thead><tbody><tr><td><strong>1. 준비 단계</strong></td><td>조직/팀 준비도 평가 및 기반 마련</td><td>- 도메인 복잡도/도입 필요성 분석<br>- 핵심 도메인 식별<br>- 팀의 DDD 이해도 확인<br>- 도메인 전문가 참여 확보</td><td>🔸 단순 CRUD 시스템인가?<br>🔸 도메인 전문가와의 협업 채널 존재 여부</td></tr><tr><td><strong>2. 학습 및 훈련 단계</strong></td><td>DDD 개념과 접근법 내재화</td><td>- DDD 핵심 개념 교육<br>- 전략적/전술적 설계 훈련<br>Event Storming 워크숍 실습<br>- 유비쿼터스 언어 정의 시작</td><td>🔸 팀 전체가 DDD 의 기본 개념을 공유하고 있는가?<br>🔸 코드/문서/언어 간 용어 일관성 확보 여부</td></tr><tr><td><strong>3. 핵심 도메인 선정 및 점진적 적용</strong></td><td>MVP 수준의 핵심 도메인부터 적용</td><td>- Core Domain 중심 바운디드 컨텍스트 설계<br>Aggregate, Entity, VO 정의<br>Domain Event 기반 통신 설계<br>ACL, CQRS, Saga 등 전략적 도입</td><td>🔸 시작 범위가 적절히 작고 명확한가?<br>🔸 이벤트 흐름이 모델로 설명 가능한가?</td></tr><tr><td><strong>4. 구현 및 기술 적용 단계</strong></td><td>실제 구현을 통해 모델 검증</td><td>- 애플리케이션/도메인/인프라 계층 분리<br>- 리포지토리, 도메인 서비스 구현<br>- 이벤트 소싱/CQRS 인프라 구축<br>- 테스트 전략 수립 (단위 + 계약 + 시나리오)</td><td>🔸 도메인 로직이 도메인 모델에 집중되어 있는가?<br>🔸 이벤트 버저닝, 장애 보상 설계가 되어 있는가?</td></tr><tr><td><strong>5. 운영 및 통합 단계</strong></td><td>실 운영 환경에서 안정적 서비스 유지</td><td>- 분산 트레이싱 및 이벤트 로깅<br>- 이벤트 재처리 메커니즘<br>- 모니터링 + 도메인 지표 수집<br>API Gateway 및 메시지 브로커 연동</td><td>🔸 이벤트 흐름이 추적 가능한가?<br>🔸 장애 복구 또는 보상 시나리오가 설계되었는가?</td></tr><tr><td><strong>6. 확산 및 리팩토링 단계</strong></td><td>모델의 지속적 개선 및 조직 전체 확산</td><td>- 추가 도메인 적용<br>- 공통 컨텍스트 리팩토링<br>- 팀 구조와 컨텍스트 정렬<br>- 조직 차원의 도메인 문서화 문화 정착</td><td>🔸 DDD 모델이 조직 전반에 재사용 가능한 구조인가?<br>🔸 팀/서비스 구조가 도메인 중심으로 재편되었는가?</td></tr></tbody></table><h5 id=보완-전략>보완 전략<a hidden class=anchor aria-hidden=true href=#보완-전략>#</a></h5><table><thead><tr><th>보완 항목</th><th>전략적 대응 방법</th></tr></thead><tbody><tr><td>기술 부족</td><td>교육/사내 세미나, 코드랩 도입</td></tr><tr><td>협업 도구 부족</td><td>Miro, Context Mapper, Event Storming Tool 도입</td></tr><tr><td>이벤트 통합의 어려움</td><td>ACL, API Gateway, Kafka 전략 병행</td></tr><tr><td>유지보수 어려움</td><td>문서화 자동화, 테스트 커버리지 강화</td></tr></tbody></table><h3 id=최적화-고려사항-및-권장사항>최적화 고려사항 및 권장사항<a hidden class=anchor aria-hidden=true href=#최적화-고려사항-및-권장사항>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th><th><strong>권장사항</strong></th></tr></thead><tbody><tr><td><strong>성능 최적화</strong></td><td>애그리게이트 크기 조절</td><td>과도한 Aggregate 는 트랜잭션 충돌과 병렬성 저하 유발</td><td>불변성·일관성 기준 최소 단위로 설계, 필요한 경우 분할</td></tr><tr><td></td><td>CQRS 적용</td><td>명령/조회 책임 분리로 성능과 확장성 확보</td><td>Projection 기반 Read Model, 읽기 전용 DB 활용</td></tr><tr><td></td><td>이벤트 처리 최적화</td><td>이벤트 폭주 시 메시지 큐 병목 가능</td><td>Kafka 파티셔닝, 비동기 배치 처리</td></tr><tr><td></td><td>Selective Loading</td><td>연관 객체 전부 로딩 시 성능 저하</td><td>Lazy Loading, DTO/Projection 사용</td></tr><tr><td><strong>확장성 최적화</strong></td><td>바운디드 컨텍스트 독립성 확보</td><td>컨텍스트 간 강한 결합은 유지보수 비용 증가</td><td>이벤트 기반 비동기 통신 구조 설계</td></tr><tr><td></td><td>데이터베이스 분리</td><td>단일 DB 는 스케일 아웃 제한</td><td>Database per Service 또는 Polyglot Persistence 적용</td></tr><tr><td></td><td>API 경계 명확화</td><td>모호한 API 는 재사용성과 안정성 저해</td><td>Context 기반 API 설계, API Gateway 연계</td></tr><tr><td><strong>유지보수성 향상</strong></td><td>유비쿼터스 언어 일관성</td><td>용어 혼용 시 개발자 - 도메인 전문가 간 오해 발생</td><td>언어 사전 관리, 코드/문서/회의 일관성 유지</td></tr><tr><td></td><td>설계 문서화 전략</td><td>설계 지식이 코드에만 존재하면 유지 및 전달 어려움</td><td>ADR(Architecture Decision Record) 작성, Markdown 기반 기록</td></tr><tr><td></td><td>반복 가능한 리팩토링 체계</td><td>초기 설계는 변경 가능성 존재</td><td>도메인 리뷰 주기화, 리팩토링 문화 내재화</td></tr><tr><td><strong>테스트 전략</strong></td><td>단위 테스트 명확화</td><td>전술 객체 (Entity, VO 등) 에 대한 명확한 테스트 필요</td><td>책임 기반 설계, Fake 활용 테스트 우선</td></tr><tr><td></td><td>컨텍스트 간 통합 테스트</td><td>이벤트 누락·API 연계 오류 등 검출 어려움</td><td>시나리오 기반 E2E 테스트 구성, 소비자 계약 테스트 (Pact) 활용</td></tr><tr><td></td><td>전략 모델 테스트 어려움</td><td>전략 구조는 구체 코드가 없어 테스트 설계 어려움</td><td>BDD 기반 시나리오 테스트 작성</td></tr><tr><td><strong>데이터 일관성</strong></td><td>트랜잭션 경계 명확화</td><td>다수 Aggregate 간 강한 일관성은 확장성 저해</td><td>내부는 강한 일관성, 외부는 SAGA + Eventual Consistency 사용</td></tr><tr><td></td><td>Event Sourcing 활용</td><td>상태 변경 이력 저장을 통한 추적 및 복구 가능</td><td>Snapshot 전략 수립, 이벤트 리플레이 설계</td></tr><tr><td><strong>통합 및 마이그레이션</strong></td><td>Anti-Corruption Layer 적용</td><td>레거시 통합 시 도메인 오염 발생 가능</td><td>ACL 통해 외부 시스템과 내부 도메인 분리</td></tr><tr><td></td><td>이벤트 기반 통신 구조</td><td>동기 API 기반 구조는 장애 전파 위험</td><td>Kafka, RabbitMQ 등 메시징 기반 통합 적용</td></tr><tr><td></td><td>Context 간 통합 전략 설계</td><td>잘못된 통합 방식은 결합도 증가와 유지보수 어려움</td><td>Context Map 기반 관계 분석 후 전략 선택 (ACL, Conformist 등)</td></tr><tr><td><strong>모니터링 및 가시성</strong></td><td>도메인 이벤트 기반 메트릭 수집</td><td>기술 지표만으로는 비즈니스 흐름 파악 어려움</td><td>KPI 중심 도메인 이벤트 추적 및 시각화 (Grafana, Prometheus 등)</td></tr><tr><td></td><td>분산 추적 및 로깅</td><td>서비스 간 흐름 분석 부재 시 장애 분석 어려움</td><td>OpenTelemetry, Jaeger, Zipkin 연동</td></tr><tr><td></td><td>이벤트 흐름 가시성</td><td>메시지 흐름 누락/지연 식별 어려움</td><td>Kafka Lag 모니터링, Dead Letter Queue 적용</td></tr><tr><td><strong>조직 및 협업 구조</strong></td><td>도메인 전문가와 협업 강화</td><td>개발자 중심 설계 시 비즈니스와 괴리 발생</td><td>Event Storming, Domain Storytelling 도입</td></tr><tr><td></td><td>조직 구조 ↔ 도메인 정렬</td><td>팀 구조와 도메인 경계 불일치 시 커뮤니케이션 비용 증가</td><td>Team Topologies 모델 기반 정렬</td></tr><tr><td><strong>지속 가능성</strong></td><td>기술 부채 관리</td><td>급격한 확장은 설계 복잡도 및 유지 비용 증가</td><td>기술 부채 대시보드 관리, 의존성 최소화, 핵심만 우선 구현</td></tr><tr><td></td><td>학습 곡선 완화</td><td>DDD 는 설계와 개념이 복잡해 초기 진입 장벽 존재</td><td>컨텍스트 단위 도입, DDD-lite, 파일럿 적용부터 확장</td></tr><tr><td><strong>기타 주의점</strong></td><td>과도한 도메인 분할</td><td>너무 많은 Subdomain 은 경계 관리와 개발 리소스 부담</td><td>핵심 도메인 위주로 우선 모델링, 비핵심은 최소화</td></tr><tr><td></td><td>이벤트 남용</td><td>무분별한 이벤트 생성은 처리 복잡도 증가</td><td>이벤트 필터 적용, 도메인 의미 중심 이벤트 설계</td></tr><tr><td></td><td>설계 복잡도 관리</td><td>Context 및 레이어 수가 많아지면 추적 어려움</td><td>관계 시각화 도구 (Context Mapper, C4 Model 등) 활용</td></tr></tbody></table><h3 id=도메인-주도-설계와-고급-아키텍처-연계>도메인 주도 설계와 고급 아키텍처 연계<a hidden class=anchor aria-hidden=true href=#도메인-주도-설계와-고급-아키텍처-연계>#</a></h3><h4 id=cqrs-command-query-responsibility-segregation-와-ddd>CQRS (Command Query Responsibility Segregation) 와 DDD<a hidden class=anchor aria-hidden=true href=#cqrs-command-query-responsibility-segregation-와-ddd>#</a></h4><p><strong>개념 설명:</strong><br>CQRS 는 " 명령 (Command)&rdquo; 과 " 조회 (Query)&rdquo; 를 책임 단위로 분리하는 아키텍처 패턴이다.<br>DDD 에서 복잡한 도메인의 상태 변경과 조회를 분리함으로써, 도메인 로직은 더 명확해지고 성능 최적화도 가능하다.</p><p><strong>구조 다이어그램 (Mermaid):</strong></p><pre class=mermaid>graph TD
    UI --&gt; CommandHandler
    UI --&gt; QueryHandler
    CommandHandler --&gt; DomainModel
    DomainModel --&gt; EventStore
    QueryHandler --&gt; ReadModelDB
</pre><table><thead><tr><th>요소</th><th>설명</th></tr></thead><tbody><tr><td>CommandHandler</td><td>도메인 상태를 변경하는 명령 처리 책임</td></tr><tr><td>QueryHandler</td><td>별도 DB 또는 Projection 을 통해 조회 처리</td></tr><tr><td>ReadModelDB</td><td>조회 전용 데이터 저장소 (예: Redis, View Table 등)</td></tr><tr><td>EventStore</td><td>도메인 변경을 이벤트로 저장 (Event Sourcing 과 함께 사용됨)</td></tr></tbody></table><h4 id=event-sourcing-과-ddd>Event Sourcing 과 DDD<a hidden class=anchor aria-hidden=true href=#event-sourcing-과-ddd>#</a></h4><p><strong>개념 설명:</strong><br>Event Sourcing 은 도메인 객체의 상태를 변경 이벤트 (event) 들의 이력으로 저장하고, 현재 상태는 이 이벤트들을 순차적으로 리플레이하여 생성하는 방식이다.</p><p><strong>장점:</strong></p><ul><li>상태 이력 추적이 가능</li><li>복구 및 감사 (Audit) 용이</li><li>비동기 확장성 확보</li></ul><p><strong>단점 및 주의점:</strong></p><ul><li>상태 조회가 복잡해질 수 있음 → Snapshot 도입 고려</li><li>이벤트 스키마 변경이 까다로움 → 이벤트 버전 관리 체계 도입 필요</li></ul><h4 id=clean-architecture-와-ddd-결합>Clean Architecture 와 DDD 결합<a hidden class=anchor aria-hidden=true href=#clean-architecture-와-ddd-결합>#</a></h4><p><strong>개념 설명:</strong><br>Clean Architecture 는 계층 구조를 중심으로 책임을 분리하며, 내부 (core) 와 외부 (infrastructure) 를 명확히 구분한다. DDD 의 도메인 계층은 가장 중심 (Core Domain Layer) 에 위치한다.</p><p><strong>계층 구조:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-44-1><a class=lnlinks href=#hl-44-1>1</a>
</span><span class=lnt id=hl-44-2><a class=lnlinks href=#hl-44-2>2</a>
</span><span class=lnt id=hl-44-3><a class=lnlinks href=#hl-44-3>3</a>
</span><span class=lnt id=hl-44-4><a class=lnlinks href=#hl-44-4>4</a>
</span><span class=lnt id=hl-44-5><a class=lnlinks href=#hl-44-5>5</a>
</span><span class=lnt id=hl-44-6><a class=lnlinks href=#hl-44-6>6</a>
</span><span class=lnt id=hl-44-7><a class=lnlinks href=#hl-44-7>7</a>
</span><span class=lnt id=hl-44-8><a class=lnlinks href=#hl-44-8>8</a>
</span><span class=lnt id=hl-44-9><a class=lnlinks href=#hl-44-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>┌─────────────────────────────┐
</span></span><span class=line><span class=cl>│        External (UI/API)    │
</span></span><span class=line><span class=cl>├─────────────────────────────┤
</span></span><span class=line><span class=cl>│    Application Layer        │
</span></span><span class=line><span class=cl>├─────────────────────────────┤
</span></span><span class=line><span class=cl>│    Domain Layer (DDD 핵심)  │
</span></span><span class=line><span class=cl>├─────────────────────────────┤
</span></span><span class=line><span class=cl>│    Infrastructure Layer     │
</span></span><span class=line><span class=cl>└─────────────────────────────┘
</span></span></code></pre></td></tr></table></div></div><table><thead><tr><th>계층</th><th>설명</th></tr></thead><tbody><tr><td>Application Layer</td><td>서비스 오케스트레이션, 유스케이스 구현</td></tr><tr><td>Domain Layer</td><td>엔티티, 애그리거트, 도메인 서비스 등</td></tr><tr><td>Infrastructure</td><td>DB, 외부 시스템, 리포지토리 구현 등</td></tr></tbody></table><h4 id=실무-프로젝트-확장-전략-요약>실무 프로젝트 확장 전략 요약<a hidden class=anchor aria-hidden=true href=#실무-프로젝트-확장-전략-요약>#</a></h4><table><thead><tr><th>전략</th><th>목적</th><th>DDD 연계 방식</th><th>적용 시 고려사항</th></tr></thead><tbody><tr><td>CQRS</td><td>명령과 조회 분리</td><td>복잡한 읽기/쓰기 로직 분리</td><td>Read Model 최적화, Sync/Async 전략</td></tr><tr><td>Event Sourcing</td><td>상태 이력 관리</td><td>도메인 이벤트 저장</td><td>스냅샷, 이벤트 버전 관리</td></tr><tr><td>Clean Architecture</td><td>의존성 분리</td><td>도메인 중심 계층 구조</td><td>인터페이스 기반 설계</td></tr><tr><td>API-first 설계</td><td>명확한 컨텍스트 경계</td><td>API = Bounded Context 인터페이스</td><td>Swagger/OpenAPI 기반 문서화</td></tr><tr><td>테스트 주도 개발 (TDD)</td><td>도메인 신뢰성 확보</td><td>도메인 단위 테스트 강화</td><td>테스트 더블 (Mock, Stub 등) 활용</td></tr></tbody></table><h4 id=ddd-기반-리팩토링-전략>DDD 기반 리팩토링 전략<a hidden class=anchor aria-hidden=true href=#ddd-기반-리팩토링-전략>#</a></h4><p><strong>리팩토링 필요성</strong></p><ul><li>기존 모놀리식 구조 또는 <strong>데이터 중심 설계</strong>에서 발생하는 문제점:<ul><li>비즈니스 로직이 서비스 클래스에 분산</li><li>명확하지 않은 모듈 경계</li><li>재사용성 및 테스트 어려움</li><li>도메인 지식이 코드 구조에 반영되지 않음</li></ul></li></ul><p><strong>전체 리팩토링 단계 개요</strong></p><table><thead><tr><th>단계</th><th>목적</th><th>주요 활동</th></tr></thead><tbody><tr><td>1 단계</td><td>도메인 분석</td><td>바운디드 컨텍스트 식별, 유비쿼터스 언어 정의</td></tr><tr><td>2 단계</td><td>코드 구조 분석</td><td>기존 레거시 구조를 계층화하고, 책임 분리</td></tr><tr><td>3 단계</td><td>전술적 설계 적용</td><td>엔티티, 값 객체, 애그리거트로 도메인 모델 구현</td></tr><tr><td>4 단계</td><td>도메인 계층 리팩토링</td><td>서비스 → 도메인 객체로 로직 이동</td></tr><tr><td>5 단계</td><td>응용 계층 도입</td><td>Application Layer 에서 도메인 호출 제어</td></tr><tr><td>6 단계</td><td>통합 최적화</td><td>CQRS, 이벤트 처리 도입 (필요 시)</td></tr></tbody></table><h5 id=리팩토링-전략-상세>리팩토링 전략 상세<a hidden class=anchor aria-hidden=true href=#리팩토링-전략-상세>#</a></h5><h6 id=1-도메인-중심-분석>1. 도메인 중심 분석<a hidden class=anchor aria-hidden=true href=#1-도메인-중심-분석>#</a></h6><ul><li><strong>Event Storming</strong>, <strong>Use Case Mapping</strong>, <strong>업무 플로우 분석</strong> 등을 활용해 비즈니스 행위와 개체를 파악한다.</li><li>바운디드 컨텍스트 (Bounded Context) 식별</li></ul><p><strong>도구 추천:</strong></p><ul><li>Miro, Whimsical (Event Storming 협업 도구)</li><li>도메인 용어 정리 시 유비쿼터스 언어 문서 작성</li></ul><h6 id=2-기존-코드-구조-정리>2. 기존 코드 구조 정리<a hidden class=anchor aria-hidden=true href=#2-기존-코드-구조-정리>#</a></h6><table><thead><tr><th>리팩토링 전</th><th>리팩토링 후 (계층화)</th></tr></thead><tbody><tr><td>Controller</td><td>Controller (UI Layer)</td></tr><tr><td>Service (비대해짐)</td><td>Application Service</td></tr><tr><td>DAO, DTO</td><td>Domain Entity, Repository</td></tr></tbody></table><ul><li><strong>도메인 로직</strong>을 ApplicationService 에서 DomainModel 로 점진적으로 이동</li><li>단순 CRUD 는 남기되, 복잡한 로직은 도메인 모델화</li></ul><h6 id=3-전술적-설계-도입>3. 전술적 설계 도입<a hidden class=anchor aria-hidden=true href=#3-전술적-설계-도입>#</a></h6><table><thead><tr><th>도메인 구성요소</th><th>적용 기준</th></tr></thead><tbody><tr><td>엔티티 (Entity)</td><td>고유 ID 가 존재하고 상태 변경이 중요한 객체</td></tr><tr><td>값 객체 (Value Object)</td><td>동일성보다 속성 자체가 중요한 불변 객체</td></tr><tr><td>애그리거트 (Aggregate)</td><td>일관성을 유지해야 할 객체 묶음</td></tr><tr><td>도메인 서비스</td><td>도메인 객체에 포함되지 않는 로직</td></tr></tbody></table><p><strong>예시:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-45-1><a class=lnlinks href=#hl-45-1>1</a>
</span><span class=lnt id=hl-45-2><a class=lnlinks href=#hl-45-2>2</a>
</span><span class=lnt id=hl-45-3><a class=lnlinks href=#hl-45-3>3</a>
</span><span class=lnt id=hl-45-4><a class=lnlinks href=#hl-45-4>4</a>
</span><span class=lnt id=hl-45-5><a class=lnlinks href=#hl-45-5>5</a>
</span><span class=lnt id=hl-45-6><a class=lnlinks href=#hl-45-6>6</a>
</span><span class=lnt id=hl-45-7><a class=lnlinks href=#hl-45-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 값 객체 예시 (Python)</span>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span><span class=p>(</span><span class=n>frozen</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Email</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>__post_init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=s2>&#34;@&#34;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>value</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;Invalid email&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=4-도메인-계층-중심-리팩토링>4. 도메인 계층 중심 리팩토링<a hidden class=anchor aria-hidden=true href=#4-도메인-계층-중심-리팩토링>#</a></h6><ul><li><strong>서비스 클래스에 있는 규칙 로직</strong>을 도메인 엔티티/값 객체로 이동</li><li>불변성과 명시적인 상태 변경 메서드 사용</li><li>비즈니스 용어가 코드 내에 명시적으로 드러나도록 구성</li></ul><h6 id=5응용-계층-application-layer-도입>5.응용 계층 (Application Layer) 도입<a hidden class=anchor aria-hidden=true href=#5응용-계층-application-layer-도입>#</a></h6><ul><li>컨트롤러와 도메인 사이의 <strong>오케스트레이션</strong> 역할</li><li>트랜잭션 관리, 유즈케이스 흐름 제어</li><li>외부 서비스 호출 분리</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-46-1><a class=lnlinks href=#hl-46-1>1</a>
</span><span class=lnt id=hl-46-2><a class=lnlinks href=#hl-46-2>2</a>
</span><span class=lnt id=hl-46-3><a class=lnlinks href=#hl-46-3>3</a>
</span><span class=lnt id=hl-46-4><a class=lnlinks href=#hl-46-4>4</a>
</span><span class=lnt id=hl-46-5><a class=lnlinks href=#hl-46-5>5</a>
</span><span class=lnt id=hl-46-6><a class=lnlinks href=#hl-46-6>6</a>
</span><span class=lnt id=hl-46-7><a class=lnlinks href=#hl-46-7>7</a>
</span><span class=lnt id=hl-46-8><a class=lnlinks href=#hl-46-8>8</a>
</span><span class=lnt id=hl-46-9><a class=lnlinks href=#hl-46-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>PlaceOrderService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Transactional</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>OrderId</span><span class=w> </span><span class=nf>place</span><span class=p>(</span><span class=n>OrderRequest</span><span class=w> </span><span class=n>request</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Customer</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>customerRepository</span><span class=p>.</span><span class=na>findById</span><span class=p>(</span><span class=n>request</span><span class=p>.</span><span class=na>customerId</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Order</span><span class=w> </span><span class=n>order</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>customer</span><span class=p>.</span><span class=na>placeOrder</span><span class=p>(</span><span class=n>request</span><span class=p>.</span><span class=na>items</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>orderRepository</span><span class=p>.</span><span class=na>save</span><span class=p>(</span><span class=n>order</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>order</span><span class=p>.</span><span class=na>getId</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h6 id=6-통합-및-확장>6. 통합 및 확장<a hidden class=anchor aria-hidden=true href=#6-통합-및-확장>#</a></h6><table><thead><tr><th>기술 요소</th><th>적용 타이밍</th><th>목적</th></tr></thead><tbody><tr><td>CQRS 도입</td><td>읽기/쓰기 요구가 매우 다른 경우</td><td>성능, 복잡도 분리</td></tr><tr><td>이벤트 발행</td><td>바운디드 컨텍스트 간 통신 필요</td><td>유연한 확장</td></tr><tr><td>메시지 브로커</td><td>서비스 간 비동기 통합</td><td>마이크로서비스 이전 단계로 발전 가능</td></tr><tr><td>테스트 전략</td><td>리팩토링 전/후 회귀 방지</td><td>도메인 단위 테스트, 엔드투엔드 테스트 강화</td></tr></tbody></table><h5 id=리팩토링-예시-시나리오-온라인-주문-시스템>리팩토링 예시 시나리오 (온라인 주문 시스템)<a hidden class=anchor aria-hidden=true href=#리팩토링-예시-시나리오-온라인-주문-시스템>#</a></h5><table><thead><tr><th>리팩토링 전</th><th>리팩토링 후</th></tr></thead><tbody><tr><td>OrderService 에서 모든 로직 처리</td><td>Order 애그리거트 내부로 도메인 로직 이동</td></tr><tr><td>주문 상태 변경: <code>service.changeOrderStatus(orderId, status)</code></td><td><code>order.markAsDelivered()</code> 방식으로 상태 변경 로직 캡슐화</td></tr><tr><td>단순한 DTO 기반 응답</td><td>애그리거트에서 Projection 또는 Read Model 제공</td></tr></tbody></table><h5 id=리팩토링-시-유의사항-및-best-practice>리팩토링 시 유의사항 및 Best Practice<a hidden class=anchor aria-hidden=true href=#리팩토링-시-유의사항-및-best-practice>#</a></h5><table><thead><tr><th>항목</th><th>설명</th><th>권장 전략</th></tr></thead><tbody><tr><td>점진적 리팩토링</td><td>대규모 시스템은 전면 재설계보다 점진적 전환이 유효</td><td>핵심 도메인부터 DDD 적용, 나머지는 Anti-Corruption Layer 로 연결</td></tr><tr><td>테스트 커버리지</td><td>리팩토링 안정성 확보에 필수</td><td>도메인 단위 테스트와 인수 테스트 작성 병행</td></tr><tr><td>조직 구조 반영</td><td>팀 조직이 도메인 구조와 일치하지 않으면 컨텍스트 왜곡 가능</td><td>팀 단위로 바운디드 컨텍스트 유지 (Conway&rsquo;s Law 고려)</td></tr></tbody></table><h3 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>핵심 항목 또는 기술</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>핵심 개념</strong></td><td>전략적 설계</td><td>Bounded Context, Context Map</td><td>시스템을 도메인 기반으로 나누고, 각 경계 간 관계를 정의</td></tr><tr><td></td><td>전술적 설계</td><td>Entity, Value Object, Aggregate, Repository 등</td><td>도메인 로직을 구현하기 위한 객체 중심 설계 방식</td></tr><tr><td></td><td>유비쿼터스 언어</td><td>공통 용어 정의</td><td>개발자와 도메인 전문가 간 커뮤니케이션 통일</td></tr><tr><td><strong>패턴 및 설계 기법</strong></td><td>CQRS + Event Sourcing</td><td>읽기/쓰기 분리 및 이벤트 중심 상태 재구성</td><td>확장성과 상태 추적성을 동시에 확보하는 핵심 설계 방식</td></tr><tr><td></td><td>Saga 패턴</td><td>분산 시스템에서 보상 트랜잭션으로 일관성 유지</td><td>원자적 트랜잭션이 어려운 상황에서 데이터 정합성 유지</td></tr><tr><td></td><td>Specification Pattern</td><td>비즈니스 규칙 캡슐화 및 재사용</td><td>복잡한 조건 로직을 독립 객체로 관리</td></tr><tr><td></td><td>Anti-Corruption Layer</td><td>외부 모델 오염 방지</td><td>외부 시스템과 내부 도메인 모델 간 보호 계층</td></tr><tr><td></td><td>Domain Storytelling</td><td>사용자 중심 흐름 모델링</td><td>현업과의 협업 기반 프로세스 시각화</td></tr><tr><td></td><td>Event-First Design</td><td>이벤트 흐름 중심의 도메인 모델링</td><td>상태보다 행동 중심으로 도메인을 설계</td></tr><tr><td><strong>모델링/협업 도구</strong></td><td>Event Storming</td><td>도메인 이벤트 중심 협업 워크샵</td><td>스티커 기반 시각화로 도메인 이해 공유</td></tr><tr><td></td><td>Context Mapper / DSL</td><td>바운디드 컨텍스트 간 관계 모델링 도구</td><td>Context Map 을 텍스트 기반으로 정의 가능</td></tr><tr><td></td><td>Pact / Spring Cloud Contract</td><td>계약 기반 통합 테스트 도구</td><td>API 간 인터페이스 안정성 확보</td></tr><tr><td><strong>아키텍처 확장</strong></td><td>Hexagonal Architecture</td><td>포트 - 어댑터 기반 도메인 중심 설계</td><td>외부와 내부를 명확히 분리하여 유지보수성 향상</td></tr><tr><td></td><td>Onion / Clean Architecture</td><td>계층 구조 기반 의존성 역전 설계</td><td>핵심 도메인을 외부 계층과 독립적으로 보호</td></tr><tr><td></td><td>Microservices + DDD</td><td>컨텍스트 기반 서비스 분리</td><td>도메인 기준 마이크로서비스 설계</td></tr><tr><td></td><td>Serverless DDD</td><td>이벤트 기반 서버리스와 도메인 중심 모델 통합</td><td>FaaS 구조에서 도메인 독립성 유지</td></tr><tr><td></td><td>Mesh Architecture</td><td>서비스 메시 기반의 경계 중심 통신</td><td>Bounded Context 간 네트워크 통제</td></tr><tr><td></td><td>엣지/IoT 아키텍처</td><td>엣지 환경의 분산 도메인 구성</td><td>로컬 처리 시스템에 도메인 모델 확장</td></tr><tr><td><strong>성능 및 최적화 전략</strong></td><td>CQRS 고도화</td><td>Materialized View, Read Model 최적화</td><td>읽기 성능 향상 및 확장성 확보</td></tr><tr><td></td><td>이벤트 스트리밍</td><td>Kafka, Streams 등</td><td>도메인 이벤트의 실시간 처리 및 분석</td></tr><tr><td><strong>보안 및 안정성</strong></td><td>Zero Trust Architecture</td><td>최소 권한 기반의 도메인 단위 보안</td><td>컨텍스트 중심 보안 설계 적용</td></tr><tr><td></td><td>도메인 기반 암호화</td><td>민감한 도메인 속성에 대한 필드 수준 암호화</td><td>개인정보 및 기밀 보호 전략</td></tr><tr><td><strong>조직/운영 연계</strong></td><td>DevOps + DDD</td><td>CI/CD, Observability 통합</td><td>자동화된 도메인 중심 운영 구조 설계</td></tr><tr><td></td><td>Team Topologies</td><td>팀 구조 ↔ 컨텍스트 정렬</td><td>팀 조직을 도메인 경계와 일치시킴</td></tr><tr><td></td><td>Legacy Migration</td><td>Strangler 패턴, 점진적 전환</td><td>레거시 시스템을 도메인 아키텍처로 이동</td></tr><tr><td><strong>확장 응용</strong></td><td>Agile 전략 - 전술 순환</td><td>전술적 피드백 기반 전략 재설계</td><td>반복적 모델 개선과 커뮤니케이션 강화</td></tr><tr><td></td><td>UX 전략과 전술</td><td>도메인 기반 UI 리디자인</td><td>사용자 경험에 도메인 지식 반영</td></tr><tr><td></td><td>서브도메인 진화 사례</td><td>Generic → Core 진화</td><td>기능적 중요도 변화에 따른 재분류 가능성</td></tr><tr><td></td><td>Data Mesh</td><td>도메인 소유 데이터 아키텍처</td><td>데이터 팀이 도메인 중심으로 독립 운영 가능</td></tr></tbody></table><ul><li><strong>전략적 설계</strong>는 " 경계 정의와 컨텍스트 간 통합 " 에 초점.</li><li><strong>전술적 설계</strong>는 " 도메인 로직 구현과 구조화 " 에 중점.</li><li><strong>CQRS + Event Sourcing + Saga</strong>는 복잡한 시스템에서 DDD 의 성능과 안정성을 책임지는 <strong>핵심 패턴 3 종</strong>.</li><li><strong>Event Storming & Storytelling</strong>은 도메인 중심 설계 협업에 적합한 <strong>모델링 기법</strong>.</li><li><strong>Microservices/Serverless/IoT 등 아키텍처 변화에 따라 DDD 가 유연하게 진화</strong>하고 있음.</li></ul><h3 id=주제와-관련하여-반드시-학습해야-할-내용>주제와 관련하여 반드시 학습해야 할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-반드시-학습해야-할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>핵심 항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>기초 원칙</strong></td><td>하위 도메인 식별 (Subdomain ID)</td><td>Core / Supporting / Generic</td><td>비즈니스 도메인을 기능 기반으로 분할하여 전략 수립 기반 마련</td></tr><tr><td></td><td>유비쿼터스 언어 (Ubiquitous Language)</td><td>도메인 용어 정립 및 일관성 유지</td><td>도메인 전문가와 개발자가 공통으로 사용하는 언어 체계</td></tr><tr><td></td><td>바운디드 컨텍스트 (Bounded Context)</td><td>경계 기반 모델 관리</td><td>모델, 언어, 로직이 유효한 논리적 경계 단위 설정</td></tr><tr><td></td><td>도메인 분석 및 비전 설정</td><td>Domain Vision, Core 식별</td><td>핵심 도메인 중심으로 비즈니스 전략 설계</td></tr><tr><td><strong>전략적 설계 (Strategic)</strong></td><td>컨텍스트 매핑 (Context Mapping)</td><td>ACL, Shared Kernel, Customer/Supplier 등</td><td>Bounded Context 간 관계 정의 및 통합 방식 설계</td></tr><tr><td></td><td>이벤트 스토밍 (Event Storming)</td><td>도메인 이벤트 탐색 워크숍</td><td>현업과 개발자 간 협업을 통한 모델 도출 기법</td></tr><tr><td></td><td>도메인 스토리텔링 (Domain Storytelling)</td><td>액터 기반 시나리오 설명</td><td>업무 흐름을 인간 중심 내러티브로 표현</td></tr><tr><td></td><td>Data Mesh 개념 적용</td><td>도메인별 데이터 소유</td><td>DDD 의 조직화된 데이터 설계 확장 모델</td></tr><tr><td><strong>전술적 설계 (Tactical)</strong></td><td>Aggregate 설계 및 최적화</td><td>일관성 경계, 트랜잭션 범위</td><td>복잡성 제어 및 비즈니스 규칙 캡슐화</td></tr><tr><td></td><td>Entity vs Value Object</td><td>식별자 여부, 불변성</td><td>도메인 객체 설계 기준 확립</td></tr><tr><td></td><td>Repository Pattern</td><td>영속성 계층 추상화</td><td>도메인 로직과 인프라 분리</td></tr><tr><td></td><td>Factory 패턴 심화</td><td>복잡한 객체 생성을 도메인 외부로 분리</td><td>생성 책임 분리 및 일관된 생성 보장</td></tr><tr><td></td><td>Specification Pattern</td><td>isSatisfiedBy(), AND/OR 조합</td><td>조건 로직 재사용 및 필터링 구조화</td></tr><tr><td></td><td>Domain Event 설계</td><td>이벤트 발행/구독, Side Effect 분리</td><td>상태 변화 기록 및 통합 트리거</td></tr><tr><td></td><td>도메인 테스트 전략</td><td>단위/통합 테스트</td><td>트랜잭션, 규칙 검증 및 코드 품질 확보</td></tr><tr><td></td><td>Anemic Domain Model 제거</td><td>비즈니스 로직 분산 방지</td><td>풍부한 도메인 모델 구현 유도</td></tr><tr><td><strong>이벤트 기반 설계</strong></td><td>Event-Driven Integration</td><td>도메인 간 비동기 통합</td><td>이벤트 기반 메시징 아키텍처 구현</td></tr><tr><td></td><td>Event Sourcing + Snapshotting</td><td>상태 복원 최적화</td><td>저장 비용 및 성능 균형 확보</td></tr><tr><td></td><td>Saga 패턴 (보상 트랜잭션)</td><td>트랜잭션 분산 및 실패 처리</td><td>마이크로서비스 간 데이터 정합성 확보</td></tr><tr><td><strong>아키텍처 패턴</strong></td><td>CQRS (명령/조회 분리)</td><td>Command ↔ Query 분리</td><td>쓰기/읽기 분리 통한 성능/유지보수 개선</td></tr><tr><td></td><td>Hexagonal Architecture</td><td>Port-Adapter 구조</td><td>외부 의존성과 도메인 계층 분리</td></tr><tr><td></td><td>Onion / Clean Architecture</td><td>계층 기반 의존성 역전 구조</td><td>유연한 테스트 및 유지보수 가능 설계</td></tr><tr><td></td><td>DIP (Dependency Inversion Principle)</td><td>인터페이스 중심 설계</td><td>모듈 간 결합도 감소, 구현체 교체 유연성 확보</td></tr><tr><td><strong>계약 및 통합 전략</strong></td><td>Anti‑Corruption Layer (ACL)</td><td>번역 계층 통한 외부 모델 보호</td><td>외부 시스템의 영향 차단 및 내부 모델 보호</td></tr><tr><td></td><td>Shared Kernel / Published Language</td><td>공통 코드/스키마 공유</td><td>컨텍스트 간 인터페이스 일관성 확보</td></tr><tr><td></td><td>Open Host Service</td><td>외부 API 공개용 인터페이스</td><td>안전한 외부 접근 통제 및 통합 채널 제공</td></tr><tr><td></td><td>Conformist / Customer-Supplier</td><td>통합 유형에 따른 상하류 관계 정의</td><td>컨텍스트 간 의존 구조 유형 구분</td></tr><tr><td><strong>조직 및 실무 역량</strong></td><td>마이크로서비스 설계 기반 DDD 적용</td><td>컨텍스트 기반 서비스 분리</td><td>독립적 배포 가능 구조 설계</td></tr><tr><td></td><td>DDD + DevOps/SRE 연계 전략</td><td>테스트, 모니터링, 배포 통합</td><td>운영 자동화 기반의 도메인 설계 정착</td></tr><tr><td></td><td>스트랭글러 패턴 / 기술 부채 해소</td><td>레거시 → 신규 시스템 점진 전환</td><td>이관 위험 최소화와 진화적 리팩토링 지원</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th><strong>카테고리</strong></th><th><strong>용어</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>1. 핵심 개념</strong></td><td>Domain (도메인)</td><td>소프트웨어가 해결하고자 하는 실제 비즈니스 문제 영역</td></tr><tr><td></td><td>Domain Model (도메인 모델)</td><td>도메인의 개념과 규칙을 코드로 표현한 추상 모델</td></tr><tr><td></td><td>Subdomain (하위 도메인)</td><td>도메인을 기능적으로 분할한 의미 있는 하위 영역</td></tr><tr><td></td><td>Core Domain (핵심 도메인)</td><td>시스템의 비즈니스 차별성을 구성하는 중심 영역</td></tr><tr><td></td><td>Supporting Subdomain (지원 도메인)</td><td>핵심 도메인을 지원하는 기능적 보조 영역</td></tr><tr><td></td><td>Generic Subdomain (일반 도메인)</td><td>여러 시스템에서 공통으로 사용되는 범용 기능 영역</td></tr><tr><td></td><td>Ubiquitous Language (유비쿼터스 언어)</td><td>도메인 전문가와 개발자가 공유하는 공통 용어 체계</td></tr><tr><td><strong>2. 전략 설계 (Strategic Design)</strong></td><td>Bounded Context (경계 컨텍스트)</td><td>하나의 모델과 언어가 일관되게 유지되는 설계 단위 경계</td></tr><tr><td></td><td>Context Map (컨텍스트 맵)</td><td>여러 Bounded Context 간의 관계를 시각화한 설계도</td></tr><tr><td></td><td>Event Storming</td><td>도메인 이벤트를 중심으로 도메인 프로세스를 시각화하는 협업 기법</td></tr><tr><td></td><td>Domain Storytelling</td><td>실제 행위자와 프로세스를 기반으로 비즈니스 흐름을 설명하는 기법</td></tr><tr><td></td><td>Data Mesh</td><td>도메인 중심의 분산된 데이터 소유 및 제공 구조</td></tr><tr><td><strong>3. 전술 설계 (Tactical Design)</strong></td><td>Entity (엔티티)</td><td>고유 식별자 (ID) 를 갖고 생명주기와 상태를 가지는 객체</td></tr><tr><td></td><td>Value Object (값 객체)</td><td>불변이며, 속성 값으로 동일성을 판단하는 객체</td></tr><tr><td></td><td>Aggregate (애그리게이트)</td><td>일관성을 보장하는 Entity 와 Value Object 의 묶음</td></tr><tr><td></td><td>Aggregate Root (애그리게이트 루트)</td><td>애그리게이트 내에서 외부 접근을 책임지는 중심 엔티티</td></tr><tr><td></td><td>Domain Service (도메인 서비스)</td><td>특정 엔티티에 귀속되지 않는 도메인 로직을 캡슐화한 서비스</td></tr><tr><td></td><td>Repository (리포지토리)</td><td>도메인 객체의 조회·저장·삭제 등 영속성 처리를 담당하는 인터페이스</td></tr><tr><td></td><td>Factory (팩토리)</td><td>복잡한 도메인 객체의 생성 과정을 담당하는 생성 패턴</td></tr><tr><td></td><td>Domain Event (도메인 이벤트)</td><td>도메인 상태 변화나 비즈니스 사건을 표현하는 객체</td></tr><tr><td></td><td>Specification (명세 패턴)</td><td>도메인 객체의 조건 검증 및 필터링 로직을 객체로 추상화한 설계 기법</td></tr><tr><td><strong>4. 아키텍처 및 설계 패턴</strong></td><td>Layered Architecture (레이어드 아키텍처)</td><td>프레젠테이션, 애플리케이션, 도메인, 인프라 계층 구조</td></tr><tr><td></td><td>Hexagonal Architecture (헥사고날 아키텍처)</td><td>포트와 어댑터를 통한 내부 도메인과 외부 시스템의 분리 설계</td></tr><tr><td></td><td>CQRS (명령/조회 책임 분리)</td><td>Command 와 Query 를 분리하여 확장성과 성능 최적화</td></tr><tr><td></td><td>Event Sourcing</td><td>도메인 상태를 이벤트의 흐름으로 저장하고 복원하는 방식</td></tr><tr><td></td><td>DIP (의존성 역전 원칙)</td><td>추상화에 의존하도록 하여 상위 모듈이 하위 모듈에 의존하지 않게 설계</td></tr><tr><td><strong>5. 통합 및 경계 보호 (Integration)</strong></td><td>Anti-Corruption Layer (ACL)</td><td>외부 시스템과 내부 도메인 모델 간의 변환 계층</td></tr><tr><td></td><td>Shared Kernel</td><td>여러 Context 간에 공유되는 안정적인 도메인 모델 조각</td></tr><tr><td></td><td>Open Host Service</td><td>외부 시스템이 접근할 수 있도록 공개된 인터페이스 (API) 제공 계층</td></tr><tr><td></td><td>Published Language</td><td>시스템 간 통합을 위해 명시적으로 정의된 공통 메시지 형식</td></tr><tr><td></td><td>Customer/Supplier</td><td>상류/하류 컨텍스트 간 요청 - 응답 기반 통합 관계</td></tr><tr><td></td><td>Conformist</td><td>하류 컨텍스트가 상류의 모델을 그대로 따르는 통합 패턴</td></tr><tr><td><strong>6. 테스트 및 구현</strong></td><td>BDD (Behavior Driven Development)</td><td>유비쿼터스 언어 기반의 테스트 자동화 및 시나리오 중심 개발 기법</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><h3 id=개요-및-핵심-개념>개요 및 핵심 개념<a hidden class=anchor aria-hidden=true href=#개요-및-핵심-개념>#</a></h3><ul><li><a href=https://en.wikipedia.org/wiki/Domain-driven_design>Domain‑Driven Design – Wikipedia</a></li><li><a href=https://www.domainlanguage.com/>Domain‑Driven Design 공식 사이트 – Eric Evans</a></li><li><a href=https://dddcommunity.org/>DDD 문서화 – dddcommunity.org</a></li><li><a href=https://martinfowler.com/bliki/BoundedContext.html>Bounded Context – Martin Fowler</a></li><li><a href=https://martinfowler.com/bliki/CQRS.html>CQRS Pattern – Martin Fowler</a></li><li><a href=https://learn.microsoft.com/en-us/azure/architecture/patterns/event-sourcing>Event Sourcing – Microsoft Docs</a></li><li><a href=https://www.geeksforgeeks.org/domain-driven-design-ddd/>Domain‑Driven Design – GeeksforGeeks</a></li></ul><h3 id=도서-및-저자-원문>도서 및 저자 원문<a hidden class=anchor aria-hidden=true href=#도서-및-저자-원문>#</a></h3><ul><li><a href=https://www.amazon.com/Domain%E2%80%91Driven%E2%80%91Design%E2%80%91Tackling%E2%80%91Complexity%E2%80%91Software/dp/0321125217>Domain-Driven Design: Tackling Complexity in the Heart of Software – Eric Evans</a></li><li><a href=https://www.amazon.com/Implementing%E2%80%91Domain%E2%80%91Driven%E2%80%91Design%E2%80%91Vaughn%E2%80%91Vernon/dp/0321834577>Implementing Domain-Driven Design – Vaughn Vernon</a></li><li><a href="https://vaughnvernon.co/?page_id=168">Vaughn Vernon – DDD Distilled</a></li></ul><h3 id=strategic-design-관련-자료>Strategic Design 관련 자료<a hidden class=anchor aria-hidden=true href=#strategic-design-관련-자료>#</a></h3><ul><li><a href=https://medium.com/@lambrych/domain-driven-design-ddd-strategic-design-explained-55e10b7ecc0f>Domain-Driven Design (DDD): Strategic Design Explained – Medium</a></li><li><a href=https://www.infoq.com/articles/ddd-contextmapping/>Strategic Domain Driven Design with Context Mapping – InfoQ</a></li><li><a href=https://deviq.com/domain-driven-design/strategic-design/>Strategic Design – DevIQ</a></li><li><a href=https://uxdesign.cc/strategic-design-vs-tactical-design-c7f66ca12b3a>Strategic Design vs. Tactical Design – UX Collective</a></li><li><a href=https://blog.mimacom.com/ddd-and-context-mapper-experience/>DDD and Context Mapper – Mimacom</a></li><li><a href=https://scaibu.medium.com/strategic-and-tactical-design-in-evolving-subdomains-a-comprehensive-guide-for-software-architects-7255ed6a8b14>Subdomain Evolution in Strategic and Tactical Design – Scaibu</a></li><li><a href=https://deviq.com/domain-driven-design/strategic-design/>Strategic Design in DDD – DevIQ</a></li></ul><h3 id=tactical-design-관련-자료>Tactical Design 관련 자료<a hidden class=anchor aria-hidden=true href=#tactical-design-관련-자료>#</a></h3><ul><li><a href=https://medium.com/@masoud.chelongar/domain-driven-design-tactical-design-41640afa2009>Domain-Driven Design—Tactical Design | by Masoud Chelongar</a></li><li><a href=https://learn.microsoft.com/en-us/azure/architecture/microservices/model/tactical-ddd>Using Tactical DDD to Design Microservices – Microsoft</a></li><li><a href=https://deviq.com/domain-driven-design/tactical-design/>Tactical Design in DDD – DevIQ</a></li><li><a href=https://vaadin.com/blog/ddd-part-2-tactical-domain-driven-design>DDD Part 2: Tactical Domain-Driven Design – Vaadin</a></li><li><a href=https://www.linkedin.com/pulse/tactical-design-domain-driven-nabil-droussi-9bpfe>Tactical Design in Domain-Driven Design – LinkedIn Pulse</a></li></ul><h3 id=통합-및-사례-중심-자료>통합 및 사례 중심 자료<a hidden class=anchor aria-hidden=true href=#통합-및-사례-중심-자료>#</a></h3><ul><li><a href=https://www.thoughtworks.com/insights/blog/evolutionary-architecture/domain-driven-design-in-10-minutes-part-one>Domain Driven Design in 10 minutes – Thoughtworks</a></li><li><a href=https://www.thoughtworks.com/insights/blog/architecture/domain-driven-design-in-functional-programming>Domain-driven design in functional programming – Thoughtworks</a></li><li><a href=https://learn.microsoft.com/en-us/azure/architecture/microservices/model/domain-analysis>Using Domain Analysis to Model Microservices – Microsoft</a></li><li><a href=https://www.popit.kr/cqrs-eventsourcing/>CQRS & Event Sourcing – POPIT</a></li><li><a href=https://ibm-cloud-architecture.github.io/refarch-eda/methodology/event-storming/>Event Storming – IBM Cloud Architecture</a></li><li><a href=https://www.sayonetech.com/blog/domain-driven-design-microservices/>DDD for Microservices: Complete Guide – Sayonetech</a></li><li><a href=https://github.com/ttulka/ddd-example-ecommerce-microservices>DDD Example: E-commerce Microservices – GitHub (ttulka)</a></li><li><a href=https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html>Clean Architecture – Uncle Bob (Robert C. Martin)</a></li></ul><h3 id=전략---전술-균형에-관한-추가-해설>전략 - 전술 균형에 관한 추가 해설<a hidden class=anchor aria-hidden=true href=#전략---전술-균형에-관한-추가-해설>#</a></h3><ul><li><a href=https://www.linkedin.com/advice/3/how-do-you-balance-between-strategic-tactical>How do you balance between strategic and tactical design in DDD? – LinkedIn</a></li><li><a href=https://www.valueblue.com/blog/strategic-vs-tactical-enterprise-architecture-planning>Strategic vs Tactical Planning in Enterprise Architecture – ValueBlue</a></li><li><a href=https://www.helsinkidesignlab.org/pages/what-is-strategic-design>Strategic Design vs Tactical Design – Helsinki Design Lab</a></li></ul><hr></div><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Aggregate Pattern</h2></header><div class=entry-content><p>Aggregate Pattern Aggregate 패턴은 마이크로서비스 아키텍처(MSA)에서 데이터 일관성을 유지하기 위한 중요한 패턴 중 하나이다.
이 패턴은 도메인 주도 설계(DDD)에서 유래했으며, 복잡한 도메인 모델을 관리하고 트랜잭션 경계를 정의하는 데 도움을 줍니다.
Aggregate는 하나의 루트 엔티티(Aggregate Root)와 관련된 객체들의 집합이다.
이 집합은 하나의 단위로 취급되며, 데이터 일관성을 유지하는 경계 역할을 한다.
Aggregate 패턴을 효과적으로 사용하려면 도메인에 대한 깊은 이해와 지속적인 리팩토링이 필요하다.
이 패턴을 통해 마이크로서비스 아키텍처에서 데이터 일관성을 유지하면서도 확장 가능하고 유지보수가 용이한 시스템을 구축할 수 있다.
...</p></div><footer class=entry-footer><span title='2024-11-15 02:00:00 +0000 UTC'>November 15, 2024</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Aggregate Pattern" href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/domain-driven-design/aggregate/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Strategic Design</h2></header><div class=entry-content><p>Strategic Design(전략적 설계) Strategic Design (전략적 설계) 는 Eric Evans 가 제시한 Domain-Driven Design (도메인 주도 설계) 의 고수준 설계 접근법이다.
복잡한 비즈니스 도메인을 명확히 구분된 Bounded Context (경계 컨텍스트) 들로 분해하고, 각 컨텍스트 내에서 Ubiquitous Language (공통 언어) 를 구축하며, Context Map (컨텍스트 맵) 을 통해 컨텍스트 간 관계를 정의하여 대규모 소프트웨어 시스템의 복잡성을 체계적으로 관리한다.
이 그림 위에서 Tactical Design(전술 설계) 은 각 바운디드 콘텍스트 내에서 엔티티, VO, 어그리게이트, 리포지토리, 도메인 서비스, 도메인 이벤트 등의 빌딩 블록을 사용하여 도메인 로직을 구현하고 테스트, CI/CD 와 연계하여 구현 완성도를 높인다.
...</p></div><footer class=entry-footer><span title='2025-06-04 13:42:00 +0000 UTC'>June 4, 2025</span>&nbsp;·&nbsp;51 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Strategic Design" href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/domain-driven-design/strategic-design/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Tactical Design</h2></header><div class=entry-content><p>Tactical Design(전술적 설계) Tactical DDD 는 전략적 설계로 정의된 Bounded Context 내에서 도메인 모델을 실제 코드 구조로 구현하는 단계이다. 이 단계에서는 Entity(엔터티), Value Object(값 객체), Aggregate(애그리거트), Domain Service(도메인 서비스), Repository(저장소), Domain Event(도메인 이벤트) 같은 전술 패턴을 적용하여 강결합된 도메인 논리를 비즈니스 규칙에 맞게 내부적으로 캡슐화하고, 데이터 일관성을 유지한다. 또한 해당 패턴들로 모듈 경계를 명확히 하고 객체 간 관계를 구조화하여 유지보수성과 확장성을 확보한다.
핵심 개념 개념 정의 역할 실무 구현 요소 Entity (엔터티) 고유한 식별자를 가지며 상태와 생명 주기를 관리하는 객체 동일성은 ID 로 판단, 상태 변경 가능 - ID 필드 (UUID 등)
- 상태 변경 메서드 (changeXXX)
- 비즈니스 불변식 검증 Value Object (값 객체) 식별자 없이 속성 값으로 동일성 판단, 불변 객체 도메인 개념 표현, 엔터티의 속성 구성 - 생성자 내 유효성/불변성 검증
- equals, hashCode 구현
- 수정 불가 구조 Aggregate & Aggregate Root 일관성을 유지하는 객체 클러스터, 외부 진입은 루트만 허용 트랜잭션 범위 및 불변성 보장 단위 - 내부 참조는 루트 통해서만
- 루트에 상태 변경 메서드 집중
- 비즈니스 규칙 캡슐화 Domain Service 상태 없는 객체, 엔터티/VO 에 귀속되지 않는 도메인 로직 수행 도메인 객체 간 협력 로직 수행 - 명령형 도메인 메서드 정의
- 도메인 계층에 위치
- 외부 의존 최소화 Repository Aggregate 단위의 영속성 추상화 도메인 로직과 영속 기술 분리 - save, findById, delete 등
- ORM 연동 (SQLAlchemy, TypeORM 등)
- 인터페이스 분리 Domain Event 상태 변화 알림 및 비동기 트리거 객체 사이드이펙트 분리 및 이벤트 기반 연동 - 이벤트 클래스 (OrderCreatedEvent 등)
- 퍼블리셔/리스너 구조
- 후속 처리 핸들러 구현 Factory 복잡한 객체 생성을 외부로 분리하는 패턴 생성 책임 분리, 일관된 생성 방식 제공 - 정적 팩토리 메서드 (create)
- 빌더 패턴 적용
- 생성 과정 불변성 보장 Specification 비즈니스 규칙을 객체화해 재사용 가능하게 함 조건 조합 및 검증 로직 분리 - isSatisfiedBy(entity) 메서드
- AND/OR/NOT 조합 지원
- 리포지토리 조건 필터로 활용 Ubiquitous Language 도메인 전문가와 개발자 간 공통 언어 용어 명확화 및 코드 일관성 강화 - 클래스/메서드에 도메인 용어 반영
- 주석 및 문서화에 반영 Bounded Context 도메인 모델이 유효한 논리적 경계 모델 중복/충돌 방지, 통합 전략 기반 - 모듈/마이크로서비스 경계 설정
- Context Mapping 활용
(ACL, Shared Kernel 등) 추가 실무 고려 요소 요소 설명 트랜잭션 경계 Aggregate 단위에서 관리. DB 트랜잭션과 일치시켜 데이터 정합성 보장. 계층 분리 (Layered Architecture) Domain / Application / Infrastructure / Interface 계층 분리 의존성 역전 (Dependency Inversion) 도메인이 외부 계층에 의존하지 않도록 인터페이스 추상화 불변성 보장 (Invariant Enforcement) Entity, Value Object, Aggregate 내부에서 규칙을 보호하고 검증 목적 및 필요성 주요 목적:
...</p></div><footer class=entry-footer><span title='2025-06-04 13:42:00 +0000 UTC'>June 4, 2025</span>&nbsp;·&nbsp;30 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Tactical Design" href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/domain-driven-design/tactical-design/></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>