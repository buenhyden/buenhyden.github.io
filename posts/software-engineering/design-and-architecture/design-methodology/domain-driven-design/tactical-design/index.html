<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Tactical Design | hyunyoun's Blog</title><meta name=keywords content="Software-Engineering,Design-and-Architecture,Design-Methodologies,Domain-Driven-Design,Tactical-Design"><meta name=description content="전술적 설계 (Tactical Design) 는 **어떻게 구현할 것인가** 에 집중한다. 도메인 주도 설계 (DDD) 에서 전략적 설계로 정의된 도메인 모델을 실제 코드와 아키텍처로 구현하는 단계로, 단일 Bounded Context 내에서 Entity, Value Object, Aggregate, Repository, Factory, Domain Service 등 패턴을 적용해 **도메인 모델의 일관성, 트랜잭션 경계, 불변성, 도메인 규칙**을 구현한다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/domain-driven-design/tactical-design/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/domain-driven-design/tactical-design/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/domain-driven-design/tactical-design/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/domain-driven-design/tactical-design/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Tactical Design"><meta property="og:description" content="전술적 설계 (Tactical Design) 는 **어떻게 구현할 것인가** 에 집중한다. 도메인 주도 설계 (DDD) 에서 전략적 설계로 정의된 도메인 모델을 실제 코드와 아키텍처로 구현하는 단계로, 단일 Bounded Context 내에서 Entity, Value Object, Aggregate, Repository, Factory, Domain Service 등 패턴을 적용해 **도메인 모델의 일관성, 트랜잭션 경계, 불변성, 도메인 규칙**을 구현한다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Tactical Design"><meta name=twitter:description content="전술적 설계 (Tactical Design) 는 **어떻게 구현할 것인가** 에 집중한다. 도메인 주도 설계 (DDD) 에서 전략적 설계로 정의된 도메인 모델을 실제 코드와 아키텍처로 구현하는 단계로, 단일 Bounded Context 내에서 Entity, Value Object, Aggregate, Repository, Factory, Domain Service 등 패턴을 적용해 **도메인 모델의 일관성, 트랜잭션 경계, 불변성, 도메인 규칙**을 구현한다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Computer Science and Engineering","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Software Engineering","item":"https://buenhyden.github.io/posts/software-engineering/"},{"@type":"ListItem","position":3,"name":"Design and Architecture","item":""},{"@type":"ListItem","position":4,"name":"Design Methodology","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/"},{"@type":"ListItem","position":5,"name":"Domain-Driven Design","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/domain-driven-design/"},{"@type":"ListItem","position":6,"name":"Tactical Design","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/domain-driven-design/tactical-design/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>Computer Science and Engineering</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/>Software Engineering</a>&nbsp;»&nbsp;<a href>Design and Architecture</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/>Design Methodology</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-methodology/domain-driven-design/>Domain-Driven Design</a></div><h1>Tactical Design</h1><div class=post-description>전술적 설계 (Tactical Design) 는 <strong>어떻게 구현할 것인가</strong> 에 집중한다. 도메인 주도 설계 (DDD) 에서 전략적 설계로 정의된 도메인 모델을 실제 코드와 아키텍처로 구현하는 단계로, 단일 Bounded Context 내에서 Entity, Value Object, Aggregate, Repository, Factory, Domain Service 등 패턴을 적용해 <strong>도메인 모델의 일관성, 트랜잭션 경계, 불변성, 도메인 규칙</strong>을 구현한다.</div></header><div class=post-content><h2 id=tactical-design전술적-설계>Tactical Design(전술적 설계)<a hidden class=anchor aria-hidden=true href=#tactical-design전술적-설계>#</a></h2><p>Tactical DDD 는 전략적 설계로 정의된 Bounded Context 내에서 도메인 모델을 실제 코드 구조로 구현하는 단계이다. 이 단계에서는 Entity(엔터티), Value Object(값 객체), Aggregate(애그리거트), Domain Service(도메인 서비스), Repository(저장소), Domain Event(도메인 이벤트) 같은 전술 패턴을 적용하여 강결합된 도메인 논리를 비즈니스 규칙에 맞게 내부적으로 캡슐화하고, 데이터 일관성을 유지한다. 또한 해당 패턴들로 모듈 경계를 명확히 하고 객체 간 관계를 구조화하여 유지보수성과 확장성을 확보한다.</p><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><table><thead><tr><th>개념</th><th>정의</th><th>역할</th><th>실무 구현 요소</th></tr></thead><tbody><tr><td><strong>Entity (엔터티)</strong></td><td>고유한 식별자를 가지며 상태와 생명 주기를 관리하는 객체</td><td>동일성은 ID 로 판단, 상태 변경 가능</td><td>- ID 필드 (UUID 등)<br>- 상태 변경 메서드 (<code>changeXXX</code>)<br>- 비즈니스 불변식 검증</td></tr><tr><td><strong>Value Object (값 객체)</strong></td><td>식별자 없이 속성 값으로 동일성 판단, 불변 객체</td><td>도메인 개념 표현, 엔터티의 속성 구성</td><td>- 생성자 내 유효성/불변성 검증<br>- <code>equals</code>, <code>hashCode</code> 구현<br>- 수정 불가 구조</td></tr><tr><td><strong>Aggregate & Aggregate Root</strong></td><td>일관성을 유지하는 객체 클러스터, 외부 진입은 루트만 허용</td><td>트랜잭션 범위 및 불변성 보장 단위</td><td>- 내부 참조는 루트 통해서만<br>- 루트에 상태 변경 메서드 집중<br>- 비즈니스 규칙 캡슐화</td></tr><tr><td><strong>Domain Service</strong></td><td>상태 없는 객체, 엔터티/VO 에 귀속되지 않는 도메인 로직 수행</td><td>도메인 객체 간 협력 로직 수행</td><td>- 명령형 도메인 메서드 정의<br>- 도메인 계층에 위치<br>- 외부 의존 최소화</td></tr><tr><td><strong>Repository</strong></td><td>Aggregate 단위의 영속성 추상화</td><td>도메인 로직과 영속 기술 분리</td><td>- <code>save</code>, <code>findById</code>, <code>delete</code> 등<br>- ORM 연동 (SQLAlchemy, TypeORM 등)<br>- 인터페이스 분리</td></tr><tr><td><strong>Domain Event</strong></td><td>상태 변화 알림 및 비동기 트리거 객체</td><td>사이드이펙트 분리 및 이벤트 기반 연동</td><td>- 이벤트 클래스 (<code>OrderCreatedEvent</code> 등)<br>- 퍼블리셔/리스너 구조<br>- 후속 처리 핸들러 구현</td></tr><tr><td><strong>Factory</strong></td><td>복잡한 객체 생성을 외부로 분리하는 패턴</td><td>생성 책임 분리, 일관된 생성 방식 제공</td><td>- 정적 팩토리 메서드 (<code>create</code>)<br>- 빌더 패턴 적용<br>- 생성 과정 불변성 보장</td></tr><tr><td><strong>Specification</strong></td><td>비즈니스 규칙을 객체화해 재사용 가능하게 함</td><td>조건 조합 및 검증 로직 분리</td><td>- <code>isSatisfiedBy(entity)</code> 메서드<br>- AND/OR/NOT 조합 지원<br>- 리포지토리 조건 필터로 활용</td></tr><tr><td><strong>Ubiquitous Language</strong></td><td>도메인 전문가와 개발자 간 공통 언어</td><td>용어 명확화 및 코드 일관성 강화</td><td>- 클래스/메서드에 도메인 용어 반영<br>- 주석 및 문서화에 반영</td></tr><tr><td><strong>Bounded Context</strong></td><td>도메인 모델이 유효한 논리적 경계</td><td>모델 중복/충돌 방지, 통합 전략 기반</td><td>- 모듈/마이크로서비스 경계 설정<br>- Context Mapping 활용<br>(ACL, Shared Kernel 등)</td></tr></tbody></table><h4 id=추가-실무-고려-요소>추가 실무 고려 요소<a hidden class=anchor aria-hidden=true href=#추가-실무-고려-요소>#</a></h4><table><thead><tr><th>요소</th><th>설명</th></tr></thead><tbody><tr><td><strong>트랜잭션 경계</strong></td><td>Aggregate 단위에서 관리. DB 트랜잭션과 일치시켜 데이터 정합성 보장.</td></tr><tr><td><strong>계층 분리 (Layered Architecture)</strong></td><td>Domain / Application / Infrastructure / Interface 계층 분리</td></tr><tr><td><strong>의존성 역전 (Dependency Inversion)</strong></td><td>도메인이 외부 계층에 의존하지 않도록 인터페이스 추상화</td></tr><tr><td><strong>불변성 보장 (Invariant Enforcement)</strong></td><td>Entity, Value Object, Aggregate 내부에서 규칙을 보호하고 검증</td></tr></tbody></table><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><p><strong>주요 목적:</strong></p><ol><li><strong>비즈니스 복잡성 관리</strong>: 복잡한 비즈니스 규칙을 명확하게 표현</li><li><strong>유지보수성 향상</strong>: 변경 요구사항에 유연하게 대응</li><li><strong>도메인 지식 보존</strong>: 비즈니스 로직을 코드에 명시적으로 표현</li><li><strong>협업 개선</strong>: 비즈니스 전문가와 개발자 간 소통 원활화</li></ol><p><strong>필요성:</strong></p><ul><li>복잡한 비즈니스 도메인의 정확한 모델링</li><li>장기적인 소프트웨어 품질 보장</li><li>비즈니스 변화에 대한 적응력 확보</li><li>개발팀과 비즈니스팀 간의 이해 격차 해소</li></ul><h3 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><ol><li><strong>도메인 모델 구체화</strong>: 추상적인 비즈니스 개념을 구현 가능한 코드로 변환</li><li><strong>비즈니스 규칙 캡슐화</strong>: 도메인 로직을 적절한 객체에 배치</li><li><strong>데이터 일관성 보장</strong>: Aggregate 를 통한 트랜잭션 경계 관리</li><li><strong>관심사 분리</strong>: 도메인 로직과 기술적 관심사의 명확한 분리</li></ol><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><ul><li><strong>코드 중심:</strong> 실제 구현에 초점.</li><li><strong>선언적 모델링</strong>: 비즈니스 의도를 명확하게 표현</li><li><strong>계층화된 아키텍처</strong>: 각 계층의 책임 명확화</li><li><strong>풍부한 도메인 모델</strong>: 데이터와 행동을 함께 캡슐화</li><li><strong>패턴 기반:</strong> Aggregate, Entity, Value Object 등 DDD 패턴 활용.</li><li><strong>일관성 및 무결성:</strong> 도메인 모델의 일관성과 무결성 유지.</li><li><strong>테스트 용이성</strong>: 비즈니스 로직의 독립적 테스트 가능</li></ul><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><p>전술 설계 (Tactical Design) 는 <strong>개념적 도메인 모델을 코드 수준으로 구체화</strong>하는 단계로, 비즈니스 요구사항을 도메인 모델로 추상화하고, 이를 기반으로 소프트웨어를 구현하며, 구현 결과에 대한 피드백을 통해 모델을 지속적으로 개선하는 것이다.<br>Tactical Design 은 모델 주도 설계의 실천적 구현 단계로, 도출된 도메인 모델을 소프트웨어 구조와 코드로 구체화한다. 즉, 모델 주도 설계가 " 무엇을 모델링할 것인가 " 에 집중한다면, Tactical Design 은 " 어떻게 모델을 코드로 구현할 것인가 " 에 집중한다.</p><ol><li><p><strong>Bounded Context 내에서 실행</strong></p><ul><li>전술적 설계는 전략적 설계로 이루어진 경계 (<code>bounded context</code>) 내부에서, 도메인 모델을 세밀하게 <strong>구성하고 구현</strong>하는 단계이다.</li><li>각 컨텍스트는 독립된 모델과 언어 (Ubiquitous Language) 를 갖고, <strong>모델이 내부적으로 일관성을 유지</strong>해야 한다.</li></ul></li><li><p><strong>도메인 주체의 실체화</strong></p><ul><li><strong>Entity, Value Object, Aggregate</strong> 같은 DDD 빌딩 블록을 코드로 구체화한다.</li><li><strong>Entity</strong>: 고유 ID 기반의 라이프사이클을 갖는 객체.</li><li><strong>Value Object</strong>: 불변이며 값 자체로 정체성이 결정된다.</li><li><strong>Aggregate</strong>: 하나의 루트 엔티티 주도 하에 관련 객체 묶음 구성, 상태 불변성과 비즈니스 규칙 인한 일관성 보장.</li></ul></li><li><p><strong>도메인 행동 캡슐화</strong></p><ul><li>중요 비즈니스 로직은 엔티티나 값 객체 내부 <strong>메서드로 구현</strong>하고, <strong>상태 변경은 도메인 객체를 통해 수행</strong>한다.</li><li>이를 통해 <strong>애플리케이션 서비스나 UI 레이어가 아닌 도메인 계층에 로직이 집중</strong>된다.</li></ul></li><li><p><strong>인프라와 분리된 저장소 인터페이스</strong></p><ul><li><strong>Repository</strong> 패턴을 통해 도메인 모델의 저장·조회 책임을 추상화하며, 비즈니스 계층과 데이터 영속화의 종속성을 방지.</li></ul></li><li><p><strong>무상태성과 명확한 단일 책임</strong></p><ul><li><strong>Domain Service</strong>: Entity 에 속하지 않는 비즈니스 로직을 수행하며, <strong>상태를 유지하지 않고 명확한 비즈니스 역할만 수행</strong>한다.</li><li><strong>Factory</strong>: 복잡한 도메인 객체 생성 절차를 분리하여 코드 양방향성을 줄이고 SRP(Single Responsibility Principle) 준수.</li></ul></li><li><p><strong>도메인 이벤트를 통한 의사소통</strong></p><ul><li><strong>Domain Event</strong>는 시스템 내 중요한 상태 변화를 캡쳐하여 <strong>느슨한 결합 방식으로 구성요소 간 상호작용</strong>을 원활히 한다.</li></ul></li><li><p><strong>모듈화 및 구조 정리</strong></p><ul><li><strong>Module</strong> 또는 패키지를 통해 관련 도메인 개념 (Entity, VO 등) 을 <strong>비즈니스 단위로 그룹화</strong>하며, 탐색성과 유지보수성을 향상시킨다.</li></ul></li><li><p>반복적 모델 - 코드 피드백 루프</p><ul><li>전술 설계는 <strong>반복적인 탐색–구현–리팩터링 사이클</strong>을 포함하며, 이는 모델과 코드의 동기화를 유지해 <strong>도메인 변경을 빠르게 수용</strong>할 수 있게 한다.</li></ul></li></ol><pre class=mermaid>graph TD
    A[비즈니스 요구사항] --&gt; B[도메인 모델]
    B --&gt; C[구현 코드]
    C --&gt; D[피드백]
    D --&gt; A
    
    B --&gt; E[Entity]
    B --&gt; F[Value Object]
    B --&gt; G[Aggregate]
    B --&gt; H[Domain Service]
</pre><ul><li><strong>Aggregate 패턴:</strong> 연관된 객체를 하나의 단위로 묶어 일관성 관리.</li><li><strong>Entity, Value Object:</strong> 도메인 객체의 식별 및 불변성 관리.</li><li><strong>Repository, Domain Service:</strong> 데이터 접근 및 복잡한 도메인 로직 처리.</li><li><strong>계층화 아키텍처:</strong> 도메인, 애플리케이션, 인프라 계층 분리.</li></ul><h3 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h3><pre class=mermaid>graph TB
    %% 계층별 그룹 정의
    subgraph &#34;Application Layer&#34;
        AL[Application Service]
        AH[Application Handler]
    end

    subgraph &#34;Domain Layer&#34;
        AG[Aggregate Root]
        E[Entity]
        VO[Value Object]
        DS[Domain Service]
        REPOI[Repository Interface]
        DE[Domain Event]
        F[Factory]
    end

    subgraph &#34;Infrastructure Layer&#34;
        R[Repository Implementation]
        DB[(Database)]
        EH[Event Handler]
        ES[External System]
    end

    %% 흐름 정의
    AL --&gt; AG
    AL --&gt; DS
    AL --&gt; REPOI
    AH --&gt; DS

    AG --&gt; E
    AG --&gt; VO
    AG --&gt; DE
    F --&gt; AG
    REPOI --&gt; R
    R --&gt; DB

    EH --&gt; DE
    ES --&gt; DS

    %% 느슨한 결합 표현
    AL -.-&gt; DE
    AG -.-&gt; REPOI
    REPOI -.-&gt; R
</pre><h4 id=핵심-도메인-빌딩-블록>핵심 도메인 빌딩 블록<a hidden class=anchor aria-hidden=true href=#핵심-도메인-빌딩-블록>#</a></h4><p><strong>핵심 도메인 빌딩 블록</strong>은 도메인 주도 설계 (DDD, Domain-Driven Design) 에서 복잡한 비즈니스 도메인을 효과적으로 소프트웨어로 구현하기 위해 사용하는 전술적 설계 (Tactical Design) 의 주요 구성 요소를 의미한다.<br>이 빌딩 블록들은 도메인 모델을 코드로 구체화할 때 일관성과 유지보수성을 높여주며, 도메인 로직의 명확한 분리와 재사용성을 보장한다.</p><p>핵심 도메인 빌딩 블록의 목적은 다음과 같다:</p><ul><li><strong>복잡도 관리</strong>: 도메인 모델의 복잡도를 낮추고, 구현에 대한 명확한 가이드를 제공한다.</li><li><strong>도메인 로직의 격리</strong>: 도메인 로직을 외부 기술 요소 (프레임워크, DB 등) 로부터 분리하여, 비즈니스 요구사항 변화에 유연하게 대응할 수 있다.</li><li><strong>유비쿼터스 언어 지원</strong>: 도메인 전문가와 개발자가 동일한 언어로 소통할 수 있도록 모델과 코드를 일치시킨다.</li><li><strong>일관성 및 재사용성</strong>: 각 빌딩 블록은 명확한 역할과 책임을 가지며, 재사용 가능한 구조를 제공한다.</li></ul><table><thead><tr><th>구분</th><th>구성요소</th><th>기능</th><th>역할</th><th>특징</th></tr></thead><tbody><tr><td><strong>핵심</strong></td><td><strong>Entity (엔티티)</strong></td><td>고유 식별자를 기반으로 상태를 가지며 변경 가능</td><td>도메인 개념의 실체화, 상태 추적 및 생명주기 관리</td><td>ID 기반 동일성, 가변성</td></tr><tr><td></td><td><strong>Value Object (값 객체)</strong></td><td>불변의 값으로 도메인 속성 표현</td><td>동일성 판단, 개념 명확화, 사이드 이펙트 없는 사용</td><td>불변성, 값 비교 기반 동일성</td></tr><tr><td></td><td><strong>Aggregate Root (집합체 루트)</strong></td><td>관련 엔티티와 값 객체 묶음의 트랜잭션 및 일관성 경계 책임</td><td>Aggregate 내부 일관성 보장, 외부 노출 지점</td><td>루트 외부 접근 제한, 트랜잭션 단위 관리</td></tr><tr><td></td><td><strong>Repository (저장소 인터페이스)</strong></td><td>도메인 객체의 저장/조회 인터페이스</td><td>도메인 계층과 인프라 계층 분리, 데이터 접근 추상화</td><td>인터페이스 기반, 테스트 대체 용이</td></tr><tr><td><strong>보완</strong></td><td><strong>Domain Service (도메인 서비스)</strong></td><td>여러 도메인 객체에 걸친 도메인 연산 처리</td><td>Entity 에 귀속되지 않는 핵심 비즈니스 로직 수행</td><td>무상태, SRP(단일 책임 원칙) 준수</td></tr><tr><td></td><td><strong>Factory (팩토리)</strong></td><td>복잡한 객체 (예: Aggregate) 생성 책임 분리</td><td>도메인 객체 생성의 불변식 및 유효성 보장</td><td>생성 책임 위임, 도메인 초기화 캡슐화</td></tr><tr><td></td><td><strong>Domain Event (도메인 이벤트)</strong></td><td>도메인 내 중요한 사건을 객체로 표현</td><td>상태 변화의 표현, 모듈 간/시스템 간 비동기 통신 지원</td><td>이벤트 중심 구조, 느슨한 결합</td></tr></tbody></table><h5 id=entity-엔티티>Entity (엔티티)<a hidden class=anchor aria-hidden=true href=#entity-엔티티>#</a></h5><ul><li><p>엔티티는 도메인 내에서 고유 식별자 (예: order_id) 를 가지며, 상태와 생명주기를 관리하는 객체다.</p></li><li><p>비즈니스에서 중요한 개체 (예: 주문, 사용자 등) 를 표현하며, 동일한 속성을 가진 객체라도 식별자가 다르면 서로 다른 엔티티로 간주한다.</p></li><li><p>핵심 특성</p><ul><li><strong>고유 식별자 (Identity) 규칙</strong>: 엔티티는 반드시 고유 식별자를 가져야 하며, 동일한 식별자를 가지는 객체는 같은 엔티티로 간주한다.</li><li><strong>상태 변화 및 생명주기 관리</strong>: 엔티티는 상태 변화 (생성, 수정, 삭제 등) 가 가능하며, 생명주기를 관리할 수 있어야 한다.</li><li><strong>동등성 (Equality) 규칙</strong>: 두 엔티티의 동일성은 식별자 (ID) 로 판단한다.</li><li><strong>도메인 개념의 실체화</strong>: 비즈니스에서 중요한 개체 (예: 주문, 사용자 등) 를 실체화한다.</li></ul></li><li><p>코드 예시</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2>2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3>3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4>4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5>5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6>6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>,</span> <span class=n>items</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>order_id</span> <span class=o>=</span> <span class=n>order_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>items</span> <span class=o>=</span> <span class=n>items</span> <span class=ow>or</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=s2>&#34;CREATED&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>add_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>주요 특징<ul><li><strong>식별자</strong>: <code>order_id</code> 로 엔티티의 고유성을 보장한다.</li><li><strong>상태</strong>: <code>status</code> 속성으로 주문의 상태를 관리한다.</li><li><strong>행동</strong>: <code>add_item()</code> 메서드로 주문 항목을 추가하며, 엔티티의 상태 변화를 유발한다.</li><li><strong>초기화</strong>: <code>items</code> 는 기본값을 빈 리스트로 설정하여, 주문 생성 시 항목이 없을 수도 있음을 반영한다.</li></ul></li></ul></li></ul><h5 id=value-object-값-객체>Value Object (값 객체)<a hidden class=anchor aria-hidden=true href=#value-object-값-객체>#</a></h5><ul><li>값 객체는 식별자가 없고, 값 자체로 동일성을 판단하는 불변 (immutable) 객체로, DDD(도메인 주도 설계) 에서 중요한 빌딩 블록이다.</li><li>값 객체는 동일한 속성과 값을 가지면 서로 같은 것으로 간주하며, 변경이 불가능해야 한다.</li><li>대표적으로 주소 (Address), 금액 (Money), 기간 (Period) 등과 같이 속성의 조합이 의미를 가지는 개념에 사용된다.</li></ul><ul><li>핵심 특성<ul><li><strong>불변성 (Immutable) 규칙</strong>: 값 객체는 생성 후 내부 속성을 변경할 수 없어야 한다.</li></ul><ul><li><strong>값 기반 동등성 (Value-based Equality)</strong>: 동일한 속성 값을 가지면 같은 객체로 간주한다.</li><li><strong>식별자 없음</strong>: 값 객체는 고유 식별자를 가지지 않는다.</li><li><strong>사이드 이펙트 없는 사용</strong>: 값 객체는 상태 변경이 없으므로, 여러 곳에서 안전하게 공유할 수 있다.</li></ul></li></ul><ul><li><p>코드 예시</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2>2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3>3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4>4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5>5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6>6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>decimal</span> <span class=kn>import</span> <span class=n>Decimal</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span><span class=p>(</span><span class=n>frozen</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Money</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>amount</span><span class=p>:</span> <span class=n>Decimal</span>
</span></span><span class=line><span class=cl>    <span class=n>currency</span><span class=p>:</span> <span class=nb>str</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>특징<ul><li><strong>불변성 보장</strong>: <code>@dataclass(frozen=True)</code> 를 사용해 객체 생성 후 속성 변경을 막아 불변성을 보장한다.</li><li><strong>동등성/해시 자동 구현</strong>: dataclass 의 frozen 옵션을 사용하면 값 기반 동등성 (<code>__eq__</code>) 과 해시 (<code>__hash__</code>) 가 자동으로 구현된다.</li><li><strong>식별자 없음</strong>: 여전히 식별자가 없으며, 값 자체로 동일성을 판단한다.</li><li><strong>타입 명확성</strong>: <code>Decimal</code> 타입을 그대로 사용해 금액 연산의 정확성을 유지한다.</li></ul></li></ul></li></ul><h5 id=aggregate-root-집합체-루트>Aggregate Root (집합체 루트)<a hidden class=anchor aria-hidden=true href=#aggregate-root-집합체-루트>#</a></h5><ul><li>**Aggregate Root(집합체 루트)**는 DDD(도메인 주도 설계) 에서 연관된 엔티티와 값 객체를 하나의 일관성 있는 단위 (애그리거트) 로 묶고, 외부에서는 반드시 루트 엔티티 (집합체 루트) 를 통해서만 내부 객체에 접근하도록 하는 설계 원칙이다.</li><li>집합체 루트는 데이터 일관성, 트랜잭션 경계, 도메인 규칙의 중심 역할을 하며, 대표적인 예로 쇼핑카트, 주문, 청구 명세 등이 있다.</li></ul><ul><li>핵심 특성<ul><li><strong>일관성 경계 (Consistency Boundary) 규칙</strong>: 애그리거트 내부의 모든 객체는 일관성 있게 관리되어야 하며, 외부에서는 루트를 통해서만 접근한다.</li><li><strong>트랜잭션 단위 관리</strong>: 애그리거트는 트랜잭션 경계로 사용되며, 애그리거트 내부의 모든 변경은 원자적으로 처리된다.</li><li><strong>불변식 (Invariant) 보장</strong>: 애그리거트는 내부 객체 간의 비즈니스 규칙 (불변식) 을 항상 만족시켜야 한다.</li></ul><ul><li><strong>외부 접근 제한</strong>: 애그리거트 외부에서는 내부 객체에 직접 접근할 수 없고, 반드시 루트를 통해서만 접근한다.</li></ul></li></ul><ul><li><p>코드 예시</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span><span class=lnt id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a>
</span><span class=lnt id=hl-4-16><a class=lnlinks href=#hl-4-16>16</a>
</span><span class=lnt id=hl-4-17><a class=lnlinks href=#hl-4-17>17</a>
</span><span class=lnt id=hl-4-18><a class=lnlinks href=#hl-4-18>18</a>
</span><span class=lnt id=hl-4-19><a class=lnlinks href=#hl-4-19>19</a>
</span><span class=lnt id=hl-4-20><a class=lnlinks href=#hl-4-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>ShoppingCart</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cart_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_cart_id</span> <span class=o>=</span> <span class=n>cart_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_items</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>cart_id</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cart_id</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>items</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 외부에서 직접 수정 불가, 복사본 반환</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>list</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>add_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 도메인 규칙(예: 중복 방지, 수량 제한 등) 추가 가능</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>total</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>sum</span><span class=p>(</span><span class=n>item</span><span class=o>.</span><span class=n>price</span> <span class=o>*</span> <span class=n>item</span><span class=o>.</span><span class=n>qty</span> <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>특징<ul><li><strong>캡슐화 강화</strong>: 내부 리스트 (<code>_items</code>) 를 외부에서 직접 수정할 수 없도록 보호한다.</li><li><strong>불변성 유지</strong>: <code>items</code> 프로퍼티는 복사본을 반환해 외부에서 직접 리스트를 변경하지 못하게 한다.</li><li><strong>도메인 규칙 확장 용이</strong>: <code>add_item()</code> 메서드에서 중복 방지, 수량 제한 등 도메인 규칙을 쉽게 추가할 수 있다.</li><li><strong>테스트 용이성</strong>: 총합 연산, 아이템 추가/삭제, 불변성 유지 등 다양한 테스트 시나리오를 명확히 검증할 수 있다.</li></ul></li></ul></li></ul><h5 id=repository-저장소-인터페이스>Repository (저장소 인터페이스)<a hidden class=anchor aria-hidden=true href=#repository-저장소-인터페이스>#</a></h5><ul><li><p>**Repository(저장소 인터페이스)**는 도메인 모델과 데이터 저장소 (DB, 메모리 등) 간의 의존성을 분리하는 패턴으로, 도메인 객체의 저장, 조회, 삭제 등 영속성 관련 작업을 추상화한다.</p></li><li><p>도메인 계층에서는 저장소의 구체적 구현 (예: DB, 파일, 메모리 등) 에 신경 쓰지 않고, 저장소 인터페이스를 통해 도메인 객체를 다룰 수 있다.</p></li><li><p>핵심 특성</p><ul><li><strong>도메인 - 인프라 분리 규칙</strong>: 도메인 계층과 인프라 계층 (DB, 파일 등) 을 분리하여, 도메인 계층이 인프라에 의존하지 않도록 한다.</li><li><strong>추상화 (Interface) 기반 설계</strong>: 저장소는 인터페이스로 정의되어, 테스트 및 다양한 구현체 (메모리, DB 등) 로 대체 가능하다.</li><li><strong>도메인 객체 영속성 관리</strong>: 도메인 객체의 저장, 조회, 삭제 등 영속성 관련 작업을 추상화한다.</li><li><strong>테스트 대체 용이</strong>: 테스트 환경에서는 메모리 저장소 등으로 쉽게 대체할 수 있다.</li></ul></li><li><p>구현 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span><span class=lnt id=hl-5-18><a class=lnlinks href=#hl-5-18>18</a>
</span><span class=lnt id=hl-5-19><a class=lnlinks href=#hl-5-19>19</a>
</span><span class=lnt id=hl-5-20><a class=lnlinks href=#hl-5-20>20</a>
</span><span class=lnt id=hl-5-21><a class=lnlinks href=#hl-5-21>21</a>
</span><span class=lnt id=hl-5-22><a class=lnlinks href=#hl-5-22>22</a>
</span><span class=lnt id=hl-5-23><a class=lnlinks href=#hl-5-23>23</a>
</span><span class=lnt id=hl-5-24><a class=lnlinks href=#hl-5-24>24</a>
</span><span class=lnt id=hl-5-25><a class=lnlinks href=#hl-5-25>25</a>
</span><span class=lnt id=hl-5-26><a class=lnlinks href=#hl-5-26>26</a>
</span><span class=lnt id=hl-5-27><a class=lnlinks href=#hl-5-27>27</a>
</span><span class=lnt id=hl-5-28><a class=lnlinks href=#hl-5-28>28</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AbstractOrderRepository</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>InMemoryOrderRepository</span><span class=p>(</span><span class=n>AbstractOrderRepository</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_storage</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_storage</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>order_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_storage</span><span class=p>[</span><span class=n>order</span><span class=o>.</span><span class=n>order_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>order</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>order_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_storage</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>del</span> <span class=bp>self</span><span class=o>.</span><span class=n>_storage</span><span class=p>[</span><span class=n>order_id</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>특징<ul><li><strong>인터페이스 분리</strong>: <code>AbstractOrderRepository</code> 를 통해 저장소 인터페이스와 구현체를 분리했다.</li><li><strong>확장성</strong>: InMemory, DB 등 다양한 저장소 구현체를 쉽게 교체할 수 있다.</li><li><strong>삭제 기능 추가</strong>: <code>delete()</code> 메서드로 저장소에서 객체를 삭제할 수 있다.</li><li><strong>테스트 용이성</strong>: InMemory 구현체로 단위 테스트가 쉽고, 실제 환경에서는 DB 구현체로 교체 가능하다.</li><li><strong>유지보수성</strong>: 인터페이스 기반 설계로 코드의 유지보수와 확장성이 높아진다.</li></ul></li></ul></li></ul><h5 id=domain-service-도메인-서비스>Domain Service (도메인 서비스)<a hidden class=anchor aria-hidden=true href=#domain-service-도메인-서비스>#</a></h5><ul><li><p>도메인 서비스는 특정 엔티티에 속하지 않는 도메인 로직을 담당하는 객체로, 여러 엔티티에 걸친 비즈니스 규칙이나 연산을 분리하여 관리하는 역할을 한다.</p></li><li><p>예를 들어, 배송료 계산, 보험료 산정, 세금 계산 등 복잡한 비즈니스 로직이 엔티티에 속하지 않을 때 도메인 서비스로 구현한다.</p></li><li><p>핵심 특성</p><ul><li><strong>엔티티에 귀속되지 않는 로직</strong>: 여러 엔티티에 걸친 비즈니스 로직이나, 특정 엔티티에 속하지 않는 도메인 연산을 처리한다.</li><li><strong>무상태 (Stateless) 규칙</strong>: 도메인 서비스는 상태를 가지지 않으며, 입력에 따라 결과만 반환한다.</li><li><strong>단일 책임 원칙 (SRP) 준수</strong>: 한 도메인 서비스는 하나의 책임 (예: 배송료 계산, 세금 계산 등) 만을 가진다.</li><li><strong>도메인 계층 내 위치</strong>: 도메인 서비스는 도메인 계층에 위치하며, 인프라 계층과는 분리되어야 한다.</li></ul></li><li><p>구현 예시</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>decimal</span> <span class=kn>import</span> <span class=n>Decimal</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Any</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ShippingCostService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>calculate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Decimal</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>order</span><span class=p>,</span> <span class=s2>&#34;items&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;order 객체에 items 속성이 없습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>total_weight</span> <span class=o>=</span> <span class=n>Decimal</span><span class=p>(</span><span class=s2>&#34;0&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>order</span><span class=o>.</span><span class=n>items</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>item</span><span class=p>,</span> <span class=s2>&#34;weight&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;item에 weight 속성이 없습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>total_weight</span> <span class=o>+=</span> <span class=n>Decimal</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>item</span><span class=o>.</span><span class=n>weight</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>total_weight</span> <span class=o>*</span> <span class=n>Decimal</span><span class=p>(</span><span class=s2>&#34;0.5&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>특징<ul><li><strong>타입 힌트 추가</strong>: 입력값과 반환값에 타입 힌트를 명시해 가독성과 안정성을 높였다.</li><li><strong>입력값 검증</strong>: <code>order</code> 와 <code>item</code> 의 속성 존재 여부를 체크해 예외 상황에 안전하게 대응한다.</li><li><strong>Decimal 변환</strong>: 금액 연산의 정확성을 위해 모든 weight 값을 Decimal 로 변환한다.</li><li><strong>확장성</strong>: 향후 다양한 배송 정책 (예: 무게별, 지역별, 할인 등) 추가가 용이하다.</li></ul></li></ul></li></ul><h5 id=factory-팩토리>Factory (팩토리)<a hidden class=anchor aria-hidden=true href=#factory-팩토리>#</a></h5><ul><li><p><strong>팩토리 패턴</strong>은 객체의 생성 로직을 별도의 팩토리 객체에 위임하여, 클라이언트 코드가 객체 생성 방법에 의존하지 않도록 하는 설계 패턴이다.</p></li><li><p>복잡한 초기화, 다양한 생성 방식, 객체 생성의 일관성 보장, 테스트 용이성 등의 목적에서 활용된다.</p></li><li><p>DDD(도메인 주도 설계) 에서는 복잡한 애그리거트 (집합체) 나 도메인 객체의 생성을 팩토리로 분리해 도메인 모델의 순수성과 일관성을 높인다.</p></li><li><p>핵심 특성</p><ul><li><strong>생성 책임 분리 규칙</strong>: 복잡한 객체 (특히 애그리거트) 의 생성 로직을 팩토리로 분리하여, 클라이언트 코드가 생성 방법에 의존하지 않도록 한다.</li><li><strong>불변식 (Invariant) 보장</strong>: 팩토리는 생성 시점에 도메인 규칙 (불변식) 을 반드시 만족시키는 객체를 생성해야 한다.</li><li><strong>도메인 초기화 캡슐화</strong>: 객체 생성 및 초기화 로직을 팩토리 내부에 캡슐화한다.</li><li><strong>테스트 용이성</strong>: 팩토리를 통해 생성된 객체는 초기 상태가 항상 일관되게 보장된다.</li></ul></li><li><p>구현 예시</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13>13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14>14</a>
</span><span class=lnt id=hl-7-15><a class=lnlinks href=#hl-7-15>15</a>
</span><span class=lnt id=hl-7-16><a class=lnlinks href=#hl-7-16>16</a>
</span><span class=lnt id=hl-7-17><a class=lnlinks href=#hl-7-17>17</a>
</span><span class=lnt id=hl-7-18><a class=lnlinks href=#hl-7-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>uuid</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>order_id</span> <span class=o>=</span> <span class=n>order_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>customer_id</span> <span class=o>=</span> <span class=n>customer_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>items</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>add_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderFactory</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>items</span><span class=p>:</span> <span class=n>List</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>order</span> <span class=o>=</span> <span class=n>Order</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()),</span> <span class=n>customer_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>items</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>order</span><span class=o>.</span><span class=n>add_item</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>order</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>특징<ul><li><strong>고객 ID 반영</strong>: <code>Order</code> 객체에 <code>customer_id</code> 가 포함되어, 도메인 요구사항을 충족한다.</li><li><strong>타입 힌트 추가</strong>: 입력값과 반환값에 타입 힌트를 명시해 가독성과 안정성을 높였다.</li><li><strong>모듈 import 명확화</strong>: <code>uuid</code> 모듈을 명시적으로 import 하여 코드의 완성도를 높였다.</li><li><strong>확장성</strong>: 향후 주문 생성 시 추가 비즈니스 규칙 (예: 아이템 유효성 검사, 주문 상태 초기화 등) 적용이 용이하다.</li><li><strong>테스트 용이성</strong>: 생성된 주문의 ID, 고객 ID, 아이템 초기화 등 다양한 테스트 시나리오를 명확히 검증할 수 있다.</li></ul></li></ul></li></ul><h5 id=domain-event-도메인-이벤트>Domain Event (도메인 이벤트)<a hidden class=anchor aria-hidden=true href=#domain-event-도메인-이벤트>#</a></h5><ul><li><strong>도메인 이벤트</strong>는 도메인 내에서 발생하는 중요한 상태 변화를 명확하게 표현하는 객체로, 시스템의 반응성과 확장성을 높이기 위해 이벤트 기반 아키텍처에서 활용된다.</li><li>예시: 주문 배송 (OrderShipped), 계좌 입금 (AccountCredited), 사용자 회원 가입 (UserRegistered) 등 비즈니스적으로 의미 있는 사건을 나타낸다.</li></ul><ul><li>핵심 특성<ul><li><strong>불변성 (Immutable) 규칙</strong>: 도메인 이벤트는 생성 후 변경될 수 없어야 한다.</li></ul><ul><li><strong>명확한 의미 전달</strong>: 이벤트는 도메인 내에서 발생한 중요한 상태 변화를 명확하게 표현해야 한다.</li><li><strong>이벤트 중심 구조</strong>: 이벤트를 통해 모듈 간 또는 시스템 간 비동기 통신 및 확장성을 지원한다.</li><li><strong>느슨한 결합 (Loose Coupling)</strong>: 이벤트 발행자와 구독자는 서로 직접 참조하지 않고, 이벤트를 통해 간접적으로 통신한다.</li></ul></li></ul><ul><li><p>구현 예시</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span><span class=lnt id=hl-8-15><a class=lnlinks href=#hl-8-15>15</a>
</span><span class=lnt id=hl-8-16><a class=lnlinks href=#hl-8-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Any</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span><span class=p>(</span><span class=n>frozen</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>DomainEvent</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>occurred_on</span><span class=p>:</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl>    <span class=n>event_type</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>payload</span><span class=p>:</span> <span class=n>Any</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>order_shipped_event</span> <span class=o>=</span> <span class=n>DomainEvent</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>occurred_on</span><span class=o>=</span><span class=n>datetime</span><span class=p>(</span><span class=mi>2025</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>19</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>event_type</span><span class=o>=</span><span class=s2>&#34;OrderShipped&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>payload</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;order_id&#34;</span><span class=p>:</span> <span class=s2>&#34;ORD123&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>특징<ul><li><strong>이벤트 타입 명시</strong>: <code>event_type</code> 속성으로 이벤트의 종류를 명확히 구분할 수 있다.</li><li><strong>페이로드 확장성</strong>: <code>payload</code> 에 다양한 정보를 딕셔너리 등으로 담을 수 있어, 여러 도메인 이벤트에 재사용이 가능하다.</li><li><strong>불변성 유지</strong>: 여전히 <code>@dataclass(frozen=True)</code> 로 불변성을 보장한다.</li><li><strong>직렬화 및 메시징 연계 용이</strong>: 메시지 큐, 이벤트 버스 등 외부 시스템과 연동 시 구조가 유연하다.</li><li><strong>테스트 용이성</strong>: 이벤트 타입, 페이로드, 발생 시각 등 다양한 속성에 대한 단위 테스트가 가능하다.</li></ul></li></ul></li></ul><h4 id=기타>기타<a hidden class=anchor aria-hidden=true href=#기타>#</a></h4><table><thead><tr><th>구분</th><th>구성요소</th><th>기능</th><th>역할</th><th>특징</th></tr></thead><tbody><tr><td><strong>인프라</strong></td><td><strong>Repository Implementation (저장소 구현체)</strong></td><td>실제 영속성 (DB) 과의 연결을 담당하는 클래스</td><td>도메인 인터페이스를 구현하여 DB 접근</td><td>구현체 분리, Test Double 사용 가능</td></tr><tr><td></td><td><strong>Database (데이터베이스)</strong></td><td>상태 영속성 저장소</td><td>도메인 객체의 영속 데이터 저장</td><td>관계형/NoSQL 모두 가능</td></tr><tr><td></td><td><strong>Event Handler (이벤트 핸들러)</strong></td><td>Domain Event 를 구독하고 후속 처리 로직 수행</td><td>알림, 로깅, 비동기 프로세싱 등 외부 트리거</td><td>비동기 메시지 처리, 이벤트 기반 연동</td></tr><tr><td></td><td><strong>External System (외부 시스템)</strong></td><td>외부 API, 메시지 브로커, 타 시스템 등과 통합</td><td>도메인 서비스 또는 핸들러에서 호출되는 외부 구성 요소</td><td>외부 의존, 네트워크 경계 명확화</td></tr><tr><td><strong>응용</strong></td><td><strong>Application Service (앱 서비스)</strong></td><td>유스케이스 단위의 비즈니스 흐름 조율</td><td>도메인 계층 조정, 트랜잭션 경계 제어</td><td>도메인 객체 직접 로직 수행하지 않음</td></tr><tr><td></td><td><strong>Application Handler (앱 핸들러)</strong></td><td>명령/이벤트/요청을 처리하고 Application Service 호출</td><td>입력값 유효성 검사, 흐름 제어, 트리거 역할</td><td>경량 계층, 흐름 진입점</td></tr></tbody></table><h3 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h3><table><thead><tr><th>기법</th><th>정의 & 목적</th><th>주요 특징</th><th>대표 예시</th></tr></thead><tbody><tr><td><strong>Guard / Assertion</strong></td><td>도메인 객체의 생성 및 변경 시 ** 불변식 (invariant)** 과 ** 사전조건 (precondition)** 을 코드에서 직접 검사</td><td>- 오류를 빠르게 감지하고<br>- 일관성, 신뢰성 확보</td><td>수량 ≥ 1 검증, 이메일/우편번호 포맷 확인</td></tr><tr><td><strong>Specification</strong></td><td><strong>복잡한 비즈니스 규칙</strong>을 별도 객체로 추출하여 조합과 재사용이 가능하도록 구성</td><td>- 규칙 조합 가능 (AND/OR/NOT)<br>- 테스트 및 유지 보수 용이</td><td><code>OrderEligibleSpec</code>, <code>UserActiveSpec</code></td></tr><tr><td><strong>Optimistic Locking</strong></td><td><strong>버전 (version)</strong> 필드 기반으로 동시성 충돌을 감지 및 처리하는 낙관적 잠금 기법</td><td>- 충돌 시 예외와 재시도 유도<br>- 데이터 일관성 유지</td><td>JPA <code>@Version</code>, <code>updated_at</code> 기반 충돌 처리</td></tr><tr><td><strong>CQRS</strong></td><td>** 읽기 (Query)** 와 <strong>쓰기 (Command)</strong> 모델을 분리해 성능·확장성·유지보수성을 극대화</td><td>- 병목 해소 및 책임 분리<br>- CQRS 와 Event Sourcing 동시 적용 가능</td><td><code>OrderWriteService</code>, <code>OrderReadService</code>, Event Sourcing 연동</td></tr><tr><td><strong>Domain Event</strong></td><td>도메인 내부의 중요한 상태 변화를 <strong>이벤트 객체</strong>로 표현하여 비동기, 모듈 간 느슨한 결합을 지원</td><td>- 불변 이벤트<br>- 퍼블리시/구독 모델<br>- 추적성 보장</td><td><code>OrderPlacedEvent</code>, <code>UserRegisteredEvent</code></td></tr><tr><td><strong>Essence Object</strong></td><td>UI(form) ↔ 도메인 간 데이터 전송과 유효성 검증용, <strong>가벼운 DTO 대용 객체</strong></td><td>- 도메인 순수성 유지<br>- 입력 검증과 바인딩 전용</td><td><code>RegistrationEssence</code>, <code>ProfileUpdateEssence</code></td></tr></tbody></table><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>비즈니스 로직 명확화</strong></td><td>도메인 개념과 규칙을 코드에서 명시적으로 표현하여 비즈니스 의도가 명확하게 전달됨</td></tr><tr><td><strong>도메인 캡슐화</strong></td><td>Aggregate 내부에서만 상태 변경을 허용하여 외부와의 불필요한 결합 방지</td></tr><tr><td><strong>일관성과 무결성 보장</strong></td><td>Aggregate Root 가 트랜잭션 및 규칙을 강제하여 데이터 일관성과 무결성을 유지</td></tr><tr><td><strong>테스트 용이성</strong></td><td>각 도메인 객체가 독립적이며 상태 기반으로 단위 테스트 작성이 수월함</td></tr><tr><td><strong>유지보수성 향상</strong></td><td>Bounded Context 와 계층 구조를 통한 관심사 분리로 변경에 유연하게 대응 가능</td></tr><tr><td><strong>확장성과 유연성</strong></td><td>계층화 아키텍처 및 도메인 중심 설계를 통해 새로운 기능 추가 시 구조적 확장이 쉬움</td></tr><tr><td><strong>도메인 지식의 보존</strong></td><td>핵심 규칙과 로직이 코드 안에 녹아 있어, 문서 없이도 도메인 지식을 전달 가능</td></tr><tr><td><strong>협업 효율성 개선</strong></td><td>유비쿼터스 언어 (Ubiquitous Language) 를 기반으로 이해관계자 간 의사소통이 명확해짐</td></tr><tr><td><strong>저장소 추상화로 인한 유연성</strong></td><td>Repository 를 통한 데이터 저장/조회 추상화로 DB 나 인프라 기술 변경이 쉬움</td></tr></tbody></table><h3 id=단점과-문제점-그리고-해결방안>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안>#</a></h3><h4 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h4><table><thead><tr><th>항목</th><th>설명</th><th>해결 방안</th></tr></thead><tbody><tr><td>초기 복잡성</td><td>패턴과 계층이 많아 간단한 애플리케이션에도 구조가 복잡해짐</td><td>핵심 도메인 범위부터 단계적으로 적용, KPI 기반 코드 리뷰 통한 확장 여부 결정</td></tr><tr><td>진입 장벽</td><td>DDD, 패턴, 계층 이해에 시간이 소요됨</td><td>단계적 교육, 코드 템플릿/문서 제공</td></tr><tr><td>성능/추상화 비용</td><td>계층, 추상화, 이벤트 등의 도입으로 성능 오버헤드 발생 가능</td><td>성능 모니터링, 병목 부분 CQRS/캐싱/직접 접근 등 선택적 최적화</td></tr><tr><td>과도한 엔지니어링</td><td>단순 CRUD 에도 무분별한 설계 적용 시 비용 대비 실익 미흡</td><td>비즈니스 가치/복잡도 기반 판단, 적절한 경계선 내에서 패턴 사용</td></tr></tbody></table><h4 id=문제점-및-해결방안>문제점 및 해결방안<a hidden class=anchor aria-hidden=true href=#문제점-및-해결방안>#</a></h4><h5 id=모델-구현-부실>모델 구현 부실<a hidden class=anchor aria-hidden=true href=#모델-구현-부실>#</a></h5><table><thead><tr><th>문제점</th><th>원인</th><th>영향</th><th>탐지 및 예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>Anemic Domain Model</td><td>로직을 Entity 에 넣지 않고 서비스 계층에만 몰아둠</td><td>도메인 객체가 빈 껍데기처럼, 의미 상실</td><td>코드 리뷰, 모델 테스팅</td><td>도메인 메서드 중심 설계, 엔티티로 로직 이동, Specification 사용</td></tr><tr><td>규칙 누락</td><td>비즈니스 규칙을 코드에 반영하지 않음</td><td>일관성 저해, 예외/버그 위험</td><td>테스트&코드 분석, 코드 리뷰</td><td>Guard/Assertion 도입, Specification 정리</td></tr></tbody></table><h5 id=aggregate-설계-오류>Aggregate 설계 오류<a hidden class=anchor aria-hidden=true href=#aggregate-설계-오류>#</a></h5><table><thead><tr><th>문제점</th><th>원인</th><th>영향</th><th>탐지 및 예방 방안</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>Aggregate 경계 불명확</td><td>Transaction 경계 및 도메인 이해 부족</td><td>데이터 불일관성, 복잡도 증가</td><td>도메인 워크숍, 설계 검토</td><td>Aggregate 재정의, CQRS/Event-driven 설계</td></tr><tr><td>Aggregate 지나치게 큼</td><td>루트가 너무 많은 책임과 멤버를 포함</td><td>성능 저하, 테스트 어려움</td><td>코드 프로파일링, 복잡도 분석</td><td>작은 Aggregate 로 분할, CQRS, 서비스로 일부 로직 분리</td></tr></tbody></table><h5 id=저장소-패턴-오용>저장소 패턴 오용<a hidden class=anchor aria-hidden=true href=#저장소-패턴-오용>#</a></h5><table><thead><tr><th>문제점</th><th>원인</th><th>영향</th><th>탐지 및 예방</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>Repository 남용</td><td>모든 엔티티마다 저장소를 생성</td><td>코드베이스 복잡화</td><td>Repository 수 검토, 코드 리뷰</td><td>Aggregate Root 에만 저장소 제공, 불필요한 클래스 제거</td></tr><tr><td>ORM- 도메인 매핑 불일치</td><td>ORM 이 도메인 경계와 자연스럽게 맞지 않음</td><td>모델 왜곡 및 단순화</td><td>ORM 구조 분석, 스키마 리뷰</td><td>Mapper 계층 도입, ORM 비즈니스 로직 분리</td></tr></tbody></table><h3 id=도전-과제>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제>#</a></h3><table><thead><tr><th>구분</th><th>도전 과제</th><th>원인 또는 배경</th><th>영향 또는 리스크</th><th>해결 방안 및 기법</th></tr></thead><tbody><tr><td>기술적</td><td>Aggregate 적절 분리</td><td>트랜잭션 범위, 경계 설계 미흡</td><td>데이터 일관성 저하, 설계 오류</td><td>트랜잭션 중심 도메인 분석, CQRS, Aggregate 크기 가이드라인</td></tr><tr><td></td><td>이벤트 일관성 관리</td><td>도메인 이벤트/통합 이벤트 구분 어려움</td><td>외부 시스템과 비동기 동기화 문제</td><td>이벤트 설계 표준화, Event Sourcing, Outbox 패턴</td></tr><tr><td></td><td>성능 및 트랜잭션 문제</td><td>과도한 객체 간 연결, 트랜잭션 충돌</td><td>응답 지연, Lock 경쟁</td><td>CQRS, 캐싱, Async 처리, Bulk 처리</td></tr><tr><td></td><td>테스트 코드 복잡화</td><td>계층/패턴 많아짐에 따른 단위 테스트 구성 어려움</td><td>테스트 커버리지 감소, 유지보수 저하</td><td>전용 테스트 DSL 도입, Test Fixture 구성, 통합 테스트 중심 구성</td></tr><tr><td></td><td>시각화 및 자동화 도구 부족</td><td>설계 모델과 코드 싱크 자동화 도구 부족</td><td>경계 혼란, 설계 문서 누락</td><td>모델 시각화 도구 도입 (ex. Structurizr), Mermaid/PlantUML 기반 문서화</td></tr><tr><td></td><td>레거시 통합</td><td>기존 시스템과 도메인 모델 충돌</td><td>통합 복잡도, 코드 분기 증가</td><td>Anti-Corruption Layer, Adapter, 점진적 전환</td></tr><tr><td>조직적</td><td>팀 역량 및 경험 부족</td><td>DDD 와 Tactical 패턴 학습 경험 부족</td><td>적용 실패, 설계 오류</td><td>워크숍, 도메인 세션, 코드리뷰 기반 멘토링</td></tr><tr><td></td><td>도메인 전문가와 협업 부족</td><td>유비쿼터스 언어 미활용, 도메인 공유 미흡</td><td>요구사항 누락, 모델 부정확성</td><td>Event Storming, 공유 문서, 정기 협업 세션</td></tr><tr><td></td><td>경계 정의의 모호성</td><td>도메인 간 책임과 기능 분리 기준 불명확</td><td>책임 혼란, 모듈 간 결합도 증가</td><td>Bounded Context 명세 정의, Context Map 활용</td></tr><tr><td>전략적</td><td>대규모 시스템 적용</td><td>협업 인원 증가, 도메인 다층화</td><td>일관성 유지 어려움, 커뮤니케이션 비용 증가</td><td>문서 표준화, 계층적 도메인 전략, 공통 도메인 공유 체계 수립</td></tr></tbody></table><h3 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h3><table><thead><tr><th>도메인</th><th>사용 목적</th><th>적용 패턴 / 기술</th><th>기대 효과</th></tr></thead><tbody><tr><td>이커머스</td><td>주문/결제 관리</td><td><code>Order Aggregate</code>, <code>Payment Value Object</code></td><td>트랜잭션 일관성, 가격 정책 및 결제 정보 캡슐화</td></tr><tr><td>금융 서비스</td><td>계좌 관리</td><td><code>Account Entity</code>, <code>Money Value Object</code></td><td>상태 추적, 환율 및 금액 로직 도메인화</td></tr><tr><td>모빌리티 플랫폼</td><td>예약/취소 처리</td><td><code>Reservation Aggregate</code>, <code>Domain Event</code></td><td>CQRS + Event Sourcing 활용 가능, 비동기 확장성 확보</td></tr><tr><td>의료 시스템</td><td>환자 정보 기록</td><td><code>Patient Aggregate</code>, <code>MedicalRecord Entity</code></td><td>데이터 정합성 보장, 추적 가능한 변경 이력 관리</td></tr><tr><td>물류/배송</td><td>위치/상태 추적</td><td><code>Shipment Aggregate</code>, <code>Location Value Object</code></td><td>위치 정보 정합성 유지, 실시간 상태 추적 가능</td></tr></tbody></table><h3 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h3><h4 id=사례-1-이커머스-주문-시스템>사례 1: 이커머스 주문 시스템<a hidden class=anchor aria-hidden=true href=#사례-1-이커머스-주문-시스템>#</a></h4><p><strong>시스템 구성</strong>:</p><ul><li>주문 Aggregate (OrderRoot Entity + OrderItem VO + Address VO)</li><li>Repository: OrderRepository (CRUD)</li><li>Domain Service: 결제 확인 및 Inventory 확인</li><li>Domain Event: 주문 완료 → Integration Event 발행</li><li>Controller/API layer</li></ul><p><strong>활용 워크플로우</strong>:</p><ol><li>주문 요청 → OrderService</li><li>OrderRoot 생성 → 주문 VO/Entity 구성</li><li>결제 로직 Domain Service 호출</li><li>OrderRoot.confirm() → 상태 transitioning</li><li>Repository.save() → Inventory 업데이트 + Domain Event</li><li>Domain Event → Integration Event 발행</li></ol><p><strong>차이 분석</strong>: 기존 트랜잭션 스크립트 방식과 비교 시, 도메인 중심 모델 설계로 로직 재사용성과 유지보수성 우위</p><pre class=mermaid>sequenceDiagram
    participant API
    participant OrderService
    participant OrderAggregate
    participant PaymentService
    participant OrderRepository
    participant EventPublisher

    API-&gt;&gt;OrderService: createOrder(command)
    OrderService-&gt;&gt;OrderAggregate: Order.create(…)
    OrderAggregate-&gt;&gt;PaymentService: verifyPayment()
    PaymentService--&gt;&gt;OrderAggregate: OK
    OrderAggregate-&gt;&gt;OrderRepository: save(order)
    OrderRepository-&gt;&gt;EventPublisher: publish(OrderPlacedEvent)
</pre><h4 id=사례-2-전자상거래-주문-관리-시스템>사례 2: 전자상거래 주문 관리 시스템<a hidden class=anchor aria-hidden=true href=#사례-2-전자상거래-주문-관리-시스템>#</a></h4><p><strong>시스템 구성:</strong></p><ul><li>Order Aggregate (주문 집합체)</li><li>OrderItem Entity (주문 항목 엔티티)</li><li>Money Value Object (금액 값 객체)</li><li>Product Entity (상품 엔티티)</li><li>Customer Entity (고객 엔티티)</li></ul><p><strong>시스템 구성 다이어그램:</strong></p><pre class=mermaid>graph LR
    subgraph &#34;Order Aggregate&#34;
        O[Order Root]
        OI[OrderItem]
        M[Money VO]
    end
    
    subgraph &#34;Customer Aggregate&#34;
        C[Customer Root]
        A[Address VO]
    end
    
    subgraph &#34;Product Aggregate&#34;
        P[Product Root]
        PR[Price VO]
    end
    
    O --&gt; OI
    OI --&gt; M
    O -.-&gt; C
    OI -.-&gt; P
    C --&gt; A
    P --&gt; PR
</pre><p><strong>Workflow:</strong></p><ol><li>고객이 상품을 장바구니에 추가</li><li>주문 생성 시 Order Aggregate 생성</li><li>각 상품에 대해 OrderItem Entity 생성</li><li>총 금액 계산 및 Money Value Object 생성</li><li>결제 처리 및 주문 상태 업데이트</li><li>재고 차감 및 배송 프로세스 시작</li></ol><p><strong>역할:</strong></p><ul><li><strong>Order Aggregate</strong>: 주문의 일관성 보장, 비즈니스 규칙 적용</li><li><strong>OrderItem Entity</strong>: 개별 상품 주문 정보 관리</li><li><strong>Money Value Object</strong>: 금액 계산 및 통화 처리</li></ul><p><strong>기존 방식과의 차이점:</strong></p><ul><li>트랜잭션 스크립트 방식: 절차적 처리, 비즈니스 로직 분산</li><li>전술적 설계 방식: 객체 중심 처리, 비즈니스 로직 캡슐화</li></ul><h3 id=구현-예시>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시>#</a></h3><p>다음은 전자상거래 주문 시스템의 Python 구현 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1>  1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2>  2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3>  3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4>  4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5>  5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6>  6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7>  7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8>  8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9>  9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10> 10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11> 11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12> 12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13> 13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14> 14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15> 15</a>
</span><span class=lnt id=hl-11-16><a class=lnlinks href=#hl-11-16> 16</a>
</span><span class=lnt id=hl-11-17><a class=lnlinks href=#hl-11-17> 17</a>
</span><span class=lnt id=hl-11-18><a class=lnlinks href=#hl-11-18> 18</a>
</span><span class=lnt id=hl-11-19><a class=lnlinks href=#hl-11-19> 19</a>
</span><span class=lnt id=hl-11-20><a class=lnlinks href=#hl-11-20> 20</a>
</span><span class=lnt id=hl-11-21><a class=lnlinks href=#hl-11-21> 21</a>
</span><span class=lnt id=hl-11-22><a class=lnlinks href=#hl-11-22> 22</a>
</span><span class=lnt id=hl-11-23><a class=lnlinks href=#hl-11-23> 23</a>
</span><span class=lnt id=hl-11-24><a class=lnlinks href=#hl-11-24> 24</a>
</span><span class=lnt id=hl-11-25><a class=lnlinks href=#hl-11-25> 25</a>
</span><span class=lnt id=hl-11-26><a class=lnlinks href=#hl-11-26> 26</a>
</span><span class=lnt id=hl-11-27><a class=lnlinks href=#hl-11-27> 27</a>
</span><span class=lnt id=hl-11-28><a class=lnlinks href=#hl-11-28> 28</a>
</span><span class=lnt id=hl-11-29><a class=lnlinks href=#hl-11-29> 29</a>
</span><span class=lnt id=hl-11-30><a class=lnlinks href=#hl-11-30> 30</a>
</span><span class=lnt id=hl-11-31><a class=lnlinks href=#hl-11-31> 31</a>
</span><span class=lnt id=hl-11-32><a class=lnlinks href=#hl-11-32> 32</a>
</span><span class=lnt id=hl-11-33><a class=lnlinks href=#hl-11-33> 33</a>
</span><span class=lnt id=hl-11-34><a class=lnlinks href=#hl-11-34> 34</a>
</span><span class=lnt id=hl-11-35><a class=lnlinks href=#hl-11-35> 35</a>
</span><span class=lnt id=hl-11-36><a class=lnlinks href=#hl-11-36> 36</a>
</span><span class=lnt id=hl-11-37><a class=lnlinks href=#hl-11-37> 37</a>
</span><span class=lnt id=hl-11-38><a class=lnlinks href=#hl-11-38> 38</a>
</span><span class=lnt id=hl-11-39><a class=lnlinks href=#hl-11-39> 39</a>
</span><span class=lnt id=hl-11-40><a class=lnlinks href=#hl-11-40> 40</a>
</span><span class=lnt id=hl-11-41><a class=lnlinks href=#hl-11-41> 41</a>
</span><span class=lnt id=hl-11-42><a class=lnlinks href=#hl-11-42> 42</a>
</span><span class=lnt id=hl-11-43><a class=lnlinks href=#hl-11-43> 43</a>
</span><span class=lnt id=hl-11-44><a class=lnlinks href=#hl-11-44> 44</a>
</span><span class=lnt id=hl-11-45><a class=lnlinks href=#hl-11-45> 45</a>
</span><span class=lnt id=hl-11-46><a class=lnlinks href=#hl-11-46> 46</a>
</span><span class=lnt id=hl-11-47><a class=lnlinks href=#hl-11-47> 47</a>
</span><span class=lnt id=hl-11-48><a class=lnlinks href=#hl-11-48> 48</a>
</span><span class=lnt id=hl-11-49><a class=lnlinks href=#hl-11-49> 49</a>
</span><span class=lnt id=hl-11-50><a class=lnlinks href=#hl-11-50> 50</a>
</span><span class=lnt id=hl-11-51><a class=lnlinks href=#hl-11-51> 51</a>
</span><span class=lnt id=hl-11-52><a class=lnlinks href=#hl-11-52> 52</a>
</span><span class=lnt id=hl-11-53><a class=lnlinks href=#hl-11-53> 53</a>
</span><span class=lnt id=hl-11-54><a class=lnlinks href=#hl-11-54> 54</a>
</span><span class=lnt id=hl-11-55><a class=lnlinks href=#hl-11-55> 55</a>
</span><span class=lnt id=hl-11-56><a class=lnlinks href=#hl-11-56> 56</a>
</span><span class=lnt id=hl-11-57><a class=lnlinks href=#hl-11-57> 57</a>
</span><span class=lnt id=hl-11-58><a class=lnlinks href=#hl-11-58> 58</a>
</span><span class=lnt id=hl-11-59><a class=lnlinks href=#hl-11-59> 59</a>
</span><span class=lnt id=hl-11-60><a class=lnlinks href=#hl-11-60> 60</a>
</span><span class=lnt id=hl-11-61><a class=lnlinks href=#hl-11-61> 61</a>
</span><span class=lnt id=hl-11-62><a class=lnlinks href=#hl-11-62> 62</a>
</span><span class=lnt id=hl-11-63><a class=lnlinks href=#hl-11-63> 63</a>
</span><span class=lnt id=hl-11-64><a class=lnlinks href=#hl-11-64> 64</a>
</span><span class=lnt id=hl-11-65><a class=lnlinks href=#hl-11-65> 65</a>
</span><span class=lnt id=hl-11-66><a class=lnlinks href=#hl-11-66> 66</a>
</span><span class=lnt id=hl-11-67><a class=lnlinks href=#hl-11-67> 67</a>
</span><span class=lnt id=hl-11-68><a class=lnlinks href=#hl-11-68> 68</a>
</span><span class=lnt id=hl-11-69><a class=lnlinks href=#hl-11-69> 69</a>
</span><span class=lnt id=hl-11-70><a class=lnlinks href=#hl-11-70> 70</a>
</span><span class=lnt id=hl-11-71><a class=lnlinks href=#hl-11-71> 71</a>
</span><span class=lnt id=hl-11-72><a class=lnlinks href=#hl-11-72> 72</a>
</span><span class=lnt id=hl-11-73><a class=lnlinks href=#hl-11-73> 73</a>
</span><span class=lnt id=hl-11-74><a class=lnlinks href=#hl-11-74> 74</a>
</span><span class=lnt id=hl-11-75><a class=lnlinks href=#hl-11-75> 75</a>
</span><span class=lnt id=hl-11-76><a class=lnlinks href=#hl-11-76> 76</a>
</span><span class=lnt id=hl-11-77><a class=lnlinks href=#hl-11-77> 77</a>
</span><span class=lnt id=hl-11-78><a class=lnlinks href=#hl-11-78> 78</a>
</span><span class=lnt id=hl-11-79><a class=lnlinks href=#hl-11-79> 79</a>
</span><span class=lnt id=hl-11-80><a class=lnlinks href=#hl-11-80> 80</a>
</span><span class=lnt id=hl-11-81><a class=lnlinks href=#hl-11-81> 81</a>
</span><span class=lnt id=hl-11-82><a class=lnlinks href=#hl-11-82> 82</a>
</span><span class=lnt id=hl-11-83><a class=lnlinks href=#hl-11-83> 83</a>
</span><span class=lnt id=hl-11-84><a class=lnlinks href=#hl-11-84> 84</a>
</span><span class=lnt id=hl-11-85><a class=lnlinks href=#hl-11-85> 85</a>
</span><span class=lnt id=hl-11-86><a class=lnlinks href=#hl-11-86> 86</a>
</span><span class=lnt id=hl-11-87><a class=lnlinks href=#hl-11-87> 87</a>
</span><span class=lnt id=hl-11-88><a class=lnlinks href=#hl-11-88> 88</a>
</span><span class=lnt id=hl-11-89><a class=lnlinks href=#hl-11-89> 89</a>
</span><span class=lnt id=hl-11-90><a class=lnlinks href=#hl-11-90> 90</a>
</span><span class=lnt id=hl-11-91><a class=lnlinks href=#hl-11-91> 91</a>
</span><span class=lnt id=hl-11-92><a class=lnlinks href=#hl-11-92> 92</a>
</span><span class=lnt id=hl-11-93><a class=lnlinks href=#hl-11-93> 93</a>
</span><span class=lnt id=hl-11-94><a class=lnlinks href=#hl-11-94> 94</a>
</span><span class=lnt id=hl-11-95><a class=lnlinks href=#hl-11-95> 95</a>
</span><span class=lnt id=hl-11-96><a class=lnlinks href=#hl-11-96> 96</a>
</span><span class=lnt id=hl-11-97><a class=lnlinks href=#hl-11-97> 97</a>
</span><span class=lnt id=hl-11-98><a class=lnlinks href=#hl-11-98> 98</a>
</span><span class=lnt id=hl-11-99><a class=lnlinks href=#hl-11-99> 99</a>
</span><span class=lnt id=hl-11-100><a class=lnlinks href=#hl-11-100>100</a>
</span><span class=lnt id=hl-11-101><a class=lnlinks href=#hl-11-101>101</a>
</span><span class=lnt id=hl-11-102><a class=lnlinks href=#hl-11-102>102</a>
</span><span class=lnt id=hl-11-103><a class=lnlinks href=#hl-11-103>103</a>
</span><span class=lnt id=hl-11-104><a class=lnlinks href=#hl-11-104>104</a>
</span><span class=lnt id=hl-11-105><a class=lnlinks href=#hl-11-105>105</a>
</span><span class=lnt id=hl-11-106><a class=lnlinks href=#hl-11-106>106</a>
</span><span class=lnt id=hl-11-107><a class=lnlinks href=#hl-11-107>107</a>
</span><span class=lnt id=hl-11-108><a class=lnlinks href=#hl-11-108>108</a>
</span><span class=lnt id=hl-11-109><a class=lnlinks href=#hl-11-109>109</a>
</span><span class=lnt id=hl-11-110><a class=lnlinks href=#hl-11-110>110</a>
</span><span class=lnt id=hl-11-111><a class=lnlinks href=#hl-11-111>111</a>
</span><span class=lnt id=hl-11-112><a class=lnlinks href=#hl-11-112>112</a>
</span><span class=lnt id=hl-11-113><a class=lnlinks href=#hl-11-113>113</a>
</span><span class=lnt id=hl-11-114><a class=lnlinks href=#hl-11-114>114</a>
</span><span class=lnt id=hl-11-115><a class=lnlinks href=#hl-11-115>115</a>
</span><span class=lnt id=hl-11-116><a class=lnlinks href=#hl-11-116>116</a>
</span><span class=lnt id=hl-11-117><a class=lnlinks href=#hl-11-117>117</a>
</span><span class=lnt id=hl-11-118><a class=lnlinks href=#hl-11-118>118</a>
</span><span class=lnt id=hl-11-119><a class=lnlinks href=#hl-11-119>119</a>
</span><span class=lnt id=hl-11-120><a class=lnlinks href=#hl-11-120>120</a>
</span><span class=lnt id=hl-11-121><a class=lnlinks href=#hl-11-121>121</a>
</span><span class=lnt id=hl-11-122><a class=lnlinks href=#hl-11-122>122</a>
</span><span class=lnt id=hl-11-123><a class=lnlinks href=#hl-11-123>123</a>
</span><span class=lnt id=hl-11-124><a class=lnlinks href=#hl-11-124>124</a>
</span><span class=lnt id=hl-11-125><a class=lnlinks href=#hl-11-125>125</a>
</span><span class=lnt id=hl-11-126><a class=lnlinks href=#hl-11-126>126</a>
</span><span class=lnt id=hl-11-127><a class=lnlinks href=#hl-11-127>127</a>
</span><span class=lnt id=hl-11-128><a class=lnlinks href=#hl-11-128>128</a>
</span><span class=lnt id=hl-11-129><a class=lnlinks href=#hl-11-129>129</a>
</span><span class=lnt id=hl-11-130><a class=lnlinks href=#hl-11-130>130</a>
</span><span class=lnt id=hl-11-131><a class=lnlinks href=#hl-11-131>131</a>
</span><span class=lnt id=hl-11-132><a class=lnlinks href=#hl-11-132>132</a>
</span><span class=lnt id=hl-11-133><a class=lnlinks href=#hl-11-133>133</a>
</span><span class=lnt id=hl-11-134><a class=lnlinks href=#hl-11-134>134</a>
</span><span class=lnt id=hl-11-135><a class=lnlinks href=#hl-11-135>135</a>
</span><span class=lnt id=hl-11-136><a class=lnlinks href=#hl-11-136>136</a>
</span><span class=lnt id=hl-11-137><a class=lnlinks href=#hl-11-137>137</a>
</span><span class=lnt id=hl-11-138><a class=lnlinks href=#hl-11-138>138</a>
</span><span class=lnt id=hl-11-139><a class=lnlinks href=#hl-11-139>139</a>
</span><span class=lnt id=hl-11-140><a class=lnlinks href=#hl-11-140>140</a>
</span><span class=lnt id=hl-11-141><a class=lnlinks href=#hl-11-141>141</a>
</span><span class=lnt id=hl-11-142><a class=lnlinks href=#hl-11-142>142</a>
</span><span class=lnt id=hl-11-143><a class=lnlinks href=#hl-11-143>143</a>
</span><span class=lnt id=hl-11-144><a class=lnlinks href=#hl-11-144>144</a>
</span><span class=lnt id=hl-11-145><a class=lnlinks href=#hl-11-145>145</a>
</span><span class=lnt id=hl-11-146><a class=lnlinks href=#hl-11-146>146</a>
</span><span class=lnt id=hl-11-147><a class=lnlinks href=#hl-11-147>147</a>
</span><span class=lnt id=hl-11-148><a class=lnlinks href=#hl-11-148>148</a>
</span><span class=lnt id=hl-11-149><a class=lnlinks href=#hl-11-149>149</a>
</span><span class=lnt id=hl-11-150><a class=lnlinks href=#hl-11-150>150</a>
</span><span class=lnt id=hl-11-151><a class=lnlinks href=#hl-11-151>151</a>
</span><span class=lnt id=hl-11-152><a class=lnlinks href=#hl-11-152>152</a>
</span><span class=lnt id=hl-11-153><a class=lnlinks href=#hl-11-153>153</a>
</span><span class=lnt id=hl-11-154><a class=lnlinks href=#hl-11-154>154</a>
</span><span class=lnt id=hl-11-155><a class=lnlinks href=#hl-11-155>155</a>
</span><span class=lnt id=hl-11-156><a class=lnlinks href=#hl-11-156>156</a>
</span><span class=lnt id=hl-11-157><a class=lnlinks href=#hl-11-157>157</a>
</span><span class=lnt id=hl-11-158><a class=lnlinks href=#hl-11-158>158</a>
</span><span class=lnt id=hl-11-159><a class=lnlinks href=#hl-11-159>159</a>
</span><span class=lnt id=hl-11-160><a class=lnlinks href=#hl-11-160>160</a>
</span><span class=lnt id=hl-11-161><a class=lnlinks href=#hl-11-161>161</a>
</span><span class=lnt id=hl-11-162><a class=lnlinks href=#hl-11-162>162</a>
</span><span class=lnt id=hl-11-163><a class=lnlinks href=#hl-11-163>163</a>
</span><span class=lnt id=hl-11-164><a class=lnlinks href=#hl-11-164>164</a>
</span><span class=lnt id=hl-11-165><a class=lnlinks href=#hl-11-165>165</a>
</span><span class=lnt id=hl-11-166><a class=lnlinks href=#hl-11-166>166</a>
</span><span class=lnt id=hl-11-167><a class=lnlinks href=#hl-11-167>167</a>
</span><span class=lnt id=hl-11-168><a class=lnlinks href=#hl-11-168>168</a>
</span><span class=lnt id=hl-11-169><a class=lnlinks href=#hl-11-169>169</a>
</span><span class=lnt id=hl-11-170><a class=lnlinks href=#hl-11-170>170</a>
</span><span class=lnt id=hl-11-171><a class=lnlinks href=#hl-11-171>171</a>
</span><span class=lnt id=hl-11-172><a class=lnlinks href=#hl-11-172>172</a>
</span><span class=lnt id=hl-11-173><a class=lnlinks href=#hl-11-173>173</a>
</span><span class=lnt id=hl-11-174><a class=lnlinks href=#hl-11-174>174</a>
</span><span class=lnt id=hl-11-175><a class=lnlinks href=#hl-11-175>175</a>
</span><span class=lnt id=hl-11-176><a class=lnlinks href=#hl-11-176>176</a>
</span><span class=lnt id=hl-11-177><a class=lnlinks href=#hl-11-177>177</a>
</span><span class=lnt id=hl-11-178><a class=lnlinks href=#hl-11-178>178</a>
</span><span class=lnt id=hl-11-179><a class=lnlinks href=#hl-11-179>179</a>
</span><span class=lnt id=hl-11-180><a class=lnlinks href=#hl-11-180>180</a>
</span><span class=lnt id=hl-11-181><a class=lnlinks href=#hl-11-181>181</a>
</span><span class=lnt id=hl-11-182><a class=lnlinks href=#hl-11-182>182</a>
</span><span class=lnt id=hl-11-183><a class=lnlinks href=#hl-11-183>183</a>
</span><span class=lnt id=hl-11-184><a class=lnlinks href=#hl-11-184>184</a>
</span><span class=lnt id=hl-11-185><a class=lnlinks href=#hl-11-185>185</a>
</span><span class=lnt id=hl-11-186><a class=lnlinks href=#hl-11-186>186</a>
</span><span class=lnt id=hl-11-187><a class=lnlinks href=#hl-11-187>187</a>
</span><span class=lnt id=hl-11-188><a class=lnlinks href=#hl-11-188>188</a>
</span><span class=lnt id=hl-11-189><a class=lnlinks href=#hl-11-189>189</a>
</span><span class=lnt id=hl-11-190><a class=lnlinks href=#hl-11-190>190</a>
</span><span class=lnt id=hl-11-191><a class=lnlinks href=#hl-11-191>191</a>
</span><span class=lnt id=hl-11-192><a class=lnlinks href=#hl-11-192>192</a>
</span><span class=lnt id=hl-11-193><a class=lnlinks href=#hl-11-193>193</a>
</span><span class=lnt id=hl-11-194><a class=lnlinks href=#hl-11-194>194</a>
</span><span class=lnt id=hl-11-195><a class=lnlinks href=#hl-11-195>195</a>
</span><span class=lnt id=hl-11-196><a class=lnlinks href=#hl-11-196>196</a>
</span><span class=lnt id=hl-11-197><a class=lnlinks href=#hl-11-197>197</a>
</span><span class=lnt id=hl-11-198><a class=lnlinks href=#hl-11-198>198</a>
</span><span class=lnt id=hl-11-199><a class=lnlinks href=#hl-11-199>199</a>
</span><span class=lnt id=hl-11-200><a class=lnlinks href=#hl-11-200>200</a>
</span><span class=lnt id=hl-11-201><a class=lnlinks href=#hl-11-201>201</a>
</span><span class=lnt id=hl-11-202><a class=lnlinks href=#hl-11-202>202</a>
</span><span class=lnt id=hl-11-203><a class=lnlinks href=#hl-11-203>203</a>
</span><span class=lnt id=hl-11-204><a class=lnlinks href=#hl-11-204>204</a>
</span><span class=lnt id=hl-11-205><a class=lnlinks href=#hl-11-205>205</a>
</span><span class=lnt id=hl-11-206><a class=lnlinks href=#hl-11-206>206</a>
</span><span class=lnt id=hl-11-207><a class=lnlinks href=#hl-11-207>207</a>
</span><span class=lnt id=hl-11-208><a class=lnlinks href=#hl-11-208>208</a>
</span><span class=lnt id=hl-11-209><a class=lnlinks href=#hl-11-209>209</a>
</span><span class=lnt id=hl-11-210><a class=lnlinks href=#hl-11-210>210</a>
</span><span class=lnt id=hl-11-211><a class=lnlinks href=#hl-11-211>211</a>
</span><span class=lnt id=hl-11-212><a class=lnlinks href=#hl-11-212>212</a>
</span><span class=lnt id=hl-11-213><a class=lnlinks href=#hl-11-213>213</a>
</span><span class=lnt id=hl-11-214><a class=lnlinks href=#hl-11-214>214</a>
</span><span class=lnt id=hl-11-215><a class=lnlinks href=#hl-11-215>215</a>
</span><span class=lnt id=hl-11-216><a class=lnlinks href=#hl-11-216>216</a>
</span><span class=lnt id=hl-11-217><a class=lnlinks href=#hl-11-217>217</a>
</span><span class=lnt id=hl-11-218><a class=lnlinks href=#hl-11-218>218</a>
</span><span class=lnt id=hl-11-219><a class=lnlinks href=#hl-11-219>219</a>
</span><span class=lnt id=hl-11-220><a class=lnlinks href=#hl-11-220>220</a>
</span><span class=lnt id=hl-11-221><a class=lnlinks href=#hl-11-221>221</a>
</span><span class=lnt id=hl-11-222><a class=lnlinks href=#hl-11-222>222</a>
</span><span class=lnt id=hl-11-223><a class=lnlinks href=#hl-11-223>223</a>
</span><span class=lnt id=hl-11-224><a class=lnlinks href=#hl-11-224>224</a>
</span><span class=lnt id=hl-11-225><a class=lnlinks href=#hl-11-225>225</a>
</span><span class=lnt id=hl-11-226><a class=lnlinks href=#hl-11-226>226</a>
</span><span class=lnt id=hl-11-227><a class=lnlinks href=#hl-11-227>227</a>
</span><span class=lnt id=hl-11-228><a class=lnlinks href=#hl-11-228>228</a>
</span><span class=lnt id=hl-11-229><a class=lnlinks href=#hl-11-229>229</a>
</span><span class=lnt id=hl-11-230><a class=lnlinks href=#hl-11-230>230</a>
</span><span class=lnt id=hl-11-231><a class=lnlinks href=#hl-11-231>231</a>
</span><span class=lnt id=hl-11-232><a class=lnlinks href=#hl-11-232>232</a>
</span><span class=lnt id=hl-11-233><a class=lnlinks href=#hl-11-233>233</a>
</span><span class=lnt id=hl-11-234><a class=lnlinks href=#hl-11-234>234</a>
</span><span class=lnt id=hl-11-235><a class=lnlinks href=#hl-11-235>235</a>
</span><span class=lnt id=hl-11-236><a class=lnlinks href=#hl-11-236>236</a>
</span><span class=lnt id=hl-11-237><a class=lnlinks href=#hl-11-237>237</a>
</span><span class=lnt id=hl-11-238><a class=lnlinks href=#hl-11-238>238</a>
</span><span class=lnt id=hl-11-239><a class=lnlinks href=#hl-11-239>239</a>
</span><span class=lnt id=hl-11-240><a class=lnlinks href=#hl-11-240>240</a>
</span><span class=lnt id=hl-11-241><a class=lnlinks href=#hl-11-241>241</a>
</span><span class=lnt id=hl-11-242><a class=lnlinks href=#hl-11-242>242</a>
</span><span class=lnt id=hl-11-243><a class=lnlinks href=#hl-11-243>243</a>
</span><span class=lnt id=hl-11-244><a class=lnlinks href=#hl-11-244>244</a>
</span><span class=lnt id=hl-11-245><a class=lnlinks href=#hl-11-245>245</a>
</span><span class=lnt id=hl-11-246><a class=lnlinks href=#hl-11-246>246</a>
</span><span class=lnt id=hl-11-247><a class=lnlinks href=#hl-11-247>247</a>
</span><span class=lnt id=hl-11-248><a class=lnlinks href=#hl-11-248>248</a>
</span><span class=lnt id=hl-11-249><a class=lnlinks href=#hl-11-249>249</a>
</span><span class=lnt id=hl-11-250><a class=lnlinks href=#hl-11-250>250</a>
</span><span class=lnt id=hl-11-251><a class=lnlinks href=#hl-11-251>251</a>
</span><span class=lnt id=hl-11-252><a class=lnlinks href=#hl-11-252>252</a>
</span><span class=lnt id=hl-11-253><a class=lnlinks href=#hl-11-253>253</a>
</span><span class=lnt id=hl-11-254><a class=lnlinks href=#hl-11-254>254</a>
</span><span class=lnt id=hl-11-255><a class=lnlinks href=#hl-11-255>255</a>
</span><span class=lnt id=hl-11-256><a class=lnlinks href=#hl-11-256>256</a>
</span><span class=lnt id=hl-11-257><a class=lnlinks href=#hl-11-257>257</a>
</span><span class=lnt id=hl-11-258><a class=lnlinks href=#hl-11-258>258</a>
</span><span class=lnt id=hl-11-259><a class=lnlinks href=#hl-11-259>259</a>
</span><span class=lnt id=hl-11-260><a class=lnlinks href=#hl-11-260>260</a>
</span><span class=lnt id=hl-11-261><a class=lnlinks href=#hl-11-261>261</a>
</span><span class=lnt id=hl-11-262><a class=lnlinks href=#hl-11-262>262</a>
</span><span class=lnt id=hl-11-263><a class=lnlinks href=#hl-11-263>263</a>
</span><span class=lnt id=hl-11-264><a class=lnlinks href=#hl-11-264>264</a>
</span><span class=lnt id=hl-11-265><a class=lnlinks href=#hl-11-265>265</a>
</span><span class=lnt id=hl-11-266><a class=lnlinks href=#hl-11-266>266</a>
</span><span class=lnt id=hl-11-267><a class=lnlinks href=#hl-11-267>267</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>decimal</span> <span class=kn>import</span> <span class=n>Decimal</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>enum</span> <span class=kn>import</span> <span class=n>Enum</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span><span class=p>,</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>uuid</span> <span class=kn>import</span> <span class=n>uuid4</span><span class=p>,</span> <span class=n>UUID</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Value Objects</span>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span><span class=p>(</span><span class=n>frozen</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Money</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;금액을 표현하는 값 객체&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>amount</span><span class=p>:</span> <span class=n>Decimal</span>
</span></span><span class=line><span class=cl>    <span class=n>currency</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;KRW&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>__post_init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>amount</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;금액은 음수일 수 없습니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>currency</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>3</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;통화 코드는 3자리여야 합니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>add</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>:</span> <span class=s1>&#39;Money&#39;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s1>&#39;Money&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>currency</span> <span class=o>!=</span> <span class=n>other</span><span class=o>.</span><span class=n>currency</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;다른 통화는 더할 수 없습니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Money</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>amount</span> <span class=o>+</span> <span class=n>other</span><span class=o>.</span><span class=n>amount</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>currency</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>multiply</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>factor</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s1>&#39;Money&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Money</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>amount</span> <span class=o>*</span> <span class=n>factor</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>currency</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span><span class=p>(</span><span class=n>frozen</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ProductId</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@classmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>generate</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>uuid4</span><span class=p>()))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span><span class=p>(</span><span class=n>frozen</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderId</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@classmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>generate</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>uuid4</span><span class=p>()))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Entities</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderItem</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 항목 엔티티&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=n>ProductId</span><span class=p>,</span> <span class=n>price</span><span class=p>:</span> <span class=n>Money</span><span class=p>,</span> <span class=n>quantity</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>quantity</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;수량은 0보다 커야 합니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_product_id</span> <span class=o>=</span> <span class=n>product_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_price</span> <span class=o>=</span> <span class=n>price</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_quantity</span> <span class=o>=</span> <span class=n>quantity</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>product_id</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>ProductId</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_product_id</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>price</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Money</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_price</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>quantity</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_quantity</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_total_price</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Money</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 항목의 총 금액 계산&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_price</span><span class=o>.</span><span class=n>multiply</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_quantity</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>change_quantity</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>new_quantity</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;수량 변경 (비즈니스 규칙 적용)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>new_quantity</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;수량은 0보다 커야 합니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_quantity</span> <span class=o>=</span> <span class=n>new_quantity</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderStatus</span><span class=p>(</span><span class=n>Enum</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>PENDING</span> <span class=o>=</span> <span class=s2>&#34;pending&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>CONFIRMED</span> <span class=o>=</span> <span class=s2>&#34;confirmed&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>SHIPPED</span> <span class=o>=</span> <span class=s2>&#34;shipped&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>DELIVERED</span> <span class=o>=</span> <span class=s2>&#34;delivered&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>CANCELLED</span> <span class=o>=</span> <span class=s2>&#34;cancelled&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Aggregate Root</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 집합체 루트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>:</span> <span class=n>OrderId</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_id</span> <span class=o>=</span> <span class=n>order_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_customer_id</span> <span class=o>=</span> <span class=n>customer_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>OrderItem</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_status</span> <span class=o>=</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>PENDING</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_domain_events</span><span class=p>:</span> <span class=n>List</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>id</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>OrderId</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_id</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>customer_id</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_customer_id</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>status</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>OrderStatus</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_status</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>items</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>OrderItem</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>add_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=n>ProductId</span><span class=p>,</span> <span class=n>price</span><span class=p>:</span> <span class=n>Money</span><span class=p>,</span> <span class=n>quantity</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 항목 추가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_status</span> <span class=o>!=</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>PENDING</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;확정된 주문에는 항목을 추가할 수 없습니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 동일 상품이 이미 있는지 확인</span>
</span></span><span class=line><span class=cl>        <span class=n>existing_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_find_item_by_product</span><span class=p>(</span><span class=n>product_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>existing_item</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>existing_item</span><span class=o>.</span><span class=n>change_quantity</span><span class=p>(</span><span class=n>existing_item</span><span class=o>.</span><span class=n>quantity</span> <span class=o>+</span> <span class=n>quantity</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>new_item</span> <span class=o>=</span> <span class=n>OrderItem</span><span class=p>(</span><span class=n>product_id</span><span class=p>,</span> <span class=n>price</span><span class=p>,</span> <span class=n>quantity</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>new_item</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>remove_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=n>ProductId</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 항목 제거&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_status</span> <span class=o>!=</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>PENDING</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;확정된 주문에서는 항목을 제거할 수 없습니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_items</span> <span class=o>=</span> <span class=p>[</span><span class=n>item</span> <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items</span> <span class=k>if</span> <span class=n>item</span><span class=o>.</span><span class=n>product_id</span> <span class=o>!=</span> <span class=n>product_id</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_total_amount</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Money</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 총 금액 계산&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>Money</span><span class=p>(</span><span class=n>Decimal</span><span class=p>(</span><span class=s1>&#39;0&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>total</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>get_total_price</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=p>[</span><span class=mi>1</span><span class=p>:]:</span>
</span></span><span class=line><span class=cl>            <span class=n>total</span> <span class=o>=</span> <span class=n>total</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>item</span><span class=o>.</span><span class=n>get_total_price</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>total</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>confirm_order</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 확정&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;빈 주문은 확정할 수 없습니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_status</span> <span class=o>!=</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>PENDING</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;이미 처리된 주문입니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_status</span> <span class=o>=</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>CONFIRMED</span>
</span></span><span class=line><span class=cl>        <span class=c1># 도메인 이벤트 발행</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_domain_events</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>OrderConfirmedEvent</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_id</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_customer_id</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>cancel_order</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 취소&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_status</span> <span class=ow>in</span> <span class=p>[</span><span class=n>OrderStatus</span><span class=o>.</span><span class=n>SHIPPED</span><span class=p>,</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>DELIVERED</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;배송된 주문은 취소할 수 없습니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_status</span> <span class=o>=</span> <span class=n>OrderStatus</span><span class=o>.</span><span class=n>CANCELLED</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_domain_events</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>OrderCancelledEvent</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_id</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_customer_id</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_find_item_by_product</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=n>ProductId</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>OrderItem</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;상품 ID로 주문 항목 찾기&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>item</span><span class=o>.</span><span class=n>product_id</span> <span class=o>==</span> <span class=n>product_id</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>item</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_domain_events</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;도메인 이벤트 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_domain_events</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>clear_domain_events</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;도메인 이벤트 클리어&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_domain_events</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Domain Events</span>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderConfirmedEvent</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>order_id</span><span class=p>:</span> <span class=n>OrderId</span>
</span></span><span class=line><span class=cl>    <span class=n>customer_id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>  
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderCancelledEvent</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>order_id</span><span class=p>:</span> <span class=n>OrderId</span>
</span></span><span class=line><span class=cl>    <span class=n>customer_id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Repository Interface</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderRepository</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 저장소 인터페이스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>:</span> <span class=n>Order</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_by_id</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>:</span> <span class=n>OrderId</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Order</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>find_by_customer</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Order</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Domain Service</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 도메인 서비스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_repository</span><span class=p>:</span> <span class=n>OrderRepository</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_order_repository</span> <span class=o>=</span> <span class=n>order_repository</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create_order</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;새 주문 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>order_id</span> <span class=o>=</span> <span class=n>OrderId</span><span class=o>.</span><span class=n>generate</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>order</span> <span class=o>=</span> <span class=n>Order</span><span class=p>(</span><span class=n>order_id</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>order</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>calculate_shipping_cost</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>:</span> <span class=n>Order</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Money</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;배송비 계산 (복잡한 비즈니스 로직)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>total_amount</span> <span class=o>=</span> <span class=n>order</span><span class=o>.</span><span class=n>get_total_amount</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 10만원 이상 무료배송</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>total_amount</span><span class=o>.</span><span class=n>amount</span> <span class=o>&gt;=</span> <span class=n>Decimal</span><span class=p>(</span><span class=s1>&#39;100000&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>Money</span><span class=p>(</span><span class=n>Decimal</span><span class=p>(</span><span class=s1>&#39;0&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 기본 배송비</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Money</span><span class=p>(</span><span class=n>Decimal</span><span class=p>(</span><span class=s1>&#39;3000&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Application Service (사용 예시)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderApplicationService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 애플리케이션 서비스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_repository</span><span class=p>:</span> <span class=n>OrderRepository</span><span class=p>,</span> <span class=n>order_service</span><span class=p>:</span> <span class=n>OrderService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_order_repository</span> <span class=o>=</span> <span class=n>order_repository</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_order_service</span> <span class=o>=</span> <span class=n>order_service</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>place_order</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>items</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>dict</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 생성 및 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 1. 새 주문 생성</span>
</span></span><span class=line><span class=cl>        <span class=n>order</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_order_service</span><span class=o>.</span><span class=n>create_order</span><span class=p>(</span><span class=n>customer_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 2. 주문 항목 추가</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>item_data</span> <span class=ow>in</span> <span class=n>items</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>product_id</span> <span class=o>=</span> <span class=n>ProductId</span><span class=p>(</span><span class=n>item_data</span><span class=p>[</span><span class=s1>&#39;product_id&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>            <span class=n>price</span> <span class=o>=</span> <span class=n>Money</span><span class=p>(</span><span class=n>Decimal</span><span class=p>(</span><span class=n>item_data</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>]))</span>
</span></span><span class=line><span class=cl>            <span class=n>quantity</span> <span class=o>=</span> <span class=n>item_data</span><span class=p>[</span><span class=s1>&#39;quantity&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>order</span><span class=o>.</span><span class=n>add_item</span><span class=p>(</span><span class=n>product_id</span><span class=p>,</span> <span class=n>price</span><span class=p>,</span> <span class=n>quantity</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 3. 주문 확정</span>
</span></span><span class=line><span class=cl>        <span class=n>order</span><span class=o>.</span><span class=n>confirm_order</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 4. 저장</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_order_repository</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 5. 도메인 이벤트 처리 (실제로는 이벤트 퍼블리셔 사용)</span>
</span></span><span class=line><span class=cl>        <span class=n>events</span> <span class=o>=</span> <span class=n>order</span><span class=o>.</span><span class=n>get_domain_events</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>event</span> <span class=ow>in</span> <span class=n>events</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_handle_domain_event</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>order</span><span class=o>.</span><span class=n>clear_domain_events</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>order</span><span class=o>.</span><span class=n>id</span><span class=o>.</span><span class=n>value</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_handle_domain_event</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;도메인 이벤트 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>event</span><span class=p>,</span> <span class=n>OrderConfirmedEvent</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;주문 </span><span class=si>{</span><span class=n>event</span><span class=o>.</span><span class=n>order_id</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>가 확정되었습니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>event</span><span class=p>,</span> <span class=n>OrderCancelledEvent</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;주문 </span><span class=si>{</span><span class=n>event</span><span class=o>.</span><span class=n>order_id</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>가 취소되었습니다&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>구분</th><th>고려사항</th><th>주의할 점</th><th>권장사항</th></tr></thead><tbody><tr><td>도메인 모델링</td><td>도메인 경계와 핵심 개념을 명확히 정의</td><td>기술 중심으로만 도메인 구성 지양</td><td>도메인 전문가와 협업, 유비쿼터스 언어 활용</td></tr><tr><td>패턴 적용 전략</td><td><code>Aggregate</code>, <code>Entity</code>, <code>Value Object</code> 등 핵심 패턴의 정확한 이해</td><td>모든 객체에 패턴 무분별 적용</td><td>교육 및 문서화 기반 선택적 적용</td></tr><tr><td>계층 구조 설계</td><td>계층별 책임 분리 및 역할 명확화</td><td>계층 간 의존도 모호하거나 순환 참조 발생</td><td>계층화 아키텍처 (Layered Architecture) 유지</td></tr><tr><td>Repository 설계</td><td>도메인 중심 인터페이스로 추상화</td><td>DB 중심의 저장/조회 설계</td><td>Aggregate Root 단위로 Repository 제공</td></tr><tr><td>Aggregate 설계</td><td>트랜잭션 경계, 일관성 규칙 고려</td><td>지나치게 큰 Aggregate 는 성능 저하 유발</td><td>작고 응집력 있는 단위로 구성</td></tr><tr><td>성능 최적화</td><td>Command/Query 분리</td><td>복잡한 조회를 도메인 내부에서만 처리</td><td>CQRS, Projection, Read Model 사용</td></tr><tr><td>테스트 전략</td><td>도메인 로직에 대한 단위 테스트 중심</td><td>통합 테스트만으로 신뢰성 확보 어려움</td><td>테스트 피라미드 적용 (Unit > Integration)</td></tr></tbody></table><h3 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>항목</th><th>고려사항 또는 설명</th><th>주의할 점</th><th>권장사항</th></tr></thead><tbody><tr><td><strong>Aggregate 크기</strong></td><td>Aggregate 는 트랜잭션 경계 단위로 작고 응집력 있게 유지</td><td>불필요한 관계까지 포함 시 메모리/쿼리 낭비</td><td>필요한 도메인만 포함, Lazy Loading 전략 적용</td></tr><tr><td><strong>트랜잭션 관리</strong></td><td>Aggregate 단위로 트랜잭션을 제한</td><td>긴 트랜잭션 → deadlock 가능성</td><td>CQRS 패턴 도입, 명확한 트랜잭션 경계 정의</td></tr><tr><td><strong>이벤트 처리</strong></td><td>비동기 이벤트 기반은 확장성과 분리도 장점</td><td>느린 소비자, 데이터 불일치 위험</td><td>이벤트 스키마 버저닝, 병렬 소비자 구조 설계</td></tr><tr><td><strong>지연/즉시 로딩 전략</strong></td><td>성능에 따라 fetch 전략을 선택적으로 설정</td><td>N+1 쿼리 발생</td><td>적절한 FetchType 설정 (JPA), 로딩 시점 제어</td></tr><tr><td><strong>ORM 연계 분리</strong></td><td>도메인 모델과 ORM 분리를 통해 순수 도메인 유지</td><td>ORM Entity 가 도메인에 침투</td><td>맵퍼 계층 도입, Clean Architecture 원칙 적용</td></tr><tr><td><strong>테스트 전략</strong></td><td>도메인 로직의 단위 테스트 중심</td><td>무조건 통합 테스트로 의존성 커짐</td><td>테스트 더블 (Mock), 병렬 테스트, 테스트 피라미드 적용</td></tr><tr><td><strong>복잡성 관리</strong></td><td>객체 수 증가로 인한 설계 복잡성 증가</td><td>도메인 오염, 패턴 과용</td><td>리팩토링 기준 수립, 도메인 설명 문서화</td></tr><tr><td><strong>캐싱/메모리 최적화</strong></td><td>Value Object 는 불변성을 활용한 캐싱이 가능</td><td>생성 비용 증가</td><td>객체 풀링, 캐시 라이브러리 활용</td></tr><tr><td><strong>CQRS ReadModel 설계</strong></td><td>Command/Query 분리 시 조회 모델 최적화 필요</td><td>Projection 모델 없으면 유지보수 어려움</td><td>Projection Test 가능 모델 정의, Index 설계</td></tr><tr><td><strong>Guard vs Validator</strong></td><td>즉각 실패 (Guard) vs 유효성 체크 (Validator) 구분</td><td>모든 유효성 체크를 하나로 처리 시 가독성 저하</td><td>책임 분리, 구체적 예외 명시</td></tr><tr><td><strong>모듈화 및 의존성 관리</strong></td><td>도메인 간 의존성 최소화, 독립성 유지</td><td>과도한 결합 → 변경 파급</td><td>인터페이스 분리, Bounded Context 설계</td></tr><tr><td><strong>변경 관리 대응성</strong></td><td>요구사항 변경을 빠르게 반영 가능하도록 설계</td><td>도메인과 기능 간 강결합</td><td>도메인 이벤트 설계 기반의 유연한 흐름 구성</td></tr><tr><td><strong>모니터링 및 추적성</strong></td><td>도메인 이벤트 기반으로 비즈니스 상태를 추적 가능</td><td>기술 로그만 의존 시 도메인 가시성 저하</td><td>Business Metric, Audit Log 구축</td></tr></tbody></table><h3 id=기타-사항>기타 사항<a hidden class=anchor aria-hidden=true href=#기타-사항>#</a></h3><ul><li><p><strong>CQRS (Command Query Responsibility Segregation)</strong><br>Tactical DDD 와 시너지 있음. Aggregate 의 쓰기 모델과 읽기 모델을 분리함으로써 성능과 확장성 개선 가능.</p></li><li><p><strong>Event Sourcing</strong><br>Aggregate 의 상태 변화 이벤트를 저장해 도메인 이력을 추적하며, 보충적인 Audit, Rollback 구현 가능.</p></li><li><p><strong>도메인 모델 호라이즌 확장</strong><br>점진적으로 새로운 Bounded Context 및 하위 Aggregate 를 도입하며 설계를 확장할 수 있음.</p></li><li><p><strong>디자인 자동화 도구</strong><br>ArchUnit, Structurizr 등으로 모듈 및 계층 구조 규약 위반 자동 검증 가능.</p></li><li><p><strong>도메인 모델 시각화</strong><br>C4 모델, UML 다이어그램 등을 통해 팀 내 공유 및 유지보수 지원.</p></li></ul><h3 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>도메인 주도 설계</strong></td><td>전술적 설계 구성 요소</td><td>Aggregate</td><td>도메인 모델의 일관성과 무결성 관리, 트랜잭션 경계 단위 역할</td></tr><tr><td></td><td></td><td>Entity</td><td>고유 식별자 보유, 상태 변경 가능, 생명주기 관리</td></tr><tr><td></td><td></td><td>Value Object</td><td>불변 객체, 속성 기반 동등성 판단</td></tr><tr><td></td><td></td><td>Repository vs Factory</td><td>생성 책임과 저장 책임 분리로 역할 명확화</td></tr><tr><td><strong>구현 기법</strong></td><td>Specification Pattern</td><td>비즈니스 규칙 캡슐화</td><td>조건 검증 로직을 조합 가능한 객체로 외부화하여 재사용성과 테스트 용이성 확보</td></tr><tr><td></td><td>Essence Object</td><td>UI → Domain 데이터 전달</td><td>DTO 대체 혹은 보완으로 사용자 입력 데이터 구조화 및 유효성 검증</td></tr><tr><td><strong>아키텍처 패턴</strong></td><td>Layered Architecture</td><td>계층별 책임 분리</td><td>표현, 응용, 도메인, 인프라 계층으로 분리하여 유지보수성과 확장성 향상</td></tr><tr><td></td><td>헥사고날 아키텍처</td><td>Ports and Adapters</td><td>내부 도메인 로직과 외부 인터페이스를 명확히 분리하는 유연한 아키텍처 구조</td></tr><tr><td></td><td>CQRS</td><td>Command/Query 분리</td><td>읽기와 쓰기 모델을 분리하여 성능 최적화와 구조 명확화</td></tr><tr><td></td><td>이벤트 소싱</td><td>Event Store</td><td>상태 저장 대신 이벤트 저장 → 상태 재생성 가능</td></tr><tr><td><strong>모델링 기법</strong></td><td>Event Storming</td><td>도메인 이벤트 기반 모델링</td><td>업무 흐름 중심의 시각적 도메인 설계 협업 워크숍</td></tr><tr><td><strong>테스트 전략</strong></td><td>TDD (Test-Driven Development)</td><td>테스트 우선 설계</td><td>요구사항을 코드로 빠르게 구체화, 도메인 규칙 검증 중심 테스트 유도</td></tr></tbody></table><h3 id=주제와-관련하여-반드시-학습해야할-내용>주제와 관련하여 반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-반드시-학습해야할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>객체지향 설계 원리</strong></td><td>OOP 원칙</td><td>캡슐화 (Encapsulation), 상속 (Inheritance), 다형성 (Polymorphism)</td><td>객체 간 책임 분리와 재사용성을 위한 기본 설계 원칙</td></tr><tr><td></td><td>SOLID 원칙</td><td>단일 책임, 개방 - 폐쇄, 리스코프 치환, 인터페이스 분리, 의존 역전</td><td>유지보수성과 확장성을 높이기 위한 객체지향 설계의 5 대 핵심 원칙</td></tr><tr><td><strong>소프트웨어 설계 패턴</strong></td><td>GoF 디자인 패턴</td><td>Factory, Strategy, Observer 등 23 가지 패턴</td><td>상황에 맞는 재사용 가능한 구조/행위/생성 패턴을 적용해 문제를 해결하는 설계법</td></tr><tr><td><strong>소프트웨어 아키텍처</strong></td><td>계층화 아키텍처</td><td>표현 (Presentation), 응용 (Application), 도메인 (Domain), 인프라 (Infra)</td><td>시스템 구성요소의 관심사 분리를 통해 유지보수와 확장을 용이하게 하는 구조</td></tr><tr><td><strong>도메인 주도 설계</strong></td><td>전술적 설계 구성 요소</td><td>Aggregate, Entity, Value Object</td><td>도메인 복잡성 관리를 위한 핵심 구조화 방식 및 객체 정의</td></tr><tr><td><strong>모델링 및 표현 도구</strong></td><td>UML</td><td>클래스 다이어그램, 시퀀스 다이어그램 등</td><td>도메인 구조와 상호작용을 시각적으로 표현하여 명확한 설계 커뮤니케이션 지원</td></tr><tr><td><strong>개발 프로세스</strong></td><td>애자일 방법론</td><td>반복적 개발, 지속적 통합, 고객 협업 중심</td><td>도메인 전문가와 개발자의 지속 협업을 가능하게 하며, DDD 적용에 이상적 환경 제공</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th><strong>카테고리</strong></th><th><strong>용어</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>DDD 핵심 개념</strong></td><td>Entity</td><td>고유 식별자를 가지며 상태 변화와 생명주기를 관리하는 도메인 객체</td></tr><tr><td></td><td>Value Object</td><td>불변성을 가지며 속성의 조합으로 동일성을 판단하는 객체</td></tr><tr><td></td><td>Aggregate</td><td>연관된 도메인 객체 집합의 일관성을 보장하는 트랜잭션 단위</td></tr><tr><td></td><td>Aggregate Root</td><td>Aggregate 내부의 변경 진입점으로, 외부에서는 루트를 통해서만 Aggregate 접근 허용</td></tr><tr><td></td><td>Bounded Context</td><td>하나의 도메인 모델이 명확하게 적용되는 경계, 모델 간 충돌을 방지함</td></tr><tr><td><strong>설계 패턴</strong></td><td>Domain Event</td><td>도메인 내에서 발생한 중요한 상태 변화를 외부에 알리는 이벤트 객체</td></tr><tr><td></td><td>Specification Pattern</td><td>복잡한 비즈니스 규칙을 객체로 추출해 캡슐화하고 재사용성을 높이는 패턴</td></tr><tr><td></td><td>CQRS</td><td>Command(쓰기) 와 Query(읽기) 를 분리해 확장성과 성능을 향상하는 아키텍처 패턴</td></tr><tr><td></td><td>Event Sourcing</td><td>시스템 상태를 이벤트의 이력으로 저장하고 재구성하는 아키텍처 패턴</td></tr><tr><td><strong>보조 개념</strong></td><td>Guard</td><td>도메인 객체 내부에서 즉시 유효성 검사를 수행해 불변식을 유지하는 방어 로직</td></tr><tr><td></td><td>Essence Object</td><td>UI 입력 데이터의 일시적 보관과 검증을 담당하는 경량 전달 객체</td></tr><tr><td><strong>설계 원칙</strong></td><td>Ubiquitous Language</td><td>개발자와 도메인 전문가가 공유하는 공통 언어로, 코드와 문서에 동일하게 사용됨</td></tr><tr><td></td><td>SRP (단일 책임 원칙)</td><td>클래스는 하나의 변경 이유만 가져야 하며 하나의 책임만 가져야 한다는 객체지향 원칙</td></tr><tr><td></td><td>Clean Architecture</td><td>도메인 중심 아키텍처로, 비즈니스 로직과 인프라스트럭처를 계층 분리하여 의존성 방향을 고정함</td></tr><tr><td><strong>아키텍처 도구</strong></td><td>Layered Architecture</td><td>표현, 응용, 도메인, 인프라 계층으로 분리해 관심사와 책임을 명확히 하는 아키텍처</td></tr><tr><td></td><td>ArchUnit</td><td>Java 코드의 아키텍처 규칙을 테스트 기반으로 자동 검증하는 도구</td></tr><tr><td></td><td>Structurizr</td><td>C4 모델을 기반으로 시스템 아키텍처를 시각화하는 도구</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><a href="https://medium.com/@masoud.chelongar/domain-driven-design-tactical-design-41640afa2009?utm_source=chatgpt.com">Domain-Driven Design—Tactical Design | by Masoud Chelongar - Medium</a></li><li><a href="https://www.sumerge.com/tactical-domain-driven-design/?utm_source=chatgpt.com">Tactical Domain Driven Design - Sumerge</a></li><li><a href="https://socadk.github.io/design-practice-repository/activities/DPR-TacticDDD.html?utm_source=chatgpt.com">Activity/Technique: Tactic(al) Domain-Driven Design (DDD) - socadk.github.io</a></li><li><a href="https://www.gleecus.com/blogs/principles-behind-domain-driven-design/?utm_source=chatgpt.com">The Principles Behind Domain Driven Design - Gleecus</a></li><li><a href="https://learn.microsoft.com/en-us/azure/architecture/microservices/model/tactical-ddd?utm_source=chatgpt.com">Using tactical DDD to design microservices - Learn Microsoft</a></li><li><a href="https://en.wikipedia.org/wiki/Anemic_domain_model?utm_source=chatgpt.com">Anemic domain model - Wikipedia</a></li><li><a href="https://en.wikipedia.org/wiki/Domain-driven_design?utm_source=chatgpt.com">Domain-driven design - Wikipedia</a></li><li><a href="https://sensiolabs.com/blog/2024/understanding-domain-driven-design?utm_source=chatgpt.com">Understanding Domain-Driven Design: A Practical Approach - SensioLabs</a></li><li><a href="https://dev.to/minericefield/ddd-tactical-design-patterns-part-1-domain-layer-j38?utm_source=chatgpt.com">[DDD] Tactical Design Patterns Part 1: Domain Layer - dev.to</a></li><li><a href="https://medium.com/@monge.gaspard.1746/tactical-patterns-in-domain-driven-design-ddd-855c49d8cdc3?utm_source=chatgpt.com">Tactical Patterns in Domain-Driven Design (DDD) - Medium</a></li><li><a href="https://en.wikipedia.org/wiki/SOLID?utm_source=chatgpt.com">SOLID - Wikipedia</a></li><li><a href="https://medium.com/@wawaziphil/building-a-python-api-using-cqrs-a-simple-guide-3d584b6ead34?utm_source=chatgpt.com">Building a Python API Using CQRS: A Simple Guide - Medium</a></li></ul><hr></div></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>