<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Flyweight Pattern | hyunyoun's Blog</title><meta name=keywords content="System-and-Software-Architecture,Design-Patterns,GoF,Structural,Flyweight-Pattern"><meta name=description content="플라이웨이트 패턴은 재사용 가능한 객체 인스턴스를 공유하여 메모리 사용량을 최소화하는 구조 패턴이다.  간단히 말하면 캐시(Cache) 개념을 코드로 패턴화한 것으로, 자주 변화하는 속성(extrinsic)과 변하지 않는 속성(intrinsic)을 분리하고 변하지 않는 속성을 캐시하여 재사용함으로써 메모리 사용을 줄이는 방식이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/detailed-design/software-design-patterns/gof/structural/flyweight-pattern/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/detailed-design/software-design-patterns/gof/structural/flyweight-pattern/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/detailed-design/software-design-patterns/gof/structural/flyweight-pattern/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-engineering/design-and-architecture/detailed-design/software-design-patterns/gof/structural/flyweight-pattern/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Flyweight Pattern"><meta property="og:description" content="플라이웨이트 패턴은 재사용 가능한 객체 인스턴스를 공유하여 메모리 사용량을 최소화하는 구조 패턴이다.  간단히 말하면 캐시(Cache) 개념을 코드로 패턴화한 것으로, 자주 변화하는 속성(extrinsic)과 변하지 않는 속성(intrinsic)을 분리하고 변하지 않는 속성을 캐시하여 재사용함으로써 메모리 사용을 줄이는 방식이다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Flyweight Pattern"><meta name=twitter:description content="플라이웨이트 패턴은 재사용 가능한 객체 인스턴스를 공유하여 메모리 사용량을 최소화하는 구조 패턴이다.  간단히 말하면 캐시(Cache) 개념을 코드로 패턴화한 것으로, 자주 변화하는 속성(extrinsic)과 변하지 않는 속성(intrinsic)을 분리하고 변하지 않는 속성을 캐시하여 재사용함으로써 메모리 사용을 줄이는 방식이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Flyweight Pattern","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/detailed-design/software-design-patterns/gof/structural/flyweight-pattern/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a></div><h1>Flyweight Pattern</h1><div class=post-description>플라이웨이트 패턴은 재사용 가능한 객체 인스턴스를 공유하여 메모리 사용량을 최소화하는 구조 패턴이다. 간단히 말하면 캐시(Cache) 개념을 코드로 패턴화한 것으로, 자주 변화하는 속성(extrinsic)과 변하지 않는 속성(intrinsic)을 분리하고 변하지 않는 속성을 캐시하여 재사용함으로써 메모리 사용을 줄이는 방식이다.</div></header><div class=post-content><h2 id=flyweight-pattern>Flyweight Pattern<a hidden class=anchor aria-hidden=true href=#flyweight-pattern>#</a></h2><p>Flyweight 패턴은 구조적 디자인 패턴 중 하나로, 객체를 공유하여 메모리 사용을 최소화하는 패턴이다.</p><p>플라이웨이트 패턴은 재사용 가능한 객체 인스턴스를 공유하여 메모리 사용량을 최소화하는 구조 패턴이다.<br>간단히 말하면 캐시 (Cache) 개념을 코드로 패턴화한 것으로, 자주 변화하는 속성 (extrinsic) 과 변하지 않는 속성 (intrinsic) 을 분리하고 변하지 않는 속성을 캐시하여 재사용함으로써 메모리 사용을 줄이는 방식이다.</p><h3 id=flyweight-패턴의-주요-구성-요소>Flyweight 패턴의 주요 구성 요소<a hidden class=anchor aria-hidden=true href=#flyweight-패턴의-주요-구성-요소>#</a></h3><ol><li>Flyweight: 경량 객체를 묶는 인터페이스.</li><li>ConcreteFlyweight: 공유 가능하여 재사용되는 객체로, intrinsic state 를 포함한다.</li><li>UnsahredConcreteFlyweight: 공유 불가능한 객체로, extrinsic state 를 포함한다.</li><li>FlyweightFactory: 경량 객체를 만드는 공장 역할과 캐시 역할을 겸비하는 Flyweight 객체 관리 클래스.</li><li>Client: FlyweightFactory 를 통해 Flyweight 타입의 객체를 얻어 사용한다.</li></ol><h3 id=flyweight-패턴의-동작-방식>Flyweight 패턴의 동작 방식<a hidden class=anchor aria-hidden=true href=#flyweight-패턴의-동작-방식>#</a></h3><ol><li>FlyweightFactory 는 Flyweight 객체들을 생성하고 관리한다.</li><li>GetFlyweight() 메서드는 팩토리 메서드 역할을 한다. 객체가 메모리에 존재하면 그대로 가져와 반환하고, 없다면 새로 생성해 반환한다.</li></ol><h3 id=flyweight-패턴의-장점>Flyweight 패턴의 장점<a hidden class=anchor aria-hidden=true href=#flyweight-패턴의-장점>#</a></h3><ol><li>많은 객체를 만들 때 성능을 향상시킬 수 있다.</li><li>많은 객체를 만들 때 메모리를 줄일 수 있다.</li><li>메모리 절약: 대규모 객체 시스템에서 상당한 메모리 절감 효과를 얻을 수 있다.</li><li>중복 최소화: 공유를 통해 객체의 중복 생성을 방지한다.</li></ol><h3 id=flyweight-패턴의-단점>Flyweight 패턴의 단점<a hidden class=anchor aria-hidden=true href=#flyweight-패턴의-단점>#</a></h3><ol><li>특정 인스턴스를 다르게 처리하는 것이 힘들어진다.</li><li>코드 복잡성 증가: 객체를 공유하는 방식은 구현을 복잡하게 만들 수 있다.</li><li>런타임 비용: 객체 상태를 관리하는 데 런타임 비용이 발생할 수 있다.</li></ol><h3 id=flyweight-패턴의-사용-시기>Flyweight 패턴의 사용 시기<a hidden class=anchor aria-hidden=true href=#flyweight-패턴의-사용-시기>#</a></h3><ol><li>대량의 작은 객체를 생성해야 할 때 유용하다.</li><li>객체의 상태를 자주 변하는 속성 (Extrinsic) 과 변하지 않는 속성 (Intrinsic) 으로 분리할 수 있을 때 적합하다.</li><li>공통된 내재 상태를 공유함으로써 메모리 사용을 줄일 수 있을 때 사용한다.</li></ol><h3 id=구현-예시>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a>
</span><span class=lnt id=hl-0-21><a class=lnlinks href=#hl-0-21>21</a>
</span><span class=lnt id=hl-0-22><a class=lnlinks href=#hl-0-22>22</a>
</span><span class=lnt id=hl-0-23><a class=lnlinks href=#hl-0-23>23</a>
</span><span class=lnt id=hl-0-24><a class=lnlinks href=#hl-0-24>24</a>
</span><span class=lnt id=hl-0-25><a class=lnlinks href=#hl-0-25>25</a>
</span><span class=lnt id=hl-0-26><a class=lnlinks href=#hl-0-26>26</a>
</span><span class=lnt id=hl-0-27><a class=lnlinks href=#hl-0-27>27</a>
</span><span class=lnt id=hl-0-28><a class=lnlinks href=#hl-0-28>28</a>
</span><span class=lnt id=hl-0-29><a class=lnlinks href=#hl-0-29>29</a>
</span><span class=lnt id=hl-0-30><a class=lnlinks href=#hl-0-30>30</a>
</span><span class=lnt id=hl-0-31><a class=lnlinks href=#hl-0-31>31</a>
</span><span class=lnt id=hl-0-32><a class=lnlinks href=#hl-0-32>32</a>
</span><span class=lnt id=hl-0-33><a class=lnlinks href=#hl-0-33>33</a>
</span><span class=lnt id=hl-0-34><a class=lnlinks href=#hl-0-34>34</a>
</span><span class=lnt id=hl-0-35><a class=lnlinks href=#hl-0-35>35</a>
</span><span class=lnt id=hl-0-36><a class=lnlinks href=#hl-0-36>36</a>
</span><span class=lnt id=hl-0-37><a class=lnlinks href=#hl-0-37>37</a>
</span><span class=lnt id=hl-0-38><a class=lnlinks href=#hl-0-38>38</a>
</span><span class=lnt id=hl-0-39><a class=lnlinks href=#hl-0-39>39</a>
</span><span class=lnt id=hl-0-40><a class=lnlinks href=#hl-0-40>40</a>
</span><span class=lnt id=hl-0-41><a class=lnlinks href=#hl-0-41>41</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Dict</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Flyweight 클래스: 공유될 객체의 내부 상태를 정의</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CharacterStyle</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>font_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>font_size</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>bold</span><span class=p>:</span> <span class=nb>bool</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>font_name</span> <span class=o>=</span> <span class=n>font_name</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>font_size</span> <span class=o>=</span> <span class=n>font_size</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>bold</span> <span class=o>=</span> <span class=n>bold</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>render</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>char</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>position</span><span class=p>:</span> <span class=nb>tuple</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Rendering &#39;</span><span class=si>{</span><span class=n>char</span><span class=si>}</span><span class=s2>&#39; at </span><span class=si>{</span><span class=n>position</span><span class=si>}</span><span class=s2> with </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>font_name</span><span class=si>}</span><span class=s2>, &#34;</span>
</span></span><span class=line><span class=cl>              <span class=sa>f</span><span class=s2>&#34;size </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>font_size</span><span class=si>}</span><span class=s2>, </span><span class=si>{</span><span class=s1>&#39;bold&#39;</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>bold</span> <span class=k>else</span> <span class=s1>&#39;normal&#39;</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Flyweight 팩토리: Flyweight 객체들을 관리하고 공유</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CharacterStyleFactory</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_styles</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>CharacterStyle</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_style</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>font_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>font_size</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>bold</span><span class=p>:</span> <span class=nb>bool</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>CharacterStyle</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 스타일을 식별하기 위한 키 생성</span>
</span></span><span class=line><span class=cl>        <span class=n>key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>font_name</span><span class=si>}</span><span class=s2>-</span><span class=si>{</span><span class=n>font_size</span><span class=si>}</span><span class=s2>-</span><span class=si>{</span><span class=n>bold</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 스타일이 존재하지 않으면 새로 생성</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_styles</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_styles</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>CharacterStyle</span><span class=p>(</span><span class=n>font_name</span><span class=p>,</span> <span class=n>font_size</span><span class=p>,</span> <span class=n>bold</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Creating new style: </span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_styles</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_style_count</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_styles</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 문자 객체: Flyweight를 사용하는 클래스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Character</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>char</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>style</span><span class=p>:</span> <span class=n>CharacterStyle</span><span class=p>,</span> <span class=n>position</span><span class=p>:</span> <span class=nb>tuple</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>char</span> <span class=o>=</span> <span class=n>char</span>  <span class=c1># 외부 상태 (extrinsic state)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>style</span> <span class=o>=</span> <span class=n>style</span>  <span class=c1># 공유 상태 (intrinsic state)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>position</span> <span class=o>=</span> <span class=n>position</span>  <span class=c1># 외부 상태</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>render</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>style</span><span class=o>.</span><span class=n>render</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>char</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>position</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>실제 사용 예시</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14>14</a>
</span><span class=lnt id=hl-1-15><a class=lnlinks href=#hl-1-15>15</a>
</span><span class=lnt id=hl-1-16><a class=lnlinks href=#hl-1-16>16</a>
</span><span class=lnt id=hl-1-17><a class=lnlinks href=#hl-1-17>17</a>
</span><span class=lnt id=hl-1-18><a class=lnlinks href=#hl-1-18>18</a>
</span><span class=lnt id=hl-1-19><a class=lnlinks href=#hl-1-19>19</a>
</span><span class=lnt id=hl-1-20><a class=lnlinks href=#hl-1-20>20</a>
</span><span class=lnt id=hl-1-21><a class=lnlinks href=#hl-1-21>21</a>
</span><span class=lnt id=hl-1-22><a class=lnlinks href=#hl-1-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>text_editor_example</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1># 스타일 팩토리 생성</span>
</span></span><span class=line><span class=cl>    <span class=n>style_factory</span> <span class=o>=</span> <span class=n>CharacterStyleFactory</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>characters</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 텍스트 입력 시뮬레이션</span>
</span></span><span class=line><span class=cl>    <span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;Hello, World!&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>default_style</span> <span class=o>=</span> <span class=n>style_factory</span><span class=o>.</span><span class=n>get_style</span><span class=p>(</span><span class=s2>&#34;Arial&#34;</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>bold_style</span> <span class=o>=</span> <span class=n>style_factory</span><span class=o>.</span><span class=n>get_style</span><span class=p>(</span><span class=s2>&#34;Arial&#34;</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 문자열의 각 문자에 대해 Character 객체 생성</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>char</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>text</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># &#39;Hello&#39;는 볼드체로, 나머지는 기본 스타일로</span>
</span></span><span class=line><span class=cl>        <span class=n>style</span> <span class=o>=</span> <span class=n>bold_style</span> <span class=k>if</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>5</span> <span class=k>else</span> <span class=n>default_style</span>
</span></span><span class=line><span class=cl>        <span class=n>position</span> <span class=o>=</span> <span class=p>(</span><span class=n>i</span> <span class=o>*</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>  <span class=c1># 간단한 위치 계산</span>
</span></span><span class=line><span class=cl>        <span class=n>characters</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>Character</span><span class=p>(</span><span class=n>char</span><span class=p>,</span> <span class=n>style</span><span class=p>,</span> <span class=n>position</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 모든 문자 렌더링</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>char</span> <span class=ow>in</span> <span class=n>characters</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>char</span><span class=o>.</span><span class=n>render</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>총 생성된 스타일 객체 수: </span><span class=si>{</span><span class=n>style_factory</span><span class=o>.</span><span class=n>get_style_count</span><span class=p>()</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>게임에서의 파티클 시스템 구현</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span><span class=lnt id=hl-2-20><a class=lnlinks href=#hl-2-20>20</a>
</span><span class=lnt id=hl-2-21><a class=lnlinks href=#hl-2-21>21</a>
</span><span class=lnt id=hl-2-22><a class=lnlinks href=#hl-2-22>22</a>
</span><span class=lnt id=hl-2-23><a class=lnlinks href=#hl-2-23>23</a>
</span><span class=lnt id=hl-2-24><a class=lnlinks href=#hl-2-24>24</a>
</span><span class=lnt id=hl-2-25><a class=lnlinks href=#hl-2-25>25</a>
</span><span class=lnt id=hl-2-26><a class=lnlinks href=#hl-2-26>26</a>
</span><span class=lnt id=hl-2-27><a class=lnlinks href=#hl-2-27>27</a>
</span><span class=lnt id=hl-2-28><a class=lnlinks href=#hl-2-28>28</a>
</span><span class=lnt id=hl-2-29><a class=lnlinks href=#hl-2-29>29</a>
</span><span class=lnt id=hl-2-30><a class=lnlinks href=#hl-2-30>30</a>
</span><span class=lnt id=hl-2-31><a class=lnlinks href=#hl-2-31>31</a>
</span><span class=lnt id=hl-2-32><a class=lnlinks href=#hl-2-32>32</a>
</span><span class=lnt id=hl-2-33><a class=lnlinks href=#hl-2-33>33</a>
</span><span class=lnt id=hl-2-34><a class=lnlinks href=#hl-2-34>34</a>
</span><span class=lnt id=hl-2-35><a class=lnlinks href=#hl-2-35>35</a>
</span><span class=lnt id=hl-2-36><a class=lnlinks href=#hl-2-36>36</a>
</span><span class=lnt id=hl-2-37><a class=lnlinks href=#hl-2-37>37</a>
</span><span class=lnt id=hl-2-38><a class=lnlinks href=#hl-2-38>38</a>
</span><span class=lnt id=hl-2-39><a class=lnlinks href=#hl-2-39>39</a>
</span><span class=lnt id=hl-2-40><a class=lnlinks href=#hl-2-40>40</a>
</span><span class=lnt id=hl-2-41><a class=lnlinks href=#hl-2-41>41</a>
</span><span class=lnt id=hl-2-42><a class=lnlinks href=#hl-2-42>42</a>
</span><span class=lnt id=hl-2-43><a class=lnlinks href=#hl-2-43>43</a>
</span><span class=lnt id=hl-2-44><a class=lnlinks href=#hl-2-44>44</a>
</span><span class=lnt id=hl-2-45><a class=lnlinks href=#hl-2-45>45</a>
</span><span class=lnt id=hl-2-46><a class=lnlinks href=#hl-2-46>46</a>
</span><span class=lnt id=hl-2-47><a class=lnlinks href=#hl-2-47>47</a>
</span><span class=lnt id=hl-2-48><a class=lnlinks href=#hl-2-48>48</a>
</span><span class=lnt id=hl-2-49><a class=lnlinks href=#hl-2-49>49</a>
</span><span class=lnt id=hl-2-50><a class=lnlinks href=#hl-2-50>50</a>
</span><span class=lnt id=hl-2-51><a class=lnlinks href=#hl-2-51>51</a>
</span><span class=lnt id=hl-2-52><a class=lnlinks href=#hl-2-52>52</a>
</span><span class=lnt id=hl-2-53><a class=lnlinks href=#hl-2-53>53</a>
</span><span class=lnt id=hl-2-54><a class=lnlinks href=#hl-2-54>54</a>
</span><span class=lnt id=hl-2-55><a class=lnlinks href=#hl-2-55>55</a>
</span><span class=lnt id=hl-2-56><a class=lnlinks href=#hl-2-56>56</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>random</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 파티클의 공유 속성을 담는 Flyweight 클래스</span>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ParticleType</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>texture</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>color</span><span class=p>:</span> <span class=nb>tuple</span>
</span></span><span class=line><span class=cl>    <span class=n>size</span><span class=p>:</span> <span class=nb>float</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>render</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>position</span><span class=p>:</span> <span class=nb>tuple</span><span class=p>,</span> <span class=n>velocity</span><span class=p>:</span> <span class=nb>tuple</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Rendering particle at </span><span class=si>{</span><span class=n>position</span><span class=si>}</span><span class=s2> with velocity </span><span class=si>{</span><span class=n>velocity</span><span class=si>}</span><span class=s2>, &#34;</span>
</span></span><span class=line><span class=cl>              <span class=sa>f</span><span class=s2>&#34;color </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>color</span><span class=si>}</span><span class=s2>, size </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>size</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Flyweight 팩토리</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ParticleFactory</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_particle_types</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>ParticleType</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_particle_type</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>texture</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>color</span><span class=p>:</span> <span class=nb>tuple</span><span class=p>,</span> <span class=n>size</span><span class=p>:</span> <span class=nb>float</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>ParticleType</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>texture</span><span class=si>}</span><span class=s2>-</span><span class=si>{</span><span class=n>color</span><span class=si>}</span><span class=s2>-</span><span class=si>{</span><span class=n>size</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_particle_types</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_particle_types</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>ParticleType</span><span class=p>(</span><span class=n>texture</span><span class=p>,</span> <span class=n>color</span><span class=p>,</span> <span class=n>size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_particle_types</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 실제 파티클 객체</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Particle</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>type_</span><span class=p>:</span> <span class=n>ParticleType</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>type</span> <span class=o>=</span> <span class=n>type_</span>  <span class=c1># 공유 상태</span>
</span></span><span class=line><span class=cl>        <span class=c1># 외부 상태</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>position</span> <span class=o>=</span> <span class=p>(</span><span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>()</span> <span class=o>*</span> <span class=mi>100</span><span class=p>,</span> <span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>()</span> <span class=o>*</span> <span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>velocity</span> <span class=o>=</span> <span class=p>(</span><span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>()</span> <span class=o>-</span> <span class=mf>0.5</span><span class=p>,</span> <span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>()</span> <span class=o>-</span> <span class=mf>0.5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>update</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>position</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>position</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>velocity</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>position</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>velocity</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>render</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>type</span><span class=o>.</span><span class=n>render</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>position</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>velocity</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 파티클 시스템</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ParticleSystem</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>factory</span> <span class=o>=</span> <span class=n>ParticleFactory</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>particles</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create_particle</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>texture</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>color</span><span class=p>:</span> <span class=nb>tuple</span><span class=p>,</span> <span class=n>size</span><span class=p>:</span> <span class=nb>float</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>particle_type</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>factory</span><span class=o>.</span><span class=n>get_particle_type</span><span class=p>(</span><span class=n>texture</span><span class=p>,</span> <span class=n>color</span><span class=p>,</span> <span class=n>size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>particles</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>Particle</span><span class=p>(</span><span class=n>particle_type</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>update</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>particle</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>particles</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>particle</span><span class=o>.</span><span class=n>update</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>particle</span><span class=o>.</span><span class=n>render</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><hr><h3 id=1-주제의-분류가-적절한지에-대해-조사>1. 주제의 분류가 적절한지에 대해 조사<a hidden class=anchor aria-hidden=true href=#1-주제의-분류가-적절한지에-대해-조사>#</a></h3><p>Flyweight Pattern(플라이웨이트 패턴) 은 &ldquo;Computer Science and Engineering > Software Design and Architecture > Software Design Patterns > GoF > Structural Design Patterns&rdquo; 분류에 정확히 해당합니다. GoF(Gang of Four) 에서 정의한 구조 (Structural) 패턴 중 하나로, 대량의 유사 객체를 효율적으로 공유해 메모리 사용을 최적화하는 데 중점을 둡니다 [1][2][3][4].</p><hr><h3 id=2-200-자-요약>2. 200 자 요약<a hidden class=anchor aria-hidden=true href=#2-200-자-요약>#</a></h3><p>플라이웨이트 패턴은 대량의 유사 객체를 공유해 메모리 사용을 최소화하는 구조 패턴입니다. 객체의 변하지 않는 상태 (intrinsic) 는 공유하고, 변하는 상태 (extrinsic) 는 외부에서 관리하여, 대규모 시스템에서 객체 생성 비용과 메모리 사용을 크게 줄일 수 있습니다 [1][2][4][6].</p><hr><h3 id=3-250-자-개요>3. 250 자 개요<a hidden class=anchor aria-hidden=true href=#3-250-자-개요>#</a></h3><p>Flyweight Pattern 은 대량의 객체가 필요한 상황에서, 객체의 불변 상태 (intrinsic state) 를 공유하고, 가변 상태 (extrinsic state) 는 외부에서 관리함으로써 메모리 사용을 최적화하는 구조 디자인 패턴입니다. FlyweightFactory 가 객체의 재사용을 관리하며, 클라이언트는 팩토리를 통해 공유 객체를 받아 사용합니다. 텍스트 에디터의 문자, 게임의 그래픽 요소, GUI 컴포넌트 등에서 널리 활용되며, 객체 생성 비용과 메모리 사용을 줄여 시스템의 확장성과 성능을 높입니다 [1][2][3][4][6].</p><hr><h2 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h2><ul><li><strong>정의</strong>: 플라이웨이트 패턴은 공유를 통해 대량의 유사 객체를 효율적으로 지원하고, 메모리 사용을 최소화하는 구조 패턴입니다 [1][2][3].</li><li><strong>목적 및 필요성</strong>: 대량의 객체가 필요할 때, 객체의 불변 상태를 공유하여 메모리 사용과 객체 생성 비용을 줄임 [1][2][4].</li><li><strong>주요 기능 및 역할</strong>:<ul><li>객체의 상태를 intrinsic(공유, 불변) 과 extrinsic(비공유, 가변) 으로 분리</li><li>FlyweightFactory 에서 객체의 생성/재사용 관리</li><li>클라이언트는 팩토리를 통해 객체를 받아 외부 상태와 결합해 사용</li></ul></li><li><strong>특징</strong>: 메모리 절약, 성능 향상, 객체 재사용, 불변 객체 설계, 코드 복잡성 증가 가능 [1][2][6].</li><li><strong>핵심 원칙</strong>: OCP(개방/폐쇄 원칙), SRP(단일 책임 원칙), 불변성 (Immutable Object) 설계 [1][6].</li></ul><hr><h2 id=주요-내용-정리>주요 내용 정리<a hidden class=anchor aria-hidden=true href=#주요-내용-정리>#</a></h2><h3 id=패턴-이름과-분류>패턴 이름과 분류<a hidden class=anchor aria-hidden=true href=#패턴-이름과-분류>#</a></h3><table><thead><tr><th>항목</th><th>내용</th></tr></thead><tbody><tr><td>패턴 이름</td><td>Flyweight Pattern(플라이웨이트 패턴)</td></tr><tr><td>분류</td><td>GoF 구조 (Structural) 패턴</td></tr></tbody></table><hr><h3 id=의도-intent>의도 (Intent)<a hidden class=anchor aria-hidden=true href=#의도-intent>#</a></h3><p>공유를 통해 대량의 소립 (fine-grained) 객체를 효율적으로 지원하여 메모리 사용을 최소화한다 [1][3][4].</p><hr><h3 id=다른-이름-also-known-as>다른 이름 (Also Known As)<a hidden class=anchor aria-hidden=true href=#다른-이름-also-known-as>#</a></h3><ul><li>경량 패턴 (Lightweight Pattern)</li><li>캐시 패턴 (Cache Pattern)</li></ul><hr><h3 id=동기-motivation--forces>동기 (Motivation / Forces)<a hidden class=anchor aria-hidden=true href=#동기-motivation--forces>#</a></h3><ul><li>대량의 유사 객체를 생성해야 할 때, 객체의 불변 상태를 공유해 메모리 사용과 생성 비용을 줄이고자 할 때 [1][3][4][6].</li></ul><hr><h3 id=적용-가능성-applicability>적용 가능성 (Applicability)<a hidden class=anchor aria-hidden=true href=#적용-가능성-applicability>#</a></h3><ul><li>대량의 객체가 필요하고, 이 객체들이 많은 상태를 공유할 수 있을 때</li><li>객체 생성 비용이 높거나, 메모리 사용이 중요한 시스템</li><li>텍스트 에디터, 게임, 그래픽, 데이터베이스 등 [1][2][4][6].</li></ul><hr><h3 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h3><h4 id=구조-다이어그램>구조 다이어그램<a hidden class=anchor aria-hidden=true href=#구조-다이어그램>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>+------------------+        +---------------------+
</span></span><span class=line><span class=cl>|   Flyweight      |&lt;-------|  FlyweightFactory   |
</span></span><span class=line><span class=cl>+------------------+        +---------------------+
</span></span><span class=line><span class=cl>| +operation()     |        | +getFlyweight(key)  |
</span></span><span class=line><span class=cl>+------------------+        +---------------------+
</span></span><span class=line><span class=cl>      ^                                    |
</span></span><span class=line><span class=cl>      |                                    |
</span></span><span class=line><span class=cl>+------------------+                +------------------+
</span></span><span class=line><span class=cl>|ConcreteFlyweight |                | Client           |
</span></span><span class=line><span class=cl>+------------------+                +------------------+
</span></span></code></pre></td></tr></table></div></div><h4 id=구성-요소-및-역할>구성 요소 및 역할<a hidden class=anchor aria-hidden=true href=#구성-요소-및-역할>#</a></h4><table><thead><tr><th>구성 요소</th><th>기능 및 역할</th></tr></thead><tbody><tr><td>Flyweight</td><td>공유 객체의 인터페이스, intrinsic/extrinsic 상태 분리 [1][2][3]</td></tr><tr><td>ConcreteFlyweight</td><td>Flyweight 구현, intrinsic(공유) 상태 보유 [1][2][3]</td></tr><tr><td>UnsharedFlyweight</td><td>공유되지 않는, 개별 객체 (필요시)[3][5]</td></tr><tr><td>FlyweightFactory</td><td>Flyweight 객체 생성/관리/캐싱, 중복 생성 방지 [1][2][3][4]</td></tr><tr><td>Client</td><td>FlyweightFactory 에서 객체를 받아 외부 상태와 결합해 사용 [1][2][3][4]</td></tr></tbody></table><h4 id=필수선택-구성요소>필수/선택 구성요소<a hidden class=anchor aria-hidden=true href=#필수선택-구성요소>#</a></h4><table><thead><tr><th>구분</th><th>구성 요소</th><th>기능 및 특징</th></tr></thead><tbody><tr><td>필수</td><td>Flyweight</td><td>공유 객체 인터페이스, intrinsic/extrinsic 분리</td></tr><tr><td>필수</td><td>ConcreteFlyweight</td><td>공유 객체 구현, intrinsic 상태 보유</td></tr><tr><td>필수</td><td>FlyweightFactory</td><td>객체 생성/관리/캐싱, 중복 생성 방지</td></tr><tr><td>필수</td><td>Client</td><td>외부 상태 관리, Factory 에서 객체 획득</td></tr><tr><td>선택</td><td>UnsharedFlyweight</td><td>공유 불가 객체 (필요시 개별 생성)</td></tr></tbody></table><hr><h3 id=주요-원리-및-작동-원리>주요 원리 및 작동 원리<a hidden class=anchor aria-hidden=true href=#주요-원리-및-작동-원리>#</a></h3><ol><li>FlyweightFactory 에서 요청받은 키로 객체를 검색</li><li>이미 존재하면 반환, 없으면 새로 생성해 캐시에 저장 후 반환</li><li>Client 는 객체를 받아 외부 상태 (extrinsic) 를 결합해 사용</li><li>intrinsic 상태는 공유, extrinsic 상태는 외부에서 관리</li></ol><h4 id=작동-원리-다이어그램>작동 원리 다이어그램<a hidden class=anchor aria-hidden=true href=#작동-원리-다이어그램>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2>2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[Client] → [FlyweightFactory.getFlyweight(key)] → [Flyweight]
</span></span><span class=line><span class=cl>    |                                                  ↑
</span></span><span class=line><span class=cl>    +-------------------- extrinsic state -------------+
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h3><ul><li><strong>객체 풀 (Pool) 기반</strong>: Factory 에서 객체를 캐싱, 중복 생성 방지 [1][2][3][4].</li><li><strong>intrinsic/extrinsic 분리</strong>: intrinsic(공유, 불변), extrinsic(외부, 가변) 상태 분리 [1][2][3][4].</li><li><strong>불변 객체 설계</strong>: Flyweight 객체는 불변 (immutable) 하게 설계 [1][6][20].</li><li><strong>멀티스레드 안전성</strong>: 동시성 환경에서는 동기화 필요 [6][16].</li></ul><h4 id=예시-코드-python>예시 코드 (Python)<a hidden class=anchor aria-hidden=true href=#예시-코드-python>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Flyweight</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>_instances</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>cls</span><span class=o>.</span><span class=n>_instances</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>operation</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>extrinsic_state</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=nb>id</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>extrinsic_state</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>factory</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>key</span><span class=p>:</span> <span class=n>Flyweight</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=n>factory</span><span class=p>(</span><span class=s1>&#39;A&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>b</span> <span class=o>=</span> <span class=n>factory</span><span class=p>(</span><span class=s1>&#39;A&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>c</span> <span class=o>=</span> <span class=n>factory</span><span class=p>(</span><span class=s1>&#39;B&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>a</span><span class=o>.</span><span class=n>operation</span><span class=p>(</span><span class=s1>&#39;x&#39;</span><span class=p>)</span>  <span class=c1># 같은 객체</span>
</span></span><span class=line><span class=cl><span class=n>b</span><span class=o>.</span><span class=n>operation</span><span class=p>(</span><span class=s1>&#39;y&#39;</span><span class=p>)</span>  <span class=c1># 같은 객체</span>
</span></span><span class=line><span class=cl><span class=n>c</span><span class=o>.</span><span class=n>operation</span><span class=p>(</span><span class=s1>&#39;z&#39;</span><span class=p>)</span>  <span class=c1># 다른 객체</span>
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=장점과-단점>장점과 단점<a hidden class=anchor aria-hidden=true href=#장점과-단점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>✅ 장점</td><td>메모리 절약</td><td>대량 객체의 불변 상태 공유로 메모리 사용 최소화 [1][2][3][4]</td></tr><tr><td></td><td>성능 향상</td><td>객체 생성/소멸 비용 감소, 캐싱 효과 [1][2][3][4]</td></tr><tr><td></td><td>확장성</td><td>대규모 시스템에서 객체 관리 용이 [1][2][3][4]</td></tr><tr><td></td><td>재사용성</td><td>동일 객체의 반복적 재사용 가능 [1][2][3][4]</td></tr><tr><td>⚠ 단점</td><td>코드 복잡성</td><td>intrinsic/extrinsic 분리로 코드 복잡도 증가 [2][6][16]</td></tr><tr><td></td><td>상태 관리 어려움</td><td>공유 객체의 상태 변경 시 전체 영향 가능성 [2][6][16]</td></tr><tr><td></td><td>동기화 이슈</td><td>멀티스레드 환경에서 동기화 필요 [6][16]</td></tr><tr><td></td><td>적용 한계</td><td>모든 객체가 공유 가능하지 않을 때는 적용 어려움 [2][16]</td></tr></tbody></table><hr><h3 id=도전-과제-및-해결책>도전 과제 및 해결책<a hidden class=anchor aria-hidden=true href=#도전-과제-및-해결책>#</a></h3><ul><li><strong>문제</strong>: intrinsic/extrinsic 분리의 복잡성<br><strong>해결책</strong>: 설계 시 명확한 상태 분리, 불변 객체 설계</li><li><strong>문제</strong>: 멀티스레드 동기화<br><strong>해결책</strong>: 동기화 (lock), thread-safe 자료구조 활용</li><li><strong>문제</strong>: 공유 객체의 상태 변경<br><strong>해결책</strong>: Flyweight 객체는 반드시 불변 (immutable) 하게 설계</li></ul><hr><h3 id=분류에-따른-종류-및-유형>분류에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류에-따른-종류-및-유형>#</a></h3><table><thead><tr><th>분류 기준</th><th>종류/유형</th><th>설명</th></tr></thead><tbody><tr><td>공유 여부</td><td>Shared Flyweight</td><td>Factory 에서 관리, 공유 객체</td></tr><tr><td></td><td>Unshared Flyweight</td><td>개별 객체, 공유 불가 상태</td></tr><tr><td>상태 분리</td><td>Intrinsic/Extrinsic</td><td>불변/공유 (내부), 가변/비공유 (외부)</td></tr></tbody></table><hr><h3 id=실무-적용-예시>실무 적용 예시<a hidden class=anchor aria-hidden=true href=#실무-적용-예시>#</a></h3><table><thead><tr><th>분야</th><th>적용 예시</th><th>설명</th></tr></thead><tbody><tr><td>텍스트 에디터</td><td>문자 객체 공유</td><td>각 문자별 객체 공유, 폰트 등은 외부 관리</td></tr><tr><td>게임 개발</td><td>그래픽 요소 (총알, 배경) 공유</td><td>동일 이미지/스프라이트 객체 공유</td></tr><tr><td>GUI 컴포넌트</td><td>버튼/아이콘 등 공유</td><td>동일 속성의 UI 객체 재사용</td></tr><tr><td>데이터베이스</td><td>쿼리 캐싱</td><td>동일 쿼리 객체 캐싱/재사용</td></tr></tbody></table><hr><h3 id=활용-사례-시나리오-기반>활용 사례 (시나리오 기반)<a hidden class=anchor aria-hidden=true href=#활용-사례-시나리오-기반>#</a></h3><h4 id=상황-가정-게임-배경-타일-관리>상황 가정: 게임 배경 타일 관리<a hidden class=anchor aria-hidden=true href=#상황-가정-게임-배경-타일-관리>#</a></h4><ul><li><strong>시스템 구성</strong>:<ul><li>Flyweight: Tile(타일)</li><li>ConcreteFlyweight: GrassTile, WaterTile 등</li><li>FlyweightFactory: TileFactory</li><li>Client: 게임 맵 엔진</li></ul></li><li><strong>Workflow</strong>:<ol><li>TileFactory 에서 타일 종류별 객체를 캐싱/재사용</li><li>맵에 타일 위치 (외부 상태) 만 저장, 타일 객체는 공유</li><li>메모리 절약, 성능 향상</li></ol></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[Client] → [TileFactory.getTile(type)] → [Tile]
</span></span><span class=line><span class=cl>    |------------------ 위치/상태(외부) -------------------|
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의점>#</a></h3><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>상태 분리</td><td>intrinsic/extrinsic 분리 명확화</td><td>불변 객체 설계, 외부 상태는 별도 관리</td></tr><tr><td>동기화</td><td>멀티스레드 환경에서 동기화 필요</td><td>thread-safe 자료구조, lock 적용</td></tr><tr><td>객체 관리</td><td>객체 풀 크기, 메모리 관리 필요</td><td>캐시 만료, GC 활용, 객체 수 제한</td></tr><tr><td>적용 한계</td><td>모든 객체가 공유 가능하지 않을 수 있음</td><td>공유 가능한 객체만 패턴 적용</td></tr></tbody></table><hr><h3 id=최적화하기-위한-고려사항-및-주의점>최적화하기 위한 고려사항 및 주의점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의점>#</a></h3><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>캐시 오버헤드</td><td>캐시 크기/관리 비용 발생</td><td>LRU 등 캐시 관리 전략 적용</td></tr><tr><td>동기화 비용</td><td>동기화 (lock) 로 인한 성능 저하 가능</td><td>lock 최소화, concurrent 자료구조 활용</td></tr><tr><td>불필요 객체 생성</td><td>캐시 미스 시 불필요 객체 생성 가능</td><td>캐시 적중률 높이기, 객체 풀 최적화</td></tr><tr><td>불변 객체 활용</td><td>상태 변경 시 전체 영향 가능</td><td>불변 객체 설계, 외부 상태만 변경</td></tr></tbody></table><hr><h3 id=2025-년-기준-최신-동향>2025 년 기준 최신 동향<a hidden class=anchor aria-hidden=true href=#2025-년-기준-최신-동향>#</a></h3><table><thead><tr><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>캐시 최적화</td><td>LRU/TTL 캐시</td><td>캐시 만료/최적화 전략 도입 확산</td></tr><tr><td>게임/그래픽</td><td>대규모 객체 공유</td><td>게임·그래픽 엔진에서 대량 객체 공유 활용 증가</td></tr><tr><td>멀티스레드</td><td>thread-safe Factory</td><td>동기화/성능 최적화된 Factory 구현 확산</td></tr><tr><td>불변 객체</td><td>Immutable Object</td><td>불변 객체 설계 표준화, 안전성 강화</td></tr></tbody></table><hr><h3 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h3><table><thead><tr><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>상태 분리</td><td>intrinsic/extrinsic</td><td>불변/가변 상태 분리, 설계 핵심</td></tr><tr><td>캐시/객체 풀</td><td>Factory 관리</td><td>객체 풀, 캐시 관리 전략 중요</td></tr><tr><td>비교 패턴</td><td>Singleton/Prototype</td><td>Singleton 은 단일, Flyweight 는 다수 공유</td></tr><tr><td>불변 객체</td><td>Immutable Object</td><td>상태 변경 방지, 안전성 강화</td></tr></tbody></table><hr><h3 id=앞으로의-전망>앞으로의 전망<a hidden class=anchor aria-hidden=true href=#앞으로의-전망>#</a></h3><table><thead><tr><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>캐시/풀</td><td>캐시 전략 고도화</td><td>LRU, TTL 등 캐시 관리 전략 발전</td></tr><tr><td>게임/그래픽</td><td>대규모 객체 공유</td><td>대규모 그래픽/게임 엔진에서 활용 증가</td></tr><tr><td>멀티스레드</td><td>thread-safe Factory</td><td>동기화/성능 최적화 연구 활발</td></tr><tr><td>불변 객체</td><td>Immutable Object</td><td>불변 객체 표준화, 안전성 강화</td></tr></tbody></table><hr><h3 id=하위-주제별-추가-학습-필요-내용>하위 주제별 추가 학습 필요 내용<a hidden class=anchor aria-hidden=true href=#하위-주제별-추가-학습-필요-내용>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>간략 설명</th></tr></thead><tbody><tr><td>패턴 구조</td><td>intrinsic/extrinsic 분리</td><td>상태 분리 설계/구현법</td></tr><tr><td>동기화</td><td>thread-safe Factory</td><td>동기화/성능 최적화 기법</td></tr><tr><td>비교 패턴</td><td>Singleton/Prototype</td><td>구조/목적 차이 학습</td></tr><tr><td>캐시 전략</td><td>LRU/TTL 캐시</td><td>캐시 관리 전략 구현법</td></tr></tbody></table><hr><h3 id=추가-학습알아야-할-내용>추가 학습/알아야 할 내용<a hidden class=anchor aria-hidden=true href=#추가-학습알아야-할-내용>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>간략 설명</th></tr></thead><tbody><tr><td>소프트웨어 아키텍처</td><td>대규모 객체 관리</td><td>대량 객체 관리/최적화 전략</td></tr><tr><td>성능</td><td>캐시/풀 최적화</td><td>캐시/객체 풀 성능 최적화 기법</td></tr><tr><td>프레임워크</td><td>게임/그래픽 엔진 활용</td><td>Flyweight 활용 사례 학습</td></tr><tr><td>실무 도구</td><td>캐시 자동화 도구</td><td>캐시/객체 풀 자동 관리 도구 활용</td></tr></tbody></table><hr><h2 id=용어-정리-1>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-1>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>Flyweight</td><td>공유 객체의 인터페이스, intrinsic/extrinsic 분리</td></tr><tr><td>ConcreteFlyweight</td><td>공유 객체 구현, intrinsic(불변) 상태 보유</td></tr><tr><td>UnsharedFlyweight</td><td>공유 불가 객체, 개별 생성 필요시 사용</td></tr><tr><td>FlyweightFactory</td><td>객체 생성/관리/캐싱, 중복 생성 방지</td></tr><tr><td>intrinsic state</td><td>공유, 불변 상태 (내부)</td></tr><tr><td>extrinsic state</td><td>비공유, 가변 상태 (외부)</td></tr><tr><td>Immutable Object</td><td>불변 객체, 상태 변경 불가</td></tr></tbody></table><hr><h2 id=참고-및-출처-1>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-1>#</a></h2><ul><li><a href=https://inpa.tistory.com/entry/GOF-%F0%9F%92%A0-Flyweight-%ED%8C%A8%ED%84%B4-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EB%B0%B0%EC%9B%8C%EB%B3%B4%EC%9E%90>Inpa Dev - 플라이웨이트 패턴 완벽 마스터하기</a></li><li><a href=https://ssow93.tistory.com/54>soTech - 플라이웨이트 패턴 정리</a></li><li><a href=https://has3ong.github.io/programming/designpattern-flyweight/>디자인 패턴 톺아보기 - Flyweight Pattern</a></li><li><a href=https://happydhkim.tistory.com/entry/%ED%94%8C%EB%9D%BC%EC%9D%B4%EC%9B%A8%EC%9D%B4%ED%8A%B8-%ED%8C%A8%ED%84%B4Flyweight-Pattern%EC%9D%B4%EB%9E%80>재미있는 개발 이야기 - 플라이웨이트 패턴</a></li><li><a href=https://python101.tistory.com/entry/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4-%ED%94%8C%EB%9D%BC%EC%9D%B4%EC%9B%A8%EC%9D%B4%ED%8A%B8-%ED%8C%A8%ED%84%B4-Flyweight-Pattern-python-%EC%98%88%EC%A0%9C-%EC%BD%94%EB%93%9C>Python101 - 플라이웨이트 패턴 파이썬 예제</a></li><li><a href=https://velog.io/@sihkang/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4-%ED%94%8C%EB%9D%BC%EC%9D%B4%EC%9B%A8%EC%9D%B4%ED%8A%B8>velog - 플라이웨이트(경량) 패턴</a></li><li><a href=https://jaimemin.tistory.com/2543>꾸준함 - 플라이웨이트 패턴</a></li><li><a href=https://bluestickvic.tistory.com/17>블루스틱빅 - 플라이웨이 패턴</a></li><li><a href=https://tobuymacbookpro.tistory.com/entry/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4Flyweight-pattern-%EC%B4%9D%EC%A0%95%EB%A6%AC>킨지 dev - Flyweight pattern 총정리</a></li><li><a href=https://internet-craft.tistory.com/84>항해일지 - 플라이웨이트 패턴</a></li></ul><h2 id=1-주제의-분류-적절성-평가>1. 주제의 분류 적절성 평가<a hidden class=anchor aria-hidden=true href=#1-주제의-분류-적절성-평가>#</a></h2><ul><li><p><strong>현재 분류</strong><br>”Computer Science and Engineering” > &ldquo;Software Design and Architecture&rdquo; > &ldquo;Software Design Patterns&rdquo; > &ldquo;GoF&rdquo; > &ldquo;Structural Design Patterns&rdquo;</p></li><li><p><strong>Flyweight Pattern의 실제 분류</strong><br>✅ 정확하게 **구조 디자인 패턴(Structural Design Pattern)**에 속함.<br>GoF (Gang of Four) 디자인 패턴 중 하나이며, 객체 수를 줄여 메모리를 절약하기 위한 목적의 패턴입니다.</p></li></ul><hr><h2 id=2-주제-요약-200자-내외>2. 주제 요약 (200자 내외)<a hidden class=anchor aria-hidden=true href=#2-주제-요약-200자-내외>#</a></h2><p>Flyweight 패턴은 다수의 유사 객체가 사용될 때, 공통 데이터를 공유하여 메모리 사용을 최소화하는 구조 디자인 패턴이다. 대량 객체 생성 시 자원 최적화에 유용하다.</p><hr><h2 id=3-전체-개요-250자-내외>3. 전체 개요 (250자 내외)<a hidden class=anchor aria-hidden=true href=#3-전체-개요-250자-내외>#</a></h2><p>Flyweight Pattern은 많은 수의 객체를 생성해야 할 때, 객체 내부의 불변 데이터를 공유함으로써 메모리 사용을 최소화하는 구조 디자인 패턴이다. 예를 들어 텍스트 렌더링 시스템에서 각 글자의 폰트 스타일 등 공통 속성은 공유하고, 위치 정보 등만 별도로 유지하여 수천 개의 문자 객체를 효율적으로 관리할 수 있다. 메모리 절감, 성능 향상이 필요한 시스템에 효과적이다.</p><hr><h2 id=4-핵심-개념>4. 핵심 개념<a hidden class=anchor aria-hidden=true href=#4-핵심-개념>#</a></h2><ul><li><p><strong>정의</strong>: Flyweight Pattern은 동일하거나 유사한 객체들의 공통된 상태(state)를 공유하고, 개별 상태만 별도로 유지하여 메모리 소비를 최소화하는 구조 패턴입니다.</p></li><li><p><strong>핵심 개념</strong>:</p><ul><li><p><strong>Intrinsic state (내재 상태)</strong>: 공유 가능한 상태 (예: 글꼴, 색상)</p></li><li><p><strong>Extrinsic state (외재 상태)</strong>: 인스턴스별로 달라지는 상태 (예: 위치, 사용자 입력 등)</p></li></ul></li><li><p><strong>예시</strong>:</p><ul><li><p>게임에서 총알 객체를 수천 개 생성해야 하는 상황</p></li><li><p>텍스트 편집기에서 각 글자 객체 (폰트, 크기 공유 → 위치, 색상만 개별 보관)</p></li></ul></li><li><p><strong>중요한 점</strong>: 객체를 무작정 공유하지 않고, 공유할 수 있는 속성과 그렇지 않은 속성을 분리하는 설계가 필수</p></li></ul><hr><p>이제 다음 단계인 “## 5. 주제와 관련하여 조사할 내용”과 “## 6. 주제에 대한 추가 조사 내용”에 따라 <strong>전체 상세 내용 정리</strong>를 이어서 제공하겠습니다. 계속 진행할까요?</p><p>좋습니다. 계속해서 Flyweight Pattern에 대한 <strong>심화 분석</strong>을 진행하겠습니다.</p><hr><h2 id=5-주제와-관련하여-조사할-내용>5. 주제와 관련하여 조사할 내용<a hidden class=anchor aria-hidden=true href=#5-주제와-관련하여-조사할-내용>#</a></h2><h3 id=-핵심-개념>📌 핵심 개념<a hidden class=anchor aria-hidden=true href=#-핵심-개념>#</a></h3><ul><li><p><strong>Flyweight Pattern</strong>은 수많은 객체들이 공통의 내부 상태(Intrinsic state)를 공유함으로써 메모리 사용량을 줄이는 구조 패턴입니다.</p></li><li><p>객체 수가 많을수록 성능과 메모리 효율이 극대화되며, 특히 UI 요소, 그래픽 처리, 텍스트 렌더링 등에서 사용됩니다.</p></li></ul><hr><h3 id=-배경>📌 배경<a hidden class=anchor aria-hidden=true href=#-배경>#</a></h3><ul><li><p>동일하거나 유사한 객체들이 반복적으로 사용될 때, 불필요한 메모리 낭비를 방지할 필요성이 제기됨.</p></li><li><p>객체마다 동일한 데이터를 반복적으로 가지는 것은 비효율적임.</p></li></ul><hr><h3 id=-목적-및-필요성>📌 목적 및 필요성<a hidden class=anchor aria-hidden=true href=#-목적-및-필요성>#</a></h3><ul><li><p><strong>메모리 최적화</strong>: 대량의 객체를 관리할 때 자원 소모를 줄이는 것이 목적.</p></li><li><p><strong>성능 개선</strong>: 공유 객체를 활용하여 생성 및 GC(가비지 컬렉션) 비용 절감.</p></li></ul><hr><h3 id=-주요-기능-및-역할>📌 주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#-주요-기능-및-역할>#</a></h3><ul><li><p><strong>Flyweight</strong>: 공통 상태를 담은 객체 (공유 대상)</p></li><li><p><strong>Client</strong>: Flyweight를 사용하는 외부 객체</p></li><li><p><strong>Flyweight Factory</strong>: 공유 객체를 생성하고 캐싱함으로써 재사용을 보장</p></li></ul><hr><h3 id=-특징>📌 특징<a hidden class=anchor aria-hidden=true href=#-특징>#</a></h3><table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>공유</td><td>상태가 동일한 객체는 하나의 인스턴스로 공유됨</td></tr><tr><td>메모리 절약</td><td>객체 수를 줄여서 메모리 사용량을 최소화</td></tr><tr><td>성능 개선</td><td>객체 생성을 줄이고, GC 부담을 낮춤</td></tr><tr><td>구조적 제한</td><td>상태를 intrinsic과 extrinsic으로 구분해야 함</td></tr></tbody></table><hr><h3 id=-핵심-원칙>📌 핵심 원칙<a hidden class=anchor aria-hidden=true href=#-핵심-원칙>#</a></h3><ul><li><p><strong>객체 공유(Sharing)</strong></p></li><li><p><strong>상태 분리(State Partitioning)</strong></p></li><li><p><strong>불변성(Immutable Data)</strong>: 공유 객체는 변경되지 않아야 함</p></li></ul><hr><h3 id=-주요-원리-및-작동-원리>📌 주요 원리 및 작동 원리<a hidden class=anchor aria-hidden=true href=#-주요-원리-및-작동-원리>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2>2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3>3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4>4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5>5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>[Client]
</span></span><span class=line><span class=cl>   |
</span></span><span class=line><span class=cl>   v
</span></span><span class=line><span class=cl>[Flyweight Factory] -- 캐시된 Flyweight 반환
</span></span><span class=line><span class=cl>   |
</span></span><span class=line><span class=cl>   +--[Flyweight Object] ← 공유 (intrinsic state)
</span></span></code></pre></td></tr></table></div></div><p>📌 <strong>다이어그램</strong> 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1>1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2>2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3>3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4>4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5>5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>+---------+          +----------------+         +------------------+
</span></span><span class=line><span class=cl>| Client  | -------&gt; | FlyweightFactory| -----&gt; |  Flyweight       |
</span></span><span class=line><span class=cl>+---------+          +----------------+         +------------------+
</span></span><span class=line><span class=cl>                                               ↕
</span></span><span class=line><span class=cl>                                        Intrinsic state
</span></span><span class=line><span class=cl>                                 (공유: 폰트, 색상, 이미지 등)
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=-구조-및-아키텍처>📌 구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#-구조-및-아키텍처>#</a></h3><h4 id=-필수-구성요소>✅ 필수 구성요소<a hidden class=anchor aria-hidden=true href=#-필수-구성요소>#</a></h4><table><thead><tr><th>구성 요소</th><th>기능 및 역할</th></tr></thead><tbody><tr><td><strong>Flyweight</strong></td><td>공유 가능한 intrinsic state만을 보관. 외부 상태는 외부에서 주입됨.</td></tr><tr><td><strong>ConcreteFlyweight</strong></td><td>Flyweight 인터페이스를 구현하는 실질 객체</td></tr><tr><td><strong>FlyweightFactory</strong></td><td>Flyweight 객체들을 캐싱/관리하며 재사용을 보장</td></tr><tr><td><strong>Client</strong></td><td>Flyweight 객체를 사용하는 클라이언트. Extrinsic state를 전달</td></tr></tbody></table><h4 id=-선택-구성요소-composite-지원-시>🟨 선택 구성요소 (Composite 지원 시)<a hidden class=anchor aria-hidden=true href=#-선택-구성요소-composite-지원-시>#</a></h4><table><thead><tr><th>구성 요소</th><th>기능</th></tr></thead><tbody><tr><td><strong>UnsharedConcreteFlyweight</strong></td><td>공유되지 않는 Flyweight 객체. 복잡하거나 공유가 불가능한 상태일 때 사용</td></tr></tbody></table><hr><h3 id=-원인-영향-탐지-및-해결-방법>📌 원인, 영향, 탐지 및 해결 방법<a hidden class=anchor aria-hidden=true href=#-원인-영향-탐지-및-해결-방법>#</a></h3><table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>원인</td><td>동일한 구성의 객체들이 과도하게 생성되어 메모리 낭비 발생</td></tr><tr><td>영향</td><td>시스템 성능 저하, 메모리 부족</td></tr><tr><td>탐지</td><td>Heap 분석, 객체 수 시각화 도구 사용 (e.g., VisualVM, Heap Dump 분석)</td></tr><tr><td>해결</td><td>Flyweight Pattern 도입, 상태 분리 설계 리팩토링 수행</td></tr></tbody></table><hr><h3 id=-구현-기법>📌 구현 기법<a hidden class=anchor aria-hidden=true href=#-구현-기법>#</a></h3><ul><li><p><strong>정의</strong>: 객체 풀(Pool)을 사용하여 동일한 상태를 공유하는 객체들을 재사용</p></li><li><p><strong>구성</strong>: Flyweight 인터페이스, 공유 객체 생성 Factory, 상태 분리</p></li><li><p><strong>목적</strong>: 불필요한 객체 생성을 줄이고 메모리 사용량 최적화</p></li><li><p><strong>실제 예시</strong>:</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a>
</span><span class=lnt id=hl-9-11><a class=lnlinks href=#hl-9-11>11</a>
</span><span class=lnt id=hl-9-12><a class=lnlinks href=#hl-9-12>12</a>
</span><span class=lnt id=hl-9-13><a class=lnlinks href=#hl-9-13>13</a>
</span><span class=lnt id=hl-9-14><a class=lnlinks href=#hl-9-14>14</a>
</span><span class=lnt id=hl-9-15><a class=lnlinks href=#hl-9-15>15</a>
</span><span class=lnt id=hl-9-16><a class=lnlinks href=#hl-9-16>16</a>
</span><span class=lnt id=hl-9-17><a class=lnlinks href=#hl-9-17>17</a>
</span><span class=lnt id=hl-9-18><a class=lnlinks href=#hl-9-18>18</a>
</span><span class=lnt id=hl-9-19><a class=lnlinks href=#hl-9-19>19</a>
</span><span class=lnt id=hl-9-20><a class=lnlinks href=#hl-9-20>20</a>
</span><span class=lnt id=hl-9-21><a class=lnlinks href=#hl-9-21>21</a>
</span><span class=lnt id=hl-9-22><a class=lnlinks href=#hl-9-22>22</a>
</span><span class=lnt id=hl-9-23><a class=lnlinks href=#hl-9-23>23</a>
</span><span class=lnt id=hl-9-24><a class=lnlinks href=#hl-9-24>24</a>
</span><span class=lnt id=hl-9-25><a class=lnlinks href=#hl-9-25>25</a>
</span><span class=lnt id=hl-9-26><a class=lnlinks href=#hl-9-26>26</a>
</span><span class=lnt id=hl-9-27><a class=lnlinks href=#hl-9-27>27</a>
</span><span class=lnt id=hl-9-28><a class=lnlinks href=#hl-9-28>28</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Flyweight</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>operation</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>extrinsic_state</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ConcreteFlyweight</span><span class=p>(</span><span class=n>Flyweight</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>shared_state</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_shared_state</span> <span class=o>=</span> <span class=n>shared_state</span>  <span class=c1># intrinsic</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>operation</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>extrinsic_state</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Shared: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_shared_state</span><span class=si>}</span><span class=s2>, Unique: </span><span class=si>{</span><span class=n>extrinsic_state</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>FlyweightFactory</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>_flyweights</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_flyweight</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>shared_state</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>key</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>shared_state</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_flyweights</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Creating new flyweight&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_flyweights</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>ConcreteFlyweight</span><span class=p>(</span><span class=n>shared_state</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_flyweights</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예</span>
</span></span><span class=line><span class=cl><span class=n>factory</span> <span class=o>=</span> <span class=n>FlyweightFactory</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>fw1</span> <span class=o>=</span> <span class=n>factory</span><span class=o>.</span><span class=n>get_flyweight</span><span class=p>((</span><span class=s2>&#34;Arial&#34;</span><span class=p>,</span> <span class=mi>12</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>fw1</span><span class=o>.</span><span class=n>operation</span><span class=p>(</span><span class=s2>&#34;위치: 100,200&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fw2</span> <span class=o>=</span> <span class=n>factory</span><span class=o>.</span><span class=n>get_flyweight</span><span class=p>((</span><span class=s2>&#34;Arial&#34;</span><span class=p>,</span> <span class=mi>12</span><span class=p>))</span>  <span class=c1># 재사용</span>
</span></span><span class=line><span class=cl><span class=n>fw2</span><span class=o>.</span><span class=n>operation</span><span class=p>(</span><span class=s2>&#34;위치: 150,200&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=-장점과-단점>📌 장점과 단점<a hidden class=anchor aria-hidden=true href=#-장점과-단점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>✅ 장점</td><td>메모리 사용 최소화</td><td>수천~수만 개의 객체가 필요할 때 공유를 통해 리소스를 절약</td></tr><tr><td></td><td>성능 향상</td><td>객체 생성, GC 처리 횟수 감소</td></tr><tr><td></td><td>일관성 유지</td><td>공유 상태로 인해 동일 상태를 통일성 있게 유지 가능</td></tr><tr><td>⚠ 단점</td><td>상태 분리 복잡성</td><td>intrinsic과 extrinsic을 정확히 분리해야 함</td></tr><tr><td></td><td>코드 가독성 저하</td><td>상태 전달 로직이 많아지면 가독성 및 유지보수 어려움</td></tr><tr><td></td><td>조건 제한</td><td>모든 상황에 적용할 수는 없고, 상태 공유가 가능한 경우에만 유효</td></tr></tbody></table><hr><h3 id=-도전-과제-및-해결>📌 도전 과제 및 해결<a hidden class=anchor aria-hidden=true href=#-도전-과제-및-해결>#</a></h3><table><thead><tr><th>도전 과제</th><th>해결 방안</th></tr></thead><tbody><tr><td>상태 분리의 어려움</td><td>도메인 분석을 통해 공유 가능한 상태와 그렇지 않은 상태를 명확히 정의</td></tr><tr><td>관리 복잡도 증가</td><td>객체 풀 관리를 위해 Factory 클래스를 체계적으로 설계</td></tr><tr><td>공유 범위 혼동</td><td>문서화 및 명시적 인터페이스 정의로 오용 방지</td></tr></tbody></table><hr><p>좋습니다. 이어서 <strong>6. 주제에 대한 추가 조사 내용</strong>을 중심으로 Flyweight Pattern의 세부 내용을 정리하겠습니다.</p><hr><h2 id=6-주제에-대한-추가-조사-내용>6. 주제에 대한 추가 조사 내용<a hidden class=anchor aria-hidden=true href=#6-주제에-대한-추가-조사-내용>#</a></h2><h3 id=-패턴-이름과-분류>📌 패턴 이름과 분류<a hidden class=anchor aria-hidden=true href=#-패턴-이름과-분류>#</a></h3><table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>이름</td><td>Flyweight Pattern</td></tr><tr><td>분류</td><td>구조 디자인 패턴 (Structural Design Pattern), GoF 패턴 중 하나</td></tr></tbody></table><hr><h3 id=-의도-intent>📌 의도 (Intent)<a hidden class=anchor aria-hidden=true href=#-의도-intent>#</a></h3><ul><li><p><strong>수많은 유사 객체를 메모리 절약을 위해 공유해 사용하는 구조 패턴</strong></p></li><li><p><strong>공통 속성(intrinsic state)은 공유</strong>, 개별 속성(extrinsic state)은 외부에서 주입</p></li></ul><hr><h3 id=-다른-이름-also-known-as>📌 다른 이름 (Also Known As)<a hidden class=anchor aria-hidden=true href=#-다른-이름-also-known-as>#</a></h3><ul><li><strong>Object Pooling Pattern</strong>과 일부 상황에서 유사하나, 개념적으로는 Flyweight은 <strong>&ldquo;객체 공유&rdquo;</strong>, Object Pool은 **&ldquo;객체 재사용&rdquo;**에 초점</li></ul><hr><h3 id=-동기-motivation--forces>📌 동기 (Motivation / Forces)<a hidden class=anchor aria-hidden=true href=#-동기-motivation--forces>#</a></h3><blockquote><p>“비슷한 객체가 수천 개 필요할 때, 공통 속성은 공유하고 고유 속성만 분리 저장한다면 큰 메모리 절약이 가능하지 않을까?”</p></blockquote><p>예: 문서 편집기에서 수만 개의 글자가 화면에 그려져야 할 때, 글꼴(Font), 스타일 등은 공유하고 위치(x, y)만 개별 관리한다면 훨씬 효율적입니다.</p><hr><h3 id=-적용-가능성-applicability>📌 적용 가능성 (Applicability)<a hidden class=anchor aria-hidden=true href=#-적용-가능성-applicability>#</a></h3><table><thead><tr><th>조건</th><th>설명</th></tr></thead><tbody><tr><td>동일한 속성을 가진 객체가 다수 생성되는 경우</td><td>UI 구성 요소, 게임 객체 등</td></tr><tr><td>메모리 사용량이 문제인 시스템</td><td>제한된 리소스를 사용하는 내장 시스템, 모바일 환경</td></tr><tr><td>객체의 상태를 외부에서 관리할 수 있는 경우</td><td>intrinsic 상태와 extrinsic 상태를 분리 가능해야 함</td></tr></tbody></table><hr><h3 id=-구조-structure>📌 구조 (Structure)<a hidden class=anchor aria-hidden=true href=#-구조-structure>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>    +-------------+        +--------------------+
</span></span><span class=line><span class=cl>    |   Client    | -----&gt; | FlyweightFactory   |
</span></span><span class=line><span class=cl>    +-------------+        +--------------------+
</span></span><span class=line><span class=cl>                                 |
</span></span><span class=line><span class=cl>              +-----------------+------------------+
</span></span><span class=line><span class=cl>              |                                    |
</span></span><span class=line><span class=cl>    +----------------+                 +----------------------+
</span></span><span class=line><span class=cl>    | ConcreteFlyweight |             | UnsharedFlyweight (*) |
</span></span><span class=line><span class=cl>    +----------------+                 +----------------------+
</span></span><span class=line><span class=cl>              |                                    |
</span></span><span class=line><span class=cl>      Intrinsic State                     Extrinsic + Intrinsic
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>UnsharedFlyweight</strong>: 꼭 공유되지 않아야 할 객체(복합 상태 포함)는 이 클래스로 관리</li></ul><hr><h3 id=-참여자-participants>📌 참여자 (Participants)<a hidden class=anchor aria-hidden=true href=#-참여자-participants>#</a></h3><table><thead><tr><th>역할</th><th>설명</th></tr></thead><tbody><tr><td>Flyweight</td><td>공유 객체의 인터페이스 정의</td></tr><tr><td>ConcreteFlyweight</td><td>공유 가능한 객체 구현체</td></tr><tr><td>UnsharedConcreteFlyweight</td><td>공유되지 않는 객체</td></tr><tr><td>FlyweightFactory</td><td>객체 생성, 캐싱 및 재사용 처리</td></tr><tr><td>Client</td><td>Flyweight 객체를 사용하고, 외부 상태를 전달</td></tr></tbody></table><hr><h3 id=-협력-collaboration>📌 협력 (Collaboration)<a hidden class=anchor aria-hidden=true href=#-협력-collaboration>#</a></h3><ul><li><p>클라이언트는 <code>FlyweightFactory</code>를 통해 공유 객체를 요청</p></li><li><p>Extrinsic 상태는 매 호출마다 클라이언트가 직접 주입</p></li><li><p>Flyweight 객체는 Intrinsic 상태만을 내부에 유지</p></li></ul><hr><h3 id=-결과-consequences>📌 결과 (Consequences)<a hidden class=anchor aria-hidden=true href=#-결과-consequences>#</a></h3><table><thead><tr><th>효과</th><th>설명</th></tr></thead><tbody><tr><td>✅ 메모리 사용 감소</td><td>공유 가능한 객체는 메모리 공간을 하나만 사용</td></tr><tr><td>✅ 성능 향상</td><td>객체 생성 및 소멸 비용 절감</td></tr><tr><td>⚠ 설계 복잡도 증가</td><td>상태 분리 필요로 인한 설계 난이도 상승</td></tr><tr><td>⚠ 디버깅 어려움</td><td>외부 상태 주입 구조는 추적이 어려움</td></tr></tbody></table><hr><h3 id=-구현-implementation>📌 구현 (Implementation)<a hidden class=anchor aria-hidden=true href=#-구현-implementation>#</a></h3><ul><li><p><strong>객체 Pool 구성</strong>: Factory가 key 기반으로 관리 (<code>dict</code>, <code>map</code> 등)</p></li><li><p><strong>intrinsic / extrinsic 명시</strong>: 설계단계에서 상태 분리를 명확히 문서화</p></li><li><p><strong>불변 객체 사용 권장</strong>: intrinsic 상태는 Immutable로 구현</p></li></ul><hr><h3 id=-샘플-코드>📌 샘플 코드<a hidden class=anchor aria-hidden=true href=#-샘플-코드>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15>15</a>
</span><span class=lnt id=hl-11-16><a class=lnlinks href=#hl-11-16>16</a>
</span><span class=lnt id=hl-11-17><a class=lnlinks href=#hl-11-17>17</a>
</span><span class=lnt id=hl-11-18><a class=lnlinks href=#hl-11-18>18</a>
</span><span class=lnt id=hl-11-19><a class=lnlinks href=#hl-11-19>19</a>
</span><span class=lnt id=hl-11-20><a class=lnlinks href=#hl-11-20>20</a>
</span><span class=lnt id=hl-11-21><a class=lnlinks href=#hl-11-21>21</a>
</span><span class=lnt id=hl-11-22><a class=lnlinks href=#hl-11-22>22</a>
</span><span class=lnt id=hl-11-23><a class=lnlinks href=#hl-11-23>23</a>
</span><span class=lnt id=hl-11-24><a class=lnlinks href=#hl-11-24>24</a>
</span><span class=lnt id=hl-11-25><a class=lnlinks href=#hl-11-25>25</a>
</span><span class=lnt id=hl-11-26><a class=lnlinks href=#hl-11-26>26</a>
</span><span class=lnt id=hl-11-27><a class=lnlinks href=#hl-11-27>27</a>
</span><span class=lnt id=hl-11-28><a class=lnlinks href=#hl-11-28>28</a>
</span><span class=lnt id=hl-11-29><a class=lnlinks href=#hl-11-29>29</a>
</span><span class=lnt id=hl-11-30><a class=lnlinks href=#hl-11-30>30</a>
</span><span class=lnt id=hl-11-31><a class=lnlinks href=#hl-11-31>31</a>
</span><span class=lnt id=hl-11-32><a class=lnlinks href=#hl-11-32>32</a>
</span><span class=lnt id=hl-11-33><a class=lnlinks href=#hl-11-33>33</a>
</span><span class=lnt id=hl-11-34><a class=lnlinks href=#hl-11-34>34</a>
</span><span class=lnt id=hl-11-35><a class=lnlinks href=#hl-11-35>35</a>
</span><span class=lnt id=hl-11-36><a class=lnlinks href=#hl-11-36>36</a>
</span><span class=lnt id=hl-11-37><a class=lnlinks href=#hl-11-37>37</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>TreeType</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>color</span><span class=p>,</span> <span class=n>texture</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>color</span> <span class=o>=</span> <span class=n>color</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>texture</span> <span class=o>=</span> <span class=n>texture</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>draw</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Drawing </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2> at (</span><span class=si>{</span><span class=n>x</span><span class=si>}</span><span class=s2>,</span><span class=si>{</span><span class=n>y</span><span class=si>}</span><span class=s2>) with </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>color</span><span class=si>}</span><span class=s2> and </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>texture</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TreeFactory</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>_tree_types</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@classmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_tree_type</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>color</span><span class=p>,</span> <span class=n>texture</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>key</span> <span class=o>=</span> <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>color</span><span class=p>,</span> <span class=n>texture</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_tree_types</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Creating new TreeType&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>cls</span><span class=o>.</span><span class=n>_tree_types</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>TreeType</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>color</span><span class=p>,</span> <span class=n>texture</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_tree_types</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Tree</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>tree_type</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>x</span> <span class=o>=</span> <span class=n>x</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>y</span> <span class=o>=</span> <span class=n>y</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>tree_type</span> <span class=o>=</span> <span class=n>tree_type</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>draw</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>tree_type</span><span class=o>.</span><span class=n>draw</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>forest</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=n>tree_type</span> <span class=o>=</span> <span class=n>TreeFactory</span><span class=o>.</span><span class=n>get_tree_type</span><span class=p>(</span><span class=s2>&#34;Oak&#34;</span><span class=p>,</span> <span class=s2>&#34;Green&#34;</span><span class=p>,</span> <span class=s2>&#34;Rough&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>forest</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>Tree</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=n>tree_type</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>forest</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>Tree</span><span class=p>(</span><span class=mi>30</span><span class=p>,</span> <span class=mi>40</span><span class=p>,</span> <span class=n>tree_type</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>tree</span> <span class=ow>in</span> <span class=n>forest</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>tree</span><span class=o>.</span><span class=n>draw</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=-알려진-사용-known-uses>📌 알려진 사용 (Known Uses)<a hidden class=anchor aria-hidden=true href=#-알려진-사용-known-uses>#</a></h3><table><thead><tr><th>시스템</th><th>설명</th></tr></thead><tbody><tr><td>Java AWT</td><td><code>Character</code> 객체의 공유</td></tr><tr><td>게임 엔진</td><td>파티클, 총알, 배경 타일 등 대량 객체를 Flyweight로 관리</td></tr><tr><td>텍스트 렌더링</td><td>문자의 스타일을 공유하고 위치만 개별 지정</td></tr><tr><td>IDE 내부</td><td>구문 강조 색상, 토큰 정보의 공유 처리</td></tr></tbody></table><hr><h3 id=-관련-패턴-related-patterns>📌 관련 패턴 (Related Patterns)<a hidden class=anchor aria-hidden=true href=#-관련-패턴-related-patterns>#</a></h3><table><thead><tr><th>패턴</th><th>차이점 및 관계</th></tr></thead><tbody><tr><td><strong>Singleton</strong></td><td>Flyweight 객체를 싱글턴으로 관리할 수도 있음</td></tr><tr><td><strong>Factory Method</strong></td><td>Flyweight 객체 생성을 Factory가 담당</td></tr><tr><td><strong>Object Pool</strong></td><td>자원을 재사용한다는 점에서 유사하지만, Flyweight은 상태 공유에 집중</td></tr><tr><td><strong>Composite</strong></td><td>복잡한 공유 구조가 필요한 경우 함께 사용 가능</td></tr></tbody></table><hr><p>다음 단계에서는 다음 내용을 이어서 제공하겠습니다:</p><ul><li><p><strong>7. 추가로 알아야 할 내용</strong></p></li><li><p><strong>8. 2025년 기준 최신 동향</strong></p></li><li><p><strong>9. 주목할 기술 요소</strong></p></li><li><p><strong>10. 향후 전망</strong></p></li><li><p><strong>11~12. 학습 및 연계 분야 정리</strong></p></li><li><p><strong>13~14. 용어 정리 및 출처</strong></p></li></ul><p><a href=https://simpletechtalks.com/flyweight-design-pattern/><figure><img alt="Flyweight Design Pattern Explained With Simple Example: Structural &mldr;" loading=lazy src="https://tse1.mm.bing.net/th?id=OIP.XmECBd9n09M-NT0QpNpy2gHaF7&pid=Api"></figure></a></p><p>계속해서 Flyweight 패턴에 대한 심화 내용을 정리하겠습니다.</p><hr><h2 id=7-실무-적용-예시>7. 실무 적용 예시<a hidden class=anchor aria-hidden=true href=#7-실무-적용-예시>#</a></h2><table><thead><tr><th>적용 분야</th><th>사례</th><th>설명</th></tr></thead><tbody><tr><td><strong>텍스트 렌더링</strong></td><td>텍스트 에디터</td><td>각 문자의 글꼴, 크기, 스타일 등 공통 속성을 공유하고, 위치 정보만 개별 관리하여 메모리 사용을 최적화합니다.</td></tr><tr><td><strong>게임 개발</strong></td><td>총알, 적 캐릭터, 배경 요소</td><td>동일한 그래픽 리소스를 공유하여 수천 개의 객체를 효율적으로 관리합니다.</td></tr><tr><td><strong>지도 서비스</strong></td><td>마커 아이콘</td><td>동일한 아이콘 이미지를 공유하고, 위치 정보만 개별 관리하여 메모리 사용을 줄입니다.</td></tr><tr><td><strong>GUI 프레임워크</strong></td><td>버튼, 아이콘 등 위젯</td><td>동일한 스타일의 UI 요소를 공유하여 메모리 사용을 최소화합니다.</td></tr></tbody></table><hr><h2 id=8-2025년-기준-최신-동향>8. 2025년 기준 최신 동향<a hidden class=anchor aria-hidden=true href=#8-2025년-기준-최신-동향>#</a></h2><table><thead><tr><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>AI 기반 시스템</strong></td><td>디자인 패턴 적용</td><td>AI 기반 시스템에서도 Flyweight 패턴을 활용하여 메모리 사용을 최적화하는 사례가 증가하고 있습니다.</td></tr><tr><td><strong>클라우드 네이티브 아키텍처</strong></td><td>리소스 최적화</td><td>클라우드 환경에서 리소스를 효율적으로 사용하기 위해 Flyweight 패턴이 적용되고 있습니다.</td></tr><tr><td><strong>게임 엔진</strong></td><td>객체 관리 최적화</td><td>대규모 게임에서 수많은 객체를 효율적으로 관리하기 위해 Flyweight 패턴이 활용되고 있습니다.</td></tr></tbody></table><hr><h2 id=9-주목할-기술-요소>9. 주목할 기술 요소<a hidden class=anchor aria-hidden=true href=#9-주목할-기술-요소>#</a></h2><table><thead><tr><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>불변 객체 (Immutable Object)</strong></td><td>상태 공유</td><td>Flyweight 객체는 변경되지 않는 상태를 공유하여 일관성을 유지합니다.</td></tr><tr><td><strong>객체 풀링 (Object Pooling)</strong></td><td>리소스 재사용</td><td>Flyweight 패턴과 함께 객체 풀링을 사용하여 객체 생성을 최소화합니다.</td></tr><tr><td><strong>메모리 분석 도구</strong></td><td>최적화 도구</td><td>VisualVM, Heap Dump 분석 등을 통해 메모리 사용을 분석하고 최적화합니다.</td></tr></tbody></table><hr><h2 id=10-향후-전망>10. 향후 전망<a hidden class=anchor aria-hidden=true href=#10-향후-전망>#</a></h2><table><thead><tr><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>메모리 최적화 중요성 증가</strong></td><td>리소스 효율성</td><td>대규모 시스템에서 메모리 사용을 최적화하는 것이 더욱 중요해지고 있습니다.</td></tr><tr><td><strong>디자인 패턴의 재조명</strong></td><td>구조적 설계</td><td>구조적 설계를 위한 디자인 패턴의 중요성이 다시 부각되고 있습니다.</td></tr><tr><td><strong>자동화 도구의 발전</strong></td><td>패턴 적용 지원</td><td>디자인 패턴 적용을 지원하는 자동화 도구의 발전으로 개발 효율성이 향상되고 있습니다.</td></tr></tbody></table><hr><h2 id=11-추가-학습-주제>11. 추가 학습 주제<a hidden class=anchor aria-hidden=true href=#11-추가-학습-주제>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>설명</th></tr></thead><tbody><tr><td><strong>디자인 패턴</strong></td><td>구조적 패턴</td><td>Flyweight, Proxy, Composite 등 구조적 디자인 패턴의 이해</td></tr><tr><td><strong>메모리 관리</strong></td><td>객체 풀링</td><td>객체 생성을 최소화하고 재사용하는 기법</td></tr><tr><td><strong>성능 최적화</strong></td><td>프로파일링 도구</td><td>메모리 사용을 분석하고 최적화하는 도구의 활용</td></tr></tbody></table><hr><h2 id=12-연계-학습-주제>12. 연계 학습 주제<a hidden class=anchor aria-hidden=true href=#12-연계-학습-주제>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>설명</th></tr></thead><tbody><tr><td><strong>프로그래밍 언어</strong></td><td>Java, C++, Python</td><td>Flyweight 패턴을 구현하기 위한 언어별 특성 이해</td></tr><tr><td><strong>프레임워크</strong></td><td>Spring, .NET</td><td>프레임워크에서의 Flyweight 패턴 적용 사례</td></tr><tr><td><strong>도구</strong></td><td>VisualVM, JProfiler</td><td>메모리 사용 분석을 위한 도구 활용</td></tr></tbody></table><hr><h2 id=용어-정리-2>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-2>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td><strong>Intrinsic State</strong></td><td>공유 가능한 객체의 내부 상태로, 변경되지 않는 속성</td></tr><tr><td><strong>Extrinsic State</strong></td><td>객체의 외부 상태로, 개별 객체마다 다른 속성</td></tr><tr><td><strong>Flyweight</strong></td><td>공유 가능한 객체를 나타내는 디자인 패턴의 구성 요소</td></tr><tr><td><strong>Flyweight Factory</strong></td><td>Flyweight 객체를 생성하고 관리하는 역할을 하는 클래스</td></tr></tbody></table><hr><h2 id=참고-및-출처-2>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-2>#</a></h2><ul><li><p><a href=https://www.geeksforgeeks.org/flyweight-design-pattern/>Flyweight Design Pattern - GeeksforGeeks</a></p></li><li><p><a href=https://refactoring.guru/design-patterns/flyweight>Flyweight Pattern - Refactoring.Guru</a></p></li><li><p><a href=https://belatrix.globant.com/us-en/blog/tech-trends/flyweight-design-patterns/>Flyweight Design Patterns: Streamline Your Code for Efficiency</a></p></li><li><p><a href=https://dev.to/dazevedo/flyweight-pattern-in-c-optimize-your-memory-usage-26pe>Flyweight Pattern in C# – Optimize Your Memory Usage!</a></p></li></ul><hr><p>Flyweight Pattern (플라이웨이트 패턴)에 대해 체계적으로 조사하고 분석해보겠습니다.</p><p>이제 수집한 정보를 바탕으로 Flyweight Pattern (플라이웨이트 패턴)에 대해 체계적으로 조사하고 분석하겠습니다.</p><h1 id=flyweight-pattern-플라이웨이트-패턴-종합-분석>Flyweight Pattern (플라이웨이트 패턴) 종합 분석<a hidden class=anchor aria-hidden=true href=#flyweight-pattern-플라이웨이트-패턴-종합-분석>#</a></h1><h2 id=1-주제-분류-검토>1. 주제 분류 검토<a hidden class=anchor aria-hidden=true href=#1-주제-분류-검토>#</a></h2><p><strong>Computer Science and Engineering > Software Design and Architecture > Software Design Patterns > GoF > Structural Design Patterns</strong></p><p>이 분류는 <strong>적절합니다</strong>. 플라이웨이트 패턴은 GoF(Gang of Four)에서 정의한 23개 디자인 패턴 중 구조 패턴(Structural Patterns) 7개 중 하나로, 객체의 구조적 구성과 메모리 효율성을 통한 시스템 구조 최적화에 관여하는 패턴입니다.</p><h2 id=2-요약-설명-200자-내외>2. 요약 설명 (200자 내외)<a hidden class=anchor aria-hidden=true href=#2-요약-설명-200자-내외>#</a></h2><p>플라이웨이트 패턴은 대량의 유사한 객체들 간에 공통 상태를 공유하여 메모리 사용량을 최소화하는 구조적 디자인 패턴입니다. 고유 상태(Intrinsic State)와 외부 상태(Extrinsic State)를 분리하여, 공유 가능한 고유 상태는 하나의 플라이웨이트 객체에 저장하고 외부 상태는 컨텍스트에서 관리함으로써 메모리 효율성과 성능을 향상시킵니다.</p><h2 id=3-전체-개요-250자-내외-1>3. 전체 개요 (250자 내외)<a hidden class=anchor aria-hidden=true href=#3-전체-개요-250자-내외-1>#</a></h2><p>플라이웨이트 패턴은 메모리 집약적인 애플리케이션에서 수많은 유사 객체의 메모리 사용량을 줄이기 위한 GoF 구조 패턴입니다. 객체의 상태를 고유 상태와 외부 상태로 분리하여, 공유 가능한 고유 상태만을 플라이웨이트 객체에 저장하고 팩토리를 통해 인스턴스를 관리합니다. 게임 개발, 텍스트 에디터, 웹 애플리케이션 등에서 대량의 비슷한 객체가 필요한 상황에 적용되며, 메모리 효율성과 성능 최적화를 동시에 달성할 수 있습니다.</p><hr><h2 id=4-핵심-개념-1>4. 핵심 개념<a hidden class=anchor aria-hidden=true href=#4-핵심-개념-1>#</a></h2><h3 id=41-기본-개념>4.1 기본 개념<a hidden class=anchor aria-hidden=true href=#41-기본-개념>#</a></h3><ul><li><strong>플라이웨이트 (Flyweight)</strong>: 공유 가능한 경량 객체로, 고유 상태만을 저장</li><li><strong>고유 상태 (Intrinsic State)</strong>: 객체 간 공유 가능한 불변 상태 정보</li><li><strong>외부 상태 (Extrinsic State)</strong>: 컨텍스트에 의존적이며 공유할 수 없는 가변 상태 정보</li><li><strong>팩토리 패턴 통합</strong>: 플라이웨이트 객체의 생성과 관리를 담당</li></ul><h3 id=42-메모리-최적화-원리>4.2 메모리 최적화 원리<a hidden class=anchor aria-hidden=true href=#42-메모리-최적화-원리>#</a></h3><ul><li><strong>객체 공유</strong>: 동일한 고유 상태를 가진 객체들의 인스턴스 재사용</li><li><strong>상태 분리</strong>: 공유 가능한 상태와 개별 상태의 명확한 구분</li><li><strong>캐싱 메커니즘</strong>: 생성된 플라이웨이트 객체의 풀(Pool) 관리</li></ul><hr><h2 id=제1부-이론적-기초>제1부: 이론적 기초<a hidden class=anchor aria-hidden=true href=#제1부-이론적-기초>#</a></h2><h2 id=5-배경-및-목적>5. 배경 및 목적<a hidden class=anchor aria-hidden=true href=#5-배경-및-목적>#</a></h2><h3 id=51-배경>5.1 배경<a hidden class=anchor aria-hidden=true href=#51-배경>#</a></h3><p>플라이웨이트 패턴은 1990년 Paul Calder와 Mark Linton에 의해 WYSIWYG 문서 편집기에서 글리프(Glyph) 정보를 효율적으로 처리하기 위해 최초로 제안되었습니다. 이후 GoF에 의해 공식화되어 23개 디자인 패턴 중 하나로 정립되었습니다.</p><h3 id=52-목적-및-필요성>5.2 목적 및 필요성<a hidden class=anchor aria-hidden=true href=#52-목적-및-필요성>#</a></h3><ul><li><strong>메모리 사용량 최소화</strong>: 대량의 유사 객체로 인한 메모리 부족 문제 해결</li><li><strong>성능 최적화</strong>: 객체 생성 비용 및 가비지 컬렉션 오버헤드 감소</li><li><strong>확장성 향상</strong>: 메모리 효율성을 통한 시스템 확장성 개선</li><li><strong>리소스 관리</strong>: 한정된 시스템 리소스의 효율적 활용</li></ul><h2 id=6-주요-기능-및-역할>6. 주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#6-주요-기능-및-역할>#</a></h2><h3 id=61-핵심-기능>6.1 핵심 기능<a hidden class=anchor aria-hidden=true href=#61-핵심-기능>#</a></h3><ul><li><strong>상태 분리</strong>: 고유 상태와 외부 상태의 체계적 분리</li><li><strong>객체 풀링</strong>: 생성된 플라이웨이트 객체의 중앙 집중식 관리</li><li><strong>투명한 공유</strong>: 클라이언트가 객체 공유를 인식하지 못하는 투명성 제공</li><li><strong>동적 할당</strong>: 필요에 따른 플라이웨이트 객체의 동적 생성 및 할당</li></ul><h3 id=62-주요-역할>6.2 주요 역할<a hidden class=anchor aria-hidden=true href=#62-주요-역할>#</a></h3><ul><li><strong>메모리 관리자</strong>: 시스템 메모리 사용량의 체계적 관리</li><li><strong>성능 최적화기</strong>: 객체 생성 비용 및 메모리 접근 성능 향상</li><li><strong>리소스 공유 중개자</strong>: 다중 컨텍스트 간 리소스 공유 조정</li></ul><h2 id=7-특징-및-핵심-원칙>7. 특징 및 핵심 원칙<a hidden class=anchor aria-hidden=true href=#7-특징-및-핵심-원칙>#</a></h2><h3 id=71-주요-특징>7.1 주요 특징<a hidden class=anchor aria-hidden=true href=#71-주요-특징>#</a></h3><ul><li><strong>불변성 (Immutability)</strong>: 플라이웨이트 객체의 고유 상태는 변경 불가</li><li><strong>컨텍스트 독립성</strong>: 플라이웨이트는 컨텍스트에 무관하게 재사용 가능</li><li><strong>투명성</strong>: 클라이언트는 객체 공유 여부를 알 필요 없음</li><li><strong>확장성</strong>: 새로운 플라이웨이트 타입의 추가가 용이</li></ul><h3 id=72-핵심-원칙>7.2 핵심 원칙<a hidden class=anchor aria-hidden=true href=#72-핵심-원칙>#</a></h3><ul><li><strong>단일 책임 원칙</strong>: 각 플라이웨이트는 하나의 고유 상태만 관리</li><li><strong>개방-폐쇄 원칙</strong>: 새로운 플라이웨이트 타입 추가 시 기존 코드 수정 불필요</li><li><strong>의존성 역전 원칙</strong>: 클라이언트는 구체 클래스가 아닌 인터페이스에 의존</li></ul><h2 id=8-주요-원리-및-작동-원리>8. 주요 원리 및 작동 원리<a hidden class=anchor aria-hidden=true href=#8-주요-원리-및-작동-원리>#</a></h2><h3 id=81-상태-분리-원리>8.1 상태 분리 원리<a hidden class=anchor aria-hidden=true href=#81-상태-분리-원리>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1>1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2>2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>전체 상태 = 고유 상태 (Intrinsic) ∪ 외부 상태 (Extrinsic)
</span></span><span class=line><span class=cl>고유 상태 = 모든 객체 간 공유 가능한 불변 정보
</span></span><span class=line><span class=cl>외부 상태 = 컨텍스트별 개별 관리되는 가변 정보
</span></span></code></pre></td></tr></table></div></div><h3 id=82-메모리-최적화-원리>8.2 메모리 최적화 원리<a hidden class=anchor aria-hidden=true href=#82-메모리-최적화-원리>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>메모리 절약량 = (총 객체 수 × 객체 크기) - (플라이웨이트 수 × 플라이웨이트 크기 + 외부 상태 총 크기)
</span></span></code></pre></td></tr></table></div></div><h3 id=83-작동-워크플로우>8.3 작동 워크플로우<a hidden class=anchor aria-hidden=true href=#83-작동-워크플로우>#</a></h3><ol><li><strong>요청 접수</strong>: 클라이언트가 팩토리에 특정 고유 상태의 객체 요청</li><li><strong>캐시 확인</strong>: 팩토리가 기존 플라이웨이트 풀에서 해당 객체 존재 확인</li><li><strong>객체 반환/생성</strong>: 존재 시 기존 객체 반환, 미존재 시 새 객체 생성 후 풀에 저장</li><li><strong>컨텍스트 적용</strong>: 클라이언트가 외부 상태를 매개변수로 전달하여 메서드 실행</li></ol><hr><h2 id=제2부-구조-및-구현>제2부: 구조 및 구현<a hidden class=anchor aria-hidden=true href=#제2부-구조-및-구현>#</a></h2><h2 id=9-구조-및-아키텍처>9. 구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#9-구조-및-아키텍처>#</a></h2><h3 id=91-필수-구성요소>9.1 필수 구성요소<a hidden class=anchor aria-hidden=true href=#91-필수-구성요소>#</a></h3><h4 id=911-flyweight-플라이웨이트-인터페이스>9.1.1 Flyweight (플라이웨이트 인터페이스)<a hidden class=anchor aria-hidden=true href=#911-flyweight-플라이웨이트-인터페이스>#</a></h4><ul><li><strong>기능</strong>: 플라이웨이트 객체들이 구현해야 할 공통 인터페이스 정의</li><li><strong>역할</strong>: 외부 상태를 매개변수로 받아 작업을 수행하는 메서드 선언</li><li><strong>특징</strong>: 고유 상태와 외부 상태를 명확히 구분하는 메서드 시그니처 제공</li></ul><h4 id=912-concreteflyweight-구체적-플라이웨이트>9.1.2 ConcreteFlyweight (구체적 플라이웨이트)<a hidden class=anchor aria-hidden=true href=#912-concreteflyweight-구체적-플라이웨이트>#</a></h4><ul><li><strong>기능</strong>: Flyweight 인터페이스의 구체적 구현</li><li><strong>역할</strong>: 고유 상태 저장 및 외부 상태를 이용한 작업 수행</li><li><strong>특징</strong>: 불변 객체로 설계되어 스레드 안전성 보장</li></ul><h4 id=913-flyweightfactory-플라이웨이트-팩토리>9.1.3 FlyweightFactory (플라이웨이트 팩토리)<a hidden class=anchor aria-hidden=true href=#913-flyweightfactory-플라이웨이트-팩토리>#</a></h4><ul><li><strong>기능</strong>: 플라이웨이트 객체의 생성 및 관리</li><li><strong>역할</strong>: 객체 풀 관리, 중복 생성 방지, 적절한 플라이웨이트 반환</li><li><strong>특징</strong>: 싱글톤 패턴 적용으로 전역 접근 제공</li></ul><h4 id=914-context-컨텍스트>9.1.4 Context (컨텍스트)<a hidden class=anchor aria-hidden=true href=#914-context-컨텍스트>#</a></h4><ul><li><strong>기능</strong>: 외부 상태 저장 및 플라이웨이트 객체 참조 관리</li><li><strong>역할</strong>: 플라이웨이트와 외부 상태를 결합하여 완전한 객체 상태 구현</li><li><strong>특징</strong>: 플라이웨이트별 개별 인스턴스 유지</li></ul><h3 id=92-선택-구성요소>9.2 선택 구성요소<a hidden class=anchor aria-hidden=true href=#92-선택-구성요소>#</a></h3><h4 id=921-unsharedconcreteflyweight-비공유-구체적-플라이웨이트>9.2.1 UnsharedConcreteFlyweight (비공유 구체적 플라이웨이트)<a hidden class=anchor aria-hidden=true href=#921-unsharedconcreteflyweight-비공유-구체적-플라이웨이트>#</a></h4><ul><li><strong>기능</strong>: 공유되지 않는 플라이웨이트 구현</li><li><strong>역할</strong>: 특별한 경우에 대한 개별 객체 처리</li><li><strong>특징</strong>: 일반적인 플라이웨이트 패턴에서는 사용되지 않음</li></ul><h3 id=93-구조-다이어그램>9.3 구조 다이어그램<a hidden class=anchor aria-hidden=true href=#93-구조-다이어그램>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1>1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2>2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3>3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4>4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5>5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6>6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Client
</span></span><span class=line><span class=cl>  ↓ (요청)
</span></span><span class=line><span class=cl>FlyweightFactory
</span></span><span class=line><span class=cl>  ↓ (생성/관리)
</span></span><span class=line><span class=cl>Flyweight Interface
</span></span><span class=line><span class=cl>  ↑ (구현)
</span></span><span class=line><span class=cl>ConcreteFlyweight ←→ Context (외부 상태)
</span></span></code></pre></td></tr></table></div></div><h2 id=10-구현-기법>10. 구현 기법<a hidden class=anchor aria-hidden=true href=#10-구현-기법>#</a></h2><h3 id=101-기본-구현-기법>10.1 기본 구현 기법<a hidden class=anchor aria-hidden=true href=#101-기본-구현-기법>#</a></h3><h4 id=1011-factory-method-패턴-활용>10.1.1 Factory Method 패턴 활용<a hidden class=anchor aria-hidden=true href=#1011-factory-method-패턴-활용>#</a></h4><ul><li><strong>정의</strong>: 플라이웨이트 객체 생성을 전담하는 팩토리 메서드 구현</li><li><strong>구성</strong>: 해시맵 기반 객체 풀, 존재 여부 확인 로직, 새 객체 생성 로직</li><li><strong>목적</strong>: 객체 생성 비용 최소화 및 중복 인스턴스 방지</li><li><strong>실제 예시</strong>:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1> 1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2> 2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3> 3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4> 4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5> 5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6> 6</a>
</span><span class=lnt id=hl-15-7><a class=lnlinks href=#hl-15-7> 7</a>
</span><span class=lnt id=hl-15-8><a class=lnlinks href=#hl-15-8> 8</a>
</span><span class=lnt id=hl-15-9><a class=lnlinks href=#hl-15-9> 9</a>
</span><span class=lnt id=hl-15-10><a class=lnlinks href=#hl-15-10>10</a>
</span><span class=lnt id=hl-15-11><a class=lnlinks href=#hl-15-11>11</a>
</span><span class=lnt id=hl-15-12><a class=lnlinks href=#hl-15-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>FontFactory</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>Font</span><span class=o>&gt;</span><span class=w> </span><span class=n>fontPool</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=o>&lt;&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Font</span><span class=w> </span><span class=nf>getFont</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Font</span><span class=w> </span><span class=n>font</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fontPool</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>key</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>font</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>font</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConcreteFont</span><span class=p>(</span><span class=n>key</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>fontPool</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>font</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>font</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=1012-상태-분리-기법>10.1.2 상태 분리 기법<a hidden class=anchor aria-hidden=true href=#1012-상태-분리-기법>#</a></h4><ul><li><strong>정의</strong>: 객체 상태를 고유 상태와 외부 상태로 체계적 분리</li><li><strong>구성</strong>: 불변 고유 상태 필드, 외부 상태 매개변수, 상태 결합 메서드</li><li><strong>목적</strong>: 공유 가능한 상태와 개별 상태의 명확한 구분</li><li><strong>실제 예시</strong>:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1>1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2>2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3>3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4>4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5>5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6>6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Character</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>letter</span><span class=p>,</span> <span class=n>font_family</span><span class=p>):</span>  <span class=c1># 고유 상태</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>letter</span> <span class=o>=</span> <span class=n>letter</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>font_family</span> <span class=o>=</span> <span class=n>font_family</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>display</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>color</span><span class=p>):</span>  <span class=c1># 외부 상태를 매개변수로 전달</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Display </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>letter</span><span class=si>}</span><span class=s2> at (</span><span class=si>{</span><span class=n>x</span><span class=si>}</span><span class=s2>, </span><span class=si>{</span><span class=n>y</span><span class=si>}</span><span class=s2>) in </span><span class=si>{</span><span class=n>color</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=1013-캐싱-및-풀링-기법>10.1.3 캐싱 및 풀링 기법<a hidden class=anchor aria-hidden=true href=#1013-캐싱-및-풀링-기법>#</a></h4><ul><li><strong>정의</strong>: 생성된 플라이웨이트 객체의 메모리 기반 캐싱</li><li><strong>구성</strong>: HashMap/Dictionary 기반 저장소, LRU 캐시 정책, 약한 참조 활용</li><li><strong>목적</strong>: 빠른 객체 접근 및 메모리 효율성 달성</li><li><strong>실제 예시</strong>:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1> 1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2> 2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3> 3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4> 4</a>
</span><span class=lnt id=hl-17-5><a class=lnlinks href=#hl-17-5> 5</a>
</span><span class=lnt id=hl-17-6><a class=lnlinks href=#hl-17-6> 6</a>
</span><span class=lnt id=hl-17-7><a class=lnlinks href=#hl-17-7> 7</a>
</span><span class=lnt id=hl-17-8><a class=lnlinks href=#hl-17-8> 8</a>
</span><span class=lnt id=hl-17-9><a class=lnlinks href=#hl-17-9> 9</a>
</span><span class=lnt id=hl-17-10><a class=lnlinks href=#hl-17-10>10</a>
</span><span class=lnt id=hl-17-11><a class=lnlinks href=#hl-17-11>11</a>
</span><span class=lnt id=hl-17-12><a class=lnlinks href=#hl-17-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>class</span> <span class=nx>FlyweightFactory</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>flyweights</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>getFlyweight</span><span class=p>(</span><span class=nx>sharedState</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=k>this</span><span class=p>.</span><span class=nx>flyweights</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=nx>sharedState</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>flyweights</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>sharedState</span><span class=p>,</span> <span class=k>new</span> <span class=nx>ConcreteFlyweight</span><span class=p>(</span><span class=nx>sharedState</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>flyweights</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>sharedState</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=102-고급-구현-기법>10.2 고급 구현 기법<a hidden class=anchor aria-hidden=true href=#102-고급-구현-기법>#</a></h3><h4 id=1021-약한-참조-weak-reference-활용>10.2.1 약한 참조 (Weak Reference) 활용<a hidden class=anchor aria-hidden=true href=#1021-약한-참조-weak-reference-활용>#</a></h4><ul><li><strong>정의</strong>: 가비지 컬렉션에 영향을 주지 않는 약한 참조 사용</li><li><strong>구성</strong>: WeakHashMap, WeakReference, 자동 메모리 정리</li><li><strong>목적</strong>: 메모리 누수 방지 및 동적 메모리 관리</li><li><strong>실제 예시</strong>: Java WeakHashMap을 활용한 자동 정리 구현</li></ul><h4 id=1022-스레드-안전-구현>10.2.2 스레드 안전 구현<a hidden class=anchor aria-hidden=true href=#1022-스레드-안전-구현>#</a></h4><ul><li><strong>정의</strong>: 멀티스레드 환경에서의 안전한 플라이웨이트 생성 및 관리</li><li><strong>구성</strong>: 동기화 블록, ConcurrentHashMap, 불변 객체 설계</li><li><strong>목적</strong>: 동시성 환경에서의 데이터 무결성 보장</li><li><strong>실제 예시</strong>: synchronized 키워드 또는 concurrent 컬렉션 활용</li></ul><h2 id=11-장점과-단점>11. 장점과 단점<a hidden class=anchor aria-hidden=true href=#11-장점과-단점>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>✅ 장점</td><td><strong>메모리 효율성</strong></td><td>대량의 유사 객체에 대한 메모리 사용량 대폭 감소</td></tr><tr><td></td><td><strong>성능 향상</strong></td><td>객체 생성 비용 절약 및 캐시 효과로 인한 접근 속도 향상</td></tr><tr><td></td><td><strong>확장성</strong></td><td>메모리 제약 완화로 인한 시스템 확장성 개선</td></tr><tr><td></td><td><strong>중앙 집중 관리</strong></td><td>플라이웨이트 객체의 체계적이고 일관된 관리</td></tr><tr><td></td><td><strong>투명성</strong></td><td>클라이언트가 공유 메커니즘을 인식할 필요 없음</td></tr><tr><td>⚠ 단점</td><td><strong>복잡성 증가</strong></td><td>상태 분리 및 팩토리 패턴으로 인한 코드 복잡도 상승</td></tr><tr><td></td><td><strong>개별 동작 제한</strong></td><td>특정 인스턴스만 다르게 동작시키는 것이 불가능</td></tr><tr><td></td><td><strong>외부 상태 관리 부담</strong></td><td>클라이언트에서 외부 상태를 별도로 관리해야 함</td></tr><tr><td></td><td><strong>적용 조건 제한</strong></td><td>공유 가능한 상태가 충분하지 않으면 효과 미미</td></tr><tr><td></td><td><strong>디버깅 어려움</strong></td><td>객체 공유로 인한 디버깅 및 추적의 복잡성</td></tr></tbody></table><h2 id=12-도전-과제>12. 도전 과제<a hidden class=anchor aria-hidden=true href=#12-도전-과제>#</a></h2><h3 id=121-상태-분리의-복잡성>12.1 상태 분리의 복잡성<a hidden class=anchor aria-hidden=true href=#121-상태-분리의-복잡성>#</a></h3><p><strong>설명</strong>: 고유 상태와 외부 상태를 올바르게 구분하는 것이 까다로움<br><strong>해결책</strong>: 도메인 분석을 통한 명확한 상태 분류 기준 수립, 상태 다이어그램 활용</p><h3 id=122-스레드-안전성-확보>12.2 스레드 안전성 확보<a hidden class=anchor aria-hidden=true href=#122-스레드-안전성-확보>#</a></h3><p><strong>설명</strong>: 멀티스레드 환경에서 플라이웨이트 객체의 안전한 공유<br><strong>해결책</strong>: 불변 객체 설계, ConcurrentHashMap 활용, 적절한 동기화 메커니즘 적용</p><h3 id=123-메모리-누수-위험>12.3 메모리 누수 위험<a hidden class=anchor aria-hidden=true href=#123-메모리-누수-위험>#</a></h3><p><strong>설명</strong>: 플라이웨이트 풀의 지속적인 증가로 인한 메모리 누수<br><strong>해결책</strong>: 약한 참조 활용, LRU 캐시 정책 적용, 주기적인 풀 정리</p><h3 id=124-성능-측정의-어려움>12.4 성능 측정의 어려움<a hidden class=anchor aria-hidden=true href=#124-성능-측정의-어려움>#</a></h3><p><strong>설명</strong>: 실제 메모리 절약 효과와 성능 개선 정도의 정확한 측정<br><strong>해결책</strong>: 메모리 프로파일링 도구 활용, 벤치마크 테스트 수행, 성능 지표 모니터링</p><hr><h2 id=제3부-실무-활용>제3부: 실무 활용<a hidden class=anchor aria-hidden=true href=#제3부-실무-활용>#</a></h2><h2 id=13-분류에-따른-종류-및-유형>13. 분류에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#13-분류에-따른-종류-및-유형>#</a></h2><table><thead><tr><th>분류 기준</th><th>유형</th><th>설명</th><th>예시</th></tr></thead><tbody><tr><td><strong>적용 도메인</strong></td><td>그래픽스 플라이웨이트</td><td>게임/그래픽 객체의 메모리 최적화</td><td>게임 캐릭터, 타일맵</td></tr><tr><td></td><td>텍스트 플라이웨이트</td><td>문서 편집기의 문자/글꼴 관리</td><td>워드프로세서, 에디터</td></tr><tr><td></td><td>UI 컴포넌트 플라이웨이트</td><td>사용자 인터페이스 요소 최적화</td><td>버튼, 아이콘, 위젯</td></tr><tr><td><strong>공유 정도</strong></td><td>완전 공유형</td><td>모든 고유 상태가 공유됨</td><td>동일한 이미지 리소스</td></tr><tr><td></td><td>부분 공유형</td><td>일부 상태만 공유됨</td><td>폰트는 같지만 크기가 다른 텍스트</td></tr><tr><td><strong>생성 방식</strong></td><td>정적 생성형</td><td>애플리케이션 시작 시 미리 생성</td><td>고정된 게임 타일셋</td></tr><tr><td></td><td>동적 생성형</td><td>필요에 따라 런타임에 생성</td><td>사용자 입력에 따른 문자 생성</td></tr><tr><td><strong>메모리 관리</strong></td><td>영구 보관형</td><td>애플리케이션 종료까지 유지</td><td>기본 시스템 리소스</td></tr><tr><td></td><td>임시 보관형</td><td>약한 참조로 자동 정리</td><td>임시 생성되는 객체들</td></tr></tbody></table><h2 id=14-실무-적용-예시>14. 실무 적용 예시<a hidden class=anchor aria-hidden=true href=#14-실무-적용-예시>#</a></h2><table><thead><tr><th>적용 분야</th><th>구체적 사용 사례</th><th>플라이웨이트 객체</th><th>외부 상태</th><th>효과</th></tr></thead><tbody><tr><td><strong>게임 개발</strong></td><td>RPG 게임의 나무/바위 객체</td><td>3D 모델, 텍스처</td><td>위치, 회전, 스케일</td><td>메모리 사용량 90% 감소</td></tr><tr><td><strong>웹 브라우저</strong></td><td>HTML DOM 요소 렌더링</td><td>CSS 스타일 정보</td><td>요소 위치, 내용</td><td>페이지 로딩 속도 향상</td></tr><tr><td><strong>문서 편집기</strong></td><td>텍스트 문서의 문자 관리</td><td>폰트, 글꼴 스타일</td><td>문자 위치, 색상</td><td>대용량 문서 처리 가능</td></tr><tr><td><strong>데이터 시각화</strong></td><td>차트의 데이터 포인트</td><td>마커 모양, 스타일</td><td>좌표값, 색상</td><td>대량 데이터 실시간 렌더링</td></tr><tr><td><strong>모바일 앱</strong></td><td>리스트뷰의 아이템 뷰</td><td>레이아웃 템플릿</td><td>데이터, 상태</td><td>스크롤 성능 최적화</td></tr></tbody></table><h2 id=15-활용-사례-멀티플레이어-게임의-총알-시스템>15. 활용 사례: 멀티플레이어 게임의 총알 시스템<a hidden class=anchor aria-hidden=true href=#15-활용-사례-멀티플레이어-게임의-총알-시스템>#</a></h2><h3 id=151-시나리오-설정>15.1 시나리오 설정<a hidden class=anchor aria-hidden=true href=#151-시나리오-설정>#</a></h3><p>대규모 멀티플레이어 슈팅 게임에서 수천 개의 총알 객체가 동시에 화면에 존재하는 상황</p><h3 id=152-시스템-구성>15.2 시스템 구성<a hidden class=anchor aria-hidden=true href=#152-시스템-구성>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1>1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2>2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3>3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4>4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5>5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6>6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7>7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Game Engine
</span></span><span class=line><span class=cl>├── BulletFactory (플라이웨이트 팩토리)
</span></span><span class=line><span class=cl>├── BulletType (플라이웨이트 인터페이스)
</span></span><span class=line><span class=cl>│   ├── PistolBullet (구체적 플라이웨이트)
</span></span><span class=line><span class=cl>│   ├── RifleBullet (구체적 플라이웨이트)
</span></span><span class=line><span class=cl>│   └── SniperBullet (구체적 플라이웨이트)
</span></span><span class=line><span class=cl>├── BulletContext (컨텍스트)
</span></span><span class=line><span class=cl>└── GameObjectManager (클라이언트)
</span></span></code></pre></td></tr></table></div></div><h3 id=153-구성-다이어그램>15.3 구성 다이어그램<a hidden class=anchor aria-hidden=true href=#153-구성-다이어그램>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1>1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2>2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3>3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4>4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5>5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6>6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Player → GameObjectManager → BulletFactory
</span></span><span class=line><span class=cl>                ↓
</span></span><span class=line><span class=cl>            BulletType (공유 객체)
</span></span><span class=line><span class=cl>                ↓
</span></span><span class=line><span class=cl>        BulletContext (개별 상태: 위치, 속도, 방향)
</span></span><span class=line><span class=cl>                ↓
</span></span><span class=line><span class=cl>            Rendering Engine
</span></span></code></pre></td></tr></table></div></div><h3 id=154-워크플로우>15.4 워크플로우<a hidden class=anchor aria-hidden=true href=#154-워크플로우>#</a></h3><ol><li><strong>총알 발사 요청</strong>: 플레이어가 발사 버튼 클릭</li><li><strong>팩토리 조회</strong>: GameObjectManager가 BulletFactory에 해당 총알 타입 요청</li><li><strong>플라이웨이트 반환</strong>: 기존 BulletType 객체 반환 또는 새로 생성</li><li><strong>컨텍스트 생성</strong>: 총알의 위치, 속도, 방향 등 외부 상태로 BulletContext 생성</li><li><strong>게임 루프 처리</strong>: 매 프레임마다 BulletContext 업데이트 및 렌더링</li></ol><h3 id=155-담당-역할>15.5 담당 역할<a hidden class=anchor aria-hidden=true href=#155-담당-역할>#</a></h3><ul><li><strong>BulletFactory</strong>: 총알 타입별 플라이웨이트 객체 관리 (메모리 3개 객체만 유지)</li><li><strong>BulletType</strong>: 총알의 공통 속성 (데미지, 스프라이트, 사운드) 저장</li><li><strong>BulletContext</strong>: 개별 총알의 동적 상태 (위치, 속도, 생존시간) 관리</li><li><strong>메모리 효과</strong>: 10,000개 총알 × 각 100KB → 3개 플라이웨이트 × 50KB + 10,000개 컨텍스트 × 5KB = 200KB (99% 절약)</li></ul><hr><h2 id=제4부-실무-고려사항>제4부: 실무 고려사항<a hidden class=anchor aria-hidden=true href=#제4부-실무-고려사항>#</a></h2><h2 id=16-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>16. 실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#16-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>구분</th><th>고려사항</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td><strong>설계 단계</strong></td><td>상태 분석</td><td>공유 가능한 상태와 개별 상태의 명확한 구분</td><td>도메인 모델링을 통한 상태 분류 체계 수립</td></tr><tr><td></td><td>적용 조건 확인</td><td>대량의 유사 객체 존재 여부 검증</td><td>최소 수백 개 이상의 객체가 생성될 때 적용</td></tr><tr><td></td><td>메모리 사용량 분석</td><td>기존 방식 대비 메모리 절약 효과 측정</td><td>프로파일링 도구를 활용한 정량적 분석</td></tr><tr><td><strong>구현 단계</strong></td><td>불변성 보장</td><td>플라이웨이트 객체의 상태 변경 불가 설계</td><td>final/const 키워드 활용, setter 메서드 제거</td></tr><tr><td></td><td>팩토리 설계</td><td>효율적인 객체 풀 관리 및 생성 로직</td><td>HashMap 기반 캐싱, 스레드 안전성 보장</td></tr><tr><td></td><td>외부 상태 관리</td><td>클라이언트에서의 효율적인 외부 상태 처리</td><td>컨텍스트 객체 패턴 활용</td></tr><tr><td><strong>성능 최적화</strong></td><td>캐시 정책</td><td>적절한 캐시 크기 및 정리 정책 수립</td><td>LRU, 약한 참조 등 메모리 정책 적용</td></tr><tr><td></td><td>동시성 처리</td><td>멀티스레드 환경에서의 안전한 접근</td><td>ConcurrentHashMap, 읽기 전용 객체 설계</td></tr><tr><td><strong>유지보수</strong></td><td>확장성 고려</td><td>새로운 플라이웨이트 타입 추가 용이성</td><td>추상 팩토리 패턴과의 결합 고려</td></tr><tr><td></td><td>테스트 전략</td><td>공유 객체의 올바른 동작 검증</td><td>메모리 사용량, 객체 생성 횟수 검증</td></tr></tbody></table><h2 id=17-성능을-최적화하기-위한-고려사항-및-주의할-점>17. 성능을 최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#17-성능을-최적화하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>구분</th><th>최적화 포인트</th><th>설명</th><th>권장사항</th><th></th></tr></thead><tbody><tr><td><strong>메모리 최적화</strong></td><td>객체 풀 크기</td><td>적절한 풀 크기로 메모리 사용량 제어</td><td>애플리케이션 특성에 따른 최적값 찾기</td><td></td></tr><tr><td></td><td>가비지 컬렉션</td><td>GC 부하 최소화를 위한 객체 생명주기 관리</td><td>약한 참조, 객체 재사용 패턴 적용</td><td></td></tr><tr><td></td><td>메모리 리크 방지</td><td>플라이웨이트 풀의 무한 증가 방지</td><td>정기적 정리, 최대 크기 제한 설정</td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr><tr><td><strong>성능 최적화</strong></td><td>해시 함수</td><td>빠른 객체 검색을 위한 효율적 해시 설계</td><td>고유 상태 기반 해시코드 구현, 충돌 최소화</td><td></td></tr><tr><td></td><td>지연 초기화</td><td>필요한 시점에만 플라이웨이트 생성</td><td>팩토리 메서드에서 lazy loading 패턴 적용</td><td></td></tr><tr><td></td><td>배치 처리</td><td>다량의 플라이웨이트 생성 시 일괄 처리</td><td>초기화 시점에 예상 객체들 미리 생성</td><td></td></tr><tr><td><strong>I/O 최적화</strong></td><td>직렬화 효율성</td><td>플라이웨이트 객체의 효율적 저장/복원</td><td>불변 필드만 직렬화, 팩토리 재생성 활용</td><td></td></tr><tr><td></td><td>네트워크 전송</td><td>분산 환경에서의 플라이웨이트 공유</td><td>공유 상태만 전송, 로컬 팩토리 재구성</td><td></td></tr><tr><td><strong>동시성 최적화</strong></td><td>읽기 최적화</td><td>읽기 전용 플라이웨이트의 락 프리 접근</td><td>불변 객체 설계로 동기화 오버헤드 제거</td><td></td></tr><tr><td></td><td>팩토리 동시성</td><td>멀티스레드에서의 안전한 객체 생성</td><td>double-checked locking, CAS 연산 활용</td><td></td></tr></tbody></table><hr><h2 id=18-2025년-기준-최신-동향>18. 2025년 기준 최신 동향<a hidden class=anchor aria-hidden=true href=#18-2025년-기준-최신-동향>#</a></h2><table><thead><tr><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>클라우드 네이티브</strong></td><td>마이크로서비스 최적화</td><td>컨테이너 환경에서 메모리 효율성을 위한 플라이웨이트 패턴 재조명</td></tr><tr><td></td><td>서버리스 아키텍처</td><td>AWS Lambda, Azure Functions에서 콜드 스타트 최적화에 활용</td></tr><tr><td><strong>AI/ML 통합</strong></td><td>모델 가중치 공유</td><td>대용량 AI 모델의 파라미터 공유를 통한 메모리 효율성 달성</td></tr><tr><td></td><td>엣지 컴퓨팅</td><td>IoT 디바이스에서 제한된 메모리 환경 최적화</td></tr><tr><td><strong>웹 기술 발전</strong></td><td>WebAssembly 최적화</td><td>브라우저 환경에서 대용량 애플리케이션의 메모리 관리</td></tr><tr><td></td><td>Progressive Web Apps</td><td>PWA에서 오프라인 리소스 효율적 관리</td></tr><tr><td><strong>모바일 최적화</strong></td><td>5G 환경 적응</td><td>고화질 콘텐츠 스트리밍 시 메모리 효율적 캐싱</td></tr><tr><td></td><td>폴더블 디바이스</td><td>다양한 화면 크기 대응을 위한 UI 컴포넌트 최적화</td></tr><tr><td><strong>개발 도구</strong></td><td>메모리 프로파일링</td><td>실시간 메모리 사용량 모니터링 및 플라이웨이트 효과 측정</td></tr><tr><td></td><td>IDE 통합</td><td>개발 환경에서 플라이웨이트 패턴 자동 감지 및 추천</td></tr></tbody></table><h2 id=19-주제와-관련하여-주목할-내용>19. 주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#19-주제와-관련하여-주목할-내용>#</a></h2><table><thead><tr><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>새로운 메모리 기술</strong></td><td>CXL 메모리</td><td>Compute Express Link를 통한 분산 메모리 활용 최적화</td></tr><tr><td></td><td>3D 스택 메모리</td><td>수직 적층 메모리에서의 플라이웨이트 패턴 적용</td></tr><tr><td><strong>양자 컴퓨팅</strong></td><td>양자 상태 공유</td><td>양자 비트의 얽힘 상태를 활용한 새로운 공유 패러다임</td></tr><tr><td></td><td>하이브리드 시스템</td><td>클래식-양자 통합 환경에서의 메모리 효율성</td></tr><tr><td><strong>블록체인 기술</strong></td><td>스마트 컨트랙트 최적화</td><td>가스비 절약을 위한 상태 공유 메커니즘</td></tr><tr><td></td><td>분산 저장소</td><td>IPFS 등에서 중복 데이터 제거 최적화</td></tr><tr><td><strong>그래픽스 기술</strong></td><td>레이트레이싱</td><td>RTX/RDNA에서 씬 데이터 효율적 관리</td></tr><tr><td></td><td>메타버스 최적화</td><td>가상 공간의 대용량 3D 객체 메모리 관리</td></tr><tr><td><strong>보안 기술</strong></td><td>제로 트러스트</td><td>보안 컨텍스트 정보의 효율적 공유 및 관리</td></tr><tr><td></td><td>동형 암호화</td><td>암호화된 상태에서의 데이터 공유 최적화</td></tr></tbody></table><h2 id=20-앞으로의-전망>20. 앞으로의 전망<a hidden class=anchor aria-hidden=true href=#20-앞으로의-전망>#</a></h2><table><thead><tr><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>기술 융합</strong></td><td>AI 기반 자동 최적화</td><td>머신러닝을 통한 플라이웨이트 패턴 자동 적용 및 튜닝</td></tr><tr><td></td><td>실시간 적응형 시스템</td><td>런타임에 메모리 사용 패턴 분석 후 동적 최적화</td></tr><tr><td><strong>하드웨어 발전</strong></td><td>차세대 메모리</td><td>DDR6, HBM4 등 고속 메모리에서의 새로운 최적화 기법</td></tr><tr><td></td><td>뉴로모픽 컴퓨팅</td><td>뇌 구조 모방 칩에서의 메모리 효율성 패러다임</td></tr><tr><td><strong>소프트웨어 진화</strong></td><td>자동 코드 생성</td><td>AI 코딩 어시스턴트의 플라이웨이트 패턴 자동 구현</td></tr><tr><td></td><td>크로스 플랫폼 최적화</td><td>통합 개발환경에서의 플랫폼별 메모리 최적화</td></tr><tr><td><strong>새로운 도메인</strong></td><td>디지털 트윈</td><td>실시간 시뮬레이션에서 대용량 객체 효율적 관리</td></tr><tr><td></td><td>확장현실(XR)</td><td>AR/VR/MR 환경에서의 몰입형 콘텐츠 메모리 최적화</td></tr><tr><td><strong>표준화 동향</strong></td><td>메모리 관리 표준</td><td>크로스 플랫폼 메모리 최적화 가이드라인 수립</td></tr><tr><td></td><td>성능 벤치마크</td><td>플라이웨이트 패턴 효과 측정 표준 메트릭 개발</td></tr></tbody></table><h2 id=21-추가-학습-내용>21. 추가 학습 내용<a hidden class=anchor aria-hidden=true href=#21-추가-학습-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>설명</th></tr></thead><tbody><tr><td><strong>디자인 패턴</strong></td><td>Singleton Pattern</td><td>플라이웨이트 팩토리에서 활용되는 단일 인스턴스 관리</td></tr><tr><td></td><td>Factory Method Pattern</td><td>플라이웨이트 객체 생성의 핵심 메커니즘</td></tr><tr><td></td><td>Object Pool Pattern</td><td>플라이웨이트와 유사한 객체 재사용 패턴</td></tr><tr><td></td><td>Proxy Pattern</td><td>플라이웨이트 접근 제어 및 지연 로딩</td></tr><tr><td><strong>메모리 관리</strong></td><td>Garbage Collection</td><td>JVM, .NET에서의 플라이웨이트 생명주기 관리</td></tr><tr><td></td><td>Memory Pool</td><td>커스텀 메모리 할당자와 플라이웨이트 통합</td></tr><tr><td></td><td>Weak References</td><td>자동 메모리 정리를 위한 약한 참조 활용</td></tr><tr><td><strong>동시성 프로그래밍</strong></td><td>Thread Safety</td><td>멀티스레드 환경에서의 플라이웨이트 안전성</td></tr><tr><td></td><td>Lock-Free Programming</td><td>무잠금 알고리즘을 통한 성능 최적화</td></tr><tr><td></td><td>Concurrent Collections</td><td>동시성 컬렉션을 활용한 플라이웨이트 풀 관리</td></tr><tr><td><strong>성능 최적화</strong></td><td>Profiling & Monitoring</td><td>메모리 사용량 분석 및 성능 측정 도구</td></tr><tr><td></td><td>Cache Optimization</td><td>CPU 캐시 친화적인 플라이웨이트 설계</td></tr><tr><td></td><td>Memory Alignment</td><td>메모리 정렬을 통한 접근 성능 향상</td></tr></tbody></table><h2 id=22-관련-분야-추가-학습-내용>22. 관련 분야 추가 학습 내용<a hidden class=anchor aria-hidden=true href=#22-관련-분야-추가-학습-내용>#</a></h2><table><thead><tr><th>관련 분야</th><th>주제</th><th>설명</th></tr></thead><tbody><tr><td><strong>컴퓨터 그래픽스</strong></td><td>Scene Graph Optimization</td><td>3D 씬에서 중복 지오메트리 데이터 공유</td></tr><tr><td></td><td>Texture Atlas</td><td>텍스처 아틀라스를 통한 GPU 메모리 최적화</td></tr><tr><td></td><td>Level of Detail (LOD)</td><td>거리별 상세도 조절과 플라이웨이트 결합</td></tr><tr><td><strong>데이터베이스</strong></td><td>Query Result Caching</td><td>쿼리 결과의 효율적 캐싱 및 재사용</td></tr><tr><td></td><td>Connection Pooling</td><td>데이터베이스 연결 풀과 플라이웨이트 원리</td></tr><tr><td></td><td>Materialized Views</td><td>사전 계산된 뷰의 공유 메커니즘</td></tr><tr><td><strong>웹 개발</strong></td><td>Browser Caching</td><td>HTTP 캐싱과 리소스 공유 최적화</td></tr><tr><td></td><td>CDN Optimization</td><td>콘텐츠 전송 네트워크에서의 중복 제거</td></tr><tr><td></td><td>Service Workers</td><td>PWA에서의 효율적 리소스 관리</td></tr><tr><td><strong>게임 개발</strong></td><td>Asset Streaming</td><td>대용량 게임 리소스의 동적 로딩</td></tr><tr><td></td><td>Physics Simulation</td><td>물리 객체 속성의 효율적 공유</td></tr><tr><td></td><td>Animation Systems</td><td>애니메이션 데이터 공유 및 인스턴싱</td></tr><tr><td><strong>분산 시스템</strong></td><td>Distributed Caching</td><td>Redis, Memcached를 활용한 분산 캐싱</td></tr><tr><td></td><td>Microservices</td><td>마이크로서비스 간 공유 데이터 최적화</td></tr><tr><td></td><td>Load Balancing</td><td>로드 밸런서에서의 세션 데이터 공유</td></tr></tbody></table><hr><h2 id=용어-정리-3>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-3>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td><strong>Context (컨텍스트)</strong></td><td>플라이웨이트 객체와 외부 상태를 결합하여 완전한 객체를 구성하는 클래스</td></tr><tr><td><strong>Object Pool (객체 풀)</strong></td><td>재사용 가능한 객체들을 미리 생성하여 저장하는 메모리 영역</td></tr><tr><td><strong>Hash Consing (해시 컨싱)</strong></td><td>동일한 값을 가진 객체를 하나의 인스턴스로 공유하는 기법</td></tr><tr><td><strong>Immutable Object (불변 객체)</strong></td><td>생성 후 상태가 변경될 수 없는 객체, 플라이웨이트의 핵심 특성</td></tr><tr><td><strong>Lazy Initialization (지연 초기화)</strong></td><td>객체가 실제로 필요한 시점에 생성하는 기법</td></tr><tr><td><strong>Weak Reference (약한 참조)</strong></td><td>가비지 컬렉션의 대상이 될 수 있는 참조 방식</td></tr><tr><td><strong>Double-Checked Locking</strong></td><td>싱글톤 패턴에서 동시성을 보장하면서 성능을 최적화하는 기법</td></tr><tr><td><strong>Memory Footprint (메모리 사용량)</strong></td><td>프로그램이 실행 중에 사용하는 총 메모리 크기</td></tr><tr><td><strong>Cache Locality (캐시 지역성)</strong></td><td>메모리 접근 패턴의 지역성을 활용한 성능 최적화</td></tr><tr><td><strong>Garbage Collection (가비지 컬렉션)</strong></td><td>더 이상 사용되지 않는 메모리를 자동으로 해제하는 메커니즘</td></tr></tbody></table><hr><h2 id=참고-및-출처-3>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-3>#</a></h2><ul><li><a href=https://refactoring.guru/ko/design-patterns/flyweight>플라이웨이트 패턴 - Refactoring Guru</a></li><li><a href=https://4z7l.github.io/2020/12/25/design_pattern_GoF.html>GoF 디자인 패턴 - HERSTORY</a></li><li><a href=https://ko.wikipedia.org/wiki/%ED%94%8C%EB%9D%BC%EC%9D%B4%EC%9B%A8%EC%9D%B4%ED%8A%B8_%ED%8C%A8%ED%84%B4>플라이웨이트 패턴 - 위키백과</a></li><li><a href=https://www.geeksforgeeks.org/flyweight-design-pattern/>Flyweight Design Pattern - GeeksforGeeks</a></li><li><a href=http://hajeonghyeon.blogspot.com/2017/05/blog-post.html>디자인 패턴 - 경량 패턴(Flyweight pattern)</a></li><li><a href=https://m.blog.naver.com/2feelus/220669069127>플라이웨이트 패턴(Flyweight Pattern) - 자바 디자인 패턴과 JDK예제</a></li><li><a href=https://velog.io/@ddh963963/GoF-%EB%94%94%EC%9E%90%EC%9D%B8%ED%8C%A8%ED%84%B4-Flyweight>GoF 디자인패턴 : Flyweight</a></li><li><a href=https://has3ong.github.io/programming/designpattern-flyweight/>디자인 패턴 톺아보기 - Flyweight Pattern</a></li><li><a href=https://ettrends.etri.re.kr/ettrends/206/0905206006/>CXL 메모리 및 활용 소프트웨어 기술 동향 - ETRI</a></li><li><a href=https://ettrends.etri.re.kr/ettrends/193/0905193007/>양자컴퓨팅 소프트웨어 최신 기술 동향 - ETRI</a></li></ul></div></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>