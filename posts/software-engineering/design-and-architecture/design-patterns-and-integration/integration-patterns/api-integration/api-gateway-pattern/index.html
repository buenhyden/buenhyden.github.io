<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>API Gateway Pattern | hyunyoun's Blog</title><meta name=keywords content="Software-Engineering,Design-and-Architecture,Architecture-Styles-and-Patterns,Architecture-Patterns,Integration-Patterns,API-Gateway-Pattern"><meta name=description content="마이크로서비스 아키텍처에서 클라이언트와 백엔드 서비스 간의 단일 진입점 역할을 수행하는 중요한 구성 요소"><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-patterns-and-integration/integration-patterns/api-integration/api-gateway-pattern/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-patterns-and-integration/integration-patterns/api-integration/api-gateway-pattern/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-patterns-and-integration/integration-patterns/api-integration/api-gateway-pattern/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-patterns-and-integration/integration-patterns/api-integration/api-gateway-pattern/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="API Gateway Pattern"><meta property="og:description" content="마이크로서비스 아키텍처에서 클라이언트와 백엔드 서비스 간의 단일 진입점 역할을 수행하는 중요한 구성 요소"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="API Gateway Pattern"><meta name=twitter:description content="마이크로서비스 아키텍처에서 클라이언트와 백엔드 서비스 간의 단일 진입점 역할을 수행하는 중요한 구성 요소"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"기록하고 기억하고 활용하자.","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Software Engineering","item":"https://buenhyden.github.io/posts/software-engineering/"},{"@type":"ListItem","position":3,"name":"Design and Architecture","item":""},{"@type":"ListItem","position":5,"name":"Integration Patterns","item":""},{"@type":"ListItem","position":6,"name":"API Integration Patterns","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-patterns-and-integration/integration-patterns/api-integration/"},{"@type":"ListItem","position":7,"name":"API Gateway Pattern","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-patterns-and-integration/integration-patterns/api-integration/api-gateway-pattern/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>기록하고 기억하고 활용하자.</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/>Software Engineering</a>&nbsp;»&nbsp;<a href>Design and Architecture</a>&nbsp;»&nbsp;<a href>Integration Patterns</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/design-patterns-and-integration/integration-patterns/api-integration/>API Integration Patterns</a></div><h1>API Gateway Pattern</h1><div class=post-description>마이크로서비스 아키텍처에서 클라이언트와 백엔드 서비스 간의 단일 진입점 역할을 수행하는 중요한 구성 요소</div></header><div class=post-content><h2 id=api-gateway-pattern>API Gateway Pattern<a hidden class=anchor aria-hidden=true href=#api-gateway-pattern>#</a></h2><p>아래는 **API Gateway Pattern(API 게이트웨이 패턴)**에 대한 체계적이고 깊이 있는 조사 및 분석 결과입니다.</p><hr><h2 id=1-태그>1. 태그<a hidden class=anchor aria-hidden=true href=#1-태그>#</a></h2><p>API-Gateway, Integration-Pattern, Microservices-Architecture, Cloud-Native</p><hr><h2 id=2-분류-구조-적합성-분석>2. 분류 구조 적합성 분석<a hidden class=anchor aria-hidden=true href=#2-분류-구조-적합성-분석>#</a></h2><p><strong>현재 분류 구조:</strong><br>Computer Science and Engineering<br>└─ Software Engineering<br>　　└─ Design and Architecture<br>　　　　└─ Architecture Patterns<br>　　　　　　└─ Integration Patterns</p><p><strong>적합성 근거:</strong><br>API Gateway Pattern은 다양한 서비스 또는 마이크로서비스에 대한 단일 진입점(Entry Point)을 제공하여, 클라이언트와 백엔드 서비스 간의 통합(Integration)을 담당하는 아키텍처 패턴입니다. 이는 소프트웨어 아키텍처의 통합 패턴(Integration Pattern)으로 분류하는 것이 타당합니다.<br>따라서, 제시된 분류 구조는 적절합니다.</p><hr><h2 id=3-주제-요약-200자-내외>3. 주제 요약 (200자 내외)<a hidden class=anchor aria-hidden=true href=#3-주제-요약-200자-내외>#</a></h2><p>API Gateway Pattern은 클라이언트와 백엔드 서비스 간의 중앙 집중형 통합 지점으로, 요청 라우팅, 인증/인가, 트래픽 제어, 모니터링 등 다양한 기능을 제공하는 아키텍처 패턴입니다.</p><hr><h2 id=4-전체-개요-250자-내외>4. 전체 개요 (250자 내외)<a hidden class=anchor aria-hidden=true href=#4-전체-개요-250자-내외>#</a></h2><p>API Gateway Pattern은 마이크로서비스 또는 분산 시스템에서 클라이언트 요청을 중앙에서 수신하여 적절한 백엔드 서비스로 라우팅하고, 인증/인가, 트래픽 제어, 모니터링, 로깅 등 다양한 부가 기능을 제공하는 통합 패턴입니다.</p><hr><h2 id=5-핵심-개념>5. 핵심 개념<a hidden class=anchor aria-hidden=true href=#5-핵심-개념>#</a></h2><ul><li><strong>정의:</strong><br>API Gateway(API 게이트웨이)는 클라이언트와 백엔드 서비스 간의 모든 요청을 중앙에서 처리하는 단일 진입점(Entry Point)으로, 요청 라우팅, 인증/인가, 트래픽 제어, 모니터링, 로깅 등 다양한 기능을 제공합니다.</li><li><strong>실무적 필요성:</strong><ul><li>다양한 서비스(마이크로서비스)에 대한 단일 진입점 제공</li><li>인증/인가, 트래픽 제어, 모니터링 등 부가 기능 중앙화</li><li>클라이언트와 서비스 간의 복잡성 추상화</li></ul></li><li><strong>핵심 특징:</strong><ul><li>단일 진입점(Entry Point)</li><li>요청 라우팅 및 통합</li><li>인증/인가, 트래픽 제어, 모니터링, 로깅 등 부가 기능 제공</li><li>클라이언트와 서비스 간의 복잡성 추상화</li></ul></li><li><strong>실무 구현 관점:</strong><ul><li>클라이언트는 API Gateway를 통해 모든 요청을 전송</li><li>API Gateway는 요청을 적절한 백엔드 서비스로 라우팅</li><li>인증/인가, 트래픽 제어, 모니터링, 로깅 등 부가 기능을 중앙에서 처리</li></ul></li></ul><hr><h2 id=51-핵심-개념-실무-연관성>5.1. 핵심 개념 실무 연관성<a hidden class=anchor aria-hidden=true href=#51-핵심-개념-실무-연관성>#</a></h2><ul><li><strong>단일 진입점:</strong><br>클라이언트는 다양한 서비스에 직접 접근하지 않고, API Gateway를 통해 일관된 방식으로 요청을 전송할 수 있음.</li><li><strong>부가 기능 중앙화:</strong><br>인증/인가, 트래픽 제어, 모니터링, 로깅 등은 API Gateway에서 일관되게 제공되어, 각 서비스에서 별도로 구현할 필요가 없음.</li><li><strong>복잡성 추상화:</strong><br>클라이언트는 서비스의 내부 구조를 알 필요 없이, API Gateway를 통해 원하는 기능을 사용할 수 있음.</li></ul><hr><h2 id=6-주제와-관련하여-조사할-내용>6. 주제와 관련하여 조사할 내용<a hidden class=anchor aria-hidden=true href=#6-주제와-관련하여-조사할-내용>#</a></h2><h3 id=61-배경>6.1. 배경<a hidden class=anchor aria-hidden=true href=#61-배경>#</a></h3><ul><li><strong>문제점:</strong><ul><li>마이크로서비스 또는 분산 시스템에서는 클라이언트가 다양한 서비스에 직접 접근해야 하며, 인증/인가, 트래픽 제어, 모니터링 등은 각 서비스에서 별도로 구현해야 함.</li><li>서비스가 추가되거나 변경될 때마다 클라이언트도 변경해야 하는 문제 발생.</li></ul></li><li><strong>해결책:</strong><ul><li>API Gateway를 도입하여, 클라이언트와 서비스 간의 모든 요청을 중앙에서 처리하고, 부가 기능을 중앙화함.</li></ul></li></ul><h3 id=62-목적-및-필요성>6.2. 목적 및 필요성<a hidden class=anchor aria-hidden=true href=#62-목적-및-필요성>#</a></h3><ul><li><strong>목적:</strong><ul><li>클라이언트와 서비스 간의 복잡성 추상화</li><li>부가 기능(인증/인가, 트래픽 제어, 모니터링 등) 중앙화</li><li>서비스 변경 시 클라이언트 영향 최소화</li></ul></li><li><strong>필요성:</strong><ul><li>대규모 분산 시스템, 마이크로서비스 환경에서 필수적인 패턴</li></ul></li></ul><h3 id=63-주요-기능-및-역할>6.3. 주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#63-주요-기능-및-역할>#</a></h3><ul><li><strong>요청 라우팅 및 통합</strong></li><li><strong>인증/인가</strong></li><li><strong>트래픽 제어(로드 밸런싱, 레이트 리미팅 등)</strong></li><li><strong>모니터링 및 로깅</strong></li><li><strong>API 버전 관리</strong></li><li><strong>요청/응답 변환</strong></li><li><strong>서비스 디스커버리 연동</strong></li></ul><h3 id=64-특징>6.4. 특징<a hidden class=anchor aria-hidden=true href=#64-특징>#</a></h3><ul><li><strong>단일 진입점(Entry Point)</strong></li><li><strong>부가 기능 중앙화</strong></li><li><strong>클라이언트와 서비스 간의 복잡성 추상화</strong></li><li><strong>서비스 변경 시 클라이언트 영향 최소화</strong></li></ul><h3 id=65-핵심-원칙>6.5. 핵심 원칙<a hidden class=anchor aria-hidden=true href=#65-핵심-원칙>#</a></h3><ul><li><strong>단일 진입점 제공</strong></li><li><strong>부가 기능 중앙화</strong></li><li><strong>클라이언트와 서비스 간의 복잡성 추상화</strong></li><li><strong>서비스 변경 시 클라이언트 영향 최소화</strong></li></ul><h3 id=66-주요-원리-및-작동-원리>6.6. 주요 원리 및 작동 원리<a hidden class=anchor aria-hidden=true href=#66-주요-원리-및-작동-원리>#</a></h3><ul><li><strong>클라이언트는 API Gateway로 요청을 전송</strong></li><li><strong>API Gateway는 요청을 적절한 백엔드 서비스로 라우팅</strong></li><li><strong>API Gateway는 인증/인가, 트래픽 제어, 모니터링, 로깅 등 부가 기능을 중앙에서 처리</strong></li><li><strong>API Gateway는 서비스 디스커버리와 연동하여 동적으로 서비스 위치를 탐지</strong></li></ul><p><strong>다이어그램(Text 기반):</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[Client] ---&gt; [API Gateway] ---&gt; [Service A]
</span></span><span class=line><span class=cl>                        |
</span></span><span class=line><span class=cl>                        +---&gt; [Service B]
</span></span><span class=line><span class=cl>                        |
</span></span><span class=line><span class=cl>                        +---&gt; [Service C]
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>설명:</strong><br>클라이언트는 API Gateway로 요청을 전송하고, API Gateway는 요청을 적절한 백엔드 서비스로 라우팅합니다. API Gateway는 인증/인가, 트래픽 제어, 모니터링 등 부가 기능을 중앙에서 처리합니다.</li></ul><hr><h2 id=67-구조-및-아키텍처>6.7. 구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#67-구조-및-아키텍처>#</a></h2><ul><li><strong>필수 구성요소:</strong><ul><li><strong>API Gateway:</strong> 클라이언트 요청을 수신하여 적절한 백엔드 서비스로 라우팅하고, 부가 기능을 처리</li><li><strong>백엔드 서비스:</strong> 실제 비즈니스 로직을 처리하는 서비스</li></ul></li><li><strong>선택 구성요소:</strong><ul><li><strong>서비스 디스커버리:</strong> 동적으로 서비스 위치를 탐지</li><li><strong>모니터링/로깅 시스템:</strong> 요청/응답 모니터링 및 로깅</li><li><strong>인증/인가 시스템:</strong> 사용자 인증 및 권한 관리</li></ul></li></ul><hr><h2 id=68-구현-기법>6.8. 구현 기법<a hidden class=anchor aria-hidden=true href=#68-구현-기법>#</a></h2><ul><li><strong>API Gateway 서버 구축:</strong><ul><li>Nginx, Kong, Spring Cloud Gateway, AWS API Gateway 등</li></ul></li><li><strong>인증/인가 통합:</strong><ul><li>JWT, OAuth2 등</li></ul></li><li><strong>트래픽 제어:</strong><ul><li>로드 밸런싱, 레이트 리미팅, 서킷 브레이커 등</li></ul></li><li><strong>모니터링/로깅:</strong><ul><li>Prometheus, Grafana, ELK 등</li></ul></li><li><strong>서비스 디스커버리 연동:</strong><ul><li>Eureka, Consul 등</li></ul></li></ul><hr><h2 id=69-장점>6.9. 장점<a hidden class=anchor aria-hidden=true href=#69-장점>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>단일 진입점</td><td>클라이언트가 다양한 서비스에 직접 접근하지 않고, API Gateway를 통해 일관된 방식으로 요청</td></tr><tr><td></td><td>부가 기능 중앙화</td><td>인증/인가, 트래픽 제어, 모니터링 등 부가 기능을 중앙에서 일관되게 제공</td></tr><tr><td></td><td>복잡성 추상화</td><td>클라이언트는 서비스의 내부 구조를 알 필요 없이, API Gateway를 통해 원하는 기능 사용</td></tr><tr><td></td><td>서비스 변경 영향 최소화</td><td>서비스 변경 시 클라이언트 영향 최소화</td></tr></tbody></table><hr><h2 id=610-단점과-문제점-그리고-해결방안>6.10. 단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#610-단점과-문제점-그리고-해결방안>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>단일 장애점</td><td>API Gateway 장애 시 전체 시스템 장애 가능</td><td>고가용성 구성, 장애 대응 정책</td></tr><tr><td></td><td>성능 병목</td><td>모든 요청이 API Gateway를 경유하므로 성능 병목 가능</td><td>확장성 설계, 캐싱 적용</td></tr><tr><td></td><td>복잡성 증가</td><td>API Gateway 자체의 복잡성 증가</td><td>표준화, 모듈화</td></tr></tbody></table><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>인증/인가 오류</td><td>인증/인가 시스템 장애</td><td>서비스 접근 불가</td><td>로깅, 모니터링</td><td>고가용성 구성</td><td>장애 대응 정책</td></tr><tr><td></td><td>트래픽 과부하</td><td>갑작스러운 트래픽 증가</td><td>시스템 장애</td><td>모니터링, 알림</td><td>레이트 리미팅</td><td>오토스케일링</td></tr></tbody></table><hr><h2 id=611-도전-과제>6.11. 도전 과제<a hidden class=anchor aria-hidden=true href=#611-도전-과제>#</a></h2><ul><li><strong>멀티 클라우드/하이브리드 환경 통합:</strong><ul><li>다양한 환경에서의 일관된 API Gateway 관리 필요</li></ul></li><li><strong>대규모 트래픽 처리:</strong><ul><li>많은 클라이언트 요청을 효율적으로 처리</li></ul></li><li><strong>서비스 메시와의 연동:</strong><ul><li>서비스 메시와 API Gateway의 역할 분담 및 연동</li></ul></li></ul><hr><h2 id=612-분류-기준에-따른-종류-및-유형>6.12. 분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#612-분류-기준에-따른-종류-및-유형>#</a></h2><table><thead><tr><th>구분</th><th>종류/유형</th><th>설명</th></tr></thead><tbody><tr><td>오픈소스</td><td>Kong, Nginx, Spring Cloud Gateway</td><td>다양한 기능, 커스터마이징 가능, 커뮤니티 활발</td></tr><tr><td>상용/관리형</td><td>AWS API Gateway, Azure API Management</td><td>클라우드 환경에 최적화, 관리형 서비스</td></tr><tr><td>경량형</td><td>Traefik, Envoy</td><td>경량, 간단한 환경에 적합</td></tr></tbody></table><hr><h2 id=613-실무-사용-예시>6.13. 실무 사용 예시<a hidden class=anchor aria-hidden=true href=#613-실무-사용-예시>#</a></h2><table><thead><tr><th>목적</th><th>사용 기술/서비스</th><th>효과/특징</th></tr></thead><tbody><tr><td>요청 라우팅</td><td>Kong, Nginx</td><td>다양한 서비스로 요청 라우팅</td></tr><tr><td>인증/인가</td><td>JWT, OAuth2</td><td>사용자 인증 및 권한 관리</td></tr><tr><td>트래픽 제어</td><td>레이트 리미팅, 로드 밸런싱</td><td>트래픽 제어 및 부하 분산</td></tr><tr><td>모니터링</td><td>Prometheus, Grafana</td><td>요청/응답 모니터링 및 시각화</td></tr></tbody></table><hr><h2 id=614-활용-사례>6.14. 활용 사례<a hidden class=anchor aria-hidden=true href=#614-활용-사례>#</a></h2><p><strong>사례: 온라인 쇼핑몰 마이크로서비스 환경</strong></p><ul><li><strong>시스템 구성:</strong><ul><li>상품 검색, 추천, 장바구니, 주문 등 각 기능별 마이크로서비스</li><li>AWS 기반 배포</li><li>AWS API Gateway 또는 Kong을 API Gateway로 사용</li></ul></li><li><strong>Workflow:</strong><ul><li>클라이언트(웹/모바일)는 API Gateway로 요청을 전송</li><li>API Gateway는 요청을 적절한 백엔드 서비스로 라우팅</li><li>API Gateway는 인증/인가, 트래픽 제어, 모니터링 등 부가 기능을 중앙에서 처리</li></ul></li><li><strong>API Gateway 역할:</strong><ul><li>단일 진입점 제공</li><li>부가 기능 중앙화</li><li>클라이언트와 서비스 간의 복잡성 추상화</li></ul></li><li><strong>차이점:</strong><ul><li>API Gateway 미적용 시, 클라이언트는 각 서비스에 직접 접근해야 하며, 인증/인가, 트래픽 제어 등은 각 서비스에서 별도로 구현해야 함</li><li>API Gateway 적용 시, 클라이언트는 API Gateway를 통해 일관된 방식으로 요청을 전송할 수 있고, 부가 기능은 중앙에서 일관되게 제공됨</li></ul></li></ul><p><strong>다이어그램(Text 기반):</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[Client] ---&gt; [API Gateway] ---&gt; [Search Service]
</span></span><span class=line><span class=cl>                        |
</span></span><span class=line><span class=cl>                        +---&gt; [Cart Service]
</span></span><span class=line><span class=cl>                        |
</span></span><span class=line><span class=cl>                        +---&gt; [Order Service]
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=615-구현-예시>6.15. 구현 예시<a hidden class=anchor aria-hidden=true href=#615-구현-예시>#</a></h2><p><strong>JavaScript 예시 (Express 기반 API Gateway, 라우팅 및 인증 예시)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span><span class=lnt id=hl-2-20><a class=lnlinks href=#hl-2-20>20</a>
</span><span class=lnt id=hl-2-21><a class=lnlinks href=#hl-2-21>21</a>
</span><span class=lnt id=hl-2-22><a class=lnlinks href=#hl-2-22>22</a>
</span><span class=lnt id=hl-2-23><a class=lnlinks href=#hl-2-23>23</a>
</span><span class=lnt id=hl-2-24><a class=lnlinks href=#hl-2-24>24</a>
</span><span class=lnt id=hl-2-25><a class=lnlinks href=#hl-2-25>25</a>
</span><span class=lnt id=hl-2-26><a class=lnlinks href=#hl-2-26>26</a>
</span><span class=lnt id=hl-2-27><a class=lnlinks href=#hl-2-27>27</a>
</span><span class=lnt id=hl-2-28><a class=lnlinks href=#hl-2-28>28</a>
</span><span class=lnt id=hl-2-29><a class=lnlinks href=#hl-2-29>29</a>
</span><span class=lnt id=hl-2-30><a class=lnlinks href=#hl-2-30>30</a>
</span><span class=lnt id=hl-2-31><a class=lnlinks href=#hl-2-31>31</a>
</span><span class=lnt id=hl-2-32><a class=lnlinks href=#hl-2-32>32</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>axios</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;axios&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>jwt</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;jsonwebtoken&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=nx>json</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 인증 미들웨어
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>authMiddleware</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>headers</span><span class=p>.</span><span class=nx>authorization</span><span class=o>?</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39; &#39;</span><span class=p>)[</span><span class=mi>1</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>token</span><span class=p>)</span> <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>401</span><span class=p>).</span><span class=nx>send</span><span class=p>(</span><span class=s1>&#39;Unauthorized&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>decoded</span> <span class=o>=</span> <span class=nx>jwt</span><span class=p>.</span><span class=nx>verify</span><span class=p>(</span><span class=nx>token</span><span class=p>,</span> <span class=s1>&#39;SECRET_KEY&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>req</span><span class=p>.</span><span class=nx>user</span> <span class=o>=</span> <span class=nx>decoded</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>401</span><span class=p>).</span><span class=nx>send</span><span class=p>(</span><span class=s1>&#39;Invalid token&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 라우팅 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/search&#39;</span><span class=p>,</span> <span class=nx>authMiddleware</span><span class=p>,</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;http://search-service/search&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>params</span><span class=o>:</span> <span class=nx>req</span><span class=p>.</span><span class=nx>query</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>send</span><span class=p>(</span><span class=nx>result</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/cart&#39;</span><span class=p>,</span> <span class=nx>authMiddleware</span><span class=p>,</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;http://cart-service/cart&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>params</span><span class=o>:</span> <span class=nx>req</span><span class=p>.</span><span class=nx>query</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>send</span><span class=p>(</span><span class=nx>result</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>3000</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;API Gateway running on port 3000&#39;</span><span class=p>));</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>실제 서비스에서는 AWS API Gateway, Kong, Nginx 등 다양한 솔루션을 사용할 수 있습니다.</p></blockquote><hr><h2 id=616-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>6.16. 실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#616-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>고가용성 구성</td><td>API Gateway 장애 시 전체 시스템 장애 방지</td><td>고가용성 설계, 장애 대응 정책</td></tr><tr><td>인증/인가 관리</td><td>인증/인가 시스템 장애 방지 및 보안 강화</td><td>고가용성 구성, 접근 로그 분석</td></tr><tr><td>트래픽 제어</td><td>갑작스러운 트래픽 증가에 대비한 트래픽 제어</td><td>레이트 리미팅, 오토스케일링</td></tr><tr><td>모니터링/로깅</td><td>요청/응답 모니터링 및 로깅 강화</td><td>모니터링 도구 연동</td></tr></tbody></table><hr><h2 id=617-최적화하기-위한-고려사항-및-주의할-점>6.17. 최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#617-최적화하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>캐싱 적용</td><td>반복 요청에 대한 응답 캐싱으로 성능 향상</td><td>캐싱 정책 적용, TTL 설정</td></tr><tr><td>확장성 설계</td><td>대규모 트래픽 처리 가능한 확장성 설계</td><td>오토스케일링, 분산 배포</td></tr><tr><td>모듈화</td><td>API Gateway 기능을 모듈화하여 관리 효율화</td><td>표준화, 모듈화</td></tr></tbody></table><hr><h2 id=618-기타-사항>6.18. 기타 사항<a hidden class=anchor aria-hidden=true href=#618-기타-사항>#</a></h2><ul><li><strong>API Gateway와 서비스 메시 차이:</strong><ul><li>API Gateway: 클라이언트와 서비스 간의 통합(남-북, north-south) 관리</li><li>서비스 메시: 서비스 간 통신(동-서, east-west) 관리</li></ul></li><li><strong>API Gateway는 마이크로서비스, 모놀리식, 서버리스 등 다양한 아키텍처에 적용 가능</strong></li></ul><hr><h2 id=7-주제에-대한-추가-조사-내용>7. 주제에 대한 추가 조사 내용<a hidden class=anchor aria-hidden=true href=#7-주제에-대한-추가-조사-내용>#</a></h2><p>현재 추가 조사 내용이 없으므로 생략.</p><hr><h2 id=8-주제와-관련하여-주목할-내용>8. 주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#8-주제와-관련하여-주목할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>API Gateway</td><td>단일 진입점</td><td>클라이언트 요청을 중앙에서 수신하여 적절한 서비스로 라우팅</td></tr><tr><td></td><td></td><td>부가 기능 중앙화</td><td>인증/인가, 트래픽 제어, 모니터링 등 부가 기능을 중앙에서 일관되게 제공</td></tr><tr><td>기능</td><td>라우팅</td><td>요청 라우팅</td><td>클라이언트 요청을 적절한 서비스로 전달</td></tr><tr><td></td><td>인증/인가</td><td>보안</td><td>사용자 인증 및 권한 관리</td></tr><tr><td></td><td>트래픽 제어</td><td>트래픽 관리</td><td>레이트 리미팅, 로드 밸런싱 등 트래픽 제어</td></tr><tr><td>구현</td><td>오픈소스</td><td>Kong, Nginx</td><td>다양한 기능, 커스터마이징 가능</td></tr><tr><td></td><td>상용/관리형</td><td>AWS API Gateway, Azure API Management</td><td>클라우드 환경에 최적화, 관리형 서비스</td></tr></tbody></table><hr><h2 id=9-반드시-학습해야할-내용>9. 반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#9-반드시-학습해야할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>API Gateway</td><td>단일 진입점</td><td>클라이언트 요청을 중앙에서 수신하여 적절한 서비스로 라우팅하는 방식</td></tr><tr><td></td><td></td><td>부가 기능 중앙화</td><td>인증/인가, 트래픽 제어, 모니터링 등 부가 기능을 중앙에서 처리하는 방법</td></tr><tr><td>기능</td><td>라우팅</td><td>요청 라우팅</td><td>클라이언트 요청을 적절한 서비스로 전달하는 방법</td></tr><tr><td></td><td>인증/인가</td><td>보안</td><td>사용자 인증 및 권한 관리 방법</td></tr><tr><td></td><td>트래픽 제어</td><td>트래픽 관리</td><td>레이트 리미팅, 로드 밸런싱 등 트래픽 제어 방법</td></tr><tr><td>구현</td><td>오픈소스</td><td>Kong, Nginx</td><td>오픈소스 API Gateway 솔루션 활용 방법</td></tr><tr><td></td><td>상용/관리형</td><td>AWS API Gateway, Azure API Management</td><td>클라우드 기반 API Gateway 솔루션 활용 방법</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>API Gateway</td><td>클라이언트와 백엔드 서비스 간의 중앙 집중형 통합 지점</td></tr><tr><td></td><td>단일 진입점</td><td>클라이언트가 다양한 서비스에 직접 접근하지 않고, 중앙에서 요청을 처리</td></tr><tr><td></td><td>부가 기능 중앙화</td><td>인증/인가, 트래픽 제어, 모니터링 등 부가 기능을 중앙에서 처리</td></tr><tr><td>기능</td><td>라우팅</td><td>클라이언트 요청을 적절한 서비스로 전달</td></tr><tr><td></td><td>인증/인가</td><td>사용자 인증 및 권한 관리</td></tr><tr><td></td><td>트래픽 제어</td><td>레이트 리미팅, 로드 밸런싱 등 트래픽 제어</td></tr><tr><td>구현</td><td>Kong</td><td>오픈소스 API Gateway 솔루션</td></tr><tr><td></td><td>AWS API Gateway</td><td>AWS에서 제공하는 관리형 API Gateway 서비스</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><a href=https://docs.microsoft.com/en-us/azure/architecture/patterns/api-gateway>Microsoft Docs: API Gateway pattern</a></li><li><a href=https://aws.amazon.com/api-gateway/>AWS: What is an API Gateway?</a></li><li><a href=https://konghq.com/learning-center/api-gateway/>Kong: What is an API Gateway?</a></li><li><a href=https://www.nginx.com/blog/deploying-nginx-plus-as-an-api-gateway/>Nginx: API Gateway with Nginx</a></li><li><a href=https://spring.io/projects/spring-cloud-gateway>Spring: Spring Cloud Gateway</a></li></ul><hr><h2 id=1-태그-제안>1️⃣ 태그 제안<a hidden class=anchor aria-hidden=true href=#1-태그-제안>#</a></h2><ul><li>API‑Gateway</li><li>Microservices‑Architecture</li><li>Integration‑Patterns</li><li>Cloud‑Native‑Networking</li></ul><hr><h2 id=2-분류-구조-타당성-분석>2️⃣ 분류 구조 타당성 분석<a hidden class=anchor aria-hidden=true href=#2-분류-구조-타당성-분석>#</a></h2><p>API Gateway Pattern은 <strong>클라이언트 요청과 마이크로서비스 사이를 중재하는 구조적 설계 패턴</strong>입니다.
&ldquo;Computer Science and Engineering > Software Engineering > Design and Architecture > Architecture Patterns > Integration Patterns"에 적합하며,
동시에 클라우드 네이티브 및 DevOps 환경에서도 중요한 역할을 하므로 <strong>DevOps and Platform Engineering</strong> 또는 <strong>Systems and Infrastructure</strong>와의 연계 보강도 추천됩니다.</p><hr><h2 id=3-주제-요약-200자-내외-1>3️⃣ 주제 요약 (200자 내외)<a hidden class=anchor aria-hidden=true href=#3-주제-요약-200자-내외-1>#</a></h2><blockquote><p>API Gateway Pattern은 모든 클라이언트 요청을 단일 진입점인 게이트웨이에서 처리한 뒤, 내부 마이크로서비스로 라우팅하는 구조입니다. 인증, 로깅, 캐싱, 변환, QoS 등 기능을 중앙화해 서비스 복잡도를 줄이고 보안을 강화하며, 각 클라이언트별 맞춤 응답을 지원합니다.</p></blockquote><hr><h2 id=4-개요-250자-내외>4️⃣ 개요 (250자 내외)<a hidden class=anchor aria-hidden=true href=#4-개요-250자-내외>#</a></h2><blockquote><p>API Gateway Pattern은 마이크로서비스 아키텍처에서 클라이언트와 서비스 간 중재 계층 역할을 수행합니다.
이 계층은 인증·인가, 로드밸런싱, 요청 변환, 응답 집계, 로깅, 모니터링, QoS 개념을 통합하여 클라이언트와 내부 서비스가 분리되도록 돕습니다. 각 서비스는 비즈니스 로직에 집중하고, 클라이언트 지원은 게이트웨이에서 처리하여 유연하고 확장 가능한 API 관리 구조를 제공합니다.</p></blockquote><hr><h2 id=5-핵심-개념-1>5️⃣ 핵심 개념<a hidden class=anchor aria-hidden=true href=#5-핵심-개념-1>#</a></h2><ul><li><strong>단일 진입점 (Single Entry Point)</strong>: 모든 요청이 게이트웨이를 통해 유입되어 방화벽 역할 •</li><li><strong>요청 통합 (Aggregation)</strong>: 여러 서비스 응답을 하나로 합쳐 클라이언트에 전달</li><li><strong>보안 및 인증 (Security)</strong>: JWT, OAuth, API Key 기반 인증·인가 기능</li><li><strong>트래픽 제어</strong>: 로드밸런싱, 레이트 리미팅, 서킷 브레이커</li><li><strong>변환 및 필터링</strong>: URL 경로 매핑, 프로토콜 변환, 요청/응답 변조</li><li><strong>관찰성과 모니터링</strong>: 로그, 메트릭, 분산 트레이싱 위한 기능 제공</li><li><strong>클라이언트 맞춤 API</strong>: 클라이언트별 최적화된 API 인터페이스 공급</li></ul><h3 id=51-실무-구현-연관성>5.1 실무 구현 연관성<a hidden class=anchor aria-hidden=true href=#51-실무-구현-연관성>#</a></h3><ul><li>마이크로서비스가 REST, gRPC, WebSocket 등 다양한 API를 제공할 때 통합 인터페이스 역할</li><li>인증/인가 로직, 요청 검증, 버전 관리, API 버스 구성에 활용</li><li>운영환경에서 로깅·모니터링·추적을 중앙 집중하는 인터페이스로 이상 탐지 쉬워짐</li></ul><hr><p>다음 단계로 <strong>배경</strong>, <strong>목적·필요성</strong>, <strong>작동 원리 다이어그램</strong>, 그리고 <strong>구조·구성 요소</strong>를 포함한 심화 분석을 이어가겠습니다.</p><hr><h2 id=6-배경-background>6️⃣ 배경 (Background)<a hidden class=anchor aria-hidden=true href=#6-배경-background>#</a></h2><ul><li><p><strong>마이크로서비스 등장과 클라이언트 다양화</strong>
모놀리식에서 마이크로서비스로 전환하면서 수십 개 서비스가 등장하였고, 이들을 다양한 클라이언트(웹, 모바일, IoT 등)가 소비함에 따라 공용 연결점이 필요해졌습니다.</p></li><li><p><strong>클라이언트-서비스 간 복잡성 증가</strong>
각 클라이언트가 여러 서비스에 직접 요청을 보내는 구조는 네트워크 복잡도, 버전 관리, 인증/인가, 중복 로직 증가 등의 문제를 유발합니다.</p></li><li><p><strong>다운스트림 서비스 노출 최소화</strong>
내부 서비스의 URI/포맷이 외부로 노출되지 않도록 보호해야 할 필요성이 대두되었습니다.</p></li><li><p><strong>확장성과 제어 중심의 운용 요구</strong>
요청 속도 제한, SSL 종료, 로깅 및 트레이싱, 요청 집계, 오류 관리 등 네트워크 단위 제어가 필요해졌습니다.</p></li></ul><hr><h2 id=7-목적-및-필요성-purpose--necessity>7️⃣ 목적 및 필요성 (Purpose & Necessity)<a hidden class=anchor aria-hidden=true href=#7-목적-및-필요성-purpose--necessity>#</a></h2><table><thead><tr><th>목적</th><th>설명</th></tr></thead><tbody><tr><td>단일 진입점 구성</td><td>모든 요청을 하나의 게이트웨이로 집約하여 라우팅 및 보안 제어</td></tr><tr><td>보안 중앙 제어</td><td>인증과 인가를 전담하여 내부 서비스 보안 부담 최소화</td></tr><tr><td>요청 변환·프로토콜 통합</td><td>데이터를 기준에 맞게 변환, REST/gRPC/WebSocket 등 통합</td></tr><tr><td>트래픽 관리</td><td>레이트 리미팅, 캐싱, 로드밸런싱, 장애 격리 기능</td></tr><tr><td>응답 집계</td><td>멀티 서비스 데이터를 하나의 응답으로 결합하여 클라이언트 단순화</td></tr><tr><td>관찰성과 모니터링</td><td>트래픽 메트릭, 로그, 분산 트레이싱 수집 중앙화</td></tr><tr><td>클라이언트 맞춤형 API 유지</td><td>각 클라이언트 요구 사항에 따른 특정 API 제공 가능</td></tr></tbody></table><hr><h2 id=8-주요-원리--작동-원리-with-다이어그램>8️⃣ 주요 원리 & 작동 원리 with 다이어그램<a hidden class=anchor aria-hidden=true href=#8-주요-원리--작동-원리-with-다이어그램>#</a></h2><h3 id=주요-원리>주요 원리<a hidden class=anchor aria-hidden=true href=#주요-원리>#</a></h3><ul><li><strong>역방향 프록시 기반 라우팅</strong>: 클라이언트 요청을 내부 서비스 대상으로 프록시</li><li><strong>십자 필터(chain of filters)</strong>: 인증, 로깅, 변환 등을 순차 처리</li><li><strong>비즈니스 로직 분리</strong>: 게이트웨이에 네트워크 로직을 집중, 서비스는 비즈니스 로직 집중</li><li><strong>정책 기반 제어</strong>: 라우팅, 보안, QoS 설정을 선언·관리</li></ul><h3 id=작동-원리-다이어그램>작동 원리 다이어그램<a hidden class=anchor aria-hidden=true href=#작동-원리-다이어그램>#</a></h3><pre class=mermaid>flowchart LR
    A[Client] --&gt; G[API Gateway]
    G --&gt; |Auth| AuthSvc[Auth Service]
    G --&gt; |Route| Svc1[User Service]
    G --&gt; |Route| Svc2[Order Service]
    G --&gt; |Transform| Res
    Res --&gt; A
</pre><p>📝 <strong>설명</strong>:</p><ul><li>클라이언트는 Gateway에 요청</li><li>Gateway는 인증/인가, 필터링, 라우팅 수행</li><li>내부 서비스로 전달된 응답은 가공되어 클라이언트에게 반환</li></ul><hr><h2 id=9-구조-및-아키텍처-components--architecture>9️⃣ 구조 및 아키텍처 (Components & Architecture)<a hidden class=anchor aria-hidden=true href=#9-구조-및-아키텍처-components--architecture>#</a></h2><h3 id=필수-구성-요소>필수 구성 요소<a hidden class=anchor aria-hidden=true href=#필수-구성-요소>#</a></h3><table><thead><tr><th>구성 요소</th><th>역할</th></tr></thead><tbody><tr><td><strong>역방향 프록시</strong></td><td>HTTP/HTTPS 엔드포인트로 요청 수신 및 내부 서비스로 전달</td></tr><tr><td><strong>라우터</strong></td><td>URL, 헤더 기반 서비스 선택</td></tr><tr><td><strong>인증/인가 모듈</strong></td><td>JWT, OAuth, API Key 검증 기능</td></tr><tr><td><strong>필터 체인</strong></td><td>인증, 로깅, 변환 등의 체이닝 구조 구현</td></tr><tr><td><strong>성능 제어 기능</strong></td><td>레이트리미팅, 캐싱, 로드밸런싱, 서킷 브레이커 제공</td></tr><tr><td><strong>관찰성 모듈</strong></td><td>트래픽 모니터링, 로깅, 분산 트레이싱 수집</td></tr></tbody></table><h3 id=선택-구성-요소>선택 구성 요소<a hidden class=anchor aria-hidden=true href=#선택-구성-요소>#</a></h3><ul><li><strong>확장 플러그인</strong>: 사용자 정의 필터 또는 미들웨어</li><li><strong>게이트웨이 관리 UI</strong>: 설정, 대시보드, API 문서 뷰어 등</li><li><strong>API 문서 자동 생성</strong>: Swagger/OpenAPI 기반 문서 지원</li><li><strong>정책 저장소</strong>: 라우팅, 인증 정책을 저장하는 컨피그 레포지토리</li></ul><h3 id=아키텍처-도식>아키텍처 도식<a hidden class=anchor aria-hidden=true href=#아키텍처-도식>#</a></h3><pre class=mermaid>graph TD
    Client --&gt; Gateway[API Gateway]
    Gateway --&gt; AuthService[Authn/Authz]
    Gateway --&gt; ServiceA[…Backend Services…]
    Gateway --&gt; MetricsDB[Observability]
    Gateway --&gt; Cache[Cache Layer]
</pre><p>📝 <strong>설명</strong>:</p><ul><li>Gateway는 진입점 기능(인증, 라우팅, 캐싱 등)을 제공하며,</li><li>관찰성 및 모니터링을 위한 메트릭, 로그를 기록하고,</li><li>필요시 캐시 또는 정책 저장소와 상호 작용합니다.</li></ul><hr><p>다음 단계로는 <strong>구현 기법</strong>, <strong>장점/단점 표</strong>, <strong>실무 예시</strong>, <strong>활용 사례</strong>, <strong>코드 구현 예시</strong>, <strong>적용/최적화 고려사항</strong>, <strong>기타/주목/학습 사항</strong>, <strong>용어 정리</strong>, <strong>참고 및 출처</strong> 등을 이어서 작성하겠습니다.</p><hr><h2 id=-10-구현-기법-implementation-techniques>🔧 10️⃣ 구현 기법 (Implementation Techniques)<a hidden class=anchor aria-hidden=true href=#-10-구현-기법-implementation-techniques>#</a></h2><table><thead><tr><th>기법</th><th>적용 방식</th><th>목적</th><th>예시</th></tr></thead><tbody><tr><td><strong>매니지드 API 게이트웨이 서비스</strong></td><td>클라우드 제공형 (AWS API Gateway, Azure API Management, GCP API Gateway)</td><td>손쉬운 배포 및 확장</td><td>AWS Gateway + Lambda 조합</td></tr><tr><td><strong>리버스 프록시 기반 솔루션</strong></td><td>NGINX, HAProxy, Envoy 설정</td><td>고성능/유연성</td><td>Envoy + Lua 필터로 변환 필터링</td></tr><tr><td><strong>JavaScript 미들웨어</strong></td><td>Express.js, Koa 중간 레이어</td><td>빠른 MVP 제작</td><td>Express Gateway와 플러그인</td></tr><tr><td><strong>오픈소스 API 플랫폼</strong></td><td>Kong, Traefik, Ambassador</td><td>확장 가능한 플러그인 아키텍처</td><td>Kong + JWT 인증 플러그인</td></tr><tr><td><strong>Service Mesh 게이트웨이</strong></td><td>Istio Ingress Gateway, Linkerd</td><td>클라우드 네이티브 통합</td><td>Istio 리소스 기반 인증/라우팅</td></tr></tbody></table><hr><h2 id=-11-장점-advantages>🌟 11️⃣ 장점 (Advantages)<a hidden class=anchor aria-hidden=true href=#-11-장점-advantages>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>클라이언트-서비스 분리</td><td>클라이언트에 내부 구조 노출 없이 안정적 통합</td></tr><tr><td></td><td>보안 통합</td><td>중앙 인증/인가 모듈로 일관된 보안 적용</td></tr><tr><td></td><td>트래픽 관리</td><td>레이트 리미팅, 서킷 브레이커, 캐시로 성능 최적화</td></tr><tr><td></td><td>요청 변형 및 집계</td><td>URL, 헤더 조작 및 응답 조합 가능</td></tr><tr><td></td><td>운영 편의성</td><td>로그·모니터링 집약, API 문서화 도구 제공</td></tr><tr><td></td><td>확장성 및 유연성</td><td>사용자 커스텀 플러그인으로 기능 확장 가능</td></tr></tbody></table><hr><h2 id=-12-단점과-문제점--해결-방안>🛑 12️⃣ 단점과 문제점 & 해결 방안<a hidden class=anchor aria-hidden=true href=#-12-단점과-문제점--해결-방안>#</a></h2><h3 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>단일 진입점 부담</td><td>Gateway 장애 시 전체 서비스 영향</td><td>이중화 구성 및 로드밸런싱</td></tr><tr><td></td><td>지연 추가</td><td>요청-응답 지연 발생 가능</td><td>오프로드 또는 캐시 활용</td></tr><tr><td></td><td>설정 복잡성</td><td>구성 파일과 정책이 복잡해짐</td><td>중앙 UI / GitOps 관리</td></tr><tr><td></td><td>비용 증가</td><td>매니지드 버전 사용 시 비용 상승</td><td>트래픽 최적화 및 비용 모니터링</td></tr></tbody></table><h3 id=문제점--대응>문제점 + 대응<a hidden class=anchor aria-hidden=true href=#문제점--대응>#</a></h3><table><thead><tr><th>항목</th><th>원인</th><th>영향</th><th>탐지/진단</th><th>예방</th><th>해결</th></tr></thead><tbody><tr><td>Latency 증가</td><td>필터 및 변환 처리</td><td>응답 성능 저하</td><td>APM / 트레이싱</td><td>커넥션 풀, 캐시 사용</td><td>성능 튜닝, 병목 분석</td></tr><tr><td>인증 장애</td><td>클라이언트 인증 실패</td><td>서비스 가용성 저하</td><td>모니터링 로그</td><td>TLS/Token 갱신 자동화</td><td>인증 서버 이중화</td></tr><tr><td>정책 충돌</td><td>라우팅 규칙 겹침</td><td>잘못된 서비스 호출</td><td>테스트, 검증 파이프라인</td><td>CI/CD Gate 도입</td><td>정책 리팩토링</td></tr><tr><td>확장 지연</td><td>플러그인 부하 증가</td><td>Gateway 병목</td><td>메트릭 모니터링</td><td>Auto-scaling 구성</td><td>수평 확장, 캐시</td></tr></tbody></table><hr><h2 id=-13-실무-사용-예시>📌 13️⃣ 실무 사용 예시<a hidden class=anchor aria-hidden=true href=#-13-실무-사용-예시>#</a></h2><table><thead><tr><th>사용 사례</th><th>기술 스택</th><th>목표</th><th>구현 효과</th></tr></thead><tbody><tr><td>SaaS 앱 인증 통합</td><td>Kong + PostgreSQL</td><td>API Key, JWT 인증</td><td>서비스마다 보안 처리하지 않아도 됨</td></tr><tr><td>모바일 앱</td><td>AWS API Gateway + Lambda</td><td>HTTP/gRPC 인터페이스 통합</td><td>단일 SDK API노출</td></tr><tr><td>서비스 메시 게이트웨이</td><td>Istio Ingress Gateway</td><td>TLS 종료, Routing</td><td>Envoy 기반 정책 일관성</td></tr><tr><td>회사 내부 시스템</td><td>Express.js + OAuth</td><td>내부 시스템 조회 API 통합</td><td>팀별 접근 통제 중앙 집중화</td></tr></tbody></table><hr><h2 id=-14-활용-사례>📂 14️⃣ 활용 사례<a hidden class=anchor aria-hidden=true href=#-14-활용-사례>#</a></h2><h3 id=-실사례-이커머스-플랫폼의-api-게이트웨이-활용>🧠 실사례: 이커머스 플랫폼의 API 게이트웨이 활용<a hidden class=anchor aria-hidden=true href=#-실사례-이커머스-플랫폼의-api-게이트웨이-활용>#</a></h3><h4 id=구성-기술>구성 기술<a hidden class=anchor aria-hidden=true href=#구성-기술>#</a></h4><ul><li><code>Kong</code> 게이트웨이 + <code>Kubernetes</code></li><li>인증 서버(keycloak), 로깅/트레이싱(elastic, Jaeger)</li><li>내부 서비스: 상품, 주문, 사용자</li></ul><h4 id=구조도>구조도<a hidden class=anchor aria-hidden=true href=#구조도>#</a></h4><pre class=mermaid>graph TD
    WebApp --&gt; Kong[API Gateway]
    MobileApp --&gt; Kong
    Kong --&gt; Auth[Keycloak]
    Kong --&gt; ProductSvc
    Kong --&gt; OrderSvc
    Kong --&gt; UserSvc
    Kong --&gt; Logging/Tracing
</pre><h4 id=워크플로우>워크플로우<a hidden class=anchor aria-hidden=true href=#워크플로우>#</a></h4><ol><li>클라이언트 요청 → Kong</li><li>Kong이 JWT 토큰 검증 요청 → Keycloak</li><li>Kong이 내부 서비스로 요청 라우팅</li><li>응답 집계 및 필터링 후 클라이언트 반환</li></ol><h4 id=적용-효과>적용 효과<a hidden class=anchor aria-hidden=true href=#적용-효과>#</a></h4><ul><li>보안, 로깅, 트래픽 제어가 중앙 집중화되어 유연한 서비스 확장 가능</li></ul><h4 id=게이트웨이-유무-비교>게이트웨이 유무 비교<a hidden class=anchor aria-hidden=true href=#게이트웨이-유무-비교>#</a></h4><table><thead><tr><th>항목</th><th>게이트웨이 없음</th><th>게이트웨이 있음</th></tr></thead><tbody><tr><td>보안</td><td>각 서비스마다 인증 로직 필요</td><td>Kong에서 중앙 처리</td></tr><tr><td>네트워크 패턴</td><td>클라이언트마다 다수 트래픽</td><td>단일 진입점 통제</td></tr><tr><td>개발 효율</td><td>서비스 별 보안 구현 중복</td><td>공통 영역 처리</td></tr></tbody></table><hr><h2 id=-15-구현-예시-nodejs--express-gateway>💻 15️⃣ 구현 예시 (Node.js + Express Gateway)<a hidden class=anchor aria-hidden=true href=#-15-구현-예시-nodejs--express-gateway>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// gateway.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>createProxyMiddleware</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;http-proxy-middleware&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>jwt</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express-jwt&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>jwt</span><span class=p>({</span> <span class=nx>secret</span><span class=o>:</span> <span class=s1>&#39;your-secret&#39;</span><span class=p>,</span> <span class=nx>algorithms</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;HS256&#39;</span><span class=p>]</span> <span class=p>}));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=s1>&#39;/user&#39;</span><span class=p>,</span> <span class=nx>createProxyMiddleware</span><span class=p>({</span> <span class=nx>target</span><span class=o>:</span> <span class=s1>&#39;http://user-service:3000&#39;</span><span class=p>,</span> <span class=nx>changeOrigin</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}));</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=s1>&#39;/order&#39;</span><span class=p>,</span> <span class=nx>createProxyMiddleware</span><span class=p>({</span> <span class=nx>target</span><span class=o>:</span> <span class=s1>&#39;http://order-service:3001&#39;</span><span class=p>,</span> <span class=nx>changeOrigin</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>8000</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Gateway running on port 8000&#39;</span><span class=p>));</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>JWT 인증 후 유효하면 <code>/user</code>, <code>/order</code> 경로로 라우팅</li></ul><hr><h2 id=-16-실무-적용-고려사항>⚙ 16️⃣ 실무 적용 고려사항<a hidden class=anchor aria-hidden=true href=#-16-실무-적용-고려사항>#</a></h2><table><thead><tr><th>고려사항</th><th>설명</th><th>권장 방안</th></tr></thead><tbody><tr><td>장애 대응</td><td>Gateway 다운 시 접속 불가</td><td>이중화 NLB+Autoscaling</td></tr><tr><td>보안</td><td>인증서/토큰 관리</td><td>Vault 기반 TLS & Key rotation</td></tr><tr><td>정책 관리</td><td>라우팅/인증 설정 복잡도</td><td>GitOps + PR 리뷰</td></tr><tr><td>모니터링</td><td>병목 서비스 식별 필요</td><td>Prometheus + Grafana + Tracing</td></tr><tr><td>필터 확장</td><td>커스텀 로직 연동</td><td>Plugin 아키텍처, SDK 제공</td></tr></tbody></table><hr><h2 id=-17-최적화-고려사항>🧩 17️⃣ 최적화 고려사항<a hidden class=anchor aria-hidden=true href=#-17-최적화-고려사항>#</a></h2><table><thead><tr><th>항목</th><th>설명</th><th>권장</th></tr></thead><tbody><tr><td>캐시 전략</td><td>정적 자원 대상 캐싱</td><td>TTL, ETag, Redis 백엔드</td></tr><tr><td>리소스 분리</td><td>플러그인마다 CPU 부담 증가</td><td>경량 플러그인 사용</td></tr><tr><td>배포 모드</td><td>무중단 업그레이드 필요</td><td>Blue/Green or Canary 배포</td></tr><tr><td>로깅 최적화</td><td>로그 대량 생산 시 저장 부담</td><td>샘플링 및 버퍼링 설정</td></tr><tr><td>인증 부하</td><td>인증 서버 빈번 호출</td><td>토큰 검증 cache</td></tr></tbody></table><hr><h2 id=-18-주목-이슈-및-학습-필요-기술>🌐 18️⃣ 주목 이슈 및 학습 필요 기술<a hidden class=anchor aria-hidden=true href=#-18-주목-이슈-및-학습-필요-기술>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>보안</td><td>JWT / OAuth2</td><td>토큰 기반 인증</td><td>게이트웨이 인증 핵심 모델</td></tr><tr><td>트래픽 제어</td><td>Rate Limiting</td><td>QoS 구현</td><td>Envoy 쿠스터 옵션 포함</td></tr><tr><td>배포</td><td>Mesh vs Gateway</td><td>인그레스 구조</td><td>mesh ingress와 API gateway 비교</td></tr><tr><td>모니터링</td><td>Distributed Tracing</td><td>Zipkin/Jaeger 연동</td><td>요청 흐름 파악 기준 구조</td></tr></tbody></table><hr><h2 id=-용어-정리>📝 용어 정리<a hidden class=anchor aria-hidden=true href=#-용어-정리>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>개념</td><td>API Gateway</td><td>클라이언트와 서비스 간의 중재 계층</td></tr><tr><td>구성 요소</td><td>Reverse Proxy</td><td>클라이언트 요청을 내부 서비스로 전달</td></tr><tr><td>보안</td><td>JWT</td><td>JSON Web Token, 인증 토큰 포맷</td></tr><tr><td>QoS</td><td>Rate Limiting</td><td>서비스 사용량 제한</td></tr><tr><td>인증</td><td>OAuth2</td><td>권한 부여 프레임워크</td></tr><tr><td>트레이싱</td><td>Distributed Tracing</td><td>여러 서비스 호출 연속 추적</td></tr></tbody></table><hr><h2 id=-참고-및-출처>📚 참고 및 출처<a hidden class=anchor aria-hidden=true href=#-참고-및-출처>#</a></h2><ul><li><a href=https://martinfowler.com/articles/api-gateway.html>Martin Fowler: API Gateway Pattern</a></li><li><a href=https://www.nginx.com/solutions/api-gateway/>Nginx as API Gateway</a></li><li><a href=https://konghq.com/>Kong – Open Source API Gateway</a></li><li><a href=https://aws.amazon.com/api-gateway/>AWS API Gateway - 구조 안내</a></li><li><a href=https://istio.io/latest/docs/concepts/traffic-management/#ingress-gateway>Istio Ingress Gateway 설명</a></li></ul><hr><p>궁금한 내용이나 특정 구현체 비교 요청이 있다면 언제든지 말씀해 주세요!</p><p>계속해서 마지막 항목들을 정리합니다.</p><hr><h2 id=-19-기타-사항>🔍 19️⃣ 기타 사항<a hidden class=anchor aria-hidden=true href=#-19-기타-사항>#</a></h2><ul><li><p><strong>게이트웨이 내 인증 방식 비교</strong>
JWT는 클라이언트 부담이 작고 성능에 유리하지만, 만료 전 취소가 어렵고, OAuth2는 보안에 강하지만 토큰 관리가 복잡합니다.</p></li><li><p><strong>GraphQL Gateway와의 차이</strong>
API Gateway는 REST 기반 요청을 중심으로 하고, GraphQL Gateway는 쿼리 최적화 및 필드 단위 요청 제어에 더 유리합니다.</p></li><li><p><strong>API Composition vs Orchestration</strong>
게이트웨이는 &ldquo;Composition&rdquo; 중심. BPM(Business Process Management)과 같은 복잡한 흐름 제어는 Orchestrator에서 처리하는 것이 바람직합니다.</p></li><li><p><strong>게이트웨이 보안 취약점 예시</strong></p><ul><li>경로 우회(Path Traversal)</li><li>헤더 인젝션</li><li>인증 우회(Missing Auth)
→ OWASP API Security Top 10 참고 필요</li></ul></li></ul><hr><h2 id=-20-반드시-학습해야-할-내용>📌 20️⃣ 반드시 학습해야 할 내용<a hidden class=anchor aria-hidden=true href=#-20-반드시-학습해야-할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>인증</td><td>OAuth2, JWT</td><td>인증 방식 비교 및 구현</td><td>게이트웨이 보안 구현에 핵심</td></tr><tr><td>트래픽 관리</td><td>Rate Limiting / Quota</td><td>API 사용량 제한</td><td>QoS, Abuse 대응</td></tr><tr><td>아키텍처</td><td>Ingress vs Gateway vs Mesh</td><td>경계 아키텍처 이해</td><td>클러스터 외부/내부 트래픽 처리 비교</td></tr><tr><td>DevOps</td><td>API Gateway CI/CD</td><td>선언형 API 관리</td><td>YAML 기반 GitOps, 관리 자동화</td></tr><tr><td>관찰성</td><td>API 모니터링 구조</td><td>메트릭, 트레이싱</td><td>로그 + 트레이싱 조합으로 병목 진단</td></tr></tbody></table><hr><h2 id=-용어-정리-1>🧾 용어 정리<a hidden class=anchor aria-hidden=true href=#-용어-정리-1>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>API 설계</td><td>Gateway Pattern</td><td>단일 진입점에서 트래픽을 라우팅하고 제어하는 설계 방식</td></tr><tr><td>인증</td><td>OAuth2</td><td>위임 기반 인증 방식으로 클라이언트 토큰 발급 방식 정의</td></tr><tr><td>인증</td><td>JWT</td><td>JSON 기반의 구조화된 토큰, 인증 상태를 자체 포함</td></tr><tr><td>관찰성</td><td>Distributed Tracing</td><td>요청 흐름을 서비스 간 연계해 추적하는 방식</td></tr><tr><td>QoS</td><td>Rate Limiting</td><td>요청 수 제한으로 서비스 안정성 확보</td></tr><tr><td>아키텍처</td><td>Reverse Proxy</td><td>클라이언트 요청을 받아 내부로 전달하는 프록시 서버</td></tr></tbody></table><hr><h2 id=-참고-및-출처-1>📚 참고 및 출처<a hidden class=anchor aria-hidden=true href=#-참고-및-출처-1>#</a></h2><ul><li><a href=https://martinfowler.com/articles/api-gateway.html>Martin Fowler의 API Gateway 패턴 설명</a></li><li><a href=https://www.nginx.com/solutions/api-gateway/>NGINX API Gateway 개요</a></li><li><a href=https://docs.konghq.com/>Kong Gateway 공식 문서</a></li><li><a href=https://aws.amazon.com/api-gateway/>AWS API Gateway</a></li><li><a href=https://cloud.google.com/api-gateway>Google Cloud API Gateway</a></li><li><a href=https://istio.io/latest/docs/tasks/traffic-management/ingress/>Istio Ingress Gateway 가이드</a></li><li><a href=https://owasp.org/www-project-api-security/>OWASP API Security Top 10</a></li></ul><hr><p>안녕하세요! API Gateway Pattern에 대한 종합적인 조사와 분석을 진행하겠습니다. 먼저 관련 정보를 수집하여 체계적으로 정리해드리겠습니다.수집한 자료를 바탕으로 API Gateway Pattern에 대한 종합적인 분석을 수행하겠습니다.</p><h2 id=1-주제-태그>1. 주제 태그<a hidden class=anchor aria-hidden=true href=#1-주제-태그>#</a></h2><ul><li>API-Gateway-Pattern</li><li>Microservices-Architecture</li><li>Backend-For-Frontend</li><li>Integration-Patterns</li></ul><h2 id=2-분류-구조-적절성-검토>2. 분류 구조 적절성 검토<a hidden class=anchor aria-hidden=true href=#2-분류-구조-적절성-검토>#</a></h2><p>&ldquo;Computer Science and Engineering > Software Engineering > Design and Architecture > Architecture Patterns > Integration Patterns&rdquo;</p><p><strong>검토 결과</strong>: 현재 분류가 적절합니다. API Gateway Pattern은 마이크로서비스 아키텍처에서 클라이언트와 서비스 간의 통합을 담당하는 핵심적인 통합 패턴으로, Integration Patterns 카테고리에 정확히 위치합니다. 이 패턴은 소프트웨어 설계 및 아키텍처 영역의 핵심 요소이며, 시스템 간 연결과 통합을 위한 아키텍처 패턴으로 분류되는 것이 가장 적합합니다.</p><h2 id=3-주제-요약-설명>3. 주제 요약 설명<a hidden class=anchor aria-hidden=true href=#3-주제-요약-설명>#</a></h2><p>API Gateway Pattern은 마이크로서비스 아키텍처에서 클라이언트와 백엔드 서비스들 사이의 단일 진입점 역할을 하는 아키텍처 패턴입니다. 클라이언트 요청을 적절한 마이크로서비스로 라우팅하고, 인증, 보안, 로드 밸런싱, 캐싱 등의 공통 기능을 제공하여 시스템의 복잡성을 감소시키고 개발 효율성을 향상시킵니다.</p><h2 id=4-전체-개요>4. 전체 개요<a hidden class=anchor aria-hidden=true href=#4-전체-개요>#</a></h2><p>API Gateway Pattern은 현대 마이크로서비스 아키텍처의 핵심 구성 요소로, 분산 시스템에서 클라이언트와 서비스 간의 통신을 중앙화하고 최적화하는 패턴입니다. 단일 API 엔드포인트를 통해 여러 마이크로서비스에 대한 액세스를 제공하며, 요청 라우팅, 프로토콜 변환, 보안, 모니터링 등의 횡단 관심사를 처리합니다. Backend for Frontend (BFF) 변형을 포함하여 다양한 구현 방식을 지원하며, 시스템의 확장성과 유지보수성을 크게 향상시킵니다.</p><hr><h2 id=5-핵심-개념-2>5. 핵심 개념<a hidden class=anchor aria-hidden=true href=#5-핵심-개념-2>#</a></h2><p>API Gateway Pattern의 핵심 개념은 다음과 같습니다:</p><h3 id=51-단일-진입점-single-entry-point>5.1 단일 진입점 (Single Entry Point)<a hidden class=anchor aria-hidden=true href=#51-단일-진입점-single-entry-point>#</a></h3><ul><li>클라이언트가 모든 백엔드 서비스에 접근하기 위한 통합된 인터페이스 제공</li><li>내부 서비스 토폴로지를 클라이언트로부터 숨김으로써 시스템 복잡성 감소</li></ul><h3 id=52-리버스-프록시-reverse-proxy>5.2 리버스 프록시 (Reverse Proxy)<a hidden class=anchor aria-hidden=true href=#52-리버스-프록시-reverse-proxy>#</a></h3><ul><li>클라이언트 요청을 적절한 백엔드 서비스로 전달하는 중개자 역할</li><li>레이어 7 (HTTP) 수준에서의 지능적인 요청 라우팅 수행</li></ul><h3 id=53-api-조합-api-composition>5.3 API 조합 (API Composition)<a hidden class=anchor aria-hidden=true href=#53-api-조합-api-composition>#</a></h3><ul><li>여러 마이크로서비스의 응답을 하나의 통합된 응답으로 결합</li><li>클라이언트의 네트워크 호출 횟수를 감소시켜 성능 최적화</li></ul><h3 id=54-횡단-관심사-cross-cutting-concerns>5.4 횡단 관심사 (Cross-Cutting Concerns)<a hidden class=anchor aria-hidden=true href=#54-횡단-관심사-cross-cutting-concerns>#</a></h3><ul><li>인증, 인가, 로깅, 모니터링, 캐싱 등의 공통 기능을 중앙화</li><li>각 마이크로서비스에서 중복 구현을 방지</li></ul><h3 id=55-프로토콜-변환-protocol-translation>5.5 프로토콜 변환 (Protocol Translation)<a hidden class=anchor aria-hidden=true href=#55-프로토콜-변환-protocol-translation>#</a></h3><ul><li>클라이언트와 백엔드 서비스 간의 다양한 프로토콜 지원</li><li>HTTP, gRPC, WebSocket 등 다양한 통신 프로토콜 간 변환</li></ul><h3 id=56-실무-구현-연관성>5.6 실무 구현 연관성<a hidden class=anchor aria-hidden=true href=#56-실무-구현-연관성>#</a></h3><ul><li><strong>Kong, Istio, Envoy Gateway</strong>: 고성능 프록시 기반 구현체</li><li><strong>클라우드 네이티브 환경</strong>: Kubernetes Ingress Controller와의 통합</li><li><strong>마이크로서비스 메시</strong>: Service Mesh와의 상호보완적 관계</li><li><strong>DevOps 파이프라인</strong>: CI/CD 자동화와 Infrastructure as Code 지원</li></ul><hr><h2 id=6-배경>6. 배경<a hidden class=anchor aria-hidden=true href=#6-배경>#</a></h2><p>API Gateway Pattern의 등장 배경은 마이크로서비스 아키텍처의 확산과 밀접한 관련이 있습니다.</p><h3 id=61-모놀리식-아키텍처의-한계>6.1 모놀리식 아키텍처의 한계<a hidden class=anchor aria-hidden=true href=#61-모놀리식-아키텍처의-한계>#</a></h3><p>전통적인 모놀리식 아키텍처에서는 하나의 애플리케이션이 모든 기능을 담당했으나, 확장성과 유지보수성의 한계로 인해 마이크로서비스로의 전환이 필요해졌습니다.</p><h3 id=62-마이크로서비스-아키텍처의-복잡성>6.2 마이크로서비스 아키텍처의 복잡성<a hidden class=anchor aria-hidden=true href=#62-마이크로서비스-아키텍처의-복잡성>#</a></h3><p>마이크로서비스 아키텍처는 서비스를 독립적으로 배포하고 확장할 수 있는 장점을 제공하지만, 다음과 같은 새로운 문제점들을 야기했습니다:</p><ul><li>클라이언트가 여러 서비스와 직접 통신해야 하는 복잡성</li><li>각 서비스별 인증 및 보안 정책의 분산</li><li>네트워크 호출 증가로 인한 성능 저하</li></ul><h3 id=63-클라이언트-다양성-증대>6.3 클라이언트 다양성 증대<a hidden class=anchor aria-hidden=true href=#63-클라이언트-다양성-증대>#</a></h3><p>모바일, 웹, IoT 등 다양한 클라이언트 플랫폼의 등장으로 각기 다른 요구사항을 만족시켜야 하는 필요성이 증대되었습니다.</p><h3 id=64-netflix와-amazon의-선도적-채택>6.4 Netflix와 Amazon의 선도적 채택<a hidden class=anchor aria-hidden=true href=#64-netflix와-amazon의-선도적-채택>#</a></h3><p>Netflix와 Amazon 같은 대규모 기업들이 마이크로서비스 아키텍처를 성공적으로 구현하면서 API Gateway Pattern의 실용성이 입증되었습니다.</p><hr><h2 id=7-목적-및-필요성>7. 목적 및 필요성<a hidden class=anchor aria-hidden=true href=#7-목적-및-필요성>#</a></h2><h3 id=71-핵심-목적>7.1 핵심 목적<a hidden class=anchor aria-hidden=true href=#71-핵심-목적>#</a></h3><ul><li><strong>시스템 복잡성 감소</strong>: 클라이언트와 백엔드 서비스 간의 결합도 최소화</li><li><strong>개발 효율성 향상</strong>: 공통 기능의 중앙화를 통한 개발 생산성 증대</li><li><strong>운영 관리 단순화</strong>: 모니터링, 보안, 정책 적용의 통합 관리</li></ul><h3 id=72-비즈니스-필요성>7.2 비즈니스 필요성<a hidden class=anchor aria-hidden=true href=#72-비즈니스-필요성>#</a></h3><ul><li><strong>빠른 시장 대응</strong>: 새로운 클라이언트 요구사항에 신속한 대응</li><li><strong>운영 비용 절감</strong>: 인프라 자원의 효율적 활용</li><li><strong>사용자 경험 개선</strong>: 응답 시간 단축 및 안정성 향상</li></ul><h3 id=73-기술적-필요성>7.3 기술적 필요성<a hidden class=anchor aria-hidden=true href=#73-기술적-필요성>#</a></h3><ul><li><strong>서비스 디스커버리</strong>: 동적으로 변화하는 서비스 위치 관리</li><li><strong>장애 격리</strong>: 개별 서비스 장애가 전체 시스템에 미치는 영향 최소화</li><li><strong>확장성 보장</strong>: 트래픽 증가에 따른 탄력적 확장 지원</li></ul><hr><h2 id=8-주요-기능-및-역할>8. 주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#8-주요-기능-및-역할>#</a></h2><h3 id=81-요청-라우팅-request-routing>8.1 요청 라우팅 (Request Routing)<a hidden class=anchor aria-hidden=true href=#81-요청-라우팅-request-routing>#</a></h3><p>클라이언트 요청을 분석하여 적절한 백엔드 서비스로 전달하는 기능입니다.</p><p><strong>세부 기능:</strong></p><ul><li>URL 패턴 기반 라우팅</li><li>헤더 기반 라우팅</li><li>동적 서비스 디스커버리</li></ul><h3 id=82-api-조합-api-composition>8.2 API 조합 (API Composition)<a hidden class=anchor aria-hidden=true href=#82-api-조합-api-composition>#</a></h3><p>여러 마이크로서비스의 데이터를 결합하여 클라이언트에게 통합된 응답을 제공합니다.</p><p><strong>세부 기능:</strong></p><ul><li>다중 서비스 호출 조합</li><li>응답 데이터 병합</li><li>순차적/병렬 처리 최적화</li></ul><h3 id=83-인증-및-보안-authentication--security>8.3 인증 및 보안 (Authentication & Security)<a hidden class=anchor aria-hidden=true href=#83-인증-및-보안-authentication--security>#</a></h3><p>시스템 전체의 보안 정책을 일관되게 적용합니다.</p><p><strong>세부 기능:</strong></p><ul><li>OAuth 2.0, JWT 토큰 검증</li><li>mTLS (상호 TLS) 인증</li><li>API 키 관리</li><li>IP 화이트리스트/블랙리스트</li></ul><h3 id=84-속도-제한-rate-limiting>8.4 속도 제한 (Rate Limiting)<a hidden class=anchor aria-hidden=true href=#84-속도-제한-rate-limiting>#</a></h3><p>API 사용량을 제어하여 시스템을 보호합니다.</p><p><strong>세부 기능:</strong></p><ul><li>사용자별/IP별 요청 제한</li><li>동적 제한 정책 적용</li><li>버스트 트래픽 처리</li></ul><h3 id=85-캐싱-caching>8.5 캐싱 (Caching)<a hidden class=anchor aria-hidden=true href=#85-캐싱-caching>#</a></h3><p>자주 요청되는 데이터를 캐시하여 성능을 향상시킵니다.</p><p><strong>세부 기능:</strong></p><ul><li>응답 데이터 캐싱</li><li>조건부 캐싱</li><li>캐시 무효화 전략</li></ul><h3 id=86-로드-밸런싱-load-balancing>8.6 로드 밸런싱 (Load Balancing)<a hidden class=anchor aria-hidden=true href=#86-로드-밸런싱-load-balancing>#</a></h3><p>백엔드 서비스 인스턴스 간의 트래픽 분산을 담당합니다.</p><p><strong>세부 기능:</strong></p><ul><li>라운드 로빈, 가중치 기반 분산</li><li>헬스 체크 기반 인스턴스 관리</li><li>장애 감지 및 자동 복구</li></ul><hr><h2 id=9-특징>9. 특징<a hidden class=anchor aria-hidden=true href=#9-특징>#</a></h2><h3 id=91-중앙화된-관리>9.1 중앙화된 관리<a hidden class=anchor aria-hidden=true href=#91-중앙화된-관리>#</a></h3><p>모든 API 트래픽이 단일 지점을 통과하므로 일관된 정책 적용과 모니터링이 가능합니다.</p><h3 id=92-클라이언트-서비스-분리>9.2 클라이언트-서비스 분리<a hidden class=anchor aria-hidden=true href=#92-클라이언트-서비스-분리>#</a></h3><p>클라이언트는 백엔드 서비스의 세부 구현을 알 필요가 없어 느슨한 결합을 달성합니다.</p><h3 id=93-확장성과-유연성>9.3 확장성과 유연성<a hidden class=anchor aria-hidden=true href=#93-확장성과-유연성>#</a></h3><p>새로운 서비스 추가나 기존 서비스 변경 시 클라이언트 영향을 최소화합니다.</p><h3 id=94-성능-최적화>9.4 성능 최적화<a hidden class=anchor aria-hidden=true href=#94-성능-최적화>#</a></h3><p>캐싱, 압축, 프로토콜 최적화를 통해 전체적인 시스템 성능을 향상시킵니다.</p><hr><h2 id=10-핵심-원칙>10. 핵심 원칙<a hidden class=anchor aria-hidden=true href=#10-핵심-원칙>#</a></h2><h3 id=101-단일-책임-원칙-single-responsibility-principle>10.1 단일 책임 원칙 (Single Responsibility Principle)<a hidden class=anchor aria-hidden=true href=#101-단일-책임-원칙-single-responsibility-principle>#</a></h3><p>API Gateway는 요청 라우팅과 횡단 관심사 처리에만 집중해야 합니다.</p><h3 id=102-최소-지식-원칙-principle-of-least-knowledge>10.2 최소 지식 원칙 (Principle of Least Knowledge)<a hidden class=anchor aria-hidden=true href=#102-최소-지식-원칙-principle-of-least-knowledge>#</a></h3><p>클라이언트는 API Gateway 뒤의 서비스 구조를 알 필요가 없어야 합니다.</p><h3 id=103-개방-폐쇄-원칙-open-closed-principle>10.3 개방-폐쇄 원칙 (Open-Closed Principle)<a hidden class=anchor aria-hidden=true href=#103-개방-폐쇄-원칙-open-closed-principle>#</a></h3><p>새로운 기능 추가는 가능하되 기존 기능 변경은 최소화해야 합니다.</p><h3 id=104-장애-격리-원칙-failure-isolation>10.4 장애 격리 원칙 (Failure Isolation)<a hidden class=anchor aria-hidden=true href=#104-장애-격리-원칙-failure-isolation>#</a></h3><p>개별 서비스 장애가 전체 시스템에 영향을 주지 않도록 설계되어야 합니다.</p><hr><h2 id=11-주요-원리>11. 주요 원리<a hidden class=anchor aria-hidden=true href=#11-주요-원리>#</a></h2><h3 id=111-facade-패턴-적용>11.1 Facade 패턴 적용<a hidden class=anchor aria-hidden=true href=#111-facade-패턴-적용>#</a></h3><p>복잡한 백엔드 시스템을 단순한 인터페이스로 추상화합니다.</p><pre class=mermaid>graph TD
    A[Client] --&gt; B[API Gateway]
    B --&gt; C[Service 1]
    B --&gt; D[Service 2]
    B --&gt; E[Service 3]
    B --&gt; F[Service 4]
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style D fill:#e8f5e8
    style E fill:#e8f5e8
    style F fill:#e8f5e8
</pre><h3 id=112-proxy-패턴-구현>11.2 Proxy 패턴 구현<a hidden class=anchor aria-hidden=true href=#112-proxy-패턴-구현>#</a></h3><p>클라이언트와 서비스 간의 중개자 역할을 수행합니다.</p><h3 id=113-decorator-패턴-활용>11.3 Decorator 패턴 활용<a hidden class=anchor aria-hidden=true href=#113-decorator-패턴-활용>#</a></h3><p>기본 라우팅 기능에 보안, 로깅, 캐싱 등의 기능을 추가합니다.</p><hr><h2 id=12-작동-원리>12. 작동 원리<a hidden class=anchor aria-hidden=true href=#12-작동-원리>#</a></h2><p>API Gateway의 작동 원리는 다음과 같은 단계로 구성됩니다:</p><pre class=mermaid>sequenceDiagram
    participant C as Client
    participant G as API Gateway
    participant A as Authentication Service
    participant S1 as Service 1
    participant S2 as Service 2
    
    C-&gt;&gt;G: HTTP Request
    G-&gt;&gt;A: Validate Token
    A-&gt;&gt;G: Authentication Result
    
    alt Authentication Success
        G-&gt;&gt;S1: Forward Request (Part 1)
        G-&gt;&gt;S2: Forward Request (Part 2)
        S1-&gt;&gt;G: Response 1
        S2-&gt;&gt;G: Response 2
        G-&gt;&gt;G: Compose Response
        G-&gt;&gt;C: Aggregated Response
    else Authentication Failure
        G-&gt;&gt;C: 401 Unauthorized
    end
</pre><h3 id=121-요청-수신-및-파싱>12.1 요청 수신 및 파싱<a hidden class=anchor aria-hidden=true href=#121-요청-수신-및-파싱>#</a></h3><p>클라이언트로부터 HTTP 요청을 받아 헤더, 경로, 매개변수를 분석합니다.</p><h3 id=122-인증-및-인가-검증>12.2 인증 및 인가 검증<a hidden class=anchor aria-hidden=true href=#122-인증-및-인가-검증>#</a></h3><p>보안 정책에 따라 요청의 유효성을 검증합니다.</p><h3 id=123-라우팅-규칙-적용>12.3 라우팅 규칙 적용<a hidden class=anchor aria-hidden=true href=#123-라우팅-규칙-적용>#</a></h3><p>사전 정의된 규칙에 따라 적절한 백엔드 서비스를 선택합니다.</p><h3 id=124-요청-변환-및-전달>12.4 요청 변환 및 전달<a hidden class=anchor aria-hidden=true href=#124-요청-변환-및-전달>#</a></h3><p>필요에 따라 요청 형식을 변환하고 백엔드 서비스로 전달합니다.</p><h3 id=125-응답-처리-및-조합>12.5 응답 처리 및 조합<a hidden class=anchor aria-hidden=true href=#125-응답-처리-및-조합>#</a></h3><p>백엔드 서비스들의 응답을 받아 조합하고 변환합니다.</p><h3 id=126-클라이언트-응답-전송>12.6 클라이언트 응답 전송<a hidden class=anchor aria-hidden=true href=#126-클라이언트-응답-전송>#</a></h3><p>최종 처리된 응답을 클라이언트에게 전송합니다.</p><hr><h2 id=13-구조-및-아키텍처>13. 구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#13-구조-및-아키텍처>#</a></h2><h3 id=131-전체-아키텍처-구조>13.1 전체 아키텍처 구조<a hidden class=anchor aria-hidden=true href=#131-전체-아키텍처-구조>#</a></h3><pre class=mermaid>graph TB
    subgraph &#34;Client Layer&#34;
        A1[Web Browser]
        A2[Mobile App]
        A3[IoT Device]
    end
    
    subgraph &#34;API Gateway Layer&#34;
        B1[Load Balancer]
        B2[API Gateway Instance 1]
        B3[API Gateway Instance 2]
        B4[Rate Limiter]
        B5[Auth Service]
        B6[Cache]
    end
    
    subgraph &#34;Backend Services&#34;
        C1[User Service]
        C2[Order Service]
        C3[Payment Service]
        C4[Notification Service]
    end
    
    subgraph &#34;Infrastructure&#34;
        D1[Service Registry]
        D2[Configuration Store]
        D3[Monitoring]
        D4[Database]
    end
    
    A1 --&gt; B1
    A2 --&gt; B1
    A3 --&gt; B1
    
    B1 --&gt; B2
    B1 --&gt; B3
    
    B2 --&gt; B4
    B2 --&gt; B5
    B2 --&gt; B6
    
    B2 --&gt; C1
    B2 --&gt; C2
    B2 --&gt; C3
    B2 --&gt; C4
    
    B2 --&gt; D1
    B2 --&gt; D2
    B3 --&gt; D3
    
    C1 --&gt; D4
    C2 --&gt; D4
    C3 --&gt; D4
</pre><h3 id=132-필수-구성요소>13.2 필수 구성요소<a hidden class=anchor aria-hidden=true href=#132-필수-구성요소>#</a></h3><table><thead><tr><th>구성요소</th><th>기능</th><th>역할</th><th>특징</th></tr></thead><tbody><tr><td>게이트웨이 코어</td><td>요청 라우팅</td><td>핵심 프록시 기능 수행</td><td>고성능, 비동기 처리</td></tr><tr><td>인증 모듈</td><td>보안 검증</td><td>토큰 검증 및 사용자 인증</td><td>JWT, OAuth 2.0 지원</td></tr><tr><td>라우팅 엔진</td><td>경로 결정</td><td>요청을 적절한 서비스로 전달</td><td>동적 라우팅 지원</td></tr><tr><td>로드 밸런서</td><td>트래픽 분산</td><td>백엔드 인스턴스 간 부하 분산</td><td>헬스 체크 기능</td></tr></tbody></table><h3 id=133-선택-구성요소>13.3 선택 구성요소<a hidden class=anchor aria-hidden=true href=#133-선택-구성요소>#</a></h3><table><thead><tr><th>구성요소</th><th>기능</th><th>역할</th><th>특징</th></tr></thead><tbody><tr><td>캐시 레이어</td><td>성능 최적화</td><td>응답 데이터 임시 저장</td><td>Redis, Memcached 지원</td></tr><tr><td>API 조합기</td><td>데이터 결합</td><td>다중 서비스 응답 통합</td><td>병렬 처리 최적화</td></tr><tr><td>변환 엔진</td><td>프로토콜 변환</td><td>요청/응답 형식 변환</td><td>JSON, XML, gRPC 지원</td></tr><tr><td>모니터링 에이전트</td><td>관찰성</td><td>메트릭 수집 및 로깅</td><td>Prometheus, Grafana 연동</td></tr></tbody></table><hr><h2 id=14-구현-기법>14. 구현 기법<a hidden class=anchor aria-hidden=true href=#14-구현-기법>#</a></h2><h3 id=141-리버스-프록시-기반-구현>14.1 리버스 프록시 기반 구현<a hidden class=anchor aria-hidden=true href=#141-리버스-프록시-기반-구현>#</a></h3><p><strong>정의</strong>: Nginx, HAProxy 등의 프록시 서버를 기반으로 한 구현 방식</p><p><strong>구성</strong>:</p><ul><li>Nginx Plus 또는 HAProxy Enterprise</li><li>동적 설정 관리 모듈</li><li>헬스 체크 및 로드 밸런싱 기능</li></ul><p><strong>목적</strong>: 높은 성능과 안정성을 요구하는 환경에서 API Gateway 구현</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span><span class=lnt id=hl-10-12><a class=lnlinks href=#hl-10-12>12</a>
</span><span class=lnt id=hl-10-13><a class=lnlinks href=#hl-10-13>13</a>
</span><span class=lnt id=hl-10-14><a class=lnlinks href=#hl-10-14>14</a>
</span><span class=lnt id=hl-10-15><a class=lnlinks href=#hl-10-15>15</a>
</span><span class=lnt id=hl-10-16><a class=lnlinks href=#hl-10-16>16</a>
</span><span class=lnt id=hl-10-17><a class=lnlinks href=#hl-10-17>17</a>
</span><span class=lnt id=hl-10-18><a class=lnlinks href=#hl-10-18>18</a>
</span><span class=lnt id=hl-10-19><a class=lnlinks href=#hl-10-19>19</a>
</span><span class=lnt id=hl-10-20><a class=lnlinks href=#hl-10-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=line><span class=cl><span class=k>upstream</span> <span class=s>backend_service</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kn>server</span> <span class=n>service1.example.com</span><span class=p>:</span><span class=mi>8080</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>server</span> <span class=n>service2.example.com</span><span class=p>:</span><span class=mi>8080</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>health_check</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>server</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kn>listen</span> <span class=mi>80</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kn>location</span> <span class=s>/api/users</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_pass</span> <span class=s>http://user_service</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_set_header</span> <span class=s>Host</span> <span class=nv>$host</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>add_header</span> <span class=s>X-Gateway</span> <span class=s>&#34;nginx&#34;</span> <span class=s>always</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kn>location</span> <span class=s>/api/orders</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_pass</span> <span class=s>http://order_service</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>rate_limit</span> <span class=s>100r/m</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=142-클라우드-네이티브-게이트웨이>14.2 클라우드 네이티브 게이트웨이<a hidden class=anchor aria-hidden=true href=#142-클라우드-네이티브-게이트웨이>#</a></h3><p><strong>정의</strong>: Kubernetes 환경에 최적화된 Ingress Controller 기반 구현</p><p><strong>구성</strong>:</p><ul><li>Istio Gateway</li><li>Kong Ingress Controller</li><li>Ambassador/Emissary-Ingress</li></ul><p><strong>목적</strong>: 마이크로서비스의 동적 배포 및 확장 지원</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15>15</a>
</span><span class=lnt id=hl-11-16><a class=lnlinks href=#hl-11-16>16</a>
</span><span class=lnt id=hl-11-17><a class=lnlinks href=#hl-11-17>17</a>
</span><span class=lnt id=hl-11-18><a class=lnlinks href=#hl-11-18>18</a>
</span><span class=lnt id=hl-11-19><a class=lnlinks href=#hl-11-19>19</a>
</span><span class=lnt id=hl-11-20><a class=lnlinks href=#hl-11-20>20</a>
</span><span class=lnt id=hl-11-21><a class=lnlinks href=#hl-11-21>21</a>
</span><span class=lnt id=hl-11-22><a class=lnlinks href=#hl-11-22>22</a>
</span><span class=lnt id=hl-11-23><a class=lnlinks href=#hl-11-23>23</a>
</span><span class=lnt id=hl-11-24><a class=lnlinks href=#hl-11-24>24</a>
</span><span class=lnt id=hl-11-25><a class=lnlinks href=#hl-11-25>25</a>
</span><span class=lnt id=hl-11-26><a class=lnlinks href=#hl-11-26>26</a>
</span><span class=lnt id=hl-11-27><a class=lnlinks href=#hl-11-27>27</a>
</span><span class=lnt id=hl-11-28><a class=lnlinks href=#hl-11-28>28</a>
</span><span class=lnt id=hl-11-29><a class=lnlinks href=#hl-11-29>29</a>
</span><span class=lnt id=hl-11-30><a class=lnlinks href=#hl-11-30>30</a>
</span><span class=lnt id=hl-11-31><a class=lnlinks href=#hl-11-31>31</a>
</span><span class=lnt id=hl-11-32><a class=lnlinks href=#hl-11-32>32</a>
</span><span class=lnt id=hl-11-33><a class=lnlinks href=#hl-11-33>33</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>networking.istio.io/v1alpha3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Gateway</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>api-gateway</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>istio</span><span class=p>:</span><span class=w> </span><span class=l>ingressgateway</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>servers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>port</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>number</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>http</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>HTTP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>api.example.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>networking.istio.io/v1alpha3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>VirtualService</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>api-routes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>api.example.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>gateways</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>api-gateway</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>uri</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>prefix</span><span class=p>:</span><span class=w> </span><span class=l>/api/v1/users</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>route</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>destination</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=l>user-service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>port</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>number</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=143-backend-for-frontend-bff-패턴>14.3 Backend for Frontend (BFF) 패턴<a hidden class=anchor aria-hidden=true href=#143-backend-for-frontend-bff-패턴>#</a></h3><p><strong>정의</strong>: 클라이언트 유형별로 전용 API Gateway를 구현하는 방식</p><p><strong>구성</strong>:</p><ul><li>모바일 클라이언트용 BFF</li><li>웹 클라이언트용 BFF</li><li>파트너 API용 BFF</li></ul><p><strong>목적</strong>: 각 클라이언트의 특성에 최적화된 API 제공</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1> 1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2> 2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3> 3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4> 4</a>
</span><span class=lnt id=hl-12-5><a class=lnlinks href=#hl-12-5> 5</a>
</span><span class=lnt id=hl-12-6><a class=lnlinks href=#hl-12-6> 6</a>
</span><span class=lnt id=hl-12-7><a class=lnlinks href=#hl-12-7> 7</a>
</span><span class=lnt id=hl-12-8><a class=lnlinks href=#hl-12-8> 8</a>
</span><span class=lnt id=hl-12-9><a class=lnlinks href=#hl-12-9> 9</a>
</span><span class=lnt id=hl-12-10><a class=lnlinks href=#hl-12-10>10</a>
</span><span class=lnt id=hl-12-11><a class=lnlinks href=#hl-12-11>11</a>
</span><span class=lnt id=hl-12-12><a class=lnlinks href=#hl-12-12>12</a>
</span><span class=lnt id=hl-12-13><a class=lnlinks href=#hl-12-13>13</a>
</span><span class=lnt id=hl-12-14><a class=lnlinks href=#hl-12-14>14</a>
</span><span class=lnt id=hl-12-15><a class=lnlinks href=#hl-12-15>15</a>
</span><span class=lnt id=hl-12-16><a class=lnlinks href=#hl-12-16>16</a>
</span><span class=lnt id=hl-12-17><a class=lnlinks href=#hl-12-17>17</a>
</span><span class=lnt id=hl-12-18><a class=lnlinks href=#hl-12-18>18</a>
</span><span class=lnt id=hl-12-19><a class=lnlinks href=#hl-12-19>19</a>
</span><span class=lnt id=hl-12-20><a class=lnlinks href=#hl-12-20>20</a>
</span><span class=lnt id=hl-12-21><a class=lnlinks href=#hl-12-21>21</a>
</span><span class=lnt id=hl-12-22><a class=lnlinks href=#hl-12-22>22</a>
</span><span class=lnt id=hl-12-23><a class=lnlinks href=#hl-12-23>23</a>
</span><span class=lnt id=hl-12-24><a class=lnlinks href=#hl-12-24>24</a>
</span><span class=lnt id=hl-12-25><a class=lnlinks href=#hl-12-25>25</a>
</span><span class=lnt id=hl-12-26><a class=lnlinks href=#hl-12-26>26</a>
</span><span class=lnt id=hl-12-27><a class=lnlinks href=#hl-12-27>27</a>
</span><span class=lnt id=hl-12-28><a class=lnlinks href=#hl-12-28>28</a>
</span><span class=lnt id=hl-12-29><a class=lnlinks href=#hl-12-29>29</a>
</span><span class=lnt id=hl-12-30><a class=lnlinks href=#hl-12-30>30</a>
</span><span class=lnt id=hl-12-31><a class=lnlinks href=#hl-12-31>31</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// Mobile BFF - 경량화된 응답
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=s1>&#39;/mobile/api/user/:id&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>userService</span><span class=p>.</span><span class=nx>getUser</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>orders</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>orderService</span><span class=p>.</span><span class=nx>getUserOrders</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span> <span class=p>{</span> <span class=nx>limit</span>: <span class=kt>5</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span>: <span class=kt>user.id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span>: <span class=kt>user.name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>recentOrders</span>: <span class=kt>orders.map</span><span class=p>(</span><span class=nx>o</span> <span class=o>=&gt;</span> <span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>id</span>: <span class=kt>o.id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>status</span>: <span class=kt>o.status</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>total</span>: <span class=kt>o.total</span>
</span></span><span class=line><span class=cl>    <span class=p>}))</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Web BFF - 상세한 응답
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=s1>&#39;/web/api/user/:id&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>user</span><span class=p>,</span> <span class=nx>orders</span><span class=p>,</span> <span class=nx>preferences</span><span class=p>]</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>Promise</span><span class=p>.</span><span class=nx>all</span><span class=p>([</span>
</span></span><span class=line><span class=cl>    <span class=nx>userService</span><span class=p>.</span><span class=nx>getUser</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=nx>orderService</span><span class=p>.</span><span class=nx>getUserOrders</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=nx>userService</span><span class=p>.</span><span class=nx>getUserPreferences</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>]);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>user</span>: <span class=kt>user</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>orders</span>: <span class=kt>orders</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>preferences</span>: <span class=kt>preferences</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>recommendations</span>: <span class=kt>await</span> <span class=nx>recommendationService</span><span class=p>.</span><span class=nx>getRecommendations</span><span class=p>(</span><span class=nx>user</span><span class=p>.</span><span class=nx>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=144-서버리스-게이트웨이>14.4 서버리스 게이트웨이<a hidden class=anchor aria-hidden=true href=#144-서버리스-게이트웨이>#</a></h3><p><strong>정의</strong>: AWS Lambda, Azure Functions 등의 서버리스 플랫폼 기반 구현</p><p><strong>구성</strong>:</p><ul><li>AWS API Gateway + Lambda</li><li>Azure API Management + Functions</li><li>Google Cloud Endpoints + Cloud Functions</li></ul><p><strong>목적</strong>: 운영 오버헤드 최소화 및 사용량 기반 과금</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1> 1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2> 2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3> 3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4> 4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5> 5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6> 6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7> 7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8> 8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9> 9</a>
</span><span class=lnt id=hl-13-10><a class=lnlinks href=#hl-13-10>10</a>
</span><span class=lnt id=hl-13-11><a class=lnlinks href=#hl-13-11>11</a>
</span><span class=lnt id=hl-13-12><a class=lnlinks href=#hl-13-12>12</a>
</span><span class=lnt id=hl-13-13><a class=lnlinks href=#hl-13-13>13</a>
</span><span class=lnt id=hl-13-14><a class=lnlinks href=#hl-13-14>14</a>
</span><span class=lnt id=hl-13-15><a class=lnlinks href=#hl-13-15>15</a>
</span><span class=lnt id=hl-13-16><a class=lnlinks href=#hl-13-16>16</a>
</span><span class=lnt id=hl-13-17><a class=lnlinks href=#hl-13-17>17</a>
</span><span class=lnt id=hl-13-18><a class=lnlinks href=#hl-13-18>18</a>
</span><span class=lnt id=hl-13-19><a class=lnlinks href=#hl-13-19>19</a>
</span><span class=lnt id=hl-13-20><a class=lnlinks href=#hl-13-20>20</a>
</span><span class=lnt id=hl-13-21><a class=lnlinks href=#hl-13-21>21</a>
</span><span class=lnt id=hl-13-22><a class=lnlinks href=#hl-13-22>22</a>
</span><span class=lnt id=hl-13-23><a class=lnlinks href=#hl-13-23>23</a>
</span><span class=lnt id=hl-13-24><a class=lnlinks href=#hl-13-24>24</a>
</span><span class=lnt id=hl-13-25><a class=lnlinks href=#hl-13-25>25</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// AWS Lambda 기반 API Gateway 함수
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>exports</span><span class=p>.</span><span class=nx>handler</span> <span class=o>=</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>{</span> <span class=nx>httpMethod</span><span class=p>,</span> <span class=nx>path</span><span class=p>,</span> <span class=nx>headers</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>event</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 인증 검증
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>authResult</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>validateToken</span><span class=p>(</span><span class=nx>headers</span><span class=p>.</span><span class=nx>authorization</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>authResult</span><span class=p>.</span><span class=nx>valid</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>statusCode</span><span class=o>:</span> <span class=mi>401</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>body</span><span class=o>:</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>({</span> <span class=nx>error</span><span class=o>:</span> <span class=s1>&#39;Unauthorized&#39;</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 라우팅 로직
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=p>(</span><span class=nx>path</span><span class=p>.</span><span class=nx>startsWith</span><span class=p>(</span><span class=s1>&#39;/api/users&#39;</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kr>await</span> <span class=nx>routeToUserService</span><span class=p>(</span><span class=nx>event</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=nx>path</span><span class=p>.</span><span class=nx>startsWith</span><span class=p>(</span><span class=s1>&#39;/api/orders&#39;</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kr>await</span> <span class=nx>routeToOrderService</span><span class=p>(</span><span class=nx>event</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>statusCode</span><span class=o>:</span> <span class=mi>404</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>body</span><span class=o>:</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>({</span> <span class=nx>error</span><span class=o>:</span> <span class=s1>&#39;Not Found&#39;</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=15-장점>15. 장점<a hidden class=anchor aria-hidden=true href=#15-장점>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>복잡성 감소</td><td>클라이언트가 하나의 엔드포인트만 알면 되므로 시스템 복잡성이 크게 감소함</td></tr><tr><td>장점</td><td>성능 최적화</td><td>캐싱, 압축, 요청 집계를 통해 네트워크 트래픽과 응답 시간을 개선함</td></tr><tr><td>장점</td><td>보안 강화</td><td>중앙화된 인증/인가 처리로 일관된 보안 정책 적용이 가능함</td></tr><tr><td>장점</td><td>운영 효율성</td><td>모니터링, 로깅, 정책 관리가 한 곳에서 이루어져 운영 부담이 감소함</td></tr><tr><td>장점</td><td>클라이언트 단순화</td><td>모바일 앱의 배터리 사용량 감소 및 네트워크 사용량 최소화</td></tr><tr><td>장점</td><td>서비스 진화 지원</td><td>백엔드 서비스 변경 시 클라이언트 영향 없이 투명한 업데이트 가능</td></tr><tr><td>장점</td><td>프로토콜 유연성</td><td>HTTP, gRPC, WebSocket 등 다양한 프로토콜 간 변환 지원</td></tr><tr><td>장점</td><td>개발 생산성</td><td>공통 기능의 중앙화로 개발팀의 중복 작업 제거</td></tr></tbody></table><hr><h2 id=16-단점과-문제점-그리고-해결방안>16. 단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#16-단점과-문제점-그리고-해결방안>#</a></h2><h3 id=161-단점>16.1 단점<a hidden class=anchor aria-hidden=true href=#161-단점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>단일 장애점</td><td>API Gateway 장애 시 전체 시스템이 영향을 받음</td><td>고가용성 아키텍처 구성, 다중 인스턴스 배포</td></tr><tr><td>단점</td><td>성능 병목</td><td>모든 트래픽이 집중되어 병목현상 발생 가능</td><td>수평 확장, 로드 밸런싱, 캐싱 전략 적용</td></tr><tr><td>단점</td><td>복잡성 증가</td><td>추가적인 네트워크 홉으로 인한 지연 및 복잡성</td><td>최적화된 라우팅, 비동기 처리 패턴 적용</td></tr><tr><td>단점</td><td>개발 의존성</td><td>Gateway 업데이트가 필요한 경우 배포 의존성 발생</td><td>동적 설정, 플러그인 아키텍처 도입</td></tr><tr><td>단점</td><td>모니터링 복잡성</td><td>분산 시스템에서의 추적 및 디버깅 어려움</td><td>분산 추적, 통합 로깅 시스템 구축</td></tr></tbody></table><h3 id=162-문제점>16.2 문제점<a hidden class=anchor aria-hidden=true href=#162-문제점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>메모리 누수</td><td>캐시 데이터 축적, 연결 풀 관리 부실</td><td>성능 저하, 시스템 다운</td><td>메모리 사용량 모니터링</td><td>적절한 TTL 설정, 연결 풀 크기 제한</td><td>가비지 컬렉션 튜닝, 메모리 프로파일링</td></tr><tr><td>문제점</td><td>설정 불일치</td><td>수동 설정 관리, 환경별 차이</td><td>라우팅 오류, 보안 취약점</td><td>설정 검증 도구</td><td>Infrastructure as Code, 자동화 배포</td><td>GitOps, 설정 버전 관리</td></tr><tr><td>문제점</td><td>써킷 브레이커 오작동</td><td>임계값 설정 오류, 헬스체크 실패</td><td>서비스 접근 불가</td><td>헬스체크 로그 분석</td><td>적절한 임계값 설정, 단계적 복구</td><td>설정 튜닝, 수동 재설정</td></tr><tr><td>문제점</td><td>보안 토큰 만료</td><td>토큰 갱신 로직 부재</td><td>인증 실패, 서비스 중단</td><td>인증 실패 로그 모니터링</td><td>자동 토큰 갱신, 충분한 만료 시간</td><td>토큰 갱신 자동화, 백업 인증 방식</td></tr></tbody></table><hr><h2 id=17-도전-과제>17. 도전 과제<a hidden class=anchor aria-hidden=true href=#17-도전-과제>#</a></h2><h3 id=171-성능-및-확장성-과제>17.1 성능 및 확장성 과제<a hidden class=anchor aria-hidden=true href=#171-성능-및-확장성-과제>#</a></h3><p><strong>원인</strong>: 증가하는 트래픽과 다양한 클라이언트 요구사항
<strong>영향</strong>: 응답 지연, 시스템 다운타임
<strong>해결 방법</strong>:</p><ul><li>비동기 처리 아키텍처 도입</li><li>글로벌 로드 밸런싱</li><li>엣지 컴퓨팅 활용</li></ul><h3 id=172-보안-및-컴플라이언스-과제>17.2 보안 및 컴플라이언스 과제<a hidden class=anchor aria-hidden=true href=#172-보안-및-컴플라이언스-과제>#</a></h3><p><strong>원인</strong>: 데이터 프라이버시 규정 강화, 사이버 보안 위협 증가
<strong>영향</strong>: 법적 리스크, 데이터 유출
<strong>해결 방법</strong>:</p><ul><li>Zero Trust 아키텍처 적용</li><li>동적 보안 정책 관리</li><li>실시간 위협 탐지 시스템</li></ul><h3 id=173-마이크로서비스-생태계-통합>17.3 마이크로서비스 생태계 통합<a hidden class=anchor aria-hidden=true href=#173-마이크로서비스-생태계-통합>#</a></h3><p><strong>원인</strong>: 서비스 메시, 컨테이너 오케스트레이션과의 통합 복잡성
<strong>영향</strong>: 운영 복잡성 증가, 일관성 문제
<strong>해결 방법</strong>:</p><ul><li>표준화된 API 스펙 (OpenAPI, gRPC)</li><li>서비스 메시와의 네이티브 통합</li><li>통합 관찰성 플랫폼 구축</li></ul><hr><h2 id=18-분류-기준에-따른-종류-및-유형>18. 분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#18-분류-기준에-따른-종류-및-유형>#</a></h2><table><thead><tr><th>분류 기준</th><th>유형</th><th>특징</th><th>적용 상황</th></tr></thead><tbody><tr><td>배포 방식</td><td>클라우드 네이티브</td><td>Kubernetes 기반, 동적 확장</td><td>컨테이너 환경, MSA</td></tr><tr><td>배포 방식</td><td>온프레미스</td><td>전용 하드웨어, 고성능</td><td>레거시 시스템, 규제 환경</td></tr><tr><td>배포 방식</td><td>하이브리드</td><td>클라우드-온프레미스 연결</td><td>점진적 클라우드 전환</td></tr><tr><td>구현 방식</td><td>단일 게이트웨이</td><td>모든 서비스 통합 관리</td><td>소규모 시스템</td></tr><tr><td>구현 방식</td><td>BFF (Backend for Frontend)</td><td>클라이언트별 전용 게이트웨이</td><td>다양한 클라이언트 지원</td></tr><tr><td>구현 방식</td><td>마이크로 게이트웨이</td><td>서비스별 전용 게이트웨이</td><td>서비스 자율성 중시</td></tr><tr><td>기술 스택</td><td>프록시 기반</td><td>Nginx, HAProxy</td><td>고성능, 단순 라우팅</td></tr><tr><td>기술 스택</td><td>애플리케이션 기반</td><td>Spring Cloud Gateway, Zuul</td><td>복잡한 비즈니스 로직</td></tr><tr><td>기술 스택</td><td>서버리스</td><td>AWS API Gateway, Azure APIM</td><td>낮은 운영 부담</td></tr></tbody></table><hr><h2 id=19-실무-사용-예시>19. 실무 사용 예시<a hidden class=anchor aria-hidden=true href=#19-실무-사용-예시>#</a></h2><table><thead><tr><th>사용 목적</th><th>함께 사용되는 기술</th><th>효과</th><th>대표 사례</th></tr></thead><tbody><tr><td>마이크로서비스 통합</td><td>Kubernetes, Istio, Kong</td><td>서비스 간 통신 간소화, 보안 강화</td><td>Netflix, Amazon</td></tr><tr><td>모바일 앱 최적화</td><td>React Native, Flutter + BFF</td><td>네트워크 사용량 50% 감소</td><td>Spotify, Uber</td></tr><tr><td>레거시 시스템 현대화</td><td>API Gateway + ESB</td><td>점진적 마이그레이션 지원</td><td>금융권, 대기업</td></tr><tr><td>B2B API 플랫폼</td><td>OAuth 2.0, Rate Limiting</td><td>API 수익화, 파트너 관리</td><td>Stripe, Twilio</td></tr><tr><td>IoT 데이터 수집</td><td>MQTT, CoAP 프로토콜 변환</td><td>디바이스 관리 단순화</td><td>Tesla, Google Nest</td></tr><tr><td>멀티테넌트 SaaS</td><td>테넌트 라우팅, 격리</td><td>고객별 커스터마이징</td><td>Salesforce, Slack</td></tr></tbody></table><hr><h2 id=20-활용-사례>20. 활용 사례<a hidden class=anchor aria-hidden=true href=#20-활용-사례>#</a></h2><h3 id=201-netflix의-zuul-api-gateway-사례>20.1 Netflix의 Zuul API Gateway 사례<a hidden class=anchor aria-hidden=true href=#201-netflix의-zuul-api-gateway-사례>#</a></h3><p>Netflix는 수천 개의 마이크로서비스를 관리하기 위해 Zuul API Gateway를 개발하여 사용했습니다.</p><p><strong>시스템 구성</strong>:</p><ul><li>수백 대의 Zuul 인스턴스</li><li>Eureka 서비스 디스커버리</li><li>Hystrix 써킷 브레이커</li><li>Ribbon 로드 밸런서</li></ul><pre class=mermaid>graph TD
    A[Client Apps] --&gt; B[AWS ELB]
    B --&gt; C[Zuul Gateway Cluster]
    C --&gt; D[Eureka Service Registry]
    C --&gt; E[Hystrix Dashboard]
    C --&gt; F[User Service]
    C --&gt; G[Content Service]
    C --&gt; H[Recommendation Service]
    C --&gt; I[Billing Service]
    
    style A fill:#e1f5fe
    style C fill:#f3e5f5
    style F fill:#e8f5e8
    style G fill:#e8f5e8
    style H fill:#e8f5e8
    style I fill:#e8f5e8
</pre><p><strong>Workflow</strong>:</p><ol><li>클라이언트 요청이 AWS ELB를 통해 Zuul 클러스터로 전달</li><li>Zuul이 Eureka에서 서비스 위치 조회</li><li>Hystrix를 통한 장애 격리 및 써킷 브레이커 적용</li><li>Ribbon을 통한 인스턴스 로드 밸런싱</li><li>백엔드 서비스 호출 및 응답 전달</li></ol><p><strong>API Gateway 역할</strong>:</p><ul><li>동적 라우팅 및 모니터링</li><li>인증 및 보안 정책 적용</li><li>트래픽 제어 및 A/B 테스팅</li><li>실시간 통계 및 로깅</li></ul><p><strong>유무에 따른 차이점</strong>:</p><ul><li><strong>적용 전</strong>: 클라이언트가 직접 수백 개 서비스와 통신, 복잡한 서비스 디스커버리 필요</li><li><strong>적용 후</strong>: 단일 엔드포인트 통합, 중앙화된 정책 관리, 99.9% 가용성 달성</li></ul><hr><h2 id=21-구현-예시>21. 구현 예시<a hidden class=anchor aria-hidden=true href=#21-구현-예시>#</a></h2><p>다음은 Netflix 사례를 바탕으로 한 Node.js 기반 API Gateway 구현 예시입니다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1>  1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2>  2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3>  3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4>  4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5>  5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6>  6</a>
</span><span class=lnt id=hl-15-7><a class=lnlinks href=#hl-15-7>  7</a>
</span><span class=lnt id=hl-15-8><a class=lnlinks href=#hl-15-8>  8</a>
</span><span class=lnt id=hl-15-9><a class=lnlinks href=#hl-15-9>  9</a>
</span><span class=lnt id=hl-15-10><a class=lnlinks href=#hl-15-10> 10</a>
</span><span class=lnt id=hl-15-11><a class=lnlinks href=#hl-15-11> 11</a>
</span><span class=lnt id=hl-15-12><a class=lnlinks href=#hl-15-12> 12</a>
</span><span class=lnt id=hl-15-13><a class=lnlinks href=#hl-15-13> 13</a>
</span><span class=lnt id=hl-15-14><a class=lnlinks href=#hl-15-14> 14</a>
</span><span class=lnt id=hl-15-15><a class=lnlinks href=#hl-15-15> 15</a>
</span><span class=lnt id=hl-15-16><a class=lnlinks href=#hl-15-16> 16</a>
</span><span class=lnt id=hl-15-17><a class=lnlinks href=#hl-15-17> 17</a>
</span><span class=lnt id=hl-15-18><a class=lnlinks href=#hl-15-18> 18</a>
</span><span class=lnt id=hl-15-19><a class=lnlinks href=#hl-15-19> 19</a>
</span><span class=lnt id=hl-15-20><a class=lnlinks href=#hl-15-20> 20</a>
</span><span class=lnt id=hl-15-21><a class=lnlinks href=#hl-15-21> 21</a>
</span><span class=lnt id=hl-15-22><a class=lnlinks href=#hl-15-22> 22</a>
</span><span class=lnt id=hl-15-23><a class=lnlinks href=#hl-15-23> 23</a>
</span><span class=lnt id=hl-15-24><a class=lnlinks href=#hl-15-24> 24</a>
</span><span class=lnt id=hl-15-25><a class=lnlinks href=#hl-15-25> 25</a>
</span><span class=lnt id=hl-15-26><a class=lnlinks href=#hl-15-26> 26</a>
</span><span class=lnt id=hl-15-27><a class=lnlinks href=#hl-15-27> 27</a>
</span><span class=lnt id=hl-15-28><a class=lnlinks href=#hl-15-28> 28</a>
</span><span class=lnt id=hl-15-29><a class=lnlinks href=#hl-15-29> 29</a>
</span><span class=lnt id=hl-15-30><a class=lnlinks href=#hl-15-30> 30</a>
</span><span class=lnt id=hl-15-31><a class=lnlinks href=#hl-15-31> 31</a>
</span><span class=lnt id=hl-15-32><a class=lnlinks href=#hl-15-32> 32</a>
</span><span class=lnt id=hl-15-33><a class=lnlinks href=#hl-15-33> 33</a>
</span><span class=lnt id=hl-15-34><a class=lnlinks href=#hl-15-34> 34</a>
</span><span class=lnt id=hl-15-35><a class=lnlinks href=#hl-15-35> 35</a>
</span><span class=lnt id=hl-15-36><a class=lnlinks href=#hl-15-36> 36</a>
</span><span class=lnt id=hl-15-37><a class=lnlinks href=#hl-15-37> 37</a>
</span><span class=lnt id=hl-15-38><a class=lnlinks href=#hl-15-38> 38</a>
</span><span class=lnt id=hl-15-39><a class=lnlinks href=#hl-15-39> 39</a>
</span><span class=lnt id=hl-15-40><a class=lnlinks href=#hl-15-40> 40</a>
</span><span class=lnt id=hl-15-41><a class=lnlinks href=#hl-15-41> 41</a>
</span><span class=lnt id=hl-15-42><a class=lnlinks href=#hl-15-42> 42</a>
</span><span class=lnt id=hl-15-43><a class=lnlinks href=#hl-15-43> 43</a>
</span><span class=lnt id=hl-15-44><a class=lnlinks href=#hl-15-44> 44</a>
</span><span class=lnt id=hl-15-45><a class=lnlinks href=#hl-15-45> 45</a>
</span><span class=lnt id=hl-15-46><a class=lnlinks href=#hl-15-46> 46</a>
</span><span class=lnt id=hl-15-47><a class=lnlinks href=#hl-15-47> 47</a>
</span><span class=lnt id=hl-15-48><a class=lnlinks href=#hl-15-48> 48</a>
</span><span class=lnt id=hl-15-49><a class=lnlinks href=#hl-15-49> 49</a>
</span><span class=lnt id=hl-15-50><a class=lnlinks href=#hl-15-50> 50</a>
</span><span class=lnt id=hl-15-51><a class=lnlinks href=#hl-15-51> 51</a>
</span><span class=lnt id=hl-15-52><a class=lnlinks href=#hl-15-52> 52</a>
</span><span class=lnt id=hl-15-53><a class=lnlinks href=#hl-15-53> 53</a>
</span><span class=lnt id=hl-15-54><a class=lnlinks href=#hl-15-54> 54</a>
</span><span class=lnt id=hl-15-55><a class=lnlinks href=#hl-15-55> 55</a>
</span><span class=lnt id=hl-15-56><a class=lnlinks href=#hl-15-56> 56</a>
</span><span class=lnt id=hl-15-57><a class=lnlinks href=#hl-15-57> 57</a>
</span><span class=lnt id=hl-15-58><a class=lnlinks href=#hl-15-58> 58</a>
</span><span class=lnt id=hl-15-59><a class=lnlinks href=#hl-15-59> 59</a>
</span><span class=lnt id=hl-15-60><a class=lnlinks href=#hl-15-60> 60</a>
</span><span class=lnt id=hl-15-61><a class=lnlinks href=#hl-15-61> 61</a>
</span><span class=lnt id=hl-15-62><a class=lnlinks href=#hl-15-62> 62</a>
</span><span class=lnt id=hl-15-63><a class=lnlinks href=#hl-15-63> 63</a>
</span><span class=lnt id=hl-15-64><a class=lnlinks href=#hl-15-64> 64</a>
</span><span class=lnt id=hl-15-65><a class=lnlinks href=#hl-15-65> 65</a>
</span><span class=lnt id=hl-15-66><a class=lnlinks href=#hl-15-66> 66</a>
</span><span class=lnt id=hl-15-67><a class=lnlinks href=#hl-15-67> 67</a>
</span><span class=lnt id=hl-15-68><a class=lnlinks href=#hl-15-68> 68</a>
</span><span class=lnt id=hl-15-69><a class=lnlinks href=#hl-15-69> 69</a>
</span><span class=lnt id=hl-15-70><a class=lnlinks href=#hl-15-70> 70</a>
</span><span class=lnt id=hl-15-71><a class=lnlinks href=#hl-15-71> 71</a>
</span><span class=lnt id=hl-15-72><a class=lnlinks href=#hl-15-72> 72</a>
</span><span class=lnt id=hl-15-73><a class=lnlinks href=#hl-15-73> 73</a>
</span><span class=lnt id=hl-15-74><a class=lnlinks href=#hl-15-74> 74</a>
</span><span class=lnt id=hl-15-75><a class=lnlinks href=#hl-15-75> 75</a>
</span><span class=lnt id=hl-15-76><a class=lnlinks href=#hl-15-76> 76</a>
</span><span class=lnt id=hl-15-77><a class=lnlinks href=#hl-15-77> 77</a>
</span><span class=lnt id=hl-15-78><a class=lnlinks href=#hl-15-78> 78</a>
</span><span class=lnt id=hl-15-79><a class=lnlinks href=#hl-15-79> 79</a>
</span><span class=lnt id=hl-15-80><a class=lnlinks href=#hl-15-80> 80</a>
</span><span class=lnt id=hl-15-81><a class=lnlinks href=#hl-15-81> 81</a>
</span><span class=lnt id=hl-15-82><a class=lnlinks href=#hl-15-82> 82</a>
</span><span class=lnt id=hl-15-83><a class=lnlinks href=#hl-15-83> 83</a>
</span><span class=lnt id=hl-15-84><a class=lnlinks href=#hl-15-84> 84</a>
</span><span class=lnt id=hl-15-85><a class=lnlinks href=#hl-15-85> 85</a>
</span><span class=lnt id=hl-15-86><a class=lnlinks href=#hl-15-86> 86</a>
</span><span class=lnt id=hl-15-87><a class=lnlinks href=#hl-15-87> 87</a>
</span><span class=lnt id=hl-15-88><a class=lnlinks href=#hl-15-88> 88</a>
</span><span class=lnt id=hl-15-89><a class=lnlinks href=#hl-15-89> 89</a>
</span><span class=lnt id=hl-15-90><a class=lnlinks href=#hl-15-90> 90</a>
</span><span class=lnt id=hl-15-91><a class=lnlinks href=#hl-15-91> 91</a>
</span><span class=lnt id=hl-15-92><a class=lnlinks href=#hl-15-92> 92</a>
</span><span class=lnt id=hl-15-93><a class=lnlinks href=#hl-15-93> 93</a>
</span><span class=lnt id=hl-15-94><a class=lnlinks href=#hl-15-94> 94</a>
</span><span class=lnt id=hl-15-95><a class=lnlinks href=#hl-15-95> 95</a>
</span><span class=lnt id=hl-15-96><a class=lnlinks href=#hl-15-96> 96</a>
</span><span class=lnt id=hl-15-97><a class=lnlinks href=#hl-15-97> 97</a>
</span><span class=lnt id=hl-15-98><a class=lnlinks href=#hl-15-98> 98</a>
</span><span class=lnt id=hl-15-99><a class=lnlinks href=#hl-15-99> 99</a>
</span><span class=lnt id=hl-15-100><a class=lnlinks href=#hl-15-100>100</a>
</span><span class=lnt id=hl-15-101><a class=lnlinks href=#hl-15-101>101</a>
</span><span class=lnt id=hl-15-102><a class=lnlinks href=#hl-15-102>102</a>
</span><span class=lnt id=hl-15-103><a class=lnlinks href=#hl-15-103>103</a>
</span><span class=lnt id=hl-15-104><a class=lnlinks href=#hl-15-104>104</a>
</span><span class=lnt id=hl-15-105><a class=lnlinks href=#hl-15-105>105</a>
</span><span class=lnt id=hl-15-106><a class=lnlinks href=#hl-15-106>106</a>
</span><span class=lnt id=hl-15-107><a class=lnlinks href=#hl-15-107>107</a>
</span><span class=lnt id=hl-15-108><a class=lnlinks href=#hl-15-108>108</a>
</span><span class=lnt id=hl-15-109><a class=lnlinks href=#hl-15-109>109</a>
</span><span class=lnt id=hl-15-110><a class=lnlinks href=#hl-15-110>110</a>
</span><span class=lnt id=hl-15-111><a class=lnlinks href=#hl-15-111>111</a>
</span><span class=lnt id=hl-15-112><a class=lnlinks href=#hl-15-112>112</a>
</span><span class=lnt id=hl-15-113><a class=lnlinks href=#hl-15-113>113</a>
</span><span class=lnt id=hl-15-114><a class=lnlinks href=#hl-15-114>114</a>
</span><span class=lnt id=hl-15-115><a class=lnlinks href=#hl-15-115>115</a>
</span><span class=lnt id=hl-15-116><a class=lnlinks href=#hl-15-116>116</a>
</span><span class=lnt id=hl-15-117><a class=lnlinks href=#hl-15-117>117</a>
</span><span class=lnt id=hl-15-118><a class=lnlinks href=#hl-15-118>118</a>
</span><span class=lnt id=hl-15-119><a class=lnlinks href=#hl-15-119>119</a>
</span><span class=lnt id=hl-15-120><a class=lnlinks href=#hl-15-120>120</a>
</span><span class=lnt id=hl-15-121><a class=lnlinks href=#hl-15-121>121</a>
</span><span class=lnt id=hl-15-122><a class=lnlinks href=#hl-15-122>122</a>
</span><span class=lnt id=hl-15-123><a class=lnlinks href=#hl-15-123>123</a>
</span><span class=lnt id=hl-15-124><a class=lnlinks href=#hl-15-124>124</a>
</span><span class=lnt id=hl-15-125><a class=lnlinks href=#hl-15-125>125</a>
</span><span class=lnt id=hl-15-126><a class=lnlinks href=#hl-15-126>126</a>
</span><span class=lnt id=hl-15-127><a class=lnlinks href=#hl-15-127>127</a>
</span><span class=lnt id=hl-15-128><a class=lnlinks href=#hl-15-128>128</a>
</span><span class=lnt id=hl-15-129><a class=lnlinks href=#hl-15-129>129</a>
</span><span class=lnt id=hl-15-130><a class=lnlinks href=#hl-15-130>130</a>
</span><span class=lnt id=hl-15-131><a class=lnlinks href=#hl-15-131>131</a>
</span><span class=lnt id=hl-15-132><a class=lnlinks href=#hl-15-132>132</a>
</span><span class=lnt id=hl-15-133><a class=lnlinks href=#hl-15-133>133</a>
</span><span class=lnt id=hl-15-134><a class=lnlinks href=#hl-15-134>134</a>
</span><span class=lnt id=hl-15-135><a class=lnlinks href=#hl-15-135>135</a>
</span><span class=lnt id=hl-15-136><a class=lnlinks href=#hl-15-136>136</a>
</span><span class=lnt id=hl-15-137><a class=lnlinks href=#hl-15-137>137</a>
</span><span class=lnt id=hl-15-138><a class=lnlinks href=#hl-15-138>138</a>
</span><span class=lnt id=hl-15-139><a class=lnlinks href=#hl-15-139>139</a>
</span><span class=lnt id=hl-15-140><a class=lnlinks href=#hl-15-140>140</a>
</span><span class=lnt id=hl-15-141><a class=lnlinks href=#hl-15-141>141</a>
</span><span class=lnt id=hl-15-142><a class=lnlinks href=#hl-15-142>142</a>
</span><span class=lnt id=hl-15-143><a class=lnlinks href=#hl-15-143>143</a>
</span><span class=lnt id=hl-15-144><a class=lnlinks href=#hl-15-144>144</a>
</span><span class=lnt id=hl-15-145><a class=lnlinks href=#hl-15-145>145</a>
</span><span class=lnt id=hl-15-146><a class=lnlinks href=#hl-15-146>146</a>
</span><span class=lnt id=hl-15-147><a class=lnlinks href=#hl-15-147>147</a>
</span><span class=lnt id=hl-15-148><a class=lnlinks href=#hl-15-148>148</a>
</span><span class=lnt id=hl-15-149><a class=lnlinks href=#hl-15-149>149</a>
</span><span class=lnt id=hl-15-150><a class=lnlinks href=#hl-15-150>150</a>
</span><span class=lnt id=hl-15-151><a class=lnlinks href=#hl-15-151>151</a>
</span><span class=lnt id=hl-15-152><a class=lnlinks href=#hl-15-152>152</a>
</span><span class=lnt id=hl-15-153><a class=lnlinks href=#hl-15-153>153</a>
</span><span class=lnt id=hl-15-154><a class=lnlinks href=#hl-15-154>154</a>
</span><span class=lnt id=hl-15-155><a class=lnlinks href=#hl-15-155>155</a>
</span><span class=lnt id=hl-15-156><a class=lnlinks href=#hl-15-156>156</a>
</span><span class=lnt id=hl-15-157><a class=lnlinks href=#hl-15-157>157</a>
</span><span class=lnt id=hl-15-158><a class=lnlinks href=#hl-15-158>158</a>
</span><span class=lnt id=hl-15-159><a class=lnlinks href=#hl-15-159>159</a>
</span><span class=lnt id=hl-15-160><a class=lnlinks href=#hl-15-160>160</a>
</span><span class=lnt id=hl-15-161><a class=lnlinks href=#hl-15-161>161</a>
</span><span class=lnt id=hl-15-162><a class=lnlinks href=#hl-15-162>162</a>
</span><span class=lnt id=hl-15-163><a class=lnlinks href=#hl-15-163>163</a>
</span><span class=lnt id=hl-15-164><a class=lnlinks href=#hl-15-164>164</a>
</span><span class=lnt id=hl-15-165><a class=lnlinks href=#hl-15-165>165</a>
</span><span class=lnt id=hl-15-166><a class=lnlinks href=#hl-15-166>166</a>
</span><span class=lnt id=hl-15-167><a class=lnlinks href=#hl-15-167>167</a>
</span><span class=lnt id=hl-15-168><a class=lnlinks href=#hl-15-168>168</a>
</span><span class=lnt id=hl-15-169><a class=lnlinks href=#hl-15-169>169</a>
</span><span class=lnt id=hl-15-170><a class=lnlinks href=#hl-15-170>170</a>
</span><span class=lnt id=hl-15-171><a class=lnlinks href=#hl-15-171>171</a>
</span><span class=lnt id=hl-15-172><a class=lnlinks href=#hl-15-172>172</a>
</span><span class=lnt id=hl-15-173><a class=lnlinks href=#hl-15-173>173</a>
</span><span class=lnt id=hl-15-174><a class=lnlinks href=#hl-15-174>174</a>
</span><span class=lnt id=hl-15-175><a class=lnlinks href=#hl-15-175>175</a>
</span><span class=lnt id=hl-15-176><a class=lnlinks href=#hl-15-176>176</a>
</span><span class=lnt id=hl-15-177><a class=lnlinks href=#hl-15-177>177</a>
</span><span class=lnt id=hl-15-178><a class=lnlinks href=#hl-15-178>178</a>
</span><span class=lnt id=hl-15-179><a class=lnlinks href=#hl-15-179>179</a>
</span><span class=lnt id=hl-15-180><a class=lnlinks href=#hl-15-180>180</a>
</span><span class=lnt id=hl-15-181><a class=lnlinks href=#hl-15-181>181</a>
</span><span class=lnt id=hl-15-182><a class=lnlinks href=#hl-15-182>182</a>
</span><span class=lnt id=hl-15-183><a class=lnlinks href=#hl-15-183>183</a>
</span><span class=lnt id=hl-15-184><a class=lnlinks href=#hl-15-184>184</a>
</span><span class=lnt id=hl-15-185><a class=lnlinks href=#hl-15-185>185</a>
</span><span class=lnt id=hl-15-186><a class=lnlinks href=#hl-15-186>186</a>
</span><span class=lnt id=hl-15-187><a class=lnlinks href=#hl-15-187>187</a>
</span><span class=lnt id=hl-15-188><a class=lnlinks href=#hl-15-188>188</a>
</span><span class=lnt id=hl-15-189><a class=lnlinks href=#hl-15-189>189</a>
</span><span class=lnt id=hl-15-190><a class=lnlinks href=#hl-15-190>190</a>
</span><span class=lnt id=hl-15-191><a class=lnlinks href=#hl-15-191>191</a>
</span><span class=lnt id=hl-15-192><a class=lnlinks href=#hl-15-192>192</a>
</span><span class=lnt id=hl-15-193><a class=lnlinks href=#hl-15-193>193</a>
</span><span class=lnt id=hl-15-194><a class=lnlinks href=#hl-15-194>194</a>
</span><span class=lnt id=hl-15-195><a class=lnlinks href=#hl-15-195>195</a>
</span><span class=lnt id=hl-15-196><a class=lnlinks href=#hl-15-196>196</a>
</span><span class=lnt id=hl-15-197><a class=lnlinks href=#hl-15-197>197</a>
</span><span class=lnt id=hl-15-198><a class=lnlinks href=#hl-15-198>198</a>
</span><span class=lnt id=hl-15-199><a class=lnlinks href=#hl-15-199>199</a>
</span><span class=lnt id=hl-15-200><a class=lnlinks href=#hl-15-200>200</a>
</span><span class=lnt id=hl-15-201><a class=lnlinks href=#hl-15-201>201</a>
</span><span class=lnt id=hl-15-202><a class=lnlinks href=#hl-15-202>202</a>
</span><span class=lnt id=hl-15-203><a class=lnlinks href=#hl-15-203>203</a>
</span><span class=lnt id=hl-15-204><a class=lnlinks href=#hl-15-204>204</a>
</span><span class=lnt id=hl-15-205><a class=lnlinks href=#hl-15-205>205</a>
</span><span class=lnt id=hl-15-206><a class=lnlinks href=#hl-15-206>206</a>
</span><span class=lnt id=hl-15-207><a class=lnlinks href=#hl-15-207>207</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>httpProxy</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;http-proxy-middleware&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>rateLimit</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express-rate-limit&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>jwt</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;jsonwebtoken&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>redis</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;redis&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>APIGateway</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>cache</span> <span class=o>=</span> <span class=nx>redis</span><span class=p>.</span><span class=nx>createClient</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>serviceRegistry</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>setupMiddleware</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>setupRoutes</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>setupMiddleware</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 전역 미들웨어 설정
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=nx>json</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>corsHandler</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>authenticationMiddleware</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>rateLimitMiddleware</span><span class=p>());</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>corsHandler</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>res</span><span class=p>.</span><span class=nx>header</span><span class=p>(</span><span class=s1>&#39;Access-Control-Allow-Origin&#39;</span><span class=p>,</span> <span class=s1>&#39;*&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nx>res</span><span class=p>.</span><span class=nx>header</span><span class=p>(</span><span class=s1>&#39;Access-Control-Allow-Methods&#39;</span><span class=p>,</span> <span class=s1>&#39;GET,PUT,POST,DELETE,OPTIONS&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nx>res</span><span class=p>.</span><span class=nx>header</span><span class=p>(</span><span class=s1>&#39;Access-Control-Allow-Headers&#39;</span><span class=p>,</span> <span class=s1>&#39;Content-Type, Authorization&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>authenticationMiddleware</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 공개 경로는 인증 스킵
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>path</span><span class=p>.</span><span class=nx>startsWith</span><span class=p>(</span><span class=s1>&#39;/public&#39;</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>headers</span><span class=p>.</span><span class=nx>authorization</span><span class=o>?</span><span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=s1>&#39;Bearer &#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>token</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>401</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>error</span><span class=o>:</span> <span class=s1>&#39;Authentication required&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 캐시에서 토큰 검증 결과 확인
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>const</span> <span class=nx>cacheKey</span> <span class=o>=</span> <span class=sb>`auth:</span><span class=si>${</span><span class=nx>token</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>cachedResult</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>cache</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=nx>cachedResult</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>req</span><span class=p>.</span><span class=nx>user</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>cachedResult</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=c1>// JWT 토큰 검증
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>const</span> <span class=nx>decoded</span> <span class=o>=</span> <span class=nx>jwt</span><span class=p>.</span><span class=nx>verify</span><span class=p>(</span><span class=nx>token</span><span class=p>,</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>JWT_SECRET</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1>// 캐시에 저장 (5분 TTL)
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>cache</span><span class=p>.</span><span class=nx>setex</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>,</span> <span class=mi>300</span><span class=p>,</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>decoded</span><span class=p>));</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=nx>req</span><span class=p>.</span><span class=nx>user</span> <span class=o>=</span> <span class=nx>decoded</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>401</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>error</span><span class=o>:</span> <span class=s1>&#39;Invalid token&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>rateLimitMiddleware</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>rateLimit</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>windowMs</span><span class=o>:</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>,</span> <span class=c1>// 1분
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>max</span><span class=o>:</span> <span class=mi>100</span><span class=p>,</span> <span class=c1>// 요청 제한
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;Too many requests&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>standardHeaders</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>legacyHeaders</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>keyGenerator</span><span class=o>:</span> <span class=p>(</span><span class=nx>req</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 사용자별 제한
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>return</span> <span class=nx>req</span><span class=p>.</span><span class=nx>user</span><span class=o>?</span><span class=p>.</span><span class=nx>id</span> <span class=o>||</span> <span class=nx>req</span><span class=p>.</span><span class=nx>ip</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>setupRoutes</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 사용자 서비스 라우팅
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=s1>&#39;/api/users&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>createServiceProxy</span><span class=p>(</span><span class=s1>&#39;user-service&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 콘텐츠 서비스 라우팅  
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=s1>&#39;/api/content&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>createServiceProxy</span><span class=p>(</span><span class=s1>&#39;content-service&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 추천 서비스 라우팅
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=s1>&#39;/api/recommendations&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>createServiceProxy</span><span class=p>(</span><span class=s1>&#39;recommendation-service&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// API 조합 엔드포인트
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/api/dashboard/:userId&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>dashboardAggregator</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 헬스체크
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/health&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> <span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;healthy&#39;</span><span class=p>,</span> <span class=nx>timestamp</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>()</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>createServiceProxy</span><span class=p>(</span><span class=nx>serviceName</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>httpProxy</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>target</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>getServiceUrl</span><span class=p>(</span><span class=nx>serviceName</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=nx>changeOrigin</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>pathRewrite</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=sb>`^/api/</span><span class=si>${</span><span class=nx>serviceName</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;-&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span><span class=si>}</span><span class=sb>`</span><span class=p>]</span><span class=o>:</span> <span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nx>onProxyReq</span><span class=o>:</span> <span class=p>(</span><span class=nx>proxyReq</span><span class=p>,</span> <span class=nx>req</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 서비스 간 인증 헤더 추가
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=nx>proxyReq</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;X-User-ID&#39;</span><span class=p>,</span> <span class=nx>req</span><span class=p>.</span><span class=nx>user</span><span class=o>?</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=nx>proxyReq</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;X-Gateway-Request-ID&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>generateRequestId</span><span class=p>());</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nx>onProxyRes</span><span class=o>:</span> <span class=p>(</span><span class=nx>proxyRes</span><span class=p>,</span> <span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 응답 헤더 추가
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=nx>proxyRes</span><span class=p>.</span><span class=nx>headers</span><span class=p>[</span><span class=s1>&#39;X-Gateway&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;nodejs-gateway&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=nx>proxyRes</span><span class=p>.</span><span class=nx>headers</span><span class=p>[</span><span class=s1>&#39;X-Response-Time&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span> <span class=o>-</span> <span class=nx>req</span><span class=p>.</span><span class=nx>startTime</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nx>onError</span><span class=o>:</span> <span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`Proxy error for </span><span class=si>${</span><span class=nx>serviceName</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span> <span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>503</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> 
</span></span><span class=line><span class=cl>                    <span class=nx>error</span><span class=o>:</span> <span class=s1>&#39;Service unavailable&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>service</span><span class=o>:</span> <span class=nx>serviceName</span> 
</span></span><span class=line><span class=cl>                <span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>dashboardAggregator</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>userId</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>userId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>startTime</span> <span class=o>=</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// 병렬로 여러 서비스 호출
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=p>[</span><span class=nx>userProfile</span><span class=p>,</span> <span class=nx>recentContent</span><span class=p>,</span> <span class=nx>recommendations</span><span class=p>]</span> <span class=o>=</span> <span class=kr>await</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>allSettled</span><span class=p>([</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>callService</span><span class=p>(</span><span class=s1>&#39;user-service&#39;</span><span class=p>,</span> <span class=sb>`/profile/</span><span class=si>${</span><span class=nx>userId</span><span class=si>}</span><span class=sb>`</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>callService</span><span class=p>(</span><span class=s1>&#39;content-service&#39;</span><span class=p>,</span> <span class=sb>`/recent/</span><span class=si>${</span><span class=nx>userId</span><span class=si>}</span><span class=sb>?limit=10`</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>callService</span><span class=p>(</span><span class=s1>&#39;recommendation-service&#39;</span><span class=p>,</span> <span class=sb>`/user/</span><span class=si>${</span><span class=nx>userId</span><span class=si>}</span><span class=sb>?limit=5`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// 응답 조합
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>dashboard</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>user</span><span class=o>:</span> <span class=nx>userProfile</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=s1>&#39;fulfilled&#39;</span> <span class=o>?</span> <span class=nx>userProfile</span><span class=p>.</span><span class=nx>value</span> <span class=o>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>recentContent</span><span class=o>:</span> <span class=nx>recentContent</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=s1>&#39;fulfilled&#39;</span> <span class=o>?</span> <span class=nx>recentContent</span><span class=p>.</span><span class=nx>value</span> <span class=o>:</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>                <span class=nx>recommendations</span><span class=o>:</span> <span class=nx>recommendations</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=s1>&#39;fulfilled&#39;</span> <span class=o>?</span> <span class=nx>recommendations</span><span class=p>.</span><span class=nx>value</span> <span class=o>:</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>                <span class=nx>responseTime</span><span class=o>:</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span> <span class=o>-</span> <span class=nx>startTime</span>
</span></span><span class=line><span class=cl>            <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// 캐시에 저장 (1분 TTL)
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>cache</span><span class=p>.</span><span class=nx>setex</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=sb>`dashboard:</span><span class=si>${</span><span class=nx>userId</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=mi>60</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>dashboard</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=nx>dashboard</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Dashboard aggregation error:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>500</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>error</span><span class=o>:</span> <span class=s1>&#39;Failed to load dashboard&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>callService</span><span class=p>(</span><span class=nx>serviceName</span><span class=p>,</span> <span class=nx>path</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>serviceUrl</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>getServiceUrl</span><span class=p>(</span><span class=nx>serviceName</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>fetch</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>serviceUrl</span><span class=si>}${</span><span class=nx>path</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span> <span class=s1>&#39;application/json&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;X-Gateway-Request&#39;</span><span class=o>:</span> <span class=s1>&#39;true&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>response</span><span class=p>.</span><span class=nx>ok</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=sb>`Service </span><span class=si>${</span><span class=nx>serviceName</span><span class=si>}</span><span class=sb> returned </span><span class=si>${</span><span class=nx>response</span><span class=p>.</span><span class=nx>status</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kr>await</span> <span class=nx>response</span><span class=p>.</span><span class=nx>json</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>getServiceUrl</span><span class=p>(</span><span class=nx>serviceName</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 서비스 디스커버리에서 서비스 URL 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// 실제 환경에서는 Consul, Eureka 등을 사용
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>services</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;user-service&#39;</span><span class=o>:</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>USER_SERVICE_URL</span> <span class=o>||</span> <span class=s1>&#39;http://user-service:8080&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;content-service&#39;</span><span class=o>:</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>CONTENT_SERVICE_URL</span> <span class=o>||</span> <span class=s1>&#39;http://content-service:8080&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;recommendation-service&#39;</span><span class=o>:</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>RECOMMENDATION_SERVICE_URL</span> <span class=o>||</span> <span class=s1>&#39;http://recommendation-service:8080&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>services</span><span class=p>[</span><span class=nx>serviceName</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>generateRequestId</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sb>`</span><span class=si>${</span><span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span><span class=si>}</span><span class=sb>-</span><span class=si>${</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>().</span><span class=nx>toString</span><span class=p>(</span><span class=mi>36</span><span class=p>).</span><span class=nx>substr</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>9</span><span class=p>)</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>start</span><span class=p>(</span><span class=nx>port</span> <span class=o>=</span> <span class=mi>3000</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=nx>port</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`API Gateway running on port </span><span class=si>${</span><span class=nx>port</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 게이트웨이 시작
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>gateway</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>APIGateway</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>gateway</span><span class=p>.</span><span class=nx>start</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=nx>APIGateway</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>이 구현 예시는 Netflix의 핵심 기능들을 포함합니다:</p><ul><li>JWT 기반 인증 및 Redis 캐싱</li><li>사용자별 속도 제한</li><li>서비스별 프록시 라우팅</li><li>API 조합 (Dashboard Aggregator)</li><li>에러 처리 및 장애 격리</li><li>요청 추적을 위한 Request ID 생성</li></ul><hr><h2 id=22-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>22. 실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#22-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>카테고리</th><th>고려사항</th><th>주의할 점</th><th>권장사항</th></tr></thead><tbody><tr><td>설계</td><td>적절한 경계 설정</td><td>너무 많은 책임 부여 방지</td><td>단일 책임 원칙 준수, 마이크로 게이트웨이 고려</td></tr><tr><td>성능</td><td>캐싱 전략 수립</td><td>캐시 무효화 복잡성</td><td>Redis Cluster, 적절한 TTL 설정</td></tr><tr><td>보안</td><td>토큰 기반 인증</td><td>토큰 탈취 위험</td><td>짧은 만료 시간, Refresh Token 활용</td></tr><tr><td>모니터링</td><td>분산 추적 구현</td><td>로그 상관관계 부족</td><td>OpenTelemetry, Jaeger 도입</td></tr><tr><td>배포</td><td>무중단 배포</td><td>설정 변경 시 서비스 중단</td><td>Blue-Green, Canary 배포</td></tr><tr><td>확장성</td><td>수평 확장 설계</td><td>상태 저장으로 인한 확장 제약</td><td>무상태 설계, 외부 세션 저장소 활용</td></tr><tr><td>장애 대응</td><td>써킷 브레이커 설정</td><td>잘못된 임계값 설정</td><td>점진적 임계값 조정, 백압 메커니즘</td></tr></tbody></table><hr><h2 id=23-최적화하기-위한-고려사항-및-주의할-점>23. 최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#23-최적화하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>카테고리</th><th>고려사항</th><th>주의할 점</th><th>권장사항</th></tr></thead><tbody><tr><td>네트워크</td><td>연결 풀 관리</td><td>과도한 연결로 인한 리소스 낭비</td><td>Keep-Alive 활용, 적절한 풀 크기 설정</td></tr><tr><td>메모리</td><td>캐시 크기 최적화</td><td>메모리 부족으로 인한 성능 저하</td><td>LRU 정책, 메모리 사용량 모니터링</td></tr><tr><td>CPU</td><td>비동기 처리</td><td>블로킹 호출로 인한 성능 저하</td><td>이벤트 루프 기반 처리, 논블로킹 I/O</td></tr><tr><td>대역폭</td><td>응답 압축</td><td>압축 오버헤드</td><td>gzip, brotli 활용, 크기별 압축 정책</td></tr><tr><td>지연시간</td><td>지리적 분산</td><td>물리적 거리로 인한 지연</td><td>CDN, Edge Gateway 배치</td></tr><tr><td>처리량</td><td>배치 처리</td><td>개별 요청 처리로 인한 비효율</td><td>요청 배칭, 연결 재사용</td></tr><tr><td>가용성</td><td>다중 리전 배포</td><td>단일 리전 장애 위험</td><td>글로벌 로드 밸런서, 장애 조치 자동화</td></tr></tbody></table><hr><h2 id=용어-정리-1>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-1>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처 패턴</td><td>BFF (Backend for Frontend)</td><td>클라이언트 유형별로 전용 백엔드를 제공하는 패턴</td></tr><tr><td>아키텍처 패턴</td><td>Circuit Breaker (써킷 브레이커)</td><td>서비스 장애 시 연쇄 장애를 방지하는 패턴</td></tr><tr><td>아키텍처 패턴</td><td>Bulkhead (격벽)</td><td>리소스를 격리하여 장애 영향을 제한하는 패턴</td></tr><tr><td>네트워킹</td><td>Reverse Proxy (리버스 프록시)</td><td>클라이언트를 대신하여 서버에 요청을 전달하는 서버</td></tr><tr><td>네트워킹</td><td>Load Balancer (로드 밸런서)</td><td>여러 서버 간의 트래픽을 분산시키는 장치</td></tr><tr><td>네트워킹</td><td>TLS Termination</td><td>API Gateway에서 SSL/TLS 암호화를 해제하는 과정</td></tr><tr><td>보안</td><td>mTLS (Mutual TLS)</td><td>클라이언트와 서버가 상호 인증하는 보안 프로토콜</td></tr><tr><td>보안</td><td>JWT (JSON Web Token)</td><td>JSON 형태의 안전한 정보 전송을 위한 토큰 표준</td></tr><tr><td>보안</td><td>OAuth 2.0</td><td>API 접근 권한을 부여하는 인증 프레임워크</td></tr><tr><td>성능</td><td>CDN (Content Delivery Network)</td><td>전 세계에 분산된 콘텐츠 전송 네트워크</td></tr><tr><td>성능</td><td>Edge Computing (엣지 컴퓨팅)</td><td>데이터 소스와 가까운 곳에서 처리하는 컴퓨팅 패러다임</td></tr><tr><td>관찰성</td><td>Distributed Tracing (분산 추적)</td><td>마이크로서비스 간 요청 흐름을 추적하는 기술</td></tr><tr><td>관찰성</td><td>APM (Application Performance Monitoring)</td><td>애플리케이션 성능을 모니터링하고 관리하는 도구</td></tr><tr><td>플랫폼</td><td>Service Mesh (서비스 메시)</td><td>마이크로서비스 간 통신을 관리하는 인프라 레이어</td></tr><tr><td>플랫폼</td><td>Ingress Controller</td><td>Kubernetes에서 외부 트래픽을 내부 서비스로 라우팅하는 컨트롤러</td></tr></tbody></table><hr><h2 id=참고-및-출처-1>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-1>#</a></h2><ul><li><a href=https://www.solo.io/topics/api-gateway/api-gateway-pattern>API Gateway Pattern: 5 Design Options and How to Choose | Solo.io</a></li><li><a href=https://microservices.io/patterns/apigateway.html>Microservices Pattern: Pattern: API Gateway / Backends for Frontends</a></li><li><a href=https://www.geeksforgeeks.org/api-gateway-patterns-in-microservices/>API Gateway Patterns in Microservices - GeeksforGeeks</a></li><li><a href=https://docs.aws.amazon.com/prescriptive-guidance/latest/modernization-integrating-microservices/api-gateway-pattern.html>API gateway pattern - AWS Prescriptive Guidance</a></li><li><a href=https://learn.microsoft.com/en-us/dotnet/architecture/microservices/architect-microservice-container-applications/direct-client-to-microservice-communication-versus-the-api-gateway-pattern>The API gateway pattern versus the direct client-to-microservice communication - .NET | Microsoft Learn</a></li><li><a href=https://www.cloudbees.com/blog/design-patterns-in-api-gateways-and-microservices>Design Patterns in API Gateways and Microservices</a></li><li><a href=https://www.osohq.com/learn/api-gateway-patterns-for-microservices>API Gateway Patterns for Microservices</a></li><li><a href=https://freecontent.manning.com/the-api-gateway-pattern/>The API Gateway Pattern | Manning</a></li><li><a href=https://www.geeksforgeeks.org/what-is-api-gateway-system-design/>What is API Gateway | System Design? - GeeksforGeeks</a></li><li><a href=https://learn.microsoft.com/en-us/azure/architecture/microservices/design/gateway>API gateways - Azure Architecture Center | Microsoft Learn</a></li><li><a href=https://konghq.com/products/kong-gateway>Kong Gateway: Most Trusted Open Source API Gateway | Kong Inc.</a></li><li><a href=https://aws.amazon.com/blogs/mobile/backends-for-frontends-pattern/>Backends for Frontends Pattern | Front-End Web & Mobile</a></li><li><a href=https://www.codemag.com/Article/2203081/A-Deep-Dive-into-the-Back-End-for-Front-End-Pattern>A Deep Dive into the Back-End for Front-End Pattern</a></li><li><a href=https://learn.microsoft.com/en-us/azure/architecture/patterns/backends-for-frontends>Backends for Frontends Pattern - Azure Architecture Center | Microsoft Learn</a></li><li><a href=https://samnewman.io/patterns/architectural/bff/>Pattern: Backends For Frontends</a></li><li><a href=https://www.geeksforgeeks.org/backend-for-frontend-pattern/>Backend for Frontend Pattern - GeeksforGeeks</a></li></ul><hr><p>API Gateway Pattern은 마이크로서비스 아키텍처에서 중요한 역할을 하는 디자인 패턴이다.</p><p>API Gateway Pattern은 클라이언트와 백엔드 마이크로서비스 사이에 위치하는 중간 계층으로, 다음과 같은 주요 기능을 제공한다:</p><ol><li>단일 진입점: 클라이언트는 여러 마이크로서비스에 직접 접근하지 않고, API Gateway를 통해 단일 엔드포인트로 접근한다.</li><li>요청 라우팅: 클라이언트의 요청을 적절한 마이크로서비스로 전달한다.</li><li>프로토콜 변환: 클라이언트와 백엔드 서비스 간의 프로토콜 차이를 해결한다.</li><li>요청/응답 변환: 클라이언트의 요구사항에 맞게 데이터 형식을 변환한다.</li></ol><p><figure><img alt="API Gateway" loading=lazy src=/img/gateway.png><figcaption>https://learn.microsoft.com/ko-kr/azure/architecture/microservices/design/gateway</figcaption></figure></p><h3 id=api-gateway-pattern의-주요-기능>API Gateway Pattern의 주요 기능<a hidden class=anchor aria-hidden=true href=#api-gateway-pattern의-주요-기능>#</a></h3><ol><li><p>인증 및 인가<br>API Gateway는 모든 요청에 대해 인증과 인가를 처리한다.<br>이를 통해 보안을 중앙화하고 각 마이크로서비스의 부담을 줄일 수 있다.</p></li><li><p>로드 밸런싱<br>여러 서비스 인스턴스 간에 트래픽을 분산시켜 시스템의 안정성과 성능을 향상시킨다.</p></li><li><p>캐싱<br>자주 요청되는 데이터를 캐시하여 응답 시간을 단축하고 백엔드 서비스의 부하를 줄인다.</p></li><li><p>요청 집계<br>여러 마이크로서비스의 데이터를 조합하여 클라이언트에게 단일 응답으로 제공한다.<br>이는 네트워크 호출을 줄이고 클라이언트의 복잡성을 감소시킨다.</p></li><li><p>로깅 및 모니터링<br>모든 API 호출에 대한 로그를 생성하고 시스템의 상태를 모니터링한다.<br>이를 통해 문제 진단과 성능 최적화가 가능해진다.</p></li></ol><h3 id=api-gateway-pattern-구현-방법>API Gateway Pattern 구현 방법<a hidden class=anchor aria-hidden=true href=#api-gateway-pattern-구현-방법>#</a></h3><p>API Gateway를 구현하는 방법에는 크게 두 가지가 있다:</p><ol><li>프레임워크 사용: Spring Cloud Gateway, Netflix Zuul 등의 프레임워크를 사용하여 구현할 수 있다.</li><li>직접 구현: 특정 비즈니스 요구사항에 맞춰 API Gateway를 직접 개발할 수 있다.</li></ol><h3 id=api-gateway-pattern의-장단점>API Gateway Pattern의 장단점<a hidden class=anchor aria-hidden=true href=#api-gateway-pattern의-장단점>#</a></h3><p>장점:</p><ol><li>클라이언트와 마이크로서비스 간의 결합도 감소</li><li>중앙화된 보안 관리</li><li>성능 최적화 및 확장성 향상</li><li>클라이언트 요구사항에 맞는 API 제공 용이</li></ol><p>단점:</p><ol><li>추가적인 네트워크 홉으로 인한 지연 가능성</li><li>단일 실패 지점(Single Point of Failure) 위험</li><li>구현 및 관리의 복잡성 증가</li></ol><h3 id=api-gateway-pattern-사용-시-고려사항>API Gateway Pattern 사용 시 고려사항<a hidden class=anchor aria-hidden=true href=#api-gateway-pattern-사용-시-고려사항>#</a></h3><ol><li>고가용성 확보: API Gateway의 장애가 전체 시스템에 영향을 미치지 않도록 해야 한다.</li><li>성능 최적화: 캐싱, 비동기 처리 등을 통해 지연을 최소화해야 한다.</li><li>확장성 고려: 트래픽 증가에 대비하여 수평적 확장이 가능하도록 설계해야 한다.</li><li>모니터링 및 로깅: 시스템의 상태를 실시간으로 파악하고 문제를 신속히 해결할 수 있어야 한다.</li></ol><hr><h2 id=용어-정리-2>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-2>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><hr><h2 id=참고-및-출처-2>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-2>#</a></h2><hr></div></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>