<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Event-Driven Architecture | hyunyoun's Blog</title><meta name=keywords content="System-and-Software-Architecture,Architecture,Architecture-Styles,Event-Driven-Architecture"><meta name=description content="이벤트 기반 아키텍처는 시스템 내에서 발생하는 상태 변화나 중요한 사건을 '이벤트'로 정의하고, 이러한 이벤트의 생성, 전송, 처리를 중심으로 시스템을 구성하는 방식이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-styles/messaging-oriented-architecture/event-driven-architecture/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-styles/messaging-oriented-architecture/event-driven-architecture/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-styles/messaging-oriented-architecture/event-driven-architecture/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-styles/messaging-oriented-architecture/event-driven-architecture/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Event-Driven Architecture"><meta property="og:description" content="이벤트 기반 아키텍처는 시스템 내에서 발생하는 상태 변화나 중요한 사건을 '이벤트'로 정의하고, 이러한 이벤트의 생성, 전송, 처리를 중심으로 시스템을 구성하는 방식이다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Event-Driven Architecture"><meta name=twitter:description content="이벤트 기반 아키텍처는 시스템 내에서 발생하는 상태 변화나 중요한 사건을 '이벤트'로 정의하고, 이러한 이벤트의 생성, 전송, 처리를 중심으로 시스템을 구성하는 방식이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Event-Driven Architecture","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-styles/messaging-oriented-architecture/event-driven-architecture/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a></div><h1>Event-Driven Architecture</h1><div class=post-description>이벤트 기반 아키텍처는 시스템 내에서 발생하는 상태 변화나 중요한 사건을 &lsquo;이벤트&rsquo;로 정의하고, 이러한 이벤트의 생성, 전송, 처리를 중심으로 시스템을 구성하는 방식이다.</div></header><div class=post-content><h2 id=event-driven-architecture>Event-Driven Architecture<a hidden class=anchor aria-hidden=true href=#event-driven-architecture>#</a></h2><p>아래는 &ldquo;Event-Driven Architecture(이벤트 기반 아키텍처, EDA)&rdquo; 에 대한 IT 백엔드 개발자의 관점에서 이론과 실무를 아우르는 체계적 조사 및 정리입니다.</p><hr><h2 id=1-태그-tag>1. 태그 (Tag)<a hidden class=anchor aria-hidden=true href=#1-태그-tag>#</a></h2><p>Event-Driven-Architecture, Messaging-Broker, Asynchronous-Processing, Distributed-Systems</p><hr><h2 id=2-분류-계층-구조-타당성-분석>2. 분류 계층 구조 타당성 분석<a hidden class=anchor aria-hidden=true href=#2-분류-계층-구조-타당성-분석>#</a></h2><p><strong>분류:</strong><br>Computer Science and Engineering > Software Engineering > Design and Architecture > Architecture Styles and Patterns > Architecture Styles > Messaging</p><p><strong>근거:</strong><br>이벤트 기반 아키텍처 (EDA) 는 메시징 (Messaging) 기반의 아키텍처 스타일로, 이벤트 (상태 변화, 액션 등) 를 중심으로 시스템이 동작하며, 서비스 간 비동기 통신과 메시지 브로커 (예: Kafka, RabbitMQ) 를 핵심 요소로 사용합니다. 메시징 계층에 분류하는 것은 EDA 의 핵심 구조와 구현 방식에 부합합니다 <a href="https://en.wikipedia.org/wiki/Apache_Storm?utm_source=chatgpt.com" title="Apache Storm">1</a><a href="https://learn.microsoft.com/en-us/azure/architecture/guide/architecture-styles/event-driven?utm_source=chatgpt.com" title="Event-driven architecture style - Azure - Learn Microsoft">3</a>.</p><hr><h2 id=3-요약-문장-200-자-내외>3. 요약 문장 (200 자 내외)<a hidden class=anchor aria-hidden=true href=#3-요약-문장-200-자-내외>#</a></h2><p>이벤트 기반 아키텍처는 시스템 내 상태 변화를 이벤트로 캡처하고, 비동기적으로 처리하며, 서비스 간 결합도를 낮추어 확장성과 실시간 대응력을 높이는 구조입니다.</p><hr><h2 id=4-개요-250-자-내외>4. 개요 (250 자 내외)<a hidden class=anchor aria-hidden=true href=#4-개요-250-자-내외>#</a></h2><p>이벤트 기반 아키텍처는 시스템 내에서 발생하는 다양한 이벤트를 중심으로 서비스가 동작하며, 이벤트 생산자와 소비자가 메시지 브로커를 통해 비동기적으로 통신합니다. 이로써 실시간 처리, 확장성, 결합도 저하, 결함 격리, 유연성 등이 강화되어 현대 분산 시스템에서 널리 활용됩니다 <a href="https://tyk.io/learning-center/what-is-event-driven-architecture/?utm_source=chatgpt.com" title="What is event-driven architecture? - Tyk API Management">4</a><a href="https://en.wikipedia.org/wiki/Observer_pattern?utm_source=chatgpt.com" title="Observer pattern">5</a>.</p><hr><h2 id=5-핵심-개념>5. 핵심 개념<a hidden class=anchor aria-hidden=true href=#5-핵심-개념>#</a></h2><ul><li><strong>정의:</strong><ul><li>이벤트 기반 아키텍처 (EDA) 는 시스템 내에서 발생하는 이벤트 (상태 변화, 액션 등) 를 중심으로 서비스가 동작하며, 이벤트 생산자 (Producer) 와 소비자 (Consumer) 가 메시지 브로커 (Broker) 를 통해 비동기적으로 통신하는 소프트웨어 설계 패턴입니다 <a href="https://tyk.io/learning-center/what-is-event-driven-architecture/?utm_source=chatgpt.com" title="What is event-driven architecture? - Tyk API Management">4</a><a href="https://en.wikipedia.org/wiki/Observer_pattern?utm_source=chatgpt.com" title="Observer pattern">5</a>.</li></ul></li><li><strong>실무 구현 요소:</strong><ul><li>이벤트 생산자 (Producer): 이벤트를 생성 및 발행</li><li>이벤트 소비자 (Consumer): 이벤트를 구독 및 처리</li><li>메시지 브로커 (Broker): 이벤트를 중계 및 라우팅 (예: Kafka, RabbitMQ)</li><li>이벤트 스토어 (Event Store): 이벤트 내역 저장 및 재생 (옵션)</li><li>이벤트 처리 및 오케스트레이션: 이벤트에 따라 비즈니스 로직 실행</li></ul></li></ul><hr><h2 id=6-조사-내용>6. 조사 내용<a hidden class=anchor aria-hidden=true href=#6-조사-내용>#</a></h2><h3 id=1-배경>(1) 배경<a hidden class=anchor aria-hidden=true href=#1-배경>#</a></h3><p>EDA 는 기존의 동기적 요청 - 응답 방식의 한계 (확장성, 결합도, 실시간 처리 등) 를 극복하기 위해 등장했습니다. 분산 시스템, 마이크로서비스, IoT, 실시간 애플리케이션 등에서 널리 활용되며, 클라우드 네이티브 환경에서 필수적인 아키텍처로 자리잡았습니다 <a href="https://tyk.io/learning-center/what-is-event-driven-architecture/?utm_source=chatgpt.com" title="What is event-driven architecture? - Tyk API Management">4</a><a href="https://en.wikipedia.org/wiki/Apache_Storm?utm_source=chatgpt.com" title="Apache Storm">2</a>.</p><h3 id=2-목적-및-필요성>(2) 목적 및 필요성<a hidden class=anchor aria-hidden=true href=#2-목적-및-필요성>#</a></h3><ul><li><strong>목적:</strong><ul><li>실시간 처리 및 비동기 통신 지원</li><li>서비스 간 결합도 저하 및 확장성 증대</li><li>장애 격리 및 시스템 유연성 확보</li></ul></li><li><strong>필요성:</strong><ul><li>대규모 분산 시스템에서 효율적 데이터 흐름 관리</li><li>실시간 분석, 트랜잭션, 알림 등 다양한 비즈니스 요구 충족</li></ul></li></ul><h3 id=3-주요-기능-및-역할>(3) 주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#3-주요-기능-및-역할>#</a></h3><ul><li><strong>기능:</strong><ul><li>이벤트 생성, 발행, 구독, 처리</li><li>비동기 메시지 전달 및 처리</li><li>실시간 데이터 흐름 관리</li></ul></li><li><strong>역할:</strong><ul><li>서비스 간 결합도 낮춤</li><li>확장성 및 실시간 처리 지원</li><li>장애 격리 및 시스템 유연성 증대</li></ul></li></ul><h3 id=4-특징>(4) 특징<a hidden class=anchor aria-hidden=true href=#4-특징>#</a></h3><ul><li><strong>비동기 통신</strong></li><li><strong>서비스 간 결합도 저하</strong></li><li><strong>실시간 처리</strong></li><li><strong>확장성 및 유연성</strong></li><li><strong>장애 격리 및 내결함성</strong></li></ul><h3 id=5-핵심-원칙-및-주요-원리>(5) 핵심 원칙 및 주요 원리<a hidden class=anchor aria-hidden=true href=#5-핵심-원칙-및-주요-원리>#</a></h3><ul><li><strong>핵심 원칙:</strong><ul><li>이벤트 중심의 시스템 설계</li><li>서비스 간 결합도 최소화</li><li>비동기적 이벤트 처리</li></ul></li><li><strong>주요 원리:</strong><ul><li>이벤트 생산자와 소비자는 서로를 알 필요 없음</li><li>메시지 브로커를 통한 이벤트 라우팅</li><li>이벤트는 불변 (Immutable) 하며, 재생 가능</li></ul></li></ul><h4 id=주요-원리작동-원리-다이어그램-mermaidtext>주요 원리/작동 원리 다이어그램 (Mermaid/Text)<a hidden class=anchor aria-hidden=true href=#주요-원리작동-원리-다이어그램-mermaidtext>#</a></h4><pre class=mermaid>flowchart TD
    A[Event Producer] --&gt; B[Event Broker]
    B --&gt; C[Event Consumer 1]
    B --&gt; D[Event Consumer 2]
</pre><blockquote><p>이벤트 생산자가 이벤트를 브로커에 발행하면, 브로커가 이벤트를 소비자에게 비동기적으로 전달합니다 <a href="https://learn.microsoft.com/en-us/azure/architecture/guide/architecture-styles/event-driven?utm_source=chatgpt.com" title="Event-driven architecture style - Azure - Learn Microsoft">1</a><a href="https://en.wikipedia.org/wiki/Observer_pattern?utm_source=chatgpt.com" title="Observer pattern">5</a>.</p></blockquote><hr><h3 id=6-구조-및-아키텍처>(6) 구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#6-구조-및-아키텍처>#</a></h3><p><strong>구성 요소 및 기능/역할</strong></p><table><thead><tr><th>구성 요소</th><th>기능/역할</th><th>필수/선택</th></tr></thead><tbody><tr><td>이벤트 생산자</td><td>이벤트 생성 및 발행</td><td>필수</td></tr><tr><td>이벤트 브로커</td><td>이벤트 라우팅 및 전달</td><td>필수</td></tr><tr><td>이벤트 소비자</td><td>이벤트 구독 및 처리</td><td>필수</td></tr><tr><td>이벤트 스토어</td><td>이벤트 내역 저장 및 재생</td><td>선택</td></tr><tr><td>이벤트 프로세서</td><td>이벤트 처리 및 비즈니스 로직 실행</td><td>선택</td></tr></tbody></table><p><strong>구조 다이어그램 (Mermaid/Text)</strong></p><pre class=mermaid>flowchart LR
    Producer --&gt; Broker
    Broker --&gt; Consumer1
    Broker --&gt; Consumer2
    Broker --&gt; EventStore
</pre><hr><h3 id=7-구현-기법>(7) 구현 기법<a hidden class=anchor aria-hidden=true href=#7-구현-기법>#</a></h3><ul><li><strong>이벤트 브로커 선택:</strong><ul><li>Kafka, RabbitMQ, AWS SNS/SQS 등</li><li>목적에 따라 선택 (지연 시간, 확장성, 내구성 등)</li></ul></li><li><strong>이벤트 스키마 정의:</strong><ul><li>이벤트 타입, 페이로드, 메타데이터 등 명확한 스키마 설계 <a href="https://en.wikipedia.org/wiki/Event-driven_architecture?utm_source=chatgpt.com" title="Event-driven architecture">6</a></li></ul></li><li><strong>이벤트 생산자/소비자 구현:</strong><ul><li>비동기 이벤트 발행/구독 로직 구현</li></ul></li><li><strong>이벤트 소싱 (Event Sourcing):</strong><ul><li>모든 상태 변화를 이벤트로 저장, 시스템 상태 재구성 가능 <a href="https://en.wikipedia.org/wiki/Observer_pattern?utm_source=chatgpt.com" title="Observer pattern">3</a></li></ul></li><li><strong>실제 예시:</strong><ul><li>이커머스 시스템에서 주문 생성 시 &ldquo;OrderCreated&rdquo; 이벤트 발행, 재고/결제 서비스가 이벤트 구독 및 처리 <a href="https://solace.com/blog/event-driven-architecture-pros-and-cons/?utm_source=chatgpt.com" title="A Guide to Event-Driven Architecture Pros and Cons - Solace">7</a></li></ul></li></ul><hr><h3 id=8-장점>(8) 장점<a hidden class=anchor aria-hidden=true href=#8-장점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>특성 원인</th></tr></thead><tbody><tr><td>장점</td><td>실시간 처리</td><td>이벤트 발생 즉시 처리 가능</td><td>비동기 메시징, 브로커</td></tr><tr><td></td><td>결합도 저하</td><td>서비스 간 직접 통신 없이 이벤트로만 연동</td><td>이벤트 브로커</td></tr><tr><td></td><td>확장성</td><td>서비스별 독립적 확장 가능</td><td>비동기, 분산 구조</td></tr><tr><td></td><td>내결함성</td><td>일부 서비스 장애 시에도 전체 시스템 영향 최소화</td><td>결합도 저하, 브로커</td></tr><tr><td></td><td>유연성</td><td>신규 서비스 추가/변경 시 기존 시스템 영향 최소화</td><td>이벤트 중심 구조</td></tr></tbody></table><hr><h3 id=9-단점과-문제점-그리고-해결방안>(9) 단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#9-단점과-문제점-그리고-해결방안>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>복잡성</td><td>이벤트 흐름 추적 및 관리가 어려움</td><td>모니터링, 문서화</td></tr><tr><td></td><td>테스트 어려움</td><td>이벤트 시퀀스 및 비동기 처리 테스트 복잡</td><td>테스트 자동화, 시뮬레이션</td></tr><tr><td></td><td>이벤트 순서 보장</td><td>분산 환경에서 이벤트 순서 보장 어려움</td><td>브로커 설정, 시퀀스 관리</td></tr><tr><td></td><td>중복 처리</td><td>동일 이벤트 중복 처리 가능성</td><td>멱등성 (Idempotency) 설계</td></tr><tr><td></td><td>지연 시간</td><td>대량 이벤트 처리 시 지연 발생 가능</td><td>브로커 튜닝, 스케일 아웃</td></tr></tbody></table><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>이벤트 흐름 추적</td><td>비동기, 분산 구조</td><td>디버깅/모니터링 어려움</td><td>로깅, 모니터링</td><td>문서화, 이벤트 추적</td><td>모니터링 도구 도입</td></tr><tr><td></td><td>이벤트 순서 보장</td><td>분산 환경</td><td>데이터 불일치 가능</td><td>이벤트 시퀀스 로그</td><td>브로커 설정</td><td>시퀀스 관리, 브로커 설정</td></tr><tr><td></td><td>중복 처리</td><td>네트워크/브로커 이슈</td><td>데이터 중복/불일치</td><td>로깅, 모니터링</td><td>멱등성 설계</td><td>멱등성 로직 구현</td></tr></tbody></table><hr><h3 id=10-도전-과제>(10) 도전 과제<a hidden class=anchor aria-hidden=true href=#10-도전-과제>#</a></h3><table><thead><tr><th>과제</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>대량 이벤트 처리</td><td>이벤트 폭증</td><td>지연, 장애 가능</td><td>모니터링, 로깅</td><td>브로커 튜닝</td><td>스케일 아웃, 브로커 최적화</td></tr><tr><td>이벤트 흐름 추적</td><td>비동기, 분산 구조</td><td>디버깅 어려움</td><td>로깅, 모니터링</td><td>문서화</td><td>모니터링 도구 도입</td></tr><tr><td>신기술 도입</td><td>복잡성 증가</td><td>운영/유지보수 어려움</td><td>기술 트렌드 분석</td><td>표준화</td><td>교육, 문서화</td></tr></tbody></table><hr><h3 id=11-분류-기준에-따른-종류-및-유형>(11) 분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#11-분류-기준에-따른-종류-및-유형>#</a></h3><table><thead><tr><th>분류 기준</th><th>종류/유형</th><th>설명</th></tr></thead><tbody><tr><td>이벤트 타입</td><td>Volatile</td><td>실시간 전달, 저장 불필요</td></tr><tr><td></td><td>Durable</td><td>모든 소비자에게 전달 전까지 저장</td></tr><tr><td></td><td>Replayable</td><td>이벤트 재생 가능, 지속 저장</td></tr><tr><td>패턴</td><td>Publish-Subscribe</td><td>브로커를 통한 이벤트 발행/구독</td></tr><tr><td></td><td>Event Sourcing</td><td>모든 상태 변화를 이벤트로 저장</td></tr><tr><td></td><td>CQRS</td><td>명령/조회 분리, 이벤트 소싱과 결합</td></tr></tbody></table><hr><h3 id=12-실무-사용-예시>(12) 실무 사용 예시<a hidden class=anchor aria-hidden=true href=#12-실무-사용-예시>#</a></h3><table><thead><tr><th>사용 목적</th><th>함께 사용하는 기술/시스템</th><th>효과</th></tr></thead><tbody><tr><td>실시간 알림</td><td>Kafka, RabbitMQ</td><td>실시간 알림 전달</td></tr><tr><td>이커머스 트랜잭션</td><td>Event Sourcing, CQRS</td><td>데이터 일관성 유지</td></tr><tr><td>IoT 데이터 처리</td><td>AWS Kinesis, MQTT</td><td>실시간 데이터 처리</td></tr></tbody></table><hr><h3 id=13-활용-사례>(13) 활용 사례<a hidden class=anchor aria-hidden=true href=#13-활용-사례>#</a></h3><p><strong>사례: 이커머스 주문 처리 시스템</strong></p><ul><li><strong>시스템 구성:</strong><ul><li>주문 서비스 (이벤트 생산자): 주문 생성 시 &ldquo;OrderCreated&rdquo; 이벤트 발행</li><li>재고 서비스 (이벤트 소비자): &ldquo;OrderCreated&rdquo; 이벤트 구독, 재고 차감</li><li>결제 서비스 (이벤트 소비자): &ldquo;OrderCreated&rdquo; 이벤트 구독, 결제 처리</li><li>메시지 브로커: Kafka</li></ul></li><li><strong>Workflow:</strong><ul><li>사용자 → 주문 생성 → 주문 서비스 → &ldquo;OrderCreated&rdquo; 이벤트 발행 → 브로커<br>→ 재고/결제 서비스 구독 및 처리 → 결과 이벤트 발행 (옵션)</li></ul></li><li><strong>역할:</strong><ul><li>각 서비스는 독립적으로 동작하며, 이벤트를 통해 연동</li></ul></li><li><strong>차이점:</strong><ul><li>모놀리식은 모든 로직이 하나의 서비스에 집중, EDA 는 서비스별 독립적 처리</li></ul></li></ul><p><strong>구조 다이어그램 (Mermaid/Text)</strong></p><pre class=mermaid>flowchart LR
    OrderService --&gt;|OrderCreated| Kafka
    Kafka --&gt; InventoryService
    Kafka --&gt; PaymentService
</pre><hr><h3 id=14-구현-예시-python>(14) 구현 예시 (Python)<a hidden class=anchor aria-hidden=true href=#14-구현-예시-python>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span><span class=lnt id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a>
</span><span class=lnt id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a>
</span><span class=lnt id=hl-3-17><a class=lnlinks href=#hl-3-17>17</a>
</span><span class=lnt id=hl-3-18><a class=lnlinks href=#hl-3-18>18</a>
</span><span class=lnt id=hl-3-19><a class=lnlinks href=#hl-3-19>19</a>
</span><span class=lnt id=hl-3-20><a class=lnlinks href=#hl-3-20>20</a>
</span><span class=lnt id=hl-3-21><a class=lnlinks href=#hl-3-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 간단한 이벤트 기반 시스템 예시 (Kafka 사용 가정, 실제는 Kafka-Python 등 라이브러리 필요)</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>kafka</span> <span class=kn>import</span> <span class=n>KafkaProducer</span><span class=p>,</span> <span class=n>KafkaConsumer</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 이벤트 생산자</span>
</span></span><span class=line><span class=cl><span class=n>producer</span> <span class=o>=</span> <span class=n>KafkaProducer</span><span class=p>(</span><span class=n>bootstrap_servers</span><span class=o>=</span><span class=s1>&#39;localhost:9092&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>value_serializer</span><span class=o>=</span><span class=k>lambda</span> <span class=n>v</span><span class=p>:</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>v</span><span class=p>)</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>producer</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=s1>&#39;order-events&#39;</span><span class=p>,</span> <span class=p>{</span><span class=s1>&#39;type&#39;</span><span class=p>:</span> <span class=s1>&#39;OrderCreated&#39;</span><span class=p>,</span> <span class=s1>&#39;orderId&#39;</span><span class=p>:</span> <span class=s1>&#39;12345&#39;</span><span class=p>,</span> <span class=s1>&#39;userId&#39;</span><span class=p>:</span> <span class=s1>&#39;user1&#39;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 이벤트 소비자 (재고 서비스)</span>
</span></span><span class=line><span class=cl><span class=n>consumer</span> <span class=o>=</span> <span class=n>KafkaConsumer</span><span class=p>(</span><span class=s1>&#39;order-events&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>group_id</span><span class=o>=</span><span class=s1>&#39;inventory-group&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>bootstrap_servers</span><span class=o>=</span><span class=s1>&#39;localhost:9092&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>value_deserializer</span><span class=o>=</span><span class=k>lambda</span> <span class=n>m</span><span class=p>:</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>m</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>message</span> <span class=ow>in</span> <span class=n>consumer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>event</span> <span class=o>=</span> <span class=n>message</span><span class=o>.</span><span class=n>value</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>event</span><span class=p>[</span><span class=s1>&#39;type&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;OrderCreated&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;InventoryService: 처리할 주문 </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;orderId&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># 재고 차감 로직 실행</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>이 예시는 주문 생성 이벤트를 Kafka 로 발행하고, 재고 서비스가 이벤트를 구독해 처리하는 구조를 보여줍니다 <a href="https://learn.microsoft.com/en-us/azure/architecture/guide/architecture-styles/event-driven?utm_source=chatgpt.com" title="Event-driven architecture style - Azure - Learn Microsoft">6</a><a href="https://solace.com/blog/event-driven-architecture-pros-and-cons/?utm_source=chatgpt.com" title="A Guide to Event-Driven Architecture Pros and Cons - Solace">8</a>.</p></blockquote><hr><h3 id=15-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>(15) 실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#15-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>고려사항/주의점</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>이벤트 스키마 관리</td><td>이벤트 타입, 페이로드 명확히 정의</td><td>스키마 버전 관리</td></tr><tr><td>브로커 선택</td><td>목적에 맞는 브로커 선택</td><td>확장성, 내구성 고려</td></tr><tr><td>멱등성 설계</td><td>중복 이벤트 처리 방지</td><td>멱등성 로직 구현</td></tr><tr><td>모니터링/로깅</td><td>이벤트 흐름 추적 및 장애 탐지</td><td>모니터링 도구 도입</td></tr></tbody></table><hr><h3 id=16-최적화하기-위한-고려사항-및-주의할-점>(16) 최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#16-최적화하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>고려사항/주의점</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>브로커 튜닝</td><td>대량 이벤트 처리 시 성능 최적화</td><td>파티셔닝, 스케일 아웃</td></tr><tr><td>이벤트 필터링</td><td>불필요한 이벤트 전달 최소화</td><td>브로커 필터링 기능 활용</td></tr><tr><td>캐싱</td><td>자주 사용되는 데이터 캐싱</td><td>캐시 만료/무효화 관리</td></tr><tr><td>이벤트 순서 보장</td><td>분산 환경에서 순서 보장 필요 시</td><td>브로커 설정, 시퀀스 관리</td></tr></tbody></table><hr><h3 id=17-기타-사항>(17) 기타 사항<a hidden class=anchor aria-hidden=true href=#17-기타-사항>#</a></h3><ul><li><strong>이벤트 기반 아키텍처는 실시간 처리, 확장성, 결합도 저하 등 현대 분산 시스템의 핵심 요구를 충족</strong></li><li><strong>이벤트 소싱, CQRS 등과 결합해 데이터 일관성, 감사, 재생 등 다양한 이점 제공</strong></li><li><strong>모니터링, 문서화, 테스트 자동화 등 운영 측면에서의 관리가 중요</strong></li></ul><hr><h2 id=6-추가-조사-내용>6. 추가 조사 내용<a hidden class=anchor aria-hidden=true href=#6-추가-조사-내용>#</a></h2><ul><li><strong>이벤트 기반 아키텍처와 마이크로서비스:</strong><ul><li>EDA 는 마이크로서비스 간 통신의 표준 방식으로 자리잡고 있으며, 서비스 간 결합도를 낮추고 확장성을 높입니다 <a href="https://aws.amazon.com/event-driven-architecture/?utm_source=chatgpt.com" title="Event-Driven Architecture - AWS">9</a><a href="https://en.wikipedia.org/wiki/Apache_Storm?utm_source=chatgpt.com" title="Apache Storm">2</a>.</li></ul></li><li><strong>클라우드 네이티브 환경에서의 EDA:</strong><ul><li>클라우드 기반 메시징 서비스 (AWS SNS/SQS, Azure Event Grid 등) 와 연동해 손쉽게 분산 시스템 구축 가능</li></ul></li><li><strong>이벤트 기반 아키텍처의 진화:</strong><ul><li>이벤트 메쉬 (Event Mesh) 등 새로운 패턴 등장, 복잡한 분산 환경에서 이벤트 라우팅 및 관리 효율화 <a href="https://en.wikipedia.org/wiki/Apache_Storm?utm_source=chatgpt.com" title="Apache Storm">1</a></li></ul></li></ul><hr><h2 id=7-주제와-관련하여-주목할-내용>7. 주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#7-주제와-관련하여-주목할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>EDA vs 모놀리식</td><td>비교</td><td>EDA 는 비동기, 결합도 저하, 확장성 우수</td></tr><tr><td>개발 방법론</td><td>이벤트 소싱</td><td>상태 변화 이벤트화</td><td>시스템 상태 재구성, 감사 가능</td></tr><tr><td>운영</td><td>모니터링/로깅</td><td>이벤트 흐름 추적</td><td>디버깅, 장애 탐지 용이</td></tr><tr><td>기술 트렌드</td><td>이벤트 메쉬</td><td>분산 이벤트 라우팅</td><td>복잡한 분산 환경에서 이벤트 관리 효율화</td></tr></tbody></table><hr><h2 id=8-반드시-학습해야-할-내용>8. 반드시 학습해야 할 내용<a hidden class=anchor aria-hidden=true href=#8-반드시-학습해야-할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>소프트웨어 아키텍처</td><td>이벤트 기반 아키텍처</td><td>정의/특징</td><td>비동기, 결합도 저하, 확장성</td></tr><tr><td>개발 방법론</td><td>이벤트 소싱, CQRS</td><td>상태 변화 이벤트화</td><td>시스템 상태 재구성, 명령/조회 분리</td></tr><tr><td>운영</td><td>모니터링/로깅</td><td>이벤트 흐름 추적</td><td>디버깅, 장애 탐지</td></tr><tr><td>기술 트렌드</td><td>이벤트 메쉬</td><td>분산 이벤트 라우팅</td><td>복잡한 분산 환경에서 이벤트 관리</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>이벤트 기반 아키텍처</td><td>이벤트 중심의 비동기 시스템 설계</td></tr><tr><td>개발 방법론</td><td>이벤트 소싱</td><td>모든 상태 변화를 이벤트로 저장</td></tr><tr><td>운영</td><td>이벤트 브로커</td><td>이벤트 라우팅 및 전달을 담당하는 미들웨어</td></tr><tr><td>기술 트렌드</td><td>이벤트 메쉬</td><td>분산 환경에서 이벤트 라우팅 및 관리</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><a href=https://www.birlasoft.com/articles/embracing-event-driven-architecture-core-principles-patterns-and-best-practices>Birlasoft: Embracing Event-Driven Architecture</a></li><li><a href=https://www.ibm.com/think/topics/event-driven-architecture>IBM: What Is Event-Driven Architecture?</a></li><li><a href=https://estuary.dev/blog/event-driven-architecture/>Estuary: Event-Driven Architecture Guide</a></li><li><a href=https://hazelcast.com/foundations/event-driven-architecture/event-driven-architecture/>Hazelcast: Event-Driven Architecture</a></li><li><a href=https://dev.to/tejastn10/mastering-event-driven-architecture-when-and-why-to-use-it-268l>Dev.to: Mastering Event-Driven Architecture</a></li><li><a href=https://risingwave.com/blog/the-comprehensive-guide-to-event-driven-architecture/>RisingWave: Comprehensive Guide to EDA</a></li><li><a href=https://microservices.io/patterns/data/event-driven-architecture.html>Microservices.io: Event-Driven Architecture Pattern</a></li><li><a href=https://www.3pillarglobal.com/insights/blog/components-of-event-driven-architecture/>3Pillar Global: Components of EDA</a></li><li><a href=https://icepanel.io/blog/2024-10-01-how-to-diagram-events-icepanel>IcePanel: How to Diagram EDA</a></li><li><a href=https://talent500.com/blog/how-to-implement-event-driven-architecture-for-complex-backend-systems/>Talent500: Implementing EDA for Backend</a></li><li><a href=https://www.pubnub.com/blog/the-benefits-of-event-driven-architecture/>PubNub: Benefits of EDA</a></li><li><a href=https://victorleungtw.com/2024/03/08/event/>Victor Leung: Pros and Cons of EDA</a></li><li><a href=https://moldstud.com/articles/p-optimize-event-driven-microservices-for-peak-performance>MoldStud: Optimizing EDA for Performance</a></li><li><a href=https://www.linkedin.com/pulse/complex-tools-best-practices-building-event-driven-architectures-xfaue>LinkedIn: Best Practices for EDA</a></li><li><a href=http://www.kurrent.io/event-driven-architecture>Kurrent: Beginner’s Guide to EDA</a><br>아래는 **Event-Driven Architecture (EDA)** 에 대한 전문적이고 실무 지향적인 조사 결과입니다.</li></ul><hr><h2 id=1-태그>1. 태그<a hidden class=anchor aria-hidden=true href=#1-태그>#</a></h2><ul><li>Event-Driven-Architecture</li><li>Pub-Sub</li><li>Event-Sourcing</li><li>Event-Mesh</li></ul><hr><h2 id=2-분류-계층-구조-분석>2. 분류 계층 구조 분석<a hidden class=anchor aria-hidden=true href=#2-분류-계층-구조-분석>#</a></h2><p>지정된 분류:</p><blockquote><p>Computer Science and Engineering > Software Engineering > Design and Architecture > Architecture Styles and Patterns > Architecture Styles > Messaging</p></blockquote><p><strong>분석</strong>: Event‑Driven Architecture 는 메시징 기반의 분산 시스템 구조 스타일로, 이 분류 구조는 매우 적절합니다. 구체적으로 이벤트 생산자, 브로커, 소비자 간 비동기 메시징을 통한 탈동기화 설계가 중심이므로 &ldquo;Messaging&rdquo; 하위 스타일로 정의하는 것이 맞습니다. (<a href="https://tyk.io/learning-center/what-is-event-driven-architecture/?utm_source=chatgpt.com" title="What is event-driven architecture? - Tyk API Management">tyk.io</a>, <a href="https://en.wikipedia.org/wiki/Apache_Storm?utm_source=chatgpt.com" title="Apache Storm">en.wikipedia.org</a>, <a href="https://learn.microsoft.com/en-us/azure/architecture/guide/architecture-styles/event-driven?utm_source=chatgpt.com" title="Event-driven architecture style - Azure - Learn Microsoft">learn.microsoft.com</a>)</p><hr><h2 id=3-200-자-요약>3. 200 자 요약<a hidden class=anchor aria-hidden=true href=#3-200-자-요약>#</a></h2><p>Event‑Driven Architecture 는 시스템 내부 또는 서비스 간 발생한 상태 변화를 <strong>이벤트</strong>로 캡처하여 비동기 방식으로 전달하고 처리한다. 이벤트 브로커 기반으로 Loose Coupling, 실시간 처리, 확장성과 복원력을 제공하며, 마이크로서비스, IoT, 실시간 분석에서 주로 사용된다.</p><hr><h2 id=4-250-자-개요>4. 250 자 개요<a hidden class=anchor aria-hidden=true href=#4-250-자-개요>#</a></h2><p>Event‑Driven Architecture(EDA) 는 이벤트 중심 설계 방식으로, 상태 변화 또는 비즈니스 사건을 이벤트로 나타내고, 이를 Event Producer → Event Broker → Event Consumer 로 비동기 전달한다. 이를 통해 서비스 간 결합도를 낮추고, 리얼타임 처리와 수평 확장이 가능해진다. Pub/Sub 또는 Event Sourcing 패턴을 활용하며, 마이크로서비스, IoT, Stream Processing, CQRS 등 다양한 실무 시나리오에 적용된다. 단점은 복잡성 증가, 장애 추적 어려움, eventual consistency 와 에러 핸들링 설계의 부담 등이 있다.</p><hr><h2 id=5-핵심-개념-1>5. 핵심 개념<a hidden class=anchor aria-hidden=true href=#5-핵심-개념-1>#</a></h2><ol><li><strong>Event</strong>: 시스템 내 상태 변경을 나타내는 불변 메시지</li><li><strong>Event Producer & Consumer</strong>: 생성자와 수신자, 서로를 인식하지 않음 (<a href="https://tyk.io/learning-center/what-is-event-driven-architecture/?utm_source=chatgpt.com" title="What is event-driven architecture? - Tyk API Management">tyk.io</a>)</li><li><strong>Event Broker / Bus</strong>: 중앙 또는 분산 브로커로, 토픽 기반 라우팅과 퍼시스턴스 제공 (<a href="https://solace.com/what-is-event-driven-architecture/?utm_source=chatgpt.com" title="The Complete Guide to Event-Driven Architecture - Solace">solace.com</a>)</li><li><strong>Pub/Sub Pattern</strong>: Topic 기반 메시지 필터링과 브로드캐스트 (<a href="https://en.wikipedia.org/wiki/Observer_pattern?utm_source=chatgpt.com" title="Observer pattern">en.wikipedia.org</a>)</li><li><strong>Event Mesh</strong>: 다중 브로커의 동적 네트워크 (<a href="https://solace.com/what-is-event-driven-architecture/?utm_source=chatgpt.com" title="The Complete Guide to Event-Driven Architecture - Solace">solace.com</a>)</li><li><strong>Deferred Execution / Eventual Consistency</strong>: 비동기 처리 특성 (<a href="https://solace.com/what-is-event-driven-architecture/?utm_source=chatgpt.com" title="The Complete Guide to Event-Driven Architecture - Solace">solace.com</a>)</li><li><strong>Topologies</strong>: Broker topology vs Mediator (Orchestration) (<a href="https://en.wikipedia.org/wiki/Event-driven_architecture?utm_source=chatgpt.com" title="Event-driven architecture">en.wikipedia.org</a>)</li><li><strong>Event Sourcing</strong>: 상태 대신 이벤트 저장 기반 패턴 (<a href="https://tyk.io/learning-center/what-is-event-driven-architecture/?utm_source=chatgpt.com" title="What is event-driven architecture? - Tyk API Management">tyk.io</a>)</li><li><strong>CQRS</strong>: 읽기/쓰기 분리, EDA 와 주로 연계 (<a href="https://solace.com/what-is-event-driven-architecture/?utm_source=chatgpt.com" title="The Complete Guide to Event-Driven Architecture - Solace">solace.com</a>)</li></ol><h3 id=51-구현-요소>5.1 구현 요소<a hidden class=anchor aria-hidden=true href=#51-구현-요소>#</a></h3><ul><li><strong>Kafka, RabbitMQ, Amazon EventBridge</strong>, <strong>Azure Service Bus</strong> 등의 브로커</li><li><strong>AsyncAPI</strong>로 이벤트 계약 문서화</li><li><strong>Distributed tracing/OpenTelemetry</strong> 등 운영 툴</li><li><strong>Event schema & versioning</strong> 설계</li></ul><hr><h2 id=6-주제-관련-핵심-내용-요약>6. 주제 관련 핵심 내용 요약<a hidden class=anchor aria-hidden=true href=#6-주제-관련-핵심-내용-요약>#</a></h2><h3 id=배경>배경<a hidden class=anchor aria-hidden=true href=#배경>#</a></h3><p>전통적인 동기 호출의 한계를 극복하기 위한 비동기 설계로 IoT, 분산환경에서 주목 받음 (<a href="https://aws.amazon.com/event-driven-architecture/?utm_source=chatgpt.com" title="Event-Driven Architecture - AWS">aws.amazon.com</a>, <a href="https://solace.com/blog/event-driven-architecture-pros-and-cons/?utm_source=chatgpt.com" title="A Guide to Event-Driven Architecture Pros and Cons - Solace">solace.com</a>, <a href="https://en.wikipedia.org/wiki/Event-driven_architecture?utm_source=chatgpt.com" title="Event-driven architecture">en.wikipedia.org</a>)</p><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><ul><li>이벤트 기반 비즈니스 로직 캡처</li><li>Loose coupling 과 실시간 처리</li><li>시스템 확장성, 복원력 확보 (<a href="https://risingwave.com/blog/the-comprehensive-guide-to-event-driven-architecture/?utm_source=chatgpt.com" title="The Comprehensive Guide to Event-Driven Architecture - RisingWave">risingwave.com</a>)</li></ul><h3 id=주요-기능역할>주요 기능/역할<a hidden class=anchor aria-hidden=true href=#주요-기능역할>#</a></h3><ul><li><strong>Producer</strong>: 이벤트 생성</li><li><strong>Broker</strong>: 이벤트 라우팅/퍼시스턴스</li><li><strong>Consumer</strong>: 이벤트 처리</li><li><strong>Event Portal</strong>: 설계 문서화 및 카탈로그화 (<a href="https://solace.com/what-is-event-driven-architecture/?utm_source=chatgpt.com" title="The Complete Guide to Event-Driven Architecture - Solace">solace.com</a>, <a href="https://en.wikipedia.org/wiki/Event-driven_architecture?utm_source=chatgpt.com" title="Event-driven architecture">en.wikipedia.org</a>)</li></ul><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><ul><li>비동기, 느슨한 결합, 확장 가능</li><li>실시간 대응, 장애 격리</li><li>데이터 일관성은 Eventual</li></ul><hr><h3 id=주요-원리--작동-원리-다이어그램>주요 원리 & 작동 원리 다이어그램<a hidden class=anchor aria-hidden=true href=#주요-원리--작동-원리-다이어그램>#</a></h3><pre class=mermaid>sequenceDiagram
    Producer-&gt;&gt;Broker: Event{topic, payload}
    Broker--&gt;&gt;ConsumerA: Event
    Broker--&gt;&gt;ConsumerB: Event
    ConsumerA-&gt;&gt;Broker: ack
    ConsumerB-&gt;&gt;Broker: ack
</pre><ul><li><strong>Deferred execution</strong>: Producer 는 ack 없이 즉시 리턴 (<a href="https://risingwave.com/blog/the-comprehensive-guide-to-event-driven-architecture/?utm_source=chatgpt.com" title="The Comprehensive Guide to Event-Driven Architecture - RisingWave">risingwave.com</a>)</li><li><strong>Eventual consistency</strong>가 보장됨</li></ul><hr><h2 id=7-진행-내용-및-기타>7. 진행 내용 및 기타<a hidden class=anchor aria-hidden=true href=#7-진행-내용-및-기타>#</a></h2><p>다음 단계에는 다음 항목들을 이어서 작성합니다:</p><ul><li>구조 및 아키텍처 + 구성 요소</li><li>구현 기법</li><li>장/단점 + 문제점 및 해결방안</li><li>도전 과제</li><li>분류 기준</li><li>실무 사용 예시 + 사례</li><li>구현 예시 (Python/JS 코드)</li><li>고려사항 및 최적화 내용.</li></ul><p>어떤 항목부터 자세히 보고 싶으신지 알려주시면, 해당 부분을 먼저 작성하거나 바로 이어갈 수 있습니다.</p><p>이어서 **Event-Driven Architecture (EDA)** 의 " 구조 및 아키텍처 &ldquo;, " 구현 기법 &ldquo;, " 장점 &ldquo;, " 단점 및 문제점과 해결방안 &ldquo;, " 도전 과제 " 를 정리합니다.</p><hr><h2 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h2><h3 id=기본-아키텍처-다이어그램>기본 아키텍처 다이어그램<a hidden class=anchor aria-hidden=true href=#기본-아키텍처-다이어그램>#</a></h3><pre class=mermaid>graph LR
    A[Event Producer] --&gt;|Publish Event| B[Event Broker]
    B --&gt;|Dispatch| C[Event Consumer 1]
    B --&gt;|Dispatch| D[Event Consumer 2]
    B --&gt;|Persist Event| E[(Event Store)]
</pre><h3 id=구성-요소-및-역할>구성 요소 및 역할<a hidden class=anchor aria-hidden=true href=#구성-요소-및-역할>#</a></h3><table><thead><tr><th>구성 요소</th><th>역할</th><th>필수 여부</th><th>특징</th></tr></thead><tbody><tr><td>Event Producer</td><td>이벤트 발생 및 발행</td><td>필수</td><td>독립적, REST 또는 SDK 에서 이벤트 발생</td></tr><tr><td>Event Broker</td><td>이벤트 수집 및 라우팅</td><td>필수</td><td>Kafka, RabbitMQ, SNS 등</td></tr><tr><td>Event Consumer</td><td>이벤트 처리</td><td>필수</td><td>동기 또는 비동기 방식, 하나 이상 존재 가능</td></tr><tr><td>Event Store</td><td>이벤트 기록</td><td>선택</td><td>Event Sourcing 또는 Replay 용</td></tr><tr><td>Event Schema Registry</td><td>이벤트 구조 관리</td><td>선택</td><td>스키마 호환성 검증 및 버전 관리</td></tr><tr><td>Dead Letter Queue (DLQ)</td><td>실패 이벤트 보관</td><td>선택</td><td>에러 트러블슈팅 용이</td></tr></tbody></table><hr><h2 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h2><table><thead><tr><th>구현 기법</th><th>정의</th><th>목적</th><th>예시 시나리오</th></tr></thead><tbody><tr><td>Pub/Sub</td><td>Producer 가 Topic 에 Publish, Consumer 는 Subscribe</td><td>비동기 처리, 다중 구독</td><td>주문 생성 → 알림, 재고 차감, 분석</td></tr><tr><td>Event Sourcing</td><td>모든 상태 변경을 이벤트로 저장</td><td>상태 복원, 추적 가능성</td><td>금융거래, 로그 기록 재생</td></tr><tr><td>CQRS (Command Query Responsibility Segregation)</td><td>읽기/쓰기 모델 분리</td><td>성능 최적화, 확장성</td><td>읽기 집중형 대시보드 시스템</td></tr><tr><td>Outbox Pattern</td><td>DB 트랜잭션과 이벤트 발행 분리</td><td>데이터 정합성 보장</td><td>주문 테이블에 insert → outbox row publish</td></tr><tr><td>Event Mesh</td><td>여러 브로커를 연계</td><td>글로벌 확장성</td><td>AWS+Kafka+Edge 등 분산 환경 연동</td></tr></tbody></table><hr><h2 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>비동기 처리</td><td>Producer 는 Consumer 처리 여부에 상관없이 작업 가능</td></tr><tr><td>장점</td><td>느슨한 결합</td><td>Producer 와 Consumer 간 직접 의존 제거</td></tr><tr><td>장점</td><td>확장성</td><td>Consumer 를 독립적으로 수평 확장 가능</td></tr><tr><td>장점</td><td>장애 격리</td><td>하나의 Consumer 장애가 시스템 전체에 영향 없음</td></tr><tr><td>장점</td><td>실시간 반응</td><td>이벤트 기반 실시간 알림/처리 가능</td></tr></tbody></table><hr><h2 id=단점과-문제점-그리고-해결방안>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안>#</a></h2><h3 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>복잡도 증가</td><td>이벤트 흐름 추적 및 관리가 어려움</td><td>Event Tracing, 통합 모니터링 도입</td></tr><tr><td>단점</td><td>일관성 문제</td><td>eventual consistency 로 인한 상태 불일치 가능성</td><td>Saga, Outbox Pattern 적용</td></tr><tr><td>단점</td><td>장애 진단 어려움</td><td>이벤트 실패의 원인을 파악하기 어려움</td><td>DLQ 설정, Logging 강화</td></tr><tr><td>단점</td><td>이벤트 폭증 시 처리 지연</td><td>브로커의 처리량 초과 가능성</td><td>메시지 파티셔닝, 백프레셔 적용</td></tr></tbody></table><h3 id=문제점>문제점<a hidden class=anchor aria-hidden=true href=#문제점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>메시지 손실</td><td>브로커 미설정, 비영속 처리</td><td>데이터 유실</td><td>메시지 로그 미존재</td><td>Durable Queue 설정</td><td>Kafka Acknowledgement 적용</td></tr><tr><td>문제점</td><td>중복 처리</td><td>재시도 시 Consumer 가 idempotent 하지 않음</td><td>데이터 이중 처리</td><td>로직 추적</td><td>Idempotent 처리</td><td>이벤트 ID 기반 deduplication</td></tr><tr><td>문제점</td><td>순서 보장 실패</td><td>병렬 소비 환경</td><td>상태 불일치</td><td>파티션 로그 분석</td><td>순서 보장 설정</td><td>Kafka 파티션 Key 사용</td></tr><tr><td>문제점</td><td>스키마 불일치</td><td>이벤트 구조 변경 시 Consumer 오류</td><td>처리 실패</td><td>이벤트 실패 분석</td><td>Schema Registry 도입</td><td>Version 관리 기반 호환 설계</td></tr></tbody></table><hr><p>이어서 **Event-Driven Architecture (EDA)** 의 실무 적용 사례, 구현 예시, 분류 기준, 최적화 고려사항 등을 정리합니다.</p><hr><h2 id=분류-기준에-따른-종류-및-유형>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형>#</a></h2><table><thead><tr><th>분류 기준</th><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>이벤트 전달 방식</td><td>Pub/Sub, Point-to-Point</td><td>Pub/Sub 은 브로드캐스트, P2P 는 큐 기반</td></tr><tr><td>브로커 구조</td><td>중앙 집중형, 분산형 (Event Mesh)</td><td>Kafka, RabbitMQ vs Solace, NATS Streaming</td></tr><tr><td>저장 전략</td><td>Stateless, Event Sourcing</td><td>상태 비저장/이벤트 기반 저장소 구성</td></tr><tr><td>패턴 통합</td><td>단일 EDA, CQRS + EDA, DDD + EDA</td><td>다양한 아키텍처와 결합 가능</td></tr><tr><td>통신 방향</td><td>단방향, 양방향</td><td>요청 - 응답 기반 이벤트 흐름 (ex: WebSocket, gRPC)</td></tr></tbody></table><hr><h2 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h2><table><thead><tr><th>목적</th><th>사용된 기술</th><th>적용 대상</th><th>효과</th></tr></thead><tbody><tr><td>주문 처리</td><td>Kafka, Spring Boot</td><td>커머스 주문 시스템</td><td>실시간 처리, 분산 확장</td></tr><tr><td>IoT 센서 이벤트 처리</td><td>MQTT, Node-RED</td><td>제조 IoT 데이터 수집</td><td>비동기 수집 및 실시간 분석</td></tr><tr><td>사용자 알림 시스템</td><td>Redis Pub/Sub</td><td>SaaS 알림 전송</td><td>지연 없이 사용자 반응 유도</td></tr><tr><td>금융 거래 로그 기록</td><td>Event Sourcing</td><td>결제 기록 시스템</td><td>추적 가능성과 복구 용이</td></tr><tr><td>대시보드 실시간 업데이트</td><td>WebSocket + Kafka</td><td>실시간 BI 시스템</td><td>데이터 분석 지연 최소화</td></tr></tbody></table><hr><h2 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h2><h3 id=사례-전자상거래-주문-시스템-실시간-처리>사례: 전자상거래 주문 시스템 실시간 처리<a hidden class=anchor aria-hidden=true href=#사례-전자상거래-주문-시스템-실시간-처리>#</a></h3><p><strong>시스템 구성 요소</strong></p><ul><li><strong>Event Producer</strong>: OrderService (Spring Boot)</li><li><strong>Event Broker</strong>: Kafka</li><li><strong>Event Consumer</strong>: InventoryService, NotificationService</li><li><strong>Event Store</strong>: PostgreSQL Outbox Table + Kafka Connect</li></ul><h3 id=아키텍처-다이어그램>아키텍처 다이어그램<a hidden class=anchor aria-hidden=true href=#아키텍처-다이어그램>#</a></h3><pre class=mermaid>graph TD
    UI[Frontend SPA] --&gt; API[Order API]
    API --&gt; SVC[OrderService]
    SVC --&gt; DB[(Order DB)]
    SVC --&gt; OUTBOX[(Outbox Table)]
    OUTBOX --&gt; CONNECT[Kafka Connect CDC]
    CONNECT --&gt; KAFKA[(Kafka)]
    KAFKA --&gt; INV[Inventory Service]
    KAFKA --&gt; NOTIF[Notification Service]
</pre><h3 id=workflow>Workflow<a hidden class=anchor aria-hidden=true href=#workflow>#</a></h3><ol><li>사용자 주문 → DB 저장 + Outbox insert</li><li>Kafka Connect 가 Outbox 변경 감지 → Kafka 로 publish</li><li>InventoryService 와 NotificationService 가 이벤트 수신 후 처리</li></ol><h3 id=차이점-비교>차이점 비교<a hidden class=anchor aria-hidden=true href=#차이점-비교>#</a></h3><table><thead><tr><th>항목</th><th>전통적 방식</th><th>EDA 방식</th></tr></thead><tbody><tr><td>처리 흐름</td><td>동기 호출 → 트랜잭션 결합</td><td>비동기 이벤트 흐름</td></tr><tr><td>확장성</td><td>단일 트랜잭션 내 처리</td><td>서비스별 독립 확장</td></tr><tr><td>장애 복원</td><td>하나 실패 시 전체 롤백</td><td>실패한 서비스만 재처리</td></tr></tbody></table><hr><h2 id=구현-예시-python--kafka>구현 예시 (Python + Kafka)<a hidden class=anchor aria-hidden=true href=#구현-예시-python--kafka>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13>13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 이벤트 발행 (Producer)</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>kafka</span> <span class=kn>import</span> <span class=n>KafkaProducer</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>producer</span> <span class=o>=</span> <span class=n>KafkaProducer</span><span class=p>(</span><span class=n>bootstrap_servers</span><span class=o>=</span><span class=s1>&#39;localhost:9092&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>value_serializer</span><span class=o>=</span><span class=k>lambda</span> <span class=n>v</span><span class=p>:</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>v</span><span class=p>)</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>event</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;order_id&#34;</span><span class=p>:</span> <span class=s2>&#34;ORD-123&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;ORDER_CREATED&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;timestamp&#34;</span><span class=p>:</span> <span class=s2>&#34;2025-06-14T12:00:00Z&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>producer</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=s1>&#39;order-events&#39;</span><span class=p>,</span> <span class=n>value</span><span class=o>=</span><span class=n>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>producer</span><span class=o>.</span><span class=n>flush</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 이벤트 수신 (Consumer)</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>kafka</span> <span class=kn>import</span> <span class=n>KafkaConsumer</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>consumer</span> <span class=o>=</span> <span class=n>KafkaConsumer</span><span class=p>(</span><span class=s1>&#39;order-events&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>bootstrap_servers</span><span class=o>=</span><span class=s1>&#39;localhost:9092&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>auto_offset_reset</span><span class=o>=</span><span class=s1>&#39;earliest&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>group_id</span><span class=o>=</span><span class=s1>&#39;inventory-group&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>value_deserializer</span><span class=o>=</span><span class=k>lambda</span> <span class=n>m</span><span class=p>:</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>m</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>msg</span> <span class=ow>in</span> <span class=n>consumer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>event</span> <span class=o>=</span> <span class=n>msg</span><span class=o>.</span><span class=n>value</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Inventory 처리 중: </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;order_id&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> → 상태: </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;status&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>메시지 스키마 설계</td><td>구조 변경 시 하위 호환성 필요</td><td>Schema Registry 도입 (Avro, Protobuf)</td></tr><tr><td>실패 처리</td><td>이벤트 누락 및 실패 처리 필요</td><td>DLQ, Retry 전략 명확화</td></tr><tr><td>트랜잭션 관리</td><td>데이터베이스와 브로커 일관성 보장</td><td>Outbox + CDC 패턴 적용</td></tr><tr><td>추적성 확보</td><td>장애 발생 시 원인 파악 어려움</td><td>Distributed tracing, Correlation ID</td></tr><tr><td>모니터링</td><td>브로커 상태 및 소비 지연 감시</td><td>Prometheus, Grafana, Kafka JMX 활용</td></tr></tbody></table><hr><h2 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>메시지 처리량</td><td>고속 메시징 환경에서 처리 지연</td><td>파티셔닝, Consumer group 사용</td></tr><tr><td>중복 이벤트 방지</td><td>재전송 등으로 인한 이중 처리 위험</td><td>이벤트 ID, Idempotent 처리</td></tr><tr><td>순서 보장</td><td>동일 키 기반 순서 유지</td><td>Kafka 파티션 Key 설정</td></tr><tr><td>이벤트 폭증 대응</td><td>Burst 이벤트 수용 능력 필요</td><td>배압 처리, 메시지 버퍼링 적용</td></tr><tr><td>Consumer 병렬성</td><td>단일 Consumer 의 처리 병목</td><td>여러 Consumer 로 그룹 구성, Auto-scaling 연동</td></tr></tbody></table><hr><p>이어서 **Event-Driven Architecture (EDA)**와 관련된 주목할 기술 및 학습 필수 항목, 용어 정리, 참고 출처를 정리합니다.</p><hr><h2 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>메시징 플랫폼</td><td>Apache Kafka</td><td>고성능 분산 스트리밍 플랫폼</td><td>고가용성, 파티셔닝, 이벤트 재처리 등에 최적</td></tr><tr><td>메시징 패턴</td><td>Pub/Sub</td><td>이벤트를 여러 구독자에 전달</td><td>느슨한 결합, 비동기 아키텍처 핵심</td></tr><tr><td>데이터 일관성</td><td>Outbox Pattern</td><td>DB 트랜잭션 내 이벤트 기록</td><td>Kafka Connect 로 안전하게 퍼블리시</td></tr><tr><td>이벤트 저장소</td><td>Event Sourcing</td><td>이벤트 기반 상태 관리</td><td>재생 가능, 상태 추적 가능성 확보</td></tr><tr><td>시스템 연계</td><td>Event Mesh</td><td>다수 브로커 연결</td><td>글로벌 메시지 유통 및 통합</td></tr><tr><td>추적 및 진단</td><td>OpenTelemetry</td><td>분산 추적 프레임워크</td><td>이벤트 기반 트랜잭션 추적에 유용</td></tr></tbody></table><hr><h2 id=주제와-관련하여-반드시-학습해야-할-내용>주제와 관련하여 반드시 학습해야 할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-반드시-학습해야-할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처 패턴</td><td>EDA + CQRS</td><td>명령과 조회의 분리</td><td>성능 최적화 및 확장성 강화</td></tr><tr><td>트랜잭션 설계</td><td>Outbox, Saga Pattern</td><td>분산 트랜잭션 대체</td><td>롤백 불가 환경에서 보상 처리 설계</td></tr><tr><td>메시지 브로커</td><td>Kafka, RabbitMQ, NATS</td><td>대표 메시징 기술</td><td>실무 환경에 따른 선택 기준 이해 필요</td></tr><tr><td>이벤트 설계</td><td>이벤트 모델링</td><td>Domain Event, Integration Event 구분</td><td>도메인 캡슐화와 시스템 통합을 위한 이벤트 설계 전략</td></tr><tr><td>모니터링</td><td>메시지 추적, DLQ 처리</td><td>안정적 운영 기반</td><td>문제 발생 시 원인 파악 및 대응을 위한 필수 항목</td></tr></tbody></table><hr><h2 id=용어-정리-1>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-1>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>메시징</td><td>Event</td><td>상태 변화 또는 비즈니스 사건을 나타내는 불변 메시지</td></tr><tr><td>메시징</td><td>Producer / Consumer</td><td>이벤트를 생성하거나 소비하는 역할의 컴포넌트</td></tr><tr><td>메시징</td><td>Broker</td><td>이벤트를 중계하고 전달하는 플랫폼 (Kafka 등)</td></tr><tr><td>아키텍처</td><td>Event Sourcing</td><td>상태 대신 이벤트 로그로 시스템 상태 재구성</td></tr><tr><td>아키텍처</td><td>CQRS</td><td>명령 (Command) 과 조회 (Query) 의 처리 경로 분리</td></tr><tr><td>통합</td><td>Event Mesh</td><td>여러 브로커를 연계한 메시징 네트워크</td></tr><tr><td>운영</td><td>Outbox Pattern</td><td>DB 와 이벤트 발행 간 트랜잭션 정합성 확보를 위한 설계</td></tr></tbody></table><hr><h2 id=참고-및-출처-1>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-1>#</a></h2><ul><li><p><a href=https://learn.microsoft.com/en-us/azure/architecture/guide/architecture-styles/event-driven>Microsoft - Event-driven architecture style</a></p></li><li><p><a href=https://martinfowler.com/eaaDev/EventSourcing.html>Martin Fowler - Event Sourcing</a></p></li><li><p><a href=https://docs.confluent.io/platform/current/kafka/index.html>Confluent - Apache Kafka Documentation</a></p></li><li><p><a href=https://www.asyncapi.com/>AsyncAPI - Event Contract Design</a></p></li><li><p><a href=https://developers.redhat.com/articles/event-driven-architecture-overview>Red Hat - Event-driven architecture</a></p></li><li><p><a href=https://aws.amazon.com/event-driven-architecture/>AWS - Building Event-Driven Architectures</a></p></li></ul><hr><p>이로써 Event-Driven Architecture 에 대한 이론적 분석부터 실무 적용까지 모든 관점에서의 내용을 마무리했습니다.</p><p>원하시는 경우, 특정 항목 (예: EDA 기반 SaaS 설계 전략, Kafka 실전 구성, 이벤트 테스트 전략 등) 을 주제로 더 확장해 드릴 수 있습니다. 추가로 확인하고 싶은 주제가 있다면 알려주세요.</p><p>아래는 <strong>Event-Driven Architecture (EDA)</strong> 기반 SaaS 설계 전략과 이벤트 테스트 전략을 실무적으로 정리한 내용입니다.</p><hr><h2 id=eda-기반-saas-설계-전략>EDA 기반 SaaS 설계 전략<a hidden class=anchor aria-hidden=true href=#eda-기반-saas-설계-전략>#</a></h2><h3 id=1-saas-와-eda-결합-시-설계-목적>1. SaaS 와 EDA 결합 시 설계 목적<a hidden class=anchor aria-hidden=true href=#1-saas-와-eda-결합-시-설계-목적>#</a></h3><ul><li><strong>테넌트 간 격리</strong>와 <strong>이벤트 흐름의 재사용성 확보</strong></li><li><strong>확장성 높은 모듈화</strong>, 이벤트 기반 플러그인/모듈 구성</li><li><strong>멀티테넌시 (Multi-tenancy)</strong> 환경에서도 <strong>비동기 확장</strong> 가능</li></ul><h3 id=2-설계-아키텍처>2. 설계 아키텍처<a hidden class=anchor aria-hidden=true href=#2-설계-아키텍처>#</a></h3><pre class=mermaid>graph TD
    CLIENT[Multi-Tenant UI/API]
    CLIENT --&gt; SVC[Domain Service (Order/Invoice/Auth)]
    SVC --&gt; OUTBOX[(Outbox Table)]
    OUTBOX --&gt; CONNECT[CDC/Kafka Connect]
    CONNECT --&gt; BROKER[Kafka Broker]
    BROKER --&gt; AUDIT[Audit Service]
    BROKER --&gt; TENANT1[Tenant-1 Invoice Service]
    BROKER --&gt; TENANT2[Tenant-2 Invoice Service]
    BROKER --&gt; ML[Anomaly Detection ML Model]
</pre><h3 id=3-saas-설계-핵심-전략>3. SaaS 설계 핵심 전략<a hidden class=anchor aria-hidden=true href=#3-saas-설계-핵심-전략>#</a></h3><table><thead><tr><th>전략 항목</th><th>설명</th><th>적용 예시</th></tr></thead><tbody><tr><td>멀티테넌시 처리</td><td>이벤트에 <code>tenant_id</code> 필수 포함</td><td>Kafka Topic 내 Header 또는 Payload</td></tr><tr><td>도메인 분리</td><td>기능 단위 마이크로서비스 구성</td><td>주문, 결제, 알림을 분리</td></tr><tr><td>Outbox Pattern</td><td>데이터 정합성과 메시지 일관성 확보</td><td>DB → Outbox Table → Kafka</td></tr><tr><td>동적 Subscription</td><td>테넌트에 따라 동적 Consumer 구성</td><td>Runtime Topic Routing (Spring Cloud Stream 등)</td></tr><tr><td>확장성 기반 이벤트 필터링</td><td>토픽 필터, Consumer 분리</td><td>Kafka Streams, Kafka Router 활용</td></tr></tbody></table><hr><h2 id=이벤트-테스트-전략>이벤트 테스트 전략<a hidden class=anchor aria-hidden=true href=#이벤트-테스트-전략>#</a></h2><h3 id=1-테스트-유형별-분류>1. 테스트 유형별 분류<a hidden class=anchor aria-hidden=true href=#1-테스트-유형별-분류>#</a></h3><table><thead><tr><th>테스트 유형</th><th>대상</th><th>전략</th><th>도구</th></tr></thead><tbody><tr><td>유닛 테스트</td><td>이벤트 핸들러</td><td>가짜 이벤트 객체 주입</td><td>JUnit + MockKafkaConsumer</td></tr><tr><td>통합 테스트</td><td>브로커 ↔ Consumer</td><td>임베디드 브로커 사용</td><td>Testcontainers Kafka, Embedded Kafka</td></tr><tr><td>계약 테스트</td><td>Producer ↔ Consumer 간 메시지 계약</td><td>AsyncAPI, Pact (event messaging extension)</td><td></td></tr><tr><td>회귀 테스트</td><td>과거 이벤트 재처리</td><td>Event Replay 기능</td><td>Kafka Replay, Event Store replay</td></tr><tr><td>부하 테스트</td><td>Broker 처리량, Consumer 안정성</td><td>대량 이벤트 발행</td><td>K6, Locust, kafka-producer-perf-test.sh</td></tr></tbody></table><h3 id=2-예시-코드-python---유닛-테스트용-이벤트-핸들러-테스트>2. 예시 코드 (Python - 유닛 테스트용 이벤트 핸들러 테스트)<a hidden class=anchor aria-hidden=true href=#2-예시-코드-python---유닛-테스트용-이벤트-핸들러-테스트>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>handle_order_created</span><span class=p>(</span><span class=n>event</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>event</span><span class=p>[</span><span class=s2>&#34;status&#34;</span><span class=p>]</span> <span class=o>!=</span> <span class=s2>&#34;ORDER_CREATED&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&#34;Invalid event status&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># 로직 실행 (예: 재고 차감 등)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;Handled order </span><span class=si>{</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;order_id&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 테스트</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>test_handle_order_created_valid</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>event</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;order_id&#34;</span><span class=p>:</span> <span class=s2>&#34;ORD-001&#34;</span><span class=p>,</span> <span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;ORDER_CREATED&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>handle_order_created</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>assert</span> <span class=n>result</span> <span class=o>==</span> <span class=s2>&#34;Handled order ORD-001&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=3-테스트-전략-적용-포인트>3. 테스트 전략 적용 포인트<a hidden class=anchor aria-hidden=true href=#3-테스트-전략-적용-포인트>#</a></h3><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>이벤트 스키마 고정</td><td>테스트 시 스키마 변경으로 인한 실패 방지</td><td>Schema Registry Mock 사용</td></tr><tr><td>Consumer 동시성 테스트</td><td>병렬 처리에 따른 Race Condition 탐지</td><td>Consumer Group 동시 실행 시나리오</td></tr><tr><td>이벤트 순서 테스트</td><td>순서 보장 여부 확인</td><td>동일 Partition Key 로 연속 발행</td></tr><tr><td>장애 복원 테스트</td><td>Consumer 실패 → 재시도 시나리오</td><td>DLQ + Retry Simulation</td></tr></tbody></table><hr><p><strong>요약</strong>:<br>EDA 기반 SaaS 는 테넌트 중심 이벤트 처리 전략을 기반으로 확장성과 격리성을 확보하며, 이벤트 테스트는 단위 테스트부터 계약, 회귀, 장애 테스트까지 계층별로 계획적으로 구성되어야 합니다.</p><p>추가로 원하시는 경우, 예: <code>Kafka 기반 Outbox + CDC 예시 구현</code>, <code>DLQ 처리 흐름 시나리오</code>, <code>멀티테넌시 Kafka 클러스터 운영 전략</code> 도 정리해 드릴 수 있습니다. 어떤 항목이 더 궁금하신가요?</p><hr><p>안녕하세요! Event-Driven Architecture (이벤트 기반 아키텍처) 에 대해 포괄적으로 조사하겠습니다. 먼저 웹에서 최신 정보를 검색하여 조사를 시작하겠습니다.이제 충분한 정보를 수집했으므로 Event-Driven Architecture 에 대한 포괄적인 조사 내용을 작성하겠습니다.</p><h2 id=event-driven-architecture-이벤트-기반-아키텍처-조사-결과>Event-Driven Architecture (이벤트 기반 아키텍처) 조사 결과<a hidden class=anchor aria-hidden=true href=#event-driven-architecture-이벤트-기반-아키텍처-조사-결과>#</a></h2><h3 id=1-주제-태그>1. 주제 태그<a hidden class=anchor aria-hidden=true href=#1-주제-태그>#</a></h3><ul><li>Event-Driven-Architecture</li><li>Microservices-Communication</li><li>Asynchronous-Processing</li><li>Real-Time-Systems</li></ul><h3 id=2-주제-분류-분석>2. 주제 분류 분석<a hidden class=anchor aria-hidden=true href=#2-주제-분류-분석>#</a></h3><p>제시된 카테고리 계층 구조 &ldquo;Computer Science and Engineering&rdquo; > &ldquo;Software Engineering&rdquo; > &ldquo;Design and Architecture&rdquo; > &ldquo;Architecture Styles and Patterns&rdquo; > &ldquo;Architecture Styles&rdquo; > &ldquo;Messaging&rdquo; 는 적절합니다.</p><p><strong>근거:</strong></p><ul><li>EDA 는 소프트웨어 엔지니어링의 아키텍처 설계 패턴에 해당</li><li>메시징을 기반으로 한 아키텍처 스타일로 분류됨</li><li>분산 시스템과 마이크로서비스에서 널리 사용되는 패턴임</li></ul><h3 id=3-요약-문장-200-자-내외-1>3. 요약 문장 (200 자 내외)<a hidden class=anchor aria-hidden=true href=#3-요약-문장-200-자-내외-1>#</a></h3><p>이벤트 기반 아키텍처는 시스템 구성 요소들이 이벤트의 생성, 전파, 소비를 통해 비동기적으로 통신하는 소프트웨어 설계 패턴입니다. 느슨한 결합, 확장성, 실시간 응답성을 제공하며 마이크로서비스 아키텍처에서 핵심적인 역할을 담당합니다.</p><h3 id=4-개요-250-자-내외-1>4. 개요 (250 자 내외)<a hidden class=anchor aria-hidden=true href=#4-개요-250-자-내외-1>#</a></h3><p>Event-Driven Architecture (EDA) 는 이벤트 생산자, 이벤트 브로커, 이벤트 소비자로 구성된 비동기 통신 아키텍처입니다. 브로커 토폴로지와 중재자 토폴로지의 두 가지 주요 형태로 구현되며, CQRS, 사가 패턴, 이벤트 소싱과 함께 사용되어 분산 시스템의 데이터 일관성과 확장성을 보장합니다.</p><hr><h3 id=5-핵심-개념-2>5. 핵심 개념<a hidden class=anchor aria-hidden=true href=#5-핵심-개념-2>#</a></h3><h4 id=51-기본-개념>5.1 기본 개념<a hidden class=anchor aria-hidden=true href=#51-기본-개념>#</a></h4><p>Event-Driven Architecture 의 핵심 개념들:</p><ol><li><strong>Event (이벤트)</strong>: 시스템 내에서 발생하는 중요한 상태 변화나 사건</li><li><strong>Event Producer/Publisher (이벤트 생산자)</strong>: 이벤트를 생성하고 발행하는 구성 요소</li><li><strong>Event Consumer/Subscriber (이벤트 소비자)</strong>: 이벤트를 수신하고 처리하는 구성 요소</li><li><strong>Event Channel/Broker (이벤트 채널/브로커)</strong>: 이벤트를 중계하고 라우팅하는 미들웨어</li><li><strong>Asynchronous Communication (비동기 통신)</strong>: 즉시 응답을 기다리지 않는 통신 방식</li><li><strong>Loose Coupling (느슨한 결합)</strong>: 구성 요소 간의 독립성을 보장하는 설계 원칙</li></ol><h4 id=52-실무-구현-요소>5.2 실무 구현 요소<a hidden class=anchor aria-hidden=true href=#52-실무-구현-요소>#</a></h4><ul><li><strong>Message Queues (메시지 큐)</strong>: Apache Kafka, RabbitMQ, Amazon SQS</li><li><strong>Event Streaming Platforms (이벤트 스트리밍 플랫폼)</strong>: Apache Kafka, Amazon Kinesis</li><li><strong>Service Mesh (서비스 메시)</strong>: Istio, Linkerd</li><li><strong>Monitoring Tools (모니터링 도구)</strong>: Grafana, Splunk, Jaeger</li><li><strong>Schema Registry (스키마 레지스트리)</strong>: Confluent Schema Registry</li></ul><hr><h3 id=6-배경>6. 배경<a hidden class=anchor aria-hidden=true href=#6-배경>#</a></h3><p>Event-Driven Architecture 는 전통적인 요청 - 응답 기반 아키텍처의 한계를 극복하기 위해 등장했습니다. 구글, 아마존, 이베이와 같은 대규모 웹 서비스들이 초기 도입자였으며, 마이크로서비스 아키텍처의 확산과 함께 인기를 얻었습니다.</p><p><strong>역사적 발전:</strong></p><ul><li><strong>1960 년대</strong>: 이벤트 기반 프로그래밍의 초기 개념 등장</li><li><strong>1990 년대</strong>: Message-Oriented Middleware (MOM) 발전</li><li><strong>2000 년대</strong>: 대규모 웹 서비스에서의 적용 시작</li><li><strong>2010 년대</strong>: 마이크로서비스와 함께 주류 아키텍처로 발전</li></ul><hr><h3 id=7-목적-및-필요성>7. 목적 및 필요성<a hidden class=anchor aria-hidden=true href=#7-목적-및-필요성>#</a></h3><h4 id=목적>목적<a hidden class=anchor aria-hidden=true href=#목적>#</a></h4><ol><li><strong>확장성 향상</strong>: 구성 요소 독립적 확장 가능</li><li><strong>응답성 개선</strong>: 실시간 이벤트 처리</li><li><strong>시스템 복원력</strong>: 장애 격리 및 복구</li><li><strong>개발 생산성</strong>: 독립적 개발 및 배포</li></ol><h4 id=필요성>필요성<a hidden class=anchor aria-hidden=true href=#필요성>#</a></h4><ul><li><strong>대용량 데이터 처리</strong>: 초당 수백만 건의 이벤트 처리 필요</li><li><strong>실시간 요구사항</strong>: 즉시 응답이 필요한 비즈니스 요구</li><li><strong>시스템 복잡성 관리</strong>: 분산 시스템의 복잡성 해결</li><li><strong>비즈니스 민첩성</strong>: 빠른 기능 추가 및 변경</li></ul><hr><h3 id=8-주요-기능-및-역할>8. 주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#8-주요-기능-및-역할>#</a></h3><h4 id=81-주요-기능>8.1 주요 기능<a hidden class=anchor aria-hidden=true href=#81-주요-기능>#</a></h4><ol><li><strong>Event Publishing (이벤트 발행)</strong>: 비즈니스 이벤트 생성 및 전파</li><li><strong>Event Routing (이벤트 라우팅)</strong>: 관심 있는 소비자에게 이벤트 전달</li><li><strong>Event Processing (이벤트 처리)</strong>: 수신된 이벤트에 대한 비즈니스 로직 실행</li><li><strong>Event Storage (이벤트 저장)</strong>: 이벤트 이력 및 재처리를 위한 저장</li></ol><h4 id=82-역할>8.2 역할<a hidden class=anchor aria-hidden=true href=#82-역할>#</a></h4><ul><li><strong>Decoupling (분리)</strong>: 서비스 간 직접적 의존성 제거</li><li><strong>Integration (통합)</strong>: 이기종 시스템 간 통합</li><li><strong>Orchestration (오케스트레이션)</strong>: 복잡한 비즈니스 프로세스 조정</li><li><strong>Monitoring (모니터링)</strong>: 시스템 상태 및 성능 추적</li></ul><hr><h3 id=9-특징>9. 특징<a hidden class=anchor aria-hidden=true href=#9-특징>#</a></h3><ol><li><strong>비동기 통신</strong>: Fire-and-forget 방식의 이벤트 처리</li><li><strong>느슨한 결합</strong>: 생산자와 소비자 간 독립성</li><li><strong>확장성</strong>: 수평적 확장 용이</li><li><strong>탄력성</strong>: 부분 장애에 대한 내성</li><li><strong>실시간성</strong>: 이벤트 발생 즉시 처리</li><li><strong>이벤트 중심</strong>: 비즈니스 로직이 이벤트를 중심으로 구성</li></ol><hr><h3 id=10-핵심-원칙>10. 핵심 원칙<a hidden class=anchor aria-hidden=true href=#10-핵심-원칙>#</a></h3><ol><li><strong>Event-First Design (이벤트 우선 설계)</strong>: 이벤트를 중심으로 시스템 설계</li><li><strong>Single Responsibility (단일 책임)</strong>: 각 서비스는 특정 이벤트에 대한 명확한 책임</li><li><strong>Idempotency (멱등성)</strong>: 동일한 이벤트의 중복 처리 안전성</li><li><strong>Eventually Consistent (최종 일관성)</strong>: 분산 시스템에서의 데이터 일관성</li><li><strong>Schema Evolution (스키마 진화)</strong>: 하위 호환성 유지하는 이벤트 스키마 변경</li></ol><hr><h3 id=11-주요-원리-및-작동-원리>11. 주요 원리 및 작동 원리<a hidden class=anchor aria-hidden=true href=#11-주요-원리-및-작동-원리>#</a></h3><h4 id=111-작동-원리-다이어그램>11.1 작동 원리 다이어그램<a hidden class=anchor aria-hidden=true href=#111-작동-원리-다이어그램>#</a></h4><pre class=mermaid>graph TB
    A[Event Producer] --&gt;|Publish Event| B[Event Channel/Broker]
    B --&gt;|Route Event| C[Event Consumer 1]
    B --&gt;|Route Event| D[Event Consumer 2]
    B --&gt;|Route Event| E[Event Consumer N]
    
    subgraph &#34;Event Flow&#34;
        F[Event Generation] --&gt; G[Event Publication]
        G --&gt; H[Event Routing]
        H --&gt; I[Event Consumption]
        I --&gt; J[Event Processing]
    end
</pre><h4 id=112-주요-원리>11.2 주요 원리<a hidden class=anchor aria-hidden=true href=#112-주요-원리>#</a></h4><ol><li><p><strong>Publish-Subscribe Pattern (발행 - 구독 패턴)</strong></p><ul><li>이벤트 생산자가 이벤트를 발행</li><li>관심 있는 소비자들이 구독하여 수신</li></ul></li><li><p><strong>Event Sourcing (이벤트 소싱)</strong></p><ul><li>상태 변경을 이벤트 시퀀스로 저장</li><li>현재 상태를 이벤트 재생으로 복원</li></ul></li><li><p><strong>Deferred Execution (지연 실행)</strong></p><ul><li>이벤트 발생과 처리가 시간적으로 분리</li><li>비동기적 워크플로우 실현</li></ul></li></ol><hr><h3 id=12-구조-및-아키텍처>12. 구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#12-구조-및-아키텍처>#</a></h3><h4 id=121-기본-구조>12.1 기본 구조<a hidden class=anchor aria-hidden=true href=#121-기본-구조>#</a></h4><pre class=mermaid>graph LR
    subgraph &#34;Event Producers&#34;
        A1[User Interface]
        A2[Microservice A]
        A3[External System]
    end
    
    subgraph &#34;Event Infrastructure&#34;
        B1[Event Broker]
        B2[Event Store]
        B3[Event Router]
    end
    
    subgraph &#34;Event Consumers&#34;
        C1[Microservice B]
        C2[Analytics Service]
        C3[Notification Service]
    end
    
    A1 --&gt; B1
    A2 --&gt; B1
    A3 --&gt; B1
    
    B1 --&gt; B2
    B1 --&gt; B3
    
    B3 --&gt; C1
    B3 --&gt; C2
    B3 --&gt; C3
</pre><h4 id=122-필수-구성요소>12.2 필수 구성요소<a hidden class=anchor aria-hidden=true href=#122-필수-구성요소>#</a></h4><ol><li><p><strong>Event Sources (이벤트 소스)</strong></p><ul><li>기능: 이벤트 생성 및 발행</li><li>역할: 비즈니스 로직 실행 후 상태 변경 알림</li></ul></li><li><p><strong>Event Channels (이벤트 채널)</strong></p><ul><li>기능: 이벤트 전송 및 라우팅</li><li>역할: 생산자와 소비자 간 통신 매개</li></ul></li><li><p><strong>Event Processors (이벤트 프로세서)</strong></p><ul><li>기능: 이벤트 수신 및 처리</li><li>역할: 비즈니스 로직 실행 및 후속 이벤트 생성</li></ul></li></ol><h4 id=123-선택-구성요소>12.3 선택 구성요소<a hidden class=anchor aria-hidden=true href=#123-선택-구성요소>#</a></h4><ol><li><p><strong>Event Store (이벤트 저장소)</strong></p><ul><li>기능: 이벤트 영구 저장 및 이력 관리</li><li>특징: 감사, 복제, 재처리 지원</li></ul></li><li><p><strong>Event Mediator (이벤트 중재자)</strong></p><ul><li>기능: 복잡한 워크플로우 오케스트레이션</li><li>특징: 중앙 집중식 제어 및 오류 처리</li></ul></li><li><p><strong>Schema Registry (스키마 레지스트리)</strong></p><ul><li>기능: 이벤트 스키마 버전 관리</li><li>특징: 호환성 검증 및 진화 지원</li></ul></li></ol><hr><h3 id=13-구현-기법>13. 구현 기법<a hidden class=anchor aria-hidden=true href=#13-구현-기법>#</a></h3><h4 id=131-broker-topology-브로커-토폴로지>13.1 Broker Topology (브로커 토폴로지)<a hidden class=anchor aria-hidden=true href=#131-broker-topology-브로커-토폴로지>#</a></h4><p><strong>정의</strong>: 중앙 중재자 없이 이벤트 프로세서들이 체인 형태로 연결된 구조</p><p><strong>구성</strong>:</p><ul><li>Event Broker (이벤트 브로커)</li><li>Event Processors (이벤트 프로세서)</li><li>Processing Events (처리 이벤트)</li></ul><p><strong>목적</strong>: 단순한 이벤트 플로우에서 높은 성능과 확장성 제공</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1> 1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2> 2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3> 3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4> 4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5> 5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6> 6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7> 7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8> 8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9> 9</a>
</span><span class=lnt id=hl-13-10><a class=lnlinks href=#hl-13-10>10</a>
</span><span class=lnt id=hl-13-11><a class=lnlinks href=#hl-13-11>11</a>
</span><span class=lnt id=hl-13-12><a class=lnlinks href=#hl-13-12>12</a>
</span><span class=lnt id=hl-13-13><a class=lnlinks href=#hl-13-13>13</a>
</span><span class=lnt id=hl-13-14><a class=lnlinks href=#hl-13-14>14</a>
</span><span class=lnt id=hl-13-15><a class=lnlinks href=#hl-13-15>15</a>
</span><span class=lnt id=hl-13-16><a class=lnlinks href=#hl-13-16>16</a>
</span><span class=lnt id=hl-13-17><a class=lnlinks href=#hl-13-17>17</a>
</span><span class=lnt id=hl-13-18><a class=lnlinks href=#hl-13-18>18</a>
</span><span class=lnt id=hl-13-19><a class=lnlinks href=#hl-13-19>19</a>
</span><span class=lnt id=hl-13-20><a class=lnlinks href=#hl-13-20>20</a>
</span><span class=lnt id=hl-13-21><a class=lnlinks href=#hl-13-21>21</a>
</span><span class=lnt id=hl-13-22><a class=lnlinks href=#hl-13-22>22</a>
</span><span class=lnt id=hl-13-23><a class=lnlinks href=#hl-13-23>23</a>
</span><span class=lnt id=hl-13-24><a class=lnlinks href=#hl-13-24>24</a>
</span><span class=lnt id=hl-13-25><a class=lnlinks href=#hl-13-25>25</a>
</span><span class=lnt id=hl-13-26><a class=lnlinks href=#hl-13-26>26</a>
</span><span class=lnt id=hl-13-27><a class=lnlinks href=#hl-13-27>27</a>
</span><span class=lnt id=hl-13-28><a class=lnlinks href=#hl-13-28>28</a>
</span><span class=lnt id=hl-13-29><a class=lnlinks href=#hl-13-29>29</a>
</span><span class=lnt id=hl-13-30><a class=lnlinks href=#hl-13-30>30</a>
</span><span class=lnt id=hl-13-31><a class=lnlinks href=#hl-13-31>31</a>
</span><span class=lnt id=hl-13-32><a class=lnlinks href=#hl-13-32>32</a>
</span><span class=lnt id=hl-13-33><a class=lnlinks href=#hl-13-33>33</a>
</span><span class=lnt id=hl-13-34><a class=lnlinks href=#hl-13-34>34</a>
</span><span class=lnt id=hl-13-35><a class=lnlinks href=#hl-13-35>35</a>
</span><span class=lnt id=hl-13-36><a class=lnlinks href=#hl-13-36>36</a>
</span><span class=lnt id=hl-13-37><a class=lnlinks href=#hl-13-37>37</a>
</span><span class=lnt id=hl-13-38><a class=lnlinks href=#hl-13-38>38</a>
</span><span class=lnt id=hl-13-39><a class=lnlinks href=#hl-13-39>39</a>
</span><span class=lnt id=hl-13-40><a class=lnlinks href=#hl-13-40>40</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// Node.js를 사용한 브로커 토폴로지 구현
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>EventEmitter</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;events&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>EventBroker</span> <span class=kr>extends</span> <span class=nx>EventEmitter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>super</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>processors</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>registerProcessor</span><span class=p>(</span><span class=nx>processor</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>processors</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>processor</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>publishEvent</span><span class=p>(</span><span class=nx>eventType</span><span class=p>,</span> <span class=nx>eventData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Publishing event: </span><span class=si>${</span><span class=nx>eventType</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=nx>eventType</span><span class=p>,</span> <span class=nx>eventData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>OrderProcessor</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>broker</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>broker</span> <span class=o>=</span> <span class=nx>broker</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>broker</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;orderPlaced&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleOrderPlaced</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>handleOrderPlaced</span><span class=p>(</span><span class=nx>orderData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Processing order: </span><span class=si>${</span><span class=nx>orderData</span><span class=p>.</span><span class=nx>orderId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 주문 처리 로직
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>broker</span><span class=p>.</span><span class=nx>publishEvent</span><span class=p>(</span><span class=s1>&#39;orderProcessed&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>orderId</span><span class=o>:</span> <span class=nx>orderData</span><span class=p>.</span><span class=nx>orderId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;processed&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>broker</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>EventBroker</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>orderProcessor</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>OrderProcessor</span><span class=p>(</span><span class=nx>broker</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>broker</span><span class=p>.</span><span class=nx>publishEvent</span><span class=p>(</span><span class=s1>&#39;orderPlaced&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>orderId</span><span class=o>:</span> <span class=s1>&#39;12345&#39;</span><span class=p>,</span> <span class=nx>amount</span><span class=o>:</span> <span class=mi>100</span> <span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=132-mediator-topology-중재자-토폴로지>13.2 Mediator Topology (중재자 토폴로지)<a hidden class=anchor aria-hidden=true href=#132-mediator-topology-중재자-토폴로지>#</a></h4><p><strong>정의</strong>: 중앙 이벤트 중재자가 복잡한 워크플로우를 조정하는 구조</p><p><strong>구성</strong>:</p><ul><li>Event Queue (이벤트 큐)</li><li>Event Mediator (이벤트 중재자)</li><li>Event Channels (이벤트 채널)</li><li>Event Processors (이벤트 프로세서)</li></ul><p><strong>목적</strong>: 복잡한 비즈니스 프로세스의 오케스트레이션 및 오류 처리</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1> 1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2> 2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3> 3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4> 4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5> 5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6> 6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7> 7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8> 8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9> 9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10>10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11>11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12>12</a>
</span><span class=lnt id=hl-14-13><a class=lnlinks href=#hl-14-13>13</a>
</span><span class=lnt id=hl-14-14><a class=lnlinks href=#hl-14-14>14</a>
</span><span class=lnt id=hl-14-15><a class=lnlinks href=#hl-14-15>15</a>
</span><span class=lnt id=hl-14-16><a class=lnlinks href=#hl-14-16>16</a>
</span><span class=lnt id=hl-14-17><a class=lnlinks href=#hl-14-17>17</a>
</span><span class=lnt id=hl-14-18><a class=lnlinks href=#hl-14-18>18</a>
</span><span class=lnt id=hl-14-19><a class=lnlinks href=#hl-14-19>19</a>
</span><span class=lnt id=hl-14-20><a class=lnlinks href=#hl-14-20>20</a>
</span><span class=lnt id=hl-14-21><a class=lnlinks href=#hl-14-21>21</a>
</span><span class=lnt id=hl-14-22><a class=lnlinks href=#hl-14-22>22</a>
</span><span class=lnt id=hl-14-23><a class=lnlinks href=#hl-14-23>23</a>
</span><span class=lnt id=hl-14-24><a class=lnlinks href=#hl-14-24>24</a>
</span><span class=lnt id=hl-14-25><a class=lnlinks href=#hl-14-25>25</a>
</span><span class=lnt id=hl-14-26><a class=lnlinks href=#hl-14-26>26</a>
</span><span class=lnt id=hl-14-27><a class=lnlinks href=#hl-14-27>27</a>
</span><span class=lnt id=hl-14-28><a class=lnlinks href=#hl-14-28>28</a>
</span><span class=lnt id=hl-14-29><a class=lnlinks href=#hl-14-29>29</a>
</span><span class=lnt id=hl-14-30><a class=lnlinks href=#hl-14-30>30</a>
</span><span class=lnt id=hl-14-31><a class=lnlinks href=#hl-14-31>31</a>
</span><span class=lnt id=hl-14-32><a class=lnlinks href=#hl-14-32>32</a>
</span><span class=lnt id=hl-14-33><a class=lnlinks href=#hl-14-33>33</a>
</span><span class=lnt id=hl-14-34><a class=lnlinks href=#hl-14-34>34</a>
</span><span class=lnt id=hl-14-35><a class=lnlinks href=#hl-14-35>35</a>
</span><span class=lnt id=hl-14-36><a class=lnlinks href=#hl-14-36>36</a>
</span><span class=lnt id=hl-14-37><a class=lnlinks href=#hl-14-37>37</a>
</span><span class=lnt id=hl-14-38><a class=lnlinks href=#hl-14-38>38</a>
</span><span class=lnt id=hl-14-39><a class=lnlinks href=#hl-14-39>39</a>
</span><span class=lnt id=hl-14-40><a class=lnlinks href=#hl-14-40>40</a>
</span><span class=lnt id=hl-14-41><a class=lnlinks href=#hl-14-41>41</a>
</span><span class=lnt id=hl-14-42><a class=lnlinks href=#hl-14-42>42</a>
</span><span class=lnt id=hl-14-43><a class=lnlinks href=#hl-14-43>43</a>
</span><span class=lnt id=hl-14-44><a class=lnlinks href=#hl-14-44>44</a>
</span><span class=lnt id=hl-14-45><a class=lnlinks href=#hl-14-45>45</a>
</span><span class=lnt id=hl-14-46><a class=lnlinks href=#hl-14-46>46</a>
</span><span class=lnt id=hl-14-47><a class=lnlinks href=#hl-14-47>47</a>
</span><span class=lnt id=hl-14-48><a class=lnlinks href=#hl-14-48>48</a>
</span><span class=lnt id=hl-14-49><a class=lnlinks href=#hl-14-49>49</a>
</span><span class=lnt id=hl-14-50><a class=lnlinks href=#hl-14-50>50</a>
</span><span class=lnt id=hl-14-51><a class=lnlinks href=#hl-14-51>51</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 중재자 토폴로지 구현
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>EventMediator</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>workflows</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>processors</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>registerWorkflow</span><span class=p>(</span><span class=nx>eventType</span><span class=p>,</span> <span class=nx>steps</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>workflows</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>eventType</span><span class=p>,</span> <span class=nx>steps</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>registerProcessor</span><span class=p>(</span><span class=nx>processorType</span><span class=p>,</span> <span class=nx>processor</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>processors</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>processorType</span><span class=p>,</span> <span class=nx>processor</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>processEvent</span><span class=p>(</span><span class=nx>eventType</span><span class=p>,</span> <span class=nx>eventData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>workflow</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>workflows</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>eventType</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>workflow</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=sb>`No workflow found for event type: </span><span class=si>${</span><span class=nx>eventType</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>context</span> <span class=o>=</span> <span class=p>{</span> <span class=p>...</span><span class=nx>eventData</span><span class=p>,</span> <span class=nx>steps</span><span class=o>:</span> <span class=p>[]</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>step</span> <span class=k>of</span> <span class=nx>workflow</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>processor</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>processors</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>step</span><span class=p>.</span><span class=nx>processorType</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>processor</span><span class=p>.</span><span class=nx>process</span><span class=p>(</span><span class=nx>step</span><span class=p>,</span> <span class=nx>context</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=nx>context</span><span class=p>.</span><span class=nx>steps</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span> <span class=nx>step</span><span class=o>:</span> <span class=nx>step</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span> <span class=nx>result</span><span class=p>,</span> <span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;success&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>context</span><span class=p>.</span><span class=nx>steps</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span> <span class=nx>step</span><span class=o>:</span> <span class=nx>step</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span> <span class=nx>error</span><span class=p>,</span> <span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;failed&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleFailure</span><span class=p>(</span><span class=nx>workflow</span><span class=p>,</span> <span class=nx>context</span><span class=p>,</span> <span class=nx>step</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>context</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>handleFailure</span><span class=p>(</span><span class=nx>workflow</span><span class=p>,</span> <span class=nx>context</span><span class=p>,</span> <span class=nx>failedStep</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 보상 트랜잭션 실행
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>completedSteps</span> <span class=o>=</span> <span class=nx>context</span><span class=p>.</span><span class=nx>steps</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>s</span> <span class=p>=&gt;</span> <span class=nx>s</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=s1>&#39;success&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>completedStep</span> <span class=k>of</span> <span class=nx>completedSteps</span><span class=p>.</span><span class=nx>reverse</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>processor</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>processors</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>completedStep</span><span class=p>.</span><span class=nx>processorType</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=kr>await</span> <span class=nx>processor</span><span class=p>.</span><span class=nx>compensate</span><span class=p>(</span><span class=nx>completedStep</span><span class=p>,</span> <span class=nx>context</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>compensationError</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Compensation failed:&#39;</span><span class=p>,</span> <span class=nx>compensationError</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=133-event-sourcing-이벤트-소싱>13.3 Event Sourcing (이벤트 소싱)<a hidden class=anchor aria-hidden=true href=#133-event-sourcing-이벤트-소싱>#</a></h4><p><strong>정의</strong>: 상태 변경을 이벤트 시퀀스로 저장하여 상태를 재구성하는 패턴</p><p><strong>구성</strong>:</p><ul><li>Event Store (이벤트 저장소)</li><li>Aggregate (집계)</li><li>Event Stream (이벤트 스트림)</li></ul><p><strong>목적</strong>: 완전한 감사 로그, 시점 복원, 이벤트 재처리 지원</p><h4 id=134-cqrs-command-query-responsibility-segregation>13.4 CQRS (Command Query Responsibility Segregation)<a hidden class=anchor aria-hidden=true href=#134-cqrs-command-query-responsibility-segregation>#</a></h4><p><strong>정의</strong>: 명령 (쓰기) 과 조회 (읽기) 모델을 분리하는 패턴</p><p><strong>구성</strong>:</p><ul><li>Command Model (명령 모델)</li><li>Query Model (조회 모델)</li><li>Event Store (이벤트 저장소)</li></ul><p><strong>목적</strong>: 읽기와 쓰기 성능 최적화</p><hr><h3 id=14-장점>14. 장점<a hidden class=anchor aria-hidden=true href=#14-장점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>확장성</td><td>구성 요소별 독립적 확장 가능, 수평적 확장 용이</td></tr><tr><td></td><td>응답성</td><td>비동기 처리로 빠른 응답 시간, 실시간 이벤트 처리</td></tr><tr><td></td><td>탄력성</td><td>부분 장애 격리, 자동 복구 메커니즘</td></tr><tr><td></td><td>느슨한 결합</td><td>서비스 간 독립성, 변경 영향 최소화</td></tr><tr><td></td><td>개발 생산성</td><td>독립적 개발/배포, 팀 간 협업 효율성</td></tr><tr><td></td><td>실시간 처리</td><td>이벤트 기반 즉시 반응, 스트리밍 처리</td></tr><tr><td></td><td>통합 용이성</td><td>이기종 시스템 간 통합, API 독립성</td></tr><tr><td></td><td>비용 효율성</td><td>리소스 사용량 최적화, 온디맨드 처리</td></tr></tbody></table><hr><h3 id=15-단점과-문제점-그리고-해결방안>15. 단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#15-단점과-문제점-그리고-해결방안>#</a></h3><h4 id=단점-1>단점<a hidden class=anchor aria-hidden=true href=#단점-1>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>복잡성 증가</td><td>분산 시스템의 복잡한 디버깅과 모니터링</td><td>통합 모니터링 도구 도입, 분산 추적 시스템 구축</td></tr><tr><td></td><td>최종 일관성</td><td>데이터 일관성 보장의 어려움</td><td>Saga 패턴, 보상 트랜잭션 구현</td></tr><tr><td></td><td>운영 오버헤드</td><td>추가적인 인프라 관리 부담</td><td>클라우드 관리형 서비스 활용, 자동화 도구 도입</td></tr><tr><td></td><td>학습 곡선</td><td>새로운 개발 패러다임 습득 필요</td><td>팀 교육, 점진적 도입, 베스트 프랙티스 수립</td></tr></tbody></table><h4 id=문제점-1>문제점<a hidden class=anchor aria-hidden=true href=#문제점-1>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>이벤트 중복 처리</td><td>네트워크 재시도, 브로커 장애</td><td>데이터 불일치, 비즈니스 로직 오류</td><td>이벤트 ID 추적, 로그 분석</td><td>멱등성 설계, 중복 검사</td><td>이벤트 순서 보장, 트랜잭션 로그</td></tr><tr><td></td><td>이벤트 순서 문제</td><td>병렬 처리, 네트워크 지연</td><td>비즈니스 규칙 위반</td><td>타임스탬프 분석, 순서 검증</td><td>파티셔닝, 순서 보장 큐</td><td>버전 벡터, 라미포트 타임스탬프</td></tr><tr><td></td><td>메시지 유실</td><td>브로커 장애, 네트워크 실패</td><td>데이터 누락, 프로세스 중단</td><td>메시지 추적, 헬스 체크</td><td>영속성 보장, 복제</td><td>At-least-once 배달, 재시도 메커니즘</td></tr><tr><td></td><td>백프레셰 문제</td><td>소비자 처리 속도 저하</td><td>메모리 증가, 성능 저하</td><td>큐 깊이 모니터링</td><td>적응적 처리, 로드 밸런싱</td><td>우선순위 큐, 스로틀링</td></tr></tbody></table><hr><h3 id=16-도전-과제>16. 도전 과제<a hidden class=anchor aria-hidden=true href=#16-도전-과제>#</a></h3><h4 id=기술적-도전-과제>기술적 도전 과제<a hidden class=anchor aria-hidden=true href=#기술적-도전-과제>#</a></h4><ol><li><p><strong>Schema Evolution (스키마 진화)</strong></p><ul><li>원인: 비즈니스 요구사항 변화, 시스템 진화</li><li>영향: 호환성 문제, 시스템 중단</li><li>해결방법: 스키마 레지스트리, 점진적 마이그레이션</li></ul></li><li><p><strong>Event Ordering (이벤트 순서 보장)</strong></p><ul><li>원인: 분산 환경의 동시성</li><li>영향: 데이터 일관성 문제</li><li>해결방법: 파티셔닝, 벡터 클록</li></ul></li></ol><h4 id=운영적-도전-과제>운영적 도전 과제<a hidden class=anchor aria-hidden=true href=#운영적-도전-과제>#</a></h4><ol><li><p><strong>Observability (관찰 가능성)</strong></p><ul><li>원인: 분산된 이벤트 플로우</li><li>영향: 디버깅 어려움</li><li>해결방법: 분산 추적, 로그 집계</li></ul></li><li><p><strong>Security (보안)</strong></p><ul><li>원인: 다중 네트워크 통신</li><li>영향: 데이터 유출 위험</li><li>해결방법: 암호화, 인증/인가</li></ul></li></ol><hr><h3 id=17-분류-기준에-따른-종류-및-유형>17. 분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#17-분류-기준에-따른-종류-및-유형>#</a></h3><table><thead><tr><th>분류 기준</th><th>유형</th><th>설명</th><th>특징</th></tr></thead><tbody><tr><td>토폴로지</td><td>Broker Topology</td><td>중앙 중재자 없는 체인 구조</td><td>높은 성능, 단순한 플로우</td></tr><tr><td></td><td>Mediator Topology</td><td>중앙 중재자 기반 구조</td><td>복잡한 오케스트레이션, 오류 처리</td></tr><tr><td>처리 방식</td><td>Simple Event Processing</td><td>단순한 이벤트 반응</td><td>1:1 이벤트 처리</td></tr><tr><td></td><td>Complex Event Processing</td><td>복합 이벤트 분석</td><td>패턴 매칭, 집계</td></tr><tr><td>일관성 모델</td><td>Strong Consistency</td><td>강한 일관성 보장</td><td>동기 처리, 성능 저하</td></tr><tr><td></td><td>Eventual Consistency</td><td>최종 일관성</td><td>비동기 처리, 높은 성능</td></tr><tr><td>배달 보장</td><td>At-most-once</td><td>최대 한 번 배달</td><td>메시지 유실 가능</td></tr><tr><td></td><td>At-least-once</td><td>최소 한 번 배달</td><td>중복 처리 가능</td></tr><tr><td></td><td>Exactly-once</td><td>정확히 한 번 배달</td><td>높은 복잡성, 완벽한 보장</td></tr></tbody></table><hr><h3 id=18-실무-사용-예시>18. 실무 사용 예시<a hidden class=anchor aria-hidden=true href=#18-실무-사용-예시>#</a></h3><table><thead><tr><th>분야</th><th>용도</th><th>함께 사용되는 기술</th><th>효과</th></tr></thead><tbody><tr><td>E-Commerce</td><td>주문 처리, 재고 관리</td><td>Apache Kafka, Redis</td><td>실시간 재고 업데이트, 확장 가능한 주문 처리</td></tr><tr><td>금융 서비스</td><td>실시간 거래, 사기 탐지</td><td>Apache Flink, Kafka Streams</td><td>밀리초 단위 거래 처리, 즉시 사기 탐지</td></tr><tr><td>IoT</td><td>센서 데이터 처리, 모니터링</td><td>MQTT, InfluxDB</td><td>대용량 센서 데이터 실시간 처리</td></tr><tr><td>소셜 미디어</td><td>피드 업데이트, 알림</td><td>Redis Streams, RabbitMQ</td><td>실시간 소셜 피드, 즉시 알림</td></tr><tr><td>게임</td><td>플레이어 액션, 리더보드</td><td>Apache Pulsar, MongoDB</td><td>실시간 게임 상태 동기화</td></tr><tr><td>스트리밍</td><td>콘텐츠 배달, 분석</td><td>Kafka, Apache Storm</td><td>개인화된 추천, 실시간 시청 분석</td></tr></tbody></table><hr><h3 id=19-활용-사례-netflix-의-콘텐츠-파이낸스-시스템>19. 활용 사례: Netflix 의 콘텐츠 파이낸스 시스템<a hidden class=anchor aria-hidden=true href=#19-활용-사례-netflix-의-콘텐츠-파이낸스-시스템>#</a></h3><h4 id=시스템-구성>시스템 구성<a hidden class=anchor aria-hidden=true href=#시스템-구성>#</a></h4><pre class=mermaid>graph TB
    subgraph &#34;Content Finance System&#34;
        A[Content Planning Service] --&gt;|Budget Events| B[Event Bus - Kafka]
        C[Spending Tracking Service] --&gt;|Expense Events| B
        D[Catalog Service] --&gt;|Content Events| B
        
        B --&gt;|Financial Events| E[Finance Analytics Service]
        B --&gt;|Budget Events| F[Budget Management Service]
        B --&gt;|Report Events| G[Reporting Service]
        
        E --&gt; H[Financial Dashboard]
        F --&gt; I[Budget Alerts]
        G --&gt; J[Executive Reports]
    end
    
    subgraph &#34;External Systems&#34;
        K[Production Systems] --&gt;|Production Events| B
        L[Content Acquisition] --&gt;|Acquisition Events| B
    end
</pre><h4 id=workflow-1>Workflow<a hidden class=anchor aria-hidden=true href=#workflow-1>#</a></h4><ol><li><p><strong>콘텐츠 기획 단계</strong></p><ul><li>콘텐츠 기획 서비스에서 예산 이벤트 발행</li><li>예산 관리 서비스에서 예산 할당 처리</li></ul></li><li><p><strong>제작 진행 단계</strong></p><ul><li>제작 시스템에서 지출 이벤트 실시간 발행</li><li>지출 추적 서비스에서 예산 대비 진행률 계산</li></ul></li><li><p><strong>분석 및 보고 단계</strong></p><ul><li>금융 분석 서비스에서 트렌드 분석</li><li>보고 서비스에서 경영진 대시보드 업데이트</li></ul></li></ol><h4 id=eda-의-역할>EDA 의 역할<a hidden class=anchor aria-hidden=true href=#eda-의-역할>#</a></h4><ul><li><strong>실시간 예산 추적</strong>: 제작 비용의 즉시 반영</li><li><strong>확장성</strong>: 글로벌 제작 프로젝트 지원</li><li><strong>데이터 일관성</strong>: 복수의 시스템 간 동기화</li><li><strong>감사 가능성</strong>: 모든 금융 활동의 이벤트 로그</li></ul><h4 id=기존-시스템과의-차이점>기존 시스템과의 차이점<a hidden class=anchor aria-hidden=true href=#기존-시스템과의-차이점>#</a></h4><table><thead><tr><th>구분</th><th>기존 배치 시스템</th><th>EDA 기반 시스템</th></tr></thead><tbody><tr><td>데이터 갱신</td><td>일일 배치 처리</td><td>실시간 이벤트 처리</td></tr><tr><td>확장성</td><td>수직 확장 제한</td><td>수평 확장 용이</td></tr><tr><td>장애 복구</td><td>전체 시스템 재시작</td><td>부분 서비스 복구</td></tr><tr><td>개발 속도</td><td>통합 배포 필요</td><td>독립적 서비스 배포</td></tr></tbody></table><hr><h3 id=20-구현-예시>20. 구현 예시<a hidden class=anchor aria-hidden=true href=#20-구현-예시>#</a></h3><h4 id=netflix-콘텐츠-파이낸스-시스템-구현-javascript>Netflix 콘텐츠 파이낸스 시스템 구현 (JavaScript)<a hidden class=anchor aria-hidden=true href=#netflix-콘텐츠-파이낸스-시스템-구현-javascript>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1>  1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2>  2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3>  3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4>  4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5>  5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6>  6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7>  7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8>  8</a>
</span><span class=lnt id=hl-16-9><a class=lnlinks href=#hl-16-9>  9</a>
</span><span class=lnt id=hl-16-10><a class=lnlinks href=#hl-16-10> 10</a>
</span><span class=lnt id=hl-16-11><a class=lnlinks href=#hl-16-11> 11</a>
</span><span class=lnt id=hl-16-12><a class=lnlinks href=#hl-16-12> 12</a>
</span><span class=lnt id=hl-16-13><a class=lnlinks href=#hl-16-13> 13</a>
</span><span class=lnt id=hl-16-14><a class=lnlinks href=#hl-16-14> 14</a>
</span><span class=lnt id=hl-16-15><a class=lnlinks href=#hl-16-15> 15</a>
</span><span class=lnt id=hl-16-16><a class=lnlinks href=#hl-16-16> 16</a>
</span><span class=lnt id=hl-16-17><a class=lnlinks href=#hl-16-17> 17</a>
</span><span class=lnt id=hl-16-18><a class=lnlinks href=#hl-16-18> 18</a>
</span><span class=lnt id=hl-16-19><a class=lnlinks href=#hl-16-19> 19</a>
</span><span class=lnt id=hl-16-20><a class=lnlinks href=#hl-16-20> 20</a>
</span><span class=lnt id=hl-16-21><a class=lnlinks href=#hl-16-21> 21</a>
</span><span class=lnt id=hl-16-22><a class=lnlinks href=#hl-16-22> 22</a>
</span><span class=lnt id=hl-16-23><a class=lnlinks href=#hl-16-23> 23</a>
</span><span class=lnt id=hl-16-24><a class=lnlinks href=#hl-16-24> 24</a>
</span><span class=lnt id=hl-16-25><a class=lnlinks href=#hl-16-25> 25</a>
</span><span class=lnt id=hl-16-26><a class=lnlinks href=#hl-16-26> 26</a>
</span><span class=lnt id=hl-16-27><a class=lnlinks href=#hl-16-27> 27</a>
</span><span class=lnt id=hl-16-28><a class=lnlinks href=#hl-16-28> 28</a>
</span><span class=lnt id=hl-16-29><a class=lnlinks href=#hl-16-29> 29</a>
</span><span class=lnt id=hl-16-30><a class=lnlinks href=#hl-16-30> 30</a>
</span><span class=lnt id=hl-16-31><a class=lnlinks href=#hl-16-31> 31</a>
</span><span class=lnt id=hl-16-32><a class=lnlinks href=#hl-16-32> 32</a>
</span><span class=lnt id=hl-16-33><a class=lnlinks href=#hl-16-33> 33</a>
</span><span class=lnt id=hl-16-34><a class=lnlinks href=#hl-16-34> 34</a>
</span><span class=lnt id=hl-16-35><a class=lnlinks href=#hl-16-35> 35</a>
</span><span class=lnt id=hl-16-36><a class=lnlinks href=#hl-16-36> 36</a>
</span><span class=lnt id=hl-16-37><a class=lnlinks href=#hl-16-37> 37</a>
</span><span class=lnt id=hl-16-38><a class=lnlinks href=#hl-16-38> 38</a>
</span><span class=lnt id=hl-16-39><a class=lnlinks href=#hl-16-39> 39</a>
</span><span class=lnt id=hl-16-40><a class=lnlinks href=#hl-16-40> 40</a>
</span><span class=lnt id=hl-16-41><a class=lnlinks href=#hl-16-41> 41</a>
</span><span class=lnt id=hl-16-42><a class=lnlinks href=#hl-16-42> 42</a>
</span><span class=lnt id=hl-16-43><a class=lnlinks href=#hl-16-43> 43</a>
</span><span class=lnt id=hl-16-44><a class=lnlinks href=#hl-16-44> 44</a>
</span><span class=lnt id=hl-16-45><a class=lnlinks href=#hl-16-45> 45</a>
</span><span class=lnt id=hl-16-46><a class=lnlinks href=#hl-16-46> 46</a>
</span><span class=lnt id=hl-16-47><a class=lnlinks href=#hl-16-47> 47</a>
</span><span class=lnt id=hl-16-48><a class=lnlinks href=#hl-16-48> 48</a>
</span><span class=lnt id=hl-16-49><a class=lnlinks href=#hl-16-49> 49</a>
</span><span class=lnt id=hl-16-50><a class=lnlinks href=#hl-16-50> 50</a>
</span><span class=lnt id=hl-16-51><a class=lnlinks href=#hl-16-51> 51</a>
</span><span class=lnt id=hl-16-52><a class=lnlinks href=#hl-16-52> 52</a>
</span><span class=lnt id=hl-16-53><a class=lnlinks href=#hl-16-53> 53</a>
</span><span class=lnt id=hl-16-54><a class=lnlinks href=#hl-16-54> 54</a>
</span><span class=lnt id=hl-16-55><a class=lnlinks href=#hl-16-55> 55</a>
</span><span class=lnt id=hl-16-56><a class=lnlinks href=#hl-16-56> 56</a>
</span><span class=lnt id=hl-16-57><a class=lnlinks href=#hl-16-57> 57</a>
</span><span class=lnt id=hl-16-58><a class=lnlinks href=#hl-16-58> 58</a>
</span><span class=lnt id=hl-16-59><a class=lnlinks href=#hl-16-59> 59</a>
</span><span class=lnt id=hl-16-60><a class=lnlinks href=#hl-16-60> 60</a>
</span><span class=lnt id=hl-16-61><a class=lnlinks href=#hl-16-61> 61</a>
</span><span class=lnt id=hl-16-62><a class=lnlinks href=#hl-16-62> 62</a>
</span><span class=lnt id=hl-16-63><a class=lnlinks href=#hl-16-63> 63</a>
</span><span class=lnt id=hl-16-64><a class=lnlinks href=#hl-16-64> 64</a>
</span><span class=lnt id=hl-16-65><a class=lnlinks href=#hl-16-65> 65</a>
</span><span class=lnt id=hl-16-66><a class=lnlinks href=#hl-16-66> 66</a>
</span><span class=lnt id=hl-16-67><a class=lnlinks href=#hl-16-67> 67</a>
</span><span class=lnt id=hl-16-68><a class=lnlinks href=#hl-16-68> 68</a>
</span><span class=lnt id=hl-16-69><a class=lnlinks href=#hl-16-69> 69</a>
</span><span class=lnt id=hl-16-70><a class=lnlinks href=#hl-16-70> 70</a>
</span><span class=lnt id=hl-16-71><a class=lnlinks href=#hl-16-71> 71</a>
</span><span class=lnt id=hl-16-72><a class=lnlinks href=#hl-16-72> 72</a>
</span><span class=lnt id=hl-16-73><a class=lnlinks href=#hl-16-73> 73</a>
</span><span class=lnt id=hl-16-74><a class=lnlinks href=#hl-16-74> 74</a>
</span><span class=lnt id=hl-16-75><a class=lnlinks href=#hl-16-75> 75</a>
</span><span class=lnt id=hl-16-76><a class=lnlinks href=#hl-16-76> 76</a>
</span><span class=lnt id=hl-16-77><a class=lnlinks href=#hl-16-77> 77</a>
</span><span class=lnt id=hl-16-78><a class=lnlinks href=#hl-16-78> 78</a>
</span><span class=lnt id=hl-16-79><a class=lnlinks href=#hl-16-79> 79</a>
</span><span class=lnt id=hl-16-80><a class=lnlinks href=#hl-16-80> 80</a>
</span><span class=lnt id=hl-16-81><a class=lnlinks href=#hl-16-81> 81</a>
</span><span class=lnt id=hl-16-82><a class=lnlinks href=#hl-16-82> 82</a>
</span><span class=lnt id=hl-16-83><a class=lnlinks href=#hl-16-83> 83</a>
</span><span class=lnt id=hl-16-84><a class=lnlinks href=#hl-16-84> 84</a>
</span><span class=lnt id=hl-16-85><a class=lnlinks href=#hl-16-85> 85</a>
</span><span class=lnt id=hl-16-86><a class=lnlinks href=#hl-16-86> 86</a>
</span><span class=lnt id=hl-16-87><a class=lnlinks href=#hl-16-87> 87</a>
</span><span class=lnt id=hl-16-88><a class=lnlinks href=#hl-16-88> 88</a>
</span><span class=lnt id=hl-16-89><a class=lnlinks href=#hl-16-89> 89</a>
</span><span class=lnt id=hl-16-90><a class=lnlinks href=#hl-16-90> 90</a>
</span><span class=lnt id=hl-16-91><a class=lnlinks href=#hl-16-91> 91</a>
</span><span class=lnt id=hl-16-92><a class=lnlinks href=#hl-16-92> 92</a>
</span><span class=lnt id=hl-16-93><a class=lnlinks href=#hl-16-93> 93</a>
</span><span class=lnt id=hl-16-94><a class=lnlinks href=#hl-16-94> 94</a>
</span><span class=lnt id=hl-16-95><a class=lnlinks href=#hl-16-95> 95</a>
</span><span class=lnt id=hl-16-96><a class=lnlinks href=#hl-16-96> 96</a>
</span><span class=lnt id=hl-16-97><a class=lnlinks href=#hl-16-97> 97</a>
</span><span class=lnt id=hl-16-98><a class=lnlinks href=#hl-16-98> 98</a>
</span><span class=lnt id=hl-16-99><a class=lnlinks href=#hl-16-99> 99</a>
</span><span class=lnt id=hl-16-100><a class=lnlinks href=#hl-16-100>100</a>
</span><span class=lnt id=hl-16-101><a class=lnlinks href=#hl-16-101>101</a>
</span><span class=lnt id=hl-16-102><a class=lnlinks href=#hl-16-102>102</a>
</span><span class=lnt id=hl-16-103><a class=lnlinks href=#hl-16-103>103</a>
</span><span class=lnt id=hl-16-104><a class=lnlinks href=#hl-16-104>104</a>
</span><span class=lnt id=hl-16-105><a class=lnlinks href=#hl-16-105>105</a>
</span><span class=lnt id=hl-16-106><a class=lnlinks href=#hl-16-106>106</a>
</span><span class=lnt id=hl-16-107><a class=lnlinks href=#hl-16-107>107</a>
</span><span class=lnt id=hl-16-108><a class=lnlinks href=#hl-16-108>108</a>
</span><span class=lnt id=hl-16-109><a class=lnlinks href=#hl-16-109>109</a>
</span><span class=lnt id=hl-16-110><a class=lnlinks href=#hl-16-110>110</a>
</span><span class=lnt id=hl-16-111><a class=lnlinks href=#hl-16-111>111</a>
</span><span class=lnt id=hl-16-112><a class=lnlinks href=#hl-16-112>112</a>
</span><span class=lnt id=hl-16-113><a class=lnlinks href=#hl-16-113>113</a>
</span><span class=lnt id=hl-16-114><a class=lnlinks href=#hl-16-114>114</a>
</span><span class=lnt id=hl-16-115><a class=lnlinks href=#hl-16-115>115</a>
</span><span class=lnt id=hl-16-116><a class=lnlinks href=#hl-16-116>116</a>
</span><span class=lnt id=hl-16-117><a class=lnlinks href=#hl-16-117>117</a>
</span><span class=lnt id=hl-16-118><a class=lnlinks href=#hl-16-118>118</a>
</span><span class=lnt id=hl-16-119><a class=lnlinks href=#hl-16-119>119</a>
</span><span class=lnt id=hl-16-120><a class=lnlinks href=#hl-16-120>120</a>
</span><span class=lnt id=hl-16-121><a class=lnlinks href=#hl-16-121>121</a>
</span><span class=lnt id=hl-16-122><a class=lnlinks href=#hl-16-122>122</a>
</span><span class=lnt id=hl-16-123><a class=lnlinks href=#hl-16-123>123</a>
</span><span class=lnt id=hl-16-124><a class=lnlinks href=#hl-16-124>124</a>
</span><span class=lnt id=hl-16-125><a class=lnlinks href=#hl-16-125>125</a>
</span><span class=lnt id=hl-16-126><a class=lnlinks href=#hl-16-126>126</a>
</span><span class=lnt id=hl-16-127><a class=lnlinks href=#hl-16-127>127</a>
</span><span class=lnt id=hl-16-128><a class=lnlinks href=#hl-16-128>128</a>
</span><span class=lnt id=hl-16-129><a class=lnlinks href=#hl-16-129>129</a>
</span><span class=lnt id=hl-16-130><a class=lnlinks href=#hl-16-130>130</a>
</span><span class=lnt id=hl-16-131><a class=lnlinks href=#hl-16-131>131</a>
</span><span class=lnt id=hl-16-132><a class=lnlinks href=#hl-16-132>132</a>
</span><span class=lnt id=hl-16-133><a class=lnlinks href=#hl-16-133>133</a>
</span><span class=lnt id=hl-16-134><a class=lnlinks href=#hl-16-134>134</a>
</span><span class=lnt id=hl-16-135><a class=lnlinks href=#hl-16-135>135</a>
</span><span class=lnt id=hl-16-136><a class=lnlinks href=#hl-16-136>136</a>
</span><span class=lnt id=hl-16-137><a class=lnlinks href=#hl-16-137>137</a>
</span><span class=lnt id=hl-16-138><a class=lnlinks href=#hl-16-138>138</a>
</span><span class=lnt id=hl-16-139><a class=lnlinks href=#hl-16-139>139</a>
</span><span class=lnt id=hl-16-140><a class=lnlinks href=#hl-16-140>140</a>
</span><span class=lnt id=hl-16-141><a class=lnlinks href=#hl-16-141>141</a>
</span><span class=lnt id=hl-16-142><a class=lnlinks href=#hl-16-142>142</a>
</span><span class=lnt id=hl-16-143><a class=lnlinks href=#hl-16-143>143</a>
</span><span class=lnt id=hl-16-144><a class=lnlinks href=#hl-16-144>144</a>
</span><span class=lnt id=hl-16-145><a class=lnlinks href=#hl-16-145>145</a>
</span><span class=lnt id=hl-16-146><a class=lnlinks href=#hl-16-146>146</a>
</span><span class=lnt id=hl-16-147><a class=lnlinks href=#hl-16-147>147</a>
</span><span class=lnt id=hl-16-148><a class=lnlinks href=#hl-16-148>148</a>
</span><span class=lnt id=hl-16-149><a class=lnlinks href=#hl-16-149>149</a>
</span><span class=lnt id=hl-16-150><a class=lnlinks href=#hl-16-150>150</a>
</span><span class=lnt id=hl-16-151><a class=lnlinks href=#hl-16-151>151</a>
</span><span class=lnt id=hl-16-152><a class=lnlinks href=#hl-16-152>152</a>
</span><span class=lnt id=hl-16-153><a class=lnlinks href=#hl-16-153>153</a>
</span><span class=lnt id=hl-16-154><a class=lnlinks href=#hl-16-154>154</a>
</span><span class=lnt id=hl-16-155><a class=lnlinks href=#hl-16-155>155</a>
</span><span class=lnt id=hl-16-156><a class=lnlinks href=#hl-16-156>156</a>
</span><span class=lnt id=hl-16-157><a class=lnlinks href=#hl-16-157>157</a>
</span><span class=lnt id=hl-16-158><a class=lnlinks href=#hl-16-158>158</a>
</span><span class=lnt id=hl-16-159><a class=lnlinks href=#hl-16-159>159</a>
</span><span class=lnt id=hl-16-160><a class=lnlinks href=#hl-16-160>160</a>
</span><span class=lnt id=hl-16-161><a class=lnlinks href=#hl-16-161>161</a>
</span><span class=lnt id=hl-16-162><a class=lnlinks href=#hl-16-162>162</a>
</span><span class=lnt id=hl-16-163><a class=lnlinks href=#hl-16-163>163</a>
</span><span class=lnt id=hl-16-164><a class=lnlinks href=#hl-16-164>164</a>
</span><span class=lnt id=hl-16-165><a class=lnlinks href=#hl-16-165>165</a>
</span><span class=lnt id=hl-16-166><a class=lnlinks href=#hl-16-166>166</a>
</span><span class=lnt id=hl-16-167><a class=lnlinks href=#hl-16-167>167</a>
</span><span class=lnt id=hl-16-168><a class=lnlinks href=#hl-16-168>168</a>
</span><span class=lnt id=hl-16-169><a class=lnlinks href=#hl-16-169>169</a>
</span><span class=lnt id=hl-16-170><a class=lnlinks href=#hl-16-170>170</a>
</span><span class=lnt id=hl-16-171><a class=lnlinks href=#hl-16-171>171</a>
</span><span class=lnt id=hl-16-172><a class=lnlinks href=#hl-16-172>172</a>
</span><span class=lnt id=hl-16-173><a class=lnlinks href=#hl-16-173>173</a>
</span><span class=lnt id=hl-16-174><a class=lnlinks href=#hl-16-174>174</a>
</span><span class=lnt id=hl-16-175><a class=lnlinks href=#hl-16-175>175</a>
</span><span class=lnt id=hl-16-176><a class=lnlinks href=#hl-16-176>176</a>
</span><span class=lnt id=hl-16-177><a class=lnlinks href=#hl-16-177>177</a>
</span><span class=lnt id=hl-16-178><a class=lnlinks href=#hl-16-178>178</a>
</span><span class=lnt id=hl-16-179><a class=lnlinks href=#hl-16-179>179</a>
</span><span class=lnt id=hl-16-180><a class=lnlinks href=#hl-16-180>180</a>
</span><span class=lnt id=hl-16-181><a class=lnlinks href=#hl-16-181>181</a>
</span><span class=lnt id=hl-16-182><a class=lnlinks href=#hl-16-182>182</a>
</span><span class=lnt id=hl-16-183><a class=lnlinks href=#hl-16-183>183</a>
</span><span class=lnt id=hl-16-184><a class=lnlinks href=#hl-16-184>184</a>
</span><span class=lnt id=hl-16-185><a class=lnlinks href=#hl-16-185>185</a>
</span><span class=lnt id=hl-16-186><a class=lnlinks href=#hl-16-186>186</a>
</span><span class=lnt id=hl-16-187><a class=lnlinks href=#hl-16-187>187</a>
</span><span class=lnt id=hl-16-188><a class=lnlinks href=#hl-16-188>188</a>
</span><span class=lnt id=hl-16-189><a class=lnlinks href=#hl-16-189>189</a>
</span><span class=lnt id=hl-16-190><a class=lnlinks href=#hl-16-190>190</a>
</span><span class=lnt id=hl-16-191><a class=lnlinks href=#hl-16-191>191</a>
</span><span class=lnt id=hl-16-192><a class=lnlinks href=#hl-16-192>192</a>
</span><span class=lnt id=hl-16-193><a class=lnlinks href=#hl-16-193>193</a>
</span><span class=lnt id=hl-16-194><a class=lnlinks href=#hl-16-194>194</a>
</span><span class=lnt id=hl-16-195><a class=lnlinks href=#hl-16-195>195</a>
</span><span class=lnt id=hl-16-196><a class=lnlinks href=#hl-16-196>196</a>
</span><span class=lnt id=hl-16-197><a class=lnlinks href=#hl-16-197>197</a>
</span><span class=lnt id=hl-16-198><a class=lnlinks href=#hl-16-198>198</a>
</span><span class=lnt id=hl-16-199><a class=lnlinks href=#hl-16-199>199</a>
</span><span class=lnt id=hl-16-200><a class=lnlinks href=#hl-16-200>200</a>
</span><span class=lnt id=hl-16-201><a class=lnlinks href=#hl-16-201>201</a>
</span><span class=lnt id=hl-16-202><a class=lnlinks href=#hl-16-202>202</a>
</span><span class=lnt id=hl-16-203><a class=lnlinks href=#hl-16-203>203</a>
</span><span class=lnt id=hl-16-204><a class=lnlinks href=#hl-16-204>204</a>
</span><span class=lnt id=hl-16-205><a class=lnlinks href=#hl-16-205>205</a>
</span><span class=lnt id=hl-16-206><a class=lnlinks href=#hl-16-206>206</a>
</span><span class=lnt id=hl-16-207><a class=lnlinks href=#hl-16-207>207</a>
</span><span class=lnt id=hl-16-208><a class=lnlinks href=#hl-16-208>208</a>
</span><span class=lnt id=hl-16-209><a class=lnlinks href=#hl-16-209>209</a>
</span><span class=lnt id=hl-16-210><a class=lnlinks href=#hl-16-210>210</a>
</span><span class=lnt id=hl-16-211><a class=lnlinks href=#hl-16-211>211</a>
</span><span class=lnt id=hl-16-212><a class=lnlinks href=#hl-16-212>212</a>
</span><span class=lnt id=hl-16-213><a class=lnlinks href=#hl-16-213>213</a>
</span><span class=lnt id=hl-16-214><a class=lnlinks href=#hl-16-214>214</a>
</span><span class=lnt id=hl-16-215><a class=lnlinks href=#hl-16-215>215</a>
</span><span class=lnt id=hl-16-216><a class=lnlinks href=#hl-16-216>216</a>
</span><span class=lnt id=hl-16-217><a class=lnlinks href=#hl-16-217>217</a>
</span><span class=lnt id=hl-16-218><a class=lnlinks href=#hl-16-218>218</a>
</span><span class=lnt id=hl-16-219><a class=lnlinks href=#hl-16-219>219</a>
</span><span class=lnt id=hl-16-220><a class=lnlinks href=#hl-16-220>220</a>
</span><span class=lnt id=hl-16-221><a class=lnlinks href=#hl-16-221>221</a>
</span><span class=lnt id=hl-16-222><a class=lnlinks href=#hl-16-222>222</a>
</span><span class=lnt id=hl-16-223><a class=lnlinks href=#hl-16-223>223</a>
</span><span class=lnt id=hl-16-224><a class=lnlinks href=#hl-16-224>224</a>
</span><span class=lnt id=hl-16-225><a class=lnlinks href=#hl-16-225>225</a>
</span><span class=lnt id=hl-16-226><a class=lnlinks href=#hl-16-226>226</a>
</span><span class=lnt id=hl-16-227><a class=lnlinks href=#hl-16-227>227</a>
</span><span class=lnt id=hl-16-228><a class=lnlinks href=#hl-16-228>228</a>
</span><span class=lnt id=hl-16-229><a class=lnlinks href=#hl-16-229>229</a>
</span><span class=lnt id=hl-16-230><a class=lnlinks href=#hl-16-230>230</a>
</span><span class=lnt id=hl-16-231><a class=lnlinks href=#hl-16-231>231</a>
</span><span class=lnt id=hl-16-232><a class=lnlinks href=#hl-16-232>232</a>
</span><span class=lnt id=hl-16-233><a class=lnlinks href=#hl-16-233>233</a>
</span><span class=lnt id=hl-16-234><a class=lnlinks href=#hl-16-234>234</a>
</span><span class=lnt id=hl-16-235><a class=lnlinks href=#hl-16-235>235</a>
</span><span class=lnt id=hl-16-236><a class=lnlinks href=#hl-16-236>236</a>
</span><span class=lnt id=hl-16-237><a class=lnlinks href=#hl-16-237>237</a>
</span><span class=lnt id=hl-16-238><a class=lnlinks href=#hl-16-238>238</a>
</span><span class=lnt id=hl-16-239><a class=lnlinks href=#hl-16-239>239</a>
</span><span class=lnt id=hl-16-240><a class=lnlinks href=#hl-16-240>240</a>
</span><span class=lnt id=hl-16-241><a class=lnlinks href=#hl-16-241>241</a>
</span><span class=lnt id=hl-16-242><a class=lnlinks href=#hl-16-242>242</a>
</span><span class=lnt id=hl-16-243><a class=lnlinks href=#hl-16-243>243</a>
</span><span class=lnt id=hl-16-244><a class=lnlinks href=#hl-16-244>244</a>
</span><span class=lnt id=hl-16-245><a class=lnlinks href=#hl-16-245>245</a>
</span><span class=lnt id=hl-16-246><a class=lnlinks href=#hl-16-246>246</a>
</span><span class=lnt id=hl-16-247><a class=lnlinks href=#hl-16-247>247</a>
</span><span class=lnt id=hl-16-248><a class=lnlinks href=#hl-16-248>248</a>
</span><span class=lnt id=hl-16-249><a class=lnlinks href=#hl-16-249>249</a>
</span><span class=lnt id=hl-16-250><a class=lnlinks href=#hl-16-250>250</a>
</span><span class=lnt id=hl-16-251><a class=lnlinks href=#hl-16-251>251</a>
</span><span class=lnt id=hl-16-252><a class=lnlinks href=#hl-16-252>252</a>
</span><span class=lnt id=hl-16-253><a class=lnlinks href=#hl-16-253>253</a>
</span><span class=lnt id=hl-16-254><a class=lnlinks href=#hl-16-254>254</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 이벤트 정의
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>BudgetAllocatedEvent</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span><span class=p>,</span> <span class=nx>department</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventId</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>generateId</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventType</span> <span class=o>=</span> <span class=s1>&#39;BudgetAllocated&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>timestamp</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>data</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span><span class=p>,</span> <span class=nx>department</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>generateId</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s1>&#39;evt_&#39;</span> <span class=o>+</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>().</span><span class=nx>toString</span><span class=p>(</span><span class=mi>36</span><span class=p>).</span><span class=nx>substr</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>9</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>ExpenseRecordedEvent</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span><span class=p>,</span> <span class=nx>category</span><span class=p>,</span> <span class=nx>vendor</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventId</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>generateId</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventType</span> <span class=o>=</span> <span class=s1>&#39;ExpenseRecorded&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>timestamp</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>data</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span><span class=p>,</span> <span class=nx>category</span><span class=p>,</span> <span class=nx>vendor</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>generateId</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s1>&#39;evt_&#39;</span> <span class=o>+</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>().</span><span class=nx>toString</span><span class=p>(</span><span class=mi>36</span><span class=p>).</span><span class=nx>substr</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>9</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 이벤트 브로커
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>EventBroker</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>subscribers</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventStore</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>subscribe</span><span class=p>(</span><span class=nx>eventType</span><span class=p>,</span> <span class=nx>handler</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=k>this</span><span class=p>.</span><span class=nx>subscribers</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=nx>eventType</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>subscribers</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>eventType</span><span class=p>,</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>subscribers</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>eventType</span><span class=p>).</span><span class=nx>push</span><span class=p>(</span><span class=nx>handler</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>publish</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 이벤트 저장 (Event Sourcing)
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>eventStore</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>event</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 구독자들에게 이벤트 전달
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>handlers</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>subscribers</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>eventType</span><span class=p>)</span> <span class=o>||</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>handler</span> <span class=k>of</span> <span class=nx>handlers</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>await</span> <span class=nx>handler</span><span class=p>(</span><span class=nx>event</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`Error processing event </span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>eventId</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 에러 처리 로직 (Dead Letter Queue 등)
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleEventProcessingError</span><span class=p>(</span><span class=nx>event</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>handleEventProcessingError</span><span class=p>(</span><span class=nx>event</span><span class=p>,</span> <span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 실패한 이벤트를 별도 큐로 전송
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Moving event </span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>eventId</span><span class=si>}</span><span class=sb> to dead letter queue`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 예산 관리 서비스
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>BudgetManagementService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>eventBroker</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span> <span class=o>=</span> <span class=nx>eventBroker</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>budgets</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span> <span class=c1>// projectId -&gt; budget info
</span></span></span><span class=line><span class=cl><span class=c1></span>        
</span></span><span class=line><span class=cl>        <span class=c1>// 이벤트 구독
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=s1>&#39;BudgetAllocated&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleBudgetAllocated</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=s1>&#39;ExpenseRecorded&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleExpenseRecorded</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>allocateBudget</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span><span class=p>,</span> <span class=nx>department</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 예산 할당 비즈니스 로직
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>budgets</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>totalBudget</span><span class=o>:</span> <span class=nx>amount</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>spentAmount</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>department</span><span class=o>:</span> <span class=nx>department</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>createdAt</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 이벤트 발행
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>event</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>BudgetAllocatedEvent</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span><span class=p>,</span> <span class=nx>department</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span><span class=p>.</span><span class=nx>publish</span><span class=p>(</span><span class=nx>event</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Budget allocated: </span><span class=si>${</span><span class=nx>amount</span><span class=si>}</span><span class=sb> for project </span><span class=si>${</span><span class=nx>projectId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>handleBudgetAllocated</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 예산 할당 이벤트 처리 (이미 allocateBudget에서 처리됨)
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Budget allocation confirmed for project </span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>projectId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>handleExpenseRecorded</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=p>{</span> <span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>budget</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>budgets</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>projectId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>budget</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>budget</span><span class=p>.</span><span class=nx>spentAmount</span> <span class=o>+=</span> <span class=nx>amount</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 예산 초과 체크
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=p>(</span><span class=nx>budget</span><span class=p>.</span><span class=nx>spentAmount</span> <span class=o>&gt;</span> <span class=nx>budget</span><span class=p>.</span><span class=nx>totalBudget</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>publishBudgetExceededAlert</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=nx>budget</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Updated spent amount for project </span><span class=si>${</span><span class=nx>projectId</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>budget</span><span class=p>.</span><span class=nx>spentAmount</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>publishBudgetExceededAlert</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=nx>budget</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>alertEvent</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>eventId</span><span class=o>:</span> <span class=s1>&#39;alert_&#39;</span> <span class=o>+</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>().</span><span class=nx>toString</span><span class=p>(</span><span class=mi>36</span><span class=p>).</span><span class=nx>substr</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>9</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=nx>eventType</span><span class=o>:</span> <span class=s1>&#39;BudgetExceeded&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>timestamp</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>projectId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>totalBudget</span><span class=o>:</span> <span class=nx>budget</span><span class=p>.</span><span class=nx>totalBudget</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>spentAmount</span><span class=o>:</span> <span class=nx>budget</span><span class=p>.</span><span class=nx>spentAmount</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>overage</span><span class=o>:</span> <span class=nx>budget</span><span class=p>.</span><span class=nx>spentAmount</span> <span class=o>-</span> <span class=nx>budget</span><span class=p>.</span><span class=nx>totalBudget</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span><span class=p>.</span><span class=nx>publish</span><span class=p>(</span><span class=nx>alertEvent</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 지출 추적 서비스
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>ExpenseTrackingService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>eventBroker</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span> <span class=o>=</span> <span class=nx>eventBroker</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>expenses</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span> <span class=c1>// projectId -&gt; expenses[]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>recordExpense</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span><span class=p>,</span> <span class=nx>category</span><span class=p>,</span> <span class=nx>vendor</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 지출 기록 비즈니스 로직
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=k>this</span><span class=p>.</span><span class=nx>expenses</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=nx>projectId</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>expenses</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>expense</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>id</span><span class=o>:</span> <span class=s1>&#39;exp_&#39;</span> <span class=o>+</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>().</span><span class=nx>toString</span><span class=p>(</span><span class=mi>36</span><span class=p>).</span><span class=nx>substr</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>9</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=nx>projectId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>amount</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>category</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>vendor</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>recordedAt</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>expenses</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>projectId</span><span class=p>).</span><span class=nx>push</span><span class=p>(</span><span class=nx>expense</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 이벤트 발행
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>event</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ExpenseRecordedEvent</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=nx>amount</span><span class=p>,</span> <span class=nx>category</span><span class=p>,</span> <span class=nx>vendor</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span><span class=p>.</span><span class=nx>publish</span><span class=p>(</span><span class=nx>event</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Expense recorded: </span><span class=si>${</span><span class=nx>amount</span><span class=si>}</span><span class=sb> for project </span><span class=si>${</span><span class=nx>projectId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 분석 서비스
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>AnalyticsService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>eventBroker</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span> <span class=o>=</span> <span class=nx>eventBroker</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>projectMetrics</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 이벤트 구독
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=s1>&#39;BudgetAllocated&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>updateMetrics</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=s1>&#39;ExpenseRecorded&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>updateMetrics</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>eventBroker</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>(</span><span class=s1>&#39;BudgetExceeded&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleBudgetExceeded</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>updateMetrics</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>projectId</span> <span class=o>=</span> <span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>projectId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=k>this</span><span class=p>.</span><span class=nx>projectMetrics</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=nx>projectId</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>projectMetrics</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>projectId</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>totalEvents</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>budgetEvents</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>expenseEvents</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>lastUpdated</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>metrics</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>projectMetrics</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>projectId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>metrics</span><span class=p>.</span><span class=nx>totalEvents</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>eventType</span> <span class=o>===</span> <span class=s1>&#39;BudgetAllocated&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>metrics</span><span class=p>.</span><span class=nx>budgetEvents</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>eventType</span> <span class=o>===</span> <span class=s1>&#39;ExpenseRecorded&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>metrics</span><span class=p>.</span><span class=nx>expenseEvents</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>metrics</span><span class=p>.</span><span class=nx>lastUpdated</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Analytics updated for project </span><span class=si>${</span><span class=nx>projectId</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span> <span class=nx>metrics</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>handleBudgetExceeded</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`ALERT: Budget exceeded for project </span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>projectId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 알림 서비스로 이벤트 전달, 대시보드 업데이트 등
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>getProjectMetrics</span><span class=p>(</span><span class=nx>projectId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>projectMetrics</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>projectId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 시스템 사용 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>async</span> <span class=kd>function</span> <span class=nx>demonstrateNetflixFinanceSystem</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 이벤트 브로커 초기화
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>eventBroker</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>EventBroker</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 서비스들 초기화
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>budgetService</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>BudgetManagementService</span><span class=p>(</span><span class=nx>eventBroker</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>expenseService</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ExpenseTrackingService</span><span class=p>(</span><span class=nx>eventBroker</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>analyticsService</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>AnalyticsService</span><span class=p>(</span><span class=nx>eventBroker</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 시나리오 실행
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;=== Netflix Content Finance System Demo ===\n&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 1. 새로운 콘텐츠 프로젝트 예산 할당
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>await</span> <span class=nx>budgetService</span><span class=p>.</span><span class=nx>allocateBudget</span><span class=p>(</span><span class=s1>&#39;project_001&#39;</span><span class=p>,</span> <span class=mi>1000000</span><span class=p>,</span> <span class=s1>&#39;Original Content&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 잠시 대기 (이벤트 처리 시간)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>await</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=nx>resolve</span> <span class=p>=&gt;</span> <span class=nx>setTimeout</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=mi>100</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 2. 제작 비용 기록
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>await</span> <span class=nx>expenseService</span><span class=p>.</span><span class=nx>recordExpense</span><span class=p>(</span><span class=s1>&#39;project_001&#39;</span><span class=p>,</span> <span class=mi>250000</span><span class=p>,</span> <span class=s1>&#39;Production&#39;</span><span class=p>,</span> <span class=s1>&#39;Studio A&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=nx>expenseService</span><span class=p>.</span><span class=nx>recordExpense</span><span class=p>(</span><span class=s1>&#39;project_001&#39;</span><span class=p>,</span> <span class=mi>150000</span><span class=p>,</span> <span class=s1>&#39;Post-Production&#39;</span><span class=p>,</span> <span class=s1>&#39;Edit House B&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=nx>expenseService</span><span class=p>.</span><span class=nx>recordExpense</span><span class=p>(</span><span class=s1>&#39;project_001&#39;</span><span class=p>,</span> <span class=mi>300000</span><span class=p>,</span> <span class=s1>&#39;Marketing&#39;</span><span class=p>,</span> <span class=s1>&#39;Agency C&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=nx>resolve</span> <span class=p>=&gt;</span> <span class=nx>setTimeout</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=mi>100</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 3. 예산 초과 상황 시뮬레이션
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>await</span> <span class=nx>expenseService</span><span class=p>.</span><span class=nx>recordExpense</span><span class=p>(</span><span class=s1>&#39;project_001&#39;</span><span class=p>,</span> <span class=mi>400000</span><span class=p>,</span> <span class=s1>&#39;Additional Scenes&#39;</span><span class=p>,</span> <span class=s1>&#39;Studio A&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=nx>resolve</span> <span class=p>=&gt;</span> <span class=nx>setTimeout</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=mi>100</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 4. 분석 결과 확인
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\n=== Final Analytics ===&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>analyticsService</span><span class=p>.</span><span class=nx>getProjectMetrics</span><span class=p>(</span><span class=s1>&#39;project_001&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 5. 이벤트 저장소 확인 (Event Sourcing)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\n=== Event Store (First 5 events) ===&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>eventBroker</span><span class=p>.</span><span class=nx>eventStore</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>5</span><span class=p>).</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>event</span><span class=p>,</span> <span class=nx>index</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>index</span> <span class=o>+</span> <span class=mi>1</span><span class=si>}</span><span class=sb>. </span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>eventType</span><span class=si>}</span><span class=sb> - </span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>timestamp</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 데모 실행
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>demonstrateNetflixFinanceSystem</span><span class=p>().</span><span class=k>catch</span><span class=p>(</span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=21-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>21. 실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#21-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>구분</th><th>고려사항</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>설계</td><td>이벤트 스키마 설계</td><td>명확하고 진화 가능한 이벤트 구조</td><td>JSON Schema, Avro 스키마 사용</td></tr><tr><td></td><td>이벤트 크기 관리</td><td>네트워크 효율성과 처리 성능 고려</td><td>페이로드 최소화, 참조 기반 설계</td></tr><tr><td></td><td>멱등성 보장</td><td>중복 처리에 안전한 설계</td><td>이벤트 ID 기반 중복 검사</td></tr><tr><td>구현</td><td>에러 처리 전략</td><td>실패한 이벤트 처리 방안</td><td>Dead Letter Queue, 재시도 정책</td></tr><tr><td></td><td>모니터링 구축</td><td>이벤트 플로우 가시성 확보</td><td>분산 추적, 메트릭 수집</td></tr><tr><td></td><td>백프레셔 처리</td><td>소비자 과부하 방지</td><td>적응적 처리, 큐 깊이 모니터링</td></tr><tr><td>운영</td><td>스키마 진화 관리</td><td>호환성 유지하며 스키마 변경</td><td>점진적 배포, 버전 관리</td></tr><tr><td></td><td>보안 정책 수립</td><td>이벤트 데이터 보호</td><td>암호화, 접근 제어, 감사 로그</td></tr><tr><td></td><td>성능 튜닝</td><td>처리량과 지연시간 최적화</td><td>파티셔닝, 배치 처리, 압축</td></tr></tbody></table><hr><h3 id=22-최적화하기-위한-고려사항-및-주의할-점>22. 최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#22-최적화하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>구분</th><th>최적화 요소</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>성능</td><td>파티셔닝 전략</td><td>이벤트 분산 및 병렬 처리</td><td>비즈니스 키 기반 파티셔닝</td></tr><tr><td></td><td>배치 처리</td><td>처리량 향상을 위한 배치 크기 조정</td><td>지연시간과 처리량 균형</td></tr><tr><td></td><td>압축 적용</td><td>네트워크 대역폭 절약</td><td>Snappy, LZ4 압축 알고리즘</td></tr><tr><td>확장성</td><td>오토 스케일링</td><td>부하에 따른 자동 확장</td><td>큐 깊이, CPU 메트릭 기반</td></tr><tr><td></td><td>로드 밸런싱</td><td>고르게 분산된 이벤트 처리</td><td>라운드 로빈, 가중치 기반</td></tr><tr><td></td><td>캐싱 전략</td><td>반복 처리 최적화</td><td>Redis, Hazelcast 활용</td></tr><tr><td>안정성</td><td>복제 설정</td><td>데이터 손실 방지</td><td>최소 3 개 복제본 유지</td></tr><tr><td></td><td>장애 복구</td><td>빠른 복구를 위한 준비</td><td>백업, 재해 복구 계획</td></tr><tr><td></td><td>모니터링 강화</td><td>장애 예방을 위한 감시</td><td>실시간 알림, 대시보드</td></tr></tbody></table><hr><h3 id=23-주제와-관련하여-주목할-내용>23. 주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#23-주제와-관련하여-주목할-내용>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>신기술</td><td>Serverless EDA</td><td>AWS Lambda, Azure Functions</td><td>서버리스 기반 이벤트 처리</td></tr><tr><td></td><td>Edge Computing</td><td>IoT, 5G 환경</td><td>엣지에서의 실시간 이벤트 처리</td></tr><tr><td></td><td>AI/ML 통합</td><td>실시간 추론, 스트림 ML</td><td>이벤트 스트림에서 ML 모델 적용</td></tr><tr><td>플랫폼</td><td>Cloud Native</td><td>Kubernetes, Service Mesh</td><td>클라우드 네이티브 EDA 구현</td></tr><tr><td></td><td>Multi-Cloud</td><td>하이브리드 클라우드</td><td>다중 클라우드 환경에서 EDA</td></tr><tr><td>패턴</td><td>Event Sourcing</td><td>이벤트 기반 데이터 저장</td><td>상태 재구성, 감사 로그</td></tr><tr><td></td><td>CQRS</td><td>명령/조회 분리</td><td>읽기/쓰기 최적화</td></tr><tr><td></td><td>Saga Pattern</td><td>분산 트랜잭션</td><td>마이크로서비스 간 데이터 일관성</td></tr><tr><td>도구</td><td>Apache Kafka</td><td>이벤트 스트리밍 플랫폼</td><td>대용량 실시간 이벤트 처리</td></tr><tr><td></td><td>Apache Pulsar</td><td>차세대 메시징 시스템</td><td>다중 테넌시, 지리적 복제</td></tr><tr><td></td><td>NATS</td><td>고성능 메시징</td><td>마이크로서비스 통신</td></tr></tbody></table><hr><h3 id=24-주제와-관련하여-반드시-학습해야할-내용>24. 주제와 관련하여 반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#24-주제와-관련하여-반드시-학습해야할-내용>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>기초 개념</td><td>분산 시스템</td><td>CAP 정리, ACID vs BASE</td><td>분산 환경의 기본 원리</td></tr><tr><td></td><td>메시징 패턴</td><td>Pub/Sub, Point-to-Point</td><td>메시지 전달 방식 이해</td></tr><tr><td></td><td>동시성 제어</td><td>락, 세마포어, 원자성</td><td>동시 처리 메커니즘</td></tr><tr><td>아키텍처</td><td>마이크로서비스</td><td>서비스 분해, API 설계</td><td>EDA 와 마이크로서비스 연계</td></tr><tr><td></td><td>Domain-Driven Design</td><td>바운디드 컨텍스트, 집계</td><td>도메인 중심 설계 방법론</td></tr><tr><td></td><td>데이터 관리</td><td>데이터 일관성, 분산 DB</td><td>분산 데이터 관리 전략</td></tr><tr><td>기술 스택</td><td>Apache Kafka</td><td>토픽, 파티션, 컨슈머 그룹</td><td>핵심 이벤트 스트리밍 플랫폼</td></tr><tr><td></td><td>Spring Cloud Stream</td><td>바인더, 프로세서</td><td>Java 기반 EDA 프레임워크</td></tr><tr><td></td><td>Docker & Kubernetes</td><td>컨테이너, 오케스트레이션</td><td>현대적 배포 환경</td></tr><tr><td>운영</td><td>모니터링</td><td>메트릭, 로깅, 추적</td><td>시스템 관찰 가능성</td></tr><tr><td></td><td>보안</td><td>암호화, 인증, 권한 부여</td><td>이벤트 보안 관리</td></tr><tr><td></td><td>DevOps</td><td>CI/CD, IaC</td><td>지속적 통합/배포</td></tr></tbody></table><hr><h3 id=용어-정리-2>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-2>#</a></h3><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>핵심 개념</td><td>Event (이벤트)</td><td>시스템 내에서 발생하는 중요한 상태 변화나 사건</td></tr><tr><td></td><td>Producer (프로듀서)</td><td>이벤트를 생성하고 발행하는 구성 요소</td></tr><tr><td></td><td>Consumer (컨슈머)</td><td>이벤트를 수신하고 처리하는 구성 요소</td></tr><tr><td></td><td>Broker (브로커)</td><td>이벤트를 중계하고 라우팅하는 미들웨어</td></tr><tr><td>아키텍처</td><td>Mediator Topology</td><td>중앙 중재자가 워크플로우를 조정하는 토폴로지</td></tr><tr><td></td><td>Broker Topology</td><td>중앙 중재자 없이 체인 형태로 연결된 토폴로지</td></tr><tr><td></td><td>Event Sourcing</td><td>상태 변경을 이벤트 시퀀스로 저장하는 패턴</td></tr><tr><td>기술 용어</td><td>Idempotency (멱등성)</td><td>동일한 작업을 여러 번 수행해도 결과가 같은 성질</td></tr><tr><td></td><td>Backpressure (백프레셔)</td><td>시스템 과부하 시 처리 속도를 조절하는 메커니즘</td></tr><tr><td></td><td>Dead Letter Queue</td><td>처리 실패한 메시지를 저장하는 특별한 큐</td></tr><tr><td></td><td>Circuit Breaker</td><td>장애 전파를 막기 위한 회로 차단기 패턴</td></tr><tr><td>품질 속성</td><td>Eventual Consistency</td><td>분산 시스템에서 모든 노드가 최종적으로 일관된 상태</td></tr><tr><td></td><td>Exactly-once Delivery</td><td>메시지가 정확히 한 번만 전달되는 보장</td></tr><tr><td></td><td>Schema Evolution</td><td>기존 호환성을 유지하며 스키마를 변경하는 과정</td></tr></tbody></table><hr><h3 id=참고-및-출처-2>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-2>#</a></h3><ul><li><a href=https://en.wikipedia.org/wiki/Event-driven_architecture>Event-driven architecture - Wikipedia</a></li><li><a href=https://aws.amazon.com/event-driven-architecture/>AWS Event-Driven Architecture</a></li><li><a href=https://www.geeksforgeeks.org/event-driven-architecture-system-design/>Event-Driven Architecture System Design - GeeksforGeeks</a></li><li><a href=https://risingwave.com/blog/the-comprehensive-guide-to-event-driven-architecture/>The Comprehensive Guide to Event-Driven Architecture - RisingWave</a></li><li><a href=https://www.confluent.io/learn/event-driven-architecture/>Event-Driven Architecture: A Complete Introduction - Confluent</a></li><li><a href=https://www.3pillarglobal.com/insights/blog/event-driven-architecture-topologies-broker-and-mediator/>Event-Driven Architecture Topologies - 3Pillar</a></li><li><a href=https://www.oreilly.com/library/view/software-architecture-patterns/9781491971437/ch02.html>Software Architecture Patterns - O&rsquo;Reilly</a></li><li><a href=https://learn.microsoft.com/en-us/azure/architecture/guide/architecture-styles/event-driven>Event-driven architecture style - Azure Architecture Center</a></li><li><a href=https://solace.com/event-driven-architecture-patterns/>The Ultimate Guide to Event-Driven Architecture Patterns - Solace</a></li><li><a href=https://microservices.io/patterns/data/saga.html>Microservices Pattern: Saga</a></li><li><a href=https://microservices.io/patterns/data/event-sourcing.html>Microservices Pattern: Event sourcing</a></li><li><a href=https://estuary.dev/blog/event-driven-architecture-examples/>10 Event-Driven Architecture Examples - Estuary</a></li><li><a href=https://risingwave.com/blog/real-world-applications-of-event-driven-architecture-10-examples/>Real-World Applications of Event-Driven Architecture - RisingWave</a></li></ul><hr><p>이벤트 기반 아키텍처 (Event-Driven Architecture, EDA) 는 현대 API 설계에서 중요한 통합 패턴으로서, 시스템 간의 효율적인 통신과 확장성을 크게 향상시킬 수 있는 접근 방식이다.</p><p>이벤트 기반 아키텍처는 현대적인 API 통합 패턴으로, 특히 복잡하고 확장 가능한 분산 시스템에서 큰 가치를 제공한다. 이 접근 방식은 시스템 구성 요소 간의 느슨한 결합을 촉진하고, 실시간 데이터 처리와 확장성을 향상시키며, 변화하는 비즈니스 요구사항에 더 유연하게 대응할 수 있게 한다.</p><p>성공적인 이벤트 기반 아키텍처 구현을 위해서는 적절한 이벤트 설계, 명확한 문서화, 효과적인 오류 처리 및 복원력 전략, 그리고 일관된 이벤트 스키마 관리가 필수적이다. 이러한 원칙과 패턴을 적용함으로써, 개발자는 확장 가능하고 유연하며 반응성이 뛰어난 시스템을 구축할 수 있다.</p><h4 id=이벤트-기반-아키텍처의-핵심-개념>이벤트 기반 아키텍처의 핵심 개념<a hidden class=anchor aria-hidden=true href=#이벤트-기반-아키텍처의-핵심-개념>#</a></h4><p>이벤트 기반 아키텍처는 시스템 내에서 발생하는 상태 변화나 중요한 사건을 &rsquo; 이벤트 &rsquo; 로 정의하고, 이러한 이벤트의 생성, 전송, 처리를 중심으로 시스템을 구성하는 방식이다.</p><p>이벤트는 " 무엇이 일어났는가 " 에 대한 통지이며, 이벤트를 생성하는 생산자 (Producer) 와 이벤트를 수신하는 소비자 (Consumer) 사이의 느슨한 결합 (Loose Coupling) 을 통해 시스템의 유연성과 확장성을 제공한다.</p><h4 id=이벤트-기반-아키텍처의-주요-구성-요소>이벤트 기반 아키텍처의 주요 구성 요소<a hidden class=anchor aria-hidden=true href=#이벤트-기반-아키텍처의-주요-구성-요소>#</a></h4><ol><li><p>이벤트 생산자 (Event Producer)</p><ul><li>시스템 내에서 상태 변화를 감지하고 이벤트를 생성하는 역할</li><li>예: 사용자 등록 서비스, 주문 처리 시스템, IoT 센서 등</li></ul></li><li><p>이벤트 채널 (Event Channel)</p><ul><li>생산자로부터 소비자로 이벤트를 전달하는 통로</li><li>구현 형태: 메시지 큐, 이벤트 버스, 스트림 처리 플랫폼</li></ul></li><li><p>이벤트 소비자 (Event Consumer)</p><ul><li>이벤트를 수신하고 적절한 처리를 수행하는 서비스</li><li>이벤트에 반응하여 비즈니스 로직을 실행</li></ul></li><li><p>이벤트 스토어 (Event Store)</p><ul><li>이벤트의 지속적인 저장소로서, 이벤트 소싱 (Event Sourcing) 패턴에서 중요한 역할</li><li>시스템의 상태 변화 이력을 이벤트 시퀀스로 보존</li></ul></li></ol><h4 id=api-통합에서의-이벤트-기반-아키텍처-구현-방식>API 통합에서의 이벤트 기반 아키텍처 구현 방식<a hidden class=anchor aria-hidden=true href=#api-통합에서의-이벤트-기반-아키텍처-구현-방식>#</a></h4><h5 id=웹훅-webhook-기반-이벤트-전달>웹훅 (Webhook) 기반 이벤트 전달<a hidden class=anchor aria-hidden=true href=#웹훅-webhook-기반-이벤트-전달>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1> 1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2> 2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3> 3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4> 4</a>
</span><span class=lnt id=hl-17-5><a class=lnlinks href=#hl-17-5> 5</a>
</span><span class=lnt id=hl-17-6><a class=lnlinks href=#hl-17-6> 6</a>
</span><span class=lnt id=hl-17-7><a class=lnlinks href=#hl-17-7> 7</a>
</span><span class=lnt id=hl-17-8><a class=lnlinks href=#hl-17-8> 8</a>
</span><span class=lnt id=hl-17-9><a class=lnlinks href=#hl-17-9> 9</a>
</span><span class=lnt id=hl-17-10><a class=lnlinks href=#hl-17-10>10</a>
</span><span class=lnt id=hl-17-11><a class=lnlinks href=#hl-17-11>11</a>
</span><span class=lnt id=hl-17-12><a class=lnlinks href=#hl-17-12>12</a>
</span><span class=lnt id=hl-17-13><a class=lnlinks href=#hl-17-13>13</a>
</span><span class=lnt id=hl-17-14><a class=lnlinks href=#hl-17-14>14</a>
</span><span class=lnt id=hl-17-15><a class=lnlinks href=#hl-17-15>15</a>
</span><span class=lnt id=hl-17-16><a class=lnlinks href=#hl-17-16>16</a>
</span><span class=lnt id=hl-17-17><a class=lnlinks href=#hl-17-17>17</a>
</span><span class=lnt id=hl-17-18><a class=lnlinks href=#hl-17-18>18</a>
</span><span class=lnt id=hl-17-19><a class=lnlinks href=#hl-17-19>19</a>
</span><span class=lnt id=hl-17-20><a class=lnlinks href=#hl-17-20>20</a>
</span><span class=lnt id=hl-17-21><a class=lnlinks href=#hl-17-21>21</a>
</span><span class=lnt id=hl-17-22><a class=lnlinks href=#hl-17-22>22</a>
</span><span class=lnt id=hl-17-23><a class=lnlinks href=#hl-17-23>23</a>
</span><span class=lnt id=hl-17-24><a class=lnlinks href=#hl-17-24>24</a>
</span><span class=lnt id=hl-17-25><a class=lnlinks href=#hl-17-25>25</a>
</span><span class=lnt id=hl-17-26><a class=lnlinks href=#hl-17-26>26</a>
</span><span class=lnt id=hl-17-27><a class=lnlinks href=#hl-17-27>27</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 웹훅 이벤트 수신 엔드포인트 예시 (Node.js/Express)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/api/webhooks/orders&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>event</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>body</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 이벤트 유효성 검증
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>event</span><span class=p>.</span><span class=nx>type</span> <span class=o>||</span> <span class=o>!</span><span class=nx>event</span><span class=p>.</span><span class=nx>payload</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>400</span><span class=p>).</span><span class=nx>send</span><span class=p>(</span><span class=s1>&#39;Invalid event format&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 이벤트 타입에 따른 처리
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>switch</span> <span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s1>&#39;order.created&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>      <span class=nx>processNewOrder</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>payload</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s1>&#39;order.updated&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>      <span class=nx>updateOrderStatus</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>payload</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s1>&#39;order.cancelled&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>      <span class=nx>handleOrderCancellation</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>payload</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span><span class=o>:</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Unhandled event type: </span><span class=si>${</span><span class=nx>event</span><span class=p>.</span><span class=nx>type</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 202 Accepted 응답 (비동기 처리를 나타냄)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>202</span><span class=p>).</span><span class=nx>end</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=서버---전송-이벤트-server-sent-events-sse>서버 - 전송 이벤트 (Server-Sent Events, SSE)<a hidden class=anchor aria-hidden=true href=#서버---전송-이벤트-server-sent-events-sse>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1> 1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2> 2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3> 3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4> 4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5> 5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6> 6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7> 7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8> 8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9> 9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10>10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11>11</a>
</span><span class=lnt id=hl-18-12><a class=lnlinks href=#hl-18-12>12</a>
</span><span class=lnt id=hl-18-13><a class=lnlinks href=#hl-18-13>13</a>
</span><span class=lnt id=hl-18-14><a class=lnlinks href=#hl-18-14>14</a>
</span><span class=lnt id=hl-18-15><a class=lnlinks href=#hl-18-15>15</a>
</span><span class=lnt id=hl-18-16><a class=lnlinks href=#hl-18-16>16</a>
</span><span class=lnt id=hl-18-17><a class=lnlinks href=#hl-18-17>17</a>
</span><span class=lnt id=hl-18-18><a class=lnlinks href=#hl-18-18>18</a>
</span><span class=lnt id=hl-18-19><a class=lnlinks href=#hl-18-19>19</a>
</span><span class=lnt id=hl-18-20><a class=lnlinks href=#hl-18-20>20</a>
</span><span class=lnt id=hl-18-21><a class=lnlinks href=#hl-18-21>21</a>
</span><span class=lnt id=hl-18-22><a class=lnlinks href=#hl-18-22>22</a>
</span><span class=lnt id=hl-18-23><a class=lnlinks href=#hl-18-23>23</a>
</span><span class=lnt id=hl-18-24><a class=lnlinks href=#hl-18-24>24</a>
</span><span class=lnt id=hl-18-25><a class=lnlinks href=#hl-18-25>25</a>
</span><span class=lnt id=hl-18-26><a class=lnlinks href=#hl-18-26>26</a>
</span><span class=lnt id=hl-18-27><a class=lnlinks href=#hl-18-27>27</a>
</span><span class=lnt id=hl-18-28><a class=lnlinks href=#hl-18-28>28</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 서버 측 코드 (Node.js/Express)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/api/events/stream&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// SSE 설정
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>res</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Content-Type&#39;</span><span class=p>,</span> <span class=s1>&#39;text/event-stream&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Cache-Control&#39;</span><span class=p>,</span> <span class=s1>&#39;no-cache&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s1>&#39;Connection&#39;</span><span class=p>,</span> <span class=s1>&#39;keep-alive&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 클라이언트에 이벤트 전송 함수
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>sendEvent</span> <span class=o>=</span> <span class=p>(</span><span class=nx>eventType</span><span class=p>,</span> <span class=nx>data</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=sb>`event: </span><span class=si>${</span><span class=nx>eventType</span><span class=si>}</span><span class=sb>\n`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=sb>`data: </span><span class=si>${</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span><span class=si>}</span><span class=sb>\n\n`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 주기적인 이벤트 전송 예시
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>intervalId</span> <span class=o>=</span> <span class=nx>setInterval</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>sendEvent</span><span class=p>(</span><span class=s1>&#39;heartbeat&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>timestamp</span><span class=o>:</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=mi>30000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 새 주문 발생 시 이벤트 전송 (가상의 이벤트 리스너)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>orderEmitter</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;new-order&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>order</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>sendEvent</span><span class=p>(</span><span class=s1>&#39;order.created&#39;</span><span class=p>,</span> <span class=nx>order</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 연결 종료 시 정리
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>req</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;close&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>clearInterval</span><span class=p>(</span><span class=nx>intervalId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=메시지-브로커를-활용한-이벤트-기반-통합>메시지 브로커를 활용한 이벤트 기반 통합<a hidden class=anchor aria-hidden=true href=#메시지-브로커를-활용한-이벤트-기반-통합>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1> 1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2> 2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3> 3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4> 4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5> 5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6> 6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7> 7</a>
</span><span class=lnt id=hl-19-8><a class=lnlinks href=#hl-19-8> 8</a>
</span><span class=lnt id=hl-19-9><a class=lnlinks href=#hl-19-9> 9</a>
</span><span class=lnt id=hl-19-10><a class=lnlinks href=#hl-19-10>10</a>
</span><span class=lnt id=hl-19-11><a class=lnlinks href=#hl-19-11>11</a>
</span><span class=lnt id=hl-19-12><a class=lnlinks href=#hl-19-12>12</a>
</span><span class=lnt id=hl-19-13><a class=lnlinks href=#hl-19-13>13</a>
</span><span class=lnt id=hl-19-14><a class=lnlinks href=#hl-19-14>14</a>
</span><span class=lnt id=hl-19-15><a class=lnlinks href=#hl-19-15>15</a>
</span><span class=lnt id=hl-19-16><a class=lnlinks href=#hl-19-16>16</a>
</span><span class=lnt id=hl-19-17><a class=lnlinks href=#hl-19-17>17</a>
</span><span class=lnt id=hl-19-18><a class=lnlinks href=#hl-19-18>18</a>
</span><span class=lnt id=hl-19-19><a class=lnlinks href=#hl-19-19>19</a>
</span><span class=lnt id=hl-19-20><a class=lnlinks href=#hl-19-20>20</a>
</span><span class=lnt id=hl-19-21><a class=lnlinks href=#hl-19-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 이벤트 생산자 예시 (Python with Kafka)</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>kafka</span> <span class=kn>import</span> <span class=n>KafkaProducer</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>producer</span> <span class=o>=</span> <span class=n>KafkaProducer</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>bootstrap_servers</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;kafka:9092&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>value_serializer</span><span class=o>=</span><span class=k>lambda</span> <span class=n>v</span><span class=p>:</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>v</span><span class=p>)</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>publish_order_event</span><span class=p>(</span><span class=n>order_id</span><span class=p>,</span> <span class=n>event_type</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>event</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;event_id&#39;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;event_type&#39;</span><span class=p>:</span> <span class=n>event_type</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>utcnow</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;order_id&#39;</span><span class=p>:</span> <span class=n>order_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;data&#39;</span><span class=p>:</span> <span class=n>data</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 주문 이벤트 토픽으로 메시지 전송</span>
</span></span><span class=line><span class=cl>    <span class=n>producer</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=s1>&#39;order-events&#39;</span><span class=p>,</span> <span class=n>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>producer</span><span class=o>.</span><span class=n>flush</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1> 1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2> 2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3> 3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4> 4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5> 5</a>
</span><span class=lnt id=hl-20-6><a class=lnlinks href=#hl-20-6> 6</a>
</span><span class=lnt id=hl-20-7><a class=lnlinks href=#hl-20-7> 7</a>
</span><span class=lnt id=hl-20-8><a class=lnlinks href=#hl-20-8> 8</a>
</span><span class=lnt id=hl-20-9><a class=lnlinks href=#hl-20-9> 9</a>
</span><span class=lnt id=hl-20-10><a class=lnlinks href=#hl-20-10>10</a>
</span><span class=lnt id=hl-20-11><a class=lnlinks href=#hl-20-11>11</a>
</span><span class=lnt id=hl-20-12><a class=lnlinks href=#hl-20-12>12</a>
</span><span class=lnt id=hl-20-13><a class=lnlinks href=#hl-20-13>13</a>
</span><span class=lnt id=hl-20-14><a class=lnlinks href=#hl-20-14>14</a>
</span><span class=lnt id=hl-20-15><a class=lnlinks href=#hl-20-15>15</a>
</span><span class=lnt id=hl-20-16><a class=lnlinks href=#hl-20-16>16</a>
</span><span class=lnt id=hl-20-17><a class=lnlinks href=#hl-20-17>17</a>
</span><span class=lnt id=hl-20-18><a class=lnlinks href=#hl-20-18>18</a>
</span><span class=lnt id=hl-20-19><a class=lnlinks href=#hl-20-19>19</a>
</span><span class=lnt id=hl-20-20><a class=lnlinks href=#hl-20-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 이벤트 소비자 예시 (Python with Kafka)</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>kafka</span> <span class=kn>import</span> <span class=n>KafkaConsumer</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>consumer</span> <span class=o>=</span> <span class=n>KafkaConsumer</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;order-events&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>bootstrap_servers</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;kafka:9092&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>value_deserializer</span><span class=o>=</span><span class=k>lambda</span> <span class=n>m</span><span class=p>:</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>m</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)),</span>
</span></span><span class=line><span class=cl>    <span class=n>group_id</span><span class=o>=</span><span class=s1>&#39;order-processing-service&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>auto_offset_reset</span><span class=o>=</span><span class=s1>&#39;earliest&#39;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>message</span> <span class=ow>in</span> <span class=n>consumer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>event</span> <span class=o>=</span> <span class=n>message</span><span class=o>.</span><span class=n>value</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 이벤트 타입에 따른 처리</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>event</span><span class=p>[</span><span class=s1>&#39;event_type&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;order.created&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>process_new_order</span><span class=p>(</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>event</span><span class=p>[</span><span class=s1>&#39;event_type&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;order.payment_confirmed&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>initiate_shipment</span><span class=p>(</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>])</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=이벤트-기반-api-의-설계-원칙>이벤트 기반 API 의 설계 원칙<a hidden class=anchor aria-hidden=true href=#이벤트-기반-api-의-설계-원칙>#</a></h4><h5 id=이벤트-스키마-정의와-버전-관리>이벤트 스키마 정의와 버전 관리<a hidden class=anchor aria-hidden=true href=#이벤트-스키마-정의와-버전-관리>#</a></h5><p>이벤트의 구조와 의미를 명확히 정의하고 버전 관리하여 생산자와 소비자 간의 호환성을 유지한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1> 1</a>
</span><span class=lnt id=hl-21-2><a class=lnlinks href=#hl-21-2> 2</a>
</span><span class=lnt id=hl-21-3><a class=lnlinks href=#hl-21-3> 3</a>
</span><span class=lnt id=hl-21-4><a class=lnlinks href=#hl-21-4> 4</a>
</span><span class=lnt id=hl-21-5><a class=lnlinks href=#hl-21-5> 5</a>
</span><span class=lnt id=hl-21-6><a class=lnlinks href=#hl-21-6> 6</a>
</span><span class=lnt id=hl-21-7><a class=lnlinks href=#hl-21-7> 7</a>
</span><span class=lnt id=hl-21-8><a class=lnlinks href=#hl-21-8> 8</a>
</span><span class=lnt id=hl-21-9><a class=lnlinks href=#hl-21-9> 9</a>
</span><span class=lnt id=hl-21-10><a class=lnlinks href=#hl-21-10>10</a>
</span><span class=lnt id=hl-21-11><a class=lnlinks href=#hl-21-11>11</a>
</span><span class=lnt id=hl-21-12><a class=lnlinks href=#hl-21-12>12</a>
</span><span class=lnt id=hl-21-13><a class=lnlinks href=#hl-21-13>13</a>
</span><span class=lnt id=hl-21-14><a class=lnlinks href=#hl-21-14>14</a>
</span><span class=lnt id=hl-21-15><a class=lnlinks href=#hl-21-15>15</a>
</span><span class=lnt id=hl-21-16><a class=lnlinks href=#hl-21-16>16</a>
</span><span class=lnt id=hl-21-17><a class=lnlinks href=#hl-21-17>17</a>
</span><span class=lnt id=hl-21-18><a class=lnlinks href=#hl-21-18>18</a>
</span><span class=lnt id=hl-21-19><a class=lnlinks href=#hl-21-19>19</a>
</span><span class=lnt id=hl-21-20><a class=lnlinks href=#hl-21-20>20</a>
</span><span class=lnt id=hl-21-21><a class=lnlinks href=#hl-21-21>21</a>
</span><span class=lnt id=hl-21-22><a class=lnlinks href=#hl-21-22>22</a>
</span><span class=lnt id=hl-21-23><a class=lnlinks href=#hl-21-23>23</a>
</span><span class=lnt id=hl-21-24><a class=lnlinks href=#hl-21-24>24</a>
</span><span class=lnt id=hl-21-25><a class=lnlinks href=#hl-21-25>25</a>
</span><span class=lnt id=hl-21-26><a class=lnlinks href=#hl-21-26>26</a>
</span><span class=lnt id=hl-21-27><a class=lnlinks href=#hl-21-27>27</a>
</span><span class=lnt id=hl-21-28><a class=lnlinks href=#hl-21-28>28</a>
</span><span class=lnt id=hl-21-29><a class=lnlinks href=#hl-21-29>29</a>
</span><span class=lnt id=hl-21-30><a class=lnlinks href=#hl-21-30>30</a>
</span><span class=lnt id=hl-21-31><a class=lnlinks href=#hl-21-31>31</a>
</span><span class=lnt id=hl-21-32><a class=lnlinks href=#hl-21-32>32</a>
</span><span class=lnt id=hl-21-33><a class=lnlinks href=#hl-21-33>33</a>
</span><span class=lnt id=hl-21-34><a class=lnlinks href=#hl-21-34>34</a>
</span><span class=lnt id=hl-21-35><a class=lnlinks href=#hl-21-35>35</a>
</span><span class=lnt id=hl-21-36><a class=lnlinks href=#hl-21-36>36</a>
</span><span class=lnt id=hl-21-37><a class=lnlinks href=#hl-21-37>37</a>
</span><span class=lnt id=hl-21-38><a class=lnlinks href=#hl-21-38>38</a>
</span><span class=lnt id=hl-21-39><a class=lnlinks href=#hl-21-39>39</a>
</span><span class=lnt id=hl-21-40><a class=lnlinks href=#hl-21-40>40</a>
</span><span class=lnt id=hl-21-41><a class=lnlinks href=#hl-21-41>41</a>
</span><span class=lnt id=hl-21-42><a class=lnlinks href=#hl-21-42>42</a>
</span><span class=lnt id=hl-21-43><a class=lnlinks href=#hl-21-43>43</a>
</span><span class=lnt id=hl-21-44><a class=lnlinks href=#hl-21-44>44</a>
</span><span class=lnt id=hl-21-45><a class=lnlinks href=#hl-21-45>45</a>
</span><span class=lnt id=hl-21-46><a class=lnlinks href=#hl-21-46>46</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=c1>// 이벤트 스키마 예시 (JSON Schema)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;$schema&#34;</span><span class=p>:</span> <span class=s2>&#34;http://json-schema.org/draft-07/schema#&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;title&#34;</span><span class=p>:</span> <span class=s2>&#34;OrderCreatedEvent&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;1.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;object&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;required&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;event_id&#34;</span><span class=p>,</span> <span class=s2>&#34;event_type&#34;</span><span class=p>,</span> <span class=s2>&#34;timestamp&#34;</span><span class=p>,</span> <span class=s2>&#34;data&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;properties&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;event_id&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;string&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;format&#34;</span><span class=p>:</span> <span class=s2>&#34;uuid&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;이벤트의 고유 식별자&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;event_type&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;string&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;enum&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;order.created&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;이벤트 유형&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;timestamp&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;string&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;format&#34;</span><span class=p>:</span> <span class=s2>&#34;date-time&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;이벤트 발생 시간 (ISO 8601 형식)&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;object&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;required&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;order_id&#34;</span><span class=p>,</span> <span class=s2>&#34;customer_id&#34;</span><span class=p>,</span> <span class=s2>&#34;items&#34;</span><span class=p>,</span> <span class=s2>&#34;total_amount&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;properties&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;order_id&#34;</span><span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;string&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;customer_id&#34;</span><span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;string&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;items&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;array&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nt>&#34;items&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;object&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;required&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;product_id&#34;</span><span class=p>,</span> <span class=s2>&#34;quantity&#34;</span><span class=p>,</span> <span class=s2>&#34;price&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;properties&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=nt>&#34;product_id&#34;</span><span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;string&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>              <span class=nt>&#34;quantity&#34;</span><span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;integer&#34;</span><span class=p>,</span> <span class=nt>&#34;minimum&#34;</span><span class=p>:</span> <span class=mi>1</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>              <span class=nt>&#34;price&#34;</span><span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;number&#34;</span><span class=p>,</span> <span class=nt>&#34;minimum&#34;</span><span class=p>:</span> <span class=mi>0</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;total_amount&#34;</span><span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;number&#34;</span><span class=p>,</span> <span class=nt>&#34;minimum&#34;</span><span class=p>:</span> <span class=mi>0</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=이벤트-기반-api-문서화>이벤트 기반 API 문서화<a hidden class=anchor aria-hidden=true href=#이벤트-기반-api-문서화>#</a></h5><p>이벤트 기반 API 의 효과적인 문서화는 이벤트 타입, 페이로드 구조, 발생 조건 등을 명확하게 설명해야 한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1> 1</a>
</span><span class=lnt id=hl-22-2><a class=lnlinks href=#hl-22-2> 2</a>
</span><span class=lnt id=hl-22-3><a class=lnlinks href=#hl-22-3> 3</a>
</span><span class=lnt id=hl-22-4><a class=lnlinks href=#hl-22-4> 4</a>
</span><span class=lnt id=hl-22-5><a class=lnlinks href=#hl-22-5> 5</a>
</span><span class=lnt id=hl-22-6><a class=lnlinks href=#hl-22-6> 6</a>
</span><span class=lnt id=hl-22-7><a class=lnlinks href=#hl-22-7> 7</a>
</span><span class=lnt id=hl-22-8><a class=lnlinks href=#hl-22-8> 8</a>
</span><span class=lnt id=hl-22-9><a class=lnlinks href=#hl-22-9> 9</a>
</span><span class=lnt id=hl-22-10><a class=lnlinks href=#hl-22-10>10</a>
</span><span class=lnt id=hl-22-11><a class=lnlinks href=#hl-22-11>11</a>
</span><span class=lnt id=hl-22-12><a class=lnlinks href=#hl-22-12>12</a>
</span><span class=lnt id=hl-22-13><a class=lnlinks href=#hl-22-13>13</a>
</span><span class=lnt id=hl-22-14><a class=lnlinks href=#hl-22-14>14</a>
</span><span class=lnt id=hl-22-15><a class=lnlinks href=#hl-22-15>15</a>
</span><span class=lnt id=hl-22-16><a class=lnlinks href=#hl-22-16>16</a>
</span><span class=lnt id=hl-22-17><a class=lnlinks href=#hl-22-17>17</a>
</span><span class=lnt id=hl-22-18><a class=lnlinks href=#hl-22-18>18</a>
</span><span class=lnt id=hl-22-19><a class=lnlinks href=#hl-22-19>19</a>
</span><span class=lnt id=hl-22-20><a class=lnlinks href=#hl-22-20>20</a>
</span><span class=lnt id=hl-22-21><a class=lnlinks href=#hl-22-21>21</a>
</span><span class=lnt id=hl-22-22><a class=lnlinks href=#hl-22-22>22</a>
</span><span class=lnt id=hl-22-23><a class=lnlinks href=#hl-22-23>23</a>
</span><span class=lnt id=hl-22-24><a class=lnlinks href=#hl-22-24>24</a>
</span><span class=lnt id=hl-22-25><a class=lnlinks href=#hl-22-25>25</a>
</span><span class=lnt id=hl-22-26><a class=lnlinks href=#hl-22-26>26</a>
</span><span class=lnt id=hl-22-27><a class=lnlinks href=#hl-22-27>27</a>
</span><span class=lnt id=hl-22-28><a class=lnlinks href=#hl-22-28>28</a>
</span><span class=lnt id=hl-22-29><a class=lnlinks href=#hl-22-29>29</a>
</span><span class=lnt id=hl-22-30><a class=lnlinks href=#hl-22-30>30</a>
</span><span class=lnt id=hl-22-31><a class=lnlinks href=#hl-22-31>31</a>
</span><span class=lnt id=hl-22-32><a class=lnlinks href=#hl-22-32>32</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># AsyncAPI 명세 예시</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>asyncapi</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;2.4.0&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>info</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>title</span><span class=p>:</span><span class=w> </span><span class=l>주문 관리 시스템 이벤트 API</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;1.0.0&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>주문 처리 워크플로우에서 발생하는 이벤트</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>channels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>order/events</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>publish</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>summary</span><span class=p>:</span><span class=w> </span><span class=l>주문 관련 이벤트를 발행하는 채널</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>operationId</span><span class=p>:</span><span class=w> </span><span class=l>publishOrderEvent</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>message</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>oneOf</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>$ref</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;#/components/messages/OrderCreated&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>$ref</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;#/components/messages/OrderPaid&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>$ref</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;#/components/messages/OrderShipped&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>components</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>messages</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>OrderCreated</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>order.created</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>title</span><span class=p>:</span><span class=w> </span><span class=l>주문 생성 이벤트</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>contentType</span><span class=p>:</span><span class=w> </span><span class=l>application/json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>payload</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>$ref</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;#/components/schemas/OrderCreatedPayload&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>schemas</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>OrderCreatedPayload</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>object</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>properties</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>order_id</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>생성된 주문의 고유 식별자</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># 추가 필드...</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h5 id=멱등성-idempotency-보장>멱등성 (Idempotency) 보장<a hidden class=anchor aria-hidden=true href=#멱등성-idempotency-보장>#</a></h5><p>동일 이벤트가 중복 처리되는 것을 방지하기 위한 멱등성 구현은 이벤트 기반 시스템에서 중요하다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-23-1><a class=lnlinks href=#hl-23-1> 1</a>
</span><span class=lnt id=hl-23-2><a class=lnlinks href=#hl-23-2> 2</a>
</span><span class=lnt id=hl-23-3><a class=lnlinks href=#hl-23-3> 3</a>
</span><span class=lnt id=hl-23-4><a class=lnlinks href=#hl-23-4> 4</a>
</span><span class=lnt id=hl-23-5><a class=lnlinks href=#hl-23-5> 5</a>
</span><span class=lnt id=hl-23-6><a class=lnlinks href=#hl-23-6> 6</a>
</span><span class=lnt id=hl-23-7><a class=lnlinks href=#hl-23-7> 7</a>
</span><span class=lnt id=hl-23-8><a class=lnlinks href=#hl-23-8> 8</a>
</span><span class=lnt id=hl-23-9><a class=lnlinks href=#hl-23-9> 9</a>
</span><span class=lnt id=hl-23-10><a class=lnlinks href=#hl-23-10>10</a>
</span><span class=lnt id=hl-23-11><a class=lnlinks href=#hl-23-11>11</a>
</span><span class=lnt id=hl-23-12><a class=lnlinks href=#hl-23-12>12</a>
</span><span class=lnt id=hl-23-13><a class=lnlinks href=#hl-23-13>13</a>
</span><span class=lnt id=hl-23-14><a class=lnlinks href=#hl-23-14>14</a>
</span><span class=lnt id=hl-23-15><a class=lnlinks href=#hl-23-15>15</a>
</span><span class=lnt id=hl-23-16><a class=lnlinks href=#hl-23-16>16</a>
</span><span class=lnt id=hl-23-17><a class=lnlinks href=#hl-23-17>17</a>
</span><span class=lnt id=hl-23-18><a class=lnlinks href=#hl-23-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 멱등성 처리 예시 (Python)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>process_order_event</span><span class=p>(</span><span class=n>event</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>event_id</span> <span class=o>=</span> <span class=n>event</span><span class=p>[</span><span class=s1>&#39;event_id&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 이미 처리된 이벤트인지 확인</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>redis_client</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;processed_event:</span><span class=si>{</span><span class=n>event_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;이벤트 </span><span class=si>{</span><span class=n>event_id</span><span class=si>}</span><span class=s2>는 이미 처리되었습니다. 건너뜁니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 이벤트 처리 로직</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>event</span><span class=p>[</span><span class=s1>&#39;event_type&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;order.created&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>process_new_order</span><span class=p>(</span><span class=n>event</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 처리 완료 표시 (24시간 동안 유지)</span>
</span></span><span class=line><span class=cl>        <span class=n>redis_client</span><span class=o>.</span><span class=n>setex</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;processed_event:</span><span class=si>{</span><span class=n>event_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=mi>86400</span><span class=p>,</span> <span class=s2>&#34;1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;이벤트 처리 실패: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=이벤트-기반-아키텍처의-실제-활용-사례>이벤트 기반 아키텍처의 실제 활용 사례<a hidden class=anchor aria-hidden=true href=#이벤트-기반-아키텍처의-실제-활용-사례>#</a></h4><ol><li><p>마이크로서비스 간 통합<br>여러 마이크로서비스가 이벤트를 통해 느슨하게 결합되어 독립적으로 개발, 배포, 확장될 수 있다.</p></li><li><p>실시간 대시보드 및 분석<br>시스템에서 발생하는 이벤트를 실시간으로 수집, 분석하여 비즈니스 인사이트를 제공한다.</p></li><li><p>IoT 애플리케이션<br>수많은 IoT 장치에서 생성되는 센서 데이터를 이벤트로 처리하여 확장성 있는 시스템을 구축한다.</p></li></ol><h4 id=이벤트-기반-아키텍처의-장점>이벤트 기반 아키텍처의 장점<a hidden class=anchor aria-hidden=true href=#이벤트-기반-아키텍처의-장점>#</a></h4><ol><li><p>느슨한 결합 (Loose Coupling)<br>서비스 간의 직접적인 의존성을 제거하여 변경이 다른 서비스에 미치는 영향을 최소화한다.</p></li><li><p>확장성 (Scalability)<br>이벤트 소비자를 독립적으로 확장할 수 있으며, 새로운 기능을 기존 시스템에 영향 없이 추가할 수 있다.</p></li><li><p>회복력 (Resilience)<br>서비스 간 비동기 통신으로 일부 서비스 장애가 전체 시스템에 미치는 영향을 제한한다.</p></li><li><p>실시간 처리 (Real-time Processing)<br>이벤트가 발생하는 즉시 처리하여 실시간 반응성을 제공한다.</p></li></ol><h4 id=이벤트-기반-아키텍처의-과제와-해결-방안>이벤트 기반 아키텍처의 과제와 해결 방안<a hidden class=anchor aria-hidden=true href=#이벤트-기반-아키텍처의-과제와-해결-방안>#</a></h4><ol><li><p>복잡성 관리<br><strong>과제:</strong> 이벤트 흐름이 복잡해지면 시스템 동작 이해와 디버깅이 어려워질 수 있다.<br><strong>해결 방안:</strong></p><ul><li>이벤트 스키마 레지스트리 구축</li><li>분산 추적 (Distributed Tracing) 시스템 도입</li><li>이벤트 흐름 시각화 도구 활용</li></ul></li><li><p>이벤트 순서 보장<br><strong>과제:</strong> 분산 시스템에서 이벤트 순서 보장이 어려울 수 있다.<br><strong>해결 방안:</strong></p><ul><li>이벤트에 순차적 번호나 타임스탬프 포함</li><li>단일 파티션 키를 사용하여 관련 이벤트의 순서 보장</li><li>이벤트 소싱 패턴 적용</li></ul></li><li><p>데이터 일관성<br><strong>과제:</strong> 분산 시스템에서 즉각적인 일관성 달성이 어려울 수 있다.<br><strong>해결 방안:</strong></p><ul><li>결과적 일관성 (Eventual Consistency) 모델 채택</li><li>SAGA 패턴을 통한 분산 트랜잭션 관리</li><li>보상 트랜잭션 (Compensating Transaction) 구현</li></ul></li></ol><h4 id=이벤트-기반-아키텍처-구현을-위한-기술-스택>이벤트 기반 아키텍처 구현을 위한 기술 스택<a hidden class=anchor aria-hidden=true href=#이벤트-기반-아키텍처-구현을-위한-기술-스택>#</a></h4><h5 id=메시지-브로커-및-이벤트-스트리밍-플랫폼>메시지 브로커 및 이벤트 스트리밍 플랫폼<a hidden class=anchor aria-hidden=true href=#메시지-브로커-및-이벤트-스트리밍-플랫폼>#</a></h5><ul><li>Apache Kafka: 고성능 분산 이벤트 스트리밍 플랫폼</li><li>RabbitMQ: 다양한 메시징 패턴을 지원하는 메시지 브로커</li><li>Amazon SNS/SQS: AWS 의 메시징 서비스</li><li>Google Pub/Sub: GCP 의 메시징 서비스</li></ul><h5 id=이벤트-처리-프레임워크>이벤트 처리 프레임워크<a hidden class=anchor aria-hidden=true href=#이벤트-처리-프레임워크>#</a></h5><ul><li>Spring Cloud Stream: 스프링 기반 이벤트 처리 추상화</li><li>Akka: 액터 모델 기반 분산 이벤트 처리</li><li>Apache Flink: 스트림 처리 및 이벤트 시간 처리</li><li>Serverless Functions: AWS Lambda, Google Cloud Functions 등</li></ul><h5 id=이벤트-스키마-관리>이벤트 스키마 관리<a hidden class=anchor aria-hidden=true href=#이벤트-스키마-관리>#</a></h5><ul><li>Schema Registry: 이벤트 스키마 버전 관리</li><li>Protocol Buffers, Avro: 효율적인 이벤트 직렬화/역직렬화</li><li>AsyncAPI: 이벤트 기반 API 명세</li></ul><hr><h3 id=용어-정리-3>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-3>#</a></h3><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><hr><h3 id=참고-및-출처-3>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-3>#</a></h3></div><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Event-Driven Pattern</h2></header><div class=entry-content><p>Event-Driven Pattern 이 패턴은 시스템의 상태 변화를 이벤트로 표현하고, 이를 기반으로 서비스 간 통신을 구현하는 방식이다.
Event-Driven Pattern은 시스템에서 발생하는 중요한 변화나 행동을 이벤트로 정의하고, 이를 중심으로 시스템을 설계하는 아키텍처 패턴이다.
이 패턴에서는 이벤트의 생성, 전파, 처리가 시스템의 핵심 동작이 된다.
주요 특징:
비동기 통신을 기반으로 함 서비스 간 느슨한 결합 제공 실시간 데이터 처리와 반응성 향상 확장성과 유연성 증대 주요 구성 요소 Event-Driven Pattern의 주요 구성 요소는 다음과 같다:
...</p></div><footer class=entry-footer><span title='2024-12-28 10:05:00 +0000 UTC'>December 28, 2024</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Event-Driven Pattern" href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-styles/messaging-oriented-architecture/event-driven-architecture/event-driven-pattern/></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>