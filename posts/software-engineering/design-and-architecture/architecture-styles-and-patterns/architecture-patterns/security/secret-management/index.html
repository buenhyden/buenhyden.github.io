<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Secret Management | hyunyoun's Blog</title><meta name=keywords content="System-and-Software-Architecture,MSA-Patterns,Security,Secret-Management"><meta name=description content="민감한 자격 증명(API 키, 데이터베이스 비밀번호, 토큰 등)을 안전하게 저장, 관리, 배포하는 핵심 보안 메커니즘이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-patterns/security/secret-management/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-patterns/security/secret-management/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-patterns/security/secret-management/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Secret Management"><meta property="og:description" content="민감한 자격 증명(API 키, 데이터베이스 비밀번호, 토큰 등)을 안전하게 저장, 관리, 배포하는 핵심 보안 메커니즘이다."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-18T12:08:00+00:00"><meta property="article:modified_time" content="2024-11-18T12:08:00+00:00"><meta property="article:tag" content="System-and-Software-Architecture"><meta property="article:tag" content="MSA-Patterns"><meta property="article:tag" content="Security"><meta property="article:tag" content="Secret-Management"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Secret Management"><meta name=twitter:description content="민감한 자격 증명(API 키, 데이터베이스 비밀번호, 토큰 등)을 안전하게 저장, 관리, 배포하는 핵심 보안 메커니즘이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Computer Science and Engineering","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Software Engineering","item":"https://buenhyden.github.io/posts/software-engineering/"},{"@type":"ListItem","position":3,"name":"Design and Architecture","item":""},{"@type":"ListItem","position":5,"name":"Architectue Patterns","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-patterns/"},{"@type":"ListItem","position":6,"name":"Secret Management","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-patterns/security/secret-management/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Secret Management","name":"Secret Management","description":"민감한 자격 증명(API 키, 데이터베이스 비밀번호, 토큰 등)을 안전하게 저장, 관리, 배포하는 핵심 보안 메커니즘이다.","keywords":["System-and-Software-Architecture","MSA-Patterns","Security","Secret-Management"],"articleBody":"Secret Management Secret Management는 MSA(Microservices Architecture) 환경에서 민감한 자격 증명(API 키, 데이터베이스 비밀번호, 토큰 등)을 안전하게 저장, 관리, 배포하는 핵심 보안 메커니즘이다.\n분산 시스템의 특성상 각 서비스가 독립적으로 동작하기 때문에 중앙 집중식 보안 관리가 필수적이다.\nSecret Management는 MSA 보안의 핵심 인프라로, 올바른 도구 선택과 체계적인 정책 수립이 필수적이다.\n2025년 현재 AI 기반 이상 탐지 기능이 도입되며, 지속적인 모니터링과 자동화가 강화되는 추세이다.\n시크릿 관리의 중요성 보안 강화: 시크릿이 노출되면 악의적인 사용자가 시스템에 무단 접근하거나 데이터를 탈취할 수 있다. 규제 준수: 산업 표준과 규제는 민감한 정보의 안전한 관리를 요구한다. 운영 효율성: 중앙에서 시크릿을 관리하면 변경 시 각 서비스나 애플리케이션을 수정할 필요 없이 일괄적으로 업데이트할 수 있다. Secret Management의 핵심 기능 암호화 저장: 모든 비밀 정보는 AES-256 또는 **KMS(Key Management Service)**를 통해 암호화되어 저장된다.\n예: AWS Secrets Manager는 기본적으로 AWS KMS와 통합되어 데이터 보호. Google Cloud Secret Manager는 CMEK(고객 관리 암호화 키) 지원. 접근 제어:\nRBAC(Role-Based Access Control): IAM 정책을 통해 특정 사용자/서비스만 접근 허용. 최소 권한 원칙: 필요한 최소한의 권한만 부여하여 무단 접근 방지. 자동 로테이션:\n주기적 비밀번호 변경을 자동화하여 유출 위험 감소. AWS Secrets Manager는 Lambda와 연동해 30일 주기 자동 교체 지원. 감사 및 모니터링:\nCloudTrail/AWS Config와 통합해 모든 접근 이력 추적. Google Cloud는 Cloud Audit Logs로 실시간 모니터링. 주요 도구 비교 도구 특징 장점 단점 AWS Secrets Manager - RDS, Redshift와 통합\n- 자동 로테이션 지원 완전관리형 서비스, AWS 생태계 최적화 비용 구조 복잡(월별 활성 버전별 과금)[1][27] HashiCorp Vault - 동적 비밀 생성\n- 멀티 클라우드 지원 오픈소스 기반, 유연한 정책 관리 초기 설정 복잡, 유지보수 비용高[3][36] Google Secret Manager - 무료 버전(최대 6개 버전)\n- CMEK 통합 간단한 API, GCP 서비스와 완벽 호환 타 클라우드 연동 기능 제한[4][50] CyberArk - 엔터프라이즈급 보안\n- 하이브리드 환경 지원 SOC 2/GDPR 준수, 세분화된 감사 로그 높은 라이선스 비용[16][44] MSA 환경에서는 여러 시크릿 관리 도구를 활용하여 시크릿을 안전하게 관리할 수 있다.\n예를 들어, HashiCorp의 Vault는 시크릿을 안전하게 저장하고 접근을 제어하는 기능을 제공한다.\n또한, Kubernetes 환경에서는 ConfigMap과 Secret 객체를 사용하여 시크릿을 관리할 수 있다.\nMSA 환경 적용 전략 계층별 보안 설계 API Gateway 레벨:\nKong, AWS API Gateway에서 전역 비밀 정책 적용. 클라이언트 IP/API 키 기반 할당량 관리. 서비스 메시:\nIstio + EnvoyFilter로 서비스 간 호출 시 비밀 동적 주입. CI/CD 파이프라인:\n1 2 3 4 5 # GitLab CI 예시 deploy: script: - echo $DB_PASSWORD | vault kv get -field=password secret/db - kubectl apply -f deployment.yaml 파이프라인 단계에서 비밀을 직접 노출 없이 전달. 보안 모범 사례 중앙 집중화:\n모든 비밀을 단일 저장소에서 관리해 Secret Sprawl 방지. 자동화된 로테이션:\nHashiCorp Vault의 Dynamic Secrets으로 일회성 비밀 생성. 최소 권한 원칙:\nAWS IAM 정책 예시: 1 2 3 4 5 6 7 { \"Version\": \"2012-10-17\", \"Statement\": [{ \"Effect\": \"Allow\", \"Action\": \"secretsmanager:GetSecretValue\", }] } 정기 감사:\n매월 접근 로그 검토 + 비활성 계정 정리. 도입 시 고려사항 비용 최적화: 클라우드별 과금 모델 분석 (예: Google Secret Manager 무료 버전 활용). 복제 전략: AWS Secrets Manager의 Cross-Region Replication으로 재해 복구 대비. 개발자 경험: Doppler, Infisical과 같은 도구로 개발자 워크플로우 통합. 적용 사례 HashiCorp Vault를 이용한 구현 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 from hvac import Client class VaultSecretManager: def __init__(self, vault_url, token): self.client = Client(url=vault_url, token=token) def get_secret(self, path): try: # Vault에서 시크릿 읽기 secret = self.client.read(f'secret/data/{path}') return secret['data']['data'] except Exception as e: logger.error(f\"Failed to read secret: {str(e)}\") raise def store_secret(self, path, secret_data): try: # Vault에 시크릿 저장 self.client.write(f'secret/data/{path}', data=secret_data) except Exception as e: logger.error(f\"Failed to store secret: {str(e)}\") raise Kubernetes + AWS Secrets Manager 시크릿 생성: 1 aws secretsmanager create-secret --name prod/db --secret-string '{\"username\":\"admin\", \"password\":\"P@ssw0rd\"}' 쿠버네티스 연동:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 apiVersion: v1 kind: Pod metadata: name: myapp spec: containers: - name: app image: myapp:latest env: - name: DB_PASSWORD valueFrom: secretKeyRef: name: db-secret key: password External Secrets Operator를 사용해 AWS Secrets Manager → Kubernetes Secret 동기화. 참고 및 출처 ","wordCount":"638","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2024-11-18T12:08:00Z","dateModified":"2024-11-18T12:08:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-patterns/security/secret-management/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>Computer Science and Engineering</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/>Software Engineering</a>&nbsp;»&nbsp;<a href>Design and Architecture</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-patterns/>Architectue Patterns</a></div><h1 class="post-title entry-hint-parent">Secret Management</h1><div class=post-description>민감한 자격 증명(API 키, 데이터베이스 비밀번호, 토큰 등)을 안전하게 저장, 관리, 배포하는 핵심 보안 메커니즘이다.</div><div class=post-meta><span title='2024-11-18 12:08:00 +0000 UTC'>November 18, 2024</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Software%20Engineering/Design%20and%20Architecture/Architecture%20Styles%20and%20Patterns/Architecture%20Patterns/Security/secret-management.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#secret-management>Secret Management</a><ul><li><a href=#시크릿-관리의-중요성>시크릿 관리의 중요성</a></li><li><a href=#secret-management의-핵심-기능>Secret Management의 핵심 기능</a></li><li><a href=#주요-도구-비교>주요 도구 비교</a></li><li><a href=#msa-환경-적용-전략>MSA 환경 적용 전략</a></li><li><a href=#보안-모범-사례>보안 모범 사례</a></li><li><a href=#도입-시-고려사항>도입 시 고려사항</a></li><li><a href=#적용-사례>적용 사례</a></li></ul></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=secret-management>Secret Management<a hidden class=anchor aria-hidden=true href=#secret-management>#</a></h2><p><strong>Secret Management</strong>는 MSA(Microservices Architecture) 환경에서 <strong>민감한 자격 증명(API 키, 데이터베이스 비밀번호, 토큰 등)을 안전하게 저장, 관리, 배포</strong>하는 핵심 보안 메커니즘이다.<br>분산 시스템의 특성상 각 서비스가 독립적으로 동작하기 때문에 <strong>중앙 집중식 보안 관리</strong>가 필수적이다.</p><p>Secret Management는 <strong>MSA 보안의 핵심 인프라</strong>로, 올바른 도구 선택과 체계적인 정책 수립이 필수적이다.<br>2025년 현재 <strong>AI 기반 이상 탐지</strong> 기능이 도입되며, 지속적인 모니터링과 자동화가 강화되는 추세이다.</p><h3 id=시크릿-관리의-중요성>시크릿 관리의 중요성<a hidden class=anchor aria-hidden=true href=#시크릿-관리의-중요성>#</a></h3><ol><li><strong>보안 강화:</strong> 시크릿이 노출되면 악의적인 사용자가 시스템에 무단 접근하거나 데이터를 탈취할 수 있다.</li><li><strong>규제 준수:</strong> 산업 표준과 규제는 민감한 정보의 안전한 관리를 요구한다.</li><li><strong>운영 효율성:</strong> 중앙에서 시크릿을 관리하면 변경 시 각 서비스나 애플리케이션을 수정할 필요 없이 일괄적으로 업데이트할 수 있다.</li></ol><h3 id=secret-management의-핵심-기능>Secret Management의 핵심 기능<a hidden class=anchor aria-hidden=true href=#secret-management의-핵심-기능>#</a></h3><ol><li><p><strong>암호화 저장</strong>: 모든 비밀 정보는 <strong>AES-256</strong> 또는 **KMS(Key Management Service)**를 통해 암호화되어 저장된다.</p><ul><li>예: AWS Secrets Manager는 기본적으로 AWS KMS와 통합되어 데이터 보호.</li><li>Google Cloud Secret Manager는 CMEK(고객 관리 암호화 키) 지원.</li></ul></li><li><p><strong>접근 제어</strong>:</p><ul><li><strong>RBAC(Role-Based Access Control)</strong>: IAM 정책을 통해 특정 사용자/서비스만 접근 허용.</li><li><strong>최소 권한 원칙</strong>: 필요한 최소한의 권한만 부여하여 무단 접근 방지.</li></ul></li><li><p><strong>자동 로테이션</strong>:</p><ul><li>주기적 비밀번호 변경을 자동화하여 유출 위험 감소.</li><li>AWS Secrets Manager는 Lambda와 연동해 30일 주기 자동 교체 지원.</li></ul></li><li><p><strong>감사 및 모니터링</strong>:</p><ul><li>CloudTrail/AWS Config와 통합해 모든 접근 이력 추적.</li><li>Google Cloud는 Cloud Audit Logs로 실시간 모니터링.</li></ul></li></ol><h3 id=주요-도구-비교>주요 도구 비교<a hidden class=anchor aria-hidden=true href=#주요-도구-비교>#</a></h3><table><thead><tr><th><strong>도구</strong></th><th><strong>특징</strong></th><th><strong>장점</strong></th><th><strong>단점</strong></th><th></th></tr></thead><tbody><tr><td><strong>AWS Secrets Manager</strong></td><td>- RDS, Redshift와 통합<br>- 자동 로테이션 지원</td><td>완전관리형 서비스, AWS 생태계 최적화</td><td>비용 구조 복잡(월별 활성 버전별 과금)[1][27]</td><td></td></tr><tr><td><strong>HashiCorp Vault</strong></td><td>- 동적 비밀 생성<br>- 멀티 클라우드 지원</td><td>오픈소스 기반, 유연한 정책 관리</td><td>초기 설정 복잡, 유지보수 비용高[3][36]</td><td></td></tr><tr><td><strong>Google Secret Manager</strong></td><td>- 무료 버전(최대 6개 버전)<br>- CMEK 통합</td><td>간단한 API, GCP 서비스와 완벽 호환</td><td>타 클라우드 연동 기능 제한[4][50]</td><td></td></tr><tr><td><strong>CyberArk</strong></td><td>- 엔터프라이즈급 보안<br>- 하이브리드 환경 지원</td><td>SOC 2/GDPR 준수, 세분화된 감사 로그</td><td>높은 라이선스 비용[16][44]</td><td></td></tr></tbody></table><p>MSA 환경에서는 여러 시크릿 관리 도구를 활용하여 시크릿을 안전하게 관리할 수 있다.<br>예를 들어, HashiCorp의 Vault는 시크릿을 안전하게 저장하고 접근을 제어하는 기능을 제공한다.<br>또한, Kubernetes 환경에서는 ConfigMap과 Secret 객체를 사용하여 시크릿을 관리할 수 있다.</p><h3 id=msa-환경-적용-전략>MSA 환경 적용 전략<a hidden class=anchor aria-hidden=true href=#msa-환경-적용-전략>#</a></h3><h4 id=계층별-보안-설계>계층별 보안 설계<a hidden class=anchor aria-hidden=true href=#계층별-보안-설계>#</a></h4><ol><li><p><strong>API Gateway 레벨</strong>:</p><ul><li>Kong, AWS API Gateway에서 전역 비밀 정책 적용.</li><li>클라이언트 IP/API 키 기반 할당량 관리.</li></ul></li><li><p><strong>서비스 메시</strong>:</p><ul><li>Istio + EnvoyFilter로 서비스 간 호출 시 비밀 동적 주입.</li></ul></li><li><p><strong>CI/CD 파이프라인</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># GitLab CI 예시  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>deploy</span><span class=p>:</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>echo $DB_PASSWORD | vault kv get -field=password secret/db  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>kubectl apply -f deployment.yaml  </span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>파이프라인 단계에서 비밀을 직접 노출 없이 전달.</li></ul></li></ol><h3 id=보안-모범-사례>보안 모범 사례<a hidden class=anchor aria-hidden=true href=#보안-모범-사례>#</a></h3><ol><li><p>중앙 집중화:</p><ul><li>모든 비밀을 단일 저장소에서 관리해 <strong>Secret Sprawl</strong> 방지.</li></ul></li><li><p>자동화된 로테이션:</p><ul><li>HashiCorp Vault의 <strong>Dynamic Secrets</strong>으로 일회성 비밀 생성.</li></ul></li><li><p>최소 권한 원칙:</p><ul><li>AWS IAM 정책 예시:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5>5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6>6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>  
</span></span><span class=line><span class=cl>  <span class=nt>&#34;Version&#34;</span><span class=p>:</span> <span class=s2>&#34;2012-10-17&#34;</span><span class=p>,</span>  
</span></span><span class=line><span class=cl>  <span class=nt>&#34;Statement&#34;</span><span class=p>:</span> <span class=p>[{</span>  
</span></span><span class=line><span class=cl>    <span class=nt>&#34;Effect&#34;</span><span class=p>:</span> <span class=s2>&#34;Allow&#34;</span><span class=p>,</span>  
</span></span><span class=line><span class=cl>    <span class=nt>&#34;Action&#34;</span><span class=p>:</span> <span class=s2>&#34;secretsmanager:GetSecretValue&#34;</span><span class=p>,</span>  
</span></span><span class=line><span class=cl>  <span class=p>}]</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>정기 감사</strong>:</p><ul><li>매월 접근 로그 검토 + 비활성 계정 정리.</li></ul></li></ol><h3 id=도입-시-고려사항>도입 시 고려사항<a hidden class=anchor aria-hidden=true href=#도입-시-고려사항>#</a></h3><ul><li><strong>비용 최적화</strong>: 클라우드별 과금 모델 분석 (예: Google Secret Manager 무료 버전 활용).</li><li><strong>복제 전략</strong>: AWS Secrets Manager의 <strong>Cross-Region Replication</strong>으로 재해 복구 대비.</li><li><strong>개발자 경험</strong>: Doppler, Infisical과 같은 도구로 개발자 워크플로우 통합.</li></ul><h3 id=적용-사례>적용 사례<a hidden class=anchor aria-hidden=true href=#적용-사례>#</a></h3><h4 id=hashicorp-vault를-이용한-구현>HashiCorp Vault를 이용한 구현<a hidden class=anchor aria-hidden=true href=#hashicorp-vault를-이용한-구현>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span><span class=lnt id=hl-2-20><a class=lnlinks href=#hl-2-20>20</a>
</span><span class=lnt id=hl-2-21><a class=lnlinks href=#hl-2-21>21</a>
</span><span class=lnt id=hl-2-22><a class=lnlinks href=#hl-2-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>hvac</span> <span class=kn>import</span> <span class=n>Client</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>VaultSecretManager</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>vault_url</span><span class=p>,</span> <span class=n>token</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>client</span> <span class=o>=</span> <span class=n>Client</span><span class=p>(</span><span class=n>url</span><span class=o>=</span><span class=n>vault_url</span><span class=p>,</span> <span class=n>token</span><span class=o>=</span><span class=n>token</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_secret</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>path</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># Vault에서 시크릿 읽기</span>
</span></span><span class=line><span class=cl>            <span class=n>secret</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;secret/data/</span><span class=si>{</span><span class=n>path</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>secret</span><span class=p>[</span><span class=s1>&#39;data&#39;</span><span class=p>][</span><span class=s1>&#39;data&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Failed to read secret: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>store_secret</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>path</span><span class=p>,</span> <span class=n>secret_data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># Vault에 시크릿 저장</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;secret/data/</span><span class=si>{</span><span class=n>path</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>secret_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Failed to store secret: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=kubernetes--aws-secrets-manager>Kubernetes + AWS Secrets Manager<a hidden class=anchor aria-hidden=true href=#kubernetes--aws-secrets-manager>#</a></h4><ol><li><strong>시크릿 생성</strong>:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl> aws secretsmanager create-secret --name prod/db --secret-string <span class=s1>&#39;{&#34;username&#34;:&#34;admin&#34;, &#34;password&#34;:&#34;P@ssw0rd&#34;}&#39;</span>  
</span></span></code></pre></td></tr></table></div></div><ol start=2><li><p><strong>쿠버네티스 연동</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>myapp  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>app  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>myapp:latest  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>env</span><span class=p>:</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>DB_PASSWORD  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>valueFrom</span><span class=p>:</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>secretKeyRef</span><span class=p>:</span><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>db-secret  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>password  </span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li><strong>External Secrets Operator</strong>를 사용해 AWS Secrets Manager → Kubernetes Secret 동기화.</li></ul></li></ol><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/system-and-software-architecture/>System-and-Software-Architecture</a></li><li><a href=https://buenhyden.github.io/tags/msa-patterns/>MSA-Patterns</a></li><li><a href=https://buenhyden.github.io/tags/security/>Security</a></li><li><a href=https://buenhyden.github.io/tags/secret-management/>Secret-Management</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-patterns/performance-and-rate-limiting/rate-limiting/><span class=title>« Prev</span><br><span>Rate Limiting</span>
</a><a class=next href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-patterns/security/access-token/><span class=title>Next »</span><br><span>Access Token</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>