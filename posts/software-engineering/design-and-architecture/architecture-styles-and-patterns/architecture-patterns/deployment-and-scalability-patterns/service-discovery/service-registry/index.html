<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Service registry | hyunyoun's Blog</title><meta name=keywords content="System-and-Software-Architecture,MSA-Patterns,Discovery,Service-registry"><meta name=description content="각 서비스 인스턴스의 네트워크 위치(IP 주소와 포트)를 저장하고 관리하는 중앙화된 데이터베이스"><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-patterns/deployment-and-scalability-patterns/service-discovery/service-registry/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-patterns/deployment-and-scalability-patterns/service-discovery/service-registry/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-patterns/deployment-and-scalability-patterns/service-discovery/service-registry/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-patterns/deployment-and-scalability-patterns/service-discovery/service-registry/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Service registry"><meta property="og:description" content="각 서비스 인스턴스의 네트워크 위치(IP 주소와 포트)를 저장하고 관리하는 중앙화된 데이터베이스"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Service registry"><meta name=twitter:description content="각 서비스 인스턴스의 네트워크 위치(IP 주소와 포트)를 저장하고 관리하는 중앙화된 데이터베이스"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Service registry","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/architecture-styles-and-patterns/architecture-patterns/deployment-and-scalability-patterns/service-discovery/service-registry/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a></div><h1>Service registry</h1><div class=post-description>각 서비스 인스턴스의 네트워크 위치(IP 주소와 포트)를 저장하고 관리하는 중앙화된 데이터베이스</div></header><div class=post-content><h2 id=service-registry>Service Registry<a hidden class=anchor aria-hidden=true href=#service-registry>#</a></h2><h2 id=1-태그-tag>1. 태그 (Tag)<a hidden class=anchor aria-hidden=true href=#1-태그-tag>#</a></h2><ul><li>Service-Registry</li><li>SOA</li><li>Microservices</li><li>Service-Discovery</li></ul><h2 id=2-분류-구조-적합성-분석>2. 분류 구조 적합성 분석<a hidden class=anchor aria-hidden=true href=#2-분류-구조-적합성-분석>#</a></h2><p>현재 분류 구조에서 **Service Registry(서비스 레지스트리)**는 &ldquo;Software Engineering > Design and Architecture > Architecture Styles and Patterns > Architecture Styles > Service-oriented Architecture&rdquo; 에 위치하는 것이 적합합니다.<br>서비스 레지스트리는 서비스 지향 아키텍처 (SOA) 및 마이크로서비스 아키텍처에서 서비스 인스턴스의 위치와 상태 정보를 관리하여 동적 서비스 검색과 연결을 지원하는 핵심 컴포넌트로, 아키텍처 스타일 내 중요한 역할을 담당합니다.</p><h2 id=3-주제-요약-200-자-내외>3. 주제 요약 (200 자 내외)<a hidden class=anchor aria-hidden=true href=#3-주제-요약-200-자-내외>#</a></h2><p>Service Registry 는 분산 시스템에서 서비스 인스턴스의 위치, 상태, 메타데이터를 중앙에서 관리하여 클라이언트가 동적으로 서비스 위치를 검색하고 연결할 수 있도록 지원하는 시스템입니다. 이를 통해 서비스 간 통신의 유연성과 확장성을 높입니다.</p><h2 id=4-개요-250-자-내외>4. 개요 (250 자 내외)<a hidden class=anchor aria-hidden=true href=#4-개요-250-자-내외>#</a></h2><p>Service Registry 는 마이크로서비스 및 SOA 환경에서 각 서비스 인스턴스의 네트워크 위치와 상태 정보를 중앙에서 관리하는 시스템입니다. 서비스가 시작되거나 종료될 때 등록 및 해제하며, 클라이언트는 레지스트리를 조회해 최신 서비스 위치를 동적으로 확인합니다. 이를 통해 서비스 디스커버리와 로드 밸런싱, 장애 대응이 가능해져 분산 시스템의 유연성과 확장성을 크게 향상시킵니다.</p><h2 id=5-핵심-개념>5. 핵심 개념<a hidden class=anchor aria-hidden=true href=#5-핵심-개념>#</a></h2><ul><li><strong>서비스 인스턴스 등록 및 해제</strong>: 각 서비스는 시작 시 레지스트리에 자신을 등록하고, 종료 시 해제합니다.</li><li><strong>서비스 위치 및 상태 정보 관리</strong>: 네트워크 위치 (주소, 포트) 와 상태 (정상/비정상 등) 를 중앙에서 관리합니다.</li><li><strong>동적 서비스 검색 및 연결 지원</strong>: 클라이언트는 레지스트리를 조회해 동적으로 서비스 위치를 확인하고 연결할 수 있습니다.</li><li><strong>서비스 헬스 체크 및 상태 모니터링</strong>: 주기적으로 서비스 상태를 점검하여 비정상 인스턴스를 자동으로 제외합니다.</li><li><strong>로드 밸런싱 및 장애 대응 지원</strong>: 여러 인스턴스 중 정상 서비스로 트래픽을 분산시켜 장애에 유연하게 대응합니다.</li><li><strong>분산 시스템에서의 서비스 디스커버리 핵심 컴포넌트</strong>: 마이크로서비스, SOA 등에서 필수적인 역할을 수행합니다.</li></ul><h3 id=51-실무-구현과의-연관성>5.1 실무 구현과의 연관성<a hidden class=anchor aria-hidden=true href=#51-실무-구현과의-연관성>#</a></h3><ul><li>실무에서는 Consul, Eureka, Zookeeper, Etcd 등 다양한 서비스 레지스트리 솔루션을 활용해 서비스 인스턴스의 동적 등록과 검색을 구현합니다.</li><li>이를 통해 마이크로서비스 간의 유연한 통신과 자동화된 장애 대응, 로드 밸런싱이 가능하며, 클라우드 네이티브 환경에서 필수적인 구성 요소입니다.</li></ul><h2 id=6-주제와-관련하여-조사할-내용>6. 주제와 관련하여 조사할 내용<a hidden class=anchor aria-hidden=true href=#6-주제와-관련하여-조사할-내용>#</a></h2><h3 id=61-배경>6.1 배경<a hidden class=anchor aria-hidden=true href=#61-배경>#</a></h3><ul><li>분산 시스템과 마이크로서비스 아키텍처에서 서비스 인스턴스의 동적 위치 파악과 연결 필요성 증가로 인해 서비스 레지스트리가 등장했습니다.</li></ul><h3 id=62-목적-및-필요성>6.2 목적 및 필요성<a hidden class=anchor aria-hidden=true href=#62-목적-및-필요성>#</a></h3><ul><li>서비스 위치 및 상태 정보를 중앙에서 관리하여 동적 서비스 검색, 로드 밸런싱, 장애 대응을 지원함으로써 시스템의 유연성과 확장성을 확보합니다.</li></ul><h3 id=63-주요-기능-및-역할>6.3 주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#63-주요-기능-및-역할>#</a></h3><ul><li>서비스 인스턴스 등록 및 해제</li><li>서비스 위치 및 상태 정보 관리</li><li>서비스 헬스 체크 및 상태 모니터링</li><li>동적 서비스 검색 및 연결 지원</li><li>로드 밸런싱 및 장애 대응 지원</li></ul><h3 id=64-특징>6.4 특징<a hidden class=anchor aria-hidden=true href=#64-특징>#</a></h3><ul><li>중앙 집중식 또는 분산형 관리</li><li>실시간 서비스 상태 반영</li><li>서비스 디스커버리 핵심 컴포넌트</li><li>클라우드 네이티브 환경에 적합</li></ul><h3 id=65-핵심-원칙>6.5 핵심 원칙<a hidden class=anchor aria-hidden=true href=#65-핵심-원칙>#</a></h3><ul><li>서비스는 시작 시 레지스트리에 자신을 등록하고 종료 시 해제</li><li>클라이언트는 레지스트리에서 최신 서비스 위치를 조회</li><li>헬스 체크를 통해 서비스 상태를 지속적으로 모니터링</li><li>서비스 위치 정보는 동적으로 업데이트되어야 함</li></ul><h3 id=66-주요-원리--작동-원리-및-방식>6.6 주요 원리 & 작동 원리 및 방식<a hidden class=anchor aria-hidden=true href=#66-주요-원리--작동-원리-및-방식>#</a></h3><ul><li><strong>주요 원리</strong>: 서비스 인스턴스가 자신의 위치와 상태 정보를 주기적으로 또는 이벤트 기반으로 레지스트리에 등록/갱신하며, 클라이언트는 이를 조회해 동적으로 연결을 수행합니다.</li><li><strong>작동 방식</strong>:<ol><li>서비스가 시작되면 레지스트리에 등록</li><li>종료 시 해제</li><li>클라이언트는 레지스트리에서 서비스 목록과 상태를 조회</li><li>헬스 체크를 통해 비정상 인스턴스는 자동으로 제외</li></ol></li></ul><h3 id=67-구조-및-아키텍처>6.7 구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#67-구조-및-아키텍처>#</a></h3><h4 id=필수-구성요소>필수 구성요소<a hidden class=anchor aria-hidden=true href=#필수-구성요소>#</a></h4><table><thead><tr><th>구성요소</th><th>기능</th><th>역할</th></tr></thead><tbody><tr><td>서비스 레지스트리 서버</td><td>서비스 인스턴스 정보 저장 및 관리</td><td>중앙 또는 분산 환경에서 서비스 위치 및 상태 관리</td></tr><tr><td>서비스 인스턴스</td><td>자신의 위치 및 상태 정보를 등록/갱신</td><td>서비스 디스커버리 대상</td></tr><tr><td>클라이언트</td><td>레지스트리에서 서비스 위치 조회</td><td>서비스 호출자</td></tr><tr><td>헬스 체크 모듈</td><td>서비스 상태 모니터링</td><td>비정상 서비스 감지 및 제외</td></tr></tbody></table><h4 id=선택-구성요소>선택 구성요소<a hidden class=anchor aria-hidden=true href=#선택-구성요소>#</a></h4><table><thead><tr><th>구성요소</th><th>기능</th><th>역할</th></tr></thead><tbody><tr><td>캐시</td><td>서비스 정보 임시 저장</td><td>조회 성능 향상</td></tr><tr><td>보안 모듈</td><td>접근 제어 및 인증</td><td>서비스 정보 보호</td></tr></tbody></table><p>서비스 레지스트리의 구조와 각 구성요소의 상호작용은 아래 다이어그램을 참고하세요.</p><h2 id=7-구현-기법>7. 구현 기법<a hidden class=anchor aria-hidden=true href=#7-구현-기법>#</a></h2><ul><li>Consul, Eureka, Zookeeper, Etcd 등 상용/오픈소스 솔루션 활용</li><li>서비스 인스턴스의 등록/해제 및 헬스 체크 API 구현</li><li>클라이언트 라이브러리를 통한 동적 서비스 검색 및 로드 밸런싱 연동</li><li>보안, 인증, 캐시 등 부가 기능 통합</li></ul><h2 id=8-장점>8. 장점<a hidden class=anchor aria-hidden=true href=#8-장점>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>동적 서비스 검색</td><td>인스턴스 위치 변동에도 자동 연결 지원</td></tr><tr><td>장점</td><td>장애 대응</td><td>비정상 인스턴스 자동 제외, 고가용성</td></tr><tr><td>장점</td><td>확장성</td><td>인스턴스 추가/제거가 용이</td></tr><tr><td>장점</td><td>로드 밸런싱</td><td>트래픽 분산 및 성능 최적화</td></tr><tr><td>장점</td><td>서비스 상태 모니터링</td><td>실시간 헬스 체크로 신뢰성 확보</td></tr></tbody></table><h2 id=9-단점과-문제점-그리고-해결방안>9. 단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#9-단점과-문제점-그리고-해결방안>#</a></h2><h3 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>단일 장애점</td><td>중앙 레지스트리 장애 시 전체 서비스 검색 불가</td><td>이중화, 분산형 구조 도입</td></tr><tr><td>단점</td><td>복잡성 증가</td><td>레지스트리 관리 및 연동 복잡성</td><td>자동화 도구, 표준화 적용</td></tr><tr><td>단점</td><td>네트워크 부하</td><td>빈번한 상태 갱신/조회로 인한 부하</td><td>캐시, 트래픽 제한 적용</td></tr></tbody></table><h3 id=문제점>문제점<a hidden class=anchor aria-hidden=true href=#문제점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>서비스 정보 불일치</td><td>갱신 지연, 네트워크 장애</td><td>잘못된 서비스 연결</td><td>헬스 체크, 로그 분석</td><td>주기적 동기화</td><td>자동 재갱신, 장애 감지</td></tr><tr><td>문제점</td><td>보안 취약점</td><td>인증 미비, 정보 노출</td><td>무단 접근, 데이터 유출</td><td>접근 로그, 모니터링</td><td>인증/인가 강화</td><td>보안 모듈 도입</td></tr><tr><td>문제점</td><td>확장성 한계</td><td>단일 서버 구조</td><td>대규모 트래픽 처리 불가</td><td>성능 모니터링</td><td>분산형 구조</td><td>샤딩, 클러스터링</td></tr></tbody></table><h2 id=10-도전-과제>10. 도전 과제<a hidden class=anchor aria-hidden=true href=#10-도전-과제>#</a></h2><ul><li><strong>고가용성 및 장애 복구</strong>: 분산형 구조, 이중화, 자동 장애 조치 체계 구축</li><li><strong>성능 최적화</strong>: 대규모 트래픽 처리, 캐시 및 분산 처리 적용</li><li><strong>보안 강화</strong>: 인증/인가, 데이터 암호화, 접근 제어</li><li><strong>운영 자동화</strong>: 서비스 등록/해제, 헬스 체크 자동화</li></ul><h2 id=11-분류-기준에-따른-종류-및-유형>11. 분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#11-분류-기준에-따른-종류-및-유형>#</a></h2><table><thead><tr><th>분류 기준</th><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>중앙집중형</td><td>단일 서버에서 모든 서비스 정보 관리</td></tr><tr><td>아키텍처</td><td>분산형</td><td>여러 서버에 정보 분산 저장</td></tr><tr><td>동기화 방식</td><td>푸시 기반</td><td>서비스가 직접 상태 갱신</td></tr><tr><td>동기화 방식</td><td>풀 기반</td><td>레지스트리가 주기적으로 상태 확인</td></tr><tr><td>구현 형태</td><td>오픈소스</td><td>Consul, Eureka, Zookeeper 등</td></tr><tr><td>구현 형태</td><td>상용 솔루션</td><td>AWS Service Discovery 등</td></tr></tbody></table><h2 id=12-실무-사용-예시>12. 실무 사용 예시<a hidden class=anchor aria-hidden=true href=#12-실무-사용-예시>#</a></h2><table><thead><tr><th>목적</th><th>적용 기술</th><th>효과</th></tr></thead><tbody><tr><td>마이크로서비스 동적 연결</td><td>Consul, Eureka</td><td>자동 서비스 검색, 장애 대응</td></tr><tr><td>클라우드 네이티브 환경</td><td>Etcd, Zookeeper</td><td>분산 서비스 관리, 고가용성</td></tr><tr><td>로드 밸런싱 연동</td><td>Consul + HAProxy</td><td>트래픽 분산, 성능 최적화</td></tr><tr><td>서비스 상태 모니터링</td><td>Consul Health Check</td><td>실시간 장애 감지, 자동 복구</td></tr></tbody></table><h2 id=13-활용-사례>13. 활용 사례<a hidden class=anchor aria-hidden=true href=#13-활용-사례>#</a></h2><p><strong>마이크로서비스 기반 주문 처리 시스템</strong></p><ul><li>주문, 결제, 배송 등 각 서비스 인스턴스가 서비스 레지스트리에 등록</li><li>클라이언트 (예: API Gateway) 는 주문 서비스 위치를 레지스트리에서 조회 후 연결</li><li>서비스 인스턴스 장애 시 헬스 체크를 통해 자동 제외, 신규 인스턴스 추가 시 자동 등록</li></ul><h3 id=시스템-구성-및-워크플로우>시스템 구성 및 워크플로우<a hidden class=anchor aria-hidden=true href=#시스템-구성-및-워크플로우>#</a></h3><ol><li>서비스 인스턴스가 시작 시 레지스트리에 등록</li><li>클라이언트가 레지스트리에서 서비스 위치 조회</li><li>장애 인스턴스는 헬스 체크로 자동 제외</li><li>신규 인스턴스 추가 시 자동 등록</li></ol><p><strong>Service Registry 적용 전후 차이</strong></p><ul><li>적용 전: 서비스 위치 하드코딩, 장애 대응 어려움, 확장성 한계</li><li>적용 후: 동적 연결, 자동 장애 대응, 유연한 확장</li></ul><h2 id=14-구현-예시-python-pseudo-code>14. 구현 예시 (Python, pseudo-code)<a hidden class=anchor aria-hidden=true href=#14-구현-예시-python-pseudo-code>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 서비스 인스턴스: 레지스트리에 등록</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>register_service</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>service_info</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;order-service&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;address&#34;</span><span class=p>:</span> <span class=s2>&#34;10.0.0.1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;port&#34;</span><span class=p>:</span> <span class=mi>8080</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;UP&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>registry_api</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=n>service_info</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 헬스 체크: 주기적 상태 갱신</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>health_check</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>status</span> <span class=o>=</span> <span class=n>check_service_health</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>registry_api</span><span class=o>.</span><span class=n>update_status</span><span class=p>(</span><span class=s2>&#34;order-service&#34;</span><span class=p>,</span> <span class=n>status</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 클라이언트: 서비스 위치 조회 및 연결</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_service_address</span><span class=p>(</span><span class=n>service_name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>service_list</span> <span class=o>=</span> <span class=n>registry_api</span><span class=o>.</span><span class=n>lookup</span><span class=p>(</span><span class=n>service_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># 로드 밸런싱 전략 적용</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>select_healthy_instance</span><span class=p>(</span><span class=n>service_list</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=15-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>15. 실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#15-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>고려사항</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>고가용성</td><td>장애 대비 이중화</td><td>분산형, 클러스터 구성</td></tr><tr><td>성능</td><td>대규모 트래픽 대응</td><td>캐시, 샤딩, 스케일아웃</td></tr><tr><td>보안</td><td>정보 보호, 접근 제어</td><td>인증/인가, 암호화 적용</td></tr><tr><td>자동화</td><td>등록/해제/헬스 체크 자동화</td><td>자동화 도구, 스크립트 활용</td></tr><tr><td>표준화</td><td>API 및 데이터 포맷 일관성</td><td>표준 REST API, JSON 등 사용</td></tr></tbody></table><h2 id=16-최적화하기-위한-고려사항-및-주의할-점>16. 최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#16-최적화하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>고려사항</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>캐시 활용</td><td>조회 지연 최소화</td><td>로컬/분산 캐시 적용</td></tr><tr><td>헬스 체크 주기</td><td>상태 반영 신속성</td><td>적정 주기 설정, 과도한 트래픽 방지</td></tr><tr><td>데이터 동기화</td><td>정보 불일치 방지</td><td>주기적 동기화, 장애 감지</td></tr><tr><td>분산 처리</td><td>확장성 및 성능</td><td>클러스터, 샤딩 적용</td></tr></tbody></table><h2 id=17-주제와-관련하여-주목할-내용>17. 주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#17-주제와-관련하여-주목할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>Service Registry</td><td>서비스 디스커버리</td><td>동적 서비스 위치 검색 지원</td></tr><tr><td>아키텍처</td><td>Service Registry</td><td>헬스 체크</td><td>서비스 상태 실시간 모니터링</td></tr><tr><td>실무</td><td>Service Registry</td><td>고가용성</td><td>장애 대비 분산형 구조 필수</td></tr><tr><td>실무</td><td>Service Registry</td><td>자동화</td><td>등록/해제/상태 갱신 자동화</td></tr><tr><td>실무</td><td>Service Registry</td><td>보안</td><td>접근 제어, 인증/인가 필요</td></tr></tbody></table><h2 id=18-반드시-학습해야할-내용>18. 반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#18-반드시-학습해야할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>Service Registry</td><td>서비스 등록/해제</td><td>인스턴스의 동적 관리</td></tr><tr><td>아키텍처</td><td>Service Registry</td><td>헬스 체크</td><td>상태 모니터링 및 자동 장애 대응</td></tr><tr><td>아키텍처</td><td>Service Registry</td><td>분산 구조</td><td>고가용성, 확장성 확보</td></tr><tr><td>실무</td><td>Service Registry</td><td>Consul/Eureka/Zookeeper</td><td>대표적 오픈소스 솔루션</td></tr><tr><td>실무</td><td>Service Registry</td><td>자동화 도구</td><td>운영 효율화, 오류 감소</td></tr><tr><td>실무</td><td>Service Registry</td><td>보안 모듈</td><td>정보 보호, 접근 제어</td></tr></tbody></table><h3 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h3><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>Service Registry(서비스 레지스트리)</td><td>서비스 인스턴스 위치/상태 정보를 중앙에서 관리하는 시스템</td></tr><tr><td>아키텍처</td><td>Service Discovery(서비스 디스커버리)</td><td>동적으로 서비스 위치를 검색하는 기능</td></tr><tr><td>아키텍처</td><td>Health Check(헬스 체크)</td><td>서비스 인스턴스의 상태를 주기적으로 점검하는 기능</td></tr><tr><td>아키텍처</td><td>Consul/Eureka/Zookeeper/Etcd</td><td>대표적인 서비스 레지스트리 오픈소스 솔루션</td></tr><tr><td>실무</td><td>자동 등록/해제</td><td>서비스 인스턴스의 자동 등록 및 해제 기능</td></tr><tr><td>실무</td><td>분산 구조</td><td>여러 서버에 정보 분산 저장, 고가용성 확보</td></tr><tr><td>실무</td><td>보안 모듈</td><td>접근 제어, 인증/인가, 암호화 등 보안 기능</td></tr></tbody></table><h3 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h3><ul><li><a href=https://martinfowler.com/articles/microservices.html>마이크로서비스 아키텍처와 서비스 레지스트리 개념</a></li><li><a href=https://dzone.com/articles/service-discovery-in-microservices-architecture>Consul, Eureka 등 오픈소스 레지스트리 비교</a></li><li><a href=https://microservices.io/patterns/service-discovery.html>Service Discovery 패턴 설명</a></li><li><a href=https://www.redhat.com/en/topics/cloud-native-apps/what-is-service-discovery>클라우드 네이티브 환경에서의 서비스 레지스트리</a></li></ul><p>아래는 <strong>Service Registry</strong> 주제에 대한 심층 분석이며, 요청하신 1–4 단계 구조에 맞추어 정리했습니다.</p><hr><h3 id=1-태그>1️⃣ 태그<a hidden class=anchor aria-hidden=true href=#1-태그>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Service-Registry  
</span></span><span class=line><span class=cl>Service-Discovery  
</span></span><span class=line><span class=cl>Service-Directory  
</span></span><span class=line><span class=cl>Microservices-Infrastructure
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=2-분류-구조-적절성>2️⃣ 분류 구조 적절성<a hidden class=anchor aria-hidden=true href=#2-분류-구조-적절성>#</a></h3><p>&ldquo;Service Registry&rdquo; 는 <strong>SOA 및 마이크로서비스</strong> 아키텍처의 핵심 인프라로, <strong>서비스 위치와 메타데이터를 중앙 저장소에 등록하고 조회</strong>하여 동적 서비스 탐색과 통신을 지원합니다. &ldquo;Software Engineering > Design and Architecture > Architecture Styles > Service‑oriented Architecture&rdquo; 하위에 배치하는 것은 <strong>완전히 타당</strong>합니다 (<a href="https://microservices.io/patterns/service-registry.html?utm_source=chatgpt.com" title="Pattern: Service registry - Microservices.io">microservices.io</a>).</p><hr><h3 id=3-200-자-요약>3️⃣ 200 자 요약<a hidden class=anchor aria-hidden=true href=#3-200-자-요약>#</a></h3><p>Service Registry 는 <strong>서비스 인스턴스의 네트워크 위치, 상태, 메타데이터를 중앙에 저장하고 제공</strong>하는 디렉터리 시스템입니다. 서비스는 시작 시 등록, 주기적 heartbeat 를 통해 상태 전파하고, 호출자는 registry 를 통해 최신 위치를 조회하여 <strong>동적 로드밸런싱과 장애 복원성</strong>을 구현합니다.</p><hr><h3 id=4-250-자-개요>4️⃣ 250 자 개요<a hidden class=anchor aria-hidden=true href=#4-250-자-개요>#</a></h3><p>Service Registry 는 <strong>동적 서비스 위치 관리와 서비스 검색을 지원</strong>하는 아키텍처 구성 요소입니다. 마이크로서비스 환경에서 서비스 인스턴스는 시작, 중단 시 registry 에 등록/해제되며, registry 는 해당 정보를 캐싱 및 유지관리합니다. 클라이언트는 이를 조회해 최신 위치를 알아내고, 요청을 전송합니다. Consul, Eureka, etcd, Zookeeper 같은 오픈소스 솔루션을 사용하며, 형태는 <strong>Self- 등록 방식</strong>이나 <strong>3rd-party 등록 방식</strong>으로 나뉩니다. 뛰어난 가용성을 유지하는 것이 운영 상 핵심 요소입니다.</p><hr><h3 id=5--핵심-개념--및-실무-연관성>5️⃣ " 핵심 개념 " 및 실무 연관성<a hidden class=anchor aria-hidden=true href=#5--핵심-개념--및-실무-연관성>#</a></h3><ul><li><strong>등록 (Registration)</strong>: 서비스 시작 시 네트워크 위치 (IP/포트), 메타데이터, 헬스 체크 URL 등 자체 등록 (<a href="https://www.linkedin.com/pulse/navigating-microservices-landscape-comparative-analysis-armin-shoughi-mslrf?utm_source=chatgpt.com" title="A Comparative Analysis of Consul and Eureka - LinkedIn">LinkedIn</a>).</li><li><strong>Heartbeat/Deregistration</strong>: 주기적 갱신과 Timeout 기반 자동 삭제 (<a href="https://learn.microsoft.com/en-us/dotnet/architecture/microservices/architect-microservice-container-applications/microservices-addressability-service-registry?utm_source=chatgpt.com" title="Microservices addressability and the service registry -.NET">Microsoft Learn</a>).</li><li><strong>Discover(Discovery)</strong>: 클라이언트는 registry API 또는 DNS 인터페이스를 통해 서비스 위치를 탐색 (<a href="https://developer.hashicorp.com/consul/docs/use-case/service-discovery?utm_source=chatgpt.com" title="Service Discovery Explained | Consul - HashiCorp Developer">developer.hashicorp.com</a>).</li><li><strong>건강상태 관리</strong>: Registry 는 헬스 체크를 수행하여 서비스 상태 유지.</li><li><strong>고가용성 요구</strong>: 장애 시 캐시 또는 클러스터로 빠르게 복구할 수 있도록 설계 필요.</li></ul><hr><h3 id=6-배경-및-필요성-목적>6️⃣ 배경 및 필요성 (목적)<a hidden class=anchor aria-hidden=true href=#6-배경-및-필요성-목적>#</a></h3><ul><li><strong>동적 환경 대응</strong>: 컨테이너와 인스턴스가 수시로 할당·삭제되는 환경에서 위치 추적 필요.</li><li><strong>Hard-coding 방지</strong>: 네트워크 주소 변경에 대한 유연한 처리, 운영자 부담 감소.</li><li><strong>자동 확장과 로드밸런싱 지원</strong>: 서비스 인스턴스 수에 따라 자동으로 분산 로드 기능 가능.</li></ul><hr><h3 id=7-주요-기능-및-역할>7️⃣ 주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#7-주요-기능-및-역할>#</a></h3><table><thead><tr><th>기능</th><th>설명</th></tr></thead><tbody><tr><td>서비스 등록/등록해제</td><td>service-name + instance metadata 등록</td></tr><tr><td>헬스 체크</td><td>상태 확인용 heartbeat/ping</td></tr><tr><td>인스턴스 조회</td><td>client-side/server-side discovery</td></tr><tr><td>메타데이터 저장</td><td>버전, 태그, SLA 정보 가능</td></tr><tr><td>고가용성 유지</td><td>클러스터 기반의 복제 및 상태 일관성</td></tr></tbody></table><hr><h3 id=8-특징>8️⃣ 특징<a hidden class=anchor aria-hidden=true href=#8-특징>#</a></h3><ul><li><strong>Self registration vs 3rd-party registration</strong>: 직접 등록하거나 외부 에이전트 방식. 전자가 단순, 후자가 유연 (<a href="https://microservices.io/patterns/service-registry.html?utm_source=chatgpt.com" title="Pattern: Service registry - Microservices.io">microservices.io</a>, <a href="https://www.baeldung.com/cs/service-discovery-microservices?utm_source=chatgpt.com" title="Service Discovery in Microservices | Baeldung on Computer Science">Baeldung</a>).</li><li><strong>Client-side vs Server-side discovery</strong>: client 가 직접 조회 또는 인프라 레벨 proxy 사용 (<a href="https://developer.hashicorp.com/consul/docs/use-case/service-discovery?utm_source=chatgpt.com" title="Service Discovery Explained | Consul - HashiCorp Developer">developer.hashicorp.com</a>).</li><li><strong>Cacheable data</strong>: 클라이언트는 cache 이용, registry 장애에도 서비스 지속 가능.</li></ul><hr><h3 id=9-핵심-원리-및-작동-방식>9️⃣ 핵심 원리 및 작동 방식<a hidden class=anchor aria-hidden=true href=#9-핵심-원리-및-작동-방식>#</a></h3><pre class=mermaid>sequenceDiagram
  participant S as Service Instance
  participant R as Service Registry
  participant C as Client

  S-&gt;&gt;R: REGISTER(name, ip, port, healthCheckURL)
  loop heartbeat
    S-&gt;&gt;R: RENEW()
  end
  S-&gt;&gt;R: DEREGISTER on shutdown

  C-&gt;&gt;R: LOOKUP(name)
  R--&gt;&gt;C: [ip1,ip2,...]
  C-&gt;&gt;C: Load Balancing &amp; Request
</pre><ul><li><strong>등록</strong> → <strong>Heartbeat</strong> → <strong>탐색 및 호출</strong> → <strong>Load Balancer 적용</strong> 방식으로 운영됨.</li></ul><hr><h3 id=10-구조-및-아키텍처>10️⃣ 구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#10-구조-및-아키텍처>#</a></h3><h4 id=구성-요소>구성 요소<a hidden class=anchor aria-hidden=true href=#구성-요소>#</a></h4><table><thead><tr><th>구성요소</th><th>필수/선택</th><th>역할</th></tr></thead><tbody><tr><td>Registry Server</td><td>필수</td><td>서비스 정보 저장 및 API 제공</td></tr><tr><td>Health Checker</td><td>선택</td><td>서비스 상태 확인</td></tr><tr><td>Cache</td><td>선택</td><td>클라이언트 단 캐시</td></tr><tr><td>Discovery Client</td><td>필수</td><td>인스턴스 조회, 로드밸런싱</td></tr><tr><td>Proxy/Load Balancer</td><td>선택</td><td>서버 측 라우팅 대체</td></tr><tr><td>UI/Dashboard</td><td>선택</td><td>인스턴스 상태 모니터링</td></tr></tbody></table><h4 id=아키텍처-다이어그램>아키텍처 다이어그램<a hidden class=anchor aria-hidden=true href=#아키텍처-다이어그램>#</a></h4><pre class=mermaid>graph LR
  ServiceA --&gt;|REGISTER| Registry
  ServiceB --&gt;|REGISTER| Registry
  Client --&gt;|LOOKUP| Registry
  Client --&gt;|CALL| ServiceA
  Client --&gt;|CALL| ServiceB
  Proxy --&gt;|QUERY| Registry
  Proxy --&gt;|FORWARD| ServiceA
</pre><ul><li>서비스 → Registry</li><li>클라이언트 혹은 Proxy → Registry → 서비스 호출 흐름</li></ul><hr><h3 id=11-구현-기법>11️⃣ 구현 기법<a hidden class=anchor aria-hidden=true href=#11-구현-기법>#</a></h3><ul><li><strong>오픈소스 솔루션</strong>: Consul, Eureka, etcd, Zookeeper, Nacos 등 (<a href="https://stackshare.io/stackups/consul-vs-eureka-vs-zookeeper?utm_source=chatgpt.com" title="Consul vs Eureka vs Zookeeper | What are the differences?">stackshare.io</a>).</li><li><strong>컨테이너 오케스트레이터 내장</strong>: Kubernetes 서비스 DNS, AWS ALB/ECS 등의 native registry.</li><li><strong>Client Library</strong>: e.g., Netflix Eureka Client, Consul Agent, etcd SDK, Spring Cloud DiscoveryClient.</li><li><strong>Heartbeat 구성</strong>: REST PUT 또는 TTL 갱신 메커니즘.</li><li><strong>Cache 이용/자동 Failover</strong>: 클라이언트는 캐시 기반 조회로 트래픽 안정화.</li></ul><hr><h3 id=12-장점>12️⃣ 장점<a hidden class=anchor aria-hidden=true href=#12-장점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>동적 스케일링 지원</td><td>발생한 인스턴스를 자동 인식 후 탐색 가능</td></tr><tr><td></td><td>유연한 주소 관리</td><td>IP 변경/재배포에도 코드 수정 불필요</td></tr><tr><td></td><td>고가용성 지원</td><td>클러스터 방식으로 장애 대응</td></tr><tr><td></td><td>분산 로드밸런싱</td><td>클라이언트 측 분석 후 호출 가능</td></tr><tr><td></td><td>인프라 자동화</td><td>디플로이/스케일링 자동 인프라 연계 가능</td></tr></tbody></table><hr><h3 id=13-단점과-문제점-그리고-해결방안>13️⃣ 단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#13-단점과-문제점-그리고-해결방안>#</a></h3><h4 id=단점-1>단점<a hidden class=anchor aria-hidden=true href=#단점-1>#</a></h4><table><thead><tr><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>싱글 장애 지점</td><td>Registry 장애 시 서비스 접근 불가</td><td>클러스터링 + 복제 구성</td></tr><tr><td>신고 누락</td><td>heartbeat 실패 시 등록된 서비스가 응답 불능</td><td>TTL 짧게 설정 + health check 강화</td></tr><tr><td>클라이언트 의존</td><td>모든 클라이언트에서 조회 로직 구현 필요</td><td>sidecar 또는 proxy 아키텍처 도입</td></tr><tr><td>데이터 불일치</td><td>캐시된 stale 정보 활용</td><td>cache TTL 조정, registry push 도입</td></tr></tbody></table><h4 id=문제점-1>문제점<a hidden class=anchor aria-hidden=true href=#문제점-1>#</a></h4><table><thead><tr><th>항목</th><th>원인</th><th>영향</th><th>탐지</th><th>예방</th><th>해결</th></tr></thead><tbody><tr><td>stale entries</td><td>heartbeat timeout 지연</td><td>요청 실패</td><td>로그, latency 증가</td><td>health check 주기 단축</td><td>TTL 자동 제거</td></tr><tr><td>burst 조회</td><td>클라이언트 동시 lookup</td><td>CPU/메모리 과부하</td><td>metrics 모니터링</td><td>cache-triggered lookup</td><td>circuit breaker 적용</td></tr><tr><td>registry overload</td><td>대량 인스턴스 등록</td><td>응답 느림</td><td>registry 메트릭</td><td>auto-scale registry</td><td>분산 shard 구성</td></tr></tbody></table><hr><h3 id=14-분류-기준에-따른-종류-및-유형>14️⃣ 분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#14-분류-기준에-따른-종류-및-유형>#</a></h3><table><thead><tr><th>기준</th><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>배포 방식</td><td>Self-registration</td><td>서비스가 직접 등록/갱신</td></tr><tr><td></td><td>3rd-party registration</td><td>에이전트/sidecar 가 등록</td></tr><tr><td>탐색 방식</td><td>Client-side discovery</td><td>클라이언트에서 registry 조회 후 호출</td></tr><tr><td></td><td>Server-side discovery</td><td>Proxy 가 registry 조회 후 라우팅</td></tr><tr><td>저장소 타입</td><td>Key-Value store</td><td>etcd, Consul, etc.</td></tr><tr><td></td><td>DNS 기반</td><td>Kubernetes DNS, SRV record 활용</td></tr></tbody></table><hr><h3 id=15-실무-사용-예시>15️⃣ 실무 사용 예시<a hidden class=anchor aria-hidden=true href=#15-실무-사용-예시>#</a></h3><table><thead><tr><th>도구</th><th>활용 목적</th><th>효과</th></tr></thead><tbody><tr><td>Eureka + Spring Cloud</td><td>AWS 마이크로서비스 중간 계층 서비스 관리</td><td>자동 로드밸런싱, 장애 복원</td></tr><tr><td>Consul + Envoy sidecar</td><td>서비스 메시와 헬스 체크 관리</td><td>추상화된 discovery, 보안 연결</td></tr><tr><td>Kubernetes Service DNS</td><td>컨테이너 기반 자동 IP 추적</td><td>네이티브 서비스 매핑, no-registry 오버헤드</td></tr></tbody></table><hr><h3 id=16-활용-사례-대규모-전자상거래-플랫폼>16️⃣ 활용 사례: 대규모 전자상거래 플랫폼<a hidden class=anchor aria-hidden=true href=#16-활용-사례-대규모-전자상거래-플랫폼>#</a></h3><ul><li>구축: Consul cluster + Envoy sidecar proxy 통합</li><li>구조:<ul><li>서비스 인스턴스: 컨테이너 혹은 VM 에 설치된 Consul client</li><li>sidecar Envoy → Consul 서비스 디스커버리로 라우팅</li></ul></li><li>장점:<ul><li>IP 변경과 스케일링 자동 대응</li><li>TLS, ACL, service-to-service 인증 가능</li><li>캐시 PU 로 성능 문제 해결</li></ul></li></ul><hr><h3 id=17-구현-예시-python-slack-microservice>17️⃣ 구현 예시 (Python slack-microservice)<a hidden class=anchor aria-hidden=true href=#17-구현-예시-python-slack-microservice>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2>2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3>3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4>4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5>5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6>6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7>7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8>8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>consul</span> <span class=kn>import</span> <span class=n>Consul</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>socket</span><span class=o>,</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>c</span> <span class=o>=</span> <span class=n>Consul</span><span class=p>(</span><span class=n>host</span><span class=o>=</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>8500</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>sid</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>gethostname</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>c</span><span class=o>.</span><span class=n>agent</span><span class=o>.</span><span class=n>service</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=s1>&#39;ordersvc&#39;</span><span class=p>,</span> <span class=n>sid</span><span class=p>,</span> <span class=n>address</span><span class=o>=</span><span class=s1>&#39;10.0.0.5&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>5000</span><span class=p>,</span> <span class=n>tags</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;v1&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>c</span><span class=o>.</span><span class=n>agent</span><span class=o>.</span><span class=n>check</span><span class=o>.</span><span class=n>pass_service_check</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;service:</span><span class=si>{</span><span class=n>sid</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>Service 등록 + TTL 체크</li><li>deregistration, lookup 기능은 Consul client 활용 코드 예외 적용 가능</li></ul><hr><h3 id=18-실무-적용-고려사항>18️⃣ 실무 적용 고려사항<a hidden class=anchor aria-hidden=true href=#18-실무-적용-고려사항>#</a></h3><table><thead><tr><th>고려사항</th><th>설명</th><th>권장 방식</th></tr></thead><tbody><tr><td>고가용성</td><td>Registry 단일 장애점 제거</td><td>cluster + replication</td></tr><tr><td>보안</td><td>서비스 및 registry 통신 보호</td><td>TLS, ACL, IAM 적용</td></tr><tr><td>캐시 정책</td><td>stale 데이터 최소화</td><td>짧은 TTL + 캐시 invalidation</td></tr><tr><td>모니터링</td><td>registry 와 clients 상태 모니터링</td><td>Prometheus, Grafana</td></tr><tr><td>CI/CD 연계</td><td>서비스 배포와 등록 자동화</td><td>Helm, Terraform 활용</td></tr></tbody></table><hr><h3 id=19-최적화-고려사항>19️⃣ 최적화 고려사항<a hidden class=anchor aria-hidden=true href=#19-최적화-고려사항>#</a></h3><table><thead><tr><th>항목</th><th>고려사항</th><th>권장안마</th></tr></thead><tbody><tr><td>heartbeat 주기</td><td>너무 짧으면 부하 발생</td><td>10–30 초 수준 권장</td></tr><tr><td>cache TTL</td><td>긴 캐시는 stale 위험</td><td>60 초 이하로 설정</td></tr><tr><td>클러스터 크기</td><td>인스턴스당 registry 요청 많음</td><td>scale-out 고려</td></tr><tr><td>파티션 등록</td><td>많은 서비스 환경에서</td><td>shard 기반 구조 고려</td></tr></tbody></table><hr><h3 id=-기타-사항>✨ 기타 사항<a hidden class=anchor aria-hidden=true href=#-기타-사항>#</a></h3><ul><li><strong>서비스 메시 (Service Mesh)</strong>: Istio, Linkerd 는 registry + sidecar proxy 기반 서비스 discovery 제공.</li><li><strong>API Schema Registry</strong>: Red Hat Service Registry 는 API 스키마 저장소로도 확장 가능 (<a href="https://www.f5.com/fr_fr/company/blog/nginx/service-discovery-in-a-microservices-architecture?utm_source=chatgpt.com" title="Service Discovery in a Microservices Architecture - F5">f5.com</a>, <a href="https://en.wikipedia.org/wiki/Microservices?utm_source=chatgpt.com" title=Microservices>위키백과</a>, <a href="https://www.getambassador.io/blog/service-discovery-microservices?utm_source=chatgpt.com" title="Effective Service Discovery Strategies for Microservices Architectures">getambassador.io</a>, <a href="https://learn.microsoft.com/en-us/dotnet/architecture/microservices/architect-microservice-container-applications/microservices-addressability-service-registry?utm_source=chatgpt.com" title="Microservices addressability and the service registry -.NET">Microsoft Learn</a>, <a href="https://microservices.io/patterns/service-registry.html?utm_source=chatgpt.com" title="Pattern: Service registry - Microservices.io">microservices.io</a>, <a href="https://www.linkedin.com/pulse/navigating-microservices-landscape-comparative-analysis-armin-shoughi-mslrf?utm_source=chatgpt.com" title="A Comparative Analysis of Consul and Eureka - LinkedIn">LinkedIn</a>, <a href="https://www.redhat.com/en/topics/integration/what-is-a-service-registry?utm_source=chatgpt.com" title="What is a service registry? - Red Hat">redhat.com</a>).</li></ul><hr><h3 id=-요약-주목할-내용>🔟 요약: 주목할 내용<a hidden class=anchor aria-hidden=true href=#-요약-주목할-내용>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>Discovery 방식</td><td>Client vs Server DISC</td><td>서비스 호출 위치관리 방법</td><td></td></tr><tr><td>등록 방식</td><td>Self vs 3rd-party reg</td><td>등록 책임 및 구현 방식 차이</td><td></td></tr><tr><td>고가용성</td><td>클러스터 구성</td><td>장애·확장 대응 설계</td><td></td></tr><tr><td>서비스 메시</td><td>Sidecar 기반 proxy</td><td>디커플링된 discovery 환경 구현</td><td></td></tr><tr><td>보안</td><td>TLS, ACL</td><td>인증·인가 통한 안전한 통신</td><td></td></tr></tbody></table><hr><h3 id=-반드시-학습해야-할-내용>🧠 반드시 학습해야 할 내용<a hidden class=anchor aria-hidden=true href=#-반드시-학습해야-할-내용>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>시스템 설계</td><td>Consul, Eureka, etcd, Zookeeper</td><td>주요 구현 도구 특징</td><td></td></tr><tr><td>패턴</td><td>Service Discovery Pattern</td><td>탐색 전략 및 이벤트 흐름</td><td></td></tr><tr><td>인프라</td><td>Kubernetes DNS</td><td>기본 내장 레지스트리 기능</td><td></td></tr><tr><td>보안</td><td>TLS, ACL, IAM</td><td>확실한 운영 체계 확보를 위한 보안 옵션</td><td></td></tr></tbody></table><hr><h3 id=-용어-정리>📚 용어 정리<a hidden class=anchor aria-hidden=true href=#-용어-정리>#</a></h3><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>개념</td><td>Service Registry</td><td>서비스 인스턴스 탐색 중앙장치</td></tr><tr><td>패턴</td><td>Client-side discovery</td><td>클라이언트 기반 탐색</td></tr><tr><td>패턴</td><td>Server-side discovery</td><td>프록시 기반 탐색</td></tr><tr><td>도구</td><td>Sidecar</td><td>서비스 인스턴스 옆에 주입되는 보조 프록시</td></tr><tr><td>엔드포인트</td><td>TTL</td><td>등록 유지 시간</td></tr><tr><td>메커니즘</td><td>Heartbeat</td><td>상태 갱신용 ping</td></tr></tbody></table><hr><h3 id=-참고-및-출처>✅ 참고 및 출처<a hidden class=anchor aria-hidden=true href=#-참고-및-출처>#</a></h3><ul><li><a href=https://www.geeksforgeeks.org/system-design/what-is-service-registry-in-microservices/>What is Service Registry? (GeeksforGeeks)</a>(<a href="https://en.wikipedia.org/wiki/Service-oriented_architecture?utm_source=chatgpt.com" title="Service-oriented architecture">위키백과</a>, <a href="https://medium.com/%40josesousa8/service-registry-and-discovery-kubernetes-microservice-communication-36b314fcc06?utm_source=chatgpt.com" title="Service Registry and Discovery: Kubernetes Microservice … - Medium">Medium</a>, <a href="https://www.geeksforgeeks.org/system-design/what-is-service-registry-in-microservices/?utm_source=chatgpt.com" title="What is Service Registry in Microservices? - GeeksforGeeks">GeeksforGeeks</a>)</li><li><a href=https://microservices.io/patterns/service-registry.html>Service registry design pattern (Microservices.io)</a></li><li><a href=https://stackshare.io/stackups/consul-vs-eureka-vs-zookeeper>Consul vs Eureka vs Zookeeper comparisons</a></li><li><a href=https://www.f5.com/>Service discovery in microservices (F5)</a></li><li><a href=https://getambassador.io/blog/service-discovery-microservices>Service discovery strategies (Ambassador.io)</a></li><li><a href=https://www.redhat.com/en/topics/integration/what-is-a-service-registry>Red Hat Service Registry APIs</a></li><li><a href=https://www.baeldung.com/cs/service-discovery-microservices>Service discovery in microservices (Baeldung)</a></li></ul><hr><p>더 깊이 있는 비교나 설정 예시가 필요하시면 언제든 말씀해 주세요!</p><p>이어서 “Service Registry” 주제의 나머지 요구사항들을 충족하는 내용을 아래에 정리합니다.</p><hr><h2 id=20-도전-과제>20️⃣ 도전 과제<a hidden class=anchor aria-hidden=true href=#20-도전-과제>#</a></h2><table><thead><tr><th>카테고리</th><th>도전 과제</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>운영</td><td>Registry 고가용성 구성</td><td>단일 장애 지점</td><td>전체 서비스 장애</td><td>로그 분석, heartbeat 실패</td><td>클러스터 구성, 상태 복제</td><td>리더 선출 알고리즘, 다중 리전</td></tr><tr><td>확장성</td><td>수천 개 인스턴스 관리</td><td>메모리/네트워크 오버헤드</td><td>응답 지연, 장애</td><td>메트릭 기반 감시</td><td>샤딩, TTL 적용</td><td>수평 확장, TTL 캐시</td></tr><tr><td>보안</td><td>서비스 간 인증 부족</td><td>중간자 공격</td><td>데이터 탈취, 스푸핑</td><td>트래픽 분석, audit log</td><td>Mutual TLS, ACL 적용</td><td>SPIFFE/SPIRE 등 인증체계 적용</td></tr><tr><td>데이터 정확성</td><td>stale registry 데이터</td><td>heartbeat 실패</td><td>잘못된 서비스 호출</td><td>상태 조회 불일치</td><td>TTL 정책 강화</td><td>주기적 정리 및 갱신 스케줄링</td></tr></tbody></table><hr><h2 id=21-실무에서-효과적으로-적용하기-위한-고려사항>21️⃣ 실무에서 효과적으로 적용하기 위한 고려사항<a hidden class=anchor aria-hidden=true href=#21-실무에서-효과적으로-적용하기-위한-고려사항>#</a></h2><table><thead><tr><th>고려사항</th><th>설명</th><th>권장 사항</th></tr></thead><tbody><tr><td>장애 복원</td><td>Registry 실패 시 fallback 필요</td><td>클러스터링 및 health monitoring</td></tr><tr><td>서비스 탐색 방식</td><td>Client-side vs Server-side</td><td>서비스 메시와 병행 설계 고려</td></tr><tr><td>데이터 TTL 관리</td><td>Stale data 방지</td><td>적절한 heartbeat 주기 설정</td></tr><tr><td>통합</td><td>CI/CD 연계 필요</td><td>배포 시 자동 등록 설정</td></tr><tr><td>모니터링</td><td>상태, 트래픽, 실패율 모니터링</td><td>Prometheus + Grafana 설정 권장</td></tr></tbody></table><hr><h2 id=22-최적화하기-위한-고려사항-및-주의할-점>22️⃣ 최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#22-최적화하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>고려사항</th><th>설명</th><th>권장 사항</th></tr></thead><tbody><tr><td>Lookup Latency</td><td>빠른 조회 제공</td><td>클라이언트 캐싱 활성화</td></tr><tr><td>Registration Delay</td><td>배포 지연 없이 동작</td><td>비동기 등록 처리</td></tr><tr><td>Cluster Scaling</td><td>서비스 증가 대비</td><td>Horizontal scaling 고려</td></tr><tr><td>캐시 TTL</td><td>적정 TTL 설정</td><td>서비스 특성에 따라 조절</td></tr><tr><td>Metrics 수집</td><td>Discovery 성능 모니터링</td><td>Histogram/summary 지표 활용</td></tr></tbody></table><hr><h2 id=권장사항-요약>권장사항 요약<a hidden class=anchor aria-hidden=true href=#권장사항-요약>#</a></h2><ul><li>Registry는 <strong>3개 이상 복제본 구성</strong>으로 리더 장애 대비</li><li><strong>Short TTL + Passive health check</strong> 조합 사용</li><li>서비스 시작 시 <strong>동기 등록 + 상태 확인 후 ready 신호</strong></li><li>서비스 메시와 병행 시 registry-agnostic 구조 적용</li></ul><hr><h2 id=-요약-정리>✅ 요약 정리<a hidden class=anchor aria-hidden=true href=#-요약-정리>#</a></h2><p>Service Registry는 <strong>동적 마이크로서비스 환경에서 위치 관리 및 탐색 기능을 담당하는 핵심 인프라</strong>입니다. 구현 시 고가용성, 보안, 데이터 정확성 등을 고려한 아키텍처 설계가 필요하며, Consul, Eureka, etcd 등 다양한 도구들이 사용됩니다. <strong>Client/Server-side discovery 방식</strong>과 <strong>self vs external registration</strong> 전략에 따라 활용 방식이 달라집니다. 실무에선 Registry의 장애 복원성과 TTL 기반 캐시 관리 전략이 안정성 확보의 핵심입니다.</p><hr><p>이어서 <strong>실무 사용 예시, 활용 사례, 구현 예시</strong> 중심으로 “Service Registry”에 대해 작성하겠습니다.</p><hr><h2 id=16-실무-사용-예시>16️⃣ 실무 사용 예시<a hidden class=anchor aria-hidden=true href=#16-실무-사용-예시>#</a></h2><table><thead><tr><th>사용 목적</th><th>통합 대상</th><th>효과</th><th>설명</th></tr></thead><tbody><tr><td>서비스 디스커버리 자동화</td><td>Spring Cloud + Netflix Eureka</td><td>자동 등록/탐색</td><td>서비스 인스턴스가 시작되면 Eureka에 자동 등록되며 클라이언트는 레지스트리에서 위치 조회</td></tr><tr><td>서비스 메시 통합</td><td>Istio + Envoy + Consul</td><td>L7 라우팅, TLS 인증</td><td>Consul이 Service Registry로 작동하며 Envoy가 이를 기반으로 트래픽 분산</td></tr><tr><td>동적 설정</td><td>Kubernetes + CoreDNS</td><td>서비스 이름 기반 통신</td><td>DNS를 통해 서비스 IP를 동적으로 할당, 외부 registry 없이 서비스 디스커버리 구현</td></tr><tr><td>장애 복구 시 인스턴스 재등록</td><td>etcd + gRPC</td><td>고가용성 클러스터 관리</td><td>etcd는 상태 저장을 포함한 registry로 사용되며 leader election과 연결되어 장애 복구 가능</td></tr></tbody></table><hr><h2 id=17-활용-사례>17️⃣ 활용 사례<a hidden class=anchor aria-hidden=true href=#17-활용-사례>#</a></h2><h3 id=-사례-netflix의-eureka-기반-microservice-등록탐색-구조>🎯 사례: Netflix의 Eureka 기반 Microservice 등록/탐색 구조<a hidden class=anchor aria-hidden=true href=#-사례-netflix의-eureka-기반-microservice-등록탐색-구조>#</a></h3><ul><li><p><strong>사용된 Registry</strong>: Eureka</p></li><li><p><strong>구성 요소</strong>: Spring Boot 서비스들, Eureka Server, Ribbon (Client-side load balancing)</p></li><li><p><strong>Registry의 역할</strong>:</p><ul><li>서비스 인스턴스는 부트스트랩 시 Eureka에 자신을 등록</li><li>다른 서비스는 Eureka에서 인스턴스를 조회하고 Ribbon으로 부하 분산 수행</li><li>Health Check 실패 시 registry에서 자동 제거</li></ul></li></ul><pre class=mermaid>sequenceDiagram
    participant User
    participant Gateway
    participant Eureka
    participant Service-A
    participant Service-B

    Gateway-&gt;&gt;Eureka: Service-B 위치 조회
    Eureka--&gt;&gt;Gateway: Service-B 인스턴스 목록
    Gateway-&gt;&gt;Service-B: 요청 전달
    Service-A-&gt;&gt;Eureka: 등록 + heartbeat
    Eureka--&gt;&gt;Service-A: 등록 완료 응답
</pre><ul><li><p><strong>Registry 유무에 따른 차이점</strong>:</p><ul><li>❌ 없는 경우: 고정 IP/포트 설정, 유연성 저하</li><li>✅ 있는 경우: 위치 추상화 + 자동 장애 복구 가능</li></ul></li></ul><hr><h2 id=18-구현-예시-nodejs--consul>18️⃣ 구현 예시 (Node.js + Consul)<a hidden class=anchor aria-hidden=true href=#18-구현-예시-nodejs--consul>#</a></h2><p>Consul Agent가 서비스 인스턴스를 registry에 등록하고, 다른 서비스가 해당 정보를 통해 통신하는 방식입니다.</p><h3 id=-서비스-등록-nodejs>📌 서비스 등록 (Node.js)<a hidden class=anchor aria-hidden=true href=#-서비스-등록-nodejs>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15>15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16>16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17>17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// registerService.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>consul</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;consul&#39;</span><span class=p>)();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>serviceId</span> <span class=o>=</span> <span class=sb>`service-a-</span><span class=si>${</span><span class=nx>process</span><span class=p>.</span><span class=nx>pid</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>consul</span><span class=p>.</span><span class=nx>agent</span><span class=p>.</span><span class=nx>service</span><span class=p>.</span><span class=nx>register</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>id</span><span class=o>:</span> <span class=nx>serviceId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;service-a&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>address</span><span class=o>:</span> <span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>port</span><span class=o>:</span> <span class=mi>3000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>check</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>http</span><span class=o>:</span> <span class=s1>&#39;http://127.0.0.1:3000/health&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>interval</span><span class=o>:</span> <span class=s1>&#39;10s&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>timeout</span><span class=o>:</span> <span class=s1>&#39;5s&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=nx>err</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=k>throw</span> <span class=nx>err</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Service A registered in Consul&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=-서비스-디스커버리>📌 서비스 디스커버리<a hidden class=anchor aria-hidden=true href=#-서비스-디스커버리>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2>2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3>3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4>4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5>5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6>6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// discoverService.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>consul</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;consul&#39;</span><span class=p>)();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>consul</span><span class=p>.</span><span class=nx>catalog</span><span class=p>.</span><span class=nx>service</span><span class=p>.</span><span class=nx>nodes</span><span class=p>(</span><span class=s1>&#39;service-a&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>result</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=k>throw</span> <span class=nx>err</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Discovered service-a instances:&#39;</span><span class=p>,</span> <span class=nx>result</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>이 코드는 Consul Agent에 REST API로 서비스 등록을 수행하며, health check 실패 시 자동으로 제거됩니다.</p></blockquote><hr><h2 id=19-도전-과제>19️⃣ 도전 과제<a hidden class=anchor aria-hidden=true href=#19-도전-과제>#</a></h2><table><thead><tr><th>카테고리</th><th>도전 과제</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방안</th></tr></thead><tbody><tr><td>Registry 이중화</td><td>단일 노드 장애</td><td>전체 서비스 위치 탐색 실패</td><td>장애 감지 지연</td><td>리더-팔로워 클러스터 구성</td><td>Consul/Nacos 클러스터</td><td></td></tr><tr><td>보안</td><td>무단 등록</td><td>스푸핑 가능</td><td>audit log 확인</td><td>인증 + TLS</td><td>ACL 또는 SPIFFE 적용</td><td></td></tr><tr><td>성능</td><td>과도한 Heartbeat</td><td>CPU/RAM 사용 증가</td><td>메트릭 분석</td><td>동적 조절</td><td>Adaptive TTL</td><td></td></tr></tbody></table><hr><h2 id=20-분류-기준에-따른-종류-및-유형>20️⃣ 분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#20-분류-기준에-따른-종류-및-유형>#</a></h2><table><thead><tr><th>분류 기준</th><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>구현 방식</td><td>Embedded / External</td><td>Spring Cloud Eureka (Embedded), Consul (External Agent)</td></tr><tr><td>탐색 방식</td><td>Client-side / Server-side</td><td>Ribbon (Client), Istio (Sidecar proxy 기반 Server-side)</td></tr><tr><td>저장소 타입</td><td>In-Memory / Persistent</td><td>Eureka는 메모리 기반, etcd는 지속성 제공</td></tr><tr><td>상태 관리</td><td>Static / Dynamic</td><td>일부는 고정 IP 기반, 대부분은 Heartbeat 기반 동적 등록</td></tr></tbody></table><hr><p>이어서 <strong>최적화 고려사항, 실무 적용 고려사항, 반드시 학습해야 할 내용, 용어 정리, 참고 및 출처</strong>까지 순차적으로 정리합니다.</p><hr><h2 id=21-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>21️⃣ 실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#21-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>권장 사항</th></tr></thead><tbody><tr><td>구성 전략</td><td>Registry 이중화</td><td>단일 장애점(SPoF)을 방지하기 위한 클러스터링 필요</td><td>최소 3개의 노드 구성 (Consul/etcd)</td></tr><tr><td>보안 설정</td><td>인증 및 암호화</td><td>서비스 등록·조회 API에 무단 접근 방지 필요</td><td>TLS + mTLS, ACL 적용</td></tr><tr><td>동기화 관리</td><td>등록 정보 TTL 관리</td><td>TTL(시간 초과) 설정 미흡 시 장애 탐지 지연</td><td>heartbeat interval + deregister timeout 조정</td></tr><tr><td>장애 복구</td><td>Self-healing 설계</td><td>등록 서비스 죽은 후 자동 복구 설계</td><td>Kubernetes Liveness Probe + 재등록 로직 포함</td></tr></tbody></table><hr><h2 id=22-최적화하기-위한-고려사항-및-주의할-점-1>22️⃣ 최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#22-최적화하기-위한-고려사항-및-주의할-점-1>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>권장 사항</th></tr></thead><tbody><tr><td>성능</td><td>Registry 읽기 최적화</td><td>조회 요청이 빈번한 경우 부하 집중</td><td>캐싱 또는 read-replica 구성</td></tr><tr><td>용량</td><td>등록 인스턴스 수 관리</td><td>수천 개 이상 등록 시 레지스트리 성능 저하 가능</td><td>서비스 그룹화 및 TTL 정책 강화</td></tr><tr><td>네트워크</td><td>heartbeat 빈도</td><td>너무 짧으면 부하 증가, 너무 길면 장애 인식 지연</td><td>일반적으로 10~30초 간격 추천</td></tr><tr><td>장애 격리</td><td>독립된 레지스트리 인스턴스</td><td>시스템 구성 오류가 전체 마이크로서비스에 영향</td><td>도메인 별 분리 구성 (Consul datacenter 구분)</td></tr></tbody></table><hr><h2 id=23-반드시-학습해야-할-내용>23️⃣ 반드시 학습해야 할 내용<a hidden class=anchor aria-hidden=true href=#23-반드시-학습해야-할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>시스템 설계</td><td>서비스 디스커버리 패턴</td><td>클라이언트/서버 사이드 방식</td><td>Registry 기반 구조와 DNS 방식 비교</td></tr><tr><td>DevOps</td><td>고가용성 구성</td><td>Consul/etcd 클러스터 구성법</td><td>장애 발생 시 자동 복구 전략 필수 학습</td></tr><tr><td>네트워크</td><td>Health Check</td><td>TCP/HTTP 기반 상태 검증 방법</td><td>서비스의 생존 여부를 판단하는 핵심 기준</td></tr><tr><td>보안</td><td>Service Identity</td><td>SPIFFE, mTLS, ACL 등</td><td>서비스 간 인증 및 접근 제어 기법 이해</td></tr></tbody></table><hr><h2 id=24-주제와-관련하여-주목할-내용>24️⃣ 주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#24-주제와-관련하여-주목할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>서비스 메시와 레지스트리</td><td>Istio+Consul 연동</td><td>Proxy가 Registry를 통해 동적으로 라우팅</td></tr><tr><td>분산 시스템</td><td>Consistency & TTL</td><td>TTL 설정 중요성</td><td>너무 길면 장애 전파, 너무 짧으면 과도한 deregistration</td></tr><tr><td>클라우드 네이티브</td><td>Kubernetes DNS 기반 서비스 등록</td><td>ClusterIP 방식</td><td>별도 registry 없이 CoreDNS가 수행함</td></tr><tr><td>마이크로서비스 운영</td><td>상태 변화 대응</td><td>자동 재등록</td><td>장애 발생 시 heartbeat 기반 재시작 또는 재등록 필요</td></tr></tbody></table><hr><h2 id=용어-정리-1>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-1>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>Service Discovery</td><td>Registry</td><td>서비스 위치(IP, 포트 등)를 등록·조회하는 저장소</td></tr><tr><td>Consul</td><td>Agent</td><td>서비스 인스턴스를 등록·조회하는 Consul 클라이언트</td></tr><tr><td>Health Check</td><td>TTL</td><td>서비스 상태를 주기적으로 검증하기 위한 생존 주기 설정</td></tr><tr><td>시스템 설계</td><td>SPOF (Single Point of Failure)</td><td>단일 장애 지점. 고가용성을 위해 반드시 제거해야 함</td></tr><tr><td>보안</td><td>ACL (Access Control List)</td><td>특정 서비스에 대한 접근 권한을 제어하는 메커니즘</td></tr></tbody></table><hr><h2 id=참고-및-출처-1>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-1>#</a></h2><ul><li><a href=https://microservices.io/patterns/service-registry.html>Service Registry Pattern - microservices.io</a></li><li><a href=https://www.consul.io/docs/discovery>Consul 공식 문서 (Service Discovery)</a></li><li><a href=https://github.com/Netflix/eureka/wiki>Netflix Eureka Docs</a></li><li><a href=https://kubernetes.io/docs/concepts/services-networking/service/>Kubernetes DNS 기반 서비스 디스커버리</a></li><li><a href=https://developer.hashicorp.com/consul/docs/discovery/checks>Consul Health Checks</a></li></ul><hr><p>다음은 요청하신 두 가지 비교 주제에 대한 정리입니다:</p><hr><h2 id=-service-registry-vs-service-mesh>✅ Service Registry vs Service Mesh<a hidden class=anchor aria-hidden=true href=#-service-registry-vs-service-mesh>#</a></h2><p><strong>비교 목적</strong>: 둘 다 마이크로서비스 아키텍처에서 서비스 간 통신을 관리하지만, 역할과 책임, 구현 방식이 다름.</p><table><thead><tr><th>항목</th><th>Service Registry</th><th>Service Mesh</th></tr></thead><tbody><tr><td><strong>주요 역할</strong></td><td>서비스 등록/탐색 (Service Discovery)</td><td>서비스 간 통신 제어 (라우팅, 보안, 가시성 등)</td></tr><tr><td><strong>구현 위치</strong></td><td>보통 중앙 집중형 또는 분산형 Registry (예: Consul, Eureka)</td><td>사이드카(Proxy) 패턴 (예: Envoy in Istio)</td></tr><tr><td><strong>구성 방식</strong></td><td>클라이언트가 직접 Registry에 등록하고 조회</td><td>데이터 플레인(Proxy)이 자동으로 등록 및 통신</td></tr><tr><td><strong>통신 방식</strong></td><td>주로 클라이언트 사이드 로드 밸런싱</td><td>프록시 기반 로드 밸런싱 및 제어</td></tr><tr><td><strong>부가 기능</strong></td><td>Health Check, TTL, 서비스 정보 관리</td><td>트래픽 제어, 보안(mTLS), 인증, Telemetry</td></tr><tr><td><strong>운영 복잡도</strong></td><td>상대적으로 단순</td><td>상대적으로 복잡 (예: Istio 설치 및 구성)</td></tr><tr><td><strong>통합 예시</strong></td><td>Consul + gRPC</td><td>Istio + Consul + Kubernetes</td></tr></tbody></table><p><strong>정리</strong>:</p><ul><li><em>Service Registry</em>는 <strong>주소 관리</strong> 중심.</li><li><em>Service Mesh</em>는 <strong>통신 제어 및 관찰성</strong> 중심.</li><li>Istio 같은 Mesh는 내부적으로 Registry 역할도 포함.</li></ul><hr><h2 id=-dynamic-registration-vs-static-registration>✅ Dynamic Registration vs Static Registration<a hidden class=anchor aria-hidden=true href=#-dynamic-registration-vs-static-registration>#</a></h2><table><thead><tr><th>항목</th><th>Dynamic Registration</th><th>Static Registration</th></tr></thead><tbody><tr><td><strong>등록 방식</strong></td><td>서비스가 실행 시 직접 자신을 등록</td><td>운영자가 수동으로 서비스 위치를 설정</td></tr><tr><td><strong>자동화 수준</strong></td><td>높음 (서비스 라이프사이클에 따라 자동 등록/해제)</td><td>낮음 (변경 시 수동 갱신 필요)</td></tr><tr><td><strong>장애 대응력</strong></td><td>뛰어남 (서비스 다운 시 자동 제거)</td><td>낮음 (등록 상태 반영 지연)</td></tr><tr><td><strong>예시 시스템</strong></td><td>Consul, Eureka, etcd, Nacos</td><td>Kubernetes ConfigMap, static DNS, manual Nginx upstream</td></tr><tr><td><strong>유지보수</strong></td><td>자동화로 관리 비용 감소</td><td>수동 변경 관리 필요 (오류 위험 증가)</td></tr><tr><td><strong>보안 고려</strong></td><td>인증된 등록 필요</td><td>외부 변경 제한 가능</td></tr></tbody></table><p><strong>정리</strong>:</p><ul><li><em>Dynamic 방식</em>은 <strong>서비스가 스스로 등록/해제</strong>하는 구조로 마이크로서비스 환경에 적합.</li><li><em>Static 방식</em>은 <strong>단순한 환경</strong>이나 변화가 적은 시스템에서 적합.</li></ul><hr><h3 id=-보충-도식-동적-등록-vs-정적-등록-흐름>📌 보충 도식: 동적 등록 vs 정적 등록 흐름<a hidden class=anchor aria-hidden=true href=#-보충-도식-동적-등록-vs-정적-등록-흐름>#</a></h3><pre class=mermaid>flowchart LR
  subgraph Dynamic Registration
    Svc1[&#34;Service A&#34;]
    Registry1[&#34;Service Registry&#34;]
    Svc1 --&gt;|Startup| Registry1
    Registry1 --&gt;|Discover| Client1[&#34;Client&#34;]
  end

  subgraph Static Registration
    StaticConfig[&#34;Manual Config&#34;]
    Registry2[&#34;Static Registry&#34;]
    StaticConfig --&gt; Registry2
    Client2[&#34;Client&#34;] --&gt; Registry2
  end
</pre><p><strong>설명</strong>:</p><ul><li>Dynamic: 서비스가 실행 시 직접 registry에 등록하고, 클라이언트는 실시간 탐색.</li><li>Static: 운영자가 미리 정의한 서비스 정보를 registry에 수동으로 넣고 클라이언트가 조회.</li></ul><hr><p>다음은 요청하신 두 항목에 대해 기술적 비교와 동작 원리를 분석한 정리입니다:</p><hr><h2 id=-dns-기반-서비스-디스커버리-vs-registry-기반-서비스-디스커버리>✅ DNS 기반 서비스 디스커버리 vs Registry 기반 서비스 디스커버리<a hidden class=anchor aria-hidden=true href=#-dns-기반-서비스-디스커버리-vs-registry-기반-서비스-디스커버리>#</a></h2><table><thead><tr><th>항목</th><th>DNS 기반</th><th>Registry 기반</th></tr></thead><tbody><tr><td><strong>기본 원리</strong></td><td>서비스 이름을 DNS 이름으로 등록 후, DNS 질의로 IP 획득</td><td>중앙 서비스 레지스트리에 등록/조회</td></tr><tr><td><strong>예시 기술</strong></td><td>Kubernetes DNS, CoreDNS, Route53</td><td>Consul, Eureka, Zookeeper, etcd</td></tr><tr><td><strong>등록 방식</strong></td><td>보통 Static 혹은 Kubernetes 등과 통합되어 자동 등록</td><td>서비스가 API 또는 Agent로 직접 등록</td></tr><tr><td><strong>조회 방식</strong></td><td>DNS 질의 (<code>A</code>, <code>SRV</code> 레코드 등)</td><td>API 호출 방식 (<code>/services/my-service</code>)</td></tr><tr><td><strong>로드 밸런싱</strong></td><td>기본적으로 Round-robin (DNS 수준)</td><td>Client-side Load Balancer 또는 Smart Router 연동 가능</td></tr><tr><td><strong>TTL 및 업데이트 반영</strong></td><td>TTL에 의존 (변경 반영 지연 가능)</td><td>실시간 상태 변경 반영 가능 (예: TTL, Heartbeat)</td></tr><tr><td><strong>내결함성</strong></td><td>DNS Caching 이슈 존재</td><td>고가용성 클러스터 구성 가능</td></tr><tr><td><strong>운영 복잡도</strong></td><td>단순 (기존 시스템과 호환성 높음)</td><td>복잡 (서비스 등록/상태 관리 필요)</td></tr></tbody></table><p><strong>정리</strong>:</p><ul><li>DNS 기반은 <strong>간단하고 범용적이지만 지연과 기능 한계</strong>가 있음.</li><li>Registry 기반은 <strong>동적이고 유연한 통합</strong>이 가능하지만 <strong>운영 복잡도 증가</strong>.</li></ul><hr><h2 id=-sidecar-registry-sync-동기화-방식-istio--consul-연계-기준>✅ Sidecar Registry Sync 동기화 방식 (Istio + Consul 연계 기준)<a hidden class=anchor aria-hidden=true href=#-sidecar-registry-sync-동기화-방식-istio--consul-연계-기준>#</a></h2><p>Istio는 기본적으로 Kubernetes 환경에 최적화되어 있으나, 외부 서비스 디스커버리 시스템(예: Consul)과도 연계할 수 있습니다. 이때 <strong>Istio Control Plane (Pilot)</strong> 이 Consul Registry의 데이터를 <strong>자동으로 동기화</strong>합니다.</p><h3 id=-동작-흐름>🔹 동작 흐름<a hidden class=anchor aria-hidden=true href=#-동작-흐름>#</a></h3><pre class=mermaid>sequenceDiagram
    participant Consul as Consul Agent
    participant IstioAgent as Istio Agent (Sidecar)
    participant Pilot as Istio Pilot (Control Plane)
    participant Proxy as Envoy Proxy
    participant App as Application

    App-&gt;&gt;Consul: 서비스 등록 (TTL/Heartbeat)
    loop 주기적 동기화
        Pilot-&gt;&gt;Consul: 서비스 리스트 조회 (Catalog API)
        Consul--&gt;&gt;Pilot: 서비스 목록 응답
        Pilot-&gt;&gt;Envoy Proxy: 설정 전달 (xDS)
    end
    App-&gt;&gt;Proxy: 트래픽 전송
    Proxy-&gt;&gt;Target Proxy: Sidecar to Sidecar 통신
</pre><h3 id=-구성-요소-설명>🔹 구성 요소 설명<a hidden class=anchor aria-hidden=true href=#-구성-요소-설명>#</a></h3><table><thead><tr><th>구성 요소</th><th>역할</th></tr></thead><tbody><tr><td><strong>Consul Agent</strong></td><td>서비스 등록/탐색, Health Check 수행</td></tr><tr><td><strong>Istio Pilot</strong></td><td>Consul과 통신해 서비스 디스커버리 정보를 수집</td></tr><tr><td><strong>Envoy Proxy (Sidecar)</strong></td><td>Istio가 제어하는 데이터 플레인</td></tr><tr><td><strong>Sync 메커니즘</strong></td><td>Pilot이 주기적으로 Consul의 <code>/v1/catalog/services</code> 호출</td></tr></tbody></table><h3 id=-장점-및-고려사항>🔹 장점 및 고려사항<a hidden class=anchor aria-hidden=true href=#-장점-및-고려사항>#</a></h3><table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>장점</strong></td><td>Kubernetes 외부 VM, 베어메탈 등 이기종 환경과도 통합 가능</td></tr><tr><td><strong>고려사항</strong></td><td>서비스 메타데이터 정합성 유지, ACL 및 인증, Health check 동기화 필요</td></tr><tr><td><strong>대체 방식</strong></td><td><a href=https://www.consul.io/docs/connect/integrations/istio>Consul Mesh Gateway + Istio MultiMesh 연계</a> 가능</td></tr></tbody></table><hr><h2 id=-관련-시각화-istio-consul-통합-구조>📌 관련 시각화 (Istio-Consul 통합 구조)<a hidden class=anchor aria-hidden=true href=#-관련-시각화-istio-consul-통합-구조>#</a></h2><pre class=mermaid>graph TD
  subgraph Kubernetes
    IstioPilot[&#34;Istio Pilot&#34;]
    Envoy1[&#34;Sidecar (Envoy)&#34;]
    App1[&#34;App A&#34;]
    App1 --&gt; Envoy1
  end

  subgraph VM 환경
    ConsulAgent[&#34;Consul Agent&#34;]
    AppVM[&#34;App B&#34;]
    AppVM --&gt; ConsulAgent
  end

  IstioPilot --&gt;|Service Sync| ConsulAgent
  IstioPilot --&gt;|Config Push| Envoy1
  Envoy1 --&gt;|mTLS| AppVM
</pre><hr><h2 id=-보충-학습-포인트-제안>🔸 보충 학습 포인트 제안<a hidden class=anchor aria-hidden=true href=#-보충-학습-포인트-제안>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>Service Discovery</td><td>CoreDNS</td><td>DNS 기반 동적 등록</td><td>Kubernetes의 Internal DNS 시스템 원리</td></tr><tr><td>Registry 연계</td><td>Istio-Consul</td><td>External ServiceEntry 사용</td><td>외부 서비스 등록 방식과 명시적 접근 구성</td></tr><tr><td>메타데이터 관리</td><td>Consul Tags</td><td>서비스 필터링 및 그룹핑</td><td>Proxy 설정 시 사용되는 메타데이터 필드</td></tr></tbody></table><hr><p>다음은 <strong>Service Mesh (예: Istio)</strong> 와 <strong>Service Registry (예: Consul)</strong> 간의 <strong>상태 일관성 문제</strong>를 해결하기 위한 실무 전략을 아키텍처, 운영, 설계 차원에서 정리한 내용입니다.</p><hr><h2 id=-문제-정의-mesh--registry-간-상태-일관성-불일치>✅ 문제 정의: Mesh ↔ Registry 간 상태 일관성 불일치<a hidden class=anchor aria-hidden=true href=#-문제-정의-mesh--registry-간-상태-일관성-불일치>#</a></h2><h3 id=발생-가능한-불일치-시나리오>발생 가능한 불일치 시나리오<a hidden class=anchor aria-hidden=true href=#발생-가능한-불일치-시나리오>#</a></h3><table><thead><tr><th>상황</th><th>설명</th></tr></thead><tbody><tr><td><strong>서비스 등록 후 Mesh 미반영</strong></td><td>Consul에 등록된 서비스가 Istio에는 노출되지 않음</td></tr><tr><td><strong>Consul Health 상태 변경 지연</strong></td><td>Consul에서 unhealthy로 판정됐지만 Istio Proxy는 여전히 라우팅</td></tr><tr><td><strong>Sidecar 정보 미동기화</strong></td><td>Pilot → Envoy 간의 xDS 업데이트 지연 또는 실패</td></tr><tr><td><strong>메타데이터 불일치</strong></td><td>Consul과 Istio 간 tag, port, mTLS 설정 불일치</td></tr></tbody></table><hr><h2 id=-해결-전략-카테고리별-정리>✅ 해결 전략 카테고리별 정리<a hidden class=anchor aria-hidden=true href=#-해결-전략-카테고리별-정리>#</a></h2><h3 id=1-구조적설계적-전략>1. <strong>구조적/설계적 전략</strong><a hidden class=anchor aria-hidden=true href=#1-구조적설계적-전략>#</a></h3><table><thead><tr><th>전략</th><th>설명</th></tr></thead><tbody><tr><td><strong>중앙화된 Service Definition 소스 관리</strong></td><td>서비스 정의를 Consul 또는 Kubernetes에 단일화 (예: GitOps 기반 CRD 관리)</td></tr><tr><td><strong>ServiceEntry 자동 생성</strong></td><td>외부 Registry 데이터를 기반으로 Istio의 <code>ServiceEntry</code> 를 자동 생성 및 갱신</td></tr><tr><td><strong>메타데이터 정합성 표준화</strong></td><td>tag, port, protocol 필드 정의에 대한 공통 템플릿 및 스키마 적용 (ex: JSON Schema, OpenAPI)</td></tr></tbody></table><hr><h3 id=2-기술적-전략>2. <strong>기술적 전략</strong><a hidden class=anchor aria-hidden=true href=#2-기술적-전략>#</a></h3><table><thead><tr><th>전략</th><th>설명</th></tr></thead><tbody><tr><td><strong>Consul Catalog Watcher</strong></td><td>Pilot이 Consul Catalog 변화 감지 시 자동으로 xDS config 반영</td></tr><tr><td><strong>Proxy Auto-reload</strong></td><td>Envoy Sidecar에 config 변경 이벤트 발생 시 강제 reload (<code>Pilot push</code>)</td></tr><tr><td><strong>Consul + Istio 어댑터 활용</strong></td><td>Consul-Connect, Consul-Terraform-Sync 등을 활용해 동기화 자동화</td></tr></tbody></table><h4 id=예시-serviceentry-자동-동기화>예시: ServiceEntry 자동 동기화<a hidden class=anchor aria-hidden=true href=#예시-serviceentry-자동-동기화>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>networking.istio.io/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ServiceEntry</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>external-consul-svc</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>addresses</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=m>10.0.0.11</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>db.consul.local</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>number</span><span class=p>:</span><span class=w> </span><span class=m>5432</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>tcp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>TCP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>location</span><span class=p>:</span><span class=w> </span><span class=l>MESH_EXTERNAL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resolution</span><span class=p>:</span><span class=w> </span><span class=l>DNS</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><hr><h3 id=3-운영모니터링-전략>3. <strong>운영/모니터링 전략</strong><a hidden class=anchor aria-hidden=true href=#3-운영모니터링-전략>#</a></h3><table><thead><tr><th>전략</th><th>설명</th></tr></thead><tbody><tr><td><strong>일관성 헬스체크 대시보드 구성</strong></td><td>Prometheus + Grafana 로 Consul 상태 vs Envoy Routing 상태 비교 지표 제공</td></tr><tr><td><strong>xDS sync 상태 모니터링</strong></td><td>Pilot, Sidecar Envoy 간의 xDS 상태를 <code>istioctl proxy-status</code> 로 주기 확인</td></tr><tr><td><strong>Consul Health vs Mesh Reachability Alerting</strong></td><td>Consul과 Istio에서 health 상태가 상이할 경우 알림 발생 (e.g. Alertmanager)</td></tr></tbody></table><hr><h2 id=-보완-전략-직접-동기화-매커니즘-구성>✅ 보완 전략: 직접 동기화 매커니즘 구성<a hidden class=anchor aria-hidden=true href=#-보완-전략-직접-동기화-매커니즘-구성>#</a></h2><h3 id=-option-1-consul-template--istio-cr-generator>🔹 Option 1: <strong>Consul Template + Istio CR Generator</strong><a hidden class=anchor aria-hidden=true href=#-option-1-consul-template--istio-cr-generator>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1>1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2>2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 예시: Consul에서 가져온 정보로 Istio CRD 자동 생성</span>
</span></span><span class=line><span class=cl>consul-template <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -template <span class=s2>&#34;service.tpl:service-entry.yaml:istioctl apply -f service-entry.yaml&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=-option-2-consul-terraform-sync-활용>🔹 Option 2: <strong>Consul-Terraform-Sync 활용</strong><a hidden class=anchor aria-hidden=true href=#-option-2-consul-terraform-sync-활용>#</a></h3><p>Consul 서비스 등록 시 자동으로 <code>Istio Gateway</code>, <code>ServiceEntry</code>, <code>DestinationRule</code> 구성 파일 생성 → CI/CD 파이프라인 반영</p><hr><h2 id=-실무-권장-구성>✅ 실무 권장 구성<a hidden class=anchor aria-hidden=true href=#-실무-권장-구성>#</a></h2><pre class=mermaid>graph TD
    Consul[Consul Registry] --&gt;|Catalog Watch| Syncer[Sync Controller]
    Syncer --&gt;|Create/Update| ServiceEntry[Istio ServiceEntry]
    ServiceEntry --&gt; IstioPilot[Istio Pilot]
    IstioPilot --&gt; Envoy[Envoy Sidecar]
    Envoy --&gt; TargetApp[Target App]
</pre><ul><li>Sync Controller는 <code>Consul Catalog</code> API를 활용해 주기적으로 변화 감지</li><li><code>ServiceEntry</code> 리소스를 생성하여 <code>Pilot</code>이 관리하도록 함</li><li>Envoy는 <code>xDS API</code>를 통해 실시간 반영</li></ul><hr><h2 id=-권장사항-정리>✅ 권장사항 정리<a hidden class=anchor aria-hidden=true href=#-권장사항-정리>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>설계</td><td>Service Definition 표준화</td><td>Consul과 Mesh 간의 메타데이터 형식 일치</td></tr><tr><td>기술</td><td>Catalog 감지 → ServiceEntry 자동화</td><td>변경 감지 시 자동 적용 흐름 구축</td></tr><tr><td>운영</td><td>상태 모니터링</td><td>Consul 상태, Pilot sync 상태, Sidecar config 적용 확인 지표 수집</td></tr><tr><td>보안</td><td>인증 통합 고려</td><td>Mesh 내부와 외부 Registry 간 mTLS, ACL, 인증 통합 설계 필요</td></tr></tbody></table><hr><p>Istio 기반 멀티클러스터(Multi-Cluster) 아키텍처에서 <strong>Service Registry 통합</strong>을 설계하는 것은 대규모 마이크로서비스 환경에서 <strong>서비스 디스커버리, 관측성, 트래픽 제어, 보안</strong>의 일관성을 유지하는 핵심 과제입니다. 아래에 실무 중심으로 정리한 <strong>통합 아키텍처 사례</strong>를 제공합니다.</p><hr><h2 id=-아키텍처-구성-목적>✅ 아키텍처 구성 목적<a hidden class=anchor aria-hidden=true href=#-아키텍처-구성-목적>#</a></h2><ul><li>클러스터 간 <strong>서비스 디스커버리 통합</strong></li><li><strong>Istio Control Plane</strong> 공유 또는 독립 운영</li><li>외부 Registry (예: Consul, Eureka)와 통합</li><li><strong>Cross-cluster 통신 보안 및 정책</strong> 통제</li><li>하이브리드 클라우드/멀티리전 서비스 운영 최적화</li></ul><hr><h2 id=-아키텍처-유형>✅ 아키텍처 유형<a hidden class=anchor aria-hidden=true href=#-아키텍처-유형>#</a></h2><table><thead><tr><th>유형</th><th>Control Plane</th><th>서비스 디스커버리</th><th>주요 특징</th></tr></thead><tbody><tr><td><strong>Primary-Remote (Single Control Plane)</strong></td><td>1개 (Primary Cluster)</td><td>Central Registry</td><td>구성이 단순하나, 고가용성 설계 필요</td></tr><tr><td><strong>Replicated Control Plane (Multiple)</strong></td><td>각 클러스터마다 존재</td><td>동기화 필요 (ex: shared CA, remote discovery)</td><td>독립성 확보, 구성 복잡</td></tr><tr><td><strong>Mesh Expansion + Registry 연동</strong></td><td>외부 VM 또는 온프레미스 포함</td><td>외부 Registry 통합 (e.g. Consul)</td><td>온프레미스 및 하이브리드 통합 가능</td></tr></tbody></table><hr><h2 id=-실무-사례-아키텍처-istio-multi-cluster--consul-registry>✅ 실무 사례 아키텍처: <strong>Istio Multi-Cluster + Consul Registry</strong><a hidden class=anchor aria-hidden=true href=#-실무-사례-아키텍처-istio-multi-cluster--consul-registry>#</a></h2><pre class=mermaid>flowchart TD
  subgraph Cluster1[&#34;Cluster A (Primary)&#34;]
    CP1[&#34;Istiod (Control Plane)&#34;]
    EnvoyA[&#34;App A + Envoy&#34;]
    CP1 --&gt; EnvoyA
  end

  subgraph Cluster2[&#34;Cluster B (Remote)&#34;]
    EnvoyB[&#34;App B + Envoy&#34;]
    EnvoyB --&gt; CP1
  end

  subgraph Consul[&#34;External Service Registry&#34;]
    ConsulSvc[&#34;Consul Catalog&#34;]
  end

  ConsulSvc --&gt; CP1
  ConsulSvc --&gt; EnvoyB

  EnvoyA --&gt;|mTLS| EnvoyB
</pre><h3 id=구성-요소-설명>구성 요소 설명<a hidden class=anchor aria-hidden=true href=#구성-요소-설명>#</a></h3><table><thead><tr><th>구성요소</th><th>설명</th></tr></thead><tbody><tr><td><code>Istiod</code></td><td>Primary Cluster에 위치한 Control Plane</td></tr><tr><td><code>Envoy</code></td><td>각 워크로드에 배포되는 Sidecar</td></tr><tr><td><code>Consul</code></td><td>각 클러스터 외부의 서비스 등록소 역할</td></tr><tr><td><code>mTLS</code></td><td>클러스터 간 보안 통신 지원 (SPIFFE/SPIRE 기반 인증 포함 가능)</td></tr></tbody></table><hr><h2 id=-cross-cluster-서비스-등록-흐름>✅ Cross-cluster 서비스 등록 흐름<a hidden class=anchor aria-hidden=true href=#-cross-cluster-서비스-등록-흐름>#</a></h2><ol><li><strong>Consul Catalog 등록</strong>
→ 각 서비스가 Consul에 IP, 포트, 헬스 정보 등록</li><li><strong>Istiod Catalog 연동</strong>
→ Consul Watch 혹은 <code>ServiceEntry</code> 리소스 자동 생성</li><li><strong>xDS 동기화</strong>
→ Istiod가 Envoy들에게 클러스터 간 서비스 정보 push</li><li><strong>Envoy → Envoy 통신</strong>
→ SNI 기반 L7 라우팅, mTLS 적용</li></ol><hr><h2 id=-서비스-디스커버리-통합-전략>✅ 서비스 디스커버리 통합 전략<a hidden class=anchor aria-hidden=true href=#-서비스-디스커버리-통합-전략>#</a></h2><table><thead><tr><th>항목</th><th>전략</th></tr></thead><tbody><tr><td><strong>ServiceEntry 자동 생성</strong></td><td>Consul 기반 리소스를 controller 또는 template로 자동 구성</td></tr><tr><td><strong>DNS 기반 fallback 구성</strong></td><td>Consul DNS → Istio DNS 순서로 레졸버 구성</td></tr><tr><td><strong>Health Propagation</strong></td><td>Consul health check 상태를 Istio의 <code>Envoy Cluster</code>에 반영</td></tr><tr><td><strong>Namespace/Label 연계</strong></td><td>각 Registry의 서비스 정보를 네임스페이스별로 매핑 (e.g., <code>team-a</code> → <code>svc.team-a.consul</code>)</td></tr></tbody></table><hr><h2 id=-고려-사항-및-권장-사항>✅ 고려 사항 및 권장 사항<a hidden class=anchor aria-hidden=true href=#-고려-사항-및-권장-사항>#</a></h2><table><thead><tr><th>구분</th><th>고려 사항</th><th>설명</th></tr></thead><tbody><tr><td><strong>보안</strong></td><td>클러스터 간 mTLS 인증 구성</td><td>Istio CA, SPIRE, 인증서 싱크</td></tr><tr><td><strong>확장성</strong></td><td>클러스터 증가 시 성능 고려</td><td><code>istiod</code> HA 구성 또는 regional control plane</td></tr><tr><td><strong>장애 복구</strong></td><td>ServiceEntry 재생성 자동화</td><td>Controller 장애 시 Registry 기준 복원 가능</td></tr><tr><td><strong>모니터링</strong></td><td>클러스터 간 tracing 통합</td><td>Istio + Prometheus + Grafana + Jaeger</td></tr><tr><td><strong>Failover</strong></td><td>Remote Cluster 장애 시 fallback 서비스 경로 구성</td><td>Kubernetes <code>failoverService</code>, Envoy DNS TTL 조정</td></tr></tbody></table><hr><h2 id=-istio--consul-controller-구성-예-k8s-manifest-예시>✅ Istio + Consul Controller 구성 예 (K8s Manifest 예시)<a hidden class=anchor aria-hidden=true href=#-istio--consul-controller-구성-예-k8s-manifest-예시>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1> 1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2> 2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3> 3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4> 4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5> 5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6> 6</a>
</span><span class=lnt id=hl-15-7><a class=lnlinks href=#hl-15-7> 7</a>
</span><span class=lnt id=hl-15-8><a class=lnlinks href=#hl-15-8> 8</a>
</span><span class=lnt id=hl-15-9><a class=lnlinks href=#hl-15-9> 9</a>
</span><span class=lnt id=hl-15-10><a class=lnlinks href=#hl-15-10>10</a>
</span><span class=lnt id=hl-15-11><a class=lnlinks href=#hl-15-11>11</a>
</span><span class=lnt id=hl-15-12><a class=lnlinks href=#hl-15-12>12</a>
</span><span class=lnt id=hl-15-13><a class=lnlinks href=#hl-15-13>13</a>
</span><span class=lnt id=hl-15-14><a class=lnlinks href=#hl-15-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>networking.istio.io/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ServiceEntry</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>remote-consul-service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>remote-db.consul</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>address</span><span class=p>:</span><span class=w> </span><span class=m>10.0.12.20</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>number</span><span class=p>:</span><span class=w> </span><span class=m>3306</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>tcp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>TCP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>location</span><span class=p>:</span><span class=w> </span><span class=l>MESH_EXTERNAL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>resolution</span><span class=p>:</span><span class=w> </span><span class=l>DNS</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><hr><h2 id=-결론>✅ 결론<a hidden class=anchor aria-hidden=true href=#-결론>#</a></h2><p>멀티클러스터 Istio 환경에서 Service Registry를 통합하면 다음과 같은 이점을 가집니다:</p><ul><li><strong>서비스 등록 및 검색의 일관성 확보</strong></li><li><strong>하이브리드/온프레미스 포함한 네트워크 통합</strong></li><li><strong>보안, 정책, 트래픽 제어를 클러스터 간 통일</strong></li></ul><p>향후 확장 아키텍처로는 <code>Multi-primary Istio + Global Registry (Consul/Nacos)</code> 구성이 있습니다.
원하시면 <strong>Terraform 기반 배포 구성</strong> 또는 <strong>Consul → Istio 마이그레이션 경로</strong>도 제공해드릴 수 있습니다.</p><p>다음으로 어떤 항목을 이어서 도와드릴까요?</p><ul><li>Istio Multi-primary 구성 자동화</li><li>ServiceEntry 관리 자동화 (Helm, Terraform)</li><li>Multicluster 통신 문제 대응 전략</li><li>Service Registry 장애 대응 전략</li></ul><p>아래는 요청하신 <strong>Service Registry 장애 대응 전략</strong>, <strong>Multicluster 통신 문제 대응 전략</strong>, <strong>Istio Multi‑primary 구성 자동화</strong>에 대한 실무 설계 및 운용 전략입니다.</p><hr><h2 id=-1-service-registry-장애-대응-전략>✅ 1. Service Registry 장애 대응 전략<a hidden class=anchor aria-hidden=true href=#-1-service-registry-장애-대응-전략>#</a></h2><h3 id=-핵심-목표>💡 핵심 목표<a hidden class=anchor aria-hidden=true href=#-핵심-목표>#</a></h3><p>고가용성(HA), 상태 일관성, 장애 복구 자동화를 확보하는 것이 핵심입니다.</p><h3 id=전략-요약>전략 요약<a hidden class=anchor aria-hidden=true href=#전략-요약>#</a></h3><table><thead><tr><th>전략 영역</th><th>목적</th><th>기술/기법</th></tr></thead><tbody><tr><td><strong>클러스터 구성</strong></td><td>S​POF 제거, 데이터 복제</td><td>Consul Raft 클러스터 최소 3 노드 구성 (<a href="https://microservices.io/patterns/service-registry.html?utm_source=chatgpt.com" title="Pattern: Service registry - Microservices.io">HashiCorp Developer</a>)</td></tr><tr><td><strong>WAN 페어링</strong></td><td>멀티 리전 장애 대응</td><td>여러 datacenter 페어링 설정</td></tr><tr><td><strong>서비스 복제</strong></td><td>중복 노드로 장애 대비</td><td>각 영역에 Registry 인스턴스 배포</td></tr><tr><td><strong>자동 리더 선출</strong></td><td>Konsul 서버 장애 시 리더 선출 자동화</td><td>Raft 자동 리더 선출</td></tr><tr><td><strong>Terraform Sync HA</strong></td><td>config 배포의 단일 실패점 제거</td><td>Consul‑Terraform‑Sync HA 모드</td></tr><tr><td><strong>모니터링 & Alert</strong></td><td>장애 즉시 탐지</td><td>Consul metrics + Prometheus 모니터링</td></tr><tr><td><strong>데이터 백업 및 복구</strong></td><td>데이터 유실 대응</td><td>정기 저장소 백업 설정</td></tr><tr><td><strong>Network Resilience</strong></td><td>네트워크 장애 대비</td><td>Multi-AZ 또는 Multi-VPC 구성</td></tr></tbody></table><h3 id=-운영-팁>🛠️ 운영 팁<a hidden class=anchor aria-hidden=true href=#-운영-팁>#</a></h3><ul><li>Consul datacenter간 서비스 failover 구성</li><li><code>heartbeat</code>, <code>deregister_timeout</code> 설정 최적화</li><li>모니터링 통합: leader status, latency, 성능 메트릭 등</li></ul><hr><h2 id=-2-multicluster-통신-문제-대응-전략>✅ 2. Multicluster 통신 문제 대응 전략<a hidden class=anchor aria-hidden=true href=#-2-multicluster-통신-문제-대응-전략>#</a></h2><p>분산 클러스터 간 네트워크, DNS, 정책 적용 시 일관성 문제를 최소화합니다.</p><h3 id=주요-문제-및-대응>주요 문제 및 대응<a hidden class=anchor aria-hidden=true href=#주요-문제-및-대응>#</a></h3><table><thead><tr><th>문제 유형</th><th>설명</th><th>대응 전략</th></tr></thead><tbody><tr><td><strong>API Server 접근 불가</strong></td><td>Cross-cluster Istio 설치 장애</td><td><code>istioctl x create-remote-secret</code>로 API 서버 인증정보 공유 (<a href="https://www.linkedin.com/pulse/navigating-microservices-landscape-comparative-analysis-armin-shoughi-mslrf?utm_source=chatgpt.com" title="A Comparative Analysis of Consul and Eureka - LinkedIn">Stack Overflow</a>)</td></tr><tr><td><strong>East-West 통신 실패</strong></td><td>Gateway 설정 누락</td><td>east‑west Gateway 설치 및 공개 IP 설정</td></tr><tr><td><strong>ServiceEntry 동기화 문제</strong></td><td>Registry 불일치</td><td>Watch 기반 ServiceEntry 자동 생성</td></tr><tr><td><strong>DNS/Certificate 불일치</strong></td><td>mTLS 통신 불가</td><td>동일 meshID, shared CA, SPIFFE 구현</td></tr><tr><td><strong>Traffic 루핑/DLQ 문제</strong></td><td>트래픽 경로 잘못 설정</td><td>VirtualService/Gateway 정책 일원화</td></tr></tbody></table><h3 id=-운영-권고>📌 운영 권고<a hidden class=anchor aria-hidden=true href=#-운영-권고>#</a></h3><ul><li>Remote-secret 자동 생성 스크립트 구축</li><li>east-west gateway ingress 설정과 VPC/routing 확인</li><li><code>istioctl proxy-status</code>, <code>istioctl authn tls-check</code> 정기 점검</li></ul><hr><h2 id=-3-istio-multiprimary-구성-자동화>✅ 3. Istio Multi‑primary 구성 자동화<a hidden class=anchor aria-hidden=true href=#-3-istio-multiprimary-구성-자동화>#</a></h2><p>자동화 및 재현 가능한 구성으로 확장성과 안정성 확보합니다.</p><h3 id=흐름-요약>흐름 요약<a hidden class=anchor aria-hidden=true href=#흐름-요약>#</a></h3><ol><li><strong>공유 뼈대 설치</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1>1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2>2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3>3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4>4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5>5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6>6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7>7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>IstioOperator</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>values</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>global</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>meshID</span><span class=p>:</span><span class=w> </span><span class=l>mesh1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>multiCluster</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>clusterName</span><span class=p>:</span><span class=w> </span><span class=l>clusterX</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>network</span><span class=p>:</span><span class=w> </span><span class=l>networkX</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>→ <code>istio-base</code>, <code>istiod</code>, <code>east‑west gateway</code> 구성 (<a href="https://www.linkedin.com/pulse/navigating-microservices-landscape-comparative-analysis-armin-shoughi-mslrf?utm_source=chatgpt.com" title="A Comparative Analysis of Consul and Eureka - LinkedIn">Stack Overflow</a>, <a href="https://learn.microsoft.com/en-us/dotnet/architecture/microservices/architect-microservice-container-applications/microservices-addressability-service-registry?utm_source=chatgpt.com" title="Microservices addressability and the service registry -.NET">istio.io</a>, <a href="https://developer.hashicorp.com/consul/docs/use-case/service-discovery?utm_source=chatgpt.com" title="Service Discovery Explained | Consul - HashiCorp Developer">istio.io</a>)</p><ol start=2><li><p><strong>자동화 코드 구성</strong>
Terraform + Helm + shell 조합으로 IstioOperator 설치 자동화</p></li><li><p><strong>Remote-secret 자동 배포</strong>
<code>istioctl x create-remote-secret</code> 출력을 다른 클러스터에 배포 (<a href="https://www.linkedin.com/pulse/navigating-microservices-landscape-comparative-analysis-armin-shoughi-mslrf?utm_source=chatgpt.com" title="A Comparative Analysis of Consul and Eureka - LinkedIn">Stack Overflow</a>)</p></li><li><p><strong>Gateway / ServiceEntry 동기화</strong>
Consul, Helm 템플릿이나 Admirals 같은 컨트롤러를 활용</p></li><li><p><strong>Terraform 예시</strong></p></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1>1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2>2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3>3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-hcl data-lang=hcl><span class=line><span class=cl><span class=k>module</span> <span class=s2>&#34;istio_base&#34;</span> {
</span></span><span class=line><span class=cl><span class=n>  source</span> <span class=o>=</span> <span class=s2>&#34;git::https://github.com/...&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  clusters</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;cluster1&#34;, &#34;cluster2&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><h3 id=탁월한-자동화-효과>탁월한 자동화 효과<a hidden class=anchor aria-hidden=true href=#탁월한-자동화-효과>#</a></h3><ul><li>스케일 아웃/인 시 재현 가능 상태 유지</li><li>구성 Drift 방지 및 GitOps 가능</li><li>장애 복구, 롤백 시 일관성 있게 적용</li></ul><hr><h2 id=-결론-1>✅ 결론<a hidden class=anchor aria-hidden=true href=#-결론-1>#</a></h2><ul><li><strong>Service Registry</strong>는 HA 구성(클러스터+페어링), 리더 선출, TLS/ACL, Sync HA 등을 통해 장애에 강하게 설계해야 합니다.</li><li><strong>Multicluster 통신</strong>에서는 API Server 연동, east-west Gateway, certificate 공유, ServiceEntry 동기화, DNS 흐름 안정화가 핵심입니다.</li><li><strong>Istio Multi-primary 자동화</strong>는 Helm/IstioOperator, Terraform, remote-secret 배포 스크립트, YAML sync controller로 완성도를 더욱 높일 수 있습니다.</li></ul><hr><p>추가 희망하시는 항목이 있으면 언제든 알려주세요:</p><ul><li>✅ Terraform 코드 예제 제공</li><li>✅ sync controller 예시 (Consul→Istio)</li><li>✅ Multicluster observability 설정 (Prometheus, Kiali, Jaeger)</li></ul><p>필요하신 내용을 이어서 도와드릴 수 있습니다!</p><hr><p>Service Registry에 대한 포괄적인 조사와 분석을 시작하겠습니다. 먼저 최신 정보를 수집하여 정확한 분석을 제공해드리겠습니다.Service Registry에 대한 포괄적인 조사와 분석을 진행하겠습니다.</p><h2 id=1-태그-1>1. 태그<a hidden class=anchor aria-hidden=true href=#1-태그-1>#</a></h2><p><strong>Service-Registry</strong>, <strong>Service-Discovery</strong>, <strong>Microservices-Architecture</strong>, <strong>Distributed-Systems</strong></p><h2 id=2-카테고리-계층-구조-분석>2. 카테고리 계층 구조 분석<a hidden class=anchor aria-hidden=true href=#2-카테고리-계층-구조-분석>#</a></h2><p>제시된 분류 &ldquo;Software Engineering > Design and Architecture > Architecture Styles and Patterns > Architecture Styles > Service-oriented Architecture"는 적절합니다.</p><p><strong>근거:</strong></p><ul><li>Service Registry는 마이크로서비스 아키텍처의 핵심 패턴으로, Service-oriented Architecture (SOA)의 현대적 구현</li><li>소프트웨어 엔지니어링의 설계 및 아키텍처 영역에 속하는 아키텍처 패턴</li><li>분산 시스템에서 서비스 간 통신을 위한 구조적 해결책 제공</li></ul><h2 id=3-주제-요약-200자-내외>3. 주제 요약 (200자 내외)<a hidden class=anchor aria-hidden=true href=#3-주제-요약-200자-내외>#</a></h2><p>Service Registry (서비스 레지스트리)는 마이크로서비스 아키텍처에서 서비스 인스턴스들의 네트워크 위치 정보를 중앙집중식으로 관리하는 데이터베이스입니다. 동적으로 변화하는 서비스 인스턴스들의 발견과 통신을 가능하게 하여 분산 시스템의 유연성과 확장성을 보장하는 핵심 컴포넌트입니다.</p><h2 id=4-개요-250자-내외>4. 개요 (250자 내외)<a hidden class=anchor aria-hidden=true href=#4-개요-250자-내외>#</a></h2><p>Service Registry는 마이크로서비스 생태계에서 서비스 발견 (Service Discovery)을 구현하는 중추적 역할을 수행합니다. 각 마이크로서비스가 시작될 때 자신의 위치 정보를 등록하고, 다른 서비스들이 필요한 서비스를 동적으로 발견할 수 있게 합니다. Netflix Eureka, HashiCorp Consul, Apache ZooKeeper 등이 대표적 구현체이며, Kubernetes와 같은 컨테이너 오케스트레이션 플랫폼에서는 내장 서비스 발견 메커니즘을 제공합니다.</p><hr><h1 id=service-registry-상세-분석>Service Registry 상세 분석<a hidden class=anchor aria-hidden=true href=#service-registry-상세-분석>#</a></h1><h2 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h2><p>Service Registry (서비스 레지스트리)의 핵심 개념들을 체계적으로 정리하면 다음과 같습니다:</p><h3 id=기본-개념>기본 개념<a hidden class=anchor aria-hidden=true href=#기본-개념>#</a></h3><ul><li><strong>서비스 레지스트리</strong>: 마이크로서비스들의 네트워크 위치 정보를 저장하는 중앙화된 데이터베이스</li><li><strong>서비스 발견 (Service Discovery)</strong>: 클라이언트가 필요한 서비스의 위치를 동적으로 찾는 과정</li><li><strong>서비스 등록 (Service Registration)</strong>: 서비스 인스턴스가 레지스트리에 자신의 정보를 등록하는 과정</li><li><strong>서비스 해제 (Service Deregistration)</strong>: 서비스 종료 시 레지스트리에서 정보를 제거하는 과정</li></ul><h3 id=핵심-메타데이터>핵심 메타데이터<a hidden class=anchor aria-hidden=true href=#핵심-메타데이터>#</a></h3><ul><li>서비스 이름 및 식별자</li><li>IP 주소와 포트 번호</li><li>서비스 버전 정보</li><li>헬스 체크 상태</li><li>라우팅 및 로드밸런싱 정책</li></ul><h3 id=실무-구현-연관성>실무 구현 연관성<a hidden class=anchor aria-hidden=true href=#실무-구현-연관성>#</a></h3><p>실무에서 Service Registry를 구현하기 위해서는 다음 측면들이 연관됩니다:</p><p><strong>인프라스트럭처 측면</strong>: 고가용성 보장을 위한 클러스터링, 데이터 일관성 유지를 위한 분산 합의 알고리즘 (Raft, Paxos) 적용</p><p><strong>애플리케이션 측면</strong>: 서비스 클라이언트 라이브러리 통합, 헬스 체크 엔드포인트 구현, 그레이스풀 셧다운 처리</p><p><strong>운영 측면</strong>: 모니터링 및 알림 시스템 구축, 네트워크 장애 대응 전략, 보안 및 접근 제어 정책</p><h2 id=배경>배경<a hidden class=anchor aria-hidden=true href=#배경>#</a></h2><p>Service Registry의 등장 배경은 소프트웨어 아키텍처의 진화와 밀접한 관련이 있습니다.</p><h3 id=모놀리식-아키텍처의-한계>모놀리식 아키텍처의 한계<a hidden class=anchor aria-hidden=true href=#모놀리식-아키텍처의-한계>#</a></h3><p>전통적인 모놀리식 애플리케이션에서는 모든 컴포넌트가 단일 프로세스 내에서 실행되어 내부 통신에 복잡한 서비스 발견 메커니즘이 불필요했습니다.</p><h3 id=마이크로서비스-아키텍처의-도전>마이크로서비스 아키텍처의 도전<a hidden class=anchor aria-hidden=true href=#마이크로서비스-아키텍처의-도전>#</a></h3><ul><li><strong>동적 서비스 인스턴스</strong>: 컨테이너화와 클라우드 환경에서 서비스 인스턴스들이 동적으로 생성/소멸</li><li><strong>네트워크 위치 가변성</strong>: IP 주소와 포트가 런타임에 동적으로 할당</li><li><strong>확장성 요구사항</strong>: 수백, 수천 개의 마이크로서비스 인스턴스 관리 필요</li></ul><h3 id=클라우드-네이티브-환경의-영향>클라우드 네이티브 환경의 영향<a hidden class=anchor aria-hidden=true href=#클라우드-네이티브-환경의-영향>#</a></h3><p>컨테이너 오케스트레이션 플랫폼 (Kubernetes, Docker Swarm)의 보급으로 서비스 인스턴스의 생명주기가 더욱 동적으로 변화하게 되었습니다.</p><h2 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h2><h3 id=주요-목적>주요 목적<a hidden class=anchor aria-hidden=true href=#주요-목적>#</a></h3><p><strong>1. 서비스 위치 추상화</strong>
클라이언트가 구체적인 IP 주소나 포트를 알 필요 없이 논리적 서비스 이름으로 통신 가능</p><p><strong>2. 동적 확장성 지원</strong>
서비스 인스턴스의 추가/제거가 실시간으로 반영되어 무중단 확장 가능</p><p><strong>3. 장애 복구 자동화</strong>
헬스 체크를 통한 장애 인스턴스 자동 감지 및 격리</p><p><strong>4. 로드 밸런싱 최적화</strong>
여러 서비스 인스턴스 간 트래픽 분산을 통한 성능 최적화</p><h3 id=필요성>필요성<a hidden class=anchor aria-hidden=true href=#필요성>#</a></h3><p><strong>비즈니스 관점</strong>: 빠른 서비스 배포와 무중단 운영을 통한 비즈니스 민첩성 확보</p><p><strong>기술적 관점</strong>: 분산 시스템의 복잡성 관리와 운영 효율성 향상</p><p><strong>운영 관점</strong>: 자동화된 인프라 관리를 통한 운영 비용 절감</p><h2 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h2><h3 id=핵심-기능>핵심 기능<a hidden class=anchor aria-hidden=true href=#핵심-기능>#</a></h3><p><strong>1. 서비스 등록 관리</strong></p><ul><li>서비스 인스턴스 시작 시 자동/수동 등록</li><li>메타데이터 저장 및 관리</li><li>중복 등록 방지 및 정합성 보장</li></ul><p><strong>2. 서비스 발견 제공</strong></p><ul><li>클라이언트 요청에 대한 서비스 위치 정보 응답</li><li>로드 밸런싱을 위한 인스턴스 목록 제공</li><li>캐싱을 통한 응답 성능 최적화</li></ul><p><strong>3. 헬스 모니터링</strong></p><ul><li>주기적 헬스 체크 수행</li><li>장애 인스턴스 자동 감지 및 제거</li><li>서비스 상태 변화 실시간 반영</li></ul><p><strong>4. 설정 관리</strong></p><ul><li>서비스별 구성 정보 중앙 관리</li><li>동적 설정 변경 및 배포</li><li>버전별 설정 이력 관리</li></ul><h3 id=역할별-책임>역할별 책임<a hidden class=anchor aria-hidden=true href=#역할별-책임>#</a></h3><p><strong>서비스 제공자 관점</strong>: 자신의 가용성과 메타데이터를 레지스트리에 정확히 보고</p><p><strong>서비스 소비자 관점</strong>: 레지스트리를 통해 필요한 서비스를 효율적으로 발견</p><p><strong>인프라 관점</strong>: 레지스트리의 고가용성과 데이터 일관성 보장</p><h2 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h2><h3 id=기술적-특징>기술적 특징<a hidden class=anchor aria-hidden=true href=#기술적-특징>#</a></h3><p><strong>1. 분산 아키텍처</strong></p><ul><li>다중 노드 클러스터 구성으로 단일 장애점 제거</li><li>데이터 복제를 통한 내결함성 확보</li></ul><p><strong>2. 실시간 동기화</strong></p><ul><li>서비스 상태 변화의 즉시 반영</li><li>이벤트 기반 알림 메커니즘</li></ul><p><strong>3. 확장성</strong></p><ul><li>수평적 확장을 통한 처리 능력 증대</li><li>파티셔닝을 통한 부하 분산</li></ul><p><strong>4. 일관성 모델</strong></p><ul><li>CAP 정리에 따른 일관성-가용성 트레이드오프 고려</li><li>최종 일관성 (Eventual Consistency) 지원</li></ul><h3 id=운영적-특징>운영적 특징<a hidden class=anchor aria-hidden=true href=#운영적-특징>#</a></h3><p><strong>1. 자가 치유 (Self-Healing)</strong></p><ul><li>장애 인스턴스 자동 감지 및 복구</li><li>네트워크 파티션 복구 시 자동 재동기화</li></ul><p><strong>2. 다중 프로토콜 지원</strong></p><ul><li>HTTP REST API, gRPC, DNS 기반 접근</li><li>다양한 클라이언트 라이브러리 제공</li></ul><h2 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h2><h3 id=1-단일-정보원-single-source-of-truth>1. 단일 정보원 (Single Source of Truth)<a hidden class=anchor aria-hidden=true href=#1-단일-정보원-single-source-of-truth>#</a></h3><p>모든 서비스 정보가 레지스트리에 중앙화되어 데이터 일관성 보장</p><h3 id=2-최종-일관성-eventual-consistency>2. 최종 일관성 (Eventual Consistency)<a hidden class=anchor aria-hidden=true href=#2-최종-일관성-eventual-consistency>#</a></h3><p>네트워크 파티션 상황에서도 시스템 가용성 유지</p><h3 id=3-장애-격리-failure-isolation>3. 장애 격리 (Failure Isolation)<a hidden class=anchor aria-hidden=true href=#3-장애-격리-failure-isolation>#</a></h3><p>개별 서비스 장애가 전체 시스템에 전파되지 않도록 격리</p><h3 id=4-탄력성-resilience>4. 탄력성 (Resilience)<a hidden class=anchor aria-hidden=true href=#4-탄력성-resilience>#</a></h3><p>부분적 장애 상황에서도 핵심 기능 지속 제공</p><h3 id=5-투명성-transparency>5. 투명성 (Transparency)<a hidden class=anchor aria-hidden=true href=#5-투명성-transparency>#</a></h3><p>클라이언트가 서비스 위치 변경을 인지하지 못하도록 추상화</p><h2 id=주요-원리>주요 원리<a hidden class=anchor aria-hidden=true href=#주요-원리>#</a></h2><p>Service Registry의 동작 원리를 다이어그램으로 설명하겠습니다.</p><pre class=mermaid>sequenceDiagram
    participant S1 as Service A
    participant SR as Service Registry
    participant S2 as Service B
    participant C as Client
    
    Note over S1,C: 서비스 등록 과정
    S1-&gt;&gt;SR: 1. 서비스 등록 (IP, Port, Metadata)
    SR-&gt;&gt;S1: 2. 등록 확인
    S2-&gt;&gt;SR: 3. 서비스 등록 (IP, Port, Metadata)
    SR-&gt;&gt;S2: 4. 등록 확인
    
    Note over S1,C: 서비스 발견 과정
    C-&gt;&gt;SR: 5. 서비스 B 위치 요청
    SR-&gt;&gt;C: 6. 서비스 B 인스턴스 목록 응답
    C-&gt;&gt;S2: 7. 서비스 B 호출
    S2-&gt;&gt;C: 8. 응답
    
    Note over S1,C: 헬스 체크 과정
    SR-&gt;&gt;S1: 9. 헬스 체크
    S1-&gt;&gt;SR: 10. 헬스 상태 응답
    SR-&gt;&gt;S2: 11. 헬스 체크
    S2--&gt;&gt;SR: 12. 응답 없음 (장애)
    SR-&gt;&gt;SR: 13. Service B 인스턴스 제거
</pre><h3 id=등록-원리>등록 원리<a hidden class=anchor aria-hidden=true href=#등록-원리>#</a></h3><ol><li><strong>서비스 시작</strong>: 마이크로서비스 인스턴스가 시작되면 자신의 네트워크 정보를 레지스트리에 등록</li><li><strong>메타데이터 포함</strong>: 서비스 이름, 버전, 헬스 체크 엔드포인트 등 필요한 메타데이터 함께 전송</li><li><strong>등록 확인</strong>: 레지스트리는 등록된 정보를 검증하고 확인 응답 전송</li></ol><h3 id=발견-원리>발견 원리<a hidden class=anchor aria-hidden=true href=#발견-원리>#</a></h3><ol><li><strong>위치 조회</strong>: 클라이언트가 특정 서비스의 위치 정보를 레지스트리에 요청</li><li><strong>인스턴스 목록 제공</strong>: 레지스트리는 해당 서비스의 모든 가용 인스턴스 정보 응답</li><li><strong>로드 밸런싱</strong>: 클라이언트는 제공받은 목록에서 적절한 인스턴스 선택</li></ol><h2 id=작동-원리-및-방식>작동 원리 및 방식<a hidden class=anchor aria-hidden=true href=#작동-원리-및-방식>#</a></h2><h3 id=서비스-등록-방식>서비스 등록 방식<a hidden class=anchor aria-hidden=true href=#서비스-등록-방식>#</a></h3><p><strong>1. 자가 등록 (Self-Registration)</strong></p><pre class=mermaid>flowchart TD
    A[서비스 시작] --&gt; B[레지스트리에 직접 등록]
    B --&gt; C[주기적 하트비트 전송]
    C --&gt; D[서비스 종료 시 등록 해제]
    D --&gt; E[레지스트리에서 제거]
    
    style A fill:#e1f5fe
    style E fill:#ffebee
</pre><p><strong>2. 제3자 등록 (Third-party Registration)</strong></p><pre class=mermaid>flowchart TD
    A[서비스 시작] --&gt; B[서비스 매니저 감지]
    B --&gt; C[매니저가 레지스트리에 등록]
    C --&gt; D[서비스 상태 모니터링]
    D --&gt; E[서비스 종료 감지]
    E --&gt; F[매니저가 등록 해제]
    
    style A fill:#e1f5fe
    style F fill:#ffebee
</pre><h3 id=서비스-발견-방식>서비스 발견 방식<a hidden class=anchor aria-hidden=true href=#서비스-발견-방식>#</a></h3><p><strong>1. 클라이언트 사이드 발견 (Client-side Discovery)</strong></p><ul><li>클라이언트가 직접 레지스트리에 쿼리</li><li>로드 밸런싱 로직을 클라이언트에서 구현</li><li>네트워크 홉 수 최소화</li></ul><p><strong>2. 서버 사이드 발견 (Server-side Discovery)</strong></p><ul><li>로드 밸런서나 프록시가 레지스트리 조회</li><li>클라이언트 로직 단순화</li><li>중앙화된 로드 밸런싱</li></ul><h2 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h2><p>Service Registry의 전체 아키텍처를 다이어그램으로 나타내면 다음과 같습니다.</p><pre class=mermaid>graph TB
    subgraph &#34;Client Applications&#34;
        C1[Web Client]
        C2[Mobile App]
        C3[API Gateway]
    end
    
    subgraph &#34;Service Registry Cluster&#34;
        SR1[Registry Node 1&lt;br/&gt;Leader]
        SR2[Registry Node 2&lt;br/&gt;Follower]
        SR3[Registry Node 3&lt;br/&gt;Follower]
        
        SR1 -.-&gt; SR2
        SR2 -.-&gt; SR3
        SR3 -.-&gt; SR1
    end
    
    subgraph &#34;Microservices&#34;
        MS1[Order Service&lt;br/&gt;Instance 1]
        MS2[Order Service&lt;br/&gt;Instance 2]
        MS3[Payment Service&lt;br/&gt;Instance 1]
        MS4[User Service&lt;br/&gt;Instance 1]
    end
    
    subgraph &#34;Health Check System&#34;
        HC[Health Check&lt;br/&gt;Monitor]
    end
    
    C1 --&gt; SR1
    C2 --&gt; SR2
    C3 --&gt; SR3
    
    MS1 --&gt; SR1
    MS2 --&gt; SR1
    MS3 --&gt; SR2
    MS4 --&gt; SR3
    
    HC --&gt; MS1
    HC --&gt; MS2
    HC --&gt; MS3
    HC --&gt; MS4
    
    HC --&gt; SR1
    
    style SR1 fill:#4caf50
    style SR2 fill:#81c784
    style SR3 fill:#81c784
</pre><h3 id=필수-구성요소-1>필수 구성요소<a hidden class=anchor aria-hidden=true href=#필수-구성요소-1>#</a></h3><table><thead><tr><th>구성요소</th><th>기능</th><th>역할</th><th>특징</th></tr></thead><tbody><tr><td><strong>Registry Database</strong></td><td>서비스 정보 저장</td><td>메타데이터 영구 보관</td><td>분산 저장, 복제 지원</td></tr><tr><td><strong>Registration API</strong></td><td>서비스 등록/해제</td><td>서비스 생명주기 관리</td><td>RESTful API, 인증 지원</td></tr><tr><td><strong>Discovery API</strong></td><td>서비스 조회</td><td>클라이언트 요청 처리</td><td>캐싱, 로드밸런싱</td></tr><tr><td><strong>Health Monitor</strong></td><td>상태 감시</td><td>장애 감지 및 복구</td><td>주기적 체크, 자동 제거</td></tr><tr><td><strong>Consensus Engine</strong></td><td>분산 합의</td><td>데이터 일관성 보장</td><td>Raft/Paxos 알고리즘</td></tr></tbody></table><h3 id=선택-구성요소-1>선택 구성요소<a hidden class=anchor aria-hidden=true href=#선택-구성요소-1>#</a></h3><table><thead><tr><th>구성요소</th><th>기능</th><th>역할</th><th>특징</th></tr></thead><tbody><tr><td><strong>Web UI Dashboard</strong></td><td>시각화 관리</td><td>운영자 인터페이스</td><td>실시간 모니터링</td></tr><tr><td><strong>Metrics Collector</strong></td><td>성능 지표 수집</td><td>운영 인사이트 제공</td><td>Prometheus 연동</td></tr><tr><td><strong>Configuration Store</strong></td><td>설정 관리</td><td>동적 설정 변경</td><td>버전 관리, 롤백</td></tr><tr><td><strong>Security Gateway</strong></td><td>보안 제어</td><td>접근 권한 관리</td><td>ACL, TLS 암호화</td></tr><tr><td><strong>Cache Layer</strong></td><td>성능 최적화</td><td>응답 속도 향상</td><td>Redis, Memcached</td></tr></tbody></table><h2 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h2><h3 id=1-netflix-eureka-기반-구현>1. Netflix Eureka 기반 구현<a hidden class=anchor aria-hidden=true href=#1-netflix-eureka-기반-구현>#</a></h3><p><strong>정의</strong>: Netflix OSS에서 개발한 클라이언트 사이드 서비스 발견 시스템</p><p><strong>구성</strong>:</p><ul><li>Eureka Server: 서비스 레지스트리 역할</li><li>Eureka Client: 서비스 등록/발견 라이브러리</li></ul><p><strong>목적</strong>: Spring Cloud 환경에서 마이크로서비스 간 통신 지원</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1>1</a>
</span><span class=lnt id=hl-22-2><a class=lnlinks href=#hl-22-2>2</a>
</span><span class=lnt id=hl-22-3><a class=lnlinks href=#hl-22-3>3</a>
</span><span class=lnt id=hl-22-4><a class=lnlinks href=#hl-22-4>4</a>
</span><span class=lnt id=hl-22-5><a class=lnlinks href=#hl-22-5>5</a>
</span><span class=lnt id=hl-22-6><a class=lnlinks href=#hl-22-6>6</a>
</span><span class=lnt id=hl-22-7><a class=lnlinks href=#hl-22-7>7</a>
</span><span class=lnt id=hl-22-8><a class=lnlinks href=#hl-22-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Eureka Server 설정</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@SpringBootApplication</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@EnableEurekaServer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>EurekaServerApplication</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>SpringApplication</span><span class=p>.</span><span class=na>run</span><span class=p>(</span><span class=n>EurekaServerApplication</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=n>args</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>시스템 구성</strong>: 고가용성을 위한 다중 Eureka Server 클러스터</p><p><strong>시나리오</strong>:</p><ol><li>서비스 시작 시 Eureka Server에 자동 등록</li><li>30초마다 하트비트 전송으로 생존 상태 확인</li><li>클라이언트는 Ribbon 라이브러리로 로드밸런싱</li></ol><h3 id=2-hashicorp-consul-기반-구현>2. HashiCorp Consul 기반 구현<a hidden class=anchor aria-hidden=true href=#2-hashicorp-consul-기반-구현>#</a></h3><p><strong>정의</strong>: 서비스 메시 및 서비스 발견을 위한 완전한 솔루션</p><p><strong>구성</strong>:</p><ul><li>Consul Agent: 각 노드에서 실행되는 에이전트</li><li>Consul Server: 클러스터 상태 관리</li><li>DNS Interface: DNS 기반 서비스 발견</li></ul><p><strong>목적</strong>: 멀티 데이터센터 환경에서 서비스 발견 및 구성 관리</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-23-1><a class=lnlinks href=#hl-23-1> 1</a>
</span><span class=lnt id=hl-23-2><a class=lnlinks href=#hl-23-2> 2</a>
</span><span class=lnt id=hl-23-3><a class=lnlinks href=#hl-23-3> 3</a>
</span><span class=lnt id=hl-23-4><a class=lnlinks href=#hl-23-4> 4</a>
</span><span class=lnt id=hl-23-5><a class=lnlinks href=#hl-23-5> 5</a>
</span><span class=lnt id=hl-23-6><a class=lnlinks href=#hl-23-6> 6</a>
</span><span class=lnt id=hl-23-7><a class=lnlinks href=#hl-23-7> 7</a>
</span><span class=lnt id=hl-23-8><a class=lnlinks href=#hl-23-8> 8</a>
</span><span class=lnt id=hl-23-9><a class=lnlinks href=#hl-23-9> 9</a>
</span><span class=lnt id=hl-23-10><a class=lnlinks href=#hl-23-10>10</a>
</span><span class=lnt id=hl-23-11><a class=lnlinks href=#hl-23-11>11</a>
</span><span class=lnt id=hl-23-12><a class=lnlinks href=#hl-23-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 서비스 등록</span>
</span></span><span class=line><span class=cl>curl -X PUT http://localhost:8500/v1/agent/service/register <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;ID&#34;: &#34;web-service-1&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;Name&#34;: &#34;web-service&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;Address&#34;: &#34;192.168.1.100&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;Port&#34;: 8080,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;Check&#34;: {
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;HTTP&#34;: &#34;http://192.168.1.100:8080/health&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;Interval&#34;: &#34;10s&#34;
</span></span></span><span class=line><span class=cl><span class=s1>    }
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>시나리오</strong>: DNS를 통한 투명한 서비스 발견으로 기존 애플리케이션 수정 최소화</p><h3 id=3-apache-zookeeper-기반-구현>3. Apache ZooKeeper 기반 구현<a hidden class=anchor aria-hidden=true href=#3-apache-zookeeper-기반-구현>#</a></h3><p><strong>정의</strong>: 분산 애플리케이션을 위한 중앙화된 구성 서비스</p><p><strong>구성</strong>:</p><ul><li>ZooKeeper Ensemble: 홀수 개의 노드로 구성된 클러스터</li><li>Curator Framework: Java 클라이언트 라이브러리</li></ul><p><strong>목적</strong>: 강한 일관성이 필요한 서비스 발견 시스템</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1>1</a>
</span><span class=lnt id=hl-24-2><a class=lnlinks href=#hl-24-2>2</a>
</span><span class=lnt id=hl-24-3><a class=lnlinks href=#hl-24-3>3</a>
</span><span class=lnt id=hl-24-4><a class=lnlinks href=#hl-24-4>4</a>
</span><span class=lnt id=hl-24-5><a class=lnlinks href=#hl-24-5>5</a>
</span><span class=lnt id=hl-24-6><a class=lnlinks href=#hl-24-6>6</a>
</span><span class=lnt id=hl-24-7><a class=lnlinks href=#hl-24-7>7</a>
</span><span class=lnt id=hl-24-8><a class=lnlinks href=#hl-24-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Curator를 사용한 서비스 등록</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>ServiceInstance</span><span class=o>&lt;</span><span class=n>Void</span><span class=o>&gt;</span><span class=w> </span><span class=n>instance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ServiceInstance</span><span class=p>.</span><span class=o>&lt;</span><span class=n>Void</span><span class=o>&gt;</span><span class=n>builder</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>.</span><span class=na>name</span><span class=p>(</span><span class=s>&#34;my-service&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>.</span><span class=na>address</span><span class=p>(</span><span class=s>&#34;localhost&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>.</span><span class=na>port</span><span class=p>(</span><span class=n>8080</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>.</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>serviceDiscovery</span><span class=p>.</span><span class=na>registerService</span><span class=p>(</span><span class=n>instance</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=4-etcd-기반-구현>4. etcd 기반 구현<a hidden class=anchor aria-hidden=true href=#4-etcd-기반-구현>#</a></h3><p><strong>정의</strong>: 분산 키-값 저장소를 활용한 서비스 레지스트리</p><p><strong>구성</strong>:</p><ul><li>etcd Cluster: Raft 합의 알고리즘 기반 클러스터</li><li>gRPC API: 고성능 통신 인터페이스</li></ul><p><strong>목적</strong>: Kubernetes와 같은 컨테이너 오케스트레이션 환경 지원</p><p><strong>시나리오</strong>: 컨테이너 기반 마이크로서비스의 동적 서비스 발견</p><h3 id=5-kubernetes-내장-서비스-발견>5. Kubernetes 내장 서비스 발견<a hidden class=anchor aria-hidden=true href=#5-kubernetes-내장-서비스-발견>#</a></h3><p><strong>정의</strong>: Kubernetes의 네이티브 서비스 발견 메커니즘</p><p><strong>구성</strong>:</p><ul><li>Service Objects: 논리적 서비스 정의</li><li>Endpoints API: 실제 Pod IP/Port 매핑</li><li>CoreDNS: DNS 기반 서비스 해석</li></ul><p><strong>목적</strong>: 컨테이너 환경에서 투명한 서비스 통신</p><p><strong>실제 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-25-1><a class=lnlinks href=#hl-25-1> 1</a>
</span><span class=lnt id=hl-25-2><a class=lnlinks href=#hl-25-2> 2</a>
</span><span class=lnt id=hl-25-3><a class=lnlinks href=#hl-25-3> 3</a>
</span><span class=lnt id=hl-25-4><a class=lnlinks href=#hl-25-4> 4</a>
</span><span class=lnt id=hl-25-5><a class=lnlinks href=#hl-25-5> 5</a>
</span><span class=lnt id=hl-25-6><a class=lnlinks href=#hl-25-6> 6</a>
</span><span class=lnt id=hl-25-7><a class=lnlinks href=#hl-25-7> 7</a>
</span><span class=lnt id=hl-25-8><a class=lnlinks href=#hl-25-8> 8</a>
</span><span class=lnt id=hl-25-9><a class=lnlinks href=#hl-25-9> 9</a>
</span><span class=lnt id=hl-25-10><a class=lnlinks href=#hl-25-10>10</a>
</span><span class=lnt id=hl-25-11><a class=lnlinks href=#hl-25-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>my-service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>my-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>TCP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>targetPort</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td><strong>동적 확장성</strong></td><td>서비스 인스턴스의 동적 추가/제거가 자동으로 반영되어 무중단 확장 가능</td></tr><tr><td></td><td><strong>장애 격리</strong></td><td>개별 서비스 장애가 전체 시스템에 전파되지 않고 자동으로 격리됨</td></tr><tr><td></td><td><strong>로드 밸런싱</strong></td><td>다중 인스턴스 간 트래픽 자동 분산으로 성능 최적화</td></tr><tr><td></td><td><strong>위치 투명성</strong></td><td>클라이언트가 서비스의 물리적 위치를 알 필요 없이 논리적 이름으로 접근</td></tr><tr><td></td><td><strong>개발 생산성</strong></td><td>하드코딩된 엔드포인트 제거로 개발 및 배포 프로세스 간소화</td></tr><tr><td></td><td><strong>운영 자동화</strong></td><td>헬스 체크와 자동 복구로 운영 부담 감소</td></tr><tr><td></td><td><strong>환경 독립성</strong></td><td>개발/테스트/운영 환경 간 코드 변경 없이 배포 가능</td></tr></tbody></table><h2 id=단점과-문제점-그리고-해결방안>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안>#</a></h2><h3 id=단점-2>단점<a hidden class=anchor aria-hidden=true href=#단점-2>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td><strong>추가 복잡성</strong></td><td>시스템에 새로운 컴포넌트 추가로 전체 아키텍처 복잡도 증가</td><td>매니지드 서비스 활용, 표준화된 도구 사용</td></tr><tr><td></td><td><strong>단일 장애점</strong></td><td>레지스트리 자체가 장애 시 전체 서비스 발견 기능 마비</td><td>다중 노드 클러스터링, 레플리케이션</td></tr><tr><td></td><td><strong>네트워크 오버헤드</strong></td><td>레지스트리 조회를 위한 추가 네트워크 통신 발생</td><td>클라이언트 사이드 캐싱, 로컬 DNS 캐시</td></tr><tr><td></td><td><strong>데이터 일관성</strong></td><td>분산 환경에서 모든 노드 간 실시간 동기화 어려움</td><td>최종 일관성 모델 적용, 합의 알고리즘 사용</td></tr><tr><td></td><td><strong>학습 곡선</strong></td><td>개발팀의 새로운 기술 스택 학습 필요</td><td>점진적 도입, 교육 프로그램 운영</td></tr></tbody></table><h3 id=문제점-2>문제점<a hidden class=anchor aria-hidden=true href=#문제점-2>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td><strong>Split Brain</strong></td><td>네트워크 파티션으로 인한 클러스터 분할</td><td>데이터 불일치, 중복 리더 선출</td><td>클러스터 상태 모니터링, 로그 분석</td><td>Quorum 기반 리더 선출</td><td>자동 파티션 복구, 데이터 재동기화</td></tr><tr><td></td><td><strong>성능 저하</strong></td><td>높은 조회 빈도로 인한 레지스트리 부하</td><td>응답 지연, 타임아웃 발생</td><td>메트릭 모니터링, APM 도구</td><td>캐싱 전략, 로드 밸런싱</td><td>읽기 전용 복제본 추가, CDN 활용</td></tr><tr><td></td><td><strong>메모리 누수</strong></td><td>장기간 미해제된 서비스 인스턴스 정보</td><td>메모리 사용량 증가, 성능 저하</td><td>메모리 사용량 모니터링</td><td>TTL 설정, 가비지 컬렉션</td><td>주기적 정리 작업, 자동 해제</td></tr><tr><td></td><td><strong>보안 취약점</strong></td><td>인증되지 않은 서비스 등록/조회</td><td>무단 접근, 데이터 유출</td><td>접근 로그 분석, 보안 스캔</td><td>ACL, TLS 암호화</td><td>인증/인가 시스템 강화</td></tr></tbody></table><h2 id=도전-과제>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제>#</a></h2><h3 id=1-확장성-과제>1. 확장성 과제<a hidden class=anchor aria-hidden=true href=#1-확장성-과제>#</a></h3><p><strong>원인</strong>: 마이크로서비스 수와 인스턴스 수의 지수적 증가
<strong>영향</strong>: 레지스트리 성능 저하, 메모리 부족
<strong>해결 방법</strong>:</p><ul><li>수평적 파티셔닝 (Sharding)</li><li>계층형 레지스트리 구조</li><li>지역별 분산 배치</li></ul><h3 id=2-네트워크-신뢰성-과제>2. 네트워크 신뢰성 과제<a hidden class=anchor aria-hidden=true href=#2-네트워크-신뢰성-과제>#</a></h3><p><strong>원인</strong>: 클라우드 환경의 불안정한 네트워크 연결
<strong>영향</strong>: 서비스 발견 실패, 잘못된 라우팅
<strong>해결 방법</strong>:</p><ul><li>Circuit Breaker 패턴 적용</li><li>멀티 리전 복제</li><li>Graceful Degradation 전략</li></ul><h3 id=3-보안-및-컴플라이언스-과제>3. 보안 및 컴플라이언스 과제<a hidden class=anchor aria-hidden=true href=#3-보안-및-컴플라이언스-과제>#</a></h3><p><strong>원인</strong>: 서비스 메시 확장에 따른 공격 표면 증가
<strong>영향</strong>: 데이터 유출, 규정 위반
<strong>해결 방법</strong>:</p><ul><li>Zero Trust 네트워크 모델</li><li>서비스 간 mTLS 적용</li><li>정기적 보안 감사</li></ul><h3 id=4-멀티-클라우드-통합-과제>4. 멀티 클라우드 통합 과제<a hidden class=anchor aria-hidden=true href=#4-멀티-클라우드-통합-과제>#</a></h3><p><strong>원인</strong>: 하이브리드/멀티 클라우드 환경의 복잡성
<strong>영향</strong>: 서비스 발견 불일치, 관리 복잡도 증가
<strong>해결 방법</strong>:</p><ul><li>연합형 서비스 레지스트리</li><li>클라우드 중립적 도구 사용</li><li>API Gateway를 통한 추상화</li></ul><h2 id=분류-기준에-따른-종류-및-유형>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형>#</a></h2><table><thead><tr><th>분류 기준</th><th>유형</th><th>특징</th><th>대표 구현체</th></tr></thead><tbody><tr><td><strong>아키텍처</strong></td><td>중앙집중형</td><td>단일 레지스트리 인스턴스</td><td>Netflix Eureka (단일)</td></tr><tr><td></td><td>분산형</td><td>다중 노드 클러스터</td><td>Consul, etcd</td></tr><tr><td><strong>발견 방식</strong></td><td>클라이언트 사이드</td><td>클라이언트가 직접 조회</td><td>Netflix Eureka + Ribbon</td></tr><tr><td></td><td>서버 사이드</td><td>로드밸런서가 대신 조회</td><td>AWS ELB, Kubernetes Service</td></tr><tr><td><strong>등록 방식</strong></td><td>자가 등록</td><td>서비스가 직접 등록</td><td>Spring Cloud Eureka</td></tr><tr><td></td><td>제3자 등록</td><td>외부 에이전트가 등록</td><td>Consul Agent, Registrator</td></tr><tr><td><strong>일관성 모델</strong></td><td>강한 일관성</td><td>CP (Consistency & Partition tolerance)</td><td>ZooKeeper, etcd</td></tr><tr><td></td><td>최종 일관성</td><td>AP (Availability & Partition tolerance)</td><td>Netflix Eureka</td></tr><tr><td><strong>배포 환경</strong></td><td>클라우드 네이티브</td><td>컨테이너 환경 최적화</td><td>Kubernetes, Istio</td></tr><tr><td></td><td>하이브리드</td><td>온프레미스-클라우드 연동</td><td>Consul Connect</td></tr><tr><td><strong>프로토콜</strong></td><td>HTTP 기반</td><td>RESTful API</td><td>대부분의 구현체</td></tr><tr><td></td><td>DNS 기반</td><td>DNS 프로토콜 사용</td><td>Consul DNS, CoreDNS</td></tr><tr><td></td><td>gRPC 기반</td><td>고성능 바이너리 프로토콜</td><td>etcd v3</td></tr></tbody></table><h2 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h2><table><thead><tr><th>사용 목적</th><th>함께 사용되는 기술</th><th>효과</th></tr></thead><tbody><tr><td><strong>마이크로서비스 통신</strong></td><td>API Gateway, Load Balancer</td><td>서비스 간 느슨한 결합, 동적 라우팅</td></tr><tr><td><strong>컨테이너 오케스트레이션</strong></td><td>Kubernetes, Docker Swarm</td><td>자동 서비스 발견, 헬스 체크</td></tr><tr><td><strong>서비스 메시 구현</strong></td><td>Istio, Linkerd, Consul Connect</td><td>트래픽 관리, 보안 정책 적용</td></tr><tr><td><strong>CI/CD 파이프라인</strong></td><td>Jenkins, GitLab CI, Spinnaker</td><td>무중단 배포, 블루-그린 배포</td></tr><tr><td><strong>모니터링 시스템</strong></td><td>Prometheus, Grafana</td><td>서비스 상태 시각화, 알림</td></tr><tr><td><strong>설정 관리</strong></td><td>Spring Cloud Config, Consul KV</td><td>중앙화된 설정, 동적 변경</td></tr><tr><td><strong>API 관리</strong></td><td>Kong, Zuul, Ambassador</td><td>API 버전 관리, 인증/인가</td></tr></tbody></table><h2 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h2><h3 id=netflix의-마이크로서비스-아키텍처>Netflix의 마이크로서비스 아키텍처<a hidden class=anchor aria-hidden=true href=#netflix의-마이크로서비스-아키텍처>#</a></h3><p>Netflix는 Eureka 서비스 레지스트리를 중심으로 한 대규모 마이크로서비스 생태계를 구축했습니다.</p><h4 id=시스템-구성>시스템 구성<a hidden class=anchor aria-hidden=true href=#시스템-구성>#</a></h4><ul><li><strong>Eureka Server</strong>: 다중 AWS 리전에 분산 배치</li><li><strong>Ribbon</strong>: 클라이언트 사이드 로드 밸런싱</li><li><strong>Hystrix</strong>: Circuit Breaker 패턴으로 장애 격리</li><li><strong>Zuul</strong>: API Gateway로 외부 트래픽 라우팅</li></ul><h4 id=시스템-구성-다이어그램>시스템 구성 다이어그램<a hidden class=anchor aria-hidden=true href=#시스템-구성-다이어그램>#</a></h4><pre class=mermaid>graph TB
    subgraph &#34;AWS Region 1&#34;
        subgraph &#34;AZ 1a&#34;
            E1[Eureka Server 1]
            MS1[Microservice A-1]
            MS2[Microservice B-1]
        end
        subgraph &#34;AZ 1b&#34;
            E2[Eureka Server 2]
            MS3[Microservice A-2]
            MS4[Microservice B-2]
        end
    end
    
    subgraph &#34;AWS Region 2&#34;
        subgraph &#34;AZ 2a&#34;
            E3[Eureka Server 3]
            MS5[Microservice A-3]
        end
    end
    
    subgraph &#34;Client&#34;
        C1[Web Client]
        C2[Mobile App]
    end
    
    subgraph &#34;API Gateway&#34;
        Z1[Zuul Gateway 1]
        Z2[Zuul Gateway 2]
    end
    
    C1 --&gt; Z1
    C2 --&gt; Z2
    
    Z1 --&gt; E1
    Z2 --&gt; E2
    
    MS1 --&gt; E1
    MS2 --&gt; E1
    MS3 --&gt; E2
    MS4 --&gt; E2
    MS5 --&gt; E3
    
    E1 -.-&gt; E2
    E2 -.-&gt; E3
    E3 -.-&gt; E1
    
    style E1 fill:#4caf50
    style E2 fill:#4caf50
    style E3 fill:#4caf50
</pre><h4 id=활용-사례-workflow>활용 사례 Workflow<a hidden class=anchor aria-hidden=true href=#활용-사례-workflow>#</a></h4><ol><li><strong>서비스 등록</strong>: 각 마이크로서비스가 시작되면 가장 가까운 Eureka Server에 자동 등록</li><li><strong>헬스 체크</strong>: 30초마다 하트비트를 전송하여 생존 상태 확인</li><li><strong>서비스 발견</strong>: Zuul Gateway가 클라이언트 요청을 받으면 Eureka에서 대상 서비스 위치 조회</li><li><strong>로드 밸런싱</strong>: Ribbon을 통해 가용한 인스턴스 중 하나를 선택</li><li><strong>장애 처리</strong>: Hystrix Circuit Breaker가 장애 인스턴스를 자동으로 격리</li></ol><h4 id=service-registry-역할>Service Registry 역할<a hidden class=anchor aria-hidden=true href=#service-registry-역할>#</a></h4><ul><li><strong>동적 스케일링</strong>: 오토 스케일링으로 생성된 새 인스턴스를 즉시 등록</li><li><strong>장애 복구</strong>: 장애 인스턴스를 자동으로 감지하고 트래픽에서 제외</li><li><strong>지역별 라우팅</strong>: 지연 시간 최소화를 위한 지역 기반 라우팅</li></ul><h4 id=service-registry-유무에-따른-차이점>Service Registry 유무에 따른 차이점<a hidden class=anchor aria-hidden=true href=#service-registry-유무에-따른-차이점>#</a></h4><p><strong>Service Registry 사용 시</strong>:</p><ul><li>서비스 인스턴스 추가/제거가 즉시 반영</li><li>장애 인스턴스 자동 감지 및 격리</li><li>글로벌 로드 밸런싱 최적화</li><li>무중단 배포 및 업데이트</li></ul><p><strong>Service Registry 미사용 시</strong>:</p><ul><li>정적 설정 파일로 엔드포인트 관리 필요</li><li>장애 시 수동 개입 필요</li><li>스케일링 시 모든 클라이언트 설정 변경 필요</li><li>배포 시 다운타임 발생</li></ul><h2 id=구현-예시>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시>#</a></h2><p>Netflix Eureka 기반의 Service Registry 구현 예시를 JavaScript로 작성하겠습니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-27-1><a class=lnlinks href=#hl-27-1>  1</a>
</span><span class=lnt id=hl-27-2><a class=lnlinks href=#hl-27-2>  2</a>
</span><span class=lnt id=hl-27-3><a class=lnlinks href=#hl-27-3>  3</a>
</span><span class=lnt id=hl-27-4><a class=lnlinks href=#hl-27-4>  4</a>
</span><span class=lnt id=hl-27-5><a class=lnlinks href=#hl-27-5>  5</a>
</span><span class=lnt id=hl-27-6><a class=lnlinks href=#hl-27-6>  6</a>
</span><span class=lnt id=hl-27-7><a class=lnlinks href=#hl-27-7>  7</a>
</span><span class=lnt id=hl-27-8><a class=lnlinks href=#hl-27-8>  8</a>
</span><span class=lnt id=hl-27-9><a class=lnlinks href=#hl-27-9>  9</a>
</span><span class=lnt id=hl-27-10><a class=lnlinks href=#hl-27-10> 10</a>
</span><span class=lnt id=hl-27-11><a class=lnlinks href=#hl-27-11> 11</a>
</span><span class=lnt id=hl-27-12><a class=lnlinks href=#hl-27-12> 12</a>
</span><span class=lnt id=hl-27-13><a class=lnlinks href=#hl-27-13> 13</a>
</span><span class=lnt id=hl-27-14><a class=lnlinks href=#hl-27-14> 14</a>
</span><span class=lnt id=hl-27-15><a class=lnlinks href=#hl-27-15> 15</a>
</span><span class=lnt id=hl-27-16><a class=lnlinks href=#hl-27-16> 16</a>
</span><span class=lnt id=hl-27-17><a class=lnlinks href=#hl-27-17> 17</a>
</span><span class=lnt id=hl-27-18><a class=lnlinks href=#hl-27-18> 18</a>
</span><span class=lnt id=hl-27-19><a class=lnlinks href=#hl-27-19> 19</a>
</span><span class=lnt id=hl-27-20><a class=lnlinks href=#hl-27-20> 20</a>
</span><span class=lnt id=hl-27-21><a class=lnlinks href=#hl-27-21> 21</a>
</span><span class=lnt id=hl-27-22><a class=lnlinks href=#hl-27-22> 22</a>
</span><span class=lnt id=hl-27-23><a class=lnlinks href=#hl-27-23> 23</a>
</span><span class=lnt id=hl-27-24><a class=lnlinks href=#hl-27-24> 24</a>
</span><span class=lnt id=hl-27-25><a class=lnlinks href=#hl-27-25> 25</a>
</span><span class=lnt id=hl-27-26><a class=lnlinks href=#hl-27-26> 26</a>
</span><span class=lnt id=hl-27-27><a class=lnlinks href=#hl-27-27> 27</a>
</span><span class=lnt id=hl-27-28><a class=lnlinks href=#hl-27-28> 28</a>
</span><span class=lnt id=hl-27-29><a class=lnlinks href=#hl-27-29> 29</a>
</span><span class=lnt id=hl-27-30><a class=lnlinks href=#hl-27-30> 30</a>
</span><span class=lnt id=hl-27-31><a class=lnlinks href=#hl-27-31> 31</a>
</span><span class=lnt id=hl-27-32><a class=lnlinks href=#hl-27-32> 32</a>
</span><span class=lnt id=hl-27-33><a class=lnlinks href=#hl-27-33> 33</a>
</span><span class=lnt id=hl-27-34><a class=lnlinks href=#hl-27-34> 34</a>
</span><span class=lnt id=hl-27-35><a class=lnlinks href=#hl-27-35> 35</a>
</span><span class=lnt id=hl-27-36><a class=lnlinks href=#hl-27-36> 36</a>
</span><span class=lnt id=hl-27-37><a class=lnlinks href=#hl-27-37> 37</a>
</span><span class=lnt id=hl-27-38><a class=lnlinks href=#hl-27-38> 38</a>
</span><span class=lnt id=hl-27-39><a class=lnlinks href=#hl-27-39> 39</a>
</span><span class=lnt id=hl-27-40><a class=lnlinks href=#hl-27-40> 40</a>
</span><span class=lnt id=hl-27-41><a class=lnlinks href=#hl-27-41> 41</a>
</span><span class=lnt id=hl-27-42><a class=lnlinks href=#hl-27-42> 42</a>
</span><span class=lnt id=hl-27-43><a class=lnlinks href=#hl-27-43> 43</a>
</span><span class=lnt id=hl-27-44><a class=lnlinks href=#hl-27-44> 44</a>
</span><span class=lnt id=hl-27-45><a class=lnlinks href=#hl-27-45> 45</a>
</span><span class=lnt id=hl-27-46><a class=lnlinks href=#hl-27-46> 46</a>
</span><span class=lnt id=hl-27-47><a class=lnlinks href=#hl-27-47> 47</a>
</span><span class=lnt id=hl-27-48><a class=lnlinks href=#hl-27-48> 48</a>
</span><span class=lnt id=hl-27-49><a class=lnlinks href=#hl-27-49> 49</a>
</span><span class=lnt id=hl-27-50><a class=lnlinks href=#hl-27-50> 50</a>
</span><span class=lnt id=hl-27-51><a class=lnlinks href=#hl-27-51> 51</a>
</span><span class=lnt id=hl-27-52><a class=lnlinks href=#hl-27-52> 52</a>
</span><span class=lnt id=hl-27-53><a class=lnlinks href=#hl-27-53> 53</a>
</span><span class=lnt id=hl-27-54><a class=lnlinks href=#hl-27-54> 54</a>
</span><span class=lnt id=hl-27-55><a class=lnlinks href=#hl-27-55> 55</a>
</span><span class=lnt id=hl-27-56><a class=lnlinks href=#hl-27-56> 56</a>
</span><span class=lnt id=hl-27-57><a class=lnlinks href=#hl-27-57> 57</a>
</span><span class=lnt id=hl-27-58><a class=lnlinks href=#hl-27-58> 58</a>
</span><span class=lnt id=hl-27-59><a class=lnlinks href=#hl-27-59> 59</a>
</span><span class=lnt id=hl-27-60><a class=lnlinks href=#hl-27-60> 60</a>
</span><span class=lnt id=hl-27-61><a class=lnlinks href=#hl-27-61> 61</a>
</span><span class=lnt id=hl-27-62><a class=lnlinks href=#hl-27-62> 62</a>
</span><span class=lnt id=hl-27-63><a class=lnlinks href=#hl-27-63> 63</a>
</span><span class=lnt id=hl-27-64><a class=lnlinks href=#hl-27-64> 64</a>
</span><span class=lnt id=hl-27-65><a class=lnlinks href=#hl-27-65> 65</a>
</span><span class=lnt id=hl-27-66><a class=lnlinks href=#hl-27-66> 66</a>
</span><span class=lnt id=hl-27-67><a class=lnlinks href=#hl-27-67> 67</a>
</span><span class=lnt id=hl-27-68><a class=lnlinks href=#hl-27-68> 68</a>
</span><span class=lnt id=hl-27-69><a class=lnlinks href=#hl-27-69> 69</a>
</span><span class=lnt id=hl-27-70><a class=lnlinks href=#hl-27-70> 70</a>
</span><span class=lnt id=hl-27-71><a class=lnlinks href=#hl-27-71> 71</a>
</span><span class=lnt id=hl-27-72><a class=lnlinks href=#hl-27-72> 72</a>
</span><span class=lnt id=hl-27-73><a class=lnlinks href=#hl-27-73> 73</a>
</span><span class=lnt id=hl-27-74><a class=lnlinks href=#hl-27-74> 74</a>
</span><span class=lnt id=hl-27-75><a class=lnlinks href=#hl-27-75> 75</a>
</span><span class=lnt id=hl-27-76><a class=lnlinks href=#hl-27-76> 76</a>
</span><span class=lnt id=hl-27-77><a class=lnlinks href=#hl-27-77> 77</a>
</span><span class=lnt id=hl-27-78><a class=lnlinks href=#hl-27-78> 78</a>
</span><span class=lnt id=hl-27-79><a class=lnlinks href=#hl-27-79> 79</a>
</span><span class=lnt id=hl-27-80><a class=lnlinks href=#hl-27-80> 80</a>
</span><span class=lnt id=hl-27-81><a class=lnlinks href=#hl-27-81> 81</a>
</span><span class=lnt id=hl-27-82><a class=lnlinks href=#hl-27-82> 82</a>
</span><span class=lnt id=hl-27-83><a class=lnlinks href=#hl-27-83> 83</a>
</span><span class=lnt id=hl-27-84><a class=lnlinks href=#hl-27-84> 84</a>
</span><span class=lnt id=hl-27-85><a class=lnlinks href=#hl-27-85> 85</a>
</span><span class=lnt id=hl-27-86><a class=lnlinks href=#hl-27-86> 86</a>
</span><span class=lnt id=hl-27-87><a class=lnlinks href=#hl-27-87> 87</a>
</span><span class=lnt id=hl-27-88><a class=lnlinks href=#hl-27-88> 88</a>
</span><span class=lnt id=hl-27-89><a class=lnlinks href=#hl-27-89> 89</a>
</span><span class=lnt id=hl-27-90><a class=lnlinks href=#hl-27-90> 90</a>
</span><span class=lnt id=hl-27-91><a class=lnlinks href=#hl-27-91> 91</a>
</span><span class=lnt id=hl-27-92><a class=lnlinks href=#hl-27-92> 92</a>
</span><span class=lnt id=hl-27-93><a class=lnlinks href=#hl-27-93> 93</a>
</span><span class=lnt id=hl-27-94><a class=lnlinks href=#hl-27-94> 94</a>
</span><span class=lnt id=hl-27-95><a class=lnlinks href=#hl-27-95> 95</a>
</span><span class=lnt id=hl-27-96><a class=lnlinks href=#hl-27-96> 96</a>
</span><span class=lnt id=hl-27-97><a class=lnlinks href=#hl-27-97> 97</a>
</span><span class=lnt id=hl-27-98><a class=lnlinks href=#hl-27-98> 98</a>
</span><span class=lnt id=hl-27-99><a class=lnlinks href=#hl-27-99> 99</a>
</span><span class=lnt id=hl-27-100><a class=lnlinks href=#hl-27-100>100</a>
</span><span class=lnt id=hl-27-101><a class=lnlinks href=#hl-27-101>101</a>
</span><span class=lnt id=hl-27-102><a class=lnlinks href=#hl-27-102>102</a>
</span><span class=lnt id=hl-27-103><a class=lnlinks href=#hl-27-103>103</a>
</span><span class=lnt id=hl-27-104><a class=lnlinks href=#hl-27-104>104</a>
</span><span class=lnt id=hl-27-105><a class=lnlinks href=#hl-27-105>105</a>
</span><span class=lnt id=hl-27-106><a class=lnlinks href=#hl-27-106>106</a>
</span><span class=lnt id=hl-27-107><a class=lnlinks href=#hl-27-107>107</a>
</span><span class=lnt id=hl-27-108><a class=lnlinks href=#hl-27-108>108</a>
</span><span class=lnt id=hl-27-109><a class=lnlinks href=#hl-27-109>109</a>
</span><span class=lnt id=hl-27-110><a class=lnlinks href=#hl-27-110>110</a>
</span><span class=lnt id=hl-27-111><a class=lnlinks href=#hl-27-111>111</a>
</span><span class=lnt id=hl-27-112><a class=lnlinks href=#hl-27-112>112</a>
</span><span class=lnt id=hl-27-113><a class=lnlinks href=#hl-27-113>113</a>
</span><span class=lnt id=hl-27-114><a class=lnlinks href=#hl-27-114>114</a>
</span><span class=lnt id=hl-27-115><a class=lnlinks href=#hl-27-115>115</a>
</span><span class=lnt id=hl-27-116><a class=lnlinks href=#hl-27-116>116</a>
</span><span class=lnt id=hl-27-117><a class=lnlinks href=#hl-27-117>117</a>
</span><span class=lnt id=hl-27-118><a class=lnlinks href=#hl-27-118>118</a>
</span><span class=lnt id=hl-27-119><a class=lnlinks href=#hl-27-119>119</a>
</span><span class=lnt id=hl-27-120><a class=lnlinks href=#hl-27-120>120</a>
</span><span class=lnt id=hl-27-121><a class=lnlinks href=#hl-27-121>121</a>
</span><span class=lnt id=hl-27-122><a class=lnlinks href=#hl-27-122>122</a>
</span><span class=lnt id=hl-27-123><a class=lnlinks href=#hl-27-123>123</a>
</span><span class=lnt id=hl-27-124><a class=lnlinks href=#hl-27-124>124</a>
</span><span class=lnt id=hl-27-125><a class=lnlinks href=#hl-27-125>125</a>
</span><span class=lnt id=hl-27-126><a class=lnlinks href=#hl-27-126>126</a>
</span><span class=lnt id=hl-27-127><a class=lnlinks href=#hl-27-127>127</a>
</span><span class=lnt id=hl-27-128><a class=lnlinks href=#hl-27-128>128</a>
</span><span class=lnt id=hl-27-129><a class=lnlinks href=#hl-27-129>129</a>
</span><span class=lnt id=hl-27-130><a class=lnlinks href=#hl-27-130>130</a>
</span><span class=lnt id=hl-27-131><a class=lnlinks href=#hl-27-131>131</a>
</span><span class=lnt id=hl-27-132><a class=lnlinks href=#hl-27-132>132</a>
</span><span class=lnt id=hl-27-133><a class=lnlinks href=#hl-27-133>133</a>
</span><span class=lnt id=hl-27-134><a class=lnlinks href=#hl-27-134>134</a>
</span><span class=lnt id=hl-27-135><a class=lnlinks href=#hl-27-135>135</a>
</span><span class=lnt id=hl-27-136><a class=lnlinks href=#hl-27-136>136</a>
</span><span class=lnt id=hl-27-137><a class=lnlinks href=#hl-27-137>137</a>
</span><span class=lnt id=hl-27-138><a class=lnlinks href=#hl-27-138>138</a>
</span><span class=lnt id=hl-27-139><a class=lnlinks href=#hl-27-139>139</a>
</span><span class=lnt id=hl-27-140><a class=lnlinks href=#hl-27-140>140</a>
</span><span class=lnt id=hl-27-141><a class=lnlinks href=#hl-27-141>141</a>
</span><span class=lnt id=hl-27-142><a class=lnlinks href=#hl-27-142>142</a>
</span><span class=lnt id=hl-27-143><a class=lnlinks href=#hl-27-143>143</a>
</span><span class=lnt id=hl-27-144><a class=lnlinks href=#hl-27-144>144</a>
</span><span class=lnt id=hl-27-145><a class=lnlinks href=#hl-27-145>145</a>
</span><span class=lnt id=hl-27-146><a class=lnlinks href=#hl-27-146>146</a>
</span><span class=lnt id=hl-27-147><a class=lnlinks href=#hl-27-147>147</a>
</span><span class=lnt id=hl-27-148><a class=lnlinks href=#hl-27-148>148</a>
</span><span class=lnt id=hl-27-149><a class=lnlinks href=#hl-27-149>149</a>
</span><span class=lnt id=hl-27-150><a class=lnlinks href=#hl-27-150>150</a>
</span><span class=lnt id=hl-27-151><a class=lnlinks href=#hl-27-151>151</a>
</span><span class=lnt id=hl-27-152><a class=lnlinks href=#hl-27-152>152</a>
</span><span class=lnt id=hl-27-153><a class=lnlinks href=#hl-27-153>153</a>
</span><span class=lnt id=hl-27-154><a class=lnlinks href=#hl-27-154>154</a>
</span><span class=lnt id=hl-27-155><a class=lnlinks href=#hl-27-155>155</a>
</span><span class=lnt id=hl-27-156><a class=lnlinks href=#hl-27-156>156</a>
</span><span class=lnt id=hl-27-157><a class=lnlinks href=#hl-27-157>157</a>
</span><span class=lnt id=hl-27-158><a class=lnlinks href=#hl-27-158>158</a>
</span><span class=lnt id=hl-27-159><a class=lnlinks href=#hl-27-159>159</a>
</span><span class=lnt id=hl-27-160><a class=lnlinks href=#hl-27-160>160</a>
</span><span class=lnt id=hl-27-161><a class=lnlinks href=#hl-27-161>161</a>
</span><span class=lnt id=hl-27-162><a class=lnlinks href=#hl-27-162>162</a>
</span><span class=lnt id=hl-27-163><a class=lnlinks href=#hl-27-163>163</a>
</span><span class=lnt id=hl-27-164><a class=lnlinks href=#hl-27-164>164</a>
</span><span class=lnt id=hl-27-165><a class=lnlinks href=#hl-27-165>165</a>
</span><span class=lnt id=hl-27-166><a class=lnlinks href=#hl-27-166>166</a>
</span><span class=lnt id=hl-27-167><a class=lnlinks href=#hl-27-167>167</a>
</span><span class=lnt id=hl-27-168><a class=lnlinks href=#hl-27-168>168</a>
</span><span class=lnt id=hl-27-169><a class=lnlinks href=#hl-27-169>169</a>
</span><span class=lnt id=hl-27-170><a class=lnlinks href=#hl-27-170>170</a>
</span><span class=lnt id=hl-27-171><a class=lnlinks href=#hl-27-171>171</a>
</span><span class=lnt id=hl-27-172><a class=lnlinks href=#hl-27-172>172</a>
</span><span class=lnt id=hl-27-173><a class=lnlinks href=#hl-27-173>173</a>
</span><span class=lnt id=hl-27-174><a class=lnlinks href=#hl-27-174>174</a>
</span><span class=lnt id=hl-27-175><a class=lnlinks href=#hl-27-175>175</a>
</span><span class=lnt id=hl-27-176><a class=lnlinks href=#hl-27-176>176</a>
</span><span class=lnt id=hl-27-177><a class=lnlinks href=#hl-27-177>177</a>
</span><span class=lnt id=hl-27-178><a class=lnlinks href=#hl-27-178>178</a>
</span><span class=lnt id=hl-27-179><a class=lnlinks href=#hl-27-179>179</a>
</span><span class=lnt id=hl-27-180><a class=lnlinks href=#hl-27-180>180</a>
</span><span class=lnt id=hl-27-181><a class=lnlinks href=#hl-27-181>181</a>
</span><span class=lnt id=hl-27-182><a class=lnlinks href=#hl-27-182>182</a>
</span><span class=lnt id=hl-27-183><a class=lnlinks href=#hl-27-183>183</a>
</span><span class=lnt id=hl-27-184><a class=lnlinks href=#hl-27-184>184</a>
</span><span class=lnt id=hl-27-185><a class=lnlinks href=#hl-27-185>185</a>
</span><span class=lnt id=hl-27-186><a class=lnlinks href=#hl-27-186>186</a>
</span><span class=lnt id=hl-27-187><a class=lnlinks href=#hl-27-187>187</a>
</span><span class=lnt id=hl-27-188><a class=lnlinks href=#hl-27-188>188</a>
</span><span class=lnt id=hl-27-189><a class=lnlinks href=#hl-27-189>189</a>
</span><span class=lnt id=hl-27-190><a class=lnlinks href=#hl-27-190>190</a>
</span><span class=lnt id=hl-27-191><a class=lnlinks href=#hl-27-191>191</a>
</span><span class=lnt id=hl-27-192><a class=lnlinks href=#hl-27-192>192</a>
</span><span class=lnt id=hl-27-193><a class=lnlinks href=#hl-27-193>193</a>
</span><span class=lnt id=hl-27-194><a class=lnlinks href=#hl-27-194>194</a>
</span><span class=lnt id=hl-27-195><a class=lnlinks href=#hl-27-195>195</a>
</span><span class=lnt id=hl-27-196><a class=lnlinks href=#hl-27-196>196</a>
</span><span class=lnt id=hl-27-197><a class=lnlinks href=#hl-27-197>197</a>
</span><span class=lnt id=hl-27-198><a class=lnlinks href=#hl-27-198>198</a>
</span><span class=lnt id=hl-27-199><a class=lnlinks href=#hl-27-199>199</a>
</span><span class=lnt id=hl-27-200><a class=lnlinks href=#hl-27-200>200</a>
</span><span class=lnt id=hl-27-201><a class=lnlinks href=#hl-27-201>201</a>
</span><span class=lnt id=hl-27-202><a class=lnlinks href=#hl-27-202>202</a>
</span><span class=lnt id=hl-27-203><a class=lnlinks href=#hl-27-203>203</a>
</span><span class=lnt id=hl-27-204><a class=lnlinks href=#hl-27-204>204</a>
</span><span class=lnt id=hl-27-205><a class=lnlinks href=#hl-27-205>205</a>
</span><span class=lnt id=hl-27-206><a class=lnlinks href=#hl-27-206>206</a>
</span><span class=lnt id=hl-27-207><a class=lnlinks href=#hl-27-207>207</a>
</span><span class=lnt id=hl-27-208><a class=lnlinks href=#hl-27-208>208</a>
</span><span class=lnt id=hl-27-209><a class=lnlinks href=#hl-27-209>209</a>
</span><span class=lnt id=hl-27-210><a class=lnlinks href=#hl-27-210>210</a>
</span><span class=lnt id=hl-27-211><a class=lnlinks href=#hl-27-211>211</a>
</span><span class=lnt id=hl-27-212><a class=lnlinks href=#hl-27-212>212</a>
</span><span class=lnt id=hl-27-213><a class=lnlinks href=#hl-27-213>213</a>
</span><span class=lnt id=hl-27-214><a class=lnlinks href=#hl-27-214>214</a>
</span><span class=lnt id=hl-27-215><a class=lnlinks href=#hl-27-215>215</a>
</span><span class=lnt id=hl-27-216><a class=lnlinks href=#hl-27-216>216</a>
</span><span class=lnt id=hl-27-217><a class=lnlinks href=#hl-27-217>217</a>
</span><span class=lnt id=hl-27-218><a class=lnlinks href=#hl-27-218>218</a>
</span><span class=lnt id=hl-27-219><a class=lnlinks href=#hl-27-219>219</a>
</span><span class=lnt id=hl-27-220><a class=lnlinks href=#hl-27-220>220</a>
</span><span class=lnt id=hl-27-221><a class=lnlinks href=#hl-27-221>221</a>
</span><span class=lnt id=hl-27-222><a class=lnlinks href=#hl-27-222>222</a>
</span><span class=lnt id=hl-27-223><a class=lnlinks href=#hl-27-223>223</a>
</span><span class=lnt id=hl-27-224><a class=lnlinks href=#hl-27-224>224</a>
</span><span class=lnt id=hl-27-225><a class=lnlinks href=#hl-27-225>225</a>
</span><span class=lnt id=hl-27-226><a class=lnlinks href=#hl-27-226>226</a>
</span><span class=lnt id=hl-27-227><a class=lnlinks href=#hl-27-227>227</a>
</span><span class=lnt id=hl-27-228><a class=lnlinks href=#hl-27-228>228</a>
</span><span class=lnt id=hl-27-229><a class=lnlinks href=#hl-27-229>229</a>
</span><span class=lnt id=hl-27-230><a class=lnlinks href=#hl-27-230>230</a>
</span><span class=lnt id=hl-27-231><a class=lnlinks href=#hl-27-231>231</a>
</span><span class=lnt id=hl-27-232><a class=lnlinks href=#hl-27-232>232</a>
</span><span class=lnt id=hl-27-233><a class=lnlinks href=#hl-27-233>233</a>
</span><span class=lnt id=hl-27-234><a class=lnlinks href=#hl-27-234>234</a>
</span><span class=lnt id=hl-27-235><a class=lnlinks href=#hl-27-235>235</a>
</span><span class=lnt id=hl-27-236><a class=lnlinks href=#hl-27-236>236</a>
</span><span class=lnt id=hl-27-237><a class=lnlinks href=#hl-27-237>237</a>
</span><span class=lnt id=hl-27-238><a class=lnlinks href=#hl-27-238>238</a>
</span><span class=lnt id=hl-27-239><a class=lnlinks href=#hl-27-239>239</a>
</span><span class=lnt id=hl-27-240><a class=lnlinks href=#hl-27-240>240</a>
</span><span class=lnt id=hl-27-241><a class=lnlinks href=#hl-27-241>241</a>
</span><span class=lnt id=hl-27-242><a class=lnlinks href=#hl-27-242>242</a>
</span><span class=lnt id=hl-27-243><a class=lnlinks href=#hl-27-243>243</a>
</span><span class=lnt id=hl-27-244><a class=lnlinks href=#hl-27-244>244</a>
</span><span class=lnt id=hl-27-245><a class=lnlinks href=#hl-27-245>245</a>
</span><span class=lnt id=hl-27-246><a class=lnlinks href=#hl-27-246>246</a>
</span><span class=lnt id=hl-27-247><a class=lnlinks href=#hl-27-247>247</a>
</span><span class=lnt id=hl-27-248><a class=lnlinks href=#hl-27-248>248</a>
</span><span class=lnt id=hl-27-249><a class=lnlinks href=#hl-27-249>249</a>
</span><span class=lnt id=hl-27-250><a class=lnlinks href=#hl-27-250>250</a>
</span><span class=lnt id=hl-27-251><a class=lnlinks href=#hl-27-251>251</a>
</span><span class=lnt id=hl-27-252><a class=lnlinks href=#hl-27-252>252</a>
</span><span class=lnt id=hl-27-253><a class=lnlinks href=#hl-27-253>253</a>
</span><span class=lnt id=hl-27-254><a class=lnlinks href=#hl-27-254>254</a>
</span><span class=lnt id=hl-27-255><a class=lnlinks href=#hl-27-255>255</a>
</span><span class=lnt id=hl-27-256><a class=lnlinks href=#hl-27-256>256</a>
</span><span class=lnt id=hl-27-257><a class=lnlinks href=#hl-27-257>257</a>
</span><span class=lnt id=hl-27-258><a class=lnlinks href=#hl-27-258>258</a>
</span><span class=lnt id=hl-27-259><a class=lnlinks href=#hl-27-259>259</a>
</span><span class=lnt id=hl-27-260><a class=lnlinks href=#hl-27-260>260</a>
</span><span class=lnt id=hl-27-261><a class=lnlinks href=#hl-27-261>261</a>
</span><span class=lnt id=hl-27-262><a class=lnlinks href=#hl-27-262>262</a>
</span><span class=lnt id=hl-27-263><a class=lnlinks href=#hl-27-263>263</a>
</span><span class=lnt id=hl-27-264><a class=lnlinks href=#hl-27-264>264</a>
</span><span class=lnt id=hl-27-265><a class=lnlinks href=#hl-27-265>265</a>
</span><span class=lnt id=hl-27-266><a class=lnlinks href=#hl-27-266>266</a>
</span><span class=lnt id=hl-27-267><a class=lnlinks href=#hl-27-267>267</a>
</span><span class=lnt id=hl-27-268><a class=lnlinks href=#hl-27-268>268</a>
</span><span class=lnt id=hl-27-269><a class=lnlinks href=#hl-27-269>269</a>
</span><span class=lnt id=hl-27-270><a class=lnlinks href=#hl-27-270>270</a>
</span><span class=lnt id=hl-27-271><a class=lnlinks href=#hl-27-271>271</a>
</span><span class=lnt id=hl-27-272><a class=lnlinks href=#hl-27-272>272</a>
</span><span class=lnt id=hl-27-273><a class=lnlinks href=#hl-27-273>273</a>
</span><span class=lnt id=hl-27-274><a class=lnlinks href=#hl-27-274>274</a>
</span><span class=lnt id=hl-27-275><a class=lnlinks href=#hl-27-275>275</a>
</span><span class=lnt id=hl-27-276><a class=lnlinks href=#hl-27-276>276</a>
</span><span class=lnt id=hl-27-277><a class=lnlinks href=#hl-27-277>277</a>
</span><span class=lnt id=hl-27-278><a class=lnlinks href=#hl-27-278>278</a>
</span><span class=lnt id=hl-27-279><a class=lnlinks href=#hl-27-279>279</a>
</span><span class=lnt id=hl-27-280><a class=lnlinks href=#hl-27-280>280</a>
</span><span class=lnt id=hl-27-281><a class=lnlinks href=#hl-27-281>281</a>
</span><span class=lnt id=hl-27-282><a class=lnlinks href=#hl-27-282>282</a>
</span><span class=lnt id=hl-27-283><a class=lnlinks href=#hl-27-283>283</a>
</span><span class=lnt id=hl-27-284><a class=lnlinks href=#hl-27-284>284</a>
</span><span class=lnt id=hl-27-285><a class=lnlinks href=#hl-27-285>285</a>
</span><span class=lnt id=hl-27-286><a class=lnlinks href=#hl-27-286>286</a>
</span><span class=lnt id=hl-27-287><a class=lnlinks href=#hl-27-287>287</a>
</span><span class=lnt id=hl-27-288><a class=lnlinks href=#hl-27-288>288</a>
</span><span class=lnt id=hl-27-289><a class=lnlinks href=#hl-27-289>289</a>
</span><span class=lnt id=hl-27-290><a class=lnlinks href=#hl-27-290>290</a>
</span><span class=lnt id=hl-27-291><a class=lnlinks href=#hl-27-291>291</a>
</span><span class=lnt id=hl-27-292><a class=lnlinks href=#hl-27-292>292</a>
</span><span class=lnt id=hl-27-293><a class=lnlinks href=#hl-27-293>293</a>
</span><span class=lnt id=hl-27-294><a class=lnlinks href=#hl-27-294>294</a>
</span><span class=lnt id=hl-27-295><a class=lnlinks href=#hl-27-295>295</a>
</span><span class=lnt id=hl-27-296><a class=lnlinks href=#hl-27-296>296</a>
</span><span class=lnt id=hl-27-297><a class=lnlinks href=#hl-27-297>297</a>
</span><span class=lnt id=hl-27-298><a class=lnlinks href=#hl-27-298>298</a>
</span><span class=lnt id=hl-27-299><a class=lnlinks href=#hl-27-299>299</a>
</span><span class=lnt id=hl-27-300><a class=lnlinks href=#hl-27-300>300</a>
</span><span class=lnt id=hl-27-301><a class=lnlinks href=#hl-27-301>301</a>
</span><span class=lnt id=hl-27-302><a class=lnlinks href=#hl-27-302>302</a>
</span><span class=lnt id=hl-27-303><a class=lnlinks href=#hl-27-303>303</a>
</span><span class=lnt id=hl-27-304><a class=lnlinks href=#hl-27-304>304</a>
</span><span class=lnt id=hl-27-305><a class=lnlinks href=#hl-27-305>305</a>
</span><span class=lnt id=hl-27-306><a class=lnlinks href=#hl-27-306>306</a>
</span><span class=lnt id=hl-27-307><a class=lnlinks href=#hl-27-307>307</a>
</span><span class=lnt id=hl-27-308><a class=lnlinks href=#hl-27-308>308</a>
</span><span class=lnt id=hl-27-309><a class=lnlinks href=#hl-27-309>309</a>
</span><span class=lnt id=hl-27-310><a class=lnlinks href=#hl-27-310>310</a>
</span><span class=lnt id=hl-27-311><a class=lnlinks href=#hl-27-311>311</a>
</span><span class=lnt id=hl-27-312><a class=lnlinks href=#hl-27-312>312</a>
</span><span class=lnt id=hl-27-313><a class=lnlinks href=#hl-27-313>313</a>
</span><span class=lnt id=hl-27-314><a class=lnlinks href=#hl-27-314>314</a>
</span><span class=lnt id=hl-27-315><a class=lnlinks href=#hl-27-315>315</a>
</span><span class=lnt id=hl-27-316><a class=lnlinks href=#hl-27-316>316</a>
</span><span class=lnt id=hl-27-317><a class=lnlinks href=#hl-27-317>317</a>
</span><span class=lnt id=hl-27-318><a class=lnlinks href=#hl-27-318>318</a>
</span><span class=lnt id=hl-27-319><a class=lnlinks href=#hl-27-319>319</a>
</span><span class=lnt id=hl-27-320><a class=lnlinks href=#hl-27-320>320</a>
</span><span class=lnt id=hl-27-321><a class=lnlinks href=#hl-27-321>321</a>
</span><span class=lnt id=hl-27-322><a class=lnlinks href=#hl-27-322>322</a>
</span><span class=lnt id=hl-27-323><a class=lnlinks href=#hl-27-323>323</a>
</span><span class=lnt id=hl-27-324><a class=lnlinks href=#hl-27-324>324</a>
</span><span class=lnt id=hl-27-325><a class=lnlinks href=#hl-27-325>325</a>
</span><span class=lnt id=hl-27-326><a class=lnlinks href=#hl-27-326>326</a>
</span><span class=lnt id=hl-27-327><a class=lnlinks href=#hl-27-327>327</a>
</span><span class=lnt id=hl-27-328><a class=lnlinks href=#hl-27-328>328</a>
</span><span class=lnt id=hl-27-329><a class=lnlinks href=#hl-27-329>329</a>
</span><span class=lnt id=hl-27-330><a class=lnlinks href=#hl-27-330>330</a>
</span><span class=lnt id=hl-27-331><a class=lnlinks href=#hl-27-331>331</a>
</span><span class=lnt id=hl-27-332><a class=lnlinks href=#hl-27-332>332</a>
</span><span class=lnt id=hl-27-333><a class=lnlinks href=#hl-27-333>333</a>
</span><span class=lnt id=hl-27-334><a class=lnlinks href=#hl-27-334>334</a>
</span><span class=lnt id=hl-27-335><a class=lnlinks href=#hl-27-335>335</a>
</span><span class=lnt id=hl-27-336><a class=lnlinks href=#hl-27-336>336</a>
</span><span class=lnt id=hl-27-337><a class=lnlinks href=#hl-27-337>337</a>
</span><span class=lnt id=hl-27-338><a class=lnlinks href=#hl-27-338>338</a>
</span><span class=lnt id=hl-27-339><a class=lnlinks href=#hl-27-339>339</a>
</span><span class=lnt id=hl-27-340><a class=lnlinks href=#hl-27-340>340</a>
</span><span class=lnt id=hl-27-341><a class=lnlinks href=#hl-27-341>341</a>
</span><span class=lnt id=hl-27-342><a class=lnlinks href=#hl-27-342>342</a>
</span><span class=lnt id=hl-27-343><a class=lnlinks href=#hl-27-343>343</a>
</span><span class=lnt id=hl-27-344><a class=lnlinks href=#hl-27-344>344</a>
</span><span class=lnt id=hl-27-345><a class=lnlinks href=#hl-27-345>345</a>
</span><span class=lnt id=hl-27-346><a class=lnlinks href=#hl-27-346>346</a>
</span><span class=lnt id=hl-27-347><a class=lnlinks href=#hl-27-347>347</a>
</span><span class=lnt id=hl-27-348><a class=lnlinks href=#hl-27-348>348</a>
</span><span class=lnt id=hl-27-349><a class=lnlinks href=#hl-27-349>349</a>
</span><span class=lnt id=hl-27-350><a class=lnlinks href=#hl-27-350>350</a>
</span><span class=lnt id=hl-27-351><a class=lnlinks href=#hl-27-351>351</a>
</span><span class=lnt id=hl-27-352><a class=lnlinks href=#hl-27-352>352</a>
</span><span class=lnt id=hl-27-353><a class=lnlinks href=#hl-27-353>353</a>
</span><span class=lnt id=hl-27-354><a class=lnlinks href=#hl-27-354>354</a>
</span><span class=lnt id=hl-27-355><a class=lnlinks href=#hl-27-355>355</a>
</span><span class=lnt id=hl-27-356><a class=lnlinks href=#hl-27-356>356</a>
</span><span class=lnt id=hl-27-357><a class=lnlinks href=#hl-27-357>357</a>
</span><span class=lnt id=hl-27-358><a class=lnlinks href=#hl-27-358>358</a>
</span><span class=lnt id=hl-27-359><a class=lnlinks href=#hl-27-359>359</a>
</span><span class=lnt id=hl-27-360><a class=lnlinks href=#hl-27-360>360</a>
</span><span class=lnt id=hl-27-361><a class=lnlinks href=#hl-27-361>361</a>
</span><span class=lnt id=hl-27-362><a class=lnlinks href=#hl-27-362>362</a>
</span><span class=lnt id=hl-27-363><a class=lnlinks href=#hl-27-363>363</a>
</span><span class=lnt id=hl-27-364><a class=lnlinks href=#hl-27-364>364</a>
</span><span class=lnt id=hl-27-365><a class=lnlinks href=#hl-27-365>365</a>
</span><span class=lnt id=hl-27-366><a class=lnlinks href=#hl-27-366>366</a>
</span><span class=lnt id=hl-27-367><a class=lnlinks href=#hl-27-367>367</a>
</span><span class=lnt id=hl-27-368><a class=lnlinks href=#hl-27-368>368</a>
</span><span class=lnt id=hl-27-369><a class=lnlinks href=#hl-27-369>369</a>
</span><span class=lnt id=hl-27-370><a class=lnlinks href=#hl-27-370>370</a>
</span><span class=lnt id=hl-27-371><a class=lnlinks href=#hl-27-371>371</a>
</span><span class=lnt id=hl-27-372><a class=lnlinks href=#hl-27-372>372</a>
</span><span class=lnt id=hl-27-373><a class=lnlinks href=#hl-27-373>373</a>
</span><span class=lnt id=hl-27-374><a class=lnlinks href=#hl-27-374>374</a>
</span><span class=lnt id=hl-27-375><a class=lnlinks href=#hl-27-375>375</a>
</span><span class=lnt id=hl-27-376><a class=lnlinks href=#hl-27-376>376</a>
</span><span class=lnt id=hl-27-377><a class=lnlinks href=#hl-27-377>377</a>
</span><span class=lnt id=hl-27-378><a class=lnlinks href=#hl-27-378>378</a>
</span><span class=lnt id=hl-27-379><a class=lnlinks href=#hl-27-379>379</a>
</span><span class=lnt id=hl-27-380><a class=lnlinks href=#hl-27-380>380</a>
</span><span class=lnt id=hl-27-381><a class=lnlinks href=#hl-27-381>381</a>
</span><span class=lnt id=hl-27-382><a class=lnlinks href=#hl-27-382>382</a>
</span><span class=lnt id=hl-27-383><a class=lnlinks href=#hl-27-383>383</a>
</span><span class=lnt id=hl-27-384><a class=lnlinks href=#hl-27-384>384</a>
</span><span class=lnt id=hl-27-385><a class=lnlinks href=#hl-27-385>385</a>
</span><span class=lnt id=hl-27-386><a class=lnlinks href=#hl-27-386>386</a>
</span><span class=lnt id=hl-27-387><a class=lnlinks href=#hl-27-387>387</a>
</span><span class=lnt id=hl-27-388><a class=lnlinks href=#hl-27-388>388</a>
</span><span class=lnt id=hl-27-389><a class=lnlinks href=#hl-27-389>389</a>
</span><span class=lnt id=hl-27-390><a class=lnlinks href=#hl-27-390>390</a>
</span><span class=lnt id=hl-27-391><a class=lnlinks href=#hl-27-391>391</a>
</span><span class=lnt id=hl-27-392><a class=lnlinks href=#hl-27-392>392</a>
</span><span class=lnt id=hl-27-393><a class=lnlinks href=#hl-27-393>393</a>
</span><span class=lnt id=hl-27-394><a class=lnlinks href=#hl-27-394>394</a>
</span><span class=lnt id=hl-27-395><a class=lnlinks href=#hl-27-395>395</a>
</span><span class=lnt id=hl-27-396><a class=lnlinks href=#hl-27-396>396</a>
</span><span class=lnt id=hl-27-397><a class=lnlinks href=#hl-27-397>397</a>
</span><span class=lnt id=hl-27-398><a class=lnlinks href=#hl-27-398>398</a>
</span><span class=lnt id=hl-27-399><a class=lnlinks href=#hl-27-399>399</a>
</span><span class=lnt id=hl-27-400><a class=lnlinks href=#hl-27-400>400</a>
</span><span class=lnt id=hl-27-401><a class=lnlinks href=#hl-27-401>401</a>
</span><span class=lnt id=hl-27-402><a class=lnlinks href=#hl-27-402>402</a>
</span><span class=lnt id=hl-27-403><a class=lnlinks href=#hl-27-403>403</a>
</span><span class=lnt id=hl-27-404><a class=lnlinks href=#hl-27-404>404</a>
</span><span class=lnt id=hl-27-405><a class=lnlinks href=#hl-27-405>405</a>
</span><span class=lnt id=hl-27-406><a class=lnlinks href=#hl-27-406>406</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * Service Registry 클라이언트 구현
</span></span></span><span class=line><span class=cl><span class=cm> * Netflix Eureka 호환 인터페이스 제공
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>axios</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;axios&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>EventEmitter</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;events&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>ServiceRegistry</span> <span class=kr>extends</span> <span class=nx>EventEmitter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>options</span> <span class=o>=</span> <span class=p>{})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>super</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 기본 설정
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>eurekaUrl</span> <span class=o>=</span> <span class=nx>options</span><span class=p>.</span><span class=nx>eurekaUrl</span> <span class=o>||</span> <span class=s1>&#39;http://localhost:8761/eureka&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>instanceId</span> <span class=o>=</span> <span class=nx>options</span><span class=p>.</span><span class=nx>instanceId</span> <span class=o>||</span> <span class=k>this</span><span class=p>.</span><span class=nx>generateInstanceId</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>appName</span> <span class=o>=</span> <span class=nx>options</span><span class=p>.</span><span class=nx>appName</span> <span class=o>||</span> <span class=s1>&#39;unknown-service&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>port</span> <span class=o>=</span> <span class=nx>options</span><span class=p>.</span><span class=nx>port</span> <span class=o>||</span> <span class=mi>8080</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>hostName</span> <span class=o>=</span> <span class=nx>options</span><span class=p>.</span><span class=nx>hostName</span> <span class=o>||</span> <span class=s1>&#39;localhost&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>healthCheckUrl</span> <span class=o>=</span> <span class=nx>options</span><span class=p>.</span><span class=nx>healthCheckUrl</span> <span class=o>||</span> <span class=s1>&#39;/health&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 등록 상태 관리
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>registered</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>heartbeatInterval</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>renewalIntervalInSecs</span> <span class=o>=</span> <span class=nx>options</span><span class=p>.</span><span class=nx>renewalIntervalInSecs</span> <span class=o>||</span> <span class=mi>30</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 서비스 캐시
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>serviceCache</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>cacheUpdateInterval</span> <span class=o>=</span> <span class=nx>options</span><span class=p>.</span><span class=nx>cacheUpdateInterval</span> <span class=o>||</span> <span class=mi>30000</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Service Registry initialized for </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>appName</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 고유한 인스턴스 ID 생성
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {string} 인스턴스 ID
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=nx>generateInstanceId</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>timestamp</span> <span class=o>=</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>random</span> <span class=o>=</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>().</span><span class=nx>toString</span><span class=p>(</span><span class=mi>36</span><span class=p>).</span><span class=nx>substring</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>15</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>hostName</span><span class=si>}</span><span class=sb>:</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>appName</span><span class=si>}</span><span class=sb>:</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>port</span><span class=si>}</span><span class=sb>-</span><span class=si>${</span><span class=nx>timestamp</span><span class=si>}</span><span class=sb>-</span><span class=si>${</span><span class=nx>random</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * Eureka 서버에 서비스 등록
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {Promise&lt;boolean&gt;} 등록 성공 여부
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>register</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>instanceInfo</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>instance</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>instanceId</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>instanceId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>app</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>appName</span><span class=p>.</span><span class=nx>toUpperCase</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                    <span class=nx>hostName</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>hostName</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>ipAddr</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>hostName</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>port</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;$&#39;</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>port</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;@enabled&#39;</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>                    <span class=p>},</span>
</span></span><span class=line><span class=cl>                    <span class=nx>securePort</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;$&#39;</span><span class=o>:</span> <span class=mi>443</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;@enabled&#39;</span><span class=o>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>                    <span class=p>},</span>
</span></span><span class=line><span class=cl>                    <span class=nx>homePageUrl</span><span class=o>:</span> <span class=sb>`http://</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>hostName</span><span class=si>}</span><span class=sb>:</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>port</span><span class=si>}</span><span class=sb>/`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>statusPageUrl</span><span class=o>:</span> <span class=sb>`http://</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>hostName</span><span class=si>}</span><span class=sb>:</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>port</span><span class=si>}</span><span class=sb>/status`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>healthCheckUrl</span><span class=o>:</span> <span class=sb>`http://</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>hostName</span><span class=si>}</span><span class=sb>:</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>port</span><span class=si>}${</span><span class=k>this</span><span class=p>.</span><span class=nx>healthCheckUrl</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>vipAddress</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>appName</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>secureVipAddress</span><span class=o>:</span> <span class=k>this</span><span class=p>.</span><span class=nx>appName</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>dataCenterInfo</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;@class&#39;</span><span class=o>:</span> <span class=s1>&#39;com.netflix.appinfo.InstanceInfo$DefaultDataCenterInfo&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;MyOwn&#39;</span>
</span></span><span class=line><span class=cl>                    <span class=p>},</span>
</span></span><span class=line><span class=cl>                    <span class=nx>metadata</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=nx>registrationTime</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                        <span class=nx>version</span><span class=o>:</span> <span class=s1>&#39;1.0.0&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=nx>environment</span><span class=o>:</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>NODE_ENV</span> <span class=o>||</span> <span class=s1>&#39;development&#39;</span>
</span></span><span class=line><span class=cl>                    <span class=p>},</span>
</span></span><span class=line><span class=cl>                    <span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;UP&#39;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>};</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// Eureka 서버에 POST 요청으로 등록
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>eurekaUrl</span><span class=si>}</span><span class=sb>/apps/</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>appName</span><span class=p>.</span><span class=nx>toUpperCase</span><span class=p>()</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>instanceInfo</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span> <span class=s1>&#39;application/json&#39;</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>registered</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`✅ Service </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>appName</span><span class=si>}</span><span class=sb> registered successfully`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 하트비트 시작
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>this</span><span class=p>.</span><span class=nx>startHeartbeat</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 서비스 캐시 업데이트 시작
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>this</span><span class=p>.</span><span class=nx>startCacheUpdate</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;registered&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>instanceId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`❌ Failed to register service: </span><span class=si>${</span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;registrationError&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 주기적 하트비트 전송
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=nx>startHeartbeat</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>heartbeatInterval</span> <span class=o>=</span> <span class=nx>setInterval</span><span class=p>(</span><span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>put</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>eurekaUrl</span><span class=si>}</span><span class=sb>/apps/</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>appName</span><span class=p>.</span><span class=nx>toUpperCase</span><span class=p>()</span><span class=si>}</span><span class=sb>/</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>instanceId</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=p>{},</span>
</span></span><span class=line><span class=cl>                    <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                            <span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span> <span class=s1>&#39;application/json&#39;</span>
</span></span><span class=line><span class=cl>                        <span class=p>}</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`💓 Heartbeat sent for </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>instanceId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;heartbeat&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>instanceId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`❌ Heartbeat failed: </span><span class=si>${</span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;heartbeatError&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1>// 재등록 시도
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>if</span> <span class=p>(</span><span class=nx>error</span><span class=p>.</span><span class=nx>response</span> <span class=o>&amp;&amp;</span> <span class=nx>error</span><span class=p>.</span><span class=nx>response</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>404</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;🔄 Attempting to re-register...&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>register</span><span class=p>();</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span> <span class=k>this</span><span class=p>.</span><span class=nx>renewalIntervalInSecs</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 서비스 발견 - 특정 서비스의 인스턴스 조회
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {string} serviceName 서비스 이름
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {Promise&lt;Array&gt;} 서비스 인스턴스 목록
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>discoverService</span><span class=p>(</span><span class=nx>serviceName</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>eurekaUrl</span><span class=si>}</span><span class=sb>/apps/</span><span class=si>${</span><span class=nx>serviceName</span><span class=p>.</span><span class=nx>toUpperCase</span><span class=p>()</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;Accept&#39;</span><span class=o>:</span> <span class=s1>&#39;application/json&#39;</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>application</span> <span class=o>=</span> <span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>application</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>application</span> <span class=o>||</span> <span class=o>!</span><span class=nx>application</span><span class=p>.</span><span class=nx>instance</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 단일 인스턴스인 경우 배열로 변환
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>instances</span> <span class=o>=</span> <span class=nb>Array</span><span class=p>.</span><span class=nx>isArray</span><span class=p>(</span><span class=nx>application</span><span class=p>.</span><span class=nx>instance</span><span class=p>)</span> 
</span></span><span class=line><span class=cl>                <span class=o>?</span> <span class=nx>application</span><span class=p>.</span><span class=nx>instance</span> 
</span></span><span class=line><span class=cl>                <span class=o>:</span> <span class=p>[</span><span class=nx>application</span><span class=p>.</span><span class=nx>instance</span><span class=p>];</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// UP 상태인 인스턴스만 필터링
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>healthyInstances</span> <span class=o>=</span> <span class=nx>instances</span>
</span></span><span class=line><span class=cl>                <span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>instance</span> <span class=p>=&gt;</span> <span class=nx>instance</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=s1>&#39;UP&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=nx>instance</span> <span class=p>=&gt;</span> <span class=p>({</span>
</span></span><span class=line><span class=cl>                    <span class=nx>instanceId</span><span class=o>:</span> <span class=nx>instance</span><span class=p>.</span><span class=nx>instanceId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>hostName</span><span class=o>:</span> <span class=nx>instance</span><span class=p>.</span><span class=nx>hostName</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>port</span><span class=o>:</span> <span class=nx>instance</span><span class=p>.</span><span class=nx>port</span><span class=p>.</span><span class=nx>$</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>serviceUrl</span><span class=o>:</span> <span class=sb>`http://</span><span class=si>${</span><span class=nx>instance</span><span class=p>.</span><span class=nx>hostName</span><span class=si>}</span><span class=sb>:</span><span class=si>${</span><span class=nx>instance</span><span class=p>.</span><span class=nx>port</span><span class=p>.</span><span class=nx>$</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>status</span><span class=o>:</span> <span class=nx>instance</span><span class=p>.</span><span class=nx>status</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>lastUpdatedTimestamp</span><span class=o>:</span> <span class=nx>instance</span><span class=p>.</span><span class=nx>lastUpdatedTimestamp</span>
</span></span><span class=line><span class=cl>                <span class=p>}));</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 캐시 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>this</span><span class=p>.</span><span class=nx>serviceCache</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>serviceName</span><span class=p>,</span> <span class=nx>healthyInstances</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`🔍 Found </span><span class=si>${</span><span class=nx>healthyInstances</span><span class=p>.</span><span class=nx>length</span><span class=si>}</span><span class=sb> instances for </span><span class=si>${</span><span class=nx>serviceName</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>healthyInstances</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`❌ Failed to discover service </span><span class=si>${</span><span class=nx>serviceName</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 캐시에서 반환
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>serviceCache</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>serviceName</span><span class=p>)</span> <span class=o>||</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 로드 밸런싱 - 라운드 로빈 방식으로 인스턴스 선택
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {string} serviceName 서비스 이름
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {Promise&lt;Object|null&gt;} 선택된 서비스 인스턴스
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getServiceInstance</span><span class=p>(</span><span class=nx>serviceName</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>instances</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>discoverService</span><span class=p>(</span><span class=nx>serviceName</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>instances</span><span class=p>.</span><span class=nx>length</span> <span class=o>===</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>warn</span><span class=p>(</span><span class=sb>`⚠️ No healthy instances found for </span><span class=si>${</span><span class=nx>serviceName</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 라운드 로빈 인덱스 관리
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=k>this</span><span class=p>.</span><span class=nx>roundRobinIndex</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>roundRobinIndex</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>currentIndex</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>roundRobinIndex</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>serviceName</span><span class=p>)</span> <span class=o>||</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>selectedInstance</span> <span class=o>=</span> <span class=nx>instances</span><span class=p>[</span><span class=nx>currentIndex</span> <span class=o>%</span> <span class=nx>instances</span><span class=p>.</span><span class=nx>length</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 다음 인덱스 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>roundRobinIndex</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>serviceName</span><span class=p>,</span> <span class=nx>currentIndex</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`🎯 Selected instance </span><span class=si>${</span><span class=nx>selectedInstance</span><span class=p>.</span><span class=nx>instanceId</span><span class=si>}</span><span class=sb> for </span><span class=si>${</span><span class=nx>serviceName</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>selectedInstance</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 서비스 호출 헬퍼 메소드
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {string} serviceName 서비스 이름
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {string} path API 경로
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {Object} options 요청 옵션
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {Promise&lt;Object&gt;} 응답 데이터
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>callService</span><span class=p>(</span><span class=nx>serviceName</span><span class=p>,</span> <span class=nx>path</span> <span class=o>=</span> <span class=s1>&#39;/&#39;</span><span class=p>,</span> <span class=nx>options</span> <span class=o>=</span> <span class=p>{})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>instance</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>getServiceInstance</span><span class=p>(</span><span class=nx>serviceName</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>instance</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=sb>`No available instances for service: </span><span class=si>${</span><span class=nx>serviceName</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>url</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=nx>instance</span><span class=p>.</span><span class=nx>serviceUrl</span><span class=si>}${</span><span class=nx>path</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`📞 Calling </span><span class=si>${</span><span class=nx>serviceName</span><span class=si>}</span><span class=sb> at </span><span class=si>${</span><span class=nx>url</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                <span class=nx>url</span><span class=o>:</span> <span class=nx>url</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>method</span><span class=o>:</span> <span class=nx>options</span><span class=p>.</span><span class=nx>method</span> <span class=o>||</span> <span class=s1>&#39;GET&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>data</span><span class=o>:</span> <span class=nx>options</span><span class=p>.</span><span class=nx>data</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>headers</span><span class=o>:</span> <span class=nx>options</span><span class=p>.</span><span class=nx>headers</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>timeout</span><span class=o>:</span> <span class=nx>options</span><span class=p>.</span><span class=nx>timeout</span> <span class=o>||</span> <span class=mi>5000</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`❌ Service call failed: </span><span class=si>${</span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=nx>error</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 주기적 서비스 캐시 업데이트
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=nx>startCacheUpdate</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>setInterval</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 캐시된 서비스들의 정보 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>serviceName</span> <span class=k>of</span> <span class=k>this</span><span class=p>.</span><span class=nx>serviceCache</span><span class=p>.</span><span class=nx>keys</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>discoverService</span><span class=p>(</span><span class=nx>serviceName</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span> <span class=k>this</span><span class=p>.</span><span class=nx>cacheUpdateInterval</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 서비스 등록 해제
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {Promise&lt;boolean&gt;} 해제 성공 여부
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>deregister</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=k>this</span><span class=p>.</span><span class=nx>registered</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;ℹ️ Service is not registered&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 하트비트 중지
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>heartbeatInterval</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>clearInterval</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>heartbeatInterval</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>heartbeatInterval</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// Eureka에서 등록 해제
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=k>delete</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>eurekaUrl</span><span class=si>}</span><span class=sb>/apps/</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>appName</span><span class=p>.</span><span class=nx>toUpperCase</span><span class=p>()</span><span class=si>}</span><span class=sb>/</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>instanceId</span><span class=si>}</span><span class=sb>`</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>registered</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`✅ Service </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>appName</span><span class=si>}</span><span class=sb> deregistered successfully`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;deregistered&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>instanceId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`❌ Failed to deregister service: </span><span class=si>${</span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;deregistrationError&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 모든 등록된 서비스 목록 조회
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {Promise&lt;Array&gt;} 서비스 목록
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getAllServices</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>eurekaUrl</span><span class=si>}</span><span class=sb>/apps`</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;Accept&#39;</span><span class=o>:</span> <span class=s1>&#39;application/json&#39;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>applications</span> <span class=o>||</span> <span class=o>!</span><span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>applications</span><span class=p>.</span><span class=nx>application</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>applications</span> <span class=o>=</span> <span class=nb>Array</span><span class=p>.</span><span class=nx>isArray</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>applications</span><span class=p>.</span><span class=nx>application</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=o>?</span> <span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>applications</span><span class=p>.</span><span class=nx>application</span>
</span></span><span class=line><span class=cl>                <span class=o>:</span> <span class=p>[</span><span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>applications</span><span class=p>.</span><span class=nx>application</span><span class=p>];</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>applications</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=nx>app</span> <span class=p>=&gt;</span> <span class=p>({</span>
</span></span><span class=line><span class=cl>                <span class=nx>name</span><span class=o>:</span> <span class=nx>app</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>instanceCount</span><span class=o>:</span> <span class=nb>Array</span><span class=p>.</span><span class=nx>isArray</span><span class=p>(</span><span class=nx>app</span><span class=p>.</span><span class=nx>instance</span><span class=p>)</span> <span class=o>?</span> <span class=nx>app</span><span class=p>.</span><span class=nx>instance</span><span class=p>.</span><span class=nx>length</span> <span class=o>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=p>}));</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`❌ Failed to get all services: </span><span class=si>${</span><span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 정상 종료 처리
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>shutdown</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;🔄 Shutting down Service Registry...&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>deregister</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>removeAllListeners</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;✅ Service Registry shutdown complete&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>async</span> <span class=kd>function</span> <span class=nx>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Service Registry 클라이언트 생성
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>registry</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ServiceRegistry</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>eurekaUrl</span><span class=o>:</span> <span class=s1>&#39;http://localhost:8761/eureka&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>appName</span><span class=o>:</span> <span class=s1>&#39;order-service&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>port</span><span class=o>:</span> <span class=mi>8080</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>hostName</span><span class=o>:</span> <span class=s1>&#39;localhost&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 이벤트 리스너 등록
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>registry</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;registered&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>instanceId</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`🎉 Registration successful: </span><span class=si>${</span><span class=nx>instanceId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>registry</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;heartbeat&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>instanceId</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`💓 Heartbeat: </span><span class=si>${</span><span class=nx>instanceId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 서비스 등록
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>await</span> <span class=nx>registry</span><span class=p>.</span><span class=nx>register</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 다른 서비스 발견 및 호출
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Payment Service 인스턴스 발견
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>paymentInstance</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>registry</span><span class=p>.</span><span class=nx>getServiceInstance</span><span class=p>(</span><span class=s1>&#39;payment-service&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Payment Service Instance:&#39;</span><span class=p>,</span> <span class=nx>paymentInstance</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// User Service 호출
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>userData</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>registry</span><span class=p>.</span><span class=nx>callService</span><span class=p>(</span><span class=s1>&#39;user-service&#39;</span><span class=p>,</span> <span class=s1>&#39;/users/123&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>method</span><span class=o>:</span> <span class=s1>&#39;GET&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;Authorization&#39;</span><span class=o>:</span> <span class=s1>&#39;Bearer token123&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;User Data:&#39;</span><span class=p>,</span> <span class=nx>userData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Service call error:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 정상 종료 처리
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>process</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;SIGINT&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\n🛑 Received SIGINT, shutting down gracefully...&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=nx>registry</span><span class=p>.</span><span class=nx>shutdown</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>process</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;SIGTERM&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;\n🛑 Received SIGTERM, shutting down gracefully...&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=nx>registry</span><span class=p>.</span><span class=nx>shutdown</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nx>process</span><span class=p>.</span><span class=nx>exit</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 애플리케이션 실행
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>if</span> <span class=p>(</span><span class=nx>require</span><span class=p>.</span><span class=nx>main</span> <span class=o>===</span> <span class=nx>module</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>(</span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=nx>ServiceRegistry</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>이 구현 예시는 Netflix Eureka와 호환되는 Service Registry 클라이언트를 제공하며, 서비스 등록, 발견, 로드 밸런싱, 헬스 체크 등 Service Registry의 핵심 기능을 모두 포함하고 있습니다.</p><h2 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>카테고리</th><th>고려사항</th><th>주의할 점</th><th>권장사항</th></tr></thead><tbody><tr><td><strong>아키텍처 설계</strong></td><td>서비스 규모와 복잡도에 적합한 솔루션 선택</td><td>과도한 엔지니어링으로 인한 복잡성 증가</td><td>단계적 도입으로 점진적 확장</td></tr><tr><td><strong>성능 최적화</strong></td><td>레지스트리 응답 시간과 캐싱 전략</td><td>캐시 무효화로 인한 stale 데이터 사용</td><td>적절한 TTL 설정과 실시간 알림</td></tr><tr><td><strong>고가용성</strong></td><td>다중 인스턴스와 지역별 복제</td><td>Split Brain 시나리오와 데이터 불일치</td><td>Quorum 기반 합의와 자동 복구</td></tr><tr><td><strong>보안 강화</strong></td><td>인증/인가 및 네트워크 보안</td><td>평문 통신으로 인한 보안 취약점</td><td>mTLS 적용과 네트워크 분할</td></tr><tr><td><strong>모니터링</strong></td><td>실시간 상태 감시와 알림 체계</td><td>모니터링 사각지대로 인한 장애 미감지</td><td>다층 모니터링과 SLA 기반 알림</td></tr><tr><td><strong>배포 전략</strong></td><td>무중단 배포와 롤백 계획</td><td>배포 중 서비스 발견 실패</td><td>Blue-Green 배포와 헬스 체크</td></tr><tr><td><strong>데이터 관리</strong></td><td>서비스 메타데이터의 일관성</td><td>오래된 등록 정보로 인한 라우팅 실패</td><td>자동 정리와 TTL 기반 만료</td></tr></tbody></table><h2 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>카테고리</th><th>고려사항</th><th>주의할 점</th><th>권장사항</th></tr></thead><tbody><tr><td><strong>성능 튜닝</strong></td><td>읽기/쓰기 비율에 따른 최적화</td><td>과도한 캐싱으로 인한 메모리 부족</td><td>읽기 전용 복제본과 적응형 캐싱</td></tr><tr><td><strong>네트워크 최적화</strong></td><td>지연 시간 최소화와 대역폭 효율성</td><td>네트워크 오버헤드로 인한 성능 저하</td><td>압축 전송과 배치 처리</td></tr><tr><td><strong>리소스 관리</strong></td><td>CPU/메모리 사용량 최적화</td><td>리소스 부족으로 인한 서비스 불안정</td><td>리소스 제한과 오토 스케일링</td></tr><tr><td><strong>데이터 구조</strong></td><td>효율적인 인덱싱과 쿼리 최적화</td><td>잘못된 인덱스로 인한 성능 저하</td><td>복합 인덱스와 쿼리 최적화</td></tr><tr><td><strong>프로토콜 선택</strong></td><td>통신 프로토콜의 효율성</td><td>프로토콜 오버헤드로 인한 지연</td><td>바이너리 프로토콜과 연결 풀링</td></tr><tr><td><strong>확장 전략</strong></td><td>수평적/수직적 확장 계획</td><td>확장 임계점 미달성으로 인한 병목</td><td>예측적 확장과 부하 테스트</td></tr><tr><td><strong>코드 최적화</strong></td><td>클라이언트 라이브러리 효율성</td><td>비효율적 코드로 인한 자원 낭비</td><td>프로파일링과 코드 리뷰</td></tr></tbody></table><hr><h2 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>신기술 트렌드</strong></td><td>Service Mesh</td><td>Istio, Linkerd</td><td>서비스 레지스트리와 통합된 트래픽 관리</td></tr><tr><td></td><td>Serverless</td><td>AWS Lambda, Knative</td><td>이벤트 기반 서비스 발견 패턴</td></tr><tr><td><strong>클라우드 네이티브</strong></td><td>Kubernetes</td><td>Service, Endpoints API</td><td>플랫폼 네이티브 서비스 발견</td></tr><tr><td></td><td>Multi-cloud</td><td>Consul Connect</td><td>하이브리드 클라우드 서비스 연결</td></tr><tr><td><strong>보안 강화</strong></td><td>Zero Trust</td><td>mTLS, Service Identity</td><td>서비스 간 신뢰성 검증</td></tr><tr><td></td><td>Policy Engine</td><td>Open Policy Agent</td><td>동적 접근 제어 정책</td></tr><tr><td><strong>운영 자동화</strong></td><td>GitOps</td><td>ArgoCD, Flux</td><td>선언적 서비스 배포</td></tr><tr><td></td><td>Chaos Engineering</td><td>Chaos Monkey</td><td>장애 복구 능력 검증</td></tr></tbody></table><hr><h2 id=반드시-학습해야할-내용>반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#반드시-학습해야할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>분산 시스템</strong></td><td>CAP 정리</td><td>Consistency, Availability, Partition Tolerance</td><td>분산 시스템 설계의 기본 원칙</td></tr><tr><td></td><td>합의 알고리즘</td><td>Raft, Paxos, PBFT</td><td>분산 환경에서의 데이터 일관성</td></tr><tr><td><strong>네트워킹</strong></td><td>DNS 프로토콜</td><td>A, SRV, PTR 레코드</td><td>DNS 기반 서비스 발견 메커니즘</td></tr><tr><td></td><td>Load Balancing</td><td>Round Robin, Weighted, Least Connections</td><td>트래픽 분산 알고리즘</td></tr><tr><td><strong>컨테이너</strong></td><td>Docker</td><td>컨테이너 네트워킹, Health Check</td><td>컨테이너 환경에서의 서비스 관리</td></tr><tr><td></td><td>Kubernetes</td><td>Service, Ingress, EndpointSlice</td><td>쿠버네티스 서비스 발견</td></tr><tr><td><strong>모니터링</strong></td><td>Observability</td><td>Metrics, Logs, Traces</td><td>서비스 상태 감시 및 진단</td></tr><tr><td></td><td>Prometheus</td><td>Service Discovery, Metrics Collection</td><td>시계열 데이터 수집</td></tr><tr><td><strong>보안</strong></td><td>PKI</td><td>Certificate Management, mTLS</td><td>서비스 간 인증 및 암호화</td></tr><tr><td></td><td>Network Security</td><td>Firewall, Network Policies</td><td>네트워크 수준 보안</td></tr></tbody></table><hr><h2 id=용어-정리-2>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-2>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td><strong>핵심 개념</strong></td><td>Service Instance</td><td>특정 네트워크 주소에서 실행되는 서비스의 단일 실행 단위</td></tr><tr><td></td><td>Health Check</td><td>서비스 인스턴스의 정상 작동 여부를 확인하는 검사 메커니즘</td></tr><tr><td></td><td>Heartbeat</td><td>서비스가 정상 작동 중임을 알리는 주기적 신호</td></tr><tr><td><strong>아키텍처</strong></td><td>Client-side Discovery</td><td>클라이언트가 직접 서비스 레지스트리에 쿼리하여 서비스 위치 확인</td></tr><tr><td></td><td>Server-side Discovery</td><td>로드 밸런서나 프록시가 서비스 레지스트리 조회를 대행</td></tr><tr><td></td><td>Split Brain</td><td>네트워크 분할로 인해 클러스터가 독립적으로 작동하는 상황</td></tr><tr><td><strong>기술 용어</strong></td><td>Quorum</td><td>분산 시스템에서 의사결정에 필요한 최소 노드 수</td></tr><tr><td></td><td>Eventual Consistency</td><td>시간이 지나면서 모든 노드가 동일한 데이터를 갖게 되는 일관성 모델</td></tr><tr><td></td><td>Circuit Breaker</td><td>장애 서비스에 대한 요청을 차단하여 연쇄 장애를 방지하는 패턴</td></tr><tr><td><strong>구현 기술</strong></td><td>TTL (Time To Live)</td><td>데이터의 유효 기간을 나타내는 값</td></tr><tr><td></td><td>Service Mesh</td><td>마이크로서비스 간 통신을 관리하는 인프라 계층</td></tr><tr><td></td><td>DNS-SD (DNS Service Discovery)</td><td>DNS 프로토콜을 활용한 서비스 발견 방법</td></tr></tbody></table><hr><h2 id=참고-및-출처-2>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-2>#</a></h2><ul><li><a href=https://microservices.io/patterns/service-registry.html>Microservices Pattern: Service registry</a></li><li><a href=https://www.baeldung.com/cs/service-discovery-microservices>Service Discovery in Microservices | Baeldung</a></li><li><a href=https://konghq.com/blog/learning-center/service-discovery-in-a-microservices-architecture>Understanding Service Discovery for Microservices Architecture | Kong Inc.</a></li><li><a href=https://medium.com/@josesousa8/service-registry-and-discovery-kubernetes-microservice-communication-36b314fcc06>Service Registry and Discovery: Kubernetes Microservice Communication | Medium</a></li><li><a href=https://kubernetes.io/docs/concepts/services-networking/service/>Service | Kubernetes</a></li><li><a href=https://auth0.com/blog/an-introduction-to-microservices-part-3-the-service-registry/>An Introduction to Microservices, Part 3: The Service Registry</a></li></ul><hr><p>Service Registry 는 마이크로서비스 환경에서 각 서비스 인스턴스의 네트워크 위치 (IP 주소와 포트) 를 저장하고 관리하는 중앙화된 데이터베이스이다.<br>이는 동적으로 변화하는 마이크로서비스 환경에서 서비스 디스커버리를 가능하게 하는 핵심 요소이다.</p><p>Service Registry 는 MSA 환경에서 서비스 디스커버리를 가능하게 하는 핵심 컴포넌트이다. 이를 통해 동적이고 확장 가능한 마이크로서비스 아키텍처를 구현할 수 있다.</p><h4 id=서비스-레지스트리의-중요성>서비스 레지스트리의 중요성<a hidden class=anchor aria-hidden=true href=#서비스-레지스트리의-중요성>#</a></h4><p>MSA 환경에서는 서비스 인스턴스가 자동 확장, 장애 복구, 배포 등의 이유로 동적으로 생성되고 소멸되며, 이에 따라 네트워크 위치가 변경된다.<br>이러한 동적인 특성으로 인해, 서비스 레지스트리는 다음과 같은 역할을 수행한다:</p><ul><li><strong>동적 스케일링 지원</strong>: 서비스 인스턴스의 추가 및 제거 시 자동으로 정보를 갱신하여, 클라이언트가 항상 최신 서비스 위치를 알 수 있도록 한다.</li><li><strong>장애 대응</strong>: 장애가 발생한 인스턴스를 목록에서 제거하여, 클라이언트가 비정상적인 인스턴스로의 요청을 방지한다.</li><li><strong>로드 밸런싱 지원</strong>: 현재 가용한 서비스 인스턴스 목록을 제공하여, 로드 밸런서나 클라이언트가 효율적으로 부하를 분산할 수 있도록 돕는다.</li></ul><h4 id=service-registry-의-주요-기능>Service Registry 의 주요 기능<a hidden class=anchor aria-hidden=true href=#service-registry-의-주요-기능>#</a></h4><ol><li><strong>서비스 등록</strong>: 각 마이크로서비스 인스턴스는 시작 시 자신의 정보 (서비스 이름, IP 주소, 포트 등) 를 Service Registry 에 등록한다.</li><li><strong>서비스 조회</strong>: 클라이언트나 다른 서비스들이 특정 서비스의 위치 정보를 요청할 때 이를 제공한다.</li><li><strong>상태 모니터링</strong>: 등록된 서비스들의 상태를 주기적으로 확인하여 가용성을 관리한다.</li><li><strong>동적 업데이트</strong>: 서비스 인스턴스가 추가되거나 제거될 때 자동으로 정보를 업데이트한다.</li></ol><h4 id=service-registry-의-구현-방식>Service Registry 의 구현 방식<a hidden class=anchor aria-hidden=true href=#service-registry-의-구현-방식>#</a></h4><ol><li><strong>중앙 집중식 데이터베이스</strong>: 모든 서비스 정보를 중앙에서 관리한다.</li><li><strong>분산 시스템</strong>: 고가용성을 위해 여러 노드에 걸쳐 정보를 복제한다.</li><li><strong>API 제공</strong>: 서비스 등록, 조회, 삭제 등을 위한 REST API 를 제공한다.</li></ol><h4 id=주요-service-registry-도구>주요 Service Registry 도구<a hidden class=anchor aria-hidden=true href=#주요-service-registry-도구>#</a></h4><ol><li><strong>Netflix Eureka</strong>: 클라이언트 사이드 서비스 디스커버리에 주로 사용되는 오픈소스 도구이다.</li><li><strong>Apache ZooKeeper</strong>: 분산 코디네이션 서비스로, 서비스 레지스트리 기능을 제공한다.</li><li><strong>Consul</strong>: HashiCorp 에서 개발한 서비스 디스커버리 및 구성 도구이다.</li><li><strong>etcd</strong>: 분산 키 - 값 저장소로, 서비스 레지스트리로 활용될 수 있다.</li></ol><h4 id=service-registry-의-장점>Service Registry 의 장점<a hidden class=anchor aria-hidden=true href=#service-registry-의-장점>#</a></h4><ol><li><strong>동적 확장성</strong>: 서비스 인스턴스의 동적 추가 및 제거를 지원한다.</li><li><strong>고가용성</strong>: 분산 시스템으로 구현되어 단일 실패 지점을 방지한다.</li><li><strong>자동화</strong>: 서비스 등록 및 해제 과정을 자동화하여 운영 효율성을 높인다.</li><li><strong>유연성</strong>: 클라우드 환경에서 IP 주소가 동적으로 변경되는 상황에 대응할 수 있다.</li></ol><h4 id=주의사항>주의사항<a hidden class=anchor aria-hidden=true href=#주의사항>#</a></h4><ol><li><strong>데이터 일관성</strong>: 분산 환경에서 데이터 일관성을 유지하는 것이 중요하다.</li><li><strong>보안</strong>: 서비스 정보의 중앙 저장소이므로 보안에 각별한 주의가 필요하다.</li><li><strong>성능</strong>: 많은 요청을 처리해야 하므로 성능 최적화가 중요하다.</li></ol><h4 id=구현-예시-1>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시-1>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-28-1><a class=lnlinks href=#hl-28-1> 1</a>
</span><span class=lnt id=hl-28-2><a class=lnlinks href=#hl-28-2> 2</a>
</span><span class=lnt id=hl-28-3><a class=lnlinks href=#hl-28-3> 3</a>
</span><span class=lnt id=hl-28-4><a class=lnlinks href=#hl-28-4> 4</a>
</span><span class=lnt id=hl-28-5><a class=lnlinks href=#hl-28-5> 5</a>
</span><span class=lnt id=hl-28-6><a class=lnlinks href=#hl-28-6> 6</a>
</span><span class=lnt id=hl-28-7><a class=lnlinks href=#hl-28-7> 7</a>
</span><span class=lnt id=hl-28-8><a class=lnlinks href=#hl-28-8> 8</a>
</span><span class=lnt id=hl-28-9><a class=lnlinks href=#hl-28-9> 9</a>
</span><span class=lnt id=hl-28-10><a class=lnlinks href=#hl-28-10>10</a>
</span><span class=lnt id=hl-28-11><a class=lnlinks href=#hl-28-11>11</a>
</span><span class=lnt id=hl-28-12><a class=lnlinks href=#hl-28-12>12</a>
</span><span class=lnt id=hl-28-13><a class=lnlinks href=#hl-28-13>13</a>
</span><span class=lnt id=hl-28-14><a class=lnlinks href=#hl-28-14>14</a>
</span><span class=lnt id=hl-28-15><a class=lnlinks href=#hl-28-15>15</a>
</span><span class=lnt id=hl-28-16><a class=lnlinks href=#hl-28-16>16</a>
</span><span class=lnt id=hl-28-17><a class=lnlinks href=#hl-28-17>17</a>
</span><span class=lnt id=hl-28-18><a class=lnlinks href=#hl-28-18>18</a>
</span><span class=lnt id=hl-28-19><a class=lnlinks href=#hl-28-19>19</a>
</span><span class=lnt id=hl-28-20><a class=lnlinks href=#hl-28-20>20</a>
</span><span class=lnt id=hl-28-21><a class=lnlinks href=#hl-28-21>21</a>
</span><span class=lnt id=hl-28-22><a class=lnlinks href=#hl-28-22>22</a>
</span><span class=lnt id=hl-28-23><a class=lnlinks href=#hl-28-23>23</a>
</span><span class=lnt id=hl-28-24><a class=lnlinks href=#hl-28-24>24</a>
</span><span class=lnt id=hl-28-25><a class=lnlinks href=#hl-28-25>25</a>
</span><span class=lnt id=hl-28-26><a class=lnlinks href=#hl-28-26>26</a>
</span><span class=lnt id=hl-28-27><a class=lnlinks href=#hl-28-27>27</a>
</span><span class=lnt id=hl-28-28><a class=lnlinks href=#hl-28-28>28</a>
</span><span class=lnt id=hl-28-29><a class=lnlinks href=#hl-28-29>29</a>
</span><span class=lnt id=hl-28-30><a class=lnlinks href=#hl-28-30>30</a>
</span><span class=lnt id=hl-28-31><a class=lnlinks href=#hl-28-31>31</a>
</span><span class=lnt id=hl-28-32><a class=lnlinks href=#hl-28-32>32</a>
</span><span class=lnt id=hl-28-33><a class=lnlinks href=#hl-28-33>33</a>
</span><span class=lnt id=hl-28-34><a class=lnlinks href=#hl-28-34>34</a>
</span><span class=lnt id=hl-28-35><a class=lnlinks href=#hl-28-35>35</a>
</span><span class=lnt id=hl-28-36><a class=lnlinks href=#hl-28-36>36</a>
</span><span class=lnt id=hl-28-37><a class=lnlinks href=#hl-28-37>37</a>
</span><span class=lnt id=hl-28-38><a class=lnlinks href=#hl-28-38>38</a>
</span><span class=lnt id=hl-28-39><a class=lnlinks href=#hl-28-39>39</a>
</span><span class=lnt id=hl-28-40><a class=lnlinks href=#hl-28-40>40</a>
</span><span class=lnt id=hl-28-41><a class=lnlinks href=#hl-28-41>41</a>
</span><span class=lnt id=hl-28-42><a class=lnlinks href=#hl-28-42>42</a>
</span><span class=lnt id=hl-28-43><a class=lnlinks href=#hl-28-43>43</a>
</span><span class=lnt id=hl-28-44><a class=lnlinks href=#hl-28-44>44</a>
</span><span class=lnt id=hl-28-45><a class=lnlinks href=#hl-28-45>45</a>
</span><span class=lnt id=hl-28-46><a class=lnlinks href=#hl-28-46>46</a>
</span><span class=lnt id=hl-28-47><a class=lnlinks href=#hl-28-47>47</a>
</span><span class=lnt id=hl-28-48><a class=lnlinks href=#hl-28-48>48</a>
</span><span class=lnt id=hl-28-49><a class=lnlinks href=#hl-28-49>49</a>
</span><span class=lnt id=hl-28-50><a class=lnlinks href=#hl-28-50>50</a>
</span><span class=lnt id=hl-28-51><a class=lnlinks href=#hl-28-51>51</a>
</span><span class=lnt id=hl-28-52><a class=lnlinks href=#hl-28-52>52</a>
</span><span class=lnt id=hl-28-53><a class=lnlinks href=#hl-28-53>53</a>
</span><span class=lnt id=hl-28-54><a class=lnlinks href=#hl-28-54>54</a>
</span><span class=lnt id=hl-28-55><a class=lnlinks href=#hl-28-55>55</a>
</span><span class=lnt id=hl-28-56><a class=lnlinks href=#hl-28-56>56</a>
</span><span class=lnt id=hl-28-57><a class=lnlinks href=#hl-28-57>57</a>
</span><span class=lnt id=hl-28-58><a class=lnlinks href=#hl-28-58>58</a>
</span><span class=lnt id=hl-28-59><a class=lnlinks href=#hl-28-59>59</a>
</span><span class=lnt id=hl-28-60><a class=lnlinks href=#hl-28-60>60</a>
</span><span class=lnt id=hl-28-61><a class=lnlinks href=#hl-28-61>61</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 서비스 레지스트리 구현
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>ServiceRegistry</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 서비스 정보 저장소
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>services</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 이벤트 구독자 관리
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>subscribers</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 서비스 상태 정보
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>healthStatus</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 레지스트리 설정
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>config</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>cleanupInterval</span><span class=o>:</span> <span class=mi>30000</span><span class=p>,</span>  <span class=c1>// 30초마다 정리
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>healthCheckInterval</span><span class=o>:</span> <span class=mi>10000</span>  <span class=c1>// 10초마다 헬스체크
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 주기적인 정리 작업 시작
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>startCleanupTask</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>startHealthCheck</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 서비스 등록
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>async</span> <span class=nx>registerService</span><span class=p>(</span><span class=nx>serviceInfo</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>serviceId</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>generateServiceId</span><span class=p>(</span><span class=nx>serviceInfo</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>registration</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>id</span><span class=o>:</span> <span class=nx>serviceId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>name</span><span class=o>:</span> <span class=nx>serviceInfo</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>host</span><span class=o>:</span> <span class=nx>serviceInfo</span><span class=p>.</span><span class=nx>host</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>port</span><span class=o>:</span> <span class=nx>serviceInfo</span><span class=p>.</span><span class=nx>port</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>metadata</span><span class=o>:</span> <span class=nx>serviceInfo</span><span class=p>.</span><span class=nx>metadata</span> <span class=o>||</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>            <span class=nx>registrationTime</span><span class=o>:</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=nx>lastHeartbeat</span><span class=o>:</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 서비스 정보 저장
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>services</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>serviceId</span><span class=p>,</span> <span class=nx>registration</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 이벤트 발행
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>notifySubscribers</span><span class=p>(</span><span class=s1>&#39;SERVICE_REGISTERED&#39;</span><span class=p>,</span> <span class=nx>registration</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>serviceId</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 서비스 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>async</span> <span class=nx>getServiceInstances</span><span class=p>(</span><span class=nx>serviceName</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>instances</span> <span class=o>=</span> <span class=nb>Array</span><span class=p>.</span><span class=nx>from</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>services</span><span class=p>.</span><span class=nx>values</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>service</span> <span class=p>=&gt;</span> 
</span></span><span class=line><span class=cl>                <span class=nx>service</span><span class=p>.</span><span class=nx>name</span> <span class=o>===</span> <span class=nx>serviceName</span> <span class=o>&amp;&amp;</span> 
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>isHealthy</span><span class=p>(</span><span class=nx>service</span><span class=p>.</span><span class=nx>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>instances</span><span class=p>.</span><span class=nx>length</span> <span class=o>===</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=sb>`No healthy instances found for service: </span><span class=si>${</span><span class=nx>serviceName</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>instances</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=참고-및-출처-3>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-3>#</a></h3></div></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>