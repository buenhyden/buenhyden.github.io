<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Proxy Pattern | hyunyoun's Blog</title><meta name=keywords content="Software-Engineering,Design-and-Architecture,Software-Design-Patterns,GoF,Structural,Proxy-Pattern"><meta name=description content="Proxy Pattern 은 클라이언트와 실제 객체 사이에 **대체 객체 (proxy)** 를 두어 접근, 생성, 호출 제어와 추가 로직 (예: caching, security, lazy init) 을 수행하는 Structural 디자인 패턴으로, 인터페이스는 동일하지만 기능 제어나 비용 절감, 보호, 원격 접근 등에 유용하다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/structural/proxy-pattern/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/structural/proxy-pattern/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/structural/proxy-pattern/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/structural/proxy-pattern/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Proxy Pattern"><meta property="og:description" content="Proxy Pattern 은 클라이언트와 실제 객체 사이에 **대체 객체 (proxy)** 를 두어 접근, 생성, 호출 제어와 추가 로직 (예: caching, security, lazy init) 을 수행하는 Structural 디자인 패턴으로, 인터페이스는 동일하지만 기능 제어나 비용 절감, 보호, 원격 접근 등에 유용하다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Proxy Pattern"><meta name=twitter:description content="Proxy Pattern 은 클라이언트와 실제 객체 사이에 **대체 객체 (proxy)** 를 두어 접근, 생성, 호출 제어와 추가 로직 (예: caching, security, lazy init) 을 수행하는 Structural 디자인 패턴으로, 인터페이스는 동일하지만 기능 제어나 비용 절감, 보호, 원격 접근 등에 유용하다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"기록하고 기억하고 활용하자.","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Software Engineering","item":"https://buenhyden.github.io/posts/software-engineering/"},{"@type":"ListItem","position":3,"name":"Design and Architecture","item":""},{"@type":"ListItem","position":4,"name":"Software Design Patterns","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/"},{"@type":"ListItem","position":5,"name":"Classic Design Patterns","item":""},{"@type":"ListItem","position":6,"name":"GoF","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/"},{"@type":"ListItem","position":7,"name":"Structural","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/structural/"},{"@type":"ListItem","position":8,"name":"Proxy Pattern","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/structural/proxy-pattern/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>기록하고 기억하고 활용하자.</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/>Software Engineering</a>&nbsp;»&nbsp;<a href>Design and Architecture</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/>Software Design Patterns</a>&nbsp;»&nbsp;<a href>Classic Design Patterns</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/>GoF</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/structural/>Structural</a></div><h1>Proxy Pattern</h1><div class=post-description>Proxy Pattern 은 클라이언트와 실제 객체 사이에 <strong>대체 객체 (proxy)</strong> 를 두어 접근, 생성, 호출 제어와 추가 로직 (예: caching, security, lazy init) 을 수행하는 Structural 디자인 패턴으로, 인터페이스는 동일하지만 기능 제어나 비용 절감, 보호, 원격 접근 등에 유용하다.</div></header><div class=post-content><h2 id=proxy-pattern>Proxy Pattern<a hidden class=anchor aria-hidden=true href=#proxy-pattern>#</a></h2><p>실제 서비스 객체 대신 프록시 객체가 클라이언트 요청을 처리하며, 필요에 따라 실제 객체로 요청을 전달한다.</p><p>이를 통해 보안, 캐싱, 지연 로딩, 로깅 등의 횡단 관심사를 효과적으로 구현할 수 있으며, 마이크로서비스와 분산 시스템에서 특히 중요한 역할을 담당합니다.</p><p>프록시 패턴은 객체 지향 설계에서 접근 제어와 성능 최적화를 위한 핵심 패턴이다. 객체 생성 또는 메서드 호출 시, 원본 객체 (RealSubject) 앞에 대리자 (Proxy) 를 두어 접근과 실행을 통제하는 구조이다.<br>세부 유형에는 <strong>Protection Proxy</strong>(권한 제어), <strong>Virtual Proxy</strong>(지연 초기화), <strong>Remote Proxy</strong>(원격 접근), <strong>Caching Proxy</strong> 등이 포함된다.</p><p>프록시는 동일한 인터페이스를 구현하여 클라이언트는 실제 객체와 동일하게 호출할 수 있고, 부가 기능 삽입, 보안 강화, 네트워크 추상화, 성능 최적화 등에 효과적이다.</p><h3 id=배경>배경<a hidden class=anchor aria-hidden=true href=#배경>#</a></h3><p>프록시 패턴은 다음과 같은 문제를 해결하기 위해 등장했다:</p><ol><li><strong>리소스 집약적 객체</strong>: 생성 비용이 높은 객체의 효율적 관리 필요</li><li><strong>원격 객체 접근</strong>: 네트워크를 통한 원격 객체 접근 시 복잡성 해결</li><li><strong>접근 제어</strong>: 보안, 권한 검사 등의 요구사항</li><li><strong>성능 최적화</strong>: 캐싱, 지연 로딩을 통한 성능 향상</li></ol><p>프록시 패턴은 클라이언트가 <strong>실제 객체의 존재 여부나 동작 방식에 상관없이 일관된 방식으로 객체를 사용할 수 있도록 도와주는 설계 기법</strong>이다. 객체의 <strong>생성, 접근, 보안, 원격 호출, 성능 관리</strong> 등 다양한 목적에 맞춰 프록시 객체를 활용하면 <strong>유연한 아키텍처</strong>를 설계할 수 있다.</p><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><p><strong>주요 목적:</strong></p><ul><li>실제 객체에 대한 접근 제어</li><li>성능 최적화를 위한 지연 로딩</li><li>횡단 관심사의 분리</li><li>클라이언트와 서비스 객체 간의 결합도 감소</li></ul><p><strong>필요성:</strong></p><ul><li>대용량 데이터나 복잡한 연산을 수행하는 객체의 효율적 관리</li><li>분산 시스템에서의 원격 객체 접근</li><li>보안 및 접근 제어 요구사항</li><li>시스템 성능 최적화</li></ul><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><p><strong>Proxy Pattern(프록시 패턴)</strong></p><ul><li>실제 객체에 대한 접근을 제어하거나 추가 기능을 제공하기 위해 대리 객체를 사용하는 구조적 디자인 패턴</li><li>실제 객체와 동일한 인터페이스를 제공하여 클라이언트는 프록시와 실제 객체를 구분하지 않고 사용할 수 있음</li><li>보안, 캐싱, 지연 로딩, 원격 접근 등 다양한 목적에 활용</li></ul><table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>Proxy 객체는 실제 객체와 동일한 인터페이스를 가져야 한다</td><td>클라이언트는 Proxy 와 Real 객체를 구분하지 않아야 한다</td></tr><tr><td>Proxy 는 접근 제어, 성능 향상, 보안 적용, 리소스 절약 등에 활용됨</td><td>예: 데이터베이스 연결 지연, 이미지 로딩 지연</td></tr><tr><td>다양한 형태로 진화</td><td>Remote Proxy, Virtual Proxy, Protection Proxy 등으로 활용 가능</td></tr></tbody></table><h4 id=기본-개념>기본 개념<a hidden class=anchor aria-hidden=true href=#기본-개념>#</a></h4><ul><li><strong>대체 객체 (Proxy)</strong>: 클라이언트 요청을 대신 받고, 실제 객체로 전달 여부 및 방식 결정</li><li><strong>Subject 인터페이스</strong>: Proxy/RealSubject 간 동일한 인터페이스를 보장</li><li><strong>접근 제어</strong>: 권한 체크, 호출 제한, 인증 기능</li><li><strong>지연 초기화 (Lazy Init)</strong>: 리소스 사용 최소화</li><li><strong>원격 접근 추상화</strong>: 로컬 객체처럼 사용하며 네트워크 세부 사항 은닉</li><li><strong>추가 기능 삽입</strong>: 캐싱, 로깅, 트랜잭션, 감사 (Auditing) 등</li></ul><h4 id=의도-intent>의도 (Intent)<a hidden class=anchor aria-hidden=true href=#의도-intent>#</a></h4><p>다른 객체에 대한 접근을 제어하거나, 부가 기능을 추가하기 위해 동일한 인터페이스를 가진 대리 객체 (Proxy) 를 제공한다.</p><h4 id=다른-이름-also-known-as>다른 이름 (Also Known As)<a hidden class=anchor aria-hidden=true href=#다른-이름-also-known-as>#</a></h4><ul><li>대리자 패턴 (Surrogate Pattern)</li><li>Placeholder Pattern</li></ul><h4 id=동기-motivation--forces>동기 (Motivation / Forces)<a hidden class=anchor aria-hidden=true href=#동기-motivation--forces>#</a></h4><ul><li>객체 생성 비용이 매우 높은 경우 지연 생성 필요</li><li>원격 객체에 대한 로컬 접근점 제공 필요</li><li>보안이 중요한 객체에 대한 접근 제어 필요</li><li>객체 사용 패턴 추적 및 최적화 필요</li></ul><h4 id=적용-가능성-applicability>적용 가능성 (Applicability)<a hidden class=anchor aria-hidden=true href=#적용-가능성-applicability>#</a></h4><ul><li>객체 접근을 제어하거나, 부가 기능을 추가해야 할 때</li><li>리소스가 무거운 객체의 생성을 지연시키고 싶을 때</li><li>원격 객체, 보안, 캐싱, 로깅, 트랜잭션 등 부가 기능이 필요한 경우.</li></ul><h4 id=참여자-participants>참여자 (Participants)<a hidden class=anchor aria-hidden=true href=#참여자-participants>#</a></h4><ul><li><strong>Subject</strong>: RealSubject 와 Proxy 에 공통 인터페이스 정의</li><li><strong>RealSubject</strong>: 프록시가 대표하는 실제 객체</li><li><strong>Proxy</strong>: 실제 객체에 대한 참조 유지 및 접근 제어</li></ul><h4 id=협력-collaboration>협력 (Collaboration)<a hidden class=anchor aria-hidden=true href=#협력-collaboration>#</a></h4><p>프록시는 요청을 받으면 필요한 전처리를 수행한 후 RealSubject 에게 요청을 전달하고, 후처리 작업을 수행한 뒤 결과를 클라이언트에게 반환</p><h4 id=실무-연관성>실무 연관성<a hidden class=anchor aria-hidden=true href=#실무-연관성>#</a></h4><ul><li><strong>Protection Proxy</strong>: 민감한 API, 관리자 권한 제어</li><li><strong>Virtual Proxy</strong>: 이미지, 리포트, 대용량 객체 등 초기화 지연</li><li><strong>Remote Proxy</strong>: Microservice 간 RPC 또는 원격 서비스 호출</li><li><strong>Caching Proxy</strong>: 데이터베이스, 외부 API 결과 캐싱</li><li><strong>추가 기능</strong>: 로그, 요청 속도 제한 (Rate Limiting), circuit breaker</li></ul><h3 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><h4 id=핵심-기능>핵심 기능<a hidden class=anchor aria-hidden=true href=#핵심-기능>#</a></h4><ol><li><strong>접근 제어</strong>: 실제 객체에 대한 접근 권한 검증</li><li><strong>지연 로딩</strong>: 실제 필요 시점까지 객체 생성 지연</li><li><strong>캐싱</strong>: 결과나 자원을 저장하여 반복 접근 최적화</li><li><strong>로깅 및 모니터링</strong>: 객체 접근 추적 및 기록</li><li><strong>네트워크 통신 관리</strong>: 원격 객체와의 통신 처리</li></ol><h4 id=주요-역할>주요 역할<a hidden class=anchor aria-hidden=true href=#주요-역할>#</a></h4><ul><li><strong>중개자 역할</strong>: 클라이언트와 실제 객체 사이의 중간 계층</li><li><strong>보안 게이트웨이</strong>: 인증 및 권한 검증</li><li><strong>성능 최적화</strong>: 자원 사용량 및 응답 시간 개선</li><li><strong>추상화 제공</strong>: 복잡한 내부 구현 숨김</li></ul><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><ul><li><strong>구조적 투명성</strong>: 클라이언트는 Proxy 인지 RealSubject 인지 구분 없이 사용 가능</li><li><strong>확장성</strong>: 부가 기능을 분리하여 재사용 가능</li><li><strong>캡슐화</strong>: RealSubject 의 복잡한 로직을 감추고 단순 인터페이스 제공</li></ul><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><ul><li><strong>Single Responsibility Principle</strong>: 각 프록시는 특정 목적을 위해 설계</li><li><strong>Open/Closed Principle</strong>: 기존 코드 수정 없이 기능 확장</li><li><strong>Liskov Substitution Principle</strong>: 프록시가 실제 객체를 완전히 대체 가능</li><li><strong>Dependency Inversion Principle</strong>: 추상화에 의존하여 결합도 최소화</li></ul><h3 id=주요-원리>주요 원리<a hidden class=anchor aria-hidden=true href=#주요-원리>#</a></h3><ol><li>Client 는 Subject 인터페이스로 Proxy 객체를 사용</li><li>Proxy 는 필요에 따라 RealSubject 객체를 생성/호출</li><li>Proxy 는 접근 제어, 로깅, 캐싱, 지연 로딩 등 부가 기능 수행</li><li>RealSubject 에 실제 요청 위임 후 결과 반환</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>+---------+       +-----------+        +-------------+
</span></span><span class=line><span class=cl>| Client  | ---&gt;  |   Proxy   | -----&gt; | RealSubject |
</span></span><span class=line><span class=cl>+---------+       +-----------+        +-------------+
</span></span><span class=line><span class=cl>                         |
</span></span><span class=line><span class=cl>           [권한 검사, 로깅, 지연 로딩 등 수행]
</span></span></code></pre></td></tr></table></div></div><h3 id=작동-원리-및-방식>작동 원리 및 방식<a hidden class=anchor aria-hidden=true href=#작동-원리-및-방식>#</a></h3><pre class=mermaid>sequenceDiagram
    participant Client
    participant Proxy
    participant RealSubject

    Client-&gt;&gt;Proxy: request()
    Proxy-&gt;&gt;Proxy: accessCheck()
    alt authorized
        Proxy-&gt;&gt;RealSubject: request()
        RealSubject--&gt;&gt;Proxy: result
        Proxy--&gt;&gt;Client: result
    else unauthorized
        Proxy--&gt;&gt;Client: access denied
    end
</pre><ol><li><strong>클라이언트 요청</strong>: 클라이언트가 Subject 인터페이스를 통해 요청</li><li><strong>프록시 가로채기</strong>: 프록시가 요청을 가로채어 전처리 수행</li><li><strong>조건부 처리</strong>: 캐시 확인, 권한 검사 등의 조건부 로직 실행</li><li><strong>실제 객체 호출</strong>: 필요시 실제 객체에 요청 위임</li><li><strong>후처리</strong>: 결과에 대한 캐싱, 로깅 등의 후처리 수행</li><li><strong>응답 반환</strong>: 최종 결과를 클라이언트에 반환</li></ol><h3 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h3><pre class=mermaid>classDiagram
    class Subject {
        &lt;&lt;interface&gt;&gt;
        +request() void
    }
    
    class RealSubject {
        +request() void
        -performRealOperation() void
    }
    
    class Proxy {
        -realSubject: RealSubject
        -cache: Map
        +request() void
        +checkAccess() boolean
        +logRequest() void
        +getCachedResult() Object
    }
    
    class Client {
        -subject: Subject
        +doSomething() void
    }
    
    Subject &lt;|.. RealSubject
    Subject &lt;|.. Proxy
    Client --&gt; Subject
    Proxy --&gt; RealSubject : delegates to
    
    note for Proxy &#34;프록시는 실제 객체에 대한\n참조를 유지하고 필요시\n실제 객체를 생성하거나 호출&#34;
    
    note for RealSubject &#34;실제 비즈니스 로직을\n수행하는 객체&#34;
</pre><h4 id=구성요소>구성요소<a hidden class=anchor aria-hidden=true href=#구성요소>#</a></h4><table><thead><tr><th>구분</th><th>구성요소</th><th>기능 및 역할</th><th>특징</th></tr></thead><tbody><tr><td>필수</td><td><strong>Subject (인터페이스)</strong></td><td>프록시와 실제 객체가 공통으로 구현할 인터페이스 정의</td><td>클라이언트 코드의 투명성 보장</td></tr><tr><td></td><td><strong>RealSubject (실제 객체)</strong></td><td>실제 비즈니스 로직을 수행하는 객체</td><td>리소스 집약적이거나 원격에 위치</td></tr><tr><td></td><td><strong>Proxy (프록시 객체)</strong></td><td>실제 객체에 대한 대리자 역할 수행</td><td>접근 제어, 캐싱, 지연 로딩 담당</td></tr><tr><td>선택</td><td><strong>Cache</strong></td><td>이전 요청 결과를 저장하여 성능 향상</td><td>반복적인 요청에 대한 응답 시간 단축</td></tr><tr><td></td><td><strong>Logger</strong></td><td>요청 및 응답에 대한 로깅 기능</td><td>디버깅 및 모니터링 지원</td></tr><tr><td></td><td><strong>AccessController</strong></td><td>권한 검사 및 접근 제어</td><td>보안 요구사항 충족</td></tr></tbody></table><h3 id=proxy-pattern-구현-기법>Proxy Pattern 구현 기법<a hidden class=anchor aria-hidden=true href=#proxy-pattern-구현-기법>#</a></h3><table><thead><tr><th>유형</th><th>정의/목적</th><th>핵심 구성 요소</th><th>활용 예시</th></tr></thead><tbody><tr><td><strong>Virtual Proxy</strong></td><td>비용이 큰 객체의 생성을 <strong>지연</strong>하여 리소스를 절약함</td><td>- Lazy Initialization<br>- 실제 객체 참조</td><td>대용량 이미지, DB 연결, 보고서 렌더링 등</td></tr><tr><td><strong>Protection Proxy</strong></td><td>사용자 <strong>권한 검사</strong>를 통해 객체 접근을 제어</td><td>- 인증/인가 로직<br>- 권한 관리 정책</td><td>관리자만 접근 가능한 기능, 파일 시스템 보호 등</td></tr><tr><td><strong>Remote Proxy</strong></td><td><strong>원격 객체에 대한 로컬 대리자</strong> 역할을 수행</td><td>- 네트워크 통신<br>- 직렬화/역직렬화 처리</td><td>RPC, gRPC, REST API 클라이언트 등</td></tr><tr><td><strong>Caching Proxy</strong></td><td>이전 요청 결과를 <strong>캐싱</strong>하여 성능 최적화</td><td>- 캐시 저장소<br>- 캐시 만료 정책 등</td><td>DB 쿼리 결과, 외부 API 응답 재사용 등</td></tr><tr><td><strong>Smart Proxy</strong></td><td>참조 시 <strong>추가 기능</strong>(로깅, 동기화, 참조 카운팅 등) 수행</td><td>- 메타데이터 관리<br>- 로깅, 동기화, 모니터링</td><td>객체 생명주기 관리, 다중 스레드 동기화 등</td></tr><tr><td><strong>Static Proxy</strong></td><td><strong>컴파일 시점</strong>에 프록시 클래스를 직접 구현</td><td>- 고정된 인터페이스<br>- 정적 클래스 작성</td><td>특정 API 호출 전후 로깅, 접근 제한 등</td></tr><tr><td><strong>Dynamic Proxy</strong></td><td><strong>런타임 시점</strong>에 프록시 객체를 **반사 (reflection)**로 생성</td><td>Reflection APIInvocation Handler</td><td>AOP, 로깅, 트랜잭션 처리 등 범용 프록시</td></tr></tbody></table><h4 id=virtual-proxy-지연-로딩>Virtual Proxy (지연 로딩)<a hidden class=anchor aria-hidden=true href=#virtual-proxy-지연-로딩>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span><span class=lnt id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a>
</span><span class=lnt id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a>
</span><span class=lnt id=hl-3-17><a class=lnlinks href=#hl-3-17>17</a>
</span><span class=lnt id=hl-3-18><a class=lnlinks href=#hl-3-18>18</a>
</span><span class=lnt id=hl-3-19><a class=lnlinks href=#hl-3-19>19</a>
</span><span class=lnt id=hl-3-20><a class=lnlinks href=#hl-3-20>20</a>
</span><span class=lnt id=hl-3-21><a class=lnlinks href=#hl-3-21>21</a>
</span><span class=lnt id=hl-3-22><a class=lnlinks href=#hl-3-22>22</a>
</span><span class=lnt id=hl-3-23><a class=lnlinks href=#hl-3-23>23</a>
</span><span class=lnt id=hl-3-24><a class=lnlinks href=#hl-3-24>24</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>RealImage</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filename</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>filename</span> <span class=o>=</span> <span class=n>filename</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>load_from_disk</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>load_from_disk</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[LOAD] Loading </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>filename</span><span class=si>}</span><span class=s2> from disk…&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>display</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[DISPLAY] Displaying </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>filename</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ImageProxy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filename</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>filename</span> <span class=o>=</span> <span class=n>filename</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_real_image</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>display</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_real_image</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_real_image</span> <span class=o>=</span> <span class=n>RealImage</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>filename</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_real_image</span><span class=o>.</span><span class=n>display</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용</span>
</span></span><span class=line><span class=cl><span class=n>img</span> <span class=o>=</span> <span class=n>ImageProxy</span><span class=p>(</span><span class=s2>&#34;photo.jpg&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>img</span><span class=o>.</span><span class=n>display</span><span class=p>()</span>  <span class=c1># 디스크에서 로딩 후 표시</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=protection-proxy-접근-제어>Protection Proxy (접근 제어)<a hidden class=anchor aria-hidden=true href=#protection-proxy-접근-제어>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span><span class=lnt id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a>
</span><span class=lnt id=hl-4-16><a class=lnlinks href=#hl-4-16>16</a>
</span><span class=lnt id=hl-4-17><a class=lnlinks href=#hl-4-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>CommandExecutor</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>run_command</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cmd</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[EXEC] Running command: </span><span class=si>{</span><span class=n>cmd</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CommandExecutorProxy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>user</span> <span class=o>=</span> <span class=n>user</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_executor</span> <span class=o>=</span> <span class=n>CommandExecutor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>run_command</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cmd</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>user</span> <span class=o>!=</span> <span class=s2>&#34;admin&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>PermissionError</span><span class=p>(</span><span class=s2>&#34;You are not allowed to run this command.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_executor</span><span class=o>.</span><span class=n>run_command</span><span class=p>(</span><span class=n>cmd</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용</span>
</span></span><span class=line><span class=cl><span class=n>proxy</span> <span class=o>=</span> <span class=n>CommandExecutorProxy</span><span class=p>(</span><span class=s2>&#34;guest&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>proxy</span><span class=o>.</span><span class=n>run_command</span><span class=p>(</span><span class=s2>&#34;rm -rf /&#34;</span><span class=p>)</span>  <span class=c1># 접근 거부</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=remote-proxy-간단한-rpc-시뮬레이션>Remote Proxy (간단한 RPC 시뮬레이션)<a hidden class=anchor aria-hidden=true href=#remote-proxy-간단한-rpc-시뮬레이션>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span><span class=lnt id=hl-5-18><a class=lnlinks href=#hl-5-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>RemoteService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>fetch_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s2>&#34;[DATA] Remote data from server&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>RemoteProxy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>remote</span> <span class=o>=</span> <span class=n>RemoteService</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>fetch_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;[INFO] Connecting to remote…&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>remote</span><span class=o>.</span><span class=n>fetch_data</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용</span>
</span></span><span class=line><span class=cl><span class=n>proxy</span> <span class=o>=</span> <span class=n>RemoteProxy</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>proxy</span><span class=o>.</span><span class=n>fetch_data</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=caching-proxy-결과-캐싱>Caching Proxy (결과 캐싱)<a hidden class=anchor aria-hidden=true href=#caching-proxy-결과-캐싱>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15>15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16>16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17>17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18>18</a>
</span><span class=lnt id=hl-6-19><a class=lnlinks href=#hl-6-19>19</a>
</span><span class=lnt id=hl-6-20><a class=lnlinks href=#hl-6-20>20</a>
</span><span class=lnt id=hl-6-21><a class=lnlinks href=#hl-6-21>21</a>
</span><span class=lnt id=hl-6-22><a class=lnlinks href=#hl-6-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Database</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>query</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>sql</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[DB] Executing SQL: </span><span class=si>{</span><span class=n>sql</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;Result for: </span><span class=si>{</span><span class=n>sql</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CachingProxy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_db</span> <span class=o>=</span> <span class=n>Database</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_cache</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>query</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>sql</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>sql</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cache</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;[CACHE] Returning cached result&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cache</span><span class=p>[</span><span class=n>sql</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_db</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>sql</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_cache</span><span class=p>[</span><span class=n>sql</span><span class=p>]</span> <span class=o>=</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용</span>
</span></span><span class=line><span class=cl><span class=n>proxy</span> <span class=o>=</span> <span class=n>CachingProxy</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>proxy</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=s2>&#34;SELECT * FROM users&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>proxy</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=s2>&#34;SELECT * FROM users&#34;</span><span class=p>))</span>  <span class=c1># 캐시 사용</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=smart-proxy-추가-로직-내장>Smart Proxy (추가 로직 내장)<a hidden class=anchor aria-hidden=true href=#smart-proxy-추가-로직-내장>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13>13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14>14</a>
</span><span class=lnt id=hl-7-15><a class=lnlinks href=#hl-7-15>15</a>
</span><span class=lnt id=hl-7-16><a class=lnlinks href=#hl-7-16>16</a>
</span><span class=lnt id=hl-7-17><a class=lnlinks href=#hl-7-17>17</a>
</span><span class=lnt id=hl-7-18><a class=lnlinks href=#hl-7-18>18</a>
</span><span class=lnt id=hl-7-19><a class=lnlinks href=#hl-7-19>19</a>
</span><span class=lnt id=hl-7-20><a class=lnlinks href=#hl-7-20>20</a>
</span><span class=lnt id=hl-7-21><a class=lnlinks href=#hl-7-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>SmartResource</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>usage_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>use</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>usage_count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[USE] Resource used </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>usage_count</span><span class=si>}</span><span class=s2> times.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SmartProxy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_resource</span> <span class=o>=</span> <span class=n>SmartResource</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>use</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;[LOG] Before using resource&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_resource</span><span class=o>.</span><span class=n>use</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;[LOG] After using resource&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용</span>
</span></span><span class=line><span class=cl><span class=n>proxy</span> <span class=o>=</span> <span class=n>SmartProxy</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>proxy</span><span class=o>.</span><span class=n>use</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>proxy</span><span class=o>.</span><span class=n>use</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=static-proxy-고정된-프록시>Static Proxy (고정된 프록시)<a hidden class=anchor aria-hidden=true href=#static-proxy-고정된-프록시>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span><span class=lnt id=hl-8-15><a class=lnlinks href=#hl-8-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>APIService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;[API] Returning data from real API&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>APIProxy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_service</span> <span class=o>=</span> <span class=n>APIService</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;[STATIC] Logging before call&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_service</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용</span>
</span></span><span class=line><span class=cl><span class=n>proxy</span> <span class=o>=</span> <span class=n>APIProxy</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>proxy</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=dynamic-proxy-python-의-__getattr__-활용>Dynamic Proxy (Python 의 <code>__getattr__</code> 활용)<a hidden class=anchor aria-hidden=true href=#dynamic-proxy-python-의-__getattr__-활용>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a>
</span><span class=lnt id=hl-9-11><a class=lnlinks href=#hl-9-11>11</a>
</span><span class=lnt id=hl-9-12><a class=lnlinks href=#hl-9-12>12</a>
</span><span class=lnt id=hl-9-13><a class=lnlinks href=#hl-9-13>13</a>
</span><span class=lnt id=hl-9-14><a class=lnlinks href=#hl-9-14>14</a>
</span><span class=lnt id=hl-9-15><a class=lnlinks href=#hl-9-15>15</a>
</span><span class=lnt id=hl-9-16><a class=lnlinks href=#hl-9-16>16</a>
</span><span class=lnt id=hl-9-17><a class=lnlinks href=#hl-9-17>17</a>
</span><span class=lnt id=hl-9-18><a class=lnlinks href=#hl-9-18>18</a>
</span><span class=lnt id=hl-9-19><a class=lnlinks href=#hl-9-19>19</a>
</span><span class=lnt id=hl-9-20><a class=lnlinks href=#hl-9-20>20</a>
</span><span class=lnt id=hl-9-21><a class=lnlinks href=#hl-9-21>21</a>
</span><span class=lnt id=hl-9-22><a class=lnlinks href=#hl-9-22>22</a>
</span><span class=lnt id=hl-9-23><a class=lnlinks href=#hl-9-23>23</a>
</span><span class=lnt id=hl-9-24><a class=lnlinks href=#hl-9-24>24</a>
</span><span class=lnt id=hl-9-25><a class=lnlinks href=#hl-9-25>25</a>
</span><span class=lnt id=hl-9-26><a class=lnlinks href=#hl-9-26>26</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>RealService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>fetch</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;[SERVICE] Fetching data&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;[SERVICE] Saving data&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>DynamicProxy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>target</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_target</span> <span class=o>=</span> <span class=n>target</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__getattr__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>attr</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_target</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>callable</span><span class=p>(</span><span class=n>attr</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>def</span> <span class=nf>wrapper</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[DYNAMIC] Before calling &#39;</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>&#39;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>result</span> <span class=o>=</span> <span class=n>attr</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[DYNAMIC] After calling &#39;</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>&#39;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>wrapper</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>attr</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용</span>
</span></span><span class=line><span class=cl><span class=n>proxy</span> <span class=o>=</span> <span class=n>DynamicProxy</span><span class=p>(</span><span class=n>RealService</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>proxy</span><span class=o>.</span><span class=n>fetch</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>proxy</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=proxy--behavioral--creational-조합-전략>Proxy + Behavioral / Creational 조합 전략<a hidden class=anchor aria-hidden=true href=#proxy--behavioral--creational-조합-전략>#</a></h3><table><thead><tr><th>패턴 유형</th><th>조합 대상</th><th>조합 전략</th></tr></thead><tbody><tr><td>Proxy + Factory Method</td><td>다양한 Proxy 객체 생성</td><td>권한 별 Proxy, Lazy 객체 Proxy 생성</td></tr><tr><td>Proxy + Singleton</td><td>RealSubject 를 싱글톤으로 유지</td><td>자원 사용 최소화</td></tr><tr><td>Proxy + Strategy</td><td>실행 방식 선택 (캐싱/인증 등)</td><td>Proxy 내 전략 선택 실행</td></tr><tr><td>Proxy + Command</td><td>요청을 객체화하여 Proxy 가 제어</td><td>요청 큐잉, 로깅, 우선순위 조정 가능</td></tr><tr><td>Proxy + Observer</td><td>Proxy 가 상태 변화를 알림</td><td>모니터링, 감사 (audit) 이벤트 처리</td></tr><tr><td>Proxy + Chain of Responsibility</td><td>다중 Proxy 로 연속 책임 처리</td><td>인증 → 로깅 → 캐싱 등 계층화 Proxy 가능</td></tr></tbody></table><blockquote><p><strong>Tip</strong>: GoF 패턴은 " 단독 사용 " 보다 <strong>조합 사용</strong>에서 아키텍처적 강점이 극대화된다.</p></blockquote><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><table><thead><tr><th>카테고리</th><th>항목</th><th>설명</th><th>원인 또는 구조적 특성</th></tr></thead><tbody><tr><td><strong>보안 및 접근 제어</strong></td><td>접근 제어</td><td>민감하거나 제한된 객체에 대한 직접 접근을 프록시가 중개하여 제어함</td><td>프록시가 중간 계층 역할 수행</td></tr><tr><td></td><td>권한 기반 분기 처리</td><td>사용자 권한에 따라 요청 처리 여부 결정 가능</td><td>보호 프록시 (Protection Proxy) 구조</td></tr><tr><td><strong>성능 및 최적화</strong></td><td>지연 로딩 (Lazy Loading)</td><td>객체 생성을 실제로 필요할 때까지 지연시켜 초기 자원 낭비 방지</td><td>가상 프록시 (Virtual Proxy) 구조</td></tr><tr><td></td><td>결과 캐싱</td><td>반복되는 요청에 대해 결과를 캐싱하여 성능 향상</td><td>캐싱 프록시 (Caching Proxy) 구현</td></tr><tr><td></td><td>리소스 관리</td><td>무거운 객체 생성을 줄이고, 참조 수 등을 제어하여 시스템 자원 효율화</td><td>스마트 프록시 (Smart Proxy) 구조</td></tr><tr><td><strong>분산 시스템 대응</strong></td><td>네트워크 추상화</td><td>원격 객체 호출을 로컬 객체처럼 다루어 분산 시스템의 복잡도 감소</td><td>원격 프록시 (Remote Proxy) 구조</td></tr><tr><td><strong>소프트웨어 품질</strong></td><td>투명성</td><td>클라이언트는 프록시와 실제 객체를 동일한 인터페이스로 사용하므로 구조 변경 없이 확장 가능</td><td>인터페이스 기반 설계 원칙</td></tr><tr><td></td><td>횡단 관심사 분리</td><td>로깅, 인증, 트랜잭션 같은 부가 기능을 핵심 로직과 분리하여 코드의 응집도 향상</td><td>프록시 내부에서 부가 기능 처리</td></tr><tr><td></td><td>유연성</td><td>런타임 시 프록시 구현체를 교체하거나 기능을 동적으로 추가 가능</td><td>의존성 주입 및 위임 구조</td></tr><tr><td><strong>OOP 설계 원칙 준수</strong></td><td>OCP(Open/Closed) 준수</td><td>기존 클래스는 수정하지 않고 프록시를 통해 기능 확장이 가능</td><td>확장에는 열려 있고 수정에는 닫힌 구조</td></tr></tbody></table><h3 id=단점과-문제점-그리고-해결방안>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안>#</a></h3><h4 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h4><table><thead><tr><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>복잡성 증가</td><td>프록시 계층 도입으로 클래스 구조와 흐름이 복잡해짐</td><td>명확한 책임 분리, 인터페이스 기반 설계, 문서화</td></tr><tr><td>성능 오버헤드</td><td>프록시를 거치는 호출로 인해 추가적인 연산 및 네트워크/메모리 비용 발생</td><td>캐싱 활용, 필요한 경우에만 프록시 적용</td></tr><tr><td>메모리 사용 증가</td><td>프록시 객체 및 부가 구조 (캐시, 로그 등) 로 인해 메모리 소모가 늘어남</td><td>객체 풀링, 생명주기 관리, 경량 프록시 구현</td></tr><tr><td>실 객체 변경 의존성</td><td>RealSubject 인터페이스 변경 시 Proxy 도 함께 수정해야 할 가능성 존재</td><td>인터페이스 안정성 확보, 테스트 자동화, 어댑터 조합 가능성 검토</td></tr><tr><td>설계 및 유지보수 부담</td><td>패턴에 대한 이해 없이 적용 시 오히려 코드의 가독성과 유지보수성이 악화됨</td><td>팀 내 교육, 공통 템플릿화, 설계 리뷰 강화</td></tr></tbody></table><h4 id=문제점-정리표>문제점 정리표<a hidden class=anchor aria-hidden=true href=#문제점-정리표>#</a></h4><table><thead><tr><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>순환 참조</td><td>Proxy ↔ RealSubject 간 강한 상호 참조</td><td>메모리 누수, GC 불가</td><td>메모리 프로파일링 도구, 참조 그래프 분석</td><td>약한 참조 (WeakRef) 활용</td><td>참조 방향 재설계, 의존성 역전 적용</td></tr><tr><td>캐시 일관성 오류</td><td>캐시된 결과와 실제 데이터 간의 불일치</td><td>잘못된 결과 반환, 데이터 무결성 문제</td><td>캐시 무효화 로그, 모니터링 알람</td><td>TTL 설정, 캐시 스탬프 전략 도입</td><td>Write-through, Invalidate-on-Change 등 전략 적용</td></tr><tr><td>동시성 문제</td><td>멀티스레드 환경에서의 동시 접근 또는 상태 공유</td><td>경합 조건, Race Condition 발생</td><td>동시성 테스트, Lock-Free 도구 활용</td><td>프록시 내부 상태 공유 금지, Thread-safe 구조 설계</td><td>Lock, Synchronization, ThreadLocal 적용</td></tr><tr><td>보안 검증 누락</td><td>인증/인가 로직이 프록시 레이어에 누락되거나 우회되는 경우</td><td>권한 없는 접근, 데이터 노출 가능성</td><td>침투 테스트, 로그 모니터링</td><td>통합 인증/인가 프록시 계층 구성</td><td>AuthProxy 통합, Policy 기반 접근 제어 적용</td></tr><tr><td>네트워크 예외 은닉</td><td>Remote Proxy 내부에서 네트워크 장애를 정상 처리로 간주해 예외 감지 실패</td><td>장애 탐지 지연, 신뢰성 저하</td><td>장애 시나리오 테스트, 외부 서비스 헬스체크</td><td>네트워크 상태 로깅, 오류 전파 정책 명확화</td><td>Circuit Breaker, Retry, Timeout 패턴 적용</td></tr></tbody></table><h3 id=도전-과제>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제>#</a></h3><table><thead><tr><th>카테고리</th><th>도전 과제</th><th>원인/영향 요약</th><th>탐지 및 진단 도구</th><th>예방 및 해결 전략</th></tr></thead><tbody><tr><td><strong>성능</strong></td><td>프록시 계층의 호출 지연</td><td>중첩된 프록시 호출, 캐싱/지연 로딩의 오버헤드 발생</td><td>APM, 분산 트레이싱</td><td>프록시 최소화, 경량 로직 유지, 지능형 캐싱, 필요 시 직접 접근 허용</td></tr><tr><td><strong>가용성</strong></td><td>Remote Proxy 실패 대응</td><td>네트워크 불안정 또는 원격 서비스 장애 → 전체 서비스 가용성 저하</td><td>헬스 체크, 예외 로깅, 네트워크 상태 알람</td><td>Circuit Breaker, Retry, Fallback 적용</td></tr><tr><td><strong>보안</strong></td><td>인증/인가 우회 및 검증 누락</td><td>인증 프록시 누락 시 민감 리소스 직접 접근 가능</td><td>침투 테스트, 보안 로그 분석</td><td>AuthProxy 통합, 네트워크 ACL, 프록시 계층에서 공통 인증 적용</td></tr><tr><td><strong>데이터 정합성</strong></td><td>캐시 무효화 실패</td><td>캐시와 실제 데이터 간 불일치 → 잘못된 결과 반환</td><td>Cache hit/miss 로그, 모니터링</td><td>TTL 설정, 캐시 무효화 정책, 데이터 변경 시 강제 무효화 적용</td></tr><tr><td><strong>설계 복잡성</strong></td><td>프록시/RealSubject 결합도 증가</td><td>프록시 구조가 많아질수록 클래스 수 증가, 추적 어려움</td><td>클래스 다이어그램, 코드 복잡도 분석</td><td>공통 추상화 계층 도입, AOP 기반 횡단 관심 분리, 문서화 강화</td></tr><tr><td><strong>테스트/유지보수</strong></td><td>테스트 복잡도</td><td>프록시 계층 추가로 테스트 범위 및 단위 테스트 작성 복잡화</td><td>테스트 커버리지 분석, 모킹 도구 활용</td><td>인터페이스 분리, Proxy-Stub 구조 분리, DI 로 프록시 주입</td></tr><tr><td><strong>동시성</strong></td><td>스레드 안전성 문제</td><td>공유 상태를 가진 프록시에서 동시 접근 시 경합 조건 (Race Condition) 발생</td><td>동시성 테스트, 로그 기반 상태 추적</td><td>Thread-safe 자료구조, Lock, 불변 객체 패턴, 동기화 적용</td></tr><tr><td><strong>메모리 관리</strong></td><td>메모리 누수</td><td>프록시가 실제 객체에 강한 참조를 유지 → GC 불가</td><td>메모리 프로파일링, 참조 추적 도구 사용</td><td>WeakReference 사용, 프록시 생명주기 관리, 리팩토링</td></tr><tr><td><strong>프록시 체인</strong></td><td>중첩 프록시로 인한 혼란</td><td>여러 기능이 중첩된 프록시가 체인 구조로 결합되어 흐름 파악 어려움, 성능 저하 발생</td><td>로그 흐름 분석, 계층 구조 시각화</td><td>프록시 체인 최적화, 불필요한 계층 제거, 공통 기능은 AOP 로 추출</td></tr><tr><td><strong>중복 로직</strong></td><td>다양한 프록시에 중복 기능 존재</td><td>로깅, 보안, 캐싱 등이 여러 프록시에 흩어져 관리됨</td><td>코드 리뷰, 기능 맵핑 도구</td><td>횡단 관심사 분리 (AOP), 공통 프록시 도입, Decorator 패턴 조합 적용</td></tr><tr><td><strong>최적화 균형</strong></td><td>적용 범위 과다</td><td>모든 객체에 프록시를 적용 → 오히려 비효율 유발</td><td>성능 벤치마크, 필요성 기반 적용 분석</td><td>핵심 객체에만 적용, 정량적 성능 평가 후 선택적 적용</td></tr></tbody></table><h3 id=분류-기준에-따른-종류-및-유형>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형>#</a></h3><table><thead><tr><th>분류 기준</th><th>유형</th><th>설명</th><th>사용 사례</th></tr></thead><tbody><tr><td><strong>목적별</strong></td><td>Virtual Proxy</td><td>지연 로딩을 위한 프록시</td><td>대용량 파일, 이미지 처리</td></tr><tr><td></td><td>Protection Proxy</td><td>접근 제어를 위한 프록시</td><td>사용자 권한 관리</td></tr><tr><td></td><td>Remote Proxy</td><td>원격 접근을 위한 프록시</td><td>마이크로서비스 통신</td></tr><tr><td></td><td>Smart Reference</td><td>스마트 참조를 위한 프록시</td><td>메모리 관리, 로깅</td></tr><tr><td><strong>구현별</strong></td><td>Static Proxy</td><td>컴파일 타임에 생성되는 프록시</td><td>코드 생성 도구 활용</td></tr><tr><td></td><td>Dynamic Proxy</td><td>런타임에 생성되는 프록시</td><td>Java Reflection, CGLib</td></tr><tr><td><strong>위치별</strong></td><td>Local Proxy</td><td>동일 프로세스 내 프록시</td><td>인메모리 캐싱</td></tr><tr><td></td><td>Remote Proxy</td><td>네트워크를 통한 프록시</td><td>RPC, REST API</td></tr></tbody></table><h3 id=실무-적용-예시>실무 적용 예시<a hidden class=anchor aria-hidden=true href=#실무-적용-예시>#</a></h3><table><thead><tr><th><strong>프록시 유형</strong></th><th><strong>적용 분야/사례</strong></th><th><strong>함께 사용되는 기술/패턴</strong></th><th><strong>주요 목적</strong></th><th><strong>효과</strong></th></tr></thead><tbody><tr><td><strong>Protection Proxy</strong></td><td>관리자 콘솔, 파일 시스템 권한 제어</td><td>Spring Security, JWT, OAuth2</td><td>인증/인가 기반 접근 제어</td><td>보안 강화, 권한 기반 리소스 보호</td></tr><tr><td><strong>Virtual Proxy</strong></td><td>대용량 이미지 뷰어, 리포트 생성, 지연 초기화</td><td>Lazy Loading, ORM(JPA), React Suspense</td><td>무거운 리소스의 초기화를 필요 시점으로 지연</td><td>메모리 사용 절감, 초기 응답 시간 단축</td></tr><tr><td><strong>Remote Proxy</strong></td><td>마이크로서비스 통신, RPC, 원격 API 호출</td><td>gRPC, REST API Client, Java RMI</td><td>원격 객체를 로컬처럼 추상화</td><td>네트워크 로직 캡슐화, 통신 복잡도 감소</td></tr><tr><td><strong>Caching Proxy</strong></td><td>API 결과 캐싱, DB 질의 결과 재활용</td><td>Redis, Memcached, CDN, HTTP Cache</td><td>반복 연산 및 중복 요청 방지</td><td>응답 속도 향상, 시스템 부하 감소</td></tr><tr><td><strong>Smart Proxy</strong></td><td>객체 수명 제어, 세션 동기화, 로드밸런싱</td><td>HikariCP, Spring Session, HAProxy</td><td>프록시에 리소스 관리 및 상태 유지 로직 추가</td><td>세션 일관성 유지, 병목 완화</td></tr><tr><td><strong>Dynamic Proxy</strong></td><td>AOP 기반 트랜잭션/로깅, 메서드 모니터링</td><td>Spring AOP, Python Decorator, Java Proxy</td><td>핵심 로직과 횡단 관심사 (트랜잭션, 로깅) 분리</td><td>유지보수성 향상, 코드 재사용성 증가</td></tr><tr><td><strong>Static Proxy</strong></td><td>정적 구조 기반 API/이미지 대리자</td><td>수동으로 작성한 Proxy 클래스</td><td>호출 인터페이스 고정 시 성능 최적화</td><td>안정적, 단순한 프록시 로직 제공</td></tr></tbody></table><h3 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h3><h4 id=사례-1-이커머스-상품-이미지-로딩-시스템>사례 1: 이커머스 상품 이미지 로딩 시스템<a hidden class=anchor aria-hidden=true href=#사례-1-이커머스-상품-이미지-로딩-시스템>#</a></h4><p><strong>시스템 구성:</strong></p><pre class=mermaid>graph TB
    A[웹 브라우저] --&gt; B[이미지 프록시 서버]
    B --&gt; C{캐시 확인}
    C --&gt;|Hit| D[로컬 캐시]
    C --&gt;|Miss| E[CDN 서버]
    E --&gt; F[원본 이미지 스토리지]
    F --&gt; G[이미지 리사이징 서비스]
    G --&gt; H[압축 처리]
    H --&gt; I[메타데이터 추가]
    I --&gt; B
    B --&gt; J[캐시에 저장]
    J --&gt; A
    D --&gt; A
    
    K[모니터링 시스템] --&gt; B
    L[로그 수집기] --&gt; B
    
    subgraph &#34;프록시 기능&#34;
        M[접근 제어]
        N[성능 모니터링]
        O[이미지 최적화]
        P[캐시 관리]
    end
    
    B --&gt; M
    B --&gt; N
    B --&gt; O
    B --&gt; P
    
    style A fill:#e1f5fe
    style B fill:#fff3e0
    style D fill:#e8f5e8
    style F fill:#f3e5f5
</pre><p><strong>Workflow:</strong></p><ol><li>사용자가 상품 페이지 접근</li><li>이미지 프록시가 요청을 가로채어 캐시 확인</li><li>캐시 미스 시 CDN 또는 원본 스토리지에서 이미지 로드</li><li>이미지 최적화 (리사이징, 압축) 수행</li><li>최적화된 이미지를 캐시에 저장 후 클라이언트에 전달</li></ol><p><strong>프록시의 역할:</strong></p><ul><li>이미지 캐싱을 통한 로딩 속도 향상</li><li>자동 이미지 최적화 (포맷 변환, 압축)</li><li>접근 로그 수집 및 성능 모니터링</li><li>트래픽 제어 및 과부하 방지</li></ul><p><strong>프록시 유무에 따른 차이점:</strong></p><table><thead><tr><th>구분</th><th>프록시 없음</th><th>프록시 있음</th></tr></thead><tbody><tr><td><strong>로딩 시간</strong></td><td>원본 이미지 로딩으로 느림</td><td>캐시된 최적화 이미지로 빠름</td></tr><tr><td><strong>대역폭 사용량</strong></td><td>원본 크기 그대로 전송</td><td>최적화된 크기로 전송</td></tr><tr><td><strong>모니터링</strong></td><td>제한적인 로그 수집</td><td>상세한 접근 패턴 분석</td></tr><tr><td><strong>확장성</strong></td><td>원본 서버 직접 부하</td><td>프록시에서 부하 분산</td></tr></tbody></table><h4 id=사례-2-마이크로서비스-환경에서-remote-proxy--protection-proxy-조합>사례 2: 마이크로서비스 환경에서 Remote Proxy + Protection Proxy 조합<a hidden class=anchor aria-hidden=true href=#사례-2-마이크로서비스-환경에서-remote-proxy--protection-proxy-조합>#</a></h4><p><strong>시스템 구성</strong></p><ul><li>API Gateway → AuthProxy → RemoteProxy → OrderService</li></ul><pre class=mermaid>sequenceDiagram
    participant Client
    participant AuthProxy
    participant RemoteProxy
    participant OrderService

    Client-&gt;&gt;AuthProxy: request(orderId)
    AuthProxy-&gt;&gt;RemoteProxy: validated request
    RemoteProxy-&gt;&gt;OrderService: call(orderId)
    OrderService--&gt;&gt;RemoteProxy: order data
    RemoteProxy--&gt;&gt;AuthProxy: response
    AuthProxy--&gt;&gt;Client: response
</pre><p><strong>Proxy 역할</strong></p><ul><li><code>AuthProxy</code>: 토큰 검증 및 권한 확인</li><li><code>RemoteProxy</code>: 네트워크 연결 및 gRPC 호출 래핑</li></ul><p><strong>결과</strong></p><ul><li>클라이언트는 보안 및 원격 호출 세부사항을 몰라도 됨</li><li>각 기능을 유연하게 확장 가능 (ex. 로깅 추가)</li></ul><h4 id=사례-3-메시징-시스템-적용>사례 3: 메시징 시스템 적용<a hidden class=anchor aria-hidden=true href=#사례-3-메시징-시스템-적용>#</a></h4><p><strong>상황</strong>: Proxy 패턴을 Kafka 기반 메시지 발행 서비스에 적용</p><p><strong>구조</strong></p><ul><li>클라이언트 → <code>AuthProxy</code> → <code>KafkaPublisherProxy</code> → 실제 <code>KafkaClient</code></li></ul><pre class=mermaid>sequenceDiagram
    participant Client
    participant AuthProxy
    participant KafkaProxy
    participant KafkaClient

    Client-&gt;&gt;AuthProxy: publish(event)
    AuthProxy-&gt;&gt;KafkaProxy: verified event
    KafkaProxy-&gt;&gt;KafkaClient: send()
    KafkaClient--&gt;&gt;KafkaProxy: ack
    KafkaProxy--&gt;&gt;AuthProxy: success
    AuthProxy--&gt;&gt;Client: complete
</pre><p><strong>코드 스니펫</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1> 1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2> 2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3> 3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4> 4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5> 5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6> 6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7> 7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8> 8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9> 9</a>
</span><span class=lnt id=hl-13-10><a class=lnlinks href=#hl-13-10>10</a>
</span><span class=lnt id=hl-13-11><a class=lnlinks href=#hl-13-11>11</a>
</span><span class=lnt id=hl-13-12><a class=lnlinks href=#hl-13-12>12</a>
</span><span class=lnt id=hl-13-13><a class=lnlinks href=#hl-13-13>13</a>
</span><span class=lnt id=hl-13-14><a class=lnlinks href=#hl-13-14>14</a>
</span><span class=lnt id=hl-13-15><a class=lnlinks href=#hl-13-15>15</a>
</span><span class=lnt id=hl-13-16><a class=lnlinks href=#hl-13-16>16</a>
</span><span class=lnt id=hl-13-17><a class=lnlinks href=#hl-13-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>KafkaClient</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>send</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>topic</span><span class=p>,</span> <span class=n>message</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[Kafka] Send to </span><span class=si>{</span><span class=n>topic</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>message</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>KafkaProxy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>client</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>client</span> <span class=o>=</span> <span class=n>client</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>send</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>topic</span><span class=p>,</span> <span class=n>message</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;[Proxy] Logging event&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>client</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>topic</span><span class=p>,</span> <span class=n>message</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 인증 프록시 포함한 체인 구성</span>
</span></span><span class=line><span class=cl><span class=n>kafka</span> <span class=o>=</span> <span class=n>KafkaProxy</span><span class=p>(</span><span class=n>KafkaClient</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>auth_kafka</span> <span class=o>=</span> <span class=n>AuthProxy</span><span class=p>(</span><span class=n>kafka</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>auth_kafka</span><span class=o>.</span><span class=n>get_order</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>kafka</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=s2>&#34;order&#34;</span><span class=p>,</span> <span class=p>{</span><span class=s2>&#34;id&#34;</span><span class=p>:</span> <span class=n>x</span><span class=p>})</span>  <span class=c1># 위임</span>
</span></span><span class=line><span class=cl><span class=n>auth_kafka</span><span class=o>.</span><span class=n>get_order</span><span class=p>(</span><span class=s2>&#34;E100&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=사례-3-비동기-프로그래밍-환경에서의-proxy-패턴-활용-전략>사례 3: 비동기 프로그래밍 환경에서의 Proxy 패턴 활용 전략<a hidden class=anchor aria-hidden=true href=#사례-3-비동기-프로그래밍-환경에서의-proxy-패턴-활용-전략>#</a></h4><p><strong>활용 방식</strong>:</p><ul><li>Proxy 는 <strong>비동기 호출 추상화</strong>, <strong>결과 추후 처리 (deferred handling)</strong>, <strong>Circuit Breaker 적용 포인트</strong>로 유용하다.</li></ul><p><strong>예시 아키텍처</strong></p><pre class=mermaid>sequenceDiagram
    participant Client
    participant AsyncProxy
    participant Service

    Client-&gt;&gt;AsyncProxy: request()
    AsyncProxy-&gt;&gt;Service: async call()
    Note right of Service: 작업 처리 중…
    Service--&gt;&gt;AsyncProxy: future/promise
    AsyncProxy--&gt;&gt;Client: return future
</pre><p><strong>기술 적용 예</strong>:</p><table><thead><tr><th>환경</th><th>적용 기법</th><th>설명</th></tr></thead><tbody><tr><td>Python asyncio</td><td><code>async def</code>, <code>await</code> 내 Proxy</td><td>비동기 작업의 중간 조정자</td></tr><tr><td>Java CompletableFuture</td><td><code>Proxy.getOrder().thenApply(…)</code></td><td>결과 핸들링 후처리</td></tr><tr><td>Node.js</td><td><code>Proxy.request().then(…)</code></td><td>REST API Proxy 를 비동기적으로 래핑</td></tr></tbody></table><p><strong>주의 사항</strong>:</p><ul><li><strong>Race condition 방지</strong>: Proxy 내 상태 공유 금지</li><li><strong>에러 전파 체계 설계</strong>: Future 실패 핸들링 명시적 설계</li><li><strong>Timeout 및 Circuit Breaker</strong> 필요</li></ul><h4 id=사례-4-기업용-erp-시스템의-문서-접근-제어>사례 4: 기업용 ERP 시스템의 문서 접근 제어<a hidden class=anchor aria-hidden=true href=#사례-4-기업용-erp-시스템의-문서-접근-제어>#</a></h4><p><strong>상황</strong>: 사용자의 권한에 따라 기밀 문서 접근을 제한해야 하는 시스템이 있음.</p><p><strong>적용 패턴</strong>: Protection Proxy</p><p><strong>구성 요소</strong>:</p><ul><li><code>Document</code>: 실제 문서</li><li><code>DocumentProxy</code>: 접근 제어를 수행하는 프록시</li><li><code>User</code>: 권한 정보를 가진 사용자</li></ul><p><strong>시스템 구성도</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1>1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2>2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3>3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4>4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5>5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[User]
</span></span><span class=line><span class=cl>   |
</span></span><span class=line><span class=cl>   v
</span></span><span class=line><span class=cl>[DocumentProxy] ----&gt; [Document]
</span></span><span class=line><span class=cl>   |
</span></span><span class=line><span class=cl>[권한 체크]
</span></span></code></pre></td></tr></table></div></div><p><strong>Workflow</strong></p><ol><li>사용자가 문서를 요청</li><li>DocumentProxy 는 사용자 권한 확인</li><li>권한이 충분하면 실제 Document 에 접근</li><li>부족할 경우 예외 반환 또는 접근 거부</li></ol><p><strong>역할</strong>:</p><ul><li>프록시는 인증/인가 처리 전담</li><li>실제 문서는 비즈니스 로직 전담</li></ul><h4 id=사례-5-캐시-프록시를-활용한-사용자-정보-조회>사례 5: 캐시 프록시를 활용한 사용자 정보 조회<a hidden class=anchor aria-hidden=true href=#사례-5-캐시-프록시를-활용한-사용자-정보-조회>#</a></h4><p><strong>시스템 구성</strong>:</p><ul><li>Subject: UserService</li><li>RealSubject: UserServiceImpl(DB 접근)</li><li>Proxy: UserServiceProxy(캐시)</li><li>Client: Controller/Service</li></ul><p><strong>Workflow</strong>:</p><ol><li>Client 는 UserService 인터페이스로 프록시 호출</li><li>Proxy 는 캐시에서 데이터 확인, 없으면 RealSubject 호출 후 캐시에 저장</li><li>Client 는 프록시만 알면 됨, DB/캐시 구조 몰라도 됨</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1>1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[Client] → [UserServiceProxy] → [UserServiceImpl(DB)]
</span></span><span class=line><span class=cl>      ↘ (캐시 확인/저장)
</span></span></code></pre></td></tr></table></div></div><h4 id=사례-6-전자상거래-시스템>사례 6: 전자상거래 시스템<a hidden class=anchor aria-hidden=true href=#사례-6-전자상거래-시스템>#</a></h4><p>대규모 전자상거래 플랫폼에서 상품 이미지 로딩 최적화 및 사용자 접근 제어를 위한 Proxy Pattern 적용</p><p><strong>시스템 구성</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1> 1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2> 2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3> 3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4> 4</a>
</span><span class=lnt id=hl-17-5><a class=lnlinks href=#hl-17-5> 5</a>
</span><span class=lnt id=hl-17-6><a class=lnlinks href=#hl-17-6> 6</a>
</span><span class=lnt id=hl-17-7><a class=lnlinks href=#hl-17-7> 7</a>
</span><span class=lnt id=hl-17-8><a class=lnlinks href=#hl-17-8> 8</a>
</span><span class=lnt id=hl-17-9><a class=lnlinks href=#hl-17-9> 9</a>
</span><span class=lnt id=hl-17-10><a class=lnlinks href=#hl-17-10>10</a>
</span><span class=lnt id=hl-17-11><a class=lnlinks href=#hl-17-11>11</a>
</span><span class=lnt id=hl-17-12><a class=lnlinks href=#hl-17-12>12</a>
</span><span class=lnt id=hl-17-13><a class=lnlinks href=#hl-17-13>13</a>
</span><span class=lnt id=hl-17-14><a class=lnlinks href=#hl-17-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
</span></span><span class=line><span class=cl>│   Web Client    │───▶│  Image Proxy    │───▶│  Image Service  │
</span></span><span class=line><span class=cl>└─────────────────┘    │                 │    │                 │
</span></span><span class=line><span class=cl>                       │ • 지연 로딩      │    │ • 실제 이미지    │
</span></span><span class=line><span class=cl>                       │ • 캐싱          │    │ • 파일 시스템    │
</span></span><span class=line><span class=cl>                       │ • 접근 제어     │    │ • CDN 연동      │
</span></span><span class=line><span class=cl>                       └─────────────────┘    └─────────────────┘
</span></span><span class=line><span class=cl>                                │
</span></span><span class=line><span class=cl>                       ┌─────────────────┐
</span></span><span class=line><span class=cl>                       │  Cache Server   │
</span></span><span class=line><span class=cl>                       │                 │
</span></span><span class=line><span class=cl>                       │ • Redis         │
</span></span><span class=line><span class=cl>                       │ • 이미지 캐싱    │
</span></span><span class=line><span class=cl>                       └─────────────────┘
</span></span></code></pre></td></tr></table></div></div><p><strong>Workflow</strong>:</p><ol><li><strong>클라이언트 요청</strong>: 사용자가 상품 페이지 접근</li><li><strong>프록시 검증</strong>: 이미지 프록시가 사용자 권한 확인</li><li><strong>캐시 확인</strong>: 캐시 서버에서 이미지 존재 여부 확인</li><li><strong>지연 로딩</strong>: 캐시 미스 시 실제 이미지 서비스에서 로딩</li><li><strong>캐시 저장</strong>: 로딩된 이미지를 캐시에 저장</li><li><strong>응답 전달</strong>: 클라이언트에게 이미지 전달</li></ol><p><strong>구현 코드</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1> 1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2> 2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3> 3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4> 4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5> 5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6> 6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7> 7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8> 8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9> 9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10>10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11>11</a>
</span><span class=lnt id=hl-18-12><a class=lnlinks href=#hl-18-12>12</a>
</span><span class=lnt id=hl-18-13><a class=lnlinks href=#hl-18-13>13</a>
</span><span class=lnt id=hl-18-14><a class=lnlinks href=#hl-18-14>14</a>
</span><span class=lnt id=hl-18-15><a class=lnlinks href=#hl-18-15>15</a>
</span><span class=lnt id=hl-18-16><a class=lnlinks href=#hl-18-16>16</a>
</span><span class=lnt id=hl-18-17><a class=lnlinks href=#hl-18-17>17</a>
</span><span class=lnt id=hl-18-18><a class=lnlinks href=#hl-18-18>18</a>
</span><span class=lnt id=hl-18-19><a class=lnlinks href=#hl-18-19>19</a>
</span><span class=lnt id=hl-18-20><a class=lnlinks href=#hl-18-20>20</a>
</span><span class=lnt id=hl-18-21><a class=lnlinks href=#hl-18-21>21</a>
</span><span class=lnt id=hl-18-22><a class=lnlinks href=#hl-18-22>22</a>
</span><span class=lnt id=hl-18-23><a class=lnlinks href=#hl-18-23>23</a>
</span><span class=lnt id=hl-18-24><a class=lnlinks href=#hl-18-24>24</a>
</span><span class=lnt id=hl-18-25><a class=lnlinks href=#hl-18-25>25</a>
</span><span class=lnt id=hl-18-26><a class=lnlinks href=#hl-18-26>26</a>
</span><span class=lnt id=hl-18-27><a class=lnlinks href=#hl-18-27>27</a>
</span><span class=lnt id=hl-18-28><a class=lnlinks href=#hl-18-28>28</a>
</span><span class=lnt id=hl-18-29><a class=lnlinks href=#hl-18-29>29</a>
</span><span class=lnt id=hl-18-30><a class=lnlinks href=#hl-18-30>30</a>
</span><span class=lnt id=hl-18-31><a class=lnlinks href=#hl-18-31>31</a>
</span><span class=lnt id=hl-18-32><a class=lnlinks href=#hl-18-32>32</a>
</span><span class=lnt id=hl-18-33><a class=lnlinks href=#hl-18-33>33</a>
</span><span class=lnt id=hl-18-34><a class=lnlinks href=#hl-18-34>34</a>
</span><span class=lnt id=hl-18-35><a class=lnlinks href=#hl-18-35>35</a>
</span><span class=lnt id=hl-18-36><a class=lnlinks href=#hl-18-36>36</a>
</span><span class=lnt id=hl-18-37><a class=lnlinks href=#hl-18-37>37</a>
</span><span class=lnt id=hl-18-38><a class=lnlinks href=#hl-18-38>38</a>
</span><span class=lnt id=hl-18-39><a class=lnlinks href=#hl-18-39>39</a>
</span><span class=lnt id=hl-18-40><a class=lnlinks href=#hl-18-40>40</a>
</span><span class=lnt id=hl-18-41><a class=lnlinks href=#hl-18-41>41</a>
</span><span class=lnt id=hl-18-42><a class=lnlinks href=#hl-18-42>42</a>
</span><span class=lnt id=hl-18-43><a class=lnlinks href=#hl-18-43>43</a>
</span><span class=lnt id=hl-18-44><a class=lnlinks href=#hl-18-44>44</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 전자상거래 이미지 프록시 구현</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ECommerceImageProxy</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Image</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>RealImage</span><span class=w> </span><span class=n>realImage</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>productId</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>userId</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>CacheService</span><span class=w> </span><span class=n>cacheService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>AuthService</span><span class=w> </span><span class=n>authService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>ECommerceImageProxy</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>productId</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>userId</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>productId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>productId</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>userId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>userId</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>cacheService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>CacheService</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>authService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>AuthService</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>display</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 1. 접근 권한 검증</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>authService</span><span class=p>.</span><span class=na>hasImageAccess</span><span class=p>(</span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>productId</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>SecurityException</span><span class=p>(</span><span class=s>&#34;Access denied for user: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>userId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 2. 캐시 확인</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>byte</span><span class=o>[]</span><span class=w> </span><span class=n>cachedImage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cacheService</span><span class=p>.</span><span class=na>getImage</span><span class=p>(</span><span class=n>productId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>cachedImage</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>displayFromCache</span><span class=p>(</span><span class=n>cachedImage</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 3. 지연 로딩 및 캐시 저장</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>realImage</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>realImage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>RealImage</span><span class=p>(</span><span class=n>productId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>byte</span><span class=o>[]</span><span class=w> </span><span class=n>imageData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>realImage</span><span class=p>.</span><span class=na>getImageData</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>cacheService</span><span class=p>.</span><span class=na>cacheImage</span><span class=p>(</span><span class=n>productId</span><span class=p>,</span><span class=w> </span><span class=n>imageData</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>realImage</span><span class=p>.</span><span class=na>display</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>displayFromCache</span><span class=p>(</span><span class=kt>byte</span><span class=o>[]</span><span class=w> </span><span class=n>imageData</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;Displaying cached image for product: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>productId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 캐시된 이미지 표시 로직</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=구현-예시>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시>#</a></h3><h4 id=python>Python<a hidden class=anchor aria-hidden=true href=#python>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1> 1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2> 2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3> 3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4> 4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5> 5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6> 6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7> 7</a>
</span><span class=lnt id=hl-19-8><a class=lnlinks href=#hl-19-8> 8</a>
</span><span class=lnt id=hl-19-9><a class=lnlinks href=#hl-19-9> 9</a>
</span><span class=lnt id=hl-19-10><a class=lnlinks href=#hl-19-10>10</a>
</span><span class=lnt id=hl-19-11><a class=lnlinks href=#hl-19-11>11</a>
</span><span class=lnt id=hl-19-12><a class=lnlinks href=#hl-19-12>12</a>
</span><span class=lnt id=hl-19-13><a class=lnlinks href=#hl-19-13>13</a>
</span><span class=lnt id=hl-19-14><a class=lnlinks href=#hl-19-14>14</a>
</span><span class=lnt id=hl-19-15><a class=lnlinks href=#hl-19-15>15</a>
</span><span class=lnt id=hl-19-16><a class=lnlinks href=#hl-19-16>16</a>
</span><span class=lnt id=hl-19-17><a class=lnlinks href=#hl-19-17>17</a>
</span><span class=lnt id=hl-19-18><a class=lnlinks href=#hl-19-18>18</a>
</span><span class=lnt id=hl-19-19><a class=lnlinks href=#hl-19-19>19</a>
</span><span class=lnt id=hl-19-20><a class=lnlinks href=#hl-19-20>20</a>
</span><span class=lnt id=hl-19-21><a class=lnlinks href=#hl-19-21>21</a>
</span><span class=lnt id=hl-19-22><a class=lnlinks href=#hl-19-22>22</a>
</span><span class=lnt id=hl-19-23><a class=lnlinks href=#hl-19-23>23</a>
</span><span class=lnt id=hl-19-24><a class=lnlinks href=#hl-19-24>24</a>
</span><span class=lnt id=hl-19-25><a class=lnlinks href=#hl-19-25>25</a>
</span><span class=lnt id=hl-19-26><a class=lnlinks href=#hl-19-26>26</a>
</span><span class=lnt id=hl-19-27><a class=lnlinks href=#hl-19-27>27</a>
</span><span class=lnt id=hl-19-28><a class=lnlinks href=#hl-19-28>28</a>
</span><span class=lnt id=hl-19-29><a class=lnlinks href=#hl-19-29>29</a>
</span><span class=lnt id=hl-19-30><a class=lnlinks href=#hl-19-30>30</a>
</span><span class=lnt id=hl-19-31><a class=lnlinks href=#hl-19-31>31</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Subject 인터페이스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderService</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_order</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 실제 서비스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>RealOrderService</span><span class=p>(</span><span class=n>OrderService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_order</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[Real] Fetching order </span><span class=si>{</span><span class=n>order_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;id&#34;</span><span class=p>:</span> <span class=n>order_id</span><span class=p>,</span> <span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;shipped&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 인증 프록시</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AuthProxy</span><span class=p>(</span><span class=n>OrderService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>real_service</span><span class=p>:</span> <span class=n>OrderService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>real_service</span> <span class=o>=</span> <span class=n>real_service</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_order</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_authorized</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>PermissionError</span><span class=p>(</span><span class=s2>&#34;Unauthorized access&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;[AuthProxy] Authorized request&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>real_service</span><span class=o>.</span><span class=n>get_order</span><span class=p>(</span><span class=n>order_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_is_authorized</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>True</span>  <span class=c1># 실제로는 토큰 기반 인증</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예</span>
</span></span><span class=line><span class=cl><span class=n>service</span> <span class=o>=</span> <span class=n>AuthProxy</span><span class=p>(</span><span class=n>RealOrderService</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>service</span><span class=o>.</span><span class=n>get_order</span><span class=p>(</span><span class=s2>&#34;A1234&#34;</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=python-이미지-서비스>Python: 이미지 서비스<a hidden class=anchor aria-hidden=true href=#python-이미지-서비스>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1>  1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2>  2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3>  3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4>  4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5>  5</a>
</span><span class=lnt id=hl-20-6><a class=lnlinks href=#hl-20-6>  6</a>
</span><span class=lnt id=hl-20-7><a class=lnlinks href=#hl-20-7>  7</a>
</span><span class=lnt id=hl-20-8><a class=lnlinks href=#hl-20-8>  8</a>
</span><span class=lnt id=hl-20-9><a class=lnlinks href=#hl-20-9>  9</a>
</span><span class=lnt id=hl-20-10><a class=lnlinks href=#hl-20-10> 10</a>
</span><span class=lnt id=hl-20-11><a class=lnlinks href=#hl-20-11> 11</a>
</span><span class=lnt id=hl-20-12><a class=lnlinks href=#hl-20-12> 12</a>
</span><span class=lnt id=hl-20-13><a class=lnlinks href=#hl-20-13> 13</a>
</span><span class=lnt id=hl-20-14><a class=lnlinks href=#hl-20-14> 14</a>
</span><span class=lnt id=hl-20-15><a class=lnlinks href=#hl-20-15> 15</a>
</span><span class=lnt id=hl-20-16><a class=lnlinks href=#hl-20-16> 16</a>
</span><span class=lnt id=hl-20-17><a class=lnlinks href=#hl-20-17> 17</a>
</span><span class=lnt id=hl-20-18><a class=lnlinks href=#hl-20-18> 18</a>
</span><span class=lnt id=hl-20-19><a class=lnlinks href=#hl-20-19> 19</a>
</span><span class=lnt id=hl-20-20><a class=lnlinks href=#hl-20-20> 20</a>
</span><span class=lnt id=hl-20-21><a class=lnlinks href=#hl-20-21> 21</a>
</span><span class=lnt id=hl-20-22><a class=lnlinks href=#hl-20-22> 22</a>
</span><span class=lnt id=hl-20-23><a class=lnlinks href=#hl-20-23> 23</a>
</span><span class=lnt id=hl-20-24><a class=lnlinks href=#hl-20-24> 24</a>
</span><span class=lnt id=hl-20-25><a class=lnlinks href=#hl-20-25> 25</a>
</span><span class=lnt id=hl-20-26><a class=lnlinks href=#hl-20-26> 26</a>
</span><span class=lnt id=hl-20-27><a class=lnlinks href=#hl-20-27> 27</a>
</span><span class=lnt id=hl-20-28><a class=lnlinks href=#hl-20-28> 28</a>
</span><span class=lnt id=hl-20-29><a class=lnlinks href=#hl-20-29> 29</a>
</span><span class=lnt id=hl-20-30><a class=lnlinks href=#hl-20-30> 30</a>
</span><span class=lnt id=hl-20-31><a class=lnlinks href=#hl-20-31> 31</a>
</span><span class=lnt id=hl-20-32><a class=lnlinks href=#hl-20-32> 32</a>
</span><span class=lnt id=hl-20-33><a class=lnlinks href=#hl-20-33> 33</a>
</span><span class=lnt id=hl-20-34><a class=lnlinks href=#hl-20-34> 34</a>
</span><span class=lnt id=hl-20-35><a class=lnlinks href=#hl-20-35> 35</a>
</span><span class=lnt id=hl-20-36><a class=lnlinks href=#hl-20-36> 36</a>
</span><span class=lnt id=hl-20-37><a class=lnlinks href=#hl-20-37> 37</a>
</span><span class=lnt id=hl-20-38><a class=lnlinks href=#hl-20-38> 38</a>
</span><span class=lnt id=hl-20-39><a class=lnlinks href=#hl-20-39> 39</a>
</span><span class=lnt id=hl-20-40><a class=lnlinks href=#hl-20-40> 40</a>
</span><span class=lnt id=hl-20-41><a class=lnlinks href=#hl-20-41> 41</a>
</span><span class=lnt id=hl-20-42><a class=lnlinks href=#hl-20-42> 42</a>
</span><span class=lnt id=hl-20-43><a class=lnlinks href=#hl-20-43> 43</a>
</span><span class=lnt id=hl-20-44><a class=lnlinks href=#hl-20-44> 44</a>
</span><span class=lnt id=hl-20-45><a class=lnlinks href=#hl-20-45> 45</a>
</span><span class=lnt id=hl-20-46><a class=lnlinks href=#hl-20-46> 46</a>
</span><span class=lnt id=hl-20-47><a class=lnlinks href=#hl-20-47> 47</a>
</span><span class=lnt id=hl-20-48><a class=lnlinks href=#hl-20-48> 48</a>
</span><span class=lnt id=hl-20-49><a class=lnlinks href=#hl-20-49> 49</a>
</span><span class=lnt id=hl-20-50><a class=lnlinks href=#hl-20-50> 50</a>
</span><span class=lnt id=hl-20-51><a class=lnlinks href=#hl-20-51> 51</a>
</span><span class=lnt id=hl-20-52><a class=lnlinks href=#hl-20-52> 52</a>
</span><span class=lnt id=hl-20-53><a class=lnlinks href=#hl-20-53> 53</a>
</span><span class=lnt id=hl-20-54><a class=lnlinks href=#hl-20-54> 54</a>
</span><span class=lnt id=hl-20-55><a class=lnlinks href=#hl-20-55> 55</a>
</span><span class=lnt id=hl-20-56><a class=lnlinks href=#hl-20-56> 56</a>
</span><span class=lnt id=hl-20-57><a class=lnlinks href=#hl-20-57> 57</a>
</span><span class=lnt id=hl-20-58><a class=lnlinks href=#hl-20-58> 58</a>
</span><span class=lnt id=hl-20-59><a class=lnlinks href=#hl-20-59> 59</a>
</span><span class=lnt id=hl-20-60><a class=lnlinks href=#hl-20-60> 60</a>
</span><span class=lnt id=hl-20-61><a class=lnlinks href=#hl-20-61> 61</a>
</span><span class=lnt id=hl-20-62><a class=lnlinks href=#hl-20-62> 62</a>
</span><span class=lnt id=hl-20-63><a class=lnlinks href=#hl-20-63> 63</a>
</span><span class=lnt id=hl-20-64><a class=lnlinks href=#hl-20-64> 64</a>
</span><span class=lnt id=hl-20-65><a class=lnlinks href=#hl-20-65> 65</a>
</span><span class=lnt id=hl-20-66><a class=lnlinks href=#hl-20-66> 66</a>
</span><span class=lnt id=hl-20-67><a class=lnlinks href=#hl-20-67> 67</a>
</span><span class=lnt id=hl-20-68><a class=lnlinks href=#hl-20-68> 68</a>
</span><span class=lnt id=hl-20-69><a class=lnlinks href=#hl-20-69> 69</a>
</span><span class=lnt id=hl-20-70><a class=lnlinks href=#hl-20-70> 70</a>
</span><span class=lnt id=hl-20-71><a class=lnlinks href=#hl-20-71> 71</a>
</span><span class=lnt id=hl-20-72><a class=lnlinks href=#hl-20-72> 72</a>
</span><span class=lnt id=hl-20-73><a class=lnlinks href=#hl-20-73> 73</a>
</span><span class=lnt id=hl-20-74><a class=lnlinks href=#hl-20-74> 74</a>
</span><span class=lnt id=hl-20-75><a class=lnlinks href=#hl-20-75> 75</a>
</span><span class=lnt id=hl-20-76><a class=lnlinks href=#hl-20-76> 76</a>
</span><span class=lnt id=hl-20-77><a class=lnlinks href=#hl-20-77> 77</a>
</span><span class=lnt id=hl-20-78><a class=lnlinks href=#hl-20-78> 78</a>
</span><span class=lnt id=hl-20-79><a class=lnlinks href=#hl-20-79> 79</a>
</span><span class=lnt id=hl-20-80><a class=lnlinks href=#hl-20-80> 80</a>
</span><span class=lnt id=hl-20-81><a class=lnlinks href=#hl-20-81> 81</a>
</span><span class=lnt id=hl-20-82><a class=lnlinks href=#hl-20-82> 82</a>
</span><span class=lnt id=hl-20-83><a class=lnlinks href=#hl-20-83> 83</a>
</span><span class=lnt id=hl-20-84><a class=lnlinks href=#hl-20-84> 84</a>
</span><span class=lnt id=hl-20-85><a class=lnlinks href=#hl-20-85> 85</a>
</span><span class=lnt id=hl-20-86><a class=lnlinks href=#hl-20-86> 86</a>
</span><span class=lnt id=hl-20-87><a class=lnlinks href=#hl-20-87> 87</a>
</span><span class=lnt id=hl-20-88><a class=lnlinks href=#hl-20-88> 88</a>
</span><span class=lnt id=hl-20-89><a class=lnlinks href=#hl-20-89> 89</a>
</span><span class=lnt id=hl-20-90><a class=lnlinks href=#hl-20-90> 90</a>
</span><span class=lnt id=hl-20-91><a class=lnlinks href=#hl-20-91> 91</a>
</span><span class=lnt id=hl-20-92><a class=lnlinks href=#hl-20-92> 92</a>
</span><span class=lnt id=hl-20-93><a class=lnlinks href=#hl-20-93> 93</a>
</span><span class=lnt id=hl-20-94><a class=lnlinks href=#hl-20-94> 94</a>
</span><span class=lnt id=hl-20-95><a class=lnlinks href=#hl-20-95> 95</a>
</span><span class=lnt id=hl-20-96><a class=lnlinks href=#hl-20-96> 96</a>
</span><span class=lnt id=hl-20-97><a class=lnlinks href=#hl-20-97> 97</a>
</span><span class=lnt id=hl-20-98><a class=lnlinks href=#hl-20-98> 98</a>
</span><span class=lnt id=hl-20-99><a class=lnlinks href=#hl-20-99> 99</a>
</span><span class=lnt id=hl-20-100><a class=lnlinks href=#hl-20-100>100</a>
</span><span class=lnt id=hl-20-101><a class=lnlinks href=#hl-20-101>101</a>
</span><span class=lnt id=hl-20-102><a class=lnlinks href=#hl-20-102>102</a>
</span><span class=lnt id=hl-20-103><a class=lnlinks href=#hl-20-103>103</a>
</span><span class=lnt id=hl-20-104><a class=lnlinks href=#hl-20-104>104</a>
</span><span class=lnt id=hl-20-105><a class=lnlinks href=#hl-20-105>105</a>
</span><span class=lnt id=hl-20-106><a class=lnlinks href=#hl-20-106>106</a>
</span><span class=lnt id=hl-20-107><a class=lnlinks href=#hl-20-107>107</a>
</span><span class=lnt id=hl-20-108><a class=lnlinks href=#hl-20-108>108</a>
</span><span class=lnt id=hl-20-109><a class=lnlinks href=#hl-20-109>109</a>
</span><span class=lnt id=hl-20-110><a class=lnlinks href=#hl-20-110>110</a>
</span><span class=lnt id=hl-20-111><a class=lnlinks href=#hl-20-111>111</a>
</span><span class=lnt id=hl-20-112><a class=lnlinks href=#hl-20-112>112</a>
</span><span class=lnt id=hl-20-113><a class=lnlinks href=#hl-20-113>113</a>
</span><span class=lnt id=hl-20-114><a class=lnlinks href=#hl-20-114>114</a>
</span><span class=lnt id=hl-20-115><a class=lnlinks href=#hl-20-115>115</a>
</span><span class=lnt id=hl-20-116><a class=lnlinks href=#hl-20-116>116</a>
</span><span class=lnt id=hl-20-117><a class=lnlinks href=#hl-20-117>117</a>
</span><span class=lnt id=hl-20-118><a class=lnlinks href=#hl-20-118>118</a>
</span><span class=lnt id=hl-20-119><a class=lnlinks href=#hl-20-119>119</a>
</span><span class=lnt id=hl-20-120><a class=lnlinks href=#hl-20-120>120</a>
</span><span class=lnt id=hl-20-121><a class=lnlinks href=#hl-20-121>121</a>
</span><span class=lnt id=hl-20-122><a class=lnlinks href=#hl-20-122>122</a>
</span><span class=lnt id=hl-20-123><a class=lnlinks href=#hl-20-123>123</a>
</span><span class=lnt id=hl-20-124><a class=lnlinks href=#hl-20-124>124</a>
</span><span class=lnt id=hl-20-125><a class=lnlinks href=#hl-20-125>125</a>
</span><span class=lnt id=hl-20-126><a class=lnlinks href=#hl-20-126>126</a>
</span><span class=lnt id=hl-20-127><a class=lnlinks href=#hl-20-127>127</a>
</span><span class=lnt id=hl-20-128><a class=lnlinks href=#hl-20-128>128</a>
</span><span class=lnt id=hl-20-129><a class=lnlinks href=#hl-20-129>129</a>
</span><span class=lnt id=hl-20-130><a class=lnlinks href=#hl-20-130>130</a>
</span><span class=lnt id=hl-20-131><a class=lnlinks href=#hl-20-131>131</a>
</span><span class=lnt id=hl-20-132><a class=lnlinks href=#hl-20-132>132</a>
</span><span class=lnt id=hl-20-133><a class=lnlinks href=#hl-20-133>133</a>
</span><span class=lnt id=hl-20-134><a class=lnlinks href=#hl-20-134>134</a>
</span><span class=lnt id=hl-20-135><a class=lnlinks href=#hl-20-135>135</a>
</span><span class=lnt id=hl-20-136><a class=lnlinks href=#hl-20-136>136</a>
</span><span class=lnt id=hl-20-137><a class=lnlinks href=#hl-20-137>137</a>
</span><span class=lnt id=hl-20-138><a class=lnlinks href=#hl-20-138>138</a>
</span><span class=lnt id=hl-20-139><a class=lnlinks href=#hl-20-139>139</a>
</span><span class=lnt id=hl-20-140><a class=lnlinks href=#hl-20-140>140</a>
</span><span class=lnt id=hl-20-141><a class=lnlinks href=#hl-20-141>141</a>
</span><span class=lnt id=hl-20-142><a class=lnlinks href=#hl-20-142>142</a>
</span><span class=lnt id=hl-20-143><a class=lnlinks href=#hl-20-143>143</a>
</span><span class=lnt id=hl-20-144><a class=lnlinks href=#hl-20-144>144</a>
</span><span class=lnt id=hl-20-145><a class=lnlinks href=#hl-20-145>145</a>
</span><span class=lnt id=hl-20-146><a class=lnlinks href=#hl-20-146>146</a>
</span><span class=lnt id=hl-20-147><a class=lnlinks href=#hl-20-147>147</a>
</span><span class=lnt id=hl-20-148><a class=lnlinks href=#hl-20-148>148</a>
</span><span class=lnt id=hl-20-149><a class=lnlinks href=#hl-20-149>149</a>
</span><span class=lnt id=hl-20-150><a class=lnlinks href=#hl-20-150>150</a>
</span><span class=lnt id=hl-20-151><a class=lnlinks href=#hl-20-151>151</a>
</span><span class=lnt id=hl-20-152><a class=lnlinks href=#hl-20-152>152</a>
</span><span class=lnt id=hl-20-153><a class=lnlinks href=#hl-20-153>153</a>
</span><span class=lnt id=hl-20-154><a class=lnlinks href=#hl-20-154>154</a>
</span><span class=lnt id=hl-20-155><a class=lnlinks href=#hl-20-155>155</a>
</span><span class=lnt id=hl-20-156><a class=lnlinks href=#hl-20-156>156</a>
</span><span class=lnt id=hl-20-157><a class=lnlinks href=#hl-20-157>157</a>
</span><span class=lnt id=hl-20-158><a class=lnlinks href=#hl-20-158>158</a>
</span><span class=lnt id=hl-20-159><a class=lnlinks href=#hl-20-159>159</a>
</span><span class=lnt id=hl-20-160><a class=lnlinks href=#hl-20-160>160</a>
</span><span class=lnt id=hl-20-161><a class=lnlinks href=#hl-20-161>161</a>
</span><span class=lnt id=hl-20-162><a class=lnlinks href=#hl-20-162>162</a>
</span><span class=lnt id=hl-20-163><a class=lnlinks href=#hl-20-163>163</a>
</span><span class=lnt id=hl-20-164><a class=lnlinks href=#hl-20-164>164</a>
</span><span class=lnt id=hl-20-165><a class=lnlinks href=#hl-20-165>165</a>
</span><span class=lnt id=hl-20-166><a class=lnlinks href=#hl-20-166>166</a>
</span><span class=lnt id=hl-20-167><a class=lnlinks href=#hl-20-167>167</a>
</span><span class=lnt id=hl-20-168><a class=lnlinks href=#hl-20-168>168</a>
</span><span class=lnt id=hl-20-169><a class=lnlinks href=#hl-20-169>169</a>
</span><span class=lnt id=hl-20-170><a class=lnlinks href=#hl-20-170>170</a>
</span><span class=lnt id=hl-20-171><a class=lnlinks href=#hl-20-171>171</a>
</span><span class=lnt id=hl-20-172><a class=lnlinks href=#hl-20-172>172</a>
</span><span class=lnt id=hl-20-173><a class=lnlinks href=#hl-20-173>173</a>
</span><span class=lnt id=hl-20-174><a class=lnlinks href=#hl-20-174>174</a>
</span><span class=lnt id=hl-20-175><a class=lnlinks href=#hl-20-175>175</a>
</span><span class=lnt id=hl-20-176><a class=lnlinks href=#hl-20-176>176</a>
</span><span class=lnt id=hl-20-177><a class=lnlinks href=#hl-20-177>177</a>
</span><span class=lnt id=hl-20-178><a class=lnlinks href=#hl-20-178>178</a>
</span><span class=lnt id=hl-20-179><a class=lnlinks href=#hl-20-179>179</a>
</span><span class=lnt id=hl-20-180><a class=lnlinks href=#hl-20-180>180</a>
</span><span class=lnt id=hl-20-181><a class=lnlinks href=#hl-20-181>181</a>
</span><span class=lnt id=hl-20-182><a class=lnlinks href=#hl-20-182>182</a>
</span><span class=lnt id=hl-20-183><a class=lnlinks href=#hl-20-183>183</a>
</span><span class=lnt id=hl-20-184><a class=lnlinks href=#hl-20-184>184</a>
</span><span class=lnt id=hl-20-185><a class=lnlinks href=#hl-20-185>185</a>
</span><span class=lnt id=hl-20-186><a class=lnlinks href=#hl-20-186>186</a>
</span><span class=lnt id=hl-20-187><a class=lnlinks href=#hl-20-187>187</a>
</span><span class=lnt id=hl-20-188><a class=lnlinks href=#hl-20-188>188</a>
</span><span class=lnt id=hl-20-189><a class=lnlinks href=#hl-20-189>189</a>
</span><span class=lnt id=hl-20-190><a class=lnlinks href=#hl-20-190>190</a>
</span><span class=lnt id=hl-20-191><a class=lnlinks href=#hl-20-191>191</a>
</span><span class=lnt id=hl-20-192><a class=lnlinks href=#hl-20-192>192</a>
</span><span class=lnt id=hl-20-193><a class=lnlinks href=#hl-20-193>193</a>
</span><span class=lnt id=hl-20-194><a class=lnlinks href=#hl-20-194>194</a>
</span><span class=lnt id=hl-20-195><a class=lnlinks href=#hl-20-195>195</a>
</span><span class=lnt id=hl-20-196><a class=lnlinks href=#hl-20-196>196</a>
</span><span class=lnt id=hl-20-197><a class=lnlinks href=#hl-20-197>197</a>
</span><span class=lnt id=hl-20-198><a class=lnlinks href=#hl-20-198>198</a>
</span><span class=lnt id=hl-20-199><a class=lnlinks href=#hl-20-199>199</a>
</span><span class=lnt id=hl-20-200><a class=lnlinks href=#hl-20-200>200</a>
</span><span class=lnt id=hl-20-201><a class=lnlinks href=#hl-20-201>201</a>
</span><span class=lnt id=hl-20-202><a class=lnlinks href=#hl-20-202>202</a>
</span><span class=lnt id=hl-20-203><a class=lnlinks href=#hl-20-203>203</a>
</span><span class=lnt id=hl-20-204><a class=lnlinks href=#hl-20-204>204</a>
</span><span class=lnt id=hl-20-205><a class=lnlinks href=#hl-20-205>205</a>
</span><span class=lnt id=hl-20-206><a class=lnlinks href=#hl-20-206>206</a>
</span><span class=lnt id=hl-20-207><a class=lnlinks href=#hl-20-207>207</a>
</span><span class=lnt id=hl-20-208><a class=lnlinks href=#hl-20-208>208</a>
</span><span class=lnt id=hl-20-209><a class=lnlinks href=#hl-20-209>209</a>
</span><span class=lnt id=hl-20-210><a class=lnlinks href=#hl-20-210>210</a>
</span><span class=lnt id=hl-20-211><a class=lnlinks href=#hl-20-211>211</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>hashlib</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Optional</span><span class=p>,</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>Any</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>logging</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 로깅 설정</span>
</span></span><span class=line><span class=cl><span class=n>logging</span><span class=o>.</span><span class=n>basicConfig</span><span class=p>(</span><span class=n>level</span><span class=o>=</span><span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ImageService</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;이미지 서비스 인터페이스 - Subject 역할&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>load_image</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>image_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>size</span><span class=p>:</span> <span class=nb>tuple</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;이미지 로드 추상 메서드&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>RealImageService</span><span class=p>(</span><span class=n>ImageService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;실제 이미지 서비스 - RealSubject 역할&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>storage_path</span> <span class=o>=</span> <span class=s2>&#34;/images/storage/&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>load_image</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>image_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>size</span><span class=p>:</span> <span class=nb>tuple</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;실제 이미지 로딩 로직 - 시간이 오래 걸리는 작업 시뮬레이션&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;원본 이미지 로딩 시작: </span><span class=si>{</span><span class=n>image_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 시간이 오래 걸리는 작업 시뮬레이션 (네트워크 I/O, 파일 시스템 접근)</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>  <span class=c1># 2초 지연 시뮬레이션</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 실제 이미지 데이터 로딩 및 처리</span>
</span></span><span class=line><span class=cl>        <span class=n>image_data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;id&#34;</span><span class=p>:</span> <span class=n>image_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;data&#34;</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&#34;binary_data_for_</span><span class=si>{</span><span class=n>image_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;size&#34;</span><span class=p>:</span> <span class=n>size</span> <span class=k>if</span> <span class=n>size</span> <span class=k>else</span> <span class=p>(</span><span class=mi>1920</span><span class=p>,</span> <span class=mi>1080</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;format&#34;</span><span class=p>:</span> <span class=s2>&#34;JPEG&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;file_size&#34;</span><span class=p>:</span> <span class=mi>2048000</span><span class=p>,</span>  <span class=c1># 2MB</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;metadata&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;created_at&#34;</span><span class=p>:</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;source&#34;</span><span class=p>:</span> <span class=s2>&#34;original_storage&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;원본 이미지 로딩 완료: </span><span class=si>{</span><span class=n>image_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>image_data</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ImageProxyService</span><span class=p>(</span><span class=n>ImageService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;이미지 프록시 서비스 - Proxy 역할&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_real_service</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>RealImageService</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_cache</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_access_log</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_cache_ttl</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>300</span>  <span class=c1># 캐시 TTL: 5분</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_get_real_service</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>RealImageService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;지연 초기화 - 실제 서비스 객체 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_real_service</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;실제 이미지 서비스 초기화&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_real_service</span> <span class=o>=</span> <span class=n>RealImageService</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_real_service</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_generate_cache_key</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>image_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>size</span><span class=p>:</span> <span class=nb>tuple</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시 키 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>cache_data</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>image_id</span><span class=si>}</span><span class=s2>_</span><span class=si>{</span><span class=n>size</span><span class=si>}</span><span class=s2>&#34;</span> <span class=k>if</span> <span class=n>size</span> <span class=k>else</span> <span class=n>image_id</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>hashlib</span><span class=o>.</span><span class=n>md5</span><span class=p>(</span><span class=n>cache_data</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span><span class=o>.</span><span class=n>hexdigest</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_is_cache_valid</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cache_entry</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시 유효성 검사&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>current_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>cache_time</span> <span class=o>=</span> <span class=n>cache_entry</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;cached_at&#34;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>(</span><span class=n>current_time</span> <span class=o>-</span> <span class=n>cache_time</span><span class=p>)</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cache_ttl</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_log_access</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>image_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>cache_hit</span><span class=p>:</span> <span class=nb>bool</span><span class=p>,</span> <span class=n>response_time</span><span class=p>:</span> <span class=nb>float</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;접근 로그 기록&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>log_entry</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;image_id&#34;</span><span class=p>:</span> <span class=n>image_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;timestamp&#34;</span><span class=p>:</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;cache_hit&#34;</span><span class=p>:</span> <span class=n>cache_hit</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;response_time&#34;</span><span class=p>:</span> <span class=n>response_time</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;ip_address&#34;</span><span class=p>:</span> <span class=s2>&#34;192.168.1.100&#34;</span>  <span class=c1># 시뮬레이션</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_access_log</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>log_entry</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;접근 로그: </span><span class=si>{</span><span class=n>log_entry</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_check_access_permission</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>image_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;접근 권한 검사 - 보호 프록시 기능&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제 환경에서는 사용자 인증, 권한 검사 등을 수행</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>image_id</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&#34;private_&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;비공개 이미지 접근 차단: </span><span class=si>{</span><span class=n>image_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_optimize_image</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>image_data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span> <span class=n>size</span><span class=p>:</span> <span class=nb>tuple</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;이미지 최적화 - 스마트 프록시 기능&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>size</span> <span class=ow>and</span> <span class=n>size</span> <span class=o>!=</span> <span class=n>image_data</span><span class=p>[</span><span class=s2>&#34;size&#34;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 이미지 리사이징 시뮬레이션</span>
</span></span><span class=line><span class=cl>            <span class=n>optimized_data</span> <span class=o>=</span> <span class=n>image_data</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>optimized_data</span><span class=p>[</span><span class=s2>&#34;size&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>size</span>
</span></span><span class=line><span class=cl>            <span class=n>optimized_data</span><span class=p>[</span><span class=s2>&#34;file_size&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>image_data</span><span class=p>[</span><span class=s2>&#34;file_size&#34;</span><span class=p>]</span> <span class=o>*</span> <span class=mf>0.6</span><span class=p>)</span>  <span class=c1># 40% 크기 감소</span>
</span></span><span class=line><span class=cl>            <span class=n>optimized_data</span><span class=p>[</span><span class=s2>&#34;metadata&#34;</span><span class=p>][</span><span class=s2>&#34;optimized&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            <span class=n>optimized_data</span><span class=p>[</span><span class=s2>&#34;metadata&#34;</span><span class=p>][</span><span class=s2>&#34;optimization_time&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;이미지 최적화 완료: </span><span class=si>{</span><span class=n>image_data</span><span class=p>[</span><span class=s1>&#39;id&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> -&gt; </span><span class=si>{</span><span class=n>size</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>optimized_data</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>image_data</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>load_image</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>image_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>size</span><span class=p>:</span> <span class=nb>tuple</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;프록시를 통한 이미지 로딩&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 1. 접근 권한 검사</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_check_access_permission</span><span class=p>(</span><span class=n>image_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>PermissionError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;이미지 접근 권한이 없습니다: </span><span class=si>{</span><span class=n>image_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 2. 캐시 확인</span>
</span></span><span class=line><span class=cl>        <span class=n>cache_key</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_generate_cache_key</span><span class=p>(</span><span class=n>image_id</span><span class=p>,</span> <span class=n>size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>cache_key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cache</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>cache_entry</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cache</span><span class=p>[</span><span class=n>cache_key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_cache_valid</span><span class=p>(</span><span class=n>cache_entry</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=c1># 캐시 히트</span>
</span></span><span class=line><span class=cl>                <span class=n>response_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start_time</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>_log_access</span><span class=p>(</span><span class=n>image_id</span><span class=p>,</span> <span class=n>cache_hit</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>response_time</span><span class=o>=</span><span class=n>response_time</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;캐시에서 이미지 반환: </span><span class=si>{</span><span class=n>image_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>cache_entry</span><span class=p>[</span><span class=s2>&#34;data&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1># 캐시 만료</span>
</span></span><span class=line><span class=cl>                <span class=k>del</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cache</span><span class=p>[</span><span class=n>cache_key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;만료된 캐시 삭제: </span><span class=si>{</span><span class=n>image_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 3. 캐시 미스 - 실제 서비스에서 이미지 로드</span>
</span></span><span class=line><span class=cl>        <span class=n>real_service</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_real_service</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>image_data</span> <span class=o>=</span> <span class=n>real_service</span><span class=o>.</span><span class=n>load_image</span><span class=p>(</span><span class=n>image_id</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>  <span class=c1># 원본 크기로 로드</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 4. 이미지 최적화</span>
</span></span><span class=line><span class=cl>        <span class=n>optimized_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_optimize_image</span><span class=p>(</span><span class=n>image_data</span><span class=p>,</span> <span class=n>size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 5. 캐시에 저장</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_cache</span><span class=p>[</span><span class=n>cache_key</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;data&#34;</span><span class=p>:</span> <span class=n>optimized_data</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;cached_at&#34;</span><span class=p>:</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 6. 접근 로그 기록</span>
</span></span><span class=line><span class=cl>        <span class=n>response_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start_time</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_log_access</span><span class=p>(</span><span class=n>image_id</span><span class=p>,</span> <span class=n>cache_hit</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>response_time</span><span class=o>=</span><span class=n>response_time</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>optimized_data</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_cache_stats</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시 통계 정보 반환&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>total_requests</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_access_log</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>cache_hits</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=mi>1</span> <span class=k>for</span> <span class=n>log</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_access_log</span> <span class=k>if</span> <span class=n>log</span><span class=p>[</span><span class=s2>&#34;cache_hit&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;total_requests&#34;</span><span class=p>:</span> <span class=n>total_requests</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;cache_hits&#34;</span><span class=p>:</span> <span class=n>cache_hits</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;cache_hit_rate&#34;</span><span class=p>:</span> <span class=n>cache_hits</span> <span class=o>/</span> <span class=n>total_requests</span> <span class=k>if</span> <span class=n>total_requests</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=k>else</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;cached_images&#34;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_cache</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;average_response_time&#34;</span><span class=p>:</span> <span class=nb>sum</span><span class=p>(</span><span class=n>log</span><span class=p>[</span><span class=s2>&#34;response_time&#34;</span><span class=p>]</span> <span class=k>for</span> <span class=n>log</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_access_log</span><span class=p>)</span> <span class=o>/</span> <span class=n>total_requests</span> <span class=k>if</span> <span class=n>total_requests</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=k>else</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;프록시 패턴 사용 예시&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 이미지 프록시 서비스 생성 (실제 서비스는 지연 초기화)</span>
</span></span><span class=line><span class=cl>    <span class=n>image_service</span> <span class=o>=</span> <span class=n>ImageProxyService</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=== 이미지 프록시 서비스 테스트 ===</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 첫 번째 요청 - 캐시 미스, 실제 서비스 호출</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;1. 첫 번째 이미지 요청 (캐시 미스)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>image1</span> <span class=o>=</span> <span class=n>image_service</span><span class=o>.</span><span class=n>load_image</span><span class=p>(</span><span class=s2>&#34;product_001&#34;</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=p>(</span><span class=mi>800</span><span class=p>,</span> <span class=mi>600</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;로드된 이미지: </span><span class=si>{</span><span class=n>image1</span><span class=p>[</span><span class=s1>&#39;id&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>, 크기: </span><span class=si>{</span><span class=n>image1</span><span class=p>[</span><span class=s1>&#39;size&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 두 번째 요청 - 동일 이미지, 캐시 히트</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;2. 동일 이미지 재요청 (캐시 히트)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>image2</span> <span class=o>=</span> <span class=n>image_service</span><span class=o>.</span><span class=n>load_image</span><span class=p>(</span><span class=s2>&#34;product_001&#34;</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=p>(</span><span class=mi>800</span><span class=p>,</span> <span class=mi>600</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;로드된 이미지: </span><span class=si>{</span><span class=n>image2</span><span class=p>[</span><span class=s1>&#39;id&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>, 크기: </span><span class=si>{</span><span class=n>image2</span><span class=p>[</span><span class=s1>&#39;size&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 세 번째 요청 - 다른 크기, 캐시 미스</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;3. 다른 크기로 이미지 요청 (캐시 미스)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>image3</span> <span class=o>=</span> <span class=n>image_service</span><span class=o>.</span><span class=n>load_image</span><span class=p>(</span><span class=s2>&#34;product_001&#34;</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=p>(</span><span class=mi>400</span><span class=p>,</span> <span class=mi>300</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;로드된 이미지: </span><span class=si>{</span><span class=n>image3</span><span class=p>[</span><span class=s1>&#39;id&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>, 크기: </span><span class=si>{</span><span class=n>image3</span><span class=p>[</span><span class=s1>&#39;size&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 네 번째 요청 - 접근 권한 없는 이미지</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;4. 비공개 이미지 접근 시도 (권한 오류)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>image4</span> <span class=o>=</span> <span class=n>image_service</span><span class=o>.</span><span class=n>load_image</span><span class=p>(</span><span class=s2>&#34;private_secret_001&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>PermissionError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;오류: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 캐시 통계 출력</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;5. 캐시 통계&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>stats</span> <span class=o>=</span> <span class=n>image_service</span><span class=o>.</span><span class=n>get_cache_stats</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;총 요청 수: </span><span class=si>{</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;total_requests&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;캐시 히트 수: </span><span class=si>{</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;cache_hits&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;캐시 히트율: </span><span class=si>{</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;cache_hit_rate&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>%</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;캐시된 이미지 수: </span><span class=si>{</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;cached_images&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;평균 응답 시간: </span><span class=si>{</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;average_response_time&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>초&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>main</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>고려사항</strong></th><th><strong>설명</strong></th><th><strong>권장 전략 및 해결책</strong></th></tr></thead><tbody><tr><td><strong>설계 원칙</strong></td><td>인터페이스 일관성 유지</td><td>클라이언트는 실제 객체와 프록시를 구분하지 않도록 동일 인터페이스 필요</td><td>Subject 인터페이스 명세화, 프록시 - 실제 객체 동일 구현</td></tr><tr><td></td><td>구조 복잡도 증가 관리</td><td>Proxy 가 과도하게 쌓이면 유지보수성 및 가독성 저하</td><td>공통 프록시 추상화, 레이어 수 최소화, 설계 문서화</td></tr><tr><td><strong>성능 최적화</strong></td><td>오버헤드 최소화</td><td>프록시 계층이 호출 시간에 영향을 줄 수 있음</td><td>핵심 기능만 프록시에 구현, 벤치마킹 통한 측정, 필요 시 직접 접근 병행</td></tr><tr><td></td><td>캐싱 전략 설계</td><td>Proxy 내 캐시가 일관되지 않으면 데이터 불일치 발생 가능</td><td>TTL, LRU 정책 적용, 캐시 무효화 동기화</td></tr><tr><td><strong>보안/권한</strong></td><td>인증/인가 로직 누락 방지</td><td>보호 프록시 적용 시 권한 검증 로직이 누락되면 보안 문제가 발생할 수 있음</td><td>민감 리소스는 반드시 프록시를 거치도록 구성, 인증 모듈과 프록시 분리</td></tr><tr><td><strong>동시성/메모리</strong></td><td>스레드 안전성과 메모리 관리</td><td>멀티스레드 환경에서 공유 객체 접근 시 오류 가능, 참조 유지로 인한 누수 가능</td><td>Thread-safe 구조, 불변 객체, 약한 참조 (WeakRef) 및 수명 주기 관리 적용</td></tr><tr><td><strong>확장성 설계</strong></td><td>프록시 체인 구조 고려</td><td>복수의 프록시를 체인처럼 연결해야 하는 경우 설계가 난해할 수 있음</td><td>체인 가능한 구조 설계, AOP 등으로 관심사 분리</td></tr><tr><td><strong>예외 처리</strong></td><td>장애 대응 및 복구 전략</td><td>Remote Proxy 또는 외부 서비스 실패에 취약할 수 있음</td><td>Circuit Breaker, Retry, Fallback 도입</td></tr><tr><td><strong>모니터링</strong></td><td>동작 추적 및 지표 수집</td><td>프록시 계층은 흐름을 숨길 수 있어 디버깅 어려움</td><td>Trace ID, APM, 로그 컨텍스트 전파 등 모니터링 체계 구축</td></tr><tr><td><strong>테스트</strong></td><td>테스트 구조 확보</td><td>프록시 포함 시스템은 테스트 커버리지 확보가 어려움</td><td>DI 설계 기반, Mock/Stub 활용, 자동화 테스트 설계</td></tr></tbody></table><h4 id=리팩토링-전략>리팩토링 전략<a hidden class=anchor aria-hidden=true href=#리팩토링-전략>#</a></h4><table><thead><tr><th>리팩토링 대상</th><th>문제점</th><th>리팩토링 전략</th></tr></thead><tbody><tr><td>중첩 Proxy</td><td>성능 저하 및 추적 어려움</td><td>Proxy Factory 로 계층 구성 자동화</td></tr><tr><td>권한 로직 분산</td><td>여러 Proxy 마다 인증 로직 중복</td><td>공통 인증 서비스 모듈화</td></tr><tr><td>테스트 커버리지 부족</td><td>실/가짜 객체 혼용 시 누락 가능</td><td>테스트 더블 (Mock, Stub) 설계 및 DI 적용</td></tr><tr><td>요청/응답 로그 없음</td><td>감시 및 추적 어려움</td><td>SmartProxy 로 감시 기능 내장 추가</td></tr></tbody></table><h3 id=성능-최적화-고려사항-및-주의점>성능 최적화 고려사항 및 주의점<a hidden class=anchor aria-hidden=true href=#성능-최적화-고려사항-및-주의점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>고려사항</strong></th><th><strong>설명</strong></th><th><strong>권장 전략 및 해결책</strong></th></tr></thead><tbody><tr><td><strong>캐싱 전략</strong></td><td>캐시 정책 최적화</td><td>응답 속도 향상과 반복 작업 최소화를 위해 캐시 적용 필요</td><td>TTL 설정, LRU/LFU 캐시 알고리즘 도입, 캐시 무효화 전략 설계</td></tr><tr><td></td><td>캐시 크기 및 메모리 관리</td><td>과도한 캐시는 메모리 낭비, 객체 누수 위험</td><td>캐시 모니터링, 동적 크기 조정, 가비지 컬렉션 최적화</td></tr><tr><td><strong>지연 초기화</strong></td><td>Lazy Loading 적용 시점 조정</td><td>실제 사용 시점까지 객체 생성을 미루어 자원 사용 최소화</td><td>사용 패턴 분석 기반 지연 로딩 시점 결정, Virtual Proxy 활용</td></tr><tr><td><strong>연결 및 리소스 관리</strong></td><td>커넥션 풀링</td><td>DB 및 네트워크 연결을 반복 재사용하여 성능 향상</td><td>DB 커넥션 풀 (HikariCP 등), HTTP 커넥션 풀 사용</td></tr><tr><td></td><td>리소스 자동 해제</td><td>연결 누수 및 메모리 낭비 방지</td><td>컨텍스트 매니저 사용, 약한 참조 (WeakRef), 명확한 생명주기 관리 적용</td></tr><tr><td><strong>비동기 및 병렬 처리</strong></td><td>논블로킹 처리</td><td>요청 병렬화, IO 지연 최소화</td><td>비동기 프로그래밍 모델 적용, asyncio / Promise / Future 활용</td></tr><tr><td></td><td>요청 집약화 (Batching)</td><td>개별 호출보다 집약된 처리로 네트워크 오버헤드 감소</td><td>배치 처리, Bulk API 활용</td></tr><tr><td><strong>예외 및 네트워크 처리</strong></td><td>Remote Proxy 안정성 확보</td><td>네트워크 오류 시 시스템 전파 방지 필요</td><td>Timeout 설정, Retry 메커니즘, Circuit Breaker, Fallback 전략 적용</td></tr><tr><td><strong>프록시 구조 최적화</strong></td><td>프록시 중첩 최소화</td><td>프록시가 겹치면 복잡성 증가 및 오버헤드 유발</td><td>불필요한 프록시 제거, 핵심 기능만 남기고 부가기능은 AOP 로 분리</td></tr><tr><td></td><td>프록시 로직 경량화</td><td>복잡한 로직은 병목의 원인</td><td>최소한의 작업만 수행, 비즈니스 로직은 별도 계층 분리</td></tr><tr><td><strong>동기화 및 동시성</strong></td><td>스레드 안전성 확보</td><td>멀티스레드 환경에서 데이터 정합성 유지</td><td>불변 객체, 락 최소화, Concurrent 자료구조 활용</td></tr><tr><td><strong>성능 모니터링</strong></td><td>성능 병목 지점 분석</td><td>최적화 여부 판단을 위한 실측 필요</td><td>APM, 분산 트레이싱, 프로파일링 도구 (e.g., py-spy, Chrome DevTools 등)</td></tr><tr><td><strong>알고리즘 선택</strong></td><td>캐시 교체 알고리즘 선택</td><td>빈번한 데이터에 유리한 알고리즘 선택 필요</td><td>LRU, LFU, ARC 등 캐시 적중률을 높이는 전략 도입</td></tr></tbody></table><h3 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>설계 원칙/패턴</strong></td><td>Proxy Pattern</td><td>패턴 조합</td><td>여러 프록시를 조합하여 복잡한 문제 해결 가능</td></tr><tr><td></td><td>OCP / SRP</td><td>확장성과 책임 분리</td><td>기능 확장 시 기존 코드 변경 없이 가능, 단일 책임 원칙에 적합</td></tr><tr><td></td><td>Decorator / Adapter Pattern</td><td>유사 구조, 목적 차이</td><td>구조는 유사하지만, 기능 확장 (Decorator), 인터페이스 변환 (Adapter) 차이점 존재</td></tr><tr><td><strong>아키텍처</strong></td><td>Proxy 계층 분리</td><td>구조적 유지보수성 확보</td><td>Subject 인터페이스 기반으로 결합도 낮추고, 프록시 계층을 독립적으로 설계</td></tr><tr><td></td><td>API Gateway</td><td>서비스 프록시 역할</td><td>마이크로서비스의 진입점으로 인증, 로깅, 라우팅 등을 프록시 계층에서 처리</td></tr><tr><td></td><td>컨테이너 프록시</td><td>Docker/K8s 프록시 패턴</td><td>인프라 환경에서 요청을 라우팅하거나 제어하는 구조에 활용</td></tr><tr><td><strong>프레임워크/언어</strong></td><td>Spring AOP / JPA</td><td>동적 프록시, 지연 로딩</td><td>런타임 프록시를 활용한 AOP, ORM 프레임워크의 Lazy Loading 구현</td></tr><tr><td></td><td>JDK Proxy / CGLIB</td><td>동적 바이트코드 기반 프록시</td><td>인터페이스 기반 (JDK) 또는 클래스 기반 (CGLIB) 의 런타임 프록시 생성</td></tr><tr><td></td><td>Kotlin Delegation</td><td>언어 차원의 위임 프록시</td><td><code>by</code> 키워드를 통해 위임 프록시 구현 가능</td></tr><tr><td></td><td>NestJS Interceptor</td><td>프록시 기반 요청 가로채기</td><td>Node.js 기반 프레임워크에서 프록시를 통한 인증, 로깅 등 가로채기 구조 구현</td></tr><tr><td><strong>보안/컴플라이언스</strong></td><td>Protection Proxy</td><td>접근 제어 강화</td><td>민감 API, 관리자 기능 등에 인증/인가 프록시 도입 필수</td></tr><tr><td></td><td>Reverse Proxy</td><td>내부 시스템 보호</td><td>SSL 종료, 인증/인가, 내부 자원 보호 등 네트워크 보안 강화 역할 수행</td></tr><tr><td></td><td>동적 보안 정책</td><td>실시간 위협 대응</td><td>동적으로 보안 규칙을 갱신하고 위협에 대응하는 프록시 구조</td></tr><tr><td><strong>성능 최적화</strong></td><td>Virtual Proxy</td><td>지연 로딩 전략</td><td>객체 생성 비용을 줄이기 위한 Lazy Initialization</td></tr><tr><td></td><td>Caching Proxy</td><td>캐싱 전략 적용</td><td>TTL 및 일관된 캐시 무효화 정책을 통한 응답 속도 개선</td></tr><tr><td></td><td>CDN / HTTP/3 Proxy</td><td>콘텐츠 프록시 / 성능 개선</td><td>전송 계층에서의 캐싱, QUIC 기반 고성능 통신 지원</td></tr><tr><td><strong>테스트 자동화</strong></td><td>Mock / Stub Proxy</td><td>테스트 프록시 활용</td><td>테스트용 가짜 객체 구현, 단위 및 통합 테스트 시나리오 구성 가능</td></tr><tr><td><strong>분산 시스템/관찰성</strong></td><td>Remote Proxy / gRPC Stub</td><td>원격 호출 추상화</td><td>원격 객체를 로컬처럼 사용하며, 장애에 대비한 예외 처리 및 추상화 구조 적용</td></tr><tr><td></td><td>OpenTelemetry</td><td>분산 추적 프록시 모니터링</td><td>Trace ID 기반으로 프록시 체인을 통한 요청 흐름 추적</td></tr><tr><td><strong>자동화/진화</strong></td><td>자가 치유 프록시</td><td>장애 감지 및 자동 복구</td><td>상태 모니터링과 회복을 프록시가 자동 수행 (Self-healing Architecture)</td></tr><tr><td></td><td>하이브리드 패턴</td><td>프록시 + 데코레이터 + 어댑터</td><td>다양한 패턴을 조합하여 유연한 구조 설계 가능</td></tr></tbody></table><h3 id=주제-관련-추가-학습-내용>주제 관련 추가 학습 내용<a hidden class=anchor aria-hidden=true href=#주제-관련-추가-학습-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>항목/기술</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>디자인 패턴</strong></td><td>프록시 패턴 유형 구분</td><td>Virtual / Protection / Remote / Smart / Caching</td><td>다양한 목적에 따라 분류되는 프록시 패턴 유형 및 구조적 차이 이해</td></tr><tr><td></td><td>프록시 패턴 vs 데코레이터/어댑터</td><td>구조/목적 비교</td><td>유사한 구조를 가지나, 확장성 (Decorator), 호환성 (Adapter) 중심으로 목적이 다름</td></tr><tr><td></td><td>Lazy Initialization</td><td>Virtual Proxy 연계</td><td>객체 생성을 실제로 필요할 때까지 지연하는 전략</td></tr><tr><td></td><td>Composite + Proxy</td><td>트리 구조에 프록시 결합</td><td>구조 패턴과의 조합으로 복합 객체 구조 제어 가능</td></tr><tr><td><strong>언어/프레임워크</strong></td><td>Java / TypeScript / Python</td><td>언어별 Proxy 구현</td><td>동적 Proxy(<code>Proxy</code>, <code>super().__getattr__</code>) 및 정적 프록시 구현 이해</td></tr><tr><td></td><td>Kotlin Delegation</td><td><code>by</code> 위임 프록시</td><td>언어 레벨에서 위임 기반 프록시 구현을 제공</td></tr><tr><td></td><td>Spring AOP</td><td>런타임 동적 프록시</td><td>인터페이스 기반 (JDK Proxy) 또는 클래스 기반 (CGLIB) 프록시를 통해 횡단 관심사 구현</td></tr><tr><td></td><td>NestJS Interceptor</td><td>Node.js 기반 프록시</td><td>요청/응답 가로채기 구조로 인증, 로깅 등 처리</td></tr><tr><td><strong>보안 / 인증</strong></td><td>Protection Proxy</td><td>인증/인가 제어 프록시</td><td>민감 메서드 접근 제한, RBAC, ABAC 등의 정책 적용</td></tr><tr><td></td><td>OAuth2 / JWT</td><td>인증 토큰 기반 프록시</td><td>OAuth 프록시, JWT 토큰 기반 보안 흐름 적용</td></tr><tr><td></td><td>제로 트러스트 아키텍처</td><td>프록시 기반 신뢰 검증 구조</td><td>실시간 위협 감지 및 보안 컨텍스트 기반 접근 제어</td></tr><tr><td><strong>네트워크 / 클라우드</strong></td><td>Reverse Proxy (Nginx 등)</td><td>요청 중계 / SSL 종료</td><td>로드 밸런싱, 내부 시스템 보호, 보안 및 고가용성 지원</td></tr><tr><td></td><td>CDN Proxy / HTTP/3 Proxy</td><td>고성능 콘텐츠 프록시</td><td>분산 캐시, QUIC 기반 고속 통신 지원</td></tr><tr><td></td><td>Service Mesh (Istio/Envoy)</td><td>사이드카 프록시 통한 통신 제어</td><td>서비스 간 통신 제어, 트래픽 정책, mTLS, Rate Limiting 등 포함</td></tr><tr><td></td><td>API Gateway (Kong, Zuul 등)</td><td>프록시 기반 API 집중 제어</td><td>인증, 로깅, 라우팅, 제한 정책 등을 API 단일 진입점에서 수행</td></tr><tr><td><strong>분산 시스템</strong></td><td>Remote Proxy / RMI / RPC</td><td>원격 서비스 호출 프록시</td><td>로컬처럼 보이는 프록시 객체를 통해 원격 서비스와 통신</td></tr><tr><td></td><td>Circuit Breaker</td><td>장애 격리 프록시</td><td>Remote Proxy 사용 시 네트워크 장애 격리, fallback 전략 적용</td></tr><tr><td><strong>성능 최적화 / 캐싱</strong></td><td>Caching Proxy</td><td>TTL, LRU 등 캐시 전략</td><td>응답 시간 단축, 자원 절약을 위한 다양한 캐시 정책 적용</td></tr><tr><td></td><td>Cache Invalidation</td><td>일관성 보장 전략</td><td>캐시 무효화 시점/정책 관리로 데이터 일관성 유지</td></tr><tr><td></td><td>비동기 프록시 / 배치 프록시</td><td>네트워크/DB 최적화</td><td>병렬 처리, I/O 감소를 위한 요청 묶기 전략</td></tr><tr><td><strong>테스트 / 유지보수</strong></td><td>Mock / Stub Proxy</td><td>테스트 자동화 프록시</td><td>테스트 환경에서 실제 객체 대신 사용하는 테스트 전용 대역 구현</td></tr><tr><td></td><td>프록시 테스트 전략</td><td>DI 기반 구조 / Mock 대체</td><td>프록시 계층 테스트 가능성을 높이기 위한 구조 설계 필요</td></tr><tr><td><strong>모니터링 / 관찰가능성</strong></td><td>OpenTelemetry, Jaeger, Zipkin</td><td>분산 추적 기반 모니터링 프록시</td><td>Trace ID 기반 요청 추적, 메트릭 수집, 병목 식별</td></tr><tr><td></td><td>APM Tools (New Relic 등)</td><td>성능 병목 분석</td><td>실시간 모니터링 도구로 프록시 계층의 성능 영향 분석</td></tr><tr><td><strong>운영 전략 / 자동화</strong></td><td>Self-healing Proxy</td><td>자동 복구 프록시</td><td>장애 감지 후 자동 재시도, 상태 전이 기반 복구 흐름 포함</td></tr><tr><td></td><td>Proxy 자동 생성 도구</td><td>코드 생성기 / AOP 컴파일러</td><td>프록시 계층 자동화 및 반복 제거를 위한 도구 사용</td></tr><tr><td></td><td>Proxy 계층 설계</td><td>계층 구조화 / 책임 분리</td><td>기능, 보안, 로깅 등을 목적별로 분리하여 관리 가능하게 설계</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th><strong>카테고리</strong></th><th><strong>용어</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>패턴 구성요소</strong></td><td>Proxy</td><td>실제 객체에 대한 대리자, 접근 제어·로깅·지연 초기화 등 기능 수행</td></tr><tr><td></td><td>RealSubject</td><td>실제 비즈니스 로직을 수행하는 주체 객체</td></tr><tr><td></td><td>Subject</td><td>Proxy 와 RealSubject 가 구현하는 공통 인터페이스</td></tr><tr><td><strong>프록시 유형</strong></td><td>Virtual Proxy</td><td>리소스가 큰 객체의 생성을 지연하여 필요할 때 생성하는 프록시</td></tr><tr><td></td><td>Protection Proxy</td><td>인증, 권한 검사 등 접근 제어를 담당하는 보안용 프록시</td></tr><tr><td></td><td>Remote Proxy</td><td>네트워크를 통한 원격 객체 접근을 로컬처럼 추상화한 프록시</td></tr><tr><td></td><td>Caching Proxy</td><td>호출 결과를 캐시에 저장하여 성능을 향상시키는 프록시</td></tr><tr><td></td><td>Smart Proxy (Smart Reference)</td><td>접근 시 부가 기능 (로깅, 참조 계수, 잠금 등) 을 수행하는 지능형 프록시</td></tr><tr><td><strong>프록시 구현 전략</strong></td><td>Static Proxy</td><td>컴파일 시점에 명시적으로 정의되는 프록시 클래스 구현 방식</td></tr><tr><td></td><td>Dynamic Proxy</td><td>런타임에 리플렉션 등으로 동적으로 생성되는 프록시 객체</td></tr><tr><td></td><td>Lazy Initialization</td><td>Virtual Proxy 와 연결되는 전략, 객체 생성을 지연시켜 리소스 절약</td></tr><tr><td></td><td>Delegation</td><td>프록시가 실제 처리를 다른 객체 (RealSubject 등) 에게 위임하는 구조</td></tr><tr><td></td><td>Placeholder</td><td>실제 객체가 준비될 때까지 대체 역할을 수행하는 임시 객체</td></tr><tr><td><strong>보안 / 인증</strong></td><td>Access Control</td><td>자원에 대한 접근을 제어하는 보안 메커니즘 (Protection Proxy 와 연계)</td></tr><tr><td></td><td>OAuth2 / JWT Proxy</td><td>토큰 기반 인증 시스템에서 프록시를 통해 권한 부여 흐름 구현</td></tr><tr><td></td><td>Zero Trust Architecture</td><td>모든 접근 요청에 대해 검증을 수행하는 보안 중심 설계 모델 (프록시 기반 필수 구성 요소)</td></tr><tr><td><strong>시스템 최적화</strong></td><td>Cache Hit Rate</td><td>캐싱된 결과로 응답된 요청 비율 (Caching Proxy 성능 지표)</td></tr><tr><td></td><td>TTL (Time To Live)</td><td>캐시된 데이터의 유효 시간 설정, 만료 정책 관리</td></tr><tr><td></td><td>Circuit Breaker</td><td>장애 전파를 방지하는 회로 차단 패턴 (Remote Proxy 와 함께 사용됨)</td></tr><tr><td></td><td>Fallback</td><td>장애 발생 시 대체 처리를 수행하는 전략 (Circuit Breaker 와 연계)</td></tr><tr><td><strong>분산 시스템/네트워크</strong></td><td>RMI Proxy / gRPC Proxy</td><td>원격 객체 호출을 프록시로 캡슐화하여 로컬 객체처럼 사용</td></tr><tr><td></td><td>Sidecar Proxy</td><td>마이크로서비스 환경에서 서비스와 함께 배포되는 통신 제어용 프록시 (예: Istio, Envoy)</td></tr><tr><td></td><td>API Gateway / Reverse Proxy</td><td>요청 라우팅, 인증, 보안 등을 담당하는 인프라 프록시 계층 구성 요소</td></tr><tr><td><strong>AOP/프레임워크 연계</strong></td><td>AOP (Aspect-Oriented Programming)</td><td>횡단 관심사 (로깅, 트랜잭션 등) 를 별도 모듈로 처리하는 프로그래밍 방식</td></tr><tr><td></td><td>Spring AOP / JDK Proxy</td><td>스프링 프레임워크에서 프록시 기반으로 AOP 구현 (인터페이스 기반 프록시 생성)</td></tr><tr><td></td><td>CGLIB Proxy</td><td>클래스 기반의 프록시 생성 기술 (인터페이스 없이도 가능)</td></tr><tr><td></td><td>NestJS Interceptor</td><td>Node.js 기반 프레임워크에서 요청/응답 가로채기 구조로 프록시 역할 수행</td></tr><tr><td></td><td>Kotlin Delegation (<code>by</code>)</td><td>언어 차원에서 제공하는 위임 기반 프록시 구현 문법</td></tr><tr><td><strong>추상화 특성/기타</strong></td><td>Surrogate</td><td>일반적으로 Proxy 와 동일 의미로 사용되며, 객체의 대리자 역할을 함</td></tr><tr><td></td><td>Transparency</td><td>클라이언트가 Proxy 와 RealSubject 를 구분하지 못하도록 만드는 특성</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><h3 id=공식-문서-및-전문가-자료>공식 문서 및 전문가 자료<a hidden class=anchor aria-hidden=true href=#공식-문서-및-전문가-자료>#</a></h3><ul><li><a href=https://refactoring.guru/design-patterns/proxy>Proxy Pattern (Refactoring Guru)</a></li><li><a href=https://sourcemaking.com/design_patterns/proxy>Proxy Design Pattern (SourceMaking)</a></li><li><a href=https://www.dofactory.com/net/proxy-design-pattern>Proxy Design Pattern in .NET (DoFactory)</a></li><li><a href=https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#aop>Spring AOP Reference (Spring Docs)</a></li><li><a href=https://grpc.io/docs/>gRPC – Remote Proxies via Stub</a></li><li><a href=https://www.geeksforgeeks.org/proxy-design-pattern/>Proxy Pattern (GeeksforGeeks)</a></li><li><a href=https://www.baeldung.com/java-proxy-pattern>The Proxy Pattern in Java (Baeldung)</a></li><li><a href=https://martinfowler.com/eaaCatalog/proxy.html>Martin Fowler – Patterns of Enterprise Application Architecture: Proxy</a></li><li><a href=https://docs.oracle.com/javase/8/docs/technotes/guides/reflection/proxy.html>Java Dynamic Proxy Documentation (Oracle)</a></li><li><a href=https://www.digitalocean.com/community/tutorials/proxy-design-pattern>Design Patterns: Proxy Pattern (DigitalOcean)</a></li><li><a href=https://java-design-patterns.com/patterns/proxy/>Proxy Pattern (Java Design Patterns)</a></li><li><a href=https://www.tutorialspoint.com/microservices_design_patterns/microservices_design_patterns_proxy.htm>Microservices Design Patterns – Proxy (TutorialsPoint)</a></li></ul><h3 id=블로그-및-실무-활용-사례>블로그 및 실무 활용 사례<a hidden class=anchor aria-hidden=true href=#블로그-및-실무-활용-사례>#</a></h3><ul><li><a href=https://refactoring.guru/ko/design-patterns/proxy>프록시 패턴 - Refactoring Guru (Korean)</a></li><li><a href=https://inpa.tistory.com/entry/GOF-%F0%9F%92%A0-%ED%94%84%EB%A1%9D%EC%8B%9CProxy-%ED%8C%A8%ED%84%B4-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EB%B0%B0%EC%9B%8C%EB%B3%B4%EC%9E%90>프록시 패턴 마스터하기 – Inpa Dev</a></li><li><a href=https://velog.io/@j3beom/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4-%ED%94%84%EB%A1%9D%EC%8B%9C-%ED%8C%A8%ED%84%B4-Proxy-Pattern>디자인 패턴 – 프록시 패턴 상세 설명 – velog</a></li><li><a href=https://sabarada.tistory.com/20>Spring에서 Proxy Pattern을 활용한 AOP 적용기 – sabarada</a></li><li><a href=https://eunveloper.tistory.com/entry/Proxy-Pattern-%EC%9C%BC%EB%A1%9C-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EB%8A%94-%EB%8B%A4%EC%9D%B4%EB%82%98%EB%AF%B9-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A0%81%EC%9A%A9%EA%B8%B0>Proxy Pattern 적용기 – eunveloper</a></li></ul><hr></div></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>