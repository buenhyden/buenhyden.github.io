<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Singleton Pattern | hyunyoun's Blog</title><meta name=keywords content="Software-Engineering,Design-and-Architecture,Software-Design-Patterns,GoF,Creational,Singleton-Pattern,lazy-initialization"><meta name=description content="Singleton 패턴은 클래스의 인스턴스를 하나만 생성하고, 어디서든 이 인스턴스를 공유하도록 보장하는 패턴이다. 전역 상태 관리, 설정 객체, 로깅, 캐시 등에서 활용되며, thread-safe 구현이 핵심이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/creational/singleton-pattern/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/creational/singleton-pattern/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/creational/singleton-pattern/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/creational/singleton-pattern/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Singleton Pattern"><meta property="og:description" content="Singleton 패턴은 클래스의 인스턴스를 하나만 생성하고, 어디서든 이 인스턴스를 공유하도록 보장하는 패턴이다. 전역 상태 관리, 설정 객체, 로깅, 캐시 등에서 활용되며, thread-safe 구현이 핵심이다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Singleton Pattern"><meta name=twitter:description content="Singleton 패턴은 클래스의 인스턴스를 하나만 생성하고, 어디서든 이 인스턴스를 공유하도록 보장하는 패턴이다. 전역 상태 관리, 설정 객체, 로깅, 캐시 등에서 활용되며, thread-safe 구현이 핵심이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"기록하고 기억하고 활용하자.","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Software Engineering","item":"https://buenhyden.github.io/posts/software-engineering/"},{"@type":"ListItem","position":3,"name":"Design and Architecture","item":""},{"@type":"ListItem","position":4,"name":"Software Design Patterns","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/"},{"@type":"ListItem","position":5,"name":"Classic Design Patterns","item":""},{"@type":"ListItem","position":6,"name":"GoF","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/"},{"@type":"ListItem","position":7,"name":"Creational","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/creational/"},{"@type":"ListItem","position":8,"name":"Singleton Pattern","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/creational/singleton-pattern/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>기록하고 기억하고 활용하자.</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/>Software Engineering</a>&nbsp;»&nbsp;<a href>Design and Architecture</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/>Software Design Patterns</a>&nbsp;»&nbsp;<a href>Classic Design Patterns</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/>GoF</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/classic-design-patterns/gof/creational/>Creational</a></div><h1>Singleton Pattern</h1><div class=post-description>Singleton 패턴은 클래스의 인스턴스를 하나만 생성하고, 어디서든 이 인스턴스를 공유하도록 보장하는 패턴이다. 전역 상태 관리, 설정 객체, 로깅, 캐시 등에서 활용되며, thread-safe 구현이 핵심이다.</div></header><div class=post-content><h2 id=singleton-pattern>Singleton Pattern<a hidden class=anchor aria-hidden=true href=#singleton-pattern>#</a></h2><p>Singleton Pattern 은 클래스의 인스턴스를 하나만 만들고 전역에서 접근할 수 있도록 보장하는 디자인 패턴이다. 일반적으로 정적 메서드를 통해 인스턴스를 생성하며, 생성자 접근 제한 (private constructor), 정적 참조 (static instance), 동기화 처리가 핵심이다. 설정 객체, 로깅 시스템, 캐시, 데이터베이스 커넥션 풀 등 리소스를 공유해야 하는 경우에 자주 사용된다. 다만, 잘못된 사용은 테스트 어려움과 결합도 증가를 초래할 수 있다.</p><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><p>싱글톤 패턴 (Singleton Pattern) 은 클래스의 인스턴스를 단 하나만 생성하고, 전역적으로 접근할 수 있도록 보장하는 생성 패턴이다.</p><p><strong>싱글톤 패턴의 핵심 개념들:</strong></p><ol><li><strong>단일 인스턴스 보장 (Unique Instance Guarantee)</strong>: 클래스의 인스턴스가 애플리케이션 전체에서 오직 하나만 생성되도록 보장</li><li><strong>전역 접근점 (Global Access Point)</strong>: 어디서든 해당 인스턴스에 접근할 수 있는 정적 메서드 제공</li><li><strong>지연 초기화 (Lazy Initialization)</strong>: 필요한 시점에만 인스턴스를 생성하는 방식</li><li><strong>즉시 초기화 (Eager Initialization)</strong>: 클래스 로딩 시점에 미리 인스턴스를 생성하는 방식</li><li><strong>스레드 안전성 (Thread Safety)</strong>: 멀티스레드 환경에서 단일 인스턴스 보장을 위한 동기화 메커니즘</li><li><strong>캡슐화된 생성자 (Private Constructor)</strong>: 외부에서 임의로 인스턴스를 생성하지 못하도록 하는 제어 메커니즘</li></ol><h3 id=실무-구현-연관성>실무 구현 연관성<a hidden class=anchor aria-hidden=true href=#실무-구현-연관성>#</a></h3><ul><li><strong>메모리 관리</strong>: 힙 메모리에서 단일 객체만 유지하여 메모리 사용량 최적화</li><li><strong>스레드 동기화</strong>: synchronized, volatile, double-checked locking 기법 활용</li><li><strong>클래스 로딩</strong>: JVM 클래스 로더 메커니즘을 활용한 안전한 초기화</li><li><strong>가비지 컬렉션</strong>: 싱글톤 인스턴스의 생명주기 관리</li></ul><h4 id=의도-intent>의도 (Intent)<a hidden class=anchor aria-hidden=true href=#의도-intent>#</a></h4><p>클래스 인스턴스를 오직 하나만 생성하고, 어디서든 동일한 인스턴스에 접근할 수 있도록 한다.</p><h4 id=다른-이름-also-known-as>다른 이름 (Also Known As)<a hidden class=anchor aria-hidden=true href=#다른-이름-also-known-as>#</a></h4><ul><li>유일 객체 패턴 (Unique Instance Pattern)</li><li>전역 인스턴스 패턴 (Global Instance Pattern)</li></ul><h4 id=동기-motivation--forces>동기 (Motivation / Forces)<a hidden class=anchor aria-hidden=true href=#동기-motivation--forces>#</a></h4><ul><li>시스템에서 정확히 하나의 인스턴스만 필요한 클래스들이 존재</li><li>전역 변수보다 더 나은 해결책 필요</li><li>인스턴스에 대한 제어된 접근 필요</li><li>네임스페이스를 좁히지 않으면서 전역 접근점 제공</li></ul><h4 id=적용-가능성-applicability>적용 가능성 (Applicability)<a hidden class=anchor aria-hidden=true href=#적용-가능성-applicability>#</a></h4><ul><li>시스템 전역에서 동일한 객체를 공유해야 할 때</li><li>리소스가 한정되어 있고, 중복 생성 시 문제가 발생하는 경우 (DB, 캐시, 설정, 이벤트 버스 등)</li><li>상태 일관성과 자원 관리가 중요한 경우</li></ul><h3 id=배경-및-필요성>배경 및 필요성<a hidden class=anchor aria-hidden=true href=#배경-및-필요성>#</a></h3><p><strong>배경</strong>:</p><ul><li>1995 년 GoF 의 &ldquo;Design Patterns: Elements of Reusable Object-Oriented Software&rdquo; 에서 공식적으로 정의</li><li>전역 변수의 문제점을 해결하면서도 전역 접근성을 제공하기 위해 고안</li><li>객체지향 프로그래밍에서 자원 관리와 상태 공유의 필요성에서 출발</li></ul><p><strong>목적 및 필요성</strong>:</p><ol><li><strong>자원 관리</strong>: 데이터베이스 연결 풀, 파일 시스템, 하드웨어 장치 등 제한된 자원의 효율적 관리</li><li><strong>메모리 효율성</strong>: 동일한 기능을 수행하는 여러 인스턴스 생성으로 인한 메모리 낭비 방지</li><li><strong>일관성 보장</strong>: 전역 상태나 설정 정보의 일관성 유지</li><li><strong>중앙 집중식 제어</strong>: 로깅, 캐싱, 스레드 풀 등의 중앙 집중식 관리</li></ol><h3 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><p><strong>주요 기능</strong>:</p><ul><li>인스턴스 생성 제어 및 관리</li><li>전역 접근점 제공 (getInstance() 메서드)</li><li>인스턴스 생명주기 관리</li><li>상태 정보 중앙 집중 관리</li></ul><p><strong>역할</strong>:</p><ul><li><strong>Creator (생성자)</strong>: 유일한 인스턴스 생성 및 관리</li><li><strong>Access Point (접근점)</strong>: 전역에서 인스턴스에 접근할 수 있는 인터페이스 제공</li><li><strong>State Manager (상태 관리자)</strong>: 공유 상태 정보의 중앙 집중 관리</li></ul><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><ul><li>클래스는 자신의 유일한 인스턴스를 직접 관리한다.</li><li>전역적인 접근점을 제공한다.</li><li>인스턴스의 생성을 지연시킬 수 있다 (lazy initialization).</li><li>생성자가 private 이나 protected 로 선언되어 외부에서 직접 인스턴스를 생성할 수 없다.</li></ul><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><ul><li><strong>생성자 은닉:</strong><br>외부에서 생성자를 호출할 수 없도록 합니다.</li><li><strong>정적 접근:</strong><br>인스턴스에 접근할 수 있는 정적 메서드 (또는 속성) 를 제공합니다.</li></ul><h4 id=관련-패턴-related-patterns>관련 패턴 (Related Patterns)<a hidden class=anchor aria-hidden=true href=#관련-패턴-related-patterns>#</a></h4><p><strong>함께 사용되는 패턴들</strong>:</p><ul><li><strong>Abstract Factory</strong>: 팩토리 자체를 싱글톤으로 구현</li><li><strong>Builder</strong>: 빌더를 싱글톤으로 구현하여 객체 생성 과정 관리</li><li><strong>Prototype</strong>: 프로토타입 레지스트리를 싱글톤으로 관리</li></ul><p><strong>대체 가능한 패턴들</strong>:</p><ul><li><strong>Monostate</strong>: 싱글톤과 유사한 효과를 가지지만 여러 인스턴스 허용</li><li><strong>Dependency Injection</strong>: IoC 컨테이너가 싱글톤 생명주기 관리</li><li><strong>Service Locator</strong>: 서비스 인스턴스들의 중앙 집중 관리</li></ul><h3 id=주요-원리-작동-방식>주요 원리 작동 방식<a hidden class=anchor aria-hidden=true href=#주요-원리-작동-방식>#</a></h3><pre class=mermaid>sequenceDiagram
    participant Client1
    participant Client2
    participant Singleton
    
    Client1-&gt;&gt;Singleton: getInstance()
    Note over Singleton: 인스턴스가 없으면 생성
    Singleton--&gt;&gt;Client1: instance 반환
    
    Client2-&gt;&gt;Singleton: getInstance()
    Note over Singleton: 기존 인스턴스 반환
    Singleton--&gt;&gt;Client2: 동일한 instance 반환
    
    Note over Client1,Client2: 두 클라이언트가 같은 인스턴스 사용
</pre><ol><li>Singleton 클래스의 생성자는 private 으로 외부에서 인스턴스 생성 불가</li><li>static 변수로 유일 인스턴스 (instance) 보관</li><li>getInstance() 메서드로 최초 1 회만 인스턴스 생성, 이후 동일 인스턴스 반환</li><li>멀티스레드 환경에서는 동기화 필요</li></ol><h4 id=문제를-해결하기-위한-설계-구조와-관계>문제를 해결하기 위한 설계 구조와 관계<a hidden class=anchor aria-hidden=true href=#문제를-해결하기-위한-설계-구조와-관계>#</a></h4><ul><li><strong>생성자를 외부에서 접근할 수 없게 하고, 인스턴스 생성 및 접근을 위한 정적 메서드 (또는 속성) 를 제공</strong></li><li><strong>클라이언트는 인스턴스에 접근할 때 항상 동일한 인스턴스를 받음</strong></li></ul><h4 id=패턴-적용의-결과와-트레이드오프>패턴 적용의 결과와 트레이드오프<a hidden class=anchor aria-hidden=true href=#패턴-적용의-결과와-트레이드오프>#</a></h4><ul><li><strong>결과:</strong><br>인스턴스가 하나만 존재하도록 보장되어, 리소스 절약, 상태 일관성 유지 등이 가능</li><li><strong>트레이드오프:</strong><br>테스트 어려움, 확장성 제한, 다중 스레드 환경에서의 동기화 필요</li></ul><h4 id=패턴에-참여하는-클래스와-객체들>패턴에 참여하는 클래스와 객체들<a hidden class=anchor aria-hidden=true href=#패턴에-참여하는-클래스와-객체들>#</a></h4><ul><li><strong>Singleton 클래스:</strong><br>인스턴스를 저장하는 정적 속성과 인스턴스에 접근하는 정적 메서드를 제공</li><li><strong>Client:</strong><br>인스턴스에 접근하여 사용</li></ul><h3 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h3><pre class=mermaid>classDiagram
    class Singleton {
        - instance: Singleton
        + getInstance(): Singleton
        - Singleton()
    }
    class Holder {
        + INSTANCE: Singleton
    }
    Singleton *-- Holder : &#34;lazy init&#34;
    Client --&gt; Singleton : uses getInstance()
</pre><h4 id=구성요소>구성요소<a hidden class=anchor aria-hidden=true href=#구성요소>#</a></h4><table><thead><tr><th>구분</th><th>구성 요소</th><th>기능 설명</th><th>역할 및 특징</th></tr></thead><tbody><tr><td>필수</td><td><strong>Singleton Class</strong></td><td>유일한 인스턴스를 생성하고 전역 접근점 제공</td><td>클래스 자체가 인스턴스를 관리하며 외부에서 직접 생성 불가</td></tr><tr><td>필수</td><td><strong>Private Constructor</strong></td><td>외부에서 인스턴스 생성을 차단</td><td>접근 제어자를 <code>private</code> 으로 설정하여 직접 생성 방지</td></tr><tr><td>필수</td><td><strong>Static Instance Variable</strong></td><td>단일 인스턴스를 저장</td><td>클래스 로딩 시 하나의 인스턴스만 유지하며 클래스 수준 (static) 으로 선언</td></tr><tr><td>필수</td><td><strong>getInstance() Method</strong></td><td>전역 접근점 제공 및 필요 시 인스턴스 생성</td><td><code>public static</code> 으로 정의되어 호출 시 싱글톤 반환</td></tr><tr><td>선택</td><td><strong>Synchronization Mechanism</strong></td><td>멀티스레드 환경에서의 인스턴스 생성 경쟁 방지</td><td><code>synchronized</code>, <code>volatile</code>, <code>Lock</code> 등을 활용한 동기화 처리</td></tr><tr><td>선택</td><td><strong>Lazy Holder</strong></td><td>지연 초기화 + 스레드 안전성 확보</td><td>내부 정적 클래스를 활용하여 클래스 로딩 시점까지 인스턴스 생성을 지연 (Bill Pugh 방식)</td></tr></tbody></table><h4 id=참여자들-간의-상호작용-방식>참여자들 간의 상호작용 방식<a hidden class=anchor aria-hidden=true href=#참여자들-간의-상호작용-방식>#</a></h4><ul><li><strong>Client 가 Singleton 클래스의 정적 메서드를 통해 인스턴스에 접근</strong></li><li><strong>Singleton 클래스가 인스턴스를 생성하거나 기존 인스턴스를 반환</strong></li></ul><h3 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h3><table><thead><tr><th><strong>구현 방식</strong></th><th><strong>초기화 시점</strong></th><th><strong>스레드 안전성</strong></th><th><strong>장점</strong></th><th><strong>단점</strong></th><th><strong>대표 사용 사례</strong></th></tr></thead><tbody><tr><td><strong>Eager Initialization</strong></td><td>클래스 로딩 시</td><td>✅ 기본 보장</td><td>구현 간단, 예측 가능, NPE 방지</td><td>사용하지 않아도 인스턴스 생성 → 메모리 낭비 가능</td><td>설정 관리자, 정적 로그 기록기</td></tr><tr><td><strong>Static Block Initialization</strong></td><td>클래스 로딩 시</td><td>✅ 기본 보장</td><td>예외 처리 가능 (<code>try-catch</code>)</td><td>Eager 방식과 동일한 단점</td><td>초기화 시 예외 발생 가능성이 있는 경우</td></tr><tr><td><strong>Lazy Initialization</strong></td><td>최초 호출 시</td><td>❌ 보장 안 됨</td><td>메모리 효율, 사용 시점까지 초기화 지연</td><td>멀티스레드 환경에서 race condition 발생 가능</td><td>리소스 비싼 객체, 지연 로딩 캐시 등</td></tr><tr><td><strong>Synchronized Method</strong></td><td>최초 호출 시</td><td>✅ 보장됨 (전체 동기화)</td><td>간단한 thread-safe 구현</td><td>성능 저하 (매 호출마다 동기화)</td><td>소규모 프로젝트에서 간단히 동기화 필요할 때</td></tr><tr><td><strong>Double-Checked Locking</strong></td><td>최초 호출 시</td><td>✅ 보장됨 (성능 최적)</td><td>성능 최적화 + thread-safe</td><td><code>volatile</code> 누락 시 오류 발생 가능</td><td>웹 서버의 사용자 세션, DB 커넥션 풀</td></tr><tr><td><strong>Bill Pugh (Lazy Holder)</strong></td><td>최초 호출 시</td><td>✅ 보장됨 (JVM 이용)</td><td>동기화 불필요, thread-safe, 성능 우수</td><td>JVM 클래스 로딩 메커니즘 의존 (Java 특화)</td><td>ApplicationContext, ConfigManager 등</td></tr><tr><td><strong>Enum Singleton</strong> (Java)</td><td>클래스 로딩 시</td><td>✅ 보장됨 (강력함)</td><td>직렬화/리플렉션 안전, thread-safe, 구현 간결</td><td>상속 불가, Java 에서만 가능</td><td>전역 설정 객체, 전역 로깅 인스턴스 등</td></tr></tbody></table><h4 id=고전적인-singleton-클래스-변수-기반>고전적인 Singleton (클래스 변수 기반)<a hidden class=anchor aria-hidden=true href=#고전적인-singleton-클래스-변수-기반>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>ClassicSingleton</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>_instance</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용</span>
</span></span><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=n>ClassicSingleton</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>b</span> <span class=o>=</span> <span class=n>ClassicSingleton</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>assert</span> <span class=n>a</span> <span class=ow>is</span> <span class=n>b</span>  <span class=c1># True</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=스레드-안전-singleton-lock-적용>스레드 안전 Singleton (Lock 적용)<a hidden class=anchor aria-hidden=true href=#스레드-안전-singleton-lock-적용>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ThreadSafeSingleton</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>_instance</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=n>_lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>with</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=메타클래스를-이용한-singleton>메타클래스를 이용한 Singleton<a hidden class=anchor aria-hidden=true href=#메타클래스를-이용한-singleton>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span><span class=lnt id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>SingletonMeta</span><span class=p>(</span><span class=nb>type</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>_instances</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__call__</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>cls</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>cls</span><span class=o>.</span><span class=n>_instances</span><span class=p>[</span><span class=bp>cls</span><span class=p>]</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__call__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instances</span><span class=p>[</span><span class=bp>cls</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MetaSingleton</span><span class=p>(</span><span class=n>metaclass</span><span class=o>=</span><span class=n>SingletonMeta</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용</span>
</span></span><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=n>MetaSingleton</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>b</span> <span class=o>=</span> <span class=n>MetaSingleton</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>assert</span> <span class=n>a</span> <span class=ow>is</span> <span class=n>b</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=데코레이터-기반-singleton>데코레이터 기반 Singleton<a hidden class=anchor aria-hidden=true href=#데코레이터-기반-singleton>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span><span class=lnt id=hl-5-18><a class=lnlinks href=#hl-5-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>singleton</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>instances</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_instance</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>cls</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>instances</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>instances</span><span class=p>[</span><span class=bp>cls</span><span class=p>]</span> <span class=o>=</span> <span class=bp>cls</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>instances</span><span class=p>[</span><span class=bp>cls</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>get_instance</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@singleton</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>DecoratedSingleton</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용</span>
</span></span><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=n>DecoratedSingleton</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>b</span> <span class=o>=</span> <span class=n>DecoratedSingleton</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>assert</span> <span class=n>a</span> <span class=ow>is</span> <span class=n>b</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=모듈-기반-singleton-파이썬-특화-방식>모듈 기반 Singleton (파이썬 특화 방식)<a hidden class=anchor aria-hidden=true href=#모듈-기반-singleton-파이썬-특화-방식>#</a></h4><blockquote><p>Python 은 <strong>모듈이 기본적으로 Singleton</strong>이므로, 상태를 모듈 스코프에 유지하는 방식도 널리 사용됩니다.</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2>2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3>3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4>4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># config.py</span>
</span></span><span class=line><span class=cl><span class=n>db_config</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;host&#34;</span><span class=p>:</span> <span class=s2>&#34;localhost&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;port&#34;</span><span class=p>:</span> <span class=mi>5432</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2>2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3>3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4>4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5>5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6>6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># main.py</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>config</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>config</span><span class=o>.</span><span class=n>db_config</span><span class=p>[</span><span class=s2>&#34;host&#34;</span><span class=p>])</span>  <span class=c1># &#34;localhost&#34;</span>
</span></span><span class=line><span class=cl><span class=n>config</span><span class=o>.</span><span class=n>db_config</span><span class=p>[</span><span class=s2>&#34;host&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&#34;127.0.0.1&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 이후 어디서든 동일한 config.db_config 상태 유지됨</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th><th><strong>기여 메커니즘</strong></th></tr></thead><tbody><tr><td><strong>1. 인스턴스 제어</strong></td><td>유일 인스턴스 보장</td><td>애플리케이션 내 단 하나의 인스턴스만 존재함으로써 불필요한 객체 생성을 방지</td><td>private 생성자 + 정적 접근 메서드 (<code>getInstance()</code>)</td></tr><tr><td></td><td>생성 제어</td><td>객체의 생성 시점과 방식을 직접 제어 가능</td><td>Lazy Initialization, Eager Initialization 등 전략 선택</td></tr><tr><td><strong>2. 메모리 효율성</strong></td><td>메모리 사용 최적화</td><td>중복 객체 생성을 방지하여 힙 메모리 사용량 최소화</td><td>인스턴스 제어를 통한 불필요 생성 방지</td></tr><tr><td></td><td>리소스 공유</td><td>DB 커넥션, 파일 핸들, 로그 등 무거운 리소스를 중앙에서 관리 가능</td><td>Singleton 내부에 공유 리소스 보관</td></tr><tr><td><strong>3. 접근성</strong></td><td>전역 접근성</td><td>시스템 어디에서든 동일한 인스턴스에 접근 가능</td><td>정적 메서드를 통한 글로벌 액세스</td></tr><tr><td></td><td>자원 집중화</td><td>여러 컴포넌트가 동일 리소스를 사용할 수 있도록 통합</td><td>로깅, 설정, 캐시 등의 공통 기능 Singleton 화</td></tr><tr><td><strong>4. 상태 일관성</strong></td><td>상태 공유 및 일관성 유지</td><td>단일 인스턴스를 통해 전역 상태를 관리함으로써 데이터 일관성 및 무결성 유지 가능</td><td>상태 저장 구조가 한곳에 집중됨</td></tr><tr><td><strong>5. 설계 간결성</strong></td><td>구현 단순화</td><td>복잡한 인스턴스 관리 없이 간단한 방식으로 접근 구조 구성 가능</td><td>클래스 내부에서 인스턴스를 생성하고 자체적으로 관리</td></tr></tbody></table><ul><li><strong>Singleton 의 최대 강점</strong>은 &ldquo;<strong>인스턴스를 하나만 유지하며 자원 공유와 상태 일관성을 보장</strong>&rdquo; 하는 구조</li><li>시스템 전체에서 반복적으로 참조되는 <strong>공통 리소스</strong>(예: 설정, 로그, 커넥션 풀 등) 에 특히 적합</li><li>단, 설계 상 이점을 활용하려면 <strong>전역 상태 관리와 테스트성 저하</strong> 등의 단점을 함께 고려한 구조 설계가 필요</li></ul><h3 id=단점과-문제점-그리고-해결방안>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안>#</a></h3><table><thead><tr><th><strong>구분</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th><th><strong>영향</strong></th><th><strong>해결 방안 / 기법</strong></th></tr></thead><tbody><tr><td><strong>1. 테스트성 문제</strong></td><td>전역 상태로 인한 테스트 어려움</td><td>싱글톤 인스턴스가 전역 상태를 공유하여 테스트 간 간섭 발생</td><td>테스트 격리 어려움, 상태 오염</td><td>DI(의존성 주입), reset 메서드 제공, 테스트 전용 팩토리 또는 mock 객체 사용</td></tr><tr><td></td><td>강한 결합도</td><td>싱글톤 객체와 클라이언트 간 강한 의존성으로 구조 유연성 저하</td><td>유지보수 어려움, 테스트 어려움</td><td>인터페이스 기반 설계, Provider 패턴, DI 컨테이너 활용</td></tr><tr><td><strong>2. 확장성 문제</strong></td><td>상속 및 다형성의 제한</td><td>Singleton 은 일반적으로 final/static 사용으로 상속 및 확장 어려움</td><td>재사용성 낮음, SOLID 위반</td><td>추상 팩토리 패턴, 전략 패턴과 조합하여 유연성 확보</td></tr><tr><td></td><td>다중 인스턴스 전환 불가</td><td>다수 인스턴스가 필요한 구조로 확장 어려움</td><td>설계 변경 시 유연성 부족</td><td>Multiton 패턴 적용 또는 DI 기반 유연한 인스턴스 관리 구조로 전환</td></tr><tr><td><strong>3. 동시성 문제</strong></td><td>멀티스레드 환경에서의 경쟁 상태</td><td>동기화 처리 없이 다중 스레드가 동시에 인스턴스 생성 → 중복 발생 가능</td><td>인스턴스 중복 생성, 예측 불가능한 동작</td><td>Double-Checked Locking, volatile, Holder Idiom, enum Singleton 사용</td></tr><tr><td></td><td>동기화 오버헤드</td><td>모든 접근에 synchronized 적용 시 성능 저하</td><td>처리 지연, 병목 발생</td><td>최소한의 동기화 범위 사용, 읽기 전용 영역 분리</td></tr><tr><td></td><td>초기화 순서 문제</td><td>Singleton 간 순환 참조 또는 잘못된 초기화 순서</td><td>NullPointerException, 데드락</td><td>의존성 순서 명시, 지연 초기화 (Lazy), 의존성 그래프 분석</td></tr><tr><td><strong>4. 메모리 문제</strong></td><td>메모리 누수</td><td>인스턴스가 애플리케이션 종료까지 유지되어 GC 대상이 아님</td><td>메모리 낭비, 시스템 리소스 과다 사용</td><td>불필요 데이터 제거, WeakReference 사용, <code>shutdown()</code> 또는 cleanup 메서드 구현</td></tr><tr><td><strong>5. 구조적 문제</strong></td><td>전역 상태 남용</td><td>Singleton 이 상태를 가지면 전역 공유로 인한 사이드 이펙트 발생</td><td>상태 불일치, 디버깅 난이도 상승</td><td>상태 최소화 또는 immutable 객체 구성, 가능하면 Stateless 구조 유지</td></tr><tr><td></td><td>순환 의존성</td><td>Singleton 간 상호 의존 관계 형성 시 순환 참조 위험</td><td>데드락, 초기화 실패</td><td>초기화 순서 제어, 설계 시 명확한 의존성 분리, 팩토리 또는 Lazy 초기화 적용</td></tr><tr><td><strong>6. 플랫폼 제약</strong></td><td>클래스 로더 문제</td><td>서로 다른 클래스 로더에서 Singleton 클래스 로딩 시 여러 인스턴스 생성 가능</td><td>인스턴스 중복, 설정 충돌</td><td>클래스 로더 전략 고려, 프레임워크 기반 싱글톤 관리 (ex. Spring Bean Scope) 사용</td></tr><tr><td></td><td>클라우드/컨테이너 환경 한계</td><td>Auto-scaling, Pod 재시작 등으로 싱글톤 상태 유지 어려움</td><td>상태 손실, 기능 비정상 동작</td><td>상태 외부화 (DB, Redis), 분산 캐시 또는 분산 락 기반 구조 채택</td></tr></tbody></table><ul><li><strong>테스트와 유지보수</strong> 측면에서 가장 큰 약점은 <strong>전역 상태 공유</strong>와 <strong>강한 결합</strong> → 반드시 <strong>인터페이스 기반 DI</strong> 구조로 대체 권장</li><li><strong>동시성 문제</strong>는 성능을 고려한 <strong>최소 동기화 전략</strong>과 <code>Holder</code>, <code>DCL</code> 로 충분히 해결 가능</li><li><strong>확장성 부족</strong>은 <strong>팩토리 패턴</strong>, <strong>Multiton</strong>, <strong>전략 패턴</strong> 등과 조합하여 보완</li><li><strong>클라우드·분산 환경</strong>에서는 상태 외부화와 <strong>Stateless Singleton 구조 설계</strong>가 핵심</li></ul><h3 id=도전-과제>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>도전 과제</strong></th><th><strong>설명</strong></th><th><strong>해결 방안</strong></th><th></th></tr></thead><tbody><tr><td><strong>1. 동시성 문제</strong></td><td>멀티스레드 안전성 부족</td><td>여러 스레드가 동시에 <code>getInstance()</code> 를 호출할 경우 인스턴스가 중복 생성될 수 있음</td><td><code>synchronized</code>, <code>volatile</code>, <strong>Double-Checked Locking</strong>, <strong>Lazy Holder</strong> 패턴 사용</td><td></td></tr><tr><td></td><td>락 경합 / 동기화 오버헤드</td><td>과도한 락으로 인해 성능 저하 가능</td><td>최소한의 동기화 범위 적용, 읽기 전용 영역은 동기화 제거</td><td></td></tr><tr><td></td><td>초기화 실패 처리</td><td>복잡한 초기화 중 예외 발생 시 불안정한 상태로 진입 가능</td><td>예외 처리 추가, 객체 초기화 후 상태 플래그 설정 (<code>isInitialized</code>) 등</td><td></td></tr><tr><td><strong>2. 테스트 문제</strong></td><td>테스트 격리 어려움</td><td>전역 Singleton 인스턴스로 인해 테스트 간 상태 간섭 발생</td><td><strong>Dependency Injection</strong>, 인터페이스 추출, <code>reset()</code> 메서드 제공</td><td></td></tr><tr><td></td><td>Mock 객체로 대체 불가</td><td>직접 접근 방식으로 인해 Stub/Spy 등 테스트 유연성 부족</td><td>DI 기반 구조로 변경하거나 Singleton 래핑 인터페이스 도입</td><td></td></tr><tr><td><strong>3. 보안/우회</strong></td><td>리플렉션 공격</td><td>Java 리플렉션 API 로 private 생성자 호출 가능</td><td>생성자 내부에서 인스턴스 존재 여부 검사, <strong>Enum Singleton</strong> 방식 사용</td><td></td></tr><tr><td></td><td>직렬화/역직렬화 우회</td><td><code>Serializable</code> 구현 시 역직렬화로 새로운 인스턴스 생성 가능</td><td><code>readResolve()</code> 메서드 정의 또는 Enum 기반 구현 적용</td><td></td></tr><tr><td><strong>4. 구조적 제약</strong></td><td>결합도 증가</td><td>Singleton 에 직접 접근하는 코드 확산 → 결합도 상승, 리팩토링 어려움</td><td>인터페이스 추상화, <strong>Service Locator</strong>, <strong>Provider Pattern</strong> 도입</td><td></td></tr><tr><td></td><td>확장성 부족</td><td>상속 어려움, 팩토리 적용 어려움 등 구조적 제한 존재</td><td>Singleton 을 <strong>팩토리 패턴</strong> 또는 DI 기반 구조로 대체 가능하도록 설계</td><td></td></tr><tr><td></td><td>전역 상태 남용</td><td>내부 mutable 상태 공유로 Side-effect 및 디버깅 어려움 발생</td><td>불변 객체 구성, 상태 최소화, 외부 상태 위임</td><td></td></tr><tr><td><strong>5. 환경 의존성</strong></td><td>클래스 로더 간 충돌</td><td>서로 다른 클래스 로더에서 로딩 시 인스턴스가 중복 생성될 수 있음</td><td>클래스 로더 전략 고려한 설계, 컨테이너 관리 Bean 사용 (ex. Spring)</td><td></td></tr><tr><td></td><td>마이크로서비스 간 전역 공유 불가</td><td>서비스 경계를 넘는 상태 공유는 마이크로서비스 아키텍처 위반</td><td>서비스별 로컬 Singleton 사용 + **분산 캐시 (ex. Redis)**로 상태 공유</td><td></td></tr><tr><td></td><td>컨테이너/클라우드 환경에서 상태 보존 어려움</td><td>컨테이너 재시작, Auto Scaling 등으로 상태 일관성 유지가 어려움</td><td>상태는 외부 저장소 (DB, Redis) 에 위임하고, Singleton 은 stateless 하게 구성</td><td></td></tr><tr><td></td><td>오토스케일링 환경의 확장 제약</td><td>싱글 인스턴스가 여러 서버에 분산되면 일관된 상태 보장 어려움</td><td><strong>분산 락</strong>, <strong>클러스터 공유 캐시</strong>, <strong>메시지 브로커 기반 이벤트 동기화 구조</strong> 활용</td><td></td></tr><tr><td><strong>6. 메모리 관리</strong></td><td>인스턴스 수명 관리 어려움</td><td>GC 가 해제하지 않아 메모리 누수 위험 존재</td><td>필요한 경우 <strong>WeakReference</strong> 활용, 불필요 데이터 제거, <code>shutdown()</code> 메서드 구현</td><td></td></tr></tbody></table><ul><li><strong>동시성 문제</strong>는 <code>Lazy Holder</code> 또는 <code>DCL</code> 로 해결 가능하지만 초기화 실패나 예외 케이스도 반드시 고려해야 함</li><li><strong>테스트성 확보</strong>는 DI 전환과 인터페이스 추상화를 통해 해결되며, 상태 공유를 지양해야 테스트 간 격리가 쉬움</li><li><strong>보안 우회 문제</strong>는 enum 패턴이 가장 안정적인 해결책</li><li><strong>마이크로서비스, 컨테이너, 클라우드 환경</strong>에서는 전통적인 Singleton 은 <strong>&ldquo;Local Singleton + 외부 저장소 &ldquo;</strong> 전략으로 전환 필요</li><li><strong>전역 상태의 부작용</strong>은 불변 객체 설계와 상태 분리로 제어 가능</li></ul><h3 id=분류에-따른-종류-및-유형>분류에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류에-따른-종류-및-유형>#</a></h3><table><thead><tr><th>분류 기준</th><th>유형</th><th>특징</th><th>사용 시기</th></tr></thead><tbody><tr><td>초기화 시점</td><td>Eager Initialization</td><td>클래스 로딩 시 즉시 생성</td><td>항상 사용되는 경우</td></tr><tr><td></td><td>Lazy Initialization</td><td>필요 시점에 생성</td><td>선택적으로 사용되는 경우</td></tr><tr><td>스레드 안전성</td><td>Thread-Safe</td><td>멀티스레드 환경에서 안전</td><td>멀티스레드 애플리케이션</td></tr><tr><td></td><td>Non Thread-Safe</td><td>단일 스레드에서만 안전</td><td>단일 스레드 애플리케이션</td></tr><tr><td>구현 방식</td><td>Classic Singleton</td><td>전통적인 방식의 구현</td><td>간단한 요구사항</td></tr><tr><td></td><td>Double-Checked Locking</td><td>성능 최적화된 구현</td><td>성능이 중요한 경우</td></tr><tr><td></td><td>Bill Pugh Solution</td><td>JVM 클래스 로딩 활용</td><td>최적의 성능과 안전성 필요</td></tr><tr><td></td><td>Enum Singleton</td><td>열거형 기반 구현</td><td>직렬화와 리플렉션 방어 필요</td></tr><tr><td>상태 관리</td><td>Stateful Singleton</td><td>내부 상태를 가지는 싱글톤</td><td>설정 관리, 캐시 등</td></tr><tr><td></td><td>Stateless Singleton</td><td>상태를 가지지 않는 싱글톤</td><td>유틸리티, 팩토리 등</td></tr></tbody></table><h3 id=실무-적용-예시>실무 적용 예시<a hidden class=anchor aria-hidden=true href=#실무-적용-예시>#</a></h3><table><thead><tr><th><strong>분야</strong></th><th><strong>예시 시스템</strong></th><th><strong>적용 이유 / 목적</strong></th><th><strong>구현 방식 / 고려사항</strong></th></tr></thead><tbody><tr><td><strong>로깅 시스템</strong></td><td><code>Logger</code>, <code>LogManager</code>, <code>SLF4J</code></td><td>전역 로그 관리, 로그 중복 방지, 일관된 포맷 유지</td><td>Thread-safe Singleton, <code>enum</code> 기반 구현 권장</td></tr><tr><td><strong>DB 연결 관리</strong></td><td><code>DBConnectionManager</code>, <code>DataSource</code>, <code>HikariCP</code></td><td>JDBC/ORM 커넥션 풀 공유, 리소스 절약, 커넥션 재사용</td><td>Lazy Initialization, <code>Bill Pugh Solution</code>, thread-safe 보장</td></tr><tr><td><strong>설정 구성 관리</strong></td><td><code>ConfigManager</code>, <code>Properties</code>, <code>YAML Parser</code></td><td>애플리케이션 전역 설정 값 일관성 유지, 초기 로딩 후 재사용</td><td>Eager Initialization 또는 Holder 패턴, 리셋 메서드 필요</td></tr><tr><td><strong>캐시 시스템</strong></td><td><code>CacheManager</code>, <code>RedisClient</code>, <code>Ehcache</code></td><td>전역 캐시 접근, 메모리 효율성, 빠른 데이터 접근</td><td>Double-Checked Locking + 동기화 필요</td></tr><tr><td><strong>이벤트 관리</strong></td><td><code>EventBus</code>, <code>ApplicationEventPublisher</code></td><td>전역 이벤트 관리, 느슨한 결합 구조, 메시지 브로커 대체</td><td>Thread-safe Singleton + Observer 패턴 조합</td></tr><tr><td><strong>상태 관리 (FSM)</strong></td><td><code>FSM 상태 객체</code>, <code>StateManager</code></td><td>상태 객체 재사용, 메모리 절약, 상태 전이 일관성 확보</td><td>상태 객체 불변 (immutable) 설계, Singleton 으로 각 상태 단일화</td></tr><tr><td><strong>하드웨어 제어</strong></td><td><code>PrinterController</code>, <code>GPIOManager</code></td><td>자원 독점 방지, 충돌 방지, 안전한 하드웨어 제어</td><td>Synchronized 방식 또는 thread-safe Singleton</td></tr><tr><td><strong>스레드 자원 관리</strong></td><td><code>ThreadPoolManager</code>, <code>ExecutorService</code></td><td>스레드 풀 재사용, 동시성 제어, 작업 스케줄링 최적화</td><td>Singleton + 내부 큐 구조, shutdown 등 수명 관리 로직 필요</td></tr><tr><td><strong>메시지 큐/브로커</strong></td><td><code>KafkaProducer</code>, <code>RabbitMQPublisher</code></td><td>전역 Producer 재사용, 연결 수 제한, 메시지 일관성 유지</td><td>Thread-safe Singleton, connection 재사용 + buffer 전략</td></tr><tr><td><strong>시스템 환경 관리</strong></td><td><code>EnvironmentManager</code>, <code>RuntimeConfig</code></td><td>런타임 중 변경 가능한 시스템 환경 변수 관리</td><td>싱글톤 + 설정 변경 감지 로직 포함 (Observer 또는 Polling 패턴)</td></tr></tbody></table><ul><li><strong>공통 목적</strong>: 전역에서 하나의 인스턴스를 공유함으로써 <strong>자원 절약</strong>, <strong>상태 일관성 유지</strong>, <strong>접근 통제</strong> 실현</li><li><strong>주요 구현 전략</strong>: 대부분 <strong>Thread-safe Singleton</strong>이 필수이며, 상황에 따라 <strong>Lazy</strong>, <strong>Eager</strong>, <strong>Holder Idiom</strong>, <strong>Enum</strong> 등이 적절</li><li><strong>구현 시 고려사항</strong>:<ul><li>상태가 mutable 한 경우에는 <strong>불변 객체로 전환</strong>하거나, <strong>테스트를 위한 reset 메서드</strong> 필요</li><li>외부 리소스를 다루는 경우에는 <strong>명시적인 close()/shutdown() 메서드</strong> 제공 권장</li><li>프레임워크 (Spring 등) 사용 시 <strong>DI 기반 Singleton Scope 관리</strong>가 바람직</li></ul></li></ul><h3 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h3><h4 id=사례-1-데이터베이스-연결-관리>사례 1: 데이터베이스 연결 관리<a hidden class=anchor aria-hidden=true href=#사례-1-데이터베이스-연결-관리>#</a></h4><p><strong>시스템 구성:</strong> 애플리케이션에서 데이터베이스 연결을 관리하는 싱글톤 클래스를 사용한다.</p><p><strong>Workflow:</strong></p><ol><li>애플리케이션 시작 시 데이터베이스 연결 인스턴스 생성</li><li>여러 모듈에서 동일한 인스턴스에 접근하여 데이터베이스 작업 수행</li></ol><p><strong>싱글톤 패턴의 역할:</strong></p><ul><li>데이터베이스 연결 인스턴스를 하나만 유지하여, 연결 리소스를 절약하고 상태를 일관되게 관리한다.</li></ul><p><strong>차이점:</strong></p><ul><li>싱글톤 패턴이 없을 경우, 여러 모듈에서 각각 데이터베이스 연결을 생성하여 리소스 낭비와 상태 불일치가 발생할 수 있다.</li></ul><h4 id=사례-2-웹-애플리케이션-설정-관리자>사례 2: 웹 애플리케이션 설정 관리자<a hidden class=anchor aria-hidden=true href=#사례-2-웹-애플리케이션-설정-관리자>#</a></h4><p><strong>시스템 구성</strong>:</p><pre class=mermaid>graph TB
    subgraph &#34;Web Application&#34;
        A[Controller] --&gt; B[ConfigManager Singleton]
        C[Service Layer] --&gt; B
        D[Repository Layer] --&gt; B
        E[Security Filter] --&gt; B
    end
    
    subgraph &#34;External Resources&#34;
        B --&gt; F[Database Config]
        B --&gt; G[Cache Config]
        B --&gt; H[API Config]
        B --&gt; I[Security Config]
    end
</pre><p><strong>Workflow</strong>:</p><pre class=mermaid>sequenceDiagram
    participant App as Application Startup
    participant CM as ConfigManager
    participant DB as Database
    participant Cache as Cache System
    participant Controller as Web Controller
    
    App-&gt;&gt;CM: getInstance()
    CM-&gt;&gt;DB: Load DB configurations
    CM-&gt;&gt;Cache: Initialize cache settings
    Note over CM: 설정 로드 및 초기화 완료
    
    Controller-&gt;&gt;CM: getInstance()
    CM--&gt;&gt;Controller: Return same instance
    Controller-&gt;&gt;CM: getDBConfig()
    CM--&gt;&gt;Controller: Return DB configuration
</pre><p><strong>해당 주제의 역할</strong>:</p><ul><li><strong>중앙 집중식 설정 관리</strong>: 모든 설정 정보를 하나의 인스턴스에서 관리</li><li><strong>런타임 설정 변경</strong>: 애플리케이션 재시작 없이 설정 동적 변경</li><li><strong>일관성 보장</strong>: 전체 애플리케이션에서 동일한 설정 값 사용</li></ul><p><strong>싱글톤 유무에 따른 차이점</strong>:</p><ul><li><strong>싱글톤 적용 시:</strong><ul><li>메모리 사용량: 설정 객체 하나만 유지 (약 1-2MB)</li><li>초기화 시간: 최초 한 번만 설정 로드 (200ms)</li><li>일관성: 모든 컴포넌트가 동일한 설정 참조</li></ul></li><li><strong>싱글톤 미적용 시:</strong><ul><li>메모리 사용량: 컴포넌트별 설정 객체 생성 (10-20MB)</li><li>초기화 시간: 컴포넌트별 설정 로드 (1-2 초)</li><li>일관성: 설정 불일치 가능성 존재</li></ul></li></ul><h4 id=사례-3-kafka-producer-를-싱글톤으로-구성>사례 3: Kafka Producer 를 싱글톤으로 구성<a hidden class=anchor aria-hidden=true href=#사례-3-kafka-producer-를-싱글톤으로-구성>#</a></h4><p><strong>요구사항</strong>:</p><ul><li>KafkaProducer 객체는 생성 비용이 크고 thread-safe</li><li>애플리케이션 전체에서 동일 인스턴스 사용 필요</li></ul><p><strong>시스템 구조</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1>1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2>2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Service A ─┐
</span></span><span class=line><span class=cl>           ├── KafkaProducerSingleton.getInstance() → KafkaProducer
</span></span><span class=line><span class=cl>Service B ─┘
</span></span></code></pre></td></tr></table></div></div><p><strong>역할</strong>:</p><ul><li>Service A/B 에서 동일한 producer 인스턴스를 활용하여 Kafka 로 메시지 전송</li></ul><p><strong>구현 구조 (Java 예시)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>KafkaProducerSingleton</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>KafkaProducer</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>producer</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=nf>KafkaProducerSingleton</span><span class=p>()</span><span class=w> </span><span class=p>{}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>synchronized</span><span class=w> </span><span class=n>KafkaProducer</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=nf>getInstance</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>producer</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Properties</span><span class=w> </span><span class=n>props</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Properties</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>props</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;bootstrap.servers&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;localhost:9092&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// 기타 설정</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>producer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>KafkaProducer</span><span class=o>&lt;&gt;</span><span class=p>(</span><span class=n>props</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>producer</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=사례-4-대규모-웹-애플리케이션의-로깅-시스템-구축>사례 4: 대규모 웹 애플리케이션의 로깅 시스템 구축<a hidden class=anchor aria-hidden=true href=#사례-4-대규모-웹-애플리케이션의-로깅-시스템-구축>#</a></h4><p><strong>시스템 구성</strong>:</p><ul><li><strong>웹 서버</strong>: Tomcat 기반 멀티스레드 환경</li><li><strong>애플리케이션</strong>: Spring Framework 기반</li><li><strong>로깅</strong>: 파일과 데이터베이스 동시 로깅</li></ul><p><strong>Singleton 활용</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1> 1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2> 2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3> 3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4> 4</a>
</span><span class=lnt id=hl-12-5><a class=lnlinks href=#hl-12-5> 5</a>
</span><span class=lnt id=hl-12-6><a class=lnlinks href=#hl-12-6> 6</a>
</span><span class=lnt id=hl-12-7><a class=lnlinks href=#hl-12-7> 7</a>
</span><span class=lnt id=hl-12-8><a class=lnlinks href=#hl-12-8> 8</a>
</span><span class=lnt id=hl-12-9><a class=lnlinks href=#hl-12-9> 9</a>
</span><span class=lnt id=hl-12-10><a class=lnlinks href=#hl-12-10>10</a>
</span><span class=lnt id=hl-12-11><a class=lnlinks href=#hl-12-11>11</a>
</span><span class=lnt id=hl-12-12><a class=lnlinks href=#hl-12-12>12</a>
</span><span class=lnt id=hl-12-13><a class=lnlinks href=#hl-12-13>13</a>
</span><span class=lnt id=hl-12-14><a class=lnlinks href=#hl-12-14>14</a>
</span><span class=lnt id=hl-12-15><a class=lnlinks href=#hl-12-15>15</a>
</span><span class=lnt id=hl-12-16><a class=lnlinks href=#hl-12-16>16</a>
</span><span class=lnt id=hl-12-17><a class=lnlinks href=#hl-12-17>17</a>
</span><span class=lnt id=hl-12-18><a class=lnlinks href=#hl-12-18>18</a>
</span><span class=lnt id=hl-12-19><a class=lnlinks href=#hl-12-19>19</a>
</span><span class=lnt id=hl-12-20><a class=lnlinks href=#hl-12-20>20</a>
</span><span class=lnt id=hl-12-21><a class=lnlinks href=#hl-12-21>21</a>
</span><span class=lnt id=hl-12-22><a class=lnlinks href=#hl-12-22>22</a>
</span><span class=lnt id=hl-12-23><a class=lnlinks href=#hl-12-23>23</a>
</span><span class=lnt id=hl-12-24><a class=lnlinks href=#hl-12-24>24</a>
</span><span class=lnt id=hl-12-25><a class=lnlinks href=#hl-12-25>25</a>
</span><span class=lnt id=hl-12-26><a class=lnlinks href=#hl-12-26>26</a>
</span><span class=lnt id=hl-12-27><a class=lnlinks href=#hl-12-27>27</a>
</span><span class=lnt id=hl-12-28><a class=lnlinks href=#hl-12-28>28</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ApplicationLogger</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>volatile</span><span class=w> </span><span class=n>ApplicationLogger</span><span class=w> </span><span class=n>instance</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>FileWriter</span><span class=w> </span><span class=n>fileWriter</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>DatabaseLogger</span><span class=w> </span><span class=n>dbLogger</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=nf>ApplicationLogger</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>fileWriter</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>FileWriter</span><span class=p>(</span><span class=s>&#34;app.log&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>dbLogger</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>DatabaseLogger</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>ApplicationLogger</span><span class=w> </span><span class=nf>getInstance</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>instance</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kd>synchronized</span><span class=w> </span><span class=p>(</span><span class=n>ApplicationLogger</span><span class=p>.</span><span class=na>class</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>instance</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>instance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ApplicationLogger</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>instance</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>log</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>level</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>message</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>logEntry</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>String</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&#34;[%s] %s: %s&#34;</span><span class=p>,</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>new</span><span class=w> </span><span class=n>Date</span><span class=p>(),</span><span class=w> </span><span class=n>level</span><span class=p>,</span><span class=w> </span><span class=n>message</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>fileWriter</span><span class=p>.</span><span class=na>write</span><span class=p>(</span><span class=n>logEntry</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>dbLogger</span><span class=p>.</span><span class=na>save</span><span class=p>(</span><span class=n>level</span><span class=p>,</span><span class=w> </span><span class=n>message</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>시스템 구성 다이어그램</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1> 1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2> 2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3> 3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4> 4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5> 5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6> 6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7> 7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8> 8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9> 9</a>
</span><span class=lnt id=hl-13-10><a class=lnlinks href=#hl-13-10>10</a>
</span><span class=lnt id=hl-13-11><a class=lnlinks href=#hl-13-11>11</a>
</span><span class=lnt id=hl-13-12><a class=lnlinks href=#hl-13-12>12</a>
</span><span class=lnt id=hl-13-13><a class=lnlinks href=#hl-13-13>13</a>
</span><span class=lnt id=hl-13-14><a class=lnlinks href=#hl-13-14>14</a>
</span><span class=lnt id=hl-13-15><a class=lnlinks href=#hl-13-15>15</a>
</span><span class=lnt id=hl-13-16><a class=lnlinks href=#hl-13-16>16</a>
</span><span class=lnt id=hl-13-17><a class=lnlinks href=#hl-13-17>17</a>
</span><span class=lnt id=hl-13-18><a class=lnlinks href=#hl-13-18>18</a>
</span><span class=lnt id=hl-13-19><a class=lnlinks href=#hl-13-19>19</a>
</span><span class=lnt id=hl-13-20><a class=lnlinks href=#hl-13-20>20</a>
</span><span class=lnt id=hl-13-21><a class=lnlinks href=#hl-13-21>21</a>
</span><span class=lnt id=hl-13-22><a class=lnlinks href=#hl-13-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
</span></span><span class=line><span class=cl>│   Web Layer     │───▶│  Service Layer   │───▶│  Data Layer     │
</span></span><span class=line><span class=cl>│ (Controllers)   │    │ (Business Logic) │    │ (Repositories)  │
</span></span><span class=line><span class=cl>└─────────────────┘    └──────────────────┘    └─────────────────┘
</span></span><span class=line><span class=cl>         │                       │                       │
</span></span><span class=line><span class=cl>         └───────────────────────┼───────────────────────┘
</span></span><span class=line><span class=cl>                                 ▼
</span></span><span class=line><span class=cl>                    ┌─────────────────────────┐
</span></span><span class=line><span class=cl>                    │   ApplicationLogger     │
</span></span><span class=line><span class=cl>                    │    (Singleton)          │
</span></span><span class=line><span class=cl>                    │                         │
</span></span><span class=line><span class=cl>                    │ - fileWriter            │
</span></span><span class=line><span class=cl>                    │ - dbLogger              │
</span></span><span class=line><span class=cl>                    │ + getInstance()         │
</span></span><span class=line><span class=cl>                    │ + log()                 │
</span></span><span class=line><span class=cl>                    └─────────────────────────┘
</span></span><span class=line><span class=cl>                                 │
</span></span><span class=line><span class=cl>                    ┌─────────────┼─────────────┐
</span></span><span class=line><span class=cl>                    ▼             ▼             ▼
</span></span><span class=line><span class=cl>            ┌──────────────┐ ┌──────────┐ ┌──────────────┐
</span></span><span class=line><span class=cl>            │  File System │ │ Database │ │ Console Out  │
</span></span><span class=line><span class=cl>            └──────────────┘ └──────────┘ └──────────────┘
</span></span></code></pre></td></tr></table></div></div><p><strong>활용 사례 Workflow</strong>:</p><ol><li><strong>애플리케이션 시작</strong>: 첫 번째 로그 요청 시 싱글톤 인스턴스 생성</li><li><strong>로깅 요청</strong>: 각 레이어에서 ApplicationLogger.getInstance().log() 호출</li><li><strong>동시 처리</strong>: 멀티스레드 환경에서 동기화된 로깅 처리</li><li><strong>자원 관리</strong>: 파일 핸들과 DB 연결 효율적 관리</li></ol><p><strong>역할</strong>:</p><ul><li><strong>중앙 집중식 로깅</strong>: 모든 컴포넌트가 동일한 로거 인스턴스 사용</li><li><strong>자원 효율성</strong>: 파일 핸들과 DB 연결 재사용</li><li><strong>일관성 보장</strong>: 로그 형식과 레벨의 일관된 관리</li></ul><h3 id=구현-예시>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시>#</a></h3><h4 id=python-thread-safe>Python: Thread-safe<a hidden class=anchor aria-hidden=true href=#python-thread-safe>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1>  1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2>  2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3>  3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4>  4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5>  5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6>  6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7>  7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8>  8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9>  9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10> 10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11> 11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12> 12</a>
</span><span class=lnt id=hl-14-13><a class=lnlinks href=#hl-14-13> 13</a>
</span><span class=lnt id=hl-14-14><a class=lnlinks href=#hl-14-14> 14</a>
</span><span class=lnt id=hl-14-15><a class=lnlinks href=#hl-14-15> 15</a>
</span><span class=lnt id=hl-14-16><a class=lnlinks href=#hl-14-16> 16</a>
</span><span class=lnt id=hl-14-17><a class=lnlinks href=#hl-14-17> 17</a>
</span><span class=lnt id=hl-14-18><a class=lnlinks href=#hl-14-18> 18</a>
</span><span class=lnt id=hl-14-19><a class=lnlinks href=#hl-14-19> 19</a>
</span><span class=lnt id=hl-14-20><a class=lnlinks href=#hl-14-20> 20</a>
</span><span class=lnt id=hl-14-21><a class=lnlinks href=#hl-14-21> 21</a>
</span><span class=lnt id=hl-14-22><a class=lnlinks href=#hl-14-22> 22</a>
</span><span class=lnt id=hl-14-23><a class=lnlinks href=#hl-14-23> 23</a>
</span><span class=lnt id=hl-14-24><a class=lnlinks href=#hl-14-24> 24</a>
</span><span class=lnt id=hl-14-25><a class=lnlinks href=#hl-14-25> 25</a>
</span><span class=lnt id=hl-14-26><a class=lnlinks href=#hl-14-26> 26</a>
</span><span class=lnt id=hl-14-27><a class=lnlinks href=#hl-14-27> 27</a>
</span><span class=lnt id=hl-14-28><a class=lnlinks href=#hl-14-28> 28</a>
</span><span class=lnt id=hl-14-29><a class=lnlinks href=#hl-14-29> 29</a>
</span><span class=lnt id=hl-14-30><a class=lnlinks href=#hl-14-30> 30</a>
</span><span class=lnt id=hl-14-31><a class=lnlinks href=#hl-14-31> 31</a>
</span><span class=lnt id=hl-14-32><a class=lnlinks href=#hl-14-32> 32</a>
</span><span class=lnt id=hl-14-33><a class=lnlinks href=#hl-14-33> 33</a>
</span><span class=lnt id=hl-14-34><a class=lnlinks href=#hl-14-34> 34</a>
</span><span class=lnt id=hl-14-35><a class=lnlinks href=#hl-14-35> 35</a>
</span><span class=lnt id=hl-14-36><a class=lnlinks href=#hl-14-36> 36</a>
</span><span class=lnt id=hl-14-37><a class=lnlinks href=#hl-14-37> 37</a>
</span><span class=lnt id=hl-14-38><a class=lnlinks href=#hl-14-38> 38</a>
</span><span class=lnt id=hl-14-39><a class=lnlinks href=#hl-14-39> 39</a>
</span><span class=lnt id=hl-14-40><a class=lnlinks href=#hl-14-40> 40</a>
</span><span class=lnt id=hl-14-41><a class=lnlinks href=#hl-14-41> 41</a>
</span><span class=lnt id=hl-14-42><a class=lnlinks href=#hl-14-42> 42</a>
</span><span class=lnt id=hl-14-43><a class=lnlinks href=#hl-14-43> 43</a>
</span><span class=lnt id=hl-14-44><a class=lnlinks href=#hl-14-44> 44</a>
</span><span class=lnt id=hl-14-45><a class=lnlinks href=#hl-14-45> 45</a>
</span><span class=lnt id=hl-14-46><a class=lnlinks href=#hl-14-46> 46</a>
</span><span class=lnt id=hl-14-47><a class=lnlinks href=#hl-14-47> 47</a>
</span><span class=lnt id=hl-14-48><a class=lnlinks href=#hl-14-48> 48</a>
</span><span class=lnt id=hl-14-49><a class=lnlinks href=#hl-14-49> 49</a>
</span><span class=lnt id=hl-14-50><a class=lnlinks href=#hl-14-50> 50</a>
</span><span class=lnt id=hl-14-51><a class=lnlinks href=#hl-14-51> 51</a>
</span><span class=lnt id=hl-14-52><a class=lnlinks href=#hl-14-52> 52</a>
</span><span class=lnt id=hl-14-53><a class=lnlinks href=#hl-14-53> 53</a>
</span><span class=lnt id=hl-14-54><a class=lnlinks href=#hl-14-54> 54</a>
</span><span class=lnt id=hl-14-55><a class=lnlinks href=#hl-14-55> 55</a>
</span><span class=lnt id=hl-14-56><a class=lnlinks href=#hl-14-56> 56</a>
</span><span class=lnt id=hl-14-57><a class=lnlinks href=#hl-14-57> 57</a>
</span><span class=lnt id=hl-14-58><a class=lnlinks href=#hl-14-58> 58</a>
</span><span class=lnt id=hl-14-59><a class=lnlinks href=#hl-14-59> 59</a>
</span><span class=lnt id=hl-14-60><a class=lnlinks href=#hl-14-60> 60</a>
</span><span class=lnt id=hl-14-61><a class=lnlinks href=#hl-14-61> 61</a>
</span><span class=lnt id=hl-14-62><a class=lnlinks href=#hl-14-62> 62</a>
</span><span class=lnt id=hl-14-63><a class=lnlinks href=#hl-14-63> 63</a>
</span><span class=lnt id=hl-14-64><a class=lnlinks href=#hl-14-64> 64</a>
</span><span class=lnt id=hl-14-65><a class=lnlinks href=#hl-14-65> 65</a>
</span><span class=lnt id=hl-14-66><a class=lnlinks href=#hl-14-66> 66</a>
</span><span class=lnt id=hl-14-67><a class=lnlinks href=#hl-14-67> 67</a>
</span><span class=lnt id=hl-14-68><a class=lnlinks href=#hl-14-68> 68</a>
</span><span class=lnt id=hl-14-69><a class=lnlinks href=#hl-14-69> 69</a>
</span><span class=lnt id=hl-14-70><a class=lnlinks href=#hl-14-70> 70</a>
</span><span class=lnt id=hl-14-71><a class=lnlinks href=#hl-14-71> 71</a>
</span><span class=lnt id=hl-14-72><a class=lnlinks href=#hl-14-72> 72</a>
</span><span class=lnt id=hl-14-73><a class=lnlinks href=#hl-14-73> 73</a>
</span><span class=lnt id=hl-14-74><a class=lnlinks href=#hl-14-74> 74</a>
</span><span class=lnt id=hl-14-75><a class=lnlinks href=#hl-14-75> 75</a>
</span><span class=lnt id=hl-14-76><a class=lnlinks href=#hl-14-76> 76</a>
</span><span class=lnt id=hl-14-77><a class=lnlinks href=#hl-14-77> 77</a>
</span><span class=lnt id=hl-14-78><a class=lnlinks href=#hl-14-78> 78</a>
</span><span class=lnt id=hl-14-79><a class=lnlinks href=#hl-14-79> 79</a>
</span><span class=lnt id=hl-14-80><a class=lnlinks href=#hl-14-80> 80</a>
</span><span class=lnt id=hl-14-81><a class=lnlinks href=#hl-14-81> 81</a>
</span><span class=lnt id=hl-14-82><a class=lnlinks href=#hl-14-82> 82</a>
</span><span class=lnt id=hl-14-83><a class=lnlinks href=#hl-14-83> 83</a>
</span><span class=lnt id=hl-14-84><a class=lnlinks href=#hl-14-84> 84</a>
</span><span class=lnt id=hl-14-85><a class=lnlinks href=#hl-14-85> 85</a>
</span><span class=lnt id=hl-14-86><a class=lnlinks href=#hl-14-86> 86</a>
</span><span class=lnt id=hl-14-87><a class=lnlinks href=#hl-14-87> 87</a>
</span><span class=lnt id=hl-14-88><a class=lnlinks href=#hl-14-88> 88</a>
</span><span class=lnt id=hl-14-89><a class=lnlinks href=#hl-14-89> 89</a>
</span><span class=lnt id=hl-14-90><a class=lnlinks href=#hl-14-90> 90</a>
</span><span class=lnt id=hl-14-91><a class=lnlinks href=#hl-14-91> 91</a>
</span><span class=lnt id=hl-14-92><a class=lnlinks href=#hl-14-92> 92</a>
</span><span class=lnt id=hl-14-93><a class=lnlinks href=#hl-14-93> 93</a>
</span><span class=lnt id=hl-14-94><a class=lnlinks href=#hl-14-94> 94</a>
</span><span class=lnt id=hl-14-95><a class=lnlinks href=#hl-14-95> 95</a>
</span><span class=lnt id=hl-14-96><a class=lnlinks href=#hl-14-96> 96</a>
</span><span class=lnt id=hl-14-97><a class=lnlinks href=#hl-14-97> 97</a>
</span><span class=lnt id=hl-14-98><a class=lnlinks href=#hl-14-98> 98</a>
</span><span class=lnt id=hl-14-99><a class=lnlinks href=#hl-14-99> 99</a>
</span><span class=lnt id=hl-14-100><a class=lnlinks href=#hl-14-100>100</a>
</span><span class=lnt id=hl-14-101><a class=lnlinks href=#hl-14-101>101</a>
</span><span class=lnt id=hl-14-102><a class=lnlinks href=#hl-14-102>102</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>threading</span> <span class=kn>import</span> <span class=n>Lock</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>logging</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>DatabaseConnection</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    데이터베이스 연결을 관리하는 Singleton 클래스
</span></span></span><span class=line><span class=cl><span class=s2>    Thread-safe하고 지연 초기화를 지원합니다.
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>_instance</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=s1>&#39;DatabaseConnection&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=n>_lock</span><span class=p>:</span> <span class=n>Lock</span> <span class=o>=</span> <span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>_logger</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>logging</span><span class=o>.</span><span class=n>Logger</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s1>&#39;DatabaseConnection&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># Double-checked locking pattern으로 thread safety 보장</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>with</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 초기화가 한 번만 실행되도록 보장</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s1>&#39;_initialized&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s1>&#39;_initialized&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                    <span class=c1># 로깅 설정</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>_setup_logging</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=c1># 데이터베이스 설정</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>_connection</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>_retry_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>_max_retries</span> <span class=o>=</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>_last_connection_time</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=c1># 설정 초기화</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>_config</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;host&#39;</span><span class=p>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;port&#39;</span><span class=p>:</span> <span class=mi>5432</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;database&#39;</span><span class=p>:</span> <span class=s1>&#39;mydb&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;user&#39;</span><span class=p>:</span> <span class=s1>&#39;admin&#39;</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>_initialized</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>_logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;DatabaseConnection 인스턴스가 초기화되었습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_setup_logging</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;로깅 설정을 초기화합니다.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=s1>&#39;DatabaseConnection&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>handler</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>StreamHandler</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>formatter</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>Formatter</span><span class=p>(</span><span class=s1>&#39;</span><span class=si>%(asctime)s</span><span class=s1> - </span><span class=si>%(name)s</span><span class=s1> - </span><span class=si>%(levelname)s</span><span class=s1> - </span><span class=si>%(message)s</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>handler</span><span class=o>.</span><span class=n>setFormatter</span><span class=p>(</span><span class=n>formatter</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>handler</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_logger</span><span class=o>.</span><span class=n>setLevel</span><span class=p>(</span><span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>connect</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        데이터베이스 연결을 수행합니다.
</span></span></span><span class=line><span class=cl><span class=s2>        재시도 메커니즘과 에러 처리가 포함되어 있습니다.
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=c1># 실제 연결 로직은 여기에 구현</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>_logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;데이터베이스에 연결 중…&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>_connection</span> <span class=o>=</span> <span class=s2>&#34;Connected&#34;</span>  <span class=c1># 실제로는 실제 연결 객체가 들어갑니다</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>_last_connection_time</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>_retry_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>_retry_count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>_logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;연결 실패 (시도 </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_retry_count</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_max_retries</span><span class=si>}</span><span class=s2>): </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_retry_count</span> <span class=o>&gt;=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_max_retries</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=s2>&#34;최대 재시도 횟수를 초과했습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>disconnect</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;안전한 연결 종료를 보장합니다.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1># 실제 연결 종료 로직</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>_connection</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>_last_connection_time</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>_logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;데이터베이스 연결이 종료되었습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_connection_status</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;현재 연결 상태 정보를 반환합니다.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;connected&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;last_connection_time&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_last_connection_time</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;retry_count&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_retry_count</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;config&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_config</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>  <span class=c1># 설정 정보의 안전한 복사본 반환</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># 테스트를 위한 리셋 메서드</span>
</span></span><span class=line><span class=cl>    <span class=nd>@classmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_reset</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;테스트 목적으로만 사용되어야 합니다.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span><span class=o>.</span><span class=n>disconnect</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=o>=</span> <span class=kc>None</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=python-bill-pugh-solution--double-checked-locking>Python: Bill Pugh Solution & Double-checked Locking<a hidden class=anchor aria-hidden=true href=#python-bill-pugh-solution--double-checked-locking>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1>  1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2>  2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3>  3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4>  4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5>  5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6>  6</a>
</span><span class=lnt id=hl-15-7><a class=lnlinks href=#hl-15-7>  7</a>
</span><span class=lnt id=hl-15-8><a class=lnlinks href=#hl-15-8>  8</a>
</span><span class=lnt id=hl-15-9><a class=lnlinks href=#hl-15-9>  9</a>
</span><span class=lnt id=hl-15-10><a class=lnlinks href=#hl-15-10> 10</a>
</span><span class=lnt id=hl-15-11><a class=lnlinks href=#hl-15-11> 11</a>
</span><span class=lnt id=hl-15-12><a class=lnlinks href=#hl-15-12> 12</a>
</span><span class=lnt id=hl-15-13><a class=lnlinks href=#hl-15-13> 13</a>
</span><span class=lnt id=hl-15-14><a class=lnlinks href=#hl-15-14> 14</a>
</span><span class=lnt id=hl-15-15><a class=lnlinks href=#hl-15-15> 15</a>
</span><span class=lnt id=hl-15-16><a class=lnlinks href=#hl-15-16> 16</a>
</span><span class=lnt id=hl-15-17><a class=lnlinks href=#hl-15-17> 17</a>
</span><span class=lnt id=hl-15-18><a class=lnlinks href=#hl-15-18> 18</a>
</span><span class=lnt id=hl-15-19><a class=lnlinks href=#hl-15-19> 19</a>
</span><span class=lnt id=hl-15-20><a class=lnlinks href=#hl-15-20> 20</a>
</span><span class=lnt id=hl-15-21><a class=lnlinks href=#hl-15-21> 21</a>
</span><span class=lnt id=hl-15-22><a class=lnlinks href=#hl-15-22> 22</a>
</span><span class=lnt id=hl-15-23><a class=lnlinks href=#hl-15-23> 23</a>
</span><span class=lnt id=hl-15-24><a class=lnlinks href=#hl-15-24> 24</a>
</span><span class=lnt id=hl-15-25><a class=lnlinks href=#hl-15-25> 25</a>
</span><span class=lnt id=hl-15-26><a class=lnlinks href=#hl-15-26> 26</a>
</span><span class=lnt id=hl-15-27><a class=lnlinks href=#hl-15-27> 27</a>
</span><span class=lnt id=hl-15-28><a class=lnlinks href=#hl-15-28> 28</a>
</span><span class=lnt id=hl-15-29><a class=lnlinks href=#hl-15-29> 29</a>
</span><span class=lnt id=hl-15-30><a class=lnlinks href=#hl-15-30> 30</a>
</span><span class=lnt id=hl-15-31><a class=lnlinks href=#hl-15-31> 31</a>
</span><span class=lnt id=hl-15-32><a class=lnlinks href=#hl-15-32> 32</a>
</span><span class=lnt id=hl-15-33><a class=lnlinks href=#hl-15-33> 33</a>
</span><span class=lnt id=hl-15-34><a class=lnlinks href=#hl-15-34> 34</a>
</span><span class=lnt id=hl-15-35><a class=lnlinks href=#hl-15-35> 35</a>
</span><span class=lnt id=hl-15-36><a class=lnlinks href=#hl-15-36> 36</a>
</span><span class=lnt id=hl-15-37><a class=lnlinks href=#hl-15-37> 37</a>
</span><span class=lnt id=hl-15-38><a class=lnlinks href=#hl-15-38> 38</a>
</span><span class=lnt id=hl-15-39><a class=lnlinks href=#hl-15-39> 39</a>
</span><span class=lnt id=hl-15-40><a class=lnlinks href=#hl-15-40> 40</a>
</span><span class=lnt id=hl-15-41><a class=lnlinks href=#hl-15-41> 41</a>
</span><span class=lnt id=hl-15-42><a class=lnlinks href=#hl-15-42> 42</a>
</span><span class=lnt id=hl-15-43><a class=lnlinks href=#hl-15-43> 43</a>
</span><span class=lnt id=hl-15-44><a class=lnlinks href=#hl-15-44> 44</a>
</span><span class=lnt id=hl-15-45><a class=lnlinks href=#hl-15-45> 45</a>
</span><span class=lnt id=hl-15-46><a class=lnlinks href=#hl-15-46> 46</a>
</span><span class=lnt id=hl-15-47><a class=lnlinks href=#hl-15-47> 47</a>
</span><span class=lnt id=hl-15-48><a class=lnlinks href=#hl-15-48> 48</a>
</span><span class=lnt id=hl-15-49><a class=lnlinks href=#hl-15-49> 49</a>
</span><span class=lnt id=hl-15-50><a class=lnlinks href=#hl-15-50> 50</a>
</span><span class=lnt id=hl-15-51><a class=lnlinks href=#hl-15-51> 51</a>
</span><span class=lnt id=hl-15-52><a class=lnlinks href=#hl-15-52> 52</a>
</span><span class=lnt id=hl-15-53><a class=lnlinks href=#hl-15-53> 53</a>
</span><span class=lnt id=hl-15-54><a class=lnlinks href=#hl-15-54> 54</a>
</span><span class=lnt id=hl-15-55><a class=lnlinks href=#hl-15-55> 55</a>
</span><span class=lnt id=hl-15-56><a class=lnlinks href=#hl-15-56> 56</a>
</span><span class=lnt id=hl-15-57><a class=lnlinks href=#hl-15-57> 57</a>
</span><span class=lnt id=hl-15-58><a class=lnlinks href=#hl-15-58> 58</a>
</span><span class=lnt id=hl-15-59><a class=lnlinks href=#hl-15-59> 59</a>
</span><span class=lnt id=hl-15-60><a class=lnlinks href=#hl-15-60> 60</a>
</span><span class=lnt id=hl-15-61><a class=lnlinks href=#hl-15-61> 61</a>
</span><span class=lnt id=hl-15-62><a class=lnlinks href=#hl-15-62> 62</a>
</span><span class=lnt id=hl-15-63><a class=lnlinks href=#hl-15-63> 63</a>
</span><span class=lnt id=hl-15-64><a class=lnlinks href=#hl-15-64> 64</a>
</span><span class=lnt id=hl-15-65><a class=lnlinks href=#hl-15-65> 65</a>
</span><span class=lnt id=hl-15-66><a class=lnlinks href=#hl-15-66> 66</a>
</span><span class=lnt id=hl-15-67><a class=lnlinks href=#hl-15-67> 67</a>
</span><span class=lnt id=hl-15-68><a class=lnlinks href=#hl-15-68> 68</a>
</span><span class=lnt id=hl-15-69><a class=lnlinks href=#hl-15-69> 69</a>
</span><span class=lnt id=hl-15-70><a class=lnlinks href=#hl-15-70> 70</a>
</span><span class=lnt id=hl-15-71><a class=lnlinks href=#hl-15-71> 71</a>
</span><span class=lnt id=hl-15-72><a class=lnlinks href=#hl-15-72> 72</a>
</span><span class=lnt id=hl-15-73><a class=lnlinks href=#hl-15-73> 73</a>
</span><span class=lnt id=hl-15-74><a class=lnlinks href=#hl-15-74> 74</a>
</span><span class=lnt id=hl-15-75><a class=lnlinks href=#hl-15-75> 75</a>
</span><span class=lnt id=hl-15-76><a class=lnlinks href=#hl-15-76> 76</a>
</span><span class=lnt id=hl-15-77><a class=lnlinks href=#hl-15-77> 77</a>
</span><span class=lnt id=hl-15-78><a class=lnlinks href=#hl-15-78> 78</a>
</span><span class=lnt id=hl-15-79><a class=lnlinks href=#hl-15-79> 79</a>
</span><span class=lnt id=hl-15-80><a class=lnlinks href=#hl-15-80> 80</a>
</span><span class=lnt id=hl-15-81><a class=lnlinks href=#hl-15-81> 81</a>
</span><span class=lnt id=hl-15-82><a class=lnlinks href=#hl-15-82> 82</a>
</span><span class=lnt id=hl-15-83><a class=lnlinks href=#hl-15-83> 83</a>
</span><span class=lnt id=hl-15-84><a class=lnlinks href=#hl-15-84> 84</a>
</span><span class=lnt id=hl-15-85><a class=lnlinks href=#hl-15-85> 85</a>
</span><span class=lnt id=hl-15-86><a class=lnlinks href=#hl-15-86> 86</a>
</span><span class=lnt id=hl-15-87><a class=lnlinks href=#hl-15-87> 87</a>
</span><span class=lnt id=hl-15-88><a class=lnlinks href=#hl-15-88> 88</a>
</span><span class=lnt id=hl-15-89><a class=lnlinks href=#hl-15-89> 89</a>
</span><span class=lnt id=hl-15-90><a class=lnlinks href=#hl-15-90> 90</a>
</span><span class=lnt id=hl-15-91><a class=lnlinks href=#hl-15-91> 91</a>
</span><span class=lnt id=hl-15-92><a class=lnlinks href=#hl-15-92> 92</a>
</span><span class=lnt id=hl-15-93><a class=lnlinks href=#hl-15-93> 93</a>
</span><span class=lnt id=hl-15-94><a class=lnlinks href=#hl-15-94> 94</a>
</span><span class=lnt id=hl-15-95><a class=lnlinks href=#hl-15-95> 95</a>
</span><span class=lnt id=hl-15-96><a class=lnlinks href=#hl-15-96> 96</a>
</span><span class=lnt id=hl-15-97><a class=lnlinks href=#hl-15-97> 97</a>
</span><span class=lnt id=hl-15-98><a class=lnlinks href=#hl-15-98> 98</a>
</span><span class=lnt id=hl-15-99><a class=lnlinks href=#hl-15-99> 99</a>
</span><span class=lnt id=hl-15-100><a class=lnlinks href=#hl-15-100>100</a>
</span><span class=lnt id=hl-15-101><a class=lnlinks href=#hl-15-101>101</a>
</span><span class=lnt id=hl-15-102><a class=lnlinks href=#hl-15-102>102</a>
</span><span class=lnt id=hl-15-103><a class=lnlinks href=#hl-15-103>103</a>
</span><span class=lnt id=hl-15-104><a class=lnlinks href=#hl-15-104>104</a>
</span><span class=lnt id=hl-15-105><a class=lnlinks href=#hl-15-105>105</a>
</span><span class=lnt id=hl-15-106><a class=lnlinks href=#hl-15-106>106</a>
</span><span class=lnt id=hl-15-107><a class=lnlinks href=#hl-15-107>107</a>
</span><span class=lnt id=hl-15-108><a class=lnlinks href=#hl-15-108>108</a>
</span><span class=lnt id=hl-15-109><a class=lnlinks href=#hl-15-109>109</a>
</span><span class=lnt id=hl-15-110><a class=lnlinks href=#hl-15-110>110</a>
</span><span class=lnt id=hl-15-111><a class=lnlinks href=#hl-15-111>111</a>
</span><span class=lnt id=hl-15-112><a class=lnlinks href=#hl-15-112>112</a>
</span><span class=lnt id=hl-15-113><a class=lnlinks href=#hl-15-113>113</a>
</span><span class=lnt id=hl-15-114><a class=lnlinks href=#hl-15-114>114</a>
</span><span class=lnt id=hl-15-115><a class=lnlinks href=#hl-15-115>115</a>
</span><span class=lnt id=hl-15-116><a class=lnlinks href=#hl-15-116>116</a>
</span><span class=lnt id=hl-15-117><a class=lnlinks href=#hl-15-117>117</a>
</span><span class=lnt id=hl-15-118><a class=lnlinks href=#hl-15-118>118</a>
</span><span class=lnt id=hl-15-119><a class=lnlinks href=#hl-15-119>119</a>
</span><span class=lnt id=hl-15-120><a class=lnlinks href=#hl-15-120>120</a>
</span><span class=lnt id=hl-15-121><a class=lnlinks href=#hl-15-121>121</a>
</span><span class=lnt id=hl-15-122><a class=lnlinks href=#hl-15-122>122</a>
</span><span class=lnt id=hl-15-123><a class=lnlinks href=#hl-15-123>123</a>
</span><span class=lnt id=hl-15-124><a class=lnlinks href=#hl-15-124>124</a>
</span><span class=lnt id=hl-15-125><a class=lnlinks href=#hl-15-125>125</a>
</span><span class=lnt id=hl-15-126><a class=lnlinks href=#hl-15-126>126</a>
</span><span class=lnt id=hl-15-127><a class=lnlinks href=#hl-15-127>127</a>
</span><span class=lnt id=hl-15-128><a class=lnlinks href=#hl-15-128>128</a>
</span><span class=lnt id=hl-15-129><a class=lnlinks href=#hl-15-129>129</a>
</span><span class=lnt id=hl-15-130><a class=lnlinks href=#hl-15-130>130</a>
</span><span class=lnt id=hl-15-131><a class=lnlinks href=#hl-15-131>131</a>
</span><span class=lnt id=hl-15-132><a class=lnlinks href=#hl-15-132>132</a>
</span><span class=lnt id=hl-15-133><a class=lnlinks href=#hl-15-133>133</a>
</span><span class=lnt id=hl-15-134><a class=lnlinks href=#hl-15-134>134</a>
</span><span class=lnt id=hl-15-135><a class=lnlinks href=#hl-15-135>135</a>
</span><span class=lnt id=hl-15-136><a class=lnlinks href=#hl-15-136>136</a>
</span><span class=lnt id=hl-15-137><a class=lnlinks href=#hl-15-137>137</a>
</span><span class=lnt id=hl-15-138><a class=lnlinks href=#hl-15-138>138</a>
</span><span class=lnt id=hl-15-139><a class=lnlinks href=#hl-15-139>139</a>
</span><span class=lnt id=hl-15-140><a class=lnlinks href=#hl-15-140>140</a>
</span><span class=lnt id=hl-15-141><a class=lnlinks href=#hl-15-141>141</a>
</span><span class=lnt id=hl-15-142><a class=lnlinks href=#hl-15-142>142</a>
</span><span class=lnt id=hl-15-143><a class=lnlinks href=#hl-15-143>143</a>
</span><span class=lnt id=hl-15-144><a class=lnlinks href=#hl-15-144>144</a>
</span><span class=lnt id=hl-15-145><a class=lnlinks href=#hl-15-145>145</a>
</span><span class=lnt id=hl-15-146><a class=lnlinks href=#hl-15-146>146</a>
</span><span class=lnt id=hl-15-147><a class=lnlinks href=#hl-15-147>147</a>
</span><span class=lnt id=hl-15-148><a class=lnlinks href=#hl-15-148>148</a>
</span><span class=lnt id=hl-15-149><a class=lnlinks href=#hl-15-149>149</a>
</span><span class=lnt id=hl-15-150><a class=lnlinks href=#hl-15-150>150</a>
</span><span class=lnt id=hl-15-151><a class=lnlinks href=#hl-15-151>151</a>
</span><span class=lnt id=hl-15-152><a class=lnlinks href=#hl-15-152>152</a>
</span><span class=lnt id=hl-15-153><a class=lnlinks href=#hl-15-153>153</a>
</span><span class=lnt id=hl-15-154><a class=lnlinks href=#hl-15-154>154</a>
</span><span class=lnt id=hl-15-155><a class=lnlinks href=#hl-15-155>155</a>
</span><span class=lnt id=hl-15-156><a class=lnlinks href=#hl-15-156>156</a>
</span><span class=lnt id=hl-15-157><a class=lnlinks href=#hl-15-157>157</a>
</span><span class=lnt id=hl-15-158><a class=lnlinks href=#hl-15-158>158</a>
</span><span class=lnt id=hl-15-159><a class=lnlinks href=#hl-15-159>159</a>
</span><span class=lnt id=hl-15-160><a class=lnlinks href=#hl-15-160>160</a>
</span><span class=lnt id=hl-15-161><a class=lnlinks href=#hl-15-161>161</a>
</span><span class=lnt id=hl-15-162><a class=lnlinks href=#hl-15-162>162</a>
</span><span class=lnt id=hl-15-163><a class=lnlinks href=#hl-15-163>163</a>
</span><span class=lnt id=hl-15-164><a class=lnlinks href=#hl-15-164>164</a>
</span><span class=lnt id=hl-15-165><a class=lnlinks href=#hl-15-165>165</a>
</span><span class=lnt id=hl-15-166><a class=lnlinks href=#hl-15-166>166</a>
</span><span class=lnt id=hl-15-167><a class=lnlinks href=#hl-15-167>167</a>
</span><span class=lnt id=hl-15-168><a class=lnlinks href=#hl-15-168>168</a>
</span><span class=lnt id=hl-15-169><a class=lnlinks href=#hl-15-169>169</a>
</span><span class=lnt id=hl-15-170><a class=lnlinks href=#hl-15-170>170</a>
</span><span class=lnt id=hl-15-171><a class=lnlinks href=#hl-15-171>171</a>
</span><span class=lnt id=hl-15-172><a class=lnlinks href=#hl-15-172>172</a>
</span><span class=lnt id=hl-15-173><a class=lnlinks href=#hl-15-173>173</a>
</span><span class=lnt id=hl-15-174><a class=lnlinks href=#hl-15-174>174</a>
</span><span class=lnt id=hl-15-175><a class=lnlinks href=#hl-15-175>175</a>
</span><span class=lnt id=hl-15-176><a class=lnlinks href=#hl-15-176>176</a>
</span><span class=lnt id=hl-15-177><a class=lnlinks href=#hl-15-177>177</a>
</span><span class=lnt id=hl-15-178><a class=lnlinks href=#hl-15-178>178</a>
</span><span class=lnt id=hl-15-179><a class=lnlinks href=#hl-15-179>179</a>
</span><span class=lnt id=hl-15-180><a class=lnlinks href=#hl-15-180>180</a>
</span><span class=lnt id=hl-15-181><a class=lnlinks href=#hl-15-181>181</a>
</span><span class=lnt id=hl-15-182><a class=lnlinks href=#hl-15-182>182</a>
</span><span class=lnt id=hl-15-183><a class=lnlinks href=#hl-15-183>183</a>
</span><span class=lnt id=hl-15-184><a class=lnlinks href=#hl-15-184>184</a>
</span><span class=lnt id=hl-15-185><a class=lnlinks href=#hl-15-185>185</a>
</span><span class=lnt id=hl-15-186><a class=lnlinks href=#hl-15-186>186</a>
</span><span class=lnt id=hl-15-187><a class=lnlinks href=#hl-15-187>187</a>
</span><span class=lnt id=hl-15-188><a class=lnlinks href=#hl-15-188>188</a>
</span><span class=lnt id=hl-15-189><a class=lnlinks href=#hl-15-189>189</a>
</span><span class=lnt id=hl-15-190><a class=lnlinks href=#hl-15-190>190</a>
</span><span class=lnt id=hl-15-191><a class=lnlinks href=#hl-15-191>191</a>
</span><span class=lnt id=hl-15-192><a class=lnlinks href=#hl-15-192>192</a>
</span><span class=lnt id=hl-15-193><a class=lnlinks href=#hl-15-193>193</a>
</span><span class=lnt id=hl-15-194><a class=lnlinks href=#hl-15-194>194</a>
</span><span class=lnt id=hl-15-195><a class=lnlinks href=#hl-15-195>195</a>
</span><span class=lnt id=hl-15-196><a class=lnlinks href=#hl-15-196>196</a>
</span><span class=lnt id=hl-15-197><a class=lnlinks href=#hl-15-197>197</a>
</span><span class=lnt id=hl-15-198><a class=lnlinks href=#hl-15-198>198</a>
</span><span class=lnt id=hl-15-199><a class=lnlinks href=#hl-15-199>199</a>
</span><span class=lnt id=hl-15-200><a class=lnlinks href=#hl-15-200>200</a>
</span><span class=lnt id=hl-15-201><a class=lnlinks href=#hl-15-201>201</a>
</span><span class=lnt id=hl-15-202><a class=lnlinks href=#hl-15-202>202</a>
</span><span class=lnt id=hl-15-203><a class=lnlinks href=#hl-15-203>203</a>
</span><span class=lnt id=hl-15-204><a class=lnlinks href=#hl-15-204>204</a>
</span><span class=lnt id=hl-15-205><a class=lnlinks href=#hl-15-205>205</a>
</span><span class=lnt id=hl-15-206><a class=lnlinks href=#hl-15-206>206</a>
</span><span class=lnt id=hl-15-207><a class=lnlinks href=#hl-15-207>207</a>
</span><span class=lnt id=hl-15-208><a class=lnlinks href=#hl-15-208>208</a>
</span><span class=lnt id=hl-15-209><a class=lnlinks href=#hl-15-209>209</a>
</span><span class=lnt id=hl-15-210><a class=lnlinks href=#hl-15-210>210</a>
</span><span class=lnt id=hl-15-211><a class=lnlinks href=#hl-15-211>211</a>
</span><span class=lnt id=hl-15-212><a class=lnlinks href=#hl-15-212>212</a>
</span><span class=lnt id=hl-15-213><a class=lnlinks href=#hl-15-213>213</a>
</span><span class=lnt id=hl-15-214><a class=lnlinks href=#hl-15-214>214</a>
</span><span class=lnt id=hl-15-215><a class=lnlinks href=#hl-15-215>215</a>
</span><span class=lnt id=hl-15-216><a class=lnlinks href=#hl-15-216>216</a>
</span><span class=lnt id=hl-15-217><a class=lnlinks href=#hl-15-217>217</a>
</span><span class=lnt id=hl-15-218><a class=lnlinks href=#hl-15-218>218</a>
</span><span class=lnt id=hl-15-219><a class=lnlinks href=#hl-15-219>219</a>
</span><span class=lnt id=hl-15-220><a class=lnlinks href=#hl-15-220>220</a>
</span><span class=lnt id=hl-15-221><a class=lnlinks href=#hl-15-221>221</a>
</span><span class=lnt id=hl-15-222><a class=lnlinks href=#hl-15-222>222</a>
</span><span class=lnt id=hl-15-223><a class=lnlinks href=#hl-15-223>223</a>
</span><span class=lnt id=hl-15-224><a class=lnlinks href=#hl-15-224>224</a>
</span><span class=lnt id=hl-15-225><a class=lnlinks href=#hl-15-225>225</a>
</span><span class=lnt id=hl-15-226><a class=lnlinks href=#hl-15-226>226</a>
</span><span class=lnt id=hl-15-227><a class=lnlinks href=#hl-15-227>227</a>
</span><span class=lnt id=hl-15-228><a class=lnlinks href=#hl-15-228>228</a>
</span><span class=lnt id=hl-15-229><a class=lnlinks href=#hl-15-229>229</a>
</span><span class=lnt id=hl-15-230><a class=lnlinks href=#hl-15-230>230</a>
</span><span class=lnt id=hl-15-231><a class=lnlinks href=#hl-15-231>231</a>
</span><span class=lnt id=hl-15-232><a class=lnlinks href=#hl-15-232>232</a>
</span><span class=lnt id=hl-15-233><a class=lnlinks href=#hl-15-233>233</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>Any</span><span class=p>,</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ConfigManager</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    웹 애플리케이션용 설정 관리 싱글톤 클래스
</span></span></span><span class=line><span class=cl><span class=s2>    Bill Pugh Solution 패턴을 Python으로 구현
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>_instance</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=s1>&#39;ConfigManager&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=n>_lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>  <span class=c1># 스레드 안전성을 위한 락</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s1>&#39;ConfigManager&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        새로운 인스턴스 생성을 제어하는 메서드
</span></span></span><span class=line><span class=cl><span class=s2>        Double-checked locking 패턴 적용
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>with</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1># 두 번째 체크: 락 획득 후 다시 확인</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span><span class=o>.</span><span class=n>_initialized</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        초기화는 한 번만 수행되도록 제어
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s1>&#39;_initialized&#39;</span><span class=p>)</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_initialized</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=c1># 설정 저장소 초기화</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_configs</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_last_updated</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 기본 설정 로드</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_load_default_configs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_initialized</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;ConfigManager 인스턴스가 초기화되었습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_load_default_configs</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        기본 설정값들을 로드하는 private 메서드
</span></span></span><span class=line><span class=cl><span class=s2>        실제 환경에서는 파일이나 데이터베이스에서 로드
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_configs</span><span class=o>.</span><span class=n>update</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;database&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;host&#39;</span><span class=p>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;port&#39;</span><span class=p>:</span> <span class=mi>5432</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;myapp_db&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;pool_size&#39;</span><span class=p>:</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;cache&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;type&#39;</span><span class=p>:</span> <span class=s1>&#39;redis&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;host&#39;</span><span class=p>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;port&#39;</span><span class=p>:</span> <span class=mi>6379</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;ttl&#39;</span><span class=p>:</span> <span class=mi>3600</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;api&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;rate_limit&#39;</span><span class=p>:</span> <span class=mi>1000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;timeout&#39;</span><span class=p>:</span> <span class=mi>30</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;retry_count&#39;</span><span class=p>:</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;security&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;jwt_secret&#39;</span><span class=p>:</span> <span class=s1>&#39;your-secret-key&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;session_timeout&#39;</span><span class=p>:</span> <span class=mi>1800</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;max_login_attempts&#39;</span><span class=p>:</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@classmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_instance</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s1>&#39;ConfigManager&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        싱글톤 인스턴스를 반환하는 클래스 메서드
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>cls</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_config</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>default</span><span class=p>:</span> <span class=n>Any</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Any</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        설정값을 조회하는 메서드
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        Args:
</span></span></span><span class=line><span class=cl><span class=s2>            key: 설정 키 (점 표기법 지원, 예: &#39;database.host&#39;)
</span></span></span><span class=line><span class=cl><span class=s2>            default: 기본값
</span></span></span><span class=line><span class=cl><span class=s2>            
</span></span></span><span class=line><span class=cl><span class=s2>        Returns:
</span></span></span><span class=line><span class=cl><span class=s2>            설정값 또는 기본값
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>keys</span> <span class=o>=</span> <span class=n>key</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;.&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_configs</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=n>keys</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>value</span> <span class=o>=</span> <span class=n>value</span><span class=p>[</span><span class=n>k</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=p>(</span><span class=ne>KeyError</span><span class=p>,</span> <span class=ne>TypeError</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>default</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>set_config</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        설정값을 동적으로 변경하는 메서드
</span></span></span><span class=line><span class=cl><span class=s2>        스레드 안전성을 위해 락 사용
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        Args:
</span></span></span><span class=line><span class=cl><span class=s2>            key: 설정 키
</span></span></span><span class=line><span class=cl><span class=s2>            value: 설정값
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>keys</span> <span class=o>=</span> <span class=n>key</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;.&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>config</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_configs</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 중첩된 딕셔너리 구조에서 마지막 키까지 탐색</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=n>keys</span><span class=p>[:</span><span class=o>-</span><span class=mi>1</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>k</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>config</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>config</span><span class=p>[</span><span class=n>k</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>                <span class=n>config</span> <span class=o>=</span> <span class=n>config</span><span class=p>[</span><span class=n>k</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>config</span><span class=p>[</span><span class=n>keys</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]]</span> <span class=o>=</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_last_updated</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;설정 &#39;</span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>&#39;이 &#39;</span><span class=si>{</span><span class=n>value</span><span class=si>}</span><span class=s2>&#39;로 업데이트되었습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_all_configs</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        모든 설정을 반환하는 메서드 (읽기 전용 복사본)
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_configs</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>reload_configs</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        설정을 다시 로드하는 메서드
</span></span></span><span class=line><span class=cl><span class=s2>        실제 환경에서는 외부 소스에서 다시 로드
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;설정을 다시 로드하는 중…&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_load_default_configs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_last_updated</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;설정 로드가 완료되었습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_last_updated</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>float</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        마지막 업데이트 시간을 반환
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_last_updated</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 웹 컨트롤러에서의 사용 예시</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>WebController</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    웹 컨트롤러에서 ConfigManager 사용 예시
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 싱글톤 인스턴스 획득</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>config</span> <span class=o>=</span> <span class=n>ConfigManager</span><span class=o>.</span><span class=n>get_instance</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>handle_database_request</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        데이터베이스 관련 요청 처리
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>db_host</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>get_config</span><span class=p>(</span><span class=s1>&#39;database.host&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>db_port</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>get_config</span><span class=p>(</span><span class=s1>&#39;database.port&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>pool_size</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>get_config</span><span class=p>(</span><span class=s1>&#39;database.pool_size&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;데이터베이스 연결: </span><span class=si>{</span><span class=n>db_host</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>db_port</span><span class=si>}</span><span class=s2>, 풀 크기: </span><span class=si>{</span><span class=n>pool_size</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;Connected to </span><span class=si>{</span><span class=n>db_host</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>db_port</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>handle_api_request</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        API 관련 요청 처리
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>rate_limit</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>get_config</span><span class=p>(</span><span class=s1>&#39;api.rate_limit&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>timeout</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>get_config</span><span class=p>(</span><span class=s1>&#39;api.timeout&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;API 요청 처리: 제한=</span><span class=si>{</span><span class=n>rate_limit</span><span class=si>}</span><span class=s2>/분, 타임아웃=</span><span class=si>{</span><span class=n>timeout</span><span class=si>}</span><span class=s2>초&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;API processed with rate limit: </span><span class=si>{</span><span class=n>rate_limit</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 서비스 레이어에서의 사용 예시</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ServiceLayer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    서비스 레이어에서 ConfigManager 사용 예시
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 동일한 싱글톤 인스턴스 사용</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>config</span> <span class=o>=</span> <span class=n>ConfigManager</span><span class=o>.</span><span class=n>get_instance</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>setup_cache</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        캐시 설정
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>cache_type</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>get_config</span><span class=p>(</span><span class=s1>&#39;cache.type&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>cache_host</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>get_config</span><span class=p>(</span><span class=s1>&#39;cache.host&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>cache_ttl</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>get_config</span><span class=p>(</span><span class=s1>&#39;cache.ttl&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;캐시 설정: </span><span class=si>{</span><span class=n>cache_type</span><span class=si>}</span><span class=s2> at </span><span class=si>{</span><span class=n>cache_host</span><span class=si>}</span><span class=s2>, TTL: </span><span class=si>{</span><span class=n>cache_ttl</span><span class=si>}</span><span class=s2>초&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;Cache configured: </span><span class=si>{</span><span class=n>cache_type</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>demonstrate_singleton_pattern</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    싱글톤 패턴 동작을 실증하는 함수
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=== 싱글톤 패턴 실증 ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 여러 컴포넌트에서 ConfigManager 인스턴스 생성</span>
</span></span><span class=line><span class=cl>    <span class=n>controller</span> <span class=o>=</span> <span class=n>WebController</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>service</span> <span class=o>=</span> <span class=n>ServiceLayer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 동일한 인스턴스인지 확인</span>
</span></span><span class=line><span class=cl>    <span class=n>config1</span> <span class=o>=</span> <span class=n>ConfigManager</span><span class=o>.</span><span class=n>get_instance</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>config2</span> <span class=o>=</span> <span class=n>ConfigManager</span><span class=o>.</span><span class=n>get_instance</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;config1과 config2가 동일한 인스턴스인가? </span><span class=si>{</span><span class=n>config1</span> <span class=ow>is</span> <span class=n>config2</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;인스턴스 ID: config1=</span><span class=si>{</span><span class=nb>id</span><span class=p>(</span><span class=n>config1</span><span class=p>)</span><span class=si>}</span><span class=s2>, config2=</span><span class=si>{</span><span class=nb>id</span><span class=p>(</span><span class=n>config2</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 설정 변경이 모든 컴포넌트에 반영되는지 확인</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>=== 설정 변경 테스트 ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>config1</span><span class=o>.</span><span class=n>set_config</span><span class=p>(</span><span class=s1>&#39;database.host&#39;</span><span class=p>,</span> <span class=s1>&#39;prod-server.com&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 다른 컴포넌트에서 변경된 설정 조회</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Controller에서 조회한 DB 호스트: </span><span class=si>{</span><span class=n>controller</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>get_config</span><span class=p>(</span><span class=s1>&#39;database.host&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Service에서 조회한 DB 호스트: </span><span class=si>{</span><span class=n>service</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>get_config</span><span class=p>(</span><span class=s1>&#39;database.host&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 기능 실행</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>=== 기능 실행 ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>controller</span><span class=o>.</span><span class=n>handle_database_request</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>controller</span><span class=o>.</span><span class=n>handle_api_request</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>service</span><span class=o>.</span><span class=n>setup_cache</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>demonstrate_singleton_pattern</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=python-eager-initialization-early-loading>Python: Eager Initialization (Early Loading)<a hidden class=anchor aria-hidden=true href=#python-eager-initialization-early-loading>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1> 1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2> 2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3> 3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4> 4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5> 5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6> 6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7> 7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8> 8</a>
</span><span class=lnt id=hl-16-9><a class=lnlinks href=#hl-16-9> 9</a>
</span><span class=lnt id=hl-16-10><a class=lnlinks href=#hl-16-10>10</a>
</span><span class=lnt id=hl-16-11><a class=lnlinks href=#hl-16-11>11</a>
</span><span class=lnt id=hl-16-12><a class=lnlinks href=#hl-16-12>12</a>
</span><span class=lnt id=hl-16-13><a class=lnlinks href=#hl-16-13>13</a>
</span><span class=lnt id=hl-16-14><a class=lnlinks href=#hl-16-14>14</a>
</span><span class=lnt id=hl-16-15><a class=lnlinks href=#hl-16-15>15</a>
</span><span class=lnt id=hl-16-16><a class=lnlinks href=#hl-16-16>16</a>
</span><span class=lnt id=hl-16-17><a class=lnlinks href=#hl-16-17>17</a>
</span><span class=lnt id=hl-16-18><a class=lnlinks href=#hl-16-18>18</a>
</span><span class=lnt id=hl-16-19><a class=lnlinks href=#hl-16-19>19</a>
</span><span class=lnt id=hl-16-20><a class=lnlinks href=#hl-16-20>20</a>
</span><span class=lnt id=hl-16-21><a class=lnlinks href=#hl-16-21>21</a>
</span><span class=lnt id=hl-16-22><a class=lnlinks href=#hl-16-22>22</a>
</span><span class=lnt id=hl-16-23><a class=lnlinks href=#hl-16-23>23</a>
</span><span class=lnt id=hl-16-24><a class=lnlinks href=#hl-16-24>24</a>
</span><span class=lnt id=hl-16-25><a class=lnlinks href=#hl-16-25>25</a>
</span><span class=lnt id=hl-16-26><a class=lnlinks href=#hl-16-26>26</a>
</span><span class=lnt id=hl-16-27><a class=lnlinks href=#hl-16-27>27</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>EagerSingleton</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=c1># 클래스 로드 시점에 인스턴스 생성</span>
</span></span><span class=line><span class=cl>	<span class=n>_instance</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=ow>not</span> <span class=n>EagerSingleton</span><span class=o>.</span><span class=n>_instance</span><span class=p>:</span>
</span></span><span class=line><span class=cl>			<span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Initializing EagerSingleton&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=bp>self</span><span class=o>.</span><span class=n>data</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>			<span class=n>EagerSingleton</span><span class=o>.</span><span class=n>_instance</span> <span class=o>=</span> <span class=bp>self</span>
</span></span><span class=line><span class=cl>			
</span></span><span class=line><span class=cl>	<span class=nd>@classmethod</span>
</span></span><span class=line><span class=cl>	<span class=k>def</span> <span class=nf>get_instance</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span><span class=p>:</span>
</span></span><span class=line><span class=cl>			<span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=o>=</span> <span class=bp>cls</span><span class=p>()</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>worker</span><span class=p>():</span>
</span></span><span class=line><span class=cl>	<span class=n>singleton</span> <span class=o>=</span> <span class=n>EagerSingleton</span><span class=o>.</span><span class=n>get_instance</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Worker accessing singleton: </span><span class=si>{</span><span class=nb>id</span><span class=p>(</span><span class=n>singleton</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=n>threads</span> <span class=o>=</span> <span class=p>[</span><span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>worker</span><span class=p>)</span> <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>t</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=n>t</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>t</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=n>t</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=python-lazy-initialization-with-double-checked-locking>Python: Lazy Initialization with Double-Checked Locking<a hidden class=anchor aria-hidden=true href=#python-lazy-initialization-with-double-checked-locking>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1> 1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2> 2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3> 3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4> 4</a>
</span><span class=lnt id=hl-17-5><a class=lnlinks href=#hl-17-5> 5</a>
</span><span class=lnt id=hl-17-6><a class=lnlinks href=#hl-17-6> 6</a>
</span><span class=lnt id=hl-17-7><a class=lnlinks href=#hl-17-7> 7</a>
</span><span class=lnt id=hl-17-8><a class=lnlinks href=#hl-17-8> 8</a>
</span><span class=lnt id=hl-17-9><a class=lnlinks href=#hl-17-9> 9</a>
</span><span class=lnt id=hl-17-10><a class=lnlinks href=#hl-17-10>10</a>
</span><span class=lnt id=hl-17-11><a class=lnlinks href=#hl-17-11>11</a>
</span><span class=lnt id=hl-17-12><a class=lnlinks href=#hl-17-12>12</a>
</span><span class=lnt id=hl-17-13><a class=lnlinks href=#hl-17-13>13</a>
</span><span class=lnt id=hl-17-14><a class=lnlinks href=#hl-17-14>14</a>
</span><span class=lnt id=hl-17-15><a class=lnlinks href=#hl-17-15>15</a>
</span><span class=lnt id=hl-17-16><a class=lnlinks href=#hl-17-16>16</a>
</span><span class=lnt id=hl-17-17><a class=lnlinks href=#hl-17-17>17</a>
</span><span class=lnt id=hl-17-18><a class=lnlinks href=#hl-17-18>18</a>
</span><span class=lnt id=hl-17-19><a class=lnlinks href=#hl-17-19>19</a>
</span><span class=lnt id=hl-17-20><a class=lnlinks href=#hl-17-20>20</a>
</span><span class=lnt id=hl-17-21><a class=lnlinks href=#hl-17-21>21</a>
</span><span class=lnt id=hl-17-22><a class=lnlinks href=#hl-17-22>22</a>
</span><span class=lnt id=hl-17-23><a class=lnlinks href=#hl-17-23>23</a>
</span><span class=lnt id=hl-17-24><a class=lnlinks href=#hl-17-24>24</a>
</span><span class=lnt id=hl-17-25><a class=lnlinks href=#hl-17-25>25</a>
</span><span class=lnt id=hl-17-26><a class=lnlinks href=#hl-17-26>26</a>
</span><span class=lnt id=hl-17-27><a class=lnlinks href=#hl-17-27>27</a>
</span><span class=lnt id=hl-17-28><a class=lnlinks href=#hl-17-28>28</a>
</span><span class=lnt id=hl-17-29><a class=lnlinks href=#hl-17-29>29</a>
</span><span class=lnt id=hl-17-30><a class=lnlinks href=#hl-17-30>30</a>
</span><span class=lnt id=hl-17-31><a class=lnlinks href=#hl-17-31>31</a>
</span><span class=lnt id=hl-17-32><a class=lnlinks href=#hl-17-32>32</a>
</span><span class=lnt id=hl-17-33><a class=lnlinks href=#hl-17-33>33</a>
</span><span class=lnt id=hl-17-34><a class=lnlinks href=#hl-17-34>34</a>
</span><span class=lnt id=hl-17-35><a class=lnlinks href=#hl-17-35>35</a>
</span><span class=lnt id=hl-17-36><a class=lnlinks href=#hl-17-36>36</a>
</span><span class=lnt id=hl-17-37><a class=lnlinks href=#hl-17-37>37</a>
</span><span class=lnt id=hl-17-38><a class=lnlinks href=#hl-17-38>38</a>
</span><span class=lnt id=hl-17-39><a class=lnlinks href=#hl-17-39>39</a>
</span><span class=lnt id=hl-17-40><a class=lnlinks href=#hl-17-40>40</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>threading</span> <span class=kn>import</span> <span class=n>Lock</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>DoubleCheckedSingleton</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=n>_instance</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>	<span class=n>_lock</span> <span class=o>=</span> <span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=k>def</span> <span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
</span></span><span class=line><span class=cl>		<span class=c1># 첫 번째 검사</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span><span class=p>:</span>
</span></span><span class=line><span class=cl>			<span class=k>with</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_lock</span><span class=p>:</span>  <span class=c1># 락 획득</span>
</span></span><span class=line><span class=cl>				<span class=c1># 두 번째 검사</span>
</span></span><span class=line><span class=cl>				<span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span><span class=p>:</span>
</span></span><span class=line><span class=cl>					<span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Creating new instance&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					<span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>		<span class=c1># 초기화 코드가 한 번만 실행되도록 보장</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s1>&#39;initialized&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>			<span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>				<span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s1>&#39;initialized&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>					<span class=bp>self</span><span class=o>.</span><span class=n>data</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>					<span class=bp>self</span><span class=o>.</span><span class=n>initialized</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=k>def</span> <span class=nf>add_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item</span><span class=p>):</span>
</span></span><span class=line><span class=cl>		<span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>			<span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>worker</span><span class=p>(</span><span class=nb>id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>	<span class=n>singleton</span> <span class=o>=</span> <span class=n>DoubleCheckedSingleton</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=n>singleton</span><span class=o>.</span><span class=n>add_data</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Data from worker </span><span class=si>{</span><span class=nb>id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Worker </span><span class=si>{</span><span class=nb>id</span><span class=si>}</span><span class=s2> using singleton: </span><span class=si>{</span><span class=nb>id</span><span class=p>(</span><span class=n>singleton</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=n>threads</span> <span class=o>=</span> <span class=p>[</span><span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>worker</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>i</span><span class=p>,))</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>t</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=n>t</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>t</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=n>t</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=python-thread-safe-static-initialization>Python: Thread-Safe Static Initialization<a hidden class=anchor aria-hidden=true href=#python-thread-safe-static-initialization>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1> 1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2> 2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3> 3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4> 4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5> 5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6> 6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7> 7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8> 8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9> 9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10>10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11>11</a>
</span><span class=lnt id=hl-18-12><a class=lnlinks href=#hl-18-12>12</a>
</span><span class=lnt id=hl-18-13><a class=lnlinks href=#hl-18-13>13</a>
</span><span class=lnt id=hl-18-14><a class=lnlinks href=#hl-18-14>14</a>
</span><span class=lnt id=hl-18-15><a class=lnlinks href=#hl-18-15>15</a>
</span><span class=lnt id=hl-18-16><a class=lnlinks href=#hl-18-16>16</a>
</span><span class=lnt id=hl-18-17><a class=lnlinks href=#hl-18-17>17</a>
</span><span class=lnt id=hl-18-18><a class=lnlinks href=#hl-18-18>18</a>
</span><span class=lnt id=hl-18-19><a class=lnlinks href=#hl-18-19>19</a>
</span><span class=lnt id=hl-18-20><a class=lnlinks href=#hl-18-20>20</a>
</span><span class=lnt id=hl-18-21><a class=lnlinks href=#hl-18-21>21</a>
</span><span class=lnt id=hl-18-22><a class=lnlinks href=#hl-18-22>22</a>
</span><span class=lnt id=hl-18-23><a class=lnlinks href=#hl-18-23>23</a>
</span><span class=lnt id=hl-18-24><a class=lnlinks href=#hl-18-24>24</a>
</span><span class=lnt id=hl-18-25><a class=lnlinks href=#hl-18-25>25</a>
</span><span class=lnt id=hl-18-26><a class=lnlinks href=#hl-18-26>26</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>StaticSingleton</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=k>class</span> <span class=nc>__StaticSingleton</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>			<span class=bp>self</span><span class=o>.</span><span class=n>data</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=c1># 정적 인스턴스</span>
</span></span><span class=line><span class=cl>	<span class=n>instance</span> <span class=o>=</span> <span class=n>__StaticSingleton</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=k>def</span> <span class=fm>__getattr__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>instance</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=k>def</span> <span class=nf>add_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item</span><span class=p>):</span>
</span></span><span class=line><span class=cl>		<span class=bp>self</span><span class=o>.</span><span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>worker</span><span class=p>(</span><span class=nb>id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>	<span class=n>singleton</span> <span class=o>=</span> <span class=n>StaticSingleton</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=n>singleton</span><span class=o>.</span><span class=n>add_data</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Data from worker </span><span class=si>{</span><span class=nb>id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Worker </span><span class=si>{</span><span class=nb>id</span><span class=si>}</span><span class=s2> using singleton: </span><span class=si>{</span><span class=nb>id</span><span class=p>(</span><span class=n>singleton</span><span class=o>.</span><span class=n>instance</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=n>threads</span> <span class=o>=</span> <span class=p>[</span><span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>worker</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>i</span><span class=p>,))</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>t</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=n>t</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>t</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class=line><span class=cl>	<span class=n>t</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=javascript>Javascript<a hidden class=anchor aria-hidden=true href=#javascript>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1>  1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2>  2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3>  3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4>  4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5>  5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6>  6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7>  7</a>
</span><span class=lnt id=hl-19-8><a class=lnlinks href=#hl-19-8>  8</a>
</span><span class=lnt id=hl-19-9><a class=lnlinks href=#hl-19-9>  9</a>
</span><span class=lnt id=hl-19-10><a class=lnlinks href=#hl-19-10> 10</a>
</span><span class=lnt id=hl-19-11><a class=lnlinks href=#hl-19-11> 11</a>
</span><span class=lnt id=hl-19-12><a class=lnlinks href=#hl-19-12> 12</a>
</span><span class=lnt id=hl-19-13><a class=lnlinks href=#hl-19-13> 13</a>
</span><span class=lnt id=hl-19-14><a class=lnlinks href=#hl-19-14> 14</a>
</span><span class=lnt id=hl-19-15><a class=lnlinks href=#hl-19-15> 15</a>
</span><span class=lnt id=hl-19-16><a class=lnlinks href=#hl-19-16> 16</a>
</span><span class=lnt id=hl-19-17><a class=lnlinks href=#hl-19-17> 17</a>
</span><span class=lnt id=hl-19-18><a class=lnlinks href=#hl-19-18> 18</a>
</span><span class=lnt id=hl-19-19><a class=lnlinks href=#hl-19-19> 19</a>
</span><span class=lnt id=hl-19-20><a class=lnlinks href=#hl-19-20> 20</a>
</span><span class=lnt id=hl-19-21><a class=lnlinks href=#hl-19-21> 21</a>
</span><span class=lnt id=hl-19-22><a class=lnlinks href=#hl-19-22> 22</a>
</span><span class=lnt id=hl-19-23><a class=lnlinks href=#hl-19-23> 23</a>
</span><span class=lnt id=hl-19-24><a class=lnlinks href=#hl-19-24> 24</a>
</span><span class=lnt id=hl-19-25><a class=lnlinks href=#hl-19-25> 25</a>
</span><span class=lnt id=hl-19-26><a class=lnlinks href=#hl-19-26> 26</a>
</span><span class=lnt id=hl-19-27><a class=lnlinks href=#hl-19-27> 27</a>
</span><span class=lnt id=hl-19-28><a class=lnlinks href=#hl-19-28> 28</a>
</span><span class=lnt id=hl-19-29><a class=lnlinks href=#hl-19-29> 29</a>
</span><span class=lnt id=hl-19-30><a class=lnlinks href=#hl-19-30> 30</a>
</span><span class=lnt id=hl-19-31><a class=lnlinks href=#hl-19-31> 31</a>
</span><span class=lnt id=hl-19-32><a class=lnlinks href=#hl-19-32> 32</a>
</span><span class=lnt id=hl-19-33><a class=lnlinks href=#hl-19-33> 33</a>
</span><span class=lnt id=hl-19-34><a class=lnlinks href=#hl-19-34> 34</a>
</span><span class=lnt id=hl-19-35><a class=lnlinks href=#hl-19-35> 35</a>
</span><span class=lnt id=hl-19-36><a class=lnlinks href=#hl-19-36> 36</a>
</span><span class=lnt id=hl-19-37><a class=lnlinks href=#hl-19-37> 37</a>
</span><span class=lnt id=hl-19-38><a class=lnlinks href=#hl-19-38> 38</a>
</span><span class=lnt id=hl-19-39><a class=lnlinks href=#hl-19-39> 39</a>
</span><span class=lnt id=hl-19-40><a class=lnlinks href=#hl-19-40> 40</a>
</span><span class=lnt id=hl-19-41><a class=lnlinks href=#hl-19-41> 41</a>
</span><span class=lnt id=hl-19-42><a class=lnlinks href=#hl-19-42> 42</a>
</span><span class=lnt id=hl-19-43><a class=lnlinks href=#hl-19-43> 43</a>
</span><span class=lnt id=hl-19-44><a class=lnlinks href=#hl-19-44> 44</a>
</span><span class=lnt id=hl-19-45><a class=lnlinks href=#hl-19-45> 45</a>
</span><span class=lnt id=hl-19-46><a class=lnlinks href=#hl-19-46> 46</a>
</span><span class=lnt id=hl-19-47><a class=lnlinks href=#hl-19-47> 47</a>
</span><span class=lnt id=hl-19-48><a class=lnlinks href=#hl-19-48> 48</a>
</span><span class=lnt id=hl-19-49><a class=lnlinks href=#hl-19-49> 49</a>
</span><span class=lnt id=hl-19-50><a class=lnlinks href=#hl-19-50> 50</a>
</span><span class=lnt id=hl-19-51><a class=lnlinks href=#hl-19-51> 51</a>
</span><span class=lnt id=hl-19-52><a class=lnlinks href=#hl-19-52> 52</a>
</span><span class=lnt id=hl-19-53><a class=lnlinks href=#hl-19-53> 53</a>
</span><span class=lnt id=hl-19-54><a class=lnlinks href=#hl-19-54> 54</a>
</span><span class=lnt id=hl-19-55><a class=lnlinks href=#hl-19-55> 55</a>
</span><span class=lnt id=hl-19-56><a class=lnlinks href=#hl-19-56> 56</a>
</span><span class=lnt id=hl-19-57><a class=lnlinks href=#hl-19-57> 57</a>
</span><span class=lnt id=hl-19-58><a class=lnlinks href=#hl-19-58> 58</a>
</span><span class=lnt id=hl-19-59><a class=lnlinks href=#hl-19-59> 59</a>
</span><span class=lnt id=hl-19-60><a class=lnlinks href=#hl-19-60> 60</a>
</span><span class=lnt id=hl-19-61><a class=lnlinks href=#hl-19-61> 61</a>
</span><span class=lnt id=hl-19-62><a class=lnlinks href=#hl-19-62> 62</a>
</span><span class=lnt id=hl-19-63><a class=lnlinks href=#hl-19-63> 63</a>
</span><span class=lnt id=hl-19-64><a class=lnlinks href=#hl-19-64> 64</a>
</span><span class=lnt id=hl-19-65><a class=lnlinks href=#hl-19-65> 65</a>
</span><span class=lnt id=hl-19-66><a class=lnlinks href=#hl-19-66> 66</a>
</span><span class=lnt id=hl-19-67><a class=lnlinks href=#hl-19-67> 67</a>
</span><span class=lnt id=hl-19-68><a class=lnlinks href=#hl-19-68> 68</a>
</span><span class=lnt id=hl-19-69><a class=lnlinks href=#hl-19-69> 69</a>
</span><span class=lnt id=hl-19-70><a class=lnlinks href=#hl-19-70> 70</a>
</span><span class=lnt id=hl-19-71><a class=lnlinks href=#hl-19-71> 71</a>
</span><span class=lnt id=hl-19-72><a class=lnlinks href=#hl-19-72> 72</a>
</span><span class=lnt id=hl-19-73><a class=lnlinks href=#hl-19-73> 73</a>
</span><span class=lnt id=hl-19-74><a class=lnlinks href=#hl-19-74> 74</a>
</span><span class=lnt id=hl-19-75><a class=lnlinks href=#hl-19-75> 75</a>
</span><span class=lnt id=hl-19-76><a class=lnlinks href=#hl-19-76> 76</a>
</span><span class=lnt id=hl-19-77><a class=lnlinks href=#hl-19-77> 77</a>
</span><span class=lnt id=hl-19-78><a class=lnlinks href=#hl-19-78> 78</a>
</span><span class=lnt id=hl-19-79><a class=lnlinks href=#hl-19-79> 79</a>
</span><span class=lnt id=hl-19-80><a class=lnlinks href=#hl-19-80> 80</a>
</span><span class=lnt id=hl-19-81><a class=lnlinks href=#hl-19-81> 81</a>
</span><span class=lnt id=hl-19-82><a class=lnlinks href=#hl-19-82> 82</a>
</span><span class=lnt id=hl-19-83><a class=lnlinks href=#hl-19-83> 83</a>
</span><span class=lnt id=hl-19-84><a class=lnlinks href=#hl-19-84> 84</a>
</span><span class=lnt id=hl-19-85><a class=lnlinks href=#hl-19-85> 85</a>
</span><span class=lnt id=hl-19-86><a class=lnlinks href=#hl-19-86> 86</a>
</span><span class=lnt id=hl-19-87><a class=lnlinks href=#hl-19-87> 87</a>
</span><span class=lnt id=hl-19-88><a class=lnlinks href=#hl-19-88> 88</a>
</span><span class=lnt id=hl-19-89><a class=lnlinks href=#hl-19-89> 89</a>
</span><span class=lnt id=hl-19-90><a class=lnlinks href=#hl-19-90> 90</a>
</span><span class=lnt id=hl-19-91><a class=lnlinks href=#hl-19-91> 91</a>
</span><span class=lnt id=hl-19-92><a class=lnlinks href=#hl-19-92> 92</a>
</span><span class=lnt id=hl-19-93><a class=lnlinks href=#hl-19-93> 93</a>
</span><span class=lnt id=hl-19-94><a class=lnlinks href=#hl-19-94> 94</a>
</span><span class=lnt id=hl-19-95><a class=lnlinks href=#hl-19-95> 95</a>
</span><span class=lnt id=hl-19-96><a class=lnlinks href=#hl-19-96> 96</a>
</span><span class=lnt id=hl-19-97><a class=lnlinks href=#hl-19-97> 97</a>
</span><span class=lnt id=hl-19-98><a class=lnlinks href=#hl-19-98> 98</a>
</span><span class=lnt id=hl-19-99><a class=lnlinks href=#hl-19-99> 99</a>
</span><span class=lnt id=hl-19-100><a class=lnlinks href=#hl-19-100>100</a>
</span><span class=lnt id=hl-19-101><a class=lnlinks href=#hl-19-101>101</a>
</span><span class=lnt id=hl-19-102><a class=lnlinks href=#hl-19-102>102</a>
</span><span class=lnt id=hl-19-103><a class=lnlinks href=#hl-19-103>103</a>
</span><span class=lnt id=hl-19-104><a class=lnlinks href=#hl-19-104>104</a>
</span><span class=lnt id=hl-19-105><a class=lnlinks href=#hl-19-105>105</a>
</span><span class=lnt id=hl-19-106><a class=lnlinks href=#hl-19-106>106</a>
</span><span class=lnt id=hl-19-107><a class=lnlinks href=#hl-19-107>107</a>
</span><span class=lnt id=hl-19-108><a class=lnlinks href=#hl-19-108>108</a>
</span><span class=lnt id=hl-19-109><a class=lnlinks href=#hl-19-109>109</a>
</span><span class=lnt id=hl-19-110><a class=lnlinks href=#hl-19-110>110</a>
</span><span class=lnt id=hl-19-111><a class=lnlinks href=#hl-19-111>111</a>
</span><span class=lnt id=hl-19-112><a class=lnlinks href=#hl-19-112>112</a>
</span><span class=lnt id=hl-19-113><a class=lnlinks href=#hl-19-113>113</a>
</span><span class=lnt id=hl-19-114><a class=lnlinks href=#hl-19-114>114</a>
</span><span class=lnt id=hl-19-115><a class=lnlinks href=#hl-19-115>115</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-node.js data-lang=node.js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>EventEmitter</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;events&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>logger</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;./logger&#39;</span><span class=p>);</span>  <span class=c1>// 가정된 로깅 모듈
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>ConfigManager</span> <span class=kr>extends</span> <span class=nx>EventEmitter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Singleton 패턴 구현
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=nx>ConfigManager</span><span class=p>.</span><span class=nx>instance</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>ConfigManager</span><span class=p>.</span><span class=nx>instance</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=kr>super</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nx>ConfigManager</span><span class=p>.</span><span class=nx>instance</span> <span class=o>=</span> <span class=k>this</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 초기화
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>initialize</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>initialize</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 프라이빗 속성 정의
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>_config</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>_lastUpdate</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>_observers</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Set</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 설정 변경 이력
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>_history</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 기본 설정 로드
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>loadDefaults</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>logger</span><span class=p>.</span><span class=nx>info</span><span class=p>(</span><span class=s1>&#39;ConfigManager가 초기화되었습니다.&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>loadDefaults</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>defaults</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>environment</span><span class=o>:</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>NODE_ENV</span> <span class=o>||</span> <span class=s1>&#39;development&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>port</span><span class=o>:</span> <span class=mi>3000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>database</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>host</span><span class=o>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>port</span><span class=o>:</span> <span class=mi>5432</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nb>Object</span><span class=p>.</span><span class=nx>entries</span><span class=p>(</span><span class=nx>defaults</span><span class=p>).</span><span class=nx>forEach</span><span class=p>(([</span><span class=nx>key</span><span class=p>,</span> <span class=nx>value</span><span class=p>])</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>set</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>value</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 값 변경 전 유효성 검사
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>validateValue</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>oldValue</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>_config</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>_config</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 변경 이력 기록
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>_history</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>timestamp</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=nx>key</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>oldValue</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>newValue</span><span class=o>:</span> <span class=nx>value</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>_lastUpdate</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 이벤트 발생
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>emit</span><span class=p>(</span><span class=s1>&#39;configChanged&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>key</span><span class=p>,</span> <span class=nx>oldValue</span><span class=p>,</span> <span class=nx>newValue</span><span class=o>:</span> <span class=nx>value</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>logger</span><span class=p>.</span><span class=nx>info</span><span class=p>(</span><span class=sb>`설정이 변경되었습니다: </span><span class=si>${</span><span class=nx>key</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>get</span><span class=p>(</span><span class=nx>key</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=k>this</span><span class=p>.</span><span class=nx>_config</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=nx>key</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>logger</span><span class=p>.</span><span class=nx>warn</span><span class=p>(</span><span class=sb>`존재하지 않는 설정에 접근했습니다: </span><span class=si>${</span><span class=nx>key</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>undefined</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 객체인 경우 깊은 복사본 반환
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>value</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>_config</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>deepClone</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>validateValue</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>value</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 설정값 유효성 검사
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=nx>key</span> <span class=o>===</span> <span class=s1>&#39;port&#39;</span> <span class=o>&amp;&amp;</span> <span class=p>(</span><span class=k>typeof</span> <span class=nx>value</span> <span class=o>!==</span> <span class=s1>&#39;number&#39;</span> <span class=o>||</span> <span class=nx>value</span> <span class=o>&lt;</span> <span class=mi>0</span> <span class=o>||</span> <span class=nx>value</span> <span class=o>&gt;</span> <span class=mi>65535</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;포트 번호가 유효하지 않습니다.&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>addObserver</span><span class=p>(</span><span class=nx>observer</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>_observers</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>observer</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>logger</span><span class=p>.</span><span class=nx>info</span><span class=p>(</span><span class=s1>&#39;새로운 옵저버가 추가되었습니다.&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>removeObserver</span><span class=p>(</span><span class=nx>observer</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>_observers</span><span class=p>.</span><span class=k>delete</span><span class=p>(</span><span class=nx>observer</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>getHistory</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>[</span><span class=err>…</span><span class=k>this</span><span class=p>.</span><span class=nx>_history</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>deepClone</span><span class=p>(</span><span class=nx>obj</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>obj</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 테스트를 위한 리셋 메서드
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>static</span> <span class=nx>resetInstance</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>ConfigManager</span><span class=p>.</span><span class=nx>instance</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>ConfigManager</span><span class=p>.</span><span class=nx>instance</span><span class=p>.</span><span class=nx>removeAllListeners</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=nx>ConfigManager</span><span class=p>.</span><span class=nx>instance</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 모듈로 내보내기
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=nx>ConfigManager</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=java-holder-idiom--테스트-가능-개선>Java (Holder Idiom + 테스트 가능 개선)<a hidden class=anchor aria-hidden=true href=#java-holder-idiom--테스트-가능-개선>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1> 1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2> 2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3> 3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4> 4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5> 5</a>
</span><span class=lnt id=hl-20-6><a class=lnlinks href=#hl-20-6> 6</a>
</span><span class=lnt id=hl-20-7><a class=lnlinks href=#hl-20-7> 7</a>
</span><span class=lnt id=hl-20-8><a class=lnlinks href=#hl-20-8> 8</a>
</span><span class=lnt id=hl-20-9><a class=lnlinks href=#hl-20-9> 9</a>
</span><span class=lnt id=hl-20-10><a class=lnlinks href=#hl-20-10>10</a>
</span><span class=lnt id=hl-20-11><a class=lnlinks href=#hl-20-11>11</a>
</span><span class=lnt id=hl-20-12><a class=lnlinks href=#hl-20-12>12</a>
</span><span class=lnt id=hl-20-13><a class=lnlinks href=#hl-20-13>13</a>
</span><span class=lnt id=hl-20-14><a class=lnlinks href=#hl-20-14>14</a>
</span><span class=lnt id=hl-20-15><a class=lnlinks href=#hl-20-15>15</a>
</span><span class=lnt id=hl-20-16><a class=lnlinks href=#hl-20-16>16</a>
</span><span class=lnt id=hl-20-17><a class=lnlinks href=#hl-20-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ConfigManager</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=nf>ConfigManager</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>load</span><span class=p>();</span><span class=w> </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>load</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=cm>/* 초기 로드 */</span><span class=w> </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>class</span> <span class=nc>Holder</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>ConfigManager</span><span class=w> </span><span class=n>INSTANCE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ConfigManager</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>ConfigManager</span><span class=w> </span><span class=nf>getInstance</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>Holder</span><span class=p>.</span><span class=na>INSTANCE</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 테스트 시 상태 리셋 기능 제공</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>resetForTest</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// reflection으로 Holder.INSTANCE 재설정 로직 삽입</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li><strong>Holder idiom</strong>으로 thread-safe lazy 초기화</li><li><strong>resetForTest()</strong> 메서드로 단위 테스트 가능 구조</li></ul><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th><th><strong>권장사항</strong></th></tr></thead><tbody><tr><td><strong>설계 원칙</strong></td><td>의존성 관리</td><td>Singleton 객체에 대한 직접 의존성은 유지보수와 테스트를 어렵게 만듦</td><td>인터페이스 기반 설계, DI 컨테이너 (SPRING 등) 활용</td></tr><tr><td></td><td>책임 분리</td><td>Singleton 객체에 여러 책임이 집중되면 단일 책임 원칙 (SRP) 위반 가능성 있음</td><td>기능 역할 명확화 및 단일 기능 집중</td></tr><tr><td></td><td>구조 유연성</td><td>확장이나 기능 변경 시 유연성이 부족할 수 있음</td><td>팩토리 패턴, DI 등과 결합하여 구조적 유연성 확보</td></tr><tr><td><strong>초기화 전략</strong></td><td>초기화 시점</td><td>리소스 비용과 사용 패턴에 따라 적절한 초기화 시점 선택 필요</td><td>Lazy Initialization, Eager Initialization, Holder Idiom 적용</td></tr><tr><td></td><td>초기화 비용</td><td>객체 생성이 무거운 경우 즉시 초기화는 불리함</td><td>Lazy 초기화 방식 채택 + 백그라운드 로딩 병행 고려</td></tr><tr><td><strong>동기화 및 성능</strong></td><td>스레드 안전성 확보</td><td>멀티스레드 환경에서 Singleton 이 중복 생성되지 않도록 동기화 필요</td><td>Double-Checked Locking, volatile, Holder 패턴 또는 enum 방식 적용</td></tr><tr><td></td><td>동기화 오버헤드</td><td>과도한 동기화는 성능 저하를 유발함</td><td>최소 범위의 동기화, 읽기 전용 접근 제외, lock-free 구조 활용</td></tr><tr><td></td><td>getInstance() 성능 최적화</td><td>반복 호출 성능 개선 필요</td><td>로컬 변수 캐싱, static 접근 최적화</td></tr><tr><td><strong>테스트 전략</strong></td><td>테스트 격리</td><td>전역 상태로 인해 테스트 간 간섭 발생 가능성 존재</td><td>reset 메서드 제공, 인터페이스 추상화, DI 로 주입 가능하도록 설계</td></tr><tr><td></td><td>Mock 객체 적용</td><td>직접 참조된 Singleton 은 테스트용 Mock 객체로 대체하기 어려움</td><td>Mockito, Spy, Stub 등 테스트 프레임워크 연동</td></tr><tr><td><strong>메모리 관리</strong></td><td>인스턴스 해제 불가</td><td>Singleton 은 GC 에 의해 자동으로 해제되지 않으며, 메모리 누수 위험 있음</td><td>상태 최소화, WeakReference, 필요 시 수명 관리 로직 구현</td></tr><tr><td></td><td>자원 해제</td><td>DB 연결, 파일 핸들 등 외부 자원을 가진 Singleton 은 명시적 종료 처리 필요</td><td><code>close()</code>, <code>shutdown()</code> 메서드 구현</td></tr><tr><td><strong>상태 및 보안</strong></td><td>내부 상태 공유</td><td>상태 공유 시 예상치 못한 사이드 이펙트나 동기화 문제 발생</td><td>가능한 immutable 설계, 상태 캡슐화, 최소한의 변경 허용</td></tr><tr><td></td><td>리플렉션 우회 방지</td><td>리플렉션으로 private 생성자도 호출 가능</td><td>생성자에서 예외 발생 처리 또는 enum 기반 구현</td></tr><tr><td></td><td>직렬화 안전성</td><td>역직렬화 시 새로운 인스턴스가 생성될 수 있음</td><td><code>readResolve()</code> 메서드로 인스턴스 재생성 방지</td></tr><tr><td><strong>확장성 및 대안</strong></td><td>다중 인스턴스 확장 고려</td><td>장기적으로 여러 인스턴스가 필요한 구조로 전환될 수 있음</td><td>Multiton 또는 팩토리 패턴으로 유연한 전환 설계</td></tr><tr><td></td><td>전역 상태 오용 방지</td><td>전역 상태는 결합도 증가 및 테스트성 저하로 이어질 수 있음</td><td>전역 상태 최소화, 의존성은 반드시 캡슐화</td></tr><tr><td></td><td>DI 컨테이너 활용</td><td>프레임워크에서 Singleton 을 Bean 으로 관리 가능</td><td>Spring 의 Singleton Scope 활용</td></tr><tr><td><strong>분산 시스템 대응</strong></td><td>분산 환경에서 Singleton 유지</td><td>프로세스 간 공유 메모리 없음 → 단일 인스턴스 보장 어려움</td><td>Redis Lock, ZooKeeper 등 분산 락 기반의 Distributed Singleton 설계 적용</td></tr></tbody></table><ul><li><strong>설계 관점</strong>: 결합도 감소 + 역할 명확화 + 테스트성 확보 → <strong>인터페이스 + DI</strong> 구조 강력 추천</li><li><strong>성능 관점</strong>: 초기화 타이밍과 동기화 비용이 핵심 → <strong>Lazy Holder</strong> 또는 <strong>Enum</strong> 방식이 일반적으로 가장 안전</li><li><strong>보안/안정성</strong>: 리플렉션과 직렬화에 의한 우회 생성 차단 → <strong><code>readResolve()</code></strong>, <strong>enum 사용</strong></li><li><strong>확장성</strong>: 초기에는 Singleton, 장기적으로는 Multiton, Factory, DI 로 전환 가능하게 설계</li><li><strong>실무 적용</strong>: 로깅, 설정, DB 커넥션 풀, 캐시 등 전역적 공유 리소스에서 <strong>가장 효과적</strong></li></ul><h4 id=테스트-전략>테스트 전략<a hidden class=anchor aria-hidden=true href=#테스트-전략>#</a></h4><ol><li><strong>초기 인스턴스 초기화 여부 검증</strong><ul><li>멀티스레드 환경에서 단일 인스턴스만 생성되는지 테스트</li><li>Python 예시: <code>instance = None</code> 리셋 후 <code>Logger()</code> 호출 시 동일 객체 반환 확인</li></ul></li><li><strong>메서드와 상태 일관성 검사</strong><ul><li><code>Logger.log()</code> 호출 후 파일 또는 메모리 버퍼에 동일한 로그가 기록되는지 검증</li></ul></li><li><strong>동시성 테스트</strong><ul><li>여러 스레드에서 <code>getInstance()</code> 를 호출하여 race condition 이 없는지 체크</li></ul></li><li><strong>리셋 기능 테스트</strong><ul><li>테스트 전후 <code>resetForTest()</code> 호출하여 초기 인스턴스로 상태 리셋 가능 확인</li></ul></li><li><strong>DI 기반 대체 테스트</strong><ul><li><code>@Singleton</code> 대신 mock 객체 주입 가능 여부 테스트</li></ul></li></ol><h4 id=리팩토링-전략>리팩토링 전략<a hidden class=anchor aria-hidden=true href=#리팩토링-전략>#</a></h4><ul><li><strong>Singleton → DI 전환</strong><ul><li><code>Singleton.getInstance()</code> 호출부를 DI 컨테이너에서 자동 주입하는 구조로 개선</li></ul></li><li><strong>Mutable 상태 분리</strong><ul><li>전역 설정 (immutable) vs per-request 상태 (local) 분리해서 설계</li></ul></li><li><strong>Enum Singleton (Java)</strong><ul><li>리플렉션, 직렬화 공격 대응을 위해 enum 방식 전환</li></ul></li><li><strong>Multiton 도입</strong><ul><li>여러 인스턴스 필요시 <code>getInstance(key)</code> 형태로 확장</li></ul></li></ul><h4 id=활용-시-흔한-실수>활용 시 흔한 실수<a hidden class=anchor aria-hidden=true href=#활용-시-흔한-실수>#</a></h4><ul><li><strong>다중 스레드 환경에서 동기화 미적용</strong></li><li><strong>전역 상태 남용</strong></li><li><strong>테스트 용이성 고려 부족</strong></li></ul><h3 id=최적화하기-위한-고려사항-및-주의점>최적화하기 위한 고려사항 및 주의점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th><th><strong>권장사항</strong></th></tr></thead><tbody><tr><td><strong>초기화 전략</strong></td><td>초기화 시점</td><td>생성 비용이 크거나 사용 빈도가 낮은 경우에 늦게 초기화 필요</td><td><code>Lazy Initialization</code>, <code>Holder Idiom</code> 적용</td></tr><tr><td></td><td>초기화 비용</td><td>무거운 객체는 생성 지연이 필요하지만 가벼운 객체는 eager 도 고려 가능</td><td>객체 무게에 따라 Lazy 또는 Eager 전략 선택</td></tr><tr><td><strong>동기화 제어</strong></td><td>동기화 오버헤드</td><td><code>synchronized</code> 사용은 비용이 크고 성능 저하 가능성 존재</td><td><code>Double-Checked Locking</code>, <code>volatile</code>, <code>Holder</code> 패턴 활용</td></tr><tr><td></td><td>락 경합 최소화</td><td>멀티스레드에서 락 충돌이 발생하면 성능 저하</td><td>읽기 전용 영역은 동기화 제외, lock-free 구조 고려</td></tr><tr><td><strong>접근 최적화</strong></td><td>getInstance() 성능</td><td>빈번한 호출은 지역 변수 캐싱 등으로 개선 가능</td><td><code>volatile</code> 변수, 로컬 변수 캐싱 사용</td></tr><tr><td></td><td>호출 최적화</td><td>반복 접근 시 동기화 비용 증가</td><td>최초 접근 이후에는 동기화 없는 경로 사용</td></tr><tr><td><strong>메모리 관리</strong></td><td>인스턴스 해제 불가</td><td>Singleton 은 GC 가 해제하지 않음 → 메모리 누수 위험</td><td>불필요한 상태 제거, 필요한 경우 <code>WeakReference</code> 또는 캐시 정리 적용</td></tr><tr><td></td><td>메모리 사용량 최소화</td><td>불필요한 필드가 많으면 메모리 낭비</td><td>필요한 상태만 유지하고 외부 자원은 참조로 연결</td></tr><tr><td><strong>자원 관리</strong></td><td>자원 해제 로직 필요</td><td>DB 연결, 파일 핸들러 등 자원을 포함한 Singleton 은 종료 시 명시적 해제 필요</td><td><code>close()</code>, <code>shutdown()</code> 메서드 구현</td></tr><tr><td><strong>상태 관리</strong></td><td>내부 상태 변경의 부작용</td><td>상태를 공유하면 테스트 격리나 동시성 이슈 발생 가능</td><td>불변 객체 구성 또는 상태 최소화</td></tr><tr><td><strong>확장성과 구조</strong></td><td>오용 방지</td><td>Singleton 을 전역 변수처럼 사용하면 결합도 증가, 테스트성 저하</td><td>책임 분리, 기능 분산, 전역 참조 최소화</td></tr><tr><td></td><td>구조 유연성 확보</td><td>시스템 확장 시 Singleton 은 병목이나 설계 유연성 저해 요소</td><td><code>DI Container</code> 를 통한 관리 (예: Spring Singleton Scope)</td></tr><tr><td></td><td>분산 환경 고려</td><td>단일 인스턴스를 보장할 수 없는 경우 분산 락 등 외부 전략 필요</td><td>Redis Lock, ZooKeeper 기반 <code>Distributed Singleton</code> 구조 적용</td></tr><tr><td><strong>직렬화 및 보안</strong></td><td>직렬화 처리</td><td>Serializable 객체는 역직렬화 시 새로운 인스턴스가 생성될 수 있음</td><td><code>readResolve()</code> 메서드 사용으로 Singleton 보장</td></tr><tr><td></td><td>리플렉션 우회 방지</td><td>리플렉션을 이용하면 private 생성자도 호출 가능</td><td>생성자에서 예외 처리 또는 enum 기반 Singleton 사용</td></tr><tr><td></td><td></td><td></td><td></td></tr></tbody></table><h3 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>설계 개념</strong></td><td>인스턴스 제어</td><td>단일 인스턴스 보장</td><td>클래스 인스턴스를 하나만 생성하고, 동일한 인스턴스를 반환함</td></tr><tr><td></td><td>전역 상태 관리</td><td>글로벌 액세스</td><td>전역 접근 가능하지만, 상태 공유로 인해 테스트 및 확장성에 제약 발생</td></tr><tr><td></td><td>리소스 공유</td><td>자원 절약</td><td>설정, 캐시 등 리소스를 공유하여 시스템 일관성과 효율성 확보</td></tr><tr><td><strong>구현 전략</strong></td><td>초기화 방식</td><td>Lazy, Eager, Holder</td><td>인스턴스를 생성하는 시점에 따라 메모리 및 성능에 차이 발생</td></tr><tr><td></td><td>Thread Safety</td><td>synchronized, DCL, volatile, enum</td><td>멀티스레드 환경에서 안전한 Singleton 구현을 위한 다양한 기법</td></tr><tr><td></td><td>Lazy Holder</td><td>JVM ClassLoader 기반 구현</td><td>클래스 로딩 시점에 인스턴스를 생성하여 동기화 비용 없이 thread-safe 보장</td></tr><tr><td></td><td>Multiton</td><td>키 기반 Singleton</td><td>목적별로 여러 개의 인스턴스를 관리할 수 있는 변형 형태</td></tr><tr><td><strong>언어 특성</strong></td><td>언어별 구현</td><td>Java, Python, JavaScript</td><td>언어별 메모리 모델, 클래스 로딩 방식에 따른 구현 방식 차이 존재</td></tr><tr><td><strong>테스트 전략</strong></td><td>테스트 가능성</td><td>상태 초기화, reset 메서드</td><td>전역 상태로 인해 테스트 충돌 발생 → 상태 초기화 메커니즘 필요</td></tr><tr><td></td><td>Mock/Proxy Singleton</td><td>Spy, Stub, DI 활용</td><td>Singleton 객체를 테스트 환경에서 대체하거나 감싸는 방식으로 테스트성 향상</td></tr><tr><td><strong>보안 이슈</strong></td><td>Singleton 우회 방지</td><td>Reflection, Serialization 대응</td><td>Java 에서 리플렉션 및 직렬화를 통한 우회 인스턴스 생성을 방지</td></tr><tr><td></td><td>readResolve</td><td>직렬화 대응 메서드</td><td>Singleton 객체가 역직렬화 시 새로 생성되지 않도록 보장</td></tr><tr><td><strong>아키텍처 대안</strong></td><td>Dependency Injection</td><td>DI Container, IoC</td><td>전역 접근을 제거하고 DI 컨테이너에서 객체 생성을 위임하여 테스트성과 유지보수성 향상</td></tr><tr><td></td><td>Service Locator</td><td>레지스트리 기반 객체 탐색</td><td>Singleton 접근을 추상화한 대안 패턴으로, 결합도는 높지만 유연성 제공</td></tr><tr><td></td><td>Factory + Singleton</td><td>객체 생성 추상화</td><td>생성 책임을 팩토리로 위임하여 유연성과 테스트성 확보</td></tr><tr><td></td><td>Static vs Singleton</td><td>상태 관리 차이</td><td>static 은 상태를 가지지 않으며 테스트 용이, Singleton 은 상태 공유 가능</td></tr><tr><td><strong>프레임워크 통합</strong></td><td>Spring Singleton Scope</td><td>Singleton, Prototype, Request Scope</td><td>Spring 에서는 기본 Scope 가 Singleton 이며 다양한 범위 스코프 지원</td></tr><tr><td></td><td>Bean Lifecycle</td><td>클래스 로딩과 Bean 초기화 시점 차이</td><td>Spring Bean 은 JVM 클래스 로딩과는 별도로 관리되므로 초기화 방식 이해 필요</td></tr><tr><td><strong>성능 최적화</strong></td><td>메모리 최적화</td><td>Object Pooling</td><td>인스턴스 재사용을 통해 메모리 사용 효율 향상</td></tr><tr><td></td><td>Lock-free 알고리즘</td><td>Compare-and-Swap</td><td>동기화 없이 병렬 처리 성능을 높이는 고급 동시성 기법</td></tr><tr><td><strong>분산 시스템</strong></td><td>Distributed Singleton</td><td>Redis, ZooKeeper, DB Lock</td><td>분산 환경에서 단일 인스턴스를 보장하는 분산 락 전략 필요</td></tr><tr><td></td><td>Service Discovery</td><td>인스턴스 탐색 및 상태 동기화</td><td>마이크로서비스 환경에서 Singleton-like 인스턴스 관리</td></tr><tr><td><strong>실무 사례</strong></td><td>게임 개발</td><td>게임 상태 관리자, 리소스 캐시</td><td>게임에서는 주로 전역 상태 관리자로 활용</td></tr><tr><td></td><td>모바일 앱 개발</td><td>Android Singleton</td><td>액티비티 생명주기와 메모리 해제를 고려한 싱글톤 구현 필수</td></tr><tr><td></td><td>웹 세션 관리</td><td>사용자 상태 vs 전역 상태</td><td>세션별 상태 관리가 필요한 경우 Singleton 이 부적절할 수 있음</td></tr><tr><td><strong>안티패턴 논의</strong></td><td>Singleton 비판</td><td>테스트성 저하, 전역 상태 공유</td><td>지나친 의존과 테스트 불가능성으로 인해 안티패턴으로 간주되는 경우도 존재</td></tr><tr><td></td><td>DI 전환 권장</td><td>결합도 감소, 테스트 용이</td><td>Singleton 의 단점을 보완하려면 DI/IoC 중심 구조로 리팩토링 필요</td></tr></tbody></table><h3 id=추가로-알아야-하거나-학습해야-할-내용>추가로 알아야 하거나 학습해야 할 내용<a hidden class=anchor aria-hidden=true href=#추가로-알아야-하거나-학습해야-할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>핵심 항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>1. 구현 기법</strong></td><td>생성 시점 전략</td><td>Lazy vs Eager Initialization</td><td>객체 생성 시점에 따라 메모리 사용량과 초기화 제어 방식이 달라짐</td></tr><tr><td></td><td>Thread-Safe Singleton 구현법</td><td>DCL, Holder Idiom, synchronized</td><td>멀티스레드 환경에서 안전하게 Singleton 을 생성하는 구현 전략</td></tr><tr><td></td><td>언어 특화 구현</td><td>Java Enum, Python 모듈, JS 클로저</td><td>언어별 메모리 모델과 언어 특성에 맞춘 Singleton 구현법</td></tr><tr><td></td><td>Static vs Singleton</td><td>책임 분리, 인스턴스 유무</td><td>static 유틸리티와 싱글톤 객체 간 차이점 이해</td></tr><tr><td><strong>2. 동시성 및 성능</strong></td><td>Java Memory Model</td><td>volatile, synchronized</td><td>Java 의 메모리 가시성 보장 및 스레드 안전 구현에 필수적인 개념</td></tr><tr><td></td><td>Memory Management</td><td>JVM heap, GC, 메모리 누수</td><td>Singleton 인스턴스의 생명주기와 JVM 내부 구조 이해</td></tr><tr><td></td><td>성능 최적화</td><td>프로파일링, 동기화 비용 분석</td><td>Singleton 이 시스템 성능에 미치는 영향 분석</td></tr><tr><td><strong>3. 테스트 전략</strong></td><td>Testable Singleton</td><td>상태 초기화, 리셋 메서드, DI 활용</td><td>Singleton 의 테스트 가능성을 높이기 위한 설계 전략</td></tr><tr><td></td><td>Mock/Proxy Singleton</td><td>Mockito, Spy, Stubbing</td><td>Singleton 객체의 외부 대체 및 테스트 격리를 위한 도구와 기법</td></tr><tr><td><strong>4. 아키텍처/패턴</strong></td><td>Dependency Injection (DI)</td><td>Spring, NestJS DI 컨테이너</td><td>Singleton 을 대체하거나 DI 를 통해 유연하게 결합하는 아키텍처 전략</td></tr><tr><td></td><td>Service Locator 패턴</td><td>Lazy Resolver, Registry</td><td>Singleton 대안으로 객체 생성 책임을 분리하는 구조적 패턴</td></tr><tr><td></td><td>Factory + Singleton</td><td>객체 생성 책임 분리</td><td>Singleton 생성을 Factory 에 위임하여 결합도와 테스트성을 높이는 전략</td></tr><tr><td></td><td>SOLID 원칙 적용</td><td>SRP, DIP 적용</td><td>Singleton 이 OOP 원칙을 위반하지 않도록 구조적으로 개선</td></tr><tr><td><strong>5. 프레임워크 통합</strong></td><td>Spring Singleton Bean</td><td>Singleton, Prototype, Request Scope</td><td>Spring IoC 컨테이너에서의 싱글톤 스코프 관리 방식과 비교</td></tr><tr><td></td><td>Bean Lifecycle & Class Loading</td><td>PostConstruct, Class Loader</td><td>Spring 의 빈 초기화 시점과 JVM 클래스 로딩 메커니즘 간 관계 이해</td></tr><tr><td><strong>6. 분산 환경</strong></td><td>Distributed Singleton</td><td>Redis Lock, ZooKeeper</td><td>분산 시스템에서 Singleton 인스턴스를 하나만 유지하기 위한 전략</td></tr><tr><td></td><td>Service Discovery</td><td>Consul, Eureka, Kubernetes Service</td><td>마이크로서비스 간의 Singleton-like 인스턴스 관리와 라우팅</td></tr><tr><td><strong>7. 비교 및 대체</strong></td><td>Global State vs Singleton</td><td>테스트 가능성, 전역 상태 부작용</td><td>전역 변수 사용과 Singleton 의 차이 및 유사점 비교</td></tr><tr><td></td><td>Immutable Objects</td><td>불변 객체 기반 설계</td><td>상태를 가지지 않는 Singleton 대체 설계로의 접근</td></tr><tr><td><strong>8. 보안 이슈</strong></td><td>Reflection & Serialization 방지</td><td>readResolve(), 생성자 예외 처리</td><td>Singleton 우회 생성을 막기 위한 보안 기법</td></tr><tr><td></td><td>리플렉션 보호</td><td>생성자 차단, enum 사용</td><td>자바에서 Reflection 을 통한 생성 우회 방어</td></tr><tr><td><strong>9. 실무 적용</strong></td><td>설정/로깅/캐시/DB 연결 등 활용</td><td>Config, Logger, CacheManager</td><td>Singleton 이 적합한 실제 서비스 내 활용 시나리오</td></tr><tr><td></td><td>Singleton 남용 경고</td><td>상태 공유, 테스트 어려움</td><td>무분별한 Singleton 사용이 초래하는 문제점과 피해야 할 상황</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th><strong>카테고리</strong></th><th><strong>용어</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>패턴 개념</strong></td><td>Singleton</td><td>인스턴스가 하나만 존재하도록 보장하며 전역 접근을 허용하는 디자인 패턴</td></tr><tr><td></td><td>Multiton</td><td>키 기반으로 여러 인스턴스를 생성하여 관리하는 Singleton 의 변형 패턴</td></tr><tr><td></td><td>Enum Singleton</td><td>Java 의 enum 타입으로 구현한 싱글톤. 리플렉션/직렬화 공격에 강함</td></tr><tr><td></td><td>Global State</td><td>전역 상태로 인해 테스트 및 유지보수가 어려워지는 공유 객체 상태</td></tr><tr><td><strong>초기화 전략</strong></td><td>Lazy Initialization</td><td>객체가 실제로 필요한 시점에 생성되는 지연 초기화 방식</td></tr><tr><td></td><td>Eager Initialization</td><td>클래스 로딩 시 인스턴스를 즉시 생성하는 방식</td></tr><tr><td></td><td>Bill Pugh Solution (Holder Idiom)</td><td>내부 정적 클래스를 활용한 thread-safe lazy 초기화 구현 방식</td></tr><tr><td><strong>동시성 제어</strong></td><td>Double-Checked Locking</td><td>동기화 성능을 고려하여 중복 검사로 thread-safe lazy 초기화를 구현하는 기법</td></tr><tr><td></td><td>Synchronization</td><td>여러 스레드 간 안전한 접근을 보장하기 위한 동기화 메커니즘</td></tr><tr><td></td><td>Thread Safety</td><td>멀티스레드 환경에서도 올바르게 동작하는 속성</td></tr><tr><td></td><td>Race Condition</td><td>여러 스레드가 공유 자원에 동시에 접근하면서 예기치 못한 동작이 발생하는 현상</td></tr><tr><td></td><td>Volatile</td><td>Java 에서 변수의 메모리 가시성을 보장하는 키워드</td></tr><tr><td><strong>언어 구현</strong></td><td>SingletonMeta</td><td>Python 에서 싱글톤을 구현하기 위한 메타클래스</td></tr><tr><td></td><td>getInstance()</td><td>Singleton 인스턴스를 반환하는 정적 메서드</td></tr><tr><td></td><td>Lazy Holder</td><td>JVM 클래스 로더를 활용한 lazy 초기화 기법 (Holder Idiom)</td></tr><tr><td></td><td>readResolve</td><td>Java 직렬화 시 싱글톤 보존을 위한 메서드</td></tr><tr><td><strong>테스트 및 보안</strong></td><td>resetForTest</td><td>테스트 환경에서 Singleton 인스턴스를 초기화하기 위한 메서드</td></tr><tr><td></td><td>Dependency Injection (DI)</td><td>객체 간 의존성을 외부에서 주입하여 테스트와 확장성을 향상시키는 설계 원칙</td></tr><tr><td></td><td>IoC Container</td><td>객체 생성과 생명주기를 관리하는 제어 역전 컨테이너</td></tr><tr><td></td><td>Reflection</td><td>런타임에 클래스 정보를 조사·조작하는 기능. Singleton 위반 가능성 있음</td></tr><tr><td></td><td>Serialization</td><td>객체를 바이트 스트림으로 변환하는 과정. Singleton 위반 가능성 있음</td></tr><tr><td><strong>일반 개념</strong></td><td>Instance (인스턴스)</td><td>클래스로부터 생성된 실제 객체</td></tr><tr><td></td><td>Memory Leak</td><td>사용하지 않는 객체가 메모리에서 해제되지 않고 남아있는 상태</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><h3 id=개념-및-개요>개념 및 개요<a hidden class=anchor aria-hidden=true href=#개념-및-개요>#</a></h3><ul><li><a href=https://refactoring.guru/ko/design-patterns/singleton>싱글톤 패턴 - Refactoring Guru (한국어)</a></li><li><a href=https://ko.wikipedia.org/wiki/%EC%8B%B1%EA%B8%80%ED%84%B4_%ED%8C%A8%ED%84%B4>싱글톤 패턴 - 위키백과</a></li><li><a href=https://www.geeksforgeeks.org/singleton-design-pattern/>Singleton Design Pattern - GeeksforGeeks</a></li><li><a href=https://sourcemaking.com/design_patterns/singleton/java/1>Singleton Pattern in Java - SourceMaking</a></li></ul><h3 id=자바-중심-구현-및-실전-예시>자바 중심 구현 및 실전 예시<a hidden class=anchor aria-hidden=true href=#자바-중심-구현-및-실전-예시>#</a></h3><ul><li><a href=https://www.baeldung.com/java-singleton>싱글톤 패턴 - Java 예시 및 설명 (Baeldung)</a></li><li><a href=https://www.digitalocean.com/community/tutorials/java-singleton-design-pattern-best-practices-examples>Java Singleton Design Pattern Best Practices - DigitalOcean</a></li><li><a href=https://en.wikipedia.org/wiki/Initialization-on-demand_holder_idiom>Initialization-on-demand holder idiom - 위키백과</a></li><li><a href=https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html>Java Memory Model and Thread Safety - Oracle Docs</a></li></ul><h3 id=다양한-언어에서의-구현>다양한 언어에서의 구현<a hidden class=anchor aria-hidden=true href=#다양한-언어에서의-구현>#</a></h3><ul><li><a href=https://realpython.com/python-singleton/>Python에서 Singleton 패턴 구현 - Real Python</a></li><li><a href=https://www.calibraint.com/blog/singleton-design-pattern-in-javascript>Singleton Pattern in JavaScript - Calibraint 블로그</a></li><li><a href=https://gist.github.com/kodecocodes/8f5ea4308752909f83f9>Swift Singleton Pattern 구현 - Github Gist 예제</a></li></ul><h3 id=실제-사례-및-활용>실제 사례 및 활용<a hidden class=anchor aria-hidden=true href=#실제-사례-및-활용>#</a></h3><ul><li><a href=https://www.professorfontanez.com/2017/03/real-life-application-for-singleton.html>Applying the Singleton Design Pattern to Real-World Scenarios</a></li><li><a href=https://stackoverflow.com/questions/3192095/where-exactly-the-singleton-pattern-is-used-in-real-application>Where exactly the Singleton Pattern is used in real application? - StackOverflow</a></li></ul><h3 id=설계-논쟁-및-단점>설계 논쟁 및 단점<a hidden class=anchor aria-hidden=true href=#설계-논쟁-및-단점>#</a></h3><ul><li><a href=https://testing.googleblog.com/2008/08/root-cause-of-singletons.html>Root Cause of Singletons - Google Testing Blog</a></li><li><a href=https://blog.code-cop.org/2012/01/why-singletons-are-evil.html>Why Singletons Are Evil - Code Cop</a></li><li><a href=https://www.contentful.com/blog/singleton-pattern-evil-or-misused/>The Singleton Pattern: Evil or Just Misused? - Contentful 블로그</a></li></ul><h3 id=마이크로서비스와-싱글톤>마이크로서비스와 싱글톤<a hidden class=anchor aria-hidden=true href=#마이크로서비스와-싱글톤>#</a></h3><ul><li><a href=https://www.linkedin.com/advice/0/how-can-you-use-singleton-pattern-microservices>Singleton Pattern in Microservices - LinkedIn</a></li></ul><h3 id=싱글톤-vs-의존성-주입>싱글톤 Vs 의존성 주입<a hidden class=anchor aria-hidden=true href=#싱글톤-vs-의존성-주입>#</a></h3><ul><li><a href=https://stackoverflow.com/questions/2662842/dependency-injection-singleton-design-pattern>Dependency Injection vs Singleton Pattern - StackOverflow</a></li></ul><hr></div></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>