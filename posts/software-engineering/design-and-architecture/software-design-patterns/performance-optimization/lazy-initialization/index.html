<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>지연 초기화(Lazy Initialization) | hyunyoun's Blog</title><meta name=keywords content="Software-Engineering,Design-and-Architecture,Software-Design-Patterns,Performance-Optimization,lazy-initialization,Performance-Optimization,Resource-Management"><meta name=description content="지연 초기화는 객체나 값의 생성을 실제로 필요할 때까지 미루는 설계 패턴이다. 메모리 절약, 빠른 시작, 불필요한 연산 방지 등 자원 효율성을 극대화할 수 있지만, 최초 접근 시 지연, 예외 발생의 지연, 동시성 관리 등 주의가 필요하다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/performance-optimization/lazy-initialization/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/performance-optimization/lazy-initialization/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/performance-optimization/lazy-initialization/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="지연 초기화(Lazy Initialization)"><meta property="og:description" content="지연 초기화는 객체나 값의 생성을 실제로 필요할 때까지 미루는 설계 패턴이다. 메모리 절약, 빠른 시작, 불필요한 연산 방지 등 자원 효율성을 극대화할 수 있지만, 최초 접근 시 지연, 예외 발생의 지연, 동시성 관리 등 주의가 필요하다."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-18T10:42:00+00:00"><meta property="article:modified_time" content="2024-12-18T10:42:00+00:00"><meta property="article:tag" content="Software-Engineering"><meta property="article:tag" content="Design-and-Architecture"><meta property="article:tag" content="Software-Design-Patterns"><meta property="article:tag" content="Lazy-Initialization"><meta property="article:tag" content="Performance-Optimization"><meta property="article:tag" content="Resource-Management"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="지연 초기화(Lazy Initialization)"><meta name=twitter:description content="지연 초기화는 객체나 값의 생성을 실제로 필요할 때까지 미루는 설계 패턴이다. 메모리 절약, 빠른 시작, 불필요한 연산 방지 등 자원 효율성을 극대화할 수 있지만, 최초 접근 시 지연, 예외 발생의 지연, 동시성 관리 등 주의가 필요하다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Computer Science and Engineering","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Software Engineering","item":"https://buenhyden.github.io/posts/software-engineering/"},{"@type":"ListItem","position":3,"name":"Design and Architecture","item":""},{"@type":"ListItem","position":4,"name":"Software Design Patterns","item":""},{"@type":"ListItem","position":5,"name":"Performance Optimization","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/performance-optimization/"},{"@type":"ListItem","position":6,"name":"지연 초기화(Lazy Initialization)","item":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/performance-optimization/lazy-initialization/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"지연 초기화(Lazy Initialization)","name":"지연 초기화(Lazy Initialization)","description":"지연 초기화는 객체나 값의 생성을 실제로 필요할 때까지 미루는 설계 패턴이다. 메모리 절약, 빠른 시작, 불필요한 연산 방지 등 자원 효율성을 극대화할 수 있지만, 최초 접근 시 지연, 예외 발생의 지연, 동시성 관리 등 주의가 필요하다.","keywords":["Software-Engineering","Design-and-Architecture","Software-Design-Patterns","Performance-Optimization","lazy-initialization","Performance-Optimization","Resource-Management"],"articleBody":"지연 초기화 (Lazy Initialization) 4. 전체 개요 (250 자 내외) 지연 초기화는 성능 최적화를 위한 핵심 디자인 패턴으로, 객체 생성을 지연시켜 메모리 사용량을 줄이고 애플리케이션 시작 시간을 단축한다. 프록시 패턴을 활용한 구현, 스레드 안전성 보장, ORM 에서의 지연 로딩, 웹에서의 이미지 지연 로딩 등 다양한 영역에서 활용된다. 적절한 사용 시 성능 향상을 가져오지만, 잘못 사용하면 오히려 성능 저하를 일으킬 수 있어 신중한 적용이 필요하다. 단, 멀티스레드 환경의 동시 초기화 이슈와 디버깅 난이도 증가를 고려해야 한다.\n핵심 개념 지연 초기화 (Lazy Initialization): 객체, 값, 리소스의 생성이나 계산을 실제로 필요할 때까지 미루는 설계 패턴. **Eager Initialization(즉시 초기화)**와 대비되는 개념으로, 즉시 초기화는 객체 생성 시점에 모든 값을 미리 초기화한다. Thread Safety(스레드 안전성): 멀티스레드 환경에서 지연 초기화는 동기화가 필요하다. 캐싱 (Caching): 최초 계산 후 결과를 저장해 이후에는 재계산 없이 반환한다. 관련 개념 Lazy Loading: 웹 이미지, 데이터 로딩 등 지연 초기화 응용. Virtual Proxy / Ghost / Value Holder: Lazy 초기화의 구현 방식. Initialization-on-demand holder idiom: Java 용 안전한 Lazy 싱글턴 구현. Double-checked Locking: 동기화 비용 최소화하는 다중 스레드 초기화. 기본 개념 지연 평가 (Lazy Evaluation): 실제로 값이 필요한 시점까지 계산이나 초기화를 지연시키는 개념. 온디맨드 초기화 (On-Demand Initialization): 요청이 있을 때만 객체를 생성하는 방식. 프록시 객체 (Proxy Object): 실제 객체를 대신하여 초기화를 지연시키는 중간 객체. 가상 프록시 (Virtual Proxy): 비용이 높은 객체 생성을 지연시키는 특별한 형태의 프록시. 실무 구현을 위한 연관성 메모리 관리: 불필요한 메모리 사용을 방지하여 시스템 자원을 효율적으로 활용 성능 최적화: 애플리케이션 시작 시간 단축과 응답성 향상 스레드 안전성: 멀티스레드 환경에서의 동시성 제어 예외 처리: 지연된 초기화 과정에서 발생할 수 있는 예외 상황 관리 배경 지연 초기화 패턴이 등장한 배경은 다음과 같다:\n메모리 제약: 초기 컴퓨팅 환경에서 제한된 메모리 자원을 효율적으로 사용해야 하는 필요성이 있었다. 성능 요구사항: 애플리케이션 시작 시간을 단축하고 사용자 응답성을 향상시키기 위한 요구가 증가했다. 객체지향 프로그래밍의 발전: 복잡한 객체 관계와 상속 구조에서 효율적인 메모리 관리 필요성이 대두되었다. 웹 기술의 발전: 인터넷과 웹 애플리케이션의 발전으로 네트워크 자원 최적화가 중요해졌다. 목적 및 필요성 목적 성능 최적화: 애플리케이션 시작 시간 단축 메모리 효율성: 불필요한 메모리 사용 방지 자원 절약: CPU 와 네트워크 자원의 효율적 활용 사용자 경험 향상: 빠른 응답성 제공 필요성 대용량 데이터 처리: 큰 크기의 객체나 데이터를 다룰 때 조건부 사용: 특정 조건에서만 필요한 리소스 네트워크 자원: 외부 API 나 데이터베이스 연결 비용이 높은 연산: 복잡한 계산이나 초기화 과정 주요 기능 및 역할 주요 기능 지연된 객체 생성: 첫 번째 접근 시점에서 객체 생성 자동 캐싱: 생성된 객체의 재사용을 위한 캐시 메커니즘 투명성: 클라이언트 코드의 변경 없이 지연 로딩 적용 조건부 초기화: 특정 조건을 만족할 때만 초기화 수행 역할 메모리 관리자: 메모리 사용량 최적화 성능 최적화 도구: 시스템 성능 향상 자원 관리자: 시스템 자원의 효율적 배분 사용자 경험 개선: 응답성 및 로딩 시간 개선 특징 지연된 실행: 실제 필요한 시점까지 초기화 지연 투명한 인터페이스: 클라이언트는 지연 로딩을 인식하지 못함 일회성 초기화: 한 번 초기화되면 결과를 재사용 조건부 실행: 사용되지 않으면 초기화되지 않음 메모리 효율성: 필요한 만큼만 메모리 사용 핵심 원칙 필요 시점 초기화: 실제 사용되는 순간에 초기화 단일 책임: 초기화 로직과 비즈니스 로직의 분리 투명성: 클라이언트 코드의 변경 최소화 일관성: 동일한 객체에 대해 일관된 결과 보장 효율성: 최소한의 자원으로 최대한의 효과 주요 원리 객체 생성 요청 시점에 초기화 여부 확인 초기화되지 않았다면 객체 생성 및 캐싱 이후 요청 시 캐시된 객체 반환 graph TD A[클라이언트 요청] --\u003e B{초기화 여부 확인} B --\u003e|미초기화| C[객체 생성 및 초기화] B --\u003e|초기화됨| D[캐시된 객체 반환] C --\u003e E[객체 캐싱] E --\u003e F[객체 반환] D --\u003e F F --\u003e G[클라이언트 사용] 작동 원리 sequenceDiagram participant Client participant LazyHolder Client-\u003e\u003eLazyHolder: get() alt not initialized LazyHolder-\u003e\u003eLazyHolder: initialize resource LazyHolder--\u003e\u003eClient: return new instance else initialized LazyHolder--\u003e\u003eClient: return cached instance end 접근자 메서드 호출: 클라이언트가 객체에 접근 초기화 상태 확인: null 체크 또는 플래그 확인 조건부 초기화: 미초기화 시 객체 생성 결과 캐싱: 생성된 객체를 저장 객체 반환: 초기화된 객체 제공 지연 초기화의 작동 원리는 첫 번째 접근 시점에서 실제 초기화를 수행하고, 이후 요청에서는 캐시된 객체를 반환하는 메커니즘을 기반으로 한다.\n구현 기법 구현 기법 정의 및 특징 장점 단점 대표 사용 사례 단순 지연 초기화\n(Simple Lazy Initialization) 가장 기본적인 구현 방식. 객체가 null 일 때만 생성\n동기화 없음 구현이 매우 간단함 멀티스레드 환경에서 race condition 발생 가능 싱글스레드 환경에서의 단순 객체 캐싱 동기화된 초기화\n(Synchronized Initialization) 객체 접근 메서드 또는 블록에 락 (synchronized, mutex 등) 을 적용 멀티스레드 환경에서도 안전함 매번 락 획득으로 인해 성능 저하 가능 멀티스레드 환경의 초기화가 간헐적으로 필요한 경우 이중 검사 잠금\n(Double-Checked Locking) 락을 두 번 검사해 최소한의 락 획득으로 성능 개선\nvolatile 등과 함께 사용 성능과 동기화 안전성 모두 확보 가능 구현 복잡도 높고 언어별 메모리 모델 이해 필요 고성능이 요구되는 싱글턴, 캐시 객체 등 정적 내부 클래스\n(Holder Pattern) 클래스 로딩 시점에 객체 생성 보장.\nJVM/언어의 lazy-loading 메커니즘 활용 스레드 안전 + 성능 우수\n초기화 순서 보장 내부 구조나 로딩 시점 이해가 어려울 수 있음 Bill Pugh Singleton, 라이브러리 초기화 등 함수형 지연 초기화\n(Functional Lazy Initialization) Supplier / Lambda / Thunk 등을 이용한 명시적 지연 평가 코드 간결성, 재사용성, 테스트 유연성 높음 일부 언어에서는 함수형 개념에 익숙하지 않을 수 있음 Kotlin by lazy, JavaScript 클로저, Scala lazy val 등 장점 항목 설명 메모리 효율성 불필요한 객체 생성을 방지하여 메모리 사용량을 최적화 시작 성능 향상 애플리케이션 초기 로딩 시간을 단축하여 빠른 시작 제공 자원 절약 CPU, 네트워크 등 시스템 자원의 효율적 사용 조건부 로딩 실제 필요한 경우에만 리소스를 로드하여 낭비 방지 확장성 대규모 시스템에서 메모리 압박 완화 사용자 경험 개선 빠른 응답성으로 인한 사용자 만족도 향상 단점과 문제점 그리고 해결방안 단점 항목 설명 해결책 복잡성 증가 코드 구조가 복잡해지고 디버깅이 어려워짐 명확한 문서화와 단위 테스트 작성 첫 접근 지연 첫 번째 사용 시점에서 초기화 지연 발생 중요한 리소스는 사전 초기화 고려 메모리 오버헤드 프록시 객체로 인한 추가 메모리 사용 경량 프록시 패턴 적용 스레드 안전성 멀티스레드 환경에서 동시성 문제 발생 가능 적절한 동기화 메커니즘 적용 문제점 항목 원인 영향 탐지 및 진단 예방 방법 해결 방법 및 기법 LazyInitializationException ORM 세션 외부에서 지연 로딩 접근 런타임 예외 발생 스택 트레이스 확인 적절한 트랜잭션 범위 설정 즉시 로딩으로 변경 또는 DTO 사용 메모리 누수 캐시된 객체가 해제되지 않음 메모리 사용량 증가 메모리 프로파일링 적절한 캐시 만료 정책 WeakReference 사용 데드락 잘못된 동기화로 인한 교착상태 시스템 멈춤 스레드 덤프 분석 락 순서 정의 타임아웃 설정 N+1 쿼리 지연 로딩으로 인한 과도한 DB 쿼리 성능 저하 쿼리 로그 분석 적절한 페치 전략 배치 페칭 또는 조인 페치 도전 과제 및 해결 방안 카테고리 도전 과제 원인 영향 해결 방안 스레드 안전성 동시 접근 시 중복 생성 위험 여러 스레드가 동시에 초기화 시도 예측 불가능한 동작, 중복 인스턴스 생성 Double-Checked Locking, synchronized, 정적 내부 클래스 (Holder Idiom), enum 싱글톤 메모리 가시성 문제 CPU 캐시로 인한 메모리 불일치 최신 상태를 다른 스레드에서 읽지 못함 volatile 키워드로 변수 선언하여 가시성 보장 락 (lock) 사용에 따른 성능 저하 과도한 동기화 영역 처리량 저하, 병목 발생 최소화된 동기화 범위, 락 프리 알고리즘, CAS 기반 원자성 구현 초기화 실패 처리 예외 발생 시 객체 상태 불완전 생성자 내부 예외 또는 외부 의존 자원 실패 시스템 불안정, NPE 등 런타임 에러 예외 처리 후 재시도 메커니즘, Circuit Breaker, 실패 캐시 전략 적용 순환 참조 객체 간 상호 참조 지연 생성 A 가 B 를, B 가 다시 A 를 지연 참조 무한 루프, StackOverflow, 데드락 의존 관계 명확화, DI 컨테이너 사용, 순환 감지 및 리팩토링 성능 최적화 초기화 오버헤드 초기 생성 비용이 높은 경우 성능 저하, Lazy 전략 무력화 프로파일링 통한 전략 혼합 (Eager + Lazy), 캐시 적중률 향상, JIT 고려 캐시 미스 발생 사용 시점에 아직 객체가 준비되지 않음 응답 지연, 처리 중단 가능성 예측 가능한 시점에 미리 로딩 (Memoization), 사전 Warm-up 로직 도입 디버깅 및 테스트 객체 생성 시점 불명확 동적 로딩으로 타이밍이 비결정적 테스트 케이스 실패, 디버깅 난이도 증가 생성 로깅, 트레이싱 도구 활용, 테스트 환경에서는 Lazy 제거 혹은 Mock 주입 클라우드 환경 적응 서버리스·마이크로서비스 구조에서 비효율 호출 단위 인스턴스 생성, 콜드 스타트 초기 응답 지연, 비용 증가 컨테이너 단위 Pre-warming, Lazy 대신 Init Container, Keep-alive 전략 도입 AI/ML 환경 최적화 대규모 모델/데이터 지연 로딩 문제 지연 초기화로는 모델/데이터 메모리 요구를 커버하기 어려움 OutOfMemory, 느린 처리 속도 스트리밍 기반 로딩, 메모리 매핑, 분산 캐시 또는 모델 파티셔닝 분류에 따른 종류 및 유형 분류 기준 유형 설명 스레드 안전성 Thread-Safe 멀티스레드 환경에서 안전한 초기화 Non-Thread-Safe 단일 스레드 환경에서만 안전 구현 방식 Simple Lazy 기본적인 null 체크 방식 Double-Checked Locking 성능 최적화된 스레드 안전 방식 Holder Pattern JVM 클래스 로딩 활용 방식 적용 범위 Object-Level 개별 객체 단위 지연 초기화 Collection-Level 컬렉션 전체 지연 초기화 Property-Level 객체 속성 단위 지연 초기화 사용 시점 및 조건별 분석 지연 초기화(Lazy Initialization) 는 객체의 생성 시점을 실제로 필요한 순간까지 미루는 전략이다. 이는 성능 최적화, 리소스 절약, 초기 로딩 속도 개선을 목적으로 사용되며, 특히 고비용 객체나 조건부로 필요한 객체에 매우 효과적이다.\n상황 설명 지연 초기화 사용 이유 대표 예시 객체 생성 비용이 큰 경우 외부 네트워크 연결, 파일 I/O, 무거운 계산이 필요한 경우 시작 성능 저하 방지, 필요 시점까지 자원 소비 미루기 DB 연결 객체, 대용량 이미지, 설정 파일 파서 객체가 사용되지 않을 가능성이 있는 경우 조건에 따라 객체가 전혀 필요하지 않을 수 있음 불필요한 객체 생성을 방지 사용자의 특정 기능 클릭 전까진 로드하지 않는 화면 구성 요소 앱 시작 속도가 중요한 경우 초기 로딩 시간이 중요한 웹/앱/서버리스 환경 초기에 최소 자원만 사용해 빠른 구동 유도 Spring ApplicationContext, Android 앱 초기 로딩 멀티스레드 환경에서 Singleton 구현 시 Singleton 객체를 안전하게 한 번만 생성해야 함 지연 초기화는 Singleton 패턴에서 자주 사용됨 Double-Checked Locking, Holder Idiom 메모리 제한이 있는 환경 모바일, 임베디드, WAS 등 자원 사용 시점을 조절하여 메모리 절약 가능 Android 의 ViewModel 이나 이미지 Lazy Load 사용자 요청 기반 객체 생성 시 특정 사용자의 요청이 발생한 후에만 특정 객체를 생성 요청 수에 따라 유동적으로 객체를 생성하여 자원 낭비 최소화 REST API 요청 시 응답용 객체 지연 생성 실무 적용 예시 적용 분야 예시/기술 사용 목적 기대 효과 데이터베이스 연결 JDBC, Connection Pool, Redis Client 고비용 연결 객체를 사용 시점까지 지연 생성 초기 자원 사용 최소화, 연결 비용 분산 ORM 프레임워크 Hibernate, JPA (FetchType.LAZY) 연관 엔티티 지연 로딩 N+1 쿼리 방지, 메모리 효율성 Spring Framework @Lazy 어노테이션, Bean 지연 주입 DI 시 불필요한 객체 생성을 지연 시작 속도 향상, 리소스 절약 싱글톤 패턴 Holder Idiom, DCL, Enum Singleton 글로벌 인스턴스의 최초 사용 시점에 안전하게 생성 스레드 안전성 확보, 메모리 절약 웹 프론트엔드 Intersection Observer, Lazy Load Images 이미지 및 리소스의 지연 렌더링 초기 페이지 로딩 속도 향상, UX 개선 캐시 시스템 Redis, Ehcache, LRU 캐시 캐시 데이터의 동적 로딩 불필요한 캐시 점유 방지, 메모리 최적화 설정/환경 로딩 .properties 파일 로딩, YAML 파싱 설정 값의 필요 시점 로딩 애플리케이션 시작 시간 단축 GUI 애플리케이션 Virtual Proxy Pattern 고용량 리소스 (이미지, 폰트 등) 의 렌더링 시점 지연 메모리 효율성, UI 반응성 향상 파일 I/O Lazy File Reader, Streaming File Reader 대용량 파일의 필요한 부분만 순차적으로 읽기 메모리 사용 최소화, 성능 안정성 확보 마이크로서비스 Spring Cloud, Eureka 서비스 인스턴스 지연 등록 / 디스커버리 적용 시점 최적화 콜드 스타트 최적화, 서비스 경량화 모바일 앱 Android/iOS 지연 리소스 로딩, ViewModel Factory 이미지/애니메이션/비디오 등의 사용 시점에만 로딩 배터리 수명 연장, 앱 실행 속도 향상 AI/ML 시스템 모델 로딩 on-demand, Tensor Streaming 모델 또는 데이터셋의 부분 로딩 메모리 최적화, 연산 자원 분산 활용 사례 사례 1: 데이터베이스 연결 지연 초기화 시스템 구성: 애플리케이션 시작 시 DB 연결을 바로 생성하지 않고, 실제 쿼리 요청 시점에 연결 생성\n시스템 구성 다이어그램\n1 2 3 4 5 6 7 8 9 10 Client | v DBConnectionManager | v (초기화 여부 확인, 필요시 DB 연결 생성 및 캐싱) | v Return DB Connection Workflow: 클라이언트가 DB 연결을 요청하면, DBConnectionManager 가 연결이 생성되었는지 확인하고, 없으면 생성 후 캐싱, 이후 요청 시 캐시된 연결 반환\n주제의 역할: 불필요한 DB 연결 생성 방지, 메모리 및 시작 속도 최적화\n유무 차이: 지연 초기화 미적용 시 시작 시점에 모든 DB 연결 생성, 메모리 및 시작 속도 저하. 적용 시 실제 필요 시점에만 연결 생성, 효율적 리소스 관리\n사례 2: ORM 에서의 지연 로딩 활용 사례 시스템 구성: Spring Boot + JPA + Hibernate 를 사용한 전자상거래 시스템\ngraph LR A[사용자 요청] --\u003e B[Controller] B --\u003e C[Service Layer] C --\u003e D[Repository] D --\u003e E[(Database)] D --\u003e F[JPA Entity] F --\u003e G[Lazy Collection] G --\u003e H[프록시 객체] 시스템 구성 요소:\n엔티티 계층: User, Order, OrderItem 엔티티 프록시 계층: Hibernate 가 생성하는 프록시 객체 서비스 계층: 비즈니스 로직 처리 영속성 계층: JPA Repository 를 통한 데이터 접근 Workflow:\n사용자 정보 조회 요청 User 엔티티 로드 (주문 정보는 지연 로딩) 필요 시점에 주문 컬렉션 접근 프록시 객체가 실제 데이터 로드 SQL 쿼리 실행 및 결과 반환 지연 초기화의 역할:\n메모리 효율성: 사용자 정보만 필요한 경우 주문 데이터 로딩 방지 성능 최적화: 초기 쿼리 단순화로 응답 시간 단축 선택적 로딩: 실제 필요한 연관 데이터만 로드 지연 초기화 유무에 따른 차이점:\n구분 즉시 로딩 지연 로딩 초기 쿼리 JOIN 으로 모든 데이터 로드 기본 엔티티만 로드 메모리 사용량 높음 (모든 연관 데이터) 낮음 (필요한 데이터만) 초기 응답시간 느림 빠름 추가 쿼리 없음 필요 시 발생 적합한 상황 연관 데이터를 항상 사용 연관 데이터를 가끔 사용 사례 2: 전자상거래 플랫폼의 상품 정보 시스템 온라인 쇼핑몰에서 상품 상세 정보를 효율적으로 관리하는 시스템을 구축.\n시스템 구성:\ngraph TB A[Product Controller] --\u003e B[Product Service] B --\u003e C[Product Repository] C --\u003e D[Database] B --\u003e E[Lazy Image Loader] B --\u003e F[Lazy Review Loader] E --\u003e G[Image Storage] F --\u003e H[Review Database] Workflow:\n사용자가 상품 목록 요청 기본 상품 정보만 로드 (이름, 가격, 간단 설명) 사용자가 특정 상품 클릭 시 상세 정보 지연 로딩 이미지와 리뷰는 별도의 지연 초기화로 관리 필요에 따라 추가 정보 동적 로딩 역할:\n성능 최적화: 초기 페이지 로딩 시간 단축 대역폭 절약: 필요한 데이터만 전송 사용자 경험 향상: 빠른 응답으로 UX 개선 사례 3: 웹 애플리케이션에서의 사용자 프로필 이미지 로딩 상황: 웹 애플리케이션에서 사용자 목록을 표시할 때, 각 사용자의 프로필 이미지를 함께 표시한다. 그러나 이미지 파일은 용량이 크고, 모든 사용자가 이미지를 가지고 있는 것은 아니다.\n문제점: 모든 사용자의 이미지를 한 번에 로딩하면, 네트워크 대역폭과 메모리 사용량이 급증하여 성능 저하가 발생할 수 있다.\n해결 방안: 지연 초기화를 사용하여, 사용자의 프로필 이미지가 실제로 필요할 때 (예: 사용자가 해당 이미지를 클릭하거나, 상세 정보를 볼 때) 만 이미지를 로딩한다.\n시스템 구성 다이어그램:\n1 [사용자 요청] --\u003e [웹 서버] --\u003e [이미지 로딩 로직] --\u003e [이미지 캐시] --\u003e [이미지 저장소] Workflow:\n사용자 목록을 요청하면, 웹 서버는 사용자 정보만 반환하고, 이미지 URL 은 포함하되 이미지는 로딩하지 않는다. 사용자가 특정 사용자의 이미지를 요청하면, 이미지 로딩 로직이 동작하여 이미지 캐시를 확인한다. 캐시에 이미지가 없으면, 이미지 저장소에서 이미지를 로딩하고 캐시에 저장한 후 반환한다. 다음 요청부터는 캐시된 이미지를 사용하여 빠르게 응답한다. 역할:\n지연 초기화: 이미지 로딩 시점을 지연시켜 초기 로딩 시간을 단축하고, 불필요한 리소스 사용을 방지한다. 캐시: 자주 요청되는 이미지를 캐시에 저장하여 성능을 향상시킨다. 구현 예시 JPA 지연 로딩 구현 (Java) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 // 엔티티 정의 @Entity public class User { @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; private String name; private String email; // 지연 로딩 설정 @OneToMany(mappedBy = \"user\", fetch = FetchType.LAZY) private List\u003cOrder\u003e orders = new ArrayList\u003c\u003e(); // 생성자, getter, setter public User() {} public User(String name, String email) { this.name = name; this.email = email; } // Lazy 로딩 확인 메서드 public List\u003cOrder\u003e getOrders() { // Hibernate는 이 시점에서 프록시를 통해 실제 데이터 로드 return orders; } } @Entity public class Order { @Id @GeneratedValue(strategy = GenerationType.IDENTITY) private Long id; private LocalDateTime orderDate; private BigDecimal totalAmount; @ManyToOne(fetch = FetchType.LAZY) @JoinColumn(name = \"user_id\") private User user; // 생성자, getter, setter public Order() {} public Order(LocalDateTime orderDate, BigDecimal totalAmount) { this.orderDate = orderDate; this.totalAmount = totalAmount; } } // 서비스 계층에서의 활용 @Service @Transactional public class UserService { @Autowired private UserRepository userRepository; // 사용자 기본 정보만 조회 public User getUserBasicInfo(Long userId) { return userRepository.findById(userId).orElse(null); // 이 시점에서는 주문 정보가 로드되지 않음 } // 사용자와 주문 정보 함께 조회 public User getUserWithOrders(Long userId) { User user = userRepository.findById(userId).orElse(null); if (user != null) { // 이 시점에서 지연 로딩이 트리거됨 int orderCount = user.getOrders().size(); System.out.println(\"User has \" + orderCount + \" orders\"); } return user; } // N+1 문제 해결을 위한 페치 조인 사용 @Query(\"SELECT u FROM User u LEFT JOIN FETCH u.orders WHERE u.id = :userId\") public User getUserWithOrdersOptimized(@Param(\"userId\") Long userId) { return userRepository.findUserWithOrdersById(userId); } } // 스레드 안전한 지연 초기화 구현 public class ThreadSafeLazyInitializer\u003cT\u003e { private volatile T instance; private final Supplier\u003cT\u003e supplier; public ThreadSafeLazyInitializer(Supplier\u003cT\u003e supplier) { this.supplier = supplier; } public T getInstance() { // Double-checked locking 패턴 if (instance == null) { synchronized (this) { if (instance == null) { instance = supplier.get(); } } } return instance; } } // 사용 예시 public class DatabaseConnectionManager { private final ThreadSafeLazyInitializer\u003cDataSource\u003e dataSourceLazy; public DatabaseConnectionManager() { this.dataSourceLazy = new ThreadSafeLazyInitializer\u003c\u003e(() -\u003e { // 비용이 높은 DataSource 초기화 HikariConfig config = new HikariConfig(); config.setJdbcUrl(\"jdbc:mysql://localhost:3306/mydb\"); config.setUsername(\"user\"); config.setPassword(\"password\"); return new HikariDataSource(config); }); } public DataSource getDataSource() { return dataSourceLazy.getInstance(); } } 웹 이미지 지연 로딩 구현 (JavaScript) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 // 현대적인 브라우저 지원 확인 및 폴백 구현 class LazyImageLoader { constructor() { this.images = document.querySelectorAll('img[loading=\"lazy\"]'); this.imageObserver = null; // 브라우저 네이티브 지원 확인 if ('loading' in HTMLImageElement.prototype) { // 네이티브 지연 로딩 지원 this.setupNativeLazyLoading(); } else { // 폴백: Intersection Observer 사용 this.setupObserverLazyLoading(); } } setupNativeLazyLoading() { // 네이티브 지연 로딩 사용 시 추가 최적화 this.images.forEach(img =\u003e { img.addEventListener('load', () =\u003e { img.classList.add('loaded'); }); }); } setupObserverLazyLoading() { // Intersection Observer를 사용한 폴백 구현 if ('IntersectionObserver' in window) { this.imageObserver = new IntersectionObserver((entries, observer) =\u003e { entries.forEach(entry =\u003e { if (entry.isIntersecting) { const img = entry.target; this.loadImage(img); observer.unobserve(img); } }); }, { rootMargin: '50px 0px', // 뷰포트 진입 50px 전에 로드 threshold: 0.01 }); this.images.forEach(img =\u003e { this.imageObserver.observe(img); }); } else { // 최종 폴백: 스크롤 이벤트 사용 this.setupScrollLazyLoading(); } } loadImage(img) { // 실제 이미지 로딩 const src = img.dataset.src; const srcset = img.dataset.srcset; if (src) { img.src = src; } if (srcset) { img.srcset = srcset; } img.classList.add('loading'); img.addEventListener('load', () =\u003e { img.classList.remove('loading'); img.classList.add('loaded'); }); img.addEventListener('error', () =\u003e { img.classList.add('error'); }); } setupScrollLazyLoading() { // 스크롤 기반 폴백 (성능상 권장하지 않음) let ticking = false; const checkImages = () =\u003e { this.images.forEach(img =\u003e { if (this.isInViewport(img)) { this.loadImage(img); } }); ticking = false; }; const requestTick = () =\u003e { if (!ticking) { requestAnimationFrame(checkImages); ticking = true; } }; window.addEventListener('scroll', requestTick); window.addEventListener('resize', requestTick); } isInViewport(element) { const rect = element.getBoundingClientRect(); return rect.top \u003c window.innerHeight \u0026\u0026 rect.bottom \u003e 0; } } // 페이지 로드 시 초기화 document.addEventListener('DOMContentLoaded', () =\u003e { new LazyImageLoader(); }); // React 컴포넌트에서의 지연 로딩 구현 import React, { useState, useEffect, useRef } from 'react'; const LazyImage = ({ src, alt, className, placeholder }) =\u003e { const [imageSrc, setImageSrc] = useState(placeholder); const [imageRef, setImageRef] = useState(); const [loaded, setLoaded] = useState(false); useEffect(() =\u003e { let observer; if (imageRef \u0026\u0026 imageSrc === placeholder) { observer = new IntersectionObserver( entries =\u003e { entries.forEach(entry =\u003e { if (entry.isIntersecting) { setImageSrc(src); observer.unobserve(imageRef); } }); }, { threshold: 0.1 } ); observer.observe(imageRef); } return () =\u003e { if (observer \u0026\u0026 observer.unobserve) { observer.unobserve(imageRef); } }; }, [imageRef, imageSrc, placeholder, src]); return ( \u003cimg ref={setImageRef} src={imageSrc} alt={alt} className={`${className} ${loaded ? 'loaded' : 'loading'}`} onLoad={() =\u003e setLoaded(true)} /\u003e ); }; export default LazyImage; Python functools.lru_cache 와 Lazy Initialization 1 2 3 4 5 6 7 8 9 10 from functools import lru_cache @lru_cache(maxsize=1) def get_db_connection(): print(\"Initializing DB connection\") return Database.connect(…) def query_user(id): conn = get_db_connection() # execute query … 첫 호출 시 DB 연결 생성되고, 이후 재사용된다. lru_cache 는 내부적으로 meoosized lazy-init 역할 수행. 실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점 카테고리 고려사항 설명 권장사항 🧩 설계 관점 적용 대상 선별 모든 객체가 아닌, 비용이 큰 객체에만 지연 초기화를 적용해야 효과적 고비용 객체 (DB 연결, 파일, 외부 API 등) 에만 적용 초기화 비용 분석 생성 시간이나 리소스 소비가 큰 경우에만 Lazy 전략이 유효 1ms 이상 소요되거나 메모리 점유 높은 객체 우선 적용 사용 빈도 평가 자주 사용되는 객체에 Lazy 적용 시 오히려 성능 저하 가능 사용률 50% 이하 객체 우선 고려 순환 참조 가능성 의존 객체 간의 지연 생성 시, 순환 참조 또는 데드락 발생 가능성 있음 DI 설계 또는 팩토리 패턴으로 의존성 명확히 분리 ⚙ 구현 관점 스레드 안전성 확보 멀티스레드 환경에서 중복 생성 방지 필요 DCL(Double-Checked Locking), 정적 내부 클래스 (Holder Idiom), volatile 변수 활용 예외 처리 전략 초기화 중 예외 발생 시 서비스 전체에 영향을 줄 수 있음 예외 래핑, 재시도 로직, Circuit Breaker 등 복구 전략 설계 자원 반환 고려 지연 생성된 객체가 장기 유지되면 메모리 누수 위험 객체 생명주기 추적, WeakReference, 명시적 해제 설계 캐시 연동 최적화 지연 생성과 캐싱 전략을 결합하면 성능 시너지 발생 Lazy + Memoization 패턴, 캐시 미스 방지 로직 활용 🧪 테스트 관점 테스트 설계 복잡성 Lazy 객체는 생성 시점이 달라 테스트 재현이 어려움 Mock 객체 주입, DI 설계, 테스트 전용 초기화 전략 활용 동시성 테스트 필수 동기화 누락 시 테스트에서는 잘 드러나지 않는 오류 발생 가능 멀티스레드 단위/통합 테스트 설계 및 자동화 성능 검증 필요 Lazy 도입으로 실질적인 성능 향상이 되었는지 확인 필요 APM 도구, 벤치마크 테스트 등을 통한 전후 비교 측정 📋 문서/운영 관점 문서화 및 팀 지식 공유 객체 생성 시점, 예외 처리 흐름 등이 모호해질 수 있음 클래스 수준 주석, 설계 다이어그램, 지연 초기화 명시 문서 작성 운영 중 모니터링 Lazy 로딩 지연 또는 예외가 장애로 이어질 수 있음 초기화 시점 로그 기록, 메트릭 수집, 알림 시스템 연동 콜드 스타트 대응 서버리스/컨테이너 기반 환경에서 Lazy 객체 로딩이 초기 응답 시간에 영향 Pre-warm 전략, Init Container 활용, 헬스체크 지연 로딩 고려 🧱 아키텍처 연계 프레임워크와의 통합 Spring,.NET 등은 Lazy 로딩을 프레임워크에서 지원 @Lazy, @Bean(lazyInit = true), DI 컨테이너 연계 설정 다른 패턴과의 조합 고려 싱글톤, 팩토리, 캐시, DI 등과 함께 사용될 때 설계 복잡도 상승 Lazy + Singleton, Lazy + Factory 조합 시 설계 명확화 필요 Lazy Initialization 은 잘못 적용하면 오히려 성능을 악화시키거나 동시성 문제를 유발할 수 있음 적절한 대상 선정, 예외 처리, 테스트 전략, 운영 가시성 확보가 핵심 프레임워크 기능 적극 활용 및 설계 문서화로 유지보수성과 팀 협업 효율 증대 최적화하기 위한 고려사항 및 주의할 점 카테고리 고려사항 설명 권장사항 메모리 관리 객체 크기 최적화 불필요한 필드나 중첩 객체는 메모리 사용량을 증가시킴 경량 객체 설계, DTO 분리 등 GC 고려 초기화된 객체가 장기간 참조되면 GC 회수가 어려움 WeakReference, SoftReference, 캐시 만료 전략 사용 캐시 전략 지연 초기화된 객체를 재사용할 경우 캐시 필요 LRU 캐시 또는 전용 캐시 메커니즘 활용 CPU 및 처리 비용 초기화 로직 분산 계산 비용이 크거나 블로킹 연산이 포함된 초기화는 병목 유발 별도 스레드 또는 비동기 초기화 적용 불필요 초기화 방지 사용되지 않을 객체를 무조건 초기화하지 않도록 방지 조건문 또는 이벤트 기반 초기화 설계 초기화 비용 관리 초기에 비용이 너무 큰 객체는 지연화보다 선제적 초기화가 더 효과적일 수 있음 비용 - 효과 분석 기반 혼합 전략 적용 (Lazy + Preload) 스레드 안전성/동기화 Lock 오버헤드 DCL 또는 synchronized 사용 시 과도한 락으로 성능 저하 정적 내부 클래스 (Holder Idiom), CAS 또는 lock-free 설계 적용 예외 처리 및 복구 초기화 중 예외가 발생하면 객체 일관성이 깨질 수 있음 재시도 메커니즘, 기본값 제공, Circuit Breaker 패턴 적용 Traceability 언제 객체가 생성되었는지 추적 어려움 → 장애 진단 어려움 초기화 시점에 로깅, TraceId 연동, 이벤트 히스토리 기록 I/O 및 외부 자원 네트워크/DB 비용 최적화 초기화가 외부 API, DB 접근 등 포함 시 지연시간 증가 커넥션 풀, 배치 요청, Prefetch 전략 적용 배치 로딩 전략 여러 외부 자원을 개별적으로 지연 초기화하면 오히려 전체 로딩이 느려짐 일괄 로딩 (Batch Fetch), 프리페칭 (Prefetch) 전략 병행 사용자 경험 로딩 피드백 제공 사용자 요청 시 객체 생성되며 시간이 지연될 수 있음 스켈레톤 UI, 로딩 인디케이터, 프로그레스 바 구현 초기화 타이밍 최적화 사용자 체감 지연을 최소화해야 함 사용자 이벤트 기반 초기화 (예: 클릭, 스크롤), UI 프리페치 활용 운영 및 관측 성능 측정 및 모니터링 Lazy 적용 전후 성능 차이 확인 없이는 최적화 판단 어려움 APM 도구, Custom Metric, Java JMH, Core Web Vitals 등 활용 콜드 스타트 대응 서버리스, 컨테이너 환경에선 Lazy 객체 초기화가 응답 지연의 원인이 됨 Init Container, Pre-warming, 헬스체크 지연 초기화 제외 전략 전략 유연성 모든 대상에 Lazy 를 적용하면 오히려 성능 저하 발생 가능 비용 - 효율 분석, 사용률 기반 예측 로딩 전략 (ML 기반 로더 포함) 주제와 관련하여 주목할 내용 카테고리 주제 항목 설명 설계 패턴 프록시 패턴 Virtual Proxy 실제 객체 대신 프록시를 통해 객체를 지연 생성하는 구조 구현 팩토리 패턴 Lazy Factory 객체 생성 책임을 분리하면서 지연 시점 제어 가능 Lazy Initialization Pattern Lazy 자체를 패턴으로 활용하여 설계에 반영 Singleton, Factory 와 함께 자주 사용됨 언어별 지원 Kotlin by lazy Kotlin 언어 수준에서 제공하는 스레드 안전한 Lazy 기능 Java Holder Pattern JVM 클래스 로딩 메커니즘을 활용한 Lazy 구현 방식 C# Lazy .NET 에서 표준으로 제공하는 Lazy 객체 래퍼 Go sync.Once 한 번만 실행되는 스레드 안전 초기화 도구 동시성 제어 스레드 안전성 Double-Checked Locking 멀티스레드에서 초기화 중복을 방지하면서 성능을 최적화하는 대표 기법 락프리 프로그래밍 CAS(Compare-And-Swap) 고성능 동시성 제어를 위한 락프리 지연 초기화 구현 동기화 적용 synchronized, volatile 기본적인 동기화 수단, 실무에서 조합하여 사용되는 저수준 제어 기법 성능 최적화 메모리 관리 GC 절감, 객체 수명 관리 객체 생성을 최소화해 힙 메모리 사용을 줄이고 GC 부담 완화 캐시 전략 Memoization 연산 결과를 캐시에 저장하여 중복 계산을 방지하고 응답 시간 단축 적응형 로딩 ML 기반 예측 로딩 사용자 행동 패턴에 기반한 Lazy 시점 조정 성능 측정 Core Web Vitals (LCP) 웹 성능 지표를 통해 지연 로딩 효과를 정량적으로 분석 웹 기술 Intersection Observer 뷰포트 진입 감지 이미지/컴포넌트가 화면에 보일 때만 로딩하는 Lazy Loading API Service Worker 오프라인 캐싱 + 지연 로딩 결합 Lazy 객체 및 리소스를 사전 캐시하여 네트워크 부하 분산 함수형 개념 Lazy Evaluation 지연 평가 함수형 언어에서 표현식의 실제 계산을 필요 시점으로 미루는 개념 (Haskell 등에서 기본 개념) ORM 기술 Hibernate/JPA 프록시 객체를 통한 Lazy Loading 연관 엔티티를 프록시로 감싸 SQL 실행을 지연 N+1 문제 잘못된 Lazy 설정 시 발생하는 성능 문제 Fetch Join, Batch Fetch 등으로 보완 필요 JIT/컴파일 Just-In-Time Compilation 런타임 시점에 필요한 코드만 컴파일 지연 초기화와 유사한 \" 필요할 때만 실행 \" 전략 구현 가능 반드시 학습해야할 내용 카테고리 주제 항목 설명 기초 이론 디자인 패턴 GoF 패턴, 프록시, 팩토리 메서드 패턴 객체 생성을 지연시키기 위한 구조 설계의 기초 개념 메모리 관리 JVM 메모리 모델, GC Heap/Stack 구조 및 가비지 컬렉션 원리 이해 동시성 처리 스레드 안전성 동기화 메커니즘 (synchronized, volatile) Lazy Initialization 에서 멀티스레드 안전성 확보 방법 락킹 전략 DCL, 락프리 (CAS), Holder Idiom 고급 동시성 제어 및 Lazy Singleton 구현 기법 설계 패턴 Lazy + Singleton Lazy Singleton 구현 전략 초기화 시점 통제와 인스턴스 단일성 유지 결합 Lazy + Factory / Builder 객체 생성 책임 캡슐화와 Lazy 적용 유연한 객체 생성을 위해 팩토리 메서드 내 Lazy 적용 프록시 패턴 Virtual Proxy 구현 실제 객체 대신 지연 생성되는 프록시 구조 언어별 기능 Java / Kotlin / C# Holder Pattern, by lazy, Lazy 각 언어에서 제공하는 표준 Lazy 초기화 문법과 스레드 안전성 보장 Go sync.Once Go 언어의 멀티스레드 환경에서의 Lazy 초기화 구조 실무 적용 전략 DI 프레임워크 연동 Spring @Lazy, DI 컨테이너 전략 Spring 등에서 Lazy Bean 주입 및 초기화 최적화 테스트 전략 Lazy 객체 테스트, Mock/Stub 구성 지연 초기화된 객체의 테스트 설계 및 검증 방법 예외 처리 전략 초기화 실패 대응 초기화 실패 시 재시도, 기본값 처리 등 서비스 안정성 확보 함수형 개념 Lazy Evaluation 함수형 언어에서의 지연 평가 개념 Haskell, Scala 등에서 표현식 실행 시점을 미루는 평가 전략 성능 최적화 메모리 최적화 객체 수명 관리, 힙 메모리 절약 불필요한 객체 생성을 피하고 GC 부담을 줄이기 위한 Lazy 활용 캐싱 전략 Lazy + Memoization 객체/결과 재사용을 위한 캐시 결합 전략 자원 최적화 Lazy + 비동기 처리, Lazy + 배치 로딩 고비용 초기화를 별도 스레드나 배치 처리로 분산 웹 \u0026 클라우드 브라우저 API 활용 Intersection Observer 이미지/컴포넌트 등의 지연 렌더링 구현을 위한 Viewport 감지 기술 웹 성능 측정 Core Web Vitals (LCP, FID, CLS) Lazy 로딩 효과 정량화 및 UI 반응성 최적화 메트릭 분석 코드 스플리팅 / 로딩 전략 Webpack, Rollup, Dynamic Import 초기 번들 사이즈 축소를 위한 지연 코드 로딩 전략 서버리스 환경 최적화 콜드 스타트 지연 최소화 Lazy 객체 로딩으로 인한 응답 지연을 줄이기 위한 사전 워밍업 및 Init 전략 데이터 계층 연계 ORM 지연 로딩 Hibernate/JPA Lazy Fetch 연관 엔티티를 실제 사용 시점까지 로딩 지연 N+1 문제 해결 Fetch Join, Batch Fetch 잘못된 Lazy 설정으로 발생할 수 있는 성능 문제 보완 쿼리 최적화 SQL 성능, 인덱스, Join 전략 지연 초기화된 객체의 DB 조회 시 최적화 전략 용어 정리 카테고리 용어 설명 기본 개념 Lazy Initialization 객체, 값, 리소스의 생성을 실제 사용 시점까지 미루는 초기화 패턴 Eager Initialization 객체나 값을 즉시 생성하여 초기화하는 방식 Lazy Evaluation 값이 실제로 필요한 시점까지 계산을 지연시키는 함수형 평가 기법 On-Demand Loading 요청이 있을 때만 리소스를 로드하는 방식 Predictive Loading 사용자 행동을 예측하여 선제적으로 리소스를 로드하는 방식 설계 패턴 Factory Method 객체 생성 로직을 캡슐화한 메서드 패턴 Builder Pattern 복잡한 객체 생성을 단계별로 캡슐화하는 패턴 Virtual Proxy 실제 객체 생성을 지연시키는 대리 객체를 사용하는 구조 Holder Pattern JVM 클래스 로딩 시점을 활용하여 thread-safe 하게 지연 초기화하는 방식 Double-Checked Locking (DCL) 두 번의 null 체크와 동기화를 통해 스레드 안전성과 성능을 모두 확보하는 초기화 방식 동시성 Thread Safety 멀티스레드 환경에서 단일 초기화 및 안전한 동작을 보장하는 개념 Synchronization 여러 스레드 간 공유 리소스의 동기화를 통해 상태 일관성을 유지하는 기법 Volatile Java 에서 변수의 가시성을 보장하는 키워드 CAS (Compare-And-Swap) 락 없이 원자적 연산을 수행하는 고성능 동시성 기법 언어별 지원 Kotlin by lazy Kotlin 의 thread-safe lazy delegate 프로퍼티 구문 C# Lazy C#에서 제공하는 thread-safe Lazy 초기화 유틸 클래스 Go sync.Once Go 언어에서 단 한 번만 실행되는 초기화를 보장하는 구조체 Java Supplier Java 8 의 함수형 인터페이스로, lazy 초기화를 함수형으로 구성할 수 있게 함 프레임워크 기능 @Lazy (Spring) Spring 프레임워크에서 Bean 생성을 지연시키는 어노테이션 객체 구조 Static Inner Class 외부 인스턴스를 참조하지 않고 독립적으로 동작하는 클래스로, Holder 패턴에서 사용됨 캐싱 및 자원관리 Cache 계산 결과나 객체를 저장하여 재사용함으로써 초기화를 회피하거나 성능 최적화에 사용 WeakReference GC 대상이 될 수 있는 참조 방식으로 메모리 누수를 방지 웹 기술 Intersection Observer 요소의 뷰포트 진입 여부를 감지하여 이미지나 콘텐츠의 지연 로딩 구현에 사용 Critical Rendering Path 브라우저가 HTML, CSS, JS 를 해석하고 화면에 렌더링하는 주요 경로 Above the Fold 사용자가 스크롤 없이 볼 수 있는 화면 상단 영역으로, 로딩 우선순위에 중요한 위치 LCP (Largest Contentful Paint) 사용자가 보는 주요 콘텐츠가 완전히 렌더링된 시간 FCP (First Contentful Paint) 첫 번째 텍스트, 이미지 등 콘텐츠가 렌더링되기 시작하는 시점 TTFB (Time To First Byte) 브라우저가 서버로부터 첫 바이트를 받기까지의 시간 서버리스/클라우드 Cold Start 서버리스 환경에서 초기 요청 시 함수 시작으로 인한 응답 지연 데이터베이스 N+1 문제 지연 로딩으로 인해 연관 데이터를 조회할 때 과도한 쿼리 요청이 발생하는 문제 Fetch Strategy 연관 데이터를 즉시 로딩 또는 지연 로딩할지 결정하는 JPA 전략 Persistence Context JPA 에서 엔티티 객체의 상태를 관리하는 환경 테스트 전략 Lazy 객체 테스트 지연 초기화된 객체의 상태, 생성 여부, 부작용 등을 검증하는 테스트 방법론 객체 구조 Proxy Object 실제 객체 대신 접근을 위임받는 대리 객체 (Virtual Proxy 포함) 참고 및 출처 Lazy initialization - Wikipedia Initialization-on-demand holder idiom - Wikipedia Double-checked locking - Wikipedia Lazy Loading Design Pattern - GeeksforGeeks Java Lazy Initialization - Baeldung Lazy Initialization - .NET Framework | Microsoft Learn Lazy Class - Microsoft Learn Spring Boot Lazy Initialization - Baeldung Lazy Initialization in Spring Boot - DEV Community Kotlin Delegated Properties: Lazy - KotlinLang.org Lazy Initialization for Performance in Go - GoPerf.dev The Best Way to Lazy Load Entity Attributes in Hibernate - Vlad Mihalcea Eager vs Lazy Loading in Hibernate - Baeldung 5 Techniques for Lazy Loading Images - SitePoint Lazy Loading Images – The Complete Guide - ImageKit.io Browser-level image lazy loading for the web - web.dev What is Lazy Initialization and Why is it Useful? - Stack Overflow How to Implement Thread-Safe Lazy Initialization? - Stack Overflow Java Program to Demonstrate Lazy Initialization Thread-Safe - GeeksforGeeks Mastering Lazy Initialization in Spring Boot - TowardsDev ","wordCount":"5392","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2024-12-18T10:42:00Z","dateModified":"2024-12-18T10:42:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/performance-optimization/lazy-initialization/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>Computer Science and Engineering</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/>Software Engineering</a>&nbsp;»&nbsp;<a href>Design and Architecture</a>&nbsp;»&nbsp;<a href>Software Design Patterns</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-engineering/design-and-architecture/software-design-patterns/performance-optimization/>Performance Optimization</a></div><h1 class="post-title entry-hint-parent">지연 초기화(Lazy Initialization)</h1><div class=post-description>지연 초기화는 객체나 값의 생성을 실제로 필요할 때까지 미루는 설계 패턴이다. 메모리 절약, 빠른 시작, 불필요한 연산 방지 등 자원 효율성을 극대화할 수 있지만, 최초 접근 시 지연, 예외 발생의 지연, 동시성 관리 등 주의가 필요하다.</div><div class=post-meta><span title='2024-12-18 10:42:00 +0000 UTC'>December 18, 2024</span>&nbsp;·&nbsp;26 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Software%20Engineering/Design%20and%20Architecture/Software%20Design%20Patterns/Performance%20Optimization/lazy-initialization.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#지연-초기화-lazy-initialization>지연 초기화 (Lazy Initialization)</a><ul><li><a href=#4-전체-개요-250-자-내외>4. 전체 개요 (250 자 내외)</a></li><li><a href=#핵심-개념>핵심 개념</a></li><li><a href=#배경>배경</a></li><li><a href=#목적-및-필요성>목적 및 필요성</a></li><li><a href=#주요-기능-및-역할>주요 기능 및 역할</a></li><li><a href=#특징>특징</a></li><li><a href=#핵심-원칙>핵심 원칙</a></li><li><a href=#주요-원리>주요 원리</a></li><li><a href=#작동-원리>작동 원리</a></li><li><a href=#구현-기법>구현 기법</a></li><li><a href=#장점>장점</a></li><li><a href=#단점과-문제점-그리고-해결방안>단점과 문제점 그리고 해결방안</a></li><li><a href=#도전-과제-및-해결-방안>도전 과제 및 해결 방안</a></li><li><a href=#분류에-따른-종류-및-유형>분류에 따른 종류 및 유형</a></li><li><a href=#사용-시점-및-조건별-분석>사용 시점 및 조건별 분석</a></li><li><a href=#실무-적용-예시>실무 적용 예시</a></li><li><a href=#활용-사례>활용 사례</a></li><li><a href=#구현-예시>구현 예시</a></li><li><a href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점</a></li><li><a href=#최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점</a></li><li><a href=#주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용</a></li><li><a href=#반드시-학습해야할-내용>반드시 학습해야할 내용</a></li></ul></li><li><a href=#용어-정리>용어 정리</a></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=지연-초기화-lazy-initialization>지연 초기화 (Lazy Initialization)<a hidden class=anchor aria-hidden=true href=#지연-초기화-lazy-initialization>#</a></h2><h3 id=4-전체-개요-250-자-내외>4. 전체 개요 (250 자 내외)<a hidden class=anchor aria-hidden=true href=#4-전체-개요-250-자-내외>#</a></h3><p>지연 초기화는 성능 최적화를 위한 핵심 디자인 패턴으로, 객체 생성을 지연시켜 메모리 사용량을 줄이고 애플리케이션 시작 시간을 단축한다. 프록시 패턴을 활용한 구현, 스레드 안전성 보장, ORM 에서의 지연 로딩, 웹에서의 이미지 지연 로딩 등 다양한 영역에서 활용된다. 적절한 사용 시 성능 향상을 가져오지만, 잘못 사용하면 오히려 성능 저하를 일으킬 수 있어 신중한 적용이 필요하다. 단, 멀티스레드 환경의 동시 초기화 이슈와 디버깅 난이도 증가를 고려해야 한다.</p><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><ul><li><strong>지연 초기화 (Lazy Initialization)</strong>: 객체, 값, 리소스의 생성이나 계산을 실제로 필요할 때까지 미루는 설계 패턴.</li><li>**Eager Initialization(즉시 초기화)**와 대비되는 개념으로, 즉시 초기화는 객체 생성 시점에 모든 값을 미리 초기화한다.</li><li><strong>Thread Safety(스레드 안전성)</strong>: 멀티스레드 환경에서 지연 초기화는 동기화가 필요하다.</li><li><strong>캐싱 (Caching)</strong>: 최초 계산 후 결과를 저장해 이후에는 재계산 없이 반환한다.</li></ul><h4 id=관련-개념>관련 개념<a hidden class=anchor aria-hidden=true href=#관련-개념>#</a></h4><ul><li><strong>Lazy Loading</strong>: 웹 이미지, 데이터 로딩 등 지연 초기화 응용.</li><li><strong>Virtual Proxy / Ghost / Value Holder</strong>: Lazy 초기화의 구현 방식.</li><li><strong>Initialization-on-demand holder idiom</strong>: Java 용 안전한 Lazy 싱글턴 구현.</li><li><strong>Double-checked Locking</strong>: 동기화 비용 최소화하는 다중 스레드 초기화.</li></ul><h4 id=기본-개념>기본 개념<a hidden class=anchor aria-hidden=true href=#기본-개념>#</a></h4><ul><li><strong>지연 평가 (Lazy Evaluation)</strong>: 실제로 값이 필요한 시점까지 계산이나 초기화를 지연시키는 개념.</li><li><strong>온디맨드 초기화 (On-Demand Initialization)</strong>: 요청이 있을 때만 객체를 생성하는 방식.</li><li><strong>프록시 객체 (Proxy Object)</strong>: 실제 객체를 대신하여 초기화를 지연시키는 중간 객체.</li><li><strong>가상 프록시 (Virtual Proxy)</strong>: 비용이 높은 객체 생성을 지연시키는 특별한 형태의 프록시.</li></ul><h4 id=실무-구현을-위한-연관성>실무 구현을 위한 연관성<a hidden class=anchor aria-hidden=true href=#실무-구현을-위한-연관성>#</a></h4><ul><li><strong>메모리 관리</strong>: 불필요한 메모리 사용을 방지하여 시스템 자원을 효율적으로 활용</li><li><strong>성능 최적화</strong>: 애플리케이션 시작 시간 단축과 응답성 향상</li><li><strong>스레드 안전성</strong>: 멀티스레드 환경에서의 동시성 제어</li><li><strong>예외 처리</strong>: 지연된 초기화 과정에서 발생할 수 있는 예외 상황 관리</li></ul><h3 id=배경>배경<a hidden class=anchor aria-hidden=true href=#배경>#</a></h3><p>지연 초기화 패턴이 등장한 배경은 다음과 같다:</p><ul><li><strong>메모리 제약</strong>: 초기 컴퓨팅 환경에서 제한된 메모리 자원을 효율적으로 사용해야 하는 필요성이 있었다.</li><li><strong>성능 요구사항</strong>: 애플리케이션 시작 시간을 단축하고 사용자 응답성을 향상시키기 위한 요구가 증가했다.</li><li><strong>객체지향 프로그래밍의 발전</strong>: 복잡한 객체 관계와 상속 구조에서 효율적인 메모리 관리 필요성이 대두되었다.</li><li><strong>웹 기술의 발전</strong>: 인터넷과 웹 애플리케이션의 발전으로 네트워크 자원 최적화가 중요해졌다.</li></ul><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><h4 id=목적>목적<a hidden class=anchor aria-hidden=true href=#목적>#</a></h4><ol><li><strong>성능 최적화</strong>: 애플리케이션 시작 시간 단축</li><li><strong>메모리 효율성</strong>: 불필요한 메모리 사용 방지</li><li><strong>자원 절약</strong>: CPU 와 네트워크 자원의 효율적 활용</li><li><strong>사용자 경험 향상</strong>: 빠른 응답성 제공</li></ol><h4 id=필요성>필요성<a hidden class=anchor aria-hidden=true href=#필요성>#</a></h4><ul><li><strong>대용량 데이터 처리</strong>: 큰 크기의 객체나 데이터를 다룰 때</li><li><strong>조건부 사용</strong>: 특정 조건에서만 필요한 리소스</li><li><strong>네트워크 자원</strong>: 외부 API 나 데이터베이스 연결</li><li><strong>비용이 높은 연산</strong>: 복잡한 계산이나 초기화 과정</li></ul><h3 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><h4 id=주요-기능>주요 기능<a hidden class=anchor aria-hidden=true href=#주요-기능>#</a></h4><ol><li><strong>지연된 객체 생성</strong>: 첫 번째 접근 시점에서 객체 생성</li><li><strong>자동 캐싱</strong>: 생성된 객체의 재사용을 위한 캐시 메커니즘</li><li><strong>투명성</strong>: 클라이언트 코드의 변경 없이 지연 로딩 적용</li><li><strong>조건부 초기화</strong>: 특정 조건을 만족할 때만 초기화 수행</li></ol><h4 id=역할>역할<a hidden class=anchor aria-hidden=true href=#역할>#</a></h4><ul><li><strong>메모리 관리자</strong>: 메모리 사용량 최적화</li><li><strong>성능 최적화 도구</strong>: 시스템 성능 향상</li><li><strong>자원 관리자</strong>: 시스템 자원의 효율적 배분</li><li><strong>사용자 경험 개선</strong>: 응답성 및 로딩 시간 개선</li></ul><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><ol><li><strong>지연된 실행</strong>: 실제 필요한 시점까지 초기화 지연</li><li><strong>투명한 인터페이스</strong>: 클라이언트는 지연 로딩을 인식하지 못함</li><li><strong>일회성 초기화</strong>: 한 번 초기화되면 결과를 재사용</li><li><strong>조건부 실행</strong>: 사용되지 않으면 초기화되지 않음</li><li><strong>메모리 효율성</strong>: 필요한 만큼만 메모리 사용</li></ol><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><ol><li><strong>필요 시점 초기화</strong>: 실제 사용되는 순간에 초기화</li><li><strong>단일 책임</strong>: 초기화 로직과 비즈니스 로직의 분리</li><li><strong>투명성</strong>: 클라이언트 코드의 변경 최소화</li><li><strong>일관성</strong>: 동일한 객체에 대해 일관된 결과 보장</li><li><strong>효율성</strong>: 최소한의 자원으로 최대한의 효과</li></ol><h3 id=주요-원리>주요 원리<a hidden class=anchor aria-hidden=true href=#주요-원리>#</a></h3><ul><li><strong>객체 생성 요청 시점에 초기화 여부 확인</strong></li><li><strong>초기화되지 않았다면 객체 생성 및 캐싱</strong></li><li><strong>이후 요청 시 캐시된 객체 반환</strong></li></ul><pre class=mermaid>graph TD
    A[클라이언트 요청] --&gt; B{초기화 여부 확인}
    B --&gt;|미초기화| C[객체 생성 및 초기화]
    B --&gt;|초기화됨| D[캐시된 객체 반환]
    C --&gt; E[객체 캐싱]
    E --&gt; F[객체 반환]
    D --&gt; F
    F --&gt; G[클라이언트 사용]
</pre><h3 id=작동-원리>작동 원리<a hidden class=anchor aria-hidden=true href=#작동-원리>#</a></h3><pre class=mermaid>sequenceDiagram
    participant Client
    participant LazyHolder
    Client-&gt;&gt;LazyHolder: get()
    alt not initialized
        LazyHolder-&gt;&gt;LazyHolder: initialize resource
        LazyHolder--&gt;&gt;Client: return new instance
    else initialized
        LazyHolder--&gt;&gt;Client: return cached instance
    end
</pre><ol><li><strong>접근자 메서드 호출</strong>: 클라이언트가 객체에 접근</li><li><strong>초기화 상태 확인</strong>: null 체크 또는 플래그 확인</li><li><strong>조건부 초기화</strong>: 미초기화 시 객체 생성</li><li><strong>결과 캐싱</strong>: 생성된 객체를 저장</li><li><strong>객체 반환</strong>: 초기화된 객체 제공</li></ol><p>지연 초기화의 작동 원리는 첫 번째 접근 시점에서 실제 초기화를 수행하고, 이후 요청에서는 캐시된 객체를 반환하는 메커니즘을 기반으로 한다.</p><h3 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h3><table><thead><tr><th><strong>구현 기법</strong></th><th><strong>정의 및 특징</strong></th><th><strong>장점</strong></th><th><strong>단점</strong></th><th><strong>대표 사용 사례</strong></th></tr></thead><tbody><tr><td><strong>단순 지연 초기화</strong><br>(Simple Lazy Initialization)</td><td>가장 기본적인 구현 방식. 객체가 <code>null</code> 일 때만 생성<br>동기화 없음</td><td>구현이 매우 간단함</td><td>멀티스레드 환경에서 <strong>race condition</strong> 발생 가능</td><td>싱글스레드 환경에서의 단순 객체 캐싱</td></tr><tr><td><strong>동기화된 초기화</strong><br>(Synchronized Initialization)</td><td>객체 접근 메서드 또는 블록에 락 (synchronized, mutex 등) 을 적용</td><td>멀티스레드 환경에서도 안전함</td><td>매번 락 획득으로 인해 <strong>성능 저하</strong> 가능</td><td>멀티스레드 환경의 초기화가 간헐적으로 필요한 경우</td></tr><tr><td><strong>이중 검사 잠금</strong><br>(Double-Checked Locking)</td><td>락을 두 번 검사해 최소한의 락 획득으로 성능 개선<br><code>volatile</code> 등과 함께 사용</td><td>성능과 동기화 안전성 모두 확보 가능</td><td>구현 복잡도 높고 언어별 메모리 모델 이해 필요</td><td>고성능이 요구되는 싱글턴, 캐시 객체 등</td></tr><tr><td><strong>정적 내부 클래스</strong><br>(Holder Pattern)</td><td>클래스 로딩 시점에 객체 생성 보장.<br>JVM/언어의 lazy-loading 메커니즘 활용</td><td>스레드 안전 + 성능 우수<br>초기화 순서 보장</td><td>내부 구조나 로딩 시점 이해가 어려울 수 있음</td><td>Bill Pugh Singleton, 라이브러리 초기화 등</td></tr><tr><td><strong>함수형 지연 초기화</strong><br>(Functional Lazy Initialization)</td><td><code>Supplier</code> / <code>Lambda</code> / <code>Thunk</code> 등을 이용한 명시적 지연 평가</td><td>코드 간결성, 재사용성, 테스트 유연성 높음</td><td>일부 언어에서는 함수형 개념에 익숙하지 않을 수 있음</td><td>Kotlin <code>by lazy</code>, JavaScript 클로저, Scala <code>lazy val</code> 등</td></tr></tbody></table><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>메모리 효율성</td><td>불필요한 객체 생성을 방지하여 메모리 사용량을 최적화</td></tr><tr><td>시작 성능 향상</td><td>애플리케이션 초기 로딩 시간을 단축하여 빠른 시작 제공</td></tr><tr><td>자원 절약</td><td>CPU, 네트워크 등 시스템 자원의 효율적 사용</td></tr><tr><td>조건부 로딩</td><td>실제 필요한 경우에만 리소스를 로드하여 낭비 방지</td></tr><tr><td>확장성</td><td>대규모 시스템에서 메모리 압박 완화</td></tr><tr><td>사용자 경험 개선</td><td>빠른 응답성으로 인한 사용자 만족도 향상</td></tr></tbody></table><h3 id=단점과-문제점-그리고-해결방안>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안>#</a></h3><h4 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h4><table><thead><tr><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>복잡성 증가</td><td>코드 구조가 복잡해지고 디버깅이 어려워짐</td><td>명확한 문서화와 단위 테스트 작성</td></tr><tr><td>첫 접근 지연</td><td>첫 번째 사용 시점에서 초기화 지연 발생</td><td>중요한 리소스는 사전 초기화 고려</td></tr><tr><td>메모리 오버헤드</td><td>프록시 객체로 인한 추가 메모리 사용</td><td>경량 프록시 패턴 적용</td></tr><tr><td>스레드 안전성</td><td>멀티스레드 환경에서 동시성 문제 발생 가능</td><td>적절한 동기화 메커니즘 적용</td></tr></tbody></table><h4 id=문제점>문제점<a hidden class=anchor aria-hidden=true href=#문제점>#</a></h4><table><thead><tr><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>LazyInitializationException</td><td>ORM 세션 외부에서 지연 로딩 접근</td><td>런타임 예외 발생</td><td>스택 트레이스 확인</td><td>적절한 트랜잭션 범위 설정</td><td>즉시 로딩으로 변경 또는 DTO 사용</td></tr><tr><td>메모리 누수</td><td>캐시된 객체가 해제되지 않음</td><td>메모리 사용량 증가</td><td>메모리 프로파일링</td><td>적절한 캐시 만료 정책</td><td>WeakReference 사용</td></tr><tr><td>데드락</td><td>잘못된 동기화로 인한 교착상태</td><td>시스템 멈춤</td><td>스레드 덤프 분석</td><td>락 순서 정의</td><td>타임아웃 설정</td></tr><tr><td>N+1 쿼리</td><td>지연 로딩으로 인한 과도한 DB 쿼리</td><td>성능 저하</td><td>쿼리 로그 분석</td><td>적절한 페치 전략</td><td>배치 페칭 또는 조인 페치</td></tr></tbody></table><h3 id=도전-과제-및-해결-방안>도전 과제 및 해결 방안<a hidden class=anchor aria-hidden=true href=#도전-과제-및-해결-방안>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>도전 과제</strong></th><th><strong>원인</strong></th><th><strong>영향</strong></th><th><strong>해결 방안</strong></th></tr></thead><tbody><tr><td><strong>스레드 안전성</strong></td><td>동시 접근 시 중복 생성 위험</td><td>여러 스레드가 동시에 초기화 시도</td><td>예측 불가능한 동작, 중복 인스턴스 생성</td><td>Double-Checked Locking, <code>synchronized</code>, 정적 내부 클래스 (Holder Idiom), <code>enum</code> 싱글톤</td></tr><tr><td></td><td>메모리 가시성 문제</td><td>CPU 캐시로 인한 메모리 불일치</td><td>최신 상태를 다른 스레드에서 읽지 못함</td><td><code>volatile</code> 키워드로 변수 선언하여 가시성 보장</td></tr><tr><td></td><td>락 (lock) 사용에 따른 성능 저하</td><td>과도한 동기화 영역</td><td>처리량 저하, 병목 발생</td><td>최소화된 동기화 범위, 락 프리 알고리즘, CAS 기반 원자성 구현</td></tr><tr><td><strong>초기화 실패 처리</strong></td><td>예외 발생 시 객체 상태 불완전</td><td>생성자 내부 예외 또는 외부 의존 자원 실패</td><td>시스템 불안정, NPE 등 런타임 에러</td><td>예외 처리 후 재시도 메커니즘, Circuit Breaker, 실패 캐시 전략 적용</td></tr><tr><td><strong>순환 참조</strong></td><td>객체 간 상호 참조 지연 생성</td><td>A 가 B 를, B 가 다시 A 를 지연 참조</td><td>무한 루프, StackOverflow, 데드락</td><td>의존 관계 명확화, DI 컨테이너 사용, 순환 감지 및 리팩토링</td></tr><tr><td><strong>성능 최적화</strong></td><td>초기화 오버헤드</td><td>초기 생성 비용이 높은 경우</td><td>성능 저하, Lazy 전략 무력화</td><td>프로파일링 통한 전략 혼합 (Eager + Lazy), 캐시 적중률 향상, JIT 고려</td></tr><tr><td></td><td>캐시 미스 발생</td><td>사용 시점에 아직 객체가 준비되지 않음</td><td>응답 지연, 처리 중단 가능성</td><td>예측 가능한 시점에 미리 로딩 (Memoization), 사전 Warm-up 로직 도입</td></tr><tr><td><strong>디버깅 및 테스트</strong></td><td>객체 생성 시점 불명확</td><td>동적 로딩으로 타이밍이 비결정적</td><td>테스트 케이스 실패, 디버깅 난이도 증가</td><td>생성 로깅, 트레이싱 도구 활용, 테스트 환경에서는 Lazy 제거 혹은 Mock 주입</td></tr><tr><td><strong>클라우드 환경 적응</strong></td><td>서버리스·마이크로서비스 구조에서 비효율</td><td>호출 단위 인스턴스 생성, 콜드 스타트</td><td>초기 응답 지연, 비용 증가</td><td>컨테이너 단위 Pre-warming, Lazy 대신 Init Container, Keep-alive 전략 도입</td></tr><tr><td><strong>AI/ML 환경 최적화</strong></td><td>대규모 모델/데이터 지연 로딩 문제</td><td>지연 초기화로는 모델/데이터 메모리 요구를 커버하기 어려움</td><td>OutOfMemory, 느린 처리 속도</td><td>스트리밍 기반 로딩, 메모리 매핑, 분산 캐시 또는 모델 파티셔닝</td></tr></tbody></table><h3 id=분류에-따른-종류-및-유형>분류에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류에-따른-종류-및-유형>#</a></h3><table><thead><tr><th>분류 기준</th><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>스레드 안전성</td><td>Thread-Safe</td><td>멀티스레드 환경에서 안전한 초기화</td></tr><tr><td></td><td>Non-Thread-Safe</td><td>단일 스레드 환경에서만 안전</td></tr><tr><td>구현 방식</td><td>Simple Lazy</td><td>기본적인 null 체크 방식</td></tr><tr><td></td><td>Double-Checked Locking</td><td>성능 최적화된 스레드 안전 방식</td></tr><tr><td></td><td>Holder Pattern</td><td>JVM 클래스 로딩 활용 방식</td></tr><tr><td>적용 범위</td><td>Object-Level</td><td>개별 객체 단위 지연 초기화</td></tr><tr><td></td><td>Collection-Level</td><td>컬렉션 전체 지연 초기화</td></tr><tr><td></td><td>Property-Level</td><td>객체 속성 단위 지연 초기화</td></tr></tbody></table><h3 id=사용-시점-및-조건별-분석>사용 시점 및 조건별 분석<a hidden class=anchor aria-hidden=true href=#사용-시점-및-조건별-분석>#</a></h3><p><code>지연 초기화(Lazy Initialization)</code> 는 <strong>객체의 생성 시점을 실제로 필요한 순간까지 미루는 전략</strong>이다. 이는 <strong>성능 최적화, 리소스 절약, 초기 로딩 속도 개선</strong>을 목적으로 사용되며, 특히 <strong>고비용 객체</strong>나 <strong>조건부로 필요한 객체</strong>에 매우 효과적이다.</p><table><thead><tr><th><strong>상황</strong></th><th><strong>설명</strong></th><th><strong>지연 초기화 사용 이유</strong></th><th><strong>대표 예시</strong></th></tr></thead><tbody><tr><td><strong>객체 생성 비용이 큰 경우</strong></td><td>외부 네트워크 연결, 파일 I/O, 무거운 계산이 필요한 경우</td><td>시작 성능 저하 방지, 필요 시점까지 자원 소비 미루기</td><td>DB 연결 객체, 대용량 이미지, 설정 파일 파서</td></tr><tr><td><strong>객체가 사용되지 않을 가능성이 있는 경우</strong></td><td>조건에 따라 객체가 전혀 필요하지 않을 수 있음</td><td>불필요한 객체 생성을 방지</td><td>사용자의 특정 기능 클릭 전까진 로드하지 않는 화면 구성 요소</td></tr><tr><td><strong>앱 시작 속도가 중요한 경우</strong></td><td>초기 로딩 시간이 중요한 웹/앱/서버리스 환경</td><td>초기에 최소 자원만 사용해 빠른 구동 유도</td><td>Spring ApplicationContext, Android 앱 초기 로딩</td></tr><tr><td><strong>멀티스레드 환경에서 Singleton 구현 시</strong></td><td>Singleton 객체를 안전하게 한 번만 생성해야 함</td><td>지연 초기화는 Singleton 패턴에서 자주 사용됨</td><td><code>Double-Checked Locking</code>, <code>Holder Idiom</code></td></tr><tr><td><strong>메모리 제한이 있는 환경</strong></td><td>모바일, 임베디드, WAS 등</td><td>자원 사용 시점을 조절하여 메모리 절약 가능</td><td>Android 의 <code>ViewModel</code> 이나 이미지 Lazy Load</td></tr><tr><td><strong>사용자 요청 기반 객체 생성 시</strong></td><td>특정 사용자의 요청이 발생한 후에만 특정 객체를 생성</td><td>요청 수에 따라 유동적으로 객체를 생성하여 자원 낭비 최소화</td><td>REST API 요청 시 응답용 객체 지연 생성</td></tr></tbody></table><h3 id=실무-적용-예시>실무 적용 예시<a hidden class=anchor aria-hidden=true href=#실무-적용-예시>#</a></h3><table><thead><tr><th><strong>적용 분야</strong></th><th><strong>예시/기술</strong></th><th><strong>사용 목적</strong></th><th><strong>기대 효과</strong></th></tr></thead><tbody><tr><td><strong>데이터베이스 연결</strong></td><td>JDBC, Connection Pool, Redis Client</td><td>고비용 연결 객체를 사용 시점까지 지연 생성</td><td>초기 자원 사용 최소화, 연결 비용 분산</td></tr><tr><td><strong>ORM 프레임워크</strong></td><td>Hibernate, JPA (<code>FetchType.LAZY</code>)</td><td>연관 엔티티 지연 로딩</td><td>N+1 쿼리 방지, 메모리 효율성</td></tr><tr><td><strong>Spring Framework</strong></td><td><code>@Lazy</code> 어노테이션, Bean 지연 주입</td><td>DI 시 불필요한 객체 생성을 지연</td><td>시작 속도 향상, 리소스 절약</td></tr><tr><td><strong>싱글톤 패턴</strong></td><td>Holder Idiom, DCL, Enum Singleton</td><td>글로벌 인스턴스의 최초 사용 시점에 안전하게 생성</td><td>스레드 안전성 확보, 메모리 절약</td></tr><tr><td><strong>웹 프론트엔드</strong></td><td>Intersection Observer, Lazy Load Images</td><td>이미지 및 리소스의 지연 렌더링</td><td>초기 페이지 로딩 속도 향상, UX 개선</td></tr><tr><td><strong>캐시 시스템</strong></td><td>Redis, Ehcache, LRU 캐시</td><td>캐시 데이터의 동적 로딩</td><td>불필요한 캐시 점유 방지, 메모리 최적화</td></tr><tr><td><strong>설정/환경 로딩</strong></td><td><code>.properties</code> 파일 로딩, YAML 파싱</td><td>설정 값의 필요 시점 로딩</td><td>애플리케이션 시작 시간 단축</td></tr><tr><td><strong>GUI 애플리케이션</strong></td><td>Virtual Proxy Pattern</td><td>고용량 리소스 (이미지, 폰트 등) 의 렌더링 시점 지연</td><td>메모리 효율성, UI 반응성 향상</td></tr><tr><td><strong>파일 I/O</strong></td><td>Lazy File Reader, Streaming File Reader</td><td>대용량 파일의 필요한 부분만 순차적으로 읽기</td><td>메모리 사용 최소화, 성능 안정성 확보</td></tr><tr><td><strong>마이크로서비스</strong></td><td>Spring Cloud, Eureka</td><td>서비스 인스턴스 지연 등록 / 디스커버리 적용 시점 최적화</td><td>콜드 스타트 최적화, 서비스 경량화</td></tr><tr><td><strong>모바일 앱</strong></td><td>Android/iOS 지연 리소스 로딩, ViewModel Factory</td><td>이미지/애니메이션/비디오 등의 사용 시점에만 로딩</td><td>배터리 수명 연장, 앱 실행 속도 향상</td></tr><tr><td><strong>AI/ML 시스템</strong></td><td>모델 로딩 on-demand, Tensor Streaming</td><td>모델 또는 데이터셋의 부분 로딩</td><td>메모리 최적화, 연산 자원 분산</td></tr></tbody></table><h3 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h3><h4 id=사례-1-데이터베이스-연결-지연-초기화>사례 1: 데이터베이스 연결 지연 초기화<a hidden class=anchor aria-hidden=true href=#사례-1-데이터베이스-연결-지연-초기화>#</a></h4><p><strong>시스템 구성</strong>: 애플리케이션 시작 시 DB 연결을 바로 생성하지 않고, 실제 쿼리 요청 시점에 연결 생성</p><p><strong>시스템 구성 다이어그램</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Client
</span></span><span class=line><span class=cl>   |
</span></span><span class=line><span class=cl>   v
</span></span><span class=line><span class=cl>DBConnectionManager
</span></span><span class=line><span class=cl>   |
</span></span><span class=line><span class=cl>   v
</span></span><span class=line><span class=cl>(초기화 여부 확인, 필요시 DB 연결 생성 및 캐싱)
</span></span><span class=line><span class=cl>   |
</span></span><span class=line><span class=cl>   v
</span></span><span class=line><span class=cl>Return DB Connection
</span></span></code></pre></td></tr></table></div></div><p><strong>Workflow</strong>: 클라이언트가 DB 연결을 요청하면, DBConnectionManager 가 연결이 생성되었는지 확인하고, 없으면 생성 후 캐싱, 이후 요청 시 캐시된 연결 반환<br><strong>주제의 역할</strong>: 불필요한 DB 연결 생성 방지, 메모리 및 시작 속도 최적화<br><strong>유무 차이</strong>: 지연 초기화 미적용 시 시작 시점에 모든 DB 연결 생성, 메모리 및 시작 속도 저하. 적용 시 실제 필요 시점에만 연결 생성, 효율적 리소스 관리</p><h4 id=사례-2-orm-에서의-지연-로딩-활용-사례>사례 2: ORM 에서의 지연 로딩 활용 사례<a hidden class=anchor aria-hidden=true href=#사례-2-orm-에서의-지연-로딩-활용-사례>#</a></h4><p><strong>시스템 구성</strong>: Spring Boot + JPA + Hibernate 를 사용한 전자상거래 시스템</p><pre class=mermaid>graph LR
    A[사용자 요청] --&gt; B[Controller]
    B --&gt; C[Service Layer]
    C --&gt; D[Repository]
    D --&gt; E[(Database)]
    D --&gt; F[JPA Entity]
    F --&gt; G[Lazy Collection]
    G --&gt; H[프록시 객체]
</pre><p><strong>시스템 구성 요소</strong>:</p><ul><li><strong>엔티티 계층</strong>: User, Order, OrderItem 엔티티</li><li><strong>프록시 계층</strong>: Hibernate 가 생성하는 프록시 객체</li><li><strong>서비스 계층</strong>: 비즈니스 로직 처리</li><li><strong>영속성 계층</strong>: JPA Repository 를 통한 데이터 접근</li></ul><p><strong>Workflow</strong>:</p><ol><li>사용자 정보 조회 요청</li><li>User 엔티티 로드 (주문 정보는 지연 로딩)</li><li>필요 시점에 주문 컬렉션 접근</li><li>프록시 객체가 실제 데이터 로드</li><li>SQL 쿼리 실행 및 결과 반환</li></ol><p><strong>지연 초기화의 역할</strong>:</p><ul><li><strong>메모리 효율성</strong>: 사용자 정보만 필요한 경우 주문 데이터 로딩 방지</li><li><strong>성능 최적화</strong>: 초기 쿼리 단순화로 응답 시간 단축</li><li><strong>선택적 로딩</strong>: 실제 필요한 연관 데이터만 로드</li></ul><p><strong>지연 초기화 유무에 따른 차이점</strong>:</p><table><thead><tr><th>구분</th><th>즉시 로딩</th><th>지연 로딩</th></tr></thead><tbody><tr><td>초기 쿼리</td><td>JOIN 으로 모든 데이터 로드</td><td>기본 엔티티만 로드</td></tr><tr><td>메모리 사용량</td><td>높음 (모든 연관 데이터)</td><td>낮음 (필요한 데이터만)</td></tr><tr><td>초기 응답시간</td><td>느림</td><td>빠름</td></tr><tr><td>추가 쿼리</td><td>없음</td><td>필요 시 발생</td></tr><tr><td>적합한 상황</td><td>연관 데이터를 항상 사용</td><td>연관 데이터를 가끔 사용</td></tr></tbody></table><h4 id=사례-2-전자상거래-플랫폼의-상품-정보-시스템>사례 2: 전자상거래 플랫폼의 상품 정보 시스템<a hidden class=anchor aria-hidden=true href=#사례-2-전자상거래-플랫폼의-상품-정보-시스템>#</a></h4><p>온라인 쇼핑몰에서 상품 상세 정보를 효율적으로 관리하는 시스템을 구축.</p><p><strong>시스템 구성:</strong></p><pre class=mermaid>graph TB
    A[Product Controller] --&gt; B[Product Service]
    B --&gt; C[Product Repository]
    C --&gt; D[Database]
    B --&gt; E[Lazy Image Loader]
    B --&gt; F[Lazy Review Loader]
    E --&gt; G[Image Storage]
    F --&gt; H[Review Database]
</pre><p><strong>Workflow:</strong></p><ol><li>사용자가 상품 목록 요청</li><li>기본 상품 정보만 로드 (이름, 가격, 간단 설명)</li><li>사용자가 특정 상품 클릭 시 상세 정보 지연 로딩</li><li>이미지와 리뷰는 별도의 지연 초기화로 관리</li><li>필요에 따라 추가 정보 동적 로딩</li></ol><p><strong>역할:</strong></p><ul><li><strong>성능 최적화</strong>: 초기 페이지 로딩 시간 단축</li><li><strong>대역폭 절약</strong>: 필요한 데이터만 전송</li><li><strong>사용자 경험 향상</strong>: 빠른 응답으로 UX 개선</li></ul><h4 id=사례-3-웹-애플리케이션에서의-사용자-프로필-이미지-로딩>사례 3: 웹 애플리케이션에서의 사용자 프로필 이미지 로딩<a hidden class=anchor aria-hidden=true href=#사례-3-웹-애플리케이션에서의-사용자-프로필-이미지-로딩>#</a></h4><p><strong>상황</strong>: 웹 애플리케이션에서 사용자 목록을 표시할 때, 각 사용자의 프로필 이미지를 함께 표시한다. 그러나 이미지 파일은 용량이 크고, 모든 사용자가 이미지를 가지고 있는 것은 아니다.</p><p><strong>문제점</strong>: 모든 사용자의 이미지를 한 번에 로딩하면, 네트워크 대역폭과 메모리 사용량이 급증하여 성능 저하가 발생할 수 있다.<br><strong>해결 방안</strong>: 지연 초기화를 사용하여, 사용자의 프로필 이미지가 실제로 필요할 때 (예: 사용자가 해당 이미지를 클릭하거나, 상세 정보를 볼 때) 만 이미지를 로딩한다.</p><p><strong>시스템 구성 다이어그램</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[사용자 요청] --&gt; [웹 서버] --&gt; [이미지 로딩 로직] --&gt; [이미지 캐시] --&gt; [이미지 저장소]
</span></span></code></pre></td></tr></table></div></div><p><strong>Workflow</strong>:</p><ol><li>사용자 목록을 요청하면, 웹 서버는 사용자 정보만 반환하고, 이미지 URL 은 포함하되 이미지는 로딩하지 않는다.</li><li>사용자가 특정 사용자의 이미지를 요청하면, 이미지 로딩 로직이 동작하여 이미지 캐시를 확인한다.</li><li>캐시에 이미지가 없으면, 이미지 저장소에서 이미지를 로딩하고 캐시에 저장한 후 반환한다.</li><li>다음 요청부터는 캐시된 이미지를 사용하여 빠르게 응답한다.</li></ol><p><strong>역할</strong>:</p><ul><li><strong>지연 초기화</strong>: 이미지 로딩 시점을 지연시켜 초기 로딩 시간을 단축하고, 불필요한 리소스 사용을 방지한다.</li><li><strong>캐시</strong>: 자주 요청되는 이미지를 캐시에 저장하여 성능을 향상시킨다.</li></ul><h3 id=구현-예시>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시>#</a></h3><h4 id=jpa-지연-로딩-구현-java>JPA 지연 로딩 구현 (Java)<a hidden class=anchor aria-hidden=true href=#jpa-지연-로딩-구현-java>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>  1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2>  2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3>  3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4>  4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5>  5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6>  6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7>  7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8>  8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9>  9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10> 10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11> 11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12> 12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13> 13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14> 14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15> 15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16> 16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17> 17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18> 18</a>
</span><span class=lnt id=hl-6-19><a class=lnlinks href=#hl-6-19> 19</a>
</span><span class=lnt id=hl-6-20><a class=lnlinks href=#hl-6-20> 20</a>
</span><span class=lnt id=hl-6-21><a class=lnlinks href=#hl-6-21> 21</a>
</span><span class=lnt id=hl-6-22><a class=lnlinks href=#hl-6-22> 22</a>
</span><span class=lnt id=hl-6-23><a class=lnlinks href=#hl-6-23> 23</a>
</span><span class=lnt id=hl-6-24><a class=lnlinks href=#hl-6-24> 24</a>
</span><span class=lnt id=hl-6-25><a class=lnlinks href=#hl-6-25> 25</a>
</span><span class=lnt id=hl-6-26><a class=lnlinks href=#hl-6-26> 26</a>
</span><span class=lnt id=hl-6-27><a class=lnlinks href=#hl-6-27> 27</a>
</span><span class=lnt id=hl-6-28><a class=lnlinks href=#hl-6-28> 28</a>
</span><span class=lnt id=hl-6-29><a class=lnlinks href=#hl-6-29> 29</a>
</span><span class=lnt id=hl-6-30><a class=lnlinks href=#hl-6-30> 30</a>
</span><span class=lnt id=hl-6-31><a class=lnlinks href=#hl-6-31> 31</a>
</span><span class=lnt id=hl-6-32><a class=lnlinks href=#hl-6-32> 32</a>
</span><span class=lnt id=hl-6-33><a class=lnlinks href=#hl-6-33> 33</a>
</span><span class=lnt id=hl-6-34><a class=lnlinks href=#hl-6-34> 34</a>
</span><span class=lnt id=hl-6-35><a class=lnlinks href=#hl-6-35> 35</a>
</span><span class=lnt id=hl-6-36><a class=lnlinks href=#hl-6-36> 36</a>
</span><span class=lnt id=hl-6-37><a class=lnlinks href=#hl-6-37> 37</a>
</span><span class=lnt id=hl-6-38><a class=lnlinks href=#hl-6-38> 38</a>
</span><span class=lnt id=hl-6-39><a class=lnlinks href=#hl-6-39> 39</a>
</span><span class=lnt id=hl-6-40><a class=lnlinks href=#hl-6-40> 40</a>
</span><span class=lnt id=hl-6-41><a class=lnlinks href=#hl-6-41> 41</a>
</span><span class=lnt id=hl-6-42><a class=lnlinks href=#hl-6-42> 42</a>
</span><span class=lnt id=hl-6-43><a class=lnlinks href=#hl-6-43> 43</a>
</span><span class=lnt id=hl-6-44><a class=lnlinks href=#hl-6-44> 44</a>
</span><span class=lnt id=hl-6-45><a class=lnlinks href=#hl-6-45> 45</a>
</span><span class=lnt id=hl-6-46><a class=lnlinks href=#hl-6-46> 46</a>
</span><span class=lnt id=hl-6-47><a class=lnlinks href=#hl-6-47> 47</a>
</span><span class=lnt id=hl-6-48><a class=lnlinks href=#hl-6-48> 48</a>
</span><span class=lnt id=hl-6-49><a class=lnlinks href=#hl-6-49> 49</a>
</span><span class=lnt id=hl-6-50><a class=lnlinks href=#hl-6-50> 50</a>
</span><span class=lnt id=hl-6-51><a class=lnlinks href=#hl-6-51> 51</a>
</span><span class=lnt id=hl-6-52><a class=lnlinks href=#hl-6-52> 52</a>
</span><span class=lnt id=hl-6-53><a class=lnlinks href=#hl-6-53> 53</a>
</span><span class=lnt id=hl-6-54><a class=lnlinks href=#hl-6-54> 54</a>
</span><span class=lnt id=hl-6-55><a class=lnlinks href=#hl-6-55> 55</a>
</span><span class=lnt id=hl-6-56><a class=lnlinks href=#hl-6-56> 56</a>
</span><span class=lnt id=hl-6-57><a class=lnlinks href=#hl-6-57> 57</a>
</span><span class=lnt id=hl-6-58><a class=lnlinks href=#hl-6-58> 58</a>
</span><span class=lnt id=hl-6-59><a class=lnlinks href=#hl-6-59> 59</a>
</span><span class=lnt id=hl-6-60><a class=lnlinks href=#hl-6-60> 60</a>
</span><span class=lnt id=hl-6-61><a class=lnlinks href=#hl-6-61> 61</a>
</span><span class=lnt id=hl-6-62><a class=lnlinks href=#hl-6-62> 62</a>
</span><span class=lnt id=hl-6-63><a class=lnlinks href=#hl-6-63> 63</a>
</span><span class=lnt id=hl-6-64><a class=lnlinks href=#hl-6-64> 64</a>
</span><span class=lnt id=hl-6-65><a class=lnlinks href=#hl-6-65> 65</a>
</span><span class=lnt id=hl-6-66><a class=lnlinks href=#hl-6-66> 66</a>
</span><span class=lnt id=hl-6-67><a class=lnlinks href=#hl-6-67> 67</a>
</span><span class=lnt id=hl-6-68><a class=lnlinks href=#hl-6-68> 68</a>
</span><span class=lnt id=hl-6-69><a class=lnlinks href=#hl-6-69> 69</a>
</span><span class=lnt id=hl-6-70><a class=lnlinks href=#hl-6-70> 70</a>
</span><span class=lnt id=hl-6-71><a class=lnlinks href=#hl-6-71> 71</a>
</span><span class=lnt id=hl-6-72><a class=lnlinks href=#hl-6-72> 72</a>
</span><span class=lnt id=hl-6-73><a class=lnlinks href=#hl-6-73> 73</a>
</span><span class=lnt id=hl-6-74><a class=lnlinks href=#hl-6-74> 74</a>
</span><span class=lnt id=hl-6-75><a class=lnlinks href=#hl-6-75> 75</a>
</span><span class=lnt id=hl-6-76><a class=lnlinks href=#hl-6-76> 76</a>
</span><span class=lnt id=hl-6-77><a class=lnlinks href=#hl-6-77> 77</a>
</span><span class=lnt id=hl-6-78><a class=lnlinks href=#hl-6-78> 78</a>
</span><span class=lnt id=hl-6-79><a class=lnlinks href=#hl-6-79> 79</a>
</span><span class=lnt id=hl-6-80><a class=lnlinks href=#hl-6-80> 80</a>
</span><span class=lnt id=hl-6-81><a class=lnlinks href=#hl-6-81> 81</a>
</span><span class=lnt id=hl-6-82><a class=lnlinks href=#hl-6-82> 82</a>
</span><span class=lnt id=hl-6-83><a class=lnlinks href=#hl-6-83> 83</a>
</span><span class=lnt id=hl-6-84><a class=lnlinks href=#hl-6-84> 84</a>
</span><span class=lnt id=hl-6-85><a class=lnlinks href=#hl-6-85> 85</a>
</span><span class=lnt id=hl-6-86><a class=lnlinks href=#hl-6-86> 86</a>
</span><span class=lnt id=hl-6-87><a class=lnlinks href=#hl-6-87> 87</a>
</span><span class=lnt id=hl-6-88><a class=lnlinks href=#hl-6-88> 88</a>
</span><span class=lnt id=hl-6-89><a class=lnlinks href=#hl-6-89> 89</a>
</span><span class=lnt id=hl-6-90><a class=lnlinks href=#hl-6-90> 90</a>
</span><span class=lnt id=hl-6-91><a class=lnlinks href=#hl-6-91> 91</a>
</span><span class=lnt id=hl-6-92><a class=lnlinks href=#hl-6-92> 92</a>
</span><span class=lnt id=hl-6-93><a class=lnlinks href=#hl-6-93> 93</a>
</span><span class=lnt id=hl-6-94><a class=lnlinks href=#hl-6-94> 94</a>
</span><span class=lnt id=hl-6-95><a class=lnlinks href=#hl-6-95> 95</a>
</span><span class=lnt id=hl-6-96><a class=lnlinks href=#hl-6-96> 96</a>
</span><span class=lnt id=hl-6-97><a class=lnlinks href=#hl-6-97> 97</a>
</span><span class=lnt id=hl-6-98><a class=lnlinks href=#hl-6-98> 98</a>
</span><span class=lnt id=hl-6-99><a class=lnlinks href=#hl-6-99> 99</a>
</span><span class=lnt id=hl-6-100><a class=lnlinks href=#hl-6-100>100</a>
</span><span class=lnt id=hl-6-101><a class=lnlinks href=#hl-6-101>101</a>
</span><span class=lnt id=hl-6-102><a class=lnlinks href=#hl-6-102>102</a>
</span><span class=lnt id=hl-6-103><a class=lnlinks href=#hl-6-103>103</a>
</span><span class=lnt id=hl-6-104><a class=lnlinks href=#hl-6-104>104</a>
</span><span class=lnt id=hl-6-105><a class=lnlinks href=#hl-6-105>105</a>
</span><span class=lnt id=hl-6-106><a class=lnlinks href=#hl-6-106>106</a>
</span><span class=lnt id=hl-6-107><a class=lnlinks href=#hl-6-107>107</a>
</span><span class=lnt id=hl-6-108><a class=lnlinks href=#hl-6-108>108</a>
</span><span class=lnt id=hl-6-109><a class=lnlinks href=#hl-6-109>109</a>
</span><span class=lnt id=hl-6-110><a class=lnlinks href=#hl-6-110>110</a>
</span><span class=lnt id=hl-6-111><a class=lnlinks href=#hl-6-111>111</a>
</span><span class=lnt id=hl-6-112><a class=lnlinks href=#hl-6-112>112</a>
</span><span class=lnt id=hl-6-113><a class=lnlinks href=#hl-6-113>113</a>
</span><span class=lnt id=hl-6-114><a class=lnlinks href=#hl-6-114>114</a>
</span><span class=lnt id=hl-6-115><a class=lnlinks href=#hl-6-115>115</a>
</span><span class=lnt id=hl-6-116><a class=lnlinks href=#hl-6-116>116</a>
</span><span class=lnt id=hl-6-117><a class=lnlinks href=#hl-6-117>117</a>
</span><span class=lnt id=hl-6-118><a class=lnlinks href=#hl-6-118>118</a>
</span><span class=lnt id=hl-6-119><a class=lnlinks href=#hl-6-119>119</a>
</span><span class=lnt id=hl-6-120><a class=lnlinks href=#hl-6-120>120</a>
</span><span class=lnt id=hl-6-121><a class=lnlinks href=#hl-6-121>121</a>
</span><span class=lnt id=hl-6-122><a class=lnlinks href=#hl-6-122>122</a>
</span><span class=lnt id=hl-6-123><a class=lnlinks href=#hl-6-123>123</a>
</span><span class=lnt id=hl-6-124><a class=lnlinks href=#hl-6-124>124</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 엔티티 정의</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Entity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>User</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@GeneratedValue</span><span class=p>(</span><span class=n>strategy</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>GenerationType</span><span class=p>.</span><span class=na>IDENTITY</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Long</span><span class=w> </span><span class=n>id</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>email</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 지연 로딩 설정</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@OneToMany</span><span class=p>(</span><span class=n>mappedBy</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;user&#34;</span><span class=p>,</span><span class=w> </span><span class=n>fetch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>FetchType</span><span class=p>.</span><span class=na>LAZY</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Order</span><span class=o>&gt;</span><span class=w> </span><span class=n>orders</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 생성자, getter, setter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>User</span><span class=p>()</span><span class=w> </span><span class=p>{}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>User</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>email</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>email</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>email</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// Lazy 로딩 확인 메서드</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Order</span><span class=o>&gt;</span><span class=w> </span><span class=nf>getOrders</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// Hibernate는 이 시점에서 프록시를 통해 실제 데이터 로드</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>orders</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Entity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Order</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@GeneratedValue</span><span class=p>(</span><span class=n>strategy</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>GenerationType</span><span class=p>.</span><span class=na>IDENTITY</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Long</span><span class=w> </span><span class=n>id</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>LocalDateTime</span><span class=w> </span><span class=n>orderDate</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=n>totalAmount</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@ManyToOne</span><span class=p>(</span><span class=n>fetch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>FetchType</span><span class=p>.</span><span class=na>LAZY</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@JoinColumn</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;user_id&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>User</span><span class=w> </span><span class=n>user</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 생성자, getter, setter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>Order</span><span class=p>()</span><span class=w> </span><span class=p>{}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>Order</span><span class=p>(</span><span class=n>LocalDateTime</span><span class=w> </span><span class=n>orderDate</span><span class=p>,</span><span class=w> </span><span class=n>BigDecimal</span><span class=w> </span><span class=n>totalAmount</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>orderDate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>orderDate</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>totalAmount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>totalAmount</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 서비스 계층에서의 활용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Transactional</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>UserRepository</span><span class=w> </span><span class=n>userRepository</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 사용자 기본 정보만 조회</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>User</span><span class=w> </span><span class=nf>getUserBasicInfo</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>userId</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>userRepository</span><span class=p>.</span><span class=na>findById</span><span class=p>(</span><span class=n>userId</span><span class=p>).</span><span class=na>orElse</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 이 시점에서는 주문 정보가 로드되지 않음</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 사용자와 주문 정보 함께 조회</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>User</span><span class=w> </span><span class=nf>getUserWithOrders</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>userId</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>User</span><span class=w> </span><span class=n>user</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>userRepository</span><span class=p>.</span><span class=na>findById</span><span class=p>(</span><span class=n>userId</span><span class=p>).</span><span class=na>orElse</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>user</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// 이 시점에서 지연 로딩이 트리거됨</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>orderCount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>user</span><span class=p>.</span><span class=na>getOrders</span><span class=p>().</span><span class=na>size</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;User has &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>orderCount</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34; orders&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>user</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// N+1 문제 해결을 위한 페치 조인 사용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Query</span><span class=p>(</span><span class=s>&#34;SELECT u FROM User u LEFT JOIN FETCH u.orders WHERE u.id = :userId&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>User</span><span class=w> </span><span class=nf>getUserWithOrdersOptimized</span><span class=p>(</span><span class=nd>@Param</span><span class=p>(</span><span class=s>&#34;userId&#34;</span><span class=p>)</span><span class=w> </span><span class=n>Long</span><span class=w> </span><span class=n>userId</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>userRepository</span><span class=p>.</span><span class=na>findUserWithOrdersById</span><span class=p>(</span><span class=n>userId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 스레드 안전한 지연 초기화 구현</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ThreadSafeLazyInitializer</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>volatile</span><span class=w> </span><span class=n>T</span><span class=w> </span><span class=n>instance</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>Supplier</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=n>supplier</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>ThreadSafeLazyInitializer</span><span class=p>(</span><span class=n>Supplier</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=n>supplier</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>supplier</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>supplier</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>T</span><span class=w> </span><span class=nf>getInstance</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// Double-checked locking 패턴</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>instance</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=kd>synchronized</span><span class=w> </span><span class=p>(</span><span class=k>this</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>instance</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=n>instance</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>supplier</span><span class=p>.</span><span class=na>get</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>instance</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 사용 예시</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>DatabaseConnectionManager</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>ThreadSafeLazyInitializer</span><span class=o>&lt;</span><span class=n>DataSource</span><span class=o>&gt;</span><span class=w> </span><span class=n>dataSourceLazy</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>DatabaseConnectionManager</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>dataSourceLazy</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ThreadSafeLazyInitializer</span><span class=o>&lt;&gt;</span><span class=p>(()</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// 비용이 높은 DataSource 초기화</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>HikariConfig</span><span class=w> </span><span class=n>config</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HikariConfig</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>config</span><span class=p>.</span><span class=na>setJdbcUrl</span><span class=p>(</span><span class=s>&#34;jdbc:mysql://localhost:3306/mydb&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>config</span><span class=p>.</span><span class=na>setUsername</span><span class=p>(</span><span class=s>&#34;user&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>config</span><span class=p>.</span><span class=na>setPassword</span><span class=p>(</span><span class=s>&#34;password&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HikariDataSource</span><span class=p>(</span><span class=n>config</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>});</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>DataSource</span><span class=w> </span><span class=nf>getDataSource</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>dataSourceLazy</span><span class=p>.</span><span class=na>getInstance</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=웹-이미지-지연-로딩-구현-javascript>웹 이미지 지연 로딩 구현 (JavaScript)<a hidden class=anchor aria-hidden=true href=#웹-이미지-지연-로딩-구현-javascript>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>  1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2>  2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3>  3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4>  4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5>  5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6>  6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7>  7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8>  8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9>  9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10> 10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11> 11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12> 12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13> 13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14> 14</a>
</span><span class=lnt id=hl-7-15><a class=lnlinks href=#hl-7-15> 15</a>
</span><span class=lnt id=hl-7-16><a class=lnlinks href=#hl-7-16> 16</a>
</span><span class=lnt id=hl-7-17><a class=lnlinks href=#hl-7-17> 17</a>
</span><span class=lnt id=hl-7-18><a class=lnlinks href=#hl-7-18> 18</a>
</span><span class=lnt id=hl-7-19><a class=lnlinks href=#hl-7-19> 19</a>
</span><span class=lnt id=hl-7-20><a class=lnlinks href=#hl-7-20> 20</a>
</span><span class=lnt id=hl-7-21><a class=lnlinks href=#hl-7-21> 21</a>
</span><span class=lnt id=hl-7-22><a class=lnlinks href=#hl-7-22> 22</a>
</span><span class=lnt id=hl-7-23><a class=lnlinks href=#hl-7-23> 23</a>
</span><span class=lnt id=hl-7-24><a class=lnlinks href=#hl-7-24> 24</a>
</span><span class=lnt id=hl-7-25><a class=lnlinks href=#hl-7-25> 25</a>
</span><span class=lnt id=hl-7-26><a class=lnlinks href=#hl-7-26> 26</a>
</span><span class=lnt id=hl-7-27><a class=lnlinks href=#hl-7-27> 27</a>
</span><span class=lnt id=hl-7-28><a class=lnlinks href=#hl-7-28> 28</a>
</span><span class=lnt id=hl-7-29><a class=lnlinks href=#hl-7-29> 29</a>
</span><span class=lnt id=hl-7-30><a class=lnlinks href=#hl-7-30> 30</a>
</span><span class=lnt id=hl-7-31><a class=lnlinks href=#hl-7-31> 31</a>
</span><span class=lnt id=hl-7-32><a class=lnlinks href=#hl-7-32> 32</a>
</span><span class=lnt id=hl-7-33><a class=lnlinks href=#hl-7-33> 33</a>
</span><span class=lnt id=hl-7-34><a class=lnlinks href=#hl-7-34> 34</a>
</span><span class=lnt id=hl-7-35><a class=lnlinks href=#hl-7-35> 35</a>
</span><span class=lnt id=hl-7-36><a class=lnlinks href=#hl-7-36> 36</a>
</span><span class=lnt id=hl-7-37><a class=lnlinks href=#hl-7-37> 37</a>
</span><span class=lnt id=hl-7-38><a class=lnlinks href=#hl-7-38> 38</a>
</span><span class=lnt id=hl-7-39><a class=lnlinks href=#hl-7-39> 39</a>
</span><span class=lnt id=hl-7-40><a class=lnlinks href=#hl-7-40> 40</a>
</span><span class=lnt id=hl-7-41><a class=lnlinks href=#hl-7-41> 41</a>
</span><span class=lnt id=hl-7-42><a class=lnlinks href=#hl-7-42> 42</a>
</span><span class=lnt id=hl-7-43><a class=lnlinks href=#hl-7-43> 43</a>
</span><span class=lnt id=hl-7-44><a class=lnlinks href=#hl-7-44> 44</a>
</span><span class=lnt id=hl-7-45><a class=lnlinks href=#hl-7-45> 45</a>
</span><span class=lnt id=hl-7-46><a class=lnlinks href=#hl-7-46> 46</a>
</span><span class=lnt id=hl-7-47><a class=lnlinks href=#hl-7-47> 47</a>
</span><span class=lnt id=hl-7-48><a class=lnlinks href=#hl-7-48> 48</a>
</span><span class=lnt id=hl-7-49><a class=lnlinks href=#hl-7-49> 49</a>
</span><span class=lnt id=hl-7-50><a class=lnlinks href=#hl-7-50> 50</a>
</span><span class=lnt id=hl-7-51><a class=lnlinks href=#hl-7-51> 51</a>
</span><span class=lnt id=hl-7-52><a class=lnlinks href=#hl-7-52> 52</a>
</span><span class=lnt id=hl-7-53><a class=lnlinks href=#hl-7-53> 53</a>
</span><span class=lnt id=hl-7-54><a class=lnlinks href=#hl-7-54> 54</a>
</span><span class=lnt id=hl-7-55><a class=lnlinks href=#hl-7-55> 55</a>
</span><span class=lnt id=hl-7-56><a class=lnlinks href=#hl-7-56> 56</a>
</span><span class=lnt id=hl-7-57><a class=lnlinks href=#hl-7-57> 57</a>
</span><span class=lnt id=hl-7-58><a class=lnlinks href=#hl-7-58> 58</a>
</span><span class=lnt id=hl-7-59><a class=lnlinks href=#hl-7-59> 59</a>
</span><span class=lnt id=hl-7-60><a class=lnlinks href=#hl-7-60> 60</a>
</span><span class=lnt id=hl-7-61><a class=lnlinks href=#hl-7-61> 61</a>
</span><span class=lnt id=hl-7-62><a class=lnlinks href=#hl-7-62> 62</a>
</span><span class=lnt id=hl-7-63><a class=lnlinks href=#hl-7-63> 63</a>
</span><span class=lnt id=hl-7-64><a class=lnlinks href=#hl-7-64> 64</a>
</span><span class=lnt id=hl-7-65><a class=lnlinks href=#hl-7-65> 65</a>
</span><span class=lnt id=hl-7-66><a class=lnlinks href=#hl-7-66> 66</a>
</span><span class=lnt id=hl-7-67><a class=lnlinks href=#hl-7-67> 67</a>
</span><span class=lnt id=hl-7-68><a class=lnlinks href=#hl-7-68> 68</a>
</span><span class=lnt id=hl-7-69><a class=lnlinks href=#hl-7-69> 69</a>
</span><span class=lnt id=hl-7-70><a class=lnlinks href=#hl-7-70> 70</a>
</span><span class=lnt id=hl-7-71><a class=lnlinks href=#hl-7-71> 71</a>
</span><span class=lnt id=hl-7-72><a class=lnlinks href=#hl-7-72> 72</a>
</span><span class=lnt id=hl-7-73><a class=lnlinks href=#hl-7-73> 73</a>
</span><span class=lnt id=hl-7-74><a class=lnlinks href=#hl-7-74> 74</a>
</span><span class=lnt id=hl-7-75><a class=lnlinks href=#hl-7-75> 75</a>
</span><span class=lnt id=hl-7-76><a class=lnlinks href=#hl-7-76> 76</a>
</span><span class=lnt id=hl-7-77><a class=lnlinks href=#hl-7-77> 77</a>
</span><span class=lnt id=hl-7-78><a class=lnlinks href=#hl-7-78> 78</a>
</span><span class=lnt id=hl-7-79><a class=lnlinks href=#hl-7-79> 79</a>
</span><span class=lnt id=hl-7-80><a class=lnlinks href=#hl-7-80> 80</a>
</span><span class=lnt id=hl-7-81><a class=lnlinks href=#hl-7-81> 81</a>
</span><span class=lnt id=hl-7-82><a class=lnlinks href=#hl-7-82> 82</a>
</span><span class=lnt id=hl-7-83><a class=lnlinks href=#hl-7-83> 83</a>
</span><span class=lnt id=hl-7-84><a class=lnlinks href=#hl-7-84> 84</a>
</span><span class=lnt id=hl-7-85><a class=lnlinks href=#hl-7-85> 85</a>
</span><span class=lnt id=hl-7-86><a class=lnlinks href=#hl-7-86> 86</a>
</span><span class=lnt id=hl-7-87><a class=lnlinks href=#hl-7-87> 87</a>
</span><span class=lnt id=hl-7-88><a class=lnlinks href=#hl-7-88> 88</a>
</span><span class=lnt id=hl-7-89><a class=lnlinks href=#hl-7-89> 89</a>
</span><span class=lnt id=hl-7-90><a class=lnlinks href=#hl-7-90> 90</a>
</span><span class=lnt id=hl-7-91><a class=lnlinks href=#hl-7-91> 91</a>
</span><span class=lnt id=hl-7-92><a class=lnlinks href=#hl-7-92> 92</a>
</span><span class=lnt id=hl-7-93><a class=lnlinks href=#hl-7-93> 93</a>
</span><span class=lnt id=hl-7-94><a class=lnlinks href=#hl-7-94> 94</a>
</span><span class=lnt id=hl-7-95><a class=lnlinks href=#hl-7-95> 95</a>
</span><span class=lnt id=hl-7-96><a class=lnlinks href=#hl-7-96> 96</a>
</span><span class=lnt id=hl-7-97><a class=lnlinks href=#hl-7-97> 97</a>
</span><span class=lnt id=hl-7-98><a class=lnlinks href=#hl-7-98> 98</a>
</span><span class=lnt id=hl-7-99><a class=lnlinks href=#hl-7-99> 99</a>
</span><span class=lnt id=hl-7-100><a class=lnlinks href=#hl-7-100>100</a>
</span><span class=lnt id=hl-7-101><a class=lnlinks href=#hl-7-101>101</a>
</span><span class=lnt id=hl-7-102><a class=lnlinks href=#hl-7-102>102</a>
</span><span class=lnt id=hl-7-103><a class=lnlinks href=#hl-7-103>103</a>
</span><span class=lnt id=hl-7-104><a class=lnlinks href=#hl-7-104>104</a>
</span><span class=lnt id=hl-7-105><a class=lnlinks href=#hl-7-105>105</a>
</span><span class=lnt id=hl-7-106><a class=lnlinks href=#hl-7-106>106</a>
</span><span class=lnt id=hl-7-107><a class=lnlinks href=#hl-7-107>107</a>
</span><span class=lnt id=hl-7-108><a class=lnlinks href=#hl-7-108>108</a>
</span><span class=lnt id=hl-7-109><a class=lnlinks href=#hl-7-109>109</a>
</span><span class=lnt id=hl-7-110><a class=lnlinks href=#hl-7-110>110</a>
</span><span class=lnt id=hl-7-111><a class=lnlinks href=#hl-7-111>111</a>
</span><span class=lnt id=hl-7-112><a class=lnlinks href=#hl-7-112>112</a>
</span><span class=lnt id=hl-7-113><a class=lnlinks href=#hl-7-113>113</a>
</span><span class=lnt id=hl-7-114><a class=lnlinks href=#hl-7-114>114</a>
</span><span class=lnt id=hl-7-115><a class=lnlinks href=#hl-7-115>115</a>
</span><span class=lnt id=hl-7-116><a class=lnlinks href=#hl-7-116>116</a>
</span><span class=lnt id=hl-7-117><a class=lnlinks href=#hl-7-117>117</a>
</span><span class=lnt id=hl-7-118><a class=lnlinks href=#hl-7-118>118</a>
</span><span class=lnt id=hl-7-119><a class=lnlinks href=#hl-7-119>119</a>
</span><span class=lnt id=hl-7-120><a class=lnlinks href=#hl-7-120>120</a>
</span><span class=lnt id=hl-7-121><a class=lnlinks href=#hl-7-121>121</a>
</span><span class=lnt id=hl-7-122><a class=lnlinks href=#hl-7-122>122</a>
</span><span class=lnt id=hl-7-123><a class=lnlinks href=#hl-7-123>123</a>
</span><span class=lnt id=hl-7-124><a class=lnlinks href=#hl-7-124>124</a>
</span><span class=lnt id=hl-7-125><a class=lnlinks href=#hl-7-125>125</a>
</span><span class=lnt id=hl-7-126><a class=lnlinks href=#hl-7-126>126</a>
</span><span class=lnt id=hl-7-127><a class=lnlinks href=#hl-7-127>127</a>
</span><span class=lnt id=hl-7-128><a class=lnlinks href=#hl-7-128>128</a>
</span><span class=lnt id=hl-7-129><a class=lnlinks href=#hl-7-129>129</a>
</span><span class=lnt id=hl-7-130><a class=lnlinks href=#hl-7-130>130</a>
</span><span class=lnt id=hl-7-131><a class=lnlinks href=#hl-7-131>131</a>
</span><span class=lnt id=hl-7-132><a class=lnlinks href=#hl-7-132>132</a>
</span><span class=lnt id=hl-7-133><a class=lnlinks href=#hl-7-133>133</a>
</span><span class=lnt id=hl-7-134><a class=lnlinks href=#hl-7-134>134</a>
</span><span class=lnt id=hl-7-135><a class=lnlinks href=#hl-7-135>135</a>
</span><span class=lnt id=hl-7-136><a class=lnlinks href=#hl-7-136>136</a>
</span><span class=lnt id=hl-7-137><a class=lnlinks href=#hl-7-137>137</a>
</span><span class=lnt id=hl-7-138><a class=lnlinks href=#hl-7-138>138</a>
</span><span class=lnt id=hl-7-139><a class=lnlinks href=#hl-7-139>139</a>
</span><span class=lnt id=hl-7-140><a class=lnlinks href=#hl-7-140>140</a>
</span><span class=lnt id=hl-7-141><a class=lnlinks href=#hl-7-141>141</a>
</span><span class=lnt id=hl-7-142><a class=lnlinks href=#hl-7-142>142</a>
</span><span class=lnt id=hl-7-143><a class=lnlinks href=#hl-7-143>143</a>
</span><span class=lnt id=hl-7-144><a class=lnlinks href=#hl-7-144>144</a>
</span><span class=lnt id=hl-7-145><a class=lnlinks href=#hl-7-145>145</a>
</span><span class=lnt id=hl-7-146><a class=lnlinks href=#hl-7-146>146</a>
</span><span class=lnt id=hl-7-147><a class=lnlinks href=#hl-7-147>147</a>
</span><span class=lnt id=hl-7-148><a class=lnlinks href=#hl-7-148>148</a>
</span><span class=lnt id=hl-7-149><a class=lnlinks href=#hl-7-149>149</a>
</span><span class=lnt id=hl-7-150><a class=lnlinks href=#hl-7-150>150</a>
</span><span class=lnt id=hl-7-151><a class=lnlinks href=#hl-7-151>151</a>
</span><span class=lnt id=hl-7-152><a class=lnlinks href=#hl-7-152>152</a>
</span><span class=lnt id=hl-7-153><a class=lnlinks href=#hl-7-153>153</a>
</span><span class=lnt id=hl-7-154><a class=lnlinks href=#hl-7-154>154</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 현대적인 브라우저 지원 확인 및 폴백 구현
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>LazyImageLoader</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>images</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelectorAll</span><span class=p>(</span><span class=s1>&#39;img[loading=&#34;lazy&#34;]&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>imageObserver</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 브라우저 네이티브 지원 확인
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=s1>&#39;loading&#39;</span> <span class=k>in</span> <span class=nx>HTMLImageElement</span><span class=p>.</span><span class=nx>prototype</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 네이티브 지연 로딩 지원
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>this</span><span class=p>.</span><span class=nx>setupNativeLazyLoading</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 폴백: Intersection Observer 사용
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>this</span><span class=p>.</span><span class=nx>setupObserverLazyLoading</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>setupNativeLazyLoading</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 네이티브 지연 로딩 사용 시 추가 최적화
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>images</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>img</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>img</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;load&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>img</span><span class=p>.</span><span class=nx>classList</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=s1>&#39;loaded&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>setupObserverLazyLoading</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Intersection Observer를 사용한 폴백 구현
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=s1>&#39;IntersectionObserver&#39;</span> <span class=k>in</span> <span class=nb>window</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>imageObserver</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>IntersectionObserver</span><span class=p>((</span><span class=nx>entries</span><span class=p>,</span> <span class=nx>observer</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>entries</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>entry</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=p>(</span><span class=nx>entry</span><span class=p>.</span><span class=nx>isIntersecting</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=kr>const</span> <span class=nx>img</span> <span class=o>=</span> <span class=nx>entry</span><span class=p>.</span><span class=nx>target</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=k>this</span><span class=p>.</span><span class=nx>loadImage</span><span class=p>(</span><span class=nx>img</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                        <span class=nx>observer</span><span class=p>.</span><span class=nx>unobserve</span><span class=p>(</span><span class=nx>img</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>rootMargin</span><span class=o>:</span> <span class=s1>&#39;50px 0px&#39;</span><span class=p>,</span> <span class=c1>// 뷰포트 진입 50px 전에 로드
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=nx>threshold</span><span class=o>:</span> <span class=mf>0.01</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>images</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>img</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>imageObserver</span><span class=p>.</span><span class=nx>observe</span><span class=p>(</span><span class=nx>img</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 최종 폴백: 스크롤 이벤트 사용
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>this</span><span class=p>.</span><span class=nx>setupScrollLazyLoading</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>loadImage</span><span class=p>(</span><span class=nx>img</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 실제 이미지 로딩
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>src</span> <span class=o>=</span> <span class=nx>img</span><span class=p>.</span><span class=nx>dataset</span><span class=p>.</span><span class=nx>src</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>srcset</span> <span class=o>=</span> <span class=nx>img</span><span class=p>.</span><span class=nx>dataset</span><span class=p>.</span><span class=nx>srcset</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>src</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>img</span><span class=p>.</span><span class=nx>src</span> <span class=o>=</span> <span class=nx>src</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>srcset</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>img</span><span class=p>.</span><span class=nx>srcset</span> <span class=o>=</span> <span class=nx>srcset</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>img</span><span class=p>.</span><span class=nx>classList</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=s1>&#39;loading&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>img</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;load&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>img</span><span class=p>.</span><span class=nx>classList</span><span class=p>.</span><span class=nx>remove</span><span class=p>(</span><span class=s1>&#39;loading&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nx>img</span><span class=p>.</span><span class=nx>classList</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=s1>&#39;loaded&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>img</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;error&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>img</span><span class=p>.</span><span class=nx>classList</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=s1>&#39;error&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>setupScrollLazyLoading</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 스크롤 기반 폴백 (성능상 권장하지 않음)
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kd>let</span> <span class=nx>ticking</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>checkImages</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>images</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>img</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>isInViewport</span><span class=p>(</span><span class=nx>img</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>this</span><span class=p>.</span><span class=nx>loadImage</span><span class=p>(</span><span class=nx>img</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=nx>ticking</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>requestTick</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>ticking</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>requestAnimationFrame</span><span class=p>(</span><span class=nx>checkImages</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=nx>ticking</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;scroll&#39;</span><span class=p>,</span> <span class=nx>requestTick</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;resize&#39;</span><span class=p>,</span> <span class=nx>requestTick</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>isInViewport</span><span class=p>(</span><span class=nx>element</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>rect</span> <span class=o>=</span> <span class=nx>element</span><span class=p>.</span><span class=nx>getBoundingClientRect</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>rect</span><span class=p>.</span><span class=nx>top</span> <span class=o>&lt;</span> <span class=nb>window</span><span class=p>.</span><span class=nx>innerHeight</span> <span class=o>&amp;&amp;</span> <span class=nx>rect</span><span class=p>.</span><span class=nx>bottom</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 페이지 로드 시 초기화
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nb>document</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;DOMContentLoaded&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=nx>LazyImageLoader</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// React 컴포넌트에서의 지연 로딩 구현
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=nx>React</span><span class=p>,</span> <span class=p>{</span> <span class=nx>useState</span><span class=p>,</span> <span class=nx>useEffect</span><span class=p>,</span> <span class=nx>useRef</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;react&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>LazyImage</span> <span class=o>=</span> <span class=p>({</span> <span class=nx>src</span><span class=p>,</span> <span class=nx>alt</span><span class=p>,</span> <span class=nx>className</span><span class=p>,</span> <span class=nx>placeholder</span> <span class=p>})</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>imageSrc</span><span class=p>,</span> <span class=nx>setImageSrc</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=nx>placeholder</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>imageRef</span><span class=p>,</span> <span class=nx>setImageRef</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>[</span><span class=nx>loaded</span><span class=p>,</span> <span class=nx>setLoaded</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>observer</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>imageRef</span> <span class=o>&amp;&amp;</span> <span class=nx>imageSrc</span> <span class=o>===</span> <span class=nx>placeholder</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>observer</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>IntersectionObserver</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=nx>entries</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>entries</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>entry</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=k>if</span> <span class=p>(</span><span class=nx>entry</span><span class=p>.</span><span class=nx>isIntersecting</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                            <span class=nx>setImageSrc</span><span class=p>(</span><span class=nx>src</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                            <span class=nx>observer</span><span class=p>.</span><span class=nx>unobserve</span><span class=p>(</span><span class=nx>imageRef</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                        <span class=p>}</span>
</span></span><span class=line><span class=cl>                    <span class=p>});</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span> <span class=nx>threshold</span><span class=o>:</span> <span class=mf>0.1</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nx>observer</span><span class=p>.</span><span class=nx>observe</span><span class=p>(</span><span class=nx>imageRef</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>observer</span> <span class=o>&amp;&amp;</span> <span class=nx>observer</span><span class=p>.</span><span class=nx>unobserve</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>observer</span><span class=p>.</span><span class=nx>unobserve</span><span class=p>(</span><span class=nx>imageRef</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=p>[</span><span class=nx>imageRef</span><span class=p>,</span> <span class=nx>imageSrc</span><span class=p>,</span> <span class=nx>placeholder</span><span class=p>,</span> <span class=nx>src</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;</span><span class=nx>img</span>
</span></span><span class=line><span class=cl>            <span class=nx>ref</span><span class=o>=</span><span class=p>{</span><span class=nx>setImageRef</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=nx>src</span><span class=o>=</span><span class=p>{</span><span class=nx>imageSrc</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=nx>alt</span><span class=o>=</span><span class=p>{</span><span class=nx>alt</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=nx>className</span><span class=o>=</span><span class=p>{</span><span class=sb>`</span><span class=si>${</span><span class=nx>className</span><span class=si>}</span><span class=sb> </span><span class=si>${</span><span class=nx>loaded</span> <span class=o>?</span> <span class=s1>&#39;loaded&#39;</span> <span class=o>:</span> <span class=s1>&#39;loading&#39;</span><span class=si>}</span><span class=sb>`</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=nx>onLoad</span><span class=o>=</span><span class=p>{()</span> <span class=p>=&gt;</span> <span class=nx>setLoaded</span><span class=p>(</span><span class=kc>true</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>        <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>LazyImage</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=python-functoolslru_cache-와-lazy-initialization>Python <code>functools.lru_cache</code> 와 Lazy Initialization<a hidden class=anchor aria-hidden=true href=#python-functoolslru_cache-와-lazy-initialization>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>functools</span> <span class=kn>import</span> <span class=n>lru_cache</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@lru_cache</span><span class=p>(</span><span class=n>maxsize</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_db_connection</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Initializing DB connection&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>Database</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=err>…</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>query_user</span><span class=p>(</span><span class=nb>id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>conn</span> <span class=o>=</span> <span class=n>get_db_connection</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1># execute query …</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>첫 호출 시 DB 연결 생성되고, 이후 재사용된다.</li><li>lru_cache 는 내부적으로 meoosized lazy-init 역할 수행.</li></ul><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>고려사항</strong></th><th><strong>설명</strong></th><th><strong>권장사항</strong></th></tr></thead><tbody><tr><td>🧩 <strong>설계 관점</strong></td><td><strong>적용 대상 선별</strong></td><td>모든 객체가 아닌, 비용이 큰 객체에만 지연 초기화를 적용해야 효과적</td><td>고비용 객체 (DB 연결, 파일, 외부 API 등) 에만 적용</td></tr><tr><td></td><td><strong>초기화 비용 분석</strong></td><td>생성 시간이나 리소스 소비가 큰 경우에만 Lazy 전략이 유효</td><td>1ms 이상 소요되거나 메모리 점유 높은 객체 우선 적용</td></tr><tr><td></td><td><strong>사용 빈도 평가</strong></td><td>자주 사용되는 객체에 Lazy 적용 시 오히려 성능 저하 가능</td><td>사용률 50% 이하 객체 우선 고려</td></tr><tr><td></td><td><strong>순환 참조 가능성</strong></td><td>의존 객체 간의 지연 생성 시, 순환 참조 또는 데드락 발생 가능성 있음</td><td>DI 설계 또는 팩토리 패턴으로 의존성 명확히 분리</td></tr><tr><td>⚙ <strong>구현 관점</strong></td><td><strong>스레드 안전성 확보</strong></td><td>멀티스레드 환경에서 중복 생성 방지 필요</td><td>DCL(Double-Checked Locking), 정적 내부 클래스 (Holder Idiom), <code>volatile</code> 변수 활용</td></tr><tr><td></td><td><strong>예외 처리 전략</strong></td><td>초기화 중 예외 발생 시 서비스 전체에 영향을 줄 수 있음</td><td>예외 래핑, 재시도 로직, Circuit Breaker 등 복구 전략 설계</td></tr><tr><td></td><td><strong>자원 반환 고려</strong></td><td>지연 생성된 객체가 장기 유지되면 메모리 누수 위험</td><td>객체 생명주기 추적, <code>WeakReference</code>, 명시적 해제 설계</td></tr><tr><td></td><td><strong>캐시 연동 최적화</strong></td><td>지연 생성과 캐싱 전략을 결합하면 성능 시너지 발생</td><td>Lazy + Memoization 패턴, 캐시 미스 방지 로직 활용</td></tr><tr><td>🧪 <strong>테스트 관점</strong></td><td><strong>테스트 설계 복잡성</strong></td><td>Lazy 객체는 생성 시점이 달라 테스트 재현이 어려움</td><td>Mock 객체 주입, DI 설계, 테스트 전용 초기화 전략 활용</td></tr><tr><td></td><td><strong>동시성 테스트 필수</strong></td><td>동기화 누락 시 테스트에서는 잘 드러나지 않는 오류 발생 가능</td><td>멀티스레드 단위/통합 테스트 설계 및 자동화</td></tr><tr><td></td><td><strong>성능 검증 필요</strong></td><td>Lazy 도입으로 실질적인 성능 향상이 되었는지 확인 필요</td><td>APM 도구, 벤치마크 테스트 등을 통한 전후 비교 측정</td></tr><tr><td>📋 <strong>문서/운영 관점</strong></td><td><strong>문서화 및 팀 지식 공유</strong></td><td>객체 생성 시점, 예외 처리 흐름 등이 모호해질 수 있음</td><td>클래스 수준 주석, 설계 다이어그램, 지연 초기화 명시 문서 작성</td></tr><tr><td></td><td><strong>운영 중 모니터링</strong></td><td>Lazy 로딩 지연 또는 예외가 장애로 이어질 수 있음</td><td>초기화 시점 로그 기록, 메트릭 수집, 알림 시스템 연동</td></tr><tr><td></td><td><strong>콜드 스타트 대응</strong></td><td>서버리스/컨테이너 기반 환경에서 Lazy 객체 로딩이 초기 응답 시간에 영향</td><td>Pre-warm 전략, Init Container 활용, 헬스체크 지연 로딩 고려</td></tr><tr><td>🧱 <strong>아키텍처 연계</strong></td><td><strong>프레임워크와의 통합</strong></td><td>Spring,.NET 등은 Lazy 로딩을 프레임워크에서 지원</td><td><code>@Lazy</code>, <code>@Bean(lazyInit = true)</code>, DI 컨테이너 연계 설정</td></tr><tr><td></td><td><strong>다른 패턴과의 조합 고려</strong></td><td>싱글톤, 팩토리, 캐시, DI 등과 함께 사용될 때 설계 복잡도 상승</td><td>Lazy + Singleton, Lazy + Factory 조합 시 설계 명확화 필요</td></tr></tbody></table><ul><li><strong>Lazy Initialization 은 잘못 적용하면 오히려 성능을 악화시키거나 동시성 문제를 유발할 수 있음</strong></li><li><strong>적절한 대상 선정, 예외 처리, 테스트 전략, 운영 가시성 확보가 핵심</strong></li><li><strong>프레임워크 기능 적극 활용 및 설계 문서화로 유지보수성과 팀 협업 효율 증대</strong></li></ul><h3 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>고려사항</strong></th><th><strong>설명</strong></th><th><strong>권장사항</strong></th></tr></thead><tbody><tr><td><strong>메모리 관리</strong></td><td>객체 크기 최적화</td><td>불필요한 필드나 중첩 객체는 메모리 사용량을 증가시킴</td><td>경량 객체 설계, DTO 분리 등</td></tr><tr><td></td><td>GC 고려</td><td>초기화된 객체가 장기간 참조되면 GC 회수가 어려움</td><td>WeakReference, SoftReference, 캐시 만료 전략 사용</td></tr><tr><td></td><td>캐시 전략</td><td>지연 초기화된 객체를 재사용할 경우 캐시 필요</td><td>LRU 캐시 또는 전용 캐시 메커니즘 활용</td></tr><tr><td><strong>CPU 및 처리 비용</strong></td><td>초기화 로직 분산</td><td>계산 비용이 크거나 블로킹 연산이 포함된 초기화는 병목 유발</td><td>별도 스레드 또는 비동기 초기화 적용</td></tr><tr><td></td><td>불필요 초기화 방지</td><td>사용되지 않을 객체를 무조건 초기화하지 않도록 방지</td><td>조건문 또는 이벤트 기반 초기화 설계</td></tr><tr><td></td><td>초기화 비용 관리</td><td>초기에 비용이 너무 큰 객체는 지연화보다 선제적 초기화가 더 효과적일 수 있음</td><td>비용 - 효과 분석 기반 혼합 전략 적용 (Lazy + Preload)</td></tr><tr><td><strong>스레드 안전성/동기화</strong></td><td>Lock 오버헤드</td><td>DCL 또는 synchronized 사용 시 과도한 락으로 성능 저하</td><td>정적 내부 클래스 (Holder Idiom), CAS 또는 lock-free 설계 적용</td></tr><tr><td></td><td>예외 처리 및 복구</td><td>초기화 중 예외가 발생하면 객체 일관성이 깨질 수 있음</td><td>재시도 메커니즘, 기본값 제공, Circuit Breaker 패턴 적용</td></tr><tr><td></td><td>Traceability</td><td>언제 객체가 생성되었는지 추적 어려움 → 장애 진단 어려움</td><td>초기화 시점에 로깅, TraceId 연동, 이벤트 히스토리 기록</td></tr><tr><td><strong>I/O 및 외부 자원</strong></td><td>네트워크/DB 비용 최적화</td><td>초기화가 외부 API, DB 접근 등 포함 시 지연시간 증가</td><td>커넥션 풀, 배치 요청, Prefetch 전략 적용</td></tr><tr><td></td><td>배치 로딩 전략</td><td>여러 외부 자원을 개별적으로 지연 초기화하면 오히려 전체 로딩이 느려짐</td><td>일괄 로딩 (Batch Fetch), 프리페칭 (Prefetch) 전략 병행</td></tr><tr><td><strong>사용자 경험</strong></td><td>로딩 피드백 제공</td><td>사용자 요청 시 객체 생성되며 시간이 지연될 수 있음</td><td>스켈레톤 UI, 로딩 인디케이터, 프로그레스 바 구현</td></tr><tr><td></td><td>초기화 타이밍 최적화</td><td>사용자 체감 지연을 최소화해야 함</td><td>사용자 이벤트 기반 초기화 (예: 클릭, 스크롤), UI 프리페치 활용</td></tr><tr><td><strong>운영 및 관측</strong></td><td>성능 측정 및 모니터링</td><td>Lazy 적용 전후 성능 차이 확인 없이는 최적화 판단 어려움</td><td>APM 도구, Custom Metric, Java JMH, Core Web Vitals 등 활용</td></tr><tr><td></td><td>콜드 스타트 대응</td><td>서버리스, 컨테이너 환경에선 Lazy 객체 초기화가 응답 지연의 원인이 됨</td><td>Init Container, Pre-warming, 헬스체크 지연 초기화 제외 전략</td></tr><tr><td></td><td>전략 유연성</td><td>모든 대상에 Lazy 를 적용하면 오히려 성능 저하 발생 가능</td><td>비용 - 효율 분석, 사용률 기반 예측 로딩 전략 (ML 기반 로더 포함)</td></tr></tbody></table><h3 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>설계 패턴</strong></td><td>프록시 패턴</td><td>Virtual Proxy</td><td>실제 객체 대신 프록시를 통해 객체를 지연 생성하는 구조 구현</td></tr><tr><td></td><td>팩토리 패턴</td><td>Lazy Factory</td><td>객체 생성 책임을 분리하면서 지연 시점 제어 가능</td></tr><tr><td></td><td>Lazy Initialization Pattern</td><td>Lazy 자체를 패턴으로 활용하여 설계에 반영</td><td>Singleton, Factory 와 함께 자주 사용됨</td></tr><tr><td><strong>언어별 지원</strong></td><td>Kotlin</td><td><code>by lazy</code></td><td>Kotlin 언어 수준에서 제공하는 스레드 안전한 Lazy 기능</td></tr><tr><td></td><td>Java</td><td>Holder Pattern</td><td>JVM 클래스 로딩 메커니즘을 활용한 Lazy 구현 방식</td></tr><tr><td></td><td>C#</td><td><code>Lazy&lt;T></code></td><td>.NET 에서 표준으로 제공하는 Lazy 객체 래퍼</td></tr><tr><td></td><td>Go</td><td><code>sync.Once</code></td><td>한 번만 실행되는 스레드 안전 초기화 도구</td></tr><tr><td><strong>동시성 제어</strong></td><td>스레드 안전성</td><td>Double-Checked Locking</td><td>멀티스레드에서 초기화 중복을 방지하면서 성능을 최적화하는 대표 기법</td></tr><tr><td></td><td>락프리 프로그래밍</td><td>CAS(Compare-And-Swap)</td><td>고성능 동시성 제어를 위한 락프리 지연 초기화 구현</td></tr><tr><td></td><td>동기화 적용</td><td><code>synchronized</code>, <code>volatile</code></td><td>기본적인 동기화 수단, 실무에서 조합하여 사용되는 저수준 제어 기법</td></tr><tr><td><strong>성능 최적화</strong></td><td>메모리 관리</td><td>GC 절감, 객체 수명 관리</td><td>객체 생성을 최소화해 힙 메모리 사용을 줄이고 GC 부담 완화</td></tr><tr><td></td><td>캐시 전략</td><td>Memoization</td><td>연산 결과를 캐시에 저장하여 중복 계산을 방지하고 응답 시간 단축</td></tr><tr><td></td><td>적응형 로딩</td><td>ML 기반 예측 로딩</td><td>사용자 행동 패턴에 기반한 Lazy 시점 조정</td></tr><tr><td></td><td>성능 측정</td><td>Core Web Vitals (LCP)</td><td>웹 성능 지표를 통해 지연 로딩 효과를 정량적으로 분석</td></tr><tr><td><strong>웹 기술</strong></td><td>Intersection Observer</td><td>뷰포트 진입 감지</td><td>이미지/컴포넌트가 화면에 보일 때만 로딩하는 Lazy Loading API</td></tr><tr><td></td><td>Service Worker</td><td>오프라인 캐싱 + 지연 로딩 결합</td><td>Lazy 객체 및 리소스를 사전 캐시하여 네트워크 부하 분산</td></tr><tr><td><strong>함수형 개념</strong></td><td>Lazy Evaluation</td><td>지연 평가</td><td>함수형 언어에서 표현식의 실제 계산을 필요 시점으로 미루는 개념 (Haskell 등에서 기본 개념)</td></tr><tr><td><strong>ORM 기술</strong></td><td>Hibernate/JPA</td><td>프록시 객체를 통한 Lazy Loading</td><td>연관 엔티티를 프록시로 감싸 SQL 실행을 지연</td></tr><tr><td></td><td>N+1 문제</td><td>잘못된 Lazy 설정 시 발생하는 성능 문제</td><td>Fetch Join, Batch Fetch 등으로 보완 필요</td></tr><tr><td><strong>JIT/컴파일</strong></td><td>Just-In-Time Compilation</td><td>런타임 시점에 필요한 코드만 컴파일</td><td>지연 초기화와 유사한 " 필요할 때만 실행 " 전략 구현 가능</td></tr></tbody></table><h3 id=반드시-학습해야할-내용>반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#반드시-학습해야할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>기초 이론</strong></td><td>디자인 패턴</td><td>GoF 패턴, 프록시, 팩토리 메서드 패턴</td><td>객체 생성을 지연시키기 위한 구조 설계의 기초 개념</td></tr><tr><td></td><td>메모리 관리</td><td>JVM 메모리 모델, GC</td><td>Heap/Stack 구조 및 가비지 컬렉션 원리 이해</td></tr><tr><td><strong>동시성 처리</strong></td><td>스레드 안전성</td><td>동기화 메커니즘 (<code>synchronized</code>, <code>volatile</code>)</td><td>Lazy Initialization 에서 멀티스레드 안전성 확보 방법</td></tr><tr><td></td><td>락킹 전략</td><td>DCL, 락프리 (CAS), Holder Idiom</td><td>고급 동시성 제어 및 Lazy Singleton 구현 기법</td></tr><tr><td><strong>설계 패턴</strong></td><td>Lazy + Singleton</td><td>Lazy Singleton 구현 전략</td><td>초기화 시점 통제와 인스턴스 단일성 유지 결합</td></tr><tr><td></td><td>Lazy + Factory / Builder</td><td>객체 생성 책임 캡슐화와 Lazy 적용</td><td>유연한 객체 생성을 위해 팩토리 메서드 내 Lazy 적용</td></tr><tr><td></td><td>프록시 패턴</td><td>Virtual Proxy 구현</td><td>실제 객체 대신 지연 생성되는 프록시 구조</td></tr><tr><td><strong>언어별 기능</strong></td><td>Java / Kotlin / C#</td><td><code>Holder Pattern</code>, <code>by lazy</code>, <code>Lazy&lt;T></code></td><td>각 언어에서 제공하는 표준 Lazy 초기화 문법과 스레드 안전성 보장</td></tr><tr><td></td><td>Go</td><td><code>sync.Once</code></td><td>Go 언어의 멀티스레드 환경에서의 Lazy 초기화 구조</td></tr><tr><td><strong>실무 적용 전략</strong></td><td>DI 프레임워크 연동</td><td>Spring <code>@Lazy</code>, DI 컨테이너 전략</td><td>Spring 등에서 Lazy Bean 주입 및 초기화 최적화</td></tr><tr><td></td><td>테스트 전략</td><td>Lazy 객체 테스트, Mock/Stub 구성</td><td>지연 초기화된 객체의 테스트 설계 및 검증 방법</td></tr><tr><td></td><td>예외 처리 전략</td><td>초기화 실패 대응</td><td>초기화 실패 시 재시도, 기본값 처리 등 서비스 안정성 확보</td></tr><tr><td><strong>함수형 개념</strong></td><td>Lazy Evaluation</td><td>함수형 언어에서의 지연 평가 개념</td><td>Haskell, Scala 등에서 표현식 실행 시점을 미루는 평가 전략</td></tr><tr><td><strong>성능 최적화</strong></td><td>메모리 최적화</td><td>객체 수명 관리, 힙 메모리 절약</td><td>불필요한 객체 생성을 피하고 GC 부담을 줄이기 위한 Lazy 활용</td></tr><tr><td></td><td>캐싱 전략</td><td>Lazy + Memoization</td><td>객체/결과 재사용을 위한 캐시 결합 전략</td></tr><tr><td></td><td>자원 최적화</td><td>Lazy + 비동기 처리, Lazy + 배치 로딩</td><td>고비용 초기화를 별도 스레드나 배치 처리로 분산</td></tr><tr><td><strong>웹 & 클라우드</strong></td><td>브라우저 API 활용</td><td>Intersection Observer</td><td>이미지/컴포넌트 등의 지연 렌더링 구현을 위한 Viewport 감지 기술</td></tr><tr><td></td><td>웹 성능 측정</td><td>Core Web Vitals (<code>LCP</code>, <code>FID</code>, <code>CLS</code>)</td><td>Lazy 로딩 효과 정량화 및 UI 반응성 최적화 메트릭 분석</td></tr><tr><td></td><td>코드 스플리팅 / 로딩 전략</td><td>Webpack, Rollup, Dynamic Import</td><td>초기 번들 사이즈 축소를 위한 지연 코드 로딩 전략</td></tr><tr><td></td><td>서버리스 환경 최적화</td><td>콜드 스타트 지연 최소화</td><td>Lazy 객체 로딩으로 인한 응답 지연을 줄이기 위한 사전 워밍업 및 Init 전략</td></tr><tr><td><strong>데이터 계층 연계</strong></td><td>ORM 지연 로딩</td><td>Hibernate/JPA Lazy Fetch</td><td>연관 엔티티를 실제 사용 시점까지 로딩 지연</td></tr><tr><td></td><td>N+1 문제 해결</td><td>Fetch Join, Batch Fetch</td><td>잘못된 Lazy 설정으로 발생할 수 있는 성능 문제 보완</td></tr><tr><td></td><td>쿼리 최적화</td><td>SQL 성능, 인덱스, Join 전략</td><td>지연 초기화된 객체의 DB 조회 시 최적화 전략</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>기본 개념</td><td>Lazy Initialization</td><td>객체, 값, 리소스의 생성을 실제 사용 시점까지 미루는 초기화 패턴</td></tr><tr><td></td><td>Eager Initialization</td><td>객체나 값을 즉시 생성하여 초기화하는 방식</td></tr><tr><td></td><td>Lazy Evaluation</td><td>값이 실제로 필요한 시점까지 계산을 지연시키는 함수형 평가 기법</td></tr><tr><td></td><td>On-Demand Loading</td><td>요청이 있을 때만 리소스를 로드하는 방식</td></tr><tr><td></td><td>Predictive Loading</td><td>사용자 행동을 예측하여 선제적으로 리소스를 로드하는 방식</td></tr><tr><td>설계 패턴</td><td>Factory Method</td><td>객체 생성 로직을 캡슐화한 메서드 패턴</td></tr><tr><td></td><td>Builder Pattern</td><td>복잡한 객체 생성을 단계별로 캡슐화하는 패턴</td></tr><tr><td></td><td>Virtual Proxy</td><td>실제 객체 생성을 지연시키는 대리 객체를 사용하는 구조</td></tr><tr><td></td><td>Holder Pattern</td><td>JVM 클래스 로딩 시점을 활용하여 thread-safe 하게 지연 초기화하는 방식</td></tr><tr><td></td><td>Double-Checked Locking (DCL)</td><td>두 번의 null 체크와 동기화를 통해 스레드 안전성과 성능을 모두 확보하는 초기화 방식</td></tr><tr><td>동시성</td><td>Thread Safety</td><td>멀티스레드 환경에서 단일 초기화 및 안전한 동작을 보장하는 개념</td></tr><tr><td></td><td>Synchronization</td><td>여러 스레드 간 공유 리소스의 동기화를 통해 상태 일관성을 유지하는 기법</td></tr><tr><td></td><td>Volatile</td><td>Java 에서 변수의 가시성을 보장하는 키워드</td></tr><tr><td></td><td>CAS (Compare-And-Swap)</td><td>락 없이 원자적 연산을 수행하는 고성능 동시성 기법</td></tr><tr><td>언어별 지원</td><td>Kotlin <code>by lazy</code></td><td>Kotlin 의 thread-safe lazy delegate 프로퍼티 구문</td></tr><tr><td></td><td>C# <code>Lazy&lt;T></code></td><td>C#에서 제공하는 thread-safe Lazy 초기화 유틸 클래스</td></tr><tr><td></td><td>Go <code>sync.Once</code></td><td>Go 언어에서 단 한 번만 실행되는 초기화를 보장하는 구조체</td></tr><tr><td></td><td>Java Supplier</td><td>Java 8 의 함수형 인터페이스로, lazy 초기화를 함수형으로 구성할 수 있게 함</td></tr><tr><td>프레임워크 기능</td><td><code>@Lazy</code> (Spring)</td><td>Spring 프레임워크에서 Bean 생성을 지연시키는 어노테이션</td></tr><tr><td>객체 구조</td><td>Static Inner Class</td><td>외부 인스턴스를 참조하지 않고 독립적으로 동작하는 클래스로, Holder 패턴에서 사용됨</td></tr><tr><td>캐싱 및 자원관리</td><td>Cache</td><td>계산 결과나 객체를 저장하여 재사용함으로써 초기화를 회피하거나 성능 최적화에 사용</td></tr><tr><td></td><td>WeakReference</td><td>GC 대상이 될 수 있는 참조 방식으로 메모리 누수를 방지</td></tr><tr><td>웹 기술</td><td>Intersection Observer</td><td>요소의 뷰포트 진입 여부를 감지하여 이미지나 콘텐츠의 지연 로딩 구현에 사용</td></tr><tr><td></td><td>Critical Rendering Path</td><td>브라우저가 HTML, CSS, JS 를 해석하고 화면에 렌더링하는 주요 경로</td></tr><tr><td></td><td>Above the Fold</td><td>사용자가 스크롤 없이 볼 수 있는 화면 상단 영역으로, 로딩 우선순위에 중요한 위치</td></tr><tr><td></td><td>LCP (Largest Contentful Paint)</td><td>사용자가 보는 주요 콘텐츠가 완전히 렌더링된 시간</td></tr><tr><td></td><td>FCP (First Contentful Paint)</td><td>첫 번째 텍스트, 이미지 등 콘텐츠가 렌더링되기 시작하는 시점</td></tr><tr><td></td><td>TTFB (Time To First Byte)</td><td>브라우저가 서버로부터 첫 바이트를 받기까지의 시간</td></tr><tr><td>서버리스/클라우드</td><td>Cold Start</td><td>서버리스 환경에서 초기 요청 시 함수 시작으로 인한 응답 지연</td></tr><tr><td>데이터베이스</td><td>N+1 문제</td><td>지연 로딩으로 인해 연관 데이터를 조회할 때 과도한 쿼리 요청이 발생하는 문제</td></tr><tr><td></td><td>Fetch Strategy</td><td>연관 데이터를 즉시 로딩 또는 지연 로딩할지 결정하는 JPA 전략</td></tr><tr><td></td><td>Persistence Context</td><td>JPA 에서 엔티티 객체의 상태를 관리하는 환경</td></tr><tr><td>테스트 전략</td><td>Lazy 객체 테스트</td><td>지연 초기화된 객체의 상태, 생성 여부, 부작용 등을 검증하는 테스트 방법론</td></tr><tr><td>객체 구조</td><td>Proxy Object</td><td>실제 객체 대신 접근을 위임받는 대리 객체 (Virtual Proxy 포함)</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><a href=https://en.wikipedia.org/wiki/Lazy_initialization>Lazy initialization - Wikipedia</a></li><li><a href=https://en.wikipedia.org/wiki/Initialization-on-demand_holder_idiom>Initialization-on-demand holder idiom - Wikipedia</a></li><li><a href=https://en.wikipedia.org/wiki/Double-checked_locking>Double-checked locking - Wikipedia</a></li><li><a href=https://www.geeksforgeeks.org/lazy-loading-design-pattern/>Lazy Loading Design Pattern - GeeksforGeeks</a></li><li><a href=https://www.baeldung.com/java-lazy-initialization>Java Lazy Initialization - Baeldung</a></li><li><a href=https://learn.microsoft.com/en-us/dotnet/framework/performance/lazy-initialization>Lazy Initialization - .NET Framework | Microsoft Learn</a></li><li><a href=https://learn.microsoft.com/en-us/dotnet/api/system.lazy-1>Lazy<code>&lt;T> Class</code> - Microsoft Learn</a></li><li><a href=https://www.baeldung.com/spring-boot-lazy-initialization>Spring Boot Lazy Initialization - Baeldung</a></li><li><a href=https://dev.to/isaactony/eager-vs-lazy-initialization-of-spring-beans-552k>Lazy Initialization in Spring Boot - DEV Community</a></li><li><a href=https://kotlinlang.org/docs/delegated-properties.html#lazy>Kotlin Delegated Properties: Lazy - KotlinLang.org</a></li><li><a href=https://goperf.dev/01-common-patterns/lazy-init/>Lazy Initialization for Performance in Go - GoPerf.dev</a></li><li><a href=https://vladmihalcea.com/the-best-way-to-lazy-load-entity-attributes-using-jpa-and-hibernate/>The Best Way to Lazy Load Entity Attributes in Hibernate - Vlad Mihalcea</a></li><li><a href=https://www.baeldung.com/hibernate-lazy-eager-loading>Eager vs Lazy Loading in Hibernate - Baeldung</a></li><li><a href=https://www.sitepoint.com/five-techniques-lazy-load-images-website-performance/>5 Techniques for Lazy Loading Images - SitePoint</a></li><li><a href=https://imagekit.io/blog/lazy-loading-images-complete-guide/>Lazy Loading Images – The Complete Guide - ImageKit.io</a></li><li><a href=https://web.dev/articles/browser-level-image-lazy-loading>Browser-level image lazy loading for the web - web.dev</a></li><li><a href=https://stackoverflow.com/questions/978759/what-is-lazy-initialization-and-why-is-it-useful>What is Lazy Initialization and Why is it Useful? - Stack Overflow</a></li><li><a href=https://stackoverflow.com/questions/8297705/how-to-implement-thread-safe-lazy-initialization>How to Implement Thread-Safe Lazy Initialization? - Stack Overflow</a></li><li><a href=https://www.geeksforgeeks.org/java-program-to-demonstrate-the-lazy-initialization-thread-safe/>Java Program to Demonstrate Lazy Initialization Thread-Safe - GeeksforGeeks</a></li><li><a href=https://towardsdev.com/unlocking-efficiency-mastering-lazy-initialization-in-spring-boot-1d19d8200063>Mastering Lazy Initialization in Spring Boot - TowardsDev</a></li></ul><hr></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/software-engineering/>Software-Engineering</a></li><li><a href=https://buenhyden.github.io/tags/design-and-architecture/>Design-and-Architecture</a></li><li><a href=https://buenhyden.github.io/tags/software-design-patterns/>Software-Design-Patterns</a></li><li><a href=https://buenhyden.github.io/tags/lazy-initialization/>Lazy-Initialization</a></li><li><a href=https://buenhyden.github.io/tags/performance-optimization/>Performance-Optimization</a></li><li><a href=https://buenhyden.github.io/tags/resource-management/>Resource-Management</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/programming-languages/javascript-and-typescript/runtime-environments/bunjs/bunjs-vs-nodejs/><span class=title>« Prev</span><br><span>BunJS vs. NodeJS</span>
</a><a class=next href=https://buenhyden.github.io/posts/software-engineering/service-and-application-engineering/api-design-and-implementation/api-styles/resource-style/rest/error-handling/rfc-9457/><span class=title>Next »</span><br><span>RFC 9457</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>