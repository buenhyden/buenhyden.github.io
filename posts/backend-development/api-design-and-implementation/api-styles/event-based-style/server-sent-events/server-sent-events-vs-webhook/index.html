<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Server-Sent Events vs. Webhook | hyunyoun's Blog</title>
<meta name=keywords content="Backend Development,API-Design-and-Implementation,Real-time-APIs,Types,Server-sent-Events"><meta name=description content="Webhook과 Server-Sent Events(SSE)는 실시간 데이터 전송을 위한 웹 기술이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/event-based-style/server-sent-events/server-sent-events-vs-webhook/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.8762af4fa9ee176c57f72565b721f234162fc7a9c882a271e0a1f68c4e89fb34.css integrity="sha256-h2KvT6nuF2xX9yVltyHyNBYvx6nIgqJx4KH2jE6J+zQ=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/event-based-style/server-sent-events/server-sent-events-vs-webhook/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/event-based-style/server-sent-events/server-sent-events-vs-webhook/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Server-Sent Events vs. Webhook"><meta property="og:description" content="Webhook과 Server-Sent Events(SSE)는 실시간 데이터 전송을 위한 웹 기술이다."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-03-08T06:04:00+00:00"><meta property="article:modified_time" content="2025-03-08T06:04:00+00:00"><meta property="article:tag" content="Backend-Development"><meta property="article:tag" content="API-Design-and-Implementation"><meta property="article:tag" content="Real-Time-APIs"><meta property="article:tag" content="Types"><meta property="article:tag" content="Server-Sent-Events"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Server-Sent Events vs. Webhook"><meta name=twitter:description content="Webhook과 Server-Sent Events(SSE)는 실시간 데이터 전송을 위한 웹 기술이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"기술 블로그","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Backend Development","item":"https://buenhyden.github.io/posts/backend-development/"},{"@type":"ListItem","position":3,"name":"API Design and Implementation","item":"https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/"},{"@type":"ListItem","position":4,"name":"API Styles","item":"https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/"},{"@type":"ListItem","position":5,"name":"Event-based Style","item":""},{"@type":"ListItem","position":6,"name":"Server sent Events","item":"https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/event-based-style/server-sent-events/"},{"@type":"ListItem","position":7,"name":"Server-Sent Events vs. Webhook","item":"https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/event-based-style/server-sent-events/server-sent-events-vs-webhook/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Server-Sent Events vs. Webhook","name":"Server-Sent Events vs. Webhook","description":"Webhook과 Server-Sent Events(SSE)는 실시간 데이터 전송을 위한 웹 기술이다.","keywords":["Backend Development","API-Design-and-Implementation","Real-time-APIs","Types","Server-sent-Events"],"articleBody":"Server-Sent Events vs. Webhook 실시간 애플리케이션을 개발할 때 서버와 클라이언트 간의 효율적인 통신 방식을 선택하는 것은 매우 중요하다. 서버 전송 이벤트(Server-Sent Events, SSE)와 웹훅(Webhook)은 모두 서버에서 클라이언트로 데이터를 전달하는 방법이지만, 그 작동 방식과 적합한 사용 사례가 크게 다르다.\n서버 전송 이벤트(SSE) 기본 개념 서버 전송 이벤트(SSE)는 HTTP 연결을 통해 서버에서 클라이언트로 단방향 실시간 이벤트 스트림을 전송하는 기술이다. HTML5 표준의 일부로, 웹 브라우저에서 EventSource API를 통해 구현된다. SSE는 표준 HTTP 프로토콜 위에서 작동하며, 별도의 프로토콜 전환 없이 실시간 데이터 푸시가 가능하다.\n작동 원리 클라이언트는 EventSource 객체를 사용하여 서버에 HTTP 연결을 요청한다. 서버는 text/event-stream 콘텐츠 유형으로 응답하고, 연결을 유지한다. 서버는 필요할 때마다 이벤트 형식의 데이터를 스트림으로 전송한다. 클라이언트는 수신된 이벤트를 처리하기 위한 이벤트 리스너를 설정한다. 연결이 끊어지면 클라이언트는 자동으로 재연결을 시도한다. 코드 예시 클라이언트 측 (JavaScript):\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 // EventSource 객체 생성 const eventSource = new EventSource('/api/events'); // 메시지 수신 이벤트 처리 eventSource.onmessage = function(event) { const data = JSON.parse(event.data); console.log('새 이벤트 수신:', data); updateUI(data); }; // 특정 이벤트 타입 처리 eventSource.addEventListener('update', function(event) { const updateData = JSON.parse(event.data); handleUpdate(updateData); }); // 오류 처리 eventSource.onerror = function(error) { console.error('SSE 연결 오류:', error); }; 서버 측 (Node.js):\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 app.get('/api/events', (req, res) =\u003e { // SSE 헤더 설정 res.writeHead(200, { 'Content-Type': 'text/event-stream', 'Cache-Control': 'no-cache', 'Connection': 'keep-alive' }); // 주기적으로 이벤트 전송 const intervalId = setInterval(() =\u003e { const data = { timestamp: Date.now(), value: Math.random() }; // 일반 메시지 전송 res.write(`data: ${JSON.stringify(data)}\\n\\n`); // 특정 이벤트 타입으로 전송 res.write(`event: update\\ndata: ${JSON.stringify(data)}\\n\\n`); }, 5000); // 연결 종료 시 정리 req.on('close', () =\u003e { clearInterval(intervalId); }); }); 웹훅(Webhook) 기본 개념 웹훅(Webhook)은 특정 이벤트가 발생했을 때 서버가 다른 외부 서비스(클라이언트)의 URL로 HTTP POST 요청을 보내는 방식이다. 일종의 “역방향 API” 또는 “콜백\"으로, 클라이언트가 서버에 지속적으로 요청을 보내는 대신, 서버가 이벤트 발생 시에만 클라이언트에게 알림을 보낸다.\n작동 원리 클라이언트는 자신의 URL(콜백 URL)을 서버에 등록한다. 서버는 특정 이벤트가 발생하면 해당 URL로 HTTP POST 요청을 보낸다. 클라이언트는 이 요청을 받아 처리하고, 일반적으로 200 OK 응답을 반환한다. 서버는 응답 코드에 따라 웹훅 전송 성공 여부를 판단한다. 실패 시 서버는 보통 재시도 메커니즘을 구현한다. 코드 예시 웹훅 수신자 (웹 서버, Node.js):\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 const express = require('express'); const app = express(); app.use(express.json()); // 웹훅 엔드포인트 app.post('/webhook', (req, res) =\u003e { const event = req.body; console.log('웹훅 수신:', event); // 이벤트 유형에 따른 처리 switch(event.type) { case 'payment.success': processPayment(event.data); break; case 'user.created': onboardUser(event.data); break; default: console.log('처리되지 않은 이벤트 유형:', event.type); } // 성공 응답 res.status(200).send('Event received'); }); app.listen(3000, () =\u003e { console.log('웹훅 수신 서버가 포트 3000에서 실행 중입니다.'); }); 웹훅 발신자 (이벤트 소스, Node.js):\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 async function sendWebhook(event) { try { // 등록된 웹훅 URL로 POST 요청 전송 const response = await fetch('https://client-server.com/webhook', { method: 'POST', headers: { 'Content-Type': 'application/json', 'X-Webhook-Signature': generateSignature(event), // 보안을 위한 서명 }, body: JSON.stringify(event) }); if (response.ok) { console.log('웹훅 전송 성공'); return true; } else { console.error('웹훅 전송 실패:', response.status); // 필요시 재시도 로직 return false; } } catch (error) { console.error('웹훅 전송 중 오류:', error); // 필요시 재시도 로직 return false; } } // 결제 성공 시 웹훅 전송 예시 function onPaymentSuccess(payment) { // 비즈니스 로직 처리 updateDatabase(payment); // 웹훅 이벤트 전송 sendWebhook({ type: 'payment.success', timestamp: Date.now(), data: { paymentId: payment.id, amount: payment.amount, currency: payment.currency, customerId: payment.customerId } }); } SSE와 Webhook의 비교 분석 핵심 차이점 두 기술의 가장 근본적인 차이점은 커뮤니케이션 모델에 있다:\nSSE는 클라이언트가 서버에 연결하여 지속적인 스트림으로 데이터를 받는 푸시 모델이다. 웹훅은 서버가 특정 이벤트 발생 시 클라이언트의 URL로 요청을 보내는 콜백 모델이다. 상세 비교표 특성 서버 전송 이벤트(SSE) 웹훅(Webhook) 통신 방향 서버 → 클라이언트 (단방향) 서버 → 클라이언트 (단방향) 연결 유형 지속적 연결 (긴 HTTP 연결) 일시적 연결 (개별 HTTP 요청) 프로토콜 HTTP/HTTPS HTTP/HTTPS 클라이언트 요구사항 웹 브라우저 또는 EventSource 지원 클라이언트 공개적으로 접근 가능한 HTTP 엔드포인트 표준화 HTML5 표준의 일부 비공식 패턴 (각 서비스마다 구현 다름) 재연결 메커니즘 자동 재연결 내장 수동 구현 필요 (재시도 로직) 이벤트 순서 순서 보장 (스트림 특성) 보장되지 않음 (네트워크 지연 등으로 순서 바뀔 수 있음) 지연 시간 매우 낮음 (실시간) 상대적으로 높음 (요청-응답 사이클) 메시지 전달 보증 연결이 유지되는 동안 보장 재시도 로직 구현 필요 보안 일반적인 HTTP 보안 매커니즘 서명, 토큰, IP 제한 등 추가 보안 구현 필요 부하 분산 연결 유지로 인한 부하 발생 가능 개별 요청으로 부하 분산 용이 방화벽 문제 클라이언트에서 서버로의 접근 필요 서버에서 클라이언트로 접근 가능해야 함 (공개 URL) 상태 관리 연결 상태 관리 필요 상태 비저장(stateless) 방식 브라우저 지원 대부분의 현대 브라우저 지원 브라우저 직접 수신 불가 (서버 필요) 데이터 형식 text/event-stream (주로 JSON) 일반적으로 JSON 사용 사례 대시보드, 실시간 알림, 주식 시세 등 결제 처리, 웹훅 통합, CI/CD 파이프라인 등 확장성 다수의 클라이언트 연결 시 확장 어려움 상대적으로 더 확장 용이 구현 복잡성 비교적 단순 중간 정도 (인증, 재시도 로직 등 구현 필요) 세부 비교 분석 통신 모델과 연결 유형 SSE는 클라이언트가 서버에 지속적인 HTTP 연결을 유지하며, 서버는 해당 연결을 통해 이벤트를 지속적으로 스트리밍한다. 이러한 지속적 연결 방식은 실시간성이 높지만, 서버에 더 많은 리소스가 필요하다.\n웹훅은 각 이벤트마다 새로운 HTTP 요청을 생성하는 일시적 연결 방식이다. 이는 서버 리소스를 효율적으로 사용할 수 있지만, 지속적인 실시간 업데이트보다는 간헐적인 알림에 더 적합하다.\n클라이언트 요구사항 SSE는 클라이언트가 EventSource API를 지원해야 하며, 주로 웹 브라우저 환경에서 사용된다. 모바일 앱이나 다른 환경에서는 별도의 라이브러리가 필요할 수 있다.\n웹훅은 클라이언트가 공개적으로 접근 가능한 HTTP 엔드포인트를 가지고 있어야 한다. 이는 주로 서버-서버 통신에 적합하며, 웹 브라우저와 같은 클라이언트 환경에서는 직접 수신이 불가능하다.\n이벤트 전달 신뢰성 SSE는 이벤트에 ID를 부여하여 재연결 시 마지막으로 수신한 이벤트 이후의 데이터만 받을 수 있게 한다. 이는 메시지 손실을 방지하고 순서를 보장한다.\n웹훅은 기본적으로 이벤트 순서나 전달 보증을 제공하지 않는다. 네트워크 지연이나 오류로 인해 이벤트가 순서대로 도착하지 않거나 손실될 수 있다. 이를 해결하기 위해 별도의 재시도 메커니즘, 이벤트 식별자, 타임스탬프 등을 구현해야 한다.\n보안 고려사항 SSE는 일반적인 HTTP 보안 메커니즘(HTTPS, 쿠키, 인증 헤더 등)을 사용한다. 클라이언트가 서버에 연결하는 구조이므로, 서버 측에서 인증 및 권한 부여를 관리할 수 있다.\n웹훅은 서버가 클라이언트에게 요청을 보내는 구조이므로, 추가적인 보안 조치가 필요하다.\n일반적으로 다음과 같은 방법을 사용한다:\n시크릿 토큰을 사용한 요청 서명 IP 주소 제한 HMAC 기반 메시지 검증 타임스탬프와 난스(nonce) 검증 확장성 SSE는 각 클라이언트마다 서버와의 지속적인 연결을 유지해야 하므로, 대규모 동시 사용자를 처리할 때 확장성 문제가 발생할 수 있다. 이를 해결하기 위해 로드 밸런싱, 메시지 큐 등의 추가 인프라가 필요할 수 있다.\n웹훅은 필요할 때만 개별 HTTP 요청을 보내는 방식이므로, 일반적으로 더 나은 확장성을 제공한다. 그러나 많은 수의 웹훅을 빠르게 처리해야 하는 경우, 큐 시스템과 비동기 처리가 필요할 수 있다.\n적합한 사용 사례 SSE에 적합한 사용 사례 실시간 대시보드: 지속적으로 업데이트되는 분석 데이터, 시스템 모니터링 정보 등을 표시하는 대시보드 라이브 피드: 소셜 미디어 타임라인, 뉴스 피드, 댓글 스트림 등 주식 시세 및 금융 데이터: 실시간으로 변동되는 시장 데이터 스포츠 경기 중계: 실시간 점수, 통계, 이벤트 업데이트 사용자 알림: 브라우저나 웹 애플리케이션에서의 실시간 알림 채팅 애플리케이션: 단방향 메시지 수신(전송은 별도 API 필요) 웹훅에 적합한 사용 사례 결제 프로세싱: 결제 완료, 실패, 환불 등의 상태 변경 알림 외부 서비스 통합: CRM, 이메일 마케팅, 고객 지원 시스템 간 통합 CI/CD 파이프라인: 코드 변경, 빌드 완료, 배포 완료 등의 이벤트 알림 IoT 이벤트 처리: 센서 데이터가 특정 임계값을 초과할 때 알림 콘텐츠 관리: 새 콘텐츠 게시, 업데이트, 승인 등의 이벤트 비동기 작업 완료 알림: 장시간 실행되는 작업이 완료되었을 때 알림 하이브리드 접근법 많은 현대적인 시스템에서는 SSE와 웹훅을 상호 보완적으로 사용한다:\n웹훅 + 폴링: 웹훅이 실패할 경우를 대비해 주기적 폴링을 백업으로 구현 웹훅 → 메시지 큐 → SSE: 웹훅으로 이벤트를 수신하고, 메시지 큐를 통해 SSE로 클라이언트에 전달 상황별 선택: 실시간성이 중요한 기능은 SSE, 중요 이벤트 알림은 웹훅 사용 용어 정리 용어 설명 참고 및 출처 ","wordCount":"1323","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2025-03-08T06:04:00Z","dateModified":"2025-03-08T06:04:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/event-based-style/server-sent-events/server-sent-events-vs-webhook/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>기술 블로그</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend-development/>Backend Development</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/>API Design and Implementation</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/>API Styles</a>&nbsp;»&nbsp;<a href>Event-based Style</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/event-based-style/server-sent-events/>Server sent Events</a></div><h1 class="post-title entry-hint-parent">Server-Sent Events vs. Webhook</h1><div class=post-description>Webhook과 Server-Sent Events(SSE)는 실시간 데이터 전송을 위한 웹 기술이다.</div><div class=post-meta><span title='2025-03-08 06:04:00 +0000 UTC'>March 8, 2025</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Backend%20Development/API%20Design%20and%20Implementation/API%20Styles/Event-based%20Style/Server%20sent%20Events/Server-Sent-Events-vs-Webhook.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#server-sent-events-vs-webhook>Server-Sent Events vs. Webhook</a><ul><li><a href=#서버-전송-이벤트sse>서버 전송 이벤트(SSE)</a></li><li><a href=#웹훅webhook>웹훅(Webhook)</a></li><li><a href=#sse와-webhook의-비교-분석>SSE와 Webhook의 비교 분석</a></li><li><a href=#적합한-사용-사례>적합한 사용 사례</a></li><li><a href=#하이브리드-접근법>하이브리드 접근법</a></li></ul></li><li><a href=#용어-정리>용어 정리</a></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=server-sent-events-vs-webhook>Server-Sent Events vs. Webhook<a hidden class=anchor aria-hidden=true href=#server-sent-events-vs-webhook>#</a></h2><p>실시간 애플리케이션을 개발할 때 서버와 클라이언트 간의 효율적인 통신 방식을 선택하는 것은 매우 중요하다. 서버 전송 이벤트(Server-Sent Events, SSE)와 웹훅(Webhook)은 모두 서버에서 클라이언트로 데이터를 전달하는 방법이지만, 그 작동 방식과 적합한 사용 사례가 크게 다르다.</p><h3 id=서버-전송-이벤트sse>서버 전송 이벤트(SSE)<a hidden class=anchor aria-hidden=true href=#서버-전송-이벤트sse>#</a></h3><h4 id=기본-개념>기본 개념<a hidden class=anchor aria-hidden=true href=#기본-개념>#</a></h4><p>서버 전송 이벤트(SSE)는 HTTP 연결을 통해 서버에서 클라이언트로 단방향 실시간 이벤트 스트림을 전송하는 기술이다. HTML5 표준의 일부로, 웹 브라우저에서 <code>EventSource</code> API를 통해 구현된다. SSE는 표준 HTTP 프로토콜 위에서 작동하며, 별도의 프로토콜 전환 없이 실시간 데이터 푸시가 가능하다.</p><h4 id=작동-원리>작동 원리<a hidden class=anchor aria-hidden=true href=#작동-원리>#</a></h4><ol><li>클라이언트는 <code>EventSource</code> 객체를 사용하여 서버에 HTTP 연결을 요청한다.</li><li>서버는 <code>text/event-stream</code> 콘텐츠 유형으로 응답하고, 연결을 유지한다.</li><li>서버는 필요할 때마다 이벤트 형식의 데이터를 스트림으로 전송한다.</li><li>클라이언트는 수신된 이벤트를 처리하기 위한 이벤트 리스너를 설정한다.</li><li>연결이 끊어지면 클라이언트는 자동으로 재연결을 시도한다.</li></ol><h4 id=코드-예시>코드 예시<a hidden class=anchor aria-hidden=true href=#코드-예시>#</a></h4><p><strong>클라이언트 측 (JavaScript):</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// EventSource 객체 생성
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>eventSource</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>EventSource</span><span class=p>(</span><span class=s1>&#39;/api/events&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 메시지 수신 이벤트 처리
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>eventSource</span><span class=p>.</span><span class=nx>onmessage</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>data</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;새 이벤트 수신:&#39;</span><span class=p>,</span> <span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>updateUI</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 특정 이벤트 타입 처리
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>eventSource</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;update&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>updateData</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>handleUpdate</span><span class=p>(</span><span class=nx>updateData</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 오류 처리
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>eventSource</span><span class=p>.</span><span class=nx>onerror</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;SSE 연결 오류:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>서버 측 (Node.js):</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14>14</a>
</span><span class=lnt id=hl-1-15><a class=lnlinks href=#hl-1-15>15</a>
</span><span class=lnt id=hl-1-16><a class=lnlinks href=#hl-1-16>16</a>
</span><span class=lnt id=hl-1-17><a class=lnlinks href=#hl-1-17>17</a>
</span><span class=lnt id=hl-1-18><a class=lnlinks href=#hl-1-18>18</a>
</span><span class=lnt id=hl-1-19><a class=lnlinks href=#hl-1-19>19</a>
</span><span class=lnt id=hl-1-20><a class=lnlinks href=#hl-1-20>20</a>
</span><span class=lnt id=hl-1-21><a class=lnlinks href=#hl-1-21>21</a>
</span><span class=lnt id=hl-1-22><a class=lnlinks href=#hl-1-22>22</a>
</span><span class=lnt id=hl-1-23><a class=lnlinks href=#hl-1-23>23</a>
</span><span class=lnt id=hl-1-24><a class=lnlinks href=#hl-1-24>24</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/api/events&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// SSE 헤더 설정
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>res</span><span class=p>.</span><span class=nx>writeHead</span><span class=p>(</span><span class=mi>200</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span> <span class=s1>&#39;text/event-stream&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;Cache-Control&#39;</span><span class=o>:</span> <span class=s1>&#39;no-cache&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;Connection&#39;</span><span class=o>:</span> <span class=s1>&#39;keep-alive&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 주기적으로 이벤트 전송
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>intervalId</span> <span class=o>=</span> <span class=nx>setInterval</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>data</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>timestamp</span><span class=o>:</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>(),</span> <span class=nx>value</span><span class=o>:</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 일반 메시지 전송
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>res</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=sb>`data: </span><span class=si>${</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span><span class=si>}</span><span class=sb>\n\n`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 특정 이벤트 타입으로 전송
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>res</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=sb>`event: update\ndata: </span><span class=si>${</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span><span class=si>}</span><span class=sb>\n\n`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=mi>5000</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 연결 종료 시 정리
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>req</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;close&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>clearInterval</span><span class=p>(</span><span class=nx>intervalId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=웹훅webhook>웹훅(Webhook)<a hidden class=anchor aria-hidden=true href=#웹훅webhook>#</a></h3><h4 id=기본-개념-1>기본 개념<a hidden class=anchor aria-hidden=true href=#기본-개념-1>#</a></h4><p>웹훅(Webhook)은 특정 이벤트가 발생했을 때 서버가 다른 외부 서비스(클라이언트)의 URL로 HTTP POST 요청을 보내는 방식이다. 일종의 &ldquo;역방향 API&rdquo; 또는 &ldquo;콜백"으로, 클라이언트가 서버에 지속적으로 요청을 보내는 대신, 서버가 이벤트 발생 시에만 클라이언트에게 알림을 보낸다.</p><h4 id=작동-원리-1>작동 원리<a hidden class=anchor aria-hidden=true href=#작동-원리-1>#</a></h4><ol><li>클라이언트는 자신의 URL(콜백 URL)을 서버에 등록한다.</li><li>서버는 특정 이벤트가 발생하면 해당 URL로 HTTP POST 요청을 보낸다.</li><li>클라이언트는 이 요청을 받아 처리하고, 일반적으로 200 OK 응답을 반환한다.</li><li>서버는 응답 코드에 따라 웹훅 전송 성공 여부를 판단한다.</li><li>실패 시 서버는 보통 재시도 메커니즘을 구현한다.</li></ol><h4 id=코드-예시-1>코드 예시<a hidden class=anchor aria-hidden=true href=#코드-예시-1>#</a></h4><p><strong>웹훅 수신자 (웹 서버, Node.js):</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span><span class=lnt id=hl-2-20><a class=lnlinks href=#hl-2-20>20</a>
</span><span class=lnt id=hl-2-21><a class=lnlinks href=#hl-2-21>21</a>
</span><span class=lnt id=hl-2-22><a class=lnlinks href=#hl-2-22>22</a>
</span><span class=lnt id=hl-2-23><a class=lnlinks href=#hl-2-23>23</a>
</span><span class=lnt id=hl-2-24><a class=lnlinks href=#hl-2-24>24</a>
</span><span class=lnt id=hl-2-25><a class=lnlinks href=#hl-2-25>25</a>
</span><span class=lnt id=hl-2-26><a class=lnlinks href=#hl-2-26>26</a>
</span><span class=lnt id=hl-2-27><a class=lnlinks href=#hl-2-27>27</a>
</span><span class=lnt id=hl-2-28><a class=lnlinks href=#hl-2-28>28</a>
</span><span class=lnt id=hl-2-29><a class=lnlinks href=#hl-2-29>29</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=nx>json</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 웹훅 엔드포인트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/webhook&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>event</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>body</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;웹훅 수신:&#39;</span><span class=p>,</span> <span class=nx>event</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 이벤트 유형에 따른 처리
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>switch</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s1>&#39;payment.success&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>            <span class=nx>processPayment</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s1>&#39;user.created&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>            <span class=nx>onboardUser</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>default</span><span class=o>:</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;처리되지 않은 이벤트 유형:&#39;</span><span class=p>,</span> <span class=nx>event</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 성공 응답
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>200</span><span class=p>).</span><span class=nx>send</span><span class=p>(</span><span class=s1>&#39;Event received&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>3000</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;웹훅 수신 서버가 포트 3000에서 실행 중입니다.&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>웹훅 발신자 (이벤트 소스, Node.js):</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span><span class=lnt id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a>
</span><span class=lnt id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a>
</span><span class=lnt id=hl-3-17><a class=lnlinks href=#hl-3-17>17</a>
</span><span class=lnt id=hl-3-18><a class=lnlinks href=#hl-3-18>18</a>
</span><span class=lnt id=hl-3-19><a class=lnlinks href=#hl-3-19>19</a>
</span><span class=lnt id=hl-3-20><a class=lnlinks href=#hl-3-20>20</a>
</span><span class=lnt id=hl-3-21><a class=lnlinks href=#hl-3-21>21</a>
</span><span class=lnt id=hl-3-22><a class=lnlinks href=#hl-3-22>22</a>
</span><span class=lnt id=hl-3-23><a class=lnlinks href=#hl-3-23>23</a>
</span><span class=lnt id=hl-3-24><a class=lnlinks href=#hl-3-24>24</a>
</span><span class=lnt id=hl-3-25><a class=lnlinks href=#hl-3-25>25</a>
</span><span class=lnt id=hl-3-26><a class=lnlinks href=#hl-3-26>26</a>
</span><span class=lnt id=hl-3-27><a class=lnlinks href=#hl-3-27>27</a>
</span><span class=lnt id=hl-3-28><a class=lnlinks href=#hl-3-28>28</a>
</span><span class=lnt id=hl-3-29><a class=lnlinks href=#hl-3-29>29</a>
</span><span class=lnt id=hl-3-30><a class=lnlinks href=#hl-3-30>30</a>
</span><span class=lnt id=hl-3-31><a class=lnlinks href=#hl-3-31>31</a>
</span><span class=lnt id=hl-3-32><a class=lnlinks href=#hl-3-32>32</a>
</span><span class=lnt id=hl-3-33><a class=lnlinks href=#hl-3-33>33</a>
</span><span class=lnt id=hl-3-34><a class=lnlinks href=#hl-3-34>34</a>
</span><span class=lnt id=hl-3-35><a class=lnlinks href=#hl-3-35>35</a>
</span><span class=lnt id=hl-3-36><a class=lnlinks href=#hl-3-36>36</a>
</span><span class=lnt id=hl-3-37><a class=lnlinks href=#hl-3-37>37</a>
</span><span class=lnt id=hl-3-38><a class=lnlinks href=#hl-3-38>38</a>
</span><span class=lnt id=hl-3-39><a class=lnlinks href=#hl-3-39>39</a>
</span><span class=lnt id=hl-3-40><a class=lnlinks href=#hl-3-40>40</a>
</span><span class=lnt id=hl-3-41><a class=lnlinks href=#hl-3-41>41</a>
</span><span class=lnt id=hl-3-42><a class=lnlinks href=#hl-3-42>42</a>
</span><span class=lnt id=hl-3-43><a class=lnlinks href=#hl-3-43>43</a>
</span><span class=lnt id=hl-3-44><a class=lnlinks href=#hl-3-44>44</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>sendWebhook</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 등록된 웹훅 URL로 POST 요청 전송
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>fetch</span><span class=p>(</span><span class=s1>&#39;https://client-server.com/webhook&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>method</span><span class=o>:</span> <span class=s1>&#39;POST&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span> <span class=s1>&#39;application/json&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;X-Webhook-Signature&#39;</span><span class=o>:</span> <span class=nx>generateSignature</span><span class=p>(</span><span class=nx>event</span><span class=p>),</span> <span class=c1>// 보안을 위한 서명
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nx>body</span><span class=o>:</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>ok</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;웹훅 전송 성공&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;웹훅 전송 실패:&#39;</span><span class=p>,</span> <span class=nx>response</span><span class=p>.</span><span class=nx>status</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 필요시 재시도 로직
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>return</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;웹훅 전송 중 오류:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 필요시 재시도 로직
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 결제 성공 시 웹훅 전송 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>onPaymentSuccess</span><span class=p>(</span><span class=nx>payment</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 비즈니스 로직 처리
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>updateDatabase</span><span class=p>(</span><span class=nx>payment</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 웹훅 이벤트 전송
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>sendWebhook</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;payment.success&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>timestamp</span><span class=o>:</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=nx>data</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>paymentId</span><span class=o>:</span> <span class=nx>payment</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>amount</span><span class=o>:</span> <span class=nx>payment</span><span class=p>.</span><span class=nx>amount</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>currency</span><span class=o>:</span> <span class=nx>payment</span><span class=p>.</span><span class=nx>currency</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>customerId</span><span class=o>:</span> <span class=nx>payment</span><span class=p>.</span><span class=nx>customerId</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=sse와-webhook의-비교-분석>SSE와 Webhook의 비교 분석<a hidden class=anchor aria-hidden=true href=#sse와-webhook의-비교-분석>#</a></h3><h4 id=핵심-차이점>핵심 차이점<a hidden class=anchor aria-hidden=true href=#핵심-차이점>#</a></h4><p>두 기술의 가장 근본적인 차이점은 커뮤니케이션 모델에 있다:</p><ul><li><strong>SSE</strong>는 클라이언트가 서버에 연결하여 지속적인 스트림으로 데이터를 받는 <strong>푸시 모델</strong>이다.</li><li><strong>웹훅</strong>은 서버가 특정 이벤트 발생 시 클라이언트의 URL로 요청을 보내는 <strong>콜백 모델</strong>이다.</li></ul><h4 id=상세-비교표>상세 비교표<a hidden class=anchor aria-hidden=true href=#상세-비교표>#</a></h4><table><thead><tr><th>특성</th><th>서버 전송 이벤트(SSE)</th><th>웹훅(Webhook)</th></tr></thead><tbody><tr><td><strong>통신 방향</strong></td><td>서버 → 클라이언트 (단방향)</td><td>서버 → 클라이언트 (단방향)</td></tr><tr><td><strong>연결 유형</strong></td><td>지속적 연결 (긴 HTTP 연결)</td><td>일시적 연결 (개별 HTTP 요청)</td></tr><tr><td><strong>프로토콜</strong></td><td>HTTP/HTTPS</td><td>HTTP/HTTPS</td></tr><tr><td><strong>클라이언트 요구사항</strong></td><td>웹 브라우저 또는 EventSource 지원 클라이언트</td><td>공개적으로 접근 가능한 HTTP 엔드포인트</td></tr><tr><td><strong>표준화</strong></td><td>HTML5 표준의 일부</td><td>비공식 패턴 (각 서비스마다 구현 다름)</td></tr><tr><td><strong>재연결 메커니즘</strong></td><td>자동 재연결 내장</td><td>수동 구현 필요 (재시도 로직)</td></tr><tr><td><strong>이벤트 순서</strong></td><td>순서 보장 (스트림 특성)</td><td>보장되지 않음 (네트워크 지연 등으로 순서 바뀔 수 있음)</td></tr><tr><td><strong>지연 시간</strong></td><td>매우 낮음 (실시간)</td><td>상대적으로 높음 (요청-응답 사이클)</td></tr><tr><td><strong>메시지 전달 보증</strong></td><td>연결이 유지되는 동안 보장</td><td>재시도 로직 구현 필요</td></tr><tr><td><strong>보안</strong></td><td>일반적인 HTTP 보안 매커니즘</td><td>서명, 토큰, IP 제한 등 추가 보안 구현 필요</td></tr><tr><td><strong>부하 분산</strong></td><td>연결 유지로 인한 부하 발생 가능</td><td>개별 요청으로 부하 분산 용이</td></tr><tr><td><strong>방화벽 문제</strong></td><td>클라이언트에서 서버로의 접근 필요</td><td>서버에서 클라이언트로 접근 가능해야 함 (공개 URL)</td></tr><tr><td><strong>상태 관리</strong></td><td>연결 상태 관리 필요</td><td>상태 비저장(stateless) 방식</td></tr><tr><td><strong>브라우저 지원</strong></td><td>대부분의 현대 브라우저 지원</td><td>브라우저 직접 수신 불가 (서버 필요)</td></tr><tr><td><strong>데이터 형식</strong></td><td>text/event-stream (주로 JSON)</td><td>일반적으로 JSON</td></tr><tr><td><strong>사용 사례</strong></td><td>대시보드, 실시간 알림, 주식 시세 등</td><td>결제 처리, 웹훅 통합, CI/CD 파이프라인 등</td></tr><tr><td><strong>확장성</strong></td><td>다수의 클라이언트 연결 시 확장 어려움</td><td>상대적으로 더 확장 용이</td></tr><tr><td><strong>구현 복잡성</strong></td><td>비교적 단순</td><td>중간 정도 (인증, 재시도 로직 등 구현 필요)</td></tr></tbody></table><h4 id=세부-비교-분석>세부 비교 분석<a hidden class=anchor aria-hidden=true href=#세부-비교-분석>#</a></h4><h5 id=통신-모델과-연결-유형>통신 모델과 연결 유형<a hidden class=anchor aria-hidden=true href=#통신-모델과-연결-유형>#</a></h5><p><strong>SSE</strong>는 클라이언트가 서버에 지속적인 HTTP 연결을 유지하며, 서버는 해당 연결을 통해 이벤트를 지속적으로 스트리밍한다. 이러한 지속적 연결 방식은 실시간성이 높지만, 서버에 더 많은 리소스가 필요하다.</p><p><strong>웹훅</strong>은 각 이벤트마다 새로운 HTTP 요청을 생성하는 일시적 연결 방식이다. 이는 서버 리소스를 효율적으로 사용할 수 있지만, 지속적인 실시간 업데이트보다는 간헐적인 알림에 더 적합하다.</p><h5 id=클라이언트-요구사항>클라이언트 요구사항<a hidden class=anchor aria-hidden=true href=#클라이언트-요구사항>#</a></h5><p><strong>SSE</strong>는 클라이언트가 <code>EventSource</code> API를 지원해야 하며, 주로 웹 브라우저 환경에서 사용된다. 모바일 앱이나 다른 환경에서는 별도의 라이브러리가 필요할 수 있다.</p><p><strong>웹훅</strong>은 클라이언트가 공개적으로 접근 가능한 HTTP 엔드포인트를 가지고 있어야 한다. 이는 주로 서버-서버 통신에 적합하며, 웹 브라우저와 같은 클라이언트 환경에서는 직접 수신이 불가능하다.</p><h5 id=이벤트-전달-신뢰성>이벤트 전달 신뢰성<a hidden class=anchor aria-hidden=true href=#이벤트-전달-신뢰성>#</a></h5><p><strong>SSE</strong>는 이벤트에 ID를 부여하여 재연결 시 마지막으로 수신한 이벤트 이후의 데이터만 받을 수 있게 한다. 이는 메시지 손실을 방지하고 순서를 보장한다.</p><p><strong>웹훅</strong>은 기본적으로 이벤트 순서나 전달 보증을 제공하지 않는다. 네트워크 지연이나 오류로 인해 이벤트가 순서대로 도착하지 않거나 손실될 수 있다. 이를 해결하기 위해 별도의 재시도 메커니즘, 이벤트 식별자, 타임스탬프 등을 구현해야 한다.</p><h5 id=보안-고려사항>보안 고려사항<a hidden class=anchor aria-hidden=true href=#보안-고려사항>#</a></h5><p><strong>SSE</strong>는 일반적인 HTTP 보안 메커니즘(HTTPS, 쿠키, 인증 헤더 등)을 사용한다. 클라이언트가 서버에 연결하는 구조이므로, 서버 측에서 인증 및 권한 부여를 관리할 수 있다.</p><p><strong>웹훅</strong>은 서버가 클라이언트에게 요청을 보내는 구조이므로, 추가적인 보안 조치가 필요하다.<br>일반적으로 다음과 같은 방법을 사용한다:</p><ul><li>시크릿 토큰을 사용한 요청 서명</li><li>IP 주소 제한</li><li>HMAC 기반 메시지 검증</li><li>타임스탬프와 난스(nonce) 검증</li></ul><h5 id=확장성>확장성<a hidden class=anchor aria-hidden=true href=#확장성>#</a></h5><p><strong>SSE</strong>는 각 클라이언트마다 서버와의 지속적인 연결을 유지해야 하므로, 대규모 동시 사용자를 처리할 때 확장성 문제가 발생할 수 있다. 이를 해결하기 위해 로드 밸런싱, 메시지 큐 등의 추가 인프라가 필요할 수 있다.</p><p><strong>웹훅</strong>은 필요할 때만 개별 HTTP 요청을 보내는 방식이므로, 일반적으로 더 나은 확장성을 제공한다. 그러나 많은 수의 웹훅을 빠르게 처리해야 하는 경우, 큐 시스템과 비동기 처리가 필요할 수 있다.</p><h3 id=적합한-사용-사례>적합한 사용 사례<a hidden class=anchor aria-hidden=true href=#적합한-사용-사례>#</a></h3><h4 id=sse에-적합한-사용-사례>SSE에 적합한 사용 사례<a hidden class=anchor aria-hidden=true href=#sse에-적합한-사용-사례>#</a></h4><ol><li><strong>실시간 대시보드</strong>: 지속적으로 업데이트되는 분석 데이터, 시스템 모니터링 정보 등을 표시하는 대시보드</li><li><strong>라이브 피드</strong>: 소셜 미디어 타임라인, 뉴스 피드, 댓글 스트림 등</li><li><strong>주식 시세 및 금융 데이터</strong>: 실시간으로 변동되는 시장 데이터</li><li><strong>스포츠 경기 중계</strong>: 실시간 점수, 통계, 이벤트 업데이트</li><li><strong>사용자 알림</strong>: 브라우저나 웹 애플리케이션에서의 실시간 알림</li><li><strong>채팅 애플리케이션</strong>: 단방향 메시지 수신(전송은 별도 API 필요)</li></ol><h4 id=웹훅에-적합한-사용-사례>웹훅에 적합한 사용 사례<a hidden class=anchor aria-hidden=true href=#웹훅에-적합한-사용-사례>#</a></h4><ol><li><strong>결제 프로세싱</strong>: 결제 완료, 실패, 환불 등의 상태 변경 알림</li><li><strong>외부 서비스 통합</strong>: CRM, 이메일 마케팅, 고객 지원 시스템 간 통합</li><li><strong>CI/CD 파이프라인</strong>: 코드 변경, 빌드 완료, 배포 완료 등의 이벤트 알림</li><li><strong>IoT 이벤트 처리</strong>: 센서 데이터가 특정 임계값을 초과할 때 알림</li><li><strong>콘텐츠 관리</strong>: 새 콘텐츠 게시, 업데이트, 승인 등의 이벤트</li><li><strong>비동기 작업 완료 알림</strong>: 장시간 실행되는 작업이 완료되었을 때 알림</li></ol><h3 id=하이브리드-접근법>하이브리드 접근법<a hidden class=anchor aria-hidden=true href=#하이브리드-접근법>#</a></h3><p>많은 현대적인 시스템에서는 SSE와 웹훅을 상호 보완적으로 사용한다:</p><ol><li><strong>웹훅 + 폴링</strong>: 웹훅이 실패할 경우를 대비해 주기적 폴링을 백업으로 구현</li><li><strong>웹훅 → 메시지 큐 → SSE</strong>: 웹훅으로 이벤트를 수신하고, 메시지 큐를 통해 SSE로 클라이언트에 전달</li><li><strong>상황별 선택</strong>: 실시간성이 중요한 기능은 SSE, 중요 이벤트 알림은 웹훅 사용</li></ol><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/backend-development/>Backend-Development</a></li><li><a href=https://buenhyden.github.io/tags/api-design-and-implementation/>API-Design-and-Implementation</a></li><li><a href=https://buenhyden.github.io/tags/real-time-apis/>Real-Time-APIs</a></li><li><a href=https://buenhyden.github.io/tags/types/>Types</a></li><li><a href=https://buenhyden.github.io/tags/server-sent-events/>Server-Sent-Events</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/security-engineering/governance-and-management/compliance-and-regulations/cloud-security-assurance-program/><span class=title>« Prev</span><br><span>클라우드 서비스 보안인증(CSAP, Cloud Security Assurance Program)</span>
</a><a class=next href=https://buenhyden.github.io/posts/system-design/case-studies/e-commerce-service/><span class=title>Next »</span><br><span>E-Commerce Service</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>