<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Get-and-Patch | hyunyoun's Blog</title>
<meta name=keywords content="Backend-Development,API-Design-and-Implementation,API-Styles,RESTful-API,Handling-CRUD-Operations"><meta name=description content='"Get-and-Patch"는 **리소스의 부분적 업데이트를 효율적으로 처리하기 위한 REST API 디자인 패턴**으로, 기존 CRUD(Create, Read, Update, Delete) 방식의 한계를 보완한다.'><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/resource-style/rest/handling-crud-operations/get-and-patch/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.8762af4fa9ee176c57f72565b721f234162fc7a9c882a271e0a1f68c4e89fb34.css integrity="sha256-h2KvT6nuF2xX9yVltyHyNBYvx6nIgqJx4KH2jE6J+zQ=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/resource-style/rest/handling-crud-operations/get-and-patch/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/resource-style/rest/handling-crud-operations/get-and-patch/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Get-and-Patch"><meta property="og:description" content='"Get-and-Patch"는 **리소스의 부분적 업데이트를 효율적으로 처리하기 위한 REST API 디자인 패턴**으로, 기존 CRUD(Create, Read, Update, Delete) 방식의 한계를 보완한다.'><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-26T11:58:00+00:00"><meta property="article:modified_time" content="2025-02-26T11:58:00+00:00"><meta property="article:tag" content="Backend-Development"><meta property="article:tag" content="API-Design-and-Implementation"><meta property="article:tag" content="API-Styles"><meta property="article:tag" content="RESTful-API"><meta property="article:tag" content="Handling-CRUD-Operations"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Get-and-Patch"><meta name=twitter:description content='"Get-and-Patch"는 **리소스의 부분적 업데이트를 효율적으로 처리하기 위한 REST API 디자인 패턴**으로, 기존 CRUD(Create, Read, Update, Delete) 방식의 한계를 보완한다.'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"기술 블로그","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Backend Development","item":"https://buenhyden.github.io/posts/backend-development/"},{"@type":"ListItem","position":3,"name":"API Design and Implementation","item":"https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/"},{"@type":"ListItem","position":4,"name":"API Styles","item":"https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/"},{"@type":"ListItem","position":5,"name":"Resource Style","item":""},{"@type":"ListItem","position":6,"name":"RESTful API","item":"https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/resource-style/rest/"},{"@type":"ListItem","position":7,"name":"Handling CRUD Operations","item":"https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/resource-style/rest/handling-crud-operations/"},{"@type":"ListItem","position":8,"name":"Get-and-Patch","item":"https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/resource-style/rest/handling-crud-operations/get-and-patch/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Get-and-Patch","name":"Get-and-Patch","description":"\"Get-and-Patch\"는 **리소스의 부분적 업데이트를 효율적으로 처리하기 위한 REST API 디자인 패턴**으로, 기존 CRUD(Create, Read, Update, Delete) 방식의 한계를 보완한다.","keywords":["Backend-Development","API-Design-and-Implementation","API-Styles","RESTful-API","Handling-CRUD-Operations"],"articleBody":"Get-and-Patch “Get-and-Patch\"는 리소스의 부분적 업데이트를 효율적으로 처리하기 위한 REST API 디자인 패턴으로, 기존 CRUD(Create, Read, Update, Delete) 방식의 한계를 보완한다.\n이 패턴은 GET과 PATCH 메서드 조합을 통해 리소스의 전체 상태를 검색하지 않고도 특정 필드만 업데이트할 수 있도록 설계되었다.\n핵심 개념 두 단계 프로세스 Get: 리소스의 현재 상태 조회 (필요한 필드 확인) Patch: 변경된 필드만 서버에 전송하여 부분 업데이트 HTTP 메서드 활용 단계 HTTP 메서드 설명 Get GET 리소스의 전체/일부 상태 조회 Patch PATCH 식별된 필드만 부분적으로 업데이트 CRUD vs. Get-and-Patch 구분 CRUD (PUT) Get-and-Patch (PATCH) 업데이트 범위 전체 리소스 교체 특정 필드만 수정 네트워크 효율성 모든 필드 전송 필요 변경된 필드만 전송 멱등성 보장됨 조건부 보장 (구현 방식에 따라 다름) 동시성 제어 전체 리소스 버전 관리 필드 단위 낙관적 잠금 가능 사용 사례 단순 리소스 교체 대규모 객체의 일부 수정 작동 원리 Get 단계 클라이언트가 리소스의 현재 상태를 조회한다.\n예시: 사용자 프로필의 email 필드 확인\n1 GET /users/123 Patch 단계 변경할 필드만 선택적으로 서버에 전송한다. 예시: email 필드 업데이트 1 2 3 4 5 6 PATCH /users/123 Content-Type: application/json-patch+json [ { \"op\": \"replace\", \"path\": \"/email\", \"value\": \"new@example.com\" } ] 주요 장점 네트워크 효율성\n전체 리소스 대신 변경된 데이터만 전송. 대용량 리소스(예: 100개 필드)에서 1개 필드 수정 시 99% 대역폭 절약. 동시성 충돌 감소\n필드 단위 업데이트로 다른 클라이언트의 병렬 수정 가능. 유연한 스키마 관리\n스키마 변경 없이 새 필드 추가/삭제 가능. 안정성\n부분 실패 시 전체 롤백 대신 해당 필드만 재시도 가능. 구현 방식 JSON Patch 형식 (RFC 6902) 1 2 3 4 [ { \"op\": \"replace\", \"path\": \"/name\", \"value\": \"John\" }, { \"op\": \"remove\", \"path\": \"/oldField\" } ] 부분 리소스 업데이트 1 2 3 4 { \"email\": \"updated@example.com\", \"preferences\": { \"theme\": \"dark\" } } 고급 활용 전략 낙관적 동시성 제어 ETag/버전 번호를 이용한 충돌 방지: 1 2 PATCH /users/123 If-Match: \"a1b2c3d4\" 배치 처리 여러 필드를 단일 요청으로 처리: 1 2 3 4 5 PATCH /users/123 [ { \"op\": \"replace\", \"path\": \"/email\", \"value\": \"new@example.com\" }, { \"op\": \"add\", \"path\": \"/phone\", \"value\": \"+821012345678\" } ] 감사 로깅 변경 이력을 필드 단위로 기록: 1 2025-03-22 21:15:00 | User 123 | email: old@ → new@example.com 주의사항 멱등성 보장\nPATCH는 기본적으로 멱등성이 없으나, JSON Patch 형식을 사용하면 멱등성 보장 가능. 부분 업데이트 오류\n존재하지 않는 필드 수정 시 400 Bad Request 반환 필요. 보안 검증\n허용되지 않은 필드(예: role) 업데이트 시 권한 검증 필수. 사용 사례 대규모 설정 관리\n50개 이상의 설정 필드 중 1~2개 필드만 빈번히 업데이트 실시간 협업 편집\nGoogle Docs 스타일 협업 시스템 IoT 장치 상태 모니터링\n센서 데이터의 특정 지표(온도/압력)만 주기적 업데이트 코드 예시 (Node.js/Express) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 // GET: 리소스 조회 app.get('/users/:id', async (req, res) =\u003e { const user = await User.findById(req.params.id); res.json(user); }); // PATCH: 부분 업데이트 app.patch('/users/:id', async (req, res) =\u003e { try { const updates = req.body; const user = await User.findByIdAndUpdate( req.params.id, { $set: updates }, { new: true, runValidators: true } ); res.json(user); } catch (error) { res.status(400).json({ type: \"https://api.example.com/errors/invalid-input\", title: \"Invalid Update\", detail: error.message }); } }); 용어 정리 용어 설명 참고 및 출처 ","wordCount":"512","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2025-02-26T11:58:00Z","dateModified":"2025-02-26T11:58:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/resource-style/rest/handling-crud-operations/get-and-patch/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>기술 블로그</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend-development/>Backend Development</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/>API Design and Implementation</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/>API Styles</a>&nbsp;»&nbsp;<a href>Resource Style</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/resource-style/rest/>RESTful API</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/resource-style/rest/handling-crud-operations/>Handling CRUD Operations</a></div><h1 class="post-title entry-hint-parent">Get-and-Patch</h1><div class=post-description>"Get-and-Patch"는 **리소스의 부분적 업데이트를 효율적으로 처리하기 위한 REST API 디자인 패턴**으로, 기존 CRUD(Create, Read, Update, Delete) 방식의 한계를 보완한다.</div><div class=post-meta><span title='2025-02-26 11:58:00 +0000 UTC'>February 26, 2025</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Backend%20Development/API%20Design%20and%20Implementation/API%20Styles/Resource%20Style/REST/Handling%20CRUD%20Operations/get-and-patch.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#get-and-patch>Get-and-Patch</a><ul><li><a href=#핵심-개념>핵심 개념</a></li><li><a href=#crud-vs-get-and-patch>CRUD vs. Get-and-Patch</a></li><li><a href=#작동-원리><strong>작동 원리</strong></a></li><li><a href=#주요-장점><strong>주요 장점</strong></a></li><li><a href=#구현-방식><strong>구현 방식</strong></a></li><li><a href=#고급-활용-전략><strong>고급 활용 전략</strong></a></li><li><a href=#주의사항><strong>주의사항</strong></a></li><li><a href=#사용-사례><strong>사용 사례</strong></a></li><li><a href=#코드-예시-nodejsexpress>코드 예시 (Node.js/Express)</a></li></ul></li><li><a href=#용어-정리>용어 정리</a></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=get-and-patch>Get-and-Patch<a hidden class=anchor aria-hidden=true href=#get-and-patch>#</a></h2><p>&ldquo;Get-and-Patch"는 <strong>리소스의 부분적 업데이트를 효율적으로 처리하기 위한 REST API 디자인 패턴</strong>으로, 기존 CRUD(Create, Read, Update, Delete) 방식의 한계를 보완한다.<br>이 패턴은 <strong>GET과 PATCH 메서드 조합</strong>을 통해 리소스의 전체 상태를 검색하지 않고도 특정 필드만 업데이트할 수 있도록 설계되었다.</p><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><h4 id=두-단계-프로세스>두 단계 프로세스<a hidden class=anchor aria-hidden=true href=#두-단계-프로세스>#</a></h4><ol><li><strong>Get</strong>: 리소스의 현재 상태 조회 (필요한 필드 확인)</li><li><strong>Patch</strong>: 변경된 필드만 서버에 전송하여 부분 업데이트</li></ol><h4 id=http-메서드-활용>HTTP 메서드 활용<a hidden class=anchor aria-hidden=true href=#http-메서드-활용>#</a></h4><table><thead><tr><th>단계</th><th>HTTP 메서드</th><th>설명</th></tr></thead><tbody><tr><td><strong>Get</strong></td><td>GET</td><td>리소스의 전체/일부 상태 조회</td></tr><tr><td><strong>Patch</strong></td><td>PATCH</td><td>식별된 필드만 부분적으로 업데이트</td></tr></tbody></table><h3 id=crud-vs-get-and-patch>CRUD vs. Get-and-Patch<a hidden class=anchor aria-hidden=true href=#crud-vs-get-and-patch>#</a></h3><table><thead><tr><th>구분</th><th>CRUD (PUT)</th><th>Get-and-Patch (PATCH)</th></tr></thead><tbody><tr><td><strong>업데이트 범위</strong></td><td>전체 리소스 교체</td><td>특정 필드만 수정</td></tr><tr><td><strong>네트워크 효율성</strong></td><td>모든 필드 전송 필요</td><td>변경된 필드만 전송</td></tr><tr><td><strong>멱등성</strong></td><td>보장됨</td><td>조건부 보장 (구현 방식에 따라 다름)</td></tr><tr><td><strong>동시성 제어</strong></td><td>전체 리소스 버전 관리</td><td>필드 단위 낙관적 잠금 가능</td></tr><tr><td><strong>사용 사례</strong></td><td>단순 리소스 교체</td><td>대규모 객체의 일부 수정</td></tr></tbody></table><h3 id=작동-원리><strong>작동 원리</strong><a hidden class=anchor aria-hidden=true href=#작동-원리>#</a></h3><h4 id=get-단계>Get 단계<a hidden class=anchor aria-hidden=true href=#get-단계>#</a></h4><ul><li><p>클라이언트가 리소스의 현재 상태를 조회한다.</p></li><li><p>예시: 사용자 프로필의 <code>email</code> 필드 확인</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>GET /users/123
</span></span></span></code></pre></td></tr></table></div></div></li></ul><h4 id=patch-단계>Patch 단계<a hidden class=anchor aria-hidden=true href=#patch-단계>#</a></h4><ul><li>변경할 필드만 선택적으로 서버에 전송한다.</li><li>예시: <code>email</code> 필드 업데이트</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5>5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>  PATCH /users/123
</span></span></span><span class=line><span class=cl><span class=err>  Content-Type: application/json-patch+json
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>  [
</span></span></span><span class=line><span class=cl><span class=err>    { &#34;op&#34;: &#34;replace&#34;, &#34;path&#34;: &#34;/email&#34;, &#34;value&#34;: &#34;new@example.com&#34; }
</span></span></span><span class=line><span class=cl><span class=err>  ]
</span></span></span></code></pre></td></tr></table></div></div><h3 id=주요-장점><strong>주요 장점</strong><a hidden class=anchor aria-hidden=true href=#주요-장점>#</a></h3><ol><li><p><strong>네트워크 효율성</strong></p><ul><li>전체 리소스 대신 <strong>변경된 데이터만 전송</strong>.</li><li>대용량 리소스(예: 100개 필드)에서 1개 필드 수정 시 <strong>99% 대역폭 절약</strong>.</li></ul></li><li><p><strong>동시성 충돌 감소</strong></p><ul><li>필드 단위 업데이트로 다른 클라이언트의 병렬 수정 가능.</li></ul></li><li><p><strong>유연한 스키마 관리</strong></p><ul><li>스키마 변경 없이 새 필드 추가/삭제 가능.</li></ul></li><li><p><strong>안정성</strong></p><ul><li>부분 실패 시 전체 롤백 대신 <strong>해당 필드만 재시도</strong> 가능.</li></ul></li></ol><h3 id=구현-방식><strong>구현 방식</strong><a hidden class=anchor aria-hidden=true href=#구현-방식>#</a></h3><h4 id=json-patch-형식-rfc-6902>JSON Patch 형식 (<a href=https://datatracker.ietf.org/doc/html/rfc6902>RFC 6902</a>)<a hidden class=anchor aria-hidden=true href=#json-patch-형식-rfc-6902>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2>2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3>3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nt>&#34;op&#34;</span><span class=p>:</span> <span class=s2>&#34;replace&#34;</span><span class=p>,</span> <span class=nt>&#34;path&#34;</span><span class=p>:</span> <span class=s2>&#34;/name&#34;</span><span class=p>,</span> <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;John&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nt>&#34;op&#34;</span><span class=p>:</span> <span class=s2>&#34;remove&#34;</span><span class=p>,</span> <span class=nt>&#34;path&#34;</span><span class=p>:</span> <span class=s2>&#34;/oldField&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=부분-리소스-업데이트>부분 리소스 업데이트<a hidden class=anchor aria-hidden=true href=#부분-리소스-업데이트>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2>2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3>3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;email&#34;</span><span class=p>:</span> <span class=s2>&#34;updated@example.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;preferences&#34;</span><span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;theme&#34;</span><span class=p>:</span> <span class=s2>&#34;dark&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=고급-활용-전략><strong>고급 활용 전략</strong><a hidden class=anchor aria-hidden=true href=#고급-활용-전략>#</a></h3><h4 id=낙관적-동시성-제어>낙관적 동시성 제어<a hidden class=anchor aria-hidden=true href=#낙관적-동시성-제어>#</a></h4><ul><li>ETag/버전 번호를 이용한 충돌 방지:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>  PATCH /users/123
</span></span></span><span class=line><span class=cl><span class=err>  If-Match: &#34;a1b2c3d4&#34;
</span></span></span></code></pre></td></tr></table></div></div><h4 id=배치-처리>배치 처리<a hidden class=anchor aria-hidden=true href=#배치-처리>#</a></h4><ul><li>여러 필드를 단일 요청으로 처리:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2>2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3>3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4>4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>PATCH /users/123
</span></span></span><span class=line><span class=cl><span class=err>[
</span></span></span><span class=line><span class=cl><span class=err>{ &#34;op&#34;: &#34;replace&#34;, &#34;path&#34;: &#34;/email&#34;, &#34;value&#34;: &#34;new@example.com&#34; },
</span></span></span><span class=line><span class=cl><span class=err>{ &#34;op&#34;: &#34;add&#34;, &#34;path&#34;: &#34;/phone&#34;, &#34;value&#34;: &#34;+821012345678&#34; }
</span></span></span><span class=line><span class=cl><span class=err>]
</span></span></span></code></pre></td></tr></table></div></div><h4 id=감사-로깅>감사 로깅<a hidden class=anchor aria-hidden=true href=#감사-로깅>#</a></h4><ul><li>변경 이력을 필드 단위로 기록:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>2025-03-22 21:15:00 | User 123 | email: old@ → new@example.com
</span></span></code></pre></td></tr></table></div></div><h3 id=주의사항><strong>주의사항</strong><a hidden class=anchor aria-hidden=true href=#주의사항>#</a></h3><ol><li><p><strong>멱등성 보장</strong></p><ul><li>PATCH는 기본적으로 멱등성이 없으나, <strong>JSON Patch 형식</strong>을 사용하면 멱등성 보장 가능.</li></ul></li><li><p><strong>부분 업데이트 오류</strong></p><ul><li>존재하지 않는 필드 수정 시 <code>400 Bad Request</code> 반환 필요.</li></ul></li><li><p><strong>보안 검증</strong></p><ul><li>허용되지 않은 필드(예: <code>role</code>) 업데이트 시 권한 검증 필수.</li></ul></li></ol><h3 id=사용-사례><strong>사용 사례</strong><a hidden class=anchor aria-hidden=true href=#사용-사례>#</a></h3><ol><li><p><strong>대규모 설정 관리</strong></p><ul><li>50개 이상의 설정 필드 중 1~2개 필드만 빈번히 업데이트</li></ul></li><li><p><strong>실시간 협업 편집</strong></p><ul><li>Google Docs 스타일 협업 시스템</li></ul></li><li><p><strong>IoT 장치 상태 모니터링</strong></p><ul><li>센서 데이터의 특정 지표(온도/압력)만 주기적 업데이트</li></ul></li></ol><h3 id=코드-예시-nodejsexpress>코드 예시 (Node.js/Express)<a hidden class=anchor aria-hidden=true href=#코드-예시-nodejsexpress>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13>13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14>14</a>
</span><span class=lnt id=hl-7-15><a class=lnlinks href=#hl-7-15>15</a>
</span><span class=lnt id=hl-7-16><a class=lnlinks href=#hl-7-16>16</a>
</span><span class=lnt id=hl-7-17><a class=lnlinks href=#hl-7-17>17</a>
</span><span class=lnt id=hl-7-18><a class=lnlinks href=#hl-7-18>18</a>
</span><span class=lnt id=hl-7-19><a class=lnlinks href=#hl-7-19>19</a>
</span><span class=lnt id=hl-7-20><a class=lnlinks href=#hl-7-20>20</a>
</span><span class=lnt id=hl-7-21><a class=lnlinks href=#hl-7-21>21</a>
</span><span class=lnt id=hl-7-22><a class=lnlinks href=#hl-7-22>22</a>
</span><span class=lnt id=hl-7-23><a class=lnlinks href=#hl-7-23>23</a>
</span><span class=lnt id=hl-7-24><a class=lnlinks href=#hl-7-24>24</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// GET: 리소스 조회
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/users/:id&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>User</span><span class=p>.</span><span class=nx>findById</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=nx>user</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// PATCH: 부분 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>patch</span><span class=p>(</span><span class=s1>&#39;/users/:id&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>updates</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>body</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>User</span><span class=p>.</span><span class=nx>findByIdAndUpdate</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nx>$set</span><span class=o>:</span> <span class=nx>updates</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=k>new</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=nx>runValidators</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=nx>user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>400</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;https://api.example.com/errors/invalid-input&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>title</span><span class=o>:</span> <span class=s2>&#34;Invalid Update&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>detail</span><span class=o>:</span> <span class=nx>error</span><span class=p>.</span><span class=nx>message</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/backend-development/>Backend-Development</a></li><li><a href=https://buenhyden.github.io/tags/api-design-and-implementation/>API-Design-and-Implementation</a></li><li><a href=https://buenhyden.github.io/tags/api-styles/>API-Styles</a></li><li><a href=https://buenhyden.github.io/tags/restful-api/>RESTful-API</a></li><li><a href=https://buenhyden.github.io/tags/handling-crud-operations/>Handling-CRUD-Operations</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-fundamentals/api-endpoint-design/uri-design/><span class=title>« Prev</span><br><span>URI Design</span>
</a><a class=next href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/resource-style/rest/handling-crud-operations/get-and-set/><span class=title>Next »</span><br><span>Get-and-Set</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>