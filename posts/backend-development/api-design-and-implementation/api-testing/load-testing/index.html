<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Load Testing | hyunyoun's Blog</title>
<meta name=keywords content="Backend-Development,API-Design-and-Implementation,API-Testing,Load-Testing"><meta name=description content="API 부하 테스트는 API가 예상된 사용자 부하와 그 이상의 상황에서 어떻게 동작하는지 검증하는 중요한 성능 테스트 유형이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-testing/load-testing/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.8762af4fa9ee176c57f72565b721f234162fc7a9c882a271e0a1f68c4e89fb34.css integrity="sha256-h2KvT6nuF2xX9yVltyHyNBYvx6nIgqJx4KH2jE6J+zQ=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-testing/load-testing/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-testing/load-testing/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Load Testing"><meta property="og:description" content="API 부하 테스트는 API가 예상된 사용자 부하와 그 이상의 상황에서 어떻게 동작하는지 검증하는 중요한 성능 테스트 유형이다."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-03-10T02:52:00+00:00"><meta property="article:modified_time" content="2025-03-10T02:52:00+00:00"><meta property="article:tag" content="Backend Development"><meta property="article:tag" content="API-Design-and-Implementation"><meta property="article:tag" content="API-Testing"><meta property="article:tag" content="Load-Testing"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Load Testing"><meta name=twitter:description content="API 부하 테스트는 API가 예상된 사용자 부하와 그 이상의 상황에서 어떻게 동작하는지 검증하는 중요한 성능 테스트 유형이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"기술 블로그","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Backend Development","item":"https://buenhyden.github.io/posts/backend-development/"},{"@type":"ListItem","position":3,"name":"API Design and Implementation","item":"https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/"},{"@type":"ListItem","position":4,"name":"API Testing","item":"https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-testing/"},{"@type":"ListItem","position":5,"name":"Load Testing","item":"https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-testing/load-testing/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Load Testing","name":"Load Testing","description":"API 부하 테스트는 API가 예상된 사용자 부하와 그 이상의 상황에서 어떻게 동작하는지 검증하는 중요한 성능 테스트 유형이다.","keywords":["Backend-Development","API-Design-and-Implementation","API-Testing","Load-Testing"],"articleBody":"Load Testing API 부하 테스트는 API가 예상된 사용자 부하와 그 이상의 상황에서 어떻게 동작하는지 검증하는 중요한 성능 테스트 유형이다.\nAPI 부하 테스트의 기본 개념 부하 테스트란 무엇인가? 부하 테스트는 시스템에 점진적으로 부하를 증가시키면서 그 동작을, 분석하는 성능 테스트의 한 유형이다. API 부하 테스트는 특히 API가 다양한 부하 조건에서 어떻게 동작하는지 검증하는 데 초점을 맞춘다.\n이런 테스트를 통해 다음과 같은 중요한 정보를 얻을 수 있다:\nAPI의 최대 처리 용량(초당 요청 수) 응답 시간과 부하 간의 관계 병목 현상이 발생하는 지점 시스템의 안정성과 확장성 자원 사용률(CPU, 메모리, 네트워크 등) 다른 성능 테스트 유형과의 비교 부하 테스트는 다른 성능 테스트 유형과 목적과 접근 방식에서 차이가 있다:\n테스트 유형 주요 목적 특징 부하 테스트 (Load Testing) 예상 부하와 그 이상에서의 동작 검증 점진적으로 부하를 증가시키며 안정적 동작 검증 스트레스 테스트 (Stress Testing) 시스템의 한계 찾기 시스템이 실패할 때까지 극단적인 부하 적용 내구성 테스트 (Endurance Testing) 장시간 동안의 안정성 검증 지속적인 부하를 장시간 유지하며 메모리 누수 등 검사 스파이크 테스트 (Spike Testing) 갑작스러운 부하 증가에 대한 대응력 검증 짧은 시간 동안 부하를 급격히 증가시켰다가 감소 볼륨 테스트 (Volume Testing) 대량의 데이터 처리 능력 검증 데이터베이스 크기나 요청/응답 크기를 증가시키며 테스트 API 부하 테스트가 중요한 이유 API 부하 테스트는 다음과 같은 이유로 API 개발 및 운영에서 필수적이다:\n사용자 경험 보장: 부하가 증가하더라도 일관된 응답 시간을 유지하는지 확인 시스템 한계 파악: API가 처리할 수 있는 최대 부하를 사전에 파악하여 용량 계획 수립 확장성 검증: 시스템이 부하 증가에 따라 적절히 확장되는지 검증 병목 현상 식별: 성능 병목 지점을 찾아 최적화 기회 발견 다운타임 방지: 갑작스러운 트래픽 증가로 인한 서비스 중단 예방 비용 최적화: 필요한 인프라 자원을 더 정확하게 예측하여 비용 절감 API 부하 테스트 계획 및 준비 테스트 목표 설정 효과적인 부하 테스트를 위해서는 명확한 목표 설정이 필요하다:\n성능 목표 정의: 최대 허용 응답 시간(예: 95%의 요청이 500ms 이내에 처리) 처리량 목표(예: 초당 1,000개 요청 처리) 오류율 한계(예: 부하 조건에서 1% 미만의 오류) 부하 패턴 결정: 점진적 증가: 사용자 수나 요청 비율을 점진적으로 증가 일정 부하: 특정 수준의 부하를 일정 시간 동안 유지 계단식 증가: 부하를 단계적으로 증가시키며 각 단계에서 시스템 안정화 시간 제공 측정 지표 선정: 응답 시간(평균, 중앙값, 95/99 백분위수) 처리량(초당 요청 수, 초당 처리된 데이터양) 오류율 및 오류 유형 자원 사용률(CPU, 메모리, 디스크 I/O, 네트워크) 테스트 시나리오 설계 실제 사용 패턴을 반영한 다양한 테스트 시나리오를 설계해야 한다:\n주요 API 엔드포인트 식별: 사용 빈도가 높은 엔드포인트 비즈니스 크리티컬한 엔드포인트 자원 집약적인 엔드포인트 사용자 흐름 기반 시나리오: 실제 사용자 행동 패턴을 시뮬레이션 다양한 API 호출의 현실적인 조합 세션 기반 상호작용 모델링 다양한 데이터 크기 고려: 다양한 크기의 요청/응답 페이로드 데이터 양에 따른 성능 영향 측정 대용량 데이터 처리 시나리오 예시 시나리오:\n1 2 3 4 5 6 7 8 9 10 11 시나리오 1: 사용자 인증 및 프로필 조회 - POST /api/auth/login (사용자 인증) - GET /api/users/profile (프로필 조회) - 목표 부하: 초당 500 사용자 - 단계적 증가: 1분 간격으로 100명씩 증가 시나리오 2: 제품 검색 및 상세 조회 - GET /api/products?query=keyword (제품 검색) - GET /api/products/{id} (제품 상세 조회) - 목표 부하: 초당 1,000 요청 - 지속 시간: 30분 테스트 환경 준비 신뢰할 수 있는 테스트 결과를 얻기 위해 적절한 테스트 환경을 준비해야 한다:\n테스트 환경 선택: 개발/테스트 환경: 초기 테스트 및 디버깅 스테이징 환경: 프로덕션과 유사한 환경에서의 검증 프로덕션 환경: 모니터링 모드로 제한적 테스트(주의 필요) 테스트 데이터 준비: 충분한 양의 테스트 데이터 다양한 데이터 프로필 데이터 무결성 보장 모니터링 도구 설정: 서버 모니터링(CPU, 메모리, 디스크, 네트워크) 애플리케이션 성능 모니터링(APM) 로그 수집 및 분석 도구 데이터베이스 모니터링 외부 의존성 처리: 서드파티 서비스 모킹 또는 샌드박스 환경 사용 결제 게이트웨이 등 중요 서비스의 테스트 모드 활용 외부 API 호출 제한 고려 API 부하 테스트 도구 및 구현 주요 부하 테스트 도구 비교 다양한 부하 테스트 도구 중 API 테스트에 적합한 주요 도구들을 살펴보면:\nApache JMeter: 가장 널리 사용되는 오픈소스 부하 테스트 도구 다양한 프로토콜 지원(HTTP, HTTPS, SOAP, REST, WebSocket 등) GUI 및 CLI 모드 제공 확장 가능한 플러그인 시스템 분산 테스트 지원 k6: 개발자 친화적인 모던 부하 테스트 도구 JavaScript로 테스트 스크립트 작성 가볍고 리소스 효율적 클라우드 서비스 통합 Grafana와의 통합을 통한 시각화 Locust: Python 기반 부하 테스트 프레임워크 코드로 테스트 시나리오 정의 분산 테스트 지원 실시간 웹 UI 제공 높은 확장성 Gatling: Scala 기반 고성능 부하 테스트 도구 코드 기반 시나리오 작성 뛰어난 보고서 생성 리소스 효율적 CI/CD 통합 용이 Postman/Newman: API 개발 도구에서 출발한 테스트 환경 사용자 친화적 인터페이스 Newman을 통한 CLI 실행 기존 Postman 컬렉션 활용 가능 다른 전문 부하 테스트 도구에 비해 제한적인 규모 도구 언어/스크립팅 학습 곡선 분산 테스트 확장성 보고서 적합한 경우 JMeter XML/GUI, BeanShell, JSR223 중간 우수 매우 높음 기본적 다양한 프로토콜 테스트, 엔터프라이즈 환경 k6 JavaScript 낮음 우수 높음 우수 개발자 중심 환경, 클라우드 네이티브 앱 Locust Python 낮음 우수 높음 기본적 Python 개발자, 사용자 행동 시뮬레이션 Gatling Scala/DSL 중간 제한적 높음 매우 우수 성능 엔지니어, 복잡한 시나리오 Postman JavaScript 매우 낮음 제한적 제한적 제한적 간단한 테스트, API 개발자 친화적 k6를 사용한 부하 테스트 구현 예제 k6는 직관적이고 개발자 친화적인 API 부하 테스트 도구이다. 다음은 k6를 사용한 간단한 부하 테스트 스크립트 예시:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 import http from 'k6/http'; import { sleep, check } from 'k6'; import { Rate } from 'k6/metrics'; // 사용자 정의 메트릭 설정 const errorRate = new Rate('errors'); // 테스트 구성 export const options = { stages: [ { duration: '1m', target: 50 }, // 1분 동안 50명의 가상 사용자로 증가 { duration: '3m', target: 50 }, // 3분 동안 50명의 가상 사용자 유지 { duration: '1m', target: 100 }, // 1분 동안 100명의 가상 사용자로 증가 { duration: '5m', target: 100 }, // 5분 동안 100명의 가상 사용자 유지 { duration: '1m', target: 0 }, // 1분 동안 0명으로 감소 (정상 종료) ], thresholds: { http_req_duration: ['p(95)\u003c500'], // 95%의 요청이 500ms 미만이어야 함 'http_req_duration{name:login}': ['p(99)\u003c1000'], // 로그인은 99%가 1초 미만 errors: ['rate\u003c0.01'], // 1% 미만의 오류율 }, }; // 테스트 실행 로직 export default function() { // 로그인 API 호출 const loginRes = http.post('https://api.example.com/login', { username: 'testuser', password: 'password123' }, { tags: { name: 'login' } }); // 응답 검증 const loginSuccess = check(loginRes, { 'login status is 200': (r) =\u003e r.status === 200, 'has access token': (r) =\u003e r.json('token') !== '', }); // 오류 추적 if (!loginSuccess) { errorRate.add(1); } else { // 인증 토큰 추출 const token = loginRes.json('token'); // 인증된 API 호출 const userProfileRes = http.get('https://api.example.com/user/profile', { headers: { 'Authorization': `Bearer ${token}`, }, tags: { name: 'profile' } }); // 응답 검증 check(userProfileRes, { 'profile status is 200': (r) =\u003e r.status === 200, 'profile has data': (r) =\u003e r.json('data') !== null, }); // 제품 검색 API 호출 const searchRes = http.get('https://api.example.com/products?query=mobile\u0026limit=10', { headers: { 'Authorization': `Bearer ${token}`, }, tags: { name: 'search' } }); // 응답 검증 check(searchRes, { 'search status is 200': (r) =\u003e r.status === 200, 'products returned': (r) =\u003e r.json('items').length \u003e 0, }); } // 사용자 행동 시뮬레이션을 위한 지연 sleep(Math.random() * 3 + 1); // 1-4초 사이의 랜덤 지연 } 이 스크립트는 다음과 같은 실제 사용자 흐름을 시뮬레이션한다:\n로그인 API 호출 사용자 프로필 조회 제품 검색 각 API 응답 검증 사용자 행동 간 지연 시간 추가 JMeter를 사용한 부하 테스트 구현 JMeter는 강력한 GUI와 다양한 기능을 제공하는 부하 테스트 도구이다.\nJMeter를 사용한 부하 테스트 구현 방법은 다음과 같다:\n테스트 계획 생성: JMeter 실행 및 테스트 계획 생성 스레드 그룹 추가(가상 사용자) HTTP 요청 기본 설정(도메인, 포트 등) HTTP 요청 구성: 로그인 요청 추가 세션 변수 추출(예: 토큰) 추가 API 요청 구성 검증 및 모니터링 설정: 응답 어설션 추가 타이머 추가(지연 시간) 결과 수집 리스너 추가 테스트 실행 및 분석: 테스트 실행 결과 분석 및 보고서 생성 JMeter 테스트 계획의 XML 구조 예시 (간략화):\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e ","wordCount":"6241","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2025-03-10T02:52:00Z","dateModified":"2025-03-10T02:52:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-testing/load-testing/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>기술 블로그</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend-development/>Backend Development</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/>API Design and Implementation</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-testing/>API Testing</a></div><h1 class="post-title entry-hint-parent">Load Testing</h1><div class=post-description>API 부하 테스트는 API가 예상된 사용자 부하와 그 이상의 상황에서 어떻게 동작하는지 검증하는 중요한 성능 테스트 유형이다.</div><div class=post-meta><span title='2025-03-10 02:52:00 +0000 UTC'>March 10, 2025</span>&nbsp;·&nbsp;30 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Backend%20Development/API%20Design%20and%20Implementation/API%20Testing/Load-Testing.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#load-testing>Load Testing</a><ul><li><a href=#api-부하-테스트의-기본-개념>API 부하 테스트의 기본 개념</a></li><li><a href=#api-부하-테스트-계획-및-준비>API 부하 테스트 계획 및 준비</a></li><li><a href=#api-부하-테스트-도구-및-구현>API 부하 테스트 도구 및 구현</a></li><li><a href=#api-부하-테스트-실행-및-모니터링>API 부하 테스트 실행 및 모니터링</a></li><li><a href=#api-부하-테스트-결과-분석-및-최적화>API 부하 테스트 결과 분석 및 최적화</a></li><li><a href=#지속적-부하-테스트-자동화>지속적 부하 테스트 자동화</a></li><li><a href=#확장성-및-신뢰성-개선-전략>확장성 및 신뢰성 개선 전략</a></li><li><a href=#고급-api-부하-테스트-시나리오>고급 API 부하 테스트 시나리오</a></li><li><a href=#api-부하-테스트의-최신-트렌드>API 부하 테스트의 최신 트렌드</a></li></ul></li><li><a href=#용어-정리>용어 정리</a></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=load-testing>Load Testing<a hidden class=anchor aria-hidden=true href=#load-testing>#</a></h2><p>API 부하 테스트는 API가 예상된 사용자 부하와 그 이상의 상황에서 어떻게 동작하는지 검증하는 중요한 성능 테스트 유형이다.</p><h3 id=api-부하-테스트의-기본-개념>API 부하 테스트의 기본 개념<a hidden class=anchor aria-hidden=true href=#api-부하-테스트의-기본-개념>#</a></h3><h4 id=부하-테스트란-무엇인가>부하 테스트란 무엇인가?<a hidden class=anchor aria-hidden=true href=#부하-테스트란-무엇인가>#</a></h4><p>부하 테스트는 시스템에 점진적으로 부하를 증가시키면서 그 동작을, 분석하는 성능 테스트의 한 유형이다. API 부하 테스트는 특히 API가 다양한 부하 조건에서 어떻게 동작하는지 검증하는 데 초점을 맞춘다.</p><p>이런 테스트를 통해 다음과 같은 중요한 정보를 얻을 수 있다:</p><ul><li>API의 최대 처리 용량(초당 요청 수)</li><li>응답 시간과 부하 간의 관계</li><li>병목 현상이 발생하는 지점</li><li>시스템의 안정성과 확장성</li><li>자원 사용률(CPU, 메모리, 네트워크 등)</li></ul><h4 id=다른-성능-테스트-유형과의-비교>다른 성능 테스트 유형과의 비교<a hidden class=anchor aria-hidden=true href=#다른-성능-테스트-유형과의-비교>#</a></h4><p>부하 테스트는 다른 성능 테스트 유형과 목적과 접근 방식에서 차이가 있다:</p><table><thead><tr><th>테스트 유형</th><th>주요 목적</th><th>특징</th></tr></thead><tbody><tr><td><strong>부하 테스트 (Load Testing)</strong></td><td>예상 부하와 그 이상에서의 동작 검증</td><td>점진적으로 부하를 증가시키며 안정적 동작 검증</td></tr><tr><td><strong>스트레스 테스트 (Stress Testing)</strong></td><td>시스템의 한계 찾기</td><td>시스템이 실패할 때까지 극단적인 부하 적용</td></tr><tr><td><strong>내구성 테스트 (Endurance Testing)</strong></td><td>장시간 동안의 안정성 검증</td><td>지속적인 부하를 장시간 유지하며 메모리 누수 등 검사</td></tr><tr><td><strong>스파이크 테스트 (Spike Testing)</strong></td><td>갑작스러운 부하 증가에 대한 대응력 검증</td><td>짧은 시간 동안 부하를 급격히 증가시켰다가 감소</td></tr><tr><td><strong>볼륨 테스트 (Volume Testing)</strong></td><td>대량의 데이터 처리 능력 검증</td><td>데이터베이스 크기나 요청/응답 크기를 증가시키며 테스트</td></tr></tbody></table><h4 id=api-부하-테스트가-중요한-이유>API 부하 테스트가 중요한 이유<a hidden class=anchor aria-hidden=true href=#api-부하-테스트가-중요한-이유>#</a></h4><p>API 부하 테스트는 다음과 같은 이유로 API 개발 및 운영에서 필수적이다:</p><ol><li><strong>사용자 경험 보장</strong>: 부하가 증가하더라도 일관된 응답 시간을 유지하는지 확인</li><li><strong>시스템 한계 파악</strong>: API가 처리할 수 있는 최대 부하를 사전에 파악하여 용량 계획 수립</li><li><strong>확장성 검증</strong>: 시스템이 부하 증가에 따라 적절히 확장되는지 검증</li><li><strong>병목 현상 식별</strong>: 성능 병목 지점을 찾아 최적화 기회 발견</li><li><strong>다운타임 방지</strong>: 갑작스러운 트래픽 증가로 인한 서비스 중단 예방</li><li><strong>비용 최적화</strong>: 필요한 인프라 자원을 더 정확하게 예측하여 비용 절감</li></ol><h3 id=api-부하-테스트-계획-및-준비>API 부하 테스트 계획 및 준비<a hidden class=anchor aria-hidden=true href=#api-부하-테스트-계획-및-준비>#</a></h3><h4 id=테스트-목표-설정>테스트 목표 설정<a hidden class=anchor aria-hidden=true href=#테스트-목표-설정>#</a></h4><p>효과적인 부하 테스트를 위해서는 명확한 목표 설정이 필요하다:</p><ol><li><strong>성능 목표 정의</strong>:<ul><li>최대 허용 응답 시간(예: 95%의 요청이 500ms 이내에 처리)</li><li>처리량 목표(예: 초당 1,000개 요청 처리)</li><li>오류율 한계(예: 부하 조건에서 1% 미만의 오류)</li></ul></li><li><strong>부하 패턴 결정</strong>:<ul><li>점진적 증가: 사용자 수나 요청 비율을 점진적으로 증가</li><li>일정 부하: 특정 수준의 부하를 일정 시간 동안 유지</li><li>계단식 증가: 부하를 단계적으로 증가시키며 각 단계에서 시스템 안정화 시간 제공</li></ul></li><li><strong>측정 지표 선정</strong>:<ul><li>응답 시간(평균, 중앙값, 95/99 백분위수)</li><li>처리량(초당 요청 수, 초당 처리된 데이터양)</li><li>오류율 및 오류 유형</li><li>자원 사용률(CPU, 메모리, 디스크 I/O, 네트워크)</li></ul></li></ol><h4 id=테스트-시나리오-설계>테스트 시나리오 설계<a hidden class=anchor aria-hidden=true href=#테스트-시나리오-설계>#</a></h4><p>실제 사용 패턴을 반영한 다양한 테스트 시나리오를 설계해야 한다:</p><ol><li><strong>주요 API 엔드포인트 식별</strong>:<ul><li>사용 빈도가 높은 엔드포인트</li><li>비즈니스 크리티컬한 엔드포인트</li><li>자원 집약적인 엔드포인트</li></ul></li><li><strong>사용자 흐름 기반 시나리오</strong>:<ul><li>실제 사용자 행동 패턴을 시뮬레이션</li><li>다양한 API 호출의 현실적인 조합</li><li>세션 기반 상호작용 모델링</li></ul></li><li><strong>다양한 데이터 크기 고려</strong>:<ul><li>다양한 크기의 요청/응답 페이로드</li><li>데이터 양에 따른 성능 영향 측정</li><li>대용량 데이터 처리 시나리오</li></ul></li></ol><p>예시 시나리오:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>시나리오 1: 사용자 인증 및 프로필 조회
</span></span><span class=line><span class=cl>- POST /api/auth/login (사용자 인증)
</span></span><span class=line><span class=cl>- GET /api/users/profile (프로필 조회)
</span></span><span class=line><span class=cl>- 목표 부하: 초당 500 사용자
</span></span><span class=line><span class=cl>- 단계적 증가: 1분 간격으로 100명씩 증가
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>시나리오 2: 제품 검색 및 상세 조회
</span></span><span class=line><span class=cl>- GET /api/products?query=keyword (제품 검색)
</span></span><span class=line><span class=cl>- GET /api/products/{id} (제품 상세 조회)
</span></span><span class=line><span class=cl>- 목표 부하: 초당 1,000 요청
</span></span><span class=line><span class=cl>- 지속 시간: 30분
</span></span></code></pre></td></tr></table></div></div><h4 id=테스트-환경-준비>테스트 환경 준비<a hidden class=anchor aria-hidden=true href=#테스트-환경-준비>#</a></h4><p>신뢰할 수 있는 테스트 결과를 얻기 위해 적절한 테스트 환경을 준비해야 한다:</p><ol><li><strong>테스트 환경 선택</strong>:<ul><li>개발/테스트 환경: 초기 테스트 및 디버깅</li><li>스테이징 환경: 프로덕션과 유사한 환경에서의 검증</li><li>프로덕션 환경: 모니터링 모드로 제한적 테스트(주의 필요)</li></ul></li><li><strong>테스트 데이터 준비</strong>:<ul><li>충분한 양의 테스트 데이터</li><li>다양한 데이터 프로필</li><li>데이터 무결성 보장</li></ul></li><li><strong>모니터링 도구 설정</strong>:<ul><li>서버 모니터링(CPU, 메모리, 디스크, 네트워크)</li><li>애플리케이션 성능 모니터링(APM)</li><li>로그 수집 및 분석 도구</li><li>데이터베이스 모니터링</li></ul></li><li><strong>외부 의존성 처리</strong>:<ul><li>서드파티 서비스 모킹 또는 샌드박스 환경 사용</li><li>결제 게이트웨이 등 중요 서비스의 테스트 모드 활용</li><li>외부 API 호출 제한 고려</li></ul></li></ol><h3 id=api-부하-테스트-도구-및-구현>API 부하 테스트 도구 및 구현<a hidden class=anchor aria-hidden=true href=#api-부하-테스트-도구-및-구현>#</a></h3><h4 id=주요-부하-테스트-도구-비교>주요 부하 테스트 도구 비교<a hidden class=anchor aria-hidden=true href=#주요-부하-테스트-도구-비교>#</a></h4><p>다양한 부하 테스트 도구 중 API 테스트에 적합한 주요 도구들을 살펴보면:</p><ol><li><strong>Apache JMeter</strong>:<ul><li>가장 널리 사용되는 오픈소스 부하 테스트 도구</li><li>다양한 프로토콜 지원(HTTP, HTTPS, SOAP, REST, WebSocket 등)</li><li>GUI 및 CLI 모드 제공</li><li>확장 가능한 플러그인 시스템</li><li>분산 테스트 지원</li></ul></li><li><strong>k6</strong>:<ul><li>개발자 친화적인 모던 부하 테스트 도구</li><li>JavaScript로 테스트 스크립트 작성</li><li>가볍고 리소스 효율적</li><li>클라우드 서비스 통합</li><li>Grafana와의 통합을 통한 시각화</li></ul></li><li><strong>Locust</strong>:<ul><li>Python 기반 부하 테스트 프레임워크</li><li>코드로 테스트 시나리오 정의</li><li>분산 테스트 지원</li><li>실시간 웹 UI 제공</li><li>높은 확장성</li></ul></li><li><strong>Gatling</strong>:<ul><li>Scala 기반 고성능 부하 테스트 도구</li><li>코드 기반 시나리오 작성</li><li>뛰어난 보고서 생성</li><li>리소스 효율적</li><li>CI/CD 통합 용이</li></ul></li><li><strong>Postman/Newman</strong>:<ul><li>API 개발 도구에서 출발한 테스트 환경</li><li>사용자 친화적 인터페이스</li><li>Newman을 통한 CLI 실행</li><li>기존 Postman 컬렉션 활용 가능</li><li>다른 전문 부하 테스트 도구에 비해 제한적인 규모</li></ul></li></ol><table><thead><tr><th>도구</th><th>언어/스크립팅</th><th>학습 곡선</th><th>분산 테스트</th><th>확장성</th><th>보고서</th><th>적합한 경우</th></tr></thead><tbody><tr><td>JMeter</td><td>XML/GUI, BeanShell, JSR223</td><td>중간</td><td>우수</td><td>매우 높음</td><td>기본적</td><td>다양한 프로토콜 테스트, 엔터프라이즈 환경</td></tr><tr><td>k6</td><td>JavaScript</td><td>낮음</td><td>우수</td><td>높음</td><td>우수</td><td>개발자 중심 환경, 클라우드 네이티브 앱</td></tr><tr><td>Locust</td><td>Python</td><td>낮음</td><td>우수</td><td>높음</td><td>기본적</td><td>Python 개발자, 사용자 행동 시뮬레이션</td></tr><tr><td>Gatling</td><td>Scala/DSL</td><td>중간</td><td>제한적</td><td>높음</td><td>매우 우수</td><td>성능 엔지니어, 복잡한 시나리오</td></tr><tr><td>Postman</td><td>JavaScript</td><td>매우 낮음</td><td>제한적</td><td>제한적</td><td>제한적</td><td>간단한 테스트, API 개발자 친화적</td></tr></tbody></table><h4 id=k6를-사용한-부하-테스트-구현-예제>k6를 사용한 부하 테스트 구현 예제<a hidden class=anchor aria-hidden=true href=#k6를-사용한-부하-테스트-구현-예제>#</a></h4><p>k6는 직관적이고 개발자 친화적인 API 부하 테스트 도구이다. 다음은 k6를 사용한 간단한 부하 테스트 스크립트 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14>14</a>
</span><span class=lnt id=hl-1-15><a class=lnlinks href=#hl-1-15>15</a>
</span><span class=lnt id=hl-1-16><a class=lnlinks href=#hl-1-16>16</a>
</span><span class=lnt id=hl-1-17><a class=lnlinks href=#hl-1-17>17</a>
</span><span class=lnt id=hl-1-18><a class=lnlinks href=#hl-1-18>18</a>
</span><span class=lnt id=hl-1-19><a class=lnlinks href=#hl-1-19>19</a>
</span><span class=lnt id=hl-1-20><a class=lnlinks href=#hl-1-20>20</a>
</span><span class=lnt id=hl-1-21><a class=lnlinks href=#hl-1-21>21</a>
</span><span class=lnt id=hl-1-22><a class=lnlinks href=#hl-1-22>22</a>
</span><span class=lnt id=hl-1-23><a class=lnlinks href=#hl-1-23>23</a>
</span><span class=lnt id=hl-1-24><a class=lnlinks href=#hl-1-24>24</a>
</span><span class=lnt id=hl-1-25><a class=lnlinks href=#hl-1-25>25</a>
</span><span class=lnt id=hl-1-26><a class=lnlinks href=#hl-1-26>26</a>
</span><span class=lnt id=hl-1-27><a class=lnlinks href=#hl-1-27>27</a>
</span><span class=lnt id=hl-1-28><a class=lnlinks href=#hl-1-28>28</a>
</span><span class=lnt id=hl-1-29><a class=lnlinks href=#hl-1-29>29</a>
</span><span class=lnt id=hl-1-30><a class=lnlinks href=#hl-1-30>30</a>
</span><span class=lnt id=hl-1-31><a class=lnlinks href=#hl-1-31>31</a>
</span><span class=lnt id=hl-1-32><a class=lnlinks href=#hl-1-32>32</a>
</span><span class=lnt id=hl-1-33><a class=lnlinks href=#hl-1-33>33</a>
</span><span class=lnt id=hl-1-34><a class=lnlinks href=#hl-1-34>34</a>
</span><span class=lnt id=hl-1-35><a class=lnlinks href=#hl-1-35>35</a>
</span><span class=lnt id=hl-1-36><a class=lnlinks href=#hl-1-36>36</a>
</span><span class=lnt id=hl-1-37><a class=lnlinks href=#hl-1-37>37</a>
</span><span class=lnt id=hl-1-38><a class=lnlinks href=#hl-1-38>38</a>
</span><span class=lnt id=hl-1-39><a class=lnlinks href=#hl-1-39>39</a>
</span><span class=lnt id=hl-1-40><a class=lnlinks href=#hl-1-40>40</a>
</span><span class=lnt id=hl-1-41><a class=lnlinks href=#hl-1-41>41</a>
</span><span class=lnt id=hl-1-42><a class=lnlinks href=#hl-1-42>42</a>
</span><span class=lnt id=hl-1-43><a class=lnlinks href=#hl-1-43>43</a>
</span><span class=lnt id=hl-1-44><a class=lnlinks href=#hl-1-44>44</a>
</span><span class=lnt id=hl-1-45><a class=lnlinks href=#hl-1-45>45</a>
</span><span class=lnt id=hl-1-46><a class=lnlinks href=#hl-1-46>46</a>
</span><span class=lnt id=hl-1-47><a class=lnlinks href=#hl-1-47>47</a>
</span><span class=lnt id=hl-1-48><a class=lnlinks href=#hl-1-48>48</a>
</span><span class=lnt id=hl-1-49><a class=lnlinks href=#hl-1-49>49</a>
</span><span class=lnt id=hl-1-50><a class=lnlinks href=#hl-1-50>50</a>
</span><span class=lnt id=hl-1-51><a class=lnlinks href=#hl-1-51>51</a>
</span><span class=lnt id=hl-1-52><a class=lnlinks href=#hl-1-52>52</a>
</span><span class=lnt id=hl-1-53><a class=lnlinks href=#hl-1-53>53</a>
</span><span class=lnt id=hl-1-54><a class=lnlinks href=#hl-1-54>54</a>
</span><span class=lnt id=hl-1-55><a class=lnlinks href=#hl-1-55>55</a>
</span><span class=lnt id=hl-1-56><a class=lnlinks href=#hl-1-56>56</a>
</span><span class=lnt id=hl-1-57><a class=lnlinks href=#hl-1-57>57</a>
</span><span class=lnt id=hl-1-58><a class=lnlinks href=#hl-1-58>58</a>
</span><span class=lnt id=hl-1-59><a class=lnlinks href=#hl-1-59>59</a>
</span><span class=lnt id=hl-1-60><a class=lnlinks href=#hl-1-60>60</a>
</span><span class=lnt id=hl-1-61><a class=lnlinks href=#hl-1-61>61</a>
</span><span class=lnt id=hl-1-62><a class=lnlinks href=#hl-1-62>62</a>
</span><span class=lnt id=hl-1-63><a class=lnlinks href=#hl-1-63>63</a>
</span><span class=lnt id=hl-1-64><a class=lnlinks href=#hl-1-64>64</a>
</span><span class=lnt id=hl-1-65><a class=lnlinks href=#hl-1-65>65</a>
</span><span class=lnt id=hl-1-66><a class=lnlinks href=#hl-1-66>66</a>
</span><span class=lnt id=hl-1-67><a class=lnlinks href=#hl-1-67>67</a>
</span><span class=lnt id=hl-1-68><a class=lnlinks href=#hl-1-68>68</a>
</span><span class=lnt id=hl-1-69><a class=lnlinks href=#hl-1-69>69</a>
</span><span class=lnt id=hl-1-70><a class=lnlinks href=#hl-1-70>70</a>
</span><span class=lnt id=hl-1-71><a class=lnlinks href=#hl-1-71>71</a>
</span><span class=lnt id=hl-1-72><a class=lnlinks href=#hl-1-72>72</a>
</span><span class=lnt id=hl-1-73><a class=lnlinks href=#hl-1-73>73</a>
</span><span class=lnt id=hl-1-74><a class=lnlinks href=#hl-1-74>74</a>
</span><span class=lnt id=hl-1-75><a class=lnlinks href=#hl-1-75>75</a>
</span><span class=lnt id=hl-1-76><a class=lnlinks href=#hl-1-76>76</a>
</span><span class=lnt id=hl-1-77><a class=lnlinks href=#hl-1-77>77</a>
</span><span class=lnt id=hl-1-78><a class=lnlinks href=#hl-1-78>78</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>http</span> <span class=nx>from</span> <span class=s1>&#39;k6/http&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>sleep</span><span class=p>,</span> <span class=nx>check</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;k6&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Rate</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;k6/metrics&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용자 정의 메트릭 설정
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>errorRate</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Rate</span><span class=p>(</span><span class=s1>&#39;errors&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 테스트 구성
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kr>const</span> <span class=nx>options</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>stages</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nx>duration</span><span class=o>:</span> <span class=s1>&#39;1m&#39;</span><span class=p>,</span> <span class=nx>target</span><span class=o>:</span> <span class=mi>50</span> <span class=p>},</span>   <span class=c1>// 1분 동안 50명의 가상 사용자로 증가
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>{</span> <span class=nx>duration</span><span class=o>:</span> <span class=s1>&#39;3m&#39;</span><span class=p>,</span> <span class=nx>target</span><span class=o>:</span> <span class=mi>50</span> <span class=p>},</span>   <span class=c1>// 3분 동안 50명의 가상 사용자 유지
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>{</span> <span class=nx>duration</span><span class=o>:</span> <span class=s1>&#39;1m&#39;</span><span class=p>,</span> <span class=nx>target</span><span class=o>:</span> <span class=mi>100</span> <span class=p>},</span>  <span class=c1>// 1분 동안 100명의 가상 사용자로 증가
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>{</span> <span class=nx>duration</span><span class=o>:</span> <span class=s1>&#39;5m&#39;</span><span class=p>,</span> <span class=nx>target</span><span class=o>:</span> <span class=mi>100</span> <span class=p>},</span>  <span class=c1>// 5분 동안 100명의 가상 사용자 유지
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>{</span> <span class=nx>duration</span><span class=o>:</span> <span class=s1>&#39;1m&#39;</span><span class=p>,</span> <span class=nx>target</span><span class=o>:</span> <span class=mi>0</span> <span class=p>},</span>    <span class=c1>// 1분 동안 0명으로 감소 (정상 종료)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>thresholds</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>http_req_duration</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;p(95)&lt;500&#39;</span><span class=p>],</span> <span class=c1>// 95%의 요청이 500ms 미만이어야 함
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s1>&#39;http_req_duration{name:login}&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;p(99)&lt;1000&#39;</span><span class=p>],</span> <span class=c1>// 로그인은 99%가 1초 미만
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>errors</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;rate&lt;0.01&#39;</span><span class=p>],</span>           <span class=c1>// 1% 미만의 오류율
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 테스트 실행 로직
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 로그인 API 호출
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>loginRes</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;https://api.example.com/login&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>username</span><span class=o>:</span> <span class=s1>&#39;testuser&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>password</span><span class=o>:</span> <span class=s1>&#39;password123&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>tags</span><span class=o>:</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;login&#39;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 응답 검증
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>loginSuccess</span> <span class=o>=</span> <span class=nx>check</span><span class=p>(</span><span class=nx>loginRes</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;login status is 200&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;has access token&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=s1>&#39;token&#39;</span><span class=p>)</span> <span class=o>!==</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 오류 추적
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>loginSuccess</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>errorRate</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 인증 토큰 추출
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>loginRes</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=s1>&#39;token&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 인증된 API 호출
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>userProfileRes</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;https://api.example.com/user/profile&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;Authorization&#39;</span><span class=o>:</span> <span class=sb>`Bearer </span><span class=si>${</span><span class=nx>token</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=nx>tags</span><span class=o>:</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;profile&#39;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 응답 검증
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>check</span><span class=p>(</span><span class=nx>userProfileRes</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;profile status is 200&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;profile has data&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=s1>&#39;data&#39;</span><span class=p>)</span> <span class=o>!==</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 제품 검색 API 호출
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>searchRes</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;https://api.example.com/products?query=mobile&amp;limit=10&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;Authorization&#39;</span><span class=o>:</span> <span class=sb>`Bearer </span><span class=si>${</span><span class=nx>token</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=nx>tags</span><span class=o>:</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;search&#39;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 응답 검증
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>check</span><span class=p>(</span><span class=nx>searchRes</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;search status is 200&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;products returned&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=s1>&#39;items&#39;</span><span class=p>).</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 사용자 행동 시뮬레이션을 위한 지연
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>sleep</span><span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>*</span> <span class=mi>3</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span> <span class=c1>// 1-4초 사이의 랜덤 지연
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>이 스크립트는 다음과 같은 실제 사용자 흐름을 시뮬레이션한다:</p><ol><li>로그인 API 호출</li><li>사용자 프로필 조회</li><li>제품 검색</li><li>각 API 응답 검증</li><li>사용자 행동 간 지연 시간 추가</li></ol><h4 id=jmeter를-사용한-부하-테스트-구현>JMeter를 사용한 부하 테스트 구현<a hidden class=anchor aria-hidden=true href=#jmeter를-사용한-부하-테스트-구현>#</a></h4><p>JMeter는 강력한 GUI와 다양한 기능을 제공하는 부하 테스트 도구이다.</p><p>JMeter를 사용한 부하 테스트 구현 방법은 다음과 같다:</p><ol><li><strong>테스트 계획 생성</strong>:<ul><li>JMeter 실행 및 테스트 계획 생성</li><li>스레드 그룹 추가(가상 사용자)</li><li>HTTP 요청 기본 설정(도메인, 포트 등)</li></ul></li><li><strong>HTTP 요청 구성</strong>:<ul><li>로그인 요청 추가</li><li>세션 변수 추출(예: 토큰)</li><li>추가 API 요청 구성</li></ul></li><li><strong>검증 및 모니터링 설정</strong>:<ul><li>응답 어설션 추가</li><li>타이머 추가(지연 시간)</li><li>결과 수집 리스너 추가</li></ul></li><li><strong>테스트 실행 및 분석</strong>:<ul><li>테스트 실행</li><li>결과 분석 및 보고서 생성</li></ul></li></ol><p>JMeter 테스트 계획의 XML 구조 예시 (간략화):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span><span class=lnt id=hl-2-20><a class=lnlinks href=#hl-2-20>20</a>
</span><span class=lnt id=hl-2-21><a class=lnlinks href=#hl-2-21>21</a>
</span><span class=lnt id=hl-2-22><a class=lnlinks href=#hl-2-22>22</a>
</span><span class=lnt id=hl-2-23><a class=lnlinks href=#hl-2-23>23</a>
</span><span class=lnt id=hl-2-24><a class=lnlinks href=#hl-2-24>24</a>
</span><span class=lnt id=hl-2-25><a class=lnlinks href=#hl-2-25>25</a>
</span><span class=lnt id=hl-2-26><a class=lnlinks href=#hl-2-26>26</a>
</span><span class=lnt id=hl-2-27><a class=lnlinks href=#hl-2-27>27</a>
</span><span class=lnt id=hl-2-28><a class=lnlinks href=#hl-2-28>28</a>
</span><span class=lnt id=hl-2-29><a class=lnlinks href=#hl-2-29>29</a>
</span><span class=lnt id=hl-2-30><a class=lnlinks href=#hl-2-30>30</a>
</span><span class=lnt id=hl-2-31><a class=lnlinks href=#hl-2-31>31</a>
</span><span class=lnt id=hl-2-32><a class=lnlinks href=#hl-2-32>32</a>
</span><span class=lnt id=hl-2-33><a class=lnlinks href=#hl-2-33>33</a>
</span><span class=lnt id=hl-2-34><a class=lnlinks href=#hl-2-34>34</a>
</span><span class=lnt id=hl-2-35><a class=lnlinks href=#hl-2-35>35</a>
</span><span class=lnt id=hl-2-36><a class=lnlinks href=#hl-2-36>36</a>
</span><span class=lnt id=hl-2-37><a class=lnlinks href=#hl-2-37>37</a>
</span><span class=lnt id=hl-2-38><a class=lnlinks href=#hl-2-38>38</a>
</span><span class=lnt id=hl-2-39><a class=lnlinks href=#hl-2-39>39</a>
</span><span class=lnt id=hl-2-40><a class=lnlinks href=#hl-2-40>40</a>
</span><span class=lnt id=hl-2-41><a class=lnlinks href=#hl-2-41>41</a>
</span><span class=lnt id=hl-2-42><a class=lnlinks href=#hl-2-42>42</a>
</span><span class=lnt id=hl-2-43><a class=lnlinks href=#hl-2-43>43</a>
</span><span class=lnt id=hl-2-44><a class=lnlinks href=#hl-2-44>44</a>
</span><span class=lnt id=hl-2-45><a class=lnlinks href=#hl-2-45>45</a>
</span><span class=lnt id=hl-2-46><a class=lnlinks href=#hl-2-46>46</a>
</span><span class=lnt id=hl-2-47><a class=lnlinks href=#hl-2-47>47</a>
</span><span class=lnt id=hl-2-48><a class=lnlinks href=#hl-2-48>48</a>
</span><span class=lnt id=hl-2-49><a class=lnlinks href=#hl-2-49>49</a>
</span><span class=lnt id=hl-2-50><a class=lnlinks href=#hl-2-50>50</a>
</span><span class=lnt id=hl-2-51><a class=lnlinks href=#hl-2-51>51</a>
</span><span class=lnt id=hl-2-52><a class=lnlinks href=#hl-2-52>52</a>
</span><span class=lnt id=hl-2-53><a class=lnlinks href=#hl-2-53>53</a>
</span><span class=lnt id=hl-2-54><a class=lnlinks href=#hl-2-54>54</a>
</span><span class=lnt id=hl-2-55><a class=lnlinks href=#hl-2-55>55</a>
</span><span class=lnt id=hl-2-56><a class=lnlinks href=#hl-2-56>56</a>
</span><span class=lnt id=hl-2-57><a class=lnlinks href=#hl-2-57>57</a>
</span><span class=lnt id=hl-2-58><a class=lnlinks href=#hl-2-58>58</a>
</span><span class=lnt id=hl-2-59><a class=lnlinks href=#hl-2-59>59</a>
</span><span class=lnt id=hl-2-60><a class=lnlinks href=#hl-2-60>60</a>
</span><span class=lnt id=hl-2-61><a class=lnlinks href=#hl-2-61>61</a>
</span><span class=lnt id=hl-2-62><a class=lnlinks href=#hl-2-62>62</a>
</span><span class=lnt id=hl-2-63><a class=lnlinks href=#hl-2-63>63</a>
</span><span class=lnt id=hl-2-64><a class=lnlinks href=#hl-2-64>64</a>
</span><span class=lnt id=hl-2-65><a class=lnlinks href=#hl-2-65>65</a>
</span><span class=lnt id=hl-2-66><a class=lnlinks href=#hl-2-66>66</a>
</span><span class=lnt id=hl-2-67><a class=lnlinks href=#hl-2-67>67</a>
</span><span class=lnt id=hl-2-68><a class=lnlinks href=#hl-2-68>68</a>
</span><span class=lnt id=hl-2-69><a class=lnlinks href=#hl-2-69>69</a>
</span><span class=lnt id=hl-2-70><a class=lnlinks href=#hl-2-70>70</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=cp>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;jmeterTestPlan</span> <span class=na>version=</span><span class=s>&#34;1.2&#34;</span> <span class=na>properties=</span><span class=s>&#34;5.0&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;hashTree&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;TestPlan</span> <span class=na>guiclass=</span><span class=s>&#34;TestPlanGui&#34;</span> <span class=na>testname=</span><span class=s>&#34;API Load Test Plan&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;ThreadGroup</span> <span class=na>guiclass=</span><span class=s>&#34;ThreadGroupGui&#34;</span> <span class=na>testname=</span><span class=s>&#34;API Users&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;stringProp</span> <span class=na>name=</span><span class=s>&#34;ThreadGroup.num_threads&#34;</span><span class=nt>&gt;</span>100<span class=nt>&lt;/stringProp&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;stringProp</span> <span class=na>name=</span><span class=s>&#34;ThreadGroup.ramp_time&#34;</span><span class=nt>&gt;</span>60<span class=nt>&lt;/stringProp&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;boolProp</span> <span class=na>name=</span><span class=s>&#34;ThreadGroup.scheduler&#34;</span><span class=nt>&gt;</span>true<span class=nt>&lt;/boolProp&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;stringProp</span> <span class=na>name=</span><span class=s>&#34;ThreadGroup.duration&#34;</span><span class=nt>&gt;</span>300<span class=nt>&lt;/stringProp&gt;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c>&lt;!-- HTTP 요청 기본 설정 --&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;ConfigTestElement</span> <span class=na>guiclass=</span><span class=s>&#34;HttpDefaultsGui&#34;</span> <span class=na>testname=</span><span class=s>&#34;HTTP Request Defaults&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;stringProp</span> <span class=na>name=</span><span class=s>&#34;HTTPSampler.domain&#34;</span><span class=nt>&gt;</span>api.example.com<span class=nt>&lt;/stringProp&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;stringProp</span> <span class=na>name=</span><span class=s>&#34;HTTPSampler.protocol&#34;</span><span class=nt>&gt;</span>https<span class=nt>&lt;/stringProp&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/ConfigTestElement&gt;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c>&lt;!-- 로그인 요청 --&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;HTTPSamplerProxy</span> <span class=na>guiclass=</span><span class=s>&#34;HttpTestSampleGui&#34;</span> <span class=na>testname=</span><span class=s>&#34;Login Request&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;stringProp</span> <span class=na>name=</span><span class=s>&#34;HTTPSampler.path&#34;</span><span class=nt>&gt;</span>/login<span class=nt>&lt;/stringProp&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;stringProp</span> <span class=na>name=</span><span class=s>&#34;HTTPSampler.method&#34;</span><span class=nt>&gt;</span>POST<span class=nt>&lt;/stringProp&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;boolProp</span> <span class=na>name=</span><span class=s>&#34;HTTPSampler.use_keepalive&#34;</span><span class=nt>&gt;</span>true<span class=nt>&lt;/boolProp&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;elementProp</span> <span class=na>name=</span><span class=s>&#34;HTTPsampler.Arguments&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;collectionProp</span> <span class=na>name=</span><span class=s>&#34;Arguments.arguments&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>              <span class=nt>&lt;elementProp</span> <span class=na>name=</span><span class=s>&#34;username&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;stringProp</span> <span class=na>name=</span><span class=s>&#34;Argument.value&#34;</span><span class=nt>&gt;</span>testuser<span class=nt>&lt;/stringProp&gt;</span>
</span></span><span class=line><span class=cl>              <span class=nt>&lt;/elementProp&gt;</span>
</span></span><span class=line><span class=cl>              <span class=nt>&lt;elementProp</span> <span class=na>name=</span><span class=s>&#34;password&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;stringProp</span> <span class=na>name=</span><span class=s>&#34;Argument.value&#34;</span><span class=nt>&gt;</span>password123<span class=nt>&lt;/stringProp&gt;</span>
</span></span><span class=line><span class=cl>              <span class=nt>&lt;/elementProp&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;/collectionProp&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;/elementProp&gt;</span>
</span></span><span class=line><span class=cl>          
</span></span><span class=line><span class=cl>          <span class=c>&lt;!-- JSON 응답에서 토큰 추출 --&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;JSONPostProcessor</span> <span class=na>guiclass=</span><span class=s>&#34;JSONPostProcessorGui&#34;</span> <span class=na>testname=</span><span class=s>&#34;Extract Token&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;stringProp</span> <span class=na>name=</span><span class=s>&#34;JSONPostProcessor.referenceNames&#34;</span><span class=nt>&gt;</span>token<span class=nt>&lt;/stringProp&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;stringProp</span> <span class=na>name=</span><span class=s>&#34;JSONPostProcessor.jsonPathExprs&#34;</span><span class=nt>&gt;</span>$.token<span class=nt>&lt;/stringProp&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;/JSONPostProcessor&gt;</span>
</span></span><span class=line><span class=cl>          
</span></span><span class=line><span class=cl>          <span class=c>&lt;!-- 응답 검증 --&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;ResponseAssertion</span> <span class=na>guiclass=</span><span class=s>&#34;AssertionGui&#34;</span> <span class=na>testname=</span><span class=s>&#34;Check Status&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;collectionProp</span> <span class=na>name=</span><span class=s>&#34;Asserion.test_strings&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>              <span class=nt>&lt;stringProp&gt;</span>200<span class=nt>&lt;/stringProp&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;/collectionProp&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;stringProp</span> <span class=na>name=</span><span class=s>&#34;Assertion.test_field&#34;</span><span class=nt>&gt;</span>Assertion.response_code<span class=nt>&lt;/stringProp&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;/ResponseAssertion&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/HTTPSamplerProxy&gt;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c>&lt;!-- 사용자 프로필 요청 --&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;HTTPSamplerProxy</span> <span class=na>guiclass=</span><span class=s>&#34;HttpTestSampleGui&#34;</span> <span class=na>testname=</span><span class=s>&#34;Get Profile&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;stringProp</span> <span class=na>name=</span><span class=s>&#34;HTTPSampler.path&#34;</span><span class=nt>&gt;</span>/user/profile<span class=nt>&lt;/stringProp&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;stringProp</span> <span class=na>name=</span><span class=s>&#34;HTTPSampler.method&#34;</span><span class=nt>&gt;</span>GET<span class=nt>&lt;/stringProp&gt;</span>
</span></span><span class=line><span class=cl>          
</span></span><span class=line><span class=cl>          <span class=c>&lt;!-- 헤더 추가 --&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;HeaderManager</span> <span class=na>guiclass=</span><span class=s>&#34;HeaderPanel&#34;</span> <span class=na>testname=</span><span class=s>&#34;Auth Headers&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;collectionProp</span> <span class=na>name=</span><span class=s>&#34;HeaderManager.headers&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>              <span class=nt>&lt;elementProp</span> <span class=na>name=</span><span class=s>&#34;Authorization&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;stringProp</span> <span class=na>name=</span><span class=s>&#34;Header.value&#34;</span><span class=nt>&gt;</span>Bearer ${token}<span class=nt>&lt;/stringProp&gt;</span>
</span></span><span class=line><span class=cl>              <span class=nt>&lt;/elementProp&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;/collectionProp&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nt>&lt;/HeaderManager&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/HTTPSamplerProxy&gt;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c>&lt;!-- 결과 수집 --&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;ResultCollector</span> <span class=na>guiclass=</span><span class=s>&#34;ViewResultsFullVisualizer&#34;</span> <span class=na>testname=</span><span class=s>&#34;Results Tree&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;ResultCollector</span> <span class=na>guiclass=</span><span class=s>&#34;SummaryReport&#34;</span> <span class=na>testname=</span><span class=s>&#34;Summary Report&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;ResultCollector</span> <span class=na>guiclass=</span><span class=s>&#34;GraphVisualizer&#34;</span> <span class=na>testname=</span><span class=s>&#34;Graph Results&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=nt>&lt;/ThreadGroup&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/TestPlan&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;/hashTree&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/jmeterTestPlan&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=postmannewman을-사용한-간단한-부하-테스트>Postman/Newman을 사용한 간단한 부하 테스트<a hidden class=anchor aria-hidden=true href=#postmannewman을-사용한-간단한-부하-테스트>#</a></h4><p>Postman은 종합적인 API 개발 및 테스트 환경을 제공하며, Newman을 통해 부하 테스트를 수행할 수 있다:</p><ol><li><strong>Postman 컬렉션 생성</strong>:<ul><li>API 요청 시퀀스 설정</li><li>환경 변수 구성(URL, 인증 정보 등)</li><li>테스트 스크립트 작성(응답 검증)</li></ul></li><li><strong>Newman 스크립트 작성</strong>:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span><span class=lnt id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a>
</span><span class=lnt id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a>
</span><span class=lnt id=hl-3-17><a class=lnlinks href=#hl-3-17>17</a>
</span><span class=lnt id=hl-3-18><a class=lnlinks href=#hl-3-18>18</a>
</span><span class=lnt id=hl-3-19><a class=lnlinks href=#hl-3-19>19</a>
</span><span class=lnt id=hl-3-20><a class=lnlinks href=#hl-3-20>20</a>
</span><span class=lnt id=hl-3-21><a class=lnlinks href=#hl-3-21>21</a>
</span><span class=lnt id=hl-3-22><a class=lnlinks href=#hl-3-22>22</a>
</span><span class=lnt id=hl-3-23><a class=lnlinks href=#hl-3-23>23</a>
</span><span class=lnt id=hl-3-24><a class=lnlinks href=#hl-3-24>24</a>
</span><span class=lnt id=hl-3-25><a class=lnlinks href=#hl-3-25>25</a>
</span><span class=lnt id=hl-3-26><a class=lnlinks href=#hl-3-26>26</a>
</span><span class=lnt id=hl-3-27><a class=lnlinks href=#hl-3-27>27</a>
</span><span class=lnt id=hl-3-28><a class=lnlinks href=#hl-3-28>28</a>
</span><span class=lnt id=hl-3-29><a class=lnlinks href=#hl-3-29>29</a>
</span><span class=lnt id=hl-3-30><a class=lnlinks href=#hl-3-30>30</a>
</span><span class=lnt id=hl-3-31><a class=lnlinks href=#hl-3-31>31</a>
</span><span class=lnt id=hl-3-32><a class=lnlinks href=#hl-3-32>32</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1># 병렬 실행 수</span>
</span></span><span class=line><span class=cl><span class=nv>PARALLEL</span><span class=o>=</span><span class=m>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 반복 횟수</span>
</span></span><span class=line><span class=cl><span class=nv>ITERATIONS</span><span class=o>=</span><span class=m>100</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 시작 시간 기록</span>
</span></span><span class=line><span class=cl><span class=nv>START</span><span class=o>=</span><span class=k>$(</span>date +%s<span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 병렬로 Newman 실행</span>
</span></span><span class=line><span class=cl><span class=k>for</span> i in <span class=k>$(</span>seq <span class=m>1</span> <span class=nv>$PARALLEL</span><span class=k>)</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>  newman run MyAPICollection.json -e TestEnvironment.json -n <span class=nv>$ITERATIONS</span> --silent <span class=p>&amp;</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 모든 프로세스 완료 대기</span>
</span></span><span class=line><span class=cl><span class=nb>wait</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 종료 시간 기록</span>
</span></span><span class=line><span class=cl><span class=nv>END</span><span class=o>=</span><span class=k>$(</span>date +%s<span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 결과 계산</span>
</span></span><span class=line><span class=cl><span class=nv>DIFF</span><span class=o>=</span><span class=k>$((</span> <span class=nv>$END</span> <span class=o>-</span> <span class=nv>$START</span> <span class=k>))</span>
</span></span><span class=line><span class=cl><span class=nv>TOTAL_REQUESTS</span><span class=o>=</span><span class=k>$((</span> <span class=nv>$PARALLEL</span> <span class=o>*</span> <span class=nv>$ITERATIONS</span> <span class=o>*</span> <span class=k>$(</span>jq <span class=s1>&#39;.item | length&#39;</span> MyAPICollection.json<span class=k>)</span> <span class=k>))</span>
</span></span><span class=line><span class=cl><span class=nv>RPS</span><span class=o>=</span><span class=k>$(</span><span class=nb>echo</span> <span class=s2>&#34;scale=2; </span><span class=nv>$TOTAL_REQUESTS</span><span class=s2> / </span><span class=nv>$DIFF</span><span class=s2>&#34;</span> <span class=p>|</span> bc<span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;병렬 프로세스: </span><span class=nv>$PARALLEL</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;반복 횟수: </span><span class=nv>$ITERATIONS</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;총 요청 수: </span><span class=nv>$TOTAL_REQUESTS</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;총 소요 시간: </span><span class=si>${</span><span class=nv>DIFF</span><span class=si>}</span><span class=s2>초&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;초당 요청 수(RPS): </span><span class=nv>$RPS</span><span class=s2>&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>Postman/Newman은 전문적인 부하 테스트 도구에 비해 기능이 제한적이지만, 이미 Postman을 사용하고 있는 팀에서 간단한 부하 테스트를 수행하기에 적합하다.</p><h3 id=api-부하-테스트-실행-및-모니터링>API 부하 테스트 실행 및 모니터링<a hidden class=anchor aria-hidden=true href=#api-부하-테스트-실행-및-모니터링>#</a></h3><h4 id=점진적-부하-접근법>점진적 부하 접근법<a hidden class=anchor aria-hidden=true href=#점진적-부하-접근법>#</a></h4><p>부하 테스트를 효과적으로 실행하기 위한 점진적 접근법을 사용한다:</p><ol><li><strong>기준선 설정</strong>:<ul><li>최소 부하에서 API 성능 측정</li><li>정상 상태의 응답 시간, 처리량, 자원 사용률 등 기록</li><li>이후 테스트의 비교 기준으로 활용</li></ul></li><li><strong>점진적 부하 증가</strong>:<ul><li>낮은 부하에서 시작하여 점진적으로 증가</li><li>각 단계마다 시스템 안정화 시간 부여</li><li>비선형적 증가(10, 25, 50, 100, 200 사용자 등)</li></ul></li><li><strong>한계 지점 식별</strong>:<ul><li>성능 저하 시작 지점 식별</li><li>병목 현상 발생 지점 모니터링</li><li>오류 발생 임계값 확인</li></ul></li><li><strong>최적화 및 재테스트</strong>:<ul><li>식별된 문제점 해결</li><li>최적화 후 동일한 조건에서 재테스트</li><li>개선 사항 검증</li></ul></li></ol><h4 id=실시간-모니터링-설정>실시간 모니터링 설정<a hidden class=anchor aria-hidden=true href=#실시간-모니터링-설정>#</a></h4><p>부하 테스트 중 다양한 지표를 실시간으로 모니터링하는 방법:</p><ol><li><strong>인프라 모니터링</strong>:<ul><li>CPU 사용률</li><li>메모리 사용량</li><li>디스크 I/O</li><li>네트워크 트래픽</li><li>도구: Prometheus, Grafana, CloudWatch, Datadog 등</li></ul></li><li><strong>애플리케이션 모니터링</strong>:<ul><li>응답 시간</li><li>오류율</li><li>처리량</li><li>내부 메소드/함수 실행 시간</li><li>도구: New Relic, AppDynamics, Dynatrace 등</li></ul></li><li><strong>데이터베이스 모니터링</strong>:<ul><li>쿼리 실행 시간</li><li>연결 수</li><li>캐시 효율성</li><li>잠금 경합</li><li>도구: PMM, pgAdmin, SQL Server Profiler 등</li></ul></li><li><strong>모니터링 대시보드 구성</strong>:</li></ol><p>Grafana를 사용한 모니터링 대시보드 구성 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span><span class=lnt id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a>
</span><span class=lnt id=hl-4-16><a class=lnlinks href=#hl-4-16>16</a>
</span><span class=lnt id=hl-4-17><a class=lnlinks href=#hl-4-17>17</a>
</span><span class=lnt id=hl-4-18><a class=lnlinks href=#hl-4-18>18</a>
</span><span class=lnt id=hl-4-19><a class=lnlinks href=#hl-4-19>19</a>
</span><span class=lnt id=hl-4-20><a class=lnlinks href=#hl-4-20>20</a>
</span><span class=lnt id=hl-4-21><a class=lnlinks href=#hl-4-21>21</a>
</span><span class=lnt id=hl-4-22><a class=lnlinks href=#hl-4-22>22</a>
</span><span class=lnt id=hl-4-23><a class=lnlinks href=#hl-4-23>23</a>
</span><span class=lnt id=hl-4-24><a class=lnlinks href=#hl-4-24>24</a>
</span><span class=lnt id=hl-4-25><a class=lnlinks href=#hl-4-25>25</a>
</span><span class=lnt id=hl-4-26><a class=lnlinks href=#hl-4-26>26</a>
</span><span class=lnt id=hl-4-27><a class=lnlinks href=#hl-4-27>27</a>
</span><span class=lnt id=hl-4-28><a class=lnlinks href=#hl-4-28>28</a>
</span><span class=lnt id=hl-4-29><a class=lnlinks href=#hl-4-29>29</a>
</span><span class=lnt id=hl-4-30><a class=lnlinks href=#hl-4-30>30</a>
</span><span class=lnt id=hl-4-31><a class=lnlinks href=#hl-4-31>31</a>
</span><span class=lnt id=hl-4-32><a class=lnlinks href=#hl-4-32>32</a>
</span><span class=lnt id=hl-4-33><a class=lnlinks href=#hl-4-33>33</a>
</span><span class=lnt id=hl-4-34><a class=lnlinks href=#hl-4-34>34</a>
</span><span class=lnt id=hl-4-35><a class=lnlinks href=#hl-4-35>35</a>
</span><span class=lnt id=hl-4-36><a class=lnlinks href=#hl-4-36>36</a>
</span><span class=lnt id=hl-4-37><a class=lnlinks href=#hl-4-37>37</a>
</span><span class=lnt id=hl-4-38><a class=lnlinks href=#hl-4-38>38</a>
</span><span class=lnt id=hl-4-39><a class=lnlinks href=#hl-4-39>39</a>
</span><span class=lnt id=hl-4-40><a class=lnlinks href=#hl-4-40>40</a>
</span><span class=lnt id=hl-4-41><a class=lnlinks href=#hl-4-41>41</a>
</span><span class=lnt id=hl-4-42><a class=lnlinks href=#hl-4-42>42</a>
</span><span class=lnt id=hl-4-43><a class=lnlinks href=#hl-4-43>43</a>
</span><span class=lnt id=hl-4-44><a class=lnlinks href=#hl-4-44>44</a>
</span><span class=lnt id=hl-4-45><a class=lnlinks href=#hl-4-45>45</a>
</span><span class=lnt id=hl-4-46><a class=lnlinks href=#hl-4-46>46</a>
</span><span class=lnt id=hl-4-47><a class=lnlinks href=#hl-4-47>47</a>
</span><span class=lnt id=hl-4-48><a class=lnlinks href=#hl-4-48>48</a>
</span><span class=lnt id=hl-4-49><a class=lnlinks href=#hl-4-49>49</a>
</span><span class=lnt id=hl-4-50><a class=lnlinks href=#hl-4-50>50</a>
</span><span class=lnt id=hl-4-51><a class=lnlinks href=#hl-4-51>51</a>
</span><span class=lnt id=hl-4-52><a class=lnlinks href=#hl-4-52>52</a>
</span><span class=lnt id=hl-4-53><a class=lnlinks href=#hl-4-53>53</a>
</span><span class=lnt id=hl-4-54><a class=lnlinks href=#hl-4-54>54</a>
</span><span class=lnt id=hl-4-55><a class=lnlinks href=#hl-4-55>55</a>
</span><span class=lnt id=hl-4-56><a class=lnlinks href=#hl-4-56>56</a>
</span><span class=lnt id=hl-4-57><a class=lnlinks href=#hl-4-57>57</a>
</span><span class=lnt id=hl-4-58><a class=lnlinks href=#hl-4-58>58</a>
</span><span class=lnt id=hl-4-59><a class=lnlinks href=#hl-4-59>59</a>
</span><span class=lnt id=hl-4-60><a class=lnlinks href=#hl-4-60>60</a>
</span><span class=lnt id=hl-4-61><a class=lnlinks href=#hl-4-61>61</a>
</span><span class=lnt id=hl-4-62><a class=lnlinks href=#hl-4-62>62</a>
</span><span class=lnt id=hl-4-63><a class=lnlinks href=#hl-4-63>63</a>
</span><span class=lnt id=hl-4-64><a class=lnlinks href=#hl-4-64>64</a>
</span><span class=lnt id=hl-4-65><a class=lnlinks href=#hl-4-65>65</a>
</span><span class=lnt id=hl-4-66><a class=lnlinks href=#hl-4-66>66</a>
</span><span class=lnt id=hl-4-67><a class=lnlinks href=#hl-4-67>67</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># Grafana 대시보드 구성 (JSON 형식의 일부)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>{<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>&#34;dashboard&#34;: </span>{<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>&#34;title&#34;: </span><span class=s2>&#34;API 부하 테스트 모니터링&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>&#34;panels&#34;: </span><span class=p>[</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>{<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;title&#34;: </span><span class=s2>&#34;API 응답 시간&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;type&#34;: </span><span class=s2>&#34;graph&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;datasource&#34;: </span><span class=s2>&#34;Prometheus&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;targets&#34;: </span><span class=p>[</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>{<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>&#34;expr&#34;: </span><span class=s2>&#34;histogram_quantile(0.95, sum(rate(http_request_duration_seconds_bucket{service=\&#34;api\&#34;}[1m])) by (le))&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>&#34;legendFormat&#34;: </span><span class=s2>&#34;p95&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>}<span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>{<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>&#34;expr&#34;: </span><span class=s2>&#34;histogram_quantile(0.50, sum(rate(http_request_duration_seconds_bucket{service=\&#34;api\&#34;}[1m])) by (le))&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>&#34;legendFormat&#34;: </span><span class=s2>&#34;p50&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>}<span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>{<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;title&#34;: </span><span class=s2>&#34;초당 요청 수&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;type&#34;: </span><span class=s2>&#34;graph&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;datasource&#34;: </span><span class=s2>&#34;Prometheus&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;targets&#34;: </span><span class=p>[</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>{<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>&#34;expr&#34;: </span><span class=s2>&#34;sum(rate(http_requests_total{service=\&#34;api\&#34;}[1m]))&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>&#34;legendFormat&#34;: </span><span class=s2>&#34;RPS&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>}<span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>{<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;title&#34;: </span><span class=s2>&#34;오류율&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;type&#34;: </span><span class=s2>&#34;graph&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;datasource&#34;: </span><span class=s2>&#34;Prometheus&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;targets&#34;: </span><span class=p>[</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>{<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>&#34;expr&#34;: </span><span class=s2>&#34;sum(rate(http_requests_total{service=\&#34;api\&#34;, code=~\&#34;5..\&#34;}[1m])) / sum(rate(http_requests_total{service=\&#34;api\&#34;}[1m]))&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>&#34;legendFormat&#34;: </span><span class=s2>&#34;Error Rate&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>}<span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>{<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;title&#34;: </span><span class=s2>&#34;CPU 사용률&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;type&#34;: </span><span class=s2>&#34;graph&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;datasource&#34;: </span><span class=s2>&#34;Prometheus&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;targets&#34;: </span><span class=p>[</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>{<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>&#34;expr&#34;: </span><span class=s2>&#34;avg(rate(process_cpu_seconds_total{service=\&#34;api\&#34;}[1m]) * 100)&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>&#34;legendFormat&#34;: </span><span class=s2>&#34;CPU %&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>}<span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>{<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;title&#34;: </span><span class=s2>&#34;메모리 사용량&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;type&#34;: </span><span class=s2>&#34;graph&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;datasource&#34;: </span><span class=s2>&#34;Prometheus&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>&#34;targets&#34;: </span><span class=p>[</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>{<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>&#34;expr&#34;: </span><span class=s2>&#34;process_resident_memory_bytes{service=\&#34;api\&#34;} / 1024 / 1024&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>&#34;legendFormat&#34;: </span><span class=s2>&#34;Memory (MB)&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=api-부하-테스트-결과-분석-및-최적화>API 부하 테스트 결과 분석 및 최적화<a hidden class=anchor aria-hidden=true href=#api-부하-테스트-결과-분석-및-최적화>#</a></h3><h4 id=주요-성능-지표-분석>주요 성능 지표 분석<a hidden class=anchor aria-hidden=true href=#주요-성능-지표-분석>#</a></h4><p>부하 테스트 결과를 분석하기 위한 주요 성능 지표:</p><ol><li><strong>응답 시간 분석</strong>:<ul><li>평균 응답 시간: 전체 응답 시간의 평균</li><li>응답 시간 백분위수: 50%(중앙값), 90%, 95%, 99% 등</li><li>응답 시간 추세: 부하 증가에 따른 응답 시간 변화 패턴</li></ul></li><li><strong>처리량 분석</strong>:<ul><li>초당 요청 수(RPS): 초당 처리된 요청 수</li><li>처리량 한계: 응답 시간 저하 없이 처리할 수 있는 최대 요청 수</li><li>처리량 확장성: 리소스 추가에 따른 처리량 증가 패턴</li></ul></li><li><strong>오류율 분석</strong>:<ul><li>전체 오류율: 전체 요청 중 오류 비율</li><li>오류 유형 분포: HTTP 상태 코드별 오류 분포</li><li>오류 발생 패턴: 특정 부하 수준에서의 오류 증가 패턴</li></ul></li><li><strong>자원 사용률 분석</strong>:<ul><li>CPU 사용률: 평균 및 최대 CPU 사용량</li><li>메모리 사용량: 평균 및 최대 메모리 사용량</li><li>네트워크 I/O: 전송 및 수신 데이터량</li><li>디스크 I/O: 읽기/쓰기 작업량 및 지연 시간</li></ul></li></ol><h4 id=병목-현상-식별>병목 현상 식별<a hidden class=anchor aria-hidden=true href=#병목-현상-식별>#</a></h4><p>API 성능 병목 현상을 식별하는 방법:</p><ol><li><strong>CPU 병목</strong>:<ul><li>증상: 높은 CPU 사용률(80-100%), 응답 시간 증가, 처리량 정체</li><li>원인: 비효율적 알고리즘, 과도한 계산, 코드 최적화 부족</li><li>진단 도구: 프로파일러, APM 도구, CPU 모니터링</li></ul></li><li><strong>메모리 병목</strong>:<ul><li>증상: 높은 메모리 사용량, 빈번한 GC(가비지 컬렉션), 성능 저하</li><li>원인: 메모리 누수, 과도한 캐싱, 대용량 객체 생성</li><li>진단 도구: 힙 덤프 분석, 메모리 프로파일러</li></ul></li><li><strong>데이터베이스 병목</strong>:<ul><li>증상: 높은 데이터베이스 응답 시간, 연결 풀 포화</li><li>원인: 비효율적 쿼리, 부적절한 인덱스, 잠금 경합</li><li>진단 도구: 쿼리 분석기, 데이터베이스 모니터링 도구</li></ul></li><li><strong>네트워크 병목</strong>:<ul><li>증상: 높은 네트워크 지연 시간, 낮은 처리량</li><li>원인: 대용량 페이로드, 과도한 요청 수, 네트워크 인프라 제한</li><li>진단 도구: 네트워크 분석기, 패킷 캡처 도구</li></ul></li><li><strong>외부 서비스 병목</strong>:<ul><li>증상: 외부 API 호출 지연, 타임아웃 증가</li><li>원인: 외부 서비스 한계, 부적절한 통합 방식</li><li>진단 도구: 분산 추적 시스템(Zipkin, Jaeger 등)</li></ul></li></ol><h4 id=최적화-전략-및-권장-사항>최적화 전략 및 권장 사항<a hidden class=anchor aria-hidden=true href=#최적화-전략-및-권장-사항>#</a></h4><p>식별된 병목 현상에 대한 최적화 전략:</p><ol><li><p><strong>애플리케이션 레벨 최적화</strong>:</p><ul><li>코드 최적화: 알고리즘 개선, 루프 최적화, 메모리 사용 효율화</li><li>비동기 처리: 블로킹 작업의 비동기 처리로 전환</li><li>캐싱 전략: 적절한 캐싱 도입 및 최적화</li><li>병렬 처리: 작업의 병렬 처리 구현</li></ul><p>예시 코드 (Node.js - 비동기 처리 최적화):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span><span class=lnt id=hl-5-18><a class=lnlinks href=#hl-5-18>18</a>
</span><span class=lnt id=hl-5-19><a class=lnlinks href=#hl-5-19>19</a>
</span><span class=lnt id=hl-5-20><a class=lnlinks href=#hl-5-20>20</a>
</span><span class=lnt id=hl-5-21><a class=lnlinks href=#hl-5-21>21</a>
</span><span class=lnt id=hl-5-22><a class=lnlinks href=#hl-5-22>22</a>
</span><span class=lnt id=hl-5-23><a class=lnlinks href=#hl-5-23>23</a>
</span><span class=lnt id=hl-5-24><a class=lnlinks href=#hl-5-24>24</a>
</span><span class=lnt id=hl-5-25><a class=lnlinks href=#hl-5-25>25</a>
</span><span class=lnt id=hl-5-26><a class=lnlinks href=#hl-5-26>26</a>
</span><span class=lnt id=hl-5-27><a class=lnlinks href=#hl-5-27>27</a>
</span><span class=lnt id=hl-5-28><a class=lnlinks href=#hl-5-28>28</a>
</span><span class=lnt id=hl-5-29><a class=lnlinks href=#hl-5-29>29</a>
</span><span class=lnt id=hl-5-30><a class=lnlinks href=#hl-5-30>30</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 최적화 전 - 순차적 처리
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>async</span> <span class=kd>function</span> <span class=nx>processRequest</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>userData</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>getUserData</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>userId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>productData</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>getProductData</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>productId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>recommendationData</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>getRecommendations</span><span class=p>(</span><span class=nx>userData</span><span class=p>,</span> <span class=nx>productData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>user</span><span class=o>:</span> <span class=nx>userData</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>product</span><span class=o>:</span> <span class=nx>productData</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>recommendations</span><span class=o>:</span> <span class=nx>recommendationData</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 최적화 후 - 병렬 처리
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>async</span> <span class=kd>function</span> <span class=nx>processRequest</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 독립적인 작업을 병렬로 실행
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=p>[</span><span class=nx>userData</span><span class=p>,</span> <span class=nx>productData</span><span class=p>]</span> <span class=o>=</span> <span class=kr>await</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>all</span><span class=p>([</span>
</span></span><span class=line><span class=cl>    <span class=nx>getUserData</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>userId</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=nx>getProductData</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>productId</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 의존적인 작업은 순차적으로 실행
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>recommendationData</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>getRecommendations</span><span class=p>(</span><span class=nx>userData</span><span class=p>,</span> <span class=nx>productData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>user</span><span class=o>:</span> <span class=nx>userData</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>product</span><span class=o>:</span> <span class=nx>productData</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>recommendations</span><span class=o>:</span> <span class=nx>recommendationData</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>데이터베이스 최적화</strong>:</p><ul><li>인덱스 최적화: 적절한 인덱스 추가 및 불필요한 인덱스 제거</li><li>쿼리 튜닝: 비효율적인 쿼리 개선, 실행 계획 분석</li><li>연결 풀 조정: 데이터베이스 연결 풀 크기 최적화</li><li>데이터 모델링 개선: 필요에 따라 데이터 모델 수정</li></ul><p>예시 코드 (SQL - 쿼리 최적화):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15>15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 최적화 전
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=o>*</span><span class=p>,</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>email</span><span class=p>,</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>price</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>orders</span><span class=w> </span><span class=n>o</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>JOIN</span><span class=w> </span><span class=n>customers</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=n>customer_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>JOIN</span><span class=w> </span><span class=n>products</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=n>product_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=n>created_at</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=s1>&#39;2023-01-01&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 최적화 후
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=n>order_date</span><span class=p>,</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=n>total_amount</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>c</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>customer_name</span><span class=p>,</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>email</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>p</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>product_name</span><span class=p>,</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>price</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>orders</span><span class=w> </span><span class=n>o</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>JOIN</span><span class=w> </span><span class=n>customers</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=n>customer_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>JOIN</span><span class=w> </span><span class=n>products</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=n>product_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=n>created_at</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=s1>&#39;2023-01-01&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=mi>100</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li><li><p><strong>캐싱 전략 구현</strong>:</p><ul><li>응답 캐싱: 자주 요청되는 API 응답 캐싱</li><li>데이터 캐싱: 자주 접근하는 데이터 캐싱</li><li>분산 캐싱: Redis, Memcached 등을 활용한 분산 캐싱 구현</li><li>캐시 무효화 전략: 적절한 캐시 만료 및 무효화 정책 수립</li></ul><p>예시 코드 (Node.js + Redis 캐싱):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13>13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14>14</a>
</span><span class=lnt id=hl-7-15><a class=lnlinks href=#hl-7-15>15</a>
</span><span class=lnt id=hl-7-16><a class=lnlinks href=#hl-7-16>16</a>
</span><span class=lnt id=hl-7-17><a class=lnlinks href=#hl-7-17>17</a>
</span><span class=lnt id=hl-7-18><a class=lnlinks href=#hl-7-18>18</a>
</span><span class=lnt id=hl-7-19><a class=lnlinks href=#hl-7-19>19</a>
</span><span class=lnt id=hl-7-20><a class=lnlinks href=#hl-7-20>20</a>
</span><span class=lnt id=hl-7-21><a class=lnlinks href=#hl-7-21>21</a>
</span><span class=lnt id=hl-7-22><a class=lnlinks href=#hl-7-22>22</a>
</span><span class=lnt id=hl-7-23><a class=lnlinks href=#hl-7-23>23</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>redis</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;redis&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>client</span> <span class=o>=</span> <span class=nx>redis</span><span class=p>.</span><span class=nx>createClient</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>promisify</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;util&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>getAsync</span> <span class=o>=</span> <span class=nx>promisify</span><span class=p>(</span><span class=nx>client</span><span class=p>.</span><span class=nx>get</span><span class=p>).</span><span class=nx>bind</span><span class=p>(</span><span class=nx>client</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>setAsync</span> <span class=o>=</span> <span class=nx>promisify</span><span class=p>(</span><span class=nx>client</span><span class=p>.</span><span class=nx>set</span><span class=p>).</span><span class=nx>bind</span><span class=p>(</span><span class=nx>client</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>getProductDetails</span><span class=p>(</span><span class=nx>productId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 캐시에서 데이터 확인
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>cacheKey</span> <span class=o>=</span> <span class=sb>`product:</span><span class=si>${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>cachedData</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>getAsync</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>cachedData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>cachedData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 캐시에 없는 경우 데이터베이스에서 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>product</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>db</span><span class=p>.</span><span class=nx>products</span><span class=p>.</span><span class=nx>findById</span><span class=p>(</span><span class=nx>productId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 결과를 캐시에 저장 (60초 만료)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>await</span> <span class=nx>setAsync</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>,</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>product</span><span class=p>),</span> <span class=s1>&#39;EX&#39;</span><span class=p>,</span> <span class=mi>60</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>product</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>인프라 최적화</strong>:</p><ul><li>수평적 확장: 서버 인스턴스 추가를 통한 부하 분산</li><li>수직적 확장: 서버 성능 향상(CPU, 메모리 증설)</li><li>로드 밸런싱: 효율적인 부하 분산 전략 구현</li><li>CDN 활용: 정적 자원 제공을 위한 CDN 구성</li></ul><p>예시 (Docker Compose를 사용한 수평적 확장):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span><span class=lnt id=hl-8-15><a class=lnlinks href=#hl-8-15>15</a>
</span><span class=lnt id=hl-8-16><a class=lnlinks href=#hl-8-16>16</a>
</span><span class=lnt id=hl-8-17><a class=lnlinks href=#hl-8-17>17</a>
</span><span class=lnt id=hl-8-18><a class=lnlinks href=#hl-8-18>18</a>
</span><span class=lnt id=hl-8-19><a class=lnlinks href=#hl-8-19>19</a>
</span><span class=lnt id=hl-8-20><a class=lnlinks href=#hl-8-20>20</a>
</span><span class=lnt id=hl-8-21><a class=lnlinks href=#hl-8-21>21</a>
</span><span class=lnt id=hl-8-22><a class=lnlinks href=#hl-8-22>22</a>
</span><span class=lnt id=hl-8-23><a class=lnlinks href=#hl-8-23>23</a>
</span><span class=lnt id=hl-8-24><a class=lnlinks href=#hl-8-24>24</a>
</span><span class=lnt id=hl-8-25><a class=lnlinks href=#hl-8-25>25</a>
</span><span class=lnt id=hl-8-26><a class=lnlinks href=#hl-8-26>26</a>
</span><span class=lnt id=hl-8-27><a class=lnlinks href=#hl-8-27>27</a>
</span><span class=lnt id=hl-8-28><a class=lnlinks href=#hl-8-28>28</a>
</span><span class=lnt id=hl-8-29><a class=lnlinks href=#hl-8-29>29</a>
</span><span class=lnt id=hl-8-30><a class=lnlinks href=#hl-8-30>30</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># docker-compose.yml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>api</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>my-api:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>  </span><span class=c># 인스턴스 수 증가</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>cpus</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;0.5&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>512M</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>DB_HOST=db</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>REDIS_HOST=cache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>nginx</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>nginx:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;80:80&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./nginx.conf:/etc/nginx/nginx.conf</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>api</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>db</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>postgres:13</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>cache</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>redis:6</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li><li><p><strong>아키텍처 수준 최적화</strong>:</p><ul><li>마이크로서비스 분할: 대규모 모놀리식 API를 작은 마이크로서비스로 분할</li><li>비동기 통신: 적절한 상황에서 비동기 메시징으로 전환</li><li>서킷 브레이커 패턴: 장애 확산 방지를 위한 서킷 브레이커 도입</li><li>백프레셔 메커니즘: 과부하 상황에서의 요청 제어 메커니즘 구현</li></ul></li></ol><h3 id=지속적-부하-테스트-자동화>지속적 부하 테스트 자동화<a hidden class=anchor aria-hidden=true href=#지속적-부하-테스트-자동화>#</a></h3><h4 id=cicd-파이프라인-통합>CI/CD 파이프라인 통합<a hidden class=anchor aria-hidden=true href=#cicd-파이프라인-통합>#</a></h4><p>부하 테스트를 지속적 통합 및 배포 프로세스에 통합하는 방법:</p><ol><li><strong>파이프라인 구성</strong>:<ul><li>정기적 부하 테스트 스케줄링(일간, 주간)</li><li>성능 회귀 테스트 자동화</li><li>주요 기능 변경 시 부하 테스트 트리거</li></ul></li><li><strong>테스트 환경 자동화</strong>:<ul><li>인프라스트럭처 코드(IaC)를 통한 테스트 환경 프로비저닝</li><li>컨테이너 및 오케스트레이션 도구를 활용한 환경 구성</li><li>테스트 데이터 자동 생성 및 관리</li></ul></li></ol><p>GitHub Actions를 활용한 CI/CD 파이프라인 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a>
</span><span class=lnt id=hl-9-11><a class=lnlinks href=#hl-9-11>11</a>
</span><span class=lnt id=hl-9-12><a class=lnlinks href=#hl-9-12>12</a>
</span><span class=lnt id=hl-9-13><a class=lnlinks href=#hl-9-13>13</a>
</span><span class=lnt id=hl-9-14><a class=lnlinks href=#hl-9-14>14</a>
</span><span class=lnt id=hl-9-15><a class=lnlinks href=#hl-9-15>15</a>
</span><span class=lnt id=hl-9-16><a class=lnlinks href=#hl-9-16>16</a>
</span><span class=lnt id=hl-9-17><a class=lnlinks href=#hl-9-17>17</a>
</span><span class=lnt id=hl-9-18><a class=lnlinks href=#hl-9-18>18</a>
</span><span class=lnt id=hl-9-19><a class=lnlinks href=#hl-9-19>19</a>
</span><span class=lnt id=hl-9-20><a class=lnlinks href=#hl-9-20>20</a>
</span><span class=lnt id=hl-9-21><a class=lnlinks href=#hl-9-21>21</a>
</span><span class=lnt id=hl-9-22><a class=lnlinks href=#hl-9-22>22</a>
</span><span class=lnt id=hl-9-23><a class=lnlinks href=#hl-9-23>23</a>
</span><span class=lnt id=hl-9-24><a class=lnlinks href=#hl-9-24>24</a>
</span><span class=lnt id=hl-9-25><a class=lnlinks href=#hl-9-25>25</a>
</span><span class=lnt id=hl-9-26><a class=lnlinks href=#hl-9-26>26</a>
</span><span class=lnt id=hl-9-27><a class=lnlinks href=#hl-9-27>27</a>
</span><span class=lnt id=hl-9-28><a class=lnlinks href=#hl-9-28>28</a>
</span><span class=lnt id=hl-9-29><a class=lnlinks href=#hl-9-29>29</a>
</span><span class=lnt id=hl-9-30><a class=lnlinks href=#hl-9-30>30</a>
</span><span class=lnt id=hl-9-31><a class=lnlinks href=#hl-9-31>31</a>
</span><span class=lnt id=hl-9-32><a class=lnlinks href=#hl-9-32>32</a>
</span><span class=lnt id=hl-9-33><a class=lnlinks href=#hl-9-33>33</a>
</span><span class=lnt id=hl-9-34><a class=lnlinks href=#hl-9-34>34</a>
</span><span class=lnt id=hl-9-35><a class=lnlinks href=#hl-9-35>35</a>
</span><span class=lnt id=hl-9-36><a class=lnlinks href=#hl-9-36>36</a>
</span><span class=lnt id=hl-9-37><a class=lnlinks href=#hl-9-37>37</a>
</span><span class=lnt id=hl-9-38><a class=lnlinks href=#hl-9-38>38</a>
</span><span class=lnt id=hl-9-39><a class=lnlinks href=#hl-9-39>39</a>
</span><span class=lnt id=hl-9-40><a class=lnlinks href=#hl-9-40>40</a>
</span><span class=lnt id=hl-9-41><a class=lnlinks href=#hl-9-41>41</a>
</span><span class=lnt id=hl-9-42><a class=lnlinks href=#hl-9-42>42</a>
</span><span class=lnt id=hl-9-43><a class=lnlinks href=#hl-9-43>43</a>
</span><span class=lnt id=hl-9-44><a class=lnlinks href=#hl-9-44>44</a>
</span><span class=lnt id=hl-9-45><a class=lnlinks href=#hl-9-45>45</a>
</span><span class=lnt id=hl-9-46><a class=lnlinks href=#hl-9-46>46</a>
</span><span class=lnt id=hl-9-47><a class=lnlinks href=#hl-9-47>47</a>
</span><span class=lnt id=hl-9-48><a class=lnlinks href=#hl-9-48>48</a>
</span><span class=lnt id=hl-9-49><a class=lnlinks href=#hl-9-49>49</a>
</span><span class=lnt id=hl-9-50><a class=lnlinks href=#hl-9-50>50</a>
</span><span class=lnt id=hl-9-51><a class=lnlinks href=#hl-9-51>51</a>
</span><span class=lnt id=hl-9-52><a class=lnlinks href=#hl-9-52>52</a>
</span><span class=lnt id=hl-9-53><a class=lnlinks href=#hl-9-53>53</a>
</span><span class=lnt id=hl-9-54><a class=lnlinks href=#hl-9-54>54</a>
</span><span class=lnt id=hl-9-55><a class=lnlinks href=#hl-9-55>55</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># .github/workflows/load-test.yml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>API Load Testing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=l>main, develop ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pull_request</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=l>main ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>schedule</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>cron</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;0 2 * * 1&#39;</span><span class=w>  </span><span class=c># 매주 월요일 02:00 UTC에 실행</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>load-test</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Set up Node.js</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-node@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>node-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;16&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Install k6</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>        curl -L https://github.com/loadimpact/k6/releases/download/v0.37.0/k6-v0.37.0-linux-amd64.tar.gz | tar xzf -
</span></span></span><span class=line><span class=cl><span class=sd>        sudo cp k6-v0.37.0-linux-amd64/k6 /usr/local/bin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy test environment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>docker-compose -f docker-compose.test.yml up -d</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Wait for services to start</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>sleep 30</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Run baseline load test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>k6 run --summary-export=baseline-results.json tests/performance/baseline.js</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Run stress test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>k6 run --summary-export=stress-results.json tests/performance/stress.js</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Run endurance test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>k6 run --summary-export=endurance-results.json tests/performance/endurance.js</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Generate performance report</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>node scripts/generate-performance-report.js</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Archive test results</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/upload-artifact@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>load-test-results</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          baseline-results.json
</span></span></span><span class=line><span class=cl><span class=sd>          stress-results.json
</span></span></span><span class=line><span class=cl><span class=sd>          endurance-results.json
</span></span></span><span class=line><span class=cl><span class=sd>          performance-report.html</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=지속적-성능-모니터링>지속적 성능 모니터링<a hidden class=anchor aria-hidden=true href=#지속적-성능-모니터링>#</a></h4><p>지속적인 성능 모니터링을 통한 API 성능 관리 방법:</p><ol><li><strong>모니터링 시스템 구성</strong>:<ul><li>실시간 성능 모니터링 설정</li><li>주요 성능 지표 대시보드 구성</li><li>알림 임계값 설정</li></ul></li><li><strong>성능 추세 분석</strong>:<ul><li>시간에 따른 성능 변화 추적</li><li>주기적인 성능 보고서 생성</li><li>배포 전후 성능 비교</li></ul></li><li><strong>사용자 경험 모니터링</strong>:<ul><li>실제 사용자 모니터링(RUM)</li><li>클라이언트 측 성능 지표 수집</li><li>사용자 경험 지표(Core Web Vitals 등) 추적</li></ul></li></ol><p>Prometheus와 Grafana를 사용한 지속적 모니터링 구성 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span><span class=lnt id=hl-10-12><a class=lnlinks href=#hl-10-12>12</a>
</span><span class=lnt id=hl-10-13><a class=lnlinks href=#hl-10-13>13</a>
</span><span class=lnt id=hl-10-14><a class=lnlinks href=#hl-10-14>14</a>
</span><span class=lnt id=hl-10-15><a class=lnlinks href=#hl-10-15>15</a>
</span><span class=lnt id=hl-10-16><a class=lnlinks href=#hl-10-16>16</a>
</span><span class=lnt id=hl-10-17><a class=lnlinks href=#hl-10-17>17</a>
</span><span class=lnt id=hl-10-18><a class=lnlinks href=#hl-10-18>18</a>
</span><span class=lnt id=hl-10-19><a class=lnlinks href=#hl-10-19>19</a>
</span><span class=lnt id=hl-10-20><a class=lnlinks href=#hl-10-20>20</a>
</span><span class=lnt id=hl-10-21><a class=lnlinks href=#hl-10-21>21</a>
</span><span class=lnt id=hl-10-22><a class=lnlinks href=#hl-10-22>22</a>
</span><span class=lnt id=hl-10-23><a class=lnlinks href=#hl-10-23>23</a>
</span><span class=lnt id=hl-10-24><a class=lnlinks href=#hl-10-24>24</a>
</span><span class=lnt id=hl-10-25><a class=lnlinks href=#hl-10-25>25</a>
</span><span class=lnt id=hl-10-26><a class=lnlinks href=#hl-10-26>26</a>
</span><span class=lnt id=hl-10-27><a class=lnlinks href=#hl-10-27>27</a>
</span><span class=lnt id=hl-10-28><a class=lnlinks href=#hl-10-28>28</a>
</span><span class=lnt id=hl-10-29><a class=lnlinks href=#hl-10-29>29</a>
</span><span class=lnt id=hl-10-30><a class=lnlinks href=#hl-10-30>30</a>
</span><span class=lnt id=hl-10-31><a class=lnlinks href=#hl-10-31>31</a>
</span><span class=lnt id=hl-10-32><a class=lnlinks href=#hl-10-32>32</a>
</span><span class=lnt id=hl-10-33><a class=lnlinks href=#hl-10-33>33</a>
</span><span class=lnt id=hl-10-34><a class=lnlinks href=#hl-10-34>34</a>
</span><span class=lnt id=hl-10-35><a class=lnlinks href=#hl-10-35>35</a>
</span><span class=lnt id=hl-10-36><a class=lnlinks href=#hl-10-36>36</a>
</span><span class=lnt id=hl-10-37><a class=lnlinks href=#hl-10-37>37</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># docker-compose 구성</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>prometheus</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>prom/prometheus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./prometheus.yml:/etc/prometheus/prometheus.yml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;9090:9090&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>grafana</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>grafana/grafana</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>prometheus</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;3000:3000&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>grafana-storage:/var/lib/grafana</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>GF_SECURITY_ADMIN_PASSWORD=secret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>node-exporter</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>prom/node-exporter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>/proc:/host/proc:ro</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>/sys:/host/sys:ro</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>/:/rootfs:ro</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;--path.procfs=/host/proc&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;--path.sysfs=/host/sys&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;--collector.filesystem.ignored-mount-points=^/(sys|proc|dev|host|etc)($$|/)&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;9100:9100&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>grafana-storage</span><span class=p>:</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Prometheus 설정 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15>15</a>
</span><span class=lnt id=hl-11-16><a class=lnlinks href=#hl-11-16>16</a>
</span><span class=lnt id=hl-11-17><a class=lnlinks href=#hl-11-17>17</a>
</span><span class=lnt id=hl-11-18><a class=lnlinks href=#hl-11-18>18</a>
</span><span class=lnt id=hl-11-19><a class=lnlinks href=#hl-11-19>19</a>
</span><span class=lnt id=hl-11-20><a class=lnlinks href=#hl-11-20>20</a>
</span><span class=lnt id=hl-11-21><a class=lnlinks href=#hl-11-21>21</a>
</span><span class=lnt id=hl-11-22><a class=lnlinks href=#hl-11-22>22</a>
</span><span class=lnt id=hl-11-23><a class=lnlinks href=#hl-11-23>23</a>
</span><span class=lnt id=hl-11-24><a class=lnlinks href=#hl-11-24>24</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># prometheus.yml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>global</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>15s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>evaluation_interval</span><span class=p>:</span><span class=w> </span><span class=l>15s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;prometheus&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;localhost:9090&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;node&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;node-exporter:9100&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;api&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics_path</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;/metrics&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;api:8080&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 앱 서비스가 Prometheus 메트릭을 노출한다고 가정</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;applications&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metrics_path</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;/actuator/prometheus&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;app-service-1:8080&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;app-service-2:8080&#39;</span><span class=p>]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=확장성-및-신뢰성-개선-전략>확장성 및 신뢰성 개선 전략<a hidden class=anchor aria-hidden=true href=#확장성-및-신뢰성-개선-전략>#</a></h3><h4 id=자동-확장auto-scaling-구현>자동 확장(Auto-scaling) 구현<a hidden class=anchor aria-hidden=true href=#자동-확장auto-scaling-구현>#</a></h4><p>부하 변화에 대응하는 자동 확장 전략:</p><ol><li><strong>수평적 확장 자동화</strong>:<ul><li>클라우드 제공업체의 자동 확장 기능 활용(AWS Auto Scaling, Kubernetes HPA 등)</li><li>모니터링 지표 기반 확장 정책 설정</li><li>확장 임계값 및 쿨다운 기간 최적화</li></ul></li><li><strong>리소스 기반 확장 전략</strong>:<ul><li>CPU 사용률 기반 확장</li><li>메모리 사용량 기반 확장</li><li>요청 대기열 길이 기반 확장</li></ul></li><li><strong>예측적 확장</strong>:<ul><li>과거 사용 패턴 분석을 통한 예측적 확장</li><li>시간대별, 요일별, 계절별 트래픽 패턴 학습</li><li>예정된 이벤트(마케팅 캠페인, 세일 등)에 대비한 사전 확장</li></ul></li></ol><p>AWS Auto Scaling 구성 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1> 1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2> 2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3> 3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4> 4</a>
</span><span class=lnt id=hl-12-5><a class=lnlinks href=#hl-12-5> 5</a>
</span><span class=lnt id=hl-12-6><a class=lnlinks href=#hl-12-6> 6</a>
</span><span class=lnt id=hl-12-7><a class=lnlinks href=#hl-12-7> 7</a>
</span><span class=lnt id=hl-12-8><a class=lnlinks href=#hl-12-8> 8</a>
</span><span class=lnt id=hl-12-9><a class=lnlinks href=#hl-12-9> 9</a>
</span><span class=lnt id=hl-12-10><a class=lnlinks href=#hl-12-10>10</a>
</span><span class=lnt id=hl-12-11><a class=lnlinks href=#hl-12-11>11</a>
</span><span class=lnt id=hl-12-12><a class=lnlinks href=#hl-12-12>12</a>
</span><span class=lnt id=hl-12-13><a class=lnlinks href=#hl-12-13>13</a>
</span><span class=lnt id=hl-12-14><a class=lnlinks href=#hl-12-14>14</a>
</span><span class=lnt id=hl-12-15><a class=lnlinks href=#hl-12-15>15</a>
</span><span class=lnt id=hl-12-16><a class=lnlinks href=#hl-12-16>16</a>
</span><span class=lnt id=hl-12-17><a class=lnlinks href=#hl-12-17>17</a>
</span><span class=lnt id=hl-12-18><a class=lnlinks href=#hl-12-18>18</a>
</span><span class=lnt id=hl-12-19><a class=lnlinks href=#hl-12-19>19</a>
</span><span class=lnt id=hl-12-20><a class=lnlinks href=#hl-12-20>20</a>
</span><span class=lnt id=hl-12-21><a class=lnlinks href=#hl-12-21>21</a>
</span><span class=lnt id=hl-12-22><a class=lnlinks href=#hl-12-22>22</a>
</span><span class=lnt id=hl-12-23><a class=lnlinks href=#hl-12-23>23</a>
</span><span class=lnt id=hl-12-24><a class=lnlinks href=#hl-12-24>24</a>
</span><span class=lnt id=hl-12-25><a class=lnlinks href=#hl-12-25>25</a>
</span><span class=lnt id=hl-12-26><a class=lnlinks href=#hl-12-26>26</a>
</span><span class=lnt id=hl-12-27><a class=lnlinks href=#hl-12-27>27</a>
</span><span class=lnt id=hl-12-28><a class=lnlinks href=#hl-12-28>28</a>
</span><span class=lnt id=hl-12-29><a class=lnlinks href=#hl-12-29>29</a>
</span><span class=lnt id=hl-12-30><a class=lnlinks href=#hl-12-30>30</a>
</span><span class=lnt id=hl-12-31><a class=lnlinks href=#hl-12-31>31</a>
</span><span class=lnt id=hl-12-32><a class=lnlinks href=#hl-12-32>32</a>
</span><span class=lnt id=hl-12-33><a class=lnlinks href=#hl-12-33>33</a>
</span><span class=lnt id=hl-12-34><a class=lnlinks href=#hl-12-34>34</a>
</span><span class=lnt id=hl-12-35><a class=lnlinks href=#hl-12-35>35</a>
</span><span class=lnt id=hl-12-36><a class=lnlinks href=#hl-12-36>36</a>
</span><span class=lnt id=hl-12-37><a class=lnlinks href=#hl-12-37>37</a>
</span><span class=lnt id=hl-12-38><a class=lnlinks href=#hl-12-38>38</a>
</span><span class=lnt id=hl-12-39><a class=lnlinks href=#hl-12-39>39</a>
</span><span class=lnt id=hl-12-40><a class=lnlinks href=#hl-12-40>40</a>
</span><span class=lnt id=hl-12-41><a class=lnlinks href=#hl-12-41>41</a>
</span><span class=lnt id=hl-12-42><a class=lnlinks href=#hl-12-42>42</a>
</span><span class=lnt id=hl-12-43><a class=lnlinks href=#hl-12-43>43</a>
</span><span class=lnt id=hl-12-44><a class=lnlinks href=#hl-12-44>44</a>
</span><span class=lnt id=hl-12-45><a class=lnlinks href=#hl-12-45>45</a>
</span><span class=lnt id=hl-12-46><a class=lnlinks href=#hl-12-46>46</a>
</span><span class=lnt id=hl-12-47><a class=lnlinks href=#hl-12-47>47</a>
</span><span class=lnt id=hl-12-48><a class=lnlinks href=#hl-12-48>48</a>
</span><span class=lnt id=hl-12-49><a class=lnlinks href=#hl-12-49>49</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># CloudFormation 템플릿</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ApiAutoScalingGroup</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Type</span><span class=p>:</span><span class=w> </span><span class=l>AWS::AutoScaling::AutoScalingGroup</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Properties</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>LaunchConfigurationName</span><span class=p>:</span><span class=w> </span>!<span class=l>Ref ApiLaunchConfig</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MinSize</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MaxSize</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>DesiredCapacity</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>VPCZoneIdentifier</span><span class=p>:</span><span class=w> </span>!<span class=l>Ref Subnets</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>TargetGroupARNs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- !<span class=l>Ref ApiTargetGroup</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>Tags</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>Key</span><span class=p>:</span><span class=w> </span><span class=l>Name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>Value</span><span class=p>:</span><span class=w> </span><span class=l>API-Server</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>PropagateAtLaunch</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 가용 영역에 고르게 분산</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>AvailabilityZones</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- !<span class=l>Select [0, !GetAZs &#39;&#39;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- !<span class=l>Select [1, !GetAZs &#39;&#39;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ApiScalingPolicy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Type</span><span class=p>:</span><span class=w> </span><span class=l>AWS::AutoScaling::ScalingPolicy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Properties</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>AutoScalingGroupName</span><span class=p>:</span><span class=w> </span>!<span class=l>Ref ApiAutoScalingGroup</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>PolicyType</span><span class=p>:</span><span class=w> </span><span class=l>TargetTrackingScaling</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>TargetTrackingConfiguration</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>PredefinedMetricSpecification</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>PredefinedMetricType</span><span class=p>:</span><span class=w> </span><span class=l>ASGAverageCPUUtilization</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>TargetValue</span><span class=p>:</span><span class=w> </span><span class=m>70.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># 급격한 스케일 인/아웃 방지를 위한 쿨다운 기간</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>ScaleInCooldown</span><span class=p>:</span><span class=w> </span><span class=m>300</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>ScaleOutCooldown</span><span class=p>:</span><span class=w> </span><span class=m>60</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 요청 대기열 길이 기반 추가 확장 정책</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ApiQueueLengthScalingPolicy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Type</span><span class=p>:</span><span class=w> </span><span class=l>AWS::AutoScaling::ScalingPolicy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>Properties</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>AutoScalingGroupName</span><span class=p>:</span><span class=w> </span>!<span class=l>Ref ApiAutoScalingGroup</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>PolicyType</span><span class=p>:</span><span class=w> </span><span class=l>TargetTrackingScaling</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>TargetTrackingConfiguration</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>CustomizedMetricSpecification</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>MetricName</span><span class=p>:</span><span class=w> </span><span class=l>BacklogPerInstance</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>Namespace</span><span class=p>:</span><span class=w> </span><span class=l>AWS/SQS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>Dimensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>Name</span><span class=p>:</span><span class=w> </span><span class=l>QueueName</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>Value</span><span class=p>:</span><span class=w> </span>!<span class=l>GetAtt ApiQueue.QueueName</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>Statistic</span><span class=p>:</span><span class=w> </span><span class=l>Average</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>TargetValue</span><span class=p>:</span><span class=w> </span><span class=m>100.0</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=탄력성resilience-패턴-구현>탄력성(Resilience) 패턴 구현<a hidden class=anchor aria-hidden=true href=#탄력성resilience-패턴-구현>#</a></h4><p>API의 탄력성을 향상시키는 패턴들:</p><ol><li><p><strong>서킷 브레이커 패턴</strong>:</p><ul><li>장애가 발생한 서비스로의 호출을 차단하여 연쇄 장애 방지</li><li>장애 서비스 자동 복구 지원</li><li>대체 응답 또는 기능 제공</li></ul><p>예시 코드 (Node.js + Opossum):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1> 1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2> 2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3> 3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4> 4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5> 5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6> 6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7> 7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8> 8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9> 9</a>
</span><span class=lnt id=hl-13-10><a class=lnlinks href=#hl-13-10>10</a>
</span><span class=lnt id=hl-13-11><a class=lnlinks href=#hl-13-11>11</a>
</span><span class=lnt id=hl-13-12><a class=lnlinks href=#hl-13-12>12</a>
</span><span class=lnt id=hl-13-13><a class=lnlinks href=#hl-13-13>13</a>
</span><span class=lnt id=hl-13-14><a class=lnlinks href=#hl-13-14>14</a>
</span><span class=lnt id=hl-13-15><a class=lnlinks href=#hl-13-15>15</a>
</span><span class=lnt id=hl-13-16><a class=lnlinks href=#hl-13-16>16</a>
</span><span class=lnt id=hl-13-17><a class=lnlinks href=#hl-13-17>17</a>
</span><span class=lnt id=hl-13-18><a class=lnlinks href=#hl-13-18>18</a>
</span><span class=lnt id=hl-13-19><a class=lnlinks href=#hl-13-19>19</a>
</span><span class=lnt id=hl-13-20><a class=lnlinks href=#hl-13-20>20</a>
</span><span class=lnt id=hl-13-21><a class=lnlinks href=#hl-13-21>21</a>
</span><span class=lnt id=hl-13-22><a class=lnlinks href=#hl-13-22>22</a>
</span><span class=lnt id=hl-13-23><a class=lnlinks href=#hl-13-23>23</a>
</span><span class=lnt id=hl-13-24><a class=lnlinks href=#hl-13-24>24</a>
</span><span class=lnt id=hl-13-25><a class=lnlinks href=#hl-13-25>25</a>
</span><span class=lnt id=hl-13-26><a class=lnlinks href=#hl-13-26>26</a>
</span><span class=lnt id=hl-13-27><a class=lnlinks href=#hl-13-27>27</a>
</span><span class=lnt id=hl-13-28><a class=lnlinks href=#hl-13-28>28</a>
</span><span class=lnt id=hl-13-29><a class=lnlinks href=#hl-13-29>29</a>
</span><span class=lnt id=hl-13-30><a class=lnlinks href=#hl-13-30>30</a>
</span><span class=lnt id=hl-13-31><a class=lnlinks href=#hl-13-31>31</a>
</span><span class=lnt id=hl-13-32><a class=lnlinks href=#hl-13-32>32</a>
</span><span class=lnt id=hl-13-33><a class=lnlinks href=#hl-13-33>33</a>
</span><span class=lnt id=hl-13-34><a class=lnlinks href=#hl-13-34>34</a>
</span><span class=lnt id=hl-13-35><a class=lnlinks href=#hl-13-35>35</a>
</span><span class=lnt id=hl-13-36><a class=lnlinks href=#hl-13-36>36</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>CircuitBreaker</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;opossum&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 데이터베이스 조회 함수
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>async</span> <span class=kd>function</span> <span class=nx>getDatabaseData</span><span class=p>(</span><span class=nx>query</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 데이터베이스 호출 로직
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 서킷 브레이커 구성
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>breaker</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>CircuitBreaker</span><span class=p>(</span><span class=nx>getDatabaseData</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>failureThreshold</span><span class=o>:</span> <span class=mi>50</span><span class=p>,</span>         <span class=c1>// 50% 실패율에서 회로 개방
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>resetTimeout</span><span class=o>:</span> <span class=mi>10000</span><span class=p>,</span>          <span class=c1>// 10초 후 반개방 상태로 전환
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>timeout</span><span class=o>:</span> <span class=mi>3000</span><span class=p>,</span>                <span class=c1>// 3초 이상 소요되면 타임아웃
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>errorThresholdPercentage</span><span class=o>:</span> <span class=mi>50</span><span class=p>,</span> <span class=c1>// 50% 오류율에서 회로 개방
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>rollingCountTimeout</span><span class=o>:</span> <span class=mi>60000</span>    <span class=c1>// 통계 측정 기간 (60초)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 대체 함수 등록
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>breaker</span><span class=p>.</span><span class=nx>fallback</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 캐시에서 데이터 검색 또는 기본 응답 반환
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>return</span> <span class=p>{</span> <span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;fallback&#39;</span><span class=p>,</span> <span class=nx>data</span><span class=o>:</span> <span class=nx>cachedData</span> <span class=o>||</span> <span class=nx>defaultData</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 이벤트 핸들러
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>breaker</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;open&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;서킷 브레이커가 열렸습니다. 현재 호출이 차단됩니다.&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=nx>breaker</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;halfOpen&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;서킷 브레이커가 반개방 상태입니다. 테스트 호출이 진행됩니다.&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=nx>breaker</span><span class=p>.</span><span class=nx>on</span><span class=p>(</span><span class=s1>&#39;close&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;서킷 브레이커가 닫혔습니다. 정상적인 호출이 가능합니다.&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// API 엔드포인트에서 사용
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/api/products/:id&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>breaker</span><span class=p>.</span><span class=nx>fire</span><span class=p>({</span> <span class=nx>productId</span><span class=o>:</span> <span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=nx>result</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>503</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>error</span><span class=o>:</span> <span class=s1>&#39;서비스를 일시적으로 사용할 수 없습니다.&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>타임아웃 및 재시도 패턴</strong>:</p><ul><li>응답 없는 서비스 호출에 대한 타임아웃 설정</li><li>지수 백오프를 사용한 재시도 메커니즘</li><li>재시도 횟수 및 간격 최적화</li></ul><p>예시 코드 (Java + Resilience4j):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1> 1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2> 2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3> 3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4> 4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5> 5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6> 6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7> 7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8> 8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9> 9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10>10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11>11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12>12</a>
</span><span class=lnt id=hl-14-13><a class=lnlinks href=#hl-14-13>13</a>
</span><span class=lnt id=hl-14-14><a class=lnlinks href=#hl-14-14>14</a>
</span><span class=lnt id=hl-14-15><a class=lnlinks href=#hl-14-15>15</a>
</span><span class=lnt id=hl-14-16><a class=lnlinks href=#hl-14-16>16</a>
</span><span class=lnt id=hl-14-17><a class=lnlinks href=#hl-14-17>17</a>
</span><span class=lnt id=hl-14-18><a class=lnlinks href=#hl-14-18>18</a>
</span><span class=lnt id=hl-14-19><a class=lnlinks href=#hl-14-19>19</a>
</span><span class=lnt id=hl-14-20><a class=lnlinks href=#hl-14-20>20</a>
</span><span class=lnt id=hl-14-21><a class=lnlinks href=#hl-14-21>21</a>
</span><span class=lnt id=hl-14-22><a class=lnlinks href=#hl-14-22>22</a>
</span><span class=lnt id=hl-14-23><a class=lnlinks href=#hl-14-23>23</a>
</span><span class=lnt id=hl-14-24><a class=lnlinks href=#hl-14-24>24</a>
</span><span class=lnt id=hl-14-25><a class=lnlinks href=#hl-14-25>25</a>
</span><span class=lnt id=hl-14-26><a class=lnlinks href=#hl-14-26>26</a>
</span><span class=lnt id=hl-14-27><a class=lnlinks href=#hl-14-27>27</a>
</span><span class=lnt id=hl-14-28><a class=lnlinks href=#hl-14-28>28</a>
</span><span class=lnt id=hl-14-29><a class=lnlinks href=#hl-14-29>29</a>
</span><span class=lnt id=hl-14-30><a class=lnlinks href=#hl-14-30>30</a>
</span><span class=lnt id=hl-14-31><a class=lnlinks href=#hl-14-31>31</a>
</span><span class=lnt id=hl-14-32><a class=lnlinks href=#hl-14-32>32</a>
</span><span class=lnt id=hl-14-33><a class=lnlinks href=#hl-14-33>33</a>
</span><span class=lnt id=hl-14-34><a class=lnlinks href=#hl-14-34>34</a>
</span><span class=lnt id=hl-14-35><a class=lnlinks href=#hl-14-35>35</a>
</span><span class=lnt id=hl-14-36><a class=lnlinks href=#hl-14-36>36</a>
</span><span class=lnt id=hl-14-37><a class=lnlinks href=#hl-14-37>37</a>
</span><span class=lnt id=hl-14-38><a class=lnlinks href=#hl-14-38>38</a>
</span><span class=lnt id=hl-14-39><a class=lnlinks href=#hl-14-39>39</a>
</span><span class=lnt id=hl-14-40><a class=lnlinks href=#hl-14-40>40</a>
</span><span class=lnt id=hl-14-41><a class=lnlinks href=#hl-14-41>41</a>
</span><span class=lnt id=hl-14-42><a class=lnlinks href=#hl-14-42>42</a>
</span><span class=lnt id=hl-14-43><a class=lnlinks href=#hl-14-43>43</a>
</span><span class=lnt id=hl-14-44><a class=lnlinks href=#hl-14-44>44</a>
</span><span class=lnt id=hl-14-45><a class=lnlinks href=#hl-14-45>45</a>
</span><span class=lnt id=hl-14-46><a class=lnlinks href=#hl-14-46>46</a>
</span><span class=lnt id=hl-14-47><a class=lnlinks href=#hl-14-47>47</a>
</span><span class=lnt id=hl-14-48><a class=lnlinks href=#hl-14-48>48</a>
</span><span class=lnt id=hl-14-49><a class=lnlinks href=#hl-14-49>49</a>
</span><span class=lnt id=hl-14-50><a class=lnlinks href=#hl-14-50>50</a>
</span><span class=lnt id=hl-14-51><a class=lnlinks href=#hl-14-51>51</a>
</span><span class=lnt id=hl-14-52><a class=lnlinks href=#hl-14-52>52</a>
</span><span class=lnt id=hl-14-53><a class=lnlinks href=#hl-14-53>53</a>
</span><span class=lnt id=hl-14-54><a class=lnlinks href=#hl-14-54>54</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Resilience4j를 사용한 타임아웃 및 재시도 패턴</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>io.github.resilience4j.retry.Retry</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>io.github.resilience4j.retry.RetryConfig</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>io.github.resilience4j.retry.RetryRegistry</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>io.github.resilience4j.timelimiter.TimeLimiter</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>io.github.resilience4j.timelimiter.TimeLimiterConfig</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.time.Duration</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.util.concurrent.CompletableFuture</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.util.concurrent.TimeoutException</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.util.function.Supplier</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ResilientApiClient</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>ProductService</span><span class=w> </span><span class=n>productService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 타임리미터 구성</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>TimeLimiter</span><span class=w> </span><span class=n>timeLimiter</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>TimeLimiter</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>TimeLimiterConfig</span><span class=p>.</span><span class=na>custom</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>timeoutDuration</span><span class=p>(</span><span class=n>Duration</span><span class=p>.</span><span class=na>ofSeconds</span><span class=p>(</span><span class=n>2</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>build</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 재시도 구성 - 지수 백오프 적용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>Retry</span><span class=w> </span><span class=n>retry</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>RetryRegistry</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>RetryConfig</span><span class=p>.</span><span class=na>custom</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>maxAttempts</span><span class=p>(</span><span class=n>3</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>waitDuration</span><span class=p>(</span><span class=n>Duration</span><span class=p>.</span><span class=na>ofMillis</span><span class=p>(</span><span class=n>500</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>retryExceptions</span><span class=p>(</span><span class=n>TimeoutException</span><span class=p>.</span><span class=na>class</span><span class=p>,</span><span class=w> </span><span class=n>RuntimeException</span><span class=p>.</span><span class=na>class</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>ignoreExceptions</span><span class=p>(</span><span class=n>IllegalArgumentException</span><span class=p>.</span><span class=na>class</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>build</span><span class=p>()).</span><span class=na>retry</span><span class=p>(</span><span class=s>&#34;productService&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>ResilientApiClient</span><span class=p>(</span><span class=n>ProductService</span><span class=w> </span><span class=n>productService</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>productService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>productService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Product</span><span class=w> </span><span class=nf>getProductWithResilience</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>productId</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 타임리미터와 재시도를 조합한 회복력 있는 호출</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Supplier</span><span class=o>&lt;</span><span class=n>CompletableFuture</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>futureSupplier</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=o>-&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>CompletableFuture</span><span class=p>.</span><span class=na>supplyAsync</span><span class=p>(()</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>productService</span><span class=p>.</span><span class=na>getProduct</span><span class=p>(</span><span class=n>productId</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Supplier</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span><span class=w> </span><span class=n>resilientSupplier</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Retry</span><span class=p>.</span><span class=na>decorateSupplier</span><span class=p>(</span><span class=n>retry</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>TimeLimiter</span><span class=p>.</span><span class=na>decorateSupplier</span><span class=p>(</span><span class=n>timeLimiter</span><span class=p>,</span><span class=w> </span><span class=n>futureSupplier</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>resilientSupplier</span><span class=p>.</span><span class=na>get</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>Exception</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// 실패 시 대체 응답 또는 예외 처리</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>getProductFromCache</span><span class=p>(</span><span class=n>productId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Product</span><span class=w> </span><span class=nf>getProductFromCache</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>productId</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 캐시에서 제품 정보 조회하는 로직</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li><li><p><strong>벌크헤드 패턴</strong>:</p><ul><li>리소스 풀을 격리하여 장애 확산 방지</li><li>중요 서비스에 전용 리소스 할당</li><li>서비스 우선순위 기반 리소스 할당</li></ul><p>예시 구성 (Spring Boot + Resilience4j):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1> 1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2> 2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3> 3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4> 4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5> 5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6> 6</a>
</span><span class=lnt id=hl-15-7><a class=lnlinks href=#hl-15-7> 7</a>
</span><span class=lnt id=hl-15-8><a class=lnlinks href=#hl-15-8> 8</a>
</span><span class=lnt id=hl-15-9><a class=lnlinks href=#hl-15-9> 9</a>
</span><span class=lnt id=hl-15-10><a class=lnlinks href=#hl-15-10>10</a>
</span><span class=lnt id=hl-15-11><a class=lnlinks href=#hl-15-11>11</a>
</span><span class=lnt id=hl-15-12><a class=lnlinks href=#hl-15-12>12</a>
</span><span class=lnt id=hl-15-13><a class=lnlinks href=#hl-15-13>13</a>
</span><span class=lnt id=hl-15-14><a class=lnlinks href=#hl-15-14>14</a>
</span><span class=lnt id=hl-15-15><a class=lnlinks href=#hl-15-15>15</a>
</span><span class=lnt id=hl-15-16><a class=lnlinks href=#hl-15-16>16</a>
</span><span class=lnt id=hl-15-17><a class=lnlinks href=#hl-15-17>17</a>
</span><span class=lnt id=hl-15-18><a class=lnlinks href=#hl-15-18>18</a>
</span><span class=lnt id=hl-15-19><a class=lnlinks href=#hl-15-19>19</a>
</span><span class=lnt id=hl-15-20><a class=lnlinks href=#hl-15-20>20</a>
</span><span class=lnt id=hl-15-21><a class=lnlinks href=#hl-15-21>21</a>
</span><span class=lnt id=hl-15-22><a class=lnlinks href=#hl-15-22>22</a>
</span><span class=lnt id=hl-15-23><a class=lnlinks href=#hl-15-23>23</a>
</span><span class=lnt id=hl-15-24><a class=lnlinks href=#hl-15-24>24</a>
</span><span class=lnt id=hl-15-25><a class=lnlinks href=#hl-15-25>25</a>
</span><span class=lnt id=hl-15-26><a class=lnlinks href=#hl-15-26>26</a>
</span><span class=lnt id=hl-15-27><a class=lnlinks href=#hl-15-27>27</a>
</span><span class=lnt id=hl-15-28><a class=lnlinks href=#hl-15-28>28</a>
</span><span class=lnt id=hl-15-29><a class=lnlinks href=#hl-15-29>29</a>
</span><span class=lnt id=hl-15-30><a class=lnlinks href=#hl-15-30>30</a>
</span><span class=lnt id=hl-15-31><a class=lnlinks href=#hl-15-31>31</a>
</span><span class=lnt id=hl-15-32><a class=lnlinks href=#hl-15-32>32</a>
</span><span class=lnt id=hl-15-33><a class=lnlinks href=#hl-15-33>33</a>
</span><span class=lnt id=hl-15-34><a class=lnlinks href=#hl-15-34>34</a>
</span><span class=lnt id=hl-15-35><a class=lnlinks href=#hl-15-35>35</a>
</span><span class=lnt id=hl-15-36><a class=lnlinks href=#hl-15-36>36</a>
</span><span class=lnt id=hl-15-37><a class=lnlinks href=#hl-15-37>37</a>
</span><span class=lnt id=hl-15-38><a class=lnlinks href=#hl-15-38>38</a>
</span><span class=lnt id=hl-15-39><a class=lnlinks href=#hl-15-39>39</a>
</span><span class=lnt id=hl-15-40><a class=lnlinks href=#hl-15-40>40</a>
</span><span class=lnt id=hl-15-41><a class=lnlinks href=#hl-15-41>41</a>
</span><span class=lnt id=hl-15-42><a class=lnlinks href=#hl-15-42>42</a>
</span><span class=lnt id=hl-15-43><a class=lnlinks href=#hl-15-43>43</a>
</span><span class=lnt id=hl-15-44><a class=lnlinks href=#hl-15-44>44</a>
</span><span class=lnt id=hl-15-45><a class=lnlinks href=#hl-15-45>45</a>
</span><span class=lnt id=hl-15-46><a class=lnlinks href=#hl-15-46>46</a>
</span><span class=lnt id=hl-15-47><a class=lnlinks href=#hl-15-47>47</a>
</span><span class=lnt id=hl-15-48><a class=lnlinks href=#hl-15-48>48</a>
</span><span class=lnt id=hl-15-49><a class=lnlinks href=#hl-15-49>49</a>
</span><span class=lnt id=hl-15-50><a class=lnlinks href=#hl-15-50>50</a>
</span><span class=lnt id=hl-15-51><a class=lnlinks href=#hl-15-51>51</a>
</span><span class=lnt id=hl-15-52><a class=lnlinks href=#hl-15-52>52</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Bulkhead 패턴 구현</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>BulkheadConfig</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Customizer</span><span class=o>&lt;</span><span class=n>Resilience4jBulkheadProvider</span><span class=o>&gt;</span><span class=w> </span><span class=nf>defaultBulkheadCustomizer</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>provider</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>provider</span><span class=p>.</span><span class=na>configure</span><span class=p>(</span><span class=n>builder</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>builder</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>bulkheadConfig</span><span class=p>(</span><span class=n>BulkheadConfig</span><span class=p>.</span><span class=na>custom</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>.</span><span class=na>maxConcurrentCalls</span><span class=p>(</span><span class=n>20</span><span class=p>)</span><span class=w>  </span><span class=c1>// 동시 호출 제한</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>.</span><span class=na>maxWaitDuration</span><span class=p>(</span><span class=n>Duration</span><span class=p>.</span><span class=na>ofMillis</span><span class=p>(</span><span class=n>500</span><span class=p>))</span><span class=w>  </span><span class=c1>// 대기 시간 제한</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>.</span><span class=na>build</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>bulkheadAspectOrder</span><span class=p>(</span><span class=n>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>build</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Customizer</span><span class=o>&lt;</span><span class=n>Resilience4jBulkheadProvider</span><span class=o>&gt;</span><span class=w> </span><span class=nf>criticalServiceBulkheadCustomizer</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>provider</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>provider</span><span class=p>.</span><span class=na>configure</span><span class=p>(</span><span class=n>builder</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>builder</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>bulkheadConfig</span><span class=p>(</span><span class=n>BulkheadConfig</span><span class=p>.</span><span class=na>custom</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>.</span><span class=na>maxConcurrentCalls</span><span class=p>(</span><span class=n>50</span><span class=p>)</span><span class=w>  </span><span class=c1>// 중요 서비스에 더 많은 동시 호출 허용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>.</span><span class=na>maxWaitDuration</span><span class=p>(</span><span class=n>Duration</span><span class=p>.</span><span class=na>ofMillis</span><span class=p>(</span><span class=n>1000</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>.</span><span class=na>build</span><span class=p>(),</span><span class=w> </span><span class=s>&#34;criticalService&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>build</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Customizer</span><span class=o>&lt;</span><span class=n>Resilience4jBulkheadProvider</span><span class=o>&gt;</span><span class=w> </span><span class=nf>lowPriorityBulkheadCustomizer</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>provider</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>provider</span><span class=p>.</span><span class=na>configure</span><span class=p>(</span><span class=n>builder</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>builder</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>bulkheadConfig</span><span class=p>(</span><span class=n>BulkheadConfig</span><span class=p>.</span><span class=na>custom</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>.</span><span class=na>maxConcurrentCalls</span><span class=p>(</span><span class=n>10</span><span class=p>)</span><span class=w>  </span><span class=c1>// 낮은 우선순위 서비스는 제한적 리소스 할당</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>.</span><span class=na>maxWaitDuration</span><span class=p>(</span><span class=n>Duration</span><span class=p>.</span><span class=na>ofMillis</span><span class=p>(</span><span class=n>200</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>.</span><span class=na>build</span><span class=p>(),</span><span class=w> </span><span class=s>&#34;lowPriority&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>build</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 컨트롤러에서 사용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@RestController</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ProductController</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bulkhead</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;criticalService&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@GetMapping</span><span class=p>(</span><span class=s>&#34;/api/products/{id}&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Product</span><span class=w> </span><span class=nf>getProduct</span><span class=p>(</span><span class=nd>@PathVariable</span><span class=w> </span><span class=n>Long</span><span class=w> </span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 제품 조회 로직</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bulkhead</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;lowPriority&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@GetMapping</span><span class=p>(</span><span class=s>&#34;/api/products/recommendations&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span><span class=w> </span><span class=nf>getRecommendations</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 추천 제품 조회 로직</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li><li><p><strong>배압(Back Pressure) 메커니즘</strong>:</p><ul><li>과부하 상황에서 요청 흐름 제어</li><li>요청 제한 또는 거부 전략</li><li>요청 우선순위 부여</li></ul><p>예시 코드 (Node.js - express-rate-limit):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1> 1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2> 2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3> 3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4> 4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5> 5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6> 6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7> 7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8> 8</a>
</span><span class=lnt id=hl-16-9><a class=lnlinks href=#hl-16-9> 9</a>
</span><span class=lnt id=hl-16-10><a class=lnlinks href=#hl-16-10>10</a>
</span><span class=lnt id=hl-16-11><a class=lnlinks href=#hl-16-11>11</a>
</span><span class=lnt id=hl-16-12><a class=lnlinks href=#hl-16-12>12</a>
</span><span class=lnt id=hl-16-13><a class=lnlinks href=#hl-16-13>13</a>
</span><span class=lnt id=hl-16-14><a class=lnlinks href=#hl-16-14>14</a>
</span><span class=lnt id=hl-16-15><a class=lnlinks href=#hl-16-15>15</a>
</span><span class=lnt id=hl-16-16><a class=lnlinks href=#hl-16-16>16</a>
</span><span class=lnt id=hl-16-17><a class=lnlinks href=#hl-16-17>17</a>
</span><span class=lnt id=hl-16-18><a class=lnlinks href=#hl-16-18>18</a>
</span><span class=lnt id=hl-16-19><a class=lnlinks href=#hl-16-19>19</a>
</span><span class=lnt id=hl-16-20><a class=lnlinks href=#hl-16-20>20</a>
</span><span class=lnt id=hl-16-21><a class=lnlinks href=#hl-16-21>21</a>
</span><span class=lnt id=hl-16-22><a class=lnlinks href=#hl-16-22>22</a>
</span><span class=lnt id=hl-16-23><a class=lnlinks href=#hl-16-23>23</a>
</span><span class=lnt id=hl-16-24><a class=lnlinks href=#hl-16-24>24</a>
</span><span class=lnt id=hl-16-25><a class=lnlinks href=#hl-16-25>25</a>
</span><span class=lnt id=hl-16-26><a class=lnlinks href=#hl-16-26>26</a>
</span><span class=lnt id=hl-16-27><a class=lnlinks href=#hl-16-27>27</a>
</span><span class=lnt id=hl-16-28><a class=lnlinks href=#hl-16-28>28</a>
</span><span class=lnt id=hl-16-29><a class=lnlinks href=#hl-16-29>29</a>
</span><span class=lnt id=hl-16-30><a class=lnlinks href=#hl-16-30>30</a>
</span><span class=lnt id=hl-16-31><a class=lnlinks href=#hl-16-31>31</a>
</span><span class=lnt id=hl-16-32><a class=lnlinks href=#hl-16-32>32</a>
</span><span class=lnt id=hl-16-33><a class=lnlinks href=#hl-16-33>33</a>
</span><span class=lnt id=hl-16-34><a class=lnlinks href=#hl-16-34>34</a>
</span><span class=lnt id=hl-16-35><a class=lnlinks href=#hl-16-35>35</a>
</span><span class=lnt id=hl-16-36><a class=lnlinks href=#hl-16-36>36</a>
</span><span class=lnt id=hl-16-37><a class=lnlinks href=#hl-16-37>37</a>
</span><span class=lnt id=hl-16-38><a class=lnlinks href=#hl-16-38>38</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>rateLimit</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express-rate-limit&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 기본 API 요청 제한
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>apiLimiter</span> <span class=o>=</span> <span class=nx>rateLimit</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>windowMs</span><span class=o>:</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>,</span> <span class=c1>// 1분
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>max</span><span class=o>:</span> <span class=mi>100</span><span class=p>,</span> <span class=c1>// IP당 최대 100 요청
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>standardHeaders</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>legacyHeaders</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>message</span><span class=o>:</span> <span class=p>{</span> <span class=nx>error</span><span class=o>:</span> <span class=s1>&#39;너무 많은 요청을 보냈습니다. 잠시 후 다시 시도해주세요.&#39;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 중요 API에 대한 요청 제한
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>criticalApiLimiter</span> <span class=o>=</span> <span class=nx>rateLimit</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>windowMs</span><span class=o>:</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>,</span> <span class=c1>// 1분
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>max</span><span class=o>:</span> <span class=mi>20</span><span class=p>,</span> <span class=c1>// IP당 최대 20 요청
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>standardHeaders</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>legacyHeaders</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>message</span><span class=o>:</span> <span class=p>{</span> <span class=nx>error</span><span class=o>:</span> <span class=s1>&#39;중요 API에 대한 요청 한도에 도달했습니다.&#39;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 인증된 사용자를 위한 요청 제한
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>authenticatedLimiter</span> <span class=o>=</span> <span class=nx>rateLimit</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>windowMs</span><span class=o>:</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>,</span> <span class=c1>// 1분
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>max</span><span class=o>:</span> <span class=mi>500</span><span class=p>,</span> <span class=c1>// 토큰당 최대 500 요청
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>keyGenerator</span><span class=o>:</span> <span class=p>(</span><span class=nx>req</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>req</span><span class=p>.</span><span class=nx>user</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span> <span class=c1>// 사용자 ID 기반 제한
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>standardHeaders</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>legacyHeaders</span><span class=o>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 글로벌 API 제한 적용
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=s1>&#39;/api/&#39;</span><span class=p>,</span> <span class=nx>apiLimiter</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 특정 엔드포인트에 제한 적용
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=s1>&#39;/api/critical&#39;</span><span class=p>,</span> <span class=nx>criticalApiLimiter</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 인증된 사용자 라우트에 제한 적용
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=s1>&#39;/api/user&#39;</span><span class=p>,</span> <span class=nx>authenticateMiddleware</span><span class=p>,</span> <span class=nx>authenticatedLimiter</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><h4 id=로드-밸런싱-전략>로드 밸런싱 전략<a hidden class=anchor aria-hidden=true href=#로드-밸런싱-전략>#</a></h4><p>효과적인 부하 분산을 위한 로드 밸런싱 전략:</p><ol><li><strong>알고리즘 선택</strong>:<ul><li>라운드 로빈: 순차적으로 요청 분산, 간단하고 일반적인 경우 효과적</li><li>최소 연결: 현재 연결 수가 가장 적은 서버로 요청 전달, 처리 시간이 다양한 요청에 적합</li><li>가중치 기반: 서버 용량에 따라 요청 분산, 이종 서버 환경에 적합</li><li>IP 해시: 클라이언트 IP를 기준으로 요청 라우팅, 세션 유지에 유용</li></ul></li><li><strong>동적 로드 밸런싱</strong>:<ul><li>서버 상태 모니터링 기반 라우팅</li><li>성능 지표에 따른 동적 가중치 조정</li><li>지연 시간 기반 로드 밸런싱</li></ul></li><li><strong>지역 기반 로드 밸런싱</strong>:<ul><li>지리적 근접성 기반 라우팅</li><li>지역별 트래픽 관리</li><li>글로벌 부하 분산</li></ul></li></ol><p>NGINX를 이용한 로드 밸런싱 구성 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1> 1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2> 2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3> 3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4> 4</a>
</span><span class=lnt id=hl-17-5><a class=lnlinks href=#hl-17-5> 5</a>
</span><span class=lnt id=hl-17-6><a class=lnlinks href=#hl-17-6> 6</a>
</span><span class=lnt id=hl-17-7><a class=lnlinks href=#hl-17-7> 7</a>
</span><span class=lnt id=hl-17-8><a class=lnlinks href=#hl-17-8> 8</a>
</span><span class=lnt id=hl-17-9><a class=lnlinks href=#hl-17-9> 9</a>
</span><span class=lnt id=hl-17-10><a class=lnlinks href=#hl-17-10>10</a>
</span><span class=lnt id=hl-17-11><a class=lnlinks href=#hl-17-11>11</a>
</span><span class=lnt id=hl-17-12><a class=lnlinks href=#hl-17-12>12</a>
</span><span class=lnt id=hl-17-13><a class=lnlinks href=#hl-17-13>13</a>
</span><span class=lnt id=hl-17-14><a class=lnlinks href=#hl-17-14>14</a>
</span><span class=lnt id=hl-17-15><a class=lnlinks href=#hl-17-15>15</a>
</span><span class=lnt id=hl-17-16><a class=lnlinks href=#hl-17-16>16</a>
</span><span class=lnt id=hl-17-17><a class=lnlinks href=#hl-17-17>17</a>
</span><span class=lnt id=hl-17-18><a class=lnlinks href=#hl-17-18>18</a>
</span><span class=lnt id=hl-17-19><a class=lnlinks href=#hl-17-19>19</a>
</span><span class=lnt id=hl-17-20><a class=lnlinks href=#hl-17-20>20</a>
</span><span class=lnt id=hl-17-21><a class=lnlinks href=#hl-17-21>21</a>
</span><span class=lnt id=hl-17-22><a class=lnlinks href=#hl-17-22>22</a>
</span><span class=lnt id=hl-17-23><a class=lnlinks href=#hl-17-23>23</a>
</span><span class=lnt id=hl-17-24><a class=lnlinks href=#hl-17-24>24</a>
</span><span class=lnt id=hl-17-25><a class=lnlinks href=#hl-17-25>25</a>
</span><span class=lnt id=hl-17-26><a class=lnlinks href=#hl-17-26>26</a>
</span><span class=lnt id=hl-17-27><a class=lnlinks href=#hl-17-27>27</a>
</span><span class=lnt id=hl-17-28><a class=lnlinks href=#hl-17-28>28</a>
</span><span class=lnt id=hl-17-29><a class=lnlinks href=#hl-17-29>29</a>
</span><span class=lnt id=hl-17-30><a class=lnlinks href=#hl-17-30>30</a>
</span><span class=lnt id=hl-17-31><a class=lnlinks href=#hl-17-31>31</a>
</span><span class=lnt id=hl-17-32><a class=lnlinks href=#hl-17-32>32</a>
</span><span class=lnt id=hl-17-33><a class=lnlinks href=#hl-17-33>33</a>
</span><span class=lnt id=hl-17-34><a class=lnlinks href=#hl-17-34>34</a>
</span><span class=lnt id=hl-17-35><a class=lnlinks href=#hl-17-35>35</a>
</span><span class=lnt id=hl-17-36><a class=lnlinks href=#hl-17-36>36</a>
</span><span class=lnt id=hl-17-37><a class=lnlinks href=#hl-17-37>37</a>
</span><span class=lnt id=hl-17-38><a class=lnlinks href=#hl-17-38>38</a>
</span><span class=lnt id=hl-17-39><a class=lnlinks href=#hl-17-39>39</a>
</span><span class=lnt id=hl-17-40><a class=lnlinks href=#hl-17-40>40</a>
</span><span class=lnt id=hl-17-41><a class=lnlinks href=#hl-17-41>41</a>
</span><span class=lnt id=hl-17-42><a class=lnlinks href=#hl-17-42>42</a>
</span><span class=lnt id=hl-17-43><a class=lnlinks href=#hl-17-43>43</a>
</span><span class=lnt id=hl-17-44><a class=lnlinks href=#hl-17-44>44</a>
</span><span class=lnt id=hl-17-45><a class=lnlinks href=#hl-17-45>45</a>
</span><span class=lnt id=hl-17-46><a class=lnlinks href=#hl-17-46>46</a>
</span><span class=lnt id=hl-17-47><a class=lnlinks href=#hl-17-47>47</a>
</span><span class=lnt id=hl-17-48><a class=lnlinks href=#hl-17-48>48</a>
</span><span class=lnt id=hl-17-49><a class=lnlinks href=#hl-17-49>49</a>
</span><span class=lnt id=hl-17-50><a class=lnlinks href=#hl-17-50>50</a>
</span><span class=lnt id=hl-17-51><a class=lnlinks href=#hl-17-51>51</a>
</span><span class=lnt id=hl-17-52><a class=lnlinks href=#hl-17-52>52</a>
</span><span class=lnt id=hl-17-53><a class=lnlinks href=#hl-17-53>53</a>
</span><span class=lnt id=hl-17-54><a class=lnlinks href=#hl-17-54>54</a>
</span><span class=lnt id=hl-17-55><a class=lnlinks href=#hl-17-55>55</a>
</span><span class=lnt id=hl-17-56><a class=lnlinks href=#hl-17-56>56</a>
</span><span class=lnt id=hl-17-57><a class=lnlinks href=#hl-17-57>57</a>
</span><span class=lnt id=hl-17-58><a class=lnlinks href=#hl-17-58>58</a>
</span><span class=lnt id=hl-17-59><a class=lnlinks href=#hl-17-59>59</a>
</span><span class=lnt id=hl-17-60><a class=lnlinks href=#hl-17-60>60</a>
</span><span class=lnt id=hl-17-61><a class=lnlinks href=#hl-17-61>61</a>
</span><span class=lnt id=hl-17-62><a class=lnlinks href=#hl-17-62>62</a>
</span><span class=lnt id=hl-17-63><a class=lnlinks href=#hl-17-63>63</a>
</span><span class=lnt id=hl-17-64><a class=lnlinks href=#hl-17-64>64</a>
</span><span class=lnt id=hl-17-65><a class=lnlinks href=#hl-17-65>65</a>
</span><span class=lnt id=hl-17-66><a class=lnlinks href=#hl-17-66>66</a>
</span><span class=lnt id=hl-17-67><a class=lnlinks href=#hl-17-67>67</a>
</span><span class=lnt id=hl-17-68><a class=lnlinks href=#hl-17-68>68</a>
</span><span class=lnt id=hl-17-69><a class=lnlinks href=#hl-17-69>69</a>
</span><span class=lnt id=hl-17-70><a class=lnlinks href=#hl-17-70>70</a>
</span><span class=lnt id=hl-17-71><a class=lnlinks href=#hl-17-71>71</a>
</span><span class=lnt id=hl-17-72><a class=lnlinks href=#hl-17-72>72</a>
</span><span class=lnt id=hl-17-73><a class=lnlinks href=#hl-17-73>73</a>
</span><span class=lnt id=hl-17-74><a class=lnlinks href=#hl-17-74>74</a>
</span><span class=lnt id=hl-17-75><a class=lnlinks href=#hl-17-75>75</a>
</span><span class=lnt id=hl-17-76><a class=lnlinks href=#hl-17-76>76</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=line><span class=cl><span class=c1># nginx.conf
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>http</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kn>upstream</span> <span class=s>api_servers</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kn>least_conn</span><span class=p>;</span>                   <span class=c1># 최소 연결 알고리즘
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kn>server</span> <span class=n>api1.example.com</span><span class=p>:</span><span class=mi>8080</span> <span class=s>weight=5</span><span class=p>;</span>  <span class=c1># 더 강력한 서버에 높은 가중치
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kn>server</span> <span class=n>api2.example.com</span><span class=p>:</span><span class=mi>8080</span> <span class=s>weight=3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>server</span> <span class=n>api3.example.com</span><span class=p>:</span><span class=mi>8080</span> <span class=s>weight=1</span> <span class=s>backup</span><span class=p>;</span>  <span class=c1># 백업 서버
</span></span></span><span class=line><span class=cl><span class=c1></span>        
</span></span><span class=line><span class=cl>        <span class=kn>keepalive</span> <span class=mi>100</span><span class=p>;</span>  <span class=c1># 연결 유지 풀 크기
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 읽기 전용 작업을 위한 별도 업스트림
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kn>upstream</span> <span class=s>read_api_servers</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kn>ip_hash</span><span class=p>;</span>  <span class=c1># 클라이언트 IP 기반 라우팅
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kn>server</span> <span class=n>read1.example.com</span><span class=p>:</span><span class=mi>8080</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>server</span> <span class=n>read2.example.com</span><span class=p>:</span><span class=mi>8080</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>server</span> <span class=n>read3.example.com</span><span class=p>:</span><span class=mi>8080</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 쓰기 작업을 위한 별도 업스트림
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kn>upstream</span> <span class=s>write_api_servers</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kn>server</span> <span class=n>write1.example.com</span><span class=p>:</span><span class=mi>8080</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>server</span> <span class=n>write2.example.com</span><span class=p>:</span><span class=mi>8080</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kn>server</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kn>listen</span> <span class=mi>80</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>server_name</span> <span class=s>api.example.com</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 상태 모니터링 엔드포인트
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kn>location</span> <span class=s>/status</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kn>stub_status</span> <span class=no>on</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>allow</span> <span class=n>127.0.0.1</span><span class=p>;</span>  <span class=c1># 내부 접근만 허용
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kn>deny</span> <span class=s>all</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 읽기 요청 라우팅
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kn>location</span> <span class=p>~</span> <span class=sr>^/api/(products|categories|users)/([0-9]+)$</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kn>limit_req</span> <span class=s>zone=api_reqs</span> <span class=s>burst=10</span><span class=p>;</span>  <span class=c1># 요청 제한
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kn>proxy_pass</span> <span class=s>http://read_api_servers</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_set_header</span> <span class=s>Host</span> <span class=nv>$host</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_set_header</span> <span class=s>X-Real-IP</span> <span class=nv>$remote_addr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_http_version</span> <span class=mi>1</span><span class=s>.1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_set_header</span> <span class=s>Connection</span> <span class=s>&#34;&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 타임아웃 설정
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kn>proxy_connect_timeout</span> <span class=s>2s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_send_timeout</span> <span class=s>5s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_read_timeout</span> <span class=s>5s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 쓰기 요청 라우팅
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kn>location</span> <span class=p>~</span> <span class=sr>^/api/(products|categories|users)$</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kn>limit_req</span> <span class=s>zone=api_write_reqs</span> <span class=s>burst=5</span> <span class=s>nodelay</span><span class=p>;</span>  <span class=c1># 더 엄격한 제한
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kn>proxy_pass</span> <span class=s>http://write_api_servers</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_set_header</span> <span class=s>Host</span> <span class=nv>$host</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_set_header</span> <span class=s>X-Real-IP</span> <span class=nv>$remote_addr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_http_version</span> <span class=mi>1</span><span class=s>.1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_set_header</span> <span class=s>Connection</span> <span class=s>&#34;&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 더 긴 타임아웃 (쓰기 작업은 시간이 더 걸릴 수 있음)
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kn>proxy_connect_timeout</span> <span class=s>3s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_send_timeout</span> <span class=s>10s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_read_timeout</span> <span class=s>10s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 기본 요청 라우팅
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kn>location</span> <span class=s>/</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_pass</span> <span class=s>http://api_servers</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_set_header</span> <span class=s>Host</span> <span class=nv>$host</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_set_header</span> <span class=s>X-Real-IP</span> <span class=nv>$remote_addr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_http_version</span> <span class=mi>1</span><span class=s>.1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_set_header</span> <span class=s>Connection</span> <span class=s>&#34;&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=고급-api-부하-테스트-시나리오>고급 API 부하 테스트 시나리오<a hidden class=anchor aria-hidden=true href=#고급-api-부하-테스트-시나리오>#</a></h3><h4 id=실제-사용자-행동-시뮬레이션>실제 사용자 행동 시뮬레이션<a hidden class=anchor aria-hidden=true href=#실제-사용자-행동-시뮬레이션>#</a></h4><p>더 현실적인 부하 테스트를 위한 사용자 행동 시뮬레이션 방법:</p><ol><li><strong>사용자 패턴 분석</strong>:<ul><li>로그 분석을 통한 실제 사용자 행동 패턴 파악</li><li>페이지 간 이동 경로 및 체류 시간 분석</li><li>시간대별 사용 패턴 분석</li></ul></li><li><strong>사용자 여정(User Journey) 모델링</strong>:<ul><li>주요 사용자 여정 식별 및 매핑</li><li>사용자 유형별 다양한 시나리오 작성</li><li>사용자 행동의 확률적 모델링</li></ul></li><li><strong>현실적인 지연 시간 포함</strong>:<ul><li>사용자 사고 시간(Think Time) 추가</li><li>자연스러운 타이핑 속도 및 지연 시간 구현</li><li>네트워크 지연 및 변동성 시뮬레이션</li></ul></li></ol><p>k6를 사용한 사용자 행동 시뮬레이션 예제:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1>  1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2>  2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3>  3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4>  4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5>  5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6>  6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7>  7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8>  8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9>  9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10> 10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11> 11</a>
</span><span class=lnt id=hl-18-12><a class=lnlinks href=#hl-18-12> 12</a>
</span><span class=lnt id=hl-18-13><a class=lnlinks href=#hl-18-13> 13</a>
</span><span class=lnt id=hl-18-14><a class=lnlinks href=#hl-18-14> 14</a>
</span><span class=lnt id=hl-18-15><a class=lnlinks href=#hl-18-15> 15</a>
</span><span class=lnt id=hl-18-16><a class=lnlinks href=#hl-18-16> 16</a>
</span><span class=lnt id=hl-18-17><a class=lnlinks href=#hl-18-17> 17</a>
</span><span class=lnt id=hl-18-18><a class=lnlinks href=#hl-18-18> 18</a>
</span><span class=lnt id=hl-18-19><a class=lnlinks href=#hl-18-19> 19</a>
</span><span class=lnt id=hl-18-20><a class=lnlinks href=#hl-18-20> 20</a>
</span><span class=lnt id=hl-18-21><a class=lnlinks href=#hl-18-21> 21</a>
</span><span class=lnt id=hl-18-22><a class=lnlinks href=#hl-18-22> 22</a>
</span><span class=lnt id=hl-18-23><a class=lnlinks href=#hl-18-23> 23</a>
</span><span class=lnt id=hl-18-24><a class=lnlinks href=#hl-18-24> 24</a>
</span><span class=lnt id=hl-18-25><a class=lnlinks href=#hl-18-25> 25</a>
</span><span class=lnt id=hl-18-26><a class=lnlinks href=#hl-18-26> 26</a>
</span><span class=lnt id=hl-18-27><a class=lnlinks href=#hl-18-27> 27</a>
</span><span class=lnt id=hl-18-28><a class=lnlinks href=#hl-18-28> 28</a>
</span><span class=lnt id=hl-18-29><a class=lnlinks href=#hl-18-29> 29</a>
</span><span class=lnt id=hl-18-30><a class=lnlinks href=#hl-18-30> 30</a>
</span><span class=lnt id=hl-18-31><a class=lnlinks href=#hl-18-31> 31</a>
</span><span class=lnt id=hl-18-32><a class=lnlinks href=#hl-18-32> 32</a>
</span><span class=lnt id=hl-18-33><a class=lnlinks href=#hl-18-33> 33</a>
</span><span class=lnt id=hl-18-34><a class=lnlinks href=#hl-18-34> 34</a>
</span><span class=lnt id=hl-18-35><a class=lnlinks href=#hl-18-35> 35</a>
</span><span class=lnt id=hl-18-36><a class=lnlinks href=#hl-18-36> 36</a>
</span><span class=lnt id=hl-18-37><a class=lnlinks href=#hl-18-37> 37</a>
</span><span class=lnt id=hl-18-38><a class=lnlinks href=#hl-18-38> 38</a>
</span><span class=lnt id=hl-18-39><a class=lnlinks href=#hl-18-39> 39</a>
</span><span class=lnt id=hl-18-40><a class=lnlinks href=#hl-18-40> 40</a>
</span><span class=lnt id=hl-18-41><a class=lnlinks href=#hl-18-41> 41</a>
</span><span class=lnt id=hl-18-42><a class=lnlinks href=#hl-18-42> 42</a>
</span><span class=lnt id=hl-18-43><a class=lnlinks href=#hl-18-43> 43</a>
</span><span class=lnt id=hl-18-44><a class=lnlinks href=#hl-18-44> 44</a>
</span><span class=lnt id=hl-18-45><a class=lnlinks href=#hl-18-45> 45</a>
</span><span class=lnt id=hl-18-46><a class=lnlinks href=#hl-18-46> 46</a>
</span><span class=lnt id=hl-18-47><a class=lnlinks href=#hl-18-47> 47</a>
</span><span class=lnt id=hl-18-48><a class=lnlinks href=#hl-18-48> 48</a>
</span><span class=lnt id=hl-18-49><a class=lnlinks href=#hl-18-49> 49</a>
</span><span class=lnt id=hl-18-50><a class=lnlinks href=#hl-18-50> 50</a>
</span><span class=lnt id=hl-18-51><a class=lnlinks href=#hl-18-51> 51</a>
</span><span class=lnt id=hl-18-52><a class=lnlinks href=#hl-18-52> 52</a>
</span><span class=lnt id=hl-18-53><a class=lnlinks href=#hl-18-53> 53</a>
</span><span class=lnt id=hl-18-54><a class=lnlinks href=#hl-18-54> 54</a>
</span><span class=lnt id=hl-18-55><a class=lnlinks href=#hl-18-55> 55</a>
</span><span class=lnt id=hl-18-56><a class=lnlinks href=#hl-18-56> 56</a>
</span><span class=lnt id=hl-18-57><a class=lnlinks href=#hl-18-57> 57</a>
</span><span class=lnt id=hl-18-58><a class=lnlinks href=#hl-18-58> 58</a>
</span><span class=lnt id=hl-18-59><a class=lnlinks href=#hl-18-59> 59</a>
</span><span class=lnt id=hl-18-60><a class=lnlinks href=#hl-18-60> 60</a>
</span><span class=lnt id=hl-18-61><a class=lnlinks href=#hl-18-61> 61</a>
</span><span class=lnt id=hl-18-62><a class=lnlinks href=#hl-18-62> 62</a>
</span><span class=lnt id=hl-18-63><a class=lnlinks href=#hl-18-63> 63</a>
</span><span class=lnt id=hl-18-64><a class=lnlinks href=#hl-18-64> 64</a>
</span><span class=lnt id=hl-18-65><a class=lnlinks href=#hl-18-65> 65</a>
</span><span class=lnt id=hl-18-66><a class=lnlinks href=#hl-18-66> 66</a>
</span><span class=lnt id=hl-18-67><a class=lnlinks href=#hl-18-67> 67</a>
</span><span class=lnt id=hl-18-68><a class=lnlinks href=#hl-18-68> 68</a>
</span><span class=lnt id=hl-18-69><a class=lnlinks href=#hl-18-69> 69</a>
</span><span class=lnt id=hl-18-70><a class=lnlinks href=#hl-18-70> 70</a>
</span><span class=lnt id=hl-18-71><a class=lnlinks href=#hl-18-71> 71</a>
</span><span class=lnt id=hl-18-72><a class=lnlinks href=#hl-18-72> 72</a>
</span><span class=lnt id=hl-18-73><a class=lnlinks href=#hl-18-73> 73</a>
</span><span class=lnt id=hl-18-74><a class=lnlinks href=#hl-18-74> 74</a>
</span><span class=lnt id=hl-18-75><a class=lnlinks href=#hl-18-75> 75</a>
</span><span class=lnt id=hl-18-76><a class=lnlinks href=#hl-18-76> 76</a>
</span><span class=lnt id=hl-18-77><a class=lnlinks href=#hl-18-77> 77</a>
</span><span class=lnt id=hl-18-78><a class=lnlinks href=#hl-18-78> 78</a>
</span><span class=lnt id=hl-18-79><a class=lnlinks href=#hl-18-79> 79</a>
</span><span class=lnt id=hl-18-80><a class=lnlinks href=#hl-18-80> 80</a>
</span><span class=lnt id=hl-18-81><a class=lnlinks href=#hl-18-81> 81</a>
</span><span class=lnt id=hl-18-82><a class=lnlinks href=#hl-18-82> 82</a>
</span><span class=lnt id=hl-18-83><a class=lnlinks href=#hl-18-83> 83</a>
</span><span class=lnt id=hl-18-84><a class=lnlinks href=#hl-18-84> 84</a>
</span><span class=lnt id=hl-18-85><a class=lnlinks href=#hl-18-85> 85</a>
</span><span class=lnt id=hl-18-86><a class=lnlinks href=#hl-18-86> 86</a>
</span><span class=lnt id=hl-18-87><a class=lnlinks href=#hl-18-87> 87</a>
</span><span class=lnt id=hl-18-88><a class=lnlinks href=#hl-18-88> 88</a>
</span><span class=lnt id=hl-18-89><a class=lnlinks href=#hl-18-89> 89</a>
</span><span class=lnt id=hl-18-90><a class=lnlinks href=#hl-18-90> 90</a>
</span><span class=lnt id=hl-18-91><a class=lnlinks href=#hl-18-91> 91</a>
</span><span class=lnt id=hl-18-92><a class=lnlinks href=#hl-18-92> 92</a>
</span><span class=lnt id=hl-18-93><a class=lnlinks href=#hl-18-93> 93</a>
</span><span class=lnt id=hl-18-94><a class=lnlinks href=#hl-18-94> 94</a>
</span><span class=lnt id=hl-18-95><a class=lnlinks href=#hl-18-95> 95</a>
</span><span class=lnt id=hl-18-96><a class=lnlinks href=#hl-18-96> 96</a>
</span><span class=lnt id=hl-18-97><a class=lnlinks href=#hl-18-97> 97</a>
</span><span class=lnt id=hl-18-98><a class=lnlinks href=#hl-18-98> 98</a>
</span><span class=lnt id=hl-18-99><a class=lnlinks href=#hl-18-99> 99</a>
</span><span class=lnt id=hl-18-100><a class=lnlinks href=#hl-18-100>100</a>
</span><span class=lnt id=hl-18-101><a class=lnlinks href=#hl-18-101>101</a>
</span><span class=lnt id=hl-18-102><a class=lnlinks href=#hl-18-102>102</a>
</span><span class=lnt id=hl-18-103><a class=lnlinks href=#hl-18-103>103</a>
</span><span class=lnt id=hl-18-104><a class=lnlinks href=#hl-18-104>104</a>
</span><span class=lnt id=hl-18-105><a class=lnlinks href=#hl-18-105>105</a>
</span><span class=lnt id=hl-18-106><a class=lnlinks href=#hl-18-106>106</a>
</span><span class=lnt id=hl-18-107><a class=lnlinks href=#hl-18-107>107</a>
</span><span class=lnt id=hl-18-108><a class=lnlinks href=#hl-18-108>108</a>
</span><span class=lnt id=hl-18-109><a class=lnlinks href=#hl-18-109>109</a>
</span><span class=lnt id=hl-18-110><a class=lnlinks href=#hl-18-110>110</a>
</span><span class=lnt id=hl-18-111><a class=lnlinks href=#hl-18-111>111</a>
</span><span class=lnt id=hl-18-112><a class=lnlinks href=#hl-18-112>112</a>
</span><span class=lnt id=hl-18-113><a class=lnlinks href=#hl-18-113>113</a>
</span><span class=lnt id=hl-18-114><a class=lnlinks href=#hl-18-114>114</a>
</span><span class=lnt id=hl-18-115><a class=lnlinks href=#hl-18-115>115</a>
</span><span class=lnt id=hl-18-116><a class=lnlinks href=#hl-18-116>116</a>
</span><span class=lnt id=hl-18-117><a class=lnlinks href=#hl-18-117>117</a>
</span><span class=lnt id=hl-18-118><a class=lnlinks href=#hl-18-118>118</a>
</span><span class=lnt id=hl-18-119><a class=lnlinks href=#hl-18-119>119</a>
</span><span class=lnt id=hl-18-120><a class=lnlinks href=#hl-18-120>120</a>
</span><span class=lnt id=hl-18-121><a class=lnlinks href=#hl-18-121>121</a>
</span><span class=lnt id=hl-18-122><a class=lnlinks href=#hl-18-122>122</a>
</span><span class=lnt id=hl-18-123><a class=lnlinks href=#hl-18-123>123</a>
</span><span class=lnt id=hl-18-124><a class=lnlinks href=#hl-18-124>124</a>
</span><span class=lnt id=hl-18-125><a class=lnlinks href=#hl-18-125>125</a>
</span><span class=lnt id=hl-18-126><a class=lnlinks href=#hl-18-126>126</a>
</span><span class=lnt id=hl-18-127><a class=lnlinks href=#hl-18-127>127</a>
</span><span class=lnt id=hl-18-128><a class=lnlinks href=#hl-18-128>128</a>
</span><span class=lnt id=hl-18-129><a class=lnlinks href=#hl-18-129>129</a>
</span><span class=lnt id=hl-18-130><a class=lnlinks href=#hl-18-130>130</a>
</span><span class=lnt id=hl-18-131><a class=lnlinks href=#hl-18-131>131</a>
</span><span class=lnt id=hl-18-132><a class=lnlinks href=#hl-18-132>132</a>
</span><span class=lnt id=hl-18-133><a class=lnlinks href=#hl-18-133>133</a>
</span><span class=lnt id=hl-18-134><a class=lnlinks href=#hl-18-134>134</a>
</span><span class=lnt id=hl-18-135><a class=lnlinks href=#hl-18-135>135</a>
</span><span class=lnt id=hl-18-136><a class=lnlinks href=#hl-18-136>136</a>
</span><span class=lnt id=hl-18-137><a class=lnlinks href=#hl-18-137>137</a>
</span><span class=lnt id=hl-18-138><a class=lnlinks href=#hl-18-138>138</a>
</span><span class=lnt id=hl-18-139><a class=lnlinks href=#hl-18-139>139</a>
</span><span class=lnt id=hl-18-140><a class=lnlinks href=#hl-18-140>140</a>
</span><span class=lnt id=hl-18-141><a class=lnlinks href=#hl-18-141>141</a>
</span><span class=lnt id=hl-18-142><a class=lnlinks href=#hl-18-142>142</a>
</span><span class=lnt id=hl-18-143><a class=lnlinks href=#hl-18-143>143</a>
</span><span class=lnt id=hl-18-144><a class=lnlinks href=#hl-18-144>144</a>
</span><span class=lnt id=hl-18-145><a class=lnlinks href=#hl-18-145>145</a>
</span><span class=lnt id=hl-18-146><a class=lnlinks href=#hl-18-146>146</a>
</span><span class=lnt id=hl-18-147><a class=lnlinks href=#hl-18-147>147</a>
</span><span class=lnt id=hl-18-148><a class=lnlinks href=#hl-18-148>148</a>
</span><span class=lnt id=hl-18-149><a class=lnlinks href=#hl-18-149>149</a>
</span><span class=lnt id=hl-18-150><a class=lnlinks href=#hl-18-150>150</a>
</span><span class=lnt id=hl-18-151><a class=lnlinks href=#hl-18-151>151</a>
</span><span class=lnt id=hl-18-152><a class=lnlinks href=#hl-18-152>152</a>
</span><span class=lnt id=hl-18-153><a class=lnlinks href=#hl-18-153>153</a>
</span><span class=lnt id=hl-18-154><a class=lnlinks href=#hl-18-154>154</a>
</span><span class=lnt id=hl-18-155><a class=lnlinks href=#hl-18-155>155</a>
</span><span class=lnt id=hl-18-156><a class=lnlinks href=#hl-18-156>156</a>
</span><span class=lnt id=hl-18-157><a class=lnlinks href=#hl-18-157>157</a>
</span><span class=lnt id=hl-18-158><a class=lnlinks href=#hl-18-158>158</a>
</span><span class=lnt id=hl-18-159><a class=lnlinks href=#hl-18-159>159</a>
</span><span class=lnt id=hl-18-160><a class=lnlinks href=#hl-18-160>160</a>
</span><span class=lnt id=hl-18-161><a class=lnlinks href=#hl-18-161>161</a>
</span><span class=lnt id=hl-18-162><a class=lnlinks href=#hl-18-162>162</a>
</span><span class=lnt id=hl-18-163><a class=lnlinks href=#hl-18-163>163</a>
</span><span class=lnt id=hl-18-164><a class=lnlinks href=#hl-18-164>164</a>
</span><span class=lnt id=hl-18-165><a class=lnlinks href=#hl-18-165>165</a>
</span><span class=lnt id=hl-18-166><a class=lnlinks href=#hl-18-166>166</a>
</span><span class=lnt id=hl-18-167><a class=lnlinks href=#hl-18-167>167</a>
</span><span class=lnt id=hl-18-168><a class=lnlinks href=#hl-18-168>168</a>
</span><span class=lnt id=hl-18-169><a class=lnlinks href=#hl-18-169>169</a>
</span><span class=lnt id=hl-18-170><a class=lnlinks href=#hl-18-170>170</a>
</span><span class=lnt id=hl-18-171><a class=lnlinks href=#hl-18-171>171</a>
</span><span class=lnt id=hl-18-172><a class=lnlinks href=#hl-18-172>172</a>
</span><span class=lnt id=hl-18-173><a class=lnlinks href=#hl-18-173>173</a>
</span><span class=lnt id=hl-18-174><a class=lnlinks href=#hl-18-174>174</a>
</span><span class=lnt id=hl-18-175><a class=lnlinks href=#hl-18-175>175</a>
</span><span class=lnt id=hl-18-176><a class=lnlinks href=#hl-18-176>176</a>
</span><span class=lnt id=hl-18-177><a class=lnlinks href=#hl-18-177>177</a>
</span><span class=lnt id=hl-18-178><a class=lnlinks href=#hl-18-178>178</a>
</span><span class=lnt id=hl-18-179><a class=lnlinks href=#hl-18-179>179</a>
</span><span class=lnt id=hl-18-180><a class=lnlinks href=#hl-18-180>180</a>
</span><span class=lnt id=hl-18-181><a class=lnlinks href=#hl-18-181>181</a>
</span><span class=lnt id=hl-18-182><a class=lnlinks href=#hl-18-182>182</a>
</span><span class=lnt id=hl-18-183><a class=lnlinks href=#hl-18-183>183</a>
</span><span class=lnt id=hl-18-184><a class=lnlinks href=#hl-18-184>184</a>
</span><span class=lnt id=hl-18-185><a class=lnlinks href=#hl-18-185>185</a>
</span><span class=lnt id=hl-18-186><a class=lnlinks href=#hl-18-186>186</a>
</span><span class=lnt id=hl-18-187><a class=lnlinks href=#hl-18-187>187</a>
</span><span class=lnt id=hl-18-188><a class=lnlinks href=#hl-18-188>188</a>
</span><span class=lnt id=hl-18-189><a class=lnlinks href=#hl-18-189>189</a>
</span><span class=lnt id=hl-18-190><a class=lnlinks href=#hl-18-190>190</a>
</span><span class=lnt id=hl-18-191><a class=lnlinks href=#hl-18-191>191</a>
</span><span class=lnt id=hl-18-192><a class=lnlinks href=#hl-18-192>192</a>
</span><span class=lnt id=hl-18-193><a class=lnlinks href=#hl-18-193>193</a>
</span><span class=lnt id=hl-18-194><a class=lnlinks href=#hl-18-194>194</a>
</span><span class=lnt id=hl-18-195><a class=lnlinks href=#hl-18-195>195</a>
</span><span class=lnt id=hl-18-196><a class=lnlinks href=#hl-18-196>196</a>
</span><span class=lnt id=hl-18-197><a class=lnlinks href=#hl-18-197>197</a>
</span><span class=lnt id=hl-18-198><a class=lnlinks href=#hl-18-198>198</a>
</span><span class=lnt id=hl-18-199><a class=lnlinks href=#hl-18-199>199</a>
</span><span class=lnt id=hl-18-200><a class=lnlinks href=#hl-18-200>200</a>
</span><span class=lnt id=hl-18-201><a class=lnlinks href=#hl-18-201>201</a>
</span><span class=lnt id=hl-18-202><a class=lnlinks href=#hl-18-202>202</a>
</span><span class=lnt id=hl-18-203><a class=lnlinks href=#hl-18-203>203</a>
</span><span class=lnt id=hl-18-204><a class=lnlinks href=#hl-18-204>204</a>
</span><span class=lnt id=hl-18-205><a class=lnlinks href=#hl-18-205>205</a>
</span><span class=lnt id=hl-18-206><a class=lnlinks href=#hl-18-206>206</a>
</span><span class=lnt id=hl-18-207><a class=lnlinks href=#hl-18-207>207</a>
</span><span class=lnt id=hl-18-208><a class=lnlinks href=#hl-18-208>208</a>
</span><span class=lnt id=hl-18-209><a class=lnlinks href=#hl-18-209>209</a>
</span><span class=lnt id=hl-18-210><a class=lnlinks href=#hl-18-210>210</a>
</span><span class=lnt id=hl-18-211><a class=lnlinks href=#hl-18-211>211</a>
</span><span class=lnt id=hl-18-212><a class=lnlinks href=#hl-18-212>212</a>
</span><span class=lnt id=hl-18-213><a class=lnlinks href=#hl-18-213>213</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>http</span> <span class=nx>from</span> <span class=s1>&#39;k6/http&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>sleep</span><span class=p>,</span> <span class=nx>check</span><span class=p>,</span> <span class=nx>group</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;k6&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>randomIntBetween</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;https://jslib.k6.io/k6-utils/1.1.0/index.js&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Trend</span><span class=p>,</span> <span class=nx>Rate</span><span class=p>,</span> <span class=nx>Counter</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;k6/metrics&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용자 정의 메트릭
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>searchLatency</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Trend</span><span class=p>(</span><span class=s1>&#39;search_latency&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>cartAddSuccess</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Rate</span><span class=p>(</span><span class=s1>&#39;cart_add_success&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>orderCount</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Counter</span><span class=p>(</span><span class=s1>&#39;order_count&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 테스트 구성
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kr>const</span> <span class=nx>options</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>scenarios</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 브라우저 사용자 시나리오
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>browser_users</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>executor</span><span class=o>:</span> <span class=s1>&#39;ramping-vus&#39;</span><span class=p>,</span>  <span class=c1>// 점진적으로 사용자 증가
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>startVUs</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>stages</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span> <span class=nx>duration</span><span class=o>:</span> <span class=s1>&#39;2m&#39;</span><span class=p>,</span> <span class=nx>target</span><span class=o>:</span> <span class=mi>100</span> <span class=p>},</span>  <span class=c1>// 2분 동안 100명까지 증가
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>{</span> <span class=nx>duration</span><span class=o>:</span> <span class=s1>&#39;5m&#39;</span><span class=p>,</span> <span class=nx>target</span><span class=o>:</span> <span class=mi>100</span> <span class=p>},</span>  <span class=c1>// 5분 동안 100명 유지
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>{</span> <span class=nx>duration</span><span class=o>:</span> <span class=s1>&#39;2m&#39;</span><span class=p>,</span> <span class=nx>target</span><span class=o>:</span> <span class=mi>0</span> <span class=p>},</span>    <span class=c1>// 2분 동안 0명으로 감소
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nx>gracefulRampDown</span><span class=o>:</span> <span class=s1>&#39;30s&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 모바일 앱 사용자 시나리오
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>mobile_app_users</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>executor</span><span class=o>:</span> <span class=s1>&#39;constant-vus&#39;</span><span class=p>,</span>  <span class=c1>// 일정한 사용자 수
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>vus</span><span class=o>:</span> <span class=mi>50</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>duration</span><span class=o>:</span> <span class=s1>&#39;10m&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>startTime</span><span class=o>:</span> <span class=s1>&#39;30s&#39;</span><span class=p>,</span>  <span class=c1>// 30초 후에 시작
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>thresholds</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;http_req_duration&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;p(95)&lt;500&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;search_latency&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;p(95)&lt;300&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;cart_add_success&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;rate&gt;0.95&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 브라우저 사용자 시뮬레이션
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kd>function</span> <span class=nx>browserUsers</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>userJourney</span> <span class=o>=</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>();</span>  <span class=c1>// 사용자 여정 무작위 선택
</span></span></span><span class=line><span class=cl><span class=c1></span>  
</span></span><span class=line><span class=cl>  <span class=c1>// 로그인 (모든 사용자 공통)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>group</span><span class=p>(</span><span class=s1>&#39;Login&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>loginRes</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;https://api.example.com/login&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>username</span><span class=o>:</span> <span class=sb>`user_</span><span class=si>${</span><span class=nx>__VU</span><span class=si>}</span><span class=sb>@example.com`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>password</span><span class=o>:</span> <span class=s1>&#39;password123&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>check</span><span class=p>(</span><span class=nx>loginRes</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;login successful&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span> <span class=o>&amp;&amp;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=s1>&#39;token&#39;</span><span class=p>)</span> <span class=o>!==</span> <span class=s1>&#39;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 로그인 후 생각하는 시간
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>sleep</span><span class=p>(</span><span class=nx>randomIntBetween</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>5</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 상품 검색 및 브라우징 (80% 사용자)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>if</span> <span class=p>(</span><span class=nx>userJourney</span> <span class=o>&lt;</span> <span class=mf>0.8</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>group</span><span class=p>(</span><span class=s1>&#39;Product Search&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 검색어 배열에서 무작위 선택
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=kr>const</span> <span class=nx>searchTerms</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;smartphone&#39;</span><span class=p>,</span> <span class=s1>&#39;laptop&#39;</span><span class=p>,</span> <span class=s1>&#39;headphones&#39;</span><span class=p>,</span> <span class=s1>&#39;camera&#39;</span><span class=p>,</span> <span class=s1>&#39;watch&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>searchTerm</span> <span class=o>=</span> <span class=nx>searchTerms</span><span class=p>[</span><span class=nb>Math</span><span class=p>.</span><span class=nx>floor</span><span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>*</span> <span class=nx>searchTerms</span><span class=p>.</span><span class=nx>length</span><span class=p>)];</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=kd>let</span> <span class=nx>searchStart</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>getTime</span><span class=p>();</span>
</span></span><span class=line><span class=cl>      <span class=kd>let</span> <span class=nx>searchRes</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=sb>`https://api.example.com/products?query=</span><span class=si>${</span><span class=nx>searchTerm</span><span class=si>}</span><span class=sb>&amp;limit=20`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=kd>let</span> <span class=nx>searchEnd</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>getTime</span><span class=p>();</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=c1>// 검색 지연 시간 기록
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>searchLatency</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>searchEnd</span> <span class=o>-</span> <span class=nx>searchStart</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=nx>check</span><span class=p>(</span><span class=nx>searchRes</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;search successful&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;search has results&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=s1>&#39;items&#39;</span><span class=p>).</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=c1>// 검색 결과 탐색 시간
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>sleep</span><span class=p>(</span><span class=nx>randomIntBetween</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>8</span><span class=p>));</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=c1>// 상품 상세 페이지 조회 (검색 결과에서 무작위 선택)
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>if</span> <span class=p>(</span><span class=nx>searchRes</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=s1>&#39;items&#39;</span><span class=p>).</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>products</span> <span class=o>=</span> <span class=nx>searchRes</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=s1>&#39;items&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>randomProduct</span> <span class=o>=</span> <span class=nx>products</span><span class=p>[</span><span class=nb>Math</span><span class=p>.</span><span class=nx>floor</span><span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>*</span> <span class=nx>products</span><span class=p>.</span><span class=nx>length</span><span class=p>)];</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>productRes</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=sb>`https://api.example.com/products/</span><span class=si>${</span><span class=nx>randomProduct</span><span class=p>.</span><span class=nx>id</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>check</span><span class=p>(</span><span class=nx>productRes</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=s1>&#39;product details loaded&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 상품 상세 페이지 탐색 시간
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>sleep</span><span class=p>(</span><span class=nx>randomIntBetween</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>15</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 관련 상품 확인 (50% 확률)
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>&lt;</span> <span class=mf>0.5</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=kd>let</span> <span class=nx>relatedRes</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=sb>`https://api.example.com/products/</span><span class=si>${</span><span class=nx>randomProduct</span><span class=p>.</span><span class=nx>id</span><span class=si>}</span><span class=sb>/related`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>          
</span></span><span class=line><span class=cl>          <span class=nx>check</span><span class=p>(</span><span class=nx>relatedRes</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;related products loaded&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span>
</span></span><span class=line><span class=cl>          <span class=p>});</span>
</span></span><span class=line><span class=cl>          
</span></span><span class=line><span class=cl>          <span class=nx>sleep</span><span class=p>(</span><span class=nx>randomIntBetween</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>7</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 장바구니에 추가 (60% 확률)
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>&lt;</span> <span class=mf>0.6</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=kd>let</span> <span class=nx>cartRes</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;https://api.example.com/cart/items&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>productId</span><span class=o>:</span> <span class=nx>randomProduct</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>quantity</span><span class=o>:</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>floor</span><span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>*</span> <span class=mi>3</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>          <span class=p>});</span>
</span></span><span class=line><span class=cl>          
</span></span><span class=line><span class=cl>          <span class=kd>let</span> <span class=nx>cartSuccess</span> <span class=o>=</span> <span class=nx>check</span><span class=p>(</span><span class=nx>cartRes</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;added to cart successfully&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span> <span class=o>||</span> <span class=nx>r</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>201</span>
</span></span><span class=line><span class=cl>          <span class=p>});</span>
</span></span><span class=line><span class=cl>          
</span></span><span class=line><span class=cl>          <span class=nx>cartAddSuccess</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>cartSuccess</span><span class=p>);</span>
</span></span><span class=line><span class=cl>          
</span></span><span class=line><span class=cl>          <span class=nx>sleep</span><span class=p>(</span><span class=nx>randomIntBetween</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>5</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 장바구니 확인 및 주문 (30% 확률)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>if</span> <span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>&lt;</span> <span class=mf>0.3</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>group</span><span class=p>(</span><span class=s1>&#39;Checkout Process&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 장바구니 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=kd>let</span> <span class=nx>cartRes</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;https://api.example.com/cart&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=nx>check</span><span class=p>(</span><span class=nx>cartRes</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;cart retrieved&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span>
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=nx>sleep</span><span class=p>(</span><span class=nx>randomIntBetween</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>8</span><span class=p>));</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=c1>// 장바구니에 상품이 있는 경우 결제 진행
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>if</span> <span class=p>(</span><span class=nx>cartRes</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=s1>&#39;items&#39;</span><span class=p>)</span> <span class=o>&amp;&amp;</span> <span class=nx>cartRes</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=s1>&#39;items&#39;</span><span class=p>).</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 배송 정보 입력
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kd>let</span> <span class=nx>shippingRes</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;https://api.example.com/checkout/shipping&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>address</span><span class=o>:</span> <span class=s1>&#39;123 Test Street&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>city</span><span class=o>:</span> <span class=s1>&#39;Test City&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>zipCode</span><span class=o>:</span> <span class=s1>&#39;12345&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>country</span><span class=o>:</span> <span class=s1>&#39;Test Country&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>check</span><span class=p>(</span><span class=nx>shippingRes</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=s1>&#39;shipping info added&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>sleep</span><span class=p>(</span><span class=nx>randomIntBetween</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>10</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 결제 정보 입력
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kd>let</span> <span class=nx>paymentRes</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;https://api.example.com/checkout/payment&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>cardType</span><span class=o>:</span> <span class=s1>&#39;visa&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>cardNumber</span><span class=o>:</span> <span class=s1>&#39;4111111111111111&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>expiryMonth</span><span class=o>:</span> <span class=s1>&#39;12&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>expiryYear</span><span class=o>:</span> <span class=s1>&#39;2025&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>cvv</span><span class=o>:</span> <span class=s1>&#39;123&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>check</span><span class=p>(</span><span class=nx>paymentRes</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=s1>&#39;payment info added&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>sleep</span><span class=p>(</span><span class=nx>randomIntBetween</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>7</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 주문 완료
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kd>let</span> <span class=nx>orderRes</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;https://api.example.com/orders&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>orderSuccess</span> <span class=o>=</span> <span class=nx>check</span><span class=p>(</span><span class=nx>orderRes</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=s1>&#39;order placed successfully&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>201</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>orderSuccess</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>orderCount</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>sleep</span><span class=p>(</span><span class=nx>randomIntBetween</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>10</span><span class=p>));</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 사용자 계정 정보 확인 (20% 확률)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>if</span> <span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>&lt;</span> <span class=mf>0.2</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>group</span><span class=p>(</span><span class=s1>&#39;Account Management&#39;</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kd>let</span> <span class=nx>profileRes</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;https://api.example.com/user/profile&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=nx>check</span><span class=p>(</span><span class=nx>profileRes</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;profile loaded&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span>
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=nx>sleep</span><span class=p>(</span><span class=nx>randomIntBetween</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>15</span><span class=p>));</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=c1>// 주문 이력 확인 (70% 확률)
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>if</span> <span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span> <span class=o>&lt;</span> <span class=mf>0.7</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>ordersRes</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;https://api.example.com/user/orders&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>check</span><span class=p>(</span><span class=nx>ordersRes</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=s1>&#39;order history loaded&#39;</span><span class=o>:</span> <span class=p>(</span><span class=nx>r</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>r</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>sleep</span><span class=p>(</span><span class=nx>randomIntBetween</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>10</span><span class=p>));</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 모바일 앱 사용자 시뮬레이션
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kd>function</span> <span class=nx>mobileAppUsers</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 모바일 앱 사용자에 맞는 다른 사용자 패턴 구현
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=고급-부하-패턴-테스트>고급 부하 패턴 테스트<a hidden class=anchor aria-hidden=true href=#고급-부하-패턴-테스트>#</a></h4><p>다양한 고급 부하 패턴을 통한 테스트 방법:</p><ol><li><strong>스파이크 테스트</strong>:<ul><li>짧은 시간 동안 급격한 부하 증가 시뮬레이션</li><li>순간적인 트래픽 급증에 대한 대응력 검증</li><li>회복 시간 측정</li></ul></li><li><strong>소사(Soak) 테스트</strong>:<ul><li>장시간 동안 지속적인 부하 유지</li><li>메모리 누수 및 성능 저하 탐지</li><li>장기간 안정성 검증</li></ul></li><li><strong>카오스 테스트</strong>:<ul><li>무작위 오류 및 장애 주입</li><li>서비스 장애 시나리오 테스트</li><li>복구 능력 검증</li></ul></li></ol><p>k6를 이용한 스파이크 테스트 예제:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1> 1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2> 2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3> 3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4> 4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5> 5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6> 6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7> 7</a>
</span><span class=lnt id=hl-19-8><a class=lnlinks href=#hl-19-8> 8</a>
</span><span class=lnt id=hl-19-9><a class=lnlinks href=#hl-19-9> 9</a>
</span><span class=lnt id=hl-19-10><a class=lnlinks href=#hl-19-10>10</a>
</span><span class=lnt id=hl-19-11><a class=lnlinks href=#hl-19-11>11</a>
</span><span class=lnt id=hl-19-12><a class=lnlinks href=#hl-19-12>12</a>
</span><span class=lnt id=hl-19-13><a class=lnlinks href=#hl-19-13>13</a>
</span><span class=lnt id=hl-19-14><a class=lnlinks href=#hl-19-14>14</a>
</span><span class=lnt id=hl-19-15><a class=lnlinks href=#hl-19-15>15</a>
</span><span class=lnt id=hl-19-16><a class=lnlinks href=#hl-19-16>16</a>
</span><span class=lnt id=hl-19-17><a class=lnlinks href=#hl-19-17>17</a>
</span><span class=lnt id=hl-19-18><a class=lnlinks href=#hl-19-18>18</a>
</span><span class=lnt id=hl-19-19><a class=lnlinks href=#hl-19-19>19</a>
</span><span class=lnt id=hl-19-20><a class=lnlinks href=#hl-19-20>20</a>
</span><span class=lnt id=hl-19-21><a class=lnlinks href=#hl-19-21>21</a>
</span><span class=lnt id=hl-19-22><a class=lnlinks href=#hl-19-22>22</a>
</span><span class=lnt id=hl-19-23><a class=lnlinks href=#hl-19-23>23</a>
</span><span class=lnt id=hl-19-24><a class=lnlinks href=#hl-19-24>24</a>
</span><span class=lnt id=hl-19-25><a class=lnlinks href=#hl-19-25>25</a>
</span><span class=lnt id=hl-19-26><a class=lnlinks href=#hl-19-26>26</a>
</span><span class=lnt id=hl-19-27><a class=lnlinks href=#hl-19-27>27</a>
</span><span class=lnt id=hl-19-28><a class=lnlinks href=#hl-19-28>28</a>
</span><span class=lnt id=hl-19-29><a class=lnlinks href=#hl-19-29>29</a>
</span><span class=lnt id=hl-19-30><a class=lnlinks href=#hl-19-30>30</a>
</span><span class=lnt id=hl-19-31><a class=lnlinks href=#hl-19-31>31</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// k6 스파이크 테스트 예제
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=nx>http</span> <span class=nx>from</span> <span class=s1>&#39;k6/http&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>sleep</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;k6&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>options</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>scenarios</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>spike</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>executor</span><span class=o>:</span> <span class=s1>&#39;ramping-arrival-rate&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>startRate</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span>         <span class=c1>// 초당 10개 요청으로 시작
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>timeUnit</span><span class=o>:</span> <span class=s1>&#39;1s&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>preAllocatedVUs</span><span class=o>:</span> <span class=mi>100</span><span class=p>,</span>  <span class=c1>// 미리 할당된 VU
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>maxVUs</span><span class=o>:</span> <span class=mi>1000</span><span class=p>,</span>          <span class=c1>// 최대 가능 VU
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>stages</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span> <span class=nx>duration</span><span class=o>:</span> <span class=s1>&#39;1m&#39;</span><span class=p>,</span> <span class=nx>target</span><span class=o>:</span> <span class=mi>10</span> <span class=p>},</span>    <span class=c1>// 1분 동안 초당 10개 요청 유지
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>{</span> <span class=nx>duration</span><span class=o>:</span> <span class=s1>&#39;30s&#39;</span><span class=p>,</span> <span class=nx>target</span><span class=o>:</span> <span class=mi>500</span> <span class=p>},</span>  <span class=c1>// 30초 동안 초당 500개 요청으로 급증
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>{</span> <span class=nx>duration</span><span class=o>:</span> <span class=s1>&#39;2m&#39;</span><span class=p>,</span> <span class=nx>target</span><span class=o>:</span> <span class=mi>500</span> <span class=p>},</span>   <span class=c1>// 2분 동안 초당 500개 요청 유지
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>{</span> <span class=nx>duration</span><span class=o>:</span> <span class=s1>&#39;30s&#39;</span><span class=p>,</span> <span class=nx>target</span><span class=o>:</span> <span class=mi>10</span> <span class=p>},</span>   <span class=c1>// 30초 동안 초당 10개 요청으로 감소
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>{</span> <span class=nx>duration</span><span class=o>:</span> <span class=s1>&#39;2m&#39;</span><span class=p>,</span> <span class=nx>target</span><span class=o>:</span> <span class=mi>10</span> <span class=p>},</span>    <span class=c1>// 2분 동안 초당 10개 요청 유지 (회복 시간)
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>thresholds</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>http_req_duration</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;p(95)&lt;500&#39;</span><span class=p>,</span> <span class=s1>&#39;p(99)&lt;1500&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nx>http_req_failed</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;rate&lt;0.1&#39;</span><span class=p>],</span>  <span class=c1>// 10% 미만의 오류율
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>http</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;https://api.example.com/products&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=api-부하-테스트의-최신-트렌드>API 부하 테스트의 최신 트렌드<a hidden class=anchor aria-hidden=true href=#api-부하-테스트의-최신-트렌드>#</a></h3><h4 id=클라우드-기반-부하-테스트>클라우드 기반 부하 테스트<a hidden class=anchor aria-hidden=true href=#클라우드-기반-부하-테스트>#</a></h4><p>클라우드 환경을 활용한 부하 테스트의 장점과 구현 방법:</p><ol><li><strong>확장성</strong>: 대규모 부하 테스트를 위한 손쉬운 자원 확장</li><li><strong>글로벌 테스트</strong>: 다양한 지역에서의 동시 테스트 가능</li><li><strong>비용 효율성</strong>: 필요할 때만 자원 사용 및 비용 지불</li></ol><p>클라우드 부하 테스트 서비스:</p><ul><li>k6 Cloud</li><li>BlazeMeter</li><li>Loader.io</li><li>Gatling FrontLine</li><li>AWS Device Farm</li></ul><h4 id=ai-기반-성능-분석>AI 기반 성능 분석<a hidden class=anchor aria-hidden=true href=#ai-기반-성능-분석>#</a></h4><p>인공지능과 기계학습을 활용한 성능 테스트 및 분석 방법:</p><ol><li><strong>이상 탐지</strong>:<ul><li>정상 패턴을 학습하여 비정상 동작 감지</li><li>자동 경고 시스템 구현</li><li>오류의 근본 원인 분석 지원</li></ul></li><li><strong>예측적 분석</strong>:<ul><li>과거 데이터 기반 성능 예측</li><li>용량 계획 최적화</li><li>예상 병목 지점 식별</li></ul></li><li><strong>자동 최적화</strong>:<ul><li>성능 데이터 기반 자동 설정 최적화</li><li>자원 할당 자동 조정</li><li>테스트 시나리오 자동 생성 및 조정</li></ul></li></ol><h4 id=컨테이너-및-마이크로서비스-환경에서의-부하-테스트>컨테이너 및 마이크로서비스 환경에서의 부하 테스트<a hidden class=anchor aria-hidden=true href=#컨테이너-및-마이크로서비스-환경에서의-부하-테스트>#</a></h4><p>현대적인 컨테이너 및 마이크로서비스 아키텍처에서의 부하 테스트 방법:</p><ol><li><strong>마이크로서비스 환경 테스트 전략</strong>:<ul><li>개별 서비스 및 전체 시스템 테스트 균형</li><li>서비스 간 의존성 고려</li><li>서비스 메시 환경에서의 테스트</li></ul></li><li><strong>Kubernetes 환경에서의 부하 테스트</strong>:<ul><li>클러스터 내부 또는 외부에서의 테스트</li><li>자원 사용량 모니터링</li><li>자동 확장 정책 검증</li></ul></li><li><strong>서비스 메시 통합</strong>:<ul><li>Istio, Linkerd 등 서비스 메시와 통합된 테스트</li><li>트래픽 미러링을 통한 안전한 테스트</li><li>장애 주입 및 회복력 테스트</li></ul></li></ol><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/backend-development/>Backend Development</a></li><li><a href=https://buenhyden.github.io/tags/api-design-and-implementation/>API-Design-and-Implementation</a></li><li><a href=https://buenhyden.github.io/tags/api-testing/>API-Testing</a></li><li><a href=https://buenhyden.github.io/tags/load-testing/>Load-Testing</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-testing/contract-testing/><span class=title>« Prev</span><br><span>Contract Testing</span>
</a><a class=next href=https://buenhyden.github.io/posts/backend-development/api-design-and-implementation/api-styles/event-based-style/websocket/web-socket-vs-long-polling/><span class=title>Next »</span><br><span>Web Socket vs. Long Polling</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>