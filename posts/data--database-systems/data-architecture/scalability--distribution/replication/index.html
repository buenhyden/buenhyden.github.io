<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Replication | hyunyoun's Blog</title><meta name=keywords content="Data-and-Database-Systems,Data-Architecture,Scalability-and-Distribution,Replication"><meta name=description content="복제 (Replication) 는 데이터나 서비스의 사본을 여러 노드나 시스템에 분산 저장하는 기법으로, 시스템의 가용성, 내결함성, 확장성을 향상시킨다. 주로 마스터 - 슬레이브, 다중 마스터, 액티브 - 액티브와 같은 아키텍처로 구현되며, 동기식 또는 비동기식 복제 방식을 사용한다. CAP 이론에 따라 일관성과 가용성 사이의 균형을 고려해 설계된다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/data--database-systems/data-architecture/scalability--distribution/replication/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.8762af4fa9ee176c57f72565b721f234162fc7a9c882a271e0a1f68c4e89fb34.css integrity="sha256-h2KvT6nuF2xX9yVltyHyNBYvx6nIgqJx4KH2jE6J+zQ=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/data--database-systems/data-architecture/scalability--distribution/replication/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/data--database-systems/data-architecture/scalability--distribution/replication/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/data--database-systems/data-architecture/scalability--distribution/replication/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Replication"><meta property="og:description" content="복제 (Replication) 는 데이터나 서비스의 사본을 여러 노드나 시스템에 분산 저장하는 기법으로, 시스템의 가용성, 내결함성, 확장성을 향상시킨다. 주로 마스터 - 슬레이브, 다중 마스터, 액티브 - 액티브와 같은 아키텍처로 구현되며, 동기식 또는 비동기식 복제 방식을 사용한다. CAP 이론에 따라 일관성과 가용성 사이의 균형을 고려해 설계된다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Replication"><meta name=twitter:description content="복제 (Replication) 는 데이터나 서비스의 사본을 여러 노드나 시스템에 분산 저장하는 기법으로, 시스템의 가용성, 내결함성, 확장성을 향상시킨다. 주로 마스터 - 슬레이브, 다중 마스터, 액티브 - 액티브와 같은 아키텍처로 구현되며, 동기식 또는 비동기식 복제 방식을 사용한다. CAP 이론에 따라 일관성과 가용성 사이의 균형을 고려해 설계된다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"HY's Blog","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":5,"name":"Replication","item":"https://buenhyden.github.io/posts/data--database-systems/data-architecture/scalability--distribution/replication/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>HY's Blog</a></div><h1>Replication</h1><div class=post-description>복제 (Replication) 는 데이터나 서비스의 사본을 여러 노드나 시스템에 분산 저장하는 기법으로, 시스템의 가용성, 내결함성, 확장성을 향상시킨다. 주로 마스터 - 슬레이브, 다중 마스터, 액티브 - 액티브와 같은 아키텍처로 구현되며, 동기식 또는 비동기식 복제 방식을 사용한다. CAP 이론에 따라 일관성과 가용성 사이의 균형을 고려해 설계된다.</div></header><div class=post-content><h2 id=replication>Replication<a hidden class=anchor aria-hidden=true href=#replication>#</a></h2><h3 id=1단계-기본-분석-및-검증>1단계: 기본 분석 및 검증<a hidden class=anchor aria-hidden=true href=#1단계-기본-분석-및-검증>#</a></h3><h4 id=주제-유형-식별>주제 유형 식별<a hidden class=anchor aria-hidden=true href=#주제-유형-식별>#</a></h4><p>Replication(복제)은 <strong>아키텍처/패턴형(C형)</strong> 주제로, 시스템 설계와 구조의 핵심 원리와 품질 속성 분석이 중요한 성격을 지닙니다.[1][2][3][4][5]</p><h4 id=복잡도-평가>복잡도 평가<a hidden class=anchor aria-hidden=true href=#복잡도-평가>#</a></h4><p>실무 적용, 유형별 설계 패턴, 성능 및 신뢰성 트레이드오프 등까지 포함하면 <strong>중급(Level 2)</strong> 이상으로 다루는 것이 적합합니다.[5][6][7]</p><h4 id=대표-태그-생성>대표 태그 생성<a hidden class=anchor aria-hidden=true href=#대표-태그-생성>#</a></h4><ul><li>Replication</li><li>Database-Architecture</li><li>Scalability</li><li>Reliability</li><li>Fault-Tolerance</li></ul><h4 id=분류-체계-검증>분류 체계 검증<a hidden class=anchor aria-hidden=true href=#분류-체계-검증>#</a></h4><p>&ldquo;Data & Database Systems > Data Architecture > Scalability & Distribution&rdquo; 분류는 현재 구조상 정확히 존재하며, Replication의 실무/탐색 접근성, 연관기술 및 분산 시스템 일관성과도 일관성이 높습니다. <strong>분류 적합성 매우 높음</strong>.[4][5]</p><h4 id=핵심-요약-250자-이내>핵심 요약 (250자 이내)<a hidden class=anchor aria-hidden=true href=#핵심-요약-250자-이내>#</a></h4><p>Replication(복제)는 하나의 데이터 원본(Source/마스터)을 여러 데이터베이스 서버(Replica/슬레이브)에 실시간 또는 준실시간으로 복제하여, 읽기성능 향상·고가용성·장애 대응 등 분산 처리와 신뢰성 강화를 실현하는 핵심 데이터 아키텍처입니다.[1][4]</p><h4 id=전체-개요-400자-이내>전체 개요 (400자 이내)<a hidden class=anchor aria-hidden=true href=#전체-개요-400자-이내>#</a></h4><p>Replication(복제)는 데이터 아키텍처에서 고성능, 고가용성, 장애복구, 확장성 문제를 해결하기 위해 등장했으며, Source(마스터)-Replica(슬레이브) 또는 다양한 클러스터링 모델을 활용하여 데이터의 동기화와 분산처리를 실현합니다. Master는 쓰기 연산, Replica는 읽기 연산 중심으로 역할 분리를 통해 트래픽 부하를 효율적으로 분산시킵니다. 복제는 비동기 기반이 많아 데이터 정합성과 동기화, 장애 시 복구 전략 등 실무적인 고려사항도 복합적으로 요구됩니다. 구성이 단일성과 집중에 취약한 환경을 분산 구조로 진화시키며, 실시간 백업, 데이터 분석, 지역 분산 서비스에도 적극 도입됩니다.[4][5][1]</p><hr><h4 id=추가-제안-분류-개선>추가 제안: 분류 개선<a hidden class=anchor aria-hidden=true href=#추가-제안-분류-개선>#</a></h4><ul><li>&ldquo;Scalability & Distribution&rdquo; 하위에 &ldquo;Replication Architecture&rdquo; 세분화 추천</li><li>AI, 시스템 아키텍처 및 빅데이터와의 크로스 레퍼런스 가능성 명확화</li><li>용어 통일(마스터/슬레이브 → 소스/레플리카) 실무와 최신 동향 모두 반영[4]</li></ul><h3 id=2단계-개념-체계화-및-검증>2단계: 개념 체계화 및 검증<a hidden class=anchor aria-hidden=true href=#2단계-개념-체계화-및-검증>#</a></h3><h4 id=핵심-개념-정리>핵심 개념 정리<a hidden class=anchor aria-hidden=true href=#핵심-개념-정리>#</a></h4><ul><li><strong>Replication(복제)</strong>: 데이터베이스 시스템에서 한 서버(Source/Primary/마스터)에서 다른 서버(Replica/Slave/슬레이브)로 데이터 변경 사항을 실시간 혹은 일정 주기로 복제하는 구조입니다. 이는 읽기 트래픽 분산, 장애 대비, 고가용성, 데이터 정합성 등 다양한 실무 문제를 해결합니다.[1][2][3][4]</li><li><strong>구성 요소</strong>:<ul><li><strong>Source(Primary/마스터)</strong>: 모든 쓰기(INSERT/UPDATE/DELETE)를 담당하며, 변경 이력을 Binary Log(이진 로그)에 기록합니다.</li><li><strong>Replica(슬레이브)</strong>: 읽기(SELECT) 연산 전용이며, Primary의 변경 로그를 받아서 데이터 동기화를 유지합니다.</li><li><strong>Binary Log, Relay Log, Master/IO/SQL Thread</strong> 등으로 복제 동작이 이루어집니다.[5][6][3]</li></ul></li><li><strong>복제 유형</strong>:<ul><li><strong>비동기(Asynchronous)</strong>: Source에서 변경이 발생하면 단지 로그를 남기고, Replica가 해당 변경을 별도 주기로 가져옴(즉각적 동기화는 보장하지 않음). MySQL 등 대부분의 DBMS에서 기본 방식입니다.</li><li><strong>동기(Synchronous)</strong>: Source의 변경이 Replica까지 적용되어야 트랜잭션 완료가 인정됩니다.</li><li><strong>반동기(Semi-Synchronous)</strong>: 일부 Replica만 변경 완료 시 트랜잭션 완료 처리.[7][1][5]</li></ul></li><li><strong>복제 구조 패턴</strong>:<ul><li><strong>Single Source-Single Replica</strong></li><li><strong>Single Source-Multi Replica</strong></li><li><strong>Chain Replication, Multi-Source Replication, Group Replication</strong> 등 다양한 확장형 구조가 존재합니다.[8][9][7]</li></ul></li></ul><h4 id=상호관계-구조화>상호관계 구조화<a hidden class=anchor aria-hidden=true href=#상호관계-구조화>#</a></h4><ul><li>쓰기 연산은 Source(Primary/마스터)만 처리, 읽기 연산은 여러 Replica로 분산 처리</li><li>Binary Log 기록 → I/O Thread가 읽어 Replica에 전달 → Relay Log → SQL Thread가 적용</li><li>장애 발생 시 Replica를 Source로 승격(Failover), 읽기/쓰기 역할 재분배</li><li>Group Replication, Multi-Source 구조는 자동 장애 전환, 다중 마스터 지원 등 확장성 제공.[10][7][8]</li></ul><hr><h4 id=실무-연관성-분석>실무 연관성 분석<a hidden class=anchor aria-hidden=true href=#실무-연관성-분석>#</a></h4><ul><li><strong>성능 및 확장성</strong>: 읽기 트래픽을 여러 Replica로 분산시켜, 대규모 서비스에서 성능 저하 없이 사용자 트래픽 처리.[2][1]<ul><li>대규모 트래픽 관리, 성능 향상에 결정적 역할</li></ul></li><li><strong>장애 대응력</strong>: Master 장애 발생 시 즉시 Slave를 승격(Failover), 서비스 무중단 유지.[3][1][7]<ul><li>고가용성 구현, 재해 복구(DR)에 필수</li></ul></li><li><strong>운영 관리</strong>: 버전 업그레이드, 스케일 아웃, 데이터 백업, 이력 분리 등 실무적 활용 빈번<ul><li>DB Driver/코드/트랜잭션 단위에서 읽기/쓰기가 분리 라우팅되는 구조 확장.[2]</li></ul></li><li><strong>실무적 고려사항</strong>: 데이터 정합성 문제(Replication Lag), 설정 복잡성, 장애 복구 전략 등<ul><li>동기화 지연(Replication Lag), 일관성 보장 전략 및 모니터링 필요.[1][3]</li></ul></li></ul><hr><h4 id=다이어그램-구조아키텍처-예시>다이어그램 구조(아키텍처 예시)<a hidden class=anchor aria-hidden=true href=#다이어그램-구조아키텍처-예시>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6>6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7>7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>graph TD
</span></span><span class=line><span class=cl>    Application
</span></span><span class=line><span class=cl>      --&gt; |Write| Primary(Source)
</span></span><span class=line><span class=cl>      --&gt; |Read| Replica1
</span></span><span class=line><span class=cl>      --&gt; |Read| Replica2
</span></span><span class=line><span class=cl>    Primary(Source) --&gt; |Binary Log| Replica1
</span></span><span class=line><span class=cl>    Primary(Source) --&gt; |Binary Log| Replica2
</span></span><span class=line><span class=cl>    Replica1 --&gt; |Failover 가능| Primary(Source)
</span></span></code></pre></td></tr></table></div></div><ul><li>설명: 클라이언트/애플리케이션은 쓰기 요청을 Primary에, 읽기 요청을 Replica에 분산. Primary의 변경 로그가 각 Replica에 복제되고, 장애 시 Replica가 Primary 승격 및 구조 변화가 즉각 발생합니다.[5][3][2]</li></ul><h3 id=phase-1-기초-조사-및-개념-정립>Phase 1: 기초 조사 및 개념 정립<a hidden class=anchor aria-hidden=true href=#phase-1-기초-조사-및-개념-정립>#</a></h3><h4 id=11-개념-정의-및-본질적-이해>1.1 개념 정의 및 본질적 이해<a hidden class=anchor aria-hidden=true href=#11-개념-정의-및-본질적-이해>#</a></h4><ul><li>**복제(Replication)**는 데이터베이스 아키텍처에서 한 서버(Source, 마스터)의 데이터를 다른 서버들(Replica, 슬레이브)로 실시간 또는 일정 주기로 동기화(복제)하는 기술로, 시스템의 고가용성, 부하분산, 데이터 정합성을 실현하는 핵심 방법입니다.[1][2][3]</li></ul><h4 id=12-등장-배경-및-발전-과정>1.2 등장 배경 및 발전 과정<a hidden class=anchor aria-hidden=true href=#12-등장-배경-및-발전-과정>#</a></h4><ul><li>초기 단일 서버 구조에서는 장애와 성능 병목에 취약하기 때문에, 여러 서버에 데이터를 분산·동기화함으로써 읽기 트래픽 분산, 장애복구, 백업 및 분석 환경을 제공하려는 목적에서 복제 기술이 발전했습니다.[2][3][4]</li><li>전통적인 Master-Slave 구조에서 Multi-Master, Group Replication, CDC(Change Data Capture) 등 다양한 확장 모델로 진화하고 있습니다.</li></ul><h4 id=13-해결하는-문제-및-핵심-목적>1.3 해결하는 문제 및 핵심 목적<a hidden class=anchor aria-hidden=true href=#13-해결하는-문제-및-핵심-목적>#</a></h4><ul><li>고가용성(High Availability): 장애가 발생해도 Replica로 서비스 지속 가능</li><li>데이터 정합성(Data Consistency): 여러 서버에서 데이터 불일치 방지</li><li>부하 분산(Load Balancing): 읽기 트래픽을 여러 서버로 분산해 성능 극대화</li><li>장애 복구 및 실시간 백업(Disaster Recovery): 복제본을 활용한 데이터 복구 및 백업 향상[3][4]</li></ul><h4 id=14-전제-조건-및-요구사항>1.4 전제 조건 및 요구사항<a hidden class=anchor aria-hidden=true href=#14-전제-조건-및-요구사항>#</a></h4><ul><li>Master 서버와 하나 이상의 Replica 서버 필요</li><li>네트워크 연결 및 동기화 지연(Lag) 관리 필요</li><li>읽기/쓰기 분리 전제, 트랜잭션/로그 관리 필수</li><li>DBMS 버전 호환성, 데이터 정합 정책, 보안 설정 필수[4][5]</li></ul><h4 id=15-핵심-특징-기술적-근거-포함-타-기술과-차별점>1.5 핵심 특징 (기술적 근거 포함, 타 기술과 차별점)<a hidden class=anchor aria-hidden=true href=#15-핵심-특징-기술적-근거-포함-타-기술과-차별점>#</a></h4><ul><li>실시간 또는 준실시간으로 데이터 복사</li><li>Master(쓰기 전용), Replica(읽기 전용, 여러 대 가능) 구조</li><li>Binary Log, Relay Log 등 로그 기반 동기화 메커니즘 존재</li><li>샤딩, 클러스터링과 달리 기본적으로 데이터 복제에 중점</li><li>다양한 운용 방식(동기, 비동기, 반동기 등) 지원[5][3]</li></ul><h4 id=16-설계-동기-및-품질-속성>1.6 설계 동기 및 품질 속성<a hidden class=anchor aria-hidden=true href=#16-설계-동기-및-품질-속성>#</a></h4><ul><li>확장성(Scalability): 서버 확충 시 간편하게 읽기 성능 향상</li><li>신뢰성(Reliability): 장애 시 데이터 손실 최소화, 빠른 복구</li><li>운용성(Operability): 백업, 테스트, 데이터 분석 환경에 유리</li><li>유연성(Flexibility): 다양한 복제 구조/방식 적용 가능[3][5]</li></ul><h4 id=17-역사적-맥락-및-진화-과정-level-3-심화>1.7 역사적 맥락 및 진화 과정 (Level 3 심화)<a hidden class=anchor aria-hidden=true href=#17-역사적-맥락-및-진화-과정-level-3-심화>#</a></h4><ul><li>2000년대 초반 단일 Master-Slave 방식에서 시작해, 소셜미디어·글로벌 서비스 수요 폭증에 따라 Multi-Master·Group Replication·CDC 등 분산화‧확장성 중심으로 빠르게 기술 발전 중.[4][3]</li></ul><h4 id=18-산업별-적용-현황-및-채택률-level-3-심화>1.8 산업별 적용 현황 및 채택률 (Level 3 심화)<a hidden class=anchor aria-hidden=true href=#18-산업별-적용-현황-및-채택률-level-3-심화>#</a></h4><ul><li>IT플랫폼, SaaS, 전자상거래, 금융, 게임, 분석 등 대규모 실시간 트래픽을 처리하는 모든 분야에서 표준 아키텍처로 채택 중.[6][7]</li></ul><hr><h3 id=phase-2-핵심-원리-및-이론적-기반>Phase 2: 핵심 원리 및 이론적 기반<a hidden class=anchor aria-hidden=true href=#phase-2-핵심-원리-및-이론적-기반>#</a></h3><h4 id=21-핵심-원칙-및-설계-철학>2.1 핵심 원칙 및 설계 철학<a hidden class=anchor aria-hidden=true href=#21-핵심-원칙-및-설계-철학>#</a></h4><ul><li><strong>일관성(Consistency)와 가용성(Availability)의 균형</strong>: 복제 구조는 데이터 정합성과 서비스 지속성(무중단 운영)의 균형을 목표로 설계됩니다. 트래픽 확대, 장애 복구, 성능 분산 모두 복제의 핵심 이유입니다.[1][2]</li><li><strong>데이터 독립성과 분산 처리</strong>: 각 Replica에서 독립적으로 읽기 처리가 가능하며, 데이터 분산 구조를 최적화합니다.[3][1]</li></ul><h4 id=22-기본-동작-원리-및-메커니즘-다이어그램-포함>2.2 기본 동작 원리 및 메커니즘 (다이어그램 포함)<a hidden class=anchor aria-hidden=true href=#22-기본-동작-원리-및-메커니즘-다이어그램-포함>#</a></h4><ul><li>Master에서 발생하는 모든 쓰기 연산은 <strong>Binary Log(이진 로그)</strong> 형태로 저장되고, Replica가 복제 로그를 읽어 데이터 적용을 수행합니다.[4][5]</li><li><strong>프로세스 흐름 예시</strong>:<ol><li>Master에 쓰기 트랜잭션 → Binary Log 기록</li><li>Replica의 IO Thread가 Master의 Binary Log를 받아와 Relay Log로 저장</li><li>Replica의 SQL Thread가 Relay Log를 순서대로 적용</li><li>장애 발생 시 Replica 승격(자동/수동)에 따라 서비스 무중단 처리.</li></ol></li></ul><pre class=mermaid>graph TD
A[Master] -- Binary Log --&gt; B[Replica]
B[Replica] -- Relay Log 적용 --&gt; C[DB Read/분석]
</pre><h4 id=23-데이터-및-제어-흐름-생명주기-포함>2.3 데이터 및 제어 흐름 (생명주기 포함)<a hidden class=anchor aria-hidden=true href=#23-데이터-및-제어-흐름-생명주기-포함>#</a></h4><ul><li>데이터의 변경(INSERT/UPDATE/DELETE)은 Master에서만 발생, Replica는 읽기(GET/SELECT) 연산에 집중.[4][5]</li><li>복제 프로세스의 생명주기:<ul><li>INIT(설정), SYNC(로그 수신 및 적용), FAILOVER(장애 시 역할 전환), RECOVERY(재동기화 및 복원)</li></ul></li><li>지연(Replication Lag) 발생 시 운영 정책에 따라 읽기 일관성 전략 적용.[6]</li></ul><h4 id=24-구조-및-구성-요소-계층모듈-구조-구조도-포함>2.4 구조 및 구성 요소 (계층/모듈 구조, 구조도 포함)<a hidden class=anchor aria-hidden=true href=#24-구조-및-구성-요소-계층모듈-구조-구조도-포함>#</a></h4><ul><li>계층 구조<ul><li><strong>Master</strong>: 쓰기 연산, Binary Log 관리</li><li><strong>Replica</strong>: 읽기 연산, Relay Log, IO/SQL Thread</li><li><strong>관리 도구/모듈</strong>: 장애 감지, 모니터링, 자동 승격, 트랜잭션 관리</li></ul></li><li>확장 구조<ul><li>Single Master-Multiple Replica, Multi-Master, Chain, Group Replication 등[7][1]</li></ul></li></ul><h4 id=25-패턴-구조-및-품질-속성-메커니즘c형-특화>2.5 패턴 구조 및 품질 속성 메커니즘(C형 특화)<a hidden class=anchor aria-hidden=true href=#25-패턴-구조-및-품질-속성-메커니즘c형-특화>#</a></h4><ul><li><strong>동기화 방식</strong><ul><li>비동기: 성능 우선, 정합성 약화</li><li>동기: 정합성 강화, 성능 저하</li><li>반동기(Semi-Sync): 절충형 적용</li></ul></li><li><strong>품질 속성</strong><ul><li>장애 복구 속도, 일관성 유지, 확장성, 운영 자동화 등 품질 속성별 설계 패턴 존재[1][6][7]</li></ul></li></ul><h4 id=26-고급-이론적-배경-level-3-심화>2.6 고급 이론적 배경 (Level 3 심화)<a hidden class=anchor aria-hidden=true href=#26-고급-이론적-배경-level-3-심화>#</a></h4><ul><li><strong>CAP 이론</strong>: 일관성(Consistency), 가용성(Availability), 파티션 허용성(Partition Tolerance) 간의 트레이드오프에 따라 복제 구조 최적화 필요.[1]</li><li><strong>분산 트랜잭션, Write-Ahead Logging(WAL), GTID(Global Transaction ID) 기반 일관성 유지 등 최신 이론 적용</strong>[5]</li></ul><h4 id=27-다른-시스템과의-상호작용-메커니즘-level-3-심화>2.7 다른 시스템과의 상호작용 메커니즘 (Level 3 심화)<a hidden class=anchor aria-hidden=true href=#27-다른-시스템과의-상호작용-메커니즘-level-3-심화>#</a></h4><ul><li>CDC(Change Data Capture) 기반 이벤트 스트림 연동</li><li>메시징, 분산 캐시, 서드파티 모니터링 도구와 통합[8][1]</li></ul><hr><p>Phase 2에서는 복제 기술의 구조적 원리, 데이터 및 제어 흐름, 복제 동작의 세부 메커니즘, 품질 속성 관점의 설계 패턴, 최신 이론 프레임과 확장 가능 구조까지 계층적으로 정리하는 것이 핵심입니다.</p><p><a href=https://blog.skaiworldwide.com/572>1</a>
<a href=https://moxie2ks.tistory.com/74>2</a>
<a href=https://www.coovil.net/db-replication/>3</a>
<a href=https://sanghye.tistory.com/38>4</a>
<a href=https://haon.blog/database/replication-architecture/>5</a>
<a href=https://iiaii.tistory.com/entry/%EB%A6%AC%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98%EC%9D%98-%EB%AC%B8%EC%A0%9C%EC%99%80-%ED%95%B4%EA%B2%B0%EB%B0%A9%EB%B2%95-%EB%B3%B5%EC%A0%9C%EC%A7%80%EC%97%B0-semi-sync>6</a>
<a href=https://blog.ex-em.com/1781>7</a>
<a href=https://www.couchbase.com/ko/resources/concepts/%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B3%B5%EC%A0%9C/>8</a></p><h3 id=3단계-특성-분석-및-평가>3단계: 특성 분석 및 평가<a hidden class=anchor aria-hidden=true href=#3단계-특성-분석-및-평가>#</a></h3><h4 id=31-주요-장점-및-이점>3.1 주요 장점 및 이점<a hidden class=anchor aria-hidden=true href=#31-주요-장점-및-이점>#</a></h4><table><thead><tr><th>장점</th><th>상세 설명</th><th>기술 근거</th><th>적용 상황</th><th>실무적 가치</th></tr></thead><tbody><tr><td>고가용성</td><td>서버 장애 시 서비스 무중단 유지, 자동 장애 복구</td><td>Replica의 즉각 승격(Failover) 메커니즘</td><td>미션 크리티컬 서비스</td><td>다운타임 방지, 고객 신뢰 확보</td></tr><tr><td>읽기 성능 향상</td><td>읽기 트래픽 분산 처리</td><td>Source의 쓰기, Replica의 읽기 분리</td><td>데이터 조회 많은 환경</td><td>응답속도 향상, 서비스 확장</td></tr><tr><td>부하 분산</td><td>여러 서버에서 트래픽 부담 분산</td><td>각 Replica가 데이터 읽기 요청 병렬 수행</td><td>멀티 리전, 대규모 유저 서비스</td><td>비용 절감, 신속한 확장</td></tr><tr><td>데이터 백업 및 복구</td><td>Replica 이용 실시간 백업, 장애 시 데이터 복구</td><td>실시간 데이터 복제, 여러 복제본 관리</td><td>백업, 재해복구</td><td>데이터 손실 방지, 운영 안정성</td></tr><tr><td>지리적 데이터 분산</td><td>데이터베이스 위치별 분산(글로벌 서비스)</td><td>각 지역별 Replica 서버 배포</td><td>글로벌 웹/앱 서비스</td><td>지연(Latency) 최소화, 지역 분석 지원</td></tr><tr><td>테스트 환경 분리</td><td>Replica를 개발/테스트/분석용으로 활용</td><td>운영 DB와 분리된 환경에서 실데이터 사용 가능</td><td>데이터 분석, 테스트</td><td>개발 효율성, 운영 안정성 향상</td></tr></tbody></table><p>[1][2][3][4][5][6]</p><hr><h4 id=32-단점-및-제약사항>3.2 단점 및 제약사항<a hidden class=anchor aria-hidden=true href=#32-단점-및-제약사항>#</a></h4><h5 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h5><table><thead><tr><th>단점</th><th>상세 설명</th><th>원인</th><th>실무에서 발생되는 문제</th><th>완화/해결 방안</th><th>대안 기술</th></tr></thead><tbody><tr><td>데이터 정합성 문제</td><td>비동기 복제로 Replica의 데이터 최신성이 떨어짐</td><td>복제 지연</td><td>실시간 조회, 데이터 불일치</td><td>동기/반동기 방식 보완</td><td>동기화 강화, Event Sourcing</td></tr><tr><td>운영 복잡성</td><td>구축, 설정, 관리, 장애 복구가 복잡함</td><td>다양한 서버/구조</td><td>관리 실수, 장애 시 복구 지연</td><td>자동화 도구, 전문 운영팀</td><td>클라우드DB, 관리형 서비스</td></tr><tr><td>쓰기 작업 제약</td><td>Replica 서버에서는 기본적으로 쓰기 작업 불가</td><td>Master 중심 구조</td><td>일부 서비스 아키텍처 제약</td><td>Group Replication, Multi-Master</td><td>Sharding, 분산처리DB</td></tr><tr><td>이기종 환경 제약</td><td>DB 엔진/플랫폼 버전/OS 차이로 인한 복제 불가</td><td>물리적 복제 방식</td><td>마이그레이션, OS업그레이드 제약</td><td>논리적 복제, Mixed방식 지원</td><td>CDC(Change Data Capture)</td></tr></tbody></table><p>[7][8][9][5][10]</p><h5 id=제약사항>제약사항<a hidden class=anchor aria-hidden=true href=#제약사항>#</a></h5><table><thead><tr><th>제약사항</th><th>상세 설명</th><th>원인</th><th>영향</th><th>완화/해결 방안</th><th>대안 기술</th></tr></thead><tbody><tr><td>환경 및 버전 종속성</td><td>DB 엔진/OS 버전 불일치 시 복제 불가</td><td>물리적/블록 복제 방식</td><td>업그레이드, 확장 한계</td><td>논리적 복제, 컨테이너 운영</td><td>CDC, 데이터 변환</td></tr><tr><td>트랜잭션 보장 한계</td><td>읽기/쓰기 일관성 보장 어려움</td><td>비동기 방식</td><td>업무 이상 징후</td><td>Semi/동기 복제 전환</td><td>Strong Consistency</td></tr><tr><td>성능 병목 발생</td><td>복제백엔드 과부하, ReplicaLag</td><td>대기중 트래픽 폭증</td><td>응답 지연, 서비스 중단</td><td>읽기 분산, 모니터링 강화</td><td>로드 밸런싱</td></tr></tbody></table><p>[9][11][12][10]</p><hr><h4 id=33-트레이드오프-관계-분석>3.3 트레이드오프 관계 분석<a hidden class=anchor aria-hidden=true href=#33-트레이드오프-관계-분석>#</a></h4><ul><li><strong>정합성 vs 성능</strong>: 높은 동기화는 데이터 일관성을 보장하지만, 전체 트랜잭션 속도를 저하시킴. 비동기 방식 사용 시 응답성은 좋으나, 데이터 최신성 보장이 어렵다.[8][10]</li><li><strong>운영 복잡성 vs 확장성</strong>: 구조가 복잡해질수록 장애 복구, 버전 관리, 모니터링 비용이 증가하나 대규모 분산·글로벌 서비스에는 필수적인 선택임.[7][9]</li><li><strong>비용 vs 안정성</strong>: 서버/리소스 비용은 늘어나지만 안정성·신뢰성·백업 효율성이 크게 향상됨.[3][5]</li></ul><hr><h4 id=34-적용-적합성-평가>3.4 적용 적합성 평가<a hidden class=anchor aria-hidden=true href=#34-적용-적합성-평가>#</a></h4><ul><li><strong>대규모 읽기 트래픽 처리, 글로벌 분산, 무중단 서비스, 실시간 백업 등</strong>이 필수인 환경에는 Replication 아키텍처가 매우 적합하다.[2][6][3]</li><li><strong>거래, 데이터 분석, 백업 환경, 장애 복구, 멀티 리전 어플리케이션</strong>에 강력한 실무 효과를 발휘한다.</li><li>단, 트랜잭션 정합성과 서버 운영 복잡성 관리가 필수 전제 조건 with 모니터링·자동화 보완 권장.[11][10][7]</li></ul><hr><h3 id=4단계-구현-방법-및-분류>4단계: 구현 방법 및 분류<a hidden class=anchor aria-hidden=true href=#4단계-구현-방법-및-분류>#</a></h3><h4 id=41-구현-방법-및-기법>4.1 구현 방법 및 기법<a hidden class=anchor aria-hidden=true href=#41-구현-방법-및-기법>#</a></h4><ul><li><p><strong>로그 기반 복제(Log-based Replication)</strong></p><ul><li>소스(Source/마스터)가 데이터 변경 시 Binary Log(이진 로그) 작성</li><li>Replica(슬레이브)가 Binary Log를 읽고 데이터 변경 내용 적용</li><li>대표적으로 MySQL, PostgreSQL 등에서 사용[1][2][3]</li></ul></li><li><p><strong>Statement Based Replication (SBR, SQL문장 복제)</strong></p><ul><li>SQL문 자체를 Replica에 전달</li><li>쉽고 간단하지만, 시간함수, UUID 등 결과가 달라질 수 있음[4][3]</li></ul></li><li><p><strong>Row Based Replication (RBR, 행복제)</strong></p><ul><li>실제 Row 데이터를 변경하여 복제</li><li>데이터 일관성 좋지만, 대용량 데이터 이동 시 성능 저하 가능[3][4]</li></ul></li><li><p><strong>Mixed Based Replication (MBR, 혼합방식)</strong></p><ul><li>SBR과 RBR 혼합, 상황에 맞게 선택하여 복제 진행[4][3]</li></ul></li><li><p><strong>GTID 기반 복제(Global Transaction Identifiers)</strong></p><ul><li>트랜잭션 ID로 일관성 보장</li><li>로그파일과 시간에 관계 없이 Replica간 데이터 동기화[3]</li></ul></li><li><p><strong>물리/논리 복제</strong></p><ul><li>물리적: 파일 단위 복제(스토리지, 블록 수준)</li><li>논리적: 데이터/스키마 단위 복제(Extract-Transform-Load)[1]</li></ul></li></ul><hr><h4 id=42-유형별-분류-체계>4.2 유형별 분류 체계<a hidden class=anchor aria-hidden=true href=#42-유형별-분류-체계>#</a></h4><table><thead><tr><th>분류 기준</th><th>유형 명칭</th><th>특징 및 적용 예시</th></tr></thead><tbody><tr><td>구조 Topology</td><td>Master-Slave</td><td>대표적(읽기 부하 분산, 실시간 백업)</td></tr><tr><td></td><td>Master-Master</td><td>양방향 동기화, 충돌관리 필수</td></tr><tr><td></td><td>Multi-Source</td><td>여러 소스 → 1 Replica, 데이터 통합 분석</td></tr><tr><td></td><td>Chain Replication</td><td>다단계 연결, 장애/부하 분산에 효율적</td></tr><tr><td>동기화 방식</td><td>Synchronous</td><td>데이터 일관성 최우선, 성능 저하</td></tr><tr><td></td><td>Asynchronous</td><td>성능 우선, 정합성 일시적 손상 가능</td></tr><tr><td></td><td>Semi-Synchronous</td><td>절충, 일부 Replica만 반영 후 완료처리</td></tr><tr><td>복제 범위</td><td>전체 복제</td><td>DB 전체 동기화</td></tr><tr><td></td><td>부분 복제</td><td>특정 테이블/컬럼만 복제</td></tr><tr><td>플랫폼/도구</td><td>운영체제(물리/논리)</td><td>스토리지·파일·테이블 단위 복제</td></tr><tr><td></td><td>클라우드 기반</td><td>AWS S3 Replication, GCP Cloud SQL 등</td></tr></tbody></table><p>[5][6][7][8][1]</p><hr><h4 id=43-도구-및-라이브러리-생태계>4.3 도구 및 라이브러리 생태계<a hidden class=anchor aria-hidden=true href=#43-도구-및-라이브러리-생태계>#</a></h4><ul><li><strong>MySQL Replication</strong>: 기본 Master-Slave, Group Replication, MHA(Master High Availability), Semi-Sync 등 다양한 구성이 가능[9][3]</li><li><strong>PostgreSQL Replication</strong>: Streaming, Logical Replication, 물리·논리 배치 혼합, PGBouncer 등[6][8]</li><li><strong>AWS S3 Replication</strong>: 객체 단위 리전 간 데이터 복제 지원, 실시간/비동기 방식 옵션 제공[7]</li><li><strong>관리형 클라우드DB</strong>: GCP Cloud SQL, Azure SQL Database 등 자체 복제기능 내장[10][7]</li><li><strong>CDC(Change Data Capture) 플랫폼</strong>: Debezium, Kafka Connect 등 실시간 동기화에 적합[11]</li><li><strong>품질 관리 및 오케스트레이션</strong>: 자동화 운영/모니터링, 복구·장애대응 솔루션 연계</li></ul><hr><h4 id=44-표준-및-규격-준수사항>4.4 표준 및 규격 준수사항<a hidden class=anchor aria-hidden=true href=#44-표준-및-규격-준수사항>#</a></h4><ul><li><strong>SQL 기반 로그 복제</strong>: JDBC, ODBC 등 표준 프로토콜 연동 가능</li><li><strong>GTID, WAL(Write Ahead Log)</strong>: 트랜잭션 로그 관리·동기화 표준[8][3]</li><li><strong>클라우드 S3 RTC(Replication Time Control)</strong>: 객체 동기화 SLA 표준 준수[7]</li></ul><hr><h4 id=심화-항목조건부>심화 항목(조건부)<a hidden class=anchor aria-hidden=true href=#심화-항목조건부>#</a></h4><ul><li><strong>안티패턴 및 주의사항</strong>: 쓰기 분산이 필요한 환경에 단순 Master-Slave 적용 시 최신성·확장성 병목, 설정 오류 등 발생</li><li><strong>마이그레이션 및 업그레이드 전략</strong>: 물리/논리 Backup 활용, 점진적 교체, 블루그린 전략 등 복제 기반 대규모 이전 가능[12][13]</li></ul><hr><h3 id=5단계-실무-적용-및-사례>5단계: 실무 적용 및 사례<a hidden class=anchor aria-hidden=true href=#5단계-실무-적용-및-사례>#</a></h3><h4 id=51-실습-예제-및-코드-구현>5.1 실습 예제 및 코드 구현<a hidden class=anchor aria-hidden=true href=#51-실습-예제-및-코드-구현>#</a></h4><h5 id=실습-예제-mysql-replication-환경-구축>실습 예제: MySQL Replication 환경 구축<a hidden class=anchor aria-hidden=true href=#실습-예제-mysql-replication-환경-구축>#</a></h5><h6 id=목적>목적<a hidden class=anchor aria-hidden=true href=#목적>#</a></h6><ul><li>master-replica 구조에서 읽기/쓰기 분리, 데이터 복제 및 장애 복구 방식 체득[1][2]</li></ul><h6 id=사전-요구사항>사전 요구사항<a hidden class=anchor aria-hidden=true href=#사전-요구사항>#</a></h6><ul><li>MySQL 8.x / MariaDB 10.x</li><li>두 개 이상의 Linux 서버(혹은 Docker 컨테이너)</li><li>네트워크 연결 및 외부 포트 오픈(3306)</li></ul><h6 id=단계별-구현>단계별 구현<a hidden class=anchor aria-hidden=true href=#단계별-구현>#</a></h6><ol><li><strong>1단계: Master 서버에서 설정</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- my.cnf 설정 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span><span class=n>mysqld</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>server</span><span class=o>-</span><span class=n>id</span><span class=o>=</span><span class=mi>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>log</span><span class=o>-</span><span class=n>bin</span><span class=o>=</span><span class=n>mysql</span><span class=o>-</span><span class=n>bin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>binlog</span><span class=o>-</span><span class=k>do</span><span class=o>-</span><span class=n>db</span><span class=o>=</span><span class=n>exampledb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- MySQL에서 Replication 계정 생성
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=s1>&#39;repl&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=w> </span><span class=n>IDENTIFIED</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=s1>&#39;password&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GRANT</span><span class=w> </span><span class=n>REPLICATION</span><span class=w> </span><span class=n>SLAVE</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=o>*</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=s1>&#39;repl&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>FLUSH</span><span class=w> </span><span class=k>PRIVILEGES</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 현재 master 상태 백업
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>FLUSH</span><span class=w> </span><span class=n>TABLES</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=k>READ</span><span class=w> </span><span class=k>LOCK</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SHOW</span><span class=w> </span><span class=n>MASTER</span><span class=w> </span><span class=n>STATUS</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ol start=2><li><strong>2단계: Replica 서버에서 설정</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span><span class=lnt id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a>
</span><span class=lnt id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a>
</span><span class=lnt id=hl-3-17><a class=lnlinks href=#hl-3-17>17</a>
</span><span class=lnt id=hl-3-18><a class=lnlinks href=#hl-3-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- my.cnf 설정 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span><span class=n>mysqld</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>server</span><span class=o>-</span><span class=n>id</span><span class=o>=</span><span class=mi>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>relay</span><span class=o>-</span><span class=n>log</span><span class=o>=</span><span class=n>relay</span><span class=o>-</span><span class=n>bin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Master 서버 백업 복사(예: scp로 dump 이동)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>mysql</span><span class=w> </span><span class=o>-</span><span class=n>u</span><span class=w> </span><span class=n>root</span><span class=w> </span><span class=o>-</span><span class=n>p</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>master_dump</span><span class=p>.</span><span class=k>sql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Replication 정보 입력
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>CHANGE</span><span class=w> </span><span class=n>MASTER</span><span class=w> </span><span class=k>TO</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>MASTER_HOST</span><span class=o>=</span><span class=s1>&#39;MASTER_IP&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>MASTER_USER</span><span class=o>=</span><span class=s1>&#39;repl&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>MASTER_PASSWORD</span><span class=o>=</span><span class=s1>&#39;password&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>MASTER_LOG_FILE</span><span class=o>=</span><span class=s1>&#39;mysql-bin.000001&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>MASTER_LOG_POS</span><span class=o>=</span><span class=mi>12345</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>START</span><span class=w> </span><span class=n>SLAVE</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SHOW</span><span class=w> </span><span class=n>SLAVE</span><span class=w> </span><span class=n>STATUS</span><span class=err>\</span><span class=k>G</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h6 id=실행-결과>실행 결과<a hidden class=anchor aria-hidden=true href=#실행-결과>#</a></h6><ul><li>Master에서 데이터 변경 시 Replica에 100ms 이내 자동 반영</li><li>Replica DB에서 읽기 쿼리(SELECT)는 즉각 조회 가능</li></ul><h6 id=추가-실험>추가 실험<a hidden class=anchor aria-hidden=true href=#추가-실험>#</a></h6><ul><li>Replica 추가</li><li>장애 상황에서 Replica를 Master로 승격(Failover) 시도</li><li>GTID 기반 복제, Group Replication 방식 실험[3]</li></ul><hr><h4 id=52-실제-도입-사례-분석>5.2 실제 도입 사례 분석<a hidden class=anchor aria-hidden=true href=#52-실제-도입-사례-분석>#</a></h4><h5 id=실제-도입-사례-shoe-auction-프로젝트4>실제 도입 사례: Shoe-auction 프로젝트[4]<a hidden class=anchor aria-hidden=true href=#실제-도입-사례-shoe-auction-프로젝트4>#</a></h5><h6 id=배경-및-도입-이유>배경 및 도입 이유<a hidden class=anchor aria-hidden=true href=#배경-및-도입-이유>#</a></h6><ul><li>사용자 트래픽 급증, 무중단 서비스, 데이터 분석 환경 필요</li></ul><h6 id=구현-아키텍처>구현 아키텍처<a hidden class=anchor aria-hidden=true href=#구현-아키텍처>#</a></h6><pre class=mermaid>graph TB
    Client --&gt; WebServer
    WebServer --&gt; MasterDB
    WebServer --&gt; ReplicaDB
    MasterDB --&gt; ReplicaDB
</pre><ul><li>MasterDB에 쓰기, ReplicaDB에 읽기/분석 쿼리 분산</li></ul><h6 id=핵심-구현-코드>핵심 구현 코드<a hidden class=anchor aria-hidden=true href=#핵심-구현-코드>#</a></h6><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># JPA를 통한 읽기/쓰기 분리 예시</span>
</span></span><span class=line><span class=cl><span class=nd>@Transactional</span><span class=p>(</span><span class=n>readOnly</span><span class=o>=</span><span class=n>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>fetch_products</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1># ReplicaDB에서 읽기 실행</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Transactional</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>create_order</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1># MasterDB에 쓰기 실행</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=성과-및-결과>성과 및 결과<a hidden class=anchor aria-hidden=true href=#성과-및-결과>#</a></h6><ul><li>주문 및 상품 리스트 DB부하 분산</li><li>장애 발생 시 ReplicaDB 이용해 즉각 복구</li></ul><h6 id=교훈-및-시사점>교훈 및 시사점<a hidden class=anchor aria-hidden=true href=#교훈-및-시사점>#</a></h6><ul><li>읽기/쓰기 라우팅 분리가 핵심, 장애 복구 시 자동 승격 필요</li></ul><hr><h4 id=53-통합-및-연계-기술>5.3 통합 및 연계 기술<a hidden class=anchor aria-hidden=true href=#53-통합-및-연계-기술>#</a></h4><ul><li>CDC(Change Data Capture) 기반 실시간 데이터 동기화(예: Kafka Connect 등)</li><li>클라우드 멀티 리전, 하이브리드 환경 연동(AWS S3 Replication, Azure PostgreSQL Read Replica 등)[5][6]</li></ul><hr><h4 id=55-대규모-환경-적용-및-실패-사례>5.5 대규모 환경 적용 및 실패 사례<a hidden class=anchor aria-hidden=true href=#55-대규모-환경-적용-및-실패-사례>#</a></h4><ul><li><strong>대규모 환경</strong>: 수백~수천 개 Replica 구성, 글로벌 트래픽 분산, 장애 복구 자동화(vSphere, AWS, Oracle 등)[7][8]</li><li><strong>실패 사례</strong>: 복제 Lag 방치, 장애 시 동기화 실패, 관리 복잡성 증가(적절한 모니터링 및 자동화 필수)[9][3]</li></ul><hr><h3 id=6단계-운영-및-최적화>6단계: 운영 및 최적화<a hidden class=anchor aria-hidden=true href=#6단계-운영-및-최적화>#</a></h3><h4 id=61-모니터링-및-관측성>6.1 모니터링 및 관측성<a hidden class=anchor aria-hidden=true href=#61-모니터링-및-관측성>#</a></h4><ul><li><strong>모니터링(Monitoring)</strong>: 복제 환경에서는 Master와 Replica의 상태, 복제 지연(Replication Lag), 트랜잭션 동기화, CPU·메모리 사용률, 오류 로그 등을 정기적으로 수집·분석합니다. 기본 임계값(예: 장애 상황, 오류율 등)을 설정하여 실시간 알람을 운영하며 장애 감지에 활용됩니다.[1][2][3]</li><li><strong>관측성(Observability)</strong>: 로그, 이벤트, 트랜잭션 트레이스 등 다양한 데이터 소스를 활용해 장애 발생 원인과 시스템 상태를 심층 분석합니다. 복잡한 분산·멀티 노드 환경에서 악화 경향, 트래픽 패턴, 지연 발생 원인을 진단하고 프로세스 개선에 이용합니다.[4][5][6]</li></ul><hr><h4 id=62-보안-및-컴플라이언스>6.2 보안 및 컴플라이언스<a hidden class=anchor aria-hidden=true href=#62-보안-및-컴플라이언스>#</a></h4><ul><li><strong>데이터 암호화</strong>: 저장·전송 데이터 모두 강력한 암호화(SSL/TLS, AES 등) 적용, Replica 간 통신도 암호화 필수.[7][8]</li><li><strong>접근 통제 및 인증</strong>: 복제 계정 접근 권한 최소화(Least Privilege), 복제 설정에서 strong password, 인증서 기반 인증 사용 권장.[7]</li><li><strong>데이터 삭제 및 컴플라이언스 준수</strong>: GDPR 등 개인정보 보관·삭제 정책 반영, Multi-Region Replication 통해 법적 요구 충족.[9]</li><li><strong>자동 취약점 스캔, 운영 로그 감사</strong>: 도구 연동으로 이미지·환경 취약점 주기적 검사.[10][8]</li></ul><hr><h4 id=63-성능-최적화-및-확장성>6.3 성능 최적화 및 확장성<a hidden class=anchor aria-hidden=true href=#63-성능-최적화-및-확장성>#</a></h4><ul><li><strong>읽기 트래픽 분산</strong>: Replica를 활용하여 Select 쿼리를 분산, 병목 최소화.[11][12][13]</li><li><strong>증분 복제/최적화</strong>: 변화된 데이터만 복제(Incremental Replication), Replica 수 최적화로 I/O 효율 극대화.[12]</li><li><strong>ReplicaLag 모니터링/최적화</strong>: 복제 지연 발생 시 I/O, SQL Thread 상태 분석 · 인스턴스 리소스 업그레이드 · 동적 서버 증설로 대응.[14][15]</li><li><strong>Auto Failover/오케스트레이션</strong>: 장애 시 자동 승격 및 재동기화, 운영 자동화 툴(Zabbix·Grafana·Prometheus 등) 연동.[2][16]</li></ul><hr><h4 id=64-트러블슈팅-및-문제-해결>6.4 트러블슈팅 및 문제 해결<a hidden class=anchor aria-hidden=true href=#64-트러블슈팅-및-문제-해결>#</a></h4><ul><li><strong>복제 지연(Lag) 해결</strong>: SHOW REPLICA STATUS, SHOW PROCESSLIST, InnoDB Engine Status 등으로 병목 분석→SQL/I/O Thread·락·리소스 상태 점검.[17][14]</li><li><strong>오류 발생 시</strong>: 인증 오류(SSL 인증서, strong password, caching_sha2_password 등), 복제 옵션/로그 설정 오류(Statement-Based/Row-Based 혼동), 장애 시 백업 스크립트 즉각 실행.[18][14]</li><li><strong>정기 검사</strong>: binlog 보존 기간 설정, read_only 모드 적용, 각 Replica 상태 주기적 검사.[14]</li><li><strong>자동화</strong>: 복제 상태·장애 감지·백업 프로세스 자동화 스크립트 구축 권장.[2]</li></ul><hr><h3 id=7단계-고급-주제-및-미래-전망>7단계: 고급 주제 및 미래 전망<a hidden class=anchor aria-hidden=true href=#7단계-고급-주제-및-미래-전망>#</a></h3><h4 id=71-현재-도전-과제-및-한계>7.1 현재 도전 과제 및 한계<a hidden class=anchor aria-hidden=true href=#71-현재-도전-과제-및-한계>#</a></h4><ul><li><strong>복제 지연(Replication Lag)</strong><ul><li>비동기 방식에서 Master와 Replica간 데이터 동기화가 지연되어, 실시간·정합성이 중요한 서비스에 한계 존재</li><li>장기 실행 쿼리, 쓰기 트래픽 폭증, 단일 스레드 처리 병목 등이 주요 원인[1][2]</li><li>Multi-threaded Replication, 쿼리 최적화, Replica 추가로 완화 가능[1]</li></ul></li><li><strong>이기종 환경 지원 제한</strong><ul><li>블록 단위 물리적 복제방식은 플랫폼, DB 엔진, OS 버전 불일치 시 복제 불가</li><li>논리적·스트리밍 복제로 점진적 해결 추세[3]</li></ul></li><li><strong>운영 복잡성과 비용</strong><ul><li>대규모 환경에서 장애복구, 지속적 모니터링, 백업·데이터 보안, 성능 최적화에 높은 운영 부담 및 비용 수반[4][5]</li></ul></li></ul><hr><h4 id=72-최신-트렌드-및-방향>7.2 최신 트렌드 및 방향<a hidden class=anchor aria-hidden=true href=#72-최신-트렌드-및-방향>#</a></h4><ul><li><strong>강화된 자동화 및 오케스트레이션</strong><ul><li>SRE(Service Reliability Engineering), DevOps와 연계한 자동 장애 전환, 복구, 오퍼레이션 자동화 확산[4]</li></ul></li><li><strong>클라우드 네이티브·다중 리전 복제</strong><ul><li>AWS/GCP/Azure 등 퍼블릭 클라우드 기반 글로벌 멀티리전 복제 및 Site Recovery 구현 사례 급증</li><li>객체·문서 기반 DB, NoSQL, 멀티ㆍ스트리밍 복제 믹스 구조 도입[5]</li></ul></li><li><strong>하이브리드 복제 및 새로운 복제 방식 도입</strong><ul><li>파일·블록 복제 통합형/스트리밍 기반 논리 복제 방식 확대(Repli-X 등 하이브리드 복제 솔루션)[6][7]</li></ul></li><li><strong>CDC(Change Data Capture) 및 이벤트 기반 동기화</strong><ul><li>Kafka Connect 등 스트림 기반 실시간 이벤트 복제가 데이터 파이프라인 주축으로 부상</li></ul></li></ul><hr><h4 id=73-대안-기술-및-경쟁-솔루션>7.3 대안 기술 및 경쟁 솔루션<a hidden class=anchor aria-hidden=true href=#73-대안-기술-및-경쟁-솔루션>#</a></h4><table><thead><tr><th>대안 명칭</th><th>특징</th><th>장단점</th><th>주요 사용 예시</th></tr></thead><tbody><tr><td>클러스터링(Clustering)</td><td>모든 노드가 쓰기·읽기 가능</td><td>일관성 강함, 장애·운영부담 ↑</td><td>금융, 실시간 트랜잭션</td></tr><tr><td>샤딩(Sharding)</td><td>데이터 세트 분할, 분산 저장</td><td>Scale-out 최적, 관리복잡·쿼리 일관성 ↓</td><td>SNS, 대용량 로그분석, 멀티테넌트</td></tr><tr><td>CDC(Change Data Capture)</td><td>이벤트 기반 동기화</td><td>실시간 처리, 장기 쿼리 대응, 복잡도 ↑</td><td>실시간 분석, ETL, 로그 스트림</td></tr><tr><td>멀티-마스터(Multi-Master)</td><td>모든 노드가 쓰기 가능</td><td>충돌관리 필수, 고가용성·분산작성에 강점</td><td>글로벌 백오피스, 협업 시스템</td></tr></tbody></table><p>[8][9][7][3]</p><hr><h4 id=75-연구-동향-및-혁신-기술>7.5 연구 동향 및 혁신 기술<a hidden class=anchor aria-hidden=true href=#75-연구-동향-및-혁신-기술>#</a></h4><ul><li><strong>AI/ML 기반 자동 복제 최적화</strong><ul><li>복제 지연, 장애 패턴 학습과 예측, AI 기반 오케스트레이션·모니터링 기술 적용 본격화[10][11]</li></ul></li><li><strong>에지 컴퓨팅·벡터 데이터베이스 연계</strong><ul><li>분산 환경에서 실시간 복제와 벡터 DB 연결(AI 추천, 멀티미디어 검색 등) 사례 증가[12]</li></ul></li><li><strong>스트리밍 복제·NoSQL 결합 구조 확대</strong><ul><li>RDBMS+NoSQL, 멀티모달, 이기종·하이브리드 클러스터 환경에 맞춘 논리/스트리밍 복제 방식 고도화</li></ul></li></ul><hr><h4 id=76-산업-생태계-변화-및-비즈니스-영향>7.6 산업 생태계 변화 및 비즈니스 영향<a hidden class=anchor aria-hidden=true href=#76-산업-생태계-변화-및-비즈니스-영향>#</a></h4><ul><li><strong>서비스 무중단·글로벌 확장 필수 인프라로 자리</strong><ul><li>데이터 복제·분산 기술이 SaaS, 금융, 게임, 미디어 등 고가용·무중단 서비스의 기반 기술로 산업 전반에서 채택[5][4]</li></ul></li><li><strong>복제 솔루션 전문 기업·플랫폼 성장, 오픈소스와 관리형 클라우드 시장 동반 성장</strong></li></ul><hr><h2 id=최종-정리-및-학습-가이드>최종 정리 및 학습 가이드<a hidden class=anchor aria-hidden=true href=#최종-정리-및-학습-가이드>#</a></h2><h3 id=내용-종합>내용 종합<a hidden class=anchor aria-hidden=true href=#내용-종합>#</a></h3><p>Replication(복제)은 분산 시스템의 핵심 아키텍처로서 데이터 정합성, 고가용성, 트래픽 분산, 장애 복구 등 현대 서비스의 필수 기반 기술입니다. Master-Replica, Multi-Source, Group Replication 방식과 CDC(Change Data Capture), 클러스터링, 샤딩 등 대안 기술을 복합적으로 활용하며, 자동화·클라우드·AI 최적화 등 최신 트렌드가 산업 전반으로 확산되고 있습니다.[1][2][3]</p><h3 id=실무-적용-가이드>실무 적용 가이드<a hidden class=anchor aria-hidden=true href=#실무-적용-가이드>#</a></h3><ul><li>복제 구조 설계 시 읽기/쓰기 분리, Replica 수, 장애 복구 전략 등 요구사항 분석 필수</li><li>복제 지연(Lag), 정합성, 이기종 환경 지원, 운영 자동화 등 문제에 대한 사전 모니터링 필요</li><li>암호화·접근제어·GDPR 등 보안·컴플라이언스 요구까지 반영</li><li>CDC, 클라우드 멀티리전, AI 자동화 등 최신 도구와 연동 고려</li></ul><h3 id=학습-로드맵>학습 로드맵<a hidden class=anchor aria-hidden=true href=#학습-로드맵>#</a></h3><ol><li><strong>기초</strong>: Replication 개념·목적·아키텍처(Phase 1~2)</li><li><strong>핵심</strong>: 구현 방식, DBMS별 실습, 트레이드오프·장단점(Phase 3~4)</li><li><strong>응용</strong>: 실제 구축·실무 사례, 통합 운영, 장애 복구 전략(Phase 5~6)</li><li><strong>고급</strong>: 대규모 환경, AI/클라우드 자동화, 산업 트렌드·연구 동향(Phase 7)</li></ol><h3 id=학습-항목-정리>학습 항목 정리<a hidden class=anchor aria-hidden=true href=#학습-항목-정리>#</a></h3><table><thead><tr><th>카테고리</th><th>Phase</th><th>항목</th><th>중요도</th><th>학습 목표</th><th>실무 연관성</th><th>설명</th></tr></thead><tbody><tr><td>기초</td><td>1</td><td>개념 정의, 등장배경</td><td>필수</td><td>핵심 목적·본질 파악</td><td>높음</td><td>분산·확장성 기술의 기본 이해</td></tr><tr><td>핵심</td><td>2</td><td>핵심 원리·구조</td><td>필수</td><td>시스템 구성 원리 습득</td><td>높음</td><td>Master-Replica·CDC 구조 습득</td></tr><tr><td>응용</td><td>5</td><td>실습·사례·운영</td><td>권장</td><td>실제 환경 설계와 트러블슈팅</td><td>중간</td><td>장애 복구·Failover·자동화 경험</td></tr><tr><td>고급</td><td>7</td><td>트렌드·연구·대안</td><td>선택</td><td>미래기술·산업 동향 탐색</td><td>낮음</td><td>AI·클라우드·하이브리드 구조</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>정의</th><th>관련 개념</th><th>실무 활용</th></tr></thead><tbody><tr><td>핵심</td><td>복제(Replication)</td><td>데이터를 여러 위치에 동기화, 분산·일관성 목적</td><td>분산시스템, Data Lake</td><td>부하 분산, 장애 복구</td></tr><tr><td>구현</td><td>마스터(Master)</td><td>쓰기 연산 담당 주서버</td><td>Primary, Source</td><td>트랜잭션 관리</td></tr><tr><td>구현</td><td>레플리카(Replica)</td><td>읽기/분석 연산 담당 보조서버</td><td>Slave, Standby</td><td>트래픽 분산, 분석</td></tr><tr><td>구현</td><td>복제지연(Lag)</td><td>Master-Replica간 데이터 적용 지연</td><td>일관성, 장애복구</td><td>모니터링, 성능 개선</td></tr><tr><td>운영</td><td>자동승격(Failover)</td><td>장애 시 Replica를 Master로 즉각 승격</td><td>HA, 장애 복구</td><td>무중단 서비스 구현</td></tr><tr><td>운영</td><td>CDC(Event Capture)</td><td>실시간 이벤트 기반 데이터 복제</td><td>Kafka Connect, ETL</td><td>실시간 분석, 데이터 파이프</td></tr><tr><td>고급</td><td>멀티마스터(Multi-Master)</td><td>모든 노드가 읽기·쓰기 가능한 복제 구조</td><td>Conflict Resolution</td><td>글로벌 협업, 고가용성</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><a href="https://translate.google.com/translate?u=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FReplication_%28computing%29&amp;hl=ko&amp;sl=en&amp;tl=ko&amp;client=srp">복제(컴퓨팅) - 위키피디아</a>[2]</li><li><a href=https://www.couchbase.com/ko/resources/concepts/%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B3%B5%EC%A0%9C/>데이터 복제 | Couchbase 공식 개념</a>[3]</li><li><a href=https://hyeon9mak.github.io/mysql-mariadb-replication-with-jpa/>MySQL(MariaDB) Replication with JPA</a>[1]</li><li><a href=https://docs.redhat.com/ko/documentation/red_hat_enterprise_linux_for_sap_solutions/9/html/automating_sap_hana_scale-up_system_replication_using_the_rhel_ha_add-on/asmb_configure_sap_hana_replication_v9-automating-sap-hana-scale-up-system-replication>SAP HANA 시스템 복제 공식 문서</a>[4]</li><li><a href=https://docs.aws.amazon.com/ko_kr/prescriptive-guidance/latest/aurora-replication-options/aurora-replication-options.pdf>AWS 권장 가이드 - Aurora 복제</a>[5]</li><li><a href=https://docs.redhat.com/ko/documentation/red_hat_directory_server/12/html/planning_and_designing_directory_server/assembly_designing-the-replication-process_designing-rhds>Red Hat Directory Server - 복제 프로세스 설계</a>[6]</li></ul><hr><p>네, 지금부터 &ldquo;Replication"에 대한 종합적인 조사를 체계적으로 수행하겠습니다. 단계별로 심층 분석을 진행하여 초심자부터 중급 실무자까지 활용할 수 있는 실무 중심의 내용을 구성해드리겠습니다.</p><h2 id=1단계-기본-분석-및-검증-1>1단계: 기본 분석 및 검증<a hidden class=anchor aria-hidden=true href=#1단계-기본-분석-및-검증-1>#</a></h2><h3 id=주제-유형-식별-1>주제 유형 식별<a hidden class=anchor aria-hidden=true href=#주제-유형-식별-1>#</a></h3><p><strong>E형(플랫폼/시스템형)</strong> - 분산 시스템 아키텍처와 데이터 관리 플랫폼의 핵심 메커니즘</p><h3 id=복잡도-평가-1>복잡도 평가<a hidden class=anchor aria-hidden=true href=#복잡도-평가-1>#</a></h3><p><strong>Level 3 (고급)</strong> - 분산 시스템 이론, 일관성 모델, 성능 최적화 등 다층적 복잡성 보유</p><h3 id=대표-태그-생성-1>대표 태그 생성<a hidden class=anchor aria-hidden=true href=#대표-태그-생성-1>#</a></h3><ul><li><strong>Data-Replication</strong></li><li><strong>Distributed-Systems</strong></li><li><strong>Consistency-Models</strong></li><li><strong>Fault-Tolerance</strong></li><li><strong>Scalability-Patterns</strong></li></ul><h3 id=분류-체계-검증-1>분류 체계 검증<a hidden class=anchor aria-hidden=true href=#분류-체계-검증-1>#</a></h3><p>현재 분류 &ldquo;Data & Database Systems > Data Architecture > Scalability & Distribution"는 적절합니다. 복제(Replication)는 확장성과 분산을 위한 핵심 아키텍처 패턴으로서 데이터 아키텍처의 핵심 구성 요소입니다.</p><h3 id=핵심-요약>핵심 요약<a hidden class=anchor aria-hidden=true href=#핵심-요약>#</a></h3><p>복제(Replication)는 데이터나 서비스를 여러 노드에 복사하여 가용성(Availability), 내결함성(Fault Tolerance), 성능(Performance)을 향상시키는 분산 시스템의 핵심 메커니즘입니다. 동기식(Synchronous), 비동기식(Asynchronous) 방식과 다양한 일관성 모델을 통해 CAP 정리의 트레이드오프를 관리합니다.</p><h3 id=전체-개요>전체 개요<a hidden class=anchor aria-hidden=true href=#전체-개요>#</a></h3><p>복제는 현대 분산 시스템과 클라우드 아키텍처의 필수 요소로, 단일 장애점(Single Point of Failure) 제거와 지리적 분산을 통한 응답 지연 최소화를 실현합니다. 마스터-슬레이브(Master-Slave), 멀티 마스터(Multi-Master), 피어-투-피어(Peer-to-Peer) 등 다양한 토폴로지와 강일관성(Strong Consistency), 최종 일관성(Eventual Consistency) 등의 일관성 모델을 조합하여 비즈니스 요구사항에 최적화된 솔루션을 설계할 수 있습니다.</p><h2 id=2단계-개념-체계화-및-검증-1>2단계: 개념 체계화 및 검증<a hidden class=anchor aria-hidden=true href=#2단계-개념-체계화-및-검증-1>#</a></h2><h3 id=핵심-개념-정리-1>핵심 개념 정리<a hidden class=anchor aria-hidden=true href=#핵심-개념-정리-1>#</a></h3><p><strong>복제(Replication)의 핵심 개념들:</strong></p><ol><li><strong>데이터 복제(Data Replication)</strong>: 동일한 데이터를 여러 위치에 저장</li><li><strong>복제 토폴로지(Replication Topology)</strong>: 복제 노드 간 관계 구조</li><li><strong>일관성 모델(Consistency Model)</strong>: 복제본 간 데이터 일치 보장 수준</li><li><strong>복제 지연(Replication Lag)</strong>: 원본과 복제본 간 시간 차이</li><li><strong>충돌 해결(Conflict Resolution)</strong>: 동시 업데이트 시 충돌 처리 방법</li></ol><h3 id=실무-연관성-분석-1>실무 연관성 분석<a hidden class=anchor aria-hidden=true href=#실무-연관성-분석-1>#</a></h3><p><strong>각 개념의 실무 구현 연관성:</strong></p><ul><li><p><strong>데이터 복제</strong>: 실무에서는 MySQL 마스터-슬레이브 설정, MongoDB 레플리카 셋, PostgreSQL 스트리밍 복제 등으로 구현되며, 백업/복구 전략과 읽기 성능 확장의 핵심이 됩니다.</p></li><li><p><strong>복제 토폴로지</strong>: 실무에서는 지리적 분산(Multi-Region), 트래픽 분산, 재해 복구(DR) 아키텍처 설계 시 네트워크 비용과 복제 복잡도를 결정하는 핵심 요소입니다.</p></li><li><p><strong>일관성 모델</strong>: 실무에서는 은행 시스템의 강일관성 vs SNS 서비스의 최종 일관성처럼 비즈니스 요구사항에 따라 선택되며, 성능과 정확성의 트레이드오프를 결정합니다.</p></li></ul><h2 id=3단계-phase별-상세-조사-및-검증>3단계: Phase별 상세 조사 및 검증<a hidden class=anchor aria-hidden=true href=#3단계-phase별-상세-조사-및-검증>#</a></h2><h3 id=phase-1-기초-조사-및-개념-정립-1>Phase 1: 기초 조사 및 개념 정립<a hidden class=anchor aria-hidden=true href=#phase-1-기초-조사-및-개념-정립-1>#</a></h3><h4 id=11-개념-정의-및-본질적-이해-1>1.1 개념 정의 및 본질적 이해<a hidden class=anchor aria-hidden=true href=#11-개념-정의-및-본질적-이해-1>#</a></h4><p>**복제(Replication)**는 동일한 데이터나 서비스를 여러 노드 또는 위치에 복사하여 저장하는 분산 시스템 기법입니다. 본질적으로는 <strong>단일 장애점(SPOF: Single Point of Failure) 제거</strong>와 <strong>성능 향상</strong>을 목표로 하는 내결함성(Fault Tolerance) 및 확장성(Scalability) 확보 메커니즘입니다.</p><h4 id=12-등장-배경-및-발전-과정-1>1.2 등장 배경 및 발전 과정<a hidden class=anchor aria-hidden=true href=#12-등장-배경-및-발전-과정-1>#</a></h4><p><strong>등장 배경:</strong></p><ul><li><strong>단일 시스템 한계</strong>: 1960년대 메인프레임 시대, 하드웨어 장애 시 전체 시스템 중단 문제</li><li><strong>성능 병목 해결</strong>: 중앙집중식 시스템의 처리 한계와 네트워크 지연 문제</li><li><strong>지리적 분산 요구</strong>: 글로벌 서비스 확산으로 인한 지역별 접근성 향상 필요</li></ul><p><strong>발전 과정:</strong></p><ul><li><strong>1970년대</strong>: IBM의 IMS/VS 데이터베이스에서 기본적인 백업 복제 개념 도입</li><li><strong>1980년대</strong>: Oracle 7.0에서 스냅샷 복제(Snapshot Replication) 기능 도입</li><li><strong>1990년대</strong>: 인터넷 확산과 함께 분산 데이터베이스 복제 기술 발전</li><li><strong>2000년대</strong>: 웹 서비스 급증으로 실시간 복제와 로드밸런싱 기술 고도화</li><li><strong>2010년대</strong>: NoSQL 데이터베이스 등장으로 최종 일관성 기반 복제 모델 확산</li><li><strong>2020년대</strong>: 클라우드 네이티브 환경에서 Kubernetes 기반 자동화된 복제 관리</li></ul><h4 id=13-해결하는-문제-및-핵심-목적-1>1.3 해결하는 문제 및 핵심 목적<a hidden class=anchor aria-hidden=true href=#13-해결하는-문제-및-핵심-목적-1>#</a></h4><p><strong>해결하는 핵심 문제:</strong></p><ol><li><strong>가용성(Availability) 문제</strong>: 하드웨어/소프트웨어 장애 시 서비스 중단 위험</li><li><strong>성능 병목(Performance Bottleneck)</strong>: 단일 노드의 처리 용량 한계</li><li><strong>지연시간(Latency) 문제</strong>: 물리적 거리로 인한 네트워크 지연</li><li><strong>확장성(Scalability) 한계</strong>: 단일 시스템의 수직 확장 제약</li><li><strong>재해 복구(Disaster Recovery)</strong>: 자연재해나 인프라 장애에 대한 대비책 부족</li></ol><p><strong>핵심 목적:</strong></p><ul><li><strong>99.9%+ 가용성 달성</strong>을 통한 서비스 안정성 확보</li><li><strong>읽기 성능 향상</strong>을 통한 사용자 경험 개선</li><li><strong>지리적 분산</strong>을 통한 글로벌 서비스 최적화</li><li><strong>내결함성 강화</strong>를 통한 비즈니스 연속성 보장</li></ul><h4 id=14-전제-조건-및-요구사항-1>1.4 전제 조건 및 요구사항<a hidden class=anchor aria-hidden=true href=#14-전제-조건-및-요구사항-1>#</a></h4><p><strong>기술적 전제 조건:</strong></p><ul><li><strong>네트워크 연결성</strong>: 복제 노드 간 안정적인 네트워크 통신 환경</li><li><strong>동기화 메커니즘</strong>: 트랜잭션 로그, WAL(Write-Ahead Logging) 등 변경 추적 시스템</li><li><strong>충돌 감지</strong>: 동시 업데이트 감지 및 해결 메커니즘</li><li><strong>복제 상태 모니터링</strong>: 복제 지연, 실패 감지 시스템</li></ul><p><strong>운영 요구사항:</strong></p><ul><li><strong>스토리지 용량</strong>: 원본 데이터 대비 2-5배 저장 공간 확보</li><li><strong>네트워크 대역폭</strong>: 변경 데이터 전송을 위한 충분한 대역폭</li><li><strong>관리 복잡성</strong>: 복제 토폴로지 설계 및 운영 전문성</li><li><strong>보안</strong>: 복제 채널 암호화 및 접근 제어</li></ul><h4 id=15-핵심-특징-기술적-근거-포함-다른-기술과의-차별점>1.5 핵심 특징 (기술적 근거 포함, 다른 기술과의 차별점)<a hidden class=anchor aria-hidden=true href=#15-핵심-특징-기술적-근거-포함-다른-기술과의-차별점>#</a></h4><p><strong>핵심 특징:</strong></p><ol><li><p><strong>데이터 중복성(Data Redundancy)</strong></p><ul><li><strong>기술적 근거</strong>: RAID와 달리 네트워크를 통한 논리적 분산으로 노드 간 독립성 확보</li><li><strong>차별점</strong>: 단순 백업과 달리 실시간 동기화로 즉시 서비스 전환 가능</li></ul></li><li><p><strong>투명성(Transparency)</strong></p><ul><li><strong>기술적 근거</strong>: 클라이언트가 복제 구조를 인식하지 않고도 서비스 이용 가능</li><li><strong>차별점</strong>: 샤딩(Sharding)과 달리 동일한 데이터에 대한 투명한 접근 제공</li></ul></li><li><p><strong>일관성 제어(Consistency Control)</strong></p><ul><li><strong>기술적 근거</strong>: 벡터 클럭(Vector Clock), 타임스탬프 기반 순서 보장</li><li><strong>차별점</strong>: 단순 캐싱과 달리 데이터 정합성 보장 메커니즘 내장</li></ul></li><li><p><strong>동적 확장성(Dynamic Scalability)</strong></p><ul><li><strong>기술적 근거</strong>: 런타임에 복제본 추가/제거 가능한 유연한 아키텍처</li><li><strong>차별점</strong>: 로드밸런서와 달리 데이터 상태까지 분산 관리</li></ul></li></ol><h4 id=16-시스템-요구사항-및-하드웨어-의존성>1.6 시스템 요구사항 및 하드웨어 의존성<a hidden class=anchor aria-hidden=true href=#16-시스템-요구사항-및-하드웨어-의존성>#</a></h4><p><strong>시스템 요구사항:</strong></p><ul><li><strong>CPU</strong>: 복제 동기화 프로세스를 위한 멀티코어 프로세서 권장</li><li><strong>메모리</strong>: 복제 버퍼링을 위한 원본 데이터 대비 10-30% 추가 메모리</li><li><strong>네트워크</strong>: 최소 1Gbps, 지리적 분산 시 전용선 또는 VPN 권장</li><li><strong>스토리지</strong>: SSD 권장, 복제 로그 저장을 위한 별도 파티션</li></ul><p><strong>하드웨어 의존성:</strong></p><ul><li><strong>시계 동기화</strong>: NTP(Network Time Protocol)를 통한 정확한 시간 동기화 필수</li><li><strong>네트워크 안정성</strong>: 패킷 손실 1% 미만, RTT(Round Trip Time) 100ms 이하 권장</li><li><strong>전력 안정성</strong>: UPS(Uninterruptible Power Supply)를 통한 전력 안정성 확보</li></ul><h3 id=phase-2-핵심-원리-및-이론적-기반-1>Phase 2: 핵심 원리 및 이론적 기반<a hidden class=anchor aria-hidden=true href=#phase-2-핵심-원리-및-이론적-기반-1>#</a></h3><h4 id=21-핵심-원칙-및-설계-철학-1>2.1 핵심 원칙 및 설계 철학<a hidden class=anchor aria-hidden=true href=#21-핵심-원칙-및-설계-철학-1>#</a></h4><p><strong>복제의 핵심 원칙:</strong></p><ol><li><p><strong>투명성 원칙(Transparency Principle)</strong></p><ul><li>클라이언트는 복제 구조를 인식하지 않고 단일 시스템처럼 사용</li><li>복제본 간 전환이 사용자에게 투명하게 처리되어야 함</li></ul></li><li><p><strong>일관성 원칙(Consistency Principle)</strong></p><ul><li>모든 복제본이 동일한 논리적 상태를 유지해야 함</li><li>일관성 수준은 비즈니스 요구사항에 따라 조절 가능</li></ul></li><li><p><strong>가용성 원칙(Availability Principle)</strong></p><ul><li>일부 노드 장애 시에도 서비스 지속 제공</li><li>적어도 하나의 건전한 복제본이 존재하면 서비스 유지</li></ul></li><li><p><strong>분할 내성 원칙(Partition Tolerance Principle)</strong></p><ul><li>네트워크 분할 상황에서도 각 파티션이 독립적으로 동작</li><li>분할 해결 후 데이터 병합 메커니즘 제공</li></ul></li></ol><p><strong>설계 철학:</strong></p><ul><li><strong>CAP 정리 기반 트레이드오프</strong>: 일관성(Consistency), 가용성(Availability), 분할 내성(Partition Tolerance) 중 최대 2가지만 완전히 보장 가능</li><li><strong>ACID vs BASE</strong>: 강일관성(ACID) vs 최종일관성(BASE) 선택적 적용</li><li><strong>복제 vs 샤딩</strong>: 데이터 중복 vs 데이터 분할의 상호 보완적 활용</li></ul><h4 id=22-기본-동작-원리-및-메커니즘>2.2 기본 동작 원리 및 메커니즘<a hidden class=anchor aria-hidden=true href=#22-기본-동작-원리-및-메커니즘>#</a></h4><pre class=mermaid>graph TB
    Client[클라이언트]
    
    subgraph &#34;복제 시스템&#34;
        Master[마스터 노드&lt;br/&gt;Primary Replica]
        Slave1[슬레이브 노드 1&lt;br/&gt;Secondary Replica]
        Slave2[슬레이브 노드 2&lt;br/&gt;Secondary Replica]
        
        Master --&gt; |복제 로그 전송| Slave1
        Master --&gt; |복제 로그 전송| Slave2
        
        Slave1 --&gt; |상태 보고| Master
        Slave2 --&gt; |상태 보고| Master
    end
    
    Client --&gt; |쓰기 요청| Master
    Client --&gt; |읽기 요청| Slave1
    Client --&gt; |읽기 요청| Slave2
    
    LoadBalancer[로드 밸런서]
    Client --&gt; LoadBalancer
    LoadBalancer --&gt; Master
    LoadBalancer --&gt; Slave1
    LoadBalancer --&gt; Slave2
</pre><p><strong>동작 메커니즘:</strong></p><ol><li><p><strong>쓰기 처리 과정</strong>:</p><ul><li>클라이언트가 마스터 노드에 쓰기 요청 전송</li><li>마스터가 로컬에 변경사항 적용</li><li>변경 로그(Change Log)를 슬레이브 노드들에게 전송</li><li>슬레이브들이 변경사항 적용 후 ACK 응답</li></ul></li><li><p><strong>읽기 처리 과정</strong>:</p><ul><li>클라이언트가 가용한 복제본에서 데이터 읽기</li><li>로드밸런서를 통한 자동 라우팅</li><li>복제 지연 고려한 읽기 일관성 선택</li></ul></li><li><p><strong>장애 감지 및 복구</strong>:</p><ul><li>하트비트(Heartbeat) 메커니즘을 통한 노드 상태 모니터링</li><li>마스터 장애 시 슬레이브 승격(Failover)</li><li>장애 노드 복구 시 차분 동기화(Delta Sync)</li></ul></li></ol><h4 id=23-데이터-및-제어-흐름>2.3 데이터 및 제어 흐름<a hidden class=anchor aria-hidden=true href=#23-데이터-및-제어-흐름>#</a></h4><p><strong>데이터 흐름 생명주기:</strong></p><pre class=mermaid>sequenceDiagram
    participant C as 클라이언트
    participant M as 마스터
    participant S1 as 슬레이브1  
    participant S2 as 슬레이브2
    
    Note over C,S2: 1. 동기식 복제 시나리오
    C-&gt;&gt;M: 쓰기 요청 (데이터 X)
    M-&gt;&gt;M: 로컬 트랜잭션 시작
    M-&gt;&gt;S1: 복제 로그 전송
    M-&gt;&gt;S2: 복제 로그 전송
    S1-&gt;&gt;S1: 변경사항 적용
    S2-&gt;&gt;S2: 변경사항 적용
    S1-&gt;&gt;M: ACK 응답
    S2-&gt;&gt;M: ACK 응답
    M-&gt;&gt;M: 트랜잭션 커밋
    M-&gt;&gt;C: 쓰기 완료 응답
    
    Note over C,S2: 2. 읽기 분산
    C-&gt;&gt;S1: 읽기 요청
    S1-&gt;&gt;C: 데이터 응답
</pre><p><strong>제어 흐름:</strong></p><ol><li><p><strong>복제 상태 관리</strong>:</p><ul><li>각 노드의 복제 지연(Lag) 모니터링</li><li>복제 무결성 검증 (체크섬, 해시)</li><li>복제 토폴로지 동적 재구성</li></ul></li><li><p><strong>충돌 해결 메커니즘</strong>:</p><ul><li>타임스탬프 기반 최신 우선(Last-Write-Wins)</li><li>벡터 클럭을 통한 인과관계 추적</li><li>애플리케이션 레벨 사용자 정의 해결</li></ul></li><li><p><strong>복제 제어 정책</strong>:</p><ul><li>복제 팩터(Replication Factor) 동적 조정</li><li>지역별 복제본 배치 최적화</li><li>복제 우선순위 및 QoS 관리</li></ul></li></ol><h4 id=24-구조-및-구성-요소>2.4 구조 및 구성 요소<a hidden class=anchor aria-hidden=true href=#24-구조-및-구성-요소>#</a></h4><p><strong>복제 시스템 아키텍처:</strong></p><pre class=mermaid>graph TB
    subgraph &#34;클라이언트 계층&#34;
        App[애플리케이션]
        Driver[데이터베이스 드라이버]
    end
    
    subgraph &#34;복제 관리 계층&#34;
        RM[복제 관리자&lt;br/&gt;Replication Manager]
        CM[설정 관리자&lt;br/&gt;Configuration Manager]
        MM[모니터링 관리자&lt;br/&gt;Monitoring Manager]
    end
    
    subgraph &#34;복제 노드 계층&#34;
        subgraph &#34;마스터 노드&#34;
            ME[마스터 엔진]
            BL[바이너리 로그]
            TC[트랜잭션 컨트롤러]
        end
        
        subgraph &#34;슬레이브 노드 1&#34;
            SE1[슬레이브 엔진]
            RL1[릴레이 로그]
            SA1[SQL 적용기]
        end
        
        subgraph &#34;슬레이브 노드 2&#34;
            SE2[슬레이브 엔진]
            RL2[릴레이 로그]
            SA2[SQL 적용기]
        end
    end
    
    subgraph &#34;네트워크 계층&#34;
        NW[네트워크 통신]
        SEC[보안/암호화]
    end
    
    App --&gt; Driver
    Driver --&gt; RM
    RM --&gt; CM
    RM --&gt; MM
    
    RM --&gt; ME
    ME --&gt; BL
    BL --&gt; TC
    
    ME --&gt; |복제 스트림| SE1
    ME --&gt; |복제 스트림| SE2
    
    SE1 --&gt; RL1
    RL1 --&gt; SA1
    
    SE2 --&gt; RL2
    RL2 --&gt; SA2
    
    SE1 --&gt; |상태 보고| ME
    SE2 --&gt; |상태 보고| ME
    
    ME -.-&gt; NW
    SE1 -.-&gt; NW
    SE2 -.-&gt; NW
    
    NW --&gt; SEC
</pre><p><strong>핵심 구성 요소:</strong></p><ol><li><p><strong>복제 관리자(Replication Manager)</strong></p><ul><li>복제 토폴로지 관리 및 동적 재구성</li><li>장애 감지 및 자동 복구 (Failover/Failback)</li><li>복제 정책 적용 및 QoS 관리</li></ul></li><li><p><strong>바이너리 로그 시스템(Binary Log System)</strong></p><ul><li>변경사항을 순차적으로 기록하는 WAL(Write-Ahead Log)</li><li>로그 순환(Log Rotation) 및 압축</li><li>포인트-인-타임 복구(PITR) 지원</li></ul></li><li><p><strong>복제 에이전트(Replication Agent)</strong></p><ul><li>마스터-슬레이브 간 데이터 전송 관리</li><li>네트워크 장애 시 재연결 및 재동기화</li><li>복제 지연 모니터링 및 최적화</li></ul></li><li><p><strong>충돌 해결기(Conflict Resolver)</strong></p><ul><li>동시 업데이트 충돌 감지</li><li>비즈니스 규칙 기반 자동 해결</li><li>수동 개입 필요 시 알림 시스템</li></ul></li></ol><h4 id=25-시스템-아키텍처-및-서비스-모델>2.5 시스템 아키텍처 및 서비스 모델<a hidden class=anchor aria-hidden=true href=#25-시스템-아키텍처-및-서비스-모델>#</a></h4><p><strong>서비스 모델 유형:</strong></p><ol><li><p><strong>Infrastructure as a Service (IaaS) 모델</strong></p><ul><li>AWS RDS Multi-AZ, Google Cloud SQL 등</li><li>하드웨어 추상화 및 자동 복제 관리</li><li>사용자는 복제 정책만 설정</li></ul></li><li><p><strong>Platform as a Service (PaaS) 모델</strong></p><ul><li>MongoDB Atlas, Azure Cosmos DB 등</li><li>애플리케이션 레벨 복제 설정</li><li>글로벌 분산 및 자동 확장</li></ul></li><li><p><strong>Software as a Service (SaaS) 모델</strong></p><ul><li>Salesforce, Office 365 등</li><li>사용자에게 완전히 투명한 복제</li><li>서비스 수준 보장(SLA) 기반 관리</li></ul></li></ol><p><strong>시스템 아키텍처 패턴:</strong></p><pre class=mermaid>graph TB
    subgraph &#34;멀티-티어 복제 아키텍처&#34;
        subgraph &#34;프론트엔드 계층&#34;
            LB[로드 밸런서]
            CDN[CDN 캐시]
        end
        
        subgraph &#34;애플리케이션 계층&#34;
            App1[애플리케이션 서버 1]
            App2[애플리케이션 서버 2]
            App3[애플리케이션 서버 3]
        end
        
        subgraph &#34;데이터 계층&#34;
            subgraph &#34;Region 1&#34;
                M1[마스터 DB]
                S1[슬레이브 DB]
            end
            
            subgraph &#34;Region 2&#34;
                M2[마스터 DB]
                S2[슬레이브 DB]
            end
            
            subgraph &#34;Region 3&#34;
                S3[읽기 전용 복제본]
                S4[읽기 전용 복제본]
            end
        end
    end
    
    CDN --&gt; LB
    LB --&gt; App1
    LB --&gt; App2
    LB --&gt; App3
    
    App1 --&gt; M1
    App2 --&gt; M2
    App3 --&gt; S3
    
    M1 &lt;--&gt; M2
    M1 --&gt; S1
    M2 --&gt; S2
    M1 --&gt; S3
    M2 --&gt; S4
</pre><p>이러한 아키텍처는 지리적 분산, 읽기/쓰기 분리, 계층별 캐싱을 통해 성능과 가용성을 최적화합니다.</p><p>이어서 Phase 3부터 계속 진행하겠습니다. 특성 분석과 평가 단계를 통해 복제 기술의 장단점과 트레이드오프를 심층 분석해보겠습니다.</p><h3 id=phase-3-특성-분석-및-평가>Phase 3: 특성 분석 및 평가<a hidden class=anchor aria-hidden=true href=#phase-3-특성-분석-및-평가>#</a></h3><h4 id=31-주요-장점-및-이점-1>3.1 주요 장점 및 이점<a hidden class=anchor aria-hidden=true href=#31-주요-장점-및-이점-1>#</a></h4><table><thead><tr><th>장점</th><th>상세 설명</th><th>기술 근거</th><th>적용 상황</th><th>실무적 가치</th></tr></thead><tbody><tr><td>고가용성 확보</td><td>단일 장애점 제거로 99.9%+ 가용성 달성</td><td>다중 복제본을 통한 자동 장애 전환(Failover)</td><td>미션 크리티컬 시스템, 24/7 서비스</td><td>서비스 중단 시간 최소화로 비즈니스 손실 방지</td></tr><tr><td>읽기 성능 향상</td><td>복제본 분산을 통한 읽기 처리량 증가</td><td>로드 분산으로 단일 노드 부하 감소</td><td>읽기 중심 워크로드, 대용량 조회 서비스</td><td>응답 시간 30-70% 단축, 사용자 경험 개선</td></tr><tr><td>지리적 분산 최적화</td><td>사용자 인근 복제본 배치로 지연 시간 감소</td><td>물리적 거리 단축으로 네트워크 RTT 최소화</td><td>글로벌 서비스, 멀티 리전 배포</td><td>지역별 응답 시간 50% 이상 개선</td></tr><tr><td>확장성 향상</td><td>읽기 전용 복제본 추가로 선형적 확장</td><td>수평 확장을 통한 처리 용량 증가</td><td>트래픽 증가 대응, 계절성 워크로드</td><td>하드웨어 투자 최적화, 탄력적 확장</td></tr><tr><td>데이터 보호 강화</td><td>실시간 백업과 재해 복구 능력 제공</td><td>지속적인 데이터 동기화로 RPO 최소화</td><td>규제 준수, 재해 복구 계획</td><td>데이터 손실 위험 95% 이상 감소</td></tr><tr><td>읽기/쓰기 분리</td><td>읽기와 쓰기 워크로드의 독립적 최적화</td><td>마스터-슬레이브 구조로 역할 분담</td><td>OLTP/OLAP 분리, 리포팅 시스템</td><td>운영 DB 성능 영향 없이 분석 작업 수행</td></tr></tbody></table><h4 id=32-단점-및-제약사항-1>3.2 단점 및 제약사항<a hidden class=anchor aria-hidden=true href=#32-단점-및-제약사항-1>#</a></h4><p><strong>단점:</strong></p><table><thead><tr><th>단점</th><th>상세 설명</th><th>원인</th><th>실무에서 발생되는 문제</th><th>완화/해결 방안</th><th>대안 기술</th></tr></thead><tbody><tr><td>데이터 일관성 복잡성</td><td>복제본 간 일시적 불일치 발생</td><td>네트워크 지연과 비동기 복제</td><td>중복 결제, 재고 부정확 등 비즈니스 로직 오류</td><td>강일관성 모드 사용, 애플리케이션 레벨 검증</td><td>분산 트랜잭션, 합의 알고리즘</td></tr><tr><td>복제 지연 문제</td><td>마스터-슬레이브 간 데이터 동기화 지연</td><td>네트워크 대역폭, 디스크 I/O 한계</td><td>읽기 후 즉시 쓰기 시 데이터 부재</td><td>읽기 선호도 설정, 세션 어피니티</td><td>동기식 복제, 분산 캐시</td></tr><tr><td>관리 복잡성 증가</td><td>복제 토폴로지 설계 및 운영의 복잡성</td><td>노드 간 상호 의존성과 상태 관리</td><td>운영 부담 증가, 장애 대응 시간 연장</td><td>자동화 도구 도입, 모니터링 강화</td><td>관리형 서비스, 클라우드 네이티브</td></tr><tr><td>분할 뇌 위험</td><td>네트워크 분할 시 다중 마스터 동시 존재</td><td>분산 시스템의 CAP 정리 제약</td><td>데이터 충돌, 무결성 위반</td><td>Quorum 기반 합의, 중재자 노드</td><td>합의 알고리즘, 단일 마스터 강제</td></tr><tr><td>쓰기 성능 오버헤드</td><td>복제본 동기화로 인한 쓰기 지연 증가</td><td>복제 로그 생성 및 전송 오버헤드</td><td>쓰기 중심 애플리케이션 성능 저하</td><td>비동기 복제, 배치 처리</td><td>샤딩, 쓰기 최적화 데이터베이스</td></tr></tbody></table><p><strong>제약사항:</strong></p><table><thead><tr><th>제약사항</th><th>상세 설명</th><th>원인</th><th>영향</th><th>완화/해결 방안</th><th>대안 기술</th></tr></thead><tbody><tr><td>네트워크 의존성</td><td>안정적인 네트워크 연결 필수</td><td>복제본 간 실시간 통신 요구</td><td>네트워크 장애 시 복제 중단</td><td>다중 네트워크 경로, 오프라인 모드</td><td>로컬 캐싱, 이벤트 소싱</td></tr><tr><td>스토리지 비용 증가</td><td>복제 팩터만큼 저장 공간 배수 증가</td><td>동일 데이터의 다중 저장</td><td>운영 비용 2-5배 증가</td><td>압축, 중복 제거, 계층별 저장</td><td>이레이저 코딩, 블록 레벨 복제</td></tr><tr><td>트랜잭션 격리 한계</td><td>복제본 간 트랜잭션 격리 레벨 제약</td><td>분산 환경에서의 ACID 보장 한계</td><td>동시성 제어 복잡성, 데드락 위험</td><td>낙관적 잠금, 스냅샷 격리</td><td>분산 트랜잭션 관리자</td></tr><tr><td>버전 호환성 제약</td><td>복제본 간 소프트웨어 버전 일치 필요</td><td>바이너리 로그 포맷 의존성</td><td>점진적 업그레이드 제약</td><td>버전 호환 모드, 롤링 업그레이드</td><td>마이크로서비스, API 기반 통신</td></tr><tr><td>보안 복잡성</td><td>복제 채널 보안 및 다중 접근점 관리</td><td>네트워크를 통한 데이터 전송</td><td>보안 취약점 확대, 관리 부담</td><td>전송 암호화, 접근 제어 자동화</td><td>Zero Trust 아키텍처</td></tr></tbody></table><h4 id=33-트레이드오프-관계-분석-1>3.3 트레이드오프 관계 분석<a hidden class=anchor aria-hidden=true href=#33-트레이드오프-관계-분석-1>#</a></h4><p><strong>핵심 트레이드오프:</strong></p><ol><li><p><strong>일관성 vs 가용성 (Consistency vs Availability)</strong></p><ul><li><strong>강일관성</strong>: 모든 노드가 동일한 데이터 보장 → 네트워크 분할 시 서비스 중단 위험</li><li><strong>최종일관성</strong>: 높은 가용성 보장 → 일시적 데이터 불일치 허용</li><li><strong>고려 기준</strong>: 비즈니스 중요도, 데이터 정확성 요구 수준, 서비스 중단 허용도</li></ul></li><li><p><strong>성능 vs 내구성 (Performance vs Durability)</strong></p><ul><li><strong>동기식 복제</strong>: 높은 내구성, 즉시 일관성 → 쓰기 성능 저하</li><li><strong>비동기식 복제</strong>: 높은 성능 → 데이터 손실 위험, 복제 지연</li><li><strong>고려 기준</strong>: 데이터 중요도, 성능 요구사항, RPO/RTO 목표</li></ul></li><li><p><strong>비용 vs 안정성 (Cost vs Reliability)</strong></p><ul><li><strong>고복제 팩터</strong>: 높은 안정성, 빠른 복구 → 저장 비용 증가</li><li><strong>저복제 팩터</strong>: 비용 절약 → 장애 위험 증가, 복구 시간 연장</li><li><strong>고려 기준</strong>: 예산 제약, 비즈니스 영향도, SLA 요구사항</li></ul></li></ol><p><strong>트레이드오프 결정 매트릭스:</strong></p><table><thead><tr><th>시나리오</th><th>일관성</th><th>가용성</th><th>성능</th><th>비용</th><th>권장 접근법</th></tr></thead><tbody><tr><td>금융 거래 시스템</td><td>높음</td><td>높음</td><td>중간</td><td>높음</td><td>동기식 복제 + Quorum</td></tr><tr><td>소셜 미디어</td><td>낮음</td><td>높음</td><td>높음</td><td>중간</td><td>비동기식 복제 + CDN</td></tr><tr><td>전자상거래</td><td>중간</td><td>높음</td><td>높음</td><td>중간</td><td>하이브리드 복제</td></tr><tr><td>IoT 센서 데이터</td><td>낮음</td><td>중간</td><td>높음</td><td>낮음</td><td>최종일관성 복제</td></tr><tr><td>기업 ERP</td><td>높음</td><td>중간</td><td>중간</td><td>중간</td><td>동기식 복제 + 백업</td></tr></tbody></table><h4 id=34-적용-적합성-평가-1>3.4 적용 적합성 평가<a hidden class=anchor aria-hidden=true href=#34-적용-적합성-평가-1>#</a></h4><p><strong>적합한 적용 영역:</strong></p><ol><li><p><strong>읽기 중심 워크로드</strong></p><ul><li>전자상거래 상품 카탈로그, 뉴스/미디어 사이트</li><li>읽기:쓰기 비율 80:20 이상인 서비스</li><li>복제본을 통한 읽기 분산으로 성능 향상 극대화</li></ul></li><li><p><strong>지리적 분산 서비스</strong></p><ul><li>글로벌 CDN, 멀티 리전 클라우드 서비스</li><li>지역별 규제 준수가 필요한 서비스</li><li>사용자 근접성을 통한 지연 시간 최소화 중요</li></ul></li><li><p><strong>고가용성 필수 시스템</strong></p><ul><li>의료 정보 시스템, 공공 안전 시스템</li><li>99.9% 이상 가용성 요구사항</li><li>장애 허용 시간이 분 단위 이하</li></ul></li></ol><p><strong>부적합한 적용 영역:</strong></p><ol><li><p><strong>쓰기 집약적 워크로드</strong></p><ul><li>실시간 트레이딩 시스템, 로그 수집 시스템</li><li>쓰기:읽기 비율 70:30 이상</li><li>복제 오버헤드가 성능 이익보다 큰 경우</li></ul></li><li><p><strong>강일관성 필수 시나리오</strong></p><ul><li>계좌 잔고 관리, 재고 관리 시스템</li><li>즉시 일관성이 비즈니스 로직에 필수</li><li>분산 트랜잭션이나 합의 알고리즘이 더 적합</li></ul></li><li><p><strong>리소스 제약 환경</strong></p><ul><li>임베디드 시스템, IoT 디바이스</li><li>네트워크 대역폭이나 저장 공간 제약</li><li>단순한 백업 전략이 더 효율적</li></ul></li></ol><h4 id=35-확장성-vs-복잡성-비용-분석>3.5 확장성 vs 복잡성, 비용 분석<a hidden class=anchor aria-hidden=true href=#35-확장성-vs-복잡성-비용-분석>#</a></h4><p><strong>확장성 분석:</strong></p><pre class=mermaid>graph LR
    subgraph &#34;수평 확장성&#34;
        R1[1개 복제본&lt;br/&gt;100% 처리량]
        R2[2개 복제본&lt;br/&gt;180% 처리량]
        R3[3개 복제본&lt;br/&gt;250% 처리량]
        R4[4개 복제본&lt;br/&gt;300% 처리량]
    end
    
    subgraph &#34;복잡성 증가&#34;
        C1[단순 구조&lt;br/&gt;기본 관리]
        C2[중간 복잡성&lt;br/&gt;로드밸런싱]
        C3[높은 복잡성&lt;br/&gt;충돌 해결]
        C4[매우 높은 복잡성&lt;br/&gt;분할 관리]
    end
    
    R1 --&gt; C1
    R2 --&gt; C2
    R3 --&gt; C3
    R4 --&gt; C4
</pre><p><strong>비용 구조 분석:</strong></p><ol><li><p><strong>초기 구축 비용</strong></p><ul><li>하드웨어: 복제 팩터 × 원본 비용</li><li>네트워크: 대역폭 확장 및 보안 인프라</li><li>소프트웨어: 복제 관리 도구 라이센스</li><li>인력: 분산 시스템 전문가 채용/교육</li></ul></li><li><p><strong>운영 비용</strong></p><ul><li>전력/쿨링: 서버 대수 증가에 따른 비용</li><li>네트워크: 지속적인 복제 트래픽 비용</li><li>관리: 24/7 모니터링 및 운영 인력</li><li>보안: 다중 접점 보안 관리 비용</li></ul></li><li><p><strong>TCO (Total Cost of Ownership) 모델</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1>1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2>2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>TCO = (초기 하드웨어 × RF) + (네트워크 비용 × 3년) + (운영 인력 × 3년) + (장애 비용 × 확률)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>여기서 RF(Replication Factor) = 복제 팩터
</span></span></code></pre></td></tr></table></div></div></li></ol><p><strong>ROI 계산 예시:</strong></p><ul><li><strong>투자</strong>: 복제 팩터 3, 연간 200만원 추가 비용</li><li><strong>수익</strong>: 99.9% → 99.99% 가용성 향상으로 연간 500만원 손실 방지</li><li><strong>ROI</strong>: (500-200)/200 × 100 = 150%</li></ul><p>이러한 분석을 통해 복제 기술의 특성을 객관적으로 평가할 수 있으며, 다음 Phase 4에서는 구체적인 구현 방법과 분류 체계를 다루겠습니다.</p><h3 id=phase-4-구현-방법-및-분류>Phase 4: 구현 방법 및 분류<a hidden class=anchor aria-hidden=true href=#phase-4-구현-방법-및-분류>#</a></h3><h4 id=41-구현-방법-및-기법-1>4.1 구현 방법 및 기법<a hidden class=anchor aria-hidden=true href=#41-구현-방법-및-기법-1>#</a></h4><p><strong>1. 동기식 복제 (Synchronous Replication)</strong></p><ul><li><strong>정의</strong>: 마스터가 모든 복제본에 변경사항을 적용한 후 클라이언트에 응답하는 방식</li><li><strong>특징</strong>: 강일관성 보장, 높은 내구성, 성능 오버헤드 존재</li><li><strong>목적</strong>: 데이터 무결성이 최우선인 미션 크리티컬 시스템</li><li><strong>사용 상황</strong>: 금융 거래, 의료 기록, 법적 문서 관리</li><li><strong>예시</strong>: MySQL의 Semi-Synchronous Replication, PostgreSQL의 Synchronous Streaming</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1> 1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2> 2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3> 3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4> 4</a>
</span><span class=lnt id=hl-12-5><a class=lnlinks href=#hl-12-5> 5</a>
</span><span class=lnt id=hl-12-6><a class=lnlinks href=#hl-12-6> 6</a>
</span><span class=lnt id=hl-12-7><a class=lnlinks href=#hl-12-7> 7</a>
</span><span class=lnt id=hl-12-8><a class=lnlinks href=#hl-12-8> 8</a>
</span><span class=lnt id=hl-12-9><a class=lnlinks href=#hl-12-9> 9</a>
</span><span class=lnt id=hl-12-10><a class=lnlinks href=#hl-12-10>10</a>
</span><span class=lnt id=hl-12-11><a class=lnlinks href=#hl-12-11>11</a>
</span><span class=lnt id=hl-12-12><a class=lnlinks href=#hl-12-12>12</a>
</span><span class=lnt id=hl-12-13><a class=lnlinks href=#hl-12-13>13</a>
</span><span class=lnt id=hl-12-14><a class=lnlinks href=#hl-12-14>14</a>
</span><span class=lnt id=hl-12-15><a class=lnlinks href=#hl-12-15>15</a>
</span><span class=lnt id=hl-12-16><a class=lnlinks href=#hl-12-16>16</a>
</span><span class=lnt id=hl-12-17><a class=lnlinks href=#hl-12-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># MySQL 동기식 복제 설정 예시</span>
</span></span><span class=line><span class=cl><span class=c1># 마스터 설정 (my.cnf)</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>[mysqld]
</span></span></span><span class=line><span class=cl><span class=s2>server-id = 1
</span></span></span><span class=line><span class=cl><span class=s2>log-bin = mysql-bin
</span></span></span><span class=line><span class=cl><span class=s2>rpl_semi_sync_master_enabled = 1
</span></span></span><span class=line><span class=cl><span class=s2>rpl_semi_sync_master_timeout = 1000  # 1초 타임아웃
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 슬레이브 설정</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>[mysqld]
</span></span></span><span class=line><span class=cl><span class=s2>server-id = 2
</span></span></span><span class=line><span class=cl><span class=s2>relay-log = relay-bin
</span></span></span><span class=line><span class=cl><span class=s2>rpl_semi_sync_slave_enabled = 1
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>2. 비동기식 복제 (Asynchronous Replication)</strong></p><ul><li><strong>정의</strong>: 마스터가 로컬 변경 후 즉시 응답하고, 복제본 동기화는 별도 진행</li><li><strong>특징</strong>: 높은 성능, 복제 지연 발생 가능, 최종일관성</li><li><strong>목적</strong>: 성능 중심의 읽기 확장과 가용성 향상</li><li><strong>사용 상황</strong>: 웹 애플리케이션, 캐싱 시스템, 로그 수집</li><li><strong>예시</strong>: MongoDB 레플리카 셋, Redis 마스터-슬레이브, MySQL 비동기 복제</li></ul><p><strong>3. 반동기식 복제 (Semi-Synchronous Replication)</strong></p><ul><li><strong>정의</strong>: 최소 하나의 슬레이브에서 수신 확인 후 클라이언트 응답</li><li><strong>특징</strong>: 성능과 내구성의 균형, 하이브리드 접근법</li><li><strong>목적</strong>: 적절한 수준의 보장성과 성능 확보</li><li><strong>사용 상황</strong>: 전자상거래, 기업 애플리케이션, SaaS 서비스</li><li><strong>예시</strong>: MySQL Semi-Sync, PostgreSQL 동기 커밋</li></ul><p><strong>4. 다중 마스터 복제 (Multi-Master Replication)</strong></p><ul><li><strong>정의</strong>: 여러 노드가 동시에 쓰기를 수용하고 상호 복제하는 방식</li><li><strong>특징</strong>: 높은 가용성, 복잡한 충돌 해결 필요</li><li><strong>목적</strong>: 지리적 분산과 쓰기 성능 향상</li><li><strong>사용 상황</strong>: 글로벌 애플리케이션, 협업 도구, 분산 편집</li><li><strong>예시</strong>: MySQL Cluster, CouchDB, Riak</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1> 1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2> 2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3> 3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4> 4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5> 5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6> 6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7> 7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8> 8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9> 9</a>
</span><span class=lnt id=hl-13-10><a class=lnlinks href=#hl-13-10>10</a>
</span><span class=lnt id=hl-13-11><a class=lnlinks href=#hl-13-11>11</a>
</span><span class=lnt id=hl-13-12><a class=lnlinks href=#hl-13-12>12</a>
</span><span class=lnt id=hl-13-13><a class=lnlinks href=#hl-13-13>13</a>
</span><span class=lnt id=hl-13-14><a class=lnlinks href=#hl-13-14>14</a>
</span><span class=lnt id=hl-13-15><a class=lnlinks href=#hl-13-15>15</a>
</span><span class=lnt id=hl-13-16><a class=lnlinks href=#hl-13-16>16</a>
</span><span class=lnt id=hl-13-17><a class=lnlinks href=#hl-13-17>17</a>
</span><span class=lnt id=hl-13-18><a class=lnlinks href=#hl-13-18>18</a>
</span><span class=lnt id=hl-13-19><a class=lnlinks href=#hl-13-19>19</a>
</span><span class=lnt id=hl-13-20><a class=lnlinks href=#hl-13-20>20</a>
</span><span class=lnt id=hl-13-21><a class=lnlinks href=#hl-13-21>21</a>
</span><span class=lnt id=hl-13-22><a class=lnlinks href=#hl-13-22>22</a>
</span><span class=lnt id=hl-13-23><a class=lnlinks href=#hl-13-23>23</a>
</span><span class=lnt id=hl-13-24><a class=lnlinks href=#hl-13-24>24</a>
</span><span class=lnt id=hl-13-25><a class=lnlinks href=#hl-13-25>25</a>
</span><span class=lnt id=hl-13-26><a class=lnlinks href=#hl-13-26>26</a>
</span><span class=lnt id=hl-13-27><a class=lnlinks href=#hl-13-27>27</a>
</span><span class=lnt id=hl-13-28><a class=lnlinks href=#hl-13-28>28</a>
</span><span class=lnt id=hl-13-29><a class=lnlinks href=#hl-13-29>29</a>
</span><span class=lnt id=hl-13-30><a class=lnlinks href=#hl-13-30>30</a>
</span><span class=lnt id=hl-13-31><a class=lnlinks href=#hl-13-31>31</a>
</span><span class=lnt id=hl-13-32><a class=lnlinks href=#hl-13-32>32</a>
</span><span class=lnt id=hl-13-33><a class=lnlinks href=#hl-13-33>33</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># CouchDB 다중 마스터 복제 설정 예시</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>couchdb</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 노드 A와 노드 B 간 양방향 복제 설정</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>setup_bidirectional_replication</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>server_a</span> <span class=o>=</span> <span class=n>couchdb</span><span class=o>.</span><span class=n>Server</span><span class=p>(</span><span class=s1>&#39;http://node-a:5984/&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>server_b</span> <span class=o>=</span> <span class=n>couchdb</span><span class=o>.</span><span class=n>Server</span><span class=p>(</span><span class=s1>&#39;http://node-b:5984/&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 데이터베이스 생성</span>
</span></span><span class=line><span class=cl>    <span class=n>db_a</span> <span class=o>=</span> <span class=n>server_a</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=s1>&#39;shared_db&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>db_b</span> <span class=o>=</span> <span class=n>server_b</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=s1>&#39;shared_db&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 양방향 복제 설정</span>
</span></span><span class=line><span class=cl>    <span class=n>replicator</span> <span class=o>=</span> <span class=n>server_a</span><span class=p>[</span><span class=s1>&#39;_replicator&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># A -&gt; B 복제</span>
</span></span><span class=line><span class=cl>    <span class=n>repl_doc_ab</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;_id&#39;</span><span class=p>:</span> <span class=s1>&#39;repl_a_to_b&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;source&#39;</span><span class=p>:</span> <span class=s1>&#39;shared_db&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;target&#39;</span><span class=p>:</span> <span class=s1>&#39;http://node-b:5984/shared_db&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;continuous&#39;</span><span class=p>:</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># B -&gt; A 복제</span>
</span></span><span class=line><span class=cl>    <span class=n>repl_doc_ba</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;_id&#39;</span><span class=p>:</span> <span class=s1>&#39;repl_b_to_a&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;source&#39;</span><span class=p>:</span> <span class=s1>&#39;http://node-b:5984/shared_db&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;target&#39;</span><span class=p>:</span> <span class=s1>&#39;shared_db&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;continuous&#39;</span><span class=p>:</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>replicator</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>repl_doc_ab</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>replicator</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=n>repl_doc_ba</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>5. 계층적 복제 (Hierarchical Replication)</strong></p><ul><li><strong>정의</strong>: 복제본들이 트리 구조로 배치되어 계층적 전파하는 방식</li><li><strong>특징</strong>: 네트워크 대역폭 효율성, 중앙 집중적 관리</li><li><strong>목적</strong>: 대규모 지리적 분산과 네트워크 비용 최적화</li><li><strong>사용 상황</strong>: CDN, 글로벌 기업 네트워크, 멀티 클라우드</li><li><strong>예시</strong>: MySQL 체인 복제, MongoDB 샤드 클러스터</li></ul><h4 id=42-유형별-분류-체계-1>4.2 유형별 분류 체계<a hidden class=anchor aria-hidden=true href=#42-유형별-분류-체계-1>#</a></h4><table><thead><tr><th>분류 기준</th><th>유형 1</th><th>유형 2</th><th>유형 3</th><th>구분 특징</th></tr></thead><tbody><tr><td><strong>동기화 방식</strong></td><td>동기식</td><td>비동기식</td><td>반동기식</td><td>응답 시점과 일관성 보장 수준</td></tr><tr><td><strong>복제 토폴로지</strong></td><td>마스터-슬레이브</td><td>다중 마스터</td><td>피어-투-피어</td><td>쓰기 권한과 노드 관계</td></tr><tr><td><strong>데이터 범위</strong></td><td>전체 복제</td><td>부분 복제</td><td>선택적 복제</td><td>복제 대상 데이터 범위</td></tr><tr><td><strong>지리적 분산</strong></td><td>로컬 복제</td><td>지역 간 복제</td><td>글로벌 복제</td><td>물리적 배치와 네트워크 지연</td></tr><tr><td><strong>일관성 모델</strong></td><td>강일관성</td><td>최종일관성</td><td>인과일관성</td><td>데이터 일치 보장 수준</td></tr><tr><td><strong>업데이트 전파</strong></td><td>즉시 전파</td><td>배치 전파</td><td>이벤트 기반</td><td>변경사항 전파 메커니즘</td></tr><tr><td><strong>충돌 해결</strong></td><td>예방 기반</td><td>감지 기반</td><td>허용 기반</td><td>동시 업데이트 충돌 처리 방식</td></tr><tr><td><strong>복제 레벨</strong></td><td>데이터베이스 레벨</td><td>테이블 레벨</td><td>로우 레벨</td><td>복제 세분화 수준</td></tr></tbody></table><p><strong>복제 패턴 조합 매트릭스:</strong></p><table><thead><tr><th>시나리오</th><th>토폴로지</th><th>동기화</th><th>일관성</th><th>충돌 해결</th><th>적용 사례</th></tr></thead><tbody><tr><td>고성능 읽기</td><td>마스터-슬레이브</td><td>비동기식</td><td>최종일관성</td><td>마스터 우선</td><td>웹 애플리케이션</td></tr><tr><td>글로벌 협업</td><td>다중 마스터</td><td>비동기식</td><td>인과일관성</td><td>CRDT 기반</td><td>문서 편집기</td></tr><tr><td>금융 거래</td><td>마스터-슬레이브</td><td>동기식</td><td>강일관성</td><td>트랜잭션 기반</td><td>결제 시스템</td></tr><tr><td>IoT 센서</td><td>계층적</td><td>배치</td><td>최종일관성</td><td>타임스탬프</td><td>모니터링 시스템</td></tr></tbody></table><h4 id=43-도구-및-라이브러리-생태계-1>4.3 도구 및 라이브러리 생태계<a hidden class=anchor aria-hidden=true href=#43-도구-및-라이브러리-생태계-1>#</a></h4><p><strong>데이터베이스별 복제 도구:</strong></p><ol><li><p><strong>MySQL 생태계</strong></p><ul><li><strong>기능</strong>: MySQL 네이티브 복제, 서드파티 확장</li><li><strong>역할</strong>: 관계형 데이터베이스 복제의 표준</li><li><strong>분류</strong>:<ul><li>MySQL Replication (네이티브)</li><li>Percona XtraDB Cluster (Galera 기반)</li><li>MySQL Group Replication (분산 합의)</li></ul></li><li><strong>연관성</strong>: 전통적인 웹 애플리케이션과 LAMP 스택</li></ul></li><li><p><strong>PostgreSQL 생태계</strong></p><ul><li><strong>기능</strong>: 고급 복제 기능과 확장성</li><li><strong>역할</strong>: 오픈소스 관계형 DB의 복제 혁신</li><li><strong>분류</strong>:<ul><li>Streaming Replication (WAL 기반)</li><li>Logical Replication (테이블별 선택적)</li><li>pgpool-II (연결 풀링과 로드밸런싱)</li></ul></li><li><strong>연관성</strong>: 엔터프라이즈급 애플리케이션과 분석 워크로드</li></ul></li><li><p><strong>NoSQL 생태계</strong></p><ul><li><strong>기능</strong>: 스키마리스 환경의 유연한 복제</li><li><strong>역할</strong>: 대규모 분산 시스템의 복제 패러다임</li><li><strong>분류</strong>:<ul><li>MongoDB Replica Set (자동 장애 전환)</li><li>Cassandra Multi-Datacenter (최종일관성)</li><li>Redis Sentinel (고가용성 관리)</li></ul></li><li><strong>연관성</strong>: 빅데이터, 실시간 애플리케이션, 클라우드 네이티브</li></ul></li></ol><p><strong>복제 관리 및 모니터링 도구:</strong></p><ol start=4><li><p><strong>운영 관리 도구</strong></p><ul><li><strong>기능</strong>: 복제 상태 모니터링, 자동화, 장애 대응</li><li><strong>역할</strong>: 복제 시스템의 운영 효율성 향상</li><li><strong>분류</strong>:<ul><li><strong>모니터링</strong>: Prometheus + Grafana, DataDog, New Relic</li><li><strong>자동화</strong>: Ansible, Terraform, Kubernetes Operators</li><li><strong>백업/복구</strong>: Velero, Restic, 클라우드 네이티브 백업</li></ul></li><li><strong>연관성</strong>: DevOps, SRE, 클라우드 운영</li></ul></li><li><p><strong>클라우드 관리형 서비스</strong></p><ul><li><strong>기능</strong>: 완전 관리형 복제 솔루션</li><li><strong>역할</strong>: 복제 복잡성 추상화 및 자동화</li><li><strong>분류</strong>:<ul><li><strong>AWS</strong>: RDS Multi-AZ, Aurora Global Database</li><li><strong>Google Cloud</strong>: Cloud SQL, Spanner</li><li><strong>Azure</strong>: SQL Database, Cosmos DB</li></ul></li><li><strong>연관성</strong>: 클라우드 마이그레이션, 서버리스 아키텍처</li></ul></li></ol><h4 id=44-표준-및-규격-준수사항-1>4.4 표준 및 규격 준수사항<a hidden class=anchor aria-hidden=true href=#44-표준-및-규격-준수사항-1>#</a></h4><p><strong>국제 표준:</strong></p><ol><li><p><strong>ACID 트랜잭션 표준</strong></p><ul><li><strong>준수 요구사항</strong>: ISO/IEC 9075 (SQL 표준)의 트랜잭션 격리 수준</li><li><strong>복제 적용</strong>: 분산 환경에서 트랜잭션 일관성 보장</li><li><strong>주의사항</strong>: 복제 지연 시 격리 수준 저하 가능성</li></ul></li><li><p><strong>CAP 정리 (Consistency, Availability, Partition Tolerance)</strong></p><ul><li><strong>준수 요구사항</strong>: 이론적 제약 조건 이해 및 트레이드오프 선택</li><li><strong>복제 적용</strong>: 일관성 모델 선택 시 CAP 고려 필수</li><li><strong>설계 원칙</strong>: 비즈니스 요구에 따른 우선순위 결정</li></ul></li><li><p><strong>분산 시스템 합의 프로토콜</strong></p><ul><li><strong>준수 요구사항</strong>: Paxos, Raft 등 검증된 알고리즘 사용</li><li><strong>복제 적용</strong>: 리더 선출, 로그 복제, 상태 동기화</li><li><strong>구현 고려사항</strong>: 네트워크 분할 상황에서의 안전성</li></ul></li></ol><p><strong>보안 및 규정 준수:</strong></p><ol><li><p><strong>데이터 프라이버시 규정</strong></p><ul><li><strong>GDPR (General Data Protection Regulation)</strong>: EU 개인정보보호</li><li><strong>CCPA (California Consumer Privacy Act)</strong>: 캘리포니아 소비자 보호</li><li><strong>복제 적용</strong>: 개인정보의 지리적 복제 제한, 삭제 권리 보장</li></ul></li><li><p><strong>금융 규제 표준</strong></p><ul><li><strong>PCI DSS</strong>: 결제 카드 데이터 보안</li><li><strong>SOX</strong>: 재무 데이터 내부 통제</li><li><strong>복제 적용</strong>: 감사 추적, 데이터 무결성 보장, 암호화 전송</li></ul></li><li><p><strong>보안 표준</strong></p><ul><li><strong>ISO 27001</strong>: 정보보안 관리 시스템</li><li><strong>NIST 사이버보안 프레임워크</strong>: 미국 표준기술연구소 가이드라인</li><li><strong>복제 적용</strong>: 전송 중 암호화, 저장 시 암호화, 접근 제어</li></ul></li></ol><h4 id=45-배포-옵션-및-설정-관리>4.5 배포 옵션 및 설정 관리<a hidden class=anchor aria-hidden=true href=#45-배포-옵션-및-설정-관리>#</a></h4><p><strong>배포 토폴로지 옵션:</strong></p><ol><li><strong>단일 데이터센터 배포</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1> 1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2> 2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3> 3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4> 4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5> 5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6> 6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7> 7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8> 8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9> 9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10>10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11>11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12>12</a>
</span><span class=lnt id=hl-14-13><a class=lnlinks href=#hl-14-13>13</a>
</span><span class=lnt id=hl-14-14><a class=lnlinks href=#hl-14-14>14</a>
</span><span class=lnt id=hl-14-15><a class=lnlinks href=#hl-14-15>15</a>
</span><span class=lnt id=hl-14-16><a class=lnlinks href=#hl-14-16>16</a>
</span><span class=lnt id=hl-14-17><a class=lnlinks href=#hl-14-17>17</a>
</span><span class=lnt id=hl-14-18><a class=lnlinks href=#hl-14-18>18</a>
</span><span class=lnt id=hl-14-19><a class=lnlinks href=#hl-14-19>19</a>
</span><span class=lnt id=hl-14-20><a class=lnlinks href=#hl-14-20>20</a>
</span><span class=lnt id=hl-14-21><a class=lnlinks href=#hl-14-21>21</a>
</span><span class=lnt id=hl-14-22><a class=lnlinks href=#hl-14-22>22</a>
</span><span class=lnt id=hl-14-23><a class=lnlinks href=#hl-14-23>23</a>
</span><span class=lnt id=hl-14-24><a class=lnlinks href=#hl-14-24>24</a>
</span><span class=lnt id=hl-14-25><a class=lnlinks href=#hl-14-25>25</a>
</span><span class=lnt id=hl-14-26><a class=lnlinks href=#hl-14-26>26</a>
</span><span class=lnt id=hl-14-27><a class=lnlinks href=#hl-14-27>27</a>
</span><span class=lnt id=hl-14-28><a class=lnlinks href=#hl-14-28>28</a>
</span><span class=lnt id=hl-14-29><a class=lnlinks href=#hl-14-29>29</a>
</span><span class=lnt id=hl-14-30><a class=lnlinks href=#hl-14-30>30</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># Docker Compose를 이용한 MySQL 마스터-슬레이브 배포</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3.8&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mysql-master</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>mysql:8.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MYSQL_ROOT_PASSWORD</span><span class=p>:</span><span class=w> </span><span class=l>password</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MYSQL_REPLICATION_USER</span><span class=p>:</span><span class=w> </span><span class=l>replica_user</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MYSQL_REPLICATION_PASSWORD</span><span class=p>:</span><span class=w> </span><span class=l>replica_pass</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>master-data:/var/lib/mysql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./mysql-master.cnf:/etc/mysql/my.cnf</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;3306:3306&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mysql-slave</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>mysql:8.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MYSQL_ROOT_PASSWORD</span><span class=p>:</span><span class=w> </span><span class=l>password</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>slave-data:/var/lib/mysql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./mysql-slave.cnf:/etc/mysql/my.cnf</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;3307:3306&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>mysql-master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>master-data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>slave-data</span><span class=p>:</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ol start=2><li><strong>멀티 리전 배포</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1> 1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2> 2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3> 3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4> 4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5> 5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6> 6</a>
</span><span class=lnt id=hl-15-7><a class=lnlinks href=#hl-15-7> 7</a>
</span><span class=lnt id=hl-15-8><a class=lnlinks href=#hl-15-8> 8</a>
</span><span class=lnt id=hl-15-9><a class=lnlinks href=#hl-15-9> 9</a>
</span><span class=lnt id=hl-15-10><a class=lnlinks href=#hl-15-10>10</a>
</span><span class=lnt id=hl-15-11><a class=lnlinks href=#hl-15-11>11</a>
</span><span class=lnt id=hl-15-12><a class=lnlinks href=#hl-15-12>12</a>
</span><span class=lnt id=hl-15-13><a class=lnlinks href=#hl-15-13>13</a>
</span><span class=lnt id=hl-15-14><a class=lnlinks href=#hl-15-14>14</a>
</span><span class=lnt id=hl-15-15><a class=lnlinks href=#hl-15-15>15</a>
</span><span class=lnt id=hl-15-16><a class=lnlinks href=#hl-15-16>16</a>
</span><span class=lnt id=hl-15-17><a class=lnlinks href=#hl-15-17>17</a>
</span><span class=lnt id=hl-15-18><a class=lnlinks href=#hl-15-18>18</a>
</span><span class=lnt id=hl-15-19><a class=lnlinks href=#hl-15-19>19</a>
</span><span class=lnt id=hl-15-20><a class=lnlinks href=#hl-15-20>20</a>
</span><span class=lnt id=hl-15-21><a class=lnlinks href=#hl-15-21>21</a>
</span><span class=lnt id=hl-15-22><a class=lnlinks href=#hl-15-22>22</a>
</span><span class=lnt id=hl-15-23><a class=lnlinks href=#hl-15-23>23</a>
</span><span class=lnt id=hl-15-24><a class=lnlinks href=#hl-15-24>24</a>
</span><span class=lnt id=hl-15-25><a class=lnlinks href=#hl-15-25>25</a>
</span><span class=lnt id=hl-15-26><a class=lnlinks href=#hl-15-26>26</a>
</span><span class=lnt id=hl-15-27><a class=lnlinks href=#hl-15-27>27</a>
</span><span class=lnt id=hl-15-28><a class=lnlinks href=#hl-15-28>28</a>
</span><span class=lnt id=hl-15-29><a class=lnlinks href=#hl-15-29>29</a>
</span><span class=lnt id=hl-15-30><a class=lnlinks href=#hl-15-30>30</a>
</span><span class=lnt id=hl-15-31><a class=lnlinks href=#hl-15-31>31</a>
</span><span class=lnt id=hl-15-32><a class=lnlinks href=#hl-15-32>32</a>
</span><span class=lnt id=hl-15-33><a class=lnlinks href=#hl-15-33>33</a>
</span><span class=lnt id=hl-15-34><a class=lnlinks href=#hl-15-34>34</a>
</span><span class=lnt id=hl-15-35><a class=lnlinks href=#hl-15-35>35</a>
</span><span class=lnt id=hl-15-36><a class=lnlinks href=#hl-15-36>36</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-terraform data-lang=terraform><span class=line><span class=cl><span class=c1># Terraform을 이용한 AWS RDS 멀티 리전 복제
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>resource</span> <span class=s2>&#34;aws_db_instance&#34;</span> <span class=s2>&#34;primary&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>identifier</span> <span class=o>=</span> <span class=s2>&#34;myapp-primary&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>engine</span>     <span class=o>=</span> <span class=s2>&#34;mysql&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>engine_version</span> <span class=o>=</span> <span class=s2>&#34;8.0&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>instance_class</span> <span class=o>=</span> <span class=s2>&#34;db.t3.medium&#34;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>allocated_storage</span> <span class=o>=</span> <span class=m>100</span>
</span></span><span class=line><span class=cl>  <span class=nx>storage_encrypted</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>multi_az</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=nx>backup_retention_period</span> <span class=o>=</span> <span class=m>7</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>vpc_security_group_ids</span> <span class=o>=</span> <span class=p>[</span><span class=nx>aws_security_group</span><span class=p>.</span><span class=nx>rds</span><span class=p>.</span><span class=nx>id</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=nx>db_subnet_group_name</span>   <span class=o>=</span> <span class=nx>aws_db_subnet_group</span><span class=p>.</span><span class=nx>main</span><span class=p>.</span><span class=nx>name</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>tags</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span> <span class=o>=</span> <span class=s2>&#34;Primary Database&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>Environment</span> <span class=o>=</span> <span class=s2>&#34;production&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>resource</span> <span class=s2>&#34;aws_db_instance&#34;</span> <span class=s2>&#34;read_replica&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>identifier</span> <span class=o>=</span> <span class=s2>&#34;myapp-replica-us-west&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>replicate_source_db</span> <span class=o>=</span> <span class=nx>aws_db_instance</span><span class=p>.</span><span class=nx>primary</span><span class=p>.</span><span class=nx>id</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>instance_class</span> <span class=o>=</span> <span class=s2>&#34;db.t3.medium&#34;</span><span class=c1>
</span></span></span><span class=line><span class=cl><span class=c1>  
</span></span></span><span class=line><span class=cl><span class=c1>  # 다른 리전에 배포
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>provider</span> <span class=o>=</span> <span class=nx>aws</span><span class=p>.</span><span class=nx>us</span><span class=o>-</span><span class=nx>west</span><span class=m>-2</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>tags</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span> <span class=o>=</span> <span class=s2>&#34;Read Replica West&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>Environment</span> <span class=o>=</span> <span class=s2>&#34;production&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>설정 관리 패턴:</strong></p><ol><li><strong>구성 관리 자동화</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1> 1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2> 2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3> 3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4> 4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5> 5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6> 6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7> 7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8> 8</a>
</span><span class=lnt id=hl-16-9><a class=lnlinks href=#hl-16-9> 9</a>
</span><span class=lnt id=hl-16-10><a class=lnlinks href=#hl-16-10>10</a>
</span><span class=lnt id=hl-16-11><a class=lnlinks href=#hl-16-11>11</a>
</span><span class=lnt id=hl-16-12><a class=lnlinks href=#hl-16-12>12</a>
</span><span class=lnt id=hl-16-13><a class=lnlinks href=#hl-16-13>13</a>
</span><span class=lnt id=hl-16-14><a class=lnlinks href=#hl-16-14>14</a>
</span><span class=lnt id=hl-16-15><a class=lnlinks href=#hl-16-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Ansible을 이용한 복제 설정 자동화</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>- name: Configure MySQL Master
</span></span></span><span class=line><span class=cl><span class=s2>  mysql_replication:
</span></span></span><span class=line><span class=cl><span class=s2>    mode: changesource
</span></span></span><span class=line><span class=cl><span class=s2>    master_host: &#34;{{ master_host }}&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    master_user: &#34;{{ replication_user }}&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    master_password: &#34;{{ replication_password }}&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    master_log_file: &#34;{{ master_log_file }}&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    master_log_pos: &#34;{{ master_log_pos }}&#34;
</span></span></span><span class=line><span class=cl><span class=s2>  
</span></span></span><span class=line><span class=cl><span class=s2>- name: Start MySQL Slave
</span></span></span><span class=line><span class=cl><span class=s2>  mysql_replication:
</span></span></span><span class=line><span class=cl><span class=s2>    mode: startslave
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span></code></pre></td></tr></table></div></div><ol start=2><li><strong>동적 구성 관리</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1> 1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2> 2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3> 3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4> 4</a>
</span><span class=lnt id=hl-17-5><a class=lnlinks href=#hl-17-5> 5</a>
</span><span class=lnt id=hl-17-6><a class=lnlinks href=#hl-17-6> 6</a>
</span><span class=lnt id=hl-17-7><a class=lnlinks href=#hl-17-7> 7</a>
</span><span class=lnt id=hl-17-8><a class=lnlinks href=#hl-17-8> 8</a>
</span><span class=lnt id=hl-17-9><a class=lnlinks href=#hl-17-9> 9</a>
</span><span class=lnt id=hl-17-10><a class=lnlinks href=#hl-17-10>10</a>
</span><span class=lnt id=hl-17-11><a class=lnlinks href=#hl-17-11>11</a>
</span><span class=lnt id=hl-17-12><a class=lnlinks href=#hl-17-12>12</a>
</span><span class=lnt id=hl-17-13><a class=lnlinks href=#hl-17-13>13</a>
</span><span class=lnt id=hl-17-14><a class=lnlinks href=#hl-17-14>14</a>
</span><span class=lnt id=hl-17-15><a class=lnlinks href=#hl-17-15>15</a>
</span><span class=lnt id=hl-17-16><a class=lnlinks href=#hl-17-16>16</a>
</span><span class=lnt id=hl-17-17><a class=lnlinks href=#hl-17-17>17</a>
</span><span class=lnt id=hl-17-18><a class=lnlinks href=#hl-17-18>18</a>
</span><span class=lnt id=hl-17-19><a class=lnlinks href=#hl-17-19>19</a>
</span><span class=lnt id=hl-17-20><a class=lnlinks href=#hl-17-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Kubernetes ConfigMap을 이용한 동적 설정</span>
</span></span><span class=line><span class=cl><span class=n>apiVersion</span><span class=p>:</span> <span class=n>v1</span>
</span></span><span class=line><span class=cl><span class=n>kind</span><span class=p>:</span> <span class=n>ConfigMap</span>
</span></span><span class=line><span class=cl><span class=n>metadata</span><span class=p>:</span>
</span></span><span class=line><span class=cl>  <span class=n>name</span><span class=p>:</span> <span class=n>mysql</span><span class=o>-</span><span class=n>config</span>
</span></span><span class=line><span class=cl><span class=n>data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>  <span class=n>master</span><span class=o>.</span><span class=n>cnf</span><span class=p>:</span> <span class=o>|</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=n>mysqld</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>server</span><span class=o>-</span><span class=nb>id</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>log</span><span class=o>-</span><span class=nb>bin</span> <span class=o>=</span> <span class=n>mysql</span><span class=o>-</span><span class=nb>bin</span>
</span></span><span class=line><span class=cl>    <span class=n>binlog</span><span class=o>-</span><span class=nb>format</span> <span class=o>=</span> <span class=n>ROW</span>
</span></span><span class=line><span class=cl>    <span class=n>gtid</span><span class=o>-</span><span class=n>mode</span> <span class=o>=</span> <span class=n>ON</span>
</span></span><span class=line><span class=cl>    <span class=n>enforce</span><span class=o>-</span><span class=n>gtid</span><span class=o>-</span><span class=n>consistency</span> <span class=o>=</span> <span class=n>ON</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>  <span class=n>slave</span><span class=o>.</span><span class=n>cnf</span><span class=p>:</span> <span class=o>|</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=n>mysqld</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>server</span><span class=o>-</span><span class=nb>id</span> <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=n>relay</span><span class=o>-</span><span class=n>log</span> <span class=o>=</span> <span class=n>relay</span><span class=o>-</span><span class=nb>bin</span>
</span></span><span class=line><span class=cl>    <span class=n>log</span><span class=o>-</span><span class=n>slave</span><span class=o>-</span><span class=n>updates</span> <span class=o>=</span> <span class=n>ON</span>
</span></span><span class=line><span class=cl>    <span class=n>read</span><span class=o>-</span><span class=n>only</span> <span class=o>=</span> <span class=n>ON</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=phase-5-실무-적용-및-사례>Phase 5: 실무 적용 및 사례<a hidden class=anchor aria-hidden=true href=#phase-5-실무-적용-및-사례>#</a></h3><h4 id=51-실습-예제-및-코드-구현-1>5.1 실습 예제 및 코드 구현<a hidden class=anchor aria-hidden=true href=#51-실습-예제-및-코드-구현-1>#</a></h4><h5 id=실습-예제-mysql-마스터-슬레이브-복제-구축>실습 예제: MySQL 마스터-슬레이브 복제 구축<a hidden class=anchor aria-hidden=true href=#실습-예제-mysql-마스터-슬레이브-복제-구축>#</a></h5><h6 id=목적-1>목적<a hidden class=anchor aria-hidden=true href=#목적-1>#</a></h6><ul><li>MySQL 환경에서 실시간 데이터 복제 시스템 구축</li><li>읽기/쓰기 분리를 통한 성능 최적화 실현</li><li>장애 상황 시뮬레이션 및 자동 복구 메커니즘 이해</li></ul><h6 id=사전-요구사항-1>사전 요구사항<a hidden class=anchor aria-hidden=true href=#사전-요구사항-1>#</a></h6><ul><li>Docker 및 Docker Compose 설치 (최신 버전)</li><li>MySQL 8.0+ 이미지</li><li>최소 4GB RAM, 20GB 디스크 공간</li><li>네트워크 포트 3306, 3307, 3308 사용 가능</li></ul><h6 id=단계별-구현-1>단계별 구현<a hidden class=anchor aria-hidden=true href=#단계별-구현-1>#</a></h6><p><strong>1단계: Docker Compose 환경 구성</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1> 1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2> 2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3> 3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4> 4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5> 5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6> 6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7> 7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8> 8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9> 9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10>10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11>11</a>
</span><span class=lnt id=hl-18-12><a class=lnlinks href=#hl-18-12>12</a>
</span><span class=lnt id=hl-18-13><a class=lnlinks href=#hl-18-13>13</a>
</span><span class=lnt id=hl-18-14><a class=lnlinks href=#hl-18-14>14</a>
</span><span class=lnt id=hl-18-15><a class=lnlinks href=#hl-18-15>15</a>
</span><span class=lnt id=hl-18-16><a class=lnlinks href=#hl-18-16>16</a>
</span><span class=lnt id=hl-18-17><a class=lnlinks href=#hl-18-17>17</a>
</span><span class=lnt id=hl-18-18><a class=lnlinks href=#hl-18-18>18</a>
</span><span class=lnt id=hl-18-19><a class=lnlinks href=#hl-18-19>19</a>
</span><span class=lnt id=hl-18-20><a class=lnlinks href=#hl-18-20>20</a>
</span><span class=lnt id=hl-18-21><a class=lnlinks href=#hl-18-21>21</a>
</span><span class=lnt id=hl-18-22><a class=lnlinks href=#hl-18-22>22</a>
</span><span class=lnt id=hl-18-23><a class=lnlinks href=#hl-18-23>23</a>
</span><span class=lnt id=hl-18-24><a class=lnlinks href=#hl-18-24>24</a>
</span><span class=lnt id=hl-18-25><a class=lnlinks href=#hl-18-25>25</a>
</span><span class=lnt id=hl-18-26><a class=lnlinks href=#hl-18-26>26</a>
</span><span class=lnt id=hl-18-27><a class=lnlinks href=#hl-18-27>27</a>
</span><span class=lnt id=hl-18-28><a class=lnlinks href=#hl-18-28>28</a>
</span><span class=lnt id=hl-18-29><a class=lnlinks href=#hl-18-29>29</a>
</span><span class=lnt id=hl-18-30><a class=lnlinks href=#hl-18-30>30</a>
</span><span class=lnt id=hl-18-31><a class=lnlinks href=#hl-18-31>31</a>
</span><span class=lnt id=hl-18-32><a class=lnlinks href=#hl-18-32>32</a>
</span><span class=lnt id=hl-18-33><a class=lnlinks href=#hl-18-33>33</a>
</span><span class=lnt id=hl-18-34><a class=lnlinks href=#hl-18-34>34</a>
</span><span class=lnt id=hl-18-35><a class=lnlinks href=#hl-18-35>35</a>
</span><span class=lnt id=hl-18-36><a class=lnlinks href=#hl-18-36>36</a>
</span><span class=lnt id=hl-18-37><a class=lnlinks href=#hl-18-37>37</a>
</span><span class=lnt id=hl-18-38><a class=lnlinks href=#hl-18-38>38</a>
</span><span class=lnt id=hl-18-39><a class=lnlinks href=#hl-18-39>39</a>
</span><span class=lnt id=hl-18-40><a class=lnlinks href=#hl-18-40>40</a>
</span><span class=lnt id=hl-18-41><a class=lnlinks href=#hl-18-41>41</a>
</span><span class=lnt id=hl-18-42><a class=lnlinks href=#hl-18-42>42</a>
</span><span class=lnt id=hl-18-43><a class=lnlinks href=#hl-18-43>43</a>
</span><span class=lnt id=hl-18-44><a class=lnlinks href=#hl-18-44>44</a>
</span><span class=lnt id=hl-18-45><a class=lnlinks href=#hl-18-45>45</a>
</span><span class=lnt id=hl-18-46><a class=lnlinks href=#hl-18-46>46</a>
</span><span class=lnt id=hl-18-47><a class=lnlinks href=#hl-18-47>47</a>
</span><span class=lnt id=hl-18-48><a class=lnlinks href=#hl-18-48>48</a>
</span><span class=lnt id=hl-18-49><a class=lnlinks href=#hl-18-49>49</a>
</span><span class=lnt id=hl-18-50><a class=lnlinks href=#hl-18-50>50</a>
</span><span class=lnt id=hl-18-51><a class=lnlinks href=#hl-18-51>51</a>
</span><span class=lnt id=hl-18-52><a class=lnlinks href=#hl-18-52>52</a>
</span><span class=lnt id=hl-18-53><a class=lnlinks href=#hl-18-53>53</a>
</span><span class=lnt id=hl-18-54><a class=lnlinks href=#hl-18-54>54</a>
</span><span class=lnt id=hl-18-55><a class=lnlinks href=#hl-18-55>55</a>
</span><span class=lnt id=hl-18-56><a class=lnlinks href=#hl-18-56>56</a>
</span><span class=lnt id=hl-18-57><a class=lnlinks href=#hl-18-57>57</a>
</span><span class=lnt id=hl-18-58><a class=lnlinks href=#hl-18-58>58</a>
</span><span class=lnt id=hl-18-59><a class=lnlinks href=#hl-18-59>59</a>
</span><span class=lnt id=hl-18-60><a class=lnlinks href=#hl-18-60>60</a>
</span><span class=lnt id=hl-18-61><a class=lnlinks href=#hl-18-61>61</a>
</span><span class=lnt id=hl-18-62><a class=lnlinks href=#hl-18-62>62</a>
</span><span class=lnt id=hl-18-63><a class=lnlinks href=#hl-18-63>63</a>
</span><span class=lnt id=hl-18-64><a class=lnlinks href=#hl-18-64>64</a>
</span><span class=lnt id=hl-18-65><a class=lnlinks href=#hl-18-65>65</a>
</span><span class=lnt id=hl-18-66><a class=lnlinks href=#hl-18-66>66</a>
</span><span class=lnt id=hl-18-67><a class=lnlinks href=#hl-18-67>67</a>
</span><span class=lnt id=hl-18-68><a class=lnlinks href=#hl-18-68>68</a>
</span><span class=lnt id=hl-18-69><a class=lnlinks href=#hl-18-69>69</a>
</span><span class=lnt id=hl-18-70><a class=lnlinks href=#hl-18-70>70</a>
</span><span class=lnt id=hl-18-71><a class=lnlinks href=#hl-18-71>71</a>
</span><span class=lnt id=hl-18-72><a class=lnlinks href=#hl-18-72>72</a>
</span><span class=lnt id=hl-18-73><a class=lnlinks href=#hl-18-73>73</a>
</span><span class=lnt id=hl-18-74><a class=lnlinks href=#hl-18-74>74</a>
</span><span class=lnt id=hl-18-75><a class=lnlinks href=#hl-18-75>75</a>
</span><span class=lnt id=hl-18-76><a class=lnlinks href=#hl-18-76>76</a>
</span><span class=lnt id=hl-18-77><a class=lnlinks href=#hl-18-77>77</a>
</span><span class=lnt id=hl-18-78><a class=lnlinks href=#hl-18-78>78</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># docker-compose.yml - 마스터-슬레이브 클러스터 정의</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3.8&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mysql-master</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>mysql:8.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>mysql-master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>always</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MYSQL_ROOT_PASSWORD</span><span class=p>:</span><span class=w> </span><span class=l>rootpassword</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MYSQL_DATABASE</span><span class=p>:</span><span class=w> </span><span class=l>testdb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MYSQL_USER</span><span class=p>:</span><span class=w> </span><span class=l>app_user</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MYSQL_PASSWORD</span><span class=p>:</span><span class=w> </span><span class=l>app_password</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;3306:3306&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>master_data:/var/lib/mysql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./config/master.cnf:/etc/mysql/conf.d/master.cnf</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./init/master-init.sql:/docker-entrypoint-initdb.d/master-init.sql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>networks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>mysql-cluster</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mysql-slave1</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>mysql:8.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>mysql-slave1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>always</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MYSQL_ROOT_PASSWORD</span><span class=p>:</span><span class=w> </span><span class=l>rootpassword</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;3307:3306&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>slave1_data:/var/lib/mysql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./config/slave.cnf:/etc/mysql/conf.d/slave.cnf</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>mysql-master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>networks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>mysql-cluster</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mysql-slave2</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>mysql:8.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>mysql-slave2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>always</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MYSQL_ROOT_PASSWORD</span><span class=p>:</span><span class=w> </span><span class=l>rootpassword</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;3308:3306&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>slave2_data:/var/lib/mysql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./config/slave.cnf:/etc/mysql/conf.d/slave.cnf</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>mysql-master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>networks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>mysql-cluster</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 애플리케이션 로드밸런서 (읽기 분산용)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>haproxy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>haproxy:2.4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>mysql-loadbalancer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;3309:3306&#34;</span><span class=w>  </span><span class=c># 읽기 전용 접속</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;8080:8080&#34;</span><span class=w>  </span><span class=c># 관리 인터페이스</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./config/haproxy.cfg:/usr/local/etc/haproxy/haproxy.cfg</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>mysql-master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>mysql-slave1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>mysql-slave2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>networks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>mysql-cluster</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>master_data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>slave1_data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>slave2_data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>networks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mysql-cluster</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>driver</span><span class=p>:</span><span class=w> </span><span class=l>bridge</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>2단계: MySQL 설정 파일 구성</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1> 1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2> 2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3> 3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4> 4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5> 5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6> 6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7> 7</a>
</span><span class=lnt id=hl-19-8><a class=lnlinks href=#hl-19-8> 8</a>
</span><span class=lnt id=hl-19-9><a class=lnlinks href=#hl-19-9> 9</a>
</span><span class=lnt id=hl-19-10><a class=lnlinks href=#hl-19-10>10</a>
</span><span class=lnt id=hl-19-11><a class=lnlinks href=#hl-19-11>11</a>
</span><span class=lnt id=hl-19-12><a class=lnlinks href=#hl-19-12>12</a>
</span><span class=lnt id=hl-19-13><a class=lnlinks href=#hl-19-13>13</a>
</span><span class=lnt id=hl-19-14><a class=lnlinks href=#hl-19-14>14</a>
</span><span class=lnt id=hl-19-15><a class=lnlinks href=#hl-19-15>15</a>
</span><span class=lnt id=hl-19-16><a class=lnlinks href=#hl-19-16>16</a>
</span><span class=lnt id=hl-19-17><a class=lnlinks href=#hl-19-17>17</a>
</span><span class=lnt id=hl-19-18><a class=lnlinks href=#hl-19-18>18</a>
</span><span class=lnt id=hl-19-19><a class=lnlinks href=#hl-19-19>19</a>
</span><span class=lnt id=hl-19-20><a class=lnlinks href=#hl-19-20>20</a>
</span><span class=lnt id=hl-19-21><a class=lnlinks href=#hl-19-21>21</a>
</span><span class=lnt id=hl-19-22><a class=lnlinks href=#hl-19-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=c1># config/master.cnf - 마스터 노드 설정</span>
</span></span><span class=line><span class=cl><span class=k>[mysqld]</span>
</span></span><span class=line><span class=cl><span class=c1># 서버 식별자 (클러스터 내 고유값)</span>
</span></span><span class=line><span class=cl><span class=na>server-id</span> <span class=o>=</span> <span class=s>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 바이너리 로그 활성화 (복제의 핵심)</span>
</span></span><span class=line><span class=cl><span class=na>log-bin</span> <span class=o>=</span> <span class=s>mysql-bin</span>
</span></span><span class=line><span class=cl><span class=na>binlog-format</span> <span class=o>=</span> <span class=s>ROW          # 행 기반 복제로 데이터 정확성 보장</span>
</span></span><span class=line><span class=cl><span class=na>binlog-do-db</span> <span class=o>=</span> <span class=s>testdb        # 특정 데이터베이스만 복제</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># GTID (Global Transaction Identifier) 활성화</span>
</span></span><span class=line><span class=cl><span class=na>gtid-mode</span> <span class=o>=</span> <span class=s>ON</span>
</span></span><span class=line><span class=cl><span class=na>enforce-gtid-consistency</span> <span class=o>=</span> <span class=s>ON</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 복제 사용자 설정</span>
</span></span><span class=line><span class=cl><span class=na>rpl_semi_sync_master_enabled</span> <span class=o>=</span> <span class=s>1    # 반동기식 복제 활성화</span>
</span></span><span class=line><span class=cl><span class=na>rpl_semi_sync_master_timeout</span> <span class=o>=</span> <span class=s>1000 # 1초 타임아웃</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 성능 최적화</span>
</span></span><span class=line><span class=cl><span class=na>max_connections</span> <span class=o>=</span> <span class=s>200</span>
</span></span><span class=line><span class=cl><span class=na>innodb_buffer_pool_size</span> <span class=o>=</span> <span class=s>1G</span>
</span></span><span class=line><span class=cl><span class=na>innodb_log_file_size</span> <span class=o>=</span> <span class=s>256M</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1> 1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2> 2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3> 3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4> 4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5> 5</a>
</span><span class=lnt id=hl-20-6><a class=lnlinks href=#hl-20-6> 6</a>
</span><span class=lnt id=hl-20-7><a class=lnlinks href=#hl-20-7> 7</a>
</span><span class=lnt id=hl-20-8><a class=lnlinks href=#hl-20-8> 8</a>
</span><span class=lnt id=hl-20-9><a class=lnlinks href=#hl-20-9> 9</a>
</span><span class=lnt id=hl-20-10><a class=lnlinks href=#hl-20-10>10</a>
</span><span class=lnt id=hl-20-11><a class=lnlinks href=#hl-20-11>11</a>
</span><span class=lnt id=hl-20-12><a class=lnlinks href=#hl-20-12>12</a>
</span><span class=lnt id=hl-20-13><a class=lnlinks href=#hl-20-13>13</a>
</span><span class=lnt id=hl-20-14><a class=lnlinks href=#hl-20-14>14</a>
</span><span class=lnt id=hl-20-15><a class=lnlinks href=#hl-20-15>15</a>
</span><span class=lnt id=hl-20-16><a class=lnlinks href=#hl-20-16>16</a>
</span><span class=lnt id=hl-20-17><a class=lnlinks href=#hl-20-17>17</a>
</span><span class=lnt id=hl-20-18><a class=lnlinks href=#hl-20-18>18</a>
</span><span class=lnt id=hl-20-19><a class=lnlinks href=#hl-20-19>19</a>
</span><span class=lnt id=hl-20-20><a class=lnlinks href=#hl-20-20>20</a>
</span><span class=lnt id=hl-20-21><a class=lnlinks href=#hl-20-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=c1># config/slave.cnf - 슬레이브 노드 설정</span>
</span></span><span class=line><span class=cl><span class=k>[mysqld]</span>
</span></span><span class=line><span class=cl><span class=c1># 슬레이브 서버 식별자</span>
</span></span><span class=line><span class=cl><span class=na>server-id</span> <span class=o>=</span> <span class=s>2  # slave2는 server-id = 3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 릴레이 로그 설정</span>
</span></span><span class=line><span class=cl><span class=na>relay-log</span> <span class=o>=</span> <span class=s>relay-bin</span>
</span></span><span class=line><span class=cl><span class=na>log-slave-updates</span> <span class=o>=</span> <span class=s>ON       # 슬레이브도 바이너리 로그 생성</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 읽기 전용 모드 (실수로 인한 쓰기 방지)</span>
</span></span><span class=line><span class=cl><span class=na>read-only</span> <span class=o>=</span> <span class=s>ON</span>
</span></span><span class=line><span class=cl><span class=na>super-read-only</span> <span class=o>=</span> <span class=s>ON</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 복제 설정</span>
</span></span><span class=line><span class=cl><span class=na>rpl_semi_sync_slave_enabled</span> <span class=o>=</span> <span class=s>1</span>
</span></span><span class=line><span class=cl><span class=na>slave-skip-errors</span> <span class=o>=</span> <span class=s>1062     # 중복 키 에러 무시 (필요시)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 복제 정보 저장 방식 (충돌 복구용)</span>
</span></span><span class=line><span class=cl><span class=na>master-info-repository</span> <span class=o>=</span> <span class=s>TABLE</span>
</span></span><span class=line><span class=cl><span class=na>relay-log-info-repository</span> <span class=o>=</span> <span class=s>TABLE</span>
</span></span><span class=line><span class=cl><span class=na>relay-log-recovery</span> <span class=o>=</span> <span class=s>ON</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>3단계: 복제 초기화 스크립트</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1> 1</a>
</span><span class=lnt id=hl-21-2><a class=lnlinks href=#hl-21-2> 2</a>
</span><span class=lnt id=hl-21-3><a class=lnlinks href=#hl-21-3> 3</a>
</span><span class=lnt id=hl-21-4><a class=lnlinks href=#hl-21-4> 4</a>
</span><span class=lnt id=hl-21-5><a class=lnlinks href=#hl-21-5> 5</a>
</span><span class=lnt id=hl-21-6><a class=lnlinks href=#hl-21-6> 6</a>
</span><span class=lnt id=hl-21-7><a class=lnlinks href=#hl-21-7> 7</a>
</span><span class=lnt id=hl-21-8><a class=lnlinks href=#hl-21-8> 8</a>
</span><span class=lnt id=hl-21-9><a class=lnlinks href=#hl-21-9> 9</a>
</span><span class=lnt id=hl-21-10><a class=lnlinks href=#hl-21-10>10</a>
</span><span class=lnt id=hl-21-11><a class=lnlinks href=#hl-21-11>11</a>
</span><span class=lnt id=hl-21-12><a class=lnlinks href=#hl-21-12>12</a>
</span><span class=lnt id=hl-21-13><a class=lnlinks href=#hl-21-13>13</a>
</span><span class=lnt id=hl-21-14><a class=lnlinks href=#hl-21-14>14</a>
</span><span class=lnt id=hl-21-15><a class=lnlinks href=#hl-21-15>15</a>
</span><span class=lnt id=hl-21-16><a class=lnlinks href=#hl-21-16>16</a>
</span><span class=lnt id=hl-21-17><a class=lnlinks href=#hl-21-17>17</a>
</span><span class=lnt id=hl-21-18><a class=lnlinks href=#hl-21-18>18</a>
</span><span class=lnt id=hl-21-19><a class=lnlinks href=#hl-21-19>19</a>
</span><span class=lnt id=hl-21-20><a class=lnlinks href=#hl-21-20>20</a>
</span><span class=lnt id=hl-21-21><a class=lnlinks href=#hl-21-21>21</a>
</span><span class=lnt id=hl-21-22><a class=lnlinks href=#hl-21-22>22</a>
</span><span class=lnt id=hl-21-23><a class=lnlinks href=#hl-21-23>23</a>
</span><span class=lnt id=hl-21-24><a class=lnlinks href=#hl-21-24>24</a>
</span><span class=lnt id=hl-21-25><a class=lnlinks href=#hl-21-25>25</a>
</span><span class=lnt id=hl-21-26><a class=lnlinks href=#hl-21-26>26</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- init/master-init.sql - 마스터 초기화
</span></span></span><span class=line><span class=cl><span class=c1>-- 복제 사용자 생성
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=s1>&#39;repl_user&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=w> </span><span class=n>IDENTIFIED</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=n>mysql_native_password</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=s1>&#39;repl_password&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GRANT</span><span class=w> </span><span class=n>REPLICATION</span><span class=w> </span><span class=n>SLAVE</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=o>*</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=s1>&#39;repl_user&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 애플리케이션 사용자 생성
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=s1>&#39;app_user&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=w> </span><span class=n>IDENTIFIED</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=n>mysql_native_password</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=s1>&#39;app_password&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GRANT</span><span class=w> </span><span class=k>SELECT</span><span class=p>,</span><span class=w> </span><span class=k>INSERT</span><span class=p>,</span><span class=w> </span><span class=k>UPDATE</span><span class=p>,</span><span class=w> </span><span class=k>DELETE</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>testdb</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=s1>&#39;app_user&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 테스트용 테이블 생성
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>USE</span><span class=w> </span><span class=n>testdb</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=n>AUTO_INCREMENT</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>username</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>UNIQUE</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>email</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>created_at</span><span class=w> </span><span class=k>TIMESTAMP</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=k>CURRENT_TIMESTAMP</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>updated_at</span><span class=w> </span><span class=k>TIMESTAMP</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=k>CURRENT_TIMESTAMP</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=k>UPDATE</span><span class=w> </span><span class=k>CURRENT_TIMESTAMP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 초기 데이터 삽입
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=p>(</span><span class=n>username</span><span class=p>,</span><span class=w> </span><span class=n>email</span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>(</span><span class=s1>&#39;admin&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;admin@example.com&#39;</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>(</span><span class=s1>&#39;user1&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;user1@example.com&#39;</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>(</span><span class=s1>&#39;user2&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;user2@example.com&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>FLUSH</span><span class=w> </span><span class=k>PRIVILEGES</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>4단계: 복제 설정 자동화 스크립트</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1>  1</a>
</span><span class=lnt id=hl-22-2><a class=lnlinks href=#hl-22-2>  2</a>
</span><span class=lnt id=hl-22-3><a class=lnlinks href=#hl-22-3>  3</a>
</span><span class=lnt id=hl-22-4><a class=lnlinks href=#hl-22-4>  4</a>
</span><span class=lnt id=hl-22-5><a class=lnlinks href=#hl-22-5>  5</a>
</span><span class=lnt id=hl-22-6><a class=lnlinks href=#hl-22-6>  6</a>
</span><span class=lnt id=hl-22-7><a class=lnlinks href=#hl-22-7>  7</a>
</span><span class=lnt id=hl-22-8><a class=lnlinks href=#hl-22-8>  8</a>
</span><span class=lnt id=hl-22-9><a class=lnlinks href=#hl-22-9>  9</a>
</span><span class=lnt id=hl-22-10><a class=lnlinks href=#hl-22-10> 10</a>
</span><span class=lnt id=hl-22-11><a class=lnlinks href=#hl-22-11> 11</a>
</span><span class=lnt id=hl-22-12><a class=lnlinks href=#hl-22-12> 12</a>
</span><span class=lnt id=hl-22-13><a class=lnlinks href=#hl-22-13> 13</a>
</span><span class=lnt id=hl-22-14><a class=lnlinks href=#hl-22-14> 14</a>
</span><span class=lnt id=hl-22-15><a class=lnlinks href=#hl-22-15> 15</a>
</span><span class=lnt id=hl-22-16><a class=lnlinks href=#hl-22-16> 16</a>
</span><span class=lnt id=hl-22-17><a class=lnlinks href=#hl-22-17> 17</a>
</span><span class=lnt id=hl-22-18><a class=lnlinks href=#hl-22-18> 18</a>
</span><span class=lnt id=hl-22-19><a class=lnlinks href=#hl-22-19> 19</a>
</span><span class=lnt id=hl-22-20><a class=lnlinks href=#hl-22-20> 20</a>
</span><span class=lnt id=hl-22-21><a class=lnlinks href=#hl-22-21> 21</a>
</span><span class=lnt id=hl-22-22><a class=lnlinks href=#hl-22-22> 22</a>
</span><span class=lnt id=hl-22-23><a class=lnlinks href=#hl-22-23> 23</a>
</span><span class=lnt id=hl-22-24><a class=lnlinks href=#hl-22-24> 24</a>
</span><span class=lnt id=hl-22-25><a class=lnlinks href=#hl-22-25> 25</a>
</span><span class=lnt id=hl-22-26><a class=lnlinks href=#hl-22-26> 26</a>
</span><span class=lnt id=hl-22-27><a class=lnlinks href=#hl-22-27> 27</a>
</span><span class=lnt id=hl-22-28><a class=lnlinks href=#hl-22-28> 28</a>
</span><span class=lnt id=hl-22-29><a class=lnlinks href=#hl-22-29> 29</a>
</span><span class=lnt id=hl-22-30><a class=lnlinks href=#hl-22-30> 30</a>
</span><span class=lnt id=hl-22-31><a class=lnlinks href=#hl-22-31> 31</a>
</span><span class=lnt id=hl-22-32><a class=lnlinks href=#hl-22-32> 32</a>
</span><span class=lnt id=hl-22-33><a class=lnlinks href=#hl-22-33> 33</a>
</span><span class=lnt id=hl-22-34><a class=lnlinks href=#hl-22-34> 34</a>
</span><span class=lnt id=hl-22-35><a class=lnlinks href=#hl-22-35> 35</a>
</span><span class=lnt id=hl-22-36><a class=lnlinks href=#hl-22-36> 36</a>
</span><span class=lnt id=hl-22-37><a class=lnlinks href=#hl-22-37> 37</a>
</span><span class=lnt id=hl-22-38><a class=lnlinks href=#hl-22-38> 38</a>
</span><span class=lnt id=hl-22-39><a class=lnlinks href=#hl-22-39> 39</a>
</span><span class=lnt id=hl-22-40><a class=lnlinks href=#hl-22-40> 40</a>
</span><span class=lnt id=hl-22-41><a class=lnlinks href=#hl-22-41> 41</a>
</span><span class=lnt id=hl-22-42><a class=lnlinks href=#hl-22-42> 42</a>
</span><span class=lnt id=hl-22-43><a class=lnlinks href=#hl-22-43> 43</a>
</span><span class=lnt id=hl-22-44><a class=lnlinks href=#hl-22-44> 44</a>
</span><span class=lnt id=hl-22-45><a class=lnlinks href=#hl-22-45> 45</a>
</span><span class=lnt id=hl-22-46><a class=lnlinks href=#hl-22-46> 46</a>
</span><span class=lnt id=hl-22-47><a class=lnlinks href=#hl-22-47> 47</a>
</span><span class=lnt id=hl-22-48><a class=lnlinks href=#hl-22-48> 48</a>
</span><span class=lnt id=hl-22-49><a class=lnlinks href=#hl-22-49> 49</a>
</span><span class=lnt id=hl-22-50><a class=lnlinks href=#hl-22-50> 50</a>
</span><span class=lnt id=hl-22-51><a class=lnlinks href=#hl-22-51> 51</a>
</span><span class=lnt id=hl-22-52><a class=lnlinks href=#hl-22-52> 52</a>
</span><span class=lnt id=hl-22-53><a class=lnlinks href=#hl-22-53> 53</a>
</span><span class=lnt id=hl-22-54><a class=lnlinks href=#hl-22-54> 54</a>
</span><span class=lnt id=hl-22-55><a class=lnlinks href=#hl-22-55> 55</a>
</span><span class=lnt id=hl-22-56><a class=lnlinks href=#hl-22-56> 56</a>
</span><span class=lnt id=hl-22-57><a class=lnlinks href=#hl-22-57> 57</a>
</span><span class=lnt id=hl-22-58><a class=lnlinks href=#hl-22-58> 58</a>
</span><span class=lnt id=hl-22-59><a class=lnlinks href=#hl-22-59> 59</a>
</span><span class=lnt id=hl-22-60><a class=lnlinks href=#hl-22-60> 60</a>
</span><span class=lnt id=hl-22-61><a class=lnlinks href=#hl-22-61> 61</a>
</span><span class=lnt id=hl-22-62><a class=lnlinks href=#hl-22-62> 62</a>
</span><span class=lnt id=hl-22-63><a class=lnlinks href=#hl-22-63> 63</a>
</span><span class=lnt id=hl-22-64><a class=lnlinks href=#hl-22-64> 64</a>
</span><span class=lnt id=hl-22-65><a class=lnlinks href=#hl-22-65> 65</a>
</span><span class=lnt id=hl-22-66><a class=lnlinks href=#hl-22-66> 66</a>
</span><span class=lnt id=hl-22-67><a class=lnlinks href=#hl-22-67> 67</a>
</span><span class=lnt id=hl-22-68><a class=lnlinks href=#hl-22-68> 68</a>
</span><span class=lnt id=hl-22-69><a class=lnlinks href=#hl-22-69> 69</a>
</span><span class=lnt id=hl-22-70><a class=lnlinks href=#hl-22-70> 70</a>
</span><span class=lnt id=hl-22-71><a class=lnlinks href=#hl-22-71> 71</a>
</span><span class=lnt id=hl-22-72><a class=lnlinks href=#hl-22-72> 72</a>
</span><span class=lnt id=hl-22-73><a class=lnlinks href=#hl-22-73> 73</a>
</span><span class=lnt id=hl-22-74><a class=lnlinks href=#hl-22-74> 74</a>
</span><span class=lnt id=hl-22-75><a class=lnlinks href=#hl-22-75> 75</a>
</span><span class=lnt id=hl-22-76><a class=lnlinks href=#hl-22-76> 76</a>
</span><span class=lnt id=hl-22-77><a class=lnlinks href=#hl-22-77> 77</a>
</span><span class=lnt id=hl-22-78><a class=lnlinks href=#hl-22-78> 78</a>
</span><span class=lnt id=hl-22-79><a class=lnlinks href=#hl-22-79> 79</a>
</span><span class=lnt id=hl-22-80><a class=lnlinks href=#hl-22-80> 80</a>
</span><span class=lnt id=hl-22-81><a class=lnlinks href=#hl-22-81> 81</a>
</span><span class=lnt id=hl-22-82><a class=lnlinks href=#hl-22-82> 82</a>
</span><span class=lnt id=hl-22-83><a class=lnlinks href=#hl-22-83> 83</a>
</span><span class=lnt id=hl-22-84><a class=lnlinks href=#hl-22-84> 84</a>
</span><span class=lnt id=hl-22-85><a class=lnlinks href=#hl-22-85> 85</a>
</span><span class=lnt id=hl-22-86><a class=lnlinks href=#hl-22-86> 86</a>
</span><span class=lnt id=hl-22-87><a class=lnlinks href=#hl-22-87> 87</a>
</span><span class=lnt id=hl-22-88><a class=lnlinks href=#hl-22-88> 88</a>
</span><span class=lnt id=hl-22-89><a class=lnlinks href=#hl-22-89> 89</a>
</span><span class=lnt id=hl-22-90><a class=lnlinks href=#hl-22-90> 90</a>
</span><span class=lnt id=hl-22-91><a class=lnlinks href=#hl-22-91> 91</a>
</span><span class=lnt id=hl-22-92><a class=lnlinks href=#hl-22-92> 92</a>
</span><span class=lnt id=hl-22-93><a class=lnlinks href=#hl-22-93> 93</a>
</span><span class=lnt id=hl-22-94><a class=lnlinks href=#hl-22-94> 94</a>
</span><span class=lnt id=hl-22-95><a class=lnlinks href=#hl-22-95> 95</a>
</span><span class=lnt id=hl-22-96><a class=lnlinks href=#hl-22-96> 96</a>
</span><span class=lnt id=hl-22-97><a class=lnlinks href=#hl-22-97> 97</a>
</span><span class=lnt id=hl-22-98><a class=lnlinks href=#hl-22-98> 98</a>
</span><span class=lnt id=hl-22-99><a class=lnlinks href=#hl-22-99> 99</a>
</span><span class=lnt id=hl-22-100><a class=lnlinks href=#hl-22-100>100</a>
</span><span class=lnt id=hl-22-101><a class=lnlinks href=#hl-22-101>101</a>
</span><span class=lnt id=hl-22-102><a class=lnlinks href=#hl-22-102>102</a>
</span><span class=lnt id=hl-22-103><a class=lnlinks href=#hl-22-103>103</a>
</span><span class=lnt id=hl-22-104><a class=lnlinks href=#hl-22-104>104</a>
</span><span class=lnt id=hl-22-105><a class=lnlinks href=#hl-22-105>105</a>
</span><span class=lnt id=hl-22-106><a class=lnlinks href=#hl-22-106>106</a>
</span><span class=lnt id=hl-22-107><a class=lnlinks href=#hl-22-107>107</a>
</span><span class=lnt id=hl-22-108><a class=lnlinks href=#hl-22-108>108</a>
</span><span class=lnt id=hl-22-109><a class=lnlinks href=#hl-22-109>109</a>
</span><span class=lnt id=hl-22-110><a class=lnlinks href=#hl-22-110>110</a>
</span><span class=lnt id=hl-22-111><a class=lnlinks href=#hl-22-111>111</a>
</span><span class=lnt id=hl-22-112><a class=lnlinks href=#hl-22-112>112</a>
</span><span class=lnt id=hl-22-113><a class=lnlinks href=#hl-22-113>113</a>
</span><span class=lnt id=hl-22-114><a class=lnlinks href=#hl-22-114>114</a>
</span><span class=lnt id=hl-22-115><a class=lnlinks href=#hl-22-115>115</a>
</span><span class=lnt id=hl-22-116><a class=lnlinks href=#hl-22-116>116</a>
</span><span class=lnt id=hl-22-117><a class=lnlinks href=#hl-22-117>117</a>
</span><span class=lnt id=hl-22-118><a class=lnlinks href=#hl-22-118>118</a>
</span><span class=lnt id=hl-22-119><a class=lnlinks href=#hl-22-119>119</a>
</span><span class=lnt id=hl-22-120><a class=lnlinks href=#hl-22-120>120</a>
</span><span class=lnt id=hl-22-121><a class=lnlinks href=#hl-22-121>121</a>
</span><span class=lnt id=hl-22-122><a class=lnlinks href=#hl-22-122>122</a>
</span><span class=lnt id=hl-22-123><a class=lnlinks href=#hl-22-123>123</a>
</span><span class=lnt id=hl-22-124><a class=lnlinks href=#hl-22-124>124</a>
</span><span class=lnt id=hl-22-125><a class=lnlinks href=#hl-22-125>125</a>
</span><span class=lnt id=hl-22-126><a class=lnlinks href=#hl-22-126>126</a>
</span><span class=lnt id=hl-22-127><a class=lnlinks href=#hl-22-127>127</a>
</span><span class=lnt id=hl-22-128><a class=lnlinks href=#hl-22-128>128</a>
</span><span class=lnt id=hl-22-129><a class=lnlinks href=#hl-22-129>129</a>
</span><span class=lnt id=hl-22-130><a class=lnlinks href=#hl-22-130>130</a>
</span><span class=lnt id=hl-22-131><a class=lnlinks href=#hl-22-131>131</a>
</span><span class=lnt id=hl-22-132><a class=lnlinks href=#hl-22-132>132</a>
</span><span class=lnt id=hl-22-133><a class=lnlinks href=#hl-22-133>133</a>
</span><span class=lnt id=hl-22-134><a class=lnlinks href=#hl-22-134>134</a>
</span><span class=lnt id=hl-22-135><a class=lnlinks href=#hl-22-135>135</a>
</span><span class=lnt id=hl-22-136><a class=lnlinks href=#hl-22-136>136</a>
</span><span class=lnt id=hl-22-137><a class=lnlinks href=#hl-22-137>137</a>
</span><span class=lnt id=hl-22-138><a class=lnlinks href=#hl-22-138>138</a>
</span><span class=lnt id=hl-22-139><a class=lnlinks href=#hl-22-139>139</a>
</span><span class=lnt id=hl-22-140><a class=lnlinks href=#hl-22-140>140</a>
</span><span class=lnt id=hl-22-141><a class=lnlinks href=#hl-22-141>141</a>
</span><span class=lnt id=hl-22-142><a class=lnlinks href=#hl-22-142>142</a>
</span><span class=lnt id=hl-22-143><a class=lnlinks href=#hl-22-143>143</a>
</span><span class=lnt id=hl-22-144><a class=lnlinks href=#hl-22-144>144</a>
</span><span class=lnt id=hl-22-145><a class=lnlinks href=#hl-22-145>145</a>
</span><span class=lnt id=hl-22-146><a class=lnlinks href=#hl-22-146>146</a>
</span><span class=lnt id=hl-22-147><a class=lnlinks href=#hl-22-147>147</a>
</span><span class=lnt id=hl-22-148><a class=lnlinks href=#hl-22-148>148</a>
</span><span class=lnt id=hl-22-149><a class=lnlinks href=#hl-22-149>149</a>
</span><span class=lnt id=hl-22-150><a class=lnlinks href=#hl-22-150>150</a>
</span><span class=lnt id=hl-22-151><a class=lnlinks href=#hl-22-151>151</a>
</span><span class=lnt id=hl-22-152><a class=lnlinks href=#hl-22-152>152</a>
</span><span class=lnt id=hl-22-153><a class=lnlinks href=#hl-22-153>153</a>
</span><span class=lnt id=hl-22-154><a class=lnlinks href=#hl-22-154>154</a>
</span><span class=lnt id=hl-22-155><a class=lnlinks href=#hl-22-155>155</a>
</span><span class=lnt id=hl-22-156><a class=lnlinks href=#hl-22-156>156</a>
</span><span class=lnt id=hl-22-157><a class=lnlinks href=#hl-22-157>157</a>
</span><span class=lnt id=hl-22-158><a class=lnlinks href=#hl-22-158>158</a>
</span><span class=lnt id=hl-22-159><a class=lnlinks href=#hl-22-159>159</a>
</span><span class=lnt id=hl-22-160><a class=lnlinks href=#hl-22-160>160</a>
</span><span class=lnt id=hl-22-161><a class=lnlinks href=#hl-22-161>161</a>
</span><span class=lnt id=hl-22-162><a class=lnlinks href=#hl-22-162>162</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># setup_replication.py - 복제 구성 자동화</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>mysql.connector</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>wait_for_mysql</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=p>,</span> <span class=n>max_attempts</span><span class=o>=</span><span class=mi>30</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;MySQL 서버가 준비될 때까지 대기&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>attempt</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>max_attempts</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>conn</span> <span class=o>=</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>host</span><span class=o>=</span><span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=n>port</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=n>user</span><span class=o>=</span><span class=s1>&#39;root&#39;</span><span class=p>,</span> <span class=n>password</span><span class=o>=</span><span class=s1>&#39;rootpassword&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;✅ MySQL </span><span class=si>{</span><span class=n>host</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s2> 연결 성공&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>Error</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;⏳ MySQL </span><span class=si>{</span><span class=n>host</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s2> 연결 대기 중... (</span><span class=si>{</span><span class=n>attempt</span><span class=o>+</span><span class=mi>1</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>max_attempts</span><span class=si>}</span><span class=s2>)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>setup_master_slave_replication</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;마스터-슬레이브 복제 설정&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 마스터 연결 및 상태 확인</span>
</span></span><span class=line><span class=cl>        <span class=n>master_conn</span> <span class=o>=</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>host</span><span class=o>=</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>3306</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>user</span><span class=o>=</span><span class=s1>&#39;root&#39;</span><span class=p>,</span> <span class=n>password</span><span class=o>=</span><span class=s1>&#39;rootpassword&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>cursor</span> <span class=o>=</span> <span class=n>master_conn</span><span class=o>.</span><span class=n>cursor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 마스터 상태 확인 (바이너리 로그 위치)</span>
</span></span><span class=line><span class=cl>        <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;SHOW MASTER STATUS&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>master_status</span> <span class=o>=</span> <span class=n>cursor</span><span class=o>.</span><span class=n>fetchone</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>log_file</span> <span class=o>=</span> <span class=n>master_status</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>  <span class=c1># 바이너리 로그 파일명</span>
</span></span><span class=line><span class=cl>        <span class=n>log_pos</span> <span class=o>=</span> <span class=n>master_status</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>   <span class=c1># 바이너리 로그 위치</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;📋 마스터 상태: </span><span class=si>{</span><span class=n>log_file</span><span class=si>}</span><span class=s2>, 위치: </span><span class=si>{</span><span class=n>log_pos</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 각 슬레이브 노드 설정</span>
</span></span><span class=line><span class=cl>        <span class=n>slaves</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span><span class=s1>&#39;host&#39;</span><span class=p>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=s1>&#39;port&#39;</span><span class=p>:</span> <span class=mi>3307</span><span class=p>,</span> <span class=s1>&#39;server_id&#39;</span><span class=p>:</span> <span class=mi>2</span><span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span><span class=s1>&#39;host&#39;</span><span class=p>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=s1>&#39;port&#39;</span><span class=p>:</span> <span class=mi>3308</span><span class=p>,</span> <span class=s1>&#39;server_id&#39;</span><span class=p>:</span> <span class=mi>3</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>slave</span> <span class=ow>in</span> <span class=n>slaves</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>slave_conn</span> <span class=o>=</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>host</span><span class=o>=</span><span class=n>slave</span><span class=p>[</span><span class=s1>&#39;host&#39;</span><span class=p>],</span> <span class=n>port</span><span class=o>=</span><span class=n>slave</span><span class=p>[</span><span class=s1>&#39;port&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=n>user</span><span class=o>=</span><span class=s1>&#39;root&#39;</span><span class=p>,</span> <span class=n>password</span><span class=o>=</span><span class=s1>&#39;rootpassword&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>slave_cursor</span> <span class=o>=</span> <span class=n>slave_conn</span><span class=o>.</span><span class=n>cursor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 기존 복제 중단 (혹시 실행 중이면)</span>
</span></span><span class=line><span class=cl>            <span class=n>slave_cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;STOP SLAVE&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 복제 소스 설정</span>
</span></span><span class=line><span class=cl>            <span class=n>change_master_sql</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            CHANGE MASTER TO
</span></span></span><span class=line><span class=cl><span class=s2>                MASTER_HOST=&#39;mysql-master&#39;,
</span></span></span><span class=line><span class=cl><span class=s2>                MASTER_USER=&#39;repl_user&#39;,
</span></span></span><span class=line><span class=cl><span class=s2>                MASTER_PASSWORD=&#39;repl_password&#39;,
</span></span></span><span class=line><span class=cl><span class=s2>                MASTER_LOG_FILE=&#39;</span><span class=si>{</span><span class=n>log_file</span><span class=si>}</span><span class=s2>&#39;,
</span></span></span><span class=line><span class=cl><span class=s2>                MASTER_LOG_POS=</span><span class=si>{</span><span class=n>log_pos</span><span class=si>}</span><span class=s2>,
</span></span></span><span class=line><span class=cl><span class=s2>                GET_MASTER_PUBLIC_KEY=1
</span></span></span><span class=line><span class=cl><span class=s2>            &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>slave_cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=n>change_master_sql</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 복제 시작</span>
</span></span><span class=line><span class=cl>            <span class=n>slave_cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;START SLAVE&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 복제 상태 확인</span>
</span></span><span class=line><span class=cl>            <span class=n>slave_cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;SHOW SLAVE STATUS&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>slave_status</span> <span class=o>=</span> <span class=n>slave_cursor</span><span class=o>.</span><span class=n>fetchone</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>slave_status</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>io_running</span> <span class=o>=</span> <span class=n>slave_status</span><span class=p>[</span><span class=mi>10</span><span class=p>]</span>    <span class=c1># Slave_IO_Running</span>
</span></span><span class=line><span class=cl>                <span class=n>sql_running</span> <span class=o>=</span> <span class=n>slave_status</span><span class=p>[</span><span class=mi>11</span><span class=p>]</span>   <span class=c1># Slave_SQL_Running</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>io_running</span> <span class=o>==</span> <span class=s1>&#39;Yes&#39;</span> <span class=ow>and</span> <span class=n>sql_running</span> <span class=o>==</span> <span class=s1>&#39;Yes&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;✅ 슬레이브 </span><span class=si>{</span><span class=n>slave</span><span class=p>[</span><span class=s1>&#39;port&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> 복제 시작 성공&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;❌ 슬레이브 </span><span class=si>{</span><span class=n>slave</span><span class=p>[</span><span class=s1>&#39;port&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> 복제 오류&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;   IO: </span><span class=si>{</span><span class=n>io_running</span><span class=si>}</span><span class=s2>, SQL: </span><span class=si>{</span><span class=n>sql_running</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>slave_cursor</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>slave_conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>cursor</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>master_conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;🎉 복제 설정 완료!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>Error</span> <span class=k>as</span> <span class=n>err</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;❌ 복제 설정 실패: </span><span class=si>{</span><span class=n>err</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>test_replication</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;복제 동작 테스트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 마스터에 데이터 삽입</span>
</span></span><span class=line><span class=cl>        <span class=n>master_conn</span> <span class=o>=</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>host</span><span class=o>=</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>3306</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>user</span><span class=o>=</span><span class=s1>&#39;app_user&#39;</span><span class=p>,</span> <span class=n>password</span><span class=o>=</span><span class=s1>&#39;app_password&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>database</span><span class=o>=</span><span class=s1>&#39;testdb&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>cursor</span> <span class=o>=</span> <span class=n>master_conn</span><span class=o>.</span><span class=n>cursor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;INSERT INTO users (username, email) VALUES (</span><span class=si>%s</span><span class=s2>, </span><span class=si>%s</span><span class=s2>)&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>(</span><span class=s1>&#39;test_user&#39;</span><span class=p>,</span> <span class=s1>&#39;test@example.com&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>master_conn</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;📝 마스터에 테스트 데이터 삽입&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 복제 지연 대기</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 슬레이브에서 데이터 확인</span>
</span></span><span class=line><span class=cl>        <span class=n>slave_conn</span> <span class=o>=</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>host</span><span class=o>=</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>3307</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>user</span><span class=o>=</span><span class=s1>&#39;app_user&#39;</span><span class=p>,</span> <span class=n>password</span><span class=o>=</span><span class=s1>&#39;app_password&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>database</span><span class=o>=</span><span class=s1>&#39;testdb&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>slave_cursor</span> <span class=o>=</span> <span class=n>slave_conn</span><span class=o>.</span><span class=n>cursor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>slave_cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;SELECT COUNT(*) FROM users WHERE username = &#39;test_user&#39;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>count</span> <span class=o>=</span> <span class=n>slave_cursor</span><span class=o>.</span><span class=n>fetchone</span><span class=p>()[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>count</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;✅ 복제 테스트 성공: 데이터가 슬레이브에 복제됨&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;❌ 복제 테스트 실패: 데이터가 복제되지 않음&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>cursor</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>master_conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>slave_cursor</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>slave_conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>Error</span> <span class=k>as</span> <span class=n>err</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;❌ 복제 테스트 실패: </span><span class=si>{</span><span class=n>err</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;🚀 MySQL 복제 설정 시작&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># MySQL 서버들이 준비될 때까지 대기</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>all</span><span class=p>([</span>
</span></span><span class=line><span class=cl>        <span class=n>wait_for_mysql</span><span class=p>(</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=mi>3306</span><span class=p>),</span>  <span class=c1># 마스터</span>
</span></span><span class=line><span class=cl>        <span class=n>wait_for_mysql</span><span class=p>(</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=mi>3307</span><span class=p>),</span>  <span class=c1># 슬레이브1</span>
</span></span><span class=line><span class=cl>        <span class=n>wait_for_mysql</span><span class=p>(</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=mi>3308</span><span class=p>)</span>   <span class=c1># 슬레이브2</span>
</span></span><span class=line><span class=cl>    <span class=p>]):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;❌ MySQL 서버 준비 실패&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 복제 설정 실행</span>
</span></span><span class=line><span class=cl>    <span class=n>setup_master_slave_replication</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 복제 동작 테스트</span>
</span></span><span class=line><span class=cl>    <span class=n>test_replication</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>5단계: 로드밸런서 설정 (읽기 분산)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-23-1><a class=lnlinks href=#hl-23-1> 1</a>
</span><span class=lnt id=hl-23-2><a class=lnlinks href=#hl-23-2> 2</a>
</span><span class=lnt id=hl-23-3><a class=lnlinks href=#hl-23-3> 3</a>
</span><span class=lnt id=hl-23-4><a class=lnlinks href=#hl-23-4> 4</a>
</span><span class=lnt id=hl-23-5><a class=lnlinks href=#hl-23-5> 5</a>
</span><span class=lnt id=hl-23-6><a class=lnlinks href=#hl-23-6> 6</a>
</span><span class=lnt id=hl-23-7><a class=lnlinks href=#hl-23-7> 7</a>
</span><span class=lnt id=hl-23-8><a class=lnlinks href=#hl-23-8> 8</a>
</span><span class=lnt id=hl-23-9><a class=lnlinks href=#hl-23-9> 9</a>
</span><span class=lnt id=hl-23-10><a class=lnlinks href=#hl-23-10>10</a>
</span><span class=lnt id=hl-23-11><a class=lnlinks href=#hl-23-11>11</a>
</span><span class=lnt id=hl-23-12><a class=lnlinks href=#hl-23-12>12</a>
</span><span class=lnt id=hl-23-13><a class=lnlinks href=#hl-23-13>13</a>
</span><span class=lnt id=hl-23-14><a class=lnlinks href=#hl-23-14>14</a>
</span><span class=lnt id=hl-23-15><a class=lnlinks href=#hl-23-15>15</a>
</span><span class=lnt id=hl-23-16><a class=lnlinks href=#hl-23-16>16</a>
</span><span class=lnt id=hl-23-17><a class=lnlinks href=#hl-23-17>17</a>
</span><span class=lnt id=hl-23-18><a class=lnlinks href=#hl-23-18>18</a>
</span><span class=lnt id=hl-23-19><a class=lnlinks href=#hl-23-19>19</a>
</span><span class=lnt id=hl-23-20><a class=lnlinks href=#hl-23-20>20</a>
</span><span class=lnt id=hl-23-21><a class=lnlinks href=#hl-23-21>21</a>
</span><span class=lnt id=hl-23-22><a class=lnlinks href=#hl-23-22>22</a>
</span><span class=lnt id=hl-23-23><a class=lnlinks href=#hl-23-23>23</a>
</span><span class=lnt id=hl-23-24><a class=lnlinks href=#hl-23-24>24</a>
</span><span class=lnt id=hl-23-25><a class=lnlinks href=#hl-23-25>25</a>
</span><span class=lnt id=hl-23-26><a class=lnlinks href=#hl-23-26>26</a>
</span><span class=lnt id=hl-23-27><a class=lnlinks href=#hl-23-27>27</a>
</span><span class=lnt id=hl-23-28><a class=lnlinks href=#hl-23-28>28</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># config/haproxy.cfg - 읽기 트래픽 분산
</span></span><span class=line><span class=cl>global
</span></span><span class=line><span class=cl>    daemon
</span></span><span class=line><span class=cl>    maxconn 256
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>defaults
</span></span><span class=line><span class=cl>    mode tcp
</span></span><span class=line><span class=cl>    timeout connect 5000ms
</span></span><span class=line><span class=cl>    timeout client 50000ms
</span></span><span class=line><span class=cl>    timeout server 50000ms
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 관리 인터페이스
</span></span><span class=line><span class=cl>stats enable
</span></span><span class=line><span class=cl>stats uri /stats
</span></span><span class=line><span class=cl>stats refresh 5s
</span></span><span class=line><span class=cl>stats admin if TRUE
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 읽기 전용 백엔드 (슬레이브들에 분산)
</span></span><span class=line><span class=cl>backend mysql_read_backend
</span></span><span class=line><span class=cl>    balance roundrobin
</span></span><span class=line><span class=cl>    option mysql-check user app_user
</span></span><span class=line><span class=cl>    server slave1 mysql-slave1:3306 check
</span></span><span class=line><span class=cl>    server slave2 mysql-slave2:3306 check
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 프론트엔드 (클라이언트 접속점)
</span></span><span class=line><span class=cl>frontend mysql_read_frontend
</span></span><span class=line><span class=cl>    bind *:3306
</span></span><span class=line><span class=cl>    default_backend mysql_read_backend
</span></span></code></pre></td></tr></table></div></div><h6 id=실행-결과-1>실행 결과<a hidden class=anchor aria-hidden=true href=#실행-결과-1>#</a></h6><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1> 1</a>
</span><span class=lnt id=hl-24-2><a class=lnlinks href=#hl-24-2> 2</a>
</span><span class=lnt id=hl-24-3><a class=lnlinks href=#hl-24-3> 3</a>
</span><span class=lnt id=hl-24-4><a class=lnlinks href=#hl-24-4> 4</a>
</span><span class=lnt id=hl-24-5><a class=lnlinks href=#hl-24-5> 5</a>
</span><span class=lnt id=hl-24-6><a class=lnlinks href=#hl-24-6> 6</a>
</span><span class=lnt id=hl-24-7><a class=lnlinks href=#hl-24-7> 7</a>
</span><span class=lnt id=hl-24-8><a class=lnlinks href=#hl-24-8> 8</a>
</span><span class=lnt id=hl-24-9><a class=lnlinks href=#hl-24-9> 9</a>
</span><span class=lnt id=hl-24-10><a class=lnlinks href=#hl-24-10>10</a>
</span><span class=lnt id=hl-24-11><a class=lnlinks href=#hl-24-11>11</a>
</span><span class=lnt id=hl-24-12><a class=lnlinks href=#hl-24-12>12</a>
</span><span class=lnt id=hl-24-13><a class=lnlinks href=#hl-24-13>13</a>
</span><span class=lnt id=hl-24-14><a class=lnlinks href=#hl-24-14>14</a>
</span><span class=lnt id=hl-24-15><a class=lnlinks href=#hl-24-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 환경 구축 실행</span>
</span></span><span class=line><span class=cl>docker-compose up -d
</span></span><span class=line><span class=cl>python setup_replication.py
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 예상 출력</span>
</span></span><span class=line><span class=cl>🚀 MySQL 복제 설정 시작
</span></span><span class=line><span class=cl>✅ MySQL localhost:3306 연결 성공
</span></span><span class=line><span class=cl>✅ MySQL localhost:3307 연결 성공
</span></span><span class=line><span class=cl>✅ MySQL localhost:3308 연결 성공
</span></span><span class=line><span class=cl>📋 마스터 상태: mysql-bin.000001, 위치: <span class=m>1234</span>
</span></span><span class=line><span class=cl>✅ 슬레이브 <span class=m>3307</span> 복제 시작 성공
</span></span><span class=line><span class=cl>✅ 슬레이브 <span class=m>3308</span> 복제 시작 성공
</span></span><span class=line><span class=cl>🎉 복제 설정 완료!
</span></span><span class=line><span class=cl>📝 마스터에 테스트 데이터 삽입
</span></span><span class=line><span class=cl>✅ 복제 테스트 성공: 데이터가 슬레이브에 복제됨
</span></span></code></pre></td></tr></table></div></div><h6 id=추가-실험-1>추가 실험<a hidden class=anchor aria-hidden=true href=#추가-실험-1>#</a></h6><ol><li><strong>장애 시뮬레이션</strong>: <code>docker stop mysql-slave1</code>로 슬레이브 장애 테스트</li><li><strong>성능 측정</strong>: <code>sysbench</code>를 이용한 읽기/쓰기 성능 비교</li><li><strong>복제 지연 분석</strong>: <code>SHOW SLAVE STATUS</code>의 <code>Seconds_Behind_Master</code> 모니터링</li></ol><h4 id=52-실제-도입-사례-분석-1>5.2 실제 도입 사례 분석<a hidden class=anchor aria-hidden=true href=#52-실제-도입-사례-분석-1>#</a></h4><h5 id=실제-도입-사례-netflix---글로벌-스트리밍-서비스>실제 도입 사례: Netflix - 글로벌 스트리밍 서비스<a hidden class=anchor aria-hidden=true href=#실제-도입-사례-netflix---글로벌-스트리밍-서비스>#</a></h5><h6 id=배경-및-도입-이유-1>배경 및 도입 이유<a hidden class=anchor aria-hidden=true href=#배경-및-도입-이유-1>#</a></h6><p>Netflix는 190개국 이상에서 2억+ 사용자에게 서비스를 제공하는 글로벌 스트리밍 플랫폼으로, 다음과 같은 복제 요구사항이 있었습니다:</p><ul><li><strong>지리적 분산</strong>: 전 세계 사용자에게 낮은 지연시간 제공</li><li><strong>고가용성</strong>: 99.99% 이상의 서비스 가용성 보장</li><li><strong>확장성</strong>: 급격한 사용자 증가와 트래픽 변동 대응</li><li><strong>개인화</strong>: 사용자별 맞춤 콘텐츠를 위한 실시간 데이터 처리</li></ul><h6 id=구현-아키텍처-1>구현 아키텍처<a hidden class=anchor aria-hidden=true href=#구현-아키텍처-1>#</a></h6><pre class=mermaid>graph TB
    subgraph &#34;Netflix 글로벌 복제 아키텍처&#34;
        subgraph &#34;사용자 계층&#34;
            US_Users[미국 사용자]
            EU_Users[유럽 사용자]
            ASIA_Users[아시아 사용자]
        end
        
        subgraph &#34;CDN 계층 (복제 캐시)&#34;
            US_CDN[AWS CloudFront&lt;br/&gt;미국 엣지]
            EU_CDN[AWS CloudFront&lt;br/&gt;유럽 엣지]
            ASIA_CDN[AWS CloudFront&lt;br/&gt;아시아 엣지]
        end
        
        subgraph &#34;애플리케이션 계층&#34;
            US_API[Netflix API&lt;br/&gt;us-east-1]
            EU_API[Netflix API&lt;br/&gt;eu-west-1]
            ASIA_API[Netflix API&lt;br/&gt;ap-northeast-1]
        end
        
        subgraph &#34;데이터베이스 계층&#34;
            subgraph &#34;사용자 데이터 (Cassandra 클러스터)&#34;
                US_CASS[Cassandra&lt;br/&gt;US 클러스터]
                EU_CASS[Cassandra&lt;br/&gt;EU 클러스터]
                ASIA_CASS[Cassandra&lt;br/&gt;ASIA 클러스터]
            end
            
            subgraph &#34;메타데이터 (MySQL 복제)&#34;
                MASTER_DB[MySQL 마스터&lt;br/&gt;us-east-1]
                EU_REPLICA[MySQL 읽기복제본&lt;br/&gt;eu-west-1]
                ASIA_REPLICA[MySQL 읽기복제본&lt;br/&gt;ap-northeast-1]
            end
        end
        
        subgraph &#34;추천 시스템 (실시간 복제)&#34;
            KAFKA_US[Kafka&lt;br/&gt;이벤트 스트림]
            KAFKA_EU[Kafka&lt;br/&gt;이벤트 스트림]
            ML_PIPELINE[ML 파이프라인&lt;br/&gt;실시간 학습]
        end
    end
    
    US_Users --&gt; US_CDN
    EU_Users --&gt; EU_CDN
    ASIA_Users --&gt; ASIA_CDN
    
    US_CDN --&gt; US_API
    EU_CDN --&gt; EU_API
    ASIA_CDN --&gt; ASIA_API
    
    US_API --&gt; US_CASS
    EU_API --&gt; EU_CASS
    ASIA_API --&gt; ASIA_CASS
    
    US_CASS &lt;--&gt; EU_CASS
    EU_CASS &lt;--&gt; ASIA_CASS
    ASIA_CASS &lt;--&gt; US_CASS
    
    MASTER_DB --&gt; EU_REPLICA
    MASTER_DB --&gt; ASIA_REPLICA
    
    US_API --&gt; KAFKA_US
    EU_API --&gt; KAFKA_EU
    KAFKA_US --&gt; ML_PIPELINE
    KAFKA_EU --&gt; ML_PIPELINE
</pre><h6 id=핵심-구현-코드-1>핵심 구현 코드<a hidden class=anchor aria-hidden=true href=#핵심-구현-코드-1>#</a></h6><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1>  1</a>
</span><span class=lnt id=hl-26-2><a class=lnlinks href=#hl-26-2>  2</a>
</span><span class=lnt id=hl-26-3><a class=lnlinks href=#hl-26-3>  3</a>
</span><span class=lnt id=hl-26-4><a class=lnlinks href=#hl-26-4>  4</a>
</span><span class=lnt id=hl-26-5><a class=lnlinks href=#hl-26-5>  5</a>
</span><span class=lnt id=hl-26-6><a class=lnlinks href=#hl-26-6>  6</a>
</span><span class=lnt id=hl-26-7><a class=lnlinks href=#hl-26-7>  7</a>
</span><span class=lnt id=hl-26-8><a class=lnlinks href=#hl-26-8>  8</a>
</span><span class=lnt id=hl-26-9><a class=lnlinks href=#hl-26-9>  9</a>
</span><span class=lnt id=hl-26-10><a class=lnlinks href=#hl-26-10> 10</a>
</span><span class=lnt id=hl-26-11><a class=lnlinks href=#hl-26-11> 11</a>
</span><span class=lnt id=hl-26-12><a class=lnlinks href=#hl-26-12> 12</a>
</span><span class=lnt id=hl-26-13><a class=lnlinks href=#hl-26-13> 13</a>
</span><span class=lnt id=hl-26-14><a class=lnlinks href=#hl-26-14> 14</a>
</span><span class=lnt id=hl-26-15><a class=lnlinks href=#hl-26-15> 15</a>
</span><span class=lnt id=hl-26-16><a class=lnlinks href=#hl-26-16> 16</a>
</span><span class=lnt id=hl-26-17><a class=lnlinks href=#hl-26-17> 17</a>
</span><span class=lnt id=hl-26-18><a class=lnlinks href=#hl-26-18> 18</a>
</span><span class=lnt id=hl-26-19><a class=lnlinks href=#hl-26-19> 19</a>
</span><span class=lnt id=hl-26-20><a class=lnlinks href=#hl-26-20> 20</a>
</span><span class=lnt id=hl-26-21><a class=lnlinks href=#hl-26-21> 21</a>
</span><span class=lnt id=hl-26-22><a class=lnlinks href=#hl-26-22> 22</a>
</span><span class=lnt id=hl-26-23><a class=lnlinks href=#hl-26-23> 23</a>
</span><span class=lnt id=hl-26-24><a class=lnlinks href=#hl-26-24> 24</a>
</span><span class=lnt id=hl-26-25><a class=lnlinks href=#hl-26-25> 25</a>
</span><span class=lnt id=hl-26-26><a class=lnlinks href=#hl-26-26> 26</a>
</span><span class=lnt id=hl-26-27><a class=lnlinks href=#hl-26-27> 27</a>
</span><span class=lnt id=hl-26-28><a class=lnlinks href=#hl-26-28> 28</a>
</span><span class=lnt id=hl-26-29><a class=lnlinks href=#hl-26-29> 29</a>
</span><span class=lnt id=hl-26-30><a class=lnlinks href=#hl-26-30> 30</a>
</span><span class=lnt id=hl-26-31><a class=lnlinks href=#hl-26-31> 31</a>
</span><span class=lnt id=hl-26-32><a class=lnlinks href=#hl-26-32> 32</a>
</span><span class=lnt id=hl-26-33><a class=lnlinks href=#hl-26-33> 33</a>
</span><span class=lnt id=hl-26-34><a class=lnlinks href=#hl-26-34> 34</a>
</span><span class=lnt id=hl-26-35><a class=lnlinks href=#hl-26-35> 35</a>
</span><span class=lnt id=hl-26-36><a class=lnlinks href=#hl-26-36> 36</a>
</span><span class=lnt id=hl-26-37><a class=lnlinks href=#hl-26-37> 37</a>
</span><span class=lnt id=hl-26-38><a class=lnlinks href=#hl-26-38> 38</a>
</span><span class=lnt id=hl-26-39><a class=lnlinks href=#hl-26-39> 39</a>
</span><span class=lnt id=hl-26-40><a class=lnlinks href=#hl-26-40> 40</a>
</span><span class=lnt id=hl-26-41><a class=lnlinks href=#hl-26-41> 41</a>
</span><span class=lnt id=hl-26-42><a class=lnlinks href=#hl-26-42> 42</a>
</span><span class=lnt id=hl-26-43><a class=lnlinks href=#hl-26-43> 43</a>
</span><span class=lnt id=hl-26-44><a class=lnlinks href=#hl-26-44> 44</a>
</span><span class=lnt id=hl-26-45><a class=lnlinks href=#hl-26-45> 45</a>
</span><span class=lnt id=hl-26-46><a class=lnlinks href=#hl-26-46> 46</a>
</span><span class=lnt id=hl-26-47><a class=lnlinks href=#hl-26-47> 47</a>
</span><span class=lnt id=hl-26-48><a class=lnlinks href=#hl-26-48> 48</a>
</span><span class=lnt id=hl-26-49><a class=lnlinks href=#hl-26-49> 49</a>
</span><span class=lnt id=hl-26-50><a class=lnlinks href=#hl-26-50> 50</a>
</span><span class=lnt id=hl-26-51><a class=lnlinks href=#hl-26-51> 51</a>
</span><span class=lnt id=hl-26-52><a class=lnlinks href=#hl-26-52> 52</a>
</span><span class=lnt id=hl-26-53><a class=lnlinks href=#hl-26-53> 53</a>
</span><span class=lnt id=hl-26-54><a class=lnlinks href=#hl-26-54> 54</a>
</span><span class=lnt id=hl-26-55><a class=lnlinks href=#hl-26-55> 55</a>
</span><span class=lnt id=hl-26-56><a class=lnlinks href=#hl-26-56> 56</a>
</span><span class=lnt id=hl-26-57><a class=lnlinks href=#hl-26-57> 57</a>
</span><span class=lnt id=hl-26-58><a class=lnlinks href=#hl-26-58> 58</a>
</span><span class=lnt id=hl-26-59><a class=lnlinks href=#hl-26-59> 59</a>
</span><span class=lnt id=hl-26-60><a class=lnlinks href=#hl-26-60> 60</a>
</span><span class=lnt id=hl-26-61><a class=lnlinks href=#hl-26-61> 61</a>
</span><span class=lnt id=hl-26-62><a class=lnlinks href=#hl-26-62> 62</a>
</span><span class=lnt id=hl-26-63><a class=lnlinks href=#hl-26-63> 63</a>
</span><span class=lnt id=hl-26-64><a class=lnlinks href=#hl-26-64> 64</a>
</span><span class=lnt id=hl-26-65><a class=lnlinks href=#hl-26-65> 65</a>
</span><span class=lnt id=hl-26-66><a class=lnlinks href=#hl-26-66> 66</a>
</span><span class=lnt id=hl-26-67><a class=lnlinks href=#hl-26-67> 67</a>
</span><span class=lnt id=hl-26-68><a class=lnlinks href=#hl-26-68> 68</a>
</span><span class=lnt id=hl-26-69><a class=lnlinks href=#hl-26-69> 69</a>
</span><span class=lnt id=hl-26-70><a class=lnlinks href=#hl-26-70> 70</a>
</span><span class=lnt id=hl-26-71><a class=lnlinks href=#hl-26-71> 71</a>
</span><span class=lnt id=hl-26-72><a class=lnlinks href=#hl-26-72> 72</a>
</span><span class=lnt id=hl-26-73><a class=lnlinks href=#hl-26-73> 73</a>
</span><span class=lnt id=hl-26-74><a class=lnlinks href=#hl-26-74> 74</a>
</span><span class=lnt id=hl-26-75><a class=lnlinks href=#hl-26-75> 75</a>
</span><span class=lnt id=hl-26-76><a class=lnlinks href=#hl-26-76> 76</a>
</span><span class=lnt id=hl-26-77><a class=lnlinks href=#hl-26-77> 77</a>
</span><span class=lnt id=hl-26-78><a class=lnlinks href=#hl-26-78> 78</a>
</span><span class=lnt id=hl-26-79><a class=lnlinks href=#hl-26-79> 79</a>
</span><span class=lnt id=hl-26-80><a class=lnlinks href=#hl-26-80> 80</a>
</span><span class=lnt id=hl-26-81><a class=lnlinks href=#hl-26-81> 81</a>
</span><span class=lnt id=hl-26-82><a class=lnlinks href=#hl-26-82> 82</a>
</span><span class=lnt id=hl-26-83><a class=lnlinks href=#hl-26-83> 83</a>
</span><span class=lnt id=hl-26-84><a class=lnlinks href=#hl-26-84> 84</a>
</span><span class=lnt id=hl-26-85><a class=lnlinks href=#hl-26-85> 85</a>
</span><span class=lnt id=hl-26-86><a class=lnlinks href=#hl-26-86> 86</a>
</span><span class=lnt id=hl-26-87><a class=lnlinks href=#hl-26-87> 87</a>
</span><span class=lnt id=hl-26-88><a class=lnlinks href=#hl-26-88> 88</a>
</span><span class=lnt id=hl-26-89><a class=lnlinks href=#hl-26-89> 89</a>
</span><span class=lnt id=hl-26-90><a class=lnlinks href=#hl-26-90> 90</a>
</span><span class=lnt id=hl-26-91><a class=lnlinks href=#hl-26-91> 91</a>
</span><span class=lnt id=hl-26-92><a class=lnlinks href=#hl-26-92> 92</a>
</span><span class=lnt id=hl-26-93><a class=lnlinks href=#hl-26-93> 93</a>
</span><span class=lnt id=hl-26-94><a class=lnlinks href=#hl-26-94> 94</a>
</span><span class=lnt id=hl-26-95><a class=lnlinks href=#hl-26-95> 95</a>
</span><span class=lnt id=hl-26-96><a class=lnlinks href=#hl-26-96> 96</a>
</span><span class=lnt id=hl-26-97><a class=lnlinks href=#hl-26-97> 97</a>
</span><span class=lnt id=hl-26-98><a class=lnlinks href=#hl-26-98> 98</a>
</span><span class=lnt id=hl-26-99><a class=lnlinks href=#hl-26-99> 99</a>
</span><span class=lnt id=hl-26-100><a class=lnlinks href=#hl-26-100>100</a>
</span><span class=lnt id=hl-26-101><a class=lnlinks href=#hl-26-101>101</a>
</span><span class=lnt id=hl-26-102><a class=lnlinks href=#hl-26-102>102</a>
</span><span class=lnt id=hl-26-103><a class=lnlinks href=#hl-26-103>103</a>
</span><span class=lnt id=hl-26-104><a class=lnlinks href=#hl-26-104>104</a>
</span><span class=lnt id=hl-26-105><a class=lnlinks href=#hl-26-105>105</a>
</span><span class=lnt id=hl-26-106><a class=lnlinks href=#hl-26-106>106</a>
</span><span class=lnt id=hl-26-107><a class=lnlinks href=#hl-26-107>107</a>
</span><span class=lnt id=hl-26-108><a class=lnlinks href=#hl-26-108>108</a>
</span><span class=lnt id=hl-26-109><a class=lnlinks href=#hl-26-109>109</a>
</span><span class=lnt id=hl-26-110><a class=lnlinks href=#hl-26-110>110</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Netflix EVCache - 분산 캐시 복제 (단순화된 버전)</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>hashlib</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>List</span><span class=p>,</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>EVCacheClient</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Netflix의 분산 캐시 시스템 (ElastiCache 기반)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>regions</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=n>replication_factor</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>3</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>regions</span> <span class=o>=</span> <span class=n>regions</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>replication_factor</span> <span class=o>=</span> <span class=n>replication_factor</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>cache_nodes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_initialize_cache_nodes</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_initialize_cache_nodes</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;지역별 캐시 노드 초기화&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>region</span><span class=p>:</span> <span class=p>[</span><span class=sa>f</span><span class=s2>&#34;cache-</span><span class=si>{</span><span class=n>region</span><span class=si>}</span><span class=s2>-</span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s2>.netflix.com&#34;</span> 
</span></span><span class=line><span class=cl>                    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>replication_factor</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>region</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>regions</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_get_consistent_hash_nodes</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>region</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;일관된 해싱을 통한 노드 선택&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>hash_value</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>hashlib</span><span class=o>.</span><span class=n>md5</span><span class=p>(</span><span class=n>key</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span><span class=o>.</span><span class=n>hexdigest</span><span class=p>(),</span> <span class=mi>16</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>nodes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache_nodes</span><span class=p>[</span><span class=n>region</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>start_index</span> <span class=o>=</span> <span class=n>hash_value</span> <span class=o>%</span> <span class=nb>len</span><span class=p>(</span><span class=n>nodes</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 복제 팩터만큼 노드 선택 (순환)</span>
</span></span><span class=line><span class=cl>        <span class=n>selected_nodes</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>replication_factor</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>node_index</span> <span class=o>=</span> <span class=p>(</span><span class=n>start_index</span> <span class=o>+</span> <span class=n>i</span><span class=p>)</span> <span class=o>%</span> <span class=nb>len</span><span class=p>(</span><span class=n>nodes</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>selected_nodes</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>nodes</span><span class=p>[</span><span class=n>node_index</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>selected_nodes</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>any</span><span class=p>,</span> <span class=n>ttl</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>3600</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;모든 지역에 데이터 복제 저장&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>serialized_value</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>success_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>region</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>regions</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>nodes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_consistent_hash_nodes</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>region</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=c1># 실제로는 memcached 프로토콜 사용</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store_to_node</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>serialized_value</span><span class=p>,</span> <span class=n>ttl</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                        <span class=n>success_count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>                        
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;지역 </span><span class=si>{</span><span class=n>region</span><span class=si>}</span><span class=s2> 복제 실패: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 과반수 성공 시 성공으로 간주</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>success_count</span> <span class=o>&gt;=</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>regions</span><span class=p>)</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>replication_factor</span> <span class=o>//</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>preferred_region</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;가장 가까운 지역에서 데이터 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>preferred_region</span> <span class=ow>and</span> <span class=n>preferred_region</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>regions</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>search_order</span> <span class=o>=</span> <span class=p>[</span><span class=n>preferred_region</span><span class=p>]</span> <span class=o>+</span> <span class=p>[</span><span class=n>r</span> <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>regions</span> <span class=k>if</span> <span class=n>r</span> <span class=o>!=</span> <span class=n>preferred_region</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>search_order</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>regions</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>region</span> <span class=ow>in</span> <span class=n>search_order</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>nodes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_consistent_hash_nodes</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>region</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_from_node</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;지역 </span><span class=si>{</span><span class=n>region</span><span class=si>}</span><span class=s2> 조회 실패: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>continue</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_store_to_node</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>node</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>ttl</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;개별 노드에 데이터 저장 (실제로는 memcached 클라이언트 사용)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제 구현에서는 Memcached/Redis 클라이언트 사용</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;저장: </span><span class=si>{</span><span class=n>node</span><span class=si>}</span><span class=s2> &lt;- </span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_get_from_node</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>node</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;개별 노드에서 데이터 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제 구현에서는 Memcached/Redis 클라이언트 사용</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;조회: </span><span class=si>{</span><span class=n>node</span><span class=si>}</span><span class=s2> -&gt; </span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s1>&#39;{&#34;cached&#34;: &#34;data&#34;}&#39;</span>  <span class=c1># 모의 데이터</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시: 사용자 프로필 캐싱</span>
</span></span><span class=line><span class=cl><span class=n>evcache</span> <span class=o>=</span> <span class=n>EVCacheClient</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>regions</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;us-east-1&#39;</span><span class=p>,</span> <span class=s1>&#39;eu-west-1&#39;</span><span class=p>,</span> <span class=s1>&#39;ap-northeast-1&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>replication_factor</span><span class=o>=</span><span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용자 프로필 저장 (글로벌 복제)</span>
</span></span><span class=line><span class=cl><span class=n>user_profile</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;user_id&#39;</span><span class=p>:</span> <span class=s1>&#39;12345&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=s1>&#39;John Doe&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;preferences&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;genres&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;action&#39;</span><span class=p>,</span> <span class=s1>&#39;comedy&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;language&#39;</span><span class=p>:</span> <span class=s1>&#39;en-US&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;viewing_history&#39;</span><span class=p>:</span> <span class=p>[</span><span class=o>...</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>evcache</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=s1>&#39;user:12345:profile&#39;</span><span class=p>,</span> <span class=n>user_profile</span><span class=p>,</span> <span class=n>ttl</span><span class=o>=</span><span class=mi>3600</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용자의 지역에서 프로필 조회</span>
</span></span><span class=line><span class=cl><span class=n>profile</span> <span class=o>=</span> <span class=n>evcache</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;user:12345:profile&#39;</span><span class=p>,</span> <span class=n>preferred_region</span><span class=o>=</span><span class=s1>&#39;eu-west-1&#39;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-27-1><a class=lnlinks href=#hl-27-1>  1</a>
</span><span class=lnt id=hl-27-2><a class=lnlinks href=#hl-27-2>  2</a>
</span><span class=lnt id=hl-27-3><a class=lnlinks href=#hl-27-3>  3</a>
</span><span class=lnt id=hl-27-4><a class=lnlinks href=#hl-27-4>  4</a>
</span><span class=lnt id=hl-27-5><a class=lnlinks href=#hl-27-5>  5</a>
</span><span class=lnt id=hl-27-6><a class=lnlinks href=#hl-27-6>  6</a>
</span><span class=lnt id=hl-27-7><a class=lnlinks href=#hl-27-7>  7</a>
</span><span class=lnt id=hl-27-8><a class=lnlinks href=#hl-27-8>  8</a>
</span><span class=lnt id=hl-27-9><a class=lnlinks href=#hl-27-9>  9</a>
</span><span class=lnt id=hl-27-10><a class=lnlinks href=#hl-27-10> 10</a>
</span><span class=lnt id=hl-27-11><a class=lnlinks href=#hl-27-11> 11</a>
</span><span class=lnt id=hl-27-12><a class=lnlinks href=#hl-27-12> 12</a>
</span><span class=lnt id=hl-27-13><a class=lnlinks href=#hl-27-13> 13</a>
</span><span class=lnt id=hl-27-14><a class=lnlinks href=#hl-27-14> 14</a>
</span><span class=lnt id=hl-27-15><a class=lnlinks href=#hl-27-15> 15</a>
</span><span class=lnt id=hl-27-16><a class=lnlinks href=#hl-27-16> 16</a>
</span><span class=lnt id=hl-27-17><a class=lnlinks href=#hl-27-17> 17</a>
</span><span class=lnt id=hl-27-18><a class=lnlinks href=#hl-27-18> 18</a>
</span><span class=lnt id=hl-27-19><a class=lnlinks href=#hl-27-19> 19</a>
</span><span class=lnt id=hl-27-20><a class=lnlinks href=#hl-27-20> 20</a>
</span><span class=lnt id=hl-27-21><a class=lnlinks href=#hl-27-21> 21</a>
</span><span class=lnt id=hl-27-22><a class=lnlinks href=#hl-27-22> 22</a>
</span><span class=lnt id=hl-27-23><a class=lnlinks href=#hl-27-23> 23</a>
</span><span class=lnt id=hl-27-24><a class=lnlinks href=#hl-27-24> 24</a>
</span><span class=lnt id=hl-27-25><a class=lnlinks href=#hl-27-25> 25</a>
</span><span class=lnt id=hl-27-26><a class=lnlinks href=#hl-27-26> 26</a>
</span><span class=lnt id=hl-27-27><a class=lnlinks href=#hl-27-27> 27</a>
</span><span class=lnt id=hl-27-28><a class=lnlinks href=#hl-27-28> 28</a>
</span><span class=lnt id=hl-27-29><a class=lnlinks href=#hl-27-29> 29</a>
</span><span class=lnt id=hl-27-30><a class=lnlinks href=#hl-27-30> 30</a>
</span><span class=lnt id=hl-27-31><a class=lnlinks href=#hl-27-31> 31</a>
</span><span class=lnt id=hl-27-32><a class=lnlinks href=#hl-27-32> 32</a>
</span><span class=lnt id=hl-27-33><a class=lnlinks href=#hl-27-33> 33</a>
</span><span class=lnt id=hl-27-34><a class=lnlinks href=#hl-27-34> 34</a>
</span><span class=lnt id=hl-27-35><a class=lnlinks href=#hl-27-35> 35</a>
</span><span class=lnt id=hl-27-36><a class=lnlinks href=#hl-27-36> 36</a>
</span><span class=lnt id=hl-27-37><a class=lnlinks href=#hl-27-37> 37</a>
</span><span class=lnt id=hl-27-38><a class=lnlinks href=#hl-27-38> 38</a>
</span><span class=lnt id=hl-27-39><a class=lnlinks href=#hl-27-39> 39</a>
</span><span class=lnt id=hl-27-40><a class=lnlinks href=#hl-27-40> 40</a>
</span><span class=lnt id=hl-27-41><a class=lnlinks href=#hl-27-41> 41</a>
</span><span class=lnt id=hl-27-42><a class=lnlinks href=#hl-27-42> 42</a>
</span><span class=lnt id=hl-27-43><a class=lnlinks href=#hl-27-43> 43</a>
</span><span class=lnt id=hl-27-44><a class=lnlinks href=#hl-27-44> 44</a>
</span><span class=lnt id=hl-27-45><a class=lnlinks href=#hl-27-45> 45</a>
</span><span class=lnt id=hl-27-46><a class=lnlinks href=#hl-27-46> 46</a>
</span><span class=lnt id=hl-27-47><a class=lnlinks href=#hl-27-47> 47</a>
</span><span class=lnt id=hl-27-48><a class=lnlinks href=#hl-27-48> 48</a>
</span><span class=lnt id=hl-27-49><a class=lnlinks href=#hl-27-49> 49</a>
</span><span class=lnt id=hl-27-50><a class=lnlinks href=#hl-27-50> 50</a>
</span><span class=lnt id=hl-27-51><a class=lnlinks href=#hl-27-51> 51</a>
</span><span class=lnt id=hl-27-52><a class=lnlinks href=#hl-27-52> 52</a>
</span><span class=lnt id=hl-27-53><a class=lnlinks href=#hl-27-53> 53</a>
</span><span class=lnt id=hl-27-54><a class=lnlinks href=#hl-27-54> 54</a>
</span><span class=lnt id=hl-27-55><a class=lnlinks href=#hl-27-55> 55</a>
</span><span class=lnt id=hl-27-56><a class=lnlinks href=#hl-27-56> 56</a>
</span><span class=lnt id=hl-27-57><a class=lnlinks href=#hl-27-57> 57</a>
</span><span class=lnt id=hl-27-58><a class=lnlinks href=#hl-27-58> 58</a>
</span><span class=lnt id=hl-27-59><a class=lnlinks href=#hl-27-59> 59</a>
</span><span class=lnt id=hl-27-60><a class=lnlinks href=#hl-27-60> 60</a>
</span><span class=lnt id=hl-27-61><a class=lnlinks href=#hl-27-61> 61</a>
</span><span class=lnt id=hl-27-62><a class=lnlinks href=#hl-27-62> 62</a>
</span><span class=lnt id=hl-27-63><a class=lnlinks href=#hl-27-63> 63</a>
</span><span class=lnt id=hl-27-64><a class=lnlinks href=#hl-27-64> 64</a>
</span><span class=lnt id=hl-27-65><a class=lnlinks href=#hl-27-65> 65</a>
</span><span class=lnt id=hl-27-66><a class=lnlinks href=#hl-27-66> 66</a>
</span><span class=lnt id=hl-27-67><a class=lnlinks href=#hl-27-67> 67</a>
</span><span class=lnt id=hl-27-68><a class=lnlinks href=#hl-27-68> 68</a>
</span><span class=lnt id=hl-27-69><a class=lnlinks href=#hl-27-69> 69</a>
</span><span class=lnt id=hl-27-70><a class=lnlinks href=#hl-27-70> 70</a>
</span><span class=lnt id=hl-27-71><a class=lnlinks href=#hl-27-71> 71</a>
</span><span class=lnt id=hl-27-72><a class=lnlinks href=#hl-27-72> 72</a>
</span><span class=lnt id=hl-27-73><a class=lnlinks href=#hl-27-73> 73</a>
</span><span class=lnt id=hl-27-74><a class=lnlinks href=#hl-27-74> 74</a>
</span><span class=lnt id=hl-27-75><a class=lnlinks href=#hl-27-75> 75</a>
</span><span class=lnt id=hl-27-76><a class=lnlinks href=#hl-27-76> 76</a>
</span><span class=lnt id=hl-27-77><a class=lnlinks href=#hl-27-77> 77</a>
</span><span class=lnt id=hl-27-78><a class=lnlinks href=#hl-27-78> 78</a>
</span><span class=lnt id=hl-27-79><a class=lnlinks href=#hl-27-79> 79</a>
</span><span class=lnt id=hl-27-80><a class=lnlinks href=#hl-27-80> 80</a>
</span><span class=lnt id=hl-27-81><a class=lnlinks href=#hl-27-81> 81</a>
</span><span class=lnt id=hl-27-82><a class=lnlinks href=#hl-27-82> 82</a>
</span><span class=lnt id=hl-27-83><a class=lnlinks href=#hl-27-83> 83</a>
</span><span class=lnt id=hl-27-84><a class=lnlinks href=#hl-27-84> 84</a>
</span><span class=lnt id=hl-27-85><a class=lnlinks href=#hl-27-85> 85</a>
</span><span class=lnt id=hl-27-86><a class=lnlinks href=#hl-27-86> 86</a>
</span><span class=lnt id=hl-27-87><a class=lnlinks href=#hl-27-87> 87</a>
</span><span class=lnt id=hl-27-88><a class=lnlinks href=#hl-27-88> 88</a>
</span><span class=lnt id=hl-27-89><a class=lnlinks href=#hl-27-89> 89</a>
</span><span class=lnt id=hl-27-90><a class=lnlinks href=#hl-27-90> 90</a>
</span><span class=lnt id=hl-27-91><a class=lnlinks href=#hl-27-91> 91</a>
</span><span class=lnt id=hl-27-92><a class=lnlinks href=#hl-27-92> 92</a>
</span><span class=lnt id=hl-27-93><a class=lnlinks href=#hl-27-93> 93</a>
</span><span class=lnt id=hl-27-94><a class=lnlinks href=#hl-27-94> 94</a>
</span><span class=lnt id=hl-27-95><a class=lnlinks href=#hl-27-95> 95</a>
</span><span class=lnt id=hl-27-96><a class=lnlinks href=#hl-27-96> 96</a>
</span><span class=lnt id=hl-27-97><a class=lnlinks href=#hl-27-97> 97</a>
</span><span class=lnt id=hl-27-98><a class=lnlinks href=#hl-27-98> 98</a>
</span><span class=lnt id=hl-27-99><a class=lnlinks href=#hl-27-99> 99</a>
</span><span class=lnt id=hl-27-100><a class=lnlinks href=#hl-27-100>100</a>
</span><span class=lnt id=hl-27-101><a class=lnlinks href=#hl-27-101>101</a>
</span><span class=lnt id=hl-27-102><a class=lnlinks href=#hl-27-102>102</a>
</span><span class=lnt id=hl-27-103><a class=lnlinks href=#hl-27-103>103</a>
</span><span class=lnt id=hl-27-104><a class=lnlinks href=#hl-27-104>104</a>
</span><span class=lnt id=hl-27-105><a class=lnlinks href=#hl-27-105>105</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Netflix Zuul - API 게이트웨이 라우팅 (복제본 선택)</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>random</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>List</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ZuulGateway</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Netflix API 게이트웨이 - 지역별 복제본 라우팅&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>service_registry</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;user-service&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;us-east-1&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;user-svc-1.us.netflix.com&#39;</span><span class=p>,</span> <span class=s1>&#39;user-svc-2.us.netflix.com&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;eu-west-1&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;user-svc-1.eu.netflix.com&#39;</span><span class=p>,</span> <span class=s1>&#39;user-svc-2.eu.netflix.com&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;ap-northeast-1&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;user-svc-1.asia.netflix.com&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;recommendation-service&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;us-east-1&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;rec-svc-1.us.netflix.com&#39;</span><span class=p>,</span> <span class=s1>&#39;rec-svc-2.us.netflix.com&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;eu-west-1&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;rec-svc-1.eu.netflix.com&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;ap-northeast-1&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;rec-svc-1.asia.netflix.com&#39;</span><span class=p>,</span> <span class=s1>&#39;rec-svc-2.asia.netflix.com&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>health_status</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># 서비스 헬스 체크 결과</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>circuit_breakers</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># 서킷 브레이커 상태</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>route_request</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>service_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>user_region</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>request_data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;사용자 요청을 최적의 복제본으로 라우팅&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 1. 사용자 지역의 서비스 우선 시도</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>user_region</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>service_registry</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>service_name</span><span class=p>,</span> <span class=p>{}):</span>
</span></span><span class=line><span class=cl>            <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_try_regional_services</span><span class=p>(</span><span class=n>service_name</span><span class=p>,</span> <span class=n>user_region</span><span class=p>,</span> <span class=n>request_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>result</span><span class=p>[</span><span class=s1>&#39;success&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 2. 인접 지역 서비스로 폴백</span>
</span></span><span class=line><span class=cl>        <span class=n>fallback_regions</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_fallback_regions</span><span class=p>(</span><span class=n>user_region</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>region</span> <span class=ow>in</span> <span class=n>fallback_regions</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>region</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>service_registry</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>service_name</span><span class=p>,</span> <span class=p>{}):</span>
</span></span><span class=line><span class=cl>                <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_try_regional_services</span><span class=p>(</span><span class=n>service_name</span><span class=p>,</span> <span class=n>region</span><span class=p>,</span> <span class=n>request_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>result</span><span class=p>[</span><span class=s1>&#39;success&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 3. 모든 지역 실패 시 에러 응답</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;success&#39;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span> <span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=s1>&#39;All services unavailable&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_try_regional_services</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>service_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>region</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>request_data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;특정 지역의 서비스 인스턴스들을 시도&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>services</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>service_registry</span><span class=p>[</span><span class=n>service_name</span><span class=p>][</span><span class=n>region</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>healthy_services</span> <span class=o>=</span> <span class=p>[</span><span class=n>svc</span> <span class=k>for</span> <span class=n>svc</span> <span class=ow>in</span> <span class=n>services</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_healthy</span><span class=p>(</span><span class=n>svc</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>healthy_services</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;success&#39;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span> <span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s1>&#39;No healthy services in </span><span class=si>{</span><span class=n>region</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 로드밸런싱: 라운드 로빈 + 랜덤</span>
</span></span><span class=line><span class=cl>        <span class=n>selected_service</span> <span class=o>=</span> <span class=n>random</span><span class=o>.</span><span class=n>choice</span><span class=p>(</span><span class=n>healthy_services</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 실제로는 HTTP 클라이언트로 요청</span>
</span></span><span class=line><span class=cl>            <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_make_service_call</span><span class=p>(</span><span class=n>selected_service</span><span class=p>,</span> <span class=n>request_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;success&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span> <span class=s1>&#39;data&#39;</span><span class=p>:</span> <span class=n>response</span><span class=p>,</span> <span class=s1>&#39;service&#39;</span><span class=p>:</span> <span class=n>selected_service</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 서킷 브레이커 트리거</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_trigger_circuit_breaker</span><span class=p>(</span><span class=n>selected_service</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;success&#39;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span> <span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_get_fallback_regions</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>primary_region</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;지리적 거리 기반 폴백 지역 순서&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>fallback_map</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;us-east-1&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;us-west-2&#39;</span><span class=p>,</span> <span class=s1>&#39;eu-west-1&#39;</span><span class=p>,</span> <span class=s1>&#39;ap-northeast-1&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;eu-west-1&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;us-east-1&#39;</span><span class=p>,</span> <span class=s1>&#39;ap-northeast-1&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;ap-northeast-1&#39;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;us-west-2&#39;</span><span class=p>,</span> <span class=s1>&#39;us-east-1&#39;</span><span class=p>,</span> <span class=s1>&#39;eu-west-1&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>fallback_map</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>primary_region</span><span class=p>,</span> <span class=p>[])</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_is_healthy</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>service_url</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;서비스 헬스 체크 (실제로는 별도 헬스 체커가 주기적 실행)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>health_status</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>service_url</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_make_service_call</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>service_url</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>request_data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;실제 서비스 호출 (HTTP 클라이언트)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 모의 응답</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>  <span class=c1># 네트워크 지연 시뮬레이션</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;result&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s1>&#39;Response from </span><span class=si>{</span><span class=n>service_url</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>,</span> <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_trigger_circuit_breaker</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>service_url</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;서킷 브레이커 활성화&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>circuit_breakers</span><span class=p>[</span><span class=n>service_url</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;state&#39;</span><span class=p>:</span> <span class=s1>&#39;OPEN&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;failure_time&#39;</span><span class=p>:</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;failure_count&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>circuit_breakers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>service_url</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;failure_count&#39;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;⚠️  서킷 브레이커 활성화: </span><span class=si>{</span><span class=n>service_url</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>gateway</span> <span class=o>=</span> <span class=n>ZuulGateway</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 유럽 사용자의 추천 서비스 요청</span>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>gateway</span><span class=o>.</span><span class=n>route_request</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>service_name</span><span class=o>=</span><span class=s1>&#39;recommendation-service&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>user_region</span><span class=o>=</span><span class=s1>&#39;eu-west-1&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>request_data</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;user_id&#39;</span><span class=p>:</span> <span class=s1>&#39;12345&#39;</span><span class=p>,</span> <span class=s1>&#39;content_type&#39;</span><span class=p>:</span> <span class=s1>&#39;movies&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;라우팅 결과: </span><span class=si>{</span><span class=n>result</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=성과-및-결과-1>성과 및 결과<a hidden class=anchor aria-hidden=true href=#성과-및-결과-1>#</a></h6><p><strong>정량적 성과:</strong></p><ul><li><strong>지연시간 개선</strong>: 평균 응답 시간 60% 감소 (300ms → 120ms)</li><li><strong>가용성 향상</strong>: 99.95% → 99.99% (연간 다운타임 4.4시간 → 52분)</li><li><strong>트래픽 처리</strong>: 글로벌 동시 접속자 1억+ 처리 가능</li><li><strong>비용 효율성</strong>: 단일 중앙 집중 대비 30% 비용 절감</li></ul><p><strong>정성적 개선:</strong></p><ul><li><strong>사용자 경험</strong>: 지역별 맞춤 콘텐츠 및 빠른 로딩</li><li><strong>운영 효율성</strong>: 자동화된 장애 복구 및 확장</li><li><strong>개발자 생산성</strong>: 마이크로서비스 아키텍처로 독립적 배포</li></ul><h6 id=교훈-및-시사점-1>교훈 및 시사점<a hidden class=anchor aria-hidden=true href=#교훈-및-시사점-1>#</a></h6><ol><li><strong>지역별 복제 전략</strong>: 사용자 위치 기반 지능형 라우팅이 성능 핵심</li><li><strong>다계층 복제</strong>: CDN, 애플리케이션, 데이터베이스 각 계층별 복제 최적화</li><li><strong>장애 격리</strong>: 서킷 브레이커와 폴백 메커니즘으로 연쇄 장애 방지</li><li><strong>모니터링 중요성</strong>: 실시간 성능 지표를 통한 동적 라우팅 조정</li><li><strong>점진적 롤아웃</strong>: 카나리 배포를 통한 안전한 복제 구성 변경</li></ol><p><strong>재현 시 고려사항:</strong></p><ul><li>초기에는 2-3개 지역으로 시작하여 점진적 확장</li><li>네트워크 품질과 지연시간을 고려한 복제 토폴로지 설계</li><li>비즈니스 중요도에 따른 차등적 복제 전략 적용</li></ul><h4 id=53-통합-및-연계-기술-1>5.3 통합 및 연계 기술<a hidden class=anchor aria-hidden=true href=#53-통합-및-연계-기술-1>#</a></h4><p><strong>복제와 연계되는 핵심 기술들:</strong></p><p><strong>1. 로드밸런싱 (Load Balancing)</strong></p><p>복제 시스템에서 로드밸런싱은 <strong>읽기 트래픽을 여러 복제본에 분산</strong>하여 성능을 최적화하는 핵심 기술입니다.</p><ul><li><strong>왜 통합하는가</strong>: 복제본을 생성했더라도 트래픽 분산이 없으면 일부 노드만 과부하</li><li><strong>무엇을</strong>: HAProxy, NGINX, AWS ALB 등을 통한 지능형 트래픽 분산</li><li><strong>어떻게</strong>: 헬스 체크, 가중치 기반 라우팅, 세션 어피니티 설정</li><li><strong>가치</strong>: 전체 시스템 처리량 300-500% 향상, 단일 노드 부하 분산</li></ul><p><strong>2. 캐싱 시스템 (Caching)</strong></p><p>복제와 캐싱의 조합은 <strong>다계층 데이터 접근 최적화</strong>를 통해 극대화된 성능을 제공합니다.</p><ul><li><strong>왜 통합하는가</strong>: 복제만으로는 디스크 I/O 병목 해결 한계, 네트워크 지연 존재</li><li><strong>무엇을</strong>: Redis 클러스터, Memcached, CDN과 데이터베이스 복제 조합</li><li><strong>어떻게</strong>: 캐시 미스 시 복제본에서 조회, 쓰기 시 캐시 무효화 및 복제 동기화</li><li><strong>가치</strong>: 응답 시간 90% 이상 단축, 데이터베이스 부하 80% 감소</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-28-1><a class=lnlinks href=#hl-28-1> 1</a>
</span><span class=lnt id=hl-28-2><a class=lnlinks href=#hl-28-2> 2</a>
</span><span class=lnt id=hl-28-3><a class=lnlinks href=#hl-28-3> 3</a>
</span><span class=lnt id=hl-28-4><a class=lnlinks href=#hl-28-4> 4</a>
</span><span class=lnt id=hl-28-5><a class=lnlinks href=#hl-28-5> 5</a>
</span><span class=lnt id=hl-28-6><a class=lnlinks href=#hl-28-6> 6</a>
</span><span class=lnt id=hl-28-7><a class=lnlinks href=#hl-28-7> 7</a>
</span><span class=lnt id=hl-28-8><a class=lnlinks href=#hl-28-8> 8</a>
</span><span class=lnt id=hl-28-9><a class=lnlinks href=#hl-28-9> 9</a>
</span><span class=lnt id=hl-28-10><a class=lnlinks href=#hl-28-10>10</a>
</span><span class=lnt id=hl-28-11><a class=lnlinks href=#hl-28-11>11</a>
</span><span class=lnt id=hl-28-12><a class=lnlinks href=#hl-28-12>12</a>
</span><span class=lnt id=hl-28-13><a class=lnlinks href=#hl-28-13>13</a>
</span><span class=lnt id=hl-28-14><a class=lnlinks href=#hl-28-14>14</a>
</span><span class=lnt id=hl-28-15><a class=lnlinks href=#hl-28-15>15</a>
</span><span class=lnt id=hl-28-16><a class=lnlinks href=#hl-28-16>16</a>
</span><span class=lnt id=hl-28-17><a class=lnlinks href=#hl-28-17>17</a>
</span><span class=lnt id=hl-28-18><a class=lnlinks href=#hl-28-18>18</a>
</span><span class=lnt id=hl-28-19><a class=lnlinks href=#hl-28-19>19</a>
</span><span class=lnt id=hl-28-20><a class=lnlinks href=#hl-28-20>20</a>
</span><span class=lnt id=hl-28-21><a class=lnlinks href=#hl-28-21>21</a>
</span><span class=lnt id=hl-28-22><a class=lnlinks href=#hl-28-22>22</a>
</span><span class=lnt id=hl-28-23><a class=lnlinks href=#hl-28-23>23</a>
</span><span class=lnt id=hl-28-24><a class=lnlinks href=#hl-28-24>24</a>
</span><span class=lnt id=hl-28-25><a class=lnlinks href=#hl-28-25>25</a>
</span><span class=lnt id=hl-28-26><a class=lnlinks href=#hl-28-26>26</a>
</span><span class=lnt id=hl-28-27><a class=lnlinks href=#hl-28-27>27</a>
</span><span class=lnt id=hl-28-28><a class=lnlinks href=#hl-28-28>28</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 복제 + 캐싱 통합 예시</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ReplicationWithCaching</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cache_client</span><span class=p>,</span> <span class=n>read_replicas</span><span class=p>,</span> <span class=n>master_db</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>cache</span> <span class=o>=</span> <span class=n>cache_client</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>read_replicas</span> <span class=o>=</span> <span class=n>read_replicas</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>master</span> <span class=o>=</span> <span class=n>master_db</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_user_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시 → 읽기 복제본 → 마스터 순서로 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 1단계: 캐시에서 조회</span>
</span></span><span class=line><span class=cl>        <span class=n>cached_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;user:</span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>cached_data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>cached_data</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 2단계: 읽기 복제본에서 조회</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>replica</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>read_replicas</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>data</span> <span class=o>=</span> <span class=n>replica</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;SELECT * FROM users WHERE id = </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=c1># 캐시에 저장 (TTL 설정)</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;user:</span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>data</span><span class=p>,</span> <span class=n>ttl</span><span class=o>=</span><span class=mi>3600</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=n>data</span>
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>continue</span>  <span class=c1># 다음 복제본 시도</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 3단계: 마스터에서 조회 (최후 수단)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>master</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;SELECT * FROM users WHERE id = </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>3. 메시지 큐 시스템 (Message Queue)</strong></p><p>비동기 복제에서 메시지 큐는 <strong>안정적인 변경 이벤트 전파</strong>를 보장하는 백본 역할을 합니다.</p><ul><li><strong>왜 통합하는가</strong>: 네트워크 장애나 일시적 노드 다운 시에도 복제 일관성 보장 필요</li><li><strong>무엇을</strong>: Apache Kafka, RabbitMQ, AWS SQS를 통한 이벤트 스트리밍</li><li><strong>어떻게</strong>: 변경 로그를 메시지로 발행, 복제본들이 구독하여 적용</li><li><strong>가치</strong>: 복제 신뢰성 99.9% 향상, 순서 보장, 장애 복구 자동화</li></ul><p><strong>4. 모니터링 및 관측성 (Observability)</strong></p><p>복제 시스템의 복잡성으로 인해 <strong>종합적인 모니터링과 알람</strong>이 운영 성공의 핵심입니다.</p><ul><li><strong>왜 통합하는가</strong>: 복제 지연, 동기화 실패, 노드 상태를 실시간 파악 필요</li><li><strong>무엇을</strong>: Prometheus, Grafana, ELK Stack, Jaeger를 통한 통합 모니터링</li><li><strong>어떻게</strong>: 복제 지연 메트릭, 에러율, 처리량을 대시보드화하고 임계값 알람</li><li><strong>가치</strong>: 장애 감지 시간 95% 단축, 예방적 운영, SLA 보장</li></ul><p><strong>5. 백업 및 재해 복구 (Backup & Disaster Recovery)</strong></p><p>복제는 고가용성을 제공하지만, <strong>장기 보관과 재해 복구</strong>를 위해서는 별도 백업 전략이 필요합니다.</p><ul><li><strong>왜 통합하는가</strong>: 복제는 실시간 장애 대응용, 백업은 장기 보관 및 데이터 보호용</li><li><strong>무엇을</strong>: 복제본을 활용한 무중단 백업, 지리적 분산 백업, 포인트-인-타임 복구</li><li><strong>어떻게</strong>: 읽기 복제본에서 덤프 생성, 증분 백업, 백업 검증 자동화</li><li><strong>가치</strong>: RPO(Recovery Point Objective) 1분 이내, RTO(Recovery Time Objective) 15분 이내 달성</li></ul><p><strong>통합 아키텍처 예시:</strong></p><pre class=mermaid>graph TB
    subgraph &#34;클라이언트 계층&#34;
        Client[애플리케이션 클라이언트]
    end
    
    subgraph &#34;게이트웨이 계층&#34;
        LB[로드밸런서&lt;br/&gt;NGINX/HAProxy]
        CDN[CDN 캐시&lt;br/&gt;CloudFront]
    end
    
    subgraph &#34;애플리케이션 계층&#34;
        App1[App Server 1]
        App2[App Server 2]
        App3[App Server 3]
    end
    
    subgraph &#34;캐시 계층&#34;
        Redis_M[Redis 마스터]
        Redis_S[Redis 슬레이브]
    end
    
    subgraph &#34;메시지 큐&#34;
        Kafka[Apache Kafka&lt;br/&gt;이벤트 스트림]
    end
    
    subgraph &#34;데이터베이스 계층&#34;
        DB_M[MySQL 마스터]
        DB_R1[MySQL 읽기복제본1]
        DB_R2[MySQL 읽기복제본2]
    end
    
    subgraph &#34;백업 시스템&#34;
        Backup[백업 저장소&lt;br/&gt;S3/GCS]
    end
    
    subgraph &#34;모니터링&#34;
        Prometheus[Prometheus]
        Grafana[Grafana 대시보드]
        Alert[AlertManager]
    end
    
    Client --&gt; CDN
    CDN --&gt; LB
    LB --&gt; App1
    LB --&gt; App2
    LB --&gt; App3
    
    App1 --&gt; Redis_M
    App2 --&gt; Redis_S
    App3 --&gt; Redis_M
    
    Redis_M --&gt; Redis_S
    
    App1 --&gt; |쓰기| DB_M
    App2 --&gt; |읽기| DB_R1
    App3 --&gt; |읽기| DB_R2
    
    DB_M --&gt; DB_R1
    DB_M --&gt; DB_R2
    DB_M --&gt; Kafka
    
    Kafka --&gt; |이벤트 스트림| App1
    Kafka --&gt; |이벤트 스트림| App2
    
    DB_R2 --&gt; |백업| Backup
    
    DB_M --&gt; Prometheus
    DB_R1 --&gt; Prometheus
    DB_R2 --&gt; Prometheus
    Redis_M --&gt; Prometheus
    
    Prometheus --&gt; Grafana
    Prometheus --&gt; Alert
</pre><p>이러한 통합 접근법을 통해 복제 시스템의 효과를 극대화하고, 실제 운영 환경에서 안정적이고 고성능의 서비스를 제공할 수 있습니다.</p><p>다음 Phase 6에서는 운영 및 최적화 단계를 다뤄서 복제 시스템의 안정적 운영과 지속적 개선 방법을 살펴보겠습니다.</p><h3 id=phase-6-운영-및-최적화>Phase 6: 운영 및 최적화<a hidden class=anchor aria-hidden=true href=#phase-6-운영-및-최적화>#</a></h3><h4 id=61-모니터링-및-관측성-1>6.1 모니터링 및 관측성<a hidden class=anchor aria-hidden=true href=#61-모니터링-및-관측성-1>#</a></h4><p>복제 시스템에서는 <strong>다중 노드 간 상태 동기화와 데이터 일관성</strong>을 실시간으로 모니터링하여 문제를 조기에 발견하고 대응하는 것이 핵심입니다.</p><p><strong>핵심 모니터링 지표:</strong></p><ol><li><p><strong>복제 지연 (Replication Lag)</strong></p><ul><li><strong>무엇을</strong>: 마스터와 슬레이브 간 데이터 동기화 지연 시간</li><li><strong>왜 중요한가</strong>: 읽기 일관성과 직결되며 비즈니스 로직 오류 방지</li><li><strong>측정 방법</strong>: <code>SHOW SLAVE STATUS</code>의 <code>Seconds_Behind_Master</code>, 타임스탬프 비교</li></ul></li><li><p><strong>복제 처리량 (Replication Throughput)</strong></p><ul><li><strong>무엇을</strong>: 초당 복제되는 트랜잭션 수와 데이터 볼륨</li><li><strong>왜 중요한가</strong>: 복제 용량 한계 파악 및 확장 계획 수립</li><li><strong>측정 방법</strong>: 바이너리 로그 증가율, 네트워크 전송량</li></ul></li><li><p><strong>노드 가용성 (Node Availability)</strong></p><ul><li><strong>무엇을</strong>: 각 복제 노드의 상태와 연결 가능성</li><li><strong>왜 중요한가</strong>: 장애 감지와 자동 페일오버 트리거</li><li><strong>측정 방법</strong>: 헬스체크 응답, 하트비트 신호</li></ul></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-30-1><a class=lnlinks href=#hl-30-1>  1</a>
</span><span class=lnt id=hl-30-2><a class=lnlinks href=#hl-30-2>  2</a>
</span><span class=lnt id=hl-30-3><a class=lnlinks href=#hl-30-3>  3</a>
</span><span class=lnt id=hl-30-4><a class=lnlinks href=#hl-30-4>  4</a>
</span><span class=lnt id=hl-30-5><a class=lnlinks href=#hl-30-5>  5</a>
</span><span class=lnt id=hl-30-6><a class=lnlinks href=#hl-30-6>  6</a>
</span><span class=lnt id=hl-30-7><a class=lnlinks href=#hl-30-7>  7</a>
</span><span class=lnt id=hl-30-8><a class=lnlinks href=#hl-30-8>  8</a>
</span><span class=lnt id=hl-30-9><a class=lnlinks href=#hl-30-9>  9</a>
</span><span class=lnt id=hl-30-10><a class=lnlinks href=#hl-30-10> 10</a>
</span><span class=lnt id=hl-30-11><a class=lnlinks href=#hl-30-11> 11</a>
</span><span class=lnt id=hl-30-12><a class=lnlinks href=#hl-30-12> 12</a>
</span><span class=lnt id=hl-30-13><a class=lnlinks href=#hl-30-13> 13</a>
</span><span class=lnt id=hl-30-14><a class=lnlinks href=#hl-30-14> 14</a>
</span><span class=lnt id=hl-30-15><a class=lnlinks href=#hl-30-15> 15</a>
</span><span class=lnt id=hl-30-16><a class=lnlinks href=#hl-30-16> 16</a>
</span><span class=lnt id=hl-30-17><a class=lnlinks href=#hl-30-17> 17</a>
</span><span class=lnt id=hl-30-18><a class=lnlinks href=#hl-30-18> 18</a>
</span><span class=lnt id=hl-30-19><a class=lnlinks href=#hl-30-19> 19</a>
</span><span class=lnt id=hl-30-20><a class=lnlinks href=#hl-30-20> 20</a>
</span><span class=lnt id=hl-30-21><a class=lnlinks href=#hl-30-21> 21</a>
</span><span class=lnt id=hl-30-22><a class=lnlinks href=#hl-30-22> 22</a>
</span><span class=lnt id=hl-30-23><a class=lnlinks href=#hl-30-23> 23</a>
</span><span class=lnt id=hl-30-24><a class=lnlinks href=#hl-30-24> 24</a>
</span><span class=lnt id=hl-30-25><a class=lnlinks href=#hl-30-25> 25</a>
</span><span class=lnt id=hl-30-26><a class=lnlinks href=#hl-30-26> 26</a>
</span><span class=lnt id=hl-30-27><a class=lnlinks href=#hl-30-27> 27</a>
</span><span class=lnt id=hl-30-28><a class=lnlinks href=#hl-30-28> 28</a>
</span><span class=lnt id=hl-30-29><a class=lnlinks href=#hl-30-29> 29</a>
</span><span class=lnt id=hl-30-30><a class=lnlinks href=#hl-30-30> 30</a>
</span><span class=lnt id=hl-30-31><a class=lnlinks href=#hl-30-31> 31</a>
</span><span class=lnt id=hl-30-32><a class=lnlinks href=#hl-30-32> 32</a>
</span><span class=lnt id=hl-30-33><a class=lnlinks href=#hl-30-33> 33</a>
</span><span class=lnt id=hl-30-34><a class=lnlinks href=#hl-30-34> 34</a>
</span><span class=lnt id=hl-30-35><a class=lnlinks href=#hl-30-35> 35</a>
</span><span class=lnt id=hl-30-36><a class=lnlinks href=#hl-30-36> 36</a>
</span><span class=lnt id=hl-30-37><a class=lnlinks href=#hl-30-37> 37</a>
</span><span class=lnt id=hl-30-38><a class=lnlinks href=#hl-30-38> 38</a>
</span><span class=lnt id=hl-30-39><a class=lnlinks href=#hl-30-39> 39</a>
</span><span class=lnt id=hl-30-40><a class=lnlinks href=#hl-30-40> 40</a>
</span><span class=lnt id=hl-30-41><a class=lnlinks href=#hl-30-41> 41</a>
</span><span class=lnt id=hl-30-42><a class=lnlinks href=#hl-30-42> 42</a>
</span><span class=lnt id=hl-30-43><a class=lnlinks href=#hl-30-43> 43</a>
</span><span class=lnt id=hl-30-44><a class=lnlinks href=#hl-30-44> 44</a>
</span><span class=lnt id=hl-30-45><a class=lnlinks href=#hl-30-45> 45</a>
</span><span class=lnt id=hl-30-46><a class=lnlinks href=#hl-30-46> 46</a>
</span><span class=lnt id=hl-30-47><a class=lnlinks href=#hl-30-47> 47</a>
</span><span class=lnt id=hl-30-48><a class=lnlinks href=#hl-30-48> 48</a>
</span><span class=lnt id=hl-30-49><a class=lnlinks href=#hl-30-49> 49</a>
</span><span class=lnt id=hl-30-50><a class=lnlinks href=#hl-30-50> 50</a>
</span><span class=lnt id=hl-30-51><a class=lnlinks href=#hl-30-51> 51</a>
</span><span class=lnt id=hl-30-52><a class=lnlinks href=#hl-30-52> 52</a>
</span><span class=lnt id=hl-30-53><a class=lnlinks href=#hl-30-53> 53</a>
</span><span class=lnt id=hl-30-54><a class=lnlinks href=#hl-30-54> 54</a>
</span><span class=lnt id=hl-30-55><a class=lnlinks href=#hl-30-55> 55</a>
</span><span class=lnt id=hl-30-56><a class=lnlinks href=#hl-30-56> 56</a>
</span><span class=lnt id=hl-30-57><a class=lnlinks href=#hl-30-57> 57</a>
</span><span class=lnt id=hl-30-58><a class=lnlinks href=#hl-30-58> 58</a>
</span><span class=lnt id=hl-30-59><a class=lnlinks href=#hl-30-59> 59</a>
</span><span class=lnt id=hl-30-60><a class=lnlinks href=#hl-30-60> 60</a>
</span><span class=lnt id=hl-30-61><a class=lnlinks href=#hl-30-61> 61</a>
</span><span class=lnt id=hl-30-62><a class=lnlinks href=#hl-30-62> 62</a>
</span><span class=lnt id=hl-30-63><a class=lnlinks href=#hl-30-63> 63</a>
</span><span class=lnt id=hl-30-64><a class=lnlinks href=#hl-30-64> 64</a>
</span><span class=lnt id=hl-30-65><a class=lnlinks href=#hl-30-65> 65</a>
</span><span class=lnt id=hl-30-66><a class=lnlinks href=#hl-30-66> 66</a>
</span><span class=lnt id=hl-30-67><a class=lnlinks href=#hl-30-67> 67</a>
</span><span class=lnt id=hl-30-68><a class=lnlinks href=#hl-30-68> 68</a>
</span><span class=lnt id=hl-30-69><a class=lnlinks href=#hl-30-69> 69</a>
</span><span class=lnt id=hl-30-70><a class=lnlinks href=#hl-30-70> 70</a>
</span><span class=lnt id=hl-30-71><a class=lnlinks href=#hl-30-71> 71</a>
</span><span class=lnt id=hl-30-72><a class=lnlinks href=#hl-30-72> 72</a>
</span><span class=lnt id=hl-30-73><a class=lnlinks href=#hl-30-73> 73</a>
</span><span class=lnt id=hl-30-74><a class=lnlinks href=#hl-30-74> 74</a>
</span><span class=lnt id=hl-30-75><a class=lnlinks href=#hl-30-75> 75</a>
</span><span class=lnt id=hl-30-76><a class=lnlinks href=#hl-30-76> 76</a>
</span><span class=lnt id=hl-30-77><a class=lnlinks href=#hl-30-77> 77</a>
</span><span class=lnt id=hl-30-78><a class=lnlinks href=#hl-30-78> 78</a>
</span><span class=lnt id=hl-30-79><a class=lnlinks href=#hl-30-79> 79</a>
</span><span class=lnt id=hl-30-80><a class=lnlinks href=#hl-30-80> 80</a>
</span><span class=lnt id=hl-30-81><a class=lnlinks href=#hl-30-81> 81</a>
</span><span class=lnt id=hl-30-82><a class=lnlinks href=#hl-30-82> 82</a>
</span><span class=lnt id=hl-30-83><a class=lnlinks href=#hl-30-83> 83</a>
</span><span class=lnt id=hl-30-84><a class=lnlinks href=#hl-30-84> 84</a>
</span><span class=lnt id=hl-30-85><a class=lnlinks href=#hl-30-85> 85</a>
</span><span class=lnt id=hl-30-86><a class=lnlinks href=#hl-30-86> 86</a>
</span><span class=lnt id=hl-30-87><a class=lnlinks href=#hl-30-87> 87</a>
</span><span class=lnt id=hl-30-88><a class=lnlinks href=#hl-30-88> 88</a>
</span><span class=lnt id=hl-30-89><a class=lnlinks href=#hl-30-89> 89</a>
</span><span class=lnt id=hl-30-90><a class=lnlinks href=#hl-30-90> 90</a>
</span><span class=lnt id=hl-30-91><a class=lnlinks href=#hl-30-91> 91</a>
</span><span class=lnt id=hl-30-92><a class=lnlinks href=#hl-30-92> 92</a>
</span><span class=lnt id=hl-30-93><a class=lnlinks href=#hl-30-93> 93</a>
</span><span class=lnt id=hl-30-94><a class=lnlinks href=#hl-30-94> 94</a>
</span><span class=lnt id=hl-30-95><a class=lnlinks href=#hl-30-95> 95</a>
</span><span class=lnt id=hl-30-96><a class=lnlinks href=#hl-30-96> 96</a>
</span><span class=lnt id=hl-30-97><a class=lnlinks href=#hl-30-97> 97</a>
</span><span class=lnt id=hl-30-98><a class=lnlinks href=#hl-30-98> 98</a>
</span><span class=lnt id=hl-30-99><a class=lnlinks href=#hl-30-99> 99</a>
</span><span class=lnt id=hl-30-100><a class=lnlinks href=#hl-30-100>100</a>
</span><span class=lnt id=hl-30-101><a class=lnlinks href=#hl-30-101>101</a>
</span><span class=lnt id=hl-30-102><a class=lnlinks href=#hl-30-102>102</a>
</span><span class=lnt id=hl-30-103><a class=lnlinks href=#hl-30-103>103</a>
</span><span class=lnt id=hl-30-104><a class=lnlinks href=#hl-30-104>104</a>
</span><span class=lnt id=hl-30-105><a class=lnlinks href=#hl-30-105>105</a>
</span><span class=lnt id=hl-30-106><a class=lnlinks href=#hl-30-106>106</a>
</span><span class=lnt id=hl-30-107><a class=lnlinks href=#hl-30-107>107</a>
</span><span class=lnt id=hl-30-108><a class=lnlinks href=#hl-30-108>108</a>
</span><span class=lnt id=hl-30-109><a class=lnlinks href=#hl-30-109>109</a>
</span><span class=lnt id=hl-30-110><a class=lnlinks href=#hl-30-110>110</a>
</span><span class=lnt id=hl-30-111><a class=lnlinks href=#hl-30-111>111</a>
</span><span class=lnt id=hl-30-112><a class=lnlinks href=#hl-30-112>112</a>
</span><span class=lnt id=hl-30-113><a class=lnlinks href=#hl-30-113>113</a>
</span><span class=lnt id=hl-30-114><a class=lnlinks href=#hl-30-114>114</a>
</span><span class=lnt id=hl-30-115><a class=lnlinks href=#hl-30-115>115</a>
</span><span class=lnt id=hl-30-116><a class=lnlinks href=#hl-30-116>116</a>
</span><span class=lnt id=hl-30-117><a class=lnlinks href=#hl-30-117>117</a>
</span><span class=lnt id=hl-30-118><a class=lnlinks href=#hl-30-118>118</a>
</span><span class=lnt id=hl-30-119><a class=lnlinks href=#hl-30-119>119</a>
</span><span class=lnt id=hl-30-120><a class=lnlinks href=#hl-30-120>120</a>
</span><span class=lnt id=hl-30-121><a class=lnlinks href=#hl-30-121>121</a>
</span><span class=lnt id=hl-30-122><a class=lnlinks href=#hl-30-122>122</a>
</span><span class=lnt id=hl-30-123><a class=lnlinks href=#hl-30-123>123</a>
</span><span class=lnt id=hl-30-124><a class=lnlinks href=#hl-30-124>124</a>
</span><span class=lnt id=hl-30-125><a class=lnlinks href=#hl-30-125>125</a>
</span><span class=lnt id=hl-30-126><a class=lnlinks href=#hl-30-126>126</a>
</span><span class=lnt id=hl-30-127><a class=lnlinks href=#hl-30-127>127</a>
</span><span class=lnt id=hl-30-128><a class=lnlinks href=#hl-30-128>128</a>
</span><span class=lnt id=hl-30-129><a class=lnlinks href=#hl-30-129>129</a>
</span><span class=lnt id=hl-30-130><a class=lnlinks href=#hl-30-130>130</a>
</span><span class=lnt id=hl-30-131><a class=lnlinks href=#hl-30-131>131</a>
</span><span class=lnt id=hl-30-132><a class=lnlinks href=#hl-30-132>132</a>
</span><span class=lnt id=hl-30-133><a class=lnlinks href=#hl-30-133>133</a>
</span><span class=lnt id=hl-30-134><a class=lnlinks href=#hl-30-134>134</a>
</span><span class=lnt id=hl-30-135><a class=lnlinks href=#hl-30-135>135</a>
</span><span class=lnt id=hl-30-136><a class=lnlinks href=#hl-30-136>136</a>
</span><span class=lnt id=hl-30-137><a class=lnlinks href=#hl-30-137>137</a>
</span><span class=lnt id=hl-30-138><a class=lnlinks href=#hl-30-138>138</a>
</span><span class=lnt id=hl-30-139><a class=lnlinks href=#hl-30-139>139</a>
</span><span class=lnt id=hl-30-140><a class=lnlinks href=#hl-30-140>140</a>
</span><span class=lnt id=hl-30-141><a class=lnlinks href=#hl-30-141>141</a>
</span><span class=lnt id=hl-30-142><a class=lnlinks href=#hl-30-142>142</a>
</span><span class=lnt id=hl-30-143><a class=lnlinks href=#hl-30-143>143</a>
</span><span class=lnt id=hl-30-144><a class=lnlinks href=#hl-30-144>144</a>
</span><span class=lnt id=hl-30-145><a class=lnlinks href=#hl-30-145>145</a>
</span><span class=lnt id=hl-30-146><a class=lnlinks href=#hl-30-146>146</a>
</span><span class=lnt id=hl-30-147><a class=lnlinks href=#hl-30-147>147</a>
</span><span class=lnt id=hl-30-148><a class=lnlinks href=#hl-30-148>148</a>
</span><span class=lnt id=hl-30-149><a class=lnlinks href=#hl-30-149>149</a>
</span><span class=lnt id=hl-30-150><a class=lnlinks href=#hl-30-150>150</a>
</span><span class=lnt id=hl-30-151><a class=lnlinks href=#hl-30-151>151</a>
</span><span class=lnt id=hl-30-152><a class=lnlinks href=#hl-30-152>152</a>
</span><span class=lnt id=hl-30-153><a class=lnlinks href=#hl-30-153>153</a>
</span><span class=lnt id=hl-30-154><a class=lnlinks href=#hl-30-154>154</a>
</span><span class=lnt id=hl-30-155><a class=lnlinks href=#hl-30-155>155</a>
</span><span class=lnt id=hl-30-156><a class=lnlinks href=#hl-30-156>156</a>
</span><span class=lnt id=hl-30-157><a class=lnlinks href=#hl-30-157>157</a>
</span><span class=lnt id=hl-30-158><a class=lnlinks href=#hl-30-158>158</a>
</span><span class=lnt id=hl-30-159><a class=lnlinks href=#hl-30-159>159</a>
</span><span class=lnt id=hl-30-160><a class=lnlinks href=#hl-30-160>160</a>
</span><span class=lnt id=hl-30-161><a class=lnlinks href=#hl-30-161>161</a>
</span><span class=lnt id=hl-30-162><a class=lnlinks href=#hl-30-162>162</a>
</span><span class=lnt id=hl-30-163><a class=lnlinks href=#hl-30-163>163</a>
</span><span class=lnt id=hl-30-164><a class=lnlinks href=#hl-30-164>164</a>
</span><span class=lnt id=hl-30-165><a class=lnlinks href=#hl-30-165>165</a>
</span><span class=lnt id=hl-30-166><a class=lnlinks href=#hl-30-166>166</a>
</span><span class=lnt id=hl-30-167><a class=lnlinks href=#hl-30-167>167</a>
</span><span class=lnt id=hl-30-168><a class=lnlinks href=#hl-30-168>168</a>
</span><span class=lnt id=hl-30-169><a class=lnlinks href=#hl-30-169>169</a>
</span><span class=lnt id=hl-30-170><a class=lnlinks href=#hl-30-170>170</a>
</span><span class=lnt id=hl-30-171><a class=lnlinks href=#hl-30-171>171</a>
</span><span class=lnt id=hl-30-172><a class=lnlinks href=#hl-30-172>172</a>
</span><span class=lnt id=hl-30-173><a class=lnlinks href=#hl-30-173>173</a>
</span><span class=lnt id=hl-30-174><a class=lnlinks href=#hl-30-174>174</a>
</span><span class=lnt id=hl-30-175><a class=lnlinks href=#hl-30-175>175</a>
</span><span class=lnt id=hl-30-176><a class=lnlinks href=#hl-30-176>176</a>
</span><span class=lnt id=hl-30-177><a class=lnlinks href=#hl-30-177>177</a>
</span><span class=lnt id=hl-30-178><a class=lnlinks href=#hl-30-178>178</a>
</span><span class=lnt id=hl-30-179><a class=lnlinks href=#hl-30-179>179</a>
</span><span class=lnt id=hl-30-180><a class=lnlinks href=#hl-30-180>180</a>
</span><span class=lnt id=hl-30-181><a class=lnlinks href=#hl-30-181>181</a>
</span><span class=lnt id=hl-30-182><a class=lnlinks href=#hl-30-182>182</a>
</span><span class=lnt id=hl-30-183><a class=lnlinks href=#hl-30-183>183</a>
</span><span class=lnt id=hl-30-184><a class=lnlinks href=#hl-30-184>184</a>
</span><span class=lnt id=hl-30-185><a class=lnlinks href=#hl-30-185>185</a>
</span><span class=lnt id=hl-30-186><a class=lnlinks href=#hl-30-186>186</a>
</span><span class=lnt id=hl-30-187><a class=lnlinks href=#hl-30-187>187</a>
</span><span class=lnt id=hl-30-188><a class=lnlinks href=#hl-30-188>188</a>
</span><span class=lnt id=hl-30-189><a class=lnlinks href=#hl-30-189>189</a>
</span><span class=lnt id=hl-30-190><a class=lnlinks href=#hl-30-190>190</a>
</span><span class=lnt id=hl-30-191><a class=lnlinks href=#hl-30-191>191</a>
</span><span class=lnt id=hl-30-192><a class=lnlinks href=#hl-30-192>192</a>
</span><span class=lnt id=hl-30-193><a class=lnlinks href=#hl-30-193>193</a>
</span><span class=lnt id=hl-30-194><a class=lnlinks href=#hl-30-194>194</a>
</span><span class=lnt id=hl-30-195><a class=lnlinks href=#hl-30-195>195</a>
</span><span class=lnt id=hl-30-196><a class=lnlinks href=#hl-30-196>196</a>
</span><span class=lnt id=hl-30-197><a class=lnlinks href=#hl-30-197>197</a>
</span><span class=lnt id=hl-30-198><a class=lnlinks href=#hl-30-198>198</a>
</span><span class=lnt id=hl-30-199><a class=lnlinks href=#hl-30-199>199</a>
</span><span class=lnt id=hl-30-200><a class=lnlinks href=#hl-30-200>200</a>
</span><span class=lnt id=hl-30-201><a class=lnlinks href=#hl-30-201>201</a>
</span><span class=lnt id=hl-30-202><a class=lnlinks href=#hl-30-202>202</a>
</span><span class=lnt id=hl-30-203><a class=lnlinks href=#hl-30-203>203</a>
</span><span class=lnt id=hl-30-204><a class=lnlinks href=#hl-30-204>204</a>
</span><span class=lnt id=hl-30-205><a class=lnlinks href=#hl-30-205>205</a>
</span><span class=lnt id=hl-30-206><a class=lnlinks href=#hl-30-206>206</a>
</span><span class=lnt id=hl-30-207><a class=lnlinks href=#hl-30-207>207</a>
</span><span class=lnt id=hl-30-208><a class=lnlinks href=#hl-30-208>208</a>
</span><span class=lnt id=hl-30-209><a class=lnlinks href=#hl-30-209>209</a>
</span><span class=lnt id=hl-30-210><a class=lnlinks href=#hl-30-210>210</a>
</span><span class=lnt id=hl-30-211><a class=lnlinks href=#hl-30-211>211</a>
</span><span class=lnt id=hl-30-212><a class=lnlinks href=#hl-30-212>212</a>
</span><span class=lnt id=hl-30-213><a class=lnlinks href=#hl-30-213>213</a>
</span><span class=lnt id=hl-30-214><a class=lnlinks href=#hl-30-214>214</a>
</span><span class=lnt id=hl-30-215><a class=lnlinks href=#hl-30-215>215</a>
</span><span class=lnt id=hl-30-216><a class=lnlinks href=#hl-30-216>216</a>
</span><span class=lnt id=hl-30-217><a class=lnlinks href=#hl-30-217>217</a>
</span><span class=lnt id=hl-30-218><a class=lnlinks href=#hl-30-218>218</a>
</span><span class=lnt id=hl-30-219><a class=lnlinks href=#hl-30-219>219</a>
</span><span class=lnt id=hl-30-220><a class=lnlinks href=#hl-30-220>220</a>
</span><span class=lnt id=hl-30-221><a class=lnlinks href=#hl-30-221>221</a>
</span><span class=lnt id=hl-30-222><a class=lnlinks href=#hl-30-222>222</a>
</span><span class=lnt id=hl-30-223><a class=lnlinks href=#hl-30-223>223</a>
</span><span class=lnt id=hl-30-224><a class=lnlinks href=#hl-30-224>224</a>
</span><span class=lnt id=hl-30-225><a class=lnlinks href=#hl-30-225>225</a>
</span><span class=lnt id=hl-30-226><a class=lnlinks href=#hl-30-226>226</a>
</span><span class=lnt id=hl-30-227><a class=lnlinks href=#hl-30-227>227</a>
</span><span class=lnt id=hl-30-228><a class=lnlinks href=#hl-30-228>228</a>
</span><span class=lnt id=hl-30-229><a class=lnlinks href=#hl-30-229>229</a>
</span><span class=lnt id=hl-30-230><a class=lnlinks href=#hl-30-230>230</a>
</span><span class=lnt id=hl-30-231><a class=lnlinks href=#hl-30-231>231</a>
</span><span class=lnt id=hl-30-232><a class=lnlinks href=#hl-30-232>232</a>
</span><span class=lnt id=hl-30-233><a class=lnlinks href=#hl-30-233>233</a>
</span><span class=lnt id=hl-30-234><a class=lnlinks href=#hl-30-234>234</a>
</span><span class=lnt id=hl-30-235><a class=lnlinks href=#hl-30-235>235</a>
</span><span class=lnt id=hl-30-236><a class=lnlinks href=#hl-30-236>236</a>
</span><span class=lnt id=hl-30-237><a class=lnlinks href=#hl-30-237>237</a>
</span><span class=lnt id=hl-30-238><a class=lnlinks href=#hl-30-238>238</a>
</span><span class=lnt id=hl-30-239><a class=lnlinks href=#hl-30-239>239</a>
</span><span class=lnt id=hl-30-240><a class=lnlinks href=#hl-30-240>240</a>
</span><span class=lnt id=hl-30-241><a class=lnlinks href=#hl-30-241>241</a>
</span><span class=lnt id=hl-30-242><a class=lnlinks href=#hl-30-242>242</a>
</span><span class=lnt id=hl-30-243><a class=lnlinks href=#hl-30-243>243</a>
</span><span class=lnt id=hl-30-244><a class=lnlinks href=#hl-30-244>244</a>
</span><span class=lnt id=hl-30-245><a class=lnlinks href=#hl-30-245>245</a>
</span><span class=lnt id=hl-30-246><a class=lnlinks href=#hl-30-246>246</a>
</span><span class=lnt id=hl-30-247><a class=lnlinks href=#hl-30-247>247</a>
</span><span class=lnt id=hl-30-248><a class=lnlinks href=#hl-30-248>248</a>
</span><span class=lnt id=hl-30-249><a class=lnlinks href=#hl-30-249>249</a>
</span><span class=lnt id=hl-30-250><a class=lnlinks href=#hl-30-250>250</a>
</span><span class=lnt id=hl-30-251><a class=lnlinks href=#hl-30-251>251</a>
</span><span class=lnt id=hl-30-252><a class=lnlinks href=#hl-30-252>252</a>
</span><span class=lnt id=hl-30-253><a class=lnlinks href=#hl-30-253>253</a>
</span><span class=lnt id=hl-30-254><a class=lnlinks href=#hl-30-254>254</a>
</span><span class=lnt id=hl-30-255><a class=lnlinks href=#hl-30-255>255</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 복제 모니터링 시스템 구현 예시</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>mysql.connector</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>psutil</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>logging</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>List</span><span class=p>,</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span><span class=p>,</span> <span class=n>timedelta</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ReplicationMetrics</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;복제 메트릭 데이터 클래스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>timestamp</span><span class=p>:</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl>    <span class=n>node_id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>lag_seconds</span><span class=p>:</span> <span class=nb>float</span>
</span></span><span class=line><span class=cl>    <span class=n>throughput_tps</span><span class=p>:</span> <span class=nb>float</span>
</span></span><span class=line><span class=cl>    <span class=n>error_count</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    <span class=n>connection_status</span><span class=p>:</span> <span class=nb>bool</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ReplicationMonitor</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;MySQL 복제 모니터링 시스템&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>master_config</span><span class=p>:</span> <span class=nb>dict</span><span class=p>,</span> <span class=n>slaves_config</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>dict</span><span class=p>]):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>master_config</span> <span class=o>=</span> <span class=n>master_config</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>slaves_config</span> <span class=o>=</span> <span class=n>slaves_config</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>metrics_history</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>alert_thresholds</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;lag_seconds&#39;</span><span class=p>:</span> <span class=mi>30</span><span class=p>,</span>      <span class=c1># 30초 이상 지연 시 알람</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;error_rate&#39;</span><span class=p>:</span> <span class=mf>0.01</span><span class=p>,</span>     <span class=c1># 1% 이상 에러율 시 알람</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;throughput_drop&#39;</span><span class=p>:</span> <span class=mf>0.5</span>  <span class=c1># 50% 이상 처리량 감소 시 알람</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 로깅 설정</span>
</span></span><span class=line><span class=cl>        <span class=n>logging</span><span class=o>.</span><span class=n>basicConfig</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>level</span><span class=o>=</span><span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nb>format</span><span class=o>=</span><span class=s1>&#39;</span><span class=si>%(asctime)s</span><span class=s1> - </span><span class=si>%(levelname)s</span><span class=s1> - </span><span class=si>%(message)s</span><span class=s1>&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>handlers</span><span class=o>=</span><span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=n>logging</span><span class=o>.</span><span class=n>FileHandler</span><span class=p>(</span><span class=s1>&#39;replication_monitor.log&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=n>logging</span><span class=o>.</span><span class=n>StreamHandler</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>collect_master_metrics</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;마스터 노드 메트릭 수집&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>conn</span> <span class=o>=</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>master_config</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>cursor</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>cursor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 마스터 상태 정보</span>
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;SHOW MASTER STATUS&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>master_status</span> <span class=o>=</span> <span class=n>cursor</span><span class=o>.</span><span class=n>fetchone</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 처리량 정보 (1초간 변화량 측정)</span>
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;SHOW GLOBAL STATUS LIKE &#39;Com_insert&#39;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>insert_count_1</span> <span class=o>=</span> <span class=n>cursor</span><span class=o>.</span><span class=n>fetchone</span><span class=p>()[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;SHOW GLOBAL STATUS LIKE &#39;Com_update&#39;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>update_count_1</span> <span class=o>=</span> <span class=n>cursor</span><span class=o>.</span><span class=n>fetchone</span><span class=p>()[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>  <span class=c1># 1초 대기</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;SHOW GLOBAL STATUS LIKE &#39;Com_insert&#39;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>insert_count_2</span> <span class=o>=</span> <span class=n>cursor</span><span class=o>.</span><span class=n>fetchone</span><span class=p>()[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;SHOW GLOBAL STATUS LIKE &#39;Com_update&#39;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>update_count_2</span> <span class=o>=</span> <span class=n>cursor</span><span class=o>.</span><span class=n>fetchone</span><span class=p>()[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># TPS 계산</span>
</span></span><span class=line><span class=cl>            <span class=n>tps</span> <span class=o>=</span> <span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>insert_count_2</span><span class=p>)</span> <span class=o>-</span> <span class=nb>int</span><span class=p>(</span><span class=n>insert_count_1</span><span class=p>))</span> <span class=o>+</span> \
</span></span><span class=line><span class=cl>                  <span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>update_count_2</span><span class=p>)</span> <span class=o>-</span> <span class=nb>int</span><span class=p>(</span><span class=n>update_count_1</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>metrics</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;node_id&#39;</span><span class=p>:</span> <span class=s1>&#39;master&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;binlog_file&#39;</span><span class=p>:</span> <span class=n>master_status</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=k>if</span> <span class=n>master_status</span> <span class=k>else</span> <span class=s1>&#39;N/A&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;binlog_position&#39;</span><span class=p>:</span> <span class=n>master_status</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=k>if</span> <span class=n>master_status</span> <span class=k>else</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;tps&#39;</span><span class=p>:</span> <span class=n>tps</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;connection_status&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>metrics</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>Error</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;마스터 메트릭 수집 실패: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;node_id&#39;</span><span class=p>:</span> <span class=s1>&#39;master&#39;</span><span class=p>,</span> <span class=s1>&#39;connection_status&#39;</span><span class=p>:</span> <span class=kc>False</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>collect_slave_metrics</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>slave_config</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;슬레이브 노드 메트릭 수집&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>conn</span> <span class=o>=</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=o>**</span><span class=n>slave_config</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>cursor</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>cursor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 슬레이브 상태 확인</span>
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;SHOW SLAVE STATUS&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>slave_status</span> <span class=o>=</span> <span class=n>cursor</span><span class=o>.</span><span class=n>fetchone</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>slave_status</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1># 주요 지표 추출</span>
</span></span><span class=line><span class=cl>                <span class=n>io_running</span> <span class=o>=</span> <span class=n>slave_status</span><span class=p>[</span><span class=mi>10</span><span class=p>]</span>  <span class=c1># Slave_IO_Running</span>
</span></span><span class=line><span class=cl>                <span class=n>sql_running</span> <span class=o>=</span> <span class=n>slave_status</span><span class=p>[</span><span class=mi>11</span><span class=p>]</span> <span class=c1># Slave_SQL_Running</span>
</span></span><span class=line><span class=cl>                <span class=n>lag_seconds</span> <span class=o>=</span> <span class=n>slave_status</span><span class=p>[</span><span class=mi>32</span><span class=p>]</span> <span class=k>if</span> <span class=n>slave_status</span><span class=p>[</span><span class=mi>32</span><span class=p>]</span> <span class=k>else</span> <span class=mi>0</span>  <span class=c1># Seconds_Behind_Master</span>
</span></span><span class=line><span class=cl>                <span class=n>last_error</span> <span class=o>=</span> <span class=n>slave_status</span><span class=p>[</span><span class=mi>19</span><span class=p>]</span>  <span class=c1># Last_Error</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1># 복제 상태 판단</span>
</span></span><span class=line><span class=cl>                <span class=n>replication_healthy</span> <span class=o>=</span> <span class=p>(</span><span class=n>io_running</span> <span class=o>==</span> <span class=s1>&#39;Yes&#39;</span> <span class=ow>and</span> <span class=n>sql_running</span> <span class=o>==</span> <span class=s1>&#39;Yes&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=n>metrics</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;node_id&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&#34;slave-</span><span class=si>{</span><span class=n>slave_config</span><span class=p>[</span><span class=s1>&#39;port&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;io_running&#39;</span><span class=p>:</span> <span class=n>io_running</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;sql_running&#39;</span><span class=p>:</span> <span class=n>sql_running</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;lag_seconds&#39;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>lag_seconds</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;last_error&#39;</span><span class=p>:</span> <span class=n>last_error</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;replication_healthy&#39;</span><span class=p>:</span> <span class=n>replication_healthy</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;connection_status&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>metrics</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;node_id&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&#34;slave-</span><span class=si>{</span><span class=n>slave_config</span><span class=p>[</span><span class=s1>&#39;port&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=s1>&#39;슬레이브 상태 정보 없음&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;connection_status&#39;</span><span class=p>:</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>metrics</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>Error</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;슬레이브 메트릭 수집 실패: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;node_id&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&#34;slave-</span><span class=si>{</span><span class=n>slave_config</span><span class=p>[</span><span class=s1>&#39;port&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=s1>&#39;connection_status&#39;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>check_alerts</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>metrics</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;메트릭 기반 알람 체크&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>alerts</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 복제 지연 알람</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=s1>&#39;lag_seconds&#39;</span> <span class=ow>in</span> <span class=n>metrics</span> <span class=ow>and</span> <span class=n>metrics</span><span class=p>[</span><span class=s1>&#39;lag_seconds&#39;</span><span class=p>]</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>alert_thresholds</span><span class=p>[</span><span class=s1>&#39;lag_seconds&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>            <span class=n>alerts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;🚨 복제 지연 경고: </span><span class=si>{</span><span class=n>metrics</span><span class=p>[</span><span class=s1>&#39;node_id&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> - </span><span class=si>{</span><span class=n>metrics</span><span class=p>[</span><span class=s1>&#39;lag_seconds&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>초&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 복제 중단 알람</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=s1>&#39;replication_healthy&#39;</span> <span class=ow>in</span> <span class=n>metrics</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>metrics</span><span class=p>[</span><span class=s1>&#39;replication_healthy&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>            <span class=n>alerts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;🚨 복제 중단 경고: </span><span class=si>{</span><span class=n>metrics</span><span class=p>[</span><span class=s1>&#39;node_id&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> - IO:</span><span class=si>{</span><span class=n>metrics</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;io_running&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>, SQL:</span><span class=si>{</span><span class=n>metrics</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;sql_running&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 연결 장애 알람</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>metrics</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;connection_status&#39;</span><span class=p>,</span> <span class=kc>False</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>alerts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;🚨 연결 장애 경고: </span><span class=si>{</span><span class=n>metrics</span><span class=p>[</span><span class=s1>&#39;node_id&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2> - 연결 불가&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>alerts</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>generate_health_report</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;복제 시스템 종합 상태 보고서&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>master_metrics</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>collect_master_metrics</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>slave_metrics</span> <span class=o>=</span> <span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>collect_slave_metrics</span><span class=p>(</span><span class=n>config</span><span class=p>)</span> <span class=k>for</span> <span class=n>config</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>slaves_config</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 전체 시스템 상태 평가</span>
</span></span><span class=line><span class=cl>        <span class=n>total_nodes</span> <span class=o>=</span> <span class=mi>1</span> <span class=o>+</span> <span class=nb>len</span><span class=p>(</span><span class=n>slave_metrics</span><span class=p>)</span>  <span class=c1># 마스터 + 슬레이브들</span>
</span></span><span class=line><span class=cl>        <span class=n>healthy_nodes</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>([</span>
</span></span><span class=line><span class=cl>            <span class=mi>1</span> <span class=k>if</span> <span class=n>master_metrics</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;connection_status&#39;</span><span class=p>)</span> <span class=k>else</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nb>sum</span><span class=p>(</span><span class=mi>1</span> <span class=k>for</span> <span class=n>s</span> <span class=ow>in</span> <span class=n>slave_metrics</span> <span class=k>if</span> <span class=n>s</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;connection_status&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>])</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 평균 복제 지연 계산</span>
</span></span><span class=line><span class=cl>        <span class=n>lag_values</span> <span class=o>=</span> <span class=p>[</span><span class=n>s</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;lag_seconds&#39;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span> <span class=k>for</span> <span class=n>s</span> <span class=ow>in</span> <span class=n>slave_metrics</span> <span class=k>if</span> <span class=n>s</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;lag_seconds&#39;</span><span class=p>)</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>avg_lag</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>lag_values</span><span class=p>)</span> <span class=o>/</span> <span class=nb>len</span><span class=p>(</span><span class=n>lag_values</span><span class=p>)</span> <span class=k>if</span> <span class=n>lag_values</span> <span class=k>else</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 알람 수집</span>
</span></span><span class=line><span class=cl>        <span class=n>all_alerts</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=n>all_alerts</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>check_alerts</span><span class=p>(</span><span class=n>master_metrics</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>slave_metric</span> <span class=ow>in</span> <span class=n>slave_metrics</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>all_alerts</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>check_alerts</span><span class=p>(</span><span class=n>slave_metric</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>report</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;overall_health&#39;</span><span class=p>:</span> <span class=s1>&#39;HEALTHY&#39;</span> <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>all_alerts</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span> <span class=k>else</span> <span class=s1>&#39;WARNING&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;healthy_nodes&#39;</span><span class=p>:</span> <span class=n>healthy_nodes</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;total_nodes&#39;</span><span class=p>:</span> <span class=n>total_nodes</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;availability_percentage&#39;</span><span class=p>:</span> <span class=p>(</span><span class=n>healthy_nodes</span> <span class=o>/</span> <span class=n>total_nodes</span><span class=p>)</span> <span class=o>*</span> <span class=mi>100</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;average_replication_lag&#39;</span><span class=p>:</span> <span class=n>avg_lag</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;active_alerts&#39;</span><span class=p>:</span> <span class=n>all_alerts</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;master_metrics&#39;</span><span class=p>:</span> <span class=n>master_metrics</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;slave_metrics&#39;</span><span class=p>:</span> <span class=n>slave_metrics</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>report</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>start_monitoring</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>interval_seconds</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>30</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;지속적 모니터링 시작&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;복제 모니터링 시작&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>report</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>generate_health_report</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1># 콘솔 출력</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=si>{</span><span class=s1>&#39;=&#39;</span><span class=o>*</span><span class=mi>50</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;복제 시스템 상태 보고서 - </span><span class=si>{</span><span class=n>report</span><span class=p>[</span><span class=s1>&#39;timestamp&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;전체 상태: </span><span class=si>{</span><span class=n>report</span><span class=p>[</span><span class=s1>&#39;overall_health&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;가용성: </span><span class=si>{</span><span class=n>report</span><span class=p>[</span><span class=s1>&#39;availability_percentage&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>.1f</span><span class=si>}</span><span class=s2>% (</span><span class=si>{</span><span class=n>report</span><span class=p>[</span><span class=s1>&#39;healthy_nodes&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>report</span><span class=p>[</span><span class=s1>&#39;total_nodes&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;평균 복제 지연: </span><span class=si>{</span><span class=n>report</span><span class=p>[</span><span class=s1>&#39;average_replication_lag&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2>초&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>report</span><span class=p>[</span><span class=s1>&#39;active_alerts&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>활성 알람:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>for</span> <span class=n>alert</span> <span class=ow>in</span> <span class=n>report</span><span class=p>[</span><span class=s1>&#39;active_alerts&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  </span><span class=si>{</span><span class=n>alert</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=bp>self</span><span class=o>.</span><span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=n>alert</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;✅ 활성 알람 없음&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1># 메트릭 히스토리 저장</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>metrics_history</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>report</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1># 히스토리 정리 (최근 100개만 유지)</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>metrics_history</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>100</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>metrics_history</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>metrics_history</span><span class=p>[</span><span class=o>-</span><span class=mi>100</span><span class=p>:]</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>interval_seconds</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>KeyboardInterrupt</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;모니터링 중단&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># 설정 정보</span>
</span></span><span class=line><span class=cl>    <span class=n>master_config</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;host&#39;</span><span class=p>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;port&#39;</span><span class=p>:</span> <span class=mi>3306</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;user&#39;</span><span class=p>:</span> <span class=s1>&#39;root&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;password&#39;</span><span class=p>:</span> <span class=s1>&#39;rootpassword&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>slaves_config</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;host&#39;</span><span class=p>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;port&#39;</span><span class=p>:</span> <span class=mi>3307</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;user&#39;</span><span class=p>:</span> <span class=s1>&#39;root&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;password&#39;</span><span class=p>:</span> <span class=s1>&#39;rootpassword&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;host&#39;</span><span class=p>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;port&#39;</span><span class=p>:</span> <span class=mi>3308</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;user&#39;</span><span class=p>:</span> <span class=s1>&#39;root&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;password&#39;</span><span class=p>:</span> <span class=s1>&#39;rootpassword&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 모니터링 시작</span>
</span></span><span class=line><span class=cl>    <span class=n>monitor</span> <span class=o>=</span> <span class=n>ReplicationMonitor</span><span class=p>(</span><span class=n>master_config</span><span class=p>,</span> <span class=n>slaves_config</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>monitor</span><span class=o>.</span><span class=n>start_monitoring</span><span class=p>(</span><span class=n>interval_seconds</span><span class=o>=</span><span class=mi>15</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Prometheus + Grafana 대시보드 설정:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-31-1><a class=lnlinks href=#hl-31-1> 1</a>
</span><span class=lnt id=hl-31-2><a class=lnlinks href=#hl-31-2> 2</a>
</span><span class=lnt id=hl-31-3><a class=lnlinks href=#hl-31-3> 3</a>
</span><span class=lnt id=hl-31-4><a class=lnlinks href=#hl-31-4> 4</a>
</span><span class=lnt id=hl-31-5><a class=lnlinks href=#hl-31-5> 5</a>
</span><span class=lnt id=hl-31-6><a class=lnlinks href=#hl-31-6> 6</a>
</span><span class=lnt id=hl-31-7><a class=lnlinks href=#hl-31-7> 7</a>
</span><span class=lnt id=hl-31-8><a class=lnlinks href=#hl-31-8> 8</a>
</span><span class=lnt id=hl-31-9><a class=lnlinks href=#hl-31-9> 9</a>
</span><span class=lnt id=hl-31-10><a class=lnlinks href=#hl-31-10>10</a>
</span><span class=lnt id=hl-31-11><a class=lnlinks href=#hl-31-11>11</a>
</span><span class=lnt id=hl-31-12><a class=lnlinks href=#hl-31-12>12</a>
</span><span class=lnt id=hl-31-13><a class=lnlinks href=#hl-31-13>13</a>
</span><span class=lnt id=hl-31-14><a class=lnlinks href=#hl-31-14>14</a>
</span><span class=lnt id=hl-31-15><a class=lnlinks href=#hl-31-15>15</a>
</span><span class=lnt id=hl-31-16><a class=lnlinks href=#hl-31-16>16</a>
</span><span class=lnt id=hl-31-17><a class=lnlinks href=#hl-31-17>17</a>
</span><span class=lnt id=hl-31-18><a class=lnlinks href=#hl-31-18>18</a>
</span><span class=lnt id=hl-31-19><a class=lnlinks href=#hl-31-19>19</a>
</span><span class=lnt id=hl-31-20><a class=lnlinks href=#hl-31-20>20</a>
</span><span class=lnt id=hl-31-21><a class=lnlinks href=#hl-31-21>21</a>
</span><span class=lnt id=hl-31-22><a class=lnlinks href=#hl-31-22>22</a>
</span><span class=lnt id=hl-31-23><a class=lnlinks href=#hl-31-23>23</a>
</span><span class=lnt id=hl-31-24><a class=lnlinks href=#hl-31-24>24</a>
</span><span class=lnt id=hl-31-25><a class=lnlinks href=#hl-31-25>25</a>
</span><span class=lnt id=hl-31-26><a class=lnlinks href=#hl-31-26>26</a>
</span><span class=lnt id=hl-31-27><a class=lnlinks href=#hl-31-27>27</a>
</span><span class=lnt id=hl-31-28><a class=lnlinks href=#hl-31-28>28</a>
</span><span class=lnt id=hl-31-29><a class=lnlinks href=#hl-31-29>29</a>
</span><span class=lnt id=hl-31-30><a class=lnlinks href=#hl-31-30>30</a>
</span><span class=lnt id=hl-31-31><a class=lnlinks href=#hl-31-31>31</a>
</span><span class=lnt id=hl-31-32><a class=lnlinks href=#hl-31-32>32</a>
</span><span class=lnt id=hl-31-33><a class=lnlinks href=#hl-31-33>33</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># prometheus.yml - 복제 메트릭 수집 설정</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>global</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>scrape_interval</span><span class=p>:</span><span class=w> </span><span class=l>15s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>scrape_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;mysql-master&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;localhost:9104&#39;</span><span class=p>]</span><span class=w>  </span><span class=c># MySQL Exporter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>relabel_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>source_labels</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>__address__]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>target_label</span><span class=p>:</span><span class=w> </span><span class=l>instance</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>replacement</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;mysql-master&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>job_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;mysql-slaves&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;localhost:9105&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;localhost:9106&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>relabel_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>source_labels</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>__address__]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>regex</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;localhost:9105&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>target_label</span><span class=p>:</span><span class=w> </span><span class=l>instance</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>replacement</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;mysql-slave-1&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>source_labels</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>__address__]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>regex</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;localhost:9106&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>target_label</span><span class=p>:</span><span class=w> </span><span class=l>instance</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>replacement</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;mysql-slave-2&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>rule_files</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=s2>&#34;replication_alerts.yml&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>alerting</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>alertmanagers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>static_configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>targets</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;localhost:9093&#39;</span><span class=p>]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-32-1><a class=lnlinks href=#hl-32-1> 1</a>
</span><span class=lnt id=hl-32-2><a class=lnlinks href=#hl-32-2> 2</a>
</span><span class=lnt id=hl-32-3><a class=lnlinks href=#hl-32-3> 3</a>
</span><span class=lnt id=hl-32-4><a class=lnlinks href=#hl-32-4> 4</a>
</span><span class=lnt id=hl-32-5><a class=lnlinks href=#hl-32-5> 5</a>
</span><span class=lnt id=hl-32-6><a class=lnlinks href=#hl-32-6> 6</a>
</span><span class=lnt id=hl-32-7><a class=lnlinks href=#hl-32-7> 7</a>
</span><span class=lnt id=hl-32-8><a class=lnlinks href=#hl-32-8> 8</a>
</span><span class=lnt id=hl-32-9><a class=lnlinks href=#hl-32-9> 9</a>
</span><span class=lnt id=hl-32-10><a class=lnlinks href=#hl-32-10>10</a>
</span><span class=lnt id=hl-32-11><a class=lnlinks href=#hl-32-11>11</a>
</span><span class=lnt id=hl-32-12><a class=lnlinks href=#hl-32-12>12</a>
</span><span class=lnt id=hl-32-13><a class=lnlinks href=#hl-32-13>13</a>
</span><span class=lnt id=hl-32-14><a class=lnlinks href=#hl-32-14>14</a>
</span><span class=lnt id=hl-32-15><a class=lnlinks href=#hl-32-15>15</a>
</span><span class=lnt id=hl-32-16><a class=lnlinks href=#hl-32-16>16</a>
</span><span class=lnt id=hl-32-17><a class=lnlinks href=#hl-32-17>17</a>
</span><span class=lnt id=hl-32-18><a class=lnlinks href=#hl-32-18>18</a>
</span><span class=lnt id=hl-32-19><a class=lnlinks href=#hl-32-19>19</a>
</span><span class=lnt id=hl-32-20><a class=lnlinks href=#hl-32-20>20</a>
</span><span class=lnt id=hl-32-21><a class=lnlinks href=#hl-32-21>21</a>
</span><span class=lnt id=hl-32-22><a class=lnlinks href=#hl-32-22>22</a>
</span><span class=lnt id=hl-32-23><a class=lnlinks href=#hl-32-23>23</a>
</span><span class=lnt id=hl-32-24><a class=lnlinks href=#hl-32-24>24</a>
</span><span class=lnt id=hl-32-25><a class=lnlinks href=#hl-32-25>25</a>
</span><span class=lnt id=hl-32-26><a class=lnlinks href=#hl-32-26>26</a>
</span><span class=lnt id=hl-32-27><a class=lnlinks href=#hl-32-27>27</a>
</span><span class=lnt id=hl-32-28><a class=lnlinks href=#hl-32-28>28</a>
</span><span class=lnt id=hl-32-29><a class=lnlinks href=#hl-32-29>29</a>
</span><span class=lnt id=hl-32-30><a class=lnlinks href=#hl-32-30>30</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># replication_alerts.yml - 복제 관련 알람 규칙</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>groups</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>replication_alerts</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>alert</span><span class=p>:</span><span class=w> </span><span class=l>ReplicationLagHigh</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>expr</span><span class=p>:</span><span class=w> </span><span class=l>mysql_slave_lag_seconds &gt; 30</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>for</span><span class=p>:</span><span class=w> </span><span class=l>1m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class=l>warning</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>summary</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;복제 지연 감지&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ $labels.instance }}에서 복제 지연이 {{ $value }}초입니다&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>alert</span><span class=p>:</span><span class=w> </span><span class=l>ReplicationStopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>expr</span><span class=p>:</span><span class=w> </span><span class=l>mysql_slave_running != 1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>for</span><span class=p>:</span><span class=w> </span><span class=l>0m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class=l>critical</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>summary</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;복제 중단&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{{ $labels.instance }}에서 복제가 중단되었습니다&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>alert</span><span class=p>:</span><span class=w> </span><span class=l>MasterDown</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>expr</span><span class=p>:</span><span class=w> </span><span class=l>up{job=&#34;mysql-master&#34;} == 0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>for</span><span class=p>:</span><span class=w> </span><span class=l>1m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class=l>critical</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>summary</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;마스터 노드 다운&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;MySQL 마스터가 응답하지 않습니다&#34;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=62-보안-및-컴플라이언스-1>6.2 보안 및 컴플라이언스<a hidden class=anchor aria-hidden=true href=#62-보안-및-컴플라이언스-1>#</a></h4><p>복제 환경에서는 <strong>네트워크를 통한 데이터 전송과 다중 접점 관리</strong>로 인해 보안 위험이 증가하므로, 체계적인 보안 전략이 필요합니다.</p><p><strong>핵심 보안 고려사항:</strong></p><ol><li><strong>전송 중 암호화 (Encryption in Transit)</strong><ul><li><strong>무엇을</strong>: 복제 채널의 SSL/TLS 암호화</li><li><strong>왜 필요한가</strong>: 네트워크 스니핑으로부터 민감 데이터 보호</li><li><strong>어떻게</strong>: 인증서 기반 상호 인증, 강력한 암호화 알고리즘 사용</li></ul></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-33-1><a class=lnlinks href=#hl-33-1> 1</a>
</span><span class=lnt id=hl-33-2><a class=lnlinks href=#hl-33-2> 2</a>
</span><span class=lnt id=hl-33-3><a class=lnlinks href=#hl-33-3> 3</a>
</span><span class=lnt id=hl-33-4><a class=lnlinks href=#hl-33-4> 4</a>
</span><span class=lnt id=hl-33-5><a class=lnlinks href=#hl-33-5> 5</a>
</span><span class=lnt id=hl-33-6><a class=lnlinks href=#hl-33-6> 6</a>
</span><span class=lnt id=hl-33-7><a class=lnlinks href=#hl-33-7> 7</a>
</span><span class=lnt id=hl-33-8><a class=lnlinks href=#hl-33-8> 8</a>
</span><span class=lnt id=hl-33-9><a class=lnlinks href=#hl-33-9> 9</a>
</span><span class=lnt id=hl-33-10><a class=lnlinks href=#hl-33-10>10</a>
</span><span class=lnt id=hl-33-11><a class=lnlinks href=#hl-33-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- MySQL SSL 복제 설정 예시
</span></span></span><span class=line><span class=cl><span class=c1>-- 마스터에서 SSL 활성화
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>CHANGE</span><span class=w> </span><span class=n>MASTER</span><span class=w> </span><span class=k>TO</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>MASTER_HOST</span><span class=o>=</span><span class=s1>&#39;master-server&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>MASTER_USER</span><span class=o>=</span><span class=s1>&#39;repl_ssl_user&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>MASTER_PASSWORD</span><span class=o>=</span><span class=s1>&#39;secure_password&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>MASTER_SSL</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>MASTER_SSL_CA</span><span class=o>=</span><span class=s1>&#39;/etc/mysql/ssl/ca.pem&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>MASTER_SSL_CERT</span><span class=o>=</span><span class=s1>&#39;/etc/mysql/ssl/client-cert.pem&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>MASTER_SSL_KEY</span><span class=o>=</span><span class=s1>&#39;/etc/mysql/ssl/client-key.pem&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>MASTER_SSL_VERIFY_SERVER_CERT</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ol start=2><li><p><strong>저장 시 암호화 (Encryption at Rest)</strong></p><ul><li><strong>무엇을</strong>: 복제본 데이터의 디스크 레벨 암호화</li><li><strong>왜 필요한가</strong>: 물리적 접근으로부터 데이터 보호</li><li><strong>어떻게</strong>: 투명한 데이터 암호화(TDE), 파일시스템 레벨 암호화</li></ul></li><li><p><strong>접근 제어 및 인증 (Access Control & Authentication)</strong></p><ul><li><strong>무엇을</strong>: 복제 사용자별 최소 권한 원칙 적용</li><li><strong>왜 필요한가</strong>: 복제 계정 탈취 시 피해 최소화</li><li><strong>어떻게</strong>: 역할 기반 접근 제어(RBAC), 정기적 권한 검토</li></ul></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-34-1><a class=lnlinks href=#hl-34-1>  1</a>
</span><span class=lnt id=hl-34-2><a class=lnlinks href=#hl-34-2>  2</a>
</span><span class=lnt id=hl-34-3><a class=lnlinks href=#hl-34-3>  3</a>
</span><span class=lnt id=hl-34-4><a class=lnlinks href=#hl-34-4>  4</a>
</span><span class=lnt id=hl-34-5><a class=lnlinks href=#hl-34-5>  5</a>
</span><span class=lnt id=hl-34-6><a class=lnlinks href=#hl-34-6>  6</a>
</span><span class=lnt id=hl-34-7><a class=lnlinks href=#hl-34-7>  7</a>
</span><span class=lnt id=hl-34-8><a class=lnlinks href=#hl-34-8>  8</a>
</span><span class=lnt id=hl-34-9><a class=lnlinks href=#hl-34-9>  9</a>
</span><span class=lnt id=hl-34-10><a class=lnlinks href=#hl-34-10> 10</a>
</span><span class=lnt id=hl-34-11><a class=lnlinks href=#hl-34-11> 11</a>
</span><span class=lnt id=hl-34-12><a class=lnlinks href=#hl-34-12> 12</a>
</span><span class=lnt id=hl-34-13><a class=lnlinks href=#hl-34-13> 13</a>
</span><span class=lnt id=hl-34-14><a class=lnlinks href=#hl-34-14> 14</a>
</span><span class=lnt id=hl-34-15><a class=lnlinks href=#hl-34-15> 15</a>
</span><span class=lnt id=hl-34-16><a class=lnlinks href=#hl-34-16> 16</a>
</span><span class=lnt id=hl-34-17><a class=lnlinks href=#hl-34-17> 17</a>
</span><span class=lnt id=hl-34-18><a class=lnlinks href=#hl-34-18> 18</a>
</span><span class=lnt id=hl-34-19><a class=lnlinks href=#hl-34-19> 19</a>
</span><span class=lnt id=hl-34-20><a class=lnlinks href=#hl-34-20> 20</a>
</span><span class=lnt id=hl-34-21><a class=lnlinks href=#hl-34-21> 21</a>
</span><span class=lnt id=hl-34-22><a class=lnlinks href=#hl-34-22> 22</a>
</span><span class=lnt id=hl-34-23><a class=lnlinks href=#hl-34-23> 23</a>
</span><span class=lnt id=hl-34-24><a class=lnlinks href=#hl-34-24> 24</a>
</span><span class=lnt id=hl-34-25><a class=lnlinks href=#hl-34-25> 25</a>
</span><span class=lnt id=hl-34-26><a class=lnlinks href=#hl-34-26> 26</a>
</span><span class=lnt id=hl-34-27><a class=lnlinks href=#hl-34-27> 27</a>
</span><span class=lnt id=hl-34-28><a class=lnlinks href=#hl-34-28> 28</a>
</span><span class=lnt id=hl-34-29><a class=lnlinks href=#hl-34-29> 29</a>
</span><span class=lnt id=hl-34-30><a class=lnlinks href=#hl-34-30> 30</a>
</span><span class=lnt id=hl-34-31><a class=lnlinks href=#hl-34-31> 31</a>
</span><span class=lnt id=hl-34-32><a class=lnlinks href=#hl-34-32> 32</a>
</span><span class=lnt id=hl-34-33><a class=lnlinks href=#hl-34-33> 33</a>
</span><span class=lnt id=hl-34-34><a class=lnlinks href=#hl-34-34> 34</a>
</span><span class=lnt id=hl-34-35><a class=lnlinks href=#hl-34-35> 35</a>
</span><span class=lnt id=hl-34-36><a class=lnlinks href=#hl-34-36> 36</a>
</span><span class=lnt id=hl-34-37><a class=lnlinks href=#hl-34-37> 37</a>
</span><span class=lnt id=hl-34-38><a class=lnlinks href=#hl-34-38> 38</a>
</span><span class=lnt id=hl-34-39><a class=lnlinks href=#hl-34-39> 39</a>
</span><span class=lnt id=hl-34-40><a class=lnlinks href=#hl-34-40> 40</a>
</span><span class=lnt id=hl-34-41><a class=lnlinks href=#hl-34-41> 41</a>
</span><span class=lnt id=hl-34-42><a class=lnlinks href=#hl-34-42> 42</a>
</span><span class=lnt id=hl-34-43><a class=lnlinks href=#hl-34-43> 43</a>
</span><span class=lnt id=hl-34-44><a class=lnlinks href=#hl-34-44> 44</a>
</span><span class=lnt id=hl-34-45><a class=lnlinks href=#hl-34-45> 45</a>
</span><span class=lnt id=hl-34-46><a class=lnlinks href=#hl-34-46> 46</a>
</span><span class=lnt id=hl-34-47><a class=lnlinks href=#hl-34-47> 47</a>
</span><span class=lnt id=hl-34-48><a class=lnlinks href=#hl-34-48> 48</a>
</span><span class=lnt id=hl-34-49><a class=lnlinks href=#hl-34-49> 49</a>
</span><span class=lnt id=hl-34-50><a class=lnlinks href=#hl-34-50> 50</a>
</span><span class=lnt id=hl-34-51><a class=lnlinks href=#hl-34-51> 51</a>
</span><span class=lnt id=hl-34-52><a class=lnlinks href=#hl-34-52> 52</a>
</span><span class=lnt id=hl-34-53><a class=lnlinks href=#hl-34-53> 53</a>
</span><span class=lnt id=hl-34-54><a class=lnlinks href=#hl-34-54> 54</a>
</span><span class=lnt id=hl-34-55><a class=lnlinks href=#hl-34-55> 55</a>
</span><span class=lnt id=hl-34-56><a class=lnlinks href=#hl-34-56> 56</a>
</span><span class=lnt id=hl-34-57><a class=lnlinks href=#hl-34-57> 57</a>
</span><span class=lnt id=hl-34-58><a class=lnlinks href=#hl-34-58> 58</a>
</span><span class=lnt id=hl-34-59><a class=lnlinks href=#hl-34-59> 59</a>
</span><span class=lnt id=hl-34-60><a class=lnlinks href=#hl-34-60> 60</a>
</span><span class=lnt id=hl-34-61><a class=lnlinks href=#hl-34-61> 61</a>
</span><span class=lnt id=hl-34-62><a class=lnlinks href=#hl-34-62> 62</a>
</span><span class=lnt id=hl-34-63><a class=lnlinks href=#hl-34-63> 63</a>
</span><span class=lnt id=hl-34-64><a class=lnlinks href=#hl-34-64> 64</a>
</span><span class=lnt id=hl-34-65><a class=lnlinks href=#hl-34-65> 65</a>
</span><span class=lnt id=hl-34-66><a class=lnlinks href=#hl-34-66> 66</a>
</span><span class=lnt id=hl-34-67><a class=lnlinks href=#hl-34-67> 67</a>
</span><span class=lnt id=hl-34-68><a class=lnlinks href=#hl-34-68> 68</a>
</span><span class=lnt id=hl-34-69><a class=lnlinks href=#hl-34-69> 69</a>
</span><span class=lnt id=hl-34-70><a class=lnlinks href=#hl-34-70> 70</a>
</span><span class=lnt id=hl-34-71><a class=lnlinks href=#hl-34-71> 71</a>
</span><span class=lnt id=hl-34-72><a class=lnlinks href=#hl-34-72> 72</a>
</span><span class=lnt id=hl-34-73><a class=lnlinks href=#hl-34-73> 73</a>
</span><span class=lnt id=hl-34-74><a class=lnlinks href=#hl-34-74> 74</a>
</span><span class=lnt id=hl-34-75><a class=lnlinks href=#hl-34-75> 75</a>
</span><span class=lnt id=hl-34-76><a class=lnlinks href=#hl-34-76> 76</a>
</span><span class=lnt id=hl-34-77><a class=lnlinks href=#hl-34-77> 77</a>
</span><span class=lnt id=hl-34-78><a class=lnlinks href=#hl-34-78> 78</a>
</span><span class=lnt id=hl-34-79><a class=lnlinks href=#hl-34-79> 79</a>
</span><span class=lnt id=hl-34-80><a class=lnlinks href=#hl-34-80> 80</a>
</span><span class=lnt id=hl-34-81><a class=lnlinks href=#hl-34-81> 81</a>
</span><span class=lnt id=hl-34-82><a class=lnlinks href=#hl-34-82> 82</a>
</span><span class=lnt id=hl-34-83><a class=lnlinks href=#hl-34-83> 83</a>
</span><span class=lnt id=hl-34-84><a class=lnlinks href=#hl-34-84> 84</a>
</span><span class=lnt id=hl-34-85><a class=lnlinks href=#hl-34-85> 85</a>
</span><span class=lnt id=hl-34-86><a class=lnlinks href=#hl-34-86> 86</a>
</span><span class=lnt id=hl-34-87><a class=lnlinks href=#hl-34-87> 87</a>
</span><span class=lnt id=hl-34-88><a class=lnlinks href=#hl-34-88> 88</a>
</span><span class=lnt id=hl-34-89><a class=lnlinks href=#hl-34-89> 89</a>
</span><span class=lnt id=hl-34-90><a class=lnlinks href=#hl-34-90> 90</a>
</span><span class=lnt id=hl-34-91><a class=lnlinks href=#hl-34-91> 91</a>
</span><span class=lnt id=hl-34-92><a class=lnlinks href=#hl-34-92> 92</a>
</span><span class=lnt id=hl-34-93><a class=lnlinks href=#hl-34-93> 93</a>
</span><span class=lnt id=hl-34-94><a class=lnlinks href=#hl-34-94> 94</a>
</span><span class=lnt id=hl-34-95><a class=lnlinks href=#hl-34-95> 95</a>
</span><span class=lnt id=hl-34-96><a class=lnlinks href=#hl-34-96> 96</a>
</span><span class=lnt id=hl-34-97><a class=lnlinks href=#hl-34-97> 97</a>
</span><span class=lnt id=hl-34-98><a class=lnlinks href=#hl-34-98> 98</a>
</span><span class=lnt id=hl-34-99><a class=lnlinks href=#hl-34-99> 99</a>
</span><span class=lnt id=hl-34-100><a class=lnlinks href=#hl-34-100>100</a>
</span><span class=lnt id=hl-34-101><a class=lnlinks href=#hl-34-101>101</a>
</span><span class=lnt id=hl-34-102><a class=lnlinks href=#hl-34-102>102</a>
</span><span class=lnt id=hl-34-103><a class=lnlinks href=#hl-34-103>103</a>
</span><span class=lnt id=hl-34-104><a class=lnlinks href=#hl-34-104>104</a>
</span><span class=lnt id=hl-34-105><a class=lnlinks href=#hl-34-105>105</a>
</span><span class=lnt id=hl-34-106><a class=lnlinks href=#hl-34-106>106</a>
</span><span class=lnt id=hl-34-107><a class=lnlinks href=#hl-34-107>107</a>
</span><span class=lnt id=hl-34-108><a class=lnlinks href=#hl-34-108>108</a>
</span><span class=lnt id=hl-34-109><a class=lnlinks href=#hl-34-109>109</a>
</span><span class=lnt id=hl-34-110><a class=lnlinks href=#hl-34-110>110</a>
</span><span class=lnt id=hl-34-111><a class=lnlinks href=#hl-34-111>111</a>
</span><span class=lnt id=hl-34-112><a class=lnlinks href=#hl-34-112>112</a>
</span><span class=lnt id=hl-34-113><a class=lnlinks href=#hl-34-113>113</a>
</span><span class=lnt id=hl-34-114><a class=lnlinks href=#hl-34-114>114</a>
</span><span class=lnt id=hl-34-115><a class=lnlinks href=#hl-34-115>115</a>
</span><span class=lnt id=hl-34-116><a class=lnlinks href=#hl-34-116>116</a>
</span><span class=lnt id=hl-34-117><a class=lnlinks href=#hl-34-117>117</a>
</span><span class=lnt id=hl-34-118><a class=lnlinks href=#hl-34-118>118</a>
</span><span class=lnt id=hl-34-119><a class=lnlinks href=#hl-34-119>119</a>
</span><span class=lnt id=hl-34-120><a class=lnlinks href=#hl-34-120>120</a>
</span><span class=lnt id=hl-34-121><a class=lnlinks href=#hl-34-121>121</a>
</span><span class=lnt id=hl-34-122><a class=lnlinks href=#hl-34-122>122</a>
</span><span class=lnt id=hl-34-123><a class=lnlinks href=#hl-34-123>123</a>
</span><span class=lnt id=hl-34-124><a class=lnlinks href=#hl-34-124>124</a>
</span><span class=lnt id=hl-34-125><a class=lnlinks href=#hl-34-125>125</a>
</span><span class=lnt id=hl-34-126><a class=lnlinks href=#hl-34-126>126</a>
</span><span class=lnt id=hl-34-127><a class=lnlinks href=#hl-34-127>127</a>
</span><span class=lnt id=hl-34-128><a class=lnlinks href=#hl-34-128>128</a>
</span><span class=lnt id=hl-34-129><a class=lnlinks href=#hl-34-129>129</a>
</span><span class=lnt id=hl-34-130><a class=lnlinks href=#hl-34-130>130</a>
</span><span class=lnt id=hl-34-131><a class=lnlinks href=#hl-34-131>131</a>
</span><span class=lnt id=hl-34-132><a class=lnlinks href=#hl-34-132>132</a>
</span><span class=lnt id=hl-34-133><a class=lnlinks href=#hl-34-133>133</a>
</span><span class=lnt id=hl-34-134><a class=lnlinks href=#hl-34-134>134</a>
</span><span class=lnt id=hl-34-135><a class=lnlinks href=#hl-34-135>135</a>
</span><span class=lnt id=hl-34-136><a class=lnlinks href=#hl-34-136>136</a>
</span><span class=lnt id=hl-34-137><a class=lnlinks href=#hl-34-137>137</a>
</span><span class=lnt id=hl-34-138><a class=lnlinks href=#hl-34-138>138</a>
</span><span class=lnt id=hl-34-139><a class=lnlinks href=#hl-34-139>139</a>
</span><span class=lnt id=hl-34-140><a class=lnlinks href=#hl-34-140>140</a>
</span><span class=lnt id=hl-34-141><a class=lnlinks href=#hl-34-141>141</a>
</span><span class=lnt id=hl-34-142><a class=lnlinks href=#hl-34-142>142</a>
</span><span class=lnt id=hl-34-143><a class=lnlinks href=#hl-34-143>143</a>
</span><span class=lnt id=hl-34-144><a class=lnlinks href=#hl-34-144>144</a>
</span><span class=lnt id=hl-34-145><a class=lnlinks href=#hl-34-145>145</a>
</span><span class=lnt id=hl-34-146><a class=lnlinks href=#hl-34-146>146</a>
</span><span class=lnt id=hl-34-147><a class=lnlinks href=#hl-34-147>147</a>
</span><span class=lnt id=hl-34-148><a class=lnlinks href=#hl-34-148>148</a>
</span><span class=lnt id=hl-34-149><a class=lnlinks href=#hl-34-149>149</a>
</span><span class=lnt id=hl-34-150><a class=lnlinks href=#hl-34-150>150</a>
</span><span class=lnt id=hl-34-151><a class=lnlinks href=#hl-34-151>151</a>
</span><span class=lnt id=hl-34-152><a class=lnlinks href=#hl-34-152>152</a>
</span><span class=lnt id=hl-34-153><a class=lnlinks href=#hl-34-153>153</a>
</span><span class=lnt id=hl-34-154><a class=lnlinks href=#hl-34-154>154</a>
</span><span class=lnt id=hl-34-155><a class=lnlinks href=#hl-34-155>155</a>
</span><span class=lnt id=hl-34-156><a class=lnlinks href=#hl-34-156>156</a>
</span><span class=lnt id=hl-34-157><a class=lnlinks href=#hl-34-157>157</a>
</span><span class=lnt id=hl-34-158><a class=lnlinks href=#hl-34-158>158</a>
</span><span class=lnt id=hl-34-159><a class=lnlinks href=#hl-34-159>159</a>
</span><span class=lnt id=hl-34-160><a class=lnlinks href=#hl-34-160>160</a>
</span><span class=lnt id=hl-34-161><a class=lnlinks href=#hl-34-161>161</a>
</span><span class=lnt id=hl-34-162><a class=lnlinks href=#hl-34-162>162</a>
</span><span class=lnt id=hl-34-163><a class=lnlinks href=#hl-34-163>163</a>
</span><span class=lnt id=hl-34-164><a class=lnlinks href=#hl-34-164>164</a>
</span><span class=lnt id=hl-34-165><a class=lnlinks href=#hl-34-165>165</a>
</span><span class=lnt id=hl-34-166><a class=lnlinks href=#hl-34-166>166</a>
</span><span class=lnt id=hl-34-167><a class=lnlinks href=#hl-34-167>167</a>
</span><span class=lnt id=hl-34-168><a class=lnlinks href=#hl-34-168>168</a>
</span><span class=lnt id=hl-34-169><a class=lnlinks href=#hl-34-169>169</a>
</span><span class=lnt id=hl-34-170><a class=lnlinks href=#hl-34-170>170</a>
</span><span class=lnt id=hl-34-171><a class=lnlinks href=#hl-34-171>171</a>
</span><span class=lnt id=hl-34-172><a class=lnlinks href=#hl-34-172>172</a>
</span><span class=lnt id=hl-34-173><a class=lnlinks href=#hl-34-173>173</a>
</span><span class=lnt id=hl-34-174><a class=lnlinks href=#hl-34-174>174</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 보안 강화된 복제 설정 관리 시스템</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>ssl</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>hashlib</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>secrets</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>cryptography.fernet</span> <span class=kn>import</span> <span class=n>Fernet</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span><span class=p>,</span> <span class=n>timedelta</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SecureReplicationManager</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;보안 강화 복제 관리 시스템&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>encryption_key</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_generate_encryption_key</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>ssl_context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_ssl_context</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>access_logs</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_generate_encryption_key</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bytes</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;암호화 키 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Fernet</span><span class=o>.</span><span class=n>generate_key</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_create_ssl_context</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>ssl</span><span class=o>.</span><span class=n>SSLContext</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;SSL 컨텍스트 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>context</span> <span class=o>=</span> <span class=n>ssl</span><span class=o>.</span><span class=n>create_default_context</span><span class=p>(</span><span class=n>ssl</span><span class=o>.</span><span class=n>Purpose</span><span class=o>.</span><span class=n>SERVER_AUTH</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>context</span><span class=o>.</span><span class=n>check_hostname</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># 내부 네트워크에서만 사용</span>
</span></span><span class=line><span class=cl>        <span class=n>context</span><span class=o>.</span><span class=n>verify_mode</span> <span class=o>=</span> <span class=n>ssl</span><span class=o>.</span><span class=n>CERT_REQUIRED</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>context</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create_replication_user</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>username</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>allowed_hosts</span><span class=p>:</span> <span class=nb>list</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;보안 강화된 복제 사용자 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 강력한 비밀번호 생성</span>
</span></span><span class=line><span class=cl>        <span class=n>password</span> <span class=o>=</span> <span class=n>secrets</span><span class=o>.</span><span class=n>token_urlsafe</span><span class=p>(</span><span class=mi>32</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>password_hash</span> <span class=o>=</span> <span class=n>hashlib</span><span class=o>.</span><span class=n>sha256</span><span class=p>(</span><span class=n>password</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span><span class=o>.</span><span class=n>hexdigest</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 사용자 생성 SQL (최소 권한)</span>
</span></span><span class=line><span class=cl>        <span class=n>user_creation_sql</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        -- 복제 전용 사용자 생성
</span></span></span><span class=line><span class=cl><span class=s2>        CREATE USER &#39;</span><span class=si>{</span><span class=n>username</span><span class=si>}</span><span class=s2>&#39;@&#39;%&#39; IDENTIFIED BY &#39;</span><span class=si>{</span><span class=n>password</span><span class=si>}</span><span class=s2>&#39;;
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        -- 최소 복제 권한만 부여
</span></span></span><span class=line><span class=cl><span class=s2>        GRANT REPLICATION SLAVE ON *.* TO &#39;</span><span class=si>{</span><span class=n>username</span><span class=si>}</span><span class=s2>&#39;@&#39;%&#39;;
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        -- 특정 호스트에서만 접속 허용
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>host</span> <span class=ow>in</span> <span class=n>allowed_hosts</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>user_creation_sql</span> <span class=o>+=</span> <span class=sa>f</span><span class=s2>&#34;CREATE USER &#39;</span><span class=si>{</span><span class=n>username</span><span class=si>}</span><span class=s2>&#39;@&#39;</span><span class=si>{</span><span class=n>host</span><span class=si>}</span><span class=s2>&#39; IDENTIFIED BY &#39;</span><span class=si>{</span><span class=n>password</span><span class=si>}</span><span class=s2>&#39;;</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>user_creation_sql</span> <span class=o>+=</span> <span class=sa>f</span><span class=s2>&#34;GRANT REPLICATION SLAVE ON *.* TO &#39;</span><span class=si>{</span><span class=n>username</span><span class=si>}</span><span class=s2>&#39;@&#39;</span><span class=si>{</span><span class=n>host</span><span class=si>}</span><span class=s2>&#39;;</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 접근 로그 기록</span>
</span></span><span class=line><span class=cl>        <span class=n>access_log</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;action&#39;</span><span class=p>:</span> <span class=s1>&#39;create_user&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;username&#39;</span><span class=p>:</span> <span class=n>username</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;allowed_hosts&#39;</span><span class=p>:</span> <span class=n>allowed_hosts</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;password_strength&#39;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=n>password</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>access_logs</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>access_log</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;username&#39;</span><span class=p>:</span> <span class=n>username</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;password&#39;</span><span class=p>:</span> <span class=n>password</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;password_hash&#39;</span><span class=p>:</span> <span class=n>password_hash</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;sql_commands&#39;</span><span class=p>:</span> <span class=n>user_creation_sql</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;created_at&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>encrypt_sensitive_config</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>config</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;민감한 설정 정보 암호화&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>cipher</span> <span class=o>=</span> <span class=n>Fernet</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>encryption_key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 민감 정보만 암호화</span>
</span></span><span class=line><span class=cl>        <span class=n>sensitive_keys</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;password&#39;</span><span class=p>,</span> <span class=s1>&#39;private_key&#39;</span><span class=p>,</span> <span class=s1>&#39;secret&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>encrypted_config</span> <span class=o>=</span> <span class=n>config</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>config</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nb>any</span><span class=p>(</span><span class=n>sensitive</span> <span class=ow>in</span> <span class=n>key</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=k>for</span> <span class=n>sensitive</span> <span class=ow>in</span> <span class=n>sensitive_keys</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=n>encrypted_config</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>cipher</span><span class=o>.</span><span class=n>encrypt</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>value</span><span class=p>)</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span><span class=o>.</span><span class=n>decode</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>encrypted_config</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>audit_replication_access</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>days_back</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>7</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;복제 접근 감사&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>cutoff_date</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span> <span class=o>-</span> <span class=n>timedelta</span><span class=p>(</span><span class=n>days</span><span class=o>=</span><span class=n>days_back</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>recent_logs</span> <span class=o>=</span> <span class=p>[</span><span class=n>log</span> <span class=k>for</span> <span class=n>log</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>access_logs</span> <span class=k>if</span> <span class=n>log</span><span class=p>[</span><span class=s1>&#39;timestamp&#39;</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>cutoff_date</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 감사 결과 분석</span>
</span></span><span class=line><span class=cl>        <span class=n>user_activity</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>log</span> <span class=ow>in</span> <span class=n>recent_logs</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>username</span> <span class=o>=</span> <span class=n>log</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;username&#39;</span><span class=p>,</span> <span class=s1>&#39;unknown&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>username</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>user_activity</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>user_activity</span><span class=p>[</span><span class=n>username</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;first_access&#39;</span><span class=p>:</span> <span class=n>log</span><span class=p>[</span><span class=s1>&#39;timestamp&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;last_access&#39;</span><span class=p>:</span> <span class=n>log</span><span class=p>[</span><span class=s1>&#39;timestamp&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;access_count&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;actions&#39;</span><span class=p>:</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>user_activity</span><span class=p>[</span><span class=n>username</span><span class=p>][</span><span class=s1>&#39;access_count&#39;</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=n>user_activity</span><span class=p>[</span><span class=n>username</span><span class=p>][</span><span class=s1>&#39;last_access&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>user_activity</span><span class=p>[</span><span class=n>username</span><span class=p>][</span><span class=s1>&#39;last_access&#39;</span><span class=p>],</span> 
</span></span><span class=line><span class=cl>                <span class=n>log</span><span class=p>[</span><span class=s1>&#39;timestamp&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>user_activity</span><span class=p>[</span><span class=n>username</span><span class=p>][</span><span class=s1>&#39;actions&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>log</span><span class=p>[</span><span class=s1>&#39;action&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;audit_period&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>days_back</span><span class=si>}</span><span class=s1> days&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;total_activities&#39;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=n>recent_logs</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;unique_users&#39;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=n>user_activity</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;user_details&#39;</span><span class=p>:</span> <span class=n>user_activity</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>check_compliance</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;컴플라이언스 체크리스트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>compliance_checks</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;encryption_in_transit&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;status&#39;</span><span class=p>:</span> <span class=s1>&#39;PASS&#39;</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>ssl_context</span> <span class=k>else</span> <span class=s1>&#39;FAIL&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;description&#39;</span><span class=p>:</span> <span class=s1>&#39;SSL/TLS 암호화 설정&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;strong_authentication&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;status&#39;</span><span class=p>:</span> <span class=s1>&#39;PASS&#39;</span><span class=p>,</span>  <span class=c1># 강력한 비밀번호 생성 확인됨</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;description&#39;</span><span class=p>:</span> <span class=s1>&#39;강력한 인증 체계&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;access_logging&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;status&#39;</span><span class=p>:</span> <span class=s1>&#39;PASS&#39;</span> <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>access_logs</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=k>else</span> <span class=s1>&#39;FAIL&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;description&#39;</span><span class=p>:</span> <span class=s1>&#39;접근 로그 기록&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;regular_audit&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;status&#39;</span><span class=p>:</span> <span class=s1>&#39;PASS&#39;</span><span class=p>,</span>  <span class=c1># 감사 기능 구현됨</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;description&#39;</span><span class=p>:</span> <span class=s1>&#39;정기적 보안 감사&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;data_classification&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;status&#39;</span><span class=p>:</span> <span class=s1>&#39;MANUAL_REVIEW&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;description&#39;</span><span class=p>:</span> <span class=s1>&#39;데이터 분류 및 라벨링 (수동 검토 필요)&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>total_checks</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>compliance_checks</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>passed_checks</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=mi>1</span> <span class=k>for</span> <span class=n>check</span> <span class=ow>in</span> <span class=n>compliance_checks</span><span class=o>.</span><span class=n>values</span><span class=p>()</span> <span class=k>if</span> <span class=n>check</span><span class=p>[</span><span class=s1>&#39;status&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;PASS&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;overall_score&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>passed_checks</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>total_checks</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;compliance_percentage&#39;</span><span class=p>:</span> <span class=p>(</span><span class=n>passed_checks</span> <span class=o>/</span> <span class=n>total_checks</span><span class=p>)</span> <span class=o>*</span> <span class=mi>100</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;individual_checks&#39;</span><span class=p>:</span> <span class=n>compliance_checks</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;recommendations&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_generate_security_recommendations</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_generate_security_recommendations</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;보안 개선 권고사항&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>recommendations</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;복제 사용자 비밀번호를 90일마다 변경하세요&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;복제 트래픽에 대한 네트워크 세분화를 구현하세요&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;복제 로그에 대한 정기적인 보안 분석을 수행하세요&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;복제본에 대한 접근 권한을 정기적으로 검토하세요&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;재해 복구 시나리오에서의 보안 절차를 테스트하세요&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>recommendations</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>security_manager</span> <span class=o>=</span> <span class=n>SecureReplicationManager</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 보안 강화된 복제 사용자 생성</span>
</span></span><span class=line><span class=cl><span class=n>repl_user</span> <span class=o>=</span> <span class=n>security_manager</span><span class=o>.</span><span class=n>create_replication_user</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>username</span><span class=o>=</span><span class=s1>&#39;secure_repl_user&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>allowed_hosts</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;192.168.1.10&#39;</span><span class=p>,</span> <span class=s1>&#39;192.168.1.11&#39;</span><span class=p>,</span> <span class=s1>&#39;192.168.1.12&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;생성된 복제 사용자:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;사용자명: </span><span class=si>{</span><span class=n>repl_user</span><span class=p>[</span><span class=s1>&#39;username&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;비밀번호: </span><span class=si>{</span><span class=n>repl_user</span><span class=p>[</span><span class=s1>&#39;password&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 컴플라이언스 체크</span>
</span></span><span class=line><span class=cl><span class=n>compliance_result</span> <span class=o>=</span> <span class=n>security_manager</span><span class=o>.</span><span class=n>check_compliance</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>컴플라이언스 점수: </span><span class=si>{</span><span class=n>compliance_result</span><span class=p>[</span><span class=s1>&#39;overall_score&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;준수율: </span><span class=si>{</span><span class=n>compliance_result</span><span class=p>[</span><span class=s1>&#39;compliance_percentage&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>.1f</span><span class=si>}</span><span class=s2>%&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=63-성능-최적화-및-확장성-1>6.3 성능 최적화 및 확장성<a hidden class=anchor aria-hidden=true href=#63-성능-최적화-및-확장성-1>#</a></h4><p>복제 시스템의 성능은 <strong>네트워크 대역폭, 디스크 I/O, CPU 처리 능력</strong>의 균형을 통해 최적화되며, 확장성은 복제 토폴로지와 샤딩 전략으로 확보됩니다.</p><p><strong>성능 최적화 전략:</strong></p><ol><li><strong>복제 버퍼 최적화</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-35-1><a class=lnlinks href=#hl-35-1> 1</a>
</span><span class=lnt id=hl-35-2><a class=lnlinks href=#hl-35-2> 2</a>
</span><span class=lnt id=hl-35-3><a class=lnlinks href=#hl-35-3> 3</a>
</span><span class=lnt id=hl-35-4><a class=lnlinks href=#hl-35-4> 4</a>
</span><span class=lnt id=hl-35-5><a class=lnlinks href=#hl-35-5> 5</a>
</span><span class=lnt id=hl-35-6><a class=lnlinks href=#hl-35-6> 6</a>
</span><span class=lnt id=hl-35-7><a class=lnlinks href=#hl-35-7> 7</a>
</span><span class=lnt id=hl-35-8><a class=lnlinks href=#hl-35-8> 8</a>
</span><span class=lnt id=hl-35-9><a class=lnlinks href=#hl-35-9> 9</a>
</span><span class=lnt id=hl-35-10><a class=lnlinks href=#hl-35-10>10</a>
</span><span class=lnt id=hl-35-11><a class=lnlinks href=#hl-35-11>11</a>
</span><span class=lnt id=hl-35-12><a class=lnlinks href=#hl-35-12>12</a>
</span><span class=lnt id=hl-35-13><a class=lnlinks href=#hl-35-13>13</a>
</span><span class=lnt id=hl-35-14><a class=lnlinks href=#hl-35-14>14</a>
</span><span class=lnt id=hl-35-15><a class=lnlinks href=#hl-35-15>15</a>
</span><span class=lnt id=hl-35-16><a class=lnlinks href=#hl-35-16>16</a>
</span><span class=lnt id=hl-35-17><a class=lnlinks href=#hl-35-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- MySQL 복제 성능 튜닝 설정
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span><span class=n>mysqld</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>#</span><span class=w> </span><span class=err>바이너리</span><span class=w> </span><span class=err>로그</span><span class=w> </span><span class=err>캐시</span><span class=w> </span><span class=err>크기</span><span class=w> </span><span class=p>(</span><span class=err>트랜잭션</span><span class=w> </span><span class=err>당</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>binlog_cache_size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=n>M</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>#</span><span class=w> </span><span class=err>릴레이</span><span class=w> </span><span class=err>로그</span><span class=w> </span><span class=err>스페이스</span><span class=w> </span><span class=err>제한</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>relay_log_space_limit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>4</span><span class=k>G</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>#</span><span class=w> </span><span class=err>병렬</span><span class=w> </span><span class=err>복제</span><span class=w> </span><span class=err>활성화</span><span class=w> </span><span class=p>(</span><span class=n>MySQL</span><span class=w> </span><span class=mi>5</span><span class=p>.</span><span class=mi>7</span><span class=o>+</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>slave_parallel_type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>LOGICAL_CLOCK</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>slave_parallel_workers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>#</span><span class=w> </span><span class=err>복제</span><span class=w> </span><span class=err>체크섬</span><span class=w> </span><span class=err>비활성화</span><span class=w> </span><span class=p>(</span><span class=err>성능</span><span class=w> </span><span class=err>우선</span><span class=w> </span><span class=err>시</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>slave_sql_verify_checksum</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>#</span><span class=w> </span><span class=err>바이너리</span><span class=w> </span><span class=err>로그</span><span class=w> </span><span class=err>동기화</span><span class=w> </span><span class=err>최적화</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>sync_binlog</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=w>  </span><span class=o>#</span><span class=w> </span><span class=err>성능</span><span class=w> </span><span class=err>우선</span><span class=w> </span><span class=p>(</span><span class=err>안정성</span><span class=w> </span><span class=n>vs</span><span class=w> </span><span class=err>성능</span><span class=w> </span><span class=err>트레이드오프</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ol start=2><li><strong>네트워크 최적화</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-36-1><a class=lnlinks href=#hl-36-1> 1</a>
</span><span class=lnt id=hl-36-2><a class=lnlinks href=#hl-36-2> 2</a>
</span><span class=lnt id=hl-36-3><a class=lnlinks href=#hl-36-3> 3</a>
</span><span class=lnt id=hl-36-4><a class=lnlinks href=#hl-36-4> 4</a>
</span><span class=lnt id=hl-36-5><a class=lnlinks href=#hl-36-5> 5</a>
</span><span class=lnt id=hl-36-6><a class=lnlinks href=#hl-36-6> 6</a>
</span><span class=lnt id=hl-36-7><a class=lnlinks href=#hl-36-7> 7</a>
</span><span class=lnt id=hl-36-8><a class=lnlinks href=#hl-36-8> 8</a>
</span><span class=lnt id=hl-36-9><a class=lnlinks href=#hl-36-9> 9</a>
</span><span class=lnt id=hl-36-10><a class=lnlinks href=#hl-36-10>10</a>
</span><span class=lnt id=hl-36-11><a class=lnlinks href=#hl-36-11>11</a>
</span><span class=lnt id=hl-36-12><a class=lnlinks href=#hl-36-12>12</a>
</span><span class=lnt id=hl-36-13><a class=lnlinks href=#hl-36-13>13</a>
</span><span class=lnt id=hl-36-14><a class=lnlinks href=#hl-36-14>14</a>
</span><span class=lnt id=hl-36-15><a class=lnlinks href=#hl-36-15>15</a>
</span><span class=lnt id=hl-36-16><a class=lnlinks href=#hl-36-16>16</a>
</span><span class=lnt id=hl-36-17><a class=lnlinks href=#hl-36-17>17</a>
</span><span class=lnt id=hl-36-18><a class=lnlinks href=#hl-36-18>18</a>
</span><span class=lnt id=hl-36-19><a class=lnlinks href=#hl-36-19>19</a>
</span><span class=lnt id=hl-36-20><a class=lnlinks href=#hl-36-20>20</a>
</span><span class=lnt id=hl-36-21><a class=lnlinks href=#hl-36-21>21</a>
</span><span class=lnt id=hl-36-22><a class=lnlinks href=#hl-36-22>22</a>
</span><span class=lnt id=hl-36-23><a class=lnlinks href=#hl-36-23>23</a>
</span><span class=lnt id=hl-36-24><a class=lnlinks href=#hl-36-24>24</a>
</span><span class=lnt id=hl-36-25><a class=lnlinks href=#hl-36-25>25</a>
</span><span class=lnt id=hl-36-26><a class=lnlinks href=#hl-36-26>26</a>
</span><span class=lnt id=hl-36-27><a class=lnlinks href=#hl-36-27>27</a>
</span><span class=lnt id=hl-36-28><a class=lnlinks href=#hl-36-28>28</a>
</span><span class=lnt id=hl-36-29><a class=lnlinks href=#hl-36-29>29</a>
</span><span class=lnt id=hl-36-30><a class=lnlinks href=#hl-36-30>30</a>
</span><span class=lnt id=hl-36-31><a class=lnlinks href=#hl-36-31>31</a>
</span><span class=lnt id=hl-36-32><a class=lnlinks href=#hl-36-32>32</a>
</span><span class=lnt id=hl-36-33><a class=lnlinks href=#hl-36-33>33</a>
</span><span class=lnt id=hl-36-34><a class=lnlinks href=#hl-36-34>34</a>
</span><span class=lnt id=hl-36-35><a class=lnlinks href=#hl-36-35>35</a>
</span><span class=lnt id=hl-36-36><a class=lnlinks href=#hl-36-36>36</a>
</span><span class=lnt id=hl-36-37><a class=lnlinks href=#hl-36-37>37</a>
</span><span class=lnt id=hl-36-38><a class=lnlinks href=#hl-36-38>38</a>
</span><span class=lnt id=hl-36-39><a class=lnlinks href=#hl-36-39>39</a>
</span><span class=lnt id=hl-36-40><a class=lnlinks href=#hl-36-40>40</a>
</span><span class=lnt id=hl-36-41><a class=lnlinks href=#hl-36-41>41</a>
</span><span class=lnt id=hl-36-42><a class=lnlinks href=#hl-36-42>42</a>
</span><span class=lnt id=hl-36-43><a class=lnlinks href=#hl-36-43>43</a>
</span><span class=lnt id=hl-36-44><a class=lnlinks href=#hl-36-44>44</a>
</span><span class=lnt id=hl-36-45><a class=lnlinks href=#hl-36-45>45</a>
</span><span class=lnt id=hl-36-46><a class=lnlinks href=#hl-36-46>46</a>
</span><span class=lnt id=hl-36-47><a class=lnlinks href=#hl-36-47>47</a>
</span><span class=lnt id=hl-36-48><a class=lnlinks href=#hl-36-48>48</a>
</span><span class=lnt id=hl-36-49><a class=lnlinks href=#hl-36-49>49</a>
</span><span class=lnt id=hl-36-50><a class=lnlinks href=#hl-36-50>50</a>
</span><span class=lnt id=hl-36-51><a class=lnlinks href=#hl-36-51>51</a>
</span><span class=lnt id=hl-36-52><a class=lnlinks href=#hl-36-52>52</a>
</span><span class=lnt id=hl-36-53><a class=lnlinks href=#hl-36-53>53</a>
</span><span class=lnt id=hl-36-54><a class=lnlinks href=#hl-36-54>54</a>
</span><span class=lnt id=hl-36-55><a class=lnlinks href=#hl-36-55>55</a>
</span><span class=lnt id=hl-36-56><a class=lnlinks href=#hl-36-56>56</a>
</span><span class=lnt id=hl-36-57><a class=lnlinks href=#hl-36-57>57</a>
</span><span class=lnt id=hl-36-58><a class=lnlinks href=#hl-36-58>58</a>
</span><span class=lnt id=hl-36-59><a class=lnlinks href=#hl-36-59>59</a>
</span><span class=lnt id=hl-36-60><a class=lnlinks href=#hl-36-60>60</a>
</span><span class=lnt id=hl-36-61><a class=lnlinks href=#hl-36-61>61</a>
</span><span class=lnt id=hl-36-62><a class=lnlinks href=#hl-36-62>62</a>
</span><span class=lnt id=hl-36-63><a class=lnlinks href=#hl-36-63>63</a>
</span><span class=lnt id=hl-36-64><a class=lnlinks href=#hl-36-64>64</a>
</span><span class=lnt id=hl-36-65><a class=lnlinks href=#hl-36-65>65</a>
</span><span class=lnt id=hl-36-66><a class=lnlinks href=#hl-36-66>66</a>
</span><span class=lnt id=hl-36-67><a class=lnlinks href=#hl-36-67>67</a>
</span><span class=lnt id=hl-36-68><a class=lnlinks href=#hl-36-68>68</a>
</span><span class=lnt id=hl-36-69><a class=lnlinks href=#hl-36-69>69</a>
</span><span class=lnt id=hl-36-70><a class=lnlinks href=#hl-36-70>70</a>
</span><span class=lnt id=hl-36-71><a class=lnlinks href=#hl-36-71>71</a>
</span><span class=lnt id=hl-36-72><a class=lnlinks href=#hl-36-72>72</a>
</span><span class=lnt id=hl-36-73><a class=lnlinks href=#hl-36-73>73</a>
</span><span class=lnt id=hl-36-74><a class=lnlinks href=#hl-36-74>74</a>
</span><span class=lnt id=hl-36-75><a class=lnlinks href=#hl-36-75>75</a>
</span><span class=lnt id=hl-36-76><a class=lnlinks href=#hl-36-76>76</a>
</span><span class=lnt id=hl-36-77><a class=lnlinks href=#hl-36-77>77</a>
</span><span class=lnt id=hl-36-78><a class=lnlinks href=#hl-36-78>78</a>
</span><span class=lnt id=hl-36-79><a class=lnlinks href=#hl-36-79>79</a>
</span><span class=lnt id=hl-36-80><a class=lnlinks href=#hl-36-80>80</a>
</span><span class=lnt id=hl-36-81><a class=lnlinks href=#hl-36-81>81</a>
</span><span class=lnt id=hl-36-82><a class=lnlinks href=#hl-36-82>82</a>
</span><span class=lnt id=hl-36-83><a class=lnlinks href=#hl-36-83>83</a>
</span><span class=lnt id=hl-36-84><a class=lnlinks href=#hl-36-84>84</a>
</span><span class=lnt id=hl-36-85><a class=lnlinks href=#hl-36-85>85</a>
</span><span class=lnt id=hl-36-86><a class=lnlinks href=#hl-36-86>86</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 복제 네트워크 최적화 모니터링</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>psutil</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Dict</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>NetworkOptimizer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;복제 네트워크 성능 최적화&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>baseline_metrics</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_collect_network_baseline</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_collect_network_baseline</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;네트워크 기준선 메트릭 수집&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>net_io</span> <span class=o>=</span> <span class=n>psutil</span><span class=o>.</span><span class=n>net_io_counters</span><span class=p>(</span><span class=n>pernic</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;bytes_sent&#39;</span><span class=p>:</span> <span class=nb>sum</span><span class=p>(</span><span class=n>stats</span><span class=o>.</span><span class=n>bytes_sent</span> <span class=k>for</span> <span class=n>stats</span> <span class=ow>in</span> <span class=n>net_io</span><span class=o>.</span><span class=n>values</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;bytes_recv&#39;</span><span class=p>:</span> <span class=nb>sum</span><span class=p>(</span><span class=n>stats</span><span class=o>.</span><span class=n>bytes_recv</span> <span class=k>for</span> <span class=n>stats</span> <span class=ow>in</span> <span class=n>net_io</span><span class=o>.</span><span class=n>values</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;packets_sent&#39;</span><span class=p>:</span> <span class=nb>sum</span><span class=p>(</span><span class=n>stats</span><span class=o>.</span><span class=n>packets_sent</span> <span class=k>for</span> <span class=n>stats</span> <span class=ow>in</span> <span class=n>net_io</span><span class=o>.</span><span class=n>values</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;packets_recv&#39;</span><span class=p>:</span> <span class=nb>sum</span><span class=p>(</span><span class=n>stats</span><span class=o>.</span><span class=n>packets_recv</span> <span class=k>for</span> <span class=n>stats</span> <span class=ow>in</span> <span class=n>net_io</span><span class=o>.</span><span class=n>values</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>analyze_network_performance</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>duration_seconds</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>60</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;네트워크 성능 분석&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>start_metrics</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_collect_network_baseline</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>duration_seconds</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>end_metrics</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_collect_network_baseline</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 처리량 계산 (초당)</span>
</span></span><span class=line><span class=cl>        <span class=n>duration</span> <span class=o>=</span> <span class=n>end_metrics</span><span class=p>[</span><span class=s1>&#39;timestamp&#39;</span><span class=p>]</span> <span class=o>-</span> <span class=n>start_metrics</span><span class=p>[</span><span class=s1>&#39;timestamp&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>throughput_analysis</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;duration_seconds&#39;</span><span class=p>:</span> <span class=n>duration</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;bytes_sent_per_sec&#39;</span><span class=p>:</span> <span class=p>(</span><span class=n>end_metrics</span><span class=p>[</span><span class=s1>&#39;bytes_sent&#39;</span><span class=p>]</span> <span class=o>-</span> <span class=n>start_metrics</span><span class=p>[</span><span class=s1>&#39;bytes_sent&#39;</span><span class=p>])</span> <span class=o>/</span> <span class=n>duration</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;bytes_recv_per_sec&#39;</span><span class=p>:</span> <span class=p>(</span><span class=n>end_metrics</span><span class=p>[</span><span class=s1>&#39;bytes_recv&#39;</span><span class=p>]</span> <span class=o>-</span> <span class=n>start_metrics</span><span class=p>[</span><span class=s1>&#39;bytes_recv&#39;</span><span class=p>])</span> <span class=o>/</span> <span class=n>duration</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;total_throughput_mbps&#39;</span><span class=p>:</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=p>(</span><span class=n>end_metrics</span><span class=p>[</span><span class=s1>&#39;bytes_sent&#39;</span><span class=p>]</span> <span class=o>-</span> <span class=n>start_metrics</span><span class=p>[</span><span class=s1>&#39;bytes_sent&#39;</span><span class=p>])</span> <span class=o>+</span> 
</span></span><span class=line><span class=cl>                <span class=p>(</span><span class=n>end_metrics</span><span class=p>[</span><span class=s1>&#39;bytes_recv&#39;</span><span class=p>]</span> <span class=o>-</span> <span class=n>start_metrics</span><span class=p>[</span><span class=s1>&#39;bytes_recv&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span> <span class=o>/</span> <span class=n>duration</span> <span class=o>/</span> <span class=mi>1024</span> <span class=o>/</span> <span class=mi>1024</span> <span class=o>*</span> <span class=mi>8</span><span class=p>,</span>  <span class=c1># Mbps 변환</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;packet_loss_rate&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_estimate_packet_loss</span><span class=p>(</span><span class=n>start_metrics</span><span class=p>,</span> <span class=n>end_metrics</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 최적화 권고사항 생성</span>
</span></span><span class=line><span class=cl>        <span class=n>recommendations</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_generate_network_recommendations</span><span class=p>(</span><span class=n>throughput_analysis</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;performance_metrics&#39;</span><span class=p>:</span> <span class=n>throughput_analysis</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;recommendations&#39;</span><span class=p>:</span> <span class=n>recommendations</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_estimate_packet_loss</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>start</span><span class=p>:</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>end</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>float</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;패킷 손실률 추정 (단순화된 버전)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제로는 더 정교한 방법 사용 (ping, traceroute 등)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mf>0.0</span>  <span class=c1># 모의 값</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_generate_network_recommendations</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>metrics</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;네트워크 최적화 권고사항&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>recommendations</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>metrics</span><span class=p>[</span><span class=s1>&#39;total_throughput_mbps&#39;</span><span class=p>]</span> <span class=o>&lt;</span> <span class=mi>10</span><span class=p>:</span>  <span class=c1># 10Mbps 미만</span>
</span></span><span class=line><span class=cl>            <span class=n>recommendations</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;네트워크 대역폭 확장 검토 필요&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>recommendations</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;복제 압축 활성화 고려&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>metrics</span><span class=p>[</span><span class=s1>&#39;packet_loss_rate&#39;</span><span class=p>]</span> <span class=o>&gt;</span> <span class=mf>0.01</span><span class=p>:</span>  <span class=c1># 1% 이상 패킷 손실</span>
</span></span><span class=line><span class=cl>            <span class=n>recommendations</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;네트워크 품질 개선 필요&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>recommendations</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;복제 재시도 간격 조정 고려&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>recommendations</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>optimize_replication_settings</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>current_lag</span><span class=p>:</span> <span class=nb>float</span><span class=p>,</span> <span class=n>target_lag</span><span class=p>:</span> <span class=nb>float</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;복제 지연 기반 설정 최적화&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>optimizations</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>current_lag</span> <span class=o>&gt;</span> <span class=n>target_lag</span> <span class=o>*</span> <span class=mi>2</span><span class=p>:</span>  <span class=c1># 목표의 2배 이상 지연</span>
</span></span><span class=line><span class=cl>            <span class=n>optimizations</span><span class=p>[</span><span class=s1>&#39;increase_parallel_workers&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=mi>8</span><span class=p>,</span> <span class=n>psutil</span><span class=o>.</span><span class=n>cpu_count</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=n>optimizations</span><span class=p>[</span><span class=s1>&#39;increase_buffer_sizes&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            <span class=n>optimizations</span><span class=p>[</span><span class=s1>&#39;enable_compression&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>current_lag</span> <span class=o>&lt;</span> <span class=n>target_lag</span> <span class=o>*</span> <span class=mf>0.5</span><span class=p>:</span>  <span class=c1># 목표의 절반 미만</span>
</span></span><span class=line><span class=cl>            <span class=n>optimizations</span><span class=p>[</span><span class=s1>&#39;reduce_parallel_workers&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=n>psutil</span><span class=o>.</span><span class=n>cpu_count</span><span class=p>()</span> <span class=o>//</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>optimizations</span><span class=p>[</span><span class=s1>&#39;optimize_for_latency&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;current_lag_seconds&#39;</span><span class=p>:</span> <span class=n>current_lag</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;target_lag_seconds&#39;</span><span class=p>:</span> <span class=n>target_lag</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;recommended_optimizations&#39;</span><span class=p>:</span> <span class=n>optimizations</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ol start=3><li><strong>확장성 전략</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-37-1><a class=lnlinks href=#hl-37-1> 1</a>
</span><span class=lnt id=hl-37-2><a class=lnlinks href=#hl-37-2> 2</a>
</span><span class=lnt id=hl-37-3><a class=lnlinks href=#hl-37-3> 3</a>
</span><span class=lnt id=hl-37-4><a class=lnlinks href=#hl-37-4> 4</a>
</span><span class=lnt id=hl-37-5><a class=lnlinks href=#hl-37-5> 5</a>
</span><span class=lnt id=hl-37-6><a class=lnlinks href=#hl-37-6> 6</a>
</span><span class=lnt id=hl-37-7><a class=lnlinks href=#hl-37-7> 7</a>
</span><span class=lnt id=hl-37-8><a class=lnlinks href=#hl-37-8> 8</a>
</span><span class=lnt id=hl-37-9><a class=lnlinks href=#hl-37-9> 9</a>
</span><span class=lnt id=hl-37-10><a class=lnlinks href=#hl-37-10>10</a>
</span><span class=lnt id=hl-37-11><a class=lnlinks href=#hl-37-11>11</a>
</span><span class=lnt id=hl-37-12><a class=lnlinks href=#hl-37-12>12</a>
</span><span class=lnt id=hl-37-13><a class=lnlinks href=#hl-37-13>13</a>
</span><span class=lnt id=hl-37-14><a class=lnlinks href=#hl-37-14>14</a>
</span><span class=lnt id=hl-37-15><a class=lnlinks href=#hl-37-15>15</a>
</span><span class=lnt id=hl-37-16><a class=lnlinks href=#hl-37-16>16</a>
</span><span class=lnt id=hl-37-17><a class=lnlinks href=#hl-37-17>17</a>
</span><span class=lnt id=hl-37-18><a class=lnlinks href=#hl-37-18>18</a>
</span><span class=lnt id=hl-37-19><a class=lnlinks href=#hl-37-19>19</a>
</span><span class=lnt id=hl-37-20><a class=lnlinks href=#hl-37-20>20</a>
</span><span class=lnt id=hl-37-21><a class=lnlinks href=#hl-37-21>21</a>
</span><span class=lnt id=hl-37-22><a class=lnlinks href=#hl-37-22>22</a>
</span><span class=lnt id=hl-37-23><a class=lnlinks href=#hl-37-23>23</a>
</span><span class=lnt id=hl-37-24><a class=lnlinks href=#hl-37-24>24</a>
</span><span class=lnt id=hl-37-25><a class=lnlinks href=#hl-37-25>25</a>
</span><span class=lnt id=hl-37-26><a class=lnlinks href=#hl-37-26>26</a>
</span><span class=lnt id=hl-37-27><a class=lnlinks href=#hl-37-27>27</a>
</span><span class=lnt id=hl-37-28><a class=lnlinks href=#hl-37-28>28</a>
</span><span class=lnt id=hl-37-29><a class=lnlinks href=#hl-37-29>29</a>
</span><span class=lnt id=hl-37-30><a class=lnlinks href=#hl-37-30>30</a>
</span><span class=lnt id=hl-37-31><a class=lnlinks href=#hl-37-31>31</a>
</span><span class=lnt id=hl-37-32><a class=lnlinks href=#hl-37-32>32</a>
</span><span class=lnt id=hl-37-33><a class=lnlinks href=#hl-37-33>33</a>
</span><span class=lnt id=hl-37-34><a class=lnlinks href=#hl-37-34>34</a>
</span><span class=lnt id=hl-37-35><a class=lnlinks href=#hl-37-35>35</a>
</span><span class=lnt id=hl-37-36><a class=lnlinks href=#hl-37-36>36</a>
</span><span class=lnt id=hl-37-37><a class=lnlinks href=#hl-37-37>37</a>
</span><span class=lnt id=hl-37-38><a class=lnlinks href=#hl-37-38>38</a>
</span><span class=lnt id=hl-37-39><a class=lnlinks href=#hl-37-39>39</a>
</span><span class=lnt id=hl-37-40><a class=lnlinks href=#hl-37-40>40</a>
</span><span class=lnt id=hl-37-41><a class=lnlinks href=#hl-37-41>41</a>
</span><span class=lnt id=hl-37-42><a class=lnlinks href=#hl-37-42>42</a>
</span><span class=lnt id=hl-37-43><a class=lnlinks href=#hl-37-43>43</a>
</span><span class=lnt id=hl-37-44><a class=lnlinks href=#hl-37-44>44</a>
</span><span class=lnt id=hl-37-45><a class=lnlinks href=#hl-37-45>45</a>
</span><span class=lnt id=hl-37-46><a class=lnlinks href=#hl-37-46>46</a>
</span><span class=lnt id=hl-37-47><a class=lnlinks href=#hl-37-47>47</a>
</span><span class=lnt id=hl-37-48><a class=lnlinks href=#hl-37-48>48</a>
</span><span class=lnt id=hl-37-49><a class=lnlinks href=#hl-37-49>49</a>
</span><span class=lnt id=hl-37-50><a class=lnlinks href=#hl-37-50>50</a>
</span><span class=lnt id=hl-37-51><a class=lnlinks href=#hl-37-51>51</a>
</span><span class=lnt id=hl-37-52><a class=lnlinks href=#hl-37-52>52</a>
</span><span class=lnt id=hl-37-53><a class=lnlinks href=#hl-37-53>53</a>
</span><span class=lnt id=hl-37-54><a class=lnlinks href=#hl-37-54>54</a>
</span><span class=lnt id=hl-37-55><a class=lnlinks href=#hl-37-55>55</a>
</span><span class=lnt id=hl-37-56><a class=lnlinks href=#hl-37-56>56</a>
</span><span class=lnt id=hl-37-57><a class=lnlinks href=#hl-37-57>57</a>
</span><span class=lnt id=hl-37-58><a class=lnlinks href=#hl-37-58>58</a>
</span><span class=lnt id=hl-37-59><a class=lnlinks href=#hl-37-59>59</a>
</span><span class=lnt id=hl-37-60><a class=lnlinks href=#hl-37-60>60</a>
</span><span class=lnt id=hl-37-61><a class=lnlinks href=#hl-37-61>61</a>
</span><span class=lnt id=hl-37-62><a class=lnlinks href=#hl-37-62>62</a>
</span><span class=lnt id=hl-37-63><a class=lnlinks href=#hl-37-63>63</a>
</span><span class=lnt id=hl-37-64><a class=lnlinks href=#hl-37-64>64</a>
</span><span class=lnt id=hl-37-65><a class=lnlinks href=#hl-37-65>65</a>
</span><span class=lnt id=hl-37-66><a class=lnlinks href=#hl-37-66>66</a>
</span><span class=lnt id=hl-37-67><a class=lnlinks href=#hl-37-67>67</a>
</span><span class=lnt id=hl-37-68><a class=lnlinks href=#hl-37-68>68</a>
</span><span class=lnt id=hl-37-69><a class=lnlinks href=#hl-37-69>69</a>
</span><span class=lnt id=hl-37-70><a class=lnlinks href=#hl-37-70>70</a>
</span><span class=lnt id=hl-37-71><a class=lnlinks href=#hl-37-71>71</a>
</span><span class=lnt id=hl-37-72><a class=lnlinks href=#hl-37-72>72</a>
</span><span class=lnt id=hl-37-73><a class=lnlinks href=#hl-37-73>73</a>
</span><span class=lnt id=hl-37-74><a class=lnlinks href=#hl-37-74>74</a>
</span><span class=lnt id=hl-37-75><a class=lnlinks href=#hl-37-75>75</a>
</span><span class=lnt id=hl-37-76><a class=lnlinks href=#hl-37-76>76</a>
</span><span class=lnt id=hl-37-77><a class=lnlinks href=#hl-37-77>77</a>
</span><span class=lnt id=hl-37-78><a class=lnlinks href=#hl-37-78>78</a>
</span><span class=lnt id=hl-37-79><a class=lnlinks href=#hl-37-79>79</a>
</span><span class=lnt id=hl-37-80><a class=lnlinks href=#hl-37-80>80</a>
</span><span class=lnt id=hl-37-81><a class=lnlinks href=#hl-37-81>81</a>
</span><span class=lnt id=hl-37-82><a class=lnlinks href=#hl-37-82>82</a>
</span><span class=lnt id=hl-37-83><a class=lnlinks href=#hl-37-83>83</a>
</span><span class=lnt id=hl-37-84><a class=lnlinks href=#hl-37-84>84</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 동적 복제 스케일링 시스템</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ReplicationScaler</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;복제 시스템 자동 확장&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>config</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>config</span> <span class=o>=</span> <span class=n>config</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>scaling_policies</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;scale_out_threshold&#39;</span><span class=p>:</span> <span class=mf>0.8</span><span class=p>,</span>    <span class=c1># CPU/메모리 80% 이상</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;scale_in_threshold&#39;</span><span class=p>:</span> <span class=mf>0.3</span><span class=p>,</span>     <span class=c1># CPU/메모리 30% 이하</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;min_replicas&#39;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;max_replicas&#39;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;cooldown_period&#39;</span><span class=p>:</span> <span class=mi>300</span>         <span class=c1># 5분 쿨다운</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>last_scaling_time</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>evaluate_scaling_need</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;확장 필요성 평가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>current_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 쿨다운 기간 체크</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>current_time</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>last_scaling_time</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>scaling_policies</span><span class=p>[</span><span class=s1>&#39;cooldown_period&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;action&#39;</span><span class=p>:</span> <span class=s1>&#39;wait&#39;</span><span class=p>,</span> <span class=s1>&#39;reason&#39;</span><span class=p>:</span> <span class=s1>&#39;cooldown period active&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 현재 복제본 상태 확인</span>
</span></span><span class=line><span class=cl>        <span class=n>current_replicas</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_count_healthy_replicas</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>avg_resource_usage</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_average_resource_usage</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 확장 결정 로직</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>avg_resource_usage</span><span class=p>[</span><span class=s1>&#39;cpu&#39;</span><span class=p>]</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>scaling_policies</span><span class=p>[</span><span class=s1>&#39;scale_out_threshold&#39;</span><span class=p>]</span> <span class=ow>or</span> 
</span></span><span class=line><span class=cl>            <span class=n>avg_resource_usage</span><span class=p>[</span><span class=s1>&#39;memory&#39;</span><span class=p>]</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>scaling_policies</span><span class=p>[</span><span class=s1>&#39;scale_out_threshold&#39;</span><span class=p>]):</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>current_replicas</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>scaling_policies</span><span class=p>[</span><span class=s1>&#39;max_replicas&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;action&#39;</span><span class=p>:</span> <span class=s1>&#39;scale_out&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;current_replicas&#39;</span><span class=p>:</span> <span class=n>current_replicas</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;target_replicas&#39;</span><span class=p>:</span> <span class=n>current_replicas</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;reason&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&#34;High resource usage: CPU </span><span class=si>{</span><span class=n>avg_resource_usage</span><span class=p>[</span><span class=s1>&#39;cpu&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>.1%</span><span class=si>}</span><span class=s2>, Memory </span><span class=si>{</span><span class=n>avg_resource_usage</span><span class=p>[</span><span class=s1>&#39;memory&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>.1%</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=p>(</span><span class=n>avg_resource_usage</span><span class=p>[</span><span class=s1>&#39;cpu&#39;</span><span class=p>]</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>scaling_policies</span><span class=p>[</span><span class=s1>&#39;scale_in_threshold&#39;</span><span class=p>]</span> <span class=ow>and</span>
</span></span><span class=line><span class=cl>              <span class=n>avg_resource_usage</span><span class=p>[</span><span class=s1>&#39;memory&#39;</span><span class=p>]</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>scaling_policies</span><span class=p>[</span><span class=s1>&#39;scale_in_threshold&#39;</span><span class=p>]):</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>current_replicas</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>scaling_policies</span><span class=p>[</span><span class=s1>&#39;min_replicas&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;action&#39;</span><span class=p>:</span> <span class=s1>&#39;scale_in&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;current_replicas&#39;</span><span class=p>:</span> <span class=n>current_replicas</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;target_replicas&#39;</span><span class=p>:</span> <span class=n>current_replicas</span> <span class=o>-</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s1>&#39;reason&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&#34;Low resource usage: CPU </span><span class=si>{</span><span class=n>avg_resource_usage</span><span class=p>[</span><span class=s1>&#39;cpu&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>.1%</span><span class=si>}</span><span class=s2>, Memory </span><span class=si>{</span><span class=n>avg_resource_usage</span><span class=p>[</span><span class=s1>&#39;memory&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>.1%</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;action&#39;</span><span class=p>:</span> <span class=s1>&#39;maintain&#39;</span><span class=p>,</span> <span class=s1>&#39;current_replicas&#39;</span><span class=p>:</span> <span class=n>current_replicas</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>execute_scaling</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>scaling_decision</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;확장 실행&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>scaling_decision</span><span class=p>[</span><span class=s1>&#39;action&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;scale_out&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_add_replica</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>scaling_decision</span><span class=p>[</span><span class=s1>&#39;action&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;scale_in&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_remove_replica</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_count_healthy_replicas</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;건강한 복제본 수 계산&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제로는 복제본 상태 체크 구현</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>3</span>  <span class=c1># 모의 값</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_get_average_resource_usage</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;평균 리소스 사용률 계산&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제로는 모든 복제본의 리소스 사용률 수집</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;cpu&#39;</span><span class=p>:</span> <span class=n>psutil</span><span class=o>.</span><span class=n>cpu_percent</span><span class=p>(</span><span class=n>interval</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span> <span class=o>/</span> <span class=mi>100</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;memory&#39;</span><span class=p>:</span> <span class=n>psutil</span><span class=o>.</span><span class=n>virtual_memory</span><span class=p>()</span><span class=o>.</span><span class=n>percent</span> <span class=o>/</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_add_replica</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;새 복제본 추가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제로는 Docker/Kubernetes API 호출</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;🚀 새 복제본 추가 중...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_remove_replica</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;복제본 제거&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제로는 가장 부하가 적은 복제본 선택하여 제거</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;🔄 복제본 제거 중...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>True</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=64-트러블슈팅-및-문제-해결-1>6.4 트러블슈팅 및 문제 해결<a hidden class=anchor aria-hidden=true href=#64-트러블슈팅-및-문제-해결-1>#</a></h4><p>복제 시스템에서 발생하는 일반적인 문제들과 체계적인 해결 방법을 다룹니다.</p><p><strong>주요 문제 유형 및 해결 방안:</strong></p><ol><li><strong>복제 중단 문제</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-38-1><a class=lnlinks href=#hl-38-1>  1</a>
</span><span class=lnt id=hl-38-2><a class=lnlinks href=#hl-38-2>  2</a>
</span><span class=lnt id=hl-38-3><a class=lnlinks href=#hl-38-3>  3</a>
</span><span class=lnt id=hl-38-4><a class=lnlinks href=#hl-38-4>  4</a>
</span><span class=lnt id=hl-38-5><a class=lnlinks href=#hl-38-5>  5</a>
</span><span class=lnt id=hl-38-6><a class=lnlinks href=#hl-38-6>  6</a>
</span><span class=lnt id=hl-38-7><a class=lnlinks href=#hl-38-7>  7</a>
</span><span class=lnt id=hl-38-8><a class=lnlinks href=#hl-38-8>  8</a>
</span><span class=lnt id=hl-38-9><a class=lnlinks href=#hl-38-9>  9</a>
</span><span class=lnt id=hl-38-10><a class=lnlinks href=#hl-38-10> 10</a>
</span><span class=lnt id=hl-38-11><a class=lnlinks href=#hl-38-11> 11</a>
</span><span class=lnt id=hl-38-12><a class=lnlinks href=#hl-38-12> 12</a>
</span><span class=lnt id=hl-38-13><a class=lnlinks href=#hl-38-13> 13</a>
</span><span class=lnt id=hl-38-14><a class=lnlinks href=#hl-38-14> 14</a>
</span><span class=lnt id=hl-38-15><a class=lnlinks href=#hl-38-15> 15</a>
</span><span class=lnt id=hl-38-16><a class=lnlinks href=#hl-38-16> 16</a>
</span><span class=lnt id=hl-38-17><a class=lnlinks href=#hl-38-17> 17</a>
</span><span class=lnt id=hl-38-18><a class=lnlinks href=#hl-38-18> 18</a>
</span><span class=lnt id=hl-38-19><a class=lnlinks href=#hl-38-19> 19</a>
</span><span class=lnt id=hl-38-20><a class=lnlinks href=#hl-38-20> 20</a>
</span><span class=lnt id=hl-38-21><a class=lnlinks href=#hl-38-21> 21</a>
</span><span class=lnt id=hl-38-22><a class=lnlinks href=#hl-38-22> 22</a>
</span><span class=lnt id=hl-38-23><a class=lnlinks href=#hl-38-23> 23</a>
</span><span class=lnt id=hl-38-24><a class=lnlinks href=#hl-38-24> 24</a>
</span><span class=lnt id=hl-38-25><a class=lnlinks href=#hl-38-25> 25</a>
</span><span class=lnt id=hl-38-26><a class=lnlinks href=#hl-38-26> 26</a>
</span><span class=lnt id=hl-38-27><a class=lnlinks href=#hl-38-27> 27</a>
</span><span class=lnt id=hl-38-28><a class=lnlinks href=#hl-38-28> 28</a>
</span><span class=lnt id=hl-38-29><a class=lnlinks href=#hl-38-29> 29</a>
</span><span class=lnt id=hl-38-30><a class=lnlinks href=#hl-38-30> 30</a>
</span><span class=lnt id=hl-38-31><a class=lnlinks href=#hl-38-31> 31</a>
</span><span class=lnt id=hl-38-32><a class=lnlinks href=#hl-38-32> 32</a>
</span><span class=lnt id=hl-38-33><a class=lnlinks href=#hl-38-33> 33</a>
</span><span class=lnt id=hl-38-34><a class=lnlinks href=#hl-38-34> 34</a>
</span><span class=lnt id=hl-38-35><a class=lnlinks href=#hl-38-35> 35</a>
</span><span class=lnt id=hl-38-36><a class=lnlinks href=#hl-38-36> 36</a>
</span><span class=lnt id=hl-38-37><a class=lnlinks href=#hl-38-37> 37</a>
</span><span class=lnt id=hl-38-38><a class=lnlinks href=#hl-38-38> 38</a>
</span><span class=lnt id=hl-38-39><a class=lnlinks href=#hl-38-39> 39</a>
</span><span class=lnt id=hl-38-40><a class=lnlinks href=#hl-38-40> 40</a>
</span><span class=lnt id=hl-38-41><a class=lnlinks href=#hl-38-41> 41</a>
</span><span class=lnt id=hl-38-42><a class=lnlinks href=#hl-38-42> 42</a>
</span><span class=lnt id=hl-38-43><a class=lnlinks href=#hl-38-43> 43</a>
</span><span class=lnt id=hl-38-44><a class=lnlinks href=#hl-38-44> 44</a>
</span><span class=lnt id=hl-38-45><a class=lnlinks href=#hl-38-45> 45</a>
</span><span class=lnt id=hl-38-46><a class=lnlinks href=#hl-38-46> 46</a>
</span><span class=lnt id=hl-38-47><a class=lnlinks href=#hl-38-47> 47</a>
</span><span class=lnt id=hl-38-48><a class=lnlinks href=#hl-38-48> 48</a>
</span><span class=lnt id=hl-38-49><a class=lnlinks href=#hl-38-49> 49</a>
</span><span class=lnt id=hl-38-50><a class=lnlinks href=#hl-38-50> 50</a>
</span><span class=lnt id=hl-38-51><a class=lnlinks href=#hl-38-51> 51</a>
</span><span class=lnt id=hl-38-52><a class=lnlinks href=#hl-38-52> 52</a>
</span><span class=lnt id=hl-38-53><a class=lnlinks href=#hl-38-53> 53</a>
</span><span class=lnt id=hl-38-54><a class=lnlinks href=#hl-38-54> 54</a>
</span><span class=lnt id=hl-38-55><a class=lnlinks href=#hl-38-55> 55</a>
</span><span class=lnt id=hl-38-56><a class=lnlinks href=#hl-38-56> 56</a>
</span><span class=lnt id=hl-38-57><a class=lnlinks href=#hl-38-57> 57</a>
</span><span class=lnt id=hl-38-58><a class=lnlinks href=#hl-38-58> 58</a>
</span><span class=lnt id=hl-38-59><a class=lnlinks href=#hl-38-59> 59</a>
</span><span class=lnt id=hl-38-60><a class=lnlinks href=#hl-38-60> 60</a>
</span><span class=lnt id=hl-38-61><a class=lnlinks href=#hl-38-61> 61</a>
</span><span class=lnt id=hl-38-62><a class=lnlinks href=#hl-38-62> 62</a>
</span><span class=lnt id=hl-38-63><a class=lnlinks href=#hl-38-63> 63</a>
</span><span class=lnt id=hl-38-64><a class=lnlinks href=#hl-38-64> 64</a>
</span><span class=lnt id=hl-38-65><a class=lnlinks href=#hl-38-65> 65</a>
</span><span class=lnt id=hl-38-66><a class=lnlinks href=#hl-38-66> 66</a>
</span><span class=lnt id=hl-38-67><a class=lnlinks href=#hl-38-67> 67</a>
</span><span class=lnt id=hl-38-68><a class=lnlinks href=#hl-38-68> 68</a>
</span><span class=lnt id=hl-38-69><a class=lnlinks href=#hl-38-69> 69</a>
</span><span class=lnt id=hl-38-70><a class=lnlinks href=#hl-38-70> 70</a>
</span><span class=lnt id=hl-38-71><a class=lnlinks href=#hl-38-71> 71</a>
</span><span class=lnt id=hl-38-72><a class=lnlinks href=#hl-38-72> 72</a>
</span><span class=lnt id=hl-38-73><a class=lnlinks href=#hl-38-73> 73</a>
</span><span class=lnt id=hl-38-74><a class=lnlinks href=#hl-38-74> 74</a>
</span><span class=lnt id=hl-38-75><a class=lnlinks href=#hl-38-75> 75</a>
</span><span class=lnt id=hl-38-76><a class=lnlinks href=#hl-38-76> 76</a>
</span><span class=lnt id=hl-38-77><a class=lnlinks href=#hl-38-77> 77</a>
</span><span class=lnt id=hl-38-78><a class=lnlinks href=#hl-38-78> 78</a>
</span><span class=lnt id=hl-38-79><a class=lnlinks href=#hl-38-79> 79</a>
</span><span class=lnt id=hl-38-80><a class=lnlinks href=#hl-38-80> 80</a>
</span><span class=lnt id=hl-38-81><a class=lnlinks href=#hl-38-81> 81</a>
</span><span class=lnt id=hl-38-82><a class=lnlinks href=#hl-38-82> 82</a>
</span><span class=lnt id=hl-38-83><a class=lnlinks href=#hl-38-83> 83</a>
</span><span class=lnt id=hl-38-84><a class=lnlinks href=#hl-38-84> 84</a>
</span><span class=lnt id=hl-38-85><a class=lnlinks href=#hl-38-85> 85</a>
</span><span class=lnt id=hl-38-86><a class=lnlinks href=#hl-38-86> 86</a>
</span><span class=lnt id=hl-38-87><a class=lnlinks href=#hl-38-87> 87</a>
</span><span class=lnt id=hl-38-88><a class=lnlinks href=#hl-38-88> 88</a>
</span><span class=lnt id=hl-38-89><a class=lnlinks href=#hl-38-89> 89</a>
</span><span class=lnt id=hl-38-90><a class=lnlinks href=#hl-38-90> 90</a>
</span><span class=lnt id=hl-38-91><a class=lnlinks href=#hl-38-91> 91</a>
</span><span class=lnt id=hl-38-92><a class=lnlinks href=#hl-38-92> 92</a>
</span><span class=lnt id=hl-38-93><a class=lnlinks href=#hl-38-93> 93</a>
</span><span class=lnt id=hl-38-94><a class=lnlinks href=#hl-38-94> 94</a>
</span><span class=lnt id=hl-38-95><a class=lnlinks href=#hl-38-95> 95</a>
</span><span class=lnt id=hl-38-96><a class=lnlinks href=#hl-38-96> 96</a>
</span><span class=lnt id=hl-38-97><a class=lnlinks href=#hl-38-97> 97</a>
</span><span class=lnt id=hl-38-98><a class=lnlinks href=#hl-38-98> 98</a>
</span><span class=lnt id=hl-38-99><a class=lnlinks href=#hl-38-99> 99</a>
</span><span class=lnt id=hl-38-100><a class=lnlinks href=#hl-38-100>100</a>
</span><span class=lnt id=hl-38-101><a class=lnlinks href=#hl-38-101>101</a>
</span><span class=lnt id=hl-38-102><a class=lnlinks href=#hl-38-102>102</a>
</span><span class=lnt id=hl-38-103><a class=lnlinks href=#hl-38-103>103</a>
</span><span class=lnt id=hl-38-104><a class=lnlinks href=#hl-38-104>104</a>
</span><span class=lnt id=hl-38-105><a class=lnlinks href=#hl-38-105>105</a>
</span><span class=lnt id=hl-38-106><a class=lnlinks href=#hl-38-106>106</a>
</span><span class=lnt id=hl-38-107><a class=lnlinks href=#hl-38-107>107</a>
</span><span class=lnt id=hl-38-108><a class=lnlinks href=#hl-38-108>108</a>
</span><span class=lnt id=hl-38-109><a class=lnlinks href=#hl-38-109>109</a>
</span><span class=lnt id=hl-38-110><a class=lnlinks href=#hl-38-110>110</a>
</span><span class=lnt id=hl-38-111><a class=lnlinks href=#hl-38-111>111</a>
</span><span class=lnt id=hl-38-112><a class=lnlinks href=#hl-38-112>112</a>
</span><span class=lnt id=hl-38-113><a class=lnlinks href=#hl-38-113>113</a>
</span><span class=lnt id=hl-38-114><a class=lnlinks href=#hl-38-114>114</a>
</span><span class=lnt id=hl-38-115><a class=lnlinks href=#hl-38-115>115</a>
</span><span class=lnt id=hl-38-116><a class=lnlinks href=#hl-38-116>116</a>
</span><span class=lnt id=hl-38-117><a class=lnlinks href=#hl-38-117>117</a>
</span><span class=lnt id=hl-38-118><a class=lnlinks href=#hl-38-118>118</a>
</span><span class=lnt id=hl-38-119><a class=lnlinks href=#hl-38-119>119</a>
</span><span class=lnt id=hl-38-120><a class=lnlinks href=#hl-38-120>120</a>
</span><span class=lnt id=hl-38-121><a class=lnlinks href=#hl-38-121>121</a>
</span><span class=lnt id=hl-38-122><a class=lnlinks href=#hl-38-122>122</a>
</span><span class=lnt id=hl-38-123><a class=lnlinks href=#hl-38-123>123</a>
</span><span class=lnt id=hl-38-124><a class=lnlinks href=#hl-38-124>124</a>
</span><span class=lnt id=hl-38-125><a class=lnlinks href=#hl-38-125>125</a>
</span><span class=lnt id=hl-38-126><a class=lnlinks href=#hl-38-126>126</a>
</span><span class=lnt id=hl-38-127><a class=lnlinks href=#hl-38-127>127</a>
</span><span class=lnt id=hl-38-128><a class=lnlinks href=#hl-38-128>128</a>
</span><span class=lnt id=hl-38-129><a class=lnlinks href=#hl-38-129>129</a>
</span><span class=lnt id=hl-38-130><a class=lnlinks href=#hl-38-130>130</a>
</span><span class=lnt id=hl-38-131><a class=lnlinks href=#hl-38-131>131</a>
</span><span class=lnt id=hl-38-132><a class=lnlinks href=#hl-38-132>132</a>
</span><span class=lnt id=hl-38-133><a class=lnlinks href=#hl-38-133>133</a>
</span><span class=lnt id=hl-38-134><a class=lnlinks href=#hl-38-134>134</a>
</span><span class=lnt id=hl-38-135><a class=lnlinks href=#hl-38-135>135</a>
</span><span class=lnt id=hl-38-136><a class=lnlinks href=#hl-38-136>136</a>
</span><span class=lnt id=hl-38-137><a class=lnlinks href=#hl-38-137>137</a>
</span><span class=lnt id=hl-38-138><a class=lnlinks href=#hl-38-138>138</a>
</span><span class=lnt id=hl-38-139><a class=lnlinks href=#hl-38-139>139</a>
</span><span class=lnt id=hl-38-140><a class=lnlinks href=#hl-38-140>140</a>
</span><span class=lnt id=hl-38-141><a class=lnlinks href=#hl-38-141>141</a>
</span><span class=lnt id=hl-38-142><a class=lnlinks href=#hl-38-142>142</a>
</span><span class=lnt id=hl-38-143><a class=lnlinks href=#hl-38-143>143</a>
</span><span class=lnt id=hl-38-144><a class=lnlinks href=#hl-38-144>144</a>
</span><span class=lnt id=hl-38-145><a class=lnlinks href=#hl-38-145>145</a>
</span><span class=lnt id=hl-38-146><a class=lnlinks href=#hl-38-146>146</a>
</span><span class=lnt id=hl-38-147><a class=lnlinks href=#hl-38-147>147</a>
</span><span class=lnt id=hl-38-148><a class=lnlinks href=#hl-38-148>148</a>
</span><span class=lnt id=hl-38-149><a class=lnlinks href=#hl-38-149>149</a>
</span><span class=lnt id=hl-38-150><a class=lnlinks href=#hl-38-150>150</a>
</span><span class=lnt id=hl-38-151><a class=lnlinks href=#hl-38-151>151</a>
</span><span class=lnt id=hl-38-152><a class=lnlinks href=#hl-38-152>152</a>
</span><span class=lnt id=hl-38-153><a class=lnlinks href=#hl-38-153>153</a>
</span><span class=lnt id=hl-38-154><a class=lnlinks href=#hl-38-154>154</a>
</span><span class=lnt id=hl-38-155><a class=lnlinks href=#hl-38-155>155</a>
</span><span class=lnt id=hl-38-156><a class=lnlinks href=#hl-38-156>156</a>
</span><span class=lnt id=hl-38-157><a class=lnlinks href=#hl-38-157>157</a>
</span><span class=lnt id=hl-38-158><a class=lnlinks href=#hl-38-158>158</a>
</span><span class=lnt id=hl-38-159><a class=lnlinks href=#hl-38-159>159</a>
</span><span class=lnt id=hl-38-160><a class=lnlinks href=#hl-38-160>160</a>
</span><span class=lnt id=hl-38-161><a class=lnlinks href=#hl-38-161>161</a>
</span><span class=lnt id=hl-38-162><a class=lnlinks href=#hl-38-162>162</a>
</span><span class=lnt id=hl-38-163><a class=lnlinks href=#hl-38-163>163</a>
</span><span class=lnt id=hl-38-164><a class=lnlinks href=#hl-38-164>164</a>
</span><span class=lnt id=hl-38-165><a class=lnlinks href=#hl-38-165>165</a>
</span><span class=lnt id=hl-38-166><a class=lnlinks href=#hl-38-166>166</a>
</span><span class=lnt id=hl-38-167><a class=lnlinks href=#hl-38-167>167</a>
</span><span class=lnt id=hl-38-168><a class=lnlinks href=#hl-38-168>168</a>
</span><span class=lnt id=hl-38-169><a class=lnlinks href=#hl-38-169>169</a>
</span><span class=lnt id=hl-38-170><a class=lnlinks href=#hl-38-170>170</a>
</span><span class=lnt id=hl-38-171><a class=lnlinks href=#hl-38-171>171</a>
</span><span class=lnt id=hl-38-172><a class=lnlinks href=#hl-38-172>172</a>
</span><span class=lnt id=hl-38-173><a class=lnlinks href=#hl-38-173>173</a>
</span><span class=lnt id=hl-38-174><a class=lnlinks href=#hl-38-174>174</a>
</span><span class=lnt id=hl-38-175><a class=lnlinks href=#hl-38-175>175</a>
</span><span class=lnt id=hl-38-176><a class=lnlinks href=#hl-38-176>176</a>
</span><span class=lnt id=hl-38-177><a class=lnlinks href=#hl-38-177>177</a>
</span><span class=lnt id=hl-38-178><a class=lnlinks href=#hl-38-178>178</a>
</span><span class=lnt id=hl-38-179><a class=lnlinks href=#hl-38-179>179</a>
</span><span class=lnt id=hl-38-180><a class=lnlinks href=#hl-38-180>180</a>
</span><span class=lnt id=hl-38-181><a class=lnlinks href=#hl-38-181>181</a>
</span><span class=lnt id=hl-38-182><a class=lnlinks href=#hl-38-182>182</a>
</span><span class=lnt id=hl-38-183><a class=lnlinks href=#hl-38-183>183</a>
</span><span class=lnt id=hl-38-184><a class=lnlinks href=#hl-38-184>184</a>
</span><span class=lnt id=hl-38-185><a class=lnlinks href=#hl-38-185>185</a>
</span><span class=lnt id=hl-38-186><a class=lnlinks href=#hl-38-186>186</a>
</span><span class=lnt id=hl-38-187><a class=lnlinks href=#hl-38-187>187</a>
</span><span class=lnt id=hl-38-188><a class=lnlinks href=#hl-38-188>188</a>
</span><span class=lnt id=hl-38-189><a class=lnlinks href=#hl-38-189>189</a>
</span><span class=lnt id=hl-38-190><a class=lnlinks href=#hl-38-190>190</a>
</span><span class=lnt id=hl-38-191><a class=lnlinks href=#hl-38-191>191</a>
</span><span class=lnt id=hl-38-192><a class=lnlinks href=#hl-38-192>192</a>
</span><span class=lnt id=hl-38-193><a class=lnlinks href=#hl-38-193>193</a>
</span><span class=lnt id=hl-38-194><a class=lnlinks href=#hl-38-194>194</a>
</span><span class=lnt id=hl-38-195><a class=lnlinks href=#hl-38-195>195</a>
</span><span class=lnt id=hl-38-196><a class=lnlinks href=#hl-38-196>196</a>
</span><span class=lnt id=hl-38-197><a class=lnlinks href=#hl-38-197>197</a>
</span><span class=lnt id=hl-38-198><a class=lnlinks href=#hl-38-198>198</a>
</span><span class=lnt id=hl-38-199><a class=lnlinks href=#hl-38-199>199</a>
</span><span class=lnt id=hl-38-200><a class=lnlinks href=#hl-38-200>200</a>
</span><span class=lnt id=hl-38-201><a class=lnlinks href=#hl-38-201>201</a>
</span><span class=lnt id=hl-38-202><a class=lnlinks href=#hl-38-202>202</a>
</span><span class=lnt id=hl-38-203><a class=lnlinks href=#hl-38-203>203</a>
</span><span class=lnt id=hl-38-204><a class=lnlinks href=#hl-38-204>204</a>
</span><span class=lnt id=hl-38-205><a class=lnlinks href=#hl-38-205>205</a>
</span><span class=lnt id=hl-38-206><a class=lnlinks href=#hl-38-206>206</a>
</span><span class=lnt id=hl-38-207><a class=lnlinks href=#hl-38-207>207</a>
</span><span class=lnt id=hl-38-208><a class=lnlinks href=#hl-38-208>208</a>
</span><span class=lnt id=hl-38-209><a class=lnlinks href=#hl-38-209>209</a>
</span><span class=lnt id=hl-38-210><a class=lnlinks href=#hl-38-210>210</a>
</span><span class=lnt id=hl-38-211><a class=lnlinks href=#hl-38-211>211</a>
</span><span class=lnt id=hl-38-212><a class=lnlinks href=#hl-38-212>212</a>
</span><span class=lnt id=hl-38-213><a class=lnlinks href=#hl-38-213>213</a>
</span><span class=lnt id=hl-38-214><a class=lnlinks href=#hl-38-214>214</a>
</span><span class=lnt id=hl-38-215><a class=lnlinks href=#hl-38-215>215</a>
</span><span class=lnt id=hl-38-216><a class=lnlinks href=#hl-38-216>216</a>
</span><span class=lnt id=hl-38-217><a class=lnlinks href=#hl-38-217>217</a>
</span><span class=lnt id=hl-38-218><a class=lnlinks href=#hl-38-218>218</a>
</span><span class=lnt id=hl-38-219><a class=lnlinks href=#hl-38-219>219</a>
</span><span class=lnt id=hl-38-220><a class=lnlinks href=#hl-38-220>220</a>
</span><span class=lnt id=hl-38-221><a class=lnlinks href=#hl-38-221>221</a>
</span><span class=lnt id=hl-38-222><a class=lnlinks href=#hl-38-222>222</a>
</span><span class=lnt id=hl-38-223><a class=lnlinks href=#hl-38-223>223</a>
</span><span class=lnt id=hl-38-224><a class=lnlinks href=#hl-38-224>224</a>
</span><span class=lnt id=hl-38-225><a class=lnlinks href=#hl-38-225>225</a>
</span><span class=lnt id=hl-38-226><a class=lnlinks href=#hl-38-226>226</a>
</span><span class=lnt id=hl-38-227><a class=lnlinks href=#hl-38-227>227</a>
</span><span class=lnt id=hl-38-228><a class=lnlinks href=#hl-38-228>228</a>
</span><span class=lnt id=hl-38-229><a class=lnlinks href=#hl-38-229>229</a>
</span><span class=lnt id=hl-38-230><a class=lnlinks href=#hl-38-230>230</a>
</span><span class=lnt id=hl-38-231><a class=lnlinks href=#hl-38-231>231</a>
</span><span class=lnt id=hl-38-232><a class=lnlinks href=#hl-38-232>232</a>
</span><span class=lnt id=hl-38-233><a class=lnlinks href=#hl-38-233>233</a>
</span><span class=lnt id=hl-38-234><a class=lnlinks href=#hl-38-234>234</a>
</span><span class=lnt id=hl-38-235><a class=lnlinks href=#hl-38-235>235</a>
</span><span class=lnt id=hl-38-236><a class=lnlinks href=#hl-38-236>236</a>
</span><span class=lnt id=hl-38-237><a class=lnlinks href=#hl-38-237>237</a>
</span><span class=lnt id=hl-38-238><a class=lnlinks href=#hl-38-238>238</a>
</span><span class=lnt id=hl-38-239><a class=lnlinks href=#hl-38-239>239</a>
</span><span class=lnt id=hl-38-240><a class=lnlinks href=#hl-38-240>240</a>
</span><span class=lnt id=hl-38-241><a class=lnlinks href=#hl-38-241>241</a>
</span><span class=lnt id=hl-38-242><a class=lnlinks href=#hl-38-242>242</a>
</span><span class=lnt id=hl-38-243><a class=lnlinks href=#hl-38-243>243</a>
</span><span class=lnt id=hl-38-244><a class=lnlinks href=#hl-38-244>244</a>
</span><span class=lnt id=hl-38-245><a class=lnlinks href=#hl-38-245>245</a>
</span><span class=lnt id=hl-38-246><a class=lnlinks href=#hl-38-246>246</a>
</span><span class=lnt id=hl-38-247><a class=lnlinks href=#hl-38-247>247</a>
</span><span class=lnt id=hl-38-248><a class=lnlinks href=#hl-38-248>248</a>
</span><span class=lnt id=hl-38-249><a class=lnlinks href=#hl-38-249>249</a>
</span><span class=lnt id=hl-38-250><a class=lnlinks href=#hl-38-250>250</a>
</span><span class=lnt id=hl-38-251><a class=lnlinks href=#hl-38-251>251</a>
</span><span class=lnt id=hl-38-252><a class=lnlinks href=#hl-38-252>252</a>
</span><span class=lnt id=hl-38-253><a class=lnlinks href=#hl-38-253>253</a>
</span><span class=lnt id=hl-38-254><a class=lnlinks href=#hl-38-254>254</a>
</span><span class=lnt id=hl-38-255><a class=lnlinks href=#hl-38-255>255</a>
</span><span class=lnt id=hl-38-256><a class=lnlinks href=#hl-38-256>256</a>
</span><span class=lnt id=hl-38-257><a class=lnlinks href=#hl-38-257>257</a>
</span><span class=lnt id=hl-38-258><a class=lnlinks href=#hl-38-258>258</a>
</span><span class=lnt id=hl-38-259><a class=lnlinks href=#hl-38-259>259</a>
</span><span class=lnt id=hl-38-260><a class=lnlinks href=#hl-38-260>260</a>
</span><span class=lnt id=hl-38-261><a class=lnlinks href=#hl-38-261>261</a>
</span><span class=lnt id=hl-38-262><a class=lnlinks href=#hl-38-262>262</a>
</span><span class=lnt id=hl-38-263><a class=lnlinks href=#hl-38-263>263</a>
</span><span class=lnt id=hl-38-264><a class=lnlinks href=#hl-38-264>264</a>
</span><span class=lnt id=hl-38-265><a class=lnlinks href=#hl-38-265>265</a>
</span><span class=lnt id=hl-38-266><a class=lnlinks href=#hl-38-266>266</a>
</span><span class=lnt id=hl-38-267><a class=lnlinks href=#hl-38-267>267</a>
</span><span class=lnt id=hl-38-268><a class=lnlinks href=#hl-38-268>268</a>
</span><span class=lnt id=hl-38-269><a class=lnlinks href=#hl-38-269>269</a>
</span><span class=lnt id=hl-38-270><a class=lnlinks href=#hl-38-270>270</a>
</span><span class=lnt id=hl-38-271><a class=lnlinks href=#hl-38-271>271</a>
</span><span class=lnt id=hl-38-272><a class=lnlinks href=#hl-38-272>272</a>
</span><span class=lnt id=hl-38-273><a class=lnlinks href=#hl-38-273>273</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 복제 문제 진단 및 자동 복구 시스템</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ReplicationTroubleshooter</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;복제 문제 진단 및 해결&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>db_config</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>db_config</span> <span class=o>=</span> <span class=n>db_config</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>common_issues</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;duplicate_key_error&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_handle_duplicate_key_error</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;connection_lost&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_handle_connection_lost</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;binary_log_missing&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_handle_binary_log_missing</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;disk_space_full&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_handle_disk_space_full</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;permission_denied&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_handle_permission_denied</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>diagnose_replication_issue</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;복제 문제 진단&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>conn</span> <span class=o>=</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>db_config</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>cursor</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>cursor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 슬레이브 상태 확인</span>
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;SHOW SLAVE STATUS&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>slave_status</span> <span class=o>=</span> <span class=n>cursor</span><span class=o>.</span><span class=n>fetchone</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=ow>not</span> <span class=n>slave_status</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;issue&#39;</span><span class=p>:</span> <span class=s1>&#39;no_replication_configured&#39;</span><span class=p>,</span> <span class=s1>&#39;severity&#39;</span><span class=p>:</span> <span class=s1>&#39;critical&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 상태 분석</span>
</span></span><span class=line><span class=cl>            <span class=n>io_running</span> <span class=o>=</span> <span class=n>slave_status</span><span class=p>[</span><span class=mi>10</span><span class=p>]</span>   <span class=c1># Slave_IO_Running</span>
</span></span><span class=line><span class=cl>            <span class=n>sql_running</span> <span class=o>=</span> <span class=n>slave_status</span><span class=p>[</span><span class=mi>11</span><span class=p>]</span>  <span class=c1># Slave_SQL_Running</span>
</span></span><span class=line><span class=cl>            <span class=n>last_io_error</span> <span class=o>=</span> <span class=n>slave_status</span><span class=p>[</span><span class=mi>18</span><span class=p>]</span>  <span class=c1># Last_IO_Error</span>
</span></span><span class=line><span class=cl>            <span class=n>last_sql_error</span> <span class=o>=</span> <span class=n>slave_status</span><span class=p>[</span><span class=mi>19</span><span class=p>]</span> <span class=c1># Last_SQL_Error</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>diagnosis</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;io_thread_running&#39;</span><span class=p>:</span> <span class=n>io_running</span> <span class=o>==</span> <span class=s1>&#39;Yes&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;sql_thread_running&#39;</span><span class=p>:</span> <span class=n>sql_running</span> <span class=o>==</span> <span class=s1>&#39;Yes&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;last_io_error&#39;</span><span class=p>:</span> <span class=n>last_io_error</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;last_sql_error&#39;</span><span class=p>:</span> <span class=n>last_sql_error</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 문제 분류</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=ow>not</span> <span class=n>diagnosis</span><span class=p>[</span><span class=s1>&#39;io_thread_running&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=s1>&#39;Access denied&#39;</span> <span class=ow>in</span> <span class=n>last_io_error</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>diagnosis</span><span class=p>[</span><span class=s1>&#39;issue_type&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;permission_denied&#39;</span>
</span></span><span class=line><span class=cl>                <span class=k>elif</span> <span class=s1>&#39;Can</span><span class=se>\&#39;</span><span class=s1>t connect&#39;</span> <span class=ow>in</span> <span class=n>last_io_error</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>diagnosis</span><span class=p>[</span><span class=s1>&#39;issue_type&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;connection_lost&#39;</span>
</span></span><span class=line><span class=cl>                <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>diagnosis</span><span class=p>[</span><span class=s1>&#39;issue_type&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;io_thread_stopped&#39;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>elif</span> <span class=ow>not</span> <span class=n>diagnosis</span><span class=p>[</span><span class=s1>&#39;sql_thread_running&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=s1>&#39;Duplicate entry&#39;</span> <span class=ow>in</span> <span class=n>last_sql_error</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>diagnosis</span><span class=p>[</span><span class=s1>&#39;issue_type&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;duplicate_key_error&#39;</span>
</span></span><span class=line><span class=cl>                <span class=k>elif</span> <span class=s1>&#39;No space left&#39;</span> <span class=ow>in</span> <span class=n>last_sql_error</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>diagnosis</span><span class=p>[</span><span class=s1>&#39;issue_type&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;disk_space_full&#39;</span>
</span></span><span class=line><span class=cl>                <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>diagnosis</span><span class=p>[</span><span class=s1>&#39;issue_type&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;sql_thread_stopped&#39;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>diagnosis</span><span class=p>[</span><span class=s1>&#39;issue_type&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;healthy&#39;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>diagnosis</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>Error</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;issue_type&#39;</span><span class=p>:</span> <span class=s1>&#39;connection_failed&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;severity&#39;</span><span class=p>:</span> <span class=s1>&#39;critical&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>auto_resolve_issue</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>diagnosis</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;문제 자동 해결 시도&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>issue_type</span> <span class=o>=</span> <span class=n>diagnosis</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;issue_type&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>issue_type</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>common_issues</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>resolver</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>common_issues</span><span class=p>[</span><span class=n>issue_type</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>resolver</span><span class=p>(</span><span class=n>diagnosis</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;resolved&#39;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;reason&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s1>&#39;Unknown issue type: </span><span class=si>{</span><span class=n>issue_type</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;manual_intervention_required&#39;</span><span class=p>:</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_handle_duplicate_key_error</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>diagnosis</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;중복 키 에러 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>conn</span> <span class=o>=</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>db_config</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>cursor</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>cursor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># SQL 스레드 중단</span>
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;STOP SLAVE SQL_THREAD&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 에러 스킵 (주의: 데이터 일관성 확인 필요)</span>
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;SET GLOBAL sql_slave_skip_counter = 1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># SQL 스레드 재시작</span>
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;START SLAVE SQL_THREAD&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 복제 상태 확인</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;SHOW SLAVE STATUS&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>status</span> <span class=o>=</span> <span class=n>cursor</span><span class=o>.</span><span class=n>fetchone</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;resolved&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;method&#39;</span><span class=p>:</span> <span class=s1>&#39;skipped_duplicate_entry&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;warning&#39;</span><span class=p>:</span> <span class=s1>&#39;데이터 일관성 수동 확인 필요&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;sql_thread_running&#39;</span><span class=p>:</span> <span class=n>status</span><span class=p>[</span><span class=mi>11</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;Yes&#39;</span> <span class=k>if</span> <span class=n>status</span> <span class=k>else</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>Error</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;resolved&#39;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span> <span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_handle_connection_lost</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>diagnosis</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;연결 손실 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>conn</span> <span class=o>=</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>db_config</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>cursor</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>cursor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># IO 스레드 재시작</span>
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;STOP SLAVE IO_THREAD&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;START SLAVE IO_THREAD&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 연결 상태 확인</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>  <span class=c1># 연결 재시도 대기</span>
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;SHOW SLAVE STATUS&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>status</span> <span class=o>=</span> <span class=n>cursor</span><span class=o>.</span><span class=n>fetchone</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>cursor</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;resolved&#39;</span><span class=p>:</span> <span class=n>status</span><span class=p>[</span><span class=mi>10</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;Yes&#39;</span> <span class=k>if</span> <span class=n>status</span> <span class=k>else</span> <span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;method&#39;</span><span class=p>:</span> <span class=s1>&#39;restarted_io_thread&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;io_thread_running&#39;</span><span class=p>:</span> <span class=n>status</span><span class=p>[</span><span class=mi>10</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;Yes&#39;</span> <span class=k>if</span> <span class=n>status</span> <span class=k>else</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=n>mysql</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>Error</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s1>&#39;resolved&#39;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span> <span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_handle_binary_log_missing</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>diagnosis</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;바이너리 로그 누락 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;resolved&#39;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;method&#39;</span><span class=p>:</span> <span class=s1>&#39;requires_full_resync&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;recommendation&#39;</span><span class=p>:</span> <span class=s1>&#39;마스터에서 전체 데이터 덤프 후 복제 재설정 필요&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;severity&#39;</span><span class=p>:</span> <span class=s1>&#39;high&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_handle_disk_space_full</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>diagnosis</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;디스크 공간 부족 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 디스크 사용량 확인</span>
</span></span><span class=line><span class=cl>        <span class=n>disk_usage</span> <span class=o>=</span> <span class=n>psutil</span><span class=o>.</span><span class=n>disk_usage</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>disk_usage</span><span class=o>.</span><span class=n>percent</span> <span class=o>&gt;</span> <span class=mi>95</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;resolved&#39;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;method&#39;</span><span class=p>:</span> <span class=s1>&#39;disk_cleanup_required&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;current_usage&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>disk_usage</span><span class=o>.</span><span class=n>percent</span><span class=si>:</span><span class=s1>.1f</span><span class=si>}</span><span class=s1>%&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;recommendation&#39;</span><span class=p>:</span> <span class=s1>&#39;로그 파일 정리 및 디스크 공간 확보 필요&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;severity&#39;</span><span class=p>:</span> <span class=s1>&#39;critical&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;resolved&#39;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;method&#39;</span><span class=p>:</span> <span class=s1>&#39;disk_space_recovered&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;current_usage&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>disk_usage</span><span class=o>.</span><span class=n>percent</span><span class=si>:</span><span class=s1>.1f</span><span class=si>}</span><span class=s1>%&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_handle_permission_denied</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>diagnosis</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;권한 거부 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;resolved&#39;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;method&#39;</span><span class=p>:</span> <span class=s1>&#39;permission_check_required&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;recommendation&#39;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;복제 사용자 계정 상태 확인&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;네트워크 접근 권한 확인&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;방화벽 설정 점검&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;severity&#39;</span><span class=p>:</span> <span class=s1>&#39;high&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시 - 자동 복구 시스템</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AutoRecoverySystem</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;자동 복구 시스템&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>troubleshooter</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>troubleshooter</span> <span class=o>=</span> <span class=n>troubleshooter</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>recovery_attempts</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>max_attempts</span> <span class=o>=</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>monitor_and_recover</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>check_interval</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>30</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;지속적 모니터링 및 자동 복구&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1># 문제 진단</span>
</span></span><span class=line><span class=cl>                <span class=n>diagnosis</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>troubleshooter</span><span class=o>.</span><span class=n>diagnose_replication_issue</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>diagnosis</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;issue_type&#39;</span><span class=p>)</span> <span class=o>!=</span> <span class=s1>&#39;healthy&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;⚠️  복제 문제 감지: </span><span class=si>{</span><span class=n>diagnosis</span><span class=p>[</span><span class=s1>&#39;issue_type&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=c1># 복구 시도 횟수 확인</span>
</span></span><span class=line><span class=cl>                    <span class=n>issue_type</span> <span class=o>=</span> <span class=n>diagnosis</span><span class=p>[</span><span class=s1>&#39;issue_type&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                    <span class=n>attempt_count</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>recovery_attempts</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>issue_type</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>attempt_count</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>max_attempts</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;🔧 자동 복구 시도 (</span><span class=si>{</span><span class=n>attempt_count</span> <span class=o>+</span> <span class=mi>1</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>max_attempts</span><span class=si>}</span><span class=s2>)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        
</span></span><span class=line><span class=cl>                        <span class=c1># 자동 복구 실행</span>
</span></span><span class=line><span class=cl>                        <span class=n>recovery_result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>troubleshooter</span><span class=o>.</span><span class=n>auto_resolve_issue</span><span class=p>(</span><span class=n>diagnosis</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        
</span></span><span class=line><span class=cl>                        <span class=k>if</span> <span class=n>recovery_result</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;resolved&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;✅ 복제 문제 자동 해결됨&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=bp>self</span><span class=o>.</span><span class=n>recovery_attempts</span><span class=p>[</span><span class=n>issue_type</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span>  <span class=c1># 성공 시 카운터 리셋</span>
</span></span><span class=line><span class=cl>                        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                            <span class=bp>self</span><span class=o>.</span><span class=n>recovery_attempts</span><span class=p>[</span><span class=n>issue_type</span><span class=p>]</span> <span class=o>=</span> <span class=n>attempt_count</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>                            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;❌ 자동 복구 실패: </span><span class=si>{</span><span class=n>recovery_result</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;error&#39;</span><span class=p>,</span> <span class=s1>&#39;Unknown error&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;🚨 최대 복구 시도 횟수 초과, 수동 개입 필요&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=c1># 실제로는 알람 발송</span>
</span></span><span class=line><span class=cl>                        <span class=bp>self</span><span class=o>.</span><span class=n>_send_alert</span><span class=p>(</span><span class=n>diagnosis</span><span class=p>,</span> <span class=n>recovery_result</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;✅ 복제 시스템 정상 동작&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=c1># 성공 시 모든 카운터 리셋</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>recovery_attempts</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;❌ 모니터링 오류: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>check_interval</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_send_alert</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>diagnosis</span><span class=p>:</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>recovery_result</span><span class=p>:</span> <span class=n>Dict</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;알람 발송 (실제로는 이메일, 슬랙 등)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>alert_message</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        🚨 복제 시스템 수동 개입 필요
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        문제 유형: </span><span class=si>{</span><span class=n>diagnosis</span><span class=p>[</span><span class=s1>&#39;issue_type&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>        최종 복구 시도 결과: </span><span class=si>{</span><span class=n>recovery_result</span><span class=si>}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>        발생 시간: </span><span class=si>{</span><span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span><span class=si>}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        즉시 시스템 관리자의 확인이 필요합니다.
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=n>alert_message</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># 실제로는 notification service 호출</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 실행 예시</span>
</span></span><span class=line><span class=cl><span class=n>db_config</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;host&#39;</span><span class=p>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;port&#39;</span><span class=p>:</span> <span class=mi>3307</span><span class=p>,</span>  <span class=c1># 슬레이브 포트</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;user&#39;</span><span class=p>:</span> <span class=s1>&#39;root&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;password&#39;</span><span class=p>:</span> <span class=s1>&#39;rootpassword&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>troubleshooter</span> <span class=o>=</span> <span class=n>ReplicationTroubleshooter</span><span class=p>(</span><span class=n>db_config</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>auto_recovery</span> <span class=o>=</span> <span class=n>AutoRecoverySystem</span><span class=p>(</span><span class=n>troubleshooter</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 문제 진단 및 해결</span>
</span></span><span class=line><span class=cl><span class=n>diagnosis</span> <span class=o>=</span> <span class=n>troubleshooter</span><span class=o>.</span><span class=n>diagnose_replication_issue</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;진단 결과: </span><span class=si>{</span><span class=n>diagnosis</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>diagnosis</span><span class=p>[</span><span class=s1>&#39;issue_type&#39;</span><span class=p>]</span> <span class=o>!=</span> <span class=s1>&#39;healthy&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>recovery_result</span> <span class=o>=</span> <span class=n>troubleshooter</span><span class=o>.</span><span class=n>auto_resolve_issue</span><span class=p>(</span><span class=n>diagnosis</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;복구 결과: </span><span class=si>{</span><span class=n>recovery_result</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=phase-7-고급-주제-및-미래-전망>Phase 7: 고급 주제 및 미래 전망<a hidden class=anchor aria-hidden=true href=#phase-7-고급-주제-및-미래-전망>#</a></h3><h4 id=71-현재-도전-과제-및-한계-1>7.1 현재 도전 과제 및 한계<a hidden class=anchor aria-hidden=true href=#71-현재-도전-과제-및-한계-1>#</a></h4><p><strong>복제 기술이 직면한 주요 기술 난제들:</strong></p><p><strong>1. 다중 마스터 환경에서의 일관성 보장</strong></p><p>현재 복제 시스템의 가장 큰 난제는 <strong>여러 노드에서 동시 쓰기를 허용하면서도 강일관성을 보장</strong>하는 것입니다.</p><ul><li><strong>원인</strong>: CAP 정리의 본질적 제약으로, 네트워크 분할 상황에서 일관성과 가용성을 동시에 완벽하게 보장할 수 없음</li><li><strong>영향</strong>: 글로벌 분산 환경에서 지역별 쓰기 성능 향상과 데이터 정확성 사이의 트레이드오프 발생</li><li><strong>해결방안</strong>:<ul><li>CRDT(Conflict-free Replicated Data Types) 기반 자동 충돌 해결</li><li>벡터 클럭과 논리적 타임스탬프를 활용한 인과관계 추적</li><li>비즈니스 로직 레벨에서의 커스텀 충돌 해결 정책</li></ul></li></ul><p><strong>2. 대규모 환경에서의 복제 확장성</strong></p><p>전통적인 마스터-슬레이브 구조는 <strong>마스터 노드가 단일 병목점</strong>이 되어 수평 확장에 한계를 보입니다.</p><ul><li><strong>원인</strong>: 모든 쓰기 트래픽이 단일 마스터로 집중되어 처리 용량 한계 도달</li><li><strong>영향</strong>: 수백만 TPS(Transactions Per Second) 이상의 대규모 워크로드 처리 제약</li><li><strong>해결방안</strong>:<ul><li>샤딩(Sharding)과 복제의 하이브리드 접근법</li><li>읽기/쓰기 분리를 넘어선 워크로드별 전용 복제본</li><li>마이크로서비스 아키텍처와의 통합을 통한 도메인별 복제 전략</li></ul></li></ul><p><strong>3. 실시간 스트리밍과의 통합 복잡성</strong></p><p>IoT와 실시간 분석의 확산으로 <strong>배치 기반 복제에서 스트리밍 기반 복제</strong>로의 패러다임 전환이 필요하지만, 기존 시스템과의 통합에 어려움이 있습니다.</p><ul><li><strong>원인</strong>: 전통적인 복제는 트랜잭션 로그 기반으로 설계되어 이벤트 스트리밍과 아키텍처 불일치</li><li><strong>영향</strong>: 실시간 데이터 파이프라인과 복제 시스템 간 데이터 일관성 및 지연 문제</li><li><strong>해결방안</strong>:<ul><li>Apache Kafka와 같은 이벤트 스트리밍 플랫폼을 복제 백본으로 활용</li><li>Event Sourcing 패턴을 통한 상태 복제에서 이벤트 복제로 전환</li><li>CDC(Change Data Capture) 기술을 활용한 실시간 변경 감지</li></ul></li></ul><p><strong>4. 클라우드 네이티브 환경의 동적 확장</strong></p><p>컨테이너 오케스트레이션 환경에서 <strong>노드의 동적 생성/삭제</strong>와 복제 시스템의 안정성을 동시에 보장하는 것이 도전 과제입니다.</p><ul><li><strong>원인</strong>: 전통적인 복제는 고정된 노드 구성을 전제로 설계되어 동적 환경 대응 부족</li><li><strong>영향</strong>: 자동 확장 시 복제 토폴로지 재구성 과정에서 일시적 서비스 중단 위험</li><li><strong>해결방안</strong>:<ul><li>Kubernetes Operator를 통한 복제 라이프사이클 자동 관리</li><li>서비스 메시(Service Mesh)를 활용한 네트워크 레벨 복제 추상화</li><li>GitOps 기반 선언적 복제 구성 관리</li></ul></li></ul><h4 id=72-최신-트렌드-및-방향-1>7.2 최신 트렌드 및 방향<a hidden class=anchor aria-hidden=true href=#72-최신-트렌드-및-방향-1>#</a></h4><p><strong>복제 기술의 주요 진화 방향:</strong></p><p><strong>1. 지능형 복제 (Intelligent Replication)</strong></p><p>머신러닝을 활용한 <strong>예측적 복제 최적화</strong>가 주목받고 있습니다.</p><ul><li><strong>핵심 개념</strong>: 사용자 패턴 분석을 통한 선제적 데이터 복제 및 배치 최적화</li><li><strong>적용 분야</strong>:<ul><li>지리적 접근 패턴 예측을 통한 자동 복제본 배치</li><li>워크로드 예측 기반 복제 용량 자동 조정</li><li>이상 탐지를 통한 복제 장애 예방</li></ul></li><li><strong>기대 효과</strong>: 복제 오버헤드 30-50% 감소, 사용자 경험 향상</li></ul><p><strong>2. 엣지 컴퓨팅 통합 복제</strong></p><p>5G와 IoT의 확산으로 <strong>엣지-클라우드 하이브리드 복제</strong>가 새로운 패러다임으로 부상하고 있습니다.</p><ul><li><strong>핵심 개념</strong>: 엣지 디바이스에서 클라우드까지 계층적 복제 아키텍처</li><li><strong>적용 분야</strong>:<ul><li>자율주행차량의 실시간 지도 데이터 동기화</li><li>산업 IoT의 센서 데이터 계층적 집계</li><li>AR/VR 콘텐츠의 지역별 캐싱 및 복제</li></ul></li><li><strong>기대 효과</strong>: 지연시간 90% 이상 감소, 네트워크 대역폭 효율성 향상</li></ul><p><strong>3. 블록체인 기반 신뢰성 보장</strong></p><p>탈중앙화된 환경에서의 <strong>신뢰할 수 있는 복제</strong>를 위해 블록체인 기술이 접목되고 있습니다.</p><ul><li><strong>핵심 개념</strong>: 복제 로그의 불변성과 투명성을 블록체인으로 보장</li><li><strong>적용 분야</strong>:<ul><li>금융 거래 데이터의 다자간 복제</li><li>공급망 추적 데이터의 신뢰성 보장</li><li>의료 기록의 안전한 기관 간 공유</li></ul></li><li><strong>기대 효과</strong>: 데이터 무결성 100% 보장, 감사 추적성 완전 자동화</li></ul><p><strong>4. 서버리스 복제 서비스</strong></p><p>클라우드 제공자들의 <strong>완전 관리형 복제 서비스</strong>가 확산되고 있습니다.</p><ul><li><strong>핵심 개념</strong>: 복제 인프라의 완전 추상화로 비즈니스 로직에만 집중</li><li><strong>주요 서비스</strong>:<ul><li>AWS DynamoDB Global Tables의 자동 글로벌 복제</li><li>Google Spanner의 외부 일관성 보장</li><li>Azure Cosmos DB의 다중 모델 복제</li></ul></li><li><strong>기대 효과</strong>: 운영 복잡성 80% 감소, 개발 생산성 2-3배 향상</li></ul><h4 id=73-대안-기술-및-경쟁-솔루션-1>7.3 대안 기술 및 경쟁 솔루션<a hidden class=anchor aria-hidden=true href=#73-대안-기술-및-경쟁-솔루션-1>#</a></h4><p><strong>복제를 대체하거나 보완하는 주요 기술들:</strong></p><p><strong>1. 이벤트 소싱 (Event Sourcing)</strong></p><p><strong>영역</strong>: 상태 복제의 대안으로 이벤트 기반 시스템 구축</p><ul><li><strong>주요 기술</strong>: Apache Kafka, EventStore, AWS Kinesis</li><li><strong>대안 특성</strong>: 상태 스냅샷 대신 이벤트 스트림을 복제하여 완전한 감사 추적 제공</li><li><strong>장점</strong>:<ul><li>시점별 상태 복원 가능 (Time Travel)</li><li>복잡한 비즈니스 로직의 이벤트 기반 모델링</li><li>마이크로서비스 간 느슨한 결합</li></ul></li><li><strong>단점</strong>: 이벤트 저장소 크기 증가, 스냅샷 생성 오버헤드</li><li><strong>적용 시나리오</strong>: 금융 거래, 주문 처리, 감사가 중요한 시스템</li></ul><p><strong>2. CQRS (Command Query Responsibility Segregation)</strong></p><p><strong>영역</strong>: 읽기/쓰기 분리의 고도화된 형태</p><ul><li><strong>주요 기술</strong>: Axon Framework, NEventStore, Greg Young&rsquo;s Event Store</li><li><strong>대안 특성</strong>: 명령(쓰기)과 조회(읽기) 모델을 완전히 분리하여 각각 최적화</li><li><strong>장점</strong>:<ul><li>읽기 성능 극대화를 위한 전용 뷰 모델</li><li>복잡한 쿼리와 단순한 명령의 독립적 확장</li><li>도메인 로직과 조회 로직의 명확한 분리</li></ul></li><li><strong>단점</strong>: 아키텍처 복잡성 증가, 최종 일관성 관리 필요</li><li><strong>적용 시나리오</strong>: 대용량 읽기 워크로드, 복잡한 리포팅 요구사항</li></ul><p><strong>3. 분산 캐시 시스템</strong></p><p><strong>영역</strong>: 복제 대신 지능형 캐싱으로 성능 확보</p><ul><li><strong>주요 기술</strong>: Redis Cluster, Hazelcast, Apache Ignite, Caffeine</li><li><strong>대안 특성</strong>: 원본 데이터는 단일 저장소에 유지하고 캐시를 분산 배치</li><li><strong>장점</strong>:<ul><li>복제 오버헤드 없이 읽기 성능 향상</li><li>캐시 무효화를 통한 일관성 관리 단순화</li><li>메모리 기반 고속 접근</li></ul></li><li><strong>단점</strong>: 캐시 미스 시 성능 저하, 콜드 스타트 문제</li><li><strong>적용 시나리오</strong>: 읽기 집약적 워크로드, 정적 콘텐츠 배포</li></ul><p><strong>4. 분산 파일 시스템</strong></p><p><strong>영역</strong>: 구조화된 데이터베이스 복제의 대안</p><ul><li><strong>주요 기술</strong>: HDFS, GlusterFS, Ceph, Amazon S3, Google Cloud Storage</li><li><strong>대안 특성</strong>: 파일 단위 복제로 대용량 비정형 데이터 처리</li><li><strong>장점</strong>:<ul><li>페타바이트급 확장성</li><li>자동 복제 및 장애 복구</li><li>지리적 분산 최적화</li></ul></li><li><strong>단점</strong>: 트랜잭션 지원 제한, 실시간 일관성 보장 어려움</li><li><strong>적용 시나리오</strong>: 빅데이터 분석, 미디어 콘텐츠 배포, 백업 시스템</li></ul><p><strong>5. 블록체인 및 분산 원장</strong></p><p><strong>영역</strong>: 중앙화된 복제 시스템의 탈중앙화 대안</p><ul><li><strong>주요 기술</strong>: Hyperledger Fabric, Ethereum, Corda, Quorum</li><li><strong>대안 특성</strong>: 합의 알고리즘을 통한 분산 데이터 동기화</li><li><strong>장점</strong>:<ul><li>신뢰할 수 있는 제3자 없이 데이터 무결성 보장</li><li>변조 불가능한 감사 추적</li><li>다자간 협력 시나리오에 적합</li></ul></li><li><strong>단점</strong>: 높은 에너지 소비, 처리량 제한, 확장성 문제</li><li><strong>적용 시나리오</strong>: 공급망 관리, 신원 인증, 디지털 자산 관리</li></ul><h4 id=74-클라우드-네이티브-및-엣지-컴퓨팅>7.4 클라우드 네이티브 및 엣지 컴퓨팅<a hidden class=anchor aria-hidden=true href=#74-클라우드-네이티브-및-엣지-컴퓨팅>#</a></h4><p><strong>클라우드 네이티브 환경에서의 복제 혁신:</strong></p><p><strong>1. 컨테이너 오케스트레이션 통합</strong></p><p>Kubernetes 생태계에서 복제는 <strong>선언적 구성</strong>과 <strong>자동화된 라이프사이클 관리</strong>로 진화하고 있습니다.</p><ul><li><strong>주요 발전</strong>:<ul><li>Kubernetes Operator를 통한 복제 시스템 자동 관리</li><li>Helm Charts를 활용한 복제 구성의 패키지화</li><li>Service Mesh와의 통합으로 네트워크 레벨 복제 추상화</li></ul></li><li><strong>혁신 포인트</strong>: 복제 토폴로지가 인프라 코드(Infrastructure as Code)로 관리되어 버전 관리, 롤백, 자동화 가능</li><li><strong>실무 적용</strong>: GitOps 워크플로우를 통해 복제 구성 변경을 코드 리뷰 프로세스로 관리</li></ul><p><strong>2. 서버리스 아키텍처와의 융합</strong></p><p>FaaS(Function as a Service) 환경에서 <strong>이벤트 기반 복제</strong>가 새로운 패러다임을 제시합니다.</p><ul><li><strong>주요 발전</strong>:<ul><li>데이터 변경 이벤트에 반응하는 서버리스 함수 기반 복제</li><li>Auto-scaling을 통한 복제 부하의 동적 처리</li><li>마이크로서비스 간 이벤트 스트리밍 기반 상태 동기화</li></ul></li><li><strong>혁신 포인트</strong>: 복제 로직 자체가 서버리스 함수로 구현되어 운영 부담 최소화</li><li><strong>실무 적용</strong>: AWS Lambda, Azure Functions를 활용한 CDC(Change Data Capture) 파이프라인</li></ul><p><strong>엣지 컴퓨팅 환경의 복제 전략:</strong></p><p><strong>3. 계층적 엣지 복제</strong></p><p>5G 네트워크와 엣지 컴퓨팅의 확산으로 <strong>멀티 티어 복제 아키텍처</strong>가 주목받고 있습니다.</p><ul><li><strong>아키텍처 특성</strong>:<ul><li>디바이스 엣지 → 지역 엣지 → 리전 클라우드 → 글로벌 클라우드</li><li>각 계층별 차별화된 복제 전략과 일관성 모델</li><li>네트워크 지연과 대역폭을 고려한 지능형 데이터 배치</li></ul></li><li><strong>기술적 도전</strong>: 계층 간 데이터 일관성 보장과 장애 전파 방지</li><li><strong>적용 사례</strong>: 자율주행차 데이터, 스마트 시티 센서 네트워크, 산업 IoT</li></ul><p><strong>4. 오프라인 우선 복제</strong></p><p>네트워크 연결이 불안정한 환경에서 <strong>로컬 우선 처리 후 동기화</strong>하는 방식이 확산되고 있습니다.</p><ul><li><strong>핵심 기술</strong>:<ul><li>Offline-first 애플리케이션 아키텍처</li><li>Conflict-free Replicated Data Types (CRDT) 기반 자동 병합</li><li>지연 동기화(Eventual Synchronization) 최적화</li></ul></li><li><strong>혁신 포인트</strong>: 네트워크 품질에 관계없이 일관된 사용자 경험 제공</li><li><strong>적용 분야</strong>: 모바일 애플리케이션, 원격지 작업 환경, IoT 디바이스</li></ul><h4 id=75-학술-연구-동향-및-혁신-기술>7.5 학술 연구 동향 및 혁신 기술<a hidden class=anchor aria-hidden=true href=#75-학술-연구-동향-및-혁신-기술>#</a></h4><p><strong>최신 학술 연구의 복제 기술 혁신:</strong></p><p><strong>1. 머신러닝 기반 복제 최적화</strong></p><p><strong>연구 방향</strong>: 인공지능을 활용한 자동화된 복제 전략 수립</p><ul><li><strong>주요 연구 주제</strong>:<ul><li>강화학습을 통한 복제 토폴로지 최적화</li><li>시계열 분석 기반 복제 지연 예측 및 선제적 대응</li><li>그래프 신경망을 활용한 복제 네트워크 구조 최적화</li></ul></li><li><strong>혁신 기술</strong>: Google의 AutoML을 복제 구성에 적용하여 워크로드별 최적 복제 전략 자동 생성</li><li><strong>산업 영향</strong>: 복제 시스템 관리의 전문 지식 요구사항 대폭 감소</li></ul><p><strong>2. 양자 컴퓨팅과 복제 보안</strong></p><p><strong>연구 방향</strong>: 양자 내성 암호화 기술의 복제 시스템 적용</p><ul><li><strong>주요 연구 주제</strong>:<ul><li>양자 키 분배(QKD)를 활용한 복제 채널 보안</li><li>포스트 양자 암호화(Post-Quantum Cryptography) 기반 복제 인증</li><li>양자 내성 디지털 서명을 통한 복제 무결성 보장</li></ul></li><li><strong>혁신 기술</strong>: 양자 얽힘을 이용한 분산 노드 간 즉시 상태 감지</li><li><strong>미래 전망</strong>: 2030년대 상용 양자 컴퓨터 시대 대비 보안 체계 구축</li></ul><p><strong>3. 생물학적 영감 복제 알고리즘</strong></p><p><strong>연구 방향</strong>: 생체 시스템의 복제 메커니즘을 모방한 분산 알고리즘</p><ul><li><strong>주요 연구 주제</strong>:<ul><li>면역 시스템 모방 자가치유 복제 네트워크</li><li>신경망 가소성 기반 적응형 복제 토폴로지</li><li>군집 지능을 활용한 분산 복제 의사결정</li></ul></li><li><strong>혁신 기술</strong>: DNA 복제 메커니즘을 모방한 오류 정정 복제 프로토콜</li><li><strong>적용 가능성</strong>: 대규모 IoT 네트워크의 자율적 복제 관리</li></ul><p><strong>4. 형식 검증 기반 복제 정확성</strong></p><p><strong>연구 방향</strong>: 수학적 증명을 통한 복제 시스템 정확성 보장</p><ul><li><strong>주요 연구 주제</strong>:<ul><li>TLA+ (Temporal Logic of Actions)를 이용한 복제 프로토콜 검증</li><li>모델 체킹을 통한 복제 일관성 속성 증명</li><li>타입 이론 기반 복제 시스템 안전성 보장</li></ul></li><li><strong>혁신 기술</strong>: AWS의 s2n-tls처럼 형식 검증된 복제 라이브러리</li><li><strong>산업 영향</strong>: 미션 크리티컬 시스템의 복제 신뢰성 수학적 보장</li></ul><h4 id=76-산업-생태계-변화-및-비즈니스-모델-영향>7.6 산업 생태계 변화 및 비즈니스 모델 영향<a hidden class=anchor aria-hidden=true href=#76-산업-생태계-변화-및-비즈니스-모델-영향>#</a></h4><p><strong>복제 기술이 주도하는 산업 변화:</strong></p><p><strong>1. 데이터 주권과 지역화</strong></p><p><strong>변화 동력</strong>: GDPR, 중국 데이터보안법 등 데이터 지역화 규제 강화</p><ul><li><strong>비즈니스 모델 변화</strong>:<ul><li>글로벌 기업의 지역별 데이터 센터 필수 구축</li><li>데이터 주권 준수를 위한 선택적 복제 서비스 등장</li><li>복제 경로 추적 및 컴플라이언스 자동화 솔루션 시장 성장</li></ul></li><li><strong>새로운 수익 모델</strong>:<ul><li>복제 기반 컴플라이언스-as-a-Service</li><li>지역별 데이터 거버넌스 컨설팅</li><li>크로스보더 데이터 복제 게이트웨이 서비스</li></ul></li><li><strong>시장 규모</strong>: 데이터 로컬라이제이션 시장이 2025년까지 연평균 25% 성장 예상</li></ul><p><strong>2. 구독 경제와 실시간 개인화</strong></p><p><strong>변화 동력</strong>: Netflix, Spotify 등 구독 서비스의 실시간 개인화 경쟁 심화</p><ul><li><strong>비즈니스 모델 변화</strong>:<ul><li>사용자 행동 데이터의 실시간 글로벌 복제 필수</li><li>A/B 테스트를 위한 지역별 차별화된 복제 전략</li><li>개인화 알고리즘 모델의 엣지 복제 및 추론</li></ul></li><li><strong>새로운 수익 모델</strong>:<ul><li>실시간 개인화 복제 플랫폼-as-a-Service</li><li>사용자 세그먼트별 차등 복제 서비스</li><li>개인화 성능 보장 SLA 기반 차등 과금</li></ul></li><li><strong>경쟁 우위</strong>: 복제 지연 1초 단축이 사용자 이탈률 5-10% 감소 효과</li></ul><p><strong>3. 메타버스와 공간 컴퓨팅</strong></p><p><strong>변화 동력</strong>: AR/VR/XR 기술 발전과 메타버스 플랫폼 확산</p><ul><li><strong>비즈니스 모델 변화</strong>:<ul><li>3D 공간 데이터의 실시간 멀티캐스트 복제</li><li>사용자 아바타와 행동 데이터의 지연 없는 동기화</li><li>가상 자산(NFT) 소유권의 분산 복제 및 검증</li></ul></li><li><strong>기술적 도전</strong>:<ul><li>밀리초 단위 지연 요구사항으로 기존 복제 한계 도달</li><li>공간 데이터의 관심 영역(Area of Interest) 기반 선택적 복제</li><li>다중 감각 데이터(시각, 청각, 촉각)의 동기화된 복제</li></ul></li><li><strong>새로운 시장</strong>: 메타버스 인프라 서비스 시장 2030년 500억 달러 규모 예상</li></ul><p><strong>4. 지속가능성과 그린 컴퓨팅</strong></p><p><strong>변화 동력</strong>: 탄소 중립 목표와 에너지 효율성 중시 문화 확산</p><ul><li><strong>비즈니스 모델 변화</strong>:<ul><li>복제 과정의 에너지 소비 최적화가 경쟁 우위 요소로 부상</li><li>재생 에너지 기반 데이터센터로의 지능형 복제 라우팅</li><li>탄소 발자국 최소화 복제 토폴로지 설계 서비스</li></ul></li><li><strong>혁신 기술</strong>:<ul><li>태양광/풍력 발전량 예측 기반 복제 스케줄링</li><li>액체 냉각 기술 적용 고밀도 복제 서버</li><li>양자점(Quantum Dot) 기술 기반 초저전력 복제 칩셋</li></ul></li><li><strong>규제 영향</strong>: EU 택소노미 규정으로 복제 시스템의 환경 영향 공시 의무화</li></ul><p><strong>5. 탈중앙화 웹(Web3)과 소유권 경제</strong></p><p><strong>변화 동력</strong>: 블록체인 기술과 개인 데이터 소유권 인식 확산</p><ul><li><strong>비즈니스 모델 변화</strong>:<ul><li>중앙화된 복제에서 P2P 분산 복제 네트워크로 전환</li><li>개인 데이터 복제에 대한 소유자 보상 모델 등장</li><li>탈중앙화 저장소(IPFS, Filecoin)와의 하이브리드 복제</li></ul></li><li><strong>새로운 경제 모델</strong>:<ul><li>복제 기여도에 따른 토큰 인센티브 시스템</li><li>개인 데이터의 선택적 복제 권한 판매 마켓플레이스</li><li>DAO(Decentralized Autonomous Organization) 기반 복제 거버넌스</li></ul></li><li><strong>기술적 혁신</strong>: zk-SNARKs를 활용한 프라이버시 보장 복제 증명</li></ul><h2 id=최종-정리-및-학습-가이드-1>최종 정리 및 학습 가이드<a hidden class=anchor aria-hidden=true href=#최종-정리-및-학습-가이드-1>#</a></h2><h3 id=내용-종합-1>내용 종합<a hidden class=anchor aria-hidden=true href=#내용-종합-1>#</a></h3><p>복제(Replication)는 분산 시스템의 핵심 기술로서, 단일 장애점을 제거하고 성능을 향상시키며 지리적 분산을 통한 글로벌 서비스를 가능하게 하는 필수적인 아키텍처 패턴입니다.</p><p><strong>핵심 가치 제안:</strong></p><ul><li><strong>고가용성</strong>: 99.9%+ 서비스 가용성을 통한 비즈니스 연속성 보장</li><li><strong>성능 최적화</strong>: 읽기 워크로드 분산을 통한 응답 시간 30-70% 개선</li><li><strong>확장성</strong>: 수평 확장을 통한 선형적 처리 용량 증가</li><li><strong>지리적 분산</strong>: 사용자 근접성을 통한 지연 시간 50% 이상 단축</li><li><strong>재해 복구</strong>: 실시간 백업을 통한 RPO 1분 이내, RTO 15분 이내 달성</li></ul><p><strong>기술적 진화 방향:</strong>
복제 기술은 전통적인 마스터-슬레이브 구조에서 벗어나 <strong>다중 마스터, 이벤트 소싱, 클라우드 네이티브</strong> 환경으로 진화하고 있으며, <strong>머신러닝 기반 최적화</strong>와 <strong>엣지 컴퓨팅 통합</strong>을 통해 차세대 분산 시스템의 백본 역할을 수행할 것으로 전망됩니다.</p><h3 id=실무-적용-가이드-1>실무 적용 가이드<a hidden class=anchor aria-hidden=true href=#실무-적용-가이드-1>#</a></h3><p><strong>도입 단계별 체크리스트:</strong></p><p><strong>1. 기획 및 설계 단계</strong></p><ul><li><input disabled type=checkbox> 비즈니스 요구사항 분석 (가용성, 성능, 일관성 우선순위)</li><li><input disabled type=checkbox> 복제 유형 선택 (동기식/비동기식, 마스터-슬레이브/다중마스터)</li><li><input disabled type=checkbox> 일관성 모델 결정 (강일관성/최종일관성/인과일관성)</li><li><input disabled type=checkbox> 복제 팩터 및 토폴로지 설계</li><li><input disabled type=checkbox> 네트워크 요구사항 및 보안 정책 수립</li></ul><p><strong>2. 구현 및 구축 단계</strong></p><ul><li><input disabled type=checkbox> 복제 소프트웨어 선택 및 라이센스 확보</li><li><input disabled type=checkbox> 인프라 구성 (서버, 네트워크, 스토리지)</li><li><input disabled type=checkbox> 복제 사용자 및 권한 설정</li><li><input disabled type=checkbox> SSL/TLS 암호화 구성</li><li><input disabled type=checkbox> 모니터링 시스템 구축</li></ul><p><strong>3. 테스트 및 검증 단계</strong></p><ul><li><input disabled type=checkbox> 기능 테스트 (복제 동작, 장애 전환)</li><li><input disabled type=checkbox> 성능 테스트 (처리량, 지연시간, 확장성)</li><li><input disabled type=checkbox> 장애 시나리오 테스트 (네트워크 분할, 노드 장애)</li><li><input disabled type=checkbox> 보안 테스트 (접근 제어, 데이터 암호화)</li><li><input disabled type=checkbox> 재해 복구 테스트</li></ul><p><strong>4. 운영 및 유지보수 단계</strong></p><ul><li><input disabled type=checkbox> 실시간 모니터링 대시보드 운영</li><li><input disabled type=checkbox> 자동화된 알람 및 대응 체계 구축</li><li><input disabled type=checkbox> 정기적 백업 및 복구 절차 수립</li><li><input disabled type=checkbox> 성능 튜닝 및 최적화</li><li><input disabled type=checkbox> 보안 패치 및 업그레이드 관리</li></ul><h3 id=학습-로드맵-1>학습 로드맵<a hidden class=anchor aria-hidden=true href=#학습-로드맵-1>#</a></h3><p><strong>초심자 경로 (3-6개월):</strong></p><ol><li><strong>기초 개념</strong> → 분산 시스템 이론, CAP 정리 학습</li><li><strong>실습 환경</strong> → Docker를 이용한 MySQL 복제 실습</li><li><strong>모니터링</strong> → Prometheus + Grafana 구축</li><li><strong>장애 대응</strong> → 기본적인 트러블슈팅 기법</li></ol><p><strong>중급자 경로 (6-12개월):</strong></p><ol><li><strong>고급 복제</strong> → 다중 마스터, 샤딩 연계 학습</li><li><strong>클라우드 서비스</strong> → AWS RDS, GCP Cloud SQL 활용</li><li><strong>자동화</strong> → Kubernetes Operator 개발</li><li><strong>성능 최적화</strong> → 복제 지연 최소화 기법</li></ol><p><strong>고급자 경로 (12개월+):</strong></p><ol><li><strong>아키텍처 설계</strong> → 대규모 글로벌 복제 시스템 설계</li><li><strong>새로운 기술</strong> → Event Sourcing, CQRS 통합</li><li><strong>연구 개발</strong> → 머신러닝 기반 복제 최적화</li><li><strong>컨설팅</strong> → 기업 복제 전략 수립 및 마이그레이션</li></ol><h3 id=학습-항목-정리-1>학습 항목 정리<a hidden class=anchor aria-hidden=true href=#학습-항목-정리-1>#</a></h3><table><thead><tr><th>카테고리</th><th>Phase</th><th>항목</th><th>중요도</th><th>학습 목표</th><th>실무 연관성</th><th>설명</th></tr></thead><tbody><tr><td>기초</td><td>1</td><td>복제 개념 정의</td><td>필수</td><td>복제의 본질적 이해</td><td>높음</td><td>분산 시스템의 핵심 개념</td></tr><tr><td>기초</td><td>1</td><td>CAP 정리</td><td>필수</td><td>트레이드오프 이해</td><td>높음</td><td>설계 결정의 이론적 기반</td></tr><tr><td>기초</td><td>2</td><td>복제 토폴로지</td><td>필수</td><td>아키텍처 패턴</td><td>높음</td><td>마스터-슬레이브, 다중마스터</td></tr><tr><td>핵심</td><td>2</td><td>일관성 모델</td><td>필수</td><td>데이터 정합성</td><td>높음</td><td>비즈니스 요구사항 매핑</td></tr><tr><td>핵심</td><td>3</td><td>성능 트레이드오프</td><td>필수</td><td>최적화 전략</td><td>높음</td><td>동기식 vs 비동기식 선택</td></tr><tr><td>응용</td><td>4</td><td>구현 기법</td><td>필수</td><td>실제 구현 능력</td><td>높음</td><td>MySQL, PostgreSQL 복제</td></tr><tr><td>응용</td><td>5</td><td>모니터링</td><td>권장</td><td>운영 안정성</td><td>중간</td><td>Prometheus, Grafana 활용</td></tr><tr><td>응용</td><td>5</td><td>클라우드 서비스</td><td>권장</td><td>관리형 서비스</td><td>중간</td><td>AWS RDS, GCP Cloud SQL</td></tr><tr><td>운영</td><td>6</td><td>트러블슈팅</td><td>필수</td><td>장애 대응</td><td>높음</td><td>복제 중단 원인 분석 및 해결</td></tr><tr><td>운영</td><td>6</td><td>보안 관리</td><td>필수</td><td>데이터 보호</td><td>높음</td><td>전송/저장 암호화, 접근 제어</td></tr><tr><td>고급</td><td>7</td><td>최신 트렌드</td><td>선택</td><td>기술 발전 동향</td><td>낮음</td><td>클라우드 네이티브, AI 통합</td></tr><tr><td>고급</td><td>7</td><td>연구 개발</td><td>선택</td><td>혁신 기술</td><td>낮음</td><td>학술 연구, 차세대 기술</td></tr></tbody></table><h2 id=용어-정리-1>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-1>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>정의</th><th>관련 개념</th><th>실무 활용</th></tr></thead><tbody><tr><td>핵심</td><td>복제 (Replication)</td><td>동일한 데이터를 여러 노드에 복사하여 저장하는 기법</td><td>분산 시스템, 가용성</td><td>시스템 설계의 기본 패턴</td></tr><tr><td>핵심</td><td>복제 지연 (Replication Lag)</td><td>마스터와 슬레이브 간 데이터 동기화 지연 시간</td><td>일관성, 성능</td><td>모니터링 핵심 지표</td></tr><tr><td>핵심</td><td>마스터-슬레이브 (Master-Slave)</td><td>주 노드에서 쓰기, 보조 노드에서 읽기를 처리하는 구조</td><td>읽기/쓰기 분리</td><td>가장 일반적인 복제 패턴</td></tr><tr><td>핵심</td><td>다중 마스터 (Multi-Master)</td><td>여러 노드에서 동시에 쓰기를 허용하는 구조</td><td>충돌 해결, 분산 쓰기</td><td>글로벌 분산 환경</td></tr><tr><td>구현</td><td>바이너리 로그 (Binary Log)</td><td>데이터베이스 변경사항을 순차적으로 기록하는 로그</td><td>WAL, 트랜잭션</td><td>MySQL 복제의 핵심 메커니즘</td></tr><tr><td>구현</td><td>GTID</td><td>Global Transaction Identifier, 전역 트랜잭션 식별자</td><td>트랜잭션 추적</td><td>MySQL 복제 관리 단순화</td></tr><tr><td>구현</td><td>동기식 복제 (Sync Repl)</td><td>모든 복제본에 적용 완료 후 응답하는 방식</td><td>강일관성, 성능</td><td>데이터 정확성 우선 시나리오</td></tr><tr><td>구현</td><td>비동기식 복제 (Async Repl)</td><td>마스터에만 적용 후 즉시 응답하는 방식</td><td>최종일관성, 성능</td><td>고성능 요구 시나리오</td></tr><tr><td>운영</td><td>페일오버 (Failover)</td><td>주 노드 장애 시 보조 노드로 자동 전환하는 과정</td><td>고가용성, 장애 복구</td><td>무중단 서비스 구현</td></tr><tr><td>운영</td><td>스플릿 브레인 (Split Brain)</td><td>네트워크 분할로 여러 마스터가 동시 존재하는 상황</td><td>네트워크 분할, 일관성</td><td>분산 시스템의 주요 위험</td></tr><tr><td>운영</td><td>복제 팩터 (Repl Factor)</td><td>데이터를 복제할 노드 수</td><td>내구성, 비용</td><td>안정성과 비용의 균형점</td></tr><tr><td>고급</td><td>CAP 정리</td><td>Consistency, Availability, Partition tolerance 중 최대 2개만 보장 가능</td><td>분산 시스템 이론</td><td>아키텍처 설계 원칙</td></tr><tr><td>고급</td><td>CRDT</td><td>Conflict-free Replicated Data Types, 충돌 없는 복제 데이터 타입</td><td>자동 병합, 다중 마스터</td><td>협업 도구, 오프라인 앱</td></tr><tr><td>고급</td><td>이벤트 소싱 (Event Sourcing)</td><td>상태 대신 이벤트를 저장하여 상태를 재구성하는 패턴</td><td>CQRS, 감사 추적</td><td>금융, 전자상거래 시스템</td></tr></tbody></table><h2 id=참고-및-출처-1>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-1>#</a></h2><ul><li><a href=https://dev.mysql.com/doc/refman/8.0/en/replication.html>MySQL 8.0 Replication Documentation</a></li><li><a href=https://www.postgresql.org/docs/current/warm-standby.html>PostgreSQL Streaming Replication Guide</a></li><li><a href=https://kafka.apache.org/documentation/>Apache Kafka Documentation</a></li><li><a href=https://research.google/pubs/pub39966/>Google Spanner: Google&rsquo;s Globally-Distributed Database</a></li><li><a href=https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.MultiAZ.html>AWS RDS Multi-AZ Architecture</a></li><li><a href=https://www.infoq.com/articles/cap-twelve-years-later-how-the-rules-have-changed/>CAP Twelve Years Later: How the &ldquo;Rules&rdquo; Have Changed</a></li><li><a href=https://dataintensive.net/>Designing Data-Intensive Applications - Martin Kleppmann</a></li><li><a href=https://www.oreilly.com/library/view/high-performance-mysql/9781492080503/>High Performance MySQL - Baron Schwartz</a></li><li><a href=https://www.pearson.com/store/p/distributed-systems-concepts-and-design/P100000172063>Distributed Systems: Concepts and Design - George Coulouris</a></li><li><a href=https://netflixtechblog.com/tagged/data-infrastructure>Netflix Technology Blog - Data Infrastructure</a></li></ul><p>복제(Replication)에 대한 종합적인 기술 문서 작성을 완료했습니다.</p><p><strong>문서 구성 요약:</strong></p><ul><li><strong>Phase 1-2</strong>: 기초 개념과 동작 원리</li><li><strong>Phase 3</strong>: 장단점 및 트레이드오프 분석</li><li><strong>Phase 4</strong>: 구현 방법과 기술 분류</li><li><strong>Phase 5</strong>: 실무 적용 사례 (MySQL 실습, Netflix 사례)</li><li><strong>Phase 6</strong>: 운영 최적화 (모니터링, 보안, 성능, 트러블슈팅)</li><li><strong>Phase 7</strong>: 최신 트렌드와 미래 전망</li><li><strong>학습 가이드</strong>: 단계별 로드맵과 체크리스트</li></ul><p>이 문서는 <strong>초심자부터 전문가까지</strong> 활용할 수 있도록 구성했으며, 특히 다음과 같은 실무적 가치를 제공합니다:</p><p>✅ <strong>즉시 실습 가능한 Docker 기반 MySQL 복제 환경</strong>
✅ <strong>Netflix 사례를 통한 대규모 글로벌 복제 아키텍처 이해</strong><br>✅ <strong>Python 기반 모니터링 및 자동 복구 시스템 구현</strong>
✅ <strong>클라우드 네이티브와 엣지 컴퓨팅 시대의 복제 전략</strong>
✅ <strong>머신러닝과 AI 기술이 접목된 차세대 복제 시스템 전망</strong></p><h2 id=복제-기술-학습이나-도입을-계획-중이시라면-제시된-학습-로드맵과-체크리스트를-따라-단계적으로-접근하시기-바랍니다-추가로-궁금한-특정-영역이나-심화-내용이-있으시면-언제든-말씀해-주세요>복제 기술 학습이나 도입을 계획 중이시라면, 제시된 학습 로드맵과 체크리스트를 따라 단계적으로 접근하시기 바랍니다. 추가로 궁금한 특정 영역이나 심화 내용이 있으시면 언제든 말씀해 주세요.<a hidden class=anchor aria-hidden=true href=#복제-기술-학습이나-도입을-계획-중이시라면-제시된-학습-로드맵과-체크리스트를-따라-단계적으로-접근하시기-바랍니다-추가로-궁금한-특정-영역이나-심화-내용이-있으시면-언제든-말씀해-주세요>#</a></h2><h1 id=replication-복제>Replication (복제)<a hidden class=anchor aria-hidden=true href=#replication-복제>#</a></h1><blockquote><p>Data & Database Systems > Data Architecture > Scalability & Distribution</p></blockquote><hr><h2 id=1단계-기본-분석-및-검증-2>1단계: 기본 분석 및 검증<a hidden class=anchor aria-hidden=true href=#1단계-기본-분석-및-검증-2>#</a></h2><p><strong>주제 유형 식별</strong>: C형(아키텍처/패턴형) + 보조로 E형(플랫폼/시스템형), I형(성능/최적화형)</p><p><strong>복잡도 평가</strong>: Level 3 (고급) — 일관성 모델, 합의(Consensus), 지연/가용성/비용 트레이드오프를 포함</p><p><strong>대표 태그</strong>: Replication, Consistency, Consensus, Geo-Distribution, CDC</p><p><strong>분류 체계 검증</strong></p><ul><li>&ldquo;## 5. 주제 분류&rdquo; → <em>Data & Database Systems > Data Architecture > Scalability & Distribution</em></li><li>&ldquo;## 6. 현재 분류 구조&rdquo; 내 동일 경로 존재 ✅</li></ul><p><strong>주제 분류 적합성 체크리스트</strong></p><ul><li><input checked disabled type=checkbox> 현재 분류 구조(## 6)에 해당 위치가 존재</li><li><input checked disabled type=checkbox> 상위/하위 카테고리 배치가 논리적으로 타당</li><li><input checked disabled type=checkbox> 중복, 누락, 경계 모호성 최소</li><li><input checked disabled type=checkbox> 실무자 검색/재사용 관점에서 탐색 용이</li><li><input checked disabled type=checkbox> 유사 주제와의 일관성(Consistency, Sharding 등) 확보</li><li><input checked disabled type=checkbox> 크로스 도메인 연결성(분산 시스템, 네트워킹, 보안) 반영</li></ul><p><strong>개선 제안</strong></p><ul><li><em>Data Architecture > Scalability & Distribution</em> 하위에 <strong>Replication</strong>를 1급 항목으로 명시하고, 형제 항목으로 <strong>Sharding(샤딩)</strong>, <strong>Caching(캐싱)</strong>, <strong>Consistency Models(일관성 모델)</strong>, **CDC(Change Data Capture)**를 병렬 배치 제안.</li><li><em>System Architecture and Design > Distributed Systems</em> 의 <strong>Data Consistency</strong>와 교차 참조 링크 권장.</li></ul><p><strong>핵심 요약(≤250자)</strong></p><ul><li>Replication(복제)은 데이터를 여러 노드/리전에 동일/유사 상태로 유지해 가용성(Availability)·내결함성(Fault Tolerance)·읽기 확장성(Read Scalability)을 확보하는 기술이다. 동기/비동기, 토폴로지, 일관성 모델 선택이 품질을 좌우한다.</li></ul><p><strong>전체 개요(≤400자)</strong></p><ul><li>복제는 단일 장애점 제거와 지리적 근접성 개선을 위해 필수다. 구현은 물리/논리/문장(statement) 단위, 단일 리더/다중 리더/리더리스 토폴로지, 동기/반동기/비동기 타이밍, 합의/정족수(Quorum) 메커니즘 등으로 구분된다. 핵심은 RPO/RTO, 지연(latency), 비용, 운영 복잡도의 균형이며, CAP/PACELC 관점에서 설계 결정을 기록해야 한다.</li></ul><hr><h2 id=2단계-개념-체계화-및-검증-2>2단계: 개념 체계화 및 검증<a hidden class=anchor aria-hidden=true href=#2단계-개념-체계화-및-검증-2>#</a></h2><h3 id=21-핵심-개념-맵>2.1 핵심 개념 맵<a hidden class=anchor aria-hidden=true href=#21-핵심-개념-맵>#</a></h3><ul><li><strong>토폴로지(Topology)</strong>: 단일 리더(Single-Leader) / 다중 리더(Multi-Leader) / 리더리스(Leaderless)</li><li><strong>타이밍(Timing)</strong>: 동기(Synchronous) / 반동기(Semi-synchronous) / 비동기(Asynchronous)</li><li><strong>단위(Granularity)</strong>: 물리(Physical, 블록/WAL) / 논리(Logical, Row/Document/Change Event) / 문장(Statement)</li><li><strong>일관성(Consistency)</strong>: 강한(Linearizability) / 약한(Eventual) / 정렬 가능(Sequential) / 트랜잭션적(Serializability, Snapshot)</li><li><strong>합의(Consensus)/정족수(Quorum)</strong>: Paxos/Raft vs Dynamo-style Quorum(Read/Write Quorum)</li><li><strong>충돌 처리(Conflict Handling)</strong>: LWW, 버전벡터(Vector Clock), CRDT(Conflict-free Replicated Data Type), 앱 레벨 병합</li><li><strong>복구/스냅샷</strong>: 초기 스냅샷(bootstrap), 증분 적용, 체크섬 검증</li><li><strong>RPO/RTO</strong>: 데이터 손실 허용치 vs 복구 시간 목표</li></ul><h3 id=22-실무-연관성>2.2 실무 연관성<a hidden class=anchor aria-hidden=true href=#22-실무-연관성>#</a></h3><ul><li><strong>읽기 확장성</strong>: 다수 Replica에서 Read 분산; 지연 최소화(리전 근접)</li><li><strong>내결함성/DR</strong>: 리더 장애시 자동 승격(Failover), 리전 격리 시 RPO/RTO 보장</li><li><strong>데이터 통합/CDC</strong>: 로그 기반 CDC로 데이터 레이크/스트림 처리 연계</li><li><strong>규정 준수/거버넌스</strong>: 데이터 주권(Residency), 암호화, 감사 추적</li></ul><hr><h2 id=3단계-phase별-상세-조사-및-검증-1>3단계: Phase별 상세 조사 및 검증<a hidden class=anchor aria-hidden=true href=#3단계-phase별-상세-조사-및-검증-1>#</a></h2><h3 id=phase-1-기초-조사-및-개념-정립-2>Phase 1: 기초 조사 및 개념 정립<a hidden class=anchor aria-hidden=true href=#phase-1-기초-조사-및-개념-정립-2>#</a></h3><p><strong>1.1 개념 정의</strong>: 복제는 동일 데이터의 사본을 여러 노드에 유지하는 기술로, 읽기 확장성·가용성·지속성을 제공.</p><p><strong>1.2 등장 배경</strong>: 단일 장비 한계를 넘는 고가용/확장성 요구, 지리적 분산 사용자 대응, 장애 및 유지보수 시 서비스 지속 필요.</p><p><strong>1.3 해결하는 문제/핵심 목적</strong>: 단일 장애점 제거, 읽기 처리량 증가, 지연 단축, DR(재해 복구) 확보.</p><p><strong>1.4 전제 조건/요구사항</strong>: 네트워크 신뢰성/대역폭, 시계 동기화 수준, 스토리지 IOPS, 장애/격리 가정, 일관성 요구.</p><p><strong>1.5 핵심 특징/차별점</strong>: 토폴로지·타이밍·일관성 조합으로 품질 속성(가용성, 일관성, 지연, 비용)이 달라짐.</p><p><strong>1.6 설계 동기 및 품질 속성(C형 특화)</strong>:</p><ul><li>가용성(Availability), 내결함성(Fault Tolerance), 성능(Throughput/Latency), 데이터 무결성(Integrity), 운영성(Operability), 비용.</li></ul><p><strong>1.7 역사적 맥락(심화)</strong>: 마스터-슬레이브 → MySQL GTID/세미싱크, PostgreSQL 스트리밍/논리복제 → Dynamo 스타일 리더리스 → Raft/Paxos 합의형 → Spanner(정확한 시간 기반)·Calvin(결정적 순서) → CRDT 기반 엣지.</p><p><strong>1.8 산업 채택(심화)</strong>: RDBMS(주: MySQL, PostgreSQL), NoSQL(Cassandra, DynamoDB, MongoDB), NewSQL(Spanner, CockroachDB) 전반 채택.</p><hr><h3 id=phase-2-핵심-원리-및-이론적-기반-2>Phase 2: 핵심 원리 및 이론적 기반<a hidden class=anchor aria-hidden=true href=#phase-2-핵심-원리-및-이론적-기반-2>#</a></h3><p><strong>2.1 원칙/철학</strong>: 장애는 정상, 네트워크는 신뢰할 수 없음, 지리적 지연은 물리 법칙, 일관성 수준은 비즈니스 의사결정.</p><p><strong>2.2 기본 메커니즘</strong></p><pre class=mermaid>flowchart LR
  A[Leader/Coordinator] -- Write --&gt; L[WAL/Op Log]
  L -- Ship/Stream --&gt; R1[Replica 1]
  L -- Ship/Stream --&gt; R2[Replica 2]
  R1 -- Apply --&gt; S1[Storage]
  R2 -- Apply --&gt; S2[Storage]
</pre><ul><li>리더가 WAL/변경로그 생성 → 전파 → Replica 적용. 동기 모드에서는 과반 또는 지정 ACK 후 커밋.</li></ul><p><strong>2.3 데이터/제어 흐름(생명주기)</strong>: Snapshot(Seed) → Change Stream(점증) → Backpressure/Queue → Apply → Checksum/Repair → Failover/Failback.</p><p><strong>2.4 구성요소</strong>: 리더/팔로워, 로그(순서/오프셋), 전송 채널(Proto/TLS), 큐 및 재시도, 적용 스레드, 모니터링/알람.</p><p><strong>2.5 패턴 구조 & 품질 속성 메커니즘(C형 특화)</strong></p><ul><li><strong>합의 기반 강한 일관성</strong>: Paxos/Raft(총순서 로그) → 선형화</li><li><strong>정족수 기반 가용성 우선</strong>: N,R,W 파라미터로 가용성/지연 제어</li><li><strong>시간 기반 순서</strong>: TrueTime/Hybrid Logical Clock(HLC)로 직렬화 보장</li></ul><p><strong>2.6 고급 이론(심화)</strong>: CAP, PACELC, 선형화 vs 직렬화 가능성, 회복 가능성(Recoverability), 비동기 지연과 RPO의 함수 관계.</p><p><strong>2.7 상호작용(심화)</strong>: 샤딩과의 결합(Shard-local Leader), 트랜잭션/분산락, 스키마 변경과 복제.</p><hr><h3 id=phase-3-특성-분석-및-평가-1>Phase 3: 특성 분석 및 평가<a hidden class=anchor aria-hidden=true href=#phase-3-특성-분석-및-평가-1>#</a></h3><p><strong>3.1 주요 장점 및 이점</strong></p><table><thead><tr><th>장점</th><th>상세 설명</th><th>기술 근거</th><th>적용 상황</th><th>실무적 가치</th></tr></thead><tbody><tr><td>가용성 향상</td><td>노드/리전 장애 시 서비스 지속</td><td>다중 사본, 자동 페일오버</td><td>24x7 서비스</td><td>다운타임 비용 절감</td></tr><tr><td>읽기 확장성</td><td>Read 트래픽을 Replica에 분산</td><td>리더-팔로워 아키텍처</td><td>리드 헤비 워크로드</td><td>성능/비용 효율</td></tr><tr><td>지연 최적화</td><td>사용자 근접 리전에서 읽기</td><td>Geo-Replica</td><td>글로벌 사용자</td><td>사용자 경험 개선</td></tr><tr><td>유지보수 용이</td><td>롤링 업그레이드/백업 분산</td><td>Replica 부하 분산</td><td>무중단 운영</td><td>변경 리스크 감소</td></tr><tr><td>데이터 통합</td><td>CDC로 분석/서드파티 연계</td><td>로그 기반 이벤트</td><td>데이터 레이크</td><td>데이터 활용성 확대</td></tr></tbody></table><p><strong>3.2 단점 및 제약사항</strong></p><p><em>단점</em></p><table><thead><tr><th>단점</th><th>상세 설명</th><th>원인</th><th>실무에서 발생되는 문제</th><th>완화/해결 방안</th><th>대안 기술</th></tr></thead><tbody><tr><td>쓰기 지연 증가</td><td>동기/합의 시 왕복 지연</td><td>네트워크 RTT/합의</td><td>Tail latency 상승</td><td>반동기/지역 과반 구성</td><td>캐싱, 파티셔닝</td></tr><tr><td>충돌/분기</td><td>다중 리더/리더리스</td><td>동시 업데이트</td><td>데이터 불일치</td><td>CRDT/어플리케이션 머지</td><td>단일 리더</td></tr><tr><td>운영 복잡성</td><td>모니터링/페일오버/스냅샷</td><td>구성 분산</td><td>휴먼 에러</td><td>자동화/Runbook</td><td>매니지드 서비스</td></tr><tr><td>데이터 손실 위험</td><td>비동기 시 RPO>0</td><td>전파 지연</td><td>장애 시 트랜잭션 유실</td><td>세미싱크/동기</td><td>지역간 동기 합의</td></tr><tr><td>비용 증가</td><td>다수 사본 저장/전송</td><td>스토리지/네트워크</td><td>OPEX 상승</td><td>티어링/압축</td><td>압축/증분</td></tr></tbody></table><p><em>제약사항</em></p><table><thead><tr><th>제약사항</th><th>상세 설명</th><th>원인</th><th>영향</th><th>완화/해결 방안</th><th>대안 기술</th></tr></thead><tbody><tr><td>데이터 주권</td><td>특정 리전에 데이터 상주 요구</td><td>규제</td><td>리전 설계 제한</td><td>Geo-파티셔닝</td><td>하이브리드 구성</td></tr><tr><td>네트워크 품질</td><td>패킷 손실/지연 가변</td><td>WAN 특성</td><td>로그 적체/지연</td><td>재시도/백프레셔</td><td>전용 회선</td></tr><tr><td>시계 동기</td><td>시간 정합 필요</td><td>분산 시계</td><td>쓰기 순서 모호</td><td>HLC/TrueTime</td><td>로컬 합의</td></tr></tbody></table><p><strong>3.3 트레이드오프 분석</strong></p><ul><li><strong>CAP</strong>: 분할(Partition) 상황에서 C vs A 선택.</li><li><strong>PACELC</strong>: 분할 시(P) A/C, 그렇지 않을 때(E) 지연(L) vs 일관성(C) 선택.</li><li><strong>R/W Quorum</strong>: R+W>N → 강한 일관성, 그러나 지연/가용성 비용.</li></ul><p><strong>3.4 적용 적합성</strong></p><ul><li>RPO=0, RTO&lt;초단위: 합의 기반 동기, 지역 과반.</li><li>글로벌 읽기 지연 최소: 비동기 Geo-Replica + 읽기 전용.</li><li>충돌 많은 멀티-리더: CRDT/업무 규칙 머지 가능할 때만.</li></ul><p><strong>3.6 경쟁 기술 상세 비교(심화)</strong>:</p><ul><li><strong>단일 리더 vs 리더리스</strong>: 간결한 트랜잭션 vs 고가용/스케일.</li><li><strong>물리 vs 논리</strong>: 성능/간결성 vs 이기종/선택적 복제.</li></ul><p><strong>3.7 ROI/TCO(심화)</strong>: 다운타임 비용 대비 사본 수/전송비용 최적점 도출.</p><hr><h3 id=phase-4-구현-방법-및-분류-1>Phase 4: 구현 방법 및 분류<a hidden class=anchor aria-hidden=true href=#phase-4-구현-방법-및-분류-1>#</a></h3><p><strong>4.1 구현 방법/기법</strong></p><ul><li><strong>물리 복제(Physical, WAL/블록)</strong>: 고성능, 동일 엔진 의존.</li><li><strong>논리 복제(Logical, Row/Doc/Op)</strong>: 이기종 간, 필터/변환 용이.</li><li><strong>문장 복제(Statement)</strong>: 단순하나 결정적이지 않은 문장 위험.</li><li><strong>로그 배송(Log Shipping)/스트리밍(Streaming)</strong>: 배치 vs 실시간.</li><li><strong>합의 기반(Consensus-based)</strong>: Paxos/Raft로 커밋 경로 보장.</li><li><strong>정족수 기반(Quorum-based)</strong>: R/W 파라미터로 일관성 조절.</li></ul><p><strong>4.2 유형별 분류 체계</strong></p><table><thead><tr><th>구분</th><th>옵션</th><th>설명</th><th>대표 시스템</th></tr></thead><tbody><tr><td>토폴로지</td><td>단일 리더</td><td>하나의 쓰기 리더</td><td>PostgreSQL, MongoDB(Replica Set)</td></tr><tr><td></td><td>다중 리더</td><td>각 리전 로컬 쓰기, 충돌 관리</td><td>MySQL MGR, Active-Active</td></tr><tr><td></td><td>리더리스</td><td>정족수 쓰기/읽기</td><td>Cassandra, DynamoDB</td></tr><tr><td>타이밍</td><td>동기</td><td>커밋 전 과반/지정 ACK</td><td>Spanner, Raft 기반</td></tr><tr><td></td><td>반동기</td><td>최소 한 Replica ACK</td><td>MySQL Semi-sync</td></tr><tr><td></td><td>비동기</td><td>리더 커밋 후 전파</td><td>대부분 기본값</td></tr><tr><td>단위</td><td>물리</td><td>WAL/블록 레벨</td><td>PostgreSQL Physical</td></tr><tr><td></td><td>논리</td><td>Row/Doc/Op</td><td>Postgres Logical, Debezium</td></tr><tr><td></td><td>문장</td><td>SQL 재실행</td><td>구형 엔진 일부</td></tr><tr><td>충돌 해결</td><td>LWW/버전벡터/CRDT</td><td>자동/결정적/앱 병합</td><td>Dynamo 계열/CRDT DB</td></tr></tbody></table><p><strong>4.3 도구/라이브러리 생태계(개요)</strong></p><ul><li><strong>RDBMS</strong>: PostgreSQL(streaming/logical), MySQL(GTID, Group Replication), MariaDB, SQL Server(AG), Oracle Data Guard.</li><li><strong>NoSQL/NewSQL</strong>: Cassandra(Quorum), MongoDB(Replica Set), DynamoDB(Global Table), Spanner/CockroachDB(Raft+HLC/TrueTime).</li><li><strong>CDC/파이프라인</strong>: Debezium, Kafka Connect, Maxwell, GoldenGate.</li><li><strong>오케스트레이션/운영</strong>: Patroni/Zookeeper/Etcd, Orchestrator(MySQL), Stolon, Kubernetes Operators.</li></ul><p><strong>4.4 표준/규격 준수사항</strong></p><ul><li>전송 <strong>TLS</strong>, 저장 <strong>암호화</strong>, 감사 로깅.</li><li>스키마 변경 <strong>전방/후방 호환</strong>(Backward/Forward Compatibility).</li><li>데이터 주권/전송 규정(GDPR 등)에 따른 리전 경계.</li></ul><p><strong>4.6 안티패턴(심화)</strong></p><ul><li>읽기 전용 Replica에 쓰기 라우팅, 장거리 동기 커밋으로 P99 급증, DDL과 복제 채널의 충돌 관리 미흡.</li></ul><p><strong>4.7 마이그레이션 전략(심화)</strong></p><ul><li>Dual-Write 금지 → <strong>원천 쓰기 + CDC</strong>로 타겟 동기화, 점진적 트래픽 전환(Shadow/Canary/Blue-Green).</li></ul><hr><h3 id=phase-5-실무-적용-및-사례-1>Phase 5: 실무 적용 및 사례<a hidden class=anchor aria-hidden=true href=#phase-5-실무-적용-및-사례-1>#</a></h3><p><strong>5.1 실습 예제 및 코드 구현</strong></p><h5 id=실습-예제-postgresql-스트리밍논리-복제-기초>실습 예제: PostgreSQL 스트리밍/논리 복제 기초<a hidden class=anchor aria-hidden=true href=#실습-예제-postgresql-스트리밍논리-복제-기초>#</a></h5><h6 id=목적-2>목적<a hidden class=anchor aria-hidden=true href=#목적-2>#</a></h6><ul><li>리더-팔로워 구성, 복제 지연 관측, 논리 복제 슬롯 사용을 익힌다.</li></ul><h6 id=사전-요구사항-2>사전 요구사항<a hidden class=anchor aria-hidden=true href=#사전-요구사항-2>#</a></h6><ul><li>PostgreSQL ≥ 14, psql, 리눅스 2대(또는 컨테이너), 방화벽 허용, TLS(Optional)</li></ul><h6 id=단계별-구현-2>단계별 구현<a hidden class=anchor aria-hidden=true href=#단계별-구현-2>#</a></h6><ol><li><strong>리더 설정</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-40-1><a class=lnlinks href=#hl-40-1>1</a>
</span><span class=lnt id=hl-40-2><a class=lnlinks href=#hl-40-2>2</a>
</span><span class=lnt id=hl-40-3><a class=lnlinks href=#hl-40-3>3</a>
</span><span class=lnt id=hl-40-4><a class=lnlinks href=#hl-40-4>4</a>
</span><span class=lnt id=hl-40-5><a class=lnlinks href=#hl-40-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># postgresql.conf</span>
</span></span><span class=line><span class=cl><span class=nv>wal_level</span> <span class=o>=</span> replica
</span></span><span class=line><span class=cl><span class=nv>max_wal_senders</span> <span class=o>=</span> <span class=m>10</span>
</span></span><span class=line><span class=cl><span class=nv>wal_keep_size</span> <span class=o>=</span> <span class=s1>&#39;2GB&#39;</span>
</span></span><span class=line><span class=cl><span class=nv>hot_standby</span> <span class=o>=</span> on
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-41-1><a class=lnlinks href=#hl-41-1>1</a>
</span><span class=lnt id=hl-41-2><a class=lnlinks href=#hl-41-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># pg_hba.conf (Replica IP 허용)</span>
</span></span><span class=line><span class=cl>host replication repl_user 10.0.0.0/24 md5
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-42-1><a class=lnlinks href=#hl-42-1>1</a>
</span><span class=lnt id=hl-42-2><a class=lnlinks href=#hl-42-2>2</a>
</span><span class=lnt id=hl-42-3><a class=lnlinks href=#hl-42-3>3</a>
</span><span class=lnt id=hl-42-4><a class=lnlinks href=#hl-42-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 계정/베이스라인</span>
</span></span><span class=line><span class=cl>createuser -P repl_user
</span></span><span class=line><span class=cl>psql -c <span class=s2>&#34;ALTER ROLE repl_user REPLICATION LOGIN;&#34;</span>
</span></span><span class=line><span class=cl>psql -c <span class=s2>&#34;SELECT pg_create_physical_replication_slot(&#39;slot1&#39;);&#34;</span>
</span></span></code></pre></td></tr></table></div></div><ol start=2><li><strong>Replica 부트스트랩</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-43-1><a class=lnlinks href=#hl-43-1>1</a>
</span><span class=lnt id=hl-43-2><a class=lnlinks href=#hl-43-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pg_basebackup -h LEADER -D <span class=nv>$PGDATA</span> -U repl_user -Fp -Xs -P -R
</span></span><span class=line><span class=cl><span class=c1># recovery.conf 기능은 12+에서 standby.signal로 대체됨</span>
</span></span></code></pre></td></tr></table></div></div><ol start=3><li><strong>상태 확인</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-44-1><a class=lnlinks href=#hl-44-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>psql -c <span class=s2>&#34;SELECT application_name, state, sync_state, write_lag, flush_lag, replay_lag FROM pg_stat_replication;&#34;</span>
</span></span></code></pre></td></tr></table></div></div><ol start=4><li><strong>논리 복제(선택)</strong></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-45-1><a class=lnlinks href=#hl-45-1>1</a>
</span><span class=lnt id=hl-45-2><a class=lnlinks href=#hl-45-2>2</a>
</span><span class=lnt id=hl-45-3><a class=lnlinks href=#hl-45-3>3</a>
</span><span class=lnt id=hl-45-4><a class=lnlinks href=#hl-45-4>4</a>
</span><span class=lnt id=hl-45-5><a class=lnlinks href=#hl-45-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>-- 리더
</span></span><span class=line><span class=cl>ALTER SYSTEM SET <span class=nv>wal_level</span> <span class=o>=</span> logical<span class=p>;</span> SELECT pg_reload_conf<span class=o>()</span><span class=p>;</span>
</span></span><span class=line><span class=cl>CREATE PUBLICATION pub1 FOR TABLE public.orders<span class=p>;</span>
</span></span><span class=line><span class=cl>-- Replica<span class=o>(</span>구독자<span class=o>)</span>
</span></span><span class=line><span class=cl>CREATE SUBSCRIPTION sub1 CONNECTION <span class=s1>&#39;host=LEADER dbname=app user=rep&#39;</span> PUBLICATION pub1<span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=실행-결과-2>실행 결과<a hidden class=anchor aria-hidden=true href=#실행-결과-2>#</a></h6><ul><li><code>pg_stat_replication</code>에서 지연 메트릭 관측, 구독자가 행 변경을 수신.</li></ul><h6 id=추가-실험-2>추가 실험<a hidden class=anchor aria-hidden=true href=#추가-실험-2>#</a></h6><ul><li>WAN 지연 모의 → <code>tc netem</code>으로 RTT 증가 시 지연/처리량 영향 측정.</li></ul><hr><h5 id=실습-예제-python으로-rw-경로-검증-및-지연-측정>실습 예제: Python으로 R/W 경로 검증 및 지연 측정<a hidden class=anchor aria-hidden=true href=#실습-예제-python으로-rw-경로-검증-및-지연-측정>#</a></h5><h6 id=목적-3>목적<a hidden class=anchor aria-hidden=true href=#목적-3>#</a></h6><ul><li>쓰기 후 일관성(Read-After-Write)과 Replica 지연을 애플리케이션 레벨에서 감지.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-46-1><a class=lnlinks href=#hl-46-1> 1</a>
</span><span class=lnt id=hl-46-2><a class=lnlinks href=#hl-46-2> 2</a>
</span><span class=lnt id=hl-46-3><a class=lnlinks href=#hl-46-3> 3</a>
</span><span class=lnt id=hl-46-4><a class=lnlinks href=#hl-46-4> 4</a>
</span><span class=lnt id=hl-46-5><a class=lnlinks href=#hl-46-5> 5</a>
</span><span class=lnt id=hl-46-6><a class=lnlinks href=#hl-46-6> 6</a>
</span><span class=lnt id=hl-46-7><a class=lnlinks href=#hl-46-7> 7</a>
</span><span class=lnt id=hl-46-8><a class=lnlinks href=#hl-46-8> 8</a>
</span><span class=lnt id=hl-46-9><a class=lnlinks href=#hl-46-9> 9</a>
</span><span class=lnt id=hl-46-10><a class=lnlinks href=#hl-46-10>10</a>
</span><span class=lnt id=hl-46-11><a class=lnlinks href=#hl-46-11>11</a>
</span><span class=lnt id=hl-46-12><a class=lnlinks href=#hl-46-12>12</a>
</span><span class=lnt id=hl-46-13><a class=lnlinks href=#hl-46-13>13</a>
</span><span class=lnt id=hl-46-14><a class=lnlinks href=#hl-46-14>14</a>
</span><span class=lnt id=hl-46-15><a class=lnlinks href=#hl-46-15>15</a>
</span><span class=lnt id=hl-46-16><a class=lnlinks href=#hl-46-16>16</a>
</span><span class=lnt id=hl-46-17><a class=lnlinks href=#hl-46-17>17</a>
</span><span class=lnt id=hl-46-18><a class=lnlinks href=#hl-46-18>18</a>
</span><span class=lnt id=hl-46-19><a class=lnlinks href=#hl-46-19>19</a>
</span><span class=lnt id=hl-46-20><a class=lnlinks href=#hl-46-20>20</a>
</span><span class=lnt id=hl-46-21><a class=lnlinks href=#hl-46-21>21</a>
</span><span class=lnt id=hl-46-22><a class=lnlinks href=#hl-46-22>22</a>
</span><span class=lnt id=hl-46-23><a class=lnlinks href=#hl-46-23>23</a>
</span><span class=lnt id=hl-46-24><a class=lnlinks href=#hl-46-24>24</a>
</span><span class=lnt id=hl-46-25><a class=lnlinks href=#hl-46-25>25</a>
</span><span class=lnt id=hl-46-26><a class=lnlinks href=#hl-46-26>26</a>
</span><span class=lnt id=hl-46-27><a class=lnlinks href=#hl-46-27>27</a>
</span><span class=lnt id=hl-46-28><a class=lnlinks href=#hl-46-28>28</a>
</span><span class=lnt id=hl-46-29><a class=lnlinks href=#hl-46-29>29</a>
</span><span class=lnt id=hl-46-30><a class=lnlinks href=#hl-46-30>30</a>
</span><span class=lnt id=hl-46-31><a class=lnlinks href=#hl-46-31>31</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>uuid</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>psycopg2</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>psycopg2.extras</span> <span class=kn>import</span> <span class=n>RealDictCursor</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>LEADER_DSN</span> <span class=o>=</span> <span class=s2>&#34;host=leader dbname=app user=app password=***&#34;</span>
</span></span><span class=line><span class=cl><span class=n>REPLICA_DSN</span> <span class=o>=</span> <span class=s2>&#34;host=replica dbname=app user=readonly password=***&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>write_order</span><span class=p>(</span><span class=n>cur</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>order_id</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=n>cur</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;INSERT INTO orders(id, amount, created_at) VALUES (</span><span class=si>%s</span><span class=s2>, </span><span class=si>%s</span><span class=s2>, now())&#34;</span><span class=p>,</span> <span class=p>(</span><span class=n>order_id</span><span class=p>,</span> <span class=mi>100</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>order_id</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>read_on_replica</span><span class=p>(</span><span class=n>order_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=n>psycopg2</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=n>REPLICA_DSN</span><span class=p>)</span> <span class=k>as</span> <span class=n>c</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=n>c</span><span class=o>.</span><span class=n>cursor</span><span class=p>(</span><span class=n>cursor_factory</span><span class=o>=</span><span class=n>RealDictCursor</span><span class=p>)</span> <span class=k>as</span> <span class=n>cur</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>cur</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;SELECT id FROM orders WHERE id=</span><span class=si>%s</span><span class=s2>&#34;</span><span class=p>,</span> <span class=p>(</span><span class=n>order_id</span><span class=p>,))</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>cur</span><span class=o>.</span><span class=n>fetchone</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=n>psycopg2</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=n>LEADER_DSN</span><span class=p>)</span> <span class=k>as</span> <span class=n>c</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>c</span><span class=o>.</span><span class=n>autocommit</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=n>c</span><span class=o>.</span><span class=n>cursor</span><span class=p>()</span> <span class=k>as</span> <span class=n>cur</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>oid</span> <span class=o>=</span> <span class=n>write_order</span><span class=p>(</span><span class=n>cur</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>c</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>  <span class=c1># 커밋 이후 복제 전파 시작</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start</span> <span class=o>&lt;</span> <span class=mi>5</span><span class=p>:</span>  <span class=c1># 최대 5초 대기</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>read_on_replica</span><span class=p>(</span><span class=n>oid</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span>
</span></span><span class=line><span class=cl>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;replication lag observed: </span><span class=si>{</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start</span><span class=si>:</span><span class=s2>.3f</span><span class=si>}</span><span class=s2>s&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><hr><p><strong>5.2 실제 도입 사례 분석</strong></p><h5 id=실제-도입-사례-spanner-스타일-합의-기반-동기-복제개념화>실제 도입 사례: Spanner 스타일 합의 기반 동기 복제(개념화)<a hidden class=anchor aria-hidden=true href=#실제-도입-사례-spanner-스타일-합의-기반-동기-복제개념화>#</a></h5><h6 id=배경목표>배경/목표<a hidden class=anchor aria-hidden=true href=#배경목표>#</a></h6><ul><li>글로벌 트랜잭션, RPO=0, 선형화 읽기.</li></ul><h6 id=구현-아키텍처-2>구현 아키텍처<a hidden class=anchor aria-hidden=true href=#구현-아키텍처-2>#</a></h6><pre class=mermaid>graph TB
  subgraph RegionA
    A1[Replica A1]
    A2[Replica A2]
  end
  subgraph RegionB
    B1[Replica B1]
    B2[Replica B2]
  end
  Client--&gt;Leader
  Leader[Per-Shard Leader]--&gt;A1
  Leader--&gt;B1
  A1--&gt;A2
  B1--&gt;B2
</pre><ul><li>각 샤드는 지역 과반으로 Raft 합의, <strong>TrueTime/HLC</strong>로 직렬화 경계 관리.</li></ul><h6 id=핵심-구현-코드의사>핵심 구현 코드(의사)<a hidden class=anchor aria-hidden=true href=#핵심-구현-코드의사>#</a></h6><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-48-1><a class=lnlinks href=#hl-48-1>1</a>
</span><span class=lnt id=hl-48-2><a class=lnlinks href=#hl-48-2>2</a>
</span><span class=lnt id=hl-48-3><a class=lnlinks href=#hl-48-3>3</a>
</span><span class=lnt id=hl-48-4><a class=lnlinks href=#hl-48-4>4</a>
</span><span class=lnt id=hl-48-5><a class=lnlinks href=#hl-48-5>5</a>
</span><span class=lnt id=hl-48-6><a class=lnlinks href=#hl-48-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 트랜잭션 타임스탬프를 HLC로 할당하고 커밋 전 과반 복제 확인</span>
</span></span><span class=line><span class=cl><span class=n>commit_ts</span> <span class=o>=</span> <span class=n>hlc</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>log</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>commit_ts</span><span class=p>,</span> <span class=n>tx_ops</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>acks</span> <span class=o>=</span> <span class=n>replicate_to_quorum</span><span class=p>(</span><span class=n>tx_ops</span><span class=p>,</span> <span class=n>commit_ts</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>assert</span> <span class=n>acks</span> <span class=o>&gt;=</span> <span class=n>quorum</span>
</span></span><span class=line><span class=cl><span class=n>apply</span><span class=p>(</span><span class=n>tx_ops</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=성과결과>성과/결과<a hidden class=anchor aria-hidden=true href=#성과결과>#</a></h6><ul><li>P99 쓰기 지연은 지역 합의에 한정, RPO=0, 강한 읽기 제공. 비용/복잡성 증가.</li></ul><h6 id=교훈>교훈<a hidden class=anchor aria-hidden=true href=#교훈>#</a></h6><ul><li>글로벌 동기 합의는 <strong>시간 인프라</strong>와 <strong>토폴로지 설계</strong>가 핵심. 스키마/트래픽 파티셔닝이 필수.</li></ul><hr><p><strong>5.3 통합 및 연계 기술</strong></p><ul><li>CDC → Kafka → 데이터 레이크/웨어하우스(Snowflake/BigQuery 등)</li><li>서비스 메시/트래픽 라우팅 → 리더/리드온리 엔드포인트 분리</li></ul><p><strong>5.5 대규모 적용 사례(심화)</strong></p><ul><li>리더리스(Quorum) + 멀티 리전 토폴로지로 쓰기 확장 및 가용성 극대화(예: Cassandra 스타일).</li></ul><p><strong>5.6 실패 사례 및 교훈(심화)</strong></p><ul><li>Dual-write로 데이터 분기 발생 → 단일 소스 쓰기 + CDC로 해결.</li></ul><hr><h3 id=phase-6-운영-및-최적화-1>Phase 6: 운영 및 최적화<a hidden class=anchor aria-hidden=true href=#phase-6-운영-및-최적화-1>#</a></h3><p><strong>6.1 모니터링/관측성</strong></p><ul><li>핵심 메트릭: <strong>replication_lag</strong>, <strong>apply_queue_depth</strong>, <strong>conflict_rate</strong>, <strong>RPO 추정</strong>, <strong>failover_time</strong>, <strong>snapshot_age</strong>.</li><li>소스별: Postgres(pg_stat_replication), MySQL(SHOW REPLICA STATUS), MongoDB(replSetGetStatus), Cassandra(nodetool, system tables), Debezium JMX.</li></ul><p><strong>6.2 보안/컴플라이언스</strong></p><ul><li>TLS, 저장 암호화, 최소 권한, 감사 로깅.</li><li>데이터 주권: 리전 별 파티셔닝/필터링, 마스킹/토큰화.</li></ul><p><strong>6.3 성능 최적화/확장성</strong></p><ul><li><strong>배치 크기/플러시 주기</strong> 튜닝, 압축, 전송 파이프라인 백프레셔.</li><li><strong>동기 대상</strong> 최소화(지역 과반), <strong>읽기 라우팅</strong> 최적화.</li></ul><p><strong>6.4 트러블슈팅</strong></p><ul><li>지연 급증: 네트워크 RTT/디스크 IOPS 점검 → 전송 스레드/체크포인트 튜닝.</li><li>분기/충돌: 벡터클록/버전 규칙 검토, 재동기화(백필/리빌드).</li></ul><p><strong>6.5 아키텍처 거버넌스(C형 특화)</strong></p><ul><li>ADR(Architecture Decision Record)로 RPO/RTO, 일관성, 페일오버 정책 명문화.</li></ul><p><strong>6.6 비용 최적화(심화)</strong></p><ul><li>사본 계층화(핫/웜/콜드), 스토리지 클래스/압축, 전송 빈도 적응화.</li></ul><p><strong>6.7 DR/BC(심화)</strong></p><ul><li>이중화 리전, 정기 페일오버 리허설, 카오스 엔지니어링.</li></ul><hr><h3 id=phase-7-고급-주제-및-미래-전망-1>Phase 7: 고급 주제 및 미래 전망<a hidden class=anchor aria-hidden=true href=#phase-7-고급-주제-및-미래-전망-1>#</a></h3><p><strong>7.1 현재 도전 과제</strong></p><ul><li>멀티 리전에 대한 강한 일관성과 낮은 지연의 동시 달성, 스키마 변경/DDL의 무중단 복제, 멀티테넌시 격리.</li></ul><p><strong>7.2 최신 트렌드</strong></p><ul><li>CRDT 기반 엣지 동기화, <strong>deterministic ordering</strong>(Calvin), <strong>follower reads</strong>, <strong>geo-partitioning</strong>.</li></ul><p><strong>7.3 대안/경쟁 솔루션</strong></p><ul><li>합의형(NewSQL) vs 정족수형(NoSQL) vs 전통 RDBMS 복제. 요구사항별 하이브리드.</li></ul><p><strong>7.4 신규 패턴/아키텍처(C형 특화)</strong></p><ul><li><strong>Local-first</strong> + 서버 조정, <strong>Hybrid Logical Clock</strong> 광범위 도입.</li></ul><p><strong>7.5 연구 동향(심화)</strong></p><ul><li>지연 인지 트랜잭션 스케줄링, 적응형 정족수, 시간 동기 인프라 개선.</li></ul><p><strong>7.6 생태계/비즈니스 영향(심화)</strong></p><ul><li>글로벌 SaaS의 리전별 데이터 주권 준수 비용과 설계 복잡성 증가.</li></ul><hr><h2 id=8-표준-형식-및-구조-산출물>8. 표준 형식 및 구조 산출물<a hidden class=anchor aria-hidden=true href=#8-표준-형식-및-구조-산출물>#</a></h2><h3 id=81-주요-장점이점--표>8.1 주요 장점/이점 — 표<a hidden class=anchor aria-hidden=true href=#81-주요-장점이점--표>#</a></h3><p>(위 3.1 표 참조)</p><h3 id=82-단점제약사항--표>8.2 단점/제약사항 — 표<a hidden class=anchor aria-hidden=true href=#82-단점제약사항--표>#</a></h3><p>(위 3.2 표 참조)</p><h3 id=83-실습-예제-및-코드-구현--템플릿>8.3 실습 예제 및 코드 구현 — 템플릿<a hidden class=anchor aria-hidden=true href=#83-실습-예제-및-코드-구현--템플릿>#</a></h3><p>(위 5.1-5.2 참조)</p><h3 id=84-실제-도입-사례--템플릿>8.4 실제 도입 사례 — 템플릿<a hidden class=anchor aria-hidden=true href=#84-실제-도입-사례--템플릿>#</a></h3><p>(위 5.2 참조)</p><h3 id=85-최종-정리-및-학습-가이드>8.5 최종 정리 및 학습 가이드<a hidden class=anchor aria-hidden=true href=#85-최종-정리-및-학습-가이드>#</a></h3><h4 id=내용-종합-2>내용 종합<a hidden class=anchor aria-hidden=true href=#내용-종합-2>#</a></h4><ul><li>복제는 <strong>토폴로지×타이밍×일관성</strong>의 조합 문제다. RPO/RTO 목표와 지연/비용/운영 복잡성 사이의 균형이 핵심.</li></ul><h4 id=실무-적용-가이드체크리스트>실무 적용 가이드(체크리스트)<a hidden class=anchor aria-hidden=true href=#실무-적용-가이드체크리스트>#</a></h4><ul><li><input disabled type=checkbox> RPO/RTO 수치화 → ADR 기록</li><li><input disabled type=checkbox> 토폴로지 선택(단일/다중 리더/리더리스)</li><li><input disabled type=checkbox> 타이밍 선택(동기/반동기/비동기)</li><li><input disabled type=checkbox> 일관성 모델/충돌 처리 규칙 명문화</li><li><input disabled type=checkbox> 페일오버/리커버리 Runbook/리허설</li><li><input disabled type=checkbox> 모니터링 SLO/알람 임계치 정의</li><li><input disabled type=checkbox> 데이터 주권/보안 정책 준수</li></ul><h4 id=학습-로드맵-2>학습 로드맵<a hidden class=anchor aria-hidden=true href=#학습-로드맵-2>#</a></h4><ol><li>기초: CAP/PACELC, 일관성 모델 → 2) 구현: 엔진별 복제/CDC → 3) 운영: 모니터링/튜닝 → 4) 고급: 합의/CRDT/Geo-파티셔닝.</li></ol><h4 id=학습-항목-정리-2>학습 항목 정리<a hidden class=anchor aria-hidden=true href=#학습-항목-정리-2>#</a></h4><table><thead><tr><th>카테고리</th><th>Phase</th><th>항목</th><th>중요도</th><th>학습 목표</th><th>실무 연관성</th><th>설명</th></tr></thead><tbody><tr><td>기초</td><td>1</td><td>CAP/PACELC</td><td>필수</td><td>트레이드오프 이해</td><td>높음</td><td>설계 판단 근거</td></tr><tr><td>핵심</td><td>2</td><td>토폴로지/타이밍</td><td>필수</td><td>구조/메커니즘 숙지</td><td>높음</td><td>품질 속성 결정</td></tr><tr><td>핵심</td><td>3</td><td>충돌 처리/CRDT</td><td>필수</td><td>일관성 유지</td><td>높음</td><td>멀티리더 설계</td></tr><tr><td>응용</td><td>5</td><td>CDC 파이프라인</td><td>권장</td><td>분석/통합 연계</td><td>중간</td><td>데이터 플랫폼</td></tr><tr><td>고급</td><td>7</td><td>합의/시간 인프라</td><td>선택</td><td>강한 일관성 달성</td><td>중간</td><td>글로벌 트랜잭션</td></tr></tbody></table><h3 id=86-용어-정리>8.6 용어 정리<a hidden class=anchor aria-hidden=true href=#86-용어-정리>#</a></h3><table><thead><tr><th>카테고리</th><th>용어</th><th>정의</th><th>관련 개념</th><th>실무 활용</th></tr></thead><tbody><tr><td>핵심</td><td>RPO(Recovery Point Objective)</td><td>허용 가능한 데이터 손실 한도</td><td>DR/BC</td><td>동기/비동기 선택 기준</td></tr><tr><td>핵심</td><td>RTO(Recovery Time Objective)</td><td>복구 목표 시간</td><td>DR/Failover</td><td>페일오버 전략</td></tr><tr><td>구현</td><td>WAL(Write-Ahead Log)</td><td>변경을 먼저 로그로 기록</td><td>로그 배송/CDC</td><td>복제/복구의 기본</td></tr><tr><td>구현</td><td>Quorum</td><td>읽기/쓰기 정족수</td><td>N,R,W</td><td>지연/일관성 조절</td></tr><tr><td>운영</td><td>Failover</td><td>리더 장애시 자동 승격</td><td>선출/합의</td><td>고가용 운영</td></tr><tr><td>운영</td><td>HLC(Hybrid Logical Clock)</td><td>논리+물리 혼합 시계</td><td>TrueTime/Vector Clock</td><td>글로벌 직렬화</td></tr></tbody></table><h3 id=87-참고-및-출처>8.7 참고 및 출처<a hidden class=anchor aria-hidden=true href=#87-참고-및-출처>#</a></h3><ul><li><em>Spanner: Google’s Globally-Distributed Database</em> (OSDI 2012)</li><li><em>Dynamo: Amazon’s Highly Available Key-value Store</em> (SOSP 2007)</li><li><em>In Search of an Understandable Consensus Algorithm (Raft)</em> (2014)</li><li><em>Brewer’s CAP Theorem</em>; <em>PACELC</em> 논문/블로그 자료</li><li>PostgreSQL Docs — Replication, Logical Decoding</li><li>MySQL Docs — Replication, GTID, Group Replication</li><li>MongoDB Docs — Replica Sets</li><li>Apache Cassandra — Architecture (Gossip, Hinted Handoff, Read Repair)</li><li>Debezium, Kafka Connect — 공식 문서</li></ul><hr><h2 id=4단계-통합-검증-및-조정>4단계: 통합 검증 및 조정<a hidden class=anchor aria-hidden=true href=#4단계-통합-검증-및-조정>#</a></h2><ul><li>내용 정확성/일관성 교차 점검, 엔진별 용어 차이 보정, 최신 기능(예: Postgres logical replication, MySQL MGR) 반영.</li><li>분산 시스템/네트워킹/보안과의 연결 지점 명시.</li></ul><h2 id=5단계-종합-정리--완료>5단계: 종합 정리 — 완료<a hidden class=anchor aria-hidden=true href=#5단계-종합-정리--완료>#</a></h2><ul><li>본 문서 구조는 초심자→실무자 순으로 단계적 심화가 가능하며, 코드/도식/체크리스트를 포함한다.</li></ul><hr><p>복제 (Replication) 는 시스템 디자인에서 데이터나 서비스의 동일한 복사본을 여러 위치에 유지하는 기술이다. 주요 목적은 장애 발생 시에도 서비스 가용성을 보장하고, 지리적으로 분산된 사용자에게 낮은 지연 시간을 제공하며, 읽기 성능을 향상시키는 것이다. 복제 방식은 동기식과 비동기식으로 나뉘며, 액티브 - 패시브 (마스터 - 슬레이브), 액티브 - 액티브 (다중 마스터) 등의 아키텍처를 통해 구현된다. 일관성, 가용성, 분할 내성 사이의 트레이드오프를 고려해 적절한 복제 전략을 선택하는 것이 중요하다.</p><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><p>복제 (Replication) 는 시스템 디자인에서 데이터의 복사본을 여러 노드나 시스템에 분산시켜 저장하는 기술이다. 이를 통해 단일 장애점 (Single Point of Failure) 을 방지하고 시스템 가용성 (Availability) 을 높이는 것이 주요 목적이다.</p><p>핵심 개념들은 다음과 같다:</p><ol><li><strong>복제본 (Replica)</strong>: 원본 데이터의 복사본으로, 여러 노드에 분산되어 있다.</li><li><strong>복제 모델 (Replication Model)</strong>:<ul><li><strong>마스터 - 슬레이브 (Master-Slave)</strong>: 하나의 마스터 노드가 모든 쓰기 작업을 처리하고, 슬레이브 노드는 읽기 작업을 담당</li><li><strong>다중 마스터 (Multi-Master)</strong>: 여러 마스터 노드가 모두 쓰기 작업을 수행할 수 있음</li><li><strong>액티브 - 패시브 (Active-Passive)</strong>: 하나의 노드만 활성화되어 있고, 장애 시 패시브 노드가 활성화됨</li><li><strong>액티브 - 액티브 (Active-Active)</strong>: 모든 노드가 동시에 활성화되어 작업을 처리함</li></ul></li><li><strong>복제 방식 (Replication Method)</strong>:<ul><li><strong>동기식 복제 (Synchronous Replication)</strong>: 모든 복제본이 업데이트될 때까지 트랜잭션 완료를 기다림</li><li><strong>비동기식 복제 (Asynchronous Replication)</strong>: 마스터의 변경사항이 복제본에 비동기적으로 전파됨</li><li><strong>준동기식 복제 (Semi-Synchronous Replication)</strong>: 적어도 하나의 복제본이 업데이트될 때까지만 기다림</li></ul></li><li><strong>일관성 모델 (Consistency Model)</strong>:<ul><li><strong>강한 일관성 (Strong Consistency)</strong>: 모든 복제본이 항상 동일한 데이터를 보여줌</li><li><strong>최종 일관성 (Eventual Consistency)</strong>: 시간이 지나면 모든 복제본이 동일한 데이터를 갖게 됨</li><li><strong>읽기 일관성 (Read Consistency)</strong>: 읽기 작업에 대한 일관성 보장</li></ul></li><li><strong>CAP 이론 (CAP Theorem)</strong>: 분산 시스템에서는 일관성 (Consistency), 가용성 (Availability), 분할 내성 (Partition Tolerance) 중 세 가지를 동시에 만족시킬 수 없다는 이론</li><li><strong>지연 시간 (Latency) 과 복제 지연 (Replication Lag)</strong>: 마스터에서 변경된 데이터가 복제본에 반영되기까지의 시간 차이</li><li><strong>충돌 해결 (Conflict Resolution)</strong>: 여러 노드에서 동시에 같은 데이터를 수정할 때 발생하는 충돌을 해결하는 메커니즘</li><li><strong>쿼럼 (Quorum)</strong>: 분산 시스템에서 작업을 수행하기 위해 필요한 최소한의 노드 수</li></ol><p>이러한 개념들은 분산 데이터베이스, 클라우드 시스템, 콘텐츠 전송 네트워크 (CDN) 등 다양한 분야에서 중요하게 활용된다.</p><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><p>복제 (Replication) 는 분산 시스템에서 데이터나 서비스의 사본을 여러 위치에 유지하는 기술이다.<br>이러한 복제 기술의 주요 목적과 필요성은 다음과 같다:</p><ol><li><strong>가용성 (Availability) 증대</strong>: 하나의 노드나 서버가 실패하더라도 다른 복제본이 서비스를 계속 제공할 수 있어 시스템의 전반적인 가용성이 향상된다.</li><li><strong>내결함성 (Fault Tolerance) 개선</strong>: 하드웨어 오류, 네트워크 문제, 소프트웨어 버그 등으로 인한 장애가 발생해도 시스템이 계속 작동할 수 있다.</li><li><strong>부하 분산 (Load Balancing)</strong>: 여러 노드에 부하를 분산시켜 단일 노드의 과부하를 방지하고 전체 시스템의 성능을 향상시킨다.</li><li><strong>지연 시간 (Latency) 감소</strong>: 사용자와 지리적으로 가까운 곳에 데이터를 복제함으로써 접근 지연 시간을 줄일 수 있다.</li><li><strong>데이터 손실 방지</strong>: 여러 위치에 데이터를 복제하여 저장함으로써 데이터 손실 위험을 최소화한다.</li><li><strong>확장성 (Scalability) 향상</strong>: 읽기 작업은 여러 복제본에 분산시키고, 쓰기 작업은 마스터 노드로 집중시킴으로써 시스템의 확장성을 개선할 수 있다.</li><li><strong>재해 복구 (Disaster Recovery)</strong>: 재해 발생 시 다른 지역의 복제본으로 신속하게 전환하여 서비스를 계속 제공할 수 있다.</li><li><strong>백업 및 아카이빙</strong>: 데이터의 정기적인 백업과 아카이빙을 위한 메커니즘으로 활용된다.</li><li><strong>분석 및 보고</strong>: 프로덕션 데이터베이스에 영향을 주지 않고 복제본을 사용하여 데이터 분석이나 보고서 생성 등의 작업을 수행할 수 있다.</li><li><strong>지역별 규정 준수</strong>: 특정 지역의 데이터 주권 및 규정 준수 요구사항을 충족시키기 위해 해당 지역 내에 데이터 복제본을 유지할 수 있다.</li></ol><p>이러한 목적들은 현대의 분산 시스템과 클라우드 환경에서 특히 중요하며, 복제는 신뢰성 높은 서비스를 제공하기 위한 필수적인 기술로 자리 잡고 있다.</p><h3 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><p>복제 (Replication) 는 분산 시스템에서 다음과 같은 주요 기능과 역할을 수행한다:</p><ol><li><strong>데이터 동기화</strong>: 여러 노드 간에 데이터를 동기화하여 일관된 상태를 유지한다.</li><li><strong>장애 감지 및 복구</strong>: 노드 장애를 감지하고 필요시 다른 복제본으로 작업을 전환한다.</li><li><strong>읽기 확장성 제공</strong>: 여러 복제본에 읽기 요청을 분산시켜 시스템의 읽기 처리량을 향상시킨다.</li><li><strong>지역적 분산</strong>: 지리적으로 분산된 사용자에게 가까운 위치의 데이터 접근을 제공한다.</li><li><strong>일관성 보장</strong>: 복제 전략에 따라 데이터의 일관성 수준을 조정한다.</li><li><strong>충돌 감지 및 해결</strong>: 여러 노드에서 동시에 발생한 데이터 변경 충돌을 감지하고 해결한다.</li><li><strong>데이터 복원 및 백업 지원</strong>: 데이터 손실 발생 시 복제본을 통해 복원할 수 있다.</li><li><strong>워크로드 분산</strong>: 다양한 유형의 워크로드를 여러 노드에 분산시킨다.</li><li><strong>재해 복구 지원</strong>: 전체 데이터 센터 장애 시 다른 지역의 복제본으로 서비스를 전환한다.</li><li><strong>성능 최적화</strong>: 복제 방식과 토폴로지를 조정하여 시스템 성능을 최적화한다.</li></ol><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><p>복제 (Replication) 의 주요 특징은 다음과 같다:</p><ol><li><strong>데이터 중복성</strong>: 동일한 데이터가 여러 노드에 중복 저장된다.</li><li><strong>복제 지연 (Replication Lag)</strong>: 원본 데이터가 변경된 후 모든 복제본에 변경사항이 전파되기까지 시간 차이가 발생할 수 있다.</li><li><strong>복제 방식 다양성</strong>: 동기식, 비동기식, 준동기식 등 다양한 복제 방식이 존재한다.</li><li><strong>확장 가능한 아키텍처</strong>: 필요에 따라 복제본 수를 늘리거나 줄일 수 있다.</li><li><strong>지리적 분산</strong>: 전 세계 여러 지역에 데이터를 분산 저장할 수 있다.</li><li><strong>자동 장애 조치 (Failover)</strong>: 주 노드 장애 시 자동으로 다른 노드로 전환할 수 있다.</li><li><strong>구성 유연성</strong>: 시스템 요구사항에 맞게 다양한 복제 토폴로지를 구성할 수 있다.</li><li><strong>자원 오버헤드</strong>: 복제를 유지하기 위한 추가적인 컴퓨팅, 스토리지, 네트워크 자원이 필요하다.</li><li><strong>일관성 - 가용성 트레이드오프</strong>: CAP 이론에 따라 일관성과 가용성 사이의 균형을 조정할 수 있다.</li><li><strong>실시간 모니터링 필요성</strong>: 복제 상태와 지연을 지속적으로 모니터링해야 한다.</li></ol><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><p>복제 (Replication) 의 핵심 원칙은 다음과 같다:</p><ol><li><strong>데이터 일관성 (Data Consistency)</strong>: 모든 복제본이 결국 동일한 데이터 상태에 도달해야 한다.</li><li><strong>고가용성 (High Availability)</strong>: 시스템 구성 요소의 일부가 실패하더라도 전체 시스템은 계속 작동해야 한다.</li><li><strong>내결함성 (Fault Tolerance)</strong>: 장애가 발생해도 시스템이 계속 작동할 수 있어야 한다.</li><li><strong>확장성 (Scalability)</strong>: 부하 증가에 대응하여 시스템을 확장할 수 있어야 한다.</li><li><strong>투명성 (Transparency)</strong>: 복제 과정이 최종 사용자나 애플리케이션에 투명해야 한다.</li><li><strong>격리성 (Isolation)</strong>: 복제본 간의 장애가 서로에게 영향을 미치지 않아야 한다.</li><li><strong>효율성 (Efficiency)</strong>: 복제는 시스템 성능에 최소한의 영향을 미쳐야 한다.</li><li><strong>복원성 (Resilience)</strong>: 장애 후 시스템이 정상 상태로 복구될 수 있어야 한다.</li><li><strong>지역적 근접성 (Locality)</strong>: 가능한 사용자와 가까운 위치에 데이터를 제공해야 한다.</li><li><strong>비용 최적화 (Cost Optimization)</strong>: 복제 비용과 이점 사이의 균형을 맞춰야 한다.</li></ol><h3 id=주요-원리-및-작동-원리>주요 원리 및 작동 원리<a hidden class=anchor aria-hidden=true href=#주요-원리-및-작동-원리>#</a></h3><p>복제 (Replication) 의 주요 원리와 작동 원리는 다음과 같다:</p><table><thead><tr><th>단계</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>1</td><td>변경 사항 캡처 (Change Capture)</td><td>원본 데이터의 변경 사항 (삽입, 수정, 삭제) 을 식별. 트랜잭션 로그, CDC(Change Data Capture), 트리거 등 사용</td></tr><tr><td>2</td><td>변경 사항 전파 (Change Propagation)</td><td>식별된 변경 사항을 복제본에 전송. 전송 방식에는 동기식, 비동기식, 준동기식이 있음</td></tr><tr><td>3</td><td>변경 사항 적용 (Change Application)</td><td>전송된 변경 사항을 원본과 동일한 순서로 복제본에 적용하여 일관성 유지</td></tr><tr><td>4</td><td>충돌 감지 및 해결 (Conflict Detection and Resolution)</td><td>다중 마스터 환경에서 충돌 발생 시 타임스탬프, 버전 벡터, LWW(Last-Writer-Wins) 등으로 해결</td></tr><tr><td>5</td><td>일관성 유지 (Consistency Maintenance)</td><td>강한 일관성, 최종 일관성 등 선택된 일관성 모델에 따라 전체 데이터의 정합성 보장</td></tr><tr><td>6</td><td>장애 감지 및 복구 (Failure Detection and Recovery)</td><td>노드 장애 감지 및 Failover 수행. 복구 후 데이터 재동기화 수행</td></tr><tr><td>7</td><td>초기 동기화 (Initial Synchronization)</td><td>신규 노드 추가 시 스냅샷 또는 점진적 동기화를 통해 초기 데이터 복제 수행</td></tr></tbody></table><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-49-1><a class=lnlinks href=#hl-49-1>1</a>
</span><span class=lnt id=hl-49-2><a class=lnlinks href=#hl-49-2>2</a>
</span><span class=lnt id=hl-49-3><a class=lnlinks href=#hl-49-3>3</a>
</span><span class=lnt id=hl-49-4><a class=lnlinks href=#hl-49-4>4</a>
</span><span class=lnt id=hl-49-5><a class=lnlinks href=#hl-49-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[Client]
</span></span><span class=line><span class=cl>   │
</span></span><span class=line><span class=cl>   ▼
</span></span><span class=line><span class=cl>[Master Node] ── 복제 ──▶ [Replica Node1]
</span></span><span class=line><span class=cl>                  └─ 복제 ──▶ [Replica Node2]
</span></span></code></pre></td></tr></table></div></div><h3 id=분류에-따른-종류-및-유형>분류에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류에-따른-종류-및-유형>#</a></h3><table><thead><tr><th>분류 기준</th><th>유형</th><th>설명</th></tr></thead><tbody><tr><td><strong>복제 모델</strong></td><td>마스터 - 슬레이브 (Master-Slave)</td><td>하나의 마스터 노드가 모든 쓰기를 처리하고, 여러 슬레이브 노드는 읽기만 처리하는 모델입니다. 마스터의 변경사항이 슬레이브로 전파됩니다.</td></tr><tr><td></td><td>다중 마스터 (Multi-Master)</td><td>여러 마스터 노드가 모두 읽기와 쓰기를 처리할 수 있는 모델로, 각 마스터 간 양방향 복제가 이루어집니다.</td></tr><tr><td></td><td><strong>Peer-to-Peer Replication</strong></td><td>모든 노드가 동등한 역할을 하며, 각 노드가 다른 노드와 데이터를 동기화합니다.</td></tr><tr><td></td><td>액티브 - 패시브 (Active-Passive)</td><td>하나의 액티브 노드만 실제 서비스를 제공하고, 패시브 노드는 대기 상태로 액티브 노드 장애 시 대체됩니다.</td></tr><tr><td></td><td>액티브 - 액티브 (Active-Active)</td><td>모든 노드가 동시에 서비스를 제공하며, 노드 간 지속적인 상태 동기화가 필요합니다.</td></tr><tr><td><strong>복제 방식</strong></td><td>동기식 복제 (Synchronous)</td><td>마스터는 복제본이 변경사항을 확인할 때까지 트랜잭션 완료를 기다립니다. 데이터 일관성은 높지만 지연 시간이 증가합니다.</td></tr><tr><td></td><td>비동기식 복제 (Asynchronous)</td><td>마스터는 변경사항을 복제본에 전송한 후 즉시 트랜잭션을 완료합니다. 성능은 좋지만 복제 지연이 발생할 수 있습니다.</td></tr><tr><td></td><td>준동기식 복제 (Semi-Synchronous)</td><td>적어도 하나의 복제본이 변경사항을 확인할 때까지 기다리는 방식으로, 동기식과 비동기식의 중간 형태입니다.</td></tr><tr><td><strong>데이터 범위</strong></td><td>전체 복제 (Full Replication)</td><td>전체 데이터세트가 모든 복제본에 복제됩니다. 간단하지만 스토리지 요구사항이 높습니다.</td></tr><tr><td></td><td>부분 복제 (Partial Replication)</td><td>데이터의 일부만 특정 복제본에 복제됩니다. 스토리지 효율성은 높지만 관리가 복잡합니다.</td></tr><tr><td></td><td>선택적 복제 (Selective Replication)</td><td>특정 기준 (예: 지역, 중요도) 에 따라 선택된 데이터만 복제됩니다.</td></tr><tr><td><strong>지리적 배포</strong></td><td>로컬 복제 (Local Replication)</td><td>동일한 데이터 센터 내에서 복제가 이루어집니다. 지연 시간은 낮지만 재해 대비 능력이 제한적입니다.</td></tr><tr><td></td><td>지역 간 복제 (Cross-Region)</td><td>여러 지역이나 데이터 센터 간에 복제가 이루어집니다. 재해 복구에 효과적이지만 지연 시간이 증가합니다.</td></tr><tr><td></td><td>글로벌 복제 (Global Replication)</td><td>전 세계적으로 분산된 위치에 데이터가 복제됩니다. 글로벌 서비스에 적합하지만 복잡성이 높습니다.</td></tr><tr><td><strong>일관성 모델</strong></td><td>강한 일관성 (Strong Consistency)</td><td>모든 복제본이 항상 동일한 데이터를 보여주며, 변경사항이 즉시 모든 노드에 반영됩니다.</td></tr><tr><td></td><td>최종 일관성 (Eventual Consistency)</td><td>시간이 지나면 모든 복제본이 동일한 상태에 수렴하지만, 일시적으로 불일치가 발생할 수 있습니다.</td></tr><tr><td></td><td>인과적 일관성 (Causal Consistency)</td><td>인과 관계가 있는 작업들은 모든 노드에서 동일한 순서로 관찰됩니다.</td></tr><tr><td><strong>용도별</strong></td><td>고가용성 복제 (HA Replication)</td><td>시스템 가용성을 높이기 위한 복제로, 주로 마스터 - 슬레이브 또는 액티브 - 패시브 모델을 사용합니다.</td></tr><tr><td></td><td>재해 복구 복제 (DR Replication)</td><td>재해 발생 시 데이터 손실을 방지하기 위한 복제로, 주로 지역 간 복제를 활용합니다.</td></tr><tr><td></td><td>성능 향상 복제 (Performance Replication)</td><td>읽기 성능을 향상시키기 위한 복제로, 읽기 작업을 여러 복제본에 분산시킵니다.</td></tr></tbody></table><h3 id=구성-요소>구성 요소<a hidden class=anchor aria-hidden=true href=#구성-요소>#</a></h3><p>복제 (Replication) 시스템의 주요 구성 요소는 다음과 같다:</p><table><thead><tr><th>구성 요소</th><th>설명</th><th>주요 기능</th></tr></thead><tbody><tr><td><strong>마스터 노드 (Master Node)</strong></td><td>모든 쓰기 작업을 처리하고 변경 로그를 생성하는 중심 노드</td><td>- 쓰기/트랜잭션 처리<br>- 변경 로그 생성<br>- 복제본 상태 모니터링</td></tr><tr><td><strong>슬레이브 / 복제본 노드 (Slave / Replica Node)</strong></td><td>마스터 데이터를 복제하고 주로 읽기를 처리하는 보조 노드</td><td>- 읽기 처리<br>- 변경사항 수신/적용<br>- 백업 및 복구 지원</td></tr><tr><td><strong>복제 로그 (Replication Log)</strong></td><td>마스터의 변경사항을 기록하고 복제본에 전달되는 로그</td><td>- 변경사항 순차 기록<br>- 복제 추적성 제공<br>- 복구 및 롤백 지원</td></tr><tr><td><strong>복제 관리자 (Replication Manager)</strong></td><td>전체 복제 과정을 관리하고 노드 상태를 감시하는 중앙 제어 시스템</td><td>- 복제 토폴로지 제어<br>- 장애 감지/조치<br>- 성능 최적화</td></tr><tr><td><strong>동기화 도구 (Synchronization Tools)</strong></td><td>초기 복제 또는 장애 후 데이터 재동기화를 수행하는 도구</td><td>- 초기 데이터 로딩<br>- 체크섬 기반 검증<br>- 증분 동기화 지원</td></tr><tr><td><strong>충돌 해결 메커니즘 (Conflict Resolution Mechanism)</strong></td><td>다중 마스터 환경에서 데이터 충돌을 처리하는 시스템</td><td>- 충돌 감지 및 로깅<br>- 정책 기반 자동 해결<br>- 수동 조정 지원</td></tr><tr><td><strong>로드 밸런서 (Load Balancer)</strong></td><td>클라이언트 요청을 적절한 노드로 분산시키는 네트워크 구성 요소</td><td>- 읽기/쓰기 트래픽 분산<br>- 노드 상태 감지<br>- 장애 시 자동 우회</td></tr><tr><td><strong>모니터링 및 알림 시스템 (Monitoring & Alert System)</strong></td><td>복제 지연, 오류, 성능 상태를 실시간 감시하고 알림 제공</td><td>- 복제 지연 감시<br>- 오류 탐지 및 경고<br>- 성능 지표 수집/시각화</td></tr><tr><td><strong>백업 시스템 (Backup System)</strong></td><td>데이터의 정기 백업과 재해 복구 (DR) 를 위한 핵심 구성 요소</td><td>- 정기 백업 및 검증<br>- 무결성 검사<br>- 복원 및 테스트 지원</td></tr></tbody></table><h3 id=장점과-단점>장점과 단점<a hidden class=anchor aria-hidden=true href=#장점과-단점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>✅ 장점</td><td>고가용성</td><td>복제를 통해 하나의 노드나 서버가 실패하더라도 다른 복제본이 서비스를 계속 제공할 수 있어 시스템의 가용성이 향상됩니다.</td></tr><tr><td></td><td>내결함성 향상</td><td>여러 노드에 데이터를 분산 저장함으로써 일부 노드 장애가 발생해도 시스템 전체의 안정성을 유지할 수 있습니다.</td></tr><tr><td></td><td>성능 향상</td><td>읽기 작업을 여러 복제본에 분산시켜 처리함으로써 전체 시스템의 처리량과 응답 시간을 개선할 수 있습니다.</td></tr><tr><td></td><td>지연 시간 감소</td><td>사용자와 지리적으로 가까운 위치에 복제본을 배치함으로써 데이터 접근 지연 시간을 줄일 수 있습니다.</td></tr><tr><td></td><td>확장성 제공</td><td>복제를 통해 읽기 작업을 수평적으로 확장할 수 있어, 사용자 증가에 따른 시스템 확장이 용이합니다.</td></tr><tr><td></td><td>데이터 보호</td><td>여러 위치에 데이터를 복제함으로써 단일 위치의 재해나 장애로 인한 데이터 손실 위험을 감소시킵니다.</td></tr><tr><td>⚠ 단점</td><td>일관성 문제</td><td>특히 비동기식 복제에서는 마스터와 복제본 간의 데이터 불일치가 발생할 수 있으며, 이를 관리하기 위한 추가적인 메커니즘이 필요합니다.</td></tr><tr><td></td><td>리소스 오버헤드</td><td>여러 복제본을 유지하기 위해 추가적인 스토리지, 네트워크 대역폭, 컴퓨팅 자원이 필요합니다.</td></tr><tr><td></td><td>복잡성 증가</td><td>복제 시스템의 설계, 구현, 관리가 더 복잡해지며, 특히 충돌 해결과 장애 조치 메커니즘 설계에 어려움이 있습니다.</td></tr><tr><td></td><td>지연 시간</td><td>복제 과정에서 발생하는 지연으로 인해 복제본의 데이터가 최신 상태가 아닐 수 있습니다.</td></tr><tr><td></td><td>네트워크 의존성</td><td>노드 간 통신에 네트워크가 필수적이므로, 네트워크 장애가 전체 시스템에 영향을 미칠 수 있습니다.</td></tr><tr><td></td><td>비용 증가</td><td>추가 하드웨어, 소프트웨어 라이센스, 관리 비용 등으로 인해 전체 시스템 비용이 증가합니다.</td></tr></tbody></table><h3 id=도전-과제>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제>#</a></h3><p>복제 (Replication) 구현 및 운영 시 다음과 같은 주요 도전 과제들이 있다:</p><ol><li><strong>일관성 유지</strong>: 여러 노드 간에 데이터 일관성을 유지하는 것은 특히 분산 환경에서 어려운 과제이다. CAP 이론에 따라 일관성과 가용성 사이의 트레이드오프를 고려해야 한다.</li><li><strong>복제 지연 관리</strong>: 비동기식 복제에서는 마스터와 복제본 간에 시간 차이가 발생할 수 있으며, 이로 인한 데이터 불일치 문제를 해결해야 한다.</li><li><strong>충돌 감지 및 해결</strong>: 다중 마스터 환경에서는 서로 다른 노드에서 동시에 같은 데이터를 수정할 때 충돌이 발생할 수 있어, 효과적인 충돌 해결 메커니즘이 필요하다.</li><li><strong>네트워크 파티션 처리</strong>: 네트워크 분할 발생 시 시스템이 어떻게 동작할지 결정하고, 분할 해소 후 데이터 일관성을 회복하는 방법을 설계해야 한다.</li><li><strong>초기 동기화 및 재동기화</strong>: 새로운 복제본 추가 또는 장애 복구 후 대량의 데이터를 효율적으로 동기화하는 방법을 구현해야 한다.</li><li><strong>성능 영향 최소화</strong>: 복제 과정이 전체 시스템 성능에 미치는 영향을 최소화하고, 특히 동기식 복제에서 지연 시간 증가를 관리해야 한다.</li><li><strong>확장성 관리</strong>: 복제본 수가 증가함에 따라 발생하는 복잡성과 오버헤드를 효과적으로 관리해야 한다.</li><li><strong>장애 감지 및 자동 복구</strong>: 노드 장애를 신속하게 감지하고 자동으로 복구하는 메커니즘을 구현해야 한다.</li><li><strong>모니터링 및 관리</strong>: 복제 상태, 지연, 오류 등을 효과적으로 모니터링하고 관리할 수 있는 도구와 프로세스가 필요하다.</li><li><strong>보안 유지</strong>: 복제 과정에서 데이터의 무결성과 기밀성을 보장하는 보안 메커니즘을 구현해야 한다.</li><li><strong>비용 최적화</strong>: 복제에 필요한 추가 하드웨어, 네트워크, 스토리지 비용을 최적화해야 한다.</li><li><strong>규정 준수</strong>: 지역별 데이터 주권 및 규정 준수 요구사항을 충족시키면서 복제를 구현해야 한다.</li></ol><h3 id=실무-적용-예시>실무 적용 예시<a hidden class=anchor aria-hidden=true href=#실무-적용-예시>#</a></h3><h4 id=실무-적용-예시-1>실무 적용 예시<a hidden class=anchor aria-hidden=true href=#실무-적용-예시-1>#</a></h4><table><thead><tr><th>분야</th><th>적용 사례</th><th>구현 방식</th><th>이점</th></tr></thead><tbody><tr><td><strong>데이터베이스</strong></td><td>MySQL 복제</td><td>마스터 - 슬레이브 구조를 통해 마스터 DB 의 변경사항을 바이너리 로그 (binlog) 를 통해 슬레이브로 전파</td><td>- 읽기 쿼리 분산을 통한 성능 향상<br>- 데이터 백업 및 분석 용도로 슬레이브 활용<br>- 마스터 장애 시 슬레이브로 빠른 전환</td></tr><tr><td><strong>클라우드 스토리지</strong></td><td>Amazon S3</td><td>여러 가용 영역 (AZ) 에 데이터를 자동으로 복제하여 99.999999999% 의 내구성 제공</td><td>- 데이터 손실 위험 최소화<br>- 지역 장애에도 데이터 접근성 유지<br>- 자동화된 복제로 관리 부담 감소</td></tr><tr><td><strong>CDN</strong></td><td>Akamai, Cloudflare</td><td>원본 콘텐츠를 전 세계 에지 서버에 복제하여 사용자와 가까운 위치에서 제공</td><td>- 콘텐츠 전송 지연 시간 감소<br>- 원본 서버 부하 감소<br>DDoS 공격 방어 능력 강화</td></tr><tr><td><strong>분산 파일 시스템</strong></td><td>HDFS (Hadoop)</td><td>데이터 블록을 여러 노드에 복제 (기본값: 3 개 복제본) 하여 저장</td><td>- 데이터 내구성 향상<br>- 병렬 처리를 통한 읽기 성능 향상<br>- 노드 장애에도 데이터 접근성 유지</td></tr><tr><td><strong>NoSQL 데이터베이스</strong></td><td>MongoDB 복제셋</td><td>Primary-Secondary-Arbiter 구조를 통해 자동 장애 조치 및 데이터 복제</td><td>- 고가용성 보장<br>- 읽기 확장성 제공<br>- 자동화된 장애 복구</td></tr><tr><td><strong>지리적 분산 데이터베이스</strong></td><td>Google Spanner</td><td>여러 지역에 걸쳐 데이터를 복제하고 TrueTime API 를 통해 전역 일관성 제공</td><td>- 글로벌 트랜잭션 지원<br>- 지역 장애에도 서비스 연속성 보장<br>- 사용자 근접성에 따른 지연 시간 최적화</td></tr><tr><td><strong>메시징 시스템</strong></td><td>Kafka</td><td>여러 브로커에 메시지를 복제하고 복제 인자 (replication factor) 를 통해 내구성 조정</td><td>- 메시지 손실 방지<br>- 브로커 장애에도 메시지 처리 지속<br>- 높은 처리량 유지</td></tr><tr><td><strong>인메모리 데이터 그리드</strong></td><td>Hazelcast</td><td>클러스터 내 여러 노드에 데이터를 분산 복제하여 인메모리 처리</td><td>- 초고속 데이터 접근<br>- 노드 장애에도 데이터 보존<br>- 수평적 확장성 제공</td></tr><tr><td><strong>다중 지역 애플리케이션</strong></td><td>Netflix</td><td>여러 AWS 리전에 서비스를 복제하고 DNS 기반 글로벌 로드 밸런싱 사용</td><td>- 지역 장애에도 서비스 지속<br>- 사용자 근접 리전 접속으로 지연 시간 감소<br>- 리전별 트래픽 관리</td></tr><tr><td><strong>블록체인</strong></td><td>이더리움</td><td>모든 노드가 전체 블록체인 데이터를 복제하는 탈중앙화 네트워크</td><td>- 단일 장애점 제거<br>- 데이터 변조 방지<br>- 신뢰할 수 있는 합의 메커니즘</td></tr></tbody></table><h3 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h3><h4 id=사례-1>사례 1<a hidden class=anchor aria-hidden=true href=#사례-1>#</a></h4><p><strong>시나리오</strong>: 글로벌 전자상거래 플랫폼</p><ul><li><strong>목표</strong>: 사용자 지역별 빠른 응답과 장애 복구</li><li><strong>방법</strong>:<ul><li>미국, 유럽, 아시아 데이터센터에 멀티 마스터 복제 구성</li><li>지역별 쓰기와 읽기 분산 처리</li><li>충돌 발생 시 벡터 클록 기반 자동 병합</li></ul></li><li><strong>효과</strong>: 지역 지연 최소화, 장애 시 데이터 손실 방지</li></ul><p><strong>다이어그램</strong>: 글로벌 멀티 마스터 복제 구조</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-50-1><a class=lnlinks href=#hl-50-1>1</a>
</span><span class=lnt id=hl-50-2><a class=lnlinks href=#hl-50-2>2</a>
</span><span class=lnt id=hl-50-3><a class=lnlinks href=#hl-50-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[US Data Center] ←→ [EU Data Center] ←→ [Asia Data Center]
</span></span><span class=line><span class=cl>       ↑                       ↑                        ↑
</span></span><span class=line><span class=cl>    사용자A                 사용자B                  사용자C
</span></span></code></pre></td></tr></table></div></div><h4 id=사례-2>사례 2<a hidden class=anchor aria-hidden=true href=#사례-2>#</a></h4><p><strong>시나리오</strong>: 전자상거래 웹 애플리케이션의 Master-Slave(Primary-Replica) 복제</p><p><strong>요구사항</strong>:</p><ul><li>사용자는 상품을 검색하고 주문할 수 있음</li><li>데이터베이스 장애 시 서비스 중단 없이 읽기 서비스 제공</li><li>읽기 부하 분산 및 장애 복구 목적</li></ul><p><strong>아키텍처 다이어그램</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-51-1><a class=lnlinks href=#hl-51-1> 1</a>
</span><span class=lnt id=hl-51-2><a class=lnlinks href=#hl-51-2> 2</a>
</span><span class=lnt id=hl-51-3><a class=lnlinks href=#hl-51-3> 3</a>
</span><span class=lnt id=hl-51-4><a class=lnlinks href=#hl-51-4> 4</a>
</span><span class=lnt id=hl-51-5><a class=lnlinks href=#hl-51-5> 5</a>
</span><span class=lnt id=hl-51-6><a class=lnlinks href=#hl-51-6> 6</a>
</span><span class=lnt id=hl-51-7><a class=lnlinks href=#hl-51-7> 7</a>
</span><span class=lnt id=hl-51-8><a class=lnlinks href=#hl-51-8> 8</a>
</span><span class=lnt id=hl-51-9><a class=lnlinks href=#hl-51-9> 9</a>
</span><span class=lnt id=hl-51-10><a class=lnlinks href=#hl-51-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>          [사용자]
</span></span><span class=line><span class=cl>             │
</span></span><span class=line><span class=cl>      ┌──────┴──────┐
</span></span><span class=line><span class=cl>      │             │
</span></span><span class=line><span class=cl>[Primary DB]   [Replica DB1]   [Replica DB2]
</span></span><span class=line><span class=cl>   (쓰기/읽기)    (읽기 전용)     (읽기 전용)
</span></span><span class=line><span class=cl>      │             │
</span></span><span class=line><span class=cl>      └──────┬──────┘
</span></span><span class=line><span class=cl>             │
</span></span><span class=line><span class=cl>       [애플리케이션 서버]
</span></span></code></pre></td></tr></table></div></div><ul><li>Primary DB(마스터) 는 모든 쓰기 작업을 처리</li><li>Replica DB(슬레이브) 는 Primary 에서 변경사항을 비동기적으로 받아 읽기 전용 서비스 제공</li></ul><p><strong>복제 흐름 요약</strong></p><ol><li>Primary DB 에서 데이터 변경 (쓰기) 발생</li><li>Binary Log 에 변경 내용 기록</li><li>Replica DB 가 Binary Log 를 읽어 변경사항 반영</li><li>애플리케이션 서버는 읽기 요청을 Replica DB 로 분산, 쓰기는 Primary DB 로 전송</li></ol><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>항목</th><th>고려사항</th><th>주의할 점</th></tr></thead><tbody><tr><td><strong>아키텍처 선택</strong></td><td>- 워크로드 특성 (읽기/쓰기 비율) 분석<br>- 요구되는 일관성 수준 파악<br>- 지리적 분산 필요성 검토</td><td>- 과도하게 복잡한 아키텍처 지양<br>- 비즈니스 요구사항과 기술적 트레이드오프 균형<br>- 미래 확장성 고려</td></tr><tr><td><strong>복제 모델 결정</strong></td><td>- 마스터 - 슬레이브와 다중 마스터 중 적합한 모델 선택<br>- 액티브 - 패시브와 액티브 - 액티브 중 요구사항에 맞는 구성 채택</td><td>- 다중 마스터 복제의 복잡성 인지<br>- 충돌 해결 메커니즘 구현 계획<br>- 마스터 선출 프로세스 설계</td></tr><tr><td><strong>복제 방식 선택</strong></td><td>- 동기식/비동기식/준동기식 중 적절한 방식 결정<br>- 데이터 중요도에 따른 차별화된 전략 적용</td><td>- 동기식 복제의 성능 영향 고려<br>- 비동기식 복제의 데이터 손실 가능성 인지<br>- 네트워크 지연에 대한 영향 평가</td></tr><tr><td><strong>네트워크 계획</strong></td><td>- 노드 간 충분한 대역폭 확보<br>- 네트워크 지연 시간 최소화<br>- 보안 연결 (SSL/TLS) 구성</td><td>- 네트워크 파티션 발생 시 동작 정의<br>- 대역폭 제한 시 복제 우선순위 설정<br>- 네트워크 비용 최적화</td></tr><tr><td><strong>모니터링 체계</strong></td><td>- 복제 지연 실시간 모니터링<br>- 복제 오류 감지 및 알림<br>- 성능 지표 수집 및 분석</td><td>- 임계값 기반 알림 설정<br>- 복제 중단 시 자동 복구 매커니즘 구현<br>- 히스토리컬 데이터 유지 및 분석</td></tr><tr><td><strong>장애 대응 계획</strong></td><td>- 자동 장애 조치 (Failover) 메커니즘 구현<br>- 복구 시점 목표 (RPO) 와 복구 시간 목표 (RTO) 정의<br>- 정기적인 장애 복구 훈련</td><td>- 장애 조치 과정에서의 데이터 불일치 가능성<br>Split-Brain 문제 방지 메커니즘<br>- 수동 개입 프로세스 문서화</td></tr><tr><td><strong>백업 전략</strong></td><td>- 복제와 별개의 백업 프로세스 유지<br>- 복제본을 활용한 효율적인 백업 수행<br>- 백업의 무결성 정기적 검증</td><td>- 복제만으로는 완전한 백업 대체 불가<br>- 백업 중 성능 영향 최소화<br>- 장기 보관 백업의 별도 관리</td></tr><tr><td><strong>용량 계획</strong></td><td>- 데이터 증가율 예측<br>- 복제본 수에 따른 스토리지 요구사항 계산<br>- 버퍼/캐시 크기 최적화</td><td>- 복제 로그 공간 관리<br>- 스토리지 부족 시 자동 경고<br>- 복제 지연 증가의 조기 감지</td></tr><tr><td><strong>보안 고려사항</strong></td><td>- 복제 트래픽 암호화<br>- 노드 간 인증 메커니즘 구현<br>- 접근 제어 및 감사 로깅</td><td>- 암호화로 인한 성능 영향 고려<br>- 인증서 관리 및 갱신 자동화<br>- 내부자 위협 대응 방안</td></tr><tr><td><strong>테스트 및 검증</strong></td><td>- 실제 워크로드를 반영한 성능 테스트<br>- 다양한 장애 시나리오 시뮬레이션<br>- 데이터 일관성 정기 검증</td><td>- 프로덕션 환경과 유사한 테스트 환경 구성<br>- 점진적인 부하 증가 테스트<br>- 장기 실행 테스트로 안정성 검증</td></tr></tbody></table><h3 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>항목</th><th>고려사항</th><th>주의할 점</th></tr></thead><tbody><tr><td><strong>복제 토폴로지 최적화</strong></td><td>- 지리적 분산을 고려한 효율적인 토폴로지 설계<br>- 계층형 복제 구조 활용 (마스터 → 중간 복제본 → 엣지 복제본)<br>- 읽기/쓰기 패턴에 맞는 복제본 배치</td><td>- 너무 깊은 계층 구조로 인한 지연 증가<br>- 복잡한 토폴로지의 관리 오버헤드<br>- 장애 전파 가능성 고려</td></tr><tr><td><strong>복제 방식 튜닝</strong></td><td>- 워크로드 특성에 맞는 동기식/비동기식 선택<br>- 하이브리드 접근법 고려 (중요 데이터는 동기식, 나머지는 비동기식)<br>- 준동기식 (semi-synchronous) 복제로 균형점 찾기</td><td>- 동기식 복제의 지연 영향<br>- 비동기식 복제의 일관성 이슈<br>- 혼합 방식의 복잡성 증가</td></tr><tr><td><strong>배치 처리 최적화</strong></td><td>- 변경사항을 개별이 아닌 배치로 전파<br>- 배치 크기와 빈도의 최적 균형점 찾기<br>- 우선순위 기반 배치 처리 구현</td><td>- 너무 큰 배치로 인한 지연 시간 증가<br>- 너무 작은 배치로 인한 오버헤드 증가<br>- 배치 실패 시 복구 메커니즘 필요</td></tr><tr><td><strong>압축 활용</strong></td><td>- 복제 데이터 전송 시 압축 적용<br>- 워크로드에 적합한 압축 알고리즘 선택<br>- 대역폭 제한 환경에서 압축률 높이기</td><td>- 압축/해제로 인한 CPU 오버헤드<br>- 압축률과 CPU 사용량 사이의 균형<br>- 일부 데이터 유형의 낮은 압축 효율성</td></tr><tr><td><strong>네트워크 최적화</strong></td><td>- 전용 복제 네트워크 구성<br>- 대역폭 조절 (throttling) 메커니즘 구현<br>TCP 파라미터 최적화</td><td>- 네트워크 분리로 인한 추가 비용<br>- 과도한 대역폭 제한으로 인한 지연<br>- 네트워크 구성 변경의 영향 주의</td></tr><tr><td><strong>캐싱 전략</strong></td><td>- 자주 읽히는 데이터의 로컬 캐싱<br>- 캐시 무효화 메커니즘 구현<br>- 레이어드 캐싱 접근법 활용</td><td>- 캐시 일관성 유지<br>- 메모리 사용량 관리<br>- 캐시 갱신 빈도 최적화</td></tr><tr><td><strong>인덱싱 최적화</strong></td><td>- 복제본별 특화된 인덱스 구성<br>- 읽기 중심 복제본에 추가 인덱스 적용<br>- 인덱스 유지 비용 대비 이점 평가</td><td>- 인덱스로 인한 쓰기 성능 저하<br>- 복제 과정에서 인덱스 관리 오버헤드<br>- 인덱스 불일치 가능성</td></tr><tr><td><strong>하드웨어 리소스 할당</strong></td><td>- 복제 워크로드에 맞는 CPU/메모리/디스크 할당<br>SSD/NVMe 스토리지 활용<br>- 복제 로그를 위한 전용 디스크 분리</td><td>- 리소스 과다 할당 방지<br>- 하드웨어 불균형으로 인한 병목 현상<br>- 확장 시 리소스 재배분 계획</td></tr><tr><td><strong>읽기/쓰기 분리</strong></td><td>- 읽기 쿼리를 슬레이브 복제본으로 라우팅<br>- 읽기 일관성 요구사항에 따른 복제본 선택<br>- 쓰기 작업은 마스터로 집중</td><td>- 복제 지연으로 인한 스테일 데이터 문제<br>- 부적절한 라우팅으로 인한 성능 저하<br>- 분산 트랜잭션의 복잡성 증가</td></tr><tr><td><strong>부분/선택적 복제</strong></td><td>- 필요한 데이터만 선택적으로 복제<br>- 지역별 관련성 높은 데이터 우선 복제<br>- 데이터 중요도에 따른 복제 우선순위 지정</td><td>- 부분 복제로 인한 기능 제한<br>- 복제 규칙 관리의 복잡성<br>- 애플리케이션 로직 수정 필요성</td></tr><tr><td><strong>비동기 처리 최적화</strong></td><td>- 이벤트 기반 복제 아키텍처 고려<br>- 메시지 큐를 활용한 복제 개선<br>- 비동기 처리의 순서 보장 메커니즘 구현</td><td>- 메시지 순서 유지 문제<br>- 큐 백로그 관리<br>- 장애 시 메시지 손실 방지</td></tr><tr><td><strong>DBMS 파라미터 튜닝</strong></td><td>- 복제 관련 데이터베이스 파라미터 최적화<br>- 로그 버퍼 크기 조정<br>- 커밋 간격 및 배치 설정 최적화</td><td>- 파라미터 변경의 부작용 주의<br>- 워크로드 변화에 따른 지속적 재조정<br>- 노드별 차별화된 설정 관리의 복잡성</td></tr></tbody></table><h3 id=최신-동향>최신 동향<a hidden class=anchor aria-hidden=true href=#최신-동향>#</a></h3><table><thead><tr><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>분산 데이터베이스</td><td>다중 영역 데이터베이스</td><td>클라우드 제공업체들이 여러 지역에 걸쳐 자동으로 데이터를 복제하는 관리형 다중 영역 데이터베이스 서비스를 확대하고 있으며, 이는 글로벌 애플리케이션의 지연 시간과 가용성을 개선합니다.</td></tr><tr><td>복제 프로토콜</td><td>CRDT 기반 복제</td><td>충돌 없는 복제 데이터 타입 (CRDTs) 을 활용한 새로운 복제 프로토콜이 부상하며, 복잡한 충돌 해결 없이도 분산 환경에서의 데이터 일관성을 보장합니다.</td></tr><tr><td>하이브리드 클라우드</td><td>클라우드 간 복제</td><td>멀티 클라우드와 하이브리드 클라우드 환경에서 서로 다른 클라우드 제공업체 간의 원활한 데이터 복제를 위한 도구와 플랫폼이 발전하고 있습니다.</td></tr><tr><td>엣지 컴퓨팅</td><td>엣지 - 중앙 복제</td><td>엣지 디바이스와 중앙 클라우드 사이의 효율적인 양방향 데이터 복제 솔루션이 발전하여, IoT 및 엣지 컴퓨팅 애플리케이션의 효율성이 향상되고 있습니다.</td></tr><tr><td>데이터베이스 엔진</td><td>지연 시간 최적화</td><td>새로운 데이터베이스 엔진들이 복제 지연을 최소화하기 위한 혁신적인 기술을 도입하고 있으며, 특히 글로벌 분산 환경에서 실시간에 가까운 성능을 제공합니다.</td></tr><tr><td>인공지능</td><td>AI 기반 복제 관리</td><td>머신러닝과 AI 를 활용하여 복제 토폴로지 최적화, 복제 지연 예측, 장애 조치 자동화 등을 수행하는 지능형 복제 관리 시스템이 등장하고 있습니다.</td></tr><tr><td>보안</td><td>제로 트러스트 복제</td><td>제로 트러스트 보안 모델을 복제 시스템에 적용하여, 노드 간 강력한 인증, 암호화, 접근 제어를 통해 데이터 복제의 보안을 강화하는 추세입니다.</td></tr><tr><td>쿼리 라우팅</td><td>지능형 쿼리 라우팅</td><td>복제 지연, 노드 부하, 데이터 위치, 사용자 위치 등 다양한 요소를 고려하여 최적의 복제본으로 쿼리를 라우팅하는 지능형 시스템이 발전하고 있습니다.</td></tr><tr><td>블록체인</td><td>블록체인 기반 복제</td><td>블록체인 기술을 활용한 복제 메커니즘이 금융 및 공급망 분야에서 채택되고 있으며, 분산 원장 기술로 데이터 무결성과 감사 능력을 향상시킵니다.</td></tr><tr><td>컨테이너화</td><td>컨테이너 기반 복제</td><td>Kubernetes 와 같은 컨테이너 오케스트레이션 플랫폼과 통합된 데이터베이스 복제 솔루션이 확산되어, 클라우드 네이티브 환경에서의 배포와 관리가 간소화되고 있습니다.</td></tr></tbody></table><h3 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h3><table><thead><tr><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>새로운 이론</td><td>PACELC 이론</td><td>CAP 이론을 확장한 PACELC 이론이 주목받고 있으며, 이는 네트워크 파티션 상황 (P) 에서 가용성 (A) 과 일관성 (C) 사이의 트레이드오프뿐만 아니라, 정상 상황 (E) 에서도 지연 시간 (L) 과 일관성 (C) 사이의 트레이드오프가 있음을 강조합니다.</td></tr><tr><td>기술 발전</td><td>지연 시간 인식 복제</td><td>지리적 거리와 네트워크 상태를 실시간으로 고려하여 복제 전략을 동적으로 조정하는 지연 시간 인식 복제 기술이 개발되고 있습니다.</td></tr><tr><td>아키텍처 변화</td><td>멀티 쓰기 지역</td><td>여러 지역에서 쓰기를 허용하면서도 강한 일관성을 제공하는 새로운 아키텍처가 등장하고 있으며, 이는 글로벌 애플리케이션의 복잡성을 줄이고 있습니다.</td></tr><tr><td>복제 최적화</td><td>차등적 복제</td><td>데이터의 중요도와 접근 패턴에 따라 다른 복제 전략과 일관성 수준을 적용하는 차등적 복제 접근법이 효율성을 높이고 있습니다.</td></tr><tr><td>분산 합의</td><td>RAFT 와 Paxos 진화</td><td>분산 합의 알고리즘인 RAFT 와 Paxos 가 계속 발전하여, 더 나은 성능과 이해하기 쉬운 구현으로 복제 시스템의 일관성을 보장합니다.</td></tr><tr><td>실시간 애플리케이션</td><td>실시간 복제 보장</td><td>실시간 애플리케이션을 위한, 지연 시간 보장과 함께 일관성을 유지하는 특수한 복제 메커니즘이 연구되고 있습니다.</td></tr><tr><td>복구 기술</td><td>자가 치유 복제</td><td>복제 시스템이 장애나 불일치를 자동으로 감지하고 복구하는 자가 치유 메커니즘이 더욱 정교해지고 있습니다.</td></tr><tr><td>웹 3</td><td>탈중앙화 복제</td><td>웹 3 환경에서 중앙 권한 없이 데이터를 복제하고 동기화하는 탈중앙화 복제 모델이 개발되고 있습니다.</td></tr><tr><td>양자 컴퓨팅</td><td>양자 안전 복제</td><td>미래의 양자 컴퓨팅 위협에 대비한 양자 내성 암호화를 적용한 복제 프로토콜이 연구되고 있습니다.</td></tr><tr><td>정책 및 규제</td><td>지역별 데이터 주권</td><td>데이터 주권과 관련된 규제 강화로 인해, 특정 국가나 지역 내에서만 데이터를 유지하는 지역 제한적 복제 전략이 중요해지고 있습니다.</td></tr></tbody></table><h3 id=앞으로의-전망>앞으로의 전망<a hidden class=anchor aria-hidden=true href=#앞으로의-전망>#</a></h3><table><thead><tr><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>자율 복제</td><td>자가 최적화 시스템</td><td>AI 와 기계학습을 활용해 워크로드, 네트워크 상태, 사용자 패턴에 따라 자동으로 복제 전략을 최적화하는 자율 복제 시스템이 보편화될 전망입니다.</td></tr><tr><td>양자 기술</td><td>양자 강화 복제</td><td>양자 컴퓨팅 기술을 활용하여 복잡한 분산 환경에서도 효율적인 복제와 동기화를 가능하게 하는 새로운 접근법이 연구되고 있습니다.</td></tr><tr><td>초대규모 분산 시스템</td><td>초대규모 복제</td><td>수천 또는 수만 개의 노드에 걸친 초대규모 분산 시스템에서도 효율적으로 작동하는 새로운 복제 패러다임이 개발될 것으로 예상됩니다.</td></tr><tr><td>규제 대응</td><td>규제 인식 복제</td><td>데이터 현지화 요구사항, 개인정보 보호법 등 각국의 규제를 자동으로 인식하고 준수하는 지능형 복제 시스템이 증가할 것입니다.</td></tr><tr><td>다중 모델 데이터베이스</td><td>다양한 모델 간 복제</td><td>관계형, NoSQL, 그래프 등 서로 다른 데이터 모델을 가진 데이터베이스 간의 원활한 복제를 지원하는 기술이 발전할 전망입니다.</td></tr><tr><td>메타버스</td><td>메타버스 데이터 복제</td><td>메타버스와 같은 대규모 가상 환경에서 실시간 상호작용을 위한 초저지연 데이터 복제 기술이 중요해질 것입니다.</td></tr><tr><td>지능형 에지</td><td>에지 - 클라우드 지능형 복제</td><td>에지 장치와 중앙 클라우드 간의 지능적인 데이터 복제 전략이 발전하여, 제한된 대역폭과 간헐적 연결 환경에서도 효율적인 동기화가 가능해질 것입니다.</td></tr><tr><td>환경 친화적 복제</td><td>에너지 효율적 복제</td><td>데이터 센터의 에너지 소비 감소를 위해, 복제 프로세스의 에너지 효율성을 최적화하는 친환경 복제 기술이 중요해질 것입니다.</td></tr><tr><td>하이브리드 일관성</td><td>동적 일관성 수준</td><td>애플리케이션 요구사항에 따라 데이터 항목별로 일관성 수준을 동적으로 조정할 수 있는 하이브리드 일관성 모델이 발전할 것으로 예상됩니다.</td></tr><tr><td></td><td></td><td></td></tr><tr><td>통합 데이터 패브릭</td><td>전사적 복제 통합</td><td>조직 전체의 다양한 데이터 소스와 시스템을 아우르는 통합 데이터 패브릭 내에서 일관된 복제 전략을 제공하는 솔루션이 등장할 것입니다.</td></tr></tbody></table><h3 id=추가-학습-주제>추가 학습 주제<a hidden class=anchor aria-hidden=true href=#추가-학습-주제>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>설명</th></tr></thead><tbody><tr><td>복제 아키텍처</td><td>지리적 분산 복제</td><td>여러 지역에 걸쳐 데이터를 복제하는 방법과 그로 인한 일관성, 지연 시간 문제를 다룹니다.</td></tr><tr><td></td><td>계층형 복제</td><td>복제본을 계층 구조로 조직하여 확장성과 효율성을 개선하는 방법을 학습합니다.</td></tr><tr><td>데이터 동기화</td><td>양방향 복제</td><td>두 노드 간에 양방향으로 데이터를 복제하고 충돌을 해결하는 기술을 다룹니다.</td></tr><tr><td></td><td>증분 복제</td><td>전체 데이터가 아닌 변경된 부분만 효율적으로 복제하는 기법을 학습합니다.</td></tr><tr><td>일관성 모델</td><td>강한 일관성 vs 최종 일관성</td><td>다양한 일관성 모델의 특징과 트레이드오프를 이해합니다.</td></tr><tr><td></td><td>인과적 일관성</td><td>관련 작업 간의 인과 관계를 보존하는 일관성 모델을 학습합니다.</td></tr><tr><td>성능 최적화</td><td>복제 지연 관리</td><td>복제 지연을 최소화하고 관리하는 기법을 탐구합니다.</td></tr><tr><td></td><td>배치 복제 최적화</td><td>변경사항을 효율적으로 배치 처리하여 복제 성능을 개선하는 방법을 학습합니다.</td></tr><tr><td>장애 대응</td><td>자동 장애 조치</td><td>마스터 노드 장애 시 자동으로 슬레이브를 승격시키는 메커니즘을 이해합니다.</td></tr><tr><td></td><td>분할 브레인 해결</td><td>네트워크 분할로 인한 &rsquo; 분할 브레인 &rsquo; 문제와 그 해결책을 학습합니다.</td></tr><tr><td>실무 응용</td><td>클라우드 기반 복제</td><td>AWS, Azure, GCP 등 클라우드 환경에서의 복제 구현 방법을 탐구합니다.</td></tr><tr><td></td><td>컨테이너 환경 복제</td><td>Kubernetes 와 같은 컨테이너 오케스트레이션 환경에서의 데이터 복제를 학습합니다.</td></tr><tr><td>보안</td><td>복제 데이터 암호화</td><td>복제 과정에서 데이터 보안을 유지하는 암호화 기법을 이해합니다.</td></tr><tr><td></td><td>보안 복제 프로토콜</td><td>안전한 복제를 위한 인증, 권한 부여, 감사 메커니즘을 학습합니다.</td></tr><tr><td>모니터링</td><td>복제 상태 모니터링</td><td>복제 시스템의 상태와 성능을 효과적으로 모니터링하는 방법을 탐구합니다.</td></tr></tbody></table><h3 id=관련-추가-학습-주제>관련 추가 학습 주제<a hidden class=anchor aria-hidden=true href=#관련-추가-학습-주제>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>설명</th></tr></thead><tbody><tr><td>분산 시스템</td><td>CAP 이론</td><td>일관성 (Consistency), 가용성 (Availability), 분할 내성 (Partition Tolerance) 간의 트레이드오프를 심층적으로 학습합니다.</td></tr><tr><td></td><td>PACELC 이론</td><td>CAP 이론을 확장한 모델로, 정상 상태에서의 지연 시간과 일관성 간의 관계까지 고려합니다.</td></tr><tr><td>분산 알고리즘</td><td>분산 합의 알고리즘</td><td>Paxos, Raft, ZAB 등 분산 시스템에서 합의를 이루는 알고리즘을 학습합니다.</td></tr><tr><td></td><td>벡터 클럭</td><td>분산 시스템에서 이벤트 간의 인과 관계를 추적하는 벡터 클럭 메커니즘을 이해합니다.</td></tr><tr><td>데이터베이스</td><td>샤딩 기법</td><td>데이터를 여러 노드에 수평적으로 분할하는 샤딩과 복제의 결합 방법을 학습합니다.</td></tr><tr><td></td><td>변경 데이터 캡처 (CDC)</td><td>데이터베이스의 변경사항을 실시간으로 캡처하고 복제하는 CDC 기술을 탐구합니다.</td></tr><tr><td>클라우드 기술</td><td>멀티 리전 아키텍처</td><td>여러 클라우드 리전에 걸친 애플리케이션 및 데이터 복제 전략을 학습합니다.</td></tr><tr><td></td><td>서버리스 복제</td><td>서버리스 환경에서의 데이터 복제 패턴과 구현 방법을 이해합니다.</td></tr><tr><td>데이터 스트리밍</td><td>이벤트 소싱</td><td>상태 변경을 이벤트로 저장하고 복제하는 이벤트 소싱 패턴을 학습합니다.</td></tr><tr><td></td><td>스트림 처리 플랫폼</td><td>Kafka, Pulsar 등 스트림 처리 플랫폼을 활용한 복제 구현을 탐구합니다.</td></tr><tr><td>성능 엔지니어링</td><td>복제 성능 측정</td><td>복제 시스템의 성능을 측정하고 평가하는 방법과 지표를 이해합니다.</td></tr><tr><td></td><td>병목 현상 분석</td><td>복제 시스템에서 발생하는 성능 병목 현상을 식별하고 해결하는 기법을 학습합니다.</td></tr><tr><td>DevOps</td><td>복제 자동화</td><td>CI/CD 파이프라인을 통한 복제 시스템 배포 및 관리 자동화를 탐구합니다.</td></tr><tr><td></td><td>카오스 엔지니어링</td><td>장애 주입 테스트를 통해 복제 시스템의 탄력성을 평가하는 방법을 학습합니다.</td></tr><tr><td>신기술</td><td>양자 안전 복제</td><td>양자 컴퓨팅 시대에 대비한 안전한 복제 프로토콜을 이해합니다.</td></tr></tbody></table><hr><h2 id=용어-정리-2>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-2>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td><strong>Replication</strong></td><td>데이터나 시스템 구성 요소의 복제본을 생성하여 여러 위치에 분산시켜 저장하는 기술</td></tr><tr><td><strong>Master Node</strong></td><td>데이터의 원본을 보유하고 있는 노드로, 모든 쓰기 연산을 처리합니다.</td></tr><tr><td><strong>Slave Node</strong></td><td>Master Node 의 데이터를 복제하여 보유하는 노드로, 주로 읽기 연산을 처리합니다.</td></tr><tr><td><strong>Synchronous Replication</strong></td><td>데이터 변경이 모든 복제본에 동시에 적용되어 일관성을 유지하는 복제 방식</td></tr><tr><td><strong>Asynchronous Replication</strong></td><td>데이터 변경이 일정 시간 지연 후 복제본에 적용되어 성능은 향상되지만 일관성은 낮아질 수 있는 복제 방식</td></tr><tr><td>복제 지연 (Replication Lag)</td><td>마스터에서 변경된 데이터가 복제본에 반영되기까지 걸리는 시간 차이</td></tr><tr><td>장애 조치 (Failover)</td><td>주 노드 (마스터) 장애 시 다른 노드로 역할이 자동 전환되는 프로세스</td></tr><tr><td>분할 브레인 (Split Brain)</td><td>네트워크 분할로 인해 여러 노드가 자신을 마스터로 인식하는 문제 상황</td></tr><tr><td>준동기식 복제 (Semi-Synchronous)</td><td>적어도 하나의 복제본이 변경사항을 확인할 때까지만 기다리는 복제 방식</td></tr><tr><td>스테일 데이터 (Stale Data)</td><td>복제 지연으로 인해 복제본에 최신 변경사항이 반영되지 않은 오래된 데이터</td></tr><tr><td>토폴로지 (Topology)</td><td>복제 시스템에서 노드 간의 연결 및 데이터 흐름 구조</td></tr><tr><td>쿼럼 (Quorum)</td><td>분산 시스템에서 작업을 수행하기 위해 필요한 최소한의 노드 수</td></tr><tr><td>충돌 해결 (Conflict Resolution)</td><td>여러 노드에서 동시에 같은 데이터를 수정할 때 발생하는 충돌을 처리하는 메커니즘</td></tr><tr><td>복제 (Replication)</td><td>데이터를 여러 위치에 복사하여 저장하는 기술</td></tr><tr><td>마스터 - 슬레이브</td><td>단일 쓰기 노드와 다수 읽기 노드 구조</td></tr><tr><td>멀티 마스터</td><td>여러 노드가 동시에 쓰기 가능한 구조</td></tr><tr><td>벡터 클록 (Vector Clock)</td><td>분산 시스템에서 이벤트 순서 추적 기법</td></tr></tbody></table><hr><h2 id=참고-및-출처-2>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-2>#</a></h2><h3 id=고가용성-및-시스템-아키텍처-관련>고가용성 및 시스템 아키텍처 관련<a hidden class=anchor aria-hidden=true href=#고가용성-및-시스템-아키텍처-관련>#</a></h3><ol><li><a href=https://www.filecloud.com/blog/2015/12/architectural-patterns-for-high-availability/>FileCloud 블로그 - Architectural Patterns for High Availability</a></li><li><a href=https://www.geeksforgeeks.org/design-patterns-for-high-availability/>Design Patterns for High Availability - GeeksforGeeks</a></li><li><a href=https://www.designgurus.io/answers/detail/system-design-fundamentals>System Design Fundamentals - DesignGurus</a></li><li><a href=https://hackernoon.com/fundamentals-of-system-design-part-4-d6a62f3fa779>Fundamentals of System Design — Part 4 - HackerNoon</a></li></ol><h3 id=데이터-복제-개요-및-전략>데이터 복제 개요 및 전략<a hidden class=anchor aria-hidden=true href=#데이터-복제-개요-및-전략>#</a></h3><ol><li><a href=https://rivery.io/data-learning-center/data-replication/>Data Replication: Benefits, Types & Use Cases | Rivery</a></li><li><a href=https://rivery.io/data-learning-center/complete-guide-to-data-replication/>Database Replication: Types, Benefits, and Use Cases | Rivery</a></li><li><a href=https://estuary.dev/blog/data-replication-strategies/>7 Data Replication Strategies & Real World Use Cases 2024 - Estuary</a></li><li><a href=https://waytoeasylearn.com/learn/replication-methods/>Replication Methods - Simplified Learning - Waytoeasylearn</a></li><li><a href=https://www.geeksforgeeks.org/replication-in-system-design/>Replication in System Design - GeeksforGeeks</a></li><li><a href=https://www.geeksforgeeks.org/database-replication-and-their-types-in-system-design/>Database Replication in System Design - GeeksforGeeks</a></li><li><a href=https://medium.com/%40pulkitent/system-design-database-replication-part-1-3dcf4a300db1>System Design: Database Replication (Part 1) | by Pulkit Gupta</a></li><li><a href=https://www.geeksforgeeks.org/types-of-database-replication-system-design/>Types of Database Replication - GeeksforGeeks</a></li><li><a href=https://www.couchbase.com/blog/data-replication-advantages/>Data Replication: Advantages and Disadvantages - Couchbase</a></li><li><a href=https://lia.disi.unibo.it/Courses/AmmSistemi1617/ldap/www.centos.org/docs/5/html/CDS/ag/8.0/Managing_Replication-Replication_Scenarios.html>Replication Scenarios - CentOS 공식 문서</a></li></ol><h3 id=특정-기술-기반-복제-구조>특정 기술 기반 복제 구조<a hidden class=anchor aria-hidden=true href=#특정-기술-기반-복제-구조>#</a></h3><ol><li><a href=https://aws.amazon.com/ko/blogs/database/>AWS Database Blog - Database Replication</a></li><li><a href=https://cassandra.apache.org/doc/latest/architecture/replication.html>Cassandra Replication 공식 문서</a></li><li><a href=https://redis.io/docs/management/replication/>Redis Replication 공식 문서</a></li></ol><h3 id=일관성-및-cap-이론-관련>일관성 및 CAP 이론 관련<a hidden class=anchor aria-hidden=true href=#일관성-및-cap-이론-관련>#</a></h3><ol><li><a href=https://systemdesign.one/consistency-patterns/>Consistency Patterns - System Design</a></li><li><a href=https://www.bmc.com/blogs/cap-theorem/>CAP Theorem Explained - BMC Software Blogs</a></li><li><a href=https://waytoeasylearn.com/learn/examples-of-cap-theorem/>Examples of CAP Theorem - Simplified Learning</a></li><li><a href=https://www.geeksforgeeks.org/the-cap-theorem-in-dbms/>The CAP Theorem in DBMS - GeeksforGeeks</a></li></ol><h3 id=-액티브---액티브-vs-액티브---패시브-비교>✅ 액티브 - 액티브 vs. 액티브 - 패시브 비교<a hidden class=anchor aria-hidden=true href=#-액티브---액티브-vs-액티브---패시브-비교>#</a></h3><ol><li><a href=https://www.geeksforgeeks.org/active-active-vs-active-passive-architecture/>Active-Active vs. Active-Passive Architecture - GeeksforGeeks</a></li></ol><hr></div></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>