<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Adapter Pattern | hyunyoun's Blog</title><meta name=keywords content="Software-Engineering,Design-and-Architecture,Software-Design-Patterns,GoF,Structural,Adapter-pattern,Legacy-Integration,Interface-Conversion"><meta name=description content="Adapter Pattern 은 호환되지 않는 인터페이스를 가진 클래스들이 함께 작동할 수 있도록 하는 구조적 설계 패턴이다. 기존 코드 수정 없이 레거시 시스템과 신규 시스템을 연결하는 브리지 역할을 하며, 인터페이스 변환을 통해 시스템 간 상호 운용성을 제공한다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-development--engineering/fundamentals/programming-principles/design-patterns/gof/structural/adapter-pattern/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/software-development--engineering/fundamentals/programming-principles/design-patterns/gof/structural/adapter-pattern/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-development--engineering/fundamentals/programming-principles/design-patterns/gof/structural/adapter-pattern/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-development--engineering/fundamentals/programming-principles/design-patterns/gof/structural/adapter-pattern/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Adapter Pattern"><meta property="og:description" content="Adapter Pattern 은 호환되지 않는 인터페이스를 가진 클래스들이 함께 작동할 수 있도록 하는 구조적 설계 패턴이다. 기존 코드 수정 없이 레거시 시스템과 신규 시스템을 연결하는 브리지 역할을 하며, 인터페이스 변환을 통해 시스템 간 상호 운용성을 제공한다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Adapter Pattern"><meta name=twitter:description content="Adapter Pattern 은 호환되지 않는 인터페이스를 가진 클래스들이 함께 작동할 수 있도록 하는 구조적 설계 패턴이다. 기존 코드 수정 없이 레거시 시스템과 신규 시스템을 연결하는 브리지 역할을 하며, 인터페이스 변환을 통해 시스템 간 상호 운용성을 제공한다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"HY's Blog","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":8,"name":"Adapter Pattern","item":"https://buenhyden.github.io/posts/software-development--engineering/fundamentals/programming-principles/design-patterns/gof/structural/adapter-pattern/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>HY's Blog</a></div><h1>Adapter Pattern</h1><div class=post-description>Adapter Pattern 은 호환되지 않는 인터페이스를 가진 클래스들이 함께 작동할 수 있도록 하는 구조적 설계 패턴이다. 기존 코드 수정 없이 레거시 시스템과 신규 시스템을 연결하는 브리지 역할을 하며, 인터페이스 변환을 통해 시스템 간 상호 운용성을 제공한다.</div></header><div class=post-content><h2 id=adapter-pattern>Adapter Pattern<a hidden class=anchor aria-hidden=true href=#adapter-pattern>#</a></h2><p>Adapter Pattern 은 기존의 인터페이스 (Adaptee) 를 클라이언트가 기대하는 인터페이스 (Target) 로 변환하는 구조 패턴이다. 어댑터 (Adapter) 는 Target 인터페이스를 구현하고 Adaptee 객체를 감싸 (합성) 거나 상속하여, 클라이언트가 요구하는 방식으로 기능을 제공한다. 이를 통해 기존 코드 수정 없이 다양한 외부 시스템, 레거시 코드, 라이브러리와의 통합이 가능하며, 코드의 재사용성과 유지보수성을 크게 높일 수 있다.</p><h3 id=배경>배경<a hidden class=anchor aria-hidden=true href=#배경>#</a></h3><p>현재 사용하고 있는 라이브러리가 더 이상 요구에 부합하지 않아 재작성하거나 다른 라이브러리를 사용해야 할 때, 어댑터 패턴을 이용해 기존 코드를 가능한 적게 변경하면서 새로운 라이브러리로 교체할 수 있다.<br>기존에 있는 시스템에 새로운 써드파티 라이브러리가 추가되거나 레거시 인터페이스를 새로운 인터페이스로 교체하는 경우에 코드의 재사용성을 높일 수 있다.</p><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><p><strong>주요 목적:</strong></p><ol><li><strong>인터페이스 불일치 해결</strong>: 호환되지 않는 인터페이스 간의 연결</li><li><strong>코드 재사용성 향상</strong>: 기존 코드 수정 없이 새로운 환경에서 활용</li><li><strong>시스템 통합성 확보</strong>: 이질적인 시스템들의 원활한 협업</li><li><strong>유지보수성 개선</strong>: 변경 영향 범위 최소화</li></ol><p><strong>필요성:</strong></p><ul><li>레거시 시스템 현대화 프로젝트</li><li>서드파티 라이브러리 통합</li><li>마이크로서비스 아키텍처에서 서비스 간 통신</li><li>API 버전 관리 및 호환성 유지</li></ul><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><p>어댑터 패턴은 호환되지 않는 인터페이스를 가진 클래스들이 함께 동작할 수 있도록 중간에 어댑터를 두어 인터페이스를 변환해주는 구조적 디자인 패턴이다.</p><h4 id=기본-개념>기본 개념<a hidden class=anchor aria-hidden=true href=#기본-개념>#</a></h4><ol><li><strong>인터페이스 변환 (Interface Translation)</strong>: 클래스의 인터페이스를 사용자가 기대하는 다른 인터페이스로 변환하는 것</li><li><strong>Wrapper 개념</strong>: 어댑터가 기존 객체를 감싸서 새로운 인터페이스를 제공하는 방식으로, Wrapper 패턴이라고도 불림</li><li><strong>합성 vs 상속</strong>: 클래스 어댑터 (상속) 와 객체 어댑터 (합성) 두 가지 구현 방식</li><li><strong>중간 계층 (Intermediary Layer)</strong>: 코드와 레거시 클래스, 타사 클래스 간의 변환기 역할을 하는 중간 레이어</li></ol><h4 id=의도-intent>의도 (Intent)<a hidden class=anchor aria-hidden=true href=#의도-intent>#</a></h4><p>한 클래스의 인터페이스를 클라이언트에서 사용하고자 하는 다른 인터페이스로 변환한다. 어댑터를 이용하면 인터페이스 호환성 문제 때문에 같이 쓸 수 없는 클래스들을 연결해서 쓸 수 있다.</p><h4 id=다른-이름-also-known-as>다른 이름 (Also Known As)<a hidden class=anchor aria-hidden=true href=#다른-이름-also-known-as>#</a></h4><ul><li>Wrapper Pattern(래퍼 패턴)</li></ul><h4 id=동기-motivation--forces>동기 (Motivation / Forces)<a hidden class=anchor aria-hidden=true href=#동기-motivation--forces>#</a></h4><ul><li>기존 코드나 라이브러리의 인터페이스가 클라이언트 요구와 다를 때, 수정 없이 통합하고 싶을 때</li><li>외부 시스템, 레거시 코드, 써드파티 라이브러리와의 연동</li></ul><h4 id=적용-가능성-applicability>적용 가능성 (Applicability)<a hidden class=anchor aria-hidden=true href=#적용-가능성-applicability>#</a></h4><ul><li>기존 클래스를 사용하고 싶지만 그 인터페이스가 나머지 코드와 호환되지 않을 때</li><li>부모 클래스에 추가할 수 없는 어떤 공통 기능들이 없는 여러 기존 자식 클래스들을 재사용하려는 경우</li><li>써드파티 라이브러리 통합 시 인터페이스 불일치 해결이 필요한 경우</li><li>레거시 코드를 새로운 시스템에 통합할 때</li></ul><h4 id=패턴이-해결하고자-하는-설계-문제>패턴이 해결하고자 하는 설계 문제<a hidden class=anchor aria-hidden=true href=#패턴이-해결하고자-하는-설계-문제>#</a></h4><ol><li><p><strong>인터페이스 불일치 문제</strong></p><ul><li>서로 다른 시스템이나 라이브러리 간의 인터페이스 호환성 부족</li><li>메서드 이름, 매개변수, 반환값 형식의 차이</li></ul></li><li><p><strong>레거시 시스템 통합 문제</strong></p><ul><li>기존 시스템을 수정하지 않고 새로운 시스템과 연동 필요</li><li>코드 재작성 비용과 리스크 최소화</li></ul></li><li><p><strong>의존성 관리 문제</strong></p><ul><li>클라이언트 코드가 특정 구현체에 강하게 결합되는 문제</li><li>시스템 간 결합도 증가로 인한 유지보수 어려움</li></ul></li></ol><h4 id=문제를-해결하기-위한-설계-구조와-관계>문제를 해결하기 위한 설계 구조와 관계<a hidden class=anchor aria-hidden=true href=#문제를-해결하기-위한-설계-구조와-관계>#</a></h4><pre class=mermaid>graph TB
    subgraph &#34;Problem Space&#34;
        P1[인터페이스 불일치]
        P2[레거시 시스템 통합]
        P3[의존성 관리]
    end
    
    subgraph &#34;Solution Structure&#34;
        S1[Target Interface]
        S2[Adapter Class]
        S3[Adaptee Class]
    end
    
    subgraph &#34;Design Relationships&#34;
        R1[Inheritance/Implementation]
        R2[Composition/Aggregation]
        R3[Delegation Pattern]
    end
    
    P1 --&gt; S1
    P2 --&gt; S2
    P3 --&gt; S3
    
    S1 --&gt; R1
    S2 --&gt; R2
    S3 --&gt; R3
</pre><p><strong>설계 구조 상세:</strong></p><ol><li><p><strong>계층적 분리 (Layered Separation)</strong></p><ul><li>클라이언트 계층과 서비스 계층 간의 명확한 분리</li><li>각 계층의 독립적 발전 가능</li></ul></li><li><p><strong>인터페이스 추상화 (Interface Abstraction)</strong></p><ul><li>구체적 구현으로부터 클라이언트 보호</li><li>다형성을 통한 유연한 구현체 교체</li></ul></li><li><p><strong>위임 메커니즘 (Delegation Mechanism)</strong></p><ul><li>Adapter 가 실제 작업을 Adaptee 에게 위임</li><li>책임의 명확한 분리</li></ul></li></ol><h4 id=실무-구현-연관성>실무 구현 연관성<a hidden class=anchor aria-hidden=true href=#실무-구현-연관성>#</a></h4><ol><li><p><strong>인터페이스 호환성 (Interface Compatibility)</strong></p><ul><li>서로 다른 인터페이스를 가진 클래스들 간의 호환성 확보</li><li>실무에서는 API 통합, 레거시 시스템 연동 시 필수적 개념</li></ul></li><li><p><strong>구조적 변환 (Structural Transformation)</strong></p><ul><li>인터페이스 구조의 변환을 통한 시스템 통합</li><li>실무에서는 데이터 형식 변환, 프로토콜 변환에 활용</li></ul></li><li><p><strong>위임 (Delegation)</strong></p><ul><li>Adapter 가 실제 작업을 Adaptee 에게 위임하는 메커니즘</li><li>실무에서는 Wrapper 클래스 구현 시 핵심 원리</li></ul></li><li><p><strong>투명성 (Transparency)</strong></p><ul><li>클라이언트가 Adapter 의 존재를 인식하지 못하는 투명한 연동</li><li>실무에서는 시스템 간 결합도 최소화에 기여</li></ul></li></ol><table><thead><tr><th>개념</th><th>실무 구현 측면</th><th>연관성</th></tr></thead><tbody><tr><td>인터페이스 호환성</td><td>API Gateway, Service Mesh</td><td>마이크로서비스 아키텍처에서 서비스 간 통신 표준화</td></tr><tr><td>구조적 변환</td><td>Data Mapper, Message Translator</td><td>ETL 프로세스, 메시지 큐 시스템에서 데이터 변환</td></tr><tr><td>위임</td><td>Proxy Pattern, Decorator Pattern</td><td>AOP(Aspect-Oriented Programming) 구현</td></tr><tr><td>투명성</td><td>Interface Segregation, Dependency Injection</td><td>SOLID 원칙 준수, IoC 컨테이너 설계</td></tr></tbody></table><h3 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><p><strong>핵심 기능:</strong></p><ol><li><p><strong>인터페이스 변환 (Interface Translation)</strong></p><ul><li>클라이언트가 요구하는 인터페이스로 변환</li><li>메서드 시그니처, 파라미터 형식 등 조정</li></ul></li><li><p><strong>데이터 변환 (Data Transformation)</strong></p><ul><li>입력/출력 데이터 형식 변환</li><li>프로토콜 간 데이터 구조 매핑</li></ul></li><li><p><strong>예외 처리 (Exception Handling)</strong></p><ul><li>Adaptee 의 예외를 Target 인터페이스에 맞게 변환</li><li>오류 상황에 대한 적절한 대응</li></ul></li></ol><p><strong>주요 역할:</strong></p><ul><li><strong>브리지 (Bridge)</strong>: 서로 다른 시스템 간의 연결점</li><li><strong>번역기 (Translator)</strong>: 인터페이스 언어 간의 번역</li><li><strong>중재자 (Mediator)</strong>: 시스템 간 통신 중재</li></ul><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><table><thead><tr><th>특징</th><th>설명</th><th>실무 적용 예시</th></tr></thead><tbody><tr><td>투명성</td><td>클라이언트가 Adapter 존재를 모름</td><td>REST API Gateway 에서 내부 gRPC 서비스 호출</td></tr><tr><td>단방향성</td><td>특정 방향으로만 변환 수행</td><td>XML to JSON 변환기</td></tr><tr><td>조합성</td><td>여러 Adapter 연쇄 사용 가능</td><td>프로토콜 스택에서 다중 변환</td></tr><tr><td>확장성</td><td>새로운 Adaptee 추가 용이</td><td>결제 시스템에 새 PG 사 추가</td></tr></tbody></table><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><ol><li><p><strong>단일 책임 원칙 (Single Responsibility Principle)</strong></p><ul><li>Adapter 는 오직 인터페이스 변환만 담당</li><li>비즈니스 로직 추가 금지</li></ul></li><li><p><strong>개방 - 폐쇄 원칙 (Open-Closed Principle)</strong></p><ul><li>새로운 Adaptee 추가 시 기존 코드 수정 불필요</li><li>확장에는 열려있고 수정에는 닫혀있음</li></ul></li><li><p><strong>의존성 역전 원칙 (Dependency Inversion Principle)</strong></p><ul><li>고수준 모듈이 저수준 모듈에 의존하지 않음</li><li>추상화에 의존하는 구조</li></ul></li><li><p><strong>인터페이스 분리 원칙 (Interface Segregation Principle)</strong></p><ul><li>클라이언트가 사용하지 않는 메서드에 의존하지 않음</li><li>필요한 인터페이스만 노출</li></ul></li></ol><h3 id=주요-원리>주요 원리<a hidden class=anchor aria-hidden=true href=#주요-원리>#</a></h3><p>Adapter 가 중간자 역할, 메서드 호출을 받으면 내부에서 Adaptee 의 메서드 호출 흐름으로 변환</p><pre class=mermaid>classDiagram
    Client --&gt; Target
    Target &lt;|.. Adapter
    Adapter o-- Adaptee
    Client --&gt; Adapter: request()
    Adapter --&gt; Adaptee: specificRequest()
</pre><p>Adapter 는 내부에서 interface call → adaptee conversion → method dispatch 흐름을 수행</p><h3 id=작동-원리-및-방식>작동 원리 및 방식<a hidden class=anchor aria-hidden=true href=#작동-원리-및-방식>#</a></h3><ol><li>클라이언트 → Adapter 호출 (<code>Target</code> 메서드)</li><li>Adapter 내부에서 Adaptee 변환 로직 수행</li><li>Adaptee 메서드 호출</li><li>Adapter 가 결과를 클라이언트에 반환</li></ol><h4 id=구성-요소>구성 요소<a hidden class=anchor aria-hidden=true href=#구성-요소>#</a></h4><table><thead><tr><th>구성요소</th><th>분류</th><th>설명</th><th>주요 역할</th><th>특징</th></tr></thead><tbody><tr><td><strong>Target</strong></td><td>필수</td><td>클라이언트가 기대하는 인터페이스 정의</td><td>어댑터와의 계약 (클라이언트가 호출할 인터페이스)</td><td>인터페이스 또는 추상 클래스 형태로 정의됨</td></tr><tr><td><strong>Adapter</strong></td><td>필수</td><td>Target 을 구현하며, 요청을 Adaptee 에 맞게 변환</td><td>중재자 역할 수행</td><td>Target 을 구현하고 Adaptee 를 <strong>포함</strong>하거나 <strong>상속</strong></td></tr><tr><td><strong>Adaptee</strong></td><td>필수</td><td>기존 구현된 클래스 (기능 보유)</td><td>실질적인 처리 담당</td><td>외부 라이브러리 또는 변경이 어려운 코드</td></tr><tr><td><strong>Client</strong></td><td>필수</td><td>Target 을 통해 Adapter 에 요청을 보내는 사용자</td><td>간접적으로 기능 사용</td><td>Adapter 존재를 알지 못하며, Target 만 의존</td></tr><tr><td><strong>ConcreteTarget</strong></td><td>선택</td><td>Target 의 기본 구현체 (필요 시 사용)</td><td>Target 기본 기능 구현</td><td>추상 Target 을 직접 사용할 수 없는 경우 사용됨</td></tr><tr><td><strong>Multiple Adaptees</strong></td><td>선택</td><td>하나의 어댑터가 여러 Adaptee 인스턴스를 처리</td><td>다양한 Adaptee 를 공통 Target 에 맞게 변환</td><td>어댑터 내부에 전략 또는 매핑 로직 포함됨</td></tr></tbody></table><h4 id=object-adapter-방식>Object Adapter 방식<a hidden class=anchor aria-hidden=true href=#object-adapter-방식>#</a></h4><pre class=mermaid>sequenceDiagram
    participant Client
    participant Adapter
    participant Adaptee
    
    Client-&gt;&gt;Adapter: request()
    Adapter-&gt;&gt;Adapter: validateInput()
    Adapter-&gt;&gt;Adaptee: specificRequest()
    Adaptee-&gt;&gt;Adapter: result
    Adapter-&gt;&gt;Adapter: transformResult()
    Adapter-&gt;&gt;Client: transformedResult
</pre><p>Adapter Pattern 의 구조는 다음과 같은 핵심 구성요소들로 이루어진다:</p><pre class=mermaid>classDiagram
    class Target {
        &lt;&lt;interface&gt;&gt;
        +request()
    }

    class Adapter {
        +request()
        -adaptee : Adaptee
    }

    class Adaptee {
        +specificRequest()
    }

    class Client {
        -target : Target
        +execute()
    }

    class ConcreteTarget {
        +request()
    }

    Target &lt;|-- Adapter
    Adapter --&gt; Adaptee
    Client --&gt; Target
    Target &lt;|-- ConcreteTarget
</pre><ul><li><code>Target</code>: 클라이언트가 의존하는 추상 인터페이스</li><li><code>Adapter</code>: <code>Target</code> 을 구현하고, 내부적으로 <code>Adaptee</code> 를 참조</li><li><code>Adaptee</code>: 기존 시스템 또는 외부 라이브러리의 클래스</li><li><code>Client</code>: <code>Target</code> 을 통해 <code>Adapter</code> 를 사용하며, 실제로는 <code>Adaptee</code> 의 기능을 사용</li><li><code>ConcreteTarget</code>: 필요 시 <code>Target</code> 의 기본 구현체로 사용 가능</li></ul><h4 id=class-adapter-방식>Class Adapter 방식<a hidden class=anchor aria-hidden=true href=#class-adapter-방식>#</a></h4><pre class=mermaid>classDiagram
    class Target {
        &lt;&lt;interface&gt;&gt;
        +request()
    }

    class Adaptee {
        +specificRequest()
    }

    class Adapter {
        +request()
    }

    class Client {
        -target : Target
        +execute()
    }

    Adapter &lt;|-- Target
    Adapter &lt;|-- Adaptee
    Client --&gt; Target
</pre><ul><li><strong>Adapter</strong>는 <code>Target</code> 인터페이스를 구현하고 동시에 <code>Adaptee</code> 를 상속받음</li><li><strong>상속 기반</strong>으로, <code>Adaptee</code> 의 메서드를 직접 호출하여 <code>Target</code> 의 메서드를 구현</li><li><strong>장점</strong>: 성능 및 접근 속도 측면에서 효율적이며, 모든 <code>Adaptee</code> 기능에 접근 가능</li><li><strong>제약</strong>: **다중 상속이 가능한 언어 (C++, Python 등)**에서만 사용 가능</li></ul><h4 id=패턴-적용의-결과와-트레이드오프>패턴 적용의 결과와 트레이드오프<a hidden class=anchor aria-hidden=true href=#패턴-적용의-결과와-트레이드오프>#</a></h4><p><strong>긍정적 결과:</strong></p><ul><li>코드 재사용성 향상: 80% 이상의 기존 코드 재활용 가능</li><li>시스템 유연성 증대: 새로운 구현체 추가 용이성</li><li>테스트 용이성: Mock 객체를 통한 독립적 테스트</li></ul><p><strong>트레이드오프:</strong></p><ul><li>성능 오버헤드: 추가 계층으로 인한 5-10% 성능 저하</li><li>복잡성 증가: 클래스 수 증가로 인한 설계 복잡도 상승</li><li>메모리 사용량: 추가 객체 생성으로 인한 메모리 사용량 증가</li></ul><h3 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h3><table><thead><tr><th>구현 기법</th><th>핵심 개념</th><th>구성 요소</th><th>특징 및 장점</th><th>주요 사용 언어</th><th>대표 사용 사례</th></tr></thead><tbody><tr><td><strong>Object Adapter</strong></td><td><strong>합성 (Composition)</strong> 기반</td><td>Adapter 가 <code>Target</code> 인터페이스 구현 - <code>Adaptee</code> 를 내부 변수로 포함</td><td>- 단일 상속 언어에서 유리 - 유연한 Adaptee 교체 - 테스트 용이</td><td>Java, Python, JS</td><td>외부 API 어댑터, 마이크로서비스 연동</td></tr><tr><td><strong>Class Adapter</strong></td><td><strong>상속 (Inheritance)</strong> 기반</td><td>Adapter 가 <code>Target</code>, <code>Adaptee</code> 를 <strong>모두 상속</strong></td><td>- 메모리 효율적 - <code>Adaptee</code> 의 모든 기능 직접 사용 가능 - 다중 상속 필요</td><td>C++, Python</td><td>DB 드라이버 어댑터, 그래픽 인터페이스</td></tr><tr><td><strong>Two-way Adapter</strong></td><td>양방향 변환 가능</td><td>Adapter 가 <code>Target</code>, <code>Adaptee</code> 인터페이스 모두 구현 - 양방향 변환 메서드 포함</td><td>- 서로 다른 시스템 간 상호 변환 가능 - 통신 양방향 대응</td><td>Python, C++</td><td>Protocol ↔ API 변환, Dual API 어댑터</td></tr><tr><td><strong>Interface Adapter</strong></td><td><strong>부분 구현</strong></td><td>- 추상 클래스를 기반으로 일부 메서드만 오버라이딩 Default 메서드 제공 가능</td><td>- 인터페이스가 너무 클 때 유리 - 필요한 기능만 선택적으로 구현</td><td>Java, Python</td><td>이벤트 핸들러, 미디어 플레이어</td></tr><tr><td><strong>Adapter Registry / Factory</strong></td><td><strong>동적 인스턴스 관리 및 검색</strong></td><td>Adapter 인스턴스를 저장하고 키 기반으로 제공 - 다형성 및 전략 패턴과 혼용 가능</td><td>- 런타임 어댑터 선택 - 다양한 Adaptee 관리 가능 OCP 준수 가능</td><td>Java, Python</td><td>멀티 PG 연동, 멀티 클라우드 SDK 연동</td></tr></tbody></table><ul><li><strong>Object Adapter</strong>: 가장 일반적, 유지보수와 테스트에 유리함.</li><li><strong>Class Adapter</strong>: 성능상 유리하나, 유연성이 떨어지고 다중 상속이 필요.</li><li><strong>Two-way Adapter</strong>: 양방향 프로토콜 변환 시 필요. 구조가 복잡해질 수 있음.</li><li><strong>Interface Adapter</strong>: 이벤트 핸들러처럼 메서드가 많은 인터페이스에 유용.</li><li><strong>Adapter Registry/Factory</strong>: 어댑터를 전역적으로 관리할 수 있어 대규모 시스템에 적합.</li></ul><h4 id=object-adapter-객체-어댑터>Object Adapter (객체 어댑터)<a hidden class=anchor aria-hidden=true href=#object-adapter-객체-어댑터>#</a></h4><ul><li><strong>핵심</strong>: Adapter 가 <code>Target</code> 인터페이스를 구현하고, 내부에 <code>Adaptee</code> 객체를 <strong>포함</strong>(Composition)</li><li><strong>장점</strong>: 유연한 교체, 테스트 용이, 단일 상속 언어에서 사용 가능</li><li><strong>용도</strong>: 외부 API, 마이크로서비스 연동, 오픈소스 통합</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span><span class=lnt id=hl-5-18><a class=lnlinks href=#hl-5-18>18</a>
</span><span class=lnt id=hl-5-19><a class=lnlinks href=#hl-5-19>19</a>
</span><span class=lnt id=hl-5-20><a class=lnlinks href=#hl-5-20>20</a>
</span><span class=lnt id=hl-5-21><a class=lnlinks href=#hl-5-21>21</a>
</span><span class=lnt id=hl-5-22><a class=lnlinks href=#hl-5-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Target 인터페이스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MediaPlayer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file_name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=ne>NotImplementedError</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Adaptee 클래스 (기존 구현)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>VLCPlayer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play_vlc</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file_name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;VLC 플레이어로 재생: </span><span class=si>{</span><span class=n>file_name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Adapter 클래스 (객체 어댑터 방식)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MediaAdapter</span><span class=p>(</span><span class=n>MediaPlayer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>adaptee</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>adaptee</span> <span class=o>=</span> <span class=n>adaptee</span>  <span class=c1># 기존 VLCPlayer 객체 포함</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file_name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># Target 인터페이스의 play() 호출 시 adaptee 의 play_vlc() 위임</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>adaptee</span><span class=o>.</span><span class=n>play_vlc</span><span class=p>(</span><span class=n>file_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예</span>
</span></span><span class=line><span class=cl><span class=n>player</span> <span class=o>=</span> <span class=n>MediaAdapter</span><span class=p>(</span><span class=n>VLCPlayer</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>player</span><span class=o>.</span><span class=n>play</span><span class=p>(</span><span class=s2>&#34;movie.vlc&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=class-adapter-클래스-어댑터>Class Adapter (클래스 어댑터)<a hidden class=anchor aria-hidden=true href=#class-adapter-클래스-어댑터>#</a></h4><ul><li><strong>핵심</strong>: Adapter 가 <code>Target</code>, <code>Adaptee</code> 를 <strong>모두 상속</strong></li><li><strong>장점</strong>: Adaptee 의 기능 직접 활용 가능</li><li><strong>제약</strong>: Python 에서는 다중 상속 가능하지만, Java 등에서는 제한 있음</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15>15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16>16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17>17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18>18</a>
</span><span class=lnt id=hl-6-19><a class=lnlinks href=#hl-6-19>19</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Target 인터페이스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MediaPlayer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file_name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=ne>NotImplementedError</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Adaptee 클래스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MP4Player</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play_mp4</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file_name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;MP4 파일 재생: </span><span class=si>{</span><span class=n>file_name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Adapter 클래스 (클래스 어댑터 방식, 다중 상속)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MP4Adapter</span><span class=p>(</span><span class=n>MediaPlayer</span><span class=p>,</span> <span class=n>MP4Player</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file_name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># Target 인터페이스의 play()를 Adaptee 메서드로 매핑</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>play_mp4</span><span class=p>(</span><span class=n>file_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예</span>
</span></span><span class=line><span class=cl><span class=n>player</span> <span class=o>=</span> <span class=n>MP4Adapter</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>player</span><span class=o>.</span><span class=n>play</span><span class=p>(</span><span class=s2>&#34;music.mp4&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=two-way-adapter-양방향-어댑터>Two-Way Adapter (양방향 어댑터)<a hidden class=anchor aria-hidden=true href=#two-way-adapter-양방향-어댑터>#</a></h4><ul><li><strong>핵심</strong>: 하나의 어댑터가 <code>Target</code>, <code>Adaptee</code> 역할 모두 수행</li><li><strong>장점</strong>: 서로 다른 시스템 간 <strong>양방향 통신</strong> 가능</li><li><strong>용도</strong>: Protocol ↔ API 변환, 구형 ↔ 신형 API 상호 연동</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13>13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14>14</a>
</span><span class=lnt id=hl-7-15><a class=lnlinks href=#hl-7-15>15</a>
</span><span class=lnt id=hl-7-16><a class=lnlinks href=#hl-7-16>16</a>
</span><span class=lnt id=hl-7-17><a class=lnlinks href=#hl-7-17>17</a>
</span><span class=lnt id=hl-7-18><a class=lnlinks href=#hl-7-18>18</a>
</span><span class=lnt id=hl-7-19><a class=lnlinks href=#hl-7-19>19</a>
</span><span class=lnt id=hl-7-20><a class=lnlinks href=#hl-7-20>20</a>
</span><span class=lnt id=hl-7-21><a class=lnlinks href=#hl-7-21>21</a>
</span><span class=lnt id=hl-7-22><a class=lnlinks href=#hl-7-22>22</a>
</span><span class=lnt id=hl-7-23><a class=lnlinks href=#hl-7-23>23</a>
</span><span class=lnt id=hl-7-24><a class=lnlinks href=#hl-7-24>24</a>
</span><span class=lnt id=hl-7-25><a class=lnlinks href=#hl-7-25>25</a>
</span><span class=lnt id=hl-7-26><a class=lnlinks href=#hl-7-26>26</a>
</span><span class=lnt id=hl-7-27><a class=lnlinks href=#hl-7-27>27</a>
</span><span class=lnt id=hl-7-28><a class=lnlinks href=#hl-7-28>28</a>
</span><span class=lnt id=hl-7-29><a class=lnlinks href=#hl-7-29>29</a>
</span><span class=lnt id=hl-7-30><a class=lnlinks href=#hl-7-30>30</a>
</span><span class=lnt id=hl-7-31><a class=lnlinks href=#hl-7-31>31</a>
</span><span class=lnt id=hl-7-32><a class=lnlinks href=#hl-7-32>32</a>
</span><span class=lnt id=hl-7-33><a class=lnlinks href=#hl-7-33>33</a>
</span><span class=lnt id=hl-7-34><a class=lnlinks href=#hl-7-34>34</a>
</span><span class=lnt id=hl-7-35><a class=lnlinks href=#hl-7-35>35</a>
</span><span class=lnt id=hl-7-36><a class=lnlinks href=#hl-7-36>36</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 두 인터페이스 정의</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ModernAPI</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>request_json</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>LegacyAPI</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>request_xml</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>xml_data</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 두 구현체</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ModernService</span><span class=p>(</span><span class=n>ModernAPI</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>request_json</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;신형 API: JSON 처리 - </span><span class=si>{</span><span class=n>data</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>LegacyService</span><span class=p>(</span><span class=n>LegacyAPI</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>request_xml</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>xml_data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;구형 API: XML 처리 - </span><span class=si>{</span><span class=n>xml_data</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Two-way Adapter</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>DualAdapter</span><span class=p>(</span><span class=n>ModernAPI</span><span class=p>,</span> <span class=n>LegacyAPI</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>legacy</span> <span class=o>=</span> <span class=n>LegacyService</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>modern</span> <span class=o>=</span> <span class=n>ModernService</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>request_json</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># JSON → XML 변환 후 호출</span>
</span></span><span class=line><span class=cl>        <span class=n>xml_data</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;&lt;data&gt;</span><span class=si>{</span><span class=n>data</span><span class=si>}</span><span class=s2>&lt;/data&gt;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>legacy</span><span class=o>.</span><span class=n>request_xml</span><span class=p>(</span><span class=n>xml_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>request_xml</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>xml_data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># XML → JSON 변환 후 호출</span>
</span></span><span class=line><span class=cl>        <span class=n>json_data</span> <span class=o>=</span> <span class=n>xml_data</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&#34;&lt;data&gt;&#34;</span><span class=p>,</span> <span class=s2>&#34;&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&#34;&lt;/data&gt;&#34;</span><span class=p>,</span> <span class=s2>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>modern</span><span class=o>.</span><span class=n>request_json</span><span class=p>(</span><span class=n>json_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예</span>
</span></span><span class=line><span class=cl><span class=n>adapter</span> <span class=o>=</span> <span class=n>DualAdapter</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>adapter</span><span class=o>.</span><span class=n>request_json</span><span class=p>(</span><span class=s2>&#34;Hello JSON&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>adapter</span><span class=o>.</span><span class=n>request_xml</span><span class=p>(</span><span class=s2>&#34;&lt;data&gt;Hello XML&lt;/data&gt;&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=interface-adapter-인터페이스-어댑터>Interface Adapter (인터페이스 어댑터)<a hidden class=anchor aria-hidden=true href=#interface-adapter-인터페이스-어댑터>#</a></h4><ul><li><strong>핵심</strong>: 인터페이스가 너무 클 때, 필요한 메서드만 오버라이딩</li><li><strong>장점</strong>: 간편한 구현, 코드 중복 감소</li><li><strong>용도</strong>: 이벤트 핸들러, UI 컴포넌트, 미디어 처리</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span><span class=lnt id=hl-8-15><a class=lnlinks href=#hl-8-15>15</a>
</span><span class=lnt id=hl-8-16><a class=lnlinks href=#hl-8-16>16</a>
</span><span class=lnt id=hl-8-17><a class=lnlinks href=#hl-8-17>17</a>
</span><span class=lnt id=hl-8-18><a class=lnlinks href=#hl-8-18>18</a>
</span><span class=lnt id=hl-8-19><a class=lnlinks href=#hl-8-19>19</a>
</span><span class=lnt id=hl-8-20><a class=lnlinks href=#hl-8-20>20</a>
</span><span class=lnt id=hl-8-21><a class=lnlinks href=#hl-8-21>21</a>
</span><span class=lnt id=hl-8-22><a class=lnlinks href=#hl-8-22>22</a>
</span><span class=lnt id=hl-8-23><a class=lnlinks href=#hl-8-23>23</a>
</span><span class=lnt id=hl-8-24><a class=lnlinks href=#hl-8-24>24</a>
</span><span class=lnt id=hl-8-25><a class=lnlinks href=#hl-8-25>25</a>
</span><span class=lnt id=hl-8-26><a class=lnlinks href=#hl-8-26>26</a>
</span><span class=lnt id=hl-8-27><a class=lnlinks href=#hl-8-27>27</a>
</span><span class=lnt id=hl-8-28><a class=lnlinks href=#hl-8-28>28</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 인터페이스 (다수의 메서드)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MediaInterface</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play_audio</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play_video</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>stream</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 어댑터 기본 클래스 (Default 구현 제공)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AbstractMediaAdapter</span><span class=p>(</span><span class=n>MediaInterface</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play_audio</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play_video</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>stream</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 오디오 전용 어댑터 구현</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AudioAdapter</span><span class=p>(</span><span class=n>AbstractMediaAdapter</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>audio_player</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>audio_player</span> <span class=o>=</span> <span class=n>audio_player</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play_audio</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;오디오 어댑터로 </span><span class=si>{</span><span class=n>file</span><span class=si>}</span><span class=s2> 재생&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>audio_player</span><span class=o>.</span><span class=n>play</span><span class=p>(</span><span class=n>file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SimpleAudioPlayer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;단순 오디오 플레이어: </span><span class=si>{</span><span class=n>file</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>adapter</span> <span class=o>=</span> <span class=n>AudioAdapter</span><span class=p>(</span><span class=n>SimpleAudioPlayer</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>adapter</span><span class=o>.</span><span class=n>play_audio</span><span class=p>(</span><span class=s2>&#34;music.mp3&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=adapter-factory--registry>Adapter Factory / Registry<a hidden class=anchor aria-hidden=true href=#adapter-factory--registry>#</a></h4><ul><li><strong>핵심</strong>: 여러 어댑터들을 <strong>동적으로 생성</strong>하고 <strong>등록</strong>하여 관리</li><li><strong>장점</strong>: 전략 패턴과 결합 시 어댑터 구성 변경이 용이</li><li><strong>용도</strong>: 다수 PG/DB 연동, SDK 자동 매핑 등</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a>
</span><span class=lnt id=hl-9-11><a class=lnlinks href=#hl-9-11>11</a>
</span><span class=lnt id=hl-9-12><a class=lnlinks href=#hl-9-12>12</a>
</span><span class=lnt id=hl-9-13><a class=lnlinks href=#hl-9-13>13</a>
</span><span class=lnt id=hl-9-14><a class=lnlinks href=#hl-9-14>14</a>
</span><span class=lnt id=hl-9-15><a class=lnlinks href=#hl-9-15>15</a>
</span><span class=lnt id=hl-9-16><a class=lnlinks href=#hl-9-16>16</a>
</span><span class=lnt id=hl-9-17><a class=lnlinks href=#hl-9-17>17</a>
</span><span class=lnt id=hl-9-18><a class=lnlinks href=#hl-9-18>18</a>
</span><span class=lnt id=hl-9-19><a class=lnlinks href=#hl-9-19>19</a>
</span><span class=lnt id=hl-9-20><a class=lnlinks href=#hl-9-20>20</a>
</span><span class=lnt id=hl-9-21><a class=lnlinks href=#hl-9-21>21</a>
</span><span class=lnt id=hl-9-22><a class=lnlinks href=#hl-9-22>22</a>
</span><span class=lnt id=hl-9-23><a class=lnlinks href=#hl-9-23>23</a>
</span><span class=lnt id=hl-9-24><a class=lnlinks href=#hl-9-24>24</a>
</span><span class=lnt id=hl-9-25><a class=lnlinks href=#hl-9-25>25</a>
</span><span class=lnt id=hl-9-26><a class=lnlinks href=#hl-9-26>26</a>
</span><span class=lnt id=hl-9-27><a class=lnlinks href=#hl-9-27>27</a>
</span><span class=lnt id=hl-9-28><a class=lnlinks href=#hl-9-28>28</a>
</span><span class=lnt id=hl-9-29><a class=lnlinks href=#hl-9-29>29</a>
</span><span class=lnt id=hl-9-30><a class=lnlinks href=#hl-9-30>30</a>
</span><span class=lnt id=hl-9-31><a class=lnlinks href=#hl-9-31>31</a>
</span><span class=lnt id=hl-9-32><a class=lnlinks href=#hl-9-32>32</a>
</span><span class=lnt id=hl-9-33><a class=lnlinks href=#hl-9-33>33</a>
</span><span class=lnt id=hl-9-34><a class=lnlinks href=#hl-9-34>34</a>
</span><span class=lnt id=hl-9-35><a class=lnlinks href=#hl-9-35>35</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 어댑터 베이스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PaymentAdapter</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>):</span> <span class=k>raise</span> <span class=ne>NotImplementedError</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Adapter 1</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PayPalAdapter</span><span class=p>(</span><span class=n>PaymentAdapter</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;PayPal 결제 처리: </span><span class=si>{</span><span class=n>amount</span><span class=si>}</span><span class=s2>원&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Adapter 2</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>KakaoPayAdapter</span><span class=p>(</span><span class=n>PaymentAdapter</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;KakaoPay 결제 처리: </span><span class=si>{</span><span class=n>amount</span><span class=si>}</span><span class=s2>원&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Adapter Registry</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AdapterFactory</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>_registry</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@classmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>register</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>adapter_cls</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>cls</span><span class=o>.</span><span class=n>_registry</span><span class=p>[</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>adapter_cls</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@classmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_adapter</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>name</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_registry</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;No adapter found: </span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_registry</span><span class=p>[</span><span class=n>name</span><span class=p>]()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 등록</span>
</span></span><span class=line><span class=cl><span class=n>AdapterFactory</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=s2>&#34;paypal&#34;</span><span class=p>,</span> <span class=n>PayPalAdapter</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>AdapterFactory</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=s2>&#34;kakaopay&#34;</span><span class=p>,</span> <span class=n>KakaoPayAdapter</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용</span>
</span></span><span class=line><span class=cl><span class=n>adapter</span> <span class=o>=</span> <span class=n>AdapterFactory</span><span class=o>.</span><span class=n>get_adapter</span><span class=p>(</span><span class=s2>&#34;paypal&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>adapter</span><span class=o>.</span><span class=n>process_payment</span><span class=p>(</span><span class=mi>5000</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=요약-비교>요약 비교<a hidden class=anchor aria-hidden=true href=#요약-비교>#</a></h4><table><thead><tr><th>구현 기법</th><th>방식</th><th>특징 요약</th><th>실무 사용 예시</th></tr></thead><tbody><tr><td><strong>Object Adapter</strong></td><td>합성 기반</td><td>유연성 높고 일반적인 방식</td><td>외부 API, SOAP 연동</td></tr><tr><td><strong>Class Adapter</strong></td><td>다중 상속</td><td>성능 우수, Adaptee 기능 직접 활용 가능</td><td>C++ 드라이버, 그래픽 렌더링</td></tr><tr><td><strong>Two-way Adapter</strong></td><td>양방향 변환</td><td>상호 변환 가능, 컨텍스트 의존</td><td>양방향 통신, SDK ↔ REST 호환</td></tr><tr><td><strong>Interface Adapter</strong></td><td>부분 구현</td><td>필요한 메서드만 구현 가능</td><td>이벤트 리스너, UI 처리</td></tr><tr><td><strong>Factory/Registry</strong></td><td>런타임 관리</td><td>Adapter 동적 선택 및 관리 가능</td><td>PG 연동, 클라우드 API 변환</td></tr></tbody></table><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><table><thead><tr><th><strong>구분</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th><th><strong>기여 요인 / 설계 원칙</strong></th></tr></thead><tbody><tr><td>호환성</td><td>인터페이스 호환성</td><td>서로 다른 인터페이스를 가진 시스템이나 클래스가 함께 동작 가능</td><td>어댑터의 인터페이스 변환 기능</td></tr><tr><td>재사용성</td><td>기존 코드 재사용</td><td>검증된 Adaptee 로직을 수정 없이 재활용 가능</td><td>기존 클래스 유지, 중복 제거</td></tr><tr><td>캡슐화</td><td>클라이언트 코드 변경 최소화</td><td>클라이언트는 어댑터를 통해 동작하므로 기존 코드 수정 없이 새 기능 통합 가능</td><td>인터페이스 기반 설계</td></tr><tr><td>유연성</td><td>다양한 Adaptee 연동 지원</td><td>다양한 구현체나 외부 시스템을 동일한 인터페이스로 통합 가능</td><td>다형성, 어댑터 확장성</td></tr><tr><td>확장성</td><td>신규 Adaptee 확장 용이</td><td>어댑터만 추가하면 새로운 외부 시스템도 통합 가능</td><td>개방 - 폐쇄 원칙 (OCP), 구성 기반 확장</td></tr><tr><td>테스트 용이성</td><td>Mock 어댑터 지원</td><td>어댑터를 Mock 객체로 대체하여 단위 테스트 수행 가능</td><td>테스트 격리, 유닛 테스트 강화</td></tr><tr><td>설계 원칙 준수</td><td>단일 책임 원칙 (SRP)</td><td>어댑터는 변환 로직만 담당하여 인터페이스와 비즈니스 로직을 분리</td><td>책임 분리</td></tr><tr><td>설계 원칙 준수</td><td>개방 - 폐쇄 원칙 (OCP)</td><td>어댑터 추가만으로 기능 확장 가능하며 기존 로직 수정 불필요</td><td>모듈화 및 인터페이스 기반 설계</td></tr><tr><td>구조적 이점</td><td>시스템 분리성</td><td>클라이언트와 서비스 구현체 간의 결합도 감소, 변경 전파 최소화</td><td>중간 계층을 통한 추상화</td></tr><tr><td>사용자 관점 편의</td><td>투명성</td><td>클라이언트는 어댑터 존재를 의식하지 않고 기존 방식대로 사용 가능</td><td>인터페이스 일치로 인한 무중단 통합</td></tr></tbody></table><h3 id=단점-및-문제점>단점 및 문제점<a hidden class=anchor aria-hidden=true href=#단점-및-문제점>#</a></h3><h4 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h4><table><thead><tr><th><strong>항목</strong></th><th><strong>설명</strong></th><th><strong>해결 방안</strong></th></tr></thead><tbody><tr><td>클래스 수 증가</td><td>어댑터 클래스가 많아지면 구조가 복잡해지고 유지보수가 어려워짐</td><td>명확한 네이밍 규칙, 패키지 분리, 모듈화 설계 적용</td></tr><tr><td>성능 오버헤드</td><td>중간 계층을 추가함으로써 호출 체인이 길어져 실행 성능이 저하될 수 있음</td><td>불필요한 로직 제거, 핵심 기능만 래핑, 캐싱 및 배치 처리 도입</td></tr><tr><td>디버깅 어려움</td><td>여러 계층을 거친 호출로 인해 로그 추적과 디버깅이 복잡해짐</td><td>로그 체계 강화, 분산 트레이싱 도입 (OpenTelemetry 등), 단계별 검증 삽입</td></tr><tr><td>강결합 유도</td><td>Adaptee 에 대한 직접적인 의존도가 높아지면 유연성이 감소할 수 있음</td><td>인터페이스 기반 설계, 의존성 주입 (DI) 적용, 느슨한 결합 원칙 준수</td></tr><tr><td>인터페이스 제약</td><td>Target 인터페이스가 Adaptee 의 모든 기능을 감싸지 못할 수 있음</td><td>다중 인터페이스 분리, Facade 패턴과 조합하여 세분화된 기능별 분리 설계</td></tr><tr><td>과도한 사용</td><td>모든 호환 문제에 무조건 어댑터를 적용하면 오히려 설계가 비효율적이 될 수 있음</td><td>필요성 검토 후 제한적 적용, 통합 전략과 설계 목적 명확화</td></tr></tbody></table><h4 id=문제점>문제점<a hidden class=anchor aria-hidden=true href=#문제점>#</a></h4><table><thead><tr><th><strong>항목</strong></th><th><strong>원인</strong></th><th><strong>영향</strong></th><th><strong>탐지 및 진단</strong></th><th><strong>예방 방법</strong></th><th><strong>해결 방법 및 기법</strong></th></tr></thead><tbody><tr><td>메모리 누수</td><td>Adapter 가 Adaptee 를 장기 참조하고 GC 대상이 되지 않음</td><td>메모리 사용량 증가, 성능 저하</td><td>Heap 분석, 메모리 프로파일러</td><td>명시적 해제 로직 구현, 약한 참조 사용 (<code>WeakReference</code>)</td><td>객체 수명 주기 관리, 자동 자원 해제 (<code>contextlib</code>, <code>with</code>)</td></tr><tr><td>순환 의존성</td><td>Adapter 와 Adaptee 가 서로 참조하여 GC 되지 않는 순환 구조 발생</td><td>메모리 누수, StackOverflow, 교착 가능성</td><td>의존성 분석, 정적 분석 도구 사용</td><td>방향성 있는 의존 설계, 중간 이벤트 버스나 중계자 사용</td><td>이벤트 기반 구조 (Observer, Mediator) 로 전환</td></tr><tr><td>타입 안전성 부족</td><td>동적 캐스팅 또는 비정형 객체 사용으로 인한 런타임 오류</td><td><code>TypeError</code>, <code>ClassCastException</code>, 기능 오작동</td><td>정적 분석, 타입 검사기 (Mypy, TypeScript) 사용</td><td>제네릭 및 타입 힌트 적용, 강타입 설계</td><td>타입 가드 도입, 입력 검증 로직 추가</td></tr><tr><td>설정 불일치</td><td>어댑터와 어댑티 간 설정 또는 인코딩 방식 등이 달라 발생</td><td>실행 오류, 결과 왜곡, 예외 발생</td><td>통합 테스트, 설정 유효성 검사 추가</td><td>기본값 정의, 명시적 설정 명세 사용</td><td>설정 매핑 테이블, 체크포인트 기반 설정 검증</td></tr><tr><td>동기화 문제</td><td>멀티스레드 환경에서 어댑터 내부 공유 자원 접근 시 상태 불일치 발생</td><td>데이터 손실, Race condition, 교착상태</td><td>동시성 테스트, Thread Dump 분석</td><td>불변 객체 사용, Thread-safe 구조 설계</td><td><code>Lock</code>, <code>Queue</code>, <code>Atomic</code>, <code>Concurrent</code> 자료구조 활용</td></tr><tr><td>다중 어댑터 관리 어려움</td><td>다양한 외부 시스템을 연결할 때 어댑터 구성 및 유지가 복잡해짐</td><td>유지보수 비용 증가, 시스템 확장성 저하</td><td>구성 변경 시 테스트 실패 및 관리 혼란</td><td>어댑터 등록/관리 메타데이터화, 명세 기반 관리 도입</td><td>Adapter Factory 또는 Registry 패턴 도입</td></tr><tr><td>로직 중복</td><td>여러 Adapter 에 유사한 변환 로직이 반복 구현됨</td><td>유지보수성 악화, 코드 중복</td><td>코드 리뷰, 중복 검사 도구 사용</td><td>공통 인터페이스/변환 계층 도출</td><td>Abstract Adapter 또는 유틸 기반 공통 모듈화</td></tr><tr><td>호환성 오류</td><td>Adaptee 인터페이스 변경 후 Adapter 비호환 발생</td><td>시스템 통합 실패, 예외 발생</td><td>리그레션 테스트, 타입 시스템 적용</td><td>변경 감지 테스트 도입, 계약 기반 설계 적용</td><td>단위 테스트 강화, Wrapper 수정/리팩토링</td></tr></tbody></table><h3 id=도전-과제-및-해결책>도전 과제 및 해결책<a hidden class=anchor aria-hidden=true href=#도전-과제-및-해결책>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>도전 과제</strong></th><th><strong>원인</strong></th><th><strong>영향</strong></th><th><strong>예방 방법</strong></th><th><strong>해결 방안 및 기법</strong></th></tr></thead><tbody><tr><td><strong>설계/구조</strong></td><td>다양한 외부 인터페이스 대응</td><td>서로 다른 외부 시스템/라이브러리 연동 필요</td><td>어댑터 수 증가, 구조 복잡화</td><td>추상화 수준 재정의, 중간 변환 계층 도입, 공통 인터페이스 설계</td><td>어댑터 팩토리/레지스트리 적용, 계층화 설계, 전략 어댑터 사용</td></tr><tr><td></td><td>상속 기반 어댑터 한계</td><td>클래스 상속 기반은 언어 제한 존재 (ex. Java 다중 상속 불가)</td><td>유연성 제한, 테스트 어려움</td><td>상속보다 합성 (Composition) 우선</td><td>객체 어댑터 방식 적용, 인터페이스 기반 설계로 전환</td></tr><tr><td><strong>복잡성 관리</strong></td><td>어댑터 과다 사용</td><td>무분별한 적용 또는 비즈니스 로직 포함</td><td>유지보수성 저하, 코드 중복, 테스트 어려움</td><td>SRP(단일 책임 원칙) 준수, 필요한 경우에만 도입, 설계 단계에서 명확한 기준 수립</td><td>어댑터 전용 추상 계층 구성, 코드 생성 도구 사용, 문서화 강화</td></tr><tr><td></td><td>레거시 시스템 연동</td><td>기존 시스템 전체 교체 어려움</td><td>기술 부채 증가, 장애 복원력 저하</td><td>점진적 마이그레이션 전략 (Strangler Fig Pattern), 경계 기반 리팩토링</td><td>이벤트 소싱 + CQRS 기반 전환, 중간 어댑터 계층 분리</td></tr><tr><td><strong>성능 최적화</strong></td><td>계층 오버헤드 및 데이터 변환 비용</td><td>어댑터 계층 추가로 인한 호출/변환 오버헤드</td><td>응답 지연, 처리량 감소, 리소스 과소 활용</td><td>프로파일링 기반 설계 검토, 경량 구조 설계</td><td>캐싱 적용, 비동기 처리 도입, Lazy Initialization 전략 도입</td></tr><tr><td></td><td>실시간 데이터 스트리밍 변환</td><td>대용량 실시간 데이터 처리 및 포맷 변환 요구</td><td>지연시간 증가, 실시간 처리 실패 가능성</td><td>스트리밍 아키텍처 설계, 처리 방식 단순화</td><td>Apache Kafka Streams / Flink 기반 변환 처리</td></tr><tr><td><strong>테스트 전략</strong></td><td>어댑터 내부 호출의 테스트 어려움</td><td>Adaptee 호출이 숨겨져 있어 테스트 불가능 또는 어려움</td><td>테스트 커버리지 부족, 결함 검출 지연</td><td>인터페이스 주입 (DI), 인터페이스 기반 설계</td><td>Mock/Stub 도입, 테스트 더블 기반 단위 테스트 구성</td></tr><tr><td></td><td>다양한 어댑터 구성의 테스트 복잡도 증가</td><td>시스템 통합이 많은 경우 각 어댑터별 테스트 환경 요구</td><td>테스트 자동화 난이도 상승, 검증 누락 가능성</td><td>테스트 계층 분리, 계약 기반 테스트 도입</td><td>CI 파이프라인 연동, 시나리오 기반 테스트 자동화</td></tr><tr><td><strong>운영/모니터링</strong></td><td>인터페이스 변경의 영향 파급</td><td>외부 API 또는 라이브러리가 변경될 가능성 존재</td><td>Adapter 실패, 시스템 장애</td><td>인터페이스 변경 감지 도구 도입, 계약 기반 테스트 적용</td><td>버전 명시 및 관리, 자동화 테스트 도입, 모의 (Mock) Adaptee 구성</td></tr><tr><td></td><td>장애 추적 어려움</td><td>어댑터 계층 내부 처리가 로깅/트레이싱되지 않음</td><td>원인 진단 지연, 장애 확산 가능성</td><td>분산 트레이싱 (예: OpenTelemetry), 어댑터 내부 로깅 표준화 적용</td><td>메트릭 기반 알림 설정, APM 연계, 구조적 로깅 적용</td></tr><tr><td><strong>아키텍처 통합</strong></td><td>서비스 메시 환경에서 통신 복잡도 증가</td><td>마이크로서비스 간 이기종 통신 방식 존재</td><td>통신 비용 증가, 유지보수 어려움</td><td>표준화된 API 계약 정의, 공통 프로토콜 지정</td><td>API Gateway + Service Mesh 도입, Protocol Buffers 기반 통합</td></tr></tbody></table><h3 id=분류-기준에-따른-종류-및-유형>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형>#</a></h3><table><thead><tr><th>분류 기준</th><th>종류/유형</th><th>특징</th><th>적용 상황</th></tr></thead><tbody><tr><td>구현 방식</td><td>Object Adapter</td><td>합성 사용, 런타임 유연성</td><td>단일 상속 언어, 다중 Adaptee 지원</td></tr><tr><td>구현 방식</td><td>Class Adapter</td><td>상속 사용, 컴파일타임 결정</td><td>다중 상속 지원 언어, 양방향 변환</td></tr><tr><td>방향성</td><td>단방향 Adapter</td><td>한 방향으로만 변환</td><td>API 통합, 데이터 형식 변환</td></tr><tr><td>방향성</td><td>양방향 Adapter</td><td>양방향 변환 지원</td><td>시스템 간 상호 운용성</td></tr><tr><td>범위</td><td>인터페이스 Adapter</td><td>전체 인터페이스 변환</td><td>완전한 시스템 통합</td></tr><tr><td>범위</td><td>메서드 Adapter</td><td>특정 메서드만 변환</td><td>부분적 기능 통합</td></tr><tr><td>데이터 처리</td><td>동기 Adapter</td><td>즉시 처리 및 응답</td><td>실시간 요구사항</td></tr><tr><td>데이터 처리</td><td>비동기 Adapter</td><td>지연 처리, 콜백 사용</td><td>대용량 데이터, 네트워크 통신</td></tr></tbody></table><h3 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h3><table><thead><tr><th><strong>분야</strong></th><th><strong>예시 / 적용 대상</strong></th><th><strong>설명</strong></th><th><strong>구현 방식</strong></th></tr></thead><tbody><tr><td><strong>외부 API 연동</strong></td><td>결제 (PG), 인증, 메시징 API 어댑터</td><td>서로 다른 외부 API 인터페이스를 내부 시스템에 맞게 통합</td><td>객체 어댑터, 전략 어댑터 적용</td></tr><tr><td><strong>레거시 시스템 통합</strong></td><td>OldService → NewService, 레거시 DB/서비스 래퍼</td><td>기존 시스템을 신규 인터페이스에 맞게 마이그레이션 또는 연동</td><td>추상 어댑터 + 어댑터 팩토리 조합</td></tr><tr><td><strong>데이터 변환</strong></td><td>XML ↔ JSON, Kafka ↔ AWS SNS/SQS</td><td>포맷 및 메시지 프로토콜 간 변환 수행</td><td>메시지 어댑터, Serializer 어댑터</td></tr><tr><td><strong>클라우드 및 플랫폼</strong></td><td>AWS SDK, Azure SDK, GCP 클라이언트</td><td>멀티 클라우드 환경에서 벤더 종속성 제거 및 표준화</td><td>플랫폼 추상화 어댑터</td></tr><tr><td><strong>마이크로서비스 아키텍처</strong></td><td>API Gateway, gRPC ↔ REST</td><td>마이크로서비스 간 통신 방식 변환 (REST ↔ gRPC 등)</td><td>마이크로서비스용 네트워크 어댑터</td></tr><tr><td><strong>로깅 시스템</strong></td><td>SLF4J ↔ Log4j, 외부 로깅 → 내부 Logger</td><td>다양한 로깅 백엔드를 표준 인터페이스로 통합</td><td>인터페이스 기반 어댑터</td></tr><tr><td><strong>프론트엔드/모바일</strong></td><td>React Props 어댑터, RecyclerView Adapter</td><td>비동기 응답 데이터를 UI 컴포넌트에 맞게 변환</td><td>함수형 어댑터, 추상 클래스 상속</td></tr><tr><td><strong>파일 및 스트림 처리</strong></td><td>InputStream → Reader, BufferedReader</td><td>입출력 포맷이나 방식의 변환을 위한 래퍼 클래스 사용</td><td>다중 레벨 어댑터</td></tr><tr><td><strong>Java 표준 API</strong></td><td>InputStreamReader, Collections.enumeration()</td><td>자바 내장 어댑터 예시로, 객체 간 인터페이스 변환 수행</td><td>내부 클래스, 표준 어댑터 구현</td></tr><tr><td><strong>UI/그래픽 컴포넌트</strong></td><td>호환되지 않는 위젯 통합, 뷰 모델 매핑</td><td>다양한 프레임워크 또는 디자인 시스템 간 UI 컴포넌트 연동</td><td>컴포넌트 매핑 어댑터</td></tr><tr><td><strong>데이터베이스 연동</strong></td><td>JDBC ↔ ORM (JPA), Connection Pool 어댑터</td><td>DB 벤더 간 호환성 확보 및 마이그레이션 유연성 확보</td><td>ORM 어댑터, 커넥션 추상화 계층</td></tr><tr><td><strong>통합 메시징</strong></td><td>Event Bus ↔ MQ ↔ Kafka</td><td>서로 다른 메시지 시스템 간의 메시지 포맷/전송 방식 통합</td><td>메시지 브로커 어댑터</td></tr><tr><td><strong>인증/보안 연동</strong></td><td>OAuth2, SAML, JWT 기반 IdP 어댑터</td><td>다양한 인증 제공자를 하나의 인터페이스로 추상화</td><td>인증 토큰 어댑터, 인터페이스 래핑</td></tr></tbody></table><h3 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h3><h4 id=사례-1-레거시-지불-시스템-연동>사례 1: 레거시 지불 시스템 연동<a hidden class=anchor aria-hidden=true href=#사례-1-레거시-지불-시스템-연동>#</a></h4><p><strong>배경</strong>:</p><ul><li>신규 e-commerce 플랫폼에서는 <code>PaymentProcessor</code> 인터페이스를 사용하지만, 레거시 시스템은 LegacyPaymentService.processOldPayment()` 메서드만 제공</li></ul><p><strong>어댑터 구성</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span><span class=lnt id=hl-10-12><a class=lnlinks href=#hl-10-12>12</a>
</span><span class=lnt id=hl-10-13><a class=lnlinks href=#hl-10-13>13</a>
</span><span class=lnt id=hl-10-14><a class=lnlinks href=#hl-10-14>14</a>
</span><span class=lnt id=hl-10-15><a class=lnlinks href=#hl-10-15>15</a>
</span><span class=lnt id=hl-10-16><a class=lnlinks href=#hl-10-16>16</a>
</span><span class=lnt id=hl-10-17><a class=lnlinks href=#hl-10-17>17</a>
</span><span class=lnt id=hl-10-18><a class=lnlinks href=#hl-10-18>18</a>
</span><span class=lnt id=hl-10-19><a class=lnlinks href=#hl-10-19>19</a>
</span><span class=lnt id=hl-10-20><a class=lnlinks href=#hl-10-20>20</a>
</span><span class=lnt id=hl-10-21><a class=lnlinks href=#hl-10-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Target</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>interface</span> <span class=nc>PaymentProcessor</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>amount</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// Adaptee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>class</span> <span class=nc>LegacyPaymentService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>processOldPayment</span><span class=p>(</span><span class=kt>double</span><span class=w> </span><span class=n>value</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;Processed old payment: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>value</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// Adapter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>class</span> <span class=nc>PaymentAdapter</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>PaymentProcessor</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>LegacyPaymentService</span><span class=w> </span><span class=n>legacy</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>LegacyPaymentService</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>amount</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>double</span><span class=w> </span><span class=n>value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Double</span><span class=p>.</span><span class=na>parseDouble</span><span class=p>(</span><span class=n>amount</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>legacy</span><span class=p>.</span><span class=na>processOldPayment</span><span class=p>(</span><span class=n>value</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>Workflow</strong>:</p><ol><li>사용자는 <code>PaymentProcessor</code> 를 통해 결제 요청</li><li><code>PaymentAdapter</code> 가 요청을 변환</li><li><code>LegacyPaymentService</code> 가 처리</li></ol><h4 id=사례-2-외부-메일-발송-솔루션-교체>사례 2: 외부 메일 발송 솔루션 교체<a hidden class=anchor aria-hidden=true href=#사례-2-외부-메일-발송-솔루션-교체>#</a></h4><p><strong>시스템 구성</strong>:</p><ul><li>기존 MailSenderA(Adaptee), 신규 MailSenderB(Adaptee)</li><li>Target: 기존 시스템에서 사용하는 메일 발송 인터페이스</li><li>Adapter: MailSenderB → Target 변환</li><li>Client: 기존 시스템</li></ul><p><strong>Workflow</strong>:</p><ol><li>기존 시스템은 Target 인터페이스만 사용</li><li>MailSenderB 를 Adapter 로 감싸 Target 인터페이스로 변환</li><li>시스템 코드 수정 없이 신규 솔루션 적용</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[Client] → [Target 인터페이스] ← [Adapter] → [MailSenderB(Adaptee)]
</span></span></code></pre></td></tr></table></div></div><h4 id=사례-3-대형-전자상거래-플랫폼의-결제-시스템-통합>사례 3: 대형 전자상거래 플랫폼의 결제 시스템 통합<a hidden class=anchor aria-hidden=true href=#사례-3-대형-전자상거래-플랫폼의-결제-시스템-통합>#</a></h4><p><strong>시스템 구성</strong></p><ol><li><p>Frontend Application Layer</p><ul><li>사용자 인터페이스: React 기반 SPA</li><li>장바구니 서비스: Node.js 기반 마이크로서비스</li></ul></li><li><p>Backend Services Layer</p><ul><li>결제 서비스: Spring Boot 기반 핵심 비즈니스 로직</li><li>결제 어댑터: 다양한 PG 사 API 통합을 위한 Adapter Pattern 구현</li></ul></li><li><p>External Payment Gateways</p><ul><li>카드결제 PG: 신용카드/체크카드 처리</li><li>간편결제 PG: 카카오페이, 네이버페이 등</li><li>계좌이체 PG: 실시간 계좌이체</li><li>은행 API: 직접 은행 연동</li></ul></li></ol><pre class=mermaid>graph TB
    subgraph &#34;Frontend Application&#34;
        UI[사용자 인터페이스]
        Cart[장바구니 서비스]
    end
    
    subgraph &#34;Backend Services&#34;
        PaymentService[결제 서비스]
        PaymentAdapter[결제 어댑터]
    end
    
    subgraph &#34;External Payment Gateways&#34;
        PG1[카드결제 PG]
        PG2[간편결제 PG]
        PG3[계좌이체 PG]
        Bank[은행 API]
    end
    
    UI --&gt; Cart
    Cart --&gt; PaymentService
    PaymentService --&gt; PaymentAdapter
    PaymentAdapter --&gt; PG1
    PaymentAdapter --&gt; PG2
    PaymentAdapter --&gt; PG3
    PaymentAdapter --&gt; Bank
    
    classDef frontend fill:#e1f5fe
    classDef backend fill:#f3e5f5
    classDef external fill:#fff3e0
    
    class UI,Cart frontend
    class PaymentService,PaymentAdapter backend
    class PG1,PG2,PG3,Bank external
</pre><p><strong>Workflow</strong>:</p><pre class=mermaid>sequenceDiagram
    participant User as 사용자
    participant UI as 프론트엔드
    participant PaymentService as 결제서비스
    participant PaymentAdapter as 결제어댑터
    participant PG as PG사

    User-&gt;&gt;UI: 결제 요청
    UI-&gt;&gt;PaymentService: 결제 처리 요청
    PaymentService-&gt;&gt;PaymentService: 주문 검증
    PaymentService-&gt;&gt;PaymentAdapter: 결제 실행
    PaymentAdapter-&gt;&gt;PaymentAdapter: PG사 선택 및 데이터 변환
    PaymentAdapter-&gt;&gt;PG: PG사별 API 호출
    PG-&gt;&gt;PaymentAdapter: 결제 결과 응답
    PaymentAdapter-&gt;&gt;PaymentAdapter: 응답 데이터 표준화
    PaymentAdapter-&gt;&gt;PaymentService: 표준화된 결과 반환
    PaymentService-&gt;&gt;PaymentService: 결제 결과 처리
    PaymentService-&gt;&gt;UI: 결제 완료 응답
    UI-&gt;&gt;User: 결제 결과 표시
</pre><p><strong>Adapter Pattern 의 역할</strong>:</p><ol><li><p>인터페이스 통합</p><ul><li>각 PG 사의 서로 다른 API 스펙을 표준 인터페이스로 통합</li><li>결제 서비스는 하나의 인터페이스만 알면 모든 PG 사 이용 가능</li></ul></li><li><p>데이터 변환</p><ul><li>주문 정보를 각 PG 사가 요구하는 형식으로 변환</li><li>응답 데이터를 표준 형식으로 변환</li></ul></li><li><p>오류 처리 표준화</p><ul><li>각 PG 사의 서로 다른 오류 코드를 표준 오류 형식으로 변환</li><li>일관된 오류 처리 로직 제공<br>PG 사마다 다른 API 제공. 시스템 내부는 <code>BillingService</code> 인터페이스만 사용함.</li></ul></li></ol><p><strong>Adapter 구조</strong>:</p><pre class=mermaid>classDiagram
    BillingService &lt;|.. PG1Adapter
    BillingService &lt;|.. PG2Adapter
    PG1Adapter --&gt; PG1API
    PG2Adapter --&gt; PG2API
    Client --&gt; BillingService
</pre><p><strong>Adapter 유무에 따른 차이점</strong></p><ul><li><strong>Adapter 패턴 적용 전:</strong><ul><li>각 PG 사별로 별도의 결제 로직 필요</li><li>새로운 PG 사 추가 시 핵심 서비스 코드 수정 필요</li><li>코드 중복 및 유지보수 비용 증가</li><li>테스트 복잡도 증가</li></ul></li><li><strong>Adapter 패턴 적용 후:</strong><ul><li>단일 결제 인터페이스를 통한 모든 PG 사 이용</li><li>새로운 PG 사 추가 시 Adapter 만 구현하면 됨</li><li>핵심 비즈니스 로직과 PG 사 연동 로직 분리</li><li>독립적인 테스트 및 배포 가능</li></ul></li></ul><h3 id=구현-예시>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시>#</a></h3><h4 id=javascript>Javascript<a hidden class=anchor aria-hidden=true href=#javascript>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1> 1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2> 2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3> 3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4> 4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5> 5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6> 6</a>
</span><span class=lnt id=hl-15-7><a class=lnlinks href=#hl-15-7> 7</a>
</span><span class=lnt id=hl-15-8><a class=lnlinks href=#hl-15-8> 8</a>
</span><span class=lnt id=hl-15-9><a class=lnlinks href=#hl-15-9> 9</a>
</span><span class=lnt id=hl-15-10><a class=lnlinks href=#hl-15-10>10</a>
</span><span class=lnt id=hl-15-11><a class=lnlinks href=#hl-15-11>11</a>
</span><span class=lnt id=hl-15-12><a class=lnlinks href=#hl-15-12>12</a>
</span><span class=lnt id=hl-15-13><a class=lnlinks href=#hl-15-13>13</a>
</span><span class=lnt id=hl-15-14><a class=lnlinks href=#hl-15-14>14</a>
</span><span class=lnt id=hl-15-15><a class=lnlinks href=#hl-15-15>15</a>
</span><span class=lnt id=hl-15-16><a class=lnlinks href=#hl-15-16>16</a>
</span><span class=lnt id=hl-15-17><a class=lnlinks href=#hl-15-17>17</a>
</span><span class=lnt id=hl-15-18><a class=lnlinks href=#hl-15-18>18</a>
</span><span class=lnt id=hl-15-19><a class=lnlinks href=#hl-15-19>19</a>
</span><span class=lnt id=hl-15-20><a class=lnlinks href=#hl-15-20>20</a>
</span><span class=lnt id=hl-15-21><a class=lnlinks href=#hl-15-21>21</a>
</span><span class=lnt id=hl-15-22><a class=lnlinks href=#hl-15-22>22</a>
</span><span class=lnt id=hl-15-23><a class=lnlinks href=#hl-15-23>23</a>
</span><span class=lnt id=hl-15-24><a class=lnlinks href=#hl-15-24>24</a>
</span><span class=lnt id=hl-15-25><a class=lnlinks href=#hl-15-25>25</a>
</span><span class=lnt id=hl-15-26><a class=lnlinks href=#hl-15-26>26</a>
</span><span class=lnt id=hl-15-27><a class=lnlinks href=#hl-15-27>27</a>
</span><span class=lnt id=hl-15-28><a class=lnlinks href=#hl-15-28>28</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// JavaScript 예제
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>OldPrinter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>printOld</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Old format: </span><span class=si>${</span><span class=nx>text</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>NewPrinter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>print</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`New format: </span><span class=si>${</span><span class=nx>text</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Adapter
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>PrinterAdapter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>oldPrinter</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>oldPrinter</span> <span class=o>=</span> <span class=nx>oldPrinter</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>print</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>oldPrinter</span><span class=p>.</span><span class=nx>printOld</span><span class=p>(</span><span class=nx>text</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용법
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>oldPrinter</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>OldPrinter</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>adapter</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>PrinterAdapter</span><span class=p>(</span><span class=nx>oldPrinter</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>adapter</span><span class=p>.</span><span class=nx>print</span><span class=p>(</span><span class=s2>&#34;Hello World&#34;</span><span class=p>);</span> <span class=c1>// Old format: Hello World
</span></span></span></code></pre></td></tr></table></div></div><h4 id=javascript-내부-결제-시스템>JavaScript: 내부 결제 시스템<a hidden class=anchor aria-hidden=true href=#javascript-내부-결제-시스템>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1> 1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2> 2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3> 3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4> 4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5> 5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6> 6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7> 7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8> 8</a>
</span><span class=lnt id=hl-16-9><a class=lnlinks href=#hl-16-9> 9</a>
</span><span class=lnt id=hl-16-10><a class=lnlinks href=#hl-16-10>10</a>
</span><span class=lnt id=hl-16-11><a class=lnlinks href=#hl-16-11>11</a>
</span><span class=lnt id=hl-16-12><a class=lnlinks href=#hl-16-12>12</a>
</span><span class=lnt id=hl-16-13><a class=lnlinks href=#hl-16-13>13</a>
</span><span class=lnt id=hl-16-14><a class=lnlinks href=#hl-16-14>14</a>
</span><span class=lnt id=hl-16-15><a class=lnlinks href=#hl-16-15>15</a>
</span><span class=lnt id=hl-16-16><a class=lnlinks href=#hl-16-16>16</a>
</span><span class=lnt id=hl-16-17><a class=lnlinks href=#hl-16-17>17</a>
</span><span class=lnt id=hl-16-18><a class=lnlinks href=#hl-16-18>18</a>
</span><span class=lnt id=hl-16-19><a class=lnlinks href=#hl-16-19>19</a>
</span><span class=lnt id=hl-16-20><a class=lnlinks href=#hl-16-20>20</a>
</span><span class=lnt id=hl-16-21><a class=lnlinks href=#hl-16-21>21</a>
</span><span class=lnt id=hl-16-22><a class=lnlinks href=#hl-16-22>22</a>
</span><span class=lnt id=hl-16-23><a class=lnlinks href=#hl-16-23>23</a>
</span><span class=lnt id=hl-16-24><a class=lnlinks href=#hl-16-24>24</a>
</span><span class=lnt id=hl-16-25><a class=lnlinks href=#hl-16-25>25</a>
</span><span class=lnt id=hl-16-26><a class=lnlinks href=#hl-16-26>26</a>
</span><span class=lnt id=hl-16-27><a class=lnlinks href=#hl-16-27>27</a>
</span><span class=lnt id=hl-16-28><a class=lnlinks href=#hl-16-28>28</a>
</span><span class=lnt id=hl-16-29><a class=lnlinks href=#hl-16-29>29</a>
</span><span class=lnt id=hl-16-30><a class=lnlinks href=#hl-16-30>30</a>
</span><span class=lnt id=hl-16-31><a class=lnlinks href=#hl-16-31>31</a>
</span><span class=lnt id=hl-16-32><a class=lnlinks href=#hl-16-32>32</a>
</span><span class=lnt id=hl-16-33><a class=lnlinks href=#hl-16-33>33</a>
</span><span class=lnt id=hl-16-34><a class=lnlinks href=#hl-16-34>34</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// Adaptee: 외부 결제 API
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>ExternalPaymentAPI</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>pay</span><span class=p>(</span><span class=nx>amount</span><span class=p>,</span> <span class=nx>cardInfo</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`외부 결제 API로 </span><span class=si>${</span><span class=nx>amount</span><span class=si>}</span><span class=sb>원 결제 요청: </span><span class=si>${</span><span class=nx>cardInfo</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span> <span class=nx>success</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=nx>transactionId</span><span class=o>:</span> <span class=s2>&#34;12345&#34;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Target: 내부 결제 시스템이 기대하는 인터페이스
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>PaymentTarget</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>request</span><span class=p>(</span><span class=nx>amount</span><span class=p>,</span> <span class=nx>userInfo</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s2>&#34;이 메서드는 반드시 구현되어야 합니다.&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Adapter: 외부 API를 내부 시스템에 맞게 변환
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>PaymentAdapter</span> <span class=kr>extends</span> <span class=nx>PaymentTarget</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>externalApi</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>externalApi</span> <span class=o>=</span> <span class=nx>externalApi</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>request</span><span class=p>(</span><span class=nx>amount</span><span class=p>,</span> <span class=nx>userInfo</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 내부 시스템의 userInfo를 외부 API의 cardInfo로 변환
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>cardInfo</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=nx>userInfo</span><span class=p>.</span><span class=nx>name</span><span class=si>}</span><span class=sb>의 카드`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>externalApi</span><span class=p>.</span><span class=nx>pay</span><span class=p>(</span><span class=nx>amount</span><span class=p>,</span> <span class=nx>cardInfo</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Client: 내부 결제 시스템
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>externalApi</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ExternalPaymentAPI</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>adapter</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>PaymentAdapter</span><span class=p>(</span><span class=nx>externalApi</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>adapter</span><span class=p>.</span><span class=nx>request</span><span class=p>(</span><span class=mi>10000</span><span class=p>,</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;홍길동&#34;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>result</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=python>Python<a hidden class=anchor aria-hidden=true href=#python>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1> 1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2> 2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3> 3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4> 4</a>
</span><span class=lnt id=hl-17-5><a class=lnlinks href=#hl-17-5> 5</a>
</span><span class=lnt id=hl-17-6><a class=lnlinks href=#hl-17-6> 6</a>
</span><span class=lnt id=hl-17-7><a class=lnlinks href=#hl-17-7> 7</a>
</span><span class=lnt id=hl-17-8><a class=lnlinks href=#hl-17-8> 8</a>
</span><span class=lnt id=hl-17-9><a class=lnlinks href=#hl-17-9> 9</a>
</span><span class=lnt id=hl-17-10><a class=lnlinks href=#hl-17-10>10</a>
</span><span class=lnt id=hl-17-11><a class=lnlinks href=#hl-17-11>11</a>
</span><span class=lnt id=hl-17-12><a class=lnlinks href=#hl-17-12>12</a>
</span><span class=lnt id=hl-17-13><a class=lnlinks href=#hl-17-13>13</a>
</span><span class=lnt id=hl-17-14><a class=lnlinks href=#hl-17-14>14</a>
</span><span class=lnt id=hl-17-15><a class=lnlinks href=#hl-17-15>15</a>
</span><span class=lnt id=hl-17-16><a class=lnlinks href=#hl-17-16>16</a>
</span><span class=lnt id=hl-17-17><a class=lnlinks href=#hl-17-17>17</a>
</span><span class=lnt id=hl-17-18><a class=lnlinks href=#hl-17-18>18</a>
</span><span class=lnt id=hl-17-19><a class=lnlinks href=#hl-17-19>19</a>
</span><span class=lnt id=hl-17-20><a class=lnlinks href=#hl-17-20>20</a>
</span><span class=lnt id=hl-17-21><a class=lnlinks href=#hl-17-21>21</a>
</span><span class=lnt id=hl-17-22><a class=lnlinks href=#hl-17-22>22</a>
</span><span class=lnt id=hl-17-23><a class=lnlinks href=#hl-17-23>23</a>
</span><span class=lnt id=hl-17-24><a class=lnlinks href=#hl-17-24>24</a>
</span><span class=lnt id=hl-17-25><a class=lnlinks href=#hl-17-25>25</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Target Interface</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BillingService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>pay</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>:</span> <span class=nb>float</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=ne>NotImplementedError</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Adaptee</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PG1API</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>make_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;PG1 결제 완료: </span><span class=si>{</span><span class=n>value</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Adapter</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PG1Adapter</span><span class=p>(</span><span class=n>BillingService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>pg1</span> <span class=o>=</span> <span class=n>PG1API</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>pay</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>:</span> <span class=nb>float</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 내부 Adaptee 호출로 변환</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>pg1</span><span class=o>.</span><span class=n>make_payment</span><span class=p>(</span><span class=n>amount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Client</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>checkout</span><span class=p>(</span><span class=n>billing_service</span><span class=p>:</span> <span class=n>BillingService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>billing_service</span><span class=o>.</span><span class=n>pay</span><span class=p>(</span><span class=mf>100.0</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 실행</span>
</span></span><span class=line><span class=cl><span class=n>checkout</span><span class=p>(</span><span class=n>PG1Adapter</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>이 코드는 <strong>클라이언트는 <code>BillingService</code> 만 알면 되고</strong>, PG API 변경은 <code>PG1Adapter</code> 만 수정하면 되는 구조로, Adapter 패턴의 구조적 이점을 잘 보여준다.</p></blockquote><h4 id=python-결제-서비스>Python: 결제 서비스<a hidden class=anchor aria-hidden=true href=#python-결제-서비스>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1>  1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2>  2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3>  3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4>  4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5>  5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6>  6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7>  7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8>  8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9>  9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10> 10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11> 11</a>
</span><span class=lnt id=hl-18-12><a class=lnlinks href=#hl-18-12> 12</a>
</span><span class=lnt id=hl-18-13><a class=lnlinks href=#hl-18-13> 13</a>
</span><span class=lnt id=hl-18-14><a class=lnlinks href=#hl-18-14> 14</a>
</span><span class=lnt id=hl-18-15><a class=lnlinks href=#hl-18-15> 15</a>
</span><span class=lnt id=hl-18-16><a class=lnlinks href=#hl-18-16> 16</a>
</span><span class=lnt id=hl-18-17><a class=lnlinks href=#hl-18-17> 17</a>
</span><span class=lnt id=hl-18-18><a class=lnlinks href=#hl-18-18> 18</a>
</span><span class=lnt id=hl-18-19><a class=lnlinks href=#hl-18-19> 19</a>
</span><span class=lnt id=hl-18-20><a class=lnlinks href=#hl-18-20> 20</a>
</span><span class=lnt id=hl-18-21><a class=lnlinks href=#hl-18-21> 21</a>
</span><span class=lnt id=hl-18-22><a class=lnlinks href=#hl-18-22> 22</a>
</span><span class=lnt id=hl-18-23><a class=lnlinks href=#hl-18-23> 23</a>
</span><span class=lnt id=hl-18-24><a class=lnlinks href=#hl-18-24> 24</a>
</span><span class=lnt id=hl-18-25><a class=lnlinks href=#hl-18-25> 25</a>
</span><span class=lnt id=hl-18-26><a class=lnlinks href=#hl-18-26> 26</a>
</span><span class=lnt id=hl-18-27><a class=lnlinks href=#hl-18-27> 27</a>
</span><span class=lnt id=hl-18-28><a class=lnlinks href=#hl-18-28> 28</a>
</span><span class=lnt id=hl-18-29><a class=lnlinks href=#hl-18-29> 29</a>
</span><span class=lnt id=hl-18-30><a class=lnlinks href=#hl-18-30> 30</a>
</span><span class=lnt id=hl-18-31><a class=lnlinks href=#hl-18-31> 31</a>
</span><span class=lnt id=hl-18-32><a class=lnlinks href=#hl-18-32> 32</a>
</span><span class=lnt id=hl-18-33><a class=lnlinks href=#hl-18-33> 33</a>
</span><span class=lnt id=hl-18-34><a class=lnlinks href=#hl-18-34> 34</a>
</span><span class=lnt id=hl-18-35><a class=lnlinks href=#hl-18-35> 35</a>
</span><span class=lnt id=hl-18-36><a class=lnlinks href=#hl-18-36> 36</a>
</span><span class=lnt id=hl-18-37><a class=lnlinks href=#hl-18-37> 37</a>
</span><span class=lnt id=hl-18-38><a class=lnlinks href=#hl-18-38> 38</a>
</span><span class=lnt id=hl-18-39><a class=lnlinks href=#hl-18-39> 39</a>
</span><span class=lnt id=hl-18-40><a class=lnlinks href=#hl-18-40> 40</a>
</span><span class=lnt id=hl-18-41><a class=lnlinks href=#hl-18-41> 41</a>
</span><span class=lnt id=hl-18-42><a class=lnlinks href=#hl-18-42> 42</a>
</span><span class=lnt id=hl-18-43><a class=lnlinks href=#hl-18-43> 43</a>
</span><span class=lnt id=hl-18-44><a class=lnlinks href=#hl-18-44> 44</a>
</span><span class=lnt id=hl-18-45><a class=lnlinks href=#hl-18-45> 45</a>
</span><span class=lnt id=hl-18-46><a class=lnlinks href=#hl-18-46> 46</a>
</span><span class=lnt id=hl-18-47><a class=lnlinks href=#hl-18-47> 47</a>
</span><span class=lnt id=hl-18-48><a class=lnlinks href=#hl-18-48> 48</a>
</span><span class=lnt id=hl-18-49><a class=lnlinks href=#hl-18-49> 49</a>
</span><span class=lnt id=hl-18-50><a class=lnlinks href=#hl-18-50> 50</a>
</span><span class=lnt id=hl-18-51><a class=lnlinks href=#hl-18-51> 51</a>
</span><span class=lnt id=hl-18-52><a class=lnlinks href=#hl-18-52> 52</a>
</span><span class=lnt id=hl-18-53><a class=lnlinks href=#hl-18-53> 53</a>
</span><span class=lnt id=hl-18-54><a class=lnlinks href=#hl-18-54> 54</a>
</span><span class=lnt id=hl-18-55><a class=lnlinks href=#hl-18-55> 55</a>
</span><span class=lnt id=hl-18-56><a class=lnlinks href=#hl-18-56> 56</a>
</span><span class=lnt id=hl-18-57><a class=lnlinks href=#hl-18-57> 57</a>
</span><span class=lnt id=hl-18-58><a class=lnlinks href=#hl-18-58> 58</a>
</span><span class=lnt id=hl-18-59><a class=lnlinks href=#hl-18-59> 59</a>
</span><span class=lnt id=hl-18-60><a class=lnlinks href=#hl-18-60> 60</a>
</span><span class=lnt id=hl-18-61><a class=lnlinks href=#hl-18-61> 61</a>
</span><span class=lnt id=hl-18-62><a class=lnlinks href=#hl-18-62> 62</a>
</span><span class=lnt id=hl-18-63><a class=lnlinks href=#hl-18-63> 63</a>
</span><span class=lnt id=hl-18-64><a class=lnlinks href=#hl-18-64> 64</a>
</span><span class=lnt id=hl-18-65><a class=lnlinks href=#hl-18-65> 65</a>
</span><span class=lnt id=hl-18-66><a class=lnlinks href=#hl-18-66> 66</a>
</span><span class=lnt id=hl-18-67><a class=lnlinks href=#hl-18-67> 67</a>
</span><span class=lnt id=hl-18-68><a class=lnlinks href=#hl-18-68> 68</a>
</span><span class=lnt id=hl-18-69><a class=lnlinks href=#hl-18-69> 69</a>
</span><span class=lnt id=hl-18-70><a class=lnlinks href=#hl-18-70> 70</a>
</span><span class=lnt id=hl-18-71><a class=lnlinks href=#hl-18-71> 71</a>
</span><span class=lnt id=hl-18-72><a class=lnlinks href=#hl-18-72> 72</a>
</span><span class=lnt id=hl-18-73><a class=lnlinks href=#hl-18-73> 73</a>
</span><span class=lnt id=hl-18-74><a class=lnlinks href=#hl-18-74> 74</a>
</span><span class=lnt id=hl-18-75><a class=lnlinks href=#hl-18-75> 75</a>
</span><span class=lnt id=hl-18-76><a class=lnlinks href=#hl-18-76> 76</a>
</span><span class=lnt id=hl-18-77><a class=lnlinks href=#hl-18-77> 77</a>
</span><span class=lnt id=hl-18-78><a class=lnlinks href=#hl-18-78> 78</a>
</span><span class=lnt id=hl-18-79><a class=lnlinks href=#hl-18-79> 79</a>
</span><span class=lnt id=hl-18-80><a class=lnlinks href=#hl-18-80> 80</a>
</span><span class=lnt id=hl-18-81><a class=lnlinks href=#hl-18-81> 81</a>
</span><span class=lnt id=hl-18-82><a class=lnlinks href=#hl-18-82> 82</a>
</span><span class=lnt id=hl-18-83><a class=lnlinks href=#hl-18-83> 83</a>
</span><span class=lnt id=hl-18-84><a class=lnlinks href=#hl-18-84> 84</a>
</span><span class=lnt id=hl-18-85><a class=lnlinks href=#hl-18-85> 85</a>
</span><span class=lnt id=hl-18-86><a class=lnlinks href=#hl-18-86> 86</a>
</span><span class=lnt id=hl-18-87><a class=lnlinks href=#hl-18-87> 87</a>
</span><span class=lnt id=hl-18-88><a class=lnlinks href=#hl-18-88> 88</a>
</span><span class=lnt id=hl-18-89><a class=lnlinks href=#hl-18-89> 89</a>
</span><span class=lnt id=hl-18-90><a class=lnlinks href=#hl-18-90> 90</a>
</span><span class=lnt id=hl-18-91><a class=lnlinks href=#hl-18-91> 91</a>
</span><span class=lnt id=hl-18-92><a class=lnlinks href=#hl-18-92> 92</a>
</span><span class=lnt id=hl-18-93><a class=lnlinks href=#hl-18-93> 93</a>
</span><span class=lnt id=hl-18-94><a class=lnlinks href=#hl-18-94> 94</a>
</span><span class=lnt id=hl-18-95><a class=lnlinks href=#hl-18-95> 95</a>
</span><span class=lnt id=hl-18-96><a class=lnlinks href=#hl-18-96> 96</a>
</span><span class=lnt id=hl-18-97><a class=lnlinks href=#hl-18-97> 97</a>
</span><span class=lnt id=hl-18-98><a class=lnlinks href=#hl-18-98> 98</a>
</span><span class=lnt id=hl-18-99><a class=lnlinks href=#hl-18-99> 99</a>
</span><span class=lnt id=hl-18-100><a class=lnlinks href=#hl-18-100>100</a>
</span><span class=lnt id=hl-18-101><a class=lnlinks href=#hl-18-101>101</a>
</span><span class=lnt id=hl-18-102><a class=lnlinks href=#hl-18-102>102</a>
</span><span class=lnt id=hl-18-103><a class=lnlinks href=#hl-18-103>103</a>
</span><span class=lnt id=hl-18-104><a class=lnlinks href=#hl-18-104>104</a>
</span><span class=lnt id=hl-18-105><a class=lnlinks href=#hl-18-105>105</a>
</span><span class=lnt id=hl-18-106><a class=lnlinks href=#hl-18-106>106</a>
</span><span class=lnt id=hl-18-107><a class=lnlinks href=#hl-18-107>107</a>
</span><span class=lnt id=hl-18-108><a class=lnlinks href=#hl-18-108>108</a>
</span><span class=lnt id=hl-18-109><a class=lnlinks href=#hl-18-109>109</a>
</span><span class=lnt id=hl-18-110><a class=lnlinks href=#hl-18-110>110</a>
</span><span class=lnt id=hl-18-111><a class=lnlinks href=#hl-18-111>111</a>
</span><span class=lnt id=hl-18-112><a class=lnlinks href=#hl-18-112>112</a>
</span><span class=lnt id=hl-18-113><a class=lnlinks href=#hl-18-113>113</a>
</span><span class=lnt id=hl-18-114><a class=lnlinks href=#hl-18-114>114</a>
</span><span class=lnt id=hl-18-115><a class=lnlinks href=#hl-18-115>115</a>
</span><span class=lnt id=hl-18-116><a class=lnlinks href=#hl-18-116>116</a>
</span><span class=lnt id=hl-18-117><a class=lnlinks href=#hl-18-117>117</a>
</span><span class=lnt id=hl-18-118><a class=lnlinks href=#hl-18-118>118</a>
</span><span class=lnt id=hl-18-119><a class=lnlinks href=#hl-18-119>119</a>
</span><span class=lnt id=hl-18-120><a class=lnlinks href=#hl-18-120>120</a>
</span><span class=lnt id=hl-18-121><a class=lnlinks href=#hl-18-121>121</a>
</span><span class=lnt id=hl-18-122><a class=lnlinks href=#hl-18-122>122</a>
</span><span class=lnt id=hl-18-123><a class=lnlinks href=#hl-18-123>123</a>
</span><span class=lnt id=hl-18-124><a class=lnlinks href=#hl-18-124>124</a>
</span><span class=lnt id=hl-18-125><a class=lnlinks href=#hl-18-125>125</a>
</span><span class=lnt id=hl-18-126><a class=lnlinks href=#hl-18-126>126</a>
</span><span class=lnt id=hl-18-127><a class=lnlinks href=#hl-18-127>127</a>
</span><span class=lnt id=hl-18-128><a class=lnlinks href=#hl-18-128>128</a>
</span><span class=lnt id=hl-18-129><a class=lnlinks href=#hl-18-129>129</a>
</span><span class=lnt id=hl-18-130><a class=lnlinks href=#hl-18-130>130</a>
</span><span class=lnt id=hl-18-131><a class=lnlinks href=#hl-18-131>131</a>
</span><span class=lnt id=hl-18-132><a class=lnlinks href=#hl-18-132>132</a>
</span><span class=lnt id=hl-18-133><a class=lnlinks href=#hl-18-133>133</a>
</span><span class=lnt id=hl-18-134><a class=lnlinks href=#hl-18-134>134</a>
</span><span class=lnt id=hl-18-135><a class=lnlinks href=#hl-18-135>135</a>
</span><span class=lnt id=hl-18-136><a class=lnlinks href=#hl-18-136>136</a>
</span><span class=lnt id=hl-18-137><a class=lnlinks href=#hl-18-137>137</a>
</span><span class=lnt id=hl-18-138><a class=lnlinks href=#hl-18-138>138</a>
</span><span class=lnt id=hl-18-139><a class=lnlinks href=#hl-18-139>139</a>
</span><span class=lnt id=hl-18-140><a class=lnlinks href=#hl-18-140>140</a>
</span><span class=lnt id=hl-18-141><a class=lnlinks href=#hl-18-141>141</a>
</span><span class=lnt id=hl-18-142><a class=lnlinks href=#hl-18-142>142</a>
</span><span class=lnt id=hl-18-143><a class=lnlinks href=#hl-18-143>143</a>
</span><span class=lnt id=hl-18-144><a class=lnlinks href=#hl-18-144>144</a>
</span><span class=lnt id=hl-18-145><a class=lnlinks href=#hl-18-145>145</a>
</span><span class=lnt id=hl-18-146><a class=lnlinks href=#hl-18-146>146</a>
</span><span class=lnt id=hl-18-147><a class=lnlinks href=#hl-18-147>147</a>
</span><span class=lnt id=hl-18-148><a class=lnlinks href=#hl-18-148>148</a>
</span><span class=lnt id=hl-18-149><a class=lnlinks href=#hl-18-149>149</a>
</span><span class=lnt id=hl-18-150><a class=lnlinks href=#hl-18-150>150</a>
</span><span class=lnt id=hl-18-151><a class=lnlinks href=#hl-18-151>151</a>
</span><span class=lnt id=hl-18-152><a class=lnlinks href=#hl-18-152>152</a>
</span><span class=lnt id=hl-18-153><a class=lnlinks href=#hl-18-153>153</a>
</span><span class=lnt id=hl-18-154><a class=lnlinks href=#hl-18-154>154</a>
</span><span class=lnt id=hl-18-155><a class=lnlinks href=#hl-18-155>155</a>
</span><span class=lnt id=hl-18-156><a class=lnlinks href=#hl-18-156>156</a>
</span><span class=lnt id=hl-18-157><a class=lnlinks href=#hl-18-157>157</a>
</span><span class=lnt id=hl-18-158><a class=lnlinks href=#hl-18-158>158</a>
</span><span class=lnt id=hl-18-159><a class=lnlinks href=#hl-18-159>159</a>
</span><span class=lnt id=hl-18-160><a class=lnlinks href=#hl-18-160>160</a>
</span><span class=lnt id=hl-18-161><a class=lnlinks href=#hl-18-161>161</a>
</span><span class=lnt id=hl-18-162><a class=lnlinks href=#hl-18-162>162</a>
</span><span class=lnt id=hl-18-163><a class=lnlinks href=#hl-18-163>163</a>
</span><span class=lnt id=hl-18-164><a class=lnlinks href=#hl-18-164>164</a>
</span><span class=lnt id=hl-18-165><a class=lnlinks href=#hl-18-165>165</a>
</span><span class=lnt id=hl-18-166><a class=lnlinks href=#hl-18-166>166</a>
</span><span class=lnt id=hl-18-167><a class=lnlinks href=#hl-18-167>167</a>
</span><span class=lnt id=hl-18-168><a class=lnlinks href=#hl-18-168>168</a>
</span><span class=lnt id=hl-18-169><a class=lnlinks href=#hl-18-169>169</a>
</span><span class=lnt id=hl-18-170><a class=lnlinks href=#hl-18-170>170</a>
</span><span class=lnt id=hl-18-171><a class=lnlinks href=#hl-18-171>171</a>
</span><span class=lnt id=hl-18-172><a class=lnlinks href=#hl-18-172>172</a>
</span><span class=lnt id=hl-18-173><a class=lnlinks href=#hl-18-173>173</a>
</span><span class=lnt id=hl-18-174><a class=lnlinks href=#hl-18-174>174</a>
</span><span class=lnt id=hl-18-175><a class=lnlinks href=#hl-18-175>175</a>
</span><span class=lnt id=hl-18-176><a class=lnlinks href=#hl-18-176>176</a>
</span><span class=lnt id=hl-18-177><a class=lnlinks href=#hl-18-177>177</a>
</span><span class=lnt id=hl-18-178><a class=lnlinks href=#hl-18-178>178</a>
</span><span class=lnt id=hl-18-179><a class=lnlinks href=#hl-18-179>179</a>
</span><span class=lnt id=hl-18-180><a class=lnlinks href=#hl-18-180>180</a>
</span><span class=lnt id=hl-18-181><a class=lnlinks href=#hl-18-181>181</a>
</span><span class=lnt id=hl-18-182><a class=lnlinks href=#hl-18-182>182</a>
</span><span class=lnt id=hl-18-183><a class=lnlinks href=#hl-18-183>183</a>
</span><span class=lnt id=hl-18-184><a class=lnlinks href=#hl-18-184>184</a>
</span><span class=lnt id=hl-18-185><a class=lnlinks href=#hl-18-185>185</a>
</span><span class=lnt id=hl-18-186><a class=lnlinks href=#hl-18-186>186</a>
</span><span class=lnt id=hl-18-187><a class=lnlinks href=#hl-18-187>187</a>
</span><span class=lnt id=hl-18-188><a class=lnlinks href=#hl-18-188>188</a>
</span><span class=lnt id=hl-18-189><a class=lnlinks href=#hl-18-189>189</a>
</span><span class=lnt id=hl-18-190><a class=lnlinks href=#hl-18-190>190</a>
</span><span class=lnt id=hl-18-191><a class=lnlinks href=#hl-18-191>191</a>
</span><span class=lnt id=hl-18-192><a class=lnlinks href=#hl-18-192>192</a>
</span><span class=lnt id=hl-18-193><a class=lnlinks href=#hl-18-193>193</a>
</span><span class=lnt id=hl-18-194><a class=lnlinks href=#hl-18-194>194</a>
</span><span class=lnt id=hl-18-195><a class=lnlinks href=#hl-18-195>195</a>
</span><span class=lnt id=hl-18-196><a class=lnlinks href=#hl-18-196>196</a>
</span><span class=lnt id=hl-18-197><a class=lnlinks href=#hl-18-197>197</a>
</span><span class=lnt id=hl-18-198><a class=lnlinks href=#hl-18-198>198</a>
</span><span class=lnt id=hl-18-199><a class=lnlinks href=#hl-18-199>199</a>
</span><span class=lnt id=hl-18-200><a class=lnlinks href=#hl-18-200>200</a>
</span><span class=lnt id=hl-18-201><a class=lnlinks href=#hl-18-201>201</a>
</span><span class=lnt id=hl-18-202><a class=lnlinks href=#hl-18-202>202</a>
</span><span class=lnt id=hl-18-203><a class=lnlinks href=#hl-18-203>203</a>
</span><span class=lnt id=hl-18-204><a class=lnlinks href=#hl-18-204>204</a>
</span><span class=lnt id=hl-18-205><a class=lnlinks href=#hl-18-205>205</a>
</span><span class=lnt id=hl-18-206><a class=lnlinks href=#hl-18-206>206</a>
</span><span class=lnt id=hl-18-207><a class=lnlinks href=#hl-18-207>207</a>
</span><span class=lnt id=hl-18-208><a class=lnlinks href=#hl-18-208>208</a>
</span><span class=lnt id=hl-18-209><a class=lnlinks href=#hl-18-209>209</a>
</span><span class=lnt id=hl-18-210><a class=lnlinks href=#hl-18-210>210</a>
</span><span class=lnt id=hl-18-211><a class=lnlinks href=#hl-18-211>211</a>
</span><span class=lnt id=hl-18-212><a class=lnlinks href=#hl-18-212>212</a>
</span><span class=lnt id=hl-18-213><a class=lnlinks href=#hl-18-213>213</a>
</span><span class=lnt id=hl-18-214><a class=lnlinks href=#hl-18-214>214</a>
</span><span class=lnt id=hl-18-215><a class=lnlinks href=#hl-18-215>215</a>
</span><span class=lnt id=hl-18-216><a class=lnlinks href=#hl-18-216>216</a>
</span><span class=lnt id=hl-18-217><a class=lnlinks href=#hl-18-217>217</a>
</span><span class=lnt id=hl-18-218><a class=lnlinks href=#hl-18-218>218</a>
</span><span class=lnt id=hl-18-219><a class=lnlinks href=#hl-18-219>219</a>
</span><span class=lnt id=hl-18-220><a class=lnlinks href=#hl-18-220>220</a>
</span><span class=lnt id=hl-18-221><a class=lnlinks href=#hl-18-221>221</a>
</span><span class=lnt id=hl-18-222><a class=lnlinks href=#hl-18-222>222</a>
</span><span class=lnt id=hl-18-223><a class=lnlinks href=#hl-18-223>223</a>
</span><span class=lnt id=hl-18-224><a class=lnlinks href=#hl-18-224>224</a>
</span><span class=lnt id=hl-18-225><a class=lnlinks href=#hl-18-225>225</a>
</span><span class=lnt id=hl-18-226><a class=lnlinks href=#hl-18-226>226</a>
</span><span class=lnt id=hl-18-227><a class=lnlinks href=#hl-18-227>227</a>
</span><span class=lnt id=hl-18-228><a class=lnlinks href=#hl-18-228>228</a>
</span><span class=lnt id=hl-18-229><a class=lnlinks href=#hl-18-229>229</a>
</span><span class=lnt id=hl-18-230><a class=lnlinks href=#hl-18-230>230</a>
</span><span class=lnt id=hl-18-231><a class=lnlinks href=#hl-18-231>231</a>
</span><span class=lnt id=hl-18-232><a class=lnlinks href=#hl-18-232>232</a>
</span><span class=lnt id=hl-18-233><a class=lnlinks href=#hl-18-233>233</a>
</span><span class=lnt id=hl-18-234><a class=lnlinks href=#hl-18-234>234</a>
</span><span class=lnt id=hl-18-235><a class=lnlinks href=#hl-18-235>235</a>
</span><span class=lnt id=hl-18-236><a class=lnlinks href=#hl-18-236>236</a>
</span><span class=lnt id=hl-18-237><a class=lnlinks href=#hl-18-237>237</a>
</span><span class=lnt id=hl-18-238><a class=lnlinks href=#hl-18-238>238</a>
</span><span class=lnt id=hl-18-239><a class=lnlinks href=#hl-18-239>239</a>
</span><span class=lnt id=hl-18-240><a class=lnlinks href=#hl-18-240>240</a>
</span><span class=lnt id=hl-18-241><a class=lnlinks href=#hl-18-241>241</a>
</span><span class=lnt id=hl-18-242><a class=lnlinks href=#hl-18-242>242</a>
</span><span class=lnt id=hl-18-243><a class=lnlinks href=#hl-18-243>243</a>
</span><span class=lnt id=hl-18-244><a class=lnlinks href=#hl-18-244>244</a>
</span><span class=lnt id=hl-18-245><a class=lnlinks href=#hl-18-245>245</a>
</span><span class=lnt id=hl-18-246><a class=lnlinks href=#hl-18-246>246</a>
</span><span class=lnt id=hl-18-247><a class=lnlinks href=#hl-18-247>247</a>
</span><span class=lnt id=hl-18-248><a class=lnlinks href=#hl-18-248>248</a>
</span><span class=lnt id=hl-18-249><a class=lnlinks href=#hl-18-249>249</a>
</span><span class=lnt id=hl-18-250><a class=lnlinks href=#hl-18-250>250</a>
</span><span class=lnt id=hl-18-251><a class=lnlinks href=#hl-18-251>251</a>
</span><span class=lnt id=hl-18-252><a class=lnlinks href=#hl-18-252>252</a>
</span><span class=lnt id=hl-18-253><a class=lnlinks href=#hl-18-253>253</a>
</span><span class=lnt id=hl-18-254><a class=lnlinks href=#hl-18-254>254</a>
</span><span class=lnt id=hl-18-255><a class=lnlinks href=#hl-18-255>255</a>
</span><span class=lnt id=hl-18-256><a class=lnlinks href=#hl-18-256>256</a>
</span><span class=lnt id=hl-18-257><a class=lnlinks href=#hl-18-257>257</a>
</span><span class=lnt id=hl-18-258><a class=lnlinks href=#hl-18-258>258</a>
</span><span class=lnt id=hl-18-259><a class=lnlinks href=#hl-18-259>259</a>
</span><span class=lnt id=hl-18-260><a class=lnlinks href=#hl-18-260>260</a>
</span><span class=lnt id=hl-18-261><a class=lnlinks href=#hl-18-261>261</a>
</span><span class=lnt id=hl-18-262><a class=lnlinks href=#hl-18-262>262</a>
</span><span class=lnt id=hl-18-263><a class=lnlinks href=#hl-18-263>263</a>
</span><span class=lnt id=hl-18-264><a class=lnlinks href=#hl-18-264>264</a>
</span><span class=lnt id=hl-18-265><a class=lnlinks href=#hl-18-265>265</a>
</span><span class=lnt id=hl-18-266><a class=lnlinks href=#hl-18-266>266</a>
</span><span class=lnt id=hl-18-267><a class=lnlinks href=#hl-18-267>267</a>
</span><span class=lnt id=hl-18-268><a class=lnlinks href=#hl-18-268>268</a>
</span><span class=lnt id=hl-18-269><a class=lnlinks href=#hl-18-269>269</a>
</span><span class=lnt id=hl-18-270><a class=lnlinks href=#hl-18-270>270</a>
</span><span class=lnt id=hl-18-271><a class=lnlinks href=#hl-18-271>271</a>
</span><span class=lnt id=hl-18-272><a class=lnlinks href=#hl-18-272>272</a>
</span><span class=lnt id=hl-18-273><a class=lnlinks href=#hl-18-273>273</a>
</span><span class=lnt id=hl-18-274><a class=lnlinks href=#hl-18-274>274</a>
</span><span class=lnt id=hl-18-275><a class=lnlinks href=#hl-18-275>275</a>
</span><span class=lnt id=hl-18-276><a class=lnlinks href=#hl-18-276>276</a>
</span><span class=lnt id=hl-18-277><a class=lnlinks href=#hl-18-277>277</a>
</span><span class=lnt id=hl-18-278><a class=lnlinks href=#hl-18-278>278</a>
</span><span class=lnt id=hl-18-279><a class=lnlinks href=#hl-18-279>279</a>
</span><span class=lnt id=hl-18-280><a class=lnlinks href=#hl-18-280>280</a>
</span><span class=lnt id=hl-18-281><a class=lnlinks href=#hl-18-281>281</a>
</span><span class=lnt id=hl-18-282><a class=lnlinks href=#hl-18-282>282</a>
</span><span class=lnt id=hl-18-283><a class=lnlinks href=#hl-18-283>283</a>
</span><span class=lnt id=hl-18-284><a class=lnlinks href=#hl-18-284>284</a>
</span><span class=lnt id=hl-18-285><a class=lnlinks href=#hl-18-285>285</a>
</span><span class=lnt id=hl-18-286><a class=lnlinks href=#hl-18-286>286</a>
</span><span class=lnt id=hl-18-287><a class=lnlinks href=#hl-18-287>287</a>
</span><span class=lnt id=hl-18-288><a class=lnlinks href=#hl-18-288>288</a>
</span><span class=lnt id=hl-18-289><a class=lnlinks href=#hl-18-289>289</a>
</span><span class=lnt id=hl-18-290><a class=lnlinks href=#hl-18-290>290</a>
</span><span class=lnt id=hl-18-291><a class=lnlinks href=#hl-18-291>291</a>
</span><span class=lnt id=hl-18-292><a class=lnlinks href=#hl-18-292>292</a>
</span><span class=lnt id=hl-18-293><a class=lnlinks href=#hl-18-293>293</a>
</span><span class=lnt id=hl-18-294><a class=lnlinks href=#hl-18-294>294</a>
</span><span class=lnt id=hl-18-295><a class=lnlinks href=#hl-18-295>295</a>
</span><span class=lnt id=hl-18-296><a class=lnlinks href=#hl-18-296>296</a>
</span><span class=lnt id=hl-18-297><a class=lnlinks href=#hl-18-297>297</a>
</span><span class=lnt id=hl-18-298><a class=lnlinks href=#hl-18-298>298</a>
</span><span class=lnt id=hl-18-299><a class=lnlinks href=#hl-18-299>299</a>
</span><span class=lnt id=hl-18-300><a class=lnlinks href=#hl-18-300>300</a>
</span><span class=lnt id=hl-18-301><a class=lnlinks href=#hl-18-301>301</a>
</span><span class=lnt id=hl-18-302><a class=lnlinks href=#hl-18-302>302</a>
</span><span class=lnt id=hl-18-303><a class=lnlinks href=#hl-18-303>303</a>
</span><span class=lnt id=hl-18-304><a class=lnlinks href=#hl-18-304>304</a>
</span><span class=lnt id=hl-18-305><a class=lnlinks href=#hl-18-305>305</a>
</span><span class=lnt id=hl-18-306><a class=lnlinks href=#hl-18-306>306</a>
</span><span class=lnt id=hl-18-307><a class=lnlinks href=#hl-18-307>307</a>
</span><span class=lnt id=hl-18-308><a class=lnlinks href=#hl-18-308>308</a>
</span><span class=lnt id=hl-18-309><a class=lnlinks href=#hl-18-309>309</a>
</span><span class=lnt id=hl-18-310><a class=lnlinks href=#hl-18-310>310</a>
</span><span class=lnt id=hl-18-311><a class=lnlinks href=#hl-18-311>311</a>
</span><span class=lnt id=hl-18-312><a class=lnlinks href=#hl-18-312>312</a>
</span><span class=lnt id=hl-18-313><a class=lnlinks href=#hl-18-313>313</a>
</span><span class=lnt id=hl-18-314><a class=lnlinks href=#hl-18-314>314</a>
</span><span class=lnt id=hl-18-315><a class=lnlinks href=#hl-18-315>315</a>
</span><span class=lnt id=hl-18-316><a class=lnlinks href=#hl-18-316>316</a>
</span><span class=lnt id=hl-18-317><a class=lnlinks href=#hl-18-317>317</a>
</span><span class=lnt id=hl-18-318><a class=lnlinks href=#hl-18-318>318</a>
</span><span class=lnt id=hl-18-319><a class=lnlinks href=#hl-18-319>319</a>
</span><span class=lnt id=hl-18-320><a class=lnlinks href=#hl-18-320>320</a>
</span><span class=lnt id=hl-18-321><a class=lnlinks href=#hl-18-321>321</a>
</span><span class=lnt id=hl-18-322><a class=lnlinks href=#hl-18-322>322</a>
</span><span class=lnt id=hl-18-323><a class=lnlinks href=#hl-18-323>323</a>
</span><span class=lnt id=hl-18-324><a class=lnlinks href=#hl-18-324>324</a>
</span><span class=lnt id=hl-18-325><a class=lnlinks href=#hl-18-325>325</a>
</span><span class=lnt id=hl-18-326><a class=lnlinks href=#hl-18-326>326</a>
</span><span class=lnt id=hl-18-327><a class=lnlinks href=#hl-18-327>327</a>
</span><span class=lnt id=hl-18-328><a class=lnlinks href=#hl-18-328>328</a>
</span><span class=lnt id=hl-18-329><a class=lnlinks href=#hl-18-329>329</a>
</span><span class=lnt id=hl-18-330><a class=lnlinks href=#hl-18-330>330</a>
</span><span class=lnt id=hl-18-331><a class=lnlinks href=#hl-18-331>331</a>
</span><span class=lnt id=hl-18-332><a class=lnlinks href=#hl-18-332>332</a>
</span><span class=lnt id=hl-18-333><a class=lnlinks href=#hl-18-333>333</a>
</span><span class=lnt id=hl-18-334><a class=lnlinks href=#hl-18-334>334</a>
</span><span class=lnt id=hl-18-335><a class=lnlinks href=#hl-18-335>335</a>
</span><span class=lnt id=hl-18-336><a class=lnlinks href=#hl-18-336>336</a>
</span><span class=lnt id=hl-18-337><a class=lnlinks href=#hl-18-337>337</a>
</span><span class=lnt id=hl-18-338><a class=lnlinks href=#hl-18-338>338</a>
</span><span class=lnt id=hl-18-339><a class=lnlinks href=#hl-18-339>339</a>
</span><span class=lnt id=hl-18-340><a class=lnlinks href=#hl-18-340>340</a>
</span><span class=lnt id=hl-18-341><a class=lnlinks href=#hl-18-341>341</a>
</span><span class=lnt id=hl-18-342><a class=lnlinks href=#hl-18-342>342</a>
</span><span class=lnt id=hl-18-343><a class=lnlinks href=#hl-18-343>343</a>
</span><span class=lnt id=hl-18-344><a class=lnlinks href=#hl-18-344>344</a>
</span><span class=lnt id=hl-18-345><a class=lnlinks href=#hl-18-345>345</a>
</span><span class=lnt id=hl-18-346><a class=lnlinks href=#hl-18-346>346</a>
</span><span class=lnt id=hl-18-347><a class=lnlinks href=#hl-18-347>347</a>
</span><span class=lnt id=hl-18-348><a class=lnlinks href=#hl-18-348>348</a>
</span><span class=lnt id=hl-18-349><a class=lnlinks href=#hl-18-349>349</a>
</span><span class=lnt id=hl-18-350><a class=lnlinks href=#hl-18-350>350</a>
</span><span class=lnt id=hl-18-351><a class=lnlinks href=#hl-18-351>351</a>
</span><span class=lnt id=hl-18-352><a class=lnlinks href=#hl-18-352>352</a>
</span><span class=lnt id=hl-18-353><a class=lnlinks href=#hl-18-353>353</a>
</span><span class=lnt id=hl-18-354><a class=lnlinks href=#hl-18-354>354</a>
</span><span class=lnt id=hl-18-355><a class=lnlinks href=#hl-18-355>355</a>
</span><span class=lnt id=hl-18-356><a class=lnlinks href=#hl-18-356>356</a>
</span><span class=lnt id=hl-18-357><a class=lnlinks href=#hl-18-357>357</a>
</span><span class=lnt id=hl-18-358><a class=lnlinks href=#hl-18-358>358</a>
</span><span class=lnt id=hl-18-359><a class=lnlinks href=#hl-18-359>359</a>
</span><span class=lnt id=hl-18-360><a class=lnlinks href=#hl-18-360>360</a>
</span><span class=lnt id=hl-18-361><a class=lnlinks href=#hl-18-361>361</a>
</span><span class=lnt id=hl-18-362><a class=lnlinks href=#hl-18-362>362</a>
</span><span class=lnt id=hl-18-363><a class=lnlinks href=#hl-18-363>363</a>
</span><span class=lnt id=hl-18-364><a class=lnlinks href=#hl-18-364>364</a>
</span><span class=lnt id=hl-18-365><a class=lnlinks href=#hl-18-365>365</a>
</span><span class=lnt id=hl-18-366><a class=lnlinks href=#hl-18-366>366</a>
</span><span class=lnt id=hl-18-367><a class=lnlinks href=#hl-18-367>367</a>
</span><span class=lnt id=hl-18-368><a class=lnlinks href=#hl-18-368>368</a>
</span><span class=lnt id=hl-18-369><a class=lnlinks href=#hl-18-369>369</a>
</span><span class=lnt id=hl-18-370><a class=lnlinks href=#hl-18-370>370</a>
</span><span class=lnt id=hl-18-371><a class=lnlinks href=#hl-18-371>371</a>
</span><span class=lnt id=hl-18-372><a class=lnlinks href=#hl-18-372>372</a>
</span><span class=lnt id=hl-18-373><a class=lnlinks href=#hl-18-373>373</a>
</span><span class=lnt id=hl-18-374><a class=lnlinks href=#hl-18-374>374</a>
</span><span class=lnt id=hl-18-375><a class=lnlinks href=#hl-18-375>375</a>
</span><span class=lnt id=hl-18-376><a class=lnlinks href=#hl-18-376>376</a>
</span><span class=lnt id=hl-18-377><a class=lnlinks href=#hl-18-377>377</a>
</span><span class=lnt id=hl-18-378><a class=lnlinks href=#hl-18-378>378</a>
</span><span class=lnt id=hl-18-379><a class=lnlinks href=#hl-18-379>379</a>
</span><span class=lnt id=hl-18-380><a class=lnlinks href=#hl-18-380>380</a>
</span><span class=lnt id=hl-18-381><a class=lnlinks href=#hl-18-381>381</a>
</span><span class=lnt id=hl-18-382><a class=lnlinks href=#hl-18-382>382</a>
</span><span class=lnt id=hl-18-383><a class=lnlinks href=#hl-18-383>383</a>
</span><span class=lnt id=hl-18-384><a class=lnlinks href=#hl-18-384>384</a>
</span><span class=lnt id=hl-18-385><a class=lnlinks href=#hl-18-385>385</a>
</span><span class=lnt id=hl-18-386><a class=lnlinks href=#hl-18-386>386</a>
</span><span class=lnt id=hl-18-387><a class=lnlinks href=#hl-18-387>387</a>
</span><span class=lnt id=hl-18-388><a class=lnlinks href=#hl-18-388>388</a>
</span><span class=lnt id=hl-18-389><a class=lnlinks href=#hl-18-389>389</a>
</span><span class=lnt id=hl-18-390><a class=lnlinks href=#hl-18-390>390</a>
</span><span class=lnt id=hl-18-391><a class=lnlinks href=#hl-18-391>391</a>
</span><span class=lnt id=hl-18-392><a class=lnlinks href=#hl-18-392>392</a>
</span><span class=lnt id=hl-18-393><a class=lnlinks href=#hl-18-393>393</a>
</span><span class=lnt id=hl-18-394><a class=lnlinks href=#hl-18-394>394</a>
</span><span class=lnt id=hl-18-395><a class=lnlinks href=#hl-18-395>395</a>
</span><span class=lnt id=hl-18-396><a class=lnlinks href=#hl-18-396>396</a>
</span><span class=lnt id=hl-18-397><a class=lnlinks href=#hl-18-397>397</a>
</span><span class=lnt id=hl-18-398><a class=lnlinks href=#hl-18-398>398</a>
</span><span class=lnt id=hl-18-399><a class=lnlinks href=#hl-18-399>399</a>
</span><span class=lnt id=hl-18-400><a class=lnlinks href=#hl-18-400>400</a>
</span><span class=lnt id=hl-18-401><a class=lnlinks href=#hl-18-401>401</a>
</span><span class=lnt id=hl-18-402><a class=lnlinks href=#hl-18-402>402</a>
</span><span class=lnt id=hl-18-403><a class=lnlinks href=#hl-18-403>403</a>
</span><span class=lnt id=hl-18-404><a class=lnlinks href=#hl-18-404>404</a>
</span><span class=lnt id=hl-18-405><a class=lnlinks href=#hl-18-405>405</a>
</span><span class=lnt id=hl-18-406><a class=lnlinks href=#hl-18-406>406</a>
</span><span class=lnt id=hl-18-407><a class=lnlinks href=#hl-18-407>407</a>
</span><span class=lnt id=hl-18-408><a class=lnlinks href=#hl-18-408>408</a>
</span><span class=lnt id=hl-18-409><a class=lnlinks href=#hl-18-409>409</a>
</span><span class=lnt id=hl-18-410><a class=lnlinks href=#hl-18-410>410</a>
</span><span class=lnt id=hl-18-411><a class=lnlinks href=#hl-18-411>411</a>
</span><span class=lnt id=hl-18-412><a class=lnlinks href=#hl-18-412>412</a>
</span><span class=lnt id=hl-18-413><a class=lnlinks href=#hl-18-413>413</a>
</span><span class=lnt id=hl-18-414><a class=lnlinks href=#hl-18-414>414</a>
</span><span class=lnt id=hl-18-415><a class=lnlinks href=#hl-18-415>415</a>
</span><span class=lnt id=hl-18-416><a class=lnlinks href=#hl-18-416>416</a>
</span><span class=lnt id=hl-18-417><a class=lnlinks href=#hl-18-417>417</a>
</span><span class=lnt id=hl-18-418><a class=lnlinks href=#hl-18-418>418</a>
</span><span class=lnt id=hl-18-419><a class=lnlinks href=#hl-18-419>419</a>
</span><span class=lnt id=hl-18-420><a class=lnlinks href=#hl-18-420>420</a>
</span><span class=lnt id=hl-18-421><a class=lnlinks href=#hl-18-421>421</a>
</span><span class=lnt id=hl-18-422><a class=lnlinks href=#hl-18-422>422</a>
</span><span class=lnt id=hl-18-423><a class=lnlinks href=#hl-18-423>423</a>
</span><span class=lnt id=hl-18-424><a class=lnlinks href=#hl-18-424>424</a>
</span><span class=lnt id=hl-18-425><a class=lnlinks href=#hl-18-425>425</a>
</span><span class=lnt id=hl-18-426><a class=lnlinks href=#hl-18-426>426</a>
</span><span class=lnt id=hl-18-427><a class=lnlinks href=#hl-18-427>427</a>
</span><span class=lnt id=hl-18-428><a class=lnlinks href=#hl-18-428>428</a>
</span><span class=lnt id=hl-18-429><a class=lnlinks href=#hl-18-429>429</a>
</span><span class=lnt id=hl-18-430><a class=lnlinks href=#hl-18-430>430</a>
</span><span class=lnt id=hl-18-431><a class=lnlinks href=#hl-18-431>431</a>
</span><span class=lnt id=hl-18-432><a class=lnlinks href=#hl-18-432>432</a>
</span><span class=lnt id=hl-18-433><a class=lnlinks href=#hl-18-433>433</a>
</span><span class=lnt id=hl-18-434><a class=lnlinks href=#hl-18-434>434</a>
</span><span class=lnt id=hl-18-435><a class=lnlinks href=#hl-18-435>435</a>
</span><span class=lnt id=hl-18-436><a class=lnlinks href=#hl-18-436>436</a>
</span><span class=lnt id=hl-18-437><a class=lnlinks href=#hl-18-437>437</a>
</span><span class=lnt id=hl-18-438><a class=lnlinks href=#hl-18-438>438</a>
</span><span class=lnt id=hl-18-439><a class=lnlinks href=#hl-18-439>439</a>
</span><span class=lnt id=hl-18-440><a class=lnlinks href=#hl-18-440>440</a>
</span><span class=lnt id=hl-18-441><a class=lnlinks href=#hl-18-441>441</a>
</span><span class=lnt id=hl-18-442><a class=lnlinks href=#hl-18-442>442</a>
</span><span class=lnt id=hl-18-443><a class=lnlinks href=#hl-18-443>443</a>
</span><span class=lnt id=hl-18-444><a class=lnlinks href=#hl-18-444>444</a>
</span><span class=lnt id=hl-18-445><a class=lnlinks href=#hl-18-445>445</a>
</span><span class=lnt id=hl-18-446><a class=lnlinks href=#hl-18-446>446</a>
</span><span class=lnt id=hl-18-447><a class=lnlinks href=#hl-18-447>447</a>
</span><span class=lnt id=hl-18-448><a class=lnlinks href=#hl-18-448>448</a>
</span><span class=lnt id=hl-18-449><a class=lnlinks href=#hl-18-449>449</a>
</span><span class=lnt id=hl-18-450><a class=lnlinks href=#hl-18-450>450</a>
</span><span class=lnt id=hl-18-451><a class=lnlinks href=#hl-18-451>451</a>
</span><span class=lnt id=hl-18-452><a class=lnlinks href=#hl-18-452>452</a>
</span><span class=lnt id=hl-18-453><a class=lnlinks href=#hl-18-453>453</a>
</span><span class=lnt id=hl-18-454><a class=lnlinks href=#hl-18-454>454</a>
</span><span class=lnt id=hl-18-455><a class=lnlinks href=#hl-18-455>455</a>
</span><span class=lnt id=hl-18-456><a class=lnlinks href=#hl-18-456>456</a>
</span><span class=lnt id=hl-18-457><a class=lnlinks href=#hl-18-457>457</a>
</span><span class=lnt id=hl-18-458><a class=lnlinks href=#hl-18-458>458</a>
</span><span class=lnt id=hl-18-459><a class=lnlinks href=#hl-18-459>459</a>
</span><span class=lnt id=hl-18-460><a class=lnlinks href=#hl-18-460>460</a>
</span><span class=lnt id=hl-18-461><a class=lnlinks href=#hl-18-461>461</a>
</span><span class=lnt id=hl-18-462><a class=lnlinks href=#hl-18-462>462</a>
</span><span class=lnt id=hl-18-463><a class=lnlinks href=#hl-18-463>463</a>
</span><span class=lnt id=hl-18-464><a class=lnlinks href=#hl-18-464>464</a>
</span><span class=lnt id=hl-18-465><a class=lnlinks href=#hl-18-465>465</a>
</span><span class=lnt id=hl-18-466><a class=lnlinks href=#hl-18-466>466</a>
</span><span class=lnt id=hl-18-467><a class=lnlinks href=#hl-18-467>467</a>
</span><span class=lnt id=hl-18-468><a class=lnlinks href=#hl-18-468>468</a>
</span><span class=lnt id=hl-18-469><a class=lnlinks href=#hl-18-469>469</a>
</span><span class=lnt id=hl-18-470><a class=lnlinks href=#hl-18-470>470</a>
</span><span class=lnt id=hl-18-471><a class=lnlinks href=#hl-18-471>471</a>
</span><span class=lnt id=hl-18-472><a class=lnlinks href=#hl-18-472>472</a>
</span><span class=lnt id=hl-18-473><a class=lnlinks href=#hl-18-473>473</a>
</span><span class=lnt id=hl-18-474><a class=lnlinks href=#hl-18-474>474</a>
</span><span class=lnt id=hl-18-475><a class=lnlinks href=#hl-18-475>475</a>
</span><span class=lnt id=hl-18-476><a class=lnlinks href=#hl-18-476>476</a>
</span><span class=lnt id=hl-18-477><a class=lnlinks href=#hl-18-477>477</a>
</span><span class=lnt id=hl-18-478><a class=lnlinks href=#hl-18-478>478</a>
</span><span class=lnt id=hl-18-479><a class=lnlinks href=#hl-18-479>479</a>
</span><span class=lnt id=hl-18-480><a class=lnlinks href=#hl-18-480>480</a>
</span><span class=lnt id=hl-18-481><a class=lnlinks href=#hl-18-481>481</a>
</span><span class=lnt id=hl-18-482><a class=lnlinks href=#hl-18-482>482</a>
</span><span class=lnt id=hl-18-483><a class=lnlinks href=#hl-18-483>483</a>
</span><span class=lnt id=hl-18-484><a class=lnlinks href=#hl-18-484>484</a>
</span><span class=lnt id=hl-18-485><a class=lnlinks href=#hl-18-485>485</a>
</span><span class=lnt id=hl-18-486><a class=lnlinks href=#hl-18-486>486</a>
</span><span class=lnt id=hl-18-487><a class=lnlinks href=#hl-18-487>487</a>
</span><span class=lnt id=hl-18-488><a class=lnlinks href=#hl-18-488>488</a>
</span><span class=lnt id=hl-18-489><a class=lnlinks href=#hl-18-489>489</a>
</span><span class=lnt id=hl-18-490><a class=lnlinks href=#hl-18-490>490</a>
</span><span class=lnt id=hl-18-491><a class=lnlinks href=#hl-18-491>491</a>
</span><span class=lnt id=hl-18-492><a class=lnlinks href=#hl-18-492>492</a>
</span><span class=lnt id=hl-18-493><a class=lnlinks href=#hl-18-493>493</a>
</span><span class=lnt id=hl-18-494><a class=lnlinks href=#hl-18-494>494</a>
</span><span class=lnt id=hl-18-495><a class=lnlinks href=#hl-18-495>495</a>
</span><span class=lnt id=hl-18-496><a class=lnlinks href=#hl-18-496>496</a>
</span><span class=lnt id=hl-18-497><a class=lnlinks href=#hl-18-497>497</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>Any</span><span class=p>,</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>enum</span> <span class=kn>import</span> <span class=n>Enum</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>uuid</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 결제 상태 열거형</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PaymentStatus</span><span class=p>(</span><span class=n>Enum</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>PENDING</span> <span class=o>=</span> <span class=s2>&#34;pending&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>SUCCESS</span> <span class=o>=</span> <span class=s2>&#34;success&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>FAILED</span> <span class=o>=</span> <span class=s2>&#34;failed&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>CANCELLED</span> <span class=o>=</span> <span class=s2>&#34;cancelled&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 결제 결과 데이터 클래스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PaymentResult</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>status</span><span class=p>:</span> <span class=n>PaymentStatus</span><span class=p>,</span> <span class=n>transaction_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                 <span class=n>message</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span><span class=p>,</span> <span class=n>amount</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>0.0</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>status</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>transaction_id</span> <span class=o>=</span> <span class=n>transaction_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>message</span> <span class=o>=</span> <span class=n>message</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>amount</span> <span class=o>=</span> <span class=n>amount</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>timestamp</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>to_dict</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>status</span><span class=o>.</span><span class=n>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;transaction_id&#34;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>transaction_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;message&#34;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>message</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;amount&#34;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>amount</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;timestamp&#34;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>timestamp</span><span class=o>.</span><span class=n>isoformat</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Target 인터페이스 - 표준 결제 처리 인터페이스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PaymentProcessor</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;표준 결제 처리 인터페이스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>:</span> <span class=nb>float</span><span class=p>,</span> <span class=n>currency</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                       <span class=n>payment_method</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PaymentResult</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;결제 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>verify_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>transaction_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PaymentResult</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;결제 검증&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>cancel_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>transaction_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PaymentResult</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;결제 취소&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Adaptee 1 - 카드 결제 PG사 (기존 레거시 시스템)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CardPaymentGateway</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;카드 결제 PG사 레거시 시스템&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>merchant_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>merchant_id</span> <span class=o>=</span> <span class=n>merchant_id</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>transactions</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># 거래 저장소</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>charge_card</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>card_info</span><span class=p>:</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>amount_cents</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                   <span class=n>currency_code</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;카드 결제 처리 (레거시 인터페이스)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[CardPG] Processing card payment: </span><span class=si>{</span><span class=n>amount_cents</span><span class=si>}</span><span class=s2> cents&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 결제 처리 시뮬레이션</span>
</span></span><span class=line><span class=cl>        <span class=n>transaction_ref</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;CARD_</span><span class=si>{</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()</span><span class=o>.</span><span class=n>hex</span><span class=p>[:</span><span class=mi>8</span><span class=p>]</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 간단한 검증 로직</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>amount_cents</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;result_code&#34;</span><span class=p>:</span> <span class=s2>&#34;FAIL&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;error_message&#34;</span><span class=p>:</span> <span class=s2>&#34;Invalid amount&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;tx_ref&#34;</span><span class=p>:</span> <span class=n>transaction_ref</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 성공 처리</span>
</span></span><span class=line><span class=cl>        <span class=n>transaction_data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;amount_cents&#34;</span><span class=p>:</span> <span class=n>amount_cents</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;currency&#34;</span><span class=p>:</span> <span class=n>currency_code</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;card_info&#34;</span><span class=p>:</span> <span class=n>card_info</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;timestamp&#34;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>transactions</span><span class=p>[</span><span class=n>transaction_ref</span><span class=p>]</span> <span class=o>=</span> <span class=n>transaction_data</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;result_code&#34;</span><span class=p>:</span> <span class=s2>&#34;SUCCESS&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;tx_ref&#34;</span><span class=p>:</span> <span class=n>transaction_ref</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;approval_number&#34;</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&#34;APP</span><span class=si>{</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()</span><span class=o>.</span><span class=n>hex</span><span class=p>[:</span><span class=mi>6</span><span class=p>]</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>check_transaction</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>tx_ref</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;거래 조회 (레거시 인터페이스)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>tx_ref</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>transactions</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;APPROVED&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;tx_ref&#34;</span><span class=p>:</span> <span class=n>tx_ref</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;transaction&#34;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>transactions</span><span class=p>[</span><span class=n>tx_ref</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;NOT_FOUND&#34;</span><span class=p>,</span> <span class=s2>&#34;tx_ref&#34;</span><span class=p>:</span> <span class=n>tx_ref</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>void_transaction</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>tx_ref</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;거래 취소 (레거시 인터페이스)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>tx_ref</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>transactions</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>del</span> <span class=bp>self</span><span class=o>.</span><span class=n>transactions</span><span class=p>[</span><span class=n>tx_ref</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;void_status&#34;</span><span class=p>:</span> <span class=s2>&#34;COMPLETED&#34;</span><span class=p>,</span> <span class=s2>&#34;tx_ref&#34;</span><span class=p>:</span> <span class=n>tx_ref</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;void_status&#34;</span><span class=p>:</span> <span class=s2>&#34;FAILED&#34;</span><span class=p>,</span> <span class=s2>&#34;error&#34;</span><span class=p>:</span> <span class=s2>&#34;Transaction not found&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Adaptee 2 - 간편 결제 PG사</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SimplePaymentAPI</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;간편 결제 PG사 API&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>api_key</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>api_key</span> <span class=o>=</span> <span class=n>api_key</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>payments</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>payment_request</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;간편 결제 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[SimplePay] Creating payment: </span><span class=si>{</span><span class=n>payment_request</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>payment_id</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;SP_</span><span class=si>{</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()</span><span class=o>.</span><span class=n>hex</span><span class=p>[:</span><span class=mi>10</span><span class=p>]</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>payment_request</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;amount&#34;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;error_code&#34;</span><span class=p>:</span> <span class=s2>&#34;INVALID_AMOUNT&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;payment_id&#34;</span><span class=p>:</span> <span class=n>payment_id</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>payments</span><span class=p>[</span><span class=n>payment_id</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;amount&#34;</span><span class=p>:</span> <span class=n>payment_request</span><span class=p>[</span><span class=s2>&#34;amount&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;currency&#34;</span><span class=p>:</span> <span class=n>payment_request</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;currency&#34;</span><span class=p>,</span> <span class=s2>&#34;KRW&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;user_info&#34;</span><span class=p>:</span> <span class=n>payment_request</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;user_info&#34;</span><span class=p>,</span> <span class=p>{}),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;COMPLETED&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;payment_id&#34;</span><span class=p>:</span> <span class=n>payment_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;COMPLETED&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_payment_info</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>payment_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;결제 정보 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>payment_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>payments</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;found&#34;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;payment_data&#34;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>payments</span><span class=p>[</span><span class=n>payment_id</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;found&#34;</span><span class=p>:</span> <span class=kc>False</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>refund_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>payment_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;결제 환불&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>payment_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>payments</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>payments</span><span class=p>[</span><span class=n>payment_id</span><span class=p>][</span><span class=s2>&#34;status&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&#34;REFUNDED&#34;</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;refund_success&#34;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span> <span class=s2>&#34;payment_id&#34;</span><span class=p>:</span> <span class=n>payment_id</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;refund_success&#34;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span> <span class=s2>&#34;error&#34;</span><span class=p>:</span> <span class=s2>&#34;Payment not found&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Adapter 1 - 카드 결제 어댑터</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CardPaymentAdapter</span><span class=p>(</span><span class=n>PaymentProcessor</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;카드 결제 PG를 표준 인터페이스로 변환하는 어댑터&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>card_gateway</span><span class=p>:</span> <span class=n>CardPaymentGateway</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>card_gateway</span> <span class=o>=</span> <span class=n>card_gateway</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>currency_map</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;USD&#34;</span><span class=p>:</span> <span class=s2>&#34;USD&#34;</span><span class=p>,</span> <span class=s2>&#34;KRW&#34;</span><span class=p>:</span> <span class=s2>&#34;KRW&#34;</span><span class=p>,</span> <span class=s2>&#34;EUR&#34;</span><span class=p>:</span> <span class=s2>&#34;EUR&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>:</span> <span class=nb>float</span><span class=p>,</span> <span class=n>currency</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                       <span class=n>payment_method</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PaymentResult</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;표준 결제 인터페이스를 카드 PG 호출로 변환&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 데이터 변환: float -&gt; int (cents)</span>
</span></span><span class=line><span class=cl>            <span class=n>amount_cents</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>amount</span> <span class=o>*</span> <span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>currency_code</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>currency_map</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>currency</span><span class=p>,</span> <span class=s2>&#34;KRW&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 카드 정보 구성 (실제로는 암호화된 토큰 사용)</span>
</span></span><span class=line><span class=cl>            <span class=n>card_info</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;user_id&#34;</span><span class=p>:</span> <span class=n>user_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;payment_method&#34;</span><span class=p>:</span> <span class=n>payment_method</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 레거시 PG 호출</span>
</span></span><span class=line><span class=cl>            <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>card_gateway</span><span class=o>.</span><span class=n>charge_card</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>card_info</span><span class=p>,</span> <span class=n>amount_cents</span><span class=p>,</span> <span class=n>currency_code</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 결과 변환</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>result</span><span class=p>[</span><span class=s2>&#34;result_code&#34;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&#34;SUCCESS&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>SUCCESS</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>transaction_id</span><span class=o>=</span><span class=n>result</span><span class=p>[</span><span class=s2>&#34;tx_ref&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                    <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Card payment successful. Approval: </span><span class=si>{</span><span class=n>result</span><span class=p>[</span><span class=s1>&#39;approval_number&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>amount</span><span class=o>=</span><span class=n>amount</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>transaction_id</span><span class=o>=</span><span class=n>result</span><span class=p>[</span><span class=s2>&#34;tx_ref&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                    <span class=n>message</span><span class=o>=</span><span class=n>result</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;error_message&#34;</span><span class=p>,</span> <span class=s2>&#34;Payment failed&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>transaction_id</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;ERROR_</span><span class=si>{</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()</span><span class=o>.</span><span class=n>hex</span><span class=p>[:</span><span class=mi>8</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Payment processing error: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>verify_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>transaction_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PaymentResult</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;거래 검증&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>card_gateway</span><span class=o>.</span><span class=n>check_transaction</span><span class=p>(</span><span class=n>transaction_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>result</span><span class=p>[</span><span class=s2>&#34;status&#34;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&#34;APPROVED&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>transaction</span> <span class=o>=</span> <span class=n>result</span><span class=p>[</span><span class=s2>&#34;transaction&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>SUCCESS</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>transaction_id</span><span class=o>=</span><span class=n>transaction_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>message</span><span class=o>=</span><span class=s2>&#34;Payment verified&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>amount</span><span class=o>=</span><span class=n>transaction</span><span class=p>[</span><span class=s2>&#34;amount_cents&#34;</span><span class=p>]</span> <span class=o>/</span> <span class=mf>100.0</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>transaction_id</span><span class=o>=</span><span class=n>transaction_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>message</span><span class=o>=</span><span class=s2>&#34;Payment not found or failed&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>transaction_id</span><span class=o>=</span><span class=n>transaction_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Verification error: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>cancel_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>transaction_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PaymentResult</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;결제 취소&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>card_gateway</span><span class=o>.</span><span class=n>void_transaction</span><span class=p>(</span><span class=n>transaction_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>result</span><span class=p>[</span><span class=s2>&#34;void_status&#34;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&#34;COMPLETED&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>CANCELLED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>transaction_id</span><span class=o>=</span><span class=n>transaction_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>message</span><span class=o>=</span><span class=s2>&#34;Payment cancelled successfully&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>transaction_id</span><span class=o>=</span><span class=n>transaction_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>message</span><span class=o>=</span><span class=n>result</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;error&#34;</span><span class=p>,</span> <span class=s2>&#34;Cancellation failed&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>transaction_id</span><span class=o>=</span><span class=n>transaction_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Cancellation error: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Adapter 2 - 간편 결제 어댑터</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SimplePaymentAdapter</span><span class=p>(</span><span class=n>PaymentProcessor</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;간편 결제를 표준 인터페이스로 변환하는 어댑터&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>simple_pay_api</span><span class=p>:</span> <span class=n>SimplePaymentAPI</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>simple_pay_api</span> <span class=o>=</span> <span class=n>simple_pay_api</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>:</span> <span class=nb>float</span><span class=p>,</span> <span class=n>currency</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                       <span class=n>payment_method</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PaymentResult</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;표준 결제 인터페이스를 간편 결제 API 호출로 변환&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 요청 데이터 구성</span>
</span></span><span class=line><span class=cl>            <span class=n>payment_request</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;amount&#34;</span><span class=p>:</span> <span class=n>amount</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;currency&#34;</span><span class=p>:</span> <span class=n>currency</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;user_info&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;user_id&#34;</span><span class=p>:</span> <span class=n>user_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;payment_method&#34;</span><span class=p>:</span> <span class=n>payment_method</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 간편 결제 API 호출</span>
</span></span><span class=line><span class=cl>            <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>simple_pay_api</span><span class=o>.</span><span class=n>create_payment</span><span class=p>(</span><span class=n>payment_request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 결과 변환</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>result</span><span class=p>[</span><span class=s2>&#34;success&#34;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>SUCCESS</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>transaction_id</span><span class=o>=</span><span class=n>result</span><span class=p>[</span><span class=s2>&#34;payment_id&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                    <span class=n>message</span><span class=o>=</span><span class=s2>&#34;Simple payment completed&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>amount</span><span class=o>=</span><span class=n>amount</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>transaction_id</span><span class=o>=</span><span class=n>result</span><span class=p>[</span><span class=s2>&#34;payment_id&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                    <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Payment failed: </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;error_code&#39;</span><span class=p>,</span> <span class=s1>&#39;Unknown error&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>transaction_id</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;ERROR_</span><span class=si>{</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()</span><span class=o>.</span><span class=n>hex</span><span class=p>[:</span><span class=mi>8</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Simple payment error: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>verify_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>transaction_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PaymentResult</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;결제 검증&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>simple_pay_api</span><span class=o>.</span><span class=n>get_payment_info</span><span class=p>(</span><span class=n>transaction_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>result</span><span class=p>[</span><span class=s2>&#34;found&#34;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=n>payment_data</span> <span class=o>=</span> <span class=n>result</span><span class=p>[</span><span class=s2>&#34;payment_data&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=n>status</span> <span class=o>=</span> <span class=n>PaymentStatus</span><span class=o>.</span><span class=n>SUCCESS</span> <span class=k>if</span> <span class=n>payment_data</span><span class=p>[</span><span class=s2>&#34;status&#34;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&#34;COMPLETED&#34;</span> <span class=k>else</span> <span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>status</span><span class=o>=</span><span class=n>status</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>transaction_id</span><span class=o>=</span><span class=n>transaction_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Payment status: </span><span class=si>{</span><span class=n>payment_data</span><span class=p>[</span><span class=s1>&#39;status&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>amount</span><span class=o>=</span><span class=n>payment_data</span><span class=p>[</span><span class=s2>&#34;amount&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>transaction_id</span><span class=o>=</span><span class=n>transaction_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>message</span><span class=o>=</span><span class=s2>&#34;Payment not found&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>transaction_id</span><span class=o>=</span><span class=n>transaction_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Verification error: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>cancel_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>transaction_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PaymentResult</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;결제 취소&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>simple_pay_api</span><span class=o>.</span><span class=n>refund_payment</span><span class=p>(</span><span class=n>transaction_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>result</span><span class=p>[</span><span class=s2>&#34;refund_success&#34;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>CANCELLED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>transaction_id</span><span class=o>=</span><span class=n>transaction_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>message</span><span class=o>=</span><span class=s2>&#34;Payment refunded successfully&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>transaction_id</span><span class=o>=</span><span class=n>transaction_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>message</span><span class=o>=</span><span class=n>result</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;error&#34;</span><span class=p>,</span> <span class=s2>&#34;Refund failed&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>transaction_id</span><span class=o>=</span><span class=n>transaction_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Refund error: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 결제 서비스 (Client)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PaymentService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;통합 결제 서비스 - Adapter들을 활용하는 클라이언트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 여러 결제 수단을 위한 어댑터들</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>payment_adapters</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>PaymentProcessor</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 레거시 PG 시스템들 초기화</span>
</span></span><span class=line><span class=cl>        <span class=n>card_gateway</span> <span class=o>=</span> <span class=n>CardPaymentGateway</span><span class=p>(</span><span class=s2>&#34;MERCHANT_123&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>simple_pay_api</span> <span class=o>=</span> <span class=n>SimplePaymentAPI</span><span class=p>(</span><span class=s2>&#34;API_KEY_456&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 어댑터들 등록</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>payment_adapters</span><span class=p>[</span><span class=s2>&#34;card&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>CardPaymentAdapter</span><span class=p>(</span><span class=n>card_gateway</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>payment_adapters</span><span class=p>[</span><span class=s2>&#34;simplepay&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>SimplePaymentAdapter</span><span class=p>(</span><span class=n>simple_pay_api</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>add_payment_method</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>method_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>adapter</span><span class=p>:</span> <span class=n>PaymentProcessor</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;새로운 결제 수단 추가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>payment_adapters</span><span class=p>[</span><span class=n>method_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>adapter</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Payment method &#39;</span><span class=si>{</span><span class=n>method_name</span><span class=si>}</span><span class=s2>&#39; added successfully&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>payment_method</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>amount</span><span class=p>:</span> <span class=nb>float</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                       <span class=n>currency</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PaymentResult</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;통합 결제 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>=== 결제 처리 시작 ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;결제 수단: </span><span class=si>{</span><span class=n>payment_method</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;금액: </span><span class=si>{</span><span class=n>amount</span><span class=si>}</span><span class=s2> </span><span class=si>{</span><span class=n>currency</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;사용자 ID: </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 결제 수단별 어댑터 선택</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>payment_method</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>payment_adapters</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>transaction_id</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;ERROR_</span><span class=si>{</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()</span><span class=o>.</span><span class=n>hex</span><span class=p>[:</span><span class=mi>8</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Unsupported payment method: </span><span class=si>{</span><span class=n>payment_method</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 선택된 어댑터를 통해 결제 처리</span>
</span></span><span class=line><span class=cl>        <span class=n>adapter</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>payment_adapters</span><span class=p>[</span><span class=n>payment_method</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=n>adapter</span><span class=o>.</span><span class=n>process_payment</span><span class=p>(</span><span class=n>amount</span><span class=p>,</span> <span class=n>currency</span><span class=p>,</span> <span class=n>payment_method</span><span class=p>,</span> <span class=n>user_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;결제 결과: </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>status</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;거래 ID: </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>transaction_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;메시지: </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>message</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;=== 결제 처리 완료 ===</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>verify_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>payment_method</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>transaction_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PaymentResult</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;결제 검증&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>payment_method</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>payment_adapters</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>transaction_id</span><span class=o>=</span><span class=n>transaction_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Unsupported payment method: </span><span class=si>{</span><span class=n>payment_method</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>adapter</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>payment_adapters</span><span class=p>[</span><span class=n>payment_method</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>adapter</span><span class=o>.</span><span class=n>verify_payment</span><span class=p>(</span><span class=n>transaction_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>cancel_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>payment_method</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>transaction_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PaymentResult</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;결제 취소&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>payment_method</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>payment_adapters</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>transaction_id</span><span class=o>=</span><span class=n>transaction_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>message</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Unsupported payment method: </span><span class=si>{</span><span class=n>payment_method</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>adapter</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>payment_adapters</span><span class=p>[</span><span class=n>payment_method</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>adapter</span><span class=o>.</span><span class=n>cancel_payment</span><span class=p>(</span><span class=n>transaction_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시 및 테스트</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>demonstrate_adapter_pattern</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Adapter Pattern 시연&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=== Adapter Pattern 활용 사례: 통합 결제 시스템 ===</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 결제 서비스 초기화</span>
</span></span><span class=line><span class=cl>    <span class=n>payment_service</span> <span class=o>=</span> <span class=n>PaymentService</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 다양한 결제 수단으로 결제 처리</span>
</span></span><span class=line><span class=cl>    <span class=n>test_cases</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=s2>&#34;card&#34;</span><span class=p>,</span> <span class=mf>100.00</span><span class=p>,</span> <span class=s2>&#34;USD&#34;</span><span class=p>,</span> <span class=s2>&#34;user_001&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=s2>&#34;simplepay&#34;</span><span class=p>,</span> <span class=mf>50000.0</span><span class=p>,</span> <span class=s2>&#34;KRW&#34;</span><span class=p>,</span> <span class=s2>&#34;user_002&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=s2>&#34;invalid_method&#34;</span><span class=p>,</span> <span class=mf>25.0</span><span class=p>,</span> <span class=s2>&#34;EUR&#34;</span><span class=p>,</span> <span class=s2>&#34;user_003&#34;</span><span class=p>)</span>  <span class=c1># 지원하지 않는 결제 수단</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>results</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>payment_method</span><span class=p>,</span> <span class=n>amount</span><span class=p>,</span> <span class=n>currency</span><span class=p>,</span> <span class=n>user_id</span> <span class=ow>in</span> <span class=n>test_cases</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=n>payment_service</span><span class=o>.</span><span class=n>process_payment</span><span class=p>(</span><span class=n>payment_method</span><span class=p>,</span> <span class=n>amount</span><span class=p>,</span> <span class=n>currency</span><span class=p>,</span> <span class=n>user_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>results</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>payment_method</span><span class=p>,</span> <span class=n>result</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 성공한 결제에 대해 검증 및 취소 테스트</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>result</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=n>PaymentStatus</span><span class=o>.</span><span class=n>SUCCESS</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;--- </span><span class=si>{</span><span class=n>payment_method</span><span class=si>}</span><span class=s2> 결제 검증 ---&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>verify_result</span> <span class=o>=</span> <span class=n>payment_service</span><span class=o>.</span><span class=n>verify_payment</span><span class=p>(</span><span class=n>payment_method</span><span class=p>,</span> <span class=n>result</span><span class=o>.</span><span class=n>transaction_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;검증 결과: </span><span class=si>{</span><span class=n>verify_result</span><span class=o>.</span><span class=n>status</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> - </span><span class=si>{</span><span class=n>verify_result</span><span class=o>.</span><span class=n>message</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;--- </span><span class=si>{</span><span class=n>payment_method</span><span class=si>}</span><span class=s2> 결제 취소 ---&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>cancel_result</span> <span class=o>=</span> <span class=n>payment_service</span><span class=o>.</span><span class=n>cancel_payment</span><span class=p>(</span><span class=n>payment_method</span><span class=p>,</span> <span class=n>result</span><span class=o>.</span><span class=n>transaction_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;취소 결과: </span><span class=si>{</span><span class=n>cancel_result</span><span class=o>.</span><span class=n>status</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> - </span><span class=si>{</span><span class=n>cancel_result</span><span class=o>.</span><span class=n>message</span><span class=si>}</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 결과 요약</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=== 결제 처리 결과 요약 ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>payment_method</span><span class=p>,</span> <span class=n>result</span> <span class=ow>in</span> <span class=n>results</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>payment_method</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>status</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> - </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>message</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 새로운 결제 수단 추가 시연</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>=== 새 결제 수단 추가 시연 ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 가상의 새 PG사 어댑터 (간단한 더미 구현)</span>
</span></span><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>NewPaymentAdapter</span><span class=p>(</span><span class=n>PaymentProcessor</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>def</span> <span class=nf>process_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>,</span> <span class=n>currency</span><span class=p>,</span> <span class=n>payment_method</span><span class=p>,</span> <span class=n>user_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>SUCCESS</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>transaction_id</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;NEW_</span><span class=si>{</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()</span><span class=o>.</span><span class=n>hex</span><span class=p>[:</span><span class=mi>8</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>message</span><span class=o>=</span><span class=s2>&#34;New payment method success&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>amount</span><span class=o>=</span><span class=n>amount</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>def</span> <span class=nf>verify_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>transaction_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span><span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>SUCCESS</span><span class=p>,</span> <span class=n>transaction_id</span><span class=o>=</span><span class=n>transaction_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>def</span> <span class=nf>cancel_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>transaction_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span><span class=n>status</span><span class=o>=</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>CANCELLED</span><span class=p>,</span> <span class=n>transaction_id</span><span class=o>=</span><span class=n>transaction_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 새 결제 수단 추가</span>
</span></span><span class=line><span class=cl>    <span class=n>payment_service</span><span class=o>.</span><span class=n>add_payment_method</span><span class=p>(</span><span class=s2>&#34;newpay&#34;</span><span class=p>,</span> <span class=n>NewPaymentAdapter</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 새 결제 수단으로 결제 테스트</span>
</span></span><span class=line><span class=cl>    <span class=n>new_result</span> <span class=o>=</span> <span class=n>payment_service</span><span class=o>.</span><span class=n>process_payment</span><span class=p>(</span><span class=s2>&#34;newpay&#34;</span><span class=p>,</span> <span class=mf>75.0</span><span class=p>,</span> <span class=s2>&#34;USD&#34;</span><span class=p>,</span> <span class=s2>&#34;user_004&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;새 결제 수단 결과: </span><span class=si>{</span><span class=n>new_result</span><span class=o>.</span><span class=n>status</span><span class=o>.</span><span class=n>value</span><span class=si>}</span><span class=s2> - </span><span class=si>{</span><span class=n>new_result</span><span class=o>.</span><span class=n>message</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 실행</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>demonstrate_adapter_pattern</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=java>Java<a hidden class=anchor aria-hidden=true href=#java>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1> 1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2> 2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3> 3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4> 4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5> 5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6> 6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7> 7</a>
</span><span class=lnt id=hl-19-8><a class=lnlinks href=#hl-19-8> 8</a>
</span><span class=lnt id=hl-19-9><a class=lnlinks href=#hl-19-9> 9</a>
</span><span class=lnt id=hl-19-10><a class=lnlinks href=#hl-19-10>10</a>
</span><span class=lnt id=hl-19-11><a class=lnlinks href=#hl-19-11>11</a>
</span><span class=lnt id=hl-19-12><a class=lnlinks href=#hl-19-12>12</a>
</span><span class=lnt id=hl-19-13><a class=lnlinks href=#hl-19-13>13</a>
</span><span class=lnt id=hl-19-14><a class=lnlinks href=#hl-19-14>14</a>
</span><span class=lnt id=hl-19-15><a class=lnlinks href=#hl-19-15>15</a>
</span><span class=lnt id=hl-19-16><a class=lnlinks href=#hl-19-16>16</a>
</span><span class=lnt id=hl-19-17><a class=lnlinks href=#hl-19-17>17</a>
</span><span class=lnt id=hl-19-18><a class=lnlinks href=#hl-19-18>18</a>
</span><span class=lnt id=hl-19-19><a class=lnlinks href=#hl-19-19>19</a>
</span><span class=lnt id=hl-19-20><a class=lnlinks href=#hl-19-20>20</a>
</span><span class=lnt id=hl-19-21><a class=lnlinks href=#hl-19-21>21</a>
</span><span class=lnt id=hl-19-22><a class=lnlinks href=#hl-19-22>22</a>
</span><span class=lnt id=hl-19-23><a class=lnlinks href=#hl-19-23>23</a>
</span><span class=lnt id=hl-19-24><a class=lnlinks href=#hl-19-24>24</a>
</span><span class=lnt id=hl-19-25><a class=lnlinks href=#hl-19-25>25</a>
</span><span class=lnt id=hl-19-26><a class=lnlinks href=#hl-19-26>26</a>
</span><span class=lnt id=hl-19-27><a class=lnlinks href=#hl-19-27>27</a>
</span><span class=lnt id=hl-19-28><a class=lnlinks href=#hl-19-28>28</a>
</span><span class=lnt id=hl-19-29><a class=lnlinks href=#hl-19-29>29</a>
</span><span class=lnt id=hl-19-30><a class=lnlinks href=#hl-19-30>30</a>
</span><span class=lnt id=hl-19-31><a class=lnlinks href=#hl-19-31>31</a>
</span><span class=lnt id=hl-19-32><a class=lnlinks href=#hl-19-32>32</a>
</span><span class=lnt id=hl-19-33><a class=lnlinks href=#hl-19-33>33</a>
</span><span class=lnt id=hl-19-34><a class=lnlinks href=#hl-19-34>34</a>
</span><span class=lnt id=hl-19-35><a class=lnlinks href=#hl-19-35>35</a>
</span><span class=lnt id=hl-19-36><a class=lnlinks href=#hl-19-36>36</a>
</span><span class=lnt id=hl-19-37><a class=lnlinks href=#hl-19-37>37</a>
</span><span class=lnt id=hl-19-38><a class=lnlinks href=#hl-19-38>38</a>
</span><span class=lnt id=hl-19-39><a class=lnlinks href=#hl-19-39>39</a>
</span><span class=lnt id=hl-19-40><a class=lnlinks href=#hl-19-40>40</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Target 인터페이스</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>MediaPlayer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kt>void</span><span class=w> </span><span class=nf>play</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>audioType</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>fileName</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// Adaptee 클래스들</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Mp4Player</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>playMp4</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>fileName</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;Playing mp4 file: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>fileName</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>VlcPlayer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>playVlc</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>fileName</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;Playing vlc file: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>fileName</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// Adapter 클래스</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>MediaAdapter</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>MediaPlayer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>private</span><span class=w> </span><span class=n>Mp4Player</span><span class=w> </span><span class=n>mp4Player</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>private</span><span class=w> </span><span class=n>VlcPlayer</span><span class=w> </span><span class=n>vlcPlayer</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=nf>MediaAdapter</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>audioType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>if</span><span class=p>(</span><span class=n>audioType</span><span class=p>.</span><span class=na>equalsIgnoreCase</span><span class=p>(</span><span class=s>&#34;mp4&#34;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=n>mp4Player</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Mp4Player</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>audioType</span><span class=p>.</span><span class=na>equalsIgnoreCase</span><span class=p>(</span><span class=s>&#34;vlc&#34;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=n>vlcPlayer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>VlcPlayer</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>play</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>audioType</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>fileName</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>if</span><span class=p>(</span><span class=n>audioType</span><span class=p>.</span><span class=na>equalsIgnoreCase</span><span class=p>(</span><span class=s>&#34;mp4&#34;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=n>mp4Player</span><span class=p>.</span><span class=na>playMp4</span><span class=p>(</span><span class=n>fileName</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>audioType</span><span class=p>.</span><span class=na>equalsIgnoreCase</span><span class=p>(</span><span class=s>&#34;vlc&#34;</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=n>vlcPlayer</span><span class=p>.</span><span class=na>playVlc</span><span class=p>(</span><span class=n>fileName</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=java-graphql--rest-adapter>Java: GraphQL → REST Adapter<a hidden class=anchor aria-hidden=true href=#java-graphql--rest-adapter>#</a></h4><p>기존 REST API(<code>GET /users/{id}</code>) 를 사용하는 시스템을 GraphQL API 를 통해 통합 제공해야 함.</p><ol><li><p>GraphQL 스키마 정의</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1>1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2>2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3>3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4>4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5>5</a>
</span><span class=lnt id=hl-20-6><a class=lnlinks href=#hl-20-6>6</a>
</span><span class=lnt id=hl-20-7><a class=lnlinks href=#hl-20-7>7</a>
</span><span class=lnt id=hl-20-8><a class=lnlinks href=#hl-20-8>8</a>
</span><span class=lnt id=hl-20-9><a class=lnlinks href=#hl-20-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-graphql data-lang=graphql><span class=line><span class=cl><span class=kd>type</span><span class=w> </span><span class=nc>Query</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>user</span><span class=p>(</span><span class=py>id</span><span class=p>:</span><span class=w> </span><span class=nc>ID</span><span class=p>!):</span><span class=w> </span><span class=nc>User</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>type</span><span class=w> </span><span class=nc>User</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>id</span><span class=p>:</span><span class=w> </span><span class=nc>ID</span><span class=p>!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>name</span><span class=p>:</span><span class=w> </span><span class=nc>String</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>email</span><span class=p>:</span><span class=w> </span><span class=nc>String</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li><li><p>구성도</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1>1</a>
</span><span class=lnt id=hl-21-2><a class=lnlinks href=#hl-21-2>2</a>
</span><span class=lnt id=hl-21-3><a class=lnlinks href=#hl-21-3>3</a>
</span><span class=lnt id=hl-21-4><a class=lnlinks href=#hl-21-4>4</a>
</span><span class=lnt id=hl-21-5><a class=lnlinks href=#hl-21-5>5</a>
</span><span class=lnt id=hl-21-6><a class=lnlinks href=#hl-21-6>6</a>
</span><span class=lnt id=hl-21-7><a class=lnlinks href=#hl-21-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>Client (GraphQL)
</span></span><span class=line><span class=cl>     ↓
</span></span><span class=line><span class=cl>GraphQL Resolver (user)
</span></span><span class=line><span class=cl>     ↓
</span></span><span class=line><span class=cl>REST 호출 (GET /users/{id})
</span></span><span class=line><span class=cl>     ↓
</span></span><span class=line><span class=cl>REST 응답 객체 → Adapter → GraphQL DTO
</span></span></code></pre></td></tr></table></div></div></li><li><p>REST API 응답 예시</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1>1</a>
</span><span class=lnt id=hl-22-2><a class=lnlinks href=#hl-22-2>2</a>
</span><span class=lnt id=hl-22-3><a class=lnlinks href=#hl-22-3>3</a>
</span><span class=lnt id=hl-22-4><a class=lnlinks href=#hl-22-4>4</a>
</span><span class=lnt id=hl-22-5><a class=lnlinks href=#hl-22-5>5</a>
</span><span class=lnt id=hl-22-6><a class=lnlinks href=#hl-22-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=err>GET</span> <span class=err>/api/v</span><span class=mi>1</span><span class=err>/users/</span><span class=mi>42</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;userId&#34;</span><span class=p>:</span> <span class=mi>42</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;username&#34;</span><span class=p>:</span> <span class=s2>&#34;lee&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;emailAddress&#34;</span><span class=p>:</span> <span class=s2>&#34;lee@example.com&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>Java (Spring Boot + GraphQL) 어댑터 구현</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-23-1><a class=lnlinks href=#hl-23-1>1</a>
</span><span class=lnt id=hl-23-2><a class=lnlinks href=#hl-23-2>2</a>
</span><span class=lnt id=hl-23-3><a class=lnlinks href=#hl-23-3>3</a>
</span><span class=lnt id=hl-23-4><a class=lnlinks href=#hl-23-4>4</a>
</span><span class=lnt id=hl-23-5><a class=lnlinks href=#hl-23-5>5</a>
</span><span class=lnt id=hl-23-6><a class=lnlinks href=#hl-23-6>6</a>
</span><span class=lnt id=hl-23-7><a class=lnlinks href=#hl-23-7>7</a>
</span><span class=lnt id=hl-23-8><a class=lnlinks href=#hl-23-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// GraphQL의 User 타입</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserDTO</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>id</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>email</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// getters/setters</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1>1</a>
</span><span class=lnt id=hl-24-2><a class=lnlinks href=#hl-24-2>2</a>
</span><span class=lnt id=hl-24-3><a class=lnlinks href=#hl-24-3>3</a>
</span><span class=lnt id=hl-24-4><a class=lnlinks href=#hl-24-4>4</a>
</span><span class=lnt id=hl-24-5><a class=lnlinks href=#hl-24-5>5</a>
</span><span class=lnt id=hl-24-6><a class=lnlinks href=#hl-24-6>6</a>
</span><span class=lnt id=hl-24-7><a class=lnlinks href=#hl-24-7>7</a>
</span><span class=lnt id=hl-24-8><a class=lnlinks href=#hl-24-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// REST 응답 모델</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>RestUserResponse</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>userId</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>username</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>emailAddress</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// getters/setters</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-25-1><a class=lnlinks href=#hl-25-1> 1</a>
</span><span class=lnt id=hl-25-2><a class=lnlinks href=#hl-25-2> 2</a>
</span><span class=lnt id=hl-25-3><a class=lnlinks href=#hl-25-3> 3</a>
</span><span class=lnt id=hl-25-4><a class=lnlinks href=#hl-25-4> 4</a>
</span><span class=lnt id=hl-25-5><a class=lnlinks href=#hl-25-5> 5</a>
</span><span class=lnt id=hl-25-6><a class=lnlinks href=#hl-25-6> 6</a>
</span><span class=lnt id=hl-25-7><a class=lnlinks href=#hl-25-7> 7</a>
</span><span class=lnt id=hl-25-8><a class=lnlinks href=#hl-25-8> 8</a>
</span><span class=lnt id=hl-25-9><a class=lnlinks href=#hl-25-9> 9</a>
</span><span class=lnt id=hl-25-10><a class=lnlinks href=#hl-25-10>10</a>
</span><span class=lnt id=hl-25-11><a class=lnlinks href=#hl-25-11>11</a>
</span><span class=lnt id=hl-25-12><a class=lnlinks href=#hl-25-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 어댑터: REST API → GraphQL DTO 변환</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Component</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserAdapter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>UserDTO</span><span class=w> </span><span class=nf>fromRest</span><span class=p>(</span><span class=n>RestUserResponse</span><span class=w> </span><span class=n>restUser</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>UserDTO</span><span class=w> </span><span class=n>dto</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>UserDTO</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>dto</span><span class=p>.</span><span class=na>setId</span><span class=p>(</span><span class=n>String</span><span class=p>.</span><span class=na>valueOf</span><span class=p>(</span><span class=n>restUser</span><span class=p>.</span><span class=na>getUserId</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>dto</span><span class=p>.</span><span class=na>setName</span><span class=p>(</span><span class=n>restUser</span><span class=p>.</span><span class=na>getUsername</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>dto</span><span class=p>.</span><span class=na>setEmail</span><span class=p>(</span><span class=n>restUser</span><span class=p>.</span><span class=na>getEmailAddress</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>dto</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1> 1</a>
</span><span class=lnt id=hl-26-2><a class=lnlinks href=#hl-26-2> 2</a>
</span><span class=lnt id=hl-26-3><a class=lnlinks href=#hl-26-3> 3</a>
</span><span class=lnt id=hl-26-4><a class=lnlinks href=#hl-26-4> 4</a>
</span><span class=lnt id=hl-26-5><a class=lnlinks href=#hl-26-5> 5</a>
</span><span class=lnt id=hl-26-6><a class=lnlinks href=#hl-26-6> 6</a>
</span><span class=lnt id=hl-26-7><a class=lnlinks href=#hl-26-7> 7</a>
</span><span class=lnt id=hl-26-8><a class=lnlinks href=#hl-26-8> 8</a>
</span><span class=lnt id=hl-26-9><a class=lnlinks href=#hl-26-9> 9</a>
</span><span class=lnt id=hl-26-10><a class=lnlinks href=#hl-26-10>10</a>
</span><span class=lnt id=hl-26-11><a class=lnlinks href=#hl-26-11>11</a>
</span><span class=lnt id=hl-26-12><a class=lnlinks href=#hl-26-12>12</a>
</span><span class=lnt id=hl-26-13><a class=lnlinks href=#hl-26-13>13</a>
</span><span class=lnt id=hl-26-14><a class=lnlinks href=#hl-26-14>14</a>
</span><span class=lnt id=hl-26-15><a class=lnlinks href=#hl-26-15>15</a>
</span><span class=lnt id=hl-26-16><a class=lnlinks href=#hl-26-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// GraphQL Resolver</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Component</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserQueryResolver</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>GraphQLQueryResolver</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>RestTemplate</span><span class=w> </span><span class=n>restTemplate</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>UserAdapter</span><span class=w> </span><span class=n>adapter</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>UserDTO</span><span class=w> </span><span class=nf>user</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>url</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;http://internal-service/api/v1/users/&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>id</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>RestUserResponse</span><span class=w> </span><span class=n>restUser</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>restTemplate</span><span class=p>.</span><span class=na>getForObject</span><span class=p>(</span><span class=n>url</span><span class=p>,</span><span class=w> </span><span class=n>RestUserResponse</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>adapter</span><span class=p>.</span><span class=na>fromRest</span><span class=p>(</span><span class=n>restUser</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li></ol><h3 id=adapter-vs-facade-vs-decorator>Adapter vs. Facade vs. Decorator<a hidden class=anchor aria-hidden=true href=#adapter-vs-facade-vs-decorator>#</a></h3><table><thead><tr><th>구분</th><th>Adapter (어댑터)</th><th>Facade (퍼사드)</th><th>Decorator (데코레이터)</th></tr></thead><tbody><tr><td>목적</td><td>인터페이스 호환</td><td>복잡한 서브시스템을 단순화</td><td>객체 기능 확장</td></tr><tr><td>구조</td><td>클라이언트 ↔ Adapter ↔ Adaptee</td><td>클라이언트 ↔ Facade ↔ 복잡한 하위 컴포넌트</td><td>객체 ↔ 여러 데코레이터 체인</td></tr><tr><td>동작</td><td>요청 변환 후 기존 객체에 위임</td><td>여러 객체를 묶어 하나의 API 처럼 제공</td><td>기존 객체에 기능을 동적으로 추가</td></tr><tr><td>사용 사례</td><td>레거시 코드 연동, 호환성 해결</td><td>서브시스템 단순화, 외부 API 감싸기</td><td>기능 추가 (로깅, 캐싱 등)</td></tr><tr><td>변경 여부</td><td>인터페이스 변경 없이 사용</td><td>내부 구현 감추고 단순화</td><td>기존 클래스를 수정하지 않음</td></tr><tr><td>예시</td><td>SLF4J ↔ Log4j 어댑터</td><td>Spring RestTemplate 내부 구현</td><td>Java IO 의 BufferedReader, GzipInputStream</td></tr></tbody></table><ul><li><strong>Adapter</strong>: " 호환되지 않는 인터페이스를 맞춰줌 "</li><li><strong>Facade</strong>: " 복잡한 로직을 간단하게 감싸줌 "</li><li><strong>Decorator</strong>: " 기존 객체의 기능을 유연하게 확장함 "</li></ul><h4 id=공통-주제-audio-player>공통 주제: Audio Player<a hidden class=anchor aria-hidden=true href=#공통-주제-audio-player>#</a></h4><blockquote><ul><li>다양한 오디오 형식 (mp3, wav 등) 을 재생</li><li><strong>Adapter</strong>: 기존 클래스 호환을 위해</li><li><strong>Facade</strong>: 복잡한 하위 시스템 단순화</li><li><strong>Decorator</strong>: 기능을 확장 (예: 이펙트, 로그, 필터)</li></ul></blockquote><table><thead><tr><th>항목</th><th>Adapter</th><th>Facade</th><th>Decorator</th></tr></thead><tbody><tr><td><strong>목적</strong></td><td>기존 클래스를 호환 가능한 인터페이스로 변환</td><td>복잡한 서브시스템을 단순한 API 로 감쌈</td><td>기능을 동적으로 추가, 확장</td></tr><tr><td><strong>구조</strong></td><td>Adaptee → Adapter → Target</td><td>여러 하위 시스템 → Facade → 사용자</td><td>Component → Decorator → 확장 기능</td></tr><tr><td><strong>적용 대상</strong></td><td>레거시 시스템 또는 외부 API</td><td>라이브러리, 프레임워크 초기화 또는 멀티 구성 단계</td><td>기능 확장이 필요한 모듈형 시스템</td></tr><tr><td><strong>기능 추가</strong></td><td>❌ (기능 변경 없음)</td><td>❌ (단순화만, 기능 추가 없음)</td><td>✅ (기능 확장에 적합, 체이닝 가능)</td></tr><tr><td><strong>예시 키워드</strong></td><td>호환성, 포맷 변환, 레거시 래핑</td><td>간편 API, 복잡도 은닉, 사용성 향상</td><td>로그, 이펙트, 필터, 권한 체크 등 기능 체이닝</td></tr></tbody></table><ul><li><strong>Adapter</strong>: " 이거 형식이 안 맞는데 맞춰 써야 해!" → <strong>호환 목적</strong></li><li><strong>Facade</strong>: " 너무 복잡해서 못 쓰겠어! 한 줄로 끝내줘 " → <strong>단순화 목적</strong></li><li><strong>Decorator</strong>: " 여기에 기능 하나만 더 붙여보자 " → <strong>기능 확장 목적</strong></li></ul><h5 id=adapter-pattern-1>Adapter Pattern<a hidden class=anchor aria-hidden=true href=#adapter-pattern-1>#</a></h5><blockquote><p><strong>기존 클래스의 인터페이스를 변경 없이 다른 인터페이스에 맞춰주는 패턴</strong><br>→ 예전 라이브러리를 최신 시스템에 맞춰 사용</p></blockquote><p><strong>코드 예시</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-27-1><a class=lnlinks href=#hl-27-1> 1</a>
</span><span class=lnt id=hl-27-2><a class=lnlinks href=#hl-27-2> 2</a>
</span><span class=lnt id=hl-27-3><a class=lnlinks href=#hl-27-3> 3</a>
</span><span class=lnt id=hl-27-4><a class=lnlinks href=#hl-27-4> 4</a>
</span><span class=lnt id=hl-27-5><a class=lnlinks href=#hl-27-5> 5</a>
</span><span class=lnt id=hl-27-6><a class=lnlinks href=#hl-27-6> 6</a>
</span><span class=lnt id=hl-27-7><a class=lnlinks href=#hl-27-7> 7</a>
</span><span class=lnt id=hl-27-8><a class=lnlinks href=#hl-27-8> 8</a>
</span><span class=lnt id=hl-27-9><a class=lnlinks href=#hl-27-9> 9</a>
</span><span class=lnt id=hl-27-10><a class=lnlinks href=#hl-27-10>10</a>
</span><span class=lnt id=hl-27-11><a class=lnlinks href=#hl-27-11>11</a>
</span><span class=lnt id=hl-27-12><a class=lnlinks href=#hl-27-12>12</a>
</span><span class=lnt id=hl-27-13><a class=lnlinks href=#hl-27-13>13</a>
</span><span class=lnt id=hl-27-14><a class=lnlinks href=#hl-27-14>14</a>
</span><span class=lnt id=hl-27-15><a class=lnlinks href=#hl-27-15>15</a>
</span><span class=lnt id=hl-27-16><a class=lnlinks href=#hl-27-16>16</a>
</span><span class=lnt id=hl-27-17><a class=lnlinks href=#hl-27-17>17</a>
</span><span class=lnt id=hl-27-18><a class=lnlinks href=#hl-27-18>18</a>
</span><span class=lnt id=hl-27-19><a class=lnlinks href=#hl-27-19>19</a>
</span><span class=lnt id=hl-27-20><a class=lnlinks href=#hl-27-20>20</a>
</span><span class=lnt id=hl-27-21><a class=lnlinks href=#hl-27-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 기존에 존재하던 클래스를 가정 (Adaptee)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>LegacyWavPlayer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play_wav_file</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filename</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[Legacy WAV] Playing </span><span class=si>{</span><span class=n>filename</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 클라이언트가 기대하는 인터페이스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AudioPlayer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filename</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=ne>NotImplementedError</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Adapter: WAV를 AudioPlayer에 맞춰줌</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>WavAdapter</span><span class=p>(</span><span class=n>AudioPlayer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>legacy_player</span><span class=p>:</span> <span class=n>LegacyWavPlayer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>legacy</span> <span class=o>=</span> <span class=n>legacy_player</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filename</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>legacy</span><span class=o>.</span><span class=n>play_wav_file</span><span class=p>(</span><span class=n>filename</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>adapter</span> <span class=o>=</span> <span class=n>WavAdapter</span><span class=p>(</span><span class=n>LegacyWavPlayer</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>adapter</span><span class=o>.</span><span class=n>play</span><span class=p>(</span><span class=s2>&#34;sound.wav&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=facade-pattern>Facade Pattern<a hidden class=anchor aria-hidden=true href=#facade-pattern>#</a></h5><blockquote><p><strong>복잡한 서브 시스템을 단순화된 API 로 감싸서 제공</strong><br>→ 사용자에게 쉬운 사용 경험 제공</p></blockquote><p><strong>코드 예시</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-28-1><a class=lnlinks href=#hl-28-1> 1</a>
</span><span class=lnt id=hl-28-2><a class=lnlinks href=#hl-28-2> 2</a>
</span><span class=lnt id=hl-28-3><a class=lnlinks href=#hl-28-3> 3</a>
</span><span class=lnt id=hl-28-4><a class=lnlinks href=#hl-28-4> 4</a>
</span><span class=lnt id=hl-28-5><a class=lnlinks href=#hl-28-5> 5</a>
</span><span class=lnt id=hl-28-6><a class=lnlinks href=#hl-28-6> 6</a>
</span><span class=lnt id=hl-28-7><a class=lnlinks href=#hl-28-7> 7</a>
</span><span class=lnt id=hl-28-8><a class=lnlinks href=#hl-28-8> 8</a>
</span><span class=lnt id=hl-28-9><a class=lnlinks href=#hl-28-9> 9</a>
</span><span class=lnt id=hl-28-10><a class=lnlinks href=#hl-28-10>10</a>
</span><span class=lnt id=hl-28-11><a class=lnlinks href=#hl-28-11>11</a>
</span><span class=lnt id=hl-28-12><a class=lnlinks href=#hl-28-12>12</a>
</span><span class=lnt id=hl-28-13><a class=lnlinks href=#hl-28-13>13</a>
</span><span class=lnt id=hl-28-14><a class=lnlinks href=#hl-28-14>14</a>
</span><span class=lnt id=hl-28-15><a class=lnlinks href=#hl-28-15>15</a>
</span><span class=lnt id=hl-28-16><a class=lnlinks href=#hl-28-16>16</a>
</span><span class=lnt id=hl-28-17><a class=lnlinks href=#hl-28-17>17</a>
</span><span class=lnt id=hl-28-18><a class=lnlinks href=#hl-28-18>18</a>
</span><span class=lnt id=hl-28-19><a class=lnlinks href=#hl-28-19>19</a>
</span><span class=lnt id=hl-28-20><a class=lnlinks href=#hl-28-20>20</a>
</span><span class=lnt id=hl-28-21><a class=lnlinks href=#hl-28-21>21</a>
</span><span class=lnt id=hl-28-22><a class=lnlinks href=#hl-28-22>22</a>
</span><span class=lnt id=hl-28-23><a class=lnlinks href=#hl-28-23>23</a>
</span><span class=lnt id=hl-28-24><a class=lnlinks href=#hl-28-24>24</a>
</span><span class=lnt id=hl-28-25><a class=lnlinks href=#hl-28-25>25</a>
</span><span class=lnt id=hl-28-26><a class=lnlinks href=#hl-28-26>26</a>
</span><span class=lnt id=hl-28-27><a class=lnlinks href=#hl-28-27>27</a>
</span><span class=lnt id=hl-28-28><a class=lnlinks href=#hl-28-28>28</a>
</span><span class=lnt id=hl-28-29><a class=lnlinks href=#hl-28-29>29</a>
</span><span class=lnt id=hl-28-30><a class=lnlinks href=#hl-28-30>30</a>
</span><span class=lnt id=hl-28-31><a class=lnlinks href=#hl-28-31>31</a>
</span><span class=lnt id=hl-28-32><a class=lnlinks href=#hl-28-32>32</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 복잡한 하위 컴포넌트들</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Decoder</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>decode</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filename</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Decoding </span><span class=si>{</span><span class=n>filename</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AudioOutput</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>setup</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Setting up audio output&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play_audio</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Playing audio&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Equalizer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>apply</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Applying default EQ&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Facade 클래스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SimpleAudioPlayer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>decoder</span> <span class=o>=</span> <span class=n>Decoder</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>output</span> <span class=o>=</span> <span class=n>AudioOutput</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>eq</span> <span class=o>=</span> <span class=n>Equalizer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filename</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>decoder</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=n>filename</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>eq</span><span class=o>.</span><span class=n>apply</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>output</span><span class=o>.</span><span class=n>setup</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>output</span><span class=o>.</span><span class=n>play_audio</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>player</span> <span class=o>=</span> <span class=n>SimpleAudioPlayer</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>player</span><span class=o>.</span><span class=n>play</span><span class=p>(</span><span class=s2>&#34;song.mp3&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=decorator-pattern>Decorator Pattern<a hidden class=anchor aria-hidden=true href=#decorator-pattern>#</a></h5><blockquote><p><strong>원래 객체를 감싸면서 기능을 확장</strong><br>→ 런타임에 효과, 필터, 로깅 등을 추가</p></blockquote><p><strong>코드 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-29-1><a class=lnlinks href=#hl-29-1> 1</a>
</span><span class=lnt id=hl-29-2><a class=lnlinks href=#hl-29-2> 2</a>
</span><span class=lnt id=hl-29-3><a class=lnlinks href=#hl-29-3> 3</a>
</span><span class=lnt id=hl-29-4><a class=lnlinks href=#hl-29-4> 4</a>
</span><span class=lnt id=hl-29-5><a class=lnlinks href=#hl-29-5> 5</a>
</span><span class=lnt id=hl-29-6><a class=lnlinks href=#hl-29-6> 6</a>
</span><span class=lnt id=hl-29-7><a class=lnlinks href=#hl-29-7> 7</a>
</span><span class=lnt id=hl-29-8><a class=lnlinks href=#hl-29-8> 8</a>
</span><span class=lnt id=hl-29-9><a class=lnlinks href=#hl-29-9> 9</a>
</span><span class=lnt id=hl-29-10><a class=lnlinks href=#hl-29-10>10</a>
</span><span class=lnt id=hl-29-11><a class=lnlinks href=#hl-29-11>11</a>
</span><span class=lnt id=hl-29-12><a class=lnlinks href=#hl-29-12>12</a>
</span><span class=lnt id=hl-29-13><a class=lnlinks href=#hl-29-13>13</a>
</span><span class=lnt id=hl-29-14><a class=lnlinks href=#hl-29-14>14</a>
</span><span class=lnt id=hl-29-15><a class=lnlinks href=#hl-29-15>15</a>
</span><span class=lnt id=hl-29-16><a class=lnlinks href=#hl-29-16>16</a>
</span><span class=lnt id=hl-29-17><a class=lnlinks href=#hl-29-17>17</a>
</span><span class=lnt id=hl-29-18><a class=lnlinks href=#hl-29-18>18</a>
</span><span class=lnt id=hl-29-19><a class=lnlinks href=#hl-29-19>19</a>
</span><span class=lnt id=hl-29-20><a class=lnlinks href=#hl-29-20>20</a>
</span><span class=lnt id=hl-29-21><a class=lnlinks href=#hl-29-21>21</a>
</span><span class=lnt id=hl-29-22><a class=lnlinks href=#hl-29-22>22</a>
</span><span class=lnt id=hl-29-23><a class=lnlinks href=#hl-29-23>23</a>
</span><span class=lnt id=hl-29-24><a class=lnlinks href=#hl-29-24>24</a>
</span><span class=lnt id=hl-29-25><a class=lnlinks href=#hl-29-25>25</a>
</span><span class=lnt id=hl-29-26><a class=lnlinks href=#hl-29-26>26</a>
</span><span class=lnt id=hl-29-27><a class=lnlinks href=#hl-29-27>27</a>
</span><span class=lnt id=hl-29-28><a class=lnlinks href=#hl-29-28>28</a>
</span><span class=lnt id=hl-29-29><a class=lnlinks href=#hl-29-29>29</a>
</span><span class=lnt id=hl-29-30><a class=lnlinks href=#hl-29-30>30</a>
</span><span class=lnt id=hl-29-31><a class=lnlinks href=#hl-29-31>31</a>
</span><span class=lnt id=hl-29-32><a class=lnlinks href=#hl-29-32>32</a>
</span><span class=lnt id=hl-29-33><a class=lnlinks href=#hl-29-33>33</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 기본 인터페이스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AudioPlayer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filename</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=ne>NotImplementedError</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 기본 구현</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BasicAudioPlayer</span><span class=p>(</span><span class=n>AudioPlayer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filename</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Playing </span><span class=si>{</span><span class=n>filename</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 데코레이터 베이스 클래스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AudioPlayerDecorator</span><span class=p>(</span><span class=n>AudioPlayer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>player</span><span class=p>:</span> <span class=n>AudioPlayer</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>player</span> <span class=o>=</span> <span class=n>player</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filename</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>player</span><span class=o>.</span><span class=n>play</span><span class=p>(</span><span class=n>filename</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 효과 추가 데코레이터</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ReverbEffect</span><span class=p>(</span><span class=n>AudioPlayerDecorator</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filename</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Applying Reverb Effect&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>play</span><span class=p>(</span><span class=n>filename</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 로그 추가 데코레이터</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>LoggingDecorator</span><span class=p>(</span><span class=n>AudioPlayerDecorator</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>play</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filename</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[Log] Start playing: </span><span class=si>{</span><span class=n>filename</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>play</span><span class=p>(</span><span class=n>filename</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>player</span> <span class=o>=</span> <span class=n>LoggingDecorator</span><span class=p>(</span><span class=n>ReverbEffect</span><span class=p>(</span><span class=n>BasicAudioPlayer</span><span class=p>()))</span>
</span></span><span class=line><span class=cl><span class=n>player</span><span class=o>.</span><span class=n>play</span><span class=p>(</span><span class=s2>&#34;music.mp3&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>고려사항</strong></th><th><strong>설명</strong></th><th><strong>권장사항</strong></th><th></th></tr></thead><tbody><tr><td><strong>설계</strong></td><td>인터페이스 명세 정의</td><td>클라이언트 요구와 Target 인터페이스의 계약 정의 필요</td><td>Target 인터페이스 우선 설계, 명확한 명세 문서화, 도메인 전문가와 협업 필요</td><td></td></tr><tr><td></td><td>클래스 vs 객체 어댑터 선택</td><td>언어 특성에 따라 클래스 어댑터 (상속) 사용이 제한될 수 있음</td><td>객체 어댑터 (합성) 방식 우선 적용, 특히 Java 등 다중 상속 제한 언어에서 추천</td><td></td></tr><tr><td></td><td>책임 분리</td><td>어댑터에 도메인 로직이 섞이지 않도록 설계 필요</td><td>로직 최소화, SRP(단일 책임 원칙) 준수</td><td></td></tr><tr><td></td><td>인터페이스 일관성</td><td>다양한 Adaptee 관리 시 인터페이스 일관성 필요</td><td>공통 Target 인터페이스 정의, 표준화된 계약 사용</td><td></td></tr><tr><td></td><td>중복 방지</td><td>다양한 시스템과 연동 시 어댑터 계층이 중복될 수 있음</td><td>추상 어댑터/팩토리 패턴 도입, 공통화 구조 설계</td><td></td></tr><tr><td><strong>성능</strong></td><td>변환 오버헤드</td><td>어댑터 계층에서의 데이터 변환 비용 존재</td><td>병목 구간 프로파일링, 캐싱 및 배치 처리 적용</td><td></td></tr><tr><td></td><td>계층 오버헤드</td><td>계층 과도화로 인한 응답 시간 증가</td><td>계층 최소화 또는 직접 통합 검토, 경량 어댑터 설계</td><td></td></tr><tr><td></td><td>성능 테스트 필요성</td><td>고빈도 호출 시 어댑터 성능 영향 확인 필수</td><td>성능 프로파일링 수행, 시나리오 기반 부하 테스트</td><td></td></tr><tr><td><strong>테스트</strong></td><td>단위 테스트 가능성</td><td>Adaptee 내부 호출 시 테스트 곤란 가능성 존재</td><td>DI 기반 설계, Mock 또는 Stub 활용, 어댑터 단위 테스트 강화</td><td></td></tr><tr><td></td><td>통합 테스트 복잡도</td><td>다수 시스템과의 연동으로 테스트 복잡도 증가</td><td>테스트 환경 분리, 단계별 시나리오 테스트, 테스트 자동화 도구 활용</td><td></td></tr><tr><td><strong>운영</strong></td><td>예외 처리</td><td>Adaptee 의 예외를 클라이언트에 맞게 매핑 필요</td><td>의미 있는 예외 메시지 변환, Target 인터페이스의 표준 에러 설계 적용</td><td></td></tr><tr><td></td><td>모니터링 및 추적</td><td>장애 추적과 성능 모니터링이 어려울 수 있음</td><td>분산 트레이싱 (OpenTelemetry 등) 도입, 메트릭 기반 알림 구성</td><td></td></tr><tr><td><strong>유지보수</strong></td><td>버전 호환성</td><td>Adaptee 변경 시 Target 과의 호환성 고려 필요</td><td>계약 테스트 적용, 버전 명시 및 점진적 롤아웃 전략 적용</td><td></td></tr><tr><td></td><td>복잡성 증가</td><td>어댑터 수 증가 시 유지보수 난이도 증가</td><td>모듈화, 어댑터 레지스트리 적용, 코드 생성 도구 활용</td><td></td></tr><tr><td></td><td>문서화</td><td>어댑터 내부 로직과 변환 기준이 불명확할 수 있음</td><td>변환 규칙과 예외 처리 기준을 포함한 명세 문서 작성</td><td></td></tr><tr><td><strong>보안</strong></td><td>민감 데이터 처리</td><td>인증 정보 또는 개인정보 등 처리 시 주의 필요</td><td>암호화, 토큰화 적용 및 보안 감사 로그 구축</td><td></td></tr></tbody></table><h4 id=테스트-전략>테스트 전략<a hidden class=anchor aria-hidden=true href=#테스트-전략>#</a></h4><ol><li><p>단위 테스트 전략</p><ul><li><strong>목표</strong>: <code>CardPaymentAdapter</code> 클래스의 동작을 <strong>외부 시스템의 영향 없이 독립적으로 검증</strong></li><li><strong>대상</strong>: 어댑터 계층이 <strong>올바르게 요청을 전달하고, 응답을 변환하며, 예외를 처리하는지</strong> 확인</li><li><strong>접근법</strong>: 외부 의존성 (<code>CardPaymentGateway</code>) 을 <strong>Mock</strong>으로 대체하여 어댑터의 책임만 테스트</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-30-1><a class=lnlinks href=#hl-30-1> 1</a>
</span><span class=lnt id=hl-30-2><a class=lnlinks href=#hl-30-2> 2</a>
</span><span class=lnt id=hl-30-3><a class=lnlinks href=#hl-30-3> 3</a>
</span><span class=lnt id=hl-30-4><a class=lnlinks href=#hl-30-4> 4</a>
</span><span class=lnt id=hl-30-5><a class=lnlinks href=#hl-30-5> 5</a>
</span><span class=lnt id=hl-30-6><a class=lnlinks href=#hl-30-6> 6</a>
</span><span class=lnt id=hl-30-7><a class=lnlinks href=#hl-30-7> 7</a>
</span><span class=lnt id=hl-30-8><a class=lnlinks href=#hl-30-8> 8</a>
</span><span class=lnt id=hl-30-9><a class=lnlinks href=#hl-30-9> 9</a>
</span><span class=lnt id=hl-30-10><a class=lnlinks href=#hl-30-10>10</a>
</span><span class=lnt id=hl-30-11><a class=lnlinks href=#hl-30-11>11</a>
</span><span class=lnt id=hl-30-12><a class=lnlinks href=#hl-30-12>12</a>
</span><span class=lnt id=hl-30-13><a class=lnlinks href=#hl-30-13>13</a>
</span><span class=lnt id=hl-30-14><a class=lnlinks href=#hl-30-14>14</a>
</span><span class=lnt id=hl-30-15><a class=lnlinks href=#hl-30-15>15</a>
</span><span class=lnt id=hl-30-16><a class=lnlinks href=#hl-30-16>16</a>
</span><span class=lnt id=hl-30-17><a class=lnlinks href=#hl-30-17>17</a>
</span><span class=lnt id=hl-30-18><a class=lnlinks href=#hl-30-18>18</a>
</span><span class=lnt id=hl-30-19><a class=lnlinks href=#hl-30-19>19</a>
</span><span class=lnt id=hl-30-20><a class=lnlinks href=#hl-30-20>20</a>
</span><span class=lnt id=hl-30-21><a class=lnlinks href=#hl-30-21>21</a>
</span><span class=lnt id=hl-30-22><a class=lnlinks href=#hl-30-22>22</a>
</span><span class=lnt id=hl-30-23><a class=lnlinks href=#hl-30-23>23</a>
</span><span class=lnt id=hl-30-24><a class=lnlinks href=#hl-30-24>24</a>
</span><span class=lnt id=hl-30-25><a class=lnlinks href=#hl-30-25>25</a>
</span><span class=lnt id=hl-30-26><a class=lnlinks href=#hl-30-26>26</a>
</span><span class=lnt id=hl-30-27><a class=lnlinks href=#hl-30-27>27</a>
</span><span class=lnt id=hl-30-28><a class=lnlinks href=#hl-30-28>28</a>
</span><span class=lnt id=hl-30-29><a class=lnlinks href=#hl-30-29>29</a>
</span><span class=lnt id=hl-30-30><a class=lnlinks href=#hl-30-30>30</a>
</span><span class=lnt id=hl-30-31><a class=lnlinks href=#hl-30-31>31</a>
</span><span class=lnt id=hl-30-32><a class=lnlinks href=#hl-30-32>32</a>
</span><span class=lnt id=hl-30-33><a class=lnlinks href=#hl-30-33>33</a>
</span><span class=lnt id=hl-30-34><a class=lnlinks href=#hl-30-34>34</a>
</span><span class=lnt id=hl-30-35><a class=lnlinks href=#hl-30-35>35</a>
</span><span class=lnt id=hl-30-36><a class=lnlinks href=#hl-30-36>36</a>
</span><span class=lnt id=hl-30-37><a class=lnlinks href=#hl-30-37>37</a>
</span><span class=lnt id=hl-30-38><a class=lnlinks href=#hl-30-38>38</a>
</span><span class=lnt id=hl-30-39><a class=lnlinks href=#hl-30-39>39</a>
</span><span class=lnt id=hl-30-40><a class=lnlinks href=#hl-30-40>40</a>
</span><span class=lnt id=hl-30-41><a class=lnlinks href=#hl-30-41>41</a>
</span><span class=lnt id=hl-30-42><a class=lnlinks href=#hl-30-42>42</a>
</span><span class=lnt id=hl-30-43><a class=lnlinks href=#hl-30-43>43</a>
</span><span class=lnt id=hl-30-44><a class=lnlinks href=#hl-30-44>44</a>
</span><span class=lnt id=hl-30-45><a class=lnlinks href=#hl-30-45>45</a>
</span><span class=lnt id=hl-30-46><a class=lnlinks href=#hl-30-46>46</a>
</span><span class=lnt id=hl-30-47><a class=lnlinks href=#hl-30-47>47</a>
</span><span class=lnt id=hl-30-48><a class=lnlinks href=#hl-30-48>48</a>
</span><span class=lnt id=hl-30-49><a class=lnlinks href=#hl-30-49>49</a>
</span><span class=lnt id=hl-30-50><a class=lnlinks href=#hl-30-50>50</a>
</span><span class=lnt id=hl-30-51><a class=lnlinks href=#hl-30-51>51</a>
</span><span class=lnt id=hl-30-52><a class=lnlinks href=#hl-30-52>52</a>
</span><span class=lnt id=hl-30-53><a class=lnlinks href=#hl-30-53>53</a>
</span><span class=lnt id=hl-30-54><a class=lnlinks href=#hl-30-54>54</a>
</span><span class=lnt id=hl-30-55><a class=lnlinks href=#hl-30-55>55</a>
</span><span class=lnt id=hl-30-56><a class=lnlinks href=#hl-30-56>56</a>
</span><span class=lnt id=hl-30-57><a class=lnlinks href=#hl-30-57>57</a>
</span><span class=lnt id=hl-30-58><a class=lnlinks href=#hl-30-58>58</a>
</span><span class=lnt id=hl-30-59><a class=lnlinks href=#hl-30-59>59</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>unittest</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>unittest.mock</span> <span class=kn>import</span> <span class=n>Mock</span><span class=p>,</span> <span class=n>MagicMock</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TestPaymentAdapter</span><span class=p>(</span><span class=n>unittest</span><span class=o>.</span><span class=n>TestCase</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;결제 어댑터 단위 테스트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>setUp</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>mock_gateway</span> <span class=o>=</span> <span class=n>Mock</span><span class=p>(</span><span class=n>spec</span><span class=o>=</span><span class=n>CardPaymentGateway</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>adapter</span> <span class=o>=</span> <span class=n>CardPaymentAdapter</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>mock_gateway</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_successful_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;성공적인 결제 테스트
</span></span></span><span class=line><span class=cl><span class=s2>           성공 케이스를 Mock 응답으로 설정하고, 어댑터가 `SUCCESS` 상태를 반환하는지 검증&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># Given</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>mock_gateway</span><span class=o>.</span><span class=n>charge_card</span><span class=o>.</span><span class=n>return_value</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;result_code&#34;</span><span class=p>:</span> <span class=s2>&#34;SUCCESS&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;tx_ref&#34;</span><span class=p>:</span> <span class=s2>&#34;TX_12345&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;approval_number&#34;</span><span class=p>:</span> <span class=s2>&#34;APP_67890&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># When</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>adapter</span><span class=o>.</span><span class=n>process_payment</span><span class=p>(</span><span class=mf>100.0</span><span class=p>,</span> <span class=s2>&#34;USD&#34;</span><span class=p>,</span> <span class=s2>&#34;card&#34;</span><span class=p>,</span> <span class=s2>&#34;user_001&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Then</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>status</span><span class=p>,</span> <span class=n>PaymentStatus</span><span class=o>.</span><span class=n>SUCCESS</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>transaction_id</span><span class=p>,</span> <span class=s2>&#34;TX_12345&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>mock_gateway</span><span class=o>.</span><span class=n>charge_card</span><span class=o>.</span><span class=n>assert_called_once</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_failed_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;실패한 결제 테스트
</span></span></span><span class=line><span class=cl><span class=s2>           결제 실패 응답 시 어댑터가 적절한 실패 상태 및 메시지를 반환하는지 검증
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># Given</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>mock_gateway</span><span class=o>.</span><span class=n>charge_card</span><span class=o>.</span><span class=n>return_value</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;result_code&#34;</span><span class=p>:</span> <span class=s2>&#34;FAIL&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;error_message&#34;</span><span class=p>:</span> <span class=s2>&#34;Insufficient funds&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;tx_ref&#34;</span><span class=p>:</span> <span class=s2>&#34;TX_12346&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># When</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>adapter</span><span class=o>.</span><span class=n>process_payment</span><span class=p>(</span><span class=mf>100.0</span><span class=p>,</span> <span class=s2>&#34;USD&#34;</span><span class=p>,</span> <span class=s2>&#34;card&#34;</span><span class=p>,</span> <span class=s2>&#34;user_001&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Then</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>status</span><span class=p>,</span> <span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertIn</span><span class=p>(</span><span class=s2>&#34;Insufficient funds&#34;</span><span class=p>,</span> <span class=n>result</span><span class=o>.</span><span class=n>message</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_exception_handling</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;예외 처리 테스트
</span></span></span><span class=line><span class=cl><span class=s2>           예외 발생 시 어댑터가 **Fail-safe** 방식으로 예외를 처리하고, 실패 상태로 응답하는지 확인
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># Given</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>mock_gateway</span><span class=o>.</span><span class=n>charge_card</span><span class=o>.</span><span class=n>side_effect</span> <span class=o>=</span> <span class=ne>Exception</span><span class=p>(</span><span class=s2>&#34;Network error&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># When</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>adapter</span><span class=o>.</span><span class=n>process_payment</span><span class=p>(</span><span class=mf>100.0</span><span class=p>,</span> <span class=s2>&#34;USD&#34;</span><span class=p>,</span> <span class=s2>&#34;card&#34;</span><span class=p>,</span> <span class=s2>&#34;user_001&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Then</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>status</span><span class=p>,</span> <span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertIn</span><span class=p>(</span><span class=s2>&#34;Network error&#34;</span><span class=p>,</span> <span class=n>result</span><span class=o>.</span><span class=n>message</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>통합 테스트 전략</p><ul><li><strong>목표</strong>: 어댑터와 실제 <strong>비즈니스 로직</strong>, <strong>백엔드 시스템</strong> 간의 <strong>전체 연동 흐름</strong>을 검증</li><li><strong>대상</strong>: <code>PaymentService</code> 전체 흐름 (<code>process</code>, <code>verify</code>, <code>cancel</code>) 이 <strong>일관성 있게 동작하는지</strong> 확인</li><li><strong>접근법</strong>: 어댑터가 연결된 실제 서비스 또는 Stub 을 통해 <strong>종단 간 흐름을 검증</strong></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-31-1><a class=lnlinks href=#hl-31-1> 1</a>
</span><span class=lnt id=hl-31-2><a class=lnlinks href=#hl-31-2> 2</a>
</span><span class=lnt id=hl-31-3><a class=lnlinks href=#hl-31-3> 3</a>
</span><span class=lnt id=hl-31-4><a class=lnlinks href=#hl-31-4> 4</a>
</span><span class=lnt id=hl-31-5><a class=lnlinks href=#hl-31-5> 5</a>
</span><span class=lnt id=hl-31-6><a class=lnlinks href=#hl-31-6> 6</a>
</span><span class=lnt id=hl-31-7><a class=lnlinks href=#hl-31-7> 7</a>
</span><span class=lnt id=hl-31-8><a class=lnlinks href=#hl-31-8> 8</a>
</span><span class=lnt id=hl-31-9><a class=lnlinks href=#hl-31-9> 9</a>
</span><span class=lnt id=hl-31-10><a class=lnlinks href=#hl-31-10>10</a>
</span><span class=lnt id=hl-31-11><a class=lnlinks href=#hl-31-11>11</a>
</span><span class=lnt id=hl-31-12><a class=lnlinks href=#hl-31-12>12</a>
</span><span class=lnt id=hl-31-13><a class=lnlinks href=#hl-31-13>13</a>
</span><span class=lnt id=hl-31-14><a class=lnlinks href=#hl-31-14>14</a>
</span><span class=lnt id=hl-31-15><a class=lnlinks href=#hl-31-15>15</a>
</span><span class=lnt id=hl-31-16><a class=lnlinks href=#hl-31-16>16</a>
</span><span class=lnt id=hl-31-17><a class=lnlinks href=#hl-31-17>17</a>
</span><span class=lnt id=hl-31-18><a class=lnlinks href=#hl-31-18>18</a>
</span><span class=lnt id=hl-31-19><a class=lnlinks href=#hl-31-19>19</a>
</span><span class=lnt id=hl-31-20><a class=lnlinks href=#hl-31-20>20</a>
</span><span class=lnt id=hl-31-21><a class=lnlinks href=#hl-31-21>21</a>
</span><span class=lnt id=hl-31-22><a class=lnlinks href=#hl-31-22>22</a>
</span><span class=lnt id=hl-31-23><a class=lnlinks href=#hl-31-23>23</a>
</span><span class=lnt id=hl-31-24><a class=lnlinks href=#hl-31-24>24</a>
</span><span class=lnt id=hl-31-25><a class=lnlinks href=#hl-31-25>25</a>
</span><span class=lnt id=hl-31-26><a class=lnlinks href=#hl-31-26>26</a>
</span><span class=lnt id=hl-31-27><a class=lnlinks href=#hl-31-27>27</a>
</span><span class=lnt id=hl-31-28><a class=lnlinks href=#hl-31-28>28</a>
</span><span class=lnt id=hl-31-29><a class=lnlinks href=#hl-31-29>29</a>
</span><span class=lnt id=hl-31-30><a class=lnlinks href=#hl-31-30>30</a>
</span><span class=lnt id=hl-31-31><a class=lnlinks href=#hl-31-31>31</a>
</span><span class=lnt id=hl-31-32><a class=lnlinks href=#hl-31-32>32</a>
</span><span class=lnt id=hl-31-33><a class=lnlinks href=#hl-31-33>33</a>
</span><span class=lnt id=hl-31-34><a class=lnlinks href=#hl-31-34>34</a>
</span><span class=lnt id=hl-31-35><a class=lnlinks href=#hl-31-35>35</a>
</span><span class=lnt id=hl-31-36><a class=lnlinks href=#hl-31-36>36</a>
</span><span class=lnt id=hl-31-37><a class=lnlinks href=#hl-31-37>37</a>
</span><span class=lnt id=hl-31-38><a class=lnlinks href=#hl-31-38>38</a>
</span><span class=lnt id=hl-31-39><a class=lnlinks href=#hl-31-39>39</a>
</span><span class=lnt id=hl-31-40><a class=lnlinks href=#hl-31-40>40</a>
</span><span class=lnt id=hl-31-41><a class=lnlinks href=#hl-31-41>41</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>TestPaymentIntegration</span><span class=p>(</span><span class=n>unittest</span><span class=o>.</span><span class=n>TestCase</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;결제 시스템 통합 테스트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>setUp</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>payment_service</span> <span class=o>=</span> <span class=n>PaymentService</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_end_to_end_payment_flow</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;전체 결제 플로우 테스트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># Given</span>
</span></span><span class=line><span class=cl>        <span class=n>payment_method</span> <span class=o>=</span> <span class=s2>&#34;card&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>amount</span> <span class=o>=</span> <span class=mf>100.0</span>
</span></span><span class=line><span class=cl>        <span class=n>currency</span> <span class=o>=</span> <span class=s2>&#34;USD&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>user_id</span> <span class=o>=</span> <span class=s2>&#34;test_user&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># When - 결제 처리</span>
</span></span><span class=line><span class=cl>        <span class=c1># `process_payment()` 호출 → 어댑터 호출 및 결제 요청 전달</span>
</span></span><span class=line><span class=cl>        <span class=n>payment_result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>payment_service</span><span class=o>.</span><span class=n>process_payment</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>payment_method</span><span class=p>,</span> <span class=n>amount</span><span class=p>,</span> <span class=n>currency</span><span class=p>,</span> <span class=n>user_id</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Then - 결제 성공 확인</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>payment_result</span><span class=o>.</span><span class=n>status</span><span class=p>,</span> <span class=n>PaymentStatus</span><span class=o>.</span><span class=n>SUCCESS</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>transaction_id</span> <span class=o>=</span> <span class=n>payment_result</span><span class=o>.</span><span class=n>transaction_id</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># When - 결제 검증</span>
</span></span><span class=line><span class=cl>        <span class=c1># `verify_payment()` 호출 → 트랜잭션 ID 기반 상태 확인</span>
</span></span><span class=line><span class=cl>        <span class=n>verify_result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>payment_service</span><span class=o>.</span><span class=n>verify_payment</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>payment_method</span><span class=p>,</span> <span class=n>transaction_id</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Then - 검증 성공 확인</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>verify_result</span><span class=o>.</span><span class=n>status</span><span class=p>,</span> <span class=n>PaymentStatus</span><span class=o>.</span><span class=n>SUCCESS</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># When - 결제 취소</span>
</span></span><span class=line><span class=cl>        <span class=c1># `cancel_payment()` 호출 → 결제 취소 로직 검증</span>
</span></span><span class=line><span class=cl>        <span class=n>cancel_result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>payment_service</span><span class=o>.</span><span class=n>cancel_payment</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>payment_method</span><span class=p>,</span> <span class=n>transaction_id</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Then - 취소 성공 확인</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertEqual</span><span class=p>(</span><span class=n>cancel_result</span><span class=o>.</span><span class=n>status</span><span class=p>,</span> <span class=n>PaymentStatus</span><span class=o>.</span><span class=n>CANCELLED</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>성능 테스트 전략</p><ul><li><strong>목표</strong>: 다수의 동시 요청에 대해 어댑터 및 결제 서비스가 <strong>지속적으로 안정적인 성능을 제공</strong>하는지 검증</li><li><strong>대상</strong>: <code>PaymentService</code> 의 <strong>응답 시간</strong>, <strong>성공률</strong>, <strong>동시성 처리 능력</strong></li><li><strong>접근법</strong>: <code>ThreadPoolExecutor</code> 로 <strong>병렬 요청을 시뮬레이션</strong>하여 부하 상황을 재현</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-32-1><a class=lnlinks href=#hl-32-1> 1</a>
</span><span class=lnt id=hl-32-2><a class=lnlinks href=#hl-32-2> 2</a>
</span><span class=lnt id=hl-32-3><a class=lnlinks href=#hl-32-3> 3</a>
</span><span class=lnt id=hl-32-4><a class=lnlinks href=#hl-32-4> 4</a>
</span><span class=lnt id=hl-32-5><a class=lnlinks href=#hl-32-5> 5</a>
</span><span class=lnt id=hl-32-6><a class=lnlinks href=#hl-32-6> 6</a>
</span><span class=lnt id=hl-32-7><a class=lnlinks href=#hl-32-7> 7</a>
</span><span class=lnt id=hl-32-8><a class=lnlinks href=#hl-32-8> 8</a>
</span><span class=lnt id=hl-32-9><a class=lnlinks href=#hl-32-9> 9</a>
</span><span class=lnt id=hl-32-10><a class=lnlinks href=#hl-32-10>10</a>
</span><span class=lnt id=hl-32-11><a class=lnlinks href=#hl-32-11>11</a>
</span><span class=lnt id=hl-32-12><a class=lnlinks href=#hl-32-12>12</a>
</span><span class=lnt id=hl-32-13><a class=lnlinks href=#hl-32-13>13</a>
</span><span class=lnt id=hl-32-14><a class=lnlinks href=#hl-32-14>14</a>
</span><span class=lnt id=hl-32-15><a class=lnlinks href=#hl-32-15>15</a>
</span><span class=lnt id=hl-32-16><a class=lnlinks href=#hl-32-16>16</a>
</span><span class=lnt id=hl-32-17><a class=lnlinks href=#hl-32-17>17</a>
</span><span class=lnt id=hl-32-18><a class=lnlinks href=#hl-32-18>18</a>
</span><span class=lnt id=hl-32-19><a class=lnlinks href=#hl-32-19>19</a>
</span><span class=lnt id=hl-32-20><a class=lnlinks href=#hl-32-20>20</a>
</span><span class=lnt id=hl-32-21><a class=lnlinks href=#hl-32-21>21</a>
</span><span class=lnt id=hl-32-22><a class=lnlinks href=#hl-32-22>22</a>
</span><span class=lnt id=hl-32-23><a class=lnlinks href=#hl-32-23>23</a>
</span><span class=lnt id=hl-32-24><a class=lnlinks href=#hl-32-24>24</a>
</span><span class=lnt id=hl-32-25><a class=lnlinks href=#hl-32-25>25</a>
</span><span class=lnt id=hl-32-26><a class=lnlinks href=#hl-32-26>26</a>
</span><span class=lnt id=hl-32-27><a class=lnlinks href=#hl-32-27>27</a>
</span><span class=lnt id=hl-32-28><a class=lnlinks href=#hl-32-28>28</a>
</span><span class=lnt id=hl-32-29><a class=lnlinks href=#hl-32-29>29</a>
</span><span class=lnt id=hl-32-30><a class=lnlinks href=#hl-32-30>30</a>
</span><span class=lnt id=hl-32-31><a class=lnlinks href=#hl-32-31>31</a>
</span><span class=lnt id=hl-32-32><a class=lnlinks href=#hl-32-32>32</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>concurrent.futures</span> <span class=kn>import</span> <span class=n>ThreadPoolExecutor</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TestPaymentPerformance</span><span class=p>(</span><span class=n>unittest</span><span class=o>.</span><span class=n>TestCase</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;결제 시스템 성능 테스트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_concurrent_payments</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;동시 결제 처리 성능 테스트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>payment_service</span> <span class=o>=</span> <span class=n>PaymentService</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=c1># 동시에 전송할 요청 수 (100건 등)</span>
</span></span><span class=line><span class=cl>        <span class=n>concurrent_requests</span> <span class=o>=</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>	    <span class=c1># max_workers: 실제 동시 스레드 수 (10개 스레드로 분산 실행)</span>
</span></span><span class=line><span class=cl>        <span class=k>def</span> <span class=nf>process_payment</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>payment_service</span><span class=o>.</span><span class=n>process_payment</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;card&#34;</span><span class=p>,</span> <span class=mf>10.0</span><span class=p>,</span> <span class=s2>&#34;USD&#34;</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&#34;user_</span><span class=si>{</span><span class=n>threading</span><span class=o>.</span><span class=n>current_thread</span><span class=p>()</span><span class=o>.</span><span class=n>ident</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=n>ThreadPoolExecutor</span><span class=p>(</span><span class=n>max_workers</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span> <span class=k>as</span> <span class=n>executor</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>futures</span> <span class=o>=</span> <span class=p>[</span><span class=n>executor</span><span class=o>.</span><span class=n>submit</span><span class=p>(</span><span class=n>process_payment</span><span class=p>)</span> <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>concurrent_requests</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>            <span class=n>results</span> <span class=o>=</span> <span class=p>[</span><span class=n>future</span><span class=o>.</span><span class=n>result</span><span class=p>()</span> <span class=k>for</span> <span class=n>future</span> <span class=ow>in</span> <span class=n>futures</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>end_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>processing_time</span> <span class=o>=</span> <span class=n>end_time</span> <span class=o>-</span> <span class=n>start_time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># 성능 검증</span>
</span></span><span class=line><span class=cl>        <span class=c1># 전체 요청을 5초 이내에 처리할 수 있는지 측정 → 성능 기준치 설정</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertLess</span><span class=p>(</span><span class=n>processing_time</span><span class=p>,</span> <span class=mf>5.0</span><span class=p>)</span>  <span class=c1># 5초 이내 처리</span>
</span></span><span class=line><span class=cl>        <span class=n>success_count</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=mi>1</span> <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>results</span> <span class=k>if</span> <span class=n>r</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=n>PaymentStatus</span><span class=o>.</span><span class=n>SUCCESS</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>assertGreaterEqual</span><span class=p>(</span><span class=n>success_count</span> <span class=o>/</span> <span class=n>concurrent_requests</span><span class=p>,</span> <span class=mf>0.95</span><span class=p>)</span>  <span class=c1># 95% 이상 성공률</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><h4 id=리팩토링-전략>리팩토링 전략<a hidden class=anchor aria-hidden=true href=#리팩토링-전략>#</a></h4><ol><li><p>레거시 코드 점진적 리팩토링</p><ul><li><strong>목표</strong>: 전체 시스템을 한 번에 바꾸는 것이 어려울 때, <strong>기존 시스템 (Legacy)</strong> 과 <strong>새 시스템 (Modern)</strong> 을 공존시키며 점진적으로 전환</li><li><strong>전략</strong>: 요청 트래픽을 일정 비율로 <strong>모던 시스템에 분산 라우팅</strong>하여 리스크를 줄이는 방식 (Strangler Fig 패턴 기반)</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-33-1><a class=lnlinks href=#hl-33-1> 1</a>
</span><span class=lnt id=hl-33-2><a class=lnlinks href=#hl-33-2> 2</a>
</span><span class=lnt id=hl-33-3><a class=lnlinks href=#hl-33-3> 3</a>
</span><span class=lnt id=hl-33-4><a class=lnlinks href=#hl-33-4> 4</a>
</span><span class=lnt id=hl-33-5><a class=lnlinks href=#hl-33-5> 5</a>
</span><span class=lnt id=hl-33-6><a class=lnlinks href=#hl-33-6> 6</a>
</span><span class=lnt id=hl-33-7><a class=lnlinks href=#hl-33-7> 7</a>
</span><span class=lnt id=hl-33-8><a class=lnlinks href=#hl-33-8> 8</a>
</span><span class=lnt id=hl-33-9><a class=lnlinks href=#hl-33-9> 9</a>
</span><span class=lnt id=hl-33-10><a class=lnlinks href=#hl-33-10>10</a>
</span><span class=lnt id=hl-33-11><a class=lnlinks href=#hl-33-11>11</a>
</span><span class=lnt id=hl-33-12><a class=lnlinks href=#hl-33-12>12</a>
</span><span class=lnt id=hl-33-13><a class=lnlinks href=#hl-33-13>13</a>
</span><span class=lnt id=hl-33-14><a class=lnlinks href=#hl-33-14>14</a>
</span><span class=lnt id=hl-33-15><a class=lnlinks href=#hl-33-15>15</a>
</span><span class=lnt id=hl-33-16><a class=lnlinks href=#hl-33-16>16</a>
</span><span class=lnt id=hl-33-17><a class=lnlinks href=#hl-33-17>17</a>
</span><span class=lnt id=hl-33-18><a class=lnlinks href=#hl-33-18>18</a>
</span><span class=lnt id=hl-33-19><a class=lnlinks href=#hl-33-19>19</a>
</span><span class=lnt id=hl-33-20><a class=lnlinks href=#hl-33-20>20</a>
</span><span class=lnt id=hl-33-21><a class=lnlinks href=#hl-33-21>21</a>
</span><span class=lnt id=hl-33-22><a class=lnlinks href=#hl-33-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>LegacyRefactoringStrategy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;레거시 시스템 점진적 리팩토링 전략&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>legacy_system</span><span class=p>,</span> <span class=n>modern_interface</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>legacy_system</span> <span class=o>=</span> <span class=n>legacy_system</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>modern_interface</span> <span class=o>=</span> <span class=n>modern_interface</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>migration_percentage</span> <span class=o>=</span> <span class=mf>0.0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>migrate_traffic</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>percentage</span><span class=p>:</span> <span class=nb>float</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;트래픽 점진적 마이그레이션&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>migration_percentage</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=n>percentage</span><span class=p>,</span> <span class=mf>100.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_request</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;요청을 레거시/모던 시스템으로 라우팅&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=kn>import</span> <span class=nn>random</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>()</span> <span class=o>*</span> <span class=mi>100</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>migration_percentage</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 모던 시스템으로 라우팅</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>modern_interface</span><span class=o>.</span><span class=n>process</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 레거시 시스템으로 라우팅</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>legacy_system</span><span class=o>.</span><span class=n>process</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>어댑터 성능 최적화</p><ul><li><strong>목표</strong>: 어댑터 계층에서 발생하는 불필요한 반복 호출과 리소스 사용을 줄여 <strong>성능을 최적화</strong></li><li><strong>전략</strong>:<ul><li>결과를 <strong>LRU 캐시</strong>에 저장해 반복 호출을 회피</li><li>외부 시스템 호출 시 <strong>커넥션 풀</strong>을 활용해 연결 비용 절감</li></ul></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-34-1><a class=lnlinks href=#hl-34-1> 1</a>
</span><span class=lnt id=hl-34-2><a class=lnlinks href=#hl-34-2> 2</a>
</span><span class=lnt id=hl-34-3><a class=lnlinks href=#hl-34-3> 3</a>
</span><span class=lnt id=hl-34-4><a class=lnlinks href=#hl-34-4> 4</a>
</span><span class=lnt id=hl-34-5><a class=lnlinks href=#hl-34-5> 5</a>
</span><span class=lnt id=hl-34-6><a class=lnlinks href=#hl-34-6> 6</a>
</span><span class=lnt id=hl-34-7><a class=lnlinks href=#hl-34-7> 7</a>
</span><span class=lnt id=hl-34-8><a class=lnlinks href=#hl-34-8> 8</a>
</span><span class=lnt id=hl-34-9><a class=lnlinks href=#hl-34-9> 9</a>
</span><span class=lnt id=hl-34-10><a class=lnlinks href=#hl-34-10>10</a>
</span><span class=lnt id=hl-34-11><a class=lnlinks href=#hl-34-11>11</a>
</span><span class=lnt id=hl-34-12><a class=lnlinks href=#hl-34-12>12</a>
</span><span class=lnt id=hl-34-13><a class=lnlinks href=#hl-34-13>13</a>
</span><span class=lnt id=hl-34-14><a class=lnlinks href=#hl-34-14>14</a>
</span><span class=lnt id=hl-34-15><a class=lnlinks href=#hl-34-15>15</a>
</span><span class=lnt id=hl-34-16><a class=lnlinks href=#hl-34-16>16</a>
</span><span class=lnt id=hl-34-17><a class=lnlinks href=#hl-34-17>17</a>
</span><span class=lnt id=hl-34-18><a class=lnlinks href=#hl-34-18>18</a>
</span><span class=lnt id=hl-34-19><a class=lnlinks href=#hl-34-19>19</a>
</span><span class=lnt id=hl-34-20><a class=lnlinks href=#hl-34-20>20</a>
</span><span class=lnt id=hl-34-21><a class=lnlinks href=#hl-34-21>21</a>
</span><span class=lnt id=hl-34-22><a class=lnlinks href=#hl-34-22>22</a>
</span><span class=lnt id=hl-34-23><a class=lnlinks href=#hl-34-23>23</a>
</span><span class=lnt id=hl-34-24><a class=lnlinks href=#hl-34-24>24</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>OptimizedAdapter</span><span class=p>(</span><span class=n>PaymentProcessor</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;성능 최적화된 어댑터&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>adaptee</span><span class=p>,</span> <span class=n>cache_size</span><span class=o>=</span><span class=mi>1000</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>adaptee</span> <span class=o>=</span> <span class=n>adaptee</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>result_cache</span> <span class=o>=</span> <span class=n>LRUCache</span><span class=p>(</span><span class=n>cache_size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>connection_pool</span> <span class=o>=</span> <span class=n>ConnectionPool</span><span class=p>(</span><span class=n>max_connections</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>,</span> <span class=n>currency</span><span class=p>,</span> <span class=n>payment_method</span><span class=p>,</span> <span class=n>user_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 캐시 키 생성</span>
</span></span><span class=line><span class=cl>        <span class=n>cache_key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>amount</span><span class=si>}</span><span class=s2>_</span><span class=si>{</span><span class=n>currency</span><span class=si>}</span><span class=s2>_</span><span class=si>{</span><span class=n>payment_method</span><span class=si>}</span><span class=s2>_</span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># 캐시 확인</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>cache_key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>result_cache</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>result_cache</span><span class=p>[</span><span class=n>cache_key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># 연결 풀에서 연결 가져오기</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>connection_pool</span><span class=o>.</span><span class=n>get_connection</span><span class=p>()</span> <span class=k>as</span> <span class=n>conn</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 실제 처리</span>
</span></span><span class=line><span class=cl>            <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_process_with_connection</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=n>amount</span><span class=p>,</span> <span class=n>currency</span><span class=p>,</span> <span class=n>payment_method</span><span class=p>,</span> <span class=n>user_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># 결과 캐싱</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>result_cache</span><span class=p>[</span><span class=n>cache_key</span><span class=p>]</span> <span class=o>=</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>result</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><h4 id=활용-시-흔한-실수>활용 시 흔한 실수<a hidden class=anchor aria-hidden=true href=#활용-시-흔한-실수>#</a></h4><ol><li><p>인터페이스 설계 실수<br><strong>잘못된 예:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-35-1><a class=lnlinks href=#hl-35-1>1</a>
</span><span class=lnt id=hl-35-2><a class=lnlinks href=#hl-35-2>2</a>
</span><span class=lnt id=hl-35-3><a class=lnlinks href=#hl-35-3>3</a>
</span><span class=lnt id=hl-35-4><a class=lnlinks href=#hl-35-4>4</a>
</span><span class=lnt id=hl-35-5><a class=lnlinks href=#hl-35-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 너무 세부적인 인터페이스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PaymentProcessor</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_visa_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_mastercard_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_amex_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>):</span> <span class=k>pass</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>올바른 예:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-36-1><a class=lnlinks href=#hl-36-1>1</a>
</span><span class=lnt id=hl-36-2><a class=lnlinks href=#hl-36-2>2</a>
</span><span class=lnt id=hl-36-3><a class=lnlinks href=#hl-36-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 일반화된 인터페이스</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PaymentProcessor</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>,</span> <span class=n>payment_method</span><span class=p>):</span> <span class=k>pass</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>과도한 어댑터 사용<br><strong>문제점:</strong> 단순한 매핑도 어댑터로 처리<br><strong>해결책:</strong> 설정 기반 매핑이나 간단한 변환 함수 사용</p></li><li><p>예외 처리 누락<br><strong>잘못된 예:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-37-1><a class=lnlinks href=#hl-37-1>1</a>
</span><span class=lnt id=hl-37-2><a class=lnlinks href=#hl-37-2>2</a>
</span><span class=lnt id=hl-37-3><a class=lnlinks href=#hl-37-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>process_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>,</span> <span class=n>currency</span><span class=p>,</span> <span class=n>payment_method</span><span class=p>,</span> <span class=n>user_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>adaptee</span><span class=o>.</span><span class=n>charge</span><span class=p>(</span><span class=n>amount</span> <span class=o>*</span> <span class=mi>100</span><span class=p>)</span>  <span class=c1># 예외 처리 없음</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>SUCCESS</span><span class=p>,</span> <span class=n>result</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>올바른 예:</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-38-1><a class=lnlinks href=#hl-38-1>1</a>
</span><span class=lnt id=hl-38-2><a class=lnlinks href=#hl-38-2>2</a>
</span><span class=lnt id=hl-38-3><a class=lnlinks href=#hl-38-3>3</a>
</span><span class=lnt id=hl-38-4><a class=lnlinks href=#hl-38-4>4</a>
</span><span class=lnt id=hl-38-5><a class=lnlinks href=#hl-38-5>5</a>
</span><span class=lnt id=hl-38-6><a class=lnlinks href=#hl-38-6>6</a>
</span><span class=lnt id=hl-38-7><a class=lnlinks href=#hl-38-7>7</a>
</span><span class=lnt id=hl-38-8><a class=lnlinks href=#hl-38-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>process_payment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>,</span> <span class=n>currency</span><span class=p>,</span> <span class=n>payment_method</span><span class=p>,</span> <span class=n>user_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>adaptee</span><span class=o>.</span><span class=n>charge</span><span class=p>(</span><span class=n>amount</span> <span class=o>*</span> <span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>SUCCESS</span><span class=p>,</span> <span class=n>result</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=n>AdapteeException</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>,</span> <span class=s2>&#34;&#34;</span><span class=p>,</span> <span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>PaymentResult</span><span class=p>(</span><span class=n>PaymentStatus</span><span class=o>.</span><span class=n>FAILED</span><span class=p>,</span> <span class=s2>&#34;&#34;</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&#34;Unexpected error: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><h3 id=성능-최적화를-위한-고려사항>성능 최적화를 위한 고려사항<a hidden class=anchor aria-hidden=true href=#성능-최적화를-위한-고려사항>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th><th><strong>권장사항</strong></th></tr></thead><tbody><tr><td><strong>설계 최적화</strong></td><td>위임 구조 최소화</td><td>Adapter 내부의 단순 위임 계층이 과도하면 성능 오버헤드 발생</td><td>단순 위임은 제거하거나 통합 고려, Adapter 내 관심사 분리</td></tr><tr><td></td><td>인터페이스 기반 설계</td><td>다양한 시스템 간 유연한 연결 및 테스트 가능성 확보</td><td>인터페이스 중심 설계 및 DI 적용</td></tr><tr><td></td><td>Lazy 초기화</td><td>무거운 Adaptee 객체는 초기 호출 시점까지 생성 지연</td><td>Provider, Lazy 주입 또는 Proxy 지연 초기화 활용</td></tr><tr><td></td><td>불필요 계층 제거</td><td>단순한 통합에도 불필요한 Adapter 계층 도입 시 오히려 복잡성 증가</td><td>사전 분석을 통해 직접 통합 또는 경량화 설계</td></tr><tr><td><strong>리소스 관리</strong></td><td>객체 생성 비용</td><td>Adapter 또는 Adaptee 객체 생성이 잦을 경우 리소스 낭비</td><td>싱글톤, 객체 풀, 플라이웨이트 패턴 활용</td></tr><tr><td></td><td>메모리 관리</td><td>어댑터가 Adaptee 를 장기 참조하거나 캐싱 시 누수 발생 가능</td><td><code>WeakReference</code>, 주기적 정리, 수명 주기 관리 적용</td></tr><tr><td></td><td>캐싱 전략</td><td>변환 결과나 외부 호출 결과의 반복 호출 시 성능 저하</td><td>불변 객체 기반 캐싱, Guava Cache, Spring Cache 등 적용</td></tr><tr><td><strong>실행 최적화</strong></td><td>배치 처리</td><td>대량 데이터를 1 건씩 처리하면 성능 저하 발생</td><td>Stream API, 일괄 처리 전략 (Batch Adapter) 적용</td></tr><tr><td></td><td>비동기 처리</td><td>네트워크 호출, 외부 API 연동 등에서 블로킹 발생 가능</td><td><code>CompletableFuture</code>, <code>async/await</code>, Reactive Adapter 도입</td></tr><tr><td></td><td>네트워크 호출 최소화</td><td>Adaptee 가 외부 시스템일 경우 불필요한 호출로 인한 지연 시간 증가</td><td>호출 결과 캐싱, 연결 풀 활용, 요청 합치기 등 적용</td></tr><tr><td><strong>테스트 전략</strong></td><td>테스트 자동화</td><td>다양한 조합에서의 Adapter 기능 테스트 필요</td><td>Mock Adapter, 테스트 더블 패턴 사용</td></tr><tr><td></td><td>성능 모니터링</td><td>Adapter 계층의 성능 병목 원인 추적 필요</td><td>APM 도구 (New Relic, Datadog 등) 통한 트레이싱 및 메트릭 수집</td></tr><tr><td><strong>운영 안정성</strong></td><td>스레드 안전성</td><td>멀티스레드 환경에서 공유 객체 상태가 변경되면 동시성 문제 발생</td><td>불변 객체 설계, 락 -Free 구조, 동기화 처리 (<code>Lock</code>, <code>Thread-safe Collection</code>)</td></tr><tr><td></td><td>장애 격리</td><td>Adaptee 장애가 전체 시스템에 영향 미치는 경우</td><td>Circuit Breaker, 타임아웃 설정, 대체 로직 구성</td></tr><tr><td></td><td>데이터 일관성</td><td>멀티 호출 시 동일한 결과 일관성 보장 필요</td><td>상태 분리, 동기화 구조 적용 또는 외부 상태는 별도 전달</td></tr><tr><td><strong>확장성과 유연성</strong></td><td>수평 확장 고려</td><td>Adapter 가 병목이 되지 않도록 무상태 구조 권장</td><td>Stateless 설계, Auto Scaling 및 Load Balancing 적용</td></tr><tr><td></td><td>런타임 어댑터 관리</td><td>다양한 Adapter 를 런타임에 유연하게 관리하는 구조 필요</td><td>Adapter Registry 또는 Plugin 기반 동적 로딩 구조 활용</td></tr><tr><td></td><td>모듈화 설계</td><td>기능별 Adapter 를 분리하여 유지보수 및 재사용 용이</td><td>기능 중심으로 Adapter 분리, 각기 다른 도메인에 특화된 Adaptee 인터페이스 설계 적용</td></tr></tbody></table><h3 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>설계 원칙</strong></td><td>Adapter</td><td>호환성</td><td>서로 다른 인터페이스를 가진 클래스들이 함께 동작 가능하게 함</td></tr><tr><td></td><td></td><td>기존 코드 보존</td><td>기존 코드를 수정하지 않고 새로운 인터페이스에 적응</td></tr><tr><td></td><td>Object vs Class Adapter</td><td>구현 방식</td><td>객체 위임 기반 vs 클래스 상속 기반 (다중 상속 지원 여부에 따라 선택)</td></tr><tr><td></td><td>SRP/OCP</td><td>단일 책임, 개방/폐쇄 원칙 적용</td><td>어댑터를 통해 변경에 닫히고 확장에 열려 있는 구조 구현</td></tr><tr><td><strong>실무 활용</strong></td><td>외부 API 연동</td><td>외부 API 어댑터</td><td>외부 시스템의 응답 형식을 내부 시스템 형식으로 변환하여 통합</td></tr><tr><td></td><td>레거시 통합</td><td>레거시 어댑터</td><td>레거시 시스템의 인터페이스를 변경하지 않고 신 시스템에 통합</td></tr><tr><td></td><td>데이터베이스</td><td>Database Adapter</td><td>다중 벤더/종류의 DB 를 하나의 인터페이스로 추상화하여 통합</td></tr><tr><td></td><td>메시징 시스템</td><td>Protocol Adapter</td><td>서로 다른 메시징 프로토콜 (MQTT, Kafka 등) 을 중계</td></tr><tr><td><strong>아키텍처 연계</strong></td><td>Microservices</td><td>API Gateway</td><td>REST/gRPC 등 이질적 프로토콜 간 어댑팅</td></tr><tr><td></td><td>Kubernetes</td><td>Service Mesh</td><td>서비스 간 통신 시 TLS, gRPC, HTTP 등 프로토콜 자동 변환</td></tr><tr><td></td><td>데이터 통합</td><td>Data Mapper</td><td>다양한 데이터 소스 간 포맷/스키마 변환 어댑터</td></tr><tr><td></td><td>RESTful API</td><td>API Versioning</td><td>버전 간의 호환성을 위한 요청/응답 변환 계층</td></tr><tr><td><strong>성능 및 최적화</strong></td><td>Adapter 계층</td><td>성능 오버헤드</td><td>계층 증가로 인한 지연 발생 가능 → 주의 필요</td></tr><tr><td></td><td>캐싱/비동기 처리</td><td>최적화 어댑터</td><td>비동기 변환 처리 및 캐싱을 통한 성능 향상 (Reactive Adapter 등)</td></tr><tr><td></td><td>비동기 어댑터</td><td>Reactive Streams</td><td>CompletableFuture, RxPy 등 기반 비동기 어댑터 구현</td></tr><tr><td><strong>보안/관찰성</strong></td><td>인증 통합</td><td>Identity Adapter</td><td>OAuth, SAML, JWT 등 인증 체계 간 변환</td></tr><tr><td></td><td>모니터링 통합</td><td>Metrics Adapter</td><td>서로 다른 메트릭 수집 도구 (Prometheus, Datadog 등) 통합</td></tr><tr><td><strong>테스트 전략</strong></td><td>테스트 더블</td><td>Mock 어댑터</td><td>테스트용 대체 어댑터로 테스트 더블/Stub/Fake 구현 지원</td></tr><tr><td></td><td>DI 기반 테스트</td><td>인터페이스 기반 설계</td><td>의존성 주입을 활용한 테스트 가능성 확보</td></tr><tr><td><strong>확장성 관리</strong></td><td>Adapter Registry</td><td>런타임 동적 어댑터 로딩</td><td>플러그인 시스템 등에서 런타임에 어댑터 자동 로딩 및 관리</td></tr><tr><td><strong>프로그래밍 패턴</strong></td><td>함수형 어댑터</td><td>고차 함수 기반</td><td>함수 커링 및 조합으로 인터페이스 어댑팅 구현</td></tr><tr><td></td><td>제네릭 어댑터</td><td>타입 안전성</td><td>TypeScript, Kotlin 등의 제네릭 기반으로 타입 안정성과 재사용성 확보</td></tr><tr><td><strong>패턴 비교/연계</strong></td><td>래퍼 패턴 (Wrapper)</td><td>대표 구현 형태</td><td>Adapter 는 Wrapper 의 대표적 활용 사례</td></tr><tr><td></td><td>데코레이터/프록시 패턴</td><td>구조적 유사성</td><td>Adapter 는 목적이 인터페이스 호환, Decorator/Proxy 는 기능 확장/통제</td></tr></tbody></table><h3 id=추가-학습-필요-내용>추가 학습 필요 내용<a hidden class=anchor aria-hidden=true href=#추가-학습-필요-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>주제</strong></th><th><strong>항목/키워드</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>디자인 패턴</strong></td><td>어댑터 패턴 (Adapter Pattern)</td><td>핵심 구조 / 역할</td><td>Target, Adapter, Adaptee 간 인터페이스 변환 구조</td></tr><tr><td></td><td>관련 패턴 비교</td><td>Bridge / Decorator / Proxy / Facade</td><td>목적과 구현 방식의 차이 분석</td></tr><tr><td></td><td>고급 패턴 확장</td><td>체인 어댑터 / 전략 어댑터 / 팩토리 어댑터</td><td>전략, 생성, 연결 기능이 결합된 고급 어댑터 구성</td></tr><tr><td><strong>아키텍처 설계</strong></td><td>아키텍처 패턴 적용</td><td>헥사고날 아키텍처 / 클린 아키텍처</td><td>포트와 어댑터 구조에서의 계층 설계와 의존성 역전 구현</td></tr><tr><td></td><td>ACL (Anti-Corruption Layer)</td><td>외부 시스템 캡슐화 계층</td><td>시스템 경계를 보호하며 어댑터의 확장된 역할 수행</td></tr><tr><td></td><td>마이크로서비스 통합 구조</td><td>API Gateway / Service Mesh</td><td>엔드포인트와 내부 시스템 간의 어댑터 역할 수행</td></tr><tr><td></td><td>레거시 및 외부 시스템 통합 전략</td><td>외부 API 어댑터 / 서드파티 라이브러리</td><td>직접 수정 불가한 시스템과 연동을 위한 어댑터 활용</td></tr><tr><td><strong>프레임워크 활용</strong></td><td>어댑터 적용 예제</td><td>Spring HandlerAdapter / ViewResolver</td><td>프레임워크 내부에서의 어댑터 구현 사례 파악</td></tr><tr><td></td><td>서버리스 아키텍처 내 어댑터</td><td>AWS Lambda / Azure Functions</td><td>입력/출력 포맷 변환, 이벤트 처리기 인터페이스 조정 등</td></tr><tr><td><strong>구현 전략</strong></td><td>구현 방식</td><td>객체 어댑터 (합성) / 클래스 어댑터 (상속)</td><td>위임과 상속의 구조적 차이와 상황별 적용 전략</td></tr><tr><td></td><td>객체 생명주기 최적화</td><td>Lazy Loading / Adapter Pooling</td><td>성능을 위한 어댑터 생성 비용 절감 전략</td></tr><tr><td></td><td>동적 선택 전략</td><td>전략 어댑터</td><td>실행 환경 또는 입력 조건에 따라 어댑터 인스턴스를 런타임에 선택</td></tr><tr><td><strong>테스트 기법</strong></td><td>테스트 설계</td><td>Mock Adapter / Stub / Integration Test</td><td>의존성 격리 및 시스템 통합 검증을 위한 테스트 방식</td></tr><tr><td></td><td>테스트 전략</td><td>Mock 기반 단위 테스트</td><td>어댑터 계층의 기능 단위 테스트와 시나리오 테스트 구성</td></tr><tr><td><strong>성능 최적화</strong></td><td>실행 효율</td><td>LRU Cache / Lazy Initialization</td><td>변환 결과의 캐싱 및 지연 초기화를 통한 리소스 최적화</td></tr><tr><td></td><td>오버헤드 최소화</td><td>경량 어댑터 설계 / 불필요 호출 제거</td><td>성능 병목 제거와 효율적인 변환 처리 방식 설계</td></tr><tr><td><strong>설계 원칙 적용</strong></td><td>SOLID 원칙</td><td>SRP / OCP / ISP / DIP</td><td>객체 책임 분리, 확장성 확보, 인터페이스 분리, 추상화 의존성 적용 등</td></tr><tr><td></td><td>의존성 역전</td><td>고수준 모듈 ↔ 저수준 모듈 간 추상화 연결</td><td>클린 아키텍처의 핵심 설계 원칙 반영</td></tr><tr><td><strong>통합 및 자동화</strong></td><td>자동 생성 도구 활용</td><td>어댑터 코드 생성기 / 인터페이스 매핑 도구</td><td>반복적인 어댑터 생성/관리 자동화로 생산성 향상</td></tr><tr><td></td><td>메시지/데이터 변환 패턴 적용</td><td>Message Translator / ETL Adapter</td><td>형식이 다른 메시지 또는 데이터 스트림을 변환하는 어댑터 응용 사례</td></tr><tr><td><strong>학습 보조 개념</strong></td><td>내부 동작 이해</td><td>위임 / 인터페이스 변환 / 변환 전략</td><td>어댑터 내부 로직과 설계 원리 이해를 위한 기반 지식</td></tr><tr><td></td><td>Wrapper 개념</td><td>기존 객체 감싸기 구조 패턴</td><td>인터페이스 재정의 또는 확장 구조로서의 어댑터 이해</td></tr><tr><td></td><td>Thread Safety / Immutable 객체</td><td>동시성 고려 설계</td><td>멀티스레드 환경에서 어댑터 객체의 안정성 확보 전략</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th><strong>카테고리</strong></th><th><strong>용어</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>패턴 구성 요소</strong></td><td>Target</td><td>클라이언트가 기대하는 표준 인터페이스</td></tr><tr><td></td><td>Adaptee</td><td>기존 시스템/서드파티 라이브러리 등, 호환되지 않는 인터페이스를 가진 클래스</td></tr><tr><td></td><td>Adapter</td><td>Target 인터페이스를 구현하고, 내부적으로 Adaptee 를 호출하여 인터페이스를 변환하는 중개 클래스</td></tr><tr><td></td><td>Client</td><td>비즈니스 로직을 실행하며 Target 인터페이스를 통해 Adapter 를 사용하는 객체</td></tr><tr><td></td><td>Wrapper (래퍼)</td><td>어댑터 패턴의 또 다른 이름으로, 기존 객체를 감싸 인터페이스를 변환</td></tr><tr><td></td><td>Anti-Corruption Layer</td><td>외부 시스템과의 의존성을 줄이기 위해 경계 역할을 수행하는 어댑터 계층</td></tr><tr><td><strong>구현 방식</strong></td><td>Object Adapter</td><td>합성 (composition) 을 사용하여 Adaptee 인스턴스를 포함하는 방식</td></tr><tr><td></td><td>Class Adapter</td><td>다중 상속을 통해 Target 과 Adaptee 를 모두 상속받아 구현하는 방식</td></tr><tr><td></td><td>Two-way Adapter</td><td>양방향 변환이 가능한 어댑터로, Adaptee 와 Target 역할을 모두 수행</td></tr><tr><td><strong>설계 원칙</strong></td><td>Single Responsibility Principle (SRP)</td><td>클래스는 하나의 책임만 가져야 한다는 객체지향 설계 원칙</td></tr><tr><td></td><td>Open-Closed Principle (OCP)</td><td>확장에는 열려 있고, 변경에는 닫혀 있어야 한다는 원칙</td></tr><tr><td></td><td>Interface Segregation Principle (ISP)</td><td>클라이언트가 사용하지 않는 인터페이스에 의존하지 않도록 분리해야 한다는 원칙</td></tr><tr><td></td><td>Dependency Inversion Principle (DIP)</td><td>고수준 모듈이 저수준 모듈에 의존하지 않고 추상화에 의존해야 한다는 원칙</td></tr><tr><td><strong>기술 개념</strong></td><td>Interface Translation</td><td>서로 다른 인터페이스의 메서드 호출을 변환하는 과정</td></tr><tr><td></td><td>Delegation (위임)</td><td>어댑터가 포함하고 있는 객체 (Adaptee) 에게 기능 수행을 위임하는 구조</td></tr><tr><td></td><td>Object Composition (객체 합성)</td><td>상속 대신 객체를 포함하여 기능을 구성하는 방식</td></tr><tr><td><strong>소프트웨어 배경</strong></td><td>Legacy System</td><td>오래된 기술로 구축되어 있고, 직접 변경이 어려운 기존 시스템</td></tr><tr><td></td><td>Third-party Library</td><td>외부에서 제공된 라이브러리로, 직접 수정이 어렵고 어댑터를 통해 통합되는 경우가 많음</td></tr><tr><td><strong>아키텍처 요소</strong></td><td>API Gateway</td><td>외부 클라이언트의 요청을 내부 서비스로 라우팅하는 진입점 역할 수행 (Adapter 역할과 유사한 목적)</td></tr><tr><td></td><td>Service Mesh</td><td>서비스 간 통신을 추상화하여 관리하는 인프라 계층 (Adapter 역할 포함 가능)</td></tr><tr><td><strong>통합 및 변환</strong></td><td>Message Translator</td><td>서로 다른 메시지 형식을 변환해주는 구성 요소 (Adapter 의 일종으로 사용됨)</td></tr><tr><td></td><td>ETL (Extract, Transform, Load)</td><td>데이터를 추출, 변환, 적재하는 통합 프로세스로, Adaptee ↔ Target 데이터 흐름의 구현 예시</td></tr><tr><td><strong>보조 개념</strong></td><td>Mock Object</td><td>테스트에서 실제 객체 대신 사용하는 가짜 객체 (어댑터 테스트 시 사용됨)</td></tr><tr><td></td><td>Connection Pooling</td><td>재사용 가능한 연결을 유지하여 성능을 최적화하는 기법</td></tr><tr><td></td><td>LRU Cache</td><td>가장 오래된 항목부터 제거하는 캐싱 알고리즘</td></tr><tr><td></td><td>Circuit Breaker</td><td>외부 시스템 장애가 발생했을 때 시스템 보호를 위한 패턴</td></tr><tr><td></td><td>Bulkhead Pattern</td><td>장애가 전체 시스템에 영향을 주지 않도록 격리하는 구조</td></tr><tr><td></td><td>Serialization</td><td>객체를 바이트 스트림으로 변환하는 과정</td></tr><tr><td></td><td>Marshalling</td><td>객체를 JSON, XML 등 포맷으로 변환하는 과정</td></tr><tr><td></td><td>IdP (Identity Provider)</td><td>사용자 인증을 제공하는 시스템</td></tr><tr><td></td><td>Distributed Tracing</td><td>요청 흐름을 추적하여 분산 시스템에서 문제를 진단하는 기술</td></tr><tr><td></td><td>SLA (Service Level Agreement)</td><td>서비스 제공자와 사용자 간의 품질 보장 합의</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><h3 id=공식-및-이론-기반>공식 및 이론 기반<a hidden class=anchor aria-hidden=true href=#공식-및-이론-기반>#</a></h3><ul><li><a href=https://johngrib.github.io/wiki/pattern/adapter/>어댑터 패턴 (Adapter Pattern) - 기계인간 John Grib</a></li><li><a href=https://refactoring.guru/ko/design-patterns/adapter>어댑터 패턴 - Refactoring Guru</a></li><li><a href=https://ko.wikipedia.org/wiki/%EC%96%B4%EB%8C%91%ED%84%B0_%ED%8C%A8%ED%84%B4>어댑터 패턴 - 위키백과</a></li></ul><h3 id=튜토리얼-및-실용-예제>튜토리얼 및 실용 예제<a hidden class=anchor aria-hidden=true href=#튜토리얼-및-실용-예제>#</a></h3><ul><li><a href=https://yuni-q.github.io/design%20pattern/adapter-pattern/>adapter pattern | yuni‑q 블로그</a></li><li><a href=https://velog.io/@nnnyeong/Design-Pattern-%EC%96%B4%EB%8C%91%ED%84%B0-%ED%8C%A8%ED%84%B4-Adapter-Pattern>[Design Pattern] 어댑터 패턴, Adapter Pattern - nnnyeong (Velog)</a></li><li><a href=https://velog.io/@bae_mung/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4-%EA%B5%AC%EC%A1%B0-Adapter-Pattern>[디자인 패턴 - 구조] Adapter Pattern - bae_mung (Velog)</a></li><li><a href=https://m.blog.naver.com/seek316/222084011455>[Java] 디자인 패턴 - 어댑터 패턴(Adapter Pattern) - seek316 (네이버 블로그)</a></li><li><a href=https://yaboong.github.io/design-pattern/2018/10/15/adapter-pattern/>디자인패턴 - 어댑터 패턴 - yaboong</a></li><li><a href=https://kscory.com/dev/design-pattern/adapter>[Design Pattern] Adapter 패턴 - kscory</a></li><li><a href=https://ansohxxn.github.io/design%20pattern/chapter13/>Chapter 13. 어댑터 패턴(Adapter Pattern) - ansohxxn</a></li><li><a href=https://velog.io/@superlipbalm/how-i-use-adapter-pattern-in-reactjs>(번역) 리액트에서 어댑터(Adapter) 패턴을 사용하는 방법 - superlipbalm (Velog)</a></li><li><a href=https://ones1kk.tistory.com/entry/GoF-%EC%96%B4%EB%8C%91%ED%84%B0-%ED%8C%A8%ED%84%B4Adapter-Pattern>ones1kk: 어댑터 패턴 (GoF) 정리</a></li></ul><h3 id=아키텍처프레임워크-관련>아키텍처·프레임워크 관련<a hidden class=anchor aria-hidden=true href=#아키텍처프레임워크-관련>#</a></h3><ul><li><a href=https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-servlet.html>Spring Framework - DispatcherServlet (Adapter Pattern 응용)</a></li><li><a href=https://martinfowler.com/bliki/AntiCorruptionLayer.html>Martin Fowler - Anti‑Corruption Layer (어댑터 계층 아키텍처)</a></li></ul><h3 id=심화최신-분석>심화·최신 분석<a hidden class=anchor aria-hidden=true href=#심화최신-분석>#</a></h3><ul><li><a href=https://nginxstore.com/blog/api-gateway/%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4-%EA%B5%AC%EC%B6%95%EC%9D%84-%EC%9C%84%ED%95%9C-api-gateway-%ED%8C%A8%ED%84%B4-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/>마이크로서비스 구축을 위한 API Gateway 패턴 사용하기 - NGINX STORE</a></li><li><a href=https://engineering.linecorp.com/ko/blog/port-and-adapter-architecture/>지속 가능한 소프트웨어 설계 패턴: 포트와 어댑터 아키텍처 적용하기 - LINE Engineering Blog</a></li></ul><hr></div></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>