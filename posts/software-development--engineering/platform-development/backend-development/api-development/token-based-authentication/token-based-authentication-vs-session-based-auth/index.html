<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Token Authentication vs. Session-based Auth | hyunyoun's Blog</title><meta name=keywords content="Backend-Development,API-Design,Authentication-Methods,Token-Authentication"><meta name=description content="세션 기반 인증은 전통적인 인증 방식으로, 서버가 사용자의 로그인 상태를 세션으로 유지하는 방식이다. 토큰 인증은 클라이언트에게 서명된 토큰을 발급하여 인증하는 방식이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-development--engineering/platform-development/backend-development/api-development/token-based-authentication/token-based-authentication-vs-session-based-auth/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.d522c866f0cc9c20ae4fa73a0a8c07f0af4c36af75bcbcd3e90558446f681077.css integrity="sha256-1SLIZvDMnCCuT6c6CowH8K9MNq91vLzT6QVYRG9oEHc=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-development--engineering/platform-development/backend-development/api-development/token-based-authentication/token-based-authentication-vs-session-based-auth/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-development--engineering/platform-development/backend-development/api-development/token-based-authentication/token-based-authentication-vs-session-based-auth/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Token Authentication vs. Session-based Auth"><meta property="og:description" content="세션 기반 인증은 전통적인 인증 방식으로, 서버가 사용자의 로그인 상태를 세션으로 유지하는 방식이다. 토큰 인증은 클라이언트에게 서명된 토큰을 발급하여 인증하는 방식이다."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-04-02T02:45:00+00:00"><meta property="article:modified_time" content="2025-04-02T02:45:00+00:00"><meta property="article:tag" content="Backend-Development"><meta property="article:tag" content="API-Design"><meta property="article:tag" content="Authentication-Methods"><meta property="article:tag" content="Token-Authentication"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Token Authentication vs. Session-based Auth"><meta name=twitter:description content="세션 기반 인증은 전통적인 인증 방식으로, 서버가 사용자의 로그인 상태를 세션으로 유지하는 방식이다. 토큰 인증은 클라이언트에게 서명된 토큰을 발급하여 인증하는 방식이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"HY's Blog","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":7,"name":"Token Authentication vs. Session-based Auth","item":"https://buenhyden.github.io/posts/software-development--engineering/platform-development/backend-development/api-development/token-based-authentication/token-based-authentication-vs-session-based-auth/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Token Authentication vs. Session-based Auth","name":"Token Authentication vs. Session-based Auth","description":"세션 기반 인증은 전통적인 인증 방식으로, 서버가 사용자의 로그인 상태를 세션으로 유지하는 방식이다. 토큰 인증은 클라이언트에게 서명된 토큰을 발급하여 인증하는 방식이다.","keywords":["Backend-Development","API-Design","Authentication-Methods","Token-Authentication"],"articleBody":"Token Authentication vs. Session-based Auth 세션 기반 인증(Session-based Authentication) 세션 기반 인증은 전통적인 인증 방식으로, 서버가 사용자의 로그인 상태를 세션으로 유지하는 방식이다.\n작동 원리 인증 과정: 사용자가 자격 증명(사용자 이름/비밀번호)을 제출한다. 서버는 자격 증명을 검증하고, 유효한 경우 고유한 세션 ID를 생성한다. 서버는 세션 ID와 관련 사용자 정보를 서버 측 저장소(메모리, 데이터베이스, 캐시 등)에 저장한다. 서버는 세션 ID를 클라이언트에게 쿠키로 전송한다. 클라이언트는 이후 요청 시 이 쿠키를 자동으로 포함시킨다. 서버는 쿠키의 세션 ID를 확인하여 사용자를 식별한다. 세션 수명 주기: 세션은 사용자가 로그인할 때 생성된다. 세션은 일정 시간이 지나면 만료된다(서버 설정에 따라 다름). 사용자가 로그아웃하면 세션이 명시적으로 파기된다. 서버는 세션의 유효성과 만료를 관리한다. 주요 특징 상태 유지(Stateful): 서버가 세션 정보를 저장하고 관리한다. 쿠키 기반: 주로 HTTP 쿠키를 통해 세션 ID를 전달한다. 서버 측 저장소: 세션 데이터가 서버에 저장된다. 간단한 구현: 대부분의 웹 프레임워크에서 기본적으로 지원한다. 명시적인 세션 관리: 서버가 세션 생성, 검증, 만료, 파기를 제어한다. 토큰 인증(Token Authentication) 토큰 인증은 클라이언트에게 서명된 토큰을 발급하여 인증하는 방식이다. 가장 널리 사용되는 토큰 형식은 JWT(JSON Web Token)이다.\n작동 원리 인증 과정: 사용자가 자격 증명을 제출한다. 서버는 자격 증명을 검증하고, 유효한 경우 토큰을 생성한다. 토큰에는 사용자 식별자, 권한, 만료 시간 등의 정보가 포함되고 서명된다. 서버는 토큰을 클라이언트에게 반환한다. 클라이언트는 토큰을 저장하고(로컬 스토리지, 쿠키 등) 이후 요청의 헤더에 포함시킨다. 서버는 토큰의 서명을 검증하여 사용자를 식별한다. 토큰 수명 주기: 토큰은 발급 시 만료 시간이 설정된다. 토큰은 클라이언트 측에서 관리된다. 만료된 토큰은 자동으로 무효화된다. 리프레시 토큰을 통해 접근 토큰을 갱신할 수 있다. 주요 특징 무상태(Stateless): 서버는 클라이언트 상태를 저장하지 않는다. 자체 포함적(Self-contained): 필요한 모든 정보가 토큰 자체에 포함된다. 확장성: 서버 간 세션 공유 없이 수평적 확장이 용이하다. 플랫폼 독립적: 다양한 클라이언트 플랫폼에서 사용 가능하다. 유연한 저장: 토큰은 다양한 방식으로 클라이언트에 저장될 수 있다. 세션 기반 인증 vs. 토큰 인증 비교 특성 세션 기반 인증 토큰 인증 상태 관리 Stateful(상태 유지) Stateless(무상태) 저장 위치 주로 서버 측(세션 저장소) 주로 클라이언트 측 확장성 제한적(세션 공유 필요) 높음(서버 간 공유 필요 없음) 트래픽 적음(세션 ID만 전송) 상대적으로 많음(전체 토큰 전송) 보안 요소 세션 ID 서명된 토큰(JWT 등) 구현 복잡성 낮음(프레임워크 지원) 중간(직접 구현 필요) 서버 자원 높음(세션 저장) 낮음(토큰 검증만) 인증 정보 저장 서버 메모리/DB/캐시 클라이언트(로컬 스토리지, 쿠키 등) 만료 처리 서버에서 제어 토큰 자체에 만료 시간 내장 로그아웃 메커니즘 간단(세션 삭제) 복잡(클라이언트 토큰 삭제 + 블랙리스트) API 호환성 제한적(쿠키 의존) 우수(Authorization 헤더) CSRF 취약성 높음(대응책 필요) 낮음(저장 방식에 따라 다름) XSS 취약성 중간(HttpOnly 쿠키) 높음(로컬 스토리지 사용 시) 세션 탈취 위험 세션 ID 탈취 토큰 탈취 멀티 도메인 어려움(쿠키 제한) 용이함(헤더 기반) 모바일 지원 제한적 우수함 오프라인 처리 불가능 가능(토큰 저장 시) 마이크로서비스 적합성 낮음 높음 개발자 경험 단순함 복잡하나 유연함 데이터 크기 작음(세션 ID만) 큼(전체 페이로드) 심층 분석 구현 예시 세션 기반 인증 구현 (Node.js/Express):\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 const express = require('express'); const session = require('express-session'); const app = express(); // 세션 미들웨어 설정 app.use(session({ secret: 'your-secret-key', resave: false, saveUninitialized: false, cookie: { secure: true, httpOnly: true, maxAge: 3600000 } // 1시간 })); // 로그인 라우트 app.post('/login', (req, res) =\u003e { const { username, password } = req.body; // DB에서 사용자 검증 (예시) const user = authenticateUser(username, password); if (user) { // 세션에 사용자 정보 저장 req.session.user = { id: user.id, username: user.username, role: user.role }; return res.status(200).json({ message: '로그인 성공' }); } return res.status(401).json({ message: '인증 실패' }); }); // 인증 확인 미들웨어 function isAuthenticated(req, res, next) { if (req.session.user) { return next(); } return res.status(401).json({ message: '인증이 필요합니다' }); } // 보호된 라우트 app.get('/protected', isAuthenticated, (req, res) =\u003e { res.json({ message: '보호된 리소스', user: req.session.user }); }); // 로그아웃 app.get('/logout', (req, res) =\u003e { req.session.destroy(); res.json({ message: '로그아웃 성공' }); }); 토큰 인증 구현 (Node.js/Express, JWT):\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 const express = require('express'); const jwt = require('jsonwebtoken'); const app = express(); const SECRET_KEY = 'your-secret-key'; // 로그인 라우트 app.post('/login', (req, res) =\u003e { const { username, password } = req.body; // DB에서 사용자 검증 (예시) const user = authenticateUser(username, password); if (user) { // JWT 토큰 생성 const token = jwt.sign( { id: user.id, username: user.username, role: user.role }, SECRET_KEY, { expiresIn: '1h' } // 1시간 ); return res.status(200).json({ message: '로그인 성공', token }); } return res.status(401).json({ message: '인증 실패' }); }); // 인증 확인 미들웨어 function authenticateToken(req, res, next) { const authHeader = req.headers['authorization']; const token = authHeader \u0026\u0026 authHeader.split(' ')[1]; // \"Bearer TOKEN\" 형식 if (!token) return res.status(401).json({ message: '토큰이 필요합니다' }); jwt.verify(token, SECRET_KEY, (err, user) =\u003e { if (err) return res.status(403).json({ message: '토큰이 유효하지 않습니다' }); req.user = user; next(); }); } // 보호된 라우트 app.get('/protected', authenticateToken, (req, res) =\u003e { res.json({ message: '보호된 리소스', user: req.user }); }); // 로그아웃 (클라이언트 측에서 토큰 삭제가 필요) app.get('/logout', (req, res) =\u003e { // 서버 측에서는 특별한 작업이 필요 없음 // 토큰 블랙리스트를 사용할 수 있음 (실제 구현은 더 복잡) res.json({ message: '로그아웃 성공' }); }); 장단점 분석 세션 기반 인증의 장단점 장점:\n서버 측에서 세션을 완전히 제어할 수 있다. 세션을 언제든지 무효화할 수 있어 로그아웃 처리가 간단하다. 클라이언트에는 세션 ID만 저장되므로 데이터 노출 위험이 적다. 대부분의 웹 프레임워크에서 기본적으로 지원하여 구현이 간단하다. HttpOnly 쿠키 사용 시 XSS 공격으로부터 상대적으로 안전하다. 단점:\n서버 측 세션 저장소가 필요하여 서버 자원을 소비한다. 다중 서버 환경에서는 세션 동기화 메커니즘이 필요하다. 확장성 제한: 사용자가 많아질수록 세션 관리 부담이 증가한다. CSRF(Cross-Site Request Forgery) 공격에 취약할 수 있다. 모바일 애플리케이션이나 크로스 도메인 요청에서 쿠키 처리가 복잡하다. 토큰 인증의 장단점 장점:\n무상태 특성으로 서버 확장성이 우수하다. 서버 측 저장소가 필요하지 않아 리소스 효율성이 좋다. 다양한 도메인 및 서비스에서 사용 가능하다(크로스 도메인). 모바일 애플리케이션 및 API 통합에 적합하다. 마이크로서비스 아키텍처에 이상적이다. 단점:\n토큰 크기가 세션 ID보다 커서 네트워크 오버헤드가 발생할 수 있다. 토큰 취소가 어렵다(별도의 블랙리스트 메커니즘 필요). 로컬 스토리지에 저장 시 XSS 공격에 취약할 수 있다. 민감한 정보가 토큰에 포함될 경우 보안 위험이 있다. 토큰 관리 로직을 직접 구현해야 한다. 사용 시나리오 분석 세션 기반 인증이 적합한 경우 전통적인 웹 애플리케이션: 서버 렌더링 페이지 중심의 애플리케이션 단일 도메인 내에서 운영되는 애플리케이션 PHP, Ruby on Rails, Django 등의 전통적인 웹 프레임워크 높은 보안이 요구되는 애플리케이션: 금융, 의료, 정부 서비스 등 실시간 세션 모니터링과 즉시 무효화가 필요한 경우 사용자 활동 추적이 중요한 경우 제한된 사용자 기반: 사용자 수가 적거나 중간 규모인 애플리케이션 확장성보다 구현 단순성이 중요한 경우 토큰 인증이 적합한 경우 단일 페이지 애플리케이션(SPA): React, Angular, Vue.js 등으로 구축된 프론트엔드 API 중심 아키텍처 모바일 애플리케이션: iOS, Android 애플리케이션에서 API 호출 웹과 모바일 간의 일관된 인증 체계 필요 마이크로서비스 아키텍처: 분산 시스템 환경 서비스 간 인증 필요 대규모 확장이 필요한 시스템: 많은 사용자와 트래픽을 처리해야 하는 경우 클라우드 기반 수평적 확장 환경 크로스 도메인 서비스: 여러 도메인이나 하위 도메인에 걸친 서비스 써드파티 API 통합 하이브리드 및 현대적 접근법 실제 프로덕션 환경에서는 두 방식의 장점을 결합한 하이브리드 접근법이 사용되기도 한다:\nJWT in HTTP-only 쿠키: JWT를 사용하되 HTTP-only 쿠키에 저장하여 XSS 보호 CSRF 대응책과 함께 사용 이중 토큰 방식: 짧은 수명의 접근 토큰 + 긴 수명의 리프레시 토큰 리프레시 토큰은 보안 쿠키에, 접근 토큰은 메모리에 저장 Redis를 이용한 토큰 관리: 토큰의 장점을 유지하면서 Redis와 같은 메모리 DB로 토큰 상태 관리 즉시 토큰 무효화 가능 서비스별 인증 분리: 핵심 인증은 세션 기반으로, API 통신은 토큰 기반으로 구현 각 서비스의 특성에 맞는 방식 선택 기술적 고려사항 보안 측면 XSS(Cross-Site Scripting) 보호: 세션: HttpOnly 쿠키 사용으로 자바스크립트 접근 방지 토큰: 메모리 저장 또는 HTTP-only 쿠키에 저장 고려 CSRF(Cross-Site Request Forgery) 보호: 세션: CSRF 토큰, SameSite 쿠키 속성 등으로 대응 토큰: Authorization 헤더 사용 시 기본적으로 보호됨 토큰/세션 탈취 방지: HTTPS 사용 필수 적절한 만료 시간 설정 사용자 IP, 기기 정보 검증(필요시) 성능 측면 네트워크 오버헤드: 세션: 작은 쿠키 크기로 네트워크 효율성 높음 토큰: 큰 토큰 크기로 상대적인 오버헤드 발생 서버 자원 사용: 세션: 세션 저장소 필요, 메모리/DB 자원 소비 토큰: 검증만 필요, 계산 리소스만 소비 확장성: 세션: Redis, Memcached 등을 통한 세션 클러스터링 필요 토큰: 추가 설정 없이 확장 가능 최신 트렌드 토큰 기반 인증의 증가: 마이크로서비스 아키텍처와 SPA의 인기로 토큰 인증 채택 증가 JWT, OAuth 2.0, OpenID Connect의 광범위한 지원 보안 강화 메커니즘: 다단계 인증(MFA) 통합 생체 인식과 같은 추가 인증 요소 토큰 바인딩(Token Binding) 세션 최적화: 분산 캐시 시스템을 통한 효율적인 세션 관리 비동기 세션 처리 용어 정리 용어 설명 참고 및 출처 ","wordCount":"1410","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2025-04-02T02:45:00Z","dateModified":"2025-04-02T02:45:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/software-development--engineering/platform-development/backend-development/api-development/token-based-authentication/token-based-authentication-vs-session-based-auth/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>HY's Blog</a></div><h1 class="post-title entry-hint-parent">Token Authentication vs. Session-based Auth</h1><div class=post-description>세션 기반 인증은 전통적인 인증 방식으로, 서버가 사용자의 로그인 상태를 세션으로 유지하는 방식이다. 토큰 인증은 클라이언트에게 서명된 토큰을 발급하여 인증하는 방식이다.</div><div class=post-meta><span title='2025-04-02 02:45:00 +0000 UTC'>April 2, 2025</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Software%20Development%20&%20Engineering/Platform%20Development/Backend%20Development/API%20Development/Token-Based%20Authentication/Token-Based-authentication-vs-session-based-auth.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#token-authentication-vs-session-based-auth>Token Authentication vs. Session-based Auth</a><ul><li><a href=#세션-기반-인증session-based-authentication>세션 기반 인증(Session-based Authentication)</a></li><li><a href=#토큰-인증token-authentication>토큰 인증(Token Authentication)</a></li><li><a href=#세션-기반-인증-vs-토큰-인증-비교>세션 기반 인증 vs. 토큰 인증 비교</a></li><li><a href=#심층-분석>심층 분석</a></li><li><a href=#사용-시나리오-분석>사용 시나리오 분석</a></li><li><a href=#하이브리드-및-현대적-접근법>하이브리드 및 현대적 접근법</a></li><li><a href=#기술적-고려사항>기술적 고려사항</a></li><li><a href=#최신-트렌드>최신 트렌드</a></li></ul></li><li><a href=#용어-정리>용어 정리</a></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=token-authentication-vs-session-based-auth>Token Authentication vs. Session-based Auth<a hidden class=anchor aria-hidden=true href=#token-authentication-vs-session-based-auth>#</a></h2><h3 id=세션-기반-인증session-based-authentication>세션 기반 인증(Session-based Authentication)<a hidden class=anchor aria-hidden=true href=#세션-기반-인증session-based-authentication>#</a></h3><p>세션 기반 인증은 전통적인 인증 방식으로, 서버가 사용자의 로그인 상태를 세션으로 유지하는 방식이다.</p><h4 id=작동-원리>작동 원리<a hidden class=anchor aria-hidden=true href=#작동-원리>#</a></h4><ol><li><strong>인증 과정</strong>:<ul><li>사용자가 자격 증명(사용자 이름/비밀번호)을 제출한다.</li><li>서버는 자격 증명을 검증하고, 유효한 경우 고유한 세션 ID를 생성한다.</li><li>서버는 세션 ID와 관련 사용자 정보를 서버 측 저장소(메모리, 데이터베이스, 캐시 등)에 저장한다.</li><li>서버는 세션 ID를 클라이언트에게 쿠키로 전송한다.</li><li>클라이언트는 이후 요청 시 이 쿠키를 자동으로 포함시킨다.</li><li>서버는 쿠키의 세션 ID를 확인하여 사용자를 식별한다.</li></ul></li><li><strong>세션 수명 주기</strong>:<ul><li>세션은 사용자가 로그인할 때 생성된다.</li><li>세션은 일정 시간이 지나면 만료된다(서버 설정에 따라 다름).</li><li>사용자가 로그아웃하면 세션이 명시적으로 파기된다.</li><li>서버는 세션의 유효성과 만료를 관리한다.</li></ul></li></ol><h4 id=주요-특징>주요 특징<a hidden class=anchor aria-hidden=true href=#주요-특징>#</a></h4><ul><li><strong>상태 유지(Stateful)</strong>: 서버가 세션 정보를 저장하고 관리한다.</li><li><strong>쿠키 기반</strong>: 주로 HTTP 쿠키를 통해 세션 ID를 전달한다.</li><li><strong>서버 측 저장소</strong>: 세션 데이터가 서버에 저장된다.</li><li><strong>간단한 구현</strong>: 대부분의 웹 프레임워크에서 기본적으로 지원한다.</li><li><strong>명시적인 세션 관리</strong>: 서버가 세션 생성, 검증, 만료, 파기를 제어한다.</li></ul><h3 id=토큰-인증token-authentication>토큰 인증(Token Authentication)<a hidden class=anchor aria-hidden=true href=#토큰-인증token-authentication>#</a></h3><p>토큰 인증은 클라이언트에게 서명된 토큰을 발급하여 인증하는 방식이다. 가장 널리 사용되는 토큰 형식은 JWT(JSON Web Token)이다.</p><h4 id=작동-원리-1>작동 원리<a hidden class=anchor aria-hidden=true href=#작동-원리-1>#</a></h4><ol><li><strong>인증 과정</strong>:<ul><li>사용자가 자격 증명을 제출한다.</li><li>서버는 자격 증명을 검증하고, 유효한 경우 토큰을 생성한다.</li><li>토큰에는 사용자 식별자, 권한, 만료 시간 등의 정보가 포함되고 서명된다.</li><li>서버는 토큰을 클라이언트에게 반환한다.</li><li>클라이언트는 토큰을 저장하고(로컬 스토리지, 쿠키 등) 이후 요청의 헤더에 포함시킨다.</li><li>서버는 토큰의 서명을 검증하여 사용자를 식별한다.</li></ul></li><li><strong>토큰 수명 주기</strong>:<ul><li>토큰은 발급 시 만료 시간이 설정된다.</li><li>토큰은 클라이언트 측에서 관리된다.</li><li>만료된 토큰은 자동으로 무효화된다.</li><li>리프레시 토큰을 통해 접근 토큰을 갱신할 수 있다.</li></ul></li></ol><h4 id=주요-특징-1>주요 특징<a hidden class=anchor aria-hidden=true href=#주요-특징-1>#</a></h4><ul><li><strong>무상태(Stateless)</strong>: 서버는 클라이언트 상태를 저장하지 않는다.</li><li><strong>자체 포함적(Self-contained)</strong>: 필요한 모든 정보가 토큰 자체에 포함된다.</li><li><strong>확장성</strong>: 서버 간 세션 공유 없이 수평적 확장이 용이하다.</li><li><strong>플랫폼 독립적</strong>: 다양한 클라이언트 플랫폼에서 사용 가능하다.</li><li><strong>유연한 저장</strong>: 토큰은 다양한 방식으로 클라이언트에 저장될 수 있다.</li></ul><h3 id=세션-기반-인증-vs-토큰-인증-비교>세션 기반 인증 vs. 토큰 인증 비교<a hidden class=anchor aria-hidden=true href=#세션-기반-인증-vs-토큰-인증-비교>#</a></h3><table><thead><tr><th>특성</th><th>세션 기반 인증</th><th>토큰 인증</th></tr></thead><tbody><tr><td><strong>상태 관리</strong></td><td>Stateful(상태 유지)</td><td>Stateless(무상태)</td></tr><tr><td><strong>저장 위치</strong></td><td>주로 서버 측(세션 저장소)</td><td>주로 클라이언트 측</td></tr><tr><td><strong>확장성</strong></td><td>제한적(세션 공유 필요)</td><td>높음(서버 간 공유 필요 없음)</td></tr><tr><td><strong>트래픽</strong></td><td>적음(세션 ID만 전송)</td><td>상대적으로 많음(전체 토큰 전송)</td></tr><tr><td><strong>보안 요소</strong></td><td>세션 ID</td><td>서명된 토큰(JWT 등)</td></tr><tr><td><strong>구현 복잡성</strong></td><td>낮음(프레임워크 지원)</td><td>중간(직접 구현 필요)</td></tr><tr><td><strong>서버 자원</strong></td><td>높음(세션 저장)</td><td>낮음(토큰 검증만)</td></tr><tr><td><strong>인증 정보 저장</strong></td><td>서버 메모리/DB/캐시</td><td>클라이언트(로컬 스토리지, 쿠키 등)</td></tr><tr><td><strong>만료 처리</strong></td><td>서버에서 제어</td><td>토큰 자체에 만료 시간 내장</td></tr><tr><td><strong>로그아웃 메커니즘</strong></td><td>간단(세션 삭제)</td><td>복잡(클라이언트 토큰 삭제 + 블랙리스트)</td></tr><tr><td><strong>API 호환성</strong></td><td>제한적(쿠키 의존)</td><td>우수(Authorization 헤더)</td></tr><tr><td><strong>CSRF 취약성</strong></td><td>높음(대응책 필요)</td><td>낮음(저장 방식에 따라 다름)</td></tr><tr><td><strong>XSS 취약성</strong></td><td>중간(HttpOnly 쿠키)</td><td>높음(로컬 스토리지 사용 시)</td></tr><tr><td><strong>세션 탈취 위험</strong></td><td>세션 ID 탈취</td><td>토큰 탈취</td></tr><tr><td><strong>멀티 도메인</strong></td><td>어려움(쿠키 제한)</td><td>용이함(헤더 기반)</td></tr><tr><td><strong>모바일 지원</strong></td><td>제한적</td><td>우수함</td></tr><tr><td><strong>오프라인 처리</strong></td><td>불가능</td><td>가능(토큰 저장 시)</td></tr><tr><td><strong>마이크로서비스 적합성</strong></td><td>낮음</td><td>높음</td></tr><tr><td><strong>개발자 경험</strong></td><td>단순함</td><td>복잡하나 유연함</td></tr><tr><td><strong>데이터 크기</strong></td><td>작음(세션 ID만)</td><td>큼(전체 페이로드)</td></tr></tbody></table><h3 id=심층-분석>심층 분석<a hidden class=anchor aria-hidden=true href=#심층-분석>#</a></h3><h4 id=구현-예시>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시>#</a></h4><p><strong>세션 기반 인증 구현 (Node.js/Express)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a>
</span><span class=lnt id=hl-0-21><a class=lnlinks href=#hl-0-21>21</a>
</span><span class=lnt id=hl-0-22><a class=lnlinks href=#hl-0-22>22</a>
</span><span class=lnt id=hl-0-23><a class=lnlinks href=#hl-0-23>23</a>
</span><span class=lnt id=hl-0-24><a class=lnlinks href=#hl-0-24>24</a>
</span><span class=lnt id=hl-0-25><a class=lnlinks href=#hl-0-25>25</a>
</span><span class=lnt id=hl-0-26><a class=lnlinks href=#hl-0-26>26</a>
</span><span class=lnt id=hl-0-27><a class=lnlinks href=#hl-0-27>27</a>
</span><span class=lnt id=hl-0-28><a class=lnlinks href=#hl-0-28>28</a>
</span><span class=lnt id=hl-0-29><a class=lnlinks href=#hl-0-29>29</a>
</span><span class=lnt id=hl-0-30><a class=lnlinks href=#hl-0-30>30</a>
</span><span class=lnt id=hl-0-31><a class=lnlinks href=#hl-0-31>31</a>
</span><span class=lnt id=hl-0-32><a class=lnlinks href=#hl-0-32>32</a>
</span><span class=lnt id=hl-0-33><a class=lnlinks href=#hl-0-33>33</a>
</span><span class=lnt id=hl-0-34><a class=lnlinks href=#hl-0-34>34</a>
</span><span class=lnt id=hl-0-35><a class=lnlinks href=#hl-0-35>35</a>
</span><span class=lnt id=hl-0-36><a class=lnlinks href=#hl-0-36>36</a>
</span><span class=lnt id=hl-0-37><a class=lnlinks href=#hl-0-37>37</a>
</span><span class=lnt id=hl-0-38><a class=lnlinks href=#hl-0-38>38</a>
</span><span class=lnt id=hl-0-39><a class=lnlinks href=#hl-0-39>39</a>
</span><span class=lnt id=hl-0-40><a class=lnlinks href=#hl-0-40>40</a>
</span><span class=lnt id=hl-0-41><a class=lnlinks href=#hl-0-41>41</a>
</span><span class=lnt id=hl-0-42><a class=lnlinks href=#hl-0-42>42</a>
</span><span class=lnt id=hl-0-43><a class=lnlinks href=#hl-0-43>43</a>
</span><span class=lnt id=hl-0-44><a class=lnlinks href=#hl-0-44>44</a>
</span><span class=lnt id=hl-0-45><a class=lnlinks href=#hl-0-45>45</a>
</span><span class=lnt id=hl-0-46><a class=lnlinks href=#hl-0-46>46</a>
</span><span class=lnt id=hl-0-47><a class=lnlinks href=#hl-0-47>47</a>
</span><span class=lnt id=hl-0-48><a class=lnlinks href=#hl-0-48>48</a>
</span><span class=lnt id=hl-0-49><a class=lnlinks href=#hl-0-49>49</a>
</span><span class=lnt id=hl-0-50><a class=lnlinks href=#hl-0-50>50</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>session</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express-session&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 세션 미들웨어 설정
</span></span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>session</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>secret</span><span class=o>:</span> <span class=s1>&#39;your-secret-key&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>resave</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>saveUninitialized</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>cookie</span><span class=o>:</span> <span class=p>{</span> <span class=nx>secure</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=nx>httpOnly</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=nx>maxAge</span><span class=o>:</span> <span class=mi>3600000</span> <span class=p>}</span> <span class=c1>// 1시간
</span></span></span><span class=line><span class=cl><span class=p>}));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 로그인 라우트
</span></span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/login&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>username</span><span class=p>,</span> <span class=nx>password</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>body</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// DB에서 사용자 검증 (예시)
</span></span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=nx>authenticateUser</span><span class=p>(</span><span class=nx>username</span><span class=p>,</span> <span class=nx>password</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>user</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 세션에 사용자 정보 저장
</span></span></span><span class=line><span class=cl>    <span class=nx>req</span><span class=p>.</span><span class=nx>session</span><span class=p>.</span><span class=nx>user</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>id</span><span class=o>:</span> <span class=nx>user</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>username</span><span class=o>:</span> <span class=nx>user</span><span class=p>.</span><span class=nx>username</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>role</span><span class=o>:</span> <span class=nx>user</span><span class=p>.</span><span class=nx>role</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>200</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;로그인 성공&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>401</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;인증 실패&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 인증 확인 미들웨어
</span></span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>isAuthenticated</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>session</span><span class=p>.</span><span class=nx>user</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>401</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;인증이 필요합니다&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 보호된 라우트
</span></span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/protected&#39;</span><span class=p>,</span> <span class=nx>isAuthenticated</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;보호된 리소스&#39;</span><span class=p>,</span> <span class=nx>user</span><span class=o>:</span> <span class=nx>req</span><span class=p>.</span><span class=nx>session</span><span class=p>.</span><span class=nx>user</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 로그아웃
</span></span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/logout&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>req</span><span class=p>.</span><span class=nx>session</span><span class=p>.</span><span class=nx>destroy</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;로그아웃 성공&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>토큰 인증 구현 (Node.js/Express, JWT)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14>14</a>
</span><span class=lnt id=hl-1-15><a class=lnlinks href=#hl-1-15>15</a>
</span><span class=lnt id=hl-1-16><a class=lnlinks href=#hl-1-16>16</a>
</span><span class=lnt id=hl-1-17><a class=lnlinks href=#hl-1-17>17</a>
</span><span class=lnt id=hl-1-18><a class=lnlinks href=#hl-1-18>18</a>
</span><span class=lnt id=hl-1-19><a class=lnlinks href=#hl-1-19>19</a>
</span><span class=lnt id=hl-1-20><a class=lnlinks href=#hl-1-20>20</a>
</span><span class=lnt id=hl-1-21><a class=lnlinks href=#hl-1-21>21</a>
</span><span class=lnt id=hl-1-22><a class=lnlinks href=#hl-1-22>22</a>
</span><span class=lnt id=hl-1-23><a class=lnlinks href=#hl-1-23>23</a>
</span><span class=lnt id=hl-1-24><a class=lnlinks href=#hl-1-24>24</a>
</span><span class=lnt id=hl-1-25><a class=lnlinks href=#hl-1-25>25</a>
</span><span class=lnt id=hl-1-26><a class=lnlinks href=#hl-1-26>26</a>
</span><span class=lnt id=hl-1-27><a class=lnlinks href=#hl-1-27>27</a>
</span><span class=lnt id=hl-1-28><a class=lnlinks href=#hl-1-28>28</a>
</span><span class=lnt id=hl-1-29><a class=lnlinks href=#hl-1-29>29</a>
</span><span class=lnt id=hl-1-30><a class=lnlinks href=#hl-1-30>30</a>
</span><span class=lnt id=hl-1-31><a class=lnlinks href=#hl-1-31>31</a>
</span><span class=lnt id=hl-1-32><a class=lnlinks href=#hl-1-32>32</a>
</span><span class=lnt id=hl-1-33><a class=lnlinks href=#hl-1-33>33</a>
</span><span class=lnt id=hl-1-34><a class=lnlinks href=#hl-1-34>34</a>
</span><span class=lnt id=hl-1-35><a class=lnlinks href=#hl-1-35>35</a>
</span><span class=lnt id=hl-1-36><a class=lnlinks href=#hl-1-36>36</a>
</span><span class=lnt id=hl-1-37><a class=lnlinks href=#hl-1-37>37</a>
</span><span class=lnt id=hl-1-38><a class=lnlinks href=#hl-1-38>38</a>
</span><span class=lnt id=hl-1-39><a class=lnlinks href=#hl-1-39>39</a>
</span><span class=lnt id=hl-1-40><a class=lnlinks href=#hl-1-40>40</a>
</span><span class=lnt id=hl-1-41><a class=lnlinks href=#hl-1-41>41</a>
</span><span class=lnt id=hl-1-42><a class=lnlinks href=#hl-1-42>42</a>
</span><span class=lnt id=hl-1-43><a class=lnlinks href=#hl-1-43>43</a>
</span><span class=lnt id=hl-1-44><a class=lnlinks href=#hl-1-44>44</a>
</span><span class=lnt id=hl-1-45><a class=lnlinks href=#hl-1-45>45</a>
</span><span class=lnt id=hl-1-46><a class=lnlinks href=#hl-1-46>46</a>
</span><span class=lnt id=hl-1-47><a class=lnlinks href=#hl-1-47>47</a>
</span><span class=lnt id=hl-1-48><a class=lnlinks href=#hl-1-48>48</a>
</span><span class=lnt id=hl-1-49><a class=lnlinks href=#hl-1-49>49</a>
</span><span class=lnt id=hl-1-50><a class=lnlinks href=#hl-1-50>50</a>
</span><span class=lnt id=hl-1-51><a class=lnlinks href=#hl-1-51>51</a>
</span><span class=lnt id=hl-1-52><a class=lnlinks href=#hl-1-52>52</a>
</span><span class=lnt id=hl-1-53><a class=lnlinks href=#hl-1-53>53</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>jwt</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;jsonwebtoken&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>SECRET_KEY</span> <span class=o>=</span> <span class=s1>&#39;your-secret-key&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 로그인 라우트
</span></span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/login&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>username</span><span class=p>,</span> <span class=nx>password</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>body</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// DB에서 사용자 검증 (예시)
</span></span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=nx>authenticateUser</span><span class=p>(</span><span class=nx>username</span><span class=p>,</span> <span class=nx>password</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>user</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// JWT 토큰 생성
</span></span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>jwt</span><span class=p>.</span><span class=nx>sign</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nx>id</span><span class=o>:</span> <span class=nx>user</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span> <span class=nx>username</span><span class=o>:</span> <span class=nx>user</span><span class=p>.</span><span class=nx>username</span><span class=p>,</span> <span class=nx>role</span><span class=o>:</span> <span class=nx>user</span><span class=p>.</span><span class=nx>role</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=nx>SECRET_KEY</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nx>expiresIn</span><span class=o>:</span> <span class=s1>&#39;1h&#39;</span> <span class=p>}</span> <span class=c1>// 1시간
</span></span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>200</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;로그인 성공&#39;</span><span class=p>,</span> <span class=nx>token</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>401</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;인증 실패&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 인증 확인 미들웨어
</span></span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>authenticateToken</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>authHeader</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>headers</span><span class=p>[</span><span class=s1>&#39;authorization&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>authHeader</span> <span class=o>&amp;&amp;</span> <span class=nx>authHeader</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39; &#39;</span><span class=p>)[</span><span class=mi>1</span><span class=p>];</span> <span class=c1>// &#34;Bearer TOKEN&#34; 형식
</span></span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>token</span><span class=p>)</span> <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>401</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;토큰이 필요합니다&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>jwt</span><span class=p>.</span><span class=nx>verify</span><span class=p>(</span><span class=nx>token</span><span class=p>,</span> <span class=nx>SECRET_KEY</span><span class=p>,</span> <span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>user</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>403</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;토큰이 유효하지 않습니다&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>req</span><span class=p>.</span><span class=nx>user</span> <span class=o>=</span> <span class=nx>user</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 보호된 라우트
</span></span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/protected&#39;</span><span class=p>,</span> <span class=nx>authenticateToken</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;보호된 리소스&#39;</span><span class=p>,</span> <span class=nx>user</span><span class=o>:</span> <span class=nx>req</span><span class=p>.</span><span class=nx>user</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 로그아웃 (클라이언트 측에서 토큰 삭제가 필요)
</span></span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/logout&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 서버 측에서는 특별한 작업이 필요 없음
</span></span></span><span class=line><span class=cl>  <span class=c1>// 토큰 블랙리스트를 사용할 수 있음 (실제 구현은 더 복잡)
</span></span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;로그아웃 성공&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=장단점-분석>장단점 분석<a hidden class=anchor aria-hidden=true href=#장단점-분석>#</a></h4><h5 id=세션-기반-인증의-장단점>세션 기반 인증의 장단점<a hidden class=anchor aria-hidden=true href=#세션-기반-인증의-장단점>#</a></h5><p><strong>장점</strong>:</p><ul><li>서버 측에서 세션을 완전히 제어할 수 있다.</li><li>세션을 언제든지 무효화할 수 있어 로그아웃 처리가 간단하다.</li><li>클라이언트에는 세션 ID만 저장되므로 데이터 노출 위험이 적다.</li><li>대부분의 웹 프레임워크에서 기본적으로 지원하여 구현이 간단하다.</li><li>HttpOnly 쿠키 사용 시 XSS 공격으로부터 상대적으로 안전하다.</li></ul><p><strong>단점</strong>:</p><ul><li>서버 측 세션 저장소가 필요하여 서버 자원을 소비한다.</li><li>다중 서버 환경에서는 세션 동기화 메커니즘이 필요하다.</li><li>확장성 제한: 사용자가 많아질수록 세션 관리 부담이 증가한다.</li><li>CSRF(Cross-Site Request Forgery) 공격에 취약할 수 있다.</li><li>모바일 애플리케이션이나 크로스 도메인 요청에서 쿠키 처리가 복잡하다.</li></ul><h5 id=토큰-인증의-장단점>토큰 인증의 장단점<a hidden class=anchor aria-hidden=true href=#토큰-인증의-장단점>#</a></h5><p><strong>장점</strong>:</p><ul><li>무상태 특성으로 서버 확장성이 우수하다.</li><li>서버 측 저장소가 필요하지 않아 리소스 효율성이 좋다.</li><li>다양한 도메인 및 서비스에서 사용 가능하다(크로스 도메인).</li><li>모바일 애플리케이션 및 API 통합에 적합하다.</li><li>마이크로서비스 아키텍처에 이상적이다.</li></ul><p><strong>단점</strong>:</p><ul><li>토큰 크기가 세션 ID보다 커서 네트워크 오버헤드가 발생할 수 있다.</li><li>토큰 취소가 어렵다(별도의 블랙리스트 메커니즘 필요).</li><li>로컬 스토리지에 저장 시 XSS 공격에 취약할 수 있다.</li><li>민감한 정보가 토큰에 포함될 경우 보안 위험이 있다.</li><li>토큰 관리 로직을 직접 구현해야 한다.</li></ul><h3 id=사용-시나리오-분석>사용 시나리오 분석<a hidden class=anchor aria-hidden=true href=#사용-시나리오-분석>#</a></h3><h4 id=세션-기반-인증이-적합한-경우>세션 기반 인증이 적합한 경우<a hidden class=anchor aria-hidden=true href=#세션-기반-인증이-적합한-경우>#</a></h4><ol><li><strong>전통적인 웹 애플리케이션</strong>:<ul><li>서버 렌더링 페이지 중심의 애플리케이션</li><li>단일 도메인 내에서 운영되는 애플리케이션</li><li>PHP, Ruby on Rails, Django 등의 전통적인 웹 프레임워크</li></ul></li><li><strong>높은 보안이 요구되는 애플리케이션</strong>:<ul><li>금융, 의료, 정부 서비스 등</li><li>실시간 세션 모니터링과 즉시 무효화가 필요한 경우</li><li>사용자 활동 추적이 중요한 경우</li></ul></li><li><strong>제한된 사용자 기반</strong>:<ul><li>사용자 수가 적거나 중간 규모인 애플리케이션</li><li>확장성보다 구현 단순성이 중요한 경우</li></ul></li></ol><h4 id=토큰-인증이-적합한-경우>토큰 인증이 적합한 경우<a hidden class=anchor aria-hidden=true href=#토큰-인증이-적합한-경우>#</a></h4><ol><li><strong>단일 페이지 애플리케이션(SPA)</strong>:<ul><li>React, Angular, Vue.js 등으로 구축된 프론트엔드</li><li>API 중심 아키텍처</li></ul></li><li><strong>모바일 애플리케이션</strong>:<ul><li>iOS, Android 애플리케이션에서 API 호출</li><li>웹과 모바일 간의 일관된 인증 체계 필요</li></ul></li><li><strong>마이크로서비스 아키텍처</strong>:<ul><li>분산 시스템 환경</li><li>서비스 간 인증 필요</li></ul></li><li><strong>대규모 확장이 필요한 시스템</strong>:<ul><li>많은 사용자와 트래픽을 처리해야 하는 경우</li><li>클라우드 기반 수평적 확장 환경</li></ul></li><li><strong>크로스 도메인 서비스</strong>:<ul><li>여러 도메인이나 하위 도메인에 걸친 서비스</li><li>써드파티 API 통합</li></ul></li></ol><h3 id=하이브리드-및-현대적-접근법>하이브리드 및 현대적 접근법<a hidden class=anchor aria-hidden=true href=#하이브리드-및-현대적-접근법>#</a></h3><p>실제 프로덕션 환경에서는 두 방식의 장점을 결합한 하이브리드 접근법이 사용되기도 한다:</p><ol><li><strong>JWT in HTTP-only 쿠키</strong>:<ul><li>JWT를 사용하되 HTTP-only 쿠키에 저장하여 XSS 보호</li><li>CSRF 대응책과 함께 사용</li></ul></li><li><strong>이중 토큰 방식</strong>:<ul><li>짧은 수명의 접근 토큰 + 긴 수명의 리프레시 토큰</li><li>리프레시 토큰은 보안 쿠키에, 접근 토큰은 메모리에 저장</li></ul></li><li><strong>Redis를 이용한 토큰 관리</strong>:<ul><li>토큰의 장점을 유지하면서 Redis와 같은 메모리 DB로 토큰 상태 관리</li><li>즉시 토큰 무효화 가능</li></ul></li><li><strong>서비스별 인증 분리</strong>:<ul><li>핵심 인증은 세션 기반으로, API 통신은 토큰 기반으로 구현</li><li>각 서비스의 특성에 맞는 방식 선택</li></ul></li></ol><h3 id=기술적-고려사항>기술적 고려사항<a hidden class=anchor aria-hidden=true href=#기술적-고려사항>#</a></h3><h4 id=보안-측면>보안 측면<a hidden class=anchor aria-hidden=true href=#보안-측면>#</a></h4><ol><li><strong>XSS(Cross-Site Scripting) 보호</strong>:<ul><li>세션: HttpOnly 쿠키 사용으로 자바스크립트 접근 방지</li><li>토큰: 메모리 저장 또는 HTTP-only 쿠키에 저장 고려</li></ul></li><li><strong>CSRF(Cross-Site Request Forgery) 보호</strong>:<ul><li>세션: CSRF 토큰, SameSite 쿠키 속성 등으로 대응</li><li>토큰: Authorization 헤더 사용 시 기본적으로 보호됨</li></ul></li><li><strong>토큰/세션 탈취 방지</strong>:<ul><li>HTTPS 사용 필수</li><li>적절한 만료 시간 설정</li><li>사용자 IP, 기기 정보 검증(필요시)</li></ul></li></ol><h4 id=성능-측면>성능 측면<a hidden class=anchor aria-hidden=true href=#성능-측면>#</a></h4><ol><li><strong>네트워크 오버헤드</strong>:<ul><li>세션: 작은 쿠키 크기로 네트워크 효율성 높음</li><li>토큰: 큰 토큰 크기로 상대적인 오버헤드 발생</li></ul></li><li><strong>서버 자원 사용</strong>:<ul><li>세션: 세션 저장소 필요, 메모리/DB 자원 소비</li><li>토큰: 검증만 필요, 계산 리소스만 소비</li></ul></li><li><strong>확장성</strong>:<ul><li>세션: Redis, Memcached 등을 통한 세션 클러스터링 필요</li><li>토큰: 추가 설정 없이 확장 가능</li></ul></li></ol><h3 id=최신-트렌드>최신 트렌드<a hidden class=anchor aria-hidden=true href=#최신-트렌드>#</a></h3><ol><li><strong>토큰 기반 인증의 증가</strong>:<ul><li>마이크로서비스 아키텍처와 SPA의 인기로 토큰 인증 채택 증가</li><li>JWT, OAuth 2.0, OpenID Connect의 광범위한 지원</li></ul></li><li><strong>보안 강화 메커니즘</strong>:<ul><li>다단계 인증(MFA) 통합</li><li>생체 인식과 같은 추가 인증 요소</li><li>토큰 바인딩(Token Binding)</li></ul></li><li><strong>세션 최적화</strong>:<ul><li>분산 캐시 시스템을 통한 효율적인 세션 관리</li><li>비동기 세션 처리</li></ul></li></ol><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/backend-development/>Backend-Development</a></li><li><a href=https://buenhyden.github.io/tags/api-design/>API-Design</a></li><li><a href=https://buenhyden.github.io/tags/authentication-methods/>Authentication-Methods</a></li><li><a href=https://buenhyden.github.io/tags/token-authentication/>Token-Authentication</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/software-development--engineering/platform-development/backend-development/api-development/token-based-authentication/token-formats/jwt/jwt-vs-session-based-auth/><span class=title>« Prev</span><br><span>jwt vs. Session-based Auth</span>
</a><a class=next href=https://buenhyden.github.io/posts/software-development--engineering/platform-development/backend-development/api-development/token-based-authentication/token-formats/jwt/jwt-vs-openid-connect/><span class=title>Next »</span><br><span>JWT vs. OpenID Connect</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2026 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>