<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>프로시저 (Procedure) | hyunyoun's Blog</title>
<meta name=keywords content="Backend,Database-Systems,RDBMS,Procedure,프로시저"><meta name=description content="데이터베이스 프로시저(Database Procedure)는 데이터베이스 내에 저장되고 실행되는 일련의 SQL 문들의 집합이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/backend/database-systems/rdbms/procedure/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.9a2bbe2d8b5afa9d4df22976abb7b72f1f7f1c467d2b30f03090108f9496ae6c.css integrity="sha256-miu+LYta+p1N8il2q7e3Lx9/HEZ9KzDwMJAQj5SWrmw=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/backend/database-systems/rdbms/procedure/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/backend/database-systems/rdbms/procedure/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="프로시저 (Procedure)"><meta property="og:description" content="데이터베이스 프로시저(Database Procedure)는 데이터베이스 내에 저장되고 실행되는 일련의 SQL 문들의 집합이다."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-10-20T09:05:00+00:00"><meta property="article:modified_time" content="2024-10-20T09:05:00+00:00"><meta property="article:tag" content="Backend"><meta property="article:tag" content="Database-Systems"><meta property="article:tag" content="RDBMS"><meta property="article:tag" content="Procedure"><meta property="article:tag" content="프로시저"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="프로시저 (Procedure)"><meta name=twitter:description content="데이터베이스 프로시저(Database Procedure)는 데이터베이스 내에 저장되고 실행되는 일련의 SQL 문들의 집합이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"posts","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Backend","item":"https://buenhyden.github.io/posts/backend/"},{"@type":"ListItem","position":3,"name":"데이터베이스 (Database)","item":"https://buenhyden.github.io/posts/backend/database-systems/"},{"@type":"ListItem","position":4,"name":"RDBMS","item":"https://buenhyden.github.io/posts/backend/database-systems/rdbms/"},{"@type":"ListItem","position":5,"name":"프로시저 (Procedure)","item":"https://buenhyden.github.io/posts/backend/database-systems/rdbms/procedure/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"프로시저 (Procedure)","name":"프로시저 (Procedure)","description":"데이터베이스 프로시저(Database Procedure)는 데이터베이스 내에 저장되고 실행되는 일련의 SQL 문들의 집합이다.","keywords":["Backend","Database-Systems","RDBMS","Procedure","프로시저"],"articleBody":"프로시저 (Procedure) 데이터베이스 프로시저(Database Procedure)는 데이터베이스 내에 저장되고 실행되는 일련의 SQL 문들의 집합으로,\n자주 사용하는 SQL 명령어들을 하나의 작은 프로그램으로 미리 작성해두고 필요할 때 호출하여 사용하는 것이다.\nSQL Server에서의 프로시저 예시:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 -- 주문 처리를 위한 저장 프로시저 생성 CREATE PROCEDURE ProcessOrder @OrderID int, @CustomerID int, @TotalAmount decimal(10,2) AS BEGIN -- 트랜잭션 시작 BEGIN TRANSACTION TRY -- 주문 정보 입력 INSERT INTO Orders (OrderID, CustomerID, OrderDate, TotalAmount) VALUES (@OrderID, @CustomerID, GETDATE(), @TotalAmount) -- 재고 수량 업데이트 UPDATE Inventory SET Quantity = Quantity - 1 WHERE ProductID IN ( SELECT ProductID FROM OrderDetails WHERE OrderID = @OrderID ) -- 고객 포인트 업데이트 UPDATE Customers SET Points = Points + (@TotalAmount * 0.01) WHERE CustomerID = @CustomerID -- 트랜잭션 완료 COMMIT TRANSACTION CATCH -- 오류 발생 시 롤백 ROLLBACK TRANSACTION -- 오류 정보 반환 SELECT ERROR_MESSAGE() AS ErrorMessage END END -- 프로시저 사용 예시 EXEC ProcessOrder @OrderID = 1001, @CustomerID = 500, @TotalAmount = 150000 프로시저의 주요 특징과 장점 성능 최적화\n프로시저는 최초 실행 시 컴파일되어 캐시에 저장되므로, 반복 실행 시 더 빠른 성능을 제공한다:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 -- 성능 최적화된 프로시저 예시 CREATE PROCEDURE GetCustomerOrders @CustomerID int, @StartDate date, @EndDate date WITH RECOMPILE -- 실행 계획을 매번 최적화 AS BEGIN SET NOCOUNT ON; -- 불필요한 메시지 제거로 성능 향상 SELECT o.OrderID, o.OrderDate, o.TotalAmount, p.ProductName FROM Orders o JOIN OrderDetails od ON o.OrderID = od.OrderID JOIN Products p ON od.ProductID = p.ProductID WHERE o.CustomerID = @CustomerID AND o.OrderDate BETWEEN @StartDate AND @EndDate OPTION (OPTIMIZE FOR UNKNOWN) -- 다양한 매개변수 값에 대해 최적화 END 보안 강화\n프로시저를 통해 데이터베이스 접근을 제어할 수 있다:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 -- 보안이 강화된 프로시저 예시 CREATE PROCEDURE UpdateUserPassword @UserID int, @OldPassword varchar(100), @NewPassword varchar(100) AS BEGIN -- 비밀번호 유효성 검사 IF NOT EXISTS ( SELECT 1 FROM Users WHERE UserID = @UserID AND Password = HASHBYTES('SHA2_256', @OldPassword) ) BEGIN RAISERROR ('Invalid old password', 16, 1) RETURN END -- 새 비밀번호 업데이트 UPDATE Users SET Password = HASHBYTES('SHA2_256', @NewPassword), LastPasswordChange = GETDATE() WHERE UserID = @UserID END 비즈니스 로직 캡슐화\n복잡한 비즈니스 규칙을 프로시저 내에 캡슐화할 수 있다:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 -- 비즈니스 로직이 포함된 프로시저 CREATE PROCEDURE CalculateOrderDiscount @OrderID int, @CustomerType varchar(20), @OrderAmount decimal(10,2), @FinalAmount decimal(10,2) OUTPUT AS BEGIN DECLARE @DiscountRate decimal(5,2) -- 고객 유형별 할인율 적용 SET @DiscountRate = CASE @CustomerType WHEN 'VIP' THEN 0.15 WHEN 'Regular' THEN 0.10 ELSE 0.05 END -- 주문 금액별 추가 할인 IF @OrderAmount \u003e 100000 SET @DiscountRate = @DiscountRate + 0.05 -- 최종 금액 계산 SET @FinalAmount = @OrderAmount * (1 - @DiscountRate) END 유지보수성 향상\n프로시저를 통해 코드의 재사용성과 유지보수성을 높일 수 있다:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 -- 모듈화된 프로시저 예시 CREATE PROCEDURE LogAction @UserID int, @ActionType varchar(50), @Description varchar(500) AS BEGIN INSERT INTO ActivityLog ( UserID, ActionType, Description, LogDate ) VALUES ( @UserID, @ActionType, @Description, GETDATE() ) END -- 다른 프로시저에서 재사용 CREATE PROCEDURE UpdateProduct @ProductID int, @NewPrice decimal(10,2), @UserID int AS BEGIN -- 제품 가격 업데이트 UPDATE Products SET Price = @NewPrice WHERE ProductID = @ProductID -- 작업 로그 기록 EXEC LogAction @UserID = @UserID, @ActionType = 'PRODUCT_UPDATE', @Description = 'Updated product price' END 프로시저 사용 시 주의사항 적절한 예외 처리가 필요하다. 성능 최적화를 고려해야 한다. 보안 측면을 고려한 설계가 필요하다. 버전 관리와 문서화가 중요하다. 프로시저는 데이터베이스 애플리케이션 개발에서 매우 중요한 도구이며, 특히 대규모 시스템에서 성능, 보안, 유지보수성을 향상시키는 데 크게 기여한다.\n프로시저는 일반적으로 CREATE PROCEDURE 문을 사용하여 생성하며, EXEC 또는 CALL 문을 통해 실행할 수 있다.\n프로시저는 데이터 조작, 트랜잭션 관리, 에러 처리 등 다양한 데이터베이스 작업에 활용된다.\n참고 및 출처 ","wordCount":"715","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2024-10-20T09:05:00Z","dateModified":"2024-10-20T09:05:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/backend/database-systems/rdbms/procedure/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>posts</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend/>Backend</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend/database-systems/>데이터베이스 (Database)</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend/database-systems/rdbms/>RDBMS</a></div><h1 class="post-title entry-hint-parent">프로시저 (Procedure)</h1><div class=post-description>데이터베이스 프로시저(Database Procedure)는 데이터베이스 내에 저장되고 실행되는 일련의 SQL 문들의 집합이다.</div><div class=post-meta><span title='2024-10-20 09:05:00 +0000 UTC'>October 20, 2024</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;715 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Backend/Database%20Systems/RDBMS/Procedure.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#프로시저-procedure>프로시저 (Procedure)</a><ul><li><a href=#프로시저의-주요-특징과-장점>프로시저의 주요 특징과 장점</a></li><li><a href=#프로시저-사용-시-주의사항>프로시저 사용 시 주의사항</a></li></ul></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=프로시저-procedure>프로시저 (Procedure)<a hidden class=anchor aria-hidden=true href=#프로시저-procedure>#</a></h2><p>데이터베이스 프로시저(Database Procedure)는 데이터베이스 내에 저장되고 실행되는 일련의 SQL 문들의 집합으로,<br>자주 사용하는 SQL 명령어들을 하나의 작은 프로그램으로 미리 작성해두고 필요할 때 호출하여 사용하는 것이다.</p><p>SQL Server에서의 프로시저 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a>
</span><span class=lnt id=hl-0-21><a class=lnlinks href=#hl-0-21>21</a>
</span><span class=lnt id=hl-0-22><a class=lnlinks href=#hl-0-22>22</a>
</span><span class=lnt id=hl-0-23><a class=lnlinks href=#hl-0-23>23</a>
</span><span class=lnt id=hl-0-24><a class=lnlinks href=#hl-0-24>24</a>
</span><span class=lnt id=hl-0-25><a class=lnlinks href=#hl-0-25>25</a>
</span><span class=lnt id=hl-0-26><a class=lnlinks href=#hl-0-26>26</a>
</span><span class=lnt id=hl-0-27><a class=lnlinks href=#hl-0-27>27</a>
</span><span class=lnt id=hl-0-28><a class=lnlinks href=#hl-0-28>28</a>
</span><span class=lnt id=hl-0-29><a class=lnlinks href=#hl-0-29>29</a>
</span><span class=lnt id=hl-0-30><a class=lnlinks href=#hl-0-30>30</a>
</span><span class=lnt id=hl-0-31><a class=lnlinks href=#hl-0-31>31</a>
</span><span class=lnt id=hl-0-32><a class=lnlinks href=#hl-0-32>32</a>
</span><span class=lnt id=hl-0-33><a class=lnlinks href=#hl-0-33>33</a>
</span><span class=lnt id=hl-0-34><a class=lnlinks href=#hl-0-34>34</a>
</span><span class=lnt id=hl-0-35><a class=lnlinks href=#hl-0-35>35</a>
</span><span class=lnt id=hl-0-36><a class=lnlinks href=#hl-0-36>36</a>
</span><span class=lnt id=hl-0-37><a class=lnlinks href=#hl-0-37>37</a>
</span><span class=lnt id=hl-0-38><a class=lnlinks href=#hl-0-38>38</a>
</span><span class=lnt id=hl-0-39><a class=lnlinks href=#hl-0-39>39</a>
</span><span class=lnt id=hl-0-40><a class=lnlinks href=#hl-0-40>40</a>
</span><span class=lnt id=hl-0-41><a class=lnlinks href=#hl-0-41>41</a>
</span><span class=lnt id=hl-0-42><a class=lnlinks href=#hl-0-42>42</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 주문 처리를 위한 저장 프로시저 생성
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>PROCEDURE</span><span class=w> </span><span class=n>ProcessOrder</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>OrderID</span><span class=w> </span><span class=nb>int</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>CustomerID</span><span class=w> </span><span class=nb>int</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>TotalAmount</span><span class=w> </span><span class=nb>decimal</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=mi>2</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>AS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>BEGIN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>-- 트랜잭션 시작
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=k>BEGIN</span><span class=w> </span><span class=k>TRANSACTION</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>TRY</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>-- 주문 정보 입력
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>        </span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>Orders</span><span class=w> </span><span class=p>(</span><span class=n>OrderID</span><span class=p>,</span><span class=w> </span><span class=n>CustomerID</span><span class=p>,</span><span class=w> </span><span class=n>OrderDate</span><span class=p>,</span><span class=w> </span><span class=n>TotalAmount</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=o>@</span><span class=n>OrderID</span><span class=p>,</span><span class=w> </span><span class=o>@</span><span class=n>CustomerID</span><span class=p>,</span><span class=w> </span><span class=n>GETDATE</span><span class=p>(),</span><span class=w> </span><span class=o>@</span><span class=n>TotalAmount</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>-- 재고 수량 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>        </span><span class=k>UPDATE</span><span class=w> </span><span class=n>Inventory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>SET</span><span class=w> </span><span class=n>Quantity</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Quantity</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>WHERE</span><span class=w> </span><span class=n>ProductID</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>SELECT</span><span class=w> </span><span class=n>ProductID</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>FROM</span><span class=w> </span><span class=n>OrderDetails</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>WHERE</span><span class=w> </span><span class=n>OrderID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>@</span><span class=n>OrderID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>-- 고객 포인트 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>        </span><span class=k>UPDATE</span><span class=w> </span><span class=n>Customers</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>SET</span><span class=w> </span><span class=n>Points</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Points</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=p>(</span><span class=o>@</span><span class=n>TotalAmount</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>01</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>WHERE</span><span class=w> </span><span class=n>CustomerID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>@</span><span class=n>CustomerID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>-- 트랜잭션 완료
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>        </span><span class=k>COMMIT</span><span class=w> </span><span class=k>TRANSACTION</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>CATCH</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>-- 오류 발생 시 롤백
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>        </span><span class=k>ROLLBACK</span><span class=w> </span><span class=k>TRANSACTION</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>-- 오류 정보 반환
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>        </span><span class=k>SELECT</span><span class=w> </span><span class=n>ERROR_MESSAGE</span><span class=p>()</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>ErrorMessage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>END</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>END</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 프로시저 사용 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>EXEC</span><span class=w> </span><span class=n>ProcessOrder</span><span class=w> </span><span class=o>@</span><span class=n>OrderID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1001</span><span class=p>,</span><span class=w> </span><span class=o>@</span><span class=n>CustomerID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>500</span><span class=p>,</span><span class=w> </span><span class=o>@</span><span class=n>TotalAmount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>150000</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=프로시저의-주요-특징과-장점>프로시저의 주요 특징과 장점<a hidden class=anchor aria-hidden=true href=#프로시저의-주요-특징과-장점>#</a></h3><ol><li><p>성능 최적화<br>프로시저는 최초 실행 시 컴파일되어 캐시에 저장되므로, 반복 실행 시 더 빠른 성능을 제공한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14>14</a>
</span><span class=lnt id=hl-1-15><a class=lnlinks href=#hl-1-15>15</a>
</span><span class=lnt id=hl-1-16><a class=lnlinks href=#hl-1-16>16</a>
</span><span class=lnt id=hl-1-17><a class=lnlinks href=#hl-1-17>17</a>
</span><span class=lnt id=hl-1-18><a class=lnlinks href=#hl-1-18>18</a>
</span><span class=lnt id=hl-1-19><a class=lnlinks href=#hl-1-19>19</a>
</span><span class=lnt id=hl-1-20><a class=lnlinks href=#hl-1-20>20</a>
</span><span class=lnt id=hl-1-21><a class=lnlinks href=#hl-1-21>21</a>
</span><span class=lnt id=hl-1-22><a class=lnlinks href=#hl-1-22>22</a>
</span><span class=lnt id=hl-1-23><a class=lnlinks href=#hl-1-23>23</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 성능 최적화된 프로시저 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>PROCEDURE</span><span class=w> </span><span class=n>GetCustomerOrders</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>CustomerID</span><span class=w> </span><span class=nb>int</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>StartDate</span><span class=w> </span><span class=nb>date</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>EndDate</span><span class=w> </span><span class=nb>date</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WITH</span><span class=w> </span><span class=n>RECOMPILE</span><span class=w>  </span><span class=c1>-- 실행 계획을 매번 최적화
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>AS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>BEGIN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>SET</span><span class=w> </span><span class=n>NOCOUNT</span><span class=w> </span><span class=k>ON</span><span class=p>;</span><span class=w>  </span><span class=c1>-- 불필요한 메시지 제거로 성능 향상
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>SELECT</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>o</span><span class=p>.</span><span class=n>OrderID</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>o</span><span class=p>.</span><span class=n>OrderDate</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>o</span><span class=p>.</span><span class=n>TotalAmount</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>p</span><span class=p>.</span><span class=n>ProductName</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>FROM</span><span class=w> </span><span class=n>Orders</span><span class=w> </span><span class=n>o</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>JOIN</span><span class=w> </span><span class=n>OrderDetails</span><span class=w> </span><span class=n>od</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=n>OrderID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>od</span><span class=p>.</span><span class=n>OrderID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>JOIN</span><span class=w> </span><span class=n>Products</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>od</span><span class=p>.</span><span class=n>ProductID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>ProductID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>WHERE</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>o</span><span class=p>.</span><span class=n>CustomerID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>@</span><span class=n>CustomerID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>AND</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=n>OrderDate</span><span class=w> </span><span class=k>BETWEEN</span><span class=w> </span><span class=o>@</span><span class=n>StartDate</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=o>@</span><span class=n>EndDate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>OPTION</span><span class=w> </span><span class=p>(</span><span class=n>OPTIMIZE</span><span class=w> </span><span class=k>FOR</span><span class=w> </span><span class=k>UNKNOWN</span><span class=p>)</span><span class=w>  </span><span class=c1>-- 다양한 매개변수 값에 대해 최적화
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>END</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li><li><p>보안 강화<br>프로시저를 통해 데이터베이스 접근을 제어할 수 있다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span><span class=lnt id=hl-2-20><a class=lnlinks href=#hl-2-20>20</a>
</span><span class=lnt id=hl-2-21><a class=lnlinks href=#hl-2-21>21</a>
</span><span class=lnt id=hl-2-22><a class=lnlinks href=#hl-2-22>22</a>
</span><span class=lnt id=hl-2-23><a class=lnlinks href=#hl-2-23>23</a>
</span><span class=lnt id=hl-2-24><a class=lnlinks href=#hl-2-24>24</a>
</span><span class=lnt id=hl-2-25><a class=lnlinks href=#hl-2-25>25</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 보안이 강화된 프로시저 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>PROCEDURE</span><span class=w> </span><span class=n>UpdateUserPassword</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>UserID</span><span class=w> </span><span class=nb>int</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>OldPassword</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>100</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>NewPassword</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>AS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>BEGIN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>-- 비밀번호 유효성 검사
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>SELECT</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>Users</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>WHERE</span><span class=w> </span><span class=n>UserID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>@</span><span class=n>UserID</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>AND</span><span class=w> </span><span class=n>Password</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>HASHBYTES</span><span class=p>(</span><span class=s1>&#39;SHA2_256&#39;</span><span class=p>,</span><span class=w> </span><span class=o>@</span><span class=n>OldPassword</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>BEGIN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>RAISERROR</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;Invalid old password&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>16</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>RETURN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>END</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>-- 새 비밀번호 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=k>UPDATE</span><span class=w> </span><span class=n>Users</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>SET</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Password</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>HASHBYTES</span><span class=p>(</span><span class=s1>&#39;SHA2_256&#39;</span><span class=p>,</span><span class=w> </span><span class=o>@</span><span class=n>NewPassword</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>LastPasswordChange</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>GETDATE</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>WHERE</span><span class=w> </span><span class=n>UserID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>@</span><span class=n>UserID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>END</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li><li><p>비즈니스 로직 캡슐화<br>복잡한 비즈니스 규칙을 프로시저 내에 캡슐화할 수 있다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span><span class=lnt id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a>
</span><span class=lnt id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a>
</span><span class=lnt id=hl-3-17><a class=lnlinks href=#hl-3-17>17</a>
</span><span class=lnt id=hl-3-18><a class=lnlinks href=#hl-3-18>18</a>
</span><span class=lnt id=hl-3-19><a class=lnlinks href=#hl-3-19>19</a>
</span><span class=lnt id=hl-3-20><a class=lnlinks href=#hl-3-20>20</a>
</span><span class=lnt id=hl-3-21><a class=lnlinks href=#hl-3-21>21</a>
</span><span class=lnt id=hl-3-22><a class=lnlinks href=#hl-3-22>22</a>
</span><span class=lnt id=hl-3-23><a class=lnlinks href=#hl-3-23>23</a>
</span><span class=lnt id=hl-3-24><a class=lnlinks href=#hl-3-24>24</a>
</span><span class=lnt id=hl-3-25><a class=lnlinks href=#hl-3-25>25</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 비즈니스 로직이 포함된 프로시저
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>PROCEDURE</span><span class=w> </span><span class=n>CalculateOrderDiscount</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>OrderID</span><span class=w> </span><span class=nb>int</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>CustomerType</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>20</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>OrderAmount</span><span class=w> </span><span class=nb>decimal</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=mi>2</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>FinalAmount</span><span class=w> </span><span class=nb>decimal</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=mi>2</span><span class=p>)</span><span class=w> </span><span class=k>OUTPUT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>AS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>BEGIN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>DECLARE</span><span class=w> </span><span class=o>@</span><span class=n>DiscountRate</span><span class=w> </span><span class=nb>decimal</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=mi>2</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>-- 고객 유형별 할인율 적용
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=k>SET</span><span class=w> </span><span class=o>@</span><span class=n>DiscountRate</span><span class=w> </span><span class=o>=</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>CASE</span><span class=w> </span><span class=o>@</span><span class=n>CustomerType</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>WHEN</span><span class=w> </span><span class=s1>&#39;VIP&#39;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>15</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>WHEN</span><span class=w> </span><span class=s1>&#39;Regular&#39;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>10</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>ELSE</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>05</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>END</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>-- 주문 금액별 추가 할인
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=k>IF</span><span class=w> </span><span class=o>@</span><span class=n>OrderAmount</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>100000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>SET</span><span class=w> </span><span class=o>@</span><span class=n>DiscountRate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>@</span><span class=n>DiscountRate</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>05</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>-- 최종 금액 계산
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=k>SET</span><span class=w> </span><span class=o>@</span><span class=n>FinalAmount</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>@</span><span class=n>OrderAmount</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=o>@</span><span class=n>DiscountRate</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>END</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li><li><p>유지보수성 향상<br>프로시저를 통해 코드의 재사용성과 유지보수성을 높일 수 있다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span><span class=lnt id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a>
</span><span class=lnt id=hl-4-16><a class=lnlinks href=#hl-4-16>16</a>
</span><span class=lnt id=hl-4-17><a class=lnlinks href=#hl-4-17>17</a>
</span><span class=lnt id=hl-4-18><a class=lnlinks href=#hl-4-18>18</a>
</span><span class=lnt id=hl-4-19><a class=lnlinks href=#hl-4-19>19</a>
</span><span class=lnt id=hl-4-20><a class=lnlinks href=#hl-4-20>20</a>
</span><span class=lnt id=hl-4-21><a class=lnlinks href=#hl-4-21>21</a>
</span><span class=lnt id=hl-4-22><a class=lnlinks href=#hl-4-22>22</a>
</span><span class=lnt id=hl-4-23><a class=lnlinks href=#hl-4-23>23</a>
</span><span class=lnt id=hl-4-24><a class=lnlinks href=#hl-4-24>24</a>
</span><span class=lnt id=hl-4-25><a class=lnlinks href=#hl-4-25>25</a>
</span><span class=lnt id=hl-4-26><a class=lnlinks href=#hl-4-26>26</a>
</span><span class=lnt id=hl-4-27><a class=lnlinks href=#hl-4-27>27</a>
</span><span class=lnt id=hl-4-28><a class=lnlinks href=#hl-4-28>28</a>
</span><span class=lnt id=hl-4-29><a class=lnlinks href=#hl-4-29>29</a>
</span><span class=lnt id=hl-4-30><a class=lnlinks href=#hl-4-30>30</a>
</span><span class=lnt id=hl-4-31><a class=lnlinks href=#hl-4-31>31</a>
</span><span class=lnt id=hl-4-32><a class=lnlinks href=#hl-4-32>32</a>
</span><span class=lnt id=hl-4-33><a class=lnlinks href=#hl-4-33>33</a>
</span><span class=lnt id=hl-4-34><a class=lnlinks href=#hl-4-34>34</a>
</span><span class=lnt id=hl-4-35><a class=lnlinks href=#hl-4-35>35</a>
</span><span class=lnt id=hl-4-36><a class=lnlinks href=#hl-4-36>36</a>
</span><span class=lnt id=hl-4-37><a class=lnlinks href=#hl-4-37>37</a>
</span><span class=lnt id=hl-4-38><a class=lnlinks href=#hl-4-38>38</a>
</span><span class=lnt id=hl-4-39><a class=lnlinks href=#hl-4-39>39</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 모듈화된 프로시저 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>PROCEDURE</span><span class=w> </span><span class=n>LogAction</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>UserID</span><span class=w> </span><span class=nb>int</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>ActionType</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>50</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>Description</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>500</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>AS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>BEGIN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>ActivityLog</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>UserID</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ActionType</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Description</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>LogDate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=o>@</span><span class=n>UserID</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=o>@</span><span class=n>ActionType</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=o>@</span><span class=n>Description</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>GETDATE</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>END</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 다른 프로시저에서 재사용
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>PROCEDURE</span><span class=w> </span><span class=n>UpdateProduct</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>ProductID</span><span class=w> </span><span class=nb>int</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>NewPrice</span><span class=w> </span><span class=nb>decimal</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=mi>2</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>UserID</span><span class=w> </span><span class=nb>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>AS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>BEGIN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>-- 제품 가격 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=k>UPDATE</span><span class=w> </span><span class=n>Products</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>SET</span><span class=w> </span><span class=n>Price</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>@</span><span class=n>NewPrice</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>WHERE</span><span class=w> </span><span class=n>ProductID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>@</span><span class=n>ProductID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>-- 작업 로그 기록
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=k>EXEC</span><span class=w> </span><span class=n>LogAction</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=o>@</span><span class=n>UserID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>@</span><span class=n>UserID</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=o>@</span><span class=n>ActionType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;PRODUCT_UPDATE&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=o>@</span><span class=n>Description</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Updated product price&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>END</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li></ol><h3 id=프로시저-사용-시-주의사항>프로시저 사용 시 주의사항<a hidden class=anchor aria-hidden=true href=#프로시저-사용-시-주의사항>#</a></h3><ol><li>적절한 예외 처리가 필요하다.</li><li>성능 최적화를 고려해야 한다.</li><li>보안 측면을 고려한 설계가 필요하다.</li><li>버전 관리와 문서화가 중요하다.</li></ol><p>프로시저는 데이터베이스 애플리케이션 개발에서 매우 중요한 도구이며, 특히 대규모 시스템에서 성능, 보안, 유지보수성을 향상시키는 데 크게 기여한다.</p><p>프로시저는 일반적으로 CREATE PROCEDURE 문을 사용하여 생성하며, EXEC 또는 CALL 문을 통해 실행할 수 있다.<br>프로시저는 데이터 조작, 트랜잭션 관리, 에러 처리 등 다양한 데이터베이스 작업에 활용된다.</p><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/backend/>Backend</a></li><li><a href=https://buenhyden.github.io/tags/database-systems/>Database-Systems</a></li><li><a href=https://buenhyden.github.io/tags/rdbms/>RDBMS</a></li><li><a href=https://buenhyden.github.io/tags/procedure/>Procedure</a></li><li><a href=https://buenhyden.github.io/tags/%ED%94%84%EB%A1%9C%EC%8B%9C%EC%A0%80/>프로시저</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/data-structure-and-algorithm/algorithm-design/algorithm-design-techniques/dynamic-programming/tabulation/><span class=title>« Prev</span><br><span>테이블레이션(Tabulation)</span>
</a><a class=next href=https://buenhyden.github.io/posts/system-design/infrastructure/cloud/iaas-paas-saas/><span class=title>Next »</span><br><span>IaaS PaaS SaaS</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>