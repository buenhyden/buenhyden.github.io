<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>레플리케이션 (replication) | hyunyoun's Blog</title>
<meta name=keywords content="Backend,Database-Systems,Database-Optimization,레플리케이션"><meta name=description content="하나의 데이터베이스(마스터 또는 프라이머리)의 데이터를 다른 데이터베이스(슬레이브 또는 세컨더리)로 복제하는 프로세스"><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/backend/database-systems/database-optimization/replication/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.9a2bbe2d8b5afa9d4df22976abb7b72f1f7f1c467d2b30f03090108f9496ae6c.css integrity="sha256-miu+LYta+p1N8il2q7e3Lx9/HEZ9KzDwMJAQj5SWrmw=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/backend/database-systems/database-optimization/replication/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/backend/database-systems/database-optimization/replication/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="레플리케이션 (replication)"><meta property="og:description" content="하나의 데이터베이스(마스터 또는 프라이머리)의 데이터를 다른 데이터베이스(슬레이브 또는 세컨더리)로 복제하는 프로세스"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-03T06:27:00+00:00"><meta property="article:modified_time" content="2024-12-03T06:27:00+00:00"><meta property="article:tag" content="Backend"><meta property="article:tag" content="Database-Systems"><meta property="article:tag" content="Database-Optimization"><meta property="article:tag" content="레플리케이션"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="레플리케이션 (replication)"><meta name=twitter:description content="하나의 데이터베이스(마스터 또는 프라이머리)의 데이터를 다른 데이터베이스(슬레이브 또는 세컨더리)로 복제하는 프로세스"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"posts","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Backend","item":"https://buenhyden.github.io/posts/backend/"},{"@type":"ListItem","position":3,"name":"데이터베이스 (Database)","item":"https://buenhyden.github.io/posts/backend/database-systems/"},{"@type":"ListItem","position":4,"name":"데이터베이스 최적화 (Database Optimization)","item":"https://buenhyden.github.io/posts/backend/database-systems/database-optimization/"},{"@type":"ListItem","position":5,"name":"레플리케이션 (replication)","item":"https://buenhyden.github.io/posts/backend/database-systems/database-optimization/replication/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"레플리케이션 (replication)","name":"레플리케이션 (replication)","description":"하나의 데이터베이스(마스터 또는 프라이머리)의 데이터를 다른 데이터베이스(슬레이브 또는 세컨더리)로 복제하는 프로세스","keywords":["Backend","Database-Systems","Database-Optimization","레플리케이션"],"articleBody":"레플리케이션 (replication) 레플리케이션은 데이터베이스의 고가용성과 확장성을 확보하는 핵심 기술입니다.\n레플리케이션은 하나의 데이터베이스(마스터 또는 프라이머리)의 데이터를 다른 데이터베이스(슬레이브 또는 세컨더리)로 복제하는 프로세스.\n이는 마치 중요한 문서를 여러 장소에 백업해두는 것과 유사하다.\n레플리케이션을 통해 데이터의 안정성을 높이고, 읽기 성능을 향상시킬 수 있다.\n이러한 레플리케이션 시스템을 구축하고 운영할 때는 다음 사항들을 고려해야 한다:\n안정성: 네트워크 장애나 하드웨어 문제에 대비한 복구 절차를 마련해야 한다. 확장성: 시스템 성장에 따라 슬레이브를 추가하거나 제거할 수 있어야 한다. 모니터링: 지속적인 모니터링을 통해 문제를 조기에 발견하고 대응해야 한다. 데이터 일관성: 복제 지연이나 충돌 상황에서도 데이터 일관성을 유지할 수 있어야 한다. 작동 원리 Source 서버에서 데이터 변경이 발생하면 바이너리 로그(Binary Log)에 기록된다. Replica 서버의 I/O 쓰레드가 Source 서버의 바이너리 로그를 읽어와 Relay 로그에 복사한다. Replica 서버의 SQL 쓰레드가 Relay 로그의 내용을 자신의 데이터베이스에 적용한다. 레플리케이션의 장점 부하 분산: 읽기 작업을 Replica 서버로 분산시켜 성능을 향상시킨다. 데이터 안정성: 여러 서버에 데이터를 복제하여 안정성을 높인다. 확장성: 읽기 작업을 처리하는 Replica 서버를 쉽게 추가할 수 있다. 데이터 분석: Replica 서버를 통해 실시간 데이터에 영향을 주지 않고 분석 작업을 수행할 수 있다. 레플리케이션의 단점 복제 지연: Source와 Replica 서버 간 데이터 동기화에 시간이 걸릴 수 있다. 추가 리소스 필요: 여러 서버를 운영해야 하므로 추가적인 하드웨어와 관리 비용이 발생한다. 일관성 문제: 지연 시간으로 인해 일시적으로 데이터 불일치가 발생할 수 있다. 레플리케이션 유형 비동기식 레플리케이션: Source 서버의 변경사항을 비동기적으로 Replica에 전달한다. 동기식 레플리케이션: Source 서버의 변경이 Replica에 적용될 때까지 기다린다. 반동기식 레플리케이션: 동기식과 비동기식의 중간 형태로, 일부 Replica의 응답을 기다린다. 레플리케이션의 주요 유형 마스터-슬레이브 레플리케이션:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 -- 마스터 데이터베이스 설정 SET GLOBAL server_id = 1; SET GLOBAL binlog_format = 'ROW'; CREATE USER 'repl_user'@'%' IDENTIFIED BY 'password'; GRANT REPLICATION SLAVE ON *.* TO 'repl_user'@'%'; -- 슬레이브 데이터베이스 설정 CHANGE MASTER TO MASTER_HOST='master_host', MASTER_USER='repl_user', MASTER_PASSWORD='password', MASTER_LOG_FILE='mysql-bin', MASTER_LOG_POS=0; START SLAVE; 마스터-마스터 레플리케이션:\n1 2 3 4 5 6 7 8 9 -- 첫 번째 마스터 설정 SET GLOBAL server_id = 1; SET GLOBAL auto_increment_increment = 2; SET GLOBAL auto_increment_offset = 1; -- 두 번째 마스터 설정 SET GLOBAL server_id = 2; SET GLOBAL auto_increment_increment = 2; SET GLOBAL auto_increment_offset = 2; 레플리케이션 모니터링 레플리케이션 상태를 지속적으로 모니터링하는 것이 중요하다:\n1 2 3 4 5 6 7 -- 슬레이브 상태 확인 SHOW SLAVE STATUS\\G -- 레플리케이션 지연 확인 SELECT TIMESTAMPDIFF(SECOND, (SELECT MAX(Created) FROM mysql.time_zone), NOW()) AS replication_lag; 레플리케이션 장애 대응 장애 상황에 대비한 복구 절차를 준비해야 한다:\n1 2 3 4 5 6 7 8 9 -- 슬레이브에서 오류 발생 시 STOP SLAVE; SET GLOBAL SQL_SLAVE_SKIP_COUNTER = 1; START SLAVE; -- 마스터 장애 시 슬레이브를 마스터로 승격 STOP SLAVE; RESET MASTER; SET GLOBAL read_only = OFF; 레플리케이션 지연 관리 레플리케이션 지연을 최소화하기 위한 전략들:\n1 2 3 4 5 6 7 8 9 10 def handle_replication_lag(): # 레플리케이션 지연 확인 lag = check_replication_lag() if lag \u003e threshold: # 읽기 트래픽을 다른 슬레이브로 전환 redirect_read_traffic() # 지연된 슬레이브 최적화 optimize_slave_performance() 데이터 일관성 보장 레플리케이션 환경에서 데이터 일관성을 유지하는 것이 중요하다:\n1 2 3 4 5 6 7 8 9 10 11 12 13 def ensure_data_consistency(): # 트랜잭션 시작 with transaction.atomic(): # 마스터에 쓰기 수행 master_db.execute_write() # 슬레이브 동기화 대기 wait_for_slave_sync() # 읽기 작업 수행 result = slave_db.execute_read() return result 고가용성 설계 레플리케이션을 활용한 고가용성 아키텍처 구성:\n1 2 3 4 5 6 7 8 9 10 11 12 13 class DatabaseCluster: def __init__(self): self.master = Database('master') self.slaves = [Database('slave1'), Database('slave2')] self.monitor = ReplicationMonitor() def handle_master_failure(self): # 새로운 마스터 선출 new_master = select_new_master() # 슬레이브들의 복제 대상 변경 for slave in self.slaves: slave.change_master(new_master) 성능 최적화 레플리케이션 환경에서의 성능 최적화 전략:\n1 2 3 4 5 6 7 8 9 10 11 12 def optimize_replication_performance(): # 바이너리 로그 최적화 configure_binlog_format() # 네트워크 대역폭 관리 manage_network_bandwidth() # 디스크 I/O 최적화 optimize_disk_io() # 슬레이브 병렬 복제 설정 configure_parallel_replication() 참고 및 출처 ","wordCount":"619","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2024-12-03T06:27:00Z","dateModified":"2024-12-03T06:27:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/backend/database-systems/database-optimization/replication/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>posts</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend/>Backend</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend/database-systems/>데이터베이스 (Database)</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/backend/database-systems/database-optimization/>데이터베이스 최적화 (Database Optimization)</a></div><h1 class="post-title entry-hint-parent">레플리케이션 (replication)</h1><div class=post-description>하나의 데이터베이스(마스터 또는 프라이머리)의 데이터를 다른 데이터베이스(슬레이브 또는 세컨더리)로 복제하는 프로세스</div><div class=post-meta><span title='2024-12-03 06:27:00 +0000 UTC'>December 3, 2024</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;619 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Backend/Database%20Systems/Database%20Optimization/replication.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#레플리케이션-replication>레플리케이션 (replication)</a><ul><li><a href=#작동-원리>작동 원리</a></li><li><a href=#레플리케이션의-장점>레플리케이션의 장점</a></li><li><a href=#레플리케이션의-단점>레플리케이션의 단점</a></li><li><a href=#레플리케이션-유형>레플리케이션 유형</a></li><li><a href=#레플리케이션의-주요-유형>레플리케이션의 주요 유형</a></li><li><a href=#레플리케이션-모니터링>레플리케이션 모니터링</a></li><li><a href=#레플리케이션-장애-대응>레플리케이션 장애 대응</a></li><li><a href=#레플리케이션-지연-관리>레플리케이션 지연 관리</a></li><li><a href=#데이터-일관성-보장>데이터 일관성 보장</a></li><li><a href=#고가용성-설계>고가용성 설계</a></li><li><a href=#성능-최적화>성능 최적화</a></li></ul></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=레플리케이션-replication>레플리케이션 (replication)<a hidden class=anchor aria-hidden=true href=#레플리케이션-replication>#</a></h2><p>레플리케이션은 데이터베이스의 고가용성과 확장성을 확보하는 핵심 기술입니다.</p><p>레플리케이션은 하나의 데이터베이스(마스터 또는 프라이머리)의 데이터를 다른 데이터베이스(슬레이브 또는 세컨더리)로 복제하는 프로세스.<br>이는 마치 중요한 문서를 여러 장소에 백업해두는 것과 유사하다.<br>레플리케이션을 통해 데이터의 안정성을 높이고, 읽기 성능을 향상시킬 수 있다.</p><p>이러한 레플리케이션 시스템을 구축하고 운영할 때는 다음 사항들을 고려해야 한다:</p><ol><li>안정성: 네트워크 장애나 하드웨어 문제에 대비한 복구 절차를 마련해야 한다.</li><li>확장성: 시스템 성장에 따라 슬레이브를 추가하거나 제거할 수 있어야 한다.</li><li>모니터링: 지속적인 모니터링을 통해 문제를 조기에 발견하고 대응해야 한다.</li><li>데이터 일관성: 복제 지연이나 충돌 상황에서도 데이터 일관성을 유지할 수 있어야 한다.</li></ol><h3 id=작동-원리>작동 원리<a hidden class=anchor aria-hidden=true href=#작동-원리>#</a></h3><ol><li>Source 서버에서 데이터 변경이 발생하면 바이너리 로그(Binary Log)에 기록된다.</li><li>Replica 서버의 I/O 쓰레드가 Source 서버의 바이너리 로그를 읽어와 Relay 로그에 복사한다.</li><li>Replica 서버의 SQL 쓰레드가 Relay 로그의 내용을 자신의 데이터베이스에 적용한다.</li></ol><h3 id=레플리케이션의-장점>레플리케이션의 장점<a hidden class=anchor aria-hidden=true href=#레플리케이션의-장점>#</a></h3><ol><li>부하 분산: 읽기 작업을 Replica 서버로 분산시켜 성능을 향상시킨다.</li><li>데이터 안정성: 여러 서버에 데이터를 복제하여 안정성을 높인다.</li><li>확장성: 읽기 작업을 처리하는 Replica 서버를 쉽게 추가할 수 있다.</li><li>데이터 분석: Replica 서버를 통해 실시간 데이터에 영향을 주지 않고 분석 작업을 수행할 수 있다.</li></ol><h3 id=레플리케이션의-단점>레플리케이션의 단점<a hidden class=anchor aria-hidden=true href=#레플리케이션의-단점>#</a></h3><ol><li>복제 지연: Source와 Replica 서버 간 데이터 동기화에 시간이 걸릴 수 있다.</li><li>추가 리소스 필요: 여러 서버를 운영해야 하므로 추가적인 하드웨어와 관리 비용이 발생한다.</li><li>일관성 문제: 지연 시간으로 인해 일시적으로 데이터 불일치가 발생할 수 있다.</li></ol><h3 id=레플리케이션-유형>레플리케이션 유형<a hidden class=anchor aria-hidden=true href=#레플리케이션-유형>#</a></h3><ol><li>비동기식 레플리케이션: Source 서버의 변경사항을 비동기적으로 Replica에 전달한다.</li><li>동기식 레플리케이션: Source 서버의 변경이 Replica에 적용될 때까지 기다린다.</li><li>반동기식 레플리케이션: 동기식과 비동기식의 중간 형태로, 일부 Replica의 응답을 기다린다.</li></ol><h3 id=레플리케이션의-주요-유형>레플리케이션의 주요 유형<a hidden class=anchor aria-hidden=true href=#레플리케이션의-주요-유형>#</a></h3><ol><li><p>마스터-슬레이브 레플리케이션:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 마스터 데이터베이스 설정
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SET</span><span class=w> </span><span class=k>GLOBAL</span><span class=w> </span><span class=n>server_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SET</span><span class=w> </span><span class=k>GLOBAL</span><span class=w> </span><span class=n>binlog_format</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;ROW&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=k>USER</span><span class=w> </span><span class=s1>&#39;repl_user&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=w> </span><span class=n>IDENTIFIED</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=s1>&#39;password&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GRANT</span><span class=w> </span><span class=n>REPLICATION</span><span class=w> </span><span class=n>SLAVE</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=o>*</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=s1>&#39;repl_user&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 슬레이브 데이터베이스 설정
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>CHANGE</span><span class=w> </span><span class=n>MASTER</span><span class=w> </span><span class=k>TO</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>MASTER_HOST</span><span class=o>=</span><span class=s1>&#39;master_host&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>MASTER_USER</span><span class=o>=</span><span class=s1>&#39;repl_user&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>MASTER_PASSWORD</span><span class=o>=</span><span class=s1>&#39;password&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>MASTER_LOG_FILE</span><span class=o>=</span><span class=s1>&#39;mysql-bin&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>MASTER_LOG_POS</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>START</span><span class=w> </span><span class=n>SLAVE</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li><li><p>마스터-마스터 레플리케이션:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5>5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6>6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7>7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8>8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 첫 번째 마스터 설정
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SET</span><span class=w> </span><span class=k>GLOBAL</span><span class=w> </span><span class=n>server_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SET</span><span class=w> </span><span class=k>GLOBAL</span><span class=w> </span><span class=n>auto_increment_increment</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SET</span><span class=w> </span><span class=k>GLOBAL</span><span class=w> </span><span class=n>auto_increment_offset</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 두 번째 마스터 설정
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SET</span><span class=w> </span><span class=k>GLOBAL</span><span class=w> </span><span class=n>server_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SET</span><span class=w> </span><span class=k>GLOBAL</span><span class=w> </span><span class=n>auto_increment_increment</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SET</span><span class=w> </span><span class=k>GLOBAL</span><span class=w> </span><span class=n>auto_increment_offset</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li></ol><h3 id=레플리케이션-모니터링>레플리케이션 모니터링<a hidden class=anchor aria-hidden=true href=#레플리케이션-모니터링>#</a></h3><p>레플리케이션 상태를 지속적으로 모니터링하는 것이 중요하다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2>2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3>3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4>4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5>5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6>6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 슬레이브 상태 확인
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SHOW</span><span class=w> </span><span class=n>SLAVE</span><span class=w> </span><span class=n>STATUS</span><span class=err>\</span><span class=k>G</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 레플리케이션 지연 확인
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>TIMESTAMPDIFF</span><span class=p>(</span><span class=k>SECOND</span><span class=p>,</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>(</span><span class=k>SELECT</span><span class=w> </span><span class=k>MAX</span><span class=p>(</span><span class=n>Created</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>mysql</span><span class=p>.</span><span class=n>time_zone</span><span class=p>),</span><span class=w> </span><span class=n>NOW</span><span class=p>())</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>AS</span><span class=w> </span><span class=n>replication_lag</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=레플리케이션-장애-대응>레플리케이션 장애 대응<a hidden class=anchor aria-hidden=true href=#레플리케이션-장애-대응>#</a></h3><p>장애 상황에 대비한 복구 절차를 준비해야 한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2>2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3>3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4>4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5>5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6>6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7>7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8>8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 슬레이브에서 오류 발생 시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>STOP</span><span class=w> </span><span class=n>SLAVE</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SET</span><span class=w> </span><span class=k>GLOBAL</span><span class=w> </span><span class=n>SQL_SLAVE_SKIP_COUNTER</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>START</span><span class=w> </span><span class=n>SLAVE</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 마스터 장애 시 슬레이브를 마스터로 승격
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>STOP</span><span class=w> </span><span class=n>SLAVE</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>RESET</span><span class=w> </span><span class=n>MASTER</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SET</span><span class=w> </span><span class=k>GLOBAL</span><span class=w> </span><span class=n>read_only</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>OFF</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=레플리케이션-지연-관리>레플리케이션 지연 관리<a hidden class=anchor aria-hidden=true href=#레플리케이션-지연-관리>#</a></h3><p>레플리케이션 지연을 최소화하기 위한 전략들:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>handle_replication_lag</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1># 레플리케이션 지연 확인</span>
</span></span><span class=line><span class=cl>    <span class=n>lag</span> <span class=o>=</span> <span class=n>check_replication_lag</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>lag</span> <span class=o>&gt;</span> <span class=n>threshold</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 읽기 트래픽을 다른 슬레이브로 전환</span>
</span></span><span class=line><span class=cl>        <span class=n>redirect_read_traffic</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 지연된 슬레이브 최적화</span>
</span></span><span class=line><span class=cl>        <span class=n>optimize_slave_performance</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=데이터-일관성-보장>데이터 일관성 보장<a hidden class=anchor aria-hidden=true href=#데이터-일관성-보장>#</a></h3><p>레플리케이션 환경에서 데이터 일관성을 유지하는 것이 중요하다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>ensure_data_consistency</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1># 트랜잭션 시작</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=n>transaction</span><span class=o>.</span><span class=n>atomic</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=c1># 마스터에 쓰기 수행</span>
</span></span><span class=line><span class=cl>        <span class=n>master_db</span><span class=o>.</span><span class=n>execute_write</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 슬레이브 동기화 대기</span>
</span></span><span class=line><span class=cl>        <span class=n>wait_for_slave_sync</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 읽기 작업 수행</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=n>slave_db</span><span class=o>.</span><span class=n>execute_read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=고가용성-설계>고가용성 설계<a hidden class=anchor aria-hidden=true href=#고가용성-설계>#</a></h3><p>레플리케이션을 활용한 고가용성 아키텍처 구성:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>DatabaseCluster</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>master</span> <span class=o>=</span> <span class=n>Database</span><span class=p>(</span><span class=s1>&#39;master&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>slaves</span> <span class=o>=</span> <span class=p>[</span><span class=n>Database</span><span class=p>(</span><span class=s1>&#39;slave1&#39;</span><span class=p>),</span> <span class=n>Database</span><span class=p>(</span><span class=s1>&#39;slave2&#39;</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>monitor</span> <span class=o>=</span> <span class=n>ReplicationMonitor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>handle_master_failure</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 새로운 마스터 선출</span>
</span></span><span class=line><span class=cl>        <span class=n>new_master</span> <span class=o>=</span> <span class=n>select_new_master</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 슬레이브들의 복제 대상 변경</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>slave</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>slaves</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>slave</span><span class=o>.</span><span class=n>change_master</span><span class=p>(</span><span class=n>new_master</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=성능-최적화>성능 최적화<a hidden class=anchor aria-hidden=true href=#성능-최적화>#</a></h3><p>레플리케이션 환경에서의 성능 최적화 전략:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>optimize_replication_performance</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1># 바이너리 로그 최적화</span>
</span></span><span class=line><span class=cl>    <span class=n>configure_binlog_format</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 네트워크 대역폭 관리</span>
</span></span><span class=line><span class=cl>    <span class=n>manage_network_bandwidth</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 디스크 I/O 최적화</span>
</span></span><span class=line><span class=cl>    <span class=n>optimize_disk_io</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 슬레이브 병렬 복제 설정</span>
</span></span><span class=line><span class=cl>    <span class=n>configure_parallel_replication</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/backend/>Backend</a></li><li><a href=https://buenhyden.github.io/tags/database-systems/>Database-Systems</a></li><li><a href=https://buenhyden.github.io/tags/database-optimization/>Database-Optimization</a></li><li><a href=https://buenhyden.github.io/tags/%EB%A0%88%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98/>레플리케이션</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/backend/database-systems/distributed-database/database-clustering/><span class=title>« Prev</span><br><span>데이터베이스 클러스터링(Database Clustering)</span>
</a><a class=next href=https://buenhyden.github.io/posts/backend/database-systems/distributed-database/sharding/><span class=title>Next »</span><br><span>샤딩 (sharding)</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>