<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>쿼리 최적화 (Query Optimization) | hyunyoun's Blog</title>
<meta name=keywords content="Databases,SQL,Indexes,Query-Optimization"><meta name=description content="데이터베이스 시스템의 성능을 향상시키고 효율성을 높이기 위한 중요한 프로세스"><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/backend/databases/rdbms/sql/query-optimization/query-optimization/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.8762af4fa9ee176c57f72565b721f234162fc7a9c882a271e0a1f68c4e89fb34.css integrity="sha256-h2KvT6nuF2xX9yVltyHyNBYvx6nIgqJx4KH2jE6J+zQ=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/backend/databases/rdbms/sql/query-optimization/query-optimization/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/backend/databases/rdbms/sql/query-optimization/query-optimization/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="쿼리 최적화 (Query Optimization)"><meta property="og:description" content="데이터베이스 시스템의 성능을 향상시키고 효율성을 높이기 위한 중요한 프로세스"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-10-22T06:23:00+00:00"><meta property="article:modified_time" content="2024-10-22T06:23:00+00:00"><meta property="article:tag" content="Databases"><meta property="article:tag" content="SQL"><meta property="article:tag" content="Indexes"><meta property="article:tag" content="Query-Optimization"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="쿼리 최적화 (Query Optimization)"><meta name=twitter:description content="데이터베이스 시스템의 성능을 향상시키고 효율성을 높이기 위한 중요한 프로세스"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"쿼리 최적화 (Query Optimization)","item":"https://buenhyden.github.io/posts/backend/databases/rdbms/sql/query-optimization/query-optimization/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"쿼리 최적화 (Query Optimization)","name":"쿼리 최적화 (Query Optimization)","description":"데이터베이스 시스템의 성능을 향상시키고 효율성을 높이기 위한 중요한 프로세스","keywords":["Databases","SQL","Indexes","Query-Optimization"],"articleBody":"쿼리 최적화 (Query Optimization) 데이터베이스 쿼리 최적화는 데이터베이스 시스템의 성능을 향상시키고 효율성을 높이기 위한 중요한 프로세스이다.\n쿼리 최적화의 목적 쿼리 응답 시간 단축 시스템 자원 사용 효율성 증대 전반적인 데이터베이스 성능 향상 사용자 경험 개선 주요 최적화 기법 인덱스 최적화 적절한 인덱스 생성 및 관리 복합 인덱스 활용 선택도가 높은 컬럼에 인덱스 생성 불필요한 인덱스 제거 1 2 3 4 5 6 7 8 9 -- 자주 사용되는 조건절에 대한 인덱스 생성 CREATE INDEX idx_orders_amount_date ON orders(total_amount, order_date); -- 위 인덱스를 활용하는 최적화된 쿼리 SELECT customers.name, orders.order_date, orders.total_amount FROM orders -- 인덱스를 가진 테이블을 먼저 참조 JOIN customers ON customers.id = orders.customer_id WHERE orders.total_amount \u003e 1000 ORDER BY orders.order_date DESC; 쿼리 재작성 복잡한 쿼리 단순화 서브쿼리 최소화 및 조인으로 대체 WHERE 절 최적화 필요한 컬럼만 선택 (SELECT *) 테이블 조인 순서와 조인 유형을 적절히 선택 1 2 3 4 5 6 7 8 9 10 11 12 13 14 -- 비효율적인 서브쿼리 SELECT * FROM customers WHERE id IN ( SELECT customer_id FROM orders WHERE total_amount \u003e 1000 ); -- 더 효율적인 조인으로 변환 SELECT DISTINCT c.* FROM customers c JOIN orders o ON c.id = o.customer_id WHERE o.total_amount \u003e 1000; 실행 계획 분석 쿼리 실행 계획 확인 및 분석 비효율적인 실행 계획 개선 쿼리 실행 계획은 데이터베이스가 쿼리를 어떻게 처리할지를 보여주는 로드맵과 같다.\n1 2 3 4 5 6 EXPLAIN ANALYZE SELECT customers.name, orders.order_date, orders.total_amount FROM customers JOIN orders ON customers.id = orders.customer_id WHERE orders.total_amount \u003e 1000 ORDER BY orders.order_date DESC; 이 쿼리의 실행 계획을 분석하면, 데이터베이스가 어떤 순서로 테이블을 읽고, 어떤 인덱스를 사용하는지 알 수 있다. 여기서 발견할 수 있는 비효율적인 부분들을 개선해나갈 수 있다.\n조인 최적화 적절한 조인 방식 선택 조인 순서 최적화 조인 컬럼에 인덱스 생성 1 2 3 4 5 6 7 8 9 -- 작은 결과셋을 먼저 필터링하여 조인 성능 향상 SELECT c.name, o.order_date FROM ( SELECT customer_id, order_date FROM orders WHERE total_amount \u003e 1000 AND order_date \u003e= '2024-01-01' ) o JOIN customers c ON c.id = o.customer_id; 데이터 모델링 개선 정규화와 반정규화의 적절한 균형 효율적인 테이블 구조 설계 캐싱 활용 자주 사용되는 쿼리 결과 캐싱 메모리 캐시 활용 (예: Redis) 1 2 3 4 5 6 7 8 9 10 11 -- 자주 사용되는 복잡한 쿼리 결과를 임시 테이블에 저장 CREATE TEMPORARY TABLE tmp_sales_summary AS SELECT customer_id, SUM(total_amount) as total_sales FROM orders GROUP BY customer_id; -- 이후 임시 테이블 활용 SELECT * FROM tmp_sales_summary WHERE total_sales \u003e 5000; 페이징 및 LIMIT 사용 대량 데이터 조회 시 페이징 구현 LIMIT 절을 사용하여 결과 제한 1 2 3 4 5 6 7 8 9 10 11 12 -- 비효율적인 페이징 SELECT * FROM orders ORDER BY order_date DESC LIMIT 10 OFFSET 1000000; -- 더 효율적인 키셋 페이징 SELECT * FROM orders WHERE order_date \u003c :last_seen_date ORDER BY order_date DESC LIMIT 10; 최적화 프로세스 성능 문제 식별 쿼리 분석 및 병목 지점 파악 최적화 전략 수립 최적화 기법 적용 성능 테스트 및 모니터링 결과 분석 및 추가 최적화 주의사항 과도한 인덱스 생성은 오히려 성능 저하를 초래할 수 있음 쿼리 최적화는 지속적인 프로세스로 주기적인 검토 필요 데이터베이스의 크기와 복잡성에 따라 최적화 전략 조정 필요 참고 및 출처 ","wordCount":"510","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2024-10-22T06:23:00Z","dateModified":"2024-10-22T06:23:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/backend/databases/rdbms/sql/query-optimization/query-optimization/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a></div><h1 class="post-title entry-hint-parent">쿼리 최적화 (Query Optimization)</h1><div class=post-description>데이터베이스 시스템의 성능을 향상시키고 효율성을 높이기 위한 중요한 프로세스</div><div class=post-meta><span title='2024-10-22 06:23:00 +0000 UTC'>October 22, 2024</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Backend/Databases/RDBMS/SQL/Query%20Optimization/Query%20Optimization.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#쿼리-최적화-query-optimization>쿼리 최적화 (Query Optimization)</a><ul><li><a href=#쿼리-최적화의-목적>쿼리 최적화의 목적</a></li><li><a href=#주요-최적화-기법>주요 최적화 기법</a></li><li><a href=#최적화-프로세스>최적화 프로세스</a></li><li><a href=#주의사항>주의사항</a></li></ul></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=쿼리-최적화-query-optimization>쿼리 최적화 (Query Optimization)<a hidden class=anchor aria-hidden=true href=#쿼리-최적화-query-optimization>#</a></h2><p>데이터베이스 쿼리 최적화는 데이터베이스 시스템의 성능을 향상시키고 효율성을 높이기 위한 중요한 프로세스이다.</p><h3 id=쿼리-최적화의-목적>쿼리 최적화의 목적<a hidden class=anchor aria-hidden=true href=#쿼리-최적화의-목적>#</a></h3><ul><li>쿼리 응답 시간 단축</li><li>시스템 자원 사용 효율성 증대</li><li>전반적인 데이터베이스 성능 향상</li><li>사용자 경험 개선</li></ul><h3 id=주요-최적화-기법>주요 최적화 기법<a hidden class=anchor aria-hidden=true href=#주요-최적화-기법>#</a></h3><h4 id=인덱스-최적화>인덱스 최적화<a hidden class=anchor aria-hidden=true href=#인덱스-최적화>#</a></h4><ul><li>적절한 인덱스 생성 및 관리</li><li>복합 인덱스 활용</li><li>선택도가 높은 컬럼에 인덱스 생성</li><li>불필요한 인덱스 제거</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6>6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7>7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8>8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 자주 사용되는 조건절에 대한 인덱스 생성
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>idx_orders_amount_date</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>orders</span><span class=p>(</span><span class=n>total_amount</span><span class=p>,</span><span class=w> </span><span class=n>order_date</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 위 인덱스를 활용하는 최적화된 쿼리
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>customers</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>orders</span><span class=p>.</span><span class=n>order_date</span><span class=p>,</span><span class=w> </span><span class=n>orders</span><span class=p>.</span><span class=n>total_amount</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>orders</span><span class=w>  </span><span class=c1>-- 인덱스를 가진 테이블을 먼저 참조
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>JOIN</span><span class=w> </span><span class=n>customers</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>customers</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>orders</span><span class=p>.</span><span class=n>customer_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>orders</span><span class=p>.</span><span class=n>total_amount</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>orders</span><span class=p>.</span><span class=n>order_date</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=쿼리-재작성>쿼리 재작성<a hidden class=anchor aria-hidden=true href=#쿼리-재작성>#</a></h4><ul><li>복잡한 쿼리 단순화</li><li>서브쿼리 최소화 및 조인으로 대체</li><li>WHERE 절 최적화</li><li>필요한 컬럼만 선택 (SELECT *)</li><li>테이블 조인 순서와 조인 유형을 적절히 선택</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 비효율적인 서브쿼리
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>customers</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>SELECT</span><span class=w> </span><span class=n>customer_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>FROM</span><span class=w> </span><span class=n>orders</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>WHERE</span><span class=w> </span><span class=n>total_amount</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 더 효율적인 조인으로 변환
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>DISTINCT</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=o>*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>customers</span><span class=w> </span><span class=k>c</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>JOIN</span><span class=w> </span><span class=n>orders</span><span class=w> </span><span class=n>o</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=n>customer_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=n>total_amount</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>1000</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=실행-계획-분석>실행 계획 분석<a hidden class=anchor aria-hidden=true href=#실행-계획-분석>#</a></h4><ul><li>쿼리 실행 계획 확인 및 분석</li><li>비효율적인 실행 계획 개선</li></ul><p>쿼리 실행 계획은 데이터베이스가 쿼리를 어떻게 처리할지를 보여주는 로드맵과 같다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2>2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3>3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4>4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5>5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>EXPLAIN</span><span class=w> </span><span class=k>ANALYZE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>customers</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>orders</span><span class=p>.</span><span class=n>order_date</span><span class=p>,</span><span class=w> </span><span class=n>orders</span><span class=p>.</span><span class=n>total_amount</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>customers</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>JOIN</span><span class=w> </span><span class=n>orders</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>customers</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>orders</span><span class=p>.</span><span class=n>customer_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>orders</span><span class=p>.</span><span class=n>total_amount</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>orders</span><span class=p>.</span><span class=n>order_date</span><span class=w> </span><span class=k>DESC</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>이 쿼리의 실행 계획을 분석하면, 데이터베이스가 어떤 순서로 테이블을 읽고, 어떤 인덱스를 사용하는지 알 수 있다. 여기서 발견할 수 있는 비효율적인 부분들을 개선해나갈 수 있다.</p><h4 id=조인-최적화>조인 최적화<a hidden class=anchor aria-hidden=true href=#조인-최적화>#</a></h4><ul><li>적절한 조인 방식 선택</li><li>조인 순서 최적화</li><li>조인 컬럼에 인덱스 생성</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2>2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3>3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4>4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5>5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6>6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7>7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8>8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 작은 결과셋을 먼저 필터링하여 조인 성능 향상
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=n>order_date</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>SELECT</span><span class=w> </span><span class=n>customer_id</span><span class=p>,</span><span class=w> </span><span class=n>order_date</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>FROM</span><span class=w> </span><span class=n>orders</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>WHERE</span><span class=w> </span><span class=n>total_amount</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>AND</span><span class=w> </span><span class=n>order_date</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=s1>&#39;2024-01-01&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w> </span><span class=n>o</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>JOIN</span><span class=w> </span><span class=n>customers</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=n>customer_id</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=데이터-모델링-개선>데이터 모델링 개선<a hidden class=anchor aria-hidden=true href=#데이터-모델링-개선>#</a></h4><ul><li>정규화와 반정규화의 적절한 균형</li><li>효율적인 테이블 구조 설계</li></ul><h4 id=캐싱-활용>캐싱 활용<a hidden class=anchor aria-hidden=true href=#캐싱-활용>#</a></h4><ul><li>자주 사용되는 쿼리 결과 캐싱</li><li>메모리 캐시 활용 (예: Redis)</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 자주 사용되는 복잡한 쿼리 결과를 임시 테이블에 저장
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TEMPORARY</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>tmp_sales_summary</span><span class=w> </span><span class=k>AS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>customer_id</span><span class=p>,</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>SUM</span><span class=p>(</span><span class=n>total_amount</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>total_sales</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>orders</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>customer_id</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 이후 임시 테이블 활용
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>tmp_sales_summary</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>total_sales</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>5000</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=페이징-및-limit-사용>페이징 및 LIMIT 사용<a hidden class=anchor aria-hidden=true href=#페이징-및-limit-사용>#</a></h4><ul><li>대량 데이터 조회 시 페이징 구현</li><li>LIMIT 절을 사용하여 결과 제한</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 비효율적인 페이징
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>orders</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>order_date</span><span class=w> </span><span class=k>DESC</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=mi>10</span><span class=w> </span><span class=k>OFFSET</span><span class=w> </span><span class=mi>1000000</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 더 효율적인 키셋 페이징
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>orders</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>order_date</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=p>:</span><span class=n>last_seen_date</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>order_date</span><span class=w> </span><span class=k>DESC</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=최적화-프로세스>최적화 프로세스<a hidden class=anchor aria-hidden=true href=#최적화-프로세스>#</a></h3><ol><li>성능 문제 식별</li><li>쿼리 분석 및 병목 지점 파악</li><li>최적화 전략 수립</li><li>최적화 기법 적용</li><li>성능 테스트 및 모니터링</li><li>결과 분석 및 추가 최적화</li></ol><h3 id=주의사항>주의사항<a hidden class=anchor aria-hidden=true href=#주의사항>#</a></h3><ul><li>과도한 인덱스 생성은 오히려 성능 저하를 초래할 수 있음</li><li>쿼리 최적화는 지속적인 프로세스로 주기적인 검토 필요</li><li>데이터베이스의 크기와 복잡성에 따라 최적화 전략 조정 필요</li></ul><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/databases/>Databases</a></li><li><a href=https://buenhyden.github.io/tags/sql/>SQL</a></li><li><a href=https://buenhyden.github.io/tags/indexes/>Indexes</a></li><li><a href=https://buenhyden.github.io/tags/query-optimization/>Query-Optimization</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/backend/performance-optimization/caching/server-side/database-caching/><span class=title>« Prev</span><br><span>데이터베이스 캐싱 (Database Caching)</span>
</a><a class=next href=https://buenhyden.github.io/posts/computer-science/networking-knowledge/fundamentals/cloud-networking/><span class=title>Next »</span><br><span>Cloud Networking</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>