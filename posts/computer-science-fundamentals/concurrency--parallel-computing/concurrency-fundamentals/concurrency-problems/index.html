<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Concurrency Problems | hyunyoun's Blog</title><meta name=keywords content="Computer-Science-Fundamentals,Concurrency-and-Parallelism,Concurrency-Problems,Multi-Threading-Issues,Deadlock,Livelock,Race-Condition,Starvation"><meta name=description content="Deadlock, Livelock, Race Condition, Starvation은 동시성 환경에서 발생하는 대표적인 병목 현상이다. 데드락은 자원 상호 점유로 인한 정지, 라이브락은 지속된 상태 변화에도 진전 없음, 레이스 컨디션은 타이밍 의존으로 인한 예측 불가, 기아 상태는 낮은 우선순위로 인한 무한 대기를 초래한다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/computer-science-fundamentals/concurrency--parallel-computing/concurrency-fundamentals/concurrency-problems/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/computer-science-fundamentals/concurrency--parallel-computing/concurrency-fundamentals/concurrency-problems/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/computer-science-fundamentals/concurrency--parallel-computing/concurrency-fundamentals/concurrency-problems/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/computer-science-fundamentals/concurrency--parallel-computing/concurrency-fundamentals/concurrency-problems/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Concurrency Problems"><meta property="og:description" content="Deadlock, Livelock, Race Condition, Starvation은 동시성 환경에서 발생하는 대표적인 병목 현상이다. 데드락은 자원 상호 점유로 인한 정지, 라이브락은 지속된 상태 변화에도 진전 없음, 레이스 컨디션은 타이밍 의존으로 인한 예측 불가, 기아 상태는 낮은 우선순위로 인한 무한 대기를 초래한다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Concurrency Problems"><meta name=twitter:description content="Deadlock, Livelock, Race Condition, Starvation은 동시성 환경에서 발생하는 대표적인 병목 현상이다. 데드락은 자원 상호 점유로 인한 정지, 라이브락은 지속된 상태 변화에도 진전 없음, 레이스 컨디션은 타이밍 의존으로 인한 예측 불가, 기아 상태는 낮은 우선순위로 인한 무한 대기를 초래한다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"HY's Blog","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Computer Science Fundamentals","item":"https://buenhyden.github.io/posts/computer-science-fundamentals/"},{"@type":"ListItem","position":3,"name":"Concurrency Problems","item":"https://buenhyden.github.io/posts/computer-science-fundamentals/concurrency--parallel-computing/concurrency-fundamentals/concurrency-problems/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>HY's Blog</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/computer-science-fundamentals/>Computer Science Fundamentals</a></div><h1>Concurrency Problems</h1><div class=post-description>Deadlock, Livelock, Race Condition, Starvation은 동시성 환경에서 발생하는 대표적인 병목 현상이다. 데드락은 자원 상호 점유로 인한 정지, 라이브락은 지속된 상태 변화에도 진전 없음, 레이스 컨디션은 타이밍 의존으로 인한 예측 불가, 기아 상태는 낮은 우선순위로 인한 무한 대기를 초래한다.</div></header><div class=post-content><h2 id=concurrency-problems>Concurrency Problems<a hidden class=anchor aria-hidden=true href=#concurrency-problems>#</a></h2><p>동시성 시스템에서는 자원 공유와 병행 처리로 인해 여러 문제가 발생할 수 있다.<br><strong>Deadlock</strong>은 상호 자원을 대기하다 순환 차단되는 상태이며, <strong>Livelock</strong>은 상태는 바뀌나 실제 진행이 없는 경우다. <strong>Race Condition</strong>은 병렬 실행의 타이밍 문제로 인해 예측 불가한 결과가 나타나고, <strong>Starvation</strong>은 일부 태스크가 지속적으로 자원을 얻지 못해 실행되지 못하는 상황이다. 본 분석은 이 네 가지 문제의 개념, 발생 조건, 대응 전략을 비교하고, 실시간 시스템과 고성능 환경에서의 적용 사례를 통해 효과적인 예방 및 해결 방안을 제시한다.</p><h3 id=핵심-개념-정리>핵심 개념 정리<a hidden class=anchor aria-hidden=true href=#핵심-개념-정리>#</a></h3><table><thead><tr><th>항목</th><th>Deadlock</th><th>Livelock</th><th>Race Condition</th><th>Starvation</th></tr></thead><tbody><tr><td><strong>정의</strong></td><td>자원 순환 대기로 무한 대기 상태</td><td>반복적 상태 변경 but 실질 진전 없음</td><td>실행 순서에 따라 결과 달라짐</td><td>자원 접근 기회가 지속적으로 박탈됨</td></tr><tr><td><strong>원인</strong></td><td>자원 획득 순서 충돌</td><td>비효율적 재시도 전략, 과도한 회피</td><td>공유 자원에 대한 비동기적 접근</td><td>불공정 스케줄링, 우선순위 차별</td></tr><tr><td><strong>증상</strong></td><td>시스템 정지</td><td>CPU 는 사용되나 진전 없음</td><td>비정상 결과 출력, 데이터 불일치</td><td>특정 태스크가 무한 대기</td></tr><tr><td><strong>해결 전략</strong></td><td>자원 순서화, 타임아웃, 탐지</td><td>무작위 딜레이, 상태 제어</td><td>동기화, Lock, Atomic 연산</td><td>Aging, 공정성 강화, 우선순위 조절</td></tr><tr><td><strong>실무 예시</strong></td><td>DB 트랜잭션 충돌, 락 순서 오류</td><td>재시도 루프 충돌, 중복 백오프</td><td>이벤트 큐 처리, 상태 업데이트 중단</td><td>낮은 우선순위 태스크가 항상 밀리는 스케줄러 문제</td></tr></tbody></table><h4 id=deadlock-교착-상태>Deadlock (교착 상태)<a hidden class=anchor aria-hidden=true href=#deadlock-교착-상태>#</a></h4><ul><li><p><strong>핵심 개념</strong>:<br>두 개 이상의 프로세스가 서로가 점유한 자원을 기다리며 무기한 대기 상태에 빠지는 현상.<br>→ Coffman 조건: 상호 배제, 점유 대기, 비선점, 순환 대기</p></li><li><p><strong>실무 연관성</strong>:<br>데이터베이스 트랜잭션, 락 획득 순서가 정해지지 않은 멀티스레딩 환경, 분산 자원 접근 시 발생<br>→ 예방: 자원 순서화, 타임아웃, Deadlock Detection</p></li></ul><h4 id=livelock-활락-상태>Livelock (활락 상태)<a hidden class=anchor aria-hidden=true href=#livelock-활락-상태>#</a></h4><ul><li><p><strong>핵심 개념</strong>:<br>프로세스들이 데드락을 피하려고 계속 상태를 바꾸지만, 실질적으로 아무 작업도 수행하지 못하는 무한 루프 상태</p></li><li><p><strong>실무 연관성</strong>:<br>백오프 로직의 충돌, 패킷 전송 재시도, 락 회피 로직 충돌에서 발생<br>→ 예방: 재시도 간 무작위 지연, 상태 전이 조건 제한</p></li></ul><h4 id=race-condition-경쟁-상태>Race Condition (경쟁 상태)<a hidden class=anchor aria-hidden=true href=#race-condition-경쟁-상태>#</a></h4><ul><li><p><strong>핵심 개념</strong>:<br>공유 자원에 대한 동시에 발생하는 접근이 실행 순서에 따라 결과를 바꾸는 불확정적 상태<br>→ 동기화 누락 + 타이밍 의존</p></li><li><p><strong>실무 연관성</strong>:<br>스레드 간 공유 변수, 이벤트 기반 처리, 비동기 I/O 등에서 흔함<br>→ 해결: Mutex, Semaphore, Atomic 연산, Lock-free 구조</p></li></ul><h4 id=starvation-기아-상태>Starvation (기아 상태)<a hidden class=anchor aria-hidden=true href=#starvation-기아-상태>#</a></h4><ul><li><p><strong>핵심 개념</strong>:<br>낮은 우선순위 프로세스가 자원을 계속 할당받지 못해 무한히 실행되지 못하는 상태</p></li><li><p><strong>실무 연관성</strong>:<br>Priority Scheduling, unfair lock, FIFO 미보장 큐에서 발생<br>→ 해결: Aging, 공정한 스케줄링, Resource Reservation</p></li></ul><h3 id=진행-계획-정리>진행 계획 정리<a hidden class=anchor aria-hidden=true href=#진행-계획-정리>#</a></h3><p>이제 3 단계인 <strong>상세 비교 분석</strong>에 진입합니다. 다음과 같은 흐름으로 구성하겠습니다.</p><ul><li>Phase 1: 기초 이해 및 배경 (각 개념의 기원, 동기, 특징 요약)</li><li>Phase 2: 핵심 메커니즘 분석 (각 문제의 조건, 내부 작동 원리, 시스템 차원 설명)</li><li>Phase 3: 비교 분석<ul><li>공통점 및 차이점</li><li>상대적 장단점</li><li>트레이드오프 관계</li><li>적용 시나리오 기반 선택 기준</li></ul></li></ul><h3 id=기초-이해-및-배경---개별-개념-이해>기초 이해 및 배경 - 개별 개념 이해<a hidden class=anchor aria-hidden=true href=#기초-이해-및-배경---개별-개념-이해>#</a></h3><table><thead><tr><th>분류 항목</th><th>Deadlock</th><th>Livelock</th><th>Race Condition</th><th>Starvation</th></tr></thead><tbody><tr><td><strong>정의</strong></td><td>상호 자원 대기로 인한 정지</td><td>상태 반복 변화, 진전 없음</td><td>실행 순서 의존, 결과 불안정</td><td>자원 할당 지속 실패, 무기한 대기</td></tr><tr><td><strong>본질</strong></td><td>자원 순환 대기</td><td>회피 전략의 반작용</td><td>비결정론적 실행 흐름</td><td>공정성 부족, 우선순위 문제</td></tr><tr><td><strong>발생 조건</strong></td><td>Coffman 조건 4 가지 충족</td><td>회피 알고리즘 충돌, 무한 재시도</td><td>동기화 누락, 공유 자원 동시 접근</td><td>낮은 우선순위, FIFO 보장 실패</td></tr><tr><td><strong>상태</strong></td><td>정지 (Blocked)</td><td>실행 중이나 무한 루프</td><td>실행 중, 일시적 문제</td><td>정지 or 지연, 지속적 대기</td></tr><tr><td><strong>해결 전략</strong></td><td>타임아웃, 자원 순서화, 탐지</td><td>Jitter backoff, 로직 최적화</td><td>Mutex, Atomic, Lock-free 구조</td><td>Aging, 공정 스케줄러 적용</td></tr></tbody></table><h4 id=개념-정의-및-본질>개념 정의 및 본질<a hidden class=anchor aria-hidden=true href=#개념-정의-및-본질>#</a></h4><table><thead><tr><th>문제 유형</th><th>정의 및 본질 요약</th></tr></thead><tbody><tr><td><strong>Deadlock</strong></td><td>순환 대기 상태로 인해 모든 프로세스가 멈춰버리는 자원 교착 상태</td></tr><tr><td><strong>Livelock</strong></td><td>상태는 계속 바뀌지만, 진전은 없는 무한 루프 상황</td></tr><tr><td><strong>Race Condition</strong></td><td>실행 순서에 따라 결과가 달라지는 예측 불가능한 병렬 처리 충돌</td></tr><tr><td><strong>Starvation</strong></td><td>특정 프로세스가 계속 자원 할당에서 배제되어 무한 대기하는 상태</td></tr></tbody></table><h4 id=등장-배경-및-발전-과정>등장 배경 및 발전 과정<a hidden class=anchor aria-hidden=true href=#등장-배경-및-발전-과정>#</a></h4><table><thead><tr><th>문제 유형</th><th>역사적 배경</th></tr></thead><tbody><tr><td><strong>Deadlock</strong></td><td>Dijkstra 의 철학자 문제 → Coffman 조건 정립 (1971)</td></tr><tr><td><strong>Livelock</strong></td><td>Deadlock 회피 기법 부작용으로 등장 (1970 년대)</td></tr><tr><td><strong>Race Condition</strong></td><td>상호 배제 실패로 인한 공유 자원 충돌 (멀티스레드 도입 시기부터)</td></tr><tr><td><strong>Starvation</strong></td><td>우선순위 기반 스케줄링 불공정성 이슈로 논의됨 (1960 년대 말)</td></tr></tbody></table><h4 id=핵심-동기-및-설계-목적>핵심 동기 및 설계 목적<a hidden class=anchor aria-hidden=true href=#핵심-동기-및-설계-목적>#</a></h4><table><thead><tr><th>문제 유형</th><th>설계 상 충돌하는 목표</th></tr></thead><tbody><tr><td><strong>Deadlock</strong></td><td>자원 보호 ↔ 시스템 정지 없음</td></tr><tr><td><strong>Livelock</strong></td><td>회피 전략 ↔ 실질적 진전</td></tr><tr><td><strong>Race Condition</strong></td><td>성능 (병렬성) ↔ 안전성 (결정론)</td></tr><tr><td><strong>Starvation</strong></td><td>우선순위 효율 ↔ 공정성 보장</td></tr></tbody></table><h4 id=주요-특징-비교>주요 특징 비교<a hidden class=anchor aria-hidden=true href=#주요-특징-비교>#</a></h4><table><thead><tr><th>문제 유형</th><th>핵심 특징 요약</th></tr></thead><tbody><tr><td><strong>Deadlock</strong></td><td>정지 상태, 조건 충족 시 발생, 자원 대기</td></tr><tr><td><strong>Livelock</strong></td><td>실행은 되지만 진전 없음, 자원 소모 지속</td></tr><tr><td><strong>Race Condition</strong></td><td>일시적 결과 불안정성, 재현 어려움, 디버깅 난이도 높음</td></tr><tr><td><strong>Starvation</strong></td><td>특정 태스크만 반복적으로 자원 배제, 우선순위 차별</td></tr></tbody></table><h3 id=핵심-메커니즘-분석-core-mechanisms>핵심 메커니즘 분석 (Core Mechanisms)<a hidden class=anchor aria-hidden=true href=#핵심-메커니즘-분석-core-mechanisms>#</a></h3><p>이 네 가지 동시성 문제는 모두 <strong>공유 자원 경쟁과 설계 결함</strong>에서 발생하지만, <strong>문제가 나타나는 방식과 해결책</strong>은 명확히 다르다.</p><ul><li><strong>Deadlock</strong>은 명확한 4 가지 조건을 만족하며 시스템을 정지시키고,</li><li><strong>Livelock</strong>은 진전 없이 움직이며 자원을 낭비하고,</li><li><strong>Race Condition</strong>은 결과를 망치고,</li><li><strong>Starvation</strong>은 특정 프로세스의 생존을 막는다.</li></ul><p>실제 시스템에서는 이들이 <strong>동시에 발생하거나 중첩</strong>되기도 하므로, <strong>설계 초기부터 명확한 동기화·스케줄링 전략</strong>이 필수다.</p><table><thead><tr><th>항목</th><th>Deadlock</th><th>Livelock</th><th>Race Condition</th><th>Starvation</th></tr></thead><tbody><tr><td>핵심 설계 원칙</td><td>상호 배제, 비선점 등 (Coffman 조건)</td><td>회피 메커니즘이 오히려 무한 루프 유도</td><td>원자성·동기화 필수</td><td>공정성 보장, Aging 필요</td></tr><tr><td>동작 메커니즘</td><td>네 조건이 동시에 성립하며 자원 순환 대기</td><td>반복적 자원 양보로 실제 진전 없이 루프</td><td>동기화 없이 접근 → 비결정성 결과</td><td>낮은 우선순위 태스크 반복 배제</td></tr><tr><td>구성 요소</td><td>리소스, 요청 큐, 자원 그래프</td><td>회피 알고리즘, 백오프 로직</td><td>공유 자원, 비원자 연산, 동기화 누락</td><td>스케줄러, 우선순위 체계, Aging 정책</td></tr><tr><td>역할/영향</td><td>시스템 정지, 자원 고립</td><td>실행 중 무의미 상태, CPU 낭비</td><td>데이터 불일관, 디버깅 어려움</td><td>낮은 태스크 무한 대기, 성능 저하</td></tr></tbody></table><h4 id=동작-메커니즘>동작 메커니즘<a hidden class=anchor aria-hidden=true href=#동작-메커니즘>#</a></h4><h5 id=deadlock-4-조건--순환-대기>Deadlock: 4 조건 + 순환 대기<a hidden class=anchor aria-hidden=true href=#deadlock-4-조건--순환-대기>#</a></h5><pre class=mermaid>flowchart TD
    A[프로세스 P1: 자원 A 점유] --&gt; B[프로세스 P2: 자원 B 점유]
    B --&gt; C[프로세스 P2: 자원 A 요청]
    A --&gt; D[프로세스 P1: 자원 B 요청]
    C --&gt; E[순환 대기 발생 → 데드락]
    D --&gt; E
</pre><p><strong>요약</strong>: 두 개의 프로세스가 서로 상대방의 자원을 기다리며 순환 대기가 발생해 시스템이 멈추는 현상.</p><h5 id=livelock-양보-루프>Livelock: 양보 루프<a hidden class=anchor aria-hidden=true href=#livelock-양보-루프>#</a></h5><pre class=mermaid>sequenceDiagram
    participant A as Thread A
    participant B as Thread B
    A-&gt;&gt;B: &#34;너 먼저 해&#34;
    B-&gt;&gt;A: &#34;아냐, 너 먼저 해&#34;
    loop 무한 반복
        A-&gt;&gt;B: 상태 변경
        B-&gt;&gt;A: 상태 변경
    end
</pre><p><strong>요약</strong>: Deadlock 을 피하려는 회피가 과도해져 계속 양보만 하면서 진전 없이 리소스를 낭비하는 상태.</p><h5 id=race-condition-비원자적-접근>Race Condition: 비원자적 접근<a hidden class=anchor aria-hidden=true href=#race-condition-비원자적-접근>#</a></h5><pre class=mermaid>graph TD
    T1[Thread 1: Read x=5] --&gt; T1A[Modify x+1]
    T2[Thread 2: Read x=5] --&gt; T2A[Modify x+2]
    T1A --&gt; W1[Write x=6]
    T2A --&gt; W2[Write x=7]
    W1 --&gt; F[&#34;결과: x=6 또는 7 (오류)&#34;]
    W2 --&gt; F
</pre><p><strong>요약</strong>: 타이밍에 따라 실행 순서가 달라져 결과가 예측 불가능해지는 공유 자원 접근 충돌.</p><h5 id=starvation-우선순위-기반-무한-대기>Starvation: 우선순위 기반 무한 대기<a hidden class=anchor aria-hidden=true href=#starvation-우선순위-기반-무한-대기>#</a></h5><pre class=mermaid>graph TD
    H[High Priority Task] --&gt; CPU
    M[Mid Priority Task] --&gt; CPU
    L[Low Priority Task] --&gt;|계속 대기| WaitQueue
</pre><p><strong>요약</strong>: 우선순위가 낮은 태스크가 계속 밀려나면서 CPU 사용 기회를 얻지 못하고 무기한 대기함.</p><h4 id=구성-요소-비교-및-아키텍처>구성 요소 비교 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구성-요소-비교-및-아키텍처>#</a></h4><table><thead><tr><th>구성 요소</th><th>필수/선택</th><th>설명 및 역할</th><th>기능·특징</th></tr></thead><tbody><tr><td>리소스 (Resource)</td><td>필수</td><td>공유 자원 (락, 세마포어 등)</td><td>경쟁이나 잠금 상태 유발 가능</td></tr><tr><td>스레드/프로세스</td><td>필수</td><td>여러 흐름 간의 상호작용 매개체</td><td>상호 의존적 상태 생성</td></tr><tr><td>동기화 메커니즘</td><td>필수 (Race, Deadlock 부분)</td><td>락, 세마포어, atomic 등</td><td>무결성 및 일관성 보장</td></tr><tr><td>회피/백오프 로직</td><td>선택 (Livelock)</td><td>상태를 계속 변경하게 유도하며 실제 작업 지연 유발</td><td>무한 루프 위험</td></tr><tr><td>우선순위 스케줄러 / Aging</td><td>선택 (Starvation)</td><td>우선순위 기반 스케줄링, 대기 시간 증가에 따른 우선순위 보정</td><td>낮은 우선순위의 무한 대기 방지</td></tr><tr><td>자원 요청 대기 큐</td><td>필수 (Deadlock)</td><td>자원 요청 상태 보관</td><td>Deadlock 트래킹 및 감지에 활용 가능</td></tr></tbody></table><pre class=mermaid>graph LR
  R[공유 자원]
  P1[Process/Thread]
  Sync[동기화 메커니즘]
  BO[백오프 로직]
  Sched[우선순위 스케줄러 + Aging]

  P1 --&gt; R
  P1 --&gt; Sync
  R --&gt; Sync
  P1 --&gt; BO
  BO --&gt; R
  Sched --&gt; P1
</pre><h4 id=문제별-원인-영향-대표적-해결책>문제별 원인, 영향, 대표적 해결책<a hidden class=anchor aria-hidden=true href=#문제별-원인-영향-대표적-해결책>#</a></h4><table><thead><tr><th>문제 유형</th><th>원인</th><th>영향</th><th>대표적 해결책</th></tr></thead><tbody><tr><td><strong>Deadlock</strong> (교착 상태)</td><td>- 자원 상호 배제<br>- 점유 및 대기<br>- 비선점<br>- 순환 대기 (Coffman 조건)</td><td>- 시스템 전체 또는 일부 프로세스가 무한 대기<br>- 자원 고립<br>- 처리 흐름 완전 정지</td><td>- 리소스 할당 순서 고정<br>- 타임아웃 기반 락<br>- 데드락 감지/회복 알고리즘<br>- 자원 그래프 분석</td></tr><tr><td><strong>Livelock</strong> (활락 상태)</td><td>- 과도한 회피 메커니즘<br>- 양보 반복<br>- 상태 충돌을 피하려다 무한 루프에 빠짐</td><td>- CPU 자원 낭비<br>- 시스템은 동작 중이나 실질적 진전 없음<br>- 반응성 저하</td><td>- 랜덤 백오프<br>- 재시도 횟수 제한<br>- 지수적 백오프 (Exponential Backoff)<br>- 회피 로직 개선</td></tr><tr><td><strong>Race Condition</strong> (경쟁 상태)</td><td>- 동기화 부재<br>- 공유 자원에 대한 동시 접근<br>- 원자성 결여</td><td>- 데이터 불일관성<br>- 실행 결과가 비결정적<br>- 버그 재현 어려움</td><td>- Mutex, Semaphore<br>- Atomic 연산 사용<br>- Critical Section 보호</td></tr><tr><td><strong>Starvation</strong> (기아 상태)</td><td>- 우선순위 기반 스케줄러에서 낮은 우선순위의 연속적인 배제<br>- Aging 미적용<br>- 정책 편향</td><td>- 일부 태스크가 무한히 자원을 할당받지 못함<br>- 처리 지연<br>- 시스템 불공정성</td><td>- Aging 기법 도입<br>- 공정 스케줄링 정책 (Fair Scheduling)<br>- 자원 접근 제한 시간 보장</td></tr></tbody></table><h4 id=요약>요약<a hidden class=anchor aria-hidden=true href=#요약>#</a></h4><table><thead><tr><th>항목</th><th>Deadlock</th><th>Livelock</th><th>Race Condition</th><th>Starvation</th></tr></thead><tbody><tr><td>정지 vs 실행 상태</td><td>완전 정지</td><td>실행 중, 진전 없음</td><td>실행 중, 결과 불일관</td><td>실행 중이나 일부 태스크만 정지</td></tr><tr><td>원인</td><td>자원 상호 의존 (Coffman 조건)</td><td>과잉 회피 로직</td><td>동기화 누락, 원자성 결여</td><td>우선순위 불공정, 스케줄링 오류</td></tr><tr><td>영향</td><td>전체 시스템 멈춤</td><td>CPU 고갈, 무의미 반복</td><td>데이터 오류, 예측 불가</td><td>일부 프로세스 무한 대기, 서비스 저하</td></tr><tr><td>해결 전략</td><td>리소스 순서 고정, 타임아웃 등</td><td>랜덤 백오프, 제한 재시도</td><td>락, 세마포어, atomic 연산</td><td>Aging, 공정 스케줄링</td></tr></tbody></table><p>각 동시성 병목은 <strong>정지 여부, 원인, 영향, 해결책</strong>에서 뚜렷한 차이를 보인다.</p><ul><li>Deadlock 은 시스템을 완전히 정지시키며 가장 위험한 형태지만 원인이 명확해 해결책도 비교적 체계적이다.</li><li>Livelock 은 실행 중이지만 무의미한 자원 소모, Race Condition 은 데이터 불일치, Starvation 은 일부 낮은 태스크의 무한 대기를 초래하며, 해결책 또한 메커니즘 특성에 따라 상이하다.</li></ul><h3 id=비교-분석>비교 분석<a hidden class=anchor aria-hidden=true href=#비교-분석>#</a></h3><h4 id=공통점과-차이점>공통점과 차이점<a hidden class=anchor aria-hidden=true href=#공통점과-차이점>#</a></h4><p>Deadlock, Livelock, Race Condition, Starvation 은 모두 병렬 시스템에서 발생하는 자원 경쟁 기반의 동시성 문제이지만, 문제의 <strong>성격 (Safety vs Liveness)</strong>, <strong>진행 상태</strong>, <strong>시스템에 미치는 영향</strong>, <strong>CPU 활용도</strong>, 그리고 <strong>재현성 및 디버깅 난이도</strong>에서 명확한 차이를 보인다.</p><ul><li>Deadlock 과 Livelock 은 <strong>진행 불가 (Liveness) 문제</strong>로 시스템 정체를 야기하며, Race Condition 은 실행은 되지만 <strong>정확성 (Safety) 을 침해</strong>하는 위험성이 크다. 반면 Starvation 은 일부 태스크의 지속적인 <strong>기회 박탈</strong>로 시스템 전체가 아닌 <strong>부분적 불균형</strong>을 유발한다.</li><li>각 문제는 고유의 발생 조건과 해결 전략을 가지므로, <strong>시스템 설계 시 구조적 예방과 적절한 동기화 및 스케줄링 기법</strong> 적용이 필수적이다.</li></ul><h5 id=공통점>공통점<a hidden class=anchor aria-hidden=true href=#공통점>#</a></h5><ul><li>모두 <strong>동시성 제어 실패</strong>에서 비롯됨</li><li><strong>공유 자원</strong>이나 <strong>스레드 간 상호작용</strong>이 핵심 원인</li><li>결과적으로 <strong>성능 저하</strong>, <strong>응답 지연</strong>, <strong>시스템 신뢰성 하락</strong> 유발</li><li>해결을 위해선 <strong>설계 단계에서 고려되는 정책/메커니즘</strong>이 필요함</li></ul><h5 id=차이점>차이점<a hidden class=anchor aria-hidden=true href=#차이점>#</a></h5><table><thead><tr><th>비교 항목</th><th><strong>Deadlock</strong></th><th><strong>Livelock</strong></th><th><strong>Race Condition</strong></th><th><strong>Starvation</strong></th></tr></thead><tbody><tr><td><strong>문제 분류</strong></td><td>Liveness (진행 불가)</td><td>Liveness (진행 불가)</td><td><strong>Safety (정확성 위협)</strong></td><td>Liveness (진행 불균형)</td></tr><tr><td><strong>진행 상태</strong></td><td>완전 정지 (wait)</td><td>상태 변경 지속, 진전 없음</td><td>실행됨, 결과 불확실</td><td>일부 프로세스 무기한 대기</td></tr><tr><td><strong>주요 원인</strong></td><td>자원 점유 + 순환 대기</td><td>회피 충돌 루프</td><td>동기화 누락, 원자성 부족</td><td>우선순위 불공정, aging 미적용</td></tr><tr><td><strong>CPU 사용률</strong></td><td>매우 낮음 (대기만 함)</td><td>매우 높음 (무의미 루프)</td><td>일반적 사용률, 결과 불일치 가능성</td><td>불균형 사용 (일부는 지속 사용, 일부는 없음)</td></tr><tr><td><strong>시스템 영향</strong></td><td>전체 정지</td><td>처리 정체 + 자원 낭비</td><td><strong>데이터 손상, 불일관성</strong></td><td>성능 저하 + 서비스 품질 하락</td></tr><tr><td><strong>예측/재현성</strong></td><td>비교적 명확</td><td>간헐적, 조건적</td><td>매우 낮음 (비결정성)</td><td>중간 (패턴적 재현 가능)</td></tr><tr><td><strong>디버깅 난이도</strong></td><td>중간</td><td>중간 ~ 높음</td><td><strong>매우 높음</strong></td><td>낮음</td></tr><tr><td><strong>대표 해결 방식</strong></td><td>락 순서 고정, 타임아웃, 탐지/회복</td><td>랜덤 백오프, 상태 검사, 반복 횟수 제한</td><td>락, 세마포어, atomic 연산, 동기화 프리미티브</td><td>Aging, 공정 스케줄링, 자원 접근 기회 보장</td></tr></tbody></table><h4 id=상대적-장단점-분석>상대적 장단점 분석<a hidden class=anchor aria-hidden=true href=#상대적-장단점-분석>#</a></h4><p><strong>Deadlock, Livelock, Race Condition, Starvation</strong>은 각기 다른 특성과 위험성을 가진 동시성 문제로, 처리 성능, 안정성, 복잡성, 발생 빈도, 해결 가능성에서 뚜렷한 차이를 보인다.</p><ul><li>Deadlock 은 시스템 정지를 초래하므로 심각하지만 구조적 분석이 가능해 해결이 비교적 명확하다.</li><li>Livelock 은 CPU 를 지속 사용하며 성능을 낭비하고, Race Condition 은 데이터 불일치를 초래해 보안·정합성 위협이 크며 디버깅도 가장 어렵다.</li><li>Starvation 은 전체 시스템에는 영향이 적지만, 특정 작업의 생존성이 위협받는 구조적 불공정 문제다.</li></ul><p>각 문제는 시스템의 사용 목적, 중요 자원 특성, 성능 목표에 따라 접근 전략이 달라져야 하며, 예방과 진단, 대응을 위한 정책 설계가 필수적이다.</p><table><thead><tr><th>항목 구분</th><th>Deadlock</th><th>Livelock</th><th>Race Condition</th><th>Starvation</th></tr></thead><tbody><tr><td><strong>성능</strong></td><td>❌ 리소스 점유 후 진행 없음</td><td>❌ 반복만 하고 실질 작업 없음</td><td>⚠️ 동시성 높지만 불안정 처리 가능</td><td>⚠️ 일부 태스크의 처리 지연</td></tr><tr><td><strong>안정성</strong></td><td>⚠️ 예측 가능하나 시스템 정지 가능성 있음</td><td>⚠️ 시스템 살아 있으나 무의미한 소비</td><td>❌ 데이터 불일치 및 예측 불가</td><td>⚠️ 시스템은 유지되나 공정성 문제 있음</td></tr><tr><td><strong>복잡성</strong></td><td>✔️ 감지/탐지 가능 (자원 그래프 등)</td><td>⚠️ 조건 모호한 상태 반복 → 디버깅 난이도 중</td><td>❌ 원인 파악 및 재현 어려움, 디버깅 최악</td><td>✔️ 상대적으로 명확, 스케줄러 정책 분석 용이</td></tr><tr><td><strong>해결 가능성</strong></td><td>✔️ 순환 대기 제거, 타임아웃 등</td><td>⚠️ 랜덤 백오프, 제한적 조정 필요</td><td>✔️ 락/세마포어, 동기화로 방지 가능</td><td>✔️ Aging, 공정 스케줄링 등 제어 가능</td></tr><tr><td><strong>발생 빈도</strong></td><td>⚠️ 자원 설계 복잡할수록 발생 가능성 있음</td><td>⚠️ 희귀하지만 회피 로직 실수로 발생</td><td>❌ 가장 빈번 (특히 멀티스레드 환경)</td><td>⚠️ 낮은 우선순위 시스템에서 자주 발생 가능</td></tr><tr><td><strong>심각도</strong></td><td>❗ 시스템 전체 마비 가능</td><td>⚠️ 성능 낭비, 시스템 응답성 저하</td><td>❗ 데이터 손실, 보안 오류 가능성</td><td>⚠️ SLA 위반, 처리 지연 → 고객 경험 저하</td></tr><tr><td><strong>적용 시나리오</strong></td><td>트랜잭션 시스템, 데이터베이스 등</td><td>네트워크, 분산 시스템</td><td>임계 영역 있는 모든 동시성 프로그래밍 환경</td><td>실시간 시스템, 우선순위 기반 처리 구조</td></tr></tbody></table><h4 id=트레이드오프-관계-분석>트레이드오프 관계 분석<a hidden class=anchor aria-hidden=true href=#트레이드오프-관계-분석>#</a></h4><p><strong>Deadlock 과 Livelock</strong>은 시스템이 멈추느냐 아니면 무의미하게 반복하느냐의 문제로 대립된다.</p><ul><li>Deadlock 회피를 위한 회피 전략이 과도할 경우 Livelock 이 발생할 수 있어, 예측 가능한 정지 vs 무의미한 실행 루프 중 어떤 것을 감수할 것인지 선택해야 한다.</li></ul><p><strong>Race Condition 과 Starvation</strong>은 각각 데이터 정합성과 자원 접근의 공정성을 위협한다.</p><ul><li>Race 는 예측 불가능한 결과를 야기하기 때문에 시스템 정확성 측면에서 치명적이며, Starvation 은 서비스 품질 (QoS) 과 사용자 만족도에 영향을 준다.</li></ul><p><strong>정지 계열 (Deadlock/Starvation)</strong> 과 <strong>오류 계열 (Race Condition)</strong> 은 " 진행이 멈추는 문제 " 와 " 진행은 되지만 결과가 틀리는 문제 " 로 성격이 다르며, 전자는 운영 안정성 측면에서, 후자는 데이터 무결성 측면에서 고려되어야 한다.</p><p><strong>성능과 안정성의 균형</strong>도 중요한 트레이드오프다.</p><ul><li>락을 통해 Race 를 막으면 안정성은 높아지지만, 병렬 처리 성능은 희생된다. 반면 Lock-free 알고리즘은 성능이 좋지만 구현이 어렵고 위험도가 높다.</li></ul><p><strong>Deadlock 회피 기법</strong>도 자원 효율성과 예측 가능성 사이에서 균형이 필요하다.</p><ul><li>Prevention 은 자원을 비효율적으로 만들 수 있고, Avoidance 는 시스템 상태를 계속 추적해야 하므로 복잡도가 증가한다.</li></ul><p><strong>공정성과 응답성</strong>의 균형 또한 중요하다.</p><ul><li>Aging 기법은 Starvation 을 줄이지만 실시간 태스크의 빠른 처리를 지연시킬 수 있다. 특히 실시간 시스템에서는 단순한 공정성보다 예측 가능한 응답이 우선시되기도 한다.</li></ul><table><thead><tr><th>트레이드오프 주제</th><th>항목 A</th><th>항목 B</th><th>핵심 비교 요점</th></tr></thead><tbody><tr><td>Deadlock vs Livelock</td><td>시스템 정지 (Blocked 상태)</td><td>진전 없는 상태 전이 반복 (Busy 상태)</td><td>정지 vs 무한 루프</td></tr><tr><td>Race vs Starvation</td><td>결과 오류, 정합성 문제</td><td>진행 지연, 응답성·공정성 문제</td><td>정확성 vs 공정성</td></tr><tr><td>Deadlock 예방 vs 회피</td><td>자원 활용도 낮음, 단순함</td><td>자원 효율 높음, 설계 복잡도 높음</td><td>자원 효율 vs 설계 난이도</td></tr><tr><td>락 사용 vs Lock-Free</td><td>안전성 높음, 성능 저하</td><td>성능 우수, 구현 어려움</td><td>안정성 vs 성능</td></tr><tr><td>공정성 vs 긴급 응답성</td><td>모든 태스크에 자원 분배 보장</td><td>높은 우선순위 태스크에 빠른 응답 제공</td><td>형평성 vs 실시간성</td></tr><tr><td>Livelock 해결 전략</td><td>무작위 재시도 (랜덤 백오프), 비결정적 성능</td><td>역할 기반 고정 로직, 예측 가능하나 복잡도 증가</td><td>예측성 vs 단순성</td></tr></tbody></table><p>동시성 문제를 다룰 때는 단순히 오류를 방지하는 것이 아니라, 시스템의 성능, 응답성, 공정성, 그리고 정확성 간의 균형을 어떻게 유지할 것인지가 핵심 과제다.</p><ul><li>Deadlock 을 피하려다 Livelock 에 빠질 수 있고, Race Condition 을 막기 위해 락을 과도하게 사용하면 성능이 급격히 떨어진다.</li><li>Starvation 을 방지하기 위한 공정한 스케줄링은 실시간 응답성을 희생할 수 있으며, Lock-free 알고리즘은 높은 성능을 제공하지만 설계와 검증이 매우 까다롭다.</li></ul><p>이러한 선택지 간의 트레이드오프는 시스템의 목적과 환경에 따라 달라지므로, 정답은 없지만 반드시 명확한 기준과 우선순위가 있어야 한다. 설계자는 이러한 갈등 구조를 이해하고 상황에 맞는 타협점을 설계해야 한다.</p><h3 id=구현-및-적용-implementation--application>구현 및 적용 (Implementation & Application)<a hidden class=anchor aria-hidden=true href=#구현-및-적용-implementation--application>#</a></h3><h4 id=deadlock-교착-상태-1>Deadlock (교착 상태)<a hidden class=anchor aria-hidden=true href=#deadlock-교착-상태-1>#</a></h4><h5 id=세부-유형-분류>세부 유형 분류<a hidden class=anchor aria-hidden=true href=#세부-유형-분류>#</a></h5><table><thead><tr><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>Resource Deadlock</td><td>시스템 자원 점유 간 순환 대기</td></tr><tr><td>Communication Deadlock</td><td>메시지 송수신에서 블로킹 대기</td></tr><tr><td>File Deadlock</td><td>파일 및 I/O 리소스에서 발생</td></tr></tbody></table><h5 id=deadlock-해결-기법>Deadlock 해결 기법<a hidden class=anchor aria-hidden=true href=#deadlock-해결-기법>#</a></h5><ol><li><p><strong>Deadlock Detection</strong>: 자원 그래프 탐색으로 순환 대기 감지</p></li><li><p><strong>순서 정렬 (Lock Ordering)</strong>: 자원을 항상 동일한 순서로 요청</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span><span class=lnt id=hl-5-18><a class=lnlinks href=#hl-5-18>18</a>
</span><span class=lnt id=hl-5-19><a class=lnlinks href=#hl-5-19>19</a>
</span><span class=lnt id=hl-5-20><a class=lnlinks href=#hl-5-20>20</a>
</span><span class=lnt id=hl-5-21><a class=lnlinks href=#hl-5-21>21</a>
</span><span class=lnt id=hl-5-22><a class=lnlinks href=#hl-5-22>22</a>
</span><span class=lnt id=hl-5-23><a class=lnlinks href=#hl-5-23>23</a>
</span><span class=lnt id=hl-5-24><a class=lnlinks href=#hl-5-24>24</a>
</span><span class=lnt id=hl-5-25><a class=lnlinks href=#hl-5-25>25</a>
</span><span class=lnt id=hl-5-26><a class=lnlinks href=#hl-5-26>26</a>
</span><span class=lnt id=hl-5-27><a class=lnlinks href=#hl-5-27>27</a>
</span><span class=lnt id=hl-5-28><a class=lnlinks href=#hl-5-28>28</a>
</span><span class=lnt id=hl-5-29><a class=lnlinks href=#hl-5-29>29</a>
</span><span class=lnt id=hl-5-30><a class=lnlinks href=#hl-5-30>30</a>
</span><span class=lnt id=hl-5-31><a class=lnlinks href=#hl-5-31>31</a>
</span><span class=lnt id=hl-5-32><a class=lnlinks href=#hl-5-32>32</a>
</span><span class=lnt id=hl-5-33><a class=lnlinks href=#hl-5-33>33</a>
</span><span class=lnt id=hl-5-34><a class=lnlinks href=#hl-5-34>34</a>
</span><span class=lnt id=hl-5-35><a class=lnlinks href=#hl-5-35>35</a>
</span><span class=lnt id=hl-5-36><a class=lnlinks href=#hl-5-36>36</a>
</span><span class=lnt id=hl-5-37><a class=lnlinks href=#hl-5-37>37</a>
</span><span class=lnt id=hl-5-38><a class=lnlinks href=#hl-5-38>38</a>
</span><span class=lnt id=hl-5-39><a class=lnlinks href=#hl-5-39>39</a>
</span><span class=lnt id=hl-5-40><a class=lnlinks href=#hl-5-40>40</a>
</span><span class=lnt id=hl-5-41><a class=lnlinks href=#hl-5-41>41</a>
</span><span class=lnt id=hl-5-42><a class=lnlinks href=#hl-5-42>42</a>
</span><span class=lnt id=hl-5-43><a class=lnlinks href=#hl-5-43>43</a>
</span><span class=lnt id=hl-5-44><a class=lnlinks href=#hl-5-44>44</a>
</span><span class=lnt id=hl-5-45><a class=lnlinks href=#hl-5-45>45</a>
</span><span class=lnt id=hl-5-46><a class=lnlinks href=#hl-5-46>46</a>
</span><span class=lnt id=hl-5-47><a class=lnlinks href=#hl-5-47>47</a>
</span><span class=lnt id=hl-5-48><a class=lnlinks href=#hl-5-48>48</a>
</span><span class=lnt id=hl-5-49><a class=lnlinks href=#hl-5-49>49</a>
</span><span class=lnt id=hl-5-50><a class=lnlinks href=#hl-5-50>50</a>
</span><span class=lnt id=hl-5-51><a class=lnlinks href=#hl-5-51>51</a>
</span><span class=lnt id=hl-5-52><a class=lnlinks href=#hl-5-52>52</a>
</span><span class=lnt id=hl-5-53><a class=lnlinks href=#hl-5-53>53</a>
</span><span class=lnt id=hl-5-54><a class=lnlinks href=#hl-5-54>54</a>
</span><span class=lnt id=hl-5-55><a class=lnlinks href=#hl-5-55>55</a>
</span><span class=lnt id=hl-5-56><a class=lnlinks href=#hl-5-56>56</a>
</span><span class=lnt id=hl-5-57><a class=lnlinks href=#hl-5-57>57</a>
</span><span class=lnt id=hl-5-58><a class=lnlinks href=#hl-5-58>58</a>
</span><span class=lnt id=hl-5-59><a class=lnlinks href=#hl-5-59>59</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>DeadlockPreventionExample</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 여러 자원을 ID로 관리</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>resource_a</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>  <span class=c1># ID: 1</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>resource_b</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>  <span class=c1># ID: 2</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>resource_c</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>  <span class=c1># ID: 3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>acquire_locks_safely</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>locks</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>],</span> <span class=n>lock_ids</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>int</span><span class=p>]):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;락 ID 순서대로 획득하여 데드락 방지&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># ID 순서대로 정렬</span>
</span></span><span class=line><span class=cl>        <span class=n>sorted_pairs</span> <span class=o>=</span> <span class=nb>sorted</span><span class=p>(</span><span class=nb>zip</span><span class=p>(</span><span class=n>lock_ids</span><span class=p>,</span> <span class=n>locks</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=n>acquired_locks</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>lock_id</span><span class=p>,</span> <span class=n>lock</span> <span class=ow>in</span> <span class=n>sorted_pairs</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;락 </span><span class=si>{</span><span class=n>lock_id</span><span class=si>}</span><span class=s2> 획득 시도…&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>lock</span><span class=o>.</span><span class=n>acquire</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=n>acquired_locks</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>lock</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;락 </span><span class=si>{</span><span class=n>lock_id</span><span class=si>}</span><span class=s2> 획득 완료&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1># 실제 작업 수행</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;작업 완료&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 역순으로 해제</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>lock</span> <span class=ow>in</span> <span class=nb>reversed</span><span class=p>(</span><span class=n>acquired_locks</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=n>lock</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;락 해제 완료&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_1</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;프로세스 1: 자원 A, B 순서대로 요청&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;프로세스 1 시작&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>locks</span> <span class=o>=</span> <span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>resource_a</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>resource_b</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>lock_ids</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>acquire_locks_safely</span><span class=p>(</span><span class=n>locks</span><span class=p>,</span> <span class=n>lock_ids</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_2</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;프로세스 2: 자원 B, A 순서대로 요청 (하지만 ID 순서로 획득)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;프로세스 2 시작&#34;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>        <span class=n>locks</span> <span class=o>=</span> <span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>resource_b</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>resource_a</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>lock_ids</span> <span class=o>=</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>]</span>  <span class=c1># 요청 순서는 다르지만</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>acquire_locks_safely</span><span class=p>(</span><span class=n>locks</span><span class=p>,</span> <span class=n>lock_ids</span><span class=p>)</span>  <span class=c1># ID 순서로 획득</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 데드락 방지 테스트</span>
</span></span><span class=line><span class=cl><span class=n>example</span> <span class=o>=</span> <span class=n>DeadlockPreventionExample</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>thread1</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>example</span><span class=o>.</span><span class=n>process_1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>thread2</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>example</span><span class=o>.</span><span class=n>process_2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>thread1</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>thread2</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>thread1</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>  
</span></span><span class=line><span class=cl><span class=n>thread2</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>타임아웃 기반 해결</strong>: 락 요청에 타임아웃 지정</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15>15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16>16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17>17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18>18</a>
</span><span class=lnt id=hl-6-19><a class=lnlinks href=#hl-6-19>19</a>
</span><span class=lnt id=hl-6-20><a class=lnlinks href=#hl-6-20>20</a>
</span><span class=lnt id=hl-6-21><a class=lnlinks href=#hl-6-21>21</a>
</span><span class=lnt id=hl-6-22><a class=lnlinks href=#hl-6-22>22</a>
</span><span class=lnt id=hl-6-23><a class=lnlinks href=#hl-6-23>23</a>
</span><span class=lnt id=hl-6-24><a class=lnlinks href=#hl-6-24>24</a>
</span><span class=lnt id=hl-6-25><a class=lnlinks href=#hl-6-25>25</a>
</span><span class=lnt id=hl-6-26><a class=lnlinks href=#hl-6-26>26</a>
</span><span class=lnt id=hl-6-27><a class=lnlinks href=#hl-6-27>27</a>
</span><span class=lnt id=hl-6-28><a class=lnlinks href=#hl-6-28>28</a>
</span><span class=lnt id=hl-6-29><a class=lnlinks href=#hl-6-29>29</a>
</span><span class=lnt id=hl-6-30><a class=lnlinks href=#hl-6-30>30</a>
</span><span class=lnt id=hl-6-31><a class=lnlinks href=#hl-6-31>31</a>
</span><span class=lnt id=hl-6-32><a class=lnlinks href=#hl-6-32>32</a>
</span><span class=lnt id=hl-6-33><a class=lnlinks href=#hl-6-33>33</a>
</span><span class=lnt id=hl-6-34><a class=lnlinks href=#hl-6-34>34</a>
</span><span class=lnt id=hl-6-35><a class=lnlinks href=#hl-6-35>35</a>
</span><span class=lnt id=hl-6-36><a class=lnlinks href=#hl-6-36>36</a>
</span><span class=lnt id=hl-6-37><a class=lnlinks href=#hl-6-37>37</a>
</span><span class=lnt id=hl-6-38><a class=lnlinks href=#hl-6-38>38</a>
</span><span class=lnt id=hl-6-39><a class=lnlinks href=#hl-6-39>39</a>
</span><span class=lnt id=hl-6-40><a class=lnlinks href=#hl-6-40>40</a>
</span><span class=lnt id=hl-6-41><a class=lnlinks href=#hl-6-41>41</a>
</span><span class=lnt id=hl-6-42><a class=lnlinks href=#hl-6-42>42</a>
</span><span class=lnt id=hl-6-43><a class=lnlinks href=#hl-6-43>43</a>
</span><span class=lnt id=hl-6-44><a class=lnlinks href=#hl-6-44>44</a>
</span><span class=lnt id=hl-6-45><a class=lnlinks href=#hl-6-45>45</a>
</span><span class=lnt id=hl-6-46><a class=lnlinks href=#hl-6-46>46</a>
</span><span class=lnt id=hl-6-47><a class=lnlinks href=#hl-6-47>47</a>
</span><span class=lnt id=hl-6-48><a class=lnlinks href=#hl-6-48>48</a>
</span><span class=lnt id=hl-6-49><a class=lnlinks href=#hl-6-49>49</a>
</span><span class=lnt id=hl-6-50><a class=lnlinks href=#hl-6-50>50</a>
</span><span class=lnt id=hl-6-51><a class=lnlinks href=#hl-6-51>51</a>
</span><span class=lnt id=hl-6-52><a class=lnlinks href=#hl-6-52>52</a>
</span><span class=lnt id=hl-6-53><a class=lnlinks href=#hl-6-53>53</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>random</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TimeoutBasedDeadlockHandling</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>lock_a</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>lock_b</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>try_acquire_with_timeout</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>lock</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=mf>1.0</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;타임아웃을 가진 락 획득 시도&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>lock</span><span class=o>.</span><span class=n>acquire</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_with_timeout</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>process_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>first_lock</span><span class=p>,</span> <span class=n>second_lock</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;타임아웃으로 데드락 회피&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>process_name</span><span class=si>}</span><span class=s2> 시작&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># 첫 번째 락 획득</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>try_acquire_with_timeout</span><span class=p>(</span><span class=n>first_lock</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=mf>2.0</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>process_name</span><span class=si>}</span><span class=s2>: 첫 번째 락 획득&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1># 작업 시뮬레이션</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span><span class=mf>0.1</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1># 두 번째 락 획득 시도</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>try_acquire_with_timeout</span><span class=p>(</span><span class=n>second_lock</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=mf>1.0</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>process_name</span><span class=si>}</span><span class=s2>: 두 번째 락 획득 - 작업 완료&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>second_lock</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>process_name</span><span class=si>}</span><span class=s2>: 두 번째 락 해제&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>process_name</span><span class=si>}</span><span class=s2>: 두 번째 락 획득 실패 - 타임아웃으로 재시도&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>first_lock</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>process_name</span><span class=si>}</span><span class=s2>: 첫 번째 락 해제&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>process_name</span><span class=si>}</span><span class=s2>: 첫 번째 락 획득 실패&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 타임아웃 기반 데드락 처리 테스트</span>
</span></span><span class=line><span class=cl><span class=n>handler</span> <span class=o>=</span> <span class=n>TimeoutBasedDeadlockHandling</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>worker_1</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>handler</span><span class=o>.</span><span class=n>process_with_timeout</span><span class=p>(</span><span class=s2>&#34;프로세스-1&#34;</span><span class=p>,</span> <span class=n>handler</span><span class=o>.</span><span class=n>lock_a</span><span class=p>,</span> <span class=n>handler</span><span class=o>.</span><span class=n>lock_b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>worker_2</span><span class=p>():</span>  
</span></span><span class=line><span class=cl>    <span class=n>handler</span><span class=o>.</span><span class=n>process_with_timeout</span><span class=p>(</span><span class=s2>&#34;프로세스-2&#34;</span><span class=p>,</span> <span class=n>handler</span><span class=o>.</span><span class=n>lock_b</span><span class=p>,</span> <span class=n>handler</span><span class=o>.</span><span class=n>lock_a</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>threads</span> <span class=o>=</span> <span class=p>[</span><span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>worker_1</span><span class=p>),</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>worker_2</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>thread</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>thread</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>thread</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>Try-Lock 패턴</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>if</span> <span class=n>lock_a</span><span class=o>.</span><span class=n>acquire</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=mi>1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>lock_b</span><span class=o>.</span><span class=n>acquire</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=mi>1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1># critical section</span>
</span></span><span class=line><span class=cl>                <span class=k>pass</span>
</span></span><span class=line><span class=cl>            <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>lock_b</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>lock_a</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><h4 id=livelock-활락-상태-1>Livelock (활락 상태)<a hidden class=anchor aria-hidden=true href=#livelock-활락-상태-1>#</a></h4><h5 id=세부-유형-분류-1>세부 유형 분류<a hidden class=anchor aria-hidden=true href=#세부-유형-분류-1>#</a></h5><table><thead><tr><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>Symmetric Livelock</td><td>서로 양보하며 무한 루프</td></tr><tr><td>Protocol-Level Livelock</td><td>전송 제어 재시도 루틴에서 발생</td></tr><tr><td>Cooperative Livelock</td><td>비선점 시스템에서 의도적 양보가 문제로 발전</td></tr></tbody></table><h5 id=livelock-해결-기법>Livelock 해결 기법<a hidden class=anchor aria-hidden=true href=#livelock-해결-기법>#</a></h5><ol><li><p><strong>재시도 횟수 제한</strong>: 무한 루프 방지</p></li><li><p><strong>우선순위 도입 또는 강제 종료 정책</strong></p></li><li><p><strong>Jitter 적용</strong>: 네트워크 프로토콜에서도 사용되는 전략</p></li><li><p><strong>랜덤 백오프 (Random Backoff)</strong>: 충돌 시 대기 시간에 랜덤성 부여</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span><span class=lnt id=hl-8-15><a class=lnlinks href=#hl-8-15>15</a>
</span><span class=lnt id=hl-8-16><a class=lnlinks href=#hl-8-16>16</a>
</span><span class=lnt id=hl-8-17><a class=lnlinks href=#hl-8-17>17</a>
</span><span class=lnt id=hl-8-18><a class=lnlinks href=#hl-8-18>18</a>
</span><span class=lnt id=hl-8-19><a class=lnlinks href=#hl-8-19>19</a>
</span><span class=lnt id=hl-8-20><a class=lnlinks href=#hl-8-20>20</a>
</span><span class=lnt id=hl-8-21><a class=lnlinks href=#hl-8-21>21</a>
</span><span class=lnt id=hl-8-22><a class=lnlinks href=#hl-8-22>22</a>
</span><span class=lnt id=hl-8-23><a class=lnlinks href=#hl-8-23>23</a>
</span><span class=lnt id=hl-8-24><a class=lnlinks href=#hl-8-24>24</a>
</span><span class=lnt id=hl-8-25><a class=lnlinks href=#hl-8-25>25</a>
</span><span class=lnt id=hl-8-26><a class=lnlinks href=#hl-8-26>26</a>
</span><span class=lnt id=hl-8-27><a class=lnlinks href=#hl-8-27>27</a>
</span><span class=lnt id=hl-8-28><a class=lnlinks href=#hl-8-28>28</a>
</span><span class=lnt id=hl-8-29><a class=lnlinks href=#hl-8-29>29</a>
</span><span class=lnt id=hl-8-30><a class=lnlinks href=#hl-8-30>30</a>
</span><span class=lnt id=hl-8-31><a class=lnlinks href=#hl-8-31>31</a>
</span><span class=lnt id=hl-8-32><a class=lnlinks href=#hl-8-32>32</a>
</span><span class=lnt id=hl-8-33><a class=lnlinks href=#hl-8-33>33</a>
</span><span class=lnt id=hl-8-34><a class=lnlinks href=#hl-8-34>34</a>
</span><span class=lnt id=hl-8-35><a class=lnlinks href=#hl-8-35>35</a>
</span><span class=lnt id=hl-8-36><a class=lnlinks href=#hl-8-36>36</a>
</span><span class=lnt id=hl-8-37><a class=lnlinks href=#hl-8-37>37</a>
</span><span class=lnt id=hl-8-38><a class=lnlinks href=#hl-8-38>38</a>
</span><span class=lnt id=hl-8-39><a class=lnlinks href=#hl-8-39>39</a>
</span><span class=lnt id=hl-8-40><a class=lnlinks href=#hl-8-40>40</a>
</span><span class=lnt id=hl-8-41><a class=lnlinks href=#hl-8-41>41</a>
</span><span class=lnt id=hl-8-42><a class=lnlinks href=#hl-8-42>42</a>
</span><span class=lnt id=hl-8-43><a class=lnlinks href=#hl-8-43>43</a>
</span><span class=lnt id=hl-8-44><a class=lnlinks href=#hl-8-44>44</a>
</span><span class=lnt id=hl-8-45><a class=lnlinks href=#hl-8-45>45</a>
</span><span class=lnt id=hl-8-46><a class=lnlinks href=#hl-8-46>46</a>
</span><span class=lnt id=hl-8-47><a class=lnlinks href=#hl-8-47>47</a>
</span><span class=lnt id=hl-8-48><a class=lnlinks href=#hl-8-48>48</a>
</span><span class=lnt id=hl-8-49><a class=lnlinks href=#hl-8-49>49</a>
</span><span class=lnt id=hl-8-50><a class=lnlinks href=#hl-8-50>50</a>
</span><span class=lnt id=hl-8-51><a class=lnlinks href=#hl-8-51>51</a>
</span><span class=lnt id=hl-8-52><a class=lnlinks href=#hl-8-52>52</a>
</span><span class=lnt id=hl-8-53><a class=lnlinks href=#hl-8-53>53</a>
</span><span class=lnt id=hl-8-54><a class=lnlinks href=#hl-8-54>54</a>
</span><span class=lnt id=hl-8-55><a class=lnlinks href=#hl-8-55>55</a>
</span><span class=lnt id=hl-8-56><a class=lnlinks href=#hl-8-56>56</a>
</span><span class=lnt id=hl-8-57><a class=lnlinks href=#hl-8-57>57</a>
</span><span class=lnt id=hl-8-58><a class=lnlinks href=#hl-8-58>58</a>
</span><span class=lnt id=hl-8-59><a class=lnlinks href=#hl-8-59>59</a>
</span><span class=lnt id=hl-8-60><a class=lnlinks href=#hl-8-60>60</a>
</span><span class=lnt id=hl-8-61><a class=lnlinks href=#hl-8-61>61</a>
</span><span class=lnt id=hl-8-62><a class=lnlinks href=#hl-8-62>62</a>
</span><span class=lnt id=hl-8-63><a class=lnlinks href=#hl-8-63>63</a>
</span><span class=lnt id=hl-8-64><a class=lnlinks href=#hl-8-64>64</a>
</span><span class=lnt id=hl-8-65><a class=lnlinks href=#hl-8-65>65</a>
</span><span class=lnt id=hl-8-66><a class=lnlinks href=#hl-8-66>66</a>
</span><span class=lnt id=hl-8-67><a class=lnlinks href=#hl-8-67>67</a>
</span><span class=lnt id=hl-8-68><a class=lnlinks href=#hl-8-68>68</a>
</span><span class=lnt id=hl-8-69><a class=lnlinks href=#hl-8-69>69</a>
</span><span class=lnt id=hl-8-70><a class=lnlinks href=#hl-8-70>70</a>
</span><span class=lnt id=hl-8-71><a class=lnlinks href=#hl-8-71>71</a>
</span><span class=lnt id=hl-8-72><a class=lnlinks href=#hl-8-72>72</a>
</span><span class=lnt id=hl-8-73><a class=lnlinks href=#hl-8-73>73</a>
</span><span class=lnt id=hl-8-74><a class=lnlinks href=#hl-8-74>74</a>
</span><span class=lnt id=hl-8-75><a class=lnlinks href=#hl-8-75>75</a>
</span><span class=lnt id=hl-8-76><a class=lnlinks href=#hl-8-76>76</a>
</span><span class=lnt id=hl-8-77><a class=lnlinks href=#hl-8-77>77</a>
</span><span class=lnt id=hl-8-78><a class=lnlinks href=#hl-8-78>78</a>
</span><span class=lnt id=hl-8-79><a class=lnlinks href=#hl-8-79>79</a>
</span><span class=lnt id=hl-8-80><a class=lnlinks href=#hl-8-80>80</a>
</span><span class=lnt id=hl-8-81><a class=lnlinks href=#hl-8-81>81</a>
</span><span class=lnt id=hl-8-82><a class=lnlinks href=#hl-8-82>82</a>
</span><span class=lnt id=hl-8-83><a class=lnlinks href=#hl-8-83>83</a>
</span><span class=lnt id=hl-8-84><a class=lnlinks href=#hl-8-84>84</a>
</span><span class=lnt id=hl-8-85><a class=lnlinks href=#hl-8-85>85</a>
</span><span class=lnt id=hl-8-86><a class=lnlinks href=#hl-8-86>86</a>
</span><span class=lnt id=hl-8-87><a class=lnlinks href=#hl-8-87>87</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>random</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>LivelockPreventionExample</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>resource</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>attempt_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>count_lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>increment_attempts</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;시도 횟수 증가 (디버깅용)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>count_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>attempt_count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>polite_acquire</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>process_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>max_attempts</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>10</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;정중한 방식으로 자원 획득 시도 (Livelock 유발 가능)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>attempt</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>max_attempts</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>increment_attempts</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>process_name</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>attempt</span> <span class=o>+</span> <span class=mi>1</span><span class=si>}</span><span class=s2>번째 시도&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>resource</span><span class=o>.</span><span class=n>acquire</span><span class=p>(</span><span class=n>blocking</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>  <span class=c1># 논블로킹 획득 시도</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>process_name</span><span class=si>}</span><span class=s2>: 자원 획득 성공!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>  <span class=c1># 작업 수행</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>resource</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>process_name</span><span class=si>}</span><span class=s2>: 자원 해제 완료&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>process_name</span><span class=si>}</span><span class=s2>: 자원 사용 중 - 양보합니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=c1># 랜덤 백오프로 Livelock 방지</span>
</span></span><span class=line><span class=cl>                <span class=n>backoff_time</span> <span class=o>=</span> <span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span><span class=mf>0.01</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>backoff_time</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>process_name</span><span class=si>}</span><span class=s2>: 최대 시도 횟수 초과&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>deterministic_acquire</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>process_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>base_delay</span><span class=p>:</span> <span class=nb>float</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;결정적 방식으로 자원 획득 (Livelock 방지)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>attempt</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=n>attempt</span> <span class=o>&lt;</span> <span class=mi>5</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>increment_attempts</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>attempt</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>process_name</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>attempt</span><span class=si>}</span><span class=s2>번째 시도&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>resource</span><span class=o>.</span><span class=n>acquire</span><span class=p>(</span><span class=n>blocking</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>process_name</span><span class=si>}</span><span class=s2>: 자원 획득 성공!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>resource</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>process_name</span><span class=si>}</span><span class=s2>: 자원 해제 완료&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1># 프로세스별로 다른 고정 지연시간 사용</span>
</span></span><span class=line><span class=cl>                <span class=n>delay</span> <span class=o>=</span> <span class=n>base_delay</span> <span class=o>*</span> <span class=n>attempt</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>process_name</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>delay</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>초 대기 후 재시도&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>delay</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Livelock 방지 테스트</span>
</span></span><span class=line><span class=cl><span class=n>example</span> <span class=o>=</span> <span class=n>LivelockPreventionExample</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>polite_process_1</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>example</span><span class=o>.</span><span class=n>polite_acquire</span><span class=p>(</span><span class=s2>&#34;정중한-프로세스-1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>polite_process_2</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>example</span><span class=o>.</span><span class=n>polite_acquire</span><span class=p>(</span><span class=s2>&#34;정중한-프로세스-2&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>deterministic_process_1</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>example</span><span class=o>.</span><span class=n>deterministic_acquire</span><span class=p>(</span><span class=s2>&#34;결정적-프로세스-1&#34;</span><span class=p>,</span> <span class=n>base_delay</span><span class=o>=</span><span class=mf>0.05</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>deterministic_process_2</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>example</span><span class=o>.</span><span class=n>deterministic_acquire</span><span class=p>(</span><span class=s2>&#34;결정적-프로세스-2&#34;</span><span class=p>,</span> <span class=n>base_delay</span><span class=o>=</span><span class=mf>0.03</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=== Livelock 방지 테스트 ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 결정적 방식으로 테스트 (더 효과적)</span>
</span></span><span class=line><span class=cl><span class=n>threads</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>deterministic_process_1</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>deterministic_process_2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>thread</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>thread</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>thread</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;총 시도 횟수: </span><span class=si>{</span><span class=n>example</span><span class=o>.</span><span class=n>attempt_count</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><h4 id=race-condition-경쟁-상태-1>Race Condition (경쟁 상태)<a hidden class=anchor aria-hidden=true href=#race-condition-경쟁-상태-1>#</a></h4><h5 id=세부-유형-분류-2>세부 유형 분류<a hidden class=anchor aria-hidden=true href=#세부-유형-분류-2>#</a></h5><table><thead><tr><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>Time-of-check to time-of-use (TOCTOU)</td><td>검사 후 사용 사이 변경 발생</td></tr><tr><td>Shared Variable Race</td><td>전역 변수 또는 참조 공유에서 충돌</td></tr><tr><td>Instruction-Level Race</td><td>CPU 명령어 간 병렬 실행 충돌</td></tr></tbody></table><h5 id=race-condition-해결-기법>Race Condition 해결 기법<a hidden class=anchor aria-hidden=true href=#race-condition-해결-기법>#</a></h5><ol><li><p><strong>동기화 원시형 (Synchronization Primitives)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a>
</span><span class=lnt id=hl-9-11><a class=lnlinks href=#hl-9-11>11</a>
</span><span class=lnt id=hl-9-12><a class=lnlinks href=#hl-9-12>12</a>
</span><span class=lnt id=hl-9-13><a class=lnlinks href=#hl-9-13>13</a>
</span><span class=lnt id=hl-9-14><a class=lnlinks href=#hl-9-14>14</a>
</span><span class=lnt id=hl-9-15><a class=lnlinks href=#hl-9-15>15</a>
</span><span class=lnt id=hl-9-16><a class=lnlinks href=#hl-9-16>16</a>
</span><span class=lnt id=hl-9-17><a class=lnlinks href=#hl-9-17>17</a>
</span><span class=lnt id=hl-9-18><a class=lnlinks href=#hl-9-18>18</a>
</span><span class=lnt id=hl-9-19><a class=lnlinks href=#hl-9-19>19</a>
</span><span class=lnt id=hl-9-20><a class=lnlinks href=#hl-9-20>20</a>
</span><span class=lnt id=hl-9-21><a class=lnlinks href=#hl-9-21>21</a>
</span><span class=lnt id=hl-9-22><a class=lnlinks href=#hl-9-22>22</a>
</span><span class=lnt id=hl-9-23><a class=lnlinks href=#hl-9-23>23</a>
</span><span class=lnt id=hl-9-24><a class=lnlinks href=#hl-9-24>24</a>
</span><span class=lnt id=hl-9-25><a class=lnlinks href=#hl-9-25>25</a>
</span><span class=lnt id=hl-9-26><a class=lnlinks href=#hl-9-26>26</a>
</span><span class=lnt id=hl-9-27><a class=lnlinks href=#hl-9-27>27</a>
</span><span class=lnt id=hl-9-28><a class=lnlinks href=#hl-9-28>28</a>
</span><span class=lnt id=hl-9-29><a class=lnlinks href=#hl-9-29>29</a>
</span><span class=lnt id=hl-9-30><a class=lnlinks href=#hl-9-30>30</a>
</span><span class=lnt id=hl-9-31><a class=lnlinks href=#hl-9-31>31</a>
</span><span class=lnt id=hl-9-32><a class=lnlinks href=#hl-9-32>32</a>
</span><span class=lnt id=hl-9-33><a class=lnlinks href=#hl-9-33>33</a>
</span><span class=lnt id=hl-9-34><a class=lnlinks href=#hl-9-34>34</a>
</span><span class=lnt id=hl-9-35><a class=lnlinks href=#hl-9-35>35</a>
</span><span class=lnt id=hl-9-36><a class=lnlinks href=#hl-9-36>36</a>
</span><span class=lnt id=hl-9-37><a class=lnlinks href=#hl-9-37>37</a>
</span><span class=lnt id=hl-9-38><a class=lnlinks href=#hl-9-38>38</a>
</span><span class=lnt id=hl-9-39><a class=lnlinks href=#hl-9-39>39</a>
</span><span class=lnt id=hl-9-40><a class=lnlinks href=#hl-9-40>40</a>
</span><span class=lnt id=hl-9-41><a class=lnlinks href=#hl-9-41>41</a>
</span><span class=lnt id=hl-9-42><a class=lnlinks href=#hl-9-42>42</a>
</span><span class=lnt id=hl-9-43><a class=lnlinks href=#hl-9-43>43</a>
</span><span class=lnt id=hl-9-44><a class=lnlinks href=#hl-9-44>44</a>
</span><span class=lnt id=hl-9-45><a class=lnlinks href=#hl-9-45>45</a>
</span><span class=lnt id=hl-9-46><a class=lnlinks href=#hl-9-46>46</a>
</span><span class=lnt id=hl-9-47><a class=lnlinks href=#hl-9-47>47</a>
</span><span class=lnt id=hl-9-48><a class=lnlinks href=#hl-9-48>48</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BankAccount</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>initial_balance</span><span class=o>=</span><span class=mi>0</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>balance</span> <span class=o>=</span> <span class=n>initial_balance</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>  <span class=c1># 뮤텍스 락 사용</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>deposit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Race Condition을 방지하는 예금 메서드&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>  <span class=c1># 임계구역 보호</span>
</span></span><span class=line><span class=cl>            <span class=n>current_balance</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>balance</span>  <span class=c1># 1. 읽기</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.001</span><span class=p>)</span>  <span class=c1># 시뮬레이션: 다른 연산 수행</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>balance</span> <span class=o>=</span> <span class=n>current_balance</span> <span class=o>+</span> <span class=n>amount</span>  <span class=c1># 2. 쓰기</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;예금 후 잔액: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>balance</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>withdraw</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Race Condition을 방지하는 출금 메서드&#34;&#34;&#34;</span>  
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>balance</span> <span class=o>&gt;=</span> <span class=n>amount</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>current_balance</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>balance</span>
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.001</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>balance</span> <span class=o>=</span> <span class=n>current_balance</span> <span class=o>-</span> <span class=n>amount</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;출금 후 잔액: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>balance</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;잔액 부족&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=n>account</span> <span class=o>=</span> <span class=n>BankAccount</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>transaction_worker</span><span class=p>(</span><span class=n>account</span><span class=p>,</span> <span class=n>operation</span><span class=p>,</span> <span class=n>amount</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;스레드에서 실행될 거래 작업&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>operation</span> <span class=o>==</span> <span class=s2>&#34;deposit&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>account</span><span class=o>.</span><span class=n>deposit</span><span class=p>(</span><span class=n>amount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>operation</span> <span class=o>==</span> <span class=s2>&#34;withdraw&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>account</span><span class=o>.</span><span class=n>withdraw</span><span class=p>(</span><span class=n>amount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 동시 거래 시뮬레이션</span>
</span></span><span class=line><span class=cl><span class=n>threads</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=n>threads</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>transaction_worker</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>account</span><span class=p>,</span> <span class=s2>&#34;deposit&#34;</span><span class=p>,</span> <span class=mi>50</span><span class=p>)))</span>
</span></span><span class=line><span class=cl><span class=n>threads</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>transaction_worker</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>account</span><span class=p>,</span> <span class=s2>&#34;withdraw&#34;</span><span class=p>,</span> <span class=mi>30</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>thread</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>thread</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>thread</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>원자적 연산 (Atomic Operations)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span><span class=lnt id=hl-10-12><a class=lnlinks href=#hl-10-12>12</a>
</span><span class=lnt id=hl-10-13><a class=lnlinks href=#hl-10-13>13</a>
</span><span class=lnt id=hl-10-14><a class=lnlinks href=#hl-10-14>14</a>
</span><span class=lnt id=hl-10-15><a class=lnlinks href=#hl-10-15>15</a>
</span><span class=lnt id=hl-10-16><a class=lnlinks href=#hl-10-16>16</a>
</span><span class=lnt id=hl-10-17><a class=lnlinks href=#hl-10-17>17</a>
</span><span class=lnt id=hl-10-18><a class=lnlinks href=#hl-10-18>18</a>
</span><span class=lnt id=hl-10-19><a class=lnlinks href=#hl-10-19>19</a>
</span><span class=lnt id=hl-10-20><a class=lnlinks href=#hl-10-20>20</a>
</span><span class=lnt id=hl-10-21><a class=lnlinks href=#hl-10-21>21</a>
</span><span class=lnt id=hl-10-22><a class=lnlinks href=#hl-10-22>22</a>
</span><span class=lnt id=hl-10-23><a class=lnlinks href=#hl-10-23>23</a>
</span><span class=lnt id=hl-10-24><a class=lnlinks href=#hl-10-24>24</a>
</span><span class=lnt id=hl-10-25><a class=lnlinks href=#hl-10-25>25</a>
</span><span class=lnt id=hl-10-26><a class=lnlinks href=#hl-10-26>26</a>
</span><span class=lnt id=hl-10-27><a class=lnlinks href=#hl-10-27>27</a>
</span><span class=lnt id=hl-10-28><a class=lnlinks href=#hl-10-28>28</a>
</span><span class=lnt id=hl-10-29><a class=lnlinks href=#hl-10-29>29</a>
</span><span class=lnt id=hl-10-30><a class=lnlinks href=#hl-10-30>30</a>
</span><span class=lnt id=hl-10-31><a class=lnlinks href=#hl-10-31>31</a>
</span><span class=lnt id=hl-10-32><a class=lnlinks href=#hl-10-32>32</a>
</span><span class=lnt id=hl-10-33><a class=lnlinks href=#hl-10-33>33</a>
</span><span class=lnt id=hl-10-34><a class=lnlinks href=#hl-10-34>34</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>concurrent.futures</span> <span class=kn>import</span> <span class=n>ThreadPoolExecutor</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AtomicCounter</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_value</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>increment</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;원자적 증가 연산&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_value</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_value</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;현재 값 읽기&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_value</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 경쟁 상황 시뮬레이션</span>
</span></span><span class=line><span class=cl><span class=n>counter</span> <span class=o>=</span> <span class=n>AtomicCounter</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>worker_thread</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;각 스레드에서 실행될 작업&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1000</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>counter</span><span class=o>.</span><span class=n>increment</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 10개 스레드로 동시 실행</span>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=n>ThreadPoolExecutor</span><span class=p>(</span><span class=n>max_workers</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span> <span class=k>as</span> <span class=n>executor</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>futures</span> <span class=o>=</span> <span class=p>[</span><span class=n>executor</span><span class=o>.</span><span class=n>submit</span><span class=p>(</span><span class=n>worker_thread</span><span class=p>)</span> <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>future</span> <span class=ow>in</span> <span class=n>futures</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>future</span><span class=o>.</span><span class=n>result</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;최종 카운터 값: </span><span class=si>{</span><span class=n>counter</span><span class=o>.</span><span class=n>get_value</span><span class=p>()</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>  <span class=c1># 예상: 10000</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><h4 id=starvation-기아-상태-1>Starvation (기아 상태)<a hidden class=anchor aria-hidden=true href=#starvation-기아-상태-1>#</a></h4><h5 id=세부-유형-분류-3>세부 유형 분류<a hidden class=anchor aria-hidden=true href=#세부-유형-분류-3>#</a></h5><table><thead><tr><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>Priority Starvation</td><td>우선순위 낮은 작업이 기회 받지 못함</td></tr><tr><td>Resource Starvation</td><td>자원 획득 실패로 인한 대기</td></tr><tr><td>CPU Starvation</td><td>CPU 타임슬라이스를 받지 못해 실행 안됨</td></tr></tbody></table><h5 id=starvation-해결-기법>Starvation 해결 기법<a hidden class=anchor aria-hidden=true href=#starvation-해결-기법>#</a></h5><ol><li><p><strong>Aging 적용</strong>: 대기 시간이 길수록 우선순위 증가</p></li><li><p><strong>우선순위 역전 방지 프로토콜 적용 (Priority Inversion Protocols)</strong></p></li><li><p><strong>공정한 큐 (Fair Queue)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1>  1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2>  2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3>  3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4>  4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5>  5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6>  6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7>  7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8>  8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9>  9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10> 10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11> 11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12> 12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13> 13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14> 14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15> 15</a>
</span><span class=lnt id=hl-11-16><a class=lnlinks href=#hl-11-16> 16</a>
</span><span class=lnt id=hl-11-17><a class=lnlinks href=#hl-11-17> 17</a>
</span><span class=lnt id=hl-11-18><a class=lnlinks href=#hl-11-18> 18</a>
</span><span class=lnt id=hl-11-19><a class=lnlinks href=#hl-11-19> 19</a>
</span><span class=lnt id=hl-11-20><a class=lnlinks href=#hl-11-20> 20</a>
</span><span class=lnt id=hl-11-21><a class=lnlinks href=#hl-11-21> 21</a>
</span><span class=lnt id=hl-11-22><a class=lnlinks href=#hl-11-22> 22</a>
</span><span class=lnt id=hl-11-23><a class=lnlinks href=#hl-11-23> 23</a>
</span><span class=lnt id=hl-11-24><a class=lnlinks href=#hl-11-24> 24</a>
</span><span class=lnt id=hl-11-25><a class=lnlinks href=#hl-11-25> 25</a>
</span><span class=lnt id=hl-11-26><a class=lnlinks href=#hl-11-26> 26</a>
</span><span class=lnt id=hl-11-27><a class=lnlinks href=#hl-11-27> 27</a>
</span><span class=lnt id=hl-11-28><a class=lnlinks href=#hl-11-28> 28</a>
</span><span class=lnt id=hl-11-29><a class=lnlinks href=#hl-11-29> 29</a>
</span><span class=lnt id=hl-11-30><a class=lnlinks href=#hl-11-30> 30</a>
</span><span class=lnt id=hl-11-31><a class=lnlinks href=#hl-11-31> 31</a>
</span><span class=lnt id=hl-11-32><a class=lnlinks href=#hl-11-32> 32</a>
</span><span class=lnt id=hl-11-33><a class=lnlinks href=#hl-11-33> 33</a>
</span><span class=lnt id=hl-11-34><a class=lnlinks href=#hl-11-34> 34</a>
</span><span class=lnt id=hl-11-35><a class=lnlinks href=#hl-11-35> 35</a>
</span><span class=lnt id=hl-11-36><a class=lnlinks href=#hl-11-36> 36</a>
</span><span class=lnt id=hl-11-37><a class=lnlinks href=#hl-11-37> 37</a>
</span><span class=lnt id=hl-11-38><a class=lnlinks href=#hl-11-38> 38</a>
</span><span class=lnt id=hl-11-39><a class=lnlinks href=#hl-11-39> 39</a>
</span><span class=lnt id=hl-11-40><a class=lnlinks href=#hl-11-40> 40</a>
</span><span class=lnt id=hl-11-41><a class=lnlinks href=#hl-11-41> 41</a>
</span><span class=lnt id=hl-11-42><a class=lnlinks href=#hl-11-42> 42</a>
</span><span class=lnt id=hl-11-43><a class=lnlinks href=#hl-11-43> 43</a>
</span><span class=lnt id=hl-11-44><a class=lnlinks href=#hl-11-44> 44</a>
</span><span class=lnt id=hl-11-45><a class=lnlinks href=#hl-11-45> 45</a>
</span><span class=lnt id=hl-11-46><a class=lnlinks href=#hl-11-46> 46</a>
</span><span class=lnt id=hl-11-47><a class=lnlinks href=#hl-11-47> 47</a>
</span><span class=lnt id=hl-11-48><a class=lnlinks href=#hl-11-48> 48</a>
</span><span class=lnt id=hl-11-49><a class=lnlinks href=#hl-11-49> 49</a>
</span><span class=lnt id=hl-11-50><a class=lnlinks href=#hl-11-50> 50</a>
</span><span class=lnt id=hl-11-51><a class=lnlinks href=#hl-11-51> 51</a>
</span><span class=lnt id=hl-11-52><a class=lnlinks href=#hl-11-52> 52</a>
</span><span class=lnt id=hl-11-53><a class=lnlinks href=#hl-11-53> 53</a>
</span><span class=lnt id=hl-11-54><a class=lnlinks href=#hl-11-54> 54</a>
</span><span class=lnt id=hl-11-55><a class=lnlinks href=#hl-11-55> 55</a>
</span><span class=lnt id=hl-11-56><a class=lnlinks href=#hl-11-56> 56</a>
</span><span class=lnt id=hl-11-57><a class=lnlinks href=#hl-11-57> 57</a>
</span><span class=lnt id=hl-11-58><a class=lnlinks href=#hl-11-58> 58</a>
</span><span class=lnt id=hl-11-59><a class=lnlinks href=#hl-11-59> 59</a>
</span><span class=lnt id=hl-11-60><a class=lnlinks href=#hl-11-60> 60</a>
</span><span class=lnt id=hl-11-61><a class=lnlinks href=#hl-11-61> 61</a>
</span><span class=lnt id=hl-11-62><a class=lnlinks href=#hl-11-62> 62</a>
</span><span class=lnt id=hl-11-63><a class=lnlinks href=#hl-11-63> 63</a>
</span><span class=lnt id=hl-11-64><a class=lnlinks href=#hl-11-64> 64</a>
</span><span class=lnt id=hl-11-65><a class=lnlinks href=#hl-11-65> 65</a>
</span><span class=lnt id=hl-11-66><a class=lnlinks href=#hl-11-66> 66</a>
</span><span class=lnt id=hl-11-67><a class=lnlinks href=#hl-11-67> 67</a>
</span><span class=lnt id=hl-11-68><a class=lnlinks href=#hl-11-68> 68</a>
</span><span class=lnt id=hl-11-69><a class=lnlinks href=#hl-11-69> 69</a>
</span><span class=lnt id=hl-11-70><a class=lnlinks href=#hl-11-70> 70</a>
</span><span class=lnt id=hl-11-71><a class=lnlinks href=#hl-11-71> 71</a>
</span><span class=lnt id=hl-11-72><a class=lnlinks href=#hl-11-72> 72</a>
</span><span class=lnt id=hl-11-73><a class=lnlinks href=#hl-11-73> 73</a>
</span><span class=lnt id=hl-11-74><a class=lnlinks href=#hl-11-74> 74</a>
</span><span class=lnt id=hl-11-75><a class=lnlinks href=#hl-11-75> 75</a>
</span><span class=lnt id=hl-11-76><a class=lnlinks href=#hl-11-76> 76</a>
</span><span class=lnt id=hl-11-77><a class=lnlinks href=#hl-11-77> 77</a>
</span><span class=lnt id=hl-11-78><a class=lnlinks href=#hl-11-78> 78</a>
</span><span class=lnt id=hl-11-79><a class=lnlinks href=#hl-11-79> 79</a>
</span><span class=lnt id=hl-11-80><a class=lnlinks href=#hl-11-80> 80</a>
</span><span class=lnt id=hl-11-81><a class=lnlinks href=#hl-11-81> 81</a>
</span><span class=lnt id=hl-11-82><a class=lnlinks href=#hl-11-82> 82</a>
</span><span class=lnt id=hl-11-83><a class=lnlinks href=#hl-11-83> 83</a>
</span><span class=lnt id=hl-11-84><a class=lnlinks href=#hl-11-84> 84</a>
</span><span class=lnt id=hl-11-85><a class=lnlinks href=#hl-11-85> 85</a>
</span><span class=lnt id=hl-11-86><a class=lnlinks href=#hl-11-86> 86</a>
</span><span class=lnt id=hl-11-87><a class=lnlinks href=#hl-11-87> 87</a>
</span><span class=lnt id=hl-11-88><a class=lnlinks href=#hl-11-88> 88</a>
</span><span class=lnt id=hl-11-89><a class=lnlinks href=#hl-11-89> 89</a>
</span><span class=lnt id=hl-11-90><a class=lnlinks href=#hl-11-90> 90</a>
</span><span class=lnt id=hl-11-91><a class=lnlinks href=#hl-11-91> 91</a>
</span><span class=lnt id=hl-11-92><a class=lnlinks href=#hl-11-92> 92</a>
</span><span class=lnt id=hl-11-93><a class=lnlinks href=#hl-11-93> 93</a>
</span><span class=lnt id=hl-11-94><a class=lnlinks href=#hl-11-94> 94</a>
</span><span class=lnt id=hl-11-95><a class=lnlinks href=#hl-11-95> 95</a>
</span><span class=lnt id=hl-11-96><a class=lnlinks href=#hl-11-96> 96</a>
</span><span class=lnt id=hl-11-97><a class=lnlinks href=#hl-11-97> 97</a>
</span><span class=lnt id=hl-11-98><a class=lnlinks href=#hl-11-98> 98</a>
</span><span class=lnt id=hl-11-99><a class=lnlinks href=#hl-11-99> 99</a>
</span><span class=lnt id=hl-11-100><a class=lnlinks href=#hl-11-100>100</a>
</span><span class=lnt id=hl-11-101><a class=lnlinks href=#hl-11-101>101</a>
</span><span class=lnt id=hl-11-102><a class=lnlinks href=#hl-11-102>102</a>
</span><span class=lnt id=hl-11-103><a class=lnlinks href=#hl-11-103>103</a>
</span><span class=lnt id=hl-11-104><a class=lnlinks href=#hl-11-104>104</a>
</span><span class=lnt id=hl-11-105><a class=lnlinks href=#hl-11-105>105</a>
</span><span class=lnt id=hl-11-106><a class=lnlinks href=#hl-11-106>106</a>
</span><span class=lnt id=hl-11-107><a class=lnlinks href=#hl-11-107>107</a>
</span><span class=lnt id=hl-11-108><a class=lnlinks href=#hl-11-108>108</a>
</span><span class=lnt id=hl-11-109><a class=lnlinks href=#hl-11-109>109</a>
</span><span class=lnt id=hl-11-110><a class=lnlinks href=#hl-11-110>110</a>
</span><span class=lnt id=hl-11-111><a class=lnlinks href=#hl-11-111>111</a>
</span><span class=lnt id=hl-11-112><a class=lnlinks href=#hl-11-112>112</a>
</span><span class=lnt id=hl-11-113><a class=lnlinks href=#hl-11-113>113</a>
</span><span class=lnt id=hl-11-114><a class=lnlinks href=#hl-11-114>114</a>
</span><span class=lnt id=hl-11-115><a class=lnlinks href=#hl-11-115>115</a>
</span><span class=lnt id=hl-11-116><a class=lnlinks href=#hl-11-116>116</a>
</span><span class=lnt id=hl-11-117><a class=lnlinks href=#hl-11-117>117</a>
</span><span class=lnt id=hl-11-118><a class=lnlinks href=#hl-11-118>118</a>
</span><span class=lnt id=hl-11-119><a class=lnlinks href=#hl-11-119>119</a>
</span><span class=lnt id=hl-11-120><a class=lnlinks href=#hl-11-120>120</a>
</span><span class=lnt id=hl-11-121><a class=lnlinks href=#hl-11-121>121</a>
</span><span class=lnt id=hl-11-122><a class=lnlinks href=#hl-11-122>122</a>
</span><span class=lnt id=hl-11-123><a class=lnlinks href=#hl-11-123>123</a>
</span><span class=lnt id=hl-11-124><a class=lnlinks href=#hl-11-124>124</a>
</span><span class=lnt id=hl-11-125><a class=lnlinks href=#hl-11-125>125</a>
</span><span class=lnt id=hl-11-126><a class=lnlinks href=#hl-11-126>126</a>
</span><span class=lnt id=hl-11-127><a class=lnlinks href=#hl-11-127>127</a>
</span><span class=lnt id=hl-11-128><a class=lnlinks href=#hl-11-128>128</a>
</span><span class=lnt id=hl-11-129><a class=lnlinks href=#hl-11-129>129</a>
</span><span class=lnt id=hl-11-130><a class=lnlinks href=#hl-11-130>130</a>
</span><span class=lnt id=hl-11-131><a class=lnlinks href=#hl-11-131>131</a>
</span><span class=lnt id=hl-11-132><a class=lnlinks href=#hl-11-132>132</a>
</span><span class=lnt id=hl-11-133><a class=lnlinks href=#hl-11-133>133</a>
</span><span class=lnt id=hl-11-134><a class=lnlinks href=#hl-11-134>134</a>
</span><span class=lnt id=hl-11-135><a class=lnlinks href=#hl-11-135>135</a>
</span><span class=lnt id=hl-11-136><a class=lnlinks href=#hl-11-136>136</a>
</span><span class=lnt id=hl-11-137><a class=lnlinks href=#hl-11-137>137</a>
</span><span class=lnt id=hl-11-138><a class=lnlinks href=#hl-11-138>138</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>queue</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>uuid</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ProcessRequest</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;프로세스 요청 정보&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>process_id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>priority</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    <span class=n>request_time</span><span class=p>:</span> <span class=nb>float</span>
</span></span><span class=line><span class=cl>    <span class=n>age</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>0.0</span>  <span class=c1># 에이징 기법용</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>FairScheduler</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;기아 상태를 방지하는 공정한 스케줄러&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>aging_factor</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>0.1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span> <span class=o>=</span> <span class=n>queue</span><span class=o>.</span><span class=n>PriorityQueue</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>resource_lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>aging_factor</span> <span class=o>=</span> <span class=n>aging_factor</span>  <span class=c1># 에이징 계수</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>queue_lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>submit_request</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>priority</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>process_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;작업 요청 제출&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>request_id</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())[:</span><span class=mi>8</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>request</span> <span class=o>=</span> <span class=n>ProcessRequest</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>process_id</span><span class=o>=</span><span class=n>process_name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>priority</span><span class=o>=</span><span class=n>priority</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>request_time</span><span class=o>=</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>queue_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 우선순위는 낮을수록 높은 우선순위 (PriorityQueue 특성)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span><span class=o>.</span><span class=n>put</span><span class=p>((</span><span class=n>priority</span><span class=p>,</span> <span class=n>request_id</span><span class=p>,</span> <span class=n>request</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;요청 제출: </span><span class=si>{</span><span class=n>process_name</span><span class=si>}</span><span class=s2> (우선순위: </span><span class=si>{</span><span class=n>priority</span><span class=si>}</span><span class=s2>, ID: </span><span class=si>{</span><span class=n>request_id</span><span class=si>}</span><span class=s2>)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>request_id</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>apply_aging</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;에이징 기법 적용 - 오래 기다린 요청의 우선순위 상승&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>queue_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>temp_queue</span> <span class=o>=</span> <span class=n>queue</span><span class=o>.</span><span class=n>PriorityQueue</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>current_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1># 모든 요청을 재평가</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span><span class=o>.</span><span class=n>empty</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>old_priority</span><span class=p>,</span> <span class=n>request_id</span><span class=p>,</span> <span class=n>request</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span><span class=o>.</span><span class=n>get_nowait</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    <span class=c1># 대기 시간에 따른 우선순위 조정</span>
</span></span><span class=line><span class=cl>                    <span class=n>wait_time</span> <span class=o>=</span> <span class=n>current_time</span> <span class=o>-</span> <span class=n>request</span><span class=o>.</span><span class=n>request_time</span>
</span></span><span class=line><span class=cl>                    <span class=n>age_bonus</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>wait_time</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>aging_factor</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=n>new_priority</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>old_priority</span> <span class=o>-</span> <span class=n>age_bonus</span><span class=p>)</span>  <span class=c1># 최소 우선순위 1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>new_priority</span> <span class=o>!=</span> <span class=n>old_priority</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;에이징: </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>process_id</span><span class=si>}</span><span class=s2> 우선순위 </span><span class=si>{</span><span class=n>old_priority</span><span class=si>}</span><span class=s2> → </span><span class=si>{</span><span class=n>new_priority</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    <span class=n>temp_queue</span><span class=o>.</span><span class=n>put</span><span class=p>((</span><span class=n>new_priority</span><span class=p>,</span> <span class=n>request_id</span><span class=p>,</span> <span class=n>request</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=k>except</span> <span class=n>queue</span><span class=o>.</span><span class=n>Empty</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>break</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span> <span class=o>=</span> <span class=n>temp_queue</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_requests</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>max_requests</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>10</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;요청 처리 - 기아 상태 방지&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>processed</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=n>processed</span> <span class=o>&lt;</span> <span class=n>max_requests</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 주기적으로 에이징 적용</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>processed</span> <span class=o>%</span> <span class=mi>3</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>apply_aging</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>queue_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span><span class=o>.</span><span class=n>empty</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                        <span class=k>break</span>
</span></span><span class=line><span class=cl>                    <span class=n>priority</span><span class=p>,</span> <span class=n>request_id</span><span class=p>,</span> <span class=n>request</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span><span class=o>.</span><span class=n>get_nowait</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=c1># 자원 사용 시뮬레이션</span>
</span></span><span class=line><span class=cl>                <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>resource_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>wait_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>request</span><span class=o>.</span><span class=n>request_time</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;처리 시작: </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>process_id</span><span class=si>}</span><span class=s2> (대기시간: </span><span class=si>{</span><span class=n>wait_time</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>초)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.2</span><span class=p>)</span>  <span class=c1># 작업 시뮬레이션</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;처리 완료: </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>process_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=n>processed</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=n>queue</span><span class=o>.</span><span class=n>Empty</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>  <span class=c1># 새 요청 대기</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;총 </span><span class=si>{</span><span class=n>processed</span><span class=si>}</span><span class=s2>개 요청 처리 완료&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 기아 상태 방지 테스트</span>
</span></span><span class=line><span class=cl><span class=n>scheduler</span> <span class=o>=</span> <span class=n>FairScheduler</span><span class=p>(</span><span class=n>aging_factor</span><span class=o>=</span><span class=mf>2.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>high_priority_requester</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;높은 우선순위 요청자 (기아 상태 유발 가능)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>scheduler</span><span class=o>.</span><span class=n>submit_request</span><span class=p>(</span><span class=n>priority</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>process_name</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;고우선순위-</span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>low_priority_requester</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;낮은 우선순위 요청자 (기아 상태 위험)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>3</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>scheduler</span><span class=o>.</span><span class=n>submit_request</span><span class=p>(</span><span class=n>priority</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span> <span class=n>process_name</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;저우선순위-</span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>medium_priority_requester</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;중간 우선순위 요청자&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>4</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>scheduler</span><span class=o>.</span><span class=n>submit_request</span><span class=p>(</span><span class=n>priority</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span> <span class=n>process_name</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;중우선순위-</span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=== 기아 상태 방지 테스트 시작 ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 요청자 스레드들 시작</span>
</span></span><span class=line><span class=cl><span class=n>requesters</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>high_priority_requester</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>low_priority_requester</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>medium_priority_requester</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>requester</span> <span class=ow>in</span> <span class=n>requesters</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>requester</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 잠시 후 처리 시작</span>
</span></span><span class=line><span class=cl><span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>1.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>processor_thread</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=k>lambda</span><span class=p>:</span> <span class=n>scheduler</span><span class=o>.</span><span class=n>process_requests</span><span class=p>(</span><span class=mi>15</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>processor_thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 모든 스레드 완료 대기</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>requester</span> <span class=ow>in</span> <span class=n>requesters</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>requester</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>processor_thread</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=== 테스트 완료 ===&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><h3 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h3><table><thead><tr><th>시스템 환경</th><th>동시성 문제</th><th>실제 사례 설명</th><th>대응 기술 및 전략</th></tr></thead><tbody><tr><td>RDBMS 트랜잭션 처리</td><td>Deadlock</td><td>트랜잭션 간 자원 점유 순서 충돌로 교착 발생</td><td>Lock ordering, 타임아웃, DB 탐지 기능</td></tr><tr><td>이더넷/무선 네트워크 충돌 회피</td><td>Livelock</td><td>백오프 후 재시도 타이밍이 겹쳐 충돌 무한 반복</td><td>Randomized exponential backoff, 재시도 제한</td></tr><tr><td>멀티스레드 주문 처리 서버 (Node.js, Java 등)</td><td>Race Condition</td><td>공유 변수 동시에 수정하여 값 불일치 발생</td><td>Mutex, Atomic, ThreadLocal, Lock-free 자료구조</td></tr><tr><td>운영체제 스케줄러 / 스레드풀</td><td>Starvation</td><td>저우선 태스크가 무기한 대기하며 실행되지 못함</td><td>공정 스케줄링 (CFS), 우선순위 조정 (Aging), 라운드로빈 등</td></tr></tbody></table><p>동시성 문제는 실제 시스템 운영에서 매우 현실적인 리스크로 존재하며, 각 문제는 고유한 맥락에서 발생한다.</p><p>예를 들어 <strong>Deadlock</strong>은 트랜잭션 처리 시스템에서 자주 발생하며, 정해진 자원 접근 순서를 지키지 않으면 순환 대기가 유발된다. 이 경우 단순한 타임아웃 설정이나 트랜잭션 롤백이 근본적인 해결책이 될 수 있다. 반면 <strong>Livelock</strong>은 재시도 기반 네트워크 시스템에서 종종 발생하며, 단순한 회피 로직이 오히려 무한 반복을 유도할 수 있기 때문에 백오프 전략의 난수화를 통해 조율하는 것이 중요하다.</p><p><strong>Race Condition</strong>은 특히 멀티스레드 환경에서 예측하기 어려운 결과를 낳으며, 이를 예방하기 위해선 적절한 동기화 기법과 공유 자원 구조에 대한 설계 개선이 필수적이다. 마지막으로 <strong>Starvation</strong>은 공정하지 않은 스케줄링 정책에서 발생하며, 우선순위만 강조할 경우 특정 태스크가 시스템 내에서 무시될 수 있다. 이러한 문제를 해결하려면 Aging, CFS 등 우선순위 재조정 또는 공정성 기반 스케줄링 기법이 요구된다.</p><p>이처럼 실제 시스템에서의 동시성 문제는 이론과 달리 복합적으로 얽혀 있으며, 문제 발생 전 설계 단계에서부터 명확한 정책 수립과 대응 전략 구성이 필수적이다.</p><h4 id=상세-활용-사례>상세 활용 사례<a hidden class=anchor aria-hidden=true href=#상세-활용-사례>#</a></h4><p><strong>비교 시나리오</strong>: 고성능 전자상거래 시스템의 재고 관리</p><p><strong>시스템 구성 다이어그램</strong>:</p><pre class=mermaid>graph TB
    subgraph &#34;전자상거래 재고 시스템&#34;
        Client[클라이언트 요청] --&gt; LB[로드 밸런서]
        LB --&gt; API1[API 서버 1]
        LB --&gt; API2[API 서버 2]
        LB --&gt; API3[API 서버 3]
        
        API1 --&gt; Cache[Redis 캐시]
        API2 --&gt; Cache
        API3 --&gt; Cache
        
        Cache --&gt; DB[(PostgreSQL&lt;br/&gt;재고 DB)]
        
        API1 --&gt; Queue[메시지 큐]
        API2 --&gt; Queue  
        API3 --&gt; Queue
        
        Queue --&gt; Worker1[재고 업데이트&lt;br/&gt;워커 1]
        Queue --&gt; Worker2[재고 업데이트&lt;br/&gt;워커 2]
        
        Worker1 --&gt; DB
        Worker2 --&gt; DB
    end
</pre><h5 id=각-문제별-발생-시나리오와-해결책>각 문제별 발생 시나리오와 해결책<a hidden class=anchor aria-hidden=true href=#각-문제별-발생-시나리오와-해결책>#</a></h5><h6 id=race-condition-사례>Race Condition 사례<a hidden class=anchor aria-hidden=true href=#race-condition-사례>#</a></h6><p><strong>상황</strong>: 동시에 마지막 재고 1 개를 두 고객이 주문</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1> 1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2> 2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3> 3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4> 4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5> 5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6> 6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7> 7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8> 8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9> 9</a>
</span><span class=lnt id=hl-13-10><a class=lnlinks href=#hl-13-10>10</a>
</span><span class=lnt id=hl-13-11><a class=lnlinks href=#hl-13-11>11</a>
</span><span class=lnt id=hl-13-12><a class=lnlinks href=#hl-13-12>12</a>
</span><span class=lnt id=hl-13-13><a class=lnlinks href=#hl-13-13>13</a>
</span><span class=lnt id=hl-13-14><a class=lnlinks href=#hl-13-14>14</a>
</span><span class=lnt id=hl-13-15><a class=lnlinks href=#hl-13-15>15</a>
</span><span class=lnt id=hl-13-16><a class=lnlinks href=#hl-13-16>16</a>
</span><span class=lnt id=hl-13-17><a class=lnlinks href=#hl-13-17>17</a>
</span><span class=lnt id=hl-13-18><a class=lnlinks href=#hl-13-18>18</a>
</span><span class=lnt id=hl-13-19><a class=lnlinks href=#hl-13-19>19</a>
</span><span class=lnt id=hl-13-20><a class=lnlinks href=#hl-13-20>20</a>
</span><span class=lnt id=hl-13-21><a class=lnlinks href=#hl-13-21>21</a>
</span><span class=lnt id=hl-13-22><a class=lnlinks href=#hl-13-22>22</a>
</span><span class=lnt id=hl-13-23><a class=lnlinks href=#hl-13-23>23</a>
</span><span class=lnt id=hl-13-24><a class=lnlinks href=#hl-13-24>24</a>
</span><span class=lnt id=hl-13-25><a class=lnlinks href=#hl-13-25>25</a>
</span><span class=lnt id=hl-13-26><a class=lnlinks href=#hl-13-26>26</a>
</span><span class=lnt id=hl-13-27><a class=lnlinks href=#hl-13-27>27</a>
</span><span class=lnt id=hl-13-28><a class=lnlinks href=#hl-13-28>28</a>
</span><span class=lnt id=hl-13-29><a class=lnlinks href=#hl-13-29>29</a>
</span><span class=lnt id=hl-13-30><a class=lnlinks href=#hl-13-30>30</a>
</span><span class=lnt id=hl-13-31><a class=lnlinks href=#hl-13-31>31</a>
</span><span class=lnt id=hl-13-32><a class=lnlinks href=#hl-13-32>32</a>
</span><span class=lnt id=hl-13-33><a class=lnlinks href=#hl-13-33>33</a>
</span><span class=lnt id=hl-13-34><a class=lnlinks href=#hl-13-34>34</a>
</span><span class=lnt id=hl-13-35><a class=lnlinks href=#hl-13-35>35</a>
</span><span class=lnt id=hl-13-36><a class=lnlinks href=#hl-13-36>36</a>
</span><span class=lnt id=hl-13-37><a class=lnlinks href=#hl-13-37>37</a>
</span><span class=lnt id=hl-13-38><a class=lnlinks href=#hl-13-38>38</a>
</span><span class=lnt id=hl-13-39><a class=lnlinks href=#hl-13-39>39</a>
</span><span class=lnt id=hl-13-40><a class=lnlinks href=#hl-13-40>40</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 문제가 있는 코드 (Race Condition 발생)</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>InventoryManager</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>inventory</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;product_123&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>}</span>  <span class=c1># 재고 1개</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>purchase_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 1. 재고 확인 (READ)</span>
</span></span><span class=line><span class=cl>        <span class=n>current_stock</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>inventory</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>product_id</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;고객 </span><span class=si>{</span><span class=n>customer_id</span><span class=si>}</span><span class=s2>: 현재 재고 </span><span class=si>{</span><span class=n>current_stock</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>current_stock</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>  <span class=c1># 네트워크 지연 시뮬레이션</span>
</span></span><span class=line><span class=cl>            <span class=c1># 2. 재고 감소 (WRITE) - 여기서 Race Condition 발생!</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>inventory</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>current_stock</span> <span class=o>-</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;고객 </span><span class=si>{</span><span class=n>customer_id</span><span class=si>}</span><span class=s2>: 구매 성공! 남은 재고: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>inventory</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;고객 </span><span class=si>{</span><span class=n>customer_id</span><span class=si>}</span><span class=s2>: 재고 부족&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 해결된 코드 (Atomic Operations 사용)</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SafeInventoryManager</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>inventory</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;product_123&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>purchase_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>  <span class=c1># 원자적 연산 보장</span>
</span></span><span class=line><span class=cl>            <span class=n>current_stock</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>inventory</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>product_id</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;고객 </span><span class=si>{</span><span class=n>customer_id</span><span class=si>}</span><span class=s2>: 현재 재고 </span><span class=si>{</span><span class=n>current_stock</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>current_stock</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>inventory</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>current_stock</span> <span class=o>-</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;고객 </span><span class=si>{</span><span class=n>customer_id</span><span class=si>}</span><span class=s2>: 구매 성공! 남은 재고: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>inventory</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;고객 </span><span class=si>{</span><span class=n>customer_id</span><span class=si>}</span><span class=s2>: 재고 부족&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>False</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=deadlock-사례>Deadlock 사례<a hidden class=anchor aria-hidden=true href=#deadlock-사례>#</a></h6><p><strong>상황</strong>: 주문 처리 시 사용자 계정과 재고를 동시에 잠금</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1> 1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2> 2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3> 3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4> 4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5> 5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6> 6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7> 7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8> 8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9> 9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10>10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11>11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12>12</a>
</span><span class=lnt id=hl-14-13><a class=lnlinks href=#hl-14-13>13</a>
</span><span class=lnt id=hl-14-14><a class=lnlinks href=#hl-14-14>14</a>
</span><span class=lnt id=hl-14-15><a class=lnlinks href=#hl-14-15>15</a>
</span><span class=lnt id=hl-14-16><a class=lnlinks href=#hl-14-16>16</a>
</span><span class=lnt id=hl-14-17><a class=lnlinks href=#hl-14-17>17</a>
</span><span class=lnt id=hl-14-18><a class=lnlinks href=#hl-14-18>18</a>
</span><span class=lnt id=hl-14-19><a class=lnlinks href=#hl-14-19>19</a>
</span><span class=lnt id=hl-14-20><a class=lnlinks href=#hl-14-20>20</a>
</span><span class=lnt id=hl-14-21><a class=lnlinks href=#hl-14-21>21</a>
</span><span class=lnt id=hl-14-22><a class=lnlinks href=#hl-14-22>22</a>
</span><span class=lnt id=hl-14-23><a class=lnlinks href=#hl-14-23>23</a>
</span><span class=lnt id=hl-14-24><a class=lnlinks href=#hl-14-24>24</a>
</span><span class=lnt id=hl-14-25><a class=lnlinks href=#hl-14-25>25</a>
</span><span class=lnt id=hl-14-26><a class=lnlinks href=#hl-14-26>26</a>
</span><span class=lnt id=hl-14-27><a class=lnlinks href=#hl-14-27>27</a>
</span><span class=lnt id=hl-14-28><a class=lnlinks href=#hl-14-28>28</a>
</span><span class=lnt id=hl-14-29><a class=lnlinks href=#hl-14-29>29</a>
</span><span class=lnt id=hl-14-30><a class=lnlinks href=#hl-14-30>30</a>
</span><span class=lnt id=hl-14-31><a class=lnlinks href=#hl-14-31>31</a>
</span><span class=lnt id=hl-14-32><a class=lnlinks href=#hl-14-32>32</a>
</span><span class=lnt id=hl-14-33><a class=lnlinks href=#hl-14-33>33</a>
</span><span class=lnt id=hl-14-34><a class=lnlinks href=#hl-14-34>34</a>
</span><span class=lnt id=hl-14-35><a class=lnlinks href=#hl-14-35>35</a>
</span><span class=lnt id=hl-14-36><a class=lnlinks href=#hl-14-36>36</a>
</span><span class=lnt id=hl-14-37><a class=lnlinks href=#hl-14-37>37</a>
</span><span class=lnt id=hl-14-38><a class=lnlinks href=#hl-14-38>38</a>
</span><span class=lnt id=hl-14-39><a class=lnlinks href=#hl-14-39>39</a>
</span><span class=lnt id=hl-14-40><a class=lnlinks href=#hl-14-40>40</a>
</span><span class=lnt id=hl-14-41><a class=lnlinks href=#hl-14-41>41</a>
</span><span class=lnt id=hl-14-42><a class=lnlinks href=#hl-14-42>42</a>
</span><span class=lnt id=hl-14-43><a class=lnlinks href=#hl-14-43>43</a>
</span><span class=lnt id=hl-14-44><a class=lnlinks href=#hl-14-44>44</a>
</span><span class=lnt id=hl-14-45><a class=lnlinks href=#hl-14-45>45</a>
</span><span class=lnt id=hl-14-46><a class=lnlinks href=#hl-14-46>46</a>
</span><span class=lnt id=hl-14-47><a class=lnlinks href=#hl-14-47>47</a>
</span><span class=lnt id=hl-14-48><a class=lnlinks href=#hl-14-48>48</a>
</span><span class=lnt id=hl-14-49><a class=lnlinks href=#hl-14-49>49</a>
</span><span class=lnt id=hl-14-50><a class=lnlinks href=#hl-14-50>50</a>
</span><span class=lnt id=hl-14-51><a class=lnlinks href=#hl-14-51>51</a>
</span><span class=lnt id=hl-14-52><a class=lnlinks href=#hl-14-52>52</a>
</span><span class=lnt id=hl-14-53><a class=lnlinks href=#hl-14-53>53</a>
</span><span class=lnt id=hl-14-54><a class=lnlinks href=#hl-14-54>54</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderProcessor</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>account_locks</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># 계정별 락</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>inventory_locks</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># 상품별 락</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_or_create_lock</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>locks_dict</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;락 딕셔너리에서 락을 가져오거나 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>locks_dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>locks_dict</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>locks_dict</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_order_safe</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>product_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>amount</span><span class=p>:</span> <span class=nb>float</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;데드락을 방지하는 주문 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>account_lock</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_or_create_lock</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>account_locks</span><span class=p>,</span> <span class=n>user_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>inventory_lock</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_or_create_lock</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>inventory_locks</span><span class=p>,</span> <span class=n>product_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 락 순서를 일관되게 유지 (ID 기준 정렬)</span>
</span></span><span class=line><span class=cl>        <span class=n>locks_to_acquire</span> <span class=o>=</span> <span class=p>[(</span><span class=n>user_id</span><span class=p>,</span> <span class=n>account_lock</span><span class=p>),</span> <span class=p>(</span><span class=n>product_id</span><span class=p>,</span> <span class=n>inventory_lock</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>        <span class=n>locks_to_acquire</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>  <span class=c1># ID로 정렬</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>acquired_locks</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>lock_id</span><span class=p>,</span> <span class=n>lock</span> <span class=ow>in</span> <span class=n>locks_to_acquire</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;락 획득 시도: </span><span class=si>{</span><span class=n>lock_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>lock</span><span class=o>.</span><span class=n>acquire</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=n>acquired_locks</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>lock</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;락 획득 완료: </span><span class=si>{</span><span class=n>lock_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 실제 주문 처리 로직</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;주문 처리 중: 사용자 </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>, 상품 </span><span class=si>{</span><span class=n>product_id</span><span class=si>}</span><span class=s2>, 금액 $</span><span class=si>{</span><span class=n>amount</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>  <span class=c1># 처리 시간 시뮬레이션</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;주문 처리 완료: 사용자 </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 역순으로 락 해제</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>lock</span> <span class=ow>in</span> <span class=nb>reversed</span><span class=p>(</span><span class=n>acquired_locks</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=n>lock</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;락 해제 완료&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 데드락 테스트</span>
</span></span><span class=line><span class=cl><span class=n>processor</span> <span class=o>=</span> <span class=n>OrderProcessor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>order_1</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>processor</span><span class=o>.</span><span class=n>process_order_safe</span><span class=p>(</span><span class=s2>&#34;user_A&#34;</span><span class=p>,</span> <span class=s2>&#34;product_X&#34;</span><span class=p>,</span> <span class=mf>99.99</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>order_2</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>processor</span><span class=o>.</span><span class=n>process_order_safe</span><span class=p>(</span><span class=s2>&#34;user_B&#34;</span><span class=p>,</span> <span class=s2>&#34;product_Y&#34;</span><span class=p>,</span> <span class=mf>149.99</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 동시 실행으로 데드락 테스트</span>
</span></span><span class=line><span class=cl><span class=n>threads</span> <span class=o>=</span> <span class=p>[</span><span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>order_1</span><span class=p>),</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>order_2</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>t</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>t</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>t</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>t</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=livelock-사례>Livelock 사례<a hidden class=anchor aria-hidden=true href=#livelock-사례>#</a></h6><p><strong>상황</strong>: 분산 재고 동기화에서 충돌 회피 시도</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1> 1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2> 2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3> 3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4> 4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5> 5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6> 6</a>
</span><span class=lnt id=hl-15-7><a class=lnlinks href=#hl-15-7> 7</a>
</span><span class=lnt id=hl-15-8><a class=lnlinks href=#hl-15-8> 8</a>
</span><span class=lnt id=hl-15-9><a class=lnlinks href=#hl-15-9> 9</a>
</span><span class=lnt id=hl-15-10><a class=lnlinks href=#hl-15-10>10</a>
</span><span class=lnt id=hl-15-11><a class=lnlinks href=#hl-15-11>11</a>
</span><span class=lnt id=hl-15-12><a class=lnlinks href=#hl-15-12>12</a>
</span><span class=lnt id=hl-15-13><a class=lnlinks href=#hl-15-13>13</a>
</span><span class=lnt id=hl-15-14><a class=lnlinks href=#hl-15-14>14</a>
</span><span class=lnt id=hl-15-15><a class=lnlinks href=#hl-15-15>15</a>
</span><span class=lnt id=hl-15-16><a class=lnlinks href=#hl-15-16>16</a>
</span><span class=lnt id=hl-15-17><a class=lnlinks href=#hl-15-17>17</a>
</span><span class=lnt id=hl-15-18><a class=lnlinks href=#hl-15-18>18</a>
</span><span class=lnt id=hl-15-19><a class=lnlinks href=#hl-15-19>19</a>
</span><span class=lnt id=hl-15-20><a class=lnlinks href=#hl-15-20>20</a>
</span><span class=lnt id=hl-15-21><a class=lnlinks href=#hl-15-21>21</a>
</span><span class=lnt id=hl-15-22><a class=lnlinks href=#hl-15-22>22</a>
</span><span class=lnt id=hl-15-23><a class=lnlinks href=#hl-15-23>23</a>
</span><span class=lnt id=hl-15-24><a class=lnlinks href=#hl-15-24>24</a>
</span><span class=lnt id=hl-15-25><a class=lnlinks href=#hl-15-25>25</a>
</span><span class=lnt id=hl-15-26><a class=lnlinks href=#hl-15-26>26</a>
</span><span class=lnt id=hl-15-27><a class=lnlinks href=#hl-15-27>27</a>
</span><span class=lnt id=hl-15-28><a class=lnlinks href=#hl-15-28>28</a>
</span><span class=lnt id=hl-15-29><a class=lnlinks href=#hl-15-29>29</a>
</span><span class=lnt id=hl-15-30><a class=lnlinks href=#hl-15-30>30</a>
</span><span class=lnt id=hl-15-31><a class=lnlinks href=#hl-15-31>31</a>
</span><span class=lnt id=hl-15-32><a class=lnlinks href=#hl-15-32>32</a>
</span><span class=lnt id=hl-15-33><a class=lnlinks href=#hl-15-33>33</a>
</span><span class=lnt id=hl-15-34><a class=lnlinks href=#hl-15-34>34</a>
</span><span class=lnt id=hl-15-35><a class=lnlinks href=#hl-15-35>35</a>
</span><span class=lnt id=hl-15-36><a class=lnlinks href=#hl-15-36>36</a>
</span><span class=lnt id=hl-15-37><a class=lnlinks href=#hl-15-37>37</a>
</span><span class=lnt id=hl-15-38><a class=lnlinks href=#hl-15-38>38</a>
</span><span class=lnt id=hl-15-39><a class=lnlinks href=#hl-15-39>39</a>
</span><span class=lnt id=hl-15-40><a class=lnlinks href=#hl-15-40>40</a>
</span><span class=lnt id=hl-15-41><a class=lnlinks href=#hl-15-41>41</a>
</span><span class=lnt id=hl-15-42><a class=lnlinks href=#hl-15-42>42</a>
</span><span class=lnt id=hl-15-43><a class=lnlinks href=#hl-15-43>43</a>
</span><span class=lnt id=hl-15-44><a class=lnlinks href=#hl-15-44>44</a>
</span><span class=lnt id=hl-15-45><a class=lnlinks href=#hl-15-45>45</a>
</span><span class=lnt id=hl-15-46><a class=lnlinks href=#hl-15-46>46</a>
</span><span class=lnt id=hl-15-47><a class=lnlinks href=#hl-15-47>47</a>
</span><span class=lnt id=hl-15-48><a class=lnlinks href=#hl-15-48>48</a>
</span><span class=lnt id=hl-15-49><a class=lnlinks href=#hl-15-49>49</a>
</span><span class=lnt id=hl-15-50><a class=lnlinks href=#hl-15-50>50</a>
</span><span class=lnt id=hl-15-51><a class=lnlinks href=#hl-15-51>51</a>
</span><span class=lnt id=hl-15-52><a class=lnlinks href=#hl-15-52>52</a>
</span><span class=lnt id=hl-15-53><a class=lnlinks href=#hl-15-53>53</a>
</span><span class=lnt id=hl-15-54><a class=lnlinks href=#hl-15-54>54</a>
</span><span class=lnt id=hl-15-55><a class=lnlinks href=#hl-15-55>55</a>
</span><span class=lnt id=hl-15-56><a class=lnlinks href=#hl-15-56>56</a>
</span><span class=lnt id=hl-15-57><a class=lnlinks href=#hl-15-57>57</a>
</span><span class=lnt id=hl-15-58><a class=lnlinks href=#hl-15-58>58</a>
</span><span class=lnt id=hl-15-59><a class=lnlinks href=#hl-15-59>59</a>
</span><span class=lnt id=hl-15-60><a class=lnlinks href=#hl-15-60>60</a>
</span><span class=lnt id=hl-15-61><a class=lnlinks href=#hl-15-61>61</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>random</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>DistributedInventorySync</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>local_inventory</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>sync_lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>version</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>sync_with_remote_fixed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>node_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>remote_data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;고정 백오프를 사용한 Livelock 방지 동기화&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>base_delay</span> <span class=o>=</span> <span class=mf>0.1</span> <span class=o>*</span> <span class=nb>int</span><span class=p>(</span><span class=n>node_id</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>])</span>  <span class=c1># 노드 ID 기반 고정 지연</span>
</span></span><span class=line><span class=cl>        <span class=n>max_attempts</span> <span class=o>=</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>attempt</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>max_attempts</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>sync_lock</span><span class=o>.</span><span class=n>acquire</span><span class=p>(</span><span class=n>blocking</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;노드 </span><span class=si>{</span><span class=n>node_id</span><span class=si>}</span><span class=s2>: 동기화 시작 (시도 </span><span class=si>{</span><span class=n>attempt</span> <span class=o>+</span> <span class=mi>1</span><span class=si>}</span><span class=s2>)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=c1># 동기화 로직</span>
</span></span><span class=line><span class=cl>                    <span class=k>for</span> <span class=n>product_id</span><span class=p>,</span> <span class=n>quantity</span> <span class=ow>in</span> <span class=n>remote_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                        <span class=k>if</span> <span class=n>product_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>local_inventory</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                            <span class=c1># 버전 기반 충돌 해결</span>
</span></span><span class=line><span class=cl>                            <span class=bp>self</span><span class=o>.</span><span class=n>local_inventory</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                                <span class=bp>self</span><span class=o>.</span><span class=n>local_inventory</span><span class=p>[</span><span class=n>product_id</span><span class=p>],</span> <span class=n>quantity</span>
</span></span><span class=line><span class=cl>                            <span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                            <span class=bp>self</span><span class=o>.</span><span class=n>local_inventory</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>quantity</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>version</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;노드 </span><span class=si>{</span><span class=n>node_id</span><span class=si>}</span><span class=s2>: 동기화 완료 (버전 </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>version</span><span class=si>}</span><span class=s2>)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>sync_lock</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;노드 </span><span class=si>{</span><span class=n>node_id</span><span class=si>}</span><span class=s2>: 동기화 중 - </span><span class=si>{</span><span class=n>base_delay</span> <span class=o>*</span> <span class=p>(</span><span class=n>attempt</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>초 대기&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>base_delay</span> <span class=o>*</span> <span class=p>(</span><span class=n>attempt</span> <span class=o>+</span> <span class=mi>1</span><span class=p>))</span>  <span class=c1># 고정 백오프</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;노드 </span><span class=si>{</span><span class=n>node_id</span><span class=si>}</span><span class=s2>: 동기화 실패 - 최대 시도 초과&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Livelock 방지 테스트</span>
</span></span><span class=line><span class=cl><span class=n>inventory_sync</span> <span class=o>=</span> <span class=n>DistributedInventorySync</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>inventory_sync</span><span class=o>.</span><span class=n>local_inventory</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;product_A&#34;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span> <span class=s2>&#34;product_B&#34;</span><span class=p>:</span> <span class=mi>20</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>sync_node_1</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>remote_data</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;product_A&#34;</span><span class=p>:</span> <span class=mi>15</span><span class=p>,</span> <span class=s2>&#34;product_C&#34;</span><span class=p>:</span> <span class=mi>5</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>inventory_sync</span><span class=o>.</span><span class=n>sync_with_remote_fixed</span><span class=p>(</span><span class=s2>&#34;node_1&#34;</span><span class=p>,</span> <span class=n>remote_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>sync_node_2</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>remote_data</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;product_B&#34;</span><span class=p>:</span> <span class=mi>25</span><span class=p>,</span> <span class=s2>&#34;product_D&#34;</span><span class=p>:</span> <span class=mi>8</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>inventory_sync</span><span class=o>.</span><span class=n>sync_with_remote_fixed</span><span class=p>(</span><span class=s2>&#34;node_2&#34;</span><span class=p>,</span> <span class=n>remote_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 동시 동기화 테스트</span>
</span></span><span class=line><span class=cl><span class=n>threads</span> <span class=o>=</span> <span class=p>[</span><span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>sync_node_1</span><span class=p>),</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>sync_node_2</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>t</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>t</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>t</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>t</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;최종 재고: </span><span class=si>{</span><span class=n>inventory_sync</span><span class=o>.</span><span class=n>local_inventory</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=starvation-사례>Starvation 사례<a hidden class=anchor aria-hidden=true href=#starvation-사례>#</a></h6><p><strong>상황</strong>: VIP 고객 우선 처리로 인한 일반 고객 기아 상태</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1>  1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2>  2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3>  3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4>  4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5>  5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6>  6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7>  7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8>  8</a>
</span><span class=lnt id=hl-16-9><a class=lnlinks href=#hl-16-9>  9</a>
</span><span class=lnt id=hl-16-10><a class=lnlinks href=#hl-16-10> 10</a>
</span><span class=lnt id=hl-16-11><a class=lnlinks href=#hl-16-11> 11</a>
</span><span class=lnt id=hl-16-12><a class=lnlinks href=#hl-16-12> 12</a>
</span><span class=lnt id=hl-16-13><a class=lnlinks href=#hl-16-13> 13</a>
</span><span class=lnt id=hl-16-14><a class=lnlinks href=#hl-16-14> 14</a>
</span><span class=lnt id=hl-16-15><a class=lnlinks href=#hl-16-15> 15</a>
</span><span class=lnt id=hl-16-16><a class=lnlinks href=#hl-16-16> 16</a>
</span><span class=lnt id=hl-16-17><a class=lnlinks href=#hl-16-17> 17</a>
</span><span class=lnt id=hl-16-18><a class=lnlinks href=#hl-16-18> 18</a>
</span><span class=lnt id=hl-16-19><a class=lnlinks href=#hl-16-19> 19</a>
</span><span class=lnt id=hl-16-20><a class=lnlinks href=#hl-16-20> 20</a>
</span><span class=lnt id=hl-16-21><a class=lnlinks href=#hl-16-21> 21</a>
</span><span class=lnt id=hl-16-22><a class=lnlinks href=#hl-16-22> 22</a>
</span><span class=lnt id=hl-16-23><a class=lnlinks href=#hl-16-23> 23</a>
</span><span class=lnt id=hl-16-24><a class=lnlinks href=#hl-16-24> 24</a>
</span><span class=lnt id=hl-16-25><a class=lnlinks href=#hl-16-25> 25</a>
</span><span class=lnt id=hl-16-26><a class=lnlinks href=#hl-16-26> 26</a>
</span><span class=lnt id=hl-16-27><a class=lnlinks href=#hl-16-27> 27</a>
</span><span class=lnt id=hl-16-28><a class=lnlinks href=#hl-16-28> 28</a>
</span><span class=lnt id=hl-16-29><a class=lnlinks href=#hl-16-29> 29</a>
</span><span class=lnt id=hl-16-30><a class=lnlinks href=#hl-16-30> 30</a>
</span><span class=lnt id=hl-16-31><a class=lnlinks href=#hl-16-31> 31</a>
</span><span class=lnt id=hl-16-32><a class=lnlinks href=#hl-16-32> 32</a>
</span><span class=lnt id=hl-16-33><a class=lnlinks href=#hl-16-33> 33</a>
</span><span class=lnt id=hl-16-34><a class=lnlinks href=#hl-16-34> 34</a>
</span><span class=lnt id=hl-16-35><a class=lnlinks href=#hl-16-35> 35</a>
</span><span class=lnt id=hl-16-36><a class=lnlinks href=#hl-16-36> 36</a>
</span><span class=lnt id=hl-16-37><a class=lnlinks href=#hl-16-37> 37</a>
</span><span class=lnt id=hl-16-38><a class=lnlinks href=#hl-16-38> 38</a>
</span><span class=lnt id=hl-16-39><a class=lnlinks href=#hl-16-39> 39</a>
</span><span class=lnt id=hl-16-40><a class=lnlinks href=#hl-16-40> 40</a>
</span><span class=lnt id=hl-16-41><a class=lnlinks href=#hl-16-41> 41</a>
</span><span class=lnt id=hl-16-42><a class=lnlinks href=#hl-16-42> 42</a>
</span><span class=lnt id=hl-16-43><a class=lnlinks href=#hl-16-43> 43</a>
</span><span class=lnt id=hl-16-44><a class=lnlinks href=#hl-16-44> 44</a>
</span><span class=lnt id=hl-16-45><a class=lnlinks href=#hl-16-45> 45</a>
</span><span class=lnt id=hl-16-46><a class=lnlinks href=#hl-16-46> 46</a>
</span><span class=lnt id=hl-16-47><a class=lnlinks href=#hl-16-47> 47</a>
</span><span class=lnt id=hl-16-48><a class=lnlinks href=#hl-16-48> 48</a>
</span><span class=lnt id=hl-16-49><a class=lnlinks href=#hl-16-49> 49</a>
</span><span class=lnt id=hl-16-50><a class=lnlinks href=#hl-16-50> 50</a>
</span><span class=lnt id=hl-16-51><a class=lnlinks href=#hl-16-51> 51</a>
</span><span class=lnt id=hl-16-52><a class=lnlinks href=#hl-16-52> 52</a>
</span><span class=lnt id=hl-16-53><a class=lnlinks href=#hl-16-53> 53</a>
</span><span class=lnt id=hl-16-54><a class=lnlinks href=#hl-16-54> 54</a>
</span><span class=lnt id=hl-16-55><a class=lnlinks href=#hl-16-55> 55</a>
</span><span class=lnt id=hl-16-56><a class=lnlinks href=#hl-16-56> 56</a>
</span><span class=lnt id=hl-16-57><a class=lnlinks href=#hl-16-57> 57</a>
</span><span class=lnt id=hl-16-58><a class=lnlinks href=#hl-16-58> 58</a>
</span><span class=lnt id=hl-16-59><a class=lnlinks href=#hl-16-59> 59</a>
</span><span class=lnt id=hl-16-60><a class=lnlinks href=#hl-16-60> 60</a>
</span><span class=lnt id=hl-16-61><a class=lnlinks href=#hl-16-61> 61</a>
</span><span class=lnt id=hl-16-62><a class=lnlinks href=#hl-16-62> 62</a>
</span><span class=lnt id=hl-16-63><a class=lnlinks href=#hl-16-63> 63</a>
</span><span class=lnt id=hl-16-64><a class=lnlinks href=#hl-16-64> 64</a>
</span><span class=lnt id=hl-16-65><a class=lnlinks href=#hl-16-65> 65</a>
</span><span class=lnt id=hl-16-66><a class=lnlinks href=#hl-16-66> 66</a>
</span><span class=lnt id=hl-16-67><a class=lnlinks href=#hl-16-67> 67</a>
</span><span class=lnt id=hl-16-68><a class=lnlinks href=#hl-16-68> 68</a>
</span><span class=lnt id=hl-16-69><a class=lnlinks href=#hl-16-69> 69</a>
</span><span class=lnt id=hl-16-70><a class=lnlinks href=#hl-16-70> 70</a>
</span><span class=lnt id=hl-16-71><a class=lnlinks href=#hl-16-71> 71</a>
</span><span class=lnt id=hl-16-72><a class=lnlinks href=#hl-16-72> 72</a>
</span><span class=lnt id=hl-16-73><a class=lnlinks href=#hl-16-73> 73</a>
</span><span class=lnt id=hl-16-74><a class=lnlinks href=#hl-16-74> 74</a>
</span><span class=lnt id=hl-16-75><a class=lnlinks href=#hl-16-75> 75</a>
</span><span class=lnt id=hl-16-76><a class=lnlinks href=#hl-16-76> 76</a>
</span><span class=lnt id=hl-16-77><a class=lnlinks href=#hl-16-77> 77</a>
</span><span class=lnt id=hl-16-78><a class=lnlinks href=#hl-16-78> 78</a>
</span><span class=lnt id=hl-16-79><a class=lnlinks href=#hl-16-79> 79</a>
</span><span class=lnt id=hl-16-80><a class=lnlinks href=#hl-16-80> 80</a>
</span><span class=lnt id=hl-16-81><a class=lnlinks href=#hl-16-81> 81</a>
</span><span class=lnt id=hl-16-82><a class=lnlinks href=#hl-16-82> 82</a>
</span><span class=lnt id=hl-16-83><a class=lnlinks href=#hl-16-83> 83</a>
</span><span class=lnt id=hl-16-84><a class=lnlinks href=#hl-16-84> 84</a>
</span><span class=lnt id=hl-16-85><a class=lnlinks href=#hl-16-85> 85</a>
</span><span class=lnt id=hl-16-86><a class=lnlinks href=#hl-16-86> 86</a>
</span><span class=lnt id=hl-16-87><a class=lnlinks href=#hl-16-87> 87</a>
</span><span class=lnt id=hl-16-88><a class=lnlinks href=#hl-16-88> 88</a>
</span><span class=lnt id=hl-16-89><a class=lnlinks href=#hl-16-89> 89</a>
</span><span class=lnt id=hl-16-90><a class=lnlinks href=#hl-16-90> 90</a>
</span><span class=lnt id=hl-16-91><a class=lnlinks href=#hl-16-91> 91</a>
</span><span class=lnt id=hl-16-92><a class=lnlinks href=#hl-16-92> 92</a>
</span><span class=lnt id=hl-16-93><a class=lnlinks href=#hl-16-93> 93</a>
</span><span class=lnt id=hl-16-94><a class=lnlinks href=#hl-16-94> 94</a>
</span><span class=lnt id=hl-16-95><a class=lnlinks href=#hl-16-95> 95</a>
</span><span class=lnt id=hl-16-96><a class=lnlinks href=#hl-16-96> 96</a>
</span><span class=lnt id=hl-16-97><a class=lnlinks href=#hl-16-97> 97</a>
</span><span class=lnt id=hl-16-98><a class=lnlinks href=#hl-16-98> 98</a>
</span><span class=lnt id=hl-16-99><a class=lnlinks href=#hl-16-99> 99</a>
</span><span class=lnt id=hl-16-100><a class=lnlinks href=#hl-16-100>100</a>
</span><span class=lnt id=hl-16-101><a class=lnlinks href=#hl-16-101>101</a>
</span><span class=lnt id=hl-16-102><a class=lnlinks href=#hl-16-102>102</a>
</span><span class=lnt id=hl-16-103><a class=lnlinks href=#hl-16-103>103</a>
</span><span class=lnt id=hl-16-104><a class=lnlinks href=#hl-16-104>104</a>
</span><span class=lnt id=hl-16-105><a class=lnlinks href=#hl-16-105>105</a>
</span><span class=lnt id=hl-16-106><a class=lnlinks href=#hl-16-106>106</a>
</span><span class=lnt id=hl-16-107><a class=lnlinks href=#hl-16-107>107</a>
</span><span class=lnt id=hl-16-108><a class=lnlinks href=#hl-16-108>108</a>
</span><span class=lnt id=hl-16-109><a class=lnlinks href=#hl-16-109>109</a>
</span><span class=lnt id=hl-16-110><a class=lnlinks href=#hl-16-110>110</a>
</span><span class=lnt id=hl-16-111><a class=lnlinks href=#hl-16-111>111</a>
</span><span class=lnt id=hl-16-112><a class=lnlinks href=#hl-16-112>112</a>
</span><span class=lnt id=hl-16-113><a class=lnlinks href=#hl-16-113>113</a>
</span><span class=lnt id=hl-16-114><a class=lnlinks href=#hl-16-114>114</a>
</span><span class=lnt id=hl-16-115><a class=lnlinks href=#hl-16-115>115</a>
</span><span class=lnt id=hl-16-116><a class=lnlinks href=#hl-16-116>116</a>
</span><span class=lnt id=hl-16-117><a class=lnlinks href=#hl-16-117>117</a>
</span><span class=lnt id=hl-16-118><a class=lnlinks href=#hl-16-118>118</a>
</span><span class=lnt id=hl-16-119><a class=lnlinks href=#hl-16-119>119</a>
</span><span class=lnt id=hl-16-120><a class=lnlinks href=#hl-16-120>120</a>
</span><span class=lnt id=hl-16-121><a class=lnlinks href=#hl-16-121>121</a>
</span><span class=lnt id=hl-16-122><a class=lnlinks href=#hl-16-122>122</a>
</span><span class=lnt id=hl-16-123><a class=lnlinks href=#hl-16-123>123</a>
</span><span class=lnt id=hl-16-124><a class=lnlinks href=#hl-16-124>124</a>
</span><span class=lnt id=hl-16-125><a class=lnlinks href=#hl-16-125>125</a>
</span><span class=lnt id=hl-16-126><a class=lnlinks href=#hl-16-126>126</a>
</span><span class=lnt id=hl-16-127><a class=lnlinks href=#hl-16-127>127</a>
</span><span class=lnt id=hl-16-128><a class=lnlinks href=#hl-16-128>128</a>
</span><span class=lnt id=hl-16-129><a class=lnlinks href=#hl-16-129>129</a>
</span><span class=lnt id=hl-16-130><a class=lnlinks href=#hl-16-130>130</a>
</span><span class=lnt id=hl-16-131><a class=lnlinks href=#hl-16-131>131</a>
</span><span class=lnt id=hl-16-132><a class=lnlinks href=#hl-16-132>132</a>
</span><span class=lnt id=hl-16-133><a class=lnlinks href=#hl-16-133>133</a>
</span><span class=lnt id=hl-16-134><a class=lnlinks href=#hl-16-134>134</a>
</span><span class=lnt id=hl-16-135><a class=lnlinks href=#hl-16-135>135</a>
</span><span class=lnt id=hl-16-136><a class=lnlinks href=#hl-16-136>136</a>
</span><span class=lnt id=hl-16-137><a class=lnlinks href=#hl-16-137>137</a>
</span><span class=lnt id=hl-16-138><a class=lnlinks href=#hl-16-138>138</a>
</span><span class=lnt id=hl-16-139><a class=lnlinks href=#hl-16-139>139</a>
</span><span class=lnt id=hl-16-140><a class=lnlinks href=#hl-16-140>140</a>
</span><span class=lnt id=hl-16-141><a class=lnlinks href=#hl-16-141>141</a>
</span><span class=lnt id=hl-16-142><a class=lnlinks href=#hl-16-142>142</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>heapq</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>enum</span> <span class=kn>import</span> <span class=n>Enum</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span><span class=p>,</span> <span class=n>field</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CustomerTier</span><span class=p>(</span><span class=n>Enum</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>VIP</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>PREMIUM</span> <span class=o>=</span> <span class=mi>2</span>  
</span></span><span class=line><span class=cl>    <span class=n>REGULAR</span> <span class=o>=</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderRequest</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>customer_id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>tier</span><span class=p>:</span> <span class=n>CustomerTier</span>
</span></span><span class=line><span class=cl>    <span class=n>order_id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>submit_time</span><span class=p>:</span> <span class=nb>float</span>
</span></span><span class=line><span class=cl>    <span class=n>priority</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=n>field</span><span class=p>(</span><span class=n>init</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>__post_init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 초기 우선순위 = 고객 등급 우선순위</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>priority</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>tier</span><span class=o>.</span><span class=n>value</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>FairOrderProcessingSystem</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>aging_threshold</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>5.0</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>order_queue</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>OrderRequest</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>aging_threshold</span> <span class=o>=</span> <span class=n>aging_threshold</span>  <span class=c1># 5초 후 에이징 적용</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>queue_lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>submit_order</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>customer_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>tier</span><span class=p>:</span> <span class=n>CustomerTier</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 제출&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>order_id</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;ORDER_</span><span class=si>{</span><span class=nb>int</span><span class=p>(</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>request</span> <span class=o>=</span> <span class=n>OrderRequest</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>customer_id</span><span class=o>=</span><span class=n>customer_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>tier</span><span class=o>=</span><span class=n>tier</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>order_id</span><span class=o>=</span><span class=n>order_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>submit_time</span><span class=o>=</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>queue_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>heapq</span><span class=o>.</span><span class=n>heappush</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>order_queue</span><span class=p>,</span> <span class=p>(</span><span class=n>request</span><span class=o>.</span><span class=n>priority</span><span class=p>,</span> <span class=n>request</span><span class=o>.</span><span class=n>submit_time</span><span class=p>,</span> <span class=n>request</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;주문 제출: </span><span class=si>{</span><span class=n>customer_id</span><span class=si>}</span><span class=s2> (</span><span class=si>{</span><span class=n>tier</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>) - </span><span class=si>{</span><span class=n>order_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>order_id</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>apply_aging_boost</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;기아 상태 방지를 위한 에이징 부스트 적용&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>current_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>queue_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 현재 큐의 모든 주문을 검사하고 재구성</span>
</span></span><span class=line><span class=cl>            <span class=n>temp_orders</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=bp>self</span><span class=o>.</span><span class=n>order_queue</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>priority</span><span class=p>,</span> <span class=n>submit_time</span><span class=p>,</span> <span class=n>request</span> <span class=o>=</span> <span class=n>heapq</span><span class=o>.</span><span class=n>heappop</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>order_queue</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>wait_time</span> <span class=o>=</span> <span class=n>current_time</span> <span class=o>-</span> <span class=n>request</span><span class=o>.</span><span class=n>submit_time</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1># 대기시간이 임계값을 초과하면 우선순위 부스트</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>wait_time</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>aging_threshold</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>boost</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=nb>int</span><span class=p>(</span><span class=n>wait_time</span> <span class=o>/</span> <span class=bp>self</span><span class=o>.</span><span class=n>aging_threshold</span><span class=p>))</span>  <span class=c1># 최대 2단계 부스트</span>
</span></span><span class=line><span class=cl>                    <span class=n>new_priority</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>request</span><span class=o>.</span><span class=n>priority</span> <span class=o>-</span> <span class=n>boost</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>new_priority</span> <span class=o>!=</span> <span class=n>request</span><span class=o>.</span><span class=n>priority</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;에이징 부스트: </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>customer_id</span><span class=si>}</span><span class=s2> 우선순위 </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>priority</span><span class=si>}</span><span class=s2> → </span><span class=si>{</span><span class=n>new_priority</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=n>request</span><span class=o>.</span><span class=n>priority</span> <span class=o>=</span> <span class=n>new_priority</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=n>temp_orders</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>request</span><span class=o>.</span><span class=n>priority</span><span class=p>,</span> <span class=n>request</span><span class=o>.</span><span class=n>submit_time</span><span class=p>,</span> <span class=n>request</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 업데이트된 우선순위로 큐 재구성</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>order</span> <span class=ow>in</span> <span class=n>temp_orders</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>heapq</span><span class=o>.</span><span class=n>heappush</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>order_queue</span><span class=p>,</span> <span class=n>order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_orders</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>max_orders</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>20</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문 처리 (기아 상태 방지 포함)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>processed_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=n>processed_count</span> <span class=o>&lt;</span> <span class=n>max_orders</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 주기적으로 에이징 적용</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>processed_count</span> <span class=o>%</span> <span class=mi>3</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>apply_aging_boost</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>queue_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>order_queue</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>continue</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=n>priority</span><span class=p>,</span> <span class=n>submit_time</span><span class=p>,</span> <span class=n>request</span> <span class=o>=</span> <span class=n>heapq</span><span class=o>.</span><span class=n>heappop</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>order_queue</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 주문 처리</span>
</span></span><span class=line><span class=cl>            <span class=n>wait_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>request</span><span class=o>.</span><span class=n>submit_time</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;주문 처리 시작: </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>customer_id</span><span class=si>}</span><span class=s2> (</span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>tier</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>) - 대기시간: </span><span class=si>{</span><span class=n>wait_time</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>초&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 처리 시간 시뮬레이션</span>
</span></span><span class=line><span class=cl>            <span class=n>processing_time</span> <span class=o>=</span> <span class=mf>0.3</span> <span class=k>if</span> <span class=n>request</span><span class=o>.</span><span class=n>tier</span> <span class=o>==</span> <span class=n>CustomerTier</span><span class=o>.</span><span class=n>VIP</span> <span class=k>else</span> <span class=mf>0.2</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>processing_time</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;주문 처리 완료: </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>customer_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>processed_count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;총 </span><span class=si>{</span><span class=n>processed_count</span><span class=si>}</span><span class=s2>개 주문 처리 완료&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 기아 상태 방지 테스트</span>
</span></span><span class=line><span class=cl><span class=n>order_system</span> <span class=o>=</span> <span class=n>FairOrderProcessingSystem</span><span class=p>(</span><span class=n>aging_threshold</span><span class=o>=</span><span class=mf>3.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>vip_customer_orders</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;VIP 고객이 지속적으로 주문하는 시나리오&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>8</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>order_system</span><span class=o>.</span><span class=n>submit_order</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;VIP_고객_</span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>CustomerTier</span><span class=o>.</span><span class=n>VIP</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>regular_customer_orders</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;일반 고객 주문 (기아 상태 위험)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>order_system</span><span class=o>.</span><span class=n>submit_order</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;일반_고객_</span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>CustomerTier</span><span class=o>.</span><span class=n>REGULAR</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.6</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>premium_customer_orders</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;프리미엄 고객 주문&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>6</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>order_system</span><span class=o>.</span><span class=n>submit_order</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;프리미엄_고객_</span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>CustomerTier</span><span class=o>.</span><span class=n>PREMIUM</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=== 기아 상태 방지 주문 처리 시스템 테스트 ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 동시에 여러 등급의 고객이 주문</span>
</span></span><span class=line><span class=cl><span class=n>customers</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>vip_customer_orders</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>regular_customer_orders</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>premium_customer_orders</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>customer</span> <span class=ow>in</span> <span class=n>customers</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>customer</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 잠시 후 주문 처리 시작</span>
</span></span><span class=line><span class=cl><span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>1.5</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>processor</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=k>lambda</span><span class=p>:</span> <span class=n>order_system</span><span class=o>.</span><span class=n>process_orders</span><span class=p>(</span><span class=mi>25</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>processor</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 모든 스레드 완료 대기</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>customer</span> <span class=ow>in</span> <span class=n>customers</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>customer</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>processor</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=최적화-및-운영-optimization--operations>최적화 및 운영 (Optimization & Operations)<a hidden class=anchor aria-hidden=true href=#최적화-및-운영-optimization--operations>#</a></h3><h4 id=성능-최적화-전략>성능 최적화 전략<a hidden class=anchor aria-hidden=true href=#성능-최적화-전략>#</a></h4><p><strong>동시성 문제의 성능 최적화 전략</strong>은 단순히 문제를 예방하는 것을 넘어서, 시스템의 처리 효율성과 안정성을 동시에 확보하기 위한 설계 관점에서의 접근이다.</p><p>Deadlock 은 시스템 정지를 방지하기 위한 자원 접근 전략을 중심으로, Livelock 은 비효율적 반복을 막기 위한 스케줄링 설계로, Race Condition 은 동기화와 공유 자원 관리 기법으로, Starvation 은 공정성과 우선순위 조정 메커니즘을 통해 최적화된다.</p><p>각 전략은 특정 상황에 유리하지만, 동시에 성능 저하나 유연성 감소 등 부작용도 동반하므로, 설계 단계에서 명확한 목표에 따라 조합적으로 적용해야 한다.</p><table><thead><tr><th>전략 구분</th><th>적용 문제 유형</th><th>설명/방법</th><th>효과</th><th>유용한 경우</th><th>주의사항</th></tr></thead><tbody><tr><td>Lock Ordering</td><td>Deadlock</td><td>자원 요청 순서 고정</td><td>★★★</td><td>DB 트랜잭션, 다중 락 환경</td><td>순서 강제는 설계 유연성 저하</td></tr><tr><td>타임아웃 기반 락</td><td>Deadlock</td><td>일정 시간 내 획득 실패 시 종료</td><td>★★</td><td>분산 시스템, 네트워크 락</td><td>중복 요청/롤백 비용 증가</td></tr><tr><td>Randomized Backoff</td><td>Livelock</td><td>재시도 시 무작위 대기 삽입</td><td>★★★</td><td>재시도 기반 네트워크</td><td>지나친 대기 시 응답 지연</td></tr><tr><td>Atomic 연산</td><td>Race Condition</td><td>원자적 비교/갱신 (CAS 등)</td><td>★★★</td><td>멀티코어 처리, 공유 자원</td><td>논리 오류 디버깅 어려움</td></tr><tr><td>Lock-free 구조</td><td>Race Condition</td><td>비차단적 자료구조</td><td>★★</td><td>고성능 병렬 환경</td><td>설계 복잡도 매우 높음</td></tr><tr><td>Immutability</td><td>Race Condition</td><td>불변 객체 구조로 공유 제거</td><td>★★</td><td>불변성 가능한 API</td><td>GC 증가 가능성 있음</td></tr><tr><td>Aging</td><td>Starvation</td><td>대기 시간 비례 우선순위 상승</td><td>★★★</td><td>실시간 응답 요구 시스템</td><td>긴급 작업 응답 지연 위험</td></tr><tr><td>Fair Scheduler</td><td>Starvation</td><td>라운드로빈 등 공정 스케줄링</td><td>★★</td><td>멀티태스킹 OS</td><td>컨텍스트 스위치 증가</td></tr><tr><td>우선순위 역전 방지</td><td>Starvation</td><td>상속/천장 프로토콜</td><td>★★★</td><td>RTOS, ThreadPool</td><td>복잡도 증가, 구현 비용</td></tr></tbody></table><p>성능 최적화 전략은 단일 목표를 위한 단순 대응이 아니라, <strong>시스템의 특성과 요구 사항에 따른 다층적 고려와 조율의 결과</strong>다. 예를 들어, Deadlock 방지를 위해 Lock Ordering 을 도입하면 설계가 단순해질 수 있지만, 유연성이 희생되고 개발 생산성이 떨어질 수 있다. 반대로 Race Condition 을 방지하기 위한 Lock-free 설계는 성능 면에서 탁월하지만, 코드 복잡성과 디버깅 난이도가 급격히 증가할 수 있다.</p><p>Starvation 방지를 위한 공정 스케줄링은 낮은 우선순위 작업의 기회를 보장하지만, 높은 우선순위의 긴급 작업 응답성이 떨어질 수 있다. Livelock 해결을 위한 backoff 전략 역시 재시도 타이밍을 제어함으로써 충돌을 줄일 수 있지만, 잘못된 파라미터 설정은 응답 지연 또는 시스템 부하 증가로 이어질 수 있다.</p><p>따라서 실무에서는 <strong>문제 유형 간 균형, 시스템의 목적, 실시간성, 처리량, 공정성 등의 요소를 종합적으로 고려하여 전략을 조합하고, 지속적인 모니터링 및 튜닝</strong>을 통해 최적화하는 것이 핵심이다.</p><h4 id=운영상-고려사항>운영상 고려사항<a hidden class=anchor aria-hidden=true href=#운영상-고려사항>#</a></h4><p>운영상 고려사항은 동시성 문제를 실시간으로 감시하고, 문제를 예방·진단하며, 시스템의 확장성과 유지보수성을 확보하기 위한 핵심 프레임워크이다.</p><p>이는 단순한 코드 레벨의 해결이 아닌 시스템 전반에 걸친 <strong>정책, 설계, 운영 도구</strong>의 통합적 관리가 필요하다. 특히 <strong>데드락/라이브락</strong>은 실시간 탐지와 대응이 요구되고, <strong>경쟁 상태</strong>는 정적 분석과 테스트 기반 예방이 핵심이다. <strong>기아 상태</strong>는 스케줄링 정책과 Aging 적용 여부에 따라 결정되며, 운영 정책의 공정성 확보가 중요하다.</p><table><thead><tr><th>전략 구분</th><th>전략 명칭</th><th>설명</th><th>효과</th><th>유용한 경우</th><th>주의사항</th></tr></thead><tbody><tr><td><strong>모니터링</strong></td><td>락/스레드 추적 로그</td><td>락 획득·대기·해제 시간 추적, wait-for graph 작성</td><td>데드락, 기아 실시간 감지</td><td>고빈도 락 충돌 발생 시 시스템 병목 분석</td><td>로그 누락 시 분석 부정확</td></tr><tr><td></td><td>경합 자원 대시보드</td><td>자원 별 wait 시간 및 대기 스레드 수 시각화</td><td>자원 최적화, 락 세분화 가이드</td><td>파인 그레인 락/분산 락 구조 설계 시</td><td>측정 기준 일관성 필요</td></tr><tr><td><strong>유지보수</strong></td><td>락 구조 정기 리팩터링</td><td>락 계층 변경 시 종속성 변경 반영</td><td>데드락 구조 예방</td><td>신규 기능 도입 또는 대규모 코드 리팩터링 시</td><td>기존 동작 영향 최소화 필요</td></tr><tr><td></td><td>자원 의존도 시각화</td><td>락 간 의존 관계를 그래프로 분석</td><td>순환 의존 탐지, 락 순서 고정 가이드</td><td>트랜잭션 시스템, 공유 자원 다수 환경</td><td>시각화 정확도 확보 필요</td></tr><tr><td><strong>확장성</strong></td><td>파인 그레인드 락</td><td>자원 단위로 락을 분리하여 병렬성 극대화</td><td>성능 향상, 경합 분산</td><td>멀티코어 환경, 고성능 필요 시스템</td><td>락 관리 복잡성 증가 가능</td></tr><tr><td></td><td>자원 분산 배치</td><td>자원 접근을 지리적/논리적으로 분산하여 충돌 감소</td><td>국부 경합 최소화, 스케일 아웃 용이</td><td>분산 시스템, 마이크로서비스</td><td>데이터 일관성 유지 필요</td></tr><tr><td><strong>테스트</strong></td><td>동시성 테스트 프레임워크</td><td>jcstress, Go -race 등 동시성 오류를 자동 테스트</td><td>경쟁 상태 조기 탐지</td><td>멀티스레드 환경, 임계구역 코드 증가 시</td><td>False Positive 대비 필요</td></tr><tr><td></td><td>타임아웃 기반 테스트</td><td>일정 시간 내 응답 없을 경우 Deadlock 가정</td><td>데드락 구조 조기 탐지</td><td>리팩터링 후 검증 테스트 시</td><td>네트워크/IO 지연과 구분 필요</td></tr></tbody></table><p>운영상 고려사항은 동시성 문제를 단지 코드 레벨에서 해결하는 것이 아니라, <strong>실시간 시스템 동작</strong>, <strong>락 정책 변경</strong>, <strong>스케줄링 전략</strong>, <strong>테스트 자동화</strong> 등 다양한 계층을 아우르는 종합적 설계와 관리가 필요하다.</p><ul><li><strong>모니터링</strong>은 시스템 상태를 가시화하여 병목·문제 징후를 조기에 포착하고, 문제 발생 전에 사전 경고를 제공할 수 있다. 특히 Deadlock 과 Livelock 은 <strong>순환 의존성 또는 무한 반복 탐지</strong>가 중요하며, 실시간 로그 수집 및 분석 기반 도구가 필요하다.</li><li><strong>유지보수 전략</strong>은 코드/정책 변경 시 발생할 수 있는 동시성 오류를 사전에 막고, 락 설계의 일관성을 보장하는 데 핵심이다. 특히 자원 간 <strong>락 의존 관계 시각화</strong>와 <strong>락 순서 관리</strong>는 구조적으로 데드락 가능성을 차단하는 효과적인 수단이다.</li><li><strong>확장성</strong> 확보를 위한 전략은 시스템의 병렬성 향상과 자원 경합 최소화를 목표로 하며, 특히 <strong>파인 그레인드 락 설계</strong>는 시스템 성능을 좌우할 수 있다. 그러나 세분화된 락은 유지보수 복잡도를 높일 수 있으므로 적절한 트레이드오프가 필요하다.</li><li><strong>테스트 및 검증 전략</strong>은 운영 전에 잠재적인 Race Condition 및 Deadlock 을 탐지하는 가장 확실한 방법으로, 언어 및 런타임별로 제공되는 도구 (jcstress, Go -race, TSAN 등) 를 적극 활용해야 한다.</li></ul><p>종합적으로 운영상의 고려사항은 시스템의 <strong>신뢰성, 확장성, 디버깅 용이성</strong>을 결정짓는 핵심 요소이며, 설계 초기 단계부터 테스트, 배포, 운영에 이르기까지 전 주기에 걸쳐 통합적으로 반영되어야 한다. 이 모든 것은 단지 " 문제 해결 " 이 아니라 <strong>문제 예방과 회복탄력성 (resilience) 을 확보하기 위한 설계 철학</strong>과도 맞닿아 있다.</p><h4 id=실무-적용-시-주의사항>실무 적용 시 주의사항<a hidden class=anchor aria-hidden=true href=#실무-적용-시-주의사항>#</a></h4><p><strong>동시성 문제는 구현보다 운영에서 더 많은 복잡성을 드러낸다.</strong> 특히 락 설계, 동기화 방식, 우선순위 정책, 재시도 로직 등은 작은 실수로 시스템 전체의 성능 저하, 정지, 데이터 불일치를 초래할 수 있다.</p><p>실무에서는 동시성 코드 자체보다 그 **맥락 (운영 환경, 리소스 사용 패턴, 확장성)**을 고려한 전략이 우선되어야 하며, <strong>예측 가능한 실패와 그에 대한 방어 설계가 기본</strong>이 되어야 한다.</p><table><thead><tr><th>카테고리</th><th>전략/항목</th><th>설명</th><th>효과</th><th>유용한 경우</th><th>주의사항</th></tr></thead><tbody><tr><td><strong>락 구조</strong></td><td>락 중첩 제한</td><td>락 계층을 최대 2 단계로 제한하여 순환 대기 가능성 최소화</td><td>Deadlock 예방</td><td>멀티락 획득이 필요한 트랜잭션 처리 시</td><td>재귀적 락 사용 시 순서 관리 필수</td></tr><tr><td></td><td>락 그랜율 조정</td><td>너무 작으면 경합, 너무 크면 병렬성 저하 → 중간 밸런스 필요</td><td>성능 최적화</td><td>I/O 병렬 처리, 멀티코어 환경</td><td>락 수 증가 시 관리 복잡성 ↑</td></tr><tr><td><strong>락 사용 시간</strong></td><td>긴 작업 분리</td><td>락 보유 중에는 가벼운 연산만 수행, I/O 는 외부 분리</td><td>처리량 증가, 대기 시간 감소</td><td>DB 호출, 파일 처리 등의 작업 포함 시</td><td>작업 단위 분리 설계 필요</td></tr><tr><td><strong>동기화</strong></td><td>동기화 누락 검증</td><td>코드 리뷰 시 <code>shared mutable state</code> 확인, 표준 동기화 수단 사용</td><td>Race Condition 방지</td><td>파이썬, JS 등 느슨한 타입 언어 사용 시</td><td>테스트 자동화와 병행 필요</td></tr><tr><td><strong>스케줄링 정책</strong></td><td>고정 우선순위 정책 검토</td><td>기아 상태 방지 위해 Fairness 또는 Aging 적용</td><td>낮은 우선순위 태스크의 생존 보장</td><td>실시간/우선순위 기반 시스템</td><td>스케줄러 정책에 따라 우선순위 역전 가능성 있음</td></tr><tr><td><strong>재시도/백오프</strong></td><td>실패 제한 및 Jitter 적용</td><td>재시도 무제한 루프 방지, 지수 백오프 또는 무작위 대기시간 도입</td><td>Livelock 방지</td><td>타 서비스 연계 또는 자원 충돌 빈번한 상황</td><td>재시도 임계값 설정 누락 시 자원 고갈 위험</td></tr><tr><td><strong>분산 환경</strong></td><td>분산 락 설계 검토</td><td>Zookeeper, etcd 사용 시 네트워크 단절/파티션 감안</td><td>장애 복구 성능 향상</td><td>마이크로서비스, 분산 트랜잭션</td><td>합의 실패 시 데이터 불일치 발생 가능성</td></tr></tbody></table><p>실무 환경에서는 코드가 완벽하더라도, <strong>운영 조건과 상호작용하는 리소스/스레드의 동선이 예측 불가능한 상태를 만들 수 있다.</strong> 따라서 동시성 제어는 단순히 " 잘 동작하는 코드를 작성하는 것 " 이 아니라, <strong>최악의 상황에서도 문제가 되지 않는 시스템을 설계하는 것</strong>에 초점을 맞춰야 한다.</p><ul><li>락을 얼마나, 어떻게, 언제 쓰는지가 시스템 성능과 안정성에 결정적인 영향을 미친다.</li><li>특정 작업을 락으로 감싸는 것만으로는 부족하며, <strong>락 획득 시점과 보유 시간</strong>이 중요하다.</li><li>동기화 누락은 가장 흔한 실수지만, 개발 초기엔 눈에 잘 띄지 않으므로 <strong>테스트/정적 분석 도구의 조기 도입이 필수</strong>다.</li><li>스케줄링 정책은 성능만을 위한 것이 아니라 <strong>공정성 및 생존성 보장을 함께 고려해야 하며</strong>, 실시간 시스템에서는 특히 우선순위 역전과 기아 상태를 막기 위한 정책적 판단이 중요하다.</li><li>재시도 기반 구조는 자동화와 비동기화 흐름에서 자주 사용되지만, <strong>그 자체로 livelock 이나 자원 낭비의 원인이 될 수 있으므로</strong> 실패 임계값 설정과 백오프 전략이 병행되어야 한다.</li><li>특히 <strong>분산 시스템</strong>에서는 락이나 세마포어 등 전통적인 동기화 방식만으로는 충분하지 않으며, <strong>장애 복구 전략과 합의 프로토콜이 병행되어야 신뢰성이 확보</strong>된다.</li></ul><h3 id=고급-주제-및-미래-advanced-topics--future>고급 주제 및 미래 (Advanced Topics & Future)<a hidden class=anchor aria-hidden=true href=#고급-주제-및-미래-advanced-topics--future>#</a></h3><h4 id=현재-도전-과제-기술적-한계와-해결-노력>현재 도전 과제 (기술적 한계와 해결 노력)<a hidden class=anchor aria-hidden=true href=#현재-도전-과제-기술적-한계와-해결-노력>#</a></h4><p><strong>현재의 동시성 시스템은 단일 노드, 단일 스레드를 넘어 분산, 다중 언어, 고성능 병렬 처리로 확장되며, 그에 따른 새로운 기술적 한계에 직면하고 있다.</strong><br>각 문제 유형은 단순한 코드 상의 실수로 발생하기보다, <strong>설계적 한계, 자원 분산, 우선순위 정책, 메모리 모델 불일치</strong> 등에서 파생되며, 이에 대한 해결 노력도 점점 더 정교해지고 있다.<br><strong>동시성 이슈 해결은 더 이상 단일 스레드에서의 락 처리로 끝나지 않으며</strong>, 시스템 전체의 자원 스케줄링, 오류 전파 방지, 공정성 보장, 복구 전략 설계까지 통합적으로 고려되어야 한다.</p><table><thead><tr><th>카테고리</th><th>문제 유형</th><th>원인</th><th>영향</th><th>해결 방향</th><th>관련 기술 / 패턴</th></tr></thead><tbody><tr><td><strong>분산 동기화 문제</strong></td><td>Deadlock</td><td>분산 트랜잭션 간 순서 지정 어려움</td><td>전체 서비스 정지, cascading 장애</td><td>분산 deadlock 탐지 알고리즘, 락 타임아웃 적용</td><td>Chandy-Misra-Haas, Wait-For Graph</td></tr><tr><td></td><td>Starvation</td><td>우선순위 기반 자원 분배의 불공정성</td><td>일부 태스크 무한 대기</td><td>Fair Scheduler, Aging, Dynamic Priority</td><td>Linux CFS, Real-Time OS</td></tr><tr><td><strong>성능 ↔ 공정성 충돌</strong></td><td>Livelock</td><td>빠른 재시도 정책의 과잉 적용</td><td>무한 루프, 처리율 급감</td><td>백오프 간격 증가, Circuit Breaker 도입</td><td>Hystrix, Resilience4j</td></tr><tr><td></td><td>Starvation</td><td>고정 우선순위가 공정성 저해</td><td>특정 서비스 불가</td><td>Hybrid Scheduling, Earliest Deadline First 등</td><td>EDF, MLFQ</td></tr><tr><td><strong>자동 탐지 한계</strong></td><td>Deadlock</td><td>복구 시 트랜잭션 rollback 비용 ↑</td><td>성능 저하, 데이터 정합성 위협</td><td>Partial Rollback, 복합 알고리즘 적용</td><td>Hybrid Deadlock Recovery</td></tr><tr><td></td><td>Livelock</td><td>무의미한 상태 전이의 실시간 탐지 어려움</td><td>오작동 또는 무한 대기</td><td>패턴 기반 예외 탐지, 동적 상태 트래킹</td><td>Lock-Free, 상태 머신 기반 로직</td></tr><tr><td><strong>언어/플랫폼 이질성</strong></td><td>Race Condition</td><td>서로 다른 언어/런타임 간 메모리 일관성 정책 불일치</td><td>데이터 손상, 예측 불가 결과</td><td>언어 기반 메모리 모델 사용, 명시적 동기화</td><td>Java Memory Model, Rust Ownership</td></tr><tr><td></td><td>Race Condition</td><td>멀티코어에서 캐시 갱신 비용 증가</td><td>성능 저하, 병목</td><td>Lock-Free 자료구조, CAS, STM</td><td>ConcurrentQueue, AtomicInteger</td></tr></tbody></table><p>오늘날의 동시성 문제는 단순히 " 락을 잘 걸자 " 수준에서 해결되지 않는다. 실제로 실무에서는 시스템이 <strong>멀티코어</strong>, <strong>분산 환경</strong>, <strong>이기종 언어 스택</strong>, <strong>고성능 처리</strong>를 요구하면서 문제는 더 복잡해졌다.</p><ul><li><p><strong>Deadlock</strong>은 단일 노드 수준에서는 락 순서 지정 등으로 예방할 수 있지만, 마이크로서비스 간 상호 호출이 동반되는 분산 환경에서는 <strong>중앙 집중식 제어가 어렵고 탐지 비용이 높다.</strong> 따라서 타임아웃, 부분 롤백, 메시지 기반 탐지 알고리즘 등 복합 전략이 요구된다.</p></li><li><p><strong>Livelock</strong>은 재시도 기반 회피 로직이 과하게 적용되면 발생하며, 처리율을 저하시킨다. 특히 이벤트 기반 시스템이나 네트워크 I/O 에서 자주 발생하고, <strong>Circuit Breaker</strong>나 <strong>Adaptive Backoff</strong> 등의 제어 메커니즘이 중요하다.</p></li><li><p><strong>Race Condition</strong>은 플랫폼 간 메모리 모델 불일치나, CPU 캐시 일관성 문제로 인해 발생하며, 이 문제는 단순한 락 사용으로 해결되지 않는다. <strong>JMM, Rust 의 소유권 모델, CAS/STM 기반 프로그래밍</strong>이 핵심적인 해결 전략으로 떠오르고 있다.</p></li><li><p><strong>Starvation</strong>은 공정성 보장과 실시간 성능 간의 균형 문제로, CFS 나 EDF 등 다양한 스케줄링 전략이 등장하고 있다. 특히 <strong>Aging 기법</strong>은 현실적이면서도 효과적인 해결책이다.</p></li></ul><p>결국, <strong>현재의 도전 과제는 기술적 복잡성뿐 아니라 설계 패러다임 자체의 변화</strong>와도 맞물려 있으며, 기존의 단일 접근 방식 대신 <strong>복합적이고 계층화된 동시성 전략</strong>이 필요하다. 모든 시스템은 안전성과 진행성을 동시에 만족시키기 위해, <strong>도구, 설계, 정책, 언어 특성</strong>까지 전방위적으로 고려된 구조로 발전해가야 한다.</p><h4 id=기술-생태계에서의-위치동향>기술 생태계에서의 위치/동향<a hidden class=anchor aria-hidden=true href=#기술-생태계에서의-위치동향>#</a></h4><p>기술 생태계는 동시성 문제에 대응하기 위해 <strong>락 기반 설계에서 탈피</strong>하여, <strong>비동기·이벤트 지향적 아키텍처</strong>, <strong>언어 수준 동기화 보장</strong>, <strong>스케줄러 기반 공정성 확보</strong> 쪽으로 전환되고 있다.<br>특히 <strong>클라우드 네이티브</strong>와 <strong>멀티코어/분산 환경</strong>이 표준화되면서, 단일 머신에서 발생하던 문제들이 <strong>네트워크, 메시지 큐, 가상 머신 레벨</strong>로 확산되었다.<br>이에 따라 전통적인 해결 방식만으로는 한계가 있으며, <strong>락 -Free 프로그래밍, 고수준 스케줄링 정책, 트랜잭션 흐름 분해 (SAGA)</strong> 등이 실무에서 적극 도입되고 있다.</p><table><thead><tr><th>문제 유형</th><th>주요 기술 영역</th><th>연결 기술 및 패턴</th><th>적용 사례 / 플랫폼 예시</th></tr></thead><tbody><tr><td><strong>Deadlock</strong></td><td>운영체제 / DB / RPC</td><td>세마포어, 트랜잭션, 분산 락, SAGA</td><td>PostgreSQL, Redis, gRPC, Kafka</td></tr><tr><td><strong>Livelock</strong></td><td>분산/비동기 시스템</td><td>백오프 알고리즘, Circuit Breaker</td><td>Kafka Consumer, Spring WebFlux</td></tr><tr><td><strong>Race Condition</strong></td><td>언어 런타임 / 멀티코어</td><td>Lock-Free 구조, CAS, JMM, Ownership 모델</td><td>Rust Ownership, JVM Memory Model</td></tr><tr><td><strong>Starvation</strong></td><td>스케줄러 / 큐 시스템</td><td>Fair Scheduling, Aging, Priority Boosting</td><td>Linux CFS, Kubernetes Scheduler</td></tr></tbody></table><p>오늘날 동시성 문제는 단일 언어, 단일 머신의 문제가 아니라, <strong>분산된 마이크로서비스, 다양한 언어·플랫폼, 실시간 요구가 혼재된 복잡한 환경</strong>에서 발생한다.</p><ul><li><p><strong>Deadlock</strong>은 트랜잭션 간 의존성, 락 순서 불일치로 발생하며, DB 나 RPC 계층에서 SAGA 나 락 매니저 등을 통해 예방하거나 해결된다. <strong>gRPC 와 같이 명시적인 호출 흐름을 가진 시스템에서는 락의 순서를 정책화하는 방식</strong>이 필수적이다.</p></li><li><p><strong>Livelock</strong>은 특히 REST 클라이언트, 메시지 큐 소비자에서 자주 발생하며, 최근에는 <strong>지수적 백오프</strong>와 <strong>Circuit Breaker</strong>가 기본 구성 요소로 포함된다. 이를 통해 빠른 실패와 회복을 제어할 수 있게 되었다.</p></li><li><p><strong>Race Condition</strong>은 언어 내부의 메모리 모델과 깊게 연결되어 있으며, Java 의 JMM, Rust 의 Ownership 모델, Go 의 채널 및 동시성 패턴 등은 <strong>런타임 수준에서 안전성을 보장</strong>하는 방향으로 진화하고 있다. 또한 Lock-Free 자료구조와 원자 연산 기반의 프로그래밍도 활발히 쓰인다.</p></li><li><p><strong>Starvation</strong>은 스케줄러 차원의 문제로, 우선순위 기반 처리에서 자주 발생한다. 이에 따라 현대 운영체제와 클라우드 플랫폼은 **공정성 보장 알고리즘 (Fair Scheduling)**을 핵심으로 설계하고 있으며, <strong>ML 기반 적응형 스케줄링</strong>의 도입도 점차 확산되고 있다.</p></li></ul><p>요약하면, 동시성 문제는 이제 <strong>단순한 코드 오류의 문제가 아니라 시스템 설계 전반에 걸쳐 고려해야 하는 필수 요소</strong>로 인식되고 있으며, 기술 생태계는 이를 다층적으로 대응하기 위한 구조적 진화를 지속하고 있다.</p><h4 id=최신-트렌드-및-발전-방향>최신 트렌드 및 발전 방향<a hidden class=anchor aria-hidden=true href=#최신-트렌드-및-발전-방향>#</a></h4><p>동시성 문제에 대한 최신 대응은 단순한 패턴이나 코딩 기법을 넘어서, <strong>언어 설계, 운영 플랫폼, 개발 도구, 인공지능, 하드웨어 아키텍처</strong> 등 <strong>전방위적 진화</strong>가 일어나고 있다. Race Condition 은 컴파일러 수준에서 제어되고, Deadlock 은 자원 흐름을 모델링하여 미리 시뮬레이션된다. Reactive 프로그래밍과 Actor 기반 시스템은 동시성의 본질적 위험을 회피하는 설계 철학을 반영한다. 특히 인공지능의 코드 분석 적용은 개발자 경험 자체를 변화시키고 있으며, 플랫폼은 더 이상 단순 실행환경이 아닌 <strong>병렬성 조정자 (concurrency orchestrator)</strong> 역할을 수행하고 있다.</p><table><thead><tr><th>카테고리</th><th>최신 트렌드</th><th>설명</th><th>대표 기술/플랫폼</th><th>유용한 문제 유형</th><th>주의사항</th></tr></thead><tbody><tr><td>언어 기반 대응</td><td>Ownership, Race Detector</td><td>언어 자체에서 경쟁 가능성 제거</td><td>Rust, Go <code>-race</code></td><td>Race Condition</td><td>학습 곡선, 사용 제한</td></tr><tr><td>병행성 모델 변화</td><td>Actor, STM</td><td>상태 공유 최소화, 메시지 기반</td><td>Erlang, Akka, Haskell STM</td><td>Deadlock, Race</td><td>디버깅 난이도 높음</td></tr><tr><td>패러다임 전환</td><td>Reactive, Async</td><td>이벤트 기반, 콜백 중심</td><td>RxJava, Node.js</td><td>Livelock, Starvation</td><td>복잡한 에러 흐름 처리 필요</td></tr><tr><td>플랫폼 대응</td><td>리소스 제한, 공정성 보장</td><td>OS/VM 레벨 병목 대응</td><td>JVM, Kubernetes</td><td>Starvation, Deadlock</td><td>자동화 한계 있음</td></tr><tr><td>AI 지원 분석</td><td>코드 예측, 정적 검증</td><td>병목 코드 자동 인식</td><td>GitHub Copilot, Qodana</td><td>Race Condition, Livelock</td><td>설명력 부족 가능성</td></tr><tr><td>정형 기법</td><td>상태 모델링, 교착 검증</td><td>공식 사양 기반 시뮬레이션</td><td>TLA+, Alloy, SPIN</td><td>Deadlock</td><td>학습/도입 비용 큼</td></tr><tr><td>하드웨어 기반</td><td>HTM, Atomic 지원</td><td>CPU 수준 병렬 보호</td><td>Intel TSX, POWER8</td><td>Race Condition</td><td>지원 플랫폼 한정</td></tr></tbody></table><p>동시성 문제에 대한 접근은 점점 <strong>예방 중심 → 설계 중심 → 시스템 통합 중심</strong>으로 이동하고 있다.<br>즉, 문제를 해결하는 것이 아니라 <strong>애초에 발생하지 않도록 언어와 모델이 설계되는 구조</strong>로 진화 중이다.</p><p>예컨대 Rust 의 <code>Ownership</code> 은 데이터 경쟁을 " 불가능 " 하게 만들고, Reactive Programming 은 락 자체를 사용하지 않는다. Actor 모델은 메시지 전달만으로 병렬성을 구현하므로 공유 메모리 문제 자체가 없다.</p><p>또한, AI 와 정적 분석 도구는 점점 더 실무에서 적극적으로 쓰이며, 개발자가 인식하지 못한 문제까지 사전에 탐지한다.<br>플랫폼 또한 Kubernetes 나 JVM 처럼 동시성 병목을 감지하고 리소스를 자동으로 조절할 수 있는 기능을 내장하고 있으며, 이는 시스템 운영자가 코드에 손대지 않아도 병목을 완화할 수 있게 한다.</p><p>마지막으로, 형식 기법 (Formal Method) 의 도입은 병렬 시스템에서 <strong>논리적 안전성</strong>을 수학적으로 증명하려는 흐름을 대표한다. 이는 Mission-Critical 시스템, 금융 시스템, 항공 제어 등에서 점점 더 필수적인 요소가 되고 있다.</p><p>요약하자면, <strong>동시성 문제 대응은 이제 " 개발자의 주의 " 에 의존하지 않고, 시스템 전체가 안전을 보장하는 방향</strong>으로 나아가고 있다. 앞으로는 이런 대응 전략이 <strong>프로그래밍 언어 설계, 인프라 아키텍처, 운영 자동화 기술 전반에 걸쳐 통합적으로 발전</strong>할 것으로 전망된다.</p><hr><h2 id=최종-비교-분석-및-학습-가이드>최종 비교 분석 및 학습 가이드<a hidden class=anchor aria-hidden=true href=#최종-비교-분석-및-학습-가이드>#</a></h2><h3 id=선택-의사결정-가이드>선택 의사결정 가이드<a hidden class=anchor aria-hidden=true href=#선택-의사결정-가이드>#</a></h3><p>동시성 문제는 환경별로 다르게 나타나며, 같은 시스템이라도 상황에 따라 주요 대응 전략이 달라질 수 있다. 따라서 <strong>문제의 본질</strong>과 <strong>업무 요구사항</strong>을 정확히 파악하고, 그에 따른 <strong>전략적 우선순위</strong> 설정이 중요하다.</p><table><thead><tr><th>상황/요구사항</th><th>문제가 되는 이유</th><th>경계해야 할 문제</th><th>권장 선택</th><th>예방 전략</th><th>기술적 대응책</th></tr></thead><tbody><tr><td>고신뢰성 시스템 (예: 금융, 의료)</td><td>데이터 오류가 치명적</td><td>Race Condition</td><td>동기화 구조 채택</td><td>Lock, Mutex</td><td>Atomic 연산, CAS</td></tr><tr><td>고성능 멀티스레드 서버</td><td>락 병목, 자원 낭비</td><td>Race, Livelock</td><td>Lock-free 설계</td><td>비동기 큐, Backoff</td><td>Lock-free 자료구조</td></tr><tr><td>실시간 제어 시스템</td><td>마감시간 내 응답 필수</td><td>Starvation</td><td>공정 스케줄링</td><td>Aging, Dynamic Priority</td><td>EDF, RM 스케줄러</td></tr><tr><td>분산 시스템/네트워크</td><td>전체 노드 정지 위험</td><td>Deadlock</td><td>자원 요청 순서화</td><td>타임아웃, 탐지 알고리즘</td><td>wait-for graph, try-lock</td></tr><tr><td>재시도 기반 시스템</td><td>반복으로 인한 낭비</td><td>Livelock</td><td>랜덤 백오프</td><td>지수 증가, 무작위 지연</td><td>Exponential Backoff, CSMA/CA</td></tr><tr><td>복합 환경 (멀티 문제 혼재)</td><td>여러 문제 동시 발생</td><td>RC + DL + ST 등</td><td>복합 대응 전략</td><td>패턴 조합 전략</td><td>SAGA, Timeout, Fair Scheduler</td></tr></tbody></table><p>동시성 문제는 <strong>문제 유형별 대응보다, 시스템의 특성에 맞는 통합 대응 전략</strong>이 중요하다.</p><p>예를 들어,</p><ul><li>고신뢰성이 필요한 금융 시스템은 Race Condition 방지를 최우선으로 두며, 락과 원자 연산 사용이 필수다.</li><li>고성능이 우선되는 서버 환경에서는 락을 최소화하고 Lock-free 자료구조나 원자 연산 기반으로 설계하는 게 바람직하다.</li><li>실시간 시스템은 Starvation 이 발생하지 않도록 공정한 스케줄링이 핵심이며, 분산 시스템에서는 Deadlock 이 치명적이므로 자원 요청 순서 및 타임아웃 설정이 필수다.</li><li>또한 반복 재시도가 빈번한 환경에서는 Livelock 방지를 위해 적절한 백오프 전략과 충돌 제어가 필요하다.</li></ul><p>모든 문제를 포괄하는 복합 환경에서는 각 전략을 조합한 설계가 필수이며, 상황별 우선순위를 명확히 해야 한다.</p><h4 id=문제-유형별-대응-전략-흐름-결정-트리-기반>문제 유형별 대응 전략 흐름 (결정 트리 기반)<a hidden class=anchor aria-hidden=true href=#문제-유형별-대응-전략-흐름-결정-트리-기반>#</a></h4><pre class=mermaid>graph TD
    A[동시성 문제 탐지됨] --&gt; B{데이터 불일치 발생?}
    B --&gt;|Yes| C[Race Condition 발생&lt;br/&gt;→ Atomic 연산 / 동기화 구조 적용]
    B --&gt;|No| D{프로세스 정지 상태인가?}
    D --&gt;|Yes| E[Deadlock 발생&lt;br/&gt;→ 자원 요청 순서 고정 / 타임아웃 적용]
    D --&gt;|No| F{계속 진행 중이나 진전 없음?}
    F --&gt;|Yes| G[Livelock 발생&lt;br/&gt;→ Backoff / 무작위 지연 / 재시도 제한]
    F --&gt;|No| H[Starvation 발생&lt;br/&gt;→ Aging, 공정 스케줄링 적용]
</pre><h4 id=시스템-특성-기반-전략-선택-플로우>시스템 특성 기반 전략 선택 플로우<a hidden class=anchor aria-hidden=true href=#시스템-특성-기반-전략-선택-플로우>#</a></h4><pre class=mermaid>graph LR
    A[시스템 요구사항 분석] --&gt; B{주요 요구사항은?}
    
    B --&gt;|정확성 / 무결성| C[Race Condition 방지&lt;br/&gt;→ 락, CAS, 불변 객체]
    B --&gt;|고신뢰 트랜잭션| D[Deadlock 방지&lt;br/&gt;→ 락 순서화, 탐지, 타임아웃]
    B --&gt;|고성능 / 응답속도| E[Race + Livelock 대응&lt;br/&gt;→ Lock-free 구조, 백오프]
    B --&gt;|실시간성 / 공정성| F[Starvation 방지&lt;br/&gt;→ 에이징, 우선순위 역전 방지]
    B --&gt;|복합 동시성 환경| G[통합 전략 조합&lt;br/&gt;→ 패턴 조합, 시뮬레이션 기반 설계]
</pre><h4 id=기술-선택-매핑-차트>기술 선택 매핑 차트<a hidden class=anchor aria-hidden=true href=#기술-선택-매핑-차트>#</a></h4><pre class=mermaid>graph TD
    P1[동시성 문제 유형] --&gt; Q1[Race Condition]
    P1 --&gt; Q2[Deadlock]
    P1 --&gt; Q3[Livelock]
    P1 --&gt; Q4[Starvation]

    Q1 --&gt; R1[Mutex / Lock / Semaphore]
    Q1 --&gt; R2[&#34;Atomic 연산 (CAS, fetch_add)&#34;]
    Q1 --&gt; R3[불변 객체, 복사 교체 방식]

    Q2 --&gt; R4[Lock Ordering]
    Q2 --&gt; R5[Deadlock Detection]
    Q2 --&gt; R6[Timeout + Rollback]

    Q3 --&gt; R7[Exponential Backoff]
    Q3 --&gt; R8[Random Jitter / Delay]
    Q3 --&gt; R9[재시도 제한 / 회피 정책]

    Q4 --&gt; R10[Aging Scheduling]
    Q4 --&gt; R11[Fair Lock, 공정 스케줄러]
    Q4 --&gt; R12[Priority Inheritance / Ceiling]
</pre><h3 id=학습-로드맵>학습 로드맵<a hidden class=anchor aria-hidden=true href=#학습-로드맵>#</a></h3><p>본 로드맵은 동시성 이슈에 대한 이해를 바탕으로, 기초 개념부터 고급 분산 설계 및 실무 대응 전략까지 단계적으로 학습할 수 있도록 구성되었다. 각각의 이슈 (Deadlock, Livelock, Race Condition, Starvation) 에 대해 원인, 해결책, 코드 구현, 도구 사용까지 학습하며, 실시간 시스템, 고성능 서버, 분산 환경 등 다양한 실제 적용 맥락을 고려한다.</p><table><thead><tr><th>학습 단계</th><th>카테고리</th><th>학습 내용</th><th>목적</th><th>기술/도구</th><th>우선순위</th><th>예상 소요</th></tr></thead><tbody><tr><td>1 단계</td><td>기초 이론</td><td>동시성 개념, 임계 구역, 스레드 모델</td><td>개념 이해</td><td>Python, Java Thread</td><td>필수</td><td>1~2 주</td></tr><tr><td>2 단계</td><td>문제 인식</td><td>Deadlock 조건, Race 유형</td><td>원인 탐지</td><td>디버거, 상태 추적 도구</td><td>필수</td><td>2~3 주</td></tr><tr><td>3 단계</td><td>저수준 구현</td><td>Mutex, Semaphore, Atomic</td><td>직접 구현</td><td>POSIX, Java Sync</td><td>필수</td><td>2~3 주</td></tr><tr><td>4 단계</td><td>공정성 문제 해결</td><td>Starvation, Livelock 회피</td><td>스케줄링 정책 이해</td><td>Custom Scheduler</td><td>중요</td><td>2 주</td></tr><tr><td>5 단계</td><td>고급 설계</td><td>Lock-free, STM, Actor 모델</td><td>고성능/분산 처리</td><td>Java Concurrency, Akka, Rust</td><td>선택</td><td>3~6 주</td></tr><tr><td>6 단계</td><td>실무 최적화</td><td>모니터링, 성능 튜닝</td><td>운영 대응</td><td>Prometheus, Grafana</td><td>중요</td><td>지속</td></tr></tbody></table><p>동시성 문제 학습은 개념적 기초를 시작으로, 각 문제 유형의 발생 조건과 해결 전략을 실제 코드와 도구를 통해 학습하고, 고급 설계 기법과 실무 최적화까지 확장해야 한다.</p><p>특히 Race Condition 과 Deadlock 은 모든 시스템에서 빈번하게 발생하므로 우선순위가 높으며, 분산 시스템 및 실시간 응답이 중요한 환경에서는 Starvation 과 Livelock 까지 고려한 정책 설계가 필수적이다.<br>고성능이나 확장 가능한 시스템을 위한 Lock-free 구조와 Actor 기반 설계는 선택적이지만 점차 보편화되는 추세다. 이 학습 로드맵은 동시성 문제 해결 능력을 실무 수준까지 끌어올리는 데 유효한 가이드가 될 것이다.</p><h3 id=실무-적용-체크리스트>실무 적용 체크리스트<a hidden class=anchor aria-hidden=true href=#실무-적용-체크리스트>#</a></h3><p>본 체크리스트는 동시성 문제가 발생할 수 있는 시스템 전반을 대상으로 하며, 설계 단계에서의 자원 접근 정책 수립, 구현 단계의 동기화 전략 선택, 운영 단계의 문제 감지 및 대응 체계 구축까지 포괄한다. 각 단계의 점검 항목을 명확히 함으로써 시스템 장애 예방, 유지보수 용이성, 안정성 확보에 기여한다.</p><h2 id=-5-항목별-정리-표>✅ 5. 항목별 정리 표<a hidden class=anchor aria-hidden=true href=#-5-항목별-정리-표>#</a></h2><table><thead><tr><th>단계</th><th>체크 항목</th><th>점검 내용</th><th>유의할 문제</th><th>적용 기술/도구</th></tr></thead><tbody><tr><td>설계</td><td>공유 자원 정의</td><td>어떤 데이터가 공유되는지 명확히</td><td>Race Condition</td><td>UML, 설계문서</td></tr><tr><td>설계</td><td>자원 접근 정책</td><td>락 순서, 우선순위 설정</td><td>Deadlock, Starvation</td><td>Lock Graph</td></tr><tr><td>설계</td><td>응답/일관성 목표</td><td>응답 시간, 일관성 수준</td><td>Starvation, 성능 병목</td><td>SLA 문서화</td></tr><tr><td>구현</td><td>동기화 방식</td><td>Lock, Semaphore, Atomic</td><td>Race Condition, Livelock</td><td>Java sync, Rust ownership</td></tr><tr><td>구현</td><td>데드락 회피 전략</td><td>타임아웃, Try-lock, 순서 고정</td><td>Deadlock</td><td>pthread_mutex_trylock 등</td></tr><tr><td>구현</td><td>백오프 전략</td><td>지수 백오프, Jitter 도입</td><td>Livelock</td><td>CSMA/CA, backoff 패턴</td></tr><tr><td>구현</td><td>공정 스케줄링</td><td>Aging, 우선순위 조정</td><td>Starvation</td><td>CFS, EDF 스케줄러</td></tr><tr><td>구현</td><td>테스트 자동화</td><td>Race/Deadlock 자동 테스트</td><td>조기 검출 누락</td><td>TSAN, go test -race</td></tr><tr><td>운영</td><td>모니터링 구성</td><td>락 경합, 처리량, 대기시간 시각화</td><td>성능 저하</td><td>Grafana, Prometheus</td></tr><tr><td>운영</td><td>이상 감지 및 대응</td><td>데드락 발생 감지, 자동 경고</td><td>서비스 장애</td><td>Deadlock detector, Alerting</td></tr><tr><td>운영</td><td>리뷰 및 점검</td><td>정책 효과 분석, 코드 리뷰</td><td>정책 불일치, 취약점</td><td>Peer Review, 문서화</td></tr><tr><td>운영</td><td>장애 대응 시나리오</td><td>복구 계획 및 절차 마련</td><td>장기 서비스 정지</td><td>Runbook, 자동화 스크립트</td></tr></tbody></table><p>실무 환경에서 동시성 문제는 단순한 코드 이슈를 넘어 시스템 전체 안정성에 직결된다.<br>이를 방지하기 위한 체크리스트는 설계, 구현, 운영의 전 단계를 포괄해야 하며, 단순히 락을 설정하는 것 이상의 세밀한 전략이 필요하다.</p><ul><li>설계 단계에서는 명확한 자원 접근 정책과 동시성 수준에 대한 예측이 선행되어야 하며,</li><li>구현 단계에서는 Race, Deadlock, Starvation 을 예방하기 위한 구조적 설계와 백오프 등 알고리즘 도입이 필수다.</li><li>운영 단계에서는 실시간 모니터링 및 자동 대응 체계와 함께, 주기적인 리뷰를 통한 정책 지속성과 문제 패턴의 반복 방지가 핵심이다.</li><li>특히, 동시성 테스트를 CI 파이프라인에 통합하는 것이 현대 시스템의 필수 요건으로 부상하고 있다.</li></ul><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>정의</th><th>관련 개념</th></tr></thead><tbody><tr><td><strong>공통 개념</strong></td><td>동시성 (Concurrency)</td><td>여러 작업이 동시에 실행되거나 진행되는 시스템 특성</td><td>멀티스레딩, 병렬성</td></tr><tr><td></td><td>임계 구역 (Critical Section)</td><td>하나의 스레드만 접근해야 하는 공유 자원에 대한 코드 영역</td><td>동기화, 뮤텍스</td></tr><tr><td></td><td>상호 배제 (Mutual Exclusion)</td><td>동시에 하나의 프로세스만 자원을 사용할 수 있도록 보장</td><td>세마포어, 락</td></tr><tr><td></td><td>비결정성 (Non-determinism)</td><td>실행 순서나 타이밍에 따라 결과가 달라질 수 있는 시스템 특성</td><td>Race Condition, 스케줄링</td></tr><tr><td><strong>Deadlock</strong></td><td>교착상태 (Deadlock)</td><td>둘 이상의 프로세스가 서로 자원을 점유한 채 영원히 대기 상태에 빠지는 현상</td><td>자원 점유, 순환 대기</td></tr><tr><td></td><td>Coffman 조건</td><td>데드락 발생 위한 네 가지 조건 (상호배제, 점유 및 대기, 비선점, 순환 대기)</td><td>Deadlock 탐지/회피 전략</td></tr><tr><td></td><td>자원 할당 그래프 (RAG)</td><td>프로세스와 자원의 점유 및 대기 관계를 시각화한 그래프</td><td>Deadlock 탐지 알고리즘</td></tr><tr><td></td><td>순환 대기 (Circular Wait)</td><td>프로세스들이 서로 자원을 기다리며 원형으로 대기하는 구조</td><td>Coffman 조건 중 하나</td></tr><tr><td><strong>Livelock</strong></td><td>활락상태 (Livelock)</td><td>프로세스들이 상태를 계속 바꾸지만 실질적으로 진전이 없는 상태</td><td>백오프, 재시도, 무한 루프</td></tr><tr><td></td><td>백오프 (Backoff)</td><td>충돌 시 랜덤한 시간 대기 후 재시도하는 전략</td><td>충돌 회피, Livelock 방지</td></tr><tr><td><strong>Race Condition</strong></td><td>경쟁 상태 (Race Condition)</td><td>실행 순서나 타이밍에 따라 결과가 달라지는 병렬 처리의 취약 상태</td><td>원자 연산, 동기화, 임계 구역</td></tr><tr><td></td><td>원자 연산 (Atomic Operation)</td><td>분할 불가능하며 중단 없이 수행되는 단일 연산</td><td>CAS, Lock-Free 자료구조</td></tr><tr><td></td><td>메모리 모델 (Memory Model)</td><td>병렬 환경에서의 명령어 실행 순서를 정의한 모델 (JMM 등)</td><td>동기화 보장, 컴파일러 최적화</td></tr><tr><td><strong>Starvation</strong></td><td>기아 상태 (Starvation)</td><td>특정 태스크가 자원을 지속적으로 할당받지 못해 실행되지 않는 상태</td><td>우선순위, 공정 스케줄링</td></tr><tr><td></td><td>Aging</td><td>오래 대기한 작업의 우선순위를 점진적으로 높이는 방식</td><td>Starvation 방지, 스케줄링</td></tr><tr><td></td><td>우선순위 반전 (Priority Inversion)</td><td>낮은 우선순위 태스크가 높은 우선순위 태스크를 블로킹하는 현상</td><td>리얼타임 OS, 세마포어 보호</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><a href=https://jcip.net/>Java Concurrency in Practice</a></li><li><a href=https://golang.org/doc/articles/race_detector.html>Go Race Detector</a></li><li><a href=https://www.kernel.org/doc/html/latest/>Linux Kernel Documentation (Locking 및 컨커런시 항목)</a></li><li><a href=https://learn.microsoft.com/en-us/dotnet/standard/threading/>Microsoft Threading Documentation (C#/.NET)</a></li><li><a href=https://doc.rust-lang.org/book/ch16-00-concurrency.html>Rust Concurrency Safety (Rust Book Chapter 16)</a></li><li><a href=https://www.geeksforgeeks.org/deadlock-prevention/>Deadlock Prevention and Avoidance - GeeksforGeeks</a></li><li><a href=https://www.baeldung.com/cs/deadlock-livelock-starvation>Concurrency Problems Analysis - Baeldung</a></li><li><a href=https://stackoverflow.com/questions/6155951/whats-the-difference-between-deadlock-and-livelock>Stack Overflow – Deadlock vs Livelock 차이</a></li><li><a href=https://medium.com/%40krishnachaitanya.win111/solving-race-condition-how-one-line-of-code-saved-our-billing-system-664ee24a671d>Solving Race Condition 사례 - Medium</a></li><li><a href=https://www.tutorialspoint.com/deadlock-detection-and-recovery>TutorialPoint – Deadlock Detection and Recovery</a></li></ul><hr></div><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Livelock</h2></header><div class=entry-content><p>Livelock 라이브락 (Livelock) 은 프로세스나 스레드가 계속 실행되지만 실제 진전 없이 상태만 반복 변경하는 동시성 문제다. 데드락처럼 시스템 진행을 막지만, 블로킹 없이 동작해 탐지가 어렵다.
주로 자원 회피 전략 과잉, 잘못된 재시도 루틴, 비효율적 동기화로 발생하며, 분산 트랜잭션 재시도, 네트워크 백오프, 인터럽트 핸들러 경쟁 상황에서 자주 관찰된다.
실무에서는 CPU 과소비, 처리 지연, 메시지 무한 대기로 이어져 성능 저하를 초래하며, 랜덤 백오프, 타임아웃, 우선순위 제어로 해결할 수 있다.
Livelock 방지는 고성능 시스템 설계의 필수 요소다.
...</p></div><footer class=entry-footer><span title='2025-05-20 14:48:00 +0000 UTC'>May 20, 2025</span>&nbsp;·&nbsp;63 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Livelock" href=https://buenhyden.github.io/posts/computer-science-fundamentals/concurrency--parallel-computing/concurrency-fundamentals/concurrency-problems/livelock/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Race Condition</h2></header><div class=entry-content><p>Race Condition Race Condition(경쟁 상태) 은 멀티스레드나 분산 시스템에서 여러 실행 흐름이 공유 자원에 동시에 접근할 때, 실행 순서나 타이밍에 따라 결과가 달라지는 예측 불가능한 상태다.
동기화 미비, 비원자적 연산, TOCTOU 와 같은 패턴에서 자주 발생하며, 데이터 손상, 시스템 오류, 보안 취약점의 원인이 된다. 이를 예방하기 위해 뮤텍스, 세마포어, 원자 연산, 트랜잭션, 불변 객체 등이 사용되며, 실시간 시스템, 마이크로서비스, OS 커널 등 고신뢰 환경에서는 철저한 사전 방지 및 테스트가 필수적이다.
...</p></div><footer class=entry-footer><span title='2025-05-20 14:48:00 +0000 UTC'>May 20, 2025</span>&nbsp;·&nbsp;64 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Race Condition" href=https://buenhyden.github.io/posts/computer-science-fundamentals/concurrency--parallel-computing/concurrency-fundamentals/concurrency-problems/race-condition/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Starvation</h2></header><div class=entry-content><p>Starvation Starvation(기아 상태) 은 동시성 환경에서 특정 프로세스나 스레드가 자원을 장기간 할당받지 못해 무한히 대기하게 되는 현상이다.
주로 우선순위 기반 스케줄링, 불공정한 자원 접근, 락 경쟁 등에서 발생하며, 시스템은 작동하나 일부 작업은 실행되지 않아 Liveness 를 침해한다.
Deadlock 과 달리 전체 시스템이 멈추지는 않지만, 처리량과 공정성에 악영향을 준다.
예방책으로는 Aging, 공정한 스케줄링 (CFS, Fair Lock), 자원 예약, 우선순위 재조정 등이 있으며, 운영체제, DBMS, 분산 시스템 등에서 중요한 동시성 제어 이슈로 다뤄진다.
...</p></div><footer class=entry-footer><span title='2025-05-20 14:48:00 +0000 UTC'>May 20, 2025</span>&nbsp;·&nbsp;49 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Starvation" href=https://buenhyden.github.io/posts/computer-science-fundamentals/concurrency--parallel-computing/concurrency-fundamentals/concurrency-problems/starvation/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Deadlock</h2></header><div class=entry-content><p>Deadlock Deadlock(교착 상태) 은 둘 이상의 프로세스나 스레드가 자원을 점유한 채 상대방 자원을 기다리며 무한 대기하는 상태로, 동시성 환경에서 발생하는 치명적인 문제다.
Coffman 의 네 가지 조건 (상호 배제, 점유 대기, 비선점, 환형 대기) 이 모두 만족될 때 발생하며, 운영체제, 데이터베이스, 분산 시스템, 마이크로서비스 환경 등에서 자주 나타난다.
해결을 위해 예방, 회피, 탐지 및 복구 전략이 사용되며, 자원 할당 그래프나 Wait-for Graph 등으로 상태를 모델링한다.
실무에서는 락, 세마포어, 트랜잭션 제어 외에도 타임아웃, 분산 트레이싱, 관측성 도구 등을 통해 사전 진단과 대응이 중요하다.
...</p></div><footer class=entry-footer><span title='2025-05-20 14:47:00 +0000 UTC'>May 20, 2025</span>&nbsp;·&nbsp;39 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Deadlock" href=https://buenhyden.github.io/posts/computer-science-fundamentals/concurrency--parallel-computing/concurrency-fundamentals/concurrency-problems/deadlock/></a></article></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>