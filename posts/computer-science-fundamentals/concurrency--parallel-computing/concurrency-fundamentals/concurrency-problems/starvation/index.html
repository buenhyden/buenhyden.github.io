<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Starvation | hyunyoun's Blog</title><meta name=keywords content="Computer-Science-Fundamentals,Concurrency-and-Parallelism,Concurrency-Problems,Starvation"><meta name=description content="Starvation은 동시성 시스템에서 특정 프로세스나 스레드가 자원을 지속적으로 할당받지 못해 실행되지 않는 상태이다. 주로 우선순위 스케줄링, 자원 경합 등에서 발생하며 시스템의 공정성을 해친다. 에이징, 공정 락, 라운드 로빈 등으로 방지할 수 있다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/computer-science-fundamentals/concurrency--parallel-computing/concurrency-fundamentals/concurrency-problems/starvation/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/computer-science-fundamentals/concurrency--parallel-computing/concurrency-fundamentals/concurrency-problems/starvation/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/computer-science-fundamentals/concurrency--parallel-computing/concurrency-fundamentals/concurrency-problems/starvation/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/computer-science-fundamentals/concurrency--parallel-computing/concurrency-fundamentals/concurrency-problems/starvation/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Starvation"><meta property="og:description" content="Starvation은 동시성 시스템에서 특정 프로세스나 스레드가 자원을 지속적으로 할당받지 못해 실행되지 않는 상태이다. 주로 우선순위 스케줄링, 자원 경합 등에서 발생하며 시스템의 공정성을 해친다. 에이징, 공정 락, 라운드 로빈 등으로 방지할 수 있다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Starvation"><meta name=twitter:description content="Starvation은 동시성 시스템에서 특정 프로세스나 스레드가 자원을 지속적으로 할당받지 못해 실행되지 않는 상태이다. 주로 우선순위 스케줄링, 자원 경합 등에서 발생하며 시스템의 공정성을 해친다. 에이징, 공정 락, 라운드 로빈 등으로 방지할 수 있다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"HY's Blog","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Computer Science Fundamentals","item":"https://buenhyden.github.io/posts/computer-science-fundamentals/"},{"@type":"ListItem","position":6,"name":"Starvation","item":"https://buenhyden.github.io/posts/computer-science-fundamentals/concurrency--parallel-computing/concurrency-fundamentals/concurrency-problems/starvation/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>HY's Blog</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/computer-science-fundamentals/>Computer Science Fundamentals</a></div><h1>Starvation</h1><div class=post-description>Starvation은 동시성 시스템에서 특정 프로세스나 스레드가 자원을 지속적으로 할당받지 못해 실행되지 않는 상태이다. 주로 우선순위 스케줄링, 자원 경합 등에서 발생하며 시스템의 공정성을 해친다. 에이징, 공정 락, 라운드 로빈 등으로 방지할 수 있다.</div></header><div class=post-content><h2 id=starvation>Starvation<a hidden class=anchor aria-hidden=true href=#starvation>#</a></h2><p>Starvation(기아 상태) 은 동시성 환경에서 특정 프로세스나 스레드가 자원을 장기간 할당받지 못해 무한히 대기하게 되는 현상이다.<br>주로 우선순위 기반 스케줄링, 불공정한 자원 접근, 락 경쟁 등에서 발생하며, 시스템은 작동하나 일부 작업은 실행되지 않아 Liveness 를 침해한다.<br>Deadlock 과 달리 전체 시스템이 멈추지는 않지만, 처리량과 공정성에 악영향을 준다.</p><p>예방책으로는 Aging, 공정한 스케줄링 (CFS, Fair Lock), 자원 예약, 우선순위 재조정 등이 있으며, 운영체제, DBMS, 분산 시스템 등에서 중요한 동시성 제어 이슈로 다뤄진다.</p><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><ol><li><strong>Starvation(기아 상태)</strong>: 실행 흐름이 자원을 무기한 할당받지 못해 실행되지 못하는 상태</li><li><strong>공정성 (Fairness)</strong>: 자원이 모든 프로세스에게 균등하게 배분되어야 한다는 원칙</li><li><strong>우선순위 역전 (Priority Inversion)</strong>: 낮은 우선순위 작업이 높은 우선순위 작업의 실행을 막는 현상</li><li><strong>에이징 (Aging)</strong>: 대기 시간이 길어질수록 우선순위를 높여 Starvation 을 방지하는 기법</li><li><strong>Fair Lock (공정한 락)</strong>: 락을 요청한 순서에 따라 공평하게 자원을 할당하는 구조</li><li><strong>Liveness & Starvation-Free</strong>: 시스템이 멈추지 않고 모든 작업이 결국 실행되어야 하는 성질</li><li><strong>Finite Bypass (유한 우회)</strong>: 어떤 프로세스도 자원 접근이 무한히 지연되면 안 됨</li><li><strong>스케줄링 정책</strong>: 자원의 할당 방식에 따라 Starvation 여부가 결정됨</li></ol><h4 id=핵심-개념과-실무-구현-연관성-정리>핵심 개념과 실무 구현 연관성 정리<a hidden class=anchor aria-hidden=true href=#핵심-개념과-실무-구현-연관성-정리>#</a></h4><table><thead><tr><th>핵심 개념</th><th>실무 구현 방식</th><th>예시 시스템 또는 기술</th></tr></thead><tbody><tr><td>Starvation</td><td>자원 경합 구조의 비공정성 제거</td><td>Linux CFS, Java ThreadPool</td></tr><tr><td>공정성</td><td>요청 순서 기반 자원 배분</td><td>Fair Queue, Fair Lock</td></tr><tr><td>우선순위 역전</td><td>Priority Ceiling Protocol</td><td>RTOS, 실시간 제어 시스템</td></tr><tr><td>Aging</td><td>시간 경과에 따른 우선순위 상승</td><td>OS 스케줄러 (CFS)</td></tr><tr><td>Fair Lock</td><td>FIFO 기반 락 대기 큐 사용</td><td>Java ReentrantLock, Redis RedLock</td></tr><tr><td>Finite Bypass</td><td>자원 접근 횟수 제한</td><td>Bakery Algorithm, Filter Algorithm</td></tr><tr><td>Starvation-Free</td><td>유한 시간 내 자원 접근 보장</td><td>Lamport&rsquo;s Algorithm</td></tr><tr><td>스케줄링 정책</td><td>Round-Robin, Weighted Fair Queuing</td><td>Cloud Task Scheduler, Kubernetes</td></tr></tbody></table><p>Starvation(기아 상태) 은 동시성 환경에서 특정 실행 흐름이 자원을 할당받지 못해 무한히 대기하는 현상이다.<br>주로 우선순위 기반 스케줄링이나 불공정한 락 획득에서 발생하며, 시스템 공정성과 응답성을 저하시킨다. 이를 해결하기 위해 Aging, Fair Lock, 우선순위 역전 방지, Finite Bypass 등을 적용한다.<br>운영체제, 데이터베이스, 분산 시스템 등에서 Starvation 방지는 시스템 안정성과 성능 확보를 위해 필수적이다.</p><h3 id=기초-이해-foundation-understanding>기초 이해 (Foundation Understanding)<a hidden class=anchor aria-hidden=true href=#기초-이해-foundation-understanding>#</a></h3><h4 id=개념-정의-및-본질>개념 정의 및 본질<a hidden class=anchor aria-hidden=true href=#개념-정의-및-본질>#</a></h4><p><strong>정의</strong>:</p><ul><li><strong>Starvation(기아 상태)</strong> 은 병렬 또는 동시성 시스템에서 하나 이상의 프로세스 또는 스레드가 필요한 자원이 있음에도 불구하고, 특정 자원 할당 정책 또는 스케줄링 우선순위의 불균형으로 인해 <strong>자원을 무한히 할당받지 못해 실행되지 않는 상태</strong>를 말한다.</li></ul><p><strong>본질적 특성</strong>:</p><ul><li><strong>무한 대기 (Indefinite Waiting)</strong>: 자원은 충분히 존재하지만, 특정 실행 흐름은 자원을 할당받지 못해 무기한 대기</li><li><strong>불공정성 (Unfairness)</strong>: 자원 분배 정책의 편향성으로 특정 작업이 반복적으로 제외됨</li><li><strong>시스템 활성성 유지 (System Liveness)</strong>: 시스템 전체는 계속 동작하지만, 특정 실행 흐름만 진행되지 않음</li><li><strong>라이브니스 (Liveness) 속성 위반</strong>: 모든 실행 흐름은 결국 진전되어야 한다는 원칙에 위배됨</li><li><strong>Deadlock 과의 차이</strong>: Deadlock 은 모든 실행 흐름이 멈추지만, Starvation 은 <strong>일부만 멈추고 나머지는 정상 수행</strong></li></ul><p><strong>발생 가능한 자원 범위</strong>:</p><ul><li>CPU, 메모리, 네트워크 대역폭, 디스크, I/O 장치, 락 및 세마포어 등 <strong>모든 공유 자원</strong>에서 Starvation 이 발생할 수 있음</li></ul><h4 id=등장-배경-및-발전-과정>등장 배경 및 발전 과정<a hidden class=anchor aria-hidden=true href=#등장-배경-및-발전-과정>#</a></h4><h5 id=등장-배경>등장 배경<a hidden class=anchor aria-hidden=true href=#등장-배경>#</a></h5><ul><li><strong>동시성 환경의 등장</strong>: 1960 년대 멀티프로그래밍 시스템 도입으로 다양한 실행 흐름이 동시에 자원을 요청하게 되며 자원 충돌 및 대기 문제 발생</li><li><strong>우선순위 기반 스케줄링의 한계</strong>: CPU 우선순위 방식이 도입되면서 낮은 우선순위 프로세스의 무한 대기가 현실화됨</li><li><strong>다익스트라의 문제 제기</strong>: 1965 년 세마포어 및 Dining Philosophers 문제를 통해 이론적으로 기아 상태가 처음 구조화됨</li><li><strong>현실적 사례</strong>: MIT IBM 7094 시스템에서 우선순위 스케줄링으로 인해 프로세스가 수년간 실행되지 못한 사례가 보고됨</li></ul><h5 id=발전-과정>발전 과정<a hidden class=anchor aria-hidden=true href=#발전-과정>#</a></h5><ul><li><strong>1970 년대</strong>: Round-Robin, 에이징 (Aging) 등 공정성 확보를 위한 스케줄링 기법 연구 시작</li><li><strong>1980~90 년대</strong>: 실시간 시스템 (RTOS) 에서 우선순위 역전 (Priority Inversion) 및 기아 현상 해결이 핵심 과제로 부각</li><li><strong>2000 년대</strong>: 멀티코어 환경 확산 → 공정한 락 (Fair Lock), CFS 등 실무 시스템에서 기아 방지 알고리즘 채택</li><li><strong>2010 년대~현재</strong>: 클라우드, 컨테이너 기반 시스템 (Kubernetes, Serverless 등) 에서 QoS 기반 자원 정책이 기아 현상의 원인이자 해결점으로 작용함</li></ul><h4 id=발생-원인-및-문제-상황>발생 원인 및 문제 상황<a hidden class=anchor aria-hidden=true href=#발생-원인-및-문제-상황>#</a></h4><pre class=mermaid>graph TD
    A[자원 요청] --&gt; B[우선순위 기반 스케줄러]
    B --&gt; C{낮은 우선순위?}
    C -- Yes --&gt; D[대기 큐로 이동]
    D --&gt; E[다른 태스크에게 계속 선점]
    E --&gt; F[자원 획득 실패 반복 → Starvation 발생]
</pre><h5 id=발생-원인>발생 원인<a hidden class=anchor aria-hidden=true href=#발생-원인>#</a></h5><table><thead><tr><th>원인 유형</th><th>설명</th><th>실무 사례 또는 기술 근거</th></tr></thead><tbody><tr><td>우선순위 기반 스케줄링</td><td>고우선순위 작업이 지속적으로 자원을 점유함</td><td>RTOS, ThreadPool 에서 낮은 우선순위 태스크 무한 대기</td></tr><tr><td>불공정 락 구조</td><td>락이 FIFO 가 아닌 내부 정책 (비공정 모드 등) 으로 작동하여 특정 요청만 수용</td><td>Java <code>ReentrantLock(false)</code>, spinlock</td></tr><tr><td>자원 경합</td><td>자원 수요가 공급 초과되거나 특정 자원이 독점됨</td><td>DB Read/Write 경합, I/O 채널 부족</td></tr><tr><td>정책 미비</td><td>Aging, Round-Robin 등의 공정성 보정 기법이 미적용됨</td><td>FIFO 없는 큐, 단일 우선순위 정책 등</td></tr><tr><td>무한 재시도</td><td>자원 요청 실패 후 busy-wait 또는 loop retry 구조</td><td><code>while(!lock.try())</code> 와 같은 구조</td></tr><tr><td>자원 누수</td><td>리소스가 반납되지 않아 접근 불가능 상태로 남음</td><td>락 미해제, 파일 핸들 누수</td></tr><tr><td>악의적 시스템 점유</td><td>공격성 요청으로 정상 작업이 자원 접근 불가</td><td>fork bomb, queue flooding</td></tr></tbody></table><p>Starvation 은 스케줄링 우선순위의 불균형, 자원 경합, 락의 불공정성, 정책 부재, 자원 누수, 그리고 악의적 부하와 같은 다양한 기술적 조건에서 발생할 수 있다. 특히 이러한 원인들은 대부분 자원 분배의 불공정성에 뿌리를 두고 있으며, 시스템 수준에서 적절한 보정 메커니즘 없이 방치될 경우 기아 현상으로 이어진다.</p><h5 id=문제-상황>문제 상황<a hidden class=anchor aria-hidden=true href=#문제-상황>#</a></h5><table><thead><tr><th>문제 유형</th><th>설명</th><th>발생 영역 예시</th></tr></thead><tbody><tr><td>무한 대기</td><td>특정 태스크가 끝없이 자원 대기 상태에 머무름</td><td>백엔드 요청 지연, DB 트랜잭션 블로킹</td></tr><tr><td>응답성 저하</td><td>전체 서비스 응답 시간이 증가하거나 일부 요청은 타임아웃 발생</td><td>API 서버, 실시간 통신 서비스</td></tr><tr><td>처리량 감소</td><td>전체 시스템 처리 효율이 감소함</td><td>배치 처리, 병렬 작업 큐</td></tr><tr><td>자원 불균형</td><td>특정 자원만 계속 사용되며 나머지 자원은 유휴 상태로 남음</td><td>I/O 병목, CPU 대기열 불균형</td></tr><tr><td>공정성 저하</td><td>일부 작업에 자원이 지속적으로 배분되고 나머지는 배제됨</td><td>우선순위 스케줄링, Thread starvation</td></tr><tr><td>시스템 불안정성</td><td>자원 누수나 무한 대기로 인해 서비스 전체가 장애 상태에 근접</td><td>락 미반납, 스레드 블로킹 누적</td></tr></tbody></table><p>Starvation 은 단일 태스크의 무한 대기뿐 아니라 전체 시스템의 응답 지연, 처리량 감소, 자원 불균형, 서비스 불안정 등 다양한 성능 및 신뢰성 문제로 확산될 수 있다. 특히 공정성의 저하는 사용자 경험과 직결되며, 장기적으로는 서비스 가용성에 악영향을 줄 수 있다.</p><table><thead><tr><th>원인</th><th>설명</th><th>실예</th></tr></thead><tbody><tr><td>우선순위 기반 스케줄링</td><td>고우선 태스크가 지속적으로 리소스를 선점</td><td>실시간 OS 에서 낮은 우선순위 태스크 무한 대기</td></tr><tr><td>불공정한 락 구조</td><td>Lock 이 항상 먼저 온 태스크가 아닌 특정 조건에 따라 부여됨</td><td>Java <code>ReentrantLock(false)</code> 사용</td></tr><tr><td>자원 경쟁 심화</td><td>자원 수요가 공급을 초과하거나 불균형</td><td>DB 에서 Write 가 Read 에 의해 계속 밀림</td></tr><tr><td>무한 루프 재시도</td><td>락 획득 실패 후 무한 재시도</td><td>busy waiting 구조</td></tr><tr><td>정책 미비</td><td>Aging 등 보정 정책 미적용</td><td>FIFO 대기 없는 큐 처리</td></tr></tbody></table><h4 id=주요-특징>주요 특징<a hidden class=anchor aria-hidden=true href=#주요-특징>#</a></h4><table><thead><tr><th><strong>구분</strong></th><th><strong>기술적 특징</strong></th><th><strong>도출 근거</strong></th></tr></thead><tbody><tr><td>시스템 동작 유지</td><td>일부 프로세스만 지연되고 전체 시스템은 계속 동작함</td><td>Starvation 은 Deadlock 과 달리 시스템이 완전히 멈추지 않음</td></tr><tr><td>공정성 저하</td><td>특정 작업이 반복적으로 자원 할당에서 제외됨</td><td>우선순위 기반 스케줄링, 락 경쟁, 자원 선점 정책의 불균형</td></tr><tr><td>감지 어려움</td><td>외형상 실행 가능한 상태이나 실제 실행되지 않음</td><td>프로세스는 Ready 상태를 유지하지만 자원을 할당받지 못해 실행되지 않음</td></tr><tr><td>예측 불가능성</td><td>작업량 변화, 동적 스레드 수 증가 등으로 예측 어려움</td><td>우선순위 작업 수나 타이밍에 따라 Starvation 발생 조건이 매번 달라짐</td></tr><tr><td>응답성/처리량 저하</td><td>일부 작업의 무한 대기가 전체 성능 저하로 이어짐</td><td>SLA 위반, 대기 큐 증가로 시스템 전체 응답 시간이 지연됨</td></tr><tr><td>런타임 해결 가능성</td><td>스케줄링 정책 또는 우선순위 조정으로 해결 가능</td><td>Aging, Fair Scheduling, Priority Boosting 등 기법 적용 시 해소 가능</td></tr><tr><td>우선순위 기반 구조에 민감</td><td>낮은 우선순위 프로세스가 지속적으로 밀림</td><td>Priority Scheduling 환경에서 높은 우선순위 태스크가 자원을 독점</td></tr><tr><td>Liveness 위반</td><td>작업이 완료되지 않고 무기한 대기</td><td>시스템의 활성성 (Liveness) 조건을 충족하지 못하는 전형적인 사례</td></tr><tr><td>자원 종속성 없음</td><td>다른 프로세스의 자원 반환을 기다리는 구조가 아님</td><td>Deadlock 과 달리 타 프로세스의 락 해제와 무관하게 자체적으로 자원을 얻지 못하는 상황에서 발생</td></tr><tr><td>비결정적 발생</td><td>코드에 명시되지 않아도 상황에 따라 자연스럽게 발생</td><td>자원 경합 구조, 스케줄링 정책의 편향성에 따라 비의도적으로 발생 가능</td></tr></tbody></table><p>Starvation 은 시스템이 계속 동작함에도 특정 작업이 자원을 할당받지 못하고 무기한 지연되는 <strong>비결정적이고 탐지 어려운 동시성 문제</strong>이다.<br>이는 <strong>우선순위 기반 스케줄링이나 락 경합 구조의 불균형</strong>에서 발생하며, <strong>공정성 저하, 응답 지연, 시스템 처리량 감소</strong> 등의 실질적인 성능 저하로 이어진다.<br>Deadlock 과 달리 자원의 상호 의존성이 없고 런타임에서 <strong>Aging, Fair Lock, 스케줄링 정책 변경</strong> 등을 통해 해결 가능하다.<br>특히 시스템 설계 초기부터 이러한 특성을 고려한 예측 가능한 스케줄링 전략 수립이 중요하다.</p><h3 id=핵심-이론-core-theory>핵심 이론 (Core Theory)<a hidden class=anchor aria-hidden=true href=#핵심-이론-core-theory>#</a></h3><h4 id=핵심-설계-원칙>핵심 설계 원칙<a hidden class=anchor aria-hidden=true href=#핵심-설계-원칙>#</a></h4><ol><li><p><strong>공정성 (Fairness)</strong></p><ul><li>모든 실행 흐름이 자원 접근 기회를 고르게 가질 수 있어야 하며, 선점 스케줄링에서도 이 원칙이 반영되어야 함</li></ul></li><li><p><strong>라이브니스 (Liveness)</strong></p><ul><li>시스템이 계속 진행될 수 있도록 보장되어야 하며, 어떤 작업도 무한히 차단되면 안 됨</li></ul></li><li><p><strong>우선순위 역전 방지 (Priority Inversion Prevention)</strong></p><ul><li>낮은 우선순위 작업이 고우선순위 작업을 차단하지 않도록 <code>Priority Inheritance</code> 등을 사용</li></ul></li><li><p><strong>Bounded Waiting (유한 대기 보장)</strong></p><ul><li>어떤 프로세스도 유한 횟수 이상 자원 요청에서 밀려서는 안됨</li></ul></li><li><p><strong>자원 할당 예측 가능성 (Predictability)</strong></p><ul><li>시스템은 최대 대기 시간이나 자원 할당 시점을 예측할 수 있어야 하며, 특히 실시간 시스템에 필수</li></ul></li><li><p><strong>비선점 제어 (Controlled Preemption)</strong></p><ul><li>선점형 스케줄링일 경우, 지속적인 선점으로 특정 작업이 starvation 에 빠지지 않도록 빈도를 제어해야 함</li></ul></li></ol><table><thead><tr><th>설계 원칙</th><th>설명</th><th>Starvation 방지 방식 및 적용 예시</th></tr></thead><tbody><tr><td>공정성 (Fairness)</td><td>자원과 기회를 모든 실행 흐름에 균등하게 부여</td><td>Fair Lock, Round-Robin, Weighted Fair Queuing</td></tr><tr><td>라이브니스 (Liveness)</td><td>모든 프로세스가 언젠가는 반드시 실행 기회를 가져야 함</td><td>Aging, Finite Bypass 정책</td></tr><tr><td>우선순위 역전 방지</td><td>낮은 우선순위 프로세스가 높은 우선순위를 차단하지 않도록 보장</td><td>Priority Inheritance, Priority Ceiling</td></tr><tr><td>유한 대기 보장 (Bounded Waiting)</td><td>각 태스크가 유한 횟수 이내 자원에 접근 가능해야 함</td><td>Starvation-Free Algorithm, Ticket Lock</td></tr><tr><td>예측 가능성 (Predictability)</td><td>자원 할당 시점을 예상할 수 있어야 하며, 최대 대기 시간이 보장되어야 함</td><td>Real-Time OS 스케줄러, Deadline 설정</td></tr><tr><td>비선점 제어 (Preemption Control)</td><td>낮은 우선순위 작업이 지속적으로 선점되지 않도록 제어</td><td>CFS(Linux), 태스크 Aging</td></tr></tbody></table><ul><li><p><strong>공정성 (Fairness)</strong> 은 starvation 방지의 핵심 원칙으로, 자원 분배와 기회 제공의 균형을 통해 모든 태스크가 합리적 시간 내 실행될 수 있도록 한다.</p></li><li><p><strong>라이브니스 (Liveness)</strong> 는 시스템이 멈추지 않고 모든 작업이 실행 가능함을 보장하는 설계 기준이며, starvation 은 이 원칙의 위반이다.</p></li><li><p><strong>우선순위 역전 방지</strong>는 낮은 우선순위 태스크가 시스템 전체 흐름을 막지 않도록 하기 위한 보호장치이며, 실시간 시스템에서 중요하다.</p></li><li><p><strong>Bounded Waiting</strong>은 무한 대기를 구조적으로 차단하는 기준이며, Starvation-Free 시스템의 근간이 된다.</p></li><li><p><strong>Predictability</strong>는 특히 실시간 시스템이나 QoS 보장이 필요한 환경에서 자원 할당의 신뢰성을 높이는 데 필수적이다.</p></li><li><p><strong>Controlled Preemption</strong>은 선점 정책이 오히려 starvation 을 유발하지 않도록 빈도나 우선순위를 동적으로 조절하는 메커니즘이다.</p></li></ul><h4 id=기본-원리-및-동작-메커니즘>기본 원리 및 동작 메커니즘<a hidden class=anchor aria-hidden=true href=#기본-원리-및-동작-메커니즘>#</a></h4><h5 id=기본-원리>기본 원리<a hidden class=anchor aria-hidden=true href=#기본-원리>#</a></h5><table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>우선순위 기반 선점</td><td>스케줄러가 항상 높은 우선순위의 태스크에 자원을 먼저 할당함</td></tr><tr><td>반복적 자원 요청</td><td>높은 우선순위 태스크가 반복적으로 자원을 요청하여 낮은 우선순위 태스크는 계속 밀림</td></tr><tr><td>자원 독점 구조</td><td>락 또는 공유 자원을 특정 스레드가 독점하게 되면, 다른 스레드는 접근 불가 → 무한 대기 상태 발생</td></tr><tr><td>정책적 편향성</td><td>스케줄러 또는 자원 관리 정책이 공정성을 보장하지 않을 경우 특정 태스크가 지속적으로 배제될 수 있음</td></tr><tr><td>실행 불가능 상태 유지</td><td>외형상 Ready 상태이나 실제로는 자원 할당 기회를 얻지 못해 실행되지 못함</td></tr><tr><td>해결 지연 및 누락 가능성</td><td>탐지가 어렵고 시스템이 정상처럼 보이므로 실시간 대응이 늦어질 수 있음</td></tr></tbody></table><p>Starvation 은 우선순위 기반 또는 자원 경합 상황에서 특정 작업이 반복적으로 자원을 할당받지 못하면서 무한 대기에 빠지는 현상이다. 이는 정책적 불공정성, 자원 독점 구조, 그리고 반복 요청 구조에 의해 강화되며 시스템의 일부 작업이 무기한 실행되지 않는 문제를 초래한다. 외형상 시스템은 정상 동작하므로 탐지와 해결이 지연될 수 있으며, 스케줄러 설계 및 락 정책이 주요 원인이 된다.</p><h5 id=동작-메커니즘-흐름>동작 메커니즘 흐름<a hidden class=anchor aria-hidden=true href=#동작-메커니즘-흐름>#</a></h5><pre class=mermaid>sequenceDiagram
    participant LP as 낮은 우선순위 프로세스 (P1)
    participant HP as 높은 우선순위 프로세스 (P2, P3, …)
    participant SCHED as 스케줄러
    participant RES as 자원

    LP-&gt;&gt;SCHED: 자원 요청
    SCHED--&gt;&gt;LP: 대기 (낮은 우선순위)

    loop 반복
        HP-&gt;&gt;SCHED: 자원 요청
        SCHED-&gt;&gt;RES: 자원 할당
        RES--&gt;&gt;HP: 자원 사용
        SCHED--&gt;&gt;LP: 대기 유지
    end

    Note over LP: 높은 우선순위 프로세스의 지속적 선점으로 인해 P1은 무한 대기  
</pre><p>**낮은 우선순위 프로세스 (P1)**가 자원을 요청하지만, <strong>지속적으로 도착하는 높은 우선순위 프로세스 (P2, P3 등)</strong> 에 의해 자원이 계속 선점되는 구조를 표현한다.<br>스케줄러는 항상 높은 우선순위의 프로세스에 자원을 할당하고, 낮은 우선순위 프로세스는 반복적으로 대기만 하게 된다.<br>이러한 순환 구조가 지속되면 <strong>P1 은 실행 기회를 얻지 못한 채 무기한 대기 상태</strong>, 즉 <strong>Starvation 상태</strong>에 빠지게 된다.<br>겉보기에는 시스템이 정상적으로 작동하지만, 내부적으로는 <strong>특정 작업이 영원히 처리되지 않는 비활성 문제</strong>가 발생하는 것이다.</p><h4 id=아키텍처-및-구성-요소>아키텍처 및 구성 요소<a hidden class=anchor aria-hidden=true href=#아키텍처-및-구성-요소>#</a></h4><pre class=mermaid>graph TB
    subgraph Application Layer
        T1[&#34;작업 요청(Task/Thread)&#34;]
    end

    subgraph Scheduling Layer
        A1[Scheduler]
        A2[Priority Queue]
        A3[Aging Engine]
        A4[Policy Manager]
    end

    subgraph Resource Layer
        B1[Resource Manager]
        B2[Fair Lock / Semaphore]
        B3[Resource Pool]
        B4[Reservation Manager]
        B5[Resource Leak Detector]
    end

    subgraph Monitoring Layer
        C1[Fairness Monitor]
        C2[Logging / Alerting]
    end

    T1 --&gt; A1
    A1 --&gt; A2
    A2 --&gt; A3
    A3 --&gt; A4
    A1 --&gt; B1
    B1 --&gt; B2
    B1 --&gt; B3
    B3 --&gt; T1

    B1 --&gt; B4
    B1 --&gt; B5

    A1 --&gt; C1
    C1 --&gt; C2
    C2 --&gt; A4
</pre><p>Starvation 방지 또는 완화는 시스템 구조 차원에서 다음과 같은 구성 요소 간의 협업을 필요로 한다:</p><ul><li><strong>핵심 흐름</strong>은 스케줄러 → 우선순위 조정 → 자원 할당으로 이어지며, 여기서의 공정성이 보장되지 않으면 Starvation 이 발생한다.</li><li><strong>선택적 구성요소</strong>인 에이징, 리소스 예약, 정책 관리자, 공정 큐잉 등은 Starvation 완화를 위한 전략적 도구로 기능하며, <strong>모니터링 시스템</strong>은 이상 징후를 조기에 탐지해 대응을 유도한다.</li><li>아키텍처적으로는 <strong>Application → Scheduling → Resource → Monitoring</strong> 흐름을 따라 설계되며, 각 계층 간 책임이 명확히 구분되어야 Starvation 예방이 구조적으로 가능해진다.</li></ul><h5 id=아키텍처-구성-요소>아키텍처 구성 요소<a hidden class=anchor aria-hidden=true href=#아키텍처-구성-요소>#</a></h5><table><thead><tr><th>구성 요소</th><th>필수/선택</th><th>설명</th><th>역할 및 기능</th><th>Starvation 관련 기여/대응</th></tr></thead><tbody><tr><td><strong>스케줄러 (Scheduler)</strong></td><td>필수</td><td>태스크 실행 순서 및 자원 할당 우선순위 결정</td><td>우선순위 기반 실행, 대기 큐 관리, 자원 배분</td><td>우선순위 편중 시 Starvation 유발</td></tr><tr><td><strong>자원 관리자 (Resource Manager)</strong></td><td>필수</td><td>CPU, Memory, IO 등 시스템 자원을 분배</td><td>실제 자원 할당/회수, 충돌 회피</td><td>잘못된 분배 시 자원 경합 발생</td></tr><tr><td><strong>락 / 세마포어</strong></td><td>필수</td><td>자원 접근 제어 메커니즘 (뮤텍스, 세마포어 등)</td><td>경쟁 제어, 상호 배제, 임계영역 보호</td><td>FIFO 미보장 시 Starvation 유발</td></tr><tr><td><strong>우선순위 큐</strong></td><td>선택</td><td>우선순위 기반 태스크 분류 및 스케줄링</td><td>대기열 분류, 선별적 실행</td><td>저우선순위 작업 지속 배제</td></tr><tr><td><strong>에이징 엔진 (Aging Engine)</strong></td><td>선택</td><td>대기 시간이 길수록 태스크의 우선순위를 점진적으로 증가시키는 정책 적용</td><td>공정성 보장, 우선순위 자동 보정</td><td>Starvation 완화 핵심 기법</td></tr><tr><td><strong>공정성 큐잉 (Fair Queueing)</strong></td><td>선택</td><td>작업별 자원 할당 비율을 일정하게 조절</td><td>Weighted Fair Queuing 등 적용</td><td>자원 독점 방지</td></tr><tr><td><strong>자원 예약 시스템</strong></td><td>선택</td><td>작업 실행 전 필요한 최소 자원을 선예약</td><td>리소스 보장, QoS 유지</td><td>Starvation 예방 기능 (간접)</td></tr><tr><td><strong>모니터링 시스템</strong></td><td>선택</td><td>스케줄링 로그, 자원 점유율, 응답 시간 등을 실시간 분석</td><td>이상 감지, 리포트 생성, 정책 알림</td><td>Starvation 조기 감지</td></tr><tr><td><strong>정책 관리자</strong></td><td>선택</td><td>동적으로 스케줄링 및 락 정책을 조정</td><td>시스템 부하/상황에 따라 우선순위 정책 변경</td><td>구조적 편중 완화</td></tr><tr><td><strong>자원 누수 탐지기</strong></td><td>선택</td><td>자원 미반환 상태 실시간 탐지</td><td>락 미해제, 파일 핸들 누수 등 감지</td><td>자원 점유 장기화 차단</td></tr><tr><td><strong>우선순위 추론기</strong></td><td>선택</td><td>대기 시간, 실행 이력, 작업 중요도를 기반으로 우선순위 재계산</td><td>자동 우선순위 조정</td><td>공정성 강화</td></tr></tbody></table><h4 id=주요-기능과-역할>주요 기능과 역할<a hidden class=anchor aria-hidden=true href=#주요-기능과-역할>#</a></h4><table><thead><tr><th><strong>기능</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td>자원 할당 정책</td><td>프로세스/스레드에 자원을 공정하게 배분 (예: Fair Scheduling)</td></tr><tr><td>우선순위 관리 및 에이징</td><td>대기 시간이 길어질수록 우선순위를 점진적으로 증가시켜 실행 기회 보장</td></tr><tr><td>락 동기화 제어</td><td>락/세마포어 등 동기화 메커니즘에서 락 점유 순서를 공정하게 관리 (예: Fair Lock)</td></tr><tr><td>자원 대기 시간 모니터링</td><td>각 프로세스의 대기 시간 추적 및 Starvation 의심 시점 탐지</td></tr><tr><td>자원 예약 및 타임아웃</td><td>일정 자원을 미리 확보하거나, 대기 시간을 초과하면 재시도/우선순위 조정 등으로 기회를 보장</td></tr><tr><td>정책 실행 및 조정</td><td>위의 감시 데이터를 기반으로 우선순위 재조정, 자원 분배 방식 변경 등 실제 정책을 반영하고 집행함</td></tr></tbody></table><h5 id=기능과-역할-간-관계-정리>기능과 역할 간 관계 정리<a hidden class=anchor aria-hidden=true href=#기능과-역할-간-관계-정리>#</a></h5><table><thead><tr><th><strong>기능</strong></th><th><strong>담당 주체</strong></th><th><strong>연계 역할</strong></th></tr></thead><tbody><tr><td>자원 할당 정책</td><td>스케줄러</td><td>시스템 공정성 유지, 프로세스 간 자원 편향 방지</td></tr><tr><td>우선순위 관리 및 에이징</td><td>스케줄러</td><td>낮은 우선순위 프로세스의 실행 기회 보장</td></tr><tr><td>락 동기화 제어</td><td>락 관리자 (동기화 모듈)</td><td>자원 경합 시 특정 스레드 독점 방지</td></tr><tr><td>자원 대기 시간 모니터링</td><td>감시자 / 리소스 관리자</td><td>Starvation 발생 조건 사전 탐지 및 경고</td></tr><tr><td>자원 예약 및 타임아웃</td><td>리소스 풀, 프로세스 자체</td><td>자원 선점 방지 및 예측 가능한 실행 환경 보장</td></tr><tr><td>정책 실행 및 조정</td><td>운영 정책 관리자 (OS/앱)</td><td>감지된 문제에 대한 동적 정책 반영 (Aging, Priority Boost 등)</td></tr></tbody></table><p>Starvation 을 방지하거나 완화하기 위해 시스템은 자원 할당, 우선순위 관리, 락 동기화, 모니터링, 정책 실행 등 다양한 기능을 수행한다.<br>이 기능들은 스케줄러, 리소스 관리자, 락 제어기, 감시자 등 시스템 내 서로 다른 주체들이 맡아 수행하며, 각 기능은 " 공정성 유지 &ldquo;, " 대기 시간 보장 &ldquo;, " 자원 독점 방지 " 등의 역할을 달성하기 위해 존재한다.<br>기능은 시스템이 <strong>무엇을 하는가</strong>를 나타내며, 역할은 <strong>왜 그 기능이 필요한가</strong>에 대한 목적을 명확히 해준다.<br>이 둘의 연결을 이해하면 Starvation 문제를 구조적으로 파악하고 설계 수준에서 대응할 수 있다.</p><h3 id=특성-분석-characteristics-analysis>특성 분석 (Characteristics Analysis)<a hidden class=anchor aria-hidden=true href=#특성-분석-characteristics-analysis>#</a></h3><h4 id=예방-및-해결-방안>예방 및 해결 방안<a hidden class=anchor aria-hidden=true href=#예방-및-해결-방안>#</a></h4><table><thead><tr><th><strong>구분</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th><th><strong>기술적 근거</strong></th></tr></thead><tbody><tr><td>예방</td><td>Aging (에이징)</td><td>대기 시간이 길어질수록 우선순위를 점진적으로 상승시켜 실행 기회 보장</td><td>낮은 우선순위 작업이 무기한 대기하지 않도록 보장 (Liveness 향상)</td></tr><tr><td></td><td>Fair Scheduling</td><td>FCFS, Round Robin 등 비차별적 자원 배분 방식 적용</td><td>모든 프로세스에게 동등한 실행 기회를 보장하여 기아 현상 예방</td></tr><tr><td></td><td>Resource Reservation</td><td>특정 프로세스에 대해 자원을 사전 예약하여 실행 시점에 보장</td><td>실시간 시스템, 트랜잭션 환경에서 자원 확보 선제 전략으로 사용됨</td></tr><tr><td></td><td>Priority Inversion Avoidance</td><td>우선순위 역전 발생 시, 자원을 가진 낮은 우선순위 태스크에게 임시로 높은 우선순위 부여</td><td>리눅스 RT 커널, Java RTS 에서 우선순위 상속 기법으로 활용</td></tr><tr><td>해결</td><td>Timeout & Retry</td><td>자원 요청이 일정 시간 이상 대기하면 자동 포기 또는 재시도</td><td>무한 대기 방지, 시스템 부하를 줄이며 Deadlock 방지에도 기여</td></tr><tr><td></td><td>Preemption (선점 회수)</td><td>장시간 자원을 점유한 프로세스의 자원을 강제로 회수하여 다른 작업에 할당</td><td>처리 시간 분산 및 공정한 자원 사용 유도 (OS 타임슬라이스 기반 스케줄러)</td></tr><tr><td></td><td>동적 우선순위 조정</td><td>시스템 부하나 대기 상황에 따라 프로세스의 우선순위를 실시간으로 변경</td><td>우선순위 기반 시스템에서 부하 적응적 자원 분배 구현에 효과적</td></tr><tr><td></td><td>모니터링 및 알림 시스템</td><td>Starvation 의심 조건 (대기 시간, 자원 사용률 등) 을 탐지하고 관리자에게 경고</td><td>Prometheus, Grafana, OpenTelemetry 기반 운영 감시 시스템에서 사용</td></tr><tr><td>예방/해결</td><td>Multilevel Queue + Aging</td><td>우선순위에 따라 큐를 나누고 Aging 을 적용하여 하위 큐도 점진적으로 상위로 이동</td><td>우선순위 기반 시스템에서 하위 태스크에게도 실행 기회를 보장</td></tr><tr><td></td><td>Rate Limiting & Resource Quota</td><td>태스크/유저 단위의 자원 요청 빈도 제한 또는 사용량 할당</td><td>Kubernetes ResourceQuota, Linux cgroups 등 시스템 자원 보호 메커니즘에 적용</td></tr></tbody></table><p>Starvation 을 효과적으로 방지하고 해결하기 위해 시스템은 **자원 분배의 공정성 (Fairness)**과 **대기 시간에 따른 실행 보장 (Liveness)**을 균형 있게 유지해야 한다.</p><ul><li>예방 측면에서는 <strong>Aging, 공정한 스케줄링, 우선순위 역전 방지, 자원 예약</strong> 등이 대표적이며, 이는 기아 상태 자체가 발생하지 않도록 설계하는 전략이다.</li><li>해결 측면에서는 <strong>Timeout, 선점 회수, 동적 우선순위 조정, 모니터링 시스템</strong> 등을 통해 이미 발생한 기아 상태를 조기 탐지하고 회복할 수 있다.</li><li>실무 시스템에서는 <strong>멀티레벨 큐 + Aging</strong>이나 <strong>자원 사용량 제한</strong> 같은 하이브리드 기법이 병용되어, <strong>성능·공정성·응답성</strong>을 동시에 달성하고 있다.</li></ul><h4 id=발생-시-영향-및-피해>발생 시 영향 및 피해<a hidden class=anchor aria-hidden=true href=#발생-시-영향-및-피해>#</a></h4><p>Starvation 이 발생하면 단순히 하나의 태스크가 대기하는 데 그치지 않고, 시스템 전체 성능, 자원 활용도, 공정성, 신뢰성에 걸쳐 광범위한 피해를 유발한다. 응답 시간 증가, 자원 낭비, 데이터 일관성 붕괴, 서비스 품질 저하, 심지어 보안 위협까지도 초래할 수 있다.</p><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지/진단 도구</th><th>예방 방법</th><th>해결 기법</th></tr></thead><tbody><tr><td>성능 문제</td><td>응답 지연</td><td>저우선순위 태스크 반복 배제</td><td>SLA 미달, 사용자 대기 증가</td><td>대기 시간 모니터링, 로그 분석</td><td>Aging, 우선순위 조정</td><td>동적 스케줄링, 타임아웃 적용</td></tr><tr><td>자원 문제</td><td>자원 독점</td><td>특정 작업이 자원 반복 선점</td><td>자원 집중 → 병목, 다른 작업 대기</td><td>자원 점유율 분석, 큐 상태 추적</td><td>공정 락, 자원 쿼터 설정</td><td>Fair Lock, 자원 제한 정책</td></tr><tr><td>공정성 문제</td><td>시스템 불균형</td><td>불공정 스케줄링, 고정 우선순위 정책</td><td>일부 작업이 계속 밀림, 전체 시스템 불균형</td><td>히스토리 기반 분석, 우선순위 패턴 로그</td><td>FCFS, Weighted Scheduling</td><td>우선순위 보정, Aging 적용</td></tr><tr><td>처리량 문제</td><td>전체 처리량 감소</td><td>일부 태스크의 무한 대기</td><td>시스템 전체 효율 하락, Throughput 저하</td><td>시스템 TPS 측정, 병렬 큐 대기량 확인</td><td>자원 분산, 공정 스케줄링</td><td>Load Balancer, Task Shuffling</td></tr><tr><td>데이터 문제</td><td>데이터 무결성 위협 (DB)</td><td>트랜잭션 락 획득 실패 지속</td><td>DB 일관성 손실, 트랜잭션 실패</td><td>락 대기 모니터링, 트랜잭션 로그</td><td>트랜잭션 타임아웃, Deadlock 감지기</td><td>롤백, 재시도 전략</td></tr><tr><td>예측 문제</td><td>QoS 예측 불가</td><td>완료 시간의 불확실성</td><td>QoS 위반, 실시간 시스템 불안정화</td><td>응답 시간 패턴 분석, SLA 모니터링</td><td>Deadline 기반 스케줄러</td><td>Hard Timeout, Reordering</td></tr><tr><td>에너지 문제</td><td>리소스 대기 상태 유지</td><td>유휴 태스크의 메모리/CPU 점유</td><td>불필요한 에너지 소비, 서버 리소스 낭비</td><td>리소스 사용량 모니터링</td><td>Idle Task 회수, 자원 할당 제한</td><td>태스크 종료, 비활성화</td></tr><tr><td>보안 문제</td><td>서비스 거부 공격 유사 효과 발생</td><td>의도적인 자원 점유 유도</td><td>정당한 요청 처리 지연, 서비스 불능화</td><td>이벤트 패턴 이상 감지, 공격 탐지 시스템</td><td>자원 제한 정책, Anti-DoS 알고리즘</td><td>요청 속도 제한, 타임아웃, 격리 처리</td></tr></tbody></table><p>Starvation 은 단순한 " 작업 대기 " 현상을 넘어, 시스템 성능 저하, 서비스 품질 악화, 공정성 침해, 데이터 무결성 붕괴, 에너지 낭비, 그리고 보안 위협까지 야기할 수 있는 복합적인 위험 요소다. 이를 탐지하기 위해서는 정교한 모니터링 및 진단 도구가 필요하며, 사전 예방과 사후 복구를 위한 정책 기반의 스케줄링 전략, 자원 관리 기법, 타임아웃, 보안 설계 등이 병행되어야 한다.</p><h4 id=트레이드오프-관계-분석>트레이드오프 관계 분석<a hidden class=anchor aria-hidden=true href=#트레이드오프-관계-분석>#</a></h4><p>Starvation 방지를 위한 시스템 설계에서 공정성, 효율성, 예측 가능성, 성능 오버헤드, 자원 활용률 간에는 피할 수 없는 상충 관계가 존재한다. 각 정책과 메커니즘은 하나의 가치를 지키기 위해 다른 가치를 희생시킬 수 있으며, 실무 설계자는 시스템 목적과 SLA 를 기준으로 적절한 균형점을 찾아야 한다.</p><table><thead><tr><th>항목</th><th>상반 요소 A</th><th>상반 요소 B</th><th>트레이드오프 설명</th><th>실무 고려사항</th></tr></thead><tbody><tr><td>스케줄링 공정성</td><td>우선순위 스케줄링</td><td>FCFS / Round-Robin</td><td>성능 최적화 ↔ 기아 발생 가능성</td><td>실시간 시스템은 우선순위, 일반 시스템은 공정성 중시</td></tr><tr><td>Aging 적용</td><td>Aging 적용 (기아 방지)</td><td>Aging 미적용 (정적 우선순위 유지)</td><td>예측성 감소 ↔ 우선순위 기반 정책의 단순성과 안정성</td><td>Aging 최대 한계값 설정 필요</td></tr><tr><td>락 구조</td><td>공정 락 (Fair Lock)</td><td>비공정 락 (성능 위주)</td><td>Starvation 방지 ↔ 컨텍스트 스위칭 증가로 인한 성능 저하</td><td>동시성 수준과 작업 중요도에 따라 락 방식 선택 필요</td></tr><tr><td>자원 예약</td><td>자원 선예약 (QoS 보장)</td><td>동적 할당 (최대 자원 활용)</td><td>안정성 보장 ↔ 리소스 유휴 상태 증가 → 전체 활용률 저하</td><td>리소스 예측 정확도 중요</td></tr><tr><td>우선순위 조정 정책</td><td>동적 우선순위 (Aging 등)</td><td>정적 우선순위 유지</td><td>공정성 향상 ↔ 우선순위 정책 왜곡, 실시간 예측성 저하</td><td>태스크 특성에 따른 동적 조정 여부 판단 필요</td></tr><tr><td>공정성 보장 알고리즘 사용</td><td>Weighted Fair Queue 등 공정성 강화 기법</td><td>단순 큐 구조 (성능 중심)</td><td>공정성 보장 ↔ 처리 복잡도 및 스케줄러 부하 증가</td><td>부하 기반 공정성 적용 범위 제한 필요</td></tr><tr><td>작업 응답 시간</td><td>짧은 작업 우선 처리 (응답 시간 최소화)</td><td>긴 작업 연속 실행 (처리량 최적화)</td><td>응답 속도 향상 ↔ 긴 작업 starvation 가능성</td><td>짧은 작업에 time-slicing 적용</td></tr></tbody></table><p>Starvation 을 방지하기 위한 설계는 단순히 한 가지 정책으로 해결되는 것이 아니라, <strong>공정성 보장</strong>과 <strong>성능 최적화</strong> 사이의 균형을 어떻게 설계하느냐에 달려 있다.</p><ul><li>우선순위 기반 처리, Aging, 공정 락, 자원 예약 등 각각의 전략은 특정 문제를 해결하면서 동시에 다른 리스크를 초래할 수 있다. 예컨대, Aging 은 기아를 줄이는 반면 예측 가능성을 떨어뜨릴 수 있고, 공정 락은 자원 분배를 고르게 하지만 시스템 처리량을 저해할 수 있다.</li><li>따라서 <strong>시스템 특성, 작업 특성, QoS 요구사항에 따라 설계자의 전략적 판단이 필요하다.</strong></li></ul><h3 id=구현-및-분류-implementation--classification>구현 및 분류 (Implementation & Classification)<a hidden class=anchor aria-hidden=true href=#구현-및-분류-implementation--classification>#</a></h3><h4 id=탐지-및-진단-기법>탐지 및 진단 기법<a hidden class=anchor aria-hidden=true href=#탐지-및-진단-기법>#</a></h4><table><thead><tr><th>분류</th><th>정의</th><th>구성 요소</th><th>원리</th><th>목적</th><th>사용 상황</th><th>특징</th></tr></thead><tbody><tr><td>대기 시간 기반 진단</td><td>각 태스크의 대기 시간 및 횟수를 기반으로 starvation 가능성 평가</td><td>대기 시간 로그, 스레드 ID, 타이머</td><td>대기 시간 > 임계값 시 알람 발생</td><td>조기 탐지 및 우선순위 조정</td><td>서버 큐, ThreadPool, 커널 스케줄링 등</td><td>구현 간단, 민감도 조정 가능</td></tr><tr><td>자원 활용 분석</td><td>자원 할당률과 점유 시간의 불균형을 확인해 특정 태스크의 기아 가능성 분석</td><td>CPU/메모리 사용률, 컨테이너 자원 메트릭</td><td>자원 할당률이 0% 근처로 장시간 지속될 경우 경고 발생</td><td>비정상 자원 배분 탐지</td><td>K8s, JVM, DB 커넥션 풀 등</td><td>노이즈 있음, long-term 패턴 필요 분석</td></tr><tr><td>스케줄러 및 락 추적 분석</td><td>락 획득 실패, 선점 횟수, 우선순위 변화 등 시스템 로그 추적으로 starvation 판단</td><td>스케줄링 로그, 락 충돌 로그, 선점 카운터</td><td>특정 작업만 반복 선점되거나 락 독점 시 이상 판단</td><td>락 병목 지점, 비공정 분배 경로 탐지</td><td>커널 tracing, 실시간 시스템</td><td>설정 복잡도 있음, 고급 시스템 진단에 적합</td></tr><tr><td>공정성 지표 기반 평가</td><td>Jain&rsquo;s Fairness Index 등을 활용하여 리소스 분배의 평등성 분석</td><td>처리량 로그, 공정성 계산 엔진</td><td>공정성 지수 계산: (∑x)^2 / (n∑x^2) 공식 적용</td><td>시스템 전체 수준 공정성 진단</td><td>시스템 성능 최적화, 정책 적용 전후 평가</td><td>수학적 모델 기반, 정량화 가능</td></tr><tr><td>예측 기반 진단</td><td>비정상적인 리소스 트렌드 및 대기 행태를 예측하여 사전 대응</td><td>ML 예측 엔진, 큐 길이 트렌드, 우선순위 변화 패턴</td><td>이상 탐지 모델 학습 후 특정 큐/락 패턴 발생 시 경보</td><td>선제적 대응, SLA 보장</td><td>대규모 마이크로서비스, 고빈도 요청 시스템</td><td>정확도 높지만 모델 구축 필요, 고비용</td></tr></tbody></table><h5 id=대기-시간-기반-starvation-탐지기>대기 시간 기반 Starvation 탐지기<a hidden class=anchor aria-hidden=true href=#대기-시간-기반-starvation-탐지기>#</a></h5><p>Starvation 탐지 구조를 Prometheus + Grafana + Slack 알림까지 <strong>실서비스 환경 수준으로 확장하는 아키텍처 및 구현 구조</strong>를 구현</p><p><strong>확장 목표</strong>:</p><table><thead><tr><th>항목</th><th>목적</th></tr></thead><tbody><tr><td>Prometheus Exporter</td><td>Starvation 탐지 데이터를 Prometheus 로 수집</td></tr><tr><td>Grafana Alert Rule</td><td>일정 시간 이상 대기한 스레드를 시각화 및 임계치 경보 설정</td></tr><tr><td>Slack Webhook 연동</td><td>Starvation 발생 시 실시간 Slack 알림 전송</td></tr></tbody></table><p><strong>전체 아키텍처</strong>:</p><pre class=mermaid>flowchart TD
    A[Python Starvation Monitor] --&gt; B[Prometheus Exporter Endpoint]
    B --&gt; C[Prometheus Server]
    C --&gt; D[Grafana Dashboard]
    C --&gt; E[Alert Rule Engine]
    E --&gt; F[Slack Webhook]
    F --&gt; G[Slack 채널 알림 전송]
</pre><p><strong>구성 요소별 확장 방식</strong>:</p><ol><li><p>Prometheus Exporter 통합 (Python)</p><ul><li><code>http://localhost:8000/metrics</code> 에서 <code>starving_thread_count</code> 지표 확인 가능</li><li><code>threshold</code> 기준 이상으로 대기한 스레드를 탐지</li><li><code>start_waiting</code> 과 <code>stop_waiting</code> 으로 상태 추적</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span><span class=lnt id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a>
</span><span class=lnt id=hl-4-16><a class=lnlinks href=#hl-4-16>16</a>
</span><span class=lnt id=hl-4-17><a class=lnlinks href=#hl-4-17>17</a>
</span><span class=lnt id=hl-4-18><a class=lnlinks href=#hl-4-18>18</a>
</span><span class=lnt id=hl-4-19><a class=lnlinks href=#hl-4-19>19</a>
</span><span class=lnt id=hl-4-20><a class=lnlinks href=#hl-4-20>20</a>
</span><span class=lnt id=hl-4-21><a class=lnlinks href=#hl-4-21>21</a>
</span><span class=lnt id=hl-4-22><a class=lnlinks href=#hl-4-22>22</a>
</span><span class=lnt id=hl-4-23><a class=lnlinks href=#hl-4-23>23</a>
</span><span class=lnt id=hl-4-24><a class=lnlinks href=#hl-4-24>24</a>
</span><span class=lnt id=hl-4-25><a class=lnlinks href=#hl-4-25>25</a>
</span><span class=lnt id=hl-4-26><a class=lnlinks href=#hl-4-26>26</a>
</span><span class=lnt id=hl-4-27><a class=lnlinks href=#hl-4-27>27</a>
</span><span class=lnt id=hl-4-28><a class=lnlinks href=#hl-4-28>28</a>
</span><span class=lnt id=hl-4-29><a class=lnlinks href=#hl-4-29>29</a>
</span><span class=lnt id=hl-4-30><a class=lnlinks href=#hl-4-30>30</a>
</span><span class=lnt id=hl-4-31><a class=lnlinks href=#hl-4-31>31</a>
</span><span class=lnt id=hl-4-32><a class=lnlinks href=#hl-4-32>32</a>
</span><span class=lnt id=hl-4-33><a class=lnlinks href=#hl-4-33>33</a>
</span><span class=lnt id=hl-4-34><a class=lnlinks href=#hl-4-34>34</a>
</span><span class=lnt id=hl-4-35><a class=lnlinks href=#hl-4-35>35</a>
</span><span class=lnt id=hl-4-36><a class=lnlinks href=#hl-4-36>36</a>
</span><span class=lnt id=hl-4-37><a class=lnlinks href=#hl-4-37>37</a>
</span><span class=lnt id=hl-4-38><a class=lnlinks href=#hl-4-38>38</a>
</span><span class=lnt id=hl-4-39><a class=lnlinks href=#hl-4-39>39</a>
</span><span class=lnt id=hl-4-40><a class=lnlinks href=#hl-4-40>40</a>
</span><span class=lnt id=hl-4-41><a class=lnlinks href=#hl-4-41>41</a>
</span><span class=lnt id=hl-4-42><a class=lnlinks href=#hl-4-42>42</a>
</span><span class=lnt id=hl-4-43><a class=lnlinks href=#hl-4-43>43</a>
</span><span class=lnt id=hl-4-44><a class=lnlinks href=#hl-4-44>44</a>
</span><span class=lnt id=hl-4-45><a class=lnlinks href=#hl-4-45>45</a>
</span><span class=lnt id=hl-4-46><a class=lnlinks href=#hl-4-46>46</a>
</span><span class=lnt id=hl-4-47><a class=lnlinks href=#hl-4-47>47</a>
</span><span class=lnt id=hl-4-48><a class=lnlinks href=#hl-4-48>48</a>
</span><span class=lnt id=hl-4-49><a class=lnlinks href=#hl-4-49>49</a>
</span><span class=lnt id=hl-4-50><a class=lnlinks href=#hl-4-50>50</a>
</span><span class=lnt id=hl-4-51><a class=lnlinks href=#hl-4-51>51</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>prometheus_client</span> <span class=kn>import</span> <span class=n>start_http_server</span><span class=p>,</span> <span class=n>Gauge</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>defaultdict</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 지표 정의: starving_thread_count</span>
</span></span><span class=line><span class=cl><span class=n>starving_thread_gauge</span> <span class=o>=</span> <span class=n>Gauge</span><span class=p>(</span><span class=s1>&#39;starving_thread_count&#39;</span><span class=p>,</span> <span class=s1>&#39;Number of starving threads&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>StarvationMonitorExporter</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>threshold_sec</span><span class=o>=</span><span class=mi>10</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>wait_start</span> <span class=o>=</span> <span class=n>defaultdict</span><span class=p>(</span><span class=nb>float</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>threshold</span> <span class=o>=</span> <span class=n>threshold_sec</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>start_waiting</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>tid</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>wait_start</span><span class=p>[</span><span class=n>tid</span><span class=p>]</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>stop_waiting</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>tid</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>tid</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>wait_start</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>del</span> <span class=bp>self</span><span class=o>.</span><span class=n>wait_start</span><span class=p>[</span><span class=n>tid</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>check_starvation</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>now</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>starving</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>tid</span><span class=p>,</span> <span class=n>start</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>wait_start</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>now</span> <span class=o>-</span> <span class=n>start</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>threshold</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>starving</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>tid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>starving_thread_gauge</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>starving</span><span class=p>))</span>  <span class=c1># Prometheus 지표 설정</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>starving</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>exporter_runner</span><span class=p>(</span><span class=n>monitor</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>monitor</span><span class=o>.</span><span class=n>check_starvation</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>  <span class=c1># 5초마다 지표 갱신</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 실행</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>monitor</span> <span class=o>=</span> <span class=n>StarvationMonitorExporter</span><span class=p>(</span><span class=n>threshold_sec</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>start_http_server</span><span class=p>(</span><span class=mi>8000</span><span class=p>)</span>  <span class=c1># Prometheus가 수집할 HTTP endpoint</span>
</span></span><span class=line><span class=cl>    <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>exporter_runner</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>monitor</span><span class=p>,),</span> <span class=n>daemon</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># 예시: 테스트용 쓰레드</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_thread</span><span class=p>(</span><span class=n>tid</span><span class=p>,</span> <span class=n>delay</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>monitor</span><span class=o>.</span><span class=n>start_waiting</span><span class=p>(</span><span class=n>tid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>delay</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>monitor</span><span class=o>.</span><span class=n>stop_waiting</span><span class=p>(</span><span class=n>tid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>test_thread</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=s2>&#34;T1&#34;</span><span class=p>,</span> <span class=mi>15</span><span class=p>))</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>Grafana Alert Rule 구성</p><ul><li>예시 YAML (Grafana Alert rule as code)</li><li>Grafana UI 에서도 <code>Alert → New Alert Rule</code> 로 설정 가능</li><li>조건: <code>starving_thread_count > 0</code> 이 1 분 이상 지속될 경우</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span><span class=lnt id=hl-5-18><a class=lnlinks href=#hl-5-18>18</a>
</span><span class=lnt id=hl-5-19><a class=lnlinks href=#hl-5-19>19</a>
</span><span class=lnt id=hl-5-20><a class=lnlinks href=#hl-5-20>20</a>
</span><span class=lnt id=hl-5-21><a class=lnlinks href=#hl-5-21>21</a>
</span><span class=lnt id=hl-5-22><a class=lnlinks href=#hl-5-22>22</a>
</span><span class=lnt id=hl-5-23><a class=lnlinks href=#hl-5-23>23</a>
</span><span class=lnt id=hl-5-24><a class=lnlinks href=#hl-5-24>24</a>
</span><span class=lnt id=hl-5-25><a class=lnlinks href=#hl-5-25>25</a>
</span><span class=lnt id=hl-5-26><a class=lnlinks href=#hl-5-26>26</a>
</span><span class=lnt id=hl-5-27><a class=lnlinks href=#hl-5-27>27</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>groups</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>starvation-alerts</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uid</span><span class=p>:</span><span class=w> </span><span class=l>starving-threads</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>title</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Starvation 감지 알림&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;B&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>refId</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;A&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>queryType</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;instant&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>relativeTimeRange</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>from</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=m>300</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>datasourceUid</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;prometheus&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>model</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>expr</span><span class=p>:</span><span class=w> </span><span class=l>starving_thread_count</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>legendFormat</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>refId</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;A&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>refId</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;B&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;A &gt; 0&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>summary</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Starvation 발생&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;1개 이상의 스레드가 임계 대기 시간을 초과했습니다.&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>for</span><span class=p>:</span><span class=w> </span><span class=l>1m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class=l>critical</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li><li><p>Slack 알림 연동</p><ol><li>Slack Webhook 설정<ul><li>Slack → App → Incoming Webhook 생성</li><li>Webhook URL 복사 (예: <code>https://hooks.slack.com/services/TXXXX/BXXXX/XXXX</code>)</li></ul></li><li>Grafana 알림 채널 설정 (UI)<ul><li><p><strong>Alerting > Contact points > Add contact point</strong></p></li><li><p>이름: <code>Slack-Starvation</code></p></li><li><p>Type: <code>Slack</code></p></li><li><p>Webhook URL 입력</p></li><li><p>메시지 템플릿:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2>2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>🚨 Starvation Alert 🚨  
</span></span><span class=line><span class=cl>{{ .CommonLabels.severity }} - {{ .CommonAnnotations.summary }}  
</span></span><span class=line><span class=cl>{{ .CommonAnnotations.description }}
</span></span></code></pre></td></tr></table></div></div></li></ul></li></ol></li></ol><h5 id=에이징-기법-aging-technique>에이징 기법 (Aging Technique)<a hidden class=anchor aria-hidden=true href=#에이징-기법-aging-technique>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>AgingScheduler</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>aging_factor</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>aging_interval</span><span class=o>=</span><span class=mi>10</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>aging_factor</span> <span class=o>=</span> <span class=n>aging_factor</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>aging_interval</span> <span class=o>=</span> <span class=n>aging_interval</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>processes</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>age_processes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;대기 중인 프로세스들의 우선순위를 증가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>process</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>processes</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>process</span><span class=o>.</span><span class=n>waiting_time</span> <span class=o>&gt;=</span> <span class=bp>self</span><span class=o>.</span><span class=n>aging_interval</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>process</span><span class=o>.</span><span class=n>priority</span> <span class=o>+=</span> <span class=bp>self</span><span class=o>.</span><span class=n>aging_factor</span>
</span></span><span class=line><span class=cl>                <span class=n>process</span><span class=o>.</span><span class=n>waiting_time</span> <span class=o>=</span> <span class=mi>0</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=분류-기준에-따른-유형-구분>분류 기준에 따른 유형 구분<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-유형-구분>#</a></h4><table><thead><tr><th><strong>분류 기준</strong></th><th><strong>유형</strong></th><th><strong>특징 및 설명</strong></th><th><strong>대표 발생 환경</strong></th><th><strong>대표 해결 방법</strong></th></tr></thead><tbody><tr><td>발생 원인 기준</td><td>우선순위 기반 Starvation</td><td>고우선 작업이 지속적으로 자원을 선점하여 저우선 작업이 무한히 대기</td><td>실시간 시스템, RTOS</td><td>에이징, 우선순위 천장, 우선순위 상속</td></tr><tr><td></td><td>자원 경합 Starvation</td><td>제한된 자원을 특정 스레드/프로세스가 독점하며 다른 작업이 접근 못함</td><td>멀티스레딩, 락 경합</td><td>Fair Lock, 타임아웃, 리트라이</td></tr><tr><td></td><td>네트워크 Starvation</td><td>특정 노드/세션이 네트워크 대역폭을 독점하여 다른 요청이 전송 불가</td><td>분산 시스템, 클러스터, 마이크로서비스</td><td>QoS 설정, 대역폭 제한, Rate Limiting</td></tr><tr><td></td><td>알고리즘 결함 Starvation</td><td>스케줄링 알고리즘 설계 오류로 특정 작업이 무한 대기됨</td><td>자체 구현 스케줄러, 임베디드 시스템</td><td>스케줄링 알고리즘 개선, 검증</td></tr><tr><td>시스템 환경 기준</td><td>OS 레벨 Starvation</td><td>커널의 스케줄러가 특정 프로세스를 지속적으로 제외함</td><td>리눅스, 윈도우 스케줄러</td><td>커널 파라미터 조정, 공정 스케줄링 정책 적용</td></tr><tr><td></td><td>애플리케이션 레벨 Starvation</td><td>애플리케이션 내부 스레드 간의 불공정 자원 경쟁</td><td>Java, Python 멀티스레딩</td><td>공정 락, Thread Join 관리</td></tr><tr><td></td><td>분산 시스템 Starvation</td><td>특정 노드/인스턴스가 지속적으로 작업에서 제외됨</td><td>Kubernetes, Cloud Scheduler</td><td>Taint/Toleration, 로드 밸런싱</td></tr><tr><td></td><td>Thread-pool Starvation</td><td>모든 워커가 블로킹 상태여서 신규 요청 처리 불가</td><td>웹 서버, 백엔드 API 서버</td><td>비동기 처리, 워커 확장, 작업 큐 분리</td></tr><tr><td>지속 시간 기준</td><td>일시적 Starvation</td><td>순간적 자원 부족으로 짧은 시간 동안 대기</td><td>고부하 상황, 스파이크 트래픽</td><td>자동 복구 정책, 스로틀링 정책</td></tr><tr><td></td><td>지속적/영구적 Starvation</td><td>설계 결함 또는 정책 오류로 해결되지 않고 장시간 지속</td><td>잘못 설계된 스케줄러, 제한 자원 시스템</td><td>정책 변경, 우선순위 조정, Aging 적용</td></tr><tr><td>영향 범위 기준</td><td>프로세스/스레드 수준 Starvation</td><td>특정 태스크 단위의 실행 지연</td><td>CPU 스케줄링, 락 경쟁</td><td>우선순위 조정, 에이징</td></tr><tr><td></td><td>그룹 수준 Starvation</td><td>사용자 그룹 또는 노드 그룹 전체가 자원에서 배제됨</td><td>멀티 테넌시 클러스터</td><td>그룹 단위 리소스 보장, 분산 자원 할당 정책 적용</td></tr><tr><td>자원 유형 기준</td><td>Queue 기반 Starvation</td><td>특정 요청이 큐 tail 로만 밀려서 계속 처리되지 않음</td><td>FIFO 큐, 메시지 브로커 시스템</td><td>큐 재정렬 정책, 샤딩 큐 도입</td></tr></tbody></table><p>Starvation 은 시스템의 <strong>우선순위 구조, 자원 경쟁, 설계 오류, 또는 환경적 요인</strong>에 의해 다양한 형태로 발생한다.</p><ul><li>분류 기준에 따라<ul><li>우선순위 기반, 락 기반, 네트워크 기반, 스케줄링 오류 기반 등 <strong>원인 중심 분류</strong></li><li>OS/앱/분산 시스템/스레드 풀 등 <strong>시스템 환경 기준</strong></li><li>일시적/영구적/그룹적 영향 등 <strong>지속 시간 및 영향 범위 기준</strong>으로 세분화할 수 있다.</li></ul></li></ul><p>이러한 유형 구분은 Starvation 을 <strong>정확히 진단하고 유형에 맞는 대응책을 설계하기 위한 전제 조건</strong>이며, 각 유형별로 <strong>공정성 확보, 우선순위 보정, 자원 할당 개선, 스케줄링 정책 교체</strong>와 같은 맞춤형 대응 전략이 필요하다.</p><h3 id=실무-적용-practical-application>실무 적용 (Practical Application)<a hidden class=anchor aria-hidden=true href=#실무-적용-practical-application>#</a></h3><h4 id=실제-도입-사례>실제 도입 사례<a hidden class=anchor aria-hidden=true href=#실제-도입-사례>#</a></h4><table><thead><tr><th><strong>분야/환경</strong></th><th><strong>사례/기술</strong></th><th><strong>적용 방식</strong></th><th><strong>Starvation 대응 방식</strong></th><th><strong>효과</strong></th></tr></thead><tbody><tr><td>운영체제</td><td><strong>Linux CFS 스케줄러</strong></td><td>vruntime 기반 공정 분배</td><td>우선순위 편중 방지, Aging 내장</td><td>낮은 우선순위 프로세스도 CPU 시간 확보</td></tr><tr><td>Java 애플리케이션</td><td><strong>ReentrantLock(true)</strong></td><td>FIFO 락 대기 큐, 공정성 보장</td><td>락 Starvation 방지</td><td>스레드 간 락 점유 기회 공정 분배</td></tr><tr><td>DBMS</td><td><strong>PostgreSQL Lock Manager</strong></td><td>트랜잭션 대기 큐, Deadlock 감지기</td><td>대기 순서 보장, Lock Timeout 설정</td><td>짧은 쿼리 기아 방지, 트랜잭션 공정성 유지</td></tr><tr><td>클러스터/분산 시스템</td><td><strong>Kubernetes ResourceQuota + PriorityClass</strong></td><td>네임스페이스/Pod 우선순위 기반 리소스 스케줄링</td><td>리소스 독점 방지, 낮은 우선순위 Pod 의 스케줄링 보장</td><td>다중 테넌트 환경에서의 공정한 자원 사용</td></tr><tr><td>웹 서버</td><td><strong>ThreadPool + 비동기 처리 개선</strong></td><td>blocking I/O 작업을 분리된 워커에 위임, 워커 풀 확장</td><td>모든 요청이 워커를 점유하지 않도록 설계</td><td>백엔드의 요청 Starvation 방지, 응답 시간 향상</td></tr><tr><td>클라우드 서비스</td><td><strong>AWS Auto Scaling + Load Balancing</strong></td><td>동적 인스턴스 확장, 균형 잡힌 요청 분산</td><td>특정 인스턴스에만 로드 집중되는 현상 완화</td><td>인스턴스 기아 방지, 서비스 안정성 향상</td></tr><tr><td>실시간 시스템</td><td><strong>FreeRTOS 우선순위 상속</strong></td><td>임계 구역 내 락 보유 시 낮은 우선순위 태스크가 높은 우선순위를 임시 상속</td><td>우선순위 역전에 의한 기아 방지</td><td>실시간성 보장, 데드라인 위반 방지</td></tr><tr><td>이벤트/메시지 큐</td><td><strong>RabbitMQ / Kafka 큐 재정렬</strong></td><td>오래된 메시지 우선 처리, 큐 파티셔닝</td><td>큐 tail 에 밀린 작업이 영원히 대기하지 않도록 설계</td><td>메시지 처리 지연 해소, 대기 균형 유지</td></tr><tr><td>GPU 스케줄링</td><td><strong>CUDA Task Fairness Scheduler</strong></td><td>동일 GPU 내에서 태스크 우선순위 기반 자원 분배</td><td>Low-priority job 무한 대기 방지</td><td>학습/추론 병렬성 확보, GPU 사용 효율 증대</td></tr></tbody></table><p>실제 시스템들은 Starvation 을 단순한 성능 문제로 넘기지 않고, **공정성 (Fairness)**과 **활성성 (Liveness)**을 보장하기 위한 설계 요소로 적극적으로 다루고 있다.</p><ul><li>운영체제 수준에서는 스케줄러가 이를 방지하는 핵심 기제로 작동하며, Java 나 DBMS 에서는 락 관리 전략과 타임아웃 조정이 중요한 역할을 한다.</li><li>클라우드 환경에서는 <strong>리소스 스케줄링과 우선순위 정책이 연계되어</strong>, 다중 사용자 환경에서 특정 워크로드의 무한 대기를 막는다.</li><li>특히 <strong>분산 시스템 및 멀티스레딩 환경에서는 자원 경합이 복잡하게 발생</strong>하므로, 큐 구조의 정렬, 워커 풀 설계, 우선순위 조정, 자원 예약 등이 반드시 고려되어야 한다.</li></ul><p>이처럼 Starvation 은 모든 계층에서 일어날 수 있는 시스템적 현상이므로, <strong>정책적·구조적·운영적</strong> 대응이 통합적으로 이루어져야 한다.</p><h4 id=실습-예제-및-코드-구현>실습 예제 및 코드 구현<a hidden class=anchor aria-hidden=true href=#실습-예제-및-코드-구현>#</a></h4><h5 id=실습-예제-웹-서버에서-높은-우선순위-요청>실습 예제: 웹 서버에서 높은 우선순위 요청<a hidden class=anchor aria-hidden=true href=#실습-예제-웹-서버에서-높은-우선순위-요청>#</a></h5><p><strong>시나리오</strong>: 웹 서버에서 높은 우선순위 요청으로 인한 일반 요청 처리 지연</p><p><strong>시스템 구성</strong>:</p><ul><li>요청 처리 스레드 풀</li><li>우선순위 기반 작업 큐</li><li>공정성 보장 메커니즘</li></ul><pre class=mermaid>graph TB
    subgraph &#34;Client Requests&#34;
        HR[High Priority Requests]
        NR[Normal Priority Requests]
    end
    
    subgraph &#34;Web Server&#34;
        LB[Load Balancer]
        subgraph &#34;Request Processing&#34;
            PQ[Priority Queue with Aging]
            TP[Thread Pool]
            FM[Fairness Monitor]
        end
        subgraph &#34;Backend Services&#34;
            DB[(Database)]
            CACHE[(Cache)]
        end
    end
    
    HR --&gt; LB
    NR --&gt; LB
    LB --&gt; PQ
    PQ --&gt; TP
    TP --&gt; DB
    TP --&gt; CACHE
    FM --&gt; PQ
    
    style NR fill:#ffcccc
    style FM fill:#ccffcc
</pre><p><strong>Workflow</strong>:</p><ol><li>클라이언트 요청 수신 및 우선순위 분류</li><li>우선순위 큐에 요청 삽입</li><li>에이징 메커니즘으로 대기 시간 기반 우선순위 조정</li><li>스레드 풀에서 요청 처리</li><li>공정성 모니터로 기아 상태 감지 및 조정</li></ol><p><strong>핵심 역할</strong>:</p><ul><li><strong>에이징 메커니즘</strong>: 장기간 대기하는 일반 요청의 우선순위 점진적 상승</li><li><strong>공정성 모니터</strong>: 기아 상태 실시간 감지 및 알람</li><li><strong>적응적 스케줄링</strong>: 시스템 부하에 따른 동적 우선순위 조정</li></ul><p><strong>유무에 따른 차이점</strong>:</p><ul><li><strong>도입 전</strong>: 높은 우선순위 요청 집중 시 일반 요청 무한 대기</li><li><strong>도입 후</strong>: 모든 요청이 합리적 시간 내 처리, 응답 시간 예측 가능</li></ul><p><strong>구현 예시</strong> (Python):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1>  1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2>  2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3>  3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4>  4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5>  5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6>  6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7>  7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8>  8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9>  9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10> 10</a>
</span><span class=lnt id=hl-9-11><a class=lnlinks href=#hl-9-11> 11</a>
</span><span class=lnt id=hl-9-12><a class=lnlinks href=#hl-9-12> 12</a>
</span><span class=lnt id=hl-9-13><a class=lnlinks href=#hl-9-13> 13</a>
</span><span class=lnt id=hl-9-14><a class=lnlinks href=#hl-9-14> 14</a>
</span><span class=lnt id=hl-9-15><a class=lnlinks href=#hl-9-15> 15</a>
</span><span class=lnt id=hl-9-16><a class=lnlinks href=#hl-9-16> 16</a>
</span><span class=lnt id=hl-9-17><a class=lnlinks href=#hl-9-17> 17</a>
</span><span class=lnt id=hl-9-18><a class=lnlinks href=#hl-9-18> 18</a>
</span><span class=lnt id=hl-9-19><a class=lnlinks href=#hl-9-19> 19</a>
</span><span class=lnt id=hl-9-20><a class=lnlinks href=#hl-9-20> 20</a>
</span><span class=lnt id=hl-9-21><a class=lnlinks href=#hl-9-21> 21</a>
</span><span class=lnt id=hl-9-22><a class=lnlinks href=#hl-9-22> 22</a>
</span><span class=lnt id=hl-9-23><a class=lnlinks href=#hl-9-23> 23</a>
</span><span class=lnt id=hl-9-24><a class=lnlinks href=#hl-9-24> 24</a>
</span><span class=lnt id=hl-9-25><a class=lnlinks href=#hl-9-25> 25</a>
</span><span class=lnt id=hl-9-26><a class=lnlinks href=#hl-9-26> 26</a>
</span><span class=lnt id=hl-9-27><a class=lnlinks href=#hl-9-27> 27</a>
</span><span class=lnt id=hl-9-28><a class=lnlinks href=#hl-9-28> 28</a>
</span><span class=lnt id=hl-9-29><a class=lnlinks href=#hl-9-29> 29</a>
</span><span class=lnt id=hl-9-30><a class=lnlinks href=#hl-9-30> 30</a>
</span><span class=lnt id=hl-9-31><a class=lnlinks href=#hl-9-31> 31</a>
</span><span class=lnt id=hl-9-32><a class=lnlinks href=#hl-9-32> 32</a>
</span><span class=lnt id=hl-9-33><a class=lnlinks href=#hl-9-33> 33</a>
</span><span class=lnt id=hl-9-34><a class=lnlinks href=#hl-9-34> 34</a>
</span><span class=lnt id=hl-9-35><a class=lnlinks href=#hl-9-35> 35</a>
</span><span class=lnt id=hl-9-36><a class=lnlinks href=#hl-9-36> 36</a>
</span><span class=lnt id=hl-9-37><a class=lnlinks href=#hl-9-37> 37</a>
</span><span class=lnt id=hl-9-38><a class=lnlinks href=#hl-9-38> 38</a>
</span><span class=lnt id=hl-9-39><a class=lnlinks href=#hl-9-39> 39</a>
</span><span class=lnt id=hl-9-40><a class=lnlinks href=#hl-9-40> 40</a>
</span><span class=lnt id=hl-9-41><a class=lnlinks href=#hl-9-41> 41</a>
</span><span class=lnt id=hl-9-42><a class=lnlinks href=#hl-9-42> 42</a>
</span><span class=lnt id=hl-9-43><a class=lnlinks href=#hl-9-43> 43</a>
</span><span class=lnt id=hl-9-44><a class=lnlinks href=#hl-9-44> 44</a>
</span><span class=lnt id=hl-9-45><a class=lnlinks href=#hl-9-45> 45</a>
</span><span class=lnt id=hl-9-46><a class=lnlinks href=#hl-9-46> 46</a>
</span><span class=lnt id=hl-9-47><a class=lnlinks href=#hl-9-47> 47</a>
</span><span class=lnt id=hl-9-48><a class=lnlinks href=#hl-9-48> 48</a>
</span><span class=lnt id=hl-9-49><a class=lnlinks href=#hl-9-49> 49</a>
</span><span class=lnt id=hl-9-50><a class=lnlinks href=#hl-9-50> 50</a>
</span><span class=lnt id=hl-9-51><a class=lnlinks href=#hl-9-51> 51</a>
</span><span class=lnt id=hl-9-52><a class=lnlinks href=#hl-9-52> 52</a>
</span><span class=lnt id=hl-9-53><a class=lnlinks href=#hl-9-53> 53</a>
</span><span class=lnt id=hl-9-54><a class=lnlinks href=#hl-9-54> 54</a>
</span><span class=lnt id=hl-9-55><a class=lnlinks href=#hl-9-55> 55</a>
</span><span class=lnt id=hl-9-56><a class=lnlinks href=#hl-9-56> 56</a>
</span><span class=lnt id=hl-9-57><a class=lnlinks href=#hl-9-57> 57</a>
</span><span class=lnt id=hl-9-58><a class=lnlinks href=#hl-9-58> 58</a>
</span><span class=lnt id=hl-9-59><a class=lnlinks href=#hl-9-59> 59</a>
</span><span class=lnt id=hl-9-60><a class=lnlinks href=#hl-9-60> 60</a>
</span><span class=lnt id=hl-9-61><a class=lnlinks href=#hl-9-61> 61</a>
</span><span class=lnt id=hl-9-62><a class=lnlinks href=#hl-9-62> 62</a>
</span><span class=lnt id=hl-9-63><a class=lnlinks href=#hl-9-63> 63</a>
</span><span class=lnt id=hl-9-64><a class=lnlinks href=#hl-9-64> 64</a>
</span><span class=lnt id=hl-9-65><a class=lnlinks href=#hl-9-65> 65</a>
</span><span class=lnt id=hl-9-66><a class=lnlinks href=#hl-9-66> 66</a>
</span><span class=lnt id=hl-9-67><a class=lnlinks href=#hl-9-67> 67</a>
</span><span class=lnt id=hl-9-68><a class=lnlinks href=#hl-9-68> 68</a>
</span><span class=lnt id=hl-9-69><a class=lnlinks href=#hl-9-69> 69</a>
</span><span class=lnt id=hl-9-70><a class=lnlinks href=#hl-9-70> 70</a>
</span><span class=lnt id=hl-9-71><a class=lnlinks href=#hl-9-71> 71</a>
</span><span class=lnt id=hl-9-72><a class=lnlinks href=#hl-9-72> 72</a>
</span><span class=lnt id=hl-9-73><a class=lnlinks href=#hl-9-73> 73</a>
</span><span class=lnt id=hl-9-74><a class=lnlinks href=#hl-9-74> 74</a>
</span><span class=lnt id=hl-9-75><a class=lnlinks href=#hl-9-75> 75</a>
</span><span class=lnt id=hl-9-76><a class=lnlinks href=#hl-9-76> 76</a>
</span><span class=lnt id=hl-9-77><a class=lnlinks href=#hl-9-77> 77</a>
</span><span class=lnt id=hl-9-78><a class=lnlinks href=#hl-9-78> 78</a>
</span><span class=lnt id=hl-9-79><a class=lnlinks href=#hl-9-79> 79</a>
</span><span class=lnt id=hl-9-80><a class=lnlinks href=#hl-9-80> 80</a>
</span><span class=lnt id=hl-9-81><a class=lnlinks href=#hl-9-81> 81</a>
</span><span class=lnt id=hl-9-82><a class=lnlinks href=#hl-9-82> 82</a>
</span><span class=lnt id=hl-9-83><a class=lnlinks href=#hl-9-83> 83</a>
</span><span class=lnt id=hl-9-84><a class=lnlinks href=#hl-9-84> 84</a>
</span><span class=lnt id=hl-9-85><a class=lnlinks href=#hl-9-85> 85</a>
</span><span class=lnt id=hl-9-86><a class=lnlinks href=#hl-9-86> 86</a>
</span><span class=lnt id=hl-9-87><a class=lnlinks href=#hl-9-87> 87</a>
</span><span class=lnt id=hl-9-88><a class=lnlinks href=#hl-9-88> 88</a>
</span><span class=lnt id=hl-9-89><a class=lnlinks href=#hl-9-89> 89</a>
</span><span class=lnt id=hl-9-90><a class=lnlinks href=#hl-9-90> 90</a>
</span><span class=lnt id=hl-9-91><a class=lnlinks href=#hl-9-91> 91</a>
</span><span class=lnt id=hl-9-92><a class=lnlinks href=#hl-9-92> 92</a>
</span><span class=lnt id=hl-9-93><a class=lnlinks href=#hl-9-93> 93</a>
</span><span class=lnt id=hl-9-94><a class=lnlinks href=#hl-9-94> 94</a>
</span><span class=lnt id=hl-9-95><a class=lnlinks href=#hl-9-95> 95</a>
</span><span class=lnt id=hl-9-96><a class=lnlinks href=#hl-9-96> 96</a>
</span><span class=lnt id=hl-9-97><a class=lnlinks href=#hl-9-97> 97</a>
</span><span class=lnt id=hl-9-98><a class=lnlinks href=#hl-9-98> 98</a>
</span><span class=lnt id=hl-9-99><a class=lnlinks href=#hl-9-99> 99</a>
</span><span class=lnt id=hl-9-100><a class=lnlinks href=#hl-9-100>100</a>
</span><span class=lnt id=hl-9-101><a class=lnlinks href=#hl-9-101>101</a>
</span><span class=lnt id=hl-9-102><a class=lnlinks href=#hl-9-102>102</a>
</span><span class=lnt id=hl-9-103><a class=lnlinks href=#hl-9-103>103</a>
</span><span class=lnt id=hl-9-104><a class=lnlinks href=#hl-9-104>104</a>
</span><span class=lnt id=hl-9-105><a class=lnlinks href=#hl-9-105>105</a>
</span><span class=lnt id=hl-9-106><a class=lnlinks href=#hl-9-106>106</a>
</span><span class=lnt id=hl-9-107><a class=lnlinks href=#hl-9-107>107</a>
</span><span class=lnt id=hl-9-108><a class=lnlinks href=#hl-9-108>108</a>
</span><span class=lnt id=hl-9-109><a class=lnlinks href=#hl-9-109>109</a>
</span><span class=lnt id=hl-9-110><a class=lnlinks href=#hl-9-110>110</a>
</span><span class=lnt id=hl-9-111><a class=lnlinks href=#hl-9-111>111</a>
</span><span class=lnt id=hl-9-112><a class=lnlinks href=#hl-9-112>112</a>
</span><span class=lnt id=hl-9-113><a class=lnlinks href=#hl-9-113>113</a>
</span><span class=lnt id=hl-9-114><a class=lnlinks href=#hl-9-114>114</a>
</span><span class=lnt id=hl-9-115><a class=lnlinks href=#hl-9-115>115</a>
</span><span class=lnt id=hl-9-116><a class=lnlinks href=#hl-9-116>116</a>
</span><span class=lnt id=hl-9-117><a class=lnlinks href=#hl-9-117>117</a>
</span><span class=lnt id=hl-9-118><a class=lnlinks href=#hl-9-118>118</a>
</span><span class=lnt id=hl-9-119><a class=lnlinks href=#hl-9-119>119</a>
</span><span class=lnt id=hl-9-120><a class=lnlinks href=#hl-9-120>120</a>
</span><span class=lnt id=hl-9-121><a class=lnlinks href=#hl-9-121>121</a>
</span><span class=lnt id=hl-9-122><a class=lnlinks href=#hl-9-122>122</a>
</span><span class=lnt id=hl-9-123><a class=lnlinks href=#hl-9-123>123</a>
</span><span class=lnt id=hl-9-124><a class=lnlinks href=#hl-9-124>124</a>
</span><span class=lnt id=hl-9-125><a class=lnlinks href=#hl-9-125>125</a>
</span><span class=lnt id=hl-9-126><a class=lnlinks href=#hl-9-126>126</a>
</span><span class=lnt id=hl-9-127><a class=lnlinks href=#hl-9-127>127</a>
</span><span class=lnt id=hl-9-128><a class=lnlinks href=#hl-9-128>128</a>
</span><span class=lnt id=hl-9-129><a class=lnlinks href=#hl-9-129>129</a>
</span><span class=lnt id=hl-9-130><a class=lnlinks href=#hl-9-130>130</a>
</span><span class=lnt id=hl-9-131><a class=lnlinks href=#hl-9-131>131</a>
</span><span class=lnt id=hl-9-132><a class=lnlinks href=#hl-9-132>132</a>
</span><span class=lnt id=hl-9-133><a class=lnlinks href=#hl-9-133>133</a>
</span><span class=lnt id=hl-9-134><a class=lnlinks href=#hl-9-134>134</a>
</span><span class=lnt id=hl-9-135><a class=lnlinks href=#hl-9-135>135</a>
</span><span class=lnt id=hl-9-136><a class=lnlinks href=#hl-9-136>136</a>
</span><span class=lnt id=hl-9-137><a class=lnlinks href=#hl-9-137>137</a>
</span><span class=lnt id=hl-9-138><a class=lnlinks href=#hl-9-138>138</a>
</span><span class=lnt id=hl-9-139><a class=lnlinks href=#hl-9-139>139</a>
</span><span class=lnt id=hl-9-140><a class=lnlinks href=#hl-9-140>140</a>
</span><span class=lnt id=hl-9-141><a class=lnlinks href=#hl-9-141>141</a>
</span><span class=lnt id=hl-9-142><a class=lnlinks href=#hl-9-142>142</a>
</span><span class=lnt id=hl-9-143><a class=lnlinks href=#hl-9-143>143</a>
</span><span class=lnt id=hl-9-144><a class=lnlinks href=#hl-9-144>144</a>
</span><span class=lnt id=hl-9-145><a class=lnlinks href=#hl-9-145>145</a>
</span><span class=lnt id=hl-9-146><a class=lnlinks href=#hl-9-146>146</a>
</span><span class=lnt id=hl-9-147><a class=lnlinks href=#hl-9-147>147</a>
</span><span class=lnt id=hl-9-148><a class=lnlinks href=#hl-9-148>148</a>
</span><span class=lnt id=hl-9-149><a class=lnlinks href=#hl-9-149>149</a>
</span><span class=lnt id=hl-9-150><a class=lnlinks href=#hl-9-150>150</a>
</span><span class=lnt id=hl-9-151><a class=lnlinks href=#hl-9-151>151</a>
</span><span class=lnt id=hl-9-152><a class=lnlinks href=#hl-9-152>152</a>
</span><span class=lnt id=hl-9-153><a class=lnlinks href=#hl-9-153>153</a>
</span><span class=lnt id=hl-9-154><a class=lnlinks href=#hl-9-154>154</a>
</span><span class=lnt id=hl-9-155><a class=lnlinks href=#hl-9-155>155</a>
</span><span class=lnt id=hl-9-156><a class=lnlinks href=#hl-9-156>156</a>
</span><span class=lnt id=hl-9-157><a class=lnlinks href=#hl-9-157>157</a>
</span><span class=lnt id=hl-9-158><a class=lnlinks href=#hl-9-158>158</a>
</span><span class=lnt id=hl-9-159><a class=lnlinks href=#hl-9-159>159</a>
</span><span class=lnt id=hl-9-160><a class=lnlinks href=#hl-9-160>160</a>
</span><span class=lnt id=hl-9-161><a class=lnlinks href=#hl-9-161>161</a>
</span><span class=lnt id=hl-9-162><a class=lnlinks href=#hl-9-162>162</a>
</span><span class=lnt id=hl-9-163><a class=lnlinks href=#hl-9-163>163</a>
</span><span class=lnt id=hl-9-164><a class=lnlinks href=#hl-9-164>164</a>
</span><span class=lnt id=hl-9-165><a class=lnlinks href=#hl-9-165>165</a>
</span><span class=lnt id=hl-9-166><a class=lnlinks href=#hl-9-166>166</a>
</span><span class=lnt id=hl-9-167><a class=lnlinks href=#hl-9-167>167</a>
</span><span class=lnt id=hl-9-168><a class=lnlinks href=#hl-9-168>168</a>
</span><span class=lnt id=hl-9-169><a class=lnlinks href=#hl-9-169>169</a>
</span><span class=lnt id=hl-9-170><a class=lnlinks href=#hl-9-170>170</a>
</span><span class=lnt id=hl-9-171><a class=lnlinks href=#hl-9-171>171</a>
</span><span class=lnt id=hl-9-172><a class=lnlinks href=#hl-9-172>172</a>
</span><span class=lnt id=hl-9-173><a class=lnlinks href=#hl-9-173>173</a>
</span><span class=lnt id=hl-9-174><a class=lnlinks href=#hl-9-174>174</a>
</span><span class=lnt id=hl-9-175><a class=lnlinks href=#hl-9-175>175</a>
</span><span class=lnt id=hl-9-176><a class=lnlinks href=#hl-9-176>176</a>
</span><span class=lnt id=hl-9-177><a class=lnlinks href=#hl-9-177>177</a>
</span><span class=lnt id=hl-9-178><a class=lnlinks href=#hl-9-178>178</a>
</span><span class=lnt id=hl-9-179><a class=lnlinks href=#hl-9-179>179</a>
</span><span class=lnt id=hl-9-180><a class=lnlinks href=#hl-9-180>180</a>
</span><span class=lnt id=hl-9-181><a class=lnlinks href=#hl-9-181>181</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>heapq</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>enum</span> <span class=kn>import</span> <span class=n>Enum</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Priority</span><span class=p>(</span><span class=n>Enum</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>HIGH</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>NORMAL</span> <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=n>LOW</span> <span class=o>=</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Request</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;웹 요청을 나타내는 클래스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>priority</span><span class=p>:</span> <span class=n>Priority</span>
</span></span><span class=line><span class=cl>    <span class=n>created_at</span><span class=p>:</span> <span class=nb>float</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span><span class=p>:</span> <span class=nb>dict</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_effective_priority</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>float</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;에이징을 적용한 실제 우선순위 계산&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>wait_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>created_at</span>
</span></span><span class=line><span class=cl>        <span class=c1># 대기 시간에 따라 우선순위 향상 (낮은 숫자가 높은 우선순위)</span>
</span></span><span class=line><span class=cl>        <span class=n>aging_factor</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=n>wait_time</span> <span class=o>/</span> <span class=mi>10</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>)</span>  <span class=c1># 10초마다 우선순위 1단계 향상</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>priority</span><span class=o>.</span><span class=n>value</span> <span class=o>-</span> <span class=n>aging_factor</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__lt__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;우선순위 큐 정렬을 위한 비교 연산자&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_effective_priority</span><span class=p>()</span> <span class=o>&lt;</span> <span class=n>other</span><span class=o>.</span><span class=n>get_effective_priority</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>FairRequestProcessor</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;기아 상태를 방지하는 공정한 요청 처리기&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>max_workers</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>starvation_threshold</span><span class=o>=</span><span class=mi>30</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span> <span class=o>=</span> <span class=p>[]</span>  <span class=c1># 우선순위 큐</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>queue_lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>max_workers</span> <span class=o>=</span> <span class=n>max_workers</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>starvation_threshold</span> <span class=o>=</span> <span class=n>starvation_threshold</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 기아 상태 모니터링</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>processing_times</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># request_id -&gt; start_time</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>starvation_alerts</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 워커 스레드 풀</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>workers</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>shutdown_event</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Event</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_start_workers</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 공정성 모니터링 스레드</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>monitor_thread</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_monitor_fairness</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>monitor_thread</span><span class=o>.</span><span class=n>daemon</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>monitor_thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>submit_request</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>:</span> <span class=n>Request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;요청을 큐에 추가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>queue_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>heapq</span><span class=o>.</span><span class=n>heappush</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span><span class=p>,</span> <span class=n>request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Request </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2> queued with priority </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>priority</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_start_workers</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;워커 스레드들을 시작&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>max_workers</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>worker</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_worker_loop</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>i</span><span class=p>,))</span>
</span></span><span class=line><span class=cl>            <span class=n>worker</span><span class=o>.</span><span class=n>daemon</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            <span class=n>worker</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>workers</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>worker</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_worker_loop</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>worker_id</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;워커 스레드의 메인 루프&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>shutdown_event</span><span class=o>.</span><span class=n>is_set</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=n>request</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_next_request</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>request</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>_process_request</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=n>worker_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>  <span class=c1># 큐가 비어있을 때 잠시 대기</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_get_next_request</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Request</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;큐에서 다음 요청을 가져옴 (우선순위 + 에이징 적용)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>queue_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1># 에이징 적용을 위해 큐 재정렬</span>
</span></span><span class=line><span class=cl>                <span class=n>heapq</span><span class=o>.</span><span class=n>heapify</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>heapq</span><span class=o>.</span><span class=n>heappop</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_process_request</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>:</span> <span class=n>Request</span><span class=p>,</span> <span class=n>worker_id</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;실제 요청 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>wait_time</span> <span class=o>=</span> <span class=n>start_time</span> <span class=o>-</span> <span class=n>request</span><span class=o>.</span><span class=n>created_at</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Worker </span><span class=si>{</span><span class=n>worker_id</span><span class=si>}</span><span class=s2> processing request </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2> &#34;</span>
</span></span><span class=line><span class=cl>              <span class=sa>f</span><span class=s2>&#34;(waited </span><span class=si>{</span><span class=n>wait_time</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>s, effective_priority: </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>get_effective_priority</span><span class=p>()</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 실제 작업 시뮬레이션</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>request</span><span class=o>.</span><span class=n>priority</span> <span class=o>==</span> <span class=n>Priority</span><span class=o>.</span><span class=n>HIGH</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>  <span class=c1># 빠른 처리</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>1.0</span><span class=p>)</span>   <span class=c1># 일반 처리</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>processing_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start_time</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Request </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2> completed in </span><span class=si>{</span><span class=n>processing_time</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>s&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_monitor_fairness</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;공정성 모니터링 및 기아 상태 감지&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>shutdown_event</span><span class=o>.</span><span class=n>is_set</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=n>current_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>starving_requests</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>queue_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>request</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>wait_time</span> <span class=o>=</span> <span class=n>current_time</span> <span class=o>-</span> <span class=n>request</span><span class=o>.</span><span class=n>created_at</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>wait_time</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>starvation_threshold</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=n>starving_requests</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>request</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>wait_time</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>starving_requests</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;🚨 STARVATION ALERT: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>starving_requests</span><span class=p>)</span><span class=si>}</span><span class=s2> requests waiting too long:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>req_id</span><span class=p>,</span> <span class=n>wait_time</span> <span class=ow>in</span> <span class=n>starving_requests</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;   - Request </span><span class=si>{</span><span class=n>req_id</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>wait_time</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>s&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>starvation_alerts</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>starving_requests</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>  <span class=c1># 5초마다 모니터링</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_queue_status</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;현재 큐 상태 반환&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>queue_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;queue_length&#39;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;starvation_alerts&#39;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>starvation_alerts</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;requests_by_priority&#39;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>priority</span><span class=o>.</span><span class=n>name</span><span class=p>:</span> <span class=nb>sum</span><span class=p>(</span><span class=mi>1</span> <span class=k>for</span> <span class=n>req</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span> <span class=k>if</span> <span class=n>req</span><span class=o>.</span><span class=n>priority</span> <span class=o>==</span> <span class=n>priority</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>for</span> <span class=n>priority</span> <span class=ow>in</span> <span class=n>Priority</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>shutdown</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;처리기 종료&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>shutdown_event</span><span class=o>.</span><span class=n>set</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>worker</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>workers</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>worker</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예제</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;공정한 요청 처리 시스템 데모&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>processor</span> <span class=o>=</span> <span class=n>FairRequestProcessor</span><span class=p>(</span><span class=n>max_workers</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span> <span class=n>starvation_threshold</span><span class=o>=</span><span class=mi>15</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 다양한 우선순위의 요청들을 시간차를 두고 추가</span>
</span></span><span class=line><span class=cl>        <span class=n>requests</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=n>Request</span><span class=p>(</span><span class=s2>&#34;REQ-001&#34;</span><span class=p>,</span> <span class=n>Priority</span><span class=o>.</span><span class=n>NORMAL</span><span class=p>,</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>(),</span> <span class=p>{</span><span class=s2>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;user_query&#34;</span><span class=p>}),</span>
</span></span><span class=line><span class=cl>            <span class=n>Request</span><span class=p>(</span><span class=s2>&#34;REQ-002&#34;</span><span class=p>,</span> <span class=n>Priority</span><span class=o>.</span><span class=n>HIGH</span><span class=p>,</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>(),</span> <span class=p>{</span><span class=s2>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;admin_task&#34;</span><span class=p>}),</span>
</span></span><span class=line><span class=cl>            <span class=n>Request</span><span class=p>(</span><span class=s2>&#34;REQ-003&#34;</span><span class=p>,</span> <span class=n>Priority</span><span class=o>.</span><span class=n>NORMAL</span><span class=p>,</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>(),</span> <span class=p>{</span><span class=s2>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;user_query&#34;</span><span class=p>}),</span>
</span></span><span class=line><span class=cl>            <span class=n>Request</span><span class=p>(</span><span class=s2>&#34;REQ-004&#34;</span><span class=p>,</span> <span class=n>Priority</span><span class=o>.</span><span class=n>HIGH</span><span class=p>,</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>(),</span> <span class=p>{</span><span class=s2>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;critical_update&#34;</span><span class=p>}),</span>
</span></span><span class=line><span class=cl>            <span class=n>Request</span><span class=p>(</span><span class=s2>&#34;REQ-005&#34;</span><span class=p>,</span> <span class=n>Priority</span><span class=o>.</span><span class=n>LOW</span><span class=p>,</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>(),</span> <span class=p>{</span><span class=s2>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;background_job&#34;</span><span class=p>}),</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 요청들을 순차적으로 제출</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>request</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>requests</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>processor</span><span class=o>.</span><span class=n>submit_request</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>  <span class=c1># 1초 간격으로 요청 제출</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 중간에 더 많은 높은 우선순위 요청 추가 (기아 상황 시뮬레이션)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>i</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                    <span class=n>high_priority_req</span> <span class=o>=</span> <span class=n>Request</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;HIGH-</span><span class=si>{</span><span class=n>j</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>Priority</span><span class=o>.</span><span class=n>HIGH</span><span class=p>,</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>(),</span> <span class=p>{</span><span class=s2>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;urgent&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>                    <span class=n>processor</span><span class=o>.</span><span class=n>submit_request</span><span class=p>(</span><span class=n>high_priority_req</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 처리 상황 모니터링</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>status</span> <span class=o>=</span> <span class=n>processor</span><span class=o>.</span><span class=n>get_queue_status</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>📊 Queue Status: </span><span class=si>{</span><span class=n>status</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>KeyboardInterrupt</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>⏹️  Shutting down processor…&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>processor</span><span class=o>.</span><span class=n>shutdown</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>main</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=실습-예제-다수의-쓰레드가-동시에-공유-자원을-요청>실습 예제: 다수의 쓰레드가 동시에 공유 자원을 요청<a hidden class=anchor aria-hidden=true href=#실습-예제-다수의-쓰레드가-동시에-공유-자원을-요청>#</a></h5><p><strong>시나리오</strong>: 다수의 쓰레드가 동시에 공유 자원 (예: DB Connection Pool) 을 요청할 때, 특정 쓰레드가 계속 자원을 할당받지 못하는 상황을 구현.</p><p><strong>시스템 구성</strong>:</p><ul><li><strong>Thread Pool</strong>: 여러 쓰레드가 자원을 경쟁적으로 요청</li><li><strong>Resource Pool</strong>: 제한된 수의 자원 (예: DB Connection 3 개)</li><li><strong>Scheduler</strong>: 자원 할당 정책 (FIFO, Priority, Aging 등)</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span><span class=lnt id=hl-10-12><a class=lnlinks href=#hl-10-12>12</a>
</span><span class=lnt id=hl-10-13><a class=lnlinks href=#hl-10-13>13</a>
</span><span class=lnt id=hl-10-14><a class=lnlinks href=#hl-10-14>14</a>
</span><span class=lnt id=hl-10-15><a class=lnlinks href=#hl-10-15>15</a>
</span><span class=lnt id=hl-10-16><a class=lnlinks href=#hl-10-16>16</a>
</span><span class=lnt id=hl-10-17><a class=lnlinks href=#hl-10-17>17</a>
</span><span class=lnt id=hl-10-18><a class=lnlinks href=#hl-10-18>18</a>
</span><span class=lnt id=hl-10-19><a class=lnlinks href=#hl-10-19>19</a>
</span><span class=lnt id=hl-10-20><a class=lnlinks href=#hl-10-20>20</a>
</span><span class=lnt id=hl-10-21><a class=lnlinks href=#hl-10-21>21</a>
</span><span class=lnt id=hl-10-22><a class=lnlinks href=#hl-10-22>22</a>
</span><span class=lnt id=hl-10-23><a class=lnlinks href=#hl-10-23>23</a>
</span><span class=lnt id=hl-10-24><a class=lnlinks href=#hl-10-24>24</a>
</span><span class=lnt id=hl-10-25><a class=lnlinks href=#hl-10-25>25</a>
</span><span class=lnt id=hl-10-26><a class=lnlinks href=#hl-10-26>26</a>
</span><span class=lnt id=hl-10-27><a class=lnlinks href=#hl-10-27>27</a>
</span><span class=lnt id=hl-10-28><a class=lnlinks href=#hl-10-28>28</a>
</span><span class=lnt id=hl-10-29><a class=lnlinks href=#hl-10-29>29</a>
</span><span class=lnt id=hl-10-30><a class=lnlinks href=#hl-10-30>30</a>
</span><span class=lnt id=hl-10-31><a class=lnlinks href=#hl-10-31>31</a>
</span><span class=lnt id=hl-10-32><a class=lnlinks href=#hl-10-32>32</a>
</span><span class=lnt id=hl-10-33><a class=lnlinks href=#hl-10-33>33</a>
</span><span class=lnt id=hl-10-34><a class=lnlinks href=#hl-10-34>34</a>
</span><span class=lnt id=hl-10-35><a class=lnlinks href=#hl-10-35>35</a>
</span><span class=lnt id=hl-10-36><a class=lnlinks href=#hl-10-36>36</a>
</span><span class=lnt id=hl-10-37><a class=lnlinks href=#hl-10-37>37</a>
</span><span class=lnt id=hl-10-38><a class=lnlinks href=#hl-10-38>38</a>
</span><span class=lnt id=hl-10-39><a class=lnlinks href=#hl-10-39>39</a>
</span><span class=lnt id=hl-10-40><a class=lnlinks href=#hl-10-40>40</a>
</span><span class=lnt id=hl-10-41><a class=lnlinks href=#hl-10-41>41</a>
</span><span class=lnt id=hl-10-42><a class=lnlinks href=#hl-10-42>42</a>
</span><span class=lnt id=hl-10-43><a class=lnlinks href=#hl-10-43>43</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>random</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ResourcePool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>size</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>pool</span> <span class=o>=</span> <span class=p>[</span><span class=kc>True</span><span class=p>]</span> <span class=o>*</span> <span class=n>size</span>  <span class=c1># True: 비어있음, False: 사용중</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>acquire</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>thread_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 불공정한 자원 할당(Starvation 유발)</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>available</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>available</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>                        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Thread </span><span class=si>{</span><span class=n>thread_id</span><span class=si>}</span><span class=s2> acquired resource </span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=k>return</span> <span class=n>i</span>
</span></span><span class=line><span class=cl>            <span class=c1># 공정한 할당을 위해 짧은 sleep 추가(예: time.sleep(0.1))</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>  <span class=c1># 이 부분이 없으면 Starvation 발생 가능</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>release</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>idx</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=p>[</span><span class=n>idx</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Resource </span><span class=si>{</span><span class=n>idx</span><span class=si>}</span><span class=s2> released&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>worker</span><span class=p>(</span><span class=n>thread_id</span><span class=p>,</span> <span class=n>pool</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>res_idx</span> <span class=o>=</span> <span class=n>pool</span><span class=o>.</span><span class=n>acquire</span><span class=p>(</span><span class=n>thread_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>random</span><span class=o>.</span><span class=n>random</span><span class=p>())</span>  <span class=c1># 자원 사용 시간</span>
</span></span><span class=line><span class=cl>    <span class=n>pool</span><span class=o>.</span><span class=n>release</span><span class=p>(</span><span class=n>res_idx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>pool</span> <span class=o>=</span> <span class=n>ResourcePool</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>threads</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>t</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>worker</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>pool</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=n>threads</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>t</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>t</span> <span class=ow>in</span> <span class=n>threads</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>t</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>main</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>실행 결과 해석</strong>:<br><code>acquire()</code> 메서드에서 락을 획득한 쓰레드가 자원을 탐색할 때, <strong>항상 처음부터 순차적으로 검사</strong>하므로, 운이 나쁘면 특정 쓰레드는 자원을 할당받지 못하고 무한 대기 (Starvation) 에 빠질 수 있다.<br>이를 해결하려면 <strong>공정한 스케줄링</strong>(예: 요청 순서 큐, Aging 등) 이 필요하다.</p><p><strong>유무에 따른 차이점</strong></p><ul><li><strong>Starvation 발생 시</strong>: 일부 쓰레드는 영원히 자원을 받지 못해 작업이 진행되지 않음.</li><li><strong>공정 스케줄링 적용 시</strong>: 모든 쓰레드가 일정 시간 내 자원을 할당받아 작업 완료.</li></ul><h5 id=실습-예제-운영체제-os-에서-여러-프로세스가-cpu-를-사용하는-상황>실습 예제: 운영체제 (OS) 에서 여러 프로세스가 CPU 를 사용하는 상황<a hidden class=anchor aria-hidden=true href=#실습-예제-운영체제-os-에서-여러-프로세스가-cpu-를-사용하는-상황>#</a></h5><p><strong>시나리오:</strong> 운영체제 (OS) 에서 여러 프로세스가 CPU 를 사용하는 상황에서, 우선순위 기반 스케줄링 (Priority Scheduling) 을 적용하여 낮은 우선순위의 프로세스가 계속 선점되지 못하는 경우 Starvation(기아 현상) 이 발생.</p><p><strong>시스템 구성:</strong></p><ul><li>프로세스 그룹 (고우선, 저우선)</li><li>스케줄러 (우선순위/에이징 기능 포함)</li><li>자원 (CPU)</li></ul><pre class=mermaid>flowchart TD
  HighP[고우선 프로세스] --요청--&gt; Sched1[우선순위 스케줄러]
  LowP[저우선 프로세스] --요청--&gt; Sched1
  Sched1 --자원할당(CPU)--&gt; HighP
  Sched1 --반복대기--&gt; LowP
  subgraph Aging Process
    Sched1 --우선순위 상승--&gt; LowP
  end
</pre><p><strong>Workflow:</strong></p><ul><li>고우선 프로세스가 CPU 반복 점유</li><li>저우선 프로세스는 대기만 반복</li><li>Aging 도입 → 일정 대기 후 저우선 우선순위 상승 → CPU 기회 부여</li></ul><p><strong>역할:</strong></p><ul><li>고우선 프로세스: 반복 요청/자원 점유</li><li>저우선 프로세스: 무한 대기/우선순위 상승 기대</li><li>스케줄러: 자원 할당 및 우선순위 관리</li><li>Aging: 우선순위 자동 조정</li></ul><p><strong>유무에 따른 차이점:</strong></p><ul><li>Starvation(기아 현상) 미적용: 저우선 프로세스가 영원히 끝나지 않음</li><li>Starvation(기아 현상) 방지 (Aging 등): 저우선 프로세스도 결국 CPU 사용</li></ul><p><strong>구현 예시 (Python)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1> 1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2> 2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3> 3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4> 4</a>
</span><span class=lnt id=hl-12-5><a class=lnlinks href=#hl-12-5> 5</a>
</span><span class=lnt id=hl-12-6><a class=lnlinks href=#hl-12-6> 6</a>
</span><span class=lnt id=hl-12-7><a class=lnlinks href=#hl-12-7> 7</a>
</span><span class=lnt id=hl-12-8><a class=lnlinks href=#hl-12-8> 8</a>
</span><span class=lnt id=hl-12-9><a class=lnlinks href=#hl-12-9> 9</a>
</span><span class=lnt id=hl-12-10><a class=lnlinks href=#hl-12-10>10</a>
</span><span class=lnt id=hl-12-11><a class=lnlinks href=#hl-12-11>11</a>
</span><span class=lnt id=hl-12-12><a class=lnlinks href=#hl-12-12>12</a>
</span><span class=lnt id=hl-12-13><a class=lnlinks href=#hl-12-13>13</a>
</span><span class=lnt id=hl-12-14><a class=lnlinks href=#hl-12-14>14</a>
</span><span class=lnt id=hl-12-15><a class=lnlinks href=#hl-12-15>15</a>
</span><span class=lnt id=hl-12-16><a class=lnlinks href=#hl-12-16>16</a>
</span><span class=lnt id=hl-12-17><a class=lnlinks href=#hl-12-17>17</a>
</span><span class=lnt id=hl-12-18><a class=lnlinks href=#hl-12-18>18</a>
</span><span class=lnt id=hl-12-19><a class=lnlinks href=#hl-12-19>19</a>
</span><span class=lnt id=hl-12-20><a class=lnlinks href=#hl-12-20>20</a>
</span><span class=lnt id=hl-12-21><a class=lnlinks href=#hl-12-21>21</a>
</span><span class=lnt id=hl-12-22><a class=lnlinks href=#hl-12-22>22</a>
</span><span class=lnt id=hl-12-23><a class=lnlinks href=#hl-12-23>23</a>
</span><span class=lnt id=hl-12-24><a class=lnlinks href=#hl-12-24>24</a>
</span><span class=lnt id=hl-12-25><a class=lnlinks href=#hl-12-25>25</a>
</span><span class=lnt id=hl-12-26><a class=lnlinks href=#hl-12-26>26</a>
</span><span class=lnt id=hl-12-27><a class=lnlinks href=#hl-12-27>27</a>
</span><span class=lnt id=hl-12-28><a class=lnlinks href=#hl-12-28>28</a>
</span><span class=lnt id=hl-12-29><a class=lnlinks href=#hl-12-29>29</a>
</span><span class=lnt id=hl-12-30><a class=lnlinks href=#hl-12-30>30</a>
</span><span class=lnt id=hl-12-31><a class=lnlinks href=#hl-12-31>31</a>
</span><span class=lnt id=hl-12-32><a class=lnlinks href=#hl-12-32>32</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>queue</span> <span class=kn>import</span> <span class=n>PriorityQueue</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 우선순위와 도착시간을 기준으로 프로세스 관리</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Process</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>priority</span><span class=p>,</span> <span class=n>arrival_time</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>priority</span> <span class=o>=</span> <span class=n>priority</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>arrival_time</span> <span class=o>=</span> <span class=n>arrival_time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__lt__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 우선순위와 도착시간(aging 고려)로 비교</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>priority</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>arrival_time</span><span class=p>)</span> <span class=o>&gt;</span> <span class=p>(</span><span class=n>other</span><span class=o>.</span><span class=n>priority</span><span class=p>,</span> <span class=n>other</span><span class=o>.</span><span class=n>arrival_time</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 프로세스 생성 (도착시간에 따라 aging 적용 가능)</span>
</span></span><span class=line><span class=cl><span class=n>pq</span> <span class=o>=</span> <span class=n>PriorityQueue</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>now</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>pq</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>Process</span><span class=p>(</span><span class=s1>&#39;Low&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>now</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>pq</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>Process</span><span class=p>(</span><span class=s1>&#39;High&#39;</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=n>now</span> <span class=o>+</span> <span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Aging 알고리즘: 일정 시간마다 낮은 우선순위의 priority 증가</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>apply_aging</span><span class=p>(</span><span class=n>processes</span><span class=p>,</span> <span class=n>current_time</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>processes</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>current_time</span> <span class=o>-</span> <span class=n>p</span><span class=o>.</span><span class=n>arrival_time</span> <span class=o>&gt;</span> <span class=mi>5</span><span class=p>:</span>  <span class=c1># 5초 이상 대기 시 우선순위 1 상승</span>
</span></span><span class=line><span class=cl>            <span class=n>p</span><span class=o>.</span><span class=n>priority</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 실행 시뮬레이션</span>
</span></span><span class=line><span class=cl><span class=n>processes</span> <span class=o>=</span> <span class=p>[</span><span class=n>Process</span><span class=p>(</span><span class=s1>&#39;Low&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>now</span><span class=p>),</span> <span class=n>Process</span><span class=p>(</span><span class=s1>&#39;High&#39;</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=n>now</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>apply_aging</span><span class=p>(</span><span class=n>processes</span><span class=p>,</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=n>next_p</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>processes</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>p</span><span class=p>:</span> <span class=p>(</span><span class=n>p</span><span class=o>.</span><span class=n>priority</span><span class=p>,</span> <span class=o>-</span><span class=n>p</span><span class=o>.</span><span class=n>arrival_time</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;실행 프로세스: </span><span class=si>{</span><span class=n>next_p</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>, 우선순위: </span><span class=si>{</span><span class=n>next_p</span><span class=o>.</span><span class=n>priority</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=사례-대용량-웹-서비스에서-사용자-요청-처리>사례: 대용량 웹 서비스에서 사용자 요청 처리<a hidden class=anchor aria-hidden=true href=#사례-대용량-웹-서비스에서-사용자-요청-처리>#</a></h5><p><strong>시나리오</strong>: 대용량 웹 서비스에서 사용자 요청 처리 시 스타베이션 방지</p><p><strong>시스템 구성</strong>:</p><ul><li>로드 밸런서 (Load Balancer)</li><li>웹 서버 클러스터 (Web Server Cluster)</li><li>데이터베이스 서버 (Database Server)</li><li>캐시 서버 (Cache Server)</li><li>모니터링 시스템 (Monitoring System)</li></ul><pre class=mermaid>graph TB
    A[클라이언트 요청] --&gt; B[로드 밸런서&lt;br/&gt;가중 라운드 로빈]
    B --&gt; C[웹 서버 1&lt;br/&gt;공정 큐 스케줄러]
    B --&gt; D[웹 서버 2&lt;br/&gt;공정 큐 스케줄러]
    B --&gt; E[웹 서버 3&lt;br/&gt;공정 큐 스케줄러]
    
    C --&gt; F[커넥션 풀]
    D --&gt; F
    E --&gt; F
    
    F --&gt; G[데이터베이스&lt;br/&gt;Wait-Die 스키마]
    
    H[모니터링 시스템] --&gt; B
    H --&gt; C
    H --&gt; D
    H --&gt; E
    H --&gt; G
    
    I[캐시 서버&lt;br/&gt;LRU + 에이징] --&gt; C
    I --&gt; D
    I --&gt; E
</pre><p><strong>Workflow</strong>:</p><ul><li>클라이언트 요청이 로드 밸런서에 도착</li><li>가중 라운드 로빈 알고리즘으로 웹 서버 선택</li><li>각 웹 서버에서 공정 큐 스케줄러가 요청 처리 순서 결정</li><li>데이터베이스 접근 시 Wait-Die 스키마로 트랜잭션 스타베이션 방지</li><li>모니터링 시스템이 실시간으로 성능 지표 추적</li></ul><p><strong>역할</strong>:</p><ul><li>로드 밸런서: 서버 간 요청 분산을 통한 전체적인 공정성 보장</li><li>웹 서버: 개별 요청에 대한 공정한 처리 순서 보장</li><li>데이터베이스: 트랜잭션 레벨에서의 스타베이션 방지</li><li>모니터링 시스템: 스타베이션 발생 징후 실시간 탐지</li></ul><p><strong>유무에 따른 차이점</strong>:</p><ul><li>스타베이션 방지 미적용 시: 일부 사용자 요청이 무한 대기, 시스템 불안정성 증가</li><li>스타베이션 방지 적용 시: 모든 사용자의 공정한 서비스 이용, 시스템 안정성 향상</li></ul><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1>  1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2>  2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3>  3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4>  4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5>  5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6>  6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7>  7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8>  8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9>  9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10> 10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11> 11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12> 12</a>
</span><span class=lnt id=hl-14-13><a class=lnlinks href=#hl-14-13> 13</a>
</span><span class=lnt id=hl-14-14><a class=lnlinks href=#hl-14-14> 14</a>
</span><span class=lnt id=hl-14-15><a class=lnlinks href=#hl-14-15> 15</a>
</span><span class=lnt id=hl-14-16><a class=lnlinks href=#hl-14-16> 16</a>
</span><span class=lnt id=hl-14-17><a class=lnlinks href=#hl-14-17> 17</a>
</span><span class=lnt id=hl-14-18><a class=lnlinks href=#hl-14-18> 18</a>
</span><span class=lnt id=hl-14-19><a class=lnlinks href=#hl-14-19> 19</a>
</span><span class=lnt id=hl-14-20><a class=lnlinks href=#hl-14-20> 20</a>
</span><span class=lnt id=hl-14-21><a class=lnlinks href=#hl-14-21> 21</a>
</span><span class=lnt id=hl-14-22><a class=lnlinks href=#hl-14-22> 22</a>
</span><span class=lnt id=hl-14-23><a class=lnlinks href=#hl-14-23> 23</a>
</span><span class=lnt id=hl-14-24><a class=lnlinks href=#hl-14-24> 24</a>
</span><span class=lnt id=hl-14-25><a class=lnlinks href=#hl-14-25> 25</a>
</span><span class=lnt id=hl-14-26><a class=lnlinks href=#hl-14-26> 26</a>
</span><span class=lnt id=hl-14-27><a class=lnlinks href=#hl-14-27> 27</a>
</span><span class=lnt id=hl-14-28><a class=lnlinks href=#hl-14-28> 28</a>
</span><span class=lnt id=hl-14-29><a class=lnlinks href=#hl-14-29> 29</a>
</span><span class=lnt id=hl-14-30><a class=lnlinks href=#hl-14-30> 30</a>
</span><span class=lnt id=hl-14-31><a class=lnlinks href=#hl-14-31> 31</a>
</span><span class=lnt id=hl-14-32><a class=lnlinks href=#hl-14-32> 32</a>
</span><span class=lnt id=hl-14-33><a class=lnlinks href=#hl-14-33> 33</a>
</span><span class=lnt id=hl-14-34><a class=lnlinks href=#hl-14-34> 34</a>
</span><span class=lnt id=hl-14-35><a class=lnlinks href=#hl-14-35> 35</a>
</span><span class=lnt id=hl-14-36><a class=lnlinks href=#hl-14-36> 36</a>
</span><span class=lnt id=hl-14-37><a class=lnlinks href=#hl-14-37> 37</a>
</span><span class=lnt id=hl-14-38><a class=lnlinks href=#hl-14-38> 38</a>
</span><span class=lnt id=hl-14-39><a class=lnlinks href=#hl-14-39> 39</a>
</span><span class=lnt id=hl-14-40><a class=lnlinks href=#hl-14-40> 40</a>
</span><span class=lnt id=hl-14-41><a class=lnlinks href=#hl-14-41> 41</a>
</span><span class=lnt id=hl-14-42><a class=lnlinks href=#hl-14-42> 42</a>
</span><span class=lnt id=hl-14-43><a class=lnlinks href=#hl-14-43> 43</a>
</span><span class=lnt id=hl-14-44><a class=lnlinks href=#hl-14-44> 44</a>
</span><span class=lnt id=hl-14-45><a class=lnlinks href=#hl-14-45> 45</a>
</span><span class=lnt id=hl-14-46><a class=lnlinks href=#hl-14-46> 46</a>
</span><span class=lnt id=hl-14-47><a class=lnlinks href=#hl-14-47> 47</a>
</span><span class=lnt id=hl-14-48><a class=lnlinks href=#hl-14-48> 48</a>
</span><span class=lnt id=hl-14-49><a class=lnlinks href=#hl-14-49> 49</a>
</span><span class=lnt id=hl-14-50><a class=lnlinks href=#hl-14-50> 50</a>
</span><span class=lnt id=hl-14-51><a class=lnlinks href=#hl-14-51> 51</a>
</span><span class=lnt id=hl-14-52><a class=lnlinks href=#hl-14-52> 52</a>
</span><span class=lnt id=hl-14-53><a class=lnlinks href=#hl-14-53> 53</a>
</span><span class=lnt id=hl-14-54><a class=lnlinks href=#hl-14-54> 54</a>
</span><span class=lnt id=hl-14-55><a class=lnlinks href=#hl-14-55> 55</a>
</span><span class=lnt id=hl-14-56><a class=lnlinks href=#hl-14-56> 56</a>
</span><span class=lnt id=hl-14-57><a class=lnlinks href=#hl-14-57> 57</a>
</span><span class=lnt id=hl-14-58><a class=lnlinks href=#hl-14-58> 58</a>
</span><span class=lnt id=hl-14-59><a class=lnlinks href=#hl-14-59> 59</a>
</span><span class=lnt id=hl-14-60><a class=lnlinks href=#hl-14-60> 60</a>
</span><span class=lnt id=hl-14-61><a class=lnlinks href=#hl-14-61> 61</a>
</span><span class=lnt id=hl-14-62><a class=lnlinks href=#hl-14-62> 62</a>
</span><span class=lnt id=hl-14-63><a class=lnlinks href=#hl-14-63> 63</a>
</span><span class=lnt id=hl-14-64><a class=lnlinks href=#hl-14-64> 64</a>
</span><span class=lnt id=hl-14-65><a class=lnlinks href=#hl-14-65> 65</a>
</span><span class=lnt id=hl-14-66><a class=lnlinks href=#hl-14-66> 66</a>
</span><span class=lnt id=hl-14-67><a class=lnlinks href=#hl-14-67> 67</a>
</span><span class=lnt id=hl-14-68><a class=lnlinks href=#hl-14-68> 68</a>
</span><span class=lnt id=hl-14-69><a class=lnlinks href=#hl-14-69> 69</a>
</span><span class=lnt id=hl-14-70><a class=lnlinks href=#hl-14-70> 70</a>
</span><span class=lnt id=hl-14-71><a class=lnlinks href=#hl-14-71> 71</a>
</span><span class=lnt id=hl-14-72><a class=lnlinks href=#hl-14-72> 72</a>
</span><span class=lnt id=hl-14-73><a class=lnlinks href=#hl-14-73> 73</a>
</span><span class=lnt id=hl-14-74><a class=lnlinks href=#hl-14-74> 74</a>
</span><span class=lnt id=hl-14-75><a class=lnlinks href=#hl-14-75> 75</a>
</span><span class=lnt id=hl-14-76><a class=lnlinks href=#hl-14-76> 76</a>
</span><span class=lnt id=hl-14-77><a class=lnlinks href=#hl-14-77> 77</a>
</span><span class=lnt id=hl-14-78><a class=lnlinks href=#hl-14-78> 78</a>
</span><span class=lnt id=hl-14-79><a class=lnlinks href=#hl-14-79> 79</a>
</span><span class=lnt id=hl-14-80><a class=lnlinks href=#hl-14-80> 80</a>
</span><span class=lnt id=hl-14-81><a class=lnlinks href=#hl-14-81> 81</a>
</span><span class=lnt id=hl-14-82><a class=lnlinks href=#hl-14-82> 82</a>
</span><span class=lnt id=hl-14-83><a class=lnlinks href=#hl-14-83> 83</a>
</span><span class=lnt id=hl-14-84><a class=lnlinks href=#hl-14-84> 84</a>
</span><span class=lnt id=hl-14-85><a class=lnlinks href=#hl-14-85> 85</a>
</span><span class=lnt id=hl-14-86><a class=lnlinks href=#hl-14-86> 86</a>
</span><span class=lnt id=hl-14-87><a class=lnlinks href=#hl-14-87> 87</a>
</span><span class=lnt id=hl-14-88><a class=lnlinks href=#hl-14-88> 88</a>
</span><span class=lnt id=hl-14-89><a class=lnlinks href=#hl-14-89> 89</a>
</span><span class=lnt id=hl-14-90><a class=lnlinks href=#hl-14-90> 90</a>
</span><span class=lnt id=hl-14-91><a class=lnlinks href=#hl-14-91> 91</a>
</span><span class=lnt id=hl-14-92><a class=lnlinks href=#hl-14-92> 92</a>
</span><span class=lnt id=hl-14-93><a class=lnlinks href=#hl-14-93> 93</a>
</span><span class=lnt id=hl-14-94><a class=lnlinks href=#hl-14-94> 94</a>
</span><span class=lnt id=hl-14-95><a class=lnlinks href=#hl-14-95> 95</a>
</span><span class=lnt id=hl-14-96><a class=lnlinks href=#hl-14-96> 96</a>
</span><span class=lnt id=hl-14-97><a class=lnlinks href=#hl-14-97> 97</a>
</span><span class=lnt id=hl-14-98><a class=lnlinks href=#hl-14-98> 98</a>
</span><span class=lnt id=hl-14-99><a class=lnlinks href=#hl-14-99> 99</a>
</span><span class=lnt id=hl-14-100><a class=lnlinks href=#hl-14-100>100</a>
</span><span class=lnt id=hl-14-101><a class=lnlinks href=#hl-14-101>101</a>
</span><span class=lnt id=hl-14-102><a class=lnlinks href=#hl-14-102>102</a>
</span><span class=lnt id=hl-14-103><a class=lnlinks href=#hl-14-103>103</a>
</span><span class=lnt id=hl-14-104><a class=lnlinks href=#hl-14-104>104</a>
</span><span class=lnt id=hl-14-105><a class=lnlinks href=#hl-14-105>105</a>
</span><span class=lnt id=hl-14-106><a class=lnlinks href=#hl-14-106>106</a>
</span><span class=lnt id=hl-14-107><a class=lnlinks href=#hl-14-107>107</a>
</span><span class=lnt id=hl-14-108><a class=lnlinks href=#hl-14-108>108</a>
</span><span class=lnt id=hl-14-109><a class=lnlinks href=#hl-14-109>109</a>
</span><span class=lnt id=hl-14-110><a class=lnlinks href=#hl-14-110>110</a>
</span><span class=lnt id=hl-14-111><a class=lnlinks href=#hl-14-111>111</a>
</span><span class=lnt id=hl-14-112><a class=lnlinks href=#hl-14-112>112</a>
</span><span class=lnt id=hl-14-113><a class=lnlinks href=#hl-14-113>113</a>
</span><span class=lnt id=hl-14-114><a class=lnlinks href=#hl-14-114>114</a>
</span><span class=lnt id=hl-14-115><a class=lnlinks href=#hl-14-115>115</a>
</span><span class=lnt id=hl-14-116><a class=lnlinks href=#hl-14-116>116</a>
</span><span class=lnt id=hl-14-117><a class=lnlinks href=#hl-14-117>117</a>
</span><span class=lnt id=hl-14-118><a class=lnlinks href=#hl-14-118>118</a>
</span><span class=lnt id=hl-14-119><a class=lnlinks href=#hl-14-119>119</a>
</span><span class=lnt id=hl-14-120><a class=lnlinks href=#hl-14-120>120</a>
</span><span class=lnt id=hl-14-121><a class=lnlinks href=#hl-14-121>121</a>
</span><span class=lnt id=hl-14-122><a class=lnlinks href=#hl-14-122>122</a>
</span><span class=lnt id=hl-14-123><a class=lnlinks href=#hl-14-123>123</a>
</span><span class=lnt id=hl-14-124><a class=lnlinks href=#hl-14-124>124</a>
</span><span class=lnt id=hl-14-125><a class=lnlinks href=#hl-14-125>125</a>
</span><span class=lnt id=hl-14-126><a class=lnlinks href=#hl-14-126>126</a>
</span><span class=lnt id=hl-14-127><a class=lnlinks href=#hl-14-127>127</a>
</span><span class=lnt id=hl-14-128><a class=lnlinks href=#hl-14-128>128</a>
</span><span class=lnt id=hl-14-129><a class=lnlinks href=#hl-14-129>129</a>
</span><span class=lnt id=hl-14-130><a class=lnlinks href=#hl-14-130>130</a>
</span><span class=lnt id=hl-14-131><a class=lnlinks href=#hl-14-131>131</a>
</span><span class=lnt id=hl-14-132><a class=lnlinks href=#hl-14-132>132</a>
</span><span class=lnt id=hl-14-133><a class=lnlinks href=#hl-14-133>133</a>
</span><span class=lnt id=hl-14-134><a class=lnlinks href=#hl-14-134>134</a>
</span><span class=lnt id=hl-14-135><a class=lnlinks href=#hl-14-135>135</a>
</span><span class=lnt id=hl-14-136><a class=lnlinks href=#hl-14-136>136</a>
</span><span class=lnt id=hl-14-137><a class=lnlinks href=#hl-14-137>137</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>queue</span> <span class=kn>import</span> <span class=n>Queue</span><span class=p>,</span> <span class=n>PriorityQueue</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>List</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Request</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;웹 요청을 나타내는 클래스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>priority</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    <span class=n>arrival_time</span><span class=p>:</span> <span class=nb>float</span>
</span></span><span class=line><span class=cl>    <span class=n>waiting_time</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>0.0</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__lt__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>priority</span> <span class=o>&lt;</span> <span class=n>other</span><span class=o>.</span><span class=n>priority</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>FairQueueScheduler</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;공정한 큐 스케줄러 구현&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>aging_factor</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=n>aging_interval</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>5.0</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span> <span class=o>=</span> <span class=n>PriorityQueue</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>aging_factor</span> <span class=o>=</span> <span class=n>aging_factor</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>aging_interval</span> <span class=o>=</span> <span class=n>aging_interval</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>running</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>add_request</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>:</span> <span class=n>Request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;요청을 큐에 추가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>age_requests</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;대기 중인 요청들의 우선순위를 에이징&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>current_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>temp_requests</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 큐에서 모든 요청을 꺼내어 에이징 적용</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span><span class=o>.</span><span class=n>empty</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                <span class=n>request</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=n>request</span><span class=o>.</span><span class=n>waiting_time</span> <span class=o>=</span> <span class=n>current_time</span> <span class=o>-</span> <span class=n>request</span><span class=o>.</span><span class=n>arrival_time</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>request</span><span class=o>.</span><span class=n>waiting_time</span> <span class=o>&gt;=</span> <span class=bp>self</span><span class=o>.</span><span class=n>aging_interval</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=c1># 에이징 적용: 우선순위 증가</span>
</span></span><span class=line><span class=cl>                    <span class=n>request</span><span class=o>.</span><span class=n>priority</span> <span class=o>-=</span> <span class=bp>self</span><span class=o>.</span><span class=n>aging_factor</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Request </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2> aged: priority = </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>priority</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=n>temp_requests</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 에이징이 적용된 요청들을 다시 큐에 추가</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>request</span> <span class=ow>in</span> <span class=n>temp_requests</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>process_requests</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;요청 처리 메인 루프&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=bp>self</span><span class=o>.</span><span class=n>running</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1># 에이징 적용</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>age_requests</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1># 가장 높은 우선순위 요청 처리</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span><span class=o>.</span><span class=n>empty</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=n>request</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>request_queue</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Processing request </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2> &#34;</span>
</span></span><span class=line><span class=cl>                          <span class=sa>f</span><span class=s2>&#34;(priority: </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>priority</span><span class=si>}</span><span class=s2>, &#34;</span>
</span></span><span class=line><span class=cl>                          <span class=sa>f</span><span class=s2>&#34;waiting: </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>waiting_time</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>s)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=c1># 실제 요청 처리 시뮬레이션</span>
</span></span><span class=line><span class=cl>                    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>  <span class=c1># 스케줄링 간격</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Error in scheduler: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>start</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;스케줄러 시작&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>running</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>process_requests</span><span class=p>,</span> <span class=n>daemon</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>stop</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;스케줄러 정지&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>running</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>WebServerMonitor</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;웹 서버 모니터링 시스템&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>request_stats</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>starvation_threshold</span> <span class=o>=</span> <span class=mf>10.0</span>  <span class=c1># 10초 이상 대기 시 스타베이션으로 간주</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>check_starvation</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>requests</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Request</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;스타베이션 발생 요청 탐지&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>starved_requests</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=n>current_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>request</span> <span class=ow>in</span> <span class=n>requests</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>waiting_time</span> <span class=o>=</span> <span class=n>current_time</span> <span class=o>-</span> <span class=n>request</span><span class=o>.</span><span class=n>arrival_time</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>waiting_time</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>starvation_threshold</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>starved_requests</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>request</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;ALERT: Request </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2> may be starving &#34;</span>
</span></span><span class=line><span class=cl>                      <span class=sa>f</span><span class=s2>&#34;(waiting: </span><span class=si>{</span><span class=n>waiting_time</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>s)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>starved_requests</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># 공정 큐 스케줄러 생성</span>
</span></span><span class=line><span class=cl>    <span class=n>scheduler</span> <span class=o>=</span> <span class=n>FairQueueScheduler</span><span class=p>(</span><span class=n>aging_factor</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>aging_interval</span><span class=o>=</span><span class=mf>3.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>scheduler</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 모니터링 시스템 생성</span>
</span></span><span class=line><span class=cl>    <span class=n>monitor</span> <span class=o>=</span> <span class=n>WebServerMonitor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 다양한 우선순위의 요청 생성</span>
</span></span><span class=line><span class=cl>    <span class=n>requests</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=n>Request</span><span class=p>(</span><span class=s2>&#34;req_1&#34;</span><span class=p>,</span> <span class=n>priority</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>arrival_time</span><span class=o>=</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>        <span class=n>Request</span><span class=p>(</span><span class=s2>&#34;req_2&#34;</span><span class=p>,</span> <span class=n>priority</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span> <span class=n>arrival_time</span><span class=o>=</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>        <span class=n>Request</span><span class=p>(</span><span class=s2>&#34;req_3&#34;</span><span class=p>,</span> <span class=n>priority</span><span class=o>=</span><span class=mi>15</span><span class=p>,</span> <span class=n>arrival_time</span><span class=o>=</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>        <span class=n>Request</span><span class=p>(</span><span class=s2>&#34;req_4&#34;</span><span class=p>,</span> <span class=n>priority</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>arrival_time</span><span class=o>=</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()),</span>  <span class=c1># 높은 우선순위</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 요청들을 스케줄러에 추가</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>request</span> <span class=ow>in</span> <span class=n>requests</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>scheduler</span><span class=o>.</span><span class=n>add_request</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Added request </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2> with priority </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>priority</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 시뮬레이션 실행</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span>  <span class=c1># 20초간 실행</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>KeyboardInterrupt</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>Simulation stopped&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>scheduler</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=사례-멀티스레드-기반-주문-처리-시스템에서-고우선-알림-처리-쓰레드가-무한-반복>사례: 멀티스레드 기반 주문 처리 시스템에서 고우선 알림 처리 쓰레드가 무한 반복<a hidden class=anchor aria-hidden=true href=#사례-멀티스레드-기반-주문-처리-시스템에서-고우선-알림-처리-쓰레드가-무한-반복>#</a></h5><p><strong>시나리오</strong>: 멀티스레드 기반 주문 처리 시스템에서 고우선 알림 처리 쓰레드가 무한 반복적으로 실행됨에 따라, 주문 저장 스레드가 자원을 얻지 못해 고객의 주문이 반영되지 않는 문제가 발생.</p><p><strong>시스템 구성</strong>:</p><ul><li>고우선 알림 처리 스레드</li><li>주문 저장 스레드</li><li>공통 DB 접속 락</li><li>스케줄링 제어 모듈</li></ul><pre class=mermaid>flowchart TB
    Client --&gt; Web[Web API]
    Web --&gt; ThreadPool
    ThreadPool --&gt; Notify[알림 처리 스레드]
    ThreadPool --&gt; Order[주문 저장 스레드]
    Notify --&gt; DB[공용 데이터베이스 락 점유]
    Order --&gt; DB
</pre><p><strong>Workflow</strong>:</p><ul><li>사용자 요청이 들어오면 알림/주문 스레드로 분기</li><li>알림 스레드는 빠르게 실행되고 락을 자주 점유</li><li>주문 스레드는 락을 얻지 못해 starvation 발생</li></ul><p><strong>역할</strong>:</p><ul><li>스레드: 알림과 주문을 병렬 처리</li><li>DB 락: 리소스 제어</li><li>스케줄러: 실행 우선순위에 따라 분기</li></ul><p><strong>유무에 따른 차이점</strong>:</p><ul><li>Starvation 미적용: 주문 처리 지연 → 매출 손실</li><li>Starvation 방지 적용: 공정한 자원 분배로 문제 없음</li></ul><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1> 1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2> 2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3> 3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4> 4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5> 5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6> 6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7> 7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8> 8</a>
</span><span class=lnt id=hl-16-9><a class=lnlinks href=#hl-16-9> 9</a>
</span><span class=lnt id=hl-16-10><a class=lnlinks href=#hl-16-10>10</a>
</span><span class=lnt id=hl-16-11><a class=lnlinks href=#hl-16-11>11</a>
</span><span class=lnt id=hl-16-12><a class=lnlinks href=#hl-16-12>12</a>
</span><span class=lnt id=hl-16-13><a class=lnlinks href=#hl-16-13>13</a>
</span><span class=lnt id=hl-16-14><a class=lnlinks href=#hl-16-14>14</a>
</span><span class=lnt id=hl-16-15><a class=lnlinks href=#hl-16-15>15</a>
</span><span class=lnt id=hl-16-16><a class=lnlinks href=#hl-16-16>16</a>
</span><span class=lnt id=hl-16-17><a class=lnlinks href=#hl-16-17>17</a>
</span><span class=lnt id=hl-16-18><a class=lnlinks href=#hl-16-18>18</a>
</span><span class=lnt id=hl-16-19><a class=lnlinks href=#hl-16-19>19</a>
</span><span class=lnt id=hl-16-20><a class=lnlinks href=#hl-16-20>20</a>
</span><span class=lnt id=hl-16-21><a class=lnlinks href=#hl-16-21>21</a>
</span><span class=lnt id=hl-16-22><a class=lnlinks href=#hl-16-22>22</a>
</span><span class=lnt id=hl-16-23><a class=lnlinks href=#hl-16-23>23</a>
</span><span class=lnt id=hl-16-24><a class=lnlinks href=#hl-16-24>24</a>
</span><span class=lnt id=hl-16-25><a class=lnlinks href=#hl-16-25>25</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>threading</span> <span class=kn>import</span> <span class=n>Lock</span><span class=p>,</span> <span class=n>Thread</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>db_lock</span> <span class=o>=</span> <span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>notify_thread</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>db_lock</span><span class=o>.</span><span class=n>acquire</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=mf>0.1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;알림 처리 중…&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>db_lock</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.05</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>order_thread</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>db_lock</span><span class=o>.</span><span class=n>acquire</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=mf>0.1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;주문 저장 중…&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>db_lock</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;주문 대기 중… (Aging 필요)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># aging 혹은 우선순위 보정 필요</span>
</span></span><span class=line><span class=cl><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>notify_thread</span><span class=p>)</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>order_thread</span><span class=p>)</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=운영-및-최적화-operations--optimization>운영 및 최적화 (Operations & Optimization)<a hidden class=anchor aria-hidden=true href=#운영-및-최적화-operations--optimization>#</a></h3><h4 id=보안-및-거버넌스>보안 및 거버넌스<a hidden class=anchor aria-hidden=true href=#보안-및-거버넌스>#</a></h4><table><thead><tr><th><strong>구분</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th><th><strong>Starvation 관련 사례/대응 방안</strong></th></tr></thead><tbody><tr><td>보안</td><td>Access Control (RBAC)</td><td>역할 기반 자원 접근 제한으로 특정 사용자/태스크의 자원 독점 방지</td><td>특정 태스크만 지속적으로 높은 우선순위를 갖지 않도록 제한</td></tr><tr><td>보안</td><td>QoS 정책</td><td>낮은 우선순위 작업에도 최소 자원을 보장하여 기아 상태 방지</td><td>Kubernetes <code>LimitRange</code>, <code>ResourceQuota</code>, <code>PriorityClass</code> 등</td></tr><tr><td>보안</td><td>Rate Limiting & Quota</td><td>자원 요청 폭주 방지를 통해 정상 요청의 기아 방지</td><td>대량 요청 사용자 차단, 정상 요청의 리소스 확보 보장</td></tr><tr><td>보안</td><td>우선순위 권한 상승 차단</td><td>낮은 권한의 사용자/태스크가 우선순위 역전 구조를 악용하지 않도록 제한</td><td>우선순위 맵핑 테이블, 인증된 정책 기반 우선순위 부여</td></tr><tr><td>보안</td><td>Audit Log</td><td>자원 할당 이력, 선점 시도, 우선순위 조정 등을 추적하여 반복적 Starvation 상황 분석 가능</td><td>높은 우선순위 요청이 반복적으로 특정 자원을 선점하는 패턴 파악</td></tr><tr><td>거버넌스</td><td>우선순위 정책</td><td>서비스 중요도 기반 우선순위 설정 및 균형 있는 스케줄링 보장</td><td>업무 중요도 vs 대기 시간 균형 조정</td></tr><tr><td>거버넌스</td><td>자원 할당 정책</td><td>사용자/그룹 단위 자원 쿼터 설정 및 공정한 배분 보장</td><td>다중 사용자 환경에서 특정 그룹만 리소스를 독점하지 않도록 격리</td></tr><tr><td>거버넌스</td><td>SLA 정책</td><td>최대 대기 시간, 평균 응답 시간 등 명확한 기준 설정</td><td>태스크가 Starvation 상태로 일정 시간 이상 대기하지 않도록 감시 및 대응</td></tr><tr><td>거버넌스</td><td>자동화된 정책 집행 및 대응 시스템</td><td>Starvation 징후 감지 시 자동 우선순위 조정, 큐 재정렬 등</td><td>Prometheus, AlertManager, Operator 기반 자동 정책 반영</td></tr><tr><td>거버넌스</td><td>멀티 테넌시 자원 분리</td><td>네임스페이스, cgroup, CPU shares 등으로 사용자 간 자원 분리</td><td>특정 테넌트가 전체 자원을 점유해 다른 테넌트가 starving 상태에 빠지는 것 방지</td></tr></tbody></table><p>Starvation 은 단순한 기술적 이슈가 아닌 <strong>정책적 통제 실패로부터 비롯된 구조적 문제</strong>일 수 있다.</p><p>따라서 보안 및 거버넌스 측면에서의 대응은 다음 세 가지 관점으로 구분되어야 한다:</p><ul><li><strong>보안 관점</strong>: 특정 사용자의 리소스 선점이나 우선순위 남용을 차단하여 시스템의 공정성과 접근 제어를 확보한다. 이를 위해 RBAC, Rate Limiting, 인증 기반 우선순위 부여 등이 사용된다.</li><li><strong>거버넌스 관점</strong>: 서비스 레벨에서 자원 할당, 우선순위 관리, SLA 준수 여부를 정책적으로 제어하고 기록한다. Starvation 발생 시점에 자동 대응하거나 사후 감사가 가능하도록 설계하는 것이 핵심이다.</li><li><strong>운영 자동화</strong>: 시스템은 Starvation 발생 징후 (지속 대기, 자원 선점 반복 등) 를 실시간으로 감지하고, 자동으로 우선순위를 재조정하거나 자원 분배 정책을 변경하여 선제적으로 문제를 해결할 수 있어야 한다.</li></ul><p>이러한 보안 및 거버넌스 체계는 특히 <strong>멀티 테넌시 환경, 클라우드, 분산 시스템</strong>에서 필수적이며, Starvation 을 예방하기 위한 <strong>기술적 기반 위의 정책적 방패</strong> 역할을 한다.</p><h4 id=모니터링-및-관측성>모니터링 및 관측성<a hidden class=anchor aria-hidden=true href=#모니터링-및-관측성>#</a></h4><table><thead><tr><th>분류</th><th>정의</th><th>구성 요소</th><th>측정 원리</th><th>목적</th><th>활용 도구</th><th>특징</th></tr></thead><tbody><tr><td>대기 시간 메트릭</td><td>요청 또는 스레드의 대기 시간 측정</td><td>평균 대기 시간, 최대 대기 시간, p95/p99 latency</td><td>대기 시작~자원 획득 시점 간 차이 계산</td><td>Starvation 감지, SLA 만족 여부 확인</td><td>Prometheus, Python Exporter</td><td>Alerting 임계값 설정 가능</td></tr><tr><td>처리량 메트릭</td><td>단위 시간당 처리된 요청 수 측정</td><td>Throughput (req/sec), 평균 처리 시간</td><td>완료 요청 수 / 시간</td><td>성능 지표 관리</td><td>Prometheus, Grafana</td><td>전반적 서비스 처리율 모니터링</td></tr><tr><td>공정성 메트릭</td><td>작업별 자원 분배의 균형성 측정</td><td>Jain&rsquo;s Fairness Index, 우선순위별 처리량</td><td>(Σxi)^2 / (n * Σxi^2) 공식 기반</td><td>우선순위 불균형 감지</td><td>Custom Exporter, Grafana</td><td>임계값 초과 시 경고 가능</td></tr><tr><td>스레드 상태 추적</td><td>스레드/태스크의 상태 지속 추적</td><td>WAITING/READY/LOCKED 상태 비율</td><td>스레드 덤프 또는 Runtime 상태 조회</td><td>기아 상태 지속 여부 확인</td><td>Python <code>threading</code>, JVM, Go</td><td>프로파일링 기반 세부 추적 가능</td></tr><tr><td>락 충돌 분석</td><td>자원 접근 시 경쟁 상태 추적</td><td>Lock 획득 실패 횟수, 대기 시간</td><td>획득 요청 횟수 대비 실패율, 지연 시간 분석</td><td>Lock 병목 여부 확인</td><td>perf, Flight Recorder, gprof</td><td>락 관련 starvation 원인 분석</td></tr><tr><td>자원 사용률 모니터링</td><td>시스템 자원의 사용 편중 및 병목 확인</td><td>CPU, Memory, Disk I/O 사용률, Queue Depth</td><td>노드/컨테이너 단위 자원 소모량 수집</td><td>자원 독점 및 과부하 식별</td><td>cAdvisor, kube-state-metrics, Node Exporter</td><td>Kubernetes 기반 확장 가능</td></tr><tr><td>스케줄링 추적</td><td>태스크가 스케줄러에 의해 어떻게 배치되는지 분석</td><td>우선순위 기반 선점 횟수, 스케줄링 큐 잔존 시간</td><td>커널 Trace, BPF 기반 태스크 실행 이력 분석</td><td>우선순위 역전 및 스케줄 편중 탐지</td><td>eBPF, SystemTap, Kernel Trace</td><td>운영체제 레벨에서 정확한 흐름 분석 가능</td></tr></tbody></table><ul><li>Starvation 탐지를 위한 모니터링은 <strong>대기 시간, 처리량, 공정성</strong>이라는 3 대 메트릭이 핵심이며, 이를 실시간으로 추적해야 경고를 빠르게 발생시킬 수 있다.</li><li>스레드 상태나 락 충돌, 스케줄링 히스토리와 같은 <strong>운영체제 수준의 진단 지표</strong>는 실제 Starvation 원인 분석에 필수.</li><li>Prometheus Exporter, Grafana 대시보드, 알림 시스템 (Slack 등) 을 연계하면 Kubernetes 환경에서도 자동화된 탐지와 대응이 가능함.</li></ul><h4 id=실무-적용-고려사항-및-주의점>실무 적용 고려사항 및 주의점<a hidden class=anchor aria-hidden=true href=#실무-적용-고려사항-및-주의점>#</a></h4><table><thead><tr><th>카테고리</th><th>고려 항목</th><th>설명</th><th>권장 사항</th></tr></thead><tbody><tr><td>정책 설계</td><td>우선순위 설계</td><td>너무 복잡하면 관리 어려움. 적절한 단계로 단순화 필요</td><td>3~5 단계 수준으로 제한, 명확한 기준 설정</td></tr><tr><td></td><td>에이징 파라미터 설정</td><td>에이징 속도에 따라 우선순위 체계 왜곡 또는 방지 효과 약화 가능</td><td>시스템 부하에 따른 적절한 속도 설정, 필요 시 동적 조정</td></tr><tr><td></td><td>공정성 설정</td><td>완전한 공정성은 성능 저하 야기 가능</td><td>충분한 공정성 수준 설정 (Hybrid 스케줄링 등)</td></tr><tr><td>동기화/자원 관리</td><td>공정 락 설계</td><td>비공정 락은 기아 발생 위험</td><td>공정 락 (FIFO 기반), 락 범위 최소화 적용</td></tr><tr><td></td><td>타임아웃 설정</td><td>무한 대기 방지를 위한 기본 정책</td><td>모든 자원 접근 시 타임아웃 적용</td></tr><tr><td></td><td>자원 예약 및 요청량 설정</td><td>자원 부족으로 기아 발생 가능성</td><td>Kubernetes <code>requests/limits</code> 명시 설정</td></tr><tr><td>시스템 운영</td><td>ThreadPool 구성</td><td>워커 고정 시 blocking 작업으로 starvation 유발 가능</td><td>I/O 분리, 비동기 처리 우선</td></tr><tr><td></td><td>스케줄링 전략</td><td>우선순위 기반만 사용 시 공정성 부족</td><td>RR + Priority 혼합 전략</td></tr><tr><td>관측성</td><td>대기 시간/공정성 추적</td><td>메트릭이 없다면 Starvation 조기 탐지 어려움</td><td>슬라이딩 윈도우 기반 메트릭 추적, fairness 지수 포함</td></tr><tr><td></td><td>알림 체계 구성</td><td>임계치 초과 경고 누락 시 장애 대응 지연</td><td>Grafana alert rule + Slack 연동</td></tr><tr><td>테스트/이식성</td><td>점진적 도입 전략</td><td>기존 시스템에 전면 도입 시 예기치 못한 영향</td><td>파일럿 테스트 후 단계적 확대 적용</td></tr><tr><td></td><td>장애 복구 메커니즘</td><td>기아 방지 메커니즘 자체 실패 대비 필요</td><td>fallback 처리 경로 마련, 복구 정책 수립</td></tr></tbody></table><ul><li><strong>정책 단순성과 공정성 균형</strong>이 중요하며, 공정성만 강조하면 성능 저하 가능성이 있으므로 하이브리드 접근이 실무적.</li><li><strong>동기화 메커니즘과 자원 관리</strong>는 starvation 발생의 주요 원인이 되므로 공정 락 및 타임아웃 설정이 필수적.</li><li><strong>관측성과 실시간 경고 체계</strong> 없이는 조기 감지가 어려우므로, 슬라이딩 윈도우 기반 메트릭과 alert 연동이 효과적.</li><li><strong>시스템 통합 및 테스트는 점진적으로</strong> 접근하고, 장애 복구 대안을 반드시 고려해야 지속 가능한 운영이 가능.</li></ul><h4 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h4><table><thead><tr><th>카테고리</th><th>고려사항</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td><strong>1. 스케줄링 및 우선순위 관리</strong></td><td>우선순위 조정 알고리즘</td><td>에이징, 동적 우선순위 조정</td><td><code>priority += wait_time / α</code> 와 같이 가중치 계산</td></tr><tr><td></td><td>우선순위 변경 빈도</td><td>지나친 변경은 컨텍스트 스위칭 증가 유발</td><td>제한적 조정 또는 이벤트 기반 변경</td></tr><tr><td></td><td>예측 가능한 정책 설계</td><td>동작 불확실성은 디버깅 및 SLA 만족도 저하</td><td>결정론적 알고리즘 우선 적용</td></tr><tr><td><strong>2. 락 구조 및 동기화 전략</strong></td><td>공정 락 도입</td><td>락 획득 순서 보장으로 기아 방지</td><td>Java <code>ReentrantLock(true)</code></td></tr><tr><td></td><td>락 범위 최소화</td><td>임계구역이 클수록 병목 증가</td><td>세분화된 락 또는 lock-free 자료구조 도입</td></tr><tr><td><strong>3. 자원 관리 및 분산 설계</strong></td><td>자원 격리</td><td>자원 독점 방지 및 다중 사용자 환경 대응</td><td>Kubernetes <code>ResourceQuota</code>, cgroups</td></tr><tr><td></td><td>리소스 파편화 방지</td><td>고정 할당 자원이 낭비로 이어질 수 있음</td><td>동적 할당 정책 또는 공유 자원화</td></tr><tr><td><strong>4. 성능/오버헤드 최적화</strong></td><td>알고리즘 오버헤드</td><td>우선순위 조정 로직, 락 큐 계산 등이 과부하 유발 가능</td><td>힙/트리 기반 자료구조, 연산 배치 처리</td></tr><tr><td></td><td>메모리 사용량 최적화</td><td>우선순위 큐 관리 비용 고려</td><td>필요 최소한의 상태만 유지</td></tr><tr><td><strong>5. 모니터링 및 대응</strong></td><td>상태 모니터링 체계</td><td>기아 발생 위치 및 시간 감지</td><td>APM 연동, 지연 메트릭 수집</td></tr><tr><td></td><td>자동 대응 메커니즘</td><td>수동 조치만으로는 실시간 대응 어려움</td><td>SLA 위반 시 우선순위 자동 조정 등</td></tr><tr><td><strong>6. 확장성 및 예측성 유지</strong></td><td>분산 환경 확장</td><td>클러스터 확장 시 정책 유지가 어려움</td><td>계층적 큐, 분산 스케줄러 사용</td></tr><tr><td></td><td>이벤트 기반 조정</td><td>부하 상황에 따라 동적으로 정책 전환</td><td>조건부 Trigger 적용 (e.g., 지연 시간 > 95%tile)</td></tr></tbody></table><p>Starvation 방지 메커니즘은 시스템의 <strong>성능, 안정성, 공정성</strong>을 확보하기 위한 핵심 구성요소이지만, 무조건적 적용은 오히려 새로운 병목을 초래할 수 있다. 특히 <strong>우선순위 조정, 락 구조 설계, 자원 할당 정책, 모니터링 체계</strong>는 서로 유기적으로 맞물려야 하며, 이 중 하나라도 과도하게 동작하거나 무시되면 Starvation 완화보다는 예측 불가능한 시스템 동작으로 이어진다.</p><p>효과적인 최적화를 위해선 다음이 중요하다:</p><ul><li><strong>최소한의 오버헤드</strong>로 동작하는 정책 설계</li><li><strong>결정론적 우선순위 알고리즘</strong> 중심 운영</li><li><strong>자원 독점을 막기 위한 격리와 모니터링 체계</strong></li><li><strong>확장 가능한 구조와 이벤트 기반 대응 정책</strong></li></ul><p>결국, <strong>Starvation 방지는 기술보다 운영 전략과 시스템 이해의 문제</strong>이며, 최적화는 단순한 속도 향상이 아니라 <strong>&rdquo; 예측 가능하고 공정한 시스템 " 을 구축하는 과정</strong>이다.</p><h3 id=고급-주제-advanced-topics>고급 주제 (Advanced Topics)<a hidden class=anchor aria-hidden=true href=#고급-주제-advanced-topics>#</a></h3><h4 id=현재-도전-과제>현재 도전 과제<a hidden class=anchor aria-hidden=true href=#현재-도전-과제>#</a></h4><table><thead><tr><th>카테고리</th><th>도전 과제</th><th>원인</th><th>영향</th><th>해결 방안</th><th>구현 복잡도</th></tr></thead><tbody><tr><td><strong>공정성/스케줄링</strong></td><td>분산 시스템에서의 글로벌 공정성 확보</td><td>네트워크 지연, 상태 불일치, 로컬 중심 스케줄링</td><td>전체 시스템 레벨에서 공정한 자원 분배 실패 → 일부 노드의 starvation</td><td>글로벌 스케줄러, 분산 합의 알고리즘, 메타 스케줄링 도입</td><td>매우 높음</td></tr><tr><td></td><td>실시간 시스템에서의 예측 가능성 확보</td><td>동적 우선순위 변경이 실시간 제약 위반 유도</td><td>데드라인 미스, 지연 전파, 실시간 서비스 신뢰도 저하</td><td>정적 분석, WCET(Worst Case Execution Time) 분석, 실시간 스케줄링 적용</td><td>높음</td></tr><tr><td><strong>클라우드/멀티테넌시</strong></td><td>멀티테넌트 환경에서의 자원 Starvation</td><td>리소스 선점형 워크로드, 불균형한 우선순위 또는 QoS 정책 부재</td><td>낮은 우선순위 또는 일반 서비스의 처리 지연</td><td>QoS 정책 정의, namespace 격리, resource quota 활용</td><td>중간</td></tr><tr><td></td><td>클라우드 네이티브 환경에서의 스케일링 실패</td><td>HPA/VPA 가 실제 자원 부족을 반영하지 못함</td><td>스케일링 되어도 실제 자원 미할당 → Starvation 지속</td><td>예약 기반 스케줄링, predict-aware scaling</td><td>높음</td></tr><tr><td><strong>AI/ML</strong></td><td>머신러닝 워크로드의 GPU 자원 starvation</td><td>GPU 자원 희소성, 대규모 학습이 전체 자원 독점</td><td>우선순위 낮은 실험 작업 기아, 학습 지연</td><td>GPU time-sharing, priority-aware preemption</td><td>중간</td></tr><tr><td><strong>마이크로서비스</strong></td><td>마이크로서비스 간의 백프레셔 연쇄 기아 문제</td><td>병목 서비스의 처리 지연 → 연쇄적 요청 지연 전파</td><td>전체 서비스 메시 불안정, 사용자 응답 지연</td><td>Circuit Breaker, backpressure 제한, timeout 설정</td><td>중간</td></tr><tr><td><strong>관측/모니터링</strong></td><td>분산 환경에서의 Starvation 감지 난이도</td><td>상태/로그 분산, 노드 간 지표 통합 어려움</td><td>문제 조기 탐지 실패 → 장기화된 리소스 기아</td><td>글로벌 로그 수집, BPF, eBPF 기반 커널 추적 강화</td><td>높음</td></tr></tbody></table><ul><li><strong>공정성 스케줄링</strong>: 글로벌 수준의 fairness 확보는 필수이며, local 최적화만으로는 Starvation 회피가 불가능함.</li><li><strong>멀티테넌시 자원 분배</strong>: QoS 기반 리소스 분리와 격리 없이는 낮은 우선순위 워크로드가 지속적인 자원 기아 상태에 빠짐.</li><li><strong>GPU 및 AI 환경</strong>: GPU 와 같은 고비용 자원은 공유 모델과 선점 정책 없이는 특정 작업이 기회를 얻지 못함.</li><li><strong>마이크로서비스 아키텍처</strong>: 비동기 간섭으로 발생하는 간접적 Starvation 을 제어하기 위해 백프레셔 제어 메커니즘이 중요함.</li><li><strong>관측성 및 대응성</strong>: 실시간 메트릭 수집, 시스템 전역의 상태 추적 없이는 Starvation 을 정량적으로 포착하기 어려움.</li><li><strong>확장성 있는 Fairness 보장</strong>: 대규모 분산 환경에서 모든 노드/작업의 공정성을 보장하기 어려움.</li><li><strong>동적 부하 대응</strong>: 시스템 부하가 급변할 때, 자원 할당 정책이 실시간으로 적응해야 함.</li><li><strong>복합적 Starvation</strong>: 여러 자원 (CPU, 메모리, I/O 등) 이 복합적으로 Starvation 을 유발할 수 있음.</li><li><strong>클라우드/멀티테넌트 환경</strong>: 여러 조직/서비스가 동일 인프라를 공유할 때, Starvation 리스크 관리가 복잡해짐.</li></ul><h4 id=생태계-및-관련-기술>생태계 및 관련 기술<a hidden class=anchor aria-hidden=true href=#생태계-및-관련-기술>#</a></h4><table><thead><tr><th>카테고리</th><th>기술 또는 구성요소</th><th>연계 방식</th><th>Starvation 방지 기여</th></tr></thead><tbody><tr><td><strong>운영체제 및 스케줄링</strong></td><td>Linux CFS, POSIX SCHED_FIFO, SCHED_RR</td><td>가상 런타임 기반 공정 스케줄링, 실시간 우선순위 정책</td><td>CPU 자원 공정 분배, 우선순위 기반 starvation 방지</td></tr><tr><td><strong>프로그래밍 프레임워크</strong></td><td>Java <code>ReentrantLock(fair)</code>, Go Scheduler, Python asyncio</td><td>FIFO 기반 락 할당, 비동기 태스크 스케줄링</td><td>스레드 락 독점 방지, 비동기 starvation 방지</td></tr><tr><td><strong>자원 관리 플랫폼</strong></td><td>Kubernetes QoS, cgroups, ResourceQuota</td><td>Pod 우선순위 설정, 자원 격리 및 제한</td><td>낮은 우선순위 작업에 최소 자원 보장, 과점 방지</td></tr><tr><td><strong>분산 처리 및 메시지 큐</strong></td><td>Kafka, RabbitMQ, Flink, Redis Lock</td><td>백프레셔, 락 타임아웃, 체크포인팅</td><td>이벤트 처리 및 메시지 소비의 공정성 보장</td></tr><tr><td><strong>모니터링 및 관측성 도구</strong></td><td>Prometheus, OpenTelemetry, OpenMetrics</td><td>메트릭 기반 지연 추적, 이상 탐지</td><td>Starvation 지표 기반 조기 대응 가능</td></tr><tr><td><strong>표준 및 프로토콜</strong></td><td>POSIX, Kubernetes CRD, OpenMetrics</td><td>정책 정의, 우선순위 aging 및 fairness 구성</td><td>시스템 간 통합 정책 적용 가능</td></tr></tbody></table><ul><li>운영체제는 CFS 나 POSIX 스케줄링 정책을 통해 <strong>낮은 우선순위 작업이 무기한 밀리는 현상</strong>을 구조적으로 방지할 수 있도록 돕는다.</li><li>프로그래밍 레벨에서는 Java 나 Go 등의 프레임워크가 **공정 락 (Fair Lock)**이나 비동기 처리를 통해 <strong>락 경합과 큐 기아 현상</strong>을 제어할 수 있다.</li><li>Kubernetes 및 cgroups 는 자원 할당을 통해 특정 컨테이너나 프로세스가 자원을 독점하지 않도록 제어하고, 이를 기반으로 <strong>멀티 테넌시 환경에서도 공정성 확보</strong>가 가능하다.</li><li>Kafka, Flink 등 메시지 기반 시스템은 처리량이 높은 환경에서도 이벤트나 메시지가 <strong>오래 대기하지 않도록 적절히 분산 처리하거나 제한 정책을 두는 백프레셔 메커니즘</strong>을 사용한다.</li><li>관측성과 조기 대응 측면에서는 Prometheus, OpenTelemetry 가 시스템 내부 지표를 분석하여 <strong>기아 발생의 징후를 빠르게 감지</strong>하고 관리자나 시스템이 자동으로 대응할 수 있는 기반을 제공한다.</li></ul><p>결론적으로, Starvation 은 단일 기술로 해결되는 것이 아니라 <strong>생태계 전반에 걸친 통합 전략</strong>이 필요하며, 운영체제 - 프로그래밍 - 자원관리 - 관측성 - 표준이 유기적으로 연동되어야 근본적인 방지가 가능하다.</p><h4 id=최신-기술-트렌드와-미래-방향>최신 기술 트렌드와 미래 방향<a hidden class=anchor aria-hidden=true href=#최신-기술-트렌드와-미래-방향>#</a></h4><table><thead><tr><th>카테고리</th><th>기술/전략</th><th>설명</th><th>적용 기술/예시</th></tr></thead><tbody><tr><td>AI 기반 동적 스케줄링</td><td>예측 기반 자원 할당 최적화</td><td>머신러닝으로 시스템 상태를 분석하고 starvation 가능성 예측</td><td>IBM Turbonomic, Predictive Scheduler (Python 예시)</td></tr><tr><td>이벤트/서버리스 기반 처리</td><td>정적 우선순위 없는 함수 단위 처리 모델</td><td>요청마다 짧은 생명 주기의 자원 할당으로 기아 상태 완화</td><td>AWS Lambda, Google Functions, KEDA</td></tr><tr><td>엣지 및 계층형 스케줄링</td><td>Cloud–Edge–Device 구조에서의 분산 자원 처리</td><td>엣지 단에서의 공정성 유지 및 클라우드와의 스케줄링 조율</td><td>K3s, GKE Edge, Azure IoT Hub, 분산 스케줄러 구조 (mermaid 참조)</td></tr><tr><td>보안 및 투명성 중심 자원 처리</td><td>블록체인 기반 요청 기록 및 동형암호 기반 우선순위 처리</td><td>변조 불가능한 요청 순서 보장 및 암호화된 공정성 비교 수행</td><td>Ethereum, Hyperledger, Post-Quantum Safe Priority Mgmt</td></tr><tr><td>실시간 관측 기반 대응</td><td>메트릭 및 이벤트 기반 이상 탐지 및 정책 전환</td><td>starvation 지표 탐지 후 적응형 정책으로 전환</td><td>Prometheus, OpenTelemetry, Latency-aware Scheduling</td></tr></tbody></table><ul><li>AI 기반 스케줄링은 현재 가장 핵심적인 트렌드 중 하나로, 시스템 상태와 워크로드 패턴을 실시간 학습하여 starvation 발생 가능성을 예측하고 선제적 대응이 가능하게 한다. 특히 머신러닝 모델을 통해 자원 할당 정책을 동적으로 조정하는 방향으로 진화 중이다.</li><li>서버리스/이벤트 기반 아키텍처는 우선순위 기반 스케줄링 개념 자체를 제거하면서도 기아 상태를 완화할 수 있으며, 자동 확장성과 자원 할당의 유연성이 매우 크다.</li><li>엣지 컴퓨팅 환경에서는 노드 간 자원 경쟁이 더욱 분산되고 계층화됨에 따라, 각 레이어별 공정성 보장과 starvation 방지가 복잡해지고 있으며, 이로 인해 <strong>계층적 분산 스케줄링 프레임워크</strong>가 주요 기술로 부상하고 있다.</li><li>보안 중심의 스케줄링은 블록체인 및 동형암호 기술을 통해 요청과 우선순위의 신뢰성과 투명성을 높이고 있으며, 이를 통해 <strong>공정성의 객관적 검증 가능성</strong>이 확보되고 있다.</li><li>Prometheus, OpenTelemetry 같은 관측성 기반 도구들은 실시간 모니터링을 통해 starvation 징후를 감지하고, AIOps 또는 정책 기반 자동화 도구와 연동해 <strong>자동 대응 체계로 전환</strong>되고 있다.</li></ul><h4 id=기타-고급-사항>기타 고급 사항<a hidden class=anchor aria-hidden=true href=#기타-고급-사항>#</a></h4><table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>우선순위 역전과 Starvation 간의 연계</strong></td><td>우선순위 역전 (Priority Inversion) 이 장기화되면 Starvation 으로 발전 가능. 이를 방지하기 위해 우선순위 상속 (Priority Inheritance) 또는 Ceiling Protocol 이 필요</td></tr><tr><td><strong>락 계층화 전략</strong></td><td>다중 자원 락이 필요한 경우 자원 접근 순서 정렬을 통해 교착과 Starvation 을 함께 방지</td></tr><tr><td><strong>eBPF 기반 시스템 레벨 진단</strong></td><td>Linux 커널 내에서 락 충돌, 큐 대기 분석 가능 → Starvation 조기 탐지</td></tr></tbody></table><hr><h2 id=정리-및-학습-가이드>정리 및 학습 가이드<a hidden class=anchor aria-hidden=true href=#정리-및-학습-가이드>#</a></h2><h3 id=내용-정리>내용 정리<a hidden class=anchor aria-hidden=true href=#내용-정리>#</a></h3><ul><li><p><strong>정의</strong>: Starvation 은 자원 접근이 불공정하게 이루어져, 특정 프로세스 또는 요청이 자원을 무한정 획득하지 못하는 상태를 의미한다. 이는 공정성 (Fairness) 과 활성성 (Liveness) 을 훼손하는 주요 원인이다.</p></li><li><p><strong>원인</strong>: 주로 우선순위 기반 스케줄링, 리소스 경합, 선점 정책 결함, 서버리스 환경의 콜드 스타트, 멀티 테넌시에서의 자원 쏠림 등에서 발생한다.</p></li><li><p><strong>해결 방안</strong>:</p><ul><li><strong>Aging</strong>: 대기 시간이 길수록 우선순위 상향</li><li><strong>Fair Lock</strong>: FIFO 기반 동기화</li><li><strong>Preemption</strong>: 우선순위 기반 선점 제어</li><li><strong>Timeout</strong>: 장시간 대기에 대한 자동 회피</li><li><strong>Resource Isolation/Quota</strong>: 테넌트 간 자원 격리</li><li><strong>Backpressure</strong>: 상위 시스템의 처리 속도 조절</li></ul></li><li><p><strong>최신 트렌드</strong>:</p><ul><li><strong>AI 기반 스케줄링</strong>: 예측 기반 자원 분배로 사전 예방</li><li><strong>서버리스 환경 대응</strong>: 콜드 스타트/자원 대기 방지</li><li><strong>멀티 클라우드 자원 공정화</strong>: Federation Scheduling</li><li><strong>실시간 스트리밍 공정성 제어</strong>: Kafka QoS Scheduling</li><li><strong>관측성과 자동화 강화</strong>: Prometheus + Grafana + Slack Alert 연동</li></ul></li><li><p><strong>실무 전략</strong>:</p><ul><li><strong>설계 단계 고려</strong>: 공정성 메커니즘 내장 설계</li><li><strong>계층별 대응</strong>: OS → 스케줄러 → 애플리케이션 → 인프라</li><li><strong>관측 가능성 확보</strong>: 지표 수집 + 경고 연동</li><li><strong>비즈니스 우선순위와 기술 우선순위의 조율</strong></li></ul></li></ul><h3 id=학습-로드맵>학습 로드맵<a hidden class=anchor aria-hidden=true href=#학습-로드맵>#</a></h3><table><thead><tr><th>단계</th><th>목표</th><th>주요 학습 주제</th><th>주요 기술/도구</th></tr></thead><tbody><tr><td>1 단계 (기초 이론)</td><td>Starvation 개념 이해</td><td>동시성, Deadlock/Starvation 구분, 우선순위 기반 스케줄링</td><td>OS 이론, Java Thread</td></tr><tr><td>2 단계 (기초 실습)</td><td>단일 시스템 내 기아 방지 실습</td><td>락 메커니즘, 에이징 구현, 공정성 락 비교</td><td>Java, Python, ReentrantLock</td></tr><tr><td>3 단계 (시스템 적용)</td><td>실제 시스템에서의 탐지/예방</td><td>JVM, DBMS, Kubernetes 환경에서 Starvation 분석</td><td>K8s, SQL, GC, Thread Dump</td></tr><tr><td>4 단계 (운영/최적화)</td><td>실시간 대응 및 자동화 구성</td><td>모니터링, SLA 기반 정책, 백프레셔 관리</td><td>Prometheus, OpenTelemetry, Circuit Breaker</td></tr><tr><td>5 단계 (고급 트렌드 & 응용)</td><td>예측·자율적 스케줄링 구현</td><td>AI 기반 스케줄링, 멀티테넌시 고려, Edge 환경 설계</td><td>ML 모델, AIOps, K8s Scheduling Framework</td></tr></tbody></table><h3 id=학습-항목-매트릭스>학습 항목 매트릭스<a hidden class=anchor aria-hidden=true href=#학습-항목-매트릭스>#</a></h3><table><thead><tr><th>단계 (Phase)</th><th>학습 영역</th><th>학습 항목</th><th>중요도</th></tr></thead><tbody><tr><td>1 (기초)</td><td>개념 이해</td><td>Starvation 정의, 우선순위 메커니즘, 공정성 개념</td><td>필수</td></tr><tr><td>2 (이론)</td><td>탐지 및 해결 기법</td><td>Aging, Fair Scheduling, Lock Fairness, Priority Inversion 대응</td><td>필수</td></tr><tr><td>3 (분석)</td><td>원인 분석/균형</td><td>성능 vs 공정성 트레이드오프, 탐지 가능성 평가</td><td>필수</td></tr><tr><td>4 (구현–실무)</td><td>코드 및 환경 실습</td><td>Java ReentrantLock, Kubernetes Priority/Quota 설정, 메시지 큐 관리</td><td>권장</td></tr><tr><td>5 (운영)</td><td>모니터링/운영</td><td>지연/대기 시간 모니터링, 알람 체계, SLA 기반 자동 대응</td><td>필수</td></tr><tr><td>6 (고급)</td><td>최신 트렌드</td><td>AI 기반 스케줄링, 분산 환경 공정성, 엣지/서버리스 고려</td><td>선택</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>카테고리</th><th>용어 (한글/영문)</th><th>정의</th><th>관련 개념</th></tr></thead><tbody><tr><td><strong>핵심 개념</strong></td><td>Starvation (기아 상태)</td><td>자원을 할당받지 못해 무한 대기</td><td>Deadlock, Fairness</td></tr><tr><td></td><td>Aging (에이징)</td><td>대기 시간에 비례한 우선순위 상승</td><td>Priority Scheduling</td></tr><tr><td></td><td>Fairness (공정성)</td><td>자원의 합리적 접근 보장</td><td>Jain&rsquo;s Index</td></tr><tr><td></td><td>Liveness (활성성)</td><td>모든 작업이 결국 완료됨을 보장</td><td>Starvation, Deadlock</td></tr><tr><td><strong>스케줄링/동시성</strong></td><td>Priority Inversion (우선순위 역전)</td><td>낮은 우선순위가 고우선 작업을 막음</td><td>Inheritance Protocol</td></tr><tr><td></td><td>Fair Lock (공정 락)</td><td>FIFO 락 정책</td><td>ReentrantLock</td></tr><tr><td></td><td>Round Robin</td><td>시간 분할 순환 실행</td><td>Time Slice</td></tr><tr><td></td><td>MLFQ</td><td>다단계 큐로 우선순위 동적 조정</td><td>Aging, Feedback</td></tr><tr><td><strong>리소스 관리</strong></td><td>Lock, Mutex, Semaphore</td><td>동기화 기법</td><td>Thread Safety</td></tr><tr><td></td><td>Timeout</td><td>자원 요청 제한 시간 설정</td><td>Deadlock 회피</td></tr><tr><td></td><td>Resource Quota</td><td>자원 사용량 제한 정책</td><td>K8s, Multi-tenancy</td></tr><tr><td></td><td>Preemption</td><td>우선순위 기반 자원 선점</td><td>RTOS, QoS Policy</td></tr><tr><td><strong>운영/관측</strong></td><td>QoS</td><td>서비스 품질 보장 정책</td><td>Kubernetes QoS Class</td></tr><tr><td></td><td>Observability</td><td>시스템 상태 외부에서 관측 가능</td><td>Logging, Tracing</td></tr><tr><td></td><td>SLA</td><td>서비스 품질 계약</td><td>SLI, SLO</td></tr><tr><td></td><td>Jain&rsquo;s Index</td><td>자원 공정성 측정 수치</td><td>Fairness Metric</td></tr><tr><td></td><td>Backpressure</td><td>처리속도 역방향 조절 메커니즘</td><td>Flow Control</td></tr><tr><td></td><td>Dashboard</td><td>실시간 시각화 UI</td><td>Grafana</td></tr><tr><td></td><td>Auto Alert</td><td>알림 자동화 시스템</td><td>Alertmanager, Slack</td></tr><tr><td><strong>분산 시스템/클라우드</strong></td><td>Orchestration</td><td>자원/작업 조율 자동화</td><td>Kubernetes</td></tr><tr><td></td><td>Service Mesh</td><td>마이크로서비스 통신 관리</td><td>Istio, Linkerd</td></tr><tr><td></td><td>WFQ (가중치 공정 큐)</td><td>가중치 기반 요청 공정 분배</td><td>Network QoS</td></tr><tr><td></td><td>Wait-Die / Wound-Wait</td><td>타임스탬프 기반 DB Starvation 방지</td><td>DB 동시성 제어</td></tr><tr><td></td><td>Finite Bypass</td><td>유한한 횟수만 자원 접근 우회 허용</td><td>Fair Queue</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><a href=https://en.wikipedia.org/wiki/Starvation_%28computer_science%29>Starvation (computer science) - Wikipedia</a></li><li><a href=https://www.geeksforgeeks.org/operating-systems/starvation-and-aging-in-operating-systems/>Starvation and Aging in Operating Systems | GeeksforGeeks</a></li><li><a href=https://en.wikipedia.org/wiki/Scheduling_%28computing%29>Scheduling (computing) - Wikipedia</a></li><li><a href=https://en.wikipedia.org/wiki/Aging_%28scheduling%29>Aging (scheduling) - Wikipedia</a></li><li><a href=https://en.wikipedia.org/wiki/Synchronization_%28computer_science%29>Synchronization (computer science) - Wikipedia</a></li><li><a href=https://www.geeksforgeeks.org/operating-systems/difference-between-deadlock-and-starvation-in-os/>Difference between Deadlock and Starvation in OS | GeeksforGeeks</a></li></ul><hr></div></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>