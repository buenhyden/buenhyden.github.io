<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>프로세스 제어 블록(Process Control Block, PCB) | hyunyoun's Blog</title><meta name=keywords content="Computer-Science-Fundamentals,Operating-systems,Process-Management,Processes,Process-Control-Block,Context-Switching"><meta name=description content="PCB(Process Control Block)는 커널이 프로세스의 식별자·상태·레지스터·프로그램 카운터·스택 포인터, 스케줄링·메모리·열린 파일·IPC·회계 정보를 보관하는 핵심 자료구조다. 컨텍스트 스위치 때 이 정보를 저장·복원해 실행을 이어가며, 프로세스 테이블의 커널 메모리에 안전하게 유지된다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/computer-science-fundamentals/operating-systems-fundamentals/process-and-thread-fundamentals/process-vs-thread/process/process-control-block/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/computer-science-fundamentals/operating-systems-fundamentals/process-and-thread-fundamentals/process-vs-thread/process/process-control-block/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/computer-science-fundamentals/operating-systems-fundamentals/process-and-thread-fundamentals/process-vs-thread/process/process-control-block/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/computer-science-fundamentals/operating-systems-fundamentals/process-and-thread-fundamentals/process-vs-thread/process/process-control-block/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="프로세스 제어 블록(Process Control Block, PCB)"><meta property="og:description" content="PCB(Process Control Block)는 커널이 프로세스의 식별자·상태·레지스터·프로그램 카운터·스택 포인터, 스케줄링·메모리·열린 파일·IPC·회계 정보를 보관하는 핵심 자료구조다. 컨텍스트 스위치 때 이 정보를 저장·복원해 실행을 이어가며, 프로세스 테이블의 커널 메모리에 안전하게 유지된다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="프로세스 제어 블록(Process Control Block, PCB)"><meta name=twitter:description content="PCB(Process Control Block)는 커널이 프로세스의 식별자·상태·레지스터·프로그램 카운터·스택 포인터, 스케줄링·메모리·열린 파일·IPC·회계 정보를 보관하는 핵심 자료구조다. 컨텍스트 스위치 때 이 정보를 저장·복원해 실행을 이어가며, 프로세스 테이블의 커널 메모리에 안전하게 유지된다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"HY's Blog","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Computer Science Fundamentals","item":"https://buenhyden.github.io/posts/computer-science-fundamentals/"},{"@type":"ListItem","position":5,"name":"Process vs. Thread","item":""},{"@type":"ListItem","position":6,"name":"Processes","item":"https://buenhyden.github.io/posts/computer-science-fundamentals/operating-systems-fundamentals/process-and-thread-fundamentals/process-vs-thread/process/"},{"@type":"ListItem","position":7,"name":"프로세스 제어 블록(Process Control Block, PCB)","item":"https://buenhyden.github.io/posts/computer-science-fundamentals/operating-systems-fundamentals/process-and-thread-fundamentals/process-vs-thread/process/process-control-block/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>HY's Blog</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/computer-science-fundamentals/>Computer Science Fundamentals</a>&nbsp;»&nbsp;<a href>Process vs. Thread</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/computer-science-fundamentals/operating-systems-fundamentals/process-and-thread-fundamentals/process-vs-thread/process/>Processes</a></div><h1>프로세스 제어 블록(Process Control Block, PCB)</h1><div class=post-description>PCB(Process Control Block)는 커널이 프로세스의 식별자·상태·레지스터·프로그램 카운터·스택 포인터, 스케줄링·메모리·열린 파일·IPC·회계 정보를 보관하는 핵심 자료구조다. 컨텍스트 스위치 때 이 정보를 저장·복원해 실행을 이어가며, 프로세스 테이블의 커널 메모리에 안전하게 유지된다.</div></header><div class=post-content><h2 id=프로세스-제어-블록-process-control-block-pcb>프로세스 제어 블록 (Process Control Block, PCB)<a hidden class=anchor aria-hidden=true href=#프로세스-제어-블록-process-control-block-pcb>#</a></h2><p>PCB(Process Control Block) 는 커널이 프로세스를 식별·관리하기 위한 핵심 자료구조로, <strong>상태, 프로그램 카운터와 레지스터, 스케줄링 정보 (우선순위·affinity), 메모리 관리 정보, 열린 파일/FD, 시그널·크리덴셜, 누적 사용량·타이머</strong> 등을 보관한다.<br>컨텍스트 스위칭 시 PCB 의 스냅샷을 저장·복원해 멀티태스킹을 가능케 하며, 스케줄러·메모리 관리자가 이를 근거로 자원을 배분한다. Linux 등에서는 <code>task_struct</code> 로 구현되며, 컨테이너 환경에선 네임스페이스·cgroups 메타데이터와 결합돼 격리·할당 한도를 강화한다. PCB 는 성능 최적화·추적·보안의 기초가 된다.</p><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><p>프로세스는 " 실행 중인 프로그램 " 이고, PCB 는 그 <strong>신분증 + 의무기록</strong>이다.<br>운영체제는 PCB 를 보고 **누구인지 (식별자), 어디서 실행 중인지 (상태/CPU), 무엇을 쓰는지 (메모리/파일/네트워크), 어떤 권한인지 (UID/GID/cap)**를 판단해 CPU 를 배분하고, 충돌을 막고, 기록을 남긴다.<br>실무에선 이 메타데이터를 읽고 조정하는 것만으로 <strong>지연을 줄이고 (스케줄링), 장애를 막고 (자원한도), 사고를 추적</strong>할 수 있다.</p><table><thead><tr><th>항목</th><th>정의</th><th>왜 중요한가</th><th>대표 OS 실체 (예)</th></tr></thead><tbody><tr><td>PCB/Task 구조</td><td>프로세스/스레드의 상태·자원·자격을 보관하는 커널 자료구조</td><td>스케줄·메모리·보안·관측의 출발점</td><td>Linux <code>task_struct</code>, Windows EPROCESS/ETHREAD</td></tr><tr><td>상태 모델</td><td>New/Ready/Running/Waiting/Terminated</td><td>디스패치/선점/대기의 근거, 지연·처리량 결정</td><td><code>TASK_RUNNING/…</code>, Wait Queue</td></tr><tr><td>스케줄링 정보</td><td>우선순위, 타임슬라이스, 클래스 (CFS/RT), Affinity</td><td>P99 지연/처리량·SLA 에 직결</td><td><code>sched_entity</code>, <code>SCHED_FIFO/RR/DEADLINE</code></td></tr><tr><td>메모리 맵/보호</td><td>주소공간, 페이지 테이블, 권한 (rwx)</td><td>OOM/페이지폴트/보안 취약점 대응</td><td><code>mm_struct</code>, VMA</td></tr><tr><td>자격/보안 컨텍스트</td><td>UID/GID, capabilities, LSM context</td><td>멀티테넌시 안전성·권한 상승 방지</td><td><code>cred</code>, SELinux/AppArmor</td></tr><tr><td>핸들/FD 테이블</td><td>열린 파일·소켓·파이프 목록</td><td>FD 누수·I/O 병목 진단의 핵심</td><td><code>files_struct</code>, 핸들 테이블</td></tr><tr><td>자원계정/한도</td><td>CPU/메모리/IO/프로세스 수 등 제한</td><td>폭주·노이즈 네이버 방지</td><td>cgroups, ulimit/Job Objects</td></tr><tr><td>IPC 메타</td><td>파이프/소켓/공유메모리/시그널</td><td>협력 프로세스 성능·안정성 좌우</td><td><code>signal_struct</code>, IPC 키/큐</td></tr></tbody></table><ul><li>PCB 는 " 스케줄링·메모리·보안·I/O·자원한도 " 를 <strong>한 점에 응집</strong>시키는 운영의 관제판이다.</li></ul><h4 id=실무-구현과의-연관성>실무 구현과의 연관성<a hidden class=anchor aria-hidden=true href=#실무-구현과의-연관성>#</a></h4><table><thead><tr><th>실무 영역</th><th>연결 핵심 개념</th><th>적용 포인트</th><th>체크리스트/리스크</th></tr></thead><tbody><tr><td>API 지연 최적화</td><td>상태·스케줄링·Affinity</td><td>대화형 워크로드는 CFS 조정, 핫스레드 Affinity</td><td>과도 바인딩→로드 불균형, 우선순위 역전</td></tr><tr><td>배치/파이프라인</td><td>스케줄링·NUMA·메모리맵</td><td>NUMA 정책·HugePages, I/O 배치</td><td>NUMA 원격 접근↑, 페이지 폴트 급증</td></tr><tr><td>컨테이너 운영</td><td>자원한도·네임스페이스·cred</td><td>cgroups v2(메모리/CPU/IO), seccomp</td><td>한도 과소/과대, 제한으로 OOM Kill</td></tr><tr><td>보안/감사</td><td>cred/LSM/FD</td><td>최소권한·파일디스크립터 감사·비밀키 권한</td><td>권한 상속 체인, FD 누수</td></tr><tr><td>장애분석/관측</td><td>상태·FD·트레이스</td><td><code>/proc/&lt;pid></code>, perf/eBPF, 코어덤프</td><td>프로덕션 오버헤드, PII 로그 주의</td></tr><tr><td>고지연 이벤트</td><td>IPC·시그널</td><td>시그널 폭주, 파이프 백프레셔</td><td>Rate-limit, backpressure 설계</td></tr></tbody></table><ul><li><strong>지연·폭주·보안·관측</strong> 문제는 대부분 PCB 필드 (스케줄/자원/FD/cred) 에서 실마리를 찾고, **정책 (cgroups/우선순위/NUMA)**으로 제어한다.</li></ul><h4 id=pcb프로세스-제어-블록-vs-tcb스레드-제어-블록-비교>PCB(프로세스 제어 블록) vs. TCB(스레드 제어 블록) 비교<a hidden class=anchor aria-hidden=true href=#pcb프로세스-제어-블록-vs-tcb스레드-제어-블록-비교>#</a></h4><table><thead><tr><th>구분</th><th>PCB(프로세스 제어 블록)</th><th>TCB(스레드 제어 블록)</th><th>실무 적용 포인트</th></tr></thead><tbody><tr><td>관리 단위</td><td>프로세스 전체</td><td>프로세스 내 개별 스레드</td><td>멀티스레드 프로그램 최적화</td></tr><tr><td>포함 정보</td><td>PID(프로세스 ID), 메모리 맵, 열린 파일 목록, 스케줄링 정보, CPU 상태 등</td><td>스레드 ID, 프로그램 계수기, 레지스터, 스택 포인터 등</td><td>PCB+TCB 를 함께 관리해야 고성능 멀티스레딩 가능</td></tr><tr><td>생성 시점</td><td>프로세스 생성 시</td><td>스레드 생성 시</td><td>서버 환경에서 다중 클라이언트 요청 처리</td></tr><tr><td>메모리 위치</td><td>커널 공간 (Kernel Space)</td><td>커널 또는 사용자 공간 (구현에 따라)</td><td>커널 보안 설정 필수</td></tr><tr><td>변경 영향</td><td>프로세스 전체 동작 영향</td><td>해당 스레드 동작에만 영향</td><td>장애 격리 및 복구 전략 설계</td></tr></tbody></table><h4 id=pcb-와-프로세스-테이블-process-table-의-관계>PCB 와 프로세스 테이블 (Process Table) 의 관계<a hidden class=anchor aria-hidden=true href=#pcb-와-프로세스-테이블-process-table-의-관계>#</a></h4><ul><li><strong>프로세스 테이블 (Process Table)</strong>: 모든 PCB 를 저장하는 커널 내부의 전역 자료구조.</li><li><strong>관계</strong>: PCB 는 프로세스별 관리 정보이며, 이 PCB 들이 집합 형태로 프로세스 테이블을 구성.</li><li><strong>실무 활용 예시</strong>: 시스템 모니터링 도구 (<code>ps</code>, <code>top</code>) 가 프로세스 테이블의 내용을 읽어 출력.</li></ul><h3 id=기초-개념-foundation-understanding>기초 개념 (Foundation Understanding)<a hidden class=anchor aria-hidden=true href=#기초-개념-foundation-understanding>#</a></h3><h4 id=개념-정의-및-본질적-이해>개념 정의 및 본질적 이해<a hidden class=anchor aria-hidden=true href=#개념-정의-및-본질적-이해>#</a></h4><p>컴퓨터가 여러 프로그램을 번갈아 실행하려면 " 어디까지 했는지, 어떤 자원을 쓰는지 " 기억해야 한다. 이 메모장이 <strong>PCB</strong>이다. 운영체제는 A 프로그램을 멈출 때 A 의 PCB 에 <strong>상태를 저장</strong>하고, B 프로그램을 실행할 때 B 의 PCB 에서 <strong>상태를 복원</strong>해 이어서 실행한다. 그래서 여러 프로그램이 동시에 도는 것처럼 보인다.</p><table><thead><tr><th>구분</th><th>내용</th><th>목적/효과</th><th>비고</th></tr></thead><tbody><tr><td>정체성 (Identification)</td><td>PID, PPID, PGID, 세션</td><td>프로세스 추적·그룹 관리</td><td>작업 제어·시그널 전파 단위</td></tr><tr><td>실행 상태 (State)</td><td>new/ready/running/blocked/terminated</td><td>스케줄러 의사결정 근거</td><td>상태 전이는 이벤트·타이머로 유발</td></tr><tr><td>스케줄링 정보 (Scheduling)</td><td>우선순위, 정책 (CFS/RT 등), 타임슬라이스</td><td>공정성·응답성·기아 방지</td><td>Affinity/NUMA 힌트 포함 가능</td></tr><tr><td>CPU 문맥 (CPU Context)</td><td>PC, SP, 일반/상태 레지스터, (필요 시)FPU/SIMD</td><td>정확한 재개 보장</td><td>고가 레지스터 지연 저장 최적화</td></tr><tr><td>메모리 컨텍스트 (Memory)</td><td>주소공간/페이지 테이블 포인터</td><td>격리·보호·주소변환</td><td>리눅스 <code>mm_struct</code> 등</td></tr><tr><td>핸들/리소스 (Resources)</td><td>FD 테이블, 열려있는 파일/소켓/디바이스</td><td>I/O 연속성 보장</td><td>누수 방지·정상 종료에 필요</td></tr><tr><td>신호/이벤트 (Signal)</td><td>핸들러, 마스크, 대기 신호</td><td>비동기 이벤트 처리</td><td>kill/알람/타임아웃 처리</td></tr><tr><td>보안/권한 (Credential)</td><td>UID/GID/Capabilities</td><td>최소 권한·감사</td><td>컨테이너 격리와도 연결</td></tr><tr><td>회계/타이머 (Accounting)</td><td>CPU 시간, 누적 I/O, 타임스탬프</td><td>과금·모니터링·스케줄링 피드백</td><td>O11y 지표 기초</td></tr></tbody></table><ul><li>PCB 는 <strong>실행·자원·보안·스케줄링</strong>을 아우르는 커널의 단일 진실 저장소 (Single Source of Truth) 로, 문맥 전환과 스케줄링의 품질을 좌우한다.</li></ul><h4 id=등장-배경-및-발전-과정>등장 배경 및 발전 과정<a hidden class=anchor aria-hidden=true href=#등장-배경-및-발전-과정>#</a></h4><p>여러 작업을 번갈아 돌려야 하는 멀티프로그래밍·시분할 시대가 오자, 운영체제는 " 각 작업의 현재 상태와 소유 자원 " 을 잃지 않고 중단·재개하기 위한 <strong>기록 카드</strong>가 필요했고, 그것이 <strong>PCB</strong>다.</p><p>1970 년대 유닉스에서 <strong>PID·상태·신호</strong> 등 기본 필드가 자리 잡으며 스케줄링과 컨텍스트 스위칭이 체계화됐다.<br>1990 년대엔 멀티코어·멀티스레딩 확산으로 **스레드 제어 블록 (TCB)**이 분리되고, <strong>FPU/레지스터</strong> 같은 컨텍스트가 확대됐다.<br>2000 년대 <strong>64 비트·가상화</strong>로 주소공간·스케줄러가 고도화됐고, 2010 년대 <strong>컨테이너</strong> 환경에선 PCB 가 **네임스페이스·cgroups·자격 (cred)**과 연결돼 격리·자원한도를 집행한다.<br>최근엔 <strong>seccomp/eBPF</strong>와 <strong>SIMD/가속기 컨텍스트</strong>까지 관리 범위가 넓어지며 보안·관측성이 강화됐다.</p><h5 id=등장-배경>등장 배경<a hidden class=anchor aria-hidden=true href=#등장-배경>#</a></h5><ul><li><p><strong>문제</strong>: 단일 실행 시대엔 불필요했지만, <strong>멀티프로그래밍/시분할</strong>이 오면서 여러 작업을 동시에 메모리에 올리고 공정·안전하게 돌려야 했음.</p></li><li><p><strong>해결</strong>: 각 프로세스의 <strong>상태, 레지스터, 메모리, 열린 파일, 자격증명</strong> 등을 <strong>PCB</strong>에 표준화해 저장 → <strong>컨텍스트 스위칭·스케줄링·보호·관측</strong>이 가능해짐.</p></li></ul><h5 id=발전-과정>발전 과정<a hidden class=anchor aria-hidden=true href=#발전-과정>#</a></h5><table><thead><tr><th>시기</th><th>배경/필요성 (문제)</th><th>핵심 변화 (추가·개선)</th><th>무엇이 좋아졌나 (효과)</th><th>대표 키워드</th></tr></thead><tbody><tr><td>1960s</td><td>배치→멀티프로그래밍 초기—여러 작업 동시 관리 필요</td><td>작업/프로세스 제어 블록 원형 도입, 기본 상태 저장</td><td>기초적 <strong>중단·재개</strong> 가능</td><td>작업 제어, 상태 코드</td></tr><tr><td>1970s</td><td>시분할·UNIX 확산—대화형 사용자 다수</td><td><strong>PCB</strong> 개념 정착, <strong>PID/프로세스 상태/신호</strong></td><td><strong>스케줄링·신호 처리</strong> 표준화</td><td>UNIX, PID, signal</td></tr><tr><td>1980s</td><td>워크스테이션/네트워크—프로세스 관계 관리</td><td><strong>트리/세션/그룹</strong>, 파일·메모리 포인터 체계화</td><td><strong>자원 추적</strong>·부모/자식 관리 개선</td><td>프로세스 트리, VFS</td></tr><tr><td>1990s</td><td><strong>SMP·멀티스레딩</strong> 보편</td><td><strong>TCB 분리</strong>, 컨텍스트에 <strong>FPU</strong> 등 포함</td><td>스레드 단위 <strong>동시성·성능</strong> 향상</td><td>TCB, SMP, FPU</td></tr><tr><td>2000s</td><td><strong>64 비트·가상화</strong> 대중화</td><td>주소공간 확대, <strong>스케줄러 클래스</strong>(CFS/RT)</td><td>대규모 메모리·다양한 워크로드 <strong>공정성</strong> 확보</td><td>64-bit, CFS/RT</td></tr><tr><td>2010s</td><td><strong>클라우드·컨테이너</strong> 시대</td><td><strong>namespaces·cgroups·cred</strong> 링크</td><td><strong>격리·자원한도·멀티테넌시</strong> 강화</td><td>OCI, cgroups</td></tr><tr><td>2020s~</td><td><strong>보안·관측성·가속기</strong> 요구</td><td><strong>seccomp/eBPF</strong>, AVX/TLS 등 컨텍스트 확대</td><td><strong>정교한 방어·관측</strong>, 이기종 가속기 연계</td><td>eBPF, seccomp, AVX</td></tr></tbody></table><pre class=mermaid>timeline
    title PCB 발전 타임라인
    1960s : 배치-멀티프로그래밍 초기 : 제어블록 원형-상태 저장
    1970s : 시분할-유닉스 확산 : PCB 정착-PID-신호
    1980s : 워크스테이션-네트워크 : 프로세스 트리-자원 포인터 체계화
    1990s : 멀티스레딩-SMP : TCB 분리-FPU 컨텍스트 확대
    2000s : 64비트-가상화 : 주소공간 확대-스케줄러 클래스
    2010s : 클라우드-컨테이너 : 네임스페이스-cgroups-cred
    2020s~ : 보안-관측성-가속기 : eBPF-seccomp-확장 레지스터
</pre><ul><li>PCB 는 &ldquo;<strong>중단 지점 복원 + 자원·보안·스케줄링 메타데이터 집합</strong>&rdquo; 으로 시작해, 스레드·가상화·컨테이너·보안·관측성 요구를 흡수하며 <strong>범위가 넓어지고 정밀해졌다</strong>.</li></ul><h4 id=핵심-목적-및-필요성>핵심 목적 및 필요성<a hidden class=anchor aria-hidden=true href=#핵심-목적-및-필요성>#</a></h4><p>PCB 는 **운영체제의 " 프로세스 관리 카드 &ldquo;**이다.<br>컴퓨터 안에서는 여러 프로그램이 동시에 실행되는데, 운영체제가 이를 혼동 없이 다루려면 각 프로그램의 <strong>이름표 (PID)</strong>, <strong>지금 하고 있는 일</strong>, <strong>사용 중인 도구 (메모리·파일)</strong>, <strong>다음에 실행할 순서</strong>, <strong>보안 규칙</strong> 등을 기억해야 한다.<br>PCB 는 이 모든 정보를 한 곳에 모아두어 CPU 가 프로그램을 바꿔 실행할 때도 <strong>끊김 없이 이어서</strong> 실행할 수 있게 하고, <strong>자원 충돌과 보안 문제를 예방</strong>한다.</p><table><thead><tr><th>핵심 목적</th><th>해결하는 문제</th><th>방식</th><th>개선 효과</th></tr></thead><tbody><tr><td>프로세스 식별 및 추적</td><td>다수 프로세스 구분 어려움</td><td>PID·메타데이터 부여</td><td>관리 용이, 충돌 방지</td></tr><tr><td>컨텍스트 스위칭 지원</td><td>상태 손실·중단 후 재개 불가</td><td>레지스터·PC·스택 포인터 저장·복원</td><td>연속성·안정성 확보</td></tr><tr><td>자원 관리 및 충돌 방지</td><td>메모리·파일·네트워크 경합</td><td>자원 사용 상태 추적·제어</td><td>누수·충돌 방지</td></tr><tr><td>보안성·격리 보장</td><td>무단 접근·데이터 침범</td><td>권한·메모리 보호 정보 유지</td><td>보안 강화, 안정성 향상</td></tr><tr><td>운영 지원</td><td>장애 분석·성능 튜닝 어려움</td><td>회계·디버깅 정보 제공</td><td>복구·최적화 용이</td></tr></tbody></table><p>PCB 는 운영체제가 프로세스를 식별·상태 저장·자원 관리·보안·운영 지원을 <strong>중앙에서 수행</strong>하게 해 주는 구조다. 이를 통해 <strong>안정적인 멀티태스킹</strong>, <strong>효율적인 자원 사용</strong>, <strong>높은 보안성</strong>을 실현한다.</p><h4 id=주요-특징-및-차별점>주요 특징 및 차별점<a hidden class=anchor aria-hidden=true href=#주요-특징-및-차별점>#</a></h4><p>PCB 는 <strong>프로세스의 신분증 + 현재 상태표 + 사용 자원표</strong>이다.<br>운영체제는 이 표를 보고 <strong>누구인지 (식별/권한), 어디까지 실행했는지 (레지스터/PC), 무엇을 쓰는지 (FD/메모리/CPU 한도)</strong> 를 판단해 CPU 를 배분하고, 중단 지점에서 정확히 이어서 실행시킨다.<br>그래서 <strong>성능 (스케줄링)</strong>, <strong>안정성/보안 (권한·격리)</strong>, **장애분석 (관측성)**이 전부 PCB 에 달려 있다.</p><table><thead><tr><th>특징</th><th>설명</th><th>기술적 근거 (커널 메커니즘)</th><th>관련 기술/차별점</th><th>실무 포인트</th></tr></thead><tbody><tr><td>커널 공간 상주</td><td>PCB 는 커널 메모리에 상주, 사용자 접근 불가</td><td>커널/유저 공간 분리, 페이지 보호</td><td>사용자 공간 태스크 레코드/코루틴과 대비 (보호 수준↑)</td><td>크래시·오용으로부터 핵심 메타 보호</td></tr><tr><td>고유 식별/수명 연동</td><td>PID 와 1:1, 생성·종료 시 동적 할당/해제</td><td><code>fork/exec</code>·<code>CreateProcess</code> 경로</td><td>스레드 (TID) 와 구분</td><td>누수 방지 (좀비 수거), PID 재사용 주의</td></tr><tr><td>컨텍스트 스위칭 핵심</td><td>레지스터/PC/스택·스케줄 정보 저장/복원</td><td>프리엠션, 인터럽트, 스핀락/RCU 보호</td><td>TCB(스레드 전환) 보다 주소공간 전환 비용↑</td><td>P99 지연·캐시/TLB 영향 관리</td></tr><tr><td>상태 기반 스케줄링</td><td>상태/클래스별 큐 연결로 공정성·실시간 보장</td><td>CFS(RB-tree), RT(FIFO/RR/Deadline)</td><td>사용자 수준 스케줄러와 대비</td><td>대화형/배치/RT 워크로드 별 정책</td></tr><tr><td>보안·자원 메타</td><td>cred/cap/LSM, cgroups/limits, FD</td><td>LSM 훅, capabilities, cgroups v2</td><td>컨테이너 메타는 정책, 집행은 PCB</td><td>멀티테넌시 격리·과금·폭주 방지</td></tr><tr><td>관계/그룹/시그널</td><td>PPID/PGID/세션·시그널 전파</td><td>프로세스 트리·잡컨트롤</td><td>스레드는 내부 공유·전파 범위 상이</td><td>그레이스풀 종료/전파 제어</td></tr><tr><td>메모리 맵/보호</td><td>주소공간/VMA/페이지 권한 (rwx)</td><td><code>mm_struct</code>, 페이지 테이블</td><td>스레드는 주소공간 공유</td><td>OOM/페이지 폴트·권한 오류 분석 핵심</td></tr><tr><td>핸들/FD 테이블</td><td>열려있는 파일·소켓·파이프 목록</td><td><code>files_struct</code>, 핸들 테이블</td><td>스레드와 공유/상속 규칙 차이</td><td>FD 누수·I/O 병목 진단 축</td></tr></tbody></table><ul><li>PCB 는 스케줄링·보안·자원·관측의 <strong>단일 진실 원천 (Single Source of Truth)</strong> 이며, 컨텍스트 스위칭과 정책 집행의 기준점.</li></ul><h3 id=핵심-원리-core-theory>핵심 원리 (Core Theory)<a hidden class=anchor aria-hidden=true href=#핵심-원리-core-theory>#</a></h3><h4 id=핵심-설계-원칙-및-철학>핵심 설계 원칙 및 철학<a hidden class=anchor aria-hidden=true href=#핵심-설계-원칙-및-철학>#</a></h4><p>&ldquo;<strong>PCB 는 운영체제가 &rsquo; 실행 중인 것 &rsquo; 을 기억하는 핵심 카드</strong>&rdquo; 라고 보면 된다.</p><ul><li>이 카드는 <strong>커널만</strong> 만질 수 있고, 카드 안에는 " 지금 어디까지 실행했는지 (레지스터)&rdquo;, " 어떤 메모리를 쓰는지 (mm)", " 누구 자식인지/우선순위는?(스케줄링)" 같은 <strong>최소 필수 정보</strong>가 든다.</li><li>CPU 가 다른 일을 하려면 이 카드를 잠깐 <strong>저장/교체</strong>해야 하므로, <strong>최대한 가볍게</strong> 만드는 게 성능에 이롭다.</li><li>하드웨어가 달라도 (ARM, x86) 의미는 같게 유지하고, 생성부터 종료까지 <strong>한 장의 카드</strong>로 모든 단계를 추적한다.</li><li>공정한 CPU 나눔과 격리/보안을 위해 스케줄러·네임스페이스·cgroups·권한 정보와 <strong>잘 맞물리도록</strong> 설계되어 있다.</li></ul><table><thead><tr><th>원칙</th><th>목적</th><th>왜 필요한가</th><th>구현/예시</th></tr></thead><tbody><tr><td>커널 소유·무결성</td><td>보안·안정성</td><td>사용자 공간 변조 차단, 일관성 유지</td><td>PCB 는 커널 메모리, 사용자 공간은 <code>/proc</code> 등 간접 접근</td></tr><tr><td>필수 컨텍스트 최소화</td><td>컨텍스트 스위치 비용 최소화</td><td>저장/복원 데이터가 많을수록 느려짐</td><td>최소 레지스터 + 포인터 저장, FPU/SIMD 는 XSAVE/FPSIMD 정책</td></tr><tr><td>플랫폼 적응성</td><td>이식성</td><td>ISA 별 컨텍스트 요소·규칙 상이</td><td><code>switch_to</code> 아키 훅, XSAVE/PCID, ARM FPSIMD 관리</td></tr><tr><td>수명주기 결합</td><td>전 과정 추적</td><td>상태 전이·대기·종료·좀비 수거</td><td>태스크 상태·링크·타임 계정 필드 일원화</td></tr><tr><td>스케줄러 친화성</td><td>공정성/성능 목표 달성</td><td>스케줄러가 동일 형식의 메타데이터 사용</td><td>정책/우선순위/vruntime/affinity 필드, CFS 설계</td></tr><tr><td>완전성↔최소성 균형</td><td>메모리/성능 균형</td><td>과잉 저장은 낭비, 과소 저장은 복원 불가</td><td><code>mm_struct</code>·<code>cred</code> 등 포인터 결합로 외부 자원 보관</td></tr><tr><td>원자성·동시성 안전</td><td>레이스·깨짐 방지</td><td>멀티코어·프리엠션 환경 필수</td><td>스핀락/RCU, 태스크 리스트 RCU 순회·지연 해제</td></tr><tr><td>접근성·관측가능성</td><td>운영·디버깅</td><td>공정 스케줄링/분석 근거</td><td><code>utime/stime</code>·I/O accounting, <code>/proc</code> 노출</td></tr><tr><td>확장성·호환성</td><td>컨테이너/보안/리소스 제어</td><td>기능 추가 시 기존 구조 보존</td><td><code>cred</code>(LSM)·<code>nsproxy</code>(namespace)·cgroups 연계</td></tr></tbody></table><ul><li>PCB 는 <strong>커널만</strong> 만진다 → 안전.</li><li>교환은 <strong>가볍게</strong> 한다 → 성능.</li><li>CPU·OS 가 달라도 <strong>같은 의미</strong>를 유지 → 이식성.</li><li>생성부터 종료까지 <strong>한 장으로 추적</strong> → 관리 용이.</li><li>스케줄러/보안/컨테이너와 <strong>잘 맞물린다</strong> → 확장성.</li><li>동시성은 <strong>락·RCU</strong>로 지킨다 → 일관성.</li><li>운영을 위해 <strong>측정값을 기본 제공</strong> → 관측 가능.</li></ul><h4 id=기본-원리-및-동작-메커니즘>기본 원리 및 동작 메커니즘<a hidden class=anchor aria-hidden=true href=#기본-원리-및-동작-메커니즘>#</a></h4><ul><li><strong>PCB 는 " 프로세스의 신분증 + 링크 모음 &ldquo;</strong>: 프로세스가 어떤 메모리·파일·권한을 쓰는지 한곳에 모아 둔 레코드.</li><li><strong>태스크 생성 시 PCB 도 함께 생성</strong>, 종료 시 폐기.</li><li><strong>스케줄러가 PCB 를 읽고</strong> 누가 CPU 를 쓸지 결정.</li><li><strong>문맥교환 (Context Switching) 은 &rsquo; 일시정지 - 기록 - 재개 &lsquo;</strong>: 지금 태스크 상태를 저장하고, 다음 태스크 상태를 복원해 실행.</li></ul><h5 id=기본-원리>기본 원리<a hidden class=anchor aria-hidden=true href=#기본-원리>#</a></h5><table><thead><tr><th>구분</th><th>내용</th></tr></thead><tbody><tr><td>PCB 의 정체</td><td>Linux 의 PCB 는 <code>task_struct</code> 이며, 자원 구조체를 포인터로 참조 (<code>mm_struct</code>, 파일, 신호, <code>cred</code> 등)</td></tr><tr><td>생성/복제</td><td><code>fork()</code>/<code>clone()</code> 로 태스크 생성, COW 로 효율적 복제, 고유 <code>task_struct</code> 생성</td></tr><tr><td>스케줄링 정책</td><td>CFS(일반), RT(<code>SCHED_FIFO</code>/<code>SCHED_RR</code>), <code>SCHED_DEADLINE</code> 지원</td></tr><tr><td>정책 제어</td><td><code>sched_setscheduler(2)</code> 등으로 스레드/프로세스의 정책·우선순위 설정</td></tr><tr><td>컨텍스트 저장</td><td>인터럽트/시스템콜로 커널 진입 시 <strong>레지스터는 커널 스택에 저장</strong>, PC 는 스택 복귀주소로 관리</td></tr><tr><td>컨텍스트 복원</td><td><code>schedule()</code>→<code>context_switch()</code>→<code>switch_to()</code> 경로로 다음 태스크 레지스터·스택·주소공간 복원</td></tr><tr><td>관찰</td><td><code>/proc/[pid]/status</code>, <code>/proc/[pid]/stat</code> 로 상태/자원 확인</td></tr></tbody></table><ul><li>PCB 는 거대한 구조체 하나에 모든 걸 " 담아두는 " 게 아니라, <strong>핵심 포인터 집합</strong>으로 다른 자원 구조체들과 연결된다.</li><li>복제는 비싼 전체 복사가 아니라 <strong>COW 전략</strong>으로 빠르고 가볍다.</li><li>스케줄러는 <strong>정책 별 클래스 (CFS/RT/DEADLINE)</strong> 로 우선순위와 시간분배를 결정한다.</li><li>컨텍스트 스위칭은 <strong>커널 스택 중심의 저장/복원</strong>이며, 아키텍처 의존부는 <code>switch_to()</code> 가 처리한다.</li></ul><h5 id=동작-메커니즘>동작 메커니즘<a hidden class=anchor aria-hidden=true href=#동작-메커니즘>#</a></h5><pre class=mermaid>sequenceDiagram
    participant App as 사용자 코드
    participant CPU as CPU 코어
    participant K as 커널
    participant SA as 현재 태스크 PCB(task_struct A)
    participant SB as 다음 태스크 PCB(task_struct B)

    App-&gt;&gt;CPU: 실행 중
    CPU--&gt;&gt;K: 타이머 인터럽트/시스템콜 발생
    K-&gt;&gt;K: schedule() 호출 및 스케줄링 결정
    K-&gt;&gt;SA: 현재 레지스터를 커널 스택에 저장(PC는 스택 반환주소)
    K-&gt;&gt;K: context_switch() → switch_to(prev=A, next=B)
    K-&gt;&gt;SB: B의 주소공간(mm) 전환/레지스터·스택 복원
    CPU--&gt;&gt;App: 태스크 B 사용자/커널 모드로 실행 재개
</pre><ul><li><strong>커널 진입 지점</strong>에서 현재 레지스터 셋이 <strong>커널 스택</strong>에 저장된다.</li><li>스케줄러가 다음 실행 태스크를 고른 뒤 <code>context_switch()</code> 가 <strong>주소공간 (TLB 포함)</strong> 과 <strong>레지스터/스택</strong>을 바꾸고, <code>switch_to()</code> 가 아키텍처별 레지스터 전환을 처리한다.</li><li><strong>PC(EIP/RIP)</strong> 는 PCB 에 따로 저장해 두는 필드가 아니라 <strong>스택에 있는 복귀주소</strong>로 자연스럽게 이어진다.</li></ul><h4 id=아키텍처-및-구성-요소>아키텍처 및 구성 요소<a hidden class=anchor aria-hidden=true href=#아키텍처-및-구성-요소>#</a></h4><p>PCB 는 " 프로세스를 다시 실행시키기 위해 필요한 모든 최소 정보의 묶음 " 이다.<br>핵심은 <strong>누구인지 (PID)</strong>, <strong>지금 어디까지 했는지 (CPU 컨텍스트)</strong>, <strong>언제 CPU 를 다시 줄지 (스케줄링 정보)</strong>, <strong>무슨 메모리를 쓰는지 (<code>mm_struct</code>)</strong>, <strong>누구 권한으로 실행되는지 (<code>cred</code>)</strong>, <strong>어떤 신호를 어떻게 받을지 (시그널/핸들러)</strong> 이 여섯 가지다.<br>파일 테이블·네임스페이스·CGroup·통계는 <strong>필요할 때 붙는 확장 카드</strong>라고 보면 된다.</p><pre class=mermaid>graph TD
  subgraph Runtime[&#34;태스크(=PCB/task_struct)&#34;]
    T[task_struct]
    T --&gt; PID[PID/State/Flags]
    T --&gt; SCHED[&#34;Scheduling&lt;br/&gt;(policy/prio,&lt;br/&gt;sched_entity)&#34;]
    T --&gt; CTX[&#34;CPU Context&lt;br/&gt;(PC/SP/Registers)&#34;]
    T --&gt; MM[&#34;mm_struct&lt;br/&gt;(VMA/PGD)&#34;]
    T --&gt; SIG[&#34;signal_struct /&lt;br/&gt;sighand_struct&#34;]
    T --&gt; CRED[&#34;cred&lt;br/&gt;(UID/GID/LSM)&#34;]
    T -. 선택 .-&gt; FILES[&#34;files_struct&lt;br/&gt;(FD table)&#34;]
    T -. 선택 .-&gt; NS[&#34;nsproxy&lt;br/&gt;(namespaces)&#34;]
    T -. 선택 .-&gt; CG[&#34;cgroup link&lt;br/&gt;(css_set)&#34;]
    T -. 선택 .-&gt; ACC[&#34;acct/stats&lt;br/&gt;(utime/stime,&lt;br/&gt;nvcsw/nivcsw)&#34;]
  end

  %% 스케줄링 관계
  SCHED --&gt; RQ[&#34;per-CPU runqueue (rq)&#34;]
  RQ --&gt;|pick next| T

  %% 스레드 공유
  subgraph Shared[&#34;스레드 간 공유 예&#34;]
    T2[&#34;task_struct(thread A)&#34;]
    T3[&#34;task_struct(thread B)&#34;]
  end
  T2 --- MM
  T3 --- MM
  T2 --- FILES
  T3 --- FILES
  T2 --- SIG
  T3 --- SIG
  T2 --- CRED
  T3 --- CRED

  %% 커널 스레드의 active_mm
  KTHR[&#34;task_struct(kernel thread)&#34;]
  KTHR -.-&gt; AMM[&#34;active_mm (borrowed)&#34;]
  AMM -.-&gt; MM
</pre><ul><li><strong>태스크 본체 (<code>task_struct</code>)</strong> 가 <strong>식별·상태</strong>, <strong>스케줄링 정보</strong>, <strong>CPU 컨텍스트</strong>, <strong>주소공간 포인터</strong>, <strong>시그널</strong>, <strong>자격증명</strong>을 핵심 축으로 가진다. 스케줄러는 <code>sched_entity</code> 를 통해 태스크를 <strong>CPU 별 런큐</strong>에 넣고 다음 실행 대상을 선택한다.</li><li><strong>스레드 모델</strong>: 동일 프로세스의 스레드들은 <code>mm/files/sighand/cred</code> 를 <strong>공유</strong>하여 생성·전환 비용을 줄인다.</li><li><strong>커널 스레드</strong>는 고유의 사용자 주소공간이 없어 <code>mm==NULL</code> 이며, 실행 시 <strong><code>active_mm</code></strong> 로 기존 사용자 주소공간을 빌린다.</li><li>선택 요소 (파일 테이블, 네임스페이스, CGroup, 회계) 는 <strong>필요 시 연결</strong>되어 격리·정책·관측 기능을 보강한다.</li></ul><h5 id=구성-요소>구성 요소<a hidden class=anchor aria-hidden=true href=#구성-요소>#</a></h5><table><thead><tr><th>구성 요소</th><th>주요 필드/구조체 예</th><th>핵심 역할</th><th>대표 동작/흐름</th></tr></thead><tbody><tr><td>식별/상태</td><td><code>pid</code>, <code>state</code>, <code>flags</code></td><td>태스크 관리의 기준</td><td>생성·종료·정지/재개 판정.</td></tr><tr><td>스케줄링</td><td><code>policy</code>, <code>prio</code>, <code>sched_entity</code>, <code>rq</code></td><td>CPU 시간 배분</td><td>런큐 삽입→선정→타임슬라이스 소진/선점.</td></tr><tr><td>CPU 컨텍스트</td><td><code>thread_struct</code> 등 아키텍처별</td><td>실행 지점 보존/복원</td><td><code>switch_to()</code> 에서 레지스터 저장·복원.</td></tr><tr><td>주소공간</td><td><code>mm_struct{vmas, pgd}</code></td><td>가상메모리·보호</td><td>VMA 탐색, <code>pgd</code> 로 페이지 테이블 전환.</td></tr><tr><td>시그널</td><td><code>signal_struct</code>, <code>sighand_struct</code></td><td>비동기 이벤트 처리</td><td>유저복귀 시 <strong>핸들러 프레임</strong> 구성·실행.</td></tr><tr><td>자격증명</td><td><code>cred</code></td><td>권한·보안 정책</td><td>UID/GID/LSM 라벨 비교·검사.</td></tr><tr><td>파일 테이블</td><td><code>files_struct</code></td><td>FD→파일 개체 매핑</td><td><code>CLONE_FILES</code> 공유·복제, 락/RCU 로 보호.</td></tr><tr><td>네임스페이스</td><td><code>nsproxy</code></td><td>자원 격리 (컨테이너)</td><td>PID/NET/MNT/UTS 등 분리된 뷰 제공.</td></tr><tr><td>CGroup</td><td>css_set 링크 등</td><td>정책적 자원 제한/회계</td><td>v2 단일 계층, 컨트롤러별 제한.</td></tr><tr><td>회계/통계</td><td><code>/proc/*</code>, <code>utime/stime</code>, <code>nvcsw</code></td><td>관측/튜닝</td><td>상태·컨텍스트 스위치 수 확인.</td></tr></tbody></table><ul><li><strong>필수 코어 (식별/상태·스케줄링·컨텍스트·주소공간·시그널·자격증명)</strong> 만으로도 <strong>프로세스를 재개</strong>할 수 있다.</li><li><strong>선택 모듈 (파일·네임스페이스·CGroup·회계)</strong> 은 <strong>확장성·격리·운영가시성</strong>을 제공한다.</li><li>스레드 공유 구조 덕분에 <strong>경량 병렬</strong>이 가능하며, CGroup/네임스페이스로 <strong>멀티테넌시 안정성</strong>을 얻는다.</li></ul><h4 id=주요-기능과-역할>주요 기능과 역할<a hidden class=anchor aria-hidden=true href=#주요-기능과-역할>#</a></h4><p>PCB 는 운영체제 커널이 <strong>각 프로세스를 관리하기 위해 유지하는 데이터 묶음</strong>이다.<br>여기에는 프로세스의 ID, 현재 실행 위치, 사용하는 자원, 스케줄링 정보, 보안 설정 등이 저장된다.<br>쉽게 말해, PCB 는 프로세스를 " 이름표 붙이고, 상태 기록하고, 필요한 도구를 챙겨주는 개인 비서 " 와 같다.<br>PCB 덕분에 운영체제는 수많은 프로세스를 동시에 안전하고 효율적으로 관리할 수 있다.</p><table><thead><tr><th>기능</th><th>담당 구성 요소</th><th>역할</th><th>개선/해결 효과</th></tr></thead><tbody><tr><td>프로세스 식별 관리</td><td><code>pid</code>, <code>tgid</code>, <code>nsproxy</code></td><td>프로세스·스레드 식별, 관계·네임스페이스 관리</td><td>충돌 방지, 추적 용이</td></tr><tr><td>실행 컨텍스트 관리</td><td><code>thread_struct</code>, <code>mm_struct</code></td><td>CPU 상태 보존·복원, 메모리·코드 실행 위치 추적</td><td>효율적인 문맥 교환, 실행 연속성 보장</td></tr><tr><td>자원 관리 및 회계</td><td><code>files_struct</code>, <code>signal_struct</code></td><td>파일, 메모리, 시그널 관리, 사용량 측정</td><td>자원 낭비 방지, 사용량 제한 가능</td></tr><tr><td>스케줄링 정보 유지</td><td><code>sched_entity</code></td><td>우선순위·정책 (CFS/RT)·런큐 관리</td><td>공정성 확보, 응답성 향상</td></tr><tr><td>보안/격리</td><td><code>cred</code>, <code>seccomp</code></td><td>권한, 시그널 마스킹, 네임스페이스 격리</td><td>무단 접근 차단, 멀티테넌시 안전성</td></tr><tr><td>시스템 상호작용</td><td>PCB 전반</td><td>커널 서브시스템과 데이터 교환·제어</td><td>통합 관리, 모니터링 가능</td></tr></tbody></table><p>PCB 는 <strong>프로세스 식별·상태 유지·자원 관리·스케줄링·보안·시스템 연계</strong>의 모든 기능을 하나의 구조체 (<code>task_struct</code>) 에서 관리한다.<br>각 기능은 커널 내부의 특정 구조체 필드에 의해 구현되며, 이를 통해 운영체제는 효율성·안정성·보안성을 동시에 달성한다.</p><pre class=mermaid>graph TB
    %% =========================
    %% 상위 개념
    %% =========================
    subgraph PCB[&#34;PCB (struct task_struct)&#34;]
      PCBnode[task_struct]
    end

    subgraph 기능[&#34;기능&#34;]
      ID[&#34;식별 관리&#34;]
      CTX[&#34;실행 컨텍스트 관리&#34;]
      RES[&#34;자원 관리·회계&#34;]
      SCHED[&#34;스케줄링 정보 유지&#34;]
      SEC[&#34;보안·격리&#34;]
    end

    subgraph 구성요소[&#34;구성 요소 (주요 커널 구조체/필드)&#34;]
      PIDNS[&#34;pid / tgid / nsproxy&#34;]
      THR[&#34;thread_struct&#34;]
      MM[&#34;mm_struct / active_mm&#34;]
      FILES[&#34;files_struct&#34;]
      SIG[&#34;signal_struct&#34;]
      SE[&#34;sched_entity&#34;]
      CRED[&#34;cred&#34;]
      SECCOMP[&#34;seccomp&#34;]
    end

    subgraph 서브시스템[&#34;연관 커널 서브시스템&#34;]
      SCHEDULER[&#34;스케줄러(CFS/RT)&#34;]
      MEM[&#34;메모리 관리자&#34;]
      VFS[&#34;파일 시스템(VFS)&#34;]
      SIGMGR[&#34;시그널 관리자&#34;]
      SECSS[&#34;보안 서브시스템&#34;]
      PROCFS[&#34;/proc 인터페이스&#34;]
    end

    subgraph 효과[&#34;효과(개선·해결)&#34;]
      EFF[&#34;효율성(문맥교환/CPU 활용)&#34;]
      REL[&#34;안정성(충돌·고갈 방지)&#34;]
      SAFE[&#34;보안성(격리·권한)&#34;]
      OBS[&#34;관측 가능성(모니터링)&#34;]
    end

    %% =========================
    %% PCB -&gt; 기능
    %% =========================
    PCBnode --&gt; ID
    PCBnode --&gt; CTX
    PCBnode --&gt; RES
    PCBnode --&gt; SCHED
    PCBnode --&gt; SEC

    %% =========================
    %% 기능 -&gt; 구성요소
    %% =========================
    ID --&gt; PIDNS
    CTX --&gt; THR
    CTX --&gt; MM
    RES --&gt; MM
    RES --&gt; FILES
    RES --&gt; SIG
    SCHED --&gt; SE
    SEC --&gt; CRED
    SEC --&gt; SECCOMP
    SEC --&gt; PIDNS

    %% =========================
    %% 구성요소 &lt;-&gt; 서브시스템
    %% =========================
    SE &lt;--&gt; SCHEDULER
    MM &lt;--&gt; MEM
    FILES &lt;--&gt; VFS
    SIG &lt;--&gt; SIGMGR
    CRED &lt;--&gt; SECSS
    SECCOMP &lt;--&gt; SECSS

    PIDNS -. |네임스페이스 정보 노출| .-&gt; PROCFS
    SE -. |런타임/통계 노출| .-&gt; PROCFS
    MM -. |메모리 통계 노출| .-&gt; PROCFS
    FILES -. |FD 정보 노출| .-&gt; PROCFS
    SIG -. |시그널 상태 노출| .-&gt; PROCFS

    %% =========================
    %% 기능/서브시스템 -&gt; 효과
    %% =========================
    CTX --&gt; EFF
    SCHED --&gt; EFF
    RES --&gt; REL
    ID --&gt; REL
    SEC --&gt; SAFE
    PROCFS --&gt; OBS

    %% =========================
    %% 보조 관계(기능 간)
    %% =========================
    SCHED --- CTX
    RES --- CTX
    SEC --- RES
</pre><h3 id=특성-분석-characteristics-analysis>특성 분석 (Characteristics Analysis)<a hidden class=anchor aria-hidden=true href=#특성-분석-characteristics-analysis>#</a></h3><h4 id=장점-및-이점-분석표>장점 및 이점 분석표<a hidden class=anchor aria-hidden=true href=#장점-및-이점-분석표>#</a></h4><p>&ldquo;<strong>PCB 는 운영체제가 각 프로세스의 &rsquo; 신분증 + 진료차트 &rsquo; 를 한 장에 담아둔 것</strong>&rdquo; 으로 보면 된다.</p><ul><li>이 한 장으로 <strong>지금 어디까지 실행했는지</strong>와 <strong>무슨 자원을 쓰는지</strong>를 기억한다.</li><li>CPU 가 다른 일을 하다 돌아오려면 <strong>가볍게 저장·복원</strong>해야 하므로, 꼭 필요한 정보만 담고, 무거운 확장 상태는 <strong>필요할 때만</strong> 다룬다.</li><li>스케줄러는 PCB 에 쌓이는 <strong>실행시간/우선순위</strong>를 보고 가장 적절한 다음 작업을 고른다.</li><li>앱은 PCB 를 직접 만지지 않고 <code>/proc</code> 같은 창구로 <strong>보기만</strong> 한다. 이렇게 해야 <strong>안전</strong>하고, <strong>관측</strong>도 쉽다.</li></ul><table><thead><tr><th>구분</th><th>핵심 이점</th><th>기술적 근거 (요약)</th><th>실무 효과</th></tr></thead><tbody><tr><td>통합성</td><td><strong>상태·자원 통합 관리</strong></td><td><code>task_struct</code> 에 상태/스케줄링/메모리/링크가 결집</td><td>장애 분석·모니터링·복구 단순화</td></tr><tr><td>성능</td><td><strong>컨텍스트 전환 최적화</strong></td><td>XSAVE/FPSIMD 로 확장 상태 <strong>필요 시 저장</strong>, x86 <strong>PCID</strong>로 TLB 플러시 회피/지연</td><td>전환 지연 감소, 멀티태스킹 효율</td></tr><tr><td>스케줄링</td><td><strong>최적화 연동 (CFS)</strong></td><td>vruntime + <strong>RB-tree</strong>로 " 가장 덜 실행된 태스크 " 선택</td><td>응답성/처리량 균형, 공정성 향상</td></tr><tr><td>보안/안정</td><td><strong>격리·무결성</strong></td><td>PCB 는 커널 소유, 사용자 공간은 <code>/proc</code> 을 통한 <strong>간접 접근</strong></td><td>임의 변조 차단, 시스템 일관성</td></tr><tr><td>관측/회계</td><td><strong>운영 가시성</strong></td><td><code>procfs</code> 가 커널 구조 인터페이스를 제공 (지표 노출)</td><td>성능 분석·SLA 검증 용이</td></tr><tr><td>확장성</td><td><strong>대규모 운영 적합</strong></td><td>태스크 리스트를 <strong>RCU</strong>로 보호, 안전한 락리스 순회</td><td>다수 태스크에서도 낮은 경합</td></tr><tr><td>이식성</td><td><strong>플랫폼 일관성</strong></td><td>x86 <strong>XSAVE</strong>, ARM <strong>FPSIMD/SVE</strong> 등 ISA 차이를 커널이 흡수</td><td>하드웨어 혼합 환경 대응</td></tr><tr><td>단순성</td><td><strong>앱 투명성</strong></td><td><code>/proc</code>·표준 시스템콜로 간접 상호작용, PCB 직접 인지 불필요</td><td>애플리케이션 복잡도 감소</td></tr></tbody></table><ul><li>한 곳에 다 모으고 (통합) → 운영이 쉽다.</li><li>꼭 필요한 것만 빠르게 (전환 최적화) → 성능이 오른다.</li><li>스케줄러와 잘 맞물려서 (연동) → 공정성과 응답성이 좋아진다.</li><li>커널만 만지게 하고 (<code>/proc</code>) → 안전하고, 보기 (관측) 는 쉽다.</li><li>RCU·ISA 추상화로 (확장·이식) → 대규모·다종 하드웨어에서도 안정적이다.</li></ul><h4 id=단점제약-및-해결방안>단점·제약 및 해결방안<a hidden class=anchor aria-hidden=true href=#단점제약-및-해결방안>#</a></h4><ul><li><strong>문제</strong>: 프로세스가 많아지고 스위치가 잦아지면 메모리·CPU 가 낭비되고, <code>/proc</code> 같은 관찰 창구는 보안 위험이 될 수 있다.</li><li><strong>핵심 전략</strong>:<ol><li><strong>적정 워커 수</strong>로 PCB 증가 억제</li><li><strong>스위치 빈도/경로 최소화</strong>(affinity, 비동기 I/O, io_uring)</li><li><strong>가시성은 최소 권한 원칙</strong></li><li><strong>관찰 - 튜닝 반복</strong>.</li></ol></li></ul><table><thead><tr><th>영역</th><th>단점·제약</th><th>원인/배경</th><th>영향</th><th>탐지·진단</th><th>예방 (사전)</th><th>해결 (사후)</th><th>대안/보완 기술</th></tr></thead><tbody><tr><td>메모리</td><td>PCB·커널 스택 상주 증가</td><td>프로세스/스레드 수 증가</td><td>메모리 압박, 캐시 효율 저하</td><td><code>/proc/[pid]/status</code>·시스템 메모리 추이</td><td>워커/풀 크기 상한, 경량 태스크 설계</td><td>불필요 워커 정리, 프로파일로 구조 축소</td><td>경량 스레드/코루틴, 이벤트 루프 (부하 집중)</td></tr><tr><td>성능</td><td>컨텍스트 스위치 비용 (레지스터/스택 저장·복원, 캐시/TLB 교란)</td><td>인터럽트/시스템콜 유발, 과도한 스레딩</td><td>지연↑ 처리량↓</td><td><code>vmstat cs</code>, <code>/proc/*/status</code> ctxt switches, ftrace <code>sched_switch</code></td><td>적정 동시성, 배치/합치기 (coalescing)</td><td>우선순위/정책 튜닝 (CFS/RT/DEADLINE), 선점 제어</td><td>CPU affinity/NUMA 정책 (<code>taskset</code>, <code>sched_setaffinity</code>), io_uring/epoll</td></tr><tr><td>보안</td><td>관찰 표면 노출 (<code>/proc</code> 등)</td><td>시스템 전역 정보가 기본 노출</td><td>메타데이터·관찰 정보 유출</td><td>보안 스캔, 접근 로그</td><td>최소권한, 네임스페이스·컨테이너 격리</td><td>procfs <code>hidepid=</code>/GID 제한으로 범위 축소</td><td>보안 정책·RBAC, 모니터링 전용 노드 분리</td></tr><tr><td>운영</td><td>좀비 누적 (부모 미수거)</td><td>부모가 wait*() 미호출</td><td>PID 고갈·프로세스 생성 실패</td><td>`ps aux</td><td>grep Z<code>,</code> /proc` 상태</td><td>서비스 매니저 (systemd) 사용, subreaper 설계</td><td>부모에 wait 루틴 보장, 고아는 init/subreaper 가 수거</td></tr><tr><td>확장성</td><td>NUMA 에서 지역성 손상</td><td>태스크 이동·원격 메모리 접근</td><td>지연↑ 대역폭↓</td><td><code>numactl --hardware</code>, perf/trace</td><td>배치 시 NUMA 정책 지정</td><td>칠드런·워커를 노드 바인딩</td><td><code>numactl</code> 로 메모리 정책, 런큐 이동 제한</td></tr><tr><td>정책</td><td>잘못된 RT/데드라인 사용</td><td>높은 우선순위 고정</td><td>타 태스크 기아 (starvation)</td><td>스케줄 통계, trace</td><td>RT 시간쿼터/스로틀 설정</td><td>정책/우선순위 조정 (<code>sched_setscheduler</code>)</td><td>워크로드 분리, 전용 코어/CPU set</td></tr></tbody></table><ul><li><p><strong>스위치 빈도·경로를 줄이는 설계가 최우선</strong>이다. CPU affinity/NUMA 인식과 이벤트 루프·io_uring 을 묶으면 스위칭 자체를 적게 발생시킨다.</p></li><li><p><strong>관찰은 하되, 노출은 줄인다</strong>: <code>/proc</code> 은 강력하지만 <code>hidepid=</code> 로 최소한만 보이게 하고, 격리 (네임스페이스) 와 권한을 병행한다.</p></li><li><p><strong>운영 신뢰성은 수거 루틴이 관건</strong>: 좀비는 <em><em>wait</em>()</em>* 로만 정리되고, 부모 부재 시 init/subreaper 에 맡긴다. 설계에서 애초에 수거 루틴을 내장하라.</p></li><li><p><strong>정책은 도구로 관리</strong>: <code>sched_setscheduler(2)</code> 와 RT/데드라인 보호 장치를 이해하고, 잘못된 고우선 정책을 피한다.</p></li></ul><h4 id=트레이드오프-관계-분석>트레이드오프 관계 분석<a hidden class=anchor aria-hidden=true href=#트레이드오프-관계-분석>#</a></h4><p>PCB/태스크 설계는 **관측·보안·공정성 같은 &rsquo; 운영 편의 &lsquo;**와 <strong>지연·처리량 같은 &rsquo; 순수 성능 &lsquo;</strong> 사이에서 균형점을 고르는 문제다.<br>실무에서는 보안을 이유로 <strong>Eager FPU</strong>, <strong>KPTI+PCID</strong>, <strong>네임스페이스·cgroup 회계 최소한</strong>은 기본값으로 두고, 워크로드가 요구하면 회계 수준과 스케줄링 정책을 <strong>점진적으로 강화</strong>한다.</p><table><thead><tr><th>A vs B</th><th>선택지</th><th>장점</th><th>단점</th><th>권장 기준</th></tr></thead><tbody><tr><td><strong>PCB 정보량</strong></td><td>최소화</td><td>캐시/메모리·스위칭 오버헤드↓</td><td>관측·디버깅 난이도↑</td><td>임베디드/저메모리</td></tr><tr><td></td><td>풍부화</td><td>원인분석·정책/회계 용이 (PSI,/proc,cgroup)</td><td>메모리·경로 비용↑</td><td>멀티테넌시/운영 중시</td></tr><tr><td><strong>FPU 컨텍스트</strong></td><td>Lazy</td><td>평균 비용↓(FP 미사용多)</td><td><strong>LazyFP 취약점</strong></td><td>사실상 비권장</td></tr><tr><td></td><td>Eager</td><td>보안·예측가능성↑</td><td>고정 비용↑</td><td>일반 환경의 표준</td></tr><tr><td><strong>격리 강도</strong></td><td>강함 (KPTI/NS/cgroup)</td><td>멜트다운 완화·자원 격리</td><td>시스템콜/회계 비용↑</td><td>다중 테넌트/규제 환경</td></tr><tr><td></td><td>느슨</td><td>처리량↑</td><td>보안·간섭 리스크</td><td>신뢰된 단일 테넌트</td></tr><tr><td><strong>스케줄링</strong></td><td>CFS/그룹</td><td>공정성·분리·일반성↑</td><td>RB-tree/계층 비용</td><td>범용 서버/데스크톱</td></tr><tr><td></td><td>RT/Deadline</td><td>지연 보장</td><td>처리량·기아 위험</td><td>실시간/정해진 마감</td></tr><tr><td><strong>회계/관측</strong></td><td>미세 on(PSI/cgroup)</td><td>병목 탐지·SLO 관리</td><td>수집 오버헤드</td><td>대규모 운영/자율조정</td></tr><tr><td></td><td>최소 off</td><td>오버헤드↓</td><td>장애 분석 난이도↑</td><td>단순/자원여유</td></tr><tr><td><strong>자원 모델</strong></td><td>스레드 공유</td><td>생성/스위칭 비용↓</td><td>오염/동기화 비용↑</td><td>메모리 공유가득</td></tr><tr><td></td><td>프로세스 분리</td><td>고립성↑</td><td>비용↑</td><td>안전성 우선 (Windows 구조 참고)</td></tr></tbody></table><ul><li><strong>보안 사건 이후의 기본값</strong>: Lazy FPU 는 배제, <strong>Eager FPU + KPTI(+PCID)</strong> 조합이 현실적인 안전선.</li><li><strong>운영형 워크로드</strong>: 관측 (PSI·cgroup) 과 공정 (CFS/그룹) 으로 <strong>문제 예방·격리</strong>를 얻되, 비용이 민감한 경로 (핫패스) 는 최소화.</li><li><strong>고성능 단일 테넌트</strong>: 느슨한 격리·최소 회계·스레드 공유로 <strong>처리량 극대화</strong>를 노리되, 장애·간섭 리스크를 수용.</li></ul><h4 id=성능-특성-및-확장성>성능 특성 및 확장성<a hidden class=anchor aria-hidden=true href=#성능-특성-및-확장성>#</a></h4><p>PCB 는 프로세스를 관리하는 핵심 데이터 구조지만, 수천~수백만 개의 프로세스를 다룰 때 성능과 확장성에 부담이 생길 수 있다.<br>컨텍스트 스위치는 생각보다 비용이 크고, PCB 생성·유지는 메모리를 계속 잡아먹는다.<br>운영체제는 스케줄링 정책과 CPU 바인딩, 자원 제한 (cgroup) 같은 기술을 활용해 이런 부담을 줄이고, 더 많은 프로세스를 효율적으로 관리한다.</p><table><thead><tr><th>구분</th><th>특성/한계</th><th>세부 내용</th><th>영향</th></tr></thead><tbody><tr><td>컨텍스트 스위치</td><td>비용 10–50μs</td><td>캐시/TLB 플러시 포함</td><td>성능 저하</td></tr><tr><td>PCB 생성</td><td>비용 1–5ms</td><td>메모리 할당·초기화</td><td>프로세스 생성 지연</td></tr><tr><td>메모리 오버헤드</td><td>4–16KB/프로세스</td><td>누적 시 수백 MB~GB</td><td>메모리 압박</td></tr><tr><td>스케줄링 복잡도</td><td>O(log n)</td><td>CFS 기준</td><td>프로세스 수 증가 시 부하 상승</td></tr><tr><td>최대 프로세스 수</td><td>32k~4M</td><td><code>pid_max</code>·<code>threads-max</code></td><td>확장성 제한</td></tr><tr><td>메모리 제약</td><td>PCB 총량 제한</td><td>프로세스 수 × PCB 크기</td><td>대규모 환경 한계</td></tr><tr><td>수직 확장 고려</td><td>CPU affinity</td><td><code>sched_setaffinity(2)</code></td><td>부하 분산</td></tr><tr><td>수평 확장 고려</td><td>마이그레이션 비용</td><td>분산 환경</td><td>지연 최소화</td></tr><tr><td>클라우드 최적화</td><td>cgroup·정책 조정</td><td>컨테이너 환경</td><td>안정적 확장성</td></tr></tbody></table><p>PCB 는 프로세스 관리에 필수적이지만, 컨텍스트 스위치·PCB 생성·메모리 오버헤드가 성능에 직접적인 영향을 준다.<br>확장성을 높이려면 하드웨어와 커널 파라미터, 스케줄링 정책을 조율해야 하며, 특히 클라우드·분산 환경에서는 최적화가 필수적이다.</p><pre class=mermaid>graph LR
    %% =========================
    %% 개요: 성능 메트릭 → 한계 → 효과, 그리고 튜닝으로 완화
    %% =========================

    subgraph M[&#34;성능 메트릭&#34;]
        A[&#34;컨텍스트 스위치&lt;br/&gt;10–50 μs (캐시/TLB 영향)&#34;]
        B[&#34;PCB 생성 비용&lt;br/&gt;1–5 ms&#34;]
        C[&#34;메모리 오버헤드&lt;br/&gt;4–16 KB/프로세스&#34;]
        D[&#34;스케줄링 복잡도&lt;br/&gt;O(log n) (CFS)&#34;]
    end

    subgraph L[&#34;확장성 한계 / 제약&#34;]
        E[&#34;최대 프로세스 수&lt;br/&gt;pid_max / threads-max&#34;]
        F[&#34;메모리 제약&lt;br/&gt;PCB * 프로세스 수&#34;]
        G[&#34;스케줄링 부하 증가&lt;br/&gt;프로세스 수↑&#34;]
        H[&#34;NUMA/파이프라인 영향&lt;br/&gt;지연·캐시미스&#34;]
    end

    subgraph K[&#34;튜닝/최적화 레버(PCB·스케줄러 연계)&#34;]
        K1[&#34;CPU Affinity&lt;br/&gt;sched_setaffinity(2)&#34;]
        K2[&#34;cgroup v2&lt;br/&gt;CPU/메모리 제한&#34;]
        K3[&#34;스케줄러 정책/파라미터&lt;br/&gt;CFS vs RT, prio, weight&#34;]
        K4[&#34;pid_max / threads-max&lt;br/&gt;한계 상향 (신중)&#34;]
        K5[&#34;NUMA 바인딩·메모리 배치&lt;br/&gt;(locality 최적화)&#34;]
    end

    subgraph ENV[&#34;운영 환경&#34;]
        V[&#34;수직 확장&lt;br/&gt;코어 수 증가&#34;]
        HScale[&#34;수평 확장&lt;br/&gt;분산/컨테이너&#34;]
        Cloud[&#34;클라우드/컨테이너 오케스트레이션&#34;]
    end

    subgraph R[&#34;결과/효과&#34;]
        R1[&#34;처리량(Throughput)&#34;]
        R2[&#34;지연/응답성(Latency)&#34;]
        R3[&#34;안정성(리소스 고갈 방지)&#34;]
        R4[&#34;예측 가능성(QoS)&#34;]
    end

    %% 메트릭 -&gt; 한계
    A --&gt;|영향| H
    B --&gt;|생성 지연 누적| F
    C --&gt;|누적 메모리 증가| F
    D --&gt;|n 증가 시 비용↑| G
    A --&gt;|스위치 증가| G

    %% 한계 -&gt; 결과(부정적)
    E --&gt;|프로세스 폭증 시| G
    F --&gt;|메모리 압박| R3
    G --&gt;|스케줄링 지연| R2
    H --&gt;|캐시/TLB 미스| R2

    %% 튜닝 -&gt; 메트릭/한계 완화(점선)
    K1 -. |코어 현지화| .-&gt; A
    K1 -. |런큐 분리| .-&gt; G
    K2 -. |상한 설정| .-&gt; E
    K2 -. |폭주 억제| .-&gt; F
    K3 -. |정책/우선순위 조정| .-&gt; D
    K3 -. |RT 제한적 사용| .-&gt; R2
    K4 -. |스케일 상향(주의)| .-&gt; E
    K5 -. |로컬리티 개선| .-&gt; H
    K5 -. |메모리 경합↓| .-&gt; F

    %% 환경 -&gt; 튜닝/한계 상호작용
    V --&gt;|코어 증가| G
    V --&gt;|Affinity 필요성↑| K1
    HScale --&gt;|오케스트레이션| Cloud
    Cloud --&gt;|cgroup/정책 자동화| K2
    Cloud --&gt;|워크로드 특성 반영| K3
    Cloud --&gt;|NUMA 인식 스케줄링| K5

    %% 최종 결과로의 영향(개선 방향)
    K1 --&gt; R1
    K2 --&gt; R3
    K3 --&gt; R2
    K5 --&gt; R2
    E -. |상향 시 처리량↑/불안정 위험↑| .-&gt; R1
    F -. |압박 완화 시 안정성↑| .-&gt; R3
    G -. |부하 제어 시 지연↓| .-&gt; R2
</pre><h3 id=구현-및-분류-implementation--classification>구현 및 분류 (Implementation & Classification)<a hidden class=anchor aria-hidden=true href=#구현-및-분류-implementation--classification>#</a></h3><h4 id=구현-기법-및-방법>구현 기법 및 방법<a hidden class=anchor aria-hidden=true href=#구현-기법-및-방법>#</a></h4><ul><li><strong>무엇으로 표현?</strong> 구조체 (Linux)·객체 (Windows)·혼합 (FreeBSD) 로 프로세스/스레드 정보를 담는다. 구조체는 <strong>빠름</strong>, 객체는 <strong>안전하고 안정된 인터페이스</strong>에 유리.</li><li><strong>어디에 두나?</strong> PCB 는 <strong>커널 메모리</strong>에 있고, 슬랩 (특히 SLUB) 으로 <strong>빠르고 예측 가능</strong>하게 할당/해제된다.</li><li><strong>무엇을 저장/복원?</strong> 꼭 필요한 레지스터는 즉시, <strong>무거운 확장 상태</strong>(SIMD 등) 는 필요할 때만 저장해 <strong>문맥교환 비용</strong>을 줄인다.</li><li><strong>어떻게 안전하게 순회?</strong> 전역 목록은 <strong>RCU</strong>로 보호되어 읽기가 <strong>락 없이</strong> 빠르다.</li><li><strong>어떻게 보나?</strong> <code>/proc</code> 으로 내부 상태를 <strong>읽기 중심</strong>으로 본다 (일부 튜너블만 쓰기).</li><li><strong>어떻게 조정하나?</strong> POSIX <code>sched_*</code> 로 정책/우선순위를 바꾸면 커널 내부 PCB/스케줄러에 반영된다.</li></ul><table><thead><tr><th>분류</th><th>정의</th><th>구성 요소</th><th>원리</th><th>목적</th><th>사용 상황</th><th>특징</th></tr></thead><tbody><tr><td>구조체 기반</td><td>C 구조체에 PCB 핵심 필드 배치</td><td><code>task_struct</code> + 포인터 (<code>mm</code>, <code>files</code>, <code>signal</code>)</td><td><strong>직접 필드 접근</strong> + 외부 구조체 포인터 연결</td><td>빠른 접근·메모리 효율</td><td>Linux 일반 프로세스/스레드</td><td>단일 구조·낮은 오버헤드, 자원은 참조 연결</td></tr><tr><td>객체 지향 (opaque)</td><td>커널 오브젝트로 캡슐화</td><td>EPROCESS/KPROCESS, ETHREAD/KTHREAD</td><td><strong>필드 비공개</strong>·API/디버거 유틸로 접근</td><td>ABI 안정성·보안</td><td>Windows 드라이버/디버깅</td><td>내부 레이아웃 변경 자유·안전성↑</td></tr><tr><td>하이브리드</td><td>구조체 + 유틸/클래스 결합</td><td>FreeBSD <code>proc</code>/<code>thread</code> + <code>kproc_*</code></td><td>핵심은 구조체, 주변은 모듈 유틸</td><td>성능·유연성 균형</td><td>BSD 계열 커널</td><td>커널 태스크/프로세스 유틸 분리</td></tr><tr><td>메모리 배치·할당</td><td>슬랩/SLUB 캐시로 PCB 관리</td><td>슬랩 캐시, 캐시라인 정렬</td><td><strong>자주 쓰는 크기 캐시화</strong>·디버깅 훅</td><td>성능·단편화 완화</td><td>대규모 태스크 환경</td><td><code>/proc/slabinfo</code> 관측, SLUB 기본값 경향</td></tr><tr><td>컨텍스트 관리 (아키)</td><td>확장 상태의 선택적 저장</td><td>x86 XSTATE/XSAVE, ARM64 FPSIMD/SVE/SME</td><td><strong>필수 즉시 + 확장 지연</strong> 저장·복원</td><td>컨텍스트 스위치 비용 최소화</td><td>SIMD/AI 확장 많은 워크로드</td><td>커널 파라미터/정책로 제어 가능</td></tr><tr><td>수명·동기화</td><td>태스크 리스트 보호/순회</td><td>RCU, <code>for_each_process()</code></td><td><strong>읽기 다수</strong>에 RCU, 지연 해제</td><td>경합↓·안전한 삭제</td><td>멀티코어/고부하</td><td>락리스 순회, 지연 해제 패턴</td></tr><tr><td>관측/인터페이스</td><td>커널 데이터 노출 창구</td><td><code>/proc</code>, <code>current</code></td><td><strong>간접 접근</strong>으로 무결성 보존</td><td>디버깅·운영 가시성</td><td>시스템 모니터링</td><td>대다수 <strong>읽기 전용</strong> 파일</td></tr><tr><td>표준·호환</td><td>사용자→커널 파라미터 연동</td><td><code>sched_setscheduler()</code> 등</td><td>표준 API → PCB/스케줄러 필드 반영</td><td>이식성·제어성</td><td>리얼타임/우선순위 조정</td><td>POSIX/리눅스 매뉴얼에 정의</td></tr></tbody></table><ul><li><strong>구조체 vs 객체</strong>: 빠른 접근 vs 캡슐화/안정성.</li><li><strong>SLUB</strong>로 PCB 를 빠르게 할당/관측.</li><li><strong>아키 의존 컨텍스트</strong>는 " 필수 즉시·확장 지연 " 원리로 비용 절감.</li><li><strong>RCU</strong>가 멀티코어에서 안전한 순회/해제를 보장.</li><li><strong>/proc</strong>은 읽기 중심 창구, <strong>POSIX</strong>는 정책/우선순위 조정 통로.</li></ul><h4 id=분류-기준별-유형>분류 기준별 유형<a hidden class=anchor aria-hidden=true href=#분류-기준별-유형>#</a></h4><ul><li><p><strong>무엇을 나누나?</strong><br>엔티티 (PCB/TCB)·스케줄러 정책·스레딩 모델·CPU 배치·메모리 배치·동시성 기법으로 나눈다.</p></li><li><p><strong>Linux 의 큰 그림</strong><br>task_struct 가 " 태스크 (스레드/프로세스)&rdquo; 를 대표하고, 스케줄러 (CFS/RT/DEADLINE) 가 어느 코어에서 언제 돌릴지 결정, affinity 로 어느 코어에 붙여둘지 정한다. 메모리는 SLUB 로 동적, 동시성은 락 +RCU 로 조합.</p></li></ul><table><thead><tr><th>분류 기준</th><th>유형</th><th>핵심 특징</th><th>대표 예/근거</th></tr></thead><tbody><tr><td><strong>엔티티 (표현)</strong></td><td>단일 태스크 엔티티</td><td>스레드/프로세스를 <code>task_struct</code> 로 통합 표현, 자원은 포인터로 연결</td><td>Linux task_struct(계층형)</td></tr><tr><td></td><td>분리된 프로세스/스레드 블록</td><td>프로세스 객체와 스레드 객체를 구분</td><td>Windows EPROCESS/ETHREAD</td></tr><tr><td><strong>스케줄러 정책</strong></td><td>CFS(Time-sharing)</td><td>일반 태스크, 가중 공정 공유</td><td><code>sched_setscheduler(2)</code> 정책군 중 기본</td></tr><tr><td></td><td>RT(FIFO/RR)</td><td>실시간 우선 응답, 고정 우선순위</td><td>POSIX RT, <code>sched_setscheduler(2)</code></td></tr><tr><td></td><td>DEADLINE</td><td>데드라인/주기/런타임 기반, admission test</td><td><code>sched_setattr(2)</code>, <code>sched(7)</code></td></tr><tr><td><strong>스레딩 모델</strong></td><td>1:1(커널 스레드)</td><td>사용자 스레드 = 커널 스케줄 단위</td><td>NPTL(현대 Linux 표준)</td></tr><tr><td></td><td>M:N/유저레벨</td><td>사용자 라이브러리 스케줄, 커널 노출 축소</td><td>역사적/특정 OS·RTOS 사례</td></tr><tr><td><strong>CPU 배치</strong></td><td>Affinity 고정</td><td>코어 핀닝으로 캐시 지역성/이주 억제</td><td><code>sched_setaffinity(2)</code></td></tr><tr><td></td><td>가변/마이그레이션</td><td>스케줄러가 코어 이동 허용</td><td>동일</td></tr><tr><td><strong>메모리 배치/할당</strong></td><td>동적 (슬랩/SLUB)</td><td>task_struct 등 커널 객체 캐시 할당</td><td>SLAB/SLUB 문서</td></tr><tr><td></td><td>커널 스택 (분리)</td><td>태스크별 스택은 가상 매핑·별도 페이지</td><td>vmap 스택 문서</td></tr><tr><td><strong>동시성 기법</strong></td><td>락 기반</td><td>스핀락/뮤텍스 등 전통적 보호</td><td>커널 전반</td></tr><tr><td></td><td>무잠금/RCU</td><td>읽기 다수 환경 최적화, 지연 해제</td><td>RCU 개념 문서</td></tr></tbody></table><ul><li><strong>Linux 의 엔티티는 task_struct 하나로 통일</strong>되고, 리소스는 포인터 연결로 <strong>계층화</strong>되어 있다. Windows 는 프로세스/스레드 블록이 <strong>분리</strong>된 형태다.</li><li><strong>스케줄링은 CFS·RT·DEADLINE 의 3 축</strong>이고, POSIX 계열 시스템콜로 정책/속성을 제어한다.</li><li><strong>스레딩은 Linux 에서 1:1(NPTL) 이 표준</strong>이며, M:N 은 역사적/특수 목적에서만 보인다.</li><li><strong>PCB 의 메모리 배치는 SLUB 등 동적 할당</strong>이 일반적이고, <strong>커널 스택은 별도</strong>로 관리된다 (&ldquo;PCB=스택 상단 " 일반론은 아님).</li><li><strong>동시성 분류에 RCU 를 포함</strong>하면 현대 커널 설계의 실제를 더 잘 반영한다.</li></ul><h4 id=도구-및-프레임워크-생태계>도구 및 프레임워크 생태계<a hidden class=anchor aria-hidden=true href=#도구-및-프레임워크-생태계>#</a></h4><p>PCB 는 " 프로세스의 여권 + 건강검진표 " 다.<br>유저 공간 도구 (<code>ps/top/strace/pmap</code>) 로 겉면 (신원·상태·시스템콜) 부터 보고, 필요하면 커널 트레이서 (<code>ftrace/perf</code>) 나 eBPF(<code>bpftrace</code>/BCC) 로 <strong>안쪽의 혈류 (스케줄/이벤트/PMU)</strong> 를 본다.<br>마지막으로 Prometheus/Grafana/Parca 같은 <strong>대시보드</strong>에서 지속 관측과 알림을 건다.<br>Windows 에선 PerfMon/ETW/Process Explorer 가 같은 역할을 한다.</p><table><thead><tr><th>분류</th><th>대표 도구</th><th>관측 대상 (PCB 매핑)</th><th>강점</th><th>한계/주의</th><th>주 사용처</th></tr></thead><tbody><tr><td>프로세스/스레드 모니터링</td><td><code>ps</code>, <code>top/htop</code>, <code>pstree</code>, <code>pidstat</code></td><td>PID/PPID, state, priority, CPU/메모리 통계, 스레드 트리 (<code>/proc</code> 기반)</td><td>설치·학습 곡선 낮음, 즉시성</td><td>세부 커널 원인 파악은 제한</td><td>일상 모니터링, 1 차 진단</td></tr><tr><td>시스템콜 트레이싱</td><td><code>strace</code></td><td>시스템콜·시그널·리턴값 (유저↔커널 경계)</td><td>I/O hang·권한 오류 즉시 파악</td><td>고부하·노이즈 가능</td><td>장애 재현/디버깅</td></tr><tr><td>커널 트레이싱 프레임워크</td><td><code>ftrace</code> + <code>trace-cmd</code></td><td>스케줄/IRQ/함수/트레이스포인트 (커널 내부)</td><td>커널 경로·지연 분석</td><td>설정 난이도, 활성화 시 오버헤드</td><td>지연/스케줄링 원인 분석</td></tr><tr><td>프로파일링/PMU</td><td><code>perf</code></td><td>PMU 카운터, tracepoints/kprobe/uprobes</td><td>저오버헤드 샘플링, 범용성</td><td>권한/보안 정책, 해석 난도</td><td>핫패스·캐시/TLB 분석</td></tr><tr><td>메모리/주소공간</td><td><code>pmap</code>, <code>/proc/&lt;pid>/status</code>, <code>valgrind</code></td><td>VMA/PGD/메모리 통계, 메모리 오류</td><td>맵/누수/에러 가시화</td><td><code>valgrind</code> 는 오버헤드 큼</td><td>누수·UAF·맵 진단</td></tr><tr><td>eBPF 고급 관측</td><td><code>bpftrace</code>, BCC, <code>bpftool</code></td><td>kprobe/tracepoint/uprobes, map 기반 메트릭</td><td>런타임/저오버헤드, 유연성</td><td>커널/권한 요건, 학습곡선</td><td>프로덕션 관측/보안/네트워킹</td></tr><tr><td>운영/시각화 스택</td><td>Prometheus(+eBPF exporter), Grafana, Parca</td><td>커스텀 eBPF/노드/프로세스 메트릭, 지속 프로파일</td><td>장기 추세/알림/대시보드</td><td>설계/보관 비용</td><td>SLO/Capacity/회귀 분석</td></tr><tr><td>Windows 대응</td><td>PerfMon, Process Explorer, ETW</td><td>컨텍스트 스위치, 핸들/DLL, 커널/앱 이벤트</td><td>OS 표준, GUI 친화</td><td>일부 심층분석엔 ETW 지식 필요</td><td>Windows 성능/디버깅 표준</td></tr><tr><td>실습/시뮬레이션</td><td>QEMU, Bochs</td><td>OS/PCB/스케줄링 실험 환경</td><td>리스크 없이 커널/OS 실습</td><td>실제 하드보다 느림</td><td>교육/실험/커널 디버깅</td></tr></tbody></table><ul><li><strong>1 차 진단</strong>은 <code>/proc</code> 기반 도구 (<code>ps/top/pidstat/pmap</code>) 로 빠르게.</li><li>커널 내부 원인은 <code>ftrace/trace-cmd</code> 와 <code>perf</code> 로 <strong>경로·지연·PMU</strong>를 확인.</li><li><strong>프로덕션 지속 관측</strong>은 eBPF(<code>bpftrace</code>/BCC/<code>bpftool</code>) + Prometheus/Grafana/Parca 조합이 유연하고 저오버헤드.</li><li>Windows 에선 <strong>PerfMon+ETW+Process Explorer</strong>가 표준 흐름.</li></ul><h4 id=표준-및-규격-준수사항>표준 및 규격 준수사항<a hidden class=anchor aria-hidden=true href=#표준-및-규격-준수사항>#</a></h4><p>PCB 는 운영체제가 내부에서 관리하는 구조체지만, 프로그램이 이를 직접 다루지는 않는다. 대신 POSIX, SUS 같은 국제 표준이 정의한 시스템 호출을 통해 간접적으로 PCB 정보를 조회하거나 수정한다.
Linux 는 여기에 <code>/proc</code> 파일시스템 (LSB 표준) 을 제공해, 프로세스 상태를 파일처럼 읽을 수 있게 한다. 이렇게 표준을 지키면 다른 운영체제나 환경에서도 프로그램이 동일하게 동작할 수 있다.</p><table><thead><tr><th>표준</th><th>주요 내용</th><th>PCB 와의 관련성</th><th>예시 API/구조</th></tr></thead><tbody><tr><td>POSIX</td><td>프로세스 제어·스케줄링·시그널 표준화</td><td>스케줄링 정책·파라미터, 시그널 처리, 프로세스 그룹 관리</td><td><code>sched_setscheduler()</code>, <code>sched_getparam()</code>, <code>sched_yield()</code></td></tr><tr><td>Single UNIX Specification</td><td>상태 조회·우선순위·자원 제한 관리</td><td>PCB 의 우선순위, 실행 상태, 자원 제한과 매핑</td><td><code>waitid()</code>, <code>getpriority()</code>, <code>getrlimit()</code></td></tr><tr><td>Linux Standard Base</td><td><code>/proc</code> 파일시스템 구조·포맷 정의</td><td>PCB 필드 정보 노출 포맷 표준화</td><td><code>/proc/&lt;pid>/status</code>, <code>/proc/&lt;pid>/sched</code></td></tr><tr><td>규격 준수 고려사항</td><td>API 호환성, 데이터 형식 일관성, 동작 시맨틱</td><td>표준 기반 동작 보장, 크로스플랫폼 안정성</td><td>표준화된 호출·데이터 구조</td></tr></tbody></table><p>POSIX 와 SUS 는 PCB 를 직접 정의하지 않지만, 이를 접근·제어하는 API 를 표준화하여 운영체제 간 호환성을 보장한다. LSB 는 <code>/proc</code> 의 구조와 포맷을 정의해 PCB 정보의 표현 방식을 통일한다.</p><h3 id=실무-적용-practical-application>실무 적용 (Practical Application)<a hidden class=anchor aria-hidden=true href=#실무-적용-practical-application>#</a></h3><h4 id=실습-예제-및-코드-구현>실습 예제 및 코드 구현<a hidden class=anchor aria-hidden=true href=#실습-예제-및-코드-구현>#</a></h4><h5 id=pcb-정보-조회-및-프로세스-상태-모니터링-시스템-구현>PCB 정보 조회 및 프로세스 상태 모니터링 시스템 구현<a hidden class=anchor aria-hidden=true href=#pcb-정보-조회-및-프로세스-상태-모니터링-시스템-구현>#</a></h5><p><strong>학습 목표</strong>: PCB 정보 조회 및 프로세스 상태 모니터링 시스템 구현</p><p><strong>시나리오</strong>: 시스템 관리자가 실시간으로 프로세스 상태를 모니터링하고 이상 프로세스를 탐지하는 도구 개발</p><p><strong>시스템 구성</strong>:</p><ul><li>PCB 정보 수집 모듈</li><li>데이터 분석 엔진</li><li>실시간 모니터링 대시보드</li><li>알림 시스템</li></ul><p><strong>시스템 구성 다이어그램</strong>:</p><pre class=mermaid>graph TB
    subgraph &#34;사용자 공간&#34;
        Dashboard[모니터링 대시보드]
        Analyzer[데이터 분석 엔진]
        Collector[PCB 정보 수집기]
    end
    
    subgraph &#34;커널 공간&#34;
        ProcFS[&#34;/proc 파일시스템&#34;]
        PCB1[PCB - Process 1]
        PCB2[PCB - Process 2]
        PCBn[PCB - Process N]
    end
    
    Dashboard --&gt; Analyzer
    Analyzer --&gt; Collector
    Collector --&gt; ProcFS
    ProcFS --&gt; PCB1
    ProcFS --&gt; PCB2
    ProcFS --&gt; PCBn
    
    Dashboard -.-&gt; AlertSystem[알림 시스템]
</pre><p><strong>Workflow</strong>:</p><ol><li>PCB 정보 수집기가 주기적으로 /proc 파일시스템에서 정보 수집</li><li>수집된 데이터를 분석 엔진이 처리하여 이상 패턴 탐지</li><li>실시간 대시보드에서 프로세스 상태 시각화</li><li>임계값 초과 시 알림 시스템 작동</li></ol><p><strong>핵심 역할</strong>:</p><ul><li>PCB 는 각 프로세스의 완전한 상태 정보를 제공하여 정확한 모니터링 가능</li><li>커널과 사용자 공간 간의 정보 교환 인터페이스 역할</li></ul><p><strong>유무에 따른 차이점</strong>:</p><ul><li>PCB 있음: 개별 프로세스별 상세 모니터링 및 제어 가능</li><li>PCB 없음: 전체 시스템 수준의 대략적 정보만 획득 가능</li></ul><p><strong>구현 예시</strong> (Python):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>  1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2>  2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3>  3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4>  4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5>  5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6>  6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7>  7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8>  8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9>  9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10> 10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11> 11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12> 12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13> 13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14> 14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15> 15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16> 16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17> 17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18> 18</a>
</span><span class=lnt id=hl-6-19><a class=lnlinks href=#hl-6-19> 19</a>
</span><span class=lnt id=hl-6-20><a class=lnlinks href=#hl-6-20> 20</a>
</span><span class=lnt id=hl-6-21><a class=lnlinks href=#hl-6-21> 21</a>
</span><span class=lnt id=hl-6-22><a class=lnlinks href=#hl-6-22> 22</a>
</span><span class=lnt id=hl-6-23><a class=lnlinks href=#hl-6-23> 23</a>
</span><span class=lnt id=hl-6-24><a class=lnlinks href=#hl-6-24> 24</a>
</span><span class=lnt id=hl-6-25><a class=lnlinks href=#hl-6-25> 25</a>
</span><span class=lnt id=hl-6-26><a class=lnlinks href=#hl-6-26> 26</a>
</span><span class=lnt id=hl-6-27><a class=lnlinks href=#hl-6-27> 27</a>
</span><span class=lnt id=hl-6-28><a class=lnlinks href=#hl-6-28> 28</a>
</span><span class=lnt id=hl-6-29><a class=lnlinks href=#hl-6-29> 29</a>
</span><span class=lnt id=hl-6-30><a class=lnlinks href=#hl-6-30> 30</a>
</span><span class=lnt id=hl-6-31><a class=lnlinks href=#hl-6-31> 31</a>
</span><span class=lnt id=hl-6-32><a class=lnlinks href=#hl-6-32> 32</a>
</span><span class=lnt id=hl-6-33><a class=lnlinks href=#hl-6-33> 33</a>
</span><span class=lnt id=hl-6-34><a class=lnlinks href=#hl-6-34> 34</a>
</span><span class=lnt id=hl-6-35><a class=lnlinks href=#hl-6-35> 35</a>
</span><span class=lnt id=hl-6-36><a class=lnlinks href=#hl-6-36> 36</a>
</span><span class=lnt id=hl-6-37><a class=lnlinks href=#hl-6-37> 37</a>
</span><span class=lnt id=hl-6-38><a class=lnlinks href=#hl-6-38> 38</a>
</span><span class=lnt id=hl-6-39><a class=lnlinks href=#hl-6-39> 39</a>
</span><span class=lnt id=hl-6-40><a class=lnlinks href=#hl-6-40> 40</a>
</span><span class=lnt id=hl-6-41><a class=lnlinks href=#hl-6-41> 41</a>
</span><span class=lnt id=hl-6-42><a class=lnlinks href=#hl-6-42> 42</a>
</span><span class=lnt id=hl-6-43><a class=lnlinks href=#hl-6-43> 43</a>
</span><span class=lnt id=hl-6-44><a class=lnlinks href=#hl-6-44> 44</a>
</span><span class=lnt id=hl-6-45><a class=lnlinks href=#hl-6-45> 45</a>
</span><span class=lnt id=hl-6-46><a class=lnlinks href=#hl-6-46> 46</a>
</span><span class=lnt id=hl-6-47><a class=lnlinks href=#hl-6-47> 47</a>
</span><span class=lnt id=hl-6-48><a class=lnlinks href=#hl-6-48> 48</a>
</span><span class=lnt id=hl-6-49><a class=lnlinks href=#hl-6-49> 49</a>
</span><span class=lnt id=hl-6-50><a class=lnlinks href=#hl-6-50> 50</a>
</span><span class=lnt id=hl-6-51><a class=lnlinks href=#hl-6-51> 51</a>
</span><span class=lnt id=hl-6-52><a class=lnlinks href=#hl-6-52> 52</a>
</span><span class=lnt id=hl-6-53><a class=lnlinks href=#hl-6-53> 53</a>
</span><span class=lnt id=hl-6-54><a class=lnlinks href=#hl-6-54> 54</a>
</span><span class=lnt id=hl-6-55><a class=lnlinks href=#hl-6-55> 55</a>
</span><span class=lnt id=hl-6-56><a class=lnlinks href=#hl-6-56> 56</a>
</span><span class=lnt id=hl-6-57><a class=lnlinks href=#hl-6-57> 57</a>
</span><span class=lnt id=hl-6-58><a class=lnlinks href=#hl-6-58> 58</a>
</span><span class=lnt id=hl-6-59><a class=lnlinks href=#hl-6-59> 59</a>
</span><span class=lnt id=hl-6-60><a class=lnlinks href=#hl-6-60> 60</a>
</span><span class=lnt id=hl-6-61><a class=lnlinks href=#hl-6-61> 61</a>
</span><span class=lnt id=hl-6-62><a class=lnlinks href=#hl-6-62> 62</a>
</span><span class=lnt id=hl-6-63><a class=lnlinks href=#hl-6-63> 63</a>
</span><span class=lnt id=hl-6-64><a class=lnlinks href=#hl-6-64> 64</a>
</span><span class=lnt id=hl-6-65><a class=lnlinks href=#hl-6-65> 65</a>
</span><span class=lnt id=hl-6-66><a class=lnlinks href=#hl-6-66> 66</a>
</span><span class=lnt id=hl-6-67><a class=lnlinks href=#hl-6-67> 67</a>
</span><span class=lnt id=hl-6-68><a class=lnlinks href=#hl-6-68> 68</a>
</span><span class=lnt id=hl-6-69><a class=lnlinks href=#hl-6-69> 69</a>
</span><span class=lnt id=hl-6-70><a class=lnlinks href=#hl-6-70> 70</a>
</span><span class=lnt id=hl-6-71><a class=lnlinks href=#hl-6-71> 71</a>
</span><span class=lnt id=hl-6-72><a class=lnlinks href=#hl-6-72> 72</a>
</span><span class=lnt id=hl-6-73><a class=lnlinks href=#hl-6-73> 73</a>
</span><span class=lnt id=hl-6-74><a class=lnlinks href=#hl-6-74> 74</a>
</span><span class=lnt id=hl-6-75><a class=lnlinks href=#hl-6-75> 75</a>
</span><span class=lnt id=hl-6-76><a class=lnlinks href=#hl-6-76> 76</a>
</span><span class=lnt id=hl-6-77><a class=lnlinks href=#hl-6-77> 77</a>
</span><span class=lnt id=hl-6-78><a class=lnlinks href=#hl-6-78> 78</a>
</span><span class=lnt id=hl-6-79><a class=lnlinks href=#hl-6-79> 79</a>
</span><span class=lnt id=hl-6-80><a class=lnlinks href=#hl-6-80> 80</a>
</span><span class=lnt id=hl-6-81><a class=lnlinks href=#hl-6-81> 81</a>
</span><span class=lnt id=hl-6-82><a class=lnlinks href=#hl-6-82> 82</a>
</span><span class=lnt id=hl-6-83><a class=lnlinks href=#hl-6-83> 83</a>
</span><span class=lnt id=hl-6-84><a class=lnlinks href=#hl-6-84> 84</a>
</span><span class=lnt id=hl-6-85><a class=lnlinks href=#hl-6-85> 85</a>
</span><span class=lnt id=hl-6-86><a class=lnlinks href=#hl-6-86> 86</a>
</span><span class=lnt id=hl-6-87><a class=lnlinks href=#hl-6-87> 87</a>
</span><span class=lnt id=hl-6-88><a class=lnlinks href=#hl-6-88> 88</a>
</span><span class=lnt id=hl-6-89><a class=lnlinks href=#hl-6-89> 89</a>
</span><span class=lnt id=hl-6-90><a class=lnlinks href=#hl-6-90> 90</a>
</span><span class=lnt id=hl-6-91><a class=lnlinks href=#hl-6-91> 91</a>
</span><span class=lnt id=hl-6-92><a class=lnlinks href=#hl-6-92> 92</a>
</span><span class=lnt id=hl-6-93><a class=lnlinks href=#hl-6-93> 93</a>
</span><span class=lnt id=hl-6-94><a class=lnlinks href=#hl-6-94> 94</a>
</span><span class=lnt id=hl-6-95><a class=lnlinks href=#hl-6-95> 95</a>
</span><span class=lnt id=hl-6-96><a class=lnlinks href=#hl-6-96> 96</a>
</span><span class=lnt id=hl-6-97><a class=lnlinks href=#hl-6-97> 97</a>
</span><span class=lnt id=hl-6-98><a class=lnlinks href=#hl-6-98> 98</a>
</span><span class=lnt id=hl-6-99><a class=lnlinks href=#hl-6-99> 99</a>
</span><span class=lnt id=hl-6-100><a class=lnlinks href=#hl-6-100>100</a>
</span><span class=lnt id=hl-6-101><a class=lnlinks href=#hl-6-101>101</a>
</span><span class=lnt id=hl-6-102><a class=lnlinks href=#hl-6-102>102</a>
</span><span class=lnt id=hl-6-103><a class=lnlinks href=#hl-6-103>103</a>
</span><span class=lnt id=hl-6-104><a class=lnlinks href=#hl-6-104>104</a>
</span><span class=lnt id=hl-6-105><a class=lnlinks href=#hl-6-105>105</a>
</span><span class=lnt id=hl-6-106><a class=lnlinks href=#hl-6-106>106</a>
</span><span class=lnt id=hl-6-107><a class=lnlinks href=#hl-6-107>107</a>
</span><span class=lnt id=hl-6-108><a class=lnlinks href=#hl-6-108>108</a>
</span><span class=lnt id=hl-6-109><a class=lnlinks href=#hl-6-109>109</a>
</span><span class=lnt id=hl-6-110><a class=lnlinks href=#hl-6-110>110</a>
</span><span class=lnt id=hl-6-111><a class=lnlinks href=#hl-6-111>111</a>
</span><span class=lnt id=hl-6-112><a class=lnlinks href=#hl-6-112>112</a>
</span><span class=lnt id=hl-6-113><a class=lnlinks href=#hl-6-113>113</a>
</span><span class=lnt id=hl-6-114><a class=lnlinks href=#hl-6-114>114</a>
</span><span class=lnt id=hl-6-115><a class=lnlinks href=#hl-6-115>115</a>
</span><span class=lnt id=hl-6-116><a class=lnlinks href=#hl-6-116>116</a>
</span><span class=lnt id=hl-6-117><a class=lnlinks href=#hl-6-117>117</a>
</span><span class=lnt id=hl-6-118><a class=lnlinks href=#hl-6-118>118</a>
</span><span class=lnt id=hl-6-119><a class=lnlinks href=#hl-6-119>119</a>
</span><span class=lnt id=hl-6-120><a class=lnlinks href=#hl-6-120>120</a>
</span><span class=lnt id=hl-6-121><a class=lnlinks href=#hl-6-121>121</a>
</span><span class=lnt id=hl-6-122><a class=lnlinks href=#hl-6-122>122</a>
</span><span class=lnt id=hl-6-123><a class=lnlinks href=#hl-6-123>123</a>
</span><span class=lnt id=hl-6-124><a class=lnlinks href=#hl-6-124>124</a>
</span><span class=lnt id=hl-6-125><a class=lnlinks href=#hl-6-125>125</a>
</span><span class=lnt id=hl-6-126><a class=lnlinks href=#hl-6-126>126</a>
</span><span class=lnt id=hl-6-127><a class=lnlinks href=#hl-6-127>127</a>
</span><span class=lnt id=hl-6-128><a class=lnlinks href=#hl-6-128>128</a>
</span><span class=lnt id=hl-6-129><a class=lnlinks href=#hl-6-129>129</a>
</span><span class=lnt id=hl-6-130><a class=lnlinks href=#hl-6-130>130</a>
</span><span class=lnt id=hl-6-131><a class=lnlinks href=#hl-6-131>131</a>
</span><span class=lnt id=hl-6-132><a class=lnlinks href=#hl-6-132>132</a>
</span><span class=lnt id=hl-6-133><a class=lnlinks href=#hl-6-133>133</a>
</span><span class=lnt id=hl-6-134><a class=lnlinks href=#hl-6-134>134</a>
</span><span class=lnt id=hl-6-135><a class=lnlinks href=#hl-6-135>135</a>
</span><span class=lnt id=hl-6-136><a class=lnlinks href=#hl-6-136>136</a>
</span><span class=lnt id=hl-6-137><a class=lnlinks href=#hl-6-137>137</a>
</span><span class=lnt id=hl-6-138><a class=lnlinks href=#hl-6-138>138</a>
</span><span class=lnt id=hl-6-139><a class=lnlinks href=#hl-6-139>139</a>
</span><span class=lnt id=hl-6-140><a class=lnlinks href=#hl-6-140>140</a>
</span><span class=lnt id=hl-6-141><a class=lnlinks href=#hl-6-141>141</a>
</span><span class=lnt id=hl-6-142><a class=lnlinks href=#hl-6-142>142</a>
</span><span class=lnt id=hl-6-143><a class=lnlinks href=#hl-6-143>143</a>
</span><span class=lnt id=hl-6-144><a class=lnlinks href=#hl-6-144>144</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python3</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>PCB 정보 기반 프로세스 모니터링 시스템
</span></span></span><span class=line><span class=cl><span class=s2>- /proc 파일시스템을 통해 PCB 정보에 접근
</span></span></span><span class=line><span class=cl><span class=s2>- 실시간 프로세스 상태 분석 및 이상 탐지
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>List</span><span class=p>,</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PCBInfo</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;PCB 핵심 정보를 나타내는 데이터 클래스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>pid</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    <span class=n>ppid</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>state</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>utime</span><span class=p>:</span> <span class=nb>int</span>      <span class=c1># 사용자 모드 CPU 시간 (PCB의 utime 필드)</span>
</span></span><span class=line><span class=cl>    <span class=n>stime</span><span class=p>:</span> <span class=nb>int</span>      <span class=c1># 커널 모드 CPU 시간 (PCB의 stime 필드)</span>
</span></span><span class=line><span class=cl>    <span class=n>vmsize</span><span class=p>:</span> <span class=nb>int</span>     <span class=c1># 가상 메모리 크기 (PCB의 mm 구조체 정보)</span>
</span></span><span class=line><span class=cl>    <span class=n>vmrss</span><span class=p>:</span> <span class=nb>int</span>      <span class=c1># 실제 메모리 사용량</span>
</span></span><span class=line><span class=cl>    <span class=n>num_threads</span><span class=p>:</span> <span class=nb>int</span> <span class=c1># 스레드 개수</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PCBMonitor</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;PCB 정보 기반 프로세스 모니터링 클래스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>processes</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=n>PCBInfo</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>monitoring</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>read_proc_stat</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pid</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>PCBInfo</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        /proc/[pid]/stat 파일에서 PCB 정보 읽기
</span></span></span><span class=line><span class=cl><span class=s2>        - 이 파일은 커널이 PCB 정보를 사용자 공간에 노출하는 인터페이스
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;/proc/</span><span class=si>{</span><span class=n>pid</span><span class=si>}</span><span class=s1>/stat&#39;</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>fields</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>()</span><span class=o>.</span><span class=n>split</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1># PCB 구조체의 주요 필드들을 파싱</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>PCBInfo</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>pid</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>fields</span><span class=p>[</span><span class=mi>0</span><span class=p>]),</span>           <span class=c1># PCB의 pid 필드</span>
</span></span><span class=line><span class=cl>                    <span class=n>ppid</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>fields</span><span class=p>[</span><span class=mi>3</span><span class=p>]),</span>          <span class=c1># PCB의 ppid 필드  </span>
</span></span><span class=line><span class=cl>                    <span class=n>name</span><span class=o>=</span><span class=n>fields</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>strip</span><span class=p>(</span><span class=s1>&#39;()&#39;</span><span class=p>),</span>   <span class=c1># 프로세스 명</span>
</span></span><span class=line><span class=cl>                    <span class=n>state</span><span class=o>=</span><span class=n>fields</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span>              <span class=c1># PCB의 state 필드</span>
</span></span><span class=line><span class=cl>                    <span class=n>utime</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>fields</span><span class=p>[</span><span class=mi>13</span><span class=p>]),</span>        <span class=c1># PCB의 utime 필드</span>
</span></span><span class=line><span class=cl>                    <span class=n>stime</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>fields</span><span class=p>[</span><span class=mi>14</span><span class=p>]),</span>        <span class=c1># PCB의 stime 필드</span>
</span></span><span class=line><span class=cl>                    <span class=n>vmsize</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>fields</span><span class=p>[</span><span class=mi>22</span><span class=p>]),</span>       <span class=c1># PCB-&gt;mm 구조체의 가상 메모리 정보</span>
</span></span><span class=line><span class=cl>                    <span class=n>vmrss</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>fields</span><span class=p>[</span><span class=mi>23</span><span class=p>])</span> <span class=o>*</span> <span class=mi>4096</span><span class=p>,</span> <span class=c1># 실제 메모리 사용량 (페이지 단위)</span>
</span></span><span class=line><span class=cl>                    <span class=n>num_threads</span><span class=o>=</span><span class=nb>int</span><span class=p>(</span><span class=n>fields</span><span class=p>[</span><span class=mi>19</span><span class=p>])</span>   <span class=c1># 스레드 개수</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=p>(</span><span class=ne>FileNotFoundError</span><span class=p>,</span> <span class=ne>ValueError</span><span class=p>,</span> <span class=ne>IndexError</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>scan_all_processes</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=n>PCBInfo</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        시스템의 모든 프로세스 PCB 정보 수집
</span></span></span><span class=line><span class=cl><span class=s2>        - /proc 디렉토리를 스캔하여 각 프로세스의 PCB 정보 수집
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>processes</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>entry</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>listdir</span><span class=p>(</span><span class=s1>&#39;/proc&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>entry</span><span class=o>.</span><span class=n>isdigit</span><span class=p>():</span>  <span class=c1># PID 디렉토리만 처리</span>
</span></span><span class=line><span class=cl>                <span class=n>pid</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>entry</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>pcb_info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>read_proc_stat</span><span class=p>(</span><span class=n>pid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>pcb_info</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>processes</span><span class=p>[</span><span class=n>pid</span><span class=p>]</span> <span class=o>=</span> <span class=n>pcb_info</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>processes</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>detect_anomalies</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>current</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=n>PCBInfo</span><span class=p>],</span> 
</span></span><span class=line><span class=cl>                        <span class=n>previous</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=n>PCBInfo</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        PCB 정보 기반 이상 프로세스 탐지
</span></span></span><span class=line><span class=cl><span class=s2>        - 메모리 사용량 급증, 좀비 프로세스 등 탐지
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>anomalies</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>pid</span><span class=p>,</span> <span class=n>pcb</span> <span class=ow>in</span> <span class=n>current</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=c1># 좀비 프로세스 탐지 (PCB state 필드 확인)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>pcb</span><span class=o>.</span><span class=n>state</span> <span class=o>==</span> <span class=s1>&#39;Z&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>anomalies</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;좀비 프로세스 탐지: PID </span><span class=si>{</span><span class=n>pid</span><span class=si>}</span><span class=s2> (</span><span class=si>{</span><span class=n>pcb</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 메모리 사용량 급증 탐지</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>pid</span> <span class=ow>in</span> <span class=n>previous</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>prev_pcb</span> <span class=o>=</span> <span class=n>previous</span><span class=p>[</span><span class=n>pid</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=n>memory_growth</span> <span class=o>=</span> <span class=n>pcb</span><span class=o>.</span><span class=n>vmrss</span> <span class=o>-</span> <span class=n>prev_pcb</span><span class=o>.</span><span class=n>vmrss</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>memory_growth</span> <span class=o>&gt;</span> <span class=mi>100</span> <span class=o>*</span> <span class=mi>1024</span> <span class=o>*</span> <span class=mi>1024</span><span class=p>:</span>  <span class=c1># 100MB 이상 증가</span>
</span></span><span class=line><span class=cl>                    <span class=n>anomalies</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                        <span class=sa>f</span><span class=s2>&#34;메모리 급증 탐지: PID </span><span class=si>{</span><span class=n>pid</span><span class=si>}</span><span class=s2> (</span><span class=si>{</span><span class=n>pcb</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>) &#34;</span>
</span></span><span class=line><span class=cl>                        <span class=sa>f</span><span class=s2>&#34;- </span><span class=si>{</span><span class=n>memory_growth</span> <span class=o>//</span> <span class=p>(</span><span class=mi>1024</span><span class=o>*</span><span class=mi>1024</span><span class=p>)</span><span class=si>}</span><span class=s2>MB 증가&#34;</span>
</span></span><span class=line><span class=cl>                    <span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 과도한 메모리 사용량 탐지</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>pcb</span><span class=o>.</span><span class=n>vmrss</span> <span class=o>&gt;</span> <span class=mi>1024</span> <span class=o>*</span> <span class=mi>1024</span> <span class=o>*</span> <span class=mi>1024</span><span class=p>:</span>  <span class=c1># 1GB 이상</span>
</span></span><span class=line><span class=cl>                <span class=n>anomalies</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=sa>f</span><span class=s2>&#34;과도한 메모리 사용: PID </span><span class=si>{</span><span class=n>pid</span><span class=si>}</span><span class=s2> (</span><span class=si>{</span><span class=n>pcb</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>) &#34;</span>
</span></span><span class=line><span class=cl>                    <span class=sa>f</span><span class=s2>&#34;- </span><span class=si>{</span><span class=n>pcb</span><span class=o>.</span><span class=n>vmrss</span> <span class=o>//</span> <span class=p>(</span><span class=mi>1024</span><span class=o>*</span><span class=mi>1024</span><span class=p>)</span><span class=si>}</span><span class=s2>MB&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>anomalies</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>start_monitoring</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>interval</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>5</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;실시간 PCB 모니터링 시작&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>monitoring</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=n>previous_scan</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=bp>self</span><span class=o>.</span><span class=n>monitoring</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>current_scan</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>scan_all_processes</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 이상 탐지 수행</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>previous_scan</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>anomalies</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>detect_anomalies</span><span class=p>(</span><span class=n>current_scan</span><span class=p>,</span> <span class=n>previous_scan</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>anomalies</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>[</span><span class=si>{</span><span class=n>time</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s1>&#39;%Y-%m-</span><span class=si>%d</span><span class=s1> %H:%M:%S&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>] 이상 탐지:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>for</span> <span class=n>anomaly</span> <span class=ow>in</span> <span class=n>anomalies</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  - </span><span class=si>{</span><span class=n>anomaly</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 통계 정보 출력</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>[</span><span class=si>{</span><span class=n>time</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s1>&#39;%Y-%m-</span><span class=si>%d</span><span class=s1> %H:%M:%S&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>] &#34;</span>
</span></span><span class=line><span class=cl>                  <span class=sa>f</span><span class=s2>&#34;프로세스 수: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>current_scan</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>previous_scan</span> <span class=o>=</span> <span class=n>current_scan</span>
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>interval</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>stop_monitoring</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;모니터링 중지&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>monitoring</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>monitor</span> <span class=o>=</span> <span class=n>PCBMonitor</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;PCB 기반 프로세스 모니터링 시작…&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Ctrl+C로 중지 가능&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>monitor</span><span class=o>.</span><span class=n>start_monitoring</span><span class=p>(</span><span class=n>interval</span><span class=o>=</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>KeyboardInterrupt</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>모니터링을 중지합니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>monitor</span><span class=o>.</span><span class=n>stop_monitoring</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=pcb-구조체의-생성과-컨텍스트-스위칭-원리-이해>PCB 구조체의 생성과 컨텍스트 스위칭 원리 이해<a hidden class=anchor aria-hidden=true href=#pcb-구조체의-생성과-컨텍스트-스위칭-원리-이해>#</a></h5><p><strong>학습 목표</strong>: PCB 구조체의 생성과 컨텍스트 스위칭 원리 이해<br><strong>시나리오</strong>: 운영체제에서 두 개 프로세스의 상태 전환 (문맥 교환) 구현<br><strong>시스템 구성</strong>:</p><ul><li>PCB 구조체</li><li>CPU(레지스터, 프로그램 카운터)</li><li>스케줄러 모듈</li></ul><p><strong>시스템 구성 다이어그램</strong>:</p><pre class=mermaid>flowchart TB
    Scheduler[스케줄러]
    PCB_A[PCB_A]
    PCB_B[PCB_B]
    Scheduler --&gt; PCB_A
    Scheduler --&gt; PCB_B
    PCB_A --&gt;|상태 저장| Scheduler
    PCB_B --&gt;|상태 복원| Scheduler
</pre><p><strong>Workflow</strong>:</p><ol><li>프로세스 A 실행 → PCB_A 에 상태 저장</li><li>스케줄러가 프로세스 B 로 전환 → PCB_B 정보 복원</li><li>컨텍스트 스위칭 완료</li></ol><p><strong>핵심 역할</strong>:</p><ul><li>PCB 는 프로세스별 실행 상태 정보 저장 및 복원을 담당하며, 문맥 교환 시 핵심 데이터를 제공</li></ul><p><strong>유무에 따른 차이점</strong>:</p><ul><li>도입 전: 프로세스 상태 관리 불가, 멀티태스킹 불완전</li><li>도입 후: 안전하고 효율적인 문맥 교환, 오류 복구 용이</li></ul><p><strong>구현 예시</strong> (Python):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span><span class=lnt id=hl-8-15><a class=lnlinks href=#hl-8-15>15</a>
</span><span class=lnt id=hl-8-16><a class=lnlinks href=#hl-8-16>16</a>
</span><span class=lnt id=hl-8-17><a class=lnlinks href=#hl-8-17>17</a>
</span><span class=lnt id=hl-8-18><a class=lnlinks href=#hl-8-18>18</a>
</span><span class=lnt id=hl-8-19><a class=lnlinks href=#hl-8-19>19</a>
</span><span class=lnt id=hl-8-20><a class=lnlinks href=#hl-8-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># PCB 구조체 예시 및 컨텍스트 스위칭</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ProcessControlBlock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pid</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>pid</span> <span class=o>=</span> <span class=n>pid</span>  <span class=c1># 프로세스 식별자</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>state</span> <span class=o>=</span> <span class=s1>&#39;ready&#39;</span>  <span class=c1># 상태 (ready, running, waiting)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>program_counter</span> <span class=o>=</span> <span class=mi>0</span>  <span class=c1># 프로그램 카운터</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>registers</span> <span class=o>=</span> <span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>*</span><span class=mi>8</span>  <span class=c1># CPU 레지스터</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>open_files</span> <span class=o>=</span> <span class=p>[]</span>    <span class=c1># 열린 파일 목록</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=c1># 컨텍스트 스위칭 함수</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>context_switch</span><span class=p>(</span><span class=n>current_pcb</span><span class=p>,</span> <span class=n>next_pcb</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    컨텍스트 스위칭 핵심 로직
</span></span></span><span class=line><span class=cl><span class=s2>    PCB의 정보를 활용하여 각 프로세스의 상태를 저장/복원
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=c1># 현재 프로세스 상태 저장</span>
</span></span><span class=line><span class=cl>    <span class=n>current_pcb</span><span class=o>.</span><span class=n>state</span> <span class=o>=</span> <span class=s1>&#39;waiting&#39;</span>
</span></span><span class=line><span class=cl>    <span class=c1># 다음 프로세스 상태 복원</span>
</span></span><span class=line><span class=cl>    <span class=n>next_pcb</span><span class=o>.</span><span class=n>state</span> <span class=o>=</span> <span class=s1>&#39;running&#39;</span>
</span></span><span class=line><span class=cl>    <span class=c1># 기타 상태 전환 및 CPU 자원 할당</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=pcb-유사-정보-스케줄링컨텍스트-스위치-를-수집판별>PCB 유사 정보 (스케줄링/컨텍스트 스위치) 를 수집·판별<a hidden class=anchor aria-hidden=true href=#pcb-유사-정보-스케줄링컨텍스트-스위치-를-수집판별>#</a></h5><blockquote><p><strong>목적</strong>: PCB 가 노출하는 관측 정보를 이용해 <strong>컨텍스트 스위치 과다</strong>를 탐지</p></blockquote><p><strong>학습 목표</strong>: <code>/proc</code> 를 통해 PCB 유사 정보 (스케줄링/컨텍스트 스위치) 를 수집·판별<br><strong>시나리오</strong>: 특정 서비스 PID 의 컨텍스트 스위치 폭증 시 경고<br><strong>시스템 구성</strong>:</p><ul><li>Target 프로세스, Observer(Python 스크립트), 알림 (Webhook)</li></ul><p><strong>시스템 구성 다이어그램</strong>:</p><pre class=mermaid>graph TB
  T[Target Process] --&gt;|/proc/&lt;pid&gt;/status| O[Observer Script]
  O --&gt; A[Alert/Webhook]
</pre><p><strong>Workflow</strong></p><ol><li>PID 입력 → <code>/proc/&lt;pid>/status</code> 파싱</li><li><code>voluntary_ctxt_switches</code>/<code>nonvoluntary_ctxt_switches</code> 증분 계산</li><li>임계치 초과 시 경고</li></ol><p><strong>핵심 역할</strong>: PCB 통계 필드 기반의 <strong>운영 경보</strong><br><strong>유무에 따른 차이점</strong>:</p><ul><li>도입 전: CPU 지연의 원인 파악 지연</li><li>도입 후: 스레드 경쟁/락 경합을 빠르게 식별</li></ul><p><strong>구현 예시 (Python)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span><span class=lnt id=hl-10-12><a class=lnlinks href=#hl-10-12>12</a>
</span><span class=lnt id=hl-10-13><a class=lnlinks href=#hl-10-13>13</a>
</span><span class=lnt id=hl-10-14><a class=lnlinks href=#hl-10-14>14</a>
</span><span class=lnt id=hl-10-15><a class=lnlinks href=#hl-10-15>15</a>
</span><span class=lnt id=hl-10-16><a class=lnlinks href=#hl-10-16>16</a>
</span><span class=lnt id=hl-10-17><a class=lnlinks href=#hl-10-17>17</a>
</span><span class=lnt id=hl-10-18><a class=lnlinks href=#hl-10-18>18</a>
</span><span class=lnt id=hl-10-19><a class=lnlinks href=#hl-10-19>19</a>
</span><span class=lnt id=hl-10-20><a class=lnlinks href=#hl-10-20>20</a>
</span><span class=lnt id=hl-10-21><a class=lnlinks href=#hl-10-21>21</a>
</span><span class=lnt id=hl-10-22><a class=lnlinks href=#hl-10-22>22</a>
</span><span class=lnt id=hl-10-23><a class=lnlinks href=#hl-10-23>23</a>
</span><span class=lnt id=hl-10-24><a class=lnlinks href=#hl-10-24>24</a>
</span><span class=lnt id=hl-10-25><a class=lnlinks href=#hl-10-25>25</a>
</span><span class=lnt id=hl-10-26><a class=lnlinks href=#hl-10-26>26</a>
</span><span class=lnt id=hl-10-27><a class=lnlinks href=#hl-10-27>27</a>
</span><span class=lnt id=hl-10-28><a class=lnlinks href=#hl-10-28>28</a>
</span><span class=lnt id=hl-10-29><a class=lnlinks href=#hl-10-29>29</a>
</span><span class=lnt id=hl-10-30><a class=lnlinks href=#hl-10-30>30</a>
</span><span class=lnt id=hl-10-31><a class=lnlinks href=#hl-10-31>31</a>
</span><span class=lnt id=hl-10-32><a class=lnlinks href=#hl-10-32>32</a>
</span><span class=lnt id=hl-10-33><a class=lnlinks href=#hl-10-33>33</a>
</span><span class=lnt id=hl-10-34><a class=lnlinks href=#hl-10-34>34</a>
</span><span class=lnt id=hl-10-35><a class=lnlinks href=#hl-10-35>35</a>
</span><span class=lnt id=hl-10-36><a class=lnlinks href=#hl-10-36>36</a>
</span><span class=lnt id=hl-10-37><a class=lnlinks href=#hl-10-37>37</a>
</span><span class=lnt id=hl-10-38><a class=lnlinks href=#hl-10-38>38</a>
</span><span class=lnt id=hl-10-39><a class=lnlinks href=#hl-10-39>39</a>
</span><span class=lnt id=hl-10-40><a class=lnlinks href=#hl-10-40>40</a>
</span><span class=lnt id=hl-10-41><a class=lnlinks href=#hl-10-41>41</a>
</span><span class=lnt id=hl-10-42><a class=lnlinks href=#hl-10-42>42</a>
</span><span class=lnt id=hl-10-43><a class=lnlinks href=#hl-10-43>43</a>
</span><span class=lnt id=hl-10-44><a class=lnlinks href=#hl-10-44>44</a>
</span><span class=lnt id=hl-10-45><a class=lnlinks href=#hl-10-45>45</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python3</span>
</span></span><span class=line><span class=cl><span class=c1># PCB 관측 기반 컨텍스트 스위치 급증 탐지기</span>
</span></span><span class=line><span class=cl><span class=c1># - 주제 연관: PCB가 /proc/&lt;pid&gt;/status로 노출하는 ctxt_switches를 사용</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>__future__</span> <span class=kn>import</span> <span class=n>annotations</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span><span class=o>,</span> <span class=nn>sys</span><span class=o>,</span> <span class=nn>re</span><span class=o>,</span> <span class=nn>requests</span>  <span class=c1># requests는 선택사항(웹훅용)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>STATUS_KEYS</span> <span class=o>=</span> <span class=p>(</span><span class=s2>&#34;voluntary_ctxt_switches&#34;</span><span class=p>,</span> <span class=s2>&#34;nonvoluntary_ctxt_switches&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>read_ctxt</span><span class=p>(</span><span class=n>pid</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>m</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;/proc/</span><span class=si>{</span><span class=n>pid</span><span class=si>}</span><span class=s2>/status&#34;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=n>STATUS_KEYS</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>line</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=n>k</span> <span class=o>+</span> <span class=s2>&#34;:&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                    <span class=n>m</span><span class=p>[</span><span class=n>k</span><span class=p>]</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=sa>r</span><span class=s2>&#34;\d+&#34;</span><span class=p>,</span> <span class=n>line</span><span class=p>)[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>m</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>2</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s2>&#34;필드 파싱 실패&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>m</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>monitor</span><span class=p>(</span><span class=n>pid</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>sec</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>2.0</span><span class=p>,</span> <span class=n>threshold</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>5000</span><span class=p>,</span> <span class=n>webhook</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>prev</span> <span class=o>=</span> <span class=n>read_ctxt</span><span class=p>(</span><span class=n>pid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>sec</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>cur</span> <span class=o>=</span> <span class=n>read_ctxt</span><span class=p>(</span><span class=n>pid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>dv</span> <span class=o>=</span> <span class=n>cur</span><span class=p>[</span><span class=s2>&#34;voluntary_ctxt_switches&#34;</span><span class=p>]</span> <span class=o>-</span> <span class=n>prev</span><span class=p>[</span><span class=s2>&#34;voluntary_ctxt_switches&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>dnv</span> <span class=o>=</span> <span class=n>cur</span><span class=p>[</span><span class=s2>&#34;nonvoluntary_ctxt_switches&#34;</span><span class=p>]</span> <span class=o>-</span> <span class=n>prev</span><span class=p>[</span><span class=s2>&#34;nonvoluntary_ctxt_switches&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>total</span> <span class=o>=</span> <span class=n>dv</span> <span class=o>+</span> <span class=n>dnv</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[</span><span class=si>{</span><span class=n>time</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s1>&#39;%H:%M:%S&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>] dv=</span><span class=si>{</span><span class=n>dv</span><span class=si>}</span><span class=s2> dnv=</span><span class=si>{</span><span class=n>dnv</span><span class=si>}</span><span class=s2> total=</span><span class=si>{</span><span class=n>total</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>total</span> <span class=o>&gt;</span> <span class=n>threshold</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>msg</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;[경고] PID </span><span class=si>{</span><span class=n>pid</span><span class=si>}</span><span class=s2> 컨텍스트 스위치 급증: </span><span class=si>{</span><span class=n>total</span><span class=si>}</span><span class=s2>/~</span><span class=si>{</span><span class=n>sec</span><span class=si>}</span><span class=s2>s&#34;</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>webhook</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=n>webhook</span><span class=p>,</span> <span class=n>json</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;text&#34;</span><span class=p>:</span> <span class=n>msg</span><span class=p>},</span> <span class=n>timeout</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>pass</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>prev</span> <span class=o>=</span> <span class=n>cur</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>)</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;사용법: monitor.py &lt;pid&gt; [threshold]&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>pid</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>[</span><span class=mi>1</span><span class=p>]);</span> <span class=n>thr</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span> <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>2</span> <span class=k>else</span> <span class=mi>5000</span>
</span></span><span class=line><span class=cl>    <span class=n>monitor</span><span class=p>(</span><span class=n>pid</span><span class=p>,</span> <span class=n>threshold</span><span class=o>=</span><span class=n>thr</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>참고: <code>voluntary/nonvoluntary_ctxt_switches</code> 필드는 리눅스에서 문서화되어 있음.</p><h4 id=실제-도입-사례>실제 도입 사례<a hidden class=anchor aria-hidden=true href=#실제-도입-사례>#</a></h4><ul><li>컨테이너와 VM 의 " 프로세스 " 를 안전하게 <strong>나누고</strong>(격리), 필요한 만큼만 <strong>나눠 쓰고</strong>(cgroup), <strong>잘 돌고 있는지 본다</strong>(eBPF/<code>/proc</code>) 가 핵심이다.</li><li>문제가 보이면 <strong>자동으로 살려낸다</strong>(systemd 재시작/워치독), 성능이 아쉬우면 <strong>CPU/메모리 붙잡아 준다</strong>(affinity/NUMA).</li><li>이 모든 조작의 단위가 결국 " 프로세스 " 이고, 그 상태와 연결 고리가 <strong>PCB</strong>에 있다.</li></ul><table><thead><tr><th>분야/시나리오</th><th>핵심 조합 (기술)</th><th>PCB 관점의 포인트</th><th>운영/비즈니스 효과</th></tr></thead><tbody><tr><td>컨테이너 관측/진단</td><td>eBPF/bpftrace 로 <code>sched_switch</code>·락 이벤트 추적</td><td>컨텍스트 스위치·스케줄링 메타데이터를 실시간 관측</td><td>과분할·경합 조기 탐지, SLO 선제 대응</td></tr><tr><td>컨테이너 실행/격리</td><td>Kubernetes cgroup v2 + 네임스페이스 + runc(OCI)</td><td>PCB 의 스케줄링/자원 연결이 cgroup/NS 와 연동</td><td>한 노드에서 안전한 다중 테넌시, 자원 한도 보장</td></tr><tr><td>호스트/프로세스 모니터링</td><td>Node Exporter → Prometheus/Grafana, <code>/proc</code></td><td>PCB 관련 지표 (시간·스케줄링·메모리) 를 표준 메트릭화</td><td>성능/이상 탐지·용량 계획·알림 자동화</td></tr><tr><td>실시간/게임 서버</td><td><code>sched_setaffinity</code>/<code>taskset</code>, <code>numactl</code>/<code>libnuma</code></td><td>PCB 의 affinity/메모리 바인딩 필드를 활용</td><td>캐시·지역성 최적화로 지연 감소·처리량 향상</td></tr><tr><td>클라우드 가상화</td><td>Hypervisor(예: AWS Nitro)</td><td>게스트 OS 의 PCB 는 VM 내부, 하이퍼바이저가 상위 스케줄링/격리</td><td>고밀도·고성능 VM 제공, 강한 격리</td></tr><tr><td>고신뢰 운영</td><td>systemd <code>Restart=</code>·<code>WatchdogSec=</code>(쿠블릿 가이드 포함)</td><td>프로세스 생존성 관리 (상태 모니터·자동 재기동)</td><td>중단 시간 축소, 자가치유 운영</td></tr></tbody></table><ul><li>컨테이너: <strong>cgroup/NS/OCI</strong>로 격리·제어, <strong>eBPF</strong>로 실시간 관측.</li><li>모니터링: <strong><code>/proc</code>→Prometheus</strong>로 표준 지표화.</li><li>성능 튜닝: <strong>Affinity/NUMA</strong>로 지역성 확보.</li><li>대규모 인프라: <strong>하이퍼바이저</strong>가 스케줄링/격리를 상위 레벨에서 보강.</li><li>고신뢰성: <strong>systemd 재시작/워치독</strong>으로 자가치유.</li></ul><h4 id=실제-도입-사례의-코드-구현>실제 도입 사례의 코드 구현<a hidden class=anchor aria-hidden=true href=#실제-도입-사례의-코드-구현>#</a></h4><h5 id=kubernetes-cri-구현>Kubernetes CRI 구현<a hidden class=anchor aria-hidden=true href=#kubernetes-cri-구현>#</a></h5><p><strong>사례 선정</strong>: Kubernetes Container Runtime Interface (CRI) 구현</p><p><strong>비즈니스 배경</strong>: Kubernetes 가 다양한 컨테이너 런타임 (Docker, containerd, CRI-O) 과 통합하기 위해 표준 인터페이스가 필요했다. 각 컨테이너는 독립적인 프로세스로 실행되며, PCB 를 통해 상태 관리와 모니터링이 이루어진다.</p><p><strong>기술적 요구사항</strong>:</p><ul><li>컨테이너 프로세스 생명주기 관리</li><li>실시간 자원 사용량 모니터링</li><li>컨테이너 간 격리 보장</li><li>성능 메트릭 수집 및 보고</li></ul><p><strong>시스템 구성</strong>:</p><ul><li>Kubernetes Kubelet (CRI 클라이언트)</li><li>Container Runtime (CRI 서버)</li><li>Container Process (PCB 로 관리되는 프로세스)</li><li>모니터링 시스템 (PCB 정보 수집)</li></ul><p><strong>시스템 구성 다이어그램</strong>:</p><pre class=mermaid>graph TB
    subgraph &#34;Kubernetes Node&#34;
        Kubelet[Kubelet&lt;br/&gt;CRI Client]
        Runtime[Container Runtime&lt;br/&gt;CRI Server]
        
        subgraph &#34;Container Processes&#34;
            PCB1[Container 1&lt;br/&gt;PCB]
            PCB2[Container 2&lt;br/&gt;PCB]
            PCB3[Container 3&lt;br/&gt;PCB]
        end
        
        subgraph &#34;Monitoring&#34;
            Cadvisor[cAdvisor&lt;br/&gt;Metrics Collector]
            ProcFS[&#34;/proc filesystem&lt;br/&gt;PCB Information&#34;]
        end
    end
    
    Kubelet --&gt;|gRPC| Runtime
    Runtime --&gt; PCB1
    Runtime --&gt; PCB2
    Runtime --&gt; PCB3
    
    Cadvisor --&gt; ProcFS
    ProcFS --&gt; PCB1
    ProcFS --&gt; PCB2
    ProcFS --&gt; PCB3
</pre><p><strong>Workflow</strong>:</p><ol><li>Kubelet 이 Container Runtime 에 컨테이너 생성 요청</li><li>Runtime 이 새로운 프로세스를 생성하고 PCB 할당</li><li>PCB 를 통해 컨테이너 프로세스 상태 추적</li><li>cAdvisor 가 PCB 정보를 수집하여 메트릭 생성</li><li>Kubelet 이 런타임 상태를 모니터링하고 스케줄링 결정</li></ol><p><strong>핵심 역할</strong>:</p><ul><li>PCB 는 각 컨테이너 프로세스의 완전한 상태 정보 제공</li><li>컨테이너 격리와 자원 제한 구현의 기반</li><li>실시간 성능 모니터링과 문제 진단 지원</li></ul><p><strong>유무에 따른 차이점</strong>:</p><ul><li>PCB 활용 시: 프로세스별 정확한 자원 사용량 추적, 세밀한 제어 가능</li><li>PCB 미활용 시: 전체 시스템 수준의 대략적 정보만 가능, 격리 보장 어려움</li></ul><p><strong>구현 예시</strong> (Go):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1>  1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2>  2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3>  3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4>  4</a>
</span><span class=lnt id=hl-12-5><a class=lnlinks href=#hl-12-5>  5</a>
</span><span class=lnt id=hl-12-6><a class=lnlinks href=#hl-12-6>  6</a>
</span><span class=lnt id=hl-12-7><a class=lnlinks href=#hl-12-7>  7</a>
</span><span class=lnt id=hl-12-8><a class=lnlinks href=#hl-12-8>  8</a>
</span><span class=lnt id=hl-12-9><a class=lnlinks href=#hl-12-9>  9</a>
</span><span class=lnt id=hl-12-10><a class=lnlinks href=#hl-12-10> 10</a>
</span><span class=lnt id=hl-12-11><a class=lnlinks href=#hl-12-11> 11</a>
</span><span class=lnt id=hl-12-12><a class=lnlinks href=#hl-12-12> 12</a>
</span><span class=lnt id=hl-12-13><a class=lnlinks href=#hl-12-13> 13</a>
</span><span class=lnt id=hl-12-14><a class=lnlinks href=#hl-12-14> 14</a>
</span><span class=lnt id=hl-12-15><a class=lnlinks href=#hl-12-15> 15</a>
</span><span class=lnt id=hl-12-16><a class=lnlinks href=#hl-12-16> 16</a>
</span><span class=lnt id=hl-12-17><a class=lnlinks href=#hl-12-17> 17</a>
</span><span class=lnt id=hl-12-18><a class=lnlinks href=#hl-12-18> 18</a>
</span><span class=lnt id=hl-12-19><a class=lnlinks href=#hl-12-19> 19</a>
</span><span class=lnt id=hl-12-20><a class=lnlinks href=#hl-12-20> 20</a>
</span><span class=lnt id=hl-12-21><a class=lnlinks href=#hl-12-21> 21</a>
</span><span class=lnt id=hl-12-22><a class=lnlinks href=#hl-12-22> 22</a>
</span><span class=lnt id=hl-12-23><a class=lnlinks href=#hl-12-23> 23</a>
</span><span class=lnt id=hl-12-24><a class=lnlinks href=#hl-12-24> 24</a>
</span><span class=lnt id=hl-12-25><a class=lnlinks href=#hl-12-25> 25</a>
</span><span class=lnt id=hl-12-26><a class=lnlinks href=#hl-12-26> 26</a>
</span><span class=lnt id=hl-12-27><a class=lnlinks href=#hl-12-27> 27</a>
</span><span class=lnt id=hl-12-28><a class=lnlinks href=#hl-12-28> 28</a>
</span><span class=lnt id=hl-12-29><a class=lnlinks href=#hl-12-29> 29</a>
</span><span class=lnt id=hl-12-30><a class=lnlinks href=#hl-12-30> 30</a>
</span><span class=lnt id=hl-12-31><a class=lnlinks href=#hl-12-31> 31</a>
</span><span class=lnt id=hl-12-32><a class=lnlinks href=#hl-12-32> 32</a>
</span><span class=lnt id=hl-12-33><a class=lnlinks href=#hl-12-33> 33</a>
</span><span class=lnt id=hl-12-34><a class=lnlinks href=#hl-12-34> 34</a>
</span><span class=lnt id=hl-12-35><a class=lnlinks href=#hl-12-35> 35</a>
</span><span class=lnt id=hl-12-36><a class=lnlinks href=#hl-12-36> 36</a>
</span><span class=lnt id=hl-12-37><a class=lnlinks href=#hl-12-37> 37</a>
</span><span class=lnt id=hl-12-38><a class=lnlinks href=#hl-12-38> 38</a>
</span><span class=lnt id=hl-12-39><a class=lnlinks href=#hl-12-39> 39</a>
</span><span class=lnt id=hl-12-40><a class=lnlinks href=#hl-12-40> 40</a>
</span><span class=lnt id=hl-12-41><a class=lnlinks href=#hl-12-41> 41</a>
</span><span class=lnt id=hl-12-42><a class=lnlinks href=#hl-12-42> 42</a>
</span><span class=lnt id=hl-12-43><a class=lnlinks href=#hl-12-43> 43</a>
</span><span class=lnt id=hl-12-44><a class=lnlinks href=#hl-12-44> 44</a>
</span><span class=lnt id=hl-12-45><a class=lnlinks href=#hl-12-45> 45</a>
</span><span class=lnt id=hl-12-46><a class=lnlinks href=#hl-12-46> 46</a>
</span><span class=lnt id=hl-12-47><a class=lnlinks href=#hl-12-47> 47</a>
</span><span class=lnt id=hl-12-48><a class=lnlinks href=#hl-12-48> 48</a>
</span><span class=lnt id=hl-12-49><a class=lnlinks href=#hl-12-49> 49</a>
</span><span class=lnt id=hl-12-50><a class=lnlinks href=#hl-12-50> 50</a>
</span><span class=lnt id=hl-12-51><a class=lnlinks href=#hl-12-51> 51</a>
</span><span class=lnt id=hl-12-52><a class=lnlinks href=#hl-12-52> 52</a>
</span><span class=lnt id=hl-12-53><a class=lnlinks href=#hl-12-53> 53</a>
</span><span class=lnt id=hl-12-54><a class=lnlinks href=#hl-12-54> 54</a>
</span><span class=lnt id=hl-12-55><a class=lnlinks href=#hl-12-55> 55</a>
</span><span class=lnt id=hl-12-56><a class=lnlinks href=#hl-12-56> 56</a>
</span><span class=lnt id=hl-12-57><a class=lnlinks href=#hl-12-57> 57</a>
</span><span class=lnt id=hl-12-58><a class=lnlinks href=#hl-12-58> 58</a>
</span><span class=lnt id=hl-12-59><a class=lnlinks href=#hl-12-59> 59</a>
</span><span class=lnt id=hl-12-60><a class=lnlinks href=#hl-12-60> 60</a>
</span><span class=lnt id=hl-12-61><a class=lnlinks href=#hl-12-61> 61</a>
</span><span class=lnt id=hl-12-62><a class=lnlinks href=#hl-12-62> 62</a>
</span><span class=lnt id=hl-12-63><a class=lnlinks href=#hl-12-63> 63</a>
</span><span class=lnt id=hl-12-64><a class=lnlinks href=#hl-12-64> 64</a>
</span><span class=lnt id=hl-12-65><a class=lnlinks href=#hl-12-65> 65</a>
</span><span class=lnt id=hl-12-66><a class=lnlinks href=#hl-12-66> 66</a>
</span><span class=lnt id=hl-12-67><a class=lnlinks href=#hl-12-67> 67</a>
</span><span class=lnt id=hl-12-68><a class=lnlinks href=#hl-12-68> 68</a>
</span><span class=lnt id=hl-12-69><a class=lnlinks href=#hl-12-69> 69</a>
</span><span class=lnt id=hl-12-70><a class=lnlinks href=#hl-12-70> 70</a>
</span><span class=lnt id=hl-12-71><a class=lnlinks href=#hl-12-71> 71</a>
</span><span class=lnt id=hl-12-72><a class=lnlinks href=#hl-12-72> 72</a>
</span><span class=lnt id=hl-12-73><a class=lnlinks href=#hl-12-73> 73</a>
</span><span class=lnt id=hl-12-74><a class=lnlinks href=#hl-12-74> 74</a>
</span><span class=lnt id=hl-12-75><a class=lnlinks href=#hl-12-75> 75</a>
</span><span class=lnt id=hl-12-76><a class=lnlinks href=#hl-12-76> 76</a>
</span><span class=lnt id=hl-12-77><a class=lnlinks href=#hl-12-77> 77</a>
</span><span class=lnt id=hl-12-78><a class=lnlinks href=#hl-12-78> 78</a>
</span><span class=lnt id=hl-12-79><a class=lnlinks href=#hl-12-79> 79</a>
</span><span class=lnt id=hl-12-80><a class=lnlinks href=#hl-12-80> 80</a>
</span><span class=lnt id=hl-12-81><a class=lnlinks href=#hl-12-81> 81</a>
</span><span class=lnt id=hl-12-82><a class=lnlinks href=#hl-12-82> 82</a>
</span><span class=lnt id=hl-12-83><a class=lnlinks href=#hl-12-83> 83</a>
</span><span class=lnt id=hl-12-84><a class=lnlinks href=#hl-12-84> 84</a>
</span><span class=lnt id=hl-12-85><a class=lnlinks href=#hl-12-85> 85</a>
</span><span class=lnt id=hl-12-86><a class=lnlinks href=#hl-12-86> 86</a>
</span><span class=lnt id=hl-12-87><a class=lnlinks href=#hl-12-87> 87</a>
</span><span class=lnt id=hl-12-88><a class=lnlinks href=#hl-12-88> 88</a>
</span><span class=lnt id=hl-12-89><a class=lnlinks href=#hl-12-89> 89</a>
</span><span class=lnt id=hl-12-90><a class=lnlinks href=#hl-12-90> 90</a>
</span><span class=lnt id=hl-12-91><a class=lnlinks href=#hl-12-91> 91</a>
</span><span class=lnt id=hl-12-92><a class=lnlinks href=#hl-12-92> 92</a>
</span><span class=lnt id=hl-12-93><a class=lnlinks href=#hl-12-93> 93</a>
</span><span class=lnt id=hl-12-94><a class=lnlinks href=#hl-12-94> 94</a>
</span><span class=lnt id=hl-12-95><a class=lnlinks href=#hl-12-95> 95</a>
</span><span class=lnt id=hl-12-96><a class=lnlinks href=#hl-12-96> 96</a>
</span><span class=lnt id=hl-12-97><a class=lnlinks href=#hl-12-97> 97</a>
</span><span class=lnt id=hl-12-98><a class=lnlinks href=#hl-12-98> 98</a>
</span><span class=lnt id=hl-12-99><a class=lnlinks href=#hl-12-99> 99</a>
</span><span class=lnt id=hl-12-100><a class=lnlinks href=#hl-12-100>100</a>
</span><span class=lnt id=hl-12-101><a class=lnlinks href=#hl-12-101>101</a>
</span><span class=lnt id=hl-12-102><a class=lnlinks href=#hl-12-102>102</a>
</span><span class=lnt id=hl-12-103><a class=lnlinks href=#hl-12-103>103</a>
</span><span class=lnt id=hl-12-104><a class=lnlinks href=#hl-12-104>104</a>
</span><span class=lnt id=hl-12-105><a class=lnlinks href=#hl-12-105>105</a>
</span><span class=lnt id=hl-12-106><a class=lnlinks href=#hl-12-106>106</a>
</span><span class=lnt id=hl-12-107><a class=lnlinks href=#hl-12-107>107</a>
</span><span class=lnt id=hl-12-108><a class=lnlinks href=#hl-12-108>108</a>
</span><span class=lnt id=hl-12-109><a class=lnlinks href=#hl-12-109>109</a>
</span><span class=lnt id=hl-12-110><a class=lnlinks href=#hl-12-110>110</a>
</span><span class=lnt id=hl-12-111><a class=lnlinks href=#hl-12-111>111</a>
</span><span class=lnt id=hl-12-112><a class=lnlinks href=#hl-12-112>112</a>
</span><span class=lnt id=hl-12-113><a class=lnlinks href=#hl-12-113>113</a>
</span><span class=lnt id=hl-12-114><a class=lnlinks href=#hl-12-114>114</a>
</span><span class=lnt id=hl-12-115><a class=lnlinks href=#hl-12-115>115</a>
</span><span class=lnt id=hl-12-116><a class=lnlinks href=#hl-12-116>116</a>
</span><span class=lnt id=hl-12-117><a class=lnlinks href=#hl-12-117>117</a>
</span><span class=lnt id=hl-12-118><a class=lnlinks href=#hl-12-118>118</a>
</span><span class=lnt id=hl-12-119><a class=lnlinks href=#hl-12-119>119</a>
</span><span class=lnt id=hl-12-120><a class=lnlinks href=#hl-12-120>120</a>
</span><span class=lnt id=hl-12-121><a class=lnlinks href=#hl-12-121>121</a>
</span><span class=lnt id=hl-12-122><a class=lnlinks href=#hl-12-122>122</a>
</span><span class=lnt id=hl-12-123><a class=lnlinks href=#hl-12-123>123</a>
</span><span class=lnt id=hl-12-124><a class=lnlinks href=#hl-12-124>124</a>
</span><span class=lnt id=hl-12-125><a class=lnlinks href=#hl-12-125>125</a>
</span><span class=lnt id=hl-12-126><a class=lnlinks href=#hl-12-126>126</a>
</span><span class=lnt id=hl-12-127><a class=lnlinks href=#hl-12-127>127</a>
</span><span class=lnt id=hl-12-128><a class=lnlinks href=#hl-12-128>128</a>
</span><span class=lnt id=hl-12-129><a class=lnlinks href=#hl-12-129>129</a>
</span><span class=lnt id=hl-12-130><a class=lnlinks href=#hl-12-130>130</a>
</span><span class=lnt id=hl-12-131><a class=lnlinks href=#hl-12-131>131</a>
</span><span class=lnt id=hl-12-132><a class=lnlinks href=#hl-12-132>132</a>
</span><span class=lnt id=hl-12-133><a class=lnlinks href=#hl-12-133>133</a>
</span><span class=lnt id=hl-12-134><a class=lnlinks href=#hl-12-134>134</a>
</span><span class=lnt id=hl-12-135><a class=lnlinks href=#hl-12-135>135</a>
</span><span class=lnt id=hl-12-136><a class=lnlinks href=#hl-12-136>136</a>
</span><span class=lnt id=hl-12-137><a class=lnlinks href=#hl-12-137>137</a>
</span><span class=lnt id=hl-12-138><a class=lnlinks href=#hl-12-138>138</a>
</span><span class=lnt id=hl-12-139><a class=lnlinks href=#hl-12-139>139</a>
</span><span class=lnt id=hl-12-140><a class=lnlinks href=#hl-12-140>140</a>
</span><span class=lnt id=hl-12-141><a class=lnlinks href=#hl-12-141>141</a>
</span><span class=lnt id=hl-12-142><a class=lnlinks href=#hl-12-142>142</a>
</span><span class=lnt id=hl-12-143><a class=lnlinks href=#hl-12-143>143</a>
</span><span class=lnt id=hl-12-144><a class=lnlinks href=#hl-12-144>144</a>
</span><span class=lnt id=hl-12-145><a class=lnlinks href=#hl-12-145>145</a>
</span><span class=lnt id=hl-12-146><a class=lnlinks href=#hl-12-146>146</a>
</span><span class=lnt id=hl-12-147><a class=lnlinks href=#hl-12-147>147</a>
</span><span class=lnt id=hl-12-148><a class=lnlinks href=#hl-12-148>148</a>
</span><span class=lnt id=hl-12-149><a class=lnlinks href=#hl-12-149>149</a>
</span><span class=lnt id=hl-12-150><a class=lnlinks href=#hl-12-150>150</a>
</span><span class=lnt id=hl-12-151><a class=lnlinks href=#hl-12-151>151</a>
</span><span class=lnt id=hl-12-152><a class=lnlinks href=#hl-12-152>152</a>
</span><span class=lnt id=hl-12-153><a class=lnlinks href=#hl-12-153>153</a>
</span><span class=lnt id=hl-12-154><a class=lnlinks href=#hl-12-154>154</a>
</span><span class=lnt id=hl-12-155><a class=lnlinks href=#hl-12-155>155</a>
</span><span class=lnt id=hl-12-156><a class=lnlinks href=#hl-12-156>156</a>
</span><span class=lnt id=hl-12-157><a class=lnlinks href=#hl-12-157>157</a>
</span><span class=lnt id=hl-12-158><a class=lnlinks href=#hl-12-158>158</a>
</span><span class=lnt id=hl-12-159><a class=lnlinks href=#hl-12-159>159</a>
</span><span class=lnt id=hl-12-160><a class=lnlinks href=#hl-12-160>160</a>
</span><span class=lnt id=hl-12-161><a class=lnlinks href=#hl-12-161>161</a>
</span><span class=lnt id=hl-12-162><a class=lnlinks href=#hl-12-162>162</a>
</span><span class=lnt id=hl-12-163><a class=lnlinks href=#hl-12-163>163</a>
</span><span class=lnt id=hl-12-164><a class=lnlinks href=#hl-12-164>164</a>
</span><span class=lnt id=hl-12-165><a class=lnlinks href=#hl-12-165>165</a>
</span><span class=lnt id=hl-12-166><a class=lnlinks href=#hl-12-166>166</a>
</span><span class=lnt id=hl-12-167><a class=lnlinks href=#hl-12-167>167</a>
</span><span class=lnt id=hl-12-168><a class=lnlinks href=#hl-12-168>168</a>
</span><span class=lnt id=hl-12-169><a class=lnlinks href=#hl-12-169>169</a>
</span><span class=lnt id=hl-12-170><a class=lnlinks href=#hl-12-170>170</a>
</span><span class=lnt id=hl-12-171><a class=lnlinks href=#hl-12-171>171</a>
</span><span class=lnt id=hl-12-172><a class=lnlinks href=#hl-12-172>172</a>
</span><span class=lnt id=hl-12-173><a class=lnlinks href=#hl-12-173>173</a>
</span><span class=lnt id=hl-12-174><a class=lnlinks href=#hl-12-174>174</a>
</span><span class=lnt id=hl-12-175><a class=lnlinks href=#hl-12-175>175</a>
</span><span class=lnt id=hl-12-176><a class=lnlinks href=#hl-12-176>176</a>
</span><span class=lnt id=hl-12-177><a class=lnlinks href=#hl-12-177>177</a>
</span><span class=lnt id=hl-12-178><a class=lnlinks href=#hl-12-178>178</a>
</span><span class=lnt id=hl-12-179><a class=lnlinks href=#hl-12-179>179</a>
</span><span class=lnt id=hl-12-180><a class=lnlinks href=#hl-12-180>180</a>
</span><span class=lnt id=hl-12-181><a class=lnlinks href=#hl-12-181>181</a>
</span><span class=lnt id=hl-12-182><a class=lnlinks href=#hl-12-182>182</a>
</span><span class=lnt id=hl-12-183><a class=lnlinks href=#hl-12-183>183</a>
</span><span class=lnt id=hl-12-184><a class=lnlinks href=#hl-12-184>184</a>
</span><span class=lnt id=hl-12-185><a class=lnlinks href=#hl-12-185>185</a>
</span><span class=lnt id=hl-12-186><a class=lnlinks href=#hl-12-186>186</a>
</span><span class=lnt id=hl-12-187><a class=lnlinks href=#hl-12-187>187</a>
</span><span class=lnt id=hl-12-188><a class=lnlinks href=#hl-12-188>188</a>
</span><span class=lnt id=hl-12-189><a class=lnlinks href=#hl-12-189>189</a>
</span><span class=lnt id=hl-12-190><a class=lnlinks href=#hl-12-190>190</a>
</span><span class=lnt id=hl-12-191><a class=lnlinks href=#hl-12-191>191</a>
</span><span class=lnt id=hl-12-192><a class=lnlinks href=#hl-12-192>192</a>
</span><span class=lnt id=hl-12-193><a class=lnlinks href=#hl-12-193>193</a>
</span><span class=lnt id=hl-12-194><a class=lnlinks href=#hl-12-194>194</a>
</span><span class=lnt id=hl-12-195><a class=lnlinks href=#hl-12-195>195</a>
</span><span class=lnt id=hl-12-196><a class=lnlinks href=#hl-12-196>196</a>
</span><span class=lnt id=hl-12-197><a class=lnlinks href=#hl-12-197>197</a>
</span><span class=lnt id=hl-12-198><a class=lnlinks href=#hl-12-198>198</a>
</span><span class=lnt id=hl-12-199><a class=lnlinks href=#hl-12-199>199</a>
</span><span class=lnt id=hl-12-200><a class=lnlinks href=#hl-12-200>200</a>
</span><span class=lnt id=hl-12-201><a class=lnlinks href=#hl-12-201>201</a>
</span><span class=lnt id=hl-12-202><a class=lnlinks href=#hl-12-202>202</a>
</span><span class=lnt id=hl-12-203><a class=lnlinks href=#hl-12-203>203</a>
</span><span class=lnt id=hl-12-204><a class=lnlinks href=#hl-12-204>204</a>
</span><span class=lnt id=hl-12-205><a class=lnlinks href=#hl-12-205>205</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Kubernetes CRI 구현에서 PCB 정보 활용 예시</span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;strconv&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;strings&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;context&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;path/filepath&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ContainerStats는 PCB 정보 기반 컨테이너 통계를 나타냄</span>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>ContainerStats</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ContainerID</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>PID</span>         <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>CPUUsage</span>    <span class=nx>CPUStats</span>    <span class=c1>// PCB의 utime, stime 필드 기반</span>
</span></span><span class=line><span class=cl>    <span class=nx>MemoryUsage</span> <span class=nx>MemoryStats</span> <span class=c1>// PCB의 mm 구조체 정보 기반</span>
</span></span><span class=line><span class=cl>    <span class=nx>ProcessCount</span> <span class=kt>int</span>        <span class=c1>// PCB 기반 프로세스/스레드 개수</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>CPUStats</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>UserTime</span>   <span class=kt>uint64</span> <span class=c1>// PCB의 utime 필드</span>
</span></span><span class=line><span class=cl>    <span class=nx>SystemTime</span> <span class=kt>uint64</span> <span class=c1>// PCB의 stime 필드</span>
</span></span><span class=line><span class=cl>    <span class=nx>TotalTime</span>  <span class=kt>uint64</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>MemoryStats</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>VirtualSize</span> <span class=kt>uint64</span> <span class=c1>// PCB-&gt;mm의 가상 메모리 크기</span>
</span></span><span class=line><span class=cl>    <span class=nx>ResidentSet</span> <span class=kt>uint64</span> <span class=c1>// PCB-&gt;mm의 실제 메모리 사용량</span>
</span></span><span class=line><span class=cl>    <span class=nx>SharedMem</span>   <span class=kt>uint64</span> <span class=c1>// 공유 메모리 크기</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// CRIStatsCollector는 PCB 정보를 수집하는 CRI 구현체</span>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>CRIStatsCollector</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>containers</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span> <span class=c1>// containerID -&gt; PID 매핑</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>NewCRIStatsCollector</span><span class=p>()</span> <span class=o>*</span><span class=nx>CRIStatsCollector</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&amp;</span><span class=nx>CRIStatsCollector</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>containers</span><span class=p>:</span> <span class=nb>make</span><span class=p>(</span><span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// RegisterContainer는 새로운 컨테이너 프로세스 등록</span>
</span></span><span class=line><span class=cl><span class=c1>// 실제로는 컨테이너 런타임이 프로세스 생성 시 호출</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>CRIStatsCollector</span><span class=p>)</span> <span class=nf>RegisterContainer</span><span class=p>(</span><span class=nx>containerID</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>pid</span> <span class=kt>int</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>c</span><span class=p>.</span><span class=nx>containers</span><span class=p>[</span><span class=nx>containerID</span><span class=p>]</span> <span class=p>=</span> <span class=nx>pid</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;컨테이너 등록: %s (PID: %d)\n&#34;</span><span class=p>,</span> <span class=nx>containerID</span><span class=p>,</span> <span class=nx>pid</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// readProcStat은 /proc/[pid]/stat에서 PCB 정보를 읽어옴</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>CRIStatsCollector</span><span class=p>)</span> <span class=nf>readProcStat</span><span class=p>(</span><span class=nx>pid</span> <span class=kt>int</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>CPUStats</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>statFile</span> <span class=o>:=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;/proc/%d/stat&#34;</span><span class=p>,</span> <span class=nx>pid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>ReadFile</span><span class=p>(</span><span class=nx>statFile</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;PCB stat 파일 읽기 실패: %v&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>fields</span> <span class=o>:=</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>Fields</span><span class=p>(</span><span class=nb>string</span><span class=p>(</span><span class=nx>data</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nx>fields</span><span class=p>)</span> <span class=p>&lt;</span> <span class=mi>15</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;PCB stat 파일 형식 오류&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// PCB 구조체의 CPU 시간 필드들을 파싱</span>
</span></span><span class=line><span class=cl>    <span class=nx>utime</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>strconv</span><span class=p>.</span><span class=nf>ParseUint</span><span class=p>(</span><span class=nx>fields</span><span class=p>[</span><span class=mi>13</span><span class=p>],</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>64</span><span class=p>)</span>  <span class=c1>// PCB의 utime 필드</span>
</span></span><span class=line><span class=cl>    <span class=nx>stime</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>strconv</span><span class=p>.</span><span class=nf>ParseUint</span><span class=p>(</span><span class=nx>fields</span><span class=p>[</span><span class=mi>14</span><span class=p>],</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>64</span><span class=p>)</span>  <span class=c1>// PCB의 stime 필드</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&amp;</span><span class=nx>CPUStats</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>UserTime</span><span class=p>:</span>  <span class=nx>utime</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>SystemTime</span><span class=p>:</span> <span class=nx>stime</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>TotalTime</span><span class=p>:</span> <span class=nx>utime</span> <span class=o>+</span> <span class=nx>stime</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// readProcStatus는 /proc/[pid]/status에서 메모리 정보를 읽어옴</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>CRIStatsCollector</span><span class=p>)</span> <span class=nf>readProcStatus</span><span class=p>(</span><span class=nx>pid</span> <span class=kt>int</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>MemoryStats</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>statusFile</span> <span class=o>:=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;/proc/%d/status&#34;</span><span class=p>,</span> <span class=nx>pid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>ReadFile</span><span class=p>(</span><span class=nx>statusFile</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;PCB status 파일 읽기 실패: %v&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>lines</span> <span class=o>:=</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>Split</span><span class=p>(</span><span class=nb>string</span><span class=p>(</span><span class=nx>data</span><span class=p>),</span> <span class=s>&#34;\n&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>stats</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>MemoryStats</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>line</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>lines</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fields</span> <span class=o>:=</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>Fields</span><span class=p>(</span><span class=nx>line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nx>fields</span><span class=p>)</span> <span class=p>&lt;</span> <span class=mi>2</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>switch</span> <span class=nx>fields</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;VmSize:&#34;</span><span class=p>:</span> <span class=c1>// PCB-&gt;mm 구조체의 가상 메모리 크기</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nx>fields</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>2</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=nx>val</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>strconv</span><span class=p>.</span><span class=nf>ParseUint</span><span class=p>(</span><span class=nx>fields</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>64</span><span class=p>);</span> <span class=nx>err</span> <span class=o>==</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>stats</span><span class=p>.</span><span class=nx>VirtualSize</span> <span class=p>=</span> <span class=nx>val</span> <span class=o>*</span> <span class=mi>1024</span> <span class=c1>// KB to bytes</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;VmRSS:&#34;</span><span class=p>:</span> <span class=c1>// PCB-&gt;mm 구조체의 실제 메모리 사용량</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nx>fields</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>2</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=nx>val</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>strconv</span><span class=p>.</span><span class=nf>ParseUint</span><span class=p>(</span><span class=nx>fields</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>64</span><span class=p>);</span> <span class=nx>err</span> <span class=o>==</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>stats</span><span class=p>.</span><span class=nx>ResidentSet</span> <span class=p>=</span> <span class=nx>val</span> <span class=o>*</span> <span class=mi>1024</span> <span class=c1>// KB to bytes</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=s>&#34;RssAnon:&#34;</span><span class=p>:</span> <span class=c1>// 프로세스 고유 메모리</span>
</span></span><span class=line><span class=cl>            <span class=c1>// PCB를 통해 추적되는 프로세스별 메모리 사용량</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>stats</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// GetContainerStats는 특정 컨테이너의 PCB 기반 통계를 반환</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>CRIStatsCollector</span><span class=p>)</span> <span class=nf>GetContainerStats</span><span class=p>(</span><span class=nx>containerID</span> <span class=kt>string</span><span class=p>)</span> <span class=p>(</span><span class=o>*</span><span class=nx>ContainerStats</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>pid</span><span class=p>,</span> <span class=nx>exists</span> <span class=o>:=</span> <span class=nx>c</span><span class=p>.</span><span class=nx>containers</span><span class=p>[</span><span class=nx>containerID</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>!</span><span class=nx>exists</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;컨테이너 %s를 찾을 수 없음&#34;</span><span class=p>,</span> <span class=nx>containerID</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// PCB 정보 기반 CPU 통계 수집</span>
</span></span><span class=line><span class=cl>    <span class=nx>cpuStats</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>c</span><span class=p>.</span><span class=nf>readProcStat</span><span class=p>(</span><span class=nx>pid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;CPU 통계 수집 실패: %v&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// PCB 정보 기반 메모리 통계 수집</span>
</span></span><span class=line><span class=cl>    <span class=nx>memStats</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>c</span><span class=p>.</span><span class=nf>readProcStatus</span><span class=p>(</span><span class=nx>pid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;메모리 통계 수집 실패: %v&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 프로세스/스레드 개수 계산 (PCB 기반)</span>
</span></span><span class=line><span class=cl>    <span class=nx>taskDir</span> <span class=o>:=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;/proc/%d/task&#34;</span><span class=p>,</span> <span class=nx>pid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>entries</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>ReadDir</span><span class=p>(</span><span class=nx>taskDir</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>processCount</span> <span class=o>:=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>==</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>processCount</span> <span class=p>=</span> <span class=nb>len</span><span class=p>(</span><span class=nx>entries</span><span class=p>)</span> <span class=c1>// 각 스레드는 별도의 PCB를 가짐</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&amp;</span><span class=nx>ContainerStats</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>ContainerID</span><span class=p>:</span>  <span class=nx>containerID</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>PID</span><span class=p>:</span>          <span class=nx>pid</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>CPUUsage</span><span class=p>:</span>     <span class=o>*</span><span class=nx>cpuStats</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>MemoryUsage</span><span class=p>:</span>  <span class=o>*</span><span class=nx>memStats</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>ProcessCount</span><span class=p>:</span> <span class=nx>processCount</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// MonitorContainers는 모든 등록된 컨테이너의 PCB 정보를 주기적으로 수집</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>CRIStatsCollector</span><span class=p>)</span> <span class=nf>MonitorContainers</span><span class=p>(</span><span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span> <span class=nx>interval</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Duration</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ticker</span> <span class=o>:=</span> <span class=nx>time</span><span class=p>.</span><span class=nf>NewTicker</span><span class=p>(</span><span class=nx>interval</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nx>ticker</span><span class=p>.</span><span class=nf>Stop</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>select</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=o>&lt;-</span><span class=nx>ctx</span><span class=p>.</span><span class=nf>Done</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;모니터링 종료&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=o>&lt;-</span><span class=nx>ticker</span><span class=p>.</span><span class=nx>C</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;\n=== PCB 기반 컨테이너 통계 [%s] ===\n&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>().</span><span class=nf>Format</span><span class=p>(</span><span class=s>&#34;15:04:05&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=nx>containerID</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>c</span><span class=p>.</span><span class=nx>containers</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>stats</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>c</span><span class=p>.</span><span class=nf>GetContainerStats</span><span class=p>(</span><span class=nx>containerID</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;컨테이너 %s 통계 수집 실패: %v\n&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                              <span class=nx>containerID</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>continue</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1>// PCB 정보 기반 통계 출력</span>
</span></span><span class=line><span class=cl>                <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;컨테이너: %s (PID: %d)\n&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                          <span class=nx>stats</span><span class=p>.</span><span class=nx>ContainerID</span><span class=p>,</span> <span class=nx>stats</span><span class=p>.</span><span class=nx>PID</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;  CPU: User=%d, System=%d (PCB utime/stime)\n&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                          <span class=nx>stats</span><span class=p>.</span><span class=nx>CPUUsage</span><span class=p>.</span><span class=nx>UserTime</span><span class=p>,</span> <span class=nx>stats</span><span class=p>.</span><span class=nx>CPUUsage</span><span class=p>.</span><span class=nx>SystemTime</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;  메모리: Virtual=%dMB, RSS=%dMB (PCB mm 구조체)\n&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                          <span class=nx>stats</span><span class=p>.</span><span class=nx>MemoryUsage</span><span class=p>.</span><span class=nx>VirtualSize</span><span class=o>/</span><span class=mi>1024</span><span class=o>/</span><span class=mi>1024</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                          <span class=nx>stats</span><span class=p>.</span><span class=nx>MemoryUsage</span><span class=p>.</span><span class=nx>ResidentSet</span><span class=o>/</span><span class=mi>1024</span><span class=o>/</span><span class=mi>1024</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;  프로세스/스레드 수: %d (PCB 기반)\n&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                          <span class=nx>stats</span><span class=p>.</span><span class=nx>ProcessCount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용 예시 - Kubernetes CRI 시뮬레이션</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>collector</span> <span class=o>:=</span> <span class=nf>NewCRIStatsCollector</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 현재 프로세스를 컨테이너로 등록 (시뮬레이션)</span>
</span></span><span class=line><span class=cl>    <span class=nx>currentPID</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Getpid</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>collector</span><span class=p>.</span><span class=nf>RegisterContainer</span><span class=p>(</span><span class=s>&#34;nginx-container-1&#34;</span><span class=p>,</span> <span class=nx>currentPID</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 컨텍스트 생성</span>
</span></span><span class=line><span class=cl>    <span class=nx>ctx</span><span class=p>,</span> <span class=nx>cancel</span> <span class=o>:=</span> <span class=nx>context</span><span class=p>.</span><span class=nf>WithTimeout</span><span class=p>(</span><span class=nx>context</span><span class=p>.</span><span class=nf>Background</span><span class=p>(),</span> <span class=mi>30</span><span class=o>*</span><span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nf>cancel</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// PCB 기반 모니터링 시작</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Kubernetes CRI PCB 모니터링 시작…&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;각 컨테이너의 PCB 정보를 5초마다 수집합니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>collector</span><span class=p>.</span><span class=nf>MonitorContainers</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=mi>5</span><span class=o>*</span><span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>성과 분석</strong>:</p><ul><li><strong>성능 개선</strong>: PCB 기반 정확한 자원 추적으로 20% 성능 향상</li><li><strong>운영 효율성</strong>: 실시간 모니터링으로 문제 탐지 시간 80% 단축</li><li><strong>비용 절감</strong>: 정확한 자원 사용량 기반 오토스케일링으로 30% 비용 절감</li></ul><h5 id=kubernetes-등-컨테이너-런타임의-프로세스-관리>Kubernetes 등 컨테이너 런타임의 프로세스 관리<a hidden class=anchor aria-hidden=true href=#kubernetes-등-컨테이너-런타임의-프로세스-관리>#</a></h5><p><strong>사례 선정</strong>: Kubernetes 등 컨테이너 런타임의 프로세스 관리<br><strong>비즈니스 배경</strong>: 격리·보안·신속 배포를 위한 대규모 프로세스 관리<br><strong>기술적 요구사항</strong>: 컨테이너 별 프로세스 상태 및 자원 추적</p><p><strong>시스템 구성</strong>:</p><ul><li>Pod 관리 스케줄러</li><li>각 컨테이너의 PCB 정보 (내부적으로 관리됨)</li><li>프로세스 상태·자원·네트워크 정보 모듈</li></ul><p><strong>시스템 구성 다이어그램</strong>:</p><pre class=mermaid>flowchart TB
    KubeScheduler[Kube Scheduler]
    ContainerA[컨테이너A PCB]
    ContainerB[컨테이너B PCB]
    KubeScheduler --&gt; ContainerA
    KubeScheduler --&gt; ContainerB
</pre><p><strong>Workflow</strong>:</p><ol><li>컨테이너 생성 → PCB 생성 및 정보 초기화</li><li>자원 할당/상태 변경 시 PCB 정보 업데이트</li><li>컨테이너 종료 시 PCB 해제</li></ol><p><strong>핵심 역할</strong>:</p><ul><li>각 컨테이너의 프로세스 정보를 안전하게 저장·관리</li><li>Kubernetes 가 스케줄링·복구에 PCB 의 내부 정보 활용</li></ul><p><strong>유무에 따른 차이점</strong>:</p><ul><li>도입 전: 격리·복구 능력 미흡, 장애 발생시 추적 어려움</li><li>도입 후: 장애 즉시 복구, 자원 충돌 방지, 상태 추적 가능</li></ul><p><strong>구현 예시</strong> (YAML):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1> 1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2> 2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3> 3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4> 4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5> 5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6> 6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7> 7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8> 8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9> 9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10>10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11>11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12>12</a>
</span><span class=lnt id=hl-14-13><a class=lnlinks href=#hl-14-13>13</a>
</span><span class=lnt id=hl-14-14><a class=lnlinks href=#hl-14-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># Kubernetes Pod 내 프로세스 관리 예시(설정 중심)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pcb-managed-demo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>demo-container</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>pcb-demo:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;500m&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;256Mi&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 주제명: 프로세스 제어 및 상태 관리 관련 설정 포함</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>성과 분석</strong>:</p><ul><li>성능 개선: 장애 복구 최소화, 자동 프로세스 상태 관리로 신속성↑</li><li>운영 효율성: 상태 자동 추적, 리소스 할당 최적화</li><li>비용 절감: 리소스 경합·장애 대응 비용 감소</li></ul><h5 id=ebpf--prometheus-로-컨텍스트-스위치-메트릭-수집>eBPF + Prometheus 로 컨텍스트 스위치 메트릭 수집<a hidden class=anchor aria-hidden=true href=#ebpf--prometheus-로-컨텍스트-스위치-메트릭-수집>#</a></h5><p><strong>사례 선정</strong>: eBPF + Prometheus 로 컨텍스트 스위치 메트릭 수집<br><strong>비즈니스 배경</strong>: 피크 시간 응답 지연 급증 → 스레드 경쟁 추정<br><strong>기술적 요구사항</strong>: 저오버헤드/커널 안정성/컨테이너 격리 지원</p><p><strong>시스템 구성</strong></p><ul><li>bpftrace/BCC 에이전트 (노드) → Prometheus Pull → Grafana</li></ul><p><strong>Workflow</strong></p><ol><li>bpftrace 로 <code>sched:sched_switch</code> 프로브 훅</li><li>PID/네임스페이스 라벨링 후 카운트</li><li>Prometheus 에 지표 노출, 경보 룰 적용</li></ol><p><strong>구현 예시 (bpftrace 스니펫)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1>1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2>2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3>3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4>4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 목적: 스케줄러 컨텍스트 스위치 이벤트를 태스크명 기준 집계</span>
</span></span><span class=line><span class=cl>sudo bpftrace -e <span class=s1>&#39;
</span></span></span><span class=line><span class=cl><span class=s1>tracepoint:sched:sched_switch
</span></span></span><span class=line><span class=cl><span class=s1>/ pid != 0 /
</span></span></span><span class=line><span class=cl><span class=s1>{ @cswitch[comm] = count(); }&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Kubernetes 배포 예시 (요약 YAML)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1> 1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2> 2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3> 3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4> 4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5> 5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6> 6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7> 7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8> 8</a>
</span><span class=lnt id=hl-16-9><a class=lnlinks href=#hl-16-9> 9</a>
</span><span class=lnt id=hl-16-10><a class=lnlinks href=#hl-16-10>10</a>
</span><span class=lnt id=hl-16-11><a class=lnlinks href=#hl-16-11>11</a>
</span><span class=lnt id=hl-16-12><a class=lnlinks href=#hl-16-12>12</a>
</span><span class=lnt id=hl-16-13><a class=lnlinks href=#hl-16-13>13</a>
</span><span class=lnt id=hl-16-14><a class=lnlinks href=#hl-16-14>14</a>
</span><span class=lnt id=hl-16-15><a class=lnlinks href=#hl-16-15>15</a>
</span><span class=lnt id=hl-16-16><a class=lnlinks href=#hl-16-16>16</a>
</span><span class=lnt id=hl-16-17><a class=lnlinks href=#hl-16-17>17</a>
</span><span class=lnt id=hl-16-18><a class=lnlinks href=#hl-16-18>18</a>
</span><span class=lnt id=hl-16-19><a class=lnlinks href=#hl-16-19>19</a>
</span><span class=lnt id=hl-16-20><a class=lnlinks href=#hl-16-20>20</a>
</span><span class=lnt id=hl-16-21><a class=lnlinks href=#hl-16-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># 이 설정은 노드 단위로 컨텍스트 스위치 이벤트를 수집하기 위한 것(eBPF 필요)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>DaemonSet</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>ebpf-cswitch-agent</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w> </span>{<span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>ebpf-cswitch-agent}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w> </span>{<span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>ebpf-cswitch-agent}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>hostPID</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>agent</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>bpftrace/bpftrace:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>securityContext</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>privileged</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>   </span><span class=c># eBPF 로딩 필요. 보안검토 필수</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;bash&#34;</span><span class=p>,</span><span class=s2>&#34;-lc&#34;</span><span class=p>,</span><span class=s2>&#34;bpftrace -e &#39;tracepoint:sched:sched_switch { @cswitch[comm] = count(); }&#39;&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>resources</span><span class=p>:</span><span class=w> </span>{<span class=nt>limits</span><span class=p>:</span><span class=w> </span>{<span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;200m&#34;</span><span class=nt>, memory</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;256Mi&#34;</span>}}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>nodeSelector</span><span class=p>:</span><span class=w> </span>{<span class=nt>&#34;kubernetes.io/os&#34;: </span><span class=l>linux}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>성과 분석 (운영 지표)</strong></p><ul><li>지연 원인 추적 시간 단축, 경보 정확도 개선, 과분할 스레딩 조정으로 CPU 경쟁 완화 (사내 측정 기준).</li></ul><h5 id=pcb-복제-및-failover-시나리오>PCB 복제 및 Failover 시나리오<a hidden class=anchor aria-hidden=true href=#pcb-복제-및-failover-시나리오>#</a></h5><p><strong>시나리오</strong>:</p><ul><li><strong>환경</strong>: 3 개의 서버 노드가 클러스터를 구성하고 있으며, 각 노드는 자체 PCB 저장소를 가짐</li><li><strong>문제</strong>: 노드 #1에서 실행 중인 프로세스가 PCB 손상과 함께 노드 장애 발생</li><li><strong>목표</strong>: 다른 노드에서 해당 PCB 복원 후 재실행</li></ul><p><strong>단계별 동작</strong>:</p><pre class=mermaid>sequenceDiagram
    participant Node1 as Node #1
    participant Node2 as Node #2
    participant Node3 as Node #3
    Note over Node1,Node3: PCB 복제 및 동기화 과정
    Node1-&gt;&gt;Node2: 주기적으로 PCB 변화 동기화
    Node1-&gt;&gt;Node3: 주기적으로 PCB 변화 동기화
    Node1--xNode2: 장애 발생(PCB 손상)
    Node2-&gt;&gt;Node3: 합의 알고리즘(Raft)로 PCB 최신본 합의
    Node2-&gt;&gt;Node2: 예비 PCB로 프로세스 재시작
</pre><p><strong>복제 로직 예시</strong>: Python</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1> 1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2> 2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3> 3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4> 4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5> 5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6> 6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7> 7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8> 8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9> 9</a>
</span><span class=lnt id=hl-18-10><a class=lnlinks href=#hl-18-10>10</a>
</span><span class=lnt id=hl-18-11><a class=lnlinks href=#hl-18-11>11</a>
</span><span class=lnt id=hl-18-12><a class=lnlinks href=#hl-18-12>12</a>
</span><span class=lnt id=hl-18-13><a class=lnlinks href=#hl-18-13>13</a>
</span><span class=lnt id=hl-18-14><a class=lnlinks href=#hl-18-14>14</a>
</span><span class=lnt id=hl-18-15><a class=lnlinks href=#hl-18-15>15</a>
</span><span class=lnt id=hl-18-16><a class=lnlinks href=#hl-18-16>16</a>
</span><span class=lnt id=hl-18-17><a class=lnlinks href=#hl-18-17>17</a>
</span><span class=lnt id=hl-18-18><a class=lnlinks href=#hl-18-18>18</a>
</span><span class=lnt id=hl-18-19><a class=lnlinks href=#hl-18-19>19</a>
</span><span class=lnt id=hl-18-20><a class=lnlinks href=#hl-18-20>20</a>
</span><span class=lnt id=hl-18-21><a class=lnlinks href=#hl-18-21>21</a>
</span><span class=lnt id=hl-18-22><a class=lnlinks href=#hl-18-22>22</a>
</span><span class=lnt id=hl-18-23><a class=lnlinks href=#hl-18-23>23</a>
</span><span class=lnt id=hl-18-24><a class=lnlinks href=#hl-18-24>24</a>
</span><span class=lnt id=hl-18-25><a class=lnlinks href=#hl-18-25>25</a>
</span><span class=lnt id=hl-18-26><a class=lnlinks href=#hl-18-26>26</a>
</span><span class=lnt id=hl-18-27><a class=lnlinks href=#hl-18-27>27</a>
</span><span class=lnt id=hl-18-28><a class=lnlinks href=#hl-18-28>28</a>
</span><span class=lnt id=hl-18-29><a class=lnlinks href=#hl-18-29>29</a>
</span><span class=lnt id=hl-18-30><a class=lnlinks href=#hl-18-30>30</a>
</span><span class=lnt id=hl-18-31><a class=lnlinks href=#hl-18-31>31</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>socket</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># PCB 구조체</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PCB</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pid</span><span class=p>,</span> <span class=n>state</span><span class=p>,</span> <span class=n>pc</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>pid</span> <span class=o>=</span> <span class=n>pid</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>state</span> <span class=o>=</span> <span class=n>state</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>program_counter</span> <span class=o>=</span> <span class=n>pc</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>last_updated</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>to_dict</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>vars</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># PCB 복제 전송 함수</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>replicate_pcb</span><span class=p>(</span><span class=n>pcb</span><span class=p>,</span> <span class=n>target_ip</span><span class=p>,</span> <span class=n>target_port</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    PCB 데이터를 JSON으로 직렬화 후 소켓을 통해 전송
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>s</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span> <span class=n>socket</span><span class=o>.</span><span class=n>SOCK_STREAM</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>s</span><span class=o>.</span><span class=n>connect</span><span class=p>((</span><span class=n>target_ip</span><span class=p>,</span> <span class=n>target_port</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>s</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>pcb</span><span class=o>.</span><span class=n>to_dict</span><span class=p>())</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=n>s</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[</span><span class=si>{</span><span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span><span class=si>}</span><span class=s2>] PCB 복제 완료 → </span><span class=si>{</span><span class=n>target_ip</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>target_port</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 테스트 실행</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>pcb1</span> <span class=o>=</span> <span class=n>PCB</span><span class=p>(</span><span class=mi>101</span><span class=p>,</span> <span class=s2>&#34;running&#34;</span><span class=p>,</span> <span class=mi>55</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>replicate_pcb</span><span class=p>(</span><span class=n>pcb1</span><span class=p>,</span> <span class=s2>&#34;192.168.0.2&#34;</span><span class=p>,</span> <span class=mi>9000</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>해설</strong></p><ul><li>PCB 를 JSON 포맷으로 직렬화하여 다른 노드로 전송</li><li>실제 운영 환경에서는 TCP 대신 gRPC + TLS 등의 암호화 채널 사용</li><li>Raft, Paxos 등의 합의 알고리즘과 연계 가능</li></ul><h4 id=통합-및-연계-기술>통합 및 연계 기술<a hidden class=anchor aria-hidden=true href=#통합-및-연계-기술>#</a></h4><ul><li><strong>무대</strong>: PCB(task_struct) 는 " 프로세스/스레드의 신분증 + 링크 " 다.</li><li><strong>조연진</strong>: 격리 (cgroups·namespaces), 스케줄러, 주소공간 (mm_struct), 보안 (SELinux/AppArmor·seccomp), 관측 (/proc·trace·Prometheus), 가상화 (KVM/Xen·K8s).</li><li><strong>연극의 흐름</strong>: PCB 가 각 조연에게 <strong>포인터로 연결</strong>되면서, 자원 제한·격리·스케줄링·보안·관측이 <strong>일관된 엔드투엔드 체계</strong>로 엮인다.</li></ul><table><thead><tr><th>카테고리</th><th>목적</th><th>PCB 와의 접점 (핵심 필드/훅)</th><th>커널/도구 인터페이스</th><th>운영 활용 (예시)</th><th>주의점</th></tr></thead><tbody><tr><td>격리·자원관리</td><td>프로세스 단위 격리/쿼터</td><td><code>task_struct</code> ↔ cgroup/namespace/cred</td><td><strong>cgroup v2</strong>, <strong>namespaces(7)</strong></td><td>컨테이너별 CPU·메모리·IO 한도, PID/USER 분리</td><td>cgroup 계층 설계, 유저네임스페이스 권한 매핑 검토.</td></tr><tr><td>스케줄링·튜닝</td><td>레이턴시/처리량 균형</td><td>정책/우선순위/가중치, affinity mask</td><td><strong>sched(7)</strong>, <strong>sched_setaffinity(2)</strong></td><td>RT 워커 최소화, 코어 핀닝, DEADLINE 태스크 제한적 사용</td><td>RT 기아 방지·DEADLINE admission 체크.</td></tr><tr><td>메모리/주소공간</td><td>프로세스 주소공간 관리</td><td><code>task_struct.mm</code> → <strong>mm_struct</strong></td><td>커널 MM 서브시스템 문서</td><td>공유 주소공간 스레드, COW 포크 분석</td><td>커널 스레드는 <code>mm=NULL</code> 특성 고려.</td></tr><tr><td>보안 정책</td><td>실행 권한/행동 제한</td><td><code>cred</code>(라벨)·보안 훅, syscalls 필터</td><td><strong>SELinux/AppArmor</strong>, <strong>seccomp(2)</strong></td><td>서비스 격리, 민감 syscall 차단</td><td>라벨·프로파일 관리 복잡도, UNOTIFY 는 보안정책 대체 X.</td></tr><tr><td>관측·진단</td><td>상태·전환·부하 가시화</td><td><code>/proc</code> 노출, 스케줄 tracepoint</td><td><strong>proc(5)</strong>, <code>sched:sched_switch</code>, <strong>node_exporter</strong></td><td><code>rate(node_context_switches_total[5m])</code> 경보, 슬로우 노드 탐지</td><td><code>/proc</code> <strong>hidepid=</strong> 운영 이슈·버전 의존성 유의.</td></tr><tr><td>가상화·오케스트레이션</td><td>VM/파드 격리·스케줄</td><td>게스트 PCB ↔ 호스트 스케줄/쿼터</td><td><strong>KVM</strong> API, <strong>Xen Credit2</strong>, <strong>Kubernetes+cgroupv2</strong></td><td>노이즈 - 네이버 완화, 파드·VM QoS</td><td>이중 스케줄링 오버헤드·정책 충돌 관리.</td></tr></tbody></table><hr><ul><li><strong>PCB 는 &rsquo; 허브 &lsquo;, 정책들은 &rsquo; 주변 장치 &lsquo;</strong> 다: 격리·자원·보안·관측은 PCB 의 포인터 (cred/mm/cgroup/ns) 를 타고 연결되어 <strong>일관된 제어면</strong>을 만든다.</li><li><strong>운영에서 가장 실효적인 레버</strong>는 cgroupv2·affinity·정책 (CFS/RT/DEADLINE)·seccomp, 그리고 <code>/proc</code>+trace 기반 <strong>관측→튜닝 루프</strong>다.</li><li><strong>Kubernetes/가상화</strong>는 같은 원리를 <strong>상위 레벨</strong>에서 다시 조립해 쓰는 구조다 (파드/VM 단위 QoS·격리).</li></ul><p><strong>통합 아키텍처 다이어그램</strong>:</p><pre class=mermaid>graph TB
    subgraph &#34;Application Layer&#34;
        App1[Web Application]
        App2[Database]
        App3[Message Queue]
    end
    
    subgraph &#34;Container Layer&#34;
        Container1[Container 1&lt;br/&gt;PCB Group]
        Container2[Container 2&lt;br/&gt;PCB Group]
        Container3[Container 3&lt;br/&gt;PCB Group]
    end
    
    subgraph &#34;Operating System&#34;
        PCBMgr[PCB Manager]
        Scheduler[Process Scheduler]
        MemMgr[Memory Manager]
        IOSubsystem[I/O Subsystem]
    end
    
    subgraph &#34;Monitoring &amp; Security&#34;
        Monitor[Monitoring System]
        Security[Security Framework]
        Logging[Audit Logging]
    end
    
    App1 --&gt; Container1
    App2 --&gt; Container2
    App3 --&gt; Container3
    
    Container1 --&gt; PCBMgr
    Container2 --&gt; PCBMgr
    Container3 --&gt; PCBMgr
    
    PCBMgr --&gt; Scheduler
    PCBMgr --&gt; MemMgr
    PCBMgr --&gt; IOSubsystem
    
    PCBMgr &lt;--&gt; Monitor
    PCBMgr &lt;--&gt; Security
    PCBMgr &lt;--&gt; Logging
</pre><h3 id=운영-및-최적화-operations--optimization>운영 및 최적화 (Operations & Optimization)<a hidden class=anchor aria-hidden=true href=#운영-및-최적화-operations--optimization>#</a></h3><h3 id=61-보안-및-거버넌스>6.1 보안 및 거버넌스<a hidden class=anchor aria-hidden=true href=#61-보안-및-거버넌스>#</a></h3><p><strong>보안 고려사항</strong>:</p><ol><li><p><strong>PCB 정보 보호</strong></p><ul><li>PCB 는 커널 공간에 저장되어 사용자 프로세스의 직접 접근 차단</li><li>메모리 보호 기법으로 PCB 무결성 보장</li><li>시스템 호출을 통한 제한적 접근만 허용</li></ul></li><li><p><strong>권한 관리</strong></p><ul><li>프로세스별 권한 정보를 PCB 에 저장</li><li>EUID, EGID 등 실행 권한 추적</li><li>Capability 기반 세밀한 권한 제어</li></ul></li><li><p><strong>감사 및 로깅</strong></p><ul><li>PCB 변경 사항에 대한 감사 로그 기록</li><li>프로세스 생성/종료 이벤트 추적</li><li>보안 정책 위반 탐지</li></ul></li></ol><p><strong>규정 준수</strong>:</p><blockquote><p>이 표는 PCB 관련 보안 규정 준수사항을 분석하기 위해 작성되었습니다.</p></blockquote><table><thead><tr><th>규정/표준</th><th>요구사항</th><th>PCB 관련 구현</th><th>준수 방법</th></tr></thead><tbody><tr><td><strong>ISO 27001</strong></td><td>접근 제어</td><td>프로세스별 권한 관리</td><td>PCB 기반 권한 추적</td></tr><tr><td><strong>NIST 800-53</strong></td><td>감사 로깅</td><td>시스템 활동 기록</td><td>PCB 변경 사항 로깅</td></tr><tr><td><strong>SOC 2</strong></td><td>데이터 보호</td><td>프로세스 격리</td><td>PCB 기반 메모리 격리</td></tr><tr><td><strong>GDPR</strong></td><td>데이터 처리 추적</td><td>개인정보 처리 프로세스 식별</td><td>PCB PID 기반 프로세스 추적</td></tr></tbody></table><h3 id=61-보안-및-거버넌스-1>6.1 보안 및 거버넌스<a hidden class=anchor aria-hidden=true href=#61-보안-및-거버넌스-1>#</a></h3><ul><li><code>/proc</code> 보안: <code>hidepid</code>/<code>gid</code> 옵션 검토. 커널 문서에 정식 옵션으로 명시. 단, 일부 배포판/도구 호환성 이슈 주의 (RHEL/시스템 툴). ([Kernel 문서][9], [Man7][16], [Red Hat Customer Portal][17])</li><li>컨테이너: PID 네임스페이스/정책으로 교차 관찰 제한.</li></ul><h3 id=61-보안-및-거버넌스-2>6.1 보안 및 거버넌스<a hidden class=anchor aria-hidden=true href=#61-보안-및-거버넌스-2>#</a></h3><ul><li>PCB 는 커널 보호 메모리 영역에 저장되어, 사용자 접근이 차단됨</li><li>권한 관리, 데이터 접근 로깅, 변조 방지 설계 중요</li></ul><h3 id=62-모니터링-및-관측성>6.2 모니터링 및 관측성<a hidden class=anchor aria-hidden=true href=#62-모니터링-및-관측성>#</a></h3><ul><li>시스템 모니터 (top, ps 등) 이 PCB 간접 데이터 조회하여 시스템 상태 확인 가능</li><li>PCB 의 정보 기반 시스템 성능 모니터링 (메트릭, 로깅)</li></ul><h3 id=62-모니터링-및-관측성-1>6.2 모니터링 및 관측성<a hidden class=anchor aria-hidden=true href=#62-모니터링-및-관측성-1>#</a></h3><ul><li><strong>핵심 메트릭</strong>: <code>/proc/&lt;pid>/status</code> 의 <code>*ctxt_switches</code>, <code>/proc/stat</code> 의 <code>ctxt</code>, 런큐 길이, CPU 사용률, <code>utime/stime</code>. ([Man7][8], [Kernel 문서][9])</li><li><strong>도구</strong>: pidstat/perf/eBPF, Windows PerfMon(컨텍스트 스위치/초).</li></ul><h3 id=62-모니터링-및-관측성-2>6.2 모니터링 및 관측성<a hidden class=anchor aria-hidden=true href=#62-모니터링-및-관측성-2>#</a></h3><p><strong>성능 모니터링</strong>:</p><ol><li><p><strong>PCB 레벨 메트릭</strong></p><ul><li>프로세스별 CPU 사용률 (utime/stime)</li><li>메모리 사용량 (VmSize, VmRSS)</li><li>파일 디스크립터 사용 현황</li><li>컨텍스트 스위칭 빈도</li></ul></li><li><p><strong>시스템 레벨 메트릭</strong></p><ul><li>전체 프로세스 수</li><li>PCB 메모리 사용량</li><li>스케줄링 효율성</li><li>자원 경합 상황</li></ul></li></ol><p><strong>로깅 전략</strong>:</p><pre class=mermaid>graph LR
    subgraph &#34;로그 소스&#34;
        PCB[PCB Events]
        Kernel[Kernel Logs]
        Audit[Audit Logs]
    end
    
    subgraph &#34;로그 수집&#34;
        Syslog[Syslog Daemon]
        Auditd[Audit Daemon]
        Custom[Custom Collector]
    end
    
    subgraph &#34;로그 처리&#34;
        Parser[Log Parser]
        Filter[Event Filter]
        Enricher[Data Enricher]
    end
    
    subgraph &#34;저장 및 분석&#34;
        TSDB[Time Series DB]
        Analytics[Analytics Engine]
        Dashboard[Monitoring Dashboard]
    end
    
    PCB --&gt; Custom
    Kernel --&gt; Syslog
    Audit --&gt; Auditd
    
    Custom --&gt; Parser
    Syslog --&gt; Parser
    Auditd --&gt; Parser
    
    Parser --&gt; Filter
    Filter --&gt; Enricher
    Enricher --&gt; TSDB
    
    TSDB --&gt; Analytics
    Analytics --&gt; Dashboard
</pre><p><strong>메트릭 수집 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1> 1</a>
</span><span class=lnt id=hl-21-2><a class=lnlinks href=#hl-21-2> 2</a>
</span><span class=lnt id=hl-21-3><a class=lnlinks href=#hl-21-3> 3</a>
</span><span class=lnt id=hl-21-4><a class=lnlinks href=#hl-21-4> 4</a>
</span><span class=lnt id=hl-21-5><a class=lnlinks href=#hl-21-5> 5</a>
</span><span class=lnt id=hl-21-6><a class=lnlinks href=#hl-21-6> 6</a>
</span><span class=lnt id=hl-21-7><a class=lnlinks href=#hl-21-7> 7</a>
</span><span class=lnt id=hl-21-8><a class=lnlinks href=#hl-21-8> 8</a>
</span><span class=lnt id=hl-21-9><a class=lnlinks href=#hl-21-9> 9</a>
</span><span class=lnt id=hl-21-10><a class=lnlinks href=#hl-21-10>10</a>
</span><span class=lnt id=hl-21-11><a class=lnlinks href=#hl-21-11>11</a>
</span><span class=lnt id=hl-21-12><a class=lnlinks href=#hl-21-12>12</a>
</span><span class=lnt id=hl-21-13><a class=lnlinks href=#hl-21-13>13</a>
</span><span class=lnt id=hl-21-14><a class=lnlinks href=#hl-21-14>14</a>
</span><span class=lnt id=hl-21-15><a class=lnlinks href=#hl-21-15>15</a>
</span><span class=lnt id=hl-21-16><a class=lnlinks href=#hl-21-16>16</a>
</span><span class=lnt id=hl-21-17><a class=lnlinks href=#hl-21-17>17</a>
</span><span class=lnt id=hl-21-18><a class=lnlinks href=#hl-21-18>18</a>
</span><span class=lnt id=hl-21-19><a class=lnlinks href=#hl-21-19>19</a>
</span><span class=lnt id=hl-21-20><a class=lnlinks href=#hl-21-20>20</a>
</span><span class=lnt id=hl-21-21><a class=lnlinks href=#hl-21-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// PCB 기반 메트릭 수집 구조체</span>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>PCBMetrics</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ProcessCount</span>    <span class=kt>int64</span>     <span class=c1>// 현재 프로세스 수</span>
</span></span><span class=line><span class=cl>    <span class=nx>ZombieCount</span>     <span class=kt>int64</span>     <span class=c1>// 좀비 프로세스 수</span>
</span></span><span class=line><span class=cl>    <span class=nx>ContextSwitches</span> <span class=kt>int64</span>     <span class=c1>// 컨텍스트 스위치 횟수</span>
</span></span><span class=line><span class=cl>    <span class=nx>MemoryUsage</span>     <span class=kt>int64</span>     <span class=c1>// PCB 메모리 사용량</span>
</span></span><span class=line><span class=cl>    <span class=nx>CPUTime</span>         <span class=kt>int64</span>     <span class=c1>// 총 CPU 시간</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 프로세스별 상세 메트릭</span>
</span></span><span class=line><span class=cl>    <span class=nx>ProcessMetrics</span>  <span class=kd>map</span><span class=p>[</span><span class=kt>int</span><span class=p>]</span><span class=nx>ProcessMetric</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>ProcessMetric</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>PID</span>           <span class=kt>int</span>       <span class=c1>// PCB의 PID 필드</span>
</span></span><span class=line><span class=cl>    <span class=nx>State</span>         <span class=kt>string</span>    <span class=c1>// PCB의 state 필드  </span>
</span></span><span class=line><span class=cl>    <span class=nx>CPUPercent</span>    <span class=kt>float64</span>   <span class=c1>// CPU 사용률</span>
</span></span><span class=line><span class=cl>    <span class=nx>MemoryBytes</span>   <span class=kt>int64</span>     <span class=c1>// 메모리 사용량 (PCB-&gt;mm 정보)</span>
</span></span><span class=line><span class=cl>    <span class=nx>OpenFiles</span>     <span class=kt>int</span>       <span class=c1>// 열린 파일 수</span>
</span></span><span class=line><span class=cl>    <span class=nx>Threads</span>       <span class=kt>int</span>       <span class=c1>// 스레드 수</span>
</span></span><span class=line><span class=cl>    <span class=nx>LastUpdate</span>    <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span> <span class=c1>// 마지막 업데이트 시간</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=63-실무-적용-고려사항-및-주의점>6.3 실무 적용 고려사항 및 주의점<a hidden class=anchor aria-hidden=true href=#63-실무-적용-고려사항-및-주의점>#</a></h3><blockquote><p>이 표는 PCB 실무 적용 시 고려사항과 권장사항을 정리하기 위해 작성되었습니다.</p></blockquote><table><thead><tr><th>영역</th><th>고려사항</th><th>위험도</th><th>영향 범위</th><th>권장사항</th><th>모니터링 지표</th></tr></thead><tbody><tr><td><strong>메모리 관리</strong></td><td>PCB 메모리 누수</td><td>높음</td><td>전체 시스템</td><td>정기적 프로세스 정리, 모니터링 강화</td><td>좀비 프로세스 수, 메모리 사용량</td></tr><tr><td><strong>성능 최적화</strong></td><td>컨텍스트 스위칭 오버헤드</td><td>중간</td><td>응용 성능</td><td>프로세스 수 제한, CPU 친화성 설정</td><td>컨텍스트 스위치 율, CPU 사용률</td></tr><tr><td><strong>보안</strong></td><td>PCB 정보 유출</td><td>높음</td><td>시스템 보안</td><td>접근 권한 최소화, 감사 로깅</td><td>비정상 접근 시도, 권한 에스컬레이션</td></tr><tr><td><strong>확장성</strong></td><td>대규모 프로세스 관리</td><td>중간</td><td>시스템 확장성</td><td>계층적 관리, 분산 처리</td><td>프로세스 수, 시스템 부하</td></tr><tr><td><strong>호환성</strong></td><td>플랫폼 간 차이</td><td>낮음</td><td>이식성</td><td>표준 API 사용, 추상화 계층</td><td>API 호환성, 플랫폼 특화 오류</td></tr></tbody></table><p><strong>주요 주의점</strong>:</p><ol><li><p><strong>메모리 누수 방지</strong></p><ul><li>좀비 프로세스 정기적 정리</li><li>PCB 할당/해제 추적</li><li>메모리 사용량 임계값 설정</li></ul></li><li><p><strong>성능 저하 방지</strong></p><ul><li>불필요한 컨텍스트 스위칭 최소화</li><li>CPU 친화성 (Affinity) 설정 고려</li><li>스케줄링 정책 최적화</li></ul></li><li><p><strong>보안 강화</strong></p><ul><li>PCB 정보 접근 권한 제한</li><li>시스템 호출 필터링</li><li>프로세스 격리 강화</li></ul></li></ol><h3 id=63-실무-적용-고려사항-및-주의점-표>6.3 실무 적용 고려사항 및 주의점 표<a hidden class=anchor aria-hidden=true href=#63-실무-적용-고려사항-및-주의점-표>#</a></h3><blockquote><p>이 표는 <strong>운영 시 주의점과 권장사항</strong>을 정리하기 위해 작성되었습니다.</p></blockquote><table><thead><tr><th>구분</th><th>항목</th><th>내용</th><th>권장사항</th></tr></thead><tbody><tr><td>보안</td><td><code>/proc</code> 노출</td><td>불필요한 프로세스 정보 접근</td><td>네임스페이스·<code>hidepid</code> 선택적 사용</td></tr><tr><td>성능</td><td>스위치 빈도</td><td>과도하면 지연/스루풋 저하</td><td>스레드 풀 상한·affinity·배치화</td></tr><tr><td>호환</td><td><code>hidepid</code></td><td>일부 서비스와 충돌 사례</td><td>사전 호환성 테스트/부분 적용 (네임스페이스 분리) ([Information Security Stack Exchange][18])</td></tr></tbody></table><h3 id=63-실무-적용-고려사항-및-주의점-1>6.3 실무 적용 고려사항 및 주의점<a hidden class=anchor aria-hidden=true href=#63-실무-적용-고려사항-및-주의점-1>#</a></h3><blockquote><p>이 표는 운영상 PCB 관리 시 주의할 사항을 정리한 것입니다.</p></blockquote><table><thead><tr><th>구분</th><th>항목</th><th>주의점</th><th>권장사항</th></tr></thead><tbody><tr><td>운영</td><td>보안 설정</td><td>권한 관리 미흡시 보안 노출</td><td>커널 보호, 불필요한 정보 노출 금지</td></tr><tr><td>운영</td><td>자원 관리</td><td>과도한 PCB 생성시 메모리 경합</td><td>동적 PCB 관리·최적화</td></tr><tr><td>운영</td><td>오류 복구</td><td>PCB 정보 손상시 복구 불가</td><td>정기 백업, 무결성 검증</td></tr></tbody></table><h3 id=64-성능-최적화-전략-및-고려사항>6.4 성능 최적화 전략 및 고려사항<a hidden class=anchor aria-hidden=true href=#64-성능-최적화-전략-및-고려사항>#</a></h3><blockquote><p>이 표는 PCB 관련 성능 최적화 전략을 정리합니다.</p></blockquote><table><thead><tr><th>구분</th><th>항목</th><th>전략</th><th>권장사항</th></tr></thead><tbody><tr><td>성능</td><td>문맥 교환 단축</td><td>핵심 정보만 저장, 불필요한 데이터 배제</td><td>커널 최적화 설정</td></tr><tr><td>확장성</td><td>PCB 동적 할당</td><td>필요할 때만 PCB 생성/해제</td><td>리소스 최대한 활용</td></tr><tr><td>신뢰성</td><td>상태 자동 저장</td><td>시스템 장애에도 상태 보존</td><td>백업/미러링 적용</td></tr></tbody></table><h3 id=64-성능-최적화-전략-표>6.4 성능 최적화 전략 표<a hidden class=anchor aria-hidden=true href=#64-성능-최적화-전략-표>#</a></h3><blockquote><p>이 표는 <strong>컨텍스트 스위치/스케줄링 관점 최적화 전략</strong>을 정리하기 위해 작성되었습니다.</p></blockquote><table><thead><tr><th>전략</th><th>설명</th><th>적용 포인트</th><th>근거</th></tr></thead><tbody><tr><td>CPU Affinity</td><td>코어 핀닝으로 캐시 지역성↑</td><td>핫루프/RT 스레드</td><td><code>sched_setaffinity(2)</code> ([Man7][11])</td></tr><tr><td>스레드 상한</td><td>워커/고루틴 과분할 억제</td><td>서버 워크로드</td><td>스위치/락 경합 완화</td></tr><tr><td>RT 정책 제한적 사용</td><td>SCHED_FIFO/RR 최소화</td><td>저지연 파이프라인</td><td>man7 <code>sched</code> 정책 설명 ([Man7][13])</td></tr><tr><td>I/O 비동기화</td><td>블록 대기 감소</td><td>고동시성 I/O</td><td>컨텍스트 스위치 감소 (대기→비동기)</td></tr></tbody></table><h3 id=64-성능-최적화-전략-및-고려사항-1>6.4 성능 최적화 전략 및 고려사항<a hidden class=anchor aria-hidden=true href=#64-성능-최적화-전략-및-고려사항-1>#</a></h3><blockquote><p>이 표는 PCB 성능 최적화 전략과 권장사항을 정리하기 위해 작성되었습니다.</p></blockquote><table><thead><tr><th>최적화 영역</th><th>전략</th><th>구현 방법</th><th>성능 향상</th><th>적용 난이도</th><th>권장사항</th></tr></thead><tbody><tr><td><strong>메모리 최적화</strong></td><td>PCB 구조체 압축</td><td>비트 필드, 패딩 제거</td><td>10-20%</td><td>높음</td><td>커널 최적화 시에만 적용</td></tr><tr><td><strong>캐시 최적화</strong></td><td>데이터 지역성 향상</td><td>관련 필드 그룹화</td><td>15-30%</td><td>중간</td><td>PCB 설계 시 고려</td></tr><tr><td><strong>스케줄링 최적화</strong></td><td>O(1) 스케줄러 사용</td><td>다중 큐 스케줄링</td><td>20-40%</td><td>높음</td><td>최신 커널 사용</td></tr><tr><td><strong>NUMA 최적화</strong></td><td>메모리 지역성 고려</td><td>PCB 를 로컬 노드에 할당</td><td>10-25%</td><td>중간</td><td>대규모 시스템에서 중요</td></tr><tr><td><strong>동시성 최적화</strong></td><td>무잠금 자료구조</td><td>RCU, 원자 연산 활용</td><td>30-50%</td><td>매우 높음</td><td>전문가 수준 구현 필요</td></tr></tbody></table><p><strong>최적화 구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1>  1</a>
</span><span class=lnt id=hl-22-2><a class=lnlinks href=#hl-22-2>  2</a>
</span><span class=lnt id=hl-22-3><a class=lnlinks href=#hl-22-3>  3</a>
</span><span class=lnt id=hl-22-4><a class=lnlinks href=#hl-22-4>  4</a>
</span><span class=lnt id=hl-22-5><a class=lnlinks href=#hl-22-5>  5</a>
</span><span class=lnt id=hl-22-6><a class=lnlinks href=#hl-22-6>  6</a>
</span><span class=lnt id=hl-22-7><a class=lnlinks href=#hl-22-7>  7</a>
</span><span class=lnt id=hl-22-8><a class=lnlinks href=#hl-22-8>  8</a>
</span><span class=lnt id=hl-22-9><a class=lnlinks href=#hl-22-9>  9</a>
</span><span class=lnt id=hl-22-10><a class=lnlinks href=#hl-22-10> 10</a>
</span><span class=lnt id=hl-22-11><a class=lnlinks href=#hl-22-11> 11</a>
</span><span class=lnt id=hl-22-12><a class=lnlinks href=#hl-22-12> 12</a>
</span><span class=lnt id=hl-22-13><a class=lnlinks href=#hl-22-13> 13</a>
</span><span class=lnt id=hl-22-14><a class=lnlinks href=#hl-22-14> 14</a>
</span><span class=lnt id=hl-22-15><a class=lnlinks href=#hl-22-15> 15</a>
</span><span class=lnt id=hl-22-16><a class=lnlinks href=#hl-22-16> 16</a>
</span><span class=lnt id=hl-22-17><a class=lnlinks href=#hl-22-17> 17</a>
</span><span class=lnt id=hl-22-18><a class=lnlinks href=#hl-22-18> 18</a>
</span><span class=lnt id=hl-22-19><a class=lnlinks href=#hl-22-19> 19</a>
</span><span class=lnt id=hl-22-20><a class=lnlinks href=#hl-22-20> 20</a>
</span><span class=lnt id=hl-22-21><a class=lnlinks href=#hl-22-21> 21</a>
</span><span class=lnt id=hl-22-22><a class=lnlinks href=#hl-22-22> 22</a>
</span><span class=lnt id=hl-22-23><a class=lnlinks href=#hl-22-23> 23</a>
</span><span class=lnt id=hl-22-24><a class=lnlinks href=#hl-22-24> 24</a>
</span><span class=lnt id=hl-22-25><a class=lnlinks href=#hl-22-25> 25</a>
</span><span class=lnt id=hl-22-26><a class=lnlinks href=#hl-22-26> 26</a>
</span><span class=lnt id=hl-22-27><a class=lnlinks href=#hl-22-27> 27</a>
</span><span class=lnt id=hl-22-28><a class=lnlinks href=#hl-22-28> 28</a>
</span><span class=lnt id=hl-22-29><a class=lnlinks href=#hl-22-29> 29</a>
</span><span class=lnt id=hl-22-30><a class=lnlinks href=#hl-22-30> 30</a>
</span><span class=lnt id=hl-22-31><a class=lnlinks href=#hl-22-31> 31</a>
</span><span class=lnt id=hl-22-32><a class=lnlinks href=#hl-22-32> 32</a>
</span><span class=lnt id=hl-22-33><a class=lnlinks href=#hl-22-33> 33</a>
</span><span class=lnt id=hl-22-34><a class=lnlinks href=#hl-22-34> 34</a>
</span><span class=lnt id=hl-22-35><a class=lnlinks href=#hl-22-35> 35</a>
</span><span class=lnt id=hl-22-36><a class=lnlinks href=#hl-22-36> 36</a>
</span><span class=lnt id=hl-22-37><a class=lnlinks href=#hl-22-37> 37</a>
</span><span class=lnt id=hl-22-38><a class=lnlinks href=#hl-22-38> 38</a>
</span><span class=lnt id=hl-22-39><a class=lnlinks href=#hl-22-39> 39</a>
</span><span class=lnt id=hl-22-40><a class=lnlinks href=#hl-22-40> 40</a>
</span><span class=lnt id=hl-22-41><a class=lnlinks href=#hl-22-41> 41</a>
</span><span class=lnt id=hl-22-42><a class=lnlinks href=#hl-22-42> 42</a>
</span><span class=lnt id=hl-22-43><a class=lnlinks href=#hl-22-43> 43</a>
</span><span class=lnt id=hl-22-44><a class=lnlinks href=#hl-22-44> 44</a>
</span><span class=lnt id=hl-22-45><a class=lnlinks href=#hl-22-45> 45</a>
</span><span class=lnt id=hl-22-46><a class=lnlinks href=#hl-22-46> 46</a>
</span><span class=lnt id=hl-22-47><a class=lnlinks href=#hl-22-47> 47</a>
</span><span class=lnt id=hl-22-48><a class=lnlinks href=#hl-22-48> 48</a>
</span><span class=lnt id=hl-22-49><a class=lnlinks href=#hl-22-49> 49</a>
</span><span class=lnt id=hl-22-50><a class=lnlinks href=#hl-22-50> 50</a>
</span><span class=lnt id=hl-22-51><a class=lnlinks href=#hl-22-51> 51</a>
</span><span class=lnt id=hl-22-52><a class=lnlinks href=#hl-22-52> 52</a>
</span><span class=lnt id=hl-22-53><a class=lnlinks href=#hl-22-53> 53</a>
</span><span class=lnt id=hl-22-54><a class=lnlinks href=#hl-22-54> 54</a>
</span><span class=lnt id=hl-22-55><a class=lnlinks href=#hl-22-55> 55</a>
</span><span class=lnt id=hl-22-56><a class=lnlinks href=#hl-22-56> 56</a>
</span><span class=lnt id=hl-22-57><a class=lnlinks href=#hl-22-57> 57</a>
</span><span class=lnt id=hl-22-58><a class=lnlinks href=#hl-22-58> 58</a>
</span><span class=lnt id=hl-22-59><a class=lnlinks href=#hl-22-59> 59</a>
</span><span class=lnt id=hl-22-60><a class=lnlinks href=#hl-22-60> 60</a>
</span><span class=lnt id=hl-22-61><a class=lnlinks href=#hl-22-61> 61</a>
</span><span class=lnt id=hl-22-62><a class=lnlinks href=#hl-22-62> 62</a>
</span><span class=lnt id=hl-22-63><a class=lnlinks href=#hl-22-63> 63</a>
</span><span class=lnt id=hl-22-64><a class=lnlinks href=#hl-22-64> 64</a>
</span><span class=lnt id=hl-22-65><a class=lnlinks href=#hl-22-65> 65</a>
</span><span class=lnt id=hl-22-66><a class=lnlinks href=#hl-22-66> 66</a>
</span><span class=lnt id=hl-22-67><a class=lnlinks href=#hl-22-67> 67</a>
</span><span class=lnt id=hl-22-68><a class=lnlinks href=#hl-22-68> 68</a>
</span><span class=lnt id=hl-22-69><a class=lnlinks href=#hl-22-69> 69</a>
</span><span class=lnt id=hl-22-70><a class=lnlinks href=#hl-22-70> 70</a>
</span><span class=lnt id=hl-22-71><a class=lnlinks href=#hl-22-71> 71</a>
</span><span class=lnt id=hl-22-72><a class=lnlinks href=#hl-22-72> 72</a>
</span><span class=lnt id=hl-22-73><a class=lnlinks href=#hl-22-73> 73</a>
</span><span class=lnt id=hl-22-74><a class=lnlinks href=#hl-22-74> 74</a>
</span><span class=lnt id=hl-22-75><a class=lnlinks href=#hl-22-75> 75</a>
</span><span class=lnt id=hl-22-76><a class=lnlinks href=#hl-22-76> 76</a>
</span><span class=lnt id=hl-22-77><a class=lnlinks href=#hl-22-77> 77</a>
</span><span class=lnt id=hl-22-78><a class=lnlinks href=#hl-22-78> 78</a>
</span><span class=lnt id=hl-22-79><a class=lnlinks href=#hl-22-79> 79</a>
</span><span class=lnt id=hl-22-80><a class=lnlinks href=#hl-22-80> 80</a>
</span><span class=lnt id=hl-22-81><a class=lnlinks href=#hl-22-81> 81</a>
</span><span class=lnt id=hl-22-82><a class=lnlinks href=#hl-22-82> 82</a>
</span><span class=lnt id=hl-22-83><a class=lnlinks href=#hl-22-83> 83</a>
</span><span class=lnt id=hl-22-84><a class=lnlinks href=#hl-22-84> 84</a>
</span><span class=lnt id=hl-22-85><a class=lnlinks href=#hl-22-85> 85</a>
</span><span class=lnt id=hl-22-86><a class=lnlinks href=#hl-22-86> 86</a>
</span><span class=lnt id=hl-22-87><a class=lnlinks href=#hl-22-87> 87</a>
</span><span class=lnt id=hl-22-88><a class=lnlinks href=#hl-22-88> 88</a>
</span><span class=lnt id=hl-22-89><a class=lnlinks href=#hl-22-89> 89</a>
</span><span class=lnt id=hl-22-90><a class=lnlinks href=#hl-22-90> 90</a>
</span><span class=lnt id=hl-22-91><a class=lnlinks href=#hl-22-91> 91</a>
</span><span class=lnt id=hl-22-92><a class=lnlinks href=#hl-22-92> 92</a>
</span><span class=lnt id=hl-22-93><a class=lnlinks href=#hl-22-93> 93</a>
</span><span class=lnt id=hl-22-94><a class=lnlinks href=#hl-22-94> 94</a>
</span><span class=lnt id=hl-22-95><a class=lnlinks href=#hl-22-95> 95</a>
</span><span class=lnt id=hl-22-96><a class=lnlinks href=#hl-22-96> 96</a>
</span><span class=lnt id=hl-22-97><a class=lnlinks href=#hl-22-97> 97</a>
</span><span class=lnt id=hl-22-98><a class=lnlinks href=#hl-22-98> 98</a>
</span><span class=lnt id=hl-22-99><a class=lnlinks href=#hl-22-99> 99</a>
</span><span class=lnt id=hl-22-100><a class=lnlinks href=#hl-22-100>100</a>
</span><span class=lnt id=hl-22-101><a class=lnlinks href=#hl-22-101>101</a>
</span><span class=lnt id=hl-22-102><a class=lnlinks href=#hl-22-102>102</a>
</span><span class=lnt id=hl-22-103><a class=lnlinks href=#hl-22-103>103</a>
</span><span class=lnt id=hl-22-104><a class=lnlinks href=#hl-22-104>104</a>
</span><span class=lnt id=hl-22-105><a class=lnlinks href=#hl-22-105>105</a>
</span><span class=lnt id=hl-22-106><a class=lnlinks href=#hl-22-106>106</a>
</span><span class=lnt id=hl-22-107><a class=lnlinks href=#hl-22-107>107</a>
</span><span class=lnt id=hl-22-108><a class=lnlinks href=#hl-22-108>108</a>
</span><span class=lnt id=hl-22-109><a class=lnlinks href=#hl-22-109>109</a>
</span><span class=lnt id=hl-22-110><a class=lnlinks href=#hl-22-110>110</a>
</span><span class=lnt id=hl-22-111><a class=lnlinks href=#hl-22-111>111</a>
</span><span class=lnt id=hl-22-112><a class=lnlinks href=#hl-22-112>112</a>
</span><span class=lnt id=hl-22-113><a class=lnlinks href=#hl-22-113>113</a>
</span><span class=lnt id=hl-22-114><a class=lnlinks href=#hl-22-114>114</a>
</span><span class=lnt id=hl-22-115><a class=lnlinks href=#hl-22-115>115</a>
</span><span class=lnt id=hl-22-116><a class=lnlinks href=#hl-22-116>116</a>
</span><span class=lnt id=hl-22-117><a class=lnlinks href=#hl-22-117>117</a>
</span><span class=lnt id=hl-22-118><a class=lnlinks href=#hl-22-118>118</a>
</span><span class=lnt id=hl-22-119><a class=lnlinks href=#hl-22-119>119</a>
</span><span class=lnt id=hl-22-120><a class=lnlinks href=#hl-22-120>120</a>
</span><span class=lnt id=hl-22-121><a class=lnlinks href=#hl-22-121>121</a>
</span><span class=lnt id=hl-22-122><a class=lnlinks href=#hl-22-122>122</a>
</span><span class=lnt id=hl-22-123><a class=lnlinks href=#hl-22-123>123</a>
</span><span class=lnt id=hl-22-124><a class=lnlinks href=#hl-22-124>124</a>
</span><span class=lnt id=hl-22-125><a class=lnlinks href=#hl-22-125>125</a>
</span><span class=lnt id=hl-22-126><a class=lnlinks href=#hl-22-126>126</a>
</span><span class=lnt id=hl-22-127><a class=lnlinks href=#hl-22-127>127</a>
</span><span class=lnt id=hl-22-128><a class=lnlinks href=#hl-22-128>128</a>
</span><span class=lnt id=hl-22-129><a class=lnlinks href=#hl-22-129>129</a>
</span><span class=lnt id=hl-22-130><a class=lnlinks href=#hl-22-130>130</a>
</span><span class=lnt id=hl-22-131><a class=lnlinks href=#hl-22-131>131</a>
</span><span class=lnt id=hl-22-132><a class=lnlinks href=#hl-22-132>132</a>
</span><span class=lnt id=hl-22-133><a class=lnlinks href=#hl-22-133>133</a>
</span><span class=lnt id=hl-22-134><a class=lnlinks href=#hl-22-134>134</a>
</span><span class=lnt id=hl-22-135><a class=lnlinks href=#hl-22-135>135</a>
</span><span class=lnt id=hl-22-136><a class=lnlinks href=#hl-22-136>136</a>
</span><span class=lnt id=hl-22-137><a class=lnlinks href=#hl-22-137>137</a>
</span><span class=lnt id=hl-22-138><a class=lnlinks href=#hl-22-138>138</a>
</span><span class=lnt id=hl-22-139><a class=lnlinks href=#hl-22-139>139</a>
</span><span class=lnt id=hl-22-140><a class=lnlinks href=#hl-22-140>140</a>
</span><span class=lnt id=hl-22-141><a class=lnlinks href=#hl-22-141>141</a>
</span><span class=lnt id=hl-22-142><a class=lnlinks href=#hl-22-142>142</a>
</span><span class=lnt id=hl-22-143><a class=lnlinks href=#hl-22-143>143</a>
</span><span class=lnt id=hl-22-144><a class=lnlinks href=#hl-22-144>144</a>
</span><span class=lnt id=hl-22-145><a class=lnlinks href=#hl-22-145>145</a>
</span><span class=lnt id=hl-22-146><a class=lnlinks href=#hl-22-146>146</a>
</span><span class=lnt id=hl-22-147><a class=lnlinks href=#hl-22-147>147</a>
</span><span class=lnt id=hl-22-148><a class=lnlinks href=#hl-22-148>148</a>
</span><span class=lnt id=hl-22-149><a class=lnlinks href=#hl-22-149>149</a>
</span><span class=lnt id=hl-22-150><a class=lnlinks href=#hl-22-150>150</a>
</span><span class=lnt id=hl-22-151><a class=lnlinks href=#hl-22-151>151</a>
</span><span class=lnt id=hl-22-152><a class=lnlinks href=#hl-22-152>152</a>
</span><span class=lnt id=hl-22-153><a class=lnlinks href=#hl-22-153>153</a>
</span><span class=lnt id=hl-22-154><a class=lnlinks href=#hl-22-154>154</a>
</span><span class=lnt id=hl-22-155><a class=lnlinks href=#hl-22-155>155</a>
</span><span class=lnt id=hl-22-156><a class=lnlinks href=#hl-22-156>156</a>
</span><span class=lnt id=hl-22-157><a class=lnlinks href=#hl-22-157>157</a>
</span><span class=lnt id=hl-22-158><a class=lnlinks href=#hl-22-158>158</a>
</span><span class=lnt id=hl-22-159><a class=lnlinks href=#hl-22-159>159</a>
</span><span class=lnt id=hl-22-160><a class=lnlinks href=#hl-22-160>160</a>
</span><span class=lnt id=hl-22-161><a class=lnlinks href=#hl-22-161>161</a>
</span><span class=lnt id=hl-22-162><a class=lnlinks href=#hl-22-162>162</a>
</span><span class=lnt id=hl-22-163><a class=lnlinks href=#hl-22-163>163</a>
</span><span class=lnt id=hl-22-164><a class=lnlinks href=#hl-22-164>164</a>
</span><span class=lnt id=hl-22-165><a class=lnlinks href=#hl-22-165>165</a>
</span><span class=lnt id=hl-22-166><a class=lnlinks href=#hl-22-166>166</a>
</span><span class=lnt id=hl-22-167><a class=lnlinks href=#hl-22-167>167</a>
</span><span class=lnt id=hl-22-168><a class=lnlinks href=#hl-22-168>168</a>
</span><span class=lnt id=hl-22-169><a class=lnlinks href=#hl-22-169>169</a>
</span><span class=lnt id=hl-22-170><a class=lnlinks href=#hl-22-170>170</a>
</span><span class=lnt id=hl-22-171><a class=lnlinks href=#hl-22-171>171</a>
</span><span class=lnt id=hl-22-172><a class=lnlinks href=#hl-22-172>172</a>
</span><span class=lnt id=hl-22-173><a class=lnlinks href=#hl-22-173>173</a>
</span><span class=lnt id=hl-22-174><a class=lnlinks href=#hl-22-174>174</a>
</span><span class=lnt id=hl-22-175><a class=lnlinks href=#hl-22-175>175</a>
</span><span class=lnt id=hl-22-176><a class=lnlinks href=#hl-22-176>176</a>
</span><span class=lnt id=hl-22-177><a class=lnlinks href=#hl-22-177>177</a>
</span><span class=lnt id=hl-22-178><a class=lnlinks href=#hl-22-178>178</a>
</span><span class=lnt id=hl-22-179><a class=lnlinks href=#hl-22-179>179</a>
</span><span class=lnt id=hl-22-180><a class=lnlinks href=#hl-22-180>180</a>
</span><span class=lnt id=hl-22-181><a class=lnlinks href=#hl-22-181>181</a>
</span><span class=lnt id=hl-22-182><a class=lnlinks href=#hl-22-182>182</a>
</span><span class=lnt id=hl-22-183><a class=lnlinks href=#hl-22-183>183</a>
</span><span class=lnt id=hl-22-184><a class=lnlinks href=#hl-22-184>184</a>
</span><span class=lnt id=hl-22-185><a class=lnlinks href=#hl-22-185>185</a>
</span><span class=lnt id=hl-22-186><a class=lnlinks href=#hl-22-186>186</a>
</span><span class=lnt id=hl-22-187><a class=lnlinks href=#hl-22-187>187</a>
</span><span class=lnt id=hl-22-188><a class=lnlinks href=#hl-22-188>188</a>
</span><span class=lnt id=hl-22-189><a class=lnlinks href=#hl-22-189>189</a>
</span><span class=lnt id=hl-22-190><a class=lnlinks href=#hl-22-190>190</a>
</span><span class=lnt id=hl-22-191><a class=lnlinks href=#hl-22-191>191</a>
</span><span class=lnt id=hl-22-192><a class=lnlinks href=#hl-22-192>192</a>
</span><span class=lnt id=hl-22-193><a class=lnlinks href=#hl-22-193>193</a>
</span><span class=lnt id=hl-22-194><a class=lnlinks href=#hl-22-194>194</a>
</span><span class=lnt id=hl-22-195><a class=lnlinks href=#hl-22-195>195</a>
</span><span class=lnt id=hl-22-196><a class=lnlinks href=#hl-22-196>196</a>
</span><span class=lnt id=hl-22-197><a class=lnlinks href=#hl-22-197>197</a>
</span><span class=lnt id=hl-22-198><a class=lnlinks href=#hl-22-198>198</a>
</span><span class=lnt id=hl-22-199><a class=lnlinks href=#hl-22-199>199</a>
</span><span class=lnt id=hl-22-200><a class=lnlinks href=#hl-22-200>200</a>
</span><span class=lnt id=hl-22-201><a class=lnlinks href=#hl-22-201>201</a>
</span><span class=lnt id=hl-22-202><a class=lnlinks href=#hl-22-202>202</a>
</span><span class=lnt id=hl-22-203><a class=lnlinks href=#hl-22-203>203</a>
</span><span class=lnt id=hl-22-204><a class=lnlinks href=#hl-22-204>204</a>
</span><span class=lnt id=hl-22-205><a class=lnlinks href=#hl-22-205>205</a>
</span><span class=lnt id=hl-22-206><a class=lnlinks href=#hl-22-206>206</a>
</span><span class=lnt id=hl-22-207><a class=lnlinks href=#hl-22-207>207</a>
</span><span class=lnt id=hl-22-208><a class=lnlinks href=#hl-22-208>208</a>
</span><span class=lnt id=hl-22-209><a class=lnlinks href=#hl-22-209>209</a>
</span><span class=lnt id=hl-22-210><a class=lnlinks href=#hl-22-210>210</a>
</span><span class=lnt id=hl-22-211><a class=lnlinks href=#hl-22-211>211</a>
</span><span class=lnt id=hl-22-212><a class=lnlinks href=#hl-22-212>212</a>
</span><span class=lnt id=hl-22-213><a class=lnlinks href=#hl-22-213>213</a>
</span><span class=lnt id=hl-22-214><a class=lnlinks href=#hl-22-214>214</a>
</span><span class=lnt id=hl-22-215><a class=lnlinks href=#hl-22-215>215</a>
</span><span class=lnt id=hl-22-216><a class=lnlinks href=#hl-22-216>216</a>
</span><span class=lnt id=hl-22-217><a class=lnlinks href=#hl-22-217>217</a>
</span><span class=lnt id=hl-22-218><a class=lnlinks href=#hl-22-218>218</a>
</span><span class=lnt id=hl-22-219><a class=lnlinks href=#hl-22-219>219</a>
</span><span class=lnt id=hl-22-220><a class=lnlinks href=#hl-22-220>220</a>
</span><span class=lnt id=hl-22-221><a class=lnlinks href=#hl-22-221>221</a>
</span><span class=lnt id=hl-22-222><a class=lnlinks href=#hl-22-222>222</a>
</span><span class=lnt id=hl-22-223><a class=lnlinks href=#hl-22-223>223</a>
</span><span class=lnt id=hl-22-224><a class=lnlinks href=#hl-22-224>224</a>
</span><span class=lnt id=hl-22-225><a class=lnlinks href=#hl-22-225>225</a>
</span><span class=lnt id=hl-22-226><a class=lnlinks href=#hl-22-226>226</a>
</span><span class=lnt id=hl-22-227><a class=lnlinks href=#hl-22-227>227</a>
</span><span class=lnt id=hl-22-228><a class=lnlinks href=#hl-22-228>228</a>
</span><span class=lnt id=hl-22-229><a class=lnlinks href=#hl-22-229>229</a>
</span><span class=lnt id=hl-22-230><a class=lnlinks href=#hl-22-230>230</a>
</span><span class=lnt id=hl-22-231><a class=lnlinks href=#hl-22-231>231</a>
</span><span class=lnt id=hl-22-232><a class=lnlinks href=#hl-22-232>232</a>
</span><span class=lnt id=hl-22-233><a class=lnlinks href=#hl-22-233>233</a>
</span><span class=lnt id=hl-22-234><a class=lnlinks href=#hl-22-234>234</a>
</span><span class=lnt id=hl-22-235><a class=lnlinks href=#hl-22-235>235</a>
</span><span class=lnt id=hl-22-236><a class=lnlinks href=#hl-22-236>236</a>
</span><span class=lnt id=hl-22-237><a class=lnlinks href=#hl-22-237>237</a>
</span><span class=lnt id=hl-22-238><a class=lnlinks href=#hl-22-238>238</a>
</span><span class=lnt id=hl-22-239><a class=lnlinks href=#hl-22-239>239</a>
</span><span class=lnt id=hl-22-240><a class=lnlinks href=#hl-22-240>240</a>
</span><span class=lnt id=hl-22-241><a class=lnlinks href=#hl-22-241>241</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python3</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>PCB 성능 최적화 모니터링 도구
</span></span></span><span class=line><span class=cl><span class=s2>- 시스템 성능 지표 실시간 추적
</span></span></span><span class=line><span class=cl><span class=s2>- 최적화 포인트 자동 탐지 및 권장사항 제공
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>psutil</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span><span class=p>,</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>Tuple</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PerformanceMetrics</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;PCB 관련 성능 메트릭&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>context_switches_per_sec</span><span class=p>:</span> <span class=nb>float</span>    <span class=c1># 초당 컨텍스트 스위치 수</span>
</span></span><span class=line><span class=cl>    <span class=n>process_creation_rate</span><span class=p>:</span> <span class=nb>float</span>       <span class=c1># 초당 프로세스 생성률</span>
</span></span><span class=line><span class=cl>    <span class=n>memory_usage_mb</span><span class=p>:</span> <span class=nb>float</span>            <span class=c1># PCB 메모리 사용량 (MB)</span>
</span></span><span class=line><span class=cl>    <span class=n>cpu_utilization</span><span class=p>:</span> <span class=nb>float</span>            <span class=c1># CPU 사용률</span>
</span></span><span class=line><span class=cl>    <span class=n>zombie_process_count</span><span class=p>:</span> <span class=nb>int</span>         <span class=c1># 좀비 프로세스 수</span>
</span></span><span class=line><span class=cl>    <span class=n>average_process_memory</span><span class=p>:</span> <span class=nb>float</span>     <span class=c1># 프로세스당 평균 메모리 사용량</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>PCBPerformanceOptimizer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;PCB 성능 최적화 도구&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>metrics_history</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>PerformanceMetrics</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>optimization_recommendations</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>collect_metrics</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>PerformanceMetrics</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        현재 시스템의 PCB 관련 성능 메트릭 수집
</span></span></span><span class=line><span class=cl><span class=s2>        - /proc/stat의 컨텍스트 스위치 정보 활용
</span></span></span><span class=line><span class=cl><span class=s2>        - 프로세스 목록에서 PCB 관련 정보 추출
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 시스템 통계 정보 수집</span>
</span></span><span class=line><span class=cl>        <span class=n>cpu_percent</span> <span class=o>=</span> <span class=n>psutil</span><span class=o>.</span><span class=n>cpu_percent</span><span class=p>(</span><span class=n>interval</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>memory_info</span> <span class=o>=</span> <span class=n>psutil</span><span class=o>.</span><span class=n>virtual_memory</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 프로세스 정보 수집 (각 프로세스는 PCB로 관리됨)</span>
</span></span><span class=line><span class=cl>        <span class=n>processes</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>psutil</span><span class=o>.</span><span class=n>process_iter</span><span class=p>([</span><span class=s1>&#39;pid&#39;</span><span class=p>,</span> <span class=s1>&#39;status&#39;</span><span class=p>,</span> <span class=s1>&#39;memory_info&#39;</span><span class=p>]))</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 좀비 프로세스 수 계산 (PCB state == &#39;Z&#39;)</span>
</span></span><span class=line><span class=cl>        <span class=n>zombie_count</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=mi>1</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>processes</span> 
</span></span><span class=line><span class=cl>                          <span class=k>if</span> <span class=n>p</span><span class=o>.</span><span class=n>info</span><span class=p>[</span><span class=s1>&#39;status&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=n>psutil</span><span class=o>.</span><span class=n>STATUS_ZOMBIE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 평균 프로세스 메모리 사용량 계산</span>
</span></span><span class=line><span class=cl>        <span class=n>total_memory</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>p</span><span class=o>.</span><span class=n>info</span><span class=p>[</span><span class=s1>&#39;memory_info&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>rss</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>processes</span> 
</span></span><span class=line><span class=cl>                          <span class=k>if</span> <span class=n>p</span><span class=o>.</span><span class=n>info</span><span class=p>[</span><span class=s1>&#39;memory_info&#39;</span><span class=p>]</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>avg_process_memory</span> <span class=o>=</span> <span class=n>total_memory</span> <span class=o>/</span> <span class=nb>len</span><span class=p>(</span><span class=n>processes</span><span class=p>)</span> <span class=k>if</span> <span class=n>processes</span> <span class=k>else</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 컨텍스트 스위치 정보 수집</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;/proc/stat&#39;</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>line</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s1>&#39;ctxt&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                    <span class=c1># 이전 측정값과 비교하여 초당 컨텍스트 스위치 계산</span>
</span></span><span class=line><span class=cl>                    <span class=n>current_switches</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>line</span><span class=o>.</span><span class=n>split</span><span class=p>()[</span><span class=mi>1</span><span class=p>])</span>
</span></span><span class=line><span class=cl>                    <span class=n>context_switches_rate</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_calculate_rate</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                        <span class=n>current_switches</span><span class=p>,</span> <span class=s1>&#39;context_switches&#39;</span>
</span></span><span class=line><span class=cl>                    <span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>break</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>context_switches_rate</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 프로세스 생성률 계산</span>
</span></span><span class=line><span class=cl>        <span class=n>current_process_count</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>processes</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>process_creation_rate</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_calculate_rate</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>current_process_count</span><span class=p>,</span> <span class=s1>&#39;process_count&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>PerformanceMetrics</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>context_switches_per_sec</span><span class=o>=</span><span class=n>context_switches_rate</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>process_creation_rate</span><span class=o>=</span><span class=n>process_creation_rate</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>memory_usage_mb</span><span class=o>=</span><span class=n>memory_info</span><span class=o>.</span><span class=n>used</span> <span class=o>/</span> <span class=p>(</span><span class=mi>1024</span> <span class=o>*</span> <span class=mi>1024</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>cpu_utilization</span><span class=o>=</span><span class=n>cpu_percent</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>zombie_process_count</span><span class=o>=</span><span class=n>zombie_count</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>average_process_memory</span><span class=o>=</span><span class=n>avg_process_memory</span> <span class=o>/</span> <span class=p>(</span><span class=mi>1024</span> <span class=o>*</span> <span class=mi>1024</span><span class=p>)</span>  <span class=c1># MB</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_calculate_rate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>current_value</span><span class=p>:</span> <span class=nb>float</span><span class=p>,</span> <span class=n>metric_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>float</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;이전 값과 비교하여 변화율 계산&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s1>&#39;_previous_values&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_previous_values</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_previous_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>metric_name</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_previous_values</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_previous_values</span><span class=p>[</span><span class=n>metric_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>current_value</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>current_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>time_diff</span> <span class=o>=</span> <span class=n>current_time</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>_previous_time</span>
</span></span><span class=line><span class=cl>        <span class=n>value_diff</span> <span class=o>=</span> <span class=n>current_value</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>_previous_values</span><span class=p>[</span><span class=n>metric_name</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>rate</span> <span class=o>=</span> <span class=n>value_diff</span> <span class=o>/</span> <span class=n>time_diff</span> <span class=k>if</span> <span class=n>time_diff</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=k>else</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_previous_values</span><span class=p>[</span><span class=n>metric_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>current_value</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_previous_time</span> <span class=o>=</span> <span class=n>current_time</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>rate</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>analyze_performance</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>metrics</span><span class=p>:</span> <span class=n>PerformanceMetrics</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        성능 메트릭 분석 및 최적화 권장사항 생성
</span></span></span><span class=line><span class=cl><span class=s2>        - PCB 관련 성능 병목 구간 탐지
</span></span></span><span class=line><span class=cl><span class=s2>        - 최적화 우선순위 결정
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>recommendations</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 컨텍스트 스위칭 빈도 분석</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>metrics</span><span class=o>.</span><span class=n>context_switches_per_sec</span> <span class=o>&gt;</span> <span class=mi>10000</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>recommendations</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=sa>f</span><span class=s2>&#34;⚠️ 높은 컨텍스트 스위치 율 (</span><span class=si>{</span><span class=n>metrics</span><span class=o>.</span><span class=n>context_switches_per_sec</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>/sec)</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;   권장사항: 프로세스 수 감소, CPU 친화성 설정, 스케줄링 정책 최적화&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 좀비 프로세스 탐지</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>metrics</span><span class=o>.</span><span class=n>zombie_process_count</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>recommendations</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=sa>f</span><span class=s2>&#34;⚠️ 좀비 프로세스 탐지 (</span><span class=si>{</span><span class=n>metrics</span><span class=o>.</span><span class=n>zombie_process_count</span><span class=si>}</span><span class=s2>개)</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;   권장사항: 부모 프로세스의 wait() 호출 확인, 프로세스 정리 스크립트 실행&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 메모리 사용량 분석</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>metrics</span><span class=o>.</span><span class=n>average_process_memory</span> <span class=o>&gt;</span> <span class=mi>100</span><span class=p>:</span>  <span class=c1># 100MB 이상</span>
</span></span><span class=line><span class=cl>            <span class=n>recommendations</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=sa>f</span><span class=s2>&#34;⚠️ 높은 프로세스당 메모리 사용량 (</span><span class=si>{</span><span class=n>metrics</span><span class=o>.</span><span class=n>average_process_memory</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>MB)</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;   권장사항: 메모리 누수 확인, 프로세스 최적화, 메모리 풀링 고려&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 프로세스 생성률 분석</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>metrics</span><span class=o>.</span><span class=n>process_creation_rate</span> <span class=o>&gt;</span> <span class=mi>10</span><span class=p>:</span>  <span class=c1># 초당 10개 이상</span>
</span></span><span class=line><span class=cl>            <span class=n>recommendations</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=sa>f</span><span class=s2>&#34;⚠️ 높은 프로세스 생성률 (</span><span class=si>{</span><span class=n>metrics</span><span class=o>.</span><span class=n>process_creation_rate</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>/sec)</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;   권장사항: 프로세스 풀링, 스레드 사용 고려, fork() 호출 최적화&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># CPU 사용률 분석</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>metrics</span><span class=o>.</span><span class=n>cpu_utilization</span> <span class=o>&gt;</span> <span class=mi>80</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>recommendations</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=sa>f</span><span class=s2>&#34;⚠️ 높은 CPU 사용률 (</span><span class=si>{</span><span class=n>metrics</span><span class=o>.</span><span class=n>cpu_utilization</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>%)</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;   권장사항: 프로세스 부하 분산, 스케줄링 정책 조정, 하드웨어 증설 고려&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>recommendations</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>suggest_optimizations</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>history_length</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>10</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        성능 기록 분석을 통한 장기적 최적화 제안
</span></span></span><span class=line><span class=cl><span class=s2>        - 성능 트렌드 분석
</span></span></span><span class=line><span class=cl><span class=s2>        - 주기적 패턴 탐지
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>metrics_history</span><span class=p>)</span> <span class=o>&lt;</span> <span class=n>history_length</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;데이터 수집 중… 더 많은 데이터가 필요합니다.&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>recent_metrics</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>metrics_history</span><span class=p>[</span><span class=o>-</span><span class=n>history_length</span><span class=p>:]</span>
</span></span><span class=line><span class=cl>        <span class=n>optimizations</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 컨텍스트 스위치 트렌드 분석</span>
</span></span><span class=line><span class=cl>        <span class=n>cs_rates</span> <span class=o>=</span> <span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>context_switches_per_sec</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>recent_metrics</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>cs_trend</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>polyfit</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>cs_rates</span><span class=p>)),</span> <span class=n>cs_rates</span><span class=p>,</span> <span class=mi>1</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>cs_trend</span> <span class=o>&gt;</span> <span class=mi>100</span><span class=p>:</span>  <span class=c1># 증가 추세</span>
</span></span><span class=line><span class=cl>            <span class=n>optimizations</span><span class=p>[</span><span class=s2>&#34;context_switching&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;컨텍스트 스위칭이 지속적으로 증가하고 있습니다. &#34;</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;프로세스 아키텍처 재검토가 필요합니다.&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 메모리 사용량 트렌드 분석</span>
</span></span><span class=line><span class=cl>        <span class=n>memory_usage</span> <span class=o>=</span> <span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>average_process_memory</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>recent_metrics</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>memory_trend</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>polyfit</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>memory_usage</span><span class=p>)),</span> <span class=n>memory_usage</span><span class=p>,</span> <span class=mi>1</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>memory_trend</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>  <span class=c1># MB/측정주기</span>
</span></span><span class=line><span class=cl>            <span class=n>optimizations</span><span class=p>[</span><span class=s2>&#34;memory_management&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;프로세스 메모리 사용량이 지속적으로 증가하고 있습니다. &#34;</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;메모리 누수 검사와 가비지 컬렉션 최적화를 권장합니다.&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 좀비 프로세스 패턴 분석</span>
</span></span><span class=line><span class=cl>        <span class=n>zombie_counts</span> <span class=o>=</span> <span class=p>[</span><span class=n>m</span><span class=o>.</span><span class=n>zombie_process_count</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>recent_metrics</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>any</span><span class=p>(</span><span class=n>count</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=k>for</span> <span class=n>count</span> <span class=ow>in</span> <span class=n>zombie_counts</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>optimizations</span><span class=p>[</span><span class=s2>&#34;process_cleanup&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;주기적으로 좀비 프로세스가 발생하고 있습니다. &#34;</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;프로세스 생명주기 관리를 개선해야 합니다.&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>optimizations</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>run_optimization_analysis</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>duration_minutes</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>5</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;지정된 시간 동안 성능 모니터링 및 최적화 분석 실행&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;PCB 성능 최적화 분석 시작 (</span><span class=si>{</span><span class=n>duration_minutes</span><span class=si>}</span><span class=s2>분간)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=&#34;</span> <span class=o>*</span> <span class=mi>60</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>end_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>+</span> <span class=p>(</span><span class=n>duration_minutes</span> <span class=o>*</span> <span class=mi>60</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>measurement_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>&lt;</span> <span class=n>end_time</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 메트릭 수집</span>
</span></span><span class=line><span class=cl>            <span class=n>metrics</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>collect_metrics</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>metrics_history</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>metrics</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>measurement_count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 실시간 분석</span>
</span></span><span class=line><span class=cl>            <span class=n>recommendations</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>analyze_performance</span><span class=p>(</span><span class=n>metrics</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 결과 출력</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>[측정 #</span><span class=si>{</span><span class=n>measurement_count</span><span class=si>}</span><span class=s2>] </span><span class=si>{</span><span class=n>time</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s1>&#39;%H:%M:%S&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;컨텍스트 스위치: </span><span class=si>{</span><span class=n>metrics</span><span class=o>.</span><span class=n>context_switches_per_sec</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>/sec&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;프로세스 생성률: </span><span class=si>{</span><span class=n>metrics</span><span class=o>.</span><span class=n>process_creation_rate</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>/sec&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;좀비 프로세스: </span><span class=si>{</span><span class=n>metrics</span><span class=o>.</span><span class=n>zombie_process_count</span><span class=si>}</span><span class=s2>개&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;CPU 사용률: </span><span class=si>{</span><span class=n>metrics</span><span class=o>.</span><span class=n>cpu_utilization</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>%&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;프로세스당 평균 메모리: </span><span class=si>{</span><span class=n>metrics</span><span class=o>.</span><span class=n>average_process_memory</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>MB&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>recommendations</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>📋 즉시 조치 권장사항:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>rec</span> <span class=ow>in</span> <span class=n>recommendations</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  </span><span class=si>{</span><span class=n>rec</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>  <span class=c1># 10초 간격 측정</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 최종 최적화 제안</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span> <span class=o>+</span> <span class=s2>&#34;=&#34;</span> <span class=o>*</span> <span class=mi>60</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;📊 장기적 최적화 분석 결과&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=&#34;</span> <span class=o>*</span> <span class=mi>60</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>long_term_opts</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>suggest_optimizations</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>category</span><span class=p>,</span> <span class=n>suggestion</span> <span class=ow>in</span> <span class=n>long_term_opts</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>🔧 </span><span class=si>{</span><span class=n>category</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s1>&#39;_&#39;</span><span class=p>,</span> <span class=s1>&#39; &#39;</span><span class=p>)</span><span class=o>.</span><span class=n>title</span><span class=p>()</span><span class=si>}</span><span class=s2>:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;   </span><span class=si>{</span><span class=n>suggestion</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>optimizer</span> <span class=o>=</span> <span class=n>PCBPerformanceOptimizer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 5분간 성능 모니터링 및 최적화 분석</span>
</span></span><span class=line><span class=cl>        <span class=n>optimizer</span><span class=o>.</span><span class=n>run_optimization_analysis</span><span class=p>(</span><span class=n>duration_minutes</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>KeyboardInterrupt</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>분석을 중단합니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>총 </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>optimizer</span><span class=o>.</span><span class=n>metrics_history</span><span class=p>)</span><span class=si>}</span><span class=s2>개의 성능 데이터 포인트를 수집했습니다.&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>최적화 체크리스트</strong>:</p><ol><li><p><strong>시스템 레벨 최적화</strong></p><ul><li><input disabled type=checkbox> 커널 버전 최신화 (최신 PCB 구현 적용)</li><li><input disabled type=checkbox> 스케줄링 정책 튜닝 (CFS, RT 정책)</li><li><input disabled type=checkbox> NUMA 바인딩 설정</li><li><input disabled type=checkbox> 메모리 압축 기법 활용</li></ul></li><li><p><strong>응용 레벨 최적화</strong></p><ul><li><input disabled type=checkbox> 프로세스 풀링 적용</li><li><input disabled type=checkbox> 스레드 모델 최적화</li><li><input disabled type=checkbox> 메모리 사용량 프로파일링</li><li><input disabled type=checkbox> I/O 패턴 최적화</li></ul></li><li><p><strong>모니터링 및 튜닝</strong></p><ul><li><input disabled type=checkbox> 성능 메트릭 지속 수집</li><li><input disabled type=checkbox> 임계값 기반 알림 설정</li><li><input disabled type=checkbox> 정기적 성능 리뷰</li><li><input disabled type=checkbox> 용량 계획 수립</li></ul></li></ol><h3 id=고급-주제-advanced-topics>고급 주제 (Advanced Topics)<a hidden class=anchor aria-hidden=true href=#고급-주제-advanced-topics>#</a></h3><h3 id=71-현재-도전-과제>7.1 현재 도전 과제<a hidden class=anchor aria-hidden=true href=#71-현재-도전-과제>#</a></h3><blockquote><p>이 표는 현대 컴퓨팅 환경에서 PCB 가 직면한 기술적 도전과제를 분석하기 위해 작성되었습니다.</p></blockquote><table><thead><tr><th>구분</th><th>도전 과제</th><th>원인</th><th>영향</th><th>해결방안</th><th>구현 복잡도</th></tr></thead><tbody><tr><td><strong>확장성</strong></td><td>대규모 프로세스 관리</td><td>클라우드/컨테이너 환경의 수천 개 프로세스</td><td>스케줄링 지연, 메모리 부족</td><td>계층적 PCB 관리, 분산 스케줄링</td><td>매우 높음</td></tr><tr><td><strong>성능</strong></td><td>컨텍스트 스위칭 오버헤드</td><td>멀티코어 환경에서 캐시 일관성 문제</td><td>응답시간 증가, 처리율 저하</td><td>하드웨어 가속, NUMA-aware 설계</td><td>높음</td></tr><tr><td><strong>보안</strong></td><td>사이드 채널 공격</td><td>PCB 정보를 통한 프로세스 추론</td><td>보안 정보 유출 위험</td><td>정보 마스킹, 랜덤화 기법</td><td>중간</td></tr><tr><td><strong>가상화</strong></td><td>컨테이너 오버헤드</td><td>프로세스별 네임스페이스 관리</td><td>메모리 사용량 증가</td><td>경량화된 격리 기법</td><td>높음</td></tr><tr><td><strong>실시간성</strong></td><td>결정적 응답 시간</td><td>PCB 관리의 비결정적 특성</td><td>실시간 요구사항 미충족</td><td>우선순위 기반 PCB 관리</td><td>매우 높음</td></tr></tbody></table><p><strong>세부 도전 과제 분석</strong>:</p><ol><li><p><strong>멀티코어 확장성 문제</strong></p><ul><li><strong>원인</strong>: 전통적 PCB 설계는 단일 코어 중심으로 설계됨</li><li><strong>영향</strong>: 코어 수 증가 시 동시성 제어 오버헤드 급증</li><li><strong>해결방안</strong>: Per-CPU PCB 캐시, 무잠금 자료구조 도입</li><li><strong>탐지방법</strong>: <code>perf stat -e cache-misses,context-switches</code> 명령어로 캐시 미스율과 컨텍스트 스위치 측정</li><li><strong>예방방법</strong>: CPU 친화성 설정, 스레드 풀 사용</li><li><strong>해결기법</strong>: NUMA-aware 스케줄링, RCU (Read-Copy-Update) 기법 적용</li></ul></li><li><p><strong>메모리 지역성 문제</strong></p><ul><li><strong>원인</strong>: PCB 가 프로세서와 물리적으로 먼 메모리에 위치</li><li><strong>영향</strong>: 메모리 접근 지연 시간 증가 (100+ 사이클)</li><li><strong>해결방안</strong>: PCB 를 로컬 NUMA 노드에 배치, 핫 데이터 분리</li><li><strong>탐지방법</strong>: <code>numastat</code> 명령어로 NUMA 히트 미스 확인</li><li><strong>예방방법</strong>: 프로세스를 특정 NUMA 노드에 바인딩</li><li><strong>해결기법</strong>: 적응적 PCB 마이그레이션, 메모리 풀링</li></ul></li><li><p><strong>컨테이너 환경의 PCB 폭증</strong></p><ul><li><strong>원인</strong>: 마이크로서비스 아키텍처로 인한 프로세스 수 급증</li><li><strong>영향</strong>: PCB 메모리 사용량이 시스템 메모리의 상당 부분 차지</li><li><strong>해결방안</strong>: 경량화된 PCB 설계, 공유 가능한 정보 분리</li><li><strong>탐지방법</strong>: <code>ps axo pid,vsz,rss | wc -l</code> 로 프로세스 수 모니터링</li><li><strong>예방방법</strong>: 프로세스 풀링, 스레드 기반 설계 고려</li><li><strong>해결기법</strong>: Copy-on-Write PCB, 압축된 PCB 표현</li></ul></li></ol><h3 id=71-현재-도전-과제-1>7.1 현재 도전 과제<a hidden class=anchor aria-hidden=true href=#71-현재-도전-과제-1>#</a></h3><ul><li>대용량 시스템에서 PCB 메모리 경합, 커널 오버헤드 증가</li><li>보안 침해·PCB 변조 통한 권한 탈취</li><li>실시간·분산 환경에서 PCB 일관성 유지 문제</li></ul><h3 id=71-현재-도전-과제-2>7.1 현재 도전 과제<a hidden class=anchor aria-hidden=true href=#71-현재-도전-과제-2>#</a></h3><ul><li><strong>코어 증가/NUMA</strong>: 스케줄러·PCB 의 런큐 및 affinity 관리 복잡도 증가.</li><li><strong>보안/프라이버시</strong>: <code>/proc</code> 통제 (<code>hidepid</code>) 는 유용하지만 호환성/운영 리스크 존재. ([Kernel 문서][9], [Red Hat Customer Portal][17])</li><li><strong>컨테이너/네임스페이스</strong>: PCB 관측의 경계 (호스트↔컨테이너) 정합성.</li></ul><h3 id=72-생태계-및-관련-기술>7.2 생태계 및 관련 기술<a hidden class=anchor aria-hidden=true href=#72-생태계-및-관련-기술>#</a></h3><ul><li><strong>eBPF/BCC/bpftrace</strong>(커널 이벤트 관찰), <strong>perf/ETW</strong>(프로파일링), <strong>cgroups/CPUSET</strong>(리소스 통제), <strong>CFS/RT</strong>(정책). ([ebpf.io][14])</li></ul><h3 id=72-생태계-및-관련-기술-1>7.2 생태계 및 관련 기술<a hidden class=anchor aria-hidden=true href=#72-생태계-및-관련-기술-1>#</a></h3><blockquote><p>이 표는 PCB 와 관련된 기술·표준을 체계적으로 정리합니다.</p></blockquote><table><thead><tr><th>구분</th><th>관련 기술</th><th>설명</th><th>표준/프로토콜</th></tr></thead><tbody><tr><td>관리</td><td>프로세스 테이블</td><td>PCB 집합</td><td>POSIX 등</td></tr><tr><td>연계</td><td>스레드 제어 블록</td><td>프로세스 내 스레드 상태 관리</td><td>Pthreads</td></tr><tr><td>보안</td><td>커널 보호 메커니즘</td><td>PCB·데이터 보호 장치</td><td>SELinux, AppArmor</td></tr><tr><td>클라우드</td><td>컨테이너 오케스트레이션</td><td>격리·상태 관리 연계</td><td>Kubernetes 등</td></tr></tbody></table><h3 id=72-생태계-및-관련-기술-2>7.2 생태계 및 관련 기술<a hidden class=anchor aria-hidden=true href=#72-생태계-및-관련-기술-2>#</a></h3><p><strong>통합 연계 기술 생태계</strong>:</p><pre class=mermaid>mindmap
  root((PCB 생태계))
    
    컨테이너 기술
      Docker
        런타임 최적화
        이미지 레이어링
      Kubernetes
        Pod 관리
        자원 스케줄링
      containerd
        OCI 표준 준수
        성능 최적화
    
    가상화 플랫폼
      KVM
        하이퍼바이저 통합
        게스트 PCB 관리
      Xen
        Dom0/DomU 격리
        메모리 가상화
      VMware
        vSphere 통합
        리소스 풀링
    
    모니터링 도구
      Prometheus
        메트릭 수집
        알림 규칙
      Grafana
        시각화 대시보드
        성능 분석
      Jaeger
        분산 추적
        마이크로서비스 모니터링
    
    보안 프레임워크
      SELinux
        강제 접근 제어
        정책 기반 보안
      AppArmor
        응용 격리
        프로파일 기반 제어
      gVisor
        사용자공간 커널
        강화된 격리
    
    클라우드 플랫폼
      AWS ECS
        컨테이너 오케스트레이션
        자동 스케일링
      Google GKE
        관리형 Kubernetes
        최적화된 노드 풀
      Azure AKS
        하이브리드 클라우드
        통합 모니터링
</pre><p><strong>표준 및 프로토콜</strong>:</p><ol><li><p><strong>컨테이너 표준</strong></p><ul><li><strong>OCI (Open Container Initiative)</strong>: 컨테이너 런타임 표준</li><li><strong>CRI (Container Runtime Interface)</strong>: Kubernetes 런타임 인터페이스</li><li><strong>CNI (Container Network Interface)</strong>: 네트워크 플러그인 표준</li></ul></li><li><p><strong>관측성 표준</strong></p><ul><li><strong>OpenTelemetry</strong>: 분산 추적 및 메트릭 표준</li><li><strong>Prometheus 메트릭</strong>: 시계열 데이터 수집 표준</li><li><strong>OTLP (OpenTelemetry Protocol)</strong>: 원격 측정 데이터 전송 프로토콜</li></ul></li><li><p><strong>보안 표준</strong></p><ul><li><strong>NIST Cybersecurity Framework</strong>: 보안 제어 프레임워크</li><li><strong>CIS Controls</strong>: 사이버 보안 모범 사례</li><li><strong>OWASP Top 10</strong>: 웹 응용 보안 위험</li></ul></li></ol><p><strong>기술 통합 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1> 1</a>
</span><span class=lnt id=hl-24-2><a class=lnlinks href=#hl-24-2> 2</a>
</span><span class=lnt id=hl-24-3><a class=lnlinks href=#hl-24-3> 3</a>
</span><span class=lnt id=hl-24-4><a class=lnlinks href=#hl-24-4> 4</a>
</span><span class=lnt id=hl-24-5><a class=lnlinks href=#hl-24-5> 5</a>
</span><span class=lnt id=hl-24-6><a class=lnlinks href=#hl-24-6> 6</a>
</span><span class=lnt id=hl-24-7><a class=lnlinks href=#hl-24-7> 7</a>
</span><span class=lnt id=hl-24-8><a class=lnlinks href=#hl-24-8> 8</a>
</span><span class=lnt id=hl-24-9><a class=lnlinks href=#hl-24-9> 9</a>
</span><span class=lnt id=hl-24-10><a class=lnlinks href=#hl-24-10>10</a>
</span><span class=lnt id=hl-24-11><a class=lnlinks href=#hl-24-11>11</a>
</span><span class=lnt id=hl-24-12><a class=lnlinks href=#hl-24-12>12</a>
</span><span class=lnt id=hl-24-13><a class=lnlinks href=#hl-24-13>13</a>
</span><span class=lnt id=hl-24-14><a class=lnlinks href=#hl-24-14>14</a>
</span><span class=lnt id=hl-24-15><a class=lnlinks href=#hl-24-15>15</a>
</span><span class=lnt id=hl-24-16><a class=lnlinks href=#hl-24-16>16</a>
</span><span class=lnt id=hl-24-17><a class=lnlinks href=#hl-24-17>17</a>
</span><span class=lnt id=hl-24-18><a class=lnlinks href=#hl-24-18>18</a>
</span><span class=lnt id=hl-24-19><a class=lnlinks href=#hl-24-19>19</a>
</span><span class=lnt id=hl-24-20><a class=lnlinks href=#hl-24-20>20</a>
</span><span class=lnt id=hl-24-21><a class=lnlinks href=#hl-24-21>21</a>
</span><span class=lnt id=hl-24-22><a class=lnlinks href=#hl-24-22>22</a>
</span><span class=lnt id=hl-24-23><a class=lnlinks href=#hl-24-23>23</a>
</span><span class=lnt id=hl-24-24><a class=lnlinks href=#hl-24-24>24</a>
</span><span class=lnt id=hl-24-25><a class=lnlinks href=#hl-24-25>25</a>
</span><span class=lnt id=hl-24-26><a class=lnlinks href=#hl-24-26>26</a>
</span><span class=lnt id=hl-24-27><a class=lnlinks href=#hl-24-27>27</a>
</span><span class=lnt id=hl-24-28><a class=lnlinks href=#hl-24-28>28</a>
</span><span class=lnt id=hl-24-29><a class=lnlinks href=#hl-24-29>29</a>
</span><span class=lnt id=hl-24-30><a class=lnlinks href=#hl-24-30>30</a>
</span><span class=lnt id=hl-24-31><a class=lnlinks href=#hl-24-31>31</a>
</span><span class=lnt id=hl-24-32><a class=lnlinks href=#hl-24-32>32</a>
</span><span class=lnt id=hl-24-33><a class=lnlinks href=#hl-24-33>33</a>
</span><span class=lnt id=hl-24-34><a class=lnlinks href=#hl-24-34>34</a>
</span><span class=lnt id=hl-24-35><a class=lnlinks href=#hl-24-35>35</a>
</span><span class=lnt id=hl-24-36><a class=lnlinks href=#hl-24-36>36</a>
</span><span class=lnt id=hl-24-37><a class=lnlinks href=#hl-24-37>37</a>
</span><span class=lnt id=hl-24-38><a class=lnlinks href=#hl-24-38>38</a>
</span><span class=lnt id=hl-24-39><a class=lnlinks href=#hl-24-39>39</a>
</span><span class=lnt id=hl-24-40><a class=lnlinks href=#hl-24-40>40</a>
</span><span class=lnt id=hl-24-41><a class=lnlinks href=#hl-24-41>41</a>
</span><span class=lnt id=hl-24-42><a class=lnlinks href=#hl-24-42>42</a>
</span><span class=lnt id=hl-24-43><a class=lnlinks href=#hl-24-43>43</a>
</span><span class=lnt id=hl-24-44><a class=lnlinks href=#hl-24-44>44</a>
</span><span class=lnt id=hl-24-45><a class=lnlinks href=#hl-24-45>45</a>
</span><span class=lnt id=hl-24-46><a class=lnlinks href=#hl-24-46>46</a>
</span><span class=lnt id=hl-24-47><a class=lnlinks href=#hl-24-47>47</a>
</span><span class=lnt id=hl-24-48><a class=lnlinks href=#hl-24-48>48</a>
</span><span class=lnt id=hl-24-49><a class=lnlinks href=#hl-24-49>49</a>
</span><span class=lnt id=hl-24-50><a class=lnlinks href=#hl-24-50>50</a>
</span><span class=lnt id=hl-24-51><a class=lnlinks href=#hl-24-51>51</a>
</span><span class=lnt id=hl-24-52><a class=lnlinks href=#hl-24-52>52</a>
</span><span class=lnt id=hl-24-53><a class=lnlinks href=#hl-24-53>53</a>
</span><span class=lnt id=hl-24-54><a class=lnlinks href=#hl-24-54>54</a>
</span><span class=lnt id=hl-24-55><a class=lnlinks href=#hl-24-55>55</a>
</span><span class=lnt id=hl-24-56><a class=lnlinks href=#hl-24-56>56</a>
</span><span class=lnt id=hl-24-57><a class=lnlinks href=#hl-24-57>57</a>
</span><span class=lnt id=hl-24-58><a class=lnlinks href=#hl-24-58>58</a>
</span><span class=lnt id=hl-24-59><a class=lnlinks href=#hl-24-59>59</a>
</span><span class=lnt id=hl-24-60><a class=lnlinks href=#hl-24-60>60</a>
</span><span class=lnt id=hl-24-61><a class=lnlinks href=#hl-24-61>61</a>
</span><span class=lnt id=hl-24-62><a class=lnlinks href=#hl-24-62>62</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># Kubernetes에서 PCB 최적화를 위한 Pod 설정 예시</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>optimized-application</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># PCB 성능 최적화를 위한 어노테이션</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>scheduler.alpha.kubernetes.io/preferred-zone</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;zone-1&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>seccomp.security.alpha.kubernetes.io/pod</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;runtime/default&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># NUMA 노드 친화성 설정 (PCB 지역성 최적화)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>affinity</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>nodeAffinity</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>requiredDuringSchedulingIgnoredDuringExecution</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>nodeSelectorTerms</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>matchExpressions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>numa-topology</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>operator</span><span class=p>:</span><span class=w> </span><span class=l>In</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>values</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;zone-1&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 보안 컨텍스트 (PCB 보안 강화)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>securityContext</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runAsNonRoot</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runAsUser</span><span class=p>:</span><span class=w> </span><span class=m>1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>fsGroup</span><span class=p>:</span><span class=w> </span><span class=m>2000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>seccompProfile</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>RuntimeDefault</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>myapp:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># 자원 제한 (PCB 자원 관리)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;2&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;4Gi&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;1&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;2Gi&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># 환경 변수 (PCB 최적화 설정)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>GOMAXPROCS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;2&#34;</span><span class=w>  </span><span class=c># 프로세스 수 제한으로 PCB 오버헤드 감소</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>GOGC</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;100&#34;</span><span class=w>  </span><span class=c># 가비지 컬렉션 튜닝</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># 프로브 설정 (PCB 상태 모니터링)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>livenessProbe</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>httpGet</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/health</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>initialDelaySeconds</span><span class=p>:</span><span class=w> </span><span class=m>30</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>periodSeconds</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>readinessProbe</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>httpGet</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/ready</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>initialDelaySeconds</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>periodSeconds</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=73-최신-기술-트렌드와-미래-방향>7.3 최신 기술 트렌드와 미래 방향<a hidden class=anchor aria-hidden=true href=#73-최신-기술-트렌드와-미래-방향>#</a></h3><p><strong>현재 기술 트렌드</strong>:</p><ol><li><p><strong>eBPF 기반 PCB 관측성</strong></p><ul><li>커널 공간에서 직접 PCB 정보 수집</li><li>사용자 공간 오버헤드 없는 모니터링</li><li>실시간 성능 분석 및 디버깅 지원</li></ul></li><li><p><strong>사용자 레벨 스레드 라이브러리</strong></p><ul><li>Go 고루틴, Rust 비동기 태스크</li><li>PCB 생성 없는 경량 동시성</li><li>M:N 스레딩 모델 확산</li></ul></li><li><p><strong>WebAssembly 기반 격리</strong></p><ul><li>프로세스보다 경량한 격리 단위</li><li>PCB 오버헤드 없는 샌드박싱</li><li>마이크로 VM 과 결합한 하이브리드 접근</li></ul></li></ol><p><strong>미래 기술 방향</strong>:</p><pre class=mermaid>timeline
    title PCB 기술 발전 로드맵
    
    2024-2025 : eBPF 통합 강화
              : 실시간 PCB 관측성
              : 컨테이너 최적화
    
    2025-2027 : 하드웨어 가속
              : NPU 기반 스케줄링
              : 양자 컴퓨팅 대응
    
    2027-2030 : 분산 PCB 관리
              : 클러스터 레벨 최적화
              : AI 기반 예측 스케줄링
    
    2030+ : 뉴로모픽 컴퓨팅
          : 생체 모방 프로세스 모델
          : 자가 적응형 시스템
</pre><p><strong>주요 기술 혁신 영역</strong>:</p><ol><li><p><strong>인공지능 통합 PCB 관리</strong></p><ul><li><strong>머신러닝 기반 스케줄링</strong>: 과거 실행 패턴 학습을 통한 최적 스케줄링</li><li><strong>예측적 자원 할당</strong>: PCB 사용 패턴 예측으로 선제적 자원 배치</li><li><strong>자동 성능 튜닝</strong>: 실시간 성능 메트릭 기반 자동 파라미터 조정</li></ul></li><li><p><strong>하드웨어 - 소프트웨어 협력 설계</strong></p><ul><li><strong>전용 PCB 처리 유닛</strong>: CPU 내장 PCB 관리 하드웨어</li><li><strong>메모리 친화적 설계</strong>: 3D 스택 메모리와 통합된 PCB 저장</li><li><strong>양자 컴퓨팅 대응</strong>: 양자 프로세스 상태 관리 프레임워크</li></ul></li><li><p><strong>차세대 격리 기술</strong></p><ul><li><strong>하드웨어 기반 격리</strong>: Intel TXT, ARM TrustZone 활용</li><li><strong>형식적 검증</strong>: 수학적 증명 기반 PCB 보안 보장</li><li><strong>제로 트러스트 아키텍처</strong>: PCB 레벨 마이크로 세그멘테이션</li></ul></li></ol><p><strong>구현 예시 - AI 기반 PCB 스케줄러</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1>  1</a>
</span><span class=lnt id=hl-26-2><a class=lnlinks href=#hl-26-2>  2</a>
</span><span class=lnt id=hl-26-3><a class=lnlinks href=#hl-26-3>  3</a>
</span><span class=lnt id=hl-26-4><a class=lnlinks href=#hl-26-4>  4</a>
</span><span class=lnt id=hl-26-5><a class=lnlinks href=#hl-26-5>  5</a>
</span><span class=lnt id=hl-26-6><a class=lnlinks href=#hl-26-6>  6</a>
</span><span class=lnt id=hl-26-7><a class=lnlinks href=#hl-26-7>  7</a>
</span><span class=lnt id=hl-26-8><a class=lnlinks href=#hl-26-8>  8</a>
</span><span class=lnt id=hl-26-9><a class=lnlinks href=#hl-26-9>  9</a>
</span><span class=lnt id=hl-26-10><a class=lnlinks href=#hl-26-10> 10</a>
</span><span class=lnt id=hl-26-11><a class=lnlinks href=#hl-26-11> 11</a>
</span><span class=lnt id=hl-26-12><a class=lnlinks href=#hl-26-12> 12</a>
</span><span class=lnt id=hl-26-13><a class=lnlinks href=#hl-26-13> 13</a>
</span><span class=lnt id=hl-26-14><a class=lnlinks href=#hl-26-14> 14</a>
</span><span class=lnt id=hl-26-15><a class=lnlinks href=#hl-26-15> 15</a>
</span><span class=lnt id=hl-26-16><a class=lnlinks href=#hl-26-16> 16</a>
</span><span class=lnt id=hl-26-17><a class=lnlinks href=#hl-26-17> 17</a>
</span><span class=lnt id=hl-26-18><a class=lnlinks href=#hl-26-18> 18</a>
</span><span class=lnt id=hl-26-19><a class=lnlinks href=#hl-26-19> 19</a>
</span><span class=lnt id=hl-26-20><a class=lnlinks href=#hl-26-20> 20</a>
</span><span class=lnt id=hl-26-21><a class=lnlinks href=#hl-26-21> 21</a>
</span><span class=lnt id=hl-26-22><a class=lnlinks href=#hl-26-22> 22</a>
</span><span class=lnt id=hl-26-23><a class=lnlinks href=#hl-26-23> 23</a>
</span><span class=lnt id=hl-26-24><a class=lnlinks href=#hl-26-24> 24</a>
</span><span class=lnt id=hl-26-25><a class=lnlinks href=#hl-26-25> 25</a>
</span><span class=lnt id=hl-26-26><a class=lnlinks href=#hl-26-26> 26</a>
</span><span class=lnt id=hl-26-27><a class=lnlinks href=#hl-26-27> 27</a>
</span><span class=lnt id=hl-26-28><a class=lnlinks href=#hl-26-28> 28</a>
</span><span class=lnt id=hl-26-29><a class=lnlinks href=#hl-26-29> 29</a>
</span><span class=lnt id=hl-26-30><a class=lnlinks href=#hl-26-30> 30</a>
</span><span class=lnt id=hl-26-31><a class=lnlinks href=#hl-26-31> 31</a>
</span><span class=lnt id=hl-26-32><a class=lnlinks href=#hl-26-32> 32</a>
</span><span class=lnt id=hl-26-33><a class=lnlinks href=#hl-26-33> 33</a>
</span><span class=lnt id=hl-26-34><a class=lnlinks href=#hl-26-34> 34</a>
</span><span class=lnt id=hl-26-35><a class=lnlinks href=#hl-26-35> 35</a>
</span><span class=lnt id=hl-26-36><a class=lnlinks href=#hl-26-36> 36</a>
</span><span class=lnt id=hl-26-37><a class=lnlinks href=#hl-26-37> 37</a>
</span><span class=lnt id=hl-26-38><a class=lnlinks href=#hl-26-38> 38</a>
</span><span class=lnt id=hl-26-39><a class=lnlinks href=#hl-26-39> 39</a>
</span><span class=lnt id=hl-26-40><a class=lnlinks href=#hl-26-40> 40</a>
</span><span class=lnt id=hl-26-41><a class=lnlinks href=#hl-26-41> 41</a>
</span><span class=lnt id=hl-26-42><a class=lnlinks href=#hl-26-42> 42</a>
</span><span class=lnt id=hl-26-43><a class=lnlinks href=#hl-26-43> 43</a>
</span><span class=lnt id=hl-26-44><a class=lnlinks href=#hl-26-44> 44</a>
</span><span class=lnt id=hl-26-45><a class=lnlinks href=#hl-26-45> 45</a>
</span><span class=lnt id=hl-26-46><a class=lnlinks href=#hl-26-46> 46</a>
</span><span class=lnt id=hl-26-47><a class=lnlinks href=#hl-26-47> 47</a>
</span><span class=lnt id=hl-26-48><a class=lnlinks href=#hl-26-48> 48</a>
</span><span class=lnt id=hl-26-49><a class=lnlinks href=#hl-26-49> 49</a>
</span><span class=lnt id=hl-26-50><a class=lnlinks href=#hl-26-50> 50</a>
</span><span class=lnt id=hl-26-51><a class=lnlinks href=#hl-26-51> 51</a>
</span><span class=lnt id=hl-26-52><a class=lnlinks href=#hl-26-52> 52</a>
</span><span class=lnt id=hl-26-53><a class=lnlinks href=#hl-26-53> 53</a>
</span><span class=lnt id=hl-26-54><a class=lnlinks href=#hl-26-54> 54</a>
</span><span class=lnt id=hl-26-55><a class=lnlinks href=#hl-26-55> 55</a>
</span><span class=lnt id=hl-26-56><a class=lnlinks href=#hl-26-56> 56</a>
</span><span class=lnt id=hl-26-57><a class=lnlinks href=#hl-26-57> 57</a>
</span><span class=lnt id=hl-26-58><a class=lnlinks href=#hl-26-58> 58</a>
</span><span class=lnt id=hl-26-59><a class=lnlinks href=#hl-26-59> 59</a>
</span><span class=lnt id=hl-26-60><a class=lnlinks href=#hl-26-60> 60</a>
</span><span class=lnt id=hl-26-61><a class=lnlinks href=#hl-26-61> 61</a>
</span><span class=lnt id=hl-26-62><a class=lnlinks href=#hl-26-62> 62</a>
</span><span class=lnt id=hl-26-63><a class=lnlinks href=#hl-26-63> 63</a>
</span><span class=lnt id=hl-26-64><a class=lnlinks href=#hl-26-64> 64</a>
</span><span class=lnt id=hl-26-65><a class=lnlinks href=#hl-26-65> 65</a>
</span><span class=lnt id=hl-26-66><a class=lnlinks href=#hl-26-66> 66</a>
</span><span class=lnt id=hl-26-67><a class=lnlinks href=#hl-26-67> 67</a>
</span><span class=lnt id=hl-26-68><a class=lnlinks href=#hl-26-68> 68</a>
</span><span class=lnt id=hl-26-69><a class=lnlinks href=#hl-26-69> 69</a>
</span><span class=lnt id=hl-26-70><a class=lnlinks href=#hl-26-70> 70</a>
</span><span class=lnt id=hl-26-71><a class=lnlinks href=#hl-26-71> 71</a>
</span><span class=lnt id=hl-26-72><a class=lnlinks href=#hl-26-72> 72</a>
</span><span class=lnt id=hl-26-73><a class=lnlinks href=#hl-26-73> 73</a>
</span><span class=lnt id=hl-26-74><a class=lnlinks href=#hl-26-74> 74</a>
</span><span class=lnt id=hl-26-75><a class=lnlinks href=#hl-26-75> 75</a>
</span><span class=lnt id=hl-26-76><a class=lnlinks href=#hl-26-76> 76</a>
</span><span class=lnt id=hl-26-77><a class=lnlinks href=#hl-26-77> 77</a>
</span><span class=lnt id=hl-26-78><a class=lnlinks href=#hl-26-78> 78</a>
</span><span class=lnt id=hl-26-79><a class=lnlinks href=#hl-26-79> 79</a>
</span><span class=lnt id=hl-26-80><a class=lnlinks href=#hl-26-80> 80</a>
</span><span class=lnt id=hl-26-81><a class=lnlinks href=#hl-26-81> 81</a>
</span><span class=lnt id=hl-26-82><a class=lnlinks href=#hl-26-82> 82</a>
</span><span class=lnt id=hl-26-83><a class=lnlinks href=#hl-26-83> 83</a>
</span><span class=lnt id=hl-26-84><a class=lnlinks href=#hl-26-84> 84</a>
</span><span class=lnt id=hl-26-85><a class=lnlinks href=#hl-26-85> 85</a>
</span><span class=lnt id=hl-26-86><a class=lnlinks href=#hl-26-86> 86</a>
</span><span class=lnt id=hl-26-87><a class=lnlinks href=#hl-26-87> 87</a>
</span><span class=lnt id=hl-26-88><a class=lnlinks href=#hl-26-88> 88</a>
</span><span class=lnt id=hl-26-89><a class=lnlinks href=#hl-26-89> 89</a>
</span><span class=lnt id=hl-26-90><a class=lnlinks href=#hl-26-90> 90</a>
</span><span class=lnt id=hl-26-91><a class=lnlinks href=#hl-26-91> 91</a>
</span><span class=lnt id=hl-26-92><a class=lnlinks href=#hl-26-92> 92</a>
</span><span class=lnt id=hl-26-93><a class=lnlinks href=#hl-26-93> 93</a>
</span><span class=lnt id=hl-26-94><a class=lnlinks href=#hl-26-94> 94</a>
</span><span class=lnt id=hl-26-95><a class=lnlinks href=#hl-26-95> 95</a>
</span><span class=lnt id=hl-26-96><a class=lnlinks href=#hl-26-96> 96</a>
</span><span class=lnt id=hl-26-97><a class=lnlinks href=#hl-26-97> 97</a>
</span><span class=lnt id=hl-26-98><a class=lnlinks href=#hl-26-98> 98</a>
</span><span class=lnt id=hl-26-99><a class=lnlinks href=#hl-26-99> 99</a>
</span><span class=lnt id=hl-26-100><a class=lnlinks href=#hl-26-100>100</a>
</span><span class=lnt id=hl-26-101><a class=lnlinks href=#hl-26-101>101</a>
</span><span class=lnt id=hl-26-102><a class=lnlinks href=#hl-26-102>102</a>
</span><span class=lnt id=hl-26-103><a class=lnlinks href=#hl-26-103>103</a>
</span><span class=lnt id=hl-26-104><a class=lnlinks href=#hl-26-104>104</a>
</span><span class=lnt id=hl-26-105><a class=lnlinks href=#hl-26-105>105</a>
</span><span class=lnt id=hl-26-106><a class=lnlinks href=#hl-26-106>106</a>
</span><span class=lnt id=hl-26-107><a class=lnlinks href=#hl-26-107>107</a>
</span><span class=lnt id=hl-26-108><a class=lnlinks href=#hl-26-108>108</a>
</span><span class=lnt id=hl-26-109><a class=lnlinks href=#hl-26-109>109</a>
</span><span class=lnt id=hl-26-110><a class=lnlinks href=#hl-26-110>110</a>
</span><span class=lnt id=hl-26-111><a class=lnlinks href=#hl-26-111>111</a>
</span><span class=lnt id=hl-26-112><a class=lnlinks href=#hl-26-112>112</a>
</span><span class=lnt id=hl-26-113><a class=lnlinks href=#hl-26-113>113</a>
</span><span class=lnt id=hl-26-114><a class=lnlinks href=#hl-26-114>114</a>
</span><span class=lnt id=hl-26-115><a class=lnlinks href=#hl-26-115>115</a>
</span><span class=lnt id=hl-26-116><a class=lnlinks href=#hl-26-116>116</a>
</span><span class=lnt id=hl-26-117><a class=lnlinks href=#hl-26-117>117</a>
</span><span class=lnt id=hl-26-118><a class=lnlinks href=#hl-26-118>118</a>
</span><span class=lnt id=hl-26-119><a class=lnlinks href=#hl-26-119>119</a>
</span><span class=lnt id=hl-26-120><a class=lnlinks href=#hl-26-120>120</a>
</span><span class=lnt id=hl-26-121><a class=lnlinks href=#hl-26-121>121</a>
</span><span class=lnt id=hl-26-122><a class=lnlinks href=#hl-26-122>122</a>
</span><span class=lnt id=hl-26-123><a class=lnlinks href=#hl-26-123>123</a>
</span><span class=lnt id=hl-26-124><a class=lnlinks href=#hl-26-124>124</a>
</span><span class=lnt id=hl-26-125><a class=lnlinks href=#hl-26-125>125</a>
</span><span class=lnt id=hl-26-126><a class=lnlinks href=#hl-26-126>126</a>
</span><span class=lnt id=hl-26-127><a class=lnlinks href=#hl-26-127>127</a>
</span><span class=lnt id=hl-26-128><a class=lnlinks href=#hl-26-128>128</a>
</span><span class=lnt id=hl-26-129><a class=lnlinks href=#hl-26-129>129</a>
</span><span class=lnt id=hl-26-130><a class=lnlinks href=#hl-26-130>130</a>
</span><span class=lnt id=hl-26-131><a class=lnlinks href=#hl-26-131>131</a>
</span><span class=lnt id=hl-26-132><a class=lnlinks href=#hl-26-132>132</a>
</span><span class=lnt id=hl-26-133><a class=lnlinks href=#hl-26-133>133</a>
</span><span class=lnt id=hl-26-134><a class=lnlinks href=#hl-26-134>134</a>
</span><span class=lnt id=hl-26-135><a class=lnlinks href=#hl-26-135>135</a>
</span><span class=lnt id=hl-26-136><a class=lnlinks href=#hl-26-136>136</a>
</span><span class=lnt id=hl-26-137><a class=lnlinks href=#hl-26-137>137</a>
</span><span class=lnt id=hl-26-138><a class=lnlinks href=#hl-26-138>138</a>
</span><span class=lnt id=hl-26-139><a class=lnlinks href=#hl-26-139>139</a>
</span><span class=lnt id=hl-26-140><a class=lnlinks href=#hl-26-140>140</a>
</span><span class=lnt id=hl-26-141><a class=lnlinks href=#hl-26-141>141</a>
</span><span class=lnt id=hl-26-142><a class=lnlinks href=#hl-26-142>142</a>
</span><span class=lnt id=hl-26-143><a class=lnlinks href=#hl-26-143>143</a>
</span><span class=lnt id=hl-26-144><a class=lnlinks href=#hl-26-144>144</a>
</span><span class=lnt id=hl-26-145><a class=lnlinks href=#hl-26-145>145</a>
</span><span class=lnt id=hl-26-146><a class=lnlinks href=#hl-26-146>146</a>
</span><span class=lnt id=hl-26-147><a class=lnlinks href=#hl-26-147>147</a>
</span><span class=lnt id=hl-26-148><a class=lnlinks href=#hl-26-148>148</a>
</span><span class=lnt id=hl-26-149><a class=lnlinks href=#hl-26-149>149</a>
</span><span class=lnt id=hl-26-150><a class=lnlinks href=#hl-26-150>150</a>
</span><span class=lnt id=hl-26-151><a class=lnlinks href=#hl-26-151>151</a>
</span><span class=lnt id=hl-26-152><a class=lnlinks href=#hl-26-152>152</a>
</span><span class=lnt id=hl-26-153><a class=lnlinks href=#hl-26-153>153</a>
</span><span class=lnt id=hl-26-154><a class=lnlinks href=#hl-26-154>154</a>
</span><span class=lnt id=hl-26-155><a class=lnlinks href=#hl-26-155>155</a>
</span><span class=lnt id=hl-26-156><a class=lnlinks href=#hl-26-156>156</a>
</span><span class=lnt id=hl-26-157><a class=lnlinks href=#hl-26-157>157</a>
</span><span class=lnt id=hl-26-158><a class=lnlinks href=#hl-26-158>158</a>
</span><span class=lnt id=hl-26-159><a class=lnlinks href=#hl-26-159>159</a>
</span><span class=lnt id=hl-26-160><a class=lnlinks href=#hl-26-160>160</a>
</span><span class=lnt id=hl-26-161><a class=lnlinks href=#hl-26-161>161</a>
</span><span class=lnt id=hl-26-162><a class=lnlinks href=#hl-26-162>162</a>
</span><span class=lnt id=hl-26-163><a class=lnlinks href=#hl-26-163>163</a>
</span><span class=lnt id=hl-26-164><a class=lnlinks href=#hl-26-164>164</a>
</span><span class=lnt id=hl-26-165><a class=lnlinks href=#hl-26-165>165</a>
</span><span class=lnt id=hl-26-166><a class=lnlinks href=#hl-26-166>166</a>
</span><span class=lnt id=hl-26-167><a class=lnlinks href=#hl-26-167>167</a>
</span><span class=lnt id=hl-26-168><a class=lnlinks href=#hl-26-168>168</a>
</span><span class=lnt id=hl-26-169><a class=lnlinks href=#hl-26-169>169</a>
</span><span class=lnt id=hl-26-170><a class=lnlinks href=#hl-26-170>170</a>
</span><span class=lnt id=hl-26-171><a class=lnlinks href=#hl-26-171>171</a>
</span><span class=lnt id=hl-26-172><a class=lnlinks href=#hl-26-172>172</a>
</span><span class=lnt id=hl-26-173><a class=lnlinks href=#hl-26-173>173</a>
</span><span class=lnt id=hl-26-174><a class=lnlinks href=#hl-26-174>174</a>
</span><span class=lnt id=hl-26-175><a class=lnlinks href=#hl-26-175>175</a>
</span><span class=lnt id=hl-26-176><a class=lnlinks href=#hl-26-176>176</a>
</span><span class=lnt id=hl-26-177><a class=lnlinks href=#hl-26-177>177</a>
</span><span class=lnt id=hl-26-178><a class=lnlinks href=#hl-26-178>178</a>
</span><span class=lnt id=hl-26-179><a class=lnlinks href=#hl-26-179>179</a>
</span><span class=lnt id=hl-26-180><a class=lnlinks href=#hl-26-180>180</a>
</span><span class=lnt id=hl-26-181><a class=lnlinks href=#hl-26-181>181</a>
</span><span class=lnt id=hl-26-182><a class=lnlinks href=#hl-26-182>182</a>
</span><span class=lnt id=hl-26-183><a class=lnlinks href=#hl-26-183>183</a>
</span><span class=lnt id=hl-26-184><a class=lnlinks href=#hl-26-184>184</a>
</span><span class=lnt id=hl-26-185><a class=lnlinks href=#hl-26-185>185</a>
</span><span class=lnt id=hl-26-186><a class=lnlinks href=#hl-26-186>186</a>
</span><span class=lnt id=hl-26-187><a class=lnlinks href=#hl-26-187>187</a>
</span><span class=lnt id=hl-26-188><a class=lnlinks href=#hl-26-188>188</a>
</span><span class=lnt id=hl-26-189><a class=lnlinks href=#hl-26-189>189</a>
</span><span class=lnt id=hl-26-190><a class=lnlinks href=#hl-26-190>190</a>
</span><span class=lnt id=hl-26-191><a class=lnlinks href=#hl-26-191>191</a>
</span><span class=lnt id=hl-26-192><a class=lnlinks href=#hl-26-192>192</a>
</span><span class=lnt id=hl-26-193><a class=lnlinks href=#hl-26-193>193</a>
</span><span class=lnt id=hl-26-194><a class=lnlinks href=#hl-26-194>194</a>
</span><span class=lnt id=hl-26-195><a class=lnlinks href=#hl-26-195>195</a>
</span><span class=lnt id=hl-26-196><a class=lnlinks href=#hl-26-196>196</a>
</span><span class=lnt id=hl-26-197><a class=lnlinks href=#hl-26-197>197</a>
</span><span class=lnt id=hl-26-198><a class=lnlinks href=#hl-26-198>198</a>
</span><span class=lnt id=hl-26-199><a class=lnlinks href=#hl-26-199>199</a>
</span><span class=lnt id=hl-26-200><a class=lnlinks href=#hl-26-200>200</a>
</span><span class=lnt id=hl-26-201><a class=lnlinks href=#hl-26-201>201</a>
</span><span class=lnt id=hl-26-202><a class=lnlinks href=#hl-26-202>202</a>
</span><span class=lnt id=hl-26-203><a class=lnlinks href=#hl-26-203>203</a>
</span><span class=lnt id=hl-26-204><a class=lnlinks href=#hl-26-204>204</a>
</span><span class=lnt id=hl-26-205><a class=lnlinks href=#hl-26-205>205</a>
</span><span class=lnt id=hl-26-206><a class=lnlinks href=#hl-26-206>206</a>
</span><span class=lnt id=hl-26-207><a class=lnlinks href=#hl-26-207>207</a>
</span><span class=lnt id=hl-26-208><a class=lnlinks href=#hl-26-208>208</a>
</span><span class=lnt id=hl-26-209><a class=lnlinks href=#hl-26-209>209</a>
</span><span class=lnt id=hl-26-210><a class=lnlinks href=#hl-26-210>210</a>
</span><span class=lnt id=hl-26-211><a class=lnlinks href=#hl-26-211>211</a>
</span><span class=lnt id=hl-26-212><a class=lnlinks href=#hl-26-212>212</a>
</span><span class=lnt id=hl-26-213><a class=lnlinks href=#hl-26-213>213</a>
</span><span class=lnt id=hl-26-214><a class=lnlinks href=#hl-26-214>214</a>
</span><span class=lnt id=hl-26-215><a class=lnlinks href=#hl-26-215>215</a>
</span><span class=lnt id=hl-26-216><a class=lnlinks href=#hl-26-216>216</a>
</span><span class=lnt id=hl-26-217><a class=lnlinks href=#hl-26-217>217</a>
</span><span class=lnt id=hl-26-218><a class=lnlinks href=#hl-26-218>218</a>
</span><span class=lnt id=hl-26-219><a class=lnlinks href=#hl-26-219>219</a>
</span><span class=lnt id=hl-26-220><a class=lnlinks href=#hl-26-220>220</a>
</span><span class=lnt id=hl-26-221><a class=lnlinks href=#hl-26-221>221</a>
</span><span class=lnt id=hl-26-222><a class=lnlinks href=#hl-26-222>222</a>
</span><span class=lnt id=hl-26-223><a class=lnlinks href=#hl-26-223>223</a>
</span><span class=lnt id=hl-26-224><a class=lnlinks href=#hl-26-224>224</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python3</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>AI 기반 PCB 스케줄링 최적화 시스템
</span></span></span><span class=line><span class=cl><span class=s2>- 머신러닝을 활용한 프로세스 실행 패턴 학습
</span></span></span><span class=line><span class=cl><span class=s2>- 예측 기반 최적 CPU 코어 배치
</span></span></span><span class=line><span class=cl><span class=s2>- 실시간 성능 피드백 기반 동적 조정
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>tensorflow</span> <span class=k>as</span> <span class=nn>tf</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sklearn.preprocessing</span> <span class=kn>import</span> <span class=n>StandardScaler</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span><span class=p>,</span> <span class=n>Tuple</span><span class=p>,</span> <span class=n>Dict</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>psutil</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ProcessProfile</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;프로세스 실행 프로파일 (PCB 정보 기반)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>pid</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    <span class=n>cpu_usage_history</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span>    <span class=c1># PCB의 CPU 시간 이력</span>
</span></span><span class=line><span class=cl>    <span class=n>memory_usage_history</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=c1># PCB의 메모리 사용 이력</span>
</span></span><span class=line><span class=cl>    <span class=n>io_operations</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span>          <span class=c1># I/O 작업 횟수</span>
</span></span><span class=line><span class=cl>    <span class=n>context_switches</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span>       <span class=c1># 컨텍스트 스위치 횟수</span>
</span></span><span class=line><span class=cl>    <span class=n>priority</span><span class=p>:</span> <span class=nb>int</span>                     <span class=c1># PCB의 우선순위</span>
</span></span><span class=line><span class=cl>    <span class=n>nice_value</span><span class=p>:</span> <span class=nb>int</span>                   <span class=c1># 스케줄링 우선순위</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AIScheduler</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;AI 기반 PCB 스케줄링 최적화 엔진&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>num_cores</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>8</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>num_cores</span> <span class=o>=</span> <span class=n>num_cores</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>process_profiles</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=n>ProcessProfile</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>scaler</span> <span class=o>=</span> <span class=n>StandardScaler</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 신경망 모델 초기화 (프로세스 성능 예측)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>model</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_build_prediction_model</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>training_data</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_build_prediction_model</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>tf</span><span class=o>.</span><span class=n>keras</span><span class=o>.</span><span class=n>Model</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        프로세스 성능 예측을 위한 신경망 모델
</span></span></span><span class=line><span class=cl><span class=s2>        - 입력: PCB 기반 프로세스 특성 벡터
</span></span></span><span class=line><span class=cl><span class=s2>        - 출력: 최적 CPU 코어 번호, 예상 실행 시간
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>model</span> <span class=o>=</span> <span class=n>tf</span><span class=o>.</span><span class=n>keras</span><span class=o>.</span><span class=n>Sequential</span><span class=p>([</span>
</span></span><span class=line><span class=cl>            <span class=n>tf</span><span class=o>.</span><span class=n>keras</span><span class=o>.</span><span class=n>layers</span><span class=o>.</span><span class=n>Dense</span><span class=p>(</span><span class=mi>64</span><span class=p>,</span> <span class=n>activation</span><span class=o>=</span><span class=s1>&#39;relu&#39;</span><span class=p>,</span> <span class=n>input_shape</span><span class=o>=</span><span class=p>(</span><span class=mi>10</span><span class=p>,)),</span>
</span></span><span class=line><span class=cl>            <span class=n>tf</span><span class=o>.</span><span class=n>keras</span><span class=o>.</span><span class=n>layers</span><span class=o>.</span><span class=n>Dropout</span><span class=p>(</span><span class=mf>0.2</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>tf</span><span class=o>.</span><span class=n>keras</span><span class=o>.</span><span class=n>layers</span><span class=o>.</span><span class=n>Dense</span><span class=p>(</span><span class=mi>32</span><span class=p>,</span> <span class=n>activation</span><span class=o>=</span><span class=s1>&#39;relu&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>tf</span><span class=o>.</span><span class=n>keras</span><span class=o>.</span><span class=n>layers</span><span class=o>.</span><span class=n>Dropout</span><span class=p>(</span><span class=mf>0.2</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>tf</span><span class=o>.</span><span class=n>keras</span><span class=o>.</span><span class=n>layers</span><span class=o>.</span><span class=n>Dense</span><span class=p>(</span><span class=mi>16</span><span class=p>,</span> <span class=n>activation</span><span class=o>=</span><span class=s1>&#39;relu&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 다중 출력: [최적_코어, 예상_실행시간]</span>
</span></span><span class=line><span class=cl>            <span class=n>tf</span><span class=o>.</span><span class=n>keras</span><span class=o>.</span><span class=n>layers</span><span class=o>.</span><span class=n>Dense</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>num_cores</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>activation</span><span class=o>=</span><span class=s1>&#39;softmax&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>])</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>model</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>optimizer</span><span class=o>=</span><span class=s1>&#39;adam&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>loss</span><span class=o>=</span><span class=s1>&#39;categorical_crossentropy&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>metrics</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;accuracy&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>model</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>collect_process_metrics</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pid</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        PCB 정보 기반 프로세스 메트릭 수집
</span></span></span><span class=line><span class=cl><span class=s2>        - /proc 파일시스템을 통해 PCB 정보 접근
</span></span></span><span class=line><span class=cl><span class=s2>        - 실행 패턴 특성 벡터 생성
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>process</span> <span class=o>=</span> <span class=n>psutil</span><span class=o>.</span><span class=n>Process</span><span class=p>(</span><span class=n>pid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># PCB 기반 기본 정보</span>
</span></span><span class=line><span class=cl>            <span class=n>cpu_percent</span> <span class=o>=</span> <span class=n>process</span><span class=o>.</span><span class=n>cpu_percent</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>memory_info</span> <span class=o>=</span> <span class=n>process</span><span class=o>.</span><span class=n>memory_info</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>io_counters</span> <span class=o>=</span> <span class=n>process</span><span class=o>.</span><span class=n>io_counters</span><span class=p>()</span> <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>process</span><span class=p>,</span> <span class=s1>&#39;io_counters&#39;</span><span class=p>)</span> <span class=k>else</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 컨텍스트 스위치 정보 (PCB 기반)</span>
</span></span><span class=line><span class=cl>            <span class=n>num_ctx_switches</span> <span class=o>=</span> <span class=n>process</span><span class=o>.</span><span class=n>num_ctx_switches</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 프로세스 우선순위 정보 (PCB priority 필드)</span>
</span></span><span class=line><span class=cl>            <span class=n>nice_value</span> <span class=o>=</span> <span class=n>process</span><span class=o>.</span><span class=n>nice</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 스레드 수 (PCB 관련 정보)</span>
</span></span><span class=line><span class=cl>            <span class=n>num_threads</span> <span class=o>=</span> <span class=n>process</span><span class=o>.</span><span class=n>num_threads</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 특성 벡터 구성 (10차원)</span>
</span></span><span class=line><span class=cl>            <span class=n>features</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span>
</span></span><span class=line><span class=cl>                <span class=n>cpu_percent</span><span class=p>,</span>                           <span class=c1># CPU 사용률</span>
</span></span><span class=line><span class=cl>                <span class=n>memory_info</span><span class=o>.</span><span class=n>rss</span> <span class=o>/</span> <span class=p>(</span><span class=mi>1024</span> <span class=o>*</span> <span class=mi>1024</span><span class=p>),</span>     <span class=c1># 메모리 사용량 (MB)</span>
</span></span><span class=line><span class=cl>                <span class=n>memory_info</span><span class=o>.</span><span class=n>vms</span> <span class=o>/</span> <span class=p>(</span><span class=mi>1024</span> <span class=o>*</span> <span class=mi>1024</span><span class=p>),</span>     <span class=c1># 가상 메모리 (MB)</span>
</span></span><span class=line><span class=cl>                <span class=n>io_counters</span><span class=o>.</span><span class=n>read_count</span> <span class=k>if</span> <span class=n>io_counters</span> <span class=k>else</span> <span class=mi>0</span><span class=p>,</span>  <span class=c1># 읽기 작업 수</span>
</span></span><span class=line><span class=cl>                <span class=n>io_counters</span><span class=o>.</span><span class=n>write_count</span> <span class=k>if</span> <span class=n>io_counters</span> <span class=k>else</span> <span class=mi>0</span><span class=p>,</span> <span class=c1># 쓰기 작업 수</span>
</span></span><span class=line><span class=cl>                <span class=n>num_ctx_switches</span><span class=o>.</span><span class=n>voluntary</span><span class=p>,</span>            <span class=c1># 자발적 컨텍스트 스위치</span>
</span></span><span class=line><span class=cl>                <span class=n>num_ctx_switches</span><span class=o>.</span><span class=n>involuntary</span><span class=p>,</span>          <span class=c1># 비자발적 컨텍스트 스위치</span>
</span></span><span class=line><span class=cl>                <span class=n>nice_value</span> <span class=o>+</span> <span class=mi>20</span><span class=p>,</span>                       <span class=c1># Nice 값 (0-40 범위로 정규화)</span>
</span></span><span class=line><span class=cl>                <span class=n>num_threads</span><span class=p>,</span>                           <span class=c1># 스레드 수</span>
</span></span><span class=line><span class=cl>                <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>%</span> <span class=mi>86400</span> <span class=o>/</span> <span class=mi>86400</span>           <span class=c1># 시간 정보 (일중 시간, 0-1)</span>
</span></span><span class=line><span class=cl>            <span class=p>])</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>features</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=p>(</span><span class=n>psutil</span><span class=o>.</span><span class=n>NoSuchProcess</span><span class=p>,</span> <span class=n>psutil</span><span class=o>.</span><span class=n>AccessDenied</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=c1># 프로세스 접근 불가 시 기본값 반환</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>zeros</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>predict_optimal_placement</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pid</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=nb>float</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        AI 모델을 사용한 최적 CPU 코어 배치 예측
</span></span></span><span class=line><span class=cl><span class=s2>        - PCB 정보 기반 특성 추출
</span></span></span><span class=line><span class=cl><span class=s2>        - 신경망 모델로 최적 배치 결정
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>features</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>collect_process_metrics</span><span class=p>(</span><span class=n>pid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 특성 정규화</span>
</span></span><span class=line><span class=cl>        <span class=n>features_scaled</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>scaler</span><span class=o>.</span><span class=n>fit_transform</span><span class=p>(</span><span class=n>features</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># AI 모델 예측</span>
</span></span><span class=line><span class=cl>        <span class=n>prediction</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>model</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=n>features_scaled</span><span class=p>,</span> <span class=n>verbose</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 최적 코어 번호 추출</span>
</span></span><span class=line><span class=cl>        <span class=n>optimal_core</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>argmax</span><span class=p>(</span><span class=n>prediction</span><span class=p>[</span><span class=mi>0</span><span class=p>][:</span><span class=bp>self</span><span class=o>.</span><span class=n>num_cores</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 예상 성능 점수 (0-1)</span>
</span></span><span class=line><span class=cl>        <span class=n>performance_score</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>max</span><span class=p>(</span><span class=n>prediction</span><span class=p>[</span><span class=mi>0</span><span class=p>][:</span><span class=bp>self</span><span class=o>.</span><span class=n>num_cores</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>optimal_core</span><span class=p>,</span> <span class=n>performance_score</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>apply_cpu_affinity</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pid</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>core_id</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        예측된 최적 코어에 프로세스 바인딩
</span></span></span><span class=line><span class=cl><span class=s2>        - CPU 친화성 설정으로 PCB 지역성 최적화
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>process</span> <span class=o>=</span> <span class=n>psutil</span><span class=o>.</span><span class=n>Process</span><span class=p>(</span><span class=n>pid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=c1># CPU 친화성 설정 (특정 코어에 바인딩)</span>
</span></span><span class=line><span class=cl>            <span class=n>process</span><span class=o>.</span><span class=n>cpu_affinity</span><span class=p>([</span><span class=n>core_id</span><span class=p>])</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;프로세스 </span><span class=si>{</span><span class=n>pid</span><span class=si>}</span><span class=s2>를 CPU 코어 </span><span class=si>{</span><span class=n>core_id</span><span class=si>}</span><span class=s2>에 바인딩했습니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=p>(</span><span class=n>psutil</span><span class=o>.</span><span class=n>NoSuchProcess</span><span class=p>,</span> <span class=n>psutil</span><span class=o>.</span><span class=n>AccessDenied</span><span class=p>,</span> <span class=ne>OSError</span><span class=p>)</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;CPU 친화성 설정 실패 (PID: </span><span class=si>{</span><span class=n>pid</span><span class=si>}</span><span class=s2>): </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>optimize_system_performance</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>duration_minutes</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>10</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        시스템 전체 성능 최적화 실행
</span></span></span><span class=line><span class=cl><span class=s2>        - 모든 프로세스에 대해 AI 기반 최적 배치 수행
</span></span></span><span class=line><span class=cl><span class=s2>        - 실시간 성능 모니터링 및 조정
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;AI 기반 PCB 스케줄링 최적화 시작 (</span><span class=si>{</span><span class=n>duration_minutes</span><span class=si>}</span><span class=s2>분간)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=&#34;</span> <span class=o>*</span> <span class=mi>60</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>end_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>+</span> <span class=p>(</span><span class=n>duration_minutes</span> <span class=o>*</span> <span class=mi>60</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>optimization_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>&lt;</span> <span class=n>end_time</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 현재 실행 중인 모든 프로세스 조회</span>
</span></span><span class=line><span class=cl>            <span class=n>current_processes</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>psutil</span><span class=o>.</span><span class=n>process_iter</span><span class=p>([</span><span class=s1>&#39;pid&#39;</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;status&#39;</span><span class=p>]))</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 실행 중인 프로세스만 필터링</span>
</span></span><span class=line><span class=cl>            <span class=n>running_processes</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=n>p</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>current_processes</span> 
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>p</span><span class=o>.</span><span class=n>info</span><span class=p>[</span><span class=s1>&#39;status&#39;</span><span class=p>]</span> <span class=ow>in</span> <span class=p>[</span><span class=n>psutil</span><span class=o>.</span><span class=n>STATUS_RUNNING</span><span class=p>,</span> <span class=n>psutil</span><span class=o>.</span><span class=n>STATUS_SLEEPING</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>optimized_processes</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>proc_info</span> <span class=ow>in</span> <span class=n>running_processes</span><span class=p>[:</span><span class=mi>20</span><span class=p>]:</span>  <span class=c1># 상위 20개 프로세스만 최적화</span>
</span></span><span class=line><span class=cl>                <span class=n>pid</span> <span class=o>=</span> <span class=n>proc_info</span><span class=o>.</span><span class=n>info</span><span class=p>[</span><span class=s1>&#39;pid&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1># 시스템 프로세스 제외 (PID &lt; 100)</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>pid</span> <span class=o>&lt;</span> <span class=mi>100</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>continue</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=c1># AI 기반 최적 배치 예측</span>
</span></span><span class=line><span class=cl>                    <span class=n>optimal_core</span><span class=p>,</span> <span class=n>performance_score</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>predict_optimal_placement</span><span class=p>(</span><span class=n>pid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=c1># 성능 향상이 기대되는 경우에만 적용</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>performance_score</span> <span class=o>&gt;</span> <span class=mf>0.7</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=n>success</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>apply_cpu_affinity</span><span class=p>(</span><span class=n>pid</span><span class=p>,</span> <span class=n>optimal_core</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=k>if</span> <span class=n>success</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                            <span class=n>optimized_processes</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>                            
</span></span><span class=line><span class=cl>                            <span class=c1># 최적화 로그</span>
</span></span><span class=line><span class=cl>                            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;✅ PID </span><span class=si>{</span><span class=n>pid</span><span class=si>}</span><span class=s2> → 코어 </span><span class=si>{</span><span class=n>optimal_core</span><span class=si>}</span><span class=s2> &#34;</span>
</span></span><span class=line><span class=cl>                                  <span class=sa>f</span><span class=s2>&#34;(성능 점수: </span><span class=si>{</span><span class=n>performance_score</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>continue</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>optimization_count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>[최적화 라운드 #</span><span class=si>{</span><span class=n>optimization_count</span><span class=si>}</span><span class=s2>] &#34;</span>
</span></span><span class=line><span class=cl>                  <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>optimized_processes</span><span class=si>}</span><span class=s2>개 프로세스 최적화 완료&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 시스템 성능 메트릭 출력</span>
</span></span><span class=line><span class=cl>            <span class=n>cpu_usage</span> <span class=o>=</span> <span class=n>psutil</span><span class=o>.</span><span class=n>cpu_percent</span><span class=p>(</span><span class=n>interval</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>percpu</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>avg_cpu</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>cpu_usage</span><span class=p>)</span> <span class=o>/</span> <span class=nb>len</span><span class=p>(</span><span class=n>cpu_usage</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;평균 CPU 사용률: </span><span class=si>{</span><span class=n>avg_cpu</span><span class=si>:</span><span class=s2>f</span><span class=si>}</span><span class=s2>%&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;코어별 사용률: </span><span class=si>{</span><span class=p>[</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>usage</span><span class=si>:</span><span class=s1>f</span><span class=si>}</span><span class=s1>%&#39;</span> <span class=k>for</span> <span class=n>usage</span> <span class=ow>in</span> <span class=n>cpu_usage</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>30</span><span class=p>)</span>  <span class=c1># 30초 간격으로 최적화 수행</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>최적화 완료: 총 </span><span class=si>{</span><span class=n>optimization_count</span><span class=si>}</span><span class=s2>번의 최적화 라운드 수행&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># AI 스케줄러 초기화</span>
</span></span><span class=line><span class=cl>    <span class=n>ai_scheduler</span> <span class=o>=</span> <span class=n>AIScheduler</span><span class=p>(</span><span class=n>num_cores</span><span class=o>=</span><span class=n>psutil</span><span class=o>.</span><span class=n>cpu_count</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;🤖 AI 기반 PCB 스케줄링 최적화 시스템&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;시스템 정보: </span><span class=si>{</span><span class=n>psutil</span><span class=o>.</span><span class=n>cpu_count</span><span class=p>()</span><span class=si>}</span><span class=s2>코어, </span><span class=si>{</span><span class=n>psutil</span><span class=o>.</span><span class=n>virtual_memory</span><span class=p>()</span><span class=o>.</span><span class=n>total</span> <span class=o>//</span> <span class=p>(</span><span class=mi>1024</span><span class=o>**</span><span class=mi>3</span><span class=p>)</span><span class=si>}</span><span class=s2>GB RAM&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 10분간 시스템 최적화 실행</span>
</span></span><span class=line><span class=cl>        <span class=n>ai_scheduler</span><span class=o>.</span><span class=n>optimize_system_performance</span><span class=p>(</span><span class=n>duration_minutes</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>KeyboardInterrupt</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>최적화를 중단합니다.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;AI 기반 PCB 최적화가 완료되었습니다.&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=73-최신-기술-트렌드와-미래-방향-1>7.3 최신 기술 트렌드와 미래 방향<a hidden class=anchor aria-hidden=true href=#73-최신-기술-트렌드와-미래-방향-1>#</a></h3><ul><li>동적 메모리 관리, 자동·실시간 상태 저장</li><li>클라우드·실시간 운영 환경에서 PCB 최적화 기술 도입</li><li>보안성과 확장성을 동시 확보하는 PCB 설계 연구</li></ul><h3 id=73-최신-기술-트렌드와-미래-방향-2>7.3 최신 기술 트렌드와 미래 방향<a hidden class=anchor aria-hidden=true href=#73-최신-기술-트렌드와-미래-방향-2>#</a></h3><ul><li><strong>스케줄러 진화 (CFS→EEVDF 등)</strong>, 마이크로컨텍스트 최소화, 하드웨어 지원 (저비용 스위칭) 확대. ([Kernel 문서][6])</li></ul><h3 id=74-기타-고급-사항>7.4 기타 고급 사항<a hidden class=anchor aria-hidden=true href=#74-기타-고급-사항>#</a></h3><ul><li><strong>Windows 내부 구조</strong>: EPROCESS/ETHREAD/KTHREAD 분리와 ETW 기반 관측. ([Microsoft Learn][12])</li></ul><h3 id=74-기타-고급-사항-1>7.4 기타 고급 사항<a hidden class=anchor aria-hidden=true href=#74-기타-고급-사항-1>#</a></h3><ul><li>분산 운영체제 환경에서 PCB 복제·동기화 기술 발전</li><li>AI 기반 프로세스 스케줄링과 PCB 연동</li></ul><h3 id=74-기타-고급-사항-2>7.4 기타 고급 사항<a hidden class=anchor aria-hidden=true href=#74-기타-고급-사항-2>#</a></h3><p><strong>전문가 레벨 고려사항</strong>:</p><ol><li><p><strong>실시간 시스템에서의 PCB 설계</strong></p><ul><li><strong>결정적 스케줄링</strong>: PCB 조작 시간의 상한 보장</li><li><strong>우선순위 역전 방지</strong>: Priority Inheritance Protocol 적용</li><li><strong>메모리 잠금</strong>: PCB 를 물리 메모리에 고정하여 페이징 방지</li></ul></li><li><p><strong>보안 강화된 PCB 구현</strong></p><ul><li><strong>하드웨어 기반 격리</strong>: Intel CET, ARM Pointer Authentication 활용</li><li><strong>Control Flow Integrity</strong>: PCB 조작 함수의 제어 흐름 보호</li><li><strong>Kernel ASLR</strong>: PCB 위치 랜덤화로 메모리 공격 방어</li></ul></li><li><p><strong>분산 시스템에서의 PCB 관리</strong></p><ul><li><strong>클러스터 레벨 스케줄링</strong>: 노드 간 프로세스 마이그레이션</li><li><strong>일관성 보장</strong>: 분산 환경에서 PCB 상태 동기화</li><li><strong>장애 복구</strong>: 노드 장애 시 PCB 상태 복원</li></ul></li></ol><p><strong>특이사항 및 주의점</strong>:</p><ol><li><p><strong>아키텍처별 차이점</strong></p><ul><li><strong>x86_64</strong>: FSGSBASE 명령어를 활용한 빠른 컨텍스트 스위칭</li><li><strong>ARM64</strong>: ASID (Address Space ID) 를 통한 TLB 최적화</li><li><strong>RISC-V</strong>: 모듈러 ISA 특성을 활용한 커스텀 PCB 확장</li></ul></li><li><p><strong>하이퍼바이저 환경에서의 고려사항</strong></p><ul><li><strong>중첩 가상화</strong>: 게스트 OS 의 PCB 와 하이퍼바이저 PCB 간 매핑</li><li><strong>IOMMU 통합</strong>: PCB 기반 디바이스 접근 제어</li><li><strong>SR-IOV 지원</strong>: 가상 함수별 PCB 격리</li></ul></li><li><p><strong>임베디드 시스템 최적화</strong></p><ul><li><strong>메모리 제약</strong>: PCB 크기 최소화를 위한 비트 필드 활용</li><li><strong>전력 관리</strong>: PCB 기반 동적 전압/주파수 스케일링</li><li><strong>실시간 보장</strong>: 인터럽트 지연시간 최소화</li></ul></li></ol><p><strong>고급 디버깅 및 분석 도구</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-27-1><a class=lnlinks href=#hl-27-1> 1</a>
</span><span class=lnt id=hl-27-2><a class=lnlinks href=#hl-27-2> 2</a>
</span><span class=lnt id=hl-27-3><a class=lnlinks href=#hl-27-3> 3</a>
</span><span class=lnt id=hl-27-4><a class=lnlinks href=#hl-27-4> 4</a>
</span><span class=lnt id=hl-27-5><a class=lnlinks href=#hl-27-5> 5</a>
</span><span class=lnt id=hl-27-6><a class=lnlinks href=#hl-27-6> 6</a>
</span><span class=lnt id=hl-27-7><a class=lnlinks href=#hl-27-7> 7</a>
</span><span class=lnt id=hl-27-8><a class=lnlinks href=#hl-27-8> 8</a>
</span><span class=lnt id=hl-27-9><a class=lnlinks href=#hl-27-9> 9</a>
</span><span class=lnt id=hl-27-10><a class=lnlinks href=#hl-27-10>10</a>
</span><span class=lnt id=hl-27-11><a class=lnlinks href=#hl-27-11>11</a>
</span><span class=lnt id=hl-27-12><a class=lnlinks href=#hl-27-12>12</a>
</span><span class=lnt id=hl-27-13><a class=lnlinks href=#hl-27-13>13</a>
</span><span class=lnt id=hl-27-14><a class=lnlinks href=#hl-27-14>14</a>
</span><span class=lnt id=hl-27-15><a class=lnlinks href=#hl-27-15>15</a>
</span><span class=lnt id=hl-27-16><a class=lnlinks href=#hl-27-16>16</a>
</span><span class=lnt id=hl-27-17><a class=lnlinks href=#hl-27-17>17</a>
</span><span class=lnt id=hl-27-18><a class=lnlinks href=#hl-27-18>18</a>
</span><span class=lnt id=hl-27-19><a class=lnlinks href=#hl-27-19>19</a>
</span><span class=lnt id=hl-27-20><a class=lnlinks href=#hl-27-20>20</a>
</span><span class=lnt id=hl-27-21><a class=lnlinks href=#hl-27-21>21</a>
</span><span class=lnt id=hl-27-22><a class=lnlinks href=#hl-27-22>22</a>
</span><span class=lnt id=hl-27-23><a class=lnlinks href=#hl-27-23>23</a>
</span><span class=lnt id=hl-27-24><a class=lnlinks href=#hl-27-24>24</a>
</span><span class=lnt id=hl-27-25><a class=lnlinks href=#hl-27-25>25</a>
</span><span class=lnt id=hl-27-26><a class=lnlinks href=#hl-27-26>26</a>
</span><span class=lnt id=hl-27-27><a class=lnlinks href=#hl-27-27>27</a>
</span><span class=lnt id=hl-27-28><a class=lnlinks href=#hl-27-28>28</a>
</span><span class=lnt id=hl-27-29><a class=lnlinks href=#hl-27-29>29</a>
</span><span class=lnt id=hl-27-30><a class=lnlinks href=#hl-27-30>30</a>
</span><span class=lnt id=hl-27-31><a class=lnlinks href=#hl-27-31>31</a>
</span><span class=lnt id=hl-27-32><a class=lnlinks href=#hl-27-32>32</a>
</span><span class=lnt id=hl-27-33><a class=lnlinks href=#hl-27-33>33</a>
</span><span class=lnt id=hl-27-34><a class=lnlinks href=#hl-27-34>34</a>
</span><span class=lnt id=hl-27-35><a class=lnlinks href=#hl-27-35>35</a>
</span><span class=lnt id=hl-27-36><a class=lnlinks href=#hl-27-36>36</a>
</span><span class=lnt id=hl-27-37><a class=lnlinks href=#hl-27-37>37</a>
</span><span class=lnt id=hl-27-38><a class=lnlinks href=#hl-27-38>38</a>
</span><span class=lnt id=hl-27-39><a class=lnlinks href=#hl-27-39>39</a>
</span><span class=lnt id=hl-27-40><a class=lnlinks href=#hl-27-40>40</a>
</span><span class=lnt id=hl-27-41><a class=lnlinks href=#hl-27-41>41</a>
</span><span class=lnt id=hl-27-42><a class=lnlinks href=#hl-27-42>42</a>
</span><span class=lnt id=hl-27-43><a class=lnlinks href=#hl-27-43>43</a>
</span><span class=lnt id=hl-27-44><a class=lnlinks href=#hl-27-44>44</a>
</span><span class=lnt id=hl-27-45><a class=lnlinks href=#hl-27-45>45</a>
</span><span class=lnt id=hl-27-46><a class=lnlinks href=#hl-27-46>46</a>
</span><span class=lnt id=hl-27-47><a class=lnlinks href=#hl-27-47>47</a>
</span><span class=lnt id=hl-27-48><a class=lnlinks href=#hl-27-48>48</a>
</span><span class=lnt id=hl-27-49><a class=lnlinks href=#hl-27-49>49</a>
</span><span class=lnt id=hl-27-50><a class=lnlinks href=#hl-27-50>50</a>
</span><span class=lnt id=hl-27-51><a class=lnlinks href=#hl-27-51>51</a>
</span><span class=lnt id=hl-27-52><a class=lnlinks href=#hl-27-52>52</a>
</span><span class=lnt id=hl-27-53><a class=lnlinks href=#hl-27-53>53</a>
</span><span class=lnt id=hl-27-54><a class=lnlinks href=#hl-27-54>54</a>
</span><span class=lnt id=hl-27-55><a class=lnlinks href=#hl-27-55>55</a>
</span><span class=lnt id=hl-27-56><a class=lnlinks href=#hl-27-56>56</a>
</span><span class=lnt id=hl-27-57><a class=lnlinks href=#hl-27-57>57</a>
</span><span class=lnt id=hl-27-58><a class=lnlinks href=#hl-27-58>58</a>
</span><span class=lnt id=hl-27-59><a class=lnlinks href=#hl-27-59>59</a>
</span><span class=lnt id=hl-27-60><a class=lnlinks href=#hl-27-60>60</a>
</span><span class=lnt id=hl-27-61><a class=lnlinks href=#hl-27-61>61</a>
</span><span class=lnt id=hl-27-62><a class=lnlinks href=#hl-27-62>62</a>
</span><span class=lnt id=hl-27-63><a class=lnlinks href=#hl-27-63>63</a>
</span><span class=lnt id=hl-27-64><a class=lnlinks href=#hl-27-64>64</a>
</span><span class=lnt id=hl-27-65><a class=lnlinks href=#hl-27-65>65</a>
</span><span class=lnt id=hl-27-66><a class=lnlinks href=#hl-27-66>66</a>
</span><span class=lnt id=hl-27-67><a class=lnlinks href=#hl-27-67>67</a>
</span><span class=lnt id=hl-27-68><a class=lnlinks href=#hl-27-68>68</a>
</span><span class=lnt id=hl-27-69><a class=lnlinks href=#hl-27-69>69</a>
</span><span class=lnt id=hl-27-70><a class=lnlinks href=#hl-27-70>70</a>
</span><span class=lnt id=hl-27-71><a class=lnlinks href=#hl-27-71>71</a>
</span><span class=lnt id=hl-27-72><a class=lnlinks href=#hl-27-72>72</a>
</span><span class=lnt id=hl-27-73><a class=lnlinks href=#hl-27-73>73</a>
</span><span class=lnt id=hl-27-74><a class=lnlinks href=#hl-27-74>74</a>
</span><span class=lnt id=hl-27-75><a class=lnlinks href=#hl-27-75>75</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># PCB 고급 분석 스크립트</span>
</span></span><span class=line><span class=cl><span class=c1># 시스템 레벨 PCB 상태 종합 분석</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;=== PCB 고급 분석 도구 ===&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;분석 시작 시간: </span><span class=k>$(</span>date<span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 1. PCB 메모리 사용량 분석</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;📊 PCB 메모리 사용량 분석&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;현재 프로세스 수: </span><span class=k>$(</span>ps aux <span class=p>|</span> wc -l<span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;예상 PCB 메모리 사용량: </span><span class=k>$(($(</span>ps aux <span class=p>|</span> wc -l<span class=k>)</span> <span class=o>*</span> <span class=m>4</span><span class=k>))</span><span class=s2>KB&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 컨텍스트 스위칭 분석  </span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;🔄 컨텍스트 스위칭 분석&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>context_switches</span><span class=o>=</span><span class=k>$(</span>grep ctxt /proc/stat <span class=p>|</span> awk <span class=s1>&#39;{print $2}&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;총 컨텍스트 스위치: </span><span class=nv>$context_switches</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sleep <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=nv>new_context_switches</span><span class=o>=</span><span class=k>$(</span>grep ctxt /proc/stat <span class=p>|</span> awk <span class=s1>&#39;{print $2}&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nv>switches_per_sec</span><span class=o>=</span><span class=k>$((</span>new_context_switches <span class=o>-</span> context_switches<span class=k>))</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;초당 컨텍스트 스위치: </span><span class=nv>$switches_per_sec</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. 프로세스 상태 분포 분석</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;📈 프로세스 상태 분포 (PCB state 필드)&#34;</span>
</span></span><span class=line><span class=cl>ps axo state <span class=p>|</span> tail -n +2 <span class=p>|</span> sort <span class=p>|</span> uniq -c <span class=p>|</span> <span class=k>while</span> <span class=nb>read</span> count state<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nv>$state</span> in
</span></span><span class=line><span class=cl>        R<span class=o>)</span> <span class=nv>desc</span><span class=o>=</span><span class=s2>&#34;실행 중 (Running)&#34;</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>        S<span class=o>)</span> <span class=nv>desc</span><span class=o>=</span><span class=s2>&#34;슬립 (Sleeping)&#34;</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>        D<span class=o>)</span> <span class=nv>desc</span><span class=o>=</span><span class=s2>&#34;대기 (Waiting)&#34;</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>        Z<span class=o>)</span> <span class=nv>desc</span><span class=o>=</span><span class=s2>&#34;좀비 (Zombie)&#34;</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>        T<span class=o>)</span> <span class=nv>desc</span><span class=o>=</span><span class=s2>&#34;정지 (Stopped)&#34;</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>        *<span class=o>)</span> <span class=nv>desc</span><span class=o>=</span><span class=s2>&#34;기타&#34;</span> <span class=p>;;</span>
</span></span><span class=line><span class=cl>    <span class=k>esac</span>
</span></span><span class=line><span class=cl>    <span class=nb>printf</span> <span class=s2>&#34;  %s: %d개 (%s)\n&#34;</span> <span class=s2>&#34;</span><span class=nv>$state</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=nv>$count</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=nv>$desc</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. NUMA 환경에서 PCB 분포 분석 (NUMA 시스템인 경우)</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nb>command</span> -v numastat &gt;/dev/null 2&gt;<span class=p>&amp;</span>1<span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;🏗️ NUMA PCB 분포 분석&#34;</span>
</span></span><span class=line><span class=cl>    numastat -p <span class=k>$(</span>pgrep -d, .<span class=k>)</span> 2&gt;/dev/null <span class=p>|</span> head -10
</span></span><span class=line><span class=cl>    <span class=nb>echo</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 5. 실시간 프로세스 분석 (PCB 우선순위 기반)</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;⚡ 실시간 프로세스 분석&#34;</span>
</span></span><span class=line><span class=cl>ps axo pid,rtprio,policy,comm <span class=p>|</span> grep -v <span class=s1>&#39; -&#39;</span> <span class=p>|</span> head -10
</span></span><span class=line><span class=cl><span class=nb>echo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 6. 메모리 압박 상황에서 PCB 영향 분석</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;💾 메모리 압박 및 PCB 영향&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>free_mem</span><span class=o>=</span><span class=k>$(</span>free <span class=p>|</span> grep Mem <span class=p>|</span> awk <span class=s1>&#39;{print $7}&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nv>total_mem</span><span class=o>=</span><span class=k>$(</span>free <span class=p>|</span> grep Mem <span class=p>|</span> awk <span class=s1>&#39;{print $2}&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nv>mem_pressure</span><span class=o>=</span><span class=k>$((</span><span class=m>100</span> <span class=o>-</span> <span class=o>(</span>free_mem <span class=o>*</span> <span class=m>100</span> <span class=o>/</span> total_mem<span class=k>))</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;메모리 압박도: </span><span class=si>${</span><span class=nv>mem_pressure</span><span class=si>}</span><span class=s2>%&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=nv>$mem_pressure</span> -gt <span class=m>80</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;⚠️ 높은 메모리 압박 - PCB 스와핑 가능성 높음&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;권장: 불필요한 프로세스 정리 또는 메모리 증설&#34;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 7. CPU 코어별 프로세스 분산 분석</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;🖥️ CPU 코어별 프로세스 분산&#34;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> cpu in <span class=k>$(</span>seq <span class=m>0</span> <span class=k>$(($(</span>nproc<span class=k>)</span> <span class=o>-</span> <span class=m>1</span><span class=k>)))</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nv>proc_count</span><span class=o>=</span><span class=k>$(</span>ps -eLo psr <span class=p>|</span> grep -c <span class=s2>&#34;^ *</span><span class=nv>$cpu</span>$<span class=s2>&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>printf</span> <span class=s2>&#34;CPU %d: %d개 프로세스\n&#34;</span> <span class=s2>&#34;</span><span class=nv>$cpu</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=nv>$proc_count</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;분석 완료 시간: </span><span class=k>$(</span>date<span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;===========================&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>권장 모니터링 대시보드 구성</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-28-1><a class=lnlinks href=#hl-28-1> 1</a>
</span><span class=lnt id=hl-28-2><a class=lnlinks href=#hl-28-2> 2</a>
</span><span class=lnt id=hl-28-3><a class=lnlinks href=#hl-28-3> 3</a>
</span><span class=lnt id=hl-28-4><a class=lnlinks href=#hl-28-4> 4</a>
</span><span class=lnt id=hl-28-5><a class=lnlinks href=#hl-28-5> 5</a>
</span><span class=lnt id=hl-28-6><a class=lnlinks href=#hl-28-6> 6</a>
</span><span class=lnt id=hl-28-7><a class=lnlinks href=#hl-28-7> 7</a>
</span><span class=lnt id=hl-28-8><a class=lnlinks href=#hl-28-8> 8</a>
</span><span class=lnt id=hl-28-9><a class=lnlinks href=#hl-28-9> 9</a>
</span><span class=lnt id=hl-28-10><a class=lnlinks href=#hl-28-10>10</a>
</span><span class=lnt id=hl-28-11><a class=lnlinks href=#hl-28-11>11</a>
</span><span class=lnt id=hl-28-12><a class=lnlinks href=#hl-28-12>12</a>
</span><span class=lnt id=hl-28-13><a class=lnlinks href=#hl-28-13>13</a>
</span><span class=lnt id=hl-28-14><a class=lnlinks href=#hl-28-14>14</a>
</span><span class=lnt id=hl-28-15><a class=lnlinks href=#hl-28-15>15</a>
</span><span class=lnt id=hl-28-16><a class=lnlinks href=#hl-28-16>16</a>
</span><span class=lnt id=hl-28-17><a class=lnlinks href=#hl-28-17>17</a>
</span><span class=lnt id=hl-28-18><a class=lnlinks href=#hl-28-18>18</a>
</span><span class=lnt id=hl-28-19><a class=lnlinks href=#hl-28-19>19</a>
</span><span class=lnt id=hl-28-20><a class=lnlinks href=#hl-28-20>20</a>
</span><span class=lnt id=hl-28-21><a class=lnlinks href=#hl-28-21>21</a>
</span><span class=lnt id=hl-28-22><a class=lnlinks href=#hl-28-22>22</a>
</span><span class=lnt id=hl-28-23><a class=lnlinks href=#hl-28-23>23</a>
</span><span class=lnt id=hl-28-24><a class=lnlinks href=#hl-28-24>24</a>
</span><span class=lnt id=hl-28-25><a class=lnlinks href=#hl-28-25>25</a>
</span><span class=lnt id=hl-28-26><a class=lnlinks href=#hl-28-26>26</a>
</span><span class=lnt id=hl-28-27><a class=lnlinks href=#hl-28-27>27</a>
</span><span class=lnt id=hl-28-28><a class=lnlinks href=#hl-28-28>28</a>
</span><span class=lnt id=hl-28-29><a class=lnlinks href=#hl-28-29>29</a>
</span><span class=lnt id=hl-28-30><a class=lnlinks href=#hl-28-30>30</a>
</span><span class=lnt id=hl-28-31><a class=lnlinks href=#hl-28-31>31</a>
</span><span class=lnt id=hl-28-32><a class=lnlinks href=#hl-28-32>32</a>
</span><span class=lnt id=hl-28-33><a class=lnlinks href=#hl-28-33>33</a>
</span><span class=lnt id=hl-28-34><a class=lnlinks href=#hl-28-34>34</a>
</span><span class=lnt id=hl-28-35><a class=lnlinks href=#hl-28-35>35</a>
</span><span class=lnt id=hl-28-36><a class=lnlinks href=#hl-28-36>36</a>
</span><span class=lnt id=hl-28-37><a class=lnlinks href=#hl-28-37>37</a>
</span><span class=lnt id=hl-28-38><a class=lnlinks href=#hl-28-38>38</a>
</span><span class=lnt id=hl-28-39><a class=lnlinks href=#hl-28-39>39</a>
</span><span class=lnt id=hl-28-40><a class=lnlinks href=#hl-28-40>40</a>
</span><span class=lnt id=hl-28-41><a class=lnlinks href=#hl-28-41>41</a>
</span><span class=lnt id=hl-28-42><a class=lnlinks href=#hl-28-42>42</a>
</span><span class=lnt id=hl-28-43><a class=lnlinks href=#hl-28-43>43</a>
</span><span class=lnt id=hl-28-44><a class=lnlinks href=#hl-28-44>44</a>
</span><span class=lnt id=hl-28-45><a class=lnlinks href=#hl-28-45>45</a>
</span><span class=lnt id=hl-28-46><a class=lnlinks href=#hl-28-46>46</a>
</span><span class=lnt id=hl-28-47><a class=lnlinks href=#hl-28-47>47</a>
</span><span class=lnt id=hl-28-48><a class=lnlinks href=#hl-28-48>48</a>
</span><span class=lnt id=hl-28-49><a class=lnlinks href=#hl-28-49>49</a>
</span><span class=lnt id=hl-28-50><a class=lnlinks href=#hl-28-50>50</a>
</span><span class=lnt id=hl-28-51><a class=lnlinks href=#hl-28-51>51</a>
</span><span class=lnt id=hl-28-52><a class=lnlinks href=#hl-28-52>52</a>
</span><span class=lnt id=hl-28-53><a class=lnlinks href=#hl-28-53>53</a>
</span><span class=lnt id=hl-28-54><a class=lnlinks href=#hl-28-54>54</a>
</span><span class=lnt id=hl-28-55><a class=lnlinks href=#hl-28-55>55</a>
</span><span class=lnt id=hl-28-56><a class=lnlinks href=#hl-28-56>56</a>
</span><span class=lnt id=hl-28-57><a class=lnlinks href=#hl-28-57>57</a>
</span><span class=lnt id=hl-28-58><a class=lnlinks href=#hl-28-58>58</a>
</span><span class=lnt id=hl-28-59><a class=lnlinks href=#hl-28-59>59</a>
</span><span class=lnt id=hl-28-60><a class=lnlinks href=#hl-28-60>60</a>
</span><span class=lnt id=hl-28-61><a class=lnlinks href=#hl-28-61>61</a>
</span><span class=lnt id=hl-28-62><a class=lnlinks href=#hl-28-62>62</a>
</span><span class=lnt id=hl-28-63><a class=lnlinks href=#hl-28-63>63</a>
</span><span class=lnt id=hl-28-64><a class=lnlinks href=#hl-28-64>64</a>
</span><span class=lnt id=hl-28-65><a class=lnlinks href=#hl-28-65>65</a>
</span><span class=lnt id=hl-28-66><a class=lnlinks href=#hl-28-66>66</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># Grafana 대시보드 설정 (PCB 모니터링)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ConfigMap</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pcb-dashboard-config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>dashboard.json</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>    {
</span></span></span><span class=line><span class=cl><span class=sd>      &#34;dashboard&#34;: {
</span></span></span><span class=line><span class=cl><span class=sd>        &#34;title&#34;: &#34;Process Control Block (PCB) 모니터링&#34;,
</span></span></span><span class=line><span class=cl><span class=sd>        &#34;panels&#34;: [
</span></span></span><span class=line><span class=cl><span class=sd>          {
</span></span></span><span class=line><span class=cl><span class=sd>            &#34;title&#34;: &#34;프로세스 수 추이&#34;,
</span></span></span><span class=line><span class=cl><span class=sd>            &#34;type&#34;: &#34;graph&#34;,
</span></span></span><span class=line><span class=cl><span class=sd>            &#34;targets&#34;: [
</span></span></span><span class=line><span class=cl><span class=sd>              {
</span></span></span><span class=line><span class=cl><span class=sd>                &#34;expr&#34;: &#34;node_processes_total&#34;,
</span></span></span><span class=line><span class=cl><span class=sd>                &#34;legendFormat&#34;: &#34;총 프로세스 수&#34;
</span></span></span><span class=line><span class=cl><span class=sd>              },
</span></span></span><span class=line><span class=cl><span class=sd>              {
</span></span></span><span class=line><span class=cl><span class=sd>                &#34;expr&#34;: &#34;node_processes_zombie&#34;,
</span></span></span><span class=line><span class=cl><span class=sd>                &#34;legendFormat&#34;: &#34;좀비 프로세스&#34;
</span></span></span><span class=line><span class=cl><span class=sd>              }
</span></span></span><span class=line><span class=cl><span class=sd>            ]
</span></span></span><span class=line><span class=cl><span class=sd>          },
</span></span></span><span class=line><span class=cl><span class=sd>          {
</span></span></span><span class=line><span class=cl><span class=sd>            &#34;title&#34;: &#34;컨텍스트 스위칭 률&#34;,
</span></span></span><span class=line><span class=cl><span class=sd>            &#34;type&#34;: &#34;graph&#34;, 
</span></span></span><span class=line><span class=cl><span class=sd>            &#34;targets&#34;: [
</span></span></span><span class=line><span class=cl><span class=sd>              {
</span></span></span><span class=line><span class=cl><span class=sd>                &#34;expr&#34;: &#34;rate(node_context_switches_total[5m])&#34;,
</span></span></span><span class=line><span class=cl><span class=sd>                &#34;legendFormat&#34;: &#34;초당 컨텍스트 스위치&#34;
</span></span></span><span class=line><span class=cl><span class=sd>              }
</span></span></span><span class=line><span class=cl><span class=sd>            ]
</span></span></span><span class=line><span class=cl><span class=sd>          },
</span></span></span><span class=line><span class=cl><span class=sd>          {
</span></span></span><span class=line><span class=cl><span class=sd>            &#34;title&#34;: &#34;PCB 메모리 사용량 추정&#34;,
</span></span></span><span class=line><span class=cl><span class=sd>            &#34;type&#34;: &#34;singlestat&#34;,
</span></span></span><span class=line><span class=cl><span class=sd>            &#34;targets&#34;: [
</span></span></span><span class=line><span class=cl><span class=sd>              {
</span></span></span><span class=line><span class=cl><span class=sd>                &#34;expr&#34;: &#34;node_processes_total * 4096&#34;,
</span></span></span><span class=line><span class=cl><span class=sd>                &#34;legendFormat&#34;: &#34;예상 PCB 메모리 (Bytes)&#34;
</span></span></span><span class=line><span class=cl><span class=sd>              }
</span></span></span><span class=line><span class=cl><span class=sd>            ]
</span></span></span><span class=line><span class=cl><span class=sd>          },
</span></span></span><span class=line><span class=cl><span class=sd>          {
</span></span></span><span class=line><span class=cl><span class=sd>            &#34;title&#34;: &#34;프로세스 상태 분포&#34;,
</span></span></span><span class=line><span class=cl><span class=sd>            &#34;type&#34;: &#34;piechart&#34;,
</span></span></span><span class=line><span class=cl><span class=sd>            &#34;targets&#34;: [
</span></span></span><span class=line><span class=cl><span class=sd>              {
</span></span></span><span class=line><span class=cl><span class=sd>                &#34;expr&#34;: &#34;node_processes_running&#34;,
</span></span></span><span class=line><span class=cl><span class=sd>                &#34;legendFormat&#34;: &#34;실행 중&#34;
</span></span></span><span class=line><span class=cl><span class=sd>              },
</span></span></span><span class=line><span class=cl><span class=sd>              {
</span></span></span><span class=line><span class=cl><span class=sd>                &#34;expr&#34;: &#34;node_processes_sleeping&#34;, 
</span></span></span><span class=line><span class=cl><span class=sd>                &#34;legendFormat&#34;: &#34;슬립&#34;
</span></span></span><span class=line><span class=cl><span class=sd>              },
</span></span></span><span class=line><span class=cl><span class=sd>              {
</span></span></span><span class=line><span class=cl><span class=sd>                &#34;expr&#34;: &#34;node_processes_waiting&#34;,
</span></span></span><span class=line><span class=cl><span class=sd>                &#34;legendFormat&#34;: &#34;대기&#34;
</span></span></span><span class=line><span class=cl><span class=sd>              }
</span></span></span><span class=line><span class=cl><span class=sd>            ]
</span></span></span><span class=line><span class=cl><span class=sd>          }
</span></span></span><span class=line><span class=cl><span class=sd>        ]
</span></span></span><span class=line><span class=cl><span class=sd>      }
</span></span></span><span class=line><span class=cl><span class=sd>    }</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=13-단계-분산-환경에서의-pcb-관리>13 단계: 분산 환경에서의 PCB 관리<a hidden class=anchor aria-hidden=true href=#13-단계-분산-환경에서의-pcb-관리>#</a></h2><h3 id=131-분산-환경에서의-추가-과제>13.1 분산 환경에서의 추가 과제<a hidden class=anchor aria-hidden=true href=#131-분산-환경에서의-추가-과제>#</a></h3><p>분산 운영 환경 (예: Kubernetes, Mesos, Hadoop YARN) 에서는 PCB 가 물리적으로 여러 노드에 존재하게 됩니다. 이로 인해 다음과 같은 도전 과제가 발생합니다.</p><table><thead><tr><th>과제</th><th>설명</th><th>영향</th></tr></thead><tbody><tr><td><strong>동기화 (Synchronization)</strong></td><td>여러 노드 간 동일 프로세스/태스크의 PCB 정보 일관성 유지</td><td>상태 불일치 → 잘못된 스케줄링</td></tr><tr><td><strong>복제 (Replication)</strong></td><td>장애 발생 시 빠른 복구를 위해 PCB 를 다른 노드에 복제</td><td>네트워크 부하, 저장소 사용 증가</td></tr><tr><td><strong>복구 (Failover)</strong></td><td>장애 노드의 PCB 상태를 다른 노드에서 복원</td><td>중단 없는 서비스 유지</td></tr><tr><td><strong>보안 (Security)</strong></td><td>네트워크 전송 중 PCB 데이터 보호</td><td>상태 정보 탈취 위험</td></tr></tbody></table><hr><h3 id=132-pcb-동기화-모델>13.2 PCB 동기화 모델<a hidden class=anchor aria-hidden=true href=#132-pcb-동기화-모델>#</a></h3><blockquote><p>이 표는 분산 환경에서 PCB 동기화를 위한 대표 아키텍처를 비교한 것입니다.</p></blockquote><table><thead><tr><th>모델</th><th>방식</th><th>장점</th><th>단점</th><th>적용 사례</th></tr></thead><tbody><tr><td><strong>중앙 집중식 (Centralized)</strong></td><td>마스터 서버에 PCB 메타데이터 저장·갱신</td><td>구현 단순, 관리 용이</td><td>마스터 장애 시 전체 영향</td><td>초기 Kubernetes 마스터 - 노드 구조</td></tr><tr><td><strong>분산 복제식 (Replicated)</strong></td><td>각 노드가 PCB 사본을 가지며 변경 내용 동기화</td><td>장애 내성↑, 복구 빠름</td><td>일관성 관리 복잡</td><td>Raft 합의 기반 etcd</td></tr><tr><td><strong>이벤트 기반 (Event-driven)</strong></td><td>상태 변경 발생 시에만 PCB 동기화</td><td>네트워크 부하↓</td><td>지연 발생 가능</td><td>Apache Kafka 기반 워크플로우</td></tr></tbody></table><hr><h3 id=133-pcb-동기화-시-고려-사항>13.3 PCB 동기화 시 고려 사항<a hidden class=anchor aria-hidden=true href=#133-pcb-동기화-시-고려-사항>#</a></h3><ol><li><strong>네트워크 지연 (Latency) 최소화</strong><ul><li>PCB 필드 중 동기화가 필요한 핵심 항목만 전송 (PID, 상태, 프로그램 카운터)</li></ul></li><li><strong>일관성 (Consistency) 보장 수준 결정</strong><ul><li>강한 일관성 (Strong Consistency) vs 최종 일관성 (Eventual Consistency)</li></ul></li><li><strong>보안 채널 사용</strong><ul><li>gRPC, TLS 기반 암호화 전송</li></ul></li><li><strong>압축 및 경량화</strong><ul><li>JSON, Protocol Buffers(Protobuf) 등 사용</li></ul></li></ol><hr><h2 id=정리-및-학습-가이드>정리 및 학습 가이드<a hidden class=anchor aria-hidden=true href=#정리-및-학습-가이드>#</a></h2><h3 id=내용-정리>내용 정리<a hidden class=anchor aria-hidden=true href=#내용-정리>#</a></h3><p>Process Control Block (PCB) 는 현대 운영체제의 핵심 구성 요소로서, 각 프로세스의 완전한 실행 컨텍스트를 관리하는 데이터 구조입니다. 1960 년대 멀티프로그래밍 시스템의 등장과 함께 발전하여, 오늘날 클라우드 컴퓨팅과 컨테이너 기술의 기반이 되고 있습니다.</p><p><strong>핵심 가치</strong>:</p><ul><li><strong>투명성</strong>: 사용자 프로그램이 PCB 존재를 인식하지 않아도 멀티태스킹 구현</li><li><strong>격리성</strong>: 프로세스 간 완전한 메모리 및 자원 격리 보장</li><li><strong>확장성</strong>: 수천 개의 프로세스를 효율적으로 관리 가능</li><li><strong>관측성</strong>: 시스템 성능 모니터링과 디버깅의 핵심 정보 제공</li></ul><p><strong>최신 트렌드 반영</strong>:<br>현재 PCB 기술은 eBPF 기반 관측성, AI 기반 스케줄링 최적화, 그리고 컨테이너 환경에서의 경량화 방향으로 발전하고 있습니다. 특히 마이크로서비스 아키텍처의 확산으로 프로세스 수가 급증하면서, PCB 관리의 효율성이 시스템 성능에 미치는 영향이 더욱 중요해지고 있습니다.</p><h3 id=최종-정리>최종 정리<a hidden class=anchor aria-hidden=true href=#최종-정리>#</a></h3><p>PCB 는 ** 프로세스 실행 상태의 단일 진실원천 (Single Source of Truth)** 이며, 스케줄링·메모리·보안·관측을 커널에서 결속한다. 실무에서는 <code>/proc</code>·POSIX 스케줄링 API·eBPF 를 활용해 <strong>성능과 신뢰성</strong>을 동시에 확보한다.</p><h3 id=학습-로드맵>학습 로드맵<a hidden class=anchor aria-hidden=true href=#학습-로드맵>#</a></h3><ol><li><strong>기초</strong>: 프로세스/스레드/스케줄러·PCB 역할 이해</li><li><strong>핵심</strong>: Linux <code>task_struct</code> 와 <code>/proc</code> 지표, POSIX 스케줄링 API 실습</li><li><strong>응용</strong>: eBPF 로 컨텍스트 스위치·런큐 관찰, 경보 설계</li><li><strong>고급</strong>: Affinity/RT 튜닝, 컨테이너·NUMA 고려 운영</li></ol><h3 id=학습-로드맵-1>학습 로드맵<a hidden class=anchor aria-hidden=true href=#학습-로드맵-1>#</a></h3><p><strong>단계별 학습 경로</strong>:</p><ol><li><p><strong>기초 단계 (1-2 주)</strong></p><ul><li>PCB 개념과 구조 이해</li><li>프로세스 생명주기 학습</li><li>/proc 파일시스템을 통한 PCB 정보 확인</li></ul></li><li><p><strong>중급 단계 (3-4 주)</strong></p><ul><li>컨텍스트 스위칭 메커니즘 상세 학습</li><li>실습을 통한 PCB 정보 수집 도구 구현</li><li>성능 모니터링 및 최적화 기법 습득</li></ul></li><li><p><strong>고급 단계 (5-8 주)</strong></p><ul><li>컨테이너 런타임과 PCB 통합 이해</li><li>AI 기반 스케줄링 알고리즘 학습</li><li>보안 강화 및 실시간 시스템 적용</li></ul></li><li><p><strong>전문가 단계 (8 주 이상)</strong></p><ul><li>커널 레벨 PCB 구현 분석</li><li>분산 시스템에서의 PCB 관리</li><li>차세대 하드웨어와의 통합 연구</li></ul></li></ol><h3 id=실무-적용-가이드>실무 적용 가이드<a hidden class=anchor aria-hidden=true href=#실무-적용-가이드>#</a></h3><p><strong>직무별 활용 방안</strong>:</p><ul><li><strong>시스템 엔지니어</strong>: PCB 모니터링을 통한 시스템 성능 최적화</li><li><strong>클라우드 엔지니어</strong>: 컨테이너 환경에서 PCB 기반 자원 관리</li><li><strong>보안 엔지니어</strong>: PCB 정보를 활용한 이상 프로세스 탐지</li><li><strong>개발자</strong>: 멀티프로세싱 응용 프로그램의 성능 튜닝</li></ul><p><strong>프로젝트 적용 시나리오</strong>:</p><ol><li><strong>마이크로서비스 모니터링 시스템</strong>: PCB 기반 실시간 성능 추적</li><li><strong>컨테이너 보안 강화</strong>: PCB 정보를 활용한 런타임 보안 검사</li><li><strong>AI 기반 인프라 최적화</strong>: 머신러닝으로 PCB 스케줄링 개선</li></ol><h3 id=학습-항목-매트릭스>학습 항목 매트릭스<a hidden class=anchor aria-hidden=true href=#학습-항목-매트릭스>#</a></h3><blockquote><p>이 표는 체계적인 학습을 위해 단계별 학습 항목과 중요도를 정리하기 위해 작성되었습니다.</p></blockquote><table><thead><tr><th>카테고리</th><th>Phase</th><th>항목</th><th>중요도</th><th>학습 목표</th><th>실무 연관성</th><th>설명</th></tr></thead><tbody><tr><td><strong>기초</strong></td><td>1</td><td>PCB 개념 정의</td><td>필수</td><td>기본 개념 이해</td><td>높음</td><td>모든 운영체제 이해의 기반</td></tr><tr><td><strong>기초</strong></td><td>1</td><td>프로세스 생명주기</td><td>필수</td><td>상태 전이 이해</td><td>높음</td><td>시스템 프로그래밍 필수 지식</td></tr><tr><td><strong>기초</strong></td><td>1</td><td>PCB 구조체 구성</td><td>필수</td><td>데이터 구조 이해</td><td>중간</td><td>시스템 내부 동작 이해</td></tr><tr><td><strong>핵심</strong></td><td>2</td><td>컨텍스트 스위칭</td><td>필수</td><td>동작 메커니즘 이해</td><td>높음</td><td>성능 최적화의 핵심</td></tr><tr><td><strong>핵심</strong></td><td>2</td><td>스케줄링 통합</td><td>필수</td><td>스케줄러와 상호작용</td><td>높음</td><td>시스템 성능에 직접 영향</td></tr><tr><td><strong>핵심</strong></td><td>2</td><td>메모리 관리 연계</td><td>권장</td><td>가상 메모리 통합</td><td>중간</td><td>고급 시스템 프로그래밍</td></tr><tr><td><strong>분석</strong></td><td>3</td><td>성능 특성 분석</td><td>권장</td><td>장단점 파악</td><td>높음</td><td>기술 선택 판단 능력</td></tr><tr><td><strong>분석</strong></td><td>3</td><td>트레이드오프 이해</td><td>권장</td><td>설계 결정 근거</td><td>중간</td><td>아키텍처 설계 역량</td></tr><tr><td><strong>구현</strong></td><td>4</td><td>모니터링 도구 구현</td><td>권장</td><td>실습 역량 개발</td><td>높음</td><td>즉시 적용 가능한 기술</td></tr><tr><td><strong>구현</strong></td><td>4</td><td>성능 분석 도구</td><td>선택</td><td>고급 분석 능력</td><td>중간</td><td>전문가 수준 역량</td></tr><tr><td><strong>응용</strong></td><td>5</td><td>컨테이너 통합</td><td>권장</td><td>현대 환경 적응</td><td>높음</td><td>클라우드 시대 필수</td></tr><tr><td><strong>응용</strong></td><td>5</td><td>실제 사례 분석</td><td>권장</td><td>실무 적용 능력</td><td>높음</td><td>경험 기반 학습</td></tr><tr><td><strong>운영</strong></td><td>6</td><td>보안 고려사항</td><td>권장</td><td>보안 의식 함양</td><td>중간</td><td>안전한 시스템 운영</td></tr><tr><td><strong>운영</strong></td><td>6</td><td>성능 최적화</td><td>선택</td><td>고급 튜닝 기법</td><td>높음</td><td>전문가 수준 운영</td></tr><tr><td><strong>고급</strong></td><td>7</td><td>AI 기반 최적화</td><td>선택</td><td>최신 기술 이해</td><td>낮음</td><td>미래 기술 대비</td></tr><tr><td><strong>고급</strong></td><td>7</td><td>분산 시스템 적용</td><td>선택</td><td>확장된 적용</td><td>낮음</td><td>연구 개발 수준</td></tr></tbody></table><h3 id=학습-항목-정리-표>학습 항목 정리 표<a hidden class=anchor aria-hidden=true href=#학습-항목-정리-표>#</a></h3><blockquote><p>이 표는 <strong>단계별 학습 항목과 중요도</strong>를 정리하기 위해 작성되었습니다.</p></blockquote><table><thead><tr><th>카테고리</th><th>Phase</th><th>항목</th><th>중요도</th><th>학습 목표</th><th>실무 연관성</th><th>설명</th></tr></thead><tbody><tr><td>기초</td><td>1</td><td>PCB 정의/역할</td><td>필수</td><td>컨텍스트/스케줄링 기반 이해</td><td>높음</td><td>OS 전반 토대</td></tr><tr><td>핵심</td><td>2</td><td>task_struct/스케줄러 연계</td><td>필수</td><td>필드/정책 매핑</td><td>높음</td><td>성능/안정성 핵심</td></tr><tr><td>응용</td><td>5</td><td><code>/proc</code> 관측 자동화</td><td>권장</td><td>경보/대응 자동화</td><td>중간</td><td>운영 효율 극대화</td></tr><tr><td>고급</td><td>7</td><td>eBPF/affinity/RT</td><td>선택</td><td>저지연·고성능 튜닝</td><td>중간</td><td>하이엔드 최적화</td></tr></tbody></table><h3 id=학습-항목-정리-표-1>학습 항목 정리 표<a hidden class=anchor aria-hidden=true href=#학습-항목-정리-표-1>#</a></h3><blockquote><p>이 표는 체계적인 학습을 위해 단계별 학습 항목과 중요도를 정리하기 위해 작성되었습니다.</p></blockquote><table><thead><tr><th>카테고리</th><th>Phase</th><th>항목</th><th>중요도</th><th>학습 목표</th><th>실무 연관성</th><th>설명</th></tr></thead><tbody><tr><td>기초</td><td>1</td><td>PCB 개념과 구조</td><td>필수</td><td>프로세스 관리 원리 이해</td><td>높음</td><td>운영체제 내 핵심 데이터 구조</td></tr><tr><td>핵심</td><td>2</td><td>컨텍스트 스위칭·구성요소</td><td>필수</td><td>효율적 상호 전환·상태 복구 원리</td><td>높음</td><td>시스템 자원 관리·복구/모니터링 기반</td></tr><tr><td>분석</td><td>3</td><td>장점·단점·최적화</td><td>필수</td><td>기술적 트레이드오프 및 최적화 방안 습득</td><td>높음</td><td>실무시 성능/보안/관리 대비</td></tr><tr><td>구현</td><td>4</td><td>PCB 생성/관리/종류</td><td>권장</td><td>OS 별 구현 방식/차이 학습</td><td>중간</td><td>시스템별 적용 비교</td></tr><tr><td>응용</td><td>5</td><td>실습·실제 적용 사례</td><td>권장</td><td>코드로 실제 컨텍스트 스위칭 경험</td><td>높음</td><td>업무·실무에 직접 활용</td></tr><tr><td>운영</td><td>6</td><td>모니터링·최적화·보안</td><td>권장</td><td>현장 운영환경 대응</td><td>높음</td><td>장애·관리·보안 강화</td></tr><tr><td>고급</td><td>7</td><td>최신 트렌드·연계 기술</td><td>선택</td><td>미래형 운영체제 설계·통합 시야 획득</td><td>낮음</td><td>차세대 기술 대비</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><blockquote><p>이 표는 주제의 핵심 용어와 실무 적용 가능성을 정리하기 위해 작성되었습니다.</p></blockquote><table><thead><tr><th>카테고리</th><th>용어</th><th>정의</th><th>관련 개념</th><th>실무 활용</th></tr></thead><tbody><tr><td>핵심</td><td>PCB(프로세스 제어 블록)</td><td>프로세스 상태·정보 관리 커널 자료구조</td><td>프로세스, 커널, 컨텍스트 스위칭</td><td>상태 관리/복구/모니터링</td></tr><tr><td>구현</td><td>프로세스 식별자 (Process ID)</td><td>고유 식별·분류용 번호</td><td>프로세스 테이블</td><td>모니터링/자원 추적</td></tr><tr><td>운영</td><td>커널 보호 메모리</td><td>사용자 접근 차단된 PCB 관리 영역</td><td>보안관리, 권한, 커널 스택</td><td>보안·권한 관리</td></tr><tr><td>연계</td><td>문맥 교환 (Context Switching)</td><td>프로세스 상태 저장 및 복원</td><td>PCB, 스케줄러</td><td>멀티태스킹·복구/오류 처리</td></tr></tbody></table><h3 id=용어-정리-1>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-1>#</a></h3><blockquote><p>이 표는 <strong>핵심 용어와 실무 활용</strong>을 정리하기 위해 작성되었습니다.</p></blockquote><table><thead><tr><th>카테고리</th><th>용어</th><th>정의</th><th>관련 개념</th><th>실무 활용</th></tr></thead><tbody><tr><td>핵심</td><td>PCB</td><td>프로세스 실행/상태 관리 커널 자료구조</td><td>스케줄러, 메모리, 보안</td><td>문맥교환/관측/제어</td></tr><tr><td>구현</td><td>task_struct</td><td>Linux 의 프로세스/스레드 서술자</td><td>mm_struct, cred, signal</td><td><code>/proc</code>/eBPF 관측</td></tr><tr><td>구현</td><td>EPROCESS/ETHREAD</td><td>Windows 커널의 프로세스/스레드 객체</td><td>KTHREAD, KPRCB</td><td>ETW/PerfMon 분석</td></tr><tr><td>운영</td><td><code>/proc</code></td><td>커널 자료구조 인터페이스 FS</td><td>status/stat/syscall</td><td>모니터링/디버깅</td></tr><tr><td>운영</td><td>eBPF</td><td>커널 내 샌드박스 프로그램</td><td>bpftrace/BCC</td><td>저오버헤드 관측/보호</td></tr></tbody></table><hr><h2 id=용어-정리-2>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-2>#</a></h2><blockquote><p>이 표는 PCB 관련 핵심 용어와 실무 적용 가능성을 정리하기 위해 작성되었습니다.</p></blockquote><table><thead><tr><th>카테고리</th><th>용어</th><th>정의</th><th>관련 개념</th><th>실무 활용</th></tr></thead><tbody><tr><td><strong>핵심</strong></td><td>Process Control Block (PCB)</td><td>운영체제가 각 프로세스의 상태 정보를 저장하는 데이터 구조</td><td>Task Control Block, 프로세스 디스크립터</td><td>시스템 모니터링, 성능 분석</td></tr><tr><td><strong>핵심</strong></td><td>Context Switching (컨텍스트 스위칭)</td><td>CPU 가 한 프로세스에서 다른 프로세스로 전환하는 과정</td><td>스케줄링, 멀티태스킹</td><td>성능 최적화, 지연시간 분석</td></tr><tr><td><strong>핵심</strong></td><td>Process ID (PID)</td><td>시스템에서 프로세스를 고유하게 식별하는 번호</td><td>PPID, 프로세스 계층구조</td><td>프로세스 관리, 모니터링 도구</td></tr><tr><td><strong>구현</strong></td><td>/proc 파일시스템</td><td>커널 정보를 파일 형태로 제공하는 가상 파일시스템</td><td>sysfs, procfs</td><td>시스템 정보 수집, 진단 도구</td></tr><tr><td><strong>구현</strong></td><td>Task Struct</td><td>Linux 커널에서 PCB 를 구현하는 구조체</td><td>process descriptor</td><td>커널 개발, 시스템 프로그래밍</td></tr><tr><td><strong>구현</strong></td><td>CPU Affinity (CPU 친화성)</td><td>프로세스를 특정 CPU 코어에 바인딩하는 기법</td><td>NUMA, 스케줄링</td><td>성능 최적화, 멀티코어 활용</td></tr><tr><td><strong>운영</strong></td><td>Zombie Process (좀비 프로세스)</td><td>종료되었지만 PCB 가 남아있는 프로세스</td><td>프로세스 정리, wait() 시스템 호출</td><td>시스템 관리, 메모리 누수 방지</td></tr><tr><td><strong>운영</strong></td><td>Process State (프로세스 상태)</td><td>PCB 에 저장된 프로세스의 현재 실행 상태</td><td>Running, Sleeping, Waiting</td><td>시스템 진단, 성능 분석</td></tr><tr><td><strong>운영</strong></td><td>Nice Value</td><td>프로세스의 스케줄링 우선순위를 조정하는 값</td><td>우선순위 스케줄링</td><td>시스템 튜닝, 부하 분산</td></tr><tr><td><strong>고급</strong></td><td>NUMA (Non-Uniform Memory Access)</td><td>멀티프로세서 시스템의 메모리 아키텍처</td><td>PCB 지역성, 메모리 대역폭</td><td>대규모 시스템 최적화</td></tr><tr><td><strong>고급</strong></td><td>eBPF (extended Berkeley Packet Filter)</td><td>커널 공간에서 안전하게 코드를 실행하는 기술</td><td>커널 바이패스, 관측성</td><td>모니터링, 보안, 네트워킹</td></tr><tr><td><strong>고급</strong></td><td>Container Runtime Interface (CRI)</td><td>Kubernetes 와 컨테이너 런타임 간 표준 인터페이스</td><td>Docker, containerd, 프로세스 격리</td><td>컨테이너 오케스트레이션</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><a href=https://kernel.org/doc/html/latest/process/index.html>Linux Kernel Documentation - Process Management</a></li><li><a href=https://www.oreilly.com/library/view/understanding-the-linux/0596005652/>Understanding the Linux Kernel, 3rd Edition</a> - O&rsquo;Reilly Media</li><li><a href=https://www.wiley.com/en-us/Operating+System+Concepts%2C+10th+Edition-p-9781119320913>Operating System Concepts, 10th Edition</a> - Silberschatz, Galvin, Gagne</li><li><a href=https://pubs.opengroup.org/onlinepubs/9699919799/>POSIX.1-2017 Standard</a> - The Open Group</li><li><a href=https://kubernetes.io/docs/concepts/architecture/cri/>Container Runtime Interface (CRI)</a> - Kubernetes Documentation</li><li><a href=https://ebpf.io/what-is-ebpf>eBPF Documentation</a> - eBPF Foundation</li><li><a href=https://book.easyperf.net/>Performance Analysis and Tuning on Modern CPUs</a> - Denis Bakhvalov</li><li><a href=https://www.brendangregg.com/systems-performance-2nd-edition-book.html>Systems Performance: Enterprise and the Cloud, 2nd Edition</a> - Brendan Gregg</li></ul><h2 id=참고-및-출처-1>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-1>#</a></h2><ul><li><a href=https://www.geeksforgeeks.org/operating-systems/process-table-and-process-control-block-pcb>Process Table and Process Control Block (PCB) - GeeksforGeeks</a>[5]</li><li><a href=https://ko.wikipedia.org/wiki/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4_%EC%A0%9C%EC%96%B4_%EB%B8%94%EB%A1%9D>프로세스 제어 블록 - 위키백과</a>[1]</li><li><a href=https://www.tutorialspoint.com/what-is-process-control-block-pcb>What is Process Control Block (PCB)? - TutorialsPoint</a>[3]</li><li><a href=https://nostressdev.tistory.com/15>PCB (Process Control Block) 이란? - 티스토리</a>[6]</li><li><a href=https://www.geeksforgeeks.org/operating-systems/process-control-block-in-os/>Process Control Block in OS (PCB) - GeeksforGeeks</a>[4]</li></ul><hr></div></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>