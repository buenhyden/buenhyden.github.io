<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Cache Invalidation | hyunyoun's Blog</title>
<meta name=keywords content="Computer-System,Computer-Architecture,Memory-Architecture,Caching,Cache-Invalidation"><meta name=description content="Cache Invalidation(캐시 무효화)는 캐시에 저장된 데이터가 더 이상 최신 상태가 아니거나 유효하지 않을 때, 이를 무효화하여 캐시가 최신 데이터를 제공하도록 보장하는 과정이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/system-design/caching/cache-invalidation/cache-invalidation/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.8762af4fa9ee176c57f72565b721f234162fc7a9c882a271e0a1f68c4e89fb34.css integrity="sha256-h2KvT6nuF2xX9yVltyHyNBYvx6nIgqJx4KH2jE6J+zQ=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/system-design/caching/cache-invalidation/cache-invalidation/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/system-design/caching/cache-invalidation/cache-invalidation/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Cache Invalidation"><meta property="og:description" content="Cache Invalidation(캐시 무효화)는 캐시에 저장된 데이터가 더 이상 최신 상태가 아니거나 유효하지 않을 때, 이를 무효화하여 캐시가 최신 데이터를 제공하도록 보장하는 과정이다."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-30T03:30:00+00:00"><meta property="article:modified_time" content="2024-09-30T03:30:00+00:00"><meta property="article:tag" content="Computer-System"><meta property="article:tag" content="Computer-Architecture"><meta property="article:tag" content="Memory-Architecture"><meta property="article:tag" content="Caching"><meta property="article:tag" content="Cache-Invalidation"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Cache Invalidation"><meta name=twitter:description content="Cache Invalidation(캐시 무효화)는 캐시에 저장된 데이터가 더 이상 최신 상태가 아니거나 유효하지 않을 때, 이를 무효화하여 캐시가 최신 데이터를 제공하도록 보장하는 과정이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"기술 블로그","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"System Design","item":"https://buenhyden.github.io/posts/system-design/"},{"@type":"ListItem","position":3,"name":"캐싱 (Caching)","item":"https://buenhyden.github.io/posts/system-design/caching/"},{"@type":"ListItem","position":4,"name":"Cache Invalidation","item":"https://buenhyden.github.io/posts/system-design/caching/cache-invalidation/cache-invalidation/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Cache Invalidation","name":"Cache Invalidation","description":"Cache Invalidation(캐시 무효화)는 캐시에 저장된 데이터가 더 이상 최신 상태가 아니거나 유효하지 않을 때, 이를 무효화하여 캐시가 최신 데이터를 제공하도록 보장하는 과정이다.","keywords":["Computer-System","Computer-Architecture","Memory-Architecture","Caching","Cache-Invalidation"],"articleBody":"Cache Invalidation Cache Invalidation(캐시 무효화)는 캐시에 저장된 데이터가 더 이상 최신 상태가 아니거나 유효하지 않을 때, 이를 무효화하여 캐시가 최신 데이터를 제공하도록 보장하는 과정이다.\n캐시 무효화는 캐싱 시스템에서 데이터 일관성을 유지하고, 잘못된 데이터를 반환하지 않도록 하기 위해 필수적인 메커니즘이다.\nCache Invalidation은 캐싱 시스템에서 필수적인 요소로, 데이터 일관성을 유지하고 잘못된 정보를 방지하기 위해 사용된다. Expiration(TTL), Active Invalidation, Validation-based Caching 등 다양한 전략을 상황에 맞게 선택해야 하며, 구현 시 성능과 복잡성을 균형 있게 고려해야 한다. 올바른 설계와 전략 선택은 시스템의 신뢰성과 효율성을 크게 향상시킬 수 있다.\nCache Invalidation의 필요성 캐싱의 기본 원리 캐시는 데이터를 빠르게 접근하기 위해 자주 사용되는 데이터를 저장하는 메커니즘이다. 하지만, 원본 데이터(예: 데이터베이스, 파일 등)가 변경되었을 때, 캐시에 저장된 데이터가 더 이상 최신 상태가 아닐 수 있다. 이를 Stale Data(오래된 데이터) 라고 한다.\n문제점 오래된 데이터로 인해 잘못된 정보가 반환될 수 있다. 데이터 일관성이 깨져 시스템의 신뢰성이 저하될 수 있다. 목적 Cache Invalidation은 이러한 문제를 해결하여 캐시와 원본 데이터 간의 일관성을 유지한다. 이를 통해 캐시는 최신 데이터를 제공할 수 있으며, 시스템의 성능과 신뢰성을 동시에 유지할 수 있다. Cache Invalidation의 주요 전략 캐시 무효화는 다양한 방식으로 수행될 수 있으며, 주로 다음 세 가지 방법이 사용된다:\nExpiration Time (TTL 기반 무효화): 캐시에 데이터를 저장할 때 유효 기간(Time-To-Live, TTL)을 설정한다. TTL이 만료되면 해당 캐시는 자동으로 무효화된다.\n장점:\n구현이 간단하며, 추가적인 검증 절차가 필요 없다. 일정 시간이 지나면 자동으로 최신 데이터를 가져온다.\n단점: TTL 설정이 부정확할 경우 문제가 발생할 수 있다. 너무 짧으면 불필요한 캐시 미스(Cache Miss)가 증가한다. 너무 길면 오래된 데이터가 반환될 가능성이 높아진다.\n사용 사례: 뉴스 기사나 주식 가격처럼 일정 시간이 지나면 업데이트가 필요한 데이터. Active Invalidation (능동적 무효화): 원본 데이터가 변경될 때, 관련된 캐시를 즉시 무효화하거나 갱신하는 방식이다.\n방법:\n데이터베이스나 애플리케이션에서 원본 데이터가 수정될 때, 연관된 캐시 키를 삭제하거나 업데이트한다. 예를 들어, Redis와 같은 캐싱 시스템에서 특정 키를 삭제(DEL)하여 무효화한다.\n장점: 항상 최신 데이터를 보장할 수 있다. 불필요한 TTL 기반의 대기 시간을 제거한다.\n단점: 구현이 복잡하며, 원본 데이터와 캐시 간의 강한 결합이 발생할 수 있다. 실시간으로 동작하기 때문에 성능 오버헤드가 발생할 가능성이 있다.\n사용 사례: 전자상거래 사이트에서 상품 재고나 가격 정보처럼 실시간으로 업데이트되어야 하는 데이터. Validation-based Caching (검증 기반 무효화): 캐시에 저장된 데이터가 여전히 유효한지 확인하는 검증 절차를 거친다. 예를 들어, 원본 데이터의 마지막 수정 시간과 캐시 생성 시간을 비교한다.\n장점:\n항상 정확한 데이터를 제공할 수 있다. 필요할 때만 검증하므로 불필요한 작업을 줄일 수 있다.\n단점: 각 요청마다 검증 작업이 필요하므로 성능 오버헤드가 발생할 수 있다.\n사용 사례: 사용자 프로필 정보처럼 변경 빈도가 낮지만 정확성이 중요한 데이터. 버전 관리(Versioning): 정적 파일의 경우, 파일명이나 경로에 버전 정보를 포함시켜 새로운 버전이 배포될 때마다 캐시를 무효화한다. 예를 들어, style.v2.css와 같이 파일명을 변경하면 브라우저는 새로운 파일로 인식하여 최신 데이터를 로드한다.\nCache Invalidation의 구현 방법 Write-through Cache: 데이터를 수정할 때 원본 데이터와 캐시에 동시에 기록(write)한다.\n장점: 항상 최신 상태를 유지하며, 일관성을 보장한다. 단점: 쓰기 작업이 느려질 수 있다. Write-back Cache: 데이터를 먼저 캐시에 기록하고 나중에 원본에 반영한다. 특정 조건이나 주기에 따라 동기화된다.\n장점: 쓰기 작업 속도가 빠르다. 단점: 동기화 이전에 장애가 발생하면 데이터 손실 가능성이 있다. Write-around Cache: 데이터를 수정할 때 캐시는 건너뛰고 원본에만 기록한다. 읽기 요청 시 최신 데이터를 가져온다.\n장점: 쓰기 작업이 많을 때 적합하다. 단점: 읽기 요청 시 캐시 미스(Cache Miss)가 자주 발생할 수 있다. Cache Invalidation의 장단점 장점 최신 데이터를 보장하여 시스템 신뢰성 향상. Stale Data로 인한 문제 방지. 효율적인 자원 관리 가능. 단점 구현 복잡성 증가(특히 Active Invalidation). 성능 오버헤드 발생 가능(TTL 및 Validation 기반). 잘못된 설정(TTL 등)은 성능 저하 또는 일관성 문제를 야기할 수 있음. 실제 활용 사례 웹 애플리케이션\nCDN(Content Delivery Network): 정적 콘텐츠(이미지, CSS 등)의 TTL 기반 캐시 무효화를 통해 최신 콘텐츠 제공. 전자상거래\n상품 재고 및 가격 정보는 Active Invalidation을 사용하여 실시간으로 갱신. 분산 시스템\n분산 환경에서 Hazelcast와 같은 분산 캐싱 솔루션은 Invalidation Message Propagation을 통해 모든 노드에서 동일한 데이터를 유지. Redis 및 Memcached\nRedis는 TTL 기반과 Active Invalidation을 모두 지원하며, 고성능 애플리케이션에서 자주 사용됨. Cache Invalidation 구현 예시 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 class Cache: def __init__(self): self.cache_data = {} self.valid_flags = {} def set(self, key, value): \"\"\"캐시에 데이터를 저장합니다\"\"\" self.cache_data[key] = value self.valid_flags[key] = True def get(self, key): \"\"\"캐시된 데이터를 조회합니다\"\"\" if key in self.cache_data and self.valid_flags[key]: return self.cache_data[key] return None def invalidate(self, key): \"\"\"특정 캐시 항목을 무효화합니다\"\"\" if key in self.valid_flags: self.valid_flags[key] = False def is_valid(self, key): \"\"\"캐시 항목의 유효성을 확인합니다\"\"\" return key in self.valid_flags and self.valid_flags[key] Cache Invalidation의 주요 도전 과제들 경쟁 상태(Race Conditions) 처리:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class ThreadSafeCache: def __init__(self): self.cache = {} self.locks = {} self.global_lock = threading.Lock() def get_or_create_lock(self, key): \"\"\"각 키별로 별도의 락을 사용합니다\"\"\" with self.global_lock: if key not in self.locks: self.locks[key] = threading.Lock() return self.locks[key] def update_safely(self, key, value): \"\"\"스레드 안전한 업데이트를 수행합니다\"\"\" lock = self.get_or_create_lock(key) with lock: self.cache[key] = value 일관성과 가용성의 균형:\n강한 일관성: 모든 읽기가 최신 데이터를 보장 최종 일관성: 일정 시간 후 일관성 보장 선택적 무효화: 중요도에 따른 차별화 성능 최적화:\n배치 처리를 통한 효율성 향상 부분 캐시 무효화 지원 무효화 지연을 통한 오버헤드 감소 참고 및 출처 ","wordCount":"830","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2024-09-30T03:30:00Z","dateModified":"2024-09-30T03:30:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/system-design/caching/cache-invalidation/cache-invalidation/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>기술 블로그</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/system-design/>System Design</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/system-design/caching/>캐싱 (Caching)</a></div><h1 class="post-title entry-hint-parent">Cache Invalidation</h1><div class=post-description>Cache Invalidation(캐시 무효화)는 캐시에 저장된 데이터가 더 이상 최신 상태가 아니거나 유효하지 않을 때, 이를 무효화하여 캐시가 최신 데이터를 제공하도록 보장하는 과정이다.</div><div class=post-meta><span title='2024-09-30 03:30:00 +0000 UTC'>September 30, 2024</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/System%20Design/Caching/Cache%20Invalidation/Cache-Invalidation.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#cache-invalidation>Cache Invalidation</a><ul><li><a href=#cache-invalidation의-필요성>Cache Invalidation의 필요성</a></li><li><a href=#cache-invalidation의-주요-전략>Cache Invalidation의 주요 전략</a></li><li><a href=#cache-invalidation의-구현-방법>Cache Invalidation의 구현 방법</a></li><li><a href=#cache-invalidation의-장단점>Cache Invalidation의 장단점</a></li><li><a href=#실제-활용-사례>실제 활용 사례</a></li><li><a href=#cache-invalidation-구현-예시>Cache Invalidation 구현 예시</a></li><li><a href=#cache-invalidation의-주요-도전-과제들>Cache Invalidation의 주요 도전 과제들</a></li></ul></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=cache-invalidation>Cache Invalidation<a hidden class=anchor aria-hidden=true href=#cache-invalidation>#</a></h2><p>Cache Invalidation(캐시 무효화)는 캐시에 저장된 데이터가 더 이상 최신 상태가 아니거나 유효하지 않을 때, 이를 무효화하여 캐시가 최신 데이터를 제공하도록 보장하는 과정이다.<br>캐시 무효화는 캐싱 시스템에서 데이터 일관성을 유지하고, 잘못된 데이터를 반환하지 않도록 하기 위해 필수적인 메커니즘이다.</p><p>Cache Invalidation은 캐싱 시스템에서 필수적인 요소로, 데이터 일관성을 유지하고 잘못된 정보를 방지하기 위해 사용된다. Expiration(TTL), Active Invalidation, Validation-based Caching 등 다양한 전략을 상황에 맞게 선택해야 하며, 구현 시 성능과 복잡성을 균형 있게 고려해야 한다. 올바른 설계와 전략 선택은 시스템의 신뢰성과 효율성을 크게 향상시킬 수 있다.</p><h3 id=cache-invalidation의-필요성>Cache Invalidation의 필요성<a hidden class=anchor aria-hidden=true href=#cache-invalidation의-필요성>#</a></h3><h4 id=캐싱의-기본-원리>캐싱의 기본 원리<a hidden class=anchor aria-hidden=true href=#캐싱의-기본-원리>#</a></h4><p>캐시는 데이터를 빠르게 접근하기 위해 자주 사용되는 데이터를 저장하는 메커니즘이다. 하지만, 원본 데이터(예: 데이터베이스, 파일 등)가 변경되었을 때, 캐시에 저장된 데이터가 더 이상 최신 상태가 아닐 수 있다. 이를 <strong>Stale Data(오래된 데이터)</strong> 라고 한다.</p><h4 id=문제점>문제점<a hidden class=anchor aria-hidden=true href=#문제점>#</a></h4><ul><li>오래된 데이터로 인해 잘못된 정보가 반환될 수 있다.</li><li>데이터 일관성이 깨져 시스템의 신뢰성이 저하될 수 있다.</li></ul><h4 id=목적>목적<a hidden class=anchor aria-hidden=true href=#목적>#</a></h4><ul><li>Cache Invalidation은 이러한 문제를 해결하여 캐시와 원본 데이터 간의 일관성을 유지한다.</li><li>이를 통해 캐시는 최신 데이터를 제공할 수 있으며, 시스템의 성능과 신뢰성을 동시에 유지할 수 있다.</li></ul><h3 id=cache-invalidation의-주요-전략>Cache Invalidation의 주요 전략<a hidden class=anchor aria-hidden=true href=#cache-invalidation의-주요-전략>#</a></h3><p>캐시 무효화는 다양한 방식으로 수행될 수 있으며, 주로 다음 세 가지 방법이 사용된다:</p><ol><li><p>Expiration Time (TTL 기반 무효화): 캐시에 데이터를 저장할 때 유효 기간(Time-To-Live, TTL)을 설정한다. TTL이 만료되면 해당 캐시는 자동으로 무효화된다.<br><strong>장점</strong>:</p><ul><li>구현이 간단하며, 추가적인 검증 절차가 필요 없다.</li><li>일정 시간이 지나면 자동으로 최신 데이터를 가져온다.<br><strong>단점</strong>:</li><li>TTL 설정이 부정확할 경우 문제가 발생할 수 있다.</li><li>너무 짧으면 불필요한 캐시 미스(Cache Miss)가 증가한다.</li><li>너무 길면 오래된 데이터가 반환될 가능성이 높아진다.<br><strong>사용 사례</strong>:</li><li>뉴스 기사나 주식 가격처럼 일정 시간이 지나면 업데이트가 필요한 데이터.</li></ul></li><li><p>Active Invalidation (능동적 무효화): 원본 데이터가 변경될 때, 관련된 캐시를 즉시 무효화하거나 갱신하는 방식이다.<br><strong>방법</strong>:</p><ul><li>데이터베이스나 애플리케이션에서 원본 데이터가 수정될 때, 연관된 캐시 키를 삭제하거나 업데이트한다.</li><li>예를 들어, Redis와 같은 캐싱 시스템에서 특정 키를 삭제(<code>DEL</code>)하여 무효화한다.<br><strong>장점</strong>:</li><li>항상 최신 데이터를 보장할 수 있다.</li><li>불필요한 TTL 기반의 대기 시간을 제거한다.<br><strong>단점</strong>:</li><li>구현이 복잡하며, 원본 데이터와 캐시 간의 강한 결합이 발생할 수 있다.</li><li>실시간으로 동작하기 때문에 성능 오버헤드가 발생할 가능성이 있다.<br><strong>사용 사례</strong>:</li><li>전자상거래 사이트에서 상품 재고나 가격 정보처럼 실시간으로 업데이트되어야 하는 데이터.</li></ul></li><li><p>Validation-based Caching (검증 기반 무효화): 캐시에 저장된 데이터가 여전히 유효한지 확인하는 검증 절차를 거친다. 예를 들어, 원본 데이터의 마지막 수정 시간과 캐시 생성 시간을 비교한다.<br><strong>장점</strong>:</p><ul><li>항상 정확한 데이터를 제공할 수 있다.</li><li>필요할 때만 검증하므로 불필요한 작업을 줄일 수 있다.<br><strong>단점</strong>:</li><li>각 요청마다 검증 작업이 필요하므로 성능 오버헤드가 발생할 수 있다.<br><strong>사용 사례</strong>:</li><li>사용자 프로필 정보처럼 변경 빈도가 낮지만 정확성이 중요한 데이터.</li></ul></li><li><p>버전 관리(Versioning): 정적 파일의 경우, 파일명이나 경로에 버전 정보를 포함시켜 새로운 버전이 배포될 때마다 캐시를 무효화한다. 예를 들어, <code>style.v2.css</code>와 같이 파일명을 변경하면 브라우저는 새로운 파일로 인식하여 최신 데이터를 로드한다.</p></li></ol><h3 id=cache-invalidation의-구현-방법>Cache Invalidation의 구현 방법<a hidden class=anchor aria-hidden=true href=#cache-invalidation의-구현-방법>#</a></h3><ol><li><p>Write-through Cache: 데이터를 수정할 때 원본 데이터와 캐시에 동시에 기록(write)한다.</p><ul><li>장점: 항상 최신 상태를 유지하며, 일관성을 보장한다.</li><li>단점: 쓰기 작업이 느려질 수 있다.</li></ul></li><li><p>Write-back Cache: 데이터를 먼저 캐시에 기록하고 나중에 원본에 반영한다. 특정 조건이나 주기에 따라 동기화된다.</p><ul><li>장점: 쓰기 작업 속도가 빠르다.</li><li>단점: 동기화 이전에 장애가 발생하면 데이터 손실 가능성이 있다.</li></ul></li><li><p>Write-around Cache: 데이터를 수정할 때 캐시는 건너뛰고 원본에만 기록한다. 읽기 요청 시 최신 데이터를 가져온다.</p><ul><li>장점: 쓰기 작업이 많을 때 적합하다.</li><li>단점: 읽기 요청 시 캐시 미스(Cache Miss)가 자주 발생할 수 있다.</li></ul></li></ol><h3 id=cache-invalidation의-장단점>Cache Invalidation의 장단점<a hidden class=anchor aria-hidden=true href=#cache-invalidation의-장단점>#</a></h3><h4 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h4><ol><li>최신 데이터를 보장하여 시스템 신뢰성 향상.</li><li>Stale Data로 인한 문제 방지.</li><li>효율적인 자원 관리 가능.</li></ol><h4 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h4><ol><li>구현 복잡성 증가(특히 Active Invalidation).</li><li>성능 오버헤드 발생 가능(TTL 및 Validation 기반).</li><li>잘못된 설정(TTL 등)은 성능 저하 또는 일관성 문제를 야기할 수 있음.</li></ol><h3 id=실제-활용-사례>실제 활용 사례<a hidden class=anchor aria-hidden=true href=#실제-활용-사례>#</a></h3><ol><li><p><strong>웹 애플리케이션</strong></p><ul><li>CDN(Content Delivery Network): 정적 콘텐츠(이미지, CSS 등)의 TTL 기반 캐시 무효화를 통해 최신 콘텐츠 제공.</li></ul></li><li><p><strong>전자상거래</strong></p><ul><li>상품 재고 및 가격 정보는 Active Invalidation을 사용하여 실시간으로 갱신.</li></ul></li><li><p><strong>분산 시스템</strong></p><ul><li>분산 환경에서 Hazelcast와 같은 분산 캐싱 솔루션은 Invalidation Message Propagation을 통해 모든 노드에서 동일한 데이터를 유지.</li></ul></li><li><p><strong>Redis 및 Memcached</strong></p><ul><li>Redis는 TTL 기반과 Active Invalidation을 모두 지원하며, 고성능 애플리케이션에서 자주 사용됨.</li></ul></li></ol><h3 id=cache-invalidation-구현-예시>Cache Invalidation 구현 예시<a hidden class=anchor aria-hidden=true href=#cache-invalidation-구현-예시>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a>
</span><span class=lnt id=hl-0-21><a class=lnlinks href=#hl-0-21>21</a>
</span><span class=lnt id=hl-0-22><a class=lnlinks href=#hl-0-22>22</a>
</span><span class=lnt id=hl-0-23><a class=lnlinks href=#hl-0-23>23</a>
</span><span class=lnt id=hl-0-24><a class=lnlinks href=#hl-0-24>24</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Cache</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>cache_data</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>valid_flags</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>set</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시에 데이터를 저장합니다&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>cache_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>valid_flags</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시된 데이터를 조회합니다&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache_data</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>valid_flags</span><span class=p>[</span><span class=n>key</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>invalidate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;특정 캐시 항목을 무효화합니다&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>valid_flags</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>valid_flags</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>is_valid</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시 항목의 유효성을 확인합니다&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>valid_flags</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>valid_flags</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=cache-invalidation의-주요-도전-과제들>Cache Invalidation의 주요 도전 과제들<a hidden class=anchor aria-hidden=true href=#cache-invalidation의-주요-도전-과제들>#</a></h3><ol><li><p>경쟁 상태(Race Conditions) 처리:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14>14</a>
</span><span class=lnt id=hl-1-15><a class=lnlinks href=#hl-1-15>15</a>
</span><span class=lnt id=hl-1-16><a class=lnlinks href=#hl-1-16>16</a>
</span><span class=lnt id=hl-1-17><a class=lnlinks href=#hl-1-17>17</a>
</span><span class=lnt id=hl-1-18><a class=lnlinks href=#hl-1-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>ThreadSafeCache</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>cache</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>locks</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>global_lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_or_create_lock</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;각 키별로 별도의 락을 사용합니다&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>global_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>locks</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>locks</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>locks</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>update_safely</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;스레드 안전한 업데이트를 수행합니다&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>lock</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_or_create_lock</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>일관성과 가용성의 균형:</p><ul><li>강한 일관성: 모든 읽기가 최신 데이터를 보장</li><li>최종 일관성: 일정 시간 후 일관성 보장</li><li>선택적 무효화: 중요도에 따른 차별화</li></ul></li><li><p>성능 최적화:</p><ul><li>배치 처리를 통한 효율성 향상</li><li>부분 캐시 무효화 지원</li><li>무효화 지연을 통한 오버헤드 감소</li></ul></li></ol><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/computer-system/>Computer-System</a></li><li><a href=https://buenhyden.github.io/tags/computer-architecture/>Computer-Architecture</a></li><li><a href=https://buenhyden.github.io/tags/memory-architecture/>Memory-Architecture</a></li><li><a href=https://buenhyden.github.io/tags/caching/>Caching</a></li><li><a href=https://buenhyden.github.io/tags/cache-invalidation/>Cache-Invalidation</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/computer-science-fundamentals/computer-architecture/memory-systems/memory-hierarchy/cache-memory/coherence/cache-coherence/><span class=title>« Prev</span><br><span>Cache Coherence</span>
</a><a class=next href=https://buenhyden.github.io/posts/system-design/caching/cache-strategy/cache-strategy/><span class=title>Next »</span><br><span>Cache Strategy</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>