<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>분산 시스템(Distributed Systems) | hyunyoun's Blog</title><meta name=keywords content="System-Design,Distributed-Systems,Scalability,Fault,Tolerance,CAP,Theorem,Fault-Tolerance"><meta name=description content="분산 시스템은 여러 독립적인 컴퓨터 (노드) 가 네트워크를 통해 상호작용하며, 하나의 통합된 시스템처럼 동작하도록 설계된 구조이다. 확장성, 장애 허용성, 자원 효율성, 고가용성 등 현대 IT 인프라의 핵심 요구사항을 충족한다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/system-design/distributed-systems/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/system-design/distributed-systems/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/system-design/distributed-systems/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/system-design/distributed-systems/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="분산 시스템(Distributed Systems)"><meta property="og:description" content="분산 시스템은 여러 독립적인 컴퓨터 (노드) 가 네트워크를 통해 상호작용하며, 하나의 통합된 시스템처럼 동작하도록 설계된 구조이다. 확장성, 장애 허용성, 자원 효율성, 고가용성 등 현대 IT 인프라의 핵심 요구사항을 충족한다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="분산 시스템(Distributed Systems)"><meta name=twitter:description content="분산 시스템은 여러 독립적인 컴퓨터 (노드) 가 네트워크를 통해 상호작용하며, 하나의 통합된 시스템처럼 동작하도록 설계된 구조이다. 확장성, 장애 허용성, 자원 효율성, 고가용성 등 현대 IT 인프라의 핵심 요구사항을 충족한다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"HY's Blog","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"System Design","item":"https://buenhyden.github.io/posts/system-design/"},{"@type":"ListItem","position":3,"name":"분산 시스템(Distributed Systems)","item":"https://buenhyden.github.io/posts/system-design/distributed-systems/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>HY's Blog</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/system-design/>System Design</a></div><h1>분산 시스템(Distributed Systems)</h1><div class=post-description>분산 시스템은 여러 독립적인 컴퓨터 (노드) 가 네트워크를 통해 상호작용하며, 하나의 통합된 시스템처럼 동작하도록 설계된 구조이다. 확장성, 장애 허용성, 자원 효율성, 고가용성 등 현대 IT 인프라의 핵심 요구사항을 충족한다.</div></header><div class=post-content><h2 id=분산-시스템-distributed-system>분산 시스템 (Distributed System)<a hidden class=anchor aria-hidden=true href=#분산-시스템-distributed-system>#</a></h2><p>분산 시스템은 현대 IT 인프라의 근간을 이루는 핵심 기술로, 여러 노드가 협력하여 확장 가능하고 안정적인 서비스를 제공한다. CAP 정리, 합의 알고리즘, 복제 전략 등의 이론적 기반과 마이크로서비스, 컨테이너 오케스트레이션 등의 실무적 구현이 결합되어 있다. 일관성, 가용성, 분할 허용성 간의 트레이드오프를 관리하며 실무에서는 Netflix, Google 등의 대규모 시스템에서 활용된다.</p><h3 id=배경>배경<a hidden class=anchor aria-hidden=true href=#배경>#</a></h3><ol><li><p><strong>단일 시스템 구조의 한계</strong></p><ul><li><strong>확장성 부족</strong>: 사용자 수, 데이터 양 증가에 따라 단일 서버의 처리 능력에 한계 발생.</li><li><strong>단일 장애점 (SPOF)</strong>: 하나의 장애가 전체 시스템 중단으로 이어짐.</li><li><strong>장애 복구 지연</strong>: 장애 발생 시 전체 서비스 복구에 시간이 오래 걸림.</li></ul></li><li><p><strong>네트워크 기술의 발전</strong></p><ul><li><strong>1960–70 년대</strong>: ARPANET, Ethernet, Email 등 네트워크 기술 발전으로 컴퓨터 간 통신 가능해짐.</li><li><strong>분산 운영체제 연구</strong>: 1980–90 년대에 노드 간 자원 공유와 협업 개념이 본격적으로 연구됨.</li></ul></li><li><p><strong>애플리케이션 복잡도 및 규모 증가</strong></p><ul><li><strong>클라우드 컴퓨팅 도입</strong>: 유연한 자원 확장과 온디맨드 처리 수요 증가.</li><li><strong>글로벌 서비스 확산</strong>: 지리적으로 분산된 사용자에게 빠른 응답을 제공하기 위한 구조 필요.</li><li><strong>빅데이터 등장</strong>: 단일 시스템으로는 감당할 수 없는 대규모 데이터 처리 필요.</li></ul></li><li><p><strong>비용 효율성 및 내결함성 요구</strong></p><ul><li><strong>비용 절감</strong>: 고가의 고성능 서버 대신 저가의 범용 서버 다수 활용 가능.</li><li><strong>내결함성 강화</strong>: 일부 노드 장애에도 시스템 전체가 지속적으로 동작 가능하도록 설계 필요.</li></ul></li></ol><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><table><thead><tr><th><strong>목적 (Goal)</strong></th><th><strong>필요성 (Why it&rsquo;s Needed)</strong></th></tr></thead><tbody><tr><td>** 확장성 (Scalability)**</td><td>단일 서버는 트래픽, 데이터, 사용자 수 증가에 따른 수직 확장에 한계가 있음 → 수평 확장이 가능한 구조 필요</td></tr><tr><td><strong>고가용성 (High Availability)</strong></td><td>서비스가 일부 컴포넌트 실패에도 중단되지 않고 지속되도록 하려면 단일 장애점을 제거하고 노드 이중화가 필요</td></tr><tr><td><strong>내결함성 (Fault Tolerance)</strong></td><td>하드웨어나 소프트웨어 오류 발생 시 전체 시스템에 영향이 확산되지 않도록 장애 격리 및 자동 복구 메커니즘 필요</td></tr><tr><td><strong>성능 향상 (Performance)</strong></td><td>병렬 처리를 통해 다수 요청을 동시에 빠르게 처리하고 응답 시간을 줄이기 위해 → 처리량 (throughput) 과 응답 속도 향상 필요</td></tr><tr><td><strong>지리적 분산 (Geo Distribution)</strong></td><td>전 세계 사용자에게 빠른 서비스를 제공하기 위해 사용자와 가까운 지역에 노드를 분산 배치해야 함</td></tr><tr><td>** 비용 효율화 (Cost Efficiency)**</td><td>고성능 단일 서버 대신 저비용 범용 서버 + 클라우드 자원을 활용하여 인프라 투자 및 운영비용을 절감할 수 있어야 함</td></tr><tr><td><strong>유지보수 유연성 (Maintainability)</strong></td><td>일부 노드만 업데이트하거나 재배포할 수 있어야 전체 시스템 무중단 운영이 가능 → 민첩한 운영 및 빠른 롤아웃 필요</td></tr><tr><td><strong>자원 공유 (Resource Pooling)</strong></td><td>컴퓨팅 자원, 저장소, 네트워크 등을 노드 간에 효율적으로 공유함으로써 인프라 활용률을 극대화하고 중복 투자를 방지해야 함</td></tr></tbody></table><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><table><thead><tr><th>개념 구분</th><th>개념명</th><th>설명</th></tr></thead><tbody><tr><td><strong>1. 정의</strong></td><td>분산 시스템 (Distributed System)</td><td>네트워크로 연결된 여러 독립적인 노드들이 메시지를 주고받으며 하나의 시스템처럼 동작하는 구조.</td></tr><tr><td><strong>2. 구성 요소</strong></td><td>노드 (Node)</td><td>독립적인 실행 단위. 물리적 서버, VM, 컨테이너 등 포함.</td></tr><tr><td></td><td>네트워크 통신 (Network Communication)</td><td>노드 간 메시지 전달: RPC, REST, 메시지 큐, gRPC 등 활용.</td></tr><tr><td></td><td>미들웨어 (Middleware)</td><td>이기종 시스템 간 통신을 추상화하여 상호운용성 제공.</td></tr><tr><td><strong>3. 기본 특성</strong></td><td>확장성 (Scalability)</td><td>수평적/수직적 확장을 통해 시스템 용량 유연 조정 가능.</td></tr><tr><td></td><td>가용성 (Availability)</td><td>일부 노드 장애에도 서비스 지속 가능.</td></tr><tr><td></td><td>장애 허용성 (Fault Tolerance)</td><td>실패 감지, 복제, 페일오버로 시스템 지속성 확보.</td></tr><tr><td></td><td>일관성 (Consistency)</td><td>여러 노드에 저장된 데이터의 정합성 보장.</td></tr><tr><td></td><td>투명성 (Transparency)</td><td>분산 구조를 사용자에게 숨기고 단일 시스템처럼 보이도록 설계.</td></tr><tr><td><strong>4. 핵심 이론</strong></td><td>CAP 정리 (CAP Theorem)</td><td>일관성 (Consistency), 가용성 (Availability), 분할 허용성 (Partition Tolerance) 중 2 개만 동시 보장 가능.</td></tr><tr><td></td><td>일관성 모델 (Consistency Model)</td><td>강한/최종/인과 일관성 등 다양한 정합성 보장 수준 존재.</td></tr><tr><td></td><td>합의 알고리즘 (Consensus Algorithm)</td><td>Paxos, Raft, PBFT 등 다수 노드 간 일관된 상태 유지 기법.</td></tr><tr><td><strong>5. 데이터 처리 기법</strong></td><td>복제 (Replication)</td><td>동일 데이터를 다수 노드에 복사하여 가용성 및 성능 향상.</td></tr><tr><td></td><td>샤딩 (Sharding)</td><td>데이터 또는 작업을 노드 간에 분산 저장·처리.</td></tr><tr><td><strong>6. 처리 특성</strong></td><td>병렬성 & 동시성 (Parallelism & Concurrency)</td><td>여러 작업을 동시에 병렬 처리함으로써 처리량 증가.</td></tr><tr><td><strong>7. 아키텍처 스타일</strong></td><td>클라이언트 - 서버, P2P, 마이크로서비스 등</td><td>분산 시스템 설계 방식에 따른 다양한 아키텍처 존재.</td></tr></tbody></table><h4 id=실무-연관성>실무 연관성<a hidden class=anchor aria-hidden=true href=#실무-연관성>#</a></h4><table><thead><tr><th>도메인</th><th>관련 요소/기술</th><th>설명</th></tr></thead><tbody><tr><td><strong>클라우드 인프라</strong></td><td>AWS, GCP, Azure</td><td>대부분의 클라우드 플랫폼은 분산 시스템 위에 구축되어 있음.</td></tr><tr><td><strong>데이터베이스</strong></td><td>Cassandra, MongoDB, Google Spanner</td><td>분산 저장, 샤딩, 복제를 통한 고가용성과 확장성 제공.</td></tr><tr><td><strong>메시징 시스템</strong></td><td>Kafka, RabbitMQ, NATS</td><td>노드 간 비동기 통신 및 이벤트 전달을 위한 핵심 구성 요소.</td></tr><tr><td><strong>서비스 구조</strong></td><td>마이크로서비스, SOA, API Gateway</td><td>기능 분리를 통한 독립 배포 및 확장.</td></tr><tr><td><strong>오케스트레이션</strong></td><td>Docker, Kubernetes</td><td>컨테이너 기반의 분산 애플리케이션 배포 및 스케줄링.</td></tr><tr><td><strong>장애 대응</strong></td><td>로드밸런서, 페일오버, 헬스체크, 리더 선출</td><td>장애 허용성과 고가용성을 실현하기 위한 메커니즘.</td></tr><tr><td><strong>모니터링/로깅</strong></td><td>Prometheus, Grafana, ELK Stack</td><td>분산 시스템 상태 및 이벤트의 가시화와 추적.</td></tr><tr><td><strong>서비스 디스커버리</strong></td><td>Consul, Eureka, etcd</td><td>동적으로 위치 변경이 가능한 노드의 탐색 기능.</td></tr><tr><td><strong>분산 알고리즘</strong></td><td>Raft, Paxos, Gossip Protocol</td><td>상태 동기화 및 장애 감지 등 분산 환경의 필수 알고리즘.</td></tr></tbody></table><h3 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><table><thead><tr><th>기능 영역 (Function Area)</th><th>구체 기능 (Function / Mechanism)</th><th>수행 역할 (Role / Objective)</th></tr></thead><tbody><tr><td><strong>1. 데이터 관리</strong></td><td>데이터 샤딩 (Sharding)</td><td>데이터 저장 분산 → 확장성 확보 (Scalability)</td></tr><tr><td></td><td>데이터 복제 (Replication)</td><td>다중 노드에 데이터 복사 → 고가용성 (High Availability)</td></tr><tr><td></td><td>일관성 모델 적용 (e.g., Strong, Eventual)</td><td>데이터 정합성 유지 → 신뢰성 있는 읽기/쓰기 제공</td></tr><tr><td></td><td>분산 트랜잭션 처리 (2PC, Paxos, Raft)</td><td>다중 노드 간 정합성 보장 → 데이터 무결성 확보</td></tr><tr><td><strong>2. 통신 및 협업</strong></td><td>메시지 전달 (Message Passing, RPC, gRPC)</td><td>노드 간 작업 요청 및 협력 수행 → 시스템 구성 요소 통합</td></tr><tr><td></td><td>서비스 발견 (Service Discovery)</td><td>동적 위치 탐색 → 시스템 동적 확장 및 장애 대응</td></tr><tr><td></td><td>리더 선출 (Leader Election)</td><td>조율 및 결정권 통합 → 일관된 시스템 운영</td></tr><tr><td><strong>3. 장애 감지 및 복구</strong></td><td>하트비트 감시 (Heartbeat)</td><td>노드 장애 실시간 감지 → 신속한 장애 인식</td></tr><tr><td></td><td>자동 페일오버 (Failover)</td><td>장애 발생 시 백업 노드 전환 → 서비스 중단 최소화</td></tr><tr><td></td><td>복제 로그 리플레이 (Log Replay)</td><td>상태 복원 → 장애 전 상태로 롤백 가능</td></tr><tr><td><strong>4. 자원 관리 및 최적화</strong></td><td>로드 밸런싱 (Load Balancing)</td><td>요청 균등 분산 → 자원 활용 최적화 및 응답 지연 최소화</td></tr><tr><td></td><td>스케줄링 및 자원 할당 (Scheduling)</td><td>클러스터 자원 효율 사용 → 고성능 유지</td></tr><tr><td><strong>5. 확장성 및 투명성</strong></td><td>수평 확장 (Horizontal Scaling)</td><td>노드 추가로 처리량 증가 → 탄력적 시스템 대응</td></tr><tr><td></td><td>위치/접근/장애 투명성 제공</td><td>사용자에게 단일 시스템처럼 보이도록 추상화 → UX 향상</td></tr><tr><td><strong>6. 미들웨어 통합</strong></td><td>메시지 브로커 사용 (Kafka, RabbitMQ 등)</td><td>느슨한 결합, 비동기 처리 → 시스템 유연성 및 모듈화</td></tr><tr><td></td><td>RPC 프레임워크 활용 (gRPC 등)</td><td>인터페이스 간 통신 통합 → 상호운용성 확보</td></tr><tr><td><strong>7. 시스템 관측성 (Observability)</strong></td><td>분산 트레이싱 (OpenTelemetry, Jaeger)</td><td>요청 흐름 추적 → 성능 병목 진단</td></tr><tr><td></td><td>메트릭 수집 (Prometheus, Grafana)</td><td>시스템 상태 모니터링 → 자가 치유, 자동 확장 기반</td></tr><tr><td></td><td>로깅 및 이벤트 수집</td><td>장애 분석 및 감사 → 안정성 향상</td></tr><tr><td><strong>8. 보안 및 접근 제어</strong></td><td>인증/인가 (OAuth2, mTLS)</td><td>권한 기반 접근 통제 → 무단 접근 방지</td></tr><tr><td></td><td>데이터 암호화 (TLS, 데이터 암호화 저장)</td><td>데이터 보안 및 무결성 확보 → 규제 준수 및 안전성 보장</td></tr></tbody></table><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><ol><li><p><strong>자율성 (Autonomy)</strong></p><ul><li>각 노드는 <strong>독립적으로 실행</strong>되고, <strong>자체적으로 운영/관리</strong> 가능</li><li>시스템 운영은 <strong>중앙 제어 없이 분산된 방식</strong>으로 이루어짐</li><li>→ <strong>예시</strong>: 마이크로서비스 기반 시스템, P2P 네트워크</li></ul></li><li><p><strong>이질성 (Heterogeneity)</strong></p><ul><li>서로 다른 <strong>하드웨어</strong>, <strong>운영체제</strong>, <strong>프로그래밍 언어</strong>, <strong>네트워크 프로토콜</strong> 등이 공존 가능</li><li>미들웨어나 API 게이트웨이 등을 통해 이질적인 구성 요소 간 상호 운용성 확보</li><li>→ <strong>예시</strong>: Python 으로 구성된 서비스가 Node.js 서비스와 통신</li></ul></li><li><p><strong>확장성 & 탄력성 (Scalability & Elasticity)</strong></p><ul><li>수평 확장: <strong>노드를 추가하여 처리 성능 향상</strong></li><li>탄력성: <strong>수요 변화에 따라 자원을 자동으로 증감 (Auto-scaling)</strong></li><li>→ <strong>예시</strong>: Kubernetes HPA, AWS Auto Scaling Group</li></ul></li><li><p><strong>투명성 (Transparency)</strong></p><ul><li>사용자는 분산 구조를 인지하지 못하고 <strong>단일 시스템처럼 인식</strong></li><li>위치 투명성 (Location Transparency)<ul><li>사용자는 리소스가 물리적으로 어디에 존재하는지 알 필요가 없다. 리소스의 위치에 상관없이 동일한 방식으로 접근할 수 있어야 한다.</li><li>→ 예: <code>http://service.local/data</code> 가 실제로 어느 서버에 있는지 몰라도 사용 가능</li></ul></li><li>장애 투명성 (Failure Transparency)<ul><li>시스템에서 일부 노드나 서비스에 장애가 발생해도, 사용자는 이를 인식하지 못한다. 자동 복구나 리다이렉션을 통해 서비스는 지속적으로 제공된다.</li><li>→ 예: 한 노드 다운 시 다른 노드가 자동으로 요청을 처리</li></ul></li><li>접근/접속 투명성 (Access Transparency)<ul><li>서로 다른 접근 방식 (RPC, REST, 로컬 호출 등) 을 내부적으로 사용하더라도, 클라이언트는 동일한 방식으로 리소스에 접근할 수 있다.</li><li>→ 예: 로컬 파일이든 네트워크 파일이든 동일한 API 로 접근</li></ul></li><li>복제 투명성 (Replication Transparency)<ul><li>시스템 내에서 리소스가 여러 복제본으로 존재하더라도, 사용자 입장에서는 단일 자원처럼 보인다. 어떤 복제본이 사용되었는지는 사용자에게 보이지 않는다.</li><li>→ 예: 여러 DB 복제본 중 하나에서 읽더라도 사용자에겐 차이 없음</li></ul></li><li>동시성 투명성 (Concurrency Transparency)<ul><li>여러 사용자가 동시에 동일한 리소스에 접근해도, 시스템은 이를 적절히 조율하여 일관된 결과를 보장한다.</li><li>→ 예: 두 사용자가 같은 데이터를 수정해도 충돌 없이 처리됨</li></ul></li><li>이주/이동 투명성 (Migration Transparency)<ul><li>실행 중인 프로세스나 자원이 다른 위치로 이동하더라도, 사용자는 이를 전혀 인지할 수 없다.</li><li>→ 예: 가상 머신이나 컨테이너가 다른 서버로 이동해도 연결 유지</li></ul></li></ul></li><li><p><strong>내결함성 (Fault Tolerance)</strong></p><ul><li>일부 노드나 네트워크 장애가 발생해도 시스템 전체가 동작</li><li>장애 감지, 리더 재선출, 복제, 페일오버 등 전략 활용</li><li>→ <strong>예시</strong>: Raft 기반 리더 재선출, Cassandra 의 복제본 읽기</li></ul></li><li><p><strong>병렬성 & 동시성 (Parallelism & Concurrency)</strong></p><ul><li>다수의 노드가 <strong>동시에 작업을 수행</strong>하여 전체 처리량 (throughput) 을 높임</li><li>다중 사용자 요청을 동시에 처리하면서도 일관성 유지 필요</li><li>→ <strong>적용 기술</strong>: 비동기 메시징, 멀티스레딩, 이벤트 루프, actor model 등</li></ul></li><li><p><strong>비결정성 (Nondeterminism)</strong></p><ul><li>네트워크 지연, 패킷 손실, 메시지 순서 변경, 장애 등으로 인해 <strong>예측 불가능한 상황</strong>이 발생 가능</li><li>프로그래머는 <strong>일관성/장애 허용 설계 고려</strong> 필요</li><li>→ <strong>대응 전략</strong>: 재시도, 타임아웃, 순서 보장 메커니즘, 지연 허용 일관성 모델 등</li></ul></li><li><p><strong>부분 장애 (Partial Failure)</strong></p><ul><li>단일 장애가 아닌, 시스템 일부 컴포넌트만 실패하는 <strong>비완전 실패 모델</strong></li><li>→ 전체 시스템 복구가 아니라 <strong>부분 복구 및 격리</strong> 전략 필요</li><li>→ <strong>예시</strong>: Circuit Breaker, Bulkhead 패턴</li></ul></li><li><p><strong>모듈성 (Modularity)</strong></p><ul><li>각 구성 요소 (서비스, 노드, DB 등) 는 <strong>독립적으로 배포, 관리, 확장</strong> 가능</li><li>→ 시스템 유연성 및 테스트 용이성 향상</li></ul></li><li><p><strong>개방성 (Openness)</strong></p><ul><li>분산 시스템은 다양한 외부 시스템/서비스와 <strong>인터페이스를 통해 연동</strong> 가능</li><li>오픈 프로토콜 기반 설계 (REST, gRPC 등) 를 통해 확장 가능</li></ul></li></ol><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><h4 id=투명성-원칙-transparency>투명성 원칙 (Transparency)<a hidden class=anchor aria-hidden=true href=#투명성-원칙-transparency>#</a></h4><p>분산 시스템은 사용자에게 <strong>단일한 시스템처럼 보이도록</strong> 다양한 투명성을 제공해야 한다.</p><table><thead><tr><th>종류</th><th>설명</th></tr></thead><tbody><tr><td><strong>접근 투명성</strong></td><td>원격 자원을 로컬 자원처럼 동일한 방식으로 접근 가능해야 함</td></tr><tr><td><strong>위치 투명성</strong></td><td>자원이 물리적으로 어디에 존재하는지 숨김</td></tr><tr><td><strong>복제 투명성</strong></td><td>데이터가 복제되어 있더라도 단일 자원처럼 보이도록 보장</td></tr><tr><td><strong>장애 투명성</strong></td><td>일부 구성 요소의 실패가 사용자에게 감지되지 않음</td></tr><tr><td><strong>확장 투명성</strong></td><td>시스템 확장 시 사용자나 애플리케이션의 변경 없이 동작 지속</td></tr></tbody></table><p><strong>목적</strong>: 사용자 경험 향상, 시스템 복잡성 은닉, 인터페이스 일관성 유지</p><h4 id=개방성-원칙-openness>개방성 원칙 (Openness)<a hidden class=anchor aria-hidden=true href=#개방성-원칙-openness>#</a></h4><p>분산 시스템은 <strong>다양한 환경과 시스템이 상호작용 가능</strong>해야 하므로 개방적 구조를 가져야 함.</p><ul><li><strong>표준화된 인터페이스</strong>: REST, gRPC, GraphQL, OpenAPI 등</li><li><strong>이식성 (Portability)</strong>: 다양한 플랫폼 간의 실행 가능성 확보</li><li><strong>상호 운용성 (Interoperability)</strong>: 서로 다른 언어나 시스템 간의 원활한 통신</li></ul><p><strong>목적</strong>: 이기종 시스템 간 통합, 확장성 확보, 커뮤니티/생태계 연계</p><h4 id=확장성-원칙-scalability>확장성 원칙 (Scalability)<a hidden class=anchor aria-hidden=true href=#확장성-원칙-scalability>#</a></h4><p>분산 시스템은 <strong>성능 저하 없이 수평적 확장 (Horizontal Scaling)</strong> 을 지원해야 한다.</p><ul><li><strong>수평 확장 (Horizontal Scaling)</strong>: 노드를 추가하여 시스템 용량 증가</li><li><strong>성능 병목 최소화</strong>: 공유 자원 제거, 분산 처리 구조 설계</li><li><strong>자원 관리 최적화</strong>: 오토스케일링, 캐시 전략, 로드 밸런싱 적용</li></ul><p><strong>목적</strong>: 대규모 트래픽 및 데이터 증가에 유연하게 대응</p><h4 id=일관성-및-가용성-원칙-consistency--availability>일관성 및 가용성 원칙 (Consistency & Availability)<a hidden class=anchor aria-hidden=true href=#일관성-및-가용성-원칙-consistency--availability>#</a></h4><h5 id=cap-정리-cap-theorem>CAP 정리 (CAP Theorem)<a hidden class=anchor aria-hidden=true href=#cap-정리-cap-theorem>#</a></h5><ul><li><strong>Consistency (일관성)</strong>: 모든 노드가 동일한 데이터를 반환해야 함</li><li><strong>Availability (가용성)</strong>: 모든 요청에 응답이 있어야 함</li><li><strong>Partition Tolerance (분할 허용성)</strong>: 네트워크 분할이 발생해도 시스템은 계속 동작해야 함</li></ul><blockquote><p>네트워크 분할 상황에서는 C 또는 A 중 하나는 희생해야 한다.</p></blockquote><h5 id=base-원칙-eventually-consistent-systems>BASE 원칙 (Eventually Consistent Systems)<a hidden class=anchor aria-hidden=true href=#base-원칙-eventually-consistent-systems>#</a></h5><ul><li><strong>Basically Available</strong>: 시스템은 항상 사용 가능</li><li><strong>Soft State</strong>: 상태는 시간이 지나면서 변경 가능</li><li><strong>Eventually Consistent</strong>: 일정 시간이 지나면 모든 복제본이 일관된 상태로 수렴</li></ul><p><strong>목적</strong>: 일관성과 가용성의 트레이드오프 관리 및 설계 의사결정 명확화</p><h4 id=장애-허용-설계-원칙-fault-tolerant-design>장애 허용 설계 원칙 (Fault-Tolerant Design)<a hidden class=anchor aria-hidden=true href=#장애-허용-설계-원칙-fault-tolerant-design>#</a></h4><ul><li><strong>실패를 전제로 한 설계</strong>: 장애가 발생할 수 있음을 전제로 시스템 구성</li><li><strong>복제 (Replication)</strong>: 데이터 및 서비스 중복 배치</li><li><strong>리트라이/백오프</strong>: 실패 시 재시도 로직 및 대기 전략</li><li><strong>리더 선출 (Leader Election)</strong>: 합의 알고리즘 기반 장애 복구</li><li><strong>Circuit Breaker & Bulkhead</strong>: 장애 전파 방지 및 격리</li></ul><p><strong>목적</strong>: 시스템의 안정성과 연속성 확보</p><h3 id=주요-원리>주요 원리<a hidden class=anchor aria-hidden=true href=#주요-원리>#</a></h3><h4 id=cap-이론-cap-theorem>CAP 이론 (CAP Theorem)<a hidden class=anchor aria-hidden=true href=#cap-이론-cap-theorem>#</a></h4><p>분산 시스템에서 네트워크 분할 (Partition) 이 발생하는 경우, 세 가지 속성 중 두 가지만 동시에 보장할 수 있다는 이론:</p><ul><li><strong>Consistency (일관성)</strong>: 모든 노드가 동일한 데이터를 동시에 보여줌</li><li><strong>Availability (가용성)</strong>: 모든 요청에 대해 항상 응답을 보장</li><li><strong>Partition Tolerance (분할 허용성)</strong>: 네트워크 분할 상황에서도 시스템이 동작함</li></ul><blockquote><p>네트워크 분할 (P) 이 발생했을 때, 시스템은 <strong>Consistency</strong>와 <strong>Availability</strong> 중 하나를 포기해야 함.</p></blockquote><p><strong>실무 적용 예</strong>:</p><table><thead><tr><th>시스템 유형</th><th>보장 조합</th><th>예시</th></tr></thead><tbody><tr><td>CA 시스템</td><td>일관성 + 가용성 (분할 없음 가정)</td><td>RDBMS (단일 노드)</td></tr><tr><td>CP 시스템</td><td>일관성 + 분할 허용성</td><td>HDFS, Zookeeper, Spanner</td></tr><tr><td>AP 시스템</td><td>가용성 + 분할 허용성</td><td>Cassandra, DynamoDB, CouchDB</td></tr></tbody></table><h4 id=pacelc-이론-확장-이론>PACELC 이론 (확장 이론)<a hidden class=anchor aria-hidden=true href=#pacelc-이론-확장-이론>#</a></h4><p>CAP 이론의 확장으로, <strong>분할이 발생하지 않을 때</strong>도 시스템은 <strong>지연 시간 (Latency)</strong> 과 <strong>일관성 (Consistency)</strong> 사이에서 트레이드오프를 겪는다는 것을 설명함.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>If there is a Partition (P), then choose Availability (A) or Consistency (C),  
</span></span><span class=line><span class=cl>Else (E), choose Latency (L) or Consistency (C)
</span></span></code></pre></td></tr></table></div></div><p><strong>적용 사례</strong>:</p><table><thead><tr><th>시스템</th><th>PACELC 성향</th><th>설명</th></tr></thead><tbody><tr><td>Cassandra</td><td>PA/EL</td><td>분할 발생 시 가용성 우선, 평상시 지연 우선 (튜너블 일관성)</td></tr><tr><td>Google Spanner</td><td>PC/EC</td><td>분할 발생 시 일관성 우선, 평상시에도 일관성 우선</td></tr><tr><td>DynamoDB</td><td>PA/EL</td><td>상황에 따라 읽기/쓰기 일관성 선택 가능</td></tr></tbody></table><h4 id=일관성-모델-consistency-models>일관성 모델 (Consistency Models)<a hidden class=anchor aria-hidden=true href=#일관성-모델-consistency-models>#</a></h4><p><strong>주요 일관성 수준</strong>:</p><table><thead><tr><th>모델</th><th>정의</th><th>사용 예시</th></tr></thead><tbody><tr><td><strong>Strong Consistency</strong></td><td>모든 읽기가 항상 최신 쓰기 이후의 값을 반환</td><td>Spanner, etcd</td></tr><tr><td><strong>Linearizability</strong></td><td>강일관성 + 전체 시스템에서 단일 타임라인처럼 작동</td><td>Zookeeper, Raft 기반 시스템</td></tr><tr><td><strong>Sequential Consistency</strong></td><td>연산 순서는 유지되나 실제 시간과는 무관</td><td>일부 메모리 모델, Java memory model</td></tr><tr><td><strong>Eventual Consistency</strong></td><td>시간이 지나면 데이터가 일관된 상태로 수렴</td><td>Cassandra, DynamoDB, S3</td></tr><tr><td><strong>Causal Consistency</strong></td><td>인과 관계가 있는 연산 순서는 유지</td><td>COPS, Orchestrated CRDTs</td></tr></tbody></table><ul><li>실무에서는 Eventual 을 기반으로 <strong>" 요구 시 일관성 강화 (Tunable Consistency)"</strong> 전략이 자주 사용된다.</li></ul><h4 id=합의-알고리즘-consensus-algorithms>합의 알고리즘 (Consensus Algorithms)<a hidden class=anchor aria-hidden=true href=#합의-알고리즘-consensus-algorithms>#</a></h4><p><strong>목적</strong>:</p><ul><li>여러 노드 간 <strong>상태 동기화</strong> 및 <strong>리더 선출</strong>을 통해 <strong>정합성과 안정성</strong>을 확보하는 데 사용됨.</li></ul><table><thead><tr><th>알고리즘</th><th>특징 및 구조</th><th>사용처</th></tr></thead><tbody><tr><td><strong>Paxos</strong></td><td>이론적으로 강력하지만 구현 복잡 (기본/멀티/패스트 변형 있음)</td><td>Chubby, Microsoft Azure Fabric 등</td></tr><tr><td><strong>Raft</strong></td><td>리더 선출, 로그 복제, 안전성 구조화 → 구현 단순</td><td>etcd, Consul, NATS, CockroachDB</td></tr><tr><td><strong>PBFT</strong></td><td>비잔틴 오류 (비정상 노드) 도 허용, n ≥ 3f+1 필요</td><td>Hyperledger Fabric 등</td></tr><tr><td><strong>ZAB</strong></td><td>Zookeeper 에서 사용되는 Paxos 기반 알고리즘</td><td>Apache Zookeeper</td></tr><tr><td><strong>CRDTs</strong></td><td>수학적 구조를 활용해 충돌 없이 병합 가능한 데이터 구조</td><td>Edge 기반 저장소, Collaborative Editing</td></tr><tr><td><strong>Vector Clocks</strong></td><td>인과성 추적용 타임스탬프 모델</td><td>Dynamo, Riak, Git</td></tr></tbody></table><h4 id=핵심-시스템-원리>핵심 시스템 원리<a hidden class=anchor aria-hidden=true href=#핵심-시스템-원리>#</a></h4><table><thead><tr><th>원리</th><th>설명</th><th>예시 또는 기술</th></tr></thead><tbody><tr><td><strong>분산 처리</strong></td><td>작업을 여러 노드에 나누어 병렬/비동기 처리</td><td>Spark, Flink, Airflow DAG</td></tr><tr><td><strong>데이터 복제</strong></td><td>데이터 가용성과 내결함성을 위해 여러 노드에 복제 저장</td><td>Cassandra, Redis Sentinel</td></tr><tr><td><strong>메시징 기반 통신</strong></td><td>노드 간 데이터 전달은 비동기 메시징 기반 구조 채택</td><td>Kafka, RabbitMQ, gRPC</td></tr><tr><td><strong>장애 감지 및 복구</strong></td><td>헬스체크, 리더 재선출, 로그 복원, 리트라이 등으로 복구</td><td>K8s Probes, Raft, Circuit Breaker</td></tr><tr><td><strong>정합성 보장 구조</strong></td><td>데이터 일관성 유지를 위한 모델 및 알고리즘 적용</td><td>CRDT, Raft, 2PC</td></tr></tbody></table><h3 id=작동-원리-및-방식>작동 원리 및 방식<a hidden class=anchor aria-hidden=true href=#작동-원리-및-방식>#</a></h3><p>분산 시스템은 각 노드가 독립적으로 동작하면서, 네트워크를 통해 메시지를 주고받아 전체 시스템의 일관성과 가용성을 유지한다. 장애 발생 시 일부 노드가 복구 또는 대체되어 서비스가 지속된다.</p><pre class=mermaid>graph TB
    A[클라이언트 요청] --&gt; B[로드 밸런서]
    B --&gt; C[서버 1]
    B --&gt; D[서버 2]
    B --&gt; E[서버 N]
    
    C --&gt; F[데이터베이스 클러스터]
    D --&gt; F
    E --&gt; F
    
    F --&gt; G[마스터 DB]
    F --&gt; H[슬레이브 DB 1]
    F --&gt; I[슬레이브 DB 2]
    
    J[분산 캐시] --&gt; C
    J --&gt; D
    J --&gt; E
</pre><p><strong>작동 원리:</strong></p><ol><li><strong>요청 분산:</strong> 로드 밸런서가 클라이언트 요청을 여러 서버에 분산</li><li><strong>데이터 접근:</strong> 각 서버가 분산된 데이터베이스에 접근</li><li><strong>캐시 활용:</strong> 분산 캐시를 통해 성능 최적화</li><li><strong>장애 처리:</strong> 장애 발생 시 자동 페일오버 수행</li></ol><h4 id=메시지-흐름과-합의-과정>메시지 흐름과 합의 과정<a hidden class=anchor aria-hidden=true href=#메시지-흐름과-합의-과정>#</a></h4><pre class=mermaid>sequenceDiagram
  participant Client
  participant Leader
  participant Follower1
  participant Follower2

  Client-&gt;&gt;Leader: Write Request(value)
  Leader-&gt;&gt;Follower1: AppendLog(value)
  Leader-&gt;&gt;Follower2: AppendLog(value)
  Follower1--&gt;&gt;Leader: Ack
  Follower2--&gt;&gt;Leader: Ack
  Leader--&gt;&gt;Client: Commit Confirmation
</pre><ul><li>클라이언트가 리더에게 쓰기 요청을 전달</li><li>리더가 팔로워 노드에 로그 저장을 요청</li><li>팔로워가 ACK 응답</li><li>과반 이상 응답 시 커밋 처리 후 클라이언트 응답</li></ul><p>이 흐름은 Raft 또는 Paxos 의 핵심 섹션 (log replication, leader election, safety guarantee) 을 시각화함.</p><h3 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h3><pre class=mermaid>graph TB
    subgraph &#34;클라이언트 계층&#34;
        WEB[웹 브라우저]
        MOBILE[모바일 앱]
        API_CLIENT[API 클라이언트]
    end
    
    subgraph &#34;게이트웨이 계층&#34;
        LB[로드 밸런서]
        API_GW[API 게이트웨이]
    end
    
    subgraph &#34;서비스 계층&#34;
        USER_SVC[사용자 서비스]
        ORDER_SVC[주문 서비스]
        PAYMENT_SVC[결제 서비스]
        INVENTORY_SVC[재고 서비스]
    end
    
    subgraph &#34;데이터 계층&#34;
        USER_DB[(사용자 DB)]
        ORDER_DB[(주문 DB)]
        PAYMENT_DB[(결제 DB)]
        INVENTORY_DB[(재고 DB)]
    end
    
    subgraph &#34;인프라 계층&#34;
        CACHE[캐시 클러스터]
        MESSAGE_Q[메시지 큐]
        MONITOR[모니터링]
    end
    
    WEB --&gt; LB
    MOBILE --&gt; LB
    API_CLIENT --&gt; API_GW
    
    LB --&gt; API_GW
    API_GW --&gt; USER_SVC
    API_GW --&gt; ORDER_SVC
    API_GW --&gt; PAYMENT_SVC
    API_GW --&gt; INVENTORY_SVC
    
    USER_SVC --&gt; USER_DB
    ORDER_SVC --&gt; ORDER_DB
    PAYMENT_SVC --&gt; PAYMENT_DB
    INVENTORY_SVC --&gt; INVENTORY_DB
    
    USER_SVC --&gt; CACHE
    ORDER_SVC --&gt; MESSAGE_Q
    PAYMENT_SVC --&gt; MESSAGE_Q
    
    MONITOR --&gt; USER_SVC
    MONITOR --&gt; ORDER_SVC
    MONITOR --&gt; PAYMENT_SVC
    MONITOR --&gt; INVENTORY_SVC
</pre><h4 id=구성요소>구성요소<a hidden class=anchor aria-hidden=true href=#구성요소>#</a></h4><table><thead><tr><th>계층</th><th>구성 요소</th><th>역할/기능</th><th>대표 기술 예시</th><th>특징</th></tr></thead><tbody><tr><td>클라이언트 계층</td><td>웹/모바일/API 클라이언트</td><td>사용자 요청 생성 및 UI/UX 제공</td><td>React, Flutter, Postman, Swagger UI</td><td>요청 발신자, 다양한 플랫폼 지원</td></tr><tr><td>게이트웨이 계층</td><td>로드 밸런서</td><td>트래픽 분산, 서비스 헬스체크, 장애 발생 시 리다이렉션</td><td>NGINX, HAProxy, AWS ELB</td><td>고가용성 확보, 가중치 기반 분산</td></tr><tr><td></td><td>API 게이트웨이</td><td>인증, 라우팅, 요청/응답 변환, 로깅, 속도 제한</td><td>Kong, Apigee, Istio Gateway</td><td>경계 계층, API 관리 중심 역할</td></tr><tr><td>서비스 계층</td><td>마이크로서비스</td><td>핵심 비즈니스 로직 수행, 각 기능을 모듈화하여 독립 운영</td><td>FastAPI, Spring Boot, Node.js</td><td>독립 배포, 확장성 우수</td></tr><tr><td>데이터 계층</td><td>분산 데이터베이스</td><td>영속성 있는 데이터 저장, 읽기/쓰기 처리, 일관성/복제/샤딩</td><td>PostgreSQL, Cassandra, MongoDB</td><td>CAP 모델 기반, 구조적/비구조적 지원</td></tr><tr><td></td><td>키 - 값 캐시</td><td>자주 조회되는 데이터 캐싱, 응답 지연 최소화</td><td>Redis, Memcached</td><td>메모리 기반, TTL, 성능 최적화</td></tr><tr><td>인프라 계층</td><td>메시지 브로커</td><td>서비스 간 비동기 메시지 전달, 큐잉 처리</td><td>Kafka, RabbitMQ, NATS</td><td>느슨한 결합, 이벤트 기반 아키텍처 지원</td></tr><tr><td></td><td>모니터링/로깅</td><td>서비스 상태 수집, 경고, 메트릭/로그 분석</td><td>Prometheus, Grafana, ELK, OpenTelemetry</td><td>실시간 추적, 장애 대응 가능</td></tr><tr><td></td><td>설정 관리 / 보안 게이트웨이</td><td>서비스 설정값 분리 관리, 인증·인가 처리</td><td>Consul, Vault, SPIFFE, OPA</td><td>보안 중심 제어, 정책 기반 관리</td></tr></tbody></table><h3 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h3><table><thead><tr><th>카테고리</th><th>구현 기법</th><th>정의/구성</th><th>주요 목적 및 특징</th><th>실무 예시</th></tr></thead><tbody><tr><td><strong>1. 데이터 분산 처리</strong></td><td><strong>샤딩 (Sharding)</strong></td><td>데이터를 여러 노드에 분할 저장 (Key-range, Hash 등)</td><td>수평 확장, 부하 분산, 데이터 분리</td><td>MongoDB, Cassandra, Elasticsearch</td></tr><tr><td></td><td><strong>데이터 복제 (Replication)</strong></td><td>데이터를 다수 노드에 복사 저장 (동기/비동기)</td><td>고가용성, 장애 복원력, 읽기 확장성</td><td>Cassandra, DynamoDB, MongoDB</td></tr><tr><td></td><td><strong>CQRS + Event Sourcing</strong></td><td>읽기/쓰기 모델 분리 + 변경을 이벤트로 저장</td><td>성능 분리, 확장성, 감사 및 복구 가능</td><td>전자상거래 주문 시스템, Axon, Microsoft Azure</td></tr><tr><td><strong>2. 통신 및 메시징</strong></td><td><strong>메시지 큐 & Pub/Sub</strong></td><td>Kafka, RabbitMQ, SQS 등</td><td>비동기 처리, 느슨한 결합, 확장성</td><td>Kafka 기반 이벤트 처리, 주문 → 재고 전달</td></tr><tr><td></td><td><strong>Service Mesh & Sidecar</strong></td><td>사이드카 프록시 + 트래픽 정책 (Istio, Linkerd 등)</td><td>보안, 트래픽 관리, 관찰성 향상</td><td>Istio + Envoy in GKE, K8s 기반 서비스 간 통신</td></tr><tr><td></td><td><strong>RPC / gRPC / REST</strong></td><td>원격 호출 기반 통신 구조</td><td>동기 처리, 서비스 직접 연결</td><td>gRPC 기반 마이크로서비스 통신</td></tr><tr><td><strong>3. 트랜잭션 및 일관성 처리</strong></td><td><strong>합의 알고리즘 (Consensus)</strong></td><td>Raft, Paxos, ZAB 등</td><td>리더 선출, 일관성 유지</td><td>Zookeeper, etcd, Consul</td></tr><tr><td></td><td><strong>Saga Pattern</strong></td><td>보상 트랜잭션 기반 분산 트랜잭션</td><td>데이터 정합성, ACID 대체</td><td>주문 → 결제 → 재고 → 취소 플로우</td></tr><tr><td><strong>4. 신뢰성/복원력</strong></td><td><strong>Circuit Breaker / Retry / Timeout</strong></td><td>네트워크 실패/지연 대응 패턴</td><td>장애 격리, 사용자 경험 보호</td><td>Netflix Hystrix, Spring Cloud Resilience4J</td></tr><tr><td></td><td><strong>장애 감지 및 복구 (Failover)</strong></td><td>Heartbeat, Timeout, Leader Election</td><td>내결함성, 장애 자동 복구</td><td>Kubernetes, Consul, Zookeeper</td></tr><tr><td><strong>5. 인프라 관리 및 오케스트레이션</strong></td><td><strong>컨테이너화 & 오케스트레이션</strong></td><td>Docker + Kubernetes / Mesos / Nomad</td><td>일관된 배포 환경, 오토스케일링, 자원 격리</td><td>Kubernetes ReplicaSet, HPA, GKE</td></tr><tr><td></td><td><strong>오토스케일링 & 로드 밸런싱</strong></td><td>요청 기반 자동 확장 및 분산</td><td>성능 최적화, 트래픽 대응</td><td>AWS ALB + K8s HPA, Nginx, Envoy</td></tr><tr><td><strong>6. 이벤트 기반 설계</strong></td><td><strong>Event-Driven Architecture (EDA)</strong></td><td>이벤트 생산자/브로커/소비자 구조</td><td>실시간 반응, 느슨한 결합, 확장성</td><td>Kafka 기반 실시간 로그 처리, LinkedIn</td></tr><tr><td></td><td><strong>Domain/Integration Event 구분</strong></td><td>내부 도메인 이벤트 vs 외부 통합 이벤트</td><td>책임 분리, 확장성 강화</td><td>DDD 기반 MSA 이벤트 설계</td></tr><tr><td><strong>7. 통합 및 상호운용성</strong></td><td><strong>ESB (Enterprise Service Bus)</strong></td><td>메시지 변환, 라우팅, QoS 제어</td><td>이기종 시스템 통합, 프로토콜 브리지</td><td>Apache Camel, Mule ESB</td></tr><tr><td><strong>8. 시스템 아키텍처 패턴</strong></td><td><strong>Microservices Architecture</strong></td><td>독립적인 소형 서비스 조합</td><td>독립 배포, 팀 분리, 빠른 개발</td><td>Netflix, Amazon, Uber</td></tr><tr><td></td><td><strong>Monolith to Microservices 전환</strong></td><td>도메인 기반 분리 및 마이그레이션</td><td>점진적 전환, 리스크 완화</td><td>Spring Boot → Spring Cloud 전환 사례</td></tr></tbody></table><h2 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h2><table><thead><tr><th>카테고리</th><th>항목</th><th>설명</th><th>기여 요소 및 배경 기술</th></tr></thead><tbody><tr><td><strong>확장성</strong></td><td>수평 확장 (Horizontal Scalability)</td><td>노드 추가만으로 시스템 성능과 처리량을 선형적으로 증가시킬 수 있음</td><td>Stateless 설계, Partitioning, Auto-scaling</td></tr><tr><td></td><td>탄력성 (Elasticity)</td><td>트래픽 변동에 따라 자원을 동적으로 조절할 수 있어 유연하게 대응 가능</td><td>클라우드 오토스케일링, KEDA, HPA</td></tr><tr><td><strong>가용성/내결함성</strong></td><td>고가용성 (High Availability)</td><td>하나의 노드에 장애가 발생해도 다른 노드가 이를 대체하여 시스템 연속성 보장</td><td>이중화 구성, Failover, Leader Election</td></tr><tr><td></td><td>장애 허용성 (Fault Tolerance)</td><td>일부 노드에 장애가 발생하더라도 전체 시스템이 정상 동작하도록 설계됨</td><td>복제, 분산 합의 알고리즘 (Raft, Paxos), Retry/Backoff</td></tr><tr><td></td><td>지속 가능성 (Resilience)</td><td>시스템이 장애 또는 부하 변화에도 스스로 복원하거나 안정성을 유지할 수 있음</td><td>Self-healing, Circuit Breaker, Bulkhead 패턴 등</td></tr><tr><td><strong>성능</strong></td><td>병렬 처리 (Parallelism)</td><td>작업을 여러 노드에 분산시켜 동시에 처리함으로써 처리 속도를 극대화할 수 있음</td><td>Task 분산, Worker Pool, MapReduce 구조</td></tr><tr><td></td><td>낮은 지연 시간 (Low Latency)</td><td>사용자 가까운 노드에서 요청 처리하여 전송 지연을 줄일 수 있음</td><td>Geo-distribution, Edge Computing</td></tr><tr><td></td><td>부하 분산 (Load Balancing)</td><td>요청을 여러 노드에 고르게 분산하여 과부하를 방지하고 처리 성능을 유지함</td><td>Reverse Proxy, Load Balancer, Consistent Hashing</td></tr><tr><td><strong>유연성/운영 효율</strong></td><td>기술 유연성 (Heterogeneity)</td><td>다양한 운영체제, 프로그래밍 언어, 하드웨어 환경 간의 통합이 가능함</td><td>Polyglot Architecture, API Gateway</td></tr><tr><td></td><td>점진적 확장 및 변경 (Incremental Scalability)</td><td>일부 컴포넌트만 변경하거나 업그레이드 가능함</td><td>마이크로서비스, Canary/Blue-Green 배포</td></tr><tr><td></td><td>독립 배포 및 업그레이드</td><td>각 노드를 개별적으로 배포·운영 가능하므로 유지보수 효율 향상</td><td>Containerization, Kubernetes</td></tr><tr><td><strong>비용 효율성</strong></td><td>범용 하드웨어 활용</td><td>고성능 전용 장비 대신 저렴한 범용 서버로 고성능 시스템을 구성 가능</td><td>Commodity Hardware 기반 시스템</td></tr><tr><td></td><td>자원 활용 최적화</td><td>사용하지 않는 자원을 공유하거나 활용하여 비용을 절감함</td><td>Virtualization, Resource Pooling</td></tr><tr><td></td><td>클라우드 비용 절감</td><td>클라우드 기반 자원 사용 시 필요한 만큼만 쓰고 비용을 절감할 수 있음</td><td>Pay-as-you-go, Spot 인스턴스 활용</td></tr><tr><td><strong>지리적 분산</strong></td><td>글로벌 사용자 지원</td><td>전 세계 여러 지역에 노드를 배치하여 사용자에게 빠른 응답을 제공함</td><td>CDN, Multi-region 서비스</td></tr><tr><td></td><td>로컬 장애 대응</td><td>특정 지역의 장애가 다른 지역 서비스에 영향을 주지 않도록 설계 가능</td><td>Region Isolation, 지연 기반 라우팅</td></tr><tr><td><strong>투명성</strong></td><td>위치/접근/장애 투명성</td><td>사용자에게는 분산 시스템이 단일 시스템처럼 보이며, 복잡한 내부 구조는 감춰짐</td><td>Location Transparency, Unified Endpoint, Consistency Protocol</td></tr></tbody></table><h2 id=단점과-문제점-그리고-해결방안>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안>#</a></h2><h3 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h3><table><thead><tr><th>항목</th><th>설명</th><th>해결 전략 및 대응 기법</th></tr></thead><tbody><tr><td><strong>설계 및 운영 복잡성</strong></td><td>마이크로서비스 수 증가, 상태 분산 등으로 아키텍처 및 운영 부담 증가</td><td>IaC 기반 자동화, 도메인 단위 분할, 서비스 메시, DevOps 문화 정착</td></tr><tr><td><strong>네트워크 의존성</strong></td><td>노드 간 통신 필수 → 지연, 패킷 손실, 장애 전파 등의 위험 존재</td><td>리던던시 구성, Circuit Breaker, QoS 기반 네트워크 설계</td></tr><tr><td><strong>데이터 일관성 유지 어려움</strong></td><td>CAP 원칙에 따라 강한 일관성 - 가용성 - 분할 허용성 동시 보장이 불가능</td><td>Event Sourcing, CRDT, Saga 패턴, Tunable Consistency 활용</td></tr><tr><td><strong>보안 공격 표면 증가</strong></td><td>노드·서비스 수 증가에 따라 공격 경로 다변화</td><td>제로 트러스트, mTLS, 방화벽, 서비스 메시 기반 인증 및 암호화 적용</td></tr><tr><td><strong>디버깅 및 관찰성 부족</strong></td><td>로그 및 상태가 분산되어 있어 문제 파악이 어려움</td><td>분산 트레이싱 (Jaeger, Zipkin), 중앙 로깅 (ELK, Loki)</td></tr><tr><td><strong>운영 비용 증가</strong></td><td>복잡도 증대로 인프라/인력 비용 동반 증가</td><td>오토스케일링, 서버리스 도입, 비용 기반 리소스 할당, Cloud 비용 최적화 도구</td></tr></tbody></table><h3 id=문제점>문제점<a hidden class=anchor aria-hidden=true href=#문제점>#</a></h3><table><thead><tr><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 전략 및 기법</th></tr></thead><tbody><tr><td><strong>네트워크 분할</strong></td><td>스위치 장애, 라우팅 이슈, 패킷 손실</td><td>쿼럼 실패, 데이터 불일치, 시스템 중단</td><td>헬스 체크, RTT 분석, 패킷 드롭률 모니터링</td><td>이중화된 네트워크 경로 구성, 지연 감시</td><td>Quorum 알고리즘, 리더 재선출, Retry with Timeout</td></tr><tr><td><strong>데이터 불일치</strong></td><td>비동기 복제, Conflict, 시간차 발생</td><td>stale 데이터, 정합성 오류</td><td>버전 충돌 모니터링, Data Drift 알림</td><td>강한 일관성 설정, Conflict-free 구조 설계</td><td>Read Repair, CRDT, Anti-Entropy Sync</td></tr><tr><td><strong>스플릿 브레인 발생</strong></td><td>네트워크 단절로 인한 다중 노드 리더 상태</td><td>두 개 이상의 리더로 인한 충돌</td><td>쿼럼 로깅, 리더 선출 로그 추적</td><td>홀수 노드 수 유지, Quorum 기반 합의 로직</td><td>Paxos/Raft 기반 리더 선출 알고리즘 적용</td></tr><tr><td><strong>캐스케이딩 실패</strong></td><td>하나의 장애가 인접 서비스에 전파</td><td>전체 시스템 마비</td><td>트레이싱 및 호출 체인 분석</td><td>서킷 브레이커, 벌크헤드 패턴 적용</td><td>서비스 격리, 점진적 복구, Backpressure</td></tr><tr><td><strong>데이터 레이스 / 동시성 충돌</strong></td><td>다중 노드 동시 쓰기, 락 경합</td><td>트랜잭션 실패, 데이터 손상</td><td>Deadlock 카운터, 트랜잭션 충돌 로그 추적</td><td>락 분할, 버전 관리, 트랜잭션 격리 수준 설정</td><td>Optimistic Concurrency Control, Pessimistic Locking</td></tr><tr><td><strong>지속적인 리소스 낭비</strong></td><td>자동화 미흡, 유휴 리소스 방치</td><td>비용 급증, 자원 낭비</td><td>Cloud Cost Alerts, 리소스 사용률 모니터링</td><td>오토스케일링, 서버리스, Spot 인스턴스</td><td>VPA/HPA 적용, 멀티 테넌시 설계, 비용 기반 스케일링</td></tr><tr><td><strong>보안 취약점</strong></td><td>통신 암호화 미흡, 인증/인가 누락</td><td>데이터 유출, 무단 접근</td><td>IDS/IPS, 인증 실패 로그 분석</td><td>TLS, 최소 권한 원칙 (RBAC), 서비스 계정 분리</td><td>인증서 회전, Zero Trust, 정책 기반 접근 제어</td></tr><tr><td><strong>동기화 지연</strong></td><td>글로벌 노드 간 클럭 차이, 네트워크 지연</td><td>순서 불일치, 타임스탬프 충돌</td><td>Clock Drift 로그, 타임스탬프 기반 정렬 오류</td><td>논리 시계 (Lamport, Vector Clock) 도입</td><td>동기화 주기 조정, Conflict 해결 알고리즘 적용</td></tr><tr><td><strong>메모리 누수 및 GC 문제</strong></td><td>장기 실행 서비스, 객체 해제 실패</td><td>성능 저하, OutOfMemory</td><td>APM, 힙/스택 사용량 추적</td><td>주기적 재시작, 메모리 한도 설정</td><td>GC 튜닝, 경량 런타임 도입, 컨테이너 기반 스케줄링 적용</td></tr></tbody></table><h2 id=도전-과제>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제>#</a></h2><table><thead><tr><th>카테고리</th><th>도전 과제</th><th>주요 원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 전략</th><th>해결 전략 및 기술</th></tr></thead><tbody><tr><td><strong>1. 네트워크/통신</strong></td><td>네트워크 지연 및 불안정성</td><td>지역 간 거리, 혼잡, 라우팅 오류, 패킷 손실</td><td>서비스 응답 지연, 타임아웃 발생</td><td>RTT, TCP 재전송률, 트레이스 분석</td><td>CDN, 엣지 컴퓨팅, QoS 기반 경로 구성</td><td>백오프 전략, 타임아웃 조정, 지역 분산 배포</td></tr><tr><td></td><td>합의 지연 및 리더 장애</td><td>노드 장애, 네트워크 분할, leader 교체 지연</td><td>쓰기 지연, 일관성 저하</td><td>리더 전환 로그, 지연율, Quorum 실패 추적</td><td>Heartbeat 튜닝, 리더 사전 선출 기준 강화</td><td>Fast quorum, 리더 안정화 로직</td></tr><tr><td><strong>2. 데이터/일관성</strong></td><td>상태 불일치 (State Drift)</td><td>비동기 복제, 네트워크 장애, 버전 충돌</td><td>데이터 불일치, 트랜잭션 실패</td><td>벡터 클록, 버전 해시 비교, read-verification</td><td>CRDT, Vector Clock, Quorum Read 설정</td><td>Anti-Entropy, Read Repair, 교정 작업</td></tr><tr><td></td><td>데이터 샤딩 핫스팟</td><td>특정 키/파티션 집중 트래픽</td><td>노드 과부하, 응답 지연</td><td>파티션별 요청/응답 로그 분석</td><td>Consistent Hashing, 키 분산, 고정 슬롯</td><td>리파티셔닝, 샤드 재분배, Dynamic Partitioning</td></tr><tr><td><strong>3. 성능/자원 최적화</strong></td><td>스케일링 오류 및 자원 낭비</td><td>수동 확장, 스팟 인스턴스 미활용, 예측 실패</td><td>과소/과대 할당, 비용 낭비</td><td>리소스 사용량, AutoScaler 로그, 비용 경고</td><td>오토스케일링 (HPA/VPA), 예약 인스턴스, 서버리스</td><td>KEDA, Spot/FaaS 기반 아키텍처 전환</td></tr><tr><td></td><td>메모리/GC 이슈</td><td>비효율적인 객체 관리, GC Pause</td><td>지연 증가, 성능 저하</td><td>GC 로그, Heap/Alloc 프로파일링</td><td>JVM/Go 튜닝, 경량 런타임 적용</td><td>GC 알고리즘 변경 (G1, ZGC), 메모리 프로파일링</td></tr><tr><td></td><td>네트워크 I/O 최적화</td><td>과도한 메시지량, 직렬화 비용</td><td>전송 지연, 처리량 감소</td><td>메시지 사이즈, 직렬화 속도 측정</td><td>Snappy/LZ4 압축, Avro/Protobuf</td><td>Batch 전송, 직렬화 포맷 최적화</td></tr><tr><td><strong>4. 보안/프라이버시</strong></td><td>인증/암호화 취약점</td><td>미암호화 통신, 인증 생략, RBAC 미비</td><td>데이터 유출, 권한 오용</td><td>보안 로그, 침입 탐지 (IDS), 권한 오디팅</td><td>mTLS, 최소 권한 원칙, 서비스 계정 분리</td><td>Zero Trust, IAM 정책, 인증서 자동 순환</td></tr><tr><td></td><td>데이터 프라이버시</td><td>사용자 민감 데이터 분산 저장</td><td>법적 규제 위반, 신뢰도 하락</td><td>민감 필드 추적, 감사 로그</td><td>PII 마스킹, 암호화 저장, 접근 로깅</td><td>동형 암호화, Tokenization, 연합 학습</td></tr><tr><td><strong>5. 운영 복잡성</strong></td><td>마이크로서비스 복잡성 증가</td><td>서비스 수 증가, 의존성 과잉</td><td>배포 난이도 상승, 장애 추적 어려움</td><td>트레이싱, API 의존성 시각화</td><td>서비스 메시, API 게이트웨이, Domain 분리</td><td>관찰성 강화 (Tracing, Logging), 정책 기반 배포</td></tr><tr><td></td><td>자동화 부족</td><td>수작업 운영, 배포 일관성 부족</td><td>운영 비용 증가, 인적 오류</td><td>CI/CD 파이프라인, IaC 적용</td><td>GitOps, ArgoCD, Terraform</td><td></td></tr><tr><td></td><td>장애 대응 지연</td><td>분산 로그, 모니터링 미비</td><td>MTTR 증가, SLA 불이행</td><td>모니터링 + 알림 설정, 분산 추적 도입</td><td>Chaos Engineering, Self-healing 구성</td><td></td></tr><tr><td><strong>6. 데이터 거버넌스</strong></td><td>소유권 분산 및 정책 불일치</td><td>각 팀/서비스별로 책임 범위 불명확</td><td>품질 저하, 감사 실패</td><td>데이터 라벨링, 거버넌스 상태 대시보드</td><td>데이터 메시 아키텍처, 카탈로그화</td><td>연합 거버넌스, 중앙 정책 + 팀 자율 조합 모델</td></tr></tbody></table><h3 id=요약>요약<a hidden class=anchor aria-hidden=true href=#요약>#</a></h3><table><thead><tr><th>핵심 영역</th><th>주요 과제</th><th>핵심 대응 전략 요약</th></tr></thead><tbody><tr><td><strong>통신/지연</strong></td><td>네트워크 불안정, 리더 전환 지연</td><td>백오프 + 리트라이, Fast Quorum, 에지 분산 배포</td></tr><tr><td><strong>데이터 일관성</strong></td><td>비동기 복제, 핫스팟, 충돌</td><td>CRDT, Vector Clock, 샤딩 최적화, 리파티셔닝</td></tr><tr><td><strong>리소스 최적화</strong></td><td>자동화 부족, 스케일링 오류, 자원 낭비</td><td>오토스케일링, 서버리스, FaaS, IaC, 비용 기반 리소스 관리</td></tr><tr><td><strong>보안/규제</strong></td><td>인증 취약, 민감 데이터 유출</td><td>Zero Trust, mTLS, 동형 암호화, IAM</td></tr><tr><td><strong>운영 복잡성</strong></td><td>장애 복원력, 서비스 증가, 추적 어려움</td><td>Observability 강화 + Chaos Engineering + API 게이트웨이</td></tr><tr><td><strong>거버넌스</strong></td><td>소유권 불명확, 정책 충돌</td><td>데이터 메시, 중앙 거버넌스 + 자율 분산 모델</td></tr></tbody></table><h2 id=분류-기준에-따른-종류-및-유형>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형>#</a></h2><table><thead><tr><th>분류 기준</th><th>주요 유형</th><th>설명 및 특징</th><th>대표 예시</th></tr></thead><tbody><tr><td><strong>1. 아키텍처 구조</strong></td><td>Client–Server</td><td>중앙 서버가 요청 처리, 클라이언트는 요청 송신</td><td>전통적 웹 애플리케이션, RESTful API 서버</td></tr><tr><td></td><td>Peer-to-Peer (P2P)</td><td>모든 노드가 동등한 역할 수행, 자율 분산 구조</td><td>BitTorrent, 블록체인</td></tr><tr><td></td><td>Microservices</td><td>기능별로 서비스 분리, 독립 배포 가능, 느슨한 결합</td><td>Netflix, Amazon</td></tr><tr><td></td><td>N-Tier (3-Tier 포함)</td><td>프레젠테이션, 애플리케이션, 데이터 계층 분리</td><td>엔터프라이즈 시스템 아키텍처</td></tr><tr><td><strong>2. 통신 방식</strong></td><td>Synchronous (RPC, REST)</td><td>실시간 요청 - 응답 구조, 응답 지연에 민감</td><td>gRPC, REST API</td></tr><tr><td></td><td>Asynchronous (Messaging, Event Queue)</td><td>메시지 큐 기반, 비동기 이벤트 전달 구조</td><td>Kafka, RabbitMQ</td></tr><tr><td><strong>3. 데이터 처리 구조</strong></td><td>Replication (복제)</td><td>동일 데이터를 여러 노드에 복사하여 고가용성 확보</td><td>MongoDB, Cassandra</td></tr><tr><td></td><td>Partitioning (샤딩)</td><td>데이터를 키 기반으로 나누어 여러 노드에 저장</td><td>Cassandra, HDFS</td></tr><tr><td></td><td>Shared-Memory / Shared-Disk / Nothing</td><td>자원 공유 수준에 따라 구분: 공유 메모리/디스크/완전 독립형 구조</td><td>Shared-Disk (Oracle RAC), Shared-Nothing (Cassandra)</td></tr><tr><td><strong>4. 데이터 일관성 모델</strong></td><td>Strong Consistency</td><td>모든 노드에 대해 즉시 일관된 데이터 보장</td><td>RDBMS Cluster, Raft</td></tr><tr><td></td><td>Eventual Consistency</td><td>시간이 지나면 데이터가 수렴하며 일관성 확보 (AP 계열 시스템)</td><td>DynamoDB, Cassandra</td></tr><tr><td></td><td>Causal / Session Consistency</td><td>순서 기반 일관성, 사용자 요청 흐름 내에서는 정합성 보장</td><td>AWS S3 (Causal), Redis (Session)</td></tr><tr><td><strong>5. 확장성 및 장애 모델</strong></td><td>Horizontal Scaling (수평 확장)</td><td>노드를 추가해 시스템 확장, 고가용성 확보 가능</td><td>Kubernetes 기반 서비스, Kafka Cluster</td></tr><tr><td></td><td>Vertical Scaling (수직 확장)</td><td>단일 노드 리소스를 증가시켜 확장</td><td>단일 서버 기반 DB 확장</td></tr><tr><td></td><td>Crash Fault Tolerant (CFT)</td><td>노드 장애를 감지하고 정상 노드로 failover 가능</td><td>Raft, Zookeeper</td></tr><tr><td></td><td>Byzantine Fault Tolerant (BFT)</td><td>악의적인 노드도 감내할 수 있는 구조 (트러스트 없는 환경)</td><td>PBFT, Tendermint, 블록체인 네트워크</td></tr><tr><td><strong>6. 제어 구조</strong></td><td>Centralized</td><td>중앙 노드/관리자에 의해 전체 제어됨</td><td>Master-Slave 구조 (HDFS NameNode 등)</td></tr><tr><td></td><td>Decentralized</td><td>각 노드가 독립적으로 작동하며 상호 협력</td><td>P2P 시스템, 블록체인</td></tr><tr><td><strong>7. 컴퓨팅 목적</strong></td><td>Cluster Computing</td><td>동일 작업을 고성능 환경에서 병렬로 처리</td><td>Spark, Kubernetes Job</td></tr><tr><td></td><td>Grid Computing</td><td>다양한 위치의 자원을 묶어 이기종 작업을 병렬로 수행</td><td>BOINC, Globus Toolkit</td></tr><tr><td></td><td>Cloud Computing</td><td>자원 가상화 + 온디맨드 프로비저닝 + 종량제 모델</td><td>AWS, Azure, GCP</td></tr><tr><td><strong>8. 지리적 분포</strong></td><td>LAN 기반 분산</td><td>근거리 네트워크에서 구성된 클러스터 구조</td><td>기업 내부 전산망, 데이터센터 클러스터</td></tr><tr><td></td><td>WAN 기반 분산</td><td>전 지구적 분산 환경으로, 고지연 네트워크 기반 설계</td><td>글로벌 CDN, Multi-region 서비스</td></tr></tbody></table><h2 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>영역</th><th>고려사항/주제</th><th>설명</th><th>권장 방안</th></tr></thead><tbody><tr><td><strong>설계</strong></td><td>도메인 경계 정의 (DDD)</td><td>서비스 분할 기준이 명확하지 않으면 결합도 증가, 장애 전파 위험</td><td>바운디드 컨텍스트 기반 도메인 모델링, DDD 적용</td></tr><tr><td></td><td>데이터 일관성 모델 선택</td><td>모든 상황에서 강한 일관성은 성능과 가용성을 희생함</td><td>비즈니스 목적에 따른 강일관성/최종일관성 선택, BASE 원칙 활용</td></tr><tr><td></td><td>장애 격리 설계 (Blast Radius 축소)</td><td>단일 장애가 전체 시스템에 전파될 수 있음</td><td>서비스 독립 배포, Bulkhead, Circuit Breaker 패턴 적용</td></tr><tr><td></td><td>동적 구성/서비스 디스커버리</td><td>노드 추가/삭제 시 수동 대응은 확장성과 관리 효율 저하</td><td>Consul, Eureka, Spring Cloud Config 등 서비스 탐색 및 구성 자동화 도구 사용</td></tr><tr><td><strong>개발</strong></td><td>API 버저닝 및 변경 관리</td><td>하위 호환성 없는 API 변경은 시스템 장애를 유발할 수 있음</td><td>시맨틱 버저닝, API Gateway 통한 점진적 전환, deprecated 단계 운영</td></tr><tr><td></td><td>메시지 직렬화 포맷</td><td>JSON 은 가독성은 좋지만 성능 저하 원인이 될 수 있음</td><td>Protobuf, Avro 사용하여 스키마 강제 및 효율적 직렬화 구현</td></tr><tr><td></td><td>통신 방식 선택 (RPC vs 메시징)</td><td>실시간 응답 필요/비동기 처리 필요 여부에 따라 선택</td><td>gRPC (실시간 RPC), Kafka/RabbitMQ (비동기 이벤트 기반 통신)</td></tr><tr><td></td><td>장애 대응 패턴</td><td>실패 전파 및 연쇄 장애 발생 가능성 존재</td><td>Retry, Backoff, Timeout, Circuit Breaker, Bulkhead 패턴 적용</td></tr><tr><td><strong>운영</strong></td><td>오토스케일링 정책</td><td>고정 리소스는 피크 트래픽 대응 어려움</td><td>HPA(VPA), Kubernetes, KEDA, 리소스 기반 Autoscaling 정책 적용</td></tr><tr><td></td><td>테스트 및 배포 자동화</td><td>분산 환경에서 수동 배포는 위험도와 반복 비용 증가</td><td>CI/CD 구축, Canary, Blue/Green 배포 전략, 테스트 자동화 프레임워크 도입</td></tr><tr><td></td><td>장애 감지 및 복구</td><td>장애 지연 감지 시 SLA 위반/서비스 중단 우려</td><td>이중화 구성, Health Check + Auto Healing, Self-Healing Controller 도입</td></tr><tr><td><strong>관측성</strong></td><td>분산 트레이싱 구현</td><td>마이크로서비스 흐름 파악 어려움</td><td>Trace ID 기반 전파, Jaeger, OpenTelemetry, Zipkin 등 도입</td></tr><tr><td></td><td>로깅/메트릭 수집</td><td>분산 구조에서는 로그의 상관 관계 확인이 어려움</td><td>구조화 로그 + Correlation ID, ELK, Loki, Prometheus, Grafana</td></tr><tr><td></td><td>장애 원인 분석 및 Alerting</td><td>수많은 구성요소 중 어디서 장애가 발생했는지 파악이 어려움</td><td>SLA 기반 알림 시스템 구성, AlertManager, AIOps 적용</td></tr><tr><td><strong>보안</strong></td><td>인증/인가 체계 구축</td><td>분산 서비스 간 권한 관리 누락 시 공격 표면 확대</td><td>OAuth2.0, JWT, RBAC, API Gateway 기반 보안 정책 적용</td></tr><tr><td></td><td>통신 암호화</td><td>노드 간 트래픽 노출로 인한 보안 위협 존재</td><td>TLS, mTLS, Zero Trust Architecture, 서비스 간 Mutual TLS 적용</td></tr><tr><td></td><td>규정 준수 및 감사 로깅</td><td>금융/의료 등 규제 산업에선 민감 정보 보호가 필수</td><td>감사 로그 수집, PII 필드 마스킹, 접근 감사/추적 기능 도입</td></tr><tr><td><strong>확장성/신뢰성</strong></td><td>수평 확장 설계</td><td>단일 인스턴스 확장 한계 → 수평 확장 구조 필요</td><td>컨테이너화 (K8s), Stateless 구조, Kafka 파티셔닝 및 서비스 복제 적용</td></tr><tr><td></td><td>데이터 파티셔닝 전략</td><td>불균형한 샤드 키는 Hot Partition 유발</td><td>해시 기반 샤딩, 범위 기반 파티셔닝, 동적 재파티셔닝 설계</td></tr><tr><td></td><td>합의/리더 선출 알고리즘</td><td>리더 장애 시 전체 시스템 정지 위험 존재</td><td>Raft, Paxos, ZAB 등 합의 알고리즘 사용, 타임아웃/하트비트 튜닝 최적화</td></tr><tr><td></td><td>일관성 vs 가용성 (CAP/PACELC 고려)</td><td>시스템 전체 특성에 맞는 트레이드오프 필요</td><td>일관성 중심 (CA), 가용성 중심 (AP), 지연 고려 (PACELC) 에 따라 설계 선택</td></tr><tr><td><strong>데이터 처리</strong></td><td>캐시 계층 도입</td><td>읽기 부하 집중 시 DB 병목 가능</td><td>Redis, Memcached, CDN 활용, TTL 기반 강/약 캐시 계층 분리 설계</td></tr><tr><td></td><td>실시간 데이터 스트림 처리</td><td>배치 처리로는 지연이 과도한 시나리오 존재</td><td>Kafka + Flink/Spark Streaming, Event Sourcing 기반 비동기 파이프라인 구성</td></tr></tbody></table><h2 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h2><table><thead><tr><th>카테고리</th><th>고려 항목</th><th>주요 고려사항 및 주의점</th><th>권장 전략 및 적용 방안</th></tr></thead><tbody><tr><td><strong>성능 최적화</strong></td><td><strong>네트워크 튜닝</strong></td><td>RTT, 대역폭 병목, 연결 비용, 리전 간 통신 지연</td><td>gRPC/HTTP2, CDN/에지 배포, Keep-alive 연결 풀링, 배치 전송</td></tr><tr><td></td><td><strong>캐싱 전략</strong></td><td>캐시 무효화 복잡성, TTL 관리 문제</td><td>다층 캐싱 (Redis + CDN), TTL 정책 설계, 응답 기반 캐시 유효성 판단</td></tr><tr><td></td><td><strong>로컬화 및 인접성 최적화</strong></td><td>요청 → 응답 거리를 줄이기 위한 물리적/논리적 구조 설계</td><td>리전 분산 배포, 클라이언트 근처의 Microservice 구성</td></tr><tr><td></td><td><strong>메시지 커밋 정책</strong></td><td>동기 vs 비동기 ack 선택, 중복 수신, 성능 저하 가능성</td><td>Async Commit + 멱등성 적용, 배치 Ack, Timeout 조정</td></tr><tr><td><strong>확장성/탄력성</strong></td><td><strong>오토스케일링</strong></td><td>부하 예측 실패, 스케일 업/다운 시점 오차</td><td>HPA/VPA, KEDA 기반 이벤트 스케일링, Queue 길이 기반 확장 트리거</td></tr><tr><td></td><td><strong>데이터 파티셔닝</strong></td><td>Hot-spot, 불균형 파티션 이슈</td><td>Consistent Hashing, Dynamic Sharding, 읽기 전용 Replication</td></tr><tr><td></td><td><strong>부하 분산 (Load Balancing)</strong></td><td>트래픽 집중 지점, Failover 미비</td><td>L7/L4 로드밸런서, Zone-Aware Routing, Weighted Round-Robin</td></tr><tr><td><strong>데이터 최적화</strong></td><td><strong>샤딩/복제 전략</strong></td><td>샤드 키 설계 오류 시 불균형 발생, 리더 - 팔로워 지연</td><td>샤딩 기준 분석 기반 설계, 핫키 분산, 읽기 전용 복제본 구성</td></tr><tr><td></td><td><strong>배치 vs 스트림 처리</strong></td><td>실시간 요구와의 충돌 가능성</td><td>Kafka/Flink 기반 스트림, 필요 시 마이크로배치 (Bulk API + Window Trigger) 적용</td></tr><tr><td><strong>일관성/지속성</strong></td><td><strong>일관성 vs 성능 트레이드오프</strong></td><td>높은 일관성은 성능 저하를 동반함</td><td>Tunable Consistency, Read Replica 활용</td></tr><tr><td></td><td><strong>데이터 보존 및 TTL 정책</strong></td><td>저장소 누적 → 비용 증가, GC 부담 가능성</td><td>Kafka Log Retention 설정, S3 로 이동, TTL 관리 체계화</td></tr><tr><td><strong>비용 최적화</strong></td><td><strong>자원 활용 최적화</strong></td><td>유휴 인스턴스, 과잉 리소스 소비</td><td>스팟 인스턴스, 서버리스 FaaS, 리소스 기반 과금 구조 설계</td></tr><tr><td></td><td><strong>로깅/모니터링 과다</strong></td><td>지나친 로깅으로 I/O 병목, 비용 증가</td><td>샘플링 로깅 (1~5%), Elasticsearch Pipeline 필터, 인프라 수준 로깅 분리</td></tr><tr><td><strong>운영 효율화</strong></td><td><strong>운영 자동화 (Infra as Code)</strong></td><td>반복 작업 수작업 시 실수 증가, 배포 오차 발생</td><td>Terraform, Helm, ArgoCD, GitOps 기반 선언형 자동화</td></tr><tr><td></td><td><strong>CI/CD 및 테스트 자동화</strong></td><td>수동 배포로 인한 서비스 중단 위험</td><td>Blue-Green, Canary, Progressive Delivery</td></tr><tr><td></td><td><strong>모니터링/관찰성 강화</strong></td><td>병목 탐지 어려움, Alert Noise</td><td>분산 트레이싱 + APM, SLA 기반 알림 조건 설정, 메트릭 기반 Scaling Trigger</td></tr><tr><td><strong>메모리/처리 최적화</strong></td><td><strong>GC/메모리 누수 대응</strong></td><td>JVM/Go 환경에 따라 GC Pause 로 인한 성능 저하</td><td>JVM GC 튜닝 (G1/Parallel), Go GC 설정, 메모리 프로파일링 도구 적용</td></tr><tr><td></td><td><strong>압축 및 직렬화 포맷</strong></td><td>과도한 압축은 CPU 사용 증가</td><td>LZ4, Snappy + Avro/Protobuf 조합 사용</td></tr></tbody></table><h3 id=요약-1>요약<a hidden class=anchor aria-hidden=true href=#요약-1>#</a></h3><table><thead><tr><th>주제</th><th>전략적 선택 기준</th><th>권장 조합 기술 예시</th></tr></thead><tbody><tr><td>성능 ↔ 일관성</td><td>성능 우선 → Eventually / 일관성 우선 → Linearizable</td><td>Cassandra, DynamoDB, Spanner</td></tr><tr><td>확장성</td><td>비동기, 메시지 기반, Stateless 우선 설계</td><td>Kafka + Stateless Worker + Consumer Scaling</td></tr><tr><td>운영 자동화</td><td>선언형 IaC + 모니터링 기반 스케일링</td><td>Terraform + Prometheus + HPA</td></tr><tr><td>비용 효율</td><td>서버리스 + 에지 최적화 + 로그 샘플링</td><td>Lambda/FaaS + CloudFront + OpenTelemetry Sampling</td></tr><tr><td>관찰성과 복원력</td><td>분산 추적 + Chaos Testing 도입</td><td>Jaeger + Gremlin, Chaos Monkey</td></tr></tbody></table><h2 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h2><table><thead><tr><th>도메인/산업 분야</th><th>주요 목적</th><th>기술 스택/구성 요소</th><th>기대 효과 및 운영 이점</th></tr></thead><tbody><tr><td><strong>전자상거래</strong></td><td>대규모 주문 처리, 고가용성, 확장성 확보</td><td>Kafka, Redis, Elasticsearch, Microservices, Load Balancer, Kubernetes</td><td>트래픽 급증 대응, 실시간 이벤트 흐름 처리, 장애 격리, 24/7 운영</td></tr><tr><td><strong>금융/결제 서비스</strong></td><td>실시간 트랜잭션, 규정 준수, 일관성 보장</td><td>RabbitMQ, Kafka, Oracle RAC, PostgreSQL Cluster, Saga Pattern</td><td>초당 수십만 트랜잭션 처리, 데이터 정합성 보장, 트랜잭션 감사 및 보상 처리 시스템 구현</td></tr><tr><td><strong>미디어/스트리밍</strong></td><td>전 세계 콘텐츠 전송 최적화, 추천 시스템 처리</td><td>CDN, Redis Streams, Kafka, ML Pipeline, Distributed Cache, Edge Node</td><td>낮은 지연, 대역폭 절약, 사용자 맞춤형 콘텐츠 제공, 글로벌 동시 접속 대응</td></tr><tr><td><strong>소셜 미디어 플랫폼</strong></td><td>사용자 활동 수집 및 알림, 실시간 피드 구성</td><td>Kafka, Redis Pub/Sub, Graph DB, WebSocket, Elasticsearch</td><td>수십억 이벤트 전송, 피드 동기화, 멀티 채널 알림 동시 처리</td></tr><tr><td><strong>IoT/스마트 플랫폼</strong></td><td>대규모 센서 데이터 수집, 엣지/실시간 처리</td><td>MQTT, Apache Storm, Kafka, Azure IoT Hub, Time Series DB (InfluxDB, Prometheus)</td><td>수백만 장치 동시 연결, 저지연 데이터 수집, Edge→Cloud 데이터 파이프라인 최적화</td></tr><tr><td><strong>모바일/게임 서버</strong></td><td>글로벌 유저 처리, 실시간 이벤트 동기화</td><td>Akka Cluster, Redis, gRPC, Geo Load Balancing, Kubernetes</td><td>전 세계 사용자 분산 처리, 지역 장애 복구, 빠른 반응속도 제공</td></tr><tr><td><strong>데이터 분석/AI</strong></td><td>실시간 데이터 스트리밍, ML 추론 자동화</td><td>Kafka, Apache Flink, Spark, Hadoop, TensorFlow Serving, Airflow</td><td>대용량 실시간 분석, 추론 트리거 자동화, ETL 병렬 처리</td></tr><tr><td><strong>백오피스/배치 시스템</strong></td><td>비동기 예약 작업, 대용량 백그라운드 처리</td><td>SQS, Celery, RabbitMQ, Cron, Apache Airflow</td><td>리소스 분산, 병렬 처리, 예약 태스크 자동화</td></tr><tr><td><strong>글로벌 서비스 인프라</strong></td><td>다중 리전 운영, 고가용성, 지연 최소화</td><td>Cassandra, DynamoDB, Kubernetes, Istio, Consul, Nginx + CDN</td><td>지역 장애 격리, 분산 데이터 일관성 확보, 다중 리전 라우팅 및 페일오버 구현</td></tr><tr><td><strong>분산 파일 시스템</strong></td><td>대용량 파일 저장, 복제, 장애 복원</td><td>HDFS, Ceph, MinIO, GlusterFS</td><td>데이터 내구성 보장, 복제 기반 장애 복구, 대규모 데이터 분산 저장 구조</td></tr></tbody></table><h2 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h2><h3 id=사례-1-netflix-마이크로서비스-아키텍처>사례 1: Netflix 마이크로서비스 아키텍처<a hidden class=anchor aria-hidden=true href=#사례-1-netflix-마이크로서비스-아키텍처>#</a></h3><p><strong>시스템 구성:</strong><br>Netflix 는 700 개 이상의 마이크로서비스로 구성된 분산 시스템을 운영합니다.</p><pre class=mermaid>graph TB
    A[사용자] --&gt; B[Edge Service]
    B --&gt; C[API Gateway]
    C --&gt; D[User Service]
    C --&gt; E[Recommendation Service]
    C --&gt; F[Content Service]
    C --&gt; G[Billing Service]
    
    D --&gt; H[User Database]
    E --&gt; I[ML Models]
    F --&gt; J[Content Database]
    G --&gt; K[Payment Database]
    
    L[Eureka Service Discovery] --&gt; D
    L --&gt; E
    L --&gt; F
    L --&gt; G
    
    M[Hystrix Circuit Breaker] --&gt; D
    M --&gt; E
    M --&gt; F
    M --&gt; G
</pre><p><strong>Workflow:</strong></p><ol><li>사용자 요청이 Edge Service 를 통해 진입</li><li>API Gateway 에서 요청 라우팅 및 인증</li><li>각 마이크로서비스가 독립적으로 처리</li><li>Eureka 를 통한 서비스 발견</li><li>Hystrix 를 통한 장애 격리</li></ol><p><strong>분산 시스템의 역할:</strong></p><ul><li><strong>확장성:</strong> 개별 서비스 독립적 확장</li><li><strong>내결함성:</strong> 한 서비스 장애가 전체에 영향 없음</li><li><strong>개발 속도:</strong> 팀별 독립적 개발 및 배포</li></ul><p><strong>분산 시스템 유무에 따른 차이점:</strong></p><ul><li><strong>적용 전:</strong> 모놀리식 구조로 배포 시간 길고 확장 어려움</li><li><strong>적용 후:</strong> 빠른 배포, 선택적 확장, 장애 격리 가능</li></ul><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>  1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2>  2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3>  3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4>  4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5>  5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6>  6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7>  7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8>  8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9>  9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10> 10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11> 11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12> 12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13> 13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14> 14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15> 15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16> 16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17> 17</a>
</span><span class=lnt id=hl-5-18><a class=lnlinks href=#hl-5-18> 18</a>
</span><span class=lnt id=hl-5-19><a class=lnlinks href=#hl-5-19> 19</a>
</span><span class=lnt id=hl-5-20><a class=lnlinks href=#hl-5-20> 20</a>
</span><span class=lnt id=hl-5-21><a class=lnlinks href=#hl-5-21> 21</a>
</span><span class=lnt id=hl-5-22><a class=lnlinks href=#hl-5-22> 22</a>
</span><span class=lnt id=hl-5-23><a class=lnlinks href=#hl-5-23> 23</a>
</span><span class=lnt id=hl-5-24><a class=lnlinks href=#hl-5-24> 24</a>
</span><span class=lnt id=hl-5-25><a class=lnlinks href=#hl-5-25> 25</a>
</span><span class=lnt id=hl-5-26><a class=lnlinks href=#hl-5-26> 26</a>
</span><span class=lnt id=hl-5-27><a class=lnlinks href=#hl-5-27> 27</a>
</span><span class=lnt id=hl-5-28><a class=lnlinks href=#hl-5-28> 28</a>
</span><span class=lnt id=hl-5-29><a class=lnlinks href=#hl-5-29> 29</a>
</span><span class=lnt id=hl-5-30><a class=lnlinks href=#hl-5-30> 30</a>
</span><span class=lnt id=hl-5-31><a class=lnlinks href=#hl-5-31> 31</a>
</span><span class=lnt id=hl-5-32><a class=lnlinks href=#hl-5-32> 32</a>
</span><span class=lnt id=hl-5-33><a class=lnlinks href=#hl-5-33> 33</a>
</span><span class=lnt id=hl-5-34><a class=lnlinks href=#hl-5-34> 34</a>
</span><span class=lnt id=hl-5-35><a class=lnlinks href=#hl-5-35> 35</a>
</span><span class=lnt id=hl-5-36><a class=lnlinks href=#hl-5-36> 36</a>
</span><span class=lnt id=hl-5-37><a class=lnlinks href=#hl-5-37> 37</a>
</span><span class=lnt id=hl-5-38><a class=lnlinks href=#hl-5-38> 38</a>
</span><span class=lnt id=hl-5-39><a class=lnlinks href=#hl-5-39> 39</a>
</span><span class=lnt id=hl-5-40><a class=lnlinks href=#hl-5-40> 40</a>
</span><span class=lnt id=hl-5-41><a class=lnlinks href=#hl-5-41> 41</a>
</span><span class=lnt id=hl-5-42><a class=lnlinks href=#hl-5-42> 42</a>
</span><span class=lnt id=hl-5-43><a class=lnlinks href=#hl-5-43> 43</a>
</span><span class=lnt id=hl-5-44><a class=lnlinks href=#hl-5-44> 44</a>
</span><span class=lnt id=hl-5-45><a class=lnlinks href=#hl-5-45> 45</a>
</span><span class=lnt id=hl-5-46><a class=lnlinks href=#hl-5-46> 46</a>
</span><span class=lnt id=hl-5-47><a class=lnlinks href=#hl-5-47> 47</a>
</span><span class=lnt id=hl-5-48><a class=lnlinks href=#hl-5-48> 48</a>
</span><span class=lnt id=hl-5-49><a class=lnlinks href=#hl-5-49> 49</a>
</span><span class=lnt id=hl-5-50><a class=lnlinks href=#hl-5-50> 50</a>
</span><span class=lnt id=hl-5-51><a class=lnlinks href=#hl-5-51> 51</a>
</span><span class=lnt id=hl-5-52><a class=lnlinks href=#hl-5-52> 52</a>
</span><span class=lnt id=hl-5-53><a class=lnlinks href=#hl-5-53> 53</a>
</span><span class=lnt id=hl-5-54><a class=lnlinks href=#hl-5-54> 54</a>
</span><span class=lnt id=hl-5-55><a class=lnlinks href=#hl-5-55> 55</a>
</span><span class=lnt id=hl-5-56><a class=lnlinks href=#hl-5-56> 56</a>
</span><span class=lnt id=hl-5-57><a class=lnlinks href=#hl-5-57> 57</a>
</span><span class=lnt id=hl-5-58><a class=lnlinks href=#hl-5-58> 58</a>
</span><span class=lnt id=hl-5-59><a class=lnlinks href=#hl-5-59> 59</a>
</span><span class=lnt id=hl-5-60><a class=lnlinks href=#hl-5-60> 60</a>
</span><span class=lnt id=hl-5-61><a class=lnlinks href=#hl-5-61> 61</a>
</span><span class=lnt id=hl-5-62><a class=lnlinks href=#hl-5-62> 62</a>
</span><span class=lnt id=hl-5-63><a class=lnlinks href=#hl-5-63> 63</a>
</span><span class=lnt id=hl-5-64><a class=lnlinks href=#hl-5-64> 64</a>
</span><span class=lnt id=hl-5-65><a class=lnlinks href=#hl-5-65> 65</a>
</span><span class=lnt id=hl-5-66><a class=lnlinks href=#hl-5-66> 66</a>
</span><span class=lnt id=hl-5-67><a class=lnlinks href=#hl-5-67> 67</a>
</span><span class=lnt id=hl-5-68><a class=lnlinks href=#hl-5-68> 68</a>
</span><span class=lnt id=hl-5-69><a class=lnlinks href=#hl-5-69> 69</a>
</span><span class=lnt id=hl-5-70><a class=lnlinks href=#hl-5-70> 70</a>
</span><span class=lnt id=hl-5-71><a class=lnlinks href=#hl-5-71> 71</a>
</span><span class=lnt id=hl-5-72><a class=lnlinks href=#hl-5-72> 72</a>
</span><span class=lnt id=hl-5-73><a class=lnlinks href=#hl-5-73> 73</a>
</span><span class=lnt id=hl-5-74><a class=lnlinks href=#hl-5-74> 74</a>
</span><span class=lnt id=hl-5-75><a class=lnlinks href=#hl-5-75> 75</a>
</span><span class=lnt id=hl-5-76><a class=lnlinks href=#hl-5-76> 76</a>
</span><span class=lnt id=hl-5-77><a class=lnlinks href=#hl-5-77> 77</a>
</span><span class=lnt id=hl-5-78><a class=lnlinks href=#hl-5-78> 78</a>
</span><span class=lnt id=hl-5-79><a class=lnlinks href=#hl-5-79> 79</a>
</span><span class=lnt id=hl-5-80><a class=lnlinks href=#hl-5-80> 80</a>
</span><span class=lnt id=hl-5-81><a class=lnlinks href=#hl-5-81> 81</a>
</span><span class=lnt id=hl-5-82><a class=lnlinks href=#hl-5-82> 82</a>
</span><span class=lnt id=hl-5-83><a class=lnlinks href=#hl-5-83> 83</a>
</span><span class=lnt id=hl-5-84><a class=lnlinks href=#hl-5-84> 84</a>
</span><span class=lnt id=hl-5-85><a class=lnlinks href=#hl-5-85> 85</a>
</span><span class=lnt id=hl-5-86><a class=lnlinks href=#hl-5-86> 86</a>
</span><span class=lnt id=hl-5-87><a class=lnlinks href=#hl-5-87> 87</a>
</span><span class=lnt id=hl-5-88><a class=lnlinks href=#hl-5-88> 88</a>
</span><span class=lnt id=hl-5-89><a class=lnlinks href=#hl-5-89> 89</a>
</span><span class=lnt id=hl-5-90><a class=lnlinks href=#hl-5-90> 90</a>
</span><span class=lnt id=hl-5-91><a class=lnlinks href=#hl-5-91> 91</a>
</span><span class=lnt id=hl-5-92><a class=lnlinks href=#hl-5-92> 92</a>
</span><span class=lnt id=hl-5-93><a class=lnlinks href=#hl-5-93> 93</a>
</span><span class=lnt id=hl-5-94><a class=lnlinks href=#hl-5-94> 94</a>
</span><span class=lnt id=hl-5-95><a class=lnlinks href=#hl-5-95> 95</a>
</span><span class=lnt id=hl-5-96><a class=lnlinks href=#hl-5-96> 96</a>
</span><span class=lnt id=hl-5-97><a class=lnlinks href=#hl-5-97> 97</a>
</span><span class=lnt id=hl-5-98><a class=lnlinks href=#hl-5-98> 98</a>
</span><span class=lnt id=hl-5-99><a class=lnlinks href=#hl-5-99> 99</a>
</span><span class=lnt id=hl-5-100><a class=lnlinks href=#hl-5-100>100</a>
</span><span class=lnt id=hl-5-101><a class=lnlinks href=#hl-5-101>101</a>
</span><span class=lnt id=hl-5-102><a class=lnlinks href=#hl-5-102>102</a>
</span><span class=lnt id=hl-5-103><a class=lnlinks href=#hl-5-103>103</a>
</span><span class=lnt id=hl-5-104><a class=lnlinks href=#hl-5-104>104</a>
</span><span class=lnt id=hl-5-105><a class=lnlinks href=#hl-5-105>105</a>
</span><span class=lnt id=hl-5-106><a class=lnlinks href=#hl-5-106>106</a>
</span><span class=lnt id=hl-5-107><a class=lnlinks href=#hl-5-107>107</a>
</span><span class=lnt id=hl-5-108><a class=lnlinks href=#hl-5-108>108</a>
</span><span class=lnt id=hl-5-109><a class=lnlinks href=#hl-5-109>109</a>
</span><span class=lnt id=hl-5-110><a class=lnlinks href=#hl-5-110>110</a>
</span><span class=lnt id=hl-5-111><a class=lnlinks href=#hl-5-111>111</a>
</span><span class=lnt id=hl-5-112><a class=lnlinks href=#hl-5-112>112</a>
</span><span class=lnt id=hl-5-113><a class=lnlinks href=#hl-5-113>113</a>
</span><span class=lnt id=hl-5-114><a class=lnlinks href=#hl-5-114>114</a>
</span><span class=lnt id=hl-5-115><a class=lnlinks href=#hl-5-115>115</a>
</span><span class=lnt id=hl-5-116><a class=lnlinks href=#hl-5-116>116</a>
</span><span class=lnt id=hl-5-117><a class=lnlinks href=#hl-5-117>117</a>
</span><span class=lnt id=hl-5-118><a class=lnlinks href=#hl-5-118>118</a>
</span><span class=lnt id=hl-5-119><a class=lnlinks href=#hl-5-119>119</a>
</span><span class=lnt id=hl-5-120><a class=lnlinks href=#hl-5-120>120</a>
</span><span class=lnt id=hl-5-121><a class=lnlinks href=#hl-5-121>121</a>
</span><span class=lnt id=hl-5-122><a class=lnlinks href=#hl-5-122>122</a>
</span><span class=lnt id=hl-5-123><a class=lnlinks href=#hl-5-123>123</a>
</span><span class=lnt id=hl-5-124><a class=lnlinks href=#hl-5-124>124</a>
</span><span class=lnt id=hl-5-125><a class=lnlinks href=#hl-5-125>125</a>
</span><span class=lnt id=hl-5-126><a class=lnlinks href=#hl-5-126>126</a>
</span><span class=lnt id=hl-5-127><a class=lnlinks href=#hl-5-127>127</a>
</span><span class=lnt id=hl-5-128><a class=lnlinks href=#hl-5-128>128</a>
</span><span class=lnt id=hl-5-129><a class=lnlinks href=#hl-5-129>129</a>
</span><span class=lnt id=hl-5-130><a class=lnlinks href=#hl-5-130>130</a>
</span><span class=lnt id=hl-5-131><a class=lnlinks href=#hl-5-131>131</a>
</span><span class=lnt id=hl-5-132><a class=lnlinks href=#hl-5-132>132</a>
</span><span class=lnt id=hl-5-133><a class=lnlinks href=#hl-5-133>133</a>
</span><span class=lnt id=hl-5-134><a class=lnlinks href=#hl-5-134>134</a>
</span><span class=lnt id=hl-5-135><a class=lnlinks href=#hl-5-135>135</a>
</span><span class=lnt id=hl-5-136><a class=lnlinks href=#hl-5-136>136</a>
</span><span class=lnt id=hl-5-137><a class=lnlinks href=#hl-5-137>137</a>
</span><span class=lnt id=hl-5-138><a class=lnlinks href=#hl-5-138>138</a>
</span><span class=lnt id=hl-5-139><a class=lnlinks href=#hl-5-139>139</a>
</span><span class=lnt id=hl-5-140><a class=lnlinks href=#hl-5-140>140</a>
</span><span class=lnt id=hl-5-141><a class=lnlinks href=#hl-5-141>141</a>
</span><span class=lnt id=hl-5-142><a class=lnlinks href=#hl-5-142>142</a>
</span><span class=lnt id=hl-5-143><a class=lnlinks href=#hl-5-143>143</a>
</span><span class=lnt id=hl-5-144><a class=lnlinks href=#hl-5-144>144</a>
</span><span class=lnt id=hl-5-145><a class=lnlinks href=#hl-5-145>145</a>
</span><span class=lnt id=hl-5-146><a class=lnlinks href=#hl-5-146>146</a>
</span><span class=lnt id=hl-5-147><a class=lnlinks href=#hl-5-147>147</a>
</span><span class=lnt id=hl-5-148><a class=lnlinks href=#hl-5-148>148</a>
</span><span class=lnt id=hl-5-149><a class=lnlinks href=#hl-5-149>149</a>
</span><span class=lnt id=hl-5-150><a class=lnlinks href=#hl-5-150>150</a>
</span><span class=lnt id=hl-5-151><a class=lnlinks href=#hl-5-151>151</a>
</span><span class=lnt id=hl-5-152><a class=lnlinks href=#hl-5-152>152</a>
</span><span class=lnt id=hl-5-153><a class=lnlinks href=#hl-5-153>153</a>
</span><span class=lnt id=hl-5-154><a class=lnlinks href=#hl-5-154>154</a>
</span><span class=lnt id=hl-5-155><a class=lnlinks href=#hl-5-155>155</a>
</span><span class=lnt id=hl-5-156><a class=lnlinks href=#hl-5-156>156</a>
</span><span class=lnt id=hl-5-157><a class=lnlinks href=#hl-5-157>157</a>
</span><span class=lnt id=hl-5-158><a class=lnlinks href=#hl-5-158>158</a>
</span><span class=lnt id=hl-5-159><a class=lnlinks href=#hl-5-159>159</a>
</span><span class=lnt id=hl-5-160><a class=lnlinks href=#hl-5-160>160</a>
</span><span class=lnt id=hl-5-161><a class=lnlinks href=#hl-5-161>161</a>
</span><span class=lnt id=hl-5-162><a class=lnlinks href=#hl-5-162>162</a>
</span><span class=lnt id=hl-5-163><a class=lnlinks href=#hl-5-163>163</a>
</span><span class=lnt id=hl-5-164><a class=lnlinks href=#hl-5-164>164</a>
</span><span class=lnt id=hl-5-165><a class=lnlinks href=#hl-5-165>165</a>
</span><span class=lnt id=hl-5-166><a class=lnlinks href=#hl-5-166>166</a>
</span><span class=lnt id=hl-5-167><a class=lnlinks href=#hl-5-167>167</a>
</span><span class=lnt id=hl-5-168><a class=lnlinks href=#hl-5-168>168</a>
</span><span class=lnt id=hl-5-169><a class=lnlinks href=#hl-5-169>169</a>
</span><span class=lnt id=hl-5-170><a class=lnlinks href=#hl-5-170>170</a>
</span><span class=lnt id=hl-5-171><a class=lnlinks href=#hl-5-171>171</a>
</span><span class=lnt id=hl-5-172><a class=lnlinks href=#hl-5-172>172</a>
</span><span class=lnt id=hl-5-173><a class=lnlinks href=#hl-5-173>173</a>
</span><span class=lnt id=hl-5-174><a class=lnlinks href=#hl-5-174>174</a>
</span><span class=lnt id=hl-5-175><a class=lnlinks href=#hl-5-175>175</a>
</span><span class=lnt id=hl-5-176><a class=lnlinks href=#hl-5-176>176</a>
</span><span class=lnt id=hl-5-177><a class=lnlinks href=#hl-5-177>177</a>
</span><span class=lnt id=hl-5-178><a class=lnlinks href=#hl-5-178>178</a>
</span><span class=lnt id=hl-5-179><a class=lnlinks href=#hl-5-179>179</a>
</span><span class=lnt id=hl-5-180><a class=lnlinks href=#hl-5-180>180</a>
</span><span class=lnt id=hl-5-181><a class=lnlinks href=#hl-5-181>181</a>
</span><span class=lnt id=hl-5-182><a class=lnlinks href=#hl-5-182>182</a>
</span><span class=lnt id=hl-5-183><a class=lnlinks href=#hl-5-183>183</a>
</span><span class=lnt id=hl-5-184><a class=lnlinks href=#hl-5-184>184</a>
</span><span class=lnt id=hl-5-185><a class=lnlinks href=#hl-5-185>185</a>
</span><span class=lnt id=hl-5-186><a class=lnlinks href=#hl-5-186>186</a>
</span><span class=lnt id=hl-5-187><a class=lnlinks href=#hl-5-187>187</a>
</span><span class=lnt id=hl-5-188><a class=lnlinks href=#hl-5-188>188</a>
</span><span class=lnt id=hl-5-189><a class=lnlinks href=#hl-5-189>189</a>
</span><span class=lnt id=hl-5-190><a class=lnlinks href=#hl-5-190>190</a>
</span><span class=lnt id=hl-5-191><a class=lnlinks href=#hl-5-191>191</a>
</span><span class=lnt id=hl-5-192><a class=lnlinks href=#hl-5-192>192</a>
</span><span class=lnt id=hl-5-193><a class=lnlinks href=#hl-5-193>193</a>
</span><span class=lnt id=hl-5-194><a class=lnlinks href=#hl-5-194>194</a>
</span><span class=lnt id=hl-5-195><a class=lnlinks href=#hl-5-195>195</a>
</span><span class=lnt id=hl-5-196><a class=lnlinks href=#hl-5-196>196</a>
</span><span class=lnt id=hl-5-197><a class=lnlinks href=#hl-5-197>197</a>
</span><span class=lnt id=hl-5-198><a class=lnlinks href=#hl-5-198>198</a>
</span><span class=lnt id=hl-5-199><a class=lnlinks href=#hl-5-199>199</a>
</span><span class=lnt id=hl-5-200><a class=lnlinks href=#hl-5-200>200</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Netflix Eureka 기반 서비스 디스커버리 구현 예시</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span><span class=p>,</span> <span class=n>Dict</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ServiceRegistry</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    서비스 레지스트리: 마이크로서비스 등록 및 발견 관리
</span></span></span><span class=line><span class=cl><span class=s2>    분산 시스템에서 서비스 간 통신을 위한 핵심 컴포넌트
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>eureka_url</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>eureka_url</span> <span class=o>=</span> <span class=n>eureka_url</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>services</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># 로컬 캐시</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>register_service</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>service_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>instance_info</span><span class=p>:</span> <span class=n>Dict</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        서비스 인스턴스를 레지스트리에 등록
</span></span></span><span class=line><span class=cl><span class=s2>        - 서비스 가용성 보장을 위한 기본 기능
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>registration_data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;instance&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;instanceId&#34;</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>service_name</span><span class=si>}</span><span class=s2>-</span><span class=si>{</span><span class=n>instance_info</span><span class=p>[</span><span class=s1>&#39;port&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;hostName&#34;</span><span class=p>:</span> <span class=n>instance_info</span><span class=p>[</span><span class=s1>&#39;host&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;app&#34;</span><span class=p>:</span> <span class=n>service_name</span><span class=o>.</span><span class=n>upper</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;ipAddr&#34;</span><span class=p>:</span> <span class=n>instance_info</span><span class=p>[</span><span class=s1>&#39;ip&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;port&#34;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&#34;$&#34;</span><span class=p>:</span> <span class=n>instance_info</span><span class=p>[</span><span class=s1>&#39;port&#39;</span><span class=p>],</span> <span class=s2>&#34;@enabled&#34;</span><span class=p>:</span> <span class=s2>&#34;true&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;securePort&#34;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&#34;$&#34;</span><span class=p>:</span> <span class=mi>443</span><span class=p>,</span> <span class=s2>&#34;@enabled&#34;</span><span class=p>:</span> <span class=s2>&#34;false&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;UP&#34;</span><span class=p>,</span>  <span class=c1># 서비스 상태</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;healthCheckUrl&#34;</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&#34;http://</span><span class=si>{</span><span class=n>instance_info</span><span class=p>[</span><span class=s1>&#39;host&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>instance_info</span><span class=p>[</span><span class=s1>&#39;port&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>/health&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;statusPageUrl&#34;</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&#34;http://</span><span class=si>{</span><span class=n>instance_info</span><span class=p>[</span><span class=s1>&#39;host&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>instance_info</span><span class=p>[</span><span class=s1>&#39;port&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>/status&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>eureka_url</span><span class=si>}</span><span class=s2>/apps/</span><span class=si>{</span><span class=n>service_name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>json</span><span class=o>=</span><span class=n>registration_data</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>headers</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;Content-Type&#34;</span><span class=p>:</span> <span class=s2>&#34;application/json&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>204</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>discover_service</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>service_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Dict</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        서비스 인스턴스 목록 조회
</span></span></span><span class=line><span class=cl><span class=s2>        - 로드 밸런싱을 위한 인스턴스 정보 제공
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>eureka_url</span><span class=si>}</span><span class=s2>/apps/</span><span class=si>{</span><span class=n>service_name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>200</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>app_data</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=n>instances</span> <span class=o>=</span> <span class=n>app_data</span><span class=p>[</span><span class=s1>&#39;application&#39;</span><span class=p>][</span><span class=s1>&#39;instance&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1># 활성 인스턴스만 필터링</span>
</span></span><span class=line><span class=cl>                <span class=n>active_instances</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                    <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;host&#39;</span><span class=p>:</span> <span class=n>instance</span><span class=p>[</span><span class=s1>&#39;hostName&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;port&#39;</span><span class=p>:</span> <span class=n>instance</span><span class=p>[</span><span class=s1>&#39;port&#39;</span><span class=p>][</span><span class=s1>&#39;$&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;status&#39;</span><span class=p>:</span> <span class=n>instance</span><span class=p>[</span><span class=s1>&#39;status&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                        <span class=s1>&#39;health_check&#39;</span><span class=p>:</span> <span class=n>instance</span><span class=p>[</span><span class=s1>&#39;healthCheckUrl&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                    <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>instance</span><span class=p>[</span><span class=s1>&#39;status&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;UP&#39;</span>
</span></span><span class=line><span class=cl>                <span class=p>]</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1># 로컬 캐시 업데이트 (네트워크 장애 대비)</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>services</span><span class=p>[</span><span class=n>service_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>active_instances</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>active_instances</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=n>requests</span><span class=o>.</span><span class=n>RequestException</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 네트워크 장애 시 캐시된 데이터 반환</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>services</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>service_name</span><span class=p>,</span> <span class=p>[])</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>health_check</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>service_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        서비스 헬스 체크
</span></span></span><span class=line><span class=cl><span class=s2>        - 장애 감지 및 자동 복구를 위한 모니터링
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>instances</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>discover_service</span><span class=p>(</span><span class=n>service_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>instance</span><span class=p>[</span><span class=s1>&#39;health_check&#39;</span><span class=p>],</span> <span class=n>timeout</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>200</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>            <span class=k>except</span> <span class=n>requests</span><span class=o>.</span><span class=n>RequestException</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>continue</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>LoadBalancer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    로드 밸런서: 요청을 여러 서비스 인스턴스에 분산
</span></span></span><span class=line><span class=cl><span class=s2>    분산 시스템의 성능과 가용성 향상을 위한 핵심 기능
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>service_registry</span><span class=p>:</span> <span class=n>ServiceRegistry</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>service_registry</span> <span class=o>=</span> <span class=n>service_registry</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>round_robin_index</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_instance</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>service_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>strategy</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;round_robin&#34;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        로드 밸런싱 전략에 따른 서비스 인스턴스 선택
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>instances</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>service_registry</span><span class=o>.</span><span class=n>discover_service</span><span class=p>(</span><span class=n>service_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>instances</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;No available instances for service: </span><span class=si>{</span><span class=n>service_name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>strategy</span> <span class=o>==</span> <span class=s2>&#34;round_robin&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 라운드 로빈: 순차적으로 인스턴스 선택</span>
</span></span><span class=line><span class=cl>            <span class=n>current_index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>round_robin_index</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>service_name</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>selected_instance</span> <span class=o>=</span> <span class=n>instances</span><span class=p>[</span><span class=n>current_index</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>round_robin_index</span><span class=p>[</span><span class=n>service_name</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=n>current_index</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=o>%</span> <span class=nb>len</span><span class=p>(</span><span class=n>instances</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>strategy</span> <span class=o>==</span> <span class=s2>&#34;random&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 랜덤: 무작위 인스턴스 선택</span>
</span></span><span class=line><span class=cl>            <span class=kn>import</span> <span class=nn>random</span>
</span></span><span class=line><span class=cl>            <span class=n>selected_instance</span> <span class=o>=</span> <span class=n>random</span><span class=o>.</span><span class=n>choice</span><span class=p>(</span><span class=n>instances</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>selected_instance</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CircuitBreaker</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    회로 차단기: 장애 전파 방지를 위한 패턴
</span></span></span><span class=line><span class=cl><span class=s2>    분산 시스템의 내결함성 보장을 위한 핵심 메커니즘
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>failure_threshold</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>5</span><span class=p>,</span> <span class=n>timeout</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>60</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>failure_threshold</span> <span class=o>=</span> <span class=n>failure_threshold</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>timeout</span> <span class=o>=</span> <span class=n>timeout</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>failure_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>last_failure_time</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>state</span> <span class=o>=</span> <span class=s2>&#34;CLOSED&#34;</span>  <span class=c1># CLOSED, OPEN, HALF_OPEN</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>call</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>func</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        서비스 호출 시 회로 차단기 적용
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>state</span> <span class=o>==</span> <span class=s2>&#34;OPEN&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_should_attempt_reset</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>state</span> <span class=o>=</span> <span class=s2>&#34;HALF_OPEN&#34;</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=s2>&#34;Circuit breaker is OPEN&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>result</span> <span class=o>=</span> <span class=n>func</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_on_success</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_on_failure</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=n>e</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_on_success</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;성공 시 상태 초기화&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>failure_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>state</span> <span class=o>=</span> <span class=s2>&#34;CLOSED&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_on_failure</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;실패 시 카운터 증가 및 상태 변경&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>failure_count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>last_failure_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>failure_count</span> <span class=o>&gt;=</span> <span class=bp>self</span><span class=o>.</span><span class=n>failure_threshold</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>state</span> <span class=o>=</span> <span class=s2>&#34;OPEN&#34;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_should_attempt_reset</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;재시도 가능 여부 확인&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>(</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>last_failure_time</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=bp>self</span><span class=o>.</span><span class=n>timeout</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 사용 예시</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># 서비스 레지스트리 초기화</span>
</span></span><span class=line><span class=cl>    <span class=n>registry</span> <span class=o>=</span> <span class=n>ServiceRegistry</span><span class=p>(</span><span class=s2>&#34;http://eureka-server:8761/eureka&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 사용자 서비스 등록</span>
</span></span><span class=line><span class=cl>    <span class=n>user_service_info</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;host&#39;</span><span class=p>:</span> <span class=s1>&#39;user-service-host&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;ip&#39;</span><span class=p>:</span> <span class=s1>&#39;192.168.1.10&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;port&#39;</span><span class=p>:</span> <span class=mi>8080</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>registry</span><span class=o>.</span><span class=n>register_service</span><span class=p>(</span><span class=s2>&#34;user-service&#34;</span><span class=p>,</span> <span class=n>user_service_info</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 로드 밸런서로 서비스 인스턴스 선택</span>
</span></span><span class=line><span class=cl>    <span class=n>load_balancer</span> <span class=o>=</span> <span class=n>LoadBalancer</span><span class=p>(</span><span class=n>registry</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>instance</span> <span class=o>=</span> <span class=n>load_balancer</span><span class=o>.</span><span class=n>get_instance</span><span class=p>(</span><span class=s2>&#34;user-service&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 회로 차단기로 안전한 서비스 호출</span>
</span></span><span class=line><span class=cl>    <span class=n>circuit_breaker</span> <span class=o>=</span> <span class=n>CircuitBreaker</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>call_user_service</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;사용자 서비스 호출 함수&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>url</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;http://</span><span class=si>{</span><span class=n>instance</span><span class=p>[</span><span class=s1>&#39;host&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>instance</span><span class=p>[</span><span class=s1>&#39;port&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>/users&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=n>circuit_breaker</span><span class=o>.</span><span class=n>call</span><span class=p>(</span><span class=n>call_user_service</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Service response: </span><span class=si>{</span><span class=n>result</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Service call failed: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=사례-2-e-commerce-주문-처리-플랫폼>사례 2: E-Commerce 주문 처리 플랫폼<a hidden class=anchor aria-hidden=true href=#사례-2-e-commerce-주문-처리-플랫폼>#</a></h3><p><strong>시스템 구성</strong>:</p><pre class=mermaid>flowchart LR
  Client[유저 앱]
  Client --&gt; API[&#34;API 서버 (K8s)&#34;]
  API --&gt; Kafka[Kafka Broker]
  Kafka --&gt; OrderSvc[주문 서비스]
  Kafka --&gt; InventorySvc[재고 서비스]
  Kafka --&gt; PaymentSvc[결제 서비스]
  OrderSvc --&gt; DB1[MySQL 샤드 A]
  InventorySvc --&gt; DB2[MySQL 샤드 B]
  PaymentSvc --&gt; DB3[MySQL 샤드 C]
  Compensation[보상 서비스]
  InventorySvc --&gt; Compensation
  PaymentSvc --&gt; Compensation
</pre><p><strong>Workflow</strong>:</p><ol><li><strong>주문 요청</strong>: 클라이언트 → API 서버</li><li><strong>이벤트 발행</strong>: API 서버 → Kafka 토픽: <code>OrderCreated</code></li><li><strong>각 서비스 처리</strong>:<ul><li>Stock 확인 → Kafka <code>StockChecked</code></li><li>결제 진행 → Kafka <code>PaymentProcessed</code></li><li>주문 완료 → Kafka <code>OrderCompleted</code></li></ul></li><li><strong>실패 처리</strong>: Stock 또는 Payment 실패 시 Saga 보상 → <code>OrderCancelled</code>, <code>StockReverted</code> 등 이벤트 발행</li><li><strong>DB 업데이트</strong>: 각 샤드에 최종 상태 저장</li></ol><p><strong>시스템 효과</strong>:</p><ul><li><strong>확장성</strong>: Kafka 파티션, 샤드별 서비스 병렬 처리</li><li><strong>장애 내성</strong>: 각 서비스 독립, 실패 시 보상 로직</li><li><strong>이벤트 기반</strong>: 비동기 커플링으로 유연한 확장 가능성</li></ul><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13>13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14>14</a>
</span><span class=lnt id=hl-7-15><a class=lnlinks href=#hl-7-15>15</a>
</span><span class=lnt id=hl-7-16><a class=lnlinks href=#hl-7-16>16</a>
</span><span class=lnt id=hl-7-17><a class=lnlinks href=#hl-7-17>17</a>
</span><span class=lnt id=hl-7-18><a class=lnlinks href=#hl-7-18>18</a>
</span><span class=lnt id=hl-7-19><a class=lnlinks href=#hl-7-19>19</a>
</span><span class=lnt id=hl-7-20><a class=lnlinks href=#hl-7-20>20</a>
</span><span class=lnt id=hl-7-21><a class=lnlinks href=#hl-7-21>21</a>
</span><span class=lnt id=hl-7-22><a class=lnlinks href=#hl-7-22>22</a>
</span><span class=lnt id=hl-7-23><a class=lnlinks href=#hl-7-23>23</a>
</span><span class=lnt id=hl-7-24><a class=lnlinks href=#hl-7-24>24</a>
</span><span class=lnt id=hl-7-25><a class=lnlinks href=#hl-7-25>25</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># order_service.py</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>fastapi</span> <span class=kn>import</span> <span class=n>FastAPI</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>aiokafka</span> <span class=kn>import</span> <span class=n>AIOKafkaProducer</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>uvicorn</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>FastAPI</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>producer</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.on_event</span><span class=p>(</span><span class=s2>&#34;startup&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>start_kafka</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>global</span> <span class=n>producer</span>
</span></span><span class=line><span class=cl>    <span class=n>producer</span> <span class=o>=</span> <span class=n>AIOKafkaProducer</span><span class=p>(</span><span class=n>bootstrap_servers</span><span class=o>=</span><span class=s2>&#34;localhost:9092&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>producer</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.post</span><span class=p>(</span><span class=s2>&#34;/order&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>create_order</span><span class=p>(</span><span class=n>order</span><span class=p>:</span> <span class=nb>dict</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>producer</span><span class=o>.</span><span class=n>send_and_wait</span><span class=p>(</span><span class=s2>&#34;order-created&#34;</span><span class=p>,</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>order</span><span class=p>)</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;order received&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.on_event</span><span class=p>(</span><span class=s2>&#34;shutdown&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>stop_kafka</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>producer</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>uvicorn</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>app</span><span class=p>,</span> <span class=n>host</span><span class=o>=</span><span class=s2>&#34;0.0.0.0&#34;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>8000</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span><span class=lnt id=hl-8-15><a class=lnlinks href=#hl-8-15>15</a>
</span><span class=lnt id=hl-8-16><a class=lnlinks href=#hl-8-16>16</a>
</span><span class=lnt id=hl-8-17><a class=lnlinks href=#hl-8-17>17</a>
</span><span class=lnt id=hl-8-18><a class=lnlinks href=#hl-8-18>18</a>
</span><span class=lnt id=hl-8-19><a class=lnlinks href=#hl-8-19>19</a>
</span><span class=lnt id=hl-8-20><a class=lnlinks href=#hl-8-20>20</a>
</span><span class=lnt id=hl-8-21><a class=lnlinks href=#hl-8-21>21</a>
</span><span class=lnt id=hl-8-22><a class=lnlinks href=#hl-8-22>22</a>
</span><span class=lnt id=hl-8-23><a class=lnlinks href=#hl-8-23>23</a>
</span><span class=lnt id=hl-8-24><a class=lnlinks href=#hl-8-24>24</a>
</span><span class=lnt id=hl-8-25><a class=lnlinks href=#hl-8-25>25</a>
</span><span class=lnt id=hl-8-26><a class=lnlinks href=#hl-8-26>26</a>
</span><span class=lnt id=hl-8-27><a class=lnlinks href=#hl-8-27>27</a>
</span><span class=lnt id=hl-8-28><a class=lnlinks href=#hl-8-28>28</a>
</span><span class=lnt id=hl-8-29><a class=lnlinks href=#hl-8-29>29</a>
</span><span class=lnt id=hl-8-30><a class=lnlinks href=#hl-8-30>30</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># inventory_service.py</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>aiokafka</span> <span class=kn>import</span> <span class=n>AIOKafkaConsumer</span><span class=p>,</span> <span class=n>AIOKafkaProducer</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>consume</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>consumer</span> <span class=o>=</span> <span class=n>AIOKafkaConsumer</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;order-created&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>bootstrap_servers</span><span class=o>=</span><span class=s2>&#34;localhost:9092&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>group_id</span><span class=o>=</span><span class=s2>&#34;inventory_group&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>producer</span> <span class=o>=</span> <span class=n>AIOKafkaProducer</span><span class=p>(</span><span class=n>bootstrap_servers</span><span class=o>=</span><span class=s2>&#34;localhost:9092&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>consumer</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>producer</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>async</span> <span class=k>for</span> <span class=n>msg</span> <span class=ow>in</span> <span class=n>consumer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>order</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>msg</span><span class=o>.</span><span class=n>value</span><span class=o>.</span><span class=n>decode</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=c1># 재고 처리 로직</span>
</span></span><span class=line><span class=cl>            <span class=n>result</span> <span class=o>=</span> <span class=n>check_stock</span><span class=p>(</span><span class=n>order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>topic</span> <span class=o>=</span> <span class=s2>&#34;stock-checked&#34;</span> <span class=k>if</span> <span class=n>result</span> <span class=k>else</span> <span class=s2>&#34;stock-failed&#34;</span>
</span></span><span class=line><span class=cl>            <span class=k>await</span> <span class=n>producer</span><span class=o>.</span><span class=n>send_and_wait</span><span class=p>(</span><span class=n>topic</span><span class=p>,</span> <span class=n>msg</span><span class=o>.</span><span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=n>consumer</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=n>producer</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>check_stock</span><span class=p>(</span><span class=n>order</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># 단순 재고 로직 예시</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>consume</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><p>이 코드 예시는 FastAPI 기반 <code>Order Service</code> 에서 주문 생성 이벤트를 Kafka 에 발행하고, <code>Inventory Service</code> 가 이를 컨슈밍하여 재고 확인 후 이벤트를 재발행하는 EDA 기반 분산 시스템의 단순 구현.</p><h3 id=사례-3-netflix-스트리밍-플랫폼>사례 3: Netflix 스트리밍 플랫폼<a hidden class=anchor aria-hidden=true href=#사례-3-netflix-스트리밍-플랫폼>#</a></h3><p><strong>시스템 구성</strong>:<br>Netflix 는 2008 년 데이터베이스 장애를 계기로 모놀리식 아키텍처에서 마이크로서비스로 전환했다. 현재 700 개 이상의 마이크로서비스가 AWS 클라우드에서 운영되고 있다.</p><pre class=mermaid>graph TB
    subgraph &#34;클라이언트&#34;
        CLIENT[스마트TV/모바일/웹]
    end
    
    subgraph &#34;AWS 클라우드&#34;
        subgraph &#34;API 게이트웨이&#34;
            ZUUL[Zuul Gateway]
        end
        
        subgraph &#34;마이크로서비스&#34;
            USER[User Service]
            RECOM[Recommendation Service]
            VIEW[Viewing Service]
            BILLING[Billing Service]
        end
        
        subgraph &#34;데이터 저장&#34;
            CASSANDRA[(Cassandra)]
            MYSQL[(MySQL)]
            ELASTIC[(Elasticsearch)]
        end
        
        subgraph &#34;메시징&#34;
            KAFKA[Apache Kafka]
        end
        
        subgraph &#34;캐싱&#34;
            EVcache[EVCache]
        end
        
        subgraph &#34;CDN&#34;
            OPENCONNECT[Open Connect CDN]
        end
    end
    
    CLIENT --&gt; ZUUL
    ZUUL --&gt; USER
    ZUUL --&gt; RECOM
    ZUUL --&gt; VIEW
    ZUUL --&gt; BILLING
    
    USER --&gt; MYSQL
    RECOM --&gt; CASSANDRA
    VIEW --&gt; CASSANDRA
    BILLING --&gt; MYSQL
    
    USER --&gt; EVcache
    RECOM --&gt; EVcache
    
    VIEW --&gt; KAFKA
    RECOM --&gt; KAFKA
    
    RECOM --&gt; ELASTIC
    
    CLIENT --&gt; OPENCONNECT
</pre><p><strong>Workflow</strong>:</p><ol><li>사용자가 Netflix 앱을 통해 접속</li><li>Zuul API Gateway 가 요청을 적절한 마이크로서비스로 라우팅</li><li>User Service 가 인증 및 사용자 프로필 처리</li><li>Recommendation Service 가 개인화된 콘텐츠 추천 생성</li><li>Viewing Service 가 시청 기록 및 재생 위치 관리</li><li>Open Connect CDN 이 비디오 콘텐츠를 사용자에게 직접 전송</li></ol><p><strong>역할 및 특징</strong>:</p><ul><li><strong>확장성</strong>: 개별 서비스의 독립적 스케일링으로 트래픽 급증 대응</li><li><strong>가용성</strong>: 서킷 브레이커 패턴으로 장애 전파 방지</li><li><strong>성능</strong>: 전 세계 CDN 과 캐싱을 통한 빠른 콘텐츠 전송</li><li><strong>혁신</strong>: A/B 테스트를 통한 지속적 기능 개선</li></ul><p><strong>구현 예시</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1>  1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2>  2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3>  3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4>  4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5>  5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6>  6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7>  7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8>  8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9>  9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10> 10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11> 11</a>
</span><span class=lnt id=hl-10-12><a class=lnlinks href=#hl-10-12> 12</a>
</span><span class=lnt id=hl-10-13><a class=lnlinks href=#hl-10-13> 13</a>
</span><span class=lnt id=hl-10-14><a class=lnlinks href=#hl-10-14> 14</a>
</span><span class=lnt id=hl-10-15><a class=lnlinks href=#hl-10-15> 15</a>
</span><span class=lnt id=hl-10-16><a class=lnlinks href=#hl-10-16> 16</a>
</span><span class=lnt id=hl-10-17><a class=lnlinks href=#hl-10-17> 17</a>
</span><span class=lnt id=hl-10-18><a class=lnlinks href=#hl-10-18> 18</a>
</span><span class=lnt id=hl-10-19><a class=lnlinks href=#hl-10-19> 19</a>
</span><span class=lnt id=hl-10-20><a class=lnlinks href=#hl-10-20> 20</a>
</span><span class=lnt id=hl-10-21><a class=lnlinks href=#hl-10-21> 21</a>
</span><span class=lnt id=hl-10-22><a class=lnlinks href=#hl-10-22> 22</a>
</span><span class=lnt id=hl-10-23><a class=lnlinks href=#hl-10-23> 23</a>
</span><span class=lnt id=hl-10-24><a class=lnlinks href=#hl-10-24> 24</a>
</span><span class=lnt id=hl-10-25><a class=lnlinks href=#hl-10-25> 25</a>
</span><span class=lnt id=hl-10-26><a class=lnlinks href=#hl-10-26> 26</a>
</span><span class=lnt id=hl-10-27><a class=lnlinks href=#hl-10-27> 27</a>
</span><span class=lnt id=hl-10-28><a class=lnlinks href=#hl-10-28> 28</a>
</span><span class=lnt id=hl-10-29><a class=lnlinks href=#hl-10-29> 29</a>
</span><span class=lnt id=hl-10-30><a class=lnlinks href=#hl-10-30> 30</a>
</span><span class=lnt id=hl-10-31><a class=lnlinks href=#hl-10-31> 31</a>
</span><span class=lnt id=hl-10-32><a class=lnlinks href=#hl-10-32> 32</a>
</span><span class=lnt id=hl-10-33><a class=lnlinks href=#hl-10-33> 33</a>
</span><span class=lnt id=hl-10-34><a class=lnlinks href=#hl-10-34> 34</a>
</span><span class=lnt id=hl-10-35><a class=lnlinks href=#hl-10-35> 35</a>
</span><span class=lnt id=hl-10-36><a class=lnlinks href=#hl-10-36> 36</a>
</span><span class=lnt id=hl-10-37><a class=lnlinks href=#hl-10-37> 37</a>
</span><span class=lnt id=hl-10-38><a class=lnlinks href=#hl-10-38> 38</a>
</span><span class=lnt id=hl-10-39><a class=lnlinks href=#hl-10-39> 39</a>
</span><span class=lnt id=hl-10-40><a class=lnlinks href=#hl-10-40> 40</a>
</span><span class=lnt id=hl-10-41><a class=lnlinks href=#hl-10-41> 41</a>
</span><span class=lnt id=hl-10-42><a class=lnlinks href=#hl-10-42> 42</a>
</span><span class=lnt id=hl-10-43><a class=lnlinks href=#hl-10-43> 43</a>
</span><span class=lnt id=hl-10-44><a class=lnlinks href=#hl-10-44> 44</a>
</span><span class=lnt id=hl-10-45><a class=lnlinks href=#hl-10-45> 45</a>
</span><span class=lnt id=hl-10-46><a class=lnlinks href=#hl-10-46> 46</a>
</span><span class=lnt id=hl-10-47><a class=lnlinks href=#hl-10-47> 47</a>
</span><span class=lnt id=hl-10-48><a class=lnlinks href=#hl-10-48> 48</a>
</span><span class=lnt id=hl-10-49><a class=lnlinks href=#hl-10-49> 49</a>
</span><span class=lnt id=hl-10-50><a class=lnlinks href=#hl-10-50> 50</a>
</span><span class=lnt id=hl-10-51><a class=lnlinks href=#hl-10-51> 51</a>
</span><span class=lnt id=hl-10-52><a class=lnlinks href=#hl-10-52> 52</a>
</span><span class=lnt id=hl-10-53><a class=lnlinks href=#hl-10-53> 53</a>
</span><span class=lnt id=hl-10-54><a class=lnlinks href=#hl-10-54> 54</a>
</span><span class=lnt id=hl-10-55><a class=lnlinks href=#hl-10-55> 55</a>
</span><span class=lnt id=hl-10-56><a class=lnlinks href=#hl-10-56> 56</a>
</span><span class=lnt id=hl-10-57><a class=lnlinks href=#hl-10-57> 57</a>
</span><span class=lnt id=hl-10-58><a class=lnlinks href=#hl-10-58> 58</a>
</span><span class=lnt id=hl-10-59><a class=lnlinks href=#hl-10-59> 59</a>
</span><span class=lnt id=hl-10-60><a class=lnlinks href=#hl-10-60> 60</a>
</span><span class=lnt id=hl-10-61><a class=lnlinks href=#hl-10-61> 61</a>
</span><span class=lnt id=hl-10-62><a class=lnlinks href=#hl-10-62> 62</a>
</span><span class=lnt id=hl-10-63><a class=lnlinks href=#hl-10-63> 63</a>
</span><span class=lnt id=hl-10-64><a class=lnlinks href=#hl-10-64> 64</a>
</span><span class=lnt id=hl-10-65><a class=lnlinks href=#hl-10-65> 65</a>
</span><span class=lnt id=hl-10-66><a class=lnlinks href=#hl-10-66> 66</a>
</span><span class=lnt id=hl-10-67><a class=lnlinks href=#hl-10-67> 67</a>
</span><span class=lnt id=hl-10-68><a class=lnlinks href=#hl-10-68> 68</a>
</span><span class=lnt id=hl-10-69><a class=lnlinks href=#hl-10-69> 69</a>
</span><span class=lnt id=hl-10-70><a class=lnlinks href=#hl-10-70> 70</a>
</span><span class=lnt id=hl-10-71><a class=lnlinks href=#hl-10-71> 71</a>
</span><span class=lnt id=hl-10-72><a class=lnlinks href=#hl-10-72> 72</a>
</span><span class=lnt id=hl-10-73><a class=lnlinks href=#hl-10-73> 73</a>
</span><span class=lnt id=hl-10-74><a class=lnlinks href=#hl-10-74> 74</a>
</span><span class=lnt id=hl-10-75><a class=lnlinks href=#hl-10-75> 75</a>
</span><span class=lnt id=hl-10-76><a class=lnlinks href=#hl-10-76> 76</a>
</span><span class=lnt id=hl-10-77><a class=lnlinks href=#hl-10-77> 77</a>
</span><span class=lnt id=hl-10-78><a class=lnlinks href=#hl-10-78> 78</a>
</span><span class=lnt id=hl-10-79><a class=lnlinks href=#hl-10-79> 79</a>
</span><span class=lnt id=hl-10-80><a class=lnlinks href=#hl-10-80> 80</a>
</span><span class=lnt id=hl-10-81><a class=lnlinks href=#hl-10-81> 81</a>
</span><span class=lnt id=hl-10-82><a class=lnlinks href=#hl-10-82> 82</a>
</span><span class=lnt id=hl-10-83><a class=lnlinks href=#hl-10-83> 83</a>
</span><span class=lnt id=hl-10-84><a class=lnlinks href=#hl-10-84> 84</a>
</span><span class=lnt id=hl-10-85><a class=lnlinks href=#hl-10-85> 85</a>
</span><span class=lnt id=hl-10-86><a class=lnlinks href=#hl-10-86> 86</a>
</span><span class=lnt id=hl-10-87><a class=lnlinks href=#hl-10-87> 87</a>
</span><span class=lnt id=hl-10-88><a class=lnlinks href=#hl-10-88> 88</a>
</span><span class=lnt id=hl-10-89><a class=lnlinks href=#hl-10-89> 89</a>
</span><span class=lnt id=hl-10-90><a class=lnlinks href=#hl-10-90> 90</a>
</span><span class=lnt id=hl-10-91><a class=lnlinks href=#hl-10-91> 91</a>
</span><span class=lnt id=hl-10-92><a class=lnlinks href=#hl-10-92> 92</a>
</span><span class=lnt id=hl-10-93><a class=lnlinks href=#hl-10-93> 93</a>
</span><span class=lnt id=hl-10-94><a class=lnlinks href=#hl-10-94> 94</a>
</span><span class=lnt id=hl-10-95><a class=lnlinks href=#hl-10-95> 95</a>
</span><span class=lnt id=hl-10-96><a class=lnlinks href=#hl-10-96> 96</a>
</span><span class=lnt id=hl-10-97><a class=lnlinks href=#hl-10-97> 97</a>
</span><span class=lnt id=hl-10-98><a class=lnlinks href=#hl-10-98> 98</a>
</span><span class=lnt id=hl-10-99><a class=lnlinks href=#hl-10-99> 99</a>
</span><span class=lnt id=hl-10-100><a class=lnlinks href=#hl-10-100>100</a>
</span><span class=lnt id=hl-10-101><a class=lnlinks href=#hl-10-101>101</a>
</span><span class=lnt id=hl-10-102><a class=lnlinks href=#hl-10-102>102</a>
</span><span class=lnt id=hl-10-103><a class=lnlinks href=#hl-10-103>103</a>
</span><span class=lnt id=hl-10-104><a class=lnlinks href=#hl-10-104>104</a>
</span><span class=lnt id=hl-10-105><a class=lnlinks href=#hl-10-105>105</a>
</span><span class=lnt id=hl-10-106><a class=lnlinks href=#hl-10-106>106</a>
</span><span class=lnt id=hl-10-107><a class=lnlinks href=#hl-10-107>107</a>
</span><span class=lnt id=hl-10-108><a class=lnlinks href=#hl-10-108>108</a>
</span><span class=lnt id=hl-10-109><a class=lnlinks href=#hl-10-109>109</a>
</span><span class=lnt id=hl-10-110><a class=lnlinks href=#hl-10-110>110</a>
</span><span class=lnt id=hl-10-111><a class=lnlinks href=#hl-10-111>111</a>
</span><span class=lnt id=hl-10-112><a class=lnlinks href=#hl-10-112>112</a>
</span><span class=lnt id=hl-10-113><a class=lnlinks href=#hl-10-113>113</a>
</span><span class=lnt id=hl-10-114><a class=lnlinks href=#hl-10-114>114</a>
</span><span class=lnt id=hl-10-115><a class=lnlinks href=#hl-10-115>115</a>
</span><span class=lnt id=hl-10-116><a class=lnlinks href=#hl-10-116>116</a>
</span><span class=lnt id=hl-10-117><a class=lnlinks href=#hl-10-117>117</a>
</span><span class=lnt id=hl-10-118><a class=lnlinks href=#hl-10-118>118</a>
</span><span class=lnt id=hl-10-119><a class=lnlinks href=#hl-10-119>119</a>
</span><span class=lnt id=hl-10-120><a class=lnlinks href=#hl-10-120>120</a>
</span><span class=lnt id=hl-10-121><a class=lnlinks href=#hl-10-121>121</a>
</span><span class=lnt id=hl-10-122><a class=lnlinks href=#hl-10-122>122</a>
</span><span class=lnt id=hl-10-123><a class=lnlinks href=#hl-10-123>123</a>
</span><span class=lnt id=hl-10-124><a class=lnlinks href=#hl-10-124>124</a>
</span><span class=lnt id=hl-10-125><a class=lnlinks href=#hl-10-125>125</a>
</span><span class=lnt id=hl-10-126><a class=lnlinks href=#hl-10-126>126</a>
</span><span class=lnt id=hl-10-127><a class=lnlinks href=#hl-10-127>127</a>
</span><span class=lnt id=hl-10-128><a class=lnlinks href=#hl-10-128>128</a>
</span><span class=lnt id=hl-10-129><a class=lnlinks href=#hl-10-129>129</a>
</span><span class=lnt id=hl-10-130><a class=lnlinks href=#hl-10-130>130</a>
</span><span class=lnt id=hl-10-131><a class=lnlinks href=#hl-10-131>131</a>
</span><span class=lnt id=hl-10-132><a class=lnlinks href=#hl-10-132>132</a>
</span><span class=lnt id=hl-10-133><a class=lnlinks href=#hl-10-133>133</a>
</span><span class=lnt id=hl-10-134><a class=lnlinks href=#hl-10-134>134</a>
</span><span class=lnt id=hl-10-135><a class=lnlinks href=#hl-10-135>135</a>
</span><span class=lnt id=hl-10-136><a class=lnlinks href=#hl-10-136>136</a>
</span><span class=lnt id=hl-10-137><a class=lnlinks href=#hl-10-137>137</a>
</span><span class=lnt id=hl-10-138><a class=lnlinks href=#hl-10-138>138</a>
</span><span class=lnt id=hl-10-139><a class=lnlinks href=#hl-10-139>139</a>
</span><span class=lnt id=hl-10-140><a class=lnlinks href=#hl-10-140>140</a>
</span><span class=lnt id=hl-10-141><a class=lnlinks href=#hl-10-141>141</a>
</span><span class=lnt id=hl-10-142><a class=lnlinks href=#hl-10-142>142</a>
</span><span class=lnt id=hl-10-143><a class=lnlinks href=#hl-10-143>143</a>
</span><span class=lnt id=hl-10-144><a class=lnlinks href=#hl-10-144>144</a>
</span><span class=lnt id=hl-10-145><a class=lnlinks href=#hl-10-145>145</a>
</span><span class=lnt id=hl-10-146><a class=lnlinks href=#hl-10-146>146</a>
</span><span class=lnt id=hl-10-147><a class=lnlinks href=#hl-10-147>147</a>
</span><span class=lnt id=hl-10-148><a class=lnlinks href=#hl-10-148>148</a>
</span><span class=lnt id=hl-10-149><a class=lnlinks href=#hl-10-149>149</a>
</span><span class=lnt id=hl-10-150><a class=lnlinks href=#hl-10-150>150</a>
</span><span class=lnt id=hl-10-151><a class=lnlinks href=#hl-10-151>151</a>
</span><span class=lnt id=hl-10-152><a class=lnlinks href=#hl-10-152>152</a>
</span><span class=lnt id=hl-10-153><a class=lnlinks href=#hl-10-153>153</a>
</span><span class=lnt id=hl-10-154><a class=lnlinks href=#hl-10-154>154</a>
</span><span class=lnt id=hl-10-155><a class=lnlinks href=#hl-10-155>155</a>
</span><span class=lnt id=hl-10-156><a class=lnlinks href=#hl-10-156>156</a>
</span><span class=lnt id=hl-10-157><a class=lnlinks href=#hl-10-157>157</a>
</span><span class=lnt id=hl-10-158><a class=lnlinks href=#hl-10-158>158</a>
</span><span class=lnt id=hl-10-159><a class=lnlinks href=#hl-10-159>159</a>
</span><span class=lnt id=hl-10-160><a class=lnlinks href=#hl-10-160>160</a>
</span><span class=lnt id=hl-10-161><a class=lnlinks href=#hl-10-161>161</a>
</span><span class=lnt id=hl-10-162><a class=lnlinks href=#hl-10-162>162</a>
</span><span class=lnt id=hl-10-163><a class=lnlinks href=#hl-10-163>163</a>
</span><span class=lnt id=hl-10-164><a class=lnlinks href=#hl-10-164>164</a>
</span><span class=lnt id=hl-10-165><a class=lnlinks href=#hl-10-165>165</a>
</span><span class=lnt id=hl-10-166><a class=lnlinks href=#hl-10-166>166</a>
</span><span class=lnt id=hl-10-167><a class=lnlinks href=#hl-10-167>167</a>
</span><span class=lnt id=hl-10-168><a class=lnlinks href=#hl-10-168>168</a>
</span><span class=lnt id=hl-10-169><a class=lnlinks href=#hl-10-169>169</a>
</span><span class=lnt id=hl-10-170><a class=lnlinks href=#hl-10-170>170</a>
</span><span class=lnt id=hl-10-171><a class=lnlinks href=#hl-10-171>171</a>
</span><span class=lnt id=hl-10-172><a class=lnlinks href=#hl-10-172>172</a>
</span><span class=lnt id=hl-10-173><a class=lnlinks href=#hl-10-173>173</a>
</span><span class=lnt id=hl-10-174><a class=lnlinks href=#hl-10-174>174</a>
</span><span class=lnt id=hl-10-175><a class=lnlinks href=#hl-10-175>175</a>
</span><span class=lnt id=hl-10-176><a class=lnlinks href=#hl-10-176>176</a>
</span><span class=lnt id=hl-10-177><a class=lnlinks href=#hl-10-177>177</a>
</span><span class=lnt id=hl-10-178><a class=lnlinks href=#hl-10-178>178</a>
</span><span class=lnt id=hl-10-179><a class=lnlinks href=#hl-10-179>179</a>
</span><span class=lnt id=hl-10-180><a class=lnlinks href=#hl-10-180>180</a>
</span><span class=lnt id=hl-10-181><a class=lnlinks href=#hl-10-181>181</a>
</span><span class=lnt id=hl-10-182><a class=lnlinks href=#hl-10-182>182</a>
</span><span class=lnt id=hl-10-183><a class=lnlinks href=#hl-10-183>183</a>
</span><span class=lnt id=hl-10-184><a class=lnlinks href=#hl-10-184>184</a>
</span><span class=lnt id=hl-10-185><a class=lnlinks href=#hl-10-185>185</a>
</span><span class=lnt id=hl-10-186><a class=lnlinks href=#hl-10-186>186</a>
</span><span class=lnt id=hl-10-187><a class=lnlinks href=#hl-10-187>187</a>
</span><span class=lnt id=hl-10-188><a class=lnlinks href=#hl-10-188>188</a>
</span><span class=lnt id=hl-10-189><a class=lnlinks href=#hl-10-189>189</a>
</span><span class=lnt id=hl-10-190><a class=lnlinks href=#hl-10-190>190</a>
</span><span class=lnt id=hl-10-191><a class=lnlinks href=#hl-10-191>191</a>
</span><span class=lnt id=hl-10-192><a class=lnlinks href=#hl-10-192>192</a>
</span><span class=lnt id=hl-10-193><a class=lnlinks href=#hl-10-193>193</a>
</span><span class=lnt id=hl-10-194><a class=lnlinks href=#hl-10-194>194</a>
</span><span class=lnt id=hl-10-195><a class=lnlinks href=#hl-10-195>195</a>
</span><span class=lnt id=hl-10-196><a class=lnlinks href=#hl-10-196>196</a>
</span><span class=lnt id=hl-10-197><a class=lnlinks href=#hl-10-197>197</a>
</span><span class=lnt id=hl-10-198><a class=lnlinks href=#hl-10-198>198</a>
</span><span class=lnt id=hl-10-199><a class=lnlinks href=#hl-10-199>199</a>
</span><span class=lnt id=hl-10-200><a class=lnlinks href=#hl-10-200>200</a>
</span><span class=lnt id=hl-10-201><a class=lnlinks href=#hl-10-201>201</a>
</span><span class=lnt id=hl-10-202><a class=lnlinks href=#hl-10-202>202</a>
</span><span class=lnt id=hl-10-203><a class=lnlinks href=#hl-10-203>203</a>
</span><span class=lnt id=hl-10-204><a class=lnlinks href=#hl-10-204>204</a>
</span><span class=lnt id=hl-10-205><a class=lnlinks href=#hl-10-205>205</a>
</span><span class=lnt id=hl-10-206><a class=lnlinks href=#hl-10-206>206</a>
</span><span class=lnt id=hl-10-207><a class=lnlinks href=#hl-10-207>207</a>
</span><span class=lnt id=hl-10-208><a class=lnlinks href=#hl-10-208>208</a>
</span><span class=lnt id=hl-10-209><a class=lnlinks href=#hl-10-209>209</a>
</span><span class=lnt id=hl-10-210><a class=lnlinks href=#hl-10-210>210</a>
</span><span class=lnt id=hl-10-211><a class=lnlinks href=#hl-10-211>211</a>
</span><span class=lnt id=hl-10-212><a class=lnlinks href=#hl-10-212>212</a>
</span><span class=lnt id=hl-10-213><a class=lnlinks href=#hl-10-213>213</a>
</span><span class=lnt id=hl-10-214><a class=lnlinks href=#hl-10-214>214</a>
</span><span class=lnt id=hl-10-215><a class=lnlinks href=#hl-10-215>215</a>
</span><span class=lnt id=hl-10-216><a class=lnlinks href=#hl-10-216>216</a>
</span><span class=lnt id=hl-10-217><a class=lnlinks href=#hl-10-217>217</a>
</span><span class=lnt id=hl-10-218><a class=lnlinks href=#hl-10-218>218</a>
</span><span class=lnt id=hl-10-219><a class=lnlinks href=#hl-10-219>219</a>
</span><span class=lnt id=hl-10-220><a class=lnlinks href=#hl-10-220>220</a>
</span><span class=lnt id=hl-10-221><a class=lnlinks href=#hl-10-221>221</a>
</span><span class=lnt id=hl-10-222><a class=lnlinks href=#hl-10-222>222</a>
</span><span class=lnt id=hl-10-223><a class=lnlinks href=#hl-10-223>223</a>
</span><span class=lnt id=hl-10-224><a class=lnlinks href=#hl-10-224>224</a>
</span><span class=lnt id=hl-10-225><a class=lnlinks href=#hl-10-225>225</a>
</span><span class=lnt id=hl-10-226><a class=lnlinks href=#hl-10-226>226</a>
</span><span class=lnt id=hl-10-227><a class=lnlinks href=#hl-10-227>227</a>
</span><span class=lnt id=hl-10-228><a class=lnlinks href=#hl-10-228>228</a>
</span><span class=lnt id=hl-10-229><a class=lnlinks href=#hl-10-229>229</a>
</span><span class=lnt id=hl-10-230><a class=lnlinks href=#hl-10-230>230</a>
</span><span class=lnt id=hl-10-231><a class=lnlinks href=#hl-10-231>231</a>
</span><span class=lnt id=hl-10-232><a class=lnlinks href=#hl-10-232>232</a>
</span><span class=lnt id=hl-10-233><a class=lnlinks href=#hl-10-233>233</a>
</span><span class=lnt id=hl-10-234><a class=lnlinks href=#hl-10-234>234</a>
</span><span class=lnt id=hl-10-235><a class=lnlinks href=#hl-10-235>235</a>
</span><span class=lnt id=hl-10-236><a class=lnlinks href=#hl-10-236>236</a>
</span><span class=lnt id=hl-10-237><a class=lnlinks href=#hl-10-237>237</a>
</span><span class=lnt id=hl-10-238><a class=lnlinks href=#hl-10-238>238</a>
</span><span class=lnt id=hl-10-239><a class=lnlinks href=#hl-10-239>239</a>
</span><span class=lnt id=hl-10-240><a class=lnlinks href=#hl-10-240>240</a>
</span><span class=lnt id=hl-10-241><a class=lnlinks href=#hl-10-241>241</a>
</span><span class=lnt id=hl-10-242><a class=lnlinks href=#hl-10-242>242</a>
</span><span class=lnt id=hl-10-243><a class=lnlinks href=#hl-10-243>243</a>
</span><span class=lnt id=hl-10-244><a class=lnlinks href=#hl-10-244>244</a>
</span><span class=lnt id=hl-10-245><a class=lnlinks href=#hl-10-245>245</a>
</span><span class=lnt id=hl-10-246><a class=lnlinks href=#hl-10-246>246</a>
</span><span class=lnt id=hl-10-247><a class=lnlinks href=#hl-10-247>247</a>
</span><span class=lnt id=hl-10-248><a class=lnlinks href=#hl-10-248>248</a>
</span><span class=lnt id=hl-10-249><a class=lnlinks href=#hl-10-249>249</a>
</span><span class=lnt id=hl-10-250><a class=lnlinks href=#hl-10-250>250</a>
</span><span class=lnt id=hl-10-251><a class=lnlinks href=#hl-10-251>251</a>
</span><span class=lnt id=hl-10-252><a class=lnlinks href=#hl-10-252>252</a>
</span><span class=lnt id=hl-10-253><a class=lnlinks href=#hl-10-253>253</a>
</span><span class=lnt id=hl-10-254><a class=lnlinks href=#hl-10-254>254</a>
</span><span class=lnt id=hl-10-255><a class=lnlinks href=#hl-10-255>255</a>
</span><span class=lnt id=hl-10-256><a class=lnlinks href=#hl-10-256>256</a>
</span><span class=lnt id=hl-10-257><a class=lnlinks href=#hl-10-257>257</a>
</span><span class=lnt id=hl-10-258><a class=lnlinks href=#hl-10-258>258</a>
</span><span class=lnt id=hl-10-259><a class=lnlinks href=#hl-10-259>259</a>
</span><span class=lnt id=hl-10-260><a class=lnlinks href=#hl-10-260>260</a>
</span><span class=lnt id=hl-10-261><a class=lnlinks href=#hl-10-261>261</a>
</span><span class=lnt id=hl-10-262><a class=lnlinks href=#hl-10-262>262</a>
</span><span class=lnt id=hl-10-263><a class=lnlinks href=#hl-10-263>263</a>
</span><span class=lnt id=hl-10-264><a class=lnlinks href=#hl-10-264>264</a>
</span><span class=lnt id=hl-10-265><a class=lnlinks href=#hl-10-265>265</a>
</span><span class=lnt id=hl-10-266><a class=lnlinks href=#hl-10-266>266</a>
</span><span class=lnt id=hl-10-267><a class=lnlinks href=#hl-10-267>267</a>
</span><span class=lnt id=hl-10-268><a class=lnlinks href=#hl-10-268>268</a>
</span><span class=lnt id=hl-10-269><a class=lnlinks href=#hl-10-269>269</a>
</span><span class=lnt id=hl-10-270><a class=lnlinks href=#hl-10-270>270</a>
</span><span class=lnt id=hl-10-271><a class=lnlinks href=#hl-10-271>271</a>
</span><span class=lnt id=hl-10-272><a class=lnlinks href=#hl-10-272>272</a>
</span><span class=lnt id=hl-10-273><a class=lnlinks href=#hl-10-273>273</a>
</span><span class=lnt id=hl-10-274><a class=lnlinks href=#hl-10-274>274</a>
</span><span class=lnt id=hl-10-275><a class=lnlinks href=#hl-10-275>275</a>
</span><span class=lnt id=hl-10-276><a class=lnlinks href=#hl-10-276>276</a>
</span><span class=lnt id=hl-10-277><a class=lnlinks href=#hl-10-277>277</a>
</span><span class=lnt id=hl-10-278><a class=lnlinks href=#hl-10-278>278</a>
</span><span class=lnt id=hl-10-279><a class=lnlinks href=#hl-10-279>279</a>
</span><span class=lnt id=hl-10-280><a class=lnlinks href=#hl-10-280>280</a>
</span><span class=lnt id=hl-10-281><a class=lnlinks href=#hl-10-281>281</a>
</span><span class=lnt id=hl-10-282><a class=lnlinks href=#hl-10-282>282</a>
</span><span class=lnt id=hl-10-283><a class=lnlinks href=#hl-10-283>283</a>
</span><span class=lnt id=hl-10-284><a class=lnlinks href=#hl-10-284>284</a>
</span><span class=lnt id=hl-10-285><a class=lnlinks href=#hl-10-285>285</a>
</span><span class=lnt id=hl-10-286><a class=lnlinks href=#hl-10-286>286</a>
</span><span class=lnt id=hl-10-287><a class=lnlinks href=#hl-10-287>287</a>
</span><span class=lnt id=hl-10-288><a class=lnlinks href=#hl-10-288>288</a>
</span><span class=lnt id=hl-10-289><a class=lnlinks href=#hl-10-289>289</a>
</span><span class=lnt id=hl-10-290><a class=lnlinks href=#hl-10-290>290</a>
</span><span class=lnt id=hl-10-291><a class=lnlinks href=#hl-10-291>291</a>
</span><span class=lnt id=hl-10-292><a class=lnlinks href=#hl-10-292>292</a>
</span><span class=lnt id=hl-10-293><a class=lnlinks href=#hl-10-293>293</a>
</span><span class=lnt id=hl-10-294><a class=lnlinks href=#hl-10-294>294</a>
</span><span class=lnt id=hl-10-295><a class=lnlinks href=#hl-10-295>295</a>
</span><span class=lnt id=hl-10-296><a class=lnlinks href=#hl-10-296>296</a>
</span><span class=lnt id=hl-10-297><a class=lnlinks href=#hl-10-297>297</a>
</span><span class=lnt id=hl-10-298><a class=lnlinks href=#hl-10-298>298</a>
</span><span class=lnt id=hl-10-299><a class=lnlinks href=#hl-10-299>299</a>
</span><span class=lnt id=hl-10-300><a class=lnlinks href=#hl-10-300>300</a>
</span><span class=lnt id=hl-10-301><a class=lnlinks href=#hl-10-301>301</a>
</span><span class=lnt id=hl-10-302><a class=lnlinks href=#hl-10-302>302</a>
</span><span class=lnt id=hl-10-303><a class=lnlinks href=#hl-10-303>303</a>
</span><span class=lnt id=hl-10-304><a class=lnlinks href=#hl-10-304>304</a>
</span><span class=lnt id=hl-10-305><a class=lnlinks href=#hl-10-305>305</a>
</span><span class=lnt id=hl-10-306><a class=lnlinks href=#hl-10-306>306</a>
</span><span class=lnt id=hl-10-307><a class=lnlinks href=#hl-10-307>307</a>
</span><span class=lnt id=hl-10-308><a class=lnlinks href=#hl-10-308>308</a>
</span><span class=lnt id=hl-10-309><a class=lnlinks href=#hl-10-309>309</a>
</span><span class=lnt id=hl-10-310><a class=lnlinks href=#hl-10-310>310</a>
</span><span class=lnt id=hl-10-311><a class=lnlinks href=#hl-10-311>311</a>
</span><span class=lnt id=hl-10-312><a class=lnlinks href=#hl-10-312>312</a>
</span><span class=lnt id=hl-10-313><a class=lnlinks href=#hl-10-313>313</a>
</span><span class=lnt id=hl-10-314><a class=lnlinks href=#hl-10-314>314</a>
</span><span class=lnt id=hl-10-315><a class=lnlinks href=#hl-10-315>315</a>
</span><span class=lnt id=hl-10-316><a class=lnlinks href=#hl-10-316>316</a>
</span><span class=lnt id=hl-10-317><a class=lnlinks href=#hl-10-317>317</a>
</span><span class=lnt id=hl-10-318><a class=lnlinks href=#hl-10-318>318</a>
</span><span class=lnt id=hl-10-319><a class=lnlinks href=#hl-10-319>319</a>
</span><span class=lnt id=hl-10-320><a class=lnlinks href=#hl-10-320>320</a>
</span><span class=lnt id=hl-10-321><a class=lnlinks href=#hl-10-321>321</a>
</span><span class=lnt id=hl-10-322><a class=lnlinks href=#hl-10-322>322</a>
</span><span class=lnt id=hl-10-323><a class=lnlinks href=#hl-10-323>323</a>
</span><span class=lnt id=hl-10-324><a class=lnlinks href=#hl-10-324>324</a>
</span><span class=lnt id=hl-10-325><a class=lnlinks href=#hl-10-325>325</a>
</span><span class=lnt id=hl-10-326><a class=lnlinks href=#hl-10-326>326</a>
</span><span class=lnt id=hl-10-327><a class=lnlinks href=#hl-10-327>327</a>
</span><span class=lnt id=hl-10-328><a class=lnlinks href=#hl-10-328>328</a>
</span><span class=lnt id=hl-10-329><a class=lnlinks href=#hl-10-329>329</a>
</span><span class=lnt id=hl-10-330><a class=lnlinks href=#hl-10-330>330</a>
</span><span class=lnt id=hl-10-331><a class=lnlinks href=#hl-10-331>331</a>
</span><span class=lnt id=hl-10-332><a class=lnlinks href=#hl-10-332>332</a>
</span><span class=lnt id=hl-10-333><a class=lnlinks href=#hl-10-333>333</a>
</span><span class=lnt id=hl-10-334><a class=lnlinks href=#hl-10-334>334</a>
</span><span class=lnt id=hl-10-335><a class=lnlinks href=#hl-10-335>335</a>
</span><span class=lnt id=hl-10-336><a class=lnlinks href=#hl-10-336>336</a>
</span><span class=lnt id=hl-10-337><a class=lnlinks href=#hl-10-337>337</a>
</span><span class=lnt id=hl-10-338><a class=lnlinks href=#hl-10-338>338</a>
</span><span class=lnt id=hl-10-339><a class=lnlinks href=#hl-10-339>339</a>
</span><span class=lnt id=hl-10-340><a class=lnlinks href=#hl-10-340>340</a>
</span><span class=lnt id=hl-10-341><a class=lnlinks href=#hl-10-341>341</a>
</span><span class=lnt id=hl-10-342><a class=lnlinks href=#hl-10-342>342</a>
</span><span class=lnt id=hl-10-343><a class=lnlinks href=#hl-10-343>343</a>
</span><span class=lnt id=hl-10-344><a class=lnlinks href=#hl-10-344>344</a>
</span><span class=lnt id=hl-10-345><a class=lnlinks href=#hl-10-345>345</a>
</span><span class=lnt id=hl-10-346><a class=lnlinks href=#hl-10-346>346</a>
</span><span class=lnt id=hl-10-347><a class=lnlinks href=#hl-10-347>347</a>
</span><span class=lnt id=hl-10-348><a class=lnlinks href=#hl-10-348>348</a>
</span><span class=lnt id=hl-10-349><a class=lnlinks href=#hl-10-349>349</a>
</span><span class=lnt id=hl-10-350><a class=lnlinks href=#hl-10-350>350</a>
</span><span class=lnt id=hl-10-351><a class=lnlinks href=#hl-10-351>351</a>
</span><span class=lnt id=hl-10-352><a class=lnlinks href=#hl-10-352>352</a>
</span><span class=lnt id=hl-10-353><a class=lnlinks href=#hl-10-353>353</a>
</span><span class=lnt id=hl-10-354><a class=lnlinks href=#hl-10-354>354</a>
</span><span class=lnt id=hl-10-355><a class=lnlinks href=#hl-10-355>355</a>
</span><span class=lnt id=hl-10-356><a class=lnlinks href=#hl-10-356>356</a>
</span><span class=lnt id=hl-10-357><a class=lnlinks href=#hl-10-357>357</a>
</span><span class=lnt id=hl-10-358><a class=lnlinks href=#hl-10-358>358</a>
</span><span class=lnt id=hl-10-359><a class=lnlinks href=#hl-10-359>359</a>
</span><span class=lnt id=hl-10-360><a class=lnlinks href=#hl-10-360>360</a>
</span><span class=lnt id=hl-10-361><a class=lnlinks href=#hl-10-361>361</a>
</span><span class=lnt id=hl-10-362><a class=lnlinks href=#hl-10-362>362</a>
</span><span class=lnt id=hl-10-363><a class=lnlinks href=#hl-10-363>363</a>
</span><span class=lnt id=hl-10-364><a class=lnlinks href=#hl-10-364>364</a>
</span><span class=lnt id=hl-10-365><a class=lnlinks href=#hl-10-365>365</a>
</span><span class=lnt id=hl-10-366><a class=lnlinks href=#hl-10-366>366</a>
</span><span class=lnt id=hl-10-367><a class=lnlinks href=#hl-10-367>367</a>
</span><span class=lnt id=hl-10-368><a class=lnlinks href=#hl-10-368>368</a>
</span><span class=lnt id=hl-10-369><a class=lnlinks href=#hl-10-369>369</a>
</span><span class=lnt id=hl-10-370><a class=lnlinks href=#hl-10-370>370</a>
</span><span class=lnt id=hl-10-371><a class=lnlinks href=#hl-10-371>371</a>
</span><span class=lnt id=hl-10-372><a class=lnlinks href=#hl-10-372>372</a>
</span><span class=lnt id=hl-10-373><a class=lnlinks href=#hl-10-373>373</a>
</span><span class=lnt id=hl-10-374><a class=lnlinks href=#hl-10-374>374</a>
</span><span class=lnt id=hl-10-375><a class=lnlinks href=#hl-10-375>375</a>
</span><span class=lnt id=hl-10-376><a class=lnlinks href=#hl-10-376>376</a>
</span><span class=lnt id=hl-10-377><a class=lnlinks href=#hl-10-377>377</a>
</span><span class=lnt id=hl-10-378><a class=lnlinks href=#hl-10-378>378</a>
</span><span class=lnt id=hl-10-379><a class=lnlinks href=#hl-10-379>379</a>
</span><span class=lnt id=hl-10-380><a class=lnlinks href=#hl-10-380>380</a>
</span><span class=lnt id=hl-10-381><a class=lnlinks href=#hl-10-381>381</a>
</span><span class=lnt id=hl-10-382><a class=lnlinks href=#hl-10-382>382</a>
</span><span class=lnt id=hl-10-383><a class=lnlinks href=#hl-10-383>383</a>
</span><span class=lnt id=hl-10-384><a class=lnlinks href=#hl-10-384>384</a>
</span><span class=lnt id=hl-10-385><a class=lnlinks href=#hl-10-385>385</a>
</span><span class=lnt id=hl-10-386><a class=lnlinks href=#hl-10-386>386</a>
</span><span class=lnt id=hl-10-387><a class=lnlinks href=#hl-10-387>387</a>
</span><span class=lnt id=hl-10-388><a class=lnlinks href=#hl-10-388>388</a>
</span><span class=lnt id=hl-10-389><a class=lnlinks href=#hl-10-389>389</a>
</span><span class=lnt id=hl-10-390><a class=lnlinks href=#hl-10-390>390</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>분산 스트리밍 서비스 구현 예시 - Netflix 스타일 마이크로서비스
</span></span></span><span class=line><span class=cl><span class=s2>이 코드는 분산 시스템의 핵심 패턴들을 보여줍니다.
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>random</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>List</span><span class=p>,</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>dataclasses</span> <span class=kn>import</span> <span class=n>dataclass</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>enum</span> <span class=kn>import</span> <span class=n>Enum</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>hashlib</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ==============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1># 데이터 모델 정의</span>
</span></span><span class=line><span class=cl><span class=c1># ==============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>User</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>email</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>subscription_type</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>viewing_history</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Content</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>content_id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>title</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>duration</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    <span class=n>genre</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>rating</span><span class=p>:</span> <span class=nb>float</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ViewingSession</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>session_id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>content_id</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>start_time</span><span class=p>:</span> <span class=nb>float</span>
</span></span><span class=line><span class=cl>    <span class=n>current_position</span><span class=p>:</span> <span class=nb>int</span>
</span></span><span class=line><span class=cl>    <span class=n>status</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ServiceHealth</span><span class=p>(</span><span class=n>Enum</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>HEALTHY</span> <span class=o>=</span> <span class=s2>&#34;healthy&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>DEGRADED</span> <span class=o>=</span> <span class=s2>&#34;degraded&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>DOWN</span> <span class=o>=</span> <span class=s2>&#34;down&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ==============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1># 서킷 브레이커 패턴 구현</span>
</span></span><span class=line><span class=cl><span class=c1># ==============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CircuitBreaker</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;서킷 브레이커 패턴 - 장애 전파 방지&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>failure_threshold</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>5</span><span class=p>,</span> <span class=n>timeout</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>60</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>failure_threshold</span> <span class=o>=</span> <span class=n>failure_threshold</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>timeout</span> <span class=o>=</span> <span class=n>timeout</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>failure_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>last_failure_time</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>state</span> <span class=o>=</span> <span class=s2>&#34;CLOSED&#34;</span>  <span class=c1># CLOSED, OPEN, HALF_OPEN</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>call</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>func</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;서킷 브레이커를 통한 함수 호출&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>state</span> <span class=o>==</span> <span class=s2>&#34;OPEN&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>last_failure_time</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>timeout</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>state</span> <span class=o>=</span> <span class=s2>&#34;HALF_OPEN&#34;</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=s2>&#34;서킷 브레이커가 열린 상태입니다&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=n>func</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>state</span> <span class=o>==</span> <span class=s2>&#34;HALF_OPEN&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>state</span> <span class=o>=</span> <span class=s2>&#34;CLOSED&#34;</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>failure_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>failure_count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>failure_count</span> <span class=o>&gt;=</span> <span class=bp>self</span><span class=o>.</span><span class=n>failure_threshold</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>state</span> <span class=o>=</span> <span class=s2>&#34;OPEN&#34;</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>last_failure_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=n>e</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ==============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1># 분산 캐시 시스템</span>
</span></span><span class=line><span class=cl><span class=c1># ==============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>DistributedCache</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;분산 캐시 구현 - 일관된 해싱 사용&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>nodes</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>nodes</span> <span class=o>=</span> <span class=n>nodes</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>cache_data</span> <span class=o>=</span> <span class=p>{</span><span class=n>node</span><span class=p>:</span> <span class=p>{}</span> <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>virtual_nodes</span> <span class=o>=</span> <span class=mi>100</span>  <span class=c1># 가상 노드 수</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>ring</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_build_ring</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_build_ring</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;일관된 해싱 링 구축&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>ring</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>nodes</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>virtual_nodes</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=n>key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>node</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>                <span class=n>hash_value</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>hashlib</span><span class=o>.</span><span class=n>md5</span><span class=p>(</span><span class=n>key</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span><span class=o>.</span><span class=n>hexdigest</span><span class=p>(),</span> <span class=mi>16</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>ring</span><span class=p>[</span><span class=n>hash_value</span><span class=p>]</span> <span class=o>=</span> <span class=n>node</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>dict</span><span class=p>(</span><span class=nb>sorted</span><span class=p>(</span><span class=n>ring</span><span class=o>.</span><span class=n>items</span><span class=p>()))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_get_node</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;키에 해당하는 노드 찾기&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>hash_value</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>hashlib</span><span class=o>.</span><span class=n>md5</span><span class=p>(</span><span class=n>key</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span><span class=o>.</span><span class=n>hexdigest</span><span class=p>(),</span> <span class=mi>16</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>ring_key</span> <span class=ow>in</span> <span class=nb>sorted</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>ring</span><span class=o>.</span><span class=n>keys</span><span class=p>()):</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>hash_value</span> <span class=o>&lt;=</span> <span class=n>ring_key</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>ring</span><span class=p>[</span><span class=n>ring_key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=c1># 링의 끝에 도달하면 첫 번째 노드 반환</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>ring</span><span class=p>[</span><span class=nb>min</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>ring</span><span class=o>.</span><span class=n>keys</span><span class=p>())]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시에서 값 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>node</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_node</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.01</span><span class=p>)</span>  <span class=c1># 네트워크 지연 시뮬레이션</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache_data</span><span class=p>[</span><span class=n>node</span><span class=p>]</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>set</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>any</span><span class=p>,</span> <span class=n>ttl</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>300</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;캐시에 값 저장&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>node</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_node</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.01</span><span class=p>)</span>  <span class=c1># 네트워크 지연 시뮬레이션</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>cache_data</span><span class=p>[</span><span class=n>node</span><span class=p>][</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;value&#39;</span><span class=p>:</span> <span class=n>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;expires&#39;</span><span class=p>:</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>+</span> <span class=n>ttl</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;캐시 저장: </span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2> -&gt; 노드 </span><span class=si>{</span><span class=n>node</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ==============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1># 마이크로서비스 구현</span>
</span></span><span class=line><span class=cl><span class=c1># ==============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BaseService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;기본 서비스 클래스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>service_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>service_name</span> <span class=o>=</span> <span class=n>service_name</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>health</span> <span class=o>=</span> <span class=n>ServiceHealth</span><span class=o>.</span><span class=n>HEALTHY</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>circuit_breaker</span> <span class=o>=</span> <span class=n>CircuitBreaker</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>health_check</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;헬스체크 엔드포인트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;service&#34;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>service_name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>health</span><span class=o>.</span><span class=n>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;timestamp&#34;</span><span class=p>:</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserService</span><span class=p>(</span><span class=n>BaseService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;사용자 관리 서비스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cache</span><span class=p>:</span> <span class=n>DistributedCache</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=s2>&#34;user-service&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>cache</span> <span class=o>=</span> <span class=n>cache</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>users</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;user1&#34;</span><span class=p>:</span> <span class=n>User</span><span class=p>(</span><span class=s2>&#34;user1&#34;</span><span class=p>,</span> <span class=s2>&#34;user1@example.com&#34;</span><span class=p>,</span> <span class=s2>&#34;premium&#34;</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;movie1&#34;</span><span class=p>,</span> <span class=s2>&#34;movie2&#34;</span><span class=p>]),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;user2&#34;</span><span class=p>:</span> <span class=n>User</span><span class=p>(</span><span class=s2>&#34;user2&#34;</span><span class=p>,</span> <span class=s2>&#34;user2@example.com&#34;</span><span class=p>,</span> <span class=s2>&#34;basic&#34;</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;movie1&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>get_user</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>User</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;사용자 정보 조회 (캐시 우선)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># 캐시에서 먼저 조회</span>
</span></span><span class=line><span class=cl>        <span class=n>cached_user</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;user:</span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>cached_user</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;캐시에서 사용자 조회: </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>User</span><span class=p>(</span><span class=o>**</span><span class=n>cached_user</span><span class=p>[</span><span class=s1>&#39;value&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 데이터베이스에서 조회 (시뮬레이션)</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>  <span class=c1># DB 조회 지연 시뮬레이션</span>
</span></span><span class=line><span class=cl>        <span class=n>user</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>users</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>user_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>user</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 캐시에 저장</span>
</span></span><span class=line><span class=cl>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;user:</span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>user</span><span class=o>.</span><span class=vm>__dict__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;데이터베이스에서 사용자 조회: </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>user</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>RecommendationService</span><span class=p>(</span><span class=n>BaseService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;추천 서비스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_service</span><span class=p>:</span> <span class=n>UserService</span><span class=p>,</span> <span class=n>cache</span><span class=p>:</span> <span class=n>DistributedCache</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=s2>&#34;recommendation-service&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>user_service</span> <span class=o>=</span> <span class=n>user_service</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>cache</span> <span class=o>=</span> <span class=n>cache</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>content_catalog</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=n>Content</span><span class=p>(</span><span class=s2>&#34;movie1&#34;</span><span class=p>,</span> <span class=s2>&#34;액션 영화&#34;</span><span class=p>,</span> <span class=mi>120</span><span class=p>,</span> <span class=s2>&#34;액션&#34;</span><span class=p>,</span> <span class=mf>4.5</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>Content</span><span class=p>(</span><span class=s2>&#34;movie2&#34;</span><span class=p>,</span> <span class=s2>&#34;로맨스 영화&#34;</span><span class=p>,</span> <span class=mi>105</span><span class=p>,</span> <span class=s2>&#34;로맨스&#34;</span><span class=p>,</span> <span class=mf>4.2</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>Content</span><span class=p>(</span><span class=s2>&#34;movie3&#34;</span><span class=p>,</span> <span class=s2>&#34;SF 영화&#34;</span><span class=p>,</span> <span class=mi>140</span><span class=p>,</span> <span class=s2>&#34;SF&#34;</span><span class=p>,</span> <span class=mf>4.7</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>Content</span><span class=p>(</span><span class=s2>&#34;movie4&#34;</span><span class=p>,</span> <span class=s2>&#34;코미디 영화&#34;</span><span class=p>,</span> <span class=mi>95</span><span class=p>,</span> <span class=s2>&#34;코미디&#34;</span><span class=p>,</span> <span class=mf>4.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>get_recommendations</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Content</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;개인화된 추천 목록 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 서킷 브레이커를 통한 사용자 서비스 호출</span>
</span></span><span class=line><span class=cl>            <span class=n>user</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>circuit_breaker</span><span class=o>.</span><span class=n>call</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>user_service</span><span class=o>.</span><span class=n>get_user</span><span class=p>,</span> <span class=n>user_id</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=ow>not</span> <span class=n>user</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 캐시된 추천 확인</span>
</span></span><span class=line><span class=cl>            <span class=n>cache_key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;recommendations:</span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>cached_recs</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>cache_key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>cached_recs</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;캐시된 추천 목록 반환: </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=p>[</span><span class=n>Content</span><span class=p>(</span><span class=o>**</span><span class=n>content</span><span class=p>)</span> <span class=k>for</span> <span class=n>content</span> <span class=ow>in</span> <span class=n>cached_recs</span><span class=p>[</span><span class=s1>&#39;value&#39;</span><span class=p>]]</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 추천 알고리즘 실행 (간단한 예시)</span>
</span></span><span class=line><span class=cl>            <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.2</span><span class=p>)</span>  <span class=c1># ML 모델 추론 시간 시뮬레이션</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>viewed_content</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>user</span><span class=o>.</span><span class=n>viewing_history</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>recommendations</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=n>content</span> <span class=k>for</span> <span class=n>content</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>content_catalog</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>content</span><span class=o>.</span><span class=n>content_id</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>viewed_content</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 평점 기준 정렬</span>
</span></span><span class=line><span class=cl>            <span class=n>recommendations</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>rating</span><span class=p>,</span> <span class=n>reverse</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 상위 3개만 반환</span>
</span></span><span class=line><span class=cl>            <span class=n>top_recommendations</span> <span class=o>=</span> <span class=n>recommendations</span><span class=p>[:</span><span class=mi>3</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 캐시에 저장 (5분 TTL)</span>
</span></span><span class=line><span class=cl>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>cache</span><span class=o>.</span><span class=n>set</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>cache_key</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=n>rec</span><span class=o>.</span><span class=vm>__dict__</span> <span class=k>for</span> <span class=n>rec</span> <span class=ow>in</span> <span class=n>top_recommendations</span><span class=p>],</span> 
</span></span><span class=line><span class=cl>                <span class=mi>300</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;새로운 추천 목록 생성: </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>top_recommendations</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;추천 서비스 오류: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=c1># 폴백: 인기 콘텐츠 반환</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>content_catalog</span><span class=p>[:</span><span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ViewingService</span><span class=p>(</span><span class=n>BaseService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;시청 관리 서비스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=s2>&#34;viewing-service&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>active_sessions</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>start_viewing</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>content_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;시청 세션 시작&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>session_id</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;session_</span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2>_</span><span class=si>{</span><span class=n>content_id</span><span class=si>}</span><span class=s2>_</span><span class=si>{</span><span class=nb>int</span><span class=p>(</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>())</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>session</span> <span class=o>=</span> <span class=n>ViewingSession</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>session_id</span><span class=o>=</span><span class=n>session_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>user_id</span><span class=o>=</span><span class=n>user_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>content_id</span><span class=o>=</span><span class=n>content_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>start_time</span><span class=o>=</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=n>current_position</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>status</span><span class=o>=</span><span class=s2>&#34;playing&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>active_sessions</span><span class=p>[</span><span class=n>session_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>session</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;시청 세션 시작: </span><span class=si>{</span><span class=n>session_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>session_id</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>update_position</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>session_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>position</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;재생 위치 업데이트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>session_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>active_sessions</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>active_sessions</span><span class=p>[</span><span class=n>session_id</span><span class=p>]</span><span class=o>.</span><span class=n>current_position</span> <span class=o>=</span> <span class=n>position</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;재생 위치 업데이트: </span><span class=si>{</span><span class=n>session_id</span><span class=si>}</span><span class=s2> -&gt; </span><span class=si>{</span><span class=n>position</span><span class=si>}</span><span class=s2>초&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>stop_viewing</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>session_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;시청 세션 종료&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>session_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>active_sessions</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>active_sessions</span><span class=p>[</span><span class=n>session_id</span><span class=p>]</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=s2>&#34;stopped&#34;</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;시청 세션 종료: </span><span class=si>{</span><span class=n>session_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ==============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1># API 게이트웨이</span>
</span></span><span class=line><span class=cl><span class=c1># ==============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>APIGateway</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;API 게이트웨이 - 요청 라우팅 및 로드 밸런싱&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>services</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>request_count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>register_service</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>service_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>service_instance</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;서비스 등록&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>service_name</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>services</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>services</span><span class=p>[</span><span class=n>service_name</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>services</span><span class=p>[</span><span class=n>service_name</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>service_instance</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;서비스 등록: </span><span class=si>{</span><span class=n>service_name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_service_instance</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>service_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;라운드 로빈 로드 밸런싱&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>service_name</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>services</span> <span class=ow>or</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>services</span><span class=p>[</span><span class=n>service_name</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>instances</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>services</span><span class=p>[</span><span class=n>service_name</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>instance</span> <span class=o>=</span> <span class=n>instances</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>request_count</span> <span class=o>%</span> <span class=nb>len</span><span class=p>(</span><span class=n>instances</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>request_count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>instance</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>route_request</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>service_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>method</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;요청 라우팅&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>instance</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_service_instance</span><span class=p>(</span><span class=n>service_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>instance</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;서비스를 찾을 수 없습니다: </span><span class=si>{</span><span class=n>service_name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>instance</span><span class=p>,</span> <span class=n>method</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;메서드를 찾을 수 없습니다: </span><span class=si>{</span><span class=n>method</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>await</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>instance</span><span class=p>,</span> <span class=n>method</span><span class=p>)(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ==============================================================================</span>
</span></span><span class=line><span class=cl><span class=c1># 분산 시스템 시뮬레이션</span>
</span></span><span class=line><span class=cl><span class=c1># ==============================================================================</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>simulate_distributed_streaming_system</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;분산 스트리밍 시스템 시뮬레이션&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=== 분산 스트리밍 시스템 시작 ===</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 분산 캐시 초기화 (3개 노드)</span>
</span></span><span class=line><span class=cl>    <span class=n>cache</span> <span class=o>=</span> <span class=n>DistributedCache</span><span class=p>([</span><span class=s2>&#34;cache-node-1&#34;</span><span class=p>,</span> <span class=s2>&#34;cache-node-2&#34;</span><span class=p>,</span> <span class=s2>&#34;cache-node-3&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 마이크로서비스 인스턴스 생성</span>
</span></span><span class=line><span class=cl>    <span class=n>user_service</span> <span class=o>=</span> <span class=n>UserService</span><span class=p>(</span><span class=n>cache</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>recommendation_service</span> <span class=o>=</span> <span class=n>RecommendationService</span><span class=p>(</span><span class=n>user_service</span><span class=p>,</span> <span class=n>cache</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>viewing_service</span> <span class=o>=</span> <span class=n>ViewingService</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># API 게이트웨이 설정</span>
</span></span><span class=line><span class=cl>    <span class=n>gateway</span> <span class=o>=</span> <span class=n>APIGateway</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>gateway</span><span class=o>.</span><span class=n>register_service</span><span class=p>(</span><span class=s2>&#34;user&#34;</span><span class=p>,</span> <span class=n>user_service</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>gateway</span><span class=o>.</span><span class=n>register_service</span><span class=p>(</span><span class=s2>&#34;recommendation&#34;</span><span class=p>,</span> <span class=n>recommendation_service</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>gateway</span><span class=o>.</span><span class=n>register_service</span><span class=p>(</span><span class=s2>&#34;viewing&#34;</span><span class=p>,</span> <span class=n>viewing_service</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 사용자 요청 시뮬레이션</span>
</span></span><span class=line><span class=cl>    <span class=n>user_id</span> <span class=o>=</span> <span class=s2>&#34;user1&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;1. 사용자 정보 조회&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>user</span> <span class=o>=</span> <span class=k>await</span> <span class=n>gateway</span><span class=o>.</span><span class=n>route_request</span><span class=p>(</span><span class=s2>&#34;user&#34;</span><span class=p>,</span> <span class=s2>&#34;get_user&#34;</span><span class=p>,</span> <span class=n>user_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;사용자: </span><span class=si>{</span><span class=n>user</span><span class=o>.</span><span class=n>email</span><span class=si>}</span><span class=s2>, 구독: </span><span class=si>{</span><span class=n>user</span><span class=o>.</span><span class=n>subscription_type</span><span class=si>}</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;2. 개인화된 추천 목록 요청&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>recommendations</span> <span class=o>=</span> <span class=k>await</span> <span class=n>gateway</span><span class=o>.</span><span class=n>route_request</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;recommendation&#34;</span><span class=p>,</span> <span class=s2>&#34;get_recommendations&#34;</span><span class=p>,</span> <span class=n>user_id</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;추천 목록:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>rec</span> <span class=ow>in</span> <span class=n>recommendations</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  - </span><span class=si>{</span><span class=n>rec</span><span class=o>.</span><span class=n>title</span><span class=si>}</span><span class=s2> (평점: </span><span class=si>{</span><span class=n>rec</span><span class=o>.</span><span class=n>rating</span><span class=si>}</span><span class=s2>)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;3. 동일한 추천 요청 (캐시 히트 예상)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>recommendations</span> <span class=o>=</span> <span class=k>await</span> <span class=n>gateway</span><span class=o>.</span><span class=n>route_request</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;recommendation&#34;</span><span class=p>,</span> <span class=s2>&#34;get_recommendations&#34;</span><span class=p>,</span> <span class=n>user_id</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;4. 시청 세션 시작&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>session_id</span> <span class=o>=</span> <span class=k>await</span> <span class=n>gateway</span><span class=o>.</span><span class=n>route_request</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;viewing&#34;</span><span class=p>,</span> <span class=s2>&#34;start_viewing&#34;</span><span class=p>,</span> <span class=n>user_id</span><span class=p>,</span> <span class=s2>&#34;movie3&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;5. 재생 위치 업데이트 시뮬레이션&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>position</span> <span class=ow>in</span> <span class=p>[</span><span class=mi>30</span><span class=p>,</span> <span class=mi>60</span><span class=p>,</span> <span class=mi>90</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=n>gateway</span><span class=o>.</span><span class=n>route_request</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;viewing&#34;</span><span class=p>,</span> <span class=s2>&#34;update_position&#34;</span><span class=p>,</span> <span class=n>session_id</span><span class=p>,</span> <span class=n>position</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;6. 시청 세션 종료&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>gateway</span><span class=o>.</span><span class=n>route_request</span><span class=p>(</span><span class=s2>&#34;viewing&#34;</span><span class=p>,</span> <span class=s2>&#34;stop_viewing&#34;</span><span class=p>,</span> <span class=n>session_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;7. 시스템 헬스체크&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>service_name</span><span class=p>,</span> <span class=n>instances</span> <span class=ow>in</span> <span class=n>gateway</span><span class=o>.</span><span class=n>services</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>health</span> <span class=o>=</span> <span class=k>await</span> <span class=n>instance</span><span class=o>.</span><span class=n>health_check</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;  - </span><span class=si>{</span><span class=n>health</span><span class=p>[</span><span class=s1>&#39;service&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>health</span><span class=p>[</span><span class=s1>&#39;status&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>=== 분산 스트리밍 시스템 종료 ===&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 실행</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>simulate_distributed_streaming_system</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=주목할-내용>주목할 내용<a hidden class=anchor aria-hidden=true href=#주목할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>핵심 주제</th><th>핵심 항목</th><th>설명</th></tr></thead><tbody><tr><td><strong>아키텍처 원칙</strong></td><td><strong>CAP 정리</strong></td><td>일관성, 가용성, 분할 허용성</td><td>3 요소 중 2 가지만 보장 가능한 분산 시스템 기본 원칙. 설계 트레이드오프의 핵심.</td></tr><tr><td></td><td><strong>BASE 원칙</strong></td><td>Eventually Consistency</td><td>일관성 대신 가용성과 유연성을 추구하는 NoSQL 기반 분산 시스템 원칙.</td></tr><tr><td></td><td><strong>Fallacies</strong></td><td>네트워크 가정의 오류</td><td>분산 환경에서 흔히 간과되는 네트워크 지연, 신뢰성 등에 대한 잘못된 가정 목록.</td></tr><tr><td><strong>데이터 처리 전략</strong></td><td><strong>데이터 분산 저장</strong></td><td>샤딩 / 복제</td><td>수평 확장성과 내결함성 확보를 위한 핵심 기법. 성능 최적화와 가용성 향상에 기여.</td></tr><tr><td></td><td><strong>이벤트 소싱</strong></td><td>상태 변화 기록</td><td>모든 상태 변화를 이벤트로 저장하여 추적 가능. Event-Driven 시스템과 결합 효과적.</td></tr><tr><td></td><td><strong>CQRS</strong></td><td>명령/조회 분리</td><td>읽기와 쓰기 모델 분리를 통한 확장성과 최적화. 이벤트 소싱과 함께 자주 사용됨.</td></tr><tr><td></td><td><strong>Saga 패턴</strong></td><td>분산 트랜잭션 처리</td><td>보상 트랜잭션을 통해 트랜잭션 일관성을 유지. 데이터베이스 일관성이 어려운 상황에서 유용.</td></tr><tr><td><strong>합의 및 일관성</strong></td><td><strong>합의 알고리즘</strong></td><td>Raft / Paxos / PBFT</td><td>리더 선출, 로그 복제, 장애 복원 등 클러스터 내 일관성 보장 메커니즘. PBFT 는 비잔틴 장애까지 허용.</td></tr><tr><td></td><td><strong>쿼럼 (Quorum)</strong></td><td>의사결정 기준 노드 수</td><td>합의를 위한 최소한의 동의 노드 수. 일관성/가용성 비율에 영향을 줌.</td></tr><tr><td><strong>통신 및 메시징</strong></td><td><strong>비동기 통신</strong></td><td>메시지 큐 / 이벤트 스트리밍</td><td>마이크로서비스 간 decoupling 을 위한 핵심. Kafka, RabbitMQ 등으로 구현.</td></tr><tr><td></td><td><strong>Service Mesh</strong></td><td>서비스 간 통신 추상화</td><td>통신 제어, 인증, 로깅, 라우팅을 추상화하여 일관된 인프라 계층 제공.</td></tr><tr><td></td><td><strong>gRPC</strong></td><td>고성능 RPC 통신</td><td>HTTP/2 기반 이진 RPC 로 마이크로서비스 내부 통신에 최적화.</td></tr><tr><td><strong>운영 및 오케스트레이션</strong></td><td><strong>컨테이너 관리</strong></td><td>Kubernetes / 오케스트레이션</td><td>분산된 워크로드 자동 배포, 복구, 확장. MSA 운영의 핵심 플랫폼.</td></tr><tr><td></td><td><strong>오토스케일링</strong></td><td>HPA / Auto Scaling</td><td>부하 기반으로 자원 자동 확장. KEDA, AWS Auto Scaling 과 연동 가능.</td></tr><tr><td></td><td><strong>관찰성</strong></td><td>모니터링 / 분산 추적</td><td>메트릭, 로그, 트레이싱 기반으로 실시간 시스템 상태 확인 및 병목 탐지.</td></tr><tr><td></td><td><strong>카오스 엔지니어링</strong></td><td>장애 시뮬레이션</td><td>Netflix Chaos Monkey 등의 도구로 복원력 및 장애 대응능력 점검.</td></tr><tr><td><strong>배포 전략</strong></td><td><strong>배포 패턴</strong></td><td>Canary / Blue-Green</td><td>점진적 또는 무중단 배포를 통해 안정성과 속도를 모두 확보하는 전략.</td></tr><tr><td><strong>보안 모델</strong></td><td><strong>제로 트러스트</strong></td><td>지속적 인증 검증</td><td>네트워크 내부도 신뢰하지 않음. 사용자·디바이스별 세밀한 접근 통제 필요.</td></tr><tr><td></td><td><strong>Mutual TLS</strong></td><td>상호 인증 암호화 통신</td><td>클라이언트와 서버가 모두 인증을 수행하여 신뢰 기반 통신 구현.</td></tr><tr><td></td><td><strong>동형 암호화</strong></td><td>암호 상태 연산</td><td>암호화된 상태에서 연산 가능. 개인정보 보호를 위한 최신 기술.</td></tr><tr><td><strong>신기술 트렌드</strong></td><td><strong>에지 컴퓨팅</strong></td><td>5G 통합</td><td>지연 최소화와 실시간 반응성을 위한 컴퓨팅 자원의 지역 분산화.</td></tr><tr><td></td><td><strong>서버리스</strong></td><td>FaaS (Function as a Service)</td><td>인프라 운영 제거, 비용 최적화. 이벤트 기반 비동기 처리에 적합.</td></tr><tr><td></td><td><strong>웹어셈블리 (WASM)</strong></td><td>고성능 경량 실행</td><td>브라우저 외부 또는 클라우드 엣지에서도 안전한 고성능 코드 실행 가능.</td></tr><tr><td><strong>AI/ML 인프라</strong></td><td><strong>MLOps</strong></td><td>모델 배포 자동화</td><td>머신러닝 모델의 학습 → 배포 → 운영 과정을 자동화하여 일관성 확보.</td></tr><tr><td></td><td><strong>연합 학습 (Federated Learning)</strong></td><td>데이터 분산 학습</td><td>중앙 서버 없이 각 장치에서 학습. 개인정보 보호에 유리함.</td></tr></tbody></table><h2 id=반드시-학습해야-할-내용>반드시 학습해야 할 내용<a hidden class=anchor aria-hidden=true href=#반드시-학습해야-할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목/개념</th><th>설명 및 실무 적용 포인트</th></tr></thead><tbody><tr><td><strong>이론</strong></td><td>분산 시스템 원칙</td><td><strong>CAP 이론 / BASE 원칙</strong></td><td>일관성, 가용성, 분할 허용성의 트레이드오프 (CAP) / 최종 일관성과 가용성을 강조하는 BASE 모델 이해</td></tr><tr><td></td><td>데이터 일관성 모델</td><td><strong>Strong, Eventual, Causal</strong></td><td>다양한 일관성 수준을 선택하여 서비스의 특성에 맞게 적용 (e.g., SNS 는 Eventual, 은행은 Strong)</td></tr><tr><td><strong>알고리즘</strong></td><td>합의 알고리즘</td><td><strong>Paxos, Raft</strong></td><td>리더 선출, 로그 복제, 장애 복구에 핵심. Raft 는 Paxos 보다 구현이 단순해 실무에서 더 선호됨</td></tr><tr><td></td><td>시계 동기화/순서 보장</td><td><strong>Vector Clock, Lamport Timestamp</strong></td><td>이벤트 간 인과관계 추적 및 순서 보장을 위해 필수. 특히 분산 로그 처리 및 트레이싱에 활용</td></tr><tr><td><strong>패턴/아키텍처</strong></td><td>장애 격리 패턴</td><td><strong>Circuit Breaker, Bulkhead</strong></td><td>장애 전파 방지, 복원력 확보. 마이크로서비스에서 외부 의존성 실패 시 격리 역할 수행</td></tr><tr><td></td><td>아키텍처 스타일</td><td><strong>Microservices, Event-Driven</strong></td><td>서비스 단위 분리와 확장성 확보. EDA 는 Kafka, NATS 등과 결합하여 느슨한 결합 구조 설계 가능</td></tr><tr><td></td><td>메시징 패턴</td><td><strong>Pub/Sub, Event Sourcing, CQRS</strong></td><td>비동기 메시징, 상태 저장 분리, 이벤트 로그 기반의 복원력 있는 시스템 설계 가능</td></tr><tr><td><strong>운영/인프라</strong></td><td>오케스트레이션</td><td><strong>Kubernetes, KEDA</strong></td><td>컨테이너 기반 자동 배포, 장애 복구, 스케일링. KEDA 는 이벤트 기반 오토스케일링에 최적화</td></tr><tr><td></td><td>서비스 메시</td><td><strong>Istio, Linkerd</strong></td><td>서비스 간 트래픽 제어, TLS 적용, 인증/인가, A/B 테스트 구성 등 서비스 통신 제어 기술</td></tr><tr><td></td><td>장애 복구</td><td><strong>Self-Healing, Health Check, Leader Election</strong></td><td>장애 탐지 및 자동 복구 메커니즘 구현. Kubernetes 의 Liveness Probe, Kafka 의 컨트롤러 선출 등 예시</td></tr><tr><td><strong>모니터링/관찰성</strong></td><td>시스템 모니터링</td><td><strong>Prometheus, Grafana</strong></td><td>실시간 메트릭 수집 및 시각화. AlertManager 연동으로 SLA 위반 감지 가능</td></tr><tr><td></td><td>분산 추적</td><td><strong>Jaeger, Zipkin, OpenTelemetry</strong></td><td>요청 흐름 추적, 성능 병목 식별, SLA 분석. TraceID 기반으로 메시지 경로 추적에 필수</td></tr><tr><td><strong>보안</strong></td><td>인증 및 암호화</td><td><strong>TLS, mTLS, OAuth2, RBAC</strong></td><td>데이터 전송 암호화, 서비스 간 인증. Istio 를 통한 정책 기반 인증/인가 구성 가능</td></tr><tr><td></td><td>분산 보안 정책</td><td><strong>IAM, Network Policy, Zero Trust</strong></td><td>멀티 테넌시, 경계 없는 네트워크 환경에서 최소 권한 접근 제어 및 흐름 제어 정책 설정 필요</td></tr><tr><td><strong>데이터</strong></td><td>데이터 복제/샤딩</td><td><strong>Master-Slave, Multi-Master, Sharding</strong></td><td>고가용성, 장애 내성 및 수평 확장성 확보. NoSQL 계열 (예: Cassandra, MongoDB, CockroachDB) 에서 핵심</td></tr><tr><td></td><td>분산 데이터베이스</td><td><strong>Cassandra, CockroachDB, TiDB 등</strong></td><td>지리적으로 분산된 데이터 저장/읽기. Eventual Consistency 와 데이터 파티셔닝 전략 필수 이해</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th><th>관련 기술 / 개념</th></tr></thead><tbody><tr><td><strong>이론 및 원칙</strong></td><td><strong>CAP 이론</strong></td><td>일관성 (C), 가용성 (A), 분할 허용성 (P) 중 2 가지만 동시에 만족 가능</td><td>CA, CP, AP 모델 구분 기준</td></tr><tr><td></td><td><strong>BASE 원칙</strong></td><td>Basically Available, Soft State, Eventually Consistent</td><td>NoSQL, Eventually Consistency</td></tr><tr><td></td><td><strong>Fallacies of Distributed Computing</strong></td><td>분산 시스템 설계 시 흔한 오해들 (예: 네트워크는 항상 안정적이다 등)</td><td>네트워크/지연/시계 차이 기반 설계 주의점</td></tr><tr><td><strong>일관성 모델</strong></td><td><strong>Strong Consistency</strong></td><td>모든 노드에서 항상 최신 데이터를 읽음 (Linearizability 포함)</td><td>HBase, Spanner, Raft</td></tr><tr><td></td><td><strong>Eventual Consistency</strong></td><td>시간이 지나면 모든 노드가 일관된 상태에 수렴</td><td>DynamoDB, Cassandra</td></tr><tr><td></td><td><strong>Quorum</strong></td><td>합의나 동기화를 위해 필요한 최소 노드 수</td><td>Paxos, Raft, Cassandra</td></tr><tr><td><strong>합의 알고리즘</strong></td><td><strong>Paxos</strong></td><td>고장 허용 분산 환경에서 일관성을 보장하는 복잡한 합의 알고리즘</td><td>Chubby, etcd 내부 구성</td></tr><tr><td></td><td><strong>Raft</strong></td><td>리더 선출, 로그 복제 등 구현이 쉬운 합의 알고리즘</td><td>etcd, Consul, CockroachDB</td></tr><tr><td><strong>데이터 설계 및 처리</strong></td><td><strong>샤딩 (Sharding)</strong></td><td>데이터를 여러 노드에 분산 저장하여 처리량 향상</td><td>MongoDB, Elasticsearch</td></tr><tr><td></td><td><strong>복제 (Replication)</strong></td><td>동일 데이터를 다중 노드에 저장하여 내결함성과 가용성 확보</td><td>Kafka, MySQL, Cassandra</td></tr><tr><td></td><td><strong>Event Sourcing</strong></td><td>상태를 이벤트 시퀀스로 저장하며 변경 이력을 관리</td><td>Kafka + CQRS, Axon Framework</td></tr><tr><td></td><td><strong>CQRS</strong></td><td>Command 와 Query 를 분리하여 확장성과 유연성 확보</td><td>CommandBus, ReadModel</td></tr><tr><td></td><td><strong>Saga Pattern</strong></td><td>분산 트랜잭션을 보상 작업으로 나누어 처리하는 트랜잭션 패턴</td><td>Kafka Saga Orchestrator, BPMN</td></tr><tr><td><strong>통신/미들웨어</strong></td><td><strong>gRPC</strong></td><td>고성능 RPC 프로토콜, HTTP/2 기반 이진 통신 지원</td><td>Istio, Envoy, microservices RPC</td></tr><tr><td></td><td><strong>메시지 큐 (Message Queue)</strong></td><td>비동기 메시지 전송을 위한 큐 기반 통신 구조</td><td>RabbitMQ, SQS, Celery</td></tr><tr><td></td><td><strong>Service Mesh</strong></td><td>마이크로서비스 간 통신을 추상화하여 관측, 보안, 라우팅 등을 자동화</td><td>Istio, Linkerd, Consul Connect</td></tr><tr><td><strong>아키텍처 패턴</strong></td><td><strong>마이크로서비스 (MSA)</strong></td><td>서비스 기능을 독립적으로 분리하여 유연한 배포 및 확장 가능</td><td>Spring Boot, Kubernetes</td></tr><tr><td></td><td><strong>Sidecar Pattern</strong></td><td>보조 기능 (모니터링, 보안 등) 을 메인 서비스와 함께 배포</td><td>Istio Proxy, Dapr Sidecar</td></tr><tr><td></td><td><strong>Bulkhead Pattern</strong></td><td>장애 격리를 위한 리소스 분리 설계</td><td>Thread Pool 분리, 컨테이너 단위 서비스 격리</td></tr><tr><td></td><td><strong>Circuit Breaker</strong></td><td>실패한 서비스 호출을 차단하여 장애 확산 방지</td><td>Netflix Hystrix, Resilience4j</td></tr><tr><td><strong>운영 및 배포</strong></td><td><strong>Service Discovery</strong></td><td>동적 서비스 위치 탐지, 부하 분산 및 확장 지원</td><td>Consul, Eureka, Kubernetes DNS</td></tr><tr><td></td><td><strong>Auto Scaling</strong></td><td>트래픽 또는 부하에 따라 자원을 자동 확장/축소</td><td>Kubernetes HPA, AWS ASG</td></tr><tr><td></td><td><strong>Orchestration</strong></td><td>컨테이너 배포·운영·확장 등을 자동화</td><td>Kubernetes, Nomad</td></tr><tr><td></td><td><strong>Canary Deployment</strong></td><td>점진적 배포 전략으로 리스크 최소화</td><td>Argo Rollouts, Flagger</td></tr><tr><td></td><td><strong>Blue-Green Deployment</strong></td><td>무중단 배포 전략. 기존과 새 환경을 번갈아 사용</td><td>Spinnaker, Jenkins Pipeline</td></tr><tr><td></td><td><strong>Distributed Tracing</strong></td><td>요청이 여러 서비스에 걸쳐 흐르는 과정을 추적</td><td>Jaeger, Zipkin, OpenTelemetry</td></tr><tr><td><strong>보안 및 네트워크</strong></td><td><strong>Mutual TLS (mTLS)</strong></td><td>클라이언트와 서버가 서로 인증하는 TLS 기반 통신</td><td>Istio 인증 정책, SPIFFE</td></tr><tr><td></td><td><strong>RBAC / ACL</strong></td><td>역할 기반 접근 제어 및 구체적 권한 설정</td><td>Kubernetes RoleBinding, Kafka ACL</td></tr><tr><td><strong>지표/운영 메트릭</strong></td><td><strong>SLA (Service Level Agreement)</strong></td><td>서비스 성능/가용성 등에 대한 공급자와 소비자 간 합의</td><td>MTTR, Uptime %, Availability %</td></tr><tr><td></td><td><strong>Backpressure</strong></td><td>소비자가 처리 불가능할 때 전송 속도를 제한</td><td>Reactive Streams, Kafka Fetch</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><a href=https://dev.to/somadevtoo/9-software-architecture-patterns-for-distributed-systems-2o86>분산 시스템 아키텍처 패턴 – DEV Community</a></li><li><a href=https://cloud.google.com/architecture/hybrid-multicloud-patterns-and-practices/distributed-patterns>Google Cloud 분산 아키텍처 패턴</a></li><li><a href=https://martinfowler.com/articles/patterns-of-distributed-systems/>Martin Fowler의 분산 시스템 패턴 카탈로그</a></li><li><a href=https://www.ibm.com/think/topics/cap-theorem>CAP 이론 상세 설명 – IBM</a></li><li><a href=https://raft.github.io/>Raft 합의 알고리즘 공식 사이트</a></li><li><a href=https://www.geeksforgeeks.org/system-design-netflix-a-complete-architecture/>Netflix 마이크로서비스 아키텍처 – GeeksforGeeks</a></li><li><a href=https://kafka.apache.org/documentation/>Apache Kafka 공식 문서</a></li><li><a href=https://raft.github.io/>Raft 합의 알고리즘 논문</a></li><li><a href=https://www.infoq.com/articles/cap-twelve-years-later-how-the-rules-have-changed/>CAP 정리 원문 – Eric Brewer (InfoQ)</a></li><li><a href=https://microservices.io/>마이크로서비스 패턴 – Chris Richardson</a></li><li><a href=https://www.paloaltonetworks.com/resources/whitepapers/distributed-systems-security>분산 시스템 보안 – Palo Alto Networks</a></li><li><a href=https://www.ibm.com/cloud/learn/distributed-systems>IBM 분산 시스템 개요</a></li><li><a href=https://learn.microsoft.com/ko-kr/azure/architecture/patterns/distributed-aggregator>Microsoft Azure 분산 시스템 설계 가이드 (ko)</a></li><li><a href=https://aws.amazon.com/ko/builders-library/the-captain-of-caps-theory/>AWS “CAP 이론과 BASE 원칙” 블로그</a></li><li><a href=https://cloud.google.com/architecture/distributed-systems>Google Cloud “분산 시스템 설계 및 운영” 문서</a></li><li><a href=https://www.infoq.com/articles/fault-tolerance-distributed-systems/>InfoQ “분산 시스템의 장애 허용성” 기사</a></li><li><a href=https://kubernetes.io/ko/docs/concepts/overview/what-is-kubernetes/>Kubernetes와 분산 시스템 오케스트레이션</a></li><li><a href=https://www.honeycomb.io/blog/>중앙 집중형 분산 시스템 관찰성 – Honeycomb 블로그</a></li></ul><hr></div><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Consistency Models</h2></header><div class=entry-content><p>Consistency Models 분산 시스템에서의 일관성 패턴 (Consistency Patterns) 은 데이터 일관성을 유지하기 위한 다양한 전략을 말한다. 이러한 패턴은 시스템의 성능, 가용성, 지연 시간 등과의 균형을 고려하여 선택된다. 주요 패턴으로는 강한 일관성 (Strong Consistency), 약한 일관성 (Weak Consistency), 최종 일관성 (Eventual Consistency), 인과 일관성 (Causal Consistency) 등이 있으며, 각 패턴은 특정한 사용 사례와 요구 사항에 적합하다.
핵심 개념 일관성 패턴은 분산 시스템에서 데이터의 일관성을 유지하기 위한 설계 전략이다. 분산 시스템이란 여러 노드 (서버, 컴퓨터) 로 구성되어 네트워크를 통해 서로 통신하며 작동하는 시스템을 말한다. 이런 환경에서 데이터 일관성을 유지하는 것은 중요한 과제이다.
...</p></div><footer class=entry-footer><span title='2024-10-09 00:23:00 +0000 UTC'>October 9, 2024</span>&nbsp;·&nbsp;24 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Consistency Models" href=https://buenhyden.github.io/posts/system-design/distributed-systems/distributed-concurrency/consistency-models/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Distributed Coordination</h2></header><div class=entry-content><p>Distributed Coordination 4. 전체 개요 (250 자 내외) 분산 조정 (Distributed Coordination) 은 분산 시스템의 핵심 구조로, 노드 간 협업을 위해 합의, 리더 선출, 락, 이벤트 통지 등을 관리한다. ZooKeeper 또는 etcd 와 같은 분산 조정 서비스는 트리 기반의 데이터 모델, 감시 (watches), 순차 Znode, 쿼럼을 통해 일관적이고 내결함성 있는 운영을 지원한다. Paxos·Raft·2PC 및 gossip 방식 등 다양한 알고리즘이 사용되며, 시스템 설계 시 CAP 정리, 장애 대응, 성능 최적화가 주요 고려 요소다.
...</p></div><footer class=entry-footer><span title='2025-07-07 14:52:00 +0000 UTC'>July 7, 2025</span>&nbsp;·&nbsp;31 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Distributed Coordination" href=https://buenhyden.github.io/posts/system-design/distributed-systems/distributed-coordination/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>데이터베이스 클러스터링(Database Clustering)</h2></header><div class=entry-content><p>데이터베이스 클러스터링(Database Clustering) 하나의 데이터베이스를 여러 개의 서버 또는 인스턴스로 구성하여 운영하는 기술.
이 방식은 데이터베이스의 가용성, 성능, 그리고 확장성을 향상시키기 위해 사용된다..
데이터베이스 클러스터링(Database Clustering)은 하나의 데이터베이스를 여러 개의 서버 또는 인스턴스로 구성하여 운영하는 기술이다. 이 방식은 데이터베이스의 가용성, 성능, 그리고 확장성을 향상시키기 위해 사용된다.
클러스터링의 목적 고가용성(High Availability) 확보: 하나의 서버가 실패하더라도 다른 서버가 작업을 계속할 수 있어 서비스 중단을 최소화한다. 부하 분산(Load Balancing): 여러 서버로 작업을 분산시켜 전체적인 성능을 향상시킵니다[3]. 확장성(Scalability) 개선: 필요에 따라 서버를 추가하여 시스템의 처리 능력을 증가시킬 수 있습니다[2]. 구성 방식:
데이터베이스 클러스터링은 주로 두 가지 방식으로 구성된다.
...</p></div><footer class=entry-footer><span title='2024-10-22 06:27:00 +0000 UTC'>October 22, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to 데이터베이스 클러스터링(Database Clustering)" href=https://buenhyden.github.io/posts/system-design/distributed-systems/clustering/></a></article></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>