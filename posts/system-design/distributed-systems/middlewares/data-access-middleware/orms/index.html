<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Object-Relational Mapping | hyunyoun's Blog</title><meta name=keywords content="Databases,More-about-Databases,ORM"><meta name=description content="객체 지향 프로그래밍 언어와 관계형 데이터베이스 사이의 불일치를 해결하기 위한 기술"><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/system-design/distributed-systems/middlewares/data-access-middleware/orms/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/system-design/distributed-systems/middlewares/data-access-middleware/orms/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/system-design/distributed-systems/middlewares/data-access-middleware/orms/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/system-design/distributed-systems/middlewares/data-access-middleware/orms/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Object-Relational Mapping"><meta property="og:description" content="객체 지향 프로그래밍 언어와 관계형 데이터베이스 사이의 불일치를 해결하기 위한 기술"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Object-Relational Mapping"><meta name=twitter:description content="객체 지향 프로그래밍 언어와 관계형 데이터베이스 사이의 불일치를 해결하기 위한 기술"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Object-Relational Mapping","item":"https://buenhyden.github.io/posts/system-design/distributed-systems/middlewares/data-access-middleware/orms/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a></div><h1>Object-Relational Mapping</h1><div class=post-description>객체 지향 프로그래밍 언어와 관계형 데이터베이스 사이의 불일치를 해결하기 위한 기술</div></header><div class=post-content><h2 id=object-relational-mapping-orm>Object-Relational Mapping (ORM)<a hidden class=anchor aria-hidden=true href=#object-relational-mapping-orm>#</a></h2><h3 id=1-부-태그-분류-구조-요약-및-개요>1 부. 태그, 분류 구조, 요약 및 개요<a hidden class=anchor aria-hidden=true href=#1-부-태그-분류-구조-요약-및-개요>#</a></h3><h4 id=1-태그-tag>1. 태그 (Tag)<a hidden class=anchor aria-hidden=true href=#1-태그-tag>#</a></h4><p>ORM, Object-Relational-Mapping, Database-Integration, Data-Modeling</p><h4 id=2-분류-구조의-적합성-분석>2. 분류 구조의 적합성 분석<a hidden class=anchor aria-hidden=true href=#2-분류-구조의-적합성-분석>#</a></h4><p>&ldquo;Systems and Infrastructure > Database Systems > Database Integration&rdquo; 분류는 Object-Relational Mapping (ORM) 의 본질을 잘 반영합니다. ORM 은 객체지향 언어와 관계형 데이터베이스 간의 통합을 담당하는 핵심 기술로, 데이터베이스 통합 (Database Integration) 카테고리에서 다루는 것이 타당합니다.</p><h4 id=3-200-자-내외-요약>3. 200 자 내외 요약<a hidden class=anchor aria-hidden=true href=#3-200-자-내외-요약>#</a></h4><p>Object-Relational Mapping (ORM) 은 객체지향 프로그래밍 언어의 객체와 관계형 데이터베이스의 테이블 간 매핑을 자동화하는 기술입니다. SQL 쿼리 없이 객체 단위로 데이터베이스 작업을 할 수 있어 개발 생산성과 유지보수성이 크게 향상됩니다.</p><h4 id=4-250-자-내외-개요>4. 250 자 내외 개요<a hidden class=anchor aria-hidden=true href=#4-250-자-내외-개요>#</a></h4><p>ORM(Object-Relational Mapping) 은 객체지향 언어의 객체와 관계형 데이터베이스의 테이블 간 변환을 자동으로 처리하는 기술입니다. 개발자는 객체 단위로 데이터 조작이 가능하며, SQL 쿼리 작성 없이 데이터베이스 연동이 가능합니다. 이는 코드의 일관성과 생산성을 높이고, 데이터베이스 독립성을 강화합니다. 대표적인 ORM 프레임워크로는 Python 의 SQLAlchemy, Django ORM, Java 의 Hibernate, JavaScript 의 TypeORM 등이 있습니다.</p><h3 id=2-부-orm-심층-분석>2 부. ORM 심층 분석<a hidden class=anchor aria-hidden=true href=#2-부-orm-심층-분석>#</a></h3><h4 id=1-핵심-개념>1. 핵심 개념<a hidden class=anchor aria-hidden=true href=#1-핵심-개념>#</a></h4><ul><li><strong>ORM(Object-Relational Mapping, 객체 - 관계 매핑)</strong>: 객체지향 언어의 객체와 관계형 데이터베이스의 테이블을 자동으로 매핑하여 데이터 조작을 추상화하는 기술.</li><li><strong>Entity(엔티티)</strong>: 데이터베이스의 테이블에 대응되는 객체.</li><li><strong>Mapping(매핑)</strong>: 객체의 속성과 테이블의 컬럼을 연결하는 과정.</li></ul><h4 id=2-실무-연관성-분석>2. 실무 연관성 분석<a hidden class=anchor aria-hidden=true href=#2-실무-연관성-분석>#</a></h4><ul><li>SQL 쿼리 작성 없이 객체 단위로 데이터베이스 조작 가능.</li><li>유지보수와 확장성, 코드 일관성 확보에 매우 효과적.</li><li>데이터베이스 독립성과 테스트 용이성 향상.</li></ul><h4 id=3-배경>3. 배경<a hidden class=anchor aria-hidden=true href=#3-배경>#</a></h4><ul><li>객체지향 언어와 관계형 데이터베이스 간의 패러다임 불일치 (임피던스 미스매치, Impedance Mismatch) 문제 해결을 위해 등장.</li></ul><h4 id=4-목적-및-필요성>4. 목적 및 필요성<a hidden class=anchor aria-hidden=true href=#4-목적-및-필요성>#</a></h4><ul><li>객체지향적 개발과 관계형 데이터베이스 연동의 생산성 및 일관성 향상.</li><li>데이터베이스 변경 시 코드 수정 최소화.</li></ul><h4 id=5-주요-기능-및-역할>5. 주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#5-주요-기능-및-역할>#</a></h4><ul><li>객체와 테이블 간 자동 매핑</li><li>CRUD(Create, Read, Update, Delete) 연산 추상화</li><li>트랜잭션 관리, 지연 로딩, 관계 매핑 등 부가 기능</li></ul><h4 id=6-특징>6. 특징<a hidden class=anchor aria-hidden=true href=#6-특징>#</a></h4><ul><li>객체지향적 데이터 접근</li><li>SQL 쿼리 자동 생성</li><li>데이터베이스 독립성 강화</li></ul><h4 id=7-핵심-원칙>7. 핵심 원칙<a hidden class=anchor aria-hidden=true href=#7-핵심-원칙>#</a></h4><ul><li>객체와 테이블의 1:1 혹은 N:1 매핑</li><li>객체 간 관계 (연관, 상속 등) 와 데이터베이스 외래키 등 관계 매핑</li></ul><h4 id=8-주요-원리-및-작동-원리>8. 주요 원리 및 작동 원리<a hidden class=anchor aria-hidden=true href=#8-주요-원리-및-작동-원리>#</a></h4><pre class=mermaid>flowchart TD
    A[도메인 객체]  B[ORM 매핑 엔진]
    B  C[관계형 데이터베이스]
</pre><ul><li><strong>설명</strong>: 도메인 객체와 데이터베이스 간의 데이터 변환 및 쿼리 생성을 ORM 엔진이 자동으로 처리합니다.</li></ul><h4 id=9-구조-및-아키텍처>9. 구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#9-구조-및-아키텍처>#</a></h4><table><thead><tr><th>구성 요소</th><th>기능</th><th>역할</th></tr></thead><tbody><tr><td>엔티티 클래스</td><td>데이터 모델 정의</td><td>테이블과 매핑되는 객체</td></tr><tr><td>ORM 매핑 엔진</td><td>매핑 및 쿼리 생성</td><td>객체 - 테이블 변환, SQL 생성</td></tr><tr><td>쿼리 빌더</td><td>동적 쿼리 생성</td><td>복잡한 쿼리 추상화</td></tr><tr><td>트랜잭션 관리자</td><td>트랜잭션 처리</td><td>데이터 일관성 유지</td></tr></tbody></table><h5 id=선택-구성요소>선택 구성요소<a hidden class=anchor aria-hidden=true href=#선택-구성요소>#</a></h5><table><thead><tr><th>구성 요소</th><th>기능</th><th>역할</th></tr></thead><tbody><tr><td>마이그레이션 도구</td><td>스키마 관리</td><td>DB 구조 변경 자동화</td></tr><tr><td>캐시 시스템</td><td>성능 향상</td><td>반복 조회 데이터 캐싱</td></tr></tbody></table><h3 id=3-부-구현-기법-장단점-실무-활용>3 부. 구현 기법, 장단점, 실무 활용<a hidden class=anchor aria-hidden=true href=#3-부-구현-기법-장단점-실무-활용>#</a></h3><h4 id=1-구현-기법>1. 구현 기법<a hidden class=anchor aria-hidden=true href=#1-구현-기법>#</a></h4><ul><li><strong>Annotation/Decorator 기반 매핑</strong>: 클래스에 어노테이션 (데코레이터) 으로 매핑 정보 지정</li><li><strong>XML/설정 파일 기반 매핑</strong>: 별도 파일에 매핑 정의</li><li><strong>Code-First/Database-First</strong>: 코드에서 DB 생성 또는 DB 에서 코드 자동 생성</li></ul><h4 id=2-장점>2. 장점<a hidden class=anchor aria-hidden=true href=#2-장점>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>생산성 향상</td><td>SQL 작성 없이 객체로 데이터 조작</td></tr><tr><td>장점</td><td>유지보수성</td><td>코드 일관성 및 재사용성 증가</td></tr><tr><td>장점</td><td>DB 독립성</td><td>DBMS 변경 시 영향 최소화</td></tr><tr><td>장점</td><td>보안성</td><td>SQL Injection 등 보안 위험 감소</td></tr></tbody></table><h4 id=3-단점과-문제점-그리고-해결방안>3. 단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#3-단점과-문제점-그리고-해결방안>#</a></h4><h5 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h5><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>성능 저하</td><td>불필요한 쿼리, N+1 문제</td><td>쿼리 최적화, Eager/Lazy 로딩 조정</td></tr><tr><td>단점</td><td>복잡성 증가</td><td>복잡한 매핑/관계 관리</td><td>설계 단순화, 문서화 강화</td></tr><tr><td>단점</td><td>추상화 한계</td><td>특정 DB 기능 활용 어려움</td><td>Native Query 지원 병행</td></tr></tbody></table><h5 id=문제점>문제점<a hidden class=anchor aria-hidden=true href=#문제점>#</a></h5><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>N+1 쿼리</td><td>지연 로딩</td><td>성능 저하</td><td>쿼리 로그 분석</td><td>Eager 로딩 활용</td><td>Join Fetch 사용</td></tr><tr><td>문제점</td><td>데이터 불일치</td><td>동시성 문제</td><td>데이터 손실</td><td>트랜잭션 모니터링</td><td>락/트랜잭션 강화</td><td>낙관적/비관적 락</td></tr><tr><td>문제점</td><td>스키마 불일치</td><td>모델 -DB 불일치</td><td>런타임 오류</td><td>마이그레이션 도구 활용</td><td>스키마 동기화</td><td>자동 마이그레이션</td></tr></tbody></table><h4 id=4-도전-과제>4. 도전 과제<a hidden class=anchor aria-hidden=true href=#4-도전-과제>#</a></h4><ul><li>대규모 데이터/복잡한 관계에서의 성능 최적화</li><li>다양한 DBMS 지원 및 호환성 확보</li><li>복잡한 도메인 모델의 매핑 자동화</li></ul><h4 id=5-분류-기준에-따른-종류-및-유형>5. 분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#5-분류-기준에-따른-종류-및-유형>#</a></h4><table><thead><tr><th>분류 기준</th><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>매핑 방식</td><td>Annotation 기반</td><td>클래스/필드에 어노테이션 사용</td></tr><tr><td>매핑 방식</td><td>설정 파일 기반</td><td>XML 등 외부 파일로 매핑</td></tr><tr><td>개발 전략</td><td>Code-First</td><td>코드에서 DB 생성</td></tr><tr><td>개발 전략</td><td>Database-First</td><td>DB 에서 코드 생성</td></tr><tr><td>프레임워크</td><td>SQLAlchemy, Hibernate, Django ORM 등</td><td>언어별 ORM 구현체</td></tr></tbody></table><h4 id=6-실무-사용-예시>6. 실무 사용 예시<a hidden class=anchor aria-hidden=true href=#6-실무-사용-예시>#</a></h4><table><thead><tr><th>사용 분야</th><th>함께 사용하는 시스템</th><th>목적</th><th>효과</th></tr></thead><tbody><tr><td>웹 서비스</td><td>Django ORM, PostgreSQL</td><td>데이터 관리 자동화</td><td>개발 생산성, 유지보수 향상</td></tr><tr><td>API 서버</td><td>SQLAlchemy, MySQL</td><td>REST API 개발</td><td>SQL 추상화, 코드 일관성</td></tr><tr><td>엔터프라이즈</td><td>Hibernate, Oracle</td><td>대규모 트랜잭션 관리</td><td>복잡한 관계 자동 매핑</td></tr></tbody></table><h4 id=7-활용-사례>7. 활용 사례<a hidden class=anchor aria-hidden=true href=#7-활용-사례>#</a></h4><ul><li><strong>웹 서비스 개발 (Django ORM 활용)</strong><ul><li>사용자는 게시글 작성, 조회, 수정, 삭제를 객체 단위로 처리</li><li>ORM 미적용 시: SQL 쿼리 직접 작성, 유지보수 어려움</li><li>ORM 적용 시: 객체 단위 조작, 코드 일관성 및 생산성 향상</li></ul></li></ul><pre class=mermaid>flowchart TD
    User[사용자] --&gt; View[웹 뷰/컨트롤러]
    View --&gt; Model[ORM 엔티티/모델]
    Model --&gt; DB[관계형 데이터베이스]
</pre><h4 id=8-구현-예시-python-django-orm>8. 구현 예시 (Python, Django ORM)<a hidden class=anchor aria-hidden=true href=#8-구현-예시-python-django-orm>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Django ORM을 활용한 게시글 모델 정의 및 데이터 조작 예시</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>django.db</span> <span class=kn>import</span> <span class=n>models</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 게시글(Article) 모델 정의</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Article</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>title</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>200</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>content</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>TextField</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>created_at</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateTimeField</span><span class=p>(</span><span class=n>auto_now_add</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 게시글 생성</span>
</span></span><span class=line><span class=cl><span class=n>article</span> <span class=o>=</span> <span class=n>Article</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=n>title</span><span class=o>=</span><span class=s1>&#39;ORM 소개&#39;</span><span class=p>,</span> <span class=n>content</span><span class=o>=</span><span class=s1>&#39;ORM의 장점과 단점 등...&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># 게시글 조회</span>
</span></span><span class=line><span class=cl><span class=n>articles</span> <span class=o>=</span> <span class=n>Article</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>title__contains</span><span class=o>=</span><span class=s1>&#39;ORM&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># 게시글 수정</span>
</span></span><span class=line><span class=cl><span class=n>article</span><span class=o>.</span><span class=n>title</span> <span class=o>=</span> <span class=s1>&#39;ORM 상세 소개&#39;</span>
</span></span><span class=line><span class=cl><span class=n>article</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1># 게시글 삭제</span>
</span></span><span class=line><span class=cl><span class=n>article</span><span class=o>.</span><span class=n>delete</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>설명</strong>: SQL 쿼리 없이 객체 단위로 데이터 조작이 가능하며, 데이터베이스 독립적인 코드 작성이 가능합니다.</li></ul><h4 id=9-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>9. 실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#9-실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>설계</td><td>매핑 구조 단순화</td><td>복잡한 관계 최소화</td></tr><tr><td>운영</td><td>쿼리 최적화</td><td>불필요한 쿼리 방지</td></tr><tr><td>성능</td><td>Eager/Lazy 로딩 조정</td><td>상황에 맞는 로딩 전략 선택</td></tr><tr><td>테스트</td><td>스키마 동기화</td><td>모델 -DB 일치 확인</td></tr></tbody></table><ul><li><strong>권장사항</strong>: 쿼리 로그 모니터링, 정기적 마이그레이션, 문서화 강화</li></ul><h4 id=10-최적화하기-위한-고려사항-및-주의할-점>10. 최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#10-최적화하기-위한-고려사항-및-주의할-점>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>성능</td><td>N+1 쿼리 방지</td><td>Join, Prefetch 활용</td></tr><tr><td>확장성</td><td>캐시 활용</td><td>반복 조회 데이터 캐싱</td></tr><tr><td>운영</td><td>트랜잭션 관리</td><td>일관성/동시성 확보</td></tr><tr><td>유지보수</td><td>마이그레이션 자동화</td><td>스키마 관리 자동화</td></tr></tbody></table><ul><li><strong>권장사항</strong>: 성능 테스트 자동화, 캐시 전략 도입, 트랜잭션 정책 명확화</li></ul><h3 id=4-부-주제별-주목할-내용-및-학습-필수-항목>4 부. 주제별 주목할 내용 및 학습 필수 항목<a hidden class=anchor aria-hidden=true href=#4-부-주제별-주목할-내용-및-학습-필수-항목>#</a></h3><h4 id=1-주제별-주목할-내용>1. 주제별 주목할 내용<a hidden class=anchor aria-hidden=true href=#1-주제별-주목할-내용>#</a></h4><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>매핑</td><td>ORM</td><td>객체 - 테이블 매핑</td><td>개발 생산성 및 일관성 확보</td></tr><tr><td>성능</td><td>N+1 쿼리</td><td>지연 로딩 이슈</td><td>쿼리 최적화 필요</td></tr><tr><td>운영</td><td>마이그레이션</td><td>스키마 자동화</td><td>모델 -DB 동기화</td></tr><tr><td>확장성</td><td>DB 독립성</td><td>여러 DBMS 지원</td><td>코드 재사용성 증가</td></tr></tbody></table><h4 id=2-반드시-학습해야할-내용>2. 반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#2-반드시-학습해야할-내용>#</a></h4><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>ORM</td><td>ORM 원리</td><td>객체 - 테이블 변환</td><td>ORM 의 기본 구조와 동작 방식</td></tr><tr><td>성능</td><td>쿼리 최적화</td><td>Eager/Lazy 로딩</td><td>성능 이슈 해결 기법</td></tr><tr><td>운영</td><td>마이그레이션</td><td>스키마 관리</td><td>DB 구조 변경 자동화</td></tr><tr><td>테스트</td><td>DB 독립 테스트</td><td>Mock DB 활용</td><td>테스트 환경 분리</td></tr></tbody></table><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>ORM</td><td>엔티티 (Entity)</td><td>테이블과 매핑되는 객체</td></tr><tr><td>ORM</td><td>매핑 (Mapping)</td><td>객체와 테이블, 속성과 컬럼의 연결</td></tr><tr><td>성능</td><td>N+1 쿼리</td><td>지연 로딩으로 인한 반복 쿼리 문제</td></tr><tr><td>운영</td><td>마이그레이션 (Migration)</td><td>DB 스키마 변경 자동화 도구</td></tr><tr><td>운영</td><td>트랜잭션 (Transaction)</td><td>일관성 있는 데이터 처리 단위</td></tr><tr><td>운영</td><td>Eager/Lazy 로딩</td><td>데이터 즉시/지연 로딩 방식</td></tr></tbody></table><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><a href=https://en.wikipedia.org/wiki/Object-relational_mapping>Object-Relational Mapping 개념 및 예시</a></li><li><a href=https://docs.djangoproject.com/en/stable/topics/db/models/>Django ORM 공식 문서</a></li><li><a href=https://docs.sqlalchemy.org/en/20/orm/>SQLAlchemy 공식 문서</a></li><li><a href=https://hibernate.org/orm/documentation/>Hibernate 공식 문서</a></li><li><a href=https://techblog.woowahan.com/2661/>N+1 문제와 해결법</a></li><li><a href=https://www.baeldung.com/hibernate-orm-advantages-disadvantages>ORM의 장단점과 실무 적용</a></li></ul><hr><h2 id=1-태그>1. 태그<a hidden class=anchor aria-hidden=true href=#1-태그>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Object‑Relational‑Mapping, Data‑Access‑Layer, ORM‑Patterns, Persistence‑Framework
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=2-분류-구조-적절성-분석>2. 분류 구조 적절성 분석<a hidden class=anchor aria-hidden=true href=#2-분류-구조-적절성-분석>#</a></h2><p>&ldquo;Systems and Infrastructure > Database Systems > Database Integration&rdquo; 경로에 ORM 을 배치하는 것은 적절합니다. ORM 은 <strong>애플리케이션 레이어와 관계형 DB 간 데이터 매핑</strong>을 자동화하는 핵심 기술이기 때문에, 데이터베이스 통합 개념으로 잘 들어맞습니다.</p><hr><h2 id=3-요약-200-자>3. 요약 (≈200 자)<a hidden class=anchor aria-hidden=true href=#3-요약-200-자>#</a></h2><p>ORM(Object‑Relational Mapping) 은 객체 지향 언어의 클래스와 관계형 데이터베이스의 테이블 간 <strong>데이터 매핑을 자동으로 처리</strong>해주는 기술입니다. 이를 통해 SQL 코드의 중복을 줄이고, <strong>CRUD 연산을 객체 기반으로 간결하게 수행</strong>할 수 있습니다. 대표적 라이브러리로는 Hibernate(Java), Entity Framework(.NET), SQLAlchemy(Python), Django ORM 등이 있습니다.</p><hr><h2 id=4-개요-250-자>4. 개요 (≈250 자)<a hidden class=anchor aria-hidden=true href=#4-개요-250-자>#</a></h2><p>ORM 은 <strong>응용 코드와 DB 간의 불일치 (Impedance Mismatch)</strong> 문제를 해결하기 위한 접근입니다. 객체 지향 언어에서는 클래스, 상속, 참조 등 다양한 개념을 사용하지만, 관계형 DB 는 테이블, 조인, 외래키 기반입니다. ORM 은 이러한 간극을 SQL 쿼리 생성을 자동화, 객체 상태를 데이터베이스와 동기화, 트랜잭션 및 세션 관리까지 담당합니다. 핵심 원리는 메타데이터 기반 매핑 설정, 영속성 컨텍스트 (Persistence Context) 유지, 지연 로딩 (Lazy Loading) 등의 실행 패턴입니다. ORM 사용으로 개발자는 SQL 코드에 집중하지 않고, 도메인 중심 설계 (Domain‑Driven Design) 에 집중할 수 있습니다.</p><hr><h2 id=5-핵심-개념>5. 핵심 개념<a hidden class=anchor aria-hidden=true href=#5-핵심-개념>#</a></h2><table><thead><tr><th>개념</th><th>설명</th><th>실무 적용</th></tr></thead><tbody><tr><td><strong>매핑 (Mapping)</strong></td><td>클래스 ↔ 테이블, 속성 ↔ 컬럼, 관계 ↔ FK/Join</td><td>어노테이션 (XML/Attribute 기반 매핑 설정</td></tr><tr><td><strong>세션/엔티티 매니저</strong></td><td>객체 상태 추적 및 DB 동기화 단위</td><td>트랜잭션 범위 내 변경 감지 및 flush</td></tr><tr><td><strong>트랜잭션 관리</strong></td><td>commit/rollback 자동화</td><td>데이터 무결성과 일관성 유지</td></tr><tr><td><strong>가상/지연 로딩 (Lazy Loading)</strong></td><td>참조 객체 실제 참조 시점까지 로드 지연</td><td>성능 최적화, N+1 문제 주의</td></tr><tr><td><strong>Eager Loading</strong></td><td>즉시 조인 조회</td><td>쿼리 수 감소, 오버페치 가능성</td></tr><tr><td><strong>쿼리 언어</strong></td><td>JPQL, HQL, LINQ, QueryBuilder 등</td><td>SQL 의존도 줄이고, 타입 안정성 확보</td></tr><tr><td><strong>캐싱</strong></td><td>1 차/2 차 캐시 지원</td><td>DB I/O 절감 및 응답 속도 향상</td></tr></tbody></table><h3 id=51-실무-연결>5.1. 실무 연결<a hidden class=anchor aria-hidden=true href=#51-실무-연결>#</a></h3><ul><li><strong>매핑 설계</strong>: 테이블 구조가 복잡할 경우 ORM 매핑 고려 및 DB 구조 설계 필요</li><li><strong>세션 / 트랜잭션 관리</strong>: 세션 범위 결정 전략 (request‑scope, batch 등) 이 성능에 직접 영향</li><li><strong>지연 로딩 관리</strong>: N+1 문제 방지, Join Fetch 전략 설계</li><li><strong>쿼리 선택</strong>: 복잡한 집계나 퍼포먼스가 필요한 경우 ORM 대신 원시 SQL 옵션 고려</li></ul><hr><hr><h2 id=-6-배경-및-목적-background--purpose>✅ 6. 배경 및 목적 (Background & Purpose)<a hidden class=anchor aria-hidden=true href=#-6-배경-및-목적-background--purpose>#</a></h2><p><strong>배경</strong>: 전통적인 애플리케이션 개발에서 객체 지향 언어와 관계형 DB 간의 불일치 (Object–Relational Impedance Mismatch) 가 개발 복잡성을 증가함.</p><p><strong>목적</strong>:</p><ul><li>SQL 코드 중복 제거, 도메인 모델 중심 개발 가능</li><li>트랜잭션, 캐싱, 세션 관리를 자동화</li><li>다중 DB 지원 및 보안 강화 (<a href="https://docs.jboss.org/hibernate/orm/5.6/userguide/html_single/Hibernate_User_Guide.html?utm_source=chatgpt.com" title="Hibernate ORM 5.6.15.Final User Guide">JBoss Documentation</a>, <a href="https://www.altexsoft.com/blog/orm-object-relational-mapping/?utm_source=chatgpt.com" title="Object-Relational Mapping (ORM) Explained with Examples - AltexSoft">AltexSoft</a>)</li></ul><hr><h2 id=-7-주요-기능-및-특징>✅ 7. 주요 기능 및 특징<a hidden class=anchor aria-hidden=true href=#-7-주요-기능-및-특징>#</a></h2><table><thead><tr><th>기능</th><th>설명</th></tr></thead><tbody><tr><td>자동 매핑</td><td>클래스 ↔ 테이블, 속성 ↔ 컬럼, 관계 (FK ↔ 객체)</td></tr><tr><td>CRUD 자동화</td><td>객체 조작 → SQL 자동 생성</td></tr><tr><td>트랜잭션 관리</td><td>세션 범위에서 커밋·롤백 자동화</td></tr><tr><td>지연 로딩</td><td>Lazy Loading, 필요 시 연관 객체 조회 (<a href="https://www.doctrine-project.org/projects/doctrine-orm/en/3.5/reference/working-with-objects.html?utm_source=chatgpt.com" title="Working with Objects - Doctrine Object Relational Mapper (ORM)">Doctrine</a>, <a href="https://rieckpil.de/how-to-lazy-loading-of-jpa-attributes-with-hibernate/?utm_source=chatgpt.com" title="Lazy Loading of JPA attributes with Hibernate - rieckpil">rieckpil</a>)</td></tr><tr><td>캐싱 지원</td><td>1 차·2 차 캐시로 DB 부하 감소</td></tr><tr><td>DB 무관성</td><td>추상화된 SQL 사용으로 DB 벤더 변경 용이</td></tr></tbody></table><hr><h2 id=-8-핵심-원리-및-작동-방식-원리-다이어그램>✅ 8. 핵심 원리 및 작동 방식 (원리 다이어그램)<a hidden class=anchor aria-hidden=true href=#-8-핵심-원리-및-작동-방식-원리-다이어그램>#</a></h2><pre class=mermaid>sequenceDiagram
  participant App as 애플리케이션
  participant ORM as ORM 레이어
  participant DB as 관계형 DB

  App-&gt;&gt;ORM: 객체 조작 (save/update/delete)
  ORM-&gt;&gt;DB: SQL 쿼리 생성 &amp; 실행
  DB--&gt;&gt;ORM: 결과 반환
  ORM--&gt;App: 도메인 객체로 결과 반환
</pre><ul><li>ORM 은 ** 메타데이터 (mapping 정보)** 를 사용해 SQL 을 생성</li><li><strong>세션/엔티티 매니저</strong>는 객체 상태를 추적하고 flush 트리거 처리</li><li><strong>Lazy/Eager 전략</strong>을 통해 로딩 타이밍 제어</li></ul><hr><h2 id=-9-구조-및-구성-요소>✅ 9. 구조 및 구성 요소<a hidden class=anchor aria-hidden=true href=#-9-구조-및-구성-요소>#</a></h2><pre class=mermaid>graph TD
  subgraph App
    A[도메인 객체(Entity)]
    B[Repository/DAO]
  end
  subgraph ORM Core
    M[메타데이터 매핑]
    S[세션/엔티티 매니저]
    T[트랜잭션 관리자]
    Q[Query Builder / ORM Query Language]
    C[캐시 (1차/2차)]
  end
  DB[(RDBMS)]
  A --&gt; B --&gt; S
  S --&gt; M
  S --&gt; Q
  Q --&gt; DB
  S --&gt; C
  S --&gt; T
</pre><ul><li><strong>필수 구성 요소</strong>: 메타데이터, 세션/엔티티 매니저, 트랜잭션 관리자, 쿼리 빌더</li><li><strong>선택 구성 요소</strong>: 캐시, 엔티티 그래프, Batch Fetch, 천천히 로딩 전략 등</li></ul><hr><h2 id=-10-구현-기법-및-패턴>✅ 10. 구현 기법 및 패턴<a hidden class=anchor aria-hidden=true href=#-10-구현-기법-및-패턴>#</a></h2><ul><li><strong>Active Record</strong>: 객체에 CRUD 메서드 포함 (예: Rails, Eloquent)</li><li><strong>Data Mapper</strong>: 객체와 DB 로직 분리 (예: Hibernate, Doctrine) (<a href="https://en.wikipedia.org/wiki/Hibernate_%28framework%29?utm_source=chatgpt.com" title="Hibernate (framework)">위키백과</a>, <a href="https://www.cdata.com/blog/object-relational-mapping?utm_source=chatgpt.com" title="Object-Relational Mapping Explained: Benefits, Drawbacks & Tools">CData Software</a>)</li><li><strong>Unit of Work</strong>: 변경 추적 후 커밋 시 일괄 처리</li><li><strong>Lazy vs Eager Loading</strong>: 필요에 따라 조인 전략 설정</li><li><strong>Bytecode Enhancement</strong>: 런타임 또는 빌드 타임 코드 조작으로 lazy 로딩 최적화</li></ul><hr><h2 id=-11-장점>✅ 11. 장점<a hidden class=anchor aria-hidden=true href=#-11-장점>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>생산성 향상</td><td>SQL 작성↓, 비즈니스 로직 집중 가능</td></tr><tr><td></td><td>가독성 증대</td><td>객체 중심 설계로 코드 관점 명확</td></tr><tr><td></td><td>보안 강화</td><td>SQL Injection 자동 방지</td></tr><tr><td></td><td>유지보수 편리</td><td>스키마 변경에도 매핑 리팩토링 중심</td></tr><tr><td></td><td>DB 독립성</td><td>다양한 벤더 지원으로 유연한 선택</td></tr></tbody></table><hr><h2 id=-12-단점-및-문제점-및-해결방안>✅ 12. 단점 및 문제점 및 해결방안<a hidden class=anchor aria-hidden=true href=#-12-단점-및-문제점-및-해결방안>#</a></h2><h3 id=단점-1>단점<a hidden class=anchor aria-hidden=true href=#단점-1>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>성능 오버헤드</td><td>ORM 추상화로 인한 비효율 쿼리 (<a href="https://www.geeksforgeeks.org/java/hibernate-eager-lazy-loading/?utm_source=chatgpt.com" title="Hibernate - Eager/Lazy Loading - GeeksforGeeks">GeeksforGeeks</a>)</td><td>복잡 쿼리는 네이티브 SQL 로 병행</td></tr><tr><td></td><td>학습 곡선</td><td>내부 동작 원리 숙지 필요</td><td>교육 및 운영 경험 개선</td></tr><tr><td></td><td>디버깅 어려움</td><td>자동 SQL 추적 복잡</td><td>로깅, SQL 히스토리 추적 도구 적용</td></tr></tbody></table><h3 id=문제점-1>문제점<a hidden class=anchor aria-hidden=true href=#문제점-1>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지</th><th>예방</th><th>해결</th></tr></thead><tbody><tr><td>문제점</td><td>N+1 문제</td><td>Lazy 반복 조회</td><td>DB 호출 폭발 (<a href="https://www.doctrine-project.org/projects/doctrine-orm/en/3.5/reference/working-with-objects.html?utm_source=chatgpt.com" title="Working with Objects - Doctrine Object Relational Mapper (ORM)">Doctrine</a>, <a href="https://dev.lucee.org/t/orm-pros-and-cons/10620?utm_source=chatgpt.com" title="ORM Pros and Cons - documentation - Lucee Dev">dev.lucee.org</a>)</td><td>로그 모니터링</td><td>Fetch Join, Batch Fetch</td><td>ORM 설정 교정</td></tr><tr><td></td><td>Lazy 초기화 오류</td><td>세션 종료 후 지연 호출</td><td>LazyInitializationException</td><td>예외 모니터</td><td>DTO + fetch join</td><td>Entity 그래프 설정</td></tr><tr><td></td><td>메모리 누수</td><td>캐시 오용 또는 글로벌 세션</td><td>성능 저하</td><td>메트릭 확인</td><td>명확한 세션 범위 설계</td><td>세션/캐시 리스팅 구현</td></tr></tbody></table><hr><h2 id=-13-실무-사용-예시>✅ 13. 실무 사용 예시<a hidden class=anchor aria-hidden=true href=#-13-실무-사용-예시>#</a></h2><table><thead><tr><th>사용 기술</th><th>예시</th><th>목적</th><th>효과</th></tr></thead><tbody><tr><td>Hibernate + Spring</td><td>블로그 게시판 엔티티 CRUD</td><td>코드 간소화 → 객체 중심</td><td>생산성 및 유지보수 향상</td></tr><tr><td>SQLAlchemy</td><td>분석 플랫폼 매핑</td><td>동적 쿼리 생성</td><td>일관된 모델 + DB 추상화</td></tr><tr><td>Entity Framework</td><td>.NET 전자상거래 주문 관리</td><td>LINQ 기반 조회</td><td>타입 안정성 + 이식성 확보</td></tr></tbody></table><hr><h2 id=-14-활용-사례-django-orm-을-활용한-블로그-작성>✅ 14. 활용 사례: Django ORM 을 활용한 블로그 작성<a hidden class=anchor aria-hidden=true href=#-14-활용-사례-django-orm-을-활용한-블로그-작성>#</a></h2><pre class=mermaid>graph TD
  User --&gt; Post
  Post --&gt; Comment
  ORM(User, Post, Comment) via models.py
</pre><ul><li><code>models.py</code> 에 정의된 클래스는 Django ORM 이 자동으로 테이블로 생성</li><li><code>Post.objects.filter(author=user)</code> 등 메서드 기반 CRUD</li><li>복잡 쿼리가 필요하면 <code>raw()</code> 지원</li></ul><p><strong>비교</strong>:</p><ul><li>ORM 사용: 이메일 연동, API 개발 시 코드 가독성 및 생산성 향상</li><li>미사용: SQL 직접 작성 → SQL 의존도, 리팩토링 시 리스크 증가</li></ul><hr><h2 id=-15-구현-예시-python--sqlalchemy>✅ 15. 구현 예시 (Python + SQLAlchemy)<a hidden class=anchor aria-hidden=true href=#-15-구현-예시-python--sqlalchemy>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13>13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14>14</a>
</span><span class=lnt id=hl-7-15><a class=lnlinks href=#hl-7-15>15</a>
</span><span class=lnt id=hl-7-16><a class=lnlinks href=#hl-7-16>16</a>
</span><span class=lnt id=hl-7-17><a class=lnlinks href=#hl-7-17>17</a>
</span><span class=lnt id=hl-7-18><a class=lnlinks href=#hl-7-18>18</a>
</span><span class=lnt id=hl-7-19><a class=lnlinks href=#hl-7-19>19</a>
</span><span class=lnt id=hl-7-20><a class=lnlinks href=#hl-7-20>20</a>
</span><span class=lnt id=hl-7-21><a class=lnlinks href=#hl-7-21>21</a>
</span><span class=lnt id=hl-7-22><a class=lnlinks href=#hl-7-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy</span> <span class=kn>import</span> <span class=n>Column</span><span class=p>,</span> <span class=n>Integer</span><span class=p>,</span> <span class=n>String</span><span class=p>,</span> <span class=n>create_engine</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy.orm</span> <span class=kn>import</span> <span class=n>sessionmaker</span><span class=p>,</span> <span class=n>declarative_base</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Base</span> <span class=o>=</span> <span class=n>declarative_base</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>User</span><span class=p>(</span><span class=n>Base</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>__tablename__</span> <span class=o>=</span> <span class=s1>&#39;users&#39;</span>
</span></span><span class=line><span class=cl>    <span class=nb>id</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>Integer</span><span class=p>,</span> <span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>String</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>email</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>String</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>engine</span> <span class=o>=</span> <span class=n>create_engine</span><span class=p>(</span><span class=s1>&#39;sqlite:///app.db&#39;</span><span class=p>,</span> <span class=n>echo</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Session</span> <span class=o>=</span> <span class=n>sessionmaker</span><span class=p>(</span><span class=n>bind</span><span class=o>=</span><span class=n>engine</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>session</span> <span class=o>=</span> <span class=n>Session</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CRUD 예시</span>
</span></span><span class=line><span class=cl><span class=n>new_user</span> <span class=o>=</span> <span class=n>User</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&#34;Alice&#34;</span><span class=p>,</span> <span class=n>email</span><span class=o>=</span><span class=s2>&#34;a@example.com&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>session</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>new_user</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>session</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>users</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>User</span><span class=p>)</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>User</span><span class=o>.</span><span class=n>name</span><span class=o>==</span><span class=s1>&#39;Alice&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>users</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>SQL 은 자동 생성됨</li><li>세션 commit/rollback 자동 처리</li></ul><hr><h3 id=다음-단계>다음 단계<a hidden class=anchor aria-hidden=true href=#다음-단계>#</a></h3><p>16 이후—<strong>도전 과제, 분류 기준별 유형, 실무 유의사항, 최적화 고려사항, 용어 정리 등</strong>—도 계속 작성해 드릴 수 있습니다. 어느 부분을 다음에 집중할지 말씀 주세요!</p><p>이어서 16 번부터 정리해드립니다.</p><hr><h2 id=-16-실무-사용-예시>✅ 16. 실무 사용 예시<a hidden class=anchor aria-hidden=true href=#-16-실무-사용-예시>#</a></h2><table><thead><tr><th>사용 기술</th><th>사용 대상</th><th>목적</th><th>효과</th></tr></thead><tbody><tr><td>Hibernate (Java)</td><td>기업 내부 ERP 시스템</td><td>DB 독립성 확보 및 생산성 향상</td><td>유지보수 비용 절감, 스키마 변경 대응력 ↑</td></tr><tr><td>Django ORM (Python)</td><td>블로그, SNS 서비스</td><td>모델 중심 개발 및 자동 마이그레이션</td><td>빠른 MVP 개발 가능</td></tr><tr><td>Entity Framework (.NET)</td><td>병원 예약 시스템</td><td>정형화된 데이터와 복잡한 관계 처리</td><td>LINQ 로 정적 타입 기반 질의 보장</td></tr><tr><td>Sequelize (Node.js)</td><td>쇼핑몰 백오피스 API</td><td>JS 기반에서 RDB 연동 최적화</td><td>Express 연동 시 구조 일관성 유지</td></tr><tr><td>SQLAlchemy Core + ORM</td><td>데이터 분석 ETL 파이프라인</td><td>쿼리 표현력과 ORM 결합</td><td>복잡한 쿼리와 ORM 공존 가능</td></tr></tbody></table><hr><h2 id=-17-활용-사례-분석>✅ 17. 활용 사례 분석<a hidden class=anchor aria-hidden=true href=#-17-활용-사례-분석>#</a></h2><h3 id=사례-django-orm-을-이용한-콘텐츠-추천-api-설계>사례: Django ORM 을 이용한 콘텐츠 추천 API 설계<a hidden class=anchor aria-hidden=true href=#사례-django-orm-을-이용한-콘텐츠-추천-api-설계>#</a></h3><h4 id=-목표>🎯 목표<a hidden class=anchor aria-hidden=true href=#-목표>#</a></h4><ul><li>콘텐츠 조회 기록 기반으로 사용자 맞춤 콘텐츠를 추천</li><li>데이터 모델: <code>User</code>, <code>Content</code>, <code>ViewHistory</code>, <code>Tag</code></li></ul><h4 id=-시스템-구성>🔧 시스템 구성<a hidden class=anchor aria-hidden=true href=#-시스템-구성>#</a></h4><pre class=mermaid>graph TD
  A[User] --&gt;|views| C[ViewHistory]
  C --&gt; B[Content]
  B --&gt; D[Tag]
</pre><h4 id=-workflow>🧪 Workflow<a hidden class=anchor aria-hidden=true href=#-workflow>#</a></h4><ol><li>사용자 로그인</li><li>최근 <code>ViewHistory</code> 를 조회</li><li>관련 <code>Tag</code> 기반 추천 <code>Content</code> 선정</li><li>Lazy Loading 으로 <code>Tag</code> → <code>Content</code> 매핑 최적화</li><li>추천 콘텐츠 반환</li></ol><h4 id=orm-역할>ORM 역할<a hidden class=anchor aria-hidden=true href=#orm-역할>#</a></h4><ul><li><code>User.objects.prefetch_related('viewhistory_set__content__tag_set')</code> 로 최적화</li><li>SQL 없이 모델 중심 추천 로직 구현 가능</li></ul><h4 id=orm-미사용-시-비교>ORM 미사용 시 비교<a hidden class=anchor aria-hidden=true href=#orm-미사용-시-비교>#</a></h4><ul><li>복잡한 JOIN 과 서브쿼리 SQL 직접 작성 필요</li><li>유지보수, 보안, 생산성 측면에서 열세</li></ul><hr><h2 id=-18-구현-예시-django-orm-기반-추천-코드>✅ 18. 구현 예시 (Django ORM 기반 추천 코드)<a hidden class=anchor aria-hidden=true href=#-18-구현-예시-django-orm-기반-추천-코드>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a>
</span><span class=lnt id=hl-9-11><a class=lnlinks href=#hl-9-11>11</a>
</span><span class=lnt id=hl-9-12><a class=lnlinks href=#hl-9-12>12</a>
</span><span class=lnt id=hl-9-13><a class=lnlinks href=#hl-9-13>13</a>
</span><span class=lnt id=hl-9-14><a class=lnlinks href=#hl-9-14>14</a>
</span><span class=lnt id=hl-9-15><a class=lnlinks href=#hl-9-15>15</a>
</span><span class=lnt id=hl-9-16><a class=lnlinks href=#hl-9-16>16</a>
</span><span class=lnt id=hl-9-17><a class=lnlinks href=#hl-9-17>17</a>
</span><span class=lnt id=hl-9-18><a class=lnlinks href=#hl-9-18>18</a>
</span><span class=lnt id=hl-9-19><a class=lnlinks href=#hl-9-19>19</a>
</span><span class=lnt id=hl-9-20><a class=lnlinks href=#hl-9-20>20</a>
</span><span class=lnt id=hl-9-21><a class=lnlinks href=#hl-9-21>21</a>
</span><span class=lnt id=hl-9-22><a class=lnlinks href=#hl-9-22>22</a>
</span><span class=lnt id=hl-9-23><a class=lnlinks href=#hl-9-23>23</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># models.py</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>User</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>255</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Content</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>title</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>255</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>tags</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ManyToManyField</span><span class=p>(</span><span class=s1>&#39;Tag&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Tag</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>255</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ViewHistory</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>user</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=n>User</span><span class=p>,</span> <span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>content</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=n>Content</span><span class=p>,</span> <span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>viewed_at</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateTimeField</span><span class=p>(</span><span class=n>auto_now_add</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 추천 API 예시</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>recommend</span><span class=p>(</span><span class=n>user_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>user</span> <span class=o>=</span> <span class=n>User</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=n>user_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>recent_views</span> <span class=o>=</span> <span class=n>ViewHistory</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>user</span><span class=o>=</span><span class=n>user</span><span class=p>)</span><span class=o>.</span><span class=n>order_by</span><span class=p>(</span><span class=s1>&#39;-viewed_at&#39;</span><span class=p>)[:</span><span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>tag_ids</span> <span class=o>=</span> <span class=n>Tag</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>content__viewhistory__in</span><span class=o>=</span><span class=n>recent_views</span><span class=p>)</span><span class=o>.</span><span class=n>values_list</span><span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=n>flat</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>recommended</span> <span class=o>=</span> <span class=n>Content</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>tags__in</span><span class=o>=</span><span class=n>tag_ids</span><span class=p>)</span><span class=o>.</span><span class=n>distinct</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>recommended</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>지연 로딩 제어</strong>: <code>select_related</code>, <code>prefetch_related</code></li><li><strong>ORM 특화 기능</strong>: <code>.distinct()</code>, <code>.values_list()</code></li></ul><hr><h2 id=-19-도전-과제>✅ 19. 도전 과제<a hidden class=anchor aria-hidden=true href=#-19-도전-과제>#</a></h2><table><thead><tr><th>카테고리</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>N+1 문제</td><td>Lazy 로딩 남용</td><td>과도한 DB 쿼리</td><td>SQL 로그 모니터링</td><td>Fetch Join 사용</td><td>DTO + 조인 전략 변경</td></tr><tr><td>고급 쿼리 처리 한계</td><td>ORM 추상화의 한계</td><td>집계/Window 함수 어려움</td><td>Query Explain Plan</td><td>원시 SQL 또는 View 사용</td><td>Hybrid 접근</td></tr><tr><td>트랜잭션 경계 불분명</td><td>ORM 내 자동 커밋</td><td>비정상 동작</td><td>예외 추적</td><td>명시적 트랜잭션 관리</td><td><code>@Transactional</code> 혹은 <code>session.begin()</code> 사용</td></tr><tr><td>스키마 동기화 오류</td><td>마이그레이션 누락</td><td>런타임 에러</td><td>Migration log 확인</td><td>Alembic / Django Migrate 활용</td><td>테스트 자동화 포함</td></tr></tbody></table><hr><h2 id=-20-분류-기준에-따른-종류-및-유형>✅ 20. 분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#-20-분류-기준에-따른-종류-및-유형>#</a></h2><table><thead><tr><th>분류 기준</th><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>매핑 방식</td><td>Active Record</td><td>객체가 DB 조작 포함 (Rails 등)</td></tr><tr><td>매핑 방식</td><td>Data Mapper</td><td>객체와 DB 분리 (Hibernate, SQLAlchemy)</td></tr><tr><td>로딩 전략</td><td>Eager</td><td>관계된 객체 즉시 조회</td></tr><tr><td>로딩 전략</td><td>Lazy</td><td>실제 접근 시점까지 지연</td></tr><tr><td>DB 추상화 수준</td><td>High-Level ORM</td><td>SQL 자동 생성, 복잡 로직 지원</td></tr><tr><td>DB 추상화 수준</td><td>Lightweight ORM</td><td>단순 매핑 중심 (Peewee 등)</td></tr></tbody></table><hr><h2 id=-2122-실무-적용-및-최적화-고려사항>✅ 21~22. 실무 적용 및 최적화 고려사항<a hidden class=anchor aria-hidden=true href=#-2122-실무-적용-및-최적화-고려사항>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>실무 적용</td><td>세션 범위 설계</td><td>요청/트랜잭션 경계 설정</td><td><code>Unit of Work</code> 전략 활용</td></tr><tr><td>실무 적용</td><td>DTO 분리</td><td>View 용 객체 별도 구성</td><td>성능과 역할 분리 가능</td></tr><tr><td>최적화</td><td>캐시 사용</td><td>반복 조회 캐싱</td><td>1 차/2 차 캐시 전략 설정</td></tr><tr><td>최적화</td><td>복잡 쿼리 별도 처리</td><td>통계, 집계용 쿼리는 SQL 직접 사용</td><td>View 또는 Materialized View 로 분리</td></tr><tr><td>최적화</td><td>Lazy 설정 제한</td><td>필요 시 Fetch Join 전환</td><td><code>.select_related</code>, <code>.prefetch_related</code> 활용</td></tr></tbody></table><hr><h2 id=-23-학습-필요-항목>✅ 23. 학습 필요 항목<a hidden class=anchor aria-hidden=true href=#-23-학습-필요-항목>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>ORM 전략</td><td>N+1 문제 해결</td><td>Lazy vs Eager 이해</td><td>SQL 추적 및 대응</td></tr><tr><td>트랜잭션</td><td>@Transactional / Unit of Work</td><td>커밋/롤백 정확성</td><td>비즈니스 로직 보호</td></tr><tr><td>쿼리 최적화</td><td>Native SQL 연동</td><td>ORM 한계 보완</td><td>분석/집계에 사용</td></tr><tr><td>마이그레이션</td><td>DB 버전 관리</td><td>Alembic / Flyway 등</td><td>팀 단위 버전 관리</td></tr></tbody></table><hr><h2 id=용어-정리-1>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-1>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>ORM 개념</td><td>Entity</td><td>DB 테이블에 대응하는 객체</td></tr><tr><td>ORM 개념</td><td>Session</td><td>ORM 내부 트랜잭션 상태 관리자</td></tr><tr><td>ORM 전략</td><td>Lazy Loading</td><td>실제 접근 시 객체 로드</td></tr><tr><td>ORM 전략</td><td>Fetch Join</td><td>관련 객체를 JOIN 으로 미리 로드</td></tr><tr><td>ORM 전략</td><td>DTO</td><td>데이터 전송 전용 객체</td></tr></tbody></table><hr><h2 id=참고-및-출처-1>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-1>#</a></h2><ul><li><a href=https://hibernate.org/orm/documentation/>Hibernate 공식 문서</a></li><li><a href=https://docs.sqlalchemy.org/>SQLAlchemy 공식 가이드</a></li><li><a href=https://docs.djangoproject.com/en/stable/topics/db/models/>Django ORM 공식 문서</a></li><li><a href=https://guides.rubyonrails.org/active_record_basics.html>ActiveRecord in Rails</a></li><li><a href=https://learn.microsoft.com/en-us/ef/>Entity Framework Docs</a></li></ul><hr><p>이어서 ORM 주제에 대한 <strong>기타 사항</strong>, <strong>관련 기술 비교</strong>, <strong>ORM 프레임워크별 특성</strong>, <strong>ORM 발전 동향</strong>, 그리고 <strong>ORM 과 마이크로서비스 연계 고려사항</strong>까지 정리해드립니다.</p><hr><h2 id=-24-기타-사항>✅ 24. 기타 사항<a hidden class=anchor aria-hidden=true href=#-24-기타-사항>#</a></h2><h3 id=-orm-도입-시-고려-요소>✅ ORM 도입 시 고려 요소<a hidden class=anchor aria-hidden=true href=#-orm-도입-시-고려-요소>#</a></h3><ul><li><strong>서비스 규모</strong>: 소형 프로젝트에서는 ORM 의 추상화 장점이 크지만, 대형 시스템에서는 복잡한 쿼리나 성능 최적화를 위해 원시 SQL 병행 필요</li><li><strong>개발 팀 역량</strong>: ORM 의 Lazy/Eager 로딩, 트랜잭션 경계, 마이그레이션 등 내부 원리에 대한 이해가 부족하면 오히려 생산성이 떨어질 수 있음</li><li><strong>DB 설계 철학</strong>: 정규화 중심의 관계형 모델에 최적화되어 있으나, 일부 도메인에서는 NoSQL 모델과 충돌 발생 가능성 있음</li><li><strong>DB 제약조건 처리</strong>: 복합 PK (Primary Key), 다중 컬럼 FK (Foreign Key) 등 복잡한 제약 조건은 ORM 에서 다루기 까다로움</li></ul><hr><h2 id=-25-orm-vs-raw-sql-비교>✅ 25. ORM Vs Raw SQL 비교<a hidden class=anchor aria-hidden=true href=#-25-orm-vs-raw-sql-비교>#</a></h2><table><thead><tr><th>구분</th><th>ORM</th><th>Raw SQL</th></tr></thead><tbody><tr><td>개발 속도</td><td>빠름 (자동 매핑, CRUD 제공)</td><td>느림 (직접 SQL 작성 필요)</td></tr><tr><td>유지보수성</td><td>높음 (도메인 중심 구조화)</td><td>낮음 (쿼리 수정 시 도메인 반영 필요)</td></tr><tr><td>최적화 가능성</td><td>낮음 (추상화 오버헤드)</td><td>높음 (인덱스 활용, 튜닝 가능)</td></tr><tr><td>복잡 쿼리 처리</td><td>한계 존재</td><td>유연하고 정밀함</td></tr><tr><td>보안</td><td>SQL Injection 방지 기본 제공</td><td>Prepared Statement 필요</td></tr><tr><td>디버깅</td><td>추적 어려움</td><td>명확한 쿼리 경로 확인 가능</td></tr></tbody></table><hr><h2 id=-26-orm-주요-프레임워크-비교>✅ 26. ORM 주요 프레임워크 비교<a hidden class=anchor aria-hidden=true href=#-26-orm-주요-프레임워크-비교>#</a></h2><table><thead><tr><th>ORM 프레임워크</th><th>주요 언어</th><th>특징</th><th>단점</th></tr></thead><tbody><tr><td>Hibernate</td><td>Java</td><td>JPA 구현체, 풍부한 기능, 엔터프라이즈용</td><td>복잡성 높음</td></tr><tr><td>SQLAlchemy</td><td>Python</td><td>ORM + Expression Language 지원</td><td>설정 자유도가 높아 학습 필요</td></tr><tr><td>Django ORM</td><td>Python</td><td>Django 프레임워크 내 통합</td><td>ORM 독립적 사용 제한</td></tr><tr><td>Entity Framework</td><td>.NET (C#)</td><td>LINQ 지원, 강력한 타입 안정성</td><td>고급 쿼리 한계</td></tr><tr><td>Sequelize</td><td>Node.js</td><td>JS 기반 ORM, Promise 지원</td><td>대규모 트랜잭션 관리 어려움</td></tr><tr><td>TypeORM</td><td>TypeScript</td><td>Type-safe ORM, Decorator 기반</td><td>유지보수 불안정 사례 존재</td></tr></tbody></table><hr><h2 id=-27-orm-발전-동향-및-기술-트렌드>✅ 27. ORM 발전 동향 및 기술 트렌드<a hidden class=anchor aria-hidden=true href=#-27-orm-발전-동향-및-기술-트렌드>#</a></h2><table><thead><tr><th>트렌드</th><th>설명</th></tr></thead><tbody><tr><td>GraphQL 연동 ORM</td><td>Prisma, Hasura 등 GraphQL 과 ORM 을 통합하여 빠른 API 생성 가능</td></tr><tr><td>Serverless 친화 ORM</td><td>PlanetScale + Prisma, Supabase ORM 처럼 Serverless 환경을 고려한 ORM 설계 등장</td></tr><tr><td>데이터 형상 추적</td><td>Temporal Table, Event Sourcing 등과 ORM 통합으로 변경 이력 관리 기능 강화</td></tr><tr><td>Micro ORM 의 부상</td><td>Dapper (.NET), PetaPoco 등 경량 ORM 이 대규모 서비스에서 다시 주목됨</td></tr><tr><td>Polyglot Persistence</td><td>ORM + NoSQL 하이브리드 접근으로 복합 쿼리 처리 성능 최적화 사례 증가</td></tr></tbody></table><hr><h2 id=-28-orm-과-마이크로서비스-연계-고려사항>✅ 28. ORM 과 마이크로서비스 연계 고려사항<a hidden class=anchor aria-hidden=true href=#-28-orm-과-마이크로서비스-연계-고려사항>#</a></h2><table><thead><tr><th>고려 요소</th><th>설명</th><th>권장 사항</th></tr></thead><tbody><tr><td>DB 분리 원칙</td><td>MSA 환경에서는 각 서비스가 독립된 DB 를 가짐</td><td>ORM 을 각 서비스 단위로 설정 (Shared DB 지양)</td></tr><tr><td>트랜잭션 일관성</td><td>분산 트랜잭션은 어렵고 보장 안 됨</td><td>SAGA 패턴 또는 이벤트 기반 처리 도입</td></tr><tr><td>통합 조회 API</td><td>ORM 기반에서는 연계 조회 어려움</td><td>API Gateway + GraphQL 또는 CQRS 기반 설계</td></tr><tr><td>공통 ORM 추상화 금지</td><td>공용 ORM 모듈은 서비스 독립성을 해침</td><td>각 도메인 전용 ORM 설정 권장</td></tr></tbody></table><hr><h2 id=-29-주제-관련-주목할-내용-정리>✅ 29. 주제 관련 주목할 내용 정리<a hidden class=anchor aria-hidden=true href=#-29-주제-관련-주목할-내용-정리>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>ORM 핵심</td><td>Lazy/Eager 로딩</td><td>성능과 연관된 ORM 로딩 전략</td><td></td></tr><tr><td>ORM 트러블슈팅</td><td>N+1 문제</td><td>반복 Lazy 로딩으로 발생하는 문제</td><td></td></tr><tr><td>아키텍처 설계</td><td>ORM in MSA</td><td>마이크로서비스에서 ORM 활용 시 고려할 분리 전략</td><td></td></tr><tr><td>성능 개선</td><td>Fetch Join, DTO 분리</td><td>ORM 성능 최적화를 위한 주요 기법</td><td></td></tr><tr><td>보안</td><td>SQL Injection 대응</td><td>ORM 사용으로 기본 대응 가능</td><td></td></tr></tbody></table><hr><h2 id=-30-반드시-학습해야-할-추가-내용>✅ 30. 반드시 학습해야 할 추가 내용<a hidden class=anchor aria-hidden=true href=#-30-반드시-학습해야-할-추가-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>ORM 패턴</td><td>Unit of Work</td><td>세션/트랜잭션의 일괄 적용 전략</td><td></td></tr><tr><td>성능 최적화</td><td>2 차 캐시</td><td>ORM 캐시 전략으로 DB 부하 완화</td><td></td></tr><tr><td>마이그레이션 도구</td><td>Alembic / Flyway</td><td>ORM 과 스키마 변경 연동</td><td></td></tr><tr><td>ORM 대안</td><td>QueryBuilder / Dapper</td><td>ORM 의 한계를 보완하는 도구들</td><td></td></tr></tbody></table><hr><h2 id=용어-정리-2>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-2>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>ORM 개념</td><td>Data Mapper</td><td>객체 -DB 분리를 추구하는 매핑 패턴</td></tr><tr><td>ORM 전략</td><td>Fetch Join</td><td>관련 엔티티를 JOIN 으로 한 번에 조회하는 방법</td></tr><tr><td>트랜잭션</td><td>Dirty Checking</td><td>객체 상태 변경 여부를 자동 감지하여 UPDATE 처리</td></tr><tr><td>마이그레이션</td><td>Alembic</td><td>SQLAlchemy 기반 마이그레이션 도구</td></tr><tr><td>MSA 연계</td><td>SAGA Pattern</td><td>분산 트랜잭션 대체 전략으로 이벤트 기반 처리 방식</td></tr></tbody></table><hr><h2 id=참고-및-출처-2>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-2>#</a></h2><ul><li><a href=https://docs.sqlalchemy.org>SQLAlchemy Documentation</a></li><li><a href=https://hibernate.org/orm/documentation/>Hibernate ORM Guide</a></li><li><a href=https://learn.microsoft.com/en-us/ef/>Entity Framework Docs</a></li><li><a href=https://www.prisma.io/>Prisma ORM</a></li><li><a href=https://docs.djangoproject.com/en/stable/topics/db/>Django ORM</a></li><li><a href=https://typeorm.io/>TypeORM Guide</a></li></ul><hr><p>좋습니다. 이번에는 이어서 ORM(Object-Relational Mapping) 과 관련된 <strong>실무 사용 예시</strong>, <strong>활용 사례</strong>, <strong>구현 예시</strong>, <strong>도전 과제</strong>, <strong>분류 기준에 따른 유형</strong>, <strong>적용/최적화 고려사항</strong> 등을 정리해드리겠습니다.</p><hr><h2 id=-31-실무-사용-예시>✅ 31. 실무 사용 예시<a hidden class=anchor aria-hidden=true href=#-31-실무-사용-예시>#</a></h2><table><thead><tr><th>시스템</th><th>연계 기술</th><th>사용 목적</th><th>효과</th></tr></thead><tbody><tr><td>Django 기반 웹 서비스</td><td>Django ORM</td><td>데이터베이스 추상화 및 자동 마이그레이션</td><td>생산성 향상, 유지보수 용이</td></tr><tr><td>Spring Boot 백엔드</td><td>Hibernate (JPA)</td><td>트랜잭션 처리 및 엔티티 중심 개발</td><td>코드 일관성 유지, 리팩토링 용이</td></tr><tr><td>Node.js 기반 API 서버</td><td>Sequelize</td><td>비동기 ORM 처리 및 관계 관리</td><td>비동기 처리 최적화</td></tr><tr><td>.NET 기반 서비스</td><td>Entity Framework</td><td>LINQ 기반 쿼리로 생산성 확보</td><td>타입 안정성과 IDE 지원</td></tr><tr><td>Microservice 기반 MSA</td><td>각각의 독립 ORM 구성</td><td>서비스별 DB 분리 및 독립 운영</td><td>서비스 간 결합도 최소화</td></tr></tbody></table><hr><h2 id=-32-활용-사례>✅ 32. 활용 사례<a hidden class=anchor aria-hidden=true href=#-32-활용-사례>#</a></h2><h3 id=-사례-이커머스-플랫폼에서-orm-사용>🧩 사례: 이커머스 플랫폼에서 ORM 사용<a hidden class=anchor aria-hidden=true href=#-사례-이커머스-플랫폼에서-orm-사용>#</a></h3><h4 id=-시스템-구성-1>📌 시스템 구성<a hidden class=anchor aria-hidden=true href=#-시스템-구성-1>#</a></h4><ul><li>사용자 서비스 (User)</li><li>상품 서비스 (Product)</li><li>주문 서비스 (Order)</li><li>각각의 마이크로서비스는 자체 DB 보유 (PostgreSQL)</li><li>ORM: Django ORM (User), SQLAlchemy (Product), Hibernate (Order)</li></ul><pre class=mermaid>graph TD
  U[User Service (Django ORM)] --&gt; DB1[(PostgreSQL)]
  P[Product Service (SQLAlchemy)] --&gt; DB2[(PostgreSQL)]
  O[Order Service (Hibernate)] --&gt; DB3[(PostgreSQL)]
  GW[API Gateway] --&gt; U
  GW --&gt; P
  GW --&gt; O
</pre><h4 id=-workflow-1>📌 Workflow<a hidden class=anchor aria-hidden=true href=#-workflow-1>#</a></h4><ol><li>사용자 로그인 → User ORM 인증</li><li>상품 조회 → Product ORM 조건 필터링</li><li>주문 생성 → Order ORM 과 트랜잭션 관리</li></ol><h4 id=-orm-역할>📌 ORM 역할<a hidden class=anchor aria-hidden=true href=#-orm-역할>#</a></h4><ul><li>DB 추상화, 마이그레이션 자동화, 도메인 중심 설계, 타입 안전성 확보</li><li>GraphQL 연계 시 DB 직접 접근 없이 API 계층에서 엔티티 사용 가능</li></ul><h4 id=-orm-미도입-시-차이점>📌 ORM 미도입 시 차이점<a hidden class=anchor aria-hidden=true href=#-orm-미도입-시-차이점>#</a></h4><table><thead><tr><th>항목</th><th>ORM 사용</th><th>ORM 미사용</th></tr></thead><tbody><tr><td>생산성</td><td>높음 (모델 → DB 연동 자동화)</td><td>낮음 (SQL 작성 및 유지)</td></tr><tr><td>유지보수성</td><td>높음 (모델 중심 설계)</td><td>낮음 (스키마와 로직 분리)</td></tr><tr><td>확장성</td><td>높음 (마이그레이션, 버전 관리 가능)</td><td>낮음 (DB 변경 리스크 큼)</td></tr></tbody></table><hr><h2 id=-33-구현-예시-python--sqlalchemy>✅ 33. 구현 예시 (Python + SQLAlchemy)<a hidden class=anchor aria-hidden=true href=#-33-구현-예시-python--sqlalchemy>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15>15</a>
</span><span class=lnt id=hl-11-16><a class=lnlinks href=#hl-11-16>16</a>
</span><span class=lnt id=hl-11-17><a class=lnlinks href=#hl-11-17>17</a>
</span><span class=lnt id=hl-11-18><a class=lnlinks href=#hl-11-18>18</a>
</span><span class=lnt id=hl-11-19><a class=lnlinks href=#hl-11-19>19</a>
</span><span class=lnt id=hl-11-20><a class=lnlinks href=#hl-11-20>20</a>
</span><span class=lnt id=hl-11-21><a class=lnlinks href=#hl-11-21>21</a>
</span><span class=lnt id=hl-11-22><a class=lnlinks href=#hl-11-22>22</a>
</span><span class=lnt id=hl-11-23><a class=lnlinks href=#hl-11-23>23</a>
</span><span class=lnt id=hl-11-24><a class=lnlinks href=#hl-11-24>24</a>
</span><span class=lnt id=hl-11-25><a class=lnlinks href=#hl-11-25>25</a>
</span><span class=lnt id=hl-11-26><a class=lnlinks href=#hl-11-26>26</a>
</span><span class=lnt id=hl-11-27><a class=lnlinks href=#hl-11-27>27</a>
</span><span class=lnt id=hl-11-28><a class=lnlinks href=#hl-11-28>28</a>
</span><span class=lnt id=hl-11-29><a class=lnlinks href=#hl-11-29>29</a>
</span><span class=lnt id=hl-11-30><a class=lnlinks href=#hl-11-30>30</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># SQLAlchemy를 활용한 ORM 모델 예시</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy</span> <span class=kn>import</span> <span class=n>Column</span><span class=p>,</span> <span class=n>Integer</span><span class=p>,</span> <span class=n>String</span><span class=p>,</span> <span class=n>create_engine</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy.ext.declarative</span> <span class=kn>import</span> <span class=n>declarative_base</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy.orm</span> <span class=kn>import</span> <span class=n>sessionmaker</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ORM 기본 설정</span>
</span></span><span class=line><span class=cl><span class=n>Base</span> <span class=o>=</span> <span class=n>declarative_base</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 엔티티 정의</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Product</span><span class=p>(</span><span class=n>Base</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>__tablename__</span> <span class=o>=</span> <span class=s1>&#39;products&#39;</span>
</span></span><span class=line><span class=cl>    <span class=nb>id</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>Integer</span><span class=p>,</span> <span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>String</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>price</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>Integer</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># DB 연결 및 세션 생성</span>
</span></span><span class=line><span class=cl><span class=n>engine</span> <span class=o>=</span> <span class=n>create_engine</span><span class=p>(</span><span class=s1>&#39;sqlite:///example.db&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Base</span><span class=o>.</span><span class=n>metadata</span><span class=o>.</span><span class=n>create_all</span><span class=p>(</span><span class=n>engine</span><span class=p>)</span>  <span class=c1># 테이블 자동 생성</span>
</span></span><span class=line><span class=cl><span class=n>Session</span> <span class=o>=</span> <span class=n>sessionmaker</span><span class=p>(</span><span class=n>bind</span><span class=o>=</span><span class=n>engine</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>session</span> <span class=o>=</span> <span class=n>Session</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 객체 삽입</span>
</span></span><span class=line><span class=cl><span class=n>new_product</span> <span class=o>=</span> <span class=n>Product</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s2>&#34;Keyboard&#34;</span><span class=p>,</span> <span class=n>price</span><span class=o>=</span><span class=mi>35000</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>session</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>new_product</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>session</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 객체 조회</span>
</span></span><span class=line><span class=cl><span class=n>products</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>Product</span><span class=p>)</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>Product</span><span class=o>.</span><span class=n>price</span> <span class=o>&gt;</span> <span class=mi>30000</span><span class=p>)</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>products</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>p</span><span class=o>.</span><span class=n>name</span><span class=p>,</span> <span class=n>p</span><span class=o>.</span><span class=n>price</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=-34-도전-과제>✅ 34. 도전 과제<a hidden class=anchor aria-hidden=true href=#-34-도전-과제>#</a></h2><table><thead><tr><th>카테고리</th><th>항목</th><th>설명</th><th>대응 전략</th></tr></thead><tbody><tr><td>성능</td><td>N+1 쿼리</td><td>지연 로딩으로 인한 과도한 쿼리 발생</td><td>Fetch Join 또는 Eager Loading 사용</td></tr><tr><td>확장성</td><td>복잡 쿼리 제한</td><td>ORM DSL 로 표현하기 힘든 쿼리 존재</td><td>Native Query, View 활용</td></tr><tr><td>마이그레이션</td><td>이력 관리 어려움</td><td>스키마 버전 간 호환성 문제</td><td>Alembic, Liquibase 등 사용</td></tr><tr><td>유지보수</td><td>추상화 오버헤드</td><td>ORM 추상화가 오히려 로직 복잡성 증가</td><td>구조적 설계 (DDD 기반) 권장</td></tr></tbody></table><hr><h2 id=-35-분류-기준에-따른-orm-종류>✅ 35. 분류 기준에 따른 ORM 종류<a hidden class=anchor aria-hidden=true href=#-35-분류-기준에-따른-orm-종류>#</a></h2><table><thead><tr><th>분류 기준</th><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>아키텍처</td><td>Active Record</td><td>객체가 DB 연산 책임 가짐 (ex. Django ORM)</td></tr><tr><td>아키텍처</td><td>Data Mapper</td><td>객체와 DB 를 별도로 분리 (ex. Hibernate, SQLAlchemy)</td></tr><tr><td>언어</td><td>Java 계열</td><td>Hibernate, MyBatis</td></tr><tr><td>언어</td><td>Python 계열</td><td>SQLAlchemy, Django ORM</td></tr><tr><td>경량화 여부</td><td>Full ORM</td><td>CRUD + 관계 + 마이그레이션</td></tr><tr><td>경량화 여부</td><td>Micro ORM</td><td>단순 쿼리 매핑 (ex. Dapper)</td></tr></tbody></table><hr><h2 id=-36-실무-적용-고려사항>✅ 36. 실무 적용 고려사항<a hidden class=anchor aria-hidden=true href=#-36-실무-적용-고려사항>#</a></h2><table><thead><tr><th>항목</th><th>고려사항</th><th>권장 사항</th></tr></thead><tbody><tr><td>스키마 변경</td><td>스키마와 코드 일치 유지</td><td>마이그레이션 도구 필수 사용</td></tr><tr><td>트랜잭션 관리</td><td>ORM 트랜잭션 경계 명확히</td><td>세션 범위 내에서 트랜잭션 처리</td></tr><tr><td>로딩 전략</td><td>Lazy vs Eager 선택</td><td>사용 빈도와 관계 복잡성 기반 결정</td></tr><tr><td>DTO 분리</td><td>ORM 모델 직통 반환 지양</td><td>응답용 DTO 별도 정의 권장</td></tr></tbody></table><hr><h2 id=-37-최적화-고려사항>✅ 37. 최적화 고려사항<a hidden class=anchor aria-hidden=true href=#-37-최적화-고려사항>#</a></h2><table><thead><tr><th>항목</th><th>고려사항</th><th>권장 사항</th></tr></thead><tbody><tr><td>쿼리 튜닝</td><td>ORM DSL 한계 극복</td><td>Raw SQL, Hybrid Query 사용</td></tr><tr><td>캐시 활용</td><td>읽기 성능 개선</td><td>2 차 캐시 또는 Redis 연계</td></tr><tr><td>모델 분리</td><td>대규모 모델 대응</td><td>모듈 단위 도메인 분할 권장</td></tr><tr><td>Index</td><td>ORM 자동 생성 Index</td><td>필요시 수동 Index 정의 추가</td></tr></tbody></table><hr><h2 id=정리-요약>정리 요약<a hidden class=anchor aria-hidden=true href=#정리-요약>#</a></h2><p>ORM 은 객체지향 프로그래밍과 관계형 데이터베이스 간 불일치를 해소하고, 코드 중심의 생산성과 유지보수성을 확보하는 핵심 기술입니다. 그러나 추상화의 이면에 있는 성능 저하, N+1 쿼리, 복잡 쿼리 처리 한계 등의 도전 과제를 함께 인식하고 대응 전략을 설계해야 합니다. 실무에서는 트랜잭션, 마이그레이션, 모델 -DTO 분리, 로딩 전략 등 다양한 아키텍처적 고려가 필수적입니다.</p><hr><p>알겠습니다! 이어서 <strong>ORM 과 CQRS 결합</strong>, <strong>ORM 과 NoSQL 연동</strong>, <strong>ORM 테스트 전략</strong>, <strong>보안 및 규칙</strong>, <strong>모니터링 및 로깅</strong> 관련 내용을 정리해 드릴게요.</p><hr><h2 id=-38-orm--cqrs-command-query-responsibility-segregation>✅ 38. ORM + CQRS (Command Query Responsibility Segregation)<a hidden class=anchor aria-hidden=true href=#-38-orm--cqrs-command-query-responsibility-segregation>#</a></h2><h3 id=목적>목적<a hidden class=anchor aria-hidden=true href=#목적>#</a></h3><ul><li><strong>읽기와 쓰기 책임 분리</strong>를 통해 복잡한 도메인 로직과 대량 읽기 요구의 충돌 완화</li></ul><h3 id=설계-방법>설계 방법<a hidden class=anchor aria-hidden=true href=#설계-방법>#</a></h3><ol><li><strong>Write Model</strong>: ORM 으로 도메인 객체 (aggregate) 를 저장하고, 도메인 이벤트 발행</li><li><strong>Read Model</strong>: 이벤트 기반 프로젝션으로 denormalized view 생성</li><li><strong>Query API</strong>: 읽기 전용 DB(ex. Elasticsearch, Redis, Cassandra) 에서 빠르게 응답</li></ol><pre class=mermaid>flowchart LR
  CommandAPI --&gt; ORM[Write ORM]
  ORM --&gt; EventBus
  EventBus --&gt; Projections[Read DB]
  QueryAPI --&gt; Projections
</pre><h3 id=효과>효과<a hidden class=anchor aria-hidden=true href=#효과>#</a></h3><ul><li>ORM 은 <strong>도메인 모델 유지</strong>에 집중하고, 읽기는 <strong>별도 저장소 최적화</strong>, 성능·확장성 확보</li></ul><hr><h2 id=-39-orm-과-nosql-연동>✅ 39. ORM 과 NoSQL 연동<a hidden class=anchor aria-hidden=true href=#-39-orm-과-nosql-연동>#</a></h2><h3 id=상황>상황<a hidden class=anchor aria-hidden=true href=#상황>#</a></h3><ul><li>기존 ORM 중심 서비스에 일부 NoSQL(문서 DB, 키 - 밸류 DB) 도입</li></ul><h3 id=접근-방식>접근 방식<a hidden class=anchor aria-hidden=true href=#접근-방식>#</a></h3><ol><li><strong>비동기 동기화</strong>: ORM 으로 관계형 데이터를 처리하고, 저장/수정 시 NoSQL 에도 복사</li><li><strong>하이브리드 트랜잭션</strong>: 2 단 트랜잭션 또는 SAGA 패턴 사용</li><li><strong>ORM 확장 플러그인</strong> 사용 예: Hibernate OGM, Spring Data MongoDB</li></ol><pre class=mermaid>flowchart LR
  App --&gt; ORM[RDBMS]
  App --&gt; NoSQL[MongoDB]
  App --sync--&gt; NoSQL
  ORM --Transactional--&gt; SAGA
</pre><hr><h2 id=-40-orm-테스트-전략>✅ 40. ORM 테스트 전략<a hidden class=anchor aria-hidden=true href=#-40-orm-테스트-전략>#</a></h2><table><thead><tr><th>테스트 대상</th><th>전략</th></tr></thead><tbody><tr><td>유닛 테스트</td><td><strong>In-memory DB</strong> (SQLite), mocking frameworks</td></tr><tr><td>통합 테스트</td><td><strong>Testcontainers</strong>, 실제 DB 환경 띄워 CI 연동</td></tr><tr><td>성능 테스트</td><td>ORM 통계, SQL 실행 로그 분석</td></tr><tr><td>쿼리 최적화</td><td>실행 계획 (EXPLAIN), 인덱스 확인</td></tr></tbody></table><p><strong>예시</strong>: Java + Testcontainers</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1> 1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2> 2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3> 3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4> 4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5> 5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6> 6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7> 7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8> 8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9> 9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10>10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11>11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Testcontainers</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>class</span> <span class=nc>UserRepoTest</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nd>@Container</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>PostgreSQLContainer</span><span class=o>&lt;?&gt;</span><span class=w> </span><span class=n>pg</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>PostgreSQLContainer</span><span class=o>&lt;&gt;</span><span class=p>(</span><span class=s>&#34;postgres:15&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nd>@Test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=kt>void</span><span class=w> </span><span class=nf>testCrud</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>DataSource</span><span class=w> </span><span class=n>ds</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>createDS</span><span class=p>(</span><span class=n>pg</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>SessionFactory</span><span class=w> </span><span class=n>sf</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>createSessionFactory</span><span class=p>(</span><span class=n>ds</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 엔티티 저장/조회 테스트</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><hr><h2 id=-41-보안-및-규칙>✅ 41. 보안 및 규칙<a hidden class=anchor aria-hidden=true href=#-41-보안-및-규칙>#</a></h2><ul><li><strong>SQL Injection</strong> 방지: ORM 자동 파라미터 바인딩 사용</li><li><strong>접근 제어</strong>: JPA @EntityGraph, @JsonIgnore 등으로 엔티티 노출 제어</li><li><strong>암호화 컬럼</strong>: 필드 단위 암호화 지원 필요 (예: Jasypt, Hibernate Type Encrypt)</li><li><strong>민감 정보 필터링</strong>: 로그 LorMasking 필터 구축</li></ul><hr><h2 id=-42-모니터링-및-로깅>✅ 42. 모니터링 및 로깅<a hidden class=anchor aria-hidden=true href=#-42-모니터링-및-로깅>#</a></h2><table><thead><tr><th>기능</th><th>도구/방법</th></tr></thead><tbody><tr><td>SQL 로깅</td><td>Hibernate SQL log 설정</td></tr><tr><td>실행 통계</td><td>JPA Metrics, Micrometer</td></tr><tr><td>성능 추적</td><td>APM (New Relic, Datadog) DB Span 포함</td></tr><tr><td>지연 탐지</td><td>Slow Query 설정 및 알림</td></tr></tbody></table><hr><h3 id=-요약>✅ 요약<a hidden class=anchor aria-hidden=true href=#-요약>#</a></h3><p>정리된 내용을 통해 ORM 은 <strong>CQRS, NoSQL 연동, 테스트, 보안, 모니터링</strong> 등과 결합해 복잡한 엔터프라이즈 환경에서도 유연하고 확장성 있는 구조를 구성할 수 있습니다. 앞으로 <strong>CQRS 상세 예시</strong>, <strong>NoSQL 동기화 코드</strong>, <strong>테스트 프로젝트 구조</strong>, <strong>보안 필터 실전 코드</strong> 등 필요하시면 언제든지 추가 리소스를 제공해 드릴 수 있습니다. 다음으로 어떤 주제에 집중해 보길 원하시나요?</p><p>아래는 요청하신 항목들에 대한 <strong>심층 정리</strong>입니다. 기능적으로 나누어 구성했으며, 각 섹션별로 중요한 비교, 사례, 코드 예시 등을 포함했습니다.</p><hr><h2 id=-1-orm-관련-고급-패턴>✅ <strong>1. ORM 관련 고급 패턴</strong><a hidden class=anchor aria-hidden=true href=#-1-orm-관련-고급-패턴>#</a></h2><table><thead><tr><th>패턴</th><th>설명</th><th>효과</th></tr></thead><tbody><tr><td><strong>Unit of Work</strong></td><td>트랜잭션 내 객체 변경 내역 일괄 처리</td><td>여러 변경사항을 원자적으로 적용</td></tr><tr><td><strong>Identity Map</strong></td><td>같은 식별자는 동일 객체로 캐싱</td><td>중복 객체 생성 방지, 동일성 보장</td></tr><tr><td><strong>Repository</strong></td><td>도메인 모델용 저장소 인터페이스 추상화</td><td>테스트 용이성, 의존성 분리</td></tr><tr><td><strong>Specification</strong></td><td>복잡한 쿼리 조건을 재사용 가능한 객체로 표현</td><td>쿼리 조합 및 유지보수 효율성</td></tr><tr><td><strong>Soft Delete</strong></td><td>삭제 대신 상태 플래그 조작</td><td>기록 보존 및 삭제 복원 가능</td></tr><tr><td><strong>Audit Trail</strong></td><td>엔티티 변경 이력 자동 기록</td><td>GDPR 등 감사 로그 준수 가능</td></tr><tr><td><strong>Change Tracking Hooks</strong></td><td>PreInsert/PreUpdate 콜백</td><td>생성 일자, 수정자 자동 기록</td></tr></tbody></table><hr><h2 id=-2-orm-vs-raw-sql-비교>✅ <strong>2. ORM Vs Raw SQL 비교</strong><a hidden class=anchor aria-hidden=true href=#-2-orm-vs-raw-sql-비교>#</a></h2><table><thead><tr><th>요소</th><th>ORM</th><th>Raw SQL</th></tr></thead><tbody><tr><td><strong>개발 속도</strong></td><td>🟢 빨리 작성 가능, 생산성 우위</td><td>🟡 더 오래 걸리지만 고도화 가능</td></tr><tr><td><strong>유지보수성</strong></td><td>🟢 도메인 중심 + 타입 안전성</td><td>🟡 SQL 리팩토링 비용 큼</td></tr><tr><td><strong>성능 최적화</strong></td><td>🟡 추상화한계 존재</td><td>🟢 Explain Plan 최적화 직접 가능</td></tr><tr><td><strong>복잡 쿼리 처리</strong></td><td>🟡 제한 존재, 네이티브 필요</td><td>🟢 서브쿼리, 윈도우 함수 등 자유</td></tr><tr><td><strong>보안/주입 위험</strong></td><td>🟢 바인딩 등 기본 방어</td><td>🟡 PreparedStatement 사용 권장</td></tr></tbody></table><hr><h2 id=-3-orm-보안-고려사항>✅ <strong>3. ORM 보안 고려사항</strong><a hidden class=anchor aria-hidden=true href=#-3-orm-보안-고려사항>#</a></h2><ul><li><strong>SQL Injection 차단</strong>: PreparedStatement 및 바인딩 방식 사용</li><li><strong>민감정보 마스킹</strong>: <code>@JsonIgnore</code>, DTO 분리로 노출 방지</li><li><strong>필드 암호화</strong>: Jasypt, Hibernate Encryptor 를 통한 암호화</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1>1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Convert</span><span class=p>(</span><span class=n>converter</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>EncryptConverter</span><span class=p>.</span><span class=na>class</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>ssn</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li><strong>권한 기반 엔티티 노출 제어</strong>: Spring Security ACL + 엔티티 레벨 체크</li><li><strong>로그 마스킹</strong>: 감사 로깅 시스템 기반 민감값 마스킹 기능</li><li><strong>ORM 보안 설정 점검</strong>: Lazy 접근 오류, 캐시 적절성 등 권한 검토</li></ul><hr><h2 id=-4-orm-마이그레이션-자동화>✅ <strong>4. ORM 마이그레이션 자동화</strong><a hidden class=anchor aria-hidden=true href=#-4-orm-마이그레이션-자동화>#</a></h2><h3 id=도구-비교>도구 비교<a hidden class=anchor aria-hidden=true href=#도구-비교>#</a></h3><table><thead><tr><th>도구</th><th>언어</th><th>특징</th></tr></thead><tbody><tr><td><strong>Flyway</strong></td><td>Java</td><td>순차 마이그레이션 SQL/Java 실행</td></tr><tr><td><strong>Liquibase</strong></td><td>Java</td><td>XML/YAML/SQL 기반, 변경셋 관리</td></tr><tr><td><strong>Alembic</strong></td><td>Python</td><td>SQLAlchemy 연동 자동 생성</td></tr><tr><td><strong>Django Migrations</strong></td><td>Python</td><td>모델 변경 감지 기반 Auto 생성</td></tr><tr><td><strong>EF Migrations</strong></td><td>C#/.NET</td><td>모델 클래스 변경 기반 자동 실행</td></tr></tbody></table><h3 id=예시-flyway>예시 (Flyway)<a hidden class=anchor aria-hidden=true href=#예시-flyway>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1>1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- V1__create_user.sql
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=w> </span><span class=nb>SERIAL</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>100</span><span class=p>),</span><span class=w> </span><span class=n>email</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>100</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1>1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Flyway</span><span class=w> </span><span class=n>flyway</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Flyway</span><span class=p>.</span><span class=na>configure</span><span class=p>().</span><span class=na>dataSource</span><span class=p>(</span><span class=n>ds</span><span class=p>).</span><span class=na>load</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>flyway</span><span class=p>.</span><span class=na>migrate</span><span class=p>();</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><hr><h2 id=-5-orm-테스트-전략>✅ <strong>5. ORM 테스트 전략</strong><a hidden class=anchor aria-hidden=true href=#-5-orm-테스트-전략>#</a></h2><table><thead><tr><th>테스트 종류</th><th>방법</th><th>도구</th></tr></thead><tbody><tr><td><strong>유닛 테스트</strong></td><td>In‑memory DB, mocking</td><td>H2, SQLite, Mockito</td></tr><tr><td><strong>통합 테스트</strong></td><td>실제 DB 컨테이너 구동</td><td>Testcontainers</td></tr><tr><td><strong>성능 측정</strong></td><td>SQL 로그 + Explain Plan</td><td>APM, Micrometer, Hibernate Statistics</td></tr><tr><td><strong>마이그레이션 검증</strong></td><td>CI 에서 자동 실행</td><td>Flyway/Liquibase + Testcontainers</td></tr></tbody></table><hr><h2 id=-6-orm-과-cqrs-결합-사례>✅ <strong>6. ORM 과 CQRS 결합 사례</strong><a hidden class=anchor aria-hidden=true href=#-6-orm-과-cqrs-결합-사례>#</a></h2><h3 id=-시나리오-금융-거래-서비스>📘 시나리오: 금융 거래 서비스<a hidden class=anchor aria-hidden=true href=#-시나리오-금융-거래-서비스>#</a></h3><pre class=mermaid>flowchart LR
  CommandAPI --&gt; TransactionORM[ORM Write]
  TransactionORM --&gt; EventBus
  EventBus --&gt; LedgerProj[Read DB (Cassandra + Redis)]
  QueryAPI --&gt; LedgerProj
</pre><ul><li><strong>Write 모델</strong>: 트랜잭션 도메인 객체 ORM 으로 저장, 이벤트 발행</li><li><strong>Read 모델</strong>: 이벤트를 받아 별도 DB 에 denormalized projection 저장</li><li><strong>이점</strong>: 쓰기 복잡성 분리, 조회 최적화, 확장성 확보, 트랜잭션 성능 확보</li></ul><hr><p>안녕하세요! Object-Relational Mapping (ORM) 에 대한 포괄적인 조사와 분석을 진행하겠습니다. 먼저 최신 정보를 수집하여 체계적으로 정리해드리겠습니다.</p><h2 id=object-relational-mapping-orm-포괄적-분석>Object-Relational Mapping (ORM) 포괄적 분석<a hidden class=anchor aria-hidden=true href=#object-relational-mapping-orm-포괄적-분석>#</a></h2><h3 id=1-주제-태그>1. 주제 태그<a hidden class=anchor aria-hidden=true href=#1-주제-태그>#</a></h3><ul><li>Object-Relational-Mapping</li><li>Database-Abstraction-Layer</li><li>Query-Optimization</li><li>Data-Access-Pattern</li></ul><h3 id=2-분류-구조-적절성-검토>2. 분류 구조 적절성 검토<a hidden class=anchor aria-hidden=true href=#2-분류-구조-적절성-검토>#</a></h3><p><strong>현재 분류</strong>: Systems and Infrastructure > Database Systems > Database Integration</p><p><strong>검토 결과</strong>: 적절함</p><p><strong>근거</strong>:</p><ul><li>ORM 은 객체지향 프로그래밍과 관계형 데이터베이스 간의 통합을 담당하는 핵심 기술</li><li>시스템 인프라 관점에서 데이터베이스 시스템과 애플리케이션 레이어를 연결하는 역할</li><li>Database Integration 카테고리는 ORM 의 본질적 기능인 데이터 통합 및 변환 역할과 정확히 일치</li></ul><h3 id=3-주제-요약-200-자-내외>3. 주제 요약 (200 자 내외)<a hidden class=anchor aria-hidden=true href=#3-주제-요약-200-자-내외>#</a></h3><p>Object-Relational Mapping (ORM) 은 객체지향 프로그래밍 언어와 관계형 데이터베이스 간의 데이터 변환을 자동화하는 프로그래밍 기법입니다. 데이터베이스 테이블을 객체로 매핑하여 SQL 쿼리 작성 없이도 데이터 조작이 가능하며, 개발 생산성 향상과 코드 유지보수성 개선을 제공합니다.</p><h3 id=4-전체-개요-250-자-내외>4. 전체 개요 (250 자 내외)<a hidden class=anchor aria-hidden=true href=#4-전체-개요-250-자-내외>#</a></h3><p>ORM 은 현대 소프트웨어 개발에서 필수적인 데이터 접근 계층 기술로, Active Record 와 Data Mapper 패턴을 통해 구현됩니다. 자동 스키마 관리, 쿼리 최적화, 보안 강화 등의 장점을 제공하지만, N+1 쿼리 문제와 성능 오버헤드 같은 과제도 존재합니다. Python 의 SQLAlchemy, Java 의 Hibernate, JavaScript 의 TypeORM 등 다양한 프레임워크가 있으며, 현대 애플리케이션 아키텍처에서 핵심적인 역할을 담당합니다.</p><hr><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><h4 id=기본-개념>기본 개념<a hidden class=anchor aria-hidden=true href=#기본-개념>#</a></h4><p><strong>Object-Relational Mapping (객체 - 관계 매핑)</strong></p><ul><li>객체지향 프로그래밍 언어의 객체와 관계형 데이터베이스의 테이블 간 데이터 변환을 자동화하는 프로그래밍 기법</li><li>추상화 계층을 제공하여 개발자가 SQL 작성 없이도 데이터베이스 조작 가능</li><li>데이터베이스 독립성과 코드 재사용성 제공</li></ul><p><strong>Entity (엔티티)</strong></p><ul><li>데이터베이스 테이블과 대응되는 객체지향 프로그래밍의 클래스</li><li>테이블의 컬럼은 클래스의 속성 (attribute) 으로 매핑</li><li>테이블의 행 (row) 은 클래스의 인스턴스 (instance) 로 표현</li></ul><p><strong>Persistence (영속성)</strong></p><ul><li>애플리케이션 종료 후에도 데이터가 유지되는 특성</li><li>ORM 을 통해 메모리상의 객체를 데이터베이스에 영구 저장</li><li>데이터의 일관성과 무결성 보장</li></ul><h4 id=실무-구현-연관성>실무 구현 연관성<a hidden class=anchor aria-hidden=true href=#실무-구현-연관성>#</a></h4><p><strong>개발 생산성 측면</strong></p><ul><li>CRUD (Create, Read, Update, Delete) 연산의 표준화된 인터페이스 제공</li><li>반복적인 SQL 작성 작업 최소화로 개발 시간 단축</li><li>타입 안전성 제공으로 컴파일 타임 오류 검출</li></ul><p><strong>아키텍처 측면</strong></p><ul><li>데이터 접근 계층 (Data Access Layer) 의 추상화 구현</li><li>비즈니스 로직과 데이터 접근 로직의 분리</li><li>마이크로서비스 아키텍처에서 서비스 간 데이터 통합 지원</li></ul><p><strong>유지보수 측면</strong></p><ul><li>데이터베이스 스키마 변경 시 코드 수정 범위 최소화</li><li>테스트 가능한 코드 구조 제공</li><li>레거시 시스템 마이그레이션 지원</li></ul><hr><h3 id=배경>배경<a hidden class=anchor aria-hidden=true href=#배경>#</a></h3><h4 id=역사적-배경>역사적 배경<a hidden class=anchor aria-hidden=true href=#역사적-배경>#</a></h4><p><strong>객체 - 관계 임피던스 불일치 (Object-Relational Impedance Mismatch)</strong></p><ul><li>객체지향 패러다임과 관계형 데이터베이스 모델 간의 구조적 차이</li><li>객체의 상속, 캡슐화, 다형성과 관계형 모델의 평면적 구조 간 불일치</li><li>1990 년대부터 본격적인 해결 방안 모색 시작</li></ul><p><strong>기술적 동기</strong></p><ul><li>수동 SQL 작성의 비효율성과 오류 가능성</li><li>데이터베이스 벤더별 SQL 방언 차이로 인한 이식성 문제</li><li>복잡한 객체 그래프를 관계형 테이블로 매핑하는 어려움</li></ul><h4 id=발전-과정>발전 과정<a hidden class=anchor aria-hidden=true href=#발전-과정>#</a></h4><p><strong>1 세대 (1990 년대 후반)</strong></p><ul><li>기본적인 객체 - 테이블 매핑 기능</li><li>단순한 CRUD 연산 지원</li></ul><p><strong>2 세대 (2000 년대)</strong></p><ul><li>관계 매핑, 상속 지원</li><li>쿼리 언어 개발 (HQL, JPQL 등)</li><li>캐싱 메커니즘 도입</li></ul><p><strong>3 세대 (2010 년대 이후)</strong></p><ul><li>비동기 지원, 마이크로서비스 아키텍처 대응</li><li>NoSQL 지원, 하이브리드 데이터베이스 환경 적응</li><li>타입 안전성과 코드 생성 기능 강화</li></ul><hr><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><h4 id=주요-목적>주요 목적<a hidden class=anchor aria-hidden=true href=#주요-목적>#</a></h4><p><strong>개발 효율성 향상</strong></p><ul><li>SQL 작성 부담 감소로 비즈니스 로직 개발에 집중</li><li>표준화된 데이터 접근 패턴 제공</li><li>코드 재사용성 극대화</li></ul><p><strong>유지보수성 개선</strong></p><ul><li>데이터베이스 스키마 변경에 대한 영향도 최소화</li><li>중앙집중식 데이터 접근 로직 관리</li><li>테스트 가능한 구조 제공</li></ul><p><strong>이식성 및 확장성</strong></p><ul><li>데이터베이스 벤더 독립성 확보</li><li>레거시 시스템 통합 지원</li><li>클라우드 환경 및 분산 시스템 지원</li></ul><h4 id=비즈니스-필요성>비즈니스 필요성<a hidden class=anchor aria-hidden=true href=#비즈니스-필요성>#</a></h4><p><strong>개발 비용 절감</strong></p><ul><li>개발자 학습 곡선 완화</li><li>버그 발생률 감소</li><li>프로젝트 납기 단축</li></ul><p><strong>운영 효율성</strong></p><ul><li>자동 스키마 마이그레이션</li><li>성능 모니터링 및 최적화 도구 제공</li><li>보안 취약점 감소</li></ul><hr><h3 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><h4 id=핵심-기능>핵심 기능<a hidden class=anchor aria-hidden=true href=#핵심-기능>#</a></h4><p><strong>자동 매핑 (Automatic Mapping)</strong></p><ul><li>클래스 속성과 테이블 컬럼 간 자동 바인딩</li><li>데이터 타입 변환 및 검증</li><li>네이밍 컨벤션 자동 적용</li></ul><p><strong>관계 관리 (Relationship Management)</strong></p><ul><li>One-to-One, One-to-Many, Many-to-Many 관계 지원</li><li>외래 키 관리 자동화</li><li>참조 무결성 보장</li></ul><p><strong>쿼리 추상화 (Query Abstraction)</strong></p><ul><li>객체지향 쿼리 언어 제공</li><li>동적 쿼리 생성 지원</li><li>쿼리 최적화 자동 수행</li></ul><h4 id=시스템-역할>시스템 역할<a hidden class=anchor aria-hidden=true href=#시스템-역할>#</a></h4><p><strong>데이터 접근 계층 (Data Access Layer)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1>1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2>2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3>3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4>4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5>5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6>6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Application Layer
</span></span><span class=line><span class=cl>       ↓
</span></span><span class=line><span class=cl>Business Logic Layer
</span></span><span class=line><span class=cl>       ↓
</span></span><span class=line><span class=cl>ORM Framework ← 여기서 데이터 매핑 수행
</span></span><span class=line><span class=cl>       ↓
</span></span><span class=line><span class=cl>Database Layer
</span></span></code></pre></td></tr></table></div></div><p><strong>트랜잭션 관리</strong></p><ul><li>ACID 속성 보장</li><li>분산 트랜잭션 지원</li><li>롤백 및 커밋 자동화</li></ul><p><strong>캐싱 및 성능 최적화</strong></p><ul><li>1 차 캐시 (First-level Cache)</li><li>2 차 캐시 (Second-level Cache)</li><li>지연 로딩 (Lazy Loading) 지원</li></ul><hr><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><h4 id=기술적-특징>기술적 특징<a hidden class=anchor aria-hidden=true href=#기술적-특징>#</a></h4><p><strong>추상화 수준</strong></p><ul><li>높은 수준의 데이터베이스 추상화 제공</li><li>SQL 지식 요구 수준 최소화</li><li>메타데이터 기반 매핑 설정</li></ul><p><strong>타입 안전성</strong></p><ul><li>컴파일 타임 타입 검사</li><li>IDE 자동완성 지원</li><li>런타임 오류 감소</li></ul><p><strong>선언적 구성</strong></p><ul><li>어노테이션 기반 설정</li><li>XML 또는 YAML 설정 파일 지원</li><li>코드 생성 자동화</li></ul><h4 id=아키텍처-특징>아키텍처 특징<a hidden class=anchor aria-hidden=true href=#아키텍처-특징>#</a></h4><p><strong>계층 분리</strong></p><ul><li>Presentation Layer 와 데이터 계층 간 분리</li><li>관심사의 분리 (Separation of Concerns) 구현</li><li>의존성 역전 원칙 (Dependency Inversion Principle) 적용</li></ul><p><strong>플러그인 아키텍처</strong></p><ul><li>다양한 데이터베이스 드라이버 지원</li><li>확장 가능한 기능 모듈</li><li>서드파티 통합 지원</li></ul><hr><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><h4 id=설계-원칙>설계 원칙<a hidden class=anchor aria-hidden=true href=#설계-원칙>#</a></h4><p><strong>Don&rsquo;t Repeat Yourself (DRY)</strong></p><ul><li>중복 코드 최소화</li><li>재사용 가능한 컴포넌트 설계</li><li>중앙집중식 설정 관리</li></ul><p><strong>Convention over Configuration</strong></p><ul><li>기본 설정으로 대부분 기능 사용 가능</li><li>명시적 설정은 필요한 경우에만</li><li>학습 곡선 최소화</li></ul><p><strong>Separation of Concerns</strong></p><ul><li>데이터 접근 로직과 비즈니스 로직 분리</li><li>각 계층의 책임 명확화</li><li>테스트 가능성 향상</li></ul><h4 id=운영-원칙>운영 원칙<a hidden class=anchor aria-hidden=true href=#운영-원칙>#</a></h4><p><strong>성능 우선 (Performance First)</strong></p><ul><li>지연 로딩과 즉시 로딩 적절한 선택</li><li>쿼리 최적화 자동 수행</li><li>캐싱 전략 최적화</li></ul><p><strong>보안 우선 (Security First)</strong></p><ul><li>SQL 인젝션 자동 방지</li><li>파라미터화된 쿼리 사용</li><li>접근 권한 관리 지원</li></ul><hr><h3 id=주요-원리>주요 원리<a hidden class=anchor aria-hidden=true href=#주요-원리>#</a></h3><h4 id=매핑-원리>매핑 원리<a hidden class=anchor aria-hidden=true href=#매핑-원리>#</a></h4><pre class=mermaid>graph TB
    A[Object Model] --&gt; B[ORM Framework]
    B --&gt; C[SQL Queries]
    C --&gt; D[Database Tables]
    D --&gt; E[Result Sets]
    E --&gt; B
    B --&gt; F[Object Instances]
    
    subgraph &#34;매핑 과정&#34;
        G[Class ↔ Table]
        H[Property ↔ Column]
        I[Instance ↔ Row]
        J[Reference ↔ Foreign Key]
    end
</pre><p><strong>Identity Map Pattern</strong></p><ul><li>메모리상에서 로드된 객체의 고유성 보장</li><li>동일한 데이터베이스 레코드에 대해 하나의 객체만 생성</li><li>메모리 사용량 최적화와 일관성 유지</li></ul><p><strong>Unit of Work Pattern</strong></p><ul><li>트랜잭션 범위 내에서 변경사항 추적</li><li>커밋 시점에 일괄 데이터베이스 반영</li><li>최적화된 SQL 쿼리 생성</li></ul><h4 id=로딩-전략-원리>로딩 전략 원리<a hidden class=anchor aria-hidden=true href=#로딩-전략-원리>#</a></h4><p><strong>Lazy Loading (지연 로딩)</strong></p><ul><li>필요한 시점에 데이터 로드</li><li>초기 로딩 시간 단축</li><li>N+1 쿼리 문제 주의 필요</li></ul><p><strong>Eager Loading (즉시 로딩)</strong></p><ul><li>연관 데이터를 미리 로드</li><li>JOIN 을 통한 한 번의 쿼리로 처리</li><li>메모리 사용량 증가 가능</li></ul><hr><h3 id=작동-원리-및-방식>작동 원리 및 방식<a hidden class=anchor aria-hidden=true href=#작동-원리-및-방식>#</a></h3><h4 id=기본-작동-흐름>기본 작동 흐름<a hidden class=anchor aria-hidden=true href=#기본-작동-흐름>#</a></h4><pre class=mermaid>sequenceDiagram
    participant App as Application
    participant ORM as ORM Framework
    participant DB as Database
    
    App-&gt;&gt;ORM: 객체 조작 요청
    ORM-&gt;&gt;ORM: 메타데이터 분석
    ORM-&gt;&gt;ORM: SQL 쿼리 생성
    ORM-&gt;&gt;DB: SQL 실행
    DB-&gt;&gt;ORM: 결과 반환
    ORM-&gt;&gt;ORM: 객체 변환
    ORM-&gt;&gt;App: 객체 반환
</pre><h4 id=세션-관리-방식>세션 관리 방식<a hidden class=anchor aria-hidden=true href=#세션-관리-방식>#</a></h4><p><strong>Session Lifecycle</strong></p><ol><li><strong>Session Open</strong>: 데이터베이스 연결 및 1 차 캐시 초기화</li><li><strong>Transaction Begin</strong>: 트랜잭션 시작</li><li><strong>Entity Operations</strong>: 객체 조작 (CRUD)</li><li><strong>Change Tracking</strong>: 변경사항 추적</li><li><strong>Transaction Commit/Rollback</strong>: 트랜잭션 완료</li><li><strong>Session Close</strong>: 리소스 정리</li></ol><h4 id=쿼리-생성-과정>쿼리 생성 과정<a hidden class=anchor aria-hidden=true href=#쿼리-생성-과정>#</a></h4><p><strong>메타데이터 기반 쿼리 생성</strong></p><ol><li>어노테이션 또는 설정 파일에서 매핑 정보 읽기</li><li>객체 간 관계 분석</li><li>최적화된 SQL 쿼리 생성</li><li>파라미터 바인딩 처리</li><li>실행 계획 캐싱</li></ol><hr><h3 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h3><h4 id=전체-아키텍처>전체 아키텍처<a hidden class=anchor aria-hidden=true href=#전체-아키텍처>#</a></h4><pre class=mermaid>graph TB
    subgraph &#34;Application Layer&#34;
        A[Business Logic]
        B[Service Layer]
    end
    
    subgraph &#34;ORM Framework&#34;
        C[Entity Manager]
        D[Query Builder]
        E[Metadata Manager]
        F[Cache Manager]
        G[Transaction Manager]
        H[Connection Pool]
    end
    
    subgraph &#34;Database Layer&#34;
        I[JDBC/Driver]
        J[Database]
    end
    
    A --&gt; C
    B --&gt; C
    C --&gt; D
    C --&gt; E
    C --&gt; F
    C --&gt; G
    D --&gt; H
    G --&gt; H
    H --&gt; I
    I --&gt; J
</pre><h4 id=핵심-구성-요소>핵심 구성 요소<a hidden class=anchor aria-hidden=true href=#핵심-구성-요소>#</a></h4><h5 id=필수-구성-요소>필수 구성 요소<a hidden class=anchor aria-hidden=true href=#필수-구성-요소>#</a></h5><p><strong>Entity Manager (엔티티 매니저)</strong></p><ul><li>기능: 객체의 생명주기 관리, 영속성 컨텍스트 관리</li><li>역할: 객체 상태 추적, 변경 감지, 트랜잭션 조정</li><li>특징: 1 차 캐시 제공, Identity Map 패턴 구현</li></ul><p><strong>Metadata Manager (메타데이터 매니저)</strong></p><ul><li>기능: 매핑 정보 관리, 스키마 정보 저장</li><li>역할: 어노테이션 파싱, 설정 파일 처리, 런타임 메타데이터 제공</li><li>특징: 캐싱을 통한 성능 최적화</li></ul><p><strong>Query Engine (쿼리 엔진)</strong></p><ul><li>기능: SQL 쿼리 생성 및 최적화</li><li>역할: 객체 쿼리를 SQL 로 변환, 실행 계획 관리</li><li>특징: 동적 쿼리 지원, 쿼리 캐싱</li></ul><p><strong>Connection Manager (연결 관리자)</strong></p><ul><li>기능: 데이터베이스 연결 관리</li><li>역할: 커넥션 풀 관리, 트랜잭션 경계 설정</li><li>특징: 멀티스레드 지원, 리소스 최적화</li></ul><h5 id=선택-구성-요소>선택 구성 요소<a hidden class=anchor aria-hidden=true href=#선택-구성-요소>#</a></h5><p><strong>Second-Level Cache (2 차 캐시)</strong></p><ul><li>기능: 세션 간 데이터 공유 캐싱</li><li>역할: 성능 향상, 데이터베이스 부하 감소</li><li>특징: 분산 캐시 지원, TTL 설정 가능</li></ul><p><strong>Migration Manager (마이그레이션 매니저)</strong></p><ul><li>기능: 스키마 버전 관리</li><li>역할: 데이터베이스 구조 변경 자동화</li><li>특징: 롤백 지원, 단계별 마이그레이션</li></ul><p><strong>Audit Manager (감사 매니저)</strong></p><ul><li>기능: 데이터 변경 이력 추적</li><li>역할: 규정 준수, 보안 감사 지원</li><li>특징: 자동 타임스탬프, 사용자 추적</li></ul><p><strong>Performance Monitor (성능 모니터)</strong></p><ul><li>기능: 쿼리 성능 모니터링</li><li>역할: 병목점 식별, 최적화 제안</li><li>특징: 실시간 모니터링, 통계 수집</li></ul><hr><h3 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h3><h4 id=active-record-패턴>Active Record 패턴<a hidden class=anchor aria-hidden=true href=#active-record-패턴>#</a></h4><p><strong>정의</strong>: 데이터베이스 테이블의 각 행을 객체로 래핑하고, 객체 자체가 데이터베이스 연산을 수행하는 패턴</p><p><strong>구성</strong>:</p><ul><li>데이터와 행동이 하나의 클래스에 결합</li><li>각 객체 인스턴스가 테이블의 한 행에 대응</li><li>CRUD 메서드가 객체 내부에 포함</li></ul><p><strong>목적</strong>: 단순한 도메인 로직에서 빠른 개발과 직관적인 사용</p><p><strong>실제 예시</strong>: Ruby on Rails ActiveRecord, Laravel Eloquent</p><p><strong>시스템 구성</strong>:</p><pre class=mermaid>classDiagram
    class User {
        +id: int
        +name: string
        +email: string
        +save(): void
        +delete(): void
        +find(id): User
        +findByEmail(email): User
    }
    
    class Database {
        +users_table
    }
    
    User --&gt; Database : &#34;직접 접근&#34;
</pre><h4 id=data-mapper-패턴>Data Mapper 패턴<a hidden class=anchor aria-hidden=true href=#data-mapper-패턴>#</a></h4><p><strong>정의</strong>: 도메인 객체와 데이터베이스 매핑 로직을 분리하여 독립적으로 관리하는 패턴</p><p><strong>구성</strong>:</p><ul><li>도메인 객체는 순수한 비즈니스 로직만 포함</li><li>별도의 Mapper 클래스가 데이터베이스 연산 담당</li><li>Repository 패턴과 함께 사용</li></ul><p><strong>목적</strong>: 복잡한 도메인 로직과 데이터 영속성의 완전 분리</p><p><strong>실제 예시</strong>: Doctrine ORM, Hibernate</p><p><strong>시스템 구성</strong>:</p><pre class=mermaid>classDiagram
    class User {
        +id: int
        +name: string
        +email: string
        +calculateAge(): int
    }
    
    class UserRepository {
        +save(user: User): void
        +delete(user: User): void
        +findById(id): User
        +findByEmail(email): User
    }
    
    class Database {
        +users_table
    }
    
    UserRepository --&gt; Database
    UserRepository ..&gt; User : &#34;maps to/from&#34;
</pre><h4 id=query-builder-패턴>Query Builder 패턴<a hidden class=anchor aria-hidden=true href=#query-builder-패턴>#</a></h4><p><strong>정의</strong>: 프로그래밍적으로 SQL 쿼리를 구성할 수 있는 인터페이스 제공</p><p><strong>구성</strong>:</p><ul><li>체이닝 방식의 메서드 호출</li><li>동적 쿼리 생성 지원</li><li>타입 안전성 제공</li></ul><p><strong>목적</strong>: 복잡한 동적 쿼리의 안전한 생성</p><p><strong>시나리오</strong>: 다양한 필터 조건이 동적으로 적용되는 검색 기능</p><h4 id=unit-of-work-패턴>Unit of Work 패턴<a hidden class=anchor aria-hidden=true href=#unit-of-work-패턴>#</a></h4><p><strong>정의</strong>: 트랜잭션 범위 내에서 영향받는 객체들의 변경사항을 추적하고 일괄 처리하는 패턴</p><p><strong>구성</strong>:</p><ul><li>변경 추적 메커니즘</li><li>커밋 시점에 일괄 SQL 실행</li><li>최적화된 배치 처리</li></ul><p><strong>목적</strong>: 성능 최적화와 트랜잭션 일관성 보장</p><p><strong>시나리오</strong>: 대량 데이터 처리 시 개별 업데이트 대신 배치 처리로 성능 향상</p><hr><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>개발 생산성 향상</td><td>SQL 작성 부담 감소로 비즈니스 로직 개발에 집중 가능하며, 반복적인 CRUD 코드 자동 생성으로 개발 시간 단축</td></tr><tr><td>장점</td><td>코드 유지보수성</td><td>객체지향적 접근으로 코드 가독성 향상, 중앙집중식 매핑 설정으로 변경 영향도 최소화</td></tr><tr><td>장점</td><td>데이터베이스 독립성</td><td>다양한 DBMS 지원으로 벤더 종속성 해결, 데이터베이스 마이그레이션 시 코드 변경 최소화</td></tr><tr><td>장점</td><td>타입 안전성</td><td>컴파일 타임 오류 검출로 런타임 버그 감소, IDE 자동완성 지원으로 개발 효율성 증대</td></tr><tr><td>장점</td><td>자동 최적화</td><td>쿼리 캐싱과 지연 로딩으로 성능 자동 최적화, 배치 처리를 통한 데이터베이스 부하 감소</td></tr><tr><td>장점</td><td>보안 강화</td><td>파라미터화된 쿼리로 SQL 인젝션 자동 방지, 입력 검증과 이스케이프 처리 자동화</td></tr><tr><td>장점</td><td>관계 관리 자동화</td><td>복잡한 객체 관계의 자동 매핑, 외래 키와 조인 관리 자동화로 데이터 무결성 보장</td></tr></tbody></table><hr><h3 id=단점과-문제점-그리고-해결방안>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안>#</a></h3><h4 id=단점-2>단점<a hidden class=anchor aria-hidden=true href=#단점-2>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>성능 오버헤드</td><td>추상화 계층으로 인한 성능 저하, 복잡한 쿼리에서 비효율적 SQL 생성</td><td>프로파일링 도구 사용, 필요시 네이티브 쿼리 혼용, 캐싱 전략 최적화</td></tr><tr><td>단점</td><td>학습 곡선</td><td>ORM 프레임워크별 고유한 개념과 API 학습 필요, 디버깅 복잡성 증가</td><td>체계적인 교육 프로그램, 단계적 도입, 커뮤니티 활용</td></tr><tr><td>단점</td><td>복잡한 쿼리 제한</td><td>고급 SQL 기능 활용 제한, 데이터베이스 특화 기능 사용 어려움</td><td>하이브리드 접근법 채택, Raw SQL 과 ORM 혼합 사용</td></tr><tr><td>단점</td><td>벤더 종속성</td><td>특정 ORM 프레임워크에 대한 의존성, 마이그레이션 비용 발생</td><td>표준 API 사용, 추상화 계층 추가, 점진적 마이그레이션 계획</td></tr></tbody></table><h4 id=문제점-2>문제점<a hidden class=anchor aria-hidden=true href=#문제점-2>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>N+1 쿼리 문제</td><td>지연 로딩으로 인한 반복적 쿼리 실행</td><td>성능 심각한 저하, 데이터베이스 부하 증가</td><td>쿼리 로깅, APM 도구 모니터링</td><td>Eager Loading 사용, 배치 크기 설정</td><td>JOIN 쿼리 사용, Select In 로딩</td></tr><tr><td>문제점</td><td>메모리 누수</td><td>장기간 실행되는 세션의 1 차 캐시 축적</td><td>애플리케이션 메모리 부족, 성능 저하</td><td>메모리 프로파일러 사용</td><td>적절한 세션 관리, 캐시 크기 제한</td><td>명시적 캐시 정리, 세션 분할</td></tr><tr><td>문제점</td><td>트랜잭션 경합</td><td>긴 트랜잭션으로 인한 락 대기</td><td>동시성 저하, 데드락 발생</td><td>데이터베이스 락 모니터링</td><td>트랜잭션 크기 최소화</td><td>낙관적 락 사용, 배치 처리 분할</td></tr><tr><td>문제점</td><td>스키마 불일치</td><td>엔티티와 실제 테이블 구조 차이</td><td>런타임 오류, 데이터 손상</td><td>스키마 검증 도구 사용</td><td>자동 마이그레이션 도구 활용</td><td>점진적 스키마 업데이트, 버전 관리</td></tr></tbody></table><hr><h3 id=도전-과제>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제>#</a></h3><h4 id=성능-최적화-과제>성능 최적화 과제<a hidden class=anchor aria-hidden=true href=#성능-최적화-과제>#</a></h4><p><strong>쿼리 최적화 자동화</strong></p><ul><li>원인: 동적 생성 쿼리의 최적화 어려움</li><li>영향: 대용량 데이터 처리 시 성능 병목</li><li>해결 방법: AI 기반 쿼리 최적화, 실행 계획 분석 자동화</li></ul><p><strong>메모리 관리 최적화</strong></p><ul><li>원인: 대량 객체 로딩 시 메모리 부족</li><li>영향: 애플리케이션 안정성 저하</li><li>해결 방법: 스트리밍 처리, 객체 풀링, 가비지 컬렉션 튜닝</li></ul><h4 id=확장성-과제>확장성 과제<a hidden class=anchor aria-hidden=true href=#확장성-과제>#</a></h4><p><strong>분산 환경 지원</strong></p><ul><li>원인: 마이크로서비스 아키텍처의 복잡성</li><li>영향: 서비스 간 데이터 일관성 문제</li><li>해결 방법: 이벤트 소싱, CQRS 패턴, 분산 트랜잭션 관리</li></ul><p><strong>NoSQL 통합</strong></p><ul><li>원인: 다양한 데이터 모델 요구사항</li><li>영향: 기존 ORM 의 제한된 지원</li><li>해결 방법: 폴리글랏 퍼시스턴스, 하이브리드 ORM 개발</li></ul><h4 id=보안-과제>보안 과제<a hidden class=anchor aria-hidden=true href=#보안-과제>#</a></h4><p><strong>동적 쿼리 보안</strong></p><ul><li>원인: 사용자 입력 기반 쿼리 생성</li><li>영향: SQL 인젝션 취약점</li><li>해결 방법: 정적 분석 도구, 런타임 검증 강화</li></ul><hr><h3 id=분류-기준에-따른-종류-및-유형>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형>#</a></h3><table><thead><tr><th>분류 기준</th><th>종류/유형</th><th>특징</th><th>대표 예시</th></tr></thead><tbody><tr><td>구현 패턴</td><td>Active Record</td><td>객체와 데이터 접근 로직 결합</td><td>Rails ActiveRecord, Laravel Eloquent</td></tr><tr><td>구현 패턴</td><td>Data Mapper</td><td>도메인 객체와 매핑 로직 분리</td><td>Hibernate, Doctrine, SQLAlchemy</td></tr><tr><td>구현 패턴</td><td>Table Data Gateway</td><td>테이블별 접근 객체 제공</td><td>ADO.NET DataSet</td></tr><tr><td>언어별</td><td>Java</td><td>엔터프라이즈 환경 최적화</td><td>Hibernate, MyBatis, EclipseLink</td></tr><tr><td>언어별</td><td>Python</td><td>동적 타이핑 활용</td><td>Django ORM, SQLAlchemy, Peewee</td></tr><tr><td>언어별</td><td>JavaScript/TypeScript</td><td>비동기 처리 강화</td><td>TypeORM, Sequelize, Prisma</td></tr><tr><td>언어별</td><td>C#</td><td>.NET 생태계 통합</td><td>Entity Framework, Dapper, NHibernate</td></tr><tr><td>기능 범위</td><td>Full ORM</td><td>완전한 객체 - 관계 매핑</td><td>Hibernate, Django ORM</td></tr><tr><td>기능 범위</td><td>Micro ORM</td><td>경량화된 기본 기능</td><td>Dapper, PetaPoco</td></tr><tr><td>기능 범위</td><td>Query Builder</td><td>쿼리 생성 도구</td><td>Knex.js, QueryBuilder</td></tr><tr><td>데이터베이스</td><td>관계형 DB 전용</td><td>전통적인 RDBMS 지원</td><td>대부분의 기존 ORM</td></tr><tr><td>데이터베이스</td><td>NoSQL 지원</td><td>문서형, 키 - 값 DB 지원</td><td>Mongoose, MongoEngine</td></tr><tr><td>데이터베이스</td><td>멀티 데이터베이스</td><td>다양한 DB 타입 지원</td><td>Prisma, TypeORM</td></tr></tbody></table><hr><h3 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h3><table><thead><tr><th>사용 목적</th><th>적용 시나리오</th><th>효과</th><th>기술 스택</th></tr></thead><tbody><tr><td>웹 애플리케이션 개발</td><td>사용자 관리, 콘텐츠 관리 시스템</td><td>개발 시간 50% 단축, 버그 감소</td><td>Spring Boot + Hibernate</td></tr><tr><td>RESTful API 개발</td><td>마이크로서비스 데이터 접근</td><td>코드 일관성 향상, 유지보수성 개선</td><td>Express.js + Sequelize</td></tr><tr><td>엔터프라이즈 애플리케이션</td><td>복잡한 비즈니스 로직 구현</td><td>도메인 모델 명확화, 테스트 용이성</td><td>Java EE + JPA</td></tr><tr><td>데이터 분석 플랫폼</td><td>ETL 프로세스, 리포팅 시스템</td><td>데이터 파이프라인 간소화</td><td>Python + SQLAlchemy</td></tr><tr><td>모바일 백엔드</td><td>사용자 인증, 푸시 알림 관리</td><td>빠른 프로토타이핑, 확장성 확보</td><td>Node.js + TypeORM</td></tr><tr><td>전자상거래 플랫폼</td><td>주문 관리, 재고 관리</td><td>트랜잭션 안정성, 성능 최적화</td><td>Django + Django ORM</td></tr></tbody></table><hr><h3 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h3><h4 id=전자상거래-플랫폼-사례>전자상거래 플랫폼 사례<a hidden class=anchor aria-hidden=true href=#전자상거래-플랫폼-사례>#</a></h4><p><strong>시나리오</strong>: 대규모 온라인 쇼핑몰의 주문 관리 시스템</p><p><strong>시스템 구성</strong>:</p><pre class=mermaid>graph TB
    subgraph &#34;Frontend&#34;
        A[웹 인터페이스]
        B[모바일 앱]
    end
    
    subgraph &#34;Backend Services&#34;
        C[주문 서비스]
        D[상품 서비스]
        E[사용자 서비스]
        F[결제 서비스]
    end
    
    subgraph &#34;Data Layer&#34;
        G[Spring Data JPA]
        H[Hibernate ORM]
        I[MySQL Database]
    end
    
    A --&gt; C
    B --&gt; C
    C --&gt; G
    D --&gt; G
    E --&gt; G
    F --&gt; G
    G --&gt; H
    H --&gt; I
</pre><p><strong>Workflow</strong>:</p><ol><li>사용자가 상품 주문 요청</li><li>주문 서비스에서 재고 확인</li><li>ORM 을 통해 주문 엔티티 생성</li><li>트랜잭션 내에서 재고 차감 및 주문 저장</li><li>결제 서비스 호출</li><li>주문 상태 업데이트</li></ol><p><strong>ORM 의 역할</strong>:</p><ul><li>복잡한 엔티티 관계 자동 관리 (User-Order-OrderItem-Product)</li><li>트랜잭션 일관성 보장</li><li>동시성 제어를 통한 재고 관리</li><li>감사 로그 자동 생성</li></ul><p><strong>ORM 유무에 따른 차이점</strong>:</p><p><strong>ORM 사용 시</strong>:</p><ul><li>개발 시간: 2 개월</li><li>코드 라인 수: 3,000 줄</li><li>버그 발생률: 5%</li><li>유지보수 비용: 낮음</li></ul><p><strong>Raw SQL 사용 시</strong>:</p><ul><li>개발 시간: 4 개월</li><li>코드 라인 수: 8,000 줄</li><li>버그 발생률: 15%</li><li>유지보수 비용: 높음</li></ul><hr><h3 id=구현-예시>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시>#</a></h3><h4 id=python-sqlalchemy-예시>Python SQLAlchemy 예시<a hidden class=anchor aria-hidden=true href=#python-sqlalchemy-예시>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1>  1</a>
</span><span class=lnt id=hl-26-2><a class=lnlinks href=#hl-26-2>  2</a>
</span><span class=lnt id=hl-26-3><a class=lnlinks href=#hl-26-3>  3</a>
</span><span class=lnt id=hl-26-4><a class=lnlinks href=#hl-26-4>  4</a>
</span><span class=lnt id=hl-26-5><a class=lnlinks href=#hl-26-5>  5</a>
</span><span class=lnt id=hl-26-6><a class=lnlinks href=#hl-26-6>  6</a>
</span><span class=lnt id=hl-26-7><a class=lnlinks href=#hl-26-7>  7</a>
</span><span class=lnt id=hl-26-8><a class=lnlinks href=#hl-26-8>  8</a>
</span><span class=lnt id=hl-26-9><a class=lnlinks href=#hl-26-9>  9</a>
</span><span class=lnt id=hl-26-10><a class=lnlinks href=#hl-26-10> 10</a>
</span><span class=lnt id=hl-26-11><a class=lnlinks href=#hl-26-11> 11</a>
</span><span class=lnt id=hl-26-12><a class=lnlinks href=#hl-26-12> 12</a>
</span><span class=lnt id=hl-26-13><a class=lnlinks href=#hl-26-13> 13</a>
</span><span class=lnt id=hl-26-14><a class=lnlinks href=#hl-26-14> 14</a>
</span><span class=lnt id=hl-26-15><a class=lnlinks href=#hl-26-15> 15</a>
</span><span class=lnt id=hl-26-16><a class=lnlinks href=#hl-26-16> 16</a>
</span><span class=lnt id=hl-26-17><a class=lnlinks href=#hl-26-17> 17</a>
</span><span class=lnt id=hl-26-18><a class=lnlinks href=#hl-26-18> 18</a>
</span><span class=lnt id=hl-26-19><a class=lnlinks href=#hl-26-19> 19</a>
</span><span class=lnt id=hl-26-20><a class=lnlinks href=#hl-26-20> 20</a>
</span><span class=lnt id=hl-26-21><a class=lnlinks href=#hl-26-21> 21</a>
</span><span class=lnt id=hl-26-22><a class=lnlinks href=#hl-26-22> 22</a>
</span><span class=lnt id=hl-26-23><a class=lnlinks href=#hl-26-23> 23</a>
</span><span class=lnt id=hl-26-24><a class=lnlinks href=#hl-26-24> 24</a>
</span><span class=lnt id=hl-26-25><a class=lnlinks href=#hl-26-25> 25</a>
</span><span class=lnt id=hl-26-26><a class=lnlinks href=#hl-26-26> 26</a>
</span><span class=lnt id=hl-26-27><a class=lnlinks href=#hl-26-27> 27</a>
</span><span class=lnt id=hl-26-28><a class=lnlinks href=#hl-26-28> 28</a>
</span><span class=lnt id=hl-26-29><a class=lnlinks href=#hl-26-29> 29</a>
</span><span class=lnt id=hl-26-30><a class=lnlinks href=#hl-26-30> 30</a>
</span><span class=lnt id=hl-26-31><a class=lnlinks href=#hl-26-31> 31</a>
</span><span class=lnt id=hl-26-32><a class=lnlinks href=#hl-26-32> 32</a>
</span><span class=lnt id=hl-26-33><a class=lnlinks href=#hl-26-33> 33</a>
</span><span class=lnt id=hl-26-34><a class=lnlinks href=#hl-26-34> 34</a>
</span><span class=lnt id=hl-26-35><a class=lnlinks href=#hl-26-35> 35</a>
</span><span class=lnt id=hl-26-36><a class=lnlinks href=#hl-26-36> 36</a>
</span><span class=lnt id=hl-26-37><a class=lnlinks href=#hl-26-37> 37</a>
</span><span class=lnt id=hl-26-38><a class=lnlinks href=#hl-26-38> 38</a>
</span><span class=lnt id=hl-26-39><a class=lnlinks href=#hl-26-39> 39</a>
</span><span class=lnt id=hl-26-40><a class=lnlinks href=#hl-26-40> 40</a>
</span><span class=lnt id=hl-26-41><a class=lnlinks href=#hl-26-41> 41</a>
</span><span class=lnt id=hl-26-42><a class=lnlinks href=#hl-26-42> 42</a>
</span><span class=lnt id=hl-26-43><a class=lnlinks href=#hl-26-43> 43</a>
</span><span class=lnt id=hl-26-44><a class=lnlinks href=#hl-26-44> 44</a>
</span><span class=lnt id=hl-26-45><a class=lnlinks href=#hl-26-45> 45</a>
</span><span class=lnt id=hl-26-46><a class=lnlinks href=#hl-26-46> 46</a>
</span><span class=lnt id=hl-26-47><a class=lnlinks href=#hl-26-47> 47</a>
</span><span class=lnt id=hl-26-48><a class=lnlinks href=#hl-26-48> 48</a>
</span><span class=lnt id=hl-26-49><a class=lnlinks href=#hl-26-49> 49</a>
</span><span class=lnt id=hl-26-50><a class=lnlinks href=#hl-26-50> 50</a>
</span><span class=lnt id=hl-26-51><a class=lnlinks href=#hl-26-51> 51</a>
</span><span class=lnt id=hl-26-52><a class=lnlinks href=#hl-26-52> 52</a>
</span><span class=lnt id=hl-26-53><a class=lnlinks href=#hl-26-53> 53</a>
</span><span class=lnt id=hl-26-54><a class=lnlinks href=#hl-26-54> 54</a>
</span><span class=lnt id=hl-26-55><a class=lnlinks href=#hl-26-55> 55</a>
</span><span class=lnt id=hl-26-56><a class=lnlinks href=#hl-26-56> 56</a>
</span><span class=lnt id=hl-26-57><a class=lnlinks href=#hl-26-57> 57</a>
</span><span class=lnt id=hl-26-58><a class=lnlinks href=#hl-26-58> 58</a>
</span><span class=lnt id=hl-26-59><a class=lnlinks href=#hl-26-59> 59</a>
</span><span class=lnt id=hl-26-60><a class=lnlinks href=#hl-26-60> 60</a>
</span><span class=lnt id=hl-26-61><a class=lnlinks href=#hl-26-61> 61</a>
</span><span class=lnt id=hl-26-62><a class=lnlinks href=#hl-26-62> 62</a>
</span><span class=lnt id=hl-26-63><a class=lnlinks href=#hl-26-63> 63</a>
</span><span class=lnt id=hl-26-64><a class=lnlinks href=#hl-26-64> 64</a>
</span><span class=lnt id=hl-26-65><a class=lnlinks href=#hl-26-65> 65</a>
</span><span class=lnt id=hl-26-66><a class=lnlinks href=#hl-26-66> 66</a>
</span><span class=lnt id=hl-26-67><a class=lnlinks href=#hl-26-67> 67</a>
</span><span class=lnt id=hl-26-68><a class=lnlinks href=#hl-26-68> 68</a>
</span><span class=lnt id=hl-26-69><a class=lnlinks href=#hl-26-69> 69</a>
</span><span class=lnt id=hl-26-70><a class=lnlinks href=#hl-26-70> 70</a>
</span><span class=lnt id=hl-26-71><a class=lnlinks href=#hl-26-71> 71</a>
</span><span class=lnt id=hl-26-72><a class=lnlinks href=#hl-26-72> 72</a>
</span><span class=lnt id=hl-26-73><a class=lnlinks href=#hl-26-73> 73</a>
</span><span class=lnt id=hl-26-74><a class=lnlinks href=#hl-26-74> 74</a>
</span><span class=lnt id=hl-26-75><a class=lnlinks href=#hl-26-75> 75</a>
</span><span class=lnt id=hl-26-76><a class=lnlinks href=#hl-26-76> 76</a>
</span><span class=lnt id=hl-26-77><a class=lnlinks href=#hl-26-77> 77</a>
</span><span class=lnt id=hl-26-78><a class=lnlinks href=#hl-26-78> 78</a>
</span><span class=lnt id=hl-26-79><a class=lnlinks href=#hl-26-79> 79</a>
</span><span class=lnt id=hl-26-80><a class=lnlinks href=#hl-26-80> 80</a>
</span><span class=lnt id=hl-26-81><a class=lnlinks href=#hl-26-81> 81</a>
</span><span class=lnt id=hl-26-82><a class=lnlinks href=#hl-26-82> 82</a>
</span><span class=lnt id=hl-26-83><a class=lnlinks href=#hl-26-83> 83</a>
</span><span class=lnt id=hl-26-84><a class=lnlinks href=#hl-26-84> 84</a>
</span><span class=lnt id=hl-26-85><a class=lnlinks href=#hl-26-85> 85</a>
</span><span class=lnt id=hl-26-86><a class=lnlinks href=#hl-26-86> 86</a>
</span><span class=lnt id=hl-26-87><a class=lnlinks href=#hl-26-87> 87</a>
</span><span class=lnt id=hl-26-88><a class=lnlinks href=#hl-26-88> 88</a>
</span><span class=lnt id=hl-26-89><a class=lnlinks href=#hl-26-89> 89</a>
</span><span class=lnt id=hl-26-90><a class=lnlinks href=#hl-26-90> 90</a>
</span><span class=lnt id=hl-26-91><a class=lnlinks href=#hl-26-91> 91</a>
</span><span class=lnt id=hl-26-92><a class=lnlinks href=#hl-26-92> 92</a>
</span><span class=lnt id=hl-26-93><a class=lnlinks href=#hl-26-93> 93</a>
</span><span class=lnt id=hl-26-94><a class=lnlinks href=#hl-26-94> 94</a>
</span><span class=lnt id=hl-26-95><a class=lnlinks href=#hl-26-95> 95</a>
</span><span class=lnt id=hl-26-96><a class=lnlinks href=#hl-26-96> 96</a>
</span><span class=lnt id=hl-26-97><a class=lnlinks href=#hl-26-97> 97</a>
</span><span class=lnt id=hl-26-98><a class=lnlinks href=#hl-26-98> 98</a>
</span><span class=lnt id=hl-26-99><a class=lnlinks href=#hl-26-99> 99</a>
</span><span class=lnt id=hl-26-100><a class=lnlinks href=#hl-26-100>100</a>
</span><span class=lnt id=hl-26-101><a class=lnlinks href=#hl-26-101>101</a>
</span><span class=lnt id=hl-26-102><a class=lnlinks href=#hl-26-102>102</a>
</span><span class=lnt id=hl-26-103><a class=lnlinks href=#hl-26-103>103</a>
</span><span class=lnt id=hl-26-104><a class=lnlinks href=#hl-26-104>104</a>
</span><span class=lnt id=hl-26-105><a class=lnlinks href=#hl-26-105>105</a>
</span><span class=lnt id=hl-26-106><a class=lnlinks href=#hl-26-106>106</a>
</span><span class=lnt id=hl-26-107><a class=lnlinks href=#hl-26-107>107</a>
</span><span class=lnt id=hl-26-108><a class=lnlinks href=#hl-26-108>108</a>
</span><span class=lnt id=hl-26-109><a class=lnlinks href=#hl-26-109>109</a>
</span><span class=lnt id=hl-26-110><a class=lnlinks href=#hl-26-110>110</a>
</span><span class=lnt id=hl-26-111><a class=lnlinks href=#hl-26-111>111</a>
</span><span class=lnt id=hl-26-112><a class=lnlinks href=#hl-26-112>112</a>
</span><span class=lnt id=hl-26-113><a class=lnlinks href=#hl-26-113>113</a>
</span><span class=lnt id=hl-26-114><a class=lnlinks href=#hl-26-114>114</a>
</span><span class=lnt id=hl-26-115><a class=lnlinks href=#hl-26-115>115</a>
</span><span class=lnt id=hl-26-116><a class=lnlinks href=#hl-26-116>116</a>
</span><span class=lnt id=hl-26-117><a class=lnlinks href=#hl-26-117>117</a>
</span><span class=lnt id=hl-26-118><a class=lnlinks href=#hl-26-118>118</a>
</span><span class=lnt id=hl-26-119><a class=lnlinks href=#hl-26-119>119</a>
</span><span class=lnt id=hl-26-120><a class=lnlinks href=#hl-26-120>120</a>
</span><span class=lnt id=hl-26-121><a class=lnlinks href=#hl-26-121>121</a>
</span><span class=lnt id=hl-26-122><a class=lnlinks href=#hl-26-122>122</a>
</span><span class=lnt id=hl-26-123><a class=lnlinks href=#hl-26-123>123</a>
</span><span class=lnt id=hl-26-124><a class=lnlinks href=#hl-26-124>124</a>
</span><span class=lnt id=hl-26-125><a class=lnlinks href=#hl-26-125>125</a>
</span><span class=lnt id=hl-26-126><a class=lnlinks href=#hl-26-126>126</a>
</span><span class=lnt id=hl-26-127><a class=lnlinks href=#hl-26-127>127</a>
</span><span class=lnt id=hl-26-128><a class=lnlinks href=#hl-26-128>128</a>
</span><span class=lnt id=hl-26-129><a class=lnlinks href=#hl-26-129>129</a>
</span><span class=lnt id=hl-26-130><a class=lnlinks href=#hl-26-130>130</a>
</span><span class=lnt id=hl-26-131><a class=lnlinks href=#hl-26-131>131</a>
</span><span class=lnt id=hl-26-132><a class=lnlinks href=#hl-26-132>132</a>
</span><span class=lnt id=hl-26-133><a class=lnlinks href=#hl-26-133>133</a>
</span><span class=lnt id=hl-26-134><a class=lnlinks href=#hl-26-134>134</a>
</span><span class=lnt id=hl-26-135><a class=lnlinks href=#hl-26-135>135</a>
</span><span class=lnt id=hl-26-136><a class=lnlinks href=#hl-26-136>136</a>
</span><span class=lnt id=hl-26-137><a class=lnlinks href=#hl-26-137>137</a>
</span><span class=lnt id=hl-26-138><a class=lnlinks href=#hl-26-138>138</a>
</span><span class=lnt id=hl-26-139><a class=lnlinks href=#hl-26-139>139</a>
</span><span class=lnt id=hl-26-140><a class=lnlinks href=#hl-26-140>140</a>
</span><span class=lnt id=hl-26-141><a class=lnlinks href=#hl-26-141>141</a>
</span><span class=lnt id=hl-26-142><a class=lnlinks href=#hl-26-142>142</a>
</span><span class=lnt id=hl-26-143><a class=lnlinks href=#hl-26-143>143</a>
</span><span class=lnt id=hl-26-144><a class=lnlinks href=#hl-26-144>144</a>
</span><span class=lnt id=hl-26-145><a class=lnlinks href=#hl-26-145>145</a>
</span><span class=lnt id=hl-26-146><a class=lnlinks href=#hl-26-146>146</a>
</span><span class=lnt id=hl-26-147><a class=lnlinks href=#hl-26-147>147</a>
</span><span class=lnt id=hl-26-148><a class=lnlinks href=#hl-26-148>148</a>
</span><span class=lnt id=hl-26-149><a class=lnlinks href=#hl-26-149>149</a>
</span><span class=lnt id=hl-26-150><a class=lnlinks href=#hl-26-150>150</a>
</span><span class=lnt id=hl-26-151><a class=lnlinks href=#hl-26-151>151</a>
</span><span class=lnt id=hl-26-152><a class=lnlinks href=#hl-26-152>152</a>
</span><span class=lnt id=hl-26-153><a class=lnlinks href=#hl-26-153>153</a>
</span><span class=lnt id=hl-26-154><a class=lnlinks href=#hl-26-154>154</a>
</span><span class=lnt id=hl-26-155><a class=lnlinks href=#hl-26-155>155</a>
</span><span class=lnt id=hl-26-156><a class=lnlinks href=#hl-26-156>156</a>
</span><span class=lnt id=hl-26-157><a class=lnlinks href=#hl-26-157>157</a>
</span><span class=lnt id=hl-26-158><a class=lnlinks href=#hl-26-158>158</a>
</span><span class=lnt id=hl-26-159><a class=lnlinks href=#hl-26-159>159</a>
</span><span class=lnt id=hl-26-160><a class=lnlinks href=#hl-26-160>160</a>
</span><span class=lnt id=hl-26-161><a class=lnlinks href=#hl-26-161>161</a>
</span><span class=lnt id=hl-26-162><a class=lnlinks href=#hl-26-162>162</a>
</span><span class=lnt id=hl-26-163><a class=lnlinks href=#hl-26-163>163</a>
</span><span class=lnt id=hl-26-164><a class=lnlinks href=#hl-26-164>164</a>
</span><span class=lnt id=hl-26-165><a class=lnlinks href=#hl-26-165>165</a>
</span><span class=lnt id=hl-26-166><a class=lnlinks href=#hl-26-166>166</a>
</span><span class=lnt id=hl-26-167><a class=lnlinks href=#hl-26-167>167</a>
</span><span class=lnt id=hl-26-168><a class=lnlinks href=#hl-26-168>168</a>
</span><span class=lnt id=hl-26-169><a class=lnlinks href=#hl-26-169>169</a>
</span><span class=lnt id=hl-26-170><a class=lnlinks href=#hl-26-170>170</a>
</span><span class=lnt id=hl-26-171><a class=lnlinks href=#hl-26-171>171</a>
</span><span class=lnt id=hl-26-172><a class=lnlinks href=#hl-26-172>172</a>
</span><span class=lnt id=hl-26-173><a class=lnlinks href=#hl-26-173>173</a>
</span><span class=lnt id=hl-26-174><a class=lnlinks href=#hl-26-174>174</a>
</span><span class=lnt id=hl-26-175><a class=lnlinks href=#hl-26-175>175</a>
</span><span class=lnt id=hl-26-176><a class=lnlinks href=#hl-26-176>176</a>
</span><span class=lnt id=hl-26-177><a class=lnlinks href=#hl-26-177>177</a>
</span><span class=lnt id=hl-26-178><a class=lnlinks href=#hl-26-178>178</a>
</span><span class=lnt id=hl-26-179><a class=lnlinks href=#hl-26-179>179</a>
</span><span class=lnt id=hl-26-180><a class=lnlinks href=#hl-26-180>180</a>
</span><span class=lnt id=hl-26-181><a class=lnlinks href=#hl-26-181>181</a>
</span><span class=lnt id=hl-26-182><a class=lnlinks href=#hl-26-182>182</a>
</span><span class=lnt id=hl-26-183><a class=lnlinks href=#hl-26-183>183</a>
</span><span class=lnt id=hl-26-184><a class=lnlinks href=#hl-26-184>184</a>
</span><span class=lnt id=hl-26-185><a class=lnlinks href=#hl-26-185>185</a>
</span><span class=lnt id=hl-26-186><a class=lnlinks href=#hl-26-186>186</a>
</span><span class=lnt id=hl-26-187><a class=lnlinks href=#hl-26-187>187</a>
</span><span class=lnt id=hl-26-188><a class=lnlinks href=#hl-26-188>188</a>
</span><span class=lnt id=hl-26-189><a class=lnlinks href=#hl-26-189>189</a>
</span><span class=lnt id=hl-26-190><a class=lnlinks href=#hl-26-190>190</a>
</span><span class=lnt id=hl-26-191><a class=lnlinks href=#hl-26-191>191</a>
</span><span class=lnt id=hl-26-192><a class=lnlinks href=#hl-26-192>192</a>
</span><span class=lnt id=hl-26-193><a class=lnlinks href=#hl-26-193>193</a>
</span><span class=lnt id=hl-26-194><a class=lnlinks href=#hl-26-194>194</a>
</span><span class=lnt id=hl-26-195><a class=lnlinks href=#hl-26-195>195</a>
</span><span class=lnt id=hl-26-196><a class=lnlinks href=#hl-26-196>196</a>
</span><span class=lnt id=hl-26-197><a class=lnlinks href=#hl-26-197>197</a>
</span><span class=lnt id=hl-26-198><a class=lnlinks href=#hl-26-198>198</a>
</span><span class=lnt id=hl-26-199><a class=lnlinks href=#hl-26-199>199</a>
</span><span class=lnt id=hl-26-200><a class=lnlinks href=#hl-26-200>200</a>
</span><span class=lnt id=hl-26-201><a class=lnlinks href=#hl-26-201>201</a>
</span><span class=lnt id=hl-26-202><a class=lnlinks href=#hl-26-202>202</a>
</span><span class=lnt id=hl-26-203><a class=lnlinks href=#hl-26-203>203</a>
</span><span class=lnt id=hl-26-204><a class=lnlinks href=#hl-26-204>204</a>
</span><span class=lnt id=hl-26-205><a class=lnlinks href=#hl-26-205>205</a>
</span><span class=lnt id=hl-26-206><a class=lnlinks href=#hl-26-206>206</a>
</span><span class=lnt id=hl-26-207><a class=lnlinks href=#hl-26-207>207</a>
</span><span class=lnt id=hl-26-208><a class=lnlinks href=#hl-26-208>208</a>
</span><span class=lnt id=hl-26-209><a class=lnlinks href=#hl-26-209>209</a>
</span><span class=lnt id=hl-26-210><a class=lnlinks href=#hl-26-210>210</a>
</span><span class=lnt id=hl-26-211><a class=lnlinks href=#hl-26-211>211</a>
</span><span class=lnt id=hl-26-212><a class=lnlinks href=#hl-26-212>212</a>
</span><span class=lnt id=hl-26-213><a class=lnlinks href=#hl-26-213>213</a>
</span><span class=lnt id=hl-26-214><a class=lnlinks href=#hl-26-214>214</a>
</span><span class=lnt id=hl-26-215><a class=lnlinks href=#hl-26-215>215</a>
</span><span class=lnt id=hl-26-216><a class=lnlinks href=#hl-26-216>216</a>
</span><span class=lnt id=hl-26-217><a class=lnlinks href=#hl-26-217>217</a>
</span><span class=lnt id=hl-26-218><a class=lnlinks href=#hl-26-218>218</a>
</span><span class=lnt id=hl-26-219><a class=lnlinks href=#hl-26-219>219</a>
</span><span class=lnt id=hl-26-220><a class=lnlinks href=#hl-26-220>220</a>
</span><span class=lnt id=hl-26-221><a class=lnlinks href=#hl-26-221>221</a>
</span><span class=lnt id=hl-26-222><a class=lnlinks href=#hl-26-222>222</a>
</span><span class=lnt id=hl-26-223><a class=lnlinks href=#hl-26-223>223</a>
</span><span class=lnt id=hl-26-224><a class=lnlinks href=#hl-26-224>224</a>
</span><span class=lnt id=hl-26-225><a class=lnlinks href=#hl-26-225>225</a>
</span><span class=lnt id=hl-26-226><a class=lnlinks href=#hl-26-226>226</a>
</span><span class=lnt id=hl-26-227><a class=lnlinks href=#hl-26-227>227</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># models.py - 엔티티 정의</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy</span> <span class=kn>import</span> <span class=n>Column</span><span class=p>,</span> <span class=n>Integer</span><span class=p>,</span> <span class=n>String</span><span class=p>,</span> <span class=n>DateTime</span><span class=p>,</span> <span class=n>ForeignKey</span><span class=p>,</span> <span class=n>Table</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy.ext.declarative</span> <span class=kn>import</span> <span class=n>declarative_base</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy.orm</span> <span class=kn>import</span> <span class=n>relationship</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Base</span> <span class=o>=</span> <span class=n>declarative_base</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 다대다 관계를 위한 연결 테이블</span>
</span></span><span class=line><span class=cl><span class=n>user_role</span> <span class=o>=</span> <span class=n>Table</span><span class=p>(</span><span class=s1>&#39;user_role&#39;</span><span class=p>,</span> <span class=n>Base</span><span class=o>.</span><span class=n>metadata</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>Column</span><span class=p>(</span><span class=s1>&#39;user_id&#39;</span><span class=p>,</span> <span class=n>Integer</span><span class=p>,</span> <span class=n>ForeignKey</span><span class=p>(</span><span class=s1>&#39;users.id&#39;</span><span class=p>)),</span>
</span></span><span class=line><span class=cl>    <span class=n>Column</span><span class=p>(</span><span class=s1>&#39;role_id&#39;</span><span class=p>,</span> <span class=n>Integer</span><span class=p>,</span> <span class=n>ForeignKey</span><span class=p>(</span><span class=s1>&#39;roles.id&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>User</span><span class=p>(</span><span class=n>Base</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;사용자 엔티티 - Active Record 패턴 요소 포함&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>__tablename__</span> <span class=o>=</span> <span class=s1>&#39;users&#39;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 기본 속성 정의</span>
</span></span><span class=line><span class=cl>    <span class=nb>id</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>Integer</span><span class=p>,</span> <span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>username</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>String</span><span class=p>(</span><span class=mi>50</span><span class=p>),</span> <span class=n>unique</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>nullable</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>email</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>String</span><span class=p>(</span><span class=mi>100</span><span class=p>),</span> <span class=n>unique</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>nullable</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>created_at</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>DateTime</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=n>datetime</span><span class=o>.</span><span class=n>utcnow</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 관계 정의 - One-to-Many (User -&gt; Order)</span>
</span></span><span class=line><span class=cl>    <span class=n>orders</span> <span class=o>=</span> <span class=n>relationship</span><span class=p>(</span><span class=s2>&#34;Order&#34;</span><span class=p>,</span> <span class=n>back_populates</span><span class=o>=</span><span class=s2>&#34;user&#34;</span><span class=p>,</span> <span class=n>lazy</span><span class=o>=</span><span class=s2>&#34;select&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 관계 정의 - Many-to-Many (User -&gt; Role)</span>
</span></span><span class=line><span class=cl>    <span class=n>roles</span> <span class=o>=</span> <span class=n>relationship</span><span class=p>(</span><span class=s2>&#34;Role&#34;</span><span class=p>,</span> <span class=n>secondary</span><span class=o>=</span><span class=n>user_role</span><span class=p>,</span> <span class=n>back_populates</span><span class=o>=</span><span class=s2>&#34;users&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;&lt;User(username=&#39;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>username</span><span class=si>}</span><span class=s2>&#39;, email=&#39;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>email</span><span class=si>}</span><span class=s2>&#39;)&gt;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 비즈니스 로직 메서드</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_total_order_amount</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;사용자의 총 주문 금액 계산&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>sum</span><span class=p>(</span><span class=n>order</span><span class=o>.</span><span class=n>total_amount</span> <span class=k>for</span> <span class=n>order</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>orders</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Role</span><span class=p>(</span><span class=n>Base</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;역할 엔티티&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>__tablename__</span> <span class=o>=</span> <span class=s1>&#39;roles&#39;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>id</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>Integer</span><span class=p>,</span> <span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>String</span><span class=p>(</span><span class=mi>50</span><span class=p>),</span> <span class=n>unique</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>nullable</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>String</span><span class=p>(</span><span class=mi>200</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 관계 정의 - Many-to-Many (Role -&gt; User)</span>
</span></span><span class=line><span class=cl>    <span class=n>users</span> <span class=o>=</span> <span class=n>relationship</span><span class=p>(</span><span class=s2>&#34;User&#34;</span><span class=p>,</span> <span class=n>secondary</span><span class=o>=</span><span class=n>user_role</span><span class=p>,</span> <span class=n>back_populates</span><span class=o>=</span><span class=s2>&#34;roles&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Order</span><span class=p>(</span><span class=n>Base</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;주문 엔티티&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>__tablename__</span> <span class=o>=</span> <span class=s1>&#39;orders&#39;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>id</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>Integer</span><span class=p>,</span> <span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>order_number</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>String</span><span class=p>(</span><span class=mi>20</span><span class=p>),</span> <span class=n>unique</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>nullable</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>total_amount</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>Integer</span><span class=p>,</span> <span class=n>nullable</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># 정수로 저장 (센트 단위)</span>
</span></span><span class=line><span class=cl>    <span class=n>created_at</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>DateTime</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=n>datetime</span><span class=o>.</span><span class=n>utcnow</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 외래 키 정의</span>
</span></span><span class=line><span class=cl>    <span class=n>user_id</span> <span class=o>=</span> <span class=n>Column</span><span class=p>(</span><span class=n>Integer</span><span class=p>,</span> <span class=n>ForeignKey</span><span class=p>(</span><span class=s1>&#39;users.id&#39;</span><span class=p>),</span> <span class=n>nullable</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 관계 정의 - Many-to-One (Order -&gt; User)</span>
</span></span><span class=line><span class=cl>    <span class=n>user</span> <span class=o>=</span> <span class=n>relationship</span><span class=p>(</span><span class=s2>&#34;User&#34;</span><span class=p>,</span> <span class=n>back_populates</span><span class=o>=</span><span class=s2>&#34;orders&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># repository.py - Data Mapper 패턴 구현</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy.orm</span> <span class=kn>import</span> <span class=n>Session</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy</span> <span class=kn>import</span> <span class=n>and_</span><span class=p>,</span> <span class=n>or_</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span><span class=p>,</span> <span class=n>Optional</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserRepository</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;사용자 데이터 접근 객체 - Data Mapper 패턴&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>session</span><span class=p>:</span> <span class=n>Session</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>session</span> <span class=o>=</span> <span class=n>session</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>User</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;새 사용자 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>user</span> <span class=o>=</span> <span class=n>User</span><span class=p>(</span><span class=o>**</span><span class=n>user_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>session</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>user</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_by_id</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>User</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;ID로 사용자 조회 - 지연 로딩 예시&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>session</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>User</span><span class=p>)</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>User</span><span class=o>.</span><span class=n>id</span> <span class=o>==</span> <span class=n>user_id</span><span class=p>)</span><span class=o>.</span><span class=n>first</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_by_email</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>email</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>User</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;이메일로 사용자 조회&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>session</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>User</span><span class=p>)</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>User</span><span class=o>.</span><span class=n>email</span> <span class=o>==</span> <span class=n>email</span><span class=p>)</span><span class=o>.</span><span class=n>first</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_users_with_orders</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>User</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;주문이 있는 사용자 조회 - Eager Loading 예시&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>session</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>User</span><span class=p>)</span>\
</span></span><span class=line><span class=cl>                          <span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>Order</span><span class=p>)</span>\
</span></span><span class=line><span class=cl>                          <span class=o>.</span><span class=n>options</span><span class=p>(</span><span class=n>joinedload</span><span class=p>(</span><span class=n>User</span><span class=o>.</span><span class=n>orders</span><span class=p>))</span>\
</span></span><span class=line><span class=cl>                          <span class=o>.</span><span class=n>all</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>search_users</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>username</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=n>email</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>User</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;동적 쿼리를 통한 사용자 검색&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>query</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>session</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>User</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 조건부 필터 적용</span>
</span></span><span class=line><span class=cl>        <span class=n>conditions</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>username</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>conditions</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>User</span><span class=o>.</span><span class=n>username</span><span class=o>.</span><span class=n>like</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;%</span><span class=si>{</span><span class=n>username</span><span class=si>}</span><span class=s1>%&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>email</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>conditions</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>User</span><span class=o>.</span><span class=n>email</span><span class=o>.</span><span class=n>like</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;%</span><span class=si>{</span><span class=n>email</span><span class=si>}</span><span class=s1>%&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>conditions</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>query</span> <span class=o>=</span> <span class=n>query</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>or_</span><span class=p>(</span><span class=o>*</span><span class=n>conditions</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>query</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>update</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>update_data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>User</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;사용자 정보 업데이트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>user</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_by_id</span><span class=p>(</span><span class=n>user_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>user</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>update_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                <span class=nb>setattr</span><span class=p>(</span><span class=n>user</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>user</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;사용자 삭제&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>user</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_by_id</span><span class=p>(</span><span class=n>user_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>user</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>session</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># service.py - 비즈니스 로직 구현</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy.orm</span> <span class=kn>import</span> <span class=n>sessionmaker</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>sqlalchemy</span> <span class=kn>import</span> <span class=n>create_engine</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>contextlib</span> <span class=kn>import</span> <span class=n>contextmanager</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserService</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;사용자 서비스 - 비즈니스 로직 처리&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>database_url</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>engine</span> <span class=o>=</span> <span class=n>create_engine</span><span class=p>(</span><span class=n>database_url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>SessionLocal</span> <span class=o>=</span> <span class=n>sessionmaker</span><span class=p>(</span><span class=n>bind</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>engine</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@contextmanager</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_session</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;세션 관리 컨텍스트 매니저&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>session</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>SessionLocal</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>yield</span> <span class=n>session</span>
</span></span><span class=line><span class=cl>            <span class=n>session</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>  <span class=c1># 자동 커밋</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>session</span><span class=o>.</span><span class=n>rollback</span><span class=p>()</span>  <span class=c1># 오류 시 롤백</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span>
</span></span><span class=line><span class=cl>        <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>session</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>  <span class=c1># 리소스 정리</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>register_user</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>username</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>email</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>role_names</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>User</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;사용자 등록 - 트랜잭션 처리 예시&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_session</span><span class=p>()</span> <span class=k>as</span> <span class=n>session</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>repo</span> <span class=o>=</span> <span class=n>UserRepository</span><span class=p>(</span><span class=n>session</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 중복 검사</span>
</span></span><span class=line><span class=cl>            <span class=n>existing_user</span> <span class=o>=</span> <span class=n>repo</span><span class=o>.</span><span class=n>get_by_email</span><span class=p>(</span><span class=n>email</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>existing_user</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Email </span><span class=si>{</span><span class=n>email</span><span class=si>}</span><span class=s2> already exists&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 사용자 생성</span>
</span></span><span class=line><span class=cl>            <span class=n>user</span> <span class=o>=</span> <span class=n>repo</span><span class=o>.</span><span class=n>create</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;username&#39;</span><span class=p>:</span> <span class=n>username</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;email&#39;</span><span class=p>:</span> <span class=n>email</span>
</span></span><span class=line><span class=cl>            <span class=p>})</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># 역할 할당</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>role_name</span> <span class=ow>in</span> <span class=n>role_names</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>role</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>Role</span><span class=p>)</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>Role</span><span class=o>.</span><span class=n>name</span> <span class=o>==</span> <span class=n>role_name</span><span class=p>)</span><span class=o>.</span><span class=n>first</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>role</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>user</span><span class=o>.</span><span class=n>roles</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>role</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>session</span><span class=o>.</span><span class=n>flush</span><span class=p>()</span>  <span class=c1># ID 생성을 위한 플러시</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>user</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_user_dashboard_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_id</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;사용자 대시보드 데이터 조회 - N+1 문제 해결 예시&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_session</span><span class=p>()</span> <span class=k>as</span> <span class=n>session</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># Eager Loading을 통한 N+1 문제 해결</span>
</span></span><span class=line><span class=cl>            <span class=n>user</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>User</span><span class=p>)</span>\
</span></span><span class=line><span class=cl>                         <span class=o>.</span><span class=n>options</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                             <span class=n>joinedload</span><span class=p>(</span><span class=n>User</span><span class=o>.</span><span class=n>orders</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                             <span class=n>joinedload</span><span class=p>(</span><span class=n>User</span><span class=o>.</span><span class=n>roles</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                         <span class=p>)</span>\
</span></span><span class=line><span class=cl>                         <span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>User</span><span class=o>.</span><span class=n>id</span> <span class=o>==</span> <span class=n>user_id</span><span class=p>)</span>\
</span></span><span class=line><span class=cl>                         <span class=o>.</span><span class=n>first</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=ow>not</span> <span class=n>user</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;User </span><span class=si>{</span><span class=n>user_id</span><span class=si>}</span><span class=s2> not found&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;user&#39;</span><span class=p>:</span> <span class=n>user</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;total_orders&#39;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=n>user</span><span class=o>.</span><span class=n>orders</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;total_amount&#39;</span><span class=p>:</span> <span class=n>user</span><span class=o>.</span><span class=n>get_total_order_amount</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;roles&#39;</span><span class=p>:</span> <span class=p>[</span><span class=n>role</span><span class=o>.</span><span class=n>name</span> <span class=k>for</span> <span class=n>role</span> <span class=ow>in</span> <span class=n>user</span><span class=o>.</span><span class=n>roles</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># usage_example.py - 사용 예시</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;ORM 사용 예시&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>DATABASE_URL</span> <span class=o>=</span> <span class=s2>&#34;postgresql://user:password@localhost/ecommerce&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>service</span> <span class=o>=</span> <span class=n>UserService</span><span class=p>(</span><span class=n>DATABASE_URL</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 사용자 등록</span>
</span></span><span class=line><span class=cl>        <span class=n>user</span> <span class=o>=</span> <span class=n>service</span><span class=o>.</span><span class=n>register_user</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>username</span><span class=o>=</span><span class=s2>&#34;john_doe&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>email</span><span class=o>=</span><span class=s2>&#34;john@example.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>role_names</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;customer&#34;</span><span class=p>,</span> <span class=s2>&#34;premium&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;User created: </span><span class=si>{</span><span class=n>user</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 대시보드 데이터 조회</span>
</span></span><span class=line><span class=cl>        <span class=n>dashboard_data</span> <span class=o>=</span> <span class=n>service</span><span class=o>.</span><span class=n>get_user_dashboard_data</span><span class=p>(</span><span class=n>user</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Dashboard data: </span><span class=si>{</span><span class=n>dashboard_data</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Business logic error: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;System error: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>main</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=javascript-typeorm-예시>JavaScript TypeORM 예시<a hidden class=anchor aria-hidden=true href=#javascript-typeorm-예시>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-27-1><a class=lnlinks href=#hl-27-1>  1</a>
</span><span class=lnt id=hl-27-2><a class=lnlinks href=#hl-27-2>  2</a>
</span><span class=lnt id=hl-27-3><a class=lnlinks href=#hl-27-3>  3</a>
</span><span class=lnt id=hl-27-4><a class=lnlinks href=#hl-27-4>  4</a>
</span><span class=lnt id=hl-27-5><a class=lnlinks href=#hl-27-5>  5</a>
</span><span class=lnt id=hl-27-6><a class=lnlinks href=#hl-27-6>  6</a>
</span><span class=lnt id=hl-27-7><a class=lnlinks href=#hl-27-7>  7</a>
</span><span class=lnt id=hl-27-8><a class=lnlinks href=#hl-27-8>  8</a>
</span><span class=lnt id=hl-27-9><a class=lnlinks href=#hl-27-9>  9</a>
</span><span class=lnt id=hl-27-10><a class=lnlinks href=#hl-27-10> 10</a>
</span><span class=lnt id=hl-27-11><a class=lnlinks href=#hl-27-11> 11</a>
</span><span class=lnt id=hl-27-12><a class=lnlinks href=#hl-27-12> 12</a>
</span><span class=lnt id=hl-27-13><a class=lnlinks href=#hl-27-13> 13</a>
</span><span class=lnt id=hl-27-14><a class=lnlinks href=#hl-27-14> 14</a>
</span><span class=lnt id=hl-27-15><a class=lnlinks href=#hl-27-15> 15</a>
</span><span class=lnt id=hl-27-16><a class=lnlinks href=#hl-27-16> 16</a>
</span><span class=lnt id=hl-27-17><a class=lnlinks href=#hl-27-17> 17</a>
</span><span class=lnt id=hl-27-18><a class=lnlinks href=#hl-27-18> 18</a>
</span><span class=lnt id=hl-27-19><a class=lnlinks href=#hl-27-19> 19</a>
</span><span class=lnt id=hl-27-20><a class=lnlinks href=#hl-27-20> 20</a>
</span><span class=lnt id=hl-27-21><a class=lnlinks href=#hl-27-21> 21</a>
</span><span class=lnt id=hl-27-22><a class=lnlinks href=#hl-27-22> 22</a>
</span><span class=lnt id=hl-27-23><a class=lnlinks href=#hl-27-23> 23</a>
</span><span class=lnt id=hl-27-24><a class=lnlinks href=#hl-27-24> 24</a>
</span><span class=lnt id=hl-27-25><a class=lnlinks href=#hl-27-25> 25</a>
</span><span class=lnt id=hl-27-26><a class=lnlinks href=#hl-27-26> 26</a>
</span><span class=lnt id=hl-27-27><a class=lnlinks href=#hl-27-27> 27</a>
</span><span class=lnt id=hl-27-28><a class=lnlinks href=#hl-27-28> 28</a>
</span><span class=lnt id=hl-27-29><a class=lnlinks href=#hl-27-29> 29</a>
</span><span class=lnt id=hl-27-30><a class=lnlinks href=#hl-27-30> 30</a>
</span><span class=lnt id=hl-27-31><a class=lnlinks href=#hl-27-31> 31</a>
</span><span class=lnt id=hl-27-32><a class=lnlinks href=#hl-27-32> 32</a>
</span><span class=lnt id=hl-27-33><a class=lnlinks href=#hl-27-33> 33</a>
</span><span class=lnt id=hl-27-34><a class=lnlinks href=#hl-27-34> 34</a>
</span><span class=lnt id=hl-27-35><a class=lnlinks href=#hl-27-35> 35</a>
</span><span class=lnt id=hl-27-36><a class=lnlinks href=#hl-27-36> 36</a>
</span><span class=lnt id=hl-27-37><a class=lnlinks href=#hl-27-37> 37</a>
</span><span class=lnt id=hl-27-38><a class=lnlinks href=#hl-27-38> 38</a>
</span><span class=lnt id=hl-27-39><a class=lnlinks href=#hl-27-39> 39</a>
</span><span class=lnt id=hl-27-40><a class=lnlinks href=#hl-27-40> 40</a>
</span><span class=lnt id=hl-27-41><a class=lnlinks href=#hl-27-41> 41</a>
</span><span class=lnt id=hl-27-42><a class=lnlinks href=#hl-27-42> 42</a>
</span><span class=lnt id=hl-27-43><a class=lnlinks href=#hl-27-43> 43</a>
</span><span class=lnt id=hl-27-44><a class=lnlinks href=#hl-27-44> 44</a>
</span><span class=lnt id=hl-27-45><a class=lnlinks href=#hl-27-45> 45</a>
</span><span class=lnt id=hl-27-46><a class=lnlinks href=#hl-27-46> 46</a>
</span><span class=lnt id=hl-27-47><a class=lnlinks href=#hl-27-47> 47</a>
</span><span class=lnt id=hl-27-48><a class=lnlinks href=#hl-27-48> 48</a>
</span><span class=lnt id=hl-27-49><a class=lnlinks href=#hl-27-49> 49</a>
</span><span class=lnt id=hl-27-50><a class=lnlinks href=#hl-27-50> 50</a>
</span><span class=lnt id=hl-27-51><a class=lnlinks href=#hl-27-51> 51</a>
</span><span class=lnt id=hl-27-52><a class=lnlinks href=#hl-27-52> 52</a>
</span><span class=lnt id=hl-27-53><a class=lnlinks href=#hl-27-53> 53</a>
</span><span class=lnt id=hl-27-54><a class=lnlinks href=#hl-27-54> 54</a>
</span><span class=lnt id=hl-27-55><a class=lnlinks href=#hl-27-55> 55</a>
</span><span class=lnt id=hl-27-56><a class=lnlinks href=#hl-27-56> 56</a>
</span><span class=lnt id=hl-27-57><a class=lnlinks href=#hl-27-57> 57</a>
</span><span class=lnt id=hl-27-58><a class=lnlinks href=#hl-27-58> 58</a>
</span><span class=lnt id=hl-27-59><a class=lnlinks href=#hl-27-59> 59</a>
</span><span class=lnt id=hl-27-60><a class=lnlinks href=#hl-27-60> 60</a>
</span><span class=lnt id=hl-27-61><a class=lnlinks href=#hl-27-61> 61</a>
</span><span class=lnt id=hl-27-62><a class=lnlinks href=#hl-27-62> 62</a>
</span><span class=lnt id=hl-27-63><a class=lnlinks href=#hl-27-63> 63</a>
</span><span class=lnt id=hl-27-64><a class=lnlinks href=#hl-27-64> 64</a>
</span><span class=lnt id=hl-27-65><a class=lnlinks href=#hl-27-65> 65</a>
</span><span class=lnt id=hl-27-66><a class=lnlinks href=#hl-27-66> 66</a>
</span><span class=lnt id=hl-27-67><a class=lnlinks href=#hl-27-67> 67</a>
</span><span class=lnt id=hl-27-68><a class=lnlinks href=#hl-27-68> 68</a>
</span><span class=lnt id=hl-27-69><a class=lnlinks href=#hl-27-69> 69</a>
</span><span class=lnt id=hl-27-70><a class=lnlinks href=#hl-27-70> 70</a>
</span><span class=lnt id=hl-27-71><a class=lnlinks href=#hl-27-71> 71</a>
</span><span class=lnt id=hl-27-72><a class=lnlinks href=#hl-27-72> 72</a>
</span><span class=lnt id=hl-27-73><a class=lnlinks href=#hl-27-73> 73</a>
</span><span class=lnt id=hl-27-74><a class=lnlinks href=#hl-27-74> 74</a>
</span><span class=lnt id=hl-27-75><a class=lnlinks href=#hl-27-75> 75</a>
</span><span class=lnt id=hl-27-76><a class=lnlinks href=#hl-27-76> 76</a>
</span><span class=lnt id=hl-27-77><a class=lnlinks href=#hl-27-77> 77</a>
</span><span class=lnt id=hl-27-78><a class=lnlinks href=#hl-27-78> 78</a>
</span><span class=lnt id=hl-27-79><a class=lnlinks href=#hl-27-79> 79</a>
</span><span class=lnt id=hl-27-80><a class=lnlinks href=#hl-27-80> 80</a>
</span><span class=lnt id=hl-27-81><a class=lnlinks href=#hl-27-81> 81</a>
</span><span class=lnt id=hl-27-82><a class=lnlinks href=#hl-27-82> 82</a>
</span><span class=lnt id=hl-27-83><a class=lnlinks href=#hl-27-83> 83</a>
</span><span class=lnt id=hl-27-84><a class=lnlinks href=#hl-27-84> 84</a>
</span><span class=lnt id=hl-27-85><a class=lnlinks href=#hl-27-85> 85</a>
</span><span class=lnt id=hl-27-86><a class=lnlinks href=#hl-27-86> 86</a>
</span><span class=lnt id=hl-27-87><a class=lnlinks href=#hl-27-87> 87</a>
</span><span class=lnt id=hl-27-88><a class=lnlinks href=#hl-27-88> 88</a>
</span><span class=lnt id=hl-27-89><a class=lnlinks href=#hl-27-89> 89</a>
</span><span class=lnt id=hl-27-90><a class=lnlinks href=#hl-27-90> 90</a>
</span><span class=lnt id=hl-27-91><a class=lnlinks href=#hl-27-91> 91</a>
</span><span class=lnt id=hl-27-92><a class=lnlinks href=#hl-27-92> 92</a>
</span><span class=lnt id=hl-27-93><a class=lnlinks href=#hl-27-93> 93</a>
</span><span class=lnt id=hl-27-94><a class=lnlinks href=#hl-27-94> 94</a>
</span><span class=lnt id=hl-27-95><a class=lnlinks href=#hl-27-95> 95</a>
</span><span class=lnt id=hl-27-96><a class=lnlinks href=#hl-27-96> 96</a>
</span><span class=lnt id=hl-27-97><a class=lnlinks href=#hl-27-97> 97</a>
</span><span class=lnt id=hl-27-98><a class=lnlinks href=#hl-27-98> 98</a>
</span><span class=lnt id=hl-27-99><a class=lnlinks href=#hl-27-99> 99</a>
</span><span class=lnt id=hl-27-100><a class=lnlinks href=#hl-27-100>100</a>
</span><span class=lnt id=hl-27-101><a class=lnlinks href=#hl-27-101>101</a>
</span><span class=lnt id=hl-27-102><a class=lnlinks href=#hl-27-102>102</a>
</span><span class=lnt id=hl-27-103><a class=lnlinks href=#hl-27-103>103</a>
</span><span class=lnt id=hl-27-104><a class=lnlinks href=#hl-27-104>104</a>
</span><span class=lnt id=hl-27-105><a class=lnlinks href=#hl-27-105>105</a>
</span><span class=lnt id=hl-27-106><a class=lnlinks href=#hl-27-106>106</a>
</span><span class=lnt id=hl-27-107><a class=lnlinks href=#hl-27-107>107</a>
</span><span class=lnt id=hl-27-108><a class=lnlinks href=#hl-27-108>108</a>
</span><span class=lnt id=hl-27-109><a class=lnlinks href=#hl-27-109>109</a>
</span><span class=lnt id=hl-27-110><a class=lnlinks href=#hl-27-110>110</a>
</span><span class=lnt id=hl-27-111><a class=lnlinks href=#hl-27-111>111</a>
</span><span class=lnt id=hl-27-112><a class=lnlinks href=#hl-27-112>112</a>
</span><span class=lnt id=hl-27-113><a class=lnlinks href=#hl-27-113>113</a>
</span><span class=lnt id=hl-27-114><a class=lnlinks href=#hl-27-114>114</a>
</span><span class=lnt id=hl-27-115><a class=lnlinks href=#hl-27-115>115</a>
</span><span class=lnt id=hl-27-116><a class=lnlinks href=#hl-27-116>116</a>
</span><span class=lnt id=hl-27-117><a class=lnlinks href=#hl-27-117>117</a>
</span><span class=lnt id=hl-27-118><a class=lnlinks href=#hl-27-118>118</a>
</span><span class=lnt id=hl-27-119><a class=lnlinks href=#hl-27-119>119</a>
</span><span class=lnt id=hl-27-120><a class=lnlinks href=#hl-27-120>120</a>
</span><span class=lnt id=hl-27-121><a class=lnlinks href=#hl-27-121>121</a>
</span><span class=lnt id=hl-27-122><a class=lnlinks href=#hl-27-122>122</a>
</span><span class=lnt id=hl-27-123><a class=lnlinks href=#hl-27-123>123</a>
</span><span class=lnt id=hl-27-124><a class=lnlinks href=#hl-27-124>124</a>
</span><span class=lnt id=hl-27-125><a class=lnlinks href=#hl-27-125>125</a>
</span><span class=lnt id=hl-27-126><a class=lnlinks href=#hl-27-126>126</a>
</span><span class=lnt id=hl-27-127><a class=lnlinks href=#hl-27-127>127</a>
</span><span class=lnt id=hl-27-128><a class=lnlinks href=#hl-27-128>128</a>
</span><span class=lnt id=hl-27-129><a class=lnlinks href=#hl-27-129>129</a>
</span><span class=lnt id=hl-27-130><a class=lnlinks href=#hl-27-130>130</a>
</span><span class=lnt id=hl-27-131><a class=lnlinks href=#hl-27-131>131</a>
</span><span class=lnt id=hl-27-132><a class=lnlinks href=#hl-27-132>132</a>
</span><span class=lnt id=hl-27-133><a class=lnlinks href=#hl-27-133>133</a>
</span><span class=lnt id=hl-27-134><a class=lnlinks href=#hl-27-134>134</a>
</span><span class=lnt id=hl-27-135><a class=lnlinks href=#hl-27-135>135</a>
</span><span class=lnt id=hl-27-136><a class=lnlinks href=#hl-27-136>136</a>
</span><span class=lnt id=hl-27-137><a class=lnlinks href=#hl-27-137>137</a>
</span><span class=lnt id=hl-27-138><a class=lnlinks href=#hl-27-138>138</a>
</span><span class=lnt id=hl-27-139><a class=lnlinks href=#hl-27-139>139</a>
</span><span class=lnt id=hl-27-140><a class=lnlinks href=#hl-27-140>140</a>
</span><span class=lnt id=hl-27-141><a class=lnlinks href=#hl-27-141>141</a>
</span><span class=lnt id=hl-27-142><a class=lnlinks href=#hl-27-142>142</a>
</span><span class=lnt id=hl-27-143><a class=lnlinks href=#hl-27-143>143</a>
</span><span class=lnt id=hl-27-144><a class=lnlinks href=#hl-27-144>144</a>
</span><span class=lnt id=hl-27-145><a class=lnlinks href=#hl-27-145>145</a>
</span><span class=lnt id=hl-27-146><a class=lnlinks href=#hl-27-146>146</a>
</span><span class=lnt id=hl-27-147><a class=lnlinks href=#hl-27-147>147</a>
</span><span class=lnt id=hl-27-148><a class=lnlinks href=#hl-27-148>148</a>
</span><span class=lnt id=hl-27-149><a class=lnlinks href=#hl-27-149>149</a>
</span><span class=lnt id=hl-27-150><a class=lnlinks href=#hl-27-150>150</a>
</span><span class=lnt id=hl-27-151><a class=lnlinks href=#hl-27-151>151</a>
</span><span class=lnt id=hl-27-152><a class=lnlinks href=#hl-27-152>152</a>
</span><span class=lnt id=hl-27-153><a class=lnlinks href=#hl-27-153>153</a>
</span><span class=lnt id=hl-27-154><a class=lnlinks href=#hl-27-154>154</a>
</span><span class=lnt id=hl-27-155><a class=lnlinks href=#hl-27-155>155</a>
</span><span class=lnt id=hl-27-156><a class=lnlinks href=#hl-27-156>156</a>
</span><span class=lnt id=hl-27-157><a class=lnlinks href=#hl-27-157>157</a>
</span><span class=lnt id=hl-27-158><a class=lnlinks href=#hl-27-158>158</a>
</span><span class=lnt id=hl-27-159><a class=lnlinks href=#hl-27-159>159</a>
</span><span class=lnt id=hl-27-160><a class=lnlinks href=#hl-27-160>160</a>
</span><span class=lnt id=hl-27-161><a class=lnlinks href=#hl-27-161>161</a>
</span><span class=lnt id=hl-27-162><a class=lnlinks href=#hl-27-162>162</a>
</span><span class=lnt id=hl-27-163><a class=lnlinks href=#hl-27-163>163</a>
</span><span class=lnt id=hl-27-164><a class=lnlinks href=#hl-27-164>164</a>
</span><span class=lnt id=hl-27-165><a class=lnlinks href=#hl-27-165>165</a>
</span><span class=lnt id=hl-27-166><a class=lnlinks href=#hl-27-166>166</a>
</span><span class=lnt id=hl-27-167><a class=lnlinks href=#hl-27-167>167</a>
</span><span class=lnt id=hl-27-168><a class=lnlinks href=#hl-27-168>168</a>
</span><span class=lnt id=hl-27-169><a class=lnlinks href=#hl-27-169>169</a>
</span><span class=lnt id=hl-27-170><a class=lnlinks href=#hl-27-170>170</a>
</span><span class=lnt id=hl-27-171><a class=lnlinks href=#hl-27-171>171</a>
</span><span class=lnt id=hl-27-172><a class=lnlinks href=#hl-27-172>172</a>
</span><span class=lnt id=hl-27-173><a class=lnlinks href=#hl-27-173>173</a>
</span><span class=lnt id=hl-27-174><a class=lnlinks href=#hl-27-174>174</a>
</span><span class=lnt id=hl-27-175><a class=lnlinks href=#hl-27-175>175</a>
</span><span class=lnt id=hl-27-176><a class=lnlinks href=#hl-27-176>176</a>
</span><span class=lnt id=hl-27-177><a class=lnlinks href=#hl-27-177>177</a>
</span><span class=lnt id=hl-27-178><a class=lnlinks href=#hl-27-178>178</a>
</span><span class=lnt id=hl-27-179><a class=lnlinks href=#hl-27-179>179</a>
</span><span class=lnt id=hl-27-180><a class=lnlinks href=#hl-27-180>180</a>
</span><span class=lnt id=hl-27-181><a class=lnlinks href=#hl-27-181>181</a>
</span><span class=lnt id=hl-27-182><a class=lnlinks href=#hl-27-182>182</a>
</span><span class=lnt id=hl-27-183><a class=lnlinks href=#hl-27-183>183</a>
</span><span class=lnt id=hl-27-184><a class=lnlinks href=#hl-27-184>184</a>
</span><span class=lnt id=hl-27-185><a class=lnlinks href=#hl-27-185>185</a>
</span><span class=lnt id=hl-27-186><a class=lnlinks href=#hl-27-186>186</a>
</span><span class=lnt id=hl-27-187><a class=lnlinks href=#hl-27-187>187</a>
</span><span class=lnt id=hl-27-188><a class=lnlinks href=#hl-27-188>188</a>
</span><span class=lnt id=hl-27-189><a class=lnlinks href=#hl-27-189>189</a>
</span><span class=lnt id=hl-27-190><a class=lnlinks href=#hl-27-190>190</a>
</span><span class=lnt id=hl-27-191><a class=lnlinks href=#hl-27-191>191</a>
</span><span class=lnt id=hl-27-192><a class=lnlinks href=#hl-27-192>192</a>
</span><span class=lnt id=hl-27-193><a class=lnlinks href=#hl-27-193>193</a>
</span><span class=lnt id=hl-27-194><a class=lnlinks href=#hl-27-194>194</a>
</span><span class=lnt id=hl-27-195><a class=lnlinks href=#hl-27-195>195</a>
</span><span class=lnt id=hl-27-196><a class=lnlinks href=#hl-27-196>196</a>
</span><span class=lnt id=hl-27-197><a class=lnlinks href=#hl-27-197>197</a>
</span><span class=lnt id=hl-27-198><a class=lnlinks href=#hl-27-198>198</a>
</span><span class=lnt id=hl-27-199><a class=lnlinks href=#hl-27-199>199</a>
</span><span class=lnt id=hl-27-200><a class=lnlinks href=#hl-27-200>200</a>
</span><span class=lnt id=hl-27-201><a class=lnlinks href=#hl-27-201>201</a>
</span><span class=lnt id=hl-27-202><a class=lnlinks href=#hl-27-202>202</a>
</span><span class=lnt id=hl-27-203><a class=lnlinks href=#hl-27-203>203</a>
</span><span class=lnt id=hl-27-204><a class=lnlinks href=#hl-27-204>204</a>
</span><span class=lnt id=hl-27-205><a class=lnlinks href=#hl-27-205>205</a>
</span><span class=lnt id=hl-27-206><a class=lnlinks href=#hl-27-206>206</a>
</span><span class=lnt id=hl-27-207><a class=lnlinks href=#hl-27-207>207</a>
</span><span class=lnt id=hl-27-208><a class=lnlinks href=#hl-27-208>208</a>
</span><span class=lnt id=hl-27-209><a class=lnlinks href=#hl-27-209>209</a>
</span><span class=lnt id=hl-27-210><a class=lnlinks href=#hl-27-210>210</a>
</span><span class=lnt id=hl-27-211><a class=lnlinks href=#hl-27-211>211</a>
</span><span class=lnt id=hl-27-212><a class=lnlinks href=#hl-27-212>212</a>
</span><span class=lnt id=hl-27-213><a class=lnlinks href=#hl-27-213>213</a>
</span><span class=lnt id=hl-27-214><a class=lnlinks href=#hl-27-214>214</a>
</span><span class=lnt id=hl-27-215><a class=lnlinks href=#hl-27-215>215</a>
</span><span class=lnt id=hl-27-216><a class=lnlinks href=#hl-27-216>216</a>
</span><span class=lnt id=hl-27-217><a class=lnlinks href=#hl-27-217>217</a>
</span><span class=lnt id=hl-27-218><a class=lnlinks href=#hl-27-218>218</a>
</span><span class=lnt id=hl-27-219><a class=lnlinks href=#hl-27-219>219</a>
</span><span class=lnt id=hl-27-220><a class=lnlinks href=#hl-27-220>220</a>
</span><span class=lnt id=hl-27-221><a class=lnlinks href=#hl-27-221>221</a>
</span><span class=lnt id=hl-27-222><a class=lnlinks href=#hl-27-222>222</a>
</span><span class=lnt id=hl-27-223><a class=lnlinks href=#hl-27-223>223</a>
</span><span class=lnt id=hl-27-224><a class=lnlinks href=#hl-27-224>224</a>
</span><span class=lnt id=hl-27-225><a class=lnlinks href=#hl-27-225>225</a>
</span><span class=lnt id=hl-27-226><a class=lnlinks href=#hl-27-226>226</a>
</span><span class=lnt id=hl-27-227><a class=lnlinks href=#hl-27-227>227</a>
</span><span class=lnt id=hl-27-228><a class=lnlinks href=#hl-27-228>228</a>
</span><span class=lnt id=hl-27-229><a class=lnlinks href=#hl-27-229>229</a>
</span><span class=lnt id=hl-27-230><a class=lnlinks href=#hl-27-230>230</a>
</span><span class=lnt id=hl-27-231><a class=lnlinks href=#hl-27-231>231</a>
</span><span class=lnt id=hl-27-232><a class=lnlinks href=#hl-27-232>232</a>
</span><span class=lnt id=hl-27-233><a class=lnlinks href=#hl-27-233>233</a>
</span><span class=lnt id=hl-27-234><a class=lnlinks href=#hl-27-234>234</a>
</span><span class=lnt id=hl-27-235><a class=lnlinks href=#hl-27-235>235</a>
</span><span class=lnt id=hl-27-236><a class=lnlinks href=#hl-27-236>236</a>
</span><span class=lnt id=hl-27-237><a class=lnlinks href=#hl-27-237>237</a>
</span><span class=lnt id=hl-27-238><a class=lnlinks href=#hl-27-238>238</a>
</span><span class=lnt id=hl-27-239><a class=lnlinks href=#hl-27-239>239</a>
</span><span class=lnt id=hl-27-240><a class=lnlinks href=#hl-27-240>240</a>
</span><span class=lnt id=hl-27-241><a class=lnlinks href=#hl-27-241>241</a>
</span><span class=lnt id=hl-27-242><a class=lnlinks href=#hl-27-242>242</a>
</span><span class=lnt id=hl-27-243><a class=lnlinks href=#hl-27-243>243</a>
</span><span class=lnt id=hl-27-244><a class=lnlinks href=#hl-27-244>244</a>
</span><span class=lnt id=hl-27-245><a class=lnlinks href=#hl-27-245>245</a>
</span><span class=lnt id=hl-27-246><a class=lnlinks href=#hl-27-246>246</a>
</span><span class=lnt id=hl-27-247><a class=lnlinks href=#hl-27-247>247</a>
</span><span class=lnt id=hl-27-248><a class=lnlinks href=#hl-27-248>248</a>
</span><span class=lnt id=hl-27-249><a class=lnlinks href=#hl-27-249>249</a>
</span><span class=lnt id=hl-27-250><a class=lnlinks href=#hl-27-250>250</a>
</span><span class=lnt id=hl-27-251><a class=lnlinks href=#hl-27-251>251</a>
</span><span class=lnt id=hl-27-252><a class=lnlinks href=#hl-27-252>252</a>
</span><span class=lnt id=hl-27-253><a class=lnlinks href=#hl-27-253>253</a>
</span><span class=lnt id=hl-27-254><a class=lnlinks href=#hl-27-254>254</a>
</span><span class=lnt id=hl-27-255><a class=lnlinks href=#hl-27-255>255</a>
</span><span class=lnt id=hl-27-256><a class=lnlinks href=#hl-27-256>256</a>
</span><span class=lnt id=hl-27-257><a class=lnlinks href=#hl-27-257>257</a>
</span><span class=lnt id=hl-27-258><a class=lnlinks href=#hl-27-258>258</a>
</span><span class=lnt id=hl-27-259><a class=lnlinks href=#hl-27-259>259</a>
</span><span class=lnt id=hl-27-260><a class=lnlinks href=#hl-27-260>260</a>
</span><span class=lnt id=hl-27-261><a class=lnlinks href=#hl-27-261>261</a>
</span><span class=lnt id=hl-27-262><a class=lnlinks href=#hl-27-262>262</a>
</span><span class=lnt id=hl-27-263><a class=lnlinks href=#hl-27-263>263</a>
</span><span class=lnt id=hl-27-264><a class=lnlinks href=#hl-27-264>264</a>
</span><span class=lnt id=hl-27-265><a class=lnlinks href=#hl-27-265>265</a>
</span><span class=lnt id=hl-27-266><a class=lnlinks href=#hl-27-266>266</a>
</span><span class=lnt id=hl-27-267><a class=lnlinks href=#hl-27-267>267</a>
</span><span class=lnt id=hl-27-268><a class=lnlinks href=#hl-27-268>268</a>
</span><span class=lnt id=hl-27-269><a class=lnlinks href=#hl-27-269>269</a>
</span><span class=lnt id=hl-27-270><a class=lnlinks href=#hl-27-270>270</a>
</span><span class=lnt id=hl-27-271><a class=lnlinks href=#hl-27-271>271</a>
</span><span class=lnt id=hl-27-272><a class=lnlinks href=#hl-27-272>272</a>
</span><span class=lnt id=hl-27-273><a class=lnlinks href=#hl-27-273>273</a>
</span><span class=lnt id=hl-27-274><a class=lnlinks href=#hl-27-274>274</a>
</span><span class=lnt id=hl-27-275><a class=lnlinks href=#hl-27-275>275</a>
</span><span class=lnt id=hl-27-276><a class=lnlinks href=#hl-27-276>276</a>
</span><span class=lnt id=hl-27-277><a class=lnlinks href=#hl-27-277>277</a>
</span><span class=lnt id=hl-27-278><a class=lnlinks href=#hl-27-278>278</a>
</span><span class=lnt id=hl-27-279><a class=lnlinks href=#hl-27-279>279</a>
</span><span class=lnt id=hl-27-280><a class=lnlinks href=#hl-27-280>280</a>
</span><span class=lnt id=hl-27-281><a class=lnlinks href=#hl-27-281>281</a>
</span><span class=lnt id=hl-27-282><a class=lnlinks href=#hl-27-282>282</a>
</span><span class=lnt id=hl-27-283><a class=lnlinks href=#hl-27-283>283</a>
</span><span class=lnt id=hl-27-284><a class=lnlinks href=#hl-27-284>284</a>
</span><span class=lnt id=hl-27-285><a class=lnlinks href=#hl-27-285>285</a>
</span><span class=lnt id=hl-27-286><a class=lnlinks href=#hl-27-286>286</a>
</span><span class=lnt id=hl-27-287><a class=lnlinks href=#hl-27-287>287</a>
</span><span class=lnt id=hl-27-288><a class=lnlinks href=#hl-27-288>288</a>
</span><span class=lnt id=hl-27-289><a class=lnlinks href=#hl-27-289>289</a>
</span><span class=lnt id=hl-27-290><a class=lnlinks href=#hl-27-290>290</a>
</span><span class=lnt id=hl-27-291><a class=lnlinks href=#hl-27-291>291</a>
</span><span class=lnt id=hl-27-292><a class=lnlinks href=#hl-27-292>292</a>
</span><span class=lnt id=hl-27-293><a class=lnlinks href=#hl-27-293>293</a>
</span><span class=lnt id=hl-27-294><a class=lnlinks href=#hl-27-294>294</a>
</span><span class=lnt id=hl-27-295><a class=lnlinks href=#hl-27-295>295</a>
</span><span class=lnt id=hl-27-296><a class=lnlinks href=#hl-27-296>296</a>
</span><span class=lnt id=hl-27-297><a class=lnlinks href=#hl-27-297>297</a>
</span><span class=lnt id=hl-27-298><a class=lnlinks href=#hl-27-298>298</a>
</span><span class=lnt id=hl-27-299><a class=lnlinks href=#hl-27-299>299</a>
</span><span class=lnt id=hl-27-300><a class=lnlinks href=#hl-27-300>300</a>
</span><span class=lnt id=hl-27-301><a class=lnlinks href=#hl-27-301>301</a>
</span><span class=lnt id=hl-27-302><a class=lnlinks href=#hl-27-302>302</a>
</span><span class=lnt id=hl-27-303><a class=lnlinks href=#hl-27-303>303</a>
</span><span class=lnt id=hl-27-304><a class=lnlinks href=#hl-27-304>304</a>
</span><span class=lnt id=hl-27-305><a class=lnlinks href=#hl-27-305>305</a>
</span><span class=lnt id=hl-27-306><a class=lnlinks href=#hl-27-306>306</a>
</span><span class=lnt id=hl-27-307><a class=lnlinks href=#hl-27-307>307</a>
</span><span class=lnt id=hl-27-308><a class=lnlinks href=#hl-27-308>308</a>
</span><span class=lnt id=hl-27-309><a class=lnlinks href=#hl-27-309>309</a>
</span><span class=lnt id=hl-27-310><a class=lnlinks href=#hl-27-310>310</a>
</span><span class=lnt id=hl-27-311><a class=lnlinks href=#hl-27-311>311</a>
</span><span class=lnt id=hl-27-312><a class=lnlinks href=#hl-27-312>312</a>
</span><span class=lnt id=hl-27-313><a class=lnlinks href=#hl-27-313>313</a>
</span><span class=lnt id=hl-27-314><a class=lnlinks href=#hl-27-314>314</a>
</span><span class=lnt id=hl-27-315><a class=lnlinks href=#hl-27-315>315</a>
</span><span class=lnt id=hl-27-316><a class=lnlinks href=#hl-27-316>316</a>
</span><span class=lnt id=hl-27-317><a class=lnlinks href=#hl-27-317>317</a>
</span><span class=lnt id=hl-27-318><a class=lnlinks href=#hl-27-318>318</a>
</span><span class=lnt id=hl-27-319><a class=lnlinks href=#hl-27-319>319</a>
</span><span class=lnt id=hl-27-320><a class=lnlinks href=#hl-27-320>320</a>
</span><span class=lnt id=hl-27-321><a class=lnlinks href=#hl-27-321>321</a>
</span><span class=lnt id=hl-27-322><a class=lnlinks href=#hl-27-322>322</a>
</span><span class=lnt id=hl-27-323><a class=lnlinks href=#hl-27-323>323</a>
</span><span class=lnt id=hl-27-324><a class=lnlinks href=#hl-27-324>324</a>
</span><span class=lnt id=hl-27-325><a class=lnlinks href=#hl-27-325>325</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// entities/User.js - 엔티티 정의 (TypeScript)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>Entity</span><span class=p>,</span> <span class=nx>PrimaryGeneratedColumn</span><span class=p>,</span> <span class=nx>Column</span><span class=p>,</span> <span class=nx>OneToMany</span><span class=p>,</span> <span class=nx>ManyToMany</span><span class=p>,</span> <span class=nx>JoinTable</span><span class=p>,</span> <span class=nx>CreateDateColumn</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;typeorm&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Order</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;./Order&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Role</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;./Role&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>@</span><span class=nx>Entity</span><span class=p>(</span><span class=s1>&#39;users&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>User</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 기본 키 자동 생성
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=err>@</span><span class=nx>PrimaryGeneratedColumn</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span><span class=o>:</span> <span class=nx>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 유니크 제약 조건이 있는 컬럼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=err>@</span><span class=nx>Column</span><span class=p>({</span> <span class=nx>unique</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=nx>length</span><span class=o>:</span> <span class=mi>50</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=nx>username</span><span class=o>:</span> <span class=nx>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=err>@</span><span class=nx>Column</span><span class=p>({</span> <span class=nx>unique</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=nx>length</span><span class=o>:</span> <span class=mi>100</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=nx>email</span><span class=o>:</span> <span class=nx>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 자동 타임스탬프
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=err>@</span><span class=nx>CreateDateColumn</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>createdAt</span><span class=o>:</span> <span class=nb>Date</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// One-to-Many 관계 설정
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=err>@</span><span class=nx>OneToMany</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=nx>Order</span><span class=p>,</span> <span class=nx>order</span> <span class=p>=&gt;</span> <span class=nx>order</span><span class=p>.</span><span class=nx>user</span><span class=p>,</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=nx>cascade</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>  <span class=c1>// 연관된 주문도 함께 저장/삭제
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>lazy</span><span class=o>:</span> <span class=kc>true</span>      <span class=c1>// 지연 로딩 설정
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=nx>orders</span><span class=o>:</span> <span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>Order</span><span class=p>[]</span><span class=o>&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Many-to-Many 관계 설정
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=err>@</span><span class=nx>ManyToMany</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=nx>Role</span><span class=p>,</span> <span class=nx>role</span> <span class=p>=&gt;</span> <span class=nx>role</span><span class=p>.</span><span class=nx>users</span><span class=p>,</span> <span class=p>{</span> <span class=nx>eager</span><span class=o>:</span> <span class=kc>true</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=err>@</span><span class=nx>JoinTable</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;user_roles&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>joinColumn</span><span class=o>:</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;user_id&#39;</span><span class=p>,</span> <span class=nx>referencedColumnName</span><span class=o>:</span> <span class=s1>&#39;id&#39;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=nx>inverseJoinColumn</span><span class=o>:</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;role_id&#39;</span><span class=p>,</span> <span class=nx>referencedColumnName</span><span class=o>:</span> <span class=s1>&#39;id&#39;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=nx>roles</span><span class=o>:</span> <span class=nx>Role</span><span class=p>[];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 비즈니스 로직 메서드
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>async</span> <span class=nx>getTotalOrderAmount</span><span class=p>()</span><span class=o>:</span> <span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>number</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>orders</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>orders</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>orders</span><span class=p>.</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>total</span><span class=p>,</span> <span class=nx>order</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>total</span> <span class=o>+</span> <span class=nx>order</span><span class=p>.</span><span class=nx>totalAmount</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 권한 확인 메서드
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>hasRole</span><span class=p>(</span><span class=nx>roleName</span><span class=o>:</span> <span class=nx>string</span><span class=p>)</span><span class=o>:</span> <span class=kr>boolean</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>roles</span><span class=p>.</span><span class=nx>some</span><span class=p>(</span><span class=nx>role</span> <span class=p>=&gt;</span> <span class=nx>role</span><span class=p>.</span><span class=nx>name</span> <span class=o>===</span> <span class=nx>roleName</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// repositories/UserRepository.js - Repository 패턴
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>Repository</span><span class=p>,</span> <span class=nx>EntityRepository</span><span class=p>,</span> <span class=nx>getRepository</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;typeorm&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>User</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;../entities/User&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Order</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;../entities/Order&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>@</span><span class=nx>EntityRepository</span><span class=p>(</span><span class=nx>User</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>UserRepository</span> <span class=kr>extends</span> <span class=nx>Repository</span><span class=o>&lt;</span><span class=nx>User</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 이메일로 사용자 조회
</span></span></span><span class=line><span class=cl><span class=cm>     * @param email 사용자 이메일
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns User 객체 또는 undefined
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>findByEmail</span><span class=p>(</span><span class=nx>email</span><span class=o>:</span> <span class=nx>string</span><span class=p>)</span><span class=o>:</span> <span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>User</span> <span class=o>|</span> <span class=kc>undefined</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>findOne</span><span class=p>({</span> 
</span></span><span class=line><span class=cl>            <span class=nx>where</span><span class=o>:</span> <span class=p>{</span> <span class=nx>email</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nx>relations</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;roles&#39;</span><span class=p>]</span>  <span class=c1>// Eager Loading으로 역할 정보도 함께 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 주문이 있는 사용자 조회 - N+1 문제 해결
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns 주문이 있는 사용자 배열
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>findUsersWithOrders</span><span class=p>()</span><span class=o>:</span> <span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>User</span><span class=p>[]</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>createQueryBuilder</span><span class=p>(</span><span class=s1>&#39;user&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=nx>leftJoinAndSelect</span><span class=p>(</span><span class=s1>&#39;user.orders&#39;</span><span class=p>,</span> <span class=s1>&#39;order&#39;</span><span class=p>)</span>  <span class=c1>// LEFT JOIN으로 한 번에 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=p>.</span><span class=nx>leftJoinAndSelect</span><span class=p>(</span><span class=s1>&#39;user.roles&#39;</span><span class=p>,</span> <span class=s1>&#39;role&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=nx>where</span><span class=p>(</span><span class=s1>&#39;order.id IS NOT NULL&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=nx>getMany</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 동적 검색 쿼리
</span></span></span><span class=line><span class=cl><span class=cm>     * @param searchParams 검색 조건
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns 검색 결과 배열
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>searchUsers</span><span class=p>(</span><span class=nx>searchParams</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>username</span><span class=o>?:</span> <span class=nx>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>email</span><span class=o>?:</span> <span class=nx>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>roleNames</span><span class=o>?:</span> <span class=nx>string</span><span class=p>[];</span>
</span></span><span class=line><span class=cl>        <span class=nx>hasOrders</span><span class=o>?:</span> <span class=kr>boolean</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span><span class=o>:</span> <span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>User</span><span class=p>[]</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>query</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>createQueryBuilder</span><span class=p>(</span><span class=s1>&#39;user&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=nx>leftJoinAndSelect</span><span class=p>(</span><span class=s1>&#39;user.roles&#39;</span><span class=p>,</span> <span class=s1>&#39;role&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 조건부 WHERE 절 추가
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=p>(</span><span class=nx>searchParams</span><span class=p>.</span><span class=nx>username</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>query</span><span class=p>.</span><span class=nx>andWhere</span><span class=p>(</span><span class=s1>&#39;user.username LIKE :username&#39;</span><span class=p>,</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>                <span class=nx>username</span><span class=o>:</span> <span class=sb>`%</span><span class=si>${</span><span class=nx>searchParams</span><span class=p>.</span><span class=nx>username</span><span class=si>}</span><span class=sb>%`</span> 
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>searchParams</span><span class=p>.</span><span class=nx>email</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>query</span><span class=p>.</span><span class=nx>andWhere</span><span class=p>(</span><span class=s1>&#39;user.email LIKE :email&#39;</span><span class=p>,</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>                <span class=nx>email</span><span class=o>:</span> <span class=sb>`%</span><span class=si>${</span><span class=nx>searchParams</span><span class=p>.</span><span class=nx>email</span><span class=si>}</span><span class=sb>%`</span> 
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>searchParams</span><span class=p>.</span><span class=nx>roleNames</span> <span class=o>&amp;&amp;</span> <span class=nx>searchParams</span><span class=p>.</span><span class=nx>roleNames</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>query</span><span class=p>.</span><span class=nx>andWhere</span><span class=p>(</span><span class=s1>&#39;role.name IN (:...roleNames)&#39;</span><span class=p>,</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>                <span class=nx>roleNames</span><span class=o>:</span> <span class=nx>searchParams</span><span class=p>.</span><span class=nx>roleNames</span> 
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>searchParams</span><span class=p>.</span><span class=nx>hasOrders</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>query</span><span class=p>.</span><span class=nx>leftJoin</span><span class=p>(</span><span class=s1>&#39;user.orders&#39;</span><span class=p>,</span> <span class=s1>&#39;order&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                 <span class=p>.</span><span class=nx>andWhere</span><span class=p>(</span><span class=s1>&#39;order.id IS NOT NULL&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>query</span><span class=p>.</span><span class=nx>getMany</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 배치 업데이트 - 성능 최적화
</span></span></span><span class=line><span class=cl><span class=cm>     * @param updates 업데이트할 사용자 정보 배열
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>batchUpdate</span><span class=p>(</span><span class=nx>updates</span><span class=o>:</span> <span class=nb>Array</span><span class=o>&lt;</span><span class=p>{</span><span class=nx>id</span><span class=o>:</span> <span class=nx>number</span><span class=p>,</span> <span class=nx>data</span><span class=o>:</span> <span class=nx>Partial</span><span class=o>&lt;</span><span class=nx>User</span><span class=o>&gt;</span><span class=p>}</span><span class=o>&gt;</span><span class=p>)</span><span class=o>:</span> <span class=nb>Promise</span><span class=o>&lt;</span><span class=k>void</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>queryRunner</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>manager</span><span class=p>.</span><span class=nx>connection</span><span class=p>.</span><span class=nx>createQueryRunner</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=nx>queryRunner</span><span class=p>.</span><span class=nx>connect</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=nx>queryRunner</span><span class=p>.</span><span class=nx>startTransaction</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>update</span> <span class=k>of</span> <span class=nx>updates</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>await</span> <span class=nx>queryRunner</span><span class=p>.</span><span class=nx>manager</span><span class=p>.</span><span class=nx>update</span><span class=p>(</span><span class=nx>User</span><span class=p>,</span> <span class=nx>update</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span> <span class=nx>update</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=kr>await</span> <span class=nx>queryRunner</span><span class=p>.</span><span class=nx>commitTransaction</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>await</span> <span class=nx>queryRunner</span><span class=p>.</span><span class=nx>rollbackTransaction</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=nx>error</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>finally</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>await</span> <span class=nx>queryRunner</span><span class=p>.</span><span class=nx>release</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// services/UserService.js - 비즈니스 로직
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>getCustomRepository</span><span class=p>,</span> <span class=nx>getConnection</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;typeorm&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>UserRepository</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;../repositories/UserRepository&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Role</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;../entities/Role&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>User</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;../entities/User&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>UserService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>private</span> <span class=nx>userRepository</span><span class=o>:</span> <span class=nx>UserRepository</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>userRepository</span> <span class=o>=</span> <span class=nx>getCustomRepository</span><span class=p>(</span><span class=nx>UserRepository</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 사용자 등록 - 트랜잭션 처리
</span></span></span><span class=line><span class=cl><span class=cm>     * @param userData 사용자 정보
</span></span></span><span class=line><span class=cl><span class=cm>     * @param roleNames 역할 이름 배열
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns 생성된 사용자
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>registerUser</span><span class=p>(</span><span class=nx>userData</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>username</span><span class=o>:</span> <span class=nx>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>email</span><span class=o>:</span> <span class=nx>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=nx>roleNames</span><span class=o>:</span> <span class=nx>string</span><span class=p>[])</span><span class=o>:</span> <span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>User</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 트랜잭션 시작
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=kr>await</span> <span class=nx>getConnection</span><span class=p>().</span><span class=nx>transaction</span><span class=p>(</span><span class=kr>async</span> <span class=nx>manager</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 중복 검사
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>existingUser</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>manager</span><span class=p>.</span><span class=nx>findOne</span><span class=p>(</span><span class=nx>User</span><span class=p>,</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>                <span class=nx>where</span><span class=o>:</span> <span class=p>{</span> <span class=nx>email</span><span class=o>:</span> <span class=nx>userData</span><span class=p>.</span><span class=nx>email</span> <span class=p>}</span> 
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>existingUser</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=sb>`Email </span><span class=si>${</span><span class=nx>userData</span><span class=p>.</span><span class=nx>email</span><span class=si>}</span><span class=sb> already exists`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// 역할 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>roles</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>manager</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span><span class=nx>Role</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>where</span><span class=o>:</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=nx>roleNames</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>roles</span><span class=p>.</span><span class=nx>length</span> <span class=o>!==</span> <span class=nx>roleNames</span><span class=p>.</span><span class=nx>length</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;Some roles not found&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// 사용자 생성
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=nx>manager</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=nx>User</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=p>...</span><span class=nx>userData</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>roles</span><span class=o>:</span> <span class=nx>roles</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kr>await</span> <span class=nx>manager</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=nx>user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 사용자 대시보드 데이터 - 최적화된 조회
</span></span></span><span class=line><span class=cl><span class=cm>     * @param userId 사용자 ID
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns 대시보드 데이터
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getUserDashboard</span><span class=p>(</span><span class=nx>userId</span><span class=o>:</span> <span class=nx>number</span><span class=p>)</span><span class=o>:</span> <span class=nb>Promise</span><span class=o>&lt;</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>user</span><span class=o>:</span> <span class=nx>User</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>orderStats</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>totalOrders</span><span class=o>:</span> <span class=nx>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nx>totalAmount</span><span class=o>:</span> <span class=nx>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nx>recentOrders</span><span class=o>:</span> <span class=nx>Order</span><span class=p>[];</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 한 번의 쿼리로 필요한 모든 데이터 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>userRepository</span><span class=p>.</span><span class=nx>createQueryBuilder</span><span class=p>(</span><span class=s1>&#39;user&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=nx>leftJoinAndSelect</span><span class=p>(</span><span class=s1>&#39;user.roles&#39;</span><span class=p>,</span> <span class=s1>&#39;role&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=nx>leftJoinAndSelect</span><span class=p>(</span><span class=s1>&#39;user.orders&#39;</span><span class=p>,</span> <span class=s1>&#39;order&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=nx>where</span><span class=p>(</span><span class=s1>&#39;user.id = :userId&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>userId</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=nx>orderBy</span><span class=p>(</span><span class=s1>&#39;order.createdAt&#39;</span><span class=p>,</span> <span class=s1>&#39;DESC&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=nx>getOne</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>user</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=sb>`User </span><span class=si>${</span><span class=nx>userId</span><span class=si>}</span><span class=sb> not found`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>orders</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>user</span><span class=p>.</span><span class=nx>orders</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>recentOrders</span> <span class=o>=</span> <span class=nx>orders</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>5</span><span class=p>);</span> <span class=c1>// 최근 5개 주문
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>user</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>orderStats</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>totalOrders</span><span class=o>:</span> <span class=nx>orders</span><span class=p>.</span><span class=nx>length</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>totalAmount</span><span class=o>:</span> <span class=kr>await</span> <span class=nx>user</span><span class=p>.</span><span class=nx>getTotalOrderAmount</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                <span class=nx>recentOrders</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 성능 모니터링이 포함된 대량 처리
</span></span></span><span class=line><span class=cl><span class=cm>     * @param userIds 처리할 사용자 ID 배열
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns 처리 결과
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>processUsersInBatch</span><span class=p>(</span><span class=nx>userIds</span><span class=o>:</span> <span class=nx>number</span><span class=p>[])</span><span class=o>:</span> <span class=nb>Promise</span><span class=o>&lt;</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>processed</span><span class=o>:</span> <span class=nx>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>failed</span><span class=o>:</span> <span class=nx>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>duration</span><span class=o>:</span> <span class=nx>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>startTime</span> <span class=o>=</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>processed</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>failed</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 배치 크기 설정 (메모리 관리)
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>batchSize</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=nx>userIds</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=nx>i</span> <span class=o>+=</span> <span class=nx>batchSize</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>batch</span> <span class=o>=</span> <span class=nx>userIds</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>i</span> <span class=o>+</span> <span class=nx>batchSize</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>await</span> <span class=nx>getConnection</span><span class=p>().</span><span class=nx>transaction</span><span class=p>(</span><span class=kr>async</span> <span class=nx>manager</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=c1>// 배치 단위로 처리
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=kr>const</span> <span class=nx>users</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>manager</span><span class=p>.</span><span class=nx>findByIds</span><span class=p>(</span><span class=nx>User</span><span class=p>,</span> <span class=nx>batch</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>user</span> <span class=k>of</span> <span class=nx>users</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=c1>// 비즈니스 로직 처리
</span></span></span><span class=line><span class=cl><span class=c1></span>                        <span class=nx>user</span><span class=p>.</span><span class=nx>lastProcessedAt</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>();</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=kr>await</span> <span class=nx>manager</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=nx>users</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=nx>processed</span> <span class=o>+=</span> <span class=nx>users</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=p>});</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`Batch processing failed for batch starting at </span><span class=si>${</span><span class=nx>i</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=nx>failed</span> <span class=o>+=</span> <span class=nx>batch</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>processed</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>failed</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>duration</span><span class=o>:</span> <span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span> <span class=o>-</span> <span class=nx>startTime</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// app.js - 사용 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>createConnection</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;typeorm&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>UserService</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;./services/UserService&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 데이터베이스 연결
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>await</span> <span class=nx>createConnection</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>type</span><span class=o>:</span> <span class=s1>&#39;postgres&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>host</span><span class=o>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>port</span><span class=o>:</span> <span class=mi>5432</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>username</span><span class=o>:</span> <span class=s1>&#39;user&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>password</span><span class=o>:</span> <span class=s1>&#39;password&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>database</span><span class=o>:</span> <span class=s1>&#39;ecommerce&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>entities</span><span class=o>:</span> <span class=p>[</span><span class=nx>User</span><span class=p>,</span> <span class=nx>Order</span><span class=p>,</span> <span class=nx>Role</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=nx>synchronize</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>  <span class=c1>// 개발 환경에서만 사용
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>logging</span><span class=o>:</span> <span class=kc>true</span>       <span class=c1>// SQL 로깅 활성화
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>userService</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>UserService</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 사용자 등록
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>userService</span><span class=p>.</span><span class=nx>registerUser</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>username</span><span class=o>:</span> <span class=s1>&#39;jane_doe&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>email</span><span class=o>:</span> <span class=s1>&#39;jane@example.com&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>[</span><span class=s1>&#39;customer&#39;</span><span class=p>,</span> <span class=s1>&#39;premium&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;User created:&#39;</span><span class=p>,</span> <span class=nx>user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 대시보드 데이터 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>dashboard</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>userService</span><span class=p>.</span><span class=nx>getUserDashboard</span><span class=p>(</span><span class=nx>user</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Dashboard data:&#39;</span><span class=p>,</span> <span class=nx>dashboard</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>main</span><span class=p>().</span><span class=k>catch</span><span class=p>(</span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>이 구현 예시들은 ORM 의 핵심 기능들을 실제 사용 가능한 코드로 보여줍니다:</p><ol><li><strong>엔티티 정의</strong>: 테이블과 클래스 간의 매핑</li><li><strong>관계 설정</strong>: One-to-Many, Many-to-Many 관계 구현</li><li><strong>Repository 패턴</strong>: 데이터 접근 로직 분리</li><li><strong>트랜잭션 관리</strong>: 데이터 일관성 보장</li><li><strong>성능 최적화</strong>: N+1 문제 해결, 배치 처리</li><li><strong>동적 쿼리</strong>: 조건부 검색 구현</li><li><strong>오류 처리</strong>: 예외 상황 대응</li></ol><hr><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>구분</th><th>고려사항</th><th>주의할 점</th><th>권장사항</th></tr></thead><tbody><tr><td>설계 단계</td><td>도메인 모델 명확화</td><td>과도한 추상화 방지</td><td>비즈니스 요구사항 우선 분석</td></tr><tr><td>성능 관리</td><td>쿼리 최적화 전략 수립</td><td>N+1 쿼리 문제 주의</td><td>Eager/Lazy Loading 적절한 선택</td></tr><tr><td>보안 측면</td><td>입력 검증 강화</td><td>동적 쿼리 남용 금지</td><td>파라미터화된 쿼리 사용</td></tr><tr><td>트랜잭션</td><td>적절한 범위 설정</td><td>장기간 트랜잭션 방지</td><td>명시적 트랜잭션 경계 관리</td></tr><tr><td>캐싱 전략</td><td>메모리 사용량 모니터링</td><td>캐시 무효화 전략 수립</td><td>적절한 TTL 설정</td></tr><tr><td>테스트</td><td>단위 테스트 작성</td><td>통합 테스트 병행</td><td>테스트 데이터베이스 분리</td></tr><tr><td>마이그레이션</td><td>스키마 버전 관리</td><td>무중단 배포 고려</td><td>점진적 마이그레이션 적용</td></tr><tr><td>모니터링</td><td>쿼리 성능 추적</td><td>메모리 누수 감시</td><td>APM 도구 활용</td></tr></tbody></table><hr><h3 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>구분</th><th>고려사항</th><th>주의할 점</th><th>권장사항</th></tr></thead><tbody><tr><td>쿼리 최적화</td><td>실행 계획 분석</td><td>불필요한 JOIN 제거</td><td>인덱스 활용 극대화</td></tr><tr><td>메모리 관리</td><td>객체 생명주기 관리</td><td>1 차 캐시 크기 제한</td><td>명시적 메모리 정리</td></tr><tr><td>연결 관리</td><td>커넥션 풀 튜닝</td><td>데드락 방지</td><td>적절한 타임아웃 설정</td></tr><tr><td>배치 처리</td><td>대용량 데이터 분할</td><td>메모리 오버플로우 방지</td><td>스트리밍 처리 적용</td></tr><tr><td>동시성 제어</td><td>락 전략 수립</td><td>경합 상황 최소화</td><td>낙관적 락 우선 사용</td></tr><tr><td>캐시 활용</td><td>히트율 향상</td><td>데이터 일관성 유지</td><td>분산 캐시 고려</td></tr><tr><td>프로파일링</td><td>성능 병목점 식별</td><td>프로덕션 영향 최소화</td><td>주기적 성능 검토</td></tr><tr><td>스키마 최적화</td><td>정규화/반정규화 균형</td><td>과도한 관계 복잡성 방지</td><td>읽기/쓰기 패턴 분석</td></tr></tbody></table><hr><h3 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>성능 최적화</td><td>Query Optimization</td><td>N+1 문제 해결</td><td>Eager Loading 과 JOIN 쿼리 활용으로 성능 향상</td></tr><tr><td>성능 최적화</td><td>Caching Strategy</td><td>다단계 캐싱</td><td>1 차/2 차 캐시와 분산 캐시 조합으로 응답 속도 개선</td></tr><tr><td>성능 최적화</td><td>Batch Processing</td><td>대량 처리 최적화</td><td>배치 CRUD 연산으로 데이터베이스 부하 감소</td></tr><tr><td>보안 강화</td><td>SQL Injection Prevention</td><td>자동 파라미터화</td><td>ORM 의 내장 보안 기능으로 취약점 방지</td></tr><tr><td>보안 강화</td><td>Access Control</td><td>권한 기반 접근</td><td>엔티티 레벨 보안 정책 적용</td></tr><tr><td>아키텍처 패턴</td><td>Active Record</td><td>단순한 CRUD</td><td>작은 규모 프로젝트에 적합한 패턴</td></tr><tr><td>아키텍처 패턴</td><td>Data Mapper</td><td>복잡한 도메인</td><td>엔터프라이즈 애플리케이션에 적합한 패턴</td></tr><tr><td>아키텍처 패턴</td><td>Repository Pattern</td><td>데이터 접근 추상화</td><td>테스트 가능성과 유지보수성 향상</td></tr><tr><td>기술 동향</td><td>TypeScript 지원</td><td>타입 안전성</td><td>컴파일 타임 오류 검출과 IDE 지원 강화</td></tr><tr><td>기술 동향</td><td>GraphQL 통합</td><td>API 최적화</td><td>필요한 데이터만 조회하는 효율적 쿼리</td></tr><tr><td>기술 동향</td><td>Microservices 지원</td><td>분산 아키텍처</td><td>서비스 간 데이터 일관성과 트랜잭션 관리</td></tr><tr><td>클라우드 최적화</td><td>Connection Pooling</td><td>리소스 효율성</td><td>클라우드 환경에서 연결 비용 최적화</td></tr><tr><td>클라우드 최적화</td><td>Auto-scaling 지원</td><td>동적 확장</td><td>트래픽 변화에 따른 자동 리소스 조정</td></tr></tbody></table><hr><h3 id=반드시-학습해야할-내용>반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#반드시-학습해야할-내용>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>기본 개념</td><td>Object-Relational Mapping</td><td>매핑 기초</td><td>객체와 테이블 간 데이터 변환 원리</td></tr><tr><td>기본 개념</td><td>Entity Lifecycle</td><td>상태 관리</td><td>Transient, Persistent, Detached 상태 이해</td></tr><tr><td>기본 개념</td><td>Persistence Context</td><td>영속성 컨텍스트</td><td>1 차 캐시와 변경 감지 메커니즘</td></tr><tr><td>핵심 패턴</td><td>Active Record vs Data Mapper</td><td>패턴 비교</td><td>각 패턴의 장단점과 적용 시나리오</td></tr><tr><td>핵심 패턴</td><td>Unit of Work</td><td>트랜잭션 관리</td><td>변경사항 추적과 일괄 처리 방식</td></tr><tr><td>핵심 패턴</td><td>Identity Map</td><td>객체 동일성</td><td>메모리 내 객체 고유성 보장 방법</td></tr><tr><td>관계 매핑</td><td>One-to-One</td><td>일대일 관계</td><td>단방향/양방향 매핑과 외래 키 관리</td></tr><tr><td>관계 매핑</td><td>One-to-Many</td><td>일대다 관계</td><td>컬렉션 매핑과 연관 관계 주인</td></tr><tr><td>관계 매핑</td><td>Many-to-Many</td><td>다대다 관계</td><td>조인 테이블과 추가 속성 처리</td></tr><tr><td>쿼리 최적화</td><td>Lazy vs Eager Loading</td><td>로딩 전략</td><td>성능과 메모리 사용량 최적화</td></tr><tr><td>쿼리 최적화</td><td>N+1 Problem</td><td>성능 이슈</td><td>문제 발생 원인과 해결 방법</td></tr><tr><td>쿼리 최적화</td><td>Query Optimization</td><td>쿼리 튜닝</td><td>실행 계획 분석과 인덱스 활용</td></tr><tr><td>트랜잭션</td><td>ACID Properties</td><td>트랜잭션 속성</td><td>원자성, 일관성, 고립성, 지속성</td></tr><tr><td>트랜잭션</td><td>Isolation Levels</td><td>격리 수준</td><td>Read Uncommitted 부터 Serializable 까지</td></tr><tr><td>트랜잭션</td><td>Concurrency Control</td><td>동시성 제어</td><td>낙관적/비관적 락 사용법</td></tr><tr><td>캐싱 전략</td><td>First-Level Cache</td><td>1 차 캐시</td><td>세션 내 캐시 동작 방식</td></tr><tr><td>캐싱 전략</td><td>Second-Level Cache</td><td>2 차 캐시</td><td>세션 간 공유 캐시 설정</td></tr><tr><td>캐싱 전략</td><td>Query Cache</td><td>쿼리 캐시</td><td>쿼리 결과 캐싱과 무효화</td></tr><tr><td>보안 관리</td><td>SQL Injection Prevention</td><td>보안 취약점</td><td>파라미터화된 쿼리 사용법</td></tr><tr><td>보안 관리</td><td>Data Validation</td><td>데이터 검증</td><td>입력 검증과 제약 조건 설정</td></tr><tr><td>성능 모니터링</td><td>Query Logging</td><td>쿼리 추적</td><td>SQL 로깅과 성능 분석</td></tr><tr><td>성능 모니터링</td><td>Performance Metrics</td><td>성능 지표</td><td>응답 시간, 처리량, 리소스 사용량</td></tr></tbody></table><hr><h3 id=용어-정리-3>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-3>#</a></h3><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>기본 개념</td><td>ORM (Object-Relational Mapping)</td><td>객체지향 프로그래밍 언어와 관계형 데이터베이스 간의 데이터 변환을 자동화하는 기법</td></tr><tr><td>기본 개념</td><td>Entity (엔티티)</td><td>데이터베이스 테이블과 매핑되는 객체지향 프로그래밍의 클래스</td></tr><tr><td>기본 개념</td><td>Persistence (영속성)</td><td>프로그램 실행이 끝난 후에도 데이터가 지속되는 특성</td></tr><tr><td>패턴</td><td>Active Record</td><td>데이터베이스 테이블의 행을 객체로 래핑하고, 객체 자체가 데이터베이스 연산을 수행하는 패턴</td></tr><tr><td>패턴</td><td>Data Mapper</td><td>도메인 객체와 데이터베이스 매핑 로직을 분리하는 패턴</td></tr><tr><td>패턴</td><td>Unit of Work</td><td>트랜잭션 범위 내에서 영향받는 객체들의 변경사항을 추적하고 일괄 처리하는 패턴</td></tr><tr><td>패턴</td><td>Identity Map</td><td>메모리상에서 로드된 객체의 고유성을 보장하는 패턴</td></tr><tr><td>로딩 전략</td><td>Lazy Loading (지연 로딩)</td><td>연관된 데이터를 실제로 필요한 시점에 로드하는 전략</td></tr><tr><td>로딩 전략</td><td>Eager Loading (즉시 로딩)</td><td>연관된 데이터를 미리 함께 로드하는 전략</td></tr><tr><td>성능</td><td>N+1 Query Problem</td><td>하나의 쿼리로 N 개의 레코드를 조회한 후, 각 레코드마다 추가 쿼리를 실행하는 성능 문제</td></tr><tr><td>캐싱</td><td>First-Level Cache (1 차 캐시)</td><td>세션 또는 EntityManager 내에서 관리되는 캐시</td></tr><tr><td>캐싱</td><td>Second-Level Cache (2 차 캐시)</td><td>세션 간에 공유되는 캐시</td></tr><tr><td>트랜잭션</td><td>ACID</td><td>원자성 (Atomicity), 일관성 (Consistency), 고립성 (Isolation), 지속성 (Durability) 의 약자</td></tr><tr><td>트랜잭션</td><td>Optimistic Locking (낙관적 락)</td><td>충돌이 드물다고 가정하고 커밋 시점에 충돌을 검사하는 동시성 제어 방식</td></tr><tr><td>트랜잭션</td><td>Pessimistic Locking (비관적 락)</td><td>데이터 접근 시점에 락을 걸어 충돌을 미리 방지하는 동시성 제어 방식</td></tr><tr><td>쿼리</td><td>HQL (Hibernate Query Language)</td><td>Hibernate 에서 사용하는 객체지향 쿼리 언어</td></tr><tr><td>쿼리</td><td>JPQL (Java Persistence Query Language)</td><td>JPA 표준에서 정의한 객체지향 쿼리 언어</td></tr><tr><td>쿼리</td><td>Query Builder</td><td>프로그래밍적으로 SQL 쿼리를 구성할 수 있는 인터페이스</td></tr><tr><td>생명주기</td><td>Transient</td><td>아직 영속성 컨텍스트에 저장되지 않은 새로운 객체 상태</td></tr><tr><td>생명주기</td><td>Persistent</td><td>영속성 컨텍스트에 저장되어 관리되는 객체 상태</td></tr><tr><td>생명주기</td><td>Detached</td><td>영속성 컨텍스트에서 분리된 객체 상태</td></tr><tr><td>매핑</td><td>Association (연관관계)</td><td>엔티티 간의 관계를 나타내는 매핑</td></tr><tr><td>매핑</td><td>Cascade</td><td>연관된 엔티티에 대한 연산을 자동으로 전파하는 설정</td></tr><tr><td>매핑</td><td>Fetch Strategy</td><td>연관된 데이터를 언제, 어떻게 로드할지 결정하는 전략</td></tr></tbody></table><hr><h3 id=참고-및-출처-3>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-3>#</a></h3><ul><li><a href=https://www.theserverside.com/definition/object-relational-mapping-ORM>TechTarget Definition of Object-Relational Mapping</a></li><li><a href=https://www.geeksforgeeks.org/dbms/what-is-object-relational-mapping-orm-in-dbms/>GeeksforGeeks - What is Object-Relational Mapping (ORM) in DBMS?</a></li><li><a href=https://www.enablegeek.com/blog/object-relational-mapping-orm/>EnableGeek - Understanding Object-Relational Mapping (ORM): A Powerful Data Access Technique</a></li><li><a href=https://www.analyticsvidhya.com/blog/2024/01/what-is-the-difference-between-sql-and-object-relational-mapping/>Analytics Vidhya - What Is the Difference Between SQL and Object Relational Mapping?</a></li><li><a href=https://www.freecodecamp.org/news/what-is-an-orm-the-meaning-of-object-relational-mapping-database-tools/>freeCodeCamp - What is an ORM – The Meaning of Object Relational Mapping Database Tools</a></li><li><a href=https://en.wikipedia.org/wiki/Object%E2%80%93relational_mapping>Wikipedia - Object–relational mapping</a></li><li><a href=https://dataforest.ai/glossary/orm-object-relational-mapping>Dataforest AI - ORM (Object-Relational Mapping)</a></li><li><a href=https://www.altexsoft.com/blog/object-relational-mapping-tools/>AltexSoft - Object-Relational Mapping Tools: Pros, Cons, and When to Use</a></li><li><a href=https://www.thoughtfulcode.com/orm-active-record-vs-data-mapper/>Thoughtful Code - ORM Patterns: The Trade-Offs of Active Record and Data Mappers</a></li><li><a href=https://medium.com/oceanize-geeks/the-active-record-and-data-mappers-of-orm-pattern-eefb8262b7bb>Medium - The Active Record and Data Mappers of ORM Pattern</a></li><li><a href=https://typeorm.io/docs/advanced-topics/performance-optimizing/>TypeORM Documentation - Performance and optimization</a></li><li><a href=https://cheatsheetseries.owasp.org/cheatsheets/SQL_Injection_Prevention_Cheat_Sheet.html>OWASP - SQL Injection Prevention Cheat Sheet</a></li><li><a href=https://snyk.io/blog/sql-injection-orm-vulnerabilities/>Snyk - Fixing SQL Injection: ORM is not enough</a></li><li><a href=https://www.nucamp.co/blog/coding-bootcamp-backend-with-python-2025-modern-orm-frameworks-in-2025-django-orm-sqlalchemy-and-beyond>Nucamp - Modern ORM Frameworks in 2025: Django ORM, SQLAlchemy, and Beyond</a></li><li><a href=https://strapi.io/blog/orms-for-developers>Strapi - Top 5 ORMs for Developers in 2025</a></li></ul><hr><p>객체 지향 프로그래밍 언어와 관계형 데이터베이스 사이의 불일치를 해결하기 위한 기술</p><p>특징:</p><ol><li>객체와 데이터베이스 테이블 간의 매핑</li><li>SQL 쿼리 대신 객체 지향적 방식으로 데이터베이스 조작</li><li>데이터베이스 독립성 제공</li></ol><p>장점:</p><ol><li>직관적이고 가독성 좋은 코드 작성 가능</li><li>생산성 향상: 개발자가 비즈니스 로직에 집중 가능</li><li>재사용성과 유지보수성 증가</li><li>데이터베이스 종속성 감소</li></ol><p>단점:</p><ol><li>성능 저하 가능성: 복잡한 쿼리의 경우 최적화가 어려울 수 있음</li><li>학습 곡선: ORM 사용법을 익히는 데 시간이 필요</li><li>복잡한 쿼리 처리의 한계: 매우 복잡한 쿼리는 직접 SQL 작성이 필요할 수 있음</li></ol><p>ORM 과 raw query 사이에는 성능 차이가 존재한다.<br>일반적으로 raw SQL 이 ORM 보다 더 나은 성능을 보인다.<br>주요 차이점은 다음과 같습니다:</p><ol><li>실행 속도: raw SQL 쿼리가 ORM 보다 더 빠른 실행 속도를 보인다. ORM 은 추상화 계층으로 인한 오버헤드가 있어 성능이 저하될 수 있다.</li><li>복잡한 쿼리 처리: raw SQL 은 복잡한 데이터베이스 작업에서 더 효율적이다. 개발자가 데이터베이스 특정 기능과 최적화를 직접 활용할 수 있기 때문이다.</li><li>쿼리 최적화: raw SQL 을 사용하면 개발자가 쿼리를 세밀하게 조정하고 최적화할 수 있다. ORM 이 생성하는 쿼리는 항상 최적화되지 않을 수 있다.</li><li>대규모 데이터 처리: 대량 삽입, 업데이트, 삭제 작업에서 ORM 은 raw SQL 보다 느릴 수 있다.<br>그러나 ORM 도 캐싱 메커니즘을 통해 성능을 개선할 수 있으며, 간단한 CRUD 작업이나 중소규모 애플리케이션에서는 충분히 효과적일 수 있다. 따라서 프로젝트의 요구사항과 복잡성에 따라 적절한 방식을 선택해야 한다.</li></ol><hr><h3 id=참고-및-출처-4>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-4>#</a></h3></div><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>N+1 문제 (N plus one problem)</h2></header><div class=entry-content><p>N+1 문제 (N plus One problem) N+1 문제는 객체 관계형 매핑(ORM)을 사용하는 애플리케이션에서 발생하는 성능 문제이다.
N+1 문제는 데이터베이스 쿼리 실행 패턴과 관련된 성능 문제로, 하나의 쿼리(1)로 부모 엔티티 목록을 가져온 후, 각 부모 엔티티의 자식 엔티티를 가져오기 위해 추가적인 쿼리(N)를 실행하는 상황을 말한다.
예를 들어, 블로그 애플리케이션에서 10개의 게시글과 각 게시글에 달린 댓글을 가져오려고 할 때:
먼저 게시글 10개를 가져오는 쿼리 1번 각 게시글마다 댓글을 가져오기 위해 추가 쿼리 10번 총 11번(1+10)의 쿼리가 실행되는데, 이것이 바로 N+1 문제이다.
...</p></div><footer class=entry-footer><span title='2024-10-24 11:21:00 +0000 UTC'>October 24, 2024</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to N+1 문제 (N plus one problem)" href=https://buenhyden.github.io/posts/system-design/distributed-systems/middlewares/data-access-middleware/orms/n-plus-one-problem/></a></article></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>