<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Apache Pulsar | hyunyoun's Blog</title><meta name=keywords content="Backend-Development,Event-and-Message-Brokers,Message-Broker-Systems,Apache-Pulsar"><meta name=description content="분산형 메시징 및 스트리밍 플랫폼이다. Pulsar는 기존의 메시지 큐와 스트리밍 시스템의 장점을 결합하여 높은 성능, 낮은 지연 시간, 그리고 강력한 내구성을 제공한다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/system-design/message-oriented-systems/message-brokers/apache-pulsar/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/system-design/message-oriented-systems/message-brokers/apache-pulsar/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/system-design/message-oriented-systems/message-brokers/apache-pulsar/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/system-design/message-oriented-systems/message-brokers/apache-pulsar/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Apache Pulsar"><meta property="og:description" content="분산형 메시징 및 스트리밍 플랫폼이다. Pulsar는 기존의 메시지 큐와 스트리밍 시스템의 장점을 결합하여 높은 성능, 낮은 지연 시간, 그리고 강력한 내구성을 제공한다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Apache Pulsar"><meta name=twitter:description content="분산형 메시징 및 스트리밍 플랫폼이다. Pulsar는 기존의 메시지 큐와 스트리밍 시스템의 장점을 결합하여 높은 성능, 낮은 지연 시간, 그리고 강력한 내구성을 제공한다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Apache Pulsar","item":"https://buenhyden.github.io/posts/system-design/message-oriented-systems/message-brokers/apache-pulsar/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a></div><h1>Apache Pulsar</h1><div class=post-description>분산형 메시징 및 스트리밍 플랫폼이다. Pulsar는 기존의 메시지 큐와 스트리밍 시스템의 장점을 결합하여 높은 성능, 낮은 지연 시간, 그리고 강력한 내구성을 제공한다.</div></header><div class=post-content><h2 id=apache-pulsar>Apache Pulsar<a hidden class=anchor aria-hidden=true href=#apache-pulsar>#</a></h2><p>Apache Pulsar는 Yahoo에서 개발하고 Apache Software Foundation에서 관리하는 분산형 메시징 및 스트리밍 플랫폼이다. Pulsar는 기존의 메시지 큐와 스트리밍 시스템의 장점을 결합하여 높은 성능, 낮은 지연 시간, 그리고 강력한 내구성을 제공한다.</p><h3 id=주요-특징>주요 특징<a hidden class=anchor aria-hidden=true href=#주요-특징>#</a></h3><ul><li><strong>멀티 테넌시(Multi-tenancy)</strong>: 다양한 팀이나 애플리케이션이 같은 클러스터를 공유할 수 있다.</li><li><strong>스트리밍과 큐잉의 통합</strong>: 전통적인 메시징과 스트리밍 패러다임을 동시에 지원한다.</li><li><strong>지역 간 복제(Geo-replication)</strong>: 여러 데이터센터나 지역에 걸쳐 데이터를 복제할 수 있다.</li><li><strong>계층형 스토리지</strong>: 핫 데이터는 메모리나 SSD에, 콜드 데이터는 HDD나 객체 스토리지에 저장한다.</li><li><strong>Functions와 IO 커넥터</strong>: 서버리스 컴퓨팅과 데이터 통합 기능을 제공한다.</li><li><strong>트랜잭션 지원</strong>: 정확히 한 번(exactly-once) 메시지 처리를 보장한다.</li><li><strong>스키마 레지스트리</strong>: 메시지의 스키마와 버전 관리를 지원한다.</li></ul><h3 id=아키텍처-개요>아키텍처 개요<a hidden class=anchor aria-hidden=true href=#아키텍처-개요>#</a></h3><p>Pulsar의 아키텍처는 크게 세 가지 주요 컴포넌트로 구성된다:</p><ol><li><strong>Broker</strong>: 클라이언트로부터 메시지를 수신하고 전달하는 역할을 한다.</li><li><strong>BookKeeper</strong>: 메시지를 저장하고 관리하는 분산 로그 스토리지 시스템이다.</li><li><strong>ZooKeeper</strong>: 메타데이터 관리와 조정을 담당한다.</li></ol><p>이러한 구조를 통해 Pulsar는 스토리지와 컴퓨팅을 분리하여 각각을 독립적으로 확장할 수 있는 유연성을 제공한다.</p><h3 id=pulsar의-핵심-개념>Pulsar의 핵심 개념<a hidden class=anchor aria-hidden=true href=#pulsar의-핵심-개념>#</a></h3><h4 id=토픽과-서브스크립션>토픽과 서브스크립션<a hidden class=anchor aria-hidden=true href=#토픽과-서브스크립션>#</a></h4><ul><li><p><strong>토픽(Topic)</strong>: 메시지가 발행되는 채널이다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>persistent://tenant/namespace/topic
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>서브스크립션(Subscription)</strong>: 토픽으로부터 메시지를 소비하는 방식을 정의한다.</p><ul><li>서브스크립션 모드:<ul><li><strong>Exclusive</strong>: 하나의 소비자만 서브스크립션에 연결할 수 있다.</li><li><strong>Failover</strong>: 여러 소비자가 연결될 수 있지만, 하나의 소비자만 활성화된다. 활성 소비자가 실패하면 다음 소비자가 활성화된다.</li><li><strong>Shared</strong>: 메시지는 모든 소비자에게 라운드 로빈 방식으로 분배된다.</li><li><strong>Key_Shared</strong>: 동일한 키를 가진 메시지는 항상 동일한 소비자에게 전달된다.</li></ul></li></ul></li></ul><h4 id=파티션-토픽partitioned-topic>파티션 토픽(Partitioned Topic)<a hidden class=anchor aria-hidden=true href=#파티션-토픽partitioned-topic>#</a></h4><p>높은 처리량을 위해 토픽을 여러 파티션으로 나눌 수 있다. 각 파티션은 독립적인 토픽으로 처리되며, 메시지는 키(key)를 기반으로 파티션에 분배된다.</p><h4 id=네임스페이스와-테넌트>네임스페이스와 테넌트<a hidden class=anchor aria-hidden=true href=#네임스페이스와-테넌트>#</a></h4><p><strong>테넌트(Tenant)</strong>: 조직이나 팀을 나타내는 최상위 단위이다.<br><strong>네임스페이스(Namespace)</strong>: 테넌트 내에서 관련된 토픽들을 그룹화하는 단위이다. 네임스페이스 수준에서 정책(TTL, 보존 정책 등)을 설정할 수 있다.</p><h4 id=메시지-형식>메시지 형식<a hidden class=anchor aria-hidden=true href=#메시지-형식>#</a></h4><p>Pulsar 메시지는 다음과 같은 구성 요소를 포함할 수 있다:</p><ul><li>값(Value): 실제 메시지 내용</li><li>키(Key): 메시지 라우팅에 사용</li><li>속성(Properties): 사용자 정의 메타데이터</li><li>이벤트 시간(Event Time): 메시지가 생성된 시간</li><li>스키마(Schema): 메시지의 구조를 정의</li></ul><h3 id=pulsar-설치-및-기본-구성>Pulsar 설치 및 기본 구성<a hidden class=anchor aria-hidden=true href=#pulsar-설치-및-기본-구성>#</a></h3><h4 id=독립-실행형standalone-모드-설치>독립 실행형(Standalone) 모드 설치<a hidden class=anchor aria-hidden=true href=#독립-실행형standalone-모드-설치>#</a></h4><p>개발 및 테스트 환경에서는 Pulsar를 독립 실행형 모드로 실행할 수 있다. 이 모드에서는 ZooKeeper, BookKeeper, Broker가 모두 하나의 프로세스에서 실행된다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5>5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6>6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Pulsar 다운로드</span>
</span></span><span class=line><span class=cl>wget https://archive.apache.org/dist/pulsar/pulsar-2.10.1/apache-pulsar-2.10.1-bin.tar.gz
</span></span><span class=line><span class=cl>tar -xf apache-pulsar-2.10.1-bin.tar.gz
</span></span><span class=line><span class=cl><span class=nb>cd</span> apache-pulsar-2.10.1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Standalone 모드 시작</span>
</span></span><span class=line><span class=cl>bin/pulsar standalone
</span></span></code></pre></td></tr></table></div></div><h4 id=클러스터-모드-설치>클러스터 모드 설치<a hidden class=anchor aria-hidden=true href=#클러스터-모드-설치>#</a></h4><p>프로덕션 환경에서는 고가용성과 확장성을 위해 클러스터 모드로 Pulsar를 배포해야 한다. 이를 위해서는 여러 ZooKeeper, BookKeeper, Broker 인스턴스를 설정해야 한다.</p><p>기본적인 3노드 클러스터 구성:</p><ul><li>3개의 ZooKeeper 노드</li><li>3개 이상의 BookKeeper 노드</li><li>3개 이상의 Broker 노드</li></ul><h4 id=docker-및-kubernetes-배포>Docker 및 Kubernetes 배포<a hidden class=anchor aria-hidden=true href=#docker-및-kubernetes-배포>#</a></h4><p>Docker 및 Kubernetes를 사용한 배포도 가능하다.</p><p>Docker Compose를 사용한 예제:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span><span class=lnt id=hl-2-20><a class=lnlinks href=#hl-2-20>20</a>
</span><span class=lnt id=hl-2-21><a class=lnlinks href=#hl-2-21>21</a>
</span><span class=lnt id=hl-2-22><a class=lnlinks href=#hl-2-22>22</a>
</span><span class=lnt id=hl-2-23><a class=lnlinks href=#hl-2-23>23</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>zookeeper</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>apachepulsar/pulsar:2.10.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=l>bin/pulsar zookeeper</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;2181:2181&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>bookie</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>apachepulsar/pulsar:2.10.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=l>bin/pulsar bookie</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>zookeeper</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>broker</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>apachepulsar/pulsar:2.10.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=l>bin/pulsar broker</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;8080:8080&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s2>&#34;6650:6650&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>zookeeper</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>bookie</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=주요-구성-파일>주요 구성 파일<a hidden class=anchor aria-hidden=true href=#주요-구성-파일>#</a></h4><ul><li><strong>broker.conf</strong>: Broker 설정</li><li><strong>bookkeeper.conf</strong>: BookKeeper 설정</li><li><strong>client.conf</strong>: 클라이언트 설정</li><li><strong>pulsar_env.sh</strong>: 환경 변수 설정</li></ul><p>중요한 구성 매개변수들:</p><ul><li><code>brokerServicePort</code>: Broker 서비스 포트 (기본값: 6650)</li><li><code>webServicePort</code>: Admin API 포트 (기본값: 8080)</li><li><code>managedLedgerDefaultEnsembleSize</code>: BookKeeper 앙상블 크기</li><li><code>managedLedgerDefaultWriteQuorum</code>: 쓰기 정족수</li><li><code>managedLedgerDefaultAckQuorum</code>: 확인 정족수</li></ul><h3 id=프로듀서와-컨슈머-프로그래밍-기초>프로듀서와 컨슈머 프로그래밍 기초<a hidden class=anchor aria-hidden=true href=#프로듀서와-컨슈머-프로그래밍-기초>#</a></h3><h4 id=java-클라이언트>Java 클라이언트<a hidden class=anchor aria-hidden=true href=#java-클라이언트>#</a></h4><p>Maven 의존성 추가:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2>2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3>3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4>4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.apache.pulsar<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>pulsar-client<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;version&gt;</span>2.10.1<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>간단한 프로듀서 예제:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span><span class=lnt id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a>
</span><span class=lnt id=hl-4-16><a class=lnlinks href=#hl-4-16>16</a>
</span><span class=lnt id=hl-4-17><a class=lnlinks href=#hl-4-17>17</a>
</span><span class=lnt id=hl-4-18><a class=lnlinks href=#hl-4-18>18</a>
</span><span class=lnt id=hl-4-19><a class=lnlinks href=#hl-4-19>19</a>
</span><span class=lnt id=hl-4-20><a class=lnlinks href=#hl-4-20>20</a>
</span><span class=lnt id=hl-4-21><a class=lnlinks href=#hl-4-21>21</a>
</span><span class=lnt id=hl-4-22><a class=lnlinks href=#hl-4-22>22</a>
</span><span class=lnt id=hl-4-23><a class=lnlinks href=#hl-4-23>23</a>
</span><span class=lnt id=hl-4-24><a class=lnlinks href=#hl-4-24>24</a>
</span><span class=lnt id=hl-4-25><a class=lnlinks href=#hl-4-25>25</a>
</span><span class=lnt id=hl-4-26><a class=lnlinks href=#hl-4-26>26</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span><span class=w> </span><span class=nn>org.apache.pulsar.client.api.*</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>SimplePulsarProducer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// Pulsar 클라이언트 생성</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>PulsarClient</span><span class=w> </span><span class=n>client</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>PulsarClient</span><span class=p>.</span><span class=na>builder</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>serviceUrl</span><span class=p>(</span><span class=s>&#34;pulsar://localhost:6650&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 프로듀서 생성</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Producer</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>producer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>client</span><span class=p>.</span><span class=na>newProducer</span><span class=p>(</span><span class=n>Schema</span><span class=p>.</span><span class=na>STRING</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>topic</span><span class=p>(</span><span class=s>&#34;my-topic&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>create</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 메시지 전송</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>10</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>String</span><span class=w> </span><span class=n>message</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;Hello Pulsar &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>i</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>producer</span><span class=p>.</span><span class=na>send</span><span class=p>(</span><span class=n>message</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;Sent message: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>message</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 자원 해제</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>producer</span><span class=p>.</span><span class=na>close</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>client</span><span class=p>.</span><span class=na>close</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>간단한 컨슈머 예제:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span><span class=lnt id=hl-5-18><a class=lnlinks href=#hl-5-18>18</a>
</span><span class=lnt id=hl-5-19><a class=lnlinks href=#hl-5-19>19</a>
</span><span class=lnt id=hl-5-20><a class=lnlinks href=#hl-5-20>20</a>
</span><span class=lnt id=hl-5-21><a class=lnlinks href=#hl-5-21>21</a>
</span><span class=lnt id=hl-5-22><a class=lnlinks href=#hl-5-22>22</a>
</span><span class=lnt id=hl-5-23><a class=lnlinks href=#hl-5-23>23</a>
</span><span class=lnt id=hl-5-24><a class=lnlinks href=#hl-5-24>24</a>
</span><span class=lnt id=hl-5-25><a class=lnlinks href=#hl-5-25>25</a>
</span><span class=lnt id=hl-5-26><a class=lnlinks href=#hl-5-26>26</a>
</span><span class=lnt id=hl-5-27><a class=lnlinks href=#hl-5-27>27</a>
</span><span class=lnt id=hl-5-28><a class=lnlinks href=#hl-5-28>28</a>
</span><span class=lnt id=hl-5-29><a class=lnlinks href=#hl-5-29>29</a>
</span><span class=lnt id=hl-5-30><a class=lnlinks href=#hl-5-30>30</a>
</span><span class=lnt id=hl-5-31><a class=lnlinks href=#hl-5-31>31</a>
</span><span class=lnt id=hl-5-32><a class=lnlinks href=#hl-5-32>32</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span><span class=w> </span><span class=nn>org.apache.pulsar.client.api.*</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>SimplePulsarConsumer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// Pulsar 클라이언트 생성</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>PulsarClient</span><span class=w> </span><span class=n>client</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>PulsarClient</span><span class=p>.</span><span class=na>builder</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>serviceUrl</span><span class=p>(</span><span class=s>&#34;pulsar://localhost:6650&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 컨슈머 생성</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Consumer</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>consumer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>client</span><span class=p>.</span><span class=na>newConsumer</span><span class=p>(</span><span class=n>Schema</span><span class=p>.</span><span class=na>STRING</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>topic</span><span class=p>(</span><span class=s>&#34;my-topic&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>subscriptionName</span><span class=p>(</span><span class=s>&#34;my-subscription&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>subscriptionType</span><span class=p>(</span><span class=n>SubscriptionType</span><span class=p>.</span><span class=na>Exclusive</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>subscribe</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 메시지 수신</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=kc>true</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Message</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>msg</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>consumer</span><span class=p>.</span><span class=na>receive</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>String</span><span class=w> </span><span class=n>content</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>msg</span><span class=p>.</span><span class=na>getValue</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;Received message: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>content</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=c1>// 메시지 확인(ack)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>consumer</span><span class=p>.</span><span class=na>acknowledge</span><span class=p>(</span><span class=n>msg</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>Exception</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=c1>// 메시지 처리 실패 시 부정 확인(nack)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>consumer</span><span class=p>.</span><span class=na>negativeAcknowledge</span><span class=p>(</span><span class=n>msg</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=python-클라이언트>Python 클라이언트<a hidden class=anchor aria-hidden=true href=#python-클라이언트>#</a></h4><p>Python 패키지 설치:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pip install pulsar-client
</span></span></code></pre></td></tr></table></div></div><p>Python 프로듀서 예제:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pulsar</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>client</span> <span class=o>=</span> <span class=n>pulsar</span><span class=o>.</span><span class=n>Client</span><span class=p>(</span><span class=s1>&#39;pulsar://localhost:6650&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>producer</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>create_producer</span><span class=p>(</span><span class=s1>&#39;my-topic&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span> <span class=o>=</span> <span class=sa>f</span><span class=s1>&#39;Hello Pulsar </span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s1>&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>producer</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>message</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Sent message: </span><span class=si>{</span><span class=n>message</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>client</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p>Python 컨슈머 예제:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pulsar</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>client</span> <span class=o>=</span> <span class=n>pulsar</span><span class=o>.</span><span class=n>Client</span><span class=p>(</span><span class=s1>&#39;pulsar://localhost:6650&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>consumer</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>subscribe</span><span class=p>(</span><span class=s1>&#39;my-topic&#39;</span><span class=p>,</span> <span class=s1>&#39;my-subscription&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>msg</span> <span class=o>=</span> <span class=n>consumer</span><span class=o>.</span><span class=n>receive</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Received message: </span><span class=si>{</span><span class=n>msg</span><span class=o>.</span><span class=n>data</span><span class=p>()</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s2>&#34;utf-8&#34;</span><span class=p>)</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>consumer</span><span class=o>.</span><span class=n>acknowledge</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>consumer</span><span class=o>.</span><span class=n>negative_acknowledge</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>client</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=고급-pulsar-기능>고급 Pulsar 기능<a hidden class=anchor aria-hidden=true href=#고급-pulsar-기능>#</a></h3><h4 id=스키마-레지스트리>스키마 레지스트리<a hidden class=anchor aria-hidden=true href=#스키마-레지스트리>#</a></h4><p>Pulsar는 JSON, Avro, Protobuf 등 다양한 스키마 형식을 지원한다. 스키마를 사용하면 메시지의 형식을 강제하고 타입 안전성을 보장할 수 있다.</p><p>Avro 스키마 예제:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a>
</span><span class=lnt id=hl-9-11><a class=lnlinks href=#hl-9-11>11</a>
</span><span class=lnt id=hl-9-12><a class=lnlinks href=#hl-9-12>12</a>
</span><span class=lnt id=hl-9-13><a class=lnlinks href=#hl-9-13>13</a>
</span><span class=lnt id=hl-9-14><a class=lnlinks href=#hl-9-14>14</a>
</span><span class=lnt id=hl-9-15><a class=lnlinks href=#hl-9-15>15</a>
</span><span class=lnt id=hl-9-16><a class=lnlinks href=#hl-9-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Avro 스키마 정의</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>static</span><span class=w> </span><span class=kd>class</span> <span class=nc>User</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>age</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 생성자, getter, setter 등</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 스키마를 사용한 프로듀서</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Producer</span><span class=o>&lt;</span><span class=n>User</span><span class=o>&gt;</span><span class=w> </span><span class=n>producer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>client</span><span class=p>.</span><span class=na>newProducer</span><span class=p>(</span><span class=n>Schema</span><span class=p>.</span><span class=na>AVRO</span><span class=p>(</span><span class=n>User</span><span class=p>.</span><span class=na>class</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>topic</span><span class=p>(</span><span class=s>&#34;users-topic&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>create</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 메시지 전송</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>User</span><span class=w> </span><span class=n>user</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>User</span><span class=p>(</span><span class=s>&#34;Alice&#34;</span><span class=p>,</span><span class=w> </span><span class=n>30</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>producer</span><span class=p>.</span><span class=na>send</span><span class=p>(</span><span class=n>user</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=pulsar-functions>Pulsar Functions<a hidden class=anchor aria-hidden=true href=#pulsar-functions>#</a></h4><p>Pulsar Functions는 서버리스 계산 모델을 제공하여 스트림 처리 로직을 구현할 수 있게 한다.</p><p>간단한 함수 예제 (Java):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>WordCountFunction</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Function</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>Void</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Void</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>input</span><span class=p>,</span><span class=w> </span><span class=n>Context</span><span class=w> </span><span class=n>context</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>words</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>input</span><span class=p>.</span><span class=na>split</span><span class=p>(</span><span class=s>&#34; &#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>word</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>words</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>word</span><span class=p>.</span><span class=na>toLowerCase</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>context</span><span class=p>.</span><span class=na>incrCounter</span><span class=p>(</span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>함수 배포:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1>1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2>2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3>3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4>4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5>5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6>6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7>7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>bin/pulsar-admin functions create <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --jar target/my-function.jar <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --classname org.example.WordCountFunction <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --tenant public <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --namespace default <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --name word-count <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --inputs persistent://public/default/sentences <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --log-topic persistent://public/default/log-topic
</span></span></code></pre></td></tr></table></div></div><h4 id=pulsar-io-커넥터>Pulsar IO 커넥터<a hidden class=anchor aria-hidden=true href=#pulsar-io-커넥터>#</a></h4><p>Pulsar IO는 다양한 외부 시스템과의 통합을 위한 커넥터를 제공한다.</p><p>Kafka 소스 커넥터 예제:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1> 1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2> 2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3> 3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4> 4</a>
</span><span class=lnt id=hl-12-5><a class=lnlinks href=#hl-12-5> 5</a>
</span><span class=lnt id=hl-12-6><a class=lnlinks href=#hl-12-6> 6</a>
</span><span class=lnt id=hl-12-7><a class=lnlinks href=#hl-12-7> 7</a>
</span><span class=lnt id=hl-12-8><a class=lnlinks href=#hl-12-8> 8</a>
</span><span class=lnt id=hl-12-9><a class=lnlinks href=#hl-12-9> 9</a>
</span><span class=lnt id=hl-12-10><a class=lnlinks href=#hl-12-10>10</a>
</span><span class=lnt id=hl-12-11><a class=lnlinks href=#hl-12-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>bin/pulsar-admin <span class=nb>source</span> create <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --tenant public <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --namespace default <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --name kafka-source <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --source-type kafka <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --destination-topic-name pulsar-kafka-topic <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --source-config <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;bootstrapServers&#34;: &#34;kafka-broker:9092&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;topic&#34;: &#34;kafka-topic&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;groupId&#34;: &#34;pulsar-kafka-group&#34;
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=지역-간-복제geo-replication>지역 간 복제(Geo-replication)<a hidden class=anchor aria-hidden=true href=#지역-간-복제geo-replication>#</a></h4><p>여러 데이터센터나 지역 간에 메시지를 복제할 수 있다.</p><p>복제 클러스터 설정:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1> 1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2> 2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3> 3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4> 4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5> 5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6> 6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7> 7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8> 8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9> 9</a>
</span><span class=lnt id=hl-13-10><a class=lnlinks href=#hl-13-10>10</a>
</span><span class=lnt id=hl-13-11><a class=lnlinks href=#hl-13-11>11</a>
</span><span class=lnt id=hl-13-12><a class=lnlinks href=#hl-13-12>12</a>
</span><span class=lnt id=hl-13-13><a class=lnlinks href=#hl-13-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 클러스터 설정</span>
</span></span><span class=line><span class=cl>bin/pulsar-admin clusters create cluster-a <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --url http://broker-a:8080 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --broker-url pulsar://broker-a:6650
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>bin/pulsar-admin clusters create cluster-b <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --url http://broker-b:8080 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --broker-url pulsar://broker-b:6650
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 네임스페이스에 복제 설정</span>
</span></span><span class=line><span class=cl>bin/pulsar-admin namespaces set-clusters <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  public/default <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --clusters cluster-a,cluster-b
</span></span></code></pre></td></tr></table></div></div><h4 id=트랜잭션-지원>트랜잭션 지원<a hidden class=anchor aria-hidden=true href=#트랜잭션-지원>#</a></h4><p>Pulsar 2.7.0부터 트랜잭션 기능이 도입되어 정확히 한 번(exactly-once) 메시지 처리를 보장한다.</p><p>트랜잭션 예제:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1> 1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2> 2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3> 3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4> 4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5> 5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6> 6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7> 7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8> 8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9> 9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10>10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11>11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12>12</a>
</span><span class=lnt id=hl-14-13><a class=lnlinks href=#hl-14-13>13</a>
</span><span class=lnt id=hl-14-14><a class=lnlinks href=#hl-14-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 트랜잭션 시작</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Transaction</span><span class=w> </span><span class=n>txn</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>client</span><span class=p>.</span><span class=na>newTransaction</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>withTransactionTimeout</span><span class=p>(</span><span class=n>5</span><span class=p>,</span><span class=w> </span><span class=n>TimeUnit</span><span class=p>.</span><span class=na>MINUTES</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>build</span><span class=p>().</span><span class=na>get</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 트랜잭션 내에서 메시지 생성</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>producer</span><span class=p>.</span><span class=na>newMessage</span><span class=p>(</span><span class=n>txn</span><span class=p>).</span><span class=na>value</span><span class=p>(</span><span class=s>&#34;Hello Pulsar Transaction&#34;</span><span class=p>).</span><span class=na>send</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 트랜잭션 내에서 메시지 소비</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Message</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>msg</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>consumer</span><span class=p>.</span><span class=na>receive</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>consumer</span><span class=p>.</span><span class=na>acknowledgeAsync</span><span class=p>(</span><span class=n>msg</span><span class=p>,</span><span class=w> </span><span class=n>txn</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 트랜잭션 커밋</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>txn</span><span class=p>.</span><span class=na>commit</span><span class=p>().</span><span class=na>get</span><span class=p>();</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=최적화-및-운영>최적화 및 운영<a hidden class=anchor aria-hidden=true href=#최적화-및-운영>#</a></h3><ol><li><p>성능 튜닝<br><strong>브로커 튜닝</strong>:</p><ul><li><code>defaultRetentionTimeInMinutes</code>: 메시지 보존 기간</li><li><code>defaultRetentionSizeInMB</code>: 메시지 보존 크기</li><li><code>managedLedgerCacheSizeMB</code>: 관리 레저 캐시 크기</li><li><code>numIOThreads</code>: I/O 스레드 수</li><li><code>numWorkerThreads</code>: 작업자 스레드 수<br><strong>BookKeeper 튜닝</strong>:</li><li><code>journalMaxSizeMB</code>: 저널 최대 크기</li><li><code>ledgerStorageClass</code>: 레저 스토리지 클래스 (DbLedgerStorage 권장)</li><li><code>diskUsageThreshold</code>: 디스크 사용량 임계값<br><strong>클라이언트 튜닝</strong>:</li><li>배치 설정</li><li>압축 설정</li><li>비동기 전송</li></ul></li><li><p>모니터링 설정<br>Pulsar는 Prometheus와 Grafana를 통한 모니터링을 지원한다.</p><ul><li><strong>Prometheus 설정</strong>: Pulsar broker.conf에 다음을 추가:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1>1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>prometheusStatsLatencyRolloverSeconds=60
</span></span><span class=line><span class=cl>exposeTopicLevelMetricsInPrometheus=true
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>Grafana 대시보드</strong>: Pulsar는 다양한 Grafana 대시보드 템플릿을 제공한다.</li></ul></li><li><p>장애 처리 및 복구<br><strong>브로커 장애</strong>:</p><ul><li>브로커는 무상태(stateless)이므로 쉽게 대체 가능</li><li>자동 장애 조치(failover) 메커니즘 구현<br><strong>BookKeeper 장애</strong>:</li><li>복제 인자(replication factor)에 따라 내결함성 제공</li><li>자동 복구 메커니즘</li><li>Auditor 기능으로 누락된 데이터 감지 및 복구<br><strong>ZooKeeper 장애</strong>:</li><li>ZooKeeper 앙상블은 과반수(majority)가 정상 작동해야 함</li><li>최소 3개의 ZooKeeper 노드 구성 권장</li></ul></li><li><p>백업 및 복구 전략<br><strong>데이터 백업</strong>:</p><ul><li>BookKeeper 데이터 정기 백업</li><li>메타데이터(ZooKeeper) 정기 백업<br><strong>재해 복구</strong>:</li><li>지역 간 복제를 통한 재해 복구 구현</li><li>여러 데이터센터에 걸친 클러스터 배포</li></ul></li></ol><h3 id=실무-적용-사례-및-디자인-패턴>실무 적용 사례 및 디자인 패턴<a hidden class=anchor aria-hidden=true href=#실무-적용-사례-및-디자인-패턴>#</a></h3><ol><li>이벤트 소싱(Event Sourcing)<br>모든 상태 변경을 이벤트로 저장하고, 이 이벤트들을 재생하여 현재 상태를 재구성하는 패턴이다.<br>구현 예시:<ol><li>각 도메인 이벤트를 토픽에 저장</li><li>Pulsar Functions를 사용하여 이벤트 처리 및 상태 업데이트</li><li>필요시 이벤트를 재생하여 상태 재구성</li></ol></li><li>CQRS(Command Query Responsibility Segregation)<br>명령(쓰기)과 쿼리(읽기)를 분리하는 패턴이다.<br>구현 예시:<ol><li>명령은 Pulsar 토픽으로 전송</li><li>Pulsar Functions가 명령을 처리하고 상태 변경</li><li>변경된 상태는 별도의 읽기 전용 데이터베이스에 저장</li><li>쿼리는 읽기 전용 데이터베이스에서 처리</li></ol></li><li>실시간 분석 파이프라인<br>Pulsar를 사용한 실시간 데이터 처리 파이프라인 구축:<ol><li>이벤트 데이터를 Pulsar 토픽으로 수집</li><li>Pulsar Functions로 데이터 전처리 및 변환</li><li>처리된 데이터를 분석 시스템(예: Flink, Spark)으로 전달</li><li>분석 결과를 다시 Pulsar 토픽에 게시</li><li>결과를 대시보드나 알림 시스템에 전달</li></ol></li><li>마이크로서비스 통신<br>마이크로서비스 간 통신에 Pulsar 활용:<ol><li>동기식 통신: Request-Reply 패턴 구현</li><li>비동기식 통신: 이벤트 기반 메시징</li><li>트랜잭션을 통한 일관성 보장</li><li>스키마 레지스트리를 통한 계약 관리</li></ol></li></ol><h3 id=심화-주제>심화 주제<a hidden class=anchor aria-hidden=true href=#심화-주제>#</a></h3><h4 id=pulsar-sql>Pulsar SQL<a hidden class=anchor aria-hidden=true href=#pulsar-sql>#</a></h4><p>Presto를 기반으로 한 Pulsar SQL을 사용하면 SQL 쿼리를 통해 Pulsar 토픽의 데이터를 분석할 수 있다.</p><p>설정 및 활성화:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>bin/pulsar sql-worker start
</span></span></code></pre></td></tr></table></div></div><p>쿼리 예제:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1>1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2>2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=s2>&#34;pulsar&#34;</span><span class=p>.</span><span class=s2>&#34;public/default&#34;</span><span class=p>.</span><span class=s2>&#34;my-topic&#34;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>publish_time</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=k>TIMESTAMP</span><span class=w> </span><span class=s1>&#39;2022-01-01 00:00:00&#39;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=pulsar-관리-api>Pulsar 관리 API<a hidden class=anchor aria-hidden=true href=#pulsar-관리-api>#</a></h4><p>REST API를 통해 Pulsar 클러스터를 관리할 수 있다.</p><p>토픽 생성 예제:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X PUT http://localhost:8080/admin/v2/persistent/public/default/my-topic
</span></span></code></pre></td></tr></table></div></div><p>토픽 통계 조회:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl http://localhost:8080/admin/v2/persistent/public/default/my-topic/stats
</span></span></code></pre></td></tr></table></div></div><h4 id=보안-설정>보안 설정<a hidden class=anchor aria-hidden=true href=#보안-설정>#</a></h4><p><strong>인증</strong>:</p><ul><li>TLS 인증</li><li>JWT 인증</li><li>Kerberos 인증</li></ul><p>TLS 인증 설정:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1>1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2>2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3>3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4>4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># broker.conf
</span></span><span class=line><span class=cl>tlsEnabled=true
</span></span><span class=line><span class=cl>tlsCertificateFilePath=/path/to/broker-cert.pem
</span></span><span class=line><span class=cl>tlsKeyFilePath=/path/to/broker-key.pem
</span></span><span class=line><span class=cl>tlsTrustCertsFilePath=/path/to/ca-cert.pem
</span></span></code></pre></td></tr></table></div></div><p><strong>인가</strong>:</p><ul><li>역할 기반 접근 제어(RBAC)</li><li>슈퍼유저 및 일반 역할 설정</li></ul><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Apache Pulsar vs. Kafka</h2></header><div class=entry-content><p>Apache Pulsar vs. Kafka 분산 메시징 시스템은 현대 데이터 중심 아키텍처의 중추 역할을 한다.
기본 개념 및 역사 Apache Kafka Apache Kafka는 2011년 LinkedIn에서 개발된 후 Apache 소프트웨어 재단으로 이관된 분산 스트리밍 플랫폼이다. 처음에는 LinkedIn 내부의 데이터 파이프라인 문제를 해결하기 위해 만들어졌지만, 이후 업계 표준 메시징 시스템으로 자리 잡았다. Kafka는 높은 처리량, 내구성, 확장성을 제공하는 로그 기반의 발행-구독(pub-sub) 메시징 시스템이다.
Apache Pulsar Apache Pulsar는 2016년 Yahoo에서 개발되어 2018년에 Apache 소프트웨어 재단의 최상위 프로젝트가 되었다. Pulsar는 다중 테넌트, 고성능 서비스로 설계되었으며, Kafka와 같은 발행-구독 메시징 시스템의 특성과 전통적인 메시지 큐의 장점을 결합했다. Pulsar는 처음부터 클라우드 네이티브 환경을 염두에 두고 개발되었다.
...</p></div><footer class=entry-footer><span title='2025-04-02 06:04:00 +0000 UTC'>April 2, 2025</span>&nbsp;·&nbsp;10 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Apache Pulsar vs. Kafka" href=https://buenhyden.github.io/posts/system-design/message-oriented-systems/message-brokers/apache-pulsar/apache-pulsar-vs-kafka/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Apache Pulsar vs. RabbitMQ</h2></header><div class=entry-content><p>Apache Pulsar vs. RabbitMQ Apache Pulsar와 RabbitMQ는 메시징 시스템으로서 각각 고유한 강점과 약점을 가지고 있으며, 사용 사례에 따라 적합한 선택이 달라질 수 있다.
기본 개념 및 역사 Apache Pulsar Apache Pulsar는 2016년 Yahoo에서 개발되어 2018년 Apache 소프트웨어 재단의 최상위 프로젝트가 되었다. Pulsar는 처음부터 클라우드 네이티브 환경과 대규모 분산 시스템을 위해 설계되었으며, 높은 처리량과 낮은 지연 시간을 모두 달성하는 메시징 및 스트리밍 플랫폼이다.
RabbitMQ RabbitMQ는 2007년 Rabbit Technologies Ltd.에서 개발되었으며, 현재는 VMware의 일부인 Pivotal Software에서 관리되고 있다. Erlang으로 작성된 RabbitMQ는 AMQP(Advanced Message Queuing Protocol)를 구현한 가장 널리 사용되는 오픈 소스 메시지 브로커 중 하나이다. 신뢰성, 유연성, 상호 운용성에 중점을 두고 설계되었다.
...</p></div><footer class=entry-footer><span title='2025-04-02 06:04:00 +0000 UTC'>April 2, 2025</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Apache Pulsar vs. RabbitMQ" href=https://buenhyden.github.io/posts/system-design/message-oriented-systems/message-brokers/apache-pulsar/apache-pulsar-vs-rabbitmq/></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>