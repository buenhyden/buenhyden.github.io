<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Load Shifting | hyunyoun's Blog</title>
<meta name=keywords content="Backend,Scalability,Migration-Strategies,Load-Shifting"><meta name=description content="로드 시프팅은 시스템 부하를 효율적으로 관리하는 전략으로, 피크 시간대의 작업 부하를 비피크 시간대로 이동시켜 자원 활용을 최적화하는 방법이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/system-design/migration-strategies/load-shifting/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.8762af4fa9ee176c57f72565b721f234162fc7a9c882a271e0a1f68c4e89fb34.css integrity="sha256-h2KvT6nuF2xX9yVltyHyNBYvx6nIgqJx4KH2jE6J+zQ=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/system-design/migration-strategies/load-shifting/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/system-design/migration-strategies/load-shifting/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/system-design/migration-strategies/load-shifting/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Load Shifting"><meta property="og:description" content="로드 시프팅은 시스템 부하를 효율적으로 관리하는 전략으로, 피크 시간대의 작업 부하를 비피크 시간대로 이동시켜 자원 활용을 최적화하는 방법이다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Load Shifting"><meta name=twitter:description content="로드 시프팅은 시스템 부하를 효율적으로 관리하는 전략으로, 피크 시간대의 작업 부하를 비피크 시간대로 이동시켜 자원 활용을 최적화하는 방법이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Load Shifting","item":"https://buenhyden.github.io/posts/system-design/migration-strategies/load-shifting/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a></div><h1>Load Shifting</h1><div class=post-description>로드 시프팅은 시스템 부하를 효율적으로 관리하는 전략으로, 피크 시간대의 작업 부하를 비피크 시간대로 이동시켜 자원 활용을 최적화하는 방법이다.</div></header><div class=post-content><h2 id=load-shifting>Load Shifting<a hidden class=anchor aria-hidden=true href=#load-shifting>#</a></h2><p><strong>Load Shifting</strong>은 컴퓨팅 또는 시스템 워크로드를 효율적으로 관리하고 분배하기 위한 전략으로, 피크 시간대의 부하를 비피크 시간대로 이동시키는 것을 목표로 한다. 이를 통해 리소스 사용을 최적화하고 비용을 절감하며, 시스템의 안정성과 성능을 개선할 수 있다. 이 전략은 클라우드 컴퓨팅, 데이터 센터 운영, 그리고 대규모 분산 시스템에서 널리 사용된다.</p><h3 id=로드-시프팅load-shifting의-개념>로드 시프팅(Load Shifting)의 개념<a hidden class=anchor aria-hidden=true href=#로드-시프팅load-shifting의-개념>#</a></h3><p>로드 시프팅은 시스템 부하를 효율적으로 관리하는 전략으로, 피크 시간대의 작업 부하를 비피크 시간대로 이동시켜 자원 활용을 최적화하는 방법이다. 이는 마치 전기 그리드에서 전력 수요가 낮은 시간대로 소비를 옮기는 것과 유사한 개념으로, IT 인프라에 적용된다.</p><h4 id=핵심-원리>핵심 원리<a hidden class=anchor aria-hidden=true href=#핵심-원리>#</a></h4><p>로드 시프팅의 기본 원리는 다음과 같다:</p><ol><li><strong>부하 분산</strong>: 시스템 자원에 대한 수요를 시간적으로 분산</li><li><strong>자원 최적화</strong>: 유휴 자원을 활용하여 전체 시스템 효율성 향상</li><li><strong>비용 절감</strong>: 피크 시간대 자원 확장 필요성 감소</li><li><strong>안정성 향상</strong>: 시스템 과부하 위험 감소</li></ol><h3 id=load-shifting의-유형>Load Shifting의 유형<a hidden class=anchor aria-hidden=true href=#load-shifting의-유형>#</a></h3><ol><li>시간 기반 Load Shifting<ul><li><strong>개념</strong>: 작업을 피크 시간대에서 비피크 시간대로 이동하여 리소스 사용을 균형 있게 분배.</li><li><strong>예시</strong>:<ul><li>데이터 분석 작업을 야간에 실행하여 낮 동안의 사용자 요청 처리에 집중.</li></ul></li></ul></li><li>지리적 Load Shifting<ul><li><strong>개념</strong>: 워크로드를 서로 다른 지역 또는 데이터 센터로 이동하여 지역별 부하를 분산.</li><li><strong>예시</strong>:<ul><li>북미 데이터 센터가 피크 상태일 때 유럽 데이터 센터로 작업을 전환.</li></ul></li></ul></li><li>리소스 기반 Load Shifting<ul><li><strong>개념</strong>: CPU, 메모리, 네트워크 대역폭 등 특정 리소스의 사용량에 따라 워크로드를 조정.</li><li><strong>예시</strong>:<ul><li>네트워크 트래픽이 높은 경우 로컬 캐싱을 활용해 서버 부하 감소.</li></ul></li></ul></li></ol><h3 id=로드-시프팅의-장점과-단점>로드 시프팅의 장점과 단점<a hidden class=anchor aria-hidden=true href=#로드-시프팅의-장점과-단점>#</a></h3><h4 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h4><ol><li><strong>비용 효율성</strong>: 피크 시간대 확장 비용 감소</li><li><strong>자원 활용 최적화</strong>: 유휴 자원의 효율적 활용</li><li><strong>시스템 안정성 향상</strong>: 트래픽 폭주로 인한 장애 위험 감소</li><li><strong>에너지 효율성</strong>: 전체 에너지 소비 최적화 가능</li><li><strong>사용자 경험 개선</strong>: 피크 시간대 응답 시간 단축</li></ol><h4 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h4><ol><li><strong>복잡성 증가</strong>: 시스템 설계 및 관리 복잡도 상승</li><li><strong>지연 시간 증가</strong>: 일부 작업의 처리 지연 가능성</li><li><strong>추가 인프라 필요</strong>: 큐, 스케줄러 등 추가 구성 요소 필요</li><li><strong>모니터링 비용</strong>: 효과적인 모니터링 시스템 구축 필요</li></ol><h3 id=백엔드-시스템에서의-로드-시프팅-구현-방법>백엔드 시스템에서의 로드 시프팅 구현 방법<a hidden class=anchor aria-hidden=true href=#백엔드-시스템에서의-로드-시프팅-구현-방법>#</a></h3><p>백엔드 시스템에서 로드 시프팅을 구현하는 다양한 방법이 있다:</p><h4 id=작업-스케줄링task-scheduling>작업 스케줄링(Task Scheduling)<a hidden class=anchor aria-hidden=true href=#작업-스케줄링task-scheduling>#</a></h4><p>비동기 작업 처리 시스템을 구축하여 즉시 처리가 필요하지 않은 작업을 대기열에 넣고 시스템 부하가 낮은 시간에 처리한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Python으로 구현한 작업 스케줄링 예시 (Celery 사용)</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>celery</span> <span class=kn>import</span> <span class=n>Celery</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>celery.schedules</span> <span class=kn>import</span> <span class=n>crontab</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>Celery</span><span class=p>(</span><span class=s1>&#39;tasks&#39;</span><span class=p>,</span> <span class=n>broker</span><span class=o>=</span><span class=s1>&#39;redis://localhost:6379/0&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 시스템 부하가 낮은 시간대(새벽 3시)에 작업 실행 설정</span>
</span></span><span class=line><span class=cl><span class=nd>@app.on_after_configure.connect</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>setup_periodic_tasks</span><span class=p>(</span><span class=n>sender</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># 데이터 집계 작업을 새벽 3시에 실행</span>
</span></span><span class=line><span class=cl>    <span class=n>sender</span><span class=o>.</span><span class=n>add_periodic_task</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>crontab</span><span class=p>(</span><span class=n>hour</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span> <span class=n>minute</span><span class=o>=</span><span class=mi>0</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>aggregate_data</span><span class=o>.</span><span class=n>s</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.task</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>aggregate_data</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1># 리소스 집약적 데이터 집계 작업 수행</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=지리적-로드-밸런싱geographic-load-balancing>지리적 로드 밸런싱(Geographic Load Balancing)<a hidden class=anchor aria-hidden=true href=#지리적-로드-밸런싱geographic-load-balancing>#</a></h4><p>다양한 지역의 데이터 센터나 클라우드 리전을 활용하여 다른 시간대의 트래픽을 분산한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14>14</a>
</span><span class=lnt id=hl-1-15><a class=lnlinks href=#hl-1-15>15</a>
</span><span class=lnt id=hl-1-16><a class=lnlinks href=#hl-1-16>16</a>
</span><span class=lnt id=hl-1-17><a class=lnlinks href=#hl-1-17>17</a>
</span><span class=lnt id=hl-1-18><a class=lnlinks href=#hl-1-18>18</a>
</span><span class=lnt id=hl-1-19><a class=lnlinks href=#hl-1-19>19</a>
</span><span class=lnt id=hl-1-20><a class=lnlinks href=#hl-1-20>20</a>
</span><span class=lnt id=hl-1-21><a class=lnlinks href=#hl-1-21>21</a>
</span><span class=lnt id=hl-1-22><a class=lnlinks href=#hl-1-22>22</a>
</span><span class=lnt id=hl-1-23><a class=lnlinks href=#hl-1-23>23</a>
</span><span class=lnt id=hl-1-24><a class=lnlinks href=#hl-1-24>24</a>
</span><span class=lnt id=hl-1-25><a class=lnlinks href=#hl-1-25>25</a>
</span><span class=lnt id=hl-1-26><a class=lnlinks href=#hl-1-26>26</a>
</span><span class=lnt id=hl-1-27><a class=lnlinks href=#hl-1-27>27</a>
</span><span class=lnt id=hl-1-28><a class=lnlinks href=#hl-1-28>28</a>
</span><span class=lnt id=hl-1-29><a class=lnlinks href=#hl-1-29>29</a>
</span><span class=lnt id=hl-1-30><a class=lnlinks href=#hl-1-30>30</a>
</span><span class=lnt id=hl-1-31><a class=lnlinks href=#hl-1-31>31</a>
</span><span class=lnt id=hl-1-32><a class=lnlinks href=#hl-1-32>32</a>
</span><span class=lnt id=hl-1-33><a class=lnlinks href=#hl-1-33>33</a>
</span><span class=lnt id=hl-1-34><a class=lnlinks href=#hl-1-34>34</a>
</span><span class=lnt id=hl-1-35><a class=lnlinks href=#hl-1-35>35</a>
</span><span class=lnt id=hl-1-36><a class=lnlinks href=#hl-1-36>36</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// AWS Route 53을 사용한 지리적 로드 밸런싱 설정 예시 (AWS CDK)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>usEastAlb</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ApplicationLoadBalancer</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=s1>&#39;USEastALB&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>vpc</span><span class=o>:</span> <span class=nx>usEastVpc</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>internetFacing</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>euWestAlb</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ApplicationLoadBalancer</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=s1>&#39;EUWestALB&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>vpc</span><span class=o>:</span> <span class=nx>euWestVpc</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>internetFacing</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 지리적 기반 라우팅 정책 설정
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>hostedZone</span> <span class=o>=</span> <span class=nx>HostedZone</span><span class=p>.</span><span class=nx>fromLookup</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=s1>&#39;HostedZone&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>domainName</span><span class=o>:</span> <span class=s1>&#39;example.com&#39;</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>new</span> <span class=nx>Route53</span><span class=p>.</span><span class=nx>ARecord</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=s1>&#39;GeoDNS&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>zone</span><span class=o>:</span> <span class=nx>hostedZone</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>target</span><span class=o>:</span> <span class=nx>Route53</span><span class=p>.</span><span class=nx>RecordTarget</span><span class=p>.</span><span class=nx>fromAlias</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=nx>targets</span><span class=p>.</span><span class=nx>LoadBalancerTarget</span><span class=p>(</span><span class=nx>usEastAlb</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 지리적 위치에 따라 라우팅 규칙 설정
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>geoLocation</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>continentCode</span><span class=o>:</span> <span class=s1>&#39;NA&#39;</span> <span class=c1>// 북미 트래픽
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>new</span> <span class=nx>Route53</span><span class=p>.</span><span class=nx>ARecord</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=s1>&#39;GeoDNSEurope&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>zone</span><span class=o>:</span> <span class=nx>hostedZone</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>target</span><span class=o>:</span> <span class=nx>Route53</span><span class=p>.</span><span class=nx>RecordTarget</span><span class=p>.</span><span class=nx>fromAlias</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=nx>targets</span><span class=p>.</span><span class=nx>LoadBalancerTarget</span><span class=p>(</span><span class=nx>euWestAlb</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nx>geoLocation</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>continentCode</span><span class=o>:</span> <span class=s1>&#39;EU&#39;</span> <span class=c1>// 유럽 트래픽
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=자동-스케일링auto-scaling과-로드-시프팅>자동 스케일링(Auto-scaling)과 로드 시프팅<a hidden class=anchor aria-hidden=true href=#자동-스케일링auto-scaling과-로드-시프팅>#</a></h4><p>클라우드 환경에서 자동 스케일링과 함께 로드 시프팅을 구현하여 자원을 동적으로 관리한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span><span class=lnt id=hl-2-20><a class=lnlinks href=#hl-2-20>20</a>
</span><span class=lnt id=hl-2-21><a class=lnlinks href=#hl-2-21>21</a>
</span><span class=lnt id=hl-2-22><a class=lnlinks href=#hl-2-22>22</a>
</span><span class=lnt id=hl-2-23><a class=lnlinks href=#hl-2-23>23</a>
</span><span class=lnt id=hl-2-24><a class=lnlinks href=#hl-2-24>24</a>
</span><span class=lnt id=hl-2-25><a class=lnlinks href=#hl-2-25>25</a>
</span><span class=lnt id=hl-2-26><a class=lnlinks href=#hl-2-26>26</a>
</span><span class=lnt id=hl-2-27><a class=lnlinks href=#hl-2-27>27</a>
</span><span class=lnt id=hl-2-28><a class=lnlinks href=#hl-2-28>28</a>
</span><span class=lnt id=hl-2-29><a class=lnlinks href=#hl-2-29>29</a>
</span><span class=lnt id=hl-2-30><a class=lnlinks href=#hl-2-30>30</a>
</span><span class=lnt id=hl-2-31><a class=lnlinks href=#hl-2-31>31</a>
</span><span class=lnt id=hl-2-32><a class=lnlinks href=#hl-2-32>32</a>
</span><span class=lnt id=hl-2-33><a class=lnlinks href=#hl-2-33>33</a>
</span><span class=lnt id=hl-2-34><a class=lnlinks href=#hl-2-34>34</a>
</span><span class=lnt id=hl-2-35><a class=lnlinks href=#hl-2-35>35</a>
</span><span class=lnt id=hl-2-36><a class=lnlinks href=#hl-2-36>36</a>
</span><span class=lnt id=hl-2-37><a class=lnlinks href=#hl-2-37>37</a>
</span><span class=lnt id=hl-2-38><a class=lnlinks href=#hl-2-38>38</a>
</span><span class=lnt id=hl-2-39><a class=lnlinks href=#hl-2-39>39</a>
</span><span class=lnt id=hl-2-40><a class=lnlinks href=#hl-2-40>40</a>
</span><span class=lnt id=hl-2-41><a class=lnlinks href=#hl-2-41>41</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># AWS CDK를 사용한 시간 기반 자동 스케일링 설정</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>aws_cdk</span> <span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>core</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>aws_autoscaling</span> <span class=k>as</span> <span class=n>autoscaling</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>aws_ec2</span> <span class=k>as</span> <span class=n>ec2</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TimeBasedScalingStack</span><span class=p>(</span><span class=n>core</span><span class=o>.</span><span class=n>Stack</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>scope</span><span class=p>:</span> <span class=n>core</span><span class=o>.</span><span class=n>Construct</span><span class=p>,</span> <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>scope</span><span class=p>,</span> <span class=nb>id</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>vpc</span> <span class=o>=</span> <span class=n>ec2</span><span class=o>.</span><span class=n>Vpc</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&#34;VPC&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>asg</span> <span class=o>=</span> <span class=n>autoscaling</span><span class=o>.</span><span class=n>AutoScalingGroup</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&#34;ASG&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>vpc</span><span class=o>=</span><span class=n>vpc</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>instance_type</span><span class=o>=</span><span class=n>ec2</span><span class=o>.</span><span class=n>InstanceType</span><span class=o>.</span><span class=n>of</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>ec2</span><span class=o>.</span><span class=n>InstanceClass</span><span class=o>.</span><span class=n>BURSTABLE3</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=n>ec2</span><span class=o>.</span><span class=n>InstanceSize</span><span class=o>.</span><span class=n>MICRO</span>
</span></span><span class=line><span class=cl>            <span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>machine_image</span><span class=o>=</span><span class=n>ec2</span><span class=o>.</span><span class=n>AmazonLinuxImage</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=n>min_capacity</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>max_capacity</span><span class=o>=</span><span class=mi>10</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 피크 시간대 용량 증가 (업무 시간 동안)</span>
</span></span><span class=line><span class=cl>        <span class=n>asg</span><span class=o>.</span><span class=n>scale_on_schedule</span><span class=p>(</span><span class=s2>&#34;ScaleUpDuringBusinessHours&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>schedule</span><span class=o>=</span><span class=n>autoscaling</span><span class=o>.</span><span class=n>Schedule</span><span class=o>.</span><span class=n>cron</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>hour</span><span class=o>=</span><span class=s2>&#34;8&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=n>minute</span><span class=o>=</span><span class=s2>&#34;0&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>desired_capacity</span><span class=o>=</span><span class=mi>8</span>  <span class=c1># 업무 시간에는 8대로 확장</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 비피크 시간대 용량 감소 (야간)</span>
</span></span><span class=line><span class=cl>        <span class=n>asg</span><span class=o>.</span><span class=n>scale_on_schedule</span><span class=p>(</span><span class=s2>&#34;ScaleDownAtNight&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>schedule</span><span class=o>=</span><span class=n>autoscaling</span><span class=o>.</span><span class=n>Schedule</span><span class=o>.</span><span class=n>cron</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>hour</span><span class=o>=</span><span class=s2>&#34;20&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=n>minute</span><span class=o>=</span><span class=s2>&#34;0&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>desired_capacity</span><span class=o>=</span><span class=mi>2</span>  <span class=c1># 야간에는 2대로 축소</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=메시지-큐message-queue-시스템>메시지 큐(Message Queue) 시스템<a hidden class=anchor aria-hidden=true href=#메시지-큐message-queue-시스템>#</a></h4><p>메시지 큐를 사용하여 작업을 비동기적으로 처리하고 부하를 분산한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span><span class=lnt id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a>
</span><span class=lnt id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a>
</span><span class=lnt id=hl-3-17><a class=lnlinks href=#hl-3-17>17</a>
</span><span class=lnt id=hl-3-18><a class=lnlinks href=#hl-3-18>18</a>
</span><span class=lnt id=hl-3-19><a class=lnlinks href=#hl-3-19>19</a>
</span><span class=lnt id=hl-3-20><a class=lnlinks href=#hl-3-20>20</a>
</span><span class=lnt id=hl-3-21><a class=lnlinks href=#hl-3-21>21</a>
</span><span class=lnt id=hl-3-22><a class=lnlinks href=#hl-3-22>22</a>
</span><span class=lnt id=hl-3-23><a class=lnlinks href=#hl-3-23>23</a>
</span><span class=lnt id=hl-3-24><a class=lnlinks href=#hl-3-24>24</a>
</span><span class=lnt id=hl-3-25><a class=lnlinks href=#hl-3-25>25</a>
</span><span class=lnt id=hl-3-26><a class=lnlinks href=#hl-3-26>26</a>
</span><span class=lnt id=hl-3-27><a class=lnlinks href=#hl-3-27>27</a>
</span><span class=lnt id=hl-3-28><a class=lnlinks href=#hl-3-28>28</a>
</span><span class=lnt id=hl-3-29><a class=lnlinks href=#hl-3-29>29</a>
</span><span class=lnt id=hl-3-30><a class=lnlinks href=#hl-3-30>30</a>
</span><span class=lnt id=hl-3-31><a class=lnlinks href=#hl-3-31>31</a>
</span><span class=lnt id=hl-3-32><a class=lnlinks href=#hl-3-32>32</a>
</span><span class=lnt id=hl-3-33><a class=lnlinks href=#hl-3-33>33</a>
</span><span class=lnt id=hl-3-34><a class=lnlinks href=#hl-3-34>34</a>
</span><span class=lnt id=hl-3-35><a class=lnlinks href=#hl-3-35>35</a>
</span><span class=lnt id=hl-3-36><a class=lnlinks href=#hl-3-36>36</a>
</span><span class=lnt id=hl-3-37><a class=lnlinks href=#hl-3-37>37</a>
</span><span class=lnt id=hl-3-38><a class=lnlinks href=#hl-3-38>38</a>
</span><span class=lnt id=hl-3-39><a class=lnlinks href=#hl-3-39>39</a>
</span><span class=lnt id=hl-3-40><a class=lnlinks href=#hl-3-40>40</a>
</span><span class=lnt id=hl-3-41><a class=lnlinks href=#hl-3-41>41</a>
</span><span class=lnt id=hl-3-42><a class=lnlinks href=#hl-3-42>42</a>
</span><span class=lnt id=hl-3-43><a class=lnlinks href=#hl-3-43>43</a>
</span><span class=lnt id=hl-3-44><a class=lnlinks href=#hl-3-44>44</a>
</span><span class=lnt id=hl-3-45><a class=lnlinks href=#hl-3-45>45</a>
</span><span class=lnt id=hl-3-46><a class=lnlinks href=#hl-3-46>46</a>
</span><span class=lnt id=hl-3-47><a class=lnlinks href=#hl-3-47>47</a>
</span><span class=lnt id=hl-3-48><a class=lnlinks href=#hl-3-48>48</a>
</span><span class=lnt id=hl-3-49><a class=lnlinks href=#hl-3-49>49</a>
</span><span class=lnt id=hl-3-50><a class=lnlinks href=#hl-3-50>50</a>
</span><span class=lnt id=hl-3-51><a class=lnlinks href=#hl-3-51>51</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># RabbitMQ를 사용한 메시지 큐 구현 예시</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pika</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 메시지 생산자: 피크 시간에 작업을 큐에 저장</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>publish_task</span><span class=p>(</span><span class=n>task_data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>connection</span> <span class=o>=</span> <span class=n>pika</span><span class=o>.</span><span class=n>BlockingConnection</span><span class=p>(</span><span class=n>pika</span><span class=o>.</span><span class=n>ConnectionParameters</span><span class=p>(</span><span class=s1>&#39;localhost&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>channel</span> <span class=o>=</span> <span class=n>connection</span><span class=o>.</span><span class=n>channel</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 작업 우선순위에 따른 큐 선언</span>
</span></span><span class=line><span class=cl>    <span class=n>channel</span><span class=o>.</span><span class=n>queue_declare</span><span class=p>(</span><span class=n>queue</span><span class=o>=</span><span class=s1>&#39;task_queue&#39;</span><span class=p>,</span> <span class=n>durable</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 메시지 영속성 설정</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>task_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>channel</span><span class=o>.</span><span class=n>basic_publish</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>exchange</span><span class=o>=</span><span class=s1>&#39;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>routing_key</span><span class=o>=</span><span class=s1>&#39;task_queue&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>body</span><span class=o>=</span><span class=n>message</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>properties</span><span class=o>=</span><span class=n>pika</span><span class=o>.</span><span class=n>BasicProperties</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>delivery_mode</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span>  <span class=c1># 메시지 지속성 확보</span>
</span></span><span class=line><span class=cl>            <span class=n>priority</span><span class=o>=</span><span class=n>task_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;priority&#39;</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>  <span class=c1># 우선순위 설정</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>connection</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 메시지 소비자: 비피크 시간에 작업 처리</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>consume_tasks</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>connection</span> <span class=o>=</span> <span class=n>pika</span><span class=o>.</span><span class=n>BlockingConnection</span><span class=p>(</span><span class=n>pika</span><span class=o>.</span><span class=n>ConnectionParameters</span><span class=p>(</span><span class=s1>&#39;localhost&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>channel</span> <span class=o>=</span> <span class=n>connection</span><span class=o>.</span><span class=n>channel</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>channel</span><span class=o>.</span><span class=n>queue_declare</span><span class=p>(</span><span class=n>queue</span><span class=o>=</span><span class=s1>&#39;task_queue&#39;</span><span class=p>,</span> <span class=n>durable</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 작업자가 한 번에 하나의 메시지만 처리하도록 설정</span>
</span></span><span class=line><span class=cl>    <span class=n>channel</span><span class=o>.</span><span class=n>basic_qos</span><span class=p>(</span><span class=n>prefetch_count</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>callback</span><span class=p>(</span><span class=n>ch</span><span class=p>,</span> <span class=n>method</span><span class=p>,</span> <span class=n>properties</span><span class=p>,</span> <span class=n>body</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>task</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>body</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;처리 중인 작업: </span><span class=si>{</span><span class=n>task</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 작업 처리 시뮬레이션</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>task</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;estimated_time&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 작업 완료 확인</span>
</span></span><span class=line><span class=cl>        <span class=n>ch</span><span class=o>.</span><span class=n>basic_ack</span><span class=p>(</span><span class=n>delivery_tag</span><span class=o>=</span><span class=n>method</span><span class=o>.</span><span class=n>delivery_tag</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>channel</span><span class=o>.</span><span class=n>basic_consume</span><span class=p>(</span><span class=n>queue</span><span class=o>=</span><span class=s1>&#39;task_queue&#39;</span><span class=p>,</span> <span class=n>on_message_callback</span><span class=o>=</span><span class=n>callback</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;작업 처리 대기 중...&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>channel</span><span class=o>.</span><span class=n>start_consuming</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=로드-시프팅-구현-시-고려사항>로드 시프팅 구현 시 고려사항<a hidden class=anchor aria-hidden=true href=#로드-시프팅-구현-시-고려사항>#</a></h3><p>효과적인 로드 시프팅 전략을 수립할 때 고려해야 할 사항들:</p><ol><li><p>데이터 의존성 분석<br>작업 간의 의존성을 파악하여 시프팅 가능한 작업과 실시간 처리가 필요한 작업을 구분한다. 데이터 흐름 다이어그램(DFD)을 사용하여 의존성을 시각화하는 것이 도움이 된다.</p></li><li><p>워크로드 패턴 모니터링<br>시스템 부하 패턴을 분석하여 피크 시간과 비피크 시간을 정확히 파악한다. 이를 위해 다음과 같은 도구를 활용할 수 있다:</p><ul><li>Prometheus + Grafana</li><li>AWS CloudWatch</li><li>New Relic</li><li>Datadog</li></ul></li><li><p>SLA(Service Level Agreement) 준수 확인<br>로드 시프팅으로 인해 서비스 수준 계약을 위반하지 않도록 주의한다. 특히 시간에 민감한 작업의 경우 주의가 필요하다.</p></li><li><p>점진적 구현<br>로드 시프팅은 한 번에 모든 시스템에 적용하기보다 점진적으로 구현하는 것이 안전하다. 먼저 영향이 적은 시스템부터 시작하여 검증 후 확장하는 접근법을 권장한다.</p></li></ol><h3 id=로드-시프팅의-실제-적용-사례>로드 시프팅의 실제 적용 사례<a hidden class=anchor aria-hidden=true href=#로드-시프팅의-실제-적용-사례>#</a></h3><h4 id=데이터베이스-백업-및-유지보수>데이터베이스 백업 및 유지보수<a hidden class=anchor aria-hidden=true href=#데이터베이스-백업-및-유지보수>#</a></h4><p>데이터베이스 백업, 인덱스 재구성, 통계 업데이트 등의 유지보수 작업을 트래픽이 낮은 시간대로 이동한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span><span class=lnt id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a>
</span><span class=lnt id=hl-4-16><a class=lnlinks href=#hl-4-16>16</a>
</span><span class=lnt id=hl-4-17><a class=lnlinks href=#hl-4-17>17</a>
</span><span class=lnt id=hl-4-18><a class=lnlinks href=#hl-4-18>18</a>
</span><span class=lnt id=hl-4-19><a class=lnlinks href=#hl-4-19>19</a>
</span><span class=lnt id=hl-4-20><a class=lnlinks href=#hl-4-20>20</a>
</span><span class=lnt id=hl-4-21><a class=lnlinks href=#hl-4-21>21</a>
</span><span class=lnt id=hl-4-22><a class=lnlinks href=#hl-4-22>22</a>
</span><span class=lnt id=hl-4-23><a class=lnlinks href=#hl-4-23>23</a>
</span><span class=lnt id=hl-4-24><a class=lnlinks href=#hl-4-24>24</a>
</span><span class=lnt id=hl-4-25><a class=lnlinks href=#hl-4-25>25</a>
</span><span class=lnt id=hl-4-26><a class=lnlinks href=#hl-4-26>26</a>
</span><span class=lnt id=hl-4-27><a class=lnlinks href=#hl-4-27>27</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- MS SQL Server에서 유지보수 작업 일정 설정 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>USE</span><span class=w> </span><span class=n>msdb</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GO</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 백업 작업 생성
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>EXEC</span><span class=w> </span><span class=n>dbo</span><span class=p>.</span><span class=n>sp_add_job</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>job_name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;Weekly Database Backup&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>enabled</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 작업 단계 추가
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>EXEC</span><span class=w> </span><span class=n>dbo</span><span class=p>.</span><span class=n>sp_add_jobstep</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>job_name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;Weekly Database Backup&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>step_name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;Full Backup&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>subsystem</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;TSQL&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>command</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;BACKUP DATABASE [CustomerDB] TO DISK = N&#39;&#39;D:\Backups\CustomerDB.bak&#39;&#39; WITH COMPRESSION&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 비피크 시간대(토요일 새벽 2시)로 일정 설정
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>EXEC</span><span class=w> </span><span class=n>dbo</span><span class=p>.</span><span class=n>sp_add_schedule</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>schedule_name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;WeekendMaintenanceSchedule&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>freq_type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=c1>-- 주간 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=o>@</span><span class=n>freq_interval</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>64</span><span class=p>,</span><span class=w> </span><span class=c1>-- 토요일
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>    </span><span class=o>@</span><span class=n>active_start_time</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>20000</span><span class=p>;</span><span class=w> </span><span class=c1>-- 오전 2시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 작업에 일정 연결
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>EXEC</span><span class=w> </span><span class=n>dbo</span><span class=p>.</span><span class=n>sp_attach_schedule</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>job_name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;Weekly Database Backup&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=o>@</span><span class=n>schedule_name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>N</span><span class=s1>&#39;WeekendMaintenanceSchedule&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=대규모-배치-처리>대규모 배치 처리<a hidden class=anchor aria-hidden=true href=#대규모-배치-처리>#</a></h4><p>주문 처리, 청구서 생성, 보고서 작성 등의 배치 작업을 시스템 부하가 낮은 시간에 실행한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span><span class=lnt id=hl-5-18><a class=lnlinks href=#hl-5-18>18</a>
</span><span class=lnt id=hl-5-19><a class=lnlinks href=#hl-5-19>19</a>
</span><span class=lnt id=hl-5-20><a class=lnlinks href=#hl-5-20>20</a>
</span><span class=lnt id=hl-5-21><a class=lnlinks href=#hl-5-21>21</a>
</span><span class=lnt id=hl-5-22><a class=lnlinks href=#hl-5-22>22</a>
</span><span class=lnt id=hl-5-23><a class=lnlinks href=#hl-5-23>23</a>
</span><span class=lnt id=hl-5-24><a class=lnlinks href=#hl-5-24>24</a>
</span><span class=lnt id=hl-5-25><a class=lnlinks href=#hl-5-25>25</a>
</span><span class=lnt id=hl-5-26><a class=lnlinks href=#hl-5-26>26</a>
</span><span class=lnt id=hl-5-27><a class=lnlinks href=#hl-5-27>27</a>
</span><span class=lnt id=hl-5-28><a class=lnlinks href=#hl-5-28>28</a>
</span><span class=lnt id=hl-5-29><a class=lnlinks href=#hl-5-29>29</a>
</span><span class=lnt id=hl-5-30><a class=lnlinks href=#hl-5-30>30</a>
</span><span class=lnt id=hl-5-31><a class=lnlinks href=#hl-5-31>31</a>
</span><span class=lnt id=hl-5-32><a class=lnlinks href=#hl-5-32>32</a>
</span><span class=lnt id=hl-5-33><a class=lnlinks href=#hl-5-33>33</a>
</span><span class=lnt id=hl-5-34><a class=lnlinks href=#hl-5-34>34</a>
</span><span class=lnt id=hl-5-35><a class=lnlinks href=#hl-5-35>35</a>
</span><span class=lnt id=hl-5-36><a class=lnlinks href=#hl-5-36>36</a>
</span><span class=lnt id=hl-5-37><a class=lnlinks href=#hl-5-37>37</a>
</span><span class=lnt id=hl-5-38><a class=lnlinks href=#hl-5-38>38</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Spring Batch를 사용한 배치 작업 설정 예시</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@EnableBatchProcessing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>BatchConfig</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>JobBuilderFactory</span><span class=w> </span><span class=n>jobBuilderFactory</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>StepBuilderFactory</span><span class=w> </span><span class=n>stepBuilderFactory</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Job</span><span class=w> </span><span class=nf>invoiceGenerationJob</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>jobBuilderFactory</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;invoiceGenerationJob&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>flow</span><span class=p>(</span><span class=n>step1</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>end</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Step</span><span class=w> </span><span class=nf>step1</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>stepBuilderFactory</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;step1&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=o>&lt;</span><span class=n>Customer</span><span class=p>,</span><span class=w> </span><span class=n>Invoice</span><span class=o>&gt;</span><span class=n>chunk</span><span class=p>(</span><span class=n>100</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>reader</span><span class=p>(</span><span class=n>customerReader</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>processor</span><span class=p>(</span><span class=n>invoiceProcessor</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>writer</span><span class=p>(</span><span class=n>invoiceWriter</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// 작업 스케줄러 설정 - 매일 밤 12시에 실행</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Trigger</span><span class=w> </span><span class=nf>jobTrigger</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>TriggerBuilder</span><span class=p>.</span><span class=na>newTrigger</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>forJob</span><span class=p>(</span><span class=n>invoiceGenerationJob</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>withSchedule</span><span class=p>(</span><span class=n>CronScheduleBuilder</span><span class=p>.</span><span class=na>cronSchedule</span><span class=p>(</span><span class=s>&#34;0 0 0 * * ?&#34;</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=cdncontent-delivery-network-콘텐츠-사전-로딩>CDN(Content Delivery Network) 콘텐츠 사전 로딩<a hidden class=anchor aria-hidden=true href=#cdncontent-delivery-network-콘텐츠-사전-로딩>#</a></h4><p>피크 시간 전에 CDN에 콘텐츠를 미리 로드하여 원본 서버의 부하를 분산한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15>15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16>16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17>17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18>18</a>
</span><span class=lnt id=hl-6-19><a class=lnlinks href=#hl-6-19>19</a>
</span><span class=lnt id=hl-6-20><a class=lnlinks href=#hl-6-20>20</a>
</span><span class=lnt id=hl-6-21><a class=lnlinks href=#hl-6-21>21</a>
</span><span class=lnt id=hl-6-22><a class=lnlinks href=#hl-6-22>22</a>
</span><span class=lnt id=hl-6-23><a class=lnlinks href=#hl-6-23>23</a>
</span><span class=lnt id=hl-6-24><a class=lnlinks href=#hl-6-24>24</a>
</span><span class=lnt id=hl-6-25><a class=lnlinks href=#hl-6-25>25</a>
</span><span class=lnt id=hl-6-26><a class=lnlinks href=#hl-6-26>26</a>
</span><span class=lnt id=hl-6-27><a class=lnlinks href=#hl-6-27>27</a>
</span><span class=lnt id=hl-6-28><a class=lnlinks href=#hl-6-28>28</a>
</span><span class=lnt id=hl-6-29><a class=lnlinks href=#hl-6-29>29</a>
</span><span class=lnt id=hl-6-30><a class=lnlinks href=#hl-6-30>30</a>
</span><span class=lnt id=hl-6-31><a class=lnlinks href=#hl-6-31>31</a>
</span><span class=lnt id=hl-6-32><a class=lnlinks href=#hl-6-32>32</a>
</span><span class=lnt id=hl-6-33><a class=lnlinks href=#hl-6-33>33</a>
</span><span class=lnt id=hl-6-34><a class=lnlinks href=#hl-6-34>34</a>
</span><span class=lnt id=hl-6-35><a class=lnlinks href=#hl-6-35>35</a>
</span><span class=lnt id=hl-6-36><a class=lnlinks href=#hl-6-36>36</a>
</span><span class=lnt id=hl-6-37><a class=lnlinks href=#hl-6-37>37</a>
</span><span class=lnt id=hl-6-38><a class=lnlinks href=#hl-6-38>38</a>
</span><span class=lnt id=hl-6-39><a class=lnlinks href=#hl-6-39>39</a>
</span><span class=lnt id=hl-6-40><a class=lnlinks href=#hl-6-40>40</a>
</span><span class=lnt id=hl-6-41><a class=lnlinks href=#hl-6-41>41</a>
</span><span class=lnt id=hl-6-42><a class=lnlinks href=#hl-6-42>42</a>
</span><span class=lnt id=hl-6-43><a class=lnlinks href=#hl-6-43>43</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// AWS CloudFront 사전 로딩 Lambda 함수 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>AWS</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;aws-sdk&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>cloudfront</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>AWS</span><span class=p>.</span><span class=nx>CloudFront</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>exports</span><span class=p>.</span><span class=nx>handler</span> <span class=o>=</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 사전 로딩할 콘텐츠 목록
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>contentPaths</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;/images/banner.jpg&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;/css/main.css&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;/js/app.js&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 인기 콘텐츠 경로
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>];</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>cloudfrontDistributionId</span> <span class=o>=</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>DISTRIBUTION_ID</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 각 경로에 대해 CloudFront 무효화 요청 생성
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// (무효화 요청은 콘텐츠를 원본에서 다시 가져오도록 함)
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>invalidationParams</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>DistributionId</span><span class=o>:</span> <span class=nx>cloudfrontDistributionId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>InvalidationBatch</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>CallerReference</span><span class=o>:</span> <span class=sb>`preload-</span><span class=si>${</span><span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>Paths</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>Quantity</span><span class=o>:</span> <span class=nx>contentPaths</span><span class=p>.</span><span class=nx>length</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nx>Items</span><span class=o>:</span> <span class=nx>contentPaths</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=nx>cloudfront</span><span class=p>.</span><span class=nx>createInvalidation</span><span class=p>(</span><span class=nx>invalidationParams</span><span class=p>).</span><span class=nx>promise</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>statusCode</span><span class=o>:</span> <span class=mi>200</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>body</span><span class=o>:</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;콘텐츠 사전 로딩 완료&#39;</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;사전 로딩 실패:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>statusCode</span><span class=o>:</span> <span class=mi>500</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>body</span><span class=o>:</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;사전 로딩 실패&#39;</span><span class=p>,</span> <span class=nx>error</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Load Shifting vs. Load Balancing</h2></header><div class=entry-content><p>Load Shifting vs. Load Balancing 네트워크와 시스템 관리에서 부하 관리는 시스템의 안정성과 효율성을 유지하는 핵심 요소이다. 특히 로드 시프팅과 로드 밸런싱은 자주 혼동되지만 실제로는 매우 다른 개념과 목적을 가지고 있다. 두 기술 모두 시스템 자원을 최적화하는 데 사용되지만, 접근 방식과 적용 시나리오가 다르다.
로드 밸런싱(Load Balancing) 로드 밸런싱은 네트워크 트래픽이나 작업 부하를 여러 서버나 리소스에 고르게 분산시키는 기술이다. 이는 주로 실시간으로 이루어지며, 시스템의 전체적인 성능과 가용성을 향상시키는 것이 목적이다.
주요 특징 목적: 시스템 성능 최적화, 가용성 향상, 응답 시간 개선 타이밍: 실시간 또는 거의 실시간으로 작동 분배 방식: 여러 리소스에 작업을 균등하게 분산 적용 사례: 웹 서버 클러스터, 데이터베이스 클러스터, 컴퓨팅 그리드 로드 밸런싱 알고리즘 라운드 로빈(Round Robin): 순차적으로 각 서버에 요청을 할당한다.
...</p></div><footer class=entry-footer><span title='2025-04-04 02:45:00 +0000 UTC'>April 4, 2025</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Load Shifting vs. Load Balancing" href=https://buenhyden.github.io/posts/system-design/migration-strategies/load-shifting/load-shifting-vs-load-balancing/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Load shifting vs. autoscaling</h2></header><div class=entry-content><p>Load Shifting vs. Autoscaling Load Shifting과 Autoscaling은 백엔드 시스템에서 리소스를 효율적으로 관리하기 위한 두 가지 중요한 전략이다. 이들은 서로 다른 목적과 작동 방식을 가지고 있으며, 특정 상황에 따라 적합하게 사용된다.
Load Shifting 개념: 워크로드를 피크 시간대에서 비피크 시간대로 이동하여 리소스를 더 균형 있게 활용하는 전략. 주요 목적: 리소스 사용 최적화. 비용 절감 (예: 전력 소비가 적은 시간대 활용). 시스템 안정성 유지. 작동 방식: 작업 스케줄링을 통해 특정 시간대에 작업을 재배치. 지리적 부하 이동을 통해 다른 데이터 센터나 지역으로 워크로드를 분산. 적용 사례: 배치 작업을 야간에 실행하여 낮 시간대 사용자 요청 처리에 집중. 전력 비용이 낮은 시간대에 대규모 작업 수행. Autoscaling 개념: 실시간 수요 변화에 따라 시스템의 리소스(예: 서버 인스턴스)를 자동으로 확장하거나 축소하는 기술. 주요 목적: 실시간 트래픽 변화 대응. 과도한 리소스 프로비저닝 방지로 비용 최적화. 성능 및 사용자 경험 개선. 작동 방식: CPU, 메모리, 네트워크 트래픽 등 실시간 메트릭을 기반으로 인스턴스 수를 조정. 수요 증가 시 서버를 추가하고, 수요 감소 시 서버를 비활성화. 적용 사례: 전자상거래 사이트에서 트래픽 급증 시 서버 자동 확장. 클라우드 환경에서 이벤트 기반 애플리케이션의 동적 확장. 차이점 비교 특성 Load Shifting Autoscaling 목적 워크로드를 시간 또는 지역적으로 이동하여 리소스 최적화 실시간 수요 변화에 따라 리소스를 자동 조정 작동 방식 작업 스케줄링 및 지리적 부하 이동 실시간 메트릭 기반 서버 확장 및 축소 주요 적용 사례 배치 작업 재조정, 전력 비용 최적화 웹 애플리케이션의 트래픽 급증 대응 자동화 수준 사전 계획된 스케줄 기반 실시간 동적 조정 비용 절감 방식 비피크 시간대 활용 필요 시 인스턴스 추가 및 제거로 비용 최적화 사용 환경 장기적인 워크로드 관리 단기적인 수요 변화 대응 용어 정리 용어 설명 참고 및 출처</p></div><footer class=entry-footer><span title='2025-04-02 15:29:00 +0000 UTC'>April 2, 2025</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Load shifting vs. autoscaling" href=https://buenhyden.github.io/posts/system-design/migration-strategies/load-shifting/load-shifting-vs-autoscaling/></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>