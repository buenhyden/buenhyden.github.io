<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Load Balancer | hyunyoun's Blog</title><meta name=keywords content="System-Design,System-Components,Traffic-Control-and-Routing,Load-Balancer,High-Availability,Scalability,Traffic-Distribution"><meta name=description content="로드 밸런서 (Load Balancer) 는 복수의 서버에 트래픽을 효율적으로 분산하여 시스템 부하를 균등하게 분배하고, 장애 발생 시에도 서비스 연속성을 보장하는 장치 또는 기술이다. 다양한 알고리즘과 유형을 활용하여 확장성과 고가용성, 탄력성을 제공하는 시스템 핵심 구성 요소이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/system-design/system-components/traffic-control-and-routing/load-balancer/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/system-design/system-components/traffic-control-and-routing/load-balancer/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/system-design/system-components/traffic-control-and-routing/load-balancer/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/system-design/system-components/traffic-control-and-routing/load-balancer/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Load Balancer"><meta property="og:description" content="로드 밸런서 (Load Balancer) 는 복수의 서버에 트래픽을 효율적으로 분산하여 시스템 부하를 균등하게 분배하고, 장애 발생 시에도 서비스 연속성을 보장하는 장치 또는 기술이다. 다양한 알고리즘과 유형을 활용하여 확장성과 고가용성, 탄력성을 제공하는 시스템 핵심 구성 요소이다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Load Balancer"><meta name=twitter:description content="로드 밸런서 (Load Balancer) 는 복수의 서버에 트래픽을 효율적으로 분산하여 시스템 부하를 균등하게 분배하고, 장애 발생 시에도 서비스 연속성을 보장하는 장치 또는 기술이다. 다양한 알고리즘과 유형을 활용하여 확장성과 고가용성, 탄력성을 제공하는 시스템 핵심 구성 요소이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"기록하고 기억하고 활용하자.","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"System Design","item":"https://buenhyden.github.io/posts/system-design/"},{"@type":"ListItem","position":3,"name":"System Components","item":""},{"@type":"ListItem","position":4,"name":"Traffic Control and Routing","item":"https://buenhyden.github.io/posts/system-design/system-components/traffic-control-and-routing/"},{"@type":"ListItem","position":5,"name":"Load Balancer","item":"https://buenhyden.github.io/posts/system-design/system-components/traffic-control-and-routing/load-balancer/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>기록하고 기억하고 활용하자.</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/system-design/>System Design</a>&nbsp;»&nbsp;<a href>System Components</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/system-design/system-components/traffic-control-and-routing/>Traffic Control and Routing</a></div><h1>Load Balancer</h1><div class=post-description>로드 밸런서 (Load Balancer) 는 복수의 서버에 트래픽을 효율적으로 분산하여 시스템 부하를 균등하게 분배하고, 장애 발생 시에도 서비스 연속성을 보장하는 장치 또는 기술이다. 다양한 알고리즘과 유형을 활용하여 확장성과 고가용성, 탄력성을 제공하는 시스템 핵심 구성 요소이다.</div></header><div class=post-content><h2 id=load-balancer>Load Balancer<a hidden class=anchor aria-hidden=true href=#load-balancer>#</a></h2><p>로드 밸런서는 클라이언트 요청을 다수의 서버에 분산하여 시스템의 <strong>과부하를 방지</strong>하고, <strong>고가용성</strong>, <strong>확장성</strong>, <strong>장애 대응성</strong>을 확보하는 핵심 인프라 구성 요소이다.</p><p>네트워크 계층 (L4) 또는 애플리케이션 계층 (L7) 에서 동작하며, 라운드로빈, 최소 연결, IP 해시 등의 알고리즘을 통해 요청을 최적의 서버로 전달한다. 또한, <strong>헬스 체크</strong>, <strong>세션 유지</strong>, <strong>SSL 종료</strong>, <strong>콘텐츠 기반 라우팅</strong>, <strong>자동 장애 조치</strong> 등의 기능을 제공하며, NGINX, HAProxy, Envoy 같은 <strong>소프트웨어 기반</strong>이나 AWS ALB, GCP Load Balancer 같은 <strong>클라우드 서비스</strong>, F5 같은 <strong>하드웨어 장비</strong> 형태로 구현된다.</p><p>대규모 트래픽을 처리하는 현대 웹 아키텍처에서 필수 요소로 활용된다.</p><h3 id=등장-배경-및-발전-과정>등장 배경 및 발전 과정<a hidden class=anchor aria-hidden=true href=#등장-배경-및-발전-과정>#</a></h3><p>1990 년대 후반 인터넷 서비스의 급속한 성장과 함께 단일 서버로는 증가하는 트래픽을 처리할 수 없는 한계에 직면했다. 이로 인해 서버 클러스터링과 트래픽 분산 기술의 필요성이 대두되었다.</p><h4 id=등장-배경>등장 배경<a hidden class=anchor aria-hidden=true href=#등장-배경>#</a></h4><ul><li>단일 서버로 감당할 수 없는 대규모 트래픽의 증가</li><li>시스템 가용성 (Availability) 확보 필요성</li><li>SPOF (Single Point of Failure) 해소</li></ul><h4 id=발전-과정>발전 과정<a hidden class=anchor aria-hidden=true href=#발전-과정>#</a></h4><ul><li><strong>1 세대 (1990 년대)</strong>: 하드웨어 기반 L4 로드 밸런서 등장</li><li><strong>2 세대 (2000 년대)</strong>: L7 애플리케이션 로드 밸런서 도입</li><li><strong>3 세대 (2010 년대)</strong>: 소프트웨어 정의 로드 밸런서와 클라우드 네이티브 솔루션</li><li><strong>4 세대 (현재)</strong>: AI/ML 기반 지능형 트래픽 분산 및 마이크로서비스 지원</li></ul><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><h4 id=목적>목적<a hidden class=anchor aria-hidden=true href=#목적>#</a></h4><ol><li><strong>성능 향상</strong>: 트래픽을 여러 서버에 분산하여 응답 시간 단축</li><li><strong>고가용성 확보</strong>: 서버 장애 시 자동 장애 조치로 서비스 연속성 보장</li><li><strong>확장성 제공</strong>: 서버 추가/제거를 통한 동적 확장</li><li><strong>자원 최적화</strong>: 서버 자원의 효율적 활용</li></ol><h4 id=필요성>필요성<a hidden class=anchor aria-hidden=true href=#필요성>#</a></h4><ul><li><strong>트래픽 급증 대응</strong>: 갑작스런 트래픽 증가에 대한 탄력적 대응</li><li><strong>비즈니스 연속성</strong>: 24/7 무중단 서비스 요구사항 충족</li><li><strong>비용 효율성</strong>: 인프라 투자 최적화 및 운영비용 절감</li><li><strong>사용자 경험</strong>: 일관된 서비스 품질 제공</li></ul><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><p>Load Balancer (로드 밸런서) 는 클라이언트 요청을 여러 백엔드 서버에 분산하여 처리하는 네트워크 장비 또는 소프트웨어이다. 트래픽 분산을 통해 단일 서버의 과부하를 방지하고 시스템 전체의 성능과 안정성을 향상시킨다.</p><table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>L4 Load Balancer</td><td>전송 계층 (TCP/UDP) 수준에서 클라이언트 요청을 포트/IP 기반으로 분산</td></tr><tr><td>L7 Load Balancer</td><td>애플리케이션 계층 (HTTP/HTTPS) 수준에서 URL, 쿠키, 헤더 등에 따라 분산</td></tr><tr><td>헬스 체크</td><td>서버의 상태를 지속적으로 확인하고, 장애 시 트래픽 우회</td></tr><tr><td>세션 지속성</td><td>특정 사용자의 요청을 동일 서버로 유지 (Sticky Session)</td></tr><tr><td>SSL 종료</td><td>TLS 복호화를 로드 밸런서에서 수행하여 백엔드 서버의 부담을 줄임</td></tr></tbody></table><h4 id=실무-연관성>실무 연관성<a hidden class=anchor aria-hidden=true href=#실무-연관성>#</a></h4><ul><li>서비스 무중단 배포, 장애 서버 자동제외, 트래픽 피크/스파이크 대응, 보안 (SSL 처리) 등 백엔드/프론트엔드 구간에서 모두 필요.</li><li>클라우드 (AWS ELB, Azure Load Balancer, Google Cloud Load Balancing 등) 및 쿠버네티스 (Kubernetes) 환경에서 필수적으로 사용됨.</li><li>마이크로서비스 아키텍처, API Gateway, CDN(콘텐츠 전송 네트워크) 등과의 연동 또한 중요.</li></ul><h3 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><table><thead><tr><th>기능</th><th>설명</th><th>역할</th></tr></thead><tbody><tr><td>트래픽 분산</td><td>요청을 여러 서버에 고르게 할당</td><td>과부하방지, 레이턴시 감소</td></tr><tr><td>장애 감지 및 조치</td><td>서버 상태 헬스 체크, 장애 발생시 자동 경로 변경</td><td>무중단 서비스, 장애 자동복구</td></tr><tr><td>세션 스티키</td><td>동일 클라이언트 요청을 동일 서버로 할당</td><td>로그인/세션 포함 서비스 적합</td></tr><tr><td>SSL 오프로딩</td><td>암호화된 트래픽을 L4/L7 에서 해독</td><td>서버 부하 감소, 보안 강화</td></tr><tr><td>트래픽 라우팅</td><td>URL/IP/path 등 조건별 맞춤 라우팅</td><td>마이크로서비스 등 복잡한 아키텍처 지원</td></tr></tbody></table><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><ul><li><strong>유연성/확장성:</strong> 서버 수, 트래픽 변화에 능동적으로 대응</li><li><strong>다양한 분산 알고리즘:</strong> 트래픽 특성에 맞춘 세부 정책</li><li><strong>고가용성/내결함성:</strong> 장애시 부하 자동 전환, 헬스 체크 내장</li><li><strong>보안 연계:</strong> SSL 처리, DDoS 방어, 인증 연동</li><li><strong>실시간 모니터링/운영:</strong> 트래픽 로그, 분산 상태 실시간 감시</li></ul><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><ul><li><strong>Failover 우선 원칙</strong>: 장애 서버는 자동 제외</li><li><strong>Stateless 원칙 유지</strong>: 로드 밸런서는 상태 정보를 최소화</li><li><strong>공정 분산 원칙</strong>: 라운드로빈, 최소 연결 등 균형 유지</li><li><strong>속도 vs 정밀도 절충</strong>: 트래픽 분산 성능과 사용자 속성 고려</li><li><strong>보안 우선 설계</strong>: SSL 종료, 방화벽 역할 병행</li></ul><h3 id=주요-원리-및-작동-방식>주요 원리 및 작동 방식<a hidden class=anchor aria-hidden=true href=#주요-원리-및-작동-방식>#</a></h3><pre class=mermaid>flowchart LR
    Client--&gt;|요청|LB[Load Balancer]
    LB--&gt;|Server-A로 분산|A[Application Server 1]
    LB--&gt;|Server-B로 분산|B[Application Server 2]
    LB--&gt;|Server-C로 분산|C[Application Server 3]
    A--&gt;|응답|LB
    B--&gt;|응답|LB
    C--&gt;|응답|LB
    LB--&gt;|클라이언트에게 최종 응답|Client
</pre><ul><li>클라이언트 요청이 Load Balancer 를 통해 여러 서버에 분배됨.</li><li>서버가 응답 후, Load Balancer 가 응답을 취합/전달.</li><li>헬스 체크, 장애감지는 내부적으로 순환.</li></ul><h3 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h3><pre class=mermaid>graph TB
    subgraph &#34;클라이언트 계층&#34;
        A[웹 브라우저]
        B[모바일 앱]
        C[API 클라이언트]
    end
    
    subgraph &#34;로드 밸런서 계층&#34;
        D[L7 로드 밸런서]
        E[L4 로드 밸런서]
        F[Health Check 모듈]
        G[SSL 터미네이션]
    end
    
    subgraph &#34;백엔드 서버 계층&#34;
        H[웹 서버 1]
        I[웹 서버 2]
        J[웹 서버 3]
        K[애플리케이션 서버]
    end
    
    A --&gt; D
    B --&gt; D
    C --&gt; E
    D --&gt; H
    D --&gt; I
    E --&gt; J
    F --&gt; H
    F --&gt; I
    F --&gt; J
</pre><h4 id=구성요소>구성요소<a hidden class=anchor aria-hidden=true href=#구성요소>#</a></h4><table><thead><tr><th>구성 요소</th><th>구분</th><th>기능</th><th>역할</th><th>특징</th></tr></thead><tbody><tr><td><strong>알고리즘 엔진</strong></td><td>필수</td><td>트래픽 분산 로직 처리</td><td>클라이언트 요청에 대한 서버 선택 결정</td><td>라운드로빈, 최소 연결, IP 해시 등 다양한 알고리즘 지원</td></tr><tr><td><strong>Health Check 모듈</strong></td><td></td><td>서버 상태 모니터링</td><td>장애 서버 감지 및 트래픽에서 제외</td><td>능동적 (주기적 핑/요청), 수동적 (실패 감지) 검사 지원</td></tr><tr><td><strong>세션 관리자</strong></td><td></td><td>클라이언트 세션 추적</td><td>세션 지속성 (sticky session) 보장</td><td>쿠키, IP, 헤더 등 다양한 세션 유지 방식 지원</td></tr><tr><td><strong>SSL 터미네이션 모듈</strong></td><td>선택</td><td>SSL/TLS 암복호화 처리</td><td>백엔드 서버의 암호화 부하 경감</td><td>인증서 중앙 집중 관리, HTTPS 종단 처리</td></tr><tr><td><strong>캐싱 모듈</strong></td><td></td><td>정적 콘텐츠 캐싱</td><td>응답 속도 향상, 백엔드 요청 최소화</td><td>메모리/디스크 기반 캐싱 전략 적용 가능</td></tr><tr><td><strong>압축 모듈</strong></td><td></td><td>응답 데이터 압축</td><td>전송 데이터 크기 축소 및 네트워크 최적화</td><td>gzip, brotli 등 다양한 압축 알고리즘 지원</td></tr></tbody></table><h3 id=구현-기법-및-방법>구현 기법 및 방법<a hidden class=anchor aria-hidden=true href=#구현-기법-및-방법>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>기법/방식</strong></th><th><strong>정의 및 특징</strong></th><th><strong>대표 적용 사례 / 기술</strong></th></tr></thead><tbody><tr><td><strong>계층 기반 (OSI)</strong></td><td><strong>L4 (Transport Layer)</strong></td><td>TCP/UDP 기반. 빠른 성능과 낮은 처리 지연 제공</td><td>AWS NLB, HAProxy (mode tcp), LVS</td></tr><tr><td></td><td><strong>L7 (Application Layer)</strong></td><td>HTTP/S, URL, 쿠키 등 콘텐츠 기반 트래픽 제어</td><td>NGINX, AWS ALB, Istio Envoy, API Gateway</td></tr><tr><td><strong>라우팅 알고리즘</strong></td><td><strong>Round Robin</strong></td><td>순차적 서버 할당. 단순한 균등 분산 방식</td><td>기본 설정 (NGINX 기본 모드)</td></tr><tr><td></td><td><strong>Least Connections</strong></td><td>연결 수가 적은 서버에 우선 배분. 트래픽 가변성 대응</td><td>동적 API 서버, 채팅 서비스 등</td></tr><tr><td></td><td><strong>Weighted Round Robin/Least Conn</strong></td><td>서버별 성능 차이 반영하여 가중치 적용</td><td>HAProxy, NGINX 가중치 설정</td></tr><tr><td></td><td><strong>IP Hash</strong></td><td>클라이언트 IP 기반 해싱으로 분산. 세션 유지용</td><td>게임 서버, 스티키 세션 유지 요구 서비스</td></tr><tr><td></td><td><strong>Content-based Routing</strong></td><td>URL/헤더 기반 트래픽 분기. 마이크로서비스 계층 분산에 적합</td><td>API Gateway, L7 Proxy</td></tr><tr><td></td><td><strong>Geo-based Routing</strong></td><td>사용자 위치 기반 최적 서버로 연결</td><td>Route 53, GSLB, CDN DNS Routing</td></tr><tr><td><strong>구현/배포 유형</strong></td><td><strong>하드웨어 Load Balancer</strong></td><td>전용 장비 기반 초고속 처리. 고가의 엔터프라이즈 환경 적용</td><td>F5 BIG-IP, Citrix NetScaler</td></tr><tr><td></td><td><strong>소프트웨어 Load Balancer</strong></td><td>범용 서버 + 소프트웨어. 유연하고 경제적인 설정 가능</td><td>NGINX, HAProxy, Apache, LVS</td></tr><tr><td></td><td><strong>클라우드 매니지드 서비스</strong></td><td>클라우드 환경에 최적화된 자동 확장형 서비스. 운영 부담 감소</td><td>AWS ELB(ALB/NLB), GCP Load Balancer</td></tr><tr><td></td><td><strong>서비스 메시 기반 LB</strong></td><td>사이드카 방식으로 MSA 간 라우팅/정책 적용. 트래픽 분산과 보안, 관측성 통합</td><td>Istio + Envoy, Linkerd, Cilium</td></tr><tr><td></td><td><strong>DNS 기반 Load Balancer</strong></td><td>DNS 응답을 기반으로 지역/상태 기반 라우팅 수행</td><td>Amazon Route 53, Akamai GSLB</td></tr><tr><td><strong>세부 구현 기능</strong></td><td><strong>Health Check</strong></td><td>백엔드 서버 상태를 주기적으로 검사하여 비정상 노드 제외</td><td>모든 로드 밸런서 공통 (NGINX, HAProxy 등)</td></tr><tr><td></td><td><strong>SSL Termination</strong></td><td>TLS 종료를 로드밸런서가 처리 → 서버 부하 감소, 중앙 집중 인증</td><td>ALB, NGINX, HAProxy</td></tr><tr><td></td><td><strong>DSR (Direct Server Return)</strong></td><td>응답 경로를 서버가 직접 반환해 로드밸런서 부하 분산</td><td>Facebook Katran, 고성능 데이터센터 구조</td></tr><tr><td></td><td><strong>Active-Passive Failover</strong></td><td>메인 서버 장애 시 백업 서버로 자동 전환</td><td>고가용성 시스템 구성 시 사용</td></tr><tr><td></td><td><strong>XDP/eBPF 기반 커널 LB</strong></td><td>Linux 커널 수준에서 L4 로드밸런싱 수행. 초고속, 경량화된 성능</td><td>Katran, Cilium</td></tr><tr><td><strong>구성/연동 구조</strong></td><td><strong>Edge + Origin 구성</strong></td><td>CDN/LB 조합으로 정적/동적 콘텐츠 처리 최적화</td><td>웹사이트 + API + CDN</td></tr><tr><td></td><td><strong>LB + API Gateway 연동</strong></td><td>트래픽 라우팅 및 인증, 라우팅 정책 통합</td><td>ALB + Kong/Envoy 구성</td></tr><tr><td></td><td><strong>LB + Auto Scaling</strong></td><td>트래픽 기반 자동 서버 추가/제거</td><td>AWS ALB + ASG, GCP Backend Service</td></tr></tbody></table><h4 id=요약>요약<a hidden class=anchor aria-hidden=true href=#요약>#</a></h4><table><thead><tr><th>목적</th><th>적용 기법/기술 예시</th></tr></thead><tbody><tr><td><strong>간단하고 빠른 분산</strong></td><td>Round Robin, NGINX, LVS</td></tr><tr><td><strong>가변 트래픽 대응</strong></td><td>Least Connections, Weighted, Auto Scaling</td></tr><tr><td><strong>세션 유지</strong></td><td>IP Hash, Cookie 기반 스티키 세션</td></tr><tr><td><strong>콘텐츠 기반 분산</strong></td><td>URL/헤더 기반, API Gateway, L7 Proxy</td></tr><tr><td><strong>글로벌 최적화</strong></td><td>DNS 기반, Geo Routing, Route 53, Akamai</td></tr><tr><td><strong>고가용성 보장</strong></td><td>Health Check, Active-Passive, Multi-LB 구조</td></tr><tr><td><strong>보안/오프로드</strong></td><td>SSL Termination, 인증 처리 분리, Edge TLS</td></tr><tr><td><strong>최고 성능 처리</strong></td><td>eBPF/XDP 기반, DSR, 하드웨어 LB</td></tr></tbody></table><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>1. 고가용성 (Availability)</strong></td><td>장애 자동 감지 및 복구</td><td>Health Check 및 자동 Failover 기능으로 장애 시 빠른 복구 가능</td></tr><tr><td></td><td>트래픽 자동 전환</td><td>서버/지역 장애 시 가장 가까운 정상 노드로 트래픽 자동 전환</td></tr><tr><td></td><td>다중 PoP 구성</td><td>다양한 지리적 위치의 에지 서버를 통해 서비스 중단 없이 지속 제공</td></tr><tr><td><strong>2. 확장성 (Scalability)</strong></td><td>탄력적 서버 확장</td><td>자동 또는 수동으로 서버 인프라 확장이 가능하여 트래픽 급증에 대응</td></tr><tr><td></td><td>글로벌 분산 구조</td><td>지역별 에지 서버를 통해 글로벌 트래픽 수용과 성능 저하 최소화</td></tr><tr><td><strong>3. 성능 최적화 (Performance)</strong></td><td>부하 분산</td><td>다양한 로드 밸런싱 알고리즘을 통해 서버 간 트래픽 분산</td></tr><tr><td></td><td>응답 속도 개선</td><td>사용자 근접 에지 서버를 활용한 정적 콘텐츠 캐싱 및 동적 콘텐츠 가속</td></tr><tr><td></td><td>프로토콜 최적화</td><td>HTTP/2, HTTP/3, QUIC 등의 지원으로 요청 처리 효율 증대</td></tr><tr><td><strong>4. 보안 강화 (Security)</strong></td><td>TLS/SSL 종료</td><td>TLS 터미네이션을 에지에서 처리하여 백엔드 서버의 부하 감소 및 안전한 통신 제공</td></tr><tr><td></td><td>WAF 및 DDoS 보호</td><td>CDN 통합 보안 기능으로 트래픽 공격 방어 및 필터링 기능 제공</td></tr><tr><td></td><td>토큰 인증 및 접근 제어</td><td>서명된 URL, 토큰 기반 인증 등을 통해 정교한 콘텐츠 접근 제어 가능</td></tr><tr><td><strong>5. 운영 효율성 (Operational Efficiency)</strong></td><td>중앙 집중형 트래픽 관리</td><td>모든 트래픽을 중앙에서 정책 기반으로 제어 가능하여 운영 편의성 증가</td></tr><tr><td></td><td>설정 자동화 및 배포</td><td>API 기반 설정 변경, CI/CD 와 통합하여 빠른 설정 배포 가능</td></tr><tr><td></td><td>로그 및 모니터링 통합</td><td>실시간 성능 분석, 에러 탐지, SLA 추적 등 관측성 확보를 위한 통합 로그 시스템 연동</td></tr><tr><td><strong>6. 비용 효율성 (Cost Optimization)</strong></td><td>오리진 부하 감소</td><td>캐시를 통해 백엔드 요청을 줄여 트래픽 비용 절감</td></tr><tr><td></td><td>리소스 최적 사용</td><td>불필요한 서버 증설 없이 캐시 및 엣지 컴퓨팅을 통해 인프라 비용 절감</td></tr><tr><td></td><td>FinOps 대응</td><td>상세 비용 분석을 통한 운영 전략 수립 가능</td></tr></tbody></table><h4 id=cdn-장점별-실무-적용-사례>CDN 장점별 실무 적용 사례<a hidden class=anchor aria-hidden=true href=#cdn-장점별-실무-적용-사례>#</a></h4><table><thead><tr><th><strong>장점 카테고리</strong></th><th><strong>적용 기술/기능</strong></th><th><strong>대표 사례 (벤더)</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>고가용성</strong></td><td>Health Check, Failover</td><td><strong>AWS CloudFront + Lambda@Edge</strong></td><td>오리진 서버 장애 시 자동으로 대체 오리진 또는 지역별 최적 PoP 로 요청 라우팅</td></tr><tr><td></td><td>Anycast Routing</td><td><strong>Google Cloud CDN, Cloudflare</strong></td><td>글로벌 Anycast IP 기반으로 가장 가까운 PoP 로 사용자 라우팅</td></tr><tr><td><strong>확장성</strong></td><td>Auto Scaling, Global PoPs</td><td><strong>Akamai CDN</strong></td><td>전 세계 4 천 개 이상의 PoP 에서 트래픽 분산 처리</td></tr><tr><td></td><td>Serverless Edge Execution</td><td><strong>Cloudflare Workers, Fastly Compute@Edge</strong></td><td>코드 실행을 엣지에서 수행하여 무제한 확장 및 로컬 최적화 구현</td></tr><tr><td><strong>성능 최적화</strong></td><td>HTTP/3 (QUIC), Brotli Compression</td><td><strong>Fastly CDN</strong></td><td>HTTP/3, Brotli 압축 기본 활성화로 동적/정적 콘텐츠 속도 개선</td></tr><tr><td></td><td>Real-time Caching Optimization</td><td><strong>Cloudflare Smart Caching</strong></td><td>AI 기반으로 콘텐츠 인기도 예측, TTL 자동 조정</td></tr><tr><td><strong>보안 강화</strong></td><td>WAF, Bot Mitigation</td><td><strong>Cloudflare, AWS Shield + WAF</strong></td><td>실시간 룰 기반 공격 방어 및 봇 트래픽 차단</td></tr><tr><td></td><td>TLS Termination at Edge</td><td><strong>Akamai Edge TLS</strong></td><td>클라이언트 TLS 종료를 에지에서 수행하여 백엔드 보안 및 성능 강화</td></tr><tr><td><strong>운영 효율성</strong></td><td>API 기반 구성 자동화</td><td><strong>AWS CloudFormation + CloudFront</strong></td><td>IaC 기반 CDN 설정 자동화</td></tr><tr><td></td><td>Observability / Analytics</td><td><strong>Datadog + Cloudflare Logpush</strong></td><td>CDN 로그를 실시간 수집, 시각화하여 SLA 추적 및 이슈 분석</td></tr><tr><td><strong>비용 효율성</strong></td><td>Cache Miss 비용 절감</td><td><strong>Google CDN + Cache Hit Ratio Monitoring</strong></td><td>Cache hit 율을 기준으로 비용 최적화 모니터링 구성</td></tr><tr><td></td><td>Edge Logic 최적화</td><td><strong>Vercel Edge Functions</strong></td><td>서버리스 실행을 통해 오리진 비용 절감 및 사용자 지연 최소화</td></tr></tbody></table><h4 id=cdn-장점별-아키텍처>CDN 장점별 아키텍처<a hidden class=anchor aria-hidden=true href=#cdn-장점별-아키텍처>#</a></h4><h5 id=고가용성-및-장애-자동-복구>고가용성 및 장애 자동 복구<a hidden class=anchor aria-hidden=true href=#고가용성-및-장애-자동-복구>#</a></h5><pre class=mermaid>graph TD
  Client --&gt; CDN[CDN PoP]
  CDN --&gt; Check{Health Check}
  Check --&gt;|Healthy| Origin1
  Check --&gt;|Unhealthy| Origin2[Failover Origin]
</pre><h5 id=확장성-및-글로벌-분산-처리>확장성 및 글로벌 분산 처리<a hidden class=anchor aria-hidden=true href=#확장성-및-글로벌-분산-처리>#</a></h5><pre class=mermaid>graph TD
  User1[User - Asia] --&gt; PoP1[PoP - Singapore]
  User2[User - US] --&gt; PoP2[PoP - Virginia]
  User3[User - EU] --&gt; PoP3[PoP - Frankfurt]
  PoP1 --&gt; Origin
  PoP2 --&gt; Origin
  PoP3 --&gt; Origin
</pre><h5 id=성능-최적화-캐시--압축--최신-프로토콜>성능 최적화 (캐시 + 압축 + 최신 프로토콜)<a hidden class=anchor aria-hidden=true href=#성능-최적화-캐시--압축--최신-프로토콜>#</a></h5><pre class=mermaid>graph TD
  Browser --&gt; CDN
  CDN --&gt;|Cache Hit| Response[Serve from Cache]
  CDN --&gt;|Cache Miss| Origin
  CDN -.-&gt; Compress[Brotli / Gzip Compression]
  CDN -.-&gt; Protocol[HTTP/2 / HTTP/3]
</pre><h5 id=보안-아키텍처>보안 아키텍처<a hidden class=anchor aria-hidden=true href=#보안-아키텍처>#</a></h5><pre class=mermaid>graph TD
  User --&gt; TLS[Edge TLS Termination]
  TLS --&gt; WAF
  WAF --&gt; BotFilter[Bot Mitigation]
  BotFilter --&gt; CDN
  CDN --&gt; Origin[Origin Server]
</pre><h5 id=운영-및-관측>운영 및 관측<a hidden class=anchor aria-hidden=true href=#운영-및-관측>#</a></h5><pre class=mermaid>graph TD
  CDN --&gt; Metrics[Logpush / Analytics]
  Metrics --&gt; Dashboard[Observability Platform]
  Dashboard --&gt; Alerts[SLI/SLO Alerts]
</pre><h5 id=비용-최적화-edge-compute--cache-우선-전략>비용 최적화 (Edge Compute + Cache 우선 전략)<a hidden class=anchor aria-hidden=true href=#비용-최적화-edge-compute--cache-우선-전략>#</a></h5><pre class=mermaid>graph TD
  Request --&gt; CDN
  CDN --&gt;|Match| Cache[Serve from Cache]
  CDN --&gt;|No Match| EdgeFn[Edge Function 처리]
  EdgeFn --&gt; Origin
</pre><h3 id=단점과-문제점-그리고-해결방안>단점과 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-그리고-해결방안>#</a></h3><h4 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결 방안</th></tr></thead><tbody><tr><td>구성 복잡성</td><td>다층 구조 관리 복잡성</td><td>다양한 L4/L7 계층 도입 시 구성/운영 난이도 증가</td><td>IaC(Infrastructure as Code), 통합 모니터링 대시보드 도입</td></tr><tr><td>비용 부담</td><td>고성능 장비 및 이중화 비용</td><td>고가 장비 사용 또는 Active-Active 구성 시 비용 상승</td><td>OSS 기반 도구 (HAProxy 등) 도입, 클라우드 매니지드 서비스 활용</td></tr><tr><td>지연 발생</td><td>암호화 처리, Layer 7 분석</td><td>TLS 종료, HTTP 헤더 분석 등 추가 오버헤드 발생</td><td>TLS 종료 최적화, CDN/캐시 레이어와 병행 최적화</td></tr><tr><td>단일 실패점</td><td>LB 자체가 SPOF</td><td>LB 하나만 존재할 경우 장애 시 전체 서비스 중단</td><td>이중화 구성 (Active-Active/Passive), 클러스터링</td></tr><tr><td>상태 의존성</td><td>세션 관리 필요성</td><td>세션 유지가 필요한 시스템에서는 특정 인스턴스 고정 요구</td><td>세션 공유 (Sticky Session), Redis 기반 중앙 세션 저장소</td></tr></tbody></table><h4 id=문제점>문제점<a hidden class=anchor aria-hidden=true href=#문제점>#</a></h4><table><thead><tr><th>문제 유형</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단 방법</th><th>해결 방안 및 기법</th></tr></thead><tbody><tr><td>헬스 체크 문제</td><td>잘못된 설정/타이밍 문제</td><td>비정상 응답을 놓치거나 정상 서버를 오탐지함</td><td>비정상 서버로 라우팅, 서비스 품질 저하</td><td>헬스체크 로그, 대시보드 알림</td><td>다중 조건 검사, 지능형 상태 체크 (HTTP 코드, 응답시간, 패턴 등)</td></tr><tr><td>세션 불일치</td><td>Sticky 설정 미적용</td><td>요청이 임의 서버로 전달되어 세션 정보 유실</td><td>로그인 상태 끊김, 사용자 경험 저하</td><td>세션 추적, 사용자 로그 분석</td><td>Sticky Session, Redis 기반 세션 중앙 저장소 적용</td></tr><tr><td>부하 불균형</td><td>정적 라우팅, 가중치 오류</td><td>서버 성능/부하 고려하지 않은 라우팅</td><td>특정 서버 과부하, 지연 발생</td><td>Prometheus, Grafana 로 CPU/RT 분석</td><td>동적 가중치 조절, AI 기반 트래픽 분산 로직 적용</td></tr><tr><td>병목 현상</td><td>TLS 처리, 고비용 라우팅 알고리즘</td><td>연산 복잡도 높은 라우팅 또는 TLS 복호화 비용 발생</td><td>응답 지연, 처리량 감소</td><td>APM, 트레이스 분석 도구</td><td>TLS 오프로드, 캐시 레이어 도입, FastPath 적용</td></tr><tr><td>장애 대응 실패</td><td>Active 상태 감지 실패</td><td>LB 가 중단되었으나 백업 LB 로 자동 전환되지 않음</td><td>서비스 중단, Failover 실패</td><td>장애 시나리오 테스트, 로그 분석</td><td>Heartbeat 기반 상태 감시, Keepalived, VRRP 구성 등</td></tr><tr><td>트래픽 급증</td><td>예측 불가 트래픽 스파이크</td><td>초단기적 요청 증가에 탄력적으로 대응하지 못함</td><td>전체 시스템 병목, 요청 실패 발생</td><td>Rate 기반 모니터링, SLA 모니터링</td><td>Auto Scaling + Load Balancer 연동 구성</td></tr></tbody></table><h3 id=도전-과제>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>도전 과제</strong></th><th><strong>원인 및 배경</strong></th><th><strong>영향</strong></th><th><strong>해결 방안 및 대응 전략</strong></th></tr></thead><tbody><tr><td><strong>1. 고가용성</strong></td><td>단일 지점 장애 (SPOF)</td><td>LB 자체 장애 발생 시 전체 서비스 영향</td><td>서비스 중단, SLA 위반</td><td>이중화 구성 (Active-Active/Passive), VRRP, 클러스터링</td></tr><tr><td></td><td>글로벌 지연</td><td>사용자와 LB 간 물리적 거리</td><td>응답 속도 저하</td><td>Anycast 라우팅, GSLB, GeoDNS, CDN 연계</td></tr><tr><td><strong>2. 세션 일관성</strong></td><td>상태 저장 애플리케이션 처리</td><td>LB 가 요청을 임의 서버로 분산하여 세션 유실</td><td>로그인 해제, 장바구니 초기화 등 UX 저하</td><td>Session Affinity (Sticky), JWT 기반 무상태화, Redis 기반 세션 스토어</td></tr><tr><td><strong>3. 확장성과 유연성</strong></td><td>컨테이너 환경에서 동적 디스커버리</td><td>컨테이너가 수시로 재배포되며 IP, 포트 변경</td><td>트래픽 분산 실패 또는 장애</td><td>Kubernetes Ingress, Service Mesh (Istio, Linkerd), Envoy + xDS</td></tr><tr><td></td><td>실시간 트래픽 급증 대응</td><td>트래픽 예측 어려움, 수동 확장</td><td>응답 지연 또는 시스템 다운</td><td>오토스케일링, AI 기반 예측, 지능형 트래픽 라우팅</td></tr><tr><td><strong>4. 성능 최적화</strong></td><td>TLS 처리 비용 및 지연</td><td>L7 SSL Termination 은 CPU 소모 큼</td><td>지연 증가, 처리량 감소</td><td>TLS Pass-through, Hardware Accelerator (e.g., NIC offload), Edge TLS Termination</td></tr><tr><td></td><td>LB 자체 성능 한계</td><td>부하 증가에 따른 Throughput 병목</td><td>전체 시스템 성능 저하</td><td>Layer4 로드밸서 분산, Multi-tier LB 구조 (Edge → App → DB)</td></tr><tr><td><strong>5. 알고리즘/정책</strong></td><td>분산 알고리즘 비효율</td><td>트래픽 패턴이 예측 불가능하거나 불균형 발생</td><td>특정 서버 과부하, 자원 낭비</td><td>AI 기반 분산 (Traffic Prediction), Adaptive Load Balancing</td></tr><tr><td></td><td>비동기 아키텍처 대응 어려움</td><td>이벤트 기반 시스템에서 요청과 응답 매칭 어려움</td><td>응답 지연, 처리 실패</td><td>메시지 큐 기반 Load Balancing, Queue-aware LB 설계</td></tr><tr><td><strong>6. 보안과 인증</strong></td><td>TLS 인증서 자동화</td><td>멀티 리전/멀티 도메인 인증서 갱신/적용 어려움</td><td>보안 사고, 인증서 만료</td><td>Cert Manager, ACME 프로토콜, Wildcard 인증서 적용</td></tr><tr><td></td><td>DDoS 및 악성 트래픽 대응</td><td>Edge 에 모든 요청 집중, 취약한 L7 공격</td><td>서비스 다운, 트래픽 오염</td><td>Web Application Firewall, Bot Protection, Rate Limiting</td></tr><tr><td><strong>7. 운영/관측</strong></td><td>정책 동기화 및 감사 로깅 부족</td><td>다수의 LB 구성 시 정책 불일치 및 관리 복잡</td><td>규칙 누락/충돌, 보안 허점</td><td>중앙 관리 플랫폼 (e.g., Consul, Istio Control Plane), Config as Code, Audit Logging</td></tr><tr><td></td><td>트래픽 흐름 추적 어려움</td><td>분산된 환경에서 End-to-End 모니터링 부족</td><td>장애 원인 추적 불가, SLA 미달</td><td>eBPF 기반 패킷 추적, OpenTelemetry 기반 분산 트레이싱</td></tr><tr><td><strong>8. 비용 최적화</strong></td><td>L7 고기능 LB 도입 시 비용 증가</td><td>고성능 기능일수록 리소스와 라이선스 비용 증가</td><td>운영비용 상승</td><td>L4/L7 하이브리드 구성, 경량 L7 프록시 도입 (e.g., Traefik, NGINX Unit)</td></tr></tbody></table><ul><li><strong>전통적인 LB 방식만으로는 마이크로서비스, 클라우드 네이티브, 멀티리전 환경에 한계가 존재</strong>함</li><li><strong>운영 효율성 및 자동화를 위해 서비스 메시, AI 기반 최적화, 관측 도구와 통합 설계가 필수</strong></li><li><strong>단일 장애 지점 제거 및 보안 강화를 위한 멀티계층적 접근이 필요</strong> (L4+L7, PoP, CDN, Sidecar LB 등)</li></ul><h3 id=현대-시스템에서의-load-balancer-확장-방식>현대 시스템에서의 Load Balancer 확장 방식<a hidden class=anchor aria-hidden=true href=#현대-시스템에서의-load-balancer-확장-방식>#</a></h3><ol><li><p><strong>Global Load Balancing (글로벌 로드 밸런싱)</strong></p><ul><li>다수의 지역 (Region, POP) 에 분산된 서버 간 트래픽을 분배</li><li>DNS 기반 (예: Route 53), Anycast IP 방식</li><li>주로 다국적 서비스, CDN, 게임 트래픽 등에 활용</li></ul></li><li><p><strong>Load Balancer Chaining (다단계 로드 밸런서 구성)</strong></p><ul><li>외부 L7 LB → 내부 L4 LB → 서비스 메쉬 Proxy (Envoy)</li><li>보안/트래픽 제어/세션 처리 등의 계층적 분리</li><li>단일 LB 성능 한계 극복 + 기능 분산 설계</li></ul></li><li><p><strong>Service Mesh 기반 라우팅</strong></p><ul><li>Istio, Linkerd 등의 사이드카 패턴</li><li>트래픽 분산, 보안 정책, 텔레메트리 통합</li><li>K8s 환경에서 마이크로서비스 간 로드 밸런싱 고도화</li></ul></li></ol><h3 id=로드-밸런서-설계-시-안티-패턴-anti-patterns>로드 밸런서 설계 시 안티 패턴 (Anti-Patterns)<a hidden class=anchor aria-hidden=true href=#로드-밸런서-설계-시-안티-패턴-anti-patterns>#</a></h3><table><thead><tr><th>항목</th><th>설명</th><th>영향</th><th>해결 방안</th></tr></thead><tbody><tr><td>단일 LB 구성</td><td>로드 밸런서 하나만 존재</td><td>SPOF (Single Point of Failure)</td><td>Active-Active 이중화</td></tr><tr><td>세션 서버 종속</td><td>서버 내 세션 저장</td><td>세션 이동 시 로그인 끊김</td><td>외부 세션 저장소 사용 (Redis 등)</td></tr><tr><td>과도한 헬스체크</td><td>1 초 미만 간격 반복 요청</td><td>서버 과부하 발생</td><td>간격 조정 및 동시 요청 제한</td></tr><tr><td>L7 에서 무조건 TLS 종료</td><td>내부에 재암호화 없이 통신</td><td>내부 보안 위험 증가</td><td>TLS 재암호화 + 내부 인증 적용</td></tr><tr><td>메트릭 미수집</td><td>트래픽 상태 모니터링 안됨</td><td>문제 탐지 지연</td><td>Prometheus, Grafana 등 통합 필요</td></tr></tbody></table><h4 id=단일-lb-구성-single-point-of-failure>단일 LB 구성 (Single Point of Failure)<a hidden class=anchor aria-hidden=true href=#단일-lb-구성-single-point-of-failure>#</a></h4><p><strong>문제</strong>: 로드 밸런서 인스턴스가 하나일 경우, 해당 인스턴스 장애 시 전체 서비스 중단 (SPOF) 발생</p><p><strong>해결 방안</strong>: Active-Active 이중화</p><pre class=mermaid>flowchart TB
  Client1 --&gt; DNS
  DNS --&gt; LB1
  DNS --&gt; LB2
  LB1 --&gt; App1
  LB1 --&gt; App2
  LB2 --&gt; App1
  LB2 --&gt; App2
  LB1 &lt;--&gt; LB2
  subgraph Load Balancers
    LB1[Load Balancer A]
    LB2[Load Balancer B]
  end
  subgraph App Layer
    App1[Backend Server 1]
    App2[Backend Server 2]
  end
</pre><ul><li>LB1, LB2 는 <strong>VIP 구성 (VRRP)</strong> 또는 <strong>클라우드 라운드로빈 DNS</strong>로 동시 서비스 제공</li><li>양쪽 모두 상태 공유 및 failover 대응</li></ul><p><strong>구현 예시</strong>:</p><ul><li><p><strong>구성 방식</strong>: 이중 로드 밸런서를 <strong>L4 수준에서 VIP(Virtual IP)</strong> 또는 <strong>DNS 라운드로빈</strong>을 통해 동시에 서비스</p></li><li><p><strong>예시 (Kubernetes 환경)</strong>:</p><ul><li>MetalLB 또는 AWS NLB 를 활용한 LB IP 이중화</li><li>External-DNS + 클라우드 로드밸런서 연동으로 <strong>다중 AZ 기반 분산</strong></li></ul></li><li><p><strong>하드웨어 환경</strong>:</p><ul><li><p>VRRP 프로토콜 기반 <strong>Keepalived</strong> 설정으로 <strong>HA Proxy 이중화</strong></p></li><li><p>구성 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1>1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2>2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3>3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4>4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5>5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6>6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7>7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8>8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vrrp_instance VI_1 <span class=o>{</span>
</span></span><span class=line><span class=cl>  state MASTER
</span></span><span class=line><span class=cl>  interface eth0
</span></span><span class=line><span class=cl>  virtual_router_id <span class=m>51</span>
</span></span><span class=line><span class=cl>  priority <span class=m>100</span>
</span></span><span class=line><span class=cl>  virtual_ipaddress <span class=o>{</span>
</span></span><span class=line><span class=cl>      192.168.1.100
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ul></li></ul><p><strong>Kubernetes 기반 YAML 구성 예시</strong>:</p><ul><li>Active-Active Ingress 이중화</li><li>MetalLB + HAProxy + Keepalived</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span><span class=lnt id=hl-10-12><a class=lnlinks href=#hl-10-12>12</a>
</span><span class=lnt id=hl-10-13><a class=lnlinks href=#hl-10-13>13</a>
</span><span class=lnt id=hl-10-14><a class=lnlinks href=#hl-10-14>14</a>
</span><span class=lnt id=hl-10-15><a class=lnlinks href=#hl-10-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># MetalLB config for static IP allocation (L2 mode)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>metallb.io/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>IPAddressPool</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pool1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>addresses</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=m>192.168.1.100-192.168.1.101</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>metallb.io/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>L2Advertisement</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>l2adv</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>두 개의 LB 가 동시에 IP 를 제공</li><li>Keepalived 또는 dual Ingress controller 로 이중화</li></ul><h4 id=세션-서버-종속-session-stickiness-by-local-storage>세션 서버 종속 (Session Stickiness by Local Storage)<a hidden class=anchor aria-hidden=true href=#세션-서버-종속-session-stickiness-by-local-storage>#</a></h4><p><strong>문제</strong>: 세션 정보가 로컬 서버에 저장되면 요청이 다른 서버로 분산될 때 로그인 상태 끊김 발생</p><p><strong>해결 방안</strong>: 외부 세션 저장소</p><ul><li>Redis 기반 세션 클러스터링</li></ul><pre class=mermaid>sequenceDiagram
  participant Client
  participant LB as Load Balancer
  participant App1 as App Server 1
  participant App2 as App Server 2
  participant Redis

  Client-&gt;&gt;LB: HTTP 요청
  LB-&gt;&gt;App1: 요청 전달
  App1-&gt;&gt;Redis: 세션 저장
  Client-&gt;&gt;LB: 다음 요청
  LB-&gt;&gt;App2: 요청 전달
  App2-&gt;&gt;Redis: 세션 조회
  App2--&gt;&gt;Client: 응답 (세션 유지됨)
</pre><ul><li>세션은 서버 로컬이 아닌 Redis 에 저장되어 <strong>서버 간 상태 공유</strong></li><li>로드밸런서가 어떤 서버로 보내든 세션은 유지됨</li></ul><p><strong>구성 예시</strong>:</p><ul><li><p><strong>Redis 기반 세션 스토리지</strong>:</p><ul><li><p>Express.js:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1>1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2>2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3>3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4>4</a>
</span><span class=lnt id=hl-12-5><a class=lnlinks href=#hl-12-5>5</a>
</span><span class=lnt id=hl-12-6><a class=lnlinks href=#hl-12-6>6</a>
</span><span class=lnt id=hl-12-7><a class=lnlinks href=#hl-12-7>7</a>
</span><span class=lnt id=hl-12-8><a class=lnlinks href=#hl-12-8>8</a>
</span><span class=lnt id=hl-12-9><a class=lnlinks href=#hl-12-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>session</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express-session&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>RedisStore</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;connect-redis&#39;</span><span class=p>).</span><span class=k>default</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>session</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>store</span><span class=o>:</span> <span class=k>new</span> <span class=nx>RedisStore</span><span class=p>({</span> <span class=nx>client</span><span class=o>:</span> <span class=nx>redisClient</span> <span class=p>}),</span>
</span></span><span class=line><span class=cl>  <span class=nx>secret</span><span class=o>:</span> <span class=s1>&#39;keyboard cat&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>resave</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>saveUninitialized</span><span class=o>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=p>}));</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>Django:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1>1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>SESSION_ENGINE</span> <span class=o>=</span> <span class=s2>&#34;django.contrib.sessions.backends.cache&#34;</span>
</span></span><span class=line><span class=cl><span class=n>SESSION_CACHE_ALIAS</span> <span class=o>=</span> <span class=s2>&#34;default&#34;</span>
</span></span></code></pre></td></tr></table></div></div></li></ul></li><li><p><strong>Sticky Session 대신 Stateless JWT 적용</strong>:</p><ul><li>세션 정보를 클라이언트에 저장 (JWT), 로드 밸런서 뒤 서버 간 상태 공유 불필요</li></ul></li></ul><p><strong>Kubernetes 기반 YAML 구성 예시</strong>:</p><ul><li>Redis 기반 세션 저장</li><li>Express.js Deployment 예시</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1> 1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2> 2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3> 3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4> 4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5> 5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6> 6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7> 7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8> 8</a>
</span><span class=lnt id=hl-14-9><a class=lnlinks href=#hl-14-9> 9</a>
</span><span class=lnt id=hl-14-10><a class=lnlinks href=#hl-14-10>10</a>
</span><span class=lnt id=hl-14-11><a class=lnlinks href=#hl-14-11>11</a>
</span><span class=lnt id=hl-14-12><a class=lnlinks href=#hl-14-12>12</a>
</span><span class=lnt id=hl-14-13><a class=lnlinks href=#hl-14-13>13</a>
</span><span class=lnt id=hl-14-14><a class=lnlinks href=#hl-14-14>14</a>
</span><span class=lnt id=hl-14-15><a class=lnlinks href=#hl-14-15>15</a>
</span><span class=lnt id=hl-14-16><a class=lnlinks href=#hl-14-16>16</a>
</span><span class=lnt id=hl-14-17><a class=lnlinks href=#hl-14-17>17</a>
</span><span class=lnt id=hl-14-18><a class=lnlinks href=#hl-14-18>18</a>
</span><span class=lnt id=hl-14-19><a class=lnlinks href=#hl-14-19>19</a>
</span><span class=lnt id=hl-14-20><a class=lnlinks href=#hl-14-20>20</a>
</span><span class=lnt id=hl-14-21><a class=lnlinks href=#hl-14-21>21</a>
</span><span class=lnt id=hl-14-22><a class=lnlinks href=#hl-14-22>22</a>
</span><span class=lnt id=hl-14-23><a class=lnlinks href=#hl-14-23>23</a>
</span><span class=lnt id=hl-14-24><a class=lnlinks href=#hl-14-24>24</a>
</span><span class=lnt id=hl-14-25><a class=lnlinks href=#hl-14-25>25</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>web-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>web</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>web</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>express</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>myorg/express-app:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>REDIS_HOST</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=l>redis-master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>SESSION_SECRET</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>valueFrom</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>secretKeyRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>session-secret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>secret</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1> 1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2> 2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3> 3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4> 4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5> 5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6> 6</a>
</span><span class=lnt id=hl-15-7><a class=lnlinks href=#hl-15-7> 7</a>
</span><span class=lnt id=hl-15-8><a class=lnlinks href=#hl-15-8> 8</a>
</span><span class=lnt id=hl-15-9><a class=lnlinks href=#hl-15-9> 9</a>
</span><span class=lnt id=hl-15-10><a class=lnlinks href=#hl-15-10>10</a>
</span><span class=lnt id=hl-15-11><a class=lnlinks href=#hl-15-11>11</a>
</span><span class=lnt id=hl-15-12><a class=lnlinks href=#hl-15-12>12</a>
</span><span class=lnt id=hl-15-13><a class=lnlinks href=#hl-15-13>13</a>
</span><span class=lnt id=hl-15-14><a class=lnlinks href=#hl-15-14>14</a>
</span><span class=lnt id=hl-15-15><a class=lnlinks href=#hl-15-15>15</a>
</span><span class=lnt id=hl-15-16><a class=lnlinks href=#hl-15-16>16</a>
</span><span class=lnt id=hl-15-17><a class=lnlinks href=#hl-15-17>17</a>
</span><span class=lnt id=hl-15-18><a class=lnlinks href=#hl-15-18>18</a>
</span><span class=lnt id=hl-15-19><a class=lnlinks href=#hl-15-19>19</a>
</span><span class=lnt id=hl-15-20><a class=lnlinks href=#hl-15-20>20</a>
</span><span class=lnt id=hl-15-21><a class=lnlinks href=#hl-15-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># Redis StatefulSet</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>StatefulSet</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>redis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>serviceName</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;redis&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>redis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>redis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>redis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>redis:6.2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>6379</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=과도한-헬스체크-aggressive-health-check>과도한 헬스체크 (Aggressive Health Check)<a hidden class=anchor aria-hidden=true href=#과도한-헬스체크-aggressive-health-check>#</a></h4><p><strong>문제</strong>: 짧은 주기로 헬스체크를 수행하면, 실제 트래픽 외에도 과부하를 유발</p><p><strong>해결 방안</strong>: 주기 조정 및 Concurrency 제한</p><p><strong>구현 예시</strong>:</p><ul><li><p><strong>NGINX 헬스체크 설정 (NJS + OpenResty)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1>1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2>2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3>3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4>4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5>5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6>6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=line><span class=cl><span class=k>server</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kn>location</span> <span class=s>/health</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kn>proxy_pass</span> <span class=s>http://backend/health</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>proxy_next_upstream</span> <span class=s>error</span> <span class=s>timeout</span> <span class=s>http_500</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>health_check</span> <span class=s>interval=5</span> <span class=s>fails=3</span> <span class=s>passes=2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>AWS ALB 기준</strong>:</p><ul><li>기본 헬스체크 간격을 <code>30초</code> 로 설정</li><li><code>Unhealthy threshold</code> 를 5 이상으로 조정하여 순간적 오차 허용</li></ul></li><li><p><strong>Custom 헬스체크 API 에 <code>rate limiter</code> 적용</strong></p><ul><li><p>FastAPI 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1>1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2>2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3>3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nd>@limiter.limit</span><span class=p>(</span><span class=s2>&#34;5 per minute&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nd>@app.get</span><span class=p>(</span><span class=s2>&#34;/healthz&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>health_check</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;ok&#34;</span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ul></li></ul><h4 id=l7-에서-무조건-tls-종료-tls-termination-only-at-lb>L7 에서 무조건 TLS 종료 (TLS Termination Only at LB)<a hidden class=anchor aria-hidden=true href=#l7-에서-무조건-tls-종료-tls-termination-only-at-lb>#</a></h4><p><strong>문제</strong>: L7 LB 에서 TLS 를 종료한 후, 내부 서버 간은 평문 HTTP 로 통신 → 보안 문제 발생</p><p><strong>해결 방안</strong>: TLS 재암호화 및 내부 인증</p><ul><li>TLS Termination 후 백엔드 암호화 구성</li></ul><pre class=mermaid>flowchart LR
  Client --&gt; LB[Application Load Balancer]
  LB --&gt;|TLS Termination| TLSProxy[TLS Proxy Layer]
  TLSProxy --&gt;|Mutual TLS| App1[Internal App Server]
  TLSProxy --&gt;|Mutual TLS| App2[Internal App Server]
</pre><ul><li>ALB 는 TLS 종료</li><li>내부 서비스 간은 <strong>mTLS 로 재암호화</strong></li><li>TLSProxy 는 Envoy 또는 Istio 로 구성 가능</li></ul><p><strong>적용 예시</strong>:</p><ul><li><p><strong>L7 LB 에서 TLS 종료 후 백엔드로 다시 HTTPS 통신 설정</strong></p><ul><li><p>Envoy 또는 NGINX 에서 백엔드 <code>proxy_pass</code> 시 TLS 유지</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1>1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2>2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3>3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4>4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=line><span class=cl><span class=k>location</span> <span class=s>/api</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kn>proxy_pass</span> <span class=s>https://internal-service</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kn>proxy_ssl_verify</span> <span class=no>on</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kn>proxy_ssl_trusted_certificate</span> <span class=s>/etc/ssl/certs/ca-certificates.crt</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ul></li><li><p><strong>서비스 메시 활용 (Istio mTLS)</strong>:</p><ul><li><p>Istio 에 mTLS 정책 설정:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1>1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2>2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3>3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4>4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5>5</a>
</span><span class=lnt id=hl-20-6><a class=lnlinks href=#hl-20-6>6</a>
</span><span class=lnt id=hl-20-7><a class=lnlinks href=#hl-20-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>security.istio.io/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>PeerAuthentication</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>default</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mtls</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class=l>STRICT</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li><li><p>클러스터 내 모든 Pod 간 통신을 암호화 (Zero Trust 보안)</p></li></ul></li></ul><p><strong>Kubernetes 기반 YAML 구성 예시</strong>:</p><ul><li>TLS Termination + Backend TLS Re-encryption (Istio)</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1> 1</a>
</span><span class=lnt id=hl-21-2><a class=lnlinks href=#hl-21-2> 2</a>
</span><span class=lnt id=hl-21-3><a class=lnlinks href=#hl-21-3> 3</a>
</span><span class=lnt id=hl-21-4><a class=lnlinks href=#hl-21-4> 4</a>
</span><span class=lnt id=hl-21-5><a class=lnlinks href=#hl-21-5> 5</a>
</span><span class=lnt id=hl-21-6><a class=lnlinks href=#hl-21-6> 6</a>
</span><span class=lnt id=hl-21-7><a class=lnlinks href=#hl-21-7> 7</a>
</span><span class=lnt id=hl-21-8><a class=lnlinks href=#hl-21-8> 8</a>
</span><span class=lnt id=hl-21-9><a class=lnlinks href=#hl-21-9> 9</a>
</span><span class=lnt id=hl-21-10><a class=lnlinks href=#hl-21-10>10</a>
</span><span class=lnt id=hl-21-11><a class=lnlinks href=#hl-21-11>11</a>
</span><span class=lnt id=hl-21-12><a class=lnlinks href=#hl-21-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># PeerAuthentication: enforce mTLS between sidecars</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>security.istio.io/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>PeerAuthentication</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>backend-mtls</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>default</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>backend</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mtls</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class=l>STRICT</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1> 1</a>
</span><span class=lnt id=hl-22-2><a class=lnlinks href=#hl-22-2> 2</a>
</span><span class=lnt id=hl-22-3><a class=lnlinks href=#hl-22-3> 3</a>
</span><span class=lnt id=hl-22-4><a class=lnlinks href=#hl-22-4> 4</a>
</span><span class=lnt id=hl-22-5><a class=lnlinks href=#hl-22-5> 5</a>
</span><span class=lnt id=hl-22-6><a class=lnlinks href=#hl-22-6> 6</a>
</span><span class=lnt id=hl-22-7><a class=lnlinks href=#hl-22-7> 7</a>
</span><span class=lnt id=hl-22-8><a class=lnlinks href=#hl-22-8> 8</a>
</span><span class=lnt id=hl-22-9><a class=lnlinks href=#hl-22-9> 9</a>
</span><span class=lnt id=hl-22-10><a class=lnlinks href=#hl-22-10>10</a>
</span><span class=lnt id=hl-22-11><a class=lnlinks href=#hl-22-11>11</a>
</span><span class=lnt id=hl-22-12><a class=lnlinks href=#hl-22-12>12</a>
</span><span class=lnt id=hl-22-13><a class=lnlinks href=#hl-22-13>13</a>
</span><span class=lnt id=hl-22-14><a class=lnlinks href=#hl-22-14>14</a>
</span><span class=lnt id=hl-22-15><a class=lnlinks href=#hl-22-15>15</a>
</span><span class=lnt id=hl-22-16><a class=lnlinks href=#hl-22-16>16</a>
</span><span class=lnt id=hl-22-17><a class=lnlinks href=#hl-22-17>17</a>
</span><span class=lnt id=hl-22-18><a class=lnlinks href=#hl-22-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># Gateway for external TLS termination</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>networking.istio.io/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Gateway</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>my-gateway</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>istio</span><span class=p>:</span><span class=w> </span><span class=l>ingressgateway</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>servers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>port</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>number</span><span class=p>:</span><span class=w> </span><span class=m>443</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>https</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>HTTPS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>tls</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class=l>SIMPLE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>credentialName</span><span class=p>:</span><span class=w> </span><span class=l>my-cert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>hosts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=s2>&#34;example.com&#34;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=메트릭-미수집-lack-of-observability>메트릭 미수집 (Lack of Observability)<a hidden class=anchor aria-hidden=true href=#메트릭-미수집-lack-of-observability>#</a></h4><p><strong>문제</strong>: 로드 밸런서 상태와 트래픽 흐름을 실시간으로 파악하지 못해 장애 감지 및 분석 지연</p><p><strong>해결 방안</strong>: 메트릭 수집 및 시각화 도구</p><p><strong>통합 예시</strong>:</p><ul><li><p><strong>Prometheus + Grafana 통합</strong>:</p><ul><li><p>NGINX 메트릭 수집:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-23-1><a class=lnlinks href=#hl-23-1>1</a>
</span><span class=lnt id=hl-23-2><a class=lnlinks href=#hl-23-2>2</a>
</span><span class=lnt id=hl-23-3><a class=lnlinks href=#hl-23-3>3</a>
</span><span class=lnt id=hl-23-4><a class=lnlinks href=#hl-23-4>4</a>
</span><span class=lnt id=hl-23-5><a class=lnlinks href=#hl-23-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=line><span class=cl><span class=k>location</span> <span class=s>/metrics</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kn>stub_status</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kn>allow</span> <span class=n>127.0.0.1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kn>deny</span> <span class=s>all</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><code>nginx-exporter</code> 또는 <code>envoy-prometheus-exporter</code> 사용</p></li></ul></li><li><p><strong>ALB, ELB 등 클라우드 LB 연동</strong>:</p><ul><li>AWS CloudWatch 에서 <code>RequestCount</code>, <code>TargetResponseTime</code>, <code>HTTPCode_ELB_5XX</code> 등 수집</li><li>Alarm 설정으로 장애 시 자동 알림 (SNS, Slack 연동)</li></ul></li><li><p><strong>예시 시각화 대시보드 구성 (Grafana)</strong>:</p><ul><li>요청 수, 평균 응답 시간, 연결 수, 활성 타겟 수 등 시각화</li><li>Alertmanager 와 연동하여 SLA 초과 시 알림 발송</li></ul></li></ul><h3 id=분류-기준에-따른-종류-및-유형>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형>#</a></h3><table><thead><tr><th><strong>분류 기준</strong></th><th><strong>유형</strong></th><th><strong>설명 및 특징</strong></th><th><strong>대표 예시</strong></th></tr></thead><tbody><tr><td><strong>1. 계층 구조 (OSI)</strong></td><td>L4 (전송 계층)</td><td>TCP/UDP 기반 분산, 빠른 처리, 포트/IP 단위 분산</td><td>AWS NLB, LVS, iptables</td></tr><tr><td></td><td>L7 (애플리케이션 계층)</td><td>HTTP/HTTPS 기반, 콘텐츠 라우팅, 쿠키/헤더 기반 정책 가능</td><td>NGINX, Envoy, AWS ALB</td></tr><tr><td><strong>2. 구현 방식</strong></td><td>하드웨어 기반</td><td>물리적 장비 기반, 고성능/고신뢰성, 높은 비용</td><td>F5 BIG-IP, Citrix ADC</td></tr><tr><td></td><td>소프트웨어 기반</td><td>일반 서버에 설치, 유연성·확장성 좋음, 오픈소스 많음</td><td>HAProxy, NGINX, Envoy, Traefik</td></tr><tr><td></td><td>클라우드 매니지드</td><td>클라우드 제공자가 관리, 자동 확장·장애 대응, 설정 단순</td><td>AWS ELB, GCP Load Balancer, Azure LB</td></tr><tr><td><strong>3. 배포 위치</strong></td><td>내부 (Internal)</td><td>서비스 간 통신용, 클러스터 내 또는 VPC 내 트래픽 분산</td><td>Kubernetes ClusterIP, AWS Internal ELB</td></tr><tr><td></td><td>외부 (External)</td><td>인터넷으로부터 유입되는 외부 트래픽 처리</td><td>AWS Internet-facing ELB, Ingress Controller</td></tr><tr><td></td><td>글로벌 (GSLB)</td><td>지리적으로 분산된 사용자에게 가까운 리전으로 분산</td><td>Cloudflare Load Balancing, NS1, AWS Route 53</td></tr><tr><td><strong>4. 알고리즘</strong></td><td>라운드 로빈 (Round Robin)</td><td>순차적으로 요청 분산, 간단하고 균등 분산</td><td>기본 라우터 로직 (Nginx, HAProxy 등)</td></tr><tr><td></td><td>최소 연결 (Least Connection)</td><td>연결 수가 가장 적은 서버로 분산, 비동기 처리 시스템에 유리</td><td>HAProxy, Envoy</td></tr><tr><td></td><td>가중치 라운드 로빈</td><td>서버별 가중치 부여로 성능차 보정 가능</td><td>Nginx <code>weight</code> 파라미터</td></tr><tr><td></td><td>최소 응답 시간 (Least Response Time)</td><td>평균 응답 시간이 가장 빠른 서버 선택, 실시간 성능 기준 분산</td><td>고성능 분석/모니터링 기반 시스템</td></tr><tr><td></td><td>해시 기반 (IP/URL/Cookie Hash)</td><td>요청 특성 (IP, URL 등) 에 따라 특정 서버 고정, 세션 지속성 유지에 효과적</td><td>IP Hash: Sticky Session</td></tr><tr><td><strong>5. 세션 관리</strong></td><td>Stateless</td><td>상태를 저장하지 않음, 수평 확장성 유리</td><td>대부분의 REST API 구조</td></tr><tr><td></td><td>Sticky Session</td><td>동일 사용자 요청을 항상 같은 서버로, 로그인 유지 등 사용자 경험 보장</td><td>L7 기반 Load Balancer 에서 주로 사용</td></tr><tr><td></td><td>세션 복제 (Session Replication)</td><td>세션 데이터를 여러 서버에 복제, 장애 허용성과 Sticky Session 효과 동시 달성</td><td>Redis, Shared DB 기반</td></tr><tr><td><strong>6. 형태/플랫폼</strong></td><td>On-Premise</td><td>자체 IDC, 프라이빗 클라우드 환경에서 직접 설치 및 운영</td><td>물리 서버 + F5/NGINX</td></tr><tr><td></td><td>클라우드</td><td>퍼블릭 클라우드 상에서 서비스형 로드밸런서 사용</td><td>AWS, GCP, Azure 등</td></tr><tr><td></td><td>하이브리드</td><td>IDC + 클라우드 통합 운영, 글로벌 서비스에 유리</td><td>GSLB + 내부 L7 구성</td></tr><tr><td><strong>7. 특수 기능</strong></td><td>서비스 메시 연동</td><td>사이드카 프록시와 연동된 트래픽 제어 및 정책 적용</td><td>Istio, Linkerd + Envoy</td></tr><tr><td></td><td>Ingress Controller</td><td>Kubernetes 환경에서 Ingress 리소스를 통한 L7 트래픽 제어</td><td>NGINX-Ingress, Traefik, AWS ALB Controller</td></tr><tr><td></td><td>CDN+LB 통합</td><td>콘텐츠 전송과 트래픽 분산을 통합하여 엣지 처리 및 최적화</td><td>Cloudflare, Akamai, Fastly</td></tr></tbody></table><ul><li><strong>레이어 기준 (L4 vs L7)</strong>: 처리 속도 vs 정교한 라우팅 정책</li><li><strong>구현 방식 (하드웨어/소프트웨어/클라우드)</strong>: 비용 및 운용 전략 기준 선택</li><li><strong>알고리즘</strong>: 트래픽 특성과 서버 성능 기반으로 동적 또는 정적 선택</li><li><strong>세션</strong>: 사용자 상태 유지가 필요한 경우 반드시 고려</li><li><strong>Kubernetes 환경</strong>: Ingress Controller 또는 서비스 메시 필수 고려</li></ul><h3 id=로드-밸런서-아키텍처-유형>로드 밸런서 아키텍처 유형<a hidden class=anchor aria-hidden=true href=#로드-밸런서-아키텍처-유형>#</a></h3><table><thead><tr><th>유형</th><th>설명</th><th>사용 사례</th></tr></thead><tbody><tr><td>Single Layer LB</td><td>1 개의 L4 or L7 LB 만 구성</td><td>단순 트래픽 분산</td></tr><tr><td>Multi-Layer LB</td><td>외부 L7 + 내부 L4 구성</td><td>이중 역할 분리 (보안 + 성능)</td></tr><tr><td>Global + Regional LB</td><td>Geo DNS + 리전별 LB 구성</td><td>글로벌 사용자 대상 서비스</td></tr><tr><td>Hybrid LB</td><td>클라우드 + 온프레미스 연계</td><td>Gradual Migration, Hybrid Cloud</td></tr></tbody></table><p>각 구성은 다음 상황에 맞춰 선택하면 된다:</p><table><thead><tr><th>상황</th><th>추천 구조</th></tr></thead><tbody><tr><td>단순 내부 시스템 분산</td><td>Single Layer</td></tr><tr><td>인증/보안 처리 + 성능 분산</td><td>Multi-Layer</td></tr><tr><td>글로벌 서비스</td><td>Global + Regional</td></tr><tr><td>점진적 이전 / 하이브리드 운영</td><td>Hybrid</td></tr></tbody></table><h4 id=single-layer-lb>Single Layer LB<a hidden class=anchor aria-hidden=true href=#single-layer-lb>#</a></h4><pre class=mermaid>flowchart LR
  Client --&gt; LB1[L4 or L7 Load Balancer]
  LB1 --&gt; App1[Application Server 1]
  LB1 --&gt; App2[Application Server 2]
</pre><blockquote><p>📌 단일 LB 로 간단한 트래픽 분산 구성 (예: 소규모 서비스, 단일 AZ)</p></blockquote><h4 id=multi-layer-lb-l7--l4>Multi-Layer LB (L7 + L4)<a hidden class=anchor aria-hidden=true href=#multi-layer-lb-l7--l4>#</a></h4><pre class=mermaid>flowchart LR
  Client --&gt; L7[&#34;L7 Load Balancer (HTTPS)&#34;]
  L7 --&gt; L4[&#34;L4 Load Balancer (TCP)&#34;]
  L4 --&gt; App1[App Instance 1]
  L4 --&gt; App2[App Instance 2]
</pre><blockquote><p>📌 L7 은 인증, 라우팅, WAF 처리 / L4 는 내부 서비스로 TCP 기반 분산.<br>예: Cloudflare + NGINX → 내부 Redis, GRPC 서버 등</p></blockquote><h4 id=global--regional-lb>Global + Regional LB<a hidden class=anchor aria-hidden=true href=#global--regional-lb>#</a></h4><pre class=mermaid>flowchart LR
  Client1[Asia Client] --&gt; GeoDNS
  Client2[US Client] --&gt; GeoDNS
  GeoDNS --&gt; LB-Asia[🇰🇷 Regional LB - Asia]
  GeoDNS --&gt; LB-US[🇺🇸 Regional LB - US]
  LB-Asia --&gt; App-KR1[KR App 1]
  LB-Asia --&gt; App-KR2[KR App 2]
  LB-US --&gt; App-US1[US App 1]
  LB-US --&gt; App-US2[US App 2]
</pre><blockquote><p>📌 지역별 로드 밸런서로 트래픽을 분산.<br>예: AWS Route53 GeoDNS + 각 리전 ALB</p></blockquote><h4 id=hybrid-lb-클라우드--온프레미스-연동>Hybrid LB (클라우드 + 온프레미스 연동)<a hidden class=anchor aria-hidden=true href=#hybrid-lb-클라우드--온프레미스-연동>#</a></h4><pre class=mermaid>flowchart LR
  Client --&gt; LB-Cloud[Cloud L7 Load Balancer]
  LB-Cloud --&gt; App-Cloud[Cloud App Service]
  LB-Cloud --&gt; LB-OnPrem[On-Prem L4 Load Balancer]
  LB-OnPrem --&gt; App-OnPrem1[Legacy App 1]
  LB-OnPrem --&gt; App-OnPrem2[Legacy App 2]
</pre><blockquote><p>📌 일부 트래픽은 클라우드로, 일부는 온프레미스로 전달.<br>예: Gradual Migration, Disaster Recovery</p></blockquote><h3 id=로드-밸런서-vs-관련-컴포넌트-비교>로드 밸런서 vs. 관련 컴포넌트 비교<a hidden class=anchor aria-hidden=true href=#로드-밸런서-vs-관련-컴포넌트-비교>#</a></h3><table><thead><tr><th>항목</th><th>Load Balancer</th><th>API Gateway</th><th>Reverse Proxy</th><th>Service Mesh</th></tr></thead><tbody><tr><td>주요 목적</td><td>트래픽 분산</td><td>API 라우팅, 인증, 요금제 관리</td><td>요청 중계</td><td>MSA 내 트래픽 정책 관리</td></tr><tr><td>레이어</td><td>L4/L7</td><td>L7</td><td>L7</td><td>L7 (L4 도 일부)</td></tr><tr><td>보안 기능</td><td>SSL 종료, WAF 연동</td><td>인증, Rate Limit, JWT</td><td>SSL 종료</td><td>mTLS, ACL</td></tr><tr><td>주요 기술</td><td>Nginx, HAProxy, ELB</td><td>Kong, Apigee, AWS API GW</td><td>Nginx, Envoy</td><td>Istio, Linkerd</td></tr><tr><td>대상 범위</td><td>외부 및 내부 요청</td><td>API 중심 요청</td><td>일반 HTTP 요청</td><td>MSA 내부 통신</td></tr></tbody></table><p><strong>요약</strong>:</p><ul><li><strong>로드 밸런서</strong>는 분산 중심</li><li><strong>API 게이트웨이</strong>는 기능 중심 (API 관리)</li><li><strong>서비스 메쉬</strong>는 내부 마이크로서비스 간 제어</li></ul><h4 id=api-gateway-vs-load-balancer>API Gateway vs. Load Balancer<a hidden class=anchor aria-hidden=true href=#api-gateway-vs-load-balancer>#</a></h4><table><thead><tr><th>항목</th><th>API Gateway</th><th>Load Balancer</th></tr></thead><tbody><tr><td>주요 목적</td><td>API 요청의 라우팅, 인증, 속도 제한, 로깅 등 API 관리 기능 제공</td><td>트래픽을 여러 서버로 분산하여 고가용성과 확장성 확보</td></tr><tr><td>계층</td><td>애플리케이션 계층 (L7)</td><td>네트워크 계층 (L4) 또는 애플리케이션 계층 (L7)</td></tr><tr><td>기능</td><td>인증 및 권한 부여, 요청 변환, 속도 제한, 로깅, 모니터링 등</td><td>트래픽 분산, 헬스 체크, 세션 지속성 등</td></tr><tr><td>사용 사례</td><td>마이크로서비스 아키텍처에서 API 관리 및 보안 강화</td><td>웹 서버 앞단에서 트래픽 분산 및 서버 부하 분산</td></tr><tr><td>예시</td><td>AWS API Gateway, Kong, Apigee</td><td>NGINX, HAProxy, AWS ELB</td></tr></tbody></table><h4 id=로드-밸런서와-서비스-메시의-통합-전략>로드 밸런서와 서비스 메시의 통합 전략<a hidden class=anchor aria-hidden=true href=#로드-밸런서와-서비스-메시의-통합-전략>#</a></h4><p><strong>서비스 메시</strong>는 마이크로서비스 간의 통신을 관리하는 인프라 계층으로, <strong>로드 밸런서</strong>와 함께 사용하여 트래픽 관리, 보안, 관찰 가능성 등을 향상시킬 수 있다.</p><p>예를 들어, Istio 와 같은 서비스 메시를 사용하면 로드 밸런서를 통해 외부 트래픽을 클러스터로 전달하고, 클러스터 내에서는 서비스 메시가 트래픽을 세밀하게 제어한다. 이를 통해 트래픽 분할, A/B 테스트, 회로 차단기 등의 고급 트래픽 관리 기능을 구현할 수 있다.</p><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>핵심 항목</strong></th><th><strong>설명</strong></th><th><strong>권장사항 / 실무 가이드</strong></th></tr></thead><tbody><tr><td><strong>1. 설계 전략</strong></td><td>트래픽 예측 및 용량 계획</td><td>트래픽 피크 대비 버퍼링 및 여유 설계</td><td>최대 요청량 기준 + 30% 이상 여유 확보, Auto Scaling 연동 고려</td></tr><tr><td></td><td>로드 밸런서 유형 선택</td><td>TCP/UDP 기반 또는 HTTP 기반 분산 유형 선택</td><td>L4: 단순/속도 중시, L7: 정교한 정책 적용 가능 (URL, 헤더, 쿠키 기반)</td></tr><tr><td></td><td>알고리즘 결정</td><td>서비스 특성과 서버 리소스 기준으로 분산 알고리즘 선택</td><td>동일한 리소스 → Round-Robin, 불균등 리소스 → Weighted, 지연 민감 → Least Connection 등</td></tr><tr><td><strong>2. 고가용성 구성</strong></td><td>이중화 아키텍처 구성</td><td>단일 장애점 (SPOF) 제거를 위한 LB 이중화</td><td>Active-Active 또는 Active-Passive 구성, DNS 기반 페일오버 또는 VIP 이중화 적용</td></tr><tr><td></td><td>다중 리전/Zone 분산</td><td>리전 간 또는 가용 영역 간 분산 배치로 장애 격리</td><td>GSLB, AWS Multi-AZ ELB, Azure Zone-redundant LB 등 활용</td></tr><tr><td><strong>3. 헬스 체크</strong></td><td>체크 주기 및 조건 설정</td><td>과도한 헬스 체크는 false positive 발생 가능, 너무 느리면 감지 지연</td><td>5~15 초 간격 + 실패 임계값 (ex. 3 회 실패 시 제외), 어플리케이션 전용 <code>/health</code> 엔드포인트 구성</td></tr><tr><td></td><td>고급 상태 감지</td><td>단순 ping 외에 포트 열림, HTTP 상태 코드, 응답 시간 측정 등 포함</td><td>HTTP 200 응답 기반 체크, DB 연결 여부 포함 가능</td></tr><tr><td><strong>4. 세션 관리</strong></td><td>상태 유지 여부 판단</td><td>세션 기반 서비스는 Sticky Session 고려 필요</td><td>Cookie Affinity, IP Hash 또는 Redis 등 외부 세션 저장소 구성</td></tr><tr><td></td><td>세션 일관성 유지 전략</td><td>다중 인스턴스 간 세션 일관성 확보</td><td>Session Replication, Central Session Store 적용</td></tr><tr><td><strong>5. 보안</strong></td><td>SSL/TLS 처리 위치</td><td>인증서 및 암호화 처리 위치가 보안/성능에 영향</td><td>LB 에서 SSL 종료 (Termination) + 백엔드 평문 or 내부 인증서 재암호화</td></tr><tr><td></td><td>DDoS 및 WAF 연동</td><td>공격 대응을 위해 프런트 단에 방어 계층 배치</td><td>L7 WAF 적용, TLS 최신화, Cloudflare, AWS Shield 연동 등</td></tr><tr><td></td><td>접근 제어 및 인증</td><td>로드 밸런서에서 접근 제한, 인증 적용</td><td>인증 프록시 연동, IP 화이트리스트, OAuth2 인증 연계</td></tr><tr><td><strong>6. 모니터링/로깅</strong></td><td>성능 및 장애 지표 수집</td><td>요청 수, 지연 시간, 에러율, 처리량 등 수집 및 알림 설정</td><td>Prometheus, Grafana, ELK, CloudWatch, Datadog 등과 연동</td></tr><tr><td></td><td>감사 로그 및 추적 설정</td><td>사용자 요청 흐름 추적 및 장애 조사 가능</td><td>X-Forwarded-For, Trace ID 삽입, OpenTelemetry 연동</td></tr><tr><td><strong>7. 운영 관리</strong></td><td>자동화 및 IaC 적용</td><td>수동 설정은 오류 위험, 코드 기반 자동화로 일관성 확보</td><td>Terraform, Pulumi, AWS CDK 등 사용하여 로드밸런서 리소스 코드화</td></tr><tr><td></td><td>인증서/구성 관리 자동화</td><td>SSL 갱신, 설정 변경 등을 자동화하여 운영 부담 감소</td><td>Let&rsquo;s Encrypt, ACM, Secret Manager 기반 자동화</td></tr><tr><td></td><td>비용 최적화</td><td>트래픽과 사용량 기반 리소스 조정</td><td>예약 인스턴스, 스팟 인스턴스, 요청 기반 요금제 분석</td></tr></tbody></table><ul><li><strong>고가용성</strong>을 위해 이중화와 멀티 리전 구성은 필수</li><li><strong>세션 관리</strong>는 상태 유지 시스템에서 성능·일관성·확장성을 균형 있게 고려</li><li><strong>보안 강화</strong>는 TLS 종료 전략 + 프록시 인증·WAF 연동으로 계층화</li><li><strong>운영 자동화</strong>는 IaC, 모니터링, 인증서 관리 자동화를 통합적으로 설계</li></ul><h4 id=마이그레이션-시-고려사항>마이그레이션 시 고려사항<a hidden class=anchor aria-hidden=true href=#마이그레이션-시-고려사항>#</a></h4><table><thead><tr><th>항목</th><th>설명</th><th>권장 사항</th></tr></thead><tbody><tr><td>IP 고정성</td><td>LB 변경 시 클라이언트 DNS 갱신 필요</td><td>TTL 최소화, Blue/Green 적용</td></tr><tr><td>세션 마이그레이션</td><td>쿠키 기반 세션의 연속성 유지 필요</td><td>Session Affinity 설정 or 외부 저장소 사용</td></tr><tr><td>인증서 관리</td><td>SSL 인증서 이전 필요</td><td>ACM(AWS Certificate Manager) 자동화 권장</td></tr><tr><td>트래픽 스웜</td><td>전환 직후 트래픽 급증 가능성</td><td>Canary 방식 점진적 분산 권장</td></tr></tbody></table><h4 id=실무적-관점에서-로드-밸런서-구성-전략>실무적 관점에서 로드 밸런서 구성 전략<a hidden class=anchor aria-hidden=true href=#실무적-관점에서-로드-밸런서-구성-전략>#</a></h4><ul><li><strong>인터넷 입구</strong>에서는 <strong>WAF + L7 Load Balancer</strong>를 통해 보안 강화와 콘텐츠 기반 고도 분산 구성</li><li><strong>내부 마이크로서비스 간 통신</strong>에서는 <strong>Envoy + Istio Service Mesh</strong>를 통해 보안, 관찰 가능성, 장애 격리 수준을 강화</li></ul><table><thead><tr><th>구성 전략</th><th>목적</th><th>핵심 기능</th><th>실무 예시</th></tr></thead><tbody><tr><td><strong>외부 L7 Load Balancer</strong></td><td>외부 클라이언트 요청 처리</td><td>TLS 종료, WAF, URL 기반 라우팅, 세션 유지, 리다이렉션</td><td>AWS ALB+WAF, Cloudflare</td></tr><tr><td><strong>서비스 메시 (Envoy+Istio)</strong></td><td>내부 마이크로서비스 보안 통신</td><td>mTLS, 장애 차단, 리트라이, 정책 기반 라우팅, 중앙 관찰 가능</td><td>Istio mTLS Strict 적용</td></tr></tbody></table><h5 id=외부-트래픽-처리-전략-l7-중심>외부 트래픽 처리 전략 (L7 중심)<a hidden class=anchor aria-hidden=true href=#외부-트래픽-처리-전략-l7-중심>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-28-1><a class=lnlinks href=#hl-28-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Client ──→ DNS ──→ WAF ──→ L7 Load Balancer ──→ Application Layer
</span></span></code></pre></td></tr></table></div></div><ul><li>핵심 역할<ul><li><strong>WAF</strong>: 애플리케이션 계층 공격 차단 (XSS, SQLi 등)</li><li><strong>L7 Load Balancer</strong>: TLS 종료, 콘텐츠 기반 라우팅, 세션 지속성, 리다이렉션 등</li><li><strong>Application Layer</strong>: 실제 API/웹 서비스 처리</li></ul></li><li>활용 기술: Cloudflare, AWS ALB, NGINX</li><li>고려 사항: TLS 종료, Rate Limit, Geo Routing</li><li>구현 예시<ul><li><strong>Cloudflare + Origin 서버</strong><br>Cloudflare 의 WAF 기능 후, L7 로드밸런서에서 TLS 종료 → 후방 서버로 HTTPS 재암호화 가능</li><li><strong>AWS 구성 (ALB + WAF)</strong><br>API 요청은 DNS → AWS WAF → Application Load Balancer → 대상 그룹으로 라우팅.<br>ALB 에서 TLS 종료, 콘텐츠 기반 라우팅, WAF 연동</li><li><strong>온프레미스 / NGINX + ModSecurity</strong><br>NGINX 에서 TLS 종료 후 ModSecurity 기반 WAF 통과 → 백엔드로 전송.<br>HAProxy + Cloudflare 조합 예시에서 &ldquo;Flexible SSL&rdquo; 모드로 TLS 재설정도 가능</li></ul></li></ul><h5 id=내부-마이크로서비스-간-통신-전략-l4--메쉬>내부 마이크로서비스 간 통신 전략 (L4 + 메쉬)<a hidden class=anchor aria-hidden=true href=#내부-마이크로서비스-간-통신-전략-l4--메쉬>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-29-1><a class=lnlinks href=#hl-29-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Service A ──→ Sidecar (Envoy) ──→ Istio Mesh ──→ Sidecar (Service B)
</span></span></code></pre></td></tr></table></div></div><ul><li>핵심 역할<ul><li><strong>Envoy Sidecars</strong>: 모든 서비스 호출을 프록시하며 TLS 종료, 라우팅, 리트라이, 장애 차단 처리</li><li><strong>Istio Control Plane</strong>: mTLS 인증 설정, 트래픽 정책, 관찰 가능성 및 보안 제어</li></ul></li></ul><ul><li><strong>Service Mesh</strong>: 트래픽 암호화, 정책 기반 통신 통제, 장애 격리</li></ul><ul><li>활용 기술: Envoy Proxy + Istio Control Plane</li><li>고려 사항: 정책 기반 라우팅, mTLS, 장애 격리</li><li>구현 예시<ul><li><p><strong>Istio Sidecar 모드</strong><br>각 Pod 에 Envoy 사이드카 추가하여 트래픽을 모두 제어.<br>Control Plane 에서 mTLS 적용 (Strict, Permissive 등 설정)</p></li><li><p><strong>mTLS 설정 예시 (Strict mode)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-30-1><a class=lnlinks href=#hl-30-1>1</a>
</span><span class=lnt id=hl-30-2><a class=lnlinks href=#hl-30-2>2</a>
</span><span class=lnt id=hl-30-3><a class=lnlinks href=#hl-30-3>3</a>
</span><span class=lnt id=hl-30-4><a class=lnlinks href=#hl-30-4>4</a>
</span><span class=lnt id=hl-30-5><a class=lnlinks href=#hl-30-5>5</a>
</span><span class=lnt id=hl-30-6><a class=lnlinks href=#hl-30-6>6</a>
</span><span class=lnt id=hl-30-7><a class=lnlinks href=#hl-30-7>7</a>
</span><span class=lnt id=hl-30-8><a class=lnlinks href=#hl-30-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>security.istio.io/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>PeerAuthentication</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>default</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>foo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mtls</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class=l>STRICT</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>적용 후 클라이언트 사이드카가 없는 요청은 차단됨.</p></li><li><p><strong>Envoy 기능</strong><br>사이드카는 L4/L7 기능 모두 제공하며, 라우팅, 재시도, 장애 차단, 메트릭 수집 등 다양한 기능 수행</p></li></ul></li></ul><h4 id=로드-밸런서-기반-블루---그린-배포-및-카나리-배포-전략>로드 밸런서 기반 블루 - 그린 배포 및 카나리 배포 전략<a hidden class=anchor aria-hidden=true href=#로드-밸런서-기반-블루---그린-배포-및-카나리-배포-전략>#</a></h4><p><strong>블루 - 그린 배포</strong>는 두 개의 환경 (블루와 그린) 을 유지하면서 새로운 버전을 배포하고, 트래픽을 새로운 환경으로 전환하는 방식이다.<br><strong>카나리 배포</strong>는 새로운 버전을 소수의 사용자에게 먼저 배포하여 문제가 없는지 확인한 후 전체 사용자에게 확장하는 방식이다.</p><p>로드 밸런서를 사용하면 트래픽을 특정 버전의 서비스로 분산시켜 이러한 배포 전략을 구현할 수 있다.</p><h4 id=로드-밸런서-자동화>로드 밸런서 자동화<a hidden class=anchor aria-hidden=true href=#로드-밸런서-자동화>#</a></h4><p>**Infrastructure as Code (IaC)**와 <strong>GitOps</strong>를 활용하여 로드 밸런서 구성을 자동화할 수 있다.</p><p>예를 들어, Terraform 을 사용하여 AWS 의 Application Load Balancer(ALB) 를 정의하고, Argo CD 를 통해 Git 리포지토리의 변경 사항을 자동으로 클러스터에 적용할 수 있다.<br>이를 통해 인프라 변경의 추적 가능성과 일관성을 확보할 수 있다.</p><h5 id=기술-적용-예시>기술 적용 예시<a hidden class=anchor aria-hidden=true href=#기술-적용-예시>#</a></h5><ul><li>Terraform: AWS ALB, Target Group, Listener 설정</li><li>Helm: K8s Ingress Controller 자동 배포</li><li>Ansible: NGINX 설정 자동화 및 롤링 재시작</li></ul><p><strong>Terraform 예시 (AWS ALB 설정)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-31-1><a class=lnlinks href=#hl-31-1> 1</a>
</span><span class=lnt id=hl-31-2><a class=lnlinks href=#hl-31-2> 2</a>
</span><span class=lnt id=hl-31-3><a class=lnlinks href=#hl-31-3> 3</a>
</span><span class=lnt id=hl-31-4><a class=lnlinks href=#hl-31-4> 4</a>
</span><span class=lnt id=hl-31-5><a class=lnlinks href=#hl-31-5> 5</a>
</span><span class=lnt id=hl-31-6><a class=lnlinks href=#hl-31-6> 6</a>
</span><span class=lnt id=hl-31-7><a class=lnlinks href=#hl-31-7> 7</a>
</span><span class=lnt id=hl-31-8><a class=lnlinks href=#hl-31-8> 8</a>
</span><span class=lnt id=hl-31-9><a class=lnlinks href=#hl-31-9> 9</a>
</span><span class=lnt id=hl-31-10><a class=lnlinks href=#hl-31-10>10</a>
</span><span class=lnt id=hl-31-11><a class=lnlinks href=#hl-31-11>11</a>
</span><span class=lnt id=hl-31-12><a class=lnlinks href=#hl-31-12>12</a>
</span><span class=lnt id=hl-31-13><a class=lnlinks href=#hl-31-13>13</a>
</span><span class=lnt id=hl-31-14><a class=lnlinks href=#hl-31-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-hcl data-lang=hcl><span class=line><span class=cl><span class=k>resource</span> <span class=s2>&#34;aws_lb&#34; &#34;app&#34;</span> {
</span></span><span class=line><span class=cl><span class=n>  name</span>               <span class=o>=</span> <span class=s2>&#34;my-app-lb&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  internal</span>           <span class=o>=</span> <span class=kt>false</span>
</span></span><span class=line><span class=cl><span class=n>  load_balancer_type</span> <span class=o>=</span> <span class=s2>&#34;application&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  subnets</span>            <span class=o>=</span> <span class=k>var</span><span class=p>.</span><span class=k>public_subnets</span>
</span></span><span class=line><span class=cl><span class=n>  security_groups</span>    <span class=o>=</span> <span class=p>[</span><span class=k>aws_security_group</span><span class=p>.</span><span class=k>lb</span><span class=p>.</span><span class=k>id</span><span class=p>]</span>
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>resource</span> <span class=s2>&#34;aws_lb_target_group&#34; &#34;app_tg&#34;</span> {
</span></span><span class=line><span class=cl><span class=n>  name</span>     <span class=o>=</span> <span class=s2>&#34;app-target-group&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  port</span>     <span class=o>=</span> <span class=m>80</span>
</span></span><span class=line><span class=cl><span class=n>  protocol</span> <span class=o>=</span> <span class=s2>&#34;HTTP&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  vpc_id</span>   <span class=o>=</span> <span class=k>var</span><span class=p>.</span><span class=k>vpc_id</span>
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><h3 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th><th><strong>권장 사항 / Best Practice</strong></th></tr></thead><tbody><tr><td><strong>1. 연결 및 네트워크 최적화</strong></td><td>Keep-Alive / 연결 풀링</td><td>백엔드 서버와의 연결을 효율적으로 유지하여 성능 향상</td><td>Keep-Alive 활성화, 연결 풀 크기 조절, 타임아웃 설정</td></tr><tr><td></td><td>네트워크 지연 최소화</td><td>지역 간 Latency 및 오버헤드로 인한 지연 발생</td><td>Edge LB 배치, 내부망/외부망 분리, MTU 최적화, Anycast 활용</td></tr><tr><td></td><td>HTTP/2 / QUIC 활용</td><td>멀티플렉싱, 헤더 압축 등으로 요청 처리 효율 증대</td><td>HTTP/2, HTTP/3 지원 LB 구성, 백엔드 호환성 확인</td></tr><tr><td><strong>2. 트래픽 처리 및 분산 알고리즘</strong></td><td>분산 알고리즘 선택</td><td>트래픽 유형 및 서비스 특성에 따라 효율적 로드 분산 방식 선택</td><td>Round Robin, Least Connection, IP Hash, AI 기반 Adaptive 방식</td></tr><tr><td></td><td>요청 우선순위 지정</td><td>중요 요청에 우선 자원을 할당하여 QoS 확보</td><td>QoS 큐 설정, 트래픽 필터 기반 우선순위 정책 적용</td></tr><tr><td></td><td>과부하 보호</td><td>과도한 요청 또는 DoS 상황에서 서버 보호 필요</td><td>Rate Limiting, Queue Length 제한, Backpressure 적용</td></tr><tr><td><strong>3. 콘텐츠 처리 및 캐싱 최적화</strong></td><td>캐싱 전략</td><td>정적 콘텐츠 캐싱을 통한 응답 시간 단축 및 백엔드 부하 감소</td><td>TTL 설정, CDN 연계, ETag/Last-Modified 기반 캐시 무효화 정책 구현</td></tr><tr><td></td><td>콘텐츠 압축</td><td>네트워크 트래픽 최적화를 위한 압축 사용</td><td>Gzip 또는 Brotli 압축 설정, 압축 유형 및 수준 조절, CPU 사용량 밸런스</td></tr><tr><td></td><td>버퍼 최적화</td><td>대용량 콘텐츠 처리 시 효율적인 버퍼 관리 필요</td><td>요청/응답 버퍼 크기 조정, 메모리 모니터링, Chunked Encoding 사용</td></tr><tr><td><strong>4. TLS/SSL 최적화</strong></td><td>SSL 종료 위치</td><td>암호화 해제 위치에 따라 성능 및 보안 영향</td><td>L7 LB 에서 종료 → 백엔드 오프로드, TLS 재암호화 여부 판단</td></tr><tr><td></td><td>TLS 성능 최적화</td><td>암복호화는 CPU 자원을 크게 소모함</td><td>TLS 세션 재사용, OCSP 스테이플링, TLS offload (HW 가속기 or NIC 활용)</td></tr><tr><td></td><td>인증서 관리 자동화</td><td>인증서 갱신/배포가 지연되면 장애 발생 가능</td><td>Cert Manager, ACME 기반 자동화, Wildcard 인증서 적용</td></tr><tr><td><strong>5. 리소스 및 인프라 계획</strong></td><td>리소스 할당</td><td>인스턴스, CPU, 메모리 등 자원 효율 분배</td><td>사용률 기반 가중치 설정, 스케줄러/워커 분리, 서버 스레드 튜닝</td></tr><tr><td></td><td>오토스케일링</td><td>트래픽 급증 시 자동 확장 대응</td><td>CPU/Memory 임계치 기반 Horizontal Pod Autoscaler 또는 Cloud LB Auto-Scaling 연동</td></tr><tr><td></td><td>Capacity Planning</td><td>최대 트래픽/사용량 대비 여유 자원 확보</td><td>피크 대비 +30~50% 리소스 확보, 정기적 재산정</td></tr><tr><td><strong>6. 운영 관리 및 관측성</strong></td><td>Health Check / 장애 감지</td><td>느린 헬스체크는 장애 서버에 트래픽을 지속적으로 보낼 수 있음</td><td>2~3 회 실패 시 제거, TCP/HTTP 등 다중 방식 체크 구성</td></tr><tr><td></td><td>로깅 및 모니터링</td><td>실시간 로깅은 성능에 영향, 지연 발생 가능</td><td>비동기 로깅, Fluent Bit, Loki, Prometheus/Grafana 통합, OpenTelemetry 기반 트레이싱 도입</td></tr><tr><td></td><td>정책 및 구성 일관성</td><td>다수 LB 운영 시 정책 충돌 또는 누락 발생</td><td>GitOps 기반 Config 관리, Audit Log 도입, 통합 Config Control Plane 활용</td></tr></tbody></table><h3 id=로드-밸런서와-cdn-연계-아키텍처-설계>로드 밸런서와 CDN 연계 아키텍처 설계<a hidden class=anchor aria-hidden=true href=#로드-밸런서와-cdn-연계-아키텍처-설계>#</a></h3><p>CDN (Content Delivery Network) 은 정적 콘텐츠를 전 세계 엣지 서버에 캐싱하여 사용자에게 빠르게 전달한다.<br>로드 밸런서와 함께 사용할 경우, 다음과 같은 방식으로 협력한다:</p><ol><li><strong>CDN → Load Balancer → Backend</strong></li><li>CDN 은 정적 콘텐츠 처리</li><li>LB 는 동적 콘텐츠 및 세션 기반 요청 처리</li></ol><h4 id=아키텍처-설계-예시>아키텍처 설계 예시<a hidden class=anchor aria-hidden=true href=#아키텍처-설계-예시>#</a></h4><pre class=mermaid>flowchart LR
    User --&gt; EdgeCDN[Cloudflare CDN / Akamai / AWS CloudFront]
    EdgeCDN --&gt; LB[&#34;Load Balancer (ALB/Nginx)&#34;]
    LB --&gt; App1[Web App Server]
    LB --&gt; App2[API Server]
</pre><h4 id=구성-전략>구성 전략<a hidden class=anchor aria-hidden=true href=#구성-전략>#</a></h4><table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>TLS 종료</td><td>CDN 에서 SSL 종료 후 → LB 까지 TLS 재암호화 가능</td></tr><tr><td>캐시 정책</td><td>정적 리소스 (HTML/CSS/JS) 는 CDN 캐시 / API 는 BYPASS</td></tr><tr><td>도메인 전략</td><td><a href=http://www.domain.com>www.domain.com</a> → CDN, api.domain.com → LB 직접</td></tr><tr><td>오리진 보호</td><td>CDN 에서만 LB 에 접근 가능하도록 방화벽 제어</td></tr></tbody></table><h4 id=실무-팁>실무 팁<a hidden class=anchor aria-hidden=true href=#실무-팁>#</a></h4><ul><li>CDN 의 IP Range 만 허용한 WAF 설정 필요</li><li>동적 API 요청은 CDN 캐시 무효화 적용</li><li>Cache-Control 헤더 정책에 따라 성능 차이 큼</li></ul><h3 id=멀티-클라우드-환경에서의-글로벌-로드-밸런서-설계>멀티 클라우드 환경에서의 글로벌 로드 밸런서 설계<a hidden class=anchor aria-hidden=true href=#멀티-클라우드-환경에서의-글로벌-로드-밸런서-설계>#</a></h3><p>멀티 클라우드 (Global) 환경에서 로드 밸런싱은 <strong>Region 간 트래픽 분산 + DR (Disaster Recovery)</strong> 전략을 포함해야 한다.<br>핵심 요소는:</p><ol><li><strong>DNS 기반 지리 라우팅 (Geo DNS)</strong></li><li><strong>Anycast 기반 글로벌 LB</strong></li><li><strong>Cross-region HA 구성</strong></li></ol><h4 id=예시-아키텍처-aws-gcp-혼합-환경>예시 아키텍처: AWS-GCP 혼합 환경<a hidden class=anchor aria-hidden=true href=#예시-아키텍처-aws-gcp-혼합-환경>#</a></h4><pre class=mermaid>flowchart TD
    User --&gt; GeoDNS
    GeoDNS --&gt; AWS_GL[AWS Global Accelerator]
    GeoDNS --&gt; GCP_LB[GCP Global HTTP LB]

    AWS_GL --&gt; AWS_App1[us-east-1 App]
    GCP_LB --&gt; GCP_App2[asia-east1 App]
</pre><h4 id=주요-구성-요소-및-전략>주요 구성 요소 및 전략<a hidden class=anchor aria-hidden=true href=#주요-구성-요소-및-전략>#</a></h4><table><thead><tr><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>DNS 라우팅</td><td>Route 53, Cloud DNS → 지리 기반/헬스 기반 라우팅</td></tr><tr><td>글로벌 트래픽 분산</td><td>AWS Global Accelerator, GCP Global LB</td></tr><tr><td>복제</td><td>데이터베이스 복제/동기화 고려 (Aurora Global DB 등)</td></tr><tr><td>장애 대응</td><td>각 클라우드에 기본/보조 배포 + 자동 전환 정책</td></tr><tr><td>보안</td><td>각 클라우드 간 IAM 정책 통합 또는 Zero Trust 설계</td></tr></tbody></table><h4 id=실무-팁-1>실무 팁<a hidden class=anchor aria-hidden=true href=#실무-팁-1>#</a></h4><ul><li>DNS TTL 을 낮게 유지해야 신속한 전환 가능</li><li>Cloudflare Tunnel, Akamai EdgeWorkers 등 글로벌 연동도 고려</li><li>상태 기반 전환 로직 (BGP, DNS Failover) 테스트 중요</li></ul><h3 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h3><table><thead><tr><th><strong>분야</strong></th><th><strong>시스템 대상</strong></th><th><strong>사용 기술 / 구성 요소</strong></th><th><strong>적용 방식</strong></th><th><strong>주요 효과</strong></th></tr></thead><tbody><tr><td><strong>웹 서비스</strong></td><td>웹 서버 클러스터</td><td>NGINX, HAProxy, Apache, AWS ALB</td><td>L7 HTTP 기반 트래픽 분산, 정적/동적 콘텐츠 분리</td><td>고가용성 확보, 응답 속도 향상, 트래픽 급증 대응</td></tr><tr><td><strong>API 서비스</strong></td><td>마이크로서비스 API 게이트웨이</td><td>Kong, Apigee, AWS API Gateway, Envoy</td><td>API Gateway 통한 라우팅, 인증, 속도 제한, 로깅</td><td>인증/보안 강화, 마이크로서비스 분리 구조 대응, 호출 분산</td></tr><tr><td><strong>DB/Storage</strong></td><td>RDBMS (MySQL, PostgreSQL)</td><td>ProxySQL, MySQL Router, HAProxy</td><td>읽기 전용 요청 복제본으로 분산, 쓰기 요청은 마스터로 고정</td><td>읽기 확장성 증가, 마스터 보호, 페일오버 기반 고가용성</td></tr><tr><td><strong>실시간 서비스</strong></td><td>스트리밍 서버, 게임 서버</td><td>Wowza, NGINX RTMP, HAProxy, LVS, WebRTC</td><td>TCP/UDP 기반 분산 처리, 지역별 사용자 트래픽 우선 라우팅</td><td>지연 시간 최소화, 버퍼링 감소, 높은 동접 대응</td></tr><tr><td><strong>CDN/Edge</strong></td><td>정적 자산 / 글로벌 사용자</td><td>Cloudflare, Akamai, Fastly, Anycast + GeoDNS</td><td>사용자의 지리 기반 라우팅, 에지 서버 캐싱</td><td>지연 최소화, DDoS 보호, 오리진 부하 감소</td></tr><tr><td><strong>Kubernetes/컨테이너</strong></td><td>컨테이너화된 MSA 환경</td><td>Ingress Controller, Istio, Linkerd, Gateway API</td><td>서비스 디스커버리 + L7 트래픽 라우팅 (Path, Header, Weight)</td><td>선언형 구성, 트래픽 세분화, 카나리/블루그린 배포 지원</td></tr><tr><td><strong>서버리스 및 이벤트</strong></td><td>Lambda, Cloud Functions</td><td>AWS ALB + Lambda, EventBridge</td><td>HTTP 트리거 기반 호출 분산, 서버리스 오토스케일 처리</td><td>비용 절감, 이벤트 기반 병렬 처리 최적화</td></tr><tr><td><strong>하이브리드 클라우드</strong></td><td>온프레미스 + 퍼블릭 클라우드</td><td>F5 BIG-IP, Citrix ADC, GSLB</td><td>여러 인프라 환경 간 트래픽 균형, 재해 복구용 이중화</td><td>클라우드 벤더 독립성 확보, DR 구축, 자원 효율성 증대</td></tr><tr><td><strong>금융/보안 강화</strong></td><td>인증 서버, 보안 API</td><td>NGINX (mTLS), Redis 세션 클러스터, WAF 연동</td><td>TLS 종료, 세션 공유, Bot 방어, 요청 필터링 적용</td><td>보안 강화, 세션 일관성 유지, 인증 성능 향상</td></tr></tbody></table><ul><li>**L7 기반 (HTTP, API, CDN)**은 트래픽 특성에 따라 경로 기반, 헤더 기반, 지역 기반 분산에 강점</li><li>**L4 기반 (TCP, UDP, DB)**은 레이어 낮은 수준에서 <strong>지연 최소화</strong>, <strong>세션 유지</strong>, <strong>내부 서비스 분산</strong>에 적합</li><li><strong>멀티 클라우드 / 하이브리드 환경</strong>에서는 <strong>벤더 중립적 LB</strong>와 <strong>재해 복구 구성</strong>이 중요</li><li><strong>Kubernetes 기반</strong>에서는 <strong>Ingress + Gateway + Service Mesh</strong> 조합이 표준 아키텍처로 정착</li><li><strong>서버리스 및 이벤트 기반 구조</strong>에서는 LB 와 API Gateway 를 조합해 <strong>비용 최적화 + 비동기 트리거</strong>를 달성</li></ul><h3 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h3><h4 id=사례-1-api-서비스-기반-l7-load-balancer-활용>사례 1: API 서비스 기반 L7 Load Balancer 활용<a hidden class=anchor aria-hidden=true href=#사례-1-api-서비스-기반-l7-load-balancer-활용>#</a></h4><p><strong>구성:</strong> 외부 클라이언트 → L7 Load Balancer → REST API 서버 3 대</p><p><strong>Workflow:</strong></p><ol><li>Client 가 HTTP 요청 → L7 Load Balancer 가 요청 경로/쿠키 등 분석</li><li>Health Check 통과 서버만을 대상으로 분산</li><li>스티키 세션 (flask_login 등) 필요 시 쿠키 기반 할당</li><li>서버 장애시 자동 제외, 응답시간 모니터링</li></ol><pre class=mermaid>flowchart TD
    Client--&gt;|HTTP 요청| LB[L7 Load Balancer]
    LB--&gt;|분산| API1[API Server1]
    LB--&gt;|분산| API2[API Server2]
    LB--&gt;|분산| API3[API Server3]
    API1--&gt;|응답| LB
    API2--&gt;|응답| LB
    API3--&gt;|응답| LB
    LB--&gt;|최종 응답| Client
</pre><p><strong>LB 적용 vs 미적용 차이:</strong></p><ul><li><strong>적용:</strong> 서버 증설·장애시 무중단 대응, 응답 속도 향상</li><li><strong>미적용:</strong> 특정 서버에 트래픽 집중, 서버 장애 시 서비스 불가</li></ul><h4 id=사례-2-saas-플랫폼의-글로벌-트래픽-분산-및-api-서비스-가용성-확보>사례 2: SaaS 플랫폼의 글로벌 트래픽 분산 및 API 서비스 가용성 확보<a hidden class=anchor aria-hidden=true href=#사례-2-saas-플랫폼의-글로벌-트래픽-분산-및-api-서비스-가용성-확보>#</a></h4><pre class=mermaid>flowchart LR
  subgraph Users
    U1[&#34;User A (Asia)&#34;]
    U2[&#34;User B (EU)&#34;]
  end
  DNS[DNS / GSLB]
  subgraph Region Asia
    NLB1[&#34;TCP LB (NLB)&#34;]
    ALB1[&#34;App LB (ALB)&#34;]
    AppA1[Service A]
    AppA2[Service A]
  end
  subgraph Region EU
    NLB2[TCP LB]
    ALB2[App LB]
    AppB1[Service A]
    AppB2[Service A]
  end

  U1 --&gt; DNS
  U2 --&gt; DNS

  DNS --&gt; NLB1
  DNS --&gt; NLB2

  NLB1 --&gt; ALB1
  NLB2 --&gt; ALB2

  ALB1 --&gt; AppA1 &amp; AppA2
  ALB2 --&gt; AppB1 &amp; AppB2
</pre><p><strong>Workflow</strong>:</p><ol><li>글로벌 유저 요청 → GSLB 기반 각 지역 NLB 로 라우팅</li><li>L7 LB(ALB) 통해 API 핸들링, TLS 처리, 쿠키/헤더 기반 라우팅 수행</li><li>헬스 체크 실패 시 자동 리전 장애 전환</li><li>모니터링 지표 기반 용량 예측 및 오토스케일 운영</li></ol><h4 id=사례-3-모바일-뱅킹-서비스>사례 3: 모바일 뱅킹 서비스<a hidden class=anchor aria-hidden=true href=#사례-3-모바일-뱅킹-서비스>#</a></h4><p><strong>시나리오</strong>: 모바일 뱅킹 앱에서 사용자가 로그인 및 거래를 수행할 때, 고가용성과 세션 유지를 보장해야 한다.</p><p><strong>시스템 구성</strong>:</p><ul><li>사용자는 모바일 앱을 통해 인증 요청을 보냄</li><li>요청은 AWS ALB 로 전달되어 Nginx L7 Proxy 로 분산</li><li>인증 서버는 Redis 기반 세션 저장소와 연결됨</li></ul><pre class=mermaid>graph TD
    Client(Mobile App)
    LB[AWS ALB]
    Proxy[Nginx L7 Proxy]
    Auth1[Auth Server 1]
    Auth2[Auth Server 2]
    Redis[&#34;Session Store (Redis)&#34;]

    Client --&gt; LB --&gt; Proxy
    Proxy --&gt; Auth1
    Proxy --&gt; Auth2
    Auth1 --&gt; Redis
    Auth2 --&gt; Redis
</pre><p><strong>Workflow</strong>:</p><ul><li>사용자가 로그인 → ALB 라우팅 → Nginx Proxy → Auth Server</li><li>세션은 Redis 에 저장되어 서버 간 공유됨</li><li>장애 시 헬스체크 통해 자동 우회</li></ul><p><strong>역할</strong>:</p><ul><li>ALB: 트래픽 분산 및 HTTPS 종료</li><li>Nginx: 세션 유지, 라우팅</li><li>Redis: 인증 상태 공유 저장소</li></ul><p><strong>유무에 따른 차이점</strong>:</p><ul><li><strong>로드 밸런서 없음</strong>: 단일 서버 장애 시 전체 서비스 다운</li><li><strong>로드 밸런서 있음</strong>: 유연한 확장 및 장애 회복 가능</li></ul><p><strong>구현 예시 (Nginx 설정)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-37-1><a class=lnlinks href=#hl-37-1> 1</a>
</span><span class=lnt id=hl-37-2><a class=lnlinks href=#hl-37-2> 2</a>
</span><span class=lnt id=hl-37-3><a class=lnlinks href=#hl-37-3> 3</a>
</span><span class=lnt id=hl-37-4><a class=lnlinks href=#hl-37-4> 4</a>
</span><span class=lnt id=hl-37-5><a class=lnlinks href=#hl-37-5> 5</a>
</span><span class=lnt id=hl-37-6><a class=lnlinks href=#hl-37-6> 6</a>
</span><span class=lnt id=hl-37-7><a class=lnlinks href=#hl-37-7> 7</a>
</span><span class=lnt id=hl-37-8><a class=lnlinks href=#hl-37-8> 8</a>
</span><span class=lnt id=hl-37-9><a class=lnlinks href=#hl-37-9> 9</a>
</span><span class=lnt id=hl-37-10><a class=lnlinks href=#hl-37-10>10</a>
</span><span class=lnt id=hl-37-11><a class=lnlinks href=#hl-37-11>11</a>
</span><span class=lnt id=hl-37-12><a class=lnlinks href=#hl-37-12>12</a>
</span><span class=lnt id=hl-37-13><a class=lnlinks href=#hl-37-13>13</a>
</span><span class=lnt id=hl-37-14><a class=lnlinks href=#hl-37-14>14</a>
</span><span class=lnt id=hl-37-15><a class=lnlinks href=#hl-37-15>15</a>
</span><span class=lnt id=hl-37-16><a class=lnlinks href=#hl-37-16>16</a>
</span><span class=lnt id=hl-37-17><a class=lnlinks href=#hl-37-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=line><span class=cl><span class=k>http</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kn>upstream</span> <span class=s>auth_backend</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kn>server</span> <span class=n>auth1.internal</span><span class=p>:</span><span class=mi>8080</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>server</span> <span class=n>auth2.internal</span><span class=p>:</span><span class=mi>8080</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kn>server</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kn>listen</span> <span class=mi>443</span> <span class=s>ssl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>server_name</span> <span class=s>bank.example.com</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kn>location</span> <span class=s>/login</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_pass</span> <span class=s>http://auth_backend</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_set_header</span> <span class=s>Host</span> <span class=nv>$host</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kn>proxy_cookie_path</span> <span class=s>/</span> <span class=s>&#34;/</span><span class=p>;</span> <span class=kn>HttpOnly</span><span class=p>;</span> <span class=kn>Secure&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=사례-4-e-commerce-플랫폼의-로드-밸런싱-구현>사례 4: E-commerce 플랫폼의 로드 밸런싱 구현<a hidden class=anchor aria-hidden=true href=#사례-4-e-commerce-플랫폼의-로드-밸런싱-구현>#</a></h4><p><strong>시스템 구성</strong>:</p><ul><li><strong>프론트엔드</strong>: React.js 기반 SPA</li><li><strong>로드 밸런서</strong>: AWS Application Load Balancer (L7)</li><li><strong>백엔드</strong>: Node.js 서버 클러스터 (Auto Scaling Group)</li><li><strong>데이터베이스</strong>: MySQL 마스터 - 슬레이브 구성</li></ul><pre class=mermaid>graph TB
    subgraph &#34;사용자&#34;
        A[웹 브라우저]
        B[모바일 앱]
    end
    
    subgraph &#34;AWS Cloud&#34;
        C[Route 53 DNS]
        D[CloudFront CDN]
        E[Application Load Balancer]
        
        subgraph &#34;Auto Scaling Group&#34;
            F[웹 서버 1]
            G[웹 서버 2]
            H[웹 서버 3]
        end
        
        I[RDS MySQL Master]
        J[RDS MySQL Read Replica]
    end
    
    A --&gt; C
    B --&gt; C
    C --&gt; D
    D --&gt; E
    E --&gt; F
    E --&gt; G
    E --&gt; H
    F --&gt; I
    G --&gt; I
    H --&gt; I
    F --&gt; J
    G --&gt; J
    H --&gt; J
</pre><p><strong>Workflow</strong>:</p><ol><li><strong>DNS 해석</strong>: Route 53 을 통한 도메인 해석</li><li><strong>CDN 처리</strong>: CloudFront 에서 정적 콘텐츠 서빙</li><li><strong>로드 밸런싱</strong>: ALB 에서 동적 콘텐츠 요청을 서버 클러스터로 분산</li><li><strong>오토 스케일링</strong>: 트래픽 증가 시 자동으로 서버 인스턴스 추가</li><li><strong>데이터베이스 분산</strong>: 읽기 요청은 Read Replica 로, 쓰기 요청은 Master 로 분산</li></ol><p><strong>로드 밸런서의 역할</strong>:</p><ul><li><strong>트래픽 분산</strong>: 들어오는 HTTP/HTTPS 요청을 3 개 서버에 균등 분배</li><li><strong>Health Check</strong>: 각 서버의 <code>/health</code> 엔드포인트를 주기적으로 확인</li><li><strong>SSL 터미네이션</strong>: SSL 인증서 관리 및 HTTPS 트래픽 처리</li><li><strong>세션 관리</strong>: 쿠키 기반 세션 스티키니스 제공</li></ul><p><strong>로드 밸런서 유무에 따른 차이점</strong>:</p><ul><li><strong>로드 밸런서 있는 경우</strong>:<ul><li>트래픽 분산으로 서버당 부하 33% 분배</li><li>한 서버 장애 시에도 서비스 지속 (66% 용량 유지)</li><li>자동 확장으로 피크 시간 대응 가능</li><li>SSL 중앙 관리로 보안 강화</li></ul></li><li><strong>로드 밸런서 없는 경우</strong>:<ul><li>단일 서버에 모든 트래픽 집중</li><li>서버 장애 시 전체 서비스 중단</li><li>수동 확장으로 인한 확장성 제한</li><li>각 서버별 SSL 인증서 관리 필요</li></ul></li></ul><p><strong>구현 예시</strong>:</p><ul><li><p>Python 을 이용한 간단한 HTTP 로드 밸런서</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-39-1><a class=lnlinks href=#hl-39-1>  1</a>
</span><span class=lnt id=hl-39-2><a class=lnlinks href=#hl-39-2>  2</a>
</span><span class=lnt id=hl-39-3><a class=lnlinks href=#hl-39-3>  3</a>
</span><span class=lnt id=hl-39-4><a class=lnlinks href=#hl-39-4>  4</a>
</span><span class=lnt id=hl-39-5><a class=lnlinks href=#hl-39-5>  5</a>
</span><span class=lnt id=hl-39-6><a class=lnlinks href=#hl-39-6>  6</a>
</span><span class=lnt id=hl-39-7><a class=lnlinks href=#hl-39-7>  7</a>
</span><span class=lnt id=hl-39-8><a class=lnlinks href=#hl-39-8>  8</a>
</span><span class=lnt id=hl-39-9><a class=lnlinks href=#hl-39-9>  9</a>
</span><span class=lnt id=hl-39-10><a class=lnlinks href=#hl-39-10> 10</a>
</span><span class=lnt id=hl-39-11><a class=lnlinks href=#hl-39-11> 11</a>
</span><span class=lnt id=hl-39-12><a class=lnlinks href=#hl-39-12> 12</a>
</span><span class=lnt id=hl-39-13><a class=lnlinks href=#hl-39-13> 13</a>
</span><span class=lnt id=hl-39-14><a class=lnlinks href=#hl-39-14> 14</a>
</span><span class=lnt id=hl-39-15><a class=lnlinks href=#hl-39-15> 15</a>
</span><span class=lnt id=hl-39-16><a class=lnlinks href=#hl-39-16> 16</a>
</span><span class=lnt id=hl-39-17><a class=lnlinks href=#hl-39-17> 17</a>
</span><span class=lnt id=hl-39-18><a class=lnlinks href=#hl-39-18> 18</a>
</span><span class=lnt id=hl-39-19><a class=lnlinks href=#hl-39-19> 19</a>
</span><span class=lnt id=hl-39-20><a class=lnlinks href=#hl-39-20> 20</a>
</span><span class=lnt id=hl-39-21><a class=lnlinks href=#hl-39-21> 21</a>
</span><span class=lnt id=hl-39-22><a class=lnlinks href=#hl-39-22> 22</a>
</span><span class=lnt id=hl-39-23><a class=lnlinks href=#hl-39-23> 23</a>
</span><span class=lnt id=hl-39-24><a class=lnlinks href=#hl-39-24> 24</a>
</span><span class=lnt id=hl-39-25><a class=lnlinks href=#hl-39-25> 25</a>
</span><span class=lnt id=hl-39-26><a class=lnlinks href=#hl-39-26> 26</a>
</span><span class=lnt id=hl-39-27><a class=lnlinks href=#hl-39-27> 27</a>
</span><span class=lnt id=hl-39-28><a class=lnlinks href=#hl-39-28> 28</a>
</span><span class=lnt id=hl-39-29><a class=lnlinks href=#hl-39-29> 29</a>
</span><span class=lnt id=hl-39-30><a class=lnlinks href=#hl-39-30> 30</a>
</span><span class=lnt id=hl-39-31><a class=lnlinks href=#hl-39-31> 31</a>
</span><span class=lnt id=hl-39-32><a class=lnlinks href=#hl-39-32> 32</a>
</span><span class=lnt id=hl-39-33><a class=lnlinks href=#hl-39-33> 33</a>
</span><span class=lnt id=hl-39-34><a class=lnlinks href=#hl-39-34> 34</a>
</span><span class=lnt id=hl-39-35><a class=lnlinks href=#hl-39-35> 35</a>
</span><span class=lnt id=hl-39-36><a class=lnlinks href=#hl-39-36> 36</a>
</span><span class=lnt id=hl-39-37><a class=lnlinks href=#hl-39-37> 37</a>
</span><span class=lnt id=hl-39-38><a class=lnlinks href=#hl-39-38> 38</a>
</span><span class=lnt id=hl-39-39><a class=lnlinks href=#hl-39-39> 39</a>
</span><span class=lnt id=hl-39-40><a class=lnlinks href=#hl-39-40> 40</a>
</span><span class=lnt id=hl-39-41><a class=lnlinks href=#hl-39-41> 41</a>
</span><span class=lnt id=hl-39-42><a class=lnlinks href=#hl-39-42> 42</a>
</span><span class=lnt id=hl-39-43><a class=lnlinks href=#hl-39-43> 43</a>
</span><span class=lnt id=hl-39-44><a class=lnlinks href=#hl-39-44> 44</a>
</span><span class=lnt id=hl-39-45><a class=lnlinks href=#hl-39-45> 45</a>
</span><span class=lnt id=hl-39-46><a class=lnlinks href=#hl-39-46> 46</a>
</span><span class=lnt id=hl-39-47><a class=lnlinks href=#hl-39-47> 47</a>
</span><span class=lnt id=hl-39-48><a class=lnlinks href=#hl-39-48> 48</a>
</span><span class=lnt id=hl-39-49><a class=lnlinks href=#hl-39-49> 49</a>
</span><span class=lnt id=hl-39-50><a class=lnlinks href=#hl-39-50> 50</a>
</span><span class=lnt id=hl-39-51><a class=lnlinks href=#hl-39-51> 51</a>
</span><span class=lnt id=hl-39-52><a class=lnlinks href=#hl-39-52> 52</a>
</span><span class=lnt id=hl-39-53><a class=lnlinks href=#hl-39-53> 53</a>
</span><span class=lnt id=hl-39-54><a class=lnlinks href=#hl-39-54> 54</a>
</span><span class=lnt id=hl-39-55><a class=lnlinks href=#hl-39-55> 55</a>
</span><span class=lnt id=hl-39-56><a class=lnlinks href=#hl-39-56> 56</a>
</span><span class=lnt id=hl-39-57><a class=lnlinks href=#hl-39-57> 57</a>
</span><span class=lnt id=hl-39-58><a class=lnlinks href=#hl-39-58> 58</a>
</span><span class=lnt id=hl-39-59><a class=lnlinks href=#hl-39-59> 59</a>
</span><span class=lnt id=hl-39-60><a class=lnlinks href=#hl-39-60> 60</a>
</span><span class=lnt id=hl-39-61><a class=lnlinks href=#hl-39-61> 61</a>
</span><span class=lnt id=hl-39-62><a class=lnlinks href=#hl-39-62> 62</a>
</span><span class=lnt id=hl-39-63><a class=lnlinks href=#hl-39-63> 63</a>
</span><span class=lnt id=hl-39-64><a class=lnlinks href=#hl-39-64> 64</a>
</span><span class=lnt id=hl-39-65><a class=lnlinks href=#hl-39-65> 65</a>
</span><span class=lnt id=hl-39-66><a class=lnlinks href=#hl-39-66> 66</a>
</span><span class=lnt id=hl-39-67><a class=lnlinks href=#hl-39-67> 67</a>
</span><span class=lnt id=hl-39-68><a class=lnlinks href=#hl-39-68> 68</a>
</span><span class=lnt id=hl-39-69><a class=lnlinks href=#hl-39-69> 69</a>
</span><span class=lnt id=hl-39-70><a class=lnlinks href=#hl-39-70> 70</a>
</span><span class=lnt id=hl-39-71><a class=lnlinks href=#hl-39-71> 71</a>
</span><span class=lnt id=hl-39-72><a class=lnlinks href=#hl-39-72> 72</a>
</span><span class=lnt id=hl-39-73><a class=lnlinks href=#hl-39-73> 73</a>
</span><span class=lnt id=hl-39-74><a class=lnlinks href=#hl-39-74> 74</a>
</span><span class=lnt id=hl-39-75><a class=lnlinks href=#hl-39-75> 75</a>
</span><span class=lnt id=hl-39-76><a class=lnlinks href=#hl-39-76> 76</a>
</span><span class=lnt id=hl-39-77><a class=lnlinks href=#hl-39-77> 77</a>
</span><span class=lnt id=hl-39-78><a class=lnlinks href=#hl-39-78> 78</a>
</span><span class=lnt id=hl-39-79><a class=lnlinks href=#hl-39-79> 79</a>
</span><span class=lnt id=hl-39-80><a class=lnlinks href=#hl-39-80> 80</a>
</span><span class=lnt id=hl-39-81><a class=lnlinks href=#hl-39-81> 81</a>
</span><span class=lnt id=hl-39-82><a class=lnlinks href=#hl-39-82> 82</a>
</span><span class=lnt id=hl-39-83><a class=lnlinks href=#hl-39-83> 83</a>
</span><span class=lnt id=hl-39-84><a class=lnlinks href=#hl-39-84> 84</a>
</span><span class=lnt id=hl-39-85><a class=lnlinks href=#hl-39-85> 85</a>
</span><span class=lnt id=hl-39-86><a class=lnlinks href=#hl-39-86> 86</a>
</span><span class=lnt id=hl-39-87><a class=lnlinks href=#hl-39-87> 87</a>
</span><span class=lnt id=hl-39-88><a class=lnlinks href=#hl-39-88> 88</a>
</span><span class=lnt id=hl-39-89><a class=lnlinks href=#hl-39-89> 89</a>
</span><span class=lnt id=hl-39-90><a class=lnlinks href=#hl-39-90> 90</a>
</span><span class=lnt id=hl-39-91><a class=lnlinks href=#hl-39-91> 91</a>
</span><span class=lnt id=hl-39-92><a class=lnlinks href=#hl-39-92> 92</a>
</span><span class=lnt id=hl-39-93><a class=lnlinks href=#hl-39-93> 93</a>
</span><span class=lnt id=hl-39-94><a class=lnlinks href=#hl-39-94> 94</a>
</span><span class=lnt id=hl-39-95><a class=lnlinks href=#hl-39-95> 95</a>
</span><span class=lnt id=hl-39-96><a class=lnlinks href=#hl-39-96> 96</a>
</span><span class=lnt id=hl-39-97><a class=lnlinks href=#hl-39-97> 97</a>
</span><span class=lnt id=hl-39-98><a class=lnlinks href=#hl-39-98> 98</a>
</span><span class=lnt id=hl-39-99><a class=lnlinks href=#hl-39-99> 99</a>
</span><span class=lnt id=hl-39-100><a class=lnlinks href=#hl-39-100>100</a>
</span><span class=lnt id=hl-39-101><a class=lnlinks href=#hl-39-101>101</a>
</span><span class=lnt id=hl-39-102><a class=lnlinks href=#hl-39-102>102</a>
</span><span class=lnt id=hl-39-103><a class=lnlinks href=#hl-39-103>103</a>
</span><span class=lnt id=hl-39-104><a class=lnlinks href=#hl-39-104>104</a>
</span><span class=lnt id=hl-39-105><a class=lnlinks href=#hl-39-105>105</a>
</span><span class=lnt id=hl-39-106><a class=lnlinks href=#hl-39-106>106</a>
</span><span class=lnt id=hl-39-107><a class=lnlinks href=#hl-39-107>107</a>
</span><span class=lnt id=hl-39-108><a class=lnlinks href=#hl-39-108>108</a>
</span><span class=lnt id=hl-39-109><a class=lnlinks href=#hl-39-109>109</a>
</span><span class=lnt id=hl-39-110><a class=lnlinks href=#hl-39-110>110</a>
</span><span class=lnt id=hl-39-111><a class=lnlinks href=#hl-39-111>111</a>
</span><span class=lnt id=hl-39-112><a class=lnlinks href=#hl-39-112>112</a>
</span><span class=lnt id=hl-39-113><a class=lnlinks href=#hl-39-113>113</a>
</span><span class=lnt id=hl-39-114><a class=lnlinks href=#hl-39-114>114</a>
</span><span class=lnt id=hl-39-115><a class=lnlinks href=#hl-39-115>115</a>
</span><span class=lnt id=hl-39-116><a class=lnlinks href=#hl-39-116>116</a>
</span><span class=lnt id=hl-39-117><a class=lnlinks href=#hl-39-117>117</a>
</span><span class=lnt id=hl-39-118><a class=lnlinks href=#hl-39-118>118</a>
</span><span class=lnt id=hl-39-119><a class=lnlinks href=#hl-39-119>119</a>
</span><span class=lnt id=hl-39-120><a class=lnlinks href=#hl-39-120>120</a>
</span><span class=lnt id=hl-39-121><a class=lnlinks href=#hl-39-121>121</a>
</span><span class=lnt id=hl-39-122><a class=lnlinks href=#hl-39-122>122</a>
</span><span class=lnt id=hl-39-123><a class=lnlinks href=#hl-39-123>123</a>
</span><span class=lnt id=hl-39-124><a class=lnlinks href=#hl-39-124>124</a>
</span><span class=lnt id=hl-39-125><a class=lnlinks href=#hl-39-125>125</a>
</span><span class=lnt id=hl-39-126><a class=lnlinks href=#hl-39-126>126</a>
</span><span class=lnt id=hl-39-127><a class=lnlinks href=#hl-39-127>127</a>
</span><span class=lnt id=hl-39-128><a class=lnlinks href=#hl-39-128>128</a>
</span><span class=lnt id=hl-39-129><a class=lnlinks href=#hl-39-129>129</a>
</span><span class=lnt id=hl-39-130><a class=lnlinks href=#hl-39-130>130</a>
</span><span class=lnt id=hl-39-131><a class=lnlinks href=#hl-39-131>131</a>
</span><span class=lnt id=hl-39-132><a class=lnlinks href=#hl-39-132>132</a>
</span><span class=lnt id=hl-39-133><a class=lnlinks href=#hl-39-133>133</a>
</span><span class=lnt id=hl-39-134><a class=lnlinks href=#hl-39-134>134</a>
</span><span class=lnt id=hl-39-135><a class=lnlinks href=#hl-39-135>135</a>
</span><span class=lnt id=hl-39-136><a class=lnlinks href=#hl-39-136>136</a>
</span><span class=lnt id=hl-39-137><a class=lnlinks href=#hl-39-137>137</a>
</span><span class=lnt id=hl-39-138><a class=lnlinks href=#hl-39-138>138</a>
</span><span class=lnt id=hl-39-139><a class=lnlinks href=#hl-39-139>139</a>
</span><span class=lnt id=hl-39-140><a class=lnlinks href=#hl-39-140>140</a>
</span><span class=lnt id=hl-39-141><a class=lnlinks href=#hl-39-141>141</a>
</span><span class=lnt id=hl-39-142><a class=lnlinks href=#hl-39-142>142</a>
</span><span class=lnt id=hl-39-143><a class=lnlinks href=#hl-39-143>143</a>
</span><span class=lnt id=hl-39-144><a class=lnlinks href=#hl-39-144>144</a>
</span><span class=lnt id=hl-39-145><a class=lnlinks href=#hl-39-145>145</a>
</span><span class=lnt id=hl-39-146><a class=lnlinks href=#hl-39-146>146</a>
</span><span class=lnt id=hl-39-147><a class=lnlinks href=#hl-39-147>147</a>
</span><span class=lnt id=hl-39-148><a class=lnlinks href=#hl-39-148>148</a>
</span><span class=lnt id=hl-39-149><a class=lnlinks href=#hl-39-149>149</a>
</span><span class=lnt id=hl-39-150><a class=lnlinks href=#hl-39-150>150</a>
</span><span class=lnt id=hl-39-151><a class=lnlinks href=#hl-39-151>151</a>
</span><span class=lnt id=hl-39-152><a class=lnlinks href=#hl-39-152>152</a>
</span><span class=lnt id=hl-39-153><a class=lnlinks href=#hl-39-153>153</a>
</span><span class=lnt id=hl-39-154><a class=lnlinks href=#hl-39-154>154</a>
</span><span class=lnt id=hl-39-155><a class=lnlinks href=#hl-39-155>155</a>
</span><span class=lnt id=hl-39-156><a class=lnlinks href=#hl-39-156>156</a>
</span><span class=lnt id=hl-39-157><a class=lnlinks href=#hl-39-157>157</a>
</span><span class=lnt id=hl-39-158><a class=lnlinks href=#hl-39-158>158</a>
</span><span class=lnt id=hl-39-159><a class=lnlinks href=#hl-39-159>159</a>
</span><span class=lnt id=hl-39-160><a class=lnlinks href=#hl-39-160>160</a>
</span><span class=lnt id=hl-39-161><a class=lnlinks href=#hl-39-161>161</a>
</span><span class=lnt id=hl-39-162><a class=lnlinks href=#hl-39-162>162</a>
</span><span class=lnt id=hl-39-163><a class=lnlinks href=#hl-39-163>163</a>
</span><span class=lnt id=hl-39-164><a class=lnlinks href=#hl-39-164>164</a>
</span><span class=lnt id=hl-39-165><a class=lnlinks href=#hl-39-165>165</a>
</span><span class=lnt id=hl-39-166><a class=lnlinks href=#hl-39-166>166</a>
</span><span class=lnt id=hl-39-167><a class=lnlinks href=#hl-39-167>167</a>
</span><span class=lnt id=hl-39-168><a class=lnlinks href=#hl-39-168>168</a>
</span><span class=lnt id=hl-39-169><a class=lnlinks href=#hl-39-169>169</a>
</span><span class=lnt id=hl-39-170><a class=lnlinks href=#hl-39-170>170</a>
</span><span class=lnt id=hl-39-171><a class=lnlinks href=#hl-39-171>171</a>
</span><span class=lnt id=hl-39-172><a class=lnlinks href=#hl-39-172>172</a>
</span><span class=lnt id=hl-39-173><a class=lnlinks href=#hl-39-173>173</a>
</span><span class=lnt id=hl-39-174><a class=lnlinks href=#hl-39-174>174</a>
</span><span class=lnt id=hl-39-175><a class=lnlinks href=#hl-39-175>175</a>
</span><span class=lnt id=hl-39-176><a class=lnlinks href=#hl-39-176>176</a>
</span><span class=lnt id=hl-39-177><a class=lnlinks href=#hl-39-177>177</a>
</span><span class=lnt id=hl-39-178><a class=lnlinks href=#hl-39-178>178</a>
</span><span class=lnt id=hl-39-179><a class=lnlinks href=#hl-39-179>179</a>
</span><span class=lnt id=hl-39-180><a class=lnlinks href=#hl-39-180>180</a>
</span><span class=lnt id=hl-39-181><a class=lnlinks href=#hl-39-181>181</a>
</span><span class=lnt id=hl-39-182><a class=lnlinks href=#hl-39-182>182</a>
</span><span class=lnt id=hl-39-183><a class=lnlinks href=#hl-39-183>183</a>
</span><span class=lnt id=hl-39-184><a class=lnlinks href=#hl-39-184>184</a>
</span><span class=lnt id=hl-39-185><a class=lnlinks href=#hl-39-185>185</a>
</span><span class=lnt id=hl-39-186><a class=lnlinks href=#hl-39-186>186</a>
</span><span class=lnt id=hl-39-187><a class=lnlinks href=#hl-39-187>187</a>
</span><span class=lnt id=hl-39-188><a class=lnlinks href=#hl-39-188>188</a>
</span><span class=lnt id=hl-39-189><a class=lnlinks href=#hl-39-189>189</a>
</span><span class=lnt id=hl-39-190><a class=lnlinks href=#hl-39-190>190</a>
</span><span class=lnt id=hl-39-191><a class=lnlinks href=#hl-39-191>191</a>
</span><span class=lnt id=hl-39-192><a class=lnlinks href=#hl-39-192>192</a>
</span><span class=lnt id=hl-39-193><a class=lnlinks href=#hl-39-193>193</a>
</span><span class=lnt id=hl-39-194><a class=lnlinks href=#hl-39-194>194</a>
</span><span class=lnt id=hl-39-195><a class=lnlinks href=#hl-39-195>195</a>
</span><span class=lnt id=hl-39-196><a class=lnlinks href=#hl-39-196>196</a>
</span><span class=lnt id=hl-39-197><a class=lnlinks href=#hl-39-197>197</a>
</span><span class=lnt id=hl-39-198><a class=lnlinks href=#hl-39-198>198</a>
</span><span class=lnt id=hl-39-199><a class=lnlinks href=#hl-39-199>199</a>
</span><span class=lnt id=hl-39-200><a class=lnlinks href=#hl-39-200>200</a>
</span><span class=lnt id=hl-39-201><a class=lnlinks href=#hl-39-201>201</a>
</span><span class=lnt id=hl-39-202><a class=lnlinks href=#hl-39-202>202</a>
</span><span class=lnt id=hl-39-203><a class=lnlinks href=#hl-39-203>203</a>
</span><span class=lnt id=hl-39-204><a class=lnlinks href=#hl-39-204>204</a>
</span><span class=lnt id=hl-39-205><a class=lnlinks href=#hl-39-205>205</a>
</span><span class=lnt id=hl-39-206><a class=lnlinks href=#hl-39-206>206</a>
</span><span class=lnt id=hl-39-207><a class=lnlinks href=#hl-39-207>207</a>
</span><span class=lnt id=hl-39-208><a class=lnlinks href=#hl-39-208>208</a>
</span><span class=lnt id=hl-39-209><a class=lnlinks href=#hl-39-209>209</a>
</span><span class=lnt id=hl-39-210><a class=lnlinks href=#hl-39-210>210</a>
</span><span class=lnt id=hl-39-211><a class=lnlinks href=#hl-39-211>211</a>
</span><span class=lnt id=hl-39-212><a class=lnlinks href=#hl-39-212>212</a>
</span><span class=lnt id=hl-39-213><a class=lnlinks href=#hl-39-213>213</a>
</span><span class=lnt id=hl-39-214><a class=lnlinks href=#hl-39-214>214</a>
</span><span class=lnt id=hl-39-215><a class=lnlinks href=#hl-39-215>215</a>
</span><span class=lnt id=hl-39-216><a class=lnlinks href=#hl-39-216>216</a>
</span><span class=lnt id=hl-39-217><a class=lnlinks href=#hl-39-217>217</a>
</span><span class=lnt id=hl-39-218><a class=lnlinks href=#hl-39-218>218</a>
</span><span class=lnt id=hl-39-219><a class=lnlinks href=#hl-39-219>219</a>
</span><span class=lnt id=hl-39-220><a class=lnlinks href=#hl-39-220>220</a>
</span><span class=lnt id=hl-39-221><a class=lnlinks href=#hl-39-221>221</a>
</span><span class=lnt id=hl-39-222><a class=lnlinks href=#hl-39-222>222</a>
</span><span class=lnt id=hl-39-223><a class=lnlinks href=#hl-39-223>223</a>
</span><span class=lnt id=hl-39-224><a class=lnlinks href=#hl-39-224>224</a>
</span><span class=lnt id=hl-39-225><a class=lnlinks href=#hl-39-225>225</a>
</span><span class=lnt id=hl-39-226><a class=lnlinks href=#hl-39-226>226</a>
</span><span class=lnt id=hl-39-227><a class=lnlinks href=#hl-39-227>227</a>
</span><span class=lnt id=hl-39-228><a class=lnlinks href=#hl-39-228>228</a>
</span><span class=lnt id=hl-39-229><a class=lnlinks href=#hl-39-229>229</a>
</span><span class=lnt id=hl-39-230><a class=lnlinks href=#hl-39-230>230</a>
</span><span class=lnt id=hl-39-231><a class=lnlinks href=#hl-39-231>231</a>
</span><span class=lnt id=hl-39-232><a class=lnlinks href=#hl-39-232>232</a>
</span><span class=lnt id=hl-39-233><a class=lnlinks href=#hl-39-233>233</a>
</span><span class=lnt id=hl-39-234><a class=lnlinks href=#hl-39-234>234</a>
</span><span class=lnt id=hl-39-235><a class=lnlinks href=#hl-39-235>235</a>
</span><span class=lnt id=hl-39-236><a class=lnlinks href=#hl-39-236>236</a>
</span><span class=lnt id=hl-39-237><a class=lnlinks href=#hl-39-237>237</a>
</span><span class=lnt id=hl-39-238><a class=lnlinks href=#hl-39-238>238</a>
</span><span class=lnt id=hl-39-239><a class=lnlinks href=#hl-39-239>239</a>
</span><span class=lnt id=hl-39-240><a class=lnlinks href=#hl-39-240>240</a>
</span><span class=lnt id=hl-39-241><a class=lnlinks href=#hl-39-241>241</a>
</span><span class=lnt id=hl-39-242><a class=lnlinks href=#hl-39-242>242</a>
</span><span class=lnt id=hl-39-243><a class=lnlinks href=#hl-39-243>243</a>
</span><span class=lnt id=hl-39-244><a class=lnlinks href=#hl-39-244>244</a>
</span><span class=lnt id=hl-39-245><a class=lnlinks href=#hl-39-245>245</a>
</span><span class=lnt id=hl-39-246><a class=lnlinks href=#hl-39-246>246</a>
</span><span class=lnt id=hl-39-247><a class=lnlinks href=#hl-39-247>247</a>
</span><span class=lnt id=hl-39-248><a class=lnlinks href=#hl-39-248>248</a>
</span><span class=lnt id=hl-39-249><a class=lnlinks href=#hl-39-249>249</a>
</span><span class=lnt id=hl-39-250><a class=lnlinks href=#hl-39-250>250</a>
</span><span class=lnt id=hl-39-251><a class=lnlinks href=#hl-39-251>251</a>
</span><span class=lnt id=hl-39-252><a class=lnlinks href=#hl-39-252>252</a>
</span><span class=lnt id=hl-39-253><a class=lnlinks href=#hl-39-253>253</a>
</span><span class=lnt id=hl-39-254><a class=lnlinks href=#hl-39-254>254</a>
</span><span class=lnt id=hl-39-255><a class=lnlinks href=#hl-39-255>255</a>
</span><span class=lnt id=hl-39-256><a class=lnlinks href=#hl-39-256>256</a>
</span><span class=lnt id=hl-39-257><a class=lnlinks href=#hl-39-257>257</a>
</span><span class=lnt id=hl-39-258><a class=lnlinks href=#hl-39-258>258</a>
</span><span class=lnt id=hl-39-259><a class=lnlinks href=#hl-39-259>259</a>
</span><span class=lnt id=hl-39-260><a class=lnlinks href=#hl-39-260>260</a>
</span><span class=lnt id=hl-39-261><a class=lnlinks href=#hl-39-261>261</a>
</span><span class=lnt id=hl-39-262><a class=lnlinks href=#hl-39-262>262</a>
</span><span class=lnt id=hl-39-263><a class=lnlinks href=#hl-39-263>263</a>
</span><span class=lnt id=hl-39-264><a class=lnlinks href=#hl-39-264>264</a>
</span><span class=lnt id=hl-39-265><a class=lnlinks href=#hl-39-265>265</a>
</span><span class=lnt id=hl-39-266><a class=lnlinks href=#hl-39-266>266</a>
</span><span class=lnt id=hl-39-267><a class=lnlinks href=#hl-39-267>267</a>
</span><span class=lnt id=hl-39-268><a class=lnlinks href=#hl-39-268>268</a>
</span><span class=lnt id=hl-39-269><a class=lnlinks href=#hl-39-269>269</a>
</span><span class=lnt id=hl-39-270><a class=lnlinks href=#hl-39-270>270</a>
</span><span class=lnt id=hl-39-271><a class=lnlinks href=#hl-39-271>271</a>
</span><span class=lnt id=hl-39-272><a class=lnlinks href=#hl-39-272>272</a>
</span><span class=lnt id=hl-39-273><a class=lnlinks href=#hl-39-273>273</a>
</span><span class=lnt id=hl-39-274><a class=lnlinks href=#hl-39-274>274</a>
</span><span class=lnt id=hl-39-275><a class=lnlinks href=#hl-39-275>275</a>
</span><span class=lnt id=hl-39-276><a class=lnlinks href=#hl-39-276>276</a>
</span><span class=lnt id=hl-39-277><a class=lnlinks href=#hl-39-277>277</a>
</span><span class=lnt id=hl-39-278><a class=lnlinks href=#hl-39-278>278</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>aiohttp</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>aiohttp</span> <span class=kn>import</span> <span class=n>web</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>List</span><span class=p>,</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>Any</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>logging</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 로깅 설정</span>
</span></span><span class=line><span class=cl><span class=n>logging</span><span class=o>.</span><span class=n>basicConfig</span><span class=p>(</span><span class=n>level</span><span class=o>=</span><span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>HealthChecker</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;서버 상태 검사 클래스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>check_interval</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>30</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>check_interval</span> <span class=o>=</span> <span class=n>check_interval</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>healthy_servers</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>check_server_health</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>server_url</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;개별 서버 상태 검사&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>async</span> <span class=k>with</span> <span class=n>aiohttp</span><span class=o>.</span><span class=n>ClientSession</span><span class=p>()</span> <span class=k>as</span> <span class=n>session</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>async</span> <span class=k>with</span> <span class=n>session</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>server_url</span><span class=si>}</span><span class=s2>/health&#34;</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span> <span class=k>as</span> <span class=n>response</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=mi>200</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Health check failed for </span><span class=si>{</span><span class=n>server_url</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>monitor_servers</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>servers</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;모든 서버 상태 지속 모니터링&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>healthy</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>server</span> <span class=ow>in</span> <span class=n>servers</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>check_server_health</span><span class=p>(</span><span class=n>server</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                    <span class=n>healthy</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>server</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>healthy_servers</span> <span class=o>=</span> <span class=n>healthy</span>
</span></span><span class=line><span class=cl>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Healthy servers: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>healthy_servers</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>check_interval</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>LoadBalancingAlgorithm</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;로드 밸런싱 알고리즘 클래스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>round_robin_index</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>server_connections</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>round_robin</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>servers</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;라운드 로빈 알고리즘&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>servers</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=s2>&#34;No healthy servers available&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>server</span> <span class=o>=</span> <span class=n>servers</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>round_robin_index</span> <span class=o>%</span> <span class=nb>len</span><span class=p>(</span><span class=n>servers</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>round_robin_index</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>server</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>least_connections</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>servers</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;최소 연결 수 알고리즘&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>servers</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=s2>&#34;No healthy servers available&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># 연결 수 초기화</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>server</span> <span class=ow>in</span> <span class=n>servers</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>server</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>server_connections</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>server_connections</span><span class=p>[</span><span class=n>server</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># 최소 연결 수 서버 선택</span>
</span></span><span class=line><span class=cl>        <span class=n>min_connections</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>server_connections</span><span class=p>[</span><span class=n>s</span><span class=p>]</span> <span class=k>for</span> <span class=n>s</span> <span class=ow>in</span> <span class=n>servers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>server</span> <span class=ow>in</span> <span class=n>servers</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>server_connections</span><span class=p>[</span><span class=n>server</span><span class=p>]</span> <span class=o>==</span> <span class=n>min_connections</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>server</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>increment_connection</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>server</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;서버 연결 수 증가&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>server_connections</span><span class=p>[</span><span class=n>server</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>server_connections</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>server</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>decrement_connection</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>server</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;서버 연결 수 감소&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>server</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>server_connections</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>server_connections</span><span class=p>[</span><span class=n>server</span><span class=p>]</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>server_connections</span><span class=p>[</span><span class=n>server</span><span class=p>]</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>HTTPLoadBalancer</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;HTTP 로드 밸런서 메인 클래스&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>servers</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=n>algorithm</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;round_robin&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>servers</span> <span class=o>=</span> <span class=n>servers</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>algorithm</span> <span class=o>=</span> <span class=n>algorithm</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>health_checker</span> <span class=o>=</span> <span class=n>HealthChecker</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>lb_algorithm</span> <span class=o>=</span> <span class=n>LoadBalancingAlgorithm</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>session_store</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># 세션 스티키니스용</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># 통계 정보</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>stats</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;total_requests&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;successful_requests&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;failed_requests&#39;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;server_stats&#39;</span><span class=p>:</span> <span class=p>{</span><span class=n>server</span><span class=p>:</span> <span class=mi>0</span> <span class=k>for</span> <span class=n>server</span> <span class=ow>in</span> <span class=n>servers</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>start_health_monitoring</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Health Check 모니터링 시작&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>health_checker</span><span class=o>.</span><span class=n>monitor_servers</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>servers</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>select_server</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;로드 밸런싱 알고리즘에 따른 서버 선택&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>healthy_servers</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>health_checker</span><span class=o>.</span><span class=n>healthy_servers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>algorithm</span> <span class=o>==</span> <span class=s2>&#34;round_robin&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>lb_algorithm</span><span class=o>.</span><span class=n>round_robin</span><span class=p>(</span><span class=n>healthy_servers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>algorithm</span> <span class=o>==</span> <span class=s2>&#34;least_connections&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>lb_algorithm</span><span class=o>.</span><span class=n>least_connections</span><span class=p>(</span><span class=n>healthy_servers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Unknown algorithm: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>algorithm</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>forward_request</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>:</span> <span class=n>web</span><span class=o>.</span><span class=n>Request</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>web</span><span class=o>.</span><span class=n>Response</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;클라이언트 요청을 백엔드 서버로 전달&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># 통계 업데이트</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;total_requests&#39;</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1># 서버 선택</span>
</span></span><span class=line><span class=cl>            <span class=n>target_server</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>select_server</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>lb_algorithm</span><span class=o>.</span><span class=n>increment_connection</span><span class=p>(</span><span class=n>target_server</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1># 요청 URL 구성</span>
</span></span><span class=line><span class=cl>            <span class=n>target_url</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>target_server</span><span class=si>}{</span><span class=n>request</span><span class=o>.</span><span class=n>path_qs</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1># 헤더 준비 (Host 헤더 수정)</span>
</span></span><span class=line><span class=cl>            <span class=n>headers</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=n>request</span><span class=o>.</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>headers</span><span class=p>[</span><span class=s1>&#39;Host&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>target_server</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s1>&#39;http://&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s1>&#39;https://&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Forwarding </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>method</span><span class=si>}</span><span class=s2> </span><span class=si>{</span><span class=n>request</span><span class=o>.</span><span class=n>path</span><span class=si>}</span><span class=s2> to </span><span class=si>{</span><span class=n>target_server</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1># 백엔드 서버로 요청 전달</span>
</span></span><span class=line><span class=cl>            <span class=k>async</span> <span class=k>with</span> <span class=n>aiohttp</span><span class=o>.</span><span class=n>ClientSession</span><span class=p>()</span> <span class=k>as</span> <span class=n>session</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>async</span> <span class=k>with</span> <span class=n>session</span><span class=o>.</span><span class=n>request</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=n>method</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>method</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>url</span><span class=o>=</span><span class=n>target_url</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>data</span><span class=o>=</span><span class=k>await</span> <span class=n>request</span><span class=o>.</span><span class=n>read</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                    <span class=n>timeout</span><span class=o>=</span><span class=mi>30</span>
</span></span><span class=line><span class=cl>                <span class=p>)</span> <span class=k>as</span> <span class=n>response</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    <span class=c1># 응답 헤더 복사</span>
</span></span><span class=line><span class=cl>                    <span class=n>response_headers</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>                    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>response</span><span class=o>.</span><span class=n>headers</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                        <span class=k>if</span> <span class=n>key</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>[</span><span class=s1>&#39;content-encoding&#39;</span><span class=p>,</span> <span class=s1>&#39;transfer-encoding&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                            <span class=n>response_headers</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    <span class=c1># 응답 본문 읽기</span>
</span></span><span class=line><span class=cl>                    <span class=n>response_body</span> <span class=o>=</span> <span class=k>await</span> <span class=n>response</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    <span class=c1># 통계 업데이트</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;successful_requests&#39;</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;server_stats&#39;</span><span class=p>][</span><span class=n>target_server</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    <span class=c1># 연결 수 감소</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>lb_algorithm</span><span class=o>.</span><span class=n>decrement_connection</span><span class=p>(</span><span class=n>target_server</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=n>web</span><span class=o>.</span><span class=n>Response</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                        <span class=n>body</span><span class=o>=</span><span class=n>response_body</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>status</span><span class=o>=</span><span class=n>response</span><span class=o>.</span><span class=n>status</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>headers</span><span class=o>=</span><span class=n>response_headers</span>
</span></span><span class=line><span class=cl>                    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>[</span><span class=s1>&#39;failed_requests&#39;</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Request forwarding failed: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1># 에러 시에도 연결 수 감소</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=s1>&#39;target_server&#39;</span> <span class=ow>in</span> <span class=nb>locals</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                <span class=bp>self</span><span class=o>.</span><span class=n>lb_algorithm</span><span class=o>.</span><span class=n>decrement_connection</span><span class=p>(</span><span class=n>target_server</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>web</span><span class=o>.</span><span class=n>Response</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>text</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;Service Unavailable: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>status</span><span class=o>=</span><span class=mi>503</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>health_endpoint</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>:</span> <span class=n>web</span><span class=o>.</span><span class=n>Request</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>web</span><span class=o>.</span><span class=n>Response</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;로드 밸런서 상태 확인 엔드포인트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>health_status</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;status&#39;</span><span class=p>:</span> <span class=s1>&#39;healthy&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;healthy_servers&#39;</span><span class=p>:</span> <span class=nb>list</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>health_checker</span><span class=o>.</span><span class=n>healthy_servers</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;total_servers&#39;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>servers</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;algorithm&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>algorithm</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;stats&#39;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>stats</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>web</span><span class=o>.</span><span class=n>json_response</span><span class=p>(</span><span class=n>health_status</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>stats_endpoint</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>:</span> <span class=n>web</span><span class=o>.</span><span class=n>Request</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>web</span><span class=o>.</span><span class=n>Response</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;통계 정보 엔드포인트&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>web</span><span class=o>.</span><span class=n>json_response</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>stats</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 로드 밸런서 설정 및 실행</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>create_load_balancer</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;로드 밸런서 애플리케이션 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># 백엔드 서버 목록</span>
</span></span><span class=line><span class=cl>    <span class=n>backend_servers</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;http://localhost:8001&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;http://localhost:8002&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;http://localhost:8003&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># 로드 밸런서 인스턴스 생성</span>
</span></span><span class=line><span class=cl>    <span class=n>lb</span> <span class=o>=</span> <span class=n>HTTPLoadBalancer</span><span class=p>(</span><span class=n>backend_servers</span><span class=p>,</span> <span class=n>algorithm</span><span class=o>=</span><span class=s2>&#34;least_connections&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Health Check 모니터링 시작</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>lb</span><span class=o>.</span><span class=n>start_health_monitoring</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># 웹 애플리케이션 설정</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span> <span class=o>=</span> <span class=n>web</span><span class=o>.</span><span class=n>Application</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># 라우트 설정</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>router</span><span class=o>.</span><span class=n>add_route</span><span class=p>(</span><span class=s1>&#39;*&#39;</span><span class=p>,</span> <span class=s1>&#39;/health&#39;</span><span class=p>,</span> <span class=n>lb</span><span class=o>.</span><span class=n>health_endpoint</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>router</span><span class=o>.</span><span class=n>add_route</span><span class=p>(</span><span class=s1>&#39;*&#39;</span><span class=p>,</span> <span class=s1>&#39;/stats&#39;</span><span class=p>,</span> <span class=n>lb</span><span class=o>.</span><span class=n>stats_endpoint</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>router</span><span class=o>.</span><span class=n>add_route</span><span class=p>(</span><span class=s1>&#39;*&#39;</span><span class=p>,</span> <span class=s1>&#39;/{path:.*}&#39;</span><span class=p>,</span> <span class=n>lb</span><span class=o>.</span><span class=n>forward_request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>app</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 데모용 백엔드 서버</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>create_backend_server</span><span class=p>(</span><span class=n>port</span><span class=p>:</span> <span class=nb>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;데모용 백엔드 서버 생성&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>hello_handler</span><span class=p>(</span><span class=n>request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>web</span><span class=o>.</span><span class=n>json_response</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;server&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s1>&#39;Server-</span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;message&#39;</span><span class=p>:</span> <span class=s1>&#39;Hello from backend server!&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;timestamp&#39;</span><span class=p>:</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>health_handler</span><span class=p>(</span><span class=n>request</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>web</span><span class=o>.</span><span class=n>json_response</span><span class=p>({</span><span class=s1>&#39;status&#39;</span><span class=p>:</span> <span class=s1>&#39;healthy&#39;</span><span class=p>,</span> <span class=s1>&#39;server&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s1>&#39;Server-</span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>app</span> <span class=o>=</span> <span class=n>web</span><span class=o>.</span><span class=n>Application</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>router</span><span class=o>.</span><span class=n>add_get</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>,</span> <span class=n>hello_handler</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>router</span><span class=o>.</span><span class=n>add_get</span><span class=p>(</span><span class=s1>&#39;/health&#39;</span><span class=p>,</span> <span class=n>health_handler</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>router</span><span class=o>.</span><span class=n>add_get</span><span class=p>(</span><span class=s1>&#39;/api/data&#39;</span><span class=p>,</span> <span class=n>hello_handler</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>app</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 실행 함수</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;메인 실행 함수&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># 백엔드 서버들 시작</span>
</span></span><span class=line><span class=cl>    <span class=n>backend_ports</span> <span class=o>=</span> <span class=p>[</span><span class=mi>8001</span><span class=p>,</span> <span class=mi>8002</span><span class=p>,</span> <span class=mi>8003</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>port</span> <span class=ow>in</span> <span class=n>backend_ports</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>app</span> <span class=o>=</span> <span class=k>await</span> <span class=n>create_backend_server</span><span class=p>(</span><span class=n>port</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>runner</span> <span class=o>=</span> <span class=n>web</span><span class=o>.</span><span class=n>AppRunner</span><span class=p>(</span><span class=n>app</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=n>runner</span><span class=o>.</span><span class=n>setup</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>site</span> <span class=o>=</span> <span class=n>web</span><span class=o>.</span><span class=n>TCPSite</span><span class=p>(</span><span class=n>runner</span><span class=p>,</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>port</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=n>site</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Backend server started on port </span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># 로드 밸런서 시작</span>
</span></span><span class=line><span class=cl>    <span class=n>lb_app</span> <span class=o>=</span> <span class=k>await</span> <span class=n>create_load_balancer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>lb_runner</span> <span class=o>=</span> <span class=n>web</span><span class=o>.</span><span class=n>AppRunner</span><span class=p>(</span><span class=n>lb_app</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>lb_runner</span><span class=o>.</span><span class=n>setup</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>lb_site</span> <span class=o>=</span> <span class=n>web</span><span class=o>.</span><span class=n>TCPSite</span><span class=p>(</span><span class=n>lb_runner</span><span class=p>,</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=mi>8080</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>lb_site</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;Load Balancer started on port 8080&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;Available endpoints:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;  - http://localhost:8080/ (forwarded to backends)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;  - http://localhost:8080/health (load balancer health)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;  - http://localhost:8080/stats (statistics)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># 서버 계속 실행</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>Future</span><span class=p>()</span>  <span class=c1># 무한 대기</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>KeyboardInterrupt</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;Shutting down...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>사용 방법</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-40-1><a class=lnlinks href=#hl-40-1> 1</a>
</span><span class=lnt id=hl-40-2><a class=lnlinks href=#hl-40-2> 2</a>
</span><span class=lnt id=hl-40-3><a class=lnlinks href=#hl-40-3> 3</a>
</span><span class=lnt id=hl-40-4><a class=lnlinks href=#hl-40-4> 4</a>
</span><span class=lnt id=hl-40-5><a class=lnlinks href=#hl-40-5> 5</a>
</span><span class=lnt id=hl-40-6><a class=lnlinks href=#hl-40-6> 6</a>
</span><span class=lnt id=hl-40-7><a class=lnlinks href=#hl-40-7> 7</a>
</span><span class=lnt id=hl-40-8><a class=lnlinks href=#hl-40-8> 8</a>
</span><span class=lnt id=hl-40-9><a class=lnlinks href=#hl-40-9> 9</a>
</span><span class=lnt id=hl-40-10><a class=lnlinks href=#hl-40-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. 로드 밸런서 실행</span>
</span></span><span class=line><span class=cl>python load_balancer.py
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 다른 터미널에서 테스트</span>
</span></span><span class=line><span class=cl>curl http://localhost:8080/
</span></span><span class=line><span class=cl>curl http://localhost:8080/health
</span></span><span class=line><span class=cl>curl http://localhost:8080/stats
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. 부하 테스트</span>
</span></span><span class=line><span class=cl><span class=k>for</span> i in <span class=o>{</span>1..10<span class=o>}</span><span class=p>;</span> <span class=k>do</span> curl http://localhost:8080/api/data<span class=p>;</span> echo<span class=p>;</span> <span class=k>done</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>이 구현 예시는 실제 운영 환경에서 사용되는 로드 밸런서의 핵심 기능들을 포함하고 있다:<ul><li><strong>Health Check</strong>: 백엔드 서버 상태 모니터링</li><li><strong>로드 밸런싱 알고리즘</strong>: Round Robin, Least Connections</li><li><strong>통계 수집</strong>: 요청 처리 통계 및 서버별 분산 현황</li><li><strong>에러 처리</strong>: 장애 상황에 대한 적절한 대응</li></ul></li></ul></li></ul><h3 id=로드-밸런서-관련-최신-기술-동향>로드 밸런서 관련 최신 기술 동향<a hidden class=anchor aria-hidden=true href=#로드-밸런서-관련-최신-기술-동향>#</a></h3><table><thead><tr><th>기술</th><th>설명</th><th>적용 사례</th></tr></thead><tbody><tr><td>eBPF 기반 LB</td><td>커널 우회 경량 분산 처리</td><td>Cilium LB, Facebook Katran</td></tr><tr><td>QUIC 지원 LB</td><td>HTTP/3 기반의 UDP 전송</td><td>Cloudflare, Google Edge LB</td></tr><tr><td>AI 기반 분산 전략</td><td>트래픽 흐름을 예측 기반으로 분산</td><td>Netflix, Azure</td></tr><tr><td>Zero Trust LB</td><td>TLS 기반 보안 접속 제어 강화</td><td>Zscaler, Google BeyondCorp</td></tr><tr><td>Service Mesh LB</td><td>L7 제어 + 보안 정책 적용 가능</td><td>Istio, Consul Connect</td></tr></tbody></table><h3 id=주목할-내용>주목할 내용<a hidden class=anchor aria-hidden=true href=#주목할-내용>#</a></h3><table><thead><tr><th><strong>카테고리</strong></th><th><strong>항목</strong></th><th><strong>설명</strong></th><th><strong>실무적 의의 / 고려점</strong></th></tr></thead><tbody><tr><td><strong>분산 알고리즘</strong></td><td>라운드로빈 / Least Connection</td><td>요청을 순차 또는 최소 연결 수 기준으로 분산</td><td>기본적인 L4/L7 분산 방식, 트래픽 패턴에 따라 적절한 선택 필요</td></tr><tr><td></td><td>AI/ML 기반 분산</td><td>예측 기반의 동적 라우팅 적용 가능</td><td>AI 기반으로 트래픽 급증/이상 감지 → 자동 분산 최적화 가능</td></tr><tr><td></td><td>지리 기반 분산 (GeoDNS)</td><td>사용자의 위치를 기반으로 가장 가까운 서버에 트래픽 유도</td><td>글로벌 서비스에서 Latency 최소화</td></tr><tr><td><strong>트래픽 제어</strong></td><td>콘텐츠 기반 라우팅 (L7)</td><td>URL, 쿠키, 헤더 값에 따라 라우팅</td><td>A/B 테스트, 사용자 그룹별 분산 등에 활용</td></tr><tr><td></td><td>요청 우선순위 및 QoS 설정</td><td>고우선 요청 처리 보장, 트래픽 급증 시 중요 트래픽 우선 처리</td><td>B2B API, 알림 시스템 등 중요 서비스에 적용</td></tr><tr><td></td><td>세션 일관성 (Sticky Session)</td><td>클라이언트 요청을 동일 서버로 유지</td><td>로그인 세션, 쇼핑카트 등 상태 정보 유지 필요 서비스에 중요</td></tr><tr><td><strong>운영 자동화</strong></td><td>헬스 체크 및 Failover</td><td>비정상 서버 자동 제외 및 트래픽 리디렉션</td><td>High Availability 유지, 무중단 운영의 핵심</td></tr><tr><td></td><td>Auto Scaling 연계</td><td>Target Group 과 연계하여 자동 스케일 인/아웃</td><td>Kubernetes, AWS ALB 등에서 탄력적 운영 구현</td></tr><tr><td></td><td>자가 치유 시스템</td><td>헬스 이상 시 자동 조치 (다시 배포, 우회, 알림)</td><td>MSA/Cloud 환경에서 점점 필수화</td></tr><tr><td><strong>보안 기능</strong></td><td>SSL/TLS 종료 및 재암호화</td><td>LB 에서 SSL 종료 후 내부 재암호화 또는 오프로드 처리</td><td>내부 보안 수준에 따라 구성 (예: mTLS, TLS passthrough)</td></tr><tr><td></td><td>WAF 및 DDoS 방어 통합</td><td>LB 에 Web Application Firewall 및 봇 방어 기능 연동</td><td>Cloudflare, AWS WAF, NGINX App Protect 등 연계 가능</td></tr><tr><td></td><td>제로 트러스트 인증 (mTLS)</td><td>마이크로서비스 간 통신 시 상호 인증</td><td>서비스 메시와 함께 적용되며, 내부 위협 대응 강화</td></tr><tr><td><strong>관찰 가능성 (O11y)</strong></td><td>메트릭 수집 및 대시보드</td><td>응답 지연, QPS, 오류율 등 실시간 성능 모니터링</td><td>Prometheus, Grafana, DataDog 연계 중요</td></tr><tr><td></td><td>분산 추적 (Tracing)</td><td>요청 흐름을 추적하여 병목 위치 식별</td><td>Istio + Jaeger / OpenTelemetry 표준화 흐름에 연계 가능</td></tr><tr><td></td><td>합성 모니터링</td><td>실제 시나리오 기반 요청 테스트로 사용자 경험 측정</td><td>외부 관점의 SLA 보장, CDN-LB-API 전경로 테스트 가능</td></tr><tr><td><strong>아키텍처 확장성</strong></td><td>이중화 구성 (Active-Active)</td><td>로드 밸런서 및 백엔드 서버 모두 이중화로 구성</td><td>SPOF 방지, 다중 AZ 구성 시 표준</td></tr><tr><td></td><td>글로벌 GSLB / Edge LB</td><td>전 세계 사용자 위치 기반으로 가장 빠른 지점에서 응답</td><td>Cloudflare, AWS Global Accelerator, NS1 등 활용 가능</td></tr><tr><td></td><td>Kubernetes Ingress / Gateway</td><td>서비스 Mesh 또는 컨테이너 네이티브 로드 밸런싱 방식</td><td>Istio, Envoy, Gateway API 등 다양한 구현체와 통합 가능</td></tr><tr><td><strong>기술 진화</strong></td><td>eBPF 기반 로드 밸런싱</td><td>커널 수준에서 트래픽 필터링 및 라우팅 구현 가능</td><td>CPU 오버헤드 줄이고 성능 극대화 가능, Cilium 등에서 실사용 증가</td></tr><tr><td></td><td>HTTP/3 + QUIC 지원</td><td>UDP 기반 연결 설정 속도 향상 + 헤더 압축 + 멀티플렉싱 지원</td><td>최신 웹 프로토콜 채택시 필수 고려사항</td></tr><tr><td></td><td>서버리스 연계 로드 밸런싱</td><td>Lambda 등 이벤트 기반 아키텍처에서도 LB 구성 가능</td><td>ALB + Lambda, API Gateway 연계 시 적용 가능</td></tr><tr><td><strong>비용 최적화</strong></td><td>트래픽 기반 Auto-scaling</td><td>트래픽 흐름에 따라 LB 자체 인스턴스를 자동으로 확장/축소</td><td>GCP 의 Global LB, AWS ALB 등에서 지원</td></tr><tr><td></td><td>캐싱 및 압축 기능</td><td>L7 로드 밸런서에서 gzip/Brotli 캐싱 적용 가능</td><td>불필요한 백엔드 부하 제거, 정적 리소스 전달 최적화</td></tr></tbody></table><h3 id=반드시-학습해야할-내용>반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#반드시-학습해야할-내용>#</a></h3><table><thead><tr><th>상위 카테고리</th><th>주제</th><th>학습 항목 예시</th><th>실무 적용 관점 요약</th></tr></thead><tbody><tr><td><strong>1. 네트워크 기초</strong></td><td>OSI 모델/계층 이해</td><td>L4(TCP/UDP), L7(HTTP/HTTPS) 작동 차이</td><td>로드 밸런서 계층 선택 및 트래픽 라우팅 구조 설계에 필수</td></tr><tr><td></td><td>TCP/IP, HTTP 프로토콜</td><td>TCP 핸드셰이크, 세션 지속, HTTP 헤더 기반 라우팅 등</td><td>세션 유지 정책, L7 로직 설계, 성능 튜닝의 기반 지식</td></tr><tr><td><strong>2. 부하 분산 알고리즘</strong></td><td>Routing Algorithm</td><td>Round Robin, Least Connection, Weighted, IP Hash, Consistent Hash</td><td>서비스 패턴별 최적화된 부하 분산 전략 구현을 위한 핵심 요소</td></tr><tr><td></td><td>동적 가중치 알고리즘</td><td>서버 상태, 응답 시간 기반 동적 가중치 조정</td><td>Auto-scaling 환경, 동적 처리량 대응 구조에 필요</td></tr><tr><td></td><td>콘텐츠 기반 라우팅</td><td>URL, 쿠키, 헤더 기반 조건 라우팅</td><td>A/B 테스트, 멀티 테넌시 서비스, 정밀 라우팅 필요 시 적용</td></tr><tr><td><strong>3. 보안 및 가용성</strong></td><td>TLS 종료 및 재암호화</td><td>SSL Termination, 인증서 관리, mTLS</td><td>보안 정책 구현, 암호화 처리 분산, 클라우드 오프로딩 구성</td></tr><tr><td></td><td>DDoS/WAF 통합</td><td>WAF, Rate Limiting, Geo-blocking, Bot Filtering</td><td>API Gateway 또는 L7 LB 와 연동하여 엣지 보안 강화</td></tr><tr><td></td><td>세션 관리 전략</td><td>Sticky Session, Cookie Affinity, 중앙 세션 저장소</td><td>상태 유지 서비스 대응, Redis 기반 세션 스토리지 등과 연계</td></tr><tr><td></td><td>고가용성 이중화</td><td>Active-Active / Active-Passive 구성, 다중 AZ 배포</td><td>SPOF 방지, 헬스 체크와 자동 Failover 구성</td></tr><tr><td><strong>4. 클라우드 및 인프라</strong></td><td>클라우드 LB 서비스</td><td>AWS ALB/NLB/ELB, GCP LB, Azure Load Balancer</td><td>각 클라우드 환경의 특성과 한계 이해, 매니지드 서비스 선택 기준 정립</td></tr><tr><td></td><td>Kubernetes Ingress</td><td>Ingress Controller (NGINX, Traefik, Istio)</td><td>K8s 기반 애플리케이션의 HTTP/TCP 라우팅 처리 핵심</td></tr><tr><td></td><td>서비스 메시 통합</td><td>Envoy, Istio, Linkerd 등 사이드카 기반 아키텍처</td><td>마이크로서비스 간 동적 트래픽 분산 및 정책 기반 라우팅 적용</td></tr><tr><td></td><td>재해 복구 아키텍처</td><td>GSLB, Anycast DNS, Backup Region</td><td>글로벌 분산, 장애 발생 시 리전/네임서버 자동 전환</td></tr><tr><td></td><td>엣지 컴퓨팅 및 CDN</td><td>WebRTC, Lambda@Edge, Workers, eBPF, Chunked Transfer</td><td>실시간/저지연 콘텐츠 제공을 위한 고성능 분산 구조 구성</td></tr><tr><td><strong>5. 관측성과 운영</strong></td><td>헬스 체크 구성</td><td>주기 설정, 실패 조건, 탐지 엔드포인트 구성</td><td>불필요한 장애 감지 방지, 실제 애플리케이션 상태 기반 라우팅 안정화</td></tr><tr><td></td><td>모니터링 & 메트릭</td><td>Prometheus, Grafana, CloudWatch, latency/error/throughput</td><td>운영 이상 탐지, 서비스 품질 SLA 유지, 대시보드 기반 대응</td></tr><tr><td></td><td>분산 트레이싱</td><td>Zipkin, Jaeger 등과 연동</td><td>L7 라우팅 경로 확인, 오류/지연 병목 위치 시각화 분석 가능</td></tr><tr><td></td><td>로깅 및 실시간 분석</td><td>ELK, Fluent Bit, Splunk 등 로그 분석 파이프라인 구성</td><td>이상 징후 조기 탐지, 장애 원인 추적, 보안 감시에 필수</td></tr><tr><td></td><td>부하 테스트 / 카오스 테스트</td><td>JMeter, Locust, Chaos Monkey 등</td><td>시스템 안정성 검증, 과부하 대응력 평가, 용량 계획 수립</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th><strong>카테고리</strong></th><th><strong>용어</strong></th><th><strong>설명</strong></th></tr></thead><tbody><tr><td><strong>1. 구조 및 계층</strong></td><td>Layer 4 (L4)</td><td>전송 계층 (TCP/UDP) 에서 작동하는 로드 밸런싱. 속도가 빠르지만 콘텐츠 기반 라우팅은 불가.</td></tr><tr><td></td><td>Layer 7 (L7)</td><td>애플리케이션 계층 (HTTP/HTTPS) 에서 작동. URL/헤더 기반 라우팅 가능.</td></tr><tr><td></td><td>Reverse Proxy</td><td>클라이언트 요청을 대신 받아 내부 서버에 전달하는 중개 서버 역할. 대부분의 L7 LB 는 리버스 프록시 방식.</td></tr><tr><td></td><td>Ingress Controller</td><td>Kubernetes 환경에서 HTTP(S) 기반 트래픽을 라우팅하는 L7 컴포넌트. (예: NGINX, Istio 등)</td></tr><tr><td></td><td>Virtual IP (VIP)</td><td>LB 에서 사용하는 가상 IP 주소. 클라이언트는 이 주소를 통해 서비스에 접근함.</td></tr><tr><td></td><td>Backend Pool</td><td>로드 밸런서가 트래픽을 분산시키는 대상 서버 그룹.</td></tr><tr><td><strong>2. 분산 알고리즘</strong></td><td>Round Robin</td><td>서버에 순차적으로 요청을 분배하는 가장 기본적인 방식.</td></tr><tr><td></td><td>Least Connections</td><td>현재 연결 수가 가장 적은 서버로 요청을 보내는 방식.</td></tr><tr><td></td><td>Weighted Round Robin</td><td>서버별 가중치를 적용하여 요청을 분배. 서버 성능 차이를 반영할 때 사용.</td></tr><tr><td></td><td>IP Hash</td><td>클라이언트 IP 해시값을 기반으로 특정 서버에 요청을 고정할 수 있음.</td></tr><tr><td><strong>3. 세션 및 지속성</strong></td><td>Sticky Session (Session Affinity)</td><td>동일 클라이언트의 요청을 항상 같은 서버로 라우팅. 세션 일관성 유지 필요 시 사용됨.</td></tr><tr><td></td><td>Session Persistence</td><td>위 용어와 동일 의미. 보통 쿠키 또는 IP 기반으로 구현됨.</td></tr><tr><td><strong>4. 보안 및 암호화</strong></td><td>SSL Termination (TLS Termination)</td><td>LB 에서 암호화된 트래픽을 복호화한 후 내부로는 평문 전송. 서버 부하 감소 효과.</td></tr><tr><td></td><td>WAF (Web Application Firewall)</td><td>애플리케이션 계층의 공격 (XSS, SQLi 등) 을 방지하기 위한 보안 필터. 보통 L7 LB 와 통합됨.</td></tr><tr><td></td><td>Proxy Protocol</td><td>클라이언트의 원래 IP 주소를 백엔드 서버에 전달하는 프로토콜. 보안, 로깅 등에 필요.</td></tr><tr><td><strong>5. 고가용성 및 장애 대응</strong></td><td>Health Check</td><td>주기적으로 백엔드 서버 상태를 점검하여 장애 서버를 트래픽 대상에서 제외함.</td></tr><tr><td></td><td>Failover</td><td>장애 발생 시 자동으로 다른 정상 노드로 트래픽 전환.</td></tr><tr><td></td><td>Active-Active</td><td>모든 LB 또는 서버 인스턴스를 동시에 활성화하여 트래픽 분산.</td></tr><tr><td></td><td>Active-Passive</td><td>한 인스턴스는 활성 상태, 다른 인스턴스는 대기 상태로 운영. 장애 발생 시 전환됨.</td></tr><tr><td></td><td>High Availability (HA)</td><td>시스템이 장애 없이 지속적으로 서비스 제공 가능한 상태를 유지함.</td></tr><tr><td><strong>6. 트래픽 최적화 및 확장성</strong></td><td>SSL Offload</td><td>LB 에서 SSL 복호화를 처리하여 백엔드 부하 경감.</td></tr><tr><td></td><td>Auto Scaling</td><td>트래픽 증가/감소에 따라 서버 수를 자동 조절하는 기능.</td></tr><tr><td></td><td>Anycast</td><td>동일 IP 를 여러 지점에 배포하여 지리적으로 가까운 서버에 트래픽 분산.</td></tr><tr><td></td><td>GSLB (Global Server LB)</td><td>지리적으로 분산된 데이터센터 간 트래픽을 분산시키는 글로벌 로드 밸런싱 방식.</td></tr><tr><td><strong>7. 기타 및 연계 기술</strong></td><td>Service Discovery</td><td>동적으로 서버 목록을 감지하고 반영. Kubernetes, Consul 등에서 사용.</td></tr><tr><td></td><td>Content Switching</td><td>요청의 URI, 헤더 등 콘텐츠 기반으로 백엔드 선택.</td></tr><tr><td></td><td>Circuit Breaker</td><td>특정 서버 장애 감지 시, 추가 요청을 차단해 전체 시스템 보호.</td></tr><tr><td></td><td>Edge Server</td><td>사용자 가까운 위치에서 요청을 처리하여 지연을 줄이는 서버 구성. (CDN 과 유사)</td></tr><tr><td></td><td>API Gateway</td><td>인증, 속도 제한, 로깅 등을 처리하며 백엔드 API 로 요청을 전달. 마이크로서비스 아키텍처에서 자주 사용됨.</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><h3 id=확장성--로드-밸런서-개념>확장성 & 로드 밸런서 개념<a hidden class=anchor aria-hidden=true href=#확장성--로드-밸런서-개념>#</a></h3><ul><li><a href=https://cs.fyi/guide/scalability-for-dummies>Scalability for Dummies by cs.fyi</a></li><li><a href=https://www.nginx.com/resources/glossary/load-balancing/>Load Balancing Fundamentals | NGINX</a></li></ul><h3 id=nginx-기반-로드-밸런서-설계>NGINX 기반 로드 밸런서 설계<a hidden class=anchor aria-hidden=true href=#nginx-기반-로드-밸런서-설계>#</a></h3><ul><li><a href=https://www.nginx.com/blog/inside-nginx-how-we-designed-for-performance-scale/>Inside NGINX: How We Designed for Performance & Scale</a></li><li><a href=https://www.nginx.com/blog/load-balancing-with-nginx-plus/>Load Balancing with NGINX and NGINX Plus, Part 1</a></li><li><a href=https://www.nginx.com/blog/load-balancing-with-nginx-plus-part-2/>Load Balancing with NGINX and NGINX Plus, Part 2</a></li><li><a href=https://www.nginx.com/blog/choosing-nginx-plus-load-balancing-techniques/>Choosing an NGINX Plus Load‑Balancing Technique</a></li><li><a href=https://docs.nginx.com/nginx/admin-guide/load-balancer/tcp-udp-load-balancer/>TCP/UDP Load Balancing with NGINX</a></li></ul><h3 id=aws-elastic-load-balancing--kubernetes-연동>AWS Elastic Load Balancing & Kubernetes 연동<a hidden class=anchor aria-hidden=true href=#aws-elastic-load-balancing--kubernetes-연동>#</a></h3><ul><li><a href=https://docs.aws.amazon.com/elasticloadbalancing/>Elastic Load Balancing | AWS 공식 문서</a></li><li><a href=https://aws.amazon.com/elasticloadbalancing/application-load-balancer/>Application Load Balancer | AWS</a></li><li><a href=https://docs.aws.amazon.com/eks/latest/userguide/aws-load-balancer-controller.html>AWS Load Balancer Controller (EKS용)</a></li></ul><h3 id=gslb--글로벌-pop-구성>GSLB & 글로벌 PoP 구성<a hidden class=anchor aria-hidden=true href=#gslb--글로벌-pop-구성>#</a></h3><ul><li><a href=https://docs.nginx.com/nginx/deployment-guides/global-server-load-balancing/ns1-global-server-load-balancing/>Global Server Load Balancing with NS1 + NGINX Plus</a></li></ul><h3 id=nginx-일반-정보>NGINX 일반 정보<a hidden class=anchor aria-hidden=true href=#nginx-일반-정보>#</a></h3><ul><li><a href=https://en.wikipedia.org/wiki/Nginx>Nginx 위키백과</a></li></ul><hr></div></main><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>