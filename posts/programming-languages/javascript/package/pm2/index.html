<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>pm2 | hyunyoun's Blog</title>
<meta name=keywords content="Programming-Languages,Javascript,Package,pm2"><meta name=description content="PM2는 Node.js 애플리케이션을 위한 고급 프로덕션 프로세스 관리자."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/programming-languages/javascript/package/pm2/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.9a2bbe2d8b5afa9d4df22976abb7b72f1f7f1c467d2b30f03090108f9496ae6c.css integrity="sha256-miu+LYta+p1N8il2q7e3Lx9/HEZ9KzDwMJAQj5SWrmw=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/programming-languages/javascript/package/pm2/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/programming-languages/javascript/package/pm2/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="pm2"><meta property="og:description" content="PM2는 Node.js 애플리케이션을 위한 고급 프로덕션 프로세스 관리자."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-16T12:31:00+00:00"><meta property="article:modified_time" content="2024-12-16T12:31:00+00:00"><meta property="article:tag" content="Programming-Languages"><meta property="article:tag" content="Javascript"><meta property="article:tag" content="Package"><meta property="article:tag" content="Pm2"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="pm2"><meta name=twitter:description content="PM2는 Node.js 애플리케이션을 위한 고급 프로덕션 프로세스 관리자."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"posts","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Programming Languages","item":"https://buenhyden.github.io/posts/programming-languages/"},{"@type":"ListItem","position":3,"name":"Javascript","item":"https://buenhyden.github.io/posts/programming-languages/javascript/"},{"@type":"ListItem","position":4,"name":"","item":"https://buenhyden.github.io/posts/programming-languages/javascript/package/"},{"@type":"ListItem","position":5,"name":"pm2","item":"https://buenhyden.github.io/posts/programming-languages/javascript/package/pm2/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"pm2","name":"pm2","description":"PM2는 Node.js 애플리케이션을 위한 고급 프로덕션 프로세스 관리자.","keywords":["Programming-Languages","Javascript","Package","pm2"],"articleBody":"Pm2 PM2는 Node.js 애플리케이션을 위한 고급 프로덕션 프로세스 관리자.\n이는 내장된 로드 밸런서를 포함하고 있으며, 애플리케이션을 항상 실행 상태로 유지하고, 시스템 재부팅 시에도 자동으로 재시작할 수 있게 해주는 도구.\n프로세스 관리의 중요성:\n서버 애플리케이션을 운영할 때는 단순히 애플리케이션을 실행하는 것 이상의 관리가 필요하다.\n예기치 않은 충돌이 발생할 수 있고, 서버가 재시작될 수 있으며, 성능 모니터링이 필요할 수 있다.\nPM2는 이러한 운영 관련 문제들을 효과적으로 해결해주는 도구. 주요 기능 프로세스 관리:\n애플리케이션 시작, 중지, 재시작 시스템 재부팅 시 자동 재시작 클러스터 모드를 통한 로드 밸런싱 무중단 리로드 지원 모니터링:\nCPU 사용량과 메모리 사용량 모니터링 HTTP/HTTPS 트래픽 모니터링 에러 로그와 커스텀 메트릭스 추적 웹 기반 대시보드 제공 로깅:\n실시간 로그 확인 로그 로테이션 로그 파일 관리 배포 관리:\n여러 환경(개발, 스테이징, 프로덕션)에 대한 설정을 쉽게 관리할 수 있다. 설치 및 기본 사용법 설치 1 2 # 전역 설치 npm install -g pm2 명령어 pm2 start: 애플리케이션 시작 pm2 stop: 애플리케이션 중지 pm2 restart: 애플리케이션 재시작 pm2 delete: 프로세스 삭제 pm2 list: 실행 중인 프로세스 목록 확인 pm2 monit: 프로세스 모니터링 pm2 logs: 로그 확인 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 # 애플리케이션 시작 pm2 start app.js # 클러스터 모드로 시작 (CPU 코어 수만큼 프로세스 생성) pm2 start app.js -i max # 특정 개수의 인스턴스로 시작 pm2 start app.js -i 4 # 프로세스 목록 확인 pm2 list # 모니터링 pm2 monit # 로그 확인 pm2 logs # 프로세스 중지 pm2 stop app # 프로세스 재시작 pm2 restart app # 프로세스 삭제 pm2 delete app 설정 파일을 통한 고급 설정 PM2는 ecosystem.config.js 파일을 통해 더 상세한 설정이 가능하다:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 module.exports = { apps: [{ name: \"my-app\", script: \"./app.js\", instances: 4, exec_mode: \"cluster\", watch: true, env: { NODE_ENV: \"development\", }, env_production: { NODE_ENV: \"production\", }, error_file: \"logs/err.log\", out_file: \"logs/out.log\", log_date_format: \"YYYY-MM-DD HH:mm Z\", merge_logs: true, autorestart: true, max_memory_restart: \"1G\", cron_restart: \"0 0 * * *\" }] } 이 설정 파일은 다음과 같은 고급 기능들을 제공한다:\n여러 환경(개발/운영)에 대한 설정 자동 재시작 조건 설정 로그 관리 설정 크론 작업을 통한 정기적인 재시작 메모리 제한 설정 실제 운영 환경 예시 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 // 운영 환경 설정 예시 module.exports = { apps: [{ name: 'api-server', script: './api/app.js', instances: 'max', exec_mode: 'cluster', watch: false, max_memory_restart: '1G', env_production: { NODE_ENV: 'production', PORT: 3000, }, error_file: '/var/log/api-server/err.log', out_file: '/var/log/api-server/out.log', log_date_format: 'YYYY-MM-DD HH:mm:ss', merge_logs: true, autorestart: true, }, { name: 'worker', script: './worker/index.js', instances: 2, watch: false, env_production: { NODE_ENV: 'production', }, }] } // 실행 명령어 // pm2 start ecosystem.config.js --env production 모니터링과 로그 관리 PM2는 강력한 모니터링 기능을 제공한다.\npm2 monit 명령어를 통해 실시간으로 프로세스의 상태를 확인할 수 있으며, 웹 기반 대시보드인 PM2 Plus를 통해 더 상세한 모니터링이 가능하다.\n로그 관리도 가능하다:\n1 2 3 4 5 6 7 8 9 10 11 # 실시간 로그 확인 pm2 logs # 특정 애플리케이션의 로그만 확인 pm2 logs app-name # 에러 로그만 확인 pm2 logs --err # 로그 파일 위치 확인 pm2 desc app-name 클러스터 모드와 로드 밸런싱 PM2의 클러스터 모드는 Node.js의 cluster 모듈을 활용하여 여러 프로세스를 생성하고 요청을 분산시킨다.\n이를 통해 CPU 코어를 최대한 활용하고 애플리케이션의 성능을 향상시킬 수 있다.\n1 2 3 4 5 6 7 8 # CPU 코어 수만큼 프로세스 생성 pm2 start app.js -i max # 특정 개수의 프로세스 생성 pm2 start app.js -i 4 # 런타임에 프로세스 수 조정 pm2 scale app +3 실무에서 PM2를 사용할 때의 모범 사례 항상 ecosystem.config.js 파일을 사용하여 설정을 관리한다. 프로덕션 환경에서는 watch 모드를 비활성화한다. 적절한 메모리 제한을 설정한다. 로그 로테이션을 설정하여 디스크 공간을 관리한다. 모니터링을 통해 성능 문제를 사전에 감지한다. 참고 및 출처 ","wordCount":"643","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2024-12-16T12:31:00Z","dateModified":"2024-12-16T12:31:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/programming-languages/javascript/package/pm2/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>posts</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/programming-languages/>Programming Languages</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/programming-languages/javascript/>Javascript</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/programming-languages/javascript/package/></a></div><h1 class="post-title entry-hint-parent">pm2</h1><div class=post-description>PM2는 Node.js 애플리케이션을 위한 고급 프로덕션 프로세스 관리자.</div><div class=post-meta><span title='2024-12-16 12:31:00 +0000 UTC'>December 16, 2024</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;643 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Programming%20Languages/Javascript/Package/pm2.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#pm2>Pm2</a><ul><li><a href=#주요-기능>주요 기능</a></li><li><a href=#설치-및-기본-사용법>설치 및 기본 사용법</a></li><li><a href=#설정-파일을-통한-고급-설정>설정 파일을 통한 고급 설정</a></li><li><a href=#실제-운영-환경-예시>실제 운영 환경 예시</a></li><li><a href=#모니터링과-로그-관리>모니터링과 로그 관리</a></li><li><a href=#클러스터-모드와-로드-밸런싱>클러스터 모드와 로드 밸런싱</a></li><li><a href=#실무에서-pm2를-사용할-때의-모범-사례>실무에서 PM2를 사용할 때의 모범 사례</a></li></ul></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=pm2>Pm2<a hidden class=anchor aria-hidden=true href=#pm2>#</a></h2><p>PM2는 Node.js 애플리케이션을 위한 고급 프로덕션 프로세스 관리자.<br>이는 내장된 로드 밸런서를 포함하고 있으며, 애플리케이션을 항상 실행 상태로 유지하고, 시스템 재부팅 시에도 자동으로 재시작할 수 있게 해주는 도구.</p><p>프로세스 관리의 중요성:</p><ul><li>서버 애플리케이션을 운영할 때는 단순히 애플리케이션을 실행하는 것 이상의 관리가 필요하다.<br>예기치 않은 충돌이 발생할 수 있고, 서버가 재시작될 수 있으며, 성능 모니터링이 필요할 수 있다.<br>PM2는 이러한 운영 관련 문제들을 효과적으로 해결해주는 도구.</li></ul><h3 id=주요-기능>주요 기능<a hidden class=anchor aria-hidden=true href=#주요-기능>#</a></h3><ol><li><p>프로세스 관리:</p><ul><li>애플리케이션 시작, 중지, 재시작</li><li>시스템 재부팅 시 자동 재시작</li><li>클러스터 모드를 통한 로드 밸런싱</li><li>무중단 리로드 지원</li></ul></li><li><p>모니터링:</p><ul><li>CPU 사용량과 메모리 사용량 모니터링</li><li>HTTP/HTTPS 트래픽 모니터링</li><li>에러 로그와 커스텀 메트릭스 추적</li><li>웹 기반 대시보드 제공</li></ul></li><li><p>로깅:</p><ul><li>실시간 로그 확인</li><li>로그 로테이션</li><li>로그 파일 관리</li></ul></li><li><p>배포 관리:</p><ul><li>여러 환경(개발, 스테이징, 프로덕션)에 대한 설정을 쉽게 관리할 수 있다.</li></ul></li></ol><h3 id=설치-및-기본-사용법>설치 및 기본 사용법<a hidden class=anchor aria-hidden=true href=#설치-및-기본-사용법>#</a></h3><h4 id=설치>설치<a hidden class=anchor aria-hidden=true href=#설치>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 전역 설치</span>
</span></span><span class=line><span class=cl>npm install -g pm2
</span></span></code></pre></td></tr></table></div></div><h4 id=명령어>명령어<a hidden class=anchor aria-hidden=true href=#명령어>#</a></h4><ul><li>pm2 start: 애플리케이션 시작</li><li>pm2 stop: 애플리케이션 중지</li><li>pm2 restart: 애플리케이션 재시작</li><li>pm2 delete: 프로세스 삭제</li><li>pm2 list: 실행 중인 프로세스 목록 확인</li><li>pm2 monit: 프로세스 모니터링</li><li>pm2 logs: 로그 확인</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14>14</a>
</span><span class=lnt id=hl-1-15><a class=lnlinks href=#hl-1-15>15</a>
</span><span class=lnt id=hl-1-16><a class=lnlinks href=#hl-1-16>16</a>
</span><span class=lnt id=hl-1-17><a class=lnlinks href=#hl-1-17>17</a>
</span><span class=lnt id=hl-1-18><a class=lnlinks href=#hl-1-18>18</a>
</span><span class=lnt id=hl-1-19><a class=lnlinks href=#hl-1-19>19</a>
</span><span class=lnt id=hl-1-20><a class=lnlinks href=#hl-1-20>20</a>
</span><span class=lnt id=hl-1-21><a class=lnlinks href=#hl-1-21>21</a>
</span><span class=lnt id=hl-1-22><a class=lnlinks href=#hl-1-22>22</a>
</span><span class=lnt id=hl-1-23><a class=lnlinks href=#hl-1-23>23</a>
</span><span class=lnt id=hl-1-24><a class=lnlinks href=#hl-1-24>24</a>
</span><span class=lnt id=hl-1-25><a class=lnlinks href=#hl-1-25>25</a>
</span><span class=lnt id=hl-1-26><a class=lnlinks href=#hl-1-26>26</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 애플리케이션 시작</span>
</span></span><span class=line><span class=cl>pm2 start app.js
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 클러스터 모드로 시작 (CPU 코어 수만큼 프로세스 생성)</span>
</span></span><span class=line><span class=cl>pm2 start app.js -i max
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 특정 개수의 인스턴스로 시작</span>
</span></span><span class=line><span class=cl>pm2 start app.js -i <span class=m>4</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 프로세스 목록 확인</span>
</span></span><span class=line><span class=cl>pm2 list
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 모니터링</span>
</span></span><span class=line><span class=cl>pm2 monit
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 로그 확인</span>
</span></span><span class=line><span class=cl>pm2 logs
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 프로세스 중지</span>
</span></span><span class=line><span class=cl>pm2 stop app
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 프로세스 재시작</span>
</span></span><span class=line><span class=cl>pm2 restart app
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 프로세스 삭제</span>
</span></span><span class=line><span class=cl>pm2 delete app
</span></span></code></pre></td></tr></table></div></div><h3 id=설정-파일을-통한-고급-설정>설정 파일을 통한 고급 설정<a hidden class=anchor aria-hidden=true href=#설정-파일을-통한-고급-설정>#</a></h3><p>PM2는 ecosystem.config.js 파일을 통해 더 상세한 설정이 가능하다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span><span class=lnt id=hl-2-20><a class=lnlinks href=#hl-2-20>20</a>
</span><span class=lnt id=hl-2-21><a class=lnlinks href=#hl-2-21>21</a>
</span><span class=lnt id=hl-2-22><a class=lnlinks href=#hl-2-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>apps</span><span class=o>:</span> <span class=p>[{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;my-app&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>script</span><span class=o>:</span> <span class=s2>&#34;./app.js&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>instances</span><span class=o>:</span> <span class=mi>4</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>exec_mode</span><span class=o>:</span> <span class=s2>&#34;cluster&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>watch</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>env</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>NODE_ENV</span><span class=o>:</span> <span class=s2>&#34;development&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>env_production</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>NODE_ENV</span><span class=o>:</span> <span class=s2>&#34;production&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>error_file</span><span class=o>:</span> <span class=s2>&#34;logs/err.log&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>out_file</span><span class=o>:</span> <span class=s2>&#34;logs/out.log&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>log_date_format</span><span class=o>:</span> <span class=s2>&#34;YYYY-MM-DD HH:mm Z&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>merge_logs</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>autorestart</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>max_memory_restart</span><span class=o>:</span> <span class=s2>&#34;1G&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>cron_restart</span><span class=o>:</span> <span class=s2>&#34;0 0 * * *&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>이 설정 파일은 다음과 같은 고급 기능들을 제공한다:</p><ul><li>여러 환경(개발/운영)에 대한 설정</li><li>자동 재시작 조건 설정</li><li>로그 관리 설정</li><li>크론 작업을 통한 정기적인 재시작</li><li>메모리 제한 설정</li></ul><h3 id=실제-운영-환경-예시>실제 운영 환경 예시<a hidden class=anchor aria-hidden=true href=#실제-운영-환경-예시>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span><span class=lnt id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a>
</span><span class=lnt id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a>
</span><span class=lnt id=hl-3-17><a class=lnlinks href=#hl-3-17>17</a>
</span><span class=lnt id=hl-3-18><a class=lnlinks href=#hl-3-18>18</a>
</span><span class=lnt id=hl-3-19><a class=lnlinks href=#hl-3-19>19</a>
</span><span class=lnt id=hl-3-20><a class=lnlinks href=#hl-3-20>20</a>
</span><span class=lnt id=hl-3-21><a class=lnlinks href=#hl-3-21>21</a>
</span><span class=lnt id=hl-3-22><a class=lnlinks href=#hl-3-22>22</a>
</span><span class=lnt id=hl-3-23><a class=lnlinks href=#hl-3-23>23</a>
</span><span class=lnt id=hl-3-24><a class=lnlinks href=#hl-3-24>24</a>
</span><span class=lnt id=hl-3-25><a class=lnlinks href=#hl-3-25>25</a>
</span><span class=lnt id=hl-3-26><a class=lnlinks href=#hl-3-26>26</a>
</span><span class=lnt id=hl-3-27><a class=lnlinks href=#hl-3-27>27</a>
</span><span class=lnt id=hl-3-28><a class=lnlinks href=#hl-3-28>28</a>
</span><span class=lnt id=hl-3-29><a class=lnlinks href=#hl-3-29>29</a>
</span><span class=lnt id=hl-3-30><a class=lnlinks href=#hl-3-30>30</a>
</span><span class=lnt id=hl-3-31><a class=lnlinks href=#hl-3-31>31</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 운영 환경 설정 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>apps</span><span class=o>:</span> <span class=p>[{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;api-server&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>script</span><span class=o>:</span> <span class=s1>&#39;./api/app.js&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>instances</span><span class=o>:</span> <span class=s1>&#39;max&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>exec_mode</span><span class=o>:</span> <span class=s1>&#39;cluster&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>watch</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>max_memory_restart</span><span class=o>:</span> <span class=s1>&#39;1G&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>env_production</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>NODE_ENV</span><span class=o>:</span> <span class=s1>&#39;production&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>PORT</span><span class=o>:</span> <span class=mi>3000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>error_file</span><span class=o>:</span> <span class=s1>&#39;/var/log/api-server/err.log&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>out_file</span><span class=o>:</span> <span class=s1>&#39;/var/log/api-server/out.log&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>log_date_format</span><span class=o>:</span> <span class=s1>&#39;YYYY-MM-DD HH:mm:ss&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>merge_logs</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>autorestart</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;worker&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>script</span><span class=o>:</span> <span class=s1>&#39;./worker/index.js&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>instances</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>watch</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>env_production</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>NODE_ENV</span><span class=o>:</span> <span class=s1>&#39;production&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>}]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 실행 명령어
</span></span></span><span class=line><span class=cl><span class=c1>// pm2 start ecosystem.config.js --env production
</span></span></span></code></pre></td></tr></table></div></div><h3 id=모니터링과-로그-관리>모니터링과 로그 관리<a hidden class=anchor aria-hidden=true href=#모니터링과-로그-관리>#</a></h3><ul><li><p>PM2는 강력한 모니터링 기능을 제공한다.<br><code>pm2 monit</code> 명령어를 통해 실시간으로 프로세스의 상태를 확인할 수 있으며, 웹 기반 대시보드인 PM2 Plus를 통해 더 상세한 모니터링이 가능하다.</p></li><li><p>로그 관리도 가능하다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 실시간 로그 확인</span>
</span></span><span class=line><span class=cl>pm2 logs
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 특정 애플리케이션의 로그만 확인</span>
</span></span><span class=line><span class=cl>pm2 logs app-name
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 에러 로그만 확인</span>
</span></span><span class=line><span class=cl>pm2 logs --err
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 로그 파일 위치 확인</span>
</span></span><span class=line><span class=cl>pm2 desc app-name
</span></span></code></pre></td></tr></table></div></div></li></ul><h3 id=클러스터-모드와-로드-밸런싱>클러스터 모드와 로드 밸런싱<a hidden class=anchor aria-hidden=true href=#클러스터-모드와-로드-밸런싱>#</a></h3><p>PM2의 클러스터 모드는 Node.js의 cluster 모듈을 활용하여 여러 프로세스를 생성하고 요청을 분산시킨다.<br>이를 통해 CPU 코어를 최대한 활용하고 애플리케이션의 성능을 향상시킬 수 있다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2>2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3>3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4>4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5>5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6>6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7>7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># CPU 코어 수만큼 프로세스 생성</span>
</span></span><span class=line><span class=cl>pm2 start app.js -i max
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 특정 개수의 프로세스 생성</span>
</span></span><span class=line><span class=cl>pm2 start app.js -i <span class=m>4</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 런타임에 프로세스 수 조정</span>
</span></span><span class=line><span class=cl>pm2 scale app +3
</span></span></code></pre></td></tr></table></div></div><h3 id=실무에서-pm2를-사용할-때의-모범-사례>실무에서 PM2를 사용할 때의 모범 사례<a hidden class=anchor aria-hidden=true href=#실무에서-pm2를-사용할-때의-모범-사례>#</a></h3><ol><li>항상 ecosystem.config.js 파일을 사용하여 설정을 관리한다.</li><li>프로덕션 환경에서는 watch 모드를 비활성화한다.</li><li>적절한 메모리 제한을 설정한다.</li><li>로그 로테이션을 설정하여 디스크 공간을 관리한다.</li><li>모니터링을 통해 성능 문제를 사전에 감지한다.</li></ol><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/programming-languages/>Programming-Languages</a></li><li><a href=https://buenhyden.github.io/tags/javascript/>Javascript</a></li><li><a href=https://buenhyden.github.io/tags/package/>Package</a></li><li><a href=https://buenhyden.github.io/tags/pm2/>Pm2</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/qa/qc/test/test-design/black-box-testing/scenario-testing-vs-use-case-testing/><span class=title>« Prev</span><br><span>Scenario Testing vs Use Case Testing</span>
</a><a class=next href=https://buenhyden.github.io/posts/frontend/stylesheet/less/><span class=title>Next »</span><br><span>LESS</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>