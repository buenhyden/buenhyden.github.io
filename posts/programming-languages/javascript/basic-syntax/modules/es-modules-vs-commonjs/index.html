<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ES Modules Vs CommonJS | hyunyoun's Blog</title>
<meta name=keywords content="Programming-Languages,Javascript,Basic-Syntax,Modules,ES-Modules,CommonJS"><meta name=description content="ES Modules(ESM)과 CommonJS(CJS)는 JavaScript에서 사용되는 두 가지 주요 모듈 시스템이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/programming-languages/javascript/basic-syntax/modules/es-modules-vs-commonjs/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.9a2bbe2d8b5afa9d4df22976abb7b72f1f7f1c467d2b30f03090108f9496ae6c.css integrity="sha256-miu+LYta+p1N8il2q7e3Lx9/HEZ9KzDwMJAQj5SWrmw=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/programming-languages/javascript/basic-syntax/modules/es-modules-vs-commonjs/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/programming-languages/javascript/basic-syntax/modules/es-modules-vs-commonjs/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="ES Modules Vs CommonJS"><meta property="og:description" content="ES Modules(ESM)과 CommonJS(CJS)는 JavaScript에서 사용되는 두 가지 주요 모듈 시스템이다."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-22T04:26:00+00:00"><meta property="article:modified_time" content="2024-12-22T04:26:00+00:00"><meta property="article:tag" content="Programming-Languages"><meta property="article:tag" content="Javascript"><meta property="article:tag" content="Basic-Syntax"><meta property="article:tag" content="Modules"><meta property="article:tag" content="ES-Modules"><meta property="article:tag" content="CommonJS"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="ES Modules Vs CommonJS"><meta name=twitter:description content="ES Modules(ESM)과 CommonJS(CJS)는 JavaScript에서 사용되는 두 가지 주요 모듈 시스템이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"posts","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Programming Languages","item":"https://buenhyden.github.io/posts/programming-languages/"},{"@type":"ListItem","position":3,"name":"Javascript","item":"https://buenhyden.github.io/posts/programming-languages/javascript/"},{"@type":"ListItem","position":4,"name":"Basic Syntax","item":"https://buenhyden.github.io/posts/programming-languages/javascript/basic-syntax/"},{"@type":"ListItem","position":5,"name":"Modules in Javascript","item":"https://buenhyden.github.io/posts/programming-languages/javascript/basic-syntax/modules/"},{"@type":"ListItem","position":6,"name":"ES Modules Vs CommonJS","item":"https://buenhyden.github.io/posts/programming-languages/javascript/basic-syntax/modules/es-modules-vs-commonjs/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ES Modules Vs CommonJS","name":"ES Modules Vs CommonJS","description":"ES Modules(ESM)과 CommonJS(CJS)는 JavaScript에서 사용되는 두 가지 주요 모듈 시스템이다.","keywords":["Programming-Languages","Javascript","Basic-Syntax","Modules","ES-Modules","CommonJS"],"articleBody":"ES Modules Vs CommonJS 자바스크립트 애플리케이션이 복잡해지면서 코드를 모듈화하는 방법이 중요해졌다.\n이에 두 가지 주요 모듈 시스템인 CommonJS와 ES Modules가 등장했다.\n이 두 시스템은 각각 고유한 특성과 사용 사례를 가지고 있다.\nJavaScript 모듈 시스템의 선택은 프로젝트의 요구 사항, 타겟 환경, 그리고 기존 코드베이스에 크게 의존한다.\n최신 프로젝트에서는 ES Modules의 채택이 증가하는 추세이지만, CommonJS는 Node.js 생태계에서 여전히 중요한 역할을 하고 있다.\n두 시스템의 장단점을 이해하고, 필요에 따라 적절한 시스템을 선택하거나 하이브리드 접근 방식을 채택하는 것이 좋다. 또한, 점진적으로 ES Modules로 마이그레이션하는 전략을 고려할 수 있으며, 이를 통해 모던 JavaScript의 이점을 활용하면서 기존 코드의 호환성도 유지할 수 있다.\nES Modules (ESM) 역사 및 배경 ES Modules는 ECMAScript 2015(ES6)에서 JavaScript의 공식 표준 모듈 시스템으로 도입되었다. 웹 브라우저와 서버 환경 모두에서 일관된 모듈화 방식을 제공하기 위해 설계되었으며, JavaScript 언어 자체에 내장된 기능이다.\n핵심 특징 및 문법 정적 구조\nESM의 가장 중요한 특징 중 하나는 정적 구조이다.\n모든 가져오기와 내보내기가 파일 최상위에서 정적으로 선언되어야 한다.\n1 2 3 4 5 6 7 8 9 10 11 // math.js export const PI = 3.14159; export function add(a, b) { return a + b; } export default class Calculator { // 클래스 구현 } // app.js import Calculator, { PI, add } from './math.js'; 명명된 내보내기와 기본 내보내기\nESM은 두 가지 유형의 내보내기를 지원한다:\n1 2 3 4 5 6 // named exports export const name = 'value'; export function myFunction() { /* … */ } // default export (파일당 하나만 가능) export default function() { /* … */ } 비동기 로딩 지원\nESM은 import() 함수를 통한 동적 가져오기를 지원하여 필요할 때만 모듈을 로드할 수 있다:\n1 2 3 4 5 6 7 // 필요할 때만 로드 if (condition) { import('./heavy-module.js') .then(module =\u003e { // 모듈 사용 }); } ES Modules 권장 상황 새 프로젝트 시작 시: 미래 호환성 고려 브라우저 환경에서 실행되는 코드: 네이티브 지원 트리 쉐이킹이 중요한 경우: 번들 크기 최적화 Deno 기반 프로젝트: 기본 지원 최신 문법과 기능을 활용하는 프로젝트: Top-level await 등 CommonJS (CJS) 역사 및 배경 CommonJS는 2009년에 개발되었으며, 주로 브라우저 외부 환경(특히 서버 사이드)에서 JavaScript를 실행하기 위한 모듈 시스템이다.\nNode.js가 이 시스템을 기본 모듈 시스템으로 채택하면서 널리 사용되기 시작했다.\n핵심 특징 및 문법 동적 구조\nCommonJS는 런타임에 모듈을 로드하는 동적 구조를 가지고 있어 조건부 로딩이 쉽다:\n1 2 3 4 5 // 조건부 모듈 로딩 if (process.env.NODE_ENV === 'development') { const devModule = require('./dev-module'); devModule.setup(); } 내보내기 방식\nCommonJS에서는 module.exports 또는 exports 객체를 통해 값을 내보낸다:\n1 2 3 4 5 6 7 8 9 10 11 12 // 단일 값 내보내기 module.exports = function() { /* … */ }; // 객체로 여러 값 내보내기 exports.name = 'value'; exports.myFunction = function() { /* … */ }; // 또는 module.exports = { name: 'value', myFunction: function() { /* … */ } }; 가져오기 방식\nCommonJS에서는 require() 함수를 사용하여 모듈을 가져온다:\n1 2 const fs = require('fs'); const { myFunction } = require('./my-module'); CommonJS 권장 상황 레거시 Node.js 코드베이스: 호환성 유지 빠른 프로토타이핑: 간단한 require() 구문 동적 모듈 로딩이 필요한 경우: 런타임 경로 결정 Node.js 특화 도구 및 유틸리티: 내장 모듈과 호환성 오래된 패키지와의 호환성이 중요한 경우: 생태계 통합 두 모듈 시스템의 비교 분석 로딩 메커니즘\nES Modules: 정적 로딩을 기본으로 하며, 코드 실행 전에 모듈 구조를 분석한다. 이는 더 나은 트리 쉐이킹과 최적화를 가능하게 한다. CommonJS: 동적 로딩을 사용하여 런타임에 모듈을 로드한다. 이는 조건부 로딩에 유리하지만 정적 분석을 어렵게 만든다. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 // ESM - 정적 구조로 인해 이런 동적 가져오기는 기본적으로 불가능 import { feature } from './module.js'; // 항상 로드됨 // 동적 가져오기는 별도 문법 필요 async function loadFeature() { const module = await import('./module.js'); return module.feature; } // CommonJS - 런타임에 결정되는 동적 로딩 가능 if (condition) { const feature = require(`./features/${featureName}`); feature.activate(); } 문법 및 사용성\nES Modules: 명확한 import/export 문법 구조 분해를 통한 부분 가져오기가 간결함 기본 내보내기와 명명된 내보내기 구분이 명확함 항상 import 문이 파일 최상위에 위치해야 함 CommonJS: require()/module.exports 문법 사용 함수 호출 기반이라 코드 어디서나 사용 가능 구조 분해를 통한 가져오기가 약간 더 장황할 수 있음 내보내기 구분이 덜 명확함 (모두 객체 속성으로 취급) 비동기 처리\nES Modules: 기본적으로 모듈을 동기적으로 로드 동적 가져오기(import())를 통한 비동기 로딩 지원 Top-level await 지원 (ES2022부터) CommonJS: 기본적으로 동기적 로딩만 지원 비동기 로딩을 위한 추가적인 패턴 필요 Top-level await 미지원 1 2 3 4 5 6 7 8 9 10 11 // ESM - Top-level await (ES2022+) // database.js export const db = await initDatabase(); // CommonJS - Top-level await 불가능 // database.js let db; initDatabase().then(result =\u003e { db = result; }); module.exports = { get db() { return db; } }; 순환 의존성 처리\nES Modules: 순환 참조를 더 잘 처리함 바인딩을 참조로 가져와 실시간 값 반영 CommonJS: 순환 참조 처리가 제한적임 모듈이 완전히 평가되기 전에 참조하면 빈 객체 반환 가능성 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 // ESM 순환 참조 예제 // a.js import * as b from './b.js'; export let done = false; console.log('b.done in a:', b.done); setTimeout(() =\u003e { done = true; }, 100); // b.js import * as a from './a.js'; export let done = false; console.log('a.done in b:', a.done); setTimeout(() =\u003e { done = true; }, 200); // 참조가 실시간으로 업데이트됨 브라우저 및 환경 지원\nES Modules: 현대적인 모든 브라우저에서 네이티브 지원 Node.js에서 공식 지원 (확장자.mjs 또는 package.json의 “type”: “module”) Deno에서 기본 모듈 시스템 CommonJS: 브라우저에서 직접 지원하지 않음 (번들러 필요) Node.js의 기본 모듈 시스템 Deno에서는 지원하지 않음 파일 확장자 및 경로\nES Modules: Node.js에서 파일 확장자를 명시해야 함 URL 기반 경로 시스템 (브라우저 호환성) CommonJS: Node.js에서 파일 확장자 생략 가능 파일 시스템 기반 경로 1 2 3 4 5 // ESM - 확장자 필수 import { feature } from './module.js'; // CommonJS - 확장자 생략 가능 const feature = require('./module'); 빌드 도구 통합\nES Modules: 트리 쉐이킹에 최적화됨 정적 분석 가능성으로 더 나은 최적화 번들 사이즈 축소에 유리 CommonJS: 동적 구조로 인해 트리 쉐이킹이 어려움 번들 사이즈가 더 클 수 있음 일부 최적화 기법 적용 제한 성능 특성\nES Modules: 정적 구조로 인한 컴파일 타임 최적화 가능 더 나은 트리 쉐이킹으로 번들 크기 감소 병렬 로딩 가능 CommonJS: 동적 로딩으로 필요한 코드만 로드 가능 런타임 평가로 인한 일부 성능 오버헤드 모듈 캐싱으로 중복 로딩 방지 문법 및 사용성 Import Vs Require require는 Node.js에서 사용되는 CommonJS 모듈 시스템의 키워드로, 동기적으로 모듈을 로드하며 프로그램의 어느 지점에서나 호출할 수 있다. 반면에 import는 ES6에서 도입된 모듈 시스템의 키워드로, 코드 실행 전에 모듈을 미리 로드하며 파일의 시작 부분에서만 사용할 수 있다. 따라서 프로젝트의 환경과 요구 사항에 따라 적절한 키워드를 선택하여 사용하는 것이 중요하다.\nImport ES6(ES2015)에서 도입된 모듈 시스템으로, JavaScript의 공식 표준 모듈 시스템. 정적 임포트 방식을 사용하며, 브라우저에서 기본적으로 지원된다.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 // 기본 가져오기 import module from './module'; // 부분 가져오기 import { function1, function2 } from './module'; // 모든 것을 객체로 가져오기 import * as moduleObject from './module'; // 이름 변경하여 가져오기 import { originalName as newName } from './module'; // 가져오기와 실행만 하기 import './module'; Require (CommonJS) Node.js에서 기본적으로 사용되는 모듈 시스템으로, 동적 임포트를 지원한다. 런타임에 모듈을 로드할 수 있다.\n1 2 3 4 5 6 7 8 9 // 기본 가져오기 const module = require('./module'); // 구조 분해 할당으로 부분 가져오기 const { function1, function2 } = require('./module'); // 동적 경로로 가져오기 const moduleName = 'myModule'; const module = require(`./${moduleName}`); Import와 Require의 비교 분석 특성 import (ES Modules) require (CommonJS) 문법 정적이고 선언적인 문법 함수 호출 방식의 동적 문법 로딩 시점 파일의 시작 부분에서 정적으로 로드 코드 실행 중 어느 시점에서나 동적으로 로드 가능 비동기 지원 비동기 로딩 지원 (import()) 동기적 로딩만 지원 브라우저 지원 모던 브라우저에서 기본 지원 브라우저에서 직접 사용 불가 (번들러 필요) 트리 쉐이킹 지원 (사용하지 않는 코드 제거 가능) 지원하지 않음 순환 참조 더 나은 순환 참조 처리 부분적인 순환 참조 처리 캐싱 모듈 단위로 캐싱 파일 경로 기반 캐싱 조건부 로딩 정적 분석으로 인해 제한적 조건부 로딩 가능 Node.js 지원 Node.js 13.2.0부터 실험적 지원 기본적으로 지원 번들링 번들러 지원 필요 없음 번들러 필요 메모리 사용 더 효율적 (정적 분석 가능) 상대적으로 덜 효율적 모듈 시스템 전환 및 호환성 Node.js에서 두 시스템 함께 사용하기 최신 Node.js에서는 두 모듈 시스템을 모두 지원하며, 다음과 같은 방법으로 구분한다:\n파일 확장자 기반:\n.mjs: ES 모듈로 처리 .cjs: CommonJS 모듈로 처리 .js: package.json의 “type” 필드에 따라 결정 package.json 설정:\n1 2 3 { \"type\": \"module\" // 기본값은 \"commonjs\" } 상호 호출:\nES 모듈에서 CommonJS 모듈 가져오기: 일반 import 구문 사용 CommonJS에서 ES 모듈 가져오기: 동적 import() 함수 사용 하이브리드 패키지 배포 패키지를 두 모듈 시스템 모두에 호환되게 배포하는 방법:\n1 2 3 4 5 6 7 8 9 10 { \"name\": \"my-package\", \"type\": \"module\", \"exports\": { \".\": { \"import\": \"./dist/index.mjs\", \"require\": \"./dist/index.cjs\" } } } ES Modules Vs CommonJS 특성 비교 특성 ES Modules (ESM) CommonJS (CJS) 표준화 ECMAScript 공식 표준 커뮤니티 규약 도입 시기 ECMAScript 2015 (ES6) 2009년 주요 환경 브라우저, Node.js, Deno Node.js 문법 import/export require()/module.exports 로딩 방식 정적 (분석 시점) 동적 (런타임) 파일 확장자 필수 (Node.js) 선택적 경로 형식 URL 기반 파일 시스템 기반 비동기 로딩 기본 지원 (import()) 기본 미지원 (별도 패턴 필요) Top-level await 지원 (ES2022+) 미지원 트리 쉐이킹 최적화됨 제한적 순환 참조 처리 완전 지원 (실시간 바인딩) 제한적 지원 브라우저 지원 네이티브 지원 불가 (번들러 필요) 조건부 로딩 제한적 (동적 import() 필요) 용이함 모듈 스코프 파일 스코프 함수 스코프 전역 객체 없음 (import.meta 사용) __dirname, __filename 등 호이스팅 가져오기가 호이스팅됨 require()는 호이스팅되지 않음 코드 분할 용이함 어려움 빌드 도구 최적화 높음 중간 번들 크기 작음 (트리 쉐이킹) 큼 (전체 모듈 포함) 레거시 코드베이스 적음 많음 Node.js 기본 방식 v13.2.0+ 지원, 기본은 아님 기본 시스템 실행 환경 항상 strict 모드 strict 모드 선택적 프로퍼티 접근 정적 바인딩 (내보낸 이후 변경 불가) 객체 참조 (내보낸 후 변경 가능) 참고 및 출처 ","wordCount":"1608","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2024-12-22T04:26:00Z","dateModified":"2024-12-22T04:26:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/programming-languages/javascript/basic-syntax/modules/es-modules-vs-commonjs/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>posts</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/programming-languages/>Programming Languages</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/programming-languages/javascript/>Javascript</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/programming-languages/javascript/basic-syntax/>Basic Syntax</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/programming-languages/javascript/basic-syntax/modules/>Modules in Javascript</a></div><h1 class="post-title entry-hint-parent">ES Modules Vs CommonJS</h1><div class=post-description>ES Modules(ESM)과 CommonJS(CJS)는 JavaScript에서 사용되는 두 가지 주요 모듈 시스템이다.</div><div class=post-meta><span title='2024-12-22 04:26:00 +0000 UTC'>December 22, 2024</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;1608 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Programming%20Languages/Javascript/Basic%20Syntax/Modules/es-modules-vs-commonjs.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#es-modules-vs-commonjs>ES Modules Vs CommonJS</a><ul><li><a href=#es-modules-esm>ES Modules (ESM)</a></li><li><a href=#commonjs-cjs>CommonJS (CJS)</a></li><li><a href=#두-모듈-시스템의-비교-분석>두 모듈 시스템의 비교 분석</a></li><li><a href=#모듈-시스템-전환-및-호환성>모듈 시스템 전환 및 호환성</a></li><li><a href=#es-modules-vs-commonjs-특성-비교>ES Modules Vs CommonJS 특성 비교</a></li></ul></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=es-modules-vs-commonjs>ES Modules Vs CommonJS<a hidden class=anchor aria-hidden=true href=#es-modules-vs-commonjs>#</a></h2><p>자바스크립트 애플리케이션이 복잡해지면서 코드를 모듈화하는 방법이 중요해졌다.<br>이에 두 가지 주요 모듈 시스템인 CommonJS와 ES Modules가 등장했다.<br>이 두 시스템은 각각 고유한 특성과 사용 사례를 가지고 있다.</p><p>JavaScript 모듈 시스템의 선택은 프로젝트의 요구 사항, 타겟 환경, 그리고 기존 코드베이스에 크게 의존한다.<br>최신 프로젝트에서는 ES Modules의 채택이 증가하는 추세이지만, CommonJS는 Node.js 생태계에서 여전히 중요한 역할을 하고 있다.</p><p>두 시스템의 장단점을 이해하고, 필요에 따라 적절한 시스템을 선택하거나 하이브리드 접근 방식을 채택하는 것이 좋다. 또한, 점진적으로 ES Modules로 마이그레이션하는 전략을 고려할 수 있으며, 이를 통해 모던 JavaScript의 이점을 활용하면서 기존 코드의 호환성도 유지할 수 있다.</p><h3 id=es-modules-esm>ES Modules (ESM)<a hidden class=anchor aria-hidden=true href=#es-modules-esm>#</a></h3><h4 id=역사-및-배경>역사 및 배경<a hidden class=anchor aria-hidden=true href=#역사-및-배경>#</a></h4><p>ES Modules는 ECMAScript 2015(ES6)에서 JavaScript의 공식 표준 모듈 시스템으로 도입되었다. 웹 브라우저와 서버 환경 모두에서 일관된 모듈화 방식을 제공하기 위해 설계되었으며, JavaScript 언어 자체에 내장된 기능이다.</p><h4 id=핵심-특징-및-문법>핵심 특징 및 문법<a hidden class=anchor aria-hidden=true href=#핵심-특징-및-문법>#</a></h4><ol><li><p>정적 구조<br>ESM의 가장 중요한 특징 중 하나는 정적 구조이다.<br>모든 가져오기와 내보내기가 파일 최상위에서 정적으로 선언되어야 한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// math.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kr>const</span> <span class=nx>PI</span> <span class=o>=</span> <span class=mf>3.14159</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kd>function</span> <span class=nx>add</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>a</span> <span class=o>+</span> <span class=nx>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=kr>class</span> <span class=nx>Calculator</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 클래스 구현
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// app.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=nx>Calculator</span><span class=p>,</span> <span class=p>{</span> <span class=nx>PI</span><span class=p>,</span> <span class=nx>add</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;./math.js&#39;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>명명된 내보내기와 기본 내보내기<br>ESM은 두 가지 유형의 내보내기를 지원한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5>5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// named exports
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kr>const</span> <span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;value&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kd>function</span> <span class=nx>myFunction</span><span class=p>()</span> <span class=p>{</span> <span class=cm>/* … */</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// default export (파일당 하나만 가능)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span> <span class=cm>/* … */</span> <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>비동기 로딩 지원<br>ESM은 <code>import()</code> 함수를 통한 동적 가져오기를 지원하여 필요할 때만 모듈을 로드할 수 있다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2>2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3>3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4>4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5>5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6>6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 필요할 때만 로드
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>if</span> <span class=p>(</span><span class=nx>condition</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>import</span><span class=p>(</span><span class=s1>&#39;./heavy-module.js&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>module</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 모듈 사용
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><h4 id=es-modules-권장-상황>ES Modules 권장 상황<a hidden class=anchor aria-hidden=true href=#es-modules-권장-상황>#</a></h4><ol><li><strong>새 프로젝트 시작 시</strong>: 미래 호환성 고려</li><li><strong>브라우저 환경에서 실행되는 코드</strong>: 네이티브 지원</li><li><strong>트리 쉐이킹이 중요한 경우</strong>: 번들 크기 최적화</li><li><strong>Deno 기반 프로젝트</strong>: 기본 지원</li><li><strong>최신 문법과 기능을 활용하는 프로젝트</strong>: Top-level await 등</li></ol><h3 id=commonjs-cjs>CommonJS (CJS)<a hidden class=anchor aria-hidden=true href=#commonjs-cjs>#</a></h3><h4 id=역사-및-배경-1>역사 및 배경<a hidden class=anchor aria-hidden=true href=#역사-및-배경-1>#</a></h4><p>CommonJS는 2009년에 개발되었으며, 주로 브라우저 외부 환경(특히 서버 사이드)에서 JavaScript를 실행하기 위한 모듈 시스템이다.<br>Node.js가 이 시스템을 기본 모듈 시스템으로 채택하면서 널리 사용되기 시작했다.</p><h4 id=핵심-특징-및-문법-1>핵심 특징 및 문법<a hidden class=anchor aria-hidden=true href=#핵심-특징-및-문법-1>#</a></h4><ol><li><p>동적 구조<br>CommonJS는 런타임에 모듈을 로드하는 동적 구조를 가지고 있어 조건부 로딩이 쉽다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2>2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3>3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4>4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 조건부 모듈 로딩
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>if</span> <span class=p>(</span><span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>NODE_ENV</span> <span class=o>===</span> <span class=s1>&#39;development&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>devModule</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;./dev-module&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>devModule</span><span class=p>.</span><span class=nx>setup</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>내보내기 방식<br>CommonJS에서는 <code>module.exports</code> 또는 <code>exports</code> 객체를 통해 값을 내보낸다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 단일 값 내보내기
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span> <span class=cm>/* … */</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 객체로 여러 값 내보내기
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>exports</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;value&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>exports</span><span class=p>.</span><span class=nx>myFunction</span> <span class=o>=</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span> <span class=cm>/* … */</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 또는
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;value&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>myFunction</span><span class=o>:</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span> <span class=cm>/* … */</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>가져오기 방식<br>CommonJS에서는 <code>require()</code> 함수를 사용하여 모듈을 가져온다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>fs</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;fs&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>myFunction</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;./my-module&#39;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><h4 id=commonjs-권장-상황>CommonJS 권장 상황<a hidden class=anchor aria-hidden=true href=#commonjs-권장-상황>#</a></h4><ol><li><strong>레거시 Node.js 코드베이스</strong>: 호환성 유지</li><li><strong>빠른 프로토타이핑</strong>: 간단한 <code>require()</code> 구문</li><li><strong>동적 모듈 로딩이 필요한 경우</strong>: 런타임 경로 결정</li><li><strong>Node.js 특화 도구 및 유틸리티</strong>: 내장 모듈과 호환성</li><li><strong>오래된 패키지와의 호환성이 중요한 경우</strong>: 생태계 통합</li></ol><h3 id=두-모듈-시스템의-비교-분석>두 모듈 시스템의 비교 분석<a hidden class=anchor aria-hidden=true href=#두-모듈-시스템의-비교-분석>#</a></h3><ol><li><p>로딩 메커니즘</p><ul><li><strong>ES Modules</strong>: 정적 로딩을 기본으로 하며, 코드 실행 전에 모듈 구조를 분석한다. 이는 더 나은 트리 쉐이킹과 최적화를 가능하게 한다.</li><li><strong>CommonJS</strong>: 동적 로딩을 사용하여 런타임에 모듈을 로드한다. 이는 조건부 로딩에 유리하지만 정적 분석을 어렵게 만든다.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// ESM - 정적 구조로 인해 이런 동적 가져오기는 기본적으로 불가능
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>feature</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;./module.js&#39;</span><span class=p>;</span>  <span class=c1>// 항상 로드됨
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// 동적 가져오기는 별도 문법 필요
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>async</span> <span class=kd>function</span> <span class=nx>loadFeature</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>module</span> <span class=o>=</span> <span class=kr>await</span> <span class=kr>import</span><span class=p>(</span><span class=s1>&#39;./module.js&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>module</span><span class=p>.</span><span class=nx>feature</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// CommonJS - 런타임에 결정되는 동적 로딩 가능
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>if</span> <span class=p>(</span><span class=nx>condition</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>feature</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=sb>`./features/</span><span class=si>${</span><span class=nx>featureName</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>feature</span><span class=p>.</span><span class=nx>activate</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>문법 및 사용성</p><ul><li><strong>ES Modules</strong>:<ul><li>명확한 <code>import</code>/<code>export</code> 문법</li><li>구조 분해를 통한 부분 가져오기가 간결함</li><li>기본 내보내기와 명명된 내보내기 구분이 명확함</li><li>항상 <code>import</code> 문이 파일 최상위에 위치해야 함</li></ul></li><li><strong>CommonJS</strong>:<ul><li><code>require()</code>/<code>module.exports</code> 문법 사용</li><li>함수 호출 기반이라 코드 어디서나 사용 가능</li><li>구조 분해를 통한 가져오기가 약간 더 장황할 수 있음</li><li>내보내기 구분이 덜 명확함 (모두 객체 속성으로 취급)</li></ul></li></ul></li><li><p>비동기 처리</p><ul><li><strong>ES Modules</strong>:<ul><li>기본적으로 모듈을 동기적으로 로드</li><li>동적 가져오기(<code>import()</code>)를 통한 비동기 로딩 지원</li><li>Top-level await 지원 (ES2022부터)</li></ul></li><li><strong>CommonJS</strong>:<ul><li>기본적으로 동기적 로딩만 지원</li><li>비동기 로딩을 위한 추가적인 패턴 필요</li><li>Top-level await 미지원</li></ul></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// ESM - Top-level await (ES2022+)
</span></span></span><span class=line><span class=cl><span class=c1>// database.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kr>const</span> <span class=nx>db</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>initDatabase</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// CommonJS - Top-level await 불가능
</span></span></span><span class=line><span class=cl><span class=c1>// database.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>db</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>initDatabase</span><span class=p>().</span><span class=nx>then</span><span class=p>(</span><span class=nx>result</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>db</span> <span class=o>=</span> <span class=nx>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>get</span> <span class=nx>db</span><span class=p>()</span> <span class=p>{</span> <span class=k>return</span> <span class=nx>db</span><span class=p>;</span> <span class=p>}</span> <span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>순환 의존성 처리</p><ul><li><strong>ES Modules</strong>:<ul><li>순환 참조를 더 잘 처리함</li><li>바인딩을 참조로 가져와 실시간 값 반영</li></ul></li><li><strong>CommonJS</strong>:<ul><li>순환 참조 처리가 제한적임</li><li>모듈이 완전히 평가되기 전에 참조하면 빈 객체 반환 가능성</li></ul></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span><span class=lnt id=hl-8-15><a class=lnlinks href=#hl-8-15>15</a>
</span><span class=lnt id=hl-8-16><a class=lnlinks href=#hl-8-16>16</a>
</span><span class=lnt id=hl-8-17><a class=lnlinks href=#hl-8-17>17</a>
</span><span class=lnt id=hl-8-18><a class=lnlinks href=#hl-8-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// ESM 순환 참조 예제
</span></span></span><span class=line><span class=cl><span class=c1>// a.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=o>*</span> <span class=nx>as</span> <span class=nx>b</span> <span class=nx>from</span> <span class=s1>&#39;./b.js&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kd>let</span> <span class=nx>done</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;b.done in a:&#39;</span><span class=p>,</span> <span class=nx>b</span><span class=p>.</span><span class=nx>done</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>setTimeout</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>done</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=mi>100</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// b.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=o>*</span> <span class=nx>as</span> <span class=nx>a</span> <span class=nx>from</span> <span class=s1>&#39;./a.js&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kd>let</span> <span class=nx>done</span> <span class=o>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;a.done in b:&#39;</span><span class=p>,</span> <span class=nx>a</span><span class=p>.</span><span class=nx>done</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>setTimeout</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>done</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=mi>200</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 참조가 실시간으로 업데이트됨
</span></span></span></code></pre></td></tr></table></div></div></li><li><p>브라우저 및 환경 지원</p><ul><li><strong>ES Modules</strong>:<ul><li>현대적인 모든 브라우저에서 네이티브 지원</li><li>Node.js에서 공식 지원 (확장자.mjs 또는 package.json의 &ldquo;type&rdquo;: &ldquo;module&rdquo;)</li><li>Deno에서 기본 모듈 시스템</li></ul></li><li><strong>CommonJS</strong>:<ul><li>브라우저에서 직접 지원하지 않음 (번들러 필요)</li><li>Node.js의 기본 모듈 시스템</li><li>Deno에서는 지원하지 않음</li></ul></li></ul></li><li><p>파일 확장자 및 경로</p><ul><li><strong>ES Modules</strong>:<ul><li>Node.js에서 파일 확장자를 명시해야 함</li><li>URL 기반 경로 시스템 (브라우저 호환성)</li></ul></li><li><strong>CommonJS</strong>:<ul><li>Node.js에서 파일 확장자 생략 가능</li><li>파일 시스템 기반 경로</li></ul></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1>1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2>2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3>3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4>4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// ESM - 확장자 필수
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>feature</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;./module.js&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// CommonJS - 확장자 생략 가능
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>feature</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;./module&#39;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>빌드 도구 통합</p><ul><li><strong>ES Modules</strong>:<ul><li>트리 쉐이킹에 최적화됨</li><li>정적 분석 가능성으로 더 나은 최적화</li><li>번들 사이즈 축소에 유리</li></ul></li><li><strong>CommonJS</strong>:<ul><li>동적 구조로 인해 트리 쉐이킹이 어려움</li><li>번들 사이즈가 더 클 수 있음</li><li>일부 최적화 기법 적용 제한</li></ul></li></ul></li><li><p>성능 특성</p><ul><li><strong>ES Modules</strong>:<ul><li>정적 구조로 인한 컴파일 타임 최적화 가능</li><li>더 나은 트리 쉐이킹으로 번들 크기 감소</li><li>병렬 로딩 가능</li></ul></li><li><strong>CommonJS</strong>:<ul><li>동적 로딩으로 필요한 코드만 로드 가능</li><li>런타임 평가로 인한 일부 성능 오버헤드</li><li>모듈 캐싱으로 중복 로딩 방지</li></ul></li></ul></li></ol><h4 id=문법-및-사용성>문법 및 사용성<a hidden class=anchor aria-hidden=true href=#문법-및-사용성>#</a></h4><h5 id=import-vs-require>Import Vs Require<a hidden class=anchor aria-hidden=true href=#import-vs-require>#</a></h5><p><code>require</code>는 Node.js에서 사용되는 CommonJS 모듈 시스템의 키워드로, 동기적으로 모듈을 로드하며 프로그램의 어느 지점에서나 호출할 수 있다. 반면에 <code>import</code>는 ES6에서 도입된 모듈 시스템의 키워드로, 코드 실행 전에 모듈을 미리 로드하며 파일의 시작 부분에서만 사용할 수 있다. 따라서 프로젝트의 환경과 요구 사항에 따라 적절한 키워드를 선택하여 사용하는 것이 중요하다.</p><h6 id=import>Import<a hidden class=anchor aria-hidden=true href=#import>#</a></h6><p>ES6(ES2015)에서 도입된 모듈 시스템으로, JavaScript의 공식 표준 모듈 시스템. 정적 임포트 방식을 사용하며, 브라우저에서 기본적으로 지원된다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span><span class=lnt id=hl-10-11><a class=lnlinks href=#hl-10-11>11</a>
</span><span class=lnt id=hl-10-12><a class=lnlinks href=#hl-10-12>12</a>
</span><span class=lnt id=hl-10-13><a class=lnlinks href=#hl-10-13>13</a>
</span><span class=lnt id=hl-10-14><a class=lnlinks href=#hl-10-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 기본 가져오기
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=nx>module</span> <span class=nx>from</span> <span class=s1>&#39;./module&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 부분 가져오기
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>function1</span><span class=p>,</span> <span class=nx>function2</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;./module&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 모든 것을 객체로 가져오기
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=o>*</span> <span class=nx>as</span> <span class=nx>moduleObject</span> <span class=nx>from</span> <span class=s1>&#39;./module&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 이름 변경하여 가져오기
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=p>{</span> <span class=nx>originalName</span> <span class=nx>as</span> <span class=nx>newName</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;./module&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 가져오기와 실행만 하기
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=s1>&#39;./module&#39;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=require-commonjs>Require (CommonJS)<a hidden class=anchor aria-hidden=true href=#require-commonjs>#</a></h6><p>Node.js에서 기본적으로 사용되는 모듈 시스템으로, 동적 임포트를 지원한다. 런타임에 모듈을 로드할 수 있다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1>1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2>2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3>3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4>4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5>5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6>6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7>7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8>8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// 기본 가져오기
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>module</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;./module&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 구조 분해 할당으로 부분 가져오기
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=p>{</span> <span class=nx>function1</span><span class=p>,</span> <span class=nx>function2</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;./module&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 동적 경로로 가져오기
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>moduleName</span> <span class=o>=</span> <span class=s1>&#39;myModule&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>module</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=sb>`./</span><span class=si>${</span><span class=nx>moduleName</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h6 id=import와-require의-비교-분석>Import와 Require의 비교 분석<a hidden class=anchor aria-hidden=true href=#import와-require의-비교-분석>#</a></h6><table><thead><tr><th>특성</th><th>import (ES Modules)</th><th>require (CommonJS)</th></tr></thead><tbody><tr><td><strong>문법</strong></td><td>정적이고 선언적인 문법</td><td>함수 호출 방식의 동적 문법</td></tr><tr><td><strong>로딩 시점</strong></td><td>파일의 시작 부분에서 정적으로 로드</td><td>코드 실행 중 어느 시점에서나 동적으로 로드 가능</td></tr><tr><td><strong>비동기 지원</strong></td><td>비동기 로딩 지원 (<code>import()</code>)</td><td>동기적 로딩만 지원</td></tr><tr><td><strong>브라우저 지원</strong></td><td>모던 브라우저에서 기본 지원</td><td>브라우저에서 직접 사용 불가 (번들러 필요)</td></tr><tr><td><strong>트리 쉐이킹</strong></td><td>지원 (사용하지 않는 코드 제거 가능)</td><td>지원하지 않음</td></tr><tr><td><strong>순환 참조</strong></td><td>더 나은 순환 참조 처리</td><td>부분적인 순환 참조 처리</td></tr><tr><td><strong>캐싱</strong></td><td>모듈 단위로 캐싱</td><td>파일 경로 기반 캐싱</td></tr><tr><td><strong>조건부 로딩</strong></td><td>정적 분석으로 인해 제한적</td><td>조건부 로딩 가능</td></tr><tr><td><strong>Node.js 지원</strong></td><td>Node.js 13.2.0부터 실험적 지원</td><td>기본적으로 지원</td></tr><tr><td><strong>번들링</strong></td><td>번들러 지원 필요 없음</td><td>번들러 필요</td></tr><tr><td><strong>메모리 사용</strong></td><td>더 효율적 (정적 분석 가능)</td><td>상대적으로 덜 효율적</td></tr></tbody></table><h3 id=모듈-시스템-전환-및-호환성>모듈 시스템 전환 및 호환성<a hidden class=anchor aria-hidden=true href=#모듈-시스템-전환-및-호환성>#</a></h3><h4 id=nodejs에서-두-시스템-함께-사용하기>Node.js에서 두 시스템 함께 사용하기<a hidden class=anchor aria-hidden=true href=#nodejs에서-두-시스템-함께-사용하기>#</a></h4><p>최신 Node.js에서는 두 모듈 시스템을 모두 지원하며, 다음과 같은 방법으로 구분한다:</p><ol><li><p><strong>파일 확장자 기반</strong>:</p><ul><li><code>.mjs</code>: ES 모듈로 처리</li><li><code>.cjs</code>: CommonJS 모듈로 처리</li><li><code>.js</code>: package.json의 &ldquo;type&rdquo; 필드에 따라 결정</li></ul></li><li><p><strong>package.json 설정</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1>1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2>2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;module&#34;</span>  <span class=c1>// 기본값은 &#34;commonjs&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p><strong>상호 호출</strong>:</p><ul><li>ES 모듈에서 CommonJS 모듈 가져오기: 일반 <code>import</code> 구문 사용</li><li>CommonJS에서 ES 모듈 가져오기: 동적 <code>import()</code> 함수 사용</li></ul></li></ol><h4 id=하이브리드-패키지-배포>하이브리드 패키지 배포<a hidden class=anchor aria-hidden=true href=#하이브리드-패키지-배포>#</a></h4><p>패키지를 두 모듈 시스템 모두에 호환되게 배포하는 방법:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1> 1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2> 2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3> 3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4> 4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5> 5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6> 6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7> 7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8> 8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9> 9</a>
</span><span class=lnt id=hl-13-10><a class=lnlinks href=#hl-13-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;my-package&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;module&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;exports&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;.&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;import&#34;</span><span class=p>:</span> <span class=s2>&#34;./dist/index.mjs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;require&#34;</span><span class=p>:</span> <span class=s2>&#34;./dist/index.cjs&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=es-modules-vs-commonjs-특성-비교>ES Modules Vs CommonJS 특성 비교<a hidden class=anchor aria-hidden=true href=#es-modules-vs-commonjs-특성-비교>#</a></h3><table><thead><tr><th>특성</th><th>ES Modules (ESM)</th><th>CommonJS (CJS)</th></tr></thead><tbody><tr><td><strong>표준화</strong></td><td>ECMAScript 공식 표준</td><td>커뮤니티 규약</td></tr><tr><td><strong>도입 시기</strong></td><td>ECMAScript 2015 (ES6)</td><td>2009년</td></tr><tr><td><strong>주요 환경</strong></td><td>브라우저, Node.js, Deno</td><td>Node.js</td></tr><tr><td><strong>문법</strong></td><td><code>import</code>/<code>export</code></td><td><code>require()</code>/<code>module.exports</code></td></tr><tr><td><strong>로딩 방식</strong></td><td>정적 (분석 시점)</td><td>동적 (런타임)</td></tr><tr><td><strong>파일 확장자</strong></td><td>필수 (Node.js)</td><td>선택적</td></tr><tr><td><strong>경로 형식</strong></td><td>URL 기반</td><td>파일 시스템 기반</td></tr><tr><td><strong>비동기 로딩</strong></td><td>기본 지원 (<code>import()</code>)</td><td>기본 미지원 (별도 패턴 필요)</td></tr><tr><td><strong>Top-level await</strong></td><td>지원 (ES2022+)</td><td>미지원</td></tr><tr><td><strong>트리 쉐이킹</strong></td><td>최적화됨</td><td>제한적</td></tr><tr><td><strong>순환 참조 처리</strong></td><td>완전 지원 (실시간 바인딩)</td><td>제한적 지원</td></tr><tr><td><strong>브라우저 지원</strong></td><td>네이티브 지원</td><td>불가 (번들러 필요)</td></tr><tr><td><strong>조건부 로딩</strong></td><td>제한적 (동적 <code>import()</code> 필요)</td><td>용이함</td></tr><tr><td><strong>모듈 스코프</strong></td><td>파일 스코프</td><td>함수 스코프</td></tr><tr><td><strong>전역 객체</strong></td><td>없음 (<code>import.meta</code> 사용)</td><td><code>__dirname</code>, <code>__filename</code> 등</td></tr><tr><td><strong>호이스팅</strong></td><td>가져오기가 호이스팅됨</td><td><code>require()</code>는 호이스팅되지 않음</td></tr><tr><td><strong>코드 분할</strong></td><td>용이함</td><td>어려움</td></tr><tr><td><strong>빌드 도구 최적화</strong></td><td>높음</td><td>중간</td></tr><tr><td><strong>번들 크기</strong></td><td>작음 (트리 쉐이킹)</td><td>큼 (전체 모듈 포함)</td></tr><tr><td><strong>레거시 코드베이스</strong></td><td>적음</td><td>많음</td></tr><tr><td><strong>Node.js 기본 방식</strong></td><td>v13.2.0+ 지원, 기본은 아님</td><td>기본 시스템</td></tr><tr><td><strong>실행 환경</strong></td><td>항상 strict 모드</td><td>strict 모드 선택적</td></tr><tr><td><strong>프로퍼티 접근</strong></td><td>정적 바인딩 (내보낸 이후 변경 불가)</td><td>객체 참조 (내보낸 후 변경 가능)</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/programming-languages/>Programming-Languages</a></li><li><a href=https://buenhyden.github.io/tags/javascript/>Javascript</a></li><li><a href=https://buenhyden.github.io/tags/basic-syntax/>Basic-Syntax</a></li><li><a href=https://buenhyden.github.io/tags/modules/>Modules</a></li><li><a href=https://buenhyden.github.io/tags/es-modules/>ES-Modules</a></li><li><a href=https://buenhyden.github.io/tags/commonjs/>CommonJS</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/programming-languages/javascript/runtime-environments/nodejs/nodejs-vs-flask/><span class=title>« Prev</span><br><span>NodeJS vs. Flask</span>
</a><a class=next href=https://buenhyden.github.io/posts/programming-languages/javascript/runtime-environments/nodejs/nodejs-vs-django/><span class=title>Next »</span><br><span>NodeJS vs. Django</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>