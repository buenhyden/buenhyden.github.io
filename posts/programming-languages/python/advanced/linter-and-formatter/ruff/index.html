<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ruff | hyunyoun's Blog</title>
<meta name=keywords content="Programming-Languages,Python,Advanced,Linter,Formatter,ruff"><meta name=description content="Python 코드 품질을 개선하기 위한 린터"><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/programming-languages/python/advanced/linter-and-formatter/ruff/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.8762af4fa9ee176c57f72565b721f234162fc7a9c882a271e0a1f68c4e89fb34.css integrity="sha256-h2KvT6nuF2xX9yVltyHyNBYvx6nIgqJx4KH2jE6J+zQ=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/programming-languages/python/advanced/linter-and-formatter/ruff/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/programming-languages/python/advanced/linter-and-formatter/ruff/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="ruff"><meta property="og:description" content="Python 코드 품질을 개선하기 위한 린터"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-28T08:18:00+00:00"><meta property="article:modified_time" content="2024-11-28T08:18:00+00:00"><meta property="article:tag" content="Programming-Languages"><meta property="article:tag" content="Python"><meta property="article:tag" content="Advanced"><meta property="article:tag" content="Linter"><meta property="article:tag" content="Formatter"><meta property="article:tag" content="Ruff"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="ruff"><meta name=twitter:description content="Python 코드 품질을 개선하기 위한 린터"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"기술 블로그","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Programming Languages","item":"https://buenhyden.github.io/posts/programming-languages/"},{"@type":"ListItem","position":3,"name":"Python","item":"https://buenhyden.github.io/posts/programming-languages/python/"},{"@type":"ListItem","position":4,"name":"Advanced Python","item":"https://buenhyden.github.io/posts/programming-languages/python/advanced/"},{"@type":"ListItem","position":5,"name":"Python Linter와 Formatter","item":"https://buenhyden.github.io/posts/programming-languages/python/advanced/linter-and-formatter/"},{"@type":"ListItem","position":6,"name":"ruff","item":"https://buenhyden.github.io/posts/programming-languages/python/advanced/linter-and-formatter/ruff/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ruff","name":"ruff","description":"Python 코드 품질을 개선하기 위한 린터","keywords":["Programming-Languages","Python","Advanced","Linter","Formatter","ruff"],"articleBody":"Ruff Rust로 작성된 고성능 Python 린터이자 코드 포매터.\n정적 분석을 통해 코드의 스타일 및 오류를 검토하고 잠재적 문제를 조기에 발견할 수 있도록 돕는다. 코드 스타일과 오류 탐지를 위한 기본 규칙 세트를 포함하고 있다. 기본적으로 PEP8 스타일 가이드를 기반으로 하며, 불필요한 공백, 잘못된 들여쓰기, 코드 복잡도 등 다양한 문제를 다룬다. 다양한 플러그인을 지원하며, 특정 코드 스타일이나 검사 규칙에 맞춘 프리셋을 불러올 수 있다. 특징 속도: 기존 린터들보다 10~100배 빠르다. 다기능성: Flake8, isort, pyupgrade, Black 등 여러 도구를 대체할 수 있다. 800개 이상의 린트 규칙을 지원. 자동 수정: 많은 린트 문제를 자동으로 수정할 수 있다. 설정 용이성: pyproject.toml 파일을 통해 쉽게 설정할 수 있다. 에디터 통합: VS code, Neovim, PyCharm 등 다양한 에디터와 통합 CI/CD 통합: Github Actions와 같은 CI/CD 환경에서 Ruff를 사용하여 코드 품질을 자동으로 검사할 수 있다. 모노레포 친화적: 프로젝트 내 여러 수준에서 설정 파일을 가질 수 있다. Jupyter 노트북 지원: Jupyter Notebook도 린트 및 포맷할 수 있다. 커스터마이징: 규칙 선택, 무시, 수정 가능 여부 등을 세밀하게 제어할 수 있다. 캐싱: 변경되지 않은 파일은 다시 분석하지 않아 실행시 더욱 빠르다 지속적인 개발: 활발한 개발과 커뮤니티 지원으로 계속 발전중 설치 방법 PyPI를 통한 설치 PyPI에서 ruff라는 이름으로 제공\n1 $ pip install ruff 설치 후 command에서 다음과 같이 실행 가능.\n1 2 $ ruff check # 현재 디렉토리의 모든 파일 린트 $ ruff format # 현재 디렉토리의 모든 파일 포맷 독립 실행형 설치 프로그램 버전 0.5.0부터 독립 실행형 설치 프로그램을 사용 가능\nmacOS 및 Linux 1 $ curl -LsSf https://astral.sh/ruff/install.sh | sh Windows 1 $ powershell -c \"irm https://astral.sh/ruff/install.ps1 | iex\" 기타 설치 방법 Homebrew (macOS 및 Linux) 1 $ brew install ruff Conda 1 $ conda install -c conda-forge ruff Docker에서 사용 이미지로 제공됨\n1 $ docker run -v .:/io --rm ghcr.io/astral-sh/ruff check Linter 기본 사용법 ruff check 명령어를 사용하여 린팅을 수행\n1 2 3 4 $ ruff check # 현재 디렉토리의 모든 파일 린트 $ ruff check --fix # 수정 가능한 오류 자동 수정 $ ruff check --watch # 파일 변경 시 자동으로 재린트 $ ruff check path/to/code/ # 특정 디렉토리 린트 린팅 규칙 설정 Ruff는 PEP8을 기반으로 하며, 추가 설정을 통해 원하는 스타일 가이드를 적용할 수 있다.\npyproject.toml 파일에서 설정을 변경하여 규칙을 커스터마이징할 수 있다.\nlint.select, lint.extend-select, lint.ignore, lint.extend-ignore 설정으로 규칙 제어 lint.select: 활성화할 규칙 리스트 lint.ignore: 무시할 규칙 리스트 lint.extend-select / lint.extend-ignore: 선택된 규칙에 더할 규칙을 지정하거나, 기존에 무시된 규칙에 추가할 수 있다. 규칙 코드는 접두사(1-3글자)와 3자리 숫자로 구성 (예: F401) ALL 코드로 모든 규칙 활성화 가능 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 [tool.ruff.lint] select = [ # pycodestyle \"E\", # Pyflakes \"F\", # pyupgrade \"UP\", # flake8-bugbear \"B\", # flake8-simplify \"SIM\", # isort \"I\", ] ignore = [\"F401\"] 오류 수정 --fix 플래그로 자동 수정 활성화 안전한 수정과 불안전한 수정으로 구분 --unsafe-fixes 플래그로 불안전한 수정 활성화 가능 Fix Safety 1 2 3 [tool.ruff.lint] extend-safe-fixes = [\"F601\"] extend-unsafe-fixes = [\"UP034\"] Disabling Fixes 1 2 3 [tool.ruff.lint] fixable = [\"ALL\"] unfixable = [\"F401\"] 오류 억제 인라인 억제: # noqa: {code} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 # Ignore F841. x = 1 # noqa: F841 # Ignore E741 and F841. i = 1 # noqa: E741, F841 # Ignore _all_ violations. x = 1 # noqa # multi-line strings (like docstrings) \"\"\"Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor. \"\"\" # noqa: E501 # import sorting import os # noqa: I001 import abc 파일 전체 억제: 파일 최상단에 # ruff: noqa 특정 규칙 파일 전체 억제: 파일 최상단에 # ruff: noqa: {code} lint.per-file-ignores 설정 사용 사용하지 않는 억제 주석 감지 RUF100 규칙을 사용하여 불필요한 noqa 주석 감지 및 제거 가능\n필요한 억제 주석 자동 추가 --add-noqa 플래그로 필요한 noqa 주석 자동 추가\n액션 주석 isort의 액션 주석 지원 (예: # isort: skip_file, # isort: on 등)\n종료 코드 0: 위반 없음 또는 모든 위반 자동 수정 1: 위반 발견 2: 비정상 종료 --exit-zero와 --exit-non-zero-on-fix 플래그로 종료 코드 동작 변경 가능\nFormatter 성능 향상과 Ruff의 린터, 포맷터 등을 통합하는데 중점을 둠.\nBlack과의 호환성을 목표로 하여 대부분의 프로젝트에서 최소한의 변경으로 도입 가능.\n기본 사용법 1 2 3 $ ruff format # 현재 디렉토리의 모든 파일 포맷 $ ruff format path/to/code/ # 특정 디렉토리의 모든 파일 포맷 $ ruff format path/to/file.py # 단일 파일 포맷 --check 옵션을 사용하면 파일을 수정하지 않고 포맷 필요 여부만 확인\n설정 따옴표 스타일, 들여쓰기 스타일, 줄 끝 문자 등을 설정할 수 있다.\n1 2 3 4 5 6 7 8 9 [tool.ruff] line-length = 100 [tool.ruff.format] quote-style = \"single\" indent-style = \"tab\" line-ending = \"lf\" docstring-code-format = true line-ending = 100 Docstring 포맷팅 1 2 3 [tool.ruff.format] docstring-code-format = true docstring-code-line-length = 20 Ruff는 독스트링 내의 Python 코드 예제를 자동으로 포맷팅하는 기능을 제공.\n이는 doctest, Markdown, reStructuredText 등 다양한 형식을 지원\n포맷 억제 # fmt: on, # fmt: off, # fmt: skip 주석을 사용하여 특정 코드 블록의 포맷팅을 비활성화\n충돌하는 린트 규칙 Ruff 포맷터와 충돌할 수 있는 린트 규칙들이 있으며, 이들을 비활성화하는 것이 권장\ntab-indentation (W191) indentation-with-invalid-multiple (E111) indentation-with-invalid-multiple-comment (E114) over-indented (E117) indent-with-spaces (D206) triple-single-quotes (D300) bad-quotes-inline-string (Q000) bad-quotes-multiline-string (Q001) bad-quotes-docstring (Q002) avoidable-escaped-quote (Q003) missing-trailing-comma (COM812) prohibited-trailing-comma (COM819) single-line-implicit-string-concatenation (ISC001) multi-line-implicit-string-concatenation (ISC002) 종료 코드 ruff format은 성공 시 0, 비정상 종료 시 2를 반환.\n--check 옵션 사용 시에는 포맷 필요 여부에 따라 0 또는 1을 반환\nBlack 호환성 Black과 거의 동일한 출력을 생성하도록 설계\n임포트 정렬 현재 Ruff 포맷터는 임포트를 정렬하지 않는다.\n임포트 정렬과 포맷팅을 모두 수행하려면 다음과 같이 실행한다.\n1 2 $ ruff check --select I --fix $ ruff format 편집기 통합 다양한 코드 편집기와 통합되어 실시간으로 코드 품질을 점검하고 포매팅할 수 있다.\nRuff 언어 서버는 언어 서버 프로토콜 (Language Server Protocol)을 구현하여 에디터 통합의 핵심 역할을 한다. Rust로 작성되었으며 ruff CLI의 일부로 ruff server 명령을 통해 사용 가능. 이전의 ruff-lsp를 대체하는 단일 공통 백엔드 언어 서버 기능 진단 하이라이팅: Python 코드에 대한 실시간 진단 제공 동적 설정: 작업 공간의 설정 파일(pyproject.toml, ruff.toml, .ruff.toml) 변경 시 진단 자동 갱신 포맷팅: Python 코드 전체 또는 특정 범위 포맷팅을 지원한다. VS Code에서 Ruff: Format Document 명령 제공 코드 액션: 특정 코드 문제에 대한 빠른 수정 제안을 제공한다. 예를 들어, # noqa 주석으로 특정 진단을 무시할 수 있으며 문서 내 모든 빠른 수정 적용하거나 import를 정리하는 기능도 지원한다. 수정 안전성: 자동 수정은 “안전\"과 “비안전\"으로 구분된다. 기본적으로 “모두 수정” 기능은 안전한 수정만 적용하며, 비안전한 수정은 수동으로 적용할 수 있다. 구성 파일에서 unsafe-fixes = true로 설정하면 “모두 수정” 시 비안전한 수정도 적용할 수 있다. 호버: # noqa 주석 위에 마우스를 올리면 해당 규칙에 대한 문서를 표시하여 이해를 돕는다 Jupyter Notebook 지원: Ruff는 Jupyter Notebook 파일에 대해서도 Python 파일과 동일한 기능을 제공. 에디터 설정 각 에디터별로 특정 설정 지침이 제공된다.\nruff-lsp에서 설정을 이전하는 경우 변경된 설정이 있으므로 마이그레이션 가이드를 참조\nVS Code VS Code 마켓 플레이스에서 Ruff 확장 프로그램을 설치\n버전 2024.32.0 이상을 권장.\n설정 settings.json 파일을 열어 다음과 같이 설정하여 Ruff를 기본 린터로 지정\n1 2 3 \"python.linting.enabled\": true, \"python.linting.ruffEnabled\": true, \"python.formatting.provider\": \"ruff\" Neovim nvim-lspconfig 플러그인을 사용하여 Ruff 언어 서버를 설정.\nPyright와 함께 사용할 경우 특정 기능을 비활성화하는 방법이 제공.\n설정 init.lua 내 설정\n1 2 3 4 5 6 7 require('lspconfig').ruff.setup({ init_options = { settings = { -- Ruff language server settings go here } } }) Vim vim-lsp 플러그인을 사용하여 Ruff 언어 서버를 설정\n설정 .vimrc내 설정\n1 2 3 4 5 6 7 require('lspconfig').ruff.setup({ init_options = { settings = { -- Ruff language server settings go here } } }) PyCharm 외부 도구로 Ruff를 설정하거나 서드파티 플러그인을 사용\n설정 파일 감시기를 설정하려면 PyCharm의 Settings \u003e Tools \u003e File Watchers로 이동하여 새 파일 감시기를 추가 Name 필드에 Ruff라고 입력하고, File Type을 Python으로 선택. Scope와 Output Paths는 기본값으로 두고, Program 필드에는 Ruff의 설치 경로를 지정. Arguments에는 $FilePathRelativeToProjectRoot$를 입력하여 현재 파일 경로를 기준으로 린팅이 수행되도록 한다. Ruff 언어 서버의 설정 일반 설정 configuration: Ruff 설정 파일 경로 지정 configurationPreference: 설정 우선순위 전략 설정 옵션: \"editorFirst\": 편집기 설정이 워크스페이스의 구성 파일보다 우선. \"filesystemFirst\": 워크스페이스의 구성 파일이 편집기 설정보다 우선. \"editorOnly\": 구성 파일을 완전히 무시하고 편집기 설정만 사용. exclude: 린팅 및 포맷팅에서 제외할 파일 패턴 lineLength: 라인 길이 설정 fixAll: source.fixAll 코드 액션 활성화 여부 organizeImports: source.organizeImports 코드 액션 활성화 여부 showSyntaxErrors: 구문 오류 진단 표시 여부 logLevel: 서버 로그 레벨 설정 logFile: 로그 파일 경로 설정 코드 액션 설정 codeAction.disableRuleComment.enable: noqa 주석을 통한 규칙 비활성화 액션 표시 여부 codeAction.fixViolation.enable: 자동 수정 액션 표시 여부 린터 설정 lint.enable: 린팅 활성화 여부 lint.preview: 린터 프리뷰 모드 활성화 여부 lint.select, lint.extendSelect: 활성화할 규칙 설정 lint.ignore, lint.extendIgnore: 비활성화할 규칙 설정 포맷터 설정 format.preview: 포맷터 프리뷰 모드 활성화 여부 ## VS Code 전용 설정 enable: Ruff 확장 활성화 여부 format.args: 포맷터에 전달할 추가 인수 ignoreStandardLibrary: 표준 라이브러리 파일 무시 여부 importStrategy: Ruff 실행 파일 로딩 전략 interpreter: Python 인터프리터 경로 lint.args: 린터에 전달할 추가 인수 lint.run: 린팅 실행 시점 설정 nativeServer: 네이티브 언어 서버 사용 여부 path: Ruff 실행 파일 경로 showNotifications: 알림 표시 설정 trace.server: 언어 서버 추적 레벨 설정 Ruff 설정 pyproject.toml, ruff.toml, 또는 .ruff.toml 파일을 통해 구성이 가능하다.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 [tool.ruff] exclude = [ \".bzr\", \".direnv\", \".eggs\", \".git\", \".git-rewrite\", \".hg\", \".ipynb_checkpoints\", \".mypy_cache\", \".nox\", \".pants.d\", \".pyenv\", \".pytest_cache\", \".pytype\", \".ruff_cache\", \".svn\", \".tox\", \".venv\", \".vscode\", \"__pypackages__\", \"_build\", \"buck-out\", \"build\", \"dist\", \"node_modules\", \"site-packages\", \"venv\", ] line-length = 88 indent-width = 4 target-version = \"py38\" [tool.ruff.lint] select = [\"E4\", \"E7\", \"E9\", \"F\"] ignore = [] fixable = [\"ALL\"] unfixable = [] dummy-variable-rgx = \"^(_+|(_+[a-zA-Z0-9_]*[a-zA-Z0-9]+?))$\" [tool.ruff.format] quote-style = \"double\" indent-style = \"space\" skip-magic-trailing-comma = false line-ending = \"auto\" docstring-code-format = false docstring-code-line-length = \"dynamic\" 주요 설정 옵션 exclude: 린팅 및 포맷팅에서 제외할 디렉토리 및 파일 line-length: 최대 줄 길이 (기본값 88) indent-width: 들여쓰기 너비 (기본값 4) target-version: 대상 Python 버전 린터 설정 select: 활성화할 규칙 선택 ignore: 무시할 규칙 선택 fixable: 자동 수정 가능한 규칙 설정 unfixable: 자동 수정 불가능한 규칙 설정 포맷터 설정 quote-style: 문자열 따옴표 스타일 indent-style: 들여쓰기 스타일 line-ending: 줄 끝 문자 설정 docstring-code-format: 독스트링 내 코드 예제 자동 포맷팅 여부 설정 파일 우선순위 .ruff.toml \u003e ruff.toml \u003e pyproject.toml 가장 가까운 설정 파일이 사용됨 명령줄 인터페이스 일부 설정은 명령줄 플래그로 제공 가능 --config 플래그를 통해 설정 파일 지정 또는 개별 설정 오버라이드 가능 Python 파일 탐색 기본적으로 *.py, *.pyi, *.ipynb, pyproject.toml 파일 포함 extend-include 설정으로 추가 파일 확장자 포함 가능 Extend 현재 구성에 다른 pyproject.toml 파일을 병합할 수 있도록 한다.\n이 설정을 통해 사용자 홈 디렉터리와 환경 변수를 확장할 수 있다.\n현재의 pyproject.toml 파일을 해석할 때, 먼저 이 기본 구성 파일을 로드한 후, 현재 구성 파일에 정의된 속성을 병합\n1 2 3 [tool.ruff] extend = \"../pyproject.toml\" include = [\"pyproject.toml\", \"src/**/*.py\", \"scripts/**/*.py\"] Jupyter 노트북 지원 버전 0.6.0 이상에서 기본적으로 린팅 및 포맷팅 지원 per-file-ignores 설정으로 노트북 파일에 대한 특정 규칙 무시 가능 1 2 3 4 5 6 7 8 9 10 11 # 포매팅에서 Notebook 파일을 제외하려면 다음과 같이 설정. [tool.ruff.format] exclude = [\"*.ipynb\"] # 린팅에서 Notebook 파일을 제외하려면 다음과 같이 설정 [tool.ruff.lint] exclude = [\"*.ipynb\"] # Notebook 파일에 대해 특정 규칙을 무시하려면 `per-file-ignores` 설정을 사용 [tool.ruff.lint.per-file-ignores] \"*.ipynb\" = [\"T20\"] Ruff 특정 규칙 (RUF) Ruff에서 특별히 제공하는 것으로, 다음과 같은 내용을 포함한다.\n- 모호한 유니코드 문자 사용 감지 (RUF001, RUF002, RUF003)\n- 컬렉션 리터럴 연결 관련 문제 (RUF004, RUF005)\n- asyncio 관련 문제 (RUF006)\n- 함수 데코레이터 사용 개선 (RUF007)\n- f-string 사용 개선 (RUF008, RUF009, RUF010)\n- zip 대신 dict 생성자 사용 권장 (RUF011)\n- 클래스 속성 관련 문제 (RUF012)\n- 타입 힌트 개선 (RUF013)\n- 사용되지 않는 noqa 지시문 감지 (RUF100)\n- sys.path 조작 감지 (RUF200)\n코드 이름 메시지 상태 RUF001 ambiguous-unicode-character-string String contains ambiguous unicode character ‘{char}’ (character ‘{name}’). Consider using the ‘{type}’ literal \\u{code} instead ✔️ 🛠️ RUF002 ambiguous-unicode-character-docstring Docstring contains ambiguous unicode character ‘{char}’ (character ‘{name}’). Consider using the ‘{type}’ literal \\u{code} instead ✔️ 🛠️ RUF003 ambiguous-unicode-character-comment Comment contains ambiguous unicode character ‘{char}’ (character ‘{name}’). Consider using the ‘{type}’ literal \\u{code} instead ✔️ 🛠️ RUF004 collection-literal-concatenation Collection literal concatenated with literal ✔️ 🛠️ RUF005 collection-literal-concatenation-multiple Collection literal concatenated with multiple literals ✔️ 🛠️ RUF006 asyncio-dangling-task Dangling asyncio.create_task call ✔️ RUF007 preferred-lru-cache Prefer functools.lru_cache() over functools.lru_cache without parentheses ✔️ 🛠️ RUF008 explicit-f-string-type-conversion Use f\"{var!r}\" instead of f\"{repr(var)}\" ✔️ 🛠️ RUF009 explicit-multiple-concatenated-f-strings Use a single f-string instead of multiple concatenated f-strings ✔️ 🛠️ RUF010 explicit-f-string-formatting Convert f\"{var:0\u003e3}\" to f\"{var:\u003e03}\" ✔️ 🛠️ RUF011 replace-zip-with-dict Replace zip with dict constructor ✔️ 🛠️ RUF012 mutable-class-default Mutable class attribute {name} should be annotated with ClassVar ✔️ RUF013 implicit-optional {type} doesn’t accept None; consider using Optional[{type}] instead ✔️ 🛠️ RUF100 unused-noqa Unused noqa directive ✔️ 🛠️ RUF200 sys-path-manipulation sys.path manipulation detected ✔️ Integrations Github Actions GitHub Actions에서 Ruff를 바로 사용 가능.\nrepository내에 .github/workflows 폴더에 파일을 생성하고 아래의 예시처럼 작성한다.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 name: CI on: push jobs: build: runs-on: ubuntu-latest steps: - uses: actions/checkout@v4 - name: Install Python uses: actions/setup-python@v5 with: python-version: \"3.11\" - name: Install dependencies run: | python -m pip install --upgrade pip pip install ruff - name: Run Ruff run: ruff check --output-format=github . 또한, astral-sh/ruff-action을 사용하여 Ruff를 GitHub Actions에서 직접 실행할 수 있다. 기본적으로 ruff-action은 린팅을 수행하며, 필요에 따라 args를 통해 추가 명령어를 지정할 수 있다.\n1 2 3 4 5 6 7 8 name: Ruff on: [push, pull_request] jobs: ruff: runs-on: ubuntu-latest steps: - uses: actions/checkout@v4 - uses: astral-sh/ruff-action@v1 GitLab CI/CD GitLab CI/CD에서 Ruff를 사용하려면 .gitlab-ci.yml 파일에 다음과 같이 설정한다.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 .base_ruff: stage: build interruptible: true image: name: ghcr.io/astral-sh/ruff:0.7.2-alpine before_script: - cd $CI_PROJECT_DIR - ruff --version Ruff Check: extends: .base_ruff script: - ruff check --output-format=gitlab \u003e code-quality-report.json artifacts: reports: codequality: $CI_PROJECT_DIR/code-quality-report.json Ruff Format: extends: .base_ruff script: - ruff format --diff 이 설정은 ruff check와 ruff format을 병렬로 실행하며, GitLab의 코드 품질 보고서와 연동된다.\nPre-commit Ruff는 pre-commit과 통합되어 커밋 전에 자동으로 린팅과 포매팅을 수행할 수 있다. 설정 예시는 다음과 같다:\n1 2 3 4 5 6 - repo: https://github.com/astral-sh/ruff-pre-commit rev: v0.7.2 hooks: - id: ruff args: [ --fix ] - id: ruff-format --fix 옵션을 추가하면 자동으로 수정 가능한 린팅 오류를 해결한다. 또한, Jupyter Notebook 파일에도 적용하려면 types_or에 jupyter를 추가할 수 있다.\nMdformat Ruff는 mdformat과의 플러그인을 통해 Markdown 파일 내의 Python 코드 블록을 포매팅할 수 있다. 설치 방법은 다음과 같습니다:\n1 $ pip install mdformat-ruff 설치 후, mdformat을 실행하면 Markdown 파일 내의 Python 코드 블록이 Ruff를 통해 포매팅된다.\n참고 및 출처 Ruff Tutorial | Ruff\nInstalling Ruff | Ruff\nThe Ruff Linter | Ruff\nThe Ruff Formatter | Ruff\nEditor Integration | Ruff\nSettings | Ruff\nConfiguring Ruff | Ruff\nRules | Ruff\nSettings | Ruff\nIntegrations | Ruff\n","wordCount":"2411","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2024-11-28T08:18:00Z","dateModified":"2024-11-28T08:18:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/programming-languages/python/advanced/linter-and-formatter/ruff/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>기술 블로그</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/programming-languages/>Programming Languages</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/programming-languages/python/>Python</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/programming-languages/python/advanced/>Advanced Python</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/programming-languages/python/advanced/linter-and-formatter/>Python Linter와 Formatter</a></div><h1 class="post-title entry-hint-parent">ruff</h1><div class=post-description>Python 코드 품질을 개선하기 위한 린터</div><div class=post-meta><span title='2024-11-28 08:18:00 +0000 UTC'>November 28, 2024</span>&nbsp;·&nbsp;12 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Programming%20Languages/Python/Advanced/Linter%20and%20Formatter/ruff.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#ruff>Ruff</a><ul><li><a href=#특징>특징</a></li><li><a href=#설치-방법>설치 방법</a></li><li><a href=#linter>Linter</a></li><li><a href=#formatter>Formatter</a></li><li><a href=#편집기-통합>편집기 통합</a></li><li><a href=#ruff-설정>Ruff 설정</a></li><li><a href=#ruff-특정-규칙-ruf>Ruff 특정 규칙 (RUF)</a></li><li><a href=#integrations>Integrations</a></li></ul></li><li><a href=#참고-및-출처>참고 및 출처</a><ul><li><a href=#ruff-1>Ruff</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h2 id=ruff>Ruff<a hidden class=anchor aria-hidden=true href=#ruff>#</a></h2><p>Rust로 작성된 고성능 Python 린터이자 코드 포매터.</p><ul><li>정적 분석을 통해 코드의 스타일 및 오류를 검토하고 잠재적 문제를 조기에 발견할 수 있도록 돕는다.</li><li>코드 스타일과 오류 탐지를 위한 기본 규칙 세트를 포함하고 있다. 기본적으로 PEP8 스타일 가이드를 기반으로 하며, 불필요한 공백, 잘못된 들여쓰기, 코드 복잡도 등 다양한 문제를 다룬다.</li><li>다양한 플러그인을 지원하며, 특정 코드 스타일이나 검사 규칙에 맞춘 프리셋을 불러올 수 있다.</li></ul><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><ul><li><strong>속도</strong>: 기존 린터들보다 10~100배 빠르다.</li><li><strong>다기능성</strong>: Flake8, isort, pyupgrade, Black 등 여러 도구를 대체할 수 있다. 800개 이상의 린트 규칙을 지원.</li><li><strong>자동 수정</strong>: 많은 린트 문제를 자동으로 수정할 수 있다.</li><li><strong>설정 용이성</strong>: pyproject.toml 파일을 통해 쉽게 설정할 수 있다.</li><li><strong>에디터 통합</strong>: VS code, Neovim, PyCharm 등 다양한 에디터와 통합</li><li><strong>CI/CD 통합</strong>: Github Actions와 같은 CI/CD 환경에서 Ruff를 사용하여 코드 품질을 자동으로 검사할 수 있다.</li><li><strong>모노레포 친화적</strong>: 프로젝트 내 여러 수준에서 설정 파일을 가질 수 있다.</li><li><strong>Jupyter 노트북 지원</strong>: Jupyter Notebook도 린트 및 포맷할 수 있다.</li><li><strong>커스터마이징</strong>: 규칙 선택, 무시, 수정 가능 여부 등을 세밀하게 제어할 수 있다.</li><li><strong>캐싱</strong>: 변경되지 않은 파일은 다시 분석하지 않아 실행시 더욱 빠르다</li><li><strong>지속적인 개발</strong>: 활발한 개발과 커뮤니티 지원으로 계속 발전중</li></ul><h3 id=설치-방법>설치 방법<a hidden class=anchor aria-hidden=true href=#설치-방법>#</a></h3><h4 id=pypi를-통한-설치>PyPI를 통한 설치<a hidden class=anchor aria-hidden=true href=#pypi를-통한-설치>#</a></h4><p>PyPI에서 <code>ruff</code>라는 이름으로 제공</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ pip install ruff
</span></span></code></pre></td></tr></table></div></div><p>설치 후 command에서 다음과 같이 실행 가능.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ruff check <span class=c1># 현재 디렉토리의 모든 파일 린트</span>
</span></span><span class=line><span class=cl>$ ruff format <span class=c1># 현재 디렉토리의 모든 파일 포맷</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=독립-실행형-설치-프로그램>독립 실행형 설치 프로그램<a hidden class=anchor aria-hidden=true href=#독립-실행형-설치-프로그램>#</a></h4><p>버전 0.5.0부터 독립 실행형 설치 프로그램을 사용 가능</p><h5 id=macos-및-linux>macOS 및 Linux<a hidden class=anchor aria-hidden=true href=#macos-및-linux>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ curl -LsSf https://astral.sh/ruff/install.sh <span class=p>|</span> sh
</span></span></code></pre></td></tr></table></div></div><h5 id=windows>Windows<a hidden class=anchor aria-hidden=true href=#windows>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=p>$</span> <span class=n>powershell</span> <span class=n>-c</span> <span class=s2>&#34;irm https://astral.sh/ruff/install.ps1 | iex&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=기타-설치-방법>기타 설치 방법<a hidden class=anchor aria-hidden=true href=#기타-설치-방법>#</a></h4><h5 id=homebrew-macos-및-linux>Homebrew (macOS 및 Linux)<a hidden class=anchor aria-hidden=true href=#homebrew-macos-및-linux>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ brew install ruff
</span></span></code></pre></td></tr></table></div></div><h5 id=conda>Conda<a hidden class=anchor aria-hidden=true href=#conda>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ conda install -c conda-forge ruff
</span></span></code></pre></td></tr></table></div></div><h4 id=docker에서-사용>Docker에서 사용<a hidden class=anchor aria-hidden=true href=#docker에서-사용>#</a></h4><p>이미지로 제공됨</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ docker run -v .:/io --rm ghcr.io/astral-sh/ruff check
</span></span></code></pre></td></tr></table></div></div><h3 id=linter>Linter<a hidden class=anchor aria-hidden=true href=#linter>#</a></h3><h4 id=기본-사용법>기본 사용법<a hidden class=anchor aria-hidden=true href=#기본-사용법>#</a></h4><p><code>ruff check</code> 명령어를 사용하여 린팅을 수행</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2>2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3>3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ruff check <span class=c1># 현재 디렉토리의 모든 파일 린트 </span>
</span></span><span class=line><span class=cl>$ ruff check --fix <span class=c1># 수정 가능한 오류 자동 수정</span>
</span></span><span class=line><span class=cl>$ ruff check --watch <span class=c1># 파일 변경 시 자동으로 재린트</span>
</span></span><span class=line><span class=cl>$ ruff check path/to/code/ <span class=c1># 특정 디렉토리 린트</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=린팅-규칙-설정>린팅 규칙 설정<a hidden class=anchor aria-hidden=true href=#린팅-규칙-설정>#</a></h4><p>Ruff는 PEP8을 기반으로 하며, 추가 설정을 통해 원하는 스타일 가이드를 적용할 수 있다.<br><code>pyproject.toml</code> 파일에서 설정을 변경하여 규칙을 커스터마이징할 수 있다.</p><ul><li><code>lint.select</code>, <code>lint.extend-select</code>, <code>lint.ignore</code>, <code>lint.extend-ignore</code> 설정으로 규칙 제어<ul><li><code>lint.select</code>: 활성화할 규칙 리스트</li><li><code>lint.ignore</code>: 무시할 규칙 리스트</li><li><code>lint.extend-select</code> / <code>lint.extend-ignore</code>: 선택된 규칙에 더할 규칙을 지정하거나, 기존에 무시된 규칙에 추가할 수 있다.</li></ul></li><li>규칙 코드는 접두사(1-3글자)와 3자리 숫자로 구성 (예: <code>F401</code>)</li><li><code>ALL</code> 코드로 모든 규칙 활성화 가능</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span><span class=lnt id=hl-8-15><a class=lnlinks href=#hl-8-15>15</a>
</span><span class=lnt id=hl-8-16><a class=lnlinks href=#hl-8-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>tool</span><span class=p>.</span><span class=nx>ruff</span><span class=p>.</span><span class=nx>lint</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>select</span> <span class=p>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=c># pycodestyle</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;E&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=c># Pyflakes</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;F&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=c># pyupgrade</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;UP&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=c># flake8-bugbear</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;B&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=c># flake8-simplify</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;SIM&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=c># isort</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;I&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>ignore</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;F401&#34;</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=오류-수정>오류 수정<a hidden class=anchor aria-hidden=true href=#오류-수정>#</a></h4><ul><li><code>--fix</code> 플래그로 자동 수정 활성화</li><li>안전한 수정과 불안전한 수정으로 구분</li><li><code>--unsafe-fixes</code> 플래그로 불안전한 수정 활성화 가능</li></ul><h5 id=fix-safety>Fix Safety<a hidden class=anchor aria-hidden=true href=#fix-safety>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1>1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2>2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>tool</span><span class=p>.</span><span class=nx>ruff</span><span class=p>.</span><span class=nx>lint</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>extend-safe-fixes</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;F601&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>extend-unsafe-fixes</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;UP034&#34;</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=disabling-fixes>Disabling Fixes<a hidden class=anchor aria-hidden=true href=#disabling-fixes>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1>1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2>2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>tool</span><span class=p>.</span><span class=nx>ruff</span><span class=p>.</span><span class=nx>lint</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>fixable</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;ALL&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>unfixable</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;F401&#34;</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=오류-억제>오류 억제<a hidden class=anchor aria-hidden=true href=#오류-억제>#</a></h4><ul><li>인라인 억제: <code># noqa: {code}</code></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15>15</a>
</span><span class=lnt id=hl-11-16><a class=lnlinks href=#hl-11-16>16</a>
</span><span class=lnt id=hl-11-17><a class=lnlinks href=#hl-11-17>17</a>
</span><span class=lnt id=hl-11-18><a class=lnlinks href=#hl-11-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Ignore F841.</span>
</span></span><span class=line><span class=cl><span class=n>x</span> <span class=o>=</span> <span class=mi>1</span>  <span class=c1># noqa: F841</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ignore E741 and F841.</span>
</span></span><span class=line><span class=cl><span class=n>i</span> <span class=o>=</span> <span class=mi>1</span>  <span class=c1># noqa: E741, F841</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Ignore _all_ violations.</span>
</span></span><span class=line><span class=cl><span class=n>x</span> <span class=o>=</span> <span class=mi>1</span>  <span class=c1># noqa</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># multi-line strings (like docstrings)</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;Lorem ipsum dolor sit amet.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor.
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>  <span class=c1># noqa: E501</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#  import sorting</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>  <span class=c1># noqa: I001</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>abc</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>파일 전체 억제: 파일 최상단에 <code># ruff: noqa</code></li><li>특정 규칙 파일 전체 억제: 파일 최상단에 <code># ruff: noqa: {code}</code></li><li><code>lint.per-file-ignores</code> 설정 사용</li></ul><h4 id=사용하지-않는-억제-주석-감지>사용하지 않는 억제 주석 감지<a hidden class=anchor aria-hidden=true href=#사용하지-않는-억제-주석-감지>#</a></h4><p><code>RUF100</code> 규칙을 사용하여 불필요한 <code>noqa</code> 주석 감지 및 제거 가능</p><h4 id=필요한-억제-주석-자동-추가>필요한 억제 주석 자동 추가<a hidden class=anchor aria-hidden=true href=#필요한-억제-주석-자동-추가>#</a></h4><p><code>--add-noqa</code> 플래그로 필요한 <code>noqa</code> 주석 자동 추가</p><h4 id=액션-주석>액션 주석<a hidden class=anchor aria-hidden=true href=#액션-주석>#</a></h4><p>isort의 액션 주석 지원 (예: <code># isort: skip_file</code>, <code># isort: on</code> 등)</p><h4 id=종료-코드>종료 코드<a hidden class=anchor aria-hidden=true href=#종료-코드>#</a></h4><ul><li><code>0</code>: 위반 없음 또는 모든 위반 자동 수정</li><li><code>1</code>: 위반 발견</li><li><code>2</code>: 비정상 종료</li></ul><p><code>--exit-zero</code>와 <code>--exit-non-zero-on-fix</code> 플래그로 종료 코드 동작 변경 가능</p><h3 id=formatter>Formatter<a hidden class=anchor aria-hidden=true href=#formatter>#</a></h3><p>성능 향상과 Ruff의 린터, 포맷터 등을 통합하는데 중점을 둠.<br>Black과의 호환성을 목표로 하여 대부분의 프로젝트에서 최소한의 변경으로 도입 가능.</p><h4 id=기본-사용법-1>기본 사용법<a hidden class=anchor aria-hidden=true href=#기본-사용법-1>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1>1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2>2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ruff format <span class=c1># 현재 디렉토리의 모든 파일 포맷</span>
</span></span><span class=line><span class=cl>$ ruff format path/to/code/ <span class=c1># 특정 디렉토리의 모든 파일 포맷 </span>
</span></span><span class=line><span class=cl>$ ruff format path/to/file.py <span class=c1># 단일 파일 포맷</span>
</span></span></code></pre></td></tr></table></div></div><p><code>--check</code> 옵션을 사용하면 파일을 수정하지 않고 포맷 필요 여부만 확인</p><h4 id=설정>설정<a hidden class=anchor aria-hidden=true href=#설정>#</a></h4><p>따옴표 스타일, 들여쓰기 스타일, 줄 끝 문자 등을 설정할 수 있다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1>1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2>2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3>3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4>4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5>5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6>6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7>7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8>8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>tool</span><span class=p>.</span><span class=nx>ruff</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>line-length</span> <span class=p>=</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>tool</span><span class=p>.</span><span class=nx>ruff</span><span class=p>.</span><span class=nx>format</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>quote-style</span> <span class=p>=</span> <span class=s2>&#34;single&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>indent-style</span> <span class=p>=</span> <span class=s2>&#34;tab&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>line-ending</span> <span class=p>=</span> <span class=s2>&#34;lf&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>docstring-code-format</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=nx>line-ending</span> <span class=p>=</span> <span class=mi>100</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=docstring-포맷팅>Docstring 포맷팅<a hidden class=anchor aria-hidden=true href=#docstring-포맷팅>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1>1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2>2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>tool</span><span class=p>.</span><span class=nx>ruff</span><span class=p>.</span><span class=nx>format</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>docstring-code-format</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=nx>docstring-code-line-length</span> <span class=p>=</span> <span class=mi>20</span>
</span></span></code></pre></td></tr></table></div></div><p>Ruff는 독스트링 내의 Python 코드 예제를 자동으로 포맷팅하는 기능을 제공.<br>이는 doctest, Markdown, reStructuredText 등 다양한 형식을 지원</p><h4 id=포맷-억제>포맷 억제<a hidden class=anchor aria-hidden=true href=#포맷-억제>#</a></h4><p><code># fmt: on</code>, <code># fmt: off</code>, <code># fmt: skip</code> 주석을 사용하여 특정 코드 블록의 포맷팅을 비활성화</p><h4 id=충돌하는-린트-규칙>충돌하는 린트 규칙<a hidden class=anchor aria-hidden=true href=#충돌하는-린트-규칙>#</a></h4><p>Ruff 포맷터와 충돌할 수 있는 린트 규칙들이 있으며, 이들을 비활성화하는 것이 권장</p><ul><li>tab-indentation (W191)</li><li>indentation-with-invalid-multiple (E111)</li><li>indentation-with-invalid-multiple-comment (E114)</li><li>over-indented (E117)</li><li>indent-with-spaces (D206)</li><li>triple-single-quotes (D300)</li><li>bad-quotes-inline-string (Q000)</li><li>bad-quotes-multiline-string (Q001)</li><li>bad-quotes-docstring (Q002)</li><li>avoidable-escaped-quote (Q003)</li><li>missing-trailing-comma (COM812)</li><li>prohibited-trailing-comma (COM819)</li><li>single-line-implicit-string-concatenation (ISC001)</li><li>multi-line-implicit-string-concatenation (ISC002)</li></ul><h4 id=종료-코드-1>종료 코드<a hidden class=anchor aria-hidden=true href=#종료-코드-1>#</a></h4><p><code>ruff format</code>은 성공 시 0, 비정상 종료 시 2를 반환.<br><code>--check</code> 옵션 사용 시에는 포맷 필요 여부에 따라 0 또는 1을 반환</p><h4 id=black-호환성>Black 호환성<a hidden class=anchor aria-hidden=true href=#black-호환성>#</a></h4><p>Black과 거의 동일한 출력을 생성하도록 설계</p><h4 id=임포트-정렬>임포트 정렬<a hidden class=anchor aria-hidden=true href=#임포트-정렬>#</a></h4><p>현재 Ruff 포맷터는 임포트를 정렬하지 않는다.<br>임포트 정렬과 포맷팅을 모두 수행하려면 다음과 같이 실행한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1>1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ruff check --select I --fix
</span></span><span class=line><span class=cl>$ ruff format
</span></span></code></pre></td></tr></table></div></div><h3 id=편집기-통합>편집기 통합<a hidden class=anchor aria-hidden=true href=#편집기-통합>#</a></h3><p>다양한 코드 편집기와 통합되어 실시간으로 코드 품질을 점검하고 포매팅할 수 있다.</p><ul><li>Ruff 언어 서버는 언어 서버 프로토콜 (Language Server Protocol)을 구현하여 에디터 통합의 핵심 역할을 한다.</li><li>Rust로 작성되었으며  <code>ruff</code> CLI의 일부로 <code>ruff server</code> 명령을 통해 사용 가능.</li><li>이전의 <code>ruff-lsp</code>를 대체하는 단일 공통 백엔드</li></ul><h4 id=언어-서버-기능>언어 서버 기능<a hidden class=anchor aria-hidden=true href=#언어-서버-기능>#</a></h4><ul><li><strong>진단 하이라이팅</strong>: Python 코드에 대한 실시간 진단 제공</li><li><strong>동적 설정</strong>: 작업 공간의 설정 파일(<code>pyproject.toml</code>, <code>ruff.toml</code>, <code>.ruff.toml</code>) 변경 시 진단 자동 갱신</li><li><strong>포맷팅</strong>: Python 코드 전체 또는 특정 범위 포맷팅을 지원한다. VS Code에서 <code>Ruff: Format Document</code> 명령 제공</li><li><strong>코드 액션</strong>: 특정 코드 문제에 대한 빠른 수정 제안을 제공한다. 예를 들어, <code># noqa</code> 주석으로 특정 진단을 무시할 수 있으며 문서 내 모든 빠른 수정 적용하거나 import를 정리하는 기능도 지원한다.</li><li><strong>수정 안전성</strong>: 자동 수정은 &ldquo;안전"과 &ldquo;비안전"으로 구분된다. 기본적으로 &ldquo;모두 수정&rdquo; 기능은 안전한 수정만 적용하며, 비안전한 수정은 수동으로 적용할 수 있다. 구성 파일에서 <code>unsafe-fixes = true</code>로 설정하면 &ldquo;모두 수정&rdquo; 시 비안전한 수정도 적용할 수 있다.</li><li><strong>호버</strong>: <code># noqa</code> 주석 위에 마우스를 올리면 해당 규칙에 대한 문서를 표시하여 이해를 돕는다</li><li><strong>Jupyter Notebook 지원</strong>: Ruff는 Jupyter Notebook 파일에 대해서도 Python 파일과 동일한 기능을 제공.</li></ul><h4 id=에디터-설정>에디터 설정<a hidden class=anchor aria-hidden=true href=#에디터-설정>#</a></h4><p>각 에디터별로 특정 설정 지침이 제공된다.<br><code>ruff-lsp</code>에서 설정을 이전하는 경우 변경된 설정이 있으므로 마이그레이션 가이드를 참조</p><h5 id=vs-code>VS Code<a hidden class=anchor aria-hidden=true href=#vs-code>#</a></h5><p>VS Code 마켓 플레이스에서 Ruff 확장 프로그램을 설치<br>버전 2024.32.0 이상을 권장.</p><h6 id=설정-1>설정<a hidden class=anchor aria-hidden=true href=#설정-1>#</a></h6><p><code>settings.json</code> 파일을 열어 다음과 같이 설정하여 Ruff를 기본 린터로 지정</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1>1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2>2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=s2>&#34;python.linting.enabled&#34;</span><span class=err>:</span> <span class=kc>true</span><span class=err>,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;python.linting.ruffEnabled&#34;</span><span class=err>:</span> <span class=kc>true</span><span class=err>,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;python.formatting.provider&#34;</span><span class=err>:</span> <span class=s2>&#34;ruff&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=neovim>Neovim<a hidden class=anchor aria-hidden=true href=#neovim>#</a></h5><p><code>nvim-lspconfig</code> 플러그인을 사용하여 Ruff 언어 서버를 설정.<br>Pyright와 함께 사용할 경우 특정 기능을 비활성화하는 방법이 제공.</p><h6 id=설정-2>설정<a hidden class=anchor aria-hidden=true href=#설정-2>#</a></h6><p><code>init.lua</code> 내 설정</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1>1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2>2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3>3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4>4</a>
</span><span class=lnt id=hl-17-5><a class=lnlinks href=#hl-17-5>5</a>
</span><span class=lnt id=hl-17-6><a class=lnlinks href=#hl-17-6>6</a>
</span><span class=lnt id=hl-17-7><a class=lnlinks href=#hl-17-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=n>require</span><span class=p>(</span><span class=s1>&#39;lspconfig&#39;</span><span class=p>).</span><span class=n>ruff.setup</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=n>init_options</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>settings</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>-- Ruff language server settings go here</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=vim>Vim<a hidden class=anchor aria-hidden=true href=#vim>#</a></h5><p><code>vim-lsp</code> 플러그인을 사용하여 Ruff 언어 서버를 설정</p><h6 id=설정-3>설정<a hidden class=anchor aria-hidden=true href=#설정-3>#</a></h6><p><code>.vimrc</code>내 설정</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1>1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2>2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3>3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4>4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5>5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6>6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>require(&#39;lspconfig&#39;).ruff.setup({
</span></span><span class=line><span class=cl>  init_options = {
</span></span><span class=line><span class=cl>    settings = {
</span></span><span class=line><span class=cl>      -- Ruff language server settings go here
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>})
</span></span></code></pre></td></tr></table></div></div><h5 id=pycharm>PyCharm<a hidden class=anchor aria-hidden=true href=#pycharm>#</a></h5><p>외부 도구로 Ruff를 설정하거나 서드파티 플러그인을 사용</p><h6 id=설정-4>설정<a hidden class=anchor aria-hidden=true href=#설정-4>#</a></h6><ul><li><strong>파일 감시기</strong>를 설정하려면 PyCharm의 <code>Settings</code> > <code>Tools</code> > <code>File Watchers</code>로 이동하여 새 파일 감시기를 추가</li><li><code>Name</code> 필드에 <code>Ruff</code>라고 입력하고, <code>File Type</code>을 Python으로 선택.</li><li><code>Scope</code>와 <code>Output Paths</code>는 기본값으로 두고, <code>Program</code> 필드에는 Ruff의 설치 경로를 지정.</li><li><code>Arguments</code>에는 <code>$FilePathRelativeToProjectRoot$</code>를 입력하여 현재 파일 경로를 기준으로 린팅이 수행되도록 한다.</li></ul><h4 id=ruff-언어-서버의-설정>Ruff 언어 서버의 설정<a hidden class=anchor aria-hidden=true href=#ruff-언어-서버의-설정>#</a></h4><h5 id=일반-설정>일반 설정<a hidden class=anchor aria-hidden=true href=#일반-설정>#</a></h5><ul><li><code>configuration</code>: Ruff 설정 파일 경로 지정</li><li><code>configurationPreference</code>: 설정 우선순위 전략 설정<ul><li><em>옵션</em>:<ul><li><code>"editorFirst"</code>: 편집기 설정이 워크스페이스의 구성 파일보다 우선.</li><li><code>"filesystemFirst"</code>: 워크스페이스의 구성 파일이 편집기 설정보다 우선.</li><li><code>"editorOnly"</code>: 구성 파일을 완전히 무시하고 편집기 설정만 사용.</li></ul></li></ul></li><li><code>exclude</code>: 린팅 및 포맷팅에서 제외할 파일 패턴</li><li><code>lineLength</code>: 라인 길이 설정</li><li><code>fixAll</code>: <code>source.fixAll</code> 코드 액션 활성화 여부</li><li><code>organizeImports</code>: <code>source.organizeImports</code> 코드 액션 활성화 여부</li><li><code>showSyntaxErrors</code>: 구문 오류 진단 표시 여부</li><li><code>logLevel</code>: 서버 로그 레벨 설정</li><li><code>logFile</code>: 로그 파일 경로 설정</li></ul><h5 id=코드-액션-설정>코드 액션 설정<a hidden class=anchor aria-hidden=true href=#코드-액션-설정>#</a></h5><ul><li><code>codeAction.disableRuleComment.enable</code>: <code>noqa</code> 주석을 통한 규칙 비활성화 액션 표시 여부</li><li><code>codeAction.fixViolation.enable</code>: 자동 수정 액션 표시 여부</li></ul><h5 id=린터-설정>린터 설정<a hidden class=anchor aria-hidden=true href=#린터-설정>#</a></h5><ul><li><code>lint.enable</code>: 린팅 활성화 여부</li><li><code>lint.preview</code>: 린터 프리뷰 모드 활성화 여부</li><li><code>lint.select</code>, <code>lint.extendSelect</code>: 활성화할 규칙 설정</li><li><code>lint.ignore</code>, <code>lint.extendIgnore</code>: 비활성화할 규칙 설정</li></ul><h5 id=포맷터-설정>포맷터 설정<a hidden class=anchor aria-hidden=true href=#포맷터-설정>#</a></h5><ul><li><code>format.preview</code>: 포맷터 프리뷰 모드 활성화 여부</li></ul><h5 id=-vs-code-전용-설정>## VS Code 전용 설정<a hidden class=anchor aria-hidden=true href=#-vs-code-전용-설정>#</a></h5><ul><li><code>enable</code>: Ruff 확장 활성화 여부</li><li><code>format.args</code>: 포맷터에 전달할 추가 인수</li><li><code>ignoreStandardLibrary</code>: 표준 라이브러리 파일 무시 여부</li><li><code>importStrategy</code>: Ruff 실행 파일 로딩 전략</li><li><code>interpreter</code>: Python 인터프리터 경로</li><li><code>lint.args</code>: 린터에 전달할 추가 인수</li><li><code>lint.run</code>: 린팅 실행 시점 설정</li><li><code>nativeServer</code>: 네이티브 언어 서버 사용 여부</li><li><code>path</code>: Ruff 실행 파일 경로</li><li><code>showNotifications</code>: 알림 표시 설정</li><li><code>trace.server</code>: 언어 서버 추적 레벨 설정</li></ul><h3 id=ruff-설정>Ruff 설정<a hidden class=anchor aria-hidden=true href=#ruff-설정>#</a></h3><p><code>pyproject.toml</code>, <code>ruff.toml</code>, 또는 <code>.ruff.toml</code> 파일을 통해 구성이 가능하다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1> 1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2> 2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3> 3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4> 4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5> 5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6> 6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7> 7</a>
</span><span class=lnt id=hl-19-8><a class=lnlinks href=#hl-19-8> 8</a>
</span><span class=lnt id=hl-19-9><a class=lnlinks href=#hl-19-9> 9</a>
</span><span class=lnt id=hl-19-10><a class=lnlinks href=#hl-19-10>10</a>
</span><span class=lnt id=hl-19-11><a class=lnlinks href=#hl-19-11>11</a>
</span><span class=lnt id=hl-19-12><a class=lnlinks href=#hl-19-12>12</a>
</span><span class=lnt id=hl-19-13><a class=lnlinks href=#hl-19-13>13</a>
</span><span class=lnt id=hl-19-14><a class=lnlinks href=#hl-19-14>14</a>
</span><span class=lnt id=hl-19-15><a class=lnlinks href=#hl-19-15>15</a>
</span><span class=lnt id=hl-19-16><a class=lnlinks href=#hl-19-16>16</a>
</span><span class=lnt id=hl-19-17><a class=lnlinks href=#hl-19-17>17</a>
</span><span class=lnt id=hl-19-18><a class=lnlinks href=#hl-19-18>18</a>
</span><span class=lnt id=hl-19-19><a class=lnlinks href=#hl-19-19>19</a>
</span><span class=lnt id=hl-19-20><a class=lnlinks href=#hl-19-20>20</a>
</span><span class=lnt id=hl-19-21><a class=lnlinks href=#hl-19-21>21</a>
</span><span class=lnt id=hl-19-22><a class=lnlinks href=#hl-19-22>22</a>
</span><span class=lnt id=hl-19-23><a class=lnlinks href=#hl-19-23>23</a>
</span><span class=lnt id=hl-19-24><a class=lnlinks href=#hl-19-24>24</a>
</span><span class=lnt id=hl-19-25><a class=lnlinks href=#hl-19-25>25</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>tool</span><span class=p>.</span><span class=nx>ruff</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>exclude</span> <span class=p>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;.bzr&#34;</span><span class=p>,</span> <span class=s2>&#34;.direnv&#34;</span><span class=p>,</span> <span class=s2>&#34;.eggs&#34;</span><span class=p>,</span> <span class=s2>&#34;.git&#34;</span><span class=p>,</span> <span class=s2>&#34;.git-rewrite&#34;</span><span class=p>,</span> <span class=s2>&#34;.hg&#34;</span><span class=p>,</span> <span class=s2>&#34;.ipynb_checkpoints&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;.mypy_cache&#34;</span><span class=p>,</span> <span class=s2>&#34;.nox&#34;</span><span class=p>,</span> <span class=s2>&#34;.pants.d&#34;</span><span class=p>,</span> <span class=s2>&#34;.pyenv&#34;</span><span class=p>,</span> <span class=s2>&#34;.pytest_cache&#34;</span><span class=p>,</span> <span class=s2>&#34;.pytype&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;.ruff_cache&#34;</span><span class=p>,</span> <span class=s2>&#34;.svn&#34;</span><span class=p>,</span> <span class=s2>&#34;.tox&#34;</span><span class=p>,</span> <span class=s2>&#34;.venv&#34;</span><span class=p>,</span> <span class=s2>&#34;.vscode&#34;</span><span class=p>,</span> <span class=s2>&#34;__pypackages__&#34;</span><span class=p>,</span> <span class=s2>&#34;_build&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;buck-out&#34;</span><span class=p>,</span> <span class=s2>&#34;build&#34;</span><span class=p>,</span> <span class=s2>&#34;dist&#34;</span><span class=p>,</span> <span class=s2>&#34;node_modules&#34;</span><span class=p>,</span> <span class=s2>&#34;site-packages&#34;</span><span class=p>,</span> <span class=s2>&#34;venv&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>line-length</span> <span class=p>=</span> <span class=mi>88</span>
</span></span><span class=line><span class=cl><span class=nx>indent-width</span> <span class=p>=</span> <span class=mi>4</span>
</span></span><span class=line><span class=cl><span class=nx>target-version</span> <span class=p>=</span> <span class=s2>&#34;py38&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>tool</span><span class=p>.</span><span class=nx>ruff</span><span class=p>.</span><span class=nx>lint</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>select</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;E4&#34;</span><span class=p>,</span> <span class=s2>&#34;E7&#34;</span><span class=p>,</span> <span class=s2>&#34;E9&#34;</span><span class=p>,</span> <span class=s2>&#34;F&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>ignore</span> <span class=p>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=nx>fixable</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;ALL&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>unfixable</span> <span class=p>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=nx>dummy-variable-rgx</span> <span class=p>=</span> <span class=s2>&#34;^(_+|(_+[a-zA-Z0-9_]*[a-zA-Z0-9]+?))$&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>tool</span><span class=p>.</span><span class=nx>ruff</span><span class=p>.</span><span class=nx>format</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>quote-style</span> <span class=p>=</span> <span class=s2>&#34;double&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>indent-style</span> <span class=p>=</span> <span class=s2>&#34;space&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>skip-magic-trailing-comma</span> <span class=p>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=nx>line-ending</span> <span class=p>=</span> <span class=s2>&#34;auto&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>docstring-code-format</span> <span class=p>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=nx>docstring-code-line-length</span> <span class=p>=</span> <span class=s2>&#34;dynamic&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=주요-설정-옵션>주요 설정 옵션<a hidden class=anchor aria-hidden=true href=#주요-설정-옵션>#</a></h4><ul><li><code>exclude</code>: 린팅 및 포맷팅에서 제외할 디렉토리 및 파일</li><li><code>line-length</code>: 최대 줄 길이 (기본값 88)</li><li><code>indent-width</code>: 들여쓰기 너비 (기본값 4)</li><li><code>target-version</code>: 대상 Python 버전</li></ul><h4 id=린터-설정-1>린터 설정<a hidden class=anchor aria-hidden=true href=#린터-설정-1>#</a></h4><ul><li><code>select</code>: 활성화할 규칙 선택</li><li><code>ignore</code>: 무시할 규칙 선택</li><li><code>fixable</code>: 자동 수정 가능한 규칙 설정</li><li><code>unfixable</code>: 자동 수정 불가능한 규칙 설정</li></ul><h4 id=포맷터-설정-1>포맷터 설정<a hidden class=anchor aria-hidden=true href=#포맷터-설정-1>#</a></h4><ul><li><code>quote-style</code>: 문자열 따옴표 스타일</li><li><code>indent-style</code>: 들여쓰기 스타일</li><li><code>line-ending</code>: 줄 끝 문자 설정</li><li><code>docstring-code-format</code>: 독스트링 내 코드 예제 자동 포맷팅 여부</li></ul><h4 id=설정-파일-우선순위>설정 파일 우선순위<a hidden class=anchor aria-hidden=true href=#설정-파일-우선순위>#</a></h4><ul><li><code>.ruff.toml</code> > <code>ruff.toml</code> > <code>pyproject.toml</code></li><li>가장 가까운 설정 파일이 사용됨</li></ul><h4 id=명령줄-인터페이스>명령줄 인터페이스<a hidden class=anchor aria-hidden=true href=#명령줄-인터페이스>#</a></h4><ol><li>일부 설정은 명령줄 플래그로 제공 가능</li><li><code>--config</code> 플래그를 통해 설정 파일 지정 또는 개별 설정 오버라이드 가능</li></ol><h4 id=python-파일-탐색>Python 파일 탐색<a hidden class=anchor aria-hidden=true href=#python-파일-탐색>#</a></h4><ul><li>기본적으로 <code>*.py</code>, <code>*.pyi</code>, <code>*.ipynb</code>, <code>pyproject.toml</code> 파일 포함</li><li><code>extend-include</code> 설정으로 추가 파일 확장자 포함 가능</li></ul><h5 id=extend>Extend<a hidden class=anchor aria-hidden=true href=#extend>#</a></h5><p>현재 구성에 다른 <code>pyproject.toml</code> 파일을 병합할 수 있도록 한다.<br>이 설정을 통해 사용자 홈 디렉터리와 환경 변수를 확장할 수 있다.<br>현재의 <code>pyproject.toml</code> 파일을 해석할 때, 먼저 이 기본 구성 파일을 로드한 후, 현재 구성 파일에 정의된 속성을 병합</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1>1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2>2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>tool</span><span class=p>.</span><span class=nx>ruff</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>extend</span> <span class=p>=</span> <span class=s2>&#34;../pyproject.toml&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>include</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;pyproject.toml&#34;</span><span class=p>,</span> <span class=s2>&#34;src/**/*.py&#34;</span><span class=p>,</span> <span class=s2>&#34;scripts/**/*.py&#34;</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=jupyter-노트북-지원>Jupyter 노트북 지원<a hidden class=anchor aria-hidden=true href=#jupyter-노트북-지원>#</a></h4><ol><li>버전 0.6.0 이상에서 기본적으로 린팅 및 포맷팅 지원</li><li><code>per-file-ignores</code> 설정으로 노트북 파일에 대한 특정 규칙 무시 가능</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1> 1</a>
</span><span class=lnt id=hl-21-2><a class=lnlinks href=#hl-21-2> 2</a>
</span><span class=lnt id=hl-21-3><a class=lnlinks href=#hl-21-3> 3</a>
</span><span class=lnt id=hl-21-4><a class=lnlinks href=#hl-21-4> 4</a>
</span><span class=lnt id=hl-21-5><a class=lnlinks href=#hl-21-5> 5</a>
</span><span class=lnt id=hl-21-6><a class=lnlinks href=#hl-21-6> 6</a>
</span><span class=lnt id=hl-21-7><a class=lnlinks href=#hl-21-7> 7</a>
</span><span class=lnt id=hl-21-8><a class=lnlinks href=#hl-21-8> 8</a>
</span><span class=lnt id=hl-21-9><a class=lnlinks href=#hl-21-9> 9</a>
</span><span class=lnt id=hl-21-10><a class=lnlinks href=#hl-21-10>10</a>
</span><span class=lnt id=hl-21-11><a class=lnlinks href=#hl-21-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=c># 포매팅에서 Notebook 파일을 제외하려면 다음과 같이 설정.</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>tool</span><span class=p>.</span><span class=nx>ruff</span><span class=p>.</span><span class=nx>format</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>exclude</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;*.ipynb&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># 린팅에서 Notebook 파일을 제외하려면 다음과 같이 설정</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>tool</span><span class=p>.</span><span class=nx>ruff</span><span class=p>.</span><span class=nx>lint</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>exclude</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;*.ipynb&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Notebook 파일에 대해 특정 규칙을 무시하려면 `per-file-ignores` 설정을 사용</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>tool</span><span class=p>.</span><span class=nx>ruff</span><span class=p>.</span><span class=nx>lint</span><span class=p>.</span><span class=nx>per-file-ignores</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;*.ipynb&#34;</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;T20&#34;</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ruff-특정-규칙-ruf>Ruff 특정 규칙 (RUF)<a hidden class=anchor aria-hidden=true href=#ruff-특정-규칙-ruf>#</a></h3><p> Ruff에서 특별히 제공하는 것으로, 다음과 같은 내용을 포함한다.<br> - 모호한 유니코드 문자 사용 감지 (RUF001, RUF002, RUF003)<br> - 컬렉션 리터럴 연결 관련 문제 (RUF004, RUF005)<br> - asyncio 관련 문제 (RUF006)<br> - 함수 데코레이터 사용 개선 (RUF007)<br> - f-string 사용 개선 (RUF008, RUF009, RUF010)<br> - zip 대신 dict 생성자 사용 권장 (RUF011)<br> - 클래스 속성 관련 문제 (RUF012)<br> - 타입 힌트 개선 (RUF013)<br> - 사용되지 않는 noqa 지시문 감지 (RUF100)<br> - sys.path 조작 감지 (RUF200)</p><table><thead><tr><th>코드</th><th>이름</th><th>메시지</th><th>상태</th></tr></thead><tbody><tr><td>RUF001</td><td>ambiguous-unicode-character-string</td><td>String contains ambiguous unicode character &lsquo;{char}&rsquo; (character &lsquo;{name}&rsquo;). Consider using the &lsquo;{type}&rsquo; literal \u{code} instead</td><td>✔️ 🛠️</td></tr><tr><td>RUF002</td><td>ambiguous-unicode-character-docstring</td><td>Docstring contains ambiguous unicode character &lsquo;{char}&rsquo; (character &lsquo;{name}&rsquo;). Consider using the &lsquo;{type}&rsquo; literal \u{code} instead</td><td>✔️ 🛠️</td></tr><tr><td>RUF003</td><td>ambiguous-unicode-character-comment</td><td>Comment contains ambiguous unicode character &lsquo;{char}&rsquo; (character &lsquo;{name}&rsquo;). Consider using the &lsquo;{type}&rsquo; literal \u{code} instead</td><td>✔️ 🛠️</td></tr><tr><td>RUF004</td><td>collection-literal-concatenation</td><td>Collection literal concatenated with literal</td><td>✔️ 🛠️</td></tr><tr><td>RUF005</td><td>collection-literal-concatenation-multiple</td><td>Collection literal concatenated with multiple literals</td><td>✔️ 🛠️</td></tr><tr><td>RUF006</td><td>asyncio-dangling-task</td><td>Dangling <code>asyncio.create_task</code> call</td><td>✔️</td></tr><tr><td>RUF007</td><td>preferred-lru-cache</td><td>Prefer <code>functools.lru_cache()</code> over <code>functools.lru_cache</code> without parentheses</td><td>✔️ 🛠️</td></tr><tr><td>RUF008</td><td>explicit-f-string-type-conversion</td><td>Use <code>f"{var!r}"</code> instead of <code>f"{repr(var)}"</code></td><td>✔️ 🛠️</td></tr><tr><td>RUF009</td><td>explicit-multiple-concatenated-f-strings</td><td>Use a single f-string instead of multiple concatenated f-strings</td><td>✔️ 🛠️</td></tr><tr><td>RUF010</td><td>explicit-f-string-formatting</td><td>Convert <code>f"{var:0>3}"</code> to <code>f"{var:>03}"</code></td><td>✔️ 🛠️</td></tr><tr><td>RUF011</td><td>replace-zip-with-dict</td><td>Replace <code>zip</code> with <code>dict</code> constructor</td><td>✔️ 🛠️</td></tr><tr><td>RUF012</td><td>mutable-class-default</td><td>Mutable class attribute <code>{name}</code> should be annotated with <code>ClassVar</code></td><td>✔️</td></tr><tr><td>RUF013</td><td>implicit-optional</td><td><code>{type}</code> doesn&rsquo;t accept <code>None</code>; consider using <code>Optional[{type}]</code> instead</td><td>✔️ 🛠️</td></tr><tr><td>RUF100</td><td>unused-noqa</td><td>Unused <code>noqa</code> directive</td><td>✔️ 🛠️</td></tr><tr><td>RUF200</td><td>sys-path-manipulation</td><td><code>sys.path</code> manipulation detected</td><td>✔️</td></tr></tbody></table><h3 id=integrations>Integrations<a hidden class=anchor aria-hidden=true href=#integrations>#</a></h3><h4 id=github-actions>Github Actions<a hidden class=anchor aria-hidden=true href=#github-actions>#</a></h4><p>GitHub Actions에서 Ruff를 바로 사용 가능.<br>repository내에 <code>.github/workflows</code> 폴더에 파일을 생성하고 아래의 예시처럼 작성한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1> 1</a>
</span><span class=lnt id=hl-22-2><a class=lnlinks href=#hl-22-2> 2</a>
</span><span class=lnt id=hl-22-3><a class=lnlinks href=#hl-22-3> 3</a>
</span><span class=lnt id=hl-22-4><a class=lnlinks href=#hl-22-4> 4</a>
</span><span class=lnt id=hl-22-5><a class=lnlinks href=#hl-22-5> 5</a>
</span><span class=lnt id=hl-22-6><a class=lnlinks href=#hl-22-6> 6</a>
</span><span class=lnt id=hl-22-7><a class=lnlinks href=#hl-22-7> 7</a>
</span><span class=lnt id=hl-22-8><a class=lnlinks href=#hl-22-8> 8</a>
</span><span class=lnt id=hl-22-9><a class=lnlinks href=#hl-22-9> 9</a>
</span><span class=lnt id=hl-22-10><a class=lnlinks href=#hl-22-10>10</a>
</span><span class=lnt id=hl-22-11><a class=lnlinks href=#hl-22-11>11</a>
</span><span class=lnt id=hl-22-12><a class=lnlinks href=#hl-22-12>12</a>
</span><span class=lnt id=hl-22-13><a class=lnlinks href=#hl-22-13>13</a>
</span><span class=lnt id=hl-22-14><a class=lnlinks href=#hl-22-14>14</a>
</span><span class=lnt id=hl-22-15><a class=lnlinks href=#hl-22-15>15</a>
</span><span class=lnt id=hl-22-16><a class=lnlinks href=#hl-22-16>16</a>
</span><span class=lnt id=hl-22-17><a class=lnlinks href=#hl-22-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>CI</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w> </span><span class=l>push</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Install Python</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-python@v5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>python-version</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;3.11&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Install dependencies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          python -m pip install --upgrade pip
</span></span></span><span class=line><span class=cl><span class=sd>          pip install ruff</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Run Ruff</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>ruff check --output-format=github .</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>또한, <a href=https://github.com/astral-sh/ruff-action>astral-sh/ruff-action</a>을 사용하여 Ruff를 GitHub Actions에서 직접 실행할 수 있다. 기본적으로 <code>ruff-action</code>은 린팅을 수행하며, 필요에 따라 <code>args</code>를 통해 추가 명령어를 지정할 수 있다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-23-1><a class=lnlinks href=#hl-23-1>1</a>
</span><span class=lnt id=hl-23-2><a class=lnlinks href=#hl-23-2>2</a>
</span><span class=lnt id=hl-23-3><a class=lnlinks href=#hl-23-3>3</a>
</span><span class=lnt id=hl-23-4><a class=lnlinks href=#hl-23-4>4</a>
</span><span class=lnt id=hl-23-5><a class=lnlinks href=#hl-23-5>5</a>
</span><span class=lnt id=hl-23-6><a class=lnlinks href=#hl-23-6>6</a>
</span><span class=lnt id=hl-23-7><a class=lnlinks href=#hl-23-7>7</a>
</span><span class=lnt id=hl-23-8><a class=lnlinks href=#hl-23-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Ruff</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>push, pull_request]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ruff</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>astral-sh/ruff-action@v1</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=gitlab-cicd>GitLab CI/CD<a hidden class=anchor aria-hidden=true href=#gitlab-cicd>#</a></h4><p>GitLab CI/CD에서 Ruff를 사용하려면 <code>.gitlab-ci.yml</code> 파일에 다음과 같이 설정한다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1> 1</a>
</span><span class=lnt id=hl-24-2><a class=lnlinks href=#hl-24-2> 2</a>
</span><span class=lnt id=hl-24-3><a class=lnlinks href=#hl-24-3> 3</a>
</span><span class=lnt id=hl-24-4><a class=lnlinks href=#hl-24-4> 4</a>
</span><span class=lnt id=hl-24-5><a class=lnlinks href=#hl-24-5> 5</a>
</span><span class=lnt id=hl-24-6><a class=lnlinks href=#hl-24-6> 6</a>
</span><span class=lnt id=hl-24-7><a class=lnlinks href=#hl-24-7> 7</a>
</span><span class=lnt id=hl-24-8><a class=lnlinks href=#hl-24-8> 8</a>
</span><span class=lnt id=hl-24-9><a class=lnlinks href=#hl-24-9> 9</a>
</span><span class=lnt id=hl-24-10><a class=lnlinks href=#hl-24-10>10</a>
</span><span class=lnt id=hl-24-11><a class=lnlinks href=#hl-24-11>11</a>
</span><span class=lnt id=hl-24-12><a class=lnlinks href=#hl-24-12>12</a>
</span><span class=lnt id=hl-24-13><a class=lnlinks href=#hl-24-13>13</a>
</span><span class=lnt id=hl-24-14><a class=lnlinks href=#hl-24-14>14</a>
</span><span class=lnt id=hl-24-15><a class=lnlinks href=#hl-24-15>15</a>
</span><span class=lnt id=hl-24-16><a class=lnlinks href=#hl-24-16>16</a>
</span><span class=lnt id=hl-24-17><a class=lnlinks href=#hl-24-17>17</a>
</span><span class=lnt id=hl-24-18><a class=lnlinks href=#hl-24-18>18</a>
</span><span class=lnt id=hl-24-19><a class=lnlinks href=#hl-24-19>19</a>
</span><span class=lnt id=hl-24-20><a class=lnlinks href=#hl-24-20>20</a>
</span><span class=lnt id=hl-24-21><a class=lnlinks href=#hl-24-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>.base_ruff</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>stage</span><span class=p>:</span><span class=w> </span><span class=l>build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>interruptible</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>ghcr.io/astral-sh/ruff:0.7.2-alpine</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>before_script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>cd $CI_PROJECT_DIR</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>ruff --version</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Ruff Check</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extends</span><span class=p>:</span><span class=w> </span><span class=l>.base_ruff  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>ruff check --output-format=gitlab &gt; code-quality-report.json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>artifacts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>reports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>codequality</span><span class=p>:</span><span class=w> </span><span class=l>$CI_PROJECT_DIR/code-quality-report.json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Ruff Format</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>extends</span><span class=p>:</span><span class=w> </span><span class=l>.base_ruff</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>script</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>ruff format --diff</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>이 설정은 <code>ruff check</code>와 <code>ruff format</code>을 병렬로 실행하며, GitLab의 코드 품질 보고서와 연동된다.</p><h4 id=pre-commit>Pre-commit<a hidden class=anchor aria-hidden=true href=#pre-commit>#</a></h4><p>Ruff는 <a href=https://pre-commit.com/>pre-commit</a>과 통합되어 커밋 전에 자동으로 린팅과 포매팅을 수행할 수 있다. 설정 예시는 다음과 같다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-25-1><a class=lnlinks href=#hl-25-1>1</a>
</span><span class=lnt id=hl-25-2><a class=lnlinks href=#hl-25-2>2</a>
</span><span class=lnt id=hl-25-3><a class=lnlinks href=#hl-25-3>3</a>
</span><span class=lnt id=hl-25-4><a class=lnlinks href=#hl-25-4>4</a>
</span><span class=lnt id=hl-25-5><a class=lnlinks href=#hl-25-5>5</a>
</span><span class=lnt id=hl-25-6><a class=lnlinks href=#hl-25-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/astral-sh/ruff-pre-commit</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>rev</span><span class=p>:</span><span class=w> </span><span class=l>v0.7.2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hooks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>ruff</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>args</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span>--<span class=l>fix ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>ruff-format</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><code>--fix</code> 옵션을 추가하면 자동으로 수정 가능한 린팅 오류를 해결한다. 또한, Jupyter Notebook 파일에도 적용하려면 <code>types_or</code>에 <code>jupyter</code>를 추가할 수 있다.</p><h4 id=mdformat>Mdformat<a hidden class=anchor aria-hidden=true href=#mdformat>#</a></h4><p>Ruff는 <a href=https://mdformat.readthedocs.io/>mdformat</a>과의 플러그인을 통해 Markdown 파일 내의 Python 코드 블록을 포매팅할 수 있다. 설치 방법은 다음과 같습니다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ pip install mdformat-ruff
</span></span></code></pre></td></tr></table></div></div><p>설치 후, <code>mdformat</code>을 실행하면 Markdown 파일 내의 Python 코드 블록이 Ruff를 통해 포매팅된다.</p><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><h3 id=ruff-1>Ruff<a hidden class=anchor aria-hidden=true href=#ruff-1>#</a></h3><p><a href=https://docs.astral.sh/ruff/tutorial/>Tutorial | Ruff</a><br><a href=https://docs.astral.sh/ruff/installation/>Installing Ruff | Ruff</a><br><a href=https://docs.astral.sh/ruff/linter/#exit-codes>The Ruff Linter | Ruff</a><br><a href=https://docs.astral.sh/ruff/formatter/>The Ruff Formatter | Ruff</a><br><a href=https://docs.astral.sh/ruff/editors>Editor Integration | Ruff</a><br><a href=https://docs.astral.sh/ruff/editors/settings/>Settings | Ruff</a><br><a href=https://docs.astral.sh/ruff/configuration>Configuring Ruff | Ruff</a><br><a href=https://docs.astral.sh/ruff/rules/#ruff-specific-rules-ruf>Rules | Ruff</a><br><a href=https://docs.astral.sh/ruff/settings/#extend>Settings | Ruff</a><br><a href=https://docs.astral.sh/ruff/integrations/>Integrations | Ruff</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/programming-languages/>Programming-Languages</a></li><li><a href=https://buenhyden.github.io/tags/python/>Python</a></li><li><a href=https://buenhyden.github.io/tags/advanced/>Advanced</a></li><li><a href=https://buenhyden.github.io/tags/linter/>Linter</a></li><li><a href=https://buenhyden.github.io/tags/formatter/>Formatter</a></li><li><a href=https://buenhyden.github.io/tags/ruff/>Ruff</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/programming-languages/python/library/static-typing/pydantic/><span class=title>« Prev</span><br><span>pydantic</span>
</a><a class=next href=https://buenhyden.github.io/posts/programming-languages/python/advanced/linter-and-formatter/autopep8/><span class=title>Next »</span><br><span>autopep8</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>