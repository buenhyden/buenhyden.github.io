<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>캐싱 (Caching) | hyunyoun's Blog</title><meta name=keywords content="Computer-System,Computer-Architecture,Memory-Architecture,Caching"><meta name=description content="캐싱 (Caching) 은 자주 사용되는 데이터를 빠른 저장소에 임시로 보관해 데이터 접근 속도를 높이고 시스템 부하를 줄이는 기술이다. 지역성 원리를 활용해 성능을 극대화하며, 웹 서버, 데이터베이스, 애플리케이션 등 다양한 계층과 아키텍처에서 핵심적인 성능 최적화 수단으로 활용된다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/systems-and-infrastructure/infrastructure/infrastructure-components/caching-subsystems/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.a9863521b3bd3c240bc506f46b95e3c06ccef2ae37f529d5f99bdaef442bccce.css integrity="sha256-qYY1IbO9PCQLxQb0a5XjwGzO8q439SnV+Zva70QrzM4=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/systems-and-infrastructure/infrastructure/infrastructure-components/caching-subsystems/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/systems-and-infrastructure/infrastructure/infrastructure-components/caching-subsystems/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/systems-and-infrastructure/infrastructure/infrastructure-components/caching-subsystems/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="캐싱 (Caching)"><meta property="og:description" content="캐싱 (Caching) 은 자주 사용되는 데이터를 빠른 저장소에 임시로 보관해 데이터 접근 속도를 높이고 시스템 부하를 줄이는 기술이다. 지역성 원리를 활용해 성능을 극대화하며, 웹 서버, 데이터베이스, 애플리케이션 등 다양한 계층과 아키텍처에서 핵심적인 성능 최적화 수단으로 활용된다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="캐싱 (Caching)"><meta name=twitter:description content="캐싱 (Caching) 은 자주 사용되는 데이터를 빠른 저장소에 임시로 보관해 데이터 접근 속도를 높이고 시스템 부하를 줄이는 기술이다. 지역성 원리를 활용해 성능을 극대화하며, 웹 서버, 데이터베이스, 애플리케이션 등 다양한 계층과 아키텍처에서 핵심적인 성능 최적화 수단으로 활용된다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Computer Science and Engineering","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Systems and Infrastructure","item":"https://buenhyden.github.io/posts/systems-and-infrastructure/"},{"@type":"ListItem","position":3,"name":"Platform Infrastructure","item":"https://buenhyden.github.io/posts/systems-and-infrastructure/infrastructure/"},{"@type":"ListItem","position":4,"name":"캐싱 (Caching)","item":"https://buenhyden.github.io/posts/systems-and-infrastructure/infrastructure/infrastructure-components/caching-subsystems/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>Computer Science and Engineering</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/systems-and-infrastructure/>Systems and Infrastructure</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/systems-and-infrastructure/infrastructure/>Platform Infrastructure</a></div><h1>캐싱 (Caching)</h1><div class=post-description>캐싱 (Caching) 은 자주 사용되는 데이터를 빠른 저장소에 임시로 보관해 데이터 접근 속도를 높이고 시스템 부하를 줄이는 기술이다. 지역성 원리를 활용해 성능을 극대화하며, 웹 서버, 데이터베이스, 애플리케이션 등 다양한 계층과 아키텍처에서 핵심적인 성능 최적화 수단으로 활용된다.</div></header><div class=post-content><h2 id=캐싱-caching>캐싱 (Caching)<a hidden class=anchor aria-hidden=true href=#캐싱-caching>#</a></h2><p>아래는 " 캐싱 (Caching)" 에 대해 요청한 기준에 따라 체계적으로 정리한 내용입니다.</p><hr><h2 id=1-태그>1. 태그<a hidden class=anchor aria-hidden=true href=#1-태그>#</a></h2><ul><li><strong>Caching</strong></li><li><strong>Performance-Optimization</strong></li><li><strong>Distributed-Systems</strong></li><li><strong>Software-Architecture</strong></li></ul><hr><h2 id=2-분류-카테고리-분석>2. 분류 (카테고리) 분석<a hidden class=anchor aria-hidden=true href=#2-분류-카테고리-분석>#</a></h2><p><strong>분류:</strong><br>Computer Science and Engineering > Software Engineering > Design and Architecture</p><p><strong>분석 및 근거:</strong><br>캐싱은 컴퓨터 시스템, 소프트웨어, 네트워크 등 다양한 분야에서 성능 최적화와 확장성, 신뢰성 향상을 위한 핵심 설계 요소로서, 소프트웨어 엔지니어링의 설계 및 아키텍처 영역에 포함되는 것이 적절하다. 캐싱은 시스템 설계에서 데이터 접근 속도, 부하 분산, 일관성 유지 등 다양한 아키텍처 결정에 영향을 주기 때문이다 [1][2][3].</p><hr><h2 id=3-요약-200-자-내외>3. 요약 (200 자 내외)<a hidden class=anchor aria-hidden=true href=#3-요약-200-자-내외>#</a></h2><p>캐싱은 자주 사용되는 데이터를 빠른 저장소에 임시 저장해, 반복 접근 시 성능을 크게 향상시키는 기술로, 데이터베이스 및 네트워크 부하를 줄이고 사용자 경험을 개선한다 [1][4][2].</p><hr><h2 id=4-개요-250-자-내외>4. 개요 (250 자 내외)<a hidden class=anchor aria-hidden=true href=#4-개요-250-자-내외>#</a></h2><p>캐싱은 데이터나 연산 결과를 메모리 등 고속 저장소에 임시 저장해, 이후 동일 요청 시 원본 저장소 대신 빠르게 제공하는 기술이다. 서버, 클라이언트, 네트워크 등 다양한 계층에서 적용되며, 시스템 성능과 확장성, 비용 효율성을 크게 높인다 [4][1][2].</p><hr><h2 id=5-핵심-개념>5. 핵심 개념<a hidden class=anchor aria-hidden=true href=#5-핵심-개념>#</a></h2><p><strong>이론 및 실무 통합 개념</strong></p><ul><li><strong>캐싱 (Caching):</strong> 자주 사용되는 데이터나 연산 결과를 고속 저장소 (메모리 등) 에 임시 저장해, 반복 접근 시 빠르게 제공하는 기술 [4][1][2].</li><li><strong>캐시 (Cache):</strong> 데이터를 임시 저장하는 공간 또는 계층 [5][6].</li><li><strong>캐시 히트/미스:</strong> 요청 데이터가 캐시에 있으면 히트, 없으면 미스로 구분 [6].</li><li><strong>캐시 일관성 (Cache Coherency):</strong> 여러 저장소 간 데이터 일관성 유지 [7].</li><li><strong>캐시 무효화 (Cache Invalidation):</strong> 데이터 변경 시 캐시 갱신/삭제 [8][6].</li></ul><p><strong>실무 구현 요소</strong></p><ul><li><strong>캐시 저장소:</strong> Redis, Memcached, Ehcache 등 [9][6].</li><li><strong>캐시 키 설계:</strong> 요청의 고유성을 식별하는 키 (예: 사용자 ID+ 날짜)[10][11][12].</li><li><strong>캐시 정책:</strong> TTL, LRU, LFU 등 [9][13].</li><li><strong>캐시 무효화 전략:</strong> 이벤트 기반, 주기적, 수동 동기화 등 [8][6].</li><li><strong>캐시 계층:</strong> 로컬 캐시, 분산 캐시, 브라우저 캐시, 프록시 캐시 등 [3][14][15].</li></ul><hr><h2 id=6-조사-내용-요청-항목별-정리>6. 조사 내용 (요청 항목별 정리)<a hidden class=anchor aria-hidden=true href=#6-조사-내용-요청-항목별-정리>#</a></h2><h3 id=배경>배경<a hidden class=anchor aria-hidden=true href=#배경>#</a></h3><ul><li><strong>배경:</strong> 데이터베이스, 네트워크, 디스크 등은 상대적으로 느린 저장소로, 반복 접근 시 성능 저하 및 부하 문제 발생 [4][1][2].</li><li><strong>해결책:</strong> 자주 사용되는 데이터를 빠른 저장소에 임시 저장해 성능 개선 [4][1][2].</li></ul><h3 id=목적-및-필요성>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성>#</a></h3><ul><li><strong>목적:</strong> 데이터 접근 속도 향상, 시스템 부하 감소, 사용자 경험 개선 [1][4][2].</li><li><strong>필요성:</strong> 대규모 트래픽, 반복 쿼리, 느린 저장소 접근 시 필수적 [4][1][2].</li></ul><h3 id=주요-기능-및-역할>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할>#</a></h3><ul><li><strong>기능:</strong> 데이터 임시 저장, 빠른 제공, 부하 분산 [1][4][2].</li><li><strong>역할:</strong> 성능 최적화, 확장성 제공, 비용 절감 [1][4][2].</li></ul><h3 id=특징>특징<a hidden class=anchor aria-hidden=true href=#특징>#</a></h3><ul><li><strong>임시 저장:</strong> 데이터는 일정 기간 또는 조건에 따라 저장 [4][5].</li><li><strong>고속 접근:</strong> 메모리 기반으로 빠른 응답 [4][5].</li><li><strong>계층적 적용:</strong> 여러 계층 (서버, 클라이언트, 네트워크) 에서 사용 [15][14][3].</li></ul><h3 id=핵심-원칙>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙>#</a></h3><ul><li><strong>빠른 접근:</strong> 자주 사용되는 데이터는 빠른 저장소에 저장 [4][1][2].</li><li><strong>적정 저장:</strong> 저장 용량과 성능 간 균형 [4][5].</li><li><strong>일관성 유지:</strong> 데이터 변경 시 캐시 갱신 [8][6].</li><li><strong>효율적 무효화:</strong> 오래된 데이터는 제거 또는 갱신 [8][6].</li></ul><h3 id=주요-원리>주요 원리<a hidden class=anchor aria-hidden=true href=#주요-원리>#</a></h3><ul><li><strong>공간/시간 지역성 활용:</strong> 최근/자주 사용되는 데이터는 다시 사용될 확률이 높음 [16][13].</li><li><strong>캐시 히트/미스:</strong> 요청 데이터가 캐시에 있으면 히트, 없으면 미스 [6].</li><li><strong>캐시 교체 알고리즘:</strong> LRU, LFU, FIFO 등 [13].</li></ul><h4 id=다이어그램-작동-원리>다이어그램 (작동 원리)<a hidden class=anchor aria-hidden=true href=#다이어그램-작동-원리>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6>6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7>7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[클라이언트] --- 요청 ---&gt; [캐시]
</span></span><span class=line><span class=cl>      |                      |
</span></span><span class=line><span class=cl>      | (캐시 미스)          | (캐시 히트)
</span></span><span class=line><span class=cl>      v                      v
</span></span><span class=line><span class=cl>[원본 저장소(DB 등)]       [캐시에서 응답]
</span></span><span class=line><span class=cl>      |
</span></span><span class=line><span class=cl>      v
</span></span><span class=line><span class=cl>[캐시에 저장]
</span></span></code></pre></td></tr></table></div></div><p>mermaid 예시:</p><pre class=mermaid>flowchart LR
    Client --&gt;|Request| Cache
    Cache --&gt;|Cache Hit| Client
    Cache --&gt;|Cache Miss| Origin[Origin Storage]
    Origin --&gt;|Response| Cache
    Cache --&gt;|Store| Client
</pre><h3 id=구조-및-아키텍처>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처>#</a></h3><ul><li><strong>구성요소:</strong><ul><li><strong>캐시 저장소:</strong> 데이터 임시 저장 (메모리, 디스크 등)[4][5].</li><li><strong>캐시 관리자:</strong> 캐시 정책, 무효화, 교체 알고리즘 관리 [9][13].</li><li><strong>캐시 키:</strong> 요청의 고유성 식별 [10][11][12].</li><li><strong>클라이언트/서버/네트워크 캐시:</strong> 적용 계층에 따라 구분 [15][14][3].</li></ul></li><li><strong>필수 구성요소:</strong> 캐시 저장소, 캐시 관리자, 캐시 키</li><li><strong>선택 구성요소:</strong> 분산 캐시 서버, CDN, 프록시 캐시 [3][14][15]</li></ul><h4 id=다이어그램-아키텍처>다이어그램 (아키텍처)<a hidden class=anchor aria-hidden=true href=#다이어그램-아키텍처>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2>2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3>3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4>4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5>5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6>6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7>7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8>8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[클라이언트]
</span></span><span class=line><span class=cl>   |
</span></span><span class=line><span class=cl>[브라우저 캐시]
</span></span><span class=line><span class=cl>   |
</span></span><span class=line><span class=cl>[프록시/네트워크 캐시]
</span></span><span class=line><span class=cl>   |
</span></span><span class=line><span class=cl>[서버 캐시]
</span></span><span class=line><span class=cl>   |
</span></span><span class=line><span class=cl>[데이터베이스/원본 저장소]
</span></span></code></pre></td></tr></table></div></div><p>mermaid 예시:</p><pre class=mermaid>flowchart TD
    Client --&gt; BrowserCache
    BrowserCache --&gt; ProxyCache
    ProxyCache --&gt; ServerCache
    ServerCache --&gt; Database
</pre><h3 id=구현-기법>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법>#</a></h3><table><thead><tr><th>기법</th><th>정의/구성</th><th>목적</th><th>실제 예시</th></tr></thead><tbody><tr><td>시간 기반 캐싱</td><td>TTL 설정</td><td>일정 시간 후 무효화</td><td>Redis TTL, HTTP Cache-Control</td></tr><tr><td>공간 기반 캐싱</td><td>크기 제한, LRU 등</td><td>저장 용량 관리</td><td>Memcached, Ehcache</td></tr><tr><td>이벤트 기반 캐싱</td><td>데이터 변경 시 무효화</td><td>데이터 일관성 유지</td><td>DB 변경 시 캐시 삭제</td></tr><tr><td>분산 캐싱</td><td>여러 서버에 분산 저장</td><td>확장성, 가용성</td><td>Redis Cluster, Memcached</td></tr></tbody></table><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>특성 원인</th></tr></thead><tbody><tr><td>장점</td><td>성능 향상</td><td>데이터 접근 속도가 빨라짐</td><td>고속 저장소 사용</td></tr><tr><td></td><td>부하 감소</td><td>원본 저장소 (DB 등) 접근 감소</td><td>반복 요청 캐시 처리</td></tr><tr><td></td><td>비용 절감</td><td>서버/네트워크 리소스 절약</td><td>부하 분산</td></tr><tr><td></td><td>확장성</td><td>대규모 트래픽 처리 가능</td><td>분산 캐시 적용</td></tr><tr><td></td><td>예측 가능한 성능</td><td>트래픽 급증 시에도 안정적 성능</td><td>인메모리 캐시 활용</td></tr></tbody></table><h3 id=단점과-문제점-및-해결방안>단점과 문제점 및 해결방안<a hidden class=anchor aria-hidden=true href=#단점과-문제점-및-해결방안>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>데이터 일관성 문제</td><td>원본과 캐시 간 불일치 가능</td><td>캐시 무효화 전략 강화</td></tr><tr><td></td><td>저장 공간 제한</td><td>메모리 등 제한된 공간</td><td>LRU, TTL 등 교체 정책</td></tr><tr><td></td><td>복잡성 증가</td><td>캐시 계층, 정책 관리 필요</td><td>명확한 정책 수립</td></tr></tbody></table><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>캐시 쇄도</td><td>동시 다수 캐시 미스</td><td>DB 과부하</td><td>모니터링</td><td>만료 시간 분산</td><td>뮤텍스, 백오프</td></tr><tr><td></td><td>캐시 관통</td><td>NULL 값 미캐싱</td><td>불필요한 DB 접근</td><td>로그 분석</td><td>NULL 값도 캐싱</td><td>널 오브젝트 패턴</td></tr><tr><td></td><td>오래된 데이터 노출</td><td>캐시 무효화 미흡</td><td>사용자 경험 저하</td><td>모니터링</td><td>주기적 무효화</td><td>이벤트 기반 무효화</td></tr></tbody></table><h3 id=도전-과제>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제>#</a></h3><table><thead><tr><th>과제</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>분산 환경 일관성</td><td>여러 노드 간 데이터 불일치</td><td>데이터 신뢰성 저하</td><td>분산 트랜잭션 모니터</td><td>일관성 프로토콜</td><td>분산 락, 벡터 시계</td></tr><tr><td>대규모 트래픽 관리</td><td>캐시 서버 과부하</td><td>서비스 장애</td><td>부하 모니터링</td><td>샤딩, 로드밸런싱</td><td>자동 확장</td></tr><tr><td>보안 문제</td><td>캐시 데이터 유출</td><td>정보 노출</td><td>접근 제어 모니터링</td><td>암호화, 인증</td><td>보안 정책 강화</td></tr></tbody></table><h3 id=분류-기준에-따른-종류-및-유형>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형>#</a></h3><table><thead><tr><th>기준</th><th>종류/유형</th><th>설명</th></tr></thead><tbody><tr><td>적용 계층</td><td>서버 캐시</td><td>서버 측에서 데이터 임시 저장 [14][15]</td></tr><tr><td></td><td>클라이언트 캐시</td><td>브라우저 등 클라이언트 측 저장 [14][15]</td></tr><tr><td></td><td>프록시 캐시</td><td>네트워크 중간 서버에서 저장 [14][15]</td></tr><tr><td></td><td>CDN 캐시</td><td>전 세계 노드에 분산 저장 [14][15]</td></tr><tr><td>저장 위치</td><td>로컬 캐시</td><td>단일 서버/클라이언트 내 저장 [3]</td></tr><tr><td></td><td>분산 캐시</td><td>여러 서버에 분산 저장 [3]</td></tr><tr><td>데이터 특성</td><td>정적 캐시</td><td>변경 적은 데이터 (이미지, CSS 등)[14][15]</td></tr><tr><td></td><td>동적 캐시</td><td>자주 변경되는 데이터 (API 결과 등)[14][15]</td></tr></tbody></table><h3 id=실무-사용-예시>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시>#</a></h3><table><thead><tr><th>사용 예시</th><th>목적</th><th>효과</th></tr></thead><tbody><tr><td>웹 페이지 정적 리소스</td><td>로딩 속도 개선</td><td>사용자 경험 향상</td></tr><tr><td>데이터베이스 쿼리 결과</td><td>DB 부하 감소</td><td>서버 성능 향상</td></tr><tr><td>API 응답 결과</td><td>응답 속도 개선</td><td>트래픽 처리 능력 향상</td></tr><tr><td>CDN 을 통한 미디어 파일</td><td>전 세계 빠른 전송</td><td>대역폭 비용 절감</td></tr></tbody></table><h3 id=활용-사례>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례>#</a></h3><p><strong>사례: 전자상거래 사이트의 상품 정보 캐싱</strong></p><ul><li><strong>시스템 구성:</strong><ul><li>클라이언트 (브라우저) → 프록시 캐시 → 서버 (애플리케이션) → Redis 캐시 → 데이터베이스</li></ul></li><li><strong>Workflow:</strong><ol><li>사용자가 상품 페이지 요청</li><li>브라우저 캐시 확인 (히트 시 응답)</li><li>프록시 캐시 확인 (히트 시 응답)</li><li>서버에서 Redis 캐시 확인 (히트 시 응답)</li><li>Redis 미스 시 DB 조회 후 Redis 에 저장</li></ol></li><li><strong>역할:</strong><ul><li>브라우저/프록시 캐시: 정적 리소스 및 HTML 캐싱</li><li>Redis: 동적 상품 정보 캐싱</li></ul></li><li><strong>비교:</strong><ul><li>캐시 미적용 시 DB 부하 증가, 응답 지연</li><li>캐시 적용 시 빠른 응답, 부하 분산</li></ul></li></ul><h3 id=구현-예시-python>구현 예시 (Python)<a hidden class=anchor aria-hidden=true href=#구현-예시-python>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span><span class=lnt id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>redis</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Redis 연결</span>
</span></span><span class=line><span class=cl><span class=n>r</span> <span class=o>=</span> <span class=n>redis</span><span class=o>.</span><span class=n>Redis</span><span class=p>(</span><span class=n>host</span><span class=o>=</span><span class=s1>&#39;localhost&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>6379</span><span class=p>,</span> <span class=n>db</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_product_info</span><span class=p>(</span><span class=n>product_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># 캐시에서 조회</span>
</span></span><span class=line><span class=cl>    <span class=n>cached_data</span> <span class=o>=</span> <span class=n>r</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;product:</span><span class=si>{</span><span class=n>product_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>cached_data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>cached_data</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># DB에서 조회 (가상 코드)</span>
</span></span><span class=line><span class=cl>    <span class=n>db_data</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;Product Info for </span><span class=si>{</span><span class=n>product_id</span><span class=si>}</span><span class=s2>&#34;</span>  <span class=c1># 실제로는 DB 쿼리</span>
</span></span><span class=line><span class=cl>    <span class=c1># 캐시에 저장 (TTL: 300초)</span>
</span></span><span class=line><span class=cl>    <span class=n>r</span><span class=o>.</span><span class=n>setex</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;product:</span><span class=si>{</span><span class=n>product_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=mi>300</span><span class=p>,</span> <span class=n>db_data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>db_data</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>고려사항</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>데이터 일관성</td><td>원본과 캐시 간 불일치 방지</td><td>이벤트 기반 무효화</td></tr><tr><td>캐시 키 설계</td><td>요청 고유성 보장</td><td>파라미터 조합 키 사용</td></tr><tr><td>캐시 정책</td><td>TTL, LRU 등 적절한 정책 선택</td><td>데이터 특성에 맞춤</td></tr><tr><td>모니터링</td><td>캐시 히트/미스 비율, 부하 모니터링</td><td>지표 설정 및 알림</td></tr><tr><td>보안</td><td>민감 데이터 캐싱 시 암호화</td><td>접근 제어, 암호화</td></tr></tbody></table><h3 id=최적화하기-위한-고려사항-및-주의할-점>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점>#</a></h3><table><thead><tr><th>고려사항</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>캐시 크기 관리</td><td>메모리 부족 방지</td><td>LRU, TTL 적용</td></tr><tr><td>분산 캐시 활용</td><td>대규모 트래픽 분산</td><td>Redis Cluster 사용</td></tr><tr><td>캐시 관통 방지</td><td>NULL 값도 캐싱</td><td>널 오브젝트 패턴 적용</td></tr><tr><td>캐시 쇄도 방지</td><td>만료 시간 분산</td><td>랜덤 TTL 적용</td></tr></tbody></table><h3 id=기타-사항>기타 사항<a hidden class=anchor aria-hidden=true href=#기타-사항>#</a></h3><ul><li><strong>캐시 알고리즘:</strong> LRU, LFU, FIFO 등 상황에 맞는 알고리즘 선택 [13].</li><li><strong>캐시 무효화:</strong> 데이터 변경 시 캐시 갱신/삭제 필요 [8][6].</li><li><strong>분산 환경:</strong> 데이터 일관성 유지를 위한 분산 락, 벡터 시계 등 활용 [3].</li><li><strong>보안:</strong> 민감 데이터는 암호화 또는 캐싱 제외 [17].</li></ul><hr><h2 id=7-추가-조사-내용>7. 추가 조사 내용<a hidden class=anchor aria-hidden=true href=#7-추가-조사-내용>#</a></h2><p><strong>주제와 관련하여 주목할 내용</strong></p><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>알고리즘</td><td>캐싱</td><td>LRU</td><td>최근 사용 안 된 데이터 제거 [13]</td></tr><tr><td>알고리즘</td><td>캐싱</td><td>LFU</td><td>사용 빈도 적은 데이터 제거 [13]</td></tr><tr><td>알고리즘</td><td>캐싱</td><td>FIFO</td><td>먼저 들어온 데이터 제거 [13]</td></tr><tr><td>보안</td><td>캐싱</td><td>암호화</td><td>민감 데이터 보호 [17]</td></tr><tr><td>분산</td><td>캐싱</td><td>일관성</td><td>분산 환경 데이터 일관성 [3]</td></tr><tr><td>최적화</td><td>캐싱</td><td>TTL</td><td>캐시 만료 시간 관리 [9][17]</td></tr></tbody></table><hr><h2 id=8-반드시-학습해야-할-내용>8. 반드시 학습해야 할 내용<a hidden class=anchor aria-hidden=true href=#8-반드시-학습해야-할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>알고리즘</td><td>캐싱</td><td>LRU/LFU/FIFO</td><td>캐시 교체 알고리즘 [13]</td></tr><tr><td>아키텍처</td><td>캐싱</td><td>로컬/분산 캐시</td><td>캐시 적용 계층 [3][14]</td></tr><tr><td>보안</td><td>캐싱</td><td>암호화/접근제어</td><td>민감 데이터 처리 [17]</td></tr><tr><td>일관성</td><td>캐싱</td><td>무효화/동기화</td><td>데이터 일관성 유지 [8][6]</td></tr><tr><td>최적화</td><td>캐싱</td><td>TTL/정책 관리</td><td>캐시 성능 최적화 [9][17]</td></tr></tbody></table><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>알고리즘</td><td>LRU</td><td>Least Recently Used, 최근 사용 안 된 데이터 제거 [13]</td></tr><tr><td>알고리즘</td><td>LFU</td><td>Least Frequently Used, 사용 빈도 적은 데이터 제거 [13]</td></tr><tr><td>알고리즘</td><td>FIFO</td><td>First In First Out, 먼저 들어온 데이터 제거 [13]</td></tr><tr><td>아키텍처</td><td>로컬 캐시</td><td>단일 서버/클라이언트 내 캐시 [3]</td></tr><tr><td>아키텍처</td><td>분산 캐시</td><td>여러 서버에 분산 저장 [3]</td></tr><tr><td>정책</td><td>TTL</td><td>Time To Live, 캐시 만료 시간 [9][17]</td></tr><tr><td>정책</td><td>캐시 무효화</td><td>데이터 변경 시 캐시 갱신/삭제 [8][6]</td></tr><tr><td>보안</td><td>암호화</td><td>민감 데이터 보호를 위한 암호화 [17]</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><ul><li><a href=https://sonia9914.tistory.com/132>캐싱 개념 정리 (티스토리)</a></li><li><a href=https://aws.amazon.com/ko/caching/>AWS 캐싱 설명</a></li><li><a href=https://f-lab.kr/insight/understanding-caching-and-distributed-cache-20240517>캐싱과 분산 캐시 (F-Lab)</a></li><li><a href=https://colevelup.tistory.com/6>캐싱이란? (티스토리)</a></li><li><a href=https://bldev2473.github.io/architecture-software/caching>분산 캐싱 (Bldev&rsquo;s Blog)</a></li><li><a href=https://parksb.github.io/article/29.html>캐시 동작 원리 (Parksb)</a></li><li><a href=https://f-lab.kr/insight/effective-caching-strategies-20240620>효율적인 캐싱 전략 (F-Lab)</a></li><li><a href=https://www.hostragons.com/ko/%EB%B8%94%EB%A1%9C%EA%B7%B8/%EB%B0%B1%EC%97%94%EB%93%9C-%EC%BA%90%EC%8B%B1-%EC%A0%84%EB%9E%B5/>백엔드 캐싱 전략 (Hostragons)</a></li><li><a href=https://toss.tech/article/cache-traffic-tip>캐시 문제 해결 가이드 (Toss)</a></li><li><a href=https://f-lab.kr/insight/efficient-caching-strategy-20250207>캐싱 무효화 (F-Lab)</a></li><li><a href=https://uknew.co/wp-%EC%BA%90%EC%8B%B1-%EC%9C%A0%ED%98%95%EA%B3%BC-4%EA%B0%80%EC%A7%80-%EC%9B%B9-%EC%BA%90%EC%8B%9C-%EC%A2%85%EB%A5%98/>웹 캐시 종류 (uknew)</a></li><li><a href=https://ksh-coding.tistory.com/151>Redis 캐싱 예시 (성장하는 성하 Blog)</a></li><li><a href=https://daco2020.tistory.com/854>Python aiocache 예시 (코드로 우주평화)</a></li><li><a href=https://www.qu3vipon.com/cache-strategy>캐시 운영 전략 (Qu3vipon)</a></li><li><a href=https://betteryy.com/%EC%9B%B9-%EC%84%B1%EB%8A%A5-%EC%B5%9C%EC%A0%81%ED%99%94%EB%A5%BC-%EC%9C%84%ED%95%9C-%EC%BA%90%EC%8B%B1-%EC%A0%84%EB%9E%B5/>웹 성능 최적화 캐싱 전략 (BetteryBlog)</a></li><li><a href=https://developer.mozilla.org/ko/docs/Web/HTTP/Guides/Caching>HTTP 캐싱 (MDN)</a></li><li><a href=https://notavoid.tistory.com/139>캐시 일관성 (Notavoid)</a></li><li><a href=https://monday9pm.com/%EC%BA%90%EC%8B%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0-1-%EA%B8%B0%EB%B3%B8%ED%8E%B8-a387799a1634>캐시 사용하기 (Monday9pm)</a></li><li><a href=https://www.designkits.co.kr/blog/web-terminology/Caching>캐싱 용어 (디자인키트)</a></li><li><a href=https://programmer7895.tistory.com/112>캐싱 알고리즘 (티스토리)</a></li></ul><p>아래는 요청하신 <strong>&ldquo;캐싱(Caching)&rdquo;</strong> 주제에 대한 1차 조사 정리입니다. 너무 방대하여 단계별로 나누어 제출드려요.</p><hr><h2 id=-tags>🏷 Tags<a hidden class=anchor aria-hidden=true href=#-tags>#</a></h2><ul><li><code>Caching-Mechanisms</code></li><li><code>Performance-Optimization</code></li><li><code>Distributed-Systems</code></li><li><code>Memory-Management</code></li></ul><hr><h2 id=2-분류-계층-분석>2. 분류 계층 분석<a hidden class=anchor aria-hidden=true href=#2-분류-계층-분석>#</a></h2><ul><li><p><strong>현재 분류</strong>: Computer Science and Engineering > Software Engineering > Design and Architecture</p></li><li><p><strong>분석</strong>:</p><ul><li>캐싱은 <strong>소프트웨어 설계</strong>뿐 아니라 <strong>시스템 아키텍처</strong>, <strong>디스트리뷰티드 시스템</strong>, <strong>데이터베이스 관리</strong>와도 깊이 연관됩니다.</li><li>따라서 <code>"Computer Science and Engineering > Distributed-Systems"</code>나 <code>"System Architecture"</code> 계층에도 충분히 포함될 수 있음.</li><li><strong>근거</strong>: 캐싱은 성능 최적화, 지연(latency) 감소를 위해 <strong>아키텍처 차원</strong>에서 설계되어야 하며, 단순 코드 차원의 설계보다 상위 구조에 해당합니다.</li></ul></li></ul><hr><h2 id=3-200자-요약>3. 200자 요약<a hidden class=anchor aria-hidden=true href=#3-200자-요약>#</a></h2><p>캐싱은 자주 쓰이는 데이터를 임시 저장해 성능을 높이고 지연을 줄이는 기술입니다. 메모리, 디스크, 프록시 등 다양한 계층에서 사용되며, 분산 캐시와 로컬 캐시로 나눌 수 있습니다. 캐시 일관성, 만료 정책, 적중률이 중요하며, 잘 설계하면 응답 속도 개선과 부하 완화가 가능합니다.</p><hr><h2 id=4-250자-개요>4. 250자 개요<a hidden class=anchor aria-hidden=true href=#4-250자-개요>#</a></h2><p>캐싱은 빈번한 데이터를 임시 저장소 (메모리·디스크·네트워크 등)에 보관해 성능을 최적화하는 아키텍처 기술입니다. 핵심 개념으로는 적중률, 만료(expiration), 무효화(invalidation), 일관성(consistency), 계층 캐시(cache hierarchy)가 있으며, 로컬 캐시(In‑Memory), 분산 캐시(Redis, Memcached), CDN/프록시 캐시 등 다양한 형태가 있습니다. 구현 기법으로 LRU·LFU·TTL, Write‑Through/Back 전략이 있고, 장점은 응답 지연 감소, 서버 부하 경감 등이지만 일관성 관리와 메모리 부담이 도전 과제입니다.</p><hr><h2 id=5-핵심-개념-1>5. 핵심 개념<a hidden class=anchor aria-hidden=true href=#5-핵심-개념-1>#</a></h2><h3 id=5-1-필수-이론>5-1. 필수 이론<a hidden class=anchor aria-hidden=true href=#5-1-필수-이론>#</a></h3><ul><li><strong>Cache Hit / Miss</strong>: 요청된 데이터가 캐시 존재 여부</li><li><strong>Cache Miss Penalty</strong>: 미스 시 원본 접근 비용</li><li><strong>Local vs Distributed Cache</strong>: 앱 내부 vs 네트워크 캐시</li><li><strong>Cache Hierarchy</strong>: L1~L3 CPU 캐시나 시스템-DB 캐시 계층</li><li><strong>TTL (Time To Live)</strong>: 데이터 만료 주기 설정</li><li><strong>Eviction Policy</strong>: LRU, LFU, FIFO, Random 등 캐시 제거 전략</li><li><strong>Consistency Model</strong>: Strong vs Eventual consistency</li><li><strong>Write Strategies</strong>: Write-through, Write-back, Write-around</li><li><strong>Cache Stampede / Thundering Herd</strong>: 동시 미스 시 폭증 방지</li></ul><h3 id=5-2-실무-적용-요소>5-2. 실무 적용 요소<a hidden class=anchor aria-hidden=true href=#5-2-실무-적용-요소>#</a></h3><ul><li>메모리 관리 (메모리 풀, 가비지 컬렉션 영향)</li><li>네트워크 지연 고려한 분산 캐시 구성</li><li>장애 대비 복제(replication)와 페일오버</li><li>캐시 클라이언트 라이브러리 (e.g. Redis client, Spring Cache 등)</li></ul><hr><h2 id=7-추가-조사-및-주목할-내용-예비-정리>7. 추가 조사 및 주목할 내용 (예비 정리)<a hidden class=anchor aria-hidden=true href=#7-추가-조사-및-주목할-내용-예비-정리>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>기능·성능</td><td>Eviction Policy</td><td>LRU vs LFU</td><td>접근 빈도/시간 기준 제거 차이</td></tr><tr><td>아키텍처</td><td>Cache Coherence</td><td>분산 시스템 일관성 관리</td><td>데이터 동기화, 무효화 방식</td></tr><tr><td>보안</td><td>Cache Poisoning</td><td>악의적 캐시 변조 위험</td><td>입력 검증과 권한 체크 필요</td></tr><tr><td>최신 기술·트렌드</td><td>Client-Side Caching</td><td>브라우저/앱 내부 캐싱</td><td>오프라인 성능·UX 향상에 기여</td></tr><tr><td>인프라</td><td>Edge & CDN Cache</td><td>지리적 분산 캐시 활용</td><td>전송지연 감소, 글로벌 사용자 대응</td></tr></tbody></table><hr><p>아래는 <strong>캐싱(Caching)</strong> 주제의 다음 챕터들에 대한 정리입니다. 이해를 돕기 위한 다이어그램과 표도 포함했습니다!</p><hr><h2 id=-주요-원리-이전-주요-원리>🔧 주요 원리 (이전 ‘주요 원리’)<a hidden class=anchor aria-hidden=true href=#-주요-원리-이전-주요-원리>#</a></h2><ul><li><strong>Temporal locality (시간 국소성)</strong>: 한 번 접근한 데이터는 가까운 시간 내에 다시 활용될 가능성이 높음 ([en.wikipedia.org][1], [geeksforgeeks.org][2])</li><li><strong>Spatial locality (공간 국소성)</strong>: 인접한 주소의 데이터는 함께 접근될 가능성이 높음</li><li><strong>교체 정책 (Eviction policy)</strong>: 적중률을 최대화하기 위한 전략 (LRU, LFU, FIFO, Random, RRIP 등) ([en.wikipedia.org][3])</li><li><strong>쓰기 정책 (Write policy)</strong>: Write-through vs Write-back, Write-allocate vs No-write-allocate 기반 결정 ([en.wikipedia.org][1])</li></ul><h3 id=-다이어그램-작동-원리--주요-원리>💡 다이어그램 (작동 원리 + 주요 원리)<a hidden class=anchor aria-hidden=true href=#-다이어그램-작동-원리--주요-원리>#</a></h3><pre class=mermaid>flowchart LR
  A[클라이언트 요청] --&gt; B{Cache에 존재?}
  B -- Yes --&gt; C[Cache Hit: 데이터 반환]
  B -- No --&gt; D[Cache Miss → 원본(DB/API) 조회]
  D --&gt; E[Cache에 저장 (Eviction 적용)]
  E --&gt; C
  style B fill:#f8f,stroke:#333,stroke-width:2px
  style C fill:#8f8,stroke:#333,stroke-width:2px
  style D fill:#f88,stroke:#333,stroke-width:2px
</pre><ul><li>캐시 적중률 향상을 위해 Temporal/Spatial locality를 활용</li><li>캐시 공간이 부족할 때 Eviction 정책이 실행됨</li><li>쓰기 정책은 데이터 일관성과 지연 시간에 균형 고려</li></ul><hr><h2 id=-구조-및-아키텍처-구성-요소-포함>🏗 구조 및 아키텍처 (구성 요소 포함)<a hidden class=anchor aria-hidden=true href=#-구조-및-아키텍처-구성-요소-포함>#</a></h2><h3 id=필수-구성-요소>필수 구성 요소<a hidden class=anchor aria-hidden=true href=#필수-구성-요소>#</a></h3><ol><li><strong>Cache Store</strong>: 실제 데이터를 저장하는 메모리 계층 (메모리, 디스크, 분산 DB 등)</li><li><strong>Indexing/Tag</strong>: Cache 항목을 빠르게 조회할 수 있는 키 맵핑</li><li><strong>Eviction Manager</strong>: 교체 정책 기반으로 캐시 항목 제거</li><li><strong>Expiration Manager (TTL/Idle)</strong>: 시간 기반 만료 처리</li><li><strong>Consistency Controller</strong>: 무효화, 갱신, 일관성 유지 제어</li><li><strong>Write Controller</strong>: Write-through/Write-back 방식 구현</li></ol><h3 id=선택적-구성-요소>선택적 구성 요소<a hidden class=anchor aria-hidden=true href=#선택적-구성-요소>#</a></h3><ul><li><strong>Replication Manager</strong>: 분산 캐시에서 데이터 복제 및 복구</li><li><strong>Monitoring & Metrics</strong>: Hit/Miss 비율, 메모리 사용 감시</li><li><strong>Pre-fetching (Refresh-Ahead)</strong>: TTL 만료 전에 미리 갱신</li></ul><h3 id=-아키텍처-다이어그램>👁 아키텍처 다이어그램<a hidden class=anchor aria-hidden=true href=#-아키텍처-다이어그램>#</a></h3><pre class=mermaid>graph TB
  subgraph Application
    App
  end
  subgraph Cache-Layer
    C1[In-Memory Client Cache]
    C2[Distributed Cache Cluster]
  end
  subgraph Data-Layer
    DB[(Database)]
    API[(External API)]
  end
  App --&gt; C1
  C1 --&gt;|miss →| C2
  C2 --&gt;|miss →| DB
  C2 --&gt; API
  C2 -. Consistency .-&gt; C1
  C2 -. Eviction/TTL .-&gt; C2
</pre><ul><li>App은 로컬(in-process) 캐시(C1)를 먼저 조회</li><li>캐시 미스 시 중앙 분산 캐시(C2) 확인</li><li>C2 역시 캐시 미스 시 DB/API 호출</li><li>TTL, Eviction, 무효화, 복제 로직 포함</li></ul><hr><h2 id=-구현-기법>🛠 구현 기법<a hidden class=anchor aria-hidden=true href=#-구현-기법>#</a></h2><ol><li><p><strong>In-Memory Cache</strong>: 애플리케이션 내 HashMap 기반, Guava Cache, Caffeine, <code>dict + LRU cache decorator</code> (Python <code>functools.lru_cache</code>)</p></li><li><p><strong>External Key-Value Store</strong>: Redis, Memcached (분산 지원)</p></li><li><p><strong>Cache-aside (Read-through)</strong>: 애플리케이션에서 miss 발생 시 수동 저장</p></li><li><p><strong>Write-Through / Write-Back</strong>:</p><ul><li>Write-through: 쓰기마다 캐시 + DB 동시 업데이트</li><li>Write-back: 캐시에 기록 후 지연 반영</li></ul></li><li><p><strong>Refresh-Ahead</strong>: TTL 만료 전 사전 갱신</p></li><li><p><strong>Consistent Hashing</strong>: 분산 캐시 확장 시 노드 추가/제거 시 데이터 재분배 최소화</p></li><li><p><strong>Replication & Sharding</strong>: Redis Sentinel/Cluster, 분산 일관성 및 고가용성</p></li></ol><hr><h3 id=-비교-테이블-eviction-정책-구성요소-외-간단-정리-포함>📊 비교 테이블 (Eviction 정책) (구성요소 외 간단 정리 포함)<a hidden class=anchor aria-hidden=true href=#-비교-테이블-eviction-정책-구성요소-외-간단-정리-포함>#</a></h3><table><thead><tr><th>종류</th><th>기준</th><th>장단점 요약</th></tr></thead><tbody><tr><td><strong>LRU</strong></td><td>최근 사용 시점 기반</td><td>간단하고 효과적, 고비용 유지</td></tr><tr><td><strong>LFU</strong></td><td>빈도 기반</td><td>인기데이터 유지, 오래된 인기데이터 유지 단점</td></tr><tr><td><strong>FIFO</strong></td><td>삽입 순서 기반</td><td>구현 쉬움, 비사용 항목 제거</td></tr><tr><td><strong>Random</strong></td><td>임의 선택</td><td>구현 간편, 예측 불가</td></tr><tr><td><strong>RRIP</strong></td><td>재참조 예측</td><td>공격에도 강인, 복잡도 상승 ([medium.com][4], [kislayverma.com][5], [en.wikipedia.org][1], [geeksforgeeks.org][6])</td></tr></tbody></table><hr><p>아래는 캐싱(Caching)의 <strong>장점</strong>, <strong>단점 및 문제점＋해결방안</strong>, <strong>분류 기준별 유형</strong>, <strong>실무 사용 예시</strong>, <strong>활용 사례</strong>, <strong>도전 과제</strong>, 그리고 <strong>최적화 및 적용 고려사항</strong> 입니다.</p><hr><h2 id=-장점>✅ 장점<a hidden class=anchor aria-hidden=true href=#-장점>#</a></h2><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>응답 속도 향상</td><td>메모리(또는 인메모리 캐시)에 저장 → 네트워크/디스크 접근 최소화</td></tr><tr><td>장점</td><td>서버 부하 감소</td><td>DB/API 호출 횟수 감소로 시스템 자원 절약</td></tr><tr><td>장점</td><td>스케일 아웃 지원</td><td>캐시 클러스터 분산 운영 시 확장성 향상</td></tr><tr><td>장점</td><td>트래픽 지역화</td><td>CDN/프록시 캐시 활용 시 지리적 지연 감소</td></tr><tr><td>장점</td><td>장애 회복력 강화</td><td>캐시가 일시 장애에도 서비스 자체 흐름 유지 기능</td></tr></tbody></table><ul><li><strong>왜 발생하나?</strong> → 캐시는 원본 접근 대신 <em>예측 가능한 복제 저장소</em>이므로 효과 발생</li><li>실무 요소: TTL, Eviction, 히트율 등 조합 최적화 필수</li></ul><hr><h2 id=-단점-및-문제점--해결방안>⚠️ 단점 및 문제점 + 해결방안<a hidden class=anchor aria-hidden=true href=#-단점-및-문제점--해결방안>#</a></h2><h3 id=-단점>💥 단점<a hidden class=anchor aria-hidden=true href=#-단점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>데이터 일관성 문제</td><td>원본 변경 시 캐시 stale 상태 발생</td><td>무효화 전략(invalidate), TTL 설정, 이벤트 기반 갱신 적용</td></tr><tr><td>단점</td><td>메모리 리소스 고갈</td><td>과도한 캐시 사용 시 메모리 부족 발생 가능</td><td>Eviction 정책 + 메모리 사용량 모니터링</td></tr><tr><td>단점</td><td>복잡도 증가</td><td>분산 캐시 구성, 일관성, 장애 조치 로직이 복잡</td><td>프레임워크 사용, 표준화된 아키텍처 설계</td></tr></tbody></table><h3 id=-문제점>🧩 문제점<a hidden class=anchor aria-hidden=true href=#-문제점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>Cache Stampede</td><td>동시 다수 썸 요청 시 cache miss → DB 과부하</td><td>트래픽 폭증, DB 장애 가능성</td><td>모니터링 miss 비율 급등</td><td>Locking, Singleflight 패턴</td><td>Mutex, 펜들링, Thundering Herd 완화 기법</td></tr><tr><td>문제점</td><td>Cache Poisoning</td><td>악의적 데이터 캐싱으로 잘못된 응답 제공</td><td>보안 사고, 클라이언트 오류</td><td>이상 응답 감지, 로그 분석</td><td>입력 검증, 서명 기반 무효화</td><td>인증 기반 데이터 무효화, TTL 짧게 설정</td></tr><tr><td>문제점</td><td>Hot Key 집중 부하</td><td>특정 키에 트래픽 집중 → 해당 캐시 파티션 부하 폭증</td><td>지연 증가 및 병목</td><td>hit/miss 분포, request 집중 확인</td><td>Key 분산(sharding), load balancing</td><td>Consistent hashing, replica 분산</td></tr></tbody></table><hr><h2 id=-분류-기준에-따른-종류-및-유형>🧩 분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#-분류-기준에-따른-종류-및-유형>#</a></h2><table><thead><tr><th>기준</th><th>유형</th><th>설명</th></tr></thead><tbody><tr><td>저장 위치</td><td>In‑Process, Local (애플리케이션), External (Redis, Memcached)</td><td>로컬/원격 분산 캐시</td></tr><tr><td>분산 특성</td><td>Single‑node vs Distributed</td><td>단일 인스턴스 vs 클러스터링 가능 시스템</td></tr><tr><td>쓰기 방식</td><td>Cache‑Aside, Read‑Through, Write‑Behind, Write‑Through, Write‑Around</td><td>데이터 읽기 또는 쓰기 방식에 따른 접근 전략</td></tr><tr><td>만료 처리</td><td>TTL 기반, Idle 기반, Refresh‑Ahead</td><td>시간 또는 미리 갱신에 의한 만료 관리</td></tr><tr><td>Eviction 정책</td><td>LRU, LFU, FIFO, Random, RRIP</td><td>제거 전략별 차등 우선순위</td></tr><tr><td>일관성 유형</td><td>Strong, Eventual, Weak</td><td>트레이드오프 기반 일관성 수준 확보</td></tr></tbody></table><hr><h2 id=-실무-사용-예시>🛠 실무 사용 예시<a hidden class=anchor aria-hidden=true href=#-실무-사용-예시>#</a></h2><table><thead><tr><th>시스템 유형</th><th>목적</th><th>사용 기술 및 조합</th><th>기대 효과</th></tr></thead><tbody><tr><td>웹 API 서버</td><td>Response time 낮추기</td><td>Caffeine local + Redis distributed cache</td><td>평균 응답 50% 단축, DB 부하 ↓</td></tr><tr><td>e‑commerce 사이트</td><td>인기 상품 정보 캐싱</td><td>Redis + TTL + LFU eviction</td><td>인기 상품 페이지 적중률 90%↑</td></tr><tr><td>CDN 기반 서비스</td><td>정적 컨텐츠 전달 최적화</td><td>CDN edge cache + Cache-Control 헤더</td><td>지연 최소화, 글로벌 응답 안정화</td></tr><tr><td>머신러닝 예측 API</td><td>피처 가공 결과 캐싱</td><td>Write‑Through + Redis + cache stampede 완화</td><td>연산량 절감, 서버부하↓</td></tr></tbody></table><hr><h2 id=-활용-사례-ecommerce-사이트>📚 활용 사례: e‑Commerce 사이트<a hidden class=anchor aria-hidden=true href=#-활용-사례-ecommerce-사이트>#</a></h2><ul><li><p><strong>시스템 구성</strong>:</p><pre class=mermaid>graph LR
  U[사용자] --&gt; LB[로드밸런서]
  LB --&gt; AppA[웹서버 A]
  LB --&gt; AppB[웹서버 B]
  subgraph Cache
    C1[Local Caffeine]
    C2[Redis Cluster]
  end
  AppA --&gt; C1
  AppB --&gt; C1
  C1 --&gt;|miss| C2
  C2 --&gt;|miss| DB[(상품 DB)]
</pre></li><li><p><strong>Workflow</strong>:</p><ol><li>유저 요청 → 로컬 Caffeine 조회</li><li>miss 시 Redis 조회, miss면 DB 조회</li><li>Redis 및 로컬 동시에 캐싱</li><li>만료 정책: 인기 상품 TTL 길게 설정</li></ol></li><li><p><strong>결과 차이</strong>:</p><ul><li>TTL 5분 설정 전 평균 DB 호출 수: 10,000/s → 이후: 1,500/s</li><li>캐시 히트율 약 85%, 응답 속도 평균 200ms → 50ms</li></ul></li><li><p><strong>역할</strong>:</p><ul><li><strong>로컬 캐시</strong>: 평균 70%의 요청 빠르게 처리</li><li><strong>분산 캐시</strong>: 복제 및 확장성 강화</li></ul></li></ul><hr><h2 id=-구현-예시-javascript-nodejs--redis--lru-inmemory>💻 구현 예시 (JavaScript: Node.js + Redis + LRU In‑Memory)<a hidden class=anchor aria-hidden=true href=#-구현-예시-javascript-nodejs--redis--lru-inmemory>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span><span class=lnt id=hl-8-15><a class=lnlinks href=#hl-8-15>15</a>
</span><span class=lnt id=hl-8-16><a class=lnlinks href=#hl-8-16>16</a>
</span><span class=lnt id=hl-8-17><a class=lnlinks href=#hl-8-17>17</a>
</span><span class=lnt id=hl-8-18><a class=lnlinks href=#hl-8-18>18</a>
</span><span class=lnt id=hl-8-19><a class=lnlinks href=#hl-8-19>19</a>
</span><span class=lnt id=hl-8-20><a class=lnlinks href=#hl-8-20>20</a>
</span><span class=lnt id=hl-8-21><a class=lnlinks href=#hl-8-21>21</a>
</span><span class=lnt id=hl-8-22><a class=lnlinks href=#hl-8-22>22</a>
</span><span class=lnt id=hl-8-23><a class=lnlinks href=#hl-8-23>23</a>
</span><span class=lnt id=hl-8-24><a class=lnlinks href=#hl-8-24>24</a>
</span><span class=lnt id=hl-8-25><a class=lnlinks href=#hl-8-25>25</a>
</span><span class=lnt id=hl-8-26><a class=lnlinks href=#hl-8-26>26</a>
</span><span class=lnt id=hl-8-27><a class=lnlinks href=#hl-8-27>27</a>
</span><span class=lnt id=hl-8-28><a class=lnlinks href=#hl-8-28>28</a>
</span><span class=lnt id=hl-8-29><a class=lnlinks href=#hl-8-29>29</a>
</span><span class=lnt id=hl-8-30><a class=lnlinks href=#hl-8-30>30</a>
</span><span class=lnt id=hl-8-31><a class=lnlinks href=#hl-8-31>31</a>
</span><span class=lnt id=hl-8-32><a class=lnlinks href=#hl-8-32>32</a>
</span><span class=lnt id=hl-8-33><a class=lnlinks href=#hl-8-33>33</a>
</span><span class=lnt id=hl-8-34><a class=lnlinks href=#hl-8-34>34</a>
</span><span class=lnt id=hl-8-35><a class=lnlinks href=#hl-8-35>35</a>
</span><span class=lnt id=hl-8-36><a class=lnlinks href=#hl-8-36>36</a>
</span><span class=lnt id=hl-8-37><a class=lnlinks href=#hl-8-37>37</a>
</span><span class=lnt id=hl-8-38><a class=lnlinks href=#hl-8-38>38</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>Redis</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;ioredis&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>LRU</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;lru-cache&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>redis</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Redis</span><span class=p>({</span> <span class=nx>host</span><span class=o>:</span> <span class=s1>&#39;redis:6379&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>localCache</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>LRU</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>max</span><span class=o>:</span> <span class=mi>500</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>maxAge</span><span class=o>:</span> <span class=mi>1000</span> <span class=o>*</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>5</span><span class=p>,</span> <span class=c1>// 5분
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 캐싱 미들웨어
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>async</span> <span class=kd>function</span> <span class=nx>cacheMiddleware</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>key</span> <span class=o>=</span> <span class=sb>`product:</span><span class=si>${</span><span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>localVal</span> <span class=o>=</span> <span class=nx>localCache</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>localVal</span><span class=p>)</span> <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>localVal</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>distVal</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>redis</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>distVal</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>localCache</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>distVal</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>distVal</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>locals</span><span class=p>.</span><span class=nx>cacheKey</span> <span class=o>=</span> <span class=nx>key</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/product/:id&#39;</span><span class=p>,</span> <span class=nx>cacheMiddleware</span><span class=p>,</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>cacheKey</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>res</span><span class=p>.</span><span class=nx>locals</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 예시: DB 조회 모킹
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>product</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>db</span><span class=p>.</span><span class=nx>getProduct</span><span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=nx>redis</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>,</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>product</span><span class=p>),</span> <span class=s1>&#39;EX&#39;</span><span class=p>,</span> <span class=mi>300</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>localCache</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>,</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>product</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=nx>product</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>3000</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=-도전-과제>🎯 도전 과제<a hidden class=anchor aria-hidden=true href=#-도전-과제>#</a></h2><table><thead><tr><th>카테고리</th><th>과제 항목</th><th>원인 및 영향</th><th>탐지/진단 방법</th><th>예방/해결 전략</th></tr></thead><tbody><tr><td>일관성</td><td>분산 일관성 유지</td><td>노드 간 데이터 불일치, stale 응답 가능</td><td>캐시 무효화 실패, TTL 만료 로그 분석</td><td>이벤트 기반 invalidation, pub/sub 푸시 갱신</td></tr><tr><td>성능</td><td>캐시 네트워크 병목</td><td>원격 캐시 접근 지연, 응답 쏠림 발생</td><td>latency spike 관찰</td><td>Local Cache 우선, QoS 기반 접근 분산</td></tr><tr><td>확장성</td><td>캐시 파티셔닝 재배치</td><td>노드 증감 시 Consistent hashing 재할당 필요</td><td>불균형 모니터, hot shard 확인</td><td>Consistent hashing+replication</td></tr><tr><td>보안</td><td>캐시 데이터 노출</td><td>민감정보(PII 등) 캐싱 저장 가능</td><td>접근 제어 로그 이상 탐지</td><td>민감정보 비캐싱, 암호화, 키 기반 필터 우선 적용</td></tr><tr><td>비용</td><td>메모리/인프라 비용 급증</td><td>캐시 용량 증가 시 비용 상승</td><td>메모리 사용량 메트릭 관찰</td><td>적정 사이징, Eviction tuning, 비용-효과 검토</td></tr></tbody></table><hr><h2 id=-적용-및-최적화-고려사항>🛠 적용 및 최적화 고려사항<a hidden class=anchor aria-hidden=true href=#-적용-및-최적화-고려사항>#</a></h2><h3 id=실무-적용-고려사항>실무 적용 고려사항<a hidden class=anchor aria-hidden=true href=#실무-적용-고려사항>#</a></h3><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>캐시 계층 설계</td><td>Local + Distributed 조합 시 성능과 일관성 균형 필요</td><td>L1 로컬 우선, L2 분산 중심 조합 구조 설계</td></tr><tr><td>색인 키 전략</td><td>전역 고유 키, expiry, namespace 기준 설계</td><td><code>{service}:{entity}:{id}</code> 템플릿 사용, TTL 일관성 유지</td></tr><tr><td>Eviction 정책 설정</td><td>workload 특성 따른 최적 조합 필요</td><td>인기 기준 LFU + 최근 기준 LRU 혼합 정책 적용 권장</td></tr><tr><td>무효화 전략</td><td>Push vs Poll 방식에 따른 일관성 요구 충족</td><td>DB 트리거 push, Change Data Capture(CDC) 기반 무효화 도입</td></tr><tr><td>모니터링</td><td>히트율, miss원인, latency, memory usage metrics 모니터링</td><td>Grafana/Prometheus, Redis INFO 기반 수집</td></tr></tbody></table><h3 id=최적화-고려사항>최적화 고려사항<a hidden class=anchor aria-hidden=true href=#최적화-고려사항>#</a></h3><table><thead><tr><th>항목</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>TTL 설정</td><td>과도/저과도 설정 시 트래픽 폭증 또는 stale 문제 발생</td><td>데이터 특성별 TTL 분류: Static(1d), Dynamic(1h~5m), Volatile(1m)</td></tr><tr><td>Eviction 튜닝</td><td>고정 정책 아닌 workload 기반 조합 정책 필요</td><td>Redis maxmemory-policy 설정: volatile-lru 등 적용</td></tr><tr><td>Thundering Herd 방지</td><td>인기 키 동시 폭증 시 문제</td><td>Mutex, request coalescing(singleflight) 도입</td></tr><tr><td>Stale 쓰기 정책</td><td>stale 데이터 읽기 vs 일관성 요구 상황에 따른 전략 선택</td><td>fallback 정보 노출 시 캐시 우선, 엄격 일관성 시 무조건 DB 호출</td></tr><tr><td>Serialization 포맷</td><td>빠른 marshalling/unmarshalling 중요</td><td>JSON → MessagePack 또는 Protobuf로 변경 권장</td></tr></tbody></table><hr><h2 id=-정리-및-차례-안내>✅ 정리 및 차례 안내<a hidden class=anchor aria-hidden=true href=#-정리-및-차례-안내>#</a></h2><p>이로써 <strong>장점/단점</strong>, <strong>기법</strong>, <strong>구현 예시</strong>, <strong>최적화 전략</strong>, <strong>도전 과제</strong>까지 포함한 캐싱의 핵심 내용을 마무리했습니다.</p><p>다음은 캐싱(Caching)의 <strong>고급 무효화 전략</strong>, <strong>글로벌 분산 캐시 설계 및 CDN 통합</strong>, 그리고 <strong>모니터링 세부 구성</strong>에 대한 심화 내용입니다.</p><hr><h2 id=1--고급-무효화invalidation-전략>1. 🔄 고급 무효화(Invalidation) 전략<a hidden class=anchor aria-hidden=true href=#1--고급-무효화invalidation-전략>#</a></h2><h3 id=무효화-패턴-비교>무효화 패턴 비교<a hidden class=anchor aria-hidden=true href=#무효화-패턴-비교>#</a></h3><table><thead><tr><th>전략</th><th>설명</th><th>장점</th><th>단점/유의점</th></tr></thead><tbody><tr><td><strong>Push-based</strong></td><td>DB나 서비스 이벤트 발생 시 캐시에 푸시 알림</td><td>실시간 일관성 보장</td><td>네트워크 오버헤드, 복잡한 이벤트 흐름 설계 필요</td></tr><tr><td><strong>Pull-based (TTL)</strong></td><td>TTL이 만료된 후 새로 조회하도록 자동 무효화</td><td>단순 구현 및 관리</td><td>stale 상태 유지할 수 있음</td></tr><tr><td><strong>Cache-aside + Callback</strong></td><td>Read-through + Write-through 과 함께 변경 시 callback 무효화 사용</td><td>일관성과 성능 균형</td><td>콜백 누락 시 stale 데이터 이슈 발생 가능</td></tr><tr><td><strong>CDN Invalidation API</strong></td><td>CDN 상의 캐시된 자원을 REST API(예: CDN purge) 통한 강제 만료</td><td>특정 경로만 빠르게 제거 가능</td><td>요청량 많을 시 비용/지연 발생 우려</td></tr><tr><td><strong>Versioned URL / Cache Busting</strong></td><td>리소스 버전(예: <code>app.js?v=123</code>) URL 변경 시 캐시 무효화</td><td>캐시 해시로 브라우저/프록시 캐쉬 회피</td><td>리소스별 버전 관리 및 URL 설계 필요</td></tr></tbody></table><h3 id=-무효화-워크플로우-push-based-예시>🛠 무효화 워크플로우 (Push-based 예시)<a hidden class=anchor aria-hidden=true href=#-무효화-워크플로우-push-based-예시>#</a></h3><pre class=mermaid>sequenceDiagram
    DB -&gt;&gt; Cache Cluster: 데이터 변경 이벤트 발행
    Cache Cluster -&gt;&gt; Subscriber: Invalidation 메시지 (Pub/Sub)
    Subscriber -&gt;&gt; Application Nodes: 캐시 무효화 명령
    Application Nodes --&gt; Cache Cluster: 해당 키 삭제
</pre><ul><li><p>DB 변경 → 이벤트 발생 → 구독자 앱 노드에서 캐시 무효화</p></li><li><p>실시간 일관성 유지 가능하며, 메시지 지연 최소화에 주의</p></li></ul><hr><h2 id=2--글로벌-분산-캐시--cdn-통합>2. 🌍 글로벌 분산 캐시 + CDN 통합<a hidden class=anchor aria-hidden=true href=#2--글로벌-분산-캐시--cdn-통합>#</a></h2><h3 id=설계-구성도>설계 구성도<a hidden class=anchor aria-hidden=true href=#설계-구성도>#</a></h3><pre class=mermaid>graph LR
  subgraph Global-Client
    C1[User A]
    C2[User B]
  end
  subgraph CDN
    EdgeNA[Edge Node NA]
    EdgeEU[Edge Node EU]
  end
  subgraph Origin Cache
    AppA[App Server A + Redis Cluster]
    AppB[App Server B + Redis Cluster]
    DB[(Master DB)]
  end

  C1 --&gt; EdgeNA
  C2 --&gt; EdgeEU
  EdgeNA --&gt; AppA
  EdgeEU --&gt; AppB
  AppA --&gt; RedisCluster
  AppB --&gt; RedisCluster
  RedisCluster --&gt; DB
</pre><ul><li><p><strong>CDN Edge</strong>: 전역 지역에서 빠른 정적 컨텐츠 제공</p></li><li><p><strong>Origin Cache (Redis)</strong>: 동적 데이터 캐싱 수행</p></li><li><p><strong>Application Layer</strong>: Push 기반 무효화 및 글로벌 pub/sub 전파</p></li></ul><h3 id=설계-고려사항>설계 고려사항<a hidden class=anchor aria-hidden=true href=#설계-고려사항>#</a></h3><ul><li><p><strong>Geo-aware 라우팅</strong>: 지리적으로 가까운 엣지 노드로 라우팅</p></li><li><p><strong>Pub/Sub Replication</strong>: 무효화를 위해 Redis Cluster간 메시지 동기화</p></li><li><p><strong>Cache Coherency</strong>: Eventual consistency 기반 보완</p></li><li><p><strong>CDN TTL 정책</strong>: 정적 자산(1h~1d), API 응답(수 분 단위)로 TTL 차별화</p></li></ul><hr><h2 id=3--모니터링--메트릭-구성>3. 📈 모니터링 & 메트릭 구성<a hidden class=anchor aria-hidden=true href=#3--모니터링--메트릭-구성>#</a></h2><h3 id=주요-메트릭--모니터링-툴>주요 메트릭 & 모니터링 툴<a hidden class=anchor aria-hidden=true href=#주요-메트릭--모니터링-툴>#</a></h3><table><thead><tr><th>메트릭</th><th>설명</th><th>경고 기준</th><th>대응 방안</th></tr></thead><tbody><tr><td>Cache Hit / Miss Rate</td><td>적중/미스 비율</td><td>히트율 &lt; 70% 지속 시</td><td>Hot key 식별 후 TTL/정책 조정</td></tr><tr><td>Eviction Rate</td><td>제거된 캐시 항목 수</td><td>지나치게 높을 경우</td><td>메모리 증설 or 정책 조정</td></tr><tr><td>Avg. Latency (local/dist.)</td><td>로컬/분산 캐시 조회 평균 지연 시간</td><td>Redis avg > 5ms 지속 시</td><td>네트워크/인프라 점검, 지역 분산 고려</td></tr><tr><td>Thundering Herd Attempts</td><td>동시 캐시 미스 시도 비율</td><td>급증 시</td><td>Locking, Singleflight 전략 적용</td></tr><tr><td>Subscribe/Invalidate Lag</td><td>Push 무효화 메시지 지연 시간</td><td>100ms 이상</td><td>메시지 큐 지연 원인 분석 및 처리 최적화</td></tr><tr><td>Errors & Exceptions</td><td>캐시 접근 실패 오류 수</td><td>Error rate > 0.1%</td><td>네트워크 패킷 손실/클라이언트 재시도 로직 보강</td></tr></tbody></table><h3 id=예시-모니터링-스택>예시 모니터링 스택<a hidden class=anchor aria-hidden=true href=#예시-모니터링-스택>#</a></h3><ul><li><p><strong>Prometheus + Grafana</strong>: Redis Exporter, App Custom Metrics</p></li><li><p><strong>ELK Stack</strong>: 무효화/에러 로그 수집 분석</p></li><li><p><strong>Distributed Tracing (Jaeger)</strong>: 캐시 vs DB 응답 경로 지연 분석</p></li><li><p><strong>Alerting</strong>: Slack/Email 기반 경고 설정</p></li></ul><hr><h2 id=-종합-요약>✅ 종합 요약<a hidden class=anchor aria-hidden=true href=#-종합-요약>#</a></h2><ul><li><p><strong>무효화 전략</strong>: Push/Pull, Callback, CDN Invalidation, Cache Busting 등 상황에 맞게 선택</p></li><li><p><strong>글로벌 아키텍처</strong>: CDN과 Origin Cache 계층으로 지연 감소와 동적 데이터 일관성 병행</p></li><li><p><strong>모니터링</strong>: 히트율, 지연, 에러 중심 실시간 모니터링→이상 감지 시 정책 튜닝</p></li><li><p>이 모든 설계는 <strong>일관성</strong>, <strong>성능</strong>, <strong>확장성</strong> 삼자 균형을 맞추는 지점에서 이루어져야 합니다.</p></li></ul><hr><p>다음은 캐싱(Caching)에 대한 심화 주제 **(코드 단위 최적화, 멀티스레드/비동기 환경 캐시, 캐시 보안)**에 대한 정리입니다:</p><hr><h2 id=-1-코드-단위-최적화>🧩 1. 코드 단위 최적화<a hidden class=anchor aria-hidden=true href=#-1-코드-단위-최적화>#</a></h2><h3 id=a-함수메서드-수준-캐시-적용>A. 함수/메서드 수준 캐시 적용<a hidden class=anchor aria-hidden=true href=#a-함수메서드-수준-캐시-적용>#</a></h3><ul><li><p><strong>Python</strong>: <code>functools.lru_cache</code> 사용</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1>1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2>2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3>3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4>4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5>5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>functools</span> <span class=kn>import</span> <span class=n>lru_cache</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@lru_cache</span><span class=p>(</span><span class=n>maxsize</span><span class=o>=</span><span class=mi>128</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>fib</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>n</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span> <span class=k>return</span> <span class=n>n</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>fib</span><span class=p>(</span><span class=n>n</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=o>+</span> <span class=n>fib</span><span class=p>(</span><span class=n>n</span><span class=o>-</span><span class=mi>2</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><p>🟢 효과: 반복 호출 시 연산 횟수 대폭 감소</p></li><li><p>⚠️ 주의: 메모리 사용량 증가 가능, <code>maxsize</code>로 제어 필요</p></li></ul></li><li><p><strong>JavaScript/TypeScript</strong>: 메모이제이션 라이브러리 <code>memoizee</code>, <code>lodash.memoize</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1>1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2>2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3>3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4>4</a>
</span><span class=lnt id=hl-12-5><a class=lnlinks href=#hl-12-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>memoize</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;lodash.memoize&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>fib</span> <span class=o>=</span> <span class=nx>memoize</span><span class=p>((</span><span class=nx>n</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>n</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>)</span> <span class=k>return</span> <span class=nx>n</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>fib</span><span class=p>(</span><span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=o>+</span> <span class=nx>fib</span><span class=p>(</span><span class=nx>n</span><span class=o>-</span><span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h3 id=b-중복-요청-방지-deduplication--singleflight>B. 중복 요청 방지 (Deduplication / Singleflight)<a hidden class=anchor aria-hidden=true href=#b-중복-요청-방지-deduplication--singleflight>#</a></h3><ul><li><p>race condition 방지용 Promise/Lock 활용</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1>1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2>2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3>3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4>4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5>5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6>6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>inFlight</span> <span class=o>=</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>getData</span><span class=p>(</span><span class=nx>key</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>inFlight</span><span class=p>[</span><span class=nx>key</span><span class=p>])</span> <span class=k>return</span> <span class=nx>inFlight</span><span class=p>[</span><span class=nx>key</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  <span class=nx>inFlight</span><span class=p>[</span><span class=nx>key</span><span class=p>]</span> <span class=o>=</span> <span class=nx>fetchFromDbOrCache</span><span class=p>(</span><span class=nx>key</span><span class=p>).</span><span class=k>finally</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=k>delete</span> <span class=nx>inFlight</span><span class=p>[</span><span class=nx>key</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>inFlight</span><span class=p>[</span><span class=nx>key</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>⚠️ 중복 DB/API 호출 억제, 시스템 효율 개선</li></ul></li></ul><h3 id=c-prefetch--background-refresh>C. Prefetch & Background Refresh<a hidden class=anchor aria-hidden=true href=#c-prefetch--background-refresh>#</a></h3><ul><li><p>백그라운드로 캐시 갱신 작업 수행</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1>1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2>2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3>3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4>4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5>5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6>6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>getWithRefresh</span><span class=p>(</span><span class=nx>key</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>item</span> <span class=o>=</span> <span class=nx>localCache</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>item</span> <span class=o>||</span> <span class=nx>nearingExpiry</span><span class=p>(</span><span class=nx>item</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>refreshCache</span><span class=p>(</span><span class=nx>key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>item</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>사용자 지연 없이 최신 데이터 제공</li></ul></li></ul><hr><h2 id=-2-멀티스레드--비동기-환경-캐시>🧵 2. 멀티스레드 / 비동기 환경 캐시<a hidden class=anchor aria-hidden=true href=#-2-멀티스레드--비동기-환경-캐시>#</a></h2><h3 id=a-thread-safe한-구조-사용>A. Thread-Safe한 구조 사용<a hidden class=anchor aria-hidden=true href=#a-thread-safe한-구조-사용>#</a></h3><ul><li><p><strong>Java</strong>: <code>ConcurrentHashMap</code> + <code>computeIfAbsent()</code></p></li><li><p><strong>C#</strong>: <code>ConcurrentDictionary</code>와 <code>Lazy&lt;T></code> 활용</p></li><li><p>lock-based 방식은 동시성 저하가 있을 수 있음</p></li></ul><h3 id=b-비동기-안전-캐시-async-aware-cache>B. 비동기 안전 캐시 (Async-Aware Cache)<a hidden class=anchor aria-hidden=true href=#b-비동기-안전-캐시-async-aware-cache>#</a></h3><ul><li><p><strong>Go</strong>: singleflight 패턴으로 동시 요청 합침</p></li><li><p><strong>Node.js</strong>: 아래처럼 Promise 기반 공유 처리</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1>1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2>2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3>3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4>4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5>5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6>6</a>
</span><span class=lnt id=hl-15-7><a class=lnlinks href=#hl-15-7>7</a>
</span><span class=lnt id=hl-15-8><a class=lnlinks href=#hl-15-8>8</a>
</span><span class=lnt id=hl-15-9><a class=lnlinks href=#hl-15-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>inFlight</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>getAsync</span><span class=p>(</span><span class=nx>key</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>inFlight</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=nx>key</span><span class=p>))</span> <span class=k>return</span> <span class=nx>inFlight</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>p</span> <span class=o>=</span> <span class=nx>fetchAndCache</span><span class=p>(</span><span class=nx>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=k>finally</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=nx>inFlight</span><span class=p>.</span><span class=k>delete</span><span class=p>(</span><span class=nx>key</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=nx>inFlight</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>p</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>p</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h3 id=c-동시성-및-멀티스레드-고려사항>C. 동시성 및 멀티스레드 고려사항<a hidden class=anchor aria-hidden=true href=#c-동시성-및-멀티스레드-고려사항>#</a></h3><ul><li><p>각 스레드/코루틴에서 캐시 상태 일관성 관리 필요</p></li><li><p>Invalidate 시점 동기화</p></li><li><p>TTL 체크 경쟁 조건 대비 (예: scheduled cleanup)</p></li></ul><hr><h2 id=-3-캐시-보안-강화-전략>🔒 3. 캐시 보안 강화 전략<a hidden class=anchor aria-hidden=true href=#-3-캐시-보안-강화-전략>#</a></h2><h3 id=a-민감-데이터-캐싱-제어>A. 민감 데이터 캐싱 제어<a hidden class=anchor aria-hidden=true href=#a-민감-데이터-캐싱-제어>#</a></h3><ul><li><p><strong>Non-cacheable:</strong> PII, 인증 토큰, 사용자 세션 등</p></li><li><p>Redis/LRU 캐시 시 <strong>암호화 또는 키 접근 제어</strong></p></li><li><p>JS/HTTP 브라우저 캐시에서 <code>Cache-Control</code>, <code>Pragma: no-store</code> 지정</p></li></ul><h3 id=b-cache-poisoning-방지>B. Cache Poisoning 방지<a hidden class=anchor aria-hidden=true href=#b-cache-poisoning-방지>#</a></h3><ul><li><p>사용자 입력 포함 캐싱 시:</p><ul><li><p><strong>Whitelist key</strong>: 사전 정의된 리소스만 캐싱</p></li><li><p><strong>Input 검증 및 필터링</strong>, URL 서명 또는 CSRF 토큰 확인</p></li></ul></li></ul><h3 id=c-보안-격리-및-acl>C. 보안 격리 및 ACL<a hidden class=anchor aria-hidden=true href=#c-보안-격리-및-acl>#</a></h3><ul><li><p><strong>Redis ACL</strong> 설정: 캐시 전용 계정, 쓰기 권한 제한</p></li><li><p>분산 캐시 환경에서 <strong>TLS 암호화(암호화 전송)</strong>, <strong>VPC 내 통신</strong> 구성</p></li></ul><h3 id=d-캐시-감사-및-모니터링>D. 캐시 감사 및 모니터링<a hidden class=anchor aria-hidden=true href=#d-캐시-감사-및-모니터링>#</a></h3><ul><li><p>캐시 접근 로그 수집: 실패 인증 시도, 이상 징후 탐지</p></li><li><p>정기 감사: 캐시 내 민감 항목 비의도 저장 여부 확인</p></li></ul><hr><h2 id=-정리-및-차례-안내-1>✅ 정리 및 차례 안내<a hidden class=anchor aria-hidden=true href=#-정리-및-차례-안내-1>#</a></h2><ul><li><p><strong>코드 수준 최적화</strong>: LRU, Singleflight, background refresh 적용 예</p></li><li><p><strong>멀티스레드/비동기</strong>: Thread-safe 캐시, Promise 병합 로직, concurrency 대비</p></li><li><p><strong>보안 설계</strong>: 민감 데이터 대상 제외, 입력 필터링, ACL/TLS, 캐시 감사</p></li></ul><p>다음은 캐싱 관련한 <strong>DevOps/CI-CD 관점</strong>, <strong>시각화 대시보드 설계</strong>, 그리고 <strong>AI/ML 추론 캐시 최적화 각론</strong>에 대한 심화 내용입니다.</p><hr><h2 id=-1-devops-관점에서-캐시의-cicd-적용>🛠 1. DevOps 관점에서 캐시의 CI/CD 적용<a hidden class=anchor aria-hidden=true href=#-1-devops-관점에서-캐시의-cicd-적용>#</a></h2><h3 id=a-캐시-구성-자동화-infrastructure-as-code>A. 캐시 구성 자동화 (Infrastructure-as-Code)<a hidden class=anchor aria-hidden=true href=#a-캐시-구성-자동화-infrastructure-as-code>#</a></h3><ul><li><p>Terraform, AWS CloudFormation, Azure ARM, Kubernetes Helm등으로 캐시 인프라 정의</p></li><li><p>예: Redis Cluster 구성 코드 (Terraform):</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1>1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2>2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3>3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4>4</a>
</span><span class=lnt id=hl-16-5><a class=lnlinks href=#hl-16-5>5</a>
</span><span class=lnt id=hl-16-6><a class=lnlinks href=#hl-16-6>6</a>
</span><span class=lnt id=hl-16-7><a class=lnlinks href=#hl-16-7>7</a>
</span><span class=lnt id=hl-16-8><a class=lnlinks href=#hl-16-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-hcl data-lang=hcl><span class=line><span class=cl><span class=k>resource</span> <span class=s2>&#34;aws_elasticache_replication_group&#34; &#34;redis&#34;</span> {
</span></span><span class=line><span class=cl><span class=n>  replication_group_id</span>          <span class=o>=</span> <span class=s2>&#34;app-redis&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  node_type</span>                     <span class=o>=</span> <span class=s2>&#34;cache.t3.medium&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  number_cache_clusters</span>         <span class=o>=</span> <span class=m>3</span>
</span></span><span class=line><span class=cl><span class=n>  automatic_failover_enabled</span>    <span class=o>=</span> <span class=kt>true</span>
</span></span><span class=line><span class=cl><span class=n>  parameter_group_name</span>          <span class=o>=</span> <span class=s2>&#34;default.redis6.x&#34;</span>
</span></span><span class=line><span class=cl><span class=n>  snapshot_retention_limit</span>      <span class=o>=</span> <span class=m>7</span>
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><h3 id=b-cicd-과정에서-캐시-활용>B. CI/CD 과정에서 캐시 활용<a hidden class=anchor aria-hidden=true href=#b-cicd-과정에서-캐시-활용>#</a></h3><ul><li><p><strong>Test 실행 시간 단축</strong>: Docker 기반 CI에서 <code>docker-compose</code> 로 Redis 띄우고 테스트 캐싱</p></li><li><p><strong>Build 아티팩트 캐싱</strong>: Gradle/Maven, npm/yarn의 <code>.gradle</code>, <code>.m2</code>, <code>node_modules</code> 캐싱</p></li></ul><h3 id=c-캐시-인프라-검증>C. 캐시 인프라 검증<a hidden class=anchor aria-hidden=true href=#c-캐시-인프라-검증>#</a></h3><ul><li><p>환경별 구성 차이 탐지 도구: Terratest, InSpec 검사</p></li><li><p>예: Redis config (<code>maxmemory-policy=volatile-lru</code>, <code>requirepass</code>) 동작 검증</p></li></ul><h3 id=d-배포-시-무중단-캐시>D. 배포 시 무중단 캐시<a hidden class=anchor aria-hidden=true href=#d-배포-시-무중단-캐시>#</a></h3><p>🎯 Blue-Green 또는 Rolling 배포:</p><ul><li><p>Replica를 동기 구성 후 Read only 테스트, 이후 Write 스위칭</p></li><li><p>캐시 키 버전을 명시해 레거시와 신규 캐시 혼용 방지 (<code>service:v2:{id}</code>)</p></li></ul><hr><h2 id=-2-캐시-시각화-및-대시보드-설계>✅ 2. 캐시 시각화 및 대시보드 설계<a hidden class=anchor aria-hidden=true href=#-2-캐시-시각화-및-대시보드-설계>#</a></h2><h3 id=핵심-지표-및-대시보드-구성>핵심 지표 및 대시보드 구성<a hidden class=anchor aria-hidden=true href=#핵심-지표-및-대시보드-구성>#</a></h3><table><thead><tr><th>영역</th><th>주요 지표</th><th>시각 요소</th><th>임계 기준</th></tr></thead><tbody><tr><td>Performance</td><td>Hit Rate / Miss Rate</td><td>시간대별 시계열 그래프</td><td>Hit &lt; 70%, Miss > 30% 주의</td></tr><tr><td>Eviction</td><td>Eviction 수, 유형별 비율</td><td>파이 차트, 시간대별 시계열</td><td>Eviction 급증 시 조정 필요</td></tr><tr><td>Latency</td><td>Local/Redis p99, p99.9 지연</td><td>히스토그램, percentile 그래프</td><td>Redis p99 > 10ms 문제 표시</td></tr><tr><td>Concurrency</td><td>Thundering Herd 이벤트 수</td><td>항차수 분석 그래프</td><td>동시성 spike 탐지</td></tr><tr><td>Error</td><td>Cache 사용 오류율, 실패율</td><td>게이지, 경고 알림</td><td>오류율 > 0.1% 감지</td></tr></tbody></table><h3 id=대시보드-예시-grafana>대시보드 예시 (Grafana)<a hidden class=anchor aria-hidden=true href=#대시보드-예시-grafana>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1>1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2>2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3>3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4>4</a>
</span><span class=lnt id=hl-17-5><a class=lnlinks href=#hl-17-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>┌──────────────────────────────── Grafana Dashboard ─────────────────────────────────┐
</span></span><span class=line><span class=cl>│ [Hit/Miss Rate] [Eviction Count] [Redis Latency p99]     [Error Rate Gauge]      │
</span></span><span class=line><span class=cl>│                                                                                 │
</span></span><span class=line><span class=cl>│ [Thundering Herd Alerts Timeline]                                               │
</span></span><span class=line><span class=cl>└─────────────────────────────────────────────────────────────────────────────────┘
</span></span></code></pre></td></tr></table></div></div><ul><li><p>Redis Exporter / Prometheus + App Exporter 연동</p></li><li><p>알림: Hit율 70% 이하 → Slack/Email 알림 자동 발송</p></li></ul><hr><h2 id=-3-aiml-inference-캐시-최적화>🤖 3. AI/ML Inference 캐시 최적화<a hidden class=anchor aria-hidden=true href=#-3-aiml-inference-캐시-최적화>#</a></h2><h3 id=a-피처feature-캐싱>A. 피처(feature) 캐싱<a hidden class=anchor aria-hidden=true href=#a-피처feature-캐싱>#</a></h3><ul><li><p><strong>전처리 결과 캐싱</strong>: 외부 피처 계산 후 Redis/Local 메모리에 저장</p></li><li><p>TTL은 모델 주기 변경에 맞춰 조율 (예: 1h ~ 24h)</p></li></ul><h3 id=b-인퍼런스-응답-캐싱>B. 인퍼런스 응답 캐싱<a hidden class=anchor aria-hidden=true href=#b-인퍼런스-응답-캐싱>#</a></h3><ul><li><p><strong>Deterministic 모델 응답</strong>: 동일 입력에 대한 결과 캐시 가능</p></li><li><p>예: GPT API 호출 결과 캐싱 (short prompt → JSON 해시 키 기반 캐싱)</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1>1</a>
</span><span class=lnt id=hl-18-2><a class=lnlinks href=#hl-18-2>2</a>
</span><span class=lnt id=hl-18-3><a class=lnlinks href=#hl-18-3>3</a>
</span><span class=lnt id=hl-18-4><a class=lnlinks href=#hl-18-4>4</a>
</span><span class=lnt id=hl-18-5><a class=lnlinks href=#hl-18-5>5</a>
</span><span class=lnt id=hl-18-6><a class=lnlinks href=#hl-18-6>6</a>
</span><span class=lnt id=hl-18-7><a class=lnlinks href=#hl-18-7>7</a>
</span><span class=lnt id=hl-18-8><a class=lnlinks href=#hl-18-8>8</a>
</span><span class=lnt id=hl-18-9><a class=lnlinks href=#hl-18-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>inferenceCache</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Map</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>cachedInfer</span><span class=p>(</span><span class=nx>input</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>key</span> <span class=o>=</span> <span class=nx>hash</span><span class=p>(</span><span class=nx>input</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>inferenceCache</span><span class=p>.</span><span class=nx>has</span><span class=p>(</span><span class=nx>key</span><span class=p>))</span> <span class=k>return</span> <span class=nx>inferenceCache</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>callModelAPI</span><span class=p>(</span><span class=nx>input</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>inferenceCache</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>result</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=c-cache-hit가-모델-호출-비용-절감>C. Cache Hit가 모델 호출 비용 절감<a hidden class=anchor aria-hidden=true href=#c-cache-hit가-모델-호출-비용-절감>#</a></h3><ul><li><p>LLMS나 외부 AI 호출 1회당 수 센트 절감 가능</p></li><li><p>모델 지연 시간 p95 기준 300ms → 캐시: &lt;10ms</p></li></ul><h3 id=d-복잡도-고려사항>D. 복잡도 고려사항<a hidden class=anchor aria-hidden=true href=#d-복잡도-고려사항>#</a></h3><ul><li><p>모델 업데이트 시 무효화 고려: 버전 키(key with version)</p></li><li><p>민감 데이터 제외: 응답 유출 방지</p></li><li><p>Cold/Hot spot 방지: heavy-weight 요청 throttle</p></li></ul><hr><h2 id=-종합-요약-1>✅ 종합 요약<a hidden class=anchor aria-hidden=true href=#-종합-요약-1>#</a></h2><ul><li><p><strong>CI/CD</strong>: 캐시 인프라를 코드화, 무중단 배포 및 검증 포함</p></li><li><p><strong>시각화</strong>: 핵심 지표(히트율, p99 latency, eviction, 오류 등)를 실시간 모니터링하며 경고 설정</p></li><li><p><strong>AI/ML 응용</strong>: 피처와 인퍼런스 레벨에서 캐시를 통한 지연 감소 및 비용 절감</p></li><li><p>이 모든 기법은 <strong>일관성</strong>, <strong>비용 효율성</strong>, <strong>보안</strong>, <strong>성능</strong> 사이의 균형을 염두에 두고 적용되어야 합니다.</p></li></ul><hr><p>더 심화하거나 구체적인 예제를 원하시면, 예를 들어:</p><ul><li><p>ML inference 캐시 TTL 산정 방식,</p></li><li><p>Redis 클러스터 재배포 전략,</p></li><li><p>Thundering Herd 방지 lock 라이브러리 비교 등,<br>필요하신 챕터를 말씀해주세요!</p></li></ul><hr><p>안녕하세요. 캐싱(Caching)에 대해 체계적으로 조사하고 정리해드리겠습니다. 먼저 최신 정보를 검색하여 포괄적인 내용을 준비하겠습니다.이제 캐싱에 대한 최신 정보를 충분히 수집했습니다. 체계적으로 정리하여 포괄적인 자료를 작성하겠습니다.</p><h2 id=캐싱-caching-종합-조사-보고서>캐싱 (Caching) 종합 조사 보고서<a hidden class=anchor aria-hidden=true href=#캐싱-caching-종합-조사-보고서>#</a></h2><h3 id=1-태그-및-분류>1. 태그 및 분류<a hidden class=anchor aria-hidden=true href=#1-태그-및-분류>#</a></h3><p><strong>태그</strong>: Cache-Systems, Distributed-Caching, Memory-Management, Performance-Optimization</p><p><strong>주제 분류 분석</strong>: &ldquo;Computer Science and Engineering&rdquo; > &ldquo;Software Engineering&rdquo; > &ldquo;Design and Architecture&rdquo; 계층 구조가 적절합니다. 캐싱은 컴퓨터 시스템의 성능 최적화를 위한 소프트웨어 아키텍처 설계 요소로서, 하드웨어부터 애플리케이션 레벨까지 다양한 계층에서 사용되므로 이 분류가 타당합니다.</p><p><strong>요약</strong>: 캐싱은 자주 액세스되는 데이터를 고속 저장소에 임시 보관하여 시스템 성능을 향상시키는 최적화 기법으로, 지연 시간 단축과 처리량 증대를 통해 사용자 경험을 개선하는 핵심 시스템 아키텍처 컴포넌트입니다.</p><p><strong>개요</strong>: 캐싱은 현대 컴퓨팅 환경에서 필수적인 성능 최적화 전략으로, 메모리 계층 구조를 활용하여 데이터 접근 속도를 향상시킵니다. CPU 캐시부터 분산 캐시 시스템까지 다양한 레벨에서 구현되며, 웹 애플리케이션, 데이터베이스, CDN 등 광범위한 영역에서 활용됩니다.</p><hr><h2 id=제1부-기본-개념-및-이론적-배경>제1부: 기본 개념 및 이론적 배경<a hidden class=anchor aria-hidden=true href=#제1부-기본-개념-및-이론적-배경>#</a></h2><h3 id=핵심-개념>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념>#</a></h3><p>캐싱은 <strong>자주 사용되는 데이터를 빠른 접근이 가능한 위치에 임시 저장하는 메모리 관리 기법</strong>입니다. 메모리 계층 구조 (Memory Hierarchy)의 원리를 활용하여 **지역성 원리 (Locality of Reference)**에 기반해 시간적 지역성 (Temporal Locality)과 공간적 지역성 (Spatial Locality)을 극대화합니다.</p><p><strong>실무 구현 요소</strong>:</p><ul><li><strong>캐시 히트 (Cache Hit)/캐시 미스 (Cache Miss)</strong>: 요청 데이터의 캐시 존재 여부</li><li><strong>캐시 일관성 (Cache Coherence)</strong>: 다중 캐시 간 데이터 동기화</li><li><strong>교체 정책 (Replacement Policy)</strong>: LRU, LFU, FIFO 등 데이터 퇴출 알고리즘</li><li><strong>무효화 전략 (Invalidation Strategy)</strong>: TTL, 이벤트 기반 무효화</li><li><strong>쓰기 정책 (Write Policy)</strong>: Write-through, Write-back 방식</li></ul><h3 id=배경-1>배경<a hidden class=anchor aria-hidden=true href=#배경-1>#</a></h3><p>캐싱의 필요성은 **폰 노이만 아키텍처 (Von Neumann Architecture)**의 메모리 병목 현상에서 시작되었습니다. 프로세서와 메모리 간의 속도 차이가 증가하면서 성능 향상을 위한 중간 계층의 필요성이 대두되었습니다.</p><h3 id=목적-및-필요성-1>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성-1>#</a></h3><ol><li><strong>성능 향상</strong>: 데이터 접근 지연 시간 최소화</li><li><strong>대역폭 효율성</strong>: 네트워크 및 스토리지 부하 감소</li><li><strong>확장성</strong>: 시스템 처리 능력 증대</li><li><strong>가용성</strong>: 원본 데이터 소스 장애 시 서비스 연속성 보장</li><li><strong>비용 절감</strong>: 비싼 연산 결과 재사용</li></ol><h3 id=주요-기능-및-역할-1>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할-1>#</a></h3><ul><li><strong>데이터 저장</strong>: 빈번하게 액세스되는 데이터의 임시 보관</li><li><strong>접근 가속화</strong>: 원본 소스보다 빠른 데이터 제공</li><li><strong>부하 분산</strong>: 백엔드 시스템의 요청 처리 부담 경감</li><li><strong>네트워크 최적화</strong>: 원거리 데이터 전송 횟수 감소</li></ul><h3 id=특징-1>특징<a hidden class=anchor aria-hidden=true href=#특징-1>#</a></h3><ol><li><strong>임시성</strong>: 영구적이지 않은 데이터 저장</li><li><strong>투명성</strong>: 애플리케이션에서 캐시 존재를 인식하지 않음</li><li><strong>계층성</strong>: 다중 레벨 캐시 구조 지원</li><li><strong>일관성</strong>: 원본 데이터와의 동기화 보장</li></ol><h3 id=핵심-원칙-1>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙-1>#</a></h3><ol><li><p><strong>지역성 원리 (Locality of Reference)</strong></p><ul><li>시간적 지역성: 최근 사용된 데이터가 다시 사용될 가능성</li><li>공간적 지역성: 인접한 메모리 위치 데이터의 연속 사용</li></ul></li><li><p><strong>파레토 원칙 (80/20 Rule)</strong></p><ul><li>20%의 데이터가 80%의 요청 처리</li></ul></li><li><p><strong>캐시 투명성 (Cache Transparency)</strong></p><ul><li>클라이언트가 캐시 존재를 인식하지 않아야 함</li></ul></li></ol><hr><h2 id=제2부-주요-원리-및-작동-원리>제2부: 주요 원리 및 작동 원리<a hidden class=anchor aria-hidden=true href=#제2부-주요-원리-및-작동-원리>#</a></h2><h3 id=주요-원리-다이어그램>주요 원리 다이어그램<a hidden class=anchor aria-hidden=true href=#주요-원리-다이어그램>#</a></h3><pre class=mermaid>graph TD
    A[Client Request] --&gt; B{Cache Check}
    B --&gt;|Hit| C[Return Cached Data]
    B --&gt;|Miss| D[Fetch from Origin]
    D --&gt; E[Store in Cache]
    E --&gt; F[Return Data to Client]
    C --&gt; G[Update Access Statistics]
    F --&gt; G
    G --&gt; H[Apply Replacement Policy]
</pre><h3 id=작동-원리>작동 원리<a hidden class=anchor aria-hidden=true href=#작동-원리>#</a></h3><pre class=mermaid>sequenceDiagram
    participant C as Client
    participant CH as Cache
    participant DB as Database
    
    C-&gt;&gt;CH: Request Data (Key)
    alt Cache Hit
        CH-&gt;&gt;C: Return Cached Data
    else Cache Miss
        CH-&gt;&gt;DB: Fetch Data
        DB-&gt;&gt;CH: Return Data
        CH-&gt;&gt;CH: Store Data with TTL
        CH-&gt;&gt;C: Return Data
    end
</pre><h3 id=구조-및-아키텍처-1>구조 및 아키텍처<a hidden class=anchor aria-hidden=true href=#구조-및-아키텍처-1>#</a></h3><p>캐싱 시스템은 다음과 같은 필수 구성요소와 선택 구성요소로 구성됩니다:</p><p><strong>필수 구성요소</strong>:</p><ol><li><p><strong>캐시 매니저 (Cache Manager)</strong></p><ul><li>기능: 캐시 연산의 전체적인 제어 및 관리</li><li>역할: 요청 라우팅, 정책 적용, 상태 관리</li></ul></li><li><p><strong>저장소 계층 (Storage Layer)</strong></p><ul><li>기능: 실제 데이터 저장 및 검색</li><li>역할: 메모리 또는 디스크 기반 데이터 보관</li></ul></li><li><p><strong>인덱스 구조 (Index Structure)</strong></p><ul><li>기능: 빠른 데이터 검색을 위한 키-값 매핑</li><li>역할: 해시 테이블, B+ 트리 등을 통한 O(1) 또는 O(log n) 접근</li></ul></li><li><p><strong>교체 알고리즘 (Replacement Algorithm)</strong></p><ul><li>기능: 캐시 공간 부족 시 퇴출 대상 선정</li><li>역할: LRU, LFU, FIFO 등 정책 구현</li></ul></li></ol><p><strong>선택 구성요소</strong>:</p><ol><li><p><strong>복제 관리자 (Replication Manager)</strong></p><ul><li>기능: 분산 환경에서 데이터 복제 관리</li><li>역할: 고가용성 및 부하 분산 지원</li></ul></li><li><p><strong>일관성 제어기 (Consistency Controller)</strong></p><ul><li>기능: 다중 캐시 간 데이터 일관성 유지</li><li>역할: MESI, MOESI 등 프로토콜 구현</li></ul></li><li><p><strong>압축 엔진 (Compression Engine)</strong></p><ul><li>기능: 메모리 사용량 최적화</li><li>역할: 데이터 압축/해제를 통한 저장 효율성 향상</li></ul></li><li><p><strong>모니터링 시스템 (Monitoring System)</strong></p><ul><li>기능: 캐시 성능 지표 수집 및 분석</li><li>역할: 히트율, 응답 시간, 메모리 사용률 추적</li></ul></li></ol><h3 id=구조-다이어그램>구조 다이어그램<a hidden class=anchor aria-hidden=true href=#구조-다이어그램>#</a></h3><pre class=mermaid>graph TB
    subgraph &#34;Application Layer&#34;
        APP[Application]
    end
    
    subgraph &#34;Cache Layer&#34;
        CM[Cache Manager]
        IDX[Index Structure]
        RA[Replacement Algorithm]
        CC[Consistency Controller]
    end
    
    subgraph &#34;Storage Layer&#34;
        MEM[Memory Storage]
        DISK[Disk Storage]
    end
    
    subgraph &#34;Backend Layer&#34;
        DB[(Database)]
        API[API Server]
    end
    
    APP --&gt; CM
    CM --&gt; IDX
    CM --&gt; RA
    CM --&gt; CC
    IDX --&gt; MEM
    IDX --&gt; DISK
    CM --&gt; DB
    CM --&gt; API
</pre><hr><h2 id=제3부-구현-기법-및-실무-적용>제3부: 구현 기법 및 실무 적용<a hidden class=anchor aria-hidden=true href=#제3부-구현-기법-및-실무-적용>#</a></h2><h3 id=구현-기법-1>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법-1>#</a></h3><h4 id=1-write-through-캐싱>1. Write-Through 캐싱<a hidden class=anchor aria-hidden=true href=#1-write-through-캐싱>#</a></h4><ul><li><strong>정의</strong>: 쓰기 작업 시 캐시와 백엔드 스토리지에 동시 기록</li><li><strong>구성</strong>: 캐시 → 백엔드 동기 쓰기</li><li><strong>목적</strong>: 데이터 일관성 보장</li><li><strong>실제 예시</strong>:<ul><li>시스템 구성: 웹 애플리케이션 → Redis 캐시 → MySQL 데이터베이스</li><li>시나리오: 사용자 프로필 업데이트 시 Redis와 MySQL에 동시 저장</li></ul></li></ul><h4 id=2-write-back-write-behind-캐싱>2. Write-Back (Write-Behind) 캐싱<a hidden class=anchor aria-hidden=true href=#2-write-back-write-behind-캐싱>#</a></h4><ul><li><strong>정의</strong>: 캐시에만 먼저 쓰고 나중에 배치로 백엔드에 동기화</li><li><strong>구성</strong>: 캐시 버퍼링 → 비동기 백엔드 쓰기</li><li><strong>목적</strong>: 쓰기 성능 최적화</li><li><strong>실제 예시</strong>:<ul><li>시스템 구성: 게임 서버 → 메모리 캐시 → 게임 통계 DB</li><li>시나리오: 실시간 게임 점수를 캐시에 저장 후 주기적으로 DB 동기화</li></ul></li></ul><h4 id=3-cache-aside-lazy-loading>3. Cache-Aside (Lazy Loading)<a hidden class=anchor aria-hidden=true href=#3-cache-aside-lazy-loading>#</a></h4><ul><li><strong>정의</strong>: 애플리케이션이 직접 캐시 관리</li><li><strong>구성</strong>: 앱 → 캐시 확인 → 미스 시 DB 조회 → 캐시 저장</li><li><strong>목적</strong>: 필요한 데이터만 캐싱하여 메모리 효율성 확보</li><li><strong>실제 예시</strong>:<ul><li>시스템 구성: 전자상거래 앱 → Memcached → 상품 정보 DB</li><li>시나리오: 상품 상세 조회 시 캐시 먼저 확인, 없으면 DB에서 가져와 캐시 저장</li></ul></li></ul><h4 id=4-분산-캐싱-distributed-caching>4. 분산 캐싱 (Distributed Caching)<a hidden class=anchor aria-hidden=true href=#4-분산-캐싱-distributed-caching>#</a></h4><ul><li><strong>정의</strong>: 여러 노드에 걸쳐 캐시 데이터 분산 저장</li><li><strong>구성</strong>: 일관된 해싱을 통한 데이터 파티셔닝</li><li><strong>목적</strong>: 확장성과 가용성 향상</li><li><strong>실제 예시</strong>:<ul><li>시스템 구성: 마이크로서비스 → Redis Cluster → 분산 DB</li><li>시나리오: 세션 데이터를 여러 Redis 노드에 분산 저장하여 서버 장애 시에도 서비스 연속성 보장</li></ul></li></ul><h3 id=장점-1>장점<a hidden class=anchor aria-hidden=true href=#장점-1>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>장점</td><td>응답 시간 단축</td><td>메모리 기반 저장으로 마이크로초 단위 접근 시간 달성</td></tr><tr><td></td><td>처리량 증대</td><td>백엔드 부하 감소로 초당 수십만 요청 처리 가능</td></tr><tr><td></td><td>네트워크 대역폭 절약</td><td>로컬 캐시 활용으로 원거리 데이터 전송 횟수 감소</td></tr><tr><td></td><td>확장성 향상</td><td>수평적 확장을 통한 대용량 트래픽 처리</td></tr><tr><td></td><td>가용성 개선</td><td>원본 데이터 소스 장애 시에도 캐시된 데이터로 서비스 제공</td></tr><tr><td></td><td>비용 효율성</td><td>값비싼 연산 결과 재사용으로 CPU 및 네트워크 비용 절감</td></tr></tbody></table><h3 id=단점-및-문제점-그리고-해결방안>단점 및 문제점 그리고 해결방안<a hidden class=anchor aria-hidden=true href=#단점-및-문제점-그리고-해결방안>#</a></h3><h4 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>설명</th><th>해결책</th></tr></thead><tbody><tr><td>단점</td><td>데이터 불일치</td><td>캐시와 원본 데이터 간 동기화 지연</td><td>TTL 설정, 이벤트 기반 무효화, Write-through 패턴 적용</td></tr><tr><td></td><td>메모리 비용</td><td>고속 메모리 사용으로 인한 높은 비용</td><td>캐시 크기 최적화, 압축 기법 적용, 계층적 캐싱 구조</td></tr><tr><td></td><td>복잡성 증가</td><td>캐시 관리 로직으로 인한 시스템 복잡도 상승</td><td>캐시 프레임워크 활용, 추상화 계층 도입</td></tr><tr><td></td><td>콜드 스타트</td><td>캐시 워밍업 시간 동안 성능 저하</td><td>프리로딩, 점진적 워밍업 전략</td></tr></tbody></table><h4 id=문제점>문제점<a hidden class=anchor aria-hidden=true href=#문제점>#</a></h4><table><thead><tr><th>구분</th><th>항목</th><th>원인</th><th>영향</th><th>탐지 및 진단</th><th>예방 방법</th><th>해결 방법 및 기법</th></tr></thead><tbody><tr><td>문제점</td><td>캐시 스탬피드</td><td>동시 다발적 캐시 미스</td><td>백엔드 과부하</td><td>응답 시간 급증 모니터링</td><td>뮤텍스/세마포어 적용</td><td>분산 락, 확률적 TTL</td></tr><tr><td></td><td>메모리 누수</td><td>TTL 미설정, 무한 증가</td><td>시스템 메모리 고갈</td><td>메모리 사용률 추적</td><td>강제 TTL, 메모리 한도 설정</td><td>LRU 기반 자동 퇴출</td></tr><tr><td></td><td>캐시 오염</td><td>일회성 데이터 대량 저장</td><td>유용한 데이터 퇴출</td><td>히트율 급감 탐지</td><td>액세스 패턴 분석</td><td>Bloom Filter, 확률적 캐싱</td></tr><tr><td></td><td>핫키 문제</td><td>특정 키에 요청 집중</td><td>단일 노드 과부하</td><td>노드별 부하 불균형</td><td>데이터 샤딩, 복제</td><td>키 분산, 로드 밸런싱</td></tr></tbody></table><hr><h2 id=제4부-분류-및-활용-사례>제4부: 분류 및 활용 사례<a hidden class=anchor aria-hidden=true href=#제4부-분류-및-활용-사례>#</a></h2><h3 id=분류-기준에-따른-종류-및-유형-1>분류 기준에 따른 종류 및 유형<a hidden class=anchor aria-hidden=true href=#분류-기준에-따른-종류-및-유형-1>#</a></h3><table><thead><tr><th>분류 기준</th><th>유형</th><th>특징</th><th>사용 사례</th></tr></thead><tbody><tr><td>위치별</td><td>로컬 캐시</td><td>단일 프로세스 내 메모리</td><td>애플리케이션 내부 데이터</td></tr><tr><td></td><td>분산 캐시</td><td>네트워크를 통한 다중 노드</td><td>마이크로서비스 간 공유</td></tr><tr><td></td><td>CDN</td><td>지리적 분산 엣지 서버</td><td>정적 컨텐츠 배포</td></tr><tr><td>데이터 유형별</td><td>데이터베이스 캐시</td><td>쿼리 결과 저장</td><td>읽기 중심 애플리케이션</td></tr><tr><td></td><td>웹 캐시</td><td>HTTP 응답 저장</td><td>웹 페이지, API 응답</td></tr><tr><td></td><td>객체 캐시</td><td>직렬화된 객체 저장</td><td>세션, 사용자 컨텍스트</td></tr><tr><td>구현 레벨별</td><td>하드웨어 캐시</td><td>CPU, 메모리 캐시</td><td>프로세서 성능 향상</td></tr><tr><td></td><td>운영체제 캐시</td><td>파일 시스템, 페이지 캐시</td><td>시스템 I/O 최적화</td></tr><tr><td></td><td>애플리케이션 캐시</td><td>비즈니스 로직 레벨</td><td>도메인 특화 최적화</td></tr></tbody></table><h3 id=활용-사례-1>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례-1>#</a></h3><p><strong>전자상거래 플랫폼의 상품 정보 캐싱 시스템</strong></p><p>대규모 전자상거래 플랫폼에서 상품 정보 조회 성능을 향상시키기 위해 다층 캐싱 시스템을 구축한 사례입니다.</p><p><strong>시스템 구성</strong>:</p><ul><li><strong>프론트엔드</strong>: React SPA + 브라우저 캐시</li><li><strong>CDN</strong>: CloudFlare (정적 자산 캐싱)</li><li><strong>API 게이트웨이</strong>: NGINX + 응답 캐싱</li><li><strong>애플리케이션 서버</strong>: Node.js + Redis 클러스터</li><li><strong>데이터베이스</strong>: MySQL 마스터-슬레이브 + 쿼리 캐시</li></ul><p><strong>시스템 구성 다이어그램</strong>:</p><pre class=mermaid>graph TB
    subgraph &#34;Client Layer&#34;
        BROWSER[Browser Cache]
        MOBILE[Mobile App Cache]
    end
    
    subgraph &#34;CDN Layer&#34;
        CDN[CloudFlare CDN]
    end
    
    subgraph &#34;Application Layer&#34;
        LB[Load Balancer]
        APP1[App Server 1]
        APP2[App Server 2]
        APP3[App Server 3]
    end
    
    subgraph &#34;Cache Layer&#34;
        REDIS1[Redis Node 1]
        REDIS2[Redis Node 2]
        REDIS3[Redis Node 3]
    end
    
    subgraph &#34;Database Layer&#34;
        MASTER[(MySQL Master)]
        SLAVE1[(MySQL Slave 1)]
        SLAVE2[(MySQL Slave 2)]
    end
    
    BROWSER --&gt; CDN
    MOBILE --&gt; CDN
    CDN --&gt; LB
    LB --&gt; APP1
    LB --&gt; APP2
    LB --&gt; APP3
    APP1 --&gt; REDIS1
    APP2 --&gt; REDIS2
    APP3 --&gt; REDIS3
    APP1 --&gt; SLAVE1
    APP2 --&gt; SLAVE2
    APP3 --&gt; MASTER
</pre><p><strong>Workflow</strong>:</p><pre class=mermaid>sequenceDiagram
    participant U as User
    participant CDN as CDN
    participant APP as App Server
    participant R as Redis
    participant DB as Database
    
    U-&gt;&gt;CDN: Request Product Page
    CDN-&gt;&gt;CDN: Check Static Assets
    alt Static Assets Hit
        CDN-&gt;&gt;U: Return Cached Assets
    else Assets Miss
        CDN-&gt;&gt;APP: Request Assets
        APP-&gt;&gt;CDN: Return Assets
        CDN-&gt;&gt;U: Return Assets + Cache
    end
    
    U-&gt;&gt;APP: Request Product Data
    APP-&gt;&gt;R: Check Product Cache
    alt Cache Hit
        R-&gt;&gt;APP: Return Cached Data
        APP-&gt;&gt;U: Return Product Data
    else Cache Miss
        APP-&gt;&gt;DB: Query Product Data
        DB-&gt;&gt;APP: Return Data
        APP-&gt;&gt;R: Store in Cache (TTL: 1h)
        APP-&gt;&gt;U: Return Product Data
    end
</pre><p><strong>역할 및 효과</strong>:</p><ul><li><strong>브라우저 캐시</strong>: 이미지, CSS, JS 파일 로컬 저장으로 페이지 로딩 속도 70% 개선</li><li><strong>CDN</strong>: 전 세계 사용자에게 200ms 이내 응답 시간 보장</li><li><strong>Redis 캐시</strong>: 상품 정보 조회 시 평균 응답 시간 2ms 달성</li><li><strong>데이터베이스 캐시</strong>: 쿼리 결과 캐싱으로 DB 부하 80% 감소</li></ul><p><strong>비교 분석</strong>:
캐싱 적용 전후 비교 시 평균 응답 시간이 500ms에서 50ms로 90% 개선되었으며, 데이터베이스 QPS는 10,000에서 2,000으로 감소하여 인프라 비용을 40% 절감했습니다.</p><h3 id=구현-예시>구현 예시<a hidden class=anchor aria-hidden=true href=#구현-예시>#</a></h3><p>다음은 전자상거래 상품 캐싱 시스템의 JavaScript 구현 예시입니다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1>  1</a>
</span><span class=lnt id=hl-24-2><a class=lnlinks href=#hl-24-2>  2</a>
</span><span class=lnt id=hl-24-3><a class=lnlinks href=#hl-24-3>  3</a>
</span><span class=lnt id=hl-24-4><a class=lnlinks href=#hl-24-4>  4</a>
</span><span class=lnt id=hl-24-5><a class=lnlinks href=#hl-24-5>  5</a>
</span><span class=lnt id=hl-24-6><a class=lnlinks href=#hl-24-6>  6</a>
</span><span class=lnt id=hl-24-7><a class=lnlinks href=#hl-24-7>  7</a>
</span><span class=lnt id=hl-24-8><a class=lnlinks href=#hl-24-8>  8</a>
</span><span class=lnt id=hl-24-9><a class=lnlinks href=#hl-24-9>  9</a>
</span><span class=lnt id=hl-24-10><a class=lnlinks href=#hl-24-10> 10</a>
</span><span class=lnt id=hl-24-11><a class=lnlinks href=#hl-24-11> 11</a>
</span><span class=lnt id=hl-24-12><a class=lnlinks href=#hl-24-12> 12</a>
</span><span class=lnt id=hl-24-13><a class=lnlinks href=#hl-24-13> 13</a>
</span><span class=lnt id=hl-24-14><a class=lnlinks href=#hl-24-14> 14</a>
</span><span class=lnt id=hl-24-15><a class=lnlinks href=#hl-24-15> 15</a>
</span><span class=lnt id=hl-24-16><a class=lnlinks href=#hl-24-16> 16</a>
</span><span class=lnt id=hl-24-17><a class=lnlinks href=#hl-24-17> 17</a>
</span><span class=lnt id=hl-24-18><a class=lnlinks href=#hl-24-18> 18</a>
</span><span class=lnt id=hl-24-19><a class=lnlinks href=#hl-24-19> 19</a>
</span><span class=lnt id=hl-24-20><a class=lnlinks href=#hl-24-20> 20</a>
</span><span class=lnt id=hl-24-21><a class=lnlinks href=#hl-24-21> 21</a>
</span><span class=lnt id=hl-24-22><a class=lnlinks href=#hl-24-22> 22</a>
</span><span class=lnt id=hl-24-23><a class=lnlinks href=#hl-24-23> 23</a>
</span><span class=lnt id=hl-24-24><a class=lnlinks href=#hl-24-24> 24</a>
</span><span class=lnt id=hl-24-25><a class=lnlinks href=#hl-24-25> 25</a>
</span><span class=lnt id=hl-24-26><a class=lnlinks href=#hl-24-26> 26</a>
</span><span class=lnt id=hl-24-27><a class=lnlinks href=#hl-24-27> 27</a>
</span><span class=lnt id=hl-24-28><a class=lnlinks href=#hl-24-28> 28</a>
</span><span class=lnt id=hl-24-29><a class=lnlinks href=#hl-24-29> 29</a>
</span><span class=lnt id=hl-24-30><a class=lnlinks href=#hl-24-30> 30</a>
</span><span class=lnt id=hl-24-31><a class=lnlinks href=#hl-24-31> 31</a>
</span><span class=lnt id=hl-24-32><a class=lnlinks href=#hl-24-32> 32</a>
</span><span class=lnt id=hl-24-33><a class=lnlinks href=#hl-24-33> 33</a>
</span><span class=lnt id=hl-24-34><a class=lnlinks href=#hl-24-34> 34</a>
</span><span class=lnt id=hl-24-35><a class=lnlinks href=#hl-24-35> 35</a>
</span><span class=lnt id=hl-24-36><a class=lnlinks href=#hl-24-36> 36</a>
</span><span class=lnt id=hl-24-37><a class=lnlinks href=#hl-24-37> 37</a>
</span><span class=lnt id=hl-24-38><a class=lnlinks href=#hl-24-38> 38</a>
</span><span class=lnt id=hl-24-39><a class=lnlinks href=#hl-24-39> 39</a>
</span><span class=lnt id=hl-24-40><a class=lnlinks href=#hl-24-40> 40</a>
</span><span class=lnt id=hl-24-41><a class=lnlinks href=#hl-24-41> 41</a>
</span><span class=lnt id=hl-24-42><a class=lnlinks href=#hl-24-42> 42</a>
</span><span class=lnt id=hl-24-43><a class=lnlinks href=#hl-24-43> 43</a>
</span><span class=lnt id=hl-24-44><a class=lnlinks href=#hl-24-44> 44</a>
</span><span class=lnt id=hl-24-45><a class=lnlinks href=#hl-24-45> 45</a>
</span><span class=lnt id=hl-24-46><a class=lnlinks href=#hl-24-46> 46</a>
</span><span class=lnt id=hl-24-47><a class=lnlinks href=#hl-24-47> 47</a>
</span><span class=lnt id=hl-24-48><a class=lnlinks href=#hl-24-48> 48</a>
</span><span class=lnt id=hl-24-49><a class=lnlinks href=#hl-24-49> 49</a>
</span><span class=lnt id=hl-24-50><a class=lnlinks href=#hl-24-50> 50</a>
</span><span class=lnt id=hl-24-51><a class=lnlinks href=#hl-24-51> 51</a>
</span><span class=lnt id=hl-24-52><a class=lnlinks href=#hl-24-52> 52</a>
</span><span class=lnt id=hl-24-53><a class=lnlinks href=#hl-24-53> 53</a>
</span><span class=lnt id=hl-24-54><a class=lnlinks href=#hl-24-54> 54</a>
</span><span class=lnt id=hl-24-55><a class=lnlinks href=#hl-24-55> 55</a>
</span><span class=lnt id=hl-24-56><a class=lnlinks href=#hl-24-56> 56</a>
</span><span class=lnt id=hl-24-57><a class=lnlinks href=#hl-24-57> 57</a>
</span><span class=lnt id=hl-24-58><a class=lnlinks href=#hl-24-58> 58</a>
</span><span class=lnt id=hl-24-59><a class=lnlinks href=#hl-24-59> 59</a>
</span><span class=lnt id=hl-24-60><a class=lnlinks href=#hl-24-60> 60</a>
</span><span class=lnt id=hl-24-61><a class=lnlinks href=#hl-24-61> 61</a>
</span><span class=lnt id=hl-24-62><a class=lnlinks href=#hl-24-62> 62</a>
</span><span class=lnt id=hl-24-63><a class=lnlinks href=#hl-24-63> 63</a>
</span><span class=lnt id=hl-24-64><a class=lnlinks href=#hl-24-64> 64</a>
</span><span class=lnt id=hl-24-65><a class=lnlinks href=#hl-24-65> 65</a>
</span><span class=lnt id=hl-24-66><a class=lnlinks href=#hl-24-66> 66</a>
</span><span class=lnt id=hl-24-67><a class=lnlinks href=#hl-24-67> 67</a>
</span><span class=lnt id=hl-24-68><a class=lnlinks href=#hl-24-68> 68</a>
</span><span class=lnt id=hl-24-69><a class=lnlinks href=#hl-24-69> 69</a>
</span><span class=lnt id=hl-24-70><a class=lnlinks href=#hl-24-70> 70</a>
</span><span class=lnt id=hl-24-71><a class=lnlinks href=#hl-24-71> 71</a>
</span><span class=lnt id=hl-24-72><a class=lnlinks href=#hl-24-72> 72</a>
</span><span class=lnt id=hl-24-73><a class=lnlinks href=#hl-24-73> 73</a>
</span><span class=lnt id=hl-24-74><a class=lnlinks href=#hl-24-74> 74</a>
</span><span class=lnt id=hl-24-75><a class=lnlinks href=#hl-24-75> 75</a>
</span><span class=lnt id=hl-24-76><a class=lnlinks href=#hl-24-76> 76</a>
</span><span class=lnt id=hl-24-77><a class=lnlinks href=#hl-24-77> 77</a>
</span><span class=lnt id=hl-24-78><a class=lnlinks href=#hl-24-78> 78</a>
</span><span class=lnt id=hl-24-79><a class=lnlinks href=#hl-24-79> 79</a>
</span><span class=lnt id=hl-24-80><a class=lnlinks href=#hl-24-80> 80</a>
</span><span class=lnt id=hl-24-81><a class=lnlinks href=#hl-24-81> 81</a>
</span><span class=lnt id=hl-24-82><a class=lnlinks href=#hl-24-82> 82</a>
</span><span class=lnt id=hl-24-83><a class=lnlinks href=#hl-24-83> 83</a>
</span><span class=lnt id=hl-24-84><a class=lnlinks href=#hl-24-84> 84</a>
</span><span class=lnt id=hl-24-85><a class=lnlinks href=#hl-24-85> 85</a>
</span><span class=lnt id=hl-24-86><a class=lnlinks href=#hl-24-86> 86</a>
</span><span class=lnt id=hl-24-87><a class=lnlinks href=#hl-24-87> 87</a>
</span><span class=lnt id=hl-24-88><a class=lnlinks href=#hl-24-88> 88</a>
</span><span class=lnt id=hl-24-89><a class=lnlinks href=#hl-24-89> 89</a>
</span><span class=lnt id=hl-24-90><a class=lnlinks href=#hl-24-90> 90</a>
</span><span class=lnt id=hl-24-91><a class=lnlinks href=#hl-24-91> 91</a>
</span><span class=lnt id=hl-24-92><a class=lnlinks href=#hl-24-92> 92</a>
</span><span class=lnt id=hl-24-93><a class=lnlinks href=#hl-24-93> 93</a>
</span><span class=lnt id=hl-24-94><a class=lnlinks href=#hl-24-94> 94</a>
</span><span class=lnt id=hl-24-95><a class=lnlinks href=#hl-24-95> 95</a>
</span><span class=lnt id=hl-24-96><a class=lnlinks href=#hl-24-96> 96</a>
</span><span class=lnt id=hl-24-97><a class=lnlinks href=#hl-24-97> 97</a>
</span><span class=lnt id=hl-24-98><a class=lnlinks href=#hl-24-98> 98</a>
</span><span class=lnt id=hl-24-99><a class=lnlinks href=#hl-24-99> 99</a>
</span><span class=lnt id=hl-24-100><a class=lnlinks href=#hl-24-100>100</a>
</span><span class=lnt id=hl-24-101><a class=lnlinks href=#hl-24-101>101</a>
</span><span class=lnt id=hl-24-102><a class=lnlinks href=#hl-24-102>102</a>
</span><span class=lnt id=hl-24-103><a class=lnlinks href=#hl-24-103>103</a>
</span><span class=lnt id=hl-24-104><a class=lnlinks href=#hl-24-104>104</a>
</span><span class=lnt id=hl-24-105><a class=lnlinks href=#hl-24-105>105</a>
</span><span class=lnt id=hl-24-106><a class=lnlinks href=#hl-24-106>106</a>
</span><span class=lnt id=hl-24-107><a class=lnlinks href=#hl-24-107>107</a>
</span><span class=lnt id=hl-24-108><a class=lnlinks href=#hl-24-108>108</a>
</span><span class=lnt id=hl-24-109><a class=lnlinks href=#hl-24-109>109</a>
</span><span class=lnt id=hl-24-110><a class=lnlinks href=#hl-24-110>110</a>
</span><span class=lnt id=hl-24-111><a class=lnlinks href=#hl-24-111>111</a>
</span><span class=lnt id=hl-24-112><a class=lnlinks href=#hl-24-112>112</a>
</span><span class=lnt id=hl-24-113><a class=lnlinks href=#hl-24-113>113</a>
</span><span class=lnt id=hl-24-114><a class=lnlinks href=#hl-24-114>114</a>
</span><span class=lnt id=hl-24-115><a class=lnlinks href=#hl-24-115>115</a>
</span><span class=lnt id=hl-24-116><a class=lnlinks href=#hl-24-116>116</a>
</span><span class=lnt id=hl-24-117><a class=lnlinks href=#hl-24-117>117</a>
</span><span class=lnt id=hl-24-118><a class=lnlinks href=#hl-24-118>118</a>
</span><span class=lnt id=hl-24-119><a class=lnlinks href=#hl-24-119>119</a>
</span><span class=lnt id=hl-24-120><a class=lnlinks href=#hl-24-120>120</a>
</span><span class=lnt id=hl-24-121><a class=lnlinks href=#hl-24-121>121</a>
</span><span class=lnt id=hl-24-122><a class=lnlinks href=#hl-24-122>122</a>
</span><span class=lnt id=hl-24-123><a class=lnlinks href=#hl-24-123>123</a>
</span><span class=lnt id=hl-24-124><a class=lnlinks href=#hl-24-124>124</a>
</span><span class=lnt id=hl-24-125><a class=lnlinks href=#hl-24-125>125</a>
</span><span class=lnt id=hl-24-126><a class=lnlinks href=#hl-24-126>126</a>
</span><span class=lnt id=hl-24-127><a class=lnlinks href=#hl-24-127>127</a>
</span><span class=lnt id=hl-24-128><a class=lnlinks href=#hl-24-128>128</a>
</span><span class=lnt id=hl-24-129><a class=lnlinks href=#hl-24-129>129</a>
</span><span class=lnt id=hl-24-130><a class=lnlinks href=#hl-24-130>130</a>
</span><span class=lnt id=hl-24-131><a class=lnlinks href=#hl-24-131>131</a>
</span><span class=lnt id=hl-24-132><a class=lnlinks href=#hl-24-132>132</a>
</span><span class=lnt id=hl-24-133><a class=lnlinks href=#hl-24-133>133</a>
</span><span class=lnt id=hl-24-134><a class=lnlinks href=#hl-24-134>134</a>
</span><span class=lnt id=hl-24-135><a class=lnlinks href=#hl-24-135>135</a>
</span><span class=lnt id=hl-24-136><a class=lnlinks href=#hl-24-136>136</a>
</span><span class=lnt id=hl-24-137><a class=lnlinks href=#hl-24-137>137</a>
</span><span class=lnt id=hl-24-138><a class=lnlinks href=#hl-24-138>138</a>
</span><span class=lnt id=hl-24-139><a class=lnlinks href=#hl-24-139>139</a>
</span><span class=lnt id=hl-24-140><a class=lnlinks href=#hl-24-140>140</a>
</span><span class=lnt id=hl-24-141><a class=lnlinks href=#hl-24-141>141</a>
</span><span class=lnt id=hl-24-142><a class=lnlinks href=#hl-24-142>142</a>
</span><span class=lnt id=hl-24-143><a class=lnlinks href=#hl-24-143>143</a>
</span><span class=lnt id=hl-24-144><a class=lnlinks href=#hl-24-144>144</a>
</span><span class=lnt id=hl-24-145><a class=lnlinks href=#hl-24-145>145</a>
</span><span class=lnt id=hl-24-146><a class=lnlinks href=#hl-24-146>146</a>
</span><span class=lnt id=hl-24-147><a class=lnlinks href=#hl-24-147>147</a>
</span><span class=lnt id=hl-24-148><a class=lnlinks href=#hl-24-148>148</a>
</span><span class=lnt id=hl-24-149><a class=lnlinks href=#hl-24-149>149</a>
</span><span class=lnt id=hl-24-150><a class=lnlinks href=#hl-24-150>150</a>
</span><span class=lnt id=hl-24-151><a class=lnlinks href=#hl-24-151>151</a>
</span><span class=lnt id=hl-24-152><a class=lnlinks href=#hl-24-152>152</a>
</span><span class=lnt id=hl-24-153><a class=lnlinks href=#hl-24-153>153</a>
</span><span class=lnt id=hl-24-154><a class=lnlinks href=#hl-24-154>154</a>
</span><span class=lnt id=hl-24-155><a class=lnlinks href=#hl-24-155>155</a>
</span><span class=lnt id=hl-24-156><a class=lnlinks href=#hl-24-156>156</a>
</span><span class=lnt id=hl-24-157><a class=lnlinks href=#hl-24-157>157</a>
</span><span class=lnt id=hl-24-158><a class=lnlinks href=#hl-24-158>158</a>
</span><span class=lnt id=hl-24-159><a class=lnlinks href=#hl-24-159>159</a>
</span><span class=lnt id=hl-24-160><a class=lnlinks href=#hl-24-160>160</a>
</span><span class=lnt id=hl-24-161><a class=lnlinks href=#hl-24-161>161</a>
</span><span class=lnt id=hl-24-162><a class=lnlinks href=#hl-24-162>162</a>
</span><span class=lnt id=hl-24-163><a class=lnlinks href=#hl-24-163>163</a>
</span><span class=lnt id=hl-24-164><a class=lnlinks href=#hl-24-164>164</a>
</span><span class=lnt id=hl-24-165><a class=lnlinks href=#hl-24-165>165</a>
</span><span class=lnt id=hl-24-166><a class=lnlinks href=#hl-24-166>166</a>
</span><span class=lnt id=hl-24-167><a class=lnlinks href=#hl-24-167>167</a>
</span><span class=lnt id=hl-24-168><a class=lnlinks href=#hl-24-168>168</a>
</span><span class=lnt id=hl-24-169><a class=lnlinks href=#hl-24-169>169</a>
</span><span class=lnt id=hl-24-170><a class=lnlinks href=#hl-24-170>170</a>
</span><span class=lnt id=hl-24-171><a class=lnlinks href=#hl-24-171>171</a>
</span><span class=lnt id=hl-24-172><a class=lnlinks href=#hl-24-172>172</a>
</span><span class=lnt id=hl-24-173><a class=lnlinks href=#hl-24-173>173</a>
</span><span class=lnt id=hl-24-174><a class=lnlinks href=#hl-24-174>174</a>
</span><span class=lnt id=hl-24-175><a class=lnlinks href=#hl-24-175>175</a>
</span><span class=lnt id=hl-24-176><a class=lnlinks href=#hl-24-176>176</a>
</span><span class=lnt id=hl-24-177><a class=lnlinks href=#hl-24-177>177</a>
</span><span class=lnt id=hl-24-178><a class=lnlinks href=#hl-24-178>178</a>
</span><span class=lnt id=hl-24-179><a class=lnlinks href=#hl-24-179>179</a>
</span><span class=lnt id=hl-24-180><a class=lnlinks href=#hl-24-180>180</a>
</span><span class=lnt id=hl-24-181><a class=lnlinks href=#hl-24-181>181</a>
</span><span class=lnt id=hl-24-182><a class=lnlinks href=#hl-24-182>182</a>
</span><span class=lnt id=hl-24-183><a class=lnlinks href=#hl-24-183>183</a>
</span><span class=lnt id=hl-24-184><a class=lnlinks href=#hl-24-184>184</a>
</span><span class=lnt id=hl-24-185><a class=lnlinks href=#hl-24-185>185</a>
</span><span class=lnt id=hl-24-186><a class=lnlinks href=#hl-24-186>186</a>
</span><span class=lnt id=hl-24-187><a class=lnlinks href=#hl-24-187>187</a>
</span><span class=lnt id=hl-24-188><a class=lnlinks href=#hl-24-188>188</a>
</span><span class=lnt id=hl-24-189><a class=lnlinks href=#hl-24-189>189</a>
</span><span class=lnt id=hl-24-190><a class=lnlinks href=#hl-24-190>190</a>
</span><span class=lnt id=hl-24-191><a class=lnlinks href=#hl-24-191>191</a>
</span><span class=lnt id=hl-24-192><a class=lnlinks href=#hl-24-192>192</a>
</span><span class=lnt id=hl-24-193><a class=lnlinks href=#hl-24-193>193</a>
</span><span class=lnt id=hl-24-194><a class=lnlinks href=#hl-24-194>194</a>
</span><span class=lnt id=hl-24-195><a class=lnlinks href=#hl-24-195>195</a>
</span><span class=lnt id=hl-24-196><a class=lnlinks href=#hl-24-196>196</a>
</span><span class=lnt id=hl-24-197><a class=lnlinks href=#hl-24-197>197</a>
</span><span class=lnt id=hl-24-198><a class=lnlinks href=#hl-24-198>198</a>
</span><span class=lnt id=hl-24-199><a class=lnlinks href=#hl-24-199>199</a>
</span><span class=lnt id=hl-24-200><a class=lnlinks href=#hl-24-200>200</a>
</span><span class=lnt id=hl-24-201><a class=lnlinks href=#hl-24-201>201</a>
</span><span class=lnt id=hl-24-202><a class=lnlinks href=#hl-24-202>202</a>
</span><span class=lnt id=hl-24-203><a class=lnlinks href=#hl-24-203>203</a>
</span><span class=lnt id=hl-24-204><a class=lnlinks href=#hl-24-204>204</a>
</span><span class=lnt id=hl-24-205><a class=lnlinks href=#hl-24-205>205</a>
</span><span class=lnt id=hl-24-206><a class=lnlinks href=#hl-24-206>206</a>
</span><span class=lnt id=hl-24-207><a class=lnlinks href=#hl-24-207>207</a>
</span><span class=lnt id=hl-24-208><a class=lnlinks href=#hl-24-208>208</a>
</span><span class=lnt id=hl-24-209><a class=lnlinks href=#hl-24-209>209</a>
</span><span class=lnt id=hl-24-210><a class=lnlinks href=#hl-24-210>210</a>
</span><span class=lnt id=hl-24-211><a class=lnlinks href=#hl-24-211>211</a>
</span><span class=lnt id=hl-24-212><a class=lnlinks href=#hl-24-212>212</a>
</span><span class=lnt id=hl-24-213><a class=lnlinks href=#hl-24-213>213</a>
</span><span class=lnt id=hl-24-214><a class=lnlinks href=#hl-24-214>214</a>
</span><span class=lnt id=hl-24-215><a class=lnlinks href=#hl-24-215>215</a>
</span><span class=lnt id=hl-24-216><a class=lnlinks href=#hl-24-216>216</a>
</span><span class=lnt id=hl-24-217><a class=lnlinks href=#hl-24-217>217</a>
</span><span class=lnt id=hl-24-218><a class=lnlinks href=#hl-24-218>218</a>
</span><span class=lnt id=hl-24-219><a class=lnlinks href=#hl-24-219>219</a>
</span><span class=lnt id=hl-24-220><a class=lnlinks href=#hl-24-220>220</a>
</span><span class=lnt id=hl-24-221><a class=lnlinks href=#hl-24-221>221</a>
</span><span class=lnt id=hl-24-222><a class=lnlinks href=#hl-24-222>222</a>
</span><span class=lnt id=hl-24-223><a class=lnlinks href=#hl-24-223>223</a>
</span><span class=lnt id=hl-24-224><a class=lnlinks href=#hl-24-224>224</a>
</span><span class=lnt id=hl-24-225><a class=lnlinks href=#hl-24-225>225</a>
</span><span class=lnt id=hl-24-226><a class=lnlinks href=#hl-24-226>226</a>
</span><span class=lnt id=hl-24-227><a class=lnlinks href=#hl-24-227>227</a>
</span><span class=lnt id=hl-24-228><a class=lnlinks href=#hl-24-228>228</a>
</span><span class=lnt id=hl-24-229><a class=lnlinks href=#hl-24-229>229</a>
</span><span class=lnt id=hl-24-230><a class=lnlinks href=#hl-24-230>230</a>
</span><span class=lnt id=hl-24-231><a class=lnlinks href=#hl-24-231>231</a>
</span><span class=lnt id=hl-24-232><a class=lnlinks href=#hl-24-232>232</a>
</span><span class=lnt id=hl-24-233><a class=lnlinks href=#hl-24-233>233</a>
</span><span class=lnt id=hl-24-234><a class=lnlinks href=#hl-24-234>234</a>
</span><span class=lnt id=hl-24-235><a class=lnlinks href=#hl-24-235>235</a>
</span><span class=lnt id=hl-24-236><a class=lnlinks href=#hl-24-236>236</a>
</span><span class=lnt id=hl-24-237><a class=lnlinks href=#hl-24-237>237</a>
</span><span class=lnt id=hl-24-238><a class=lnlinks href=#hl-24-238>238</a>
</span><span class=lnt id=hl-24-239><a class=lnlinks href=#hl-24-239>239</a>
</span><span class=lnt id=hl-24-240><a class=lnlinks href=#hl-24-240>240</a>
</span><span class=lnt id=hl-24-241><a class=lnlinks href=#hl-24-241>241</a>
</span><span class=lnt id=hl-24-242><a class=lnlinks href=#hl-24-242>242</a>
</span><span class=lnt id=hl-24-243><a class=lnlinks href=#hl-24-243>243</a>
</span><span class=lnt id=hl-24-244><a class=lnlinks href=#hl-24-244>244</a>
</span><span class=lnt id=hl-24-245><a class=lnlinks href=#hl-24-245>245</a>
</span><span class=lnt id=hl-24-246><a class=lnlinks href=#hl-24-246>246</a>
</span><span class=lnt id=hl-24-247><a class=lnlinks href=#hl-24-247>247</a>
</span><span class=lnt id=hl-24-248><a class=lnlinks href=#hl-24-248>248</a>
</span><span class=lnt id=hl-24-249><a class=lnlinks href=#hl-24-249>249</a>
</span><span class=lnt id=hl-24-250><a class=lnlinks href=#hl-24-250>250</a>
</span><span class=lnt id=hl-24-251><a class=lnlinks href=#hl-24-251>251</a>
</span><span class=lnt id=hl-24-252><a class=lnlinks href=#hl-24-252>252</a>
</span><span class=lnt id=hl-24-253><a class=lnlinks href=#hl-24-253>253</a>
</span><span class=lnt id=hl-24-254><a class=lnlinks href=#hl-24-254>254</a>
</span><span class=lnt id=hl-24-255><a class=lnlinks href=#hl-24-255>255</a>
</span><span class=lnt id=hl-24-256><a class=lnlinks href=#hl-24-256>256</a>
</span><span class=lnt id=hl-24-257><a class=lnlinks href=#hl-24-257>257</a>
</span><span class=lnt id=hl-24-258><a class=lnlinks href=#hl-24-258>258</a>
</span><span class=lnt id=hl-24-259><a class=lnlinks href=#hl-24-259>259</a>
</span><span class=lnt id=hl-24-260><a class=lnlinks href=#hl-24-260>260</a>
</span><span class=lnt id=hl-24-261><a class=lnlinks href=#hl-24-261>261</a>
</span><span class=lnt id=hl-24-262><a class=lnlinks href=#hl-24-262>262</a>
</span><span class=lnt id=hl-24-263><a class=lnlinks href=#hl-24-263>263</a>
</span><span class=lnt id=hl-24-264><a class=lnlinks href=#hl-24-264>264</a>
</span><span class=lnt id=hl-24-265><a class=lnlinks href=#hl-24-265>265</a>
</span><span class=lnt id=hl-24-266><a class=lnlinks href=#hl-24-266>266</a>
</span><span class=lnt id=hl-24-267><a class=lnlinks href=#hl-24-267>267</a>
</span><span class=lnt id=hl-24-268><a class=lnlinks href=#hl-24-268>268</a>
</span><span class=lnt id=hl-24-269><a class=lnlinks href=#hl-24-269>269</a>
</span><span class=lnt id=hl-24-270><a class=lnlinks href=#hl-24-270>270</a>
</span><span class=lnt id=hl-24-271><a class=lnlinks href=#hl-24-271>271</a>
</span><span class=lnt id=hl-24-272><a class=lnlinks href=#hl-24-272>272</a>
</span><span class=lnt id=hl-24-273><a class=lnlinks href=#hl-24-273>273</a>
</span><span class=lnt id=hl-24-274><a class=lnlinks href=#hl-24-274>274</a>
</span><span class=lnt id=hl-24-275><a class=lnlinks href=#hl-24-275>275</a>
</span><span class=lnt id=hl-24-276><a class=lnlinks href=#hl-24-276>276</a>
</span><span class=lnt id=hl-24-277><a class=lnlinks href=#hl-24-277>277</a>
</span><span class=lnt id=hl-24-278><a class=lnlinks href=#hl-24-278>278</a>
</span><span class=lnt id=hl-24-279><a class=lnlinks href=#hl-24-279>279</a>
</span><span class=lnt id=hl-24-280><a class=lnlinks href=#hl-24-280>280</a>
</span><span class=lnt id=hl-24-281><a class=lnlinks href=#hl-24-281>281</a>
</span><span class=lnt id=hl-24-282><a class=lnlinks href=#hl-24-282>282</a>
</span><span class=lnt id=hl-24-283><a class=lnlinks href=#hl-24-283>283</a>
</span><span class=lnt id=hl-24-284><a class=lnlinks href=#hl-24-284>284</a>
</span><span class=lnt id=hl-24-285><a class=lnlinks href=#hl-24-285>285</a>
</span><span class=lnt id=hl-24-286><a class=lnlinks href=#hl-24-286>286</a>
</span><span class=lnt id=hl-24-287><a class=lnlinks href=#hl-24-287>287</a>
</span><span class=lnt id=hl-24-288><a class=lnlinks href=#hl-24-288>288</a>
</span><span class=lnt id=hl-24-289><a class=lnlinks href=#hl-24-289>289</a>
</span><span class=lnt id=hl-24-290><a class=lnlinks href=#hl-24-290>290</a>
</span><span class=lnt id=hl-24-291><a class=lnlinks href=#hl-24-291>291</a>
</span><span class=lnt id=hl-24-292><a class=lnlinks href=#hl-24-292>292</a>
</span><span class=lnt id=hl-24-293><a class=lnlinks href=#hl-24-293>293</a>
</span><span class=lnt id=hl-24-294><a class=lnlinks href=#hl-24-294>294</a>
</span><span class=lnt id=hl-24-295><a class=lnlinks href=#hl-24-295>295</a>
</span><span class=lnt id=hl-24-296><a class=lnlinks href=#hl-24-296>296</a>
</span><span class=lnt id=hl-24-297><a class=lnlinks href=#hl-24-297>297</a>
</span><span class=lnt id=hl-24-298><a class=lnlinks href=#hl-24-298>298</a>
</span><span class=lnt id=hl-24-299><a class=lnlinks href=#hl-24-299>299</a>
</span><span class=lnt id=hl-24-300><a class=lnlinks href=#hl-24-300>300</a>
</span><span class=lnt id=hl-24-301><a class=lnlinks href=#hl-24-301>301</a>
</span><span class=lnt id=hl-24-302><a class=lnlinks href=#hl-24-302>302</a>
</span><span class=lnt id=hl-24-303><a class=lnlinks href=#hl-24-303>303</a>
</span><span class=lnt id=hl-24-304><a class=lnlinks href=#hl-24-304>304</a>
</span><span class=lnt id=hl-24-305><a class=lnlinks href=#hl-24-305>305</a>
</span><span class=lnt id=hl-24-306><a class=lnlinks href=#hl-24-306>306</a>
</span><span class=lnt id=hl-24-307><a class=lnlinks href=#hl-24-307>307</a>
</span><span class=lnt id=hl-24-308><a class=lnlinks href=#hl-24-308>308</a>
</span><span class=lnt id=hl-24-309><a class=lnlinks href=#hl-24-309>309</a>
</span><span class=lnt id=hl-24-310><a class=lnlinks href=#hl-24-310>310</a>
</span><span class=lnt id=hl-24-311><a class=lnlinks href=#hl-24-311>311</a>
</span><span class=lnt id=hl-24-312><a class=lnlinks href=#hl-24-312>312</a>
</span><span class=lnt id=hl-24-313><a class=lnlinks href=#hl-24-313>313</a>
</span><span class=lnt id=hl-24-314><a class=lnlinks href=#hl-24-314>314</a>
</span><span class=lnt id=hl-24-315><a class=lnlinks href=#hl-24-315>315</a>
</span><span class=lnt id=hl-24-316><a class=lnlinks href=#hl-24-316>316</a>
</span><span class=lnt id=hl-24-317><a class=lnlinks href=#hl-24-317>317</a>
</span><span class=lnt id=hl-24-318><a class=lnlinks href=#hl-24-318>318</a>
</span><span class=lnt id=hl-24-319><a class=lnlinks href=#hl-24-319>319</a>
</span><span class=lnt id=hl-24-320><a class=lnlinks href=#hl-24-320>320</a>
</span><span class=lnt id=hl-24-321><a class=lnlinks href=#hl-24-321>321</a>
</span><span class=lnt id=hl-24-322><a class=lnlinks href=#hl-24-322>322</a>
</span><span class=lnt id=hl-24-323><a class=lnlinks href=#hl-24-323>323</a>
</span><span class=lnt id=hl-24-324><a class=lnlinks href=#hl-24-324>324</a>
</span><span class=lnt id=hl-24-325><a class=lnlinks href=#hl-24-325>325</a>
</span><span class=lnt id=hl-24-326><a class=lnlinks href=#hl-24-326>326</a>
</span><span class=lnt id=hl-24-327><a class=lnlinks href=#hl-24-327>327</a>
</span><span class=lnt id=hl-24-328><a class=lnlinks href=#hl-24-328>328</a>
</span><span class=lnt id=hl-24-329><a class=lnlinks href=#hl-24-329>329</a>
</span><span class=lnt id=hl-24-330><a class=lnlinks href=#hl-24-330>330</a>
</span><span class=lnt id=hl-24-331><a class=lnlinks href=#hl-24-331>331</a>
</span><span class=lnt id=hl-24-332><a class=lnlinks href=#hl-24-332>332</a>
</span><span class=lnt id=hl-24-333><a class=lnlinks href=#hl-24-333>333</a>
</span><span class=lnt id=hl-24-334><a class=lnlinks href=#hl-24-334>334</a>
</span><span class=lnt id=hl-24-335><a class=lnlinks href=#hl-24-335>335</a>
</span><span class=lnt id=hl-24-336><a class=lnlinks href=#hl-24-336>336</a>
</span><span class=lnt id=hl-24-337><a class=lnlinks href=#hl-24-337>337</a>
</span><span class=lnt id=hl-24-338><a class=lnlinks href=#hl-24-338>338</a>
</span><span class=lnt id=hl-24-339><a class=lnlinks href=#hl-24-339>339</a>
</span><span class=lnt id=hl-24-340><a class=lnlinks href=#hl-24-340>340</a>
</span><span class=lnt id=hl-24-341><a class=lnlinks href=#hl-24-341>341</a>
</span><span class=lnt id=hl-24-342><a class=lnlinks href=#hl-24-342>342</a>
</span><span class=lnt id=hl-24-343><a class=lnlinks href=#hl-24-343>343</a>
</span><span class=lnt id=hl-24-344><a class=lnlinks href=#hl-24-344>344</a>
</span><span class=lnt id=hl-24-345><a class=lnlinks href=#hl-24-345>345</a>
</span><span class=lnt id=hl-24-346><a class=lnlinks href=#hl-24-346>346</a>
</span><span class=lnt id=hl-24-347><a class=lnlinks href=#hl-24-347>347</a>
</span><span class=lnt id=hl-24-348><a class=lnlinks href=#hl-24-348>348</a>
</span><span class=lnt id=hl-24-349><a class=lnlinks href=#hl-24-349>349</a>
</span><span class=lnt id=hl-24-350><a class=lnlinks href=#hl-24-350>350</a>
</span><span class=lnt id=hl-24-351><a class=lnlinks href=#hl-24-351>351</a>
</span><span class=lnt id=hl-24-352><a class=lnlinks href=#hl-24-352>352</a>
</span><span class=lnt id=hl-24-353><a class=lnlinks href=#hl-24-353>353</a>
</span><span class=lnt id=hl-24-354><a class=lnlinks href=#hl-24-354>354</a>
</span><span class=lnt id=hl-24-355><a class=lnlinks href=#hl-24-355>355</a>
</span><span class=lnt id=hl-24-356><a class=lnlinks href=#hl-24-356>356</a>
</span><span class=lnt id=hl-24-357><a class=lnlinks href=#hl-24-357>357</a>
</span><span class=lnt id=hl-24-358><a class=lnlinks href=#hl-24-358>358</a>
</span><span class=lnt id=hl-24-359><a class=lnlinks href=#hl-24-359>359</a>
</span><span class=lnt id=hl-24-360><a class=lnlinks href=#hl-24-360>360</a>
</span><span class=lnt id=hl-24-361><a class=lnlinks href=#hl-24-361>361</a>
</span><span class=lnt id=hl-24-362><a class=lnlinks href=#hl-24-362>362</a>
</span><span class=lnt id=hl-24-363><a class=lnlinks href=#hl-24-363>363</a>
</span><span class=lnt id=hl-24-364><a class=lnlinks href=#hl-24-364>364</a>
</span><span class=lnt id=hl-24-365><a class=lnlinks href=#hl-24-365>365</a>
</span><span class=lnt id=hl-24-366><a class=lnlinks href=#hl-24-366>366</a>
</span><span class=lnt id=hl-24-367><a class=lnlinks href=#hl-24-367>367</a>
</span><span class=lnt id=hl-24-368><a class=lnlinks href=#hl-24-368>368</a>
</span><span class=lnt id=hl-24-369><a class=lnlinks href=#hl-24-369>369</a>
</span><span class=lnt id=hl-24-370><a class=lnlinks href=#hl-24-370>370</a>
</span><span class=lnt id=hl-24-371><a class=lnlinks href=#hl-24-371>371</a>
</span><span class=lnt id=hl-24-372><a class=lnlinks href=#hl-24-372>372</a>
</span><span class=lnt id=hl-24-373><a class=lnlinks href=#hl-24-373>373</a>
</span><span class=lnt id=hl-24-374><a class=lnlinks href=#hl-24-374>374</a>
</span><span class=lnt id=hl-24-375><a class=lnlinks href=#hl-24-375>375</a>
</span><span class=lnt id=hl-24-376><a class=lnlinks href=#hl-24-376>376</a>
</span><span class=lnt id=hl-24-377><a class=lnlinks href=#hl-24-377>377</a>
</span><span class=lnt id=hl-24-378><a class=lnlinks href=#hl-24-378>378</a>
</span><span class=lnt id=hl-24-379><a class=lnlinks href=#hl-24-379>379</a>
</span><span class=lnt id=hl-24-380><a class=lnlinks href=#hl-24-380>380</a>
</span><span class=lnt id=hl-24-381><a class=lnlinks href=#hl-24-381>381</a>
</span><span class=lnt id=hl-24-382><a class=lnlinks href=#hl-24-382>382</a>
</span><span class=lnt id=hl-24-383><a class=lnlinks href=#hl-24-383>383</a>
</span><span class=lnt id=hl-24-384><a class=lnlinks href=#hl-24-384>384</a>
</span><span class=lnt id=hl-24-385><a class=lnlinks href=#hl-24-385>385</a>
</span><span class=lnt id=hl-24-386><a class=lnlinks href=#hl-24-386>386</a>
</span><span class=lnt id=hl-24-387><a class=lnlinks href=#hl-24-387>387</a>
</span><span class=lnt id=hl-24-388><a class=lnlinks href=#hl-24-388>388</a>
</span><span class=lnt id=hl-24-389><a class=lnlinks href=#hl-24-389>389</a>
</span><span class=lnt id=hl-24-390><a class=lnlinks href=#hl-24-390>390</a>
</span><span class=lnt id=hl-24-391><a class=lnlinks href=#hl-24-391>391</a>
</span><span class=lnt id=hl-24-392><a class=lnlinks href=#hl-24-392>392</a>
</span><span class=lnt id=hl-24-393><a class=lnlinks href=#hl-24-393>393</a>
</span><span class=lnt id=hl-24-394><a class=lnlinks href=#hl-24-394>394</a>
</span><span class=lnt id=hl-24-395><a class=lnlinks href=#hl-24-395>395</a>
</span><span class=lnt id=hl-24-396><a class=lnlinks href=#hl-24-396>396</a>
</span><span class=lnt id=hl-24-397><a class=lnlinks href=#hl-24-397>397</a>
</span><span class=lnt id=hl-24-398><a class=lnlinks href=#hl-24-398>398</a>
</span><span class=lnt id=hl-24-399><a class=lnlinks href=#hl-24-399>399</a>
</span><span class=lnt id=hl-24-400><a class=lnlinks href=#hl-24-400>400</a>
</span><span class=lnt id=hl-24-401><a class=lnlinks href=#hl-24-401>401</a>
</span><span class=lnt id=hl-24-402><a class=lnlinks href=#hl-24-402>402</a>
</span><span class=lnt id=hl-24-403><a class=lnlinks href=#hl-24-403>403</a>
</span><span class=lnt id=hl-24-404><a class=lnlinks href=#hl-24-404>404</a>
</span><span class=lnt id=hl-24-405><a class=lnlinks href=#hl-24-405>405</a>
</span><span class=lnt id=hl-24-406><a class=lnlinks href=#hl-24-406>406</a>
</span><span class=lnt id=hl-24-407><a class=lnlinks href=#hl-24-407>407</a>
</span><span class=lnt id=hl-24-408><a class=lnlinks href=#hl-24-408>408</a>
</span><span class=lnt id=hl-24-409><a class=lnlinks href=#hl-24-409>409</a>
</span><span class=lnt id=hl-24-410><a class=lnlinks href=#hl-24-410>410</a>
</span><span class=lnt id=hl-24-411><a class=lnlinks href=#hl-24-411>411</a>
</span><span class=lnt id=hl-24-412><a class=lnlinks href=#hl-24-412>412</a>
</span><span class=lnt id=hl-24-413><a class=lnlinks href=#hl-24-413>413</a>
</span><span class=lnt id=hl-24-414><a class=lnlinks href=#hl-24-414>414</a>
</span><span class=lnt id=hl-24-415><a class=lnlinks href=#hl-24-415>415</a>
</span><span class=lnt id=hl-24-416><a class=lnlinks href=#hl-24-416>416</a>
</span><span class=lnt id=hl-24-417><a class=lnlinks href=#hl-24-417>417</a>
</span><span class=lnt id=hl-24-418><a class=lnlinks href=#hl-24-418>418</a>
</span><span class=lnt id=hl-24-419><a class=lnlinks href=#hl-24-419>419</a>
</span><span class=lnt id=hl-24-420><a class=lnlinks href=#hl-24-420>420</a>
</span><span class=lnt id=hl-24-421><a class=lnlinks href=#hl-24-421>421</a>
</span><span class=lnt id=hl-24-422><a class=lnlinks href=#hl-24-422>422</a>
</span><span class=lnt id=hl-24-423><a class=lnlinks href=#hl-24-423>423</a>
</span><span class=lnt id=hl-24-424><a class=lnlinks href=#hl-24-424>424</a>
</span><span class=lnt id=hl-24-425><a class=lnlinks href=#hl-24-425>425</a>
</span><span class=lnt id=hl-24-426><a class=lnlinks href=#hl-24-426>426</a>
</span><span class=lnt id=hl-24-427><a class=lnlinks href=#hl-24-427>427</a>
</span><span class=lnt id=hl-24-428><a class=lnlinks href=#hl-24-428>428</a>
</span><span class=lnt id=hl-24-429><a class=lnlinks href=#hl-24-429>429</a>
</span><span class=lnt id=hl-24-430><a class=lnlinks href=#hl-24-430>430</a>
</span><span class=lnt id=hl-24-431><a class=lnlinks href=#hl-24-431>431</a>
</span><span class=lnt id=hl-24-432><a class=lnlinks href=#hl-24-432>432</a>
</span><span class=lnt id=hl-24-433><a class=lnlinks href=#hl-24-433>433</a>
</span><span class=lnt id=hl-24-434><a class=lnlinks href=#hl-24-434>434</a>
</span><span class=lnt id=hl-24-435><a class=lnlinks href=#hl-24-435>435</a>
</span><span class=lnt id=hl-24-436><a class=lnlinks href=#hl-24-436>436</a>
</span><span class=lnt id=hl-24-437><a class=lnlinks href=#hl-24-437>437</a>
</span><span class=lnt id=hl-24-438><a class=lnlinks href=#hl-24-438>438</a>
</span><span class=lnt id=hl-24-439><a class=lnlinks href=#hl-24-439>439</a>
</span><span class=lnt id=hl-24-440><a class=lnlinks href=#hl-24-440>440</a>
</span><span class=lnt id=hl-24-441><a class=lnlinks href=#hl-24-441>441</a>
</span><span class=lnt id=hl-24-442><a class=lnlinks href=#hl-24-442>442</a>
</span><span class=lnt id=hl-24-443><a class=lnlinks href=#hl-24-443>443</a>
</span><span class=lnt id=hl-24-444><a class=lnlinks href=#hl-24-444>444</a>
</span><span class=lnt id=hl-24-445><a class=lnlinks href=#hl-24-445>445</a>
</span><span class=lnt id=hl-24-446><a class=lnlinks href=#hl-24-446>446</a>
</span><span class=lnt id=hl-24-447><a class=lnlinks href=#hl-24-447>447</a>
</span><span class=lnt id=hl-24-448><a class=lnlinks href=#hl-24-448>448</a>
</span><span class=lnt id=hl-24-449><a class=lnlinks href=#hl-24-449>449</a>
</span><span class=lnt id=hl-24-450><a class=lnlinks href=#hl-24-450>450</a>
</span><span class=lnt id=hl-24-451><a class=lnlinks href=#hl-24-451>451</a>
</span><span class=lnt id=hl-24-452><a class=lnlinks href=#hl-24-452>452</a>
</span><span class=lnt id=hl-24-453><a class=lnlinks href=#hl-24-453>453</a>
</span><span class=lnt id=hl-24-454><a class=lnlinks href=#hl-24-454>454</a>
</span><span class=lnt id=hl-24-455><a class=lnlinks href=#hl-24-455>455</a>
</span><span class=lnt id=hl-24-456><a class=lnlinks href=#hl-24-456>456</a>
</span><span class=lnt id=hl-24-457><a class=lnlinks href=#hl-24-457>457</a>
</span><span class=lnt id=hl-24-458><a class=lnlinks href=#hl-24-458>458</a>
</span><span class=lnt id=hl-24-459><a class=lnlinks href=#hl-24-459>459</a>
</span><span class=lnt id=hl-24-460><a class=lnlinks href=#hl-24-460>460</a>
</span><span class=lnt id=hl-24-461><a class=lnlinks href=#hl-24-461>461</a>
</span><span class=lnt id=hl-24-462><a class=lnlinks href=#hl-24-462>462</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>Redis</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;redis&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>mysql</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;mysql2/promise&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 전자상거래 상품 캐싱 시스템
</span></span></span><span class=line><span class=cl><span class=cm> * Cache-Aside 패턴과 Write-Through 패턴을 결합한 구현
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>ProductCacheService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Redis 클라이언트 초기화
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span> <span class=o>=</span> <span class=nx>Redis</span><span class=p>.</span><span class=nx>createClient</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>host</span><span class=o>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>port</span><span class=o>:</span> <span class=mi>6379</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>retryDelayOnFailover</span><span class=o>:</span> <span class=mi>100</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>maxRetriesPerRequest</span><span class=o>:</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// MySQL 연결 풀 초기화
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>dbPool</span> <span class=o>=</span> <span class=nx>mysql</span><span class=p>.</span><span class=nx>createPool</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>host</span><span class=o>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>user</span><span class=o>:</span> <span class=s1>&#39;ecommerce_user&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>password</span><span class=o>:</span> <span class=s1>&#39;password&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>database</span><span class=o>:</span> <span class=s1>&#39;ecommerce&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>waitForConnections</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>connectionLimit</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>queueLimit</span><span class=o>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 캐시 설정
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>CACHE_TTL</span> <span class=o>=</span> <span class=mi>3600</span><span class=p>;</span> <span class=c1>// 1시간
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>this</span><span class=p>.</span><span class=nx>CACHE_PREFIX</span> <span class=o>=</span> <span class=s1>&#39;product:&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>connect</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 상품 정보 조회 (Cache-Aside 패턴)
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} productId - 상품 ID
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {Object} 상품 정보
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getProduct</span><span class=p>(</span><span class=nx>productId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>cacheKey</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>CACHE_PREFIX</span><span class=si>}${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 1. 캐시에서 먼저 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>cachedProduct</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>cachedProduct</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Cache HIT for product </span><span class=si>${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 캐시 히트 통계 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>updateCacheStats</span><span class=p>(</span><span class=s1>&#39;hit&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>cachedProduct</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Cache MISS for product </span><span class=si>${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 2. 캐시 미스 시 데이터베이스에서 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>product</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>getProductFromDB</span><span class=p>(</span><span class=nx>productId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>product</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 3. 조회된 데이터를 캐시에 저장 (비동기)
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>this</span><span class=p>.</span><span class=nx>cacheProduct</span><span class=p>(</span><span class=nx>productId</span><span class=p>,</span> <span class=nx>product</span><span class=p>).</span><span class=k>catch</span><span class=p>(</span><span class=nx>err</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Cache storage failed:&#39;</span><span class=p>,</span> <span class=nx>err</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=p>});</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1>// 캐시 미스 통계 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>updateCacheStats</span><span class=p>(</span><span class=s1>&#39;miss&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>product</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error getting product:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 캐시 오류 시 데이터베이스 직접 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>return</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>getProductFromDB</span><span class=p>(</span><span class=nx>productId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 상품 정보 업데이트 (Write-Through 패턴)
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} productId - 상품 ID
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {Object} productData - 업데이트할 상품 데이터
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>updateProduct</span><span class=p>(</span><span class=nx>productId</span><span class=p>,</span> <span class=nx>productData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>cacheKey</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>CACHE_PREFIX</span><span class=si>}${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 1. 데이터베이스 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>updateProductInDB</span><span class=p>(</span><span class=nx>productId</span><span class=p>,</span> <span class=nx>productData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 2. 캐시 업데이트 (Write-Through)
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>setEx</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=nx>cacheKey</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=p>.</span><span class=nx>CACHE_TTL</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>productData</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Product </span><span class=si>${</span><span class=nx>productId</span><span class=si>}</span><span class=sb> updated in both DB and cache`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error updating product:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 업데이트 실패 시 캐시 무효화
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>invalidateCache</span><span class=p>(</span><span class=nx>productId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=nx>error</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 데이터베이스에서 상품 조회
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} productId - 상품 ID
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {Object} 상품 정보
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getProductFromDB</span><span class=p>(</span><span class=nx>productId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=p>[</span><span class=nx>rows</span><span class=p>]</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>dbPool</span><span class=p>.</span><span class=nx>execute</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;SELECT * FROM products WHERE id = ? AND status = &#34;active&#34;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>[</span><span class=nx>productId</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>rows</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>?</span> <span class=nx>rows</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>:</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 데이터베이스에서 상품 업데이트
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} productId - 상품 ID
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {Object} productData - 상품 데이터
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>updateProductInDB</span><span class=p>(</span><span class=nx>productId</span><span class=p>,</span> <span class=nx>productData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=p>{</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>description</span><span class=p>,</span> <span class=nx>price</span><span class=p>,</span> <span class=nx>inventory</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>productData</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>dbPool</span><span class=p>.</span><span class=nx>execute</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;UPDATE products SET name = ?, description = ?, price = ?, inventory = ?, updated_at = NOW() WHERE id = ?&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>[</span><span class=nx>name</span><span class=p>,</span> <span class=nx>description</span><span class=p>,</span> <span class=nx>price</span><span class=p>,</span> <span class=nx>inventory</span><span class=p>,</span> <span class=nx>productId</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 상품을 캐시에 저장
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} productId - 상품 ID
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {Object} product - 상품 데이터
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>cacheProduct</span><span class=p>(</span><span class=nx>productId</span><span class=p>,</span> <span class=nx>product</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>cacheKey</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>CACHE_PREFIX</span><span class=si>}${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// TTL과 함께 저장
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>setEx</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=nx>cacheKey</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=p>.</span><span class=nx>CACHE_TTL</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>product</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 특정 상품 캐시 무효화
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} productId - 상품 ID
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>invalidateCache</span><span class=p>(</span><span class=nx>productId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>cacheKey</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>CACHE_PREFIX</span><span class=si>}${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>del</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Cache invalidated for product </span><span class=si>${</span><span class=nx>productId</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 카테고리별 상품 목록 조회 (캐시 적용)
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} categoryId - 카테고리 ID
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} page - 페이지 번호
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} limit - 페이지당 항목 수
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getProductsByCategory</span><span class=p>(</span><span class=nx>categoryId</span><span class=p>,</span> <span class=nx>page</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>limit</span> <span class=o>=</span> <span class=mi>20</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>cacheKey</span> <span class=o>=</span> <span class=sb>`category:</span><span class=si>${</span><span class=nx>categoryId</span><span class=si>}</span><span class=sb>:page:</span><span class=si>${</span><span class=nx>page</span><span class=si>}</span><span class=sb>:limit:</span><span class=si>${</span><span class=nx>limit</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 캐시에서 목록 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>cachedList</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>cachedList</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Cache HIT for category </span><span class=si>${</span><span class=nx>categoryId</span><span class=si>}</span><span class=sb>, page </span><span class=si>${</span><span class=nx>page</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>cachedList</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// 데이터베이스에서 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>offset</span> <span class=o>=</span> <span class=p>(</span><span class=nx>page</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span> <span class=o>*</span> <span class=nx>limit</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=p>[</span><span class=nx>rows</span><span class=p>]</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>dbPool</span><span class=p>.</span><span class=nx>execute</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;SELECT id, name, price, image_url FROM products WHERE category_id = ? AND status = &#34;active&#34; ORDER BY created_at DESC LIMIT ? OFFSET ?&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=nx>categoryId</span><span class=p>,</span> <span class=nx>limit</span><span class=p>,</span> <span class=nx>offset</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>products</span><span class=o>:</span> <span class=nx>rows</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>page</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>limit</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>total</span><span class=o>:</span> <span class=nx>rows</span><span class=p>.</span><span class=nx>length</span>
</span></span><span class=line><span class=cl>            <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// 목록을 캐시에 저장 (짧은 TTL 적용)
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>setEx</span><span class=p>(</span><span class=nx>cacheKey</span><span class=p>,</span> <span class=mi>300</span><span class=p>,</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>result</span><span class=p>));</span> <span class=c1>// 5분
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=nx>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Error getting products by category:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=nx>error</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 캐시 통계 업데이트
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {string} type - &#39;hit&#39; 또는 &#39;miss&#39;
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>updateCacheStats</span><span class=p>(</span><span class=nx>type</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>today</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>().</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;T&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>statsKey</span> <span class=o>=</span> <span class=sb>`cache:stats:</span><span class=si>${</span><span class=nx>today</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>hIncrBy</span><span class=p>(</span><span class=nx>statsKey</span><span class=p>,</span> <span class=nx>type</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>expire</span><span class=p>(</span><span class=nx>statsKey</span><span class=p>,</span> <span class=mi>86400</span> <span class=o>*</span> <span class=mi>7</span><span class=p>);</span> <span class=c1>// 7일 보관
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 캐시 성능 지표 조회
</span></span></span><span class=line><span class=cl><span class=cm>     * @returns {Object} 캐시 히트율 및 통계
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getCacheStats</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>today</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>().</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;T&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>statsKey</span> <span class=o>=</span> <span class=sb>`cache:stats:</span><span class=si>${</span><span class=nx>today</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>stats</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>hGetAll</span><span class=p>(</span><span class=nx>statsKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>hits</span> <span class=o>=</span> <span class=nb>parseInt</span><span class=p>(</span><span class=nx>stats</span><span class=p>.</span><span class=nx>hit</span> <span class=o>||</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>misses</span> <span class=o>=</span> <span class=nb>parseInt</span><span class=p>(</span><span class=nx>stats</span><span class=p>.</span><span class=nx>miss</span> <span class=o>||</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>total</span> <span class=o>=</span> <span class=nx>hits</span> <span class=o>+</span> <span class=nx>misses</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>hits</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>misses</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>total</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>hitRate</span><span class=o>:</span> <span class=nx>total</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>?</span> <span class=p>(</span><span class=nx>hits</span> <span class=o>/</span> <span class=nx>total</span> <span class=o>*</span> <span class=mi>100</span><span class=p>).</span><span class=nx>toFixed</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span> <span class=o>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 인기 상품 캐시 워밍업
</span></span></span><span class=line><span class=cl><span class=cm>     * 시스템 시작 시 또는 주기적으로 실행하여 자주 조회되는 상품들을 미리 캐시에 로드
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>warmupPopularProducts</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Starting cache warmup for popular products…&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 인기 상품 ID 목록 조회 (조회수 기준 상위 100개)
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=p>[</span><span class=nx>popularProducts</span><span class=p>]</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>dbPool</span><span class=p>.</span><span class=nx>execute</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;SELECT id FROM products WHERE status = &#34;active&#34; ORDER BY view_count DESC LIMIT 100&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>// 배치 처리로 캐시 로드 (동시 처리 제한)
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>batchSize</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=nx>popularProducts</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=nx>i</span> <span class=o>+=</span> <span class=nx>batchSize</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=nx>batch</span> <span class=o>=</span> <span class=nx>popularProducts</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>i</span> <span class=o>+</span> <span class=nx>batchSize</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=kr>await</span> <span class=nb>Promise</span><span class=p>.</span><span class=nx>all</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                    <span class=nx>batch</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=kr>async</span> <span class=p>(</span><span class=nx>product</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=kr>const</span> <span class=nx>productData</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>getProductFromDB</span><span class=p>(</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                        <span class=k>if</span> <span class=p>(</span><span class=nx>productData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>cacheProduct</span><span class=p>(</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span> <span class=nx>productData</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                        <span class=p>}</span>
</span></span><span class=line><span class=cl>                    <span class=p>})</span>
</span></span><span class=line><span class=cl>                <span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1>// 과부하 방지를 위한 지연
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=nx>resolve</span> <span class=p>=&gt;</span> <span class=nx>setTimeout</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=mi>100</span><span class=p>));</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Cache warmup completed for </span><span class=si>${</span><span class=nx>popularProducts</span><span class=p>.</span><span class=nx>length</span><span class=si>}</span><span class=sb> products`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Cache warmup failed:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 분산 락을 이용한 캐시 스탬피드 방지
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {string} key - 락 키
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {number} ttl - 락 유효 시간 (초)
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {Function} callback - 락 획득 시 실행할 함수
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>withDistributedLock</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>ttl</span><span class=p>,</span> <span class=nx>callback</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>lockKey</span> <span class=o>=</span> <span class=sb>`lock:</span><span class=si>${</span><span class=nx>key</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>lockValue</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=nb>Date</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span><span class=si>}</span><span class=sb>-</span><span class=si>${</span><span class=nb>Math</span><span class=p>.</span><span class=nx>random</span><span class=p>()</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 락 획득 시도
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>acquired</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=nx>lockKey</span><span class=p>,</span> <span class=nx>lockValue</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>EX</span><span class=o>:</span> <span class=nx>ttl</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>NX</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>acquired</span> <span class=o>===</span> <span class=s1>&#39;OK&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Lock acquired for </span><span class=si>${</span><span class=nx>key</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=kr>await</span> <span class=nx>callback</span><span class=p>();</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span> <span class=k>finally</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=c1>// 락 해제 (Lua 스크립트로 원자적 실행)
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nb>eval</span><span class=p>(</span><span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>                        if redis.call(&#34;get&#34;, KEYS[1]) == ARGV[1] then
</span></span></span><span class=line><span class=cl><span class=sb>                            return redis.call(&#34;del&#34;, KEYS[1])
</span></span></span><span class=line><span class=cl><span class=sb>                        else
</span></span></span><span class=line><span class=cl><span class=sb>                            return 0
</span></span></span><span class=line><span class=cl><span class=sb>                        end
</span></span></span><span class=line><span class=cl><span class=sb>                    `</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>lockKey</span><span class=p>,</span> <span class=nx>lockValue</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    
</span></span><span class=line><span class=cl>                    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Lock released for </span><span class=si>${</span><span class=nx>key</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Lock not acquired for </span><span class=si>${</span><span class=nx>key</span><span class=si>}</span><span class=sb>, waiting…`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 락 획득 실패 시 잠시 대기 후 재시도
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>(</span><span class=nx>resolve</span> <span class=p>=&gt;</span> <span class=nx>setTimeout</span><span class=p>(</span><span class=nx>resolve</span><span class=p>,</span> <span class=mi>50</span><span class=p>));</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=sb>`Lock error for </span><span class=si>${</span><span class=nx>key</span><span class=si>}</span><span class=sb>:`</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=nx>error</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 캐시 무효화 전략 - 태그 기반
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {Array} tags - 무효화할 태그 목록
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>invalidateByTags</span><span class=p>(</span><span class=nx>tags</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>tag</span> <span class=k>of</span> <span class=nx>tags</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>tagKey</span> <span class=o>=</span> <span class=sb>`tag:</span><span class=si>${</span><span class=nx>tag</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 태그와 연관된 캐시 키 목록 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kr>const</span> <span class=nx>associatedKeys</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>sMembers</span><span class=p>(</span><span class=nx>tagKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>associatedKeys</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// 연관된 모든 캐시 키 삭제
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>del</span><span class=p>(</span><span class=err>…</span><span class=nx>associatedKeys</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1>// 태그 자체도 삭제
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>del</span><span class=p>(</span><span class=nx>tagKey</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Invalidated </span><span class=si>${</span><span class=nx>associatedKeys</span><span class=p>.</span><span class=nx>length</span><span class=si>}</span><span class=sb> cache entries for tag: </span><span class=si>${</span><span class=nx>tag</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 메모리 사용량 모니터링 및 자동 정리
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>monitorAndCleanup</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>info</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>info</span><span class=p>(</span><span class=s1>&#39;memory&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>memoryUsage</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>parseRedisInfo</span><span class=p>(</span><span class=nx>info</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>usedMemoryMB</span> <span class=o>=</span> <span class=nx>memoryUsage</span><span class=p>.</span><span class=nx>used_memory</span> <span class=o>/</span> <span class=p>(</span><span class=mi>1024</span> <span class=o>*</span> <span class=mi>1024</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>maxMemoryMB</span> <span class=o>=</span> <span class=nx>memoryUsage</span><span class=p>.</span><span class=nx>maxmemory</span> <span class=o>/</span> <span class=p>(</span><span class=mi>1024</span> <span class=o>*</span> <span class=mi>1024</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>usagePercentage</span> <span class=o>=</span> <span class=p>(</span><span class=nx>usedMemoryMB</span> <span class=o>/</span> <span class=nx>maxMemoryMB</span><span class=p>)</span> <span class=o>*</span> <span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Redis memory usage: </span><span class=si>${</span><span class=nx>usedMemoryMB</span><span class=p>.</span><span class=nx>toFixed</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span><span class=si>}</span><span class=sb>MB / </span><span class=si>${</span><span class=nx>maxMemoryMB</span><span class=p>.</span><span class=nx>toFixed</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span><span class=si>}</span><span class=sb>MB (</span><span class=si>${</span><span class=nx>usagePercentage</span><span class=p>.</span><span class=nx>toFixed</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span><span class=si>}</span><span class=sb>%)`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// 메모리 사용률이 85%를 초과하면 경고
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=p>(</span><span class=nx>usagePercentage</span> <span class=o>&gt;</span> <span class=mi>85</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>warn</span><span class=p>(</span><span class=s1>&#39;High memory usage detected, consider cache cleanup&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>                <span class=c1>// 오래된 캐시 항목 정리 로직 실행
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>cleanupExpiredEntries</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Memory monitoring failed:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * Redis 정보 파싱
</span></span></span><span class=line><span class=cl><span class=cm>     * @param {string} info - Redis INFO 명령 결과
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=nx>parseRedisInfo</span><span class=p>(</span><span class=nx>info</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>lines</span> <span class=o>=</span> <span class=nx>info</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;\r\n&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>lines</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>line</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>line</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=s1>&#39;:&#39;</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kr>const</span> <span class=p>[</span><span class=nx>key</span><span class=p>,</span> <span class=nx>value</span><span class=p>]</span> <span class=o>=</span> <span class=nx>line</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;:&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=nx>result</span><span class=p>[</span><span class=nx>key</span><span class=p>]</span> <span class=o>=</span> <span class=nb>isNaN</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=o>?</span> <span class=nx>value</span> <span class=o>:</span> <span class=nb>Number</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 만료된 캐시 항목 정리
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>cleanupExpiredEntries</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Redis의 자동 만료 기능에 의존하되, 
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// 필요 시 수동으로 오래된 데이터 패턴 정리
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Cleaning up expired cache entries…&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 예: 일주일 이상 된 통계 데이터 정리
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>oneWeekAgo</span> <span class=o>=</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nx>oneWeekAgo</span><span class=p>.</span><span class=nx>setDate</span><span class=p>(</span><span class=nx>oneWeekAgo</span><span class=p>.</span><span class=nx>getDate</span><span class=p>()</span> <span class=o>-</span> <span class=mi>7</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>oldStatsPattern</span> <span class=o>=</span> <span class=sb>`cache:stats:</span><span class=si>${</span><span class=nx>oneWeekAgo</span><span class=p>.</span><span class=nx>toISOString</span><span class=p>().</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;T&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span><span class=si>}</span><span class=sb>*`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>oldKeys</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>keys</span><span class=p>(</span><span class=nx>oldStatsPattern</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>oldKeys</span><span class=p>.</span><span class=nx>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>del</span><span class=p>(</span><span class=err>…</span><span class=nx>oldKeys</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Cleaned up </span><span class=si>${</span><span class=nx>oldKeys</span><span class=p>.</span><span class=nx>length</span><span class=si>}</span><span class=sb> old statistics entries`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 연결 종료
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>disconnect</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>redisClient</span><span class=p>.</span><span class=nx>disconnect</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>dbPool</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Cache service disconnected&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 사용 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>async</span> <span class=kd>function</span> <span class=nx>example</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>cacheService</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ProductCacheService</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 캐시 워밍업 실행
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>warmupPopularProducts</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 상품 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>product</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>getProduct</span><span class=p>(</span><span class=mi>12345</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Product:&#39;</span><span class=p>,</span> <span class=nx>product</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 상품 업데이트
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>updateProduct</span><span class=p>(</span><span class=mi>12345</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Updated Product&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>description</span><span class=o>:</span> <span class=s1>&#39;New description&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>price</span><span class=o>:</span> <span class=mf>99.99</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>inventory</span><span class=o>:</span> <span class=mi>50</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 카테고리별 상품 목록 조회
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>categoryProducts</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>getProductsByCategory</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Category products:&#39;</span><span class=p>,</span> <span class=nx>categoryProducts</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 캐시 성능 지표 확인
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>stats</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>getCacheStats</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Cache stats:&#39;</span><span class=p>,</span> <span class=nx>stats</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1>// 메모리 모니터링
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>monitorAndCleanup</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Example execution failed:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>finally</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>await</span> <span class=nx>cacheService</span><span class=p>.</span><span class=nx>disconnect</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=nx>ProductCacheService</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=도전-과제-1>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제-1>#</a></h3><p>현대 실무 환경에서 캐싱과 관련하여 해결해야 하는 주요 도전 과제들을 카테고리별로 정리하면 다음과 같습니다:</p><h4 id=1-성능-및-확장성-과제>1. 성능 및 확장성 과제<a hidden class=anchor aria-hidden=true href=#1-성능-및-확장성-과제>#</a></h4><ul><li><strong>원인</strong>: 급증하는 데이터 볼륨과 동시 사용자 수</li><li><strong>영향</strong>: 캐시 히트율 저하, 응답 시간 증가</li><li><strong>탐지 및 진단</strong>: APM 도구를 통한 실시간 성능 모니터링</li><li><strong>예방 방법</strong>: 예측적 스케일링, 캐시 파티셔닝</li><li><strong>해결 방법</strong>: 분산 캐시 클러스터링, 적응형 캐시 크기 조정</li></ul><h4 id=2-데이터-일관성-과제>2. 데이터 일관성 과제<a hidden class=anchor aria-hidden=true href=#2-데이터-일관성-과제>#</a></h4><ul><li><strong>원인</strong>: 분산 환경에서의 동시 업데이트</li><li><strong>영향</strong>: 데이터 불일치로 인한 비즈니스 로직 오류</li><li><strong>탐지 및 진단</strong>: 데이터 무결성 체크섬, 버전 관리</li><li><strong>예방 방법</strong>: 이벤트 소싱, CQRS 패턴 적용</li><li><strong>해결 방법</strong>: 최종 일관성 모델, 분산 트랜잭션</li></ul><h4 id=3-보안-및-프라이버시-과제>3. 보안 및 프라이버시 과제<a hidden class=anchor aria-hidden=true href=#3-보안-및-프라이버시-과제>#</a></h4><ul><li><strong>원인</strong>: 캐시에 저장된 민감한 데이터 노출 위험</li><li><strong>영향</strong>: 개인정보 유출, 컴플라이언스 위반</li><li><strong>탐지 및 진단</strong>: 보안 감사, 접근 로그 분석</li><li><strong>예방 방법</strong>: 데이터 암호화, 접근 제어 강화</li><li><strong>해결 방법</strong>: 필드 레벨 암호화, 토큰화</li></ul><h4 id=4-운영-및-관리-과제>4. 운영 및 관리 과제<a hidden class=anchor aria-hidden=true href=#4-운영-및-관리-과제>#</a></h4><ul><li><strong>원인</strong>: 복잡한 캐시 토폴로지와 관리 오버헤드</li><li><strong>영향</strong>: 운영 비용 증가, 장애 복구 시간 연장</li><li><strong>탐지 및 진단</strong>: 자동화된 헬스 체크, 메트릭 수집</li><li><strong>예방 방법</strong>: 인프라 코드화, 자동화된 배포</li><li><strong>해결 방법</strong>: 컨테이너 오케스트레이션, 서비스 메시 도입</li></ul><h3 id=실무-사용-예시-1>실무 사용 예시<a hidden class=anchor aria-hidden=true href=#실무-사용-예시-1>#</a></h3><table><thead><tr><th>사용 맥락</th><th>함께 사용하는 기술</th><th>목적</th><th>효과</th></tr></thead><tbody><tr><td>웹 애플리케이션</td><td>React + Redis + Node.js</td><td>세션 관리 및 API 응답 캐싱</td><td>페이지 로딩 시간 70% 단축</td></tr><tr><td>마이크로서비스</td><td>Kubernetes + Istio + Hazelcast</td><td>서비스 간 공유 데이터 캐싱</td><td>네트워크 통신 50% 감소</td></tr><tr><td>데이터 분석</td><td>Apache Spark + Alluxio</td><td>중간 계산 결과 캐싱</td><td>배치 작업 시간 60% 단축</td></tr><tr><td>게임 서비스</td><td>Unity + Amazon ElastiCache</td><td>실시간 리더보드 캐싱</td><td>동시 사용자 10배 증가 지원</td></tr><tr><td>IoT 플랫폼</td><td>Apache Kafka + InfluxDB</td><td>센서 데이터 스트림 캐싱</td><td>실시간 대시보드 응답성 향상</td></tr></tbody></table><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점-1>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점-1>#</a></h3><table><thead><tr><th>구분</th><th>고려사항</th><th>주의점</th><th>권장사항</th></tr></thead><tbody><tr><td>설계 단계</td><td>데이터 접근 패턴 분석</td><td>과도한 캐시 레이어 추가</td><td>80/20 법칙 적용하여 핵심 데이터만 캐싱</td></tr><tr><td>구현 단계</td><td>적절한 TTL 설정</td><td>너무 긴 TTL로 인한 데이터 불일치</td><td>비즈니스 요구사항에 맞는 TTL 정책 수립</td></tr><tr><td>운영 단계</td><td>모니터링 체계 구축</td><td>캐시 성능 지표 미관찰</td><td>히트율, 응답시간, 메모리 사용률 실시간 추적</td></tr><tr><td>확장 단계</td><td>점진적 확장 전략</td><td>갑작스러운 캐시 클러스터 확장</td><td>카나리 배포를 통한 단계적 적용</td></tr></tbody></table><h3 id=최적화하기-위한-고려사항-및-주의할-점-1>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점-1>#</a></h3><table><thead><tr><th>구분</th><th>최적화 요소</th><th>주의점</th><th>권장사항</th></tr></thead><tbody><tr><td>메모리 효율성</td><td>데이터 압축 및 직렬화</td><td>압축 오버헤드 vs 메모리 절약</td><td>JSON 대신 MessagePack, Protocol Buffers 사용</td></tr><tr><td>네트워크 최적화</td><td>배치 처리 및 파이프라이닝</td><td>네트워크 지연으로 인한 성능 저하</td><td>Redis Pipeline, Multi-get 연산 활용</td></tr><tr><td>알고리즘 최적화</td><td>적응형 교체 정책</td><td>고정된 LRU/LFU 정책의 한계</td><td>워크로드 특성에 맞는 하이브리드 알고리즘</td></tr><tr><td>일관성 최적화</td><td>지연 무효화 전략</td><td>즉시 무효화로 인한 성능 영향</td><td>이벤트 기반 비동기 무효화</td></tr></tbody></table><hr><h2 id=주제와-관련하여-주목할-내용>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>신기술</td><td>Edge Computing</td><td>엣지 캐싱</td><td>5G 환경에서 초저지연 서비스를 위한 엣지 노드 캐싱</td></tr><tr><td>인공지능</td><td>ML-based Caching</td><td>지능형 캐시</td><td>머신러닝을 활용한 예측적 캐시 프리페칭</td></tr><tr><td>블록체인</td><td>Distributed Ledger</td><td>탈중앙화 캐시</td><td>블록체인 기반 분산 캐시 네트워크</td></tr><tr><td>클라우드</td><td>Serverless Caching</td><td>서버리스 캐시</td><td>AWS Lambda와 연계된 이벤트 기반 캐시</td></tr><tr><td>보안</td><td>Confidential Computing</td><td>기밀 캐싱</td><td>암호화된 메모리 영역에서의 안전한 캐싱</td></tr></tbody></table><h2 id=주제와-관련하여-반드시-학습해야할-내용>주제와 관련하여 반드시 학습해야할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-반드시-학습해야할-내용>#</a></h2><table><thead><tr><th>카테고리</th><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>기초 이론</td><td>메모리 계층구조</td><td>Memory Hierarchy</td><td>CPU-메모리-스토리지 간의 성능 특성 이해</td></tr><tr><td>알고리즘</td><td>교체 정책</td><td>Replacement Algorithms</td><td>LRU, LFU, ARC 등 캐시 교체 알고리즘</td></tr><tr><td>시스템 설계</td><td>일관성 모델</td><td>Consistency Models</td><td>강일관성, 최종일관성, 인과일관성</td></tr><tr><td>분산 시스템</td><td>캐시 코히어런스</td><td>Cache Coherence</td><td>MESI, MOESI 프로토콜 원리</td></tr><tr><td>성능 튜닝</td><td>캐시 지역성</td><td>Cache Locality</td><td>시간적/공간적 지역성 최적화 기법</td></tr></tbody></table><hr><h2 id=용어-정리-1>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-1>#</a></h2><table><thead><tr><th>카테고리</th><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>기본 개념</td><td>Cache Hit/Miss</td><td>캐시에서 데이터를 찾은 경우/찾지 못한 경우</td></tr><tr><td></td><td>TTL (Time To Live)</td><td>캐시 항목이 유효한 시간</td></tr><tr><td></td><td>Eviction</td><td>캐시에서 데이터를 제거하는 과정</td></tr><tr><td>성능 지표</td><td>Hit Ratio</td><td>전체 요청 중 캐시 히트 비율</td></tr><tr><td></td><td>Latency</td><td>데이터 요청부터 응답까지의 시간</td></tr><tr><td></td><td>Throughput</td><td>단위 시간당 처리 가능한 요청 수</td></tr><tr><td>일관성</td><td>Write-Through</td><td>캐시와 백엔드에 동시 쓰기</td></tr><tr><td></td><td>Write-Back</td><td>캐시에만 쓰고 나중에 백엔드 동기화</td></tr><tr><td></td><td>Dirty Data</td><td>캐시에서 수정되어 백엔드와 다른 데이터</td></tr><tr><td>분산 시스템</td><td>Consistent Hashing</td><td>노드 추가/제거 시 최소 재분배하는 해싱</td></tr><tr><td></td><td>Replication</td><td>데이터의 복제본 유지</td></tr><tr><td></td><td>Partitioning</td><td>데이터를 여러 노드에 분산 저장</td></tr><tr><td>알고리즘</td><td>LRU (Least Recently Used)</td><td>가장 오래 사용되지 않은 항목 교체</td></tr><tr><td></td><td>LFU (Least Frequently Used)</td><td>가장 적게 사용된 항목 교체</td></tr><tr><td></td><td>FIFO (First In First Out)</td><td>먼저 들어온 항목 먼저 교체</td></tr></tbody></table><hr><h2 id=참고-및-출처-1>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-1>#</a></h2><ul><li><a href=https://aws.amazon.com/caching/>AWS Caching 가이드</a></li><li><a href=https://redis.io/glossary/distributed-caching/>Redis 분산 캐싱 문서</a></li><li><a href=https://www.geeksforgeeks.org/caching-system-design-concept-for-beginners/>GeeksforGeeks 캐시 시스템 설계</a></li><li><a href=https://learn.microsoft.com/en-us/aspnet/core/performance/caching/distributed>Microsoft .NET 캐싱 문서</a></li><li><a href=https://www.frontiersin.org/journals/computer-science/articles/10.3389/fcomp.2025.1511161/full>Cache Coherence Protocols 논문</a></li><li><a href=https://en.wikipedia.org/wiki/MESI_protocol>MESI Protocol Wikipedia</a></li><li><a href=https://www.geeksforgeeks.org/lru-cache-implementation/>LRU Cache Implementation Guide</a></li></ul><hr><p>캐싱 (Caching) 은 데이터나 연산 결과를 빠른 임시 저장소에 저장해 반복적인 데이터 접근 시 응답 속도를 높이고, 시스템의 전체적인 처리 효율을 향상시키는 기술이다. 캐시 교체 정책, 무효화 전략, 일관성 관리 등의 핵심 원칙을 기반으로 하며, 로컬 메모리, 분산 캐시, CDN 등 다양한 형태로 구현된다.</p><p>CPU, 웹 서버, 데이터베이스, 분산 시스템 등 다양한 계층에서 적용되며, 캐시 최적화는 시스템 설계의 핵심 과제로, 효율적인 데이터 접근, 비용 절감, 확장성 확보에 필수적이다.</p><h3 id=핵심-개념-1>핵심 개념<a hidden class=anchor aria-hidden=true href=#핵심-개념-1>#</a></h3><p>캐싱 (Caching) 은 자주 접근하거나 계산 비용이 높은 데이터를 빠르게 접근 가능한 임시 저장소 (캐시) 에 보관하여, 동일한 데이터에 대한 반복적인 접근 시 원본 데이터 소스보다 더 빠르게 결과를 제공하는 기술이다.</p><ul><li><p>캐시 히트와 캐시 미스</p><ul><li><strong>캐시 히트 (Cache Hit)</strong>: 요청된 데이터가 캐시에 존재하여 원본 소스에 접근하지 않고 캐시에서 바로 데이터를 제공할 수 있는 상황</li><li><strong>캐시 미스 (Cache Miss)</strong>: 요청된 데이터가 캐시에 존재하지 않아 원본 소스에서 데이터를 가져와야 하는 상황</li></ul></li><li><p>캐시 적중률<br>캐시 적중률 (Hit Ratio) 은 전체 요청 중 캐시 히트가 발생한 비율을 나타내며, 캐싱 시스템의 효율성을 평가하는 핵심 지표이다.</p></li><li><p>캐시 일관성 (Cache Consistency)<br>캐시된 데이터와 원본 데이터 간의 일치성을 유지하는 것으로, 캐시 무효화 (Invalidation) 및 갱신 (Update) 전략이 중요합니다.</p></li><li><p>캐시 무효화 (Cache Invalidation)<br>원본 데이터가 변경되었을 때 캐시의 데이터를 갱신하거나 삭제하는 과정이다.</p></li><li><p>캐시 교체 정책<br>캐시 공간이 부족할 때 어떤 데이터를 제거할지 결정하는 알고리즘으로, LRU(Least Recently Used), LFU(Least Frequently Used), FIFO(First In First Out) 등이 있다.</p></li><li><p>분산 캐싱<br>여러 서버에 걸쳐 캐시를 분산시켜 확장성과 가용성을 향상시키는 기법이다.</p></li><li><p>TTL(Time To Live)<br>캐시된 데이터가 유효한 기간을 설정하는 메커니즘으로, 설정된 시간이 지나면 데이터는 만료되어 새로운 데이터로 갱신되어야 한다.</p></li></ul><h3 id=목적-및-필요성-2>목적 및 필요성<a hidden class=anchor aria-hidden=true href=#목적-및-필요성-2>#</a></h3><p>캐싱은 다음과 같은 목적과 필요성을 가진다:</p><ol><li><strong>성능 향상</strong>: 데이터 접근 속도를 높여 애플리케이션의 응답 시간을 단축한다.</li><li><strong>부하 감소</strong>: 데이터베이스, API 서버 등 백엔드 시스템의 부하를 줄인다.</li><li><strong>대역폭 절약</strong>: 네트워크 트래픽을 감소시켜 대역폭 사용을 최적화한다.</li><li><strong>비용 효율성</strong>: 컴퓨팅 리소스와 네트워크 사용량을 줄여 운영 비용을 절감한다.</li><li><strong>확장성 개선</strong>: 더 많은 사용자 요청을 처리할 수 있게 하여 시스템 확장성을 향상시킨다.</li><li><strong>사용자 경험 개선</strong>: 빠른 응답 시간으로 사용자 만족도를 높인다.</li></ol><h3 id=주요-기능-및-역할-2>주요 기능 및 역할<a hidden class=anchor aria-hidden=true href=#주요-기능-및-역할-2>#</a></h3><ol><li><strong>데이터 저장 및 검색</strong>: 자주 사용되는 데이터를 고속 접근 가능한 저장소에 보관하고 빠르게 검색한다.</li><li><strong>데이터 일관성 유지</strong>: 원본 데이터와 캐시된 데이터 간의 일관성을 관리한다.</li><li><strong>캐시 교체 정책 적용</strong>: 한정된 캐시 공간에서 최적의 데이터를 유지하기 위한 교체 정책을 수행한다.</li><li><strong>캐시 만료 관리</strong>: TTL(Time To Live) 을 통해 데이터의 신선도를 유지한다.</li><li><strong>분산 환경 지원</strong>: 여러 서버에 걸친 분산 캐싱을 통해 확장성을 제공한다.</li></ol><h3 id=특징-2>특징<a hidden class=anchor aria-hidden=true href=#특징-2>#</a></h3><ol><li><strong>속도</strong>: 메모리 기반 캐싱은 디스크 기반 스토리지보다 훨씬 빠른 접근 속도를 제공한다.</li><li><strong>임시성</strong>: 캐시는 영구 저장소가 아닌 임시 저장소로 간주된다.</li><li><strong>크기 제한</strong>: 일반적으로 캐시는 원본 데이터 소스보다 작은 크기를 가진다.</li><li><strong>투명성</strong>: 잘 설계된 캐싱 시스템은 애플리케이션의 다른 부분에 투명하게 작동한다.</li><li><strong>계층화</strong>: 여러 레벨의 캐싱을 구성하여 더 효율적인 데이터 접근을 제공할 수 있다.</li></ol><h3 id=핵심-원칙-2>핵심 원칙<a hidden class=anchor aria-hidden=true href=#핵심-원칙-2>#</a></h3><ol><li><strong>지역성 원리 (Locality Principle)</strong>: 캐싱은 데이터 접근의 지역성 (시간적, 공간적) 에 기반한다.<ul><li><strong>시간적 지역성 (Temporal Locality)</strong>: 최근에 접근한 데이터는 가까운 미래에 다시 접근될 가능성이 높다.</li><li><strong>공간적 지역성 (Spatial Locality)</strong>: 특정 데이터에 접근하면 그 주변 데이터에도 접근할 가능성이 높다.</li></ul></li><li><strong>최소 필요 원칙 (Principle of Least Necessity)</strong>: 필요한 데이터만 캐싱하여 자원을 효율적으로 사용한다.</li><li><strong>신선도 vs 일관성 (Freshness vs Consistency)</strong>: 데이터의 최신성과 일관성 간의 균형을 유지한다.</li><li><strong>예측 가능성 (Predictability)</strong>: 캐시 동작이 예측 가능해야 디버깅과 최적화가 용이하다.</li><li><strong>비용 효율성 (Cost Efficiency)</strong>: 캐싱의 이점이 구현 및 유지 비용보다 커야 한다.</li></ol><h3 id=주요-원리-및-작동-원리>주요 원리 및 작동 원리<a hidden class=anchor aria-hidden=true href=#주요-원리-및-작동-원리>#</a></h3><p>캐싱의 기본 작동 원리는 다음과 같다:</p><ol><li><strong>요청 처리</strong>: 클라이언트가 데이터를 요청한다.</li><li><strong>캐시 확인</strong>: 시스템은 먼저 캐시에서 요청된 데이터를 찾는다.</li><li><strong>캐시 히트</strong>: 데이터가 캐시에 있으면 즉시 반환한다.</li><li><strong>캐시 미스</strong>: 데이터가 캐시에 없으면 원본 소스에서 데이터를 가져온다.</li><li><strong>캐시 저장</strong>: 원본 소스에서 가져온 데이터를 캐시에 저장한다.</li><li><strong>응답 반환</strong>: 클라이언트에게 데이터를 반환한다.</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-25-1><a class=lnlinks href=#hl-25-1>1</a>
</span><span class=lnt id=hl-25-2><a class=lnlinks href=#hl-25-2>2</a>
</span><span class=lnt id=hl-25-3><a class=lnlinks href=#hl-25-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[Client] → [Cache] → [DB/Origin]
</span></span><span class=line><span class=cl>             ↑
</span></span><span class=line><span class=cl>        (Hit/Miss)
</span></span></code></pre></td></tr></table></div></div><ul><li>클라이언트 요청이 캐시에 먼저 도달, 캐시 미스 시 원본 데이터 소스로 이동</li></ul><h3 id=캐시-종류>캐시 종류<a hidden class=anchor aria-hidden=true href=#캐시-종류>#</a></h3><p>캐싱 시스템의 종류는 사용 사례와 요구사항에 따라 다양하지만, 일반적인 구조는 다음과 같다:</p><table><thead><tr><th>구분</th><th>설명</th><th>기능</th><th>역할</th></tr></thead><tbody><tr><td><strong>클라이언트 측 캐싱</strong> (Client-Side Caching)</td><td>웹 브라우저, 모바일 앱 내부 로컬 캐시</td><td>네트워크 요청 감소, 오프라인 접근 지원</td><td>사용자 경험 개선, 빠른 로딩</td></tr><tr><td><strong>서버 측 캐싱</strong> (Server-Side Caching)</td><td>애플리케이션 서버의 메모리 또는 로컬 스토리지 캐시</td><td>계산 결과 캐싱, 데이터베이스 조회 감소</td><td>서버 부하 감소, 응답 속도 향상</td></tr><tr><td><strong>분산 캐싱</strong> (Distributed Caching)</td><td>Redis, Memcached 등 외부 공유 캐시 시스템</td><td>다수 서버 간 캐시 공유, 세션 정보 저장</td><td>확장성 확보, 고가용성 유지</td></tr><tr><td><strong>캐시 계층</strong> (Cache Layers)</td><td>L1 (CPU 가까움) → L2 → L3 (저장장치 가까움)</td><td>다중 계층 접근 최적화, 핫 데이터 우선 처리</td><td>성능 균형화, 자원 효율적 사용</td></tr><tr><td><strong>CDN</strong> (Content Delivery Network)</td><td>전 세계 에지 서버 기반 정적 콘텐츠 전송</td><td>이미지/JS/CSS 등 정적 리소스 지연 최소화</td><td>글로벌 사용자에 대한 콘텐츠 전송 최적화</td></tr></tbody></table><h4 id=캐시-전략-선택-기준>캐시 전략 선택 기준<a hidden class=anchor aria-hidden=true href=#캐시-전략-선택-기준>#</a></h4><table><thead><tr><th>상황/요건</th><th>추천 캐시 전략</th><th>이유 및 설명</th></tr></thead><tbody><tr><td><strong>사용자 경험 최우선</strong> (웹페이지 빠른 로딩 등)</td><td>클라이언트 측 캐싱 (브라우저 캐시)</td><td>HTML, CSS, JS, 이미지 등을 로컬에 저장해 요청 최소화, TTFB(Time to First Byte) 개선</td></tr><tr><td><strong>API 응답 속도 향상 및 DB 부하 완화 필요</strong></td><td>서버 측 캐싱 (메모리 캐시)</td><td>동일한 요청에 대해 DB 쿼리 없이 빠르게 응답 가능. ex: Python 의 LRU 캐시, Guava Cache</td></tr><tr><td><strong>수평 확장된 서비스 또는 마이크로서비스 환경</strong></td><td>분산 캐싱 (Redis/Memcached)</td><td>여러 인스턴스 간 캐시 공유 필요. 사용자 세션, 토큰, 추천 결과 등 공유 캐시 저장</td></tr><tr><td><strong>정적 리소스 글로벌 제공 필요 (전 세계 대상 서비스)</strong></td><td>CDN 캐싱</td><td>이미지, JS, 영상 등 정적 콘텐츠를 사용자와 가까운 에지 서버에서 제공하여 속도 개선</td></tr><tr><td><strong>빈번히 요청되는 고가치 연산 결과가 존재</strong></td><td>서버 측 또는 L1 캐시</td><td>계산 비용이 큰 결과를 메모리에 저장해 중복 연산 방지. ex: 가격 계산, 추천 결과</td></tr><tr><td><strong>대규모 이벤트 트래픽 대응 (세일, 프로모션 등)</strong></td><td>CDN + 분산 캐싱 조합</td><td>정적 자원은 CDN, API 캐시는 Redis 등에서 병목 완화</td></tr><tr><td><strong>다양한 응답 속도·비용 요구사항 공존</strong></td><td>계층형 캐시 (L1 + L2 + DB)</td><td>빠른 접근이 필요한 데이터는 메모리, 오래된 데이터는 디스크 등 계층화된 접근 구조 사용</td></tr><tr><td><strong>네트워크 단절 가능성 존재 (모바일, IoT 등)</strong></td><td>클라이언트 캐시 또는 로컬 스토리지</td><td>오프라인 상태에서도 일부 데이터 접근 가능 (PWA, 모바일 앱 캐시 등)</td></tr></tbody></table><h3 id=구성-요소>구성 요소<a hidden class=anchor aria-hidden=true href=#구성-요소>#</a></h3><table><thead><tr><th>구성 요소</th><th>기능</th><th>역할</th><th>구현/정책 예시</th></tr></thead><tbody><tr><td><strong>캐시 저장소</strong> (Cache Store)</td><td>캐시 데이터를 실제로 저장</td><td>고속 접근을 위한 메모리 또는 저장소 역할</td><td>RAM, 디스크, Redis, Memcached, LocalStorage 등</td></tr><tr><td><strong>캐시 키</strong> (Cache Key)</td><td>데이터를 고유하게 식별</td><td>효율적인 검색 및 중복 방지</td><td>해시 (Hash), URL, 쿼리 파라미터, 사용자 ID 등</td></tr><tr><td><strong>캐시 정책 관리자</strong> (Cache Policy Manager)</td><td>TTL 설정 및 캐시 교체 정책 제어</td><td>데이터 수명 관리 및 공간 효율 확보</td><td>LRU(Least Recently Used), LFU, FIFO 등</td></tr><tr><td><strong>캐시 일관성 관리자</strong> (Cache Consistency Manager)</td><td>원본 데이터와 캐시 데이터 동기화</td><td>데이터 신뢰성과 정확성 유지</td><td>Write-Through, Write-Back, Write-Around</td></tr><tr><td><strong>캐시 모니터링</strong> (Cache Monitoring)</td><td>성능 지표 수집 및 통계 분석</td><td>캐시 운영 최적화와 문제 탐지</td><td>Cache Hit Ratio, Miss Ratio, 평균 지연 시간, TTL 추적 등</td></tr></tbody></table><h3 id=구현-기법-2>구현 기법<a hidden class=anchor aria-hidden=true href=#구현-기법-2>#</a></h3><p>캐싱 (Caching) 은 빠른 데이터 접근과 시스템 성능 최적화를 위해 다양한 전략과 기법을 적용한다.<br>다양한 구현 기법의 조합을 통해 시스템은 데이터 일관성, 신선도, 성능, 확장성, 신뢰성의 균형을 맞출 수 있다.</p><h4 id=캐시-배치-정책-cache-placement-policy>캐시 배치 정책 (Cache Placement Policy)<a hidden class=anchor aria-hidden=true href=#캐시-배치-정책-cache-placement-policy>#</a></h4><p>어떤 메모리 블록이 캐시의 어디에 저장될지를 결정하는 정책으로 CPU 캐시나 시스템 내부 캐시에서 <strong>주소 매핑 방식 (Cache Mapping)</strong> 이라고도 한다.<br>CPU 캐시 등 하드웨어 캐시에서 주로 사용되는 개념이며, 소프트웨어 캐시에서도 데이터 배치 정책 설계에 활용된다.</p><table><thead><tr><th>구현 기법</th><th>정의</th><th>구성</th><th>목적</th><th>실제 예시</th></tr></thead><tbody><tr><td>직접 매핑 (Direct Mapping)</td><td>메모리 블록을 캐시의 특정 위치에 매핑</td><td>태그, 인덱스, 오프셋</td><td>구현 단순, 속도 빠름</td><td>CPU L1 캐시</td></tr><tr><td>완전 연관 사상 (Fully Associative)</td><td>모든 블록이 모든 슬롯에 저장 가능</td><td>태그, 슬롯</td><td>유연성 높음</td><td>CPU L2/L3 캐시</td></tr><tr><td>집합 연관 사상 (Set Associative)</td><td>여러 블록이 한 세트에 매핑</td><td>태그, 세트, 슬롯</td><td>적절한 절충</td><td>CPU 캐시</td></tr></tbody></table><h4 id=읽기-전략-read-caching-strategy>읽기 전략 (Read Caching Strategy)<a hidden class=anchor aria-hidden=true href=#읽기-전략-read-caching-strategy>#</a></h4><p>읽기 요청이 들어왔을 때 캐시와 원본 저장소 간에 어떻게 데이터를 조회하고 캐시에 반영할지를 결정하는 전략이다.</p><table><thead><tr><th>전략명</th><th>정의</th><th>구성요소</th><th>목적/특징</th><th>활용 예시</th></tr></thead><tbody><tr><td>Cache-Aside (Lazy Loading)</td><td>애플리케이션이 캐시를 직접 관리. 캐시 미스 시 DB 에서 데이터를 읽어와 캐시에 저장 (Lazy Loading)</td><td>애플리케이션, 캐시, DB</td><td>필요한 데이터만 적재, 유연한 캐시 제어</td><td>사용자 프로필, 뉴스 기사, 상품 정보 등</td></tr><tr><td>Read-Through</td><td>캐시 미스 시 캐시 시스템이 DB 에서 데이터를 자동으로 읽어와 캐시에 저장</td><td>캐시 시스템, DB</td><td>코드 단순화, 캐시 일관성 자동 관리</td><td>이커머스 상품 상세, 복잡 데이터 집계 등</td></tr><tr><td>Refresh-Ahead</td><td>TTL 만료 전 인기 데이터는 캐시가 백그라운드에서 미리 갱신 (리프레시)</td><td>캐시 시스템, DB, 백그라운드 작업</td><td>캐시 미스 지연 최소화, 인기 데이터 신선도 유지</td><td>실시간 인기 게시글, 주가, 뉴스 등</td></tr></tbody></table><h4 id=쓰기-정책-write-policies>쓰기 정책 (Write Policies)<a hidden class=anchor aria-hidden=true href=#쓰기-정책-write-policies>#</a></h4><p>데이터가 변경 (쓰기) 될 때 캐시와 원본 저장소 간의 데이터 동기화 방식을 정의하는 전략이다.</p><table><thead><tr><th>정책 유형</th><th>정의</th><th>구성</th><th>목적</th><th>활용 예시</th></tr></thead><tbody><tr><td><strong>Write-Through</strong></td><td>캐시와 원본 저장소에 동시에 데이터 쓰기</td><td>캐시 + 동기적 DB 쓰기</td><td>데이터 일관성 보장</td><td>사용자 정보 업데이트, 주문 처리 등 일관성이 중요한 경우</td></tr><tr><td><strong>Write-Back</strong></td><td>캐시에 먼저 쓰고, 나중에 원본 저장소에 비동기로 반영</td><td>캐시 + 비동기 쓰기 큐</td><td>쓰기 성능 최적화</td><td>로그 수집, 통계 업데이트 등 실시간 쓰기 신뢰도가 덜 중요한 경우</td></tr><tr><td><strong>Write-Around</strong></td><td>원본 저장소에만 쓰고, 캐시는 읽기 시에만 갱신</td><td>직접 DB 쓰기 + 필요 시 캐시 로딩</td><td>일회성 데이터 쓰기 효율성</td><td>게시글 작성, 한 번만 읽히는 이벤트성 데이터 등</td></tr></tbody></table><h4 id=캐시-무효화-전략-cache-invalidation-strategies>캐시 무효화 전략 (Cache Invalidation Strategies)<a hidden class=anchor aria-hidden=true href=#캐시-무효화-전략-cache-invalidation-strategies>#</a></h4><p>원본 데이터가 변경될 경우, 캐시에 저장된 오래된 데이터를 언제 어떻게 삭제/갱신할지를 결정하는 전략이다.</p><table><thead><tr><th>전략 유형</th><th>정의</th><th>구성</th><th>목적</th><th>활용 예시</th></tr></thead><tbody><tr><td><strong>TTL 기반</strong></td><td>설정한 시간 경과 후 자동으로 캐시 무효화</td><td>캐시 엔트리 + 만료 시간 설정</td><td>자동화된 신선도 유지</td><td>뉴스, 환율, 주가 등의 주기적 데이터</td></tr><tr><td><strong>이벤트 기반</strong></td><td>데이터 변경 이벤트 시 관련 캐시 즉시 무효화</td><td>DB 트리거/이벤트 브로커 + 무효화 로직</td><td>실시간 일관성 확보</td><td>게시판 댓글 수정, 주문 상태 변경</td></tr><tr><td><strong>패턴 기반</strong></td><td>특정 키 패턴에 해당하는 캐시 일괄 무효화</td><td>키 패턴 + 일괄 삭제 처리</td><td>대규모 업데이트에 대한 효율적 관리</td><td>상품 카테고리 일괄 변경 시 관련 상품 캐시 삭제 등</td></tr></tbody></table><h4 id=캐시-교체-알고리즘-cache-replacement-algorithms>캐시 교체 알고리즘 (Cache Replacement Algorithms)<a hidden class=anchor aria-hidden=true href=#캐시-교체-알고리즘-cache-replacement-algorithms>#</a></h4><p>캐시 공간이 부족할 때 어떤 데이터를 제거할지 결정하는 알고리즘이다.</p><table><thead><tr><th>알고리즘 유형</th><th>정의</th><th>구성</th><th>목적</th><th>활용 예시</th></tr></thead><tbody><tr><td><strong>LRU</strong> (Least Recently Used)</td><td>가장 오랫동안 사용되지 않은 항목 제거</td><td>접근 시간 추적 리스트 or 큐</td><td>시간적 지역성 최적화</td><td>Redis 기본 설정, 웹 세션 캐시 등</td></tr><tr><td><strong>LFU</strong> (Least Frequently Used)</td><td>가장 적게 사용된 항목 제거</td><td>접근 횟수 카운터</td><td>사용 빈도 기반 효율적 관리</td><td>뉴스 인기글, 추천 시스템 등</td></tr><tr><td><strong>FIFO</strong> (First In First Out)</td><td>가장 먼저 들어온 항목 제거</td><td>단순 큐</td><td>단순 구현</td><td>제한된 캐시에서 빠른 처리 우선 시</td></tr></tbody></table><h4 id=분산-캐싱-기법-distributed-caching-techniques>분산 캐싱 기법 (Distributed Caching Techniques)<a hidden class=anchor aria-hidden=true href=#분산-캐싱-기법-distributed-caching-techniques>#</a></h4><p>여러 서버 또는 노드에서 캐시를 공유하거나 분산하여 저장하는 기법이다.</p><table><thead><tr><th>기법 유형</th><th>정의</th><th>구성</th><th>목적</th><th>활용 예시</th></tr></thead><tbody><tr><td><strong>샤딩</strong> (Sharding)</td><td>데이터를 샤드 (노드) 에 분산 저장</td><td>샤딩 키 + 해시 함수 + 다중 노드</td><td>수평 확장성 확보, 성능 분산</td><td>Redis Cluster, Memcached 분산 구성</td></tr><tr><td><strong>복제</strong> (Replication)</td><td>동일 데이터를 여러 노드에 복제</td><td>마스터 - 슬레이브 구조 or 멀티 마스터</td><td>고가용성, 읽기 성능 개선</td><td>세션 캐시, 읽기 많은 데이터 캐시</td></tr><tr><td><strong>일관성 해시</strong> (Consistent Hashing)</td><td>노드 수 변경 시 데이터 재분배 최소화</td><td>해시 링 구조 + 가상 노드 설정</td><td>노드 추가/삭제 시 캐시 미스 최소화</td><td>DHT 기반 분산 캐시, CDN 콘텐츠 해시 배분</td></tr></tbody></table><h3 id=장점과-단점>장점과 단점<a hidden class=anchor aria-hidden=true href=#장점과-단점>#</a></h3><table><thead><tr><th>구분</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>✅ 장점</td><td>성능 향상</td><td>데이터 접근 지연 최소화, 응답 속도 개선</td></tr><tr><td></td><td>부하 감소</td><td>백엔드, DB, 네트워크 트래픽 감소</td></tr><tr><td></td><td>비용 절감</td><td>리소스 사용 최적화, 서버 비용 절감</td></tr><tr><td></td><td>확장성</td><td>대규모 트래픽 처리 용이</td></tr><tr><td></td><td>대역폭 절약</td><td>네트워크 통신량을 줄여 대역폭 사용을 최적화하고 비용을 절감합니다</td></tr><tr><td></td><td>사용자 경험 향상</td><td>빠른 응답 시간을 통해 최종 사용자 경험을 개선합니다</td></tr><tr><td>⚠ 단점</td><td>일관성 문제</td><td>원본 데이터와 불일치 가능성</td></tr><tr><td></td><td>캐시 미스</td><td>미스 시 오히려 오버헤드 발생</td></tr><tr><td></td><td>관리 복잡성</td><td>무효화, 동기화, 교체 정책 관리 필요</td></tr><tr><td></td><td>메모리 비용</td><td>고성능 캐시 저장소 비용 부담</td></tr><tr><td></td><td>캐시 오염 (Cache Pollution)</td><td>자주 사용되지 않는 데이터가 캐시를 차지하면 캐시 효율성이 감소합니다</td></tr><tr><td></td><td>디버깅 어려움</td><td>캐시 관련 문제는 간헐적으로 발생하고 재현하기 어려워 디버깅이 복잡합니다</td></tr></tbody></table><h3 id=도전-과제-2>도전 과제<a hidden class=anchor aria-hidden=true href=#도전-과제-2>#</a></h3><ol><li><strong>데이터 일관성 관리</strong>: 원본 데이터와 캐시 데이터 간의 일관성을 유지하는 것은 복잡한 문제이다.</li><li><strong>캐시 크기 최적화</strong>: 너무 작은 캐시는 효과가 낮고, 너무 큰 캐시는 리소스 낭비를 초래한다.</li><li><strong>캐시 무효화 타이밍</strong>: 언제 캐시를 무효화할지 결정하는 것은 성능과 데이터 신선도 사이의 균형이 필요하다.</li><li><strong>콜드 스타트 문제</strong>: 캐시가 비어있을 때 (콜드 스타트) 성능 저하가 발생할 수 있다.</li><li><strong>분산 캐시 일관성</strong>: 여러 노드에 분산된 캐시의 일관성을 유지하는 것은 어려운 과제이다.</li><li><strong>장애 복구</strong>: 캐시 시스템 장애 시 빠른 복구와 데이터 손실 최소화가 필요하다.</li><li><strong>모니터링 및 디버깅</strong>: 캐시 관련 이슈는 추적하고 디버깅하기 복잡하다.</li></ol><h3 id=실무-적용-예시>실무 적용 예시<a hidden class=anchor aria-hidden=true href=#실무-적용-예시>#</a></h3><table><thead><tr><th>응용 분야</th><th>캐싱 유형</th><th>구현 방법</th><th>기대 효과</th></tr></thead><tbody><tr><td>웹 애플리케이션</td><td>페이지 캐싱</td><td>Nginx, Varnish 등의 리버스 프록시 활용</td><td>페이지 로드 시간 단축, 서버 부하 감소</td></tr><tr><td></td><td>세션 캐싱</td><td>Redis 를 사용한 분산 세션 저장소 구현</td><td>로그인 상태 유지, 서버 간 세션 공유</td></tr><tr><td></td><td>API 응답 캐싱</td><td>HTTP 응답 헤더 활용 및 CDN 적용</td><td>API 서버 부하 감소, 응답 시간 개선</td></tr><tr><td>데이터베이스</td><td>쿼리 결과 캐싱</td><td>Redis/Memcached 를 사용한 쿼리 결과 저장</td><td>반복 쿼리 성능 향상, DB 부하 감소</td></tr><tr><td></td><td>ORM 2 차 캐싱</td><td>Hibernate 2 차 캐시, JPA 캐싱 활용</td><td>객체 매핑 오버헤드 감소, 조회 성능 향상</td></tr><tr><td></td><td>커넥션 풀링</td><td>HikariCP, DBCP 등의 커넥션 풀 사용</td><td>DB 연결 비용 감소, 처리량 증가</td></tr><tr><td>마이크로서비스</td><td>서비스 간 데이터 캐싱</td><td>공유 Redis 클러스터 구현</td><td>서비스 간 통신 감소, 응답 시간 단축</td></tr><tr><td></td><td>설정 정보 캐싱</td><td>Spring Cloud Config + Redis 캐싱</td><td>설정 로딩 시간 단축, 중앙 설정 관리</td></tr><tr><td></td><td>서킷 브레이커 결과 캐싱</td><td>Hystrix, Resilience4j 캐시 활용</td><td>장애 전파 방지, 시스템 안정성 향상</td></tr><tr><td>모바일 앱</td><td>오프라인 캐싱</td><td>로컬 SQLite DB, Room 라이브러리 활용</td><td>오프라인 접근성 향상, 네트워크 사용 최적화</td></tr><tr><td></td><td>이미지 캐싱</td><td>Glide, Picasso 등의 이미지 로딩 라이브러리</td><td>이미지 로딩 속도 향상, 메모리 사용 최적화</td></tr><tr><td></td><td>API 응답 캐싱</td><td>Retrofit 캐싱, OkHttp 캐시 활용</td><td>네트워크 요청 감소, 배터리 사용량 최적화</td></tr><tr><td>인프라</td><td>CDN</td><td>AWS CloudFront, Cloudflare 등 활용</td><td>글로벌 콘텐츠 전송 최적화, 서버 부하 감소</td></tr><tr><td></td><td>DNS 캐싱</td><td>로컬 DNS 캐시, DNS TTL 최적화</td><td>DNS 조회 시간 단축, 연결 지연 감소</td></tr><tr><td></td><td>로드 밸런서 캐싱</td><td>AWS ELB, Nginx 의 캐싱 기능 활용</td><td>트래픽 분산 효율화, 백엔드 보호</td></tr></tbody></table><h3 id=활용-사례-2>활용 사례<a hidden class=anchor aria-hidden=true href=#활용-사례-2>#</a></h3><h4 id=사례-1>사례 1<a hidden class=anchor aria-hidden=true href=#사례-1>#</a></h4><p><strong>시나리오</strong>: 대규모 전자상거래 플랫폼에서 상품 카탈로그, 사용자 세션, 장바구니 데이터 등을 효율적으로 관리하기 위한 다중 계층 캐싱 시스템을 구현했다.</p><p><strong>시스템 구성</strong>:</p><table><thead><tr><th>계층</th><th>구성 요소</th><th>주요 캐시 대상</th><th>특징 및 역할</th></tr></thead><tbody><tr><td><strong>클라이언트 측 캐싱</strong></td><td>- 브라우저 캐시<br>- 로컬 스토리지</td><td>정적 리소스 (이미지, CSS, JS)<br>사용자 설정 등</td><td>네트워크 요청 감소, 오프라인 지원, UX 개선</td></tr><tr><td><strong>CDN 계층</strong></td><td>- Cloudflare, Akamai 등<br>- 에지 서버</td><td>정적 콘텐츠 (HTML, JS, 이미지)<br>API 응답</td><td>지리적 분산 캐시, 전역 사용자 대상 콘텐츠 전송 최적화</td></tr><tr><td><strong>애플리케이션 서버 캐싱</strong></td><td>- 로컬 메모리 캐시 (Guava 등)<br>- 분산 세션 캐시 (Redis)</td><td>코드 레벨 상수, 참조 테이블, 사용자 세션 등</td><td>빠른 응답 제공, 서버 간 공유 캐시로 일관성 유지</td></tr><tr><td><strong>데이터 서비스 계층</strong></td><td>- Redis 클러스터<br>- 이벤트 기반 캐시 무효화 시스템</td><td>상품 목록, 장바구니, 사용자 데이터, 인증 토큰 등</td><td>중앙 집중 캐시, 이벤트 기반 무효화로 실시간 데이터 정합성</td></tr><tr><td><strong>데이터베이스 캐싱</strong></td><td>- DB 쿼리 캐시<br>- 커넥션 풀 (HikariCP, pgBouncer 등)</td><td>자주 조회되는 SELECT 결과, DB 연결</td><td>데이터 접근 지연 최소화, 쿼리 부하 분산, 연결 재사용</td></tr></tbody></table><p><strong>시스템 구성 다이어그램</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1>1</a>
</span><span class=lnt id=hl-26-2><a class=lnlinks href=#hl-26-2>2</a>
</span><span class=lnt id=hl-26-3><a class=lnlinks href=#hl-26-3>3</a>
</span><span class=lnt id=hl-26-4><a class=lnlinks href=#hl-26-4>4</a>
</span><span class=lnt id=hl-26-5><a class=lnlinks href=#hl-26-5>5</a>
</span><span class=lnt id=hl-26-6><a class=lnlinks href=#hl-26-6>6</a>
</span><span class=lnt id=hl-26-7><a class=lnlinks href=#hl-26-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[사용자] &lt;--&gt; [CDN/Cloudflare] &lt;--&gt; [로드 밸런서] &lt;--&gt; [애플리케이션 서버 + 로컬 캐시]
</span></span><span class=line><span class=cl>                                                              |
</span></span><span class=line><span class=cl>                                                              v
</span></span><span class=line><span class=cl>                                                       [Redis 클러스터]
</span></span><span class=line><span class=cl>                                                              |
</span></span><span class=line><span class=cl>                                                              v
</span></span><span class=line><span class=cl>                                                    [데이터베이스 + 쿼리 캐시]
</span></span></code></pre></td></tr></table></div></div><p><strong>워크플로우</strong>:</p><ol><li>사용자가 상품 카탈로그 페이지 요청</li><li>브라우저 캐시 확인 → 캐시 미스</li><li>CDN 캐시 확인 → 캐시 미스</li><li>요청이 애플리케이션 서버로 전달</li><li>애플리케이션 서버의 로컬 캐시 확인 → 캐시 미스</li><li>Redis 분산 캐시 확인<ul><li>카탈로그 데이터 캐시 히트: Redis 에서 데이터 검색</li><li>사용자 개인화 데이터 캐시 미스: 데이터베이스 쿼리 실행</li></ul></li><li>데이터베이스에서 누락된 데이터 검색</li><li>결과를 Redis 캐시에 저장</li><li>응답 생성 및 클라이언트 반환</li><li>CDN 에 응답 캐싱 (적절한 Cache-Control 헤더 설정)</li><li>브라우저에 응답 캐싱</li></ol><h4 id=redis-기반-애플리케이션-캐시-구성>Redis 기반 애플리케이션 캐시 구성<a hidden class=anchor aria-hidden=true href=#redis-기반-애플리케이션-캐시-구성>#</a></h4><p><strong>시나리오</strong>: 로그인 후 사용자 프로필 정보를 빠르게 응답하기 위해 캐싱</p><p><strong>구성 요소</strong>:</p><ul><li>클라이언트: 사용자 요청</li><li>웹 서버 / 백엔드 애플리케이션: Node.js, Spring 등</li><li>Redis: 인메모리 캐시</li><li>RDBMS: PostgreSQL, MySQL</li></ul><p><strong>구성도</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-27-1><a class=lnlinks href=#hl-27-1>1</a>
</span><span class=lnt id=hl-27-2><a class=lnlinks href=#hl-27-2>2</a>
</span><span class=lnt id=hl-27-3><a class=lnlinks href=#hl-27-3>3</a>
</span><span class=lnt id=hl-27-4><a class=lnlinks href=#hl-27-4>4</a>
</span><span class=lnt id=hl-27-5><a class=lnlinks href=#hl-27-5>5</a>
</span><span class=lnt id=hl-27-6><a class=lnlinks href=#hl-27-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Client
</span></span><span class=line><span class=cl>   ↓
</span></span><span class=line><span class=cl>[Web Server] ←→ [Redis Cache] ←→ [Database]
</span></span><span class=line><span class=cl>   │               ↑               ↑
</span></span><span class=line><span class=cl>   └───────────────┴───────────────┘
</span></span><span class=line><span class=cl>     (캐시 미스 시 DB 조회 후 캐시에 저장)
</span></span></code></pre></td></tr></table></div></div><p><strong>운영 전략</strong>:</p><ul><li>캐시 전략: <strong>Cache-Aside</strong></li><li>TTL 설정: 사용자 정보는 1 시간 유지</li><li>키 전략: <code>user:{id}:profile</code></li></ul><h4 id=memcached-기반-세션-캐시-구성>Memcached 기반 세션 캐시 구성<a hidden class=anchor aria-hidden=true href=#memcached-기반-세션-캐시-구성>#</a></h4><p><strong>시나리오</strong>: 대용량 사용자 세션 데이터를 메모리에 저장해 빠른 인증 처리</p><p><strong>구성 요소</strong>:</p><ul><li>클라이언트: 웹브라우저</li><li>Application Server: Django, Express.js</li><li>Memcached: 세션 정보 저장소</li><li>세션 미스 시: 새 세션 생성</li></ul><p><strong>구성도</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-28-1><a class=lnlinks href=#hl-28-1>1</a>
</span><span class=lnt id=hl-28-2><a class=lnlinks href=#hl-28-2>2</a>
</span><span class=lnt id=hl-28-3><a class=lnlinks href=#hl-28-3>3</a>
</span><span class=lnt id=hl-28-4><a class=lnlinks href=#hl-28-4>4</a>
</span><span class=lnt id=hl-28-5><a class=lnlinks href=#hl-28-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Client
</span></span><span class=line><span class=cl>   ↓
</span></span><span class=line><span class=cl>[App Server] ←→ [Memcached]
</span></span><span class=line><span class=cl>   │
</span></span><span class=line><span class=cl>   └─(세션 만료 or 없음)→ 새 세션 생성
</span></span></code></pre></td></tr></table></div></div><p><strong>운영 전략</strong>:</p><ul><li>캐시 전략: <strong>Write-Through</strong></li><li>TTL 설정: 세션 수명 30 분</li><li>키 전략: <code>session:{session_id}</code></li></ul><h4 id=cdn-content-delivery-network-캐시-구성>CDN (Content Delivery Network) 캐시 구성<a hidden class=anchor aria-hidden=true href=#cdn-content-delivery-network-캐시-구성>#</a></h4><p><strong>시나리오</strong>: 정적 콘텐츠 (이미지, JS, CSS) 를 빠르게 전송</p><p><strong>구성 요소</strong>:</p><ul><li>사용자</li><li>CDN 엣지 서버 (Cloudflare, Akamai, AWS CloudFront)</li><li>오리진 서버 (웹 서버)</li></ul><p><strong>구성도</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-29-1><a class=lnlinks href=#hl-29-1>1</a>
</span><span class=lnt id=hl-29-2><a class=lnlinks href=#hl-29-2>2</a>
</span><span class=lnt id=hl-29-3><a class=lnlinks href=#hl-29-3>3</a>
</span><span class=lnt id=hl-29-4><a class=lnlinks href=#hl-29-4>4</a>
</span><span class=lnt id=hl-29-5><a class=lnlinks href=#hl-29-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>[User]
</span></span><span class=line><span class=cl>  ↓
</span></span><span class=line><span class=cl>[CDN Edge Node] ←→ [Origin Server]
</span></span><span class=line><span class=cl>  ↑
</span></span><span class=line><span class=cl>  └── 캐시 만료 시 원본 요청 후 캐시 저장
</span></span></code></pre></td></tr></table></div></div><p><strong>운영 전략</strong>:</p><ul><li>TTL: 정적 자산 7 일 캐싱</li><li>무효화 방식: 버전 쿼리 (<code>?v=2</code>) 또는 Purge API</li><li>캐시 정책: <strong>Cache-Control: public, max-age=604800</strong></li></ul><h3 id=실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점-2>실무에서 효과적으로 적용하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#실무에서-효과적으로-적용하기-위한-고려사항-및-주의할-점-2>#</a></h3><table><thead><tr><th>고려사항</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>캐시 크기 설정</td><td>너무 작으면 효과가 감소하고, 너무 크면 리소스 낭비</td><td>- 캐싱 대상 데이터의 크기와 접근 패턴을 분석하여 적절한 크기 설정. 모니터링을 통해 히트 비율을 80% 이상 유지하도록 조정<br>- LRU, LFU 등의 적절한 교체 정책과 함께 메모리 용량 설정 필요</td></tr><tr><td>만료 정책</td><td>TTL 이 너무 짧으면 캐시 효과 감소, 너무 길면 데이터 신선도 문제</td><td>데이터 변경 빈도에 따라 차등적인 TTL 설정. 중요 데이터는 짧게 (몇 분<del>몇 시간), 거의 변경되지 않는 데이터는 길게 (몇 일</del>몇 주) 설정</td></tr><tr><td>캐시 키 설계</td><td>너무 일반적이면 히트율 감소, 너무 구체적이면 중복 데이터</td><td>적절한 수준의 키 세분화 설계. 필요한 매개변수만 포함하고 불필요한 정보는 제외</td></tr><tr><td>캐시 일관성</td><td>원본 데이터와 캐시 데이터 간 불일치 발생 가능</td><td>이벤트 기반 캐시 무효화 구현. 데이터 변경 시 관련 캐시 항목 즉시 무효화</td></tr><tr><td>콜드 스타트</td><td>캐시가 비어있을 때 성능 저하 발생</td><td>캐시 워밍업 전략 구현. 중요 데이터는 시스템 시작 시 미리 로드</td></tr><tr><td>장애 내구성</td><td>캐시 시스템 장애 시 서비스 중단 위험</td><td>캐시 장애를 우아하게 처리하는 대체 경로 (fallback) 구현. 캐시 미스는 항상 허용 가능한 시나리오로 설계</td></tr><tr><td>모니터링</td><td>캐시 성능 및 문제 파악 어려움</td><td>히트율, 지연 시간, 메모리 사용량 등을 모니터링하는 대시보드 구축. 임계값 기반 알림 설정</td></tr><tr><td>캐시 오염</td><td>드물게 사용되는 데이터가 캐시 공간 차지</td><td>적절한 캐시 교체 정책 선택 (보통 LRU 또는 LFU). 정기적인 캐시 분석을 통해 최적화</td></tr><tr><td>멀티 테넌시</td><td>단일 캐시 시스템을 여러 테넌트가 공유할 때 성능과 격리 문제</td><td>테넌트별 캐시 키 네임스페이스 구현. 필요 시 테넌트별 캐시 할당량 설정</td></tr><tr><td>캐시 폭발 (Cache Stampede)</td><td>동시에 많은 캐시 미스가 발생하여 원본 시스템에 과부하</td><td>캐시 락킹 또는 슬라이딩 윈도우 재생성 전략 구현. 첫 번째 요청만 원본 소스에 접근하고 나머지는 대기</td></tr><tr><td>보안</td><td>캐시 데이터 노출 위험 존재</td><td>민감 정보는 캐싱 대상에서 제외하거나 암호화 저장</td></tr><tr><td>데이터 패턴 분석</td><td>무작위 데이터 캐싱은 효과가 떨어짐</td><td>실제 사용 패턴 기반으로 캐시 대상 선정 (Hot Path 분석 등)</td></tr></tbody></table><h3 id=최적화하기-위한-고려사항-및-주의할-점-2>최적화하기 위한 고려사항 및 주의할 점<a hidden class=anchor aria-hidden=true href=#최적화하기-위한-고려사항-및-주의할-점-2>#</a></h3><table><thead><tr><th>고려사항</th><th>설명</th><th>권장사항</th></tr></thead><tbody><tr><td>캐시 적중률 최적화</td><td>캐시 적중률이 낮으면 캐싱의 이점 감소</td><td>사용 패턴 분석을 통해 자주 접근하는 데이터 식별. 80% 이상의 적중률을 목표로 설정. 프리페칭 및 지능형 캐싱 전략 적용</td></tr><tr><td>직렬화/역직렬화 비용</td><td>객체 변환 과정에서 성능 오버헤드 발생</td><td>효율적인 직렬화 형식 사용 (JSON 대신 Protocol Buffers, MessagePack 등). 필요한 경우에만 부분 역직렬화 구현</td></tr><tr><td>네트워크 지연</td><td>분산 캐시 접근 시 네트워크 지연 발생</td><td>캐시 서버를 애플리케이션 서버와 지리적으로 가깝게 배치. 연결 풀링 및 파이프라이닝 구현. 비동기 캐시 작업 활용</td></tr><tr><td>메모리 단편화</td><td>캐시 메모리의 비효율적 사용</td><td>적절한 메모리 할당자 선택. Redis 의 경우 maxmemory-policy 최적화. 주기적인 메모리 모니터링 및 조정</td></tr><tr><td>캐시 계층화</td><td>서로 다른 캐시 계층 간의 조정 복잡성</td><td>계층적 캐싱 전략 정의. 각 계층의 역할과 TTL 을 명확히 구분. L1(초 단위) > L2(분 단위) > L3(시간 단위) 계층화</td></tr><tr><td>쓰기 성능</td><td>쓰기 작업이 많은 워크로드에서 병목 현상</td><td>상황에 맞는 쓰기 정책 선택. 쓰기가 많은 경우 Write-Behind 캐시 고려. 배치 업데이트 구현</td></tr><tr><td>핫스팟 키</td><td>특정 캐시 키에 대한 과도한 접근</td><td>인기 키 복제 또는 샤딩. 접근 패턴에 따라 키별 TTL 차등화. 핫스팟 키 모니터링 및 알림 설정</td></tr><tr><td>대용량 객체</td><td>대용량 객체 캐싱 시 메모리 낭비</td><td>대용량 객체 분할 저장. 필요한 부분만 선택적으로 캐싱. 압축 알고리즘 적용 (LZ4, Snappy 등)</td></tr><tr><td>캐시 워밍업 시간</td><td>콜드 캐시에서 최적 성능까지 시간 소요</td><td>계획된 워밍업 전략 구현. 백그라운드 스레드를 통한 점진적 프리로딩. 트래픽 패턴 분석을 통한 지능형 워밍업</td></tr><tr><td>분산 캐시 동기화</td><td>다중 노드 환경에서 일관성 유지 어려움</td><td>실시간 복제 설정. 이벤트 기반 무효화 메커니즘 구현. 최종 일관성 허용 가능성 검토</td></tr><tr><td>모니터링 및 알림</td><td>캐시의 상태를 실시간으로 확인해야 문제를 빠르게 인지</td><td>Prometheus, Grafana, Datadog 등으로 TTL, Hit/Miss 비율, 메모리 사용량 모니터링</td></tr><tr><td>캐시 키 관리</td><td>키 충돌, 메모리 낭비 등 가능</td><td>명확하고 고유한 키 체계 설계 (예: <code>user:123:profile</code>)</td></tr><tr><td>데이터 크기 제어</td><td>과도한 데이터 캐싱 시 성능 저하 발생</td><td>캐시 대상의 데이터 크기 제한 및 필요 정보만 저장</td></tr></tbody></table><h3 id=캐시-적중률-cache-hit-ratio>캐시 적중률 (Cache Hit Ratio)<a hidden class=anchor aria-hidden=true href=#캐시-적중률-cache-hit-ratio>#</a></h3><p>캐시 적중률 (Cache Hit Ratio) 은 <strong>전체 요청 중 캐시에서 데이터를 성공적으로 반환한 비율</strong>을 나타낸다. 시스템의 성능 최적화와 캐시 전략을 평가할 때 가장 중요한 지표 중 하나이다.</p><p><strong>공식</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-30-1><a class=lnlinks href=#hl-30-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>캐시 적중률 (%) = (캐시 히트 수 / 전체 요청 수) × 100
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>캐시 히트 (Hit)</strong>: 요청한 데이터가 캐시에 존재하여 백엔드 접근 없이 응답된 경우</li><li><strong>캐시 미스 (Miss)</strong>: 요청한 데이터가 캐시에 존재하지 않아 백엔드에서 데이터를 가져온 경우</li><li><strong>전체 요청 수</strong> = 캐시 히트 수 + 캐시 미스 수</li></ul><h4 id=예시>예시<a hidden class=anchor aria-hidden=true href=#예시>#</a></h4><p><strong>시나리오</strong></p><ul><li>총 요청 수: 1,000 건</li><li>이 중 750 건은 캐시에서 처리 (캐시 히트), 나머지 250 건은 백엔드에서 조회 (캐시 미스)</li></ul><p><strong>계산식</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-31-1><a class=lnlinks href=#hl-31-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>캐시 적중률 = (750 / 1000) × 100 = 75%
</span></span></code></pre></td></tr></table></div></div><p>즉, 이 시스템의 캐시 적중률은 <strong>75%</strong> 이며, 이는 비교적 높은 수준이다.</p><h4 id=redis-로그-예시>Redis 로그 예시<a hidden class=anchor aria-hidden=true href=#redis-로그-예시>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-32-1><a class=lnlinks href=#hl-32-1>1</a>
</span><span class=lnt id=hl-32-2><a class=lnlinks href=#hl-32-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Redis INFO 명령 결과 예시</span>
</span></span><span class=line><span class=cl>redis-cli INFO stats
</span></span></code></pre></td></tr></table></div></div><p>출력:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-33-1><a class=lnlinks href=#hl-33-1>1</a>
</span><span class=lnt id=hl-33-2><a class=lnlinks href=#hl-33-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>keyspace_hits:950
</span></span><span class=line><span class=cl>keyspace_misses:50
</span></span></code></pre></td></tr></table></div></div><p><strong>계산</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-34-1><a class=lnlinks href=#hl-34-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>캐시 적중률 = (950 / (950 + 50)) × 100 = 95%
</span></span></code></pre></td></tr></table></div></div><p>Redis 에서는 위와 같이 <code>keyspace_hits</code> 와 <code>keyspace_misses</code> 를 통해 캐시 적중률을 직접 추산할 수 있다.</p><h5 id=grafanaprometheus-를-사용하는-경우-메트릭-기반>Grafana/Prometheus 를 사용하는 경우 (메트릭 기반)<a hidden class=anchor aria-hidden=true href=#grafanaprometheus-를-사용하는-경우-메트릭-기반>#</a></h5><p><strong>Prometheus 메트릭 예시 (Memcached/Redis 등)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-35-1><a class=lnlinks href=#hl-35-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-promql data-lang=promql><span class=line><span class=cl><span class=o>(</span><span class=kr>rate</span><span class=o>(</span><span class=nv>redis_keyspace_hits</span><span class=p>[</span><span class=s>1m</span><span class=p>]</span><span class=o>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=o>(</span><span class=kr>rate</span><span class=o>(</span><span class=nv>redis_keyspace_hits</span><span class=p>[</span><span class=s>1m</span><span class=p>]</span><span class=o>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=kr>rate</span><span class=o>(</span><span class=nv>redis_keyspace_misses</span><span class=p>[</span><span class=s>1m</span><span class=p>]</span><span class=o>)))</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>100</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>이 쿼리는 최근 1 분간의 요청 기준으로 캐시 적중률을 계산한다.</li><li>메트릭 이름은 사용 중인 Exporter 에 따라 다를 수 있다</li></ul><h5 id=캐시-적중률이-낮을-때-개선-전략>캐시 적중률이 낮을 때 개선 전략<a hidden class=anchor aria-hidden=true href=#캐시-적중률이-낮을-때-개선-전략>#</a></h5><table><thead><tr><th>원인</th><th>개선 방안</th></tr></thead><tbody><tr><td>너무 짧은 TTL (Time To Live)</td><td>적절한 TTL 로 캐시 유지 기간 확장</td></tr><tr><td>캐시 키 구성 불량</td><td>동적 파라미터 포함 시 키 정규화 처리</td></tr><tr><td>요청 패턴이 분산됨</td><td>LRU → LFU 알고리즘 전환 등 캐시 정책 재설정</td></tr><tr><td>자주 접근되지 않는 데이터 캐싱</td><td>Hot Data 위주로 캐싱, Cold Data 캐싱 제외</td></tr></tbody></table><h4 id=nginx-캐시-reverse-proxy-cache>Nginx 캐시 (Reverse Proxy Cache)<a hidden class=anchor aria-hidden=true href=#nginx-캐시-reverse-proxy-cache>#</a></h4><p><strong>Nginx Stub Status 모듈</strong> 또는 <strong>로그 기반 분석</strong>을 통해 계산</p><h5 id=로그-기반-accesslog>로그 기반 (access.log)<a hidden class=anchor aria-hidden=true href=#로그-기반-accesslog>#</a></h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-36-1><a class=lnlinks href=#hl-36-1>1</a>
</span><span class=lnt id=hl-36-2><a class=lnlinks href=#hl-36-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat access.log <span class=p>|</span> grep -c <span class=s1>&#39;HIT&#39;</span>  <span class=c1># 캐시 적중</span>
</span></span><span class=line><span class=cl>cat access.log <span class=p>|</span> grep -c <span class=s1>&#39;MISS&#39;</span> <span class=c1># 캐시 미스</span>
</span></span></code></pre></td></tr></table></div></div><p>또는 <code>log_format</code> 설정에 <code>$upstream_cache_status</code> 추가 후:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-37-1><a class=lnlinks href=#hl-37-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=line><span class=cl><span class=k>log_format</span> <span class=s>main</span> <span class=s>&#39;</span><span class=nv>$remote_addr</span> <span class=s>-</span> <span class=nv>$upstream_cache_status</span> <span class=s>-</span> <span class=nv>$request&#39;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>계산</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-38-1><a class=lnlinks href=#hl-38-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Hit Ratio = (HIT / (HIT + MISS + BYPASS + EXPIRED)) × 100
</span></span></code></pre></td></tr></table></div></div><h5 id=-최적화-전략>🛠 최적화 전략<a hidden class=anchor aria-hidden=true href=#-최적화-전략>#</a></h5><table><thead><tr><th>문제 원인</th><th>최적화 전략</th></tr></thead><tbody><tr><td>캐시 대상이 안 맞음 (POST, 쿼리 포함 요청)</td><td>정적 리소스 또는 GET 요청에 대해서만 캐싱 허용</td></tr><tr><td>캐시 만료 설정 미흡</td><td><code>proxy_cache_valid</code> 지시어로 TTL 명확히 설정</td></tr><tr><td>조건부 요청 미처리</td><td><code>If-Modified-Since</code>, <code>ETag</code> 활용</td></tr><tr><td>정적 파일 캐싱 누락</td><td><code>location</code> 별로 <code>proxy_cache</code> 또는 <code>expires</code> 지시어 분리 적용</td></tr><tr><td>캐시 무효화 전략 부족</td><td>버전 관리 기반 URL 적용 (e.g. <code>/assets/main.js</code>)</td></tr></tbody></table><h4 id=cdn-content-delivery-network>CDN (Content Delivery Network)<a hidden class=anchor aria-hidden=true href=#cdn-content-delivery-network>#</a></h4><p><strong>CDN Provider 로그 or 콘솔에서 제공</strong></p><ul><li><strong>Cloudflare</strong>: Cache Hit Ratio</li><li><strong>AWS CloudFront</strong>: <code>x-cache</code> 헤더 (<code>Hit from cloudfront</code>, <code>Miss from cloudfront</code>)</li><li><strong>Akamai</strong>: EdgeHitRatio, MidgressHitRatio 등</li></ul><p><strong>계산</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-39-1><a class=lnlinks href=#hl-39-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Cache Hit Ratio = (Edge Hits / Total Requests) × 100
</span></span></code></pre></td></tr></table></div></div><h5 id=최적화-전략>최적화 전략<a hidden class=anchor aria-hidden=true href=#최적화-전략>#</a></h5><table><thead><tr><th>문제 원인</th><th>최적화 전략</th></tr></thead><tbody><tr><td>캐시 무효화 너무 잦음</td><td>Immutable 정책 적용 (<code>Cache-Control: max-age=31536000, immutable</code>)</td></tr><tr><td>쿼리스트링별 캐시 불가</td><td>CDN 캐시 설정에서 쿼리스트링 무시 or 정규화 설정 적용</td></tr><tr><td>요청 헤더 조건 과다</td><td><code>Vary</code> 헤더 최소화 (<code>Accept-Encoding</code> 만 사용 등)</td></tr><tr><td>오리진 TTL 설정 미흡</td><td><code>Cache-Control</code>, <code>Expires</code> 헤더를 명확하게 지정</td></tr><tr><td>HTTP → HTTPS 이중 요청</td><td>리다이렉션 캐싱 전략 설정 or HTTPS Only 정책 적용</td></tr></tbody></table><h4 id=application-layer-cache-예-pythondjango-nodejs-java-등>Application Layer Cache (예: Python/Django, Node.js, Java 등)<a hidden class=anchor aria-hidden=true href=#application-layer-cache-예-pythondjango-nodejs-java-등>#</a></h4><p><strong>애플리케이션 로그 또는 미들웨어 계층에서 직접 수집</strong></p><p>예시: Python (Flask/Redis 조합)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-40-1><a class=lnlinks href=#hl-40-1>1</a>
</span><span class=lnt id=hl-40-2><a class=lnlinks href=#hl-40-2>2</a>
</span><span class=lnt id=hl-40-3><a class=lnlinks href=#hl-40-3>3</a>
</span><span class=lnt id=hl-40-4><a class=lnlinks href=#hl-40-4>4</a>
</span><span class=lnt id=hl-40-5><a class=lnlinks href=#hl-40-5>5</a>
</span><span class=lnt id=hl-40-6><a class=lnlinks href=#hl-40-6>6</a>
</span><span class=lnt id=hl-40-7><a class=lnlinks href=#hl-40-7>7</a>
</span><span class=lnt id=hl-40-8><a class=lnlinks href=#hl-40-8>8</a>
</span><span class=lnt id=hl-40-9><a class=lnlinks href=#hl-40-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>cache_hit</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>cache_miss</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>redis</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>cache_hit</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>cache_miss</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>hit_ratio</span> <span class=o>=</span> <span class=n>cache_hit</span> <span class=o>/</span> <span class=p>(</span><span class=n>cache_hit</span> <span class=o>+</span> <span class=n>cache_miss</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=최적화-전략-1>최적화 전략<a hidden class=anchor aria-hidden=true href=#최적화-전략-1>#</a></h5><table><thead><tr><th>문제 원인</th><th>최적화 전략</th></tr></thead><tbody><tr><td>TTL 이 짧거나 무한 없음</td><td>TTL 적절 설정, Lazy Expiration 도입</td></tr><tr><td>API 별 캐시 전략 미설정</td><td>요청 경로/파라미터 기반의 캐시 스코프 분리 (<code>cache_key</code>)</td></tr><tr><td>데이터 일관성 이슈</td><td>Write-Through 또는 Write-Behind 전략 적용</td></tr><tr><td>복잡한 캐시 무효화</td><td><code>Tag-based Invalidation</code> 또는 버전 기반 전략 적용</td></tr><tr><td>불필요한 캐시 사용</td><td>조회 빈도 낮은 리소스는 캐시에서 제외</td></tr></tbody></table><h3 id=캐싱-실패-대응-전략>캐싱 실패 대응 전략<a hidden class=anchor aria-hidden=true href=#캐싱-실패-대응-전략>#</a></h3><ul><li>캐시 서버 장애 발생 시, 백엔드나 데이터베이스에 직접 요청이 몰려 다운 가능</li><li><strong>해결법</strong>:<ul><li>Circuit Breaker 로 캐시 접근 실패 감지</li><li>캐시 서버를 클러스터로 구성</li><li>Fallback 로직과 함께 Cache Stampede(동시 미스) 방지 로직 도입</li></ul></li></ul><h4 id=동시-미스-cache-stampede-cache-thundering-herd>동시 미스 (Cache Stampede, Cache Thundering Herd)<a hidden class=anchor aria-hidden=true href=#동시-미스-cache-stampede-cache-thundering-herd>#</a></h4><p>캐시 항목이 만료되었거나 아직 적재되지 않은 상황에서, <strong>다수의 요청이 동시에 원본 데이터 소스로 쏠려</strong> 백엔드 (예: DB, API) 에 부하를 주는 현상을 말한다. 예를 들어, 인기 상품 정보를 캐시하고 있다가 TTL 만료 순간 수천 개의 요청이 동시에 캐시 미스를 발생시키면, 모든 요청이 DB 에 쿼리를 날려 <strong>서버 과부하 → 장애로 이어질 수 있다</strong>.</p><p><strong>방지 로직 및 전략</strong></p><table><thead><tr><th>전략</th><th>설명</th><th>예시 또는 기술 적용 방식</th></tr></thead><tbody><tr><td><strong>Mutex Lock</strong> (Mutual Exclusion)</td><td>최초 한 요청만 DB 에서 데이터를 가져오고, 나머지는 대기하거나 실패 처리</td><td>Redis <code>SETNX</code> 를 사용해 락 획득 후 캐시 로딩</td></tr><tr><td><strong>Request Coalescing</strong></td><td>첫 번째 요청이 데이터를 가져오고, 나머지 요청은 해당 결과를 공유</td><td>Go / Node.js 에서 Promise 공유로 구현</td></tr><tr><td><strong>Early Refresh / Pre-warming</strong></td><td>TTL 이 만료되기 전에 백그라운드에서 미리 갱신</td><td>Refresh-Ahead 캐시 전략</td></tr><tr><td><strong>Stale-While-Revalidate</strong></td><td>TTL 이 만료된 데이터를 응답하고, 백그라운드에서 최신화</td><td>Fastly, Varnish, Cloudflare 에서 기본 지원</td></tr><tr><td><strong>Exponential Backoff + Retry</strong></td><td>캐시 미스 시 클라이언트가 지연 재시도하여 부하를 분산</td><td>클라이언트 또는 프록시에서 재시도 전략 설정</td></tr><tr><td><strong>Randomized TTL (Jitter)</strong></td><td>동일 시점에 TTL 만료되는 것을 방지하기 위해 캐시 만료시간을 랜덤하게 설정</td><td>TTL = 300s + random(0~60s) 식 적용</td></tr></tbody></table><p><strong>Redis 기반 Mutex 예시 (Python)</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-41-1><a class=lnlinks href=#hl-41-1> 1</a>
</span><span class=lnt id=hl-41-2><a class=lnlinks href=#hl-41-2> 2</a>
</span><span class=lnt id=hl-41-3><a class=lnlinks href=#hl-41-3> 3</a>
</span><span class=lnt id=hl-41-4><a class=lnlinks href=#hl-41-4> 4</a>
</span><span class=lnt id=hl-41-5><a class=lnlinks href=#hl-41-5> 5</a>
</span><span class=lnt id=hl-41-6><a class=lnlinks href=#hl-41-6> 6</a>
</span><span class=lnt id=hl-41-7><a class=lnlinks href=#hl-41-7> 7</a>
</span><span class=lnt id=hl-41-8><a class=lnlinks href=#hl-41-8> 8</a>
</span><span class=lnt id=hl-41-9><a class=lnlinks href=#hl-41-9> 9</a>
</span><span class=lnt id=hl-41-10><a class=lnlinks href=#hl-41-10>10</a>
</span><span class=lnt id=hl-41-11><a class=lnlinks href=#hl-41-11>11</a>
</span><span class=lnt id=hl-41-12><a class=lnlinks href=#hl-41-12>12</a>
</span><span class=lnt id=hl-41-13><a class=lnlinks href=#hl-41-13>13</a>
</span><span class=lnt id=hl-41-14><a class=lnlinks href=#hl-41-14>14</a>
</span><span class=lnt id=hl-41-15><a class=lnlinks href=#hl-41-15>15</a>
</span><span class=lnt id=hl-41-16><a class=lnlinks href=#hl-41-16>16</a>
</span><span class=lnt id=hl-41-17><a class=lnlinks href=#hl-41-17>17</a>
</span><span class=lnt id=hl-41-18><a class=lnlinks href=#hl-41-18>18</a>
</span><span class=lnt id=hl-41-19><a class=lnlinks href=#hl-41-19>19</a>
</span><span class=lnt id=hl-41-20><a class=lnlinks href=#hl-41-20>20</a>
</span><span class=lnt id=hl-41-21><a class=lnlinks href=#hl-41-21>21</a>
</span><span class=lnt id=hl-41-22><a class=lnlinks href=#hl-41-22>22</a>
</span><span class=lnt id=hl-41-23><a class=lnlinks href=#hl-41-23>23</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>redis</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>r</span> <span class=o>=</span> <span class=n>redis</span><span class=o>.</span><span class=n>Redis</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_with_cache_lock</span><span class=p>(</span><span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span> <span class=o>=</span> <span class=n>r</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>value</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>lock_key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>:lock&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>got_lock</span> <span class=o>=</span> <span class=n>r</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>lock_key</span><span class=p>,</span> <span class=s2>&#34;1&#34;</span><span class=p>,</span> <span class=n>nx</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>ex</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>got_lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 이 요청만 DB에 접근</span>
</span></span><span class=line><span class=cl>        <span class=n>value</span> <span class=o>=</span> <span class=n>query_db</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>r</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>ex</span><span class=o>=</span><span class=mi>300</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>r</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>lock_key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># 잠시 대기 후 캐시 다시 시도</span>
</span></span><span class=line><span class=cl>        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.05</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>r</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=주제와-관련하여-주목할-내용-1>주제와 관련하여 주목할 내용<a hidden class=anchor aria-hidden=true href=#주제와-관련하여-주목할-내용-1>#</a></h3><table><thead><tr><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>캐시 전략</td><td>Hybrid Cache</td><td>Local + Distributed Cache 혼합 설계 방식</td></tr><tr><td>아키텍처 패턴</td><td>캐시 - 라인 관리</td><td>캐시 일관성을 유지하면서 세밀한 캐시 관리를 위한 캐시 - 라인 기반 접근 방식이 등장하여 불필요한 캐시 무효화를 최소화합니다</td></tr><tr><td></td><td>이벤트 소싱과 캐싱</td><td>이벤트 소싱 아키텍처와 캐싱을 결합하여 높은 일관성과 성능을 동시에 달성하는 패턴이 발전하고 있습니다</td></tr><tr><td></td><td>마이크로프론트엔드 캐싱</td><td>마이크로프론트엔드 아키텍처에 최적화된 캐싱 전략이 개발되어 모듈 간 효율적인 데이터 공유가 가능해졌습니다</td></tr><tr><td>보안 및 규정 준수</td><td>암호화된 캐싱</td><td>민감한 데이터를 안전하게 캐싱할 수 있는 엔드투엔드 암호화 캐싱 솔루션이 증가하고 있습니다</td></tr><tr><td></td><td>GDPR 준수 캐싱</td><td>개인정보 보호 규정을 준수하는 캐싱 패턴이 발전하여 규제가 엄격한 환경에서도 캐싱의 이점을 얻을 수 있습니다</td></tr><tr><td></td><td>제로 트러스트 캐싱</td><td>제로 트러스트 보안 모델에 부합하는 캐싱 아키텍처가 등장하여 엄격한 보안 환경에서도 성능 최적화가 가능해졌습니다</td></tr><tr><td>새로운 응용 분야</td><td>IoT 엣지 캐싱</td><td>IoT 장치에서의 효율적인 데이터 캐싱 기술이 발전하여 제한된 리소스에서도 성능을 최적화할 수 있습니다</td></tr><tr><td></td><td>실시간 분석 캐싱</td><td>실시간 데이터 분석 파이프라인에 특화된 캐싱 기법이 개발되어 지연 시간을 최소화하면서 처리량을 극대화합니다</td></tr><tr><td></td><td>대규모 언어 모델 추론 캐싱</td><td>LLM 추론 결과를 효율적으로 캐싱하여 반복되는 쿼리에 대한 응답 시간과 컴퓨팅 비용을 크게 절감할 수 있습니다</td></tr><tr><td>분산 캐시</td><td>Consistent Hashing</td><td>노드 추가/제거 시 키 이동 최소화하는 해시 전략</td></tr><tr><td>DB 캐시</td><td>Query Result Cache</td><td>데이터베이스 쿼리 결과를 레이어 상단에서 캐싱</td></tr><tr><td>웹 성능</td><td>CDN with Signed URL</td><td>접근 제어가 필요한 리소스를 CDN 으로 안전하게 제공하는 방식</td></tr></tbody></table><h3 id=앞으로의-전망>앞으로의 전망<a hidden class=anchor aria-hidden=true href=#앞으로의-전망>#</a></h3><table><thead><tr><th>주제</th><th>항목</th><th>설명</th></tr></thead><tbody><tr><td>AI/ML</td><td>지능형 캐시</td><td>AI 가 데이터 패턴 분석해 자동 최적화</td></tr><tr><td>클라우드</td><td>멀티클라우드 캐시</td><td>여러 클라우드 환경에서 통합 캐시 제공</td></tr><tr><td>보안</td><td>프라이버시 강화</td><td>캐시 데이터 암호화, 접근 제어 강화</td></tr><tr><td>하드웨어</td><td>메모리 계층 혁신</td><td>DRAM, NVMe 등 신기술 캐시 계층 확대</td></tr><tr><td>엣지 컴퓨팅</td><td>초저지연 캐시</td><td>IoT/5G 연계 초저지연 캐시 기술 확산</td></tr></tbody></table><h3 id=추가-학습-주제>추가 학습 주제<a hidden class=anchor aria-hidden=true href=#추가-학습-주제>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>설명</th></tr></thead><tbody><tr><td>기초 이론</td><td>캐시 일관성 모델</td><td>다양한 캐시 일관성 모델 (강한 일관성, 최종 일관성, 인과적 일관성 등) 과 각각의 장단점</td></tr><tr><td></td><td>캐시 교체 알고리즘 심화</td><td>LRU, LFU, FIFO 외에도 ARC, CLOCK, 2Q 등 고급 캐시 교체 알고리즘의 작동 원리와 성능 특성</td></tr><tr><td></td><td>캐시 성능 분석</td><td>캐시 적중률, 지연 시간, 처리량 등의 지표를 통한 캐시 성능 분석 방법론</td></tr><tr><td>구현 기술</td><td>로컬 캐싱 프레임워크</td><td>Caffeine, Guava Cache, Ehcache 등의 로컬 캐싱 라이브러리 활용 방법</td></tr><tr><td></td><td>분산 캐싱 시스템</td><td>Redis, Memcached, Hazelcast 등의 분산 캐싱 시스템 아키텍처와 고급 기능</td></tr><tr><td></td><td>데이터베이스 쿼리 캐싱</td><td>ORM 캐싱, 쿼리 결과 캐싱, 프로시저 캐싱 등 데이터베이스 성능 최적화 기법</td></tr><tr><td>웹 캐싱</td><td>HTTP 캐싱 프로토콜</td><td>HTTP 캐싱 헤더 (Cache-Control, ETag, Last-Modified 등) 의 상세 활용법</td></tr><tr><td></td><td>CDN 아키텍처 및 설정</td><td>다양한 CDN 서비스의 아키텍처, 설정 옵션, 고급 기능 비교</td></tr><tr><td></td><td>서비스 워커 캐싱</td><td>프로그레시브 웹 앱에서의 서비스 워커를 활용한 캐싱 전략</td></tr><tr><td>분산 시스템</td><td>글로벌 분산 캐싱</td><td>지리적으로 분산된 애플리케이션에서의 효율적인 캐싱 전략</td></tr><tr><td></td><td>멀티 테넌트 캐싱</td><td>여러 테넌트가 공유하는 환경에서의 효율적이고 안전한 캐싱 설계</td></tr><tr><td></td><td>일관성 프로토콜</td><td>분산 캐시 간의 일관성을 유지하기 위한 프로토콜 (MESI, MOESI 등)</td></tr><tr><td>성능 최적화</td><td>캐시 최적화 패턴</td><td>캐시 워밍업, 프리페칭, 샤딩 등의 고급 캐싱 패턴</td></tr><tr><td></td><td>메모리 효율적 캐싱</td><td>제한된 메모리 환경에서의 효율적인 캐싱 기법 (압축, 부분 캐싱 등)</td></tr><tr><td></td><td>대용량 캐시 관리</td><td>테라바이트 규모의 캐시를 효율적으로 관리하는 기법</td></tr></tbody></table><h3 id=관련-분야-학습-주제>관련 분야 학습 주제<a hidden class=anchor aria-hidden=true href=#관련-분야-학습-주제>#</a></h3><table><thead><tr><th>카테고리</th><th>주제</th><th>설명</th></tr></thead><tbody><tr><td>컴퓨터 구조</td><td>CPU 캐시 아키텍처</td><td>L1, L2, L3 캐시의 작동 원리와 최적화 기법</td></tr><tr><td></td><td>메모리 계층 구조</td><td>레지스터, 캐시, 메인 메모리, 가상 메모리의 계층적 구조와 성능 특성</td></tr><tr><td></td><td>캐시 친화적 알고리즘</td><td>캐시 지역성을 최대화하는 알고리즘 설계 기법</td></tr><tr><td>데이터베이스</td><td>버퍼 풀 관리</td><td>데이터베이스 버퍼 풀의 작동 원리와 최적화 기법</td></tr><tr><td></td><td>인덱스 캐싱</td><td>데이터베이스 인덱스 캐싱 전략과 성능 영향</td></tr><tr><td></td><td>계획 캐싱</td><td>SQL 실행 계획 캐싱 및 재사용의 이점과 함정</td></tr><tr><td>네트워킹</td><td>DNS 캐싱</td><td>DNS 조회 캐싱 계층 구조와 TTL 관리</td></tr><tr><td></td><td>HTTP/3 와 캐싱</td><td>새로운 HTTP 프로토콜에서의 캐싱 기회와 도전</td></tr><tr><td></td><td>콘텐츠 전송 최적화</td><td>다양한 네트워크 환경에서의 콘텐츠 전송 최적화 기법</td></tr><tr><td>클라우드 컴퓨팅</td><td>멀티 테넌시와 캐싱</td><td>클라우드 환경에서의 멀티 테넌트 캐싱 설계</td></tr><tr><td></td><td>서버리스 캐싱</td><td>서버리스 아키텍처에서의 효율적인 캐싱 패턴</td></tr><tr><td></td><td>클라우드 네이티브 캐싱</td><td>쿠버네티스 환경에서의 분산 캐싱 구현</td></tr><tr><td>보안</td><td>캐시 공격 방어</td><td>캐시 포이즈닝, 타이밍 공격 등 캐시 관련 보안 취약점과 대응책</td></tr><tr><td></td><td>암호화된 캐싱</td><td>민감한 데이터의 안전한 캐싱 기법</td></tr><tr><td></td><td>접근 제어와 캐싱</td><td>데이터 접근 권한과 캐싱의 통합 설계</td></tr></tbody></table><hr><h2 id=용어-정리-2>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리-2>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>캐시 히트 (Cache Hit)</td><td>요청 데이터가 캐시에 존재해 즉시 반환되는 상황</td></tr><tr><td>캐시 미스 (Cache Miss)</td><td>요청 데이터가 캐시에 없어 원본에서 조회하는 상황</td></tr><tr><td>TTL(Time To Live)</td><td>캐시 데이터의 유효 기간 또는 만료 시간</td></tr><tr><td>LRU(Least Recently Used)</td><td>가장 오래 사용하지 않은 데이터를 교체하는 정책</td></tr><tr><td>LFU(Least Frequently Used)</td><td>가장 적게 사용된 데이터를 교체하는 정책</td></tr><tr><td>Write-through</td><td>쓰기 시 캐시와 원본에 동시에 기록하는 정책</td></tr><tr><td>Write-back</td><td>캐시가 교체될 때만 원본에 기록하는 정책</td></tr><tr><td>CDN(콘텐츠 전송 네트워크)</td><td>전 세계 엣지 서버에서 콘텐츠를 캐싱해 제공하는 네트워크</td></tr><tr><td>엣지 서버 (Edge Server)</td><td>사용자와 가까운 위치에 배치된 캐시 서버</td></tr><tr><td>TTL (Time To Live)</td><td>캐시 데이터가 유효한 시간</td></tr><tr><td>Cache Hit/Miss</td><td>캐시에 데이터가 존재하면 Hit, 없으면 Miss</td></tr><tr><td>Write-Through</td><td>데이터 쓰기 시 캐시와 원본 DB 에 동시에 저장</td></tr><tr><td>Cache Stampede</td><td>동시에 다수의 요청이 캐시 미스로 인해 DB 에 몰리는 현상</td></tr><tr><td>Consistent Hashing</td><td>노드 변경 시 최소한의 재분배로 해시 분산하는 기법</td></tr><tr><td>캐시 적중률 (Hit Ratio)</td><td>전체 데이터 요청 중 캐시에서 성공적으로 찾은 비율</td></tr><tr><td>캐시 오염 (Cache Pollution)</td><td>자주 사용되지 않는 데이터가 캐시 공간을 차지하여 효율성이 감소하는 현상</td></tr><tr><td>캐시 폭발 (Cache Stampede)</td><td>동시에 많은 캐시 미스가 발생하여 원본 시스템에 과부하가 발생하는 현상</td></tr><tr><td>캐시 워밍업 (Cache Warming)</td><td>시스템 시작 시 미리 캐시를 데이터로 채우는 과정</td></tr><tr><td>콜드 스타트 (Cold Start)</td><td>캐시가 비어있는 상태에서 시작하여 초기에 성능이 저하되는 현상</td></tr><tr><td>일관성 해시 (Consistent Hashing)</td><td>노드 추가/제거 시 캐시 키 재분배를 최소화하는 해시 기법</td></tr><tr><td>쓰기 전략 (Write Policy)</td><td>데이터 쓰기 시 캐시와 원본 저장소를 어떻게 업데이트할지 결정하는 전략 (Write-Through, Write-Back, Write-Around)</td></tr><tr><td>샤딩 (Sharding)</td><td>데이터를 여러 노드에 분산하여 저장하는 기법</td></tr></tbody></table><hr><h2 id=참고-및-출처-2>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처-2>#</a></h2><ul><li><a href=https://aws.amazon.com/caching/best-practices/>AWS 캐싱 전략 Best Practices</a></li><li><a href=https://docs.microsoft.com/azure/architecture/best-practices/caching>Microsoft - 캐싱 모범 사례</a></li><li><a href=https://redis.io/documentation>Redis 공식 문서</a></li><li><a href=https://memcached.org/documentation>Memcached 공식 문서</a></li><li><a href=https://www.nginx.com/blog/nginx-caching-guide/>Nginx 캐싱 가이드</a></li><li><a href=https://www.cloudflare.com/learning/cdn/what-is-caching/>Cloudflare CDN 및 캐싱 설명</a></li><li><a href=https://martinfowler.com/bliki/TwoHardThings.html>Martin Fowler - 캐시 패턴</a></li><li><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching>MDN Web Docs - HTTP 캐싱</a></li><li><a href=https://medium.com/geekculture/caching-strategies-in-a-microservice-architecture-c77ea15b8b01>Ethan Anderson의 &ldquo;마이크로서비스 아키텍처에서의 캐싱 전략&rdquo;</a></li><li><a href=https://levelup.gitconnected.com/cache-consistency-in-distributed-systems-a-practical-guide-b7dc8d143e49>Dmitry Afanasiev의 &ldquo;분산 시스템에서의 캐싱 일관성&rdquo;</a></li><li><a href=https://www.akamai.com/solutions/edge-caching>Akamai - 에지 캐싱 문서</a></li><li><a href=https://aws.amazon.com/ko/caching/>AWS 캐싱 공식 설명</a></li><li><a href=https://f-lab.kr/insight/understanding-cache-and-optimization-strategies>F-Lab 캐시 최적화 전략</a></li><li><a href=https://velog.io/@hyejin4169/%EC%BA%90%EC%8B%9C%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B4%EA%B3%A0-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8F%99%EC%9E%91%ED%95%98%EB%8A%94%EA%B0%80>캐시 동작 원리 상세 설명(velog)</a></li><li><a href=https://woozzang.tistory.com/155>시스템 캐시와 메모리 계층 구조(wooZzang)</a></li><li><a href=https://velog.io/@jinh2352/%EA%B3%A0%EC%84%B1%EB%8A%A5-%ED%94%84%EB%A1%9C%EC%84%B8%EC%84%9C%EC%9D%98-%ED%95%84%EC%88%98-%EC%A1%B0%EA%B1%B4-%EB%98%91%EB%98%91%ED%95%9C-%EC%BA%90%EC%8B%9C>CPU 캐시 설계 고려사항(velog)</a></li><li><a href=https://wikidocs.net/65523>캐시 메모리 개념 및 매핑 기법(위키독스)</a></li><li><a href=https://wslog.dev/cs-cache>캐시의 등장 배경과 동작 원리(WooSeok.log)</a></li><li><a href=https://aws.amazon.com/caching/>AWS Caching Overview</a></li><li><a href=https://developers.cloudflare.com/cache/>Cloudflare CDN Cache Explained</a></li><li><a href=https://redis.io/docs/use-cases/caching/>Redis Caching Use Cases - Redis Docs</a></li><li><a href=https://memcached.org/>Memcached Best Practices - Memcached.org</a></li><li><a href=https://medium.com/system-design>Caching Strategies in System Design – Medium</a></li><li><a href=https://netflixtechblog.com/>High-Performance Caching – Netflix TechBlog</a></li></ul><hr></div><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Cache Strategy vs Cache Policy</h2></header><div class=entry-content><p>Cache Strategy vs. Cache Policy 캐시 전략(Cache Strategy)과 캐시 정책(Cache Policy)은 컴퓨터 아키텍처에서 캐시 메모리의 효율적 운영을 위한 핵심 개념이다.
이 둘은 상호보완적이지만 명확한 차이가 있다.
캐시 전략(Cache Strategy) 캐시 전략은 시스템 전체의 캐시 사용 방식을 결정하는 상위 레벨의 설계 접근법을 의미한다.
주로 다음과 같은 요소를 포함한다:
계층적 구조: L1, L2, L3 캐시로 이어지는 메모리 계층 구조 설계 분산 캐시: 여러 서버에 캐시를 분산하여 처리 능력 확장 데이터 프리페칭: 프로세서가 필요로 할 데이터를 미리 예측하여 캐시에 로드 클라이언트 측 캐싱: 사용자 브라우저에 데이터 저장으로 서버 부하 감소 예시: 멀티코어 프로세서에서 L3 캐시를 공유하여 코어 간 데이터 일관성 유지
...</p></div><footer class=entry-footer><span title='2024-09-30 15:24:00 +0000 UTC'>September 30, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Cache Strategy vs Cache Policy" href=https://buenhyden.github.io/posts/systems-and-infrastructure/infrastructure/infrastructure-components/caching-subsystems/cache-strategy-vs-cache-policy/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Caching Techniques</h2></header><div class=entry-content><p>Caching Techniques 캐싱 기술(Caching Techniques)은 데이터 접근 속도를 높이고 시스템 성능을 개선하기 위해 사용되는 다양한 방법들을 말한다.
브라우저 캐싱 (Browser Caching)
브라우저 캐싱은 웹 페이지 리소스(이미지, CSS 파일, JavaScript 파일 등)를 사용자의 기기에 로컬로 저장하는 기술이다.
사용자가 같은 웹사이트를 다시 방문할 때, 이 리소스들을 서버에서 다시 다운로드하지 않고 캐시에서 불러올 수 있어 페이지 로드 시간을 크게 줄일 수 있다.
이는 반복 방문자의 경험을 개선하고 전반적인 사용자 만족도를 높이는 데 중요한 역할을 한다.
...</p></div><footer class=entry-footer><span title='2024-09-30 02:37:00 +0000 UTC'>September 30, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Caching Techniques" href=https://buenhyden.github.io/posts/systems-and-infrastructure/infrastructure/infrastructure-components/caching-subsystems/cache-types/caching-techniques/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>캐시 (Cache)</h2></header><div class=entry-content><p>캐시 (Cache) 아래는 " 캐시 (Cache)" 주제에 대한 IT 백엔드 개발자 관점의 체계적 조사 및 정리입니다.
1. 태그 Caching System-Design Performance-Optimization Distributed-Cache 2. 분류 계층 구조 적합성 분석 주제 분류는
Computer Science and Engineering > Software Engineering > Design and Architecture > 캐싱 (Caching)
로 제시되어 있습니다.
근거:
캐싱은 컴퓨터 과학 및 공학의 핵심 개념이며, 소프트웨어 엔지니어링의 설계와 아키텍처에서 성능 최적화를 위해 필수적으로 다뤄지는 주제입니다. 실제로 대부분의 시스템 설계에서 캐싱은 데이터 접근 속도와 시스템 확장성을 높이는 데 중요한 역할을 하므로, 제시된 계층 구조는 적절합니다 13.
...</p></div><footer class=entry-footer><span title='2024-09-30 13:25:00 +0000 UTC'>September 30, 2024</span>&nbsp;·&nbsp;41 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to 캐시 (Cache)" href=https://buenhyden.github.io/posts/systems-and-infrastructure/infrastructure/infrastructure-components/caching-subsystems/cache/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Cache Strategy</h2></header><div class=entry-content><p>Cache Strategy Cache Strategy(캐시 전략) 는 캐시를 효과적으로 활용하여 시스템 성능을 최적화하고 데이터 일관성을 유지하기 위한 방법론이다.
캐싱은 데이터 접근 속도를 높이고, 데이터베이스 부하를 줄이며, 사용자 경험을 향상시키는 데 중요한 역할을 한다. 캐시 전략은 데이터의 특성과 접근 패턴에 따라 적절히 선택해야 한다.
캐싱 전략은 애플리케이션의 성능 최적화와 사용자 경험 개선에 핵심적인 역할을 한다. Cache Aside, Read Through, Write Through 등 다양한 전략은 각각의 장단점과 적합한 사용 사례를 가지고 있으므로, 애플리케이션의 특성과 요구사항에 맞는 최적의 전략을 선택하는 것이 중요하다. 또한, 지속적인 모니터링과 최적화를 통해 효율적인 캐싱 시스템을 유지해야 한다.
...</p></div><footer class=entry-footer><span title='2024-09-30 03:30:00 +0000 UTC'>September 30, 2024</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Cache Strategy" href=https://buenhyden.github.io/posts/systems-and-infrastructure/infrastructure/infrastructure-components/caching-subsystems/caching-strategies-and-patterns/></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>