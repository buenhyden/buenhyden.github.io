<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Github Actions | hyunyoun's Blog</title>
<meta name=keywords content="Software-Development,Software-Maintenance,DevOps,CI-CD,Github-Actions"><meta name=description content="GitHub에서 각각 제공하는 CI/CD(Continuous Integration and Continuous Deployment) 도구"><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/software-development-and-maintenance/devops/ci-and-cd/github-actions/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.9a2bbe2d8b5afa9d4df22976abb7b72f1f7f1c467d2b30f03090108f9496ae6c.css integrity="sha256-miu+LYta+p1N8il2q7e3Lx9/HEZ9KzDwMJAQj5SWrmw=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/software-development-and-maintenance/devops/ci-and-cd/github-actions/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/software-development-and-maintenance/devops/ci-and-cd/github-actions/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Github Actions"><meta property="og:description" content="GitHub에서 각각 제공하는 CI/CD(Continuous Integration and Continuous Deployment) 도구"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-24T03:10:00+00:00"><meta property="article:modified_time" content="2024-09-24T03:10:00+00:00"><meta property="article:tag" content="Software-Development"><meta property="article:tag" content="Software-Maintenance"><meta property="article:tag" content="DevOps"><meta property="article:tag" content="CI-CD"><meta property="article:tag" content="Github-Actions"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Github Actions"><meta name=twitter:description content="GitHub에서 각각 제공하는 CI/CD(Continuous Integration and Continuous Deployment) 도구"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"posts","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Software Development and Maintenance","item":"https://buenhyden.github.io/posts/software-development-and-maintenance/"},{"@type":"ListItem","position":3,"name":"DevOps","item":"https://buenhyden.github.io/posts/software-development-and-maintenance/devops/"},{"@type":"ListItem","position":4,"name":"CI/CD","item":"https://buenhyden.github.io/posts/software-development-and-maintenance/devops/ci-and-cd/"},{"@type":"ListItem","position":5,"name":"Github Actions","item":"https://buenhyden.github.io/posts/software-development-and-maintenance/devops/ci-and-cd/github-actions/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Github Actions","name":"Github Actions","description":"GitHub에서 각각 제공하는 CI/CD(Continuous Integration and Continuous Deployment) 도구","keywords":["Software-Development","Software-Maintenance","DevOps","CI-CD","Github-Actions"],"articleBody":"Github Actions GitHub에서 제공하는 CI/CD 자동화 도구로, 코드 저장소에서 직접 소프트웨어 개발 워크플로우를 자동화할 수 있다.\n주요 기능 자동화된 워크플로우: 코드 변경, 풀 리퀘스트 생성, 이슈 생성 등 다양한 이벤트에 반응하여 자동으로 워크플로우를 실행할 수 있습니다 CI/CD 파이프라인: 빌드, 테스트, 배포 과정을 자동화하여 지속적 통합 및 배포를 구현할 수 있습니다 다양한 환경 지원: Linux, Windows, macOS 가상 머신에서 워크플로우를 실행할 수 있으며, 자체 호스팅 러너도 지원합니다 재사용 가능한 액션: 복잡하지만 자주 반복되는 작업을 수행하는 사용자 지정 애플리케이션인 ‘액션’을 사용하여 워크플로우를 간소화할 수 있습니다 GitHub 통합: GitHub 저장소와 완벽하게 통합되어 있어 코드 관리와 자동화를 원활하게 연결할 수 있습니다 병렬 작업 실행: 여러 작업을 동시에 실행하여 효율성을 높일 수 있습니다 보안 및 액세스 제어: GitHub의 보안 기능과 통합되어 안전한 워크플로우 실행을 보장합니다 상세한 로깅 및 모니터링: 워크플로우 실행 상태와 결과를 쉽게 확인하고 문제를 진단할 수 있습니다 구성 요소 워크플로우(Workflow): 자동화된 전체 프로세스를 정의하는 가장 상위 개념입니다. YAML 파일로 작성되며 하나 이상의 작업을 포함합니다. 이벤트(Event): 워크플로우를 트리거하는 특정 활동입니다. 예를 들어 push, pull request, issue 생성 등이 있습니다. 작업(Job): 동일한 러너에서 실행되는 단계들의 집합입니다. 기본적으로 병렬로 실행되지만 순차적으로 실행되도록 설정할 수도 있습니다. 단계(Step): 작업 내에서 실행되는 개별 작업 단위입니다. 쉘 명령어를 실행하거나 액션을 사용할 수 있습니다. 액션(Action): 워크플로우에서 자주 반복되는 작업을 재사용 가능한 단위로 만든 것입니다. GitHub Marketplace에서 찾아 사용하거나 직접 만들 수 있습니다. 러너(Runner): 워크플로우 작업이 실행되는 서버입니다. GitHub에서 호스팅하는 러너를 사용하거나 자체 호스팅 러너를 설정할 수 있습니다.\n서로 연결되어 GitHub Actions의 자동화된 CI/CD 파이프라인을 구성한다. 장점 자동화: 코드 빌드, 테스트, 배포 등의 워크플로우를 자동화하여 시간과 노력을 절약할 수 있습니다 GitHub와의 통합: GitHub 저장소와 완벽하게 통합되어 있어 개발 프로세스를 원활하게 관리할 수 있습니다 유연성과 사용자 정의: YAML 파일을 사용하여 워크플로우를 쉽게 구성하고 사용자 정의할 수 있습니다 광범위한 액션 생태계: GitHub Marketplace에서 다양한 사전 구축된 액션을 사용하거나 직접 만들 수 있습니다 실시간 피드백: 풀 리퀘스트와 커밋에 대한 워크플로우 상태를 즉시 확인할 수 있습니다 확장성: 다양한 규모의 프로젝트에 적용 가능하며, 여러 운영 체제와 환경에서 실행할 수 있습니다 비용 효율성: 공개 저장소에서는 무료로 사용할 수 있으며, 개인 저장소에서도 일정량의 무료 사용 시간을 제공합니다 커뮤니티 지원: 활발한 커뮤니티를 통해 다양한 액션과 지원을 받을 수 있습니다 단점 복잡한 워크플로우 구성: 복잡한 워크플로우를 설계하고 유지보수하는 것이 어려울 수 있습니다, 특히 초보자에게는 더욱 그렇습니다 리소스 제한: 실행 시간, 디스크 공간 등에 제한이 있어 리소스 집약적인 워크플로우에는 제약이 있을 수 있습니다 GitHub 의존성: GitHub 플랫폼에 강하게 의존하기 때문에, GitHub의 중단이나 장애가 CI/CD 워크플로우에 영향을 줄 수 있습니다 디버깅의 어려움: 워크플로우 실행 중 발생하는 문제를 디버깅하는 것이 어려울 수 있습니다 학습 곡선: YAML 문법과 CI/CD 개념에 익숙하지 않은 사용자에게는 상당한 학습 시간이 필요할 수 있습니다 실행 시간 제한: 각 작업은 최대 6시간까지만 실행할 수 있어, 매우 긴 작업에는 적합하지 않을 수 있습니다 API 요청 제한: 시간당 API 요청 횟수에 제한이 있어, 대규모 프로젝트에서는 문제가 될 수 있습니다 안정성 문제: 때때로 발생하는 중단이나 성능 저하로 인해 작업 시간을 잃을 수 있습니다 워크플로우 설정 방법 워크플로우 파일 생성:\n프로젝트의 .github/workflows/ 디렉토리에 YAML 파일을 생성합니다. 이 파일에 워크플로우를 정의합니다. 워크플로우 정의:\nYAML 파일에 원하는 자동화 작업을 정의합니다. 주요 구성 요소는 다음과 같습니다: 이벤트 트리거 설정 (예: push, pull request 등) 작업(jobs) 정의 실행 환경 지정 (예: ubuntu-latest) 단계(steps) 정의 커밋 및 푸시:\n정의된 워크플로우 파일을 저장소에 커밋하고 푸시합니다. 실행 확인:\nGitHub 저장소의 Actions 탭에서 워크플로우 실행 상태를 확인할 수 있습니다. 자주 사용하는 YAML 파일 예시 name: 워크플로우의 이름을 지정합니다. on: 워크플로우를 트리거하는 이벤트를 정의합니다. 여기서는 main 브랜치에 대한 push와 pull request 이벤트에 반응합니다. jobs: 실행할 작업들을 정의합니다. 여기서는 “build\"라는 하나의 작업만 있습니다. runs-on: 작업을 실행할 환경을 지정합니다. 여기서는 최신 Ubuntu 환경을 사용합니다. steps: 작업 내에서 실행할 단계들을 정의합니다. 각 단계는 이름, 사용할 액션 또는 실행할 명령어를 포함합니다. uses: 미리 정의된 액션을 사용합니다. 예를 들어, actions/checkout@v2는 저장소의 코드를 체크아웃합니다. run: 직접 셸 명령어를 실행합니다. if: 조건부로 단계를 실행합니다. 여기서는 main 브랜치에 푸시된 경우에만 배포 단계를 실행합니다. env: 환경 변수를 설정합니다. 여기서는 비밀 값을 환경 변수로 사용합니다. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 name: CI/CD Pipeline on: push: branches: [ \"main\" ] pull_request: branches: [ \"main\" ] jobs: build: runs-on: ubuntu-latest steps: - name: Checkout Repository uses: actions/checkout@v2 - name: Set up Node.js uses: actions/setup-node@v2 with: node-version: '14' - name: Install Dependencies run: npm install - name: Run Tests run: npm test - name: Deploy to Production if: github.ref == 'refs/heads/main' env: PRODUCTION_URL: ${{ secrets.PRODUCTION_URL }} run: | echo \"Deploying to production at $PRODUCTION_URL\" # 프로덕션 환경에 배포하는 명령어 기본적인 Node.js 프로젝트 CI 워크플로우 여러 Node.js 버전에서 테스트 자동 의존성 설치 및 빌드 테스트 자동 실행 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 name: Node.js CI on: # 워크플로우 트리거 설정 push: branches: [ main ] pull_request: branches: [ main ] jobs: build: runs-on: ubuntu-latest # 실행 환경 설정 strategy: matrix: node-version: [14.x, 16.x, 18.x] # 테스트할 Node.js 버전들 steps: - uses: actions/checkout@v3 # 소스코드 체크아웃 - name: Use Node.js ${{ matrix.node-version }} uses: actions/setup-node@v3 with: node-version: ${{ matrix.node-version }} - run: npm ci # 의존성 설치 - run: npm run build # 빌드 - run: npm test # 테스트 실행 Docker 이미지 빌드 및 배포 워크플로우 Docker Hub 자동 인증 이미지 자동 빌드 및 푸시 보안 자격 증명 사용 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 name: Docker Build and Push on: push: branches: [ main ] jobs: build: runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 - name: Login to Docker Hub # Docker Hub 로그인 uses: docker/login-action@v2 with: username: ${{ secrets.DOCKERHUB_USERNAME }} password: ${{ secrets.DOCKERHUB_TOKEN }} - name: Build and push # 이미지 빌드 및 푸시 uses: docker/build-push-action@v4 with: push: true tags: user/app:latest 자동화된 릴리스 생성 워크플로우 태그 기반 트리거 자동 릴리스 노트 생성 GitHub 릴리스 자동화 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 name: Create Release on: push: tags: - 'v*' # v로 시작하는 모든 태그에 대해 실행 jobs: build: runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 - name: Create Release # GitHub 릴리스 생성 uses: actions/create-release@v1 env: GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} with: tag_name: ${{ github.ref }} release_name: Release ${{ github.ref }} draft: false prerelease: false 스케줄링된 작업 워크플로우 Cron 기반 실행 정기적인 유지보수 작업 아티팩트 관리 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 name: Scheduled Tasks on: schedule: - cron: '0 0 * * *' # 매일 자정에 실행 jobs: cleanup: runs-on: ubuntu-latest steps: - name: Cleanup old artifacts # 오래된 아티팩트 정리 uses: c-hive/gha-remove-artifacts@v1 with: age: '1 week' skip-recent: 5 PR 자동 리뷰 워크플로우 자동 코드 검사 테스트 실행 코드 커버리지 리포트 생성 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 name: PR Review on: pull_request: types: [opened, synchronize] jobs: review: runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 - name: Run ESLint # ESLint 검사 run: | npm install npm run lint - name: Run tests # 테스트 실행 run: npm test - name: Code Coverage # 코드 커버리지 리포트 uses: codecov/codecov-action@v3 with: token: ${{ secrets.CODECOV_TOKEN }} 프라이빗 컨테이너 레지스트리를 사용하는 워크플로우 설정 방법 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 name: Build and Push to Harbor Registry on: push: branches: [ main ] # 특정 태그에 대해서만 실행하고 싶다면 아래처럼 설정 # tags: # - 'v*' env: # Harbor 레지스트리 설정 REGISTRY: harbor.example.com # Harbor 레지스트리 주소 REPOSITORY: project-name/application # Harbor 프로젝트와 이미지명 IMAGE_TAG: ${{ github.sha }} # 이미지 태그 (커밋 해시 사용) jobs: build-and-push: runs-on: ubuntu-latest steps: - name: Checkout code uses: actions/checkout@v3 # QEMU 설정 (다중 아키텍처 빌드시 필요) - name: Set up QEMU uses: docker/setup-qemu-action@v2 # Docker Buildx 설정 - name: Set up Docker Buildx uses: docker/setup-buildx-action@v2 # Harbor 레지스트리 로그인 - name: Login to Harbor uses: docker/login-action@v2 with: registry: ${{ env.REGISTRY }} username: ${{ secrets.HARBOR_USERNAME }} password: ${{ secrets.HARBOR_PASSWORD }} # 도커 메타데이터 설정 - name: Extract Docker metadata id: meta uses: docker/metadata-action@v4 with: images: ${{ env.REGISTRY }}/${{ env.REPOSITORY }} tags: | type=raw,value=${{ env.IMAGE_TAG }} type=raw,value=latest type=ref,event=branch type=ref,event=tag # 이미지 빌드 및 푸시 - name: Build and push Docker image uses: docker/build-push-action@v4 with: context: . push: true tags: ${{ steps.meta.outputs.tags }} labels: ${{ steps.meta.outputs.labels }} platforms: linux/amd64,linux/arm64 # 필요한 플랫폼 지정 cache-from: type=registry,ref=${{ env.REGISTRY }}/${{ env.REPOSITORY }}:buildcache cache-to: type=registry,ref=${{ env.REGISTRY }}/${{ env.REPOSITORY }}:buildcache,mode=max # 배포 결과 알림 (선택사항) - name: Notify deployment if: success() run: | echo \"Image successfully built and pushed to Harbor:\" echo \"Registry: ${{ env.REGISTRY }}\" echo \"Repository: ${{ env.REPOSITORY }}\" echo \"Tags: ${{ steps.meta.outputs.tags }}\" 주요 설정 사항 환경 변수 설정\nREGISTRY: Harbor 레지스트리의 URL을 설정합니다. REPOSITORY: Harbor 내의 프로젝트명과 이미지명을 설정합니다. IMAGE_TAG: 이미지 태그 전략을 설정합니다 (여기서는 Git commit hash를 사용). GitHub Secrets 설정\nGitHub 레포지토리의 Settings -\u003e Secrets and variables -\u003e Actions에서 다음 시크릿을 설정해야 합니다:\n1 2 HARBOR_USERNAME: Harbor 레지스트리 사용자명 HARBOR_PASSWORD: Harbor 레지스트리 비밀번호 또는 토큰 주요 기능 설명\n멀티 아키텍처 지원 (QEMU 및 Buildx 설정) 레이어 캐싱을 통한 빌드 최적화 다양한 태깅 전략 지원 빌드 결과 알림 태그 전략\n이 워크플로우는 다음과 같은 태그들을 생성합니다:\nGit commit hash 기반 태그 latest 태그 브랜치명 기반 태그 Git 태그 기반 태그 (태그 푸시 시) 보안 고려사항\nHarbor의 자체 서명 인증서를 사용하는 경우, 추가적인 인증서 설정이 필요할 수 있습니다. 프라이빗 레지스트리 접근을 위한 자격 증명은 반드시 GitHub Secrets를 통해 관리해야 합니다. 확인할 사항들\nHarbor 레지스트리 URL을 올바르게 설정했는지 확인 프로젝트명과 이미지명이 Harbor의 설정과 일치하는지 확인 필요한 GitHub Secrets가 모두 설정되어 있는지 확인 Harbor 프로젝트의 접근 권한이 올바르게 설정되어 있는지 확인 커스텀 액션을 만드는 과정 커스텀 액션은 두 가지 방식으로 만들 수 있습니다:\n별도의 레포지토리에 생성 버전 관리와 재사용이 용이 워크플로우가 있는 프로젝트 내부에 생성 .github/actions/ 디렉토리에 위치시켜야 함. 커스텀 액션 생성 과정 메타데이터 파일 작성: action.yml 또는 action.yaml 파일을 생성합니다. 액션의 이름, 설명, 입력, 출력 등을 정의합니다. 액션 유형 선택: Docker 컨테이너 액션 JavaScript 액션 복합 액션 액션 로직 구현: 선택한 유형에 따라 코드를 작성합니다. Docker 액션의 경우 Dockerfile 작성 JavaScript 액션의 경우 index.js 파일 작성 README 파일 작성: 액션 사용 방법, 입력/출력 인자, 예시 등을 포함합니다. 테스트 및 빌드: 액션을 로컬에서 테스트하고 필요한 경우 빌드합니다. 버전 관리: 시맨틱 버저닝을 사용하여 액션 버전을 관리합니다. GitHub Marketplace에 게시 (선택사항): 액션을 공개하고 싶다면 Marketplace에 게시할 수 있습니다. 예시 action.yml 파일 1 2 3 4 5 6 7 8 9 10 11 12 13 name: 'Hello World JS Action' description: 'Greet someone and record the time' inputs: who-to-greet: description: 'Who to greet' required: true default: 'World' outputs: time: description: 'The time we greeted you' runs: using: 'node16' main: 'index.js' 예시의 설정 파일을 이용하여 워크플로우에서 커스텀 액션을 사용하고자 할 때 1 2 3 4 5 6 7 8 9 10 11 12 13 # 해당 디렉토리 내의 `action.yml` 파일을 자동으로 찾아 실행 # 여러 커스텀 액션이 있을 때 혼란 가능성 있음 - name: Run Custom Greeting uses: ./.github/actions/ # 로컬 액션 사용 with: name: 'GitHub Actions' # 해당 디렉토리 내의 특정 액션을 직접 지정\t# 더 명확하고 유지보수가 용이 - name: Use custom greeting action uses: ./.github/actions/action # 커스텀 액션 사용 with: name: 'GitHub Actions' 다른 저장소의 액션을 사용하는 방법 특정 버전(태그) 사용: 1 - uses: actions/hello-world-action@v1 # v1 태그 사용 특정 커밋 SHA 사용: 1 - uses: actions/hello-world-action@67cbd44 # 커밋 해시 사용 브랜치 사용: 1 - uses: actions/hello-world-action@main # main 브랜치 사용 보안과 안정성을 위해 특정 버전이나 커밋 SHA를 사용하는 것을 권장합니다. 브랜치를 사용하면 예기치 않은 변경으로 인한 워크플로우 실패 위험이 있습니다.\n동일한 GitHub 계정의 다른 저장소에 있는 액션을 사용하는 경우의 설정 방법 1 - uses: {owner}/{repo-name}/path/to/action@{ref} 예시:\n1 2 3 4 5 6 7 8 # 메인 브랜치 사용 - uses: my-username/shared-actions/.github/actions/hello-world@main # 특정 태그 사용 - uses: my-username/shared-actions/.github/actions/hello-world@v1 # 특정 커밋 사용 - uses: my-username/shared-actions/.github/actions/hello-world@67cbd44 주의: 저장소가 private인 경우, Personal Access Token(PAT)이 필요할 수 있습니다.\n테스트를 자동화하는 방법 워크플로우 파일 생성:\n.github/workflows 디렉토리에 YAML 파일(예: test.yml)을 생성합니다.\n트리거 이벤트 설정:\non 키워드를 사용하여 워크플로우를 실행할 이벤트를 지정합니다. 예를 들어, push 이벤트나 pull request 이벤트에 반응하도록 설정할 수 있습니다.\n작업 정의:\njobs 섹션에서 테스트 작업을 정의합니다. 실행 환경(예: ubuntu-latest)을 지정합니다.\n단계 설정:\n코드 체크아웃: actions/checkout@v3를 사용하여 저장소 코드를 가져옵니다. 환경 설정: 필요한 런타임(예: Node.js)을 설정합니다. 의존성 설치: 필요한 패키지를 설치합니다. 테스트 실행: 테스트 명령어를 실행합니다. 테스트 결과 처리:\n테스트 결과를 GitHub PR 코멘트로 추가하거나, 외부 도구로 보고할 수 있습니다.\n1 2 3 4 5 6 7 8 9 10 11 12 name: Test on: [push, pull_request] jobs: test: runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 - uses: actions/setup-node@v3 with: node-version: '14' - run: npm ci - run: npm test 참고 및 출처 GitHub Actions로 App 자동으로 배포하기\nGitHub Actions · GitHub\nGitHub Actions 설명서 - GitHub Docs\n","wordCount":"2157","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2024-09-24T03:10:00Z","dateModified":"2024-09-24T03:10:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/software-development-and-maintenance/devops/ci-and-cd/github-actions/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>posts</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-development-and-maintenance/>Software Development and Maintenance</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-development-and-maintenance/devops/>DevOps</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/software-development-and-maintenance/devops/ci-and-cd/>CI/CD</a></div><h1 class="post-title entry-hint-parent">Github Actions</h1><div class=post-description>GitHub에서 각각 제공하는 CI/CD(Continuous Integration and Continuous Deployment) 도구</div><div class=post-meta><span title='2024-09-24 03:10:00 +0000 UTC'>September 24, 2024</span>&nbsp;·&nbsp;11 min&nbsp;·&nbsp;2157 words&nbsp;·&nbsp;Me</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#github-actions>Github Actions</a><ul><li><a href=#주요-기능>주요 기능</a></li><li><a href=#구성-요소>구성 요소</a></li><li><a href=#장점>장점</a></li><li><a href=#단점>단점</a></li><li><a href=#워크플로우-설정-방법>워크플로우 설정 방법</a></li><li><a href=#커스텀-액션을-만드는-과정>커스텀 액션을 만드는 과정</a></li><li><a href=#테스트를-자동화하는-방법>테스트를 자동화하는 방법</a></li></ul></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=github-actions>Github Actions<a hidden class=anchor aria-hidden=true href=#github-actions>#</a></h2><p>GitHub에서 제공하는 CI/CD 자동화 도구로, 코드 저장소에서 직접 소프트웨어 개발 워크플로우를 자동화할 수 있다.</p><h3 id=주요-기능>주요 기능<a hidden class=anchor aria-hidden=true href=#주요-기능>#</a></h3><ol><li>자동화된 워크플로우: 코드 변경, 풀 리퀘스트 생성, 이슈 생성 등 다양한 이벤트에 반응하여 자동으로 워크플로우를 실행할 수 있습니다</li><li>CI/CD 파이프라인: 빌드, 테스트, 배포 과정을 자동화하여 지속적 통합 및 배포를 구현할 수 있습니다</li><li>다양한 환경 지원: Linux, Windows, macOS 가상 머신에서 워크플로우를 실행할 수 있으며, 자체 호스팅 러너도 지원합니다</li><li>재사용 가능한 액션: 복잡하지만 자주 반복되는 작업을 수행하는 사용자 지정 애플리케이션인 &lsquo;액션&rsquo;을 사용하여 워크플로우를 간소화할 수 있습니다</li><li>GitHub 통합: GitHub 저장소와 완벽하게 통합되어 있어 코드 관리와 자동화를 원활하게 연결할 수 있습니다</li><li>병렬 작업 실행: 여러 작업을 동시에 실행하여 효율성을 높일 수 있습니다</li><li>보안 및 액세스 제어: GitHub의 보안 기능과 통합되어 안전한 워크플로우 실행을 보장합니다</li><li>상세한 로깅 및 모니터링: 워크플로우 실행 상태와 결과를 쉽게 확인하고 문제를 진단할 수 있습니다</li></ol><h3 id=구성-요소>구성 요소<a hidden class=anchor aria-hidden=true href=#구성-요소>#</a></h3><ol><li>워크플로우(Workflow): 자동화된 전체 프로세스를 정의하는 가장 상위 개념입니다. YAML 파일로 작성되며 하나 이상의 작업을 포함합니다.</li><li>이벤트(Event): 워크플로우를 트리거하는 특정 활동입니다. 예를 들어 push, pull request, issue 생성 등이 있습니다.</li><li>작업(Job): 동일한 러너에서 실행되는 단계들의 집합입니다. 기본적으로 병렬로 실행되지만 순차적으로 실행되도록 설정할 수도 있습니다.</li><li>단계(Step): 작업 내에서 실행되는 개별 작업 단위입니다. 쉘 명령어를 실행하거나 액션을 사용할 수 있습니다.</li><li>액션(Action): 워크플로우에서 자주 반복되는 작업을 재사용 가능한 단위로 만든 것입니다. GitHub Marketplace에서 찾아 사용하거나 직접 만들 수 있습니다.</li><li>러너(Runner): 워크플로우 작업이 실행되는 서버입니다. GitHub에서 호스팅하는 러너를 사용하거나 자체 호스팅 러너를 설정할 수 있습니다.<br>서로 연결되어 GitHub Actions의 자동화된 CI/CD 파이프라인을 구성한다.</li></ol><h3 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h3><ol><li>자동화: 코드 빌드, 테스트, 배포 등의 워크플로우를 자동화하여 시간과 노력을 절약할 수 있습니다</li><li>GitHub와의 통합: GitHub 저장소와 완벽하게 통합되어 있어 개발 프로세스를 원활하게 관리할 수 있습니다</li><li>유연성과 사용자 정의: YAML 파일을 사용하여 워크플로우를 쉽게 구성하고 사용자 정의할 수 있습니다</li><li>광범위한 액션 생태계: GitHub Marketplace에서 다양한 사전 구축된 액션을 사용하거나 직접 만들 수 있습니다</li><li>실시간 피드백: 풀 리퀘스트와 커밋에 대한 워크플로우 상태를 즉시 확인할 수 있습니다</li><li>확장성: 다양한 규모의 프로젝트에 적용 가능하며, 여러 운영 체제와 환경에서 실행할 수 있습니다</li><li>비용 효율성: 공개 저장소에서는 무료로 사용할 수 있으며, 개인 저장소에서도 일정량의 무료 사용 시간을 제공합니다</li><li>커뮤니티 지원: 활발한 커뮤니티를 통해 다양한 액션과 지원을 받을 수 있습니다</li></ol><h3 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h3><ol><li>복잡한 워크플로우 구성: 복잡한 워크플로우를 설계하고 유지보수하는 것이 어려울 수 있습니다, 특히 초보자에게는 더욱 그렇습니다</li><li>리소스 제한: 실행 시간, 디스크 공간 등에 제한이 있어 리소스 집약적인 워크플로우에는 제약이 있을 수 있습니다</li><li>GitHub 의존성: GitHub 플랫폼에 강하게 의존하기 때문에, GitHub의 중단이나 장애가 CI/CD 워크플로우에 영향을 줄 수 있습니다</li><li>디버깅의 어려움: 워크플로우 실행 중 발생하는 문제를 디버깅하는 것이 어려울 수 있습니다</li><li>학습 곡선: YAML 문법과 CI/CD 개념에 익숙하지 않은 사용자에게는 상당한 학습 시간이 필요할 수 있습니다</li><li>실행 시간 제한: 각 작업은 최대 6시간까지만 실행할 수 있어, 매우 긴 작업에는 적합하지 않을 수 있습니다</li><li>API 요청 제한: 시간당 API 요청 횟수에 제한이 있어, 대규모 프로젝트에서는 문제가 될 수 있습니다</li><li>안정성 문제: 때때로 발생하는 중단이나 성능 저하로 인해 작업 시간을 잃을 수 있습니다</li></ol><h3 id=워크플로우-설정-방법>워크플로우 설정 방법<a hidden class=anchor aria-hidden=true href=#워크플로우-설정-방법>#</a></h3><ol><li>워크플로우 파일 생성:<br>프로젝트의 <code>.github/workflows/</code> 디렉토리에 YAML 파일을 생성합니다. 이 파일에 워크플로우를 정의합니다.</li><li>워크플로우 정의:<br>YAML 파일에 원하는 자동화 작업을 정의합니다. 주요 구성 요소는 다음과 같습니다:<ul><li>이벤트 트리거 설정 (예: push, pull request 등)</li><li>작업(jobs) 정의</li><li>실행 환경 지정 (예: ubuntu-latest)</li><li>단계(steps) 정의</li></ul></li><li>커밋 및 푸시:<br>정의된 워크플로우 파일을 저장소에 커밋하고 푸시합니다.</li><li>실행 확인:<br>GitHub 저장소의 Actions 탭에서 워크플로우 실행 상태를 확인할 수 있습니다.</li></ol><h4 id=자주-사용하는-yaml-파일-예시>자주 사용하는 YAML 파일 예시<a hidden class=anchor aria-hidden=true href=#자주-사용하는-yaml-파일-예시>#</a></h4><ol><li><code>name</code>: 워크플로우의 이름을 지정합니다.</li><li><code>on</code>: 워크플로우를 트리거하는 이벤트를 정의합니다. 여기서는 main 브랜치에 대한 push와 pull request 이벤트에 반응합니다.</li><li><code>jobs</code>: 실행할 작업들을 정의합니다. 여기서는 &ldquo;build"라는 하나의 작업만 있습니다.</li><li><code>runs-on</code>: 작업을 실행할 환경을 지정합니다. 여기서는 최신 Ubuntu 환경을 사용합니다.</li><li><code>steps</code>: 작업 내에서 실행할 단계들을 정의합니다. 각 단계는 이름, 사용할 액션 또는 실행할 명령어를 포함합니다.</li><li><code>uses</code>: 미리 정의된 액션을 사용합니다. 예를 들어, <code>actions/checkout@v2</code>는 저장소의 코드를 체크아웃합니다.</li><li><code>run</code>: 직접 셸 명령어를 실행합니다.</li><li><code>if</code>: 조건부로 단계를 실행합니다. 여기서는 main 브랜치에 푸시된 경우에만 배포 단계를 실행합니다.</li><li><code>env</code>: 환경 변수를 설정합니다. 여기서는 비밀 값을 환경 변수로 사용합니다.</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a>
</span><span class=lnt id=hl-0-21><a class=lnlinks href=#hl-0-21>21</a>
</span><span class=lnt id=hl-0-22><a class=lnlinks href=#hl-0-22>22</a>
</span><span class=lnt id=hl-0-23><a class=lnlinks href=#hl-0-23>23</a>
</span><span class=lnt id=hl-0-24><a class=lnlinks href=#hl-0-24>24</a>
</span><span class=lnt id=hl-0-25><a class=lnlinks href=#hl-0-25>25</a>
</span><span class=lnt id=hl-0-26><a class=lnlinks href=#hl-0-26>26</a>
</span><span class=lnt id=hl-0-27><a class=lnlinks href=#hl-0-27>27</a>
</span><span class=lnt id=hl-0-28><a class=lnlinks href=#hl-0-28>28</a>
</span><span class=lnt id=hl-0-29><a class=lnlinks href=#hl-0-29>29</a>
</span><span class=lnt id=hl-0-30><a class=lnlinks href=#hl-0-30>30</a>
</span><span class=lnt id=hl-0-31><a class=lnlinks href=#hl-0-31>31</a>
</span><span class=lnt id=hl-0-32><a class=lnlinks href=#hl-0-32>32</a>
</span><span class=lnt id=hl-0-33><a class=lnlinks href=#hl-0-33>33</a>
</span><span class=lnt id=hl-0-34><a class=lnlinks href=#hl-0-34>34</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>CI/CD Pipeline</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&#34;main&#34;</span><span class=w> </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pull_request</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&#34;main&#34;</span><span class=w> </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout Repository</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Set up Node.js</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-node@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>node-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;14&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Install Dependencies  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>npm install</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Run Tests</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>npm test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy to Production</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>github.ref == &#39;refs/heads/main&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>PRODUCTION_URL</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.PRODUCTION_URL }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>        echo &#34;Deploying to production at $PRODUCTION_URL&#34;
</span></span></span><span class=line><span class=cl><span class=sd>        # 프로덕션 환경에 배포하는 명령어</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=기본적인-nodejs-프로젝트-ci-워크플로우>기본적인 Node.js 프로젝트 CI 워크플로우<a hidden class=anchor aria-hidden=true href=#기본적인-nodejs-프로젝트-ci-워크플로우>#</a></h4><ul><li>여러 Node.js 버전에서 테스트</li><li>자동 의존성 설치 및 빌드</li><li>테스트 자동 실행</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1> 1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2> 2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3> 3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4> 4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5> 5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6> 6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7> 7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8> 8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9> 9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10>10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11>11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12>12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13>13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14>14</a>
</span><span class=lnt id=hl-1-15><a class=lnlinks href=#hl-1-15>15</a>
</span><span class=lnt id=hl-1-16><a class=lnlinks href=#hl-1-16>16</a>
</span><span class=lnt id=hl-1-17><a class=lnlinks href=#hl-1-17>17</a>
</span><span class=lnt id=hl-1-18><a class=lnlinks href=#hl-1-18>18</a>
</span><span class=lnt id=hl-1-19><a class=lnlinks href=#hl-1-19>19</a>
</span><span class=lnt id=hl-1-20><a class=lnlinks href=#hl-1-20>20</a>
</span><span class=lnt id=hl-1-21><a class=lnlinks href=#hl-1-21>21</a>
</span><span class=lnt id=hl-1-22><a class=lnlinks href=#hl-1-22>22</a>
</span><span class=lnt id=hl-1-23><a class=lnlinks href=#hl-1-23>23</a>
</span><span class=lnt id=hl-1-24><a class=lnlinks href=#hl-1-24>24</a>
</span><span class=lnt id=hl-1-25><a class=lnlinks href=#hl-1-25>25</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Node.js CI</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>  </span><span class=c># 워크플로우 트리거 설정</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=l>main ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pull_request</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=l>main ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest </span><span class=w> </span><span class=c># 실행 환경 설정</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>strategy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>matrix</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>node-version</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=m>14.</span><span class=l>x, 16.x, 18.x] </span><span class=w> </span><span class=c># 테스트할 Node.js 버전들</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v3 </span><span class=w> </span><span class=c># 소스코드 체크아웃</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Use Node.js ${{ matrix.node-version }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-node@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>node-version</span><span class=p>:</span><span class=w> </span><span class=l>${{ matrix.node-version }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>npm ci </span><span class=w> </span><span class=c># 의존성 설치</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>npm run build </span><span class=w> </span><span class=c># 빌드</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>npm test </span><span class=w> </span><span class=c># 테스트 실행</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=docker-이미지-빌드-및-배포-워크플로우>Docker 이미지 빌드 및 배포 워크플로우<a hidden class=anchor aria-hidden=true href=#docker-이미지-빌드-및-배포-워크플로우>#</a></h4><ul><li>Docker Hub 자동 인증</li><li>이미지 자동 빌드 및 푸시</li><li>보안 자격 증명 사용</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1> 1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2> 2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3> 3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4> 4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5> 5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6> 6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7> 7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8> 8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9> 9</a>
</span><span class=lnt id=hl-2-10><a class=lnlinks href=#hl-2-10>10</a>
</span><span class=lnt id=hl-2-11><a class=lnlinks href=#hl-2-11>11</a>
</span><span class=lnt id=hl-2-12><a class=lnlinks href=#hl-2-12>12</a>
</span><span class=lnt id=hl-2-13><a class=lnlinks href=#hl-2-13>13</a>
</span><span class=lnt id=hl-2-14><a class=lnlinks href=#hl-2-14>14</a>
</span><span class=lnt id=hl-2-15><a class=lnlinks href=#hl-2-15>15</a>
</span><span class=lnt id=hl-2-16><a class=lnlinks href=#hl-2-16>16</a>
</span><span class=lnt id=hl-2-17><a class=lnlinks href=#hl-2-17>17</a>
</span><span class=lnt id=hl-2-18><a class=lnlinks href=#hl-2-18>18</a>
</span><span class=lnt id=hl-2-19><a class=lnlinks href=#hl-2-19>19</a>
</span><span class=lnt id=hl-2-20><a class=lnlinks href=#hl-2-20>20</a>
</span><span class=lnt id=hl-2-21><a class=lnlinks href=#hl-2-21>21</a>
</span><span class=lnt id=hl-2-22><a class=lnlinks href=#hl-2-22>22</a>
</span><span class=lnt id=hl-2-23><a class=lnlinks href=#hl-2-23>23</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Docker Build and Push</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=l>main ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Login to Docker Hub </span><span class=w> </span><span class=c># Docker Hub 로그인</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>docker/login-action@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.DOCKERHUB_USERNAME }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.DOCKERHUB_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build and push </span><span class=w> </span><span class=c># 이미지 빌드 및 푸시</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>docker/build-push-action@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>push</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>tags</span><span class=p>:</span><span class=w> </span><span class=l>user/app:latest</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=자동화된-릴리스-생성-워크플로우>자동화된 릴리스 생성 워크플로우<a hidden class=anchor aria-hidden=true href=#자동화된-릴리스-생성-워크플로우>#</a></h4><ul><li>태그 기반 트리거</li><li>자동 릴리스 노트 생성</li><li>GitHub 릴리스 자동화</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span><span class=lnt id=hl-3-12><a class=lnlinks href=#hl-3-12>12</a>
</span><span class=lnt id=hl-3-13><a class=lnlinks href=#hl-3-13>13</a>
</span><span class=lnt id=hl-3-14><a class=lnlinks href=#hl-3-14>14</a>
</span><span class=lnt id=hl-3-15><a class=lnlinks href=#hl-3-15>15</a>
</span><span class=lnt id=hl-3-16><a class=lnlinks href=#hl-3-16>16</a>
</span><span class=lnt id=hl-3-17><a class=lnlinks href=#hl-3-17>17</a>
</span><span class=lnt id=hl-3-18><a class=lnlinks href=#hl-3-18>18</a>
</span><span class=lnt id=hl-3-19><a class=lnlinks href=#hl-3-19>19</a>
</span><span class=lnt id=hl-3-20><a class=lnlinks href=#hl-3-20>20</a>
</span><span class=lnt id=hl-3-21><a class=lnlinks href=#hl-3-21>21</a>
</span><span class=lnt id=hl-3-22><a class=lnlinks href=#hl-3-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Create Release</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>tags</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=s1>&#39;v*&#39;</span><span class=w>  </span><span class=c># v로 시작하는 모든 태그에 대해 실행</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Create Release </span><span class=w> </span><span class=c># GitHub 릴리스 생성</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/create-release@v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>GITHUB_TOKEN</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITHUB_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>tag_name</span><span class=p>:</span><span class=w> </span><span class=l>${{ github.ref }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>release_name</span><span class=p>:</span><span class=w> </span><span class=l>Release ${{ github.ref }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>draft</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>prerelease</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=스케줄링된-작업-워크플로우>스케줄링된 작업 워크플로우<a hidden class=anchor aria-hidden=true href=#스케줄링된-작업-워크플로우>#</a></h4><ul><li>Cron 기반 실행</li><li>정기적인 유지보수 작업</li><li>아티팩트 관리</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span><span class=lnt id=hl-4-13><a class=lnlinks href=#hl-4-13>13</a>
</span><span class=lnt id=hl-4-14><a class=lnlinks href=#hl-4-14>14</a>
</span><span class=lnt id=hl-4-15><a class=lnlinks href=#hl-4-15>15</a>
</span><span class=lnt id=hl-4-16><a class=lnlinks href=#hl-4-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Scheduled Tasks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>schedule</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>cron</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;0 0 * * *&#39;</span><span class=w>  </span><span class=c># 매일 자정에 실행</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>cleanup</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Cleanup old artifacts </span><span class=w> </span><span class=c># 오래된 아티팩트 정리</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>c-hive/gha-remove-artifacts@v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>age</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;1 week&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>skip-recent</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=pr-자동-리뷰-워크플로우>PR 자동 리뷰 워크플로우<a hidden class=anchor aria-hidden=true href=#pr-자동-리뷰-워크플로우>#</a></h4><ul><li>자동 코드 검사</li><li>테스트 실행</li><li>코드 커버리지 리포트 생성</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1> 1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2> 2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3> 3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4> 4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5> 5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6> 6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7> 7</a>
</span><span class=lnt id=hl-5-8><a class=lnlinks href=#hl-5-8> 8</a>
</span><span class=lnt id=hl-5-9><a class=lnlinks href=#hl-5-9> 9</a>
</span><span class=lnt id=hl-5-10><a class=lnlinks href=#hl-5-10>10</a>
</span><span class=lnt id=hl-5-11><a class=lnlinks href=#hl-5-11>11</a>
</span><span class=lnt id=hl-5-12><a class=lnlinks href=#hl-5-12>12</a>
</span><span class=lnt id=hl-5-13><a class=lnlinks href=#hl-5-13>13</a>
</span><span class=lnt id=hl-5-14><a class=lnlinks href=#hl-5-14>14</a>
</span><span class=lnt id=hl-5-15><a class=lnlinks href=#hl-5-15>15</a>
</span><span class=lnt id=hl-5-16><a class=lnlinks href=#hl-5-16>16</a>
</span><span class=lnt id=hl-5-17><a class=lnlinks href=#hl-5-17>17</a>
</span><span class=lnt id=hl-5-18><a class=lnlinks href=#hl-5-18>18</a>
</span><span class=lnt id=hl-5-19><a class=lnlinks href=#hl-5-19>19</a>
</span><span class=lnt id=hl-5-20><a class=lnlinks href=#hl-5-20>20</a>
</span><span class=lnt id=hl-5-21><a class=lnlinks href=#hl-5-21>21</a>
</span><span class=lnt id=hl-5-22><a class=lnlinks href=#hl-5-22>22</a>
</span><span class=lnt id=hl-5-23><a class=lnlinks href=#hl-5-23>23</a>
</span><span class=lnt id=hl-5-24><a class=lnlinks href=#hl-5-24>24</a>
</span><span class=lnt id=hl-5-25><a class=lnlinks href=#hl-5-25>25</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>PR Review</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pull_request</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>types</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>opened, synchronize]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>review</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Run ESLint </span><span class=w> </span><span class=c># ESLint 검사</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>        npm install
</span></span></span><span class=line><span class=cl><span class=sd>        npm run lint
</span></span></span><span class=line><span class=cl><span class=sd>        </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Run tests </span><span class=w> </span><span class=c># 테스트 실행</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>npm test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Code Coverage </span><span class=w> </span><span class=c># 코드 커버리지 리포트</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>codecov/codecov-action@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.CODECOV_TOKEN }}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=프라이빗-컨테이너-레지스트리를-사용하는-워크플로우-설정-방법>프라이빗 컨테이너 레지스트리를 사용하는 워크플로우 설정 방법<a hidden class=anchor aria-hidden=true href=#프라이빗-컨테이너-레지스트리를-사용하는-워크플로우-설정-방법>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15>15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16>16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17>17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18>18</a>
</span><span class=lnt id=hl-6-19><a class=lnlinks href=#hl-6-19>19</a>
</span><span class=lnt id=hl-6-20><a class=lnlinks href=#hl-6-20>20</a>
</span><span class=lnt id=hl-6-21><a class=lnlinks href=#hl-6-21>21</a>
</span><span class=lnt id=hl-6-22><a class=lnlinks href=#hl-6-22>22</a>
</span><span class=lnt id=hl-6-23><a class=lnlinks href=#hl-6-23>23</a>
</span><span class=lnt id=hl-6-24><a class=lnlinks href=#hl-6-24>24</a>
</span><span class=lnt id=hl-6-25><a class=lnlinks href=#hl-6-25>25</a>
</span><span class=lnt id=hl-6-26><a class=lnlinks href=#hl-6-26>26</a>
</span><span class=lnt id=hl-6-27><a class=lnlinks href=#hl-6-27>27</a>
</span><span class=lnt id=hl-6-28><a class=lnlinks href=#hl-6-28>28</a>
</span><span class=lnt id=hl-6-29><a class=lnlinks href=#hl-6-29>29</a>
</span><span class=lnt id=hl-6-30><a class=lnlinks href=#hl-6-30>30</a>
</span><span class=lnt id=hl-6-31><a class=lnlinks href=#hl-6-31>31</a>
</span><span class=lnt id=hl-6-32><a class=lnlinks href=#hl-6-32>32</a>
</span><span class=lnt id=hl-6-33><a class=lnlinks href=#hl-6-33>33</a>
</span><span class=lnt id=hl-6-34><a class=lnlinks href=#hl-6-34>34</a>
</span><span class=lnt id=hl-6-35><a class=lnlinks href=#hl-6-35>35</a>
</span><span class=lnt id=hl-6-36><a class=lnlinks href=#hl-6-36>36</a>
</span><span class=lnt id=hl-6-37><a class=lnlinks href=#hl-6-37>37</a>
</span><span class=lnt id=hl-6-38><a class=lnlinks href=#hl-6-38>38</a>
</span><span class=lnt id=hl-6-39><a class=lnlinks href=#hl-6-39>39</a>
</span><span class=lnt id=hl-6-40><a class=lnlinks href=#hl-6-40>40</a>
</span><span class=lnt id=hl-6-41><a class=lnlinks href=#hl-6-41>41</a>
</span><span class=lnt id=hl-6-42><a class=lnlinks href=#hl-6-42>42</a>
</span><span class=lnt id=hl-6-43><a class=lnlinks href=#hl-6-43>43</a>
</span><span class=lnt id=hl-6-44><a class=lnlinks href=#hl-6-44>44</a>
</span><span class=lnt id=hl-6-45><a class=lnlinks href=#hl-6-45>45</a>
</span><span class=lnt id=hl-6-46><a class=lnlinks href=#hl-6-46>46</a>
</span><span class=lnt id=hl-6-47><a class=lnlinks href=#hl-6-47>47</a>
</span><span class=lnt id=hl-6-48><a class=lnlinks href=#hl-6-48>48</a>
</span><span class=lnt id=hl-6-49><a class=lnlinks href=#hl-6-49>49</a>
</span><span class=lnt id=hl-6-50><a class=lnlinks href=#hl-6-50>50</a>
</span><span class=lnt id=hl-6-51><a class=lnlinks href=#hl-6-51>51</a>
</span><span class=lnt id=hl-6-52><a class=lnlinks href=#hl-6-52>52</a>
</span><span class=lnt id=hl-6-53><a class=lnlinks href=#hl-6-53>53</a>
</span><span class=lnt id=hl-6-54><a class=lnlinks href=#hl-6-54>54</a>
</span><span class=lnt id=hl-6-55><a class=lnlinks href=#hl-6-55>55</a>
</span><span class=lnt id=hl-6-56><a class=lnlinks href=#hl-6-56>56</a>
</span><span class=lnt id=hl-6-57><a class=lnlinks href=#hl-6-57>57</a>
</span><span class=lnt id=hl-6-58><a class=lnlinks href=#hl-6-58>58</a>
</span><span class=lnt id=hl-6-59><a class=lnlinks href=#hl-6-59>59</a>
</span><span class=lnt id=hl-6-60><a class=lnlinks href=#hl-6-60>60</a>
</span><span class=lnt id=hl-6-61><a class=lnlinks href=#hl-6-61>61</a>
</span><span class=lnt id=hl-6-62><a class=lnlinks href=#hl-6-62>62</a>
</span><span class=lnt id=hl-6-63><a class=lnlinks href=#hl-6-63>63</a>
</span><span class=lnt id=hl-6-64><a class=lnlinks href=#hl-6-64>64</a>
</span><span class=lnt id=hl-6-65><a class=lnlinks href=#hl-6-65>65</a>
</span><span class=lnt id=hl-6-66><a class=lnlinks href=#hl-6-66>66</a>
</span><span class=lnt id=hl-6-67><a class=lnlinks href=#hl-6-67>67</a>
</span><span class=lnt id=hl-6-68><a class=lnlinks href=#hl-6-68>68</a>
</span><span class=lnt id=hl-6-69><a class=lnlinks href=#hl-6-69>69</a>
</span><span class=lnt id=hl-6-70><a class=lnlinks href=#hl-6-70>70</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build and Push to Harbor Registry</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=l>main ]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># 특정 태그에 대해서만 실행하고 싶다면 아래처럼 설정</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># tags:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c>#   - &#39;v*&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Harbor 레지스트리 설정</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>REGISTRY</span><span class=p>:</span><span class=w> </span><span class=l>harbor.example.com            </span><span class=w> </span><span class=c># Harbor 레지스트리 주소</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>REPOSITORY</span><span class=p>:</span><span class=w> </span><span class=l>project-name/application    </span><span class=w> </span><span class=c># Harbor 프로젝트와 이미지명</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>IMAGE_TAG</span><span class=p>:</span><span class=w> </span><span class=l>${{ github.sha }}           </span><span class=w> </span><span class=c># 이미지 태그 (커밋 해시 사용)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build-and-push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout code</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># QEMU 설정 (다중 아키텍처 빌드시 필요)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Set up QEMU</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>docker/setup-qemu-action@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Docker Buildx 설정</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Set up Docker Buildx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>docker/setup-buildx-action@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Harbor 레지스트리 로그인</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Login to Harbor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>docker/login-action@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>registry</span><span class=p>:</span><span class=w> </span><span class=l>${{ env.REGISTRY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>username</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.HARBOR_USERNAME }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.HARBOR_PASSWORD }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 도커 메타데이터 설정</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Extract Docker metadata</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>meta</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>docker/metadata-action@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>images</span><span class=p>:</span><span class=w> </span><span class=l>${{ env.REGISTRY }}/${{ env.REPOSITORY }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>tags</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            type=raw,value=${{ env.IMAGE_TAG }}
</span></span></span><span class=line><span class=cl><span class=sd>            type=raw,value=latest
</span></span></span><span class=line><span class=cl><span class=sd>            type=ref,event=branch
</span></span></span><span class=line><span class=cl><span class=sd>            type=ref,event=tag</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 이미지 빌드 및 푸시</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build and push Docker image</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>docker/build-push-action@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>context</span><span class=p>:</span><span class=w> </span><span class=l>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>push</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>tags</span><span class=p>:</span><span class=w> </span><span class=l>${{ steps.meta.outputs.tags }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>labels</span><span class=p>:</span><span class=w> </span><span class=l>${{ steps.meta.outputs.labels }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>platforms</span><span class=p>:</span><span class=w> </span><span class=l>linux/amd64,linux/arm64 </span><span class=w> </span><span class=c># 필요한 플랫폼 지정</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>cache-from</span><span class=p>:</span><span class=w> </span><span class=l>type=registry,ref=${{ env.REGISTRY }}/${{ env.REPOSITORY }}:buildcache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>cache-to</span><span class=p>:</span><span class=w> </span><span class=l>type=registry,ref=${{ env.REGISTRY }}/${{ env.REPOSITORY }}:buildcache,mode=max</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 배포 결과 알림 (선택사항)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Notify deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>success()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          echo &#34;Image successfully built and pushed to Harbor:&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          echo &#34;Registry: ${{ env.REGISTRY }}&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          echo &#34;Repository: ${{ env.REPOSITORY }}&#34;
</span></span></span><span class=line><span class=cl><span class=sd>          echo &#34;Tags: ${{ steps.meta.outputs.tags }}&#34;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h5 id=주요-설정-사항>주요 설정 사항<a hidden class=anchor aria-hidden=true href=#주요-설정-사항>#</a></h5><ol><li><p>환경 변수 설정</p><ul><li><code>REGISTRY</code>: Harbor 레지스트리의 URL을 설정합니다.</li><li><code>REPOSITORY</code>: Harbor 내의 프로젝트명과 이미지명을 설정합니다.</li><li><code>IMAGE_TAG</code>: 이미지 태그 전략을 설정합니다 (여기서는 Git commit hash를 사용).</li></ul></li><li><p>GitHub Secrets 설정<br>GitHub 레포지토리의 Settings -> Secrets and variables -> Actions에서 다음 시크릿을 설정해야 합니다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>HARBOR_USERNAME: Harbor 레지스트리 사용자명
</span></span><span class=line><span class=cl>HARBOR_PASSWORD: Harbor 레지스트리 비밀번호 또는 토큰
</span></span></code></pre></td></tr></table></div></div></li><li><p>주요 기능 설명</p><ul><li>멀티 아키텍처 지원 (QEMU 및 Buildx 설정)</li><li>레이어 캐싱을 통한 빌드 최적화</li><li>다양한 태깅 전략 지원</li><li>빌드 결과 알림</li></ul></li><li><p>태그 전략<br>이 워크플로우는 다음과 같은 태그들을 생성합니다:</p><ul><li>Git commit hash 기반 태그</li><li>latest 태그</li><li>브랜치명 기반 태그</li><li>Git 태그 기반 태그 (태그 푸시 시)</li></ul></li><li><p>보안 고려사항</p><ul><li>Harbor의 자체 서명 인증서를 사용하는 경우, 추가적인 인증서 설정이 필요할 수 있습니다.</li><li>프라이빗 레지스트리 접근을 위한 자격 증명은 반드시 GitHub Secrets를 통해 관리해야 합니다.</li></ul></li></ol><p>확인할 사항들</p><ol><li>Harbor 레지스트리 URL을 올바르게 설정했는지 확인</li><li>프로젝트명과 이미지명이 Harbor의 설정과 일치하는지 확인</li><li>필요한 GitHub Secrets가 모두 설정되어 있는지 확인</li><li>Harbor 프로젝트의 접근 권한이 올바르게 설정되어 있는지 확인</li></ol><h3 id=커스텀-액션을-만드는-과정>커스텀 액션을 만드는 과정<a hidden class=anchor aria-hidden=true href=#커스텀-액션을-만드는-과정>#</a></h3><p>커스텀 액션은 두 가지 방식으로 만들 수 있습니다:</p><ol><li>별도의 레포지토리에 생성<ul><li>버전 관리와 재사용이 용이</li></ul></li><li>워크플로우가 있는 프로젝트 내부에 생성<ul><li><code>.github/actions/</code> 디렉토리에 위치시켜야 함.</li></ul></li></ol><h4 id=커스텀-액션-생성-과정>커스텀 액션 생성 과정<a hidden class=anchor aria-hidden=true href=#커스텀-액션-생성-과정>#</a></h4><ol><li>메타데이터 파일 작성:<ul><li><code>action.yml</code> 또는 <code>action.yaml</code> 파일을 생성합니다.</li><li>액션의 이름, 설명, 입력, 출력 등을 정의합니다.</li></ul></li><li>액션 유형 선택:<ul><li>Docker 컨테이너 액션</li><li>JavaScript 액션</li><li>복합 액션</li></ul></li><li>액션 로직 구현:<ul><li>선택한 유형에 따라 코드를 작성합니다.</li><li>Docker 액션의 경우 Dockerfile 작성</li><li>JavaScript 액션의 경우 index.js 파일 작성</li></ul></li><li>README 파일 작성:<ul><li>액션 사용 방법, 입력/출력 인자, 예시 등을 포함합니다.</li></ul></li><li>테스트 및 빌드:<ul><li>액션을 로컬에서 테스트하고 필요한 경우 빌드합니다.</li></ul></li><li>버전 관리:<ul><li>시맨틱 버저닝을 사용하여 액션 버전을 관리합니다.</li></ul></li><li>GitHub Marketplace에 게시 (선택사항):<ul><li>액션을 공개하고 싶다면 Marketplace에 게시할 수 있습니다.</li></ul></li></ol><h4 id=예시-actionyml-파일>예시 <code>action.yml</code> 파일<a hidden class=anchor aria-hidden=true href=#예시-actionyml-파일>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;Hello World JS Action&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;Greet someone and record the time&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>inputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>who-to-greet</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;Who to greet&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>required</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;World&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>outputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>time</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;The time we greeted you&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>runs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>using</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;node16&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>main</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;index.js&#39;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>예시의 설정 파일을 이용하여 워크플로우에서 커스텀 액션을 사용하고자 할 때</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a>
</span><span class=lnt id=hl-9-11><a class=lnlinks href=#hl-9-11>11</a>
</span><span class=lnt id=hl-9-12><a class=lnlinks href=#hl-9-12>12</a>
</span><span class=lnt id=hl-9-13><a class=lnlinks href=#hl-9-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># 해당 디렉토리 내의 `action.yml` 파일을 자동으로 찾아 실행</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># 여러 커스텀 액션이 있을 때 혼란 가능성 있음</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Run Custom Greeting</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>./.github/actions/ </span><span class=w> </span><span class=c># 로컬 액션 사용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;GitHub Actions&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># 해당 디렉토리 내의 특정 액션을 직접 지정	</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># 더 명확하고 유지보수가 용이</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Use custom greeting action</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>./.github/actions/action </span><span class=w> </span><span class=c># 커스텀 액션 사용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;GitHub Actions&#39;</span><span class=w>    
</span></span></span></code></pre></td></tr></table></div></div><h4 id=다른-저장소의-액션을-사용하는-방법>다른 저장소의 액션을 사용하는 방법<a hidden class=anchor aria-hidden=true href=#다른-저장소의-액션을-사용하는-방법>#</a></h4><ol><li>특정 버전(태그) 사용:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/hello-world-action@v1   </span><span class=w> </span><span class=c># v1 태그 사용</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ol start=2><li>특정 커밋 SHA 사용:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/hello-world-action@67cbd44   </span><span class=w> </span><span class=c># 커밋 해시 사용</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ol start=3><li>브랜치 사용:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/hello-world-action@main   </span><span class=w> </span><span class=c># main 브랜치 사용</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>보안과 안정성을 위해 특정 버전이나 커밋 SHA를 사용하는 것을 권장합니다. 브랜치를 사용하면 예기치 않은 변경으로 인한 워크플로우 실패 위험이 있습니다.</p><h4 id=동일한-github-계정의-다른-저장소에-있는-액션을-사용하는-경우의-설정-방법>동일한 GitHub 계정의 다른 저장소에 있는 액션을 사용하는 경우의 설정 방법<a hidden class=anchor aria-hidden=true href=#동일한-github-계정의-다른-저장소에-있는-액션을-사용하는-경우의-설정-방법>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span>{<span class=l>owner}/{repo-name}/path/to/action@{ref}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1>1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2>2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3>3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4>4</a>
</span><span class=lnt id=hl-14-5><a class=lnlinks href=#hl-14-5>5</a>
</span><span class=lnt id=hl-14-6><a class=lnlinks href=#hl-14-6>6</a>
</span><span class=lnt id=hl-14-7><a class=lnlinks href=#hl-14-7>7</a>
</span><span class=lnt id=hl-14-8><a class=lnlinks href=#hl-14-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># 메인 브랜치 사용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>my-username/shared-actions/.github/actions/hello-world@main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># 특정 태그 사용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>my-username/shared-actions/.github/actions/hello-world@v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># 특정 커밋 사용</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>my-username/shared-actions/.github/actions/hello-world@67cbd44</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>주의: 저장소가 private인 경우, Personal Access Token(PAT)이 필요할 수 있습니다.</p><h3 id=테스트를-자동화하는-방법>테스트를 자동화하는 방법<a hidden class=anchor aria-hidden=true href=#테스트를-자동화하는-방법>#</a></h3><ol><li><p>워크플로우 파일 생성:<br><code>.github/workflows</code> 디렉토리에 YAML 파일(예: <code>test.yml</code>)을 생성합니다.</p></li><li><p>트리거 이벤트 설정:<br><code>on</code> 키워드를 사용하여 워크플로우를 실행할 이벤트를 지정합니다. 예를 들어, push 이벤트나 pull request 이벤트에 반응하도록 설정할 수 있습니다.</p></li><li><p>작업 정의:<br><code>jobs</code> 섹션에서 테스트 작업을 정의합니다. 실행 환경(예: ubuntu-latest)을 지정합니다.</p></li><li><p>단계 설정:</p><ul><li>코드 체크아웃: <code>actions/checkout@v3</code>를 사용하여 저장소 코드를 가져옵니다.</li><li>환경 설정: 필요한 런타임(예: Node.js)을 설정합니다.</li><li>의존성 설치: 필요한 패키지를 설치합니다.</li><li>테스트 실행: 테스트 명령어를 실행합니다.</li></ul></li><li><p>테스트 결과 처리:<br>테스트 결과를 GitHub PR 코멘트로 추가하거나, 외부 도구로 보고할 수 있습니다.</p></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1> 1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2> 2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3> 3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4> 4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5> 5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6> 6</a>
</span><span class=lnt id=hl-15-7><a class=lnlinks href=#hl-15-7> 7</a>
</span><span class=lnt id=hl-15-8><a class=lnlinks href=#hl-15-8> 8</a>
</span><span class=lnt id=hl-15-9><a class=lnlinks href=#hl-15-9> 9</a>
</span><span class=lnt id=hl-15-10><a class=lnlinks href=#hl-15-10>10</a>
</span><span class=lnt id=hl-15-11><a class=lnlinks href=#hl-15-11>11</a>
</span><span class=lnt id=hl-15-12><a class=lnlinks href=#hl-15-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>push, pull_request]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>test</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/setup-node@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>node-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;14&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>npm ci</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>npm test</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2><p><a href=https://yozm.wishket.com/magazine/detail/1666/>GitHub Actions로 App 자동으로 배포하기</a><br><a href=https://github.com/features/actions>GitHub Actions · GitHub</a><br><a href=https://docs.github.com/ko/actions>GitHub Actions 설명서 - GitHub Docs</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/software-development/>Software-Development</a></li><li><a href=https://buenhyden.github.io/tags/software-maintenance/>Software-Maintenance</a></li><li><a href=https://buenhyden.github.io/tags/devops/>DevOps</a></li><li><a href=https://buenhyden.github.io/tags/ci-cd/>CI-CD</a></li><li><a href=https://buenhyden.github.io/tags/github-actions/>Github-Actions</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/software-development-and-maintenance/devops/ci-and-cd/jenkins/><span class=title>« Prev</span><br><span>Jenkins</span>
</a><a class=next href=https://buenhyden.github.io/posts/software-development-and-maintenance/devops/ci-and-cd/gitlab-ci/><span class=title>Next »</span><br><span>Gitlab CI</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>