<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>OAuth | hyunyoun's Blog</title>
<meta name=keywords content="Backend,API-Design,Authentication-Methods,OAuth"><meta name=description content="OAuth는 현대 웹과 모바일 애플리케이션의 인증 및 권한 부여 방식을 근본적으로 변화시킨 오픈 표준 프로토콜이다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/security/access-control/authentication/protocols/oauth/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.8762af4fa9ee176c57f72565b721f234162fc7a9c882a271e0a1f68c4e89fb34.css integrity="sha256-h2KvT6nuF2xX9yVltyHyNBYvx6nIgqJx4KH2jE6J+zQ=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://buenhyden.github.io/posts/security/access-control/authentication/protocols/oauth/index.xml><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/security/access-control/authentication/protocols/oauth/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/security/access-control/authentication/protocols/oauth/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="OAuth"><meta property="og:description" content="OAuth는 현대 웹과 모바일 애플리케이션의 인증 및 권한 부여 방식을 근본적으로 변화시킨 오픈 표준 프로토콜이다."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="OAuth"><meta name=twitter:description content="OAuth는 현대 웹과 모바일 애플리케이션의 인증 및 권한 부여 방식을 근본적으로 변화시킨 오픈 표준 프로토콜이다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"기술 블로그","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Security","item":""},{"@type":"ListItem","position":3,"name":"Access Control","item":""},{"@type":"ListItem","position":4,"name":"Authentication Methods","item":"https://buenhyden.github.io/posts/security/access-control/authentication/"},{"@type":"ListItem","position":5,"name":"OAuth","item":"https://buenhyden.github.io/posts/security/access-control/authentication/protocols/oauth/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>기술 블로그</a>&nbsp;»&nbsp;<a href>Security</a>&nbsp;»&nbsp;<a href>Access Control</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/security/access-control/authentication/>Authentication Methods</a></div><h1>OAuth</h1><div class=post-description>OAuth는 현대 웹과 모바일 애플리케이션의 인증 및 권한 부여 방식을 근본적으로 변화시킨 오픈 표준 프로토콜이다.</div></header><div class=post-content><h2 id=oauth>OAuth<a hidden class=anchor aria-hidden=true href=#oauth>#</a></h2><p>OAuth는 현대 웹과 모바일 애플리케이션의 인증 및 권한 부여 방식을 근본적으로 변화시킨 오픈 표준 프로토콜이다. 사용자의 민감한 인증 정보를 공유하지 않고도 제3자 애플리케이션이 사용자 리소스에 접근할 수 있게 해주는 이 기술은 현재 대부분의 주요 인터넷 서비스에서 필수적인 요소로 자리잡았다.</p><h3 id=oauth의-등장-배경과-역사>OAuth의 등장 배경과 역사<a hidden class=anchor aria-hidden=true href=#oauth의-등장-배경과-역사>#</a></h3><h4 id=전통적인-인증-방식의-한계>전통적인 인증 방식의 한계<a hidden class=anchor aria-hidden=true href=#전통적인-인증-방식의-한계>#</a></h4><p>OAuth가 등장하기 전, 사용자가 제3자 서비스에 자신의 리소스에 대한 접근 권한을 부여하는 방식은 상당히 제한적이었다. 가장 일반적인 방법은 사용자가 자신의 아이디와 비밀번호를 제3자 애플리케이션에 직접 제공하는 것이었다.</p><p>이 방식은 다음과 같은 심각한 보안 위험을 내포하고 있었다:</p><ol><li>제3자 애플리케이션이 사용자의 모든 데이터에 무제한 접근 가능</li><li>접근 권한을 세부적으로 제어할 수 없음</li><li>비밀번호 변경 시 모든 연결된 서비스에 영향</li><li>제3자 애플리케이션이 사용자의 비밀번호를 저장해야 함</li><li>비밀번호 노출 시 모든 계정이 위험에 처함</li></ol><h4 id=oauth의-탄생>OAuth의 탄생<a hidden class=anchor aria-hidden=true href=#oauth의-탄생>#</a></h4><p>이러한 문제를 해결하기 위해 2006년 트위터의 개발자 Blaine Cook과 Flickr의 인증 API를 개발하던 사람들이 함께 작업을 시작했다. 2007년에 초기 OAuth 드래프트가 발표되었고, 2010년에 OAuth 1.0 프로토콜이 RFC 5849로 공식화되었다.</p><p>그러나 OAuth 1.0은 구현이 복잡하고 모바일 애플리케이션 지원이 제한적이라는 문제가 있었다. 이러한 한계를 극복하기 위해 OAuth 2.0이 개발되었으며, 2012년 RFC 6749와 RFC 6750으로 표준화되었다. OAuth 2.0은 이전 버전과 호환되지 않는 완전히 새로운 프로토콜로, 현재 널리 사용되고 있는 버전이다.</p><h3 id=oauth-20의-주요-인가-흐름-grant-types>OAuth 2.0의 주요 인가 흐름 (Grant Types)<a hidden class=anchor aria-hidden=true href=#oauth-20의-주요-인가-흐름-grant-types>#</a></h3><p>OAuth 2.0은 다양한 사용 사례에 대응하기 위해 여러 인가 흐름(권한 부여 방식)을 제공한다:</p><h4 id=인가-코드-승인-authorization-code-grant>인가 코드 승인 (Authorization Code Grant)<a hidden class=anchor aria-hidden=true href=#인가-코드-승인-authorization-code-grant>#</a></h4><p>가장 일반적으로 사용되는 흐름으로, 웹 애플리케이션에 적합하다. 클라이언트 비밀키를 안전하게 보관할 수 있는 애플리케이션에 권장된다.</p><p><strong>작동 순서</strong>:</p><ol><li>클라이언트가 사용자를 인가 서버로 리다이렉션한다.</li><li>사용자가 인증하고 클라이언트에게 권한을 부여한다.</li><li>인가 서버가 인가 코드와 함께 사용자를 클라이언트로 리다이렉션한다.</li><li>클라이언트는 인가 코드와 자신의 비밀키를 인가 서버에 제출한다.</li><li>인가 서버는 액세스 토큰(및 선택적으로 리프레시 토큰)을 클라이언트에게 발급한다.</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a>
</span><span class=lnt id=hl-0-21><a class=lnlinks href=#hl-0-21>21</a>
</span><span class=lnt id=hl-0-22><a class=lnlinks href=#hl-0-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>+----------+
</span></span><span class=line><span class=cl>| Resource |
</span></span><span class=line><span class=cl>|   Owner  |
</span></span><span class=line><span class=cl>+----------+
</span></span><span class=line><span class=cl>     ^
</span></span><span class=line><span class=cl>     |
</span></span><span class=line><span class=cl>    (2)
</span></span><span class=line><span class=cl>     |
</span></span><span class=line><span class=cl>     v
</span></span><span class=line><span class=cl>+---------+          Client Identifier      +---------------+
</span></span><span class=line><span class=cl>|         |       &amp; Redirection URI         |               |
</span></span><span class=line><span class=cl>|         |----(1)-- Authorization Request -&gt;|   Resource    |
</span></span><span class=line><span class=cl>| Client  |                                 |     Owner     |
</span></span><span class=line><span class=cl>|         |&lt;---(2)-- Authorization Code -----|               |
</span></span><span class=line><span class=cl>|         |                                 +---------------+
</span></span><span class=line><span class=cl>|         |                                 
</span></span><span class=line><span class=cl>|         |                                 +---------------+
</span></span><span class=line><span class=cl>|         |----(3)-- Authorization Code ----&gt;|               |
</span></span><span class=line><span class=cl>|         |       &amp; Redirection URI         | Authorization |
</span></span><span class=line><span class=cl>|         |                                 |     Server    |
</span></span><span class=line><span class=cl>|         |&lt;---(4)------ Access Token ------|               |
</span></span><span class=line><span class=cl>+---------+                                 +---------------+
</span></span></code></pre></td></tr></table></div></div><h4 id=암시적-승인-implicit-grant>암시적 승인 (Implicit Grant)<a hidden class=anchor aria-hidden=true href=#암시적-승인-implicit-grant>#</a></h4><p>주로 클라이언트 측 JavaScript 애플리케이션을 위한 단순화된 흐름이다. 보안상의 이유로 최신 OAuth 2.0 보안 권장 사항에서는 사용을 권장하지 않는다.</p><p><strong>작동 순서</strong>:</p><ol><li>클라이언트가 사용자를 인가 서버로 리다이렉션한다.</li><li>사용자가 인증하고 클라이언트에게 권한을 부여한다.</li><li>인가 서버가 액세스 토큰을 URL 프래그먼트(#)에 포함하여 사용자를 클라이언트로 리다이렉션한다.</li><li>클라이언트의 JavaScript가 URL에서 액세스 토큰을 추출한다.</li></ol><h4 id=리소스-소유자-비밀번호-자격-증명-승인-resource-owner-password-credentials-grant>리소스 소유자 비밀번호 자격 증명 승인 (Resource Owner Password Credentials Grant)<a hidden class=anchor aria-hidden=true href=#리소스-소유자-비밀번호-자격-증명-승인-resource-owner-password-credentials-grant>#</a></h4><p>사용자의 비밀번호를 직접 사용하는 방식으로, 클라이언트가 매우 신뢰할 수 있는 애플리케이션(자사 개발 앱 등)에만 사용해야 한다.</p><p><strong>작동 순서</strong>:</p><ol><li>사용자가 클라이언트에게 직접 사용자 이름과 비밀번호를 제공한다.</li><li>클라이언트는 이 자격 증명을 사용하여 인가 서버에 액세스 토큰을 요청한다.</li><li>인가 서버는 자격 증명을 검증하고 액세스 토큰을 발급한다.</li></ol><h4 id=클라이언트-자격-증명-승인-client-credentials-grant>클라이언트 자격 증명 승인 (Client Credentials Grant)<a hidden class=anchor aria-hidden=true href=#클라이언트-자격-증명-승인-client-credentials-grant>#</a></h4><p>클라이언트가 자신을 대신하여(사용자 맥락 없이) 액세스 토큰을 요청할 때 사용된다. 주로 서버 간 인증에 사용된다.</p><p><strong>작동 순서</strong>:</p><ol><li>클라이언트가 자신의 ID와 비밀키를 사용하여 인가 서버에 액세스 토큰을 요청한다.</li><li>인가 서버는 클라이언트를 인증하고 액세스 토큰을 발급한다.</li></ol><h4 id=장치-코드-승인-device-code-grant-rfc-8628>장치 코드 승인 (Device Code Grant, RFC 8628)<a hidden class=anchor aria-hidden=true href=#장치-코드-승인-device-code-grant-rfc-8628>#</a></h4><p>입력이 제한된 장치(예: 스마트 TV)를 위한 흐름으로, 사용자가 다른 장치에서 인증하는 방식.</p><p><strong>작동 순서</strong>:</p><ol><li>장치가 인가 서버에서 장치 코드와 사용자 코드를 요청한다.</li><li>장치는 사용자에게 사용자 코드와 확인 URL을 표시한다.</li><li>사용자는 다른 장치에서 URL을 방문하여 사용자 코드를 입력하고 인증한다.</li><li>장치는 주기적으로 인가 서버를 폴링하여 인증 상태를 확인한다.</li><li>사용자가 인증을 완료하면 인가 서버는 장치에 액세스 토큰을 발급한다.</li></ol><h4 id=리프레시-토큰-승인-refresh-token-grant>리프레시 토큰 승인 (Refresh Token Grant)<a hidden class=anchor aria-hidden=true href=#리프레시-토큰-승인-refresh-token-grant>#</a></h4><p>액세스 토큰이 만료된 후 새로운 액세스 토큰을 얻는 데 사용된다.</p><p><strong>작동 순서</strong>:</p><ol><li>클라이언트가 리프레시 토큰을 사용하여 인가 서버에 새 액세스 토큰을 요청한다.</li><li>인가 서버는 리프레시 토큰을 검증하고 새 액세스 토큰(및 선택적으로 새 리프레시 토큰)을 발급한다.</li></ol><h3 id=실제-인가-코드-승인-흐름의-상세-단계>실제 인가 코드 승인 흐름의 상세 단계<a hidden class=anchor aria-hidden=true href=#실제-인가-코드-승인-흐름의-상세-단계>#</a></h3><p>가장 일반적으로 사용되는 인가 코드 승인 흐름을 실제 HTTP 요청과 응답을 기반으로 상세히 살펴보면:</p><ol><li><p>인가 요청<br>클라이언트가 사용자를 인가 서버로 리다이렉션한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5>5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6>6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>GET /authorize?
</span></span><span class=line><span class=cl>    response_type=code&amp;
</span></span><span class=line><span class=cl>    client_id=CLIENT_ID&amp;
</span></span><span class=line><span class=cl>    redirect_uri=REDIRECT_URI&amp;
</span></span><span class=line><span class=cl>    scope=read&amp;
</span></span><span class=line><span class=cl>    state=RANDOM_STATE HTTP/1.1
</span></span><span class=line><span class=cl>Host: authorization-server.com
</span></span></code></pre></td></tr></table></div></div><p>여기서:</p><ul><li><code>response_type=code</code>: 인가 코드 승인 흐름을 나타낸다.</li><li><code>client_id</code>: 클라이언트 식별자이다.</li><li><code>redirect_uri</code>: 인가 후 리다이렉션할 URI이다.</li><li><code>scope</code>: 요청하는 접근 범위이다.</li><li><code>state</code>: CSRF 공격을 방지하기 위한 무작위 값이다.</li></ul></li><li><p>사용자 인증 및 권한 부여<br>사용자는 인가 서버에서 자신의 자격 증명으로 로그인하고, 클라이언트가 요청한 권한을 검토한 후 승인 또는 거부한다.</p></li><li><p>인가 코드 발급<br>사용자가 권한을 승인하면 인가 서버는 사용자를 클라이언트의 리다이렉션 URI로 리다이렉션하며, 인가 코드와 원래 요청의 상태 값을 포함한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2>2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3>3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>HTTP/1.1 302 Found
</span></span><span class=line><span class=cl>Location: https://client-app.com/callback?
</span></span><span class=line><span class=cl>    code=AUTHORIZATION_CODE&amp;
</span></span><span class=line><span class=cl>    state=RANDOM_STATE
</span></span></code></pre></td></tr></table></div></div></li><li><p>액세스 토큰 요청<br>클라이언트는 인가 코드를 사용하여 인가 서버에 액세스 토큰을 요청한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2>2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3>3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4>4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5>5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6>6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7>7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>POST /token HTTP/1.1
</span></span><span class=line><span class=cl>Host: authorization-server.com
</span></span><span class=line><span class=cl>Content-Type: application/x-www-form-urlencoded
</span></span><span class=line><span class=cl>Authorization: Basic BASE64(CLIENT_ID:CLIENT_SECRET)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>grant_type=authorization_code&amp;
</span></span><span class=line><span class=cl>code=AUTHORIZATION_CODE&amp;
</span></span><span class=line><span class=cl>redirect_uri=REDIRECT_URI
</span></span></code></pre></td></tr></table></div></div><p>여기서:</p><ul><li><code>grant_type=authorization_code</code>: 인가 코드 승인 흐름을 나타낸다.</li><li><code>code</code>: 이전 단계에서 받은 인가 코드이다.</li><li><code>redirect_uri</code>: 원래 요청에 사용된 것과 동일한 리다이렉션 URI이다.</li></ul></li><li><p>액세스 토큰 발급<br>인가 서버는 인가 코드와 클라이언트 자격 증명을 검증한 후 액세스 토큰(및 선택적으로 리프레시 토큰)을 발급한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1> 1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2> 2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3> 3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4> 4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5> 5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6> 6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7> 7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8> 8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9> 9</a>
</span><span class=lnt id=hl-4-10><a class=lnlinks href=#hl-4-10>10</a>
</span><span class=lnt id=hl-4-11><a class=lnlinks href=#hl-4-11>11</a>
</span><span class=lnt id=hl-4-12><a class=lnlinks href=#hl-4-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>HTTP/1.1 200 OK
</span></span><span class=line><span class=cl>Content-Type: application/json;charset=UTF-8
</span></span><span class=line><span class=cl>Cache-Control: no-store
</span></span><span class=line><span class=cl>Pragma: no-cache
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>  &#34;access_token&#34;: &#34;ACCESS_TOKEN&#34;,
</span></span><span class=line><span class=cl>  &#34;token_type&#34;: &#34;Bearer&#34;,
</span></span><span class=line><span class=cl>  &#34;expires_in&#34;: 3600,
</span></span><span class=line><span class=cl>  &#34;refresh_token&#34;: &#34;REFRESH_TOKEN&#34;,
</span></span><span class=line><span class=cl>  &#34;scope&#34;: &#34;read&#34;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div></li><li><p>보호된 리소스 접근<br>클라이언트는 발급받은 액세스 토큰을 사용하여 리소스 서버의 보호된 리소스에 접근한다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2>2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>GET /api/resources HTTP/1.1
</span></span><span class=line><span class=cl>Host: resource-server.com
</span></span><span class=line><span class=cl>Authorization: Bearer ACCESS_TOKEN
</span></span></code></pre></td></tr></table></div></div><p>리소스 서버는 액세스 토큰을 검증하고 요청한 리소스를 반환한다.</p></li></ol><h3 id=oauth-20의-보안-고려사항>OAuth 2.0의 보안 고려사항<a hidden class=anchor aria-hidden=true href=#oauth-20의-보안-고려사항>#</a></h3><p>OAuth 2.0은 강력한 보안 프레임워크지만, 구현 시 여러 보안 위협을 고려해야 한다:</p><ul><li><p>일반적인 보안 위협</p><ol><li><strong>CSRF(Cross-Site Request Forgery) 공격</strong>: <code>state</code> 매개변수를 사용하여 방지해야 한다.</li><li><strong>리다이렉션 URI 조작</strong>: 인가 서버는 등록된 리다이렉션 URI만 허용해야 한다.</li><li><strong>액세스 토큰 유출</strong>: 항상 HTTPS를 사용하고, 토큰을 안전하게 저장해야 한다.</li><li><strong>코드 인젝션 공격</strong>: PKCE(Proof Key for Code Exchange, RFC 7636)를 구현하여 방지해야 한다.</li><li><strong>리소스 소유자 피싱</strong>: 인가 화면은 명확하고 사용자가 쉽게 식별할 수 있어야 한다.</li></ol></li><li><p>보안 강화 방법</p><ol><li><strong>PKCE(Proof Key for Code Exchange)</strong>: 공개 클라이언트(예: 모바일 앱)를 위한 보안 확장 기능으로, 코드 인터셉트 공격을 방지한다.</li><li><strong>짧은 액세스 토큰 수명</strong>: 액세스 토큰의 수명을 제한하고 리프레시 토큰을 사용하여 갱신한다.</li><li><strong>토큰 취소(Token Revocation)</strong>: 리소스 소유자가 더 이상 필요하지 않은 액세스 권한을 취소할 수 있어야 한다.</li><li><strong>HTTPS 필수 사용</strong>: 모든 통신은 TLS/SSL을 통해 암호화되어야 한다.</li><li><strong>스코프 제한</strong>: 클라이언트에 필요한 최소한의 권한만 부여한다.</li></ol></li></ul><h3 id=oauth-확장-및-관련-기술>OAuth 확장 및 관련 기술<a hidden class=anchor aria-hidden=true href=#oauth-확장-및-관련-기술>#</a></h3><ol><li><p>OpenID Connect (OIDC)<br>OAuth 2.0 위에 구축된 ID 계층으로, 인증을 위한 표준화된 방법을 제공한다.<br>OIDC는 OAuth 2.0의 권한 부여 프레임워크를 확장하여 사용자의 ID를 확인하는 방법을 추가한다.<br>주요 추가 사항:</p><ol><li><strong>ID 토큰</strong>: JWT(JSON Web Token) 형식의 토큰으로, 사용자의 ID 정보를 포함한다.</li><li><strong>표준화된 사용자 정보 엔드포인트</strong>: 사용자 프로필 정보를 가져오는 표준 방법을 제공한다.</li><li><strong>인증 세션 관리</strong>: 로그인 상태 및 세션 관리를 위한 추가 기능을 제공한다.</li></ol></li><li><p>JWT(JSON Web Token)<br>OAuth 2.0에서 자주 사용되는 토큰 형식으로, 자체 포함된(self-contained) 방식으로 정보를 안전하게 전송한다.<br>JWT는 다음 세 부분으로 구성된다:</p><ol><li><strong>헤더(Header)</strong>: 토큰 유형과 사용된 서명 알고리즘을 정의한다.</li><li><strong>페이로드(Payload)</strong>: 클레임(토큰에 담긴 정보)을 포함한다.</li><li><strong>서명(Signature)</strong>: 토큰의 무결성을 검증하는 데 사용된다.<br>JWT는 Base64Url로 인코딩된 세 부분이 점(.)으로 구분된 형태로 표현된다.</li></ol></li><li><p>OAuth 2.1<br>OAuth 2.0의 모범 사례와 보안 권장 사항을 통합한 간소화된 버전으로, 현재 초안 상태이다.<br>주요 변경 사항:</p><ol><li><strong>암시적 승인 흐름 제거</strong>: 보안상의 이유로 더 이상 권장되지 않는다.</li><li><strong>PKCE 필수화</strong>: 모든 OAuth 클라이언트에서 PKCE 사용을 의무화한다.</li><li><strong>리다이렉션 URI 일치 요구 사항 강화</strong>: 보안을 강화하기 위해 더 엄격한 일치 규칙을 적용한다.</li><li><strong>리프레시 토큰 회전(Refresh Token Rotation)</strong>: 보안을 강화하기 위해 새 액세스 토큰을 발급할 때마다 새 리프레시 토큰을 발급한다.</li></ol></li></ol><h3 id=실제-oauth-구현-사례>실제 OAuth 구현 사례<a hidden class=anchor aria-hidden=true href=#실제-oauth-구현-사례>#</a></h3><h4 id=소셜-로그인-구글-페이스북-카카오-등>소셜 로그인 (구글, 페이스북, 카카오 등)<a hidden class=anchor aria-hidden=true href=#소셜-로그인-구글-페이스북-카카오-등>#</a></h4><p>사용자가 웹사이트나 앱에 소셜 미디어 계정을 사용하여 로그인할 수 있게 해주는 기능이다. OAuth를 통해 사용자는 각 사이트마다 새 계정을 만들 필요 없이 기존 계정을 활용할 수 있다.</p><p><strong>구현 예시 (Node.js/Express)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1> 1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2> 2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3> 3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4> 4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5> 5</a>
</span><span class=lnt id=hl-6-6><a class=lnlinks href=#hl-6-6> 6</a>
</span><span class=lnt id=hl-6-7><a class=lnlinks href=#hl-6-7> 7</a>
</span><span class=lnt id=hl-6-8><a class=lnlinks href=#hl-6-8> 8</a>
</span><span class=lnt id=hl-6-9><a class=lnlinks href=#hl-6-9> 9</a>
</span><span class=lnt id=hl-6-10><a class=lnlinks href=#hl-6-10>10</a>
</span><span class=lnt id=hl-6-11><a class=lnlinks href=#hl-6-11>11</a>
</span><span class=lnt id=hl-6-12><a class=lnlinks href=#hl-6-12>12</a>
</span><span class=lnt id=hl-6-13><a class=lnlinks href=#hl-6-13>13</a>
</span><span class=lnt id=hl-6-14><a class=lnlinks href=#hl-6-14>14</a>
</span><span class=lnt id=hl-6-15><a class=lnlinks href=#hl-6-15>15</a>
</span><span class=lnt id=hl-6-16><a class=lnlinks href=#hl-6-16>16</a>
</span><span class=lnt id=hl-6-17><a class=lnlinks href=#hl-6-17>17</a>
</span><span class=lnt id=hl-6-18><a class=lnlinks href=#hl-6-18>18</a>
</span><span class=lnt id=hl-6-19><a class=lnlinks href=#hl-6-19>19</a>
</span><span class=lnt id=hl-6-20><a class=lnlinks href=#hl-6-20>20</a>
</span><span class=lnt id=hl-6-21><a class=lnlinks href=#hl-6-21>21</a>
</span><span class=lnt id=hl-6-22><a class=lnlinks href=#hl-6-22>22</a>
</span><span class=lnt id=hl-6-23><a class=lnlinks href=#hl-6-23>23</a>
</span><span class=lnt id=hl-6-24><a class=lnlinks href=#hl-6-24>24</a>
</span><span class=lnt id=hl-6-25><a class=lnlinks href=#hl-6-25>25</a>
</span><span class=lnt id=hl-6-26><a class=lnlinks href=#hl-6-26>26</a>
</span><span class=lnt id=hl-6-27><a class=lnlinks href=#hl-6-27>27</a>
</span><span class=lnt id=hl-6-28><a class=lnlinks href=#hl-6-28>28</a>
</span><span class=lnt id=hl-6-29><a class=lnlinks href=#hl-6-29>29</a>
</span><span class=lnt id=hl-6-30><a class=lnlinks href=#hl-6-30>30</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>passport</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;passport&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>GoogleStrategy</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;passport-google-oauth20&#39;</span><span class=p>).</span><span class=nx>Strategy</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Passport 설정
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>passport</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=k>new</span> <span class=nx>GoogleStrategy</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>clientID</span><span class=o>:</span> <span class=s1>&#39;YOUR_GOOGLE_CLIENT_ID&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>clientSecret</span><span class=o>:</span> <span class=s1>&#39;YOUR_GOOGLE_CLIENT_SECRET&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>callbackURL</span><span class=o>:</span> <span class=s1>&#39;http://yourdomain.com/auth/google/callback&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=kd>function</span><span class=p>(</span><span class=nx>accessToken</span><span class=p>,</span> <span class=nx>refreshToken</span><span class=p>,</span> <span class=nx>profile</span><span class=p>,</span> <span class=nx>done</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 사용자 정보 처리
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>User</span><span class=p>.</span><span class=nx>findOrCreate</span><span class=p>({</span> <span class=nx>googleId</span><span class=o>:</span> <span class=nx>profile</span><span class=p>.</span><span class=nx>id</span> <span class=p>},</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>user</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>done</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>user</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 인증 라우트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/auth/google&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>passport</span><span class=p>.</span><span class=nx>authenticate</span><span class=p>(</span><span class=s1>&#39;google&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>scope</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;profile&#39;</span><span class=p>,</span> <span class=s1>&#39;email&#39;</span><span class=p>]</span> <span class=p>}));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/auth/google/callback&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=nx>passport</span><span class=p>.</span><span class=nx>authenticate</span><span class=p>(</span><span class=s1>&#39;google&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>failureRedirect</span><span class=o>:</span> <span class=s1>&#39;/login&#39;</span> <span class=p>}),</span>
</span></span><span class=line><span class=cl>  <span class=kd>function</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 성공적인 인증 후 홈페이지로 리다이렉션
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>res</span><span class=p>.</span><span class=nx>redirect</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=api-접근-권한-관리>API 접근 권한 관리<a hidden class=anchor aria-hidden=true href=#api-접근-권한-관리>#</a></h4><p>애플리케이션이 사용자를 대신하여 API에 접근할 수 있도록 권한을 부여한다. 예를 들어, 사진 편집 앱이 사용자의 클라우드 스토리지에서 사진을 가져올 수 있게 한다.</p><p><strong>구현 예시 (Spring Boot OAuth2 서버)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1> 1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2> 2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3> 3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4> 4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5> 5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6> 6</a>
</span><span class=lnt id=hl-7-7><a class=lnlinks href=#hl-7-7> 7</a>
</span><span class=lnt id=hl-7-8><a class=lnlinks href=#hl-7-8> 8</a>
</span><span class=lnt id=hl-7-9><a class=lnlinks href=#hl-7-9> 9</a>
</span><span class=lnt id=hl-7-10><a class=lnlinks href=#hl-7-10>10</a>
</span><span class=lnt id=hl-7-11><a class=lnlinks href=#hl-7-11>11</a>
</span><span class=lnt id=hl-7-12><a class=lnlinks href=#hl-7-12>12</a>
</span><span class=lnt id=hl-7-13><a class=lnlinks href=#hl-7-13>13</a>
</span><span class=lnt id=hl-7-14><a class=lnlinks href=#hl-7-14>14</a>
</span><span class=lnt id=hl-7-15><a class=lnlinks href=#hl-7-15>15</a>
</span><span class=lnt id=hl-7-16><a class=lnlinks href=#hl-7-16>16</a>
</span><span class=lnt id=hl-7-17><a class=lnlinks href=#hl-7-17>17</a>
</span><span class=lnt id=hl-7-18><a class=lnlinks href=#hl-7-18>18</a>
</span><span class=lnt id=hl-7-19><a class=lnlinks href=#hl-7-19>19</a>
</span><span class=lnt id=hl-7-20><a class=lnlinks href=#hl-7-20>20</a>
</span><span class=lnt id=hl-7-21><a class=lnlinks href=#hl-7-21>21</a>
</span><span class=lnt id=hl-7-22><a class=lnlinks href=#hl-7-22>22</a>
</span><span class=lnt id=hl-7-23><a class=lnlinks href=#hl-7-23>23</a>
</span><span class=lnt id=hl-7-24><a class=lnlinks href=#hl-7-24>24</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Configuration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@EnableAuthorizationServer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>AuthServerConfig</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>AuthorizationServerConfigurerAdapter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>AuthenticationManager</span><span class=w> </span><span class=n>authenticationManager</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>configure</span><span class=p>(</span><span class=n>ClientDetailsServiceConfigurer</span><span class=w> </span><span class=n>clients</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>clients</span><span class=p>.</span><span class=na>inMemory</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>withClient</span><span class=p>(</span><span class=s>&#34;client-id&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>secret</span><span class=p>(</span><span class=s>&#34;client-secret&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>authorizedGrantTypes</span><span class=p>(</span><span class=s>&#34;authorization_code&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;refresh_token&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>scopes</span><span class=p>(</span><span class=s>&#34;read&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;write&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>redirectUris</span><span class=p>(</span><span class=s>&#34;http://client-app.com/callback&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>accessTokenValiditySeconds</span><span class=p>(</span><span class=n>3600</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>refreshTokenValiditySeconds</span><span class=p>(</span><span class=n>86400</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>configure</span><span class=p>(</span><span class=n>AuthorizationServerEndpointsConfigurer</span><span class=w> </span><span class=n>endpoints</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>endpoints</span><span class=p>.</span><span class=na>authenticationManager</span><span class=p>(</span><span class=n>authenticationManager</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=마이크로서비스-간-통신>마이크로서비스 간 통신<a hidden class=anchor aria-hidden=true href=#마이크로서비스-간-통신>#</a></h4><p>서비스 간 인증에 OAuth (특히 클라이언트 자격 증명 승인)를 사용하여 안전한 통신을 구현한다.</p><p><strong>구현 예시 (Python/Flask 클라이언트)</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span><span class=lnt id=hl-8-11><a class=lnlinks href=#hl-8-11>11</a>
</span><span class=lnt id=hl-8-12><a class=lnlinks href=#hl-8-12>12</a>
</span><span class=lnt id=hl-8-13><a class=lnlinks href=#hl-8-13>13</a>
</span><span class=lnt id=hl-8-14><a class=lnlinks href=#hl-8-14>14</a>
</span><span class=lnt id=hl-8-15><a class=lnlinks href=#hl-8-15>15</a>
</span><span class=lnt id=hl-8-16><a class=lnlinks href=#hl-8-16>16</a>
</span><span class=lnt id=hl-8-17><a class=lnlinks href=#hl-8-17>17</a>
</span><span class=lnt id=hl-8-18><a class=lnlinks href=#hl-8-18>18</a>
</span><span class=lnt id=hl-8-19><a class=lnlinks href=#hl-8-19>19</a>
</span><span class=lnt id=hl-8-20><a class=lnlinks href=#hl-8-20>20</a>
</span><span class=lnt id=hl-8-21><a class=lnlinks href=#hl-8-21>21</a>
</span><span class=lnt id=hl-8-22><a class=lnlinks href=#hl-8-22>22</a>
</span><span class=lnt id=hl-8-23><a class=lnlinks href=#hl-8-23>23</a>
</span><span class=lnt id=hl-8-24><a class=lnlinks href=#hl-8-24>24</a>
</span><span class=lnt id=hl-8-25><a class=lnlinks href=#hl-8-25>25</a>
</span><span class=lnt id=hl-8-26><a class=lnlinks href=#hl-8-26>26</a>
</span><span class=lnt id=hl-8-27><a class=lnlinks href=#hl-8-27>27</a>
</span><span class=lnt id=hl-8-28><a class=lnlinks href=#hl-8-28>28</a>
</span><span class=lnt id=hl-8-29><a class=lnlinks href=#hl-8-29>29</a>
</span><span class=lnt id=hl-8-30><a class=lnlinks href=#hl-8-30>30</a>
</span><span class=lnt id=hl-8-31><a class=lnlinks href=#hl-8-31>31</a>
</span><span class=lnt id=hl-8-32><a class=lnlinks href=#hl-8-32>32</a>
</span><span class=lnt id=hl-8-33><a class=lnlinks href=#hl-8-33>33</a>
</span><span class=lnt id=hl-8-34><a class=lnlinks href=#hl-8-34>34</a>
</span><span class=lnt id=hl-8-35><a class=lnlinks href=#hl-8-35>35</a>
</span><span class=lnt id=hl-8-36><a class=lnlinks href=#hl-8-36>36</a>
</span><span class=lnt id=hl-8-37><a class=lnlinks href=#hl-8-37>37</a>
</span><span class=lnt id=hl-8-38><a class=lnlinks href=#hl-8-38>38</a>
</span><span class=lnt id=hl-8-39><a class=lnlinks href=#hl-8-39>39</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=n>jsonify</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_token</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>token_url</span> <span class=o>=</span> <span class=s1>&#39;https://auth-server.com/token&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>client_id</span> <span class=o>=</span> <span class=s1>&#39;SERVICE_CLIENT_ID&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>client_secret</span> <span class=o>=</span> <span class=s1>&#39;SERVICE_CLIENT_SECRET&#39;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;grant_type&#39;</span><span class=p>:</span> <span class=s1>&#39;client_credentials&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;scope&#39;</span><span class=p>:</span> <span class=s1>&#39;service_api&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>token_url</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>data</span><span class=o>=</span><span class=n>data</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>auth</span><span class=o>=</span><span class=p>(</span><span class=n>client_id</span><span class=p>,</span> <span class=n>client_secret</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>200</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()[</span><span class=s1>&#39;access_token&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=s1>&#39;Token request failed&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s1>&#39;/api/data&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_data</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>token</span> <span class=o>=</span> <span class=n>get_token</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># 토큰으로 다른 서비스의 API 호출</span>
</span></span><span class=line><span class=cl>        <span class=n>api_url</span> <span class=o>=</span> <span class=s1>&#39;https://resource-server.com/api/resource&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>headers</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;Authorization&#39;</span><span class=p>:</span> <span class=sa>f</span><span class=s1>&#39;Bearer </span><span class=si>{</span><span class=n>token</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>api_url</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>jsonify</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>jsonify</span><span class=p>({</span><span class=s1>&#39;error&#39;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)}),</span> <span class=mi>500</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=oauth의-미래-전망>OAuth의 미래 전망<a hidden class=anchor aria-hidden=true href=#oauth의-미래-전망>#</a></h3><ol><li><p>보안 강화<br>OAuth는 계속해서 보안 모범 사례를 발전시키고 있다. OAuth 2.1, PKCE의 표준화, 그리고 보다 강력한 토큰 검증 메커니즘이 향후 발전 방향이다.</p></li><li><p>IoT 및 새로운 플랫폼 지원<br>OAuth는 IoT(사물인터넷) 장치, 음성 비서, 웨어러블 기기 등 새로운 플랫폼에 맞게 확장되고 있다. 제한된 입력 장치나 연결성이 불안정한 환경에서도 작동하는 새로운 승인 흐름이 개발되고 있다.</p></li><li><p>상호 운용성 향상<br>표준화된 보안 프로필과 구현 가이드라인을 통해 서로 다른 OAuth 구현 간의 상호 운용성을 개선하는 노력이 계속되고 있다. 이는 기업이 OAuth를 보다 쉽게 채택하고 통합할 수 있게 할 것이다.</p></li></ol><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td>리소스 소유자(Resource Owner)</td><td>보호된 리소스에 접근 권한을 부여할 수 있는 엔티티. 일반적으로 최종 사용자이다.</td></tr><tr><td>리소스 서버(Resource Server)</td><td>보호된 리소스를 호스팅하는 서버. 액세스 토큰을 사용하여 보호된 리소스 요청을 수락하고 응답한다.</td></tr><tr><td>클라이언트(Client)</td><td>리소스 소유자를 대신하여 보호된 리소스에 접근하려는 애플리케이션. 웹 애플리케이션, 모바일 앱, 데스크톱 프로그램 등이 될 수 있다.</td></tr><tr><td>인가 서버(Authorization Server)</td><td>리소스 소유자를 인증하고 권한을 얻은 후 클라이언트에게 액세스 토큰을 발급하는 서버이다.</td></tr><tr><td>액세스 토큰(Access Token)</td><td>보호된 리소스에 접근하기 위해 클라이언트가 사용하는 자격 증명. 일반적으로 짧은 수명을 가지며, 특정 범위의 권한을 나타낸다.</td></tr><tr><td>리프레시 토큰(Refresh Token)</td><td>액세스 토큰이 만료된 후 새 액세스 토큰을 얻는 데 사용되는 자격 증명. 일반적으로 긴 수명을 가지며, 모든 권한 부여 유형에서 사용되지는 않는다.</td></tr><tr><td>스코프(Scope)</td><td>특정 액세스 토큰이 부여하는 접근 권한의 범위. 예를 들어, &ldquo;읽기 전용&rdquo;, &ldquo;쓰기 권한&rdquo; 등을 지정할 수 있다.</td></tr><tr><td>동의(Consent)</td><td>리소스 소유자가 클라이언트에게 특정 권한을 부여하는 과정. 사용자에게 권한 요청을 명확히 표시하고 동의를 받는 단계.</td></tr><tr><td>리다이렉션 URI(Redirect URI)</td><td>인가 서버가 처리를 완료한 후 리소스 소유자의 사용자 에이전트(브라우저)를 다시 클라이언트로 리다이렉션하는 URI.</td></tr><tr><td>인가 코드(Authorization Code)</td><td>클라이언트가 액세스 토큰으로 교환할 수 있는 임시 코드. 인가 코드 승인 흐름에서 사용된다.</td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>OAuth 2.0 vs. OpenID Connect</h2></header><div class=entry-content><p>OAuth 2.0 vs. OpenID Connect 개요 및 역사적 배경 OAuth 2.0 OAuth 2.0은 2012년에 IETF(Internet Engineering Task Force)에서 RFC 6749로 표준화된 인가(Authorization) 프레임워크이다. 이는 2007년에 발표된 OAuth 1.0의 후속 버전으로, 더 단순하고 확장 가능한 구현을 목표로 개발되었다. OAuth 2.0은 애플리케이션이 사용자 데이터에 접근할 수 있는 권한을 안전하게 위임하는 메커니즘을 제공한다.
OpenID Connect OpenID Connect(OIDC)는 2014년 OpenID Foundation에서 공식 발표한 OAuth 2.0 위에 구축된 ID 인증 레이어이다. OAuth 2.0이 주로 인가에 초점을 맞추고 있는 반면, OpenID Connect는 인증(Authentication)과 신원 확인 기능을 추가했다. OIDC는 이전 버전인 OpenID 2.0의 복잡성을 해결하고, OAuth 2.0과의 호환성을 제공하기 위해 개발되었다.
...</p></div><footer class=entry-footer><span title='2025-04-03 14:02:00 +0000 UTC'>April 3, 2025</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to OAuth 2.0 vs. OpenID Connect" href=https://buenhyden.github.io/posts/security/access-control/authentication/protocols/oauth/oauth-20-vs-openid-connect/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>RFC 6749</h2></header><div class=entry-content><p>RFC 6749 RFC 6749는 OAuth 2.0 권한 부여 프레임워크(The OAuth 2.0 Authorization Framework)를 정의하는 인터넷 표준 문서이다. 이 문서는 2012년 10월에 인터넷 표준화 기구인 IETF(Internet Engineering Task Force)에 의해 발행되었다. 주 저자는 Dick Hardt이며, 여러 기술 전문가들의 협업으로 만들어졌다.
OAuth 2.0은 이전 버전인 OAuth 1.0(RFC 5849)의 후속 버전으로, 다양한 웹 애플리케이션, 데스크톱 애플리케이션, 모바일 애플리케이션 및 IoT 장치에서 안전한 권한 위임을 가능하게 하는 프로토콜이다. 간단히 말해, OAuth 2.0은 사용자가 자신의 비밀번호를 공유하지 않고도 제3자 애플리케이션에 자신의 데이터에 대한 제한된 접근 권한을 부여할 수 있도록 해주는 프레임워크이다.
...</p></div><footer class=entry-footer><span title='2025-02-28 11:28:00 +0000 UTC'>February 28, 2025</span>&nbsp;·&nbsp;14 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to RFC 6749" href=https://buenhyden.github.io/posts/security/access-control/authentication/protocols/oauth/rfc-6749/></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>