<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>JWT vs. OAuth 2.0 | hyunyoun's Blog</title>
<meta name=keywords content="Backend,API-Design,Authentication-Methods,JWT"><meta name=description content="JWT는 당사자 간에 안전하게 정보를 JSON 객체로 전송하기 위한 방식이다. 주로 인증(Authentication)과 정보 교환을 위해 사용된다. OAuth 2.0은 사용자가 자신의 정보에 대한 접근 권한을 제3자 애플리케이션에 부여할 수 있게 해주는 인가(Authorization) 프레임워크이다. 사용자가 비밀번호를 공유하지 않고도 제한된 접근 권한을 제3자에게 제공할 수 있다."><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/posts/security/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-oauth-20/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.8762af4fa9ee176c57f72565b721f234162fc7a9c882a271e0a1f68c4e89fb34.css integrity="sha256-h2KvT6nuF2xX9yVltyHyNBYvx6nIgqJx4KH2jE6J+zQ=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/posts/security/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-oauth-20/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/posts/security/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-oauth-20/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="JWT vs. OAuth 2.0"><meta property="og:description" content="JWT는 당사자 간에 안전하게 정보를 JSON 객체로 전송하기 위한 방식이다. 주로 인증(Authentication)과 정보 교환을 위해 사용된다. OAuth 2.0은 사용자가 자신의 정보에 대한 접근 권한을 제3자 애플리케이션에 부여할 수 있게 해주는 인가(Authorization) 프레임워크이다. 사용자가 비밀번호를 공유하지 않고도 제한된 접근 권한을 제3자에게 제공할 수 있다."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-04-03T07:30:00+00:00"><meta property="article:modified_time" content="2025-04-03T07:30:00+00:00"><meta property="article:tag" content="Backend"><meta property="article:tag" content="API-Design"><meta property="article:tag" content="Authentication-Methods"><meta property="article:tag" content="JWT"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="JWT vs. OAuth 2.0"><meta name=twitter:description content="JWT는 당사자 간에 안전하게 정보를 JSON 객체로 전송하기 위한 방식이다. 주로 인증(Authentication)과 정보 교환을 위해 사용된다. OAuth 2.0은 사용자가 자신의 정보에 대한 접근 권한을 제3자 애플리케이션에 부여할 수 있게 해주는 인가(Authorization) 프레임워크이다. 사용자가 비밀번호를 공유하지 않고도 제한된 접근 권한을 제3자에게 제공할 수 있다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"기술 블로그","item":"https://buenhyden.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Security","item":""},{"@type":"ListItem","position":3,"name":"Access Control","item":""},{"@type":"ListItem","position":4,"name":"Authentication Methods","item":"https://buenhyden.github.io/posts/security/access-control/authentication/"},{"@type":"ListItem","position":6,"name":"Token Authentication","item":"https://buenhyden.github.io/posts/security/access-control/authentication/implementations/token-based-authentication/"},{"@type":"ListItem","position":7,"name":"JWT","item":"https://buenhyden.github.io/posts/security/access-control/authentication/implementations/token-based-authentication/jwt/"},{"@type":"ListItem","position":8,"name":"JWT vs. OAuth 2.0","item":"https://buenhyden.github.io/posts/security/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-oauth-20/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"JWT vs. OAuth 2.0","name":"JWT vs. OAuth 2.0","description":"JWT는 당사자 간에 안전하게 정보를 JSON 객체로 전송하기 위한 방식이다. 주로 인증(Authentication)과 정보 교환을 위해 사용된다. OAuth 2.0은 사용자가 자신의 정보에 대한 접근 권한을 제3자 애플리케이션에 부여할 수 있게 해주는 인가(Authorization) 프레임워크이다. 사용자가 비밀번호를 공유하지 않고도 제한된 접근 권한을 제3자에게 제공할 수 있다.","keywords":["Backend","API-Design","Authentication-Methods","JWT"],"articleBody":"JWT vs. OAuth 2.0 기본 개념 JWT (JSON Web Token)\nJWT는 당사자 간에 안전하게 정보를 JSON 객체로 전송하기 위한 컴팩트하고 자체 완결적인 방식이다. 이 정보는 디지털 서명되어 있어 신뢰할 수 있다. JWT는 주로 인증(Authentication)과 정보 교환을 위해 사용된다. OAuth 2.0\nOAuth 2.0은 사용자가 자신의 정보에 대한 접근 권한을 제3자 애플리케이션에 부여할 수 있게 해주는 인가(Authorization) 프레임워크이다. 사용자가 비밀번호를 공유하지 않고도 제한된 접근 권한을 제3자에게 제공할 수 있다. 주요 목적과 용도 JWT의 목적\n사용자 인증(Authentication) 인증된 사용자 간의 정보 교환 서명된 토큰을 통한 정보의 무결성 검증 Stateless 서버 아키텍처 구현 OAuth 2.0의 목적\n제3자 애플리케이션에 대한 권한 부여(Authorization) 리소스 소유자를 대신한 제한된 접근 제공 서비스 간 안전한 권한 위임 다양한 애플리케이션 유형(웹, 모바일, IoT 등)에 대한 인가 흐름 제공 3. 작동 원리 JWT 작동 원리\n사용자가 로그인하면 서버는 JWT를 생성한다. JWT는 헤더(알고리즘, 토큰 타입), 페이로드(클레임), 서명의 세 부분으로 구성된다. 이 토큰을 클라이언트에게 반환한다. 클라이언트는 이후 요청 시 이 토큰을 Authorization 헤더에 포함시킨다. 토큰을 검증하고 페이로드의 정보를 기반으로 요청을 처리한다. OAuth 2.0 작동 원리\n클라이언트 애플리케이션이 사용자에게 특정 리소스에 대한 권한을 요청한다. 사용자가 동의하면 인가 서버는 인가 코드를 발급한다. 클라이언트는 이 인가 코드를 사용하여 인가 서버에 액세스 토큰을 요청한다. 인가 서버는 액세스 토큰(및 선택적으로 리프레시 토큰)을 발급한다. 클라이언트는 이 액세스 토큰을 사용하여 리소스 서버에 보호된 리소스를 요청한다. 리소스 서버는 토큰을 검증하고 요청된 리소스를 제공한다. 주요 구성 요소 JWT 구성 요소 헤더(Header): 토큰 타입과 사용된 서명 알고리즘 정보 페이로드(Payload): 등록된 클레임, 공개 클레임, 비공개 클레임 등 사용자와 추가 데이터를 포함 서명(Signature): 토큰의 무결성을 검증하기 위한 서명 부분 OAuth 2.0 구성 요소 리소스 소유자(Resource Owner): 보호된 리소스에 대한 접근 권한을 부여할 수 있는 사용자 클라이언트(Client): 리소스 소유자의 리소스에 접근하려는 애플리케이션 리소스 서버(Resource Server): 보호된 리소스를 호스팅하는 서버 인가 서버(Authorization Server): 사용자 인증 후 토큰을 발급하는 서버 액세스 토큰(Access Token): 리소스 접근을 위한 자격 증명 리프레시 토큰(Refresh Token): 새로운 액세스 토큰을 얻기 위한 토큰 주요 차이점 목적과 기능 JWT: 주로 인증과 정보 교환에 중점 OAuth 2.0: 인가(권한 부여)에 중점 범위 JWT: 토큰 형식과 서명 방법을 정의하는 표준 OAuth 2.0: 전체 인가 프레임워크와 프로토콜 정의 복잡성 JWT: 상대적으로 단순한 구조와 구현 OAuth 2.0: 여러 흐름과 역할이 포함된 복잡한 프레임워크 토큰 내용 JWT: 토큰 자체에 사용자 정보와 메타데이터를 포함 OAuth 2.0: 액세스 토큰은 일반적으로 참조 토큰이지만, JWT 형식의 토큰을 사용할 수도 있음 상태 관리 JWT: 일반적으로 상태 비저장(Stateless) 방식 OAuth 2.0: 일반적으로 상태 저장(Stateful) 방식, 특히 리프레시 토큰 관리 시 사용 사례 JWT 적합한 사용 사례 단일 도메인 내 사용자 인증 마이크로서비스 간 정보 전달 일회성 이메일 확인이나 비밀번호 재설정 상태 비저장 API 인증 OAuth 2.0 적합한 사용 사례 소셜 로그인(페이스북, 구글 등을 통한 로그인) 제3자 애플리케이션 API 인가 여러 서비스 간의 권한 위임 사용자의 특정 리소스에 대한 제한된 접근 제공 장단점 JWT 장점 자체 포함적: 필요한 모든 정보를 토큰 자체에 포함 서버 부하 감소: 세션 저장소가 필요 없음 확장성: 분산 시스템에서 효율적 간단한 구현: 대부분의 프로그래밍 언어에서 지원 단점 토큰 크기: 클레임이 많을수록 토큰 크기 증가 보안 위험: 클라이언트에 저장된 정보는 탈취될 수 있음 토큰 무효화: 발급된 토큰을 즉시 무효화하기 어려움 상태 저장 불가: 로그아웃 등의 기능 구현이 복잡 OAuth 2.0 장점 높은 보안성: 사용자 자격 증명을 직접 공유하지 않음 세분화된 권한 부여: 특정 권한(scope)에 대해서만 접근 허용 다양한 인가 흐름: 다양한 클라이언트 유형에 적합한 흐름 제공 토큰 갱신 메커니즘: 리프레시 토큰을 통한 장기 접근 지원 단점 구현 복잡성: 전체 흐름 구현이 복잡함 다양한 해석: 명세의 유연성으로 인한 구현 차이 오버헤드: 여러 요청과 응답 교환이 필요 중앙화된 인가 서버: 단일 장애 지점이 될 수 있음 상호 관계 JWT와 OAuth 2.0은 경쟁 관계가 아니라 보완적인 관계에 있다. OAuth 2.0은 인가 프레임워크로, JWT는 토큰 형식으로 사용될 수 있다. 실제로 많은 OAuth 2.0 구현에서는 액세스 토큰과 ID 토큰으로 JWT 형식을 사용한다. 이러한 결합을 OpenID Connect(OIDC)라고 하며, OAuth 2.0을 확장하여 인증 레이어를 추가한 프로토콜이다.\nJWT vs. OAuth 2.0 특성 JWT OAuth 2.0 주요 목적 인증(Authentication) 및 정보 교환 인가(Authorization) 및 권한 위임 형태 토큰 형식 표준 인가 프레임워크 및 프로토콜 복잡성 상대적으로 단순 복잡한 여러 흐름 상태 관리 Stateless (상태 비저장) 일반적으로 Stateful (상태 저장) 토큰 내용 자체 포함적 (사용자 정보 포함) 일반적으로 참조 토큰 (JWT 사용 가능) 토큰 유효성 서명을 통한 로컬 검증 인가 서버를 통한 검증 (일반적으로) 토큰 취소 어려움 (블랙리스트 필요) 상대적으로 쉬움 스케일링 높음 (서버에 상태 저장 안 함) 중간 (토큰 저장소 필요) 구현 난이도 낮음 높음 사용 사례 단일 서비스 인증, API 인증 소셜 로그인, API 인가, 서비스 간 권한 위임 클라이언트 타입 제한 없음 다양한 클라이언트별 흐름 제공 리소스 접근 직접적 (토큰 내 정보 사용) 간접적 (토큰으로 리소스 서버 접근) 토큰 갱신 기본 지원 없음 리프레시 토큰 지원 권한 범위 토큰 내 클레임으로 정의 Scope 파라미터로 정의 표준화 RFC 7519 RFC 6749, RFC 6750 보안 강점 무결성 보장 (서명) 자격 증명 비공개 (권한 위임) 확장성 JSON 클레임으로 확장 가능 다양한 확장 명세 존재 (OIDC 등) 서드파티 지원 직접적으로 지원하지 않음 핵심 기능 실제 구현 예시 JWT 구현 예시 (Node.js) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 // JWT 인증 구현 예시 const jwt = require('jsonwebtoken'); const express = require('express'); const app = express(); // 비밀키 - 실제로는 환경 변수로 관리해야 함 const SECRET_KEY = 'your_jwt_secret'; app.use(express.json()); // 로그인 라우트 app.post('/login', (req, res) =\u003e { // 사용자 인증 로직 (데이터베이스 조회 등) const user = { id: 1, username: 'test_user', role: 'admin' }; // JWT 토큰 생성 const token = jwt.sign( { userId: user.id, username: user.username, role: user.role }, SECRET_KEY, { expiresIn: '1h', // 토큰 만료 시간 issuer: 'myapp' // 발행자 } ); // 클라이언트에 토큰 반환 res.json({ token }); }); // 인증 미들웨어 function authenticateToken(req, res, next) { // 헤더에서 토큰 추출 const authHeader = req.headers['authorization']; const token = authHeader \u0026\u0026 authHeader.split(' ')[1]; // \"Bearer TOKEN\" 형식 if (!token) { return res.status(401).json({ message: '인증 토큰이 필요합니다' }); } // 토큰 검증 jwt.verify(token, SECRET_KEY, (err, decoded) =\u003e { if (err) { // 토큰 검증 실패 return res.status(403).json({ message: '유효하지 않은 토큰입니다' }); } // 검증 성공 시 요청 객체에 사용자 정보 추가 req.user = decoded; next(); }); } // 보호된 라우트 app.get('/protected', authenticateToken, (req, res) =\u003e { res.json({ message: '인증된 사용자입니다!', user: req.user }); }); app.listen(3000, () =\u003e { console.log('서버가 3000번 포트에서 실행 중입니다'); }); OAuth 2.0 구현 예시 (Node.js - 인가 코드 흐름) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 // OAuth 2.0 인가 코드 흐름 구현 예시 const express = require('express'); const axios = require('axios'); const crypto = require('crypto'); const app = express(); // OAuth 설정 - 실제로는 환경 변수로 관리해야 함 const CLIENT_ID = 'your_client_id'; const CLIENT_SECRET = 'your_client_secret'; const REDIRECT_URI = 'http://localhost:3000/callback'; const AUTH_SERVER_URL = 'https://authorization-server.com'; // 상태 값 저장을 위한 임시 저장소 (실제로는 Redis 등 사용) const stateSessions = {}; app.get('/', (req, res) =\u003e { // CSRF 방지를 위한 상태 값 생성 const state = crypto.randomBytes(16).toString('hex'); // 상태 값을 세션에 저장 stateSessions[state] = { created: new Date() }; // 인가 서버로 리디렉션할 URL 생성 const authorizationUrl = new URL(`${AUTH_SERVER_URL}/authorize`); authorizationUrl.searchParams.append('response_type', 'code'); authorizationUrl.searchParams.append('client_id', CLIENT_ID); authorizationUrl.searchParams.append('redirect_uri', REDIRECT_URI); authorizationUrl.searchParams.append('scope', 'read profile'); authorizationUrl.searchParams.append('state', state); // 사용자를 인가 서버로 리디렉션 res.redirect(authorizationUrl.toString()); }); // 콜백 처리 app.get('/callback', async (req, res) =\u003e { const { code, state, error } = req.query; // 에러 처리 if (error) { return res.status(400).json({ error: error }); } // 상태 값 검증 if (!state || !stateSessions[state]) { return res.status(400).json({ error: '유효하지 않은 상태 값입니다' }); } // 상태 값 세션 삭제 (1회성) delete stateSessions[state]; try { // 인가 코드를 액세스 토큰으로 교환 const tokenResponse = await axios.post(`${AUTH_SERVER_URL}/token`, { grant_type: 'authorization_code', code: code, redirect_uri: REDIRECT_URI, client_id: CLIENT_ID, client_secret: CLIENT_SECRET }, { headers: { 'Content-Type': 'application/x-www-form-urlencoded' } }); // 토큰 정보 추출 const { access_token, refresh_token, expires_in } = tokenResponse.data; // 사용자 정보 요청 (액세스 토큰 사용) const userResponse = await axios.get(`${AUTH_SERVER_URL}/userinfo`, { headers: { 'Authorization': `Bearer ${access_token}` } }); // 사용자 정보와 토큰 반환 res.json({ user: userResponse.data, tokens: { access_token, refresh_token, expires_in } }); } catch (error) { res.status(500).json({ error: '토큰 교환 중 오류가 발생했습니다', details: error.message }); } }); // 토큰 갱신 엔드포인트 app.post('/refresh-token', async (req, res) =\u003e { const { refresh_token } = req.body; if (!refresh_token) { return res.status(400).json({ error: '리프레시 토큰이 필요합니다' }); } try { // 리프레시 토큰을 사용하여 새 액세스 토큰 요청 const response = await axios.post(`${AUTH_SERVER_URL}/token`, { grant_type: 'refresh_token', refresh_token: refresh_token, client_id: CLIENT_ID, client_secret: CLIENT_SECRET }, { headers: { 'Content-Type': 'application/x-www-form-urlencoded' } }); // 새 토큰 정보 반환 res.json(response.data); } catch (error) { res.status(500).json({ error: '토큰 갱신 중 오류가 발생했습니다', details: error.message }); } }); app.listen(3000, () =\u003e { console.log('OAuth 클라이언트가 3000번 포트에서 실행 중입니다'); }); 용어 정리 용어 설명 참고 및 출처 ","wordCount":"1557","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2025-04-03T07:30:00Z","dateModified":"2025-04-03T07:30:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/posts/security/access-control/authentication/implementations/token-based-authentication/jwt/jwt-vs-oauth-20/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/>기술 블로그</a>&nbsp;»&nbsp;<a href>Security</a>&nbsp;»&nbsp;<a href>Access Control</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/security/access-control/authentication/>Authentication Methods</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/security/access-control/authentication/implementations/token-based-authentication/>Token Authentication</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/posts/security/access-control/authentication/implementations/token-based-authentication/jwt/>JWT</a></div><h1 class="post-title entry-hint-parent">JWT vs. OAuth 2.0</h1><div class=post-description>JWT는 당사자 간에 안전하게 정보를 JSON 객체로 전송하기 위한 방식이다. 주로 인증(Authentication)과 정보 교환을 위해 사용된다. OAuth 2.0은 사용자가 자신의 정보에 대한 접근 권한을 제3자 애플리케이션에 부여할 수 있게 해주는 인가(Authorization) 프레임워크이다. 사용자가 비밀번호를 공유하지 않고도 제한된 접근 권한을 제3자에게 제공할 수 있다.</div><div class=post-meta><span title='2025-04-03 07:30:00 +0000 UTC'>April 3, 2025</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/posts/Security/Access%20Control/Authentication/Implementations/Token-Based%20Authentication/JWT/jwt-vs-oauth-20.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#jwt-vs-oauth-20>JWT vs. OAuth 2.0</a><ul><li><a href=#기본-개념>기본 개념</a></li><li><a href=#주요-목적과-용도>주요 목적과 용도</a></li><li><a href=#3-작동-원리>3. 작동 원리</a></li><li><a href=#주요-구성-요소>주요 구성 요소</a></li><li><a href=#주요-차이점>주요 차이점</a></li><li><a href=#사용-사례>사용 사례</a></li><li><a href=#장단점>장단점</a></li><li><a href=#상호-관계>상호 관계</a></li><li><a href=#jwt-vs-oauth-20-1>JWT vs. OAuth 2.0</a></li><li><a href=#실제-구현-예시>실제 구현 예시</a></li></ul></li><li><a href=#용어-정리>용어 정리</a></li><li><a href=#참고-및-출처>참고 및 출처</a></li></ul></nav></div></details></div><div class=post-content><h2 id=jwt-vs-oauth-20>JWT vs. OAuth 2.0<a hidden class=anchor aria-hidden=true href=#jwt-vs-oauth-20>#</a></h2><h3 id=기본-개념>기본 개념<a hidden class=anchor aria-hidden=true href=#기본-개념>#</a></h3><ul><li>JWT (JSON Web Token)<br>JWT는 당사자 간에 안전하게 정보를 JSON 객체로 전송하기 위한 컴팩트하고 자체 완결적인 방식이다. 이 정보는 디지털 서명되어 있어 신뢰할 수 있다. JWT는 주로 인증(Authentication)과 정보 교환을 위해 사용된다.</li><li>OAuth 2.0<br>OAuth 2.0은 사용자가 자신의 정보에 대한 접근 권한을 제3자 애플리케이션에 부여할 수 있게 해주는 인가(Authorization) 프레임워크이다. 사용자가 비밀번호를 공유하지 않고도 제한된 접근 권한을 제3자에게 제공할 수 있다.</li></ul><h3 id=주요-목적과-용도>주요 목적과 용도<a hidden class=anchor aria-hidden=true href=#주요-목적과-용도>#</a></h3><ol><li><p>JWT의 목적</p><ul><li>사용자 인증(Authentication)</li><li>인증된 사용자 간의 정보 교환</li><li>서명된 토큰을 통한 정보의 무결성 검증</li><li>Stateless 서버 아키텍처 구현</li></ul></li><li><p>OAuth 2.0의 목적</p><ul><li>제3자 애플리케이션에 대한 권한 부여(Authorization)</li><li>리소스 소유자를 대신한 제한된 접근 제공</li><li>서비스 간 안전한 권한 위임</li><li>다양한 애플리케이션 유형(웹, 모바일, IoT 등)에 대한 인가 흐름 제공</li></ul></li></ol><h3 id=3-작동-원리>3. 작동 원리<a hidden class=anchor aria-hidden=true href=#3-작동-원리>#</a></h3><ul><li><p>JWT 작동 원리</p><ol><li>사용자가 로그인하면 서버는 JWT를 생성한다.</li><li>JWT는 헤더(알고리즘, 토큰 타입), 페이로드(클레임), 서명의 세 부분으로 구성된다.</li><li>이 토큰을 클라이언트에게 반환한다.</li><li>클라이언트는 이후 요청 시 이 토큰을 Authorization 헤더에 포함시킨다.</li><li>토큰을 검증하고 페이로드의 정보를 기반으로 요청을 처리한다.</li></ol></li><li><p>OAuth 2.0 작동 원리</p><ol><li>클라이언트 애플리케이션이 사용자에게 특정 리소스에 대한 권한을 요청한다.</li><li>사용자가 동의하면 인가 서버는 인가 코드를 발급한다.</li><li>클라이언트는 이 인가 코드를 사용하여 인가 서버에 액세스 토큰을 요청한다.</li><li>인가 서버는 액세스 토큰(및 선택적으로 리프레시 토큰)을 발급한다.</li><li>클라이언트는 이 액세스 토큰을 사용하여 리소스 서버에 보호된 리소스를 요청한다.</li><li>리소스 서버는 토큰을 검증하고 요청된 리소스를 제공한다.</li></ol></li></ul><h3 id=주요-구성-요소>주요 구성 요소<a hidden class=anchor aria-hidden=true href=#주요-구성-요소>#</a></h3><ul><li>JWT 구성 요소<ol><li><strong>헤더(Header)</strong>: 토큰 타입과 사용된 서명 알고리즘 정보</li><li><strong>페이로드(Payload)</strong>: 등록된 클레임, 공개 클레임, 비공개 클레임 등 사용자와 추가 데이터를 포함</li><li><strong>서명(Signature)</strong>: 토큰의 무결성을 검증하기 위한 서명 부분</li></ol></li><li>OAuth 2.0 구성 요소<ol><li><strong>리소스 소유자(Resource Owner)</strong>: 보호된 리소스에 대한 접근 권한을 부여할 수 있는 사용자</li><li><strong>클라이언트(Client)</strong>: 리소스 소유자의 리소스에 접근하려는 애플리케이션</li><li><strong>리소스 서버(Resource Server)</strong>: 보호된 리소스를 호스팅하는 서버</li><li><strong>인가 서버(Authorization Server)</strong>: 사용자 인증 후 토큰을 발급하는 서버</li><li><strong>액세스 토큰(Access Token)</strong>: 리소스 접근을 위한 자격 증명</li><li><strong>리프레시 토큰(Refresh Token)</strong>: 새로운 액세스 토큰을 얻기 위한 토큰</li></ol></li></ul><h3 id=주요-차이점>주요 차이점<a hidden class=anchor aria-hidden=true href=#주요-차이점>#</a></h3><ol><li>목적과 기능<ul><li><strong>JWT</strong>: 주로 인증과 정보 교환에 중점</li><li><strong>OAuth 2.0</strong>: 인가(권한 부여)에 중점</li></ul></li><li>범위<ul><li><strong>JWT</strong>: 토큰 형식과 서명 방법을 정의하는 표준</li><li><strong>OAuth 2.0</strong>: 전체 인가 프레임워크와 프로토콜 정의</li></ul></li><li>복잡성<ul><li><strong>JWT</strong>: 상대적으로 단순한 구조와 구현</li><li><strong>OAuth 2.0</strong>: 여러 흐름과 역할이 포함된 복잡한 프레임워크</li></ul></li><li>토큰 내용<ul><li><strong>JWT</strong>: 토큰 자체에 사용자 정보와 메타데이터를 포함</li><li><strong>OAuth 2.0</strong>: 액세스 토큰은 일반적으로 참조 토큰이지만, JWT 형식의 토큰을 사용할 수도 있음</li></ul></li><li>상태 관리<ul><li><strong>JWT</strong>: 일반적으로 상태 비저장(Stateless) 방식</li><li><strong>OAuth 2.0</strong>: 일반적으로 상태 저장(Stateful) 방식, 특히 리프레시 토큰 관리 시</li></ul></li></ol><h3 id=사용-사례>사용 사례<a hidden class=anchor aria-hidden=true href=#사용-사례>#</a></h3><ol><li>JWT 적합한 사용 사례<ul><li>단일 도메인 내 사용자 인증</li><li>마이크로서비스 간 정보 전달</li><li>일회성 이메일 확인이나 비밀번호 재설정</li><li>상태 비저장 API 인증</li></ul></li><li>OAuth 2.0 적합한 사용 사례<ul><li>소셜 로그인(페이스북, 구글 등을 통한 로그인)</li><li>제3자 애플리케이션 API 인가</li><li>여러 서비스 간의 권한 위임</li><li>사용자의 특정 리소스에 대한 제한된 접근 제공</li></ul></li></ol><h3 id=장단점>장단점<a hidden class=anchor aria-hidden=true href=#장단점>#</a></h3><h4 id=jwt>JWT<a hidden class=anchor aria-hidden=true href=#jwt>#</a></h4><ol><li>장점<ul><li>자체 포함적: 필요한 모든 정보를 토큰 자체에 포함</li><li>서버 부하 감소: 세션 저장소가 필요 없음</li><li>확장성: 분산 시스템에서 효율적</li><li>간단한 구현: 대부분의 프로그래밍 언어에서 지원</li></ul></li><li>단점<ul><li>토큰 크기: 클레임이 많을수록 토큰 크기 증가</li><li>보안 위험: 클라이언트에 저장된 정보는 탈취될 수 있음</li><li>토큰 무효화: 발급된 토큰을 즉시 무효화하기 어려움</li><li>상태 저장 불가: 로그아웃 등의 기능 구현이 복잡</li></ul></li></ol><h4 id=oauth-20>OAuth 2.0<a hidden class=anchor aria-hidden=true href=#oauth-20>#</a></h4><ol><li>장점<ul><li>높은 보안성: 사용자 자격 증명을 직접 공유하지 않음</li><li>세분화된 권한 부여: 특정 권한(scope)에 대해서만 접근 허용</li><li>다양한 인가 흐름: 다양한 클라이언트 유형에 적합한 흐름 제공</li><li>토큰 갱신 메커니즘: 리프레시 토큰을 통한 장기 접근 지원</li></ul></li><li>단점<ul><li>구현 복잡성: 전체 흐름 구현이 복잡함</li><li>다양한 해석: 명세의 유연성으로 인한 구현 차이</li><li>오버헤드: 여러 요청과 응답 교환이 필요</li><li>중앙화된 인가 서버: 단일 장애 지점이 될 수 있음</li></ul></li></ol><h3 id=상호-관계>상호 관계<a hidden class=anchor aria-hidden=true href=#상호-관계>#</a></h3><p>JWT와 OAuth 2.0은 경쟁 관계가 아니라 보완적인 관계에 있다. OAuth 2.0은 인가 프레임워크로, JWT는 토큰 형식으로 사용될 수 있다. 실제로 많은 OAuth 2.0 구현에서는 액세스 토큰과 ID 토큰으로 JWT 형식을 사용한다. 이러한 결합을 OpenID Connect(OIDC)라고 하며, OAuth 2.0을 확장하여 인증 레이어를 추가한 프로토콜이다.</p><h3 id=jwt-vs-oauth-20-1>JWT vs. OAuth 2.0<a hidden class=anchor aria-hidden=true href=#jwt-vs-oauth-20-1>#</a></h3><table><thead><tr><th>특성</th><th>JWT</th><th>OAuth 2.0</th></tr></thead><tbody><tr><td>주요 목적</td><td>인증(Authentication) 및 정보 교환</td><td>인가(Authorization) 및 권한 위임</td></tr><tr><td>형태</td><td>토큰 형식 표준</td><td>인가 프레임워크 및 프로토콜</td></tr><tr><td>복잡성</td><td>상대적으로 단순</td><td>복잡한 여러 흐름</td></tr><tr><td>상태 관리</td><td>Stateless (상태 비저장)</td><td>일반적으로 Stateful (상태 저장)</td></tr><tr><td>토큰 내용</td><td>자체 포함적 (사용자 정보 포함)</td><td>일반적으로 참조 토큰 (JWT 사용 가능)</td></tr><tr><td>토큰 유효성</td><td>서명을 통한 로컬 검증</td><td>인가 서버를 통한 검증 (일반적으로)</td></tr><tr><td>토큰 취소</td><td>어려움 (블랙리스트 필요)</td><td>상대적으로 쉬움</td></tr><tr><td>스케일링</td><td>높음 (서버에 상태 저장 안 함)</td><td>중간 (토큰 저장소 필요)</td></tr><tr><td>구현 난이도</td><td>낮음</td><td>높음</td></tr><tr><td>사용 사례</td><td>단일 서비스 인증, API 인증</td><td>소셜 로그인, API 인가, 서비스 간 권한 위임</td></tr><tr><td>클라이언트 타입</td><td>제한 없음</td><td>다양한 클라이언트별 흐름 제공</td></tr><tr><td>리소스 접근</td><td>직접적 (토큰 내 정보 사용)</td><td>간접적 (토큰으로 리소스 서버 접근)</td></tr><tr><td>토큰 갱신</td><td>기본 지원 없음</td><td>리프레시 토큰 지원</td></tr><tr><td>권한 범위</td><td>토큰 내 클레임으로 정의</td><td>Scope 파라미터로 정의</td></tr><tr><td>표준화</td><td>RFC 7519</td><td>RFC 6749, RFC 6750</td></tr><tr><td>보안 강점</td><td>무결성 보장 (서명)</td><td>자격 증명 비공개 (권한 위임)</td></tr><tr><td>확장성</td><td>JSON 클레임으로 확장 가능</td><td>다양한 확장 명세 존재 (OIDC 등)</td></tr><tr><td>서드파티 지원</td><td>직접적으로 지원하지 않음</td><td>핵심 기능</td></tr></tbody></table><h3 id=실제-구현-예시>실제 구현 예시<a hidden class=anchor aria-hidden=true href=#실제-구현-예시>#</a></h3><h4 id=jwt-구현-예시-nodejs>JWT 구현 예시 (Node.js)<a hidden class=anchor aria-hidden=true href=#jwt-구현-예시-nodejs>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a>
</span><span class=lnt id=hl-0-21><a class=lnlinks href=#hl-0-21>21</a>
</span><span class=lnt id=hl-0-22><a class=lnlinks href=#hl-0-22>22</a>
</span><span class=lnt id=hl-0-23><a class=lnlinks href=#hl-0-23>23</a>
</span><span class=lnt id=hl-0-24><a class=lnlinks href=#hl-0-24>24</a>
</span><span class=lnt id=hl-0-25><a class=lnlinks href=#hl-0-25>25</a>
</span><span class=lnt id=hl-0-26><a class=lnlinks href=#hl-0-26>26</a>
</span><span class=lnt id=hl-0-27><a class=lnlinks href=#hl-0-27>27</a>
</span><span class=lnt id=hl-0-28><a class=lnlinks href=#hl-0-28>28</a>
</span><span class=lnt id=hl-0-29><a class=lnlinks href=#hl-0-29>29</a>
</span><span class=lnt id=hl-0-30><a class=lnlinks href=#hl-0-30>30</a>
</span><span class=lnt id=hl-0-31><a class=lnlinks href=#hl-0-31>31</a>
</span><span class=lnt id=hl-0-32><a class=lnlinks href=#hl-0-32>32</a>
</span><span class=lnt id=hl-0-33><a class=lnlinks href=#hl-0-33>33</a>
</span><span class=lnt id=hl-0-34><a class=lnlinks href=#hl-0-34>34</a>
</span><span class=lnt id=hl-0-35><a class=lnlinks href=#hl-0-35>35</a>
</span><span class=lnt id=hl-0-36><a class=lnlinks href=#hl-0-36>36</a>
</span><span class=lnt id=hl-0-37><a class=lnlinks href=#hl-0-37>37</a>
</span><span class=lnt id=hl-0-38><a class=lnlinks href=#hl-0-38>38</a>
</span><span class=lnt id=hl-0-39><a class=lnlinks href=#hl-0-39>39</a>
</span><span class=lnt id=hl-0-40><a class=lnlinks href=#hl-0-40>40</a>
</span><span class=lnt id=hl-0-41><a class=lnlinks href=#hl-0-41>41</a>
</span><span class=lnt id=hl-0-42><a class=lnlinks href=#hl-0-42>42</a>
</span><span class=lnt id=hl-0-43><a class=lnlinks href=#hl-0-43>43</a>
</span><span class=lnt id=hl-0-44><a class=lnlinks href=#hl-0-44>44</a>
</span><span class=lnt id=hl-0-45><a class=lnlinks href=#hl-0-45>45</a>
</span><span class=lnt id=hl-0-46><a class=lnlinks href=#hl-0-46>46</a>
</span><span class=lnt id=hl-0-47><a class=lnlinks href=#hl-0-47>47</a>
</span><span class=lnt id=hl-0-48><a class=lnlinks href=#hl-0-48>48</a>
</span><span class=lnt id=hl-0-49><a class=lnlinks href=#hl-0-49>49</a>
</span><span class=lnt id=hl-0-50><a class=lnlinks href=#hl-0-50>50</a>
</span><span class=lnt id=hl-0-51><a class=lnlinks href=#hl-0-51>51</a>
</span><span class=lnt id=hl-0-52><a class=lnlinks href=#hl-0-52>52</a>
</span><span class=lnt id=hl-0-53><a class=lnlinks href=#hl-0-53>53</a>
</span><span class=lnt id=hl-0-54><a class=lnlinks href=#hl-0-54>54</a>
</span><span class=lnt id=hl-0-55><a class=lnlinks href=#hl-0-55>55</a>
</span><span class=lnt id=hl-0-56><a class=lnlinks href=#hl-0-56>56</a>
</span><span class=lnt id=hl-0-57><a class=lnlinks href=#hl-0-57>57</a>
</span><span class=lnt id=hl-0-58><a class=lnlinks href=#hl-0-58>58</a>
</span><span class=lnt id=hl-0-59><a class=lnlinks href=#hl-0-59>59</a>
</span><span class=lnt id=hl-0-60><a class=lnlinks href=#hl-0-60>60</a>
</span><span class=lnt id=hl-0-61><a class=lnlinks href=#hl-0-61>61</a>
</span><span class=lnt id=hl-0-62><a class=lnlinks href=#hl-0-62>62</a>
</span><span class=lnt id=hl-0-63><a class=lnlinks href=#hl-0-63>63</a>
</span><span class=lnt id=hl-0-64><a class=lnlinks href=#hl-0-64>64</a>
</span><span class=lnt id=hl-0-65><a class=lnlinks href=#hl-0-65>65</a>
</span><span class=lnt id=hl-0-66><a class=lnlinks href=#hl-0-66>66</a>
</span><span class=lnt id=hl-0-67><a class=lnlinks href=#hl-0-67>67</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// JWT 인증 구현 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>jwt</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;jsonwebtoken&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 비밀키 - 실제로는 환경 변수로 관리해야 함
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>SECRET_KEY</span> <span class=o>=</span> <span class=s1>&#39;your_jwt_secret&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=nx>json</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 로그인 라우트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/login&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 사용자 인증 로직 (데이터베이스 조회 등)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>user</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>id</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>username</span><span class=o>:</span> <span class=s1>&#39;test_user&#39;</span><span class=p>,</span> <span class=nx>role</span><span class=o>:</span> <span class=s1>&#39;admin&#39;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// JWT 토큰 생성
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>jwt</span><span class=p>.</span><span class=nx>sign</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=nx>userId</span><span class=o>:</span> <span class=nx>user</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>username</span><span class=o>:</span> <span class=nx>user</span><span class=p>.</span><span class=nx>username</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>role</span><span class=o>:</span> <span class=nx>user</span><span class=p>.</span><span class=nx>role</span> 
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>SECRET_KEY</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=nx>expiresIn</span><span class=o>:</span> <span class=s1>&#39;1h&#39;</span><span class=p>,</span>  <span class=c1>// 토큰 만료 시간
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>issuer</span><span class=o>:</span> <span class=s1>&#39;myapp&#39;</span>   <span class=c1>// 발행자
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 클라이언트에 토큰 반환
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> <span class=nx>token</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 인증 미들웨어
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>authenticateToken</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>,</span> <span class=nx>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 헤더에서 토큰 추출
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>authHeader</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>headers</span><span class=p>[</span><span class=s1>&#39;authorization&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=nx>authHeader</span> <span class=o>&amp;&amp;</span> <span class=nx>authHeader</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39; &#39;</span><span class=p>)[</span><span class=mi>1</span><span class=p>];</span>  <span class=c1>// &#34;Bearer TOKEN&#34; 형식
</span></span></span><span class=line><span class=cl><span class=c1></span>  
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>token</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>401</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;인증 토큰이 필요합니다&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 토큰 검증
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>jwt</span><span class=p>.</span><span class=nx>verify</span><span class=p>(</span><span class=nx>token</span><span class=p>,</span> <span class=nx>SECRET_KEY</span><span class=p>,</span> <span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>decoded</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 토큰 검증 실패
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>403</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;유효하지 않은 토큰입니다&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 검증 성공 시 요청 객체에 사용자 정보 추가
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>req</span><span class=p>.</span><span class=nx>user</span> <span class=o>=</span> <span class=nx>decoded</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>next</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 보호된 라우트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/protected&#39;</span><span class=p>,</span> <span class=nx>authenticateToken</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span> 
</span></span><span class=line><span class=cl>    <span class=nx>message</span><span class=o>:</span> <span class=s1>&#39;인증된 사용자입니다!&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=nx>user</span><span class=o>:</span> <span class=nx>req</span><span class=p>.</span><span class=nx>user</span> 
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>3000</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;서버가 3000번 포트에서 실행 중입니다&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=oauth-20-구현-예시-nodejs---인가-코드-흐름>OAuth 2.0 구현 예시 (Node.js - 인가 코드 흐름)<a hidden class=anchor aria-hidden=true href=#oauth-20-구현-예시-nodejs---인가-코드-흐름>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>  1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>  2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>  3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>  4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5>  5</a>
</span><span class=lnt id=hl-1-6><a class=lnlinks href=#hl-1-6>  6</a>
</span><span class=lnt id=hl-1-7><a class=lnlinks href=#hl-1-7>  7</a>
</span><span class=lnt id=hl-1-8><a class=lnlinks href=#hl-1-8>  8</a>
</span><span class=lnt id=hl-1-9><a class=lnlinks href=#hl-1-9>  9</a>
</span><span class=lnt id=hl-1-10><a class=lnlinks href=#hl-1-10> 10</a>
</span><span class=lnt id=hl-1-11><a class=lnlinks href=#hl-1-11> 11</a>
</span><span class=lnt id=hl-1-12><a class=lnlinks href=#hl-1-12> 12</a>
</span><span class=lnt id=hl-1-13><a class=lnlinks href=#hl-1-13> 13</a>
</span><span class=lnt id=hl-1-14><a class=lnlinks href=#hl-1-14> 14</a>
</span><span class=lnt id=hl-1-15><a class=lnlinks href=#hl-1-15> 15</a>
</span><span class=lnt id=hl-1-16><a class=lnlinks href=#hl-1-16> 16</a>
</span><span class=lnt id=hl-1-17><a class=lnlinks href=#hl-1-17> 17</a>
</span><span class=lnt id=hl-1-18><a class=lnlinks href=#hl-1-18> 18</a>
</span><span class=lnt id=hl-1-19><a class=lnlinks href=#hl-1-19> 19</a>
</span><span class=lnt id=hl-1-20><a class=lnlinks href=#hl-1-20> 20</a>
</span><span class=lnt id=hl-1-21><a class=lnlinks href=#hl-1-21> 21</a>
</span><span class=lnt id=hl-1-22><a class=lnlinks href=#hl-1-22> 22</a>
</span><span class=lnt id=hl-1-23><a class=lnlinks href=#hl-1-23> 23</a>
</span><span class=lnt id=hl-1-24><a class=lnlinks href=#hl-1-24> 24</a>
</span><span class=lnt id=hl-1-25><a class=lnlinks href=#hl-1-25> 25</a>
</span><span class=lnt id=hl-1-26><a class=lnlinks href=#hl-1-26> 26</a>
</span><span class=lnt id=hl-1-27><a class=lnlinks href=#hl-1-27> 27</a>
</span><span class=lnt id=hl-1-28><a class=lnlinks href=#hl-1-28> 28</a>
</span><span class=lnt id=hl-1-29><a class=lnlinks href=#hl-1-29> 29</a>
</span><span class=lnt id=hl-1-30><a class=lnlinks href=#hl-1-30> 30</a>
</span><span class=lnt id=hl-1-31><a class=lnlinks href=#hl-1-31> 31</a>
</span><span class=lnt id=hl-1-32><a class=lnlinks href=#hl-1-32> 32</a>
</span><span class=lnt id=hl-1-33><a class=lnlinks href=#hl-1-33> 33</a>
</span><span class=lnt id=hl-1-34><a class=lnlinks href=#hl-1-34> 34</a>
</span><span class=lnt id=hl-1-35><a class=lnlinks href=#hl-1-35> 35</a>
</span><span class=lnt id=hl-1-36><a class=lnlinks href=#hl-1-36> 36</a>
</span><span class=lnt id=hl-1-37><a class=lnlinks href=#hl-1-37> 37</a>
</span><span class=lnt id=hl-1-38><a class=lnlinks href=#hl-1-38> 38</a>
</span><span class=lnt id=hl-1-39><a class=lnlinks href=#hl-1-39> 39</a>
</span><span class=lnt id=hl-1-40><a class=lnlinks href=#hl-1-40> 40</a>
</span><span class=lnt id=hl-1-41><a class=lnlinks href=#hl-1-41> 41</a>
</span><span class=lnt id=hl-1-42><a class=lnlinks href=#hl-1-42> 42</a>
</span><span class=lnt id=hl-1-43><a class=lnlinks href=#hl-1-43> 43</a>
</span><span class=lnt id=hl-1-44><a class=lnlinks href=#hl-1-44> 44</a>
</span><span class=lnt id=hl-1-45><a class=lnlinks href=#hl-1-45> 45</a>
</span><span class=lnt id=hl-1-46><a class=lnlinks href=#hl-1-46> 46</a>
</span><span class=lnt id=hl-1-47><a class=lnlinks href=#hl-1-47> 47</a>
</span><span class=lnt id=hl-1-48><a class=lnlinks href=#hl-1-48> 48</a>
</span><span class=lnt id=hl-1-49><a class=lnlinks href=#hl-1-49> 49</a>
</span><span class=lnt id=hl-1-50><a class=lnlinks href=#hl-1-50> 50</a>
</span><span class=lnt id=hl-1-51><a class=lnlinks href=#hl-1-51> 51</a>
</span><span class=lnt id=hl-1-52><a class=lnlinks href=#hl-1-52> 52</a>
</span><span class=lnt id=hl-1-53><a class=lnlinks href=#hl-1-53> 53</a>
</span><span class=lnt id=hl-1-54><a class=lnlinks href=#hl-1-54> 54</a>
</span><span class=lnt id=hl-1-55><a class=lnlinks href=#hl-1-55> 55</a>
</span><span class=lnt id=hl-1-56><a class=lnlinks href=#hl-1-56> 56</a>
</span><span class=lnt id=hl-1-57><a class=lnlinks href=#hl-1-57> 57</a>
</span><span class=lnt id=hl-1-58><a class=lnlinks href=#hl-1-58> 58</a>
</span><span class=lnt id=hl-1-59><a class=lnlinks href=#hl-1-59> 59</a>
</span><span class=lnt id=hl-1-60><a class=lnlinks href=#hl-1-60> 60</a>
</span><span class=lnt id=hl-1-61><a class=lnlinks href=#hl-1-61> 61</a>
</span><span class=lnt id=hl-1-62><a class=lnlinks href=#hl-1-62> 62</a>
</span><span class=lnt id=hl-1-63><a class=lnlinks href=#hl-1-63> 63</a>
</span><span class=lnt id=hl-1-64><a class=lnlinks href=#hl-1-64> 64</a>
</span><span class=lnt id=hl-1-65><a class=lnlinks href=#hl-1-65> 65</a>
</span><span class=lnt id=hl-1-66><a class=lnlinks href=#hl-1-66> 66</a>
</span><span class=lnt id=hl-1-67><a class=lnlinks href=#hl-1-67> 67</a>
</span><span class=lnt id=hl-1-68><a class=lnlinks href=#hl-1-68> 68</a>
</span><span class=lnt id=hl-1-69><a class=lnlinks href=#hl-1-69> 69</a>
</span><span class=lnt id=hl-1-70><a class=lnlinks href=#hl-1-70> 70</a>
</span><span class=lnt id=hl-1-71><a class=lnlinks href=#hl-1-71> 71</a>
</span><span class=lnt id=hl-1-72><a class=lnlinks href=#hl-1-72> 72</a>
</span><span class=lnt id=hl-1-73><a class=lnlinks href=#hl-1-73> 73</a>
</span><span class=lnt id=hl-1-74><a class=lnlinks href=#hl-1-74> 74</a>
</span><span class=lnt id=hl-1-75><a class=lnlinks href=#hl-1-75> 75</a>
</span><span class=lnt id=hl-1-76><a class=lnlinks href=#hl-1-76> 76</a>
</span><span class=lnt id=hl-1-77><a class=lnlinks href=#hl-1-77> 77</a>
</span><span class=lnt id=hl-1-78><a class=lnlinks href=#hl-1-78> 78</a>
</span><span class=lnt id=hl-1-79><a class=lnlinks href=#hl-1-79> 79</a>
</span><span class=lnt id=hl-1-80><a class=lnlinks href=#hl-1-80> 80</a>
</span><span class=lnt id=hl-1-81><a class=lnlinks href=#hl-1-81> 81</a>
</span><span class=lnt id=hl-1-82><a class=lnlinks href=#hl-1-82> 82</a>
</span><span class=lnt id=hl-1-83><a class=lnlinks href=#hl-1-83> 83</a>
</span><span class=lnt id=hl-1-84><a class=lnlinks href=#hl-1-84> 84</a>
</span><span class=lnt id=hl-1-85><a class=lnlinks href=#hl-1-85> 85</a>
</span><span class=lnt id=hl-1-86><a class=lnlinks href=#hl-1-86> 86</a>
</span><span class=lnt id=hl-1-87><a class=lnlinks href=#hl-1-87> 87</a>
</span><span class=lnt id=hl-1-88><a class=lnlinks href=#hl-1-88> 88</a>
</span><span class=lnt id=hl-1-89><a class=lnlinks href=#hl-1-89> 89</a>
</span><span class=lnt id=hl-1-90><a class=lnlinks href=#hl-1-90> 90</a>
</span><span class=lnt id=hl-1-91><a class=lnlinks href=#hl-1-91> 91</a>
</span><span class=lnt id=hl-1-92><a class=lnlinks href=#hl-1-92> 92</a>
</span><span class=lnt id=hl-1-93><a class=lnlinks href=#hl-1-93> 93</a>
</span><span class=lnt id=hl-1-94><a class=lnlinks href=#hl-1-94> 94</a>
</span><span class=lnt id=hl-1-95><a class=lnlinks href=#hl-1-95> 95</a>
</span><span class=lnt id=hl-1-96><a class=lnlinks href=#hl-1-96> 96</a>
</span><span class=lnt id=hl-1-97><a class=lnlinks href=#hl-1-97> 97</a>
</span><span class=lnt id=hl-1-98><a class=lnlinks href=#hl-1-98> 98</a>
</span><span class=lnt id=hl-1-99><a class=lnlinks href=#hl-1-99> 99</a>
</span><span class=lnt id=hl-1-100><a class=lnlinks href=#hl-1-100>100</a>
</span><span class=lnt id=hl-1-101><a class=lnlinks href=#hl-1-101>101</a>
</span><span class=lnt id=hl-1-102><a class=lnlinks href=#hl-1-102>102</a>
</span><span class=lnt id=hl-1-103><a class=lnlinks href=#hl-1-103>103</a>
</span><span class=lnt id=hl-1-104><a class=lnlinks href=#hl-1-104>104</a>
</span><span class=lnt id=hl-1-105><a class=lnlinks href=#hl-1-105>105</a>
</span><span class=lnt id=hl-1-106><a class=lnlinks href=#hl-1-106>106</a>
</span><span class=lnt id=hl-1-107><a class=lnlinks href=#hl-1-107>107</a>
</span><span class=lnt id=hl-1-108><a class=lnlinks href=#hl-1-108>108</a>
</span><span class=lnt id=hl-1-109><a class=lnlinks href=#hl-1-109>109</a>
</span><span class=lnt id=hl-1-110><a class=lnlinks href=#hl-1-110>110</a>
</span><span class=lnt id=hl-1-111><a class=lnlinks href=#hl-1-111>111</a>
</span><span class=lnt id=hl-1-112><a class=lnlinks href=#hl-1-112>112</a>
</span><span class=lnt id=hl-1-113><a class=lnlinks href=#hl-1-113>113</a>
</span><span class=lnt id=hl-1-114><a class=lnlinks href=#hl-1-114>114</a>
</span><span class=lnt id=hl-1-115><a class=lnlinks href=#hl-1-115>115</a>
</span><span class=lnt id=hl-1-116><a class=lnlinks href=#hl-1-116>116</a>
</span><span class=lnt id=hl-1-117><a class=lnlinks href=#hl-1-117>117</a>
</span><span class=lnt id=hl-1-118><a class=lnlinks href=#hl-1-118>118</a>
</span><span class=lnt id=hl-1-119><a class=lnlinks href=#hl-1-119>119</a>
</span><span class=lnt id=hl-1-120><a class=lnlinks href=#hl-1-120>120</a>
</span><span class=lnt id=hl-1-121><a class=lnlinks href=#hl-1-121>121</a>
</span><span class=lnt id=hl-1-122><a class=lnlinks href=#hl-1-122>122</a>
</span><span class=lnt id=hl-1-123><a class=lnlinks href=#hl-1-123>123</a>
</span><span class=lnt id=hl-1-124><a class=lnlinks href=#hl-1-124>124</a>
</span><span class=lnt id=hl-1-125><a class=lnlinks href=#hl-1-125>125</a>
</span><span class=lnt id=hl-1-126><a class=lnlinks href=#hl-1-126>126</a>
</span><span class=lnt id=hl-1-127><a class=lnlinks href=#hl-1-127>127</a>
</span><span class=lnt id=hl-1-128><a class=lnlinks href=#hl-1-128>128</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// OAuth 2.0 인가 코드 흐름 구현 예시
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>axios</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;axios&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>crypto</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;crypto&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// OAuth 설정 - 실제로는 환경 변수로 관리해야 함
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>CLIENT_ID</span> <span class=o>=</span> <span class=s1>&#39;your_client_id&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>CLIENT_SECRET</span> <span class=o>=</span> <span class=s1>&#39;your_client_secret&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>REDIRECT_URI</span> <span class=o>=</span> <span class=s1>&#39;http://localhost:3000/callback&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>AUTH_SERVER_URL</span> <span class=o>=</span> <span class=s1>&#39;https://authorization-server.com&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 상태 값 저장을 위한 임시 저장소 (실제로는 Redis 등 사용)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>stateSessions</span> <span class=o>=</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// CSRF 방지를 위한 상태 값 생성
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>state</span> <span class=o>=</span> <span class=nx>crypto</span><span class=p>.</span><span class=nx>randomBytes</span><span class=p>(</span><span class=mi>16</span><span class=p>).</span><span class=nx>toString</span><span class=p>(</span><span class=s1>&#39;hex&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 상태 값을 세션에 저장
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>stateSessions</span><span class=p>[</span><span class=nx>state</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>created</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>()</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 인가 서버로 리디렉션할 URL 생성
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>authorizationUrl</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>URL</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>AUTH_SERVER_URL</span><span class=si>}</span><span class=sb>/authorize`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>authorizationUrl</span><span class=p>.</span><span class=nx>searchParams</span><span class=p>.</span><span class=nx>append</span><span class=p>(</span><span class=s1>&#39;response_type&#39;</span><span class=p>,</span> <span class=s1>&#39;code&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>authorizationUrl</span><span class=p>.</span><span class=nx>searchParams</span><span class=p>.</span><span class=nx>append</span><span class=p>(</span><span class=s1>&#39;client_id&#39;</span><span class=p>,</span> <span class=nx>CLIENT_ID</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>authorizationUrl</span><span class=p>.</span><span class=nx>searchParams</span><span class=p>.</span><span class=nx>append</span><span class=p>(</span><span class=s1>&#39;redirect_uri&#39;</span><span class=p>,</span> <span class=nx>REDIRECT_URI</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>authorizationUrl</span><span class=p>.</span><span class=nx>searchParams</span><span class=p>.</span><span class=nx>append</span><span class=p>(</span><span class=s1>&#39;scope&#39;</span><span class=p>,</span> <span class=s1>&#39;read profile&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>authorizationUrl</span><span class=p>.</span><span class=nx>searchParams</span><span class=p>.</span><span class=nx>append</span><span class=p>(</span><span class=s1>&#39;state&#39;</span><span class=p>,</span> <span class=nx>state</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 사용자를 인가 서버로 리디렉션
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>res</span><span class=p>.</span><span class=nx>redirect</span><span class=p>(</span><span class=nx>authorizationUrl</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 콜백 처리
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/callback&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>code</span><span class=p>,</span> <span class=nx>state</span><span class=p>,</span> <span class=nx>error</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>query</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 에러 처리
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>if</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>400</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>error</span><span class=o>:</span> <span class=nx>error</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 상태 값 검증
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>state</span> <span class=o>||</span> <span class=o>!</span><span class=nx>stateSessions</span><span class=p>[</span><span class=nx>state</span><span class=p>])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>400</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>error</span><span class=o>:</span> <span class=s1>&#39;유효하지 않은 상태 값입니다&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=c1>// 상태 값 세션 삭제 (1회성)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>delete</span> <span class=nx>stateSessions</span><span class=p>[</span><span class=nx>state</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 인가 코드를 액세스 토큰으로 교환
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>tokenResponse</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>AUTH_SERVER_URL</span><span class=si>}</span><span class=sb>/token`</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>grant_type</span><span class=o>:</span> <span class=s1>&#39;authorization_code&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>code</span><span class=o>:</span> <span class=nx>code</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>redirect_uri</span><span class=o>:</span> <span class=nx>REDIRECT_URI</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>client_id</span><span class=o>:</span> <span class=nx>CLIENT_ID</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>client_secret</span><span class=o>:</span> <span class=nx>CLIENT_SECRET</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span> <span class=s1>&#39;application/x-www-form-urlencoded&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 토큰 정보 추출
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=p>{</span> <span class=nx>access_token</span><span class=p>,</span> <span class=nx>refresh_token</span><span class=p>,</span> <span class=nx>expires_in</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>tokenResponse</span><span class=p>.</span><span class=nx>data</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 사용자 정보 요청 (액세스 토큰 사용)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>userResponse</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>AUTH_SERVER_URL</span><span class=si>}</span><span class=sb>/userinfo`</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;Authorization&#39;</span><span class=o>:</span> <span class=sb>`Bearer </span><span class=si>${</span><span class=nx>access_token</span><span class=si>}</span><span class=sb>`</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 사용자 정보와 토큰 반환
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>user</span><span class=o>:</span> <span class=nx>userResponse</span><span class=p>.</span><span class=nx>data</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>tokens</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>access_token</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>refresh_token</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>expires_in</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>500</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>error</span><span class=o>:</span> <span class=s1>&#39;토큰 교환 중 오류가 발생했습니다&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>details</span><span class=o>:</span> <span class=nx>error</span><span class=p>.</span><span class=nx>message</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 토큰 갱신 엔드포인트
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/refresh-token&#39;</span><span class=p>,</span> <span class=kr>async</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>refresh_token</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>body</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>refresh_token</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>400</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span> <span class=nx>error</span><span class=o>:</span> <span class=s1>&#39;리프레시 토큰이 필요합니다&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 리프레시 토큰을 사용하여 새 액세스 토큰 요청
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>axios</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>AUTH_SERVER_URL</span><span class=si>}</span><span class=sb>/token`</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>grant_type</span><span class=o>:</span> <span class=s1>&#39;refresh_token&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>refresh_token</span><span class=o>:</span> <span class=nx>refresh_token</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>client_id</span><span class=o>:</span> <span class=nx>CLIENT_ID</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>client_secret</span><span class=o>:</span> <span class=nx>CLIENT_SECRET</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span> <span class=s1>&#39;application/x-www-form-urlencoded&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 새 토큰 정보 반환
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>500</span><span class=p>).</span><span class=nx>json</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>error</span><span class=o>:</span> <span class=s1>&#39;토큰 갱신 중 오류가 발생했습니다&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>details</span><span class=o>:</span> <span class=nx>error</span><span class=p>.</span><span class=nx>message</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>3000</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;OAuth 클라이언트가 3000번 포트에서 실행 중입니다&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=용어-정리>용어 정리<a hidden class=anchor aria-hidden=true href=#용어-정리>#</a></h2><table><thead><tr><th>용어</th><th>설명</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><hr><h2 id=참고-및-출처>참고 및 출처<a hidden class=anchor aria-hidden=true href=#참고-및-출처>#</a></h2></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/backend/>Backend</a></li><li><a href=https://buenhyden.github.io/tags/api-design/>API-Design</a></li><li><a href=https://buenhyden.github.io/tags/authentication-methods/>Authentication-Methods</a></li><li><a href=https://buenhyden.github.io/tags/jwt/>JWT</a></li></ul><nav class=paginav><a class=prev href=https://buenhyden.github.io/posts/security/access-control/authentication/protocols/oauth/oauth-20-vs-openid-connect/><span class=title>« Prev</span><br><span>OAuth 2.0 vs. OpenID Connect</span>
</a><a class=next href=https://buenhyden.github.io/posts/security/access-control/authentication/implementations/token-based-authentication/token-based-authentication-vs-saml/><span class=title>Next »</span><br><span>Token Authentication vs. SAML</span></a></nav></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>