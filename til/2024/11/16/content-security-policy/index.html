<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Content Security Policy | hyunyoun's Blog</title>
<meta name=keywords content="Security,Security-Policy,Content-Security-Policy,CSP"><meta name=description content="신뢰된 웹 페이지 콘텍스트에서 악의적인 콘텐츠를 실행하게 하는 사이트 간 스크립팅, 클릭재킹, 그리고 기타 코드 인젝션 공격을 예방하기 위해 도입된 컴퓨터 보안 표준"><meta name=author content="Me"><link rel=canonical href=https://buenhyden.github.io/til/2024/11/16/content-security-policy/><meta name=google-site-verification content="googlee06938ebbfcbac49.html"><link crossorigin=anonymous href=/assets/css/stylesheet.9a2bbe2d8b5afa9d4df22976abb7b72f1f7f1c467d2b30f03090108f9496ae6c.css integrity="sha256-miu+LYta+p1N8il2q7e3Lx9/HEZ9KzDwMJAQj5SWrmw=" rel="preload stylesheet" as=style><link rel=icon href=https://buenhyden.github.io/favicons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://buenhyden.github.io/favicons/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://buenhyden.github.io/favicons/favicon-32x32.png><link rel=apple-touch-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><link rel=mask-icon href=https://buenhyden.github.io/favicons/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://buenhyden.github.io/til/2024/11/16/content-security-policy/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3156423099418350" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W8XTMYPTLC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-W8XTMYPTLC")}</script><meta property="og:url" content="https://buenhyden.github.io/til/2024/11/16/content-security-policy/"><meta property="og:site_name" content="hyunyoun's Blog"><meta property="og:title" content="Content Security Policy"><meta property="og:description" content="신뢰된 웹 페이지 콘텍스트에서 악의적인 콘텐츠를 실행하게 하는 사이트 간 스크립팅, 클릭재킹, 그리고 기타 코드 인젝션 공격을 예방하기 위해 도입된 컴퓨터 보안 표준"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="til"><meta property="article:published_time" content="2024-11-16T19:58:00+00:00"><meta property="article:modified_time" content="2024-11-16T19:58:00+00:00"><meta property="article:tag" content="Security"><meta property="article:tag" content="Security-Policy"><meta property="article:tag" content="Content-Security-Policy"><meta property="article:tag" content="CSP"><meta property="og:image" content="https://buenhyden.github.io/images"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://buenhyden.github.io/images"><meta name=twitter:title content="Content Security Policy"><meta name=twitter:description content="신뢰된 웹 페이지 콘텍스트에서 악의적인 콘텐츠를 실행하게 하는 사이트 간 스크립팅, 클릭재킹, 그리고 기타 코드 인젝션 공격을 예방하기 위해 도입된 컴퓨터 보안 표준"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"TIL","item":"https://buenhyden.github.io/til/"},{"@type":"ListItem","position":2,"name":"2024","item":"https://buenhyden.github.io/til/2024/"},{"@type":"ListItem","position":3,"name":"11","item":"https://buenhyden.github.io/til/2024/11/"},{"@type":"ListItem","position":4,"name":"16","item":"https://buenhyden.github.io/til/2024/11/16/"},{"@type":"ListItem","position":5,"name":"Content Security Policy","item":"https://buenhyden.github.io/til/2024/11/16/content-security-policy/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Content Security Policy","name":"Content Security Policy","description":"신뢰된 웹 페이지 콘텍스트에서 악의적인 콘텐츠를 실행하게 하는 사이트 간 스크립팅, 클릭재킹, 그리고 기타 코드 인젝션 공격을 예방하기 위해 도입된 컴퓨터 보안 표준","keywords":["Security","Security-Policy","Content-Security-Policy","CSP"],"articleBody":"Content Security Policy (CSP) 웹 애플리케이션의 보안을 강화하기 위한 중요한 보안 메커니즘\n개념과 목적:\n웹 애플리케이션에서 콘텐츠 주입 공격(XSS, 클릭재킹 등)을 방지하기 위한 보안 표준 웹사이트 소유자가 리소스 로딩을 제어할 수 있게 해주는 추가적인 보안 계층 브라우저가 신뢰할 수 있는 콘텐츠 소스를 명시적으로 선언 주요 특징:\nHTTP 응답 헤더를 통해 구현 브라우저 레벨에서 정책 강제 화이트리스트 기반의 콘텐츠 제어 위반 사항에 대한 보고 메커니즘 제공 CSP 구현 방법 HTTP 헤더를 통한 구현 1 Content-Security-Policy: default-src 'self'; img-src *; script-src 'self' trusted-scripts.com; HTML 메타 태그를 통한 구현 1 2 \u003cmeta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; img-src *; script-src 'self' trusted-scripts.com;\"\u003e CSP 주요 디렉티브 CSP는 다양한 리소스 유형별로 정책을 설정할 수 있습니다:\nDefault-src 다른 디렉티브의 기본값을 설정\n1 Content-Security-Policy: default-src 'self'; Script-src JavaScript 소스 제한\n1 Content-Security-Policy: script-src 'self' https://trusted-scripts.com; Style-src CSS 소스 제한\n1 Content-Security-Policy: style-src 'self' https://trusted-styles.com; Img-src 이미지 소스 제한\n1 Content-Security-Policy: img-src 'self' https://trusted-images.com; Connect-src AJAX, WebSocket 등의 연결 제한\n1 Content-Security-Policy: connect-src 'self' https://api.trusted-domain.com; CSP 소스 값의 종류 CSP 정책에서 사용할 수 있는 주요 소스 값들:\n‘self’: 현재 도메인에서만 리소스 로드 허용 ’none’: 모든 소스에서 리소스 로드 금지 ‘unsafe-inline’: 인라인 스크립트/스타일 허용 ‘unsafe-eval’: eval() 함수 사용 허용 https://example.com: 특정 도메인 허용 *: 모든 도메인 허용 CSP 보고 기능 CSP는 정책 위반 사항을 모니터링할 수 있는 보고 기능을 제공합니다:\n1 Content-Security-Policy-Report-Only: default-src 'self'; report-uri /csp-violation-report-endpoint/ 이 헤더를 사용하면 정책을 실제로 적용하지 않고 위반 사항만 모니터링할 수 있다.\nCSP 구현 예시 실제 웹사이트에서 사용할 수 있는 포괄적인 CSP 설정 예시:\n1 2 3 4 5 6 7 8 9 10 Content-Security-Policy: default-src 'self'; script-src 'self' https://trusted-scripts.com; style-src 'self' https://trusted-styles.com; img-src 'self' https://trusted-images.com; font-src 'self' https://trusted-fonts.com; frame-src 'none'; object-src 'none'; connect-src 'self' https://api.trusted-domain.com; report-uri /csp-violation-report-endpoint/; CSP 구현 시 주의사항 점진적 구현\n처음에는 Report-Only 모드로 시작 위반 사항을 모니터링하고 분석 문제없음이 확인되면 실제 정책으로 전환 인라인 코드 처리\n가능한 한 인라인 스크립트와 스타일을 외부 파일로 이동 필요한 경우 nonce나 hash를 사용하여 특정 인라인 코드 허용 레거시 지원\n오래된 브라우저에 대한 대체 처리 방안 마련 점진적 기능 저하(graceful degradation) 구현 CSP의 실제 활용 사례 대형 웹사이트들의 CSP 구현 예시:\nGitHub의 CSP: 1 Content-Security-Policy: default-src 'none'; base-uri 'self'; block-all-mixed-content; connect-src 'self' uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com... Twitter의 CSP: 1 Content-Security-Policy: default-src 'self'; connect-src 'self' https://*.twitter.com https://*.twimg.com... 참고 및 출처## Reference CSP\n","wordCount":"365","inLanguage":"en","image":"https://buenhyden.github.io/images","datePublished":"2024-11-16T19:58:00Z","dateModified":"2024-11-16T19:58:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://buenhyden.github.io/til/2024/11/16/content-security-policy/"},"publisher":{"@type":"Organization","name":"hyunyoun's Blog","logo":{"@type":"ImageObject","url":"https://buenhyden.github.io/favicons/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://buenhyden.github.io/ accesskey=h title="Hy's Blog (Alt + H)"><img src=https://buenhyden.github.io/favicons/apple-touch-icon.png alt aria-label=logo height=35>Hy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buenhyden.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://buenhyden.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://buenhyden.github.io/til/ title="Today I Learned"><span>Today I Learned</span></a></li><li><a href=https://buenhyden.github.io/coding-test/ title="Coding Test"><span>Coding Test</span></a></li><li><a href=https://buenhyden.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://buenhyden.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://buenhyden.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://buenhyden.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/til/>TIL</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/til/2024/>2024</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/til/2024/11/>11</a>&nbsp;»&nbsp;<a href=https://buenhyden.github.io/til/2024/11/16/>16</a></div><h1 class="post-title entry-hint-parent">Content Security Policy</h1><div class=post-description>신뢰된 웹 페이지 콘텍스트에서 악의적인 콘텐츠를 실행하게 하는 사이트 간 스크립팅, 클릭재킹, 그리고 기타 코드 인젝션 공격을 예방하기 위해 도입된 컴퓨터 보안 표준</div><div class=post-meta><span title='2024-11-16 19:58:00 +0000 UTC'>November 16, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;365 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/buenhyden/blog-data/main/content/TIL/2024/11/16/Content-Security-Policy.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#content-security-policy-csp>Content Security Policy (CSP)</a><ul><li><a href=#csp-구현-방법>CSP 구현 방법</a></li><li><a href=#csp-주요-디렉티브>CSP 주요 디렉티브</a></li><li><a href=#csp-소스-값의-종류>CSP 소스 값의 종류</a></li><li><a href=#csp-보고-기능>CSP 보고 기능</a></li><li><a href=#csp-구현-예시>CSP 구현 예시</a></li><li><a href=#csp-구현-시-주의사항>CSP 구현 시 주의사항</a></li><li><a href=#csp의-실제-활용-사례>CSP의 실제 활용 사례</a></li></ul></li><li><a href=#참고-및-출처-reference>참고 및 출처## Reference</a></li></ul></nav></div></details></div><div class=post-content><h2 id=content-security-policy-csp>Content Security Policy (CSP)<a hidden class=anchor aria-hidden=true href=#content-security-policy-csp>#</a></h2><p>웹 애플리케이션의 보안을 강화하기 위한 중요한 보안 메커니즘</p><p>개념과 목적:</p><ul><li>웹 애플리케이션에서 콘텐츠 주입 공격(XSS, 클릭재킹 등)을 방지하기 위한 보안 표준</li><li>웹사이트 소유자가 리소스 로딩을 제어할 수 있게 해주는 추가적인 보안 계층</li><li>브라우저가 신뢰할 수 있는 콘텐츠 소스를 명시적으로 선언</li></ul><p>주요 특징:</p><ul><li>HTTP 응답 헤더를 통해 구현</li><li>브라우저 레벨에서 정책 강제</li><li>화이트리스트 기반의 콘텐츠 제어</li><li>위반 사항에 대한 보고 메커니즘 제공</li></ul><h3 id=csp-구현-방법>CSP 구현 방법<a hidden class=anchor aria-hidden=true href=#csp-구현-방법>#</a></h3><h4 id=http-헤더를-통한-구현>HTTP 헤더를 통한 구현<a hidden class=anchor aria-hidden=true href=#http-헤더를-통한-구현>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>Content-Security-Policy: default-src &#39;self&#39;; img-src *; script-src &#39;self&#39; trusted-scripts.com;
</span></span></span></code></pre></td></tr></table></div></div><h4 id=html-메타-태그를-통한-구현>HTML 메타 태그를 통한 구현<a hidden class=anchor aria-hidden=true href=#html-메타-태그를-통한-구현>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>meta</span> <span class=na>http-equiv</span><span class=o>=</span><span class=s>&#34;Content-Security-Policy&#34;</span> 
</span></span><span class=line><span class=cl>	  <span class=na>content</span><span class=o>=</span><span class=s>&#34;default-src &#39;self&#39;; img-src *; script-src &#39;self&#39; trusted-scripts.com;&#34;</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=csp-주요-디렉티브>CSP 주요 디렉티브<a hidden class=anchor aria-hidden=true href=#csp-주요-디렉티브>#</a></h3><p>CSP는 다양한 리소스 유형별로 정책을 설정할 수 있습니다:</p><h4 id=default-src>Default-src<a hidden class=anchor aria-hidden=true href=#default-src>#</a></h4><p>다른 디렉티브의 기본값을 설정</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>Content-Security-Policy: default-src &#39;self&#39;;
</span></span></span></code></pre></td></tr></table></div></div><h4 id=script-src>Script-src<a hidden class=anchor aria-hidden=true href=#script-src>#</a></h4><p>JavaScript 소스 제한</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>Content-Security-Policy: script-src &#39;self&#39; https://trusted-scripts.com;
</span></span></span></code></pre></td></tr></table></div></div><h4 id=style-src>Style-src<a hidden class=anchor aria-hidden=true href=#style-src>#</a></h4><p>CSS 소스 제한</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>Content-Security-Policy: style-src &#39;self&#39; https://trusted-styles.com;
</span></span></span></code></pre></td></tr></table></div></div><h4 id=img-src>Img-src<a hidden class=anchor aria-hidden=true href=#img-src>#</a></h4><p>이미지 소스 제한</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>Content-Security-Policy: img-src &#39;self&#39; https://trusted-images.com;
</span></span></span></code></pre></td></tr></table></div></div><h4 id=connect-src>Connect-src<a hidden class=anchor aria-hidden=true href=#connect-src>#</a></h4><p>AJAX, WebSocket 등의 연결 제한</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>Content-Security-Policy: connect-src &#39;self&#39; https://api.trusted-domain.com;
</span></span></span></code></pre></td></tr></table></div></div><h3 id=csp-소스-값의-종류>CSP 소스 값의 종류<a hidden class=anchor aria-hidden=true href=#csp-소스-값의-종류>#</a></h3><p>CSP 정책에서 사용할 수 있는 주요 소스 값들:</p><ul><li>&lsquo;self&rsquo;: 현재 도메인에서만 리소스 로드 허용</li><li>&rsquo;none&rsquo;: 모든 소스에서 리소스 로드 금지</li><li>&lsquo;unsafe-inline&rsquo;: 인라인 스크립트/스타일 허용</li><li>&lsquo;unsafe-eval&rsquo;: eval() 함수 사용 허용</li><li><code>https://example.com</code>: 특정 도메인 허용</li><li>*: 모든 도메인 허용</li></ul><h3 id=csp-보고-기능>CSP 보고 기능<a hidden class=anchor aria-hidden=true href=#csp-보고-기능>#</a></h3><p>CSP는 정책 위반 사항을 모니터링할 수 있는 보고 기능을 제공합니다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>Content-Security-Policy-Report-Only: default-src &#39;self&#39;; report-uri /csp-violation-report-endpoint/
</span></span></span></code></pre></td></tr></table></div></div><p>이 헤더를 사용하면 정책을 실제로 적용하지 않고 위반 사항만 모니터링할 수 있다.</p><h3 id=csp-구현-예시>CSP 구현 예시<a hidden class=anchor aria-hidden=true href=#csp-구현-예시>#</a></h3><p>실제 웹사이트에서 사용할 수 있는 포괄적인 CSP 설정 예시:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1> 1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2> 2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3> 3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4> 4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5> 5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6> 6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7> 7</a>
</span><span class=lnt id=hl-8-8><a class=lnlinks href=#hl-8-8> 8</a>
</span><span class=lnt id=hl-8-9><a class=lnlinks href=#hl-8-9> 9</a>
</span><span class=lnt id=hl-8-10><a class=lnlinks href=#hl-8-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>Content-Security-Policy: 
</span></span></span><span class=line><span class=cl><span class=err>    default-src &#39;self&#39;; 
</span></span></span><span class=line><span class=cl><span class=err>    script-src &#39;self&#39; https://trusted-scripts.com;
</span></span></span><span class=line><span class=cl><span class=err>    style-src &#39;self&#39; https://trusted-styles.com;
</span></span></span><span class=line><span class=cl><span class=err>    img-src &#39;self&#39; https://trusted-images.com;
</span></span></span><span class=line><span class=cl><span class=err>    font-src &#39;self&#39; https://trusted-fonts.com;
</span></span></span><span class=line><span class=cl><span class=err>    frame-src &#39;none&#39;;
</span></span></span><span class=line><span class=cl><span class=err>    object-src &#39;none&#39;;
</span></span></span><span class=line><span class=cl><span class=err>    connect-src &#39;self&#39; https://api.trusted-domain.com;
</span></span></span><span class=line><span class=cl><span class=err>    report-uri /csp-violation-report-endpoint/;
</span></span></span></code></pre></td></tr></table></div></div><h3 id=csp-구현-시-주의사항>CSP 구현 시 주의사항<a hidden class=anchor aria-hidden=true href=#csp-구현-시-주의사항>#</a></h3><ol><li><p>점진적 구현</p><ul><li>처음에는 Report-Only 모드로 시작</li><li>위반 사항을 모니터링하고 분석</li><li>문제없음이 확인되면 실제 정책으로 전환</li></ul></li><li><p>인라인 코드 처리</p><ul><li>가능한 한 인라인 스크립트와 스타일을 외부 파일로 이동</li><li>필요한 경우 nonce나 hash를 사용하여 특정 인라인 코드 허용</li></ul></li><li><p>레거시 지원</p><ul><li>오래된 브라우저에 대한 대체 처리 방안 마련</li><li>점진적 기능 저하(graceful degradation) 구현</li></ul></li></ol><h3 id=csp의-실제-활용-사례>CSP의 실제 활용 사례<a hidden class=anchor aria-hidden=true href=#csp의-실제-활용-사례>#</a></h3><p>대형 웹사이트들의 CSP 구현 예시:</p><ol><li>GitHub의 CSP:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>Content-Security-Policy: default-src &#39;none&#39;; base-uri &#39;self&#39;; block-all-mixed-content; connect-src &#39;self&#39; uploads.github.com www.githubstatus.com collector.githubapp.com api.github.com...
</span></span></span></code></pre></td></tr></table></div></div><ol start=2><li>Twitter의 CSP:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>Content-Security-Policy: default-src &#39;self&#39;; connect-src &#39;self&#39; https://*.twitter.com https://*.twimg.com...
</span></span></span></code></pre></td></tr></table></div></div><hr><h2 id=참고-및-출처-reference>참고 및 출처## Reference<a hidden class=anchor aria-hidden=true href=#참고-및-출처-reference>#</a></h2><p><a href=https://developer.mozilla.org/ko/docs/Glossary/CSP>CSP</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://buenhyden.github.io/tags/security/>Security</a></li><li><a href=https://buenhyden.github.io/tags/security-policy/>Security-Policy</a></li><li><a href=https://buenhyden.github.io/tags/content-security-policy/>Content-Security-Policy</a></li><li><a href=https://buenhyden.github.io/tags/csp/>CSP</a></li></ul></footer><div class=comments><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const n={src:"https://giscus.app/client.js","data-repo":"buenhyden/buenhyden.github.io","data-repo-id":"R_kgDONsSnFQ","data-category":"General","data-category-id":"DIC_kwDONsSnFc4CmK-R","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":getStoredTheme(),"data-lang":"en","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(n).forEach(([t,n])=>e.setAttribute(t,n)),console.log(e),document.querySelector(".comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme)})</script></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://buenhyden.github.io/>hyunyoun's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>